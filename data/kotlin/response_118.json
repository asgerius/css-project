[{"tags": ["kotlin", "coroutine"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7857297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2839f72b0fc06780585d6ac47b1daf59?s=128&d=identicon&r=PG&f=1", "display_name": "t.hill", "link": "https://stackoverflow.com/users/7857297/t-hill"}, "edited": false, "score": 0, "creation_date": 1492042926, "post_id": 43374209, "comment_id": 73825308, "body": "Ah,  OK! now I understand. Thank you for your reply!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 11, "last_activity_date": 1492033411, "last_edit_date": 1492033411, "creation_date": 1492012161, "answer_id": 43374209, "question_id": 43373792, "link": "https://stackoverflow.com/questions/43373792/kotlin-coroutine-val-vs-fun/43374209#43374209", "title": "kotlin coroutine val vs fun", "body": "<p>The <em>case 1</em> is equivalent to</p>\n\n<pre><code>val A = a()\nawait(A)\nval B = b()\nawait(B)\n</code></pre>\n\n<p>That is, you start <code>A</code>, await it (here the coroutine suspends), and only then you start <code>B</code>, thus <code>A</code> and <code>B</code> are executed sequentially, not simultaneously.</p>\n\n<p>In <em>case 2</em> you start both <code>A</code> and <code>B</code> and only then the coroutine suspends waiting for <code>A</code> and <code>B</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 7857297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2839f72b0fc06780585d6ac47b1daf59?s=128&d=identicon&r=PG&f=1", "display_name": "t.hill", "link": "https://stackoverflow.com/users/7857297/t-hill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 43374209, "answer_count": 1, "score": 3, "last_activity_date": 1492033411, "creation_date": 1492010883, "question_id": 43373792, "link": "https://stackoverflow.com/questions/43373792/kotlin-coroutine-val-vs-fun", "title": "kotlin coroutine val vs fun", "body": "<p>I'm new learner to coroutine and Kotlin.\nWhy do I obtain different results, case 1 and 2 below?</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) = runBlocking {\n    fun a() = async(CommonPool) {\n        println(\"start A\")\n        delay(1000)\n        println(\"finish A\")\n    }\n\n    fun b() = async(CommonPool) {\n        println(\"start B\")\n        delay(1000)\n        println(\"finish B\")\n    }\n\n    //case 1\n    a().await()\n    b().await()\n\n    //case 2\n    val A = a()\n    val B = b()\n    A.await()\n    B.await()\n}\n</code></pre>\n\n<p>Is this val style coding basic?</p>\n"}, {"tags": ["javascript", "android", "scala", "kotlin", "scala.js"], "answers": [{"tags": [], "owner": {"reputation": 2539, "user_id": 1245509, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e404bcf43afd2247c16b9b6b377d8c33?s=128&d=identicon&r=PG", "display_name": "Justin du Coeur", "link": "https://stackoverflow.com/users/1245509/justin-du-coeur"}, "is_accepted": true, "score": 2, "last_activity_date": 1492004324, "creation_date": 1492004324, "answer_id": 43371224, "question_id": 43370697, "link": "https://stackoverflow.com/questions/43370697/headless-single-source-library-for-jvm-and-javascript/43371224#43371224", "title": "Headless single-source library for JVM and JavaScript", "body": "<p>Well, the basics are very normal for Scala/Scala.js these days -- many libraries cross-compile with no changes. The Scala.js compiler is highly optimized, and only includes code that is actually invoked, so the output is reasonably lean. (Unless you need bulky external dependencies, which the SJS compiler can't do much about.)</p>\n\n<p>Managing the dependency differences will be some extra effort, if you need to deal with them differently on the two sides. This isn't terribly unusual for Scala/Scala.js, but does require that the project be structured for that. The <a href=\"https://www.scala-js.org/api/sbt-scalajs/0.6.15/#org.scalajs.sbtplugin.cross.CrossProject\" rel=\"nofollow noreferrer\">documentation of CrossProject</a> gets into the details.</p>\n\n<p>But overall -- yeah, that's all fairly common at this point...</p>\n"}], "owner": {"reputation": 11144, "user_id": 2176962, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/be000b5e22ce83d9e2ecdfe559279030?s=128&d=identicon&r=PG", "display_name": "hgoebl", "link": "https://stackoverflow.com/users/2176962/hgoebl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 43371224, "answer_count": 1, "score": 2, "last_activity_date": 1492004324, "creation_date": 1492003092, "question_id": 43370697, "link": "https://stackoverflow.com/questions/43370697/headless-single-source-library-for-jvm-and-javascript", "title": "Headless single-source library for JVM and JavaScript", "body": "<p>I need to write a library that can be <strong>compiled to Java-classes</strong> (to be more specific: Android) <strong>and JavaScript</strong> or TypeScript (modern Browser and Node.js).</p>\n\n<p>The lib will deal with lists of objects with a lot of numbers and has to calculate statistics and filter/manipulate the lists. No rocket-science, dependencies can be bridged for each environment. No problems with decimal arithmetics. (=> The libs could be developed in TypeScript and Java, but nobody wants to maintain 2 semantically equal sources.)</p>\n\n<p>I've no fear to learn a new language, but integration should be smooth (i.e. create a .jar with standard Java interface and Java types and a .js file for JavaScript/TypeScript without hundreds of kilobytes of runtime).</p>\n\n<p>Could I choose <strong>Scala/Scala.js</strong> for this?</p>\n\n<p>Would it work with <strong>Kotlin</strong>?</p>\n\n<p>Has anybody of you guys managed an equal task successfully? What are the caveats?</p>\n"}, {"tags": ["java", "kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 5618, "user_id": 4681060, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002889988419/picture?type=large", "display_name": "Krzysztof Cichocki", "link": "https://stackoverflow.com/users/4681060/krzysztof-cichocki"}, "edited": false, "score": 0, "creation_date": 1491998296, "post_id": 43367614, "comment_id": 73799407, "body": "I work everyday with some so-called smart people inventions (aka projects), and this makes my work as a dev a nightmare, you mix uneccesserly technologies and ruin your, and others life doing so. Why you can&#39;t use java? Isn&#39;t it look stupid, to have to tell the language, that you are returning from a Thread writing that return statement inside a Thread? Do you feel what is good and what is bad? Do you have aesthetic sense when creating something? Progress is not when you just do another random thing, progres is when you feel it is right thing to do. Making more trouble isn&#39;t progress at all."}], "answers": [{"comments": [{"owner": {"reputation": 27797, "user_id": 88111, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6a285784d6695c4d2a503c7003f4af0f?s=128&d=identicon&r=PG", "display_name": "Craig Otis", "link": "https://stackoverflow.com/users/88111/craig-otis"}, "edited": false, "score": 0, "creation_date": 1491997332, "post_id": 43367765, "comment_id": 73798838, "body": "Ah great, I didn&#39;t realize the difference in the <code>return</code> behavior - thanks for pointing that out, and for the <code>thread { }</code> shortcut."}, {"owner": {"reputation": 1824, "user_id": 944768, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0b10ce03917354f5e5e47e9e32c4209a?s=128&d=identicon&r=PG&f=1", "display_name": "hevi", "link": "https://stackoverflow.com/users/944768/hevi"}, "edited": false, "score": 0, "creation_date": 1564753994, "post_id": 43367765, "comment_id": 101145721, "body": "should be <code>.start()</code> instead of <code>.run()</code> to be started in a different thread."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 10, "last_activity_date": 1491995715, "last_edit_date": 1495542360, "creation_date": 1491994969, "answer_id": 43367765, "question_id": 43367614, "link": "https://stackoverflow.com/questions/43367614/converting-thread-runnable-implementation-from-java-to-kotlin/43367765#43367765", "title": "Converting Thread/Runnable implementation from Java to Kotlin", "body": "<p>In Kotlin, <code>return</code> statements inside lambdas work differently from those in Java. If you write just <code>return</code>, it means return from the innermost function declared with keyword <code>fun</code>, and it ignores lambdas -- in your code, it means 'return from <code>every</code>'.</p>\n\n<p>To return from a lambda, use qualified <code>return@label</code>-- in your case, it's <code>return@Thread</code> (and <code>return@Runnable</code> for the second example), like in this simplified snippet:</p>\n\n<pre><code>for (i in 1..4) {\n    Thread { \n        if (i % 2 == 0)\n            return@Thread\n        println(\"Thread $i\")\n    }.run()\n}\n</code></pre>\n\n<p><a href=\"https://try.kotlinlang.org/#/UserProjects/kinaskevque6t5fastp6rsp9on/q89g5c956chr78jfk1ln61uoaa\" rel=\"nofollow noreferrer\"><sup>(runnable demo of this code)</sup></a></p>\n\n<p>Also, there is a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/thread.html\" rel=\"nofollow noreferrer\"><code>thread { ... }</code></a> function in <code>kotlin-stdlib</code> that you might find useful (and, similarly, the return statement for its lambda is <code>return@thread</code>).</p>\n\n<p>You can find a more detailed explanation in the <a href=\"https://kotlinlang.org/docs/reference/returns.html#return-at-labels\" rel=\"nofollow noreferrer\">language reference</a> and in <a href=\"https://stackoverflow.com/questions/40160489/kotlin-whats-does-return-mean\">this answer</a>.</p>\n"}], "owner": {"reputation": 27797, "user_id": 88111, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6a285784d6695c4d2a503c7003f4af0f?s=128&d=identicon&r=PG", "display_name": "Craig Otis", "link": "https://stackoverflow.com/users/88111/craig-otis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8724, "favorite_count": 2, "accepted_answer_id": 43367765, "answer_count": 1, "score": 8, "last_activity_date": 1491995715, "creation_date": 1491994559, "question_id": 43367614, "link": "https://stackoverflow.com/questions/43367614/converting-thread-runnable-implementation-from-java-to-kotlin", "title": "Converting Thread/Runnable implementation from Java to Kotlin", "body": "<p>I have an existing Java class <code>ThreadUtils</code> with a method <code>every</code> that looks like:</p>\n\n<pre><code>public class ThreadUtil {\n\n    public static Thread every(int seconds, Runnable r) {\n        Thread t = new Thread(() -&gt; {\n            while(true) {\n                r.run();\n                try {\n                    Thread.sleep(1000 * seconds);\n                } catch (InterruptedException e) {\n                    return;\n                }\n            }\n        });\n        t.start();\n        return t;\n    }\n}\n</code></pre>\n\n<p>And I'm trying to convert it to Kotlin. I'm a bit hung up on the Runnable closure. This fails with a bad <code>return</code>:</p>\n\n<pre><code>fun every(seconds: Int, r: Runnable): Thread {\n    val t = Thread({\n        while (true) {\n            r.run()\n            try {\n                Thread.sleep((1000 * seconds).toLong())\n            } catch (e: InterruptedException) {\n                return // ERROR: This function must return a value of type Thread\n            }\n        }\n    })\n    t.start()\n    return t\n}\n</code></pre>\n\n<p>I also tried pulling the Runnable out just to help myself separate things, but this also fails the same way:</p>\n\n<pre><code>fun every(seconds: Int, r: Runnable): Thread {\n    val internalRunnable = Runnable {\n        while (true) {\n            r.run()\n            try {\n                Thread.sleep((1000 * seconds).toLong())\n            } catch (e: InterruptedException) {\n                return // ERROR: This function must return a value of type Thread\n            }\n        }\n    }\n    val t = Thread(internalRunnable)\n    t.start()\n    return t\n}\n</code></pre>\n\n<p>How can I implement a <code>@FunctionalInterface</code> or similar-style closure/lambda that doesn't try to <code>return</code> <em>from the function</em> in which it's being defined?</p>\n"}, {"tags": ["android", "crash", "rx-java", "kotlin", "parcel"], "comments": [{"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1491985579, "post_id": 43364135, "comment_id": 73789975, "body": "Have you checked <a href=\"http://stackoverflow.com/questions/39098590/android-os-transactiontoolargeexception-on-nougat\">this</a>?"}, {"owner": {"reputation": 8233, "user_id": 7594961, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dnyEy.jpg?s=128&g=1", "display_name": "Bertram Gilfoyle", "link": "https://stackoverflow.com/users/7594961/bertram-gilfoyle"}, "edited": false, "score": 1, "creation_date": 1491985772, "post_id": 43364135, "comment_id": 73790102, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11451393/what-to-do-on-transactiontoolargeexception\">What to do on TransactionTooLargeException</a>"}, {"owner": {"reputation": 1, "user_id": 7579738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574db39c2a15261ec8ca825d7ca22d55?s=128&d=identicon&r=PG&f=1", "display_name": "Ola Nordmann", "link": "https://stackoverflow.com/users/7579738/ola-nordmann"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1491985930, "post_id": 43364135, "comment_id": 73790211, "body": "I will check it out @Piyush!"}, {"owner": {"reputation": 1, "user_id": 7579738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574db39c2a15261ec8ca825d7ca22d55?s=128&d=identicon&r=PG&f=1", "display_name": "Ola Nordmann", "link": "https://stackoverflow.com/users/7579738/ola-nordmann"}, "reply_to_user": {"reputation": 8233, "user_id": 7594961, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dnyEy.jpg?s=128&g=1", "display_name": "Bertram Gilfoyle", "link": "https://stackoverflow.com/users/7594961/bertram-gilfoyle"}, "edited": false, "score": 0, "creation_date": 1491985993, "post_id": 43364135, "comment_id": 73790260, "body": "Could be @AhamadAnees! Thanks for link, I will check it out!"}], "answers": [{"comments": [{"owner": {"reputation": 429, "user_id": 1725347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D7VoR.jpg?s=128&g=1", "display_name": "wax911", "link": "https://stackoverflow.com/users/1725347/wax911"}, "edited": false, "score": 0, "creation_date": 1501086162, "post_id": 43364317, "comment_id": 77626929, "body": "True, although in previous versions of android the problem was always there but was never fully detailed, below android 6.0 you would get an exception like address already in use or something funny"}], "tags": [], "owner": {"reputation": 157, "user_id": 6179245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d05b77066616c1a15fb852d643e5ed9b?s=128&d=identicon&r=PG&f=1", "display_name": "jburn2712", "link": "https://stackoverflow.com/users/6179245/jburn2712"}, "is_accepted": false, "score": 0, "last_activity_date": 1491985946, "creation_date": 1491985946, "answer_id": 43364317, "question_id": 43364135, "link": "https://stackoverflow.com/questions/43364135/why-am-i-getting-a-android-os-transactiontoolargeexception-in-my-android-app-wri/43364317#43364317", "title": "Why am I getting a android.os.TransactionTooLargeException in my Android App written in Kotlin/rxJava when I am exiting the app? (onExit/onPause)?", "body": "<p>This is caused when an Activity's savedInstanceState bundle is too large. You need to check what objects are being retained when onPause is called. I had this exact same problem when I was dealing with Bitmaps. I believe this is actually only an issue on newer versions of Android since it actually throws an exception now instead of just suppressing it. </p>\n"}], "owner": {"reputation": 1, "user_id": 7579738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574db39c2a15261ec8ca825d7ca22d55?s=128&d=identicon&r=PG&f=1", "display_name": "Ola Nordmann", "link": "https://stackoverflow.com/users/7579738/ola-nordmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491985946, "creation_date": 1491985410, "question_id": 43364135, "link": "https://stackoverflow.com/questions/43364135/why-am-i-getting-a-android-os-transactiontoolargeexception-in-my-android-app-wri", "title": "Why am I getting a android.os.TransactionTooLargeException in my Android App written in Kotlin/rxJava when I am exiting the app? (onExit/onPause)?", "body": "<p>I am working on a App in Kotlin/rxJava and I have been struggling with an error for a while now. </p>\n\n<p>Every time I exit the application I get a popup where it says: \u201cUnfortunately, AppName has stopped.\u201d. </p>\n\n<p>I get this error in the console: \n<strong>java.lang.RuntimeException: android.os.TransactionTooLargeException: data parcel size 896824 bytes</strong><code>**enter code here**</code></p>\n\n<p>When I use a phone with API 23 or lower the error does not occur, but with 24 and 25 I get the error and the app \u201ccrashes\u201d AFTER I have exited the app. And it is getting really annoying, both for me as a developer and of course for the users.</p>\n\n<p>The error happens whenever I try to exit the app in any fashion. If I click on a link that takes me to the browser, add/send a contact person from my App to the contact list on the phone or share via Gmail, Google+, bluetooth, etc. the error occurs. So what happens is that on all of these issues I have to exit the app(press the homebutton) or open another application from the app (contacts, gmail, etc.) and the app crashes.</p>\n\n<p>I can also mention that when I add a person from my app to the phones contact list all the information gets sent, and I am able to add the person. </p>\n\n<p>Does anyone have any clue why this happonds? Feel free to ask me for more details if that is necessary, I have had this bug for a while now and it is very irritating. </p>\n\n<p><strong>Entire error:</strong></p>\n\n<pre><code>04-12 08:46:18.128 23287-23287/com.****.***** E/AndroidRuntime: FATAL EXCEPTION: main\n                                                                         Process: com.******.*******, PID: 23287\n                                                                         java.lang.RuntimeException: android.os.TransactionTooLargeException: data parcel size 896824 bytes\n                                                                             at android.app.ActivityThread$StopInfo.run(ActivityThread.java:3781)\n                                                                             at android.os.Handler.handleCallback(Handler.java:751)\n                                                                             at android.os.Handler.dispatchMessage(Handler.java:95)\n                                                                             at android.os.Looper.loop(Looper.java:154)\n                                                                             at android.app.ActivityThread.main(ActivityThread.java:6119)\n                                                                             at java.lang.reflect.Method.invoke(Native Method)\n                                                                             at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n                                                                             at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n                                                                          Caused by: android.os.TransactionTooLargeException: data parcel size 896824 bytes\n                                                                             at android.os.BinderProxy.transactNative(Native Method)\n                                                                             at android.os.BinderProxy.transact(Binder.java:615)\n                                                                             at android.app.ActivityManagerProxy.activityStopped(ActivityManagerNative.java:3636)\n                                                                             at android.app.ActivityThread$StopInfo.run(ActivityThread.java:3773)\n                                                                             at android.os.Handler.handleCallback(Handler.java:751)\u00a0\n                                                                             at android.os.Handler.dispatchMessage(Handler.java:95)\u00a0\n                                                                             at android.os.Looper.loop(Looper.java:154)\u00a0\n                                                                             at android.app.ActivityThread.main(ActivityThread.java:6119)\u00a0\n                                                                             at java.lang.reflect.Method.invoke(Native Method)\u00a0\n                                                                             at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\u00a0\n                                                                             at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\u00a0\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 1, "creation_date": 1492005227, "post_id": 43363161, "comment_id": 73804952, "body": "<a href=\"https://kotlinlang.org/docs/reference/functions.html#single-expression-functions\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 502, "user_id": 7684427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iwmP0.jpg?s=128&g=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/7684427/shrikant"}, "edited": false, "score": 0, "creation_date": 1491984214, "post_id": 43363504, "comment_id": 73789089, "body": "so what is difference between returning &quot;Int&quot; and &quot;Int?&quot; and why is there &quot;=&quot; sign in function in first case"}, {"owner": {"reputation": 1214, "user_id": 6095439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0a801257ee75e0987200564b0ea798?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/6095439/john"}, "edited": false, "score": 0, "creation_date": 1491984278, "post_id": 43363504, "comment_id": 73789129, "body": "&quot;Int?&quot; is nullable and &quot;Int&quot; is not"}, {"owner": {"reputation": 502, "user_id": 7684427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iwmP0.jpg?s=128&g=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/7684427/shrikant"}, "reply_to_user": {"reputation": 1214, "user_id": 6095439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0a801257ee75e0987200564b0ea798?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/6095439/john"}, "edited": false, "score": 0, "creation_date": 1491984551, "post_id": 43363504, "comment_id": 73789278, "body": "@John as syntax of function should be like this &quot;fun fun_name() { }&quot; but in first case it is like &quot;fun fun_name() =&quot;"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1491985653, "post_id": 43363504, "comment_id": 73790025, "body": "When you use <code>fun fun_name() = &lt;expression&gt;</code>, the compiler will automatically infer the return type of the function to be the type of the expression. With brackets, the default return type is <code>Unit</code>, so you have to specify the type if you return something else."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 502, "user_id": 7684427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iwmP0.jpg?s=128&g=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/7684427/shrikant"}, "edited": false, "score": 0, "creation_date": 1492005799, "post_id": 43363504, "comment_id": 73805453, "body": "@deadpool007 please read the <a href=\"http://kotlinlang.org/docs/reference/functions.html\" rel=\"nofollow noreferrer\">official documentation</a> - it is quite concise and clear about all the syntax nuances"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1491983523, "creation_date": 1491983523, "answer_id": 43363504, "question_id": 43363161, "link": "https://stackoverflow.com/questions/43363161/kotlin-programming-basics/43363504#43363504", "title": "Kotlin programming basics", "body": "<p>The only difference is the return type: it is <code>Int</code> in the first case, and <code>Int?</code> in the second case. </p>\n\n<p>That difference affects you in 2 ways:</p>\n\n<p>1) The code that uses <code>max</code> in the 2nd case cannot know if it returns <code>null</code> or not, so it must check for it every time (with <code>if-else</code> or other techniques)</p>\n\n<p>2) Underlying byte code for the 1st case (assuming you use JVM backend) uses primitive <code>int</code>, not boxed <code>Integer</code>. This can give you a significant performance boost. </p>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 5, "last_activity_date": 1492695560, "last_edit_date": 1492695560, "creation_date": 1492005486, "answer_id": 43371680, "question_id": 43363161, "link": "https://stackoverflow.com/questions/43363161/kotlin-programming-basics/43371680#43371680", "title": "Kotlin programming basics", "body": "<p>You have three main differences between the two functions:</p>\n\n<ol>\n<li>The return type is different (as voddan has pointed out).</li>\n<li>The body style is different (this is just syntactical sugar).</li>\n<li>The first function's bytecode is more efficient.</li>\n</ol>\n\n<hr>\n\n<h1>The return type</h1>\n\n<p>Kotlin has <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#nullable-types-and-non-null-types\" rel=\"nofollow noreferrer\">nullable types and non-null types</a>. <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/\" rel=\"nofollow noreferrer\"><code>Int</code></a> can be used in Kotlin code as nullable, <code>Int?</code>, or non-null, <code>Int</code>, and on the JVM are mapped to <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html\" rel=\"nofollow noreferrer\"><code>Integer</code></a> and <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\"><code>int</code></a> respectively.</p>\n\n<h1>The body style</h1>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/functions.html#single-expression-functions\" rel=\"nofollow noreferrer\">Single-expression functions</a> in Kotlin can be declared more concisely using an expression body (as opposed to the normal block body). The following generate the same bytecode:</p>\n\n<h2>Expression body style</h2>\n\n<pre><code>fun max(a: Int, b: Int) = if (a &gt; b) a else b\n</code></pre>\n\n<p>The return type can also be declared explicitly:</p>\n\n<pre><code>fun max(a: Int, b: Int): Int = if (a &gt; b) a else b\n</code></pre>\n\n<h2>Block body style</h2>\n\n<pre><code>fun max(a: Int, b: Int): Int {\n    return if (a &gt; b) a else b\n}\n</code></pre>\n\n<h1>The bytecode</h1>\n\n<p>The first function's bytecode loads the value based on the condition and then returns the loaded value while the second function's bytecode declares two blocks each defining it's own load and return resulting in more generated bytecode.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>   L0\n    LINENUMBER 8 L0\n    ILOAD 0\n    ILOAD 1\n    IF_ICMPLE L1\n    ILOAD 0\n    GOTO L2\n   L1\n    ILOAD 1\n   L2\n    IRETURN\n</code></pre>\n\n<p>vs.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>   L0\n    LINENUMBER 8 L0\n    ILOAD 0\n    ILOAD 1\n    IF_ICMPLE L1\n   L2\n    LINENUMBER 9 L2\n    ILOAD 0\n    IRETURN\n   L3\n   L1\n    LINENUMBER 11 L1\n    ILOAD 1\n    IRETURN\n</code></pre>\n"}], "owner": {"reputation": 502, "user_id": 7684427, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iwmP0.jpg?s=128&g=1", "display_name": "Shrikant", "link": "https://stackoverflow.com/users/7684427/shrikant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 43371680, "answer_count": 2, "score": 0, "last_activity_date": 1492695560, "creation_date": 1491982431, "last_edit_date": 1491982978, "question_id": 43363161, "link": "https://stackoverflow.com/questions/43363161/kotlin-programming-basics", "title": "Kotlin programming basics", "body": "<p>I'm trying to learn Kotlin and I come with a question while using functions.</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    println(max(20, 10))\n}\n\nfun max(a: Int, b: Int) = if (a &gt; b) a else b\n</code></pre>\n\n<p>Here I have a function MAX. Now is there any difference between above implementation and below implementation of function MAX though both gives same output.</p>\n\n<pre><code>fun max(a: Int, b: Int): Int?{\n    if(a &gt; b)\n        return a\n    else\n        return b\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 21361, "user_id": 523325, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/hCF4v.png?s=128&g=1", "display_name": "Nguyen  Minh Binh", "link": "https://stackoverflow.com/users/523325/nguyen-minh-binh"}, "edited": false, "score": 16, "creation_date": 1491921301, "post_id": 43348715, "comment_id": 73761212, "body": "Thanks! Super easy. Found an example here <a href=\"http://jamie.mccrindle.org/2013/02/exploring-kotlin-standard-library-part-3.html\" rel=\"nofollow noreferrer\">jamie.mccrindle.org/2013/02/&hellip;</a> <code>Timer(&quot;SettingUp&quot;, false).schedule(500) { doSomething() }</code>"}, {"owner": {"reputation": 595, "user_id": 261769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c7ffbe6da44781e7f9fe527d086c6aa?s=128&d=identicon&r=PG", "display_name": "Customizer", "link": "https://stackoverflow.com/users/261769/customizer"}, "edited": false, "score": 13, "creation_date": 1514680194, "post_id": 43348715, "comment_id": 83048373, "body": "It does compile, if you add these two imports: import java.util.Timer and import kotlin.concurrent.schedule"}, {"owner": {"reputation": 4749, "user_id": 1821772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec23b33aa00a0fee6ef00aaf926dc0a?s=128&d=identicon&r=PG", "display_name": "Sulfkain", "link": "https://stackoverflow.com/users/1821772/sulfkain"}, "edited": false, "score": 3, "creation_date": 1516093759, "post_id": 43348715, "comment_id": 83538489, "body": "@Matias Elorriaga, for me, putting this on a new brand file doesn&#39;t compile, even adding the imports Customizer said"}, {"owner": {"reputation": 7367, "user_id": 1742973, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6ea28ba189bf64baba86a9afd6efc257?s=128&d=identicon&r=PG", "display_name": "Matias Elorriaga", "link": "https://stackoverflow.com/users/1742973/matias-elorriaga"}, "edited": false, "score": 3, "creation_date": 1516109929, "post_id": 43348715, "comment_id": 83548745, "body": "you don&#39;t need to put it on a file, that method is part of stdlib, follow the link in the first line of the answer,"}, {"owner": {"reputation": 9837, "user_id": 483520, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4fc6e3d12a3ca9dd7998d4109b3415ca?s=128&d=identicon&r=PG", "display_name": "Nolan Amy", "link": "https://stackoverflow.com/users/483520/nolan-amy"}, "edited": false, "score": 0, "creation_date": 1536319024, "post_id": 43348715, "comment_id": 91391259, "body": "@MatiasElorriaga I think the people want an example! :)"}, {"owner": {"reputation": 4450, "user_id": 1274398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/T2QI4.png?s=128&g=1", "display_name": "Bart Burg", "link": "https://stackoverflow.com/users/1274398/bart-burg"}, "edited": false, "score": 2, "creation_date": 1537441211, "post_id": 43348715, "comment_id": 91790007, "body": "for those that would like to have it run at an interval: timer.scheduleAtFixedRate(0, inactivityHeartbeat) { //.... do stuff}"}, {"owner": {"reputation": 1223, "user_id": 650894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b76a642537783acc3d0b6dfb44536925?s=128&d=identicon&r=PG", "display_name": "Joe Lapp", "link": "https://stackoverflow.com/users/650894/joe-lapp"}, "edited": false, "score": 3, "creation_date": 1556637559, "post_id": 43348715, "comment_id": 98501721, "body": "I originally thought this wouldn&#39;t compile even after importing <code>kotlin.concurrent.schedule</code>, because Kotlin merely complained of a signature mismatch, but then I realized I was trying to pass an Int instead of a Long. It compiled after correcting that."}, {"owner": {"reputation": 8280, "user_id": 346309, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DzDIR.jpg?s=128&g=1", "display_name": "JPM", "link": "https://stackoverflow.com/users/346309/jpm"}, "edited": false, "score": 0, "creation_date": 1563479200, "post_id": 43348715, "comment_id": 100724319, "body": "Can someone show this as an example.  Cut and pasted this and it does not compile had both imports too.  Says the schedule needs a body on the inline function"}, {"owner": {"reputation": 187, "user_id": 1107274, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/044711b80d9c11a302f7b20d704c8217?s=128&d=identicon&r=PG&f=1", "display_name": "y2kbug", "link": "https://stackoverflow.com/users/1107274/y2kbug"}, "edited": false, "score": 0, "creation_date": 1565877828, "post_id": 43348715, "comment_id": 101489836, "body": "May I know how to cancel the timer?"}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1566628546, "post_id": 43348715, "comment_id": 101724061, "body": "Downvoted because it doesn&#39;t compile like many of the comments have already indicated."}, {"owner": {"reputation": 7367, "user_id": 1742973, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6ea28ba189bf64baba86a9afd6efc257?s=128&d=identicon&r=PG", "display_name": "Matias Elorriaga", "link": "https://stackoverflow.com/users/1742973/matias-elorriaga"}, "reply_to_user": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1566644182, "post_id": 43348715, "comment_id": 101726959, "body": "@AndroidDev is part of the standard library, you don\u2019t need to compile, just add the import.."}, {"owner": {"reputation": 1516, "user_id": 563133, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a9851496fe108c330acc2c0f1c452e80?s=128&d=identicon&r=PG", "display_name": "Vahid Pazirandeh", "link": "https://stackoverflow.com/users/563133/vahid-pazirandeh"}, "reply_to_user": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 1, "creation_date": 1573241319, "post_id": 43348715, "comment_id": 103831315, "body": "@IgorGanapolsky - this code compiles fine on Kotlin 1.3.50. What&#39;s your error msg? You might have faced my initial problem: make sure the numeric value passed in (500) is a Long and not Int. You&#39;ll get a compile error if you do something like: Timer(&quot;SettingUp&quot;, false).schedule(500+x) {} where &quot;x&quot; is an Int you declared elsewhere. Declare x as a Long and you&#39;ll be fine, e.g., val x = 25L"}, {"owner": {"reputation": 1700, "user_id": 5674583, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/8WOaR.png?s=128&g=1", "display_name": "Blue Bot", "link": "https://stackoverflow.com/users/5674583/blue-bot"}, "edited": false, "score": 0, "creation_date": 1598175818, "post_id": 43348715, "comment_id": 112367036, "body": "that work great! Following question is how to insert my class scope inside of this. AKA  replace ` doSomething()` with <code>this.myFunc()</code>?"}], "tags": [], "owner": {"reputation": 7367, "user_id": 1742973, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6ea28ba189bf64baba86a9afd6efc257?s=128&d=identicon&r=PG", "display_name": "Matias Elorriaga", "link": "https://stackoverflow.com/users/1742973/matias-elorriaga"}, "is_accepted": true, "score": 170, "last_activity_date": 1565012860, "last_edit_date": 1565012860, "creation_date": 1491920618, "answer_id": 43348715, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/43348715#43348715", "title": "How to call a function after delay in Kotlin?", "body": "<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/java.util.-timer/schedule.html\" rel=\"noreferrer\">Schedule</a></p>\n\n<pre><code>inline fun Timer.schedule(\n    delay: Long, \n    crossinline action: TimerTask.() -&gt; Unit\n): TimerTask (source)\n</code></pre>\n\n<p>example (thanks @Nguyen Minh Binh - found it here: <a href=\"http://jamie.mccrindle.org/2013/02/exploring-kotlin-standard-library-part-3.html\" rel=\"noreferrer\">http://jamie.mccrindle.org/2013/02/exploring-kotlin-standard-library-part-3.html</a>)</p>\n\n<pre><code>import java.util.Timer\nimport kotlin.concurrent.schedule\n\nTimer(\"SettingUp\", false).schedule(500) { \n   doSomething()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "edited": false, "score": 23, "creation_date": 1492695822, "post_id": 43402513, "comment_id": 74095933, "body": "Please add that it is only available on android, since the question asks for a general kotlin method (although it does have the Android tag)"}, {"owner": {"reputation": 4489, "user_id": 4791032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OeqJTPf-miM/AAAAAAAAAAI/AAAAAAAAACc/nqviDd0vRck/photo.jpg?sz=128", "display_name": "Bogdan Ustyak", "link": "https://stackoverflow.com/users/4791032/bogdan-ustyak"}, "reply_to_user": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "edited": false, "score": 5, "creation_date": 1492720056, "post_id": 43402513, "comment_id": 74111479, "body": "It&#39;s not constructive from your side. As a result when users will search android tag might think that this is wrong answer."}, {"owner": {"reputation": 530, "user_id": 2009420, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/hI0IZ.jpg?s=128&g=1", "display_name": "woprandi", "link": "https://stackoverflow.com/users/2009420/woprandi"}, "edited": false, "score": 11, "creation_date": 1524232458, "post_id": 43402513, "comment_id": 86902679, "body": "For Android, it&#39;s better to use Handler than Timer : <a href=\"https://stackoverflow.com/questions/20330355/timertask-or-handler\" title=\"timertask or handler\">stackoverflow.com/questions/20330355/timertask-or-handler</a>"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1548833831, "post_id": 43402513, "comment_id": 95680258, "body": "I think, you should add a code for removing handlers after activity/fragment finish."}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 1, "creation_date": 1566628637, "post_id": 43402513, "comment_id": 101724081, "body": "This will not run on the UI thread if you intended on doing that."}], "tags": [], "owner": {"reputation": 4489, "user_id": 4791032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OeqJTPf-miM/AAAAAAAAAAI/AAAAAAAAACc/nqviDd0vRck/photo.jpg?sz=128", "display_name": "Bogdan Ustyak", "link": "https://stackoverflow.com/users/4791032/bogdan-ustyak"}, "is_accepted": false, "score": 213, "last_activity_date": 1492121500, "creation_date": 1492121500, "answer_id": 43402513, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/43402513#43402513", "title": "How to call a function after delay in Kotlin?", "body": "<p>There is also an option to use <code>Handler -&gt; postDelayed</code></p>\n\n<pre><code> Handler().postDelayed({\n                    //doSomethingHere()\n                }, 1000)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4727, "user_id": 6696558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tA43f.jpg?s=128&g=1", "display_name": "Hugo Passos", "link": "https://stackoverflow.com/users/6696558/hugo-passos"}, "edited": false, "score": 1, "creation_date": 1513928992, "post_id": 45350152, "comment_id": 82844494, "body": "Can you please explain me why I there&#39;s need to write &quot;timerTask&quot; instead of just braces?"}, {"owner": {"reputation": 554, "user_id": 1466983, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/37484fd3217d0dc5a078350523599a18?s=128&d=identicon&r=PG", "display_name": "Blieque", "link": "https://stackoverflow.com/users/1466983/blieque"}, "edited": false, "score": 3, "creation_date": 1522171082, "post_id": 45350152, "comment_id": 86043236, "body": "I think you do. <code>Timer.schedule()</code> expects a <code>TimerTask</code> as it&#39;s first argument. <code>kotlin.concurrent.timerTask()</code> wraps the given lambda in a <code>TimerTask</code> instance. See here: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/timer-task.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/&hellip;</a>"}, {"owner": {"reputation": 554, "user_id": 1466983, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/37484fd3217d0dc5a078350523599a18?s=128&d=identicon&r=PG", "display_name": "Blieque", "link": "https://stackoverflow.com/users/1466983/blieque"}, "edited": false, "score": 0, "creation_date": 1522171208, "post_id": 45350152, "comment_id": 86043309, "body": "Also, the given example can be condensed to one line if the <code>Timer</code> object isn&#39;t going to be used more than once, e.g., <code>Timer().schedule(timerTask { ... }, 3000)</code>. A more Kotlin-friendly option is available too; see jonguer&#39;s answer."}], "tags": [], "owner": {"reputation": 917, "user_id": 2959172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100003952440056/picture?type=large", "display_name": "varghesekutty", "link": "https://stackoverflow.com/users/2959172/varghesekutty"}, "is_accepted": false, "score": 28, "last_activity_date": 1501156711, "creation_date": 1501156711, "answer_id": 45350152, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/45350152#45350152", "title": "How to call a function after delay in Kotlin?", "body": "<pre><code>val timer = Timer()\ntimer.schedule(timerTask { nextScreen() }, 3000)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 829, "user_id": 5884431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Zd1hql9TsO8/AAAAAAAAAAI/AAAAAAAAACI/xBzZrbz_-EA/photo.jpg?sz=128", "display_name": "Eduardo Oliveros", "link": "https://stackoverflow.com/users/5884431/eduardo-oliveros"}, "edited": false, "score": 1, "creation_date": 1551268829, "post_id": 46441360, "comment_id": 96577047, "body": "can i cancel the call?"}], "tags": [], "owner": {"reputation": 1807, "user_id": 5846135, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e6b06a7170a0f02d0d3fbcce62f0b4ed?s=128&d=identicon&r=PG&f=1", "display_name": "Zeero0", "link": "https://stackoverflow.com/users/5846135/zeero0"}, "is_accepted": false, "score": 12, "last_activity_date": 1506495442, "creation_date": 1506495442, "answer_id": 46441360, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/46441360#46441360", "title": "How to call a function after delay in Kotlin?", "body": "<p>A simple example to show a toast after <strong>3 seconds</strong> :</p>\n\n<pre><code>fun onBtnClick() {\n    val handler = Handler()\n    handler.postDelayed({ showToast() }, 3000)\n}\n\nfun showToast(){\n    Toast.makeText(context, \"Its toast!\", Toast.LENGTH_SHORT).show()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 431, "user_id": 6105789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o08o3.jpg?s=128&g=1", "display_name": "jonguer", "link": "https://stackoverflow.com/users/6105789/jonguer"}, "is_accepted": false, "score": 43, "last_activity_date": 1517012555, "last_edit_date": 1517012555, "creation_date": 1517006578, "answer_id": 48470620, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/48470620#48470620", "title": "How to call a function after delay in Kotlin?", "body": "<p>You have to import the following two libraries:</p>\n\n<pre><code>import java.util.*\nimport kotlin.concurrent.schedule\n</code></pre>\n\n<p>and after that use it in this way:</p>\n\n<pre><code>Timer().schedule(10000){\n    //do something\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5291, "user_id": 5279156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vHs51.jpg?s=128&g=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5279156/vlad"}, "edited": false, "score": 1, "creation_date": 1573383333, "post_id": 51676124, "comment_id": 103857972, "body": "You can simplify this as extension fucntion"}, {"owner": {"reputation": 135, "user_id": 7067575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e65e900676bf50dffcf804db8254672?s=128&d=identicon&r=PG", "display_name": "binrebin", "link": "https://stackoverflow.com/users/7067575/binrebin"}, "edited": false, "score": 1, "creation_date": 1594807213, "post_id": 51676124, "comment_id": 111253509, "body": "@Ogulcan, more kotlinic lamda <code>Run.after(1000) { toRun() }</code>. Am I correct"}], "tags": [], "owner": {"reputation": 4880, "user_id": 1033899, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f673b9475f85fd6f49c62202aff96b5?s=128&d=identicon&r=PG", "display_name": "Ogulcan Orhan", "link": "https://stackoverflow.com/users/1033899/ogulcan-orhan"}, "is_accepted": false, "score": 8, "last_activity_date": 1533311092, "creation_date": 1533311092, "answer_id": 51676124, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/51676124#51676124", "title": "How to call a function after delay in Kotlin?", "body": "<p>If you are looking for generic usage, here is my suggestion:</p>\n\n<p>Create a class named as <code>Run</code>:</p>\n\n<pre><code>class Run {\n    companion object {\n        fun after(delay: Long, process: () -&gt; Unit) {\n            Handler().postDelayed({\n                process()\n            }, delay)\n        }\n    }\n}\n</code></pre>\n\n<p>And use like this:</p>\n\n<pre><code>Run.after(1000, {\n    // print something useful etc.\n})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1548833366, "post_id": 52801912, "comment_id": 95680005, "body": "Thanks! Strange, that coroutines were mentioned only in 2018."}, {"owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1548841938, "post_id": 52801912, "comment_id": 95684719, "body": "@coolMind they are stable since a few months, so they are quite new ..."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1548842049, "post_id": 52801912, "comment_id": 95684780, "body": "Yes, from October-November, but existed before."}], "tags": [], "owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "is_accepted": false, "score": 38, "last_activity_date": 1547570244, "last_edit_date": 1547570244, "creation_date": 1539514469, "answer_id": 52801912, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/52801912#52801912", "title": "How to call a function after delay in Kotlin?", "body": "<p>You could <code>launch</code> a coroutine, <code>delay</code> it and then call the function:</p>\n\n<pre><code> /*GlobalScope.*/launch {\n   delay(1000)\n   yourFn()\n }\n</code></pre>\n\n<p>If you are outside of a class or object prepend <code>GlobalScope</code> to let the coroutine run there, otherwise it is recommended to implement the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-scope/\" rel=\"noreferrer\"><code>CoroutineScope</code></a> in the surrounding class, which allows to cancel all coroutines associated to that scope if necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 1343, "user_id": 9005383, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-rymLhVRbsIw/AAAAAAAAAAI/AAAAAAAAG20/cTAJhtYO4mY/photo.jpg?sz=128", "display_name": "Tamim Attafi", "link": "https://stackoverflow.com/users/9005383/tamim-attafi"}, "edited": false, "score": 2, "creation_date": 1575006031, "post_id": 53496168, "comment_id": 104431339, "body": "and what do you think is the best solution here?"}, {"owner": {"reputation": 1435, "user_id": 1159930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5Hizy.jpg?s=128&g=1", "display_name": "Markymark", "link": "https://stackoverflow.com/users/1159930/markymark"}, "edited": false, "score": 2, "creation_date": 1579891912, "post_id": 53496168, "comment_id": 105931505, "body": "Probably the first one using a Handler. See <a href=\"https://stackoverflow.com/a/40339630/1159930\">stackoverflow.com/a/40339630/1159930</a>"}], "tags": [], "owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "is_accepted": false, "score": 140, "last_activity_date": 1610712215, "last_edit_date": 1610712215, "creation_date": 1543309909, "answer_id": 53496168, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/53496168#53496168", "title": "How to call a function after delay in Kotlin?", "body": "<h2>Many Ways</h2>\n<h3>1. Using <code>Handler</code> class</h3>\n<pre><code>Handler().postDelayed({\n    TODO(&quot;Do something&quot;)\n    }, 2000)\n</code></pre>\n<h3>2. Using <code>Timer</code> class</h3>\n<pre><code>Timer().schedule(object : TimerTask() {\n    override fun run() {\n        TODO(&quot;Do something&quot;)\n    }\n}, 2000)\n\n// Shorter\n\nTimer().schedule(timerTask {\n    TODO(&quot;Do something&quot;)\n}, 2000)\n\n\n// Shortest\n\nTimer().schedule(2000) {\n    TODO(&quot;Do something&quot;)\n}\n</code></pre>\n<h3>3. Using <code>Executors</code> class</h3>\n<pre><code>Executors.newSingleThreadScheduledExecutor().schedule({\n    TODO(&quot;Do something&quot;)\n}, 2, TimeUnit.SECONDS)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1992, "user_id": 8471798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WiHS.jpg?s=128&g=1", "display_name": "canerkaseler", "link": "https://stackoverflow.com/users/8471798/canerkaseler"}, "is_accepted": false, "score": 0, "last_activity_date": 1583335590, "creation_date": 1583335590, "answer_id": 60529403, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/60529403#60529403", "title": "How to call a function after delay in Kotlin?", "body": "<p>I recommended using <strong>SingleThread</strong> because you do not have to kill it after using. Also, \"<em>stop</em>()\" method is deprecated in Kotlin language. </p>\n\n<pre><code>private fun mDoThisJob(){\n\n    Executors.newSingleThreadScheduledExecutor().scheduleAtFixedRate({\n        //TODO: You can write your periodical job here..!\n\n    }, 1, 1, TimeUnit.SECONDS)\n}\n</code></pre>\n\n<p>Moreover, you can use it for periodical job. It is very useful. If you would like to do job for each second, you can set because parameters of it:</p>\n\n<blockquote>\n  <p>Executors.newSingleThreadScheduledExecutor().scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit);</p>\n</blockquote>\n\n<p>TimeUnit values are: NANOSECONDS, MICROSECONDS, MILLISECONDS, SECONDS, MINUTES, HOURS, DAYS.</p>\n\n<p>@canerkaseler</p>\n"}, {"tags": [], "owner": {"reputation": 4728, "user_id": 508479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ff5b025de8b6a87738bb67cf697297c4?s=128&d=identicon&r=PG", "display_name": "dwbrito", "link": "https://stackoverflow.com/users/508479/dwbrito"}, "is_accepted": false, "score": 0, "last_activity_date": 1598026971, "creation_date": 1598026971, "answer_id": 63526556, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/63526556#63526556", "title": "How to call a function after delay in Kotlin?", "body": "<p>If you're using more recent Android APIs the Handler empty constructor has been deprecated and you should include a Looper. You can easily get one through <code>Looper.getMainLooper()</code>.</p>\n<pre><code>    Handler(Looper.getMainLooper()).postDelayed({\n        //Your code\n    }, 2000) //millis\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 5120131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgeDu.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5120131/andy"}, "is_accepted": false, "score": 4, "last_activity_date": 1604691905, "creation_date": 1604691905, "answer_id": 64720735, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin/64720735#64720735", "title": "How to call a function after delay in Kotlin?", "body": "<p>If you are in a fragment with viewModel scope you can use Kotlin coroutines:</p>\n<pre><code>    myViewModel.viewModelScope.launch {\n        delay(2000)\n        // DoSomething()\n    }\n</code></pre>\n"}], "owner": {"reputation": 21361, "user_id": 523325, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/hCF4v.png?s=128&g=1", "display_name": "Nguyen  Minh Binh", "link": "https://stackoverflow.com/users/523325/nguyen-minh-binh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170467, "favorite_count": 31, "accepted_answer_id": 43348715, "answer_count": 11, "score": 192, "last_activity_date": 1610712215, "creation_date": 1491920357, "last_edit_date": 1491921192, "question_id": 43348623, "link": "https://stackoverflow.com/questions/43348623/how-to-call-a-function-after-delay-in-kotlin", "title": "How to call a function after delay in Kotlin?", "body": "<p>As the title, is there any way to call a function after delay (1 second for example) in <code>Kotlin</code>?</p>\n"}, {"tags": ["kotlin", "kotlinc"], "comments": [{"owner": {"reputation": 7347, "user_id": 172274, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/886b1c9637f9742ff1074d6605a6df7e?s=128&d=identicon&r=PG", "display_name": "still_dreaming_1", "link": "https://stackoverflow.com/users/172274/still-dreaming-1"}, "edited": false, "score": 0, "creation_date": 1561471498, "post_id": 43337513, "comment_id": 100069478, "body": "I just ran into this same problem. According to the Kotlin Reflection documentation (<a href=\"https://kotlinlang.org/docs/reference/reflection.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/reflection.html</a>), distributing the kotlin-reflect.jar file separately is intentional, and you should make sure the .jar file is added to the classpath of your &quot;project&quot;. It doesn&#39;t actually tell you how to do that from either kotlinc or when running your jar from java."}], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 6, "last_activity_date": 1491902454, "creation_date": 1491902454, "answer_id": 43341758, "question_id": 43337513, "link": "https://stackoverflow.com/questions/43337513/including-the-reflection-library-in-a-jar-output-by-kotlinc/43341758#43341758", "title": "Including the reflection library in a jar output by kotlinc", "body": "<p>Currently the <code>-include-runtime</code> option only includes the standard Kotlin library (<code>kotlin-stdlib</code>) to the resulting jar. You're right in that the reflection library (<code>kotlin-reflect</code>) should also be included, unless the <code>-no-reflect</code> option is specified. I've created an issue in the tracker: <a href=\"https://youtrack.jetbrains.com/issue/KT-17344\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-17344</a></p>\n\n<p>Until the issue is resolved: if you're looking for a way to run the compiled program on your machine only, I recommend you to compile your application to the directory instead of a jar, and then run the main class with the <code>kotlin</code> command.</p>\n\n<pre><code>kotlinc hello.kt -d output\nkotlin -cp output hello.HelloKt\n</code></pre>\n\n<p>If you're planning to distribute the program to other users though, I recommend to use a proper build system like Maven or Gradle and specify <code>kotlin-stdlib</code>/<code>kotlin-reflect</code> as proper dependencies there, instead of bundling them together with your application in the single jar.</p>\n"}], "owner": {"reputation": 6535, "user_id": 804138, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/813bef5c16481022c426d80bd65e331c?s=128&d=identicon&r=PG", "display_name": "Basel Shishani", "link": "https://stackoverflow.com/users/804138/basel-shishani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 0, "accepted_answer_id": 43341758, "answer_count": 1, "score": 4, "last_activity_date": 1491902454, "creation_date": 1491889017, "question_id": 43337513, "link": "https://stackoverflow.com/questions/43337513/including-the-reflection-library-in-a-jar-output-by-kotlinc", "title": "Including the reflection library in a jar output by kotlinc", "body": "<p>I'm trying to get the reflection lib included in sample jar, but can't get it to work:</p>\n\n<pre><code>$ kotlinc hello.kt -d hello.jar\n$ java -jar hello.jar\nException in thread \"main\" java.lang.NoClassDefFoundError: kotlin/jvm/internal/Intrinsics\n</code></pre>\n\n<p>The runtime lib was missing, so let's add it:</p>\n\n<pre><code>$ kotlinc hello.kt -include-runtime -d hello.jar\n$ java -jar hello.jar\nException in thread \"main\" kotlin.jvm.KotlinReflectionNotSupportedError: Kotlin reflection implementation is not found at runtime. Make sure you have kotlin-reflect.jar in the classpath\n</code></pre>\n\n<p>Now the runtime lib is included, but the reflection lib is missing, so let's specify kotlin home directory:</p>\n\n<pre><code>$ kotlinc hello.kt -include-runtime -kotlin-home ~/.sdkman/candidates/kotlin/1.1.1 -d hello.jar\n$ java -jar hello.jar\nException in thread \"main\" kotlin.jvm.KotlinReflectionNotSupportedError: Kotlin reflection implementation is not found at runtime. Make sure you have kotlin-reflect.jar in the classpath\n</code></pre>\n\n<p>Reflection lib is still not included. <code>kotlinc</code> help lists a '<code>-no-reflect</code>' option, so I'm assuming the reflection library should be included by default when '<code>-include-runtime</code>' is set, but this doesn't seem to be the case.</p>\n"}, {"tags": ["lambda", "kotlin", "currying"], "answers": [{"comments": [{"owner": {"reputation": 410, "user_id": 2129040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad84ed22b4c3c262a4766a2be3aa6ca1?s=128&d=identicon&r=PG", "display_name": "skalarproduktraum", "link": "https://stackoverflow.com/users/2129040/skalarproduktraum"}, "edited": false, "score": 1, "creation_date": 1491986834, "post_id": 43337453, "comment_id": 73790839, "body": "There are actually a few third-party libraries that introduce functional constructs, such as currying into Kotlin: For example Mario Arias&#39; funKTionale (<a href=\"https://github.com/MarioAriasC/funKTionale\" rel=\"nofollow noreferrer\">github.com/MarioAriasC/funKTionale</a>) or memoizr&#39;s functional-kotlin-base (<a href=\"https://github.com/memoizr/functional-kotlin-base\" rel=\"nofollow noreferrer\">github.com/memoizr/functional-kotlin-base</a>)."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 3, "last_activity_date": 1491888736, "creation_date": 1491888736, "answer_id": 43337453, "question_id": 43337209, "link": "https://stackoverflow.com/questions/43337209/passing-functions-to-functions-in-kotlin/43337453#43337453", "title": "Passing functions to functions in Kotlin", "body": "<p>What you are asking for is <a href=\"https://en.wikipedia.org/wiki/Currying\" rel=\"nofollow noreferrer\">currying</a>, and it is not supported in Kotlin. The workaround is to explicitly create new lambdas:</p>\n\n<pre><code>buttonLayout.addButton(\"Up\", function = { function(Long::inc) })\nbuttonLayout.addButton(\"Down\", function = { function(Long::dec) })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 220, "user_id": 7430144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62af92cb2b415451da474aa20cf11de?s=128&d=identicon&r=PG&f=1", "display_name": "Bastien7", "link": "https://stackoverflow.com/users/7430144/bastien7"}, "is_accepted": false, "score": 0, "last_activity_date": 1492075803, "creation_date": 1492075803, "answer_id": 43388515, "question_id": 43337209, "link": "https://stackoverflow.com/questions/43337209/passing-functions-to-functions-in-kotlin/43388515#43388515", "title": "Passing functions to functions in Kotlin", "body": "<p>I don't agree with the solution of Voddan, it seems to be a trick to deal with a problem that we should not have.</p>\n\n<p>The compiler says me that <code>function</code> is returning <code>Unit</code> instead of <code>() -&gt; Unit</code>. It seems logical, so just make a function instead of an <code>Unit</code>:</p>\n\n<pre><code>val function = fun(longFunction: (Long) -&gt; Long) = {\n    val selectedItems: MutableSet&lt;Item&gt; = //get my items\n    if (selectedItems.size == 1) {\n        val elementAt = selectedItems.elementAt(0)\n        elementAt.position = longFunction(elementAt.position)\n        Notification(\"Element's position is now ${elementAt.position}\", \"\", Notification.Type.HUMANIZED_MESSAGE, true).show(Page.getCurrent())\n        listDataProvider.refreshItem(elementAt)\n    }\n}\n</code></pre>\n\n<p>So that you can simply do:</p>\n\n<pre><code>buttonLayout.addButton(\"Up\", function = function(Long::inc))\nbuttonLayout.addButton(\"Down\", function = function(Long::dec))\n</code></pre>\n\n<p>In some case and for readability purpose I would sometimes prefer a more explicit/naive solution (is this currying?):</p>\n\n<pre><code>val function = fun(longFunction: (Long) -&gt; Long): () -&gt; Unit {\n    return fun() {\n        val selectedItems: MutableSet&lt;Item&gt; = //get my items\n        if (selectedItems.size == 1) {\n            val elementAt = selectedItems.elementAt(0)\n            elementAt.position = longFunction(elementAt.position)\n            Notification(\"Element's position is now ${elementAt.position}\", \"\", Notification.Type.HUMANIZED_MESSAGE, true).show(Page.getCurrent())\n            listDataProvider.refreshItem(elementAt)\n        }\n    }\n}\n</code></pre>\n\n<p>On my side it gives the same result, and I find it more natural to read, and easier for developers starting with Kotlin. I don't know if it is a kind of currying or not, but it's compiling and working on my side (tested by mocking the class/event from Vaadin).</p>\n"}], "owner": {"reputation": 15063, "user_id": 68283, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d069a55fa769812730461b355a92b04?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/68283/rich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 1, "accepted_answer_id": 43337453, "answer_count": 2, "score": 2, "last_activity_date": 1492075803, "creation_date": 1491887402, "last_edit_date": 1491902042, "question_id": 43337209, "link": "https://stackoverflow.com/questions/43337209/passing-functions-to-functions-in-kotlin", "title": "Passing functions to functions in Kotlin", "body": "<p>I am starting to use Vaadin with Kotlin, and have created the following extension method:</p>\n\n<pre><code>fun AbstractComponentContainer.addButton(buttonText : String = \"\", icon : FontIcon? = null, function : (() -&gt; Unit)? = null) {\n    val button = Button(buttonText)\n    if (icon != null) {\n    button.icon = icon\n    }\n    if (function!=null) {\n    button.addClickListener { function() }\n    }\n    this.addComponent(button)\n}\n</code></pre>\n\n<p>This lets me add a button to a container, with an optional click listener (and an optional icon).</p>\n\n<p>I now want to add two buttons to the component, one for up, one for down, to allow me to move items up and down a list. Therefore, I want to call <code>addButton()</code> twice. The logic in the lambda is going to be the same, the only difference is that in one the item's position will be incremented and in the other decremented.</p>\n\n<p>I am trying to create a function that can be passed to the <code>addClickListener</code>, and to save me writing two functions that do almost the same thing, I want to be able to pass to that function a reference to <code>Long::plusAssign</code> and <code>Long::minusAssign</code>.</p>\n\n<p>I can't get it to work. Either it won't compile or I get <code>ClassCastException</code>s when it runs.</p>\n\n<p>This is where I have got to:</p>\n\n<pre><code>val function = { function: (Long) -&gt; Long -&gt;\n    val selectedItems: MutableSet&lt;Item&gt; = //get my items\n    if (selectedItems.size == 1) {\n        val elementAt = selectedItems.elementAt(0)\n        elementAt.position = function(elementAt.position)\n        Notification(\"Element's position is now ${elementAt.position}\", \"\", Notification.Type.HUMANIZED_MESSAGE, true).show(Page.getCurrent())\n        listDataProvider.refreshItem(elementAt)\n    }\n}\nbuttonLayout.addButton(buttonText = \"Up\", function = function(Long::inc) as (()-&gt;Unit)?)\nbuttonLayout.addButton(buttonText = \"Down\", function = function(Long::dec) as (()-&gt;Unit)?)\n</code></pre>\n\n<p>If I remove the cast, it won't compile, and if I leave the cast, I get the following:</p>\n\n<pre><code>java.lang.ClassCastException: kotlin.Unit cannot be cast to kotlin.jvm.functions.Function0\n</code></pre>\n\n<p>Is there a way to achieve what I want? I don't really want to change the signature of the function expected by <code>addButton</code>.</p>\n\n<p>(note this is a question about Kotlin, rather than about Vaadin, so I am leaving the Vaadin tag off)</p>\n"}, {"tags": ["kotlin", "kotlin-null-safety"], "comments": [{"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 2, "creation_date": 1491825911, "post_id": 43322577, "comment_id": 73709438, "body": "How do you know it showed <code>description</code> instead of <code>localizedMessage</code>? Maybe both of them are null."}, {"owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "edited": false, "score": 1, "creation_date": 1491826054, "post_id": 43322577, "comment_id": 73709547, "body": "<code>String!</code> is the notation used to indicate that the String comes from Java and, therefore, Kotlin doesn&#39;t actually know whether it is nullable or not."}, {"owner": {"reputation": 1325, "user_id": 4978624, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/854707784602530/picture?type=large", "display_name": "Viktor Sinelnikov", "link": "https://stackoverflow.com/users/4978624/viktor-sinelnikov"}, "reply_to_user": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1491826563, "post_id": 43322577, "comment_id": 73709900, "body": "@glee8e from debugger"}], "answers": [{"comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1491934933, "post_id": 43322954, "comment_id": 73770168, "body": "Where does this exception come from? The actual <code>java.lang.Exception</code> has no <code>description</code> property. (And you can accept your own answers.)"}, {"owner": {"reputation": 1325, "user_id": 4978624, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/854707784602530/picture?type=large", "display_name": "Viktor Sinelnikov", "link": "https://stackoverflow.com/users/4978624/viktor-sinelnikov"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1491939638, "post_id": 43322954, "comment_id": 73772825, "body": "@EugenPechanec from third-party library"}], "tags": [], "owner": {"reputation": 1325, "user_id": 4978624, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/854707784602530/picture?type=large", "display_name": "Viktor Sinelnikov", "link": "https://stackoverflow.com/users/4978624/viktor-sinelnikov"}, "is_accepted": false, "score": 1, "last_activity_date": 1491826663, "creation_date": 1491826663, "answer_id": 43322954, "question_id": 43322577, "link": "https://stackoverflow.com/questions/43322577/kotlin-null-check-bug/43322954#43322954", "title": "Kotlin null-check bug", "body": "<p>The reason was in getter, it returned another string instead of description if description is null.</p>\n\n<pre><code>public String getDescription() {\n    if (description != null) {\n        return description;\n    }\n    if (UNKNOWN_ERROR.equals(getCode())) {\n        return String.format(\"Received error with code %s\", getCode());\n    }\n    return \"Failed with unknown error\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1325, "user_id": 4978624, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/854707784602530/picture?type=large", "display_name": "Viktor Sinelnikov", "link": "https://stackoverflow.com/users/4978624/viktor-sinelnikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1502553358, "creation_date": 1491825547, "last_edit_date": 1502553358, "question_id": 43322577, "link": "https://stackoverflow.com/questions/43322577/kotlin-null-check-bug", "title": "Kotlin null-check bug", "body": "<p>I use Java library. In exception class there is \"localizedMessage\" field and \"description\" field. I don't know why, but \"description\" (which is java String) is recognized as String! by Kotlin, and when \"description\" is null, condition description == null returns false.\nExample of code: </p>\n\n<pre><code>mvpView?.showToast(it.description?:it.localizedMessage)\n</code></pre>\n\n<p>or without Elvis:</p>\n\n<pre><code>if (it.description.isNullOrBlank()) {\n     mvpView?.showToast(it.localizedMessage)\n} else {\n     mvpView?.showToast(it.description)\n}\n</code></pre>\n\n<p>it always tries to show \"description\", but \"evaluate expression\" in debug mode returns true on description == null (as expected).</p>\n\n<p>Kotlin version is 1.1.1</p>\n"}, {"tags": ["naming-conventions", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 4, "last_activity_date": 1524603773, "last_edit_date": 1524603773, "creation_date": 1491811493, "answer_id": 43317781, "question_id": 43317026, "link": "https://stackoverflow.com/questions/43317026/kotlin-naming-convention-for-boolean-returning-methods/43317781#43317781", "title": "Kotlin- naming convention for boolean returning methods", "body": "<p>Kotlin naming style assumes you use the Java naming conventions to the possible extend. I suggest you use <a href=\"https://stackoverflow.com/a/3874378/3144601\">this answer</a> to the same question about Java.</p>\n\n<p>UPDATE: they have released coding conventions \n<a href=\"http://kotlinlang.org/docs/reference/coding-conventions.html\" rel=\"nofollow noreferrer\">http://kotlinlang.org/docs/reference/coding-conventions.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 1069, "user_id": 2172566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5502f74c9d40b40cc238c9d0ca171?s=128&d=identicon&r=PG", "display_name": "forresthopkinsa", "link": "https://stackoverflow.com/users/2172566/forresthopkinsa"}, "edited": false, "score": 7, "creation_date": 1519936754, "post_id": 43339430, "comment_id": 85121389, "body": "This is much more helpful than the accepted answer -- thanks!"}, {"owner": {"reputation": 2765, "user_id": 401712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab83e913223d2bee3eb4c4b5629122a?s=128&d=identicon&r=PG", "display_name": "Dario Seidl", "link": "https://stackoverflow.com/users/401712/dario-seidl"}, "edited": false, "score": 1, "creation_date": 1547045406, "post_id": 43339430, "comment_id": 95057727, "body": "For reference, this is also documented here: <a href=\"http://kotlinlang.org/docs/reference/java-to-kotlin-interop.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/java-to-kotlin-interop.html</a>"}], "tags": [], "owner": {"reputation": 2449, "user_id": 2440844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/54xqn.png?s=128&g=1", "display_name": "Lukas M.", "link": "https://stackoverflow.com/users/2440844/lukas-m"}, "is_accepted": false, "score": 55, "last_activity_date": 1491895828, "creation_date": 1491895828, "answer_id": 43339430, "question_id": 43317026, "link": "https://stackoverflow.com/questions/43317026/kotlin-naming-convention-for-boolean-returning-methods/43339430#43339430", "title": "Kotlin- naming convention for boolean returning methods", "body": "<p><em>Something about naming convention for properties in Kotlin, I know it's not for methods. But it's related:</em></p>\n\n<p>From book <a href=\"https://www.safaribooksonline.com/library/view/kotlin-in-action/9781617293290/kindle_split_012.html\" rel=\"noreferrer\">Kotlin in Action (by Dmitry Jemerov &amp; Svetlana Isakova) - section 2.2.1 Properties</a>:</p>\n\n<blockquote>\n  <p>In Kotlin, properties are a first-class language feature, which entirely replaces fields and accessor methods.</p>\n</blockquote>\n\n<p>Listing 2.5. Declaring a mutable property in a class:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class Person {\n    val name: String,      // read only property: generates a field and a trivial getter\n    var isMarried: Boolean // writable property: a field, getter and a setter\n}\n</code></pre>\n\n<blockquote>\n  <p>Kotlin\u2019s name property is exposed to Java as a getter method called\n  getName. The getter and setter naming rule has an exception: <strong>if the\n  property name starts with is, no additional prefix for the getter is\n  added and in the setter name, is is replaced with set.</strong> Thus, from\n  Java, you call isMarried().</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 690, "user_id": 563045, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/abdd4790a2614da6c2d4e63659867b38?s=128&d=identicon&r=PG", "display_name": "Jacob Wallace", "link": "https://stackoverflow.com/users/563045/jacob-wallace"}, "is_accepted": false, "score": 5, "last_activity_date": 1576084168, "creation_date": 1576084168, "answer_id": 59290805, "question_id": 43317026, "link": "https://stackoverflow.com/questions/43317026/kotlin-naming-convention-for-boolean-returning-methods/59290805#59290805", "title": "Kotlin- naming convention for boolean returning methods", "body": "<p>For those using properties prefixed with <code>can</code>, <code>should</code>, etc. in mixed Kotlin/Java projects, you can also use <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#handling-signature-clashes-with-jvmname\" rel=\"noreferrer\"><code>@get:JvmName</code></a> to make the generated Java method more idiomatic for Java clients.</p>\n\n<p>For example, say you have a class like this:</p>\n\n<pre><code>class User(\n\n    @get:JvmName(\"canView\")\n    val canView: Boolean\n\n)\n</code></pre>\n\n<p>Without the annotation, Java clients would be forced to call <code>user.getCanView()</code>, but now they can call the more idiomatic <code>user.canView()</code>.</p>\n"}], "owner": {"reputation": 391, "user_id": 5188979, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81be8dbc4c95c605bd5a9aa631023896?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/5188979/joel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7201, "favorite_count": 3, "accepted_answer_id": 43317781, "answer_count": 3, "score": 24, "last_activity_date": 1576094396, "creation_date": 1491808805, "last_edit_date": 1576094396, "question_id": 43317026, "link": "https://stackoverflow.com/questions/43317026/kotlin-naming-convention-for-boolean-returning-methods", "title": "Kotlin- naming convention for boolean returning methods", "body": "<p>What is the naming convention for boolean returning methods?</p>\n\n<p>Using an 'is', 'has', 'should', 'can' in the front of method sound ok for some cases, but I'm not sure.\nIs there a better way to name such methods?\nfor example: a function that checks card's validation. Should I call it <code>isValidCard</code> or <code>cardValidation</code> or another name?\n(I didn't find it here: <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/coding-conventions.html</a>)</p>\n"}, {"tags": ["java", "android", "kotlin", "android-service"], "comments": [{"owner": {"reputation": 2438, "user_id": 6756514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CxG3j.jpg?s=128&g=1", "display_name": "Divyesh Patel", "link": "https://stackoverflow.com/users/6756514/divyesh-patel"}, "edited": false, "score": 0, "creation_date": 1491808367, "post_id": 43316878, "comment_id": 73698323, "body": "create brodcast receiver that check screen on/off event"}, {"owner": {"reputation": 741, "user_id": 7740742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zPd4.jpg?s=128&g=1", "display_name": "Anuj Kumar", "link": "https://stackoverflow.com/users/7740742/anuj-kumar"}, "reply_to_user": {"reputation": 2438, "user_id": 6756514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CxG3j.jpg?s=128&g=1", "display_name": "Divyesh Patel", "link": "https://stackoverflow.com/users/6756514/divyesh-patel"}, "edited": false, "score": 0, "creation_date": 1491809252, "post_id": 43316878, "comment_id": 73698817, "body": "can you give me more details as i am new to android"}, {"owner": {"reputation": 173, "user_id": 7265947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oKPYb.jpg?s=128&g=1", "display_name": "Simranjeet Singh", "link": "https://stackoverflow.com/users/7265947/simranjeet-singh"}, "edited": false, "score": 0, "creation_date": 1491809480, "post_id": 43316878, "comment_id": 73698960, "body": "Check this answer out using broadcase reciever. <a href=\"http://stackoverflow.com/a/20225681/7265947\">stackoverflow.com/a/20225681/7265947</a>"}, {"owner": {"reputation": 1890, "user_id": 2672863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fff9eec4a5f15cfe58afeb3612813a8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Saqlain", "link": "https://stackoverflow.com/users/2672863/muhammad-saqlain"}, "edited": false, "score": 0, "creation_date": 1491817140, "post_id": 43316878, "comment_id": 73703590, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20224637/a-way-to-get-unlock-event-in-android\">A way to get unlock event in android?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 7763210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2431674aae29bd58336eaa2fcb83ba91?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Bakr Sikal", "link": "https://stackoverflow.com/users/7763210/mohammed-bakr-sikal"}, "edited": false, "score": 0, "creation_date": 1491819704, "post_id": 43317844, "comment_id": 73705328, "body": "Store the count in SharedPreferences instead of a variable inside the class."}, {"owner": {"reputation": 345, "user_id": 6904440, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119075048141245/picture?type=large", "display_name": "Simo", "link": "https://stackoverflow.com/users/6904440/simo"}, "edited": false, "score": 0, "creation_date": 1491820654, "post_id": 43317844, "comment_id": 73705944, "body": "or may be instead of receiving the broadcasts in the activity i&#39;d prefer using a service, which will be better. and putting return START_STICKY will make sure the service is restarted if killed by the OS."}], "tags": [], "owner": {"reputation": 2098, "user_id": 4711030, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/OQV0d.jpg?s=128&g=1", "display_name": "NehaK", "link": "https://stackoverflow.com/users/4711030/nehak"}, "is_accepted": false, "score": 0, "last_activity_date": 1491811965, "last_edit_date": 1491811965, "creation_date": 1491811664, "answer_id": 43317844, "question_id": 43316878, "link": "https://stackoverflow.com/questions/43316878/how-can-i-count-the-number-of-screen-unlocks-by-a-user-in-android/43317844#43317844", "title": "How Can I count the number of screen unlocks by a user in Android?", "body": "<p>You can add reciever like this in your Activity : </p>\n\n<pre><code>private LockScreenStateReceiver mLockScreenStateReceiver;\nint count = 0;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    mLockScreenStateReceiver = new LockScreenStateReceiver();\n    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_OFF);\n    filter.addAction(Intent.ACTION_USER_PRESENT);\n\n    registerReceiver(mLockScreenStateReceiver, filter);\n}\n\npublic class LockScreenStateReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {\n            // screen is turn off\n            //(\"Screen locked\");\n        } else {\n            //Handle resuming events if user is present/screen is unlocked\n            count++;\n            textView.setText(\"\"+count);\n            //(\"Screen unlocked\");\n        }\n    }\n}\n\n@Override\npublic void onDestroy() {\n    unregisterReceiver(mLockScreenStateReceiver);\n    super.onDestroy();\n}\n</code></pre>\n"}], "owner": {"reputation": 741, "user_id": 7740742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zPd4.jpg?s=128&g=1", "display_name": "Anuj Kumar", "link": "https://stackoverflow.com/users/7740742/anuj-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1869, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566096396, "creation_date": 1491808277, "last_edit_date": 1566096396, "question_id": 43316878, "link": "https://stackoverflow.com/questions/43316878/how-can-i-count-the-number-of-screen-unlocks-by-a-user-in-android", "title": "How Can I count the number of screen unlocks by a user in Android?", "body": "<p>I am currently working on an Android App which informs the number of screen unlocks he/she has done over a day. This example can be seen on stock android devices with API Level P or higher in the feature named Digital Wellbeing. I would like to know how does it work.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 4757, "user_id": 3992148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa0e77e467d622680db5dce8aca2473f?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Maher", "link": "https://stackoverflow.com/users/3992148/joe-maher"}, "edited": false, "score": 1, "creation_date": 1491802600, "post_id": 43315506, "comment_id": 73695877, "body": "Ahh i see thank you very much, the ide quick fix is to include <code>MyClass</code> rather than <code>this</code> when referencing the method as just <code>::save</code>"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 2, "last_activity_date": 1491801808, "creation_date": 1491801808, "answer_id": 43315506, "question_id": 43315359, "link": "https://stackoverflow.com/questions/43315359/kotlin-higher-order-functions-and-type-mismatch/43315506#43315506", "title": "Kotlin - Higher order functions and type mismatch", "body": "<p><code>MyClass::save</code> is a <code>KFunction2</code>, meaning it has two parameters. This is because this expression refers to the method of the class instead of referring to a method of the current instance that you have. This means that when you're calling it, you have to pass in a <code>MyClass</code> instance to call it on, as well as the <code>String</code> parameter. This makes it a <code>(MyClass, String) -&gt; Unit</code> function, which causes the type mismatch.</p>\n\n<p>For example, this is how you could call it:</p>\n\n<pre><code>class MyClass {\n\n    fun test() {\n        val s = MyClass::save\n        s(this, \"some value\")\n    }\n\n    fun save(value: String) {\n        // ...\n    }\n\n}\n</code></pre>\n\n<p>As for what you're looking for, Kotlin 1.1 introduced <a href=\"https://kotlinlang.org/docs/reference/whatsnew11.html#bound-callable-references\" rel=\"nofollow noreferrer\">bound callable references</a>, which you can use to refer to a function of a specific instance of a class:</p>\n\n<pre><code>class MyClass(private val valueChangeListener: MyValueChangeListener, public val storage: MyStorage): MySuperClass() {\n\n    fun saveValue(potentialValue: String) {\n        super.processValue(potentialValue, this::save) // see here\n    }\n\n    fun save(value: String){\n        storage.storeValue(value)\n        valueChangeListener.onValueChanged(value)\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 601, "user_id": 390701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd46aa475288438b0b7f214b74321e3?s=128&d=identicon&r=PG", "display_name": "kmizu", "link": "https://stackoverflow.com/users/390701/kmizu"}, "is_accepted": false, "score": 2, "last_activity_date": 1491802063, "creation_date": 1491802063, "answer_id": 43315554, "question_id": 43315359, "link": "https://stackoverflow.com/questions/43315359/kotlin-higher-order-functions-and-type-mismatch/43315554#43315554", "title": "Kotlin - Higher order functions and type mismatch", "body": "<p>In Kotlin 1.1, you can use <a href=\"https://kotlinlang.org/docs/reference/reflection.html#function-references\" rel=\"nofollow noreferrer\">member reference</a> to solve this problem:</p>\n\n<pre><code>fun saveValue(potentialValue: String) {\n    super.processValue(potentialValue, this::save)\n}\n</code></pre>\n\n<p>If you use Kotlin 1.0.X, use lambda:</p>\n\n<pre><code>fun saveValue(potentialValue: String) {\n    super.processValue(potentialValue, (arg) -&gt; save(arg))\n}\n</code></pre>\n"}], "owner": {"reputation": 4757, "user_id": 3992148, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa0e77e467d622680db5dce8aca2473f?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Maher", "link": "https://stackoverflow.com/users/3992148/joe-maher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 0, "accepted_answer_id": 43315506, "answer_count": 2, "score": 1, "last_activity_date": 1491804143, "creation_date": 1491801008, "last_edit_date": 1491804143, "question_id": 43315359, "link": "https://stackoverflow.com/questions/43315359/kotlin-higher-order-functions-and-type-mismatch", "title": "Kotlin - Higher order functions and type mismatch", "body": "<p>Im just beginning to learn kotlin and am struggling to understand how the higher-order functions determine types, i am regularly seeing this kind of error</p>\n\n<blockquote>\n  <p>Error: Type mismatch: inferred type is KFunction2 but (String) -> Unit was expected</p>\n</blockquote>\n\n<p>The above error is caused by the following</p>\n\n<pre><code>class MyClass(private val valueChangeListener: MyValueChangeListener, public val storage: MyStorage): MySuperClass {\n\n    fun saveValue(potentialValue: String) {\n        super.processValue(potentialValue, MyClass::save)\n    }\n\n    fun save(value: String){\n\n        storage.storeValue(value)\n        valueChangeListener.onValueChanged(value)\n    }\n}\n</code></pre>\n\n<p>However if i use a Lambda all is solved</p>\n\n<pre><code>class MyClass(private val valueChangeListener: MyValueChangeListener, public val storage: MyStorage): MySuperClass {\n\n    fun saveValue(potentialValue: String) {\n        super.processValue(potentialValue, super.processValue(potentialValue, { value: String -&gt;\n            save(value)\n        })\n    }\n\n    fun save(value: String){\n\n        storage.storeValue(value)\n        valueChangeListener.onValueChanged(value)\n    }\n}\n</code></pre>\n\n<p>MySuperClass</p>\n\n<pre><code>open class MySuperClass {\n\n    private fun cleanseValue(value: String) : String {\n        return value.toUpperCase().replace(\" \", \"\").replace(\"-\", \"\")\n    }\n\n    protected fun processValue(potentialValue: String, saveFunction: (String) -&gt; Unit){\n        saveFunction(cleanseValue(potentialValue))\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "edited": false, "score": 0, "creation_date": 1492000851, "post_id": 43315127, "comment_id": 73801300, "body": "Looks rather like a mismatch between the source and the compiled code.   You might try renaming your top level and app build folders to build.old to force a rebuild of everything.   I find this helps when studio gets confused (or I do)."}], "answers": [{"comments": [{"owner": {"reputation": 1192, "user_id": 664509, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8dba6ba9791388d4c527a6f7b78a2724?s=128&d=identicon&r=PG&f=1", "display_name": "SomethingsGottaGive", "link": "https://stackoverflow.com/users/664509/somethingsgottagive"}, "edited": false, "score": 0, "creation_date": 1491864062, "post_id": 43315295, "comment_id": 73732134, "body": "I am pressing f8 to step over the function. I even put breakpoints within the <code>downloadLatestGfts()</code> funciton."}], "tags": [], "owner": {"reputation": 327, "user_id": 5809025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03e9db8e051e1b675d33631b5d93767?s=128&d=identicon&r=PG&f=1", "display_name": "sravs", "link": "https://stackoverflow.com/users/5809025/sravs"}, "is_accepted": false, "score": 0, "last_activity_date": 1491800622, "creation_date": 1491800622, "answer_id": 43315295, "question_id": 43315127, "link": "https://stackoverflow.com/questions/43315127/android-studio-jumping-over-breakpoints/43315295#43315295", "title": "Android Studio jumping over breakpoints", "body": "<p>You need to place breakpoint in downloadLatestGfts() function or press F8 to go to next line (i.e file null check if statement).</p>\n"}, {"tags": [], "owner": {"reputation": 578, "user_id": 5263755, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/29a391b02538061dfe805e87ca715c70?s=128&d=identicon&r=PG&f=1", "display_name": "remya thekkuvettil", "link": "https://stackoverflow.com/users/5263755/remya-thekkuvettil"}, "is_accepted": false, "score": 0, "last_activity_date": 1491915683, "creation_date": 1491915683, "answer_id": 43346687, "question_id": 43315127, "link": "https://stackoverflow.com/questions/43315127/android-studio-jumping-over-breakpoints/43346687#43346687", "title": "Android Studio jumping over breakpoints", "body": "<p>Try to run the code putting a breakpoint on the line</p>\n\n<pre><code>if (dateTime == null)\n</code></pre>\n\n<p>and check whether the value of dateTime is null. It may be because of that null value the control goes straight to else condition.</p>\n"}], "owner": {"reputation": 1192, "user_id": 664509, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8dba6ba9791388d4c527a6f7b78a2724?s=128&d=identicon&r=PG&f=1", "display_name": "SomethingsGottaGive", "link": "https://stackoverflow.com/users/664509/somethingsgottagive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491940795, "creation_date": 1491799413, "last_edit_date": 1491940795, "question_id": 43315127, "link": "https://stackoverflow.com/questions/43315127/android-studio-jumping-over-breakpoints", "title": "Android Studio jumping over breakpoints", "body": "<p>I am running into an issue where Android Studio is jumping over my breakpoint. I haven't run into this issue before and this recently started happening. </p>\n\n<p>I am running Android Studio 2.3.1 on a MAC with no exotic plugins. Any ideas? Here is the code:</p>\n\n<pre><code>private fun getLatestZip(): File? {\n        var fileName = context.fileList().find { it.toUpperCase().contains(\"MBTA_GTFS\") }\n        var dateTime = getGftsTimestamp()\n        var file: File?\n        if (dateTime == null) {\n            file = downloadLatestGfts() // skips the break on this line\n            if (file != null) {\n                printGftsTimestamp()\n            }\n            else {\n                Timber.e(\"Failed to download Gfts\") // and goes straight to here\n            }\n        } else if (!fileName.isNullOrEmpty()) {....\n</code></pre>\n\n<p>EDIT ---\nHere's a video to show you exactly what's happening. It could be a problem with kotlin. <a href=\"https://youtu.be/fJOIzD8ckv8\" rel=\"nofollow noreferrer\">https://youtu.be/fJOIzD8ckv8</a></p>\n"}, {"tags": ["android", "kotlin", "android-espresso", "dagger-2"], "comments": [{"owner": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "edited": false, "score": 0, "creation_date": 1491751813, "post_id": 43308368, "comment_id": 73681563, "body": "Are you using multi-dex?"}, {"owner": {"reputation": 357, "user_id": 3685304, "user_type": "registered", "profile_image": "https://graph.facebook.com/1063909616/picture?type=large", "display_name": "quiro", "link": "https://stackoverflow.com/users/3685304/quiro"}, "edited": false, "score": 0, "creation_date": 1491752172, "post_id": 43308368, "comment_id": 73681696, "body": "Try with <code>@Component(modules = arrayOf(AppModule::class.java, TrackerModule::class.java))</code>  In Kotlin when you use <code>Person::class</code> you get a reference to the Kotlin class (type KClass, see <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class&zwnj;&#8203;/&hellip;</a>), but if you need a reference to the Java class you must use <code>Person::class.java</code>"}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "reply_to_user": {"reputation": 357, "user_id": 3685304, "user_type": "registered", "profile_image": "https://graph.facebook.com/1063909616/picture?type=large", "display_name": "quiro", "link": "https://stackoverflow.com/users/3685304/quiro"}, "edited": false, "score": 0, "creation_date": 1491752682, "post_id": 43308368, "comment_id": 73681876, "body": "@quiro that sounded reasonable but doesn&#39;t compile with this error: required: Array&lt;KClass&lt;*&gt;&gt; found: Array&lt;Class&lt;out Any&gt;&gt;"}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "reply_to_user": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "edited": false, "score": 0, "creation_date": 1491752694, "post_id": 43308368, "comment_id": 73681882, "body": "@JeffersonTavares no"}, {"owner": {"reputation": 357, "user_id": 3685304, "user_type": "registered", "profile_image": "https://graph.facebook.com/1063909616/picture?type=large", "display_name": "quiro", "link": "https://stackoverflow.com/users/3685304/quiro"}, "edited": false, "score": 0, "creation_date": 1491752869, "post_id": 43308368, "comment_id": 73681951, "body": "could you also post the Application class you&#39;re using?"}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "reply_to_user": {"reputation": 357, "user_id": 3685304, "user_type": "registered", "profile_image": "https://graph.facebook.com/1063909616/picture?type=large", "display_name": "quiro", "link": "https://stackoverflow.com/users/3685304/quiro"}, "edited": false, "score": 0, "creation_date": 1491753239, "post_id": 43308368, "comment_id": 73682098, "body": "@quiro sure - done &amp; the whole thing is in branch ligi_wip at <a href=\"https://github.com/ligi/PassAndroid\" rel=\"nofollow noreferrer\">github.com/ligi/PassAndroid</a>"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491758378, "creation_date": 1491750721, "last_edit_date": 1491758378, "question_id": 43308368, "link": "https://stackoverflow.com/questions/43308368/app-had-used-a-different-appcomponent-during-pre-verification", "title": "App; had used a different AppComponent; during pre-verification", "body": "<p>I am having problems running my espresso-tests on one device - I am getting the following error:</p>\n\n<pre><code>W/dalvikvm(10180): Class resolved by unexpected DEX: Lorg/ligi/passandroid/App;(0x43876120):0x660f9000 ref [Lorg/ligi/passandroid/AppComponent;] Lorg/ligi/passandroid/AppComponent;(0x43876120):0x64e2f000\nW/dalvikvm(10180): (Lorg/ligi/passandroid/App; had used a different Lorg/ligi/passandroid/AppComponent; during pre-verification)\nD/AndroidRuntime(10180): Shutting down VM\nW/dalvikvm(10180): threadid=1: thread exiting with uncaught exception (group=0x433101a0)\nE/MonitoringInstrumentation(10180): Exception encountered by: Thread[main,5,main]. Dumping thread state to outputs and pining for the fjords.\nE/MonitoringInstrumentation(10180): java.lang.IllegalAccessError: Class ref in pre-verified class resolved to unexpected implementation\nE/MonitoringInstrumentation(10180):     at org.ligi.passandroid.App.onCreate(App.java:26)\nE/MonitoringInstrumentation(10180):     at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1013)\nE/MonitoringInstrumentation(10180):     at android.support.test.runner.MonitoringInstrumentation.callApplicationOnCreate(MonitoringInstrumentation.java:323)\nE/MonitoringInstrumentation(10180):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4749)\nE/MonitoringInstrumentation(10180):     at android.app.ActivityThread.access$1600(ActivityThread.java:172)\nE/MonitoringInstrumentation(10180):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1368)\nE/MonitoringInstrumentation(10180):     at android.os.Handler.dispatchMessage(Handler.java:102)\nE/MonitoringInstrumentation(10180):     at android.os.Looper.loop(Looper.java:146)\nE/MonitoringInstrumentation(10180):     at android.app.ActivityThread.main(ActivityThread.java:5653)\nE/MonitoringInstrumentation(10180):     at java.lang.reflect.Method.invokeNative(Native Method)\nE/MonitoringInstrumentation(10180):     at java.lang.reflect.Method.invoke(Method.java:515)\nE/MonitoringInstrumentation(10180):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1291)\nE/MonitoringInstrumentation(10180):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1107)\nE/MonitoringInstrumentation(10180):     at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>I excluded everything so there should be no duplicate libs - here my dependencies for the test-app:</p>\n\n<pre><code>_withMapsWithAnalyticsForPlayDebugAndroidTestApk - ## Internal use, do not manually configure ##\n+--- com.github.ligi:trulesk:0.19\n|    +--- com.android.support.test.espresso:espresso-intents:2.2.2\n|    |    \\--- com.android.support.test.espresso:espresso-core:2.2.2\n|    |         +--- com.squareup:javawriter:2.1.1\n|    |         +--- com.android.support.test:rules:0.5\n|    |         |    \\--- com.android.support.test:runner:0.5\n|    |         |         +--- junit:junit:4.12\n|    |         |         |    \\--- org.hamcrest:hamcrest-core:1.3\n|    |         |         \\--- com.android.support.test:exposed-instrumentation-api-publish:0.5\n|    |         +--- com.android.support.test:runner:0.5 (*)\n|    |         +--- org.hamcrest:hamcrest-library:1.3\n|    |         |    \\--- org.hamcrest:hamcrest-core:1.3\n|    |         +--- com.android.support.test.espresso:espresso-idling-resource:2.2.2\n|    |         \\--- org.hamcrest:hamcrest-integration:1.3\n|    |              \\--- org.hamcrest:hamcrest-library:1.3 (*)\n|    +--- com.jraska:falcon-spoon-compat:1.0.3\n|    |    +--- com.jraska:falcon:1.0.3\n|    |    \\--- com.squareup.spoon:spoon-client:1.6.2\n|    \\--- com.linkedin.testbutler:test-butler-library:1.1.0\n+--- com.squareup.assertj:assertj-android:1.1.1\n|    \\--- org.assertj:assertj-core:1.7.1\n+--- org.mockito:mockito-core:2.7.22\n|    +--- net.bytebuddy:byte-buddy:1.6.11\n|    +--- net.bytebuddy:byte-buddy-agent:1.6.11\n|    \\--- org.objenesis:objenesis:2.5\n\\--- com.linkedin.dexmaker:dexmaker-mockito:2.2.0\n     +--- com.linkedin.dexmaker:dexmaker:2.2.0\n     |    \\--- com.jakewharton.android.repackaged:dalvik-dx:7.1.0_r7\n     |         \\--- com.jakewharton.android.repackaged:libcore-dex:7.1.0_r7\n     \\--- org.mockito:mockito-core:2.2.29 -&gt; 2.7.22 (*)\n</code></pre>\n\n<p>the AppComponent is a dagger component:</p>\n\n<pre><code>package org.ligi.passandroid\n\nimport dagger.Component\nimport org.ligi.passandroid.model.PassStore\nimport org.ligi.passandroid.model.Settings\nimport org.ligi.passandroid.ui.*\nimport org.ligi.passandroid.ui.edit.FieldsEditFragment\nimport org.ligi.passandroid.ui.quirk_fix.USAirwaysLoadActivity\nimport javax.inject.Singleton\n\n@Singleton\n@Component(modules = arrayOf(AppModule::class, TrackerModule::class))\ninterface AppComponent {\n\n    fun inject(passViewActivityBase: PassViewActivityBase)\n\n    fun inject(passListActivity: PassListActivity)\n\n    fun inject(passEditActivity: PassEditActivity)\n\n    fun inject(passAdapter: PassAdapter)\n\n    fun inject(passImportActivity: PassImportActivity)\n\n    fun inject(passMenuOptions: PassMenuOptions)\n\n    fun inject(searchPassesIntentService: SearchPassesIntentService)\n\n    fun inject(usAirwaysLoadActivity: USAirwaysLoadActivity)\n\n    fun inject(passAndroidActivity: PassAndroidActivity)\n\n    fun inject(passListFragment: PassListFragment)\n\n    fun inject(passNavigationView: PassNavigationView)\n\n    fun inject(touchImageActivity: TouchImageActivity)\n\n    fun inject(fieldsEditFragment: FieldsEditFragment)\n\n    fun passStore(): PassStore\n\n    fun tracker(): Tracker\n\n    fun settings(): Settings\n\n}\n</code></pre>\n\n<p>there is some strange output in logcat like this:</p>\n\n<pre><code>D/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Annotation;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/ClassData$Field;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/ClassData$Method;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/ClassData;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/ClassDef;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Code$CatchHandler;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Code$Try;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Code;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Dex$1;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Dex$ClassDefIterable;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Dex$ClassDefIterator;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Dex$FieldIdTable;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Dex$MethodIdTable;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Dex$ProtoIdTable;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Dex$StringTable;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Dex$TypeIndexToDescriptorIndexTable;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Dex$TypeIndexToDescriptorTable;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Dex;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/DexFormat;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/EncodedValue;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/EncodedValueCodec;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/EncodedValueReader;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/FieldId;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Leb128;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/MethodId;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/Mutf8;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/ProtoId;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/SizeOf;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/TableOfContents$Section;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/TableOfContents;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/TypeList;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/util/ByteInput;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/util/ByteOutput;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/util/ExceptionWithContext;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/util/FileUtils;' has an earlier definition; blocking out\nD/dalvikvm( 4357): DexOpt: 'Lcom/android/dex/util/Unsigned;' has an earlier definition; blocking out\n</code></pre>\n\n<p>I am stuck with this for 2 days and now just ignore the device. No clue on how to proceed from here. The other devices run fine and the app works on the device when manual testing.</p>\n\n<p>EDIT - as requested App and TestApp:</p>\n\n<pre><code>package org.ligi.passandroid;\n\nimport android.app.Application;\nimport android.support.annotation.VisibleForTesting;\nimport android.support.v7.app.AppCompatDelegate;\nimport com.jakewharton.threetenabp.AndroidThreeTen;\nimport com.squareup.leakcanary.LeakCanary;\nimport org.ligi.tracedroid.TraceDroid;\nimport org.ligi.tracedroid.logging.Log;\n\npublic class App extends Application {\n\n    private static AppComponent component;\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n\n        component = createComponent();\n\n        AppCompatDelegate.setCompatVectorFromResourcesEnabled(true);\n        installLeakCanary();\n        AndroidThreeTen.init(this);\n        initTraceDroid();\n\n        AppCompatDelegate.setDefaultNightMode(component.settings().getNightMode());\n    }\n\n    public void installLeakCanary() {\n        LeakCanary.install(this);\n    }\n\n    public AppComponent createComponent() {\n        return DaggerAppComponent.builder().appModule(new AppModule(this)).trackerModule(new TrackerModule(this)).build();\n    }\n\n    private void initTraceDroid() {\n        TraceDroid.init(this);\n        Log.setTAG(\"PassAndroid\");\n    }\n\n    public static AppComponent component() {\n        return component;\n    }\n\n    @VisibleForTesting\n    public static void setComponent(AppComponent newComponent) {\n        component = newComponent;\n    }\n}\n</code></pre>\n\n<p>and TestApp:</p>\n\n<pre><code>public class TestApp extends App {\n\n    @Override\n    public AppComponent createComponent() {\n        return DaggerTestComponent.builder().testModule(new TestModule()).build();\n    }\n\n    public static TestComponent component() {\n        return (TestComponent) App.component();\n    }\n\n    @Override\n    public void installLeakCanary() {\n\n    }\n\n    public static PassStore getPassStore() {\n        return component().passStore();\n    }\n\n    public static void reset() {\n        setComponent(DaggerTestComponent.builder().testModule(new TestModule()).build());\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 2556, "user_id": 3964585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b4c015fd5d596e64d781d84acc178?s=128&d=identicon&r=PG&f=1", "display_name": "Okas", "link": "https://stackoverflow.com/users/3964585/okas"}, "edited": false, "score": 2, "creation_date": 1491748738, "post_id": 43307926, "comment_id": 73680453, "body": "Why not just try it and ask questions when you encounter any issues?"}, {"owner": {"reputation": 3979, "user_id": 1664604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55843a19401a9ea9a6f563d21ccd277e?s=128&d=identicon&r=PG", "display_name": "Nithinlal", "link": "https://stackoverflow.com/users/1664604/nithinlal"}, "reply_to_user": {"reputation": 2556, "user_id": 3964585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b4c015fd5d596e64d781d84acc178?s=128&d=identicon&r=PG&f=1", "display_name": "Okas", "link": "https://stackoverflow.com/users/3964585/okas"}, "edited": false, "score": 0, "creation_date": 1491748826, "post_id": 43307926, "comment_id": 73680485, "body": "Is there any example for this for reference ?"}], "answers": [{"comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1491751074, "post_id": 43308283, "comment_id": 73681303, "body": "It&#39;s not that simple. The library could be using <code>kotlin-stdlib-jre8</code> artifact which relies on Java 8."}, {"owner": {"reputation": 357, "user_id": 3685304, "user_type": "registered", "profile_image": "https://graph.facebook.com/1063909616/picture?type=large", "display_name": "quiro", "link": "https://stackoverflow.com/users/3685304/quiro"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 1, "creation_date": 1491751338, "post_id": 43308283, "comment_id": 73681414, "body": "that&#39;s true, but the library he is pointing out is specifically made for Android, so it doesn&#39;t use <code>kotlin-stdlib-jre8</code> for sure"}], "tags": [], "owner": {"reputation": 357, "user_id": 3685304, "user_type": "registered", "profile_image": "https://graph.facebook.com/1063909616/picture?type=large", "display_name": "quiro", "link": "https://stackoverflow.com/users/3685304/quiro"}, "is_accepted": true, "score": 4, "last_activity_date": 1491750283, "creation_date": 1491750283, "answer_id": 43308283, "question_id": 43307926, "link": "https://stackoverflow.com/questions/43307926/can-i-import-a-library-write-in-kotlin-to-my-android-project-uses-java/43308283#43308283", "title": "Can I import a library write in Kotlin to my android project (uses java)", "body": "<p>Yes you can. Kotlin compiles to Java bytecode so it's completely compatible</p>\n"}], "owner": {"reputation": 3979, "user_id": 1664604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55843a19401a9ea9a6f563d21ccd277e?s=128&d=identicon&r=PG", "display_name": "Nithinlal", "link": "https://stackoverflow.com/users/1664604/nithinlal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 0, "accepted_answer_id": 43308283, "answer_count": 1, "score": 2, "last_activity_date": 1491750283, "creation_date": 1491748361, "question_id": 43307926, "link": "https://stackoverflow.com/questions/43307926/can-i-import-a-library-write-in-kotlin-to-my-android-project-uses-java", "title": "Can I import a library write in Kotlin to my android project (uses java)", "body": "<p>I have to import a library written in Kotlin to my android project. The library needed to import is <a href=\"https://github.com/skedgo/DateTimeRangePicker\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>This library is written in Kotlin but I am using java in my project.Is this possible? I have done some research on this topic but I can't find a good document on this.</p>\n"}, {"tags": ["java", "android", "junit", "mockito", "kotlin"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1491746299, "post_id": 43306269, "comment_id": 73679687, "body": "What do you mean it doesn&#39;t work in that module? You have the file for <code>mock-maker-inline</code> created, and it&#39;s still giving you the error about mocking final classes?"}, {"owner": {"reputation": 9328, "user_id": 1832221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/IeFWX.jpg?s=128&g=1", "display_name": "lopez.mikhael", "link": "https://stackoverflow.com/users/1832221/lopez-mikhael"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1491748150, "post_id": 43306269, "comment_id": 73680290, "body": "@zsmb13 yes I have the following error : &quot;Mockito cannot mock/spy because : final class&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1192, "user_id": 2395542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a9cf33ec30f6aae3fedc1dafb22b0a34?s=128&d=identicon&r=PG", "display_name": "Damiii", "link": "https://stackoverflow.com/users/2395542/damiii"}, "edited": false, "score": 0, "creation_date": 1530632704, "post_id": 43310572, "comment_id": 89300395, "body": "my saviour. :DD"}, {"owner": {"reputation": 4991, "user_id": 1498586, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/wcmTY.jpg?s=128&g=1", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/1498586/mahdi"}, "edited": false, "score": 0, "creation_date": 1615439266, "post_id": 43310572, "comment_id": 117692533, "body": "Is this also works for Android dependency?     androidTestImplementation &#39;org.mockito:mockito-android:2.27.0&#39;"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 19, "last_activity_date": 1499682399, "last_edit_date": 1499682399, "creation_date": 1491763743, "answer_id": 43310572, "question_id": 43306269, "link": "https://stackoverflow.com/questions/43306269/how-to-mock-final-class-with-mockito-2-on-java-module-in-android-project/43310572#43310572", "title": "How to mock final class with Mockito 2 on Java Module in Android project?", "body": "<p>You can use the inline mocking method by default, by changing your Gradle dependency from the normal Mockito dependency:</p>\n\n<pre><code>compile \"org.mockito:mockito-core:$mockito_version\"\n</code></pre>\n\n<p>... to the following:</p>\n\n<pre><code>compile \"org.mockito:mockito-inline:$mockito_version\"\n</code></pre>\n\n<p>This way you won't have to rely on activating inline mocking with the \"file in the resources folder\" method, which I have found to be flaky sometimes.</p>\n"}, {"tags": [], "owner": {"reputation": 4770, "user_id": 1552622, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0DBwH.jpg?s=128&g=1", "display_name": "makovkastar", "link": "https://stackoverflow.com/users/1552622/makovkastar"}, "is_accepted": false, "score": 0, "last_activity_date": 1515153652, "creation_date": 1515153652, "answer_id": 48113222, "question_id": 43306269, "link": "https://stackoverflow.com/questions/43306269/how-to-mock-final-class-with-mockito-2-on-java-module-in-android-project/48113222#48113222", "title": "How to mock final class with Mockito 2 on Java Module in Android project?", "body": "<p>Mockito's MockMaker can only be used for unit tests (run on JVM). For those who are having problems with mocking Kotlin classes in instrumentation tests (androidTest), try using the <a href=\"https://github.com/tmurakami/dexopener\" rel=\"nofollow noreferrer\">DexOpener</a> library. It makes Kotlin classes, properties and methods <code>open</code>, which allows their mocking.</p>\n"}], "owner": {"reputation": 9328, "user_id": 1832221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/IeFWX.jpg?s=128&g=1", "display_name": "lopez.mikhael", "link": "https://stackoverflow.com/users/1832221/lopez-mikhael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7448, "favorite_count": 2, "accepted_answer_id": 43310572, "answer_count": 2, "score": 3, "last_activity_date": 1515153652, "creation_date": 1491738052, "last_edit_date": 1495542398, "question_id": 43306269, "link": "https://stackoverflow.com/questions/43306269/how-to-mock-final-class-with-mockito-2-on-java-module-in-android-project", "title": "How to mock final class with Mockito 2 on Java Module in Android project?", "body": "<p>I have a <a href=\"https://github.com/android10/Android-CleanArchitecture\" rel=\"nofollow noreferrer\">Android Clean Architecture project</a> write in Kotlin with 3 modules:</p>\n\n<ul>\n<li>data (Android Library)</li>\n<li>domaine (Java Library)</li>\n<li>presentation (Android Application)</li>\n</ul>\n\n<p><strong>The 3 modules each have unit tests written with junit</strong>. But with Kotlin every class is final by default. I quickly had the problem: <strong>How to mock a final class with mockito</strong></p>\n\n<p>It's now possible with <a href=\"https://github.com/mockito/mockito/wiki/What%27s-new-in-Mockito-2#unmockable\" rel=\"nofollow noreferrer\">Mockito 2</a></p>\n\n<p>It can be done via the mockito extension mechanism by creating the file <code>/mockito-extensions/org.mockito.plugins.MockMaker</code> containing a single line:</p>\n\n<pre><code>mock-maker-inline\n</code></pre>\n\n<blockquote>\n  <p>This solution works very well on data module (Android Library) and\n  presentation module (Android Application) <strong>but doesn't work on my\n  domaine module (Java Library)</strong>.</p>\n</blockquote>\n\n<p>I know that this question has already been asked (<a href=\"https://stackoverflow.com/questions/14292863/how-to-mock-a-final-class-with-mockito\">How to mock a final class with mockito</a>, <a href=\"https://stackoverflow.com/questions/17083432/mock-objects-calling-final-classes-static-methods-with-mockito\">Mock objects calling final classes static methods with Mockito</a>), but I didn't find the answer I'm looking for.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 414, "user_id": 4664470, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-BaoYmnGt-54/AAAAAAAAAAI/AAAAAAAAAgk/stbYE2zCrZw/photo.jpg?sz=128", "display_name": "Ricardo Meneghin Filho", "link": "https://stackoverflow.com/users/4664470/ricardo-meneghin-filho"}, "edited": false, "score": 0, "creation_date": 1491794850, "post_id": 43304010, "comment_id": 73693849, "body": "Doesn&#39;t Kotlin force you to specify the function generic types in this case, making the type available in the block body? binding&lt;Buffer,Bar&gt;(..){ //buffer methods available on &quot;this&quot;}"}], "answers": [{"tags": [], "owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "is_accepted": true, "score": 1, "last_activity_date": 1491742102, "creation_date": 1491742102, "answer_id": 43306858, "question_id": 43304010, "link": "https://stackoverflow.com/questions/43304010/kotlin-casting-function-receiver/43306858#43306858", "title": "Kotlin, casting function receiver", "body": "<p>Choosing T depending on the Int value <code>pair.second</code> is not, to the best of my knowledge, possible. However, sealed classes are a good way to implement this sort of \"enum with different methods for each value\" kind of logic:</p>\n\n<pre><code>sealed class BufferType(val type: Int) {\n    class ArrayBuffer() : BufferType(GL_ARRAY_BUFFER)\n    class AtomicCounterBuffer() : BufferType(GL_ATOMIC_COUNTER_BUFFER)\n    /* other buffer types... */\n}\n\ninline fun &lt;Buffer: BufferType, R&gt; binding(pair: Pair&lt;Int,Buffer&gt;, block : (Buffer) -&gt; R) {\n    glBindBuffer(pair.second.type, pair.first)\n    block()\n    /* ... */\n}\n</code></pre>\n\n<p>Then you can expose all the available buffer methods on either the top level <code>BufferType</code> class (for globally available methods), or each individual buffer type.</p>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 43306858, "answer_count": 1, "score": 0, "last_activity_date": 1491742102, "creation_date": 1491721788, "last_edit_date": 1491722097, "question_id": 43304010, "link": "https://stackoverflow.com/questions/43304010/kotlin-casting-function-receiver", "title": "Kotlin, casting function receiver", "body": "<p>I have a couple <code>object</code>s, such as <code>object Buffer</code>, offering determined functions and I'd like to call</p>\n\n<pre><code>binding(bufferName[Buffer.VERTEX] to GL_ARRAY_BUFFER) {\n    ... // calling Buffer functions\n}\n</code></pre>\n\n<p>where inside I have available, for example, the functions of the <code>object Buffer</code> because of the <code>GL_ARRAY_BUFFER</code></p>\n\n<p><code>binding</code> is at the moment so defined</p>\n\n<pre><code>inline fun &lt;T, R&gt; binding(pair: Pair&lt;Int, Int&gt;, block: T.() -&gt; R)\n</code></pre>\n\n<p>So my question is if it's possible \"casting\" T to a specific object based on pair.second so that I can call those functions that the object offers?</p>\n"}, {"tags": ["android", "gradle", "build", "android-gradle-plugin", "kotlin"], "comments": [{"owner": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "edited": false, "score": 1, "creation_date": 1491677795, "post_id": 43299012, "comment_id": 73663727, "body": "Try rebuilding your project. Solved a similar issue to me"}, {"owner": {"reputation": 358, "user_id": 4488329, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/dc1e91b536c9e3d080dd479d11d11c37?s=128&d=identicon&r=PG&f=1", "display_name": "John Riley", "link": "https://stackoverflow.com/users/4488329/john-riley"}, "reply_to_user": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "edited": false, "score": 0, "creation_date": 1491681627, "post_id": 43299012, "comment_id": 73665033, "body": "Wow, thank you for the sanity check. I thought Make Project automatically cleaned and rebuilt the project."}, {"owner": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "edited": false, "score": 0, "creation_date": 1491681888, "post_id": 43299012, "comment_id": 73665154, "body": "xD Glad it helped"}], "owner": {"reputation": 358, "user_id": 4488329, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/dc1e91b536c9e3d080dd479d11d11c37?s=128&d=identicon&r=PG&f=1", "display_name": "John Riley", "link": "https://stackoverflow.com/users/4488329/john-riley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 853, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1491677053, "creation_date": 1491677053, "question_id": 43299012, "link": "https://stackoverflow.com/questions/43299012/execution-failed-for-task-appcopydebugandroidtestkotlinclasses-android-kotl", "title": "Execution failed for task &#39;app:copyDebugAndroidTestKotlinClasses&#39; - Android Kotlin Build Error", "body": "<p>I'm attempting to build a two module project with Kotlin and I'm running into this build error, but I'm not sure how to solve it in the slightest.</p>\n\n<pre><code>Error:Execution failed for task ':app:copyDebugAndroidTestKotlinClasses'.\n&gt; kotlin.KotlinNullPointerException (no error message)\n</code></pre>\n\n<p>My project build.gradle is as follows:</p>\n\n<pre><code>buildscript {\n    ext.compileSdkVersion = 25\n    ext.buildToolsVersion = \"25.0.2\"\n    ext.minSdkVersion = 16\n    ext.targetSdkVersion = 25\n\n    ext.kotlin_version = '1.1.0'\n    ext.supportLibVersion = '25.3.1'\n\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\napply plugin: \"kotlin\"\n\nallprojects {\n    repositories {\n        jcenter()\n\n        maven {\n            url \"https://jitpack.io\"\n        }\n    }\n}\n</code></pre>\n\n<p>My app module build.gradle</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\n\next.jUnitVersion = '4.12'\next.espressoVersion = '2.2.2'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.2\"\n    defaultConfig {\n        applicationId \"com.thinkbubble.app\"\n        minSdkVersion 16\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n}\n\nkapt {\n    generateStubs = true\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    compile project(path: ':bubblepicker')\n\n    compile \"com.android.support:appcompat-v7:$supportLibVersion\"\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n\n    testCompile \"junit:junit:$jUnitVersion\"\n    androidTestCompile(\"com.android.support.test.espresso:espresso-core:$espressoVersion\", {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n}\n</code></pre>\n\n<p>And the build.gradle for my second module</p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android'\n\nandroid {\n    compileSdkVersion rootProject.compileSdkVersion\n    buildToolsVersion rootProject.buildToolsVersion\n\n    defaultConfig {\n        minSdkVersion 16\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    compile \"com.android.support:appcompat-v7:$supportLibVersion\"\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n\n    compile files('libs/jbox2d-library-2.1.2.2.jar')\n    compile files('libs/slf4j-api-1.7.22.jar')\n\n    compile 'io.reactivex:rxkotlin:0.60.0'\n    compile 'io.reactivex:rxandroid:1.2.0'\n    compile 'io.reactivex:rxjava:1.1.6'\n}\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n\n<p>What could be causing this exception to appear?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1491663341, "post_id": 43295541, "comment_id": 73657862, "body": "Remove the <code>=</code> before the curly brace. And please, indent your code properly."}, {"owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1491663440, "post_id": 43295541, "comment_id": 73657892, "body": "@JBNizet removed. but still same error"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1491663633, "post_id": 43295541, "comment_id": 73657952, "body": "Add the return type of the function: <code>: Boolean</code>."}, {"owner": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "edited": false, "score": 0, "creation_date": 1491663792, "post_id": 43295541, "comment_id": 73657998, "body": "@AnkurKhandelwal just added a litte explanation on what you need to do"}], "answers": [{"comments": [{"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 1, "creation_date": 1491749376, "post_id": 43295635, "comment_id": 73680694, "body": "Alternatively, you can convert this function body into a single expression, as it&#39;s just a big if expression."}, {"owner": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "reply_to_user": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1491751633, "post_id": 43295635, "comment_id": 73681510, "body": "Just updated my answer. Thank you for point that out. xD I&#39;m still getting used with the power of Kotlin, so I didn&#39;t even think about that possibility"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1491820714, "post_id": 43295635, "comment_id": 73705984, "body": "Since you are using kotlin, I assume you are also using IDEA (created by the JetBrains, the team behind kotlin), the power of which is also something you should pay attention to. If you set the pointer inside the method body (of your anwser), it will suggest you to change it into an expression body."}, {"owner": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "reply_to_user": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1491825520, "post_id": 43295635, "comment_id": 73709157, "body": "Yeah, I&#39;ve been playing with Intellij IDEA for 1 1/2 month only, so I&#39;m still geting used to it. I didn&#39;t know this trick by the way. Thanks for the advice :)"}], "tags": [], "owner": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "is_accepted": true, "score": 13, "last_activity_date": 1491751584, "last_edit_date": 1491751584, "creation_date": 1491663570, "answer_id": 43295635, "question_id": 43295541, "link": "https://stackoverflow.com/questions/43295541/how-to-return-value-from-the-function-in-kotlin/43295635#43295635", "title": "How to return value from the function in kotlin", "body": "<p>Kotlin can only infer the returned type of a function when its a expression, so if your function has a body, you need to specify the returned type after the function paramameters </p>\n\n<pre><code>fun functionName(param: Type...): ReturnedType { \n    //function body\n}\n\nfun  validateDetails(jabberId:String, passwordText: String):Boolean {\n\n            if(jabberId.isEmpty()){\n                jabber_id.requestFocus()\n                jabber_id.error=\"Jabber id can't be null.\"\n                 return false\n            }else if(jabberId.isBlank()){\n             jabber_id.requestFocus()\n             jabber_id.error=\"Jabber id can't be blank.\"\n              return false\n            }else if (passwordText.isNotEmpty()){\n                password.requestFocus();\n                password.error=\"Password can't be null.\"\n                 return false\n            }\n             else{\n                 return true\n            }   \n\n    }\n</code></pre>\n\n<p>As glee8e mentioned, this could be done using an expression. This is how it'd be done.</p>\n\n<pre><code>fun  validateDetails(jabberId:String, passwordText: String) = when {\n    jabberId.isEmpty() -&gt; {\n        jabber_id.requestFocus()\n        jabber_id.error=\"Jabber id can't be null.\"\n\n        false\n    }\n\n    jabberId.isBlank() -&gt; {\n        jabber_id.requestFocus()\n        jabber_id.error=\"Jabber id can't be blank.\"\n\n        false\n    }\n\n    passwordText.isNotEmpty() -&gt; {\n        password.requestFocus();\n        password.error=\"Password can't be null.\"\n        false\n    }\n\n    else -&gt; true  \n}\n</code></pre>\n"}], "owner": {"reputation": 922, "user_id": 7124362, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/663c7ea155af997408dbe0a6a8914b52?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur Khandelwal", "link": "https://stackoverflow.com/users/7124362/ankur-khandelwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18780, "favorite_count": 0, "accepted_answer_id": 43295635, "answer_count": 1, "score": 4, "last_activity_date": 1491751584, "creation_date": 1491663092, "last_edit_date": 1491663416, "question_id": 43295541, "link": "https://stackoverflow.com/questions/43295541/how-to-return-value-from-the-function-in-kotlin", "title": "How to return value from the function in kotlin", "body": "<p>I am trying to return the boolean value from the function.</p>\n\n<pre><code>fun  validateDetails(jabberId:String, passwordText: String) {\n\n            if(jabberId.isEmpty()){\n                jabber_id.requestFocus()\n                jabber_id.error=\"Jabber id can't be null.\"\n                 return false\n            }else if(jabberId.isBlank()){\n             jabber_id.requestFocus()\n             jabber_id.error=\"Jabber id can't be blank.\"\n              return false\n            }else if (passwordText.isNotEmpty()){\n                password.requestFocus();\n                password.error=\"Password can't be null.\"\n                 return false\n            }\n             else{\n                 return true\n            }   \n\n    }\n</code></pre>\n\n<p>Error:\nThe boolean literal does not conform to the expected type Unit. </p>\n\n<p>I know unit is the default return type in kotlin. How will i change this to boolean.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1491647227, "post_id": 43292802, "comment_id": 73652862, "body": "Inlining has a cost in terms of extra generated code, which in turn places pressure on the cache."}, {"owner": {"reputation": 867, "user_id": 5500449, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439709b90e57d0ba4f2d1f0b065bb16e?s=128&d=identicon&r=PG&f=1", "display_name": "Jefferson Tavares", "link": "https://stackoverflow.com/users/5500449/jefferson-tavares"}, "edited": false, "score": 1, "creation_date": 1491648292, "post_id": 43292802, "comment_id": 73653141, "body": "AFAIK inline is suited for higher-order functions, so that the generated code will look more like java, or in other words, it will generate a full method for your higher order function. I have never seen a property accessor being inlined like that"}], "answers": [{"tags": [], "owner": {"reputation": 1214, "user_id": 6095439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0a801257ee75e0987200564b0ea798?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/6095439/john"}, "is_accepted": true, "score": 9, "last_activity_date": 1505923514, "last_edit_date": 1592644375, "creation_date": 1491650801, "answer_id": 43293479, "question_id": 43292802, "link": "https://stackoverflow.com/questions/43292802/what-are-the-use-cases-of-kotlin-inline-properties/43293479#43293479", "title": "What are the use cases of Kotlin inline properties?", "body": "<p>Here is inline properties <a href=\"https://github.com/Kotlin/KEEP/issues/34\" rel=\"noreferrer\">discussion</a>:</p>\n<blockquote>\n<p>Example of reified type parameter:</p>\n<pre><code>inline val &lt;reified T : PsiElement&gt; T.nextSiblingOfSameType: T?\n    get() = PsiTreeUtil.getNextSiblingOfType(this, T::class.java)\n</code></pre>\n<p>Another use case is to hide some properties from the binary interface of a library. In Kotlin standard library, together with the <code>@InlineOnly</code> annotation this might make it possible in the future to exclude declarations of such properties from class files, reducing method count, this will mostly benefit Android with it's 64K method limit.</p>\n</blockquote>\n"}], "owner": {"reputation": 2732, "user_id": 3009822, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HslzA.jpg?s=128&g=1", "display_name": "Yudhistira Arya", "link": "https://stackoverflow.com/users/3009822/yudhistira-arya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2298, "favorite_count": 1, "accepted_answer_id": 43293479, "answer_count": 1, "score": 12, "last_activity_date": 1505923514, "creation_date": 1491646834, "last_edit_date": 1491666614, "question_id": 43292802, "link": "https://stackoverflow.com/questions/43292802/what-are-the-use-cases-of-kotlin-inline-properties", "title": "What are the use cases of Kotlin inline properties?", "body": "<p>As properties' <em>getter</em> or <em>setter</em> don't usually have function as argument nor <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"noreferrer\">reified</a> type, what would be the benefits / use case of using <code>inline</code> properties? </p>\n\n<p>If the benefits would be to reduce cost related to method call, why not make all properties getter/setter inline by default? </p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#inline-properties-since-11\" rel=\"noreferrer\">Kotlin Inline Properties</a></p>\n\n<p>Eg. </p>\n\n<pre><code>val foo: Foo\n    inline get() = Foo()\n\nvar bar: Bar\n    get() = ...\n    inline set(v) { ... }\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 10269, "user_id": 3950370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b44be8311e04ebbf6d1d153e0aae4a69?s=128&d=identicon&r=PG", "display_name": "Lukas K&#246;rfer", "link": "https://stackoverflow.com/users/3950370/lukas-k%c3%b6rfer"}, "edited": false, "score": 1, "creation_date": 1491648515, "post_id": 43292321, "comment_id": 73653178, "body": "Could you post your gradle script (or at least the relevant parts)? Also, maybe this <a href=\"https://github.com/JetBrains/spek/issues/104\" rel=\"nofollow noreferrer\">GitHub issue</a> may help you."}], "owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 664, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1491643440, "creation_date": 1491643440, "question_id": 43292321, "link": "https://stackoverflow.com/questions/43292321/how-to-run-spek-tests-from-command-line", "title": "How to run Spek tests from command line?", "body": "<p>I have an android gradle project with JUnit tests and I've added a Spek test. It's working when I run it from the IDE, but <code>./gradlew testDebugUnitTest</code> does not include the Spek test, it only runs the JUnit tests.\nIs there a way to run Spek tests with gradle or any other way from command line?</p>\n"}, {"tags": ["java", "math", "kotlin", "logarithm"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1491618127, "post_id": 43289478, "comment_id": 73646780, "body": "Considering how few cases there are, a simple <code>switch</code> might be reasonable."}, {"owner": {"reputation": 1759, "user_id": 2467544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XP1mx.png?s=128&g=1", "display_name": "Blake O&#39;Hare", "link": "https://stackoverflow.com/users/2467544/blake-ohare"}, "edited": false, "score": 2, "creation_date": 1491618223, "post_id": 43289478, "comment_id": 73646796, "body": "Or similarly simply  make a loop to preopulate a <code>HashSet&lt;Long&gt;</code>. Whatever you do, don&#39;t use double/logarithm logic to do pure integer checks otherwise you&#39;ll be at the mercy of float accuracy as you saw with 999_999_..."}, {"owner": {"reputation": 540, "user_id": 1669229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0a7c42d742475b60cbfbb353d326b5?s=128&d=identicon&r=PG", "display_name": "jonhkr", "link": "https://stackoverflow.com/users/1669229/jonhkr"}, "edited": false, "score": 0, "creation_date": 1491618230, "post_id": 43289478, "comment_id": 73646799, "body": "Have you tried using the BigDecimal type, i don&#39;t know if there is a math library of it but it works better with precision than the Double type."}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 540, "user_id": 1669229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0a7c42d742475b60cbfbb353d326b5?s=128&d=identicon&r=PG", "display_name": "jonhkr", "link": "https://stackoverflow.com/users/1669229/jonhkr"}, "edited": false, "score": 0, "creation_date": 1491618286, "post_id": 43289478, "comment_id": 73646808, "body": "@jonhkr I consider <code>BigDecimal</code> close enough to <code>String</code> in this instance to avoid it~ :P"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "reply_to_user": {"reputation": 540, "user_id": 1669229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0a7c42d742475b60cbfbb353d326b5?s=128&d=identicon&r=PG", "display_name": "jonhkr", "link": "https://stackoverflow.com/users/1669229/jonhkr"}, "edited": false, "score": 0, "creation_date": 1491618313, "post_id": 43289478, "comment_id": 73646816, "body": "@jonhkr BigDecimal is a wildly inefficient way to do this"}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "edited": false, "score": 0, "creation_date": 1491618740, "post_id": 43289478, "comment_id": 73646867, "body": "@SumitGulati 420%10 == 0, so no, in that case it is not a power of 10 (1, 10, 100, 1000, ...)"}, {"owner": {"reputation": 545, "user_id": 1458540, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e408935ce90d36a5bb4b7ab7a274d0?s=128&d=identicon&r=PG", "display_name": "Sumit Gulati", "link": "https://stackoverflow.com/users/1458540/sumit-gulati"}, "edited": false, "score": 2, "creation_date": 1491618809, "post_id": 43289478, "comment_id": 73646881, "body": "<a href=\"http://codereview.stackexchange.com/questions/117203/checking-whether-a-number-is-a-power-of-10\" title=\"checking whether a number is a power of 10\">codereview.stackexchange.com/questions/117203/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 63648, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1491619292, "post_id": 43289522, "comment_id": 73646932, "body": "Can&#39;t you get away with <code>n &gt; 10 &amp;&amp; n % 10 == 0</code> .... it <i>would</i> be infinitesimally more efficient :)"}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 63648, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1491619459, "post_id": 43289522, "comment_id": 73646957, "body": "@juanpa.arrivillaga No because then for n=10 you would not satisfy that n&gt;10 and therefore the return statement would return false, because 10 == 1 is false."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3778137"}, "reply_to_user": {"reputation": 63648, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1491619580, "post_id": 43289522, "comment_id": 73646972, "body": "@juanpa.arrivillaga 10 raised to the power 0 is 1.  <code>while(n &gt; 10 &amp;&amp; n % 10 == 0){         n &#47;= 10;     }     return n == 10;</code> would not work in that case"}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 63648, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1491619752, "post_id": 43289522, "comment_id": 73646995, "body": "@juanpa.arrivillaga I think you can make it n &gt; 9 though"}, {"owner": {"reputation": 63648, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1491620237, "post_id": 43289522, "comment_id": 73647045, "body": "@RikSchaaf d&#39;oh! What was I thinking! It actually doesn&#39;t. If fails for numbers less than 10 but not equal to 1!"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491620312, "post_id": 43289522, "comment_id": 73647050, "body": "I&#39;d guess that if you are really set on efficiency, the bunch-of-ors variant would be faster. Division is slow."}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491621453, "post_id": 43289522, "comment_id": 73647190, "body": "@pvg It is a common misconception that division is slow. While it does use more cycles to compute the divided number, it is on average dwarfed by tasks such as writing to memory. See <a href=\"http://stackoverflow.com/questions/226465/should-i-use-multiplication-or-division\" title=\"should i use multiplication or division\">stackoverflow.com/questions/226465/&hellip;</a> for more detail."}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1491621540, "post_id": 43289522, "comment_id": 73647199, "body": "@Supuhstar since long integers have a fixed max value, you can unroll the loop <a href=\"https://en.wikipedia.org/wiki/Loop_unrolling\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Loop_unrolling</a>"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491621979, "post_id": 43289522, "comment_id": 73647266, "body": "@RikSchaaf that&#39;s about division by two, which a compiler or JIT can special case. Here you have multiple divisions compared to a bunch of ors. A person less argumentative and lazy than me would probably JMH it."}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491624994, "post_id": 43289522, "comment_id": 73647759, "body": "@pvg I mainly tried to refer to &#39;How long the pipeline difference is is completely hardware dependant. Last hardware I used was something like 9 cycles for a FPU multiply and 50 cycles for a FPU divide.&#39;, a quote from the excepted answer that wasn&#39;t just about divide by 2, which is of course not cpu intensive considering PCs are base 2."}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 63648, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1491625446, "post_id": 43289522, "comment_id": 73647838, "body": "@juanpa.arrivillaga that is true, because you don&#39;t check if the value is 1 at the end."}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1491626430, "post_id": 43289522, "comment_id": 73648003, "body": "@RikSchaaf can you demonstrate that in your example?"}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1491626875, "post_id": 43289522, "comment_id": 73648085, "body": "@Supuhstar basically it would be manually writing out if a number is divisible by 10, 100, etc using modulo, but <a href=\"http://codereview.stackexchange.com/a/117294\">codereview.stackexchange.com/a/117294</a> shows an even more optimized solution as it doesn&#39;t require arithmetic, only logic."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491637110, "post_id": 43289522, "comment_id": 73650212, "body": "@RikSchaaf I don&#39;t think any of these very qualified and narrow statements add up to &#39;division is slow (compared to other arithmetical or logical operations) is a myth&#39;. It&#39;s a mathematical reality. I did also try a quick naive benchmark of the or easily outperforms the mod-and-div version. This is notable as the exhaustive or has local worst-case performance for every single negative match - i.e. in uniformly distributed inputs, just about always."}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491666061, "post_id": 43289522, "comment_id": 73658699, "body": "@pvg the advantage is (if the compiler and jvm are smart enough) that the modulo and division are calculated at the same time by the cpu which means that the only statements per loop cycle would be &gt;, ==, /% and assignment. I do however suspect that java doesn&#39;t optimize for this so in that case you are indeed correct. Also my previous comment directed at Supuhstar is probably the fastest implementation"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491666506, "post_id": 43289522, "comment_id": 73658853, "body": "@RikSchaaf I think you underestimate how slow division is compared to logical ops. It&#39;s really that slow and measurement bears this out."}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491670420, "post_id": 43289522, "comment_id": 73661191, "body": "@pvg There is a difference between floating point division and integer division. I think it is true that floating point division is way slower. I don&#39;t have confirmation for that though. For integer division vs integer addition I performed a test: 200 million loop cycles with either a value divided by 10 or a value + 10. Results over an average of 100 trials: division 239.015ms, addition 213.366ms So the average delay that division has over addition is (239.015ms-213.366ms)/2e8=1.28e-7ms = 0.128 nanoseconds per operation. This method will use at most 38 division/modulo operations = 4.87ns loss"}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491671161, "post_id": 43289522, "comment_id": 73661485, "body": "@pvg I now performed the same test for floating point as well: there is about 8 ms difference between the 2, which equates to 0.04ns per operation. This surprises me (rerunning gives me the same results), but it seems that modern cpu implementations of fp division are almost on par with addition."}, {"owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1491671434, "post_id": 43289522, "comment_id": 73661593, "body": "@pvg the == operator is indeed faster, about a factor 10."}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1565788378, "post_id": 43289522, "comment_id": 101460516, "body": "The logic tower version ended up being the one I used. Ridiculously fast and not unreasonably long"}], "tags": [], "owner": {"reputation": 983, "user_id": 2877358, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e5ddf2c6f8bcde2a6bcc2a61bd5b6c08?s=128&d=identicon&r=PG&f=1", "display_name": "Rik Schaaf", "link": "https://stackoverflow.com/users/2877358/rik-schaaf"}, "is_accepted": true, "score": 8, "last_activity_date": 1491710613, "last_edit_date": 1492087233, "creation_date": 1491618546, "answer_id": 43289522, "question_id": 43289478, "link": "https://stackoverflow.com/questions/43289478/how-can-i-tell-if-a-number-is-a-power-of-10-in-kotlin-or-java/43289522#43289522", "title": "How can I tell if a number is a power of 10 in Kotlin or Java?", "body": "<p>What you could do is a simple while loop:</p>\n\n<pre><code>static boolean isPowerOf10(long n) {\n    while(n &gt; 1 &amp;&amp; n % 10 == 0){\n        n /= 10;\n    }\n    return n == 1;\n}\n</code></pre>\n\n<p>Or maybe even better, check for the powers of 10 themselves since there are only 19 in a long <a href=\"https://codereview.stackexchange.com/questions/117203/checking-whether-a-number-is-a-power-of-10/117294#117294\">(ref)</a>:</p>\n\n<pre><code>public static boolean isPowerOf10(long n) {\n  return \n    n == 1L\n  || n == 10L\n  || n == 100L\n  || n == 1000L\n  || n == 10000L\n  || n == 100000L\n  || n == 1000000L\n  || n == 10000000L\n  || n == 100000000L\n  || n == 1000000000L\n  || n == 10000000000L\n  || n == 100000000000L\n  || n == 1000000000000L\n  || n == 10000000000000L\n  || n == 100000000000000L\n  || n == 1000000000000000L\n  || n == 10000000000000000L\n  || n == 100000000000000000L\n  || n == 1000000000000000000L;\n}  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29824, "user_id": 2464386, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/508c3cc96cdca194c0204f1f7c2758e0?s=128&d=identicon&r=PG", "display_name": "ajb", "link": "https://stackoverflow.com/users/2464386/ajb"}, "edited": false, "score": 2, "creation_date": 1491622890, "post_id": 43289776, "comment_id": 73647399, "body": "You could make it even faster by using a <code>HashMap</code>!!  (Assuming that you only have to set the map up once but could call the method many times.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3778137"}, "reply_to_user": {"reputation": 29824, "user_id": 2464386, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/508c3cc96cdca194c0204f1f7c2758e0?s=128&d=identicon&r=PG", "display_name": "ajb", "link": "https://stackoverflow.com/users/2464386/ajb"}, "edited": false, "score": 0, "creation_date": 1491628899, "post_id": 43289776, "comment_id": 73648396, "body": "@ajb I was thinking about setting a hashmap once as you pointed out. I could only come up with putting the hasmap in the main() method and passing it to the function or creating a static hashmap in my class Although they work, putting something used only by this function in  the main method or creating the hashmap as part of the class does not seem an elegant solution. Any advice on how can I do it better?"}, {"owner": {"reputation": 29824, "user_id": 2464386, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/508c3cc96cdca194c0204f1f7c2758e0?s=128&d=identicon&r=PG", "display_name": "ajb", "link": "https://stackoverflow.com/users/2464386/ajb"}, "edited": false, "score": 0, "creation_date": 1491631157, "post_id": 43289776, "comment_id": 73648855, "body": "Create a new class that defines the <code>isPowerOfTen</code> method.  The map can be a private class variable (<code>static</code>) in your class and can be initialized with a static initializer block if you need code to do it."}, {"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1491633445, "post_id": 43289776, "comment_id": 73649320, "body": "You can make the array <code>static</code> to make this much more efficient."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 29824, "user_id": 2464386, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/508c3cc96cdca194c0204f1f7c2758e0?s=128&d=identicon&r=PG", "display_name": "ajb", "link": "https://stackoverflow.com/users/2464386/ajb"}, "edited": false, "score": 0, "creation_date": 1491642284, "post_id": 43289776, "comment_id": 73651498, "body": "@ajb Why would <code>HashMap</code> be faster than a binary search on a sorted array? IMO they perform about the same number of operations, and the array version has much better memory locality"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1491648114, "post_id": 43289776, "comment_id": 73653103, "body": "@voddan HashMap&#39;s get is theoretically O(1) and worst case o(n) (in our case I expect O(1), since there is really few elements), while binary search is O(log(n))."}, {"owner": {"reputation": 29824, "user_id": 2464386, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/508c3cc96cdca194c0204f1f7c2758e0?s=128&d=identicon&r=PG", "display_name": "ajb", "link": "https://stackoverflow.com/users/2464386/ajb"}, "edited": false, "score": 0, "creation_date": 1491664074, "post_id": 43289776, "comment_id": 73658075, "body": "I just realized I should have said &quot;hash map&quot; and not <code>HashMap</code>.  Using Java&#39;s <code>HashMap</code> has a lot of unnecessary overhead, since it has to be general and will set up buckets.  But it&#39;s very simple to set up an efficient hash map by finding a prime number <i>p</i> such that all the values 10^k % <i>p</i> will be different.  Then the function then becomes: compute <code>number % p</code>; look up in the table and make sure the key in the table equals <code>number</code>; if so, return the logarithm from the table."}, {"owner": {"reputation": 29824, "user_id": 2464386, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/508c3cc96cdca194c0204f1f7c2758e0?s=128&d=identicon&r=PG", "display_name": "ajb", "link": "https://stackoverflow.com/users/2464386/ajb"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1491664429, "post_id": 43289776, "comment_id": 73658191, "body": "@voddan It&#39;s not a matter for opinion.  See my above comment; a hash map lookup would be just a few operations, while a binary tree lookup would require a loop with 5 or 6 iterations every time you give it a number that&#39;s not in the table."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3778137"}, "is_accepted": false, "score": 6, "last_activity_date": 1491621468, "creation_date": 1491621468, "answer_id": 43289776, "question_id": 43289478, "link": "https://stackoverflow.com/questions/43289478/how-can-i-tell-if-a-number-is-a-power-of-10-in-kotlin-or-java/43289776#43289776", "title": "How can I tell if a number is a power of 10 in Kotlin or Java?", "body": "<p>This is another way you can check if the number is a power of 10. This code leverages on the fact that there are only a few numbers that fit in the long data type and are a power of 10.</p>\n\n<pre><code>public static boolean isPowerOfTen(long number){\n        long[] powersOfTen = new long[] {\n            1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000, 10000000000, 100000000000, 1000000000000, 10000000000000, 100000000000000, 1000000000000000, 10000000000000000, 100000000000000000, 1000000000000000000\n        };\n\n        return Arrays.binarySearch(powersOfTen, number) &gt;= 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1565788407, "post_id": 43356367, "comment_id": 101460537, "body": "And this ended up being the solution I use in Kotlin. Thanks!"}], "tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": false, "score": 2, "last_activity_date": 1491945533, "creation_date": 1491945533, "answer_id": 43356367, "question_id": 43289478, "link": "https://stackoverflow.com/questions/43289478/how-can-i-tell-if-a-number-is-a-power-of-10-in-kotlin-or-java/43356367#43356367", "title": "How can I tell if a number is a power of 10 in Kotlin or Java?", "body": "<p>To make the second part of Rik Schaaf's answer in Kotlin, you could do something like:</p>\n\n<pre><code>val Long.isPowerOfTen get() = when (this) {\n    1L,\n    10L,\n    100L,\n    1000L,\n    10000L,\n    100000L,\n    1000000L,\n    10000000L,\n    100000000L,\n    1000000000L,\n    10000000000L,\n    100000000000L,\n    1000000000000L,\n    10000000000000L,\n    100000000000000L,\n    1000000000000000L,\n    10000000000000000L,\n    100000000000000000L,\n    1000000000000000000L -&gt; true\n    else -&gt; false\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11834215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b2f5ce9c461d2e88226a65ab25a9de?s=128&d=identicon&r=PG&f=1", "display_name": "Shyam", "link": "https://stackoverflow.com/users/11834215/shyam"}, "is_accepted": false, "score": 1, "last_activity_date": 1564036033, "last_edit_date": 1564036033, "creation_date": 1564033272, "answer_id": 57195038, "question_id": 43289478, "link": "https://stackoverflow.com/questions/43289478/how-can-i-tell-if-a-number-is-a-power-of-10-in-kotlin-or-java/57195038#57195038", "title": "How can I tell if a number is a power of 10 in Kotlin or Java?", "body": "<p>We can take help of String class</p>\n\n<pre><code>return Math.pow(10,String.valueOf(x).length()-1) == x;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1565788273, "post_id": 57492939, "comment_id": 101460450, "body": "Lol nice. Could add a special case up top for 1"}, {"owner": {"reputation": 930, "user_id": 9848549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ICaqykwS_Ak/AAAAAAAAAAI/AAAAAAAAEK4/Biu8p9bmYt8/photo.jpg?sz=128", "display_name": "saintlyzero", "link": "https://stackoverflow.com/users/9848549/saintlyzero"}, "reply_to_user": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1565954776, "post_id": 57492939, "comment_id": 101514032, "body": "@Supuhstar Yeah handled that case."}], "tags": [], "owner": {"reputation": 930, "user_id": 9848549, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ICaqykwS_Ak/AAAAAAAAAAI/AAAAAAAAEK4/Biu8p9bmYt8/photo.jpg?sz=128", "display_name": "saintlyzero", "link": "https://stackoverflow.com/users/9848549/saintlyzero"}, "is_accepted": false, "score": 1, "last_activity_date": 1565954601, "last_edit_date": 1565954601, "creation_date": 1565778618, "answer_id": 57492939, "question_id": 43289478, "link": "https://stackoverflow.com/questions/43289478/how-can-i-tell-if-a-number-is-a-power-of-10-in-kotlin-or-java/57492939#57492939", "title": "How can I tell if a number is a power of 10 in Kotlin or Java?", "body": "<p><strong>Approach using String</strong></p>\n\n<pre><code>boolean isPowerOfTen(int n){\n\n  if( n == 1)\n    return true;\n\n  String num = String.valueOf(n);\n\n  if(num.charAt(0) == '1' &amp;&amp; Integer.parseInt(num.substring(1)) == 0)\n      return true;\n  else\n     return false;\n}\n</code></pre>\n\n<p>Here, we check whether the first char is '1' <strong>AND</strong> <br>\nwhether the substring formed by discarding the first character is 0.</p>\n\n<p><strike>This won't work for 10^0, which is 1.</strike>\nHandled this case.</p>\n\n<p>This is not as efficient as the Mathematical approach.</p>\n"}], "owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2917, "favorite_count": 0, "accepted_answer_id": 43289522, "answer_count": 5, "score": 2, "last_activity_date": 1602624867, "creation_date": 1491617978, "question_id": 43289478, "link": "https://stackoverflow.com/questions/43289478/how-can-i-tell-if-a-number-is-a-power-of-10-in-kotlin-or-java", "title": "How can I tell if a number is a power of 10 in Kotlin or Java?", "body": "<p>I have a number (64-bit int) and want to know if it's a pure power of 10. That is to say, a 1 followed 0 or more by zeroes. <strong>Is there an efficient way of doing this that does <em>not</em> involve turning it into a String?</strong></p>\n\n<hr>\n\n<p>Currently I'm doing this:</p>\n\n<p>Kotlin</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun isPowerOf10(n: Long): Boolean {\n    val logN = Math.log10(myInt.toDouble())\n    return logN != Math.floor(logN)\n}\n</code></pre>\n\n<p>Java</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>static boolean isPowerOf10(long n) {\n    double logN = Math.log10((double) myInt);\n    return logN != Math.floor(logN);\n}\n</code></pre>\n\n<p>But it fails with <code>isPowerOf10(999_999_999_999_999_999)</code> (and the negative version), due to precision loss when converting to a double and taking <code>log10</code>, which outputs precisely <code>18.0</code>.</p>\n"}, {"tags": ["kotlin", "rx-java", "rx-kotlin"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 1, "creation_date": 1491591492, "post_id": 43285064, "comment_id": 73638742, "body": "See the updated Javadoc for 2.0.8: <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/schedulers/Schedulers.html#io()\" rel=\"nofollow noreferrer\">reactivex.io/RxJava/2.x/javadoc/io/reactivex/schedulers/&hellip;</a>"}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 1, "creation_date": 1491591686, "post_id": 43285064, "comment_id": 73638821, "body": "Specifically &quot;Note that due to possible initialization cycles, using any of the other scheduler-returning methods will result in a NullPointerException.&quot;"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 2, "creation_date": 1491591899, "post_id": 43285064, "comment_id": 73638919, "body": "&quot;Once the Schedulers class has been initialized, you can override the returned Scheduler instance via the RxJavaPlugins.setIoSchedulerHandler(io.reactivex.functions.F&zwnj;&#8203;unction) method.&quot;"}, {"owner": {"reputation": 669, "user_id": 1261256, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/dYZvH.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1261256/alex"}, "edited": false, "score": 0, "creation_date": 1491592467, "post_id": 43285064, "comment_id": 73639179, "body": "Thanks! I tried previously using <code>setIoSchedulerHandler</code>, but <code>flatMap</code> was not getting called. Finally figured out why: The <code>validate</code> method was returning an observable that did <code>emitter.onNext(null)</code> :/ Since nulls are no longer accepted in RxJava 2, I changed that to a <code>Completable</code> and tests now pass!"}], "answers": [{"tags": [], "owner": {"reputation": 669, "user_id": 1261256, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/dYZvH.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1261256/alex"}, "is_accepted": false, "score": 12, "last_activity_date": 1491592777, "creation_date": 1491592777, "answer_id": 43285631, "question_id": 43285064, "link": "https://stackoverflow.com/questions/43285064/rxjava-2-overriding-io-scheduler-in-unit-test/43285631#43285631", "title": "RxJava 2 overriding IO scheduler in unit test", "body": "<p>Figured it out! It had to do with the fact that in this code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>validate(data)\n    .subscribeOn(Schedulers.io())\n    .observeOn(AndroidSchedulers.mainThread())\n    .flatMap { ... }\n</code></pre>\n\n<p><code>validate(data)</code> was returning an <code>Observable</code>, which was emitting the following: <code>emitter.onNext(null)</code>. Since RxJava 2 no longer accepts <code>null</code> values, <code>flatMap</code> was not getting called. I changed <code>validate</code> to return a <code>Completable</code> and updated the scheduler override to the following:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>RxJavaPlugins.setIoSchedulerHandler { Schedulers.trampoline() }\n</code></pre>\n\n<p>Now the tests pass!</p>\n"}, {"comments": [{"owner": {"reputation": 11742, "user_id": 5730321, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/6yX7D.jpg?s=128&g=1", "display_name": "Leo Droidcoder", "link": "https://stackoverflow.com/users/5730321/leo-droidcoder"}, "edited": false, "score": 0, "creation_date": 1505816340, "post_id": 43320828, "comment_id": 79557814, "body": "Thanks for sharing &quot;trampoline&quot;. I used &quot;immediate&quot;, but it&#39;s not available in Rx2 anymore"}, {"owner": {"reputation": 16154, "user_id": 4747587, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/VdsH3.png?s=128&g=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4747587/henry"}, "edited": false, "score": 2, "creation_date": 1522558180, "post_id": 43320828, "comment_id": 86197158, "body": "I don&#39;t this we need this layer of abstraction. It feels like we are modifying production code significantly just for the sake of testing, when we already have the means to test it without such an abstraction. The answer provided by @Alex works perfectly."}, {"owner": {"reputation": 1252, "user_id": 1572848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3e6ec603f9ab7b02948a22118f2c656c?s=128&d=identicon&r=PG", "display_name": "William Reed", "link": "https://stackoverflow.com/users/1572848/william-reed"}, "reply_to_user": {"reputation": 16154, "user_id": 4747587, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/VdsH3.png?s=128&g=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4747587/henry"}, "edited": false, "score": 1, "creation_date": 1546887458, "post_id": 43320828, "comment_id": 94993785, "body": "I&#39;d have to agree with @Henry here. It seems much more practical to just modify the schedulers during testing with <code>RxJavaPlugin...</code> than have to modify production code just for the sake of tests"}], "tags": [], "owner": {"reputation": 4683, "user_id": 3870025, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0fd762141547dc47fbf1fd5b9b389fc?s=128&d=identicon&r=PG&f=1", "display_name": "solidak", "link": "https://stackoverflow.com/users/3870025/solidak"}, "is_accepted": true, "score": 24, "last_activity_date": 1574788837, "last_edit_date": 1574788837, "creation_date": 1491820248, "answer_id": 43320828, "question_id": 43285064, "link": "https://stackoverflow.com/questions/43285064/rxjava-2-overriding-io-scheduler-in-unit-test/43320828#43320828", "title": "RxJava 2 overriding IO scheduler in unit test", "body": "<p>I suggest you take a different approach and add a layer of abstraction to your schedulers. This guy has a nice <a href=\"https://medium.com/@peter.tackage/an-alternative-to-rxandroidplugins-and-rxjavaplugins-scheduler-injection-9831bbc3dfaf\" rel=\"nofollow noreferrer\">article</a> about it. </p>\n\n<p>It would look something like this in Kotlin</p>\n\n<pre><code>interface SchedulerProvider {\n    fun ui(): Scheduler\n    fun computation(): Scheduler\n    fun trampoline(): Scheduler\n    fun newThread(): Scheduler\n    fun io(): Scheduler \n}\n</code></pre>\n\n<p>And then you override that with your own implementation of SchedulerProvider:</p>\n\n<pre><code>class AppSchedulerProvider : SchedulerProvider {\n    override fun ui(): Scheduler {\n        return AndroidSchedulers.mainThread()\n    }\n\n    override fun computation(): Scheduler {\n        return Schedulers.computation()\n    }\n\n    override fun trampoline(): Scheduler {\n        return Schedulers.trampoline()\n    }\n\n    override fun newThread(): Scheduler {\n        return Schedulers.newThread()\n    }\n\n    override fun io(): Scheduler {\n        return Schedulers.io()\n    }\n}\n</code></pre>\n\n<p>And one for testing classes:</p>\n\n<pre><code>class TestSchedulerProvider : SchedulerProvider {\n    override fun ui(): Scheduler {\n        return Schedulers.trampoline()\n    }\n\n    override fun computation(): Scheduler {\n        return Schedulers.trampoline()\n    }\n\n    override fun trampoline(): Scheduler {\n        return Schedulers.trampoline()\n    }\n\n    override fun newThread(): Scheduler {\n        return Schedulers.trampoline()\n    }\n\n    override fun io(): Scheduler {\n        return Schedulers.trampoline()\n    }\n}\n</code></pre>\n\n<p>Your code would look like this where you call RxJava:</p>\n\n<pre><code>mCompositeDisposable.add(mDataManager.getQuote()\n        .subscribeOn(mSchedulerProvider.io())\n        .observeOn(mSchedulerProvider.ui())\n        .subscribe(Consumer&lt;Quote&gt; {\n...\n</code></pre>\n\n<p>And you'll just override your implementation of <code>SchedulerProvider</code> based on where you test it. Here's a sample project for reference, I am linking the test file that would use the testable-version of <code>SchedulerProvider</code>: <a href=\"https://github.com/Obaied/DingerQuotes/blob/master/app/src/test/java/com/obaied/dingerquotes/QuotePresenterTest.kt#L31\" rel=\"nofollow noreferrer\">https://github.com/Obaied/DingerQuotes/blob/master/app/src/test/java/com/obaied/dingerquotes/QuotePresenterTest.kt#L31</a></p>\n"}, {"tags": [], "owner": {"reputation": 607, "user_id": 3714808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc76b14712089b440276bc159ed27589?s=128&d=identicon&r=PG&f=1", "display_name": "Efi G", "link": "https://stackoverflow.com/users/3714808/efi-g"}, "is_accepted": false, "score": 5, "last_activity_date": 1562064082, "last_edit_date": 1562064082, "creation_date": 1543321699, "answer_id": 53499714, "question_id": 43285064, "link": "https://stackoverflow.com/questions/43285064/rxjava-2-overriding-io-scheduler-in-unit-test/53499714#53499714", "title": "RxJava 2 overriding IO scheduler in unit test", "body": "<p>This is the exact syntax that worked for me:</p>\n\n<pre><code>RxJavaPlugins.setIoSchedulerHandler(scheduler -&gt; Schedulers.trampoline())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2548, "user_id": 3918479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c16Sz.jpg?s=128&g=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/3918479/sebastian"}, "is_accepted": false, "score": 4, "last_activity_date": 1561734677, "creation_date": 1561734677, "answer_id": 56809321, "question_id": 43285064, "link": "https://stackoverflow.com/questions/43285064/rxjava-2-overriding-io-scheduler-in-unit-test/56809321#56809321", "title": "RxJava 2 overriding IO scheduler in unit test", "body": "<p>As an alternative to proposed solutions, this has been working fine for a while in my projects.\nYou can use it in your test classes like this:</p>\n\n<pre><code>@get:Rule\nval immediateSchedulersRule = ImmediateSchedulersRule()\n</code></pre>\n\n<p>And the class looks like this:</p>\n\n<pre><code>class ImmediateSchedulersRule : ExternalResource() {\n\n    val immediateScheduler: Scheduler = object : Scheduler() {\n\n        override fun createWorker() = ExecutorScheduler.ExecutorWorker(Executor { it.run() })\n\n        // This prevents errors when scheduling a delay\n        override fun scheduleDirect(run: Runnable, delay: Long, unit: TimeUnit): Disposable {\n            return super.scheduleDirect(run, 0, unit)\n        }\n\n    }\n\n    override fun before() {\n        RxJavaPlugins.setIoSchedulerHandler { immediateScheduler }\n        RxJavaPlugins.setComputationSchedulerHandler { immediateScheduler }\n        RxJavaPlugins.setNewThreadSchedulerHandler { immediateScheduler }\n\n        RxAndroidPlugins.setInitMainThreadSchedulerHandler { immediateScheduler }\n        RxAndroidPlugins.setMainThreadSchedulerHandler { immediateScheduler }\n    }\n\n    override fun after() {\n        RxJavaPlugins.reset()\n    }\n\n}\n</code></pre>\n\n<p>You can find a way to migrate from TestRule to ExternalResource <a href=\"https://github.com/airbnb/MvRx/commit/853e7d1c55df1fdc791103dd9e1edbf532fc19d4\" rel=\"nofollow noreferrer\">here</a> and get more info on testing RxJava 2 <a href=\"https://www.infoq.com/articles/Testing-RxJava2/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 669, "user_id": 1261256, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/dYZvH.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1261256/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8369, "favorite_count": 7, "accepted_answer_id": 43320828, "answer_count": 4, "score": 20, "last_activity_date": 1574788837, "creation_date": 1491590443, "last_edit_date": 1573034791, "question_id": 43285064, "link": "https://stackoverflow.com/questions/43285064/rxjava-2-overriding-io-scheduler-in-unit-test", "title": "RxJava 2 overriding IO scheduler in unit test", "body": "<p>I'm trying to test the following RxKotlin/RxJava 2 code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>validate(data)\n    .subscribeOn(Schedulers.io())\n    .observeOn(AndroidSchedulers.mainThread())\n    .flatMap { ... }\n</code></pre>\n\n<p>I'm attempting to override the schedulers as follows:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Runs before each test suite\nRxJavaPlugins.setInitIoSchedulerHandler { Schedulers.trampoline() }\nRxAndroidPlugins.setInitMainThreadSchedulerHandler { Schedulers.trampoline() }\n</code></pre>\n\n<p>However, I get the following error when running the test:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.ExceptionInInitializerError\n...\nCaused by: java.lang.NullPointerException: Scheduler Callable result can't be null\n    at io.reactivex.internal.functions.ObjectHelper.requireNonNull(ObjectHelper.java:39)\n    at io.reactivex.plugins.RxJavaPlugins.applyRequireNonNull(RxJavaPlugins.java:1317)\n    at io.reactivex.plugins.RxJavaPlugins.initIoScheduler(RxJavaPlugins.java:306)\n    at io.reactivex.schedulers.Schedulers.&lt;clinit&gt;(Schedulers.java:84)\n</code></pre>\n\n<p>Has anyone experienced this problem? </p>\n\n<hr>\n\n<p>The test worked fine when using RxKotlin/RxJava 1 and the following scheduler overrides:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>RxAndroidPlugins.getInstance().registerSchedulersHook(object : RxAndroidSchedulersHook() {\n    override fun getMainThreadScheduler() = Schedulers.immediate()\n})\n\nRxJavaPlugins.getInstance().registerSchedulersHook(object : RxJavaSchedulersHook() {\n    override fun getIOScheduler() = Schedulers.immediate()\n})\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1491572069, "post_id": 43277363, "comment_id": 73626861, "body": "As an alternative to a semicolon, you can replace the lambda <code>{ message }</code> with an <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#anonymous-functions\" rel=\"nofollow noreferrer\">anonymous function</a>: <code>fun() = message</code>."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 6, "last_activity_date": 1491568787, "last_edit_date": 1491568787, "creation_date": 1491565721, "answer_id": 43277363, "question_id": 43277235, "link": "https://stackoverflow.com/questions/43277235/kotlin-unwrapping-function-compiler-error/43277363#43277363", "title": "Kotlin Unwrapping Function Compiler Error", "body": "<p>That's because of the syntax ambiguity:</p>\n\n<pre><code>val message = log()\n{ message }\n</code></pre>\n\n<p>This code gets parsed as if it was <code>val message = log() { message }</code>, that is, <code>log</code> called with the lambda <code>{ message }</code> as its argument. And the statement <code>val message = ...</code> has type <code>Unit</code>, hence the error message.</p>\n\n<p>To resolve it, you can add a semicolon:</p>\n\n<pre><code>val message = log();\n{ message }\n</code></pre>\n"}], "owner": {"reputation": 6636, "user_id": 691639, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e237f683765ca5ad65c9060cf73a0991?s=128&d=identicon&r=PG", "display_name": "Eliezer", "link": "https://stackoverflow.com/users/691639/eliezer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 43277363, "answer_count": 1, "score": 4, "last_activity_date": 1491568787, "creation_date": 1491565269, "question_id": 43277235, "link": "https://stackoverflow.com/questions/43277235/kotlin-unwrapping-function-compiler-error", "title": "Kotlin Unwrapping Function Compiler Error", "body": "<p>Anyone know why the following code doesn't work?</p>\n\n<pre><code>private fun wrapLogIfNeeded(buildMessageOnCurrentThread: Boolean, log: () -&gt; String): () -&gt; String\n  return if(buildMessageOnCurrentThread) {\n    val message = log() // Type mismatch: Required () -&gt; String Found: Unit\n    { message }\n  }\n  else {\n     log\n  }\n}\n</code></pre>\n\n<p>But this does:</p>\n\n<pre><code>private fun wrapLogIfNeeded(buildMessageOnCurrentThread: Boolean, log: () -&gt; String): () -&gt; String\n  return if(buildMessageOnCurrentThread) {\n    val message = lazy { log() }.value\n    { message }\n  }\n  else {\n     log\n  }\n}\n</code></pre>\n"}, {"tags": ["function", "kotlin", "return-type"], "comments": [{"owner": {"reputation": 1348, "user_id": 4810277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aa0352e7d563eb9abf43178af56c376?s=128&d=identicon&r=PG&f=1", "display_name": "X3Btel", "link": "https://stackoverflow.com/users/4810277/x3btel"}, "edited": false, "score": 2, "creation_date": 1491558672, "post_id": 43274736, "comment_id": 73617964, "body": "databaseReference is a Query - you are not deciding anything- its just databaseReference can be cast to Query which you do in the first call"}], "answers": [{"tags": [], "owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "is_accepted": false, "score": 0, "last_activity_date": 1491565368, "last_edit_date": 1491565368, "creation_date": 1491562800, "answer_id": 43276478, "question_id": 43274736, "link": "https://stackoverflow.com/questions/43274736/can-i-have-different-return-type-in-kotlin/43276478#43276478", "title": "Can i have different return type in kotlin?", "body": "<p>You can kind of fake it. In java it's already feasible to write a method like this:</p>\n\n<pre><code>public &lt;T&gt; T foo(Class&lt;T&gt; clazz) { /* Do stuff */ }\n</code></pre>\n\n<p>That returns different things based on the class you pass in.</p>\n\n<p>You'll likely still want to have something like that to do the heavy lifting, but you can make the interface to it a bit nicer:</p>\n\n<pre><code>interface Interface {}\nclass Clazz() : Interface {}\nclass Clbzz() : Interface {}\nfun &lt;T: Interface&gt; foo(clazz: KClass&lt;T&gt;) : T { /* return a T */ }\ninline fun &lt;reified T: Interface&gt; foo() : T { return foo(T::class) }\n\nval a =  foo&lt;Clazz&gt;()\nval b : Clbzz = foo()\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 2968494, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1556725772/picture?type=large", "display_name": "N&#233;odigi", "link": "https://stackoverflow.com/users/2968494/n%c3%a9odigi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 922, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491570191, "creation_date": 1491557874, "last_edit_date": 1491570191, "question_id": 43274736, "link": "https://stackoverflow.com/questions/43274736/can-i-have-different-return-type-in-kotlin", "title": "Can i have different return type in kotlin?", "body": "<p>For example let's say I call a function like this:</p>\n\n<pre><code>val call1: String = myFunction()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>val call2: Int = myFunction()\n</code></pre>\n\n<p>How can I let my function decide what to return in fonction of the call and not the function itself ? What should be the return type ? Any ? Unit ?  ?</p>\n\n<p>I don't know if it's clear so here the example on what I'm working on:</p>\n\n<p>I have this line:</p>\n\n<pre><code>var query: Query = FirebaseDatabase.getInstance().reference.child(path)\n</code></pre>\n\n<p>Here we will get a Query but if I do that:</p>\n\n<pre><code>var query = FirebaseDatabase.getInstance().reference.child(path)\n</code></pre>\n\n<p>I'll get a databaseReference</p>\n\n<p>So i'm trying to get either a query or a databaseReference according to the call of the function and not the function.</p>\n"}, {"tags": ["null", "kotlin", "kotlin-null-safety"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 3, "creation_date": 1491553164, "post_id": 43273031, "comment_id": 73614191, "body": "Android Studio gives you the reason as <i>&quot;&#39;post&#39; is a mutable property that could&#39;ve been changed by this time&quot;</i>. One possible alternative, depending on how you intend to use <code>title</code>, would be <code>post?.apply { title }</code>"}, {"owner": {"reputation": 3428, "user_id": 2235939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c86ce57f70ff675f41bf0ec257127fe?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Jurczuk", "link": "https://stackoverflow.com/users/2235939/micha%c5%82-jurczuk"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1491553627, "post_id": 43273031, "comment_id": 73614467, "body": "what if I need the alternative condition like <code>else</code> ?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1491553983, "post_id": 43273031, "comment_id": 73614688, "body": "Could you please post a complete example of what you want to achieve?"}], "answers": [{"comments": [{"owner": {"reputation": 3428, "user_id": 2235939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c86ce57f70ff675f41bf0ec257127fe?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Jurczuk", "link": "https://stackoverflow.com/users/2235939/micha%c5%82-jurczuk"}, "edited": false, "score": 0, "creation_date": 1491554343, "post_id": 43273487, "comment_id": 73614918, "body": "I simplified a little bit all code I have a few other properties"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "reply_to_user": {"reputation": 3428, "user_id": 2235939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c86ce57f70ff675f41bf0ec257127fe?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Jurczuk", "link": "https://stackoverflow.com/users/2235939/micha%c5%82-jurczuk"}, "edited": false, "score": 0, "creation_date": 1491554463, "post_id": 43273487, "comment_id": 73614998, "body": "Well, it would still be one line per property. <code>postDetailsTitle.propertyX = post?.propertyX ?: defaultX</code>"}, {"owner": {"reputation": 3428, "user_id": 2235939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c86ce57f70ff675f41bf0ec257127fe?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Jurczuk", "link": "https://stackoverflow.com/users/2235939/micha%c5%82-jurczuk"}, "edited": false, "score": 0, "creation_date": 1491554678, "post_id": 43273487, "comment_id": 73615126, "body": "I don&#39;t want to copy full class, I added a few lines more"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "reply_to_user": {"reputation": 3428, "user_id": 2235939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c86ce57f70ff675f41bf0ec257127fe?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Jurczuk", "link": "https://stackoverflow.com/users/2235939/micha%c5%82-jurczuk"}, "edited": false, "score": 0, "creation_date": 1491555516, "post_id": 43273487, "comment_id": 73615674, "body": "Ok, you&#39;ve added some new things that weren&#39;t apparent from the start. I suppose you could create a local <code>val</code>/<code>var</code> and use that instead of <code>post</code>. Or you could wrap the whole if-else in <code>apply</code> like JB Nizet suggested."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "is_accepted": false, "score": 3, "last_activity_date": 1491554277, "creation_date": 1491554277, "answer_id": 43273487, "question_id": 43273031, "link": "https://stackoverflow.com/questions/43273031/kotlin-null-safety-for-class-properties/43273487#43273487", "title": "Kotlin null-safety for class properties", "body": "<p>This:</p>\n\n<pre><code>if (post != null) {\n    postDetailsTitle.text = post.title    // Error I have to still force using post!!.title\n} else {\n    postDetailsTitle.text = \"No title\"\n}\n</code></pre>\n\n<p>Could be replaced with:</p>\n\n<pre><code>postDetailsTitle.text = post?.title ?: \"No title\"\n</code></pre>\n\n<blockquote>\n  <p>If the expression to the left of ?: is not null, the elvis operator returns it, otherwise it returns the expression to the right.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1491573516, "post_id": 43273676, "comment_id": 73627994, "body": "This seems the most straight-forward solution for a single property. <code>let</code> could also be used. See also <a href=\"https://discuss.kotlinlang.org/t/kotlin-null-check-for-multiple-nullable-vars/1946/13?u=mfulton26\" rel=\"nofollow noreferrer\">here</a> for some alternatives which are especially useful when you have multiple properties."}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 5, "last_activity_date": 1491554838, "creation_date": 1491554838, "answer_id": 43273676, "question_id": 43273031, "link": "https://stackoverflow.com/questions/43273031/kotlin-null-safety-for-class-properties/43273676#43273676", "title": "Kotlin null-safety for class properties", "body": "<p>You can use apply:</p>\n\n<pre><code>fun test() {\n    post.apply {\n        if (this != null) {\n            postDetailsTitle.text = title\n        } else {\n            postDetailsTitle.text = \"No title\"\n        }\n    }\n}\n</code></pre>\n\n<p>or with:</p>\n\n<pre><code>fun test() {\n    with(post) {\n        if (this != null) {\n            postDetailsTitle.text = title\n        } else {\n            postDetailsTitle.text = \"No title\"\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3428, "user_id": 2235939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c86ce57f70ff675f41bf0ec257127fe?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Jurczuk", "link": "https://stackoverflow.com/users/2235939/micha%c5%82-jurczuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 43273676, "answer_count": 2, "score": 4, "last_activity_date": 1502553371, "creation_date": 1491552783, "last_edit_date": 1502553371, "question_id": 43273031, "link": "https://stackoverflow.com/questions/43273031/kotlin-null-safety-for-class-properties", "title": "Kotlin null-safety for class properties", "body": "<p>How can I avoid using <code>!!</code> for optional properties of class</p>\n\n<pre><code>class PostDetailsActivity {\n\n    private var post: Post? = null\n\n    fun test() {\n        if (post != null) {\n            postDetailsTitle.text = post.title    // Error I have to still force using post!!.title\n            postDetailsTitle.author = post.author\n\n            Glide.with(this).load(post.featuredImage).into(postDetailsImage)\n\n        } else {\n            postDetailsTitle.text = \"No title\"\n            postDetailsTitle.author = \"Unknown author\"\n\n            Toast.makeText(this, resources.getText(R.string.post_error), Toast.LENGTH_LONG).show()\n        }\n    }\n}\n</code></pre>\n\n<p>Should I create a local variable? I think using <code>!!</code> is not a good practice</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 12971, "user_id": 1965099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DC875.jpg?s=128&g=1", "display_name": "Martin Cazares", "link": "https://stackoverflow.com/users/1965099/martin-cazares"}, "edited": false, "score": 0, "creation_date": 1491527871, "post_id": 43268109, "comment_id": 73604965, "body": "that was it! Thanks... seems like Android Studio doesn&#39;t include the right kotlin dependencies."}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 6, "last_activity_date": 1491527419, "creation_date": 1491527419, "answer_id": 43268109, "question_id": 43267952, "link": "https://stackoverflow.com/questions/43267952/kotlin-constructor-crash/43268109#43268109", "title": "Kotlin Constructor Crash", "body": "<p>By defining it as <code>pref: String</code> instead of <code>pref: String?</code> Kotlin generates a null check in the constructor which is implemented in the <code>Intrinsics</code> class of the kotlin standard library.</p>\n\n<p>The error is most likely because whatever is building the program is failing to include the <code>kotlin-stdlib</code> library. This means the required classes cannot be found.</p>\n"}], "owner": {"reputation": 12971, "user_id": 1965099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/DC875.jpg?s=128&g=1", "display_name": "Martin Cazares", "link": "https://stackoverflow.com/users/1965099/martin-cazares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "accepted_answer_id": 43268109, "answer_count": 1, "score": 0, "last_activity_date": 1491527419, "creation_date": 1491526147, "question_id": 43267952, "link": "https://stackoverflow.com/questions/43267952/kotlin-constructor-crash", "title": "Kotlin Constructor Crash", "body": "<p>In every single tutorial about inheritance for kotlin I've seen an example like this:</p>\n\n<pre><code>class SubClass(pref : String)  {\n    fun theSubClassMethod() : String {\n        return \"The subclass method\"\n    }\n}\n</code></pre>\n\n<p>However, if I use it as such, for some reason I get this exception:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: Failed resolution of: Lkotlin/jvm/internal/Intrinsics;\n                                                       at a.b.c.com.logic.SubClass.&lt;init&gt;(SubClass.kt)\n                                                       at a.b.c.com.kotlinplayground.MainActivity.onCreate(MainActivity.kt:39)\n                                                       at android.app.Activity.performCreate(Activity.java:6374)\n                                                       at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1119)\n                                                       at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2767)\n                                                       at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2879)\n                                                       at android.app.ActivityThread.access$900(ActivityThread.java:182)\n                                                       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1475)\n                                                       at android.os.Handler.dispatchMessage(Handler.java:102)\n                                                       at android.os.Looper.loop(Looper.java:145)\n                                                       at android.app.ActivityThread.main(ActivityThread.java:6141)\n                                                       at java.lang.reflect.Method.invoke(Native Method)\n                                                       at java.lang.reflect.Method.invoke(Method.java:372)\n                                                       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1399)\n                                                       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1194)\n                                                    Caused by: java.lang.ClassNotFoundException: Didn't find class \"kotlin.jvm.internal.Intrinsics\" on path: DexPathList[[zip file \"/data/app/a.b.c.com.kotlinplayground-1/base.apk\"],nativeLibraryDirectories=[/vendor/lib64, /system/lib64]]\n                                                       at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)\n                                                       at java.lang.ClassLoader.loadClass(ClassLoader.java:511)\n                                                       at java.lang.ClassLoader.loadClass(ClassLoader.java:469)\n                                                       at a.b.c.com.logic.SubClass.&lt;init&gt;(SubClass.kt)\u00a0\n                                                       at a.b.c.com.kotlinplayground.MainActivity.onCreate(MainActivity.kt:39)\u00a0\n                                                       at android.app.Activity.performCreate(Activity.java:6374)\u00a0\n                                                       at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1119)\u00a0\n                                                       at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2767)\u00a0\n                                                       at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2879)\u00a0\n                                                       at android.app.ActivityThread.access$900(ActivityThread.java:182)\u00a0\n                                                       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1475)\u00a0\n                                                       at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n                                                       at android.os.Looper.loop(Looper.java:145)\u00a0\n                                                       at android.app.ActivityThread.main(ActivityThread.java:6141)\u00a0\n                                                       at java.lang.reflect.Method.invoke(Native Method)\u00a0\n                                                       at java.lang.reflect.Method.invoke(Method.java:372)\u00a0\n                                                       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1399)\u00a0\n                                                       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1194)\u00a0\n                                                    Suppressed: java.lang.ClassNotFoundException: kotlin.jvm.internal.Intrinsics\n                                                       at java.lang.Class.classForName(Native Method)\n                                                       at java.lang.BootClassLoader.findClass(ClassLoader.java:781)\n                                                       at java.lang.BootClassLoader.loadClass(ClassLoader.java:841)\n                                                       at java.lang.ClassLoader.loadClass(ClassLoader.java:504)\n                                                            ... 16 more\n                                                    Caused by: java.lang.NoClassDefFoundError: Class not found using the boot class loader; no stack available\n</code></pre>\n\n<p>The only way I can get it to work is if I do this:</p>\n\n<pre><code>class SubClass(pref : String?)  {\n    fun theSubClassMethod() : String {\n        return \"The subclass method\"\n    }\n}\n</code></pre>\n\n<p>Notice the \"?\" question mark in the parameter, without it I can't get the code to work, but the question is why? why doesn't it work without it and how come every tutorial shows the parameter without the question mark and they don't mention anything about it... am I missing something?</p>\n\n<p>This is the way I use it:</p>\n\n<pre><code>val subClass = SubClass(\"ZZZ\")\n</code></pre>\n\n<p><strong>Note:</strong> If the parameter in the constructor is an Int/Boolean, etc it works fine seems to happen only with objects.</p>\n"}, {"tags": ["java", "android", "kotlin", "noclassdeffounderror", "classnotfoundexception"], "comments": [{"owner": {"reputation": 1184, "user_id": 6275756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4a6d2e911e7a47db549e946fef4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Vyacheslav Gerasimov", "link": "https://stackoverflow.com/users/6275756/vyacheslav-gerasimov"}, "edited": false, "score": 0, "creation_date": 1491586409, "post_id": 43264981, "comment_id": 73636263, "body": "Could you post the output from &quot;Tools -&gt; Kotlin -&gt; Show Kotlin Bytecode&quot; for problem activity?"}, {"owner": {"reputation": 975, "user_id": 6761823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UypSX.jpg?s=128&g=1", "display_name": "Andrzej Zabost", "link": "https://stackoverflow.com/users/6761823/andrzej-zabost"}, "reply_to_user": {"reputation": 1184, "user_id": 6275756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4a6d2e911e7a47db549e946fef4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Vyacheslav Gerasimov", "link": "https://stackoverflow.com/users/6275756/vyacheslav-gerasimov"}, "edited": false, "score": 0, "creation_date": 1491592023, "post_id": 43264981, "comment_id": 73638971, "body": "@VyacheslavGerasimov Please see the update. I&#39;ve posted the <code>getDataFor</code> bytecode. Let me know if you need more as I didn&#39;t want to spend the whole day obfuscating all 2.5k lines of bytecode :)"}, {"owner": {"reputation": 1184, "user_id": 6275756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4a6d2e911e7a47db549e946fef4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Vyacheslav Gerasimov", "link": "https://stackoverflow.com/users/6275756/vyacheslav-gerasimov"}, "edited": false, "score": 0, "creation_date": 1491596388, "post_id": 43264981, "comment_id": 73641135, "body": "Is there any class in bytecode with name <code>com&#47;project&#47;package&#47;SomeActivityKt$sam$Action1$22181393</code> ? I guess it should be generated for lambda you passing to subscribe method. My theory, it may be generated with a wrong name."}, {"owner": {"reputation": 1184, "user_id": 6275756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4a6d2e911e7a47db549e946fef4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Vyacheslav Gerasimov", "link": "https://stackoverflow.com/users/6275756/vyacheslav-gerasimov"}, "edited": false, "score": 0, "creation_date": 1491596898, "post_id": 43264981, "comment_id": 73641350, "body": "And if it is present with the correct name, try to reinstall android SDK, if you haven&#39;t already. Maybe there is a problem in build tools."}, {"owner": {"reputation": 975, "user_id": 6761823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UypSX.jpg?s=128&g=1", "display_name": "Andrzej Zabost", "link": "https://stackoverflow.com/users/6761823/andrzej-zabost"}, "reply_to_user": {"reputation": 1184, "user_id": 6275756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4a6d2e911e7a47db549e946fef4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Vyacheslav Gerasimov", "link": "https://stackoverflow.com/users/6275756/vyacheslav-gerasimov"}, "edited": false, "score": 0, "creation_date": 1491603085, "post_id": 43264981, "comment_id": 73643725, "body": "@VyacheslavGerasimov There&#39;s no such class. I was looking for anything containing the <code>22181393</code>, <code>SomeActivityKt</code> or <code>sam</code> and the only two places are within the fragment I&#39;ve posted here. And that&#39;s really weird as I can see a similar class generated for the code in <code>AnotherActivity.kt</code> <code>getData</code>: <code>final class com&#47;project&#47;package&#47;AnotherActivityKt$sam$Action1$1c16c27d implements rx&#47;functions&#47;Action1</code>. So I suppose it just wasn&#39;t generated for <code>SomeActivity</code> at all. With this information, do you think reinstalling SDK could help?"}, {"owner": {"reputation": 975, "user_id": 6761823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UypSX.jpg?s=128&g=1", "display_name": "Andrzej Zabost", "link": "https://stackoverflow.com/users/6761823/andrzej-zabost"}, "reply_to_user": {"reputation": 1184, "user_id": 6275756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4a6d2e911e7a47db549e946fef4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Vyacheslav Gerasimov", "link": "https://stackoverflow.com/users/6275756/vyacheslav-gerasimov"}, "edited": false, "score": 0, "creation_date": 1491677145, "post_id": 43264981, "comment_id": 73663494, "body": "@VyacheslavGerasimov I&#39;ve just uninstalled Android Studio and deleted the Android SDK and reinstalled them, but it didn&#39;t help - the problem still occurs and the bytecode looks the same."}, {"owner": {"reputation": 1184, "user_id": 6275756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4a6d2e911e7a47db549e946fef4dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Vyacheslav Gerasimov", "link": "https://stackoverflow.com/users/6275756/vyacheslav-gerasimov"}, "edited": false, "score": 0, "creation_date": 1491765550, "post_id": 43264981, "comment_id": 73686548, "body": "Seems like a bug in Kotlin compiler, report it if you find a way to reproduce. <a href=\"http://kotl.in/issue\" rel=\"nofollow noreferrer\">kotl.in/issue</a>"}], "answers": [{"comments": [{"owner": {"reputation": 975, "user_id": 6761823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UypSX.jpg?s=128&g=1", "display_name": "Andrzej Zabost", "link": "https://stackoverflow.com/users/6761823/andrzej-zabost"}, "edited": false, "score": 0, "creation_date": 1491511789, "post_id": 43265275, "comment_id": 73599541, "body": "I don&#39;t call <code>Multidex.install(this)</code> in <code>onCreate()</code> because my <code>App</code> class inherits this behaviour from the <code>MultiDexApplication</code> class (<code>attachBaseContext</code> is already implemented there). So I&#39;ve only added the override (which is probably redundant). Unfortunately it didn&#39;t help at all. It still crashes in <code>SomeActivity</code> (which is not the first one launched in my app, btw)."}], "tags": [], "owner": {"reputation": 3441, "user_id": 2423274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/e8Vgy.jpg?s=128&g=1", "display_name": "Alejandro Casanova", "link": "https://stackoverflow.com/users/2423274/alejandro-casanova"}, "is_accepted": false, "score": 1, "last_activity_date": 1491510856, "creation_date": 1491510856, "answer_id": 43265275, "question_id": 43264981, "link": "https://stackoverflow.com/questions/43264981/classnotfoundexception-in-android-project-only-on-my-pc/43265275#43265275", "title": "ClassNotFoundException in Android project only on my PC", "body": "<p>I ran into a similar problem few weeks ago. Here is basically what I did to avoid the <code>ClassNotFoundException</code>, in my case was due to the Multidex \"configuration\" after updating Android Studio, gradle, etc.</p>\n\n<ol>\n<li>Add <code>compile 'com.android.support:multidex:1.0.1'</code>to the dependencies list in your app gradle file.</li>\n<li><p>Remove <code>Multidex.install(this);</code> from the <code>onCreate()</code> method of your Application class and add the following in your Application class:</p>\n\n<pre><code>@Override\nprotected void attachBaseContext(Context context) {\n    super.attachBaseContext(context);\n    MultiDex.install(this);\n}\n</code></pre></li>\n</ol>\n\n<p>I got the error after updating the gradle version, etc., so make sure you have everything up to date as well.</p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 975, "user_id": 6761823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UypSX.jpg?s=128&g=1", "display_name": "Andrzej Zabost", "link": "https://stackoverflow.com/users/6761823/andrzej-zabost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1491591905, "creation_date": 1491509778, "last_edit_date": 1491591905, "question_id": 43264981, "link": "https://stackoverflow.com/questions/43264981/classnotfoundexception-in-android-project-only-on-my-pc", "title": "ClassNotFoundException in Android project only on my PC", "body": "<p>Recently, when I was going to finish my work at home on my PC with Windows 8.1, I've found out the project doesn't work properly - it compiles, runs on the emulator and crashes at some specific point (it's 100% reproducible on my PC). </p>\n\n<p>However, the same repository revision works on a Mac at work and on my colleagues Windows 10 machine.</p>\n\n<p>Every mentioned environment was using Android Studio 2.3.1, gradle 3.3 and Kotlin 1.1.1 and running the application on the API 25 x86_64 image.</p>\n\n<p>The project is using multidex 1.0.1 library.</p>\n\n<p>The crash happens due to the following exception:</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.project.app, PID: 2533\n    java.lang.NoClassDefFoundError: Failed resolution of: Lcom/project/package/SomeActivityKt$sam$Action1$22181393;\n        at com.project.package.SomeActivity.getDataFor(SomeActivity.kt:164)\n        at com.project.package.SomeActivity.getData(SomeActivity.kt:147)\n        at com.project.package.SomeActivity.onResume(SomeActivity.kt:142)\n        at android.app.Instrumentatcomn.callActivityOnResume(Instrumentatcomn.java:1269)\n        at android.app.Activity.performResume(Activity.java:6783)\n        at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3406)\n        at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3469)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2732)\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\n        at android.os.Handler.dispatchMessage(Handler.java:102)\n        at android.os.Looper.loop(Looper.java:154)\n        at android.app.ActivityThread.main(ActivityThread.java:6119)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n     Caused by: java.lang.ClassNotFoundException: Didn't find class \"com.project.package.SomeActivityKt$sam$Action1$22181393\" on path: DexPathList[[zip file \"/data/app/com.project.app-1/base.apk\", zip file \"/data/app/com.project.app-1/split_lib_dependencies_apk.apk\", zip file \"/data/app/com.project.app-1/split_lib_slice_0_apk.apk\", zip file \"/data/app/com.project.app-1/split_lib_slice_1_apk.apk\", zip file \"/data/app/com.project.app-1/split_lib_slice_2_apk.apk\", zip file \"/data/app/com.project.app-1/split_lib_slice_3_apk.apk\", zip file \"/data/app/com.project.app-1/split_lib_slice_4_apk.apk\", zip file \"/data/app/com.project.app-1/split_lib_slice_5_apk.apk\", zip file \"/data/app/com.project.app-1/split_lib_slice_6_apk.apk\", zip file \"/data/app/com.project.app-1/split_lib_slice_7_apk.apk\", zip file \"/data/app/com.project.app-1/split_lib_slice_8_apk.apk\", zip file \"/data/app/com.project.app-1/split_lib_slice_9_apk.apk\"],nativeLibraryDirectories=[/data/app/com.project.app-1/lib/x86_64, /data/app/com.project.app-1/base.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_dependencies_apk.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_slice_0_apk.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_slice_1_apk.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_slice_2_apk.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_slice_3_apk.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_slice_4_apk.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_slice_5_apk.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_slice_6_apk.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_slice_7_apk.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_slice_8_apk.apk!/lib/x86_64, /data/app/com.project.app-1/split_lib_slice_9_apk.apk!/lib/x86_64, /system/lib64, /vendor/lib64]]\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:380)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n        at com.project.package.SomeActivity.getDataFor(SomeActivity.kt:164)\u00a0\n        at com.project.package.SomeActivity.getData(SomeActivity.kt:147)\u00a0\n        at com.project.package.SomeActivity.onResume(SomeActivity.kt:142)\u00a0\n        at android.app.Instrumentatcomn.callActivityOnResume(Instrumentatcomn.java:1269)\u00a0\n        at android.app.Activity.performResume(Activity.java:6783)\u00a0\n        at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3406)\u00a0\n        at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3469)\u00a0\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2732)\u00a0\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1477)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n        at android.os.Looper.loop(Looper.java:154)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:6119)\u00a0\n</code></pre>\n\n<p><em>BaseActivity.kt</em></p>\n\n<pre><code>abstract class BaseActivity : RxAppCompatActivity(), HasErrorHandler (...)\n</code></pre>\n\n<p><em>SomeActivity.kt</em> - <strong>this crashes</strong></p>\n\n<pre><code>class SomeActivity : BaseActivity(), HasFullWindowProgress (...) {\n\n    (...)\n\n    private fun getDataFor(id: String) {\n\n        apiClient.somethingList(id)\n                .map { response -&gt; response.toSomethingList() }\n                .lifecycle(this)\n                .showProgress(this)\n                .observeOnMainThread() // &lt;== line 164\n                .subscribe({\n                    LOG.info(\"Something list fetched ${it.size}\")\n                    adapter.setItems(it)\n\n                }, defaultOnError(\"Fetching something list failed\"))\n    }\n}\n</code></pre>\n\n<p><em>AnotherActivity.kt</em> - uses the same functions as <code>SomeActivity</code> and <strong>does not crash</strong></p>\n\n<pre><code>class AnotherActivity : BaseActivity(), HasFullWindowProgress (...) {\n\n    (...)\n\n    private fun getData() {\n        somethingElse.user?.id?.let { id -&gt;\n\n            apiClient.somethingElseList()\n                    .map { response -&gt; response.toAnotherList(id) }\n                    .lifecycle(this)\n                    .showProgress(this)\n                    .observeOnMainThread()\n                    .subscribe({\n                        onNewSomethingElseList(id, it)\n                    }, defaultOnError(\"Fetching somethingElseList for somethingElse failed\"))\n        }\n\n    }\n}\n</code></pre>\n\n<p><em>ActivityErrorHandlingExtensions.kt</em></p>\n\n<pre><code>fun &lt;T&gt; T.defaultOnError(message: String, vararg args: Any?): (Throwable) -&gt; Unit where T : HasErrorHandler, T : Activity {\n    val targetClass = javaClass\n    val activity = this\n    return { err -&gt;\n        val messageFormats = (args.toList() + err).toTypedArray()\n        LoggerFactory.getLogger(targetClass).error(message, *messageFormats)\n        errorHandler.default(err, activity)\n    }\n}\n</code></pre>\n\n<p><em>ObservableExtensions.kt</em></p>\n\n<pre><code>fun &lt;T&gt; Observable&lt;T&gt;.lifecycle(activity: RxAppCompatActivity) : Observable&lt;T&gt; {\n    return compose(activity.bindToLifecycle&lt;T&gt;())\n}\n\nfun &lt;T&gt; Observable&lt;T&gt;.observeOnMainThread() : Observable&lt;T&gt; {\n    return observeOn(AndroidSchedulers.mainThread())\n}\n</code></pre>\n\n<p><em>Progress.kt</em></p>\n\n<pre><code>fun &lt;T&gt; Observable&lt;T&gt;.showProgress(hasProgress: HasFullWindowProgress): Observable&lt;T&gt; {\n    return compose {\n        it.doOnSubscribe {\n            MAIN_THREAD_WORKER.schedule {\n                hasProgress.fullWindowProgress.visibility = View.VISIBLE\n            }\n        }.doAfterTerminate {\n            MAIN_THREAD_WORKER.schedule {\n                hasProgress.fullWindowProgress.visibility = View.GONE\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>All this code was in the project for over a month or two and it was working on my PC two weeks ago.</p>\n\n<p>What I have already tried:</p>\n\n<ul>\n<li><p><code>./gradlew cleanBuildCache</code></p></li>\n<li><p>deleted <code>$HOME/.gradle/caches</code></p></li>\n<li><p>deleted <code>$HOME/.android/build-cache</code></p></li>\n<li><p>deleted <code>$HOME/.AndroidStudio2.3/system/caches</code></p></li>\n<li><p>deleted <code>build</code> and <code>app/build</code> dirs</p></li>\n<li><p>deleted <code>.gradle</code> dir in the projects root directory</p></li>\n<li><p>Android Studio invalidate caches and restart</p></li>\n<li><p>uninstalling the app from the emulator manually and installing it again</p></li>\n<li><p>Reinstalling Android Studio 2.3.1</p></li>\n<li><p>Downgraded Android Studio to 2.3 (that's the version I used 2 weeks ago and I know it worked then)</p></li>\n</ul>\n\n<p>Any ideas what's wrong here?</p>\n\n<hr>\n\n<p>Kotlin bytecode of the <code>getDataFor</code> method:</p>\n\n<pre><code>  private final getDataFor(Ljava/lang/String;)V\n   L0\n    LINENUMBER 160 L0\n   L1\n    LINENUMBER 165 L1\n   L2\n    LINENUMBER 160 L2\n   L3\n    LINENUMBER 164 L3\n   L4\n    LINENUMBER 160 L4\n   L5\n    LINENUMBER 163 L5\n   L6\n    LINENUMBER 160 L6\n   L7\n    LINENUMBER 162 L7\n   L8\n    LINENUMBER 160 L8\n   L9\n    LINENUMBER 161 L9\n   L10\n    LINENUMBER 160 L10\n    ALOAD 0\n    GETFIELD com/project/package/SomeActivity.apiClient : Lcom/project/network/ApiClient;\n    DUP\n    IFNONNULL L11\n    LDC \"apiClient\"\n    INVOKESTATIC kotlin/jvm/internal/Intrinsics.throwUninitializedPropertyAccessException (Ljava/lang/String;)V\n   L11\n    ALOAD 1\n    INVOKEVIRTUAL com/project/network/ApiClient.somethingList (Ljava/lang/String;)Lrx/Observable;\n    GETSTATIC com/project/package/SomeActivity$getDataFor$1.INSTANCE : Lcom/project/package/SomeActivity$getDataFor$1;\n    CHECKCAST rx/functions/Func1\n   L12\n    LINENUMBER 161 L12\n    INVOKEVIRTUAL rx/Observable.map (Lrx/functions/Func1;)Lrx/Observable;\n    ALOAD 0\n    CHECKCAST com/trello/rxlifecycle/components/support/RxAppCompatActivity\n   L13\n    LINENUMBER 162 L13\n    INVOKESTATIC com/project/extensions/ObservableExtensionsKt.lifecycle (Lrx/Observable;Lcom/trello/rxlifecycle/components/support/RxAppCompatActivity;)Lrx/Observable;\n    ALOAD 0\n    CHECKCAST com/project/widgets/HasFullWindowProgress\n   L14\n    LINENUMBER 163 L14\n    INVOKESTATIC com/project/widgets/ProgressKt.showProgress (Lrx/Observable;Lcom/project/widgets/HasFullWindowProgress;)Lrx/Observable;\n   L15\n    LINENUMBER 164 L15\n    INVOKESTATIC com/project/extensions/ObservableExtensionsKt.observeOnMainThread (Lrx/Observable;)Lrx/Observable;\n    NEW com/project/package/SomeActivity$getDataFor$2\n    DUP\n    ALOAD 0\n    INVOKESPECIAL com/project/package/SomeActivity$getDataFor$2.&lt;init&gt; (Lcom/project/package/SomeActivity;)V\n    CHECKCAST rx/functions/Action1\n    NEW com/project/package/SomeActivityKt$sam$Action1$22181393\n    DUP\n    ALOAD 0\n    LDC \"Fetching something list failed\"\n    ICONST_0\n    ANEWARRAY java/lang/Object\n    INVOKESTATIC com/project/extensions/ActivityErrorHandlingExtensionsKt.defaultOnError (Landroid/app/Activity;Ljava/lang/String;[Ljava/lang/Object;)Lkotlin/jvm/functions/Function1;\n    DUP\n    IFNONNULL L16\n    POP\n    POP2\n    ACONST_NULL\n    GOTO L17\n   L16\n    INVOKESPECIAL com/project/package/SomeActivityKt$sam$Action1$22181393.&lt;init&gt; (Lkotlin/jvm/functions/Function1;)V\n   L17\n    CHECKCAST rx/functions/Action1\n   L18\n    LINENUMBER 165 L18\n    INVOKEVIRTUAL rx/Observable.subscribe (Lrx/functions/Action1;Lrx/functions/Action1;)Lrx/Subscription;\n    POP\n   L19\n    LINENUMBER 170 L19\n    RETURN\n   L20\n    LOCALVARIABLE this Lcom/project/package/SomeActivity; L0 L20 0\n    LOCALVARIABLE id Ljava/lang/String; L0 L20 1\n    MAXSTACK = 7\n    MAXLOCALS = 2\n</code></pre>\n"}, {"tags": ["java", "android", "data-binding", "kotlin", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 7061, "user_id": 4727432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca061f55238f6dba1e1815db6a48b1f6?s=128&d=identicon&r=PG", "display_name": "hluhovskyi", "link": "https://stackoverflow.com/users/4727432/hluhovskyi"}, "edited": false, "score": 1, "creation_date": 1491483713, "post_id": 43255829, "comment_id": 73580565, "body": "Yes, i&#39;ve tried this but also stucked with <code>@InlineOnly</code>. As I understand there is only one solution - define this methods in some helper object with <code>@JvmStatic</code>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 7061, "user_id": 4727432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca061f55238f6dba1e1815db6a48b1f6?s=128&d=identicon&r=PG", "display_name": "hluhovskyi", "link": "https://stackoverflow.com/users/4727432/hluhovskyi"}, "edited": false, "score": 1, "creation_date": 1491545874, "post_id": 43255829, "comment_id": 73610141, "body": "@Google <code>@JvmStatic</code> is not necessary, you&#39;ll be able to call the method anyway. The recommended way is to use a file-level function thou, not an object method."}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 2, "last_activity_date": 1491483260, "creation_date": 1491483260, "answer_id": 43255829, "question_id": 43255482, "link": "https://stackoverflow.com/questions/43255482/kotlin-stdlib-and-databinding/43255829#43255829", "title": "Kotlin stdlib and Databinding", "body": "<p>\"kotlin's String\" does not exist. Kotlin's standard library defines extension methods to create the method you're referring to. But since the data-binding library needs to generate Java code it cannot find the method you're referring to.</p>\n\n<p>In order to use that method you will need to call it using the way Java would call it, which is as a static function:</p>\n\n<p><code>kotlin.text.StringsKt.isNotEmpty(viewModel.note)</code></p>\n\n<p>EDIT: this method is annotated with <code>@InlineOnly</code>, so this method might not exist outside of Kotlin code.</p>\n"}], "owner": {"reputation": 7061, "user_id": 4727432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca061f55238f6dba1e1815db6a48b1f6?s=128&d=identicon&r=PG", "display_name": "hluhovskyi", "link": "https://stackoverflow.com/users/4727432/hluhovskyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1491547199, "creation_date": 1491482340, "last_edit_date": 1491547199, "question_id": 43255482, "link": "https://stackoverflow.com/questions/43255482/kotlin-stdlib-and-databinding", "title": "Kotlin stdlib and Databinding", "body": "<p>Is it possible to use methods from Kotlin stdlib in xml? For example this code </p>\n\n<pre><code>&lt;TextView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginBottom=\"16dp\"\n    android:textColor=\"#333333\"\n    android:text=\"@{viewModel.note}\"\n    android:visibility=\"@{viewModel.note.isNotEmpty ? View.VISIBLE : View.GONE}\"/&gt;\n</code></pre>\n\n<p>produce compilation error</p>\n\n<blockquote>\n  <p>Execution failed for task ':app:compileDevDebugJavaWithJavac'.\n  java.lang.RuntimeException: Found data binding errors.\n  ****/ data binding error ****msg:cannot find method isNotEmpty() in class java.lang.String\n  file:D:\\Projects\\PushTracker-Android\\app\\src\\main\\res\\layout\\fragment_appointment_simple_details.xml\n  loc:104:44 - 104:70\n  ****\\ data binding error ****</p>\n</blockquote>\n\n<p>It is obvious that databinding tries to find method <code>isNotEmpty()</code> in Java's String but can I force databinding compiler to use kotlin's String?</p>\n"}, {"tags": ["parameters", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 280, "user_id": 2272467, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9915fe43c15b8fb211ce4cc9008c1b22?s=128&d=identicon&r=PG&f=1", "display_name": "John Park", "link": "https://stackoverflow.com/users/2272467/john-park"}, "edited": false, "score": 0, "creation_date": 1491454573, "post_id": 43245810, "comment_id": 73561535, "body": "Perfect. Thank you very much."}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 5, "last_activity_date": 1491453463, "creation_date": 1491453463, "answer_id": 43245810, "question_id": 43245747, "link": "https://stackoverflow.com/questions/43245747/pass-listofmapofx-y-z-as-parameter-in-kotlin/43245810#43245810", "title": "Pass listOf(mapOf(x,y,z)) as parameter in Kotlin", "body": "<p>You should declare <code>edges</code> parameter as</p>\n\n<pre><code>edges: List&lt;Map&lt;String, Any&gt;&gt;\n</code></pre>\n\n<p>The first type parameter of the map is type of keys, and the second is type of values in that map.</p>\n\n<p><code>Any</code> as the type of map values is required because you're mixing ints and strings as values.</p>\n"}], "owner": {"reputation": 280, "user_id": 2272467, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9915fe43c15b8fb211ce4cc9008c1b22?s=128&d=identicon&r=PG&f=1", "display_name": "John Park", "link": "https://stackoverflow.com/users/2272467/john-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 43245810, "answer_count": 1, "score": 0, "last_activity_date": 1491453463, "creation_date": 1491453028, "question_id": 43245747, "link": "https://stackoverflow.com/questions/43245747/pass-listofmapofx-y-z-as-parameter-in-kotlin", "title": "Pass listOf(mapOf(x,y,z)) as parameter in Kotlin", "body": "<p>Very new to Kotlin and working on a problem that requires me to take these values as a parameters for a function</p>\n\n<pre><code>(\n    starting = \"begin\",\n    target = \"end\",\n    edges =\n    listOf(\n        mapOf(\"start\" to \"x\", \"end\" to \"y\", \"distance\" to 25)\n    )\n}\n</code></pre>\n\n<p>Ive got the first two fine but the list of maps is confusing me.</p>\n\n<pre><code>a(starting: String, target: String, edges: ListOf(mapOf(x,y,z)){}\n</code></pre>\n\n<p>Thanks</p>\n"}]