[{"tags": ["angularjs", "spring", "kotlin", "spring-web"], "answers": [{"comments": [{"owner": {"reputation": 2171, "user_id": 2716479, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/Au8xt.png?s=128&g=1", "display_name": "Marcos Tanaka", "link": "https://stackoverflow.com/users/2716479/marcos-tanaka"}, "edited": false, "score": 0, "creation_date": 1464878410, "post_id": 37584318, "comment_id": 62674889, "body": "Sorry, it did not work. I don&#39;t think that it&#39;s a Jackson problem, because when I do the post without the file param, the parse works."}], "tags": [], "owner": {"reputation": 3827, "user_id": 743716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Okvki.png?s=128&g=1", "display_name": "Rafal G.", "link": "https://stackoverflow.com/users/743716/rafal-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1464849155, "creation_date": 1464849155, "answer_id": 37584318, "question_id": 37578767, "link": "https://stackoverflow.com/questions/37578767/angular-how-to-post-a-file-to-the-server-on-form-submit/37584318#37584318", "title": "Angular: how to post a file to the server on form submit", "body": "<p>I suppose you are using Jackson, right?</p>\n\n<p>Bytecode of Data Classes in Kotlin looks differently than one of a regular POJO (with default constructor) and so Jackson is unable to initialize such class. Try to add a dependency to <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow\">Jackson Kotlin Module</a> and make sure to register it.</p>\n\n<p>If you use Spring Boot then add following code to any of your @Configuration annotated classes:</p>\n\n<pre><code>@Bean\nopen fun kotlinModule(): KotlinModule {\n    return KotlinModule()\n}\n</code></pre>\n\n<p>and see if it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 2171, "user_id": 2716479, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/Au8xt.png?s=128&g=1", "display_name": "Marcos Tanaka", "link": "https://stackoverflow.com/users/2716479/marcos-tanaka"}, "is_accepted": true, "score": 0, "last_activity_date": 1464878283, "creation_date": 1464878283, "answer_id": 37594953, "question_id": 37578767, "link": "https://stackoverflow.com/questions/37578767/angular-how-to-post-a-file-to-the-server-on-form-submit/37594953#37594953", "title": "Angular: how to post a file to the server on form submit", "body": "<p>I've used this tutorial which encapsulates the file inside the FormData object, and posts that object <a href=\"https://uncorkedstudios.com/blog/multipartformdata-file-upload-with-angularjs\" rel=\"nofollow\">https://uncorkedstudios.com/blog/multipartformdata-file-upload-with-angularjs</a></p>\n\n<pre><code>$scope.insert = function (config) {\n    var fd = new FormData();\n    fd.append('name', config.name);\n    fd.append('address', config.address);\n    fd.append('file', $scope.file);\n    $http.post('/config', fd, {\n            transformRequest: angular.identity,\n            headers: {'Content-Type': undefined}\n        })\n        .then(function (response) {\n            $.snackbar({content: \"Success!\"});\n        }, $scope.showErrorMessage);\n};\n</code></pre>\n\n<p>And on my Kotlin controller, I receive each attribute as a separate param:</p>\n\n<pre><code>@RequestMapping(method = arrayOf(RequestMethod.POST))\nfun insert(@RequestParam(value = \"name\", required = true) name: String,\n           @RequestParam(value = \"address\", required = true) address: String,\n           @RequestParam(value = \"file\", required = false) file: MultipartFile): InsertConfigCommand? {\n\n    val command = InsertConfigCommand(\n                   name = name,\n                   address = address,\n                   file = file)\n\n    return service.save(command)\n}\n</code></pre>\n"}], "owner": {"reputation": 2171, "user_id": 2716479, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/Au8xt.png?s=128&g=1", "display_name": "Marcos Tanaka", "link": "https://stackoverflow.com/users/2716479/marcos-tanaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 37594953, "answer_count": 2, "score": 0, "last_activity_date": 1464878283, "creation_date": 1464815139, "question_id": 37578767, "link": "https://stackoverflow.com/questions/37578767/angular-how-to-post-a-file-to-the-server-on-form-submit", "title": "Angular: how to post a file to the server on form submit", "body": "<p>I have a form that's being posted to my back-end (Kotlin, Spring Web). That form had some text inputs and the post worked flawlessly. But when I added a file input, the post stopped working, returning the following error:</p>\n\n<pre><code>{status: 400, error: \"Bad Request\",\u2026}\nerror: \"Bad Request\"\nexception: \"org.springframework.http.converter.HttpMessageNotReadableException\"\nmessage: \"Could not read document: No suitable constructor found for type [simple type, class com.test.InsertConfigCommand]: can not instantiate from JSON object (missing default constructor or creator, or perhaps need to add/enable type information?)\u21b5 at [Source: java.io.PushbackInputStream@2cb43211; line: 1, column: 2]; nested exception is com.fasterxml.jackson.databind.JsonMappingException: No suitable constructor found for type [simple type, class com.test.InsertConfigCommand]: can not instantiate from JSON object (missing default constructor or creator, or perhaps need to add/enable type information?)\u21b5 at [Source: java.io.PushbackInputStream@2cb43211; line: 1, column: 2]\"\n</code></pre>\n\n<p>Here are the codes of my stack:</p>\n\n<p><strong>View:</strong></p>\n\n<pre><code>&lt;form ng-submit=\"insert(config)\"&gt;\n    &lt;input type=\"text\" ng-model=\"config.name\"&gt;\n    &lt;input type=\"text\" ng-model=\"config.address\"&gt;\n    &lt;input type=\"file\" ng-model=\"config.file\"&gt;\n    &lt;button type=\"submit\"&gt;Save&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>Controller (front-end):</strong></p>\n\n<pre><code>$scope.insert = function (config) {\n    $http.post('/config', config)\n        .then(function (response) {\n            $.snackbar({content: \"Success!\"});\n        }, $scope.showErrorMessage);\n};\n</code></pre>\n\n<p><strong>Controller (back-end):</strong></p>\n\n<pre><code>@RequestMapping(method = arrayOf(RequestMethod.POST))\nfun insert(@RequestBody config: InsertConfigCommand) = service.save(config)\n</code></pre>\n\n<p><strong>InsertConfigCommand</strong></p>\n\n<pre><code>data class InsertConfigCommand (\n    val name : String = \"\",\n    val address : String = \"\",\n    val file : MultipartFile\n)\n</code></pre>\n\n<p>I've tried to do the post the following way, it works, but only sends the file:</p>\n\n<p><strong>Controller (front-end):</strong></p>\n\n<pre><code>$scope.insert = function (file) {\n    var fd = new FormData();\n    fd.append('file', file);\n\n    return $http.post('/config', fd, {\n        transformRequest: angular.identity,\n        headers: {\n            'Content-Type': undefined\n        }\n    });\n};\n</code></pre>\n\n<p><strong>Controller (back-end):</strong></p>\n\n<pre><code>@RequestMapping(method = arrayOf(RequestMethod.POST))\nfun insert(@RequestParam(value = \"file\", required = true) file: MultipartFile) = service.save(file)\n</code></pre>\n\n<p>What do I need to change for this post to work? I want to send the input file <strong>on the same object</strong> that the name and address.</p>\n"}, {"tags": ["java-7", "htmlunit", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1464972695, "post_id": 37577674, "comment_id": 62721893, "body": "You don&#39;t indicate how you compile, and what JDK you are using to compile.  And are you compiling in an IDE (which?), or build system (which?)?"}], "answers": [{"comments": [{"owner": {"reputation": 6221, "user_id": 259288, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c018a1f0997014d4d8332b17bc392ef2?s=128&d=identicon&r=PG", "display_name": "Johnny", "link": "https://stackoverflow.com/users/259288/johnny"}, "edited": false, "score": 0, "creation_date": 1464855675, "post_id": 37583120, "comment_id": 62658207, "body": "Yeah, I have that in my maven as <code>&lt;dependency&gt;             &lt;groupId&gt;net.sourceforge.htmlunit&lt;&#47;groupId&gt;             &lt;artifactId&gt;htmlunit&lt;&#47;artifactId&gt;             &lt;version&gt;2.22&lt;&#47;version&gt;         &lt;&#47;dependency&gt;</code>"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 6221, "user_id": 259288, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c018a1f0997014d4d8332b17bc392ef2?s=128&d=identicon&r=PG", "display_name": "Johnny", "link": "https://stackoverflow.com/users/259288/johnny"}, "edited": false, "score": 0, "creation_date": 1464856828, "post_id": 37583120, "comment_id": 62658962, "body": "@Johnny take a look at your <a href=\"http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html\" rel=\"nofollow noreferrer\"><code>dependency:tree</code></a>"}, {"owner": {"reputation": 6221, "user_id": 259288, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c018a1f0997014d4d8332b17bc392ef2?s=128&d=identicon&r=PG", "display_name": "Johnny", "link": "https://stackoverflow.com/users/259288/johnny"}, "edited": false, "score": 0, "creation_date": 1464857191, "post_id": 37583120, "comment_id": 62659200, "body": "Fixed by adding <code>&lt;dependency&gt;             &lt;groupId&gt;xml-apis&lt;&#47;groupId&gt;             &lt;artifactId&gt;xml-apis&lt;&#47;artifactId&gt;             &lt;version&gt;1.4.01&lt;&#47;version&gt;         &lt;&#47;dependency&gt;</code>, which is strange as it&#39;s a dependency of HtmlUnit."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 0, "last_activity_date": 1464844229, "creation_date": 1464844229, "answer_id": 37583120, "question_id": 37577674, "link": "https://stackoverflow.com/questions/37577674/how-to-include-htmlunit-in-a-kotlin-project/37583120#37583120", "title": "How to include HtmlUnit in a Kotlin project", "body": "<p>The <code>org.w3c.dom.ElementTraversal</code> is part of <a href=\"http://mvnrepository.com/artifact/xml-apis/xml-apis\" rel=\"nofollow\"><code>xml-apis</code></a> which is a dependency of <a href=\"http://mvnrepository.com/artifact/xerces/xercesImpl\" rel=\"nofollow\"><code>xerces:xercesImpl</code></a>. The <code>xerces:xercesImpl</code> is in turn a dependency of <a href=\"http://mvnrepository.com/artifact/net.sourceforge.htmlunit/htmlunit\" rel=\"nofollow\"><code>htmlunit</code></a>.</p>\n\n<p>Make sure to add the transitive dependencies of <a href=\"http://mvnrepository.com/artifact/net.sourceforge.htmlunit/htmlunit\" rel=\"nofollow\"><code>htmlunit</code></a> to your project. </p>\n\n<p>With gradle all that is needed is:</p>\n\n<pre><code>compile 'net.sourceforge.htmlunit:htmlunit:2.22'\n</code></pre>\n"}], "owner": {"reputation": 6221, "user_id": 259288, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c018a1f0997014d4d8332b17bc392ef2?s=128&d=identicon&r=PG", "display_name": "Johnny", "link": "https://stackoverflow.com/users/259288/johnny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 37583120, "answer_count": 1, "score": 0, "last_activity_date": 1464990969, "creation_date": 1464810953, "last_edit_date": 1464990969, "question_id": 37577674, "link": "https://stackoverflow.com/questions/37577674/how-to-include-htmlunit-in-a-kotlin-project", "title": "How to include HtmlUnit in a Kotlin project", "body": "<p>I'm trying to use <a href=\"http://htmlunit.sourceforge.net/\" rel=\"nofollow\">HtmlUnit</a> in a Kotlin project but I get the following error when I compile:</p>\n\n<pre><code>Error:Kotlin: Supertypes of the following classes cannot be resolved. Please make sure you have the required dependencies in the classpath:\n    class com.gargoylesoftware.htmlunit.html.DomElement, unresolved supertypes: ElementTraversal\n</code></pre>\n\n<p>This is because <a href=\"http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/ElementTraversal.html?is-external=true\" rel=\"nofollow\">ElementTraversal</a> is a java 7 feature. How can I solve this?</p>\n"}, {"tags": ["android", "asynchronous", "kotlin", "anko"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1464793194, "post_id": 37570927, "comment_id": 62631888, "body": "Perhaps there&#39;s a better way, but you can <a href=\"https://github.com/Kotlin/anko/blob/master/doc/ADVANCED.md#asynchronous-tasks\" rel=\"nofollow noreferrer\">specify an <code>ExecutorService</code> for <code>async</code></a>, and <code>ExecutorService</code> has an <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination(long,%20java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\"><code>awaitTermination</code> method</a>."}, {"owner": {"reputation": 1839, "user_id": 882912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0ee650f3ddaf676349ef9de068ad52?s=128&d=identicon&r=PG", "display_name": "KTCO", "link": "https://stackoverflow.com/users/882912/ktco"}, "edited": false, "score": 1, "creation_date": 1492567248, "post_id": 37570927, "comment_id": 74025629, "body": "With Kotlin 1.1.1, you can <code>await</code> one or more jobs, see <a href=\"http://stackoverflow.com/a/43151714/882912\">stackoverflow.com/a/43151714/882912</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2975, "user_id": 5790273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f4a5e1417b3523fbbe7ff4d17fd294b?s=128&d=identicon&r=PG&f=1", "display_name": "Fire095", "link": "https://stackoverflow.com/users/5790273/fire095"}, "is_accepted": true, "score": 2, "last_activity_date": 1464870271, "last_edit_date": 1464870271, "creation_date": 1464795800, "answer_id": 37573254, "question_id": 37570927, "link": "https://stackoverflow.com/questions/37570927/kotlin-anko-multiple-async-tasks/37573254#37573254", "title": "Kotlin/anko multiple async tasks", "body": "<p>Based on input from <a href=\"https://stackoverflow.com/questions/37570927/kotlin-anko-multiple-async-tasks#comment62631888_37570927\">Michael</a> and <a href=\"https://stackoverflow.com/a/37586555/5790273\">pdegand59</a>, here's a working solution:</p>\n\n\n\n<pre><code>private fun GetHtml(urlList: Array&lt;String&gt;): ArrayList&lt;String&gt; {\n\n    val pool = Executors.newFixedThreadPool(urlList.count())\n    val countDownLatch = CountDownLatch(urlList.count())\n\n    val output = ArrayList&lt;String&gt;()\n\n    for (url in urlList) {  \n\n        async(pool, {\n            //some java-code that downloads html for &lt;url&gt;\n            output.add(\"html for $url\")\n            countDownLatch.countDown()\n        })      \n    }\n\n    countDownLatch.await()\n\n    return output\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2975, "user_id": 5790273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f4a5e1417b3523fbbe7ff4d17fd294b?s=128&d=identicon&r=PG&f=1", "display_name": "Fire095", "link": "https://stackoverflow.com/users/5790273/fire095"}, "edited": false, "score": 0, "creation_date": 1464866853, "post_id": 37586555, "comment_id": 62665822, "body": "CountDownLatch looks great, but the code you provided does not work, unfortunately. onAllHtmlDownloaded method is never reached because countDownLatch.await() causes the process to wait indefinitely. What I did was create a separate ThreadPool and use countDownLatch.await(), this worked fine."}, {"owner": {"reputation": 11165, "user_id": 2000300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/c8eI2.jpg?s=128&g=1", "display_name": "pdegand59", "link": "https://stackoverflow.com/users/2000300/pdegand59"}, "reply_to_user": {"reputation": 2975, "user_id": 5790273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f4a5e1417b3523fbbe7ff4d17fd294b?s=128&d=identicon&r=PG&f=1", "display_name": "Fire095", "link": "https://stackoverflow.com/users/5790273/fire095"}, "edited": false, "score": 0, "creation_date": 1464867546, "post_id": 37586555, "comment_id": 62666341, "body": "I updated the code with moving the async call with await before the loop and running this async on another Executor."}, {"owner": {"reputation": 2975, "user_id": 5790273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f4a5e1417b3523fbbe7ff4d17fd294b?s=128&d=identicon&r=PG&f=1", "display_name": "Fire095", "link": "https://stackoverflow.com/users/5790273/fire095"}, "edited": false, "score": 0, "creation_date": 1464870239, "post_id": 37586555, "comment_id": 62668248, "body": "Thanks for your input! The problem here is not in the CountDownLatch but rather in async() blocks which download html. Blocking the main thread is not a concern in this scenario, so lets keep it as simple as possible:) I&#39;ve updated my answer and gave you credit"}], "tags": [], "owner": {"reputation": 11165, "user_id": 2000300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/c8eI2.jpg?s=128&g=1", "display_name": "pdegand59", "link": "https://stackoverflow.com/users/2000300/pdegand59"}, "is_accepted": false, "score": 1, "last_activity_date": 1464867598, "last_edit_date": 1464867598, "creation_date": 1464856272, "answer_id": 37586555, "question_id": 37570927, "link": "https://stackoverflow.com/questions/37570927/kotlin-anko-multiple-async-tasks/37586555#37586555", "title": "Kotlin/anko multiple async tasks", "body": "<p>I would suggest to use <a href=\"https://developer.android.com/reference/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow\">CountDownLatch</a> in a separate thread to avoid blocking the main thread during all the parallel downloads : </p>\n\n<pre><code>private fun downloadAllHtml(urlList: Array&lt;String&gt;) {\n  val output = ArrayList&lt;String&gt;()\n  val countDownLatch = CountDownLatch(urlList.length)\n\n  async(Executors.newSingleThreadExecutor() {\n    countDownLatch.await()\n    uiThread {\n      onAllHtmlDownloaded(output)\n    }\n  }\n\n  urlList.forEach { url: String -&gt;\n    async() {\n      // download stuff\n      output.add(\"stuff downloaded\")\n      countDownLatch.countDown()\n    }\n  }\n  // this method ends instantly, not blocking the main thread\n}\n\nprivate fun onAllHtmlDownloaded(output: ArrayList&lt;String&gt;) {\n  // all your html, on the main thread\n}\n</code></pre>\n\n<p>You may have to add some try/catch. The IDE will help you ;)</p>\n"}], "owner": {"reputation": 2975, "user_id": 5790273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f4a5e1417b3523fbbe7ff4d17fd294b?s=128&d=identicon&r=PG&f=1", "display_name": "Fire095", "link": "https://stackoverflow.com/users/5790273/fire095"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2209, "favorite_count": 1, "accepted_answer_id": 37573254, "answer_count": 2, "score": 2, "last_activity_date": 1464870271, "creation_date": 1464789656, "last_edit_date": 1464791190, "question_id": 37570927, "link": "https://stackoverflow.com/questions/37570927/kotlin-anko-multiple-async-tasks", "title": "Kotlin/anko multiple async tasks", "body": "<p>I'm looking for a simple way to start multiple tasks in parallel and wait for all of them to complete.</p>\n\n<p>Consider this c# example:\n</p>\n\n<pre><code>private static void Main(string[] args)\n{\n    var urlList = new[] {\"http://www.microsoft.com/\", \"http://www.google.com/\", \"http://www.apple.com/\" };\n    var result = GetHtml(urlList);\n}\n\nprivate static List&lt;string&gt; GetHtml(string[] urlList)\n{\n    var tasks = new List&lt;Task&gt;();\n    var output = new List&lt;string&gt;();\n\n    foreach (var url in urlList)\n    {\n        var task = new Task(() =&gt;\n        {\n            var html = new WebClient().DownloadString(url);\n            output.Add(html);\n        });\n\n        tasks.Add(task);\n\n        //starts task in a separate thread (doesn't block anything)\n        task.Start();\n    }\n\n    //waits for all tasks (running in parallel) to complete before exiting method\n    Task.WaitAll(tasks.ToArray());\n\n    return output;\n}\n</code></pre>\n\n<p>GetHtml method downloads multiple web-pages in parallel and returns a list of html strings.</p>\n\n<p>How can I achieve this using kotlin/anko?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private fun GetHtml(urlList: Array&lt;String&gt;): ArrayList&lt;String&gt; {\n\n    val tasks = ArrayList&lt;Future&lt;Unit&gt;&gt;()\n    val output = ArrayList&lt;String&gt;()\n\n    for (url in urlList) {\n        val task = async() {\n            //some java-code that downloads html from &lt;url&gt;, doesn't matter for now\n            output.add(\"html for $url\")\n        }\n        tasks.add(task)\n    }\n\n    //this is NOT parallel execution\n    for (task in tasks) {\n        task.get()           \n    }\n\n    //tasks.getall() ?? \n\n    return output\n}\n</code></pre>\n"}, {"tags": ["java", "maven", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 81177, "user_id": 296328, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DSpH6.jpg?s=128&g=1", "display_name": "khmarbaise", "link": "https://stackoverflow.com/users/296328/khmarbaise"}, "edited": false, "score": 0, "creation_date": 1464771617, "post_id": 37559779, "comment_id": 62615418, "body": "Make a multi module build from it and define the appropriate dependencies between them."}], "answers": [{"comments": [{"owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "edited": false, "score": 0, "creation_date": 1464758014, "post_id": 37559854, "comment_id": 62608172, "body": "See my update 1. I need to find a way to use <code>prjB</code> not only in tests, but in the normal code as well. Will you proposal work in this case?"}, {"owner": {"reputation": 4441, "user_id": 1716487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cb7969a127a12e8707cfa9fb95431d58?s=128&d=identicon&r=PG", "display_name": "morpheus05", "link": "https://stackoverflow.com/users/1716487/morpheus05"}, "edited": false, "score": 0, "creation_date": 1464764298, "post_id": 37559854, "comment_id": 62611013, "body": "See the first code snippet of doge, this will set a &#39;normal&#39; dependency."}, {"owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "edited": false, "score": 0, "creation_date": 1464767435, "post_id": 37559854, "comment_id": 62612773, "body": "How is the dependency from your first code snippet different from the dependency on <code>prjB</code> in my <a href=\"https://github.com/dpisarenko/2016_06_01_kotlinMavenProblem/blob/master/prjA/pom.xml\" rel=\"nofollow noreferrer\">example</a> ?"}, {"owner": {"reputation": 706, "user_id": 2894399, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aIfxC.jpg?s=128&g=1", "display_name": "Abylay Sabirgaliyev", "link": "https://stackoverflow.com/users/2894399/abylay-sabirgaliyev"}, "reply_to_user": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "edited": false, "score": 0, "creation_date": 1464769489, "post_id": 37559854, "comment_id": 62614042, "body": "@DmitriPisarenko then it&#39;s problem in the IDE. Check <a href=\"http://stackoverflow.com/questions/11454822/import-maven-dependencies-in-intellij-idea\">this</a>"}], "tags": [], "owner": {"reputation": 706, "user_id": 2894399, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aIfxC.jpg?s=128&g=1", "display_name": "Abylay Sabirgaliyev", "link": "https://stackoverflow.com/users/2894399/abylay-sabirgaliyev"}, "is_accepted": false, "score": 1, "last_activity_date": 1464758949, "last_edit_date": 1495541757, "creation_date": 1464757597, "answer_id": 37559854, "question_id": 37559779, "link": "https://stackoverflow.com/questions/37559779/why-doesnt-intellij-idea-find-maven-dependencies-from-another-kotlin-module/37559854#37559854", "title": "Why doesn&#39;t IntelliJ Idea find Maven dependencies from another Kotlin module?", "body": "<p>If you need regular classes from prjB, add main dependency to prjA.\nIf you need test classes from prjB, add test dependency to prjA.</p>\n\n<p>To add main dependency to another module:</p>\n\n<pre><code>&lt;project&gt;\n  ...\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.your.group&lt;/groupId&gt;\n      &lt;artifactId&gt;prjB&lt;/artifactId&gt;\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n\n<p>To add test dependency to another module:</p>\n\n<pre><code>&lt;project&gt;\n  ...\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.your.group&lt;/groupId&gt;\n      &lt;artifactId&gt;prjB&lt;/artifactId&gt;\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n      &lt;type&gt;test-jar&lt;/type&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/1725476/maven-test-dependency-in-multi-module-project\">Here</a> is an example on test dependency.</p>\n"}], "owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464771339, "creation_date": 1464757204, "last_edit_date": 1464771339, "question_id": 37559779, "link": "https://stackoverflow.com/questions/37559779/why-doesnt-intellij-idea-find-maven-dependencies-from-another-kotlin-module", "title": "Why doesn&#39;t IntelliJ Idea find Maven dependencies from another Kotlin module?", "body": "<p>Imagine I have two Maven-based projects with Kotlin code, <a href=\"https://github.com/dpisarenko/2016_06_01_kotlinMavenProblem/tree/master/prjA\" rel=\"nofollow noreferrer\">prjA</a> and <a href=\"https://github.com/dpisarenko/2016_06_01_kotlinMavenProblem/tree/master/prjB\" rel=\"nofollow noreferrer\">prjB</a>.</p>\n\n<p>Test class <a href=\"https://github.com/dpisarenko/2016_06_01_kotlinMavenProblem/blob/master/prjA/src/test/java/prjA/SomeTest.kt\" rel=\"nofollow noreferrer\">SomeTest</a> in <code>prjA</code> references a <a href=\"https://github.com/dpisarenko/2016_06_01_kotlinMavenProblem/blob/master/prjB/src/main/java/com/mycompany/ValidationResult.kt\" rel=\"nofollow noreferrer\">class</a> and <a href=\"https://github.com/dpisarenko/2016_06_01_kotlinMavenProblem/blob/master/prjB/src/main/java/com/mycompany/utils/Utils.kt\" rel=\"nofollow noreferrer\">function</a> defined in <code>prjB</code>:</p>\n\n<pre><code>class SomeTest {\n    @Test\n    fun prjACanReferencePrjBStuff() {\n        val valRes = ValidationResult()\n        val correctValRes = createCorrectValidationResult()\n    }\n}\n</code></pre>\n\n<p>When I</p>\n\n<ol>\n<li>run <code>mvn clean install</code> in <a href=\"https://github.com/dpisarenko/2016_06_01_kotlinMavenProblem/tree/master/prjB\" rel=\"nofollow noreferrer\">prjB</a>,</li>\n<li>update the dependencies of <code>prjA</code> in IntelliJ Idea and</li>\n<li>run <code>mvn clean install</code> in <a href=\"https://github.com/dpisarenko/2016_06_01_kotlinMavenProblem/tree/master/prjA\" rel=\"nofollow noreferrer\">prjA</a>,</li>\n</ol>\n\n<p>I get errors - Maven can't find the classes defined in <code>prjB</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xtODK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xtODK.png\" alt=\"Error in IntelliJ Idea\"></a></p>\n\n<p>Why? How can I fix it?</p>\n\n<p><strong>Notes:</strong></p>\n\n<ol>\n<li>Kotlin classes are <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"nofollow noreferrer\">publicly visible</a> by default. I don't get any errors during <code>mvn install</code> of <code>prjB</code>. </li>\n<li>The Maven repository contains <code>prjB</code> artifacts and IntelliJ Idea references the right Maven repository. </li>\n<li>When I try to build <code>prjA</code> from the command line, the build succeeds.</li>\n<li>Invalidating IntelliJ Idea cache and rebuilding the project doesn't help.</li>\n</ol>\n\n<p><strong>Update 1:</strong> I need a solution, which allows me to use <code>prjB</code> not only in tests.</p>\n\n<p><strong>Update 2:</strong> Everything works perfectly fine, if I rewrite Kotlin classes in <code>prjB</code> in Java.</p>\n"}, {"tags": ["rx-java", "reactive-programming", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1114, "user_id": 191289, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/43f7e287f8f62f255fc754ad4f9c46ef?s=128&d=identicon&r=PG", "display_name": "ashays", "link": "https://stackoverflow.com/users/191289/ashays"}, "edited": false, "score": 0, "creation_date": 1464762031, "post_id": 37560757, "comment_id": 62609855, "body": "Interesting, thanks!  I&#39;ll give this a try tomorrow, but it definitely appears promising."}, {"owner": {"reputation": 1114, "user_id": 191289, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/43f7e287f8f62f255fc754ad4f9c46ef?s=128&d=identicon&r=PG", "display_name": "ashays", "link": "https://stackoverflow.com/users/191289/ashays"}, "edited": false, "score": 0, "creation_date": 1464811240, "post_id": 37560757, "comment_id": 62642342, "body": "After testing this, it looks like <code>isActive</code> only emits <code>true</code> once (instead of on each buffer), until pause and unpause is called again.  This means that everything continues to buffer, and would be more akin to having a &quot;drain&quot; that only drains whenever I call resume.  It looks like based on what you&#39;re saying, I should have something that has an almost &quot;constant&quot; value being pushed through of &quot;true&quot; or &quot;false&quot; depending on what state it&#39;s in to make this work?"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 1114, "user_id": 191289, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/43f7e287f8f62f255fc754ad4f9c46ef?s=128&d=identicon&r=PG", "display_name": "ashays", "link": "https://stackoverflow.com/users/191289/ashays"}, "edited": false, "score": 0, "creation_date": 1464843008, "post_id": 37560757, "comment_id": 62652122, "body": "@ashays See the updated version, I missed adding the modified <code>trackEvent</code> method."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 1, "last_activity_date": 1464843017, "last_edit_date": 1464843017, "creation_date": 1464761618, "answer_id": 37560757, "question_id": 37557352, "link": "https://stackoverflow.com/questions/37557352/how-can-i-pause-an-event-from-flowing-through-an-observable/37560757#37560757", "title": "How can I pause an event from flowing through an observable?", "body": "<p>The trick is to use another <a href=\"http://reactivex.io/RxJava/javadoc/rx/subjects/BehaviorSubject.html\" rel=\"nofollow\"><code>BehaviorSubject</code></a> as a closing event for additional buffering:</p>\n\n<pre><code>val publisher = PublishSubject.create&lt;Event&gt;()\nfun trackEvent(e: Event) {\n    publisher.onNext(e)\n    isPaused.onNext(isPaused.value)\n}\n\nval isActive = BehaviorSubject.create(true)\nfun pause() {\n    isActive.onNext(false)\n}\nfun resume() {\n    isActive.onNext(true)\n}\n\nprivate fun createSubscription(): Subscription {\n    return publisher\n            .buffer(10L, TimeUnit.SECONDS, 500) // -&gt; Observable&lt;List&lt;Event&gt;&gt;\n            .buffer({ isActive.filter { it } }) // -&gt; Observable&lt;List&lt;List&lt;Event&gt;&gt;&gt;\n            .flatMap { Observable.from(it) } // -&gt; Observable&lt;List&lt;Event&gt;&gt;\n            .map { /* create HttpPost request */ }\n            .flatMap { /* send request to server */ }\n            .subscribe { println(\"Received response: $it\") }\n}\n</code></pre>\n\n<p>The first <code>buffer</code> call will put incoming events into <em>buckets</em> with specified size or after time elapses. The second <code>buffer</code> will close current <em>bucket</em> on events emitted by observable indicating that the <code>Agent</code> is not paused (<code>isActive.filter { it }</code>). The <code>isActive</code> emits a value on every event and because the <code>isActive</code> is <code>BehaviorSubject</code> it will emit its last value to every new subscriber. That is on every <em>bucket</em> emitted by first <code>buffer</code> call it will either continue right away or wait until the <code>Agent</code> is resumed.</p>\n"}], "owner": {"reputation": 1114, "user_id": 191289, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/43f7e287f8f62f255fc754ad4f9c46ef?s=128&d=identicon&r=PG", "display_name": "ashays", "link": "https://stackoverflow.com/users/191289/ashays"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1464843017, "creation_date": 1464738459, "question_id": 37557352, "link": "https://stackoverflow.com/questions/37557352/how-can-i-pause-an-event-from-flowing-through-an-observable", "title": "How can I pause an event from flowing through an observable?", "body": "<p>I am trying to create an Observable that can be paused in such a way that items stop being pushed through the observable until it becomes unpaused.</p>\n\n<p>At which point, I'd like it to resume processing all of the unprocessed items.  My data source comes from outside the class, so what I have winds up looking like this:</p>\n\n<pre><code>class Agent {\n    val publisher = PublishSubject.create&lt;Event&gt;()\n    val subscription = createSubscription()\n\n    fun trackEvent(e: Event) {\n        publisher.onNext(e)\n    }\n\n    fun pause() {\n        // ???\n    }\n\n    fun resume() {\n        // ???\n    }\n\n    private fun createSubscription(): Subscription {\n        return publisher\n                .map { stringify(it) }\n                .buffer(10L, TimeUnit.SECONDS, 500) // capture 500 events or 10 seconds worth, whichever comes first.\n                .map { /* create HttpPost request */ }\n                .flatMap { /* send request to server */ }\n                .subscribe { println(\"Received response: $it\") }\n    }\n}\n</code></pre>\n\n<p>What I'm aiming for is that the <code>pause</code> function would stop the events from even going to the server (but would hold on to them until an eventual <code>resume</code>).  At the point <code>resume</code> happens, we'd send the events.  (Obviously we'd add in some extra help for back pressure in case we had <em>too many</em> events during the paused state.</p>\n\n<p>I've tried various uses of buffering and windowing in order to make this work, but it never actually <em>pauses</em> the observable.  Instead, one of two things happens:</p>\n\n<ol>\n<li>The event is dropped entirely (in the case of an unsubscribe, filter, etc.)</li>\n<li>The event flows through as though nothing has happened.</li>\n</ol>\n\n<p>Is there anything I can do to support this use case?  Or should I be writing this under the expectation that one of the above two outcomes is what will happen?</p>\n"}, {"tags": ["kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1464720905, "post_id": 37553484, "comment_id": 62595747, "body": "Kotlin, unlike Groovy, is a statically typed language, which means that it&#39;s not possible to store arbitrary values in an object which doesn&#39;t have the fields for those values."}, {"owner": {"reputation": 495, "user_id": 1508785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4be0c18685a2566503737b795cb5ec6a?s=128&d=identicon&r=PG", "display_name": "Hartimer", "link": "https://stackoverflow.com/users/1508785/hartimer"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1464721927, "post_id": 37553484, "comment_id": 62596331, "body": "@yole the fact that Kotlin is a statically typed language is what prompted me to dive into this project in the first place. I was wondering if the compiler would be smart enough to understand these types of initializations, but I suppose that this would be way too complicated, especially if you start initializing on some other class/function and using the result somewhere else."}, {"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 0, "creation_date": 1464725713, "post_id": 37553484, "comment_id": 62598456, "body": "What kind of initialization is this supposed to understand? You&#39;re declaring a var in the scope of an anonymous function that is passed to the <code>MyClass.before</code> function. Once you hit the closing brace, that scope is closed and <code>var a</code> no longer exists."}, {"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 0, "creation_date": 1464725915, "post_id": 37553484, "comment_id": 62598564, "body": "Also, what is the <code>with(this) init</code> line supposed to do? That won&#39;t even compile as it is. Why don&#39;t you just say <code>init()</code> to run the init function? (Same goes for <code>with(this) block</code>.)"}, {"owner": {"reputation": 495, "user_id": 1508785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4be0c18685a2566503737b795cb5ec6a?s=128&d=identicon&r=PG", "display_name": "Hartimer", "link": "https://stackoverflow.com/users/1508785/hartimer"}, "reply_to_user": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 0, "creation_date": 1464725954, "post_id": 37553484, "comment_id": 62598591, "body": "@RuckusT-Boom the objective would be to store the variable <code>a</code> inside instance <code>myClass</code> so then you could use <code>myClass.a</code> somewhere else."}, {"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1464726322, "post_id": 37553484, "comment_id": 62598795, "body": "I see. In which case @yole&#39;s answer was all you needed :)"}, {"owner": {"reputation": 495, "user_id": 1508785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4be0c18685a2566503737b795cb5ec6a?s=128&d=identicon&r=PG", "display_name": "Hartimer", "link": "https://stackoverflow.com/users/1508785/hartimer"}, "reply_to_user": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 0, "creation_date": 1464726708, "post_id": 37553484, "comment_id": 62599000, "body": "Thanks for the feedback @RuckusT-Boom . I added compilable code to my question, that&#39;s the code I&#39;ve been using to try and figure this out. Seems to be a problem with the design, which took advantage of Groovy&#39;s dynamic types more than anything else."}, {"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "reply_to_user": {"reputation": 495, "user_id": 1508785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4be0c18685a2566503737b795cb5ec6a?s=128&d=identicon&r=PG", "display_name": "Hartimer", "link": "https://stackoverflow.com/users/1508785/hartimer"}, "edited": false, "score": 0, "creation_date": 1464749912, "post_id": 37553484, "comment_id": 62605818, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/113472/discussion-between-ruckus-t-boom-and-hartimer\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 1, "last_activity_date": 1464728052, "creation_date": 1464728052, "answer_id": 37555436, "question_id": 37553484, "link": "https://stackoverflow.com/questions/37553484/how-to-create-variables-on-parent-context/37555436#37555436", "title": "How to create variables on parent context", "body": "<p>Kotlin is a statically typed language. It's not possible to store data inside the instance of an object for which there is no field inside that object.</p>\n\n<p>You could define a property of type <code>Map</code>, and store the values inside that map, but you won't be able to access them using the regular property syntax unless you know in advance which values will be stored there.</p>\n"}], "owner": {"reputation": 495, "user_id": 1508785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4be0c18685a2566503737b795cb5ec6a?s=128&d=identicon&r=PG", "display_name": "Hartimer", "link": "https://stackoverflow.com/users/1508785/hartimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 37555436, "answer_count": 1, "score": 0, "last_activity_date": 1464728052, "creation_date": 1464720685, "last_edit_date": 1464726619, "question_id": 37553484, "link": "https://stackoverflow.com/questions/37553484/how-to-create-variables-on-parent-context", "title": "How to create variables on parent context", "body": "<p>I'm trying to implement something similar to this syntax in Kotlin</p>\n\n<pre><code>class MyClass() {\n    fun before(init: () -&gt; Unit): Unit {\n        with(this) init\n    }\n    fun after(block: () -&gt; Unit): Unit {\n        with(this) block\n    }\n}\n\nfun main () {\n    var myClass = MyClass()\n    myClass.before {\n        var a = 5\n    }\n    myClass.after {\n        println(\"Double of a is ${a * 2}\")\n    }\n}\n</code></pre>\n\n<p>Right now this won't work because <code>a</code> cannot be resolved within <code>after</code>. I understand that this is due to the way the closures work.</p>\n\n<p>My question is if there is some mechanism in Kotlin that would allow me to do this, create variables in a closure/extension in such a way that they would be stored in the receiver object and be accessible to other closures/extensions.</p>\n\n<p>This is part of an effort to migrate a Groovy script to Kotlin.</p>\n\n<p>Disclaimer: This is my very first go at Kotlin. I've read through the docs but I may be missing something (a lot). Feel free to just point at the right direction</p>\n\n<p>EDIT: Adding compilable example</p>\n\n<pre><code>class Aa() {\n\n    var a: Int = 0\n    var bb: () -&gt; Unit = null!!\n\n    fun ww (block: () -&gt; Unit) {\n        bb = block\n    }\n\n    fun doit(block: () -&gt; Unit) {\n        with(bb) {\n            block()\n        }\n    }\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val exec = fun Aa.(other: () -&gt; Unit): Unit = other()\n\n    aa.ww {\n        var xx = 5\n    }\n\n    aa.doit {\n        // println(\"with $xx\") &lt;- this fails\n    }\n}\n</code></pre>\n"}, {"tags": ["dependency-injection", "kotlin", "kohesive-injekt"], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 3, "last_activity_date": 1464711620, "creation_date": 1464711620, "answer_id": 37550924, "question_id": 37550923, "link": "https://stackoverflow.com/questions/37550923/in-the-injekt-library-for-kotlin-how-do-i-inject-functions-instead-of-just-valu/37550924#37550924", "title": "In the Injekt library for Kotlin, how do I inject functions instead of just values?", "body": "<p>You are correct, the functions boil down to an internal representation of the signature, for example in this case as:</p>\n\n\n\n<pre><code>kotlin.jvm.functions.Function1&lt;? super java.lang.Integer, ? extends java.lang.Integer&gt;\n</code></pre>\n\n<p>And any function that has the same parameter and return type will have the same internal type and appear to be the same to Injekt.  The following registrations are all valid and do not conflict:</p>\n\n<pre><code>// register some functions\n\nInjekt.addSingletonFactory {\n    val function: (value: Int) -&gt; Int = { value -&gt; value + 1 }\n    function\n}\n\nInjekt.addSingletonFactory {\n    val function: (Long) -&gt; Long = { value -&gt; value - 1 }\n    function\n}\n\nInjekt.addSingletonFactory {\n    val function: (Long) -&gt; String = { value -&gt; \"The long is $value\" }\n    function\n}\n\n// inject and use the functions\n\nval intFunction: (Int) -&gt; Int = Injekt.get()\nval intResult = intFunction(2)\n\nval longFunction: (Long) -&gt; Long = Injekt.get()\nval longResult = longFunction(2)\n\nval longStringFunction: (Long) -&gt; String = Injekt.get()\nval stringResult = longStringFunction(10)\n</code></pre>\n\n<p>If you want to use the same function signature as different meaning, you can create a class wrapper for each meaning of the function:</p>\n\n<pre><code>class Int1Action(val function: (Int) -&gt; Int) {\n    operator fun invoke(i: Int): Int = function(i)\n}\n</code></pre>\n\n<p>By adding the <code>invoke</code> operator, you can naturally use this wrapper without referencing the <code>function</code> member, such as:</p>\n\n<pre><code>Injekt.addSingletonFactory {\n    val function: (Int) -&gt; Int = { value -&gt; value + 20 }\n    Int1Action(function)\n}\n\nval action: Int1Action = Injekt.get()\nval result = action(2) // call it directly using the invoke operator\n</code></pre>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8489, "favorite_count": 0, "accepted_answer_id": 37550924, "answer_count": 1, "score": 2, "last_activity_date": 1464711620, "creation_date": 1464711620, "last_edit_date": 1610973576, "question_id": 37550923, "link": "https://stackoverflow.com/questions/37550923/in-the-injekt-library-for-kotlin-how-do-i-inject-functions-instead-of-just-valu", "title": "In the Injekt library for Kotlin, how do I inject functions instead of just values?", "body": "<p><strong>When using Injekt library in Kotlin for dependency injection:</strong></p>\n<p>Instead of injecting a value, sometimes I want to inject a function.  So something like receiving the function by:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code> val function: (Int) -&gt; Int = Injekt.get()\n</code></pre>\n<p>This seems to work ok, but not if I register more than one function with the same signature but different meaning.  There doesn't appear to be a way to differentiate the functions.</p>\n<p><strong>Note:</strong> <em>this question is intentionally written and answered by the author (<a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the idiomatic answers to commonly asked Injekt + Kotlin topics are present in SO.  Other answers are also welcome, there are other styles of how to do this!  Disclosure, I am the author of the Injekt library.</em></p>\n"}, {"tags": ["javascript", "kotlin"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1464676975, "post_id": 37537987, "comment_id": 62566719, "body": "Take a look at kotlinx.html"}, {"owner": {"reputation": 171, "user_id": 3613097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d9ee2e2c8a9755390b10e70fe19a34?s=128&d=identicon&r=PG&f=1", "display_name": "pabl0rg", "link": "https://stackoverflow.com/users/3613097/pabl0rg"}, "edited": false, "score": 0, "creation_date": 1464692587, "post_id": 37537987, "comment_id": 62576610, "body": "what jar/maven dependency are you using?"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "reply_to_user": {"reputation": 171, "user_id": 3613097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d9ee2e2c8a9755390b10e70fe19a34?s=128&d=identicon&r=PG&f=1", "display_name": "pabl0rg", "link": "https://stackoverflow.com/users/3613097/pabl0rg"}, "edited": false, "score": 0, "creation_date": 1464814199, "post_id": 37537987, "comment_id": 62643930, "body": "@pabl0rg: I&#39;ve added a <code>pom.xml</code> now and added it into my post including all the dependencies, repositories, etc."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1464814240, "post_id": 37537987, "comment_id": 62643955, "body": "@IRus: I take it the docs for kotlinx.html are outdated? Or am I just using it incorrectly ?"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 1, "creation_date": 1464820195, "post_id": 37537987, "comment_id": 62646517, "body": "Docs looks up to date. But js and jvm version can be different. For example with <code>System.out</code> will not work in kotlinjs."}], "answers": [{"comments": [{"owner": {"reputation": 4016, "user_id": 1460833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc4821b9c16457694f503b42831198f1?s=128&d=identicon&r=PG", "display_name": "Sergey Mashkov", "link": "https://stackoverflow.com/users/1460833/sergey-mashkov"}, "edited": false, "score": 0, "creation_date": 1464871107, "post_id": 37579866, "comment_id": 62668893, "body": "See 0.5.9: it is compatible with 1.0.2"}, {"owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "edited": false, "score": 1, "creation_date": 1506391628, "post_id": 37579866, "comment_id": 79791208, "body": "Error 404, page not found :("}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 1, "last_activity_date": 1464820397, "creation_date": 1464820397, "answer_id": 37579866, "question_id": 37537987, "link": "https://stackoverflow.com/questions/37537987/using-standard-html-elements-in-kotlinjs-safely-typed/37579866#37579866", "title": "Using standard HTML Elements in KotlinJS safely typed", "body": "<p>I just write sample project with <strong>kotlin2js</strong> and <strong>kotlinx.html</strong> <a href=\"https://github.com/IRus/kotlin-kotlinx.html\" rel=\"nofollow\">IRus/kotlin-kotlinx.html</a>. Looks like current version of <strong>kotlinx.html</strong> (0.5.8) not compatible with Kotlin 1.0.2, but works well with kotlin 1.0.1-2.</p>\n"}], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 1, "accepted_answer_id": 37579866, "answer_count": 1, "score": 0, "last_activity_date": 1464820397, "creation_date": 1464674835, "last_edit_date": 1464813963, "question_id": 37537987, "link": "https://stackoverflow.com/questions/37537987/using-standard-html-elements-in-kotlinjs-safely-typed", "title": "Using standard HTML Elements in KotlinJS safely typed", "body": "<p>I'm trying to dynamically create an image which I will then append to the DOM.</p>\n\n<pre><code>import org.w3c.dom.HTMLImageElement\n\nfun main(args: Array&lt;String&gt;) {\n\n    // load footer banner image\n    val img: HTMLImageElement = HTMLImageElement()\n    with (img){\n        src = \"img/footer.png\"\n        classList.add(\"img-responsive\")\n    }\n\n}\n</code></pre>\n\n<p>However, it doesn't like my constructor <code>HTMLImageElement()</code> since <code>HTMLImageElement</code> is an interface.</p>\n\n<p>Removing the constructor and Kotlin complains that <code>img</code> must be initialised.</p>\n\n<p>What is the correct way to make use of the <code>HTMLImageElement</code> in a type-safe way ?</p>\n\n<p><strong>Update</strong>: I'm now using maven which generates everything as it should.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.blah&lt;/groupId&gt;\n    &lt;artifactId&gt;blah&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;name&gt;Blah&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;kotlin.version&gt;1.0.2&lt;/kotlin.version&gt;\n        &lt;kotlin.html.version&gt;0.5.8&lt;/kotlin.html.version&gt;\n    &lt;/properties&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;bintray-kotlinx&lt;/id&gt;\n            &lt;name&gt;bintray&lt;/name&gt;\n            &lt;url&gt;http://dl.bintray.com/kotlinx/kotlinx&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlinx&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlinx.html.js&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.html.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>which compiles a <code>blah.js</code>, <code>blah.js.map</code>, <code>blah.js.meta</code>, <code>kotlin.js</code>, <code>kotlinx.html.js</code>, <code>kotlinx.html.meta.js</code>, <code>kotlinx.html.shared.js</code>, <code>kotlinx.html.shared.meta.js</code> and <code>stdlib.meta.js</code>.</p>\n\n<p>In my html file (which is sitting in my root directory) I'm including the following:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"js/jquery-1.12.4.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"js/bootstrap.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"target/classes/kotlin.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"target/classes/kotlinx.html.shared.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"target/classes/blah.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I've got a <code>println(\"hello world\")</code> in my <code>Main.kt</code> which executes fine in the browser printing \"hello world\" in the browswer console. </p>\n\n<p>Now I still want to append that image dynamically using Kotlin ...</p>\n\n<p>The docs say I should be doing <code>document.create.div(\"panel\")</code> to create a <code>div</code>, but <code>document.create...</code> autocompletes to <code>createAttribute</code>, <code>createComment</code> etc, no <code>create()</code> method in sight anywhere. (document is from package 'kotlin.browser').</p>\n\n<p>I'm not exactly sure how to use <code>kotlinx.html</code> since what I'm seeing in IntelliJ doesn't match the docs.</p>\n\n<p>How do I append a dynamically created image to an existing div using KotlinJS ?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1464674651, "post_id": 37537049, "comment_id": 62565668, "body": "the decision was to go with &quot;the least surprise&quot;, which is always Int"}], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 22, "creation_date": 1464674598, "post_id": 37537228, "comment_id": 62565644, "body": "IMO it should be in stdlib"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1464685878, "post_id": 37537228, "comment_id": 62572045, "body": "<code>var sum: Long = 0.0</code> does not compile, I&#39;ve changed it to <code>0L</code>"}, {"owner": {"reputation": 2786, "user_id": 1073826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17930848f07370b7aaddbbc6398d15bc?s=128&d=identicon&r=PG", "display_name": "Jon Peterson", "link": "https://stackoverflow.com/users/1073826/jon-peterson"}, "edited": false, "score": 1, "creation_date": 1464722224, "post_id": 37537228, "comment_id": 62596490, "body": "Thanks.  I&#39;m still learning Kotlin, so I had to go read up on extension functions.  Is there a convention on where these should be placed in a project?"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1495735102, "post_id": 37537228, "comment_id": 75387584, "body": "I&#39;m typically placing them in file named after the receiver class e.g. <code>Iterable_.kt</code> but I&#39;ve seen <code>Iterables.kt</code> also."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 35, "last_activity_date": 1525908499, "last_edit_date": 1525908499, "creation_date": 1464671201, "answer_id": 37537228, "question_id": 37537049, "link": "https://stackoverflow.com/questions/37537049/why-doesnt-sumbyselector-return-long/37537228#37537228", "title": "Why doesn&#39;t sumBy(selector) return Long?", "body": "<p>That's a decision Kotlin team made. Since it's <a href=\"https://stackoverflow.com/questions/2744511/java-why-no-return-type-based-method-overloading\">not possible to have return type overloads in Java</a> the <code>sumBy*</code> have to have different names depending on the return type. </p>\n\n<p>It's easy enough to add your own <code>sumByLong</code> though:</p>\n\n<pre><code>inline fun &lt;T&gt; Iterable&lt;T&gt;.sumByLong(selector: (T) -&gt; Long): Long {\n    var sum = 0L\n    for (element in this) {\n        sum += selector(element)\n    }\n    return sum\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3436, "user_id": 2233621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d934405dc8756df0238aa9794c54c679?s=128&d=identicon&r=PG&f=1", "display_name": "kassim", "link": "https://stackoverflow.com/users/2233621/kassim"}, "edited": false, "score": 0, "creation_date": 1539352188, "post_id": 51041387, "comment_id": 92483274, "body": "Its a little more expensive than miensol&#39;s solution"}], "tags": [], "owner": {"reputation": 6746, "user_id": 1690078, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34cd353216b1a04b89853c96ab22eab2?s=128&d=identicon&r=PG", "display_name": "Clyde", "link": "https://stackoverflow.com/users/1690078/clyde"}, "is_accepted": false, "score": 14, "last_activity_date": 1530011158, "creation_date": 1530011158, "answer_id": 51041387, "question_id": 37537049, "link": "https://stackoverflow.com/questions/37537049/why-doesnt-sumbyselector-return-long/51041387#51041387", "title": "Why doesn&#39;t sumBy(selector) return Long?", "body": "<p>You can also use the <code>sum()</code> extension function which does have a <code>Long</code> variant, in conjunction with <code>map()</code></p>\n\n<pre><code>val totalLength = files.map { it.length() }.sum()\n</code></pre>\n\n<p>Or you could wrap this into an extension function, though I don't see much benefit over the inline version:</p>\n\n<pre><code>inline fun &lt;T&gt; Iterable&lt;T&gt;.sumByLong(selector: (T) -&gt; Long): Long {\n    return map { selector(it) }.sum()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 179, "user_id": 3834292, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1060692786/picture?type=large", "display_name": "loalexzzzz", "link": "https://stackoverflow.com/users/3834292/loalexzzzz"}, "edited": false, "score": 0, "creation_date": 1596789804, "post_id": 57551098, "comment_id": 111929721, "body": "that should be the best ans"}], "tags": [], "owner": {"reputation": 4050, "user_id": 4963858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ec7ca489576e7299e8f4d37ffaf149?s=128&d=identicon&r=PG&f=1", "display_name": "hqzxzwb", "link": "https://stackoverflow.com/users/4963858/hqzxzwb"}, "is_accepted": false, "score": 5, "last_activity_date": 1566193923, "creation_date": 1566193923, "answer_id": 57551098, "question_id": 37537049, "link": "https://stackoverflow.com/questions/37537049/why-doesnt-sumbyselector-return-long/57551098#57551098", "title": "Why doesn&#39;t sumBy(selector) return Long?", "body": "<p>Optionally you can use <code>fold</code> function.</p>\n\n<pre><code>val totalLength = files.fold(0L) { acc, it -&gt; acc + it.length() }\n</code></pre>\n\n<p>It's not much longer than <code>sumBy</code> code.</p>\n"}], "owner": {"reputation": 2786, "user_id": 1073826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17930848f07370b7aaddbbc6398d15bc?s=128&d=identicon&r=PG", "display_name": "Jon Peterson", "link": "https://stackoverflow.com/users/1073826/jon-peterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4946, "favorite_count": 1, "accepted_answer_id": 37537228, "answer_count": 3, "score": 27, "last_activity_date": 1566193923, "creation_date": 1464670220, "question_id": 37537049, "link": "https://stackoverflow.com/questions/37537049/why-doesnt-sumbyselector-return-long", "title": "Why doesn&#39;t sumBy(selector) return Long?", "body": "<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sum-by.html\" rel=\"noreferrer\">sumBy(selector)</a> returns Int</p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sum-by-double.html\" rel=\"noreferrer\">sumByDouble(selector)</a> returns Double</p>\n\n<p>Why doesn't sumBy return Long? Is there a workaround for this?</p>\n"}, {"tags": ["function", "types", "kotlin", "signature", "generic-variance"], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1464674523, "post_id": 37535198, "comment_id": 62565604, "body": "that&#39;s the right way to do it. The compiler caught you a bug, basically"}], "tags": [], "owner": {"reputation": 3677, "user_id": 1128668, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/35ca82b58da21315ee1650c8f4158adf?s=128&d=identicon&r=PG", "display_name": "GlenPeterson", "link": "https://stackoverflow.com/users/1128668/glenpeterson"}, "is_accepted": false, "score": 3, "last_activity_date": 1464656227, "last_edit_date": 1464656227, "creation_date": 1464654849, "answer_id": 37535198, "question_id": 37535194, "link": "https://stackoverflow.com/questions/37535194/kotlin-confusion-with-lambdas-and-generics/37535198#37535198", "title": "Kotlin: Confusion with lambdas and generics", "body": "<p>I think this is right:</p>\n\n<pre><code>interface Printable {}\n\nclass Book(val title: String) :Printable\n\nfun bookPrint(b: Book?):String =  \"Title: \" + b?.title\n\nclass Author(val name: String) :Printable\n\nfun authorPrint(a: Author?):String = \"Name: \" + a?.name\n\n// Add type parameter T, upper-bounded by Printable.  This ties\n// the type of the first argument to the type of the second and\n// ensures they are both Printable.\nfun &lt;T:Printable&gt; printIt(f: (T?) -&gt; String, a:T):String {\n    return \"Unknown: \" + f.invoke(null) +\n            \"Known: \" + f.invoke(a)\n}\n\nfun main(args: Array&lt;String&gt;) {\n    printIt(::bookPrint, Book(\"Storm Front\"))\n    printIt(::authorPrint, Author(\"Jim Butcher\"))\n}\n</code></pre>\n\n<p>Thanks to experimenting and reading the documentation on <a href=\"https://kotlinlang.org/docs/reference/generics.html#generic-constraints\" rel=\"nofollow\">Generic Constraints: Upper Bounds</a></p>\n\n<p>Still interested if there is a better way...</p>\n"}], "owner": {"reputation": 3677, "user_id": 1128668, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/35ca82b58da21315ee1650c8f4158adf?s=128&d=identicon&r=PG", "display_name": "GlenPeterson", "link": "https://stackoverflow.com/users/1128668/glenpeterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1464656333, "creation_date": 1464654826, "last_edit_date": 1464656333, "question_id": 37535194, "link": "https://stackoverflow.com/questions/37535194/kotlin-confusion-with-lambdas-and-generics", "title": "Kotlin: Confusion with lambdas and generics", "body": "<p>Please see error messages in comments:</p>\n\n<pre><code>interface Printable {}\n\nclass Book(val title: String) :Printable\n\nfun bookPrint(b: Book?):String =  \"Title: \" + b?.title\n\nclass Author(val name: String) :Printable\n\nfun authorPrint(a: Author?):String = \"Name: \" + a?.name\n\n// Unsupported: [modifier on parameter in function type]\n// -------------vv\nfun printIt(f: (in Printable?) -&gt; String, a:Printable):String {\n    return \"Unknown: \" + f.invoke(null) +\n            \"Known: \" + f.invoke(a)\n}\n\nfun main(args: Array&lt;String&gt;) {\n    // Type Mismatch:\n    // Required: (Printable?) -&gt; String\n    // Found: KFunction1&lt;Book?,String&gt;\n    // -------vvvvvvvvv\n    printIt(::bookPrint, Book(\"Storm Front\"))\n    // -------vvvvvvvvvvv\n    printIt(::authorPrint, Author(\"Jim Butcher\"))\n}\n</code></pre>\n\n<p>Key points:</p>\n\n<ul>\n<li><code>bookPrint()</code> and <code>authorPrint()</code> both need to take a null book/author</li>\n<li><code>printIt()</code> needs to take either of those functions.</li>\n</ul>\n\n<p>So, thinking \"producer-extends, consumer-super\" I think that my problem is that I want an input parameter to be covariant, when it's hard-coded to be contravariant (\"in\").</p>\n\n<p>I had this idea that didn't work:</p>\n\n<pre><code>// Unresolved reference: KFunction1\n// --------------vvvvvvvvvv\nfun htmlList2(f: KFunction1&lt;Printable?,String&gt;, a:Printable):String {\n    return \"Unknown: \" + f.invoke(null) +\n            \"Known: \" + f.invoke(a)\n}\n</code></pre>\n"}, {"tags": ["javascript", "intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1464670331, "post_id": 37534403, "comment_id": 62564099, "body": "Switching on <code>Copy library runtime files</code> generated a <code>kotlin.js</code> and a <code>stdlib.meta.js</code>."}, {"owner": {"reputation": 924, "user_id": 2329281, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/fb79942e307a17966df0774c5ac12daf?s=128&d=identicon&r=PG", "display_name": "Zeb McCorkle", "link": "https://stackoverflow.com/users/2329281/zeb-mccorkle"}, "reply_to_user": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1464694019, "post_id": 37534403, "comment_id": 62577500, "body": "@JanVladimirMostert Include Kotlin.js in the HTML file."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 1, "creation_date": 1464707221, "post_id": 37534403, "comment_id": 62587223, "body": "Is there a way to generate the kotlin.js file via maven ?"}], "tags": [], "owner": {"reputation": 924, "user_id": 2329281, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/fb79942e307a17966df0774c5ac12daf?s=128&d=identicon&r=PG", "display_name": "Zeb McCorkle", "link": "https://stackoverflow.com/users/2329281/zeb-mccorkle"}, "is_accepted": true, "score": 2, "last_activity_date": 1464647692, "creation_date": 1464647692, "answer_id": 37534403, "question_id": 37533768, "link": "https://stackoverflow.com/questions/37533768/hello-world-in-kotlinjs-failing-with-kotlin-is-not-defined/37534403#37534403", "title": "Hello World in KotlinJS failing with Kotlin is not defined", "body": "<p>IntelliJ should have plopped a Kotlin standard library <code>.js</code> file somewhere. This was configured when you created the project. You must include this in the HTML file before your compiled <code>.js</code> file.</p>\n"}], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 1, "accepted_answer_id": 37534403, "answer_count": 1, "score": 1, "last_activity_date": 1464647692, "creation_date": 1464643097, "question_id": 37533768, "link": "https://stackoverflow.com/questions/37533768/hello-world-in-kotlinjs-failing-with-kotlin-is-not-defined", "title": "Hello World in KotlinJS failing with Kotlin is not defined", "body": "<p>I have a Kotlin file called <code>Main.kt</code> </p>\n\n<pre><code>package com.ahp.mui\n\nfun main(args: Array&lt;String&gt;) {\n\n    println(\"...\")\n    println(\"Hello World\")\n\n}\n</code></pre>\n\n<p>Project is setup as a KotlinJS project.</p>\n\n<p>Once I hit compile, I see the following files being generated:</p>\n\n<pre><code>target/production/ahp-mui/ahp-mui.js\ntarget/production/ahp-mui/ahp-mui.js.map\ntarget/production/ahp-mui/ahp-mui.meta.js\n</code></pre>\n\n<p>The main generated file contains:</p>\n\n<pre><code>(function (Kotlin) {\n  'use strict';\n  var _ = Kotlin.defineRootPackage(null, /** @lends _ */ {\n    com: Kotlin.definePackage(null, /** @lends _.com */ {\n      ahp: Kotlin.definePackage(null, /** @lends _.com.ahp */ {\n        mui: Kotlin.definePackage(null, /** @lends _.com.ahp.mui */ {\n          main_kand9s$: function (args) {\n            Kotlin.println('...');\n            Kotlin.println('Hello World');\n          }\n        })\n      })\n    })\n  });\n  Kotlin.defineModule('ahp-mui', _);\n  _.com.ahp.mui.main_kand9s$([]);\n}(Kotlin));\n</code></pre>\n\n<p>Now I include that file in <code>index.html</code> sitting in the root directory:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n    TESTING\n\n\n    &lt;script type=\"text/javascript\" src=\"target/production/ahp-mui/ahp-mui.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Now serving that <code>index.html</code> file directly via IntelliJ (<code>http://localhost:63342/ahp-wui/ahp-mui/index.html?_ijt=n55ajlpfutv6b22n56d59jv1rn</code>), I see that the <code>Kotlin</code> paramater is not defined.</p>\n\n<pre><code>ahp-mui.js:16Uncaught ReferenceError: Kotlin is not defined\n</code></pre>\n\n<p>Am I doing this correctly? Should I be importing anything else that will include the missing <code>Kotlin</code> variable?</p>\n"}, {"tags": ["arrays", "equals", "kotlin", "data-class"], "comments": [{"owner": {"reputation": 7814, "user_id": 1939564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4INA.jpg?s=128&g=1", "display_name": "Muhammad Babar", "link": "https://stackoverflow.com/users/1939564/muhammad-babar"}, "edited": false, "score": 0, "creation_date": 1617615957, "post_id": 37524422, "comment_id": 118344446, "body": "It&#39;s never too late to comment, For data class equals contract is generated on the base of paramaters passed in the primary constructor. For example <code>board1 = PuzzleBoard(&quot;Board&quot;, 20)</code> and <code>board2 = PuzzleBoard(&quot;Board&quot;, 20)</code> would return <code>true</code> for <code>board1 == board2</code>. In you case the equal contract would be generated based on array memory address, that is the reason you are getting false."}], "answers": [{"comments": [{"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 3, "creation_date": 1464608050, "post_id": 37524561, "comment_id": 62540854, "body": "For more information on testing value equality of arrays in Kotlin see here: <a href=\"http://stackoverflow.com/q/35272761/1402641\">stackoverflow.com/q/35272761/1402641</a>"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 3, "creation_date": 1464609672, "post_id": 37524561, "comment_id": 62541815, "body": "And if you&#39;d like to avoid writing your own equals method, consider using <code>List&lt;Int&gt;</code> instead of <code>IntArray</code>. It won&#39;t be as memory efficient but unless you&#39;re creating very large arrays the impact will be nominal."}, {"owner": {"reputation": 704, "user_id": 2192545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/mYRd5.png?s=128&g=1", "display_name": "Zackline", "link": "https://stackoverflow.com/users/2192545/zackline"}, "edited": false, "score": 0, "creation_date": 1480764925, "post_id": 37524561, "comment_id": 69104760, "body": "I don&#39;t know much about Kotlin but wouldn&#39;t using <code>if(other !is thisClass) return false</code> be better? Then you wouldn&#39;t need the as thisClass in the next line because the compiler could now smartcast, right?"}, {"owner": {"reputation": 1036, "user_id": 4796466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qzdz6r3yroI/AAAAAAAAAAI/AAAAAAAAABI/87O1LC1JOW8/photo.jpg?sz=128", "display_name": "Chad Mx", "link": "https://stackoverflow.com/users/4796466/chad-mx"}, "edited": false, "score": 0, "creation_date": 1514295124, "post_id": 37524561, "comment_id": 82927249, "body": "How can I find and what shortcut (if it differs in IntelliJ) directs me to, the implementation of this method?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 1036, "user_id": 4796466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qzdz6r3yroI/AAAAAAAAAAI/AAAAAAAAABI/87O1LC1JOW8/photo.jpg?sz=128", "display_name": "Chad Mx", "link": "https://stackoverflow.com/users/4796466/chad-mx"}, "edited": false, "score": 0, "creation_date": 1514297952, "post_id": 37524561, "comment_id": 82928160, "body": "@ChadMx, in IntelliJ IDEA, the shortcut to generate members is <code>Alt</code>+<code>Insert</code> by default. Usually, you can find an action&#39;s shortcut by pressing <code>Ctrl</code>+<code>Shift</code>+<code>A</code> and typing the action name."}, {"owner": {"reputation": 1036, "user_id": 4796466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qzdz6r3yroI/AAAAAAAAAAI/AAAAAAAAABI/87O1LC1JOW8/photo.jpg?sz=128", "display_name": "Chad Mx", "link": "https://stackoverflow.com/users/4796466/chad-mx"}, "edited": false, "score": 0, "creation_date": 1514316910, "post_id": 37524561, "comment_id": 82934465, "body": "@hotkey Thank you, but I guess I wasn&#39;t clear. What I meant was, how do I see the generated code for a data class, if it is possible?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 1036, "user_id": 4796466, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qzdz6r3yroI/AAAAAAAAAAI/AAAAAAAAABI/87O1LC1JOW8/photo.jpg?sz=128", "display_name": "Chad Mx", "link": "https://stackoverflow.com/users/4796466/chad-mx"}, "edited": false, "score": 1, "creation_date": 1514317256, "post_id": 37524561, "comment_id": 82934580, "body": "@ChadMx, oh, I really misunderstood you. Since the members are generated not as Kotlin sources but directly as the JVM bytecode, It&#39;s only possible to inspect the generated bytecode, <a href=\"https://stackoverflow.com/questions/35538049/kotlin-bytecode-how-to-analyze-in-intellij-idea\">see how</a>. You will find the generated methdos inside the data class."}, {"owner": {"reputation": 2677, "user_id": 3808183, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7a1088f9d9dc671b0e3d4d337a546913?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Guo", "link": "https://stackoverflow.com/users/3808183/jack-guo"}, "edited": false, "score": 0, "creation_date": 1528928767, "post_id": 37524561, "comment_id": 88697735, "body": "@hotkey, if I have a data class <code>PuzzleBoard(val name: String, val board: IntArray)</code>, how should I override <code>hashCode()</code>?"}, {"owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "edited": false, "score": 0, "creation_date": 1536055840, "post_id": 37524561, "comment_id": 91277117, "body": "I think this implementation is but it requires to check all properties"}, {"owner": {"reputation": 1537, "user_id": 1678893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZOh9W.jpg?s=128&g=1", "display_name": "Diego Marin Santos", "link": "https://stackoverflow.com/users/1678893/diego-marin-santos"}, "edited": false, "score": 0, "creation_date": 1587246184, "post_id": 37524561, "comment_id": 108437462, "body": "@hotkey Do you what is the reason for this behavior of Array&#39;s equals method?"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 91, "last_activity_date": 1464617833, "last_edit_date": 1464617833, "creation_date": 1464607723, "answer_id": 37524561, "question_id": 37524422, "link": "https://stackoverflow.com/questions/37524422/equals-method-for-data-class-in-kotlin/37524561#37524561", "title": "Equals method for data class in Kotlin", "body": "<p>In Kotlin <code>data</code> classes equality check, arrays, just like other classes, are compared using <code>equals(...)</code>, which compares the arrays references, not the content. This behavior is described <a href=\"http://blog.jetbrains.com/kotlin/2015/09/feedback-request-limitations-on-data-classes/\" rel=\"noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>So, whenever you say</p>\n  \n  <ul>\n  <li><p><code>arr1 == arr2</code></p></li>\n  <li><p><code>DataClass(arr1) == DataClass(arr2)</code></p></li>\n  <li>...</li>\n  </ul>\n  \n  <p>you get the arrays compared through <code>equals()</code>, i.e. referentially.</p>\n</blockquote>\n\n<p>Given that, </p>\n\n<pre><code>val arr1 = intArrayOf(1, 2, 3)\nval arr2 = intArrayOf(1, 2, 3)\n\nprintln(arr1 == arr2) // false is expected here\nprintln(PuzzleBoard(arr1) == PuzzleBoard(arr2)) // false too\n</code></pre>\n\n<p><hr>\nTo override this and have the arrays compared structurally, you can implement <code>equals(...)</code>+<code>hashCode()</code> in your data class using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals(java.lang.Object[],%20java.lang.Object[])\" rel=\"noreferrer\"><code>Arrays.equals(...)</code></a> and <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#hashCode(java.lang.Object[])\" rel=\"noreferrer\"><code>Arrays.hashCode(...)</code></a>:</p>\n\n<pre><code>override fun equals(other: Any?): Boolean{\n    if (this === other) return true\n    if (other?.javaClass != javaClass) return false\n\n    other as PuzzleBoard\n\n    if (!Arrays.equals(board, other.board)) return false\n\n    return true\n}\n\noverride fun hashCode(): Int{\n    return Arrays.hashCode(board)\n}\n</code></pre>\n\n<p><sup>This code is what IntelliJ IDEA can automatically generate for non-data classes.</sup></p>\n\n<p>Another solution is to use <code>List&lt;Int&gt;</code> instead of <code>IntArray</code>. Lists are compared structurally, so that you won't need to override anything.</p>\n"}, {"tags": [], "owner": {"reputation": 5077, "user_id": 5476209, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/SKMHP.jpg?s=128&g=1", "display_name": "TapanHP", "link": "https://stackoverflow.com/users/5476209/tapanhp"}, "is_accepted": false, "score": 7, "last_activity_date": 1496819375, "last_edit_date": 1592644375, "creation_date": 1496819375, "answer_id": 44405869, "question_id": 37524422, "link": "https://stackoverflow.com/questions/37524422/equals-method-for-data-class-in-kotlin/44405869#44405869", "title": "Equals method for data class in Kotlin", "body": "<p>For <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">Data classes</a> in Kotlin, hashcode() method will generate and return the same integer if parameters values are same for both objects.</p>\n<pre><code>val user = User(&quot;Alex&quot;, 1)\nval secondUser = User(&quot;Alex&quot;, 1)\nval thirdUser = User(&quot;Max&quot;, 2)\n\nprintln(user.hashCode().equals(secondUser.hashCode()))\nprintln(user.hashCode().equals(thirdUser.hashCode()))\n</code></pre>\n<p>Running this code will return <strong>True</strong> and <strong>False</strong> as when we created <strong>secondUser</strong> object we have passed same argument as object <strong>user</strong>, so hashCode() integer generated for both of them will be same.</p>\n<p>also if you will check this:</p>\n<pre><code>println(user.equals(thirdUser))\n</code></pre>\n<p>It will return false.</p>\n<p>As per hashCode() method docs</p>\n<pre><code>open fun hashCode(): Int (source)\n</code></pre>\n<blockquote>\n<p>Returns a hash code value for the object. The general contract of\nhashCode is:</p>\n<p>Whenever it is invoked on the same object more than once, the hashCode\nmethod must consistently return the same integer, provided no\ninformation used in equals comparisons on the object is modified.</p>\n<p>If two objects are equal according to the equals() method, then calling\nthe hashCode method on each of the two objects must produce the same\ninteger result.</p>\n</blockquote>\n<p>For more details see this discussion <a href=\"https://discuss.kotlinlang.org/t/how-does-kotlin-implement-equals-and-hashcode/940\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 1150, "user_id": 2762452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JHX2L.jpg?s=128&g=1", "display_name": "Mauro Banze", "link": "https://stackoverflow.com/users/2762452/mauro-banze"}, "is_accepted": false, "score": 4, "last_activity_date": 1577895228, "last_edit_date": 1577895228, "creation_date": 1570812259, "answer_id": 58345447, "question_id": 37524422, "link": "https://stackoverflow.com/questions/37524422/equals-method-for-data-class-in-kotlin/58345447#58345447", "title": "Equals method for data class in Kotlin", "body": "<p>In Kotlin, <code>equals()</code> behaves differently between <code>List</code> and <code>Array</code>, as you can see from code below:</p>\n\n<pre><code>val list1 = listOf(1, 2, 3)\nval list2 = listOf(1, 2, 3)\n\nval array1 = arrayOf(1, 2, 3)\nval array2 = arrayOf(1, 2, 3)\n\n//Side note: using a==b is the same as a.equals(b)\n\nval areListsEqual = list1 == list2// true\nval areArraysEqual = array1 == array2// false\n</code></pre>\n\n<p><code>List.equals()</code> checks whether the two lists have the same size and contain the same elements in the same order.</p>\n\n<p><code>Array.equals()</code> simply does an instance reference check. Since we created two arrays, they point to different objects in memory, thus not considered equal.</p>\n\n<p>Since Kotlin 1.1, to achieve the same behavior as with <code>List</code>, you can use <code>Array.contentEquals()</code>.</p>\n\n<p>Source: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/content-equals.html\" rel=\"nofollow noreferrer\">Array.contentEquals() docs</a> ; \n<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-abstract-list/equals.html\" rel=\"nofollow noreferrer\">List.equals() docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 4908512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079733130688bdd51d9330ebfcc60abe?s=128&d=identicon&r=PG&f=1", "display_name": "VIVEK CHOUDHARY", "link": "https://stackoverflow.com/users/4908512/vivek-choudhary"}, "is_accepted": false, "score": 0, "last_activity_date": 1614678615, "creation_date": 1614678615, "answer_id": 66437003, "question_id": 37524422, "link": "https://stackoverflow.com/questions/37524422/equals-method-for-data-class-in-kotlin/66437003#66437003", "title": "Equals method for data class in Kotlin", "body": "<p>Kotlin implementation:</p>\n<pre><code>override fun equals(other: Any?): Boolean {\n    when (other) {\n        is User -&gt; {\n            return this.userId == other.userId &amp;&amp;\n                    this.userName == other.userName\n        }\n        else -&gt; return false\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 771, "user_id": 5030710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c035dc45e7fbe34d941a3cbfadab0c8?s=128&d=identicon&r=PG", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/5030710/vaibhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42238, "favorite_count": 9, "accepted_answer_id": 37524561, "answer_count": 4, "score": 60, "last_activity_date": 1614678615, "creation_date": 1464607299, "last_edit_date": 1596279684, "question_id": 37524422, "link": "https://stackoverflow.com/questions/37524422/equals-method-for-data-class-in-kotlin", "title": "Equals method for data class in Kotlin", "body": "<p>I have the following data class</p>\n<pre><code>data class PuzzleBoard(val board: IntArray) {\n    val dimension by lazy { Math.sqrt(board.size.toDouble()).toInt() }\n}\n</code></pre>\n<p>I read that data classes in Kotlin get <code>equals()</code>/<code>hashcode()</code> method for free.</p>\n<p>I instantiated two objects.</p>\n<pre><code>val board1 = PuzzleBoard(intArrayOf(1,2,3,4,5,6,7,8,0))\nval board2 = PuzzleBoard(intArrayOf(1,2,3,4,5,6,7,8,0))\n</code></pre>\n<p>But still, the following statements return false.</p>\n<pre><code>board1 == board2\nboard1.equals(board2)\n</code></pre>\n"}, {"tags": ["android", "mockito", "kotlin", "powermock", "android-testing"], "comments": [{"owner": {"reputation": 3677, "user_id": 1560102, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/102af103f6bfa29ecc38d2995f7b7361?s=128&d=identicon&r=PG", "display_name": "DariusL", "link": "https://stackoverflow.com/users/1560102/dariusl"}, "edited": false, "score": 0, "creation_date": 1464598316, "post_id": 37521384, "comment_id": 62534993, "body": "I doubt it is possible with Mockito, AFAIK, you can only mock methods inside an open class or interface."}], "answers": [{"comments": [{"owner": {"reputation": 6605, "user_id": 4094366, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/sT1bn.jpg?s=128&g=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4094366/abdullah"}, "edited": false, "score": 0, "creation_date": 1464600115, "post_id": 37521758, "comment_id": 62536090, "body": "I am not able to access the class <code>FileKt</code> into my Kotlin tests. Though surprisingly to me I am able to do so in my Java tests!"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 6605, "user_id": 4094366, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/sT1bn.jpg?s=128&g=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4094366/abdullah"}, "edited": false, "score": 0, "creation_date": 1464601153, "post_id": 37521758, "comment_id": 62536711, "body": "@Abdullah Yep, seems <code>FileKt</code> is inaccessible from Kotlin tests. I think you can file an issue to <a href=\"https://kotl.in/issue\" rel=\"nofollow noreferrer\">kotl.in/issue</a>"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1464693321, "post_id": 37521758, "comment_id": 62577055, "body": "Unfortunately, no. You have to annotate a test with <code>@PrepareForTest(FileKt::class)</code>, which is impossible do achieve with <code>Class.forName()</code>."}, {"owner": {"reputation": 103, "user_id": 993564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ce0f29ec7bfdaecefc013885491953?s=128&d=identicon&r=PG", "display_name": "lack", "link": "https://stackoverflow.com/users/993564/lack"}, "edited": false, "score": 0, "creation_date": 1482269006, "post_id": 37521758, "comment_id": 69703455, "body": "If you happen to have all of your files in a common package, you can get the <code>@PrepareForTest</code> to pick them up via the fullyQualifiedNames mechanism: <code>@PrepareForTest(NormalClass::class, NormalClass2::class, fullyQualifiedNames=arrayOf(&quot;com.x.y.z.utils.*&quot;))</code>"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1464599293, "creation_date": 1464599293, "answer_id": 37521758, "question_id": 37521384, "link": "https://stackoverflow.com/questions/37521384/android-kotlin-mocking-a-free-function-using-mockito-powermock/37521758#37521758", "title": "Android Kotlin: Mocking a free function using Mockito/PowerMock", "body": "<p>You cannot do that with Mockito but I think it can be done with PowerMock. Let's assume that <code>somethingAwesomeIsDoneHere()</code> is located in <code>File.kt</code>. Then you have to mock the <code>FileKt</code> class and it's static method:</p>\n\n<pre><code>mockStatic(FileKt::class.java)\nexpect(somethingAwesomeIsDoneHere(something)).andReturn(retValue)\nreplay(FileKt::class.java)\n</code></pre>\n"}], "owner": {"reputation": 6605, "user_id": 4094366, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/sT1bn.jpg?s=128&g=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4094366/abdullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1122, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1464600064, "creation_date": 1464598128, "last_edit_date": 1464600064, "question_id": 37521384, "link": "https://stackoverflow.com/questions/37521384/android-kotlin-mocking-a-free-function-using-mockito-powermock", "title": "Android Kotlin: Mocking a free function using Mockito/PowerMock", "body": "<p>I am having a free function in Kotlin that I want to mock for test purpose.</p>\n\n<p>My free function is something like this:</p>\n\n<pre><code>fun somethingAwesomeIsDoneHere(param: String) : String {\n    // Awesome\n}\n</code></pre>\n\n<p>In my test I want to mock/stub it so that when it is called a mock value is returned.</p>\n\n<pre><code>when(somethingAwesomeIsDoneHere(something)).thenReturn(retValue)\n</code></pre>\n\n<p>Even if it could be done with PowerMock please do let me know. </p>\n\n<p>PS: I am using Kotlin 1.0.1-2 for my project.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 3, "last_activity_date": 1464592538, "creation_date": 1464592538, "answer_id": 37519705, "question_id": 37519018, "link": "https://stackoverflow.com/questions/37519018/kotlin-extension-properties-do-not-work-in-kotlin-script/37519705#37519705", "title": "Kotlin extension properties do not work in Kotlin script", "body": "<p>Kotlin scripts just wrap code in main function. And extension properties doesn't work when defined inside functions. I think this is bug, and you can submit it here: <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow\">https://youtrack.jetbrains.com/issues/KT</a>.</p>\n"}], "owner": {"reputation": 43, "user_id": 5776607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8123560520d98183e1f14f616ee45147?s=128&d=identicon&r=PG&f=1", "display_name": "ryo", "link": "https://stackoverflow.com/users/5776607/ryo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 37519705, "answer_count": 1, "score": 4, "last_activity_date": 1464651606, "creation_date": 1464589902, "last_edit_date": 1464651606, "question_id": 37519018, "link": "https://stackoverflow.com/questions/37519018/kotlin-extension-properties-do-not-work-in-kotlin-script", "title": "Kotlin extension properties do not work in Kotlin script", "body": "<pre><code>var StringBuilder.lastChar: Char\n    get() = get(length - 1)\n    set(value: Char) {\n        this.setCharAt(length - 1, value)\n    }\n\n\nval sb = StringBuilder(\"Kotlin?\")\nsb.lastChar = '!'\nprintln(sb)\n</code></pre>\n\n<p>When I run this code with <code>kotlinc -script</code>, the compiler throws:</p>\n\n<pre><code>extensions.kts:3:14: error: unexpected type specification\n    set(value: Char) {\n</code></pre>\n\n<p>However, this code works without problems when compiled. \nSo, does it mean extension properties cannot work in kotlin script mode?</p>\n"}, {"tags": ["database", "jdbc", "kotlin"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1464560680, "post_id": 37515502, "comment_id": 62524498, "body": "Not without any code, no."}, {"owner": {"reputation": 3, "user_id": 6383736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d8ce5dfdbed90f6d65424e5267a4e5?s=128&d=identicon&r=PG&f=1", "display_name": "Vineet", "link": "https://stackoverflow.com/users/6383736/vineet"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1464560810, "post_id": 37515502, "comment_id": 62524521, "body": "import java.sql.* object Kotlin {   @JvmStatic fun main(args:Array&lt;String&gt;) {     val conn:Connection = null!!     val url = &quot;jdbc:mysql://localhost:3306/&quot;     val dbName = &quot;db-01&quot;     val driver = &quot;com.mysql.jdbc.Driver&quot;     try     {    Class.forName(driver).newInstance()       conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost/student&quot;&zwnj;&#8203;)       println(&quot;Connected to the database&quot;)       conn.close()       println(&quot;Disconnected from database&quot;)     }     catch (e:Exception) {       e.printStackTrace()     }   } }"}], "answers": [{"tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": true, "score": 2, "last_activity_date": 1464561067, "creation_date": 1464561067, "answer_id": 37515585, "question_id": 37515502, "link": "https://stackoverflow.com/questions/37515502/kotlin-database-connectivity-error/37515585#37515585", "title": "Kotlin database connectivity error", "body": "<p><code>val conn: Connection = null!!</code></p>\n\n<p>The <code>!!</code> 'casts' a nullable type to a non-null type, if the value is not <code>null</code>. If it is <code>null</code>, it throws a <code>NullPointerException</code>.</p>\n\n<p>Thus, executing <code>null!!</code> results in a <code>NullPointerException</code>.<br>\nInstead, use a <code>lateinit var</code>, or make the <code>Connection</code> nullable.</p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1464572812, "creation_date": 1464572812, "answer_id": 37516638, "question_id": 37515502, "link": "https://stackoverflow.com/questions/37515502/kotlin-database-connectivity-error/37516638#37516638", "title": "Kotlin database connectivity error", "body": "<p>It is perfectly fine not to initialize local <code>val</code>, if you're going to initialize it later:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val conn: Connection\n    // ... some code ...\n    conn = DriverManager.getConnection(\"jdbc:mysql://localhost/student\")\n}\n</code></pre>\n\n<p>And if you do not need the connection outside of <code>try</code> block, you can declare it and initialize it at the same line:</p>\n\n<pre><code>try {\n    //...\n    val conn = DriverManager.getConnection(\"jdbc:mysql://localhost/student\")\n    //...\n    conn.close()\n} catch (e: Exception) {\n    e.printStackTrace()\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6383736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d8ce5dfdbed90f6d65424e5267a4e5?s=128&d=identicon&r=PG&f=1", "display_name": "Vineet", "link": "https://stackoverflow.com/users/6383736/vineet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2487, "favorite_count": 0, "accepted_answer_id": 37515585, "answer_count": 2, "score": -2, "last_activity_date": 1464572812, "creation_date": 1464560302, "last_edit_date": 1464560883, "question_id": 37515502, "link": "https://stackoverflow.com/questions/37515502/kotlin-database-connectivity-error", "title": "Kotlin database connectivity error", "body": "<p>Exception in thread \"main\" kotlin.KotlinNullPointerException    at Kotlin.main(DB.kt:4)</p>\n\n<p>can anyone explain me what is this and what should i do to handle this exception?</p>\n\n<pre><code>object Kotlin {\n    @JvmStatic fun main(args: Array&lt;String&gt;) {\n        val conn: Connection = null!!\n        val url = \"jdbc:mysql://localhost:3306/\"\n        val dbName = \"db-01\"\n        val driver = \"com.mysql.jdbc.Driver\"\n        try {\n            Class.forName(driver).newInstance()\n            conn = DriverManager.getConnection(\"jdbc:mysql://localhost/student\")\n            println(\"Connected to the database\")\n            conn.close()\n            println(\"Disconnected from database\")\n        } catch (e: Exception) {\n            e.printStackTrace()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "nullpointerexception", "kotlin", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 929, "user_id": 4521117, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/pb4mp.jpg?s=128&g=1", "display_name": "baldraider", "link": "https://stackoverflow.com/users/4521117/baldraider"}, "edited": false, "score": 0, "creation_date": 1464549107, "post_id": 37513822, "comment_id": 62521148, "body": "So how can I initialize my variable??"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 16, "last_activity_date": 1503684026, "last_edit_date": 1503684026, "creation_date": 1464548881, "answer_id": 37513822, "question_id": 37513787, "link": "https://stackoverflow.com/questions/37513787/how-to-initialize-widgets-in-android-using-kotlin/37513822#37513822", "title": "How to initialize widgets in android using kotlin", "body": "<p>The <code>!!</code> operators checks if the receiver is <code>null</code> and if it is throws <code>KotlinNullPointerException</code>. So <code>null!!</code> will always throw an exception.</p>\n\n<p>You can achieve what you want in the following ways:</p>\n\n<ol>\n<li><p>Set a type of the property to <code>Button?</code>. In this case when accessing button's methods you will have to use either <code>?</code> or <code>!!</code>.</p>\n\n<pre><code>var add: Button? = null\n// Initialize it somewhere.\n\nadd?.setText(\"Text\") // Calls setText if Add != null\nadd!!.setText(\"Text\") // Throws an exception if Add == null\n</code></pre></li>\n<li><p>Make the button a <code>lateinit</code> property.</p>\n\n<pre><code>lateinit var add: Button\n</code></pre></li>\n<li><p>Make the button a <code>notNull</code> delegate property.</p>\n\n<pre><code>var add: Button by Delegates.notNull()\n</code></pre></li>\n</ol>\n\n<p>In the last two cases you cannot check if the button is <code>null</code>. If you need <code>null</code> comparison to work for the variable use the first approach.</p>\n\n<hr>\n\n<p>There're another approaches which I'm not going to describe in details in this answer. The first on is using <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow noreferrer\">Kotlin Android Extensions</a>. That's a compiler plugin that generates synthetic properties for your views so you don't need to call <code>findViewById()</code> and can access views with using generated properties.</p>\n\n<p>The second way is to create your own delegate that will call <code>findViewById()</code> for you. It may look something like this:</p>\n\n<pre><code>val add: Button by bindView(R.id.add)\n</code></pre>\n\n<p>You can find an example of such delegate in the <a href=\"https://github.com/JakeWharton/kotterknife/\" rel=\"nofollow noreferrer\">KotterKnife</a> project.</p>\n"}, {"tags": [], "owner": {"reputation": 10206, "user_id": 865866, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QXzpS.jpg?s=128&g=1", "display_name": "0leg", "link": "https://stackoverflow.com/users/865866/0leg"}, "is_accepted": false, "score": 3, "last_activity_date": 1496047316, "creation_date": 1496047316, "answer_id": 44238118, "question_id": 37513787, "link": "https://stackoverflow.com/questions/37513787/how-to-initialize-widgets-in-android-using-kotlin/44238118#44238118", "title": "How to initialize widgets in android using kotlin", "body": "<p>You can use Kotlin to write helper <code>bind</code> function:</p>\n\n<pre><code>fun &lt;T : View&gt; Activity.bind(@IdRes res : Int) : Lazy&lt;T&gt; {\n    @Suppress(\"UNCHECKED_CAST\")    \n    return lazy { findViewById(res) as T }\n}\n</code></pre>\n\n<p>Then you can simply define your variable once using <code>val</code> (which equals to <code>final</code> in Java):</p>\n\n<pre><code>class MyActivity : AppCompatActivity() {\n    private val button: Button by bind(R.id.button)\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class MyActivity : AppCompatActivity() {\n    private val button by bind&lt;Button&gt;(R.id.button)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11211, "user_id": 983391, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/WIO1w.jpg?s=128&g=1", "display_name": "Priyank Patel", "link": "https://stackoverflow.com/users/983391/priyank-patel"}, "is_accepted": false, "score": 4, "last_activity_date": 1509532344, "last_edit_date": 1509532344, "creation_date": 1509529939, "answer_id": 47052117, "question_id": 37513787, "link": "https://stackoverflow.com/questions/37513787/how-to-initialize-widgets-in-android-using-kotlin/47052117#47052117", "title": "How to initialize widgets in android using kotlin", "body": "<p>You can initialize views in kotlin by using any one of below methods:</p>\n\n<p><strong>1. Nullable vars</strong></p>\n\n<pre><code>private var textView: TextView? = null\n\u2026\ntextView = findViewById(R.id.text_view) as TextView\n</code></pre>\n\n<p><strong>2. lateinit</strong></p>\n\n<pre><code>private lateinit var textView: TextView\n\u2026\ntextView = findViewById(R.id.text_view) as TextView\n</code></pre>\n\n<p><strong>3. Delegates.notNull()</strong></p>\n\n<pre><code>private var textView: TextView by Delegates.notNull()\n\u2026\ntextView = findViewById(R.id.text_view) as TextView\n</code></pre>\n\n<p><strong>4. Lazy properties</strong></p>\n\n<pre><code>private val textView: TextView by lazy { findViewById(R.id.text_view) as TextView }\n</code></pre>\n\n<p><strong>5. Butterknife</strong></p>\n\n<pre><code>@BindView(R2.id.text_view)\ninternal lateinit var textView: TextView\n</code></pre>\n\n<p><strong>6. Kotterknife</strong></p>\n\n<pre><code>private val textView: TextView by bindView(R.id.text_view)\n</code></pre>\n\n<p><strong>7. Kotlin Android Extensions</strong></p>\n\n<p>No code sample, just get the correct imports added and start using the synthetic generated properties like below.</p>\n\n<pre><code>import kotlinx.android.synthetic.main.&lt;layout&gt;.*\n</code></pre>\n\n<p><strong>8. Android data binding</strong></p>\n\n<pre><code>binding = FragmentLayoutBinding.inflate(inflater, container, false)\n...\nbinding.textView.text = \"Hello\"\n</code></pre>\n\n<p>You can checkout pro/cons of each method at <a href=\"https://discuss.kotlinlang.org/t/pros-cons-of-android-view-access-strategies/3160\" rel=\"nofollow noreferrer\">Pros/cons of Android view access strategies</a></p>\n"}], "owner": {"reputation": 929, "user_id": 4521117, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/pb4mp.jpg?s=128&g=1", "display_name": "baldraider", "link": "https://stackoverflow.com/users/4521117/baldraider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7623, "favorite_count": 1, "accepted_answer_id": 37513822, "answer_count": 3, "score": 3, "last_activity_date": 1509532344, "creation_date": 1464548727, "last_edit_date": 1464582673, "question_id": 37513787, "link": "https://stackoverflow.com/questions/37513787/how-to-initialize-widgets-in-android-using-kotlin", "title": "How to initialize widgets in android using kotlin", "body": "<p>I have started to learn using kotlin language in android and getting problem while initialising my button variable ,because at the time of define my variable it ask to give some initial value when I initialize with null value and bind the variable in oncreate function its gives </p>\n\n<blockquote>\n  <p>kotlin.KotlinNullPointerException</p>\n</blockquote>\n\n<p>here is my code</p>\n\n<pre><code>class AddsFragment : Fragment() {\n\n    var Add: Button = null!!\n\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val Rootview = inflater!!.inflate(R.layout.clubsfragment, null, false)\n        Add = Rootview.findViewById(R.id.add) as Button\n        return Rootview\n    }\n}\n</code></pre>\n"}, {"tags": ["intellij-idea", "gradle", "kotlin", "jcenter"], "comments": [{"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1464356188, "post_id": 37483990, "comment_id": 62466178, "body": "<a href=\"https://github.com/MichaelRocks/bimap/blob/master/build.gradle\" rel=\"nofollow noreferrer\">github.com/MichaelRocks/bimap/blob/master/build.gradle</a>"}], "answers": [{"tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 3, "last_activity_date": 1464356509, "creation_date": 1464356509, "answer_id": 37485035, "question_id": 37483990, "link": "https://stackoverflow.com/questions/37483990/publish-kotlin-library-not-android-to-jcenter/37485035#37485035", "title": "Publish kotlin library (Not Android) to jCenter", "body": "<p>Publishing Kotlin libraries to jCenter is absolutely the same as for JAva libraries.</p>\n\n<pre><code>buildscript {\n  ext.kotlinVersion = '1.0.2'\n\n  repositories {\n    mavenCentral()\n  }\n\n  dependencies {\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion\"\n  }\n}\n\nplugins {\n  id \"com.jfrog.bintray\" version \"1.6\"\n}\n\napply plugin: 'kotlin'\napply plugin: 'maven-publish'\n\ngroup '&lt;groupId&gt;'\nversion '&lt;version&gt;'\nsourceCompatibility = 1.6\n\nrepositories {\n  mavenCentral()\n}\n\ndependencies {\n  compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion\"\n}\n\nbintray {\n  user = '&lt;bintray user name&gt;'\n  key = '&lt;bintray API key&gt;'\n  publications = ['mavenJava']\n\n  pkg {\n    repo = '&lt;repository name on bintray&gt;'\n    name = '&lt;artifactId&gt;'\n\n    version {\n      name = project.version\n      released = new Date()\n      vcsTag = \"v${project.version}\"\n    }\n  }\n}\n\ntask sourcesJar(type: Jar, dependsOn: project.classes) {\n  from sourceSets.main.allSource\n}\n\ntask javadocJar(type: Jar, dependsOn: project.javadoc) {\n  from javadoc.destinationDir\n}\n\nartifacts {\n  archives sourcesJar, javadocJar\n}\n\npublishing {\n  publications {\n    mavenJava(MavenPublication) {\n      artifactId project.bintray.pkg.name\n      from components.java\n\n      artifact sourcesJar {\n        classifier = 'sources'\n      }\n      artifact javadocJar {\n        classifier = 'javadoc'\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Create a repository on bintray and then just call <code>./gradlew bintrayUpload</code>. If you don't ask the bintray plugin to publish an uploaded dependency then you have to publish it manually from your bintray account.</p>\n\n<p>When the dependency is published you can link it to <code>jCenter</code> from your account. After it's published on <code>jCenter</code> you can use it as a regular dependency from an Android project.</p>\n"}, {"tags": [], "owner": {"reputation": 1128, "user_id": 4710549, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-4wgiZ21V-s4/AAAAAAAAAAI/AAAAAAAAADI/q8hYvoEldtU/photo.jpg?sz=128", "display_name": "\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440 \u0428\u0438\u0440\u043e\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/4710549/%d0%92%d0%bb%d0%b0%d0%b4%d0%b8%d0%bc%d0%b8%d1%80-%d0%a8%d0%b8%d1%80%d0%be%d0%ba%d0%be%d0%b2"}, "is_accepted": false, "score": 1, "last_activity_date": 1464860112, "creation_date": 1464860112, "answer_id": 37587975, "question_id": 37483990, "link": "https://stackoverflow.com/questions/37483990/publish-kotlin-library-not-android-to-jcenter/37587975#37587975", "title": "Publish kotlin library (Not Android) to jCenter", "body": "<p>Michael's answer is correct. But if you execute bintrayUpload, the kotlin dependency will be included to the .pom file. This lead to adding kotlin libs twice when you include your lib in gradle-project. This lead to DuplicateFileException. I don't know what's wrong. Maybe I did some stupid mistake. But if this is your case to, you can execute gradlew build with Michael's build.gradle for generating .jar and source.jar. Then you can create your own .pom file with no dependencies and deploy 3 files(jar, source.jar and .pom) to bintray manually. Then link library to jCenter.</p>\n\n<p>For example:</p>\n\n<p>Generated .pom with ./gradlew bintrayUpload:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;ru.livemaster&lt;/groupId&gt;\n  &lt;artifactId&gt;LongToWords&lt;/artifactId&gt;\n  &lt;version&gt;0.1&lt;/version&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n      &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n      &lt;version&gt;1.0.2&lt;/version&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Your own .pom for deploying without kotlin-dependencies:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;ru.livemaster&lt;/groupId&gt;\n  &lt;artifactId&gt;LongToWords&lt;/artifactId&gt;\n  &lt;version&gt;0.1&lt;/version&gt;\n&lt;/project&gt;\n</code></pre>\n"}], "owner": {"reputation": 1128, "user_id": 4710549, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-4wgiZ21V-s4/AAAAAAAAAAI/AAAAAAAAADI/q8hYvoEldtU/photo.jpg?sz=128", "display_name": "\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440 \u0428\u0438\u0440\u043e\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/4710549/%d0%92%d0%bb%d0%b0%d0%b4%d0%b8%d0%bc%d0%b8%d1%80-%d0%a8%d0%b8%d1%80%d0%be%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1170, "favorite_count": 3, "accepted_answer_id": 37485035, "answer_count": 2, "score": 4, "last_activity_date": 1464860112, "creation_date": 1464353287, "last_edit_date": 1464356616, "question_id": 37483990, "link": "https://stackoverflow.com/questions/37483990/publish-kotlin-library-not-android-to-jcenter", "title": "Publish kotlin library (Not Android) to jCenter", "body": "<p>I have Intellij Idea 2016.1 gradle-application(Not Android) written in Kotlin. I need to place it in jCenter and add to the Android-application as a dependency. I can not find any information about it. All references refer to the Android project. I have no concept of how this can be done. Looking for detailed instructions</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 7773, "user_id": 1025935, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/NPYjX.jpg?s=128&g=1", "display_name": "UmAnusorn", "link": "https://stackoverflow.com/users/1025935/umanusorn"}, "edited": false, "score": 0, "creation_date": 1481623060, "post_id": 37485356, "comment_id": 69440149, "body": "how about   internal var x;? is it make var static?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 7773, "user_id": 1025935, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/NPYjX.jpg?s=128&g=1", "display_name": "UmAnusorn", "link": "https://stackoverflow.com/users/1025935/umanusorn"}, "edited": false, "score": 0, "creation_date": 1481626649, "post_id": 37485356, "comment_id": 69442452, "body": "@umitems, <code>internal</code> is only a visibility modifier, should not make much difference in the bytecode with a normal public <code>var</code>."}, {"owner": {"reputation": 7773, "user_id": 1025935, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/NPYjX.jpg?s=128&g=1", "display_name": "UmAnusorn", "link": "https://stackoverflow.com/users/1025935/umanusorn"}, "edited": false, "score": 0, "creation_date": 1481627060, "post_id": 37485356, "comment_id": 69442707, "body": "Thank you for your answer, I see. I just tried to convert public static int x in java file to Kotlin file then I got internal var x instead."}, {"owner": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "edited": false, "score": 0, "creation_date": 1486498216, "post_id": 37485356, "comment_id": 71368354, "body": "Does it implies any difference in terms of performance and bytecode size?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "edited": false, "score": 2, "creation_date": 1486500121, "post_id": 37485356, "comment_id": 71369405, "body": "@LouisCAD, <code>const val</code> and <code>@JvmField</code> are more efficient than simple <code>val</code>, but this is mostly because of the getter calls, while JVM is quite good at inlining functions and especially getters at runtime. I guess in a long run the performance difference should be negligible (for a non-critical part of the code). As to the bytecode size, the second option produces smaller bytecode as well, but your are unlikely to save much optimizing this anyway."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 26, "last_activity_date": 1464702952, "last_edit_date": 1495540464, "creation_date": 1464357391, "answer_id": 37485356, "question_id": 37482378, "link": "https://stackoverflow.com/questions/37482378/static-data-in-kotlin/37485356#37485356", "title": "Static data in Kotlin", "body": "<p>You can use <a href=\"https://stackoverflow.com/questions/35538049/kotlin-bytecode\">Kotlin bytecode viewer</a> to find out what these options are compiled to.</p>\n\n<p>With Kotlin 1.0.2 the compiled bytecode shows that</p>\n\n<ol>\n<li><p><code>val</code> property in <code>object</code> or <code>companion object</code> is compiled into a <code>private static final</code> field inside the class:</p>\n\n<pre><code> // access flags 0x1A\n private final static I FILES_TO_DOWNLOAD = 100\n</code></pre>\n\n<p>and a getter, which is called when referring to the property: </p>\n\n<pre><code> // access flags 0x1019\n public final static synthetic access$getFILES_TO_DOWNLOAD$cp()I\n</code></pre>\n\n<p>From Java, the getter can be called as <code>DefaultValues.INSTANCE.getFILES_TO_DOWNLOAD()</code> or <code>DefaultValues.Companion.getFILES_TO_DOWNLOAD()</code> respectively.</p></li>\n<li><p>Non-<code>const</code> top level property is compiled to the same to <em>(1)</em> with only difference that the field and getter are placed inside <code>FilenameKt</code> class now. </p>\n\n<p>But top level <code>const val</code> is compiled into a <code>public static final</code> field:</p>\n\n<pre><code>// access flags 0x19\npublic final static I DEFAULT_FILES_TO_DOWNLOAD = 100\n</code></pre>\n\n<p>The same public static final field will be produced when a <code>const val</code> is declared inside an object. Also, you can achieve the same resulting bytecode if you add <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-field/\" rel=\"noreferrer\"><code>@JvmField</code></a> annotation to the properties declared in <em>(1)</em>.</p></li>\n</ol>\n\n<hr>\n\n<p>Concluding that, you can define <code>public static final</code> field using <code>const</code> or <code>@JvmField</code> either in an <code>object</code> or at top level.</p>\n"}], "owner": {"reputation": 2626, "user_id": 4495175, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/zycJD.jpg?s=128&g=1", "display_name": "Letfar", "link": "https://stackoverflow.com/users/4495175/letfar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11715, "favorite_count": 2, "accepted_answer_id": 37485356, "answer_count": 1, "score": 27, "last_activity_date": 1464702952, "creation_date": 1464348656, "last_edit_date": 1464357832, "question_id": 37482378, "link": "https://stackoverflow.com/questions/37482378/static-data-in-kotlin", "title": "Static data in Kotlin", "body": "<p>Please tell me, is there any difference (in terms of Java) in this examples:</p>\n\n<ol>\n<li><p><sup></sup></p>\n\n<pre><code>object DefaultValues {\n    val FILES_TO_DOWNLOAD = 100\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class DefaultValues {\n    companion object {\n        val FILES_TO_DOWNLOAD = 100\n    }\n}\n</code></pre></li>\n<li><p>Without class or object wrapper:</p>\n\n<pre><code>const val DEFAULT_FILES_TO_DOWNLOAD = 100\n</code></pre>\n\n<p>and</p>\n\n<pre><code>val DEFAULT_FILES_TO_DOWNLOAD = 100\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>What is the true way to define?:</p>\n\n<pre><code>public static final int FILES_TO_DOWNLOAD = 100\n</code></pre>\n"}, {"tags": ["java", "android", "android-studio", "ide", "kotlin"], "comments": [{"owner": {"reputation": 18638, "user_id": 981715, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6d6386f73f30139271b8f38facf57776?s=128&d=identicon&r=PG", "display_name": "Eugen Martynov", "link": "https://stackoverflow.com/users/981715/eugen-martynov"}, "edited": false, "score": 0, "creation_date": 1464346583, "post_id": 37481438, "comment_id": 62459919, "body": "I&#39;m not big expert, do you use instant run?"}, {"owner": {"reputation": 28377, "user_id": 1957401, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/o4mCb.jpg?s=128&g=1", "display_name": "AndroidMechanic - Viral Patel", "link": "https://stackoverflow.com/users/1957401/androidmechanic-viral-patel"}, "reply_to_user": {"reputation": 18638, "user_id": 981715, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6d6386f73f30139271b8f38facf57776?s=128&d=identicon&r=PG", "display_name": "Eugen Martynov", "link": "https://stackoverflow.com/users/981715/eugen-martynov"}, "edited": false, "score": 0, "creation_date": 1464346616, "post_id": 37481438, "comment_id": 62459935, "body": "yes all the time, but how can that be a problem in this situation?"}, {"owner": {"reputation": 18638, "user_id": 981715, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6d6386f73f30139271b8f38facf57776?s=128&d=identicon&r=PG", "display_name": "Eugen Martynov", "link": "https://stackoverflow.com/users/981715/eugen-martynov"}, "edited": false, "score": 0, "creation_date": 1464346673, "post_id": 37481438, "comment_id": 62459981, "body": "Did you also apply kotlin plugin in gradle?"}, {"owner": {"reputation": 28377, "user_id": 1957401, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/o4mCb.jpg?s=128&g=1", "display_name": "AndroidMechanic - Viral Patel", "link": "https://stackoverflow.com/users/1957401/androidmechanic-viral-patel"}, "reply_to_user": {"reputation": 18638, "user_id": 981715, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6d6386f73f30139271b8f38facf57776?s=128&d=identicon&r=PG", "display_name": "Eugen Martynov", "link": "https://stackoverflow.com/users/981715/eugen-martynov"}, "edited": false, "score": 0, "creation_date": 1464346716, "post_id": 37481438, "comment_id": 62459998, "body": "yes <code>apply plugin: &#39;kotlin-android&#39; apply plugin: &#39;kotlin-android-extensions&#39;</code>"}, {"owner": {"reputation": 18638, "user_id": 981715, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6d6386f73f30139271b8f38facf57776?s=128&d=identicon&r=PG", "display_name": "Eugen Martynov", "link": "https://stackoverflow.com/users/981715/eugen-martynov"}, "edited": false, "score": 0, "creation_date": 1464346768, "post_id": 37481438, "comment_id": 62460041, "body": "Then I don&#39;t know the reason and would ask in kotlin slack or jetbrains issue tracker"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 7, "last_activity_date": 1464509436, "creation_date": 1464509436, "answer_id": 37507634, "question_id": 37481438, "link": "https://stackoverflow.com/questions/37481438/android-studio-does-not-resolve-classes-written-in-kotlin-kt-in-the-ide-but-c/37507634#37507634", "title": "Android studio does not resolve classes written in Kotlin (.kt) in the IDE but compiles fine", "body": "<p>To install the Kotlin plugin, open the Settings dialog, select the \"Plugins\" node, press the \"Install JetBrains plugin\" button and select \"Kotlin\" from the list. Then restart the IDE.</p>\n"}], "owner": {"reputation": 28377, "user_id": 1957401, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/o4mCb.jpg?s=128&g=1", "display_name": "AndroidMechanic - Viral Patel", "link": "https://stackoverflow.com/users/1957401/androidmechanic-viral-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2490, "favorite_count": 3, "accepted_answer_id": 37507634, "answer_count": 1, "score": 3, "last_activity_date": 1464509436, "creation_date": 1464345934, "last_edit_date": 1464346884, "question_id": 37481438, "link": "https://stackoverflow.com/questions/37481438/android-studio-does-not-resolve-classes-written-in-kotlin-kt-in-the-ide-but-c", "title": "Android studio does not resolve classes written in Kotlin (.kt) in the IDE but compiles fine", "body": "<p>I'm starting to work on an existing project which uses standard java and partially Kotlin for some classes.</p>\n\n<p><strong>PROBLEM:</strong> </p>\n\n<p>The projects <strong><em>compiles and runs fine</em></strong>, but when viewing the code in Android Studio, the <strong><em>classes written in kotlin show unresolved in the ide</em></strong>.</p>\n\n<hr>\n\n<p><strong>UserConfigActivity.kt</strong> (Class written in Kotlin)</p>\n\n<pre><code>class UserConfigActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_user_config)\n        setSupportActionBar(toolbar)\n</code></pre>\n\n<hr>\n\n<p><strong>Unresolved when referenced/used in standard java class</strong> (although compiles and runs fine):</p>\n\n<p><a href=\"https://i.stack.imgur.com/43tOc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/43tOc.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>When opening the <code>.kt</code> files directly in android studio it prompts that a plugin is found as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/KhEAz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KhEAz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But when i click on <code>Install Plugins</code>, nothing happens (no install or change in situation). Prompt reappears next time i open another <code>.kt</code> file.</p>\n\n<hr>\n\n<p><strong>QUESTIONS:</strong></p>\n\n<ol>\n<li>How to resolve the <code>Cannot resolve symbol</code> for classes written in Kotlin?</li>\n<li>How to install the plugin which is offered in prompt but does not install when clicking <code>Install Plugins</code>?</li>\n</ol>\n\n<p>I'm on <code>Android Studio 2.1.1</code>.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1608, "user_id": 5031114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nJzUn.jpg?s=128&g=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/5031114/vicky"}, "edited": false, "score": 0, "creation_date": 1512803162, "post_id": 37481116, "comment_id": 82412935, "body": "Oh, now everything is a property."}], "tags": [], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "is_accepted": false, "score": 6, "last_activity_date": 1464345016, "creation_date": 1464345016, "answer_id": 37481116, "question_id": 37481017, "link": "https://stackoverflow.com/questions/37481017/kotlin-view-setenabled-function-missing/37481116#37481116", "title": "Kotlin View setEnabled function missing?", "body": "<p>Apparently we now set it using</p>\n\n<pre><code>button.isEnabled = true\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 1, "creation_date": 1464346336, "post_id": 37481421, "comment_id": 62459769, "body": "Excellent explanation!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 12, "last_activity_date": 1464348641, "last_edit_date": 1464348641, "creation_date": 1464345875, "answer_id": 37481421, "question_id": 37481017, "link": "https://stackoverflow.com/questions/37481017/kotlin-view-setenabled-function-missing/37481421#37481421", "title": "Kotlin View setEnabled function missing?", "body": "<p>As said <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#getters-and-setters\" rel=\"noreferrer\">in the reference</a>, Java getters and pairs of getter and setter are represented as properties in Kotlin, using the following logic:</p>\n\n<ul>\n<li><code>T getSomething()</code> (+ <code>void setSomething(T)</code>) \u2192 <code>something: T</code></li>\n<li><code>T isSomething()</code> (+ <code>void setSomething(T)</code>) \u2192 <code>isSomething: T</code></li>\n</ul>\n\n<p>If there is a setter, a <code>var</code>-property is seen from Kotlin, otherwise it's an unmodifiable <code>val</code>.</p>\n\n<p>Instead of <code>setEnabled(value)</code> just use <code>isEnabled = value</code>.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4775, "favorite_count": 1, "accepted_answer_id": 37481421, "answer_count": 2, "score": 4, "last_activity_date": 1487808644, "creation_date": 1464344706, "last_edit_date": 1487808644, "question_id": 37481017, "link": "https://stackoverflow.com/questions/37481017/kotlin-view-setenabled-function-missing", "title": "Kotlin View setEnabled function missing?", "body": "<p>In <strong>Kotlin</strong>, when using <code>kotlinx.android.synthetic</code> to access the <code>View</code> (e.g. <code>Button</code>), the <code>setEnabled()</code> function is missing? The <code>isEnabled()</code> function is still there.</p>\n\n<p>How could I <code>setEnabled()</code>?</p>\n"}, {"tags": ["gradle", "extension-methods", "kotlin"], "comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1592942584, "post_id": 37480287, "comment_id": 110604775, "body": "The magical <code>clean</code>/<code>build</code> solved this issue for me"}], "answers": [{"comments": [{"owner": {"reputation": 1578, "user_id": 357437, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f91a7ac411059abb04af17795009fad9?s=128&d=identicon&r=PG", "display_name": "sedovav", "link": "https://stackoverflow.com/users/357437/sedovav"}, "edited": false, "score": 0, "creation_date": 1464603538, "post_id": 37509835, "comment_id": 62538191, "body": "Still have no success with it. Everything compiles fine if the extension is in the client subproject and then breaks when I move it in the client subproject. Both subprojects are included in the settings.gradle. Upd: but everything is ok in your setup - I should check if there are any diffs."}, {"owner": {"reputation": 1578, "user_id": 357437, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f91a7ac411059abb04af17795009fad9?s=128&d=identicon&r=PG", "display_name": "sedovav", "link": "https://stackoverflow.com/users/357437/sedovav"}, "edited": false, "score": 0, "creation_date": 1464608607, "post_id": 37509835, "comment_id": 62541187, "body": "The problem is in the structure of the project. I have an intermediate folder (say &quot;demo&quot;) in the project and the common and client folder in it. Updated the question to reflect that fact."}], "tags": [], "owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "is_accepted": false, "score": 1, "last_activity_date": 1464524389, "creation_date": 1464524389, "answer_id": 37509835, "question_id": 37480287, "link": "https://stackoverflow.com/questions/37480287/unresolved-reference-of-a-kotlin-extension-function-in-the-gradle-build/37509835#37509835", "title": "Unresolved reference of a Kotlin extension function in the Gradle build", "body": "<p>Check if you included both projects in root <code>settings.gradle</code>.</p>\n\n<p>Check <a href=\"https://gist.github.com/madhead/0d17d0d749834bc521657cff33df628b\" rel=\"nofollow\">this Gist</a> with minimal working setup.</p>\n\n<p><strong>settings.gradle</strong>:</p>\n\n<pre><code>rootProject.name = 'demo'\n\ninclude 'client'\ninclude 'common'\n</code></pre>\n\n<p><strong>build.gradle</strong>:</p>\n\n<pre><code>buildscript {\n    repositories {\n        jcenter()\n    }\n\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion\"\n    }\n}\n\nsubprojects {\n    apply plugin: 'kotlin'\n\n    repositories {\n        jcenter()\n        maven {\n            url \"http://repository.jetbrains.com/all\"\n        }\n    }\n\n    dependencies {\n        compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion\"\n    }\n}\n</code></pre>\n\n<p><strong>common/src/main/kotlin/by/dev/madhead/demo/common/Funktions.kt</strong></p>\n\n<pre><code>package by.dev.madhead.demo.common\n\nfun String.revert(): String {\n    return this.reversed()\n}\n</code></pre>\n\n<p><strong>client/build.gradle</strong></p>\n\n<pre><code>dependencies {\n    compile project(':common')\n}\n</code></pre>\n\n<p><strong>client/src/main/kotlin/by/dev/madhead/demo/client/App.kt</strong></p>\n\n<pre><code>package by.dev.madhead.demo.client\n\nimport by.dev.madhead.demo.common.revert\n\nfun main(args: Array&lt;String&gt;) {\n    println(\"Hello\".revert())\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1578, "user_id": 357437, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f91a7ac411059abb04af17795009fad9?s=128&d=identicon&r=PG", "display_name": "sedovav", "link": "https://stackoverflow.com/users/357437/sedovav"}, "is_accepted": true, "score": 2, "last_activity_date": 1464609628, "creation_date": 1464609628, "answer_id": 37525170, "question_id": 37480287, "link": "https://stackoverflow.com/questions/37480287/unresolved-reference-of-a-kotlin-extension-function-in-the-gradle-build/37525170#37525170", "title": "Unresolved reference of a Kotlin extension function in the Gradle build", "body": "<p>Ok, the problem was in the wrong subproject includes in the gradle.settings. Should be </p>\n\n<pre><code>include 'demo:common'\ninclude 'demo:client'\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>include 'demo/common'\ninclude 'demo/client'\n</code></pre>\n\n<p>and then for the dependency <code>compile project(\":demo:common\")</code>.</p>\n"}], "owner": {"reputation": 1578, "user_id": 357437, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f91a7ac411059abb04af17795009fad9?s=128&d=identicon&r=PG", "display_name": "sedovav", "link": "https://stackoverflow.com/users/357437/sedovav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3118, "favorite_count": 2, "accepted_answer_id": 37525170, "answer_count": 2, "score": 2, "last_activity_date": 1464609628, "creation_date": 1464342641, "last_edit_date": 1464608926, "question_id": 37480287, "link": "https://stackoverflow.com/questions/37480287/unresolved-reference-of-a-kotlin-extension-function-in-the-gradle-build", "title": "Unresolved reference of a Kotlin extension function in the Gradle build", "body": "<p>I have multi project Gradle build with all the code written in Kotlin. There are two projects in it: common and client. Subprojects are in the intermediate folder, say \"demo\". So the folder structure is:</p>\n\n<pre><code>project\n  demo\n    client\n      build.gradle\n    common\n      build.gradle\n  build.gradle\n  gradle.properties\n  settings.gradle\n</code></pre>\n\n<p>The settings.gradle:</p>\n\n<pre><code>rootProject.name = 'demo'\n\ninclude 'demo/client'\ninclude 'demo/common'\n</code></pre>\n\n<p>Client dependes on the common project <code>compile project(\":demo/common\")</code>. And there is an extension function in the common project:</p>\n\n<pre><code>fun &lt;T&gt; List&lt;Future&lt;T&gt;&gt;.getAll(): Long {\n    var count = 0L\n    this.forEach {\n        it.get()\n        count++\n    }\n    return count\n}\n</code></pre>\n\n<p>If I try to use it in the client project I get <code>Unresolved reference: getAll</code> exception at the compilation time. The usage:</p>\n\n<pre><code>...\nimport org.sandbox.imdg.hazelcast.common.utils.getAll\n\nclass CassLoader {\n\n    fun loadCalcData(): Long {\n        ...\n        val futures: List&lt;Future&lt;CalcData&gt;&gt; = items.map { map.putAsync(it.getKey(), it) }\n        return futures.getAll()\n    }\n}\n</code></pre>\n\n<p>At the same time everything compile fine if I put the <code>getAll</code> declaration in the client project. I'm pretty sure that the import of the function is correct but at the same time I had a little experience with Gradle so might miss something.</p>\n\n<ul>\n<li>Build: <code>gradlew clean build</code></li>\n<li>Kotlin: 1.0.2 </li>\n<li>Gradle: 2.9</li>\n</ul>\n\n<p>UPD: The problem is in the folder structure (or may be I'm declaring dependencies wrong...) - if I remove intermediate folder demo everytning is ok.</p>\n"}, {"tags": ["maps", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1464282363, "post_id": 37465271, "comment_id": 62432766, "body": "By the way, anyone knows why there isn&#39;t a <code>operator fun minus(key: K)</code> method on Kotlin maps?"}, {"owner": {"reputation": 2096, "user_id": 5698998, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8ddf0e95295b0d7ca0bdb18d3f2a13b1?s=128&d=identicon&r=PG", "display_name": "Bishoy Abd", "link": "https://stackoverflow.com/users/5698998/bishoy-abd"}, "edited": false, "score": 0, "creation_date": 1526062352, "post_id": 37465271, "comment_id": 87612839, "body": "in v1.1 the minus operator was added <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/minus.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/&hellip;</a>"}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": false, "score": 16, "last_activity_date": 1607977992, "last_edit_date": 1607977992, "creation_date": 1464276857, "answer_id": 37465271, "question_id": 37464679, "link": "https://stackoverflow.com/questions/37464679/how-to-work-with-maps-in-kotlin/37465271#37465271", "title": "How to work with Maps in Kotlin", "body": "<p>The plus-method on <code>Map</code> creates a new map that contains the new entry. It does not mutate the original map. If you want to use this method, you would need to do this:</p>\n<pre><code>fun main() {\n    val table = nameTable.plus(Pair(&quot;person1&quot;, example))\n    for (entry in table) {\n        println(entry.value.age)\n    }\n}\n</code></pre>\n<p>If you want to add the entry to the original map, you need to use the <code>put</code> method like in Java.</p>\n<p>This would work:</p>\n<pre><code>fun main() {\n    nameTable.put(&quot;person1&quot;, example)\n    for (entry in nameTable) {\n        println(entry.value.age)\n   }\n} \n</code></pre>\n<p>To get and remove entries from the <code>MutableMap</code>, you can use this:</p>\n<pre><code>nameTable[&quot;person1&quot;] // Syntactic sugar for nameTable.get(&quot;person1&quot;)\nnameTable.remove(&quot;person1&quot;)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 65, "last_activity_date": 1464286828, "creation_date": 1464286828, "answer_id": 37468367, "question_id": 37464679, "link": "https://stackoverflow.com/questions/37464679/how-to-work-with-maps-in-kotlin/37468367#37468367", "title": "How to work with Maps in Kotlin", "body": "<p>The reason for your confusion is that <code>plus</code> is <em>not</em> a mutating operator, meaning that it works on (read-only) <code>Map</code>, but does not change the instance itself. This is the signature:</p>\n\n<pre><code>operator fun &lt;K, V&gt; Map&lt;out K, V&gt;.plus(pair: Pair&lt;K, V&gt;): Map&lt;K, V&gt;\n</code></pre>\n\n<p>What you want is a mutating operator <code>set</code>, defined on <code>MutableMap</code>:</p>\n\n<pre><code>operator fun &lt;K, V&gt; MutableMap&lt;K, V&gt;.set(key: K, value: V)\n</code></pre>\n\n<p>So your code may be rewritten (with some additional enhancements):</p>\n\n<pre><code>class Person(var name: String, var lastName: String, var age: Int)\n\nval nameTable = mutableMapOf&lt;String, Person&gt;()\nval example = Person(\"Josh\", \"Cohen\", 24)\n\nfun main (args: Array&lt;String&gt;) {\n    nameTable[\"person1\"] = example\n\n    for((key, value) in nameTable){\n        println(value.age)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 7202484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dhrkDxXtc24/AAAAAAAAAAI/AAAAAAAAAXw/6BrRVeWUfo8/photo.jpg?sz=128", "display_name": "Zahangir Alam", "link": "https://stackoverflow.com/users/7202484/zahangir-alam"}, "is_accepted": false, "score": 2, "last_activity_date": 1503450674, "creation_date": 1503450674, "answer_id": 45829130, "question_id": 37464679, "link": "https://stackoverflow.com/questions/37464679/how-to-work-with-maps-in-kotlin/45829130#45829130", "title": "How to work with Maps in Kotlin", "body": "<p>You have to use </p>\n\n<blockquote>\n  <p>put</p>\n</blockquote>\n\n<p>method.</p>\n\n<pre><code>class Person(name1:String, lastName1:String, age1:Int){\n    var name:String = name1\n    var lastName:String = lastName1\n    var age:Int = age1\n}\nvar nameTable:MutableMap&lt;String, Person&gt; = mutableMapOf()\nvar example = Person(\"Josh\", \"Cohen\", 24)\nfun main (args: Array&lt;String&gt;){\n    nameTable.put(\"person1\", example)\n    for(entry in nameTable){\n        println(entry.value.age)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 6133392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tf4Dc.png?s=128&g=1", "display_name": "amiko", "link": "https://stackoverflow.com/users/6133392/amiko"}, "is_accepted": false, "score": 7, "last_activity_date": 1505138001, "last_edit_date": 1505138001, "creation_date": 1503452159, "answer_id": 45829303, "question_id": 37464679, "link": "https://stackoverflow.com/questions/37464679/how-to-work-with-maps-in-kotlin/45829303#45829303", "title": "How to work with Maps in Kotlin", "body": "<p>It's too much trouble\uff0cYou can assign values directly\uff0clike this:</p>\n\n<pre><code>@Test\n@Throws(Exception::class)\nfun main(){\n\n    val map:MutableMap&lt;String,Person&gt; = mutableMapOf()\n\n    map[\"Josh\"]= Person(\"Josh\", \"Cohen\", 24)\n\n    map.forEach { t, u -&gt;\n        println(\"map key:$t,map value:${u.toString()}\")\n    }\n}\n\nclass Person(name1:String, lastName1:String, age1:Int){\n    var name:String = name1\n    var lastName:String = lastName1\n    var age:Int = age1\n\n    override fun toString(): String {\n        return \"name:$name,lastNam:$lastName,age:$age \\n\"\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88435, "favorite_count": 3, "answer_count": 4, "score": 66, "last_activity_date": 1607977992, "creation_date": 1464275228, "last_edit_date": 1505137824, "question_id": 37464679, "link": "https://stackoverflow.com/questions/37464679/how-to-work-with-maps-in-kotlin", "title": "How to work with Maps in Kotlin", "body": "<p>The code below is creating a new map called <code>nameTable</code>, then adding an entry named example to it, then trying to print the name property of the Value.</p>\n\n<p>When I run it, it seems that the plus operation didn't add a new entry to the map like I thought it would.</p>\n\n<p>So what am I doing wrong? </p>\n\n<pre><code>class Person(name1: String, lastName1: String, age1: Int){\n    var name: String = name1\n    var lastName: String = lastName1\n    var age: Int = age1\n}\n\nvar nameTable: MutableMap&lt;String, Person&gt; = mutableMapOf()\nvar example = Person(\"Josh\", \"Cohen\", 24)\n\nfun main (args: Array&lt;String&gt;){\n    nameTable.plus(Pair(\"person1\", example))\n    for(entry in nameTable){\n        println(entry.value.age)\n    }\n}\n</code></pre>\n\n<p>While we're at it, I would love some examples of how to add, remove, and get an entry from a map.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 603, "user_id": 193630, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fa8d8187faaef971e87bd7f22d5b5e97?s=128&d=identicon&r=PG", "display_name": "Yrgl", "link": "https://stackoverflow.com/users/193630/yrgl"}, "edited": false, "score": 0, "creation_date": 1464271107, "post_id": 37462810, "comment_id": 62424831, "body": "Are you sure there is no exception when Channel.fromJson invoke?"}, {"owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "reply_to_user": {"reputation": 603, "user_id": 193630, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fa8d8187faaef971e87bd7f22d5b5e97?s=128&d=identicon&r=PG", "display_name": "Yrgl", "link": "https://stackoverflow.com/users/193630/yrgl"}, "edited": false, "score": 0, "creation_date": 1464271188, "post_id": 37462810, "comment_id": 62424892, "body": "@Yrgl Yes. Again, the line before I call Channel.fromJson I print something successfully, and the very first line of the fromJson function is to print something, which doesn&#39;t run successfully. Also I don&#39;t ever ignore exceptions, so any exception should print."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1464271474, "post_id": 37462810, "comment_id": 62425131, "body": "@Deanveloper, threads don&#39;t print uncaught exceptions by default. To be completely sure please check that <code>uncaughtExceptionHandler</code> is set for the thread."}, {"owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1464272140, "post_id": 37462810, "comment_id": 62425636, "body": "@hotkey will do as soon as I have access to a computer again!"}, {"owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1464362565, "post_id": 37462810, "comment_id": 62470629, "body": "@hotkey Nope, no exception being thrown from what it looks like."}, {"owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1464365115, "post_id": 37462810, "comment_id": 62472228, "body": "@hotkey I was using a cached thread pool to generate the threads, so I guess that caught the exception. I surrounded it with try/catch and it threw IllegalAccessErrors as the method is protected, and the function is inlined so it was called from outside the package."}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "is_accepted": true, "score": 0, "last_activity_date": 1464365267, "creation_date": 1464365267, "answer_id": 37488006, "question_id": 37462810, "link": "https://stackoverflow.com/questions/37462810/method-not-being-called-no-error-maybe-has-to-do-with-generics-companion-objec/37488006#37488006", "title": "Method not being called, no error, maybe has to do with generics/companion objects/inheritance/concurrency/inlining", "body": "<p>It was caused by inlining, as the function fromJson has a protected scope. Because the function was inlined, the fromJson function was actually being called from outside the package (as the start method was called from outside the package). This caused an IllegalAccessError.</p>\n"}], "owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 37488006, "answer_count": 1, "score": 2, "last_activity_date": 1464365267, "creation_date": 1464270604, "last_edit_date": 1464271372, "question_id": 37462810, "link": "https://stackoverflow.com/questions/37462810/method-not-being-called-no-error-maybe-has-to-do-with-generics-companion-objec", "title": "Method not being called, no error, maybe has to do with generics/companion objects/inheritance/concurrency/inlining", "body": "<p>Okay, so I have a class called ChannelBase which is the superclass for all channel-type things in Slack (basically just Channels and Groups as MPIMs aren't considered groups anymore)</p>\n\n<p>Within ChannelBase there is an <code>abstract class ChannelCompanion&lt;T : BaseChannel&lt;T&gt;&gt;</code> (the generic is the type of the subclass, aka <code>Channel</code> or <code>Group</code>). The subclass then has its companion object extend ChannelCompanion, which forces it to have a <code>fromJson(JsonObject)</code> function, and provides the companion object with a <code>inline fun start(callback: () -&gt; Unit)</code> that gathers the channel list from the Slack API and parses it.</p>\n\n<p>So basically here's what we have, let's assume we're registering the <code>Channel</code> class.\nWhen <code>Channel.start { }</code> (inherited from ChannelCompanion) is called, here is what should happen:</p>\n\n<p>-> Call <code>ChannelCompanion.start {  }</code><br>\n-> Asynchronously make HTTP request to a slack team's channels.list method<br>\n-> Parse the JSON and retrieve the array of Channel JsonObjects<br>\n-> Parse each JsonObject into a Channel object using  <code>Channel.fromJson(JsonObject)</code> (an abstract fun in ChannelCompanion)</p>\n\n<p>The problem is that when <code>Channel.fromJson</code> gets called, the Thread freezes. There is no error or exception, it just freezes. If you don't understand the structure of this (it's hard to explain), here is the repository: <a href=\"https://github.com/Deanveloper/SlaK/tree/master/src/main/kotlin/com/deanveloper/slak/channel\" rel=\"nofollow\">https://github.com/Deanveloper/SlaK/tree/master/src/main/kotlin/com/deanveloper/slak/channel</a></p>\n\n<p>Debug code shows that the program freezes when <code>Channel.fromJson</code> is called. The first line of <code>Channel.fromJson</code> is to print that the function was run, and it doesn't print. The line before it gets called is printed, though. Not quite sure what's going on here.</p>\n\n<p>It is good to note that while there are multiple threads, this is all executed in the same thread after the HTTP request is made.</p>\n\n<p>If you want to clone the repository and test for yourself, <a href=\"https://github.com/Deanveloper/SlaK\" rel=\"nofollow\">https://github.com/Deanveloper/SlaK</a>. In the JUnit test directory, go to BaseTest and replace the encrypted API key with an API key for a Slack team of your own</p>\n"}, {"tags": ["templates", "kotlin", "pebble"], "answers": [{"comments": [{"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1464257820, "post_id": 37457734, "comment_id": 62415404, "body": "just as the Pebble repo finished checking out you answered, nooice!"}], "tags": [], "owner": {"reputation": 153257, "user_id": 6509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de6eafe28472ceb9522fd3f609afed53?s=128&d=identicon&r=PG", "display_name": "tim_yates", "link": "https://stackoverflow.com/users/6509/tim-yates"}, "is_accepted": true, "score": 5, "last_activity_date": 1464257257, "creation_date": 1464257257, "answer_id": 37457734, "question_id": 37456987, "link": "https://stackoverflow.com/questions/37456987/parse-string-template-instead-of-file-in-pebble-template-engine/37457734#37457734", "title": "Parse String template instead of file in Pebble Template Engine", "body": "<p>According <a href=\"https://github.com/PebbleTemplates/pebble/blob/master/src/test/java/com/mitchellbosecke/pebble/ArraySyntaxTest.java#L29\" rel=\"noreferrer\">to the tests</a>, you just need to set the engine up with a <code>StringLoader</code>:</p>\n\n<pre><code>val engine = PebbleEngine.Builder().loader(StringLoader()).build()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 4, "last_activity_date": 1464257411, "creation_date": 1464257411, "answer_id": 37457797, "question_id": 37456987, "link": "https://stackoverflow.com/questions/37456987/parse-string-template-instead-of-file-in-pebble-template-engine/37457797#37457797", "title": "Parse String template instead of file in Pebble Template Engine", "body": "<p>You need to supply a <a href=\"https://github.com/PebbleTemplates/pebble/blob/master/src/main/java/com/mitchellbosecke/pebble/loader/StringLoader.java\" rel=\"nofollow\"><code>StringLoader</code></a> to the engine like so:</p>\n\n<pre><code>val engine = PebbleEngine.Builder()\n    .loader(StringLoader())\n    .build()\n\nval writer = StringWriter()\nengine.getTemplate(\"&lt;p&gt;{{name}}&lt;/p&gt;\").evaluate(writer, mapOf(\"name\" to \"Stack Overflow\"))\nval result = writer.toString() // \"&lt;p&gt;Stack Overflow&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1618, "favorite_count": 0, "accepted_answer_id": 37457734, "answer_count": 2, "score": 4, "last_activity_date": 1464258470, "creation_date": 1464255497, "last_edit_date": 1464258470, "question_id": 37456987, "link": "https://stackoverflow.com/questions/37456987/parse-string-template-instead-of-file-in-pebble-template-engine", "title": "Parse String template instead of file in Pebble Template Engine", "body": "<p>Is it possible to use the Pebble Template Engine to build up a template from a String instead of having to provide a filename?</p>\n\n<pre><code>val engine = PebbleEngine.Builder().build()\nval writer = StringWriter();\nengine.getTemplate(\"test.html\").evaluate(writer);\n</code></pre>\n\n<p>Instead of providing <code>test.html</code>, how would I for example provide a template in the following format?</p>\n\n<pre><code>val template = \"Hello {{world}} - {{count}} - {{tf}}\"\n</code></pre>\n\n<p>I'm currently on Pebble 2.2.1</p>\n\n<pre><code>&lt;!-- Pebble --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.mitchellbosecke&lt;/groupId&gt;\n    &lt;artifactId&gt;pebble&lt;/artifactId&gt;\n    &lt;version&gt;2.2.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>Solution</strong> based on the answers I've received:</p>\n\n<pre><code>val context = HashMap&lt;String, Any&gt;()\n... \nval engine = PebbleEngine.Builder().loader(StringLoader()).build();\nval writer = StringWriter();\nengine.getTemplate(template).evaluate(writer, context);\nprintln(writer.toString());\n</code></pre>\n"}, {"tags": ["hashmap", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 51, "last_activity_date": 1464254480, "last_edit_date": 1464254480, "creation_date": 1464253987, "answer_id": 37456454, "question_id": 37456283, "link": "https://stackoverflow.com/questions/37456283/implement-hashmap-with-different-value-types-in-kotlin/37456454#37456454", "title": "Implement Hashmap with different value types in Kotlin", "body": "<p>In Kotlin, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/\"><code>Any</code></a> is the supertype of all the other types, and you should replace Java <code>Object</code> with it:</p>\n\n<pre><code>val context = HashMap&lt;String, Any&gt;()\ncontext.put(\"world\", \"John\")\ncontext.put(\"count\", 1)\ncontext.put(\"tf\", true)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 8520476, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tNFf4emNI-s/AAAAAAAAAAI/AAAAAAAAFS4/iQVcUvnKGGU/photo.jpg?sz=128", "display_name": "Pranay Bhalerao", "link": "https://stackoverflow.com/users/8520476/pranay-bhalerao"}, "is_accepted": false, "score": 4, "last_activity_date": 1552996512, "last_edit_date": 1552996512, "creation_date": 1552994761, "answer_id": 55239909, "question_id": 37456283, "link": "https://stackoverflow.com/questions/37456283/implement-hashmap-with-different-value-types-in-kotlin/55239909#55239909", "title": "Implement Hashmap with different value types in Kotlin", "body": "<p>For new visitors,It can also be done with this</p>\n\n<pre><code>val a= hashMapOf&lt;Any,Any&gt;( 1 to Exception(), 2 to Throwable(), Object() to 33)\n</code></pre>\n\n<p>Where both keys and values can be of any type. </p>\n"}], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25431, "favorite_count": 3, "accepted_answer_id": 37456454, "answer_count": 2, "score": 19, "last_activity_date": 1552996512, "creation_date": 1464253511, "question_id": 37456283, "link": "https://stackoverflow.com/questions/37456283/implement-hashmap-with-different-value-types-in-kotlin", "title": "Implement Hashmap with different value types in Kotlin", "body": "<p>Is it possible to have a hashmap in Kotlin that takes different value types?</p>\n\n<p>I've tried this:</p>\n\n<pre><code>val template = \"Hello {{world}} - {{count}} - {{tf}}\"\n\nval context = HashMap&lt;String, Object&gt;()\ncontext.put(\"world\", \"John\")\ncontext.put(\"count\", 1)\ncontext.put(\"tf\", true)\n</code></pre>\n\n<p>... but that gives me a type mismatch (apparantly <code>\"John\"</code>, <code>1</code> and <code>true</code> are not Objects) </p>\n\n<p>In Java you can get around this by creating types <code>new String(\"John\")</code>, <code>new Integer(1)</code>, <code>Boolean.TRUE</code>, I've tried the equivalent in Kotlin, but still getting the type mismatch error.</p>\n\n<pre><code>context.put(\"tf\", Boolean(true))\n</code></pre>\n\n<p>Any ideas?</p>\n"}]