[{"tags": ["java", "functional-programming", "monads", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1458137714, "post_id": 36037995, "comment_id": 59725664, "body": "Are you asking whether someone else needs such a library?"}], "answers": [{"tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 6, "last_activity_date": 1518543714, "last_edit_date": 1518543714, "creation_date": 1458142687, "answer_id": 36040352, "question_id": 36037995, "link": "https://stackoverflow.com/questions/36037995/try-monad-for-kotlin/36040352#36040352", "title": "Try monad for kotlin", "body": "<p>Unfortunately there is no Try monad in Kotlin standard library. I'm just learning FP, but i think <a href=\"https://kotlinlang.org/docs/reference/classes.html#sealed-classes\" rel=\"nofollow noreferrer\">sealed class</a> is what you needed to implement Try monad yourself. Also there are some libraries: <a href=\"https://github.com/kittinunf/Result\" rel=\"nofollow noreferrer\">Result</a> and <a href=\"https://github.com/MarioAriasC/funKTionale/wiki/Either\" rel=\"nofollow noreferrer\">funKTionale</a>.</p>\n\n<p><strong>Upd.</strong> Feb 2018</p>\n\n<p>Now <a href=\"https://github.com/MarioAriasC/funKTionale/wiki/Either\" rel=\"nofollow noreferrer\">funKTionale</a> and <a href=\"https://github.com/Kategory/Kategory\" rel=\"nofollow noreferrer\">Kategory</a> merged into <a href=\"https://github.com/arrow-kt/arrow\" rel=\"nofollow noreferrer\">arrow</a> library, which has <a href=\"http://arrow-kt.io/docs/datatypes/try/\" rel=\"nofollow noreferrer\">Try</a> monad. </p>\n"}, {"comments": [{"owner": {"reputation": 26445, "user_id": 608820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aGmg7.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/608820/augusto"}, "edited": false, "score": 0, "creation_date": 1596737277, "post_id": 62621181, "comment_id": 111914533, "body": "One concern I have about <code>runCatching</code> is that it catches <code>Throwable</code> rather than <code>Exception</code>, so it also catch any subclass of java.lang.Error` too. This in my eyes is not ideal as it can hide the actual source of an error and the JVM is unusable after one of these."}], "tags": [], "owner": {"reputation": 141, "user_id": 5925522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00ee66f98a72c5034b0e82271161c052?s=128&d=identicon&r=PG&f=1", "display_name": "rell", "link": "https://stackoverflow.com/users/5925522/rell"}, "is_accepted": true, "score": 1, "last_activity_date": 1593339701, "creation_date": 1593339701, "answer_id": 62621181, "question_id": 36037995, "link": "https://stackoverflow.com/questions/36037995/try-monad-for-kotlin/62621181#62621181", "title": "Try monad for kotlin", "body": "<p>Since kotlin 1.3 you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run-catching.html\" rel=\"nofollow noreferrer\">runCatching</a></p>\n"}], "owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2617, "favorite_count": 0, "accepted_answer_id": 62621181, "answer_count": 2, "score": 4, "last_activity_date": 1593339701, "creation_date": 1458137085, "question_id": 36037995, "link": "https://stackoverflow.com/questions/36037995/try-monad-for-kotlin", "title": "Try monad for kotlin", "body": "<p>Java 8 didn't provide Try monad. Which is useful for exception handling in functional style.</p>\n\n<p><strong>Is there any ready implementation in kotlin? or shall i implement one?</strong></p>\n"}, {"tags": ["function", "kotlin"], "comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1458151295, "post_id": 36037442, "comment_id": 59735782, "body": "Kotlin or the IDE should probably have an inspection for that. <a href=\"https://youtrack.jetbrains.com/issue/KT-11461\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11461</a>"}, {"owner": {"reputation": 1571, "user_id": 9063935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0kpYD.png?s=128&g=1", "display_name": "dantechguy", "link": "https://stackoverflow.com/users/9063935/dantechguy"}, "edited": false, "score": 0, "creation_date": 1602531381, "post_id": 36037442, "comment_id": 113744787, "body": "My problem was about braces appearing after a function call. <a href=\"https://medium.com/@s.badamestani/lambda-in-kotlin-a6fc055a2c88\" rel=\"nofollow noreferrer\">This</a> medium article explains the varying syntactical alternatives."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 50, "last_activity_date": 1612974798, "last_edit_date": 1612974798, "creation_date": 1458135810, "answer_id": 36037443, "question_id": 36037442, "link": "https://stackoverflow.com/questions/36037442/kotlin-function-declaration-equals-sign-before-curly-braces/36037443#36037443", "title": "Kotlin function declaration: equals sign before curly braces", "body": "<p>Despite visual similarity, the idea of these two declarations is completely different.</p>\n<h2>1. Function declaration without equals sign</h2>\n<p>Function declaration without equals sign is a <a href=\"https://kotlinlang.org/docs/reference/functions.html#unit-returning-functions\" rel=\"noreferrer\"><code>Unit</code>-returning function</a> (similar to Java's <code>void</code> functions).</p>\n<p>What's inside the curly braces is its body, which gets executed right on the function call. The function can be rewritten with <code>Unit</code> explicitly specified:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun foo1(): Unit {\n    println(&quot;baz1&quot;)\n    return Unit\n}\n</code></pre>\n<p>Kotlin doesn't require the return statement and explicit return type for <code>Unit</code>-returning functions, and both are usually omitted.</p>\n<h2>2. Function declaration with equals sign</h2>\n<p>Function declaration with equals sign is a <a href=\"https://kotlinlang.org/docs/reference/functions.html#single-expression-functions\" rel=\"noreferrer\">single-expression function</a>, and what it does is just return what's to the right of equals sign.</p>\n<p>A simpler example: <code>fun getInt() = 1</code> is just a shorter form of <code>fun getInt(): Int { return 1 }</code>.</p>\n<p>In <code>foo2</code>, the right hand side is <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expressions-and-anonymous-functions\" rel=\"noreferrer\">a lambda</a> expression. The code inside the lambda code block is <strong>not executed</strong>. In other words, <code>foo2</code> is a function that returns another function.</p>\n<p>Return type of <code>foo2</code> is <code>() -&gt; Unit</code>, a function itself, and thus <code>foo2</code> is a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#higher-order-functions\" rel=\"noreferrer\">higher-order function</a>.</p>\n<p>Without the syntactic sugar and with explicit type, <code>foo2</code> can be rewritten as</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun foo2(): () -&gt; Unit {\n    val result: () -&gt; Unit = { println(&quot;baz2&quot;) }\n    return result\n}\n</code></pre>\n<p>As to the usage, the function which <code>foo2</code> returns can be stored in a variable, passed around and <strong>can later be invoked</strong>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val f = foo2()\nf() //equivalent to\nf.invoke()\n</code></pre>\n<p>This is also why <code>foo2()()</code> in the example executes the code from the lambda body.</p>\n<p>Alternatively, we can add <code>()</code> at the end when we declare foo2(), as shown in the following example. As such, the lambda expression will be invoked when calling <code>foo3()</code>. But this is <strong>not</strong> a good pattern.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun foo3() = {\n    println(&quot;baz3&quot;)\n}()\n</code></pre>\n"}], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4014, "favorite_count": 5, "accepted_answer_id": 36037443, "answer_count": 1, "score": 35, "last_activity_date": 1612974798, "creation_date": 1458135810, "last_edit_date": 1610139989, "question_id": 36037442, "link": "https://stackoverflow.com/questions/36037442/kotlin-function-declaration-equals-sign-before-curly-braces", "title": "Kotlin function declaration: equals sign before curly braces", "body": "<p>In Kotlin, the function declaration syntax allows you to write equals sign before the curly braces.</p>\n<p>Consider these two examples:</p>\n<ol>\n<li>Without <code>=</code> sign:</li>\n</ol>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun foo1() {\n    println(&quot;baz1&quot;)\n}\n</code></pre>\n<p>The code inside the body gets executed by just calling <code>foo1()</code>.</p>\n<ol start=\"2\">\n<li>With <code>=</code> sign:</li>\n</ol>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun foo2() = {\n    println(&quot;baz2&quot;)\n}\n</code></pre>\n<p>Here, when <code>foo2()</code> is called, nothing happens, but to get the body executed one can write <code>foo2()()</code>.</p>\n<p>What is the difference in these two declarations and <strong>why do they behave differently?</strong></p>\n<p>You can run the code using the following program:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun main() {\n    foo1()\n    foo2()\n}\n\n/*\nThis code example produces the following results:\nbaz1\n*/\n</code></pre>\n<hr>\n<sup>This question, though having not much meaning, is [intentionally asked and answered by the author][1], because a few questions have already been posted where people got problems because of incorrect function definitions.</sup>\n"}, {"tags": ["kotlin", "companion-object"], "answers": [{"comments": [{"owner": {"reputation": 714, "user_id": 2315445, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a36eb457583a88bae10d96a4c587a654?s=128&d=identicon&r=PG", "display_name": "Minami", "link": "https://stackoverflow.com/users/2315445/minami"}, "edited": false, "score": 0, "creation_date": 1458120962, "post_id": 36031618, "comment_id": 59712929, "body": "thx guy, I&#39;ve got your answer in another post <a href=\"http://stackoverflow.com/questions/36023617/is-it-possible-to-add-static-extension-function-for-java-class\">link</a>"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 8, "last_activity_date": 1458122181, "last_edit_date": 1458122181, "creation_date": 1458120844, "answer_id": 36031618, "question_id": 36031344, "link": "https://stackoverflow.com/questions/36031344/kotlin-how-to-add-extension-function-to-already-defined-class-companion-object/36031618#36031618", "title": "kotlin, how to add extension function to already defined class companion object", "body": "<p>In Kotlin 1.0, if a class does not define a companion object, it is not possible to define extension functions for that companion object. It's also not possible to define extension functions for Java classes and interfaces such as <code>Runnable</code>.</p>\n"}], "owner": {"reputation": 714, "user_id": 2315445, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a36eb457583a88bae10d96a4c587a654?s=128&d=identicon&r=PG", "display_name": "Minami", "link": "https://stackoverflow.com/users/2315445/minami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "accepted_answer_id": 36031618, "answer_count": 1, "score": 3, "last_activity_date": 1458122181, "creation_date": 1458120074, "question_id": 36031344, "link": "https://stackoverflow.com/questions/36031344/kotlin-how-to-add-extension-function-to-already-defined-class-companion-object", "title": "kotlin, how to add extension function to already defined class companion object", "body": "<p>i want to add some extension function to an already defined class\u2018s companion object, like</p>\n\n<pre><code>fun Toast.Companion.showImageToast(str : String) {\n}\n</code></pre>\n\n<p>and also i like to do the same thing on interfaces, e.g</p>\n\n<pre><code>fun Runnable.Companion.mainHandler() {\n}\n</code></pre>\n\n<p>I've consulted the documentation, only to find syntax for define extension function for companion object in a user defined class, not for class that don't have a companion object</p>\n\n<p>can i have any chance to do this in kotlin ?</p>\n"}, {"tags": ["java", "spring-boot", "jersey", "jetty", "kotlin"], "comments": [{"owner": {"reputation": 285, "user_id": 4794131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e64b4487648f4407161ef92faa544f3c?s=128&d=identicon&r=PG&f=1", "display_name": "finnetrolle", "link": "https://stackoverflow.com/users/4794131/finnetrolle"}, "edited": false, "score": 0, "creation_date": 1458162629, "post_id": 36024897, "comment_id": 59742557, "body": "So, I have a example. <a href=\"https://github.com/finnetrolle/kotlinrestdemo\" rel=\"nofollow noreferrer\">github.com/finnetrolle/kotlinrestdemo</a> - this is a small example project with jersey via tomcat. If you clone and mvn install and run it with java -jar xxx.jar - you&#39;ll get endpoint at <a href=\"http://localhost:8080/greet/some\" rel=\"nofollow noreferrer\">localhost:8080/greet/some</a>. But If you add executable = true in maven plugin like this &lt;plugin&gt;                 &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;                 &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;                 &lt;configuration&gt;                     &lt;executable&gt;true&lt;/executable&gt;                 &lt;/configuration&gt;             &lt;/plugin&gt; You&#39;ll have 404"}], "owner": {"reputation": 285, "user_id": 4794131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e64b4487648f4407161ef92faa544f3c?s=128&d=identicon&r=PG&f=1", "display_name": "finnetrolle", "link": "https://stackoverflow.com/users/4794131/finnetrolle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 929, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458089048, "creation_date": 1458089048, "question_id": 36024897, "link": "https://stackoverflow.com/questions/36024897/spring-boot-with-jettyjersey-always-shows-404", "title": "Spring Boot with Jetty+Jersey always shows 404", "body": "<p>I have strange issue. I developed project with Spring boot 1.3.3 and modules mvc (excluded tomcat), jetty and jersey (JAX-RS annotations). My endpoints worked perfectly for running from IDEA and running assembled java - jar .JAR.</p>\n\n<p>But then I tried to make my JAR executable with help of executable option in spring-boot-maven-plugin. My project still make correct requests if I start it from IDEA, but compiled executable .JAR always sends 404 error.</p>\n\n<p>Ok, I maked some changes in JerseyConfig class. I replaced </p>\n\n<pre><code>packages(ru.finnetrolle.telebot.restful.JerseyConfig::class.java.`package`.name)\n</code></pre>\n\n<p>with </p>\n\n<pre><code>register(BroadcastResource::class.java)\n</code></pre>\n\n<p>and executable JAR works correct on my developer's PC. But when I try to assemble it on my linux server and add simlink to init.d - all endpoints again starts say 404 for all requests. I have 404 if I ask from local and from remote host. I also add </p>\n\n<pre><code>spring.jersey.application-path=/\nserver.servlet-path=/monitoring\n</code></pre>\n\n<p>into my application.properties file (I using Spring actuator as well) but nothing changes - All is working without and isn't working with</p>\n\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;executable&gt;true&lt;/executable&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>I also found an issue with description of my problem but no help <a href=\"https://github.com/spring-projects/spring-boot/issues/3413\" rel=\"nofollow\">https://github.com/spring-projects/spring-boot/issues/3413</a></p>\n\n<p>P.S. I'm using Kotlin, but this shouldn't affect this</p>\n"}, {"tags": ["singleton", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "is_accepted": true, "score": 7, "last_activity_date": 1458084621, "creation_date": 1458084621, "answer_id": 36024216, "question_id": 36024129, "link": "https://stackoverflow.com/questions/36024129/when-are-kotlin-singletons-declared-with-the-object-modifier-instantiated/36024216#36024216", "title": "When are Kotlin singletons (declared with the object modifier) instantiated?", "body": "<p>From the <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html\">kotlin docs</a>: </p>\n\n<blockquote>\n  <ul>\n  <li>object declarations are initialized lazily, when accessed for the first time</li>\n  <li>object expressions are executed (and initialized) immediately, where they are used</li>\n  </ul>\n</blockquote>\n\n<p>Since you're using an object declaration (Your object has a name), it will be initialized lazily.</p>\n"}], "owner": {"reputation": 1339, "user_id": 1359988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/00c331889adb81f68b66cd75734459a6?s=128&d=identicon&r=PG", "display_name": "zjuhasz", "link": "https://stackoverflow.com/users/1359988/zjuhasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 36024216, "answer_count": 1, "score": 3, "last_activity_date": 1458088546, "creation_date": 1458084205, "last_edit_date": 1458088546, "question_id": 36024129, "link": "https://stackoverflow.com/questions/36024129/when-are-kotlin-singletons-declared-with-the-object-modifier-instantiated", "title": "When are Kotlin singletons (declared with the object modifier) instantiated?", "body": "<p>I can't find any information on when Kotling singletons are instantiated. I'm assuming it's the first time they are accessed but I can't confirm that anywhere.</p>\n\n<pre><code>object Singleton{\n    val thing1 = 2\n    val thing2 = \"Hello\"\n}\n</code></pre>\n\n<p>When would this object be instantiated? When a property is first accessed? When something in the packaged is accessed? When the program is first run?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1458082070, "post_id": 36023617, "comment_id": 59698394, "body": "Why do you need this?  You could just define a regular function in a package to get the same effect, except you don&#39;t have to use a class name with dot syntax to call it.  If you&#39;re expecting to use reflection to find the static method in some class, that&#39;s a different story..."}, {"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1458083412, "post_id": 36023617, "comment_id": 59698868, "body": "I just want to use <code>A.foo()</code> syntax instead of <code>foo(A)</code> because Kotlin promote such syntax for extending functionality of classes (see first paragraph <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extensions\" rel=\"nofollow noreferrer\">here</a>)."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 2, "creation_date": 1458084515, "post_id": 36023617, "comment_id": 59699250, "body": "Right, extension functions and properties are for <i>instances</i> of classes.  You don&#39;t have an instance here, just a function call."}, {"owner": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "edited": false, "score": 0, "creation_date": 1458093656, "post_id": 36023617, "comment_id": 59701795, "body": "But, if you want to replace <code>A.foo()</code> with <code>foo(A)</code>, it means that you will need a instance of <code>A</code> in the case of <code>foo(A)</code>, right? If so, why not use the extension function for instances and do <code>a.foo()</code>?"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1458114902, "post_id": 36023617, "comment_id": 59709159, "body": "I&#39;m saying you don&#39;t define a function inside class A at all.  You just define it within some package, import it in the code where you want to use it, then call it without any enclosing class reference.  Static methods don&#39;t require an instance of anything at all outside of its declared parameter, and that&#39;s the same for kotlin functions defined in a package."}, {"owner": {"reputation": 667, "user_id": 5209185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb523e6233de789cd2c9bf757578f30a?s=128&d=identicon&r=PG&f=1", "display_name": "kyay10", "link": "https://stackoverflow.com/users/5209185/kyay10"}, "edited": false, "score": 0, "creation_date": 1560312567, "post_id": 36023617, "comment_id": 99690066, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/28210188/static-extension-methods-in-kotlin\">Static extension methods in Kotlin</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 1, "creation_date": 1485542077, "post_id": 36029578, "comment_id": 70983801, "body": "Hi yole, any news about it?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1485595216, "post_id": 36029578, "comment_id": 70998051, "body": "@elect This is still not on the roadmap for either 1.1 or 1.2."}, {"owner": {"reputation": 2478, "user_id": 24177, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/122602908/picture?type=large", "display_name": "Marchy", "link": "https://stackoverflow.com/users/24177/marchy"}, "edited": false, "score": 2, "creation_date": 1486741912, "post_id": 36029578, "comment_id": 71491847, "body": "This should be! We use this in Swift all the time and it tends to be useful in quite a few scenarios (ie: Date.fromJSON( ... ))."}, {"owner": {"reputation": 7558, "user_id": 966104, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ff370f6bd04596d5928ef29e33b25864?s=128&d=identicon&r=PG", "display_name": "Yona Appletree", "link": "https://stackoverflow.com/users/966104/yona-appletree"}, "edited": false, "score": 1, "creation_date": 1490561378, "post_id": 36029578, "comment_id": 73154071, "body": "I agree, this would be great. Here&#39;s the YouTrack issue for it: <a href=\"https://youtrack.jetbrains.com/issue/KT-11968\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11968</a>"}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 3, "creation_date": 1510219626, "post_id": 36029578, "comment_id": 81344842, "body": "So... the answer is that it&#39;s still impossible?"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 28, "last_activity_date": 1458114487, "creation_date": 1458114487, "answer_id": 36029578, "question_id": 36023617, "link": "https://stackoverflow.com/questions/36023617/is-it-possible-to-add-static-extension-function-for-java-class/36029578#36029578", "title": "Is it possible to add &quot;static&quot; extension function for Java class?", "body": "<p>You're right. In Kotlin 1.0, you can define extension functions on a companion object of a Kotlin class, and such functions can be called using the <code>A.foo()</code> syntax. Support for defining static extension functions on Java classes is a possible feature for future versions of Kotlin, but it's not on the roadmap of Kotlin 1.1 at this time.</p>\n"}], "owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3732, "favorite_count": 1, "accepted_answer_id": 36029578, "answer_count": 1, "score": 15, "last_activity_date": 1560318815, "creation_date": 1458081605, "last_edit_date": 1560318815, "question_id": 36023617, "link": "https://stackoverflow.com/questions/36023617/is-it-possible-to-add-static-extension-function-for-java-class", "title": "Is it possible to add &quot;static&quot; extension function for Java class?", "body": "<p>For example I have Java class (from external library):</p>\n\n<pre><code>class A {} // This is Java class\n</code></pre>\n\n<p>I want to add extension functions written on Kotlin and call it as:</p>\n\n<pre><code>A.foo() // This is call of extension function `foo` from Kotlin code\n</code></pre>\n\n<p>As I understand, right now it is impossible to do in Kotlin because it support \"static\" extension functions for <a href=\"https://kotlinlang.org/docs/reference/extensions.html#companion-object-extensions\" rel=\"nofollow noreferrer\">KClass-es with companion object</a> only. Right?</p>\n\n<p>Seems like nothing to prevent to implement such functionality in Kotlin later. Right?</p>\n\n<p><strong>UPDATE 2019-06-12</strong>: This <a href=\"https://stackoverflow.com/questions/28210188/static-extension-methods-in-kotlin\">question</a> doesn't answer to my question because my question about compatibility of Kotlin extension functions with Java classes.</p>\n"}, {"tags": ["generics", "kotlin", "abstract-class", "type-inference"], "answers": [{"comments": [{"owner": {"reputation": 4129, "user_id": 2119041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fe34ed62fa8e649e1af1b8cf4d06386?s=128&d=identicon&r=PG", "display_name": "NikolaB", "link": "https://stackoverflow.com/users/2119041/nikolab"}, "edited": false, "score": 0, "creation_date": 1458058003, "post_id": 36015007, "comment_id": 59684237, "body": "Thanks for your answer! I&#39;m a little bit puzzled about why can&#39;t class generic param be connected to methods generic param. When subclass gets created we know the generic type so why can&#39;t we use that as a &quot;T type&quot; in the abstract class? Why would we have to specify the type again?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 4129, "user_id": 2119041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fe34ed62fa8e649e1af1b8cf4d06386?s=128&d=identicon&r=PG", "display_name": "NikolaB", "link": "https://stackoverflow.com/users/2119041/nikolab"}, "edited": false, "score": 0, "creation_date": 1458058358, "post_id": 36015007, "comment_id": 59684494, "body": "@NikolaB, when you add a generic parameter to <b>both</b> class and its method, those will be different parameters not connected to each other, that&#39;s what I meant. Otherwise, you can use the class&#39; generic parameter in a function for sure. As to the abstract class, generics on JVM work in different way: the method code won&#39;t be duplicated for each derived class, therefore specifying a concrete type in place of generic parameter in a derived class won&#39;t help: the method&#39;s code is still in base class, and the generic is then erased from it."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 4129, "user_id": 2119041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fe34ed62fa8e649e1af1b8cf4d06386?s=128&d=identicon&r=PG", "display_name": "NikolaB", "link": "https://stackoverflow.com/users/2119041/nikolab"}, "edited": false, "score": 0, "creation_date": 1458058560, "post_id": 36015007, "comment_id": 59684637, "body": "@NikolaB, probably reading <i>Problems with type erasure</i> section of <a href=\"https://en.wikipedia.org/wiki/Generics_in_Java\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Generics_in_Java</a> will make things more clear."}, {"owner": {"reputation": 4129, "user_id": 2119041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fe34ed62fa8e649e1af1b8cf4d06386?s=128&d=identicon&r=PG", "display_name": "NikolaB", "link": "https://stackoverflow.com/users/2119041/nikolab"}, "edited": false, "score": 0, "creation_date": 1458059888, "post_id": 36015007, "comment_id": 59685539, "body": "Much obliged for the assistance and the explanation!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 12, "last_activity_date": 1563976187, "last_edit_date": 1563976187, "creation_date": 1458054380, "answer_id": 36015007, "question_id": 36012190, "link": "https://stackoverflow.com/questions/36012190/kotlin-abstract-class-with-generic-param-and-methods-which-use-type-param/36015007#36015007", "title": "Kotlin abstract class with generic param and methods which use type param", "body": "<p>You cannot use a class' generic parameter as a reified generic (getting its <code>T::class</code> token), because at runtime the generic parameter is erased: Kotlin follows <a href=\"https://en.wikipedia.org/wiki/Generics_in_Java#Problems_with_type_erasure\" rel=\"nofollow noreferrer\">Java's type erasure practice</a> and doesn't have reified generics for classes.\n<sub><br>(Kotlin has <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">reified generics</a> only for inline functions)</sub></p>\n\n<p>Given that, it's up to you to pass and store a <code>Class&lt;T&gt;</code> token so that you can use it.</p>\n\n<p>Also, <code>myFunction</code> in your example introduces a generic parameter, and it will be a new generic, not connected to the class generic parameter in any way (naming both <code>T</code> only adds confusion, consider them <code>T1</code> and <code>T2</code>). If I get it right, you meant the class' generic instead.</p>\n\n<p>Probably what you can do is declare an abstract <code>val</code> that would store a class token and rewrite the function so that it uses the stored class token:</p>\n\n<pre><code>abstract class AbstractClass&lt;T : Any&gt; constructor(protected val delegate: MyService) {\n    protected abstract val classToken: Class&lt;T&gt;\n\n    fun myMethod(param: Any): T? {\n        return delegate.myMethod(param).`as`(classToken)\n    }\n}\n</code></pre>\n\n<p>Then, deriving from <code>AbstractClass</code> will require overriding the <code>classToken</code>:</p>\n\n<pre><code>class TesterWork constructor(delegate: MyService) : AbstractClass&lt;Tester&gt;(delegate) {\n    override val classToken = Tester::class.java\n}\n</code></pre>\n\n<p>After that, you will be able to call the function on <code>TesterWork</code> instance without specifying the generic parameter:</p>\n\n<pre><code>val service: MyService = ...\nval t: Tester? = TesterWork(service).myMethod(\"test\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": false, "score": 3, "last_activity_date": 1458060354, "creation_date": 1458060354, "answer_id": 36017270, "question_id": 36012190, "link": "https://stackoverflow.com/questions/36012190/kotlin-abstract-class-with-generic-param-and-methods-which-use-type-param/36017270#36017270", "title": "Kotlin abstract class with generic param and methods which use type param", "body": "<p>There are a couple of problems at play here. First, in order to retrieve a class object from a generic type parameter, you need to reify it. For this you need to declare <code>&lt;reified T: Any&gt;</code>.</p>\n\n<p>Second, you declare the generic type parameter twice. Once in the class declaration <code>abstract class AbstractClass&lt;T : Any&gt;</code> and once in the method declaration <code>inline fun &lt;T: Any&gt; myMethod</code>. Those <code>T</code>s are not the same. Theoretically you could just leave out the one from the method signature but this doesn't work because reification only works with inline methods not with classes. For a possible solution to that refer to @hotkey's answer.</p>\n"}, {"tags": [], "owner": {"reputation": 5494, "user_id": 342947, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a737f13056e480e90f1b8bb943bc3cb1?s=128&d=identicon&r=PG", "display_name": "Fabian Zeindl", "link": "https://stackoverflow.com/users/342947/fabian-zeindl"}, "is_accepted": false, "score": 2, "last_activity_date": 1470821536, "creation_date": 1470821536, "answer_id": 38869469, "question_id": 36012190, "link": "https://stackoverflow.com/questions/36012190/kotlin-abstract-class-with-generic-param-and-methods-which-use-type-param/38869469#38869469", "title": "Kotlin abstract class with generic param and methods which use type param", "body": "<p>You can give the abstract class a casting lambda:</p>\n\n<pre><code>abstract class AbstractClass&lt;T : Any&gt;(val delegate: MyService, val castFn: (Any) -&gt; T) {\n    fun myMethod(param: Any): T? {\n        return castFn(delegate.myMethod(param))\n    }\n}\n\nclass TesterWork(delegate: MyService) : AbstractClass&lt;Tester&gt;(delegate, {it as Tester}) {\n\n}\n</code></pre>\n\n<p>You could maybe also make the class non-abstract, give it an interface and let an inline function create it:</p>\n\n<pre><code>interface Inter&lt;T&gt; {\n    fun myMethod(param: Any): T\n}\n\nclass NotAbstractClass&lt;T&gt;(val delegate: MyService, val castFn: (Any) -&gt; T) : Inter&lt;T&gt; {\n    override fun myMethod(param: Any): T {\n        return castFn(delegate.myMethod(param))\n    }\n}\n\ninline fun &lt;reified T&gt; makeClass(delegate: MyService): Inter&lt;T&gt; {\n    return NotAbstractClass&lt;T&gt;(delegate, { it as T })\n}\n</code></pre>\n\n<p>Then you can delegate like this:</p>\n\n<pre><code>class TesterWork(delegate: MyService) : Inter&lt;Tester&gt; by makeClass(delegate)\n\nval service: MyService = MyService()\nval t: Tester? = TesterWork(service).myMethod(\"test\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "is_accepted": false, "score": 1, "last_activity_date": 1537268367, "creation_date": 1537268367, "answer_id": 52385059, "question_id": 36012190, "link": "https://stackoverflow.com/questions/36012190/kotlin-abstract-class-with-generic-param-and-methods-which-use-type-param/52385059#52385059", "title": "Kotlin abstract class with generic param and methods which use type param", "body": "<p>Thanks to Fabian Zeindly I wrote a variant for several extended classes. In this case all of them should be declared in a title of an abstract class.</p>\n\n<pre><code>abstract class AbstractAdapter&lt;V: AbstractAdapter.ViewHolder, I: AbstractAdapter.Item&gt; : RecyclerView.Adapter&lt;V&gt;() {\n\n    var list: List&lt;I&gt; = emptyList()\n\n    override fun getItemCount(): Int = list.size\n\n    open fun setItems(list: List&lt;I&gt;) {\n        this.list = list.toMutableList()\n    }\n\n    open class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView)\n\n    open class Item\n}\n</code></pre>\n\n<p>Then extend the class with new inner classes (ViewHolder, Item).</p>\n\n<pre><code>class NewAdapter(private var listener: View.OnClickListener?) : AbstractAdapter&lt;NewAdapter.ViewHolder, NewAdapter.Item&gt;() {\n\n    private var originalItems: List&lt;Item&gt; = emptyList()\n\n    override fun setItems(list: List&lt;Item&gt;) {\n        super.setItems(list)\n        this.originalItems = list.toMutableList()\n        this.list = list.toMutableList()\n    }\n\n    override fun onCreateViewHolder(viewGroup: ViewGroup, i: Int): ViewHolder {\n        val view = LayoutInflater.from(viewGroup.context)\n            .inflate(R.layout.layout, viewGroup, false)\n\n        return ViewHolder(view)\n    }\n\n    override fun onBindViewHolder(viewHolder: ViewHolder, i: Int) {\n        val item = list[i]\n        viewHolder.textView.text = item.text\n        viewHolder.textView.tag = item.id\n    }\n\n    class ViewHolder(itemView: View) : AbstractAdapter.ViewHolder(itemView) {\n        val textView: TextView = itemView.name\n    }\n\n    class Item(val id: Int, val text: String) : AbstractAdapter.Item()\n}\n</code></pre>\n"}], "owner": {"reputation": 4129, "user_id": 2119041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fe34ed62fa8e649e1af1b8cf4d06386?s=128&d=identicon&r=PG", "display_name": "NikolaB", "link": "https://stackoverflow.com/users/2119041/nikolab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8625, "favorite_count": 1, "accepted_answer_id": 36015007, "answer_count": 4, "score": 12, "last_activity_date": 1563976187, "creation_date": 1458047152, "last_edit_date": 1563976139, "question_id": 36012190, "link": "https://stackoverflow.com/questions/36012190/kotlin-abstract-class-with-generic-param-and-methods-which-use-type-param", "title": "Kotlin abstract class with generic param and methods which use type param", "body": "<p>I'm trying to create an abstract class with generic parameter which will have subclasses which should call methods <strong>without having to specify type parameters</strong>.\nI have this so far:</p>\n\n<pre><code>abstract class AbstractClass&lt;T : Any&gt; @Autowired constructor(protected val delegate: MyService) {\n    inline fun &lt;T: Any&gt; myMethod(param: Any): T? {\n        return delegate.myMethod(param).`as`(T::class.java)\n    }\n}\n</code></pre>\n\n<p>And implementation:</p>\n\n<pre><code>class TesterWork @Autowired constructor(delegate: MyService) : AbstractClass&lt;Tester&gt;(delegate) {\n}\n</code></pre>\n\n<p>Now when calling <code>myMethod</code> I have to specify the type argument:</p>\n\n<pre><code>testerWork.myMethod&lt;Tester&gt;(\"test\")\n</code></pre>\n\n<p>I was wondering would it be possible to infer the type argument automatically?\nCan I somehow rework myMethod? Note that I need to have <code>T::class.java</code> inside the method.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1458042866, "post_id": 36010331, "comment_id": 59672520, "body": "In other languages, you often have something like <code>val (_, b) = makePair()</code>. Nothing similar in Kotlin?"}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1458043040, "post_id": 36010331, "comment_id": 59672644, "body": "Somewhat similar question, and somewhat unsatisfactory answer: <a href=\"http://stackoverflow.com/questions/29046636/mark-unused-parameters-in-kotlin\" title=\"mark unused parameters in kotlin\">stackoverflow.com/questions/29046636/&hellip;</a>"}, {"owner": {"reputation": 6752, "user_id": 245614, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2b3631deb607f3f3ef38827324fc9390?s=128&d=identicon&r=PG", "display_name": "Trygve Laugst&#248;l", "link": "https://stackoverflow.com/users/245614/trygve-laugst%c3%b8l"}, "reply_to_user": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1458050126, "post_id": 36010331, "comment_id": 59677986, "body": "@Thilo Scala has it, but doesn&#39;t seem like there is anything like it in Kotlin. At least not yet."}], "answers": [{"tags": [], "owner": {"reputation": 102609, "user_id": 304, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9061706d2661cf0fa9f2df0eee56cf9b?s=128&d=identicon&r=PG", "display_name": "McDowell", "link": "https://stackoverflow.com/users/304/mcdowell"}, "is_accepted": false, "score": 3, "last_activity_date": 1458042438, "creation_date": 1458042438, "answer_id": 36010461, "question_id": 36010331, "link": "https://stackoverflow.com/questions/36010331/unused-arguments-when-destructing-an-object-in-kotlin/36010461#36010461", "title": "Unused arguments when destructing an object in Kotlin", "body": "<p>You could use:</p>\n\n<pre><code>val b = makePair().component2()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 9, "last_activity_date": 1491210894, "last_edit_date": 1491210894, "creation_date": 1458045187, "answer_id": 36011481, "question_id": 36010331, "link": "https://stackoverflow.com/questions/36010331/unused-arguments-when-destructing-an-object-in-kotlin/36011481#36011481", "title": "Unused arguments when destructing an object in Kotlin", "body": "<p>Since Kotlin 1.1, you can use an underscore to mark an unused component of a destructing declaration:</p>\n\n<pre><code>fun run() {\n    fun makePair() = Pair(\"Apple\", \"Orange\")\n\n    val (_, b) = makePair()\n\n    println(\"b = $b\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": false, "score": 0, "last_activity_date": 1458057720, "creation_date": 1458057720, "answer_id": 36016328, "question_id": 36010331, "link": "https://stackoverflow.com/questions/36010331/unused-arguments-when-destructing-an-object-in-kotlin/36016328#36016328", "title": "Unused arguments when destructing an object in Kotlin", "body": "<p>If you're only interested in the first couple of arguments you can omit the remaining ones. In your code that's not possible, but if you change the order of arguments, you can write it this way:</p>\n\n<pre><code>fun run() {\n    fun makePair() = Pair(\"Orange\", \"Apple\")\n\n    val (b) = makePair()\n\n    println(\"b = $b\")\n}\n</code></pre>\n"}], "owner": {"reputation": 6752, "user_id": 245614, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2b3631deb607f3f3ef38827324fc9390?s=128&d=identicon&r=PG", "display_name": "Trygve Laugst&#248;l", "link": "https://stackoverflow.com/users/245614/trygve-laugst%c3%b8l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1491210894, "creation_date": 1458042102, "question_id": 36010331, "link": "https://stackoverflow.com/questions/36010331/unused-arguments-when-destructing-an-object-in-kotlin", "title": "Unused arguments when destructing an object in Kotlin", "body": "<p>When destructuring an object, is it possible to only declare the variables I need?</p>\n\n<p>In this example I'm only using <code>b</code> and my IDE is giving me a warning that <code>a</code> is unused.</p>\n\n<pre><code>fun run() {\n    fun makePair() = Pair(\"Apple\", \"Orange\")\n\n    val (a, b) = makePair()\n\n    println(\"b = $b\")\n}\n</code></pre>\n"}, {"tags": ["protocol-buffers", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 5, "last_activity_date": 1458039033, "creation_date": 1458039033, "answer_id": 36009140, "question_id": 36007369, "link": "https://stackoverflow.com/questions/36007369/kotlin-to-override-protobuf-types-tostring/36009140#36009140", "title": "kotlin to override protobuf types toString", "body": "<p>It's not possible to change the implementation of an existing method in a class using Kotlin. An instance method defined in a class always takes priority over an extension function with the same signature.</p>\n"}], "owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 36009140, "answer_count": 1, "score": 2, "last_activity_date": 1458039033, "creation_date": 1458034448, "question_id": 36007369, "link": "https://stackoverflow.com/questions/36007369/kotlin-to-override-protobuf-types-tostring", "title": "kotlin to override protobuf types toString", "body": "<p>Suppose we have some data classes which are generated with <code>protoc</code>.</p>\n\n<p>Googles <code>toString()</code> sucks for multiple reasons, its not much human readable and even puts line breaks in representation which screws up logs and many tools that don't expect multiline log.</p>\n\n<p>So the problem is : <strong>how do we redefine custom toString() for a class like that?</strong></p>\n\n<p>I've tried to override (or maybe hide?) original <code>toString()</code> with an extension function like this</p>\n\n<pre><code>fun Messages.DataClass.toString(): String {\n    return \"some custom logic\"\n}\n</code></pre>\n\n<p>but it wont pick up the extended function</p>\n"}, {"tags": ["kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1458024320, "post_id": 36002173, "comment_id": 59660563, "body": "what is <code>Transaction() {...}</code>? I assume it is a function <code>fun Transaction(block: Transaction.() -&gt; Unit)</code>, but you didn&#39;t define one."}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 0, "last_activity_date": 1458024816, "creation_date": 1458024816, "answer_id": 36004484, "question_id": 36002173, "link": "https://stackoverflow.com/questions/36002173/kotlin-how-to-run-service-methods-in-the-context-of-a-transaction-class/36004484#36004484", "title": "Kotlin: How to run service methods in the context of a transaction class?", "body": "<p>The system works the other way around, so to fix the issue, swap the receivers:</p>\n\n<pre><code>fun main (args: Array&lt;String&gt;) {\n    UserService().apply {\n        Transaction().getUser() \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 453, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458024816, "creation_date": 1458012521, "last_edit_date": 1458013963, "question_id": 36002173, "link": "https://stackoverflow.com/questions/36002173/kotlin-how-to-run-service-methods-in-the-context-of-a-transaction-class", "title": "Kotlin: How to run service methods in the context of a transaction class?", "body": "<p>I'd like to define database calls in service methods, but have them executed in the context of a <code>Transaction</code> class without opening the connection in the service itself so that I can include multiple service calls in the same transaction.</p>\n\n<p>I'm looking for something like this, but can't quite figure it out.</p>\n\n<pre><code>class Transaction {\n  init { /** Grab connection **/ }\n\n  fun doSelect() { ... }\n}\n\nclass UserService {\n  fun Transaction.getUser() {\n    return doSelect()\n  }\n}\n\nfun main (args: Array&lt;String&gt;) {\n  Transaction() {\n    UserService().getUser() // INVALID\n    ...\n  }\n}\n</code></pre>\n\n<p>Is there a way to do this? </p>\n\n<p>I know that I can pass in a transaction instance to the service like so:</p>\n\n<pre><code>class UserService(tx: Transaction) {\n  fun getUser() {\n    with(tx) {\n      doSelect()\n    }\n  }\n...\n\nfun main (args: Array&lt;String&gt;) {\n  Transaction() {\n    UserService(this).getUser()\n    ...\n  }\n}\n</code></pre>\n\n<p>...but am hoping for a more elegant pattern.</p>\n"}, {"tags": ["rx-java", "kotlin", "kotlin-extension", "rx-kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1458023742, "post_id": 35995630, "comment_id": 59660331, "body": "please mark the question as closed"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 6, "last_activity_date": 1458135911, "last_edit_date": 1495539968, "creation_date": 1457989704, "answer_id": 35998109, "question_id": 35995630, "link": "https://stackoverflow.com/questions/35995630/can-i-create-a-kotlin-extension-method-for-adding-an-rxjava-subscription-to-a-co/35998109#35998109", "title": "Can I create a Kotlin extension method for adding an rxJava Subscription to a CompositeSubscription?", "body": "<p>Your function is defined incorrectly. Compare:</p>\n\n<pre><code>fun f() { println(\"hello\") }\n</code></pre>\n\n<p>This function executes the single statement <code>println(\"hello\")</code> and is a simple <a href=\"https://kotlinlang.org/docs/reference/functions.html#unit-returning-functions\" rel=\"nofollow noreferrer\"><code>Unit</code>-returning function</a> (same to <code>void</code> in Java). </p>\n\n<pre><code>fun g() = { println(\"hello\") }\n</code></pre>\n\n<p>This function is a <a href=\"https://kotlinlang.org/docs/reference/functions.html#single-expression-functions\" rel=\"nofollow noreferrer\">single-expression function</a>, it just returns value of expression <br><code>{ println(\"hello\") }</code>, that is a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expressions-and-anonymous-functions\" rel=\"nofollow noreferrer\">lambda expression</a>. <code>g</code>'s return type is <code>() -&gt; Unit</code>, <em>and it doesn't execute the lambda body!</em></p>\n\n<p>This is also <a href=\"https://stackoverflow.com/questions/36037442/kotlin-function-declaration-equals-sign-before-curly-braces/\">explained here</a>.\n<hr>\nTo fix your code, you can just remove <code>=</code> from your function declaration:</p>\n\n<pre><code>fun Subscription.addToComposite(composite: CompositeSubscription) { composite.add(this) }\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 1607552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2230ac7065ee447e423db5aa9186fbf?s=128&d=identicon&r=PG", "display_name": "grepx", "link": "https://stackoverflow.com/users/1607552/grepx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 35998109, "answer_count": 1, "score": 2, "last_activity_date": 1514828068, "creation_date": 1457981289, "last_edit_date": 1514828068, "question_id": 35995630, "link": "https://stackoverflow.com/questions/35995630/can-i-create-a-kotlin-extension-method-for-adding-an-rxjava-subscription-to-a-co", "title": "Can I create a Kotlin extension method for adding an rxJava Subscription to a CompositeSubscription?", "body": "<p>I've been playing with Kotlin/RxJava and tried to create an extension method for adding a <code>Subscription</code> to a <code>CompositeSubscription</code>, that would work like:</p>\n\n<pre><code>search.subscribe {\n       //do stuff\n}.addToComposite(compositeSubscription)\n</code></pre>\n\n<p>This is my attempt so far:</p>\n\n<pre><code>fun Subscription.addToComposite(composite: CompositeSubscription) = { composite.add(this) }\n</code></pre>\n\n<p>It compiles and runs without errors but doesn't seem to actually add the <code>Subscription</code> to the <code>CompositeSubscription</code>. Am I doing something wrong?</p>\n"}, {"tags": ["kotlin", "anko"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1457978399, "post_id": 35994258, "comment_id": 59642039, "body": "Wouldn&#39;t it make more sense to call the first constructor from the second one, and pass null as argument for the text? That&#39;s how you would do it in Java, too."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1457979136, "post_id": 35994258, "comment_id": 59642502, "body": "Which constructor does <code>LoadingButton(&quot;TEST&quot;)</code> call? I mean, they both have incompatible signatures.."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457980530, "post_id": 35994258, "comment_id": 59643389, "body": "@apouche please clarify your intend of <code>LoadingButton(&quot;TEST&quot;) </code>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457988233, "post_id": 35994258, "comment_id": 59647929, "body": "Even after the update I still do not get the situation, so here is a specifying question - you use <code>LoadingButton(&quot;TEST&quot;)</code>, but I do not see a constructor with a signature like <code>LoadingButton(String)</code>. Is this a typo? Assuming <code>Context</code> is not a <code>String</code>"}, {"owner": {"reputation": 8923, "user_id": 591482, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b2bdfddda0c3b0e56456e6050c818947?s=128&d=identicon&r=PG", "display_name": "apouche", "link": "https://stackoverflow.com/users/591482/apouche"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1458018630, "post_id": 35994258, "comment_id": 59658489, "body": "You&#39;re right @voddan I&#39;ve added the requested code in another edit"}], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1457981910, "post_id": 35995219, "comment_id": 59644208, "body": "You beet me to it @voddan (and are answers were almost the same)."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 8923, "user_id": 591482, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b2bdfddda0c3b0e56456e6050c818947?s=128&d=identicon&r=PG", "display_name": "apouche", "link": "https://stackoverflow.com/users/591482/apouche"}, "edited": false, "score": 0, "creation_date": 1458029795, "post_id": 35995219, "comment_id": 59663173, "body": "@apouche Ok, that&#39;s my answer there"}, {"owner": {"reputation": 8923, "user_id": 591482, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b2bdfddda0c3b0e56456e6050c818947?s=128&d=identicon&r=PG", "display_name": "apouche", "link": "https://stackoverflow.com/users/591482/apouche"}, "edited": false, "score": 1, "creation_date": 1458035622, "post_id": 35995219, "comment_id": 59667110, "body": "very clear thanks and thanks for the Swift -&gt; Kotlin naming translation"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 22, "last_activity_date": 1458032267, "last_edit_date": 1458032267, "creation_date": 1457980042, "answer_id": 35995219, "question_id": 35994258, "link": "https://stackoverflow.com/questions/35994258/call-a-default-constructor-from-another-one-in-kotlin/35995219#35995219", "title": "Call a default constructor from another one in Kotlin", "body": "<p>The code with a post-call to a constructor cannot exist on JVM since you MUST call <code>super(...)</code> <strong>before</strong> you do anything with the class itself. Think of it as if the super class contained a private field, you would have to initialise it before you can use it.</p>\n\n<p>This is usually not a problem since you can call the constructors the other way around:</p>\n\n<pre><code>constructor(context: Context, text: String?) : super(context) {\n    this.text = text\n    this.view {\n        button(text) { /* ... */}\n    }\n}\nconstructor(context: Context) : this(context, null)\nconstructor(context: Context, text: String) : this(context, text)\n</code></pre>\n\n<p>The code above does roughly the same as a default argument:</p>\n\n<pre><code>constructor(context: Context, text: String? = null) : super(context) {\n    this.text = text\n    this.view {\n        button(text) { /* ... */}\n    }\n}\n</code></pre>\n\n<p>To make this code idiomatic (and concise), use a <strong>primary</strong> constructor:</p>\n\n<pre><code>class LoadingButton(context: Context, val text: String? = null): LinearLayout(context) {\n    init {\n        this.view {\n            button(text) { /* ... */}\n        }\n    }\n}\n</code></pre>\n\n<p>The terminology goes as following: designated - primary, convenience - secondary </p>\n\n<p>See <a href=\"https://kotlinlang.org/docs/reference/classes.html\" rel=\"noreferrer\">Classes and Inheritance - Kotlin Programming Language</a> for more details.</p>\n"}], "owner": {"reputation": 8923, "user_id": 591482, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b2bdfddda0c3b0e56456e6050c818947?s=128&d=identicon&r=PG", "display_name": "apouche", "link": "https://stackoverflow.com/users/591482/apouche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9372, "favorite_count": 1, "accepted_answer_id": 35995219, "answer_count": 1, "score": 14, "last_activity_date": 1458032267, "creation_date": 1457976761, "last_edit_date": 1458026349, "question_id": 35994258, "link": "https://stackoverflow.com/questions/35994258/call-a-default-constructor-from-another-one-in-kotlin", "title": "Call a default constructor from another one in Kotlin", "body": "<p>In Kotlin, when a class has multiple constructors how can we call the <em>designated</em> (coming from iOS world I could not find a better name) constructor from within another constructor.</p>\n\n<p>Let me show you an example</p>\n\n<pre><code>final class LoadingButton: LinearLayout {\n    var text:String? = null\n\n    constructor(context: Context, text: String) : this(context) {\n        this.text = text\n    }\n    constructor(context: Context) : super(context) {\n        val t = this.text\n        this.view {\n            button(t) { /* ... */}\n        }\n    }\n}\n</code></pre>\n\n<p>Here if I do <code>loadingButton(\"TEST\", {})</code> that string is not propagated to the button because <code>this(context)</code> is called before the code inside the <em>convenience</em> constructor (sorry again :). </p>\n\n<p>Can that be solved in Kotlin ? Something like</p>\n\n<pre><code>constructor(context: Context, text: String) {\n    this.text = text\n    this(context) \n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Just to clarify the idea since it's been asked, the idea is to write something like this in an activity :</p>\n\n<pre><code>onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n    verticalLayout {\n        loadingButton(\"Some text\")\n        //or\n        loadingButton() { this.text = \"Some text\"}\n}\n</code></pre>\n\n<p>This is obviously not that much useful but you get the idea. The text property can be known at construction or later on. </p>\n\n<p>This is especially not useful since Kotlin has default values for parameters but I am studying the language and ran into this problem.</p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Another clarification is that I'm using <a href=\"https://github.com/Kotlin/anko\" rel=\"noreferrer\">Anko</a> for the layout, so the <code>loadingButton</code> methods look like this:</p>\n\n<pre><code>inline fun ViewManager.loadingButton() = loadingButton {  }\ninline fun ViewManager.loadingButton(init: LoadingButton.() -&gt; Unit) = ankoView({ LoadingButton(it) }, init)\ninline fun ViewManager.loadingButton(text: String, init: LoadingButton.() -&gt; Unit) = ankoView({ LoadingButton(it, text) }, init)\n</code></pre>\n"}, {"tags": ["java", "spring", "spring-mvc", "kotlin"], "comments": [{"owner": {"reputation": 693, "user_id": 425993, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1267cef00f1c7f190e1912bc50d1e6e5?s=128&d=identicon&r=PG", "display_name": "Ace.Yin", "link": "https://stackoverflow.com/users/425993/ace-yin"}, "edited": false, "score": 0, "creation_date": 1468835817, "post_id": 35981697, "comment_id": 64272857, "body": "hi @ZhangZuoliang, i am trying to use Kotlin in web app development, and i have some concerns about how to start it. Can you touch me via QQ: 17008864 ?"}], "answers": [{"tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 5, "last_activity_date": 1457940905, "last_edit_date": 1592644375, "creation_date": 1457940905, "answer_id": 35981841, "question_id": 35981697, "link": "https://stackoverflow.com/questions/35981697/use-kotlin-for-springmvc-could-not-instantiate-bean-class-dataclass/35981841#35981841", "title": "use kotlin for springmvc Could not instantiate bean class dataclass", "body": "<p>From <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n<blockquote>\n<p>On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).</p>\n<pre><code>data class User(val name: String = &quot;&quot;, val age: Int = 0)\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 35, "user_id": 5949026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9dd33e6a4d96816f6d3bd07736f08c6?s=128&d=identicon&r=PG&f=1", "display_name": "ZhangZuoliang", "link": "https://stackoverflow.com/users/5949026/zhangzuoliang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1611, "favorite_count": 0, "accepted_answer_id": 35981841, "answer_count": 1, "score": 2, "last_activity_date": 1457940905, "creation_date": 1457940347, "question_id": 35981697, "link": "https://stackoverflow.com/questions/35981697/use-kotlin-for-springmvc-could-not-instantiate-bean-class-dataclass", "title": "use kotlin for springmvc Could not instantiate bean class dataclass", "body": "<p>i'm use the kotlin to ceate a simple ArticlesService,i create a Articles dataclass </p>\n\n<pre><code>data class Articles(var artid: Int, var artTitle: String, var artContent: String, var artAut: String, var artTime: Date)\n</code></pre>\n\n<p>but the class Could not instantiate bean class:No default constructor found; nested exception is java.lang.NoSuchMethodException: com.zxl.blog.server.Articles.()</p>\n\n<pre><code>@Controller\nclass mainServer() {\n@Autowired val artSer: ArticlesService? = null\n@RequestMapping(\"/i\")\nfun fuwuqi(name: String, model: ModelMap): String {\n    model.put(\"name\", name)\n    return \"i\"\n}\n\n@RequestMapping(value = \"/saveArt\", method = arrayOf(RequestMethod.POST))\nfun saveArt(art: Articles): String {\n    return if (artSer!!.save(art)) \"saved\" else \"savefail\";\n}\n\n@RequestMapping(\"/arts\")\nfun arts(): String {\n    return \"articles\";\n}\n}\n</code></pre>\n\n<p>i think maybe the spring mvc not support the kotlin dataclass auto inject right?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 4, "creation_date": 1457945181, "post_id": 35981437, "comment_id": 59618974, "body": "There is another &quot;trick&quot;. Write a variable with the correct type <code>val a: MainActivity =</code> and invoke smart completion (Ctrl+Shift+Space). IntelliJ will suggest the expression <code>this@MainActivity</code>."}, {"owner": {"reputation": 1148, "user_id": 1718518, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/2e0bb9684b8efbf6aed5efa3fd883126?s=128&d=identicon&r=PG", "display_name": "Josh Hansen", "link": "https://stackoverflow.com/users/1718518/josh-hansen"}, "edited": false, "score": 1, "creation_date": 1518826042, "post_id": 35981437, "comment_id": 84677985, "body": "Followup question in case anybody feels like asking: why is this <i>not</i> done the same as in Java? This is a very strange syntax I&#39;ve never seen anywhere else."}, {"owner": {"reputation": 4264, "user_id": 1254514, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c5a0b9d3116efcc13a842d89ada3988a?s=128&d=identicon&r=PG", "display_name": "Paul Spiesberger", "link": "https://stackoverflow.com/users/1254514/paul-spiesberger"}, "edited": false, "score": 7, "creation_date": 1524761903, "post_id": 35981437, "comment_id": 87112956, "body": "Don&#39;t forget to use <code>inner</code> keyword before the class declaration like <code>inner class A()</code>."}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 44, "last_activity_date": 1457939309, "creation_date": 1457939309, "answer_id": 35981437, "question_id": 35981357, "link": "https://stackoverflow.com/questions/35981357/how-to-reference-the-instance-of-the-outside-class-in-kotlin/35981437#35981437", "title": "How to reference the instance of the outside class in Kotlin?", "body": "<p>You can use <code>this@MainActivity</code> to reference the outer class instance.</p>\n\n<p>Tip: I couldn't remember the syntax either, so I just wrote a simple example in Java and asked IntelliJ to convert the class to Kotlin to find the answer.</p>\n"}], "owner": {"reputation": 1982, "user_id": 1426489, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Oc1H5.jpg?s=128&g=1", "display_name": "Jezer Crespo", "link": "https://stackoverflow.com/users/1426489/jezer-crespo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4522, "favorite_count": 1, "accepted_answer_id": 35981437, "answer_count": 1, "score": 26, "last_activity_date": 1457939667, "creation_date": 1457938992, "last_edit_date": 1457939667, "question_id": 35981357, "link": "https://stackoverflow.com/questions/35981357/how-to-reference-the-instance-of-the-outside-class-in-kotlin", "title": "How to reference the instance of the outside class in Kotlin?", "body": "<p>I'm inside an anonymous inner class and wanting to reference the instance of the outside class. In Java it can be referenced using <code>.this</code> preceded by the class name to resolve ambiguity. Like: <code>MainActivity.this</code>. How can I achieve the same in Kotlin? Because the compiler is complaining <code>'expression 'this' cannot be a selector(occur after a dot)'</code> when I do that. Thanks!</p>\n"}, {"tags": ["kotlin", "infix-notation"], "answers": [{"tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 6, "last_activity_date": 1457906908, "creation_date": 1457906908, "answer_id": 35976487, "question_id": 35976405, "link": "https://stackoverflow.com/questions/35976405/infix-notation-and-with-does-not-work-as-i-expected/35976487#35976487", "title": "Infix notation and with(...) does not work as I expected", "body": "<p>Infix notation is about the syntax of the way it's used.  It works with an object on the left and the parameter on the right.</p>\n\n<p>When using <code>with</code> you no longer have an object token on the left, so the special syntax for infix notation no longer works.  You have to fall back to the regular function notation.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1457907152, "creation_date": 1457907152, "answer_id": 35976535, "question_id": 35976405, "link": "https://stackoverflow.com/questions/35976405/infix-notation-and-with-does-not-work-as-i-expected/35976535#35976535", "title": "Infix notation and with(...) does not work as I expected", "body": "<p>This restriction is necessary for the parser to parse the code without conflicts with other syntax. </p>\n"}], "owner": {"reputation": 1576, "user_id": 2686165, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Sqsiz.png?s=128&g=1", "display_name": "Limnic", "link": "https://stackoverflow.com/users/2686165/limnic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 1, "accepted_answer_id": 35976487, "answer_count": 2, "score": 4, "last_activity_date": 1457907152, "creation_date": 1457906429, "question_id": 35976405, "link": "https://stackoverflow.com/questions/35976405/infix-notation-and-with-does-not-work-as-i-expected", "title": "Infix notation and with(...) does not work as I expected", "body": "<p>Consider the following scenario:\nI have a class <strong>Test</strong></p>\n\n<pre><code>class Test() {\n    infix fun say(msg: String) = println(msg)\n}\n</code></pre>\n\n<p>and a main method</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val test = Test()\n\n    test say \"Hello World!\" //Works\n\n    with(test) {\n        say \"Goodbye World!\" //Does not work\n        say(\"Hello again!\") //Works\n    }\n}\n</code></pre>\n\n<p>As you can see I'm testing out the infix notation. Considering <code>with(...)</code> allows you to work with the object passed as parameter in the <em>with</em> block \nwithout having to access its members through the dot notation, I would expect the infix notation to work like I show in my example above.</p>\n\n<p>Unfortunately this does not work, is there a reason why this does not work? Is it a bug or simply a limitation? Or perhaps I am not interpreting the <code>with(...)</code> function correctly?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 1, "creation_date": 1457943774, "post_id": 35976002, "comment_id": 59618212, "body": "You can use enums freely, they are not &#39;slow&#39; in any sense (<a href=\"http://stackoverflow.com/questions/5143256/why-was-avoid-enums-where-you-only-need-ints-removed-from-androids-performanc\" title=\"why was avoid enums where you only need ints removed from androids performanc\">stackoverflow.com/questions/5143256/&hellip;</a>)"}, {"owner": {"reputation": 1583, "user_id": 1583039, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5415610437f529f596e7c0901d70f356?s=128&d=identicon&r=PG", "display_name": "curioushikhov", "link": "https://stackoverflow.com/users/1583039/curioushikhov"}, "reply_to_user": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 0, "creation_date": 1457950524, "post_id": 35976002, "comment_id": 59622256, "body": "@AlexanderUdalov, 1) <a href=\"https://www.youtube.com/watch?v=Hzs6OBcvNQE\" rel=\"nofollow noreferrer\">youtube.com/watch?v=Hzs6OBcvNQE</a> 2) enums are not parcelable by default which also adds boilerplate code when it needed to pass to intent params 3) when value received from network the way to convert it to enum is obscure and eliminates enum safety."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1457962879, "post_id": 35976002, "comment_id": 59630685, "body": "@curioushikhov ProGuard &quot;simplifies enum types to integer constants, whenever possible&quot; (<a href=\"http://proguard.sourceforge.net/manual/optimizations.html\" rel=\"nofollow noreferrer\">Optimizations</a>)."}, {"owner": {"reputation": 1583, "user_id": 1583039, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5415610437f529f596e7c0901d70f356?s=128&d=identicon&r=PG", "display_name": "curioushikhov", "link": "https://stackoverflow.com/users/1583039/curioushikhov"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1457965996, "post_id": 35976002, "comment_id": 59633061, "body": "@mfulton26 it is true only for the simplest case, when you need to implement parcelable all the proguard magic is gone."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1539740997, "post_id": 35976002, "comment_id": 92608418, "body": "It is not working as refer to in <a href=\"https://stackoverflow.com/questions/37833395/kotlin-annotation-intdef\" title=\"kotlin annotation intdef\">stackoverflow.com/questions/37833395/kotlin-annotation-intde&zwnj;&#8203;f</a>"}, {"owner": {"reputation": 2775, "user_id": 2102748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1adcb8ed924ecd1045fd6252a7df18?s=128&d=identicon&r=PG", "display_name": "milosmns", "link": "https://stackoverflow.com/users/2102748/milosmns"}, "edited": false, "score": 0, "creation_date": 1565944072, "post_id": 35976002, "comment_id": 101509396, "body": "Enums are serializable though"}], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": false, "score": 11, "last_activity_date": 1457944486, "creation_date": 1457944486, "answer_id": 35982765, "question_id": 35976002, "link": "https://stackoverflow.com/questions/35976002/how-to-use-android-support-typedef-annotations-in-kotlin/35982765#35982765", "title": "How to use Android Support typedef annotations in kotlin?", "body": "<p>There's currently no way to achieve exactly this in Kotlin, since an annotation class cannot have a body and thus you cannot declare a constant in it which would be processed by <code>IntDef</code>. I've created an issue in the tracker: <a href=\"https://youtrack.jetbrains.com/issue/KT-11392\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-11392</a></p>\n\n<p>For your problem though, I recommend you use a simple enum.</p>\n"}, {"comments": [{"owner": {"reputation": 3473, "user_id": 2740621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MpxtQ.png?s=128&g=1", "display_name": "AutonomousApps", "link": "https://stackoverflow.com/users/2740621/autonomousapps"}, "edited": false, "score": 26, "creation_date": 1507765282, "post_id": 38537175, "comment_id": 80345749, "body": "I have done this, but Kotlin doesn&#39;t seem to enforce this constraint at all. I can provide any int/long where <code>@Speed</code> is required, and it doesn&#39;t care."}, {"owner": {"reputation": 3473, "user_id": 2740621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MpxtQ.png?s=128&g=1", "display_name": "AutonomousApps", "link": "https://stackoverflow.com/users/2740621/autonomousapps"}, "edited": false, "score": 2, "creation_date": 1507765314, "post_id": 38537175, "comment_id": 80345767, "body": "Btw, it requires a <code>Long</code> because <code>@IntDef</code> is defined as taking an array of <code>long</code> -- <code>long[] value() default {};</code>"}, {"owner": {"reputation": 2775, "user_id": 2102748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1adcb8ed924ecd1045fd6252a7df18?s=128&d=identicon&r=PG", "display_name": "milosmns", "link": "https://stackoverflow.com/users/2102748/milosmns"}, "edited": false, "score": 1, "creation_date": 1565944179, "post_id": 38537175, "comment_id": 101509443, "body": "It&#39;s correct in the sense that this is the right way to do the same thing in Kotlin. The code compiles and the compiler is aware of all annotations. But also, the IDE or compiler don&#39;t throw an error on this, so that&#39;s a separate issue :)"}], "tags": [], "owner": {"reputation": 3838, "user_id": 4499783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dfC5o.png?s=128&g=1", "display_name": "Ronald Martin", "link": "https://stackoverflow.com/users/4499783/ronald-martin"}, "is_accepted": true, "score": 38, "last_activity_date": 1558742823, "last_edit_date": 1558742823, "creation_date": 1469236067, "answer_id": 38537175, "question_id": 35976002, "link": "https://stackoverflow.com/questions/35976002/how-to-use-android-support-typedef-annotations-in-kotlin/38537175#38537175", "title": "How to use Android Support typedef annotations in kotlin?", "body": "<blockquote>\n  <p><strong>Edit:</strong> In case you miss the comments on the question or this answer, it's worth noting that the following technique compiles,\n  but does <em>not</em> create the compile-time validation you would get in\n  Java (which partially defeats the purpose of doing this). Consider using an <a href=\"https://kotlinlang.org/docs/reference/enum-classes.html\" rel=\"nofollow noreferrer\">enum\n  class</a>\n  instead.</p>\n</blockquote>\n\n<hr>\n\n<p>It is actually possible to use the <code>@IntDef</code> support annotation by defining your values <em>outside</em> of the annotation class as <code>const val</code>s.</p>\n\n<p>Using your example:</p>\n\n<pre><code>import android.support.annotation.IntDef\n\npublic class Test {\n\n    companion object {\n\n         @IntDef(SLOW, NORMAL, FAST)\n         @Retention(AnnotationRetention.SOURCE)\n         annotation class Speed\n\n         const val SLOW = 0L\n         const val NORMAL = 1L\n         const val FAST = 2L\n    }\n\n    @Speed\n    private lateinit var speed: Long\n\n    public fun setSpeed(@Speed speed: Long) {\n        this.speed = speed\n    }\n}\n</code></pre>\n\n<p>Note that at this point the compiler seems to require the <code>Long</code> type for the <code>@IntDef</code> annotation instead of actual <code>Int</code>s.</p>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 4072786, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Urlk6.jpg?s=128&g=1", "display_name": "Fan Applelin", "link": "https://stackoverflow.com/users/4072786/fan-applelin"}, "is_accepted": false, "score": 2, "last_activity_date": 1496057363, "creation_date": 1496057363, "answer_id": 44241435, "question_id": 35976002, "link": "https://stackoverflow.com/questions/35976002/how-to-use-android-support-typedef-annotations-in-kotlin/44241435#44241435", "title": "How to use Android Support typedef annotations in kotlin?", "body": "<p>Use this:</p>\n\n<pre><code>companion object {\n    const val FLAG_PAGE_PROCESS = 0L//\u5f85\u5904\u7406\n    const val FLAG_PAGE_EXCEPTION = 1L//\u8bbe\u5907\u5f02\u5e38\n    const val FLAG_PAGE_UNCHECKED = 2L//\u672a\u5ba1\u6838\n    const val FLAG_PAGE_AUDIT = 3L//\u7edf\u8ba1\n    val FLAG_PAGE = \"FLAG_PAGE\"\n\n    fun newInstance(@FlagPageDef flagPage: Int): RepairFormsListFragment {\n        val fragment = RepairFormsListFragment()\n        val args = Bundle()\n        fragment.arguments = args\n        return fragment\n    }\n\n    @Retention(AnnotationRetention.SOURCE)\n    @IntDef(FLAG_PAGE_PROCESS, FLAG_PAGE_EXCEPTION, FLAG_PAGE_UNCHECKED, FLAG_PAGE_AUDIT)\n    annotation class FlagPageDef\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 305, "user_id": 4826170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5566a85dd329eef84cf7126419716926?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor Valencia", "link": "https://stackoverflow.com/users/4826170/viktor-valencia"}, "edited": false, "score": 1, "creation_date": 1536703314, "post_id": 50204096, "comment_id": 91517777, "body": "This must be the right answer cause this implementation forces to use the constants already defined in the interface and that is the objective of the enums and TypeDefs, Thanks a lot!"}, {"owner": {"reputation": 862, "user_id": 4036390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ubSLc.jpg?s=128&g=1", "display_name": "Oz Shabat", "link": "https://stackoverflow.com/users/4036390/oz-shabat"}, "edited": false, "score": 0, "creation_date": 1553855720, "post_id": 50204096, "comment_id": 97549896, "body": "That&#39;s the best for now (kotlin 1.3)"}], "tags": [], "owner": {"reputation": 862, "user_id": 4036390, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ubSLc.jpg?s=128&g=1", "display_name": "Oz Shabat", "link": "https://stackoverflow.com/users/4036390/oz-shabat"}, "is_accepted": false, "score": 5, "last_activity_date": 1595494568, "last_edit_date": 1595494568, "creation_date": 1525637530, "answer_id": 50204096, "question_id": 35976002, "link": "https://stackoverflow.com/questions/35976002/how-to-use-android-support-typedef-annotations-in-kotlin/50204096#50204096", "title": "How to use Android Support typedef annotations in kotlin?", "body": "<p>Update:</p>\n<p>Forget @IntDef and @StringDef, Now, with ART, you can use enums instead.</p>\n<p>From the official GoogleIO:</p>\n<h2><a href=\"https://www.youtube.com/watch?v=IrMw7MEgADk&amp;feature=youtu.be&amp;t=857\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=IrMw7MEgADk&amp;feature=youtu.be&amp;t=857</a></h2>\n<p>Plus, if you're still not sure if you should use enums, you can hear a bunch of people yelling at each other in the comments of the first answer over here:\n<a href=\"https://stackoverflow.com/a/37839539/4036390\">https://stackoverflow.com/a/37839539/4036390</a></p>\n<hr />\n<p>Old answer:</p>\n<p>Just create the @IntDef class as a java class and access it via kotlin code.</p>\n<p>Example:</p>\n<ol>\n<li><p>Create your type class:</p>\n<p>public class mType {\n@IntDef({typeImpl.type1, typeImpl.type2, typeImpl.type3})\n@Retention(RetentionPolicy.SOURCE)\npublic @interface typeImpl {\nint type1 = 0;\nint type2 = 1;\nint type3 = 2;\n}\n}</p>\n</li>\n<li><p>Put this function in any Kotlin object:</p>\n<p>object MyObject{\nfun accessType(@mType.typeImpl mType: Int) {\n...\n}\n}</p>\n</li>\n<li><p>then access it:</p>\n<p>fun somOtherFunc(){\nMyObject.accessType(type1)\n}</p>\n</li>\n</ol>\n<p>**Notice: you don't have to put the access method inside an object.</p>\n"}], "owner": {"reputation": 1583, "user_id": 1583039, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5415610437f529f596e7c0901d70f356?s=128&d=identicon&r=PG", "display_name": "curioushikhov", "link": "https://stackoverflow.com/users/1583039/curioushikhov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12860, "favorite_count": 9, "accepted_answer_id": 38537175, "answer_count": 4, "score": 35, "last_activity_date": 1617395580, "creation_date": 1457903947, "last_edit_date": 1469236685, "question_id": 35976002, "link": "https://stackoverflow.com/questions/35976002/how-to-use-android-support-typedef-annotations-in-kotlin", "title": "How to use Android Support typedef annotations in kotlin?", "body": "<p>I develop Android applications and often use annotations as compile time parameter checks, mostly android's <a href=\"http://tools.android.com/tech-docs/support-annotations\" rel=\"noreferrer\">support annotations</a>.</p>\n\n<p>Example in java code:</p>\n\n<pre><code>public class Test\n{\n    @IntDef({Speed.SLOW,Speed.NORMAL,Speed.FAST})\n    public @interface Speed\n    {\n         public static final int SLOW = 0;\n         public static final int NORMAL = 1;\n         public static final int FAST = 2;\n    }\n\n    @Speed\n    private int speed;\n\n    public void setSpeed(@Speed int speed)\n    {\n        this.speed = speed;\n    }\n}\n</code></pre>\n\n<p>I don't want to use enums because of their performance issues in Android. The automatic converter to kotlin just generates invalid code. How do I use the <code>@IntDef</code> annotation in kotlin?</p>\n"}, {"tags": ["generics", "lambda", "kotlin"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1457894955, "post_id": 35973872, "comment_id": 59602922, "body": "Any reason this needs to be a companion object and not its own class?"}, {"owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1457895069, "post_id": 35973872, "comment_id": 59602974, "body": "@DougStevenson Because I only intend for there to be a single instance of the EventHandler. I tried making it an <code>object</code> instead of a <code>class</code> and that doesn&#39;t fix it (as I expected)"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1457895169, "post_id": 35973872, "comment_id": 59603003, "body": "Kotlin has its own way of doing singletons: <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/object-declarations.html</a>"}, {"owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1457895215, "post_id": 35973872, "comment_id": 59603029, "body": "@DougStevenson I tried that as well, which didn&#39;t work"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1457897919, "post_id": 35973872, "comment_id": 59604157, "body": "I think what you&#39;re asking for here is the same as asking for the method signature <code>fun foo(x: SuperClass): Unit</code> to be equivalent to <code>fun foo(x: SubClass): Unit</code>. All you&#39;ve done is taken out the name foo.  From a method signature point of view, they&#39;re very much not the same."}, {"owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1457899490, "post_id": 35973872, "comment_id": 59604690, "body": "@DougStevenson <code>T</code> should be <code>Event</code> or a subclass, yes? And being that the lambda would take any <code>Event</code> as a parameter, it would take <code>Event</code> and any subclass. So shouldn&#39;t this work?"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 1, "creation_date": 1457899703, "post_id": 35973872, "comment_id": 59604777, "body": "It could take any event as a parameter, but it would only ever be the basic type Event, and not the subclass type. Just like regular methods, the type of the parameters to the lambda must be absolutely known at compile time.  It can&#39;t be ambiguous or circumstantial.  So you have to cast it in the lambda in order to get a more specific type if that&#39;s what you want."}, {"owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1457900054, "post_id": 35973872, "comment_id": 59604904, "body": "@DougStevenson Ah, that makes sense! The lambda that I pass in must take an event, as <code>(Event) -&gt; Unit</code> and <code>(ChatEvent) -&gt; Unit</code> would be completely separate types."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1458000966, "post_id": 35973872, "comment_id": 59653495, "body": "@Deanveloper by the way, why do use two maps to store an event handler registration? Isn&#39;t one <code>HashMap&lt;KClass&lt;out Event&gt;, (Event) -&gt; Unit&gt;</code> enough?"}, {"owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1458053498, "post_id": 35973872, "comment_id": 59680719, "body": "@Ilya I&#39;d like to add a way to remove the events later, which either means have the front-end user store their runnable (which would look ugly) or return an integer id which they can later use to unregister their listener"}], "answers": [{"tags": [], "owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "is_accepted": true, "score": 4, "last_activity_date": 1457900960, "creation_date": 1457900960, "answer_id": 35975416, "question_id": 35973872, "link": "https://stackoverflow.com/questions/35973872/putting-a-generic-lambda-into-a-map/35975416#35975416", "title": "Putting a generic lambda into a map", "body": "<p>The problem comes from the fact that <code>idMap</code> takes a function that receives an <code>Event</code> - <em>any</em> kind of <code>Event</code>.\nThen you try to register a function that takes a specified subclass of <code>Event</code>, which, when you pull it back out, the compiler won't be able to tell what possible subclass it receives. Yes, you're storing the specific type in your other map, but the compiler can't use that.</p>\n\n<p>I do not believe you can create the mapping system that you want to create. Not without a few more layers of indirection or abstraction...</p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 3, "last_activity_date": 1457998034, "last_edit_date": 1495541257, "creation_date": 1457998034, "answer_id": 35999974, "question_id": 35973872, "link": "https://stackoverflow.com/questions/35973872/putting-a-generic-lambda-into-a-map/35999974#35999974", "title": "Putting a generic lambda into a map", "body": "<p>The reason you get this error is explained well by @jacob-zimmerman in his <a href=\"https://stackoverflow.com/a/35975416/869184\" title=\"answer\">answer</a>: <code>(T) -&gt; Unit</code> is not a subtype of <code>(Event) -&gt; Unit</code> (on the contrary it is a supertype).</p>\n\n<p>You could make an unchecked downcast to required function type:</p>\n\n<pre><code>idMap[id] = handler as (Event) -&gt; Unit\n</code></pre>\n\n<p>But then before invoking such handler you must check that an event has type that the handler could accept, for example by querying handler from map based on the type of the event:</p>\n\n<pre><code>fun invoke(event: Event) {\n    val kclass = event.javaClass.kotlin\n    val eventHandlers = handlers[kclass]?.map { idMap[it]!! } ?: return\n    eventHandlers.forEach { it.invoke(event) }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "is_accepted": false, "score": 1, "last_activity_date": 1460060547, "creation_date": 1460060547, "answer_id": 36486448, "question_id": 35973872, "link": "https://stackoverflow.com/questions/35973872/putting-a-generic-lambda-into-a-map/36486448#36486448", "title": "Putting a generic lambda into a map", "body": "<p>I figured out an implementation:</p>\n\n<pre><code>class Handlers&lt;T: Event&gt; {\n    val backingList = ArrayList&lt;(T) -&gt; Unit&gt;()\n\n    fun add(handler: (T) -&gt; Unit) {\n        backingList.add(handler)\n    }\n\n    fun remove(handler: (T) -&gt; Unit) {\n         backingList.remove(handler)\n    }\n\n    fun handleEvent(event: T) {\n        backingList.forEach { handle -&gt;\n            handle(event)\n        }\n    }\n}\n\nclass HandlerMap {\n     val handlerMap = HashMap&lt;KClass&lt;out Event&gt;, Handlers&lt;out Event&gt;&gt;()\n\n    fun &lt;T : Event&gt; register(event: KClass&lt;T&gt;, handler: (T) -&gt; Unit) {\n        val list: Handlers&lt;T&gt;\n        if(!handlerMap.containsKey(event)) {\n            list = Handlers&lt;T&gt;()\n            handlerMap.put(event, list)\n        }\n        else {\n            list = handlerMap.get(event) as Handlers&lt;T&gt;\n        }\n\n        list.add(handler)        \n    }\n\n    fun &lt;T: Event&gt; getHandlers(event: KClass&lt;T&gt;): Handlers&lt;T&gt; {\n        return handlerMap.get(event) as Handlers&lt;T&gt;\n    }\n}\n</code></pre>\n\n<p>It has to do some casting due to the Map being kind of open, but the system is closed, so the <code>Handlers</code> object is guaranteed to be of the exactly right type.\nDue to the implementation change, I was pretty sure you didn't care about the index/\"id\" anymore, but I tried an implementation with it, and it was fine; no real trouble to put it in if you want it.</p>\n"}], "owner": {"reputation": 95, "user_id": 3396646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b596e59d7cc64f986a0c057925b544?s=128&d=identicon&r=PG&f=1", "display_name": "Deanveloper", "link": "https://stackoverflow.com/users/3396646/deanveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1058, "favorite_count": 1, "accepted_answer_id": 35975416, "answer_count": 3, "score": 4, "last_activity_date": 1460060547, "creation_date": 1457892700, "last_edit_date": 1457894765, "question_id": 35973872, "link": "https://stackoverflow.com/questions/35973872/putting-a-generic-lambda-into-a-map", "title": "Putting a generic lambda into a map", "body": "<p>Ok so the code below is an event system that does the following:</p>\n\n<ol>\n<li>Assigns an integer id to a lambda expression</li>\n<li>Puts the lambda's id in an event's mutable set</li>\n<li>Maps the integer ID to the lambda expression</li>\n<li>Returns the id (can be used later to remove events from the lambda)</li>\n</ol>\n\n<p>The code is as follows:</p>\n\n<pre><code>class EventHandler {\n    companion object {\n        val handlers = HashMap&lt;KClass&lt;out Event&gt;, MutableSet&lt;Int&gt;&gt;()\n        val idMap = HashMap&lt;Int, (Event) -&gt; Unit&gt;();\n\n        /**\n         * @param event     Class of the event you are registering\n         * @param handler   What to do when the event is called\n         */\n        fun &lt;T : Event&gt; register(event: KClass&lt;T&gt;, handler: (T) -&gt; Unit): Int {\n            var id: Int = 0;\n            while(idMap[id] != null) {\n                id++;\n            }\n            var list = handlers.getOrPut(event, {mutableSetOf()});\n            list.add(id);\n            idMap[id] = handler;\n            return id;\n        }\n    }\n}\n</code></pre>\n\n<p>The intended use of this method would be something like this:</p>\n\n<pre><code>EventHandler.register(ChatEvent::class) { onChat -&gt;\n    println(onChat.message)\n}\n</code></pre>\n\n<p>There is an error at the following line: <code>idMap[id] = handler;</code></p>\n\n<p>The error is because the handler is of type <code>(T) -&gt; Unit</code>, although it needs to be <code>(Event) -&gt; Unit</code> in order to add it to the <code>idMap</code>. Although I said that <code>T</code> should extend <code>Event</code> when I created it, so this shouldn't be a problem. Does anyone know why this happens of if there is a solution?</p>\n"}, {"tags": ["groovy", "kotlin"], "comments": [{"owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "edited": false, "score": 0, "creation_date": 1457897447, "post_id": 35973196, "comment_id": 59603970, "body": "I tried to rephrase the question to make it less opinion-based. I apologize if it&#39;s still not acceptable for Stack Overflow."}], "answers": [{"comments": [{"owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "edited": false, "score": 2, "creation_date": 1457950418, "post_id": 35974392, "comment_id": 59622183, "body": "One other Kotlin feature I found to be missing in Groovy is named parameters. It&#39;s possible to use map spread to emulate it to some extent, but there doesn&#39;t seem to be a way to combine standard params with named params: <code>someMethod(&quot;foo&quot;, 10, color: RED, verbose: true)</code>"}, {"owner": {"reputation": 477, "user_id": 3989783, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100000888482204/picture?type=large", "display_name": "Marek Marczak", "link": "https://stackoverflow.com/users/3989783/marek-marczak"}, "edited": false, "score": 0, "creation_date": 1514322753, "post_id": 35974392, "comment_id": 82936444, "body": "&quot;Kotlin is 100% Static, and dynamic is not an option&quot; Kotlin has type inference (Golang has it too)  so you can program in Kotlin in dynamic way. Kotlin can&#39;t be used as scripting language because it is always compiled and this is the main difference comparing to Groovy."}, {"owner": {"reputation": 5543, "user_id": 1304164, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9e230ecdacef6fdfea22103b67ffa88f?s=128&d=identicon&r=PG", "display_name": "Bruce Lowe", "link": "https://stackoverflow.com/users/1304164/bruce-lowe"}, "edited": false, "score": 1, "creation_date": 1514371541, "post_id": 35974392, "comment_id": 82949769, "body": "In this case, &quot;static&quot; is referring to compilation and types being determined/locked in at compile time. E.g. var s = &quot;hello&quot;;s=1; will fail to compile in Kotlin. Dynamic implies type information checks happens at runtime.E.g. in Groovy you can do this: def s=&quot;hello&quot;;s=1;def t=s+1 and it will compile/run fine. I think the statement that kotlin is static is still correct, even though both it and Groovy have type inference.  Java has elements of type inference too, but it&#39;s defintely a statically typed language: <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/generics/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5543, "user_id": 1304164, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9e230ecdacef6fdfea22103b67ffa88f?s=128&d=identicon&r=PG", "display_name": "Bruce Lowe", "link": "https://stackoverflow.com/users/1304164/bruce-lowe"}, "is_accepted": true, "score": 25, "last_activity_date": 1489167165, "last_edit_date": 1489167165, "creation_date": 1457895441, "answer_id": 35974392, "question_id": 35973196, "link": "https://stackoverflow.com/questions/35973196/which-kotlin-features-are-not-available-in-statically-compiled-groovy/35974392#35974392", "title": "Which Kotlin features are not available in statically compiled Groovy?", "body": "<p>Kotlin is a JVM language, which IMO is trying to improve on Java in features and conciseness, while remaining imperative and static.  Groovy has a similar concept except decided to go dynamic.  As a result, a number of language features will be similar.</p>\n\n<p>Here are some differences I'm aware of</p>\n\n<ul>\n<li>Static vs Dynamic:  Since Groovy was designed as a dynamic language, and @CompileStatic, while a great annotation (I use it a lot), was added later.  Its feature feels a bit bolted on, and it does not enforce people to code in a static manner.  It's not usable everywhere (e.g. my Spock tests seem to fail to compile with them).  Sometimes even with it on Groovy still seems to have some odd dynamic behaviour every now and then.   Kotlin is 100% Static, and dynamic is not an option. </li>\n</ul>\n\n<p>There are a number of other features that is has though. I'd recommend you look at the reference, and you may spot a few more e.g. <a href=\"https://kotlinlang.org/docs/reference/\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/</a></p>\n\n<ul>\n<li>Data classes - concise with a copy function (a bit like case classes in Scala)</li>\n<li>The null safety check you mentioned (which is a big pro)</li>\n<li>The ability to destruct items. val (name, age) = person</li>\n<li>Higher-Order Functions, defined like \"fun  doStuff(body: Int -> T)): T\".  Which are much better than the groovy Closures IMO.  (very similar to Scala's)  </li>\n<li>Type checks and smart casts are nice: <a href=\"https://kotlinlang.org/docs/reference/typecasts.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/typecasts.html</a></li>\n<li>Companion Objects, in the same way Scala also tries to remove static methods from classes, Kotlin tries the same thing.</li>\n<li>Sealed Classes to restrict inheritance (again Scala has something similar)</li>\n<li>The \"Nothing\" subtype, where everything is a supertype of it.  (another crucial concept in Scala).</li>\n<li>when expressions for basic pattern matching: <a href=\"https://kotlinlang.org/docs/reference/control-flow.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/control-flow.html</a></li>\n</ul>\n\n<p>As you can see it does borrow from other languages other than Groovy. They have attempted to cherry pick a number of great features in an attempt to make a good language.  Naturally Groovy has its own goodness.  I've only focused one what Kotlin has and not visa-versa</p>\n\n<p>Another plus is, being made by an IDE maker, the compiler is very quick and has great IDE support.  Not saying Groovy does not have good support, but my current project does take a long time to compile, and refactor method always assumes you are coding in a dynamic fashion.</p>\n\n<p>I'd recommend you try out the Koans to get a feel for them to see which features of the language you like and how it compares to groovy (<a href=\"https://github.com/Kotlin/kotlin-koans\" rel=\"noreferrer\">https://github.com/Kotlin/kotlin-koans</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 477, "user_id": 3989783, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100000888482204/picture?type=large", "display_name": "Marek Marczak", "link": "https://stackoverflow.com/users/3989783/marek-marczak"}, "edited": false, "score": 0, "creation_date": 1514322753, "post_id": 35974504, "comment_id": 82936445, "body": "Kotlin has type inference (Golang has it too)  so you can program in Kotlin in dynamic way. Kotlin can&#39;t be used as scripting, interpreted language because it is always compiled and this is the main difference comparing to Groovy."}, {"owner": {"reputation": 477, "user_id": 3989783, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100000888482204/picture?type=large", "display_name": "Marek Marczak", "link": "https://stackoverflow.com/users/3989783/marek-marczak"}, "edited": false, "score": 0, "creation_date": 1514323248, "post_id": 35974504, "comment_id": 82936591, "body": "Groovy is a dynamic language so type inference is built-in in language core. You should know about this. This is implicite in dynamic typed language definition."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 477, "user_id": 3989783, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100000888482204/picture?type=large", "display_name": "Marek Marczak", "link": "https://stackoverflow.com/users/3989783/marek-marczak"}, "edited": false, "score": 1, "creation_date": 1514325670, "post_id": 35974504, "comment_id": 82937278, "body": "@MarekMarczak what you mean by type inference? In groovy you have dynamic types, and know type only in runtime (in many cases). Also in groovy you have things like &quot;method missing&quot; which overused in gradle."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 477, "user_id": 3989783, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100000888482204/picture?type=large", "display_name": "Marek Marczak", "link": "https://stackoverflow.com/users/3989783/marek-marczak"}, "edited": false, "score": 0, "creation_date": 1514325769, "post_id": 35974504, "comment_id": 82937306, "body": "@MarekMarczak also kotlin can be used for scripting (I use it scripting capabilities for configuration), and has REPL."}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 5, "last_activity_date": 1489167390, "last_edit_date": 1489167390, "creation_date": 1457896070, "answer_id": 35974504, "question_id": 35973196, "link": "https://stackoverflow.com/questions/35973196/which-kotlin-features-are-not-available-in-statically-compiled-groovy/35974504#35974504", "title": "Which Kotlin features are not available in statically compiled Groovy?", "body": "<p><strong>Kotlin</strong> designed as statically typed language, with great type system and other benefits of statically typed language. Groovy - in first place is a dynamically typed language, and only then - statically.</p>\n\n<p>When you enable compile static in groovy you get just java with syntax sugar. On other side - Kotlin, in their type-system, have two types of references: <a href=\"https://kotlinlang.org/docs/reference/basic-syntax.html#using-nullable-values-and-checking-for-null-keyword-\" rel=\"nofollow noreferrer\">nullable and nonnullable</a>, so you can write code with less NPEs. If you are asking about only one feature - that's it. </p>\n\n<p>Second great feature of Kotlin - it doesn't do any implicit conversions, on other hand - groovy implicitly converts double to bigdecimal and so on.</p>\n\n<p>But kotlin has a lot other features, like <a href=\"https://kotlinlang.org/docs/reference/typecasts.html\" rel=\"nofollow noreferrer\">smart casts</a>, <a href=\"https://en.wikipedia.org/wiki/Algebraic_data_type\" rel=\"nofollow noreferrer\">ADT</a> (<a href=\"https://kotlinlang.org/docs/reference/classes.html#sealed-classes\" rel=\"nofollow noreferrer\">doc</a>), <a href=\"https://kotlinlang.org/docs/reference/type-safe-builders.html\" rel=\"nofollow noreferrer\">type-safe builders</a>, zero-cost abstractions and finally great IDE support.</p>\n\n<p>Also i'm not sure about quality of Groovy's type-inference(in closures for example we need <a href=\"https://melix.github.io/blog/2014/01/closure_param_inference.html\" rel=\"nofollow noreferrer\">additional annotations</a>, meh), but in Kotlin type-inference work's like a charm, without any annotations in every peace of language.</p>\n\n<p>So statically typed compilation in Kotlin - first class citizen, in Groovy - not.</p>\n"}], "owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7484, "favorite_count": 3, "closed_date": 1457896147, "accepted_answer_id": 35974392, "answer_count": 2, "score": 17, "last_activity_date": 1489167390, "creation_date": 1457889236, "last_edit_date": 1457897264, "question_id": 35973196, "link": "https://stackoverflow.com/questions/35973196/which-kotlin-features-are-not-available-in-statically-compiled-groovy", "closed_reason": "Opinion-based", "title": "Which Kotlin features are not available in statically compiled Groovy?", "body": "<p>Kotlin and Groovy look as very similar languages with very similar features if we compile Groovy statically. Which features, apart from null safety, Kotlin has that are missing in Groovy?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 14965, "user_id": 2048448, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9875a5906274bc61f9e3106537a601fc?s=128&d=identicon&r=PG", "display_name": "sksamuel", "link": "https://stackoverflow.com/users/2048448/sksamuel"}, "edited": false, "score": 0, "creation_date": 1457889166, "post_id": 35973157, "comment_id": 59600648, "body": "That&#39;s pattern matching not partial functions. And Kotlin doesn&#39;t support it (unfortunately)."}, {"owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "edited": false, "score": 0, "creation_date": 1457892031, "post_id": 35973157, "comment_id": 59601742, "body": "It does work for Tuples with destructuring though. <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/multi-declarations.html</a>. We&#39;d need some more information on what type your list is to help you though."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457895904, "post_id": 35973157, "comment_id": 59603359, "body": "FYI, &quot;partial functions&quot; sounds like &quot;partial application&quot;, or currying, which is something completely different and confusing in this context"}, {"owner": {"reputation": 2075, "user_id": 1768278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5900bd7221450e5256570bffca4f18aa?s=128&d=identicon&r=PG", "display_name": "\u017deljko Trogrli\u0107", "link": "https://stackoverflow.com/users/1768278/%c5%bdeljko-trogrli%c4%87"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457974524, "post_id": 35973157, "comment_id": 59639520, "body": "@voddan I was referring to partially <i>defined</i> function."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457978287, "post_id": 35973157, "comment_id": 59641966, "body": "@\u017deljkoTrogrli\u0107 yes indeed Scala uses that term. Just googled it up. Sorry for bothering you. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 7, "last_activity_date": 1457895785, "creation_date": 1457895785, "answer_id": 35974456, "question_id": 35973157, "link": "https://stackoverflow.com/questions/35973157/how-to-destructure-kotlin-objects-in-streams/35974456#35974456", "title": "How to destructure Kotlin objects in streams", "body": "<p>At Kotlin 1.0 use an additional <code>val</code> declaration:</p>\n\n<pre><code>list.foreach{val (x, y) = it; println(s\"$x $y\")}\n</code></pre>\n\n<p>The team says they are already working on that feature (the syntax was reserved) and they hopefully will get it in Kotlin 1.1:</p>\n\n<pre><code>list.foreach{(x, y) -&gt; println(s\"$x $y\")}\n</code></pre>\n"}], "owner": {"reputation": 2075, "user_id": 1768278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5900bd7221450e5256570bffca4f18aa?s=128&d=identicon&r=PG", "display_name": "\u017deljko Trogrli\u0107", "link": "https://stackoverflow.com/users/1768278/%c5%bdeljko-trogrli%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 1, "accepted_answer_id": 35974456, "answer_count": 1, "score": 4, "last_activity_date": 1457944957, "creation_date": 1457889018, "last_edit_date": 1457944957, "question_id": 35973157, "link": "https://stackoverflow.com/questions/35973157/how-to-destructure-kotlin-objects-in-streams", "title": "How to destructure Kotlin objects in streams", "body": "<p>In Scala, I can easily extract values from objects (e.g. tuple) using partial function:</p>\n\n<pre><code>list\n    .zip(list.reverse)\n    .foreach{case (x, y) =&gt; println(s\"$x $y\")}\n</code></pre>\n\n<p>How can I do that in Kotlin? It seems that destructors are supported only for assignments and for loops.</p>\n"}, {"tags": ["kotlin", "kotlin-extension", "data-class"], "comments": [{"owner": {"reputation": 5641, "user_id": 1726507, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/7b7cd4fbecd030677b7c29c99d29d1ca?s=128&d=identicon&r=PG", "display_name": "Sonique", "link": "https://stackoverflow.com/users/1726507/sonique"}, "edited": false, "score": 1, "creation_date": 1497950133, "post_id": 35970957, "comment_id": 76282642, "body": "Kotlin also have pretty nice toString() implementation by default, that print all members of data class. So in most cases it&#39;s enought for debugging etc."}], "answers": [{"comments": [{"owner": {"reputation": 1833, "user_id": 1062727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5b9976710eed726413233e9fef7f43e?s=128&d=identicon&r=PG", "display_name": "Paulo Buchsbaum", "link": "https://stackoverflow.com/users/1062727/paulo-buchsbaum"}, "edited": false, "score": 0, "creation_date": 1570025558, "post_id": 35971021, "comment_id": 102784705, "body": "One can use <code>this</code> as representing the current class instance inside <code>toString</code> body"}, {"owner": {"reputation": 844, "user_id": 3893550, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uOtrd.png?s=128&g=1", "display_name": "GMX", "link": "https://stackoverflow.com/users/3893550/gmx"}, "edited": false, "score": 0, "creation_date": 1578568517, "post_id": 35971021, "comment_id": 105484610, "body": "is there a possibility to autogenerate the String? This solution work but is really long to write if you have a lot of proprieties in your class."}, {"owner": {"reputation": 413, "user_id": 1374221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5C7FP.jpg?s=128&g=1", "display_name": "vonWippersnap", "link": "https://stackoverflow.com/users/1374221/vonwippersnap"}, "edited": false, "score": 0, "creation_date": 1615957393, "post_id": 35971021, "comment_id": 117850076, "body": "If you want a string with all the properties (e.g. for debugging) that is what data classes automatically generate by default.  You only need to manually write this function if you don&#39;t like the default output format."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 96, "last_activity_date": 1457877582, "last_edit_date": 1457877582, "creation_date": 1457876841, "answer_id": 35971021, "question_id": 35970957, "link": "https://stackoverflow.com/questions/35970957/how-to-extend-a-data-class-with-tostring/35971021#35971021", "title": "How to extend a data class with toString", "body": "<p>In Kotlin, extension functions cannot override member functions, moreover, <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extensions-are-resolved-statically\"><strong>they are resolved statically</strong></a>. It implies that if you write an extension function <code>fun Something.toString() = ...</code>, <code>s.toString()</code> won't be resolved to it, because <strong>member always wins</strong>.</p>\n\n<p>But in your case, nothing stops you from overriding <code>toString</code> inside <code>Something</code> class body, because <code>data</code> classes can have bodies just like regular classes:</p>\n\n<pre><code>data class Something(\n    val a: String,\n    val b: Any,\n    val c: String\n) {\n    override fun toString(): String = a + b + c\n}\n</code></pre>\n"}], "owner": {"reputation": 3516, "user_id": 4233758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zNTBC.jpg?s=128&g=1", "display_name": "Aleksandar", "link": "https://stackoverflow.com/users/4233758/aleksandar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20836, "favorite_count": 1, "accepted_answer_id": 35971021, "answer_count": 1, "score": 55, "last_activity_date": 1596280433, "creation_date": 1457876475, "last_edit_date": 1596280433, "question_id": 35970957, "link": "https://stackoverflow.com/questions/35970957/how-to-extend-a-data-class-with-tostring", "title": "How to extend a data class with toString", "body": "<p>I have created a data class</p>\n<pre><code>data class Something (\n    val a : String,\n    val b : Object,\n    val c : String\n)\n</code></pre>\n<p>as later in my program, I need the string representation of this data class I tried to extend the <code>toString</code> method.</p>\n<pre><code>override fun Something.toString() : String = a + b.result() + c\n</code></pre>\n<p>The problem here is, it does not allow extending (overriding) the <code>toString</code> function, as it is not applicable to top-level functions.</p>\n<p>How to properly override/extend the toString method of a custom dataclass?</p>\n"}, {"tags": ["enums", "kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1586972051, "post_id": 35966447, "comment_id": 108329131, "body": "There&#39;s no such thing as \u201cenum classes of type String\u201d. Enum is of type Enum, <code>T : Enum&lt;T&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "edited": false, "score": 0, "creation_date": 1457847420, "post_id": 35966803, "comment_id": 59588460, "body": "Aha, you moved me in the right direction. Just tried <code>MyStringEnum::class.java.join()</code> without any complaints."}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": false, "score": 5, "last_activity_date": 1457846788, "last_edit_date": 1457846788, "creation_date": 1457846319, "answer_id": 35966803, "question_id": 35966447, "link": "https://stackoverflow.com/questions/35966447/kotlin-how-to-extend-the-enum-class-with-an-extension-function/35966803#35966803", "title": "Kotlin: How to extend the enum class with an extension function", "body": "<p>I'll rewrite your join slightly like this with a wildcard:</p>\n\n<pre><code>fun &lt;T: Enum&lt;*&gt;&gt; Class&lt;T&gt;.join(skipFirst: Int = 0, skipLast: Int = 0): String {\n    return this.enumConstants\n            .drop(skipFirst)\n            .dropLast(skipLast)\n            .map { e -&gt; e.name }\n            .joinToString()\n}\n</code></pre>\n\n<p>Then, assuming your MyStringEnum is defined like this:</p>\n\n<pre><code>enum class MyStringEnum { FOO, BAR, BAZ }\n</code></pre>\n\n<p>You can call it like this:</p>\n\n<pre><code>println(MyStringEnum.values()[0].javaClass.join())\n</code></pre>\n\n<p>to get output \"FOO, BAR, BAZ\"</p>\n\n<p>Since you're defining join on Class, you need an actual Class object to call it on. Enum classes apparently don't work like that, but its defined enums can yield a Class with <code>javaClass</code>. So this is the best I could come up with that I think meets the general spirit of your request. I don't know if there is a more elegant way to achieve what you're trying to do for all enum classes like this.</p>\n\n<p>EDIT: You can tighten this up a little bit more with this:</p>\n\n<pre><code>fun Enum&lt;*&gt;.join(skipFirst: Int = 0, skipLast: Int = 0): String {\n    return this.javaClass.join(skipFirst, skipLast)\n}\n</code></pre>\n\n<p>Which lets you call like this:</p>\n\n<pre><code>println(MyStringEnum.values()[0].join())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "edited": false, "score": 0, "creation_date": 1457848197, "post_id": 35966950, "comment_id": 59588649, "body": "Good call, I&#39;m relatively new to Kotlin and forgot about KClass"}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 16, "last_activity_date": 1457847613, "creation_date": 1457847613, "answer_id": 35966950, "question_id": 35966447, "link": "https://stackoverflow.com/questions/35966447/kotlin-how-to-extend-the-enum-class-with-an-extension-function/35966950#35966950", "title": "Kotlin: How to extend the enum class with an extension function", "body": "<p>I suggest following solution:</p>\n\n<pre><code>fun &lt;T : Enum&lt;*&gt;&gt; KClass&lt;T&gt;.join(skipFirst: Int = 0, skipLast: Int = 0): String {\n    return this.java\n            .enumConstants\n            .drop(skipFirst)\n            .dropLast(skipLast)\n            .map { e -&gt; e.name }\n            .joinToString()\n}\n</code></pre>\n\n<p>Instead of attaching extension function to Class, i attached it to KotlinClass.</p>\n\n<p>Now, you can simply use it:</p>\n\n<pre><code>enum class Test {ONE, TWO, THREE }\n\nfun main(args: Array&lt;String&gt;) {\n    println(Test::class.join())\n}\n// ONE, TWO, THREE\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": false, "score": 6, "last_activity_date": 1458058209, "creation_date": 1458058209, "answer_id": 36016535, "question_id": 35966447, "link": "https://stackoverflow.com/questions/35966447/kotlin-how-to-extend-the-enum-class-with-an-extension-function/36016535#36016535", "title": "Kotlin: How to extend the enum class with an extension function", "body": "<p>@IRus' answer is correct but you don't have to use reflection. For every enum class, a <code>values()</code> method is automatically generated by the compiler. This method returns an array containing all the entries. We can make the extension function operate directly on this array like this:</p>\n\n<pre><code>fun &lt;T : Enum&lt;*&gt;&gt; Array&lt;T&gt;.join(skipFirst: Int = 0, skipLast: Int = 0)\n        = drop(skipFirst)\n        .dropLast(skipLast)\n        .map { e -&gt; e.name }\n        .joinToString()\n</code></pre>\n\n<p>And call it like this:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    Test.values().join()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "edited": false, "score": 1, "creation_date": 1572466055, "post_id": 58626218, "comment_id": 103572834, "body": "why is <code>::class</code> bad?"}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "reply_to_user": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "edited": false, "score": 3, "creation_date": 1586972293, "post_id": 58626218, "comment_id": 108329261, "body": "@geg, there&#39;s too much indirection. (1) <code>::class</code> allocates a special <code>KClass</code> object (which is, of course, not free), (2) <code>class.java</code> is JVM-only, and (3) <code>Class.enumConstants</code> uses reflection, thus, first call is slow, and it could fail with obfuscated code."}], "tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": false, "score": 3, "last_activity_date": 1572441284, "creation_date": 1572441284, "answer_id": 58626218, "question_id": 35966447, "link": "https://stackoverflow.com/questions/35966447/kotlin-how-to-extend-the-enum-class-with-an-extension-function/58626218#58626218", "title": "Kotlin: How to extend the enum class with an extension function", "body": "<p>Use of <code>::class</code> is a nasty workaround.\nI suggest you to look at <code>enumValues&lt;E&gt;</code> and <code>enumValueOf&lt;E&gt;</code> from stdlib and do the same way:</p>\n\n<pre><code>inline fun &lt;reified E : Enum&lt;E&gt;&gt; joinValuesOf(skipFirst: Int = 0, skipLast: Int = 0): String =\n        enumValues&lt;E&gt;().join(skipFirst, skipLast)\n\n@PublishedApi\ninternal fun Array&lt;out Enum&lt;*&gt;&gt;.join(skipFirst: Int, skipLast: Int): String =\n        asList()\n                .subList(skipFirst, size - skipLast)\n                .joinToString(transform = Enum&lt;*&gt;::name)\n</code></pre>\n\n<p>Usage: <code>joinValuesOf&lt;Thread.State&gt;()</code></p>\n"}], "owner": {"reputation": 3123, "user_id": 2805265, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/490ae0b1dfd87311e1140a44c699a484?s=128&d=identicon&r=PG&f=1", "display_name": "geg", "link": "https://stackoverflow.com/users/2805265/geg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13270, "favorite_count": 1, "accepted_answer_id": 35966950, "answer_count": 4, "score": 14, "last_activity_date": 1572441284, "creation_date": 1457843085, "question_id": 35966447, "link": "https://stackoverflow.com/questions/35966447/kotlin-how-to-extend-the-enum-class-with-an-extension-function", "title": "Kotlin: How to extend the enum class with an extension function", "body": "<p>I'm trying to extend enum classes of type <code>String</code> with the following function but am unable to use it at the call site like so:  </p>\n\n<pre><code>fun &lt;T: Enum&lt;String&gt;&gt; Class&lt;T&gt;.join(skipFirst: Int = 0, skipLast: Int = 0): String {\n    return this.enumConstants\n        .drop(skipFirst)\n        .dropLast(skipLast)\n        .map { e -&gt; e.name }\n        .joinToString()\n}\n\nMyStringEnum.join(1, 1);\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1457826196, "post_id": 35962127, "comment_id": 59584336, "body": "You should also read the entire Kotlin language reference along with the blog you mentioned: <a href=\"https://kotlinlang.org/docs/reference/\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference</a>  ... and the concepts you are wondering about are covered there."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 5, "last_activity_date": 1457813837, "last_edit_date": 1457813837, "creation_date": 1457810942, "answer_id": 35962309, "question_id": 35962127, "link": "https://stackoverflow.com/questions/35962127/class-declarations-in-kotlin/35962309#35962309", "title": "Class declarations in Kotlin", "body": "<p>You are right that <code>Cats</code> class will have a mutable property named <code>data</code>, since it is declared inside a primary constructor of a class with <code>var</code> keyword (see the docs pages about <a href=\"https://kotlinlang.org/docs/reference/classes.html\" rel=\"nofollow\">classes</a> and <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"nofollow\">properties</a>).</p>\n\n<p>Next, question mark at type name in Kotlin means that a variable has <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow\">nullable type</a>, that is, it can store <code>null</code> value. Variables with not-null types, on the other hand, cannot hold <code>null</code>s in Kotlin.</p>\n\n<p><code>data: Data? = null</code> is syntax for <a href=\"https://kotlinlang.org/docs/reference/functions.html#default-arguments\" rel=\"nofollow\">default parameter</a> value. It allows not to pass <code>data</code> parameter to the constructor invocation, and in this case default value <code>null</code> will be used. This also works for functions.</p>\n\n<p>And finally, <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow\"><code>data</code> modifier</a> at class declaration means that <code>equals</code>, <code>hashCode</code>, <code>toString</code>, <code>copy</code> and destructuring will be generated for the class, based on the properties declared in primary constructor.</p>\n"}, {"tags": [], "owner": {"reputation": 159, "user_id": 7521940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad776078a7d391b623745a8542e9c83?s=128&d=identicon&r=PG&f=1", "display_name": "Shraddha Patel", "link": "https://stackoverflow.com/users/7521940/shraddha-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1486986690, "creation_date": 1486986690, "answer_id": 42203371, "question_id": 35962127, "link": "https://stackoverflow.com/questions/35962127/class-declarations-in-kotlin/42203371#42203371", "title": "Class declarations in Kotlin", "body": "<p>=> Classes in Kotlin are declared using the keyword class:</p>\n\n<p>class Invoice { }</p>\n\n<p>=> Both the header and the body are optional; if the class has no body, curly braces can be omitted.</p>\n\n<p>class Invoice</p>\n"}], "owner": {"reputation": 1667, "user_id": 3398485, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/a5sQd.jpg?s=128&g=1", "display_name": "Neeraj", "link": "https://stackoverflow.com/users/3398485/neeraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 963, "favorite_count": 0, "accepted_answer_id": 35962309, "answer_count": 2, "score": 2, "last_activity_date": 1486986690, "creation_date": 1457809965, "last_edit_date": 1457813035, "question_id": 35962127, "link": "https://stackoverflow.com/questions/35962127/class-declarations-in-kotlin", "title": "Class declarations in Kotlin", "body": "<p>I was creating a sample Android project using Kotlin programming language using this <a href=\"http://cirorizzo.net/2016/03/04/building-a-kotlin-project/\" rel=\"nofollow\">blog</a>. I'm new to Kotlin programming. I came across this line,</p>\n\n<p><code>data class Cats(var data: Data? = null)</code></p>\n\n<p>which I believe that it is, creating a class named <code>Cats</code> that has a variable named <code>data</code>. What does this <code>data: Data? = null</code> means?  My whole class model is:</p>\n\n<pre><code>data class Cats(var data: Data? = null)\n\ndata class Data(var images: ArrayList&lt;Image&gt;? = null)\n\ndata class Image(var url: String? = \"\", var id: String? = \"\", var source_url: String? = \"\")\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-dokka", "kdoc"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1457780302, "post_id": 35956535, "comment_id": 59568991, "body": "Probably no. If there was a way, it would be usable for inheriting KDoc, but my similar question got negative answer: <a href=\"http://stackoverflow.com/questions/35776564/how-do-i-inherit-kdoc-documentation\" title=\"how do i inherit kdoc documentation\">stackoverflow.com/questions/35776564/&hellip;</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457826119, "post_id": 35956535, "comment_id": 59584317, "body": "This might make a good feature request in <a href=\"https://youtrack.jetbrains.com\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com</a> ... although you do have a different parameter so not sure how you will say &quot;same as above, plus this little bit extra&quot;"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1457981008, "post_id": 35956535, "comment_id": 59643699, "body": "It may be a better design to change <code>putRequest</code> to an optional parameter. Then you won&#39;t have any overloads and won&#39;t need to copy the documentation."}, {"owner": {"reputation": 12042, "user_id": 1447885, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ecbf67a102659b602b939fa0a7b03a11?s=128&d=identicon&r=PG", "display_name": "Diolor", "link": "https://stackoverflow.com/users/1447885/diolor"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1457983485, "post_id": 35956535, "comment_id": 59645137, "body": "@yole In my example fits great, thank you. But there are cases with same method name and result but different param types."}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 5, "last_activity_date": 1457875634, "creation_date": 1457875634, "answer_id": 35970810, "question_id": 35956535, "link": "https://stackoverflow.com/questions/35956535/copy-kdoc-docs-from-one-method-to-another/35970810#35970810", "title": "Copy KDoc docs from one method to another", "body": "<p>There is no such feature currently available in KDOC.  </p>\n\n<p>Please submit a feature request to <a href=\"https://youtrack.jetbrains.com/issues#Kotlin\" rel=\"noreferrer\">YouTrack</a>.</p>\n\n<p>The <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html\" rel=\"noreferrer\">reference guide for KDOC</a> shows the feature set available.</p>\n"}], "owner": {"reputation": 12042, "user_id": 1447885, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ecbf67a102659b602b939fa0a7b03a11?s=128&d=identicon&r=PG", "display_name": "Diolor", "link": "https://stackoverflow.com/users/1447885/diolor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 1, "accepted_answer_id": 35970810, "answer_count": 1, "score": 8, "last_activity_date": 1457875634, "creation_date": 1457778832, "last_edit_date": 1457860569, "question_id": 35956535, "link": "https://stackoverflow.com/questions/35956535/copy-kdoc-docs-from-one-method-to-another", "title": "Copy KDoc docs from one method to another", "body": "<p>For the two given methods:</p>\n\n<pre><code>/**\n* Adds a [DataItem] to the Android Wear network. The updated item is synchronized across all devices.\n*/\nfun putItem(){ .... }\n\n/**\n* \"same KDOC here with above\"\n*/\nfun putItem(putRequest: PutDataRequest){ .... }\n</code></pre>\n\n<p>Is there any possibility to copy/link the docs of the second method to be the same with the first one?</p>\n\n<p>Manually copy pasting the KDOC is not so great because if you update one of them there is high chance the second to accidentally be outdated.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1457728990, "post_id": 35946576, "comment_id": 59555374, "body": "Note that to use the second variant, you must be sure that the list <code>a</code> won&#39;t have new <code>null</code> elements added later."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1457729973, "post_id": 35946576, "comment_id": 59555877, "body": "Or you can just copy it one time to avoid the problem @ilya mentioned"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 13, "last_activity_date": 1457718117, "creation_date": 1457718117, "answer_id": 35946576, "question_id": 35946276, "link": "https://stackoverflow.com/questions/35946276/list-containing-nullable-values-to-a-nullable-list-in-kotlin/35946576#35946576", "title": "List containing nullable values to a nullable List in Kotlin", "body": "<p>You can use a <a href=\"https://kotlinlang.org/docs/reference/returns.html#return-at-labels\">non-local return</a> to return from the <code>sequence</code> function:</p>\n\n<pre><code>fun &lt;T&gt; sequence(a: List&lt;T?&gt;): List&lt;T&gt;? {\n    return a.fold(listOf()) {\n        prevArray, element -&gt;\n        if (element == null) return null else prevArray + element\n    }\n}\n</code></pre>\n\n<p>However, I would solve the problem you described with a simple <code>if</code>-expression, to prevent lots of list allocations which happen because the list addition creates a new list backed by array for each element. The unchecked cast warning is suppressed below because the compiler cannot figure out that the list does not contain nulls at that point, although we can clearly see that is the case:</p>\n\n<pre><code>fun &lt;T&gt; sequence(a: List&lt;T?&gt;): List&lt;T&gt;? {\n    @Suppress(\"UNCHECKED_CAST\")\n    return if (a.any { it == null }) null else a as List&lt;T&gt;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 636400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7td1u.jpg?s=128&g=1", "display_name": "Luca Piccinelli", "link": "https://stackoverflow.com/users/636400/luca-piccinelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1608237312, "last_edit_date": 1608237312, "creation_date": 1608223848, "answer_id": 65344963, "question_id": 35946276, "link": "https://stackoverflow.com/questions/35946276/list-containing-nullable-values-to-a-nullable-list-in-kotlin/65344963#65344963", "title": "List containing nullable values to a nullable List in Kotlin", "body": "<p>Using <a href=\"https://github.com/lucapiccinelli/konad#flatten\" rel=\"nofollow noreferrer\">Konad</a> library you can now do the following:</p>\n<pre><code>fun &lt;T&gt; sequence(a : List&lt;T?&gt;) : List&lt;T&gt;? = a.flatten()?.toList()\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 5440167, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6e384a22ee7c87006ae3d29082aa5ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp Middendorf", "link": "https://stackoverflow.com/users/5440167/philipp-middendorf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3137, "favorite_count": 3, "accepted_answer_id": 35946576, "answer_count": 2, "score": 5, "last_activity_date": 1608237312, "creation_date": 1457716986, "last_edit_date": 1458373285, "question_id": 35946276, "link": "https://stackoverflow.com/questions/35946276/list-containing-nullable-values-to-a-nullable-list-in-kotlin", "title": "List containing nullable values to a nullable List in Kotlin", "body": "<p>I have a <code>List&lt;T?&gt;</code> containing null values (which, I suppose, is not forbidden). If one element of this list is null, I want the entire list to be null (what Haskell people call <code>sequence</code>). The following pseudocode demonstrates what I want to do:</p>\n\n<pre><code>fun &lt;T&gt; sequence(a : List&lt;T?&gt;) : List&lt;T&gt;? {\n    return \n        a.fold(\n            listOf(),\n            { \n                prevArray, element -&gt; \n                    if(element == null) null else prevArray + element \n            })\n}\n</code></pre>\n\n<p>This is pseudocode because the compiler complains that <code>Null can not be a value of a non-null type kotlin.collections.List&lt;T&gt;</code>.</p>\n\n<p>What's the idiomatic way to express what I want to in Kotlin? Using Java's <code>Optional</code> type, this is at least compilable:</p>\n\n<pre><code>fun &lt;T&gt; sequence(a : List&lt;T?&gt;) : Optional&lt;List&lt;T&gt;&gt; {\n    return \n        a.fold(\n            Optional.of(listOf()),\n            { \n                prevArray, element -&gt; \n                    if(element == null) Optional.empty&lt;List&lt;T&gt;&gt;() else Optional.of(prevArray + element) \n            })\n}\n</code></pre>\n\n<p>But Kotlin has many operators and functionalities regarding null handling, so I thought using null directly would be more idiomatic.</p>\n"}, {"tags": ["reflection", "kotlin", "nullable", "kotlin-null-safety"], "comments": [{"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "edited": false, "score": 0, "creation_date": 1457874386, "post_id": 35946044, "comment_id": 59595230, "body": "Instead of checking the entire string, you could just check nullability with <code>type.toString().endsWith (&quot;?&quot;)</code>. Then it could be reused with other nullable type checks."}], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 7, "last_activity_date": 1457719026, "creation_date": 1457719026, "answer_id": 35946841, "question_id": 35946044, "link": "https://stackoverflow.com/questions/35946044/kotlin-reflection-check-nullable-types/35946841#35946841", "title": "kotlin reflection check nullable types", "body": "<p>As you can see from the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-type/index.html\" rel=\"noreferrer\">KType</a> API documentation, its interface is far from complete. Currently almost for any operation you have to resort to Java reflection with the <code>.javaType</code> extension property available on <code>KType</code> instances. (By the way, this is surely going to be addressed in Kotlin 1.1.)</p>\n\n<p>In your case, you have to check if the type is nullable and its Java type is equal to that of the required primitive class, e.g.:</p>\n\n<pre><code>val isNullableInt = type.isMarkedNullable &amp;&amp;\n                    type.javaType == Int::class.defaultType.javaType\n</code></pre>\n\n<p>I can also present a funny workaround which may be more suitable for your use case: you can declare a private function with the needed type and use reflection to compare against the return type of that function at runtime:</p>\n\n<pre><code>// Only return type of this function is used\nfun _nullableInt(): Int? =\n    TODO()  // Doesn't matter, it never gets called\n\n...\n\nval isNullableInt = type == ::_nullableInt.returnType\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5674869, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VAlyzQe598o/AAAAAAAAAAI/AAAAAAAAAfs/HMFw-XtzCCg/photo.jpg?sz=128", "display_name": "Lajos Gathy", "link": "https://stackoverflow.com/users/5674869/lajos-gathy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2065, "favorite_count": 1, "accepted_answer_id": 35946841, "answer_count": 1, "score": 6, "last_activity_date": 1502703691, "creation_date": 1457716207, "last_edit_date": 1502703691, "question_id": 35946044, "link": "https://stackoverflow.com/questions/35946044/kotlin-reflection-check-nullable-types", "title": "kotlin reflection check nullable types", "body": "<p>How can I test if a KType variable holds a value of a nullable kotlin type, (e.G. Int?)?</p>\n\n<p>I have</p>\n\n<pre><code>var type: KType \n</code></pre>\n\n<p>variable coming from a <code>KProperty&lt;*&gt;.returnType</code> and I need to detect if it is equal to certain kotlin types (Int, Long, etc). This works with:</p>\n\n<pre><code>when (type) {\n    Int::class.defaultType -&gt; ...\n    Long::class.defaultType -&gt; ...\n    else -&gt; ...\n}\n</code></pre>\n\n<p>but this only works for non-nullable types, so the first branch does not match to Int? However I was yet unable to figure out how I could detect is type is Int? other then to obvious but not so nice</p>\n\n<pre><code>type.toString().equals(\"kotlin.Int?\")\n</code></pre>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 656, "user_id": 4562821, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-ZGRK4UpqT9Y/AAAAAAAAAAI/AAAAAAAAIT8/rwiZ_GuYE-c/photo.jpg?sz=128", "display_name": "Shlomi Uziel", "link": "https://stackoverflow.com/users/4562821/shlomi-uziel"}, "edited": false, "score": 0, "creation_date": 1457708780, "post_id": 35943351, "comment_id": 59543410, "body": "Have a look at this answer: <a href=\"http://stackoverflow.com/questions/3437897/how-to-get-a-class-instance-of-generics-type-t\" title=\"how to get a class instance of generics type t\">stackoverflow.com/questions/3437897/&hellip;</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457741823, "post_id": 35943351, "comment_id": 59560565, "body": "why do you want the class from the generics instead of <code>value</code> which obviously knows its own class?"}, {"owner": {"reputation": 2279, "user_id": 1298357, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7f400efe02d25cb9ee37fe9a44d05f0?s=128&d=identicon&r=PG", "display_name": "Alex Klimashevsky", "link": "https://stackoverflow.com/users/1298357/alex-klimashevsky"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457948115, "post_id": 35943351, "comment_id": 59620712, "body": "@JaysonMinard I&#39;m going to use a some sort of fabric and reflection for annotation processig"}], "answers": [{"comments": [{"owner": {"reputation": 2279, "user_id": 1298357, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7f400efe02d25cb9ee37fe9a44d05f0?s=128&d=identicon&r=PG", "display_name": "Alex Klimashevsky", "link": "https://stackoverflow.com/users/1298357/alex-klimashevsky"}, "edited": false, "score": 0, "creation_date": 1457708813, "post_id": 35943462, "comment_id": 59543431, "body": "what are restriction for using this method from Java code?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 2279, "user_id": 1298357, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7f400efe02d25cb9ee37fe9a44d05f0?s=128&d=identicon&r=PG", "display_name": "Alex Klimashevsky", "link": "https://stackoverflow.com/users/1298357/alex-klimashevsky"}, "edited": false, "score": 0, "creation_date": 1457742083, "post_id": 35943462, "comment_id": 59560637, "body": "@AlexKlimashevsky you can search for the 1000 examples of TypeReference, TypeToken, TypeRef and so on that do this similar type of thing from a Java viewpoint, you&#39;ll need to follow those patterns as Kotlin can make Kotlin nicer, but not make Java nicer."}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 6, "last_activity_date": 1457741941, "last_edit_date": 1457741941, "creation_date": 1457708540, "answer_id": 35943462, "question_id": 35943351, "link": "https://stackoverflow.com/questions/35943351/how-to-get-java-class-from-generic-method-param/35943462#35943462", "title": "How to get java class from generic method param?", "body": "<p>To access generic types within a function you need to make the types <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow\"><em>reified</em></a>.\nSince this is not natively supported by the JVM its only available in inlined functions:</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; put(value: T) {\n    val clazz = T::class.java\n}\n</code></pre>\n\n<p>The type bound of <code>Any</code> is required to prevent some complications with nullable types.</p>\n"}, {"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 3, "creation_date": 1457710000, "post_id": 35943918, "comment_id": 59544324, "body": "This may fail sometimes: consider <code>put(0 as Number)</code>, here <code>T</code> is <code>Number</code>, but <code>value.javaClass</code> will be <code>Integer</code>. If this is not what you want, use reified generics as stated in the other answer."}, {"owner": {"reputation": 2279, "user_id": 1298357, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7f400efe02d25cb9ee37fe9a44d05f0?s=128&d=identicon&r=PG", "display_name": "Alex Klimashevsky", "link": "https://stackoverflow.com/users/1298357/alex-klimashevsky"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1457710970, "post_id": 35943918, "comment_id": 59545052, "body": "@hotkey I think more about Java compatibility. so this is what I want now"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1457713945, "post_id": 35943918, "comment_id": 59547181, "body": "In that case you might as well make <code>clazz</code> the parameter."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1457741911, "post_id": 35943918, "comment_id": 59560588, "body": "@AlexKlimashevsky you should make it clear in your question that you want the class of <code>value</code> and not of the generic type parameter, because your comments are to the contrary of what you originally stated.  And @hotkey is correct, you will get a wrong answer for the generic parameter, but a correct answer for the class of the parameter passed to the function."}], "tags": [], "owner": {"reputation": 2279, "user_id": 1298357, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7f400efe02d25cb9ee37fe9a44d05f0?s=128&d=identicon&r=PG", "display_name": "Alex Klimashevsky", "link": "https://stackoverflow.com/users/1298357/alex-klimashevsky"}, "is_accepted": true, "score": 0, "last_activity_date": 1457709809, "creation_date": 1457709809, "answer_id": 35943918, "question_id": 35943351, "link": "https://stackoverflow.com/questions/35943351/how-to-get-java-class-from-generic-method-param/35943918#35943918", "title": "How to get java class from generic method param?", "body": "<p>fixed by</p>\n\n<pre><code>fun &lt;T: Any&gt; put(value: T){\n    val clazz = value.javaClass\n}\n</code></pre>\n"}], "owner": {"reputation": 2279, "user_id": 1298357, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7f400efe02d25cb9ee37fe9a44d05f0?s=128&d=identicon&r=PG", "display_name": "Alex Klimashevsky", "link": "https://stackoverflow.com/users/1298357/alex-klimashevsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1612, "favorite_count": 1, "accepted_answer_id": 35943918, "answer_count": 2, "score": 4, "last_activity_date": 1457741941, "creation_date": 1457708261, "last_edit_date": 1457715505, "question_id": 35943351, "link": "https://stackoverflow.com/questions/35943351/how-to-get-java-class-from-generic-method-param", "title": "How to get java class from generic method param?", "body": "<p>I try to use the next method:</p>\n\n<pre><code>fun &lt;T&gt; put(value: T){\n    val clazz = T::class.java\n}\n</code></pre>\n\n<p>but has exception <code>Kotlin: Only classes are allowed on the left hand side of a class literal</code></p>\n\n<p>How obtain class from generic param?</p>\n\n<p>What are other options except class can be passed as param?</p>\n"}, {"tags": ["android", "sdk", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457742121, "post_id": 35942790, "comment_id": 59560649, "body": "This is too board, opinion based, should be closed."}, {"owner": {"reputation": 2100, "user_id": 2011622, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96840d39824f44b6f5802210acb65dd9?s=128&d=identicon&r=PG", "display_name": "Peter F", "link": "https://stackoverflow.com/users/2011622/peter-f"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457801526, "post_id": 35942790, "comment_id": 59576183, "body": "Sorry, I don&#39;t see why the question should be opinion-based. I&#39;m asking for the technical adaptions a Kotlin library requires."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457826045, "post_id": 35942790, "comment_id": 59584300, "body": "In Stack Overflow questions that are too broad, or opinion based do not fare well.  You are to show what you tried already to resolve a problem, what you discovered, and what your remaining problem is.  Without any of that, it is overly broad.  People will likely also assume you did not do any homework before asking."}, {"owner": {"reputation": 2100, "user_id": 2011622, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96840d39824f44b6f5802210acb65dd9?s=128&d=identicon&r=PG", "display_name": "Peter F", "link": "https://stackoverflow.com/users/2011622/peter-f"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457952640, "post_id": 35942790, "comment_id": 59623601, "body": "Fair enough. I&#39;ll do more homework and come back with more specific questions."}], "answers": [{"tags": [], "owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "is_accepted": true, "score": 0, "last_activity_date": 1457987768, "last_edit_date": 1457987768, "creation_date": 1457714068, "answer_id": 35945361, "question_id": 35942790, "link": "https://stackoverflow.com/questions/35942790/converting-android-library-api-to-kotlin/35945361#35945361", "title": "Converting Android Library API to Kotlin", "body": "<p>The official documentation on interop of Java accessing Kotlin code can be found here: <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html</a></p>\n\n<p>I believe adding the sdk as source code would only require the normal setup for getting kotlin code to work under normal circumstances, which are documented at the same site. Just go to the Tools section on the left, and include the build info required for your specific builder.</p>\n\n<p>As a dependency, it will just be a jar as usual, compiled to java byte code so there's nothing needed (except maybe the runtime library, which <em>should</em> be automatically pulled in as a sub dependency). </p>\n\n<p>In either case, please take the interop practices into account when designing the library.</p>\n"}], "owner": {"reputation": 2100, "user_id": 2011622, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96840d39824f44b6f5802210acb65dd9?s=128&d=identicon&r=PG", "display_name": "Peter F", "link": "https://stackoverflow.com/users/2011622/peter-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 641, "favorite_count": 0, "accepted_answer_id": 35945361, "answer_count": 1, "score": -1, "last_activity_date": 1457987768, "creation_date": 1457706680, "last_edit_date": 1457706775, "question_id": 35942790, "link": "https://stackoverflow.com/questions/35942790/converting-android-library-api-to-kotlin", "title": "Converting Android Library API to Kotlin", "body": "<p>I recently read articles about Kotlin and I can't really wait to use it with Android development.</p>\n\n<p>I'm writing on an Android library, which shall be provided as some kind of SDK.</p>\n\n<p>Assuming I would switch to using Kotlin within my library. Are there any downsides for users of that library who are not using Kotlin?</p>\n\n<p>What adaptions are required for users if the SDK is included </p>\n\n<ul>\n<li>as a module (with source code)?</li>\n<li>as a dependency?</li>\n</ul>\n"}, {"tags": ["types", "interface", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457713086, "post_id": 35938906, "comment_id": 59546545, "body": "a solution for not being able to implement generic functions for arrays is to use the <code>List</code> interface whenever possible"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 32, "creation_date": 1457696232, "post_id": 35939108, "comment_id": 59534616, "body": "To add: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/as-iterable.html\" rel=\"nofollow noreferrer\"><code>asIterable</code></a> will give you a wrapper object that is <code>Iterable</code>."}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 4, "creation_date": 1565154974, "post_id": 35939108, "comment_id": 101257901, "body": "In addition to <code>asIterable</code>, there is also <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/as-list.html\" rel=\"nofollow noreferrer\"><code>asList</code></a>."}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 43, "last_activity_date": 1457696234, "last_edit_date": 1457696234, "creation_date": 1457695675, "answer_id": 35939108, "question_id": 35938906, "link": "https://stackoverflow.com/questions/35938906/why-doesnt-kotlin-arrayt-implement-iterablet/35939108#35939108", "title": "Why doesn&#39;t Kotlin Array&lt;T&gt; implement Iterable&lt;T&gt;", "body": "<p>Kotlin is designed to be fully interoperable with Java. <code>Array&lt;X&gt;</code> is <code>X[]</code> both at runtime and from Java's point of view. Java arrays don't implement <code>Iterable</code>, so Kotlin arrays (which are virtually the same) do not as well.</p>\n\n<p>We <em>could</em> make our arrays implement <code>Iterable</code> by creating a standalone class which does not relate to Java arrays. However, in order to maintain compatibility with Java, we'd have to perform implicit conversions from such type to Java arrays and back. Implicit conversions are generally not the perfect approach because of performance overhead and unclear object identity semantics. Here they would also solve only a half of the problem, since you'd still have to manually \"box\" arrays when calling Kotlin code from Java. This is why such solution was not considered as feasible.</p>\n"}], "owner": {"reputation": 11620, "user_id": 2898715, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LWv1Z.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/2898715/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2785, "favorite_count": 2, "accepted_answer_id": 35939108, "answer_count": 1, "score": 37, "last_activity_date": 1457717216, "creation_date": 1457695159, "last_edit_date": 1457717216, "question_id": 35938906, "link": "https://stackoverflow.com/questions/35938906/why-doesnt-kotlin-arrayt-implement-iterablet", "title": "Why doesn&#39;t Kotlin Array&lt;T&gt; implement Iterable&lt;T&gt;", "body": "<p>Why doesn't the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-array/\" rel=\"noreferrer\"><code>Array&lt;T&gt;</code></a> class in <code>Kotlin</code> implement <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/index.html\" rel=\"noreferrer\"><code>Iterable&lt;T&gt;</code></a>?</p>\n\n<p>A quick look at the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-array/\" rel=\"noreferrer\">documentation</a> reveals that it already has an <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-array/iterator.html\" rel=\"noreferrer\"><code>iterator()</code></a> method too.</p>\n"}, {"tags": ["java", "android", "kotlin", "android-notifications"], "comments": [{"owner": {"reputation": 1835, "user_id": 3790150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0jh7Z.jpg?s=128&g=1", "display_name": "saeed", "link": "https://stackoverflow.com/users/3790150/saeed"}, "edited": false, "score": 0, "creation_date": 1457667723, "post_id": 35931426, "comment_id": 59521115, "body": "not sure may be it helps you <a href=\"http://stackoverflow.com/questions/5757997/hide-time-in-android-notification-without-using-custom-layout?lq=1\" title=\"hide time in android notification without using custom layout\">stackoverflow.com/questions/5757997/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2518, "user_id": 2920725, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x5H2X.jpg?s=128&g=1", "display_name": "Amad Yus", "link": "https://stackoverflow.com/users/2920725/amad-yus"}, "edited": false, "score": 0, "creation_date": 1457682500, "post_id": 35931559, "comment_id": 59526329, "body": "Thats one nice solutions. I never know we can use remote view with custom layout."}, {"owner": {"reputation": 1018, "user_id": 3930169, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001228313886/picture?type=large", "display_name": "Phan Sinh", "link": "https://stackoverflow.com/users/3930169/phan-sinh"}, "reply_to_user": {"reputation": 2518, "user_id": 2920725, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x5H2X.jpg?s=128&g=1", "display_name": "Amad Yus", "link": "https://stackoverflow.com/users/2920725/amad-yus"}, "edited": false, "score": 1, "creation_date": 1457688028, "post_id": 35931559, "comment_id": 59529212, "body": "Remember have 2 layout notification. Small layout and large layout."}], "tags": [], "owner": {"reputation": 1018, "user_id": 3930169, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001228313886/picture?type=large", "display_name": "Phan Sinh", "link": "https://stackoverflow.com/users/3930169/phan-sinh"}, "is_accepted": true, "score": 0, "last_activity_date": 1500465287, "last_edit_date": 1500465287, "creation_date": 1457666180, "answer_id": 35931559, "question_id": 35931426, "link": "https://stackoverflow.com/questions/35931426/notification-android-show-date/35931559#35931559", "title": "Notification android show date", "body": "<p>You can try use <code>RemoteViews</code> for customize a notification layout.\nWith RemoteViews you can easily control interface and action with notification.\nRefer more than here: <a href=\"https://developer.android.com/reference/android/widget/RemoteViews.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/widget/RemoteViews.html</a>.  </p>\n"}], "owner": {"reputation": 2518, "user_id": 2920725, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x5H2X.jpg?s=128&g=1", "display_name": "Amad Yus", "link": "https://stackoverflow.com/users/2920725/amad-yus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 1, "accepted_answer_id": 35931559, "answer_count": 1, "score": 1, "last_activity_date": 1576708200, "creation_date": 1457665070, "last_edit_date": 1576708200, "question_id": 35931426, "link": "https://stackoverflow.com/questions/35931426/notification-android-show-date", "title": "Notification android show date", "body": "<p>On the right side of notification android is showing time. It is possible to show both, date and time as I didn't found any notification api to set the date. Or it is android behaviour to show only time?</p>\n\n<p><a href=\"https://i.stack.imgur.com/DP3vU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DP3vU.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["benchmarking", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "edited": false, "score": 7, "creation_date": 1457695039, "post_id": 35932965, "comment_id": 59533840, "body": "This isn&#39;t a good way to benchmark code on the JVM for reasons outlined in almost any <a href=\"http://shipilev.net/\" rel=\"nofollow noreferrer\">Aleksey Shipilev</a> talk."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "edited": false, "score": 0, "creation_date": 1457702768, "post_id": 35932965, "comment_id": 59538841, "body": "@SergeiLebedev Thanks for the link!"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 4, "last_activity_date": 1457703131, "last_edit_date": 1457703131, "creation_date": 1457674471, "answer_id": 35932965, "question_id": 35930456, "link": "https://stackoverflow.com/questions/35930456/how-to-benchmark-a-kotlin-program/35932965#35932965", "title": "How to benchmark a Kotlin Program?", "body": "<p>All low level <strong>benchmarking</strong> tools are the same that you would use for Java, since the byte-code is identical.</p>\n\n<p>If by \"Kotlin native tools\" you mean syntactic sugar for measuring (relative) performance, then stdlib provides <code>measureTimeMillis</code> and <code>measureNanoTime</code>:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val benchmark = measureNanoTime {\n        // some slow code here\n    }\n}\n</code></pre>\n\n<p>The results may vary from run to run for obvious reasons, but it may help to estimate relative performance.</p>\n"}, {"tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 10, "last_activity_date": 1457685824, "creation_date": 1457685824, "answer_id": 35935690, "question_id": 35930456, "link": "https://stackoverflow.com/questions/35930456/how-to-benchmark-a-kotlin-program/35935690#35935690", "title": "How to benchmark a Kotlin Program?", "body": "<p>For benchmarking use <a href=\"http://openjdk.java.net/projects/code-tools/jmh/\">JMH</a>. This framework can help you write most relevant benchmark, and know a lot about how JVM works. There are old project on <a href=\"https://github.com/JetBrains/kotlin-benchmarks\">github</a>, but i hope you can just update versions and you good.</p>\n"}, {"tags": [], "owner": {"reputation": 3031, "user_id": 4899346, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/9gXkz.jpg?s=128&g=1", "display_name": "Oleg Cherr", "link": "https://stackoverflow.com/users/4899346/oleg-cherr"}, "is_accepted": false, "score": 4, "last_activity_date": 1479875049, "last_edit_date": 1479875049, "creation_date": 1457712857, "answer_id": 35944966, "question_id": 35930456, "link": "https://stackoverflow.com/questions/35930456/how-to-benchmark-a-kotlin-program/35944966#35944966", "title": "How to benchmark a Kotlin Program?", "body": "<p>Here is a simple micro-benchmarking tool in Kotlin:\n<a href=\"https://gist.github.com/olegcherr/b62a09aba1bff643a049\" rel=\"nofollow noreferrer\">https://gist.github.com/olegcherr/b62a09aba1bff643a049</a></p>\n\n<p>Usage is simple:</p>\n\n<pre><code>simpleMeasureTest {\n  // your code for the benchmark\n}\n</code></pre>\n\n<p>Also you can configure testing, for example:</p>\n\n<pre><code>simpleMeasureTest(ITERATIONS = 1000, TEST_COUNT = 10, WARM_COUNT = 2) {\n  // your code for the benchmark\n}\n</code></pre>\n\n<p>After you run this code go into the console. The output will be looking like this:</p>\n\n<pre><code>I/System.out: [TimeTest] -&gt; go\nI/System.out: [TimeTest] Warming 1 of 2\nI/System.out: [TimeTest] Warming 2 of 2\nI/System.out: [TimeTest] 770ms\nI/System.out: [TimeTest] 784ms\nI/System.out: [TimeTest] 788ms\nI/System.out: [TimeTest] 881ms\nI/System.out: [TimeTest] 802ms\nI/System.out: [TimeTest] 794ms\nI/System.out: [TimeTest] 789ms\nI/System.out: [TimeTest] 786ms\nI/System.out: [TimeTest] 750ms\nI/System.out: [TimeTest] 762ms\nI/System.out: [TimeTest] -&gt; average=790ms / median=788ms\n</code></pre>\n\n<p>To make your life easier, create a new console output filter.\nHere is my filter in Android Studio:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GI4J9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GI4J9.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1337, "user_id": 2373412, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/99238ee5c6dae7b50a155c74c059cada?s=128&d=identicon&r=PG", "display_name": "bkach", "link": "https://stackoverflow.com/users/2373412/bkach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3651, "favorite_count": 4, "accepted_answer_id": 35935690, "answer_count": 3, "score": 9, "last_activity_date": 1479875049, "creation_date": 1457658596, "question_id": 35930456, "link": "https://stackoverflow.com/questions/35930456/how-to-benchmark-a-kotlin-program", "title": "How to benchmark a Kotlin Program?", "body": "<p>Are there any tools available the can help benchmark some code in Kotlin?</p>\n\n<p>I can use something similar to the approaches suggested here: <a href=\"http://www.ibm.com/developerworks/java/library/j-benchmark1/index.html\" rel=\"noreferrer\">http://www.ibm.com/developerworks/java/library/j-benchmark1/index.html</a> - but I was wondering if there were any Kotlin native tools, so that i wouldn't necessarily have to reinvent the wheel!</p>\n"}, {"tags": ["annotations", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 961, "user_id": 2299605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l1riA.jpg?s=128&g=1", "display_name": "elementstyle", "link": "https://stackoverflow.com/users/2299605/elementstyle"}, "edited": false, "score": 0, "creation_date": 1529262829, "post_id": 35927492, "comment_id": 88799243, "body": "Is there a way to get @Retention(RetentionPolicy.CLASS) annotation&#39;s value in Kotlin?  I need to get entities from Room&#39;s Database annotation: <a href=\"https://developer.android.com/reference/android/arch/persistence/room/Database\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/arch/persistence/roo&zwnj;&#8203;m/&hellip;</a>"}], "tags": [], "owner": {"reputation": 29521, "user_id": 1950649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb5YJ.jpg?s=128&g=1", "display_name": "Vladimir Mironov", "link": "https://stackoverflow.com/users/1950649/vladimir-mironov"}, "is_accepted": true, "score": 6, "last_activity_date": 1457644718, "creation_date": 1457644718, "answer_id": 35927492, "question_id": 35927036, "link": "https://stackoverflow.com/questions/35927036/how-to-list-field-annotations-in-kotlin/35927492#35927492", "title": "How to list field annotations in Kotlin?", "body": "<p>The issue isn't Kotlin specific, you just haven't configured <code>Field</code> annotation properly. By default, each annotation is retained with <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html#CLASS\" rel=\"noreferrer\"><code>RetentionPolicy.CLASS</code></a>, meaning it won't be accessible via reflection. You have to use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html#RUNTIME\" rel=\"noreferrer\"><code>RetentionPolicy.RUNTIME</code></a> if you want to access the annotation in the runtime.</p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\npublic @interface Field {\n  String value();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 7, "last_activity_date": 1457644770, "creation_date": 1457644770, "answer_id": 35927506, "question_id": 35927036, "link": "https://stackoverflow.com/questions/35927036/how-to-list-field-annotations-in-kotlin/35927506#35927506", "title": "How to list field annotations in Kotlin?", "body": "<p>Java annotations, by default, are not retained at runtime so you'll need to specify such:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.annotation.Retention;\n\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\n\n@Retention(RUNTIME)\npublic @interface Field {\n    String value();\n}\n</code></pre>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/annotations.html\" rel=\"noreferrer\">Kotlin annotations</a> are retained by default:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>annotation class Field(val value: String)\n</code></pre>\n"}], "owner": {"reputation": 2279, "user_id": 1298357, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7f400efe02d25cb9ee37fe9a44d05f0?s=128&d=identicon&r=PG", "display_name": "Alex Klimashevsky", "link": "https://stackoverflow.com/users/1298357/alex-klimashevsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3015, "favorite_count": 0, "accepted_answer_id": 35927492, "answer_count": 2, "score": 3, "last_activity_date": 1457644770, "creation_date": 1457643139, "question_id": 35927036, "link": "https://stackoverflow.com/questions/35927036/how-to-list-field-annotations-in-kotlin", "title": "How to list field annotations in Kotlin?", "body": "<p>I have an annotation</p>\n\n<pre><code>public @interface Field {\n    String value();\n}\n</code></pre>\n\n<p>and java class, annotated by it:</p>\n\n<pre><code>public class Animal {\n    @Field(\"name\")\n    private String name;\n}\n</code></pre>\n\n<p>I try to list all field' annotations by the next code:</p>\n\n<pre><code>for(field in clazz.declaredFields){\n            for(annotation in field.annotations){\n                when(annotation){\n                     is Field -&gt; {\n                         //do something\n                     }\n                }\n            }\n        }\n</code></pre>\n\n<p>where clazz is <code>Class&lt;T&gt;</code></p>\n\n<p>but <code>field.annotations</code> is empty.</p>\n\n<p>How to list annotations correctly?</p>\n"}, {"tags": ["kotlin", "data-class"], "comments": [{"owner": {"reputation": 1377, "user_id": 364401, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/056e9a6e0509a9dd97130a2fc1a5cb16?s=128&d=identicon&r=PG", "display_name": "Stim", "link": "https://stackoverflow.com/users/364401/stim"}, "edited": false, "score": 0, "creation_date": 1502265031, "post_id": 35921234, "comment_id": 78128196, "body": "Since Kotlin 1.1 this is now possible <a href=\"https://kotlinlang.org/docs/reference/whatsnew11.html?q=da&amp;p=0#sealed-and-data-classes\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>."}], "answers": [{"comments": [{"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 1, "creation_date": 1457627010, "post_id": 35921740, "comment_id": 59502091, "body": "Thanks for the link!"}, {"owner": {"reputation": 10052, "user_id": 763935, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/510b0219cf16bff4e861741bde8cff25?s=128&d=identicon&r=PG", "display_name": "david.mihola", "link": "https://stackoverflow.com/users/763935/david-mihola"}, "edited": false, "score": 0, "creation_date": 1457683439, "post_id": 35921740, "comment_id": 59526801, "body": "So, maybe there&#39;s hope - thanks for the explanation!"}, {"owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 1, "creation_date": 1480689439, "post_id": 35921740, "comment_id": 69080441, "body": "If I am reading right, it looks like this restriction will be lifted with 1.1 (see <a href=\"https://github.com/Kotlin/KEEP/issues/31\" rel=\"nofollow noreferrer\">this issue</a> and <a href=\"https://github.com/Kotlin/KEEP/blob/master/proposals/data-class-inheritance.md\" rel=\"nofollow noreferrer\">this design document</a>)."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 1, "creation_date": 1480690121, "post_id": 35921740, "comment_id": 69080890, "body": "@mkobit, correct, this is planned for, 1.1. However, any of the features which are worked on for the 1.1 release can still be changed, no compatibility guarantees are provided for the preview builds."}, {"owner": {"reputation": 1888, "user_id": 8536239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef95deb577f83fc571bc5ab416461daa?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Padgett", "link": "https://stackoverflow.com/users/8536239/jeff-padgett"}, "edited": false, "score": 0, "creation_date": 1582911755, "post_id": 35921740, "comment_id": 106952359, "body": "This has been fixed and is now possible."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 16, "last_activity_date": 1480694399, "last_edit_date": 1480694399, "creation_date": 1457626473, "answer_id": 35921740, "question_id": 35921234, "link": "https://stackoverflow.com/questions/35921234/kotlin-sealed-class-cannot-contain-data-classes-why/35921740#35921740", "title": "Kotlin: sealed class cannot &quot;contain&quot; data classes? Why?", "body": "<p>Shortly before having entered Beta state, Kotlin team had decided to add certain limitations on <code>data</code> classes usage (<a href=\"http://blog.jetbrains.com/kotlin/2015/09/feedback-request-limitations-on-data-classes/\" rel=\"nofollow noreferrer\">see this post</a>) because of the problems they caused in class hierarchies.</p>\n\n<p>One of the limitations is that <code>data</code> class should not subtype another class, only interfaces are allowed. Consequently, <code>data</code> classes cannot derive from a <code>sealed class</code>.</p>\n\n<p>This was a necessary measure to avoid further postponing the 1.0 release. Some of the limitations were said to be lifted in future releases, once the problematic cases are thoroughly reviewed and a good design solution is found. </p>\n"}], "owner": {"reputation": 10052, "user_id": 763935, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/510b0219cf16bff4e861741bde8cff25?s=128&d=identicon&r=PG", "display_name": "david.mihola", "link": "https://stackoverflow.com/users/763935/david-mihola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2012, "favorite_count": 0, "accepted_answer_id": 35921740, "answer_count": 1, "score": 12, "last_activity_date": 1480694399, "creation_date": 1457625147, "last_edit_date": 1464615026, "question_id": 35921234, "link": "https://stackoverflow.com/questions/35921234/kotlin-sealed-class-cannot-contain-data-classes-why", "title": "Kotlin: sealed class cannot &quot;contain&quot; data classes? Why?", "body": "<p>OK, now that Kotlin is officially out and I am starting to play with it again, I am quite confused that I need to choose between the advantages of <code>sealed</code> and <code>data</code> but somehow can't have both.</p>\n\n<p>This, for example, seems to make sense to me, but does not compile:</p>\n\n<pre><code>sealed class Expr {\n    data class Const(val number: Double) : Expr()\n    data class Sum(val expr1 : Expr, val expr2 : Expr) : Expr()\n}\n</code></pre>\n\n<p>because the data classes cannot extend other classes.</p>\n\n<p>Is there something I am missing?</p>\n"}, {"tags": ["java", "android", "kotlin", "android-jack-and-jill"], "comments": [{"owner": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 1, "creation_date": 1457622879, "post_id": 35919849, "comment_id": 59498975, "body": "( kotlin_library(multiple*.kt) =&gt; .jar)  then Jill (.jar =&gt; Jayce) then import to jack (similar as other (non android)(plain java) jars)"}, {"owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1462276859, "post_id": 35919849, "comment_id": 61559601, "body": "Reading the docs: <i>&quot;You don\u2019t have to do anything differently to use Jack \u2014 just use your standard makefile commands to compile the tree or your project. Jack is the default Android build toolchain for M.&quot;</i> - source : <a href=\"https://source.android.com/source/jack.html\" rel=\"nofollow noreferrer\">source.android.com/source/jack.html</a> surely thats a typo and they mean <b>&#39;N&#39;</b> not <b>&#39;M&#39;</b> ?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1524536920, "post_id": 35919849, "comment_id": 87001653, "body": "Jack is dead, rejoice :P"}], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 7, "creation_date": 1457637900, "post_id": 35924434, "comment_id": 59509243, "body": "Actually Kotlin team has plans for supporting Jack &amp; Jill, I heard about it at their live event, but I&#39;d rather prefer an official post from JetBrains here, so I didn&#39;t answer the question."}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1457638250, "post_id": 35924434, "comment_id": 59509438, "body": "That would be great but the only support I heard of is via Jill. And as I mentioned in the answer there are not so many ways how to add this support."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1457638691, "post_id": 35924434, "comment_id": 59509733, "body": "In fact, there was something about in-memory code generation (and about much less realistic option, Kotlin -&gt; dex), so that Kotlin Android build would also have significant speed-up."}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1457640812, "post_id": 35924434, "comment_id": 59511045, "body": "Don&#39;t understand how in-memory code generation relates to Jack integration. And Kotlin to dex compilation means that JetBrains needs to write and support their own toolchain similar to Jack."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1457703841, "post_id": 35924434, "comment_id": 59539664, "body": "Not sure anyone other than Kotlin team should say what they can and can&#39;t do, or what they might or might not do.  They have talked about this before, and have plans that they can present."}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1457706642, "post_id": 35924434, "comment_id": 59541802, "body": "No need to be a part of Kotlin team to make assumptions on how they can add support for the new toolchain. Taking into account the toolchain is being developed by another company JB doesn&#39;t have much impact on its functionality."}, {"owner": {"reputation": 1150, "user_id": 4304439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-jHPT3g8LI-E/AAAAAAAAAAI/AAAAAAAABMc/-0RJRebP8tg/photo.jpg?sz=128", "display_name": "Alex Byrth", "link": "https://stackoverflow.com/users/4304439/alex-byrth"}, "edited": false, "score": 0, "creation_date": 1463762640, "post_id": 35924434, "comment_id": 62219167, "body": "convert a .class to .dex is much simpler than the compiler itself - I mean javac/kotlink. IntelligIdea guys can make it with both hands tied and blindfolded"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": false, "score": 7, "last_activity_date": 1489656379, "last_edit_date": 1489656379, "creation_date": 1457634495, "answer_id": 35924434, "question_id": 35919849, "link": "https://stackoverflow.com/questions/35919849/android-n-java-8-features-jack-compiler-and-kotlin-interop/35924434#35924434", "title": "Android N Java 8 features (Jack compiler) and Kotlin interop", "body": "<p><strong>UPDATE (03/16/2017)</strong></p>\n\n<p>Luckily, Jack is dead and so it won't affect Kotlin developers.</p>\n\n<hr>\n\n<p>If Jack is the future then you will get stuck in the past with Kotlin. Currently Jack doesn't support plugins that can compile non-Java source into Dalvik bytecode. And even if it did JetBrains would need to add a new backend to the Kotlin compiler which is not a trivial task. So you will have to use Kotlin with Jill and it's going to be something very similar to the toolchain you use now.</p>\n\n<p>As you can see in the image below even if it's impossible to explicitly turn off Jack you'll still be able to convert the project to a library project to use Jill. And the application project will just reference this library project.</p>\n\n<p><a href=\"https://i.stack.imgur.com/P7uWj.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P7uWj.gif\" alt=\"Jack and Jill Application Build\"></a></p>\n\n<p>The only way I see how Kotlin can work with Jack, which probably will not be implemented, is adding a Java backend to the Kotlin compiler, i.e. a backend that generates Java code like <a href=\"https://en.wikipedia.org/wiki/Xtend\" rel=\"nofollow noreferrer\">Xtend</a>. In this case code generated by the Kotlin compiler can be processed by Jack as any other Java code.</p>\n\n<p>But at the moment we don't know exactly what Jack will support when it's released. Maybe something will change dramatically and adding Kotlin support to Jack will become possible.</p>\n"}, {"tags": [], "owner": {"reputation": 4190, "user_id": 1566588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d2070e800356da57315d427aa2343f4?s=128&d=identicon&r=PG", "display_name": "Teovald", "link": "https://stackoverflow.com/users/1566588/teovald"}, "is_accepted": false, "score": 7, "last_activity_date": 1458311437, "last_edit_date": 1458311437, "creation_date": 1457653038, "answer_id": 35929496, "question_id": 35919849, "link": "https://stackoverflow.com/questions/35919849/android-n-java-8-features-jack-compiler-and-kotlin-interop/35929496#35929496", "title": "Android N Java 8 features (Jack compiler) and Kotlin interop", "body": "<p>Google is not going to push Jack as the default tool, but <code>Jack and Jill</code>.<br>\nCompiling .class files to dex with Jill is here to stay. Otherwise, you can say goodbye to jar/aar libraries.  </p>\n\n<p>Whether Jack or Jill will be slower is still up for debate. The Android team hopes that jack will be faster than the current build process, but that's not the case right now</p>\n\n<p>Furthermore, Jack and Dex are available in the open, nothing prevents the kotlin team from writing a tool emiting .jack or .dex files from kotlin sourcecode.</p>\n"}, {"comments": [{"owner": {"reputation": 5782, "user_id": 1392423, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/nlKLV.png?s=128&g=1", "display_name": "Tudor Luca", "link": "https://stackoverflow.com/users/1392423/tudor-luca"}, "edited": false, "score": 7, "creation_date": 1457659090, "post_id": 35930458, "comment_id": 59519114, "body": "Can you share some details on that? :)"}, {"owner": {"reputation": 5215, "user_id": 702229, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ae6e60f46454f2a58e049c5cd302d579?s=128&d=identicon&r=PG", "display_name": "NitroG42", "link": "https://stackoverflow.com/users/702229/nitrog42"}, "edited": false, "score": 0, "creation_date": 1457704119, "post_id": 35930458, "comment_id": 59539900, "body": "But will Kotlin be able to benefit the performance optimization of Jack ? (at least one day) because jack seems pretty awesome (i can&#39;t wait for some benchmark right now)"}, {"owner": {"reputation": 1731, "user_id": 1247323, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2b5cf6e7f28e965ada693d8585a65ab4?s=128&d=identicon&r=PG", "display_name": "sakis kaliakoudas", "link": "https://stackoverflow.com/users/1247323/sakis-kaliakoudas"}, "edited": false, "score": 0, "creation_date": 1457708671, "post_id": 35930458, "comment_id": 59543313, "body": "I&#39;ve seen a video presentation of a benchmark from the author of proguard, With a bit of googling you&#39;ll be able to find it"}, {"owner": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1457709339, "post_id": 35930458, "comment_id": 59543827, "body": "We are experiencing some difficulties with building the Android project with the Kotlin stdlib attached. Looks like a bug in Jill/Jack. Could you please look into it? <a href=\"https://code.google.com/p/android/issues/detail?id=196084\" rel=\"nofollow noreferrer\">code.google.com/p/android/issues/detail?id=196084</a>"}, {"owner": {"reputation": 1736, "user_id": 2825964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/K8YjK.jpg?s=128&g=1", "display_name": "Markus Marvell", "link": "https://stackoverflow.com/users/2825964/markus-marvell"}, "edited": false, "score": 0, "creation_date": 1457966397, "post_id": 35930458, "comment_id": 59633402, "body": "@Lukas Bergstrom Would you please answer that related question <a href=\"http://stackoverflow.com/questions/35958814/how-jack-java-android-compiler-kit-will-affect-scala-developers\" title=\"how jack java android compiler kit will affect scala developers\">stackoverflow.com/questions/35958814/&hellip;</a>"}, {"owner": {"reputation": 649, "user_id": 1550716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e22e2332fbe32f32833c5c575867deb4?s=128&d=identicon&r=PG", "display_name": "far.be", "link": "https://stackoverflow.com/users/1550716/far-be"}, "edited": false, "score": 1, "creation_date": 1458013314, "post_id": 35930458, "comment_id": 59656966, "body": "Does it mean Jill doesn&#39;t accept Java 8 bytecode? What about library modules? If they are compiled to .aar and than imported by Jill are they also unable to use Java 8? I.e. does it mean that Java new features are available only for internal project .java sources?"}, {"owner": {"reputation": 27993, "user_id": 3287204, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/nW8Rs.jpg?s=128&g=1", "display_name": "Y.S", "link": "https://stackoverflow.com/users/3287204/y-s"}, "edited": false, "score": 0, "creation_date": 1464007448, "post_id": 35930458, "comment_id": 62291948, "body": "Hi Lukas, could you please take a look at my question <a href=\"http://stackoverflow.com/q/37314760/3287204\">here</a>? Thank you ..."}], "tags": [], "owner": {"reputation": 657, "user_id": 6047677, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hp4q1IoyqWA/AAAAAAAAAAI/AAAAAAAAbm8/KLqqoq0-lIE/photo.jpg?sz=128", "display_name": "Lukas Bergstrom", "link": "https://stackoverflow.com/users/6047677/lukas-bergstrom"}, "is_accepted": false, "score": 63, "last_activity_date": 1457658609, "creation_date": 1457658609, "answer_id": 35930458, "question_id": 35919849, "link": "https://stackoverflow.com/questions/35919849/android-n-java-8-features-jack-compiler-and-kotlin-interop/35930458#35930458", "title": "Android N Java 8 features (Jack compiler) and Kotlin interop", "body": "<p>disclaimer: I work on Jack</p>\n\n<p>This won't affect you. Kotlin's compiler produces Java 6 bytecode, which Jack/Jill can import just fine.</p>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 5, "last_activity_date": 1459342242, "creation_date": 1459342242, "answer_id": 36309416, "question_id": 35919849, "link": "https://stackoverflow.com/questions/35919849/android-n-java-8-features-jack-compiler-and-kotlin-interop/36309416#36309416", "title": "Android N Java 8 features (Jack compiler) and Kotlin interop", "body": "<p>As said in the blog post (<a href=\"http://blog.jetbrains.com/kotlin/2016/03/kotlins-android-roadmap/\">Kotlin's Android Roadmap</a>) that appeared today:</p>\n\n<blockquote>\n  <p>Right now there are some issues that prevent Jack from handling Kotlin-generated bytecode correctly (<a href=\"https://code.google.com/p/android/issues/detail?id=196084\">196084</a> and <a href=\"https://code.google.com/p/android/issues/detail?id=203531\">203531</a>), but we plan to work together with the Google team to either resolve the issues or provide workarounds on our side. Once this is done, <strong>we\u2019ll be able to translate only changed class files using Jill</strong> during incremental compilation, as opposed to translating all class files every time (which is the only possible behavior in the old Android tooling).</p>\n</blockquote>\n\n<p>So Kotlin will eventually support Jack &amp; Jill and get benefits from it.</p>\n"}, {"comments": [{"owner": {"reputation": 7129, "user_id": 1003665, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/413967f7ca823b214c0365aa0e4c2273?s=128&d=identicon&r=PG", "display_name": "ticofab", "link": "https://stackoverflow.com/users/1003665/ticofab"}, "edited": false, "score": 0, "creation_date": 1473332253, "post_id": 36984638, "comment_id": 66104475, "body": "does the &#39;Annotation processing is not currently supported by Jack&#39; still holds as per September 2016? It seems like it is supported now..."}, {"owner": {"reputation": 10009, "user_id": 1041641, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FIz0K.png?s=128&g=1", "display_name": "TmTron", "link": "https://stackoverflow.com/users/1041641/tmtron"}, "edited": false, "score": 0, "creation_date": 1477382570, "post_id": 36984638, "comment_id": 67731350, "body": "it is supported, but there are still bugs: e.g. data-binding does not work yet: see <a href=\"https://code.google.com/p/android/issues/detail?id=210615#c11\" rel=\"nofollow noreferrer\">android  #210615</a>"}, {"owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "edited": false, "score": 0, "creation_date": 1479808117, "post_id": 36984638, "comment_id": 68702895, "body": "Note, that annotation processing IS NOT fully supported by Jack \u2014 it is in the same decrepit state as in Eclipse Compiler, which Jack is based on (<a href=\"https://eclipse.googlesource.com/jdt/eclipse.jdt.core/+/master/org.eclipse.jdt.compiler.apt/src/org/eclipse/jdt/internal/compiler/apt/model/TypesImpl.java#206\" rel=\"nofollow noreferrer\">several methods are implemented as placeholders, that throw exceptions when called</a>, there are numerous unfixed bugs, filed on ECJ bugtracker)."}], "tags": [], "owner": {"reputation": 8297, "user_id": 2473302, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/5k6j5.jpg?s=128&g=1", "display_name": "Dhaval Jivani", "link": "https://stackoverflow.com/users/2473302/dhaval-jivani"}, "is_accepted": false, "score": 15, "last_activity_date": 1462198523, "creation_date": 1462198523, "answer_id": 36984638, "question_id": 35919849, "link": "https://stackoverflow.com/questions/35919849/android-n-java-8-features-jack-compiler-and-kotlin-interop/36984638#36984638", "title": "Android N Java 8 features (Jack compiler) and Kotlin interop", "body": "<p><strong>@Pavel Dudka</strong></p>\n\n<p>Jack - is a compiler. Similar to javac, but it does a slightly different thing:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jSohk.png\"><img src=\"https://i.stack.imgur.com/jSohk.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, Jack compiles Java source code straight into Dex file! We don't have intermediate *.class files anymore, so dx tool is not needed!</p>\n\n<p>But wait! What if I include a third-party library in my project (which comes as a collection of .class files)?</p>\n\n<p>And that's when Jill comes into play:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2z51Y.png\"><img src=\"https://i.stack.imgur.com/2z51Y.png\" alt=\"enter image description here\"></a> </p>\n\n<p>Jill can process class files and transform them into special Jayce format which can be used as an input for Jack compiler.</p>\n\n<p>So now let's step aside for a second and think... What is going to happen to all those cool plugins we got so addicted to? They all need .class files and Jack compiler doesn't have those anymore...</p>\n\n<p>Luckily, Jack provides some of those important for us features out of the box:</p>\n\n<ul>\n<li>Retrolambda - will not be needed. Jack can handle lambdas properly</li>\n<li>Proguard - it is baked into Jack now, so you can still use obfuscation and minimization</li>\n</ul>\n\n<h2><strong>Advantages:</strong></h2>\n\n<p>Jack supports Java programming language 1.7 and integrates additional features described below.</p>\n\n<ul>\n<li><p><strong>Predexing</strong></p>\n\n<p>When generating a JACK library file, the .dex of the library is generated and stored inside the .jack library file as a pre-dex. When compiling, JACK reuses the pre-dex from each library.\nAll libraries are pre-dexed.</p></li>\n<li><p><strong>Incremental compilation</strong></p>\n\n<p>Incremental compilation means that only components that were touched since the last compilation, and their dependencies, are recompiled. Incremental compilation can be significantly faster than a full compilation when changes are limited to only a limited set of components.</p></li>\n<li><p><strong>Repackaging</strong></p>\n\n<p>JACK uses jarjar configuration files to do the repackaging.</p></li>\n<li><p><strong>Multidex support</strong></p>\n\n<p>Since dex files are limited to 65K methods, apps with over 65K methods must be split into multiple dex files. (See \u2018Building Apps with Over 65K Methods\u2019 for more information about multidex.)</p></li>\n</ul>\n\n<h2><strong>Disadvantages:</strong></h2>\n\n<ul>\n<li>Transform API is not supported by Jack - there is no intermediate Java bytecode you can modify, so some plugins I didn't mention here will stop working</li>\n<li>Annotation processing is not currently supported by Jack, so if you heavily depend on libraries like Dagger, AutoValue, etc., you should think twice before switching to Jack. EDIT: As pointed out by Jake Wharton, Jack in N Preview has annotation processing support, but it is not exposed yet through Gradle.</li>\n<li>Lint detectors which operate on a Java bytecode level are not supported.</li>\n<li>Jacoco is not supported - well, I personally find Jacoco questionable (it doesnt really show what you want to see), so can totally live without it</li>\n<li>Dexguard - enterprise version of Proguard is not currently supported</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": false, "score": 1, "last_activity_date": 1471433476, "creation_date": 1471433476, "answer_id": 38995436, "question_id": 35919849, "link": "https://stackoverflow.com/questions/35919849/android-n-java-8-features-jack-compiler-and-kotlin-interop/38995436#38995436", "title": "Android N Java 8 features (Jack compiler) and Kotlin interop", "body": "<p>I've already found this blog post from the official Kotlin's blog:  : <a href=\"https://blog.jetbrains.com/kotlin/2016/03/kotlins-android-roadmap/\" rel=\"nofollow\">Kotlin\u2019s Android Roadmap\n</a></p>\n\n<p>There you would find a part which tells that:</p>\n\n<blockquote>\n  <p>The next thing we plan to do to improve Android build performance is\n  providing an integration with Android\u2019s new <a href=\"http://tools.android.com/tech-docs/jackandjill\" rel=\"nofollow\">Jack and Jill toolchain</a>.\n  Right now there are some issues that prevent Jack from handling\n  Kotlin-generated bytecode correctly (<a href=\"https://code.google.com/p/android/issues/detail?id=196084\" rel=\"nofollow\">196084</a> and <a href=\"https://code.google.com/p/android/issues/detail?id=203531\" rel=\"nofollow\">203531</a>), but we plan\n  to work together with the Google team to either resolve the issues or\n  provide workarounds on our side. Once this is done, we\u2019ll be able to\n  translate only changed class files using Jill during incremental\n  compilation, as opposed to translating all class files every time\n  (which is the only possible behavior in the old Android tooling).</p>\n</blockquote>\n\n<p>So as @LukasBergstrom said, there won't be any problem with \"stucking in the past\" ;-)</p>\n\n<p>You can also check <code>Reddit</code> discussion linked with this topic: <a href=\"https://www.reddit.com/r/androiddev/comments/49vroi/what_is_the_status_of_kotlin_with_jack_and_jill/\" rel=\"nofollow\">What is the status of Kotlin with Jack and Jill? </a></p>\n\n<p>Happy coding.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7536624, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mEsbdZlrtnc/AAAAAAAAAAI/AAAAAAAAXmE/QrXe9MtyF1k/photo.jpg?sz=128", "display_name": "David Kindred", "link": "https://stackoverflow.com/users/7536624/david-kindred"}, "is_accepted": false, "score": 0, "last_activity_date": 1486584348, "creation_date": 1486584348, "answer_id": 42122622, "question_id": 35919849, "link": "https://stackoverflow.com/questions/35919849/android-n-java-8-features-jack-compiler-and-kotlin-interop/42122622#42122622", "title": "Android N Java 8 features (Jack compiler) and Kotlin interop", "body": "<p>According to the <a href=\"https://blog.jetbrains.com/kotlin/2017/02/kotlin-1-1-beta-2-is-here/\" rel=\"nofollow noreferrer\">Kotlin blog</a>, release 1.1-beta2 New Features section:</p>\n\n<blockquote>\n  <p>Support for building Android projects when the Jack toolchain is enabled (jackOptions { true });</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 58561, "user_id": 2396539, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/nGigV.png?s=128&g=1", "display_name": "Aniket Thakur", "link": "https://stackoverflow.com/users/2396539/aniket-thakur"}, "is_accepted": false, "score": 2, "last_activity_date": 1490415702, "last_edit_date": 1592644375, "creation_date": 1490415702, "answer_id": 43012493, "question_id": 35919849, "link": "https://stackoverflow.com/questions/35919849/android-n-java-8-features-jack-compiler-and-kotlin-interop/43012493#43012493", "title": "Android N Java 8 features (Jack compiler) and Kotlin interop", "body": "<p>As per latest google announcement -</p>\n<blockquote>\n<p>We've decided to add support for Java 8 language features directly into the current javac and dx set of tools, and deprecate the Jack toolchain. With this new direction, existing tools and plugins dependent on the Java class file format should continue to work. Moving forward, Java 8 language features will be natively supported by the Android build system. We're aiming to launch this as part of Android Studio in the coming weeks, and we wanted to share this decision early with you.</p>\n<p>We initially tested adding Java 8 support via the Jack toolchain. Over time, we realized the cost of switching to Jack was too high for our community when we considered the annotation processors, bytecode analyzers and rewriters impacted. Thank you for trying the Jack toolchain and giving us great feedback. You can continue using Jack to build your Java 8 code until we release the new support. Migrating from Jack should require little or no work.</p>\n</blockquote>\n<p>So we need not worry about jack toolchain becoming default toolchain for android development. You can continue to use kotlin or use normal javac/dx set of tools.</p>\n<p>Source :  <a href=\"https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html\" rel=\"nofollow noreferrer\">Future of Java 8 Language Feature Support on Android</a></p>\n"}], "owner": {"reputation": 5782, "user_id": 1392423, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/nlKLV.png?s=128&g=1", "display_name": "Tudor Luca", "link": "https://stackoverflow.com/users/1392423/tudor-luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8791, "favorite_count": 22, "answer_count": 8, "score": 98, "last_activity_date": 1538497508, "creation_date": 1457621548, "last_edit_date": 1495622092, "question_id": 35919849, "link": "https://stackoverflow.com/questions/35919849/android-n-java-8-features-jack-compiler-and-kotlin-interop", "title": "Android N Java 8 features (Jack compiler) and Kotlin interop", "body": "<p><strong>Update 3.</strong>\nKOTLIN IS <a href=\"https://developer.android.com/kotlin/index.html\" rel=\"noreferrer\">NOW OFFICIALLY SUPPORTED FOR ANDROID DEVELOPMENT</a>. BY GOOGLE. YAAAAAAAAS!</p>\n\n<p><strong>Update 2</strong>: It looks like <a href=\"http://blog.jetbrains.com/kotlin/2016/03/kotlins-android-roadmap/\" rel=\"noreferrer\">JetBrains is really committed to supporting Kotlin for Android in the long run</a>. I'm a happy kotlin user :).</p>\n\n<p><strong>Update</strong>: Hadi Hariri, from JetBrains, <a href=\"https://kotlinlang.slack.com/archives/android/p1457690416001737\" rel=\"noreferrer\">mentioned they're going to release some info on this topic</a>. I will update this post once they do.</p>\n\n<p><br>\n=== DEPRECATED STUFF NEXT ===\n<br></p>\n\n<p>Google just released a preview for the upcoming Android N with some interesting features, the most notable being partial <a href=\"https://developer.android.com/preview/j8-jack.html\" rel=\"noreferrer\">Java 8 language support</a>. This is possible due to the new <a href=\"https://source.android.com/source/jack.html\" rel=\"noreferrer\">Jack toolchain</a> Google is working on.</p>\n\n<p>The current toolchain using <strong>javac</strong> or <strong>kotlinc</strong>: <br/>\n<strong>javac</strong> (<code>.java</code> --> <code>.class</code>) --> <strong>dx</strong> (<code>.class</code> --> <code>.dex</code>) <br/>\n<strong>kotlinc</strong> (<code>.kt</code> --> <code>.class</code>) --> <strong>dx</strong> (<code>.class</code> --> <code>.dex</code>)</p>\n\n<p>New Jack toolchain: <br/>\n<strong>Jack</strong> (<code>.java</code> --> <code>.jack</code> --> <code>.dex</code>)</p>\n\n<p>I am assuming Google will push forward towards making <strong>Jack</strong> the default toolchain for Android development.\nUpdate: <strong>Jack</strong> is now <a href=\"https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html\" rel=\"noreferrer\">deprecated</a>. Yas.</p>\n\n<p>My question is how will this new toolchain affect me, in the future, as a <strong>kotlin</strong> user for Android development? Will I get \"stuck in the past\"?</p>\n"}, {"tags": ["visibility", "kotlin"], "comments": [{"owner": {"reputation": 38631, "user_id": 253468, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/eump2.jpg?s=128&g=1", "display_name": "TWiStErRob", "link": "https://stackoverflow.com/users/253468/twisterrob"}, "edited": false, "score": 1, "creation_date": 1525338973, "post_id": 35914095, "comment_id": 87320207, "body": "More discussion linked: <a href=\"https://discuss.kotlinlang.org/t/kotlin-to-support-package-protected-visibility/1544\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/&hellip;</a>"}, {"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 1, "creation_date": 1572889906, "post_id": 35914095, "comment_id": 103693652, "body": "There is a feature request for package-private visibility or an equivalent: <a href=\"https://youtrack.jetbrains.com/issue/KT-29227\" rel=\"nofollow noreferrer\">KT-29227</a>."}, {"owner": {"reputation": 129, "user_id": 12696290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TWqmF.jpg?s=128&g=1", "display_name": "Timotej Leginus", "link": "https://stackoverflow.com/users/12696290/timotej-leginus"}, "edited": false, "score": 0, "creation_date": 1578925738, "post_id": 35914095, "comment_id": 105587664, "body": "Kotlin offers <code>internal</code>"}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 2, "creation_date": 1578980001, "post_id": 35914095, "comment_id": 105605754, "body": "internal is very different thing, if i were to use internal to replace package visibillity id have 200 modules"}], "answers": [{"comments": [{"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 9, "creation_date": 1457620674, "post_id": 35916484, "comment_id": 59497163, "body": "Well i like the internal, but we will have that fixed much better in java9 however i never ever saw that someone would create the same package just to use code... after all if someone is that much determined to violate the modularity he will just copy paste the code if necessary... What i&#39;m concerned here is usability. cos simply putting ton of code in one file is dumb..."}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "reply_to_user": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 1, "creation_date": 1457627556, "post_id": 35916484, "comment_id": 59502439, "body": "@vach I actually saw - and did - that. Some libraries are frustratingly ignorant to your use cases (doesn&#39;t mean it&#39;s good practice)"}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 6, "creation_date": 1457634317, "post_id": 35916484, "comment_id": 59507042, "body": "Ok but right now i&#39;m migrating a java project to kotlin, and i have very good visibility enforced, tipicaly these are some utilities that are composed of 4-5 classes only one of which is visible to the outside world... Now with kotlin i have no option to have the same visibility unless i put everything in the same file... Do i understand it correctly or there is some other approach i dont know of?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1457635667, "post_id": 35916484, "comment_id": 59507859, "body": "@vach, well, in Kotlin it&#39;s OK to put a few classes with similar meaning or interacting with each other inside one file. IMHO, for 4-5 classes this would be OK. When there&#39;s more classes, Kotlin modules system encourages you to move them into a separate lib module, which is quite easy if you use Maven/Gradle."}, {"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 6, "creation_date": 1457662609, "post_id": 35916484, "comment_id": 59519960, "body": "Only each additional module = increased compilation time; there&#39;s no way you would want to convert your packages one-to-one to modules. The idea to put 4-5 classes into a single file is also quite controversial, I think."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457704857, "post_id": 35916484, "comment_id": 59540445, "body": "Putting 4-5 classes in a single file is quite common in Kotlin, not controversial.  For small classes it happens a lot, along with functions."}, {"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 26, "creation_date": 1457739113, "post_id": 35916484, "comment_id": 59559771, "body": "@JaysonMinard I agree about small classes. But let&#39;s say your Java package consists of 5 classes, 200 lines each, and suddenly to mimic the same visibility in Kotlin you have to create a 1000 lines long file. That&#39;s what I was calling controversial above."}, {"owner": {"reputation": 334, "user_id": 1123867, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a4ad7f95938d505e4fbd12b29cbf27f0?s=128&d=identicon&r=PG", "display_name": "Endre", "link": "https://stackoverflow.com/users/1123867/endre"}, "edited": false, "score": 7, "creation_date": 1495895065, "post_id": 35916484, "comment_id": 75446559, "body": "Package level visibility is just cool in Java. Even it can be &quot;hacked&quot; you don&#39;t have to do it. It makes unit testing of protected stuff easy and well separated. &quot;protected&quot; visibility in Java also increases readability, it says you mustn&#39;t use the member directly, unless you are the package maintainer. Breaking down a project into more projects/modules just for the right visibility issues just doesn&#39;t make sense, just annoying extra work. So in this issue Java is still better than Kotlin."}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 1, "creation_date": 1498362334, "post_id": 35916484, "comment_id": 76467061, "body": "After using kotlin for a while, i do think kotlin does it better, their internal makes more sense... basically for all the java devs, if you think there is something wrong with kotlin just use it for some time and you&#39;ll probably come to same conclusions as the architects did :)"}, {"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 17, "creation_date": 1505651171, "post_id": 35916484, "comment_id": 79490961, "body": "&quot;the main flaw of Java&#39;s package protected visibility is that everyone can still access your code&quot; - a rather poor reason if you ask me. You can use reflection to access anything you want anyway. Access modifiers are not for security, they are for preventing accidental mistakes and specifying API contracts. If someone writes the code inside the same package, it&#39;s safe to assume that this isn&#39;t an accident and he must know what he is doing. If you want security, use <code>SecurityManager</code>."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 0, "creation_date": 1505656076, "post_id": 35916484, "comment_id": 79492297, "body": "@Malcolm Thanks for pointing that out. I agree, and with Jigsaw prohibiting split packages, this problem ceases to exist. I should edit the answer and remove that point, but anyway Kotlin does not rely on packages, maybe for some other reason."}, {"owner": {"reputation": 24615, "user_id": 813951, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1qFnU.png?s=128&g=1", "display_name": "Mister Smith", "link": "https://stackoverflow.com/users/813951/mister-smith"}, "edited": false, "score": 0, "creation_date": 1591095609, "post_id": 35916484, "comment_id": 109919339, "body": "For everyone who thinks this is essential, please upvote and comment in <a href=\"https://youtrack.jetbrains.com/issue/KT-29227\" rel=\"nofollow noreferrer\">this YouTrack request</a>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 43, "last_activity_date": 1508180880, "last_edit_date": 1508180880, "creation_date": 1457612820, "answer_id": 35916484, "question_id": 35914095, "link": "https://stackoverflow.com/questions/35914095/package-protected-alternative-in-kotlin/35916484#35916484", "title": "Package protected alternative in Kotlin", "body": "<p>Kotlin, compared to Java, seems to rely on packages model to a lesser degree (e.g. directories structure is not bound to packages). Instead, Kotlin offers <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html#visibility-modifiers\" rel=\"noreferrer\"><code>internal</code> visibility</a>, which is designed for modular project architecture. Using it, you can encapsulate a part of your code inside a separate <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html#modules\" rel=\"noreferrer\">module</a>.</p>\n\n<p>So, on top level declarations you can use</p>\n\n<ul>\n<li><code>private</code> to restrict visibility to the file</li>\n<li><code>internal</code> to restrict visibility to the module</li>\n</ul>\n\n<p>At this point, there is no other option for visibility restriction.</p>\n"}, {"tags": [], "owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "is_accepted": false, "score": 6, "last_activity_date": 1571922091, "last_edit_date": 1571922091, "creation_date": 1504211054, "answer_id": 45989535, "question_id": 35914095, "link": "https://stackoverflow.com/questions/35914095/package-protected-alternative-in-kotlin/45989535#45989535", "title": "Package protected alternative in Kotlin", "body": "<p>As @hotkeys points out, you can use the <code>internal</code> keyword in a <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html#modules\" rel=\"nofollow noreferrer\">module</a> or you can put all classes that would otherwise belong in a package inside a single file, but sticking several classes in a file may be a questionable design decision.</p>\n\n<p>For me, the <code>package</code> visibility is helpful for its documenting value. I want to know what public interface some package is presenting to the rest of the project, hide factory implementation classes and so on. </p>\n\n<p>So even if it's possible to access package-private classes and methods in Java, I still choose to use the <code>package</code> modifier.</p>\n\n<p>For this I created a project with a single annotation:</p>\n\n<pre><code>package com.mycompany.libraries.kotlinannotations;\n\nimport static java.lang.annotation.ElementType.CONSTRUCTOR;\nimport static java.lang.annotation.ElementType.METHOD;\nimport static java.lang.annotation.ElementType.TYPE;\nimport static java.lang.annotation.RetentionPolicy.SOURCE;\n\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.Target;\n\n@Documented\n@Retention(SOURCE)\n@Target({ TYPE, METHOD, CONSTRUCTOR })\n/**\n * Use in Kotlin code for documentation purposes. \n * \n * Whenever a Kotlin class or method is intended to be accesible at package level only.\n *\n */\npublic @interface PackagePrivate {\n\n}\n</code></pre>\n\n<p>Then I can use this annotation in any Kotlin project.</p>\n\n<p>The second step, which I haven't done yet, is creating a PMD rule to enforce this with maven (or any other build tool for that matter) and also be able to see violations of the rule in my IDE with the pmd plugin. </p>\n\n<p>There no is full Kotlin support in <a href=\"https://github.com/pmd/pmd\" rel=\"nofollow noreferrer\">pmd</a> <a href=\"https://github.com/pmd/pmd/issues/419\" rel=\"nofollow noreferrer\">at this moment</a> but it seems to be expected at some point.</p>\n"}, {"comments": [{"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1578980161, "post_id": 59711143, "comment_id": 105605787, "body": "is it actually specific for android? kotlin is not just android it would be awesome to have libs generic when possible"}, {"owner": {"reputation": 5261, "user_id": 2548988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a64c4d3033369ce36d4252ddbfa6983?s=128&d=identicon&r=PG", "display_name": "esentsov", "link": "https://stackoverflow.com/users/2548988/esentsov"}, "reply_to_user": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1578983614, "post_id": 59711143, "comment_id": 105606720, "body": "Unfortunately it&#39;s android specific and the reason is is uses Android Lint. Android Studio supports it nicely and runs the checks on the fly, showing errors in the IDE itself immediately. It&#39;s probably possible to implement these checks with something like <code>ktlint</code>, but without IDE support user experience is really bad for such kind of checks."}, {"owner": {"reputation": 733, "user_id": 9638388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DIYkQ.png?s=128&g=1", "display_name": "geekley", "link": "https://stackoverflow.com/users/9638388/geekley"}, "edited": false, "score": 1, "creation_date": 1587000762, "post_id": 59711143, "comment_id": 108340282, "body": "Hint: You can make it more like a keyword and avoid having to import it on every file by adding type aliases on each package, for example: <code>internal typealias pkg = io.github.esentsov.PackagePrivate; internal typealias private = io.github.esentsov.FilePrivate</code>. And use it like <code>@pkg val ... @private internal val ...</code>"}], "tags": [], "owner": {"reputation": 5261, "user_id": 2548988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a64c4d3033369ce36d4252ddbfa6983?s=128&d=identicon&r=PG", "display_name": "esentsov", "link": "https://stackoverflow.com/users/2548988/esentsov"}, "is_accepted": false, "score": 7, "last_activity_date": 1578894498, "creation_date": 1578894498, "answer_id": 59711143, "question_id": 35914095, "link": "https://stackoverflow.com/questions/35914095/package-protected-alternative-in-kotlin/59711143#59711143", "title": "Package protected alternative in Kotlin", "body": "<p>As a workaround for me on android I've created <code>@PackagePrivate</code> annotation and lint checks to control access. <a href=\"https://esentsov.github.io/kotlin-visibility-modifiers/\" rel=\"noreferrer\">Here</a> you can find the project.</p>\n\n<p>Lint checks are obviously not that strict as compiler checks and some setup needed to fail the build on errors. But android studio picks up lint checks automatically and shows error immediately while typing. Unfortunately I don't know a way to exclude annotated members from autocomplete.</p>\n\n<p>Also, as lint is a purely compile-time tool, no checks at runtime performed.</p>\n"}], "owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15447, "favorite_count": 14, "accepted_answer_id": 35916484, "answer_count": 3, "score": 69, "last_activity_date": 1595802007, "creation_date": 1457606382, "last_edit_date": 1595802007, "question_id": 35914095, "link": "https://stackoverflow.com/questions/35914095/package-protected-alternative-in-kotlin", "title": "Package protected alternative in Kotlin", "body": "<p>In Java, we have package protected (default) modifier for classes, which allows us to have many classes in a single package but exposes only a few and keep the logic encapsulated.</p>\n<p>With Kotlin this seems not to be the case, if I want to have few other classes that shall be visible to each other, but not further I have to use a private modifier which limits visibility to a single file. So essentially if you had 10 classes in a package and only one of those were public now you'll have one huge file with all the classes in it (and <code>private</code> all over the place).</p>\n<p>Is this normal practice or there is a way to achieve some similar modularity in Kotlin?</p>\n<p>I don't understand: if they have the notion of a package, why did they get rid of package protected access.</p>\n<p><strong>Update: We might have package protected visibility after all</strong><br />\n<a href=\"https://discuss.kotlinlang.org/t/kotlin-to-support-package-protected-visibility/1544\" rel=\"noreferrer\">see the discussion here</a></p>\n<p><strong>Update: If you read through the discussion and still think this is a must feature for the language, please vote <a href=\"https://youtrack.jetbrains.com/issue/KT-29227\" rel=\"noreferrer\">here</a></strong></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1457704935, "post_id": 35913617, "comment_id": 59540499, "body": "You can scan the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/index.html\" rel=\"nofollow noreferrer\">API reference</a>, or explore functions available on classes via your IDE code-completion to find helpful things in Kotlin."}], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 5, "creation_date": 1457638402, "post_id": 35914698, "comment_id": 59509559, "body": "yep, unlike in C++, cast is not a conversion"}], "tags": [], "owner": {"reputation": 17466, "user_id": 227192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/babead4ecd80f68c79aa516312734285?s=128&d=identicon&r=PG", "display_name": "Aleksander Blomsk&#248;ld", "link": "https://stackoverflow.com/users/227192/aleksander-blomsk%c3%b8ld"}, "is_accepted": true, "score": 56, "last_activity_date": 1457705024, "last_edit_date": 1457705024, "creation_date": 1457608044, "answer_id": 35914698, "question_id": 35913617, "link": "https://stackoverflow.com/questions/35913617/how-to-convert-long-to-int-in-kotlin/35914698#35914698", "title": "How to convert Long to Int in Kotlin?", "body": "<p>Use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/to-int.html\" rel=\"noreferrer\"><code>Long.toInt()</code></a>:</p>\n\n<pre><code>process((System.currentTimeMillis() / 1000 / 60).toInt()) \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3098, "user_id": 277733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef1f00e32e4d265966ccb9758b58721?s=128&d=identicon&r=PG", "display_name": "Andrej Herich", "link": "https://stackoverflow.com/users/277733/andrej-herich"}, "edited": false, "score": 2, "creation_date": 1559053312, "post_id": 54322818, "comment_id": 99293644, "body": "Or use <code>Math.toIntExact</code> from Java."}], "tags": [], "owner": {"reputation": 153, "user_id": 5073467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68391d1cf4cf40d722b61a945b8fb25a?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Marvolo Riddle", "link": "https://stackoverflow.com/users/5073467/tom-marvolo-riddle"}, "is_accepted": false, "score": 2, "last_activity_date": 1548232588, "last_edit_date": 1548232588, "creation_date": 1548231842, "answer_id": 54322818, "question_id": 35913617, "link": "https://stackoverflow.com/questions/35913617/how-to-convert-long-to-int-in-kotlin/54322818#54322818", "title": "How to convert Long to Int in Kotlin?", "body": "<p>\u2193Long.toInt() is not safety. because long to int is shrink</p>\n\n<pre><code>val l: Long\nl.toInt()\u3000\u2190not safety! when out of int range\n</code></pre>\n\n<p>Please add this function to arbitrary kt file instead.\nThen, a method called toIntOrNull is added to Long.\nThis method returns null if it tries to convert long to int, when it does not fit within int range.</p>\n\n<pre><code>fun Long.toIntOrNull(): Int? {\n    return if (this &lt; Int.MIN_VALUE || this &gt; Int.MAX_VALUE) {\n        null\n    } else {\n        this.toInt()\n    }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>fun Long.toIntOrNull(): Int? {\n    val i = this.toInt()\n    return if (i.toLong() == this) i else null\n}\n</code></pre>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21154, "favorite_count": 1, "accepted_answer_id": 35914698, "answer_count": 2, "score": 29, "last_activity_date": 1548232588, "creation_date": 1457605164, "question_id": 35913617, "link": "https://stackoverflow.com/questions/35913617/how-to-convert-long-to-int-in-kotlin", "title": "How to convert Long to Int in Kotlin?", "body": "<p>I want to do something like this:</p>\n\n<pre><code>fun process(minutes: Int) = 0\n\nfun test() {\n    process(System.currentTimeMillis() / 1000 / 60) // error: Int expected\n}\n</code></pre>\n\n<p>and if I try <code>process((System.currentTimeMillis() / 1000 / 60) as Int)</code> I get a <code>ClassCastException</code> at runtime.</p>\n\n<p>So how can I convert Long to Int? </p>\n"}, {"tags": ["android", "kotlin", "simple-framework", "retrofit2"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457705377, "post_id": 35913391, "comment_id": 59540807, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/35847763/kotlin-data-class-bean-validation-jsr-303\">kotlin data class + bean validation jsr 303</a>"}], "answers": [{"tags": [], "owner": {"reputation": 221, "user_id": 2507678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMyXH.png?s=128&g=1", "display_name": "Matt Sams", "link": "https://stackoverflow.com/users/2507678/matt-sams"}, "is_accepted": false, "score": 2, "last_activity_date": 1457704813, "last_edit_date": 1457704813, "creation_date": 1457704428, "answer_id": 35942046, "question_id": 35913391, "link": "https://stackoverflow.com/questions/35913391/retrofit2-simplexml-in-kotlin-methodexception-annotation-must-mark-a-set-or/35942046#35942046", "title": "Retrofit2 + SimpleXML in Kotlin: MethodException: Annotation must mark a set or get method", "body": "<p>Not familiar with the SimpleXml library but if it's annotation processor is looking for specific get and set methods you may want to try setting up your class in the following way:</p>\n\n<pre><code>@Root(name=\"response\") class User() {\nvar result:String?=null\n    @Element\n    get\n    @Element\n    set\nvar token:String?=null\n    @Element\n    get\n    @Element\n    set\nvar uid:String?=null\n    @Element\n    get\n    @Element\n    set\n}\n</code></pre>\n\n<p>As well, if the @Element annotation supports field types you could use this approach:</p>\n\n<pre><code>@Root(name=\"response\") class User() {\n    @Element @JvmField var result:String?=null\n    @Element @JvmField var token:String?=null\n    @Element @JvmField var uid:String?=null\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 335, "user_id": 2053939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VgEds.jpg?s=128&g=1", "display_name": "c8112002", "link": "https://stackoverflow.com/users/2053939/c8112002"}, "edited": false, "score": 9, "creation_date": 1457925221, "post_id": 35942345, "comment_id": 59611903, "body": "Thank you for your answer! I used <code>field:Element</code> annotation and it have been worked well."}, {"owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "edited": false, "score": 1, "creation_date": 1524417790, "post_id": 35942345, "comment_id": 86953164, "body": "Changing to <code>@field:Element</code> worked for me while <code>@get:Element</code> did not.   For reference:  <a href=\"https://stackoverflow.com/a/48790217/3853712\">stackoverflow.com/a/48790217/3853712</a>"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 32, "last_activity_date": 1457705678, "last_edit_date": 1495535459, "creation_date": 1457705342, "answer_id": 35942345, "question_id": 35913391, "link": "https://stackoverflow.com/questions/35913391/retrofit2-simplexml-in-kotlin-methodexception-annotation-must-mark-a-set-or/35942345#35942345", "title": "Retrofit2 + SimpleXML in Kotlin: MethodException: Annotation must mark a set or get method", "body": "<p><strong>This is the same problem as: <a href=\"https://stackoverflow.com/questions/35847763/kotlin-data-class-bean-validation-jsr-303/35853200#35853200\">kotlin data class + bean validation jsr 303</a></strong></p>\n\n<p>You need to use <a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"noreferrer\">Annotation use-site targets</a> since the default for an annotation on a property is prioritized as:</p>\n\n<ul>\n<li><strong>parameter</strong> (<em>if declared in constructor</em>)</li>\n<li><strong>property</strong> (<em>if the target site allows, but only Kotlin created annotations can do this</em>)</li>\n<li><strong>field</strong> (<em>likely what happened here, which isn't what you wanted</em>).</li>\n</ul>\n\n<p>Use <code>get</code> or <code>set</code> target to place the annotation on the getter or setter.  Here it is for the getter:</p>\n\n<pre><code>@Root(name = \"response\")\npublic class User() {\n    @get:Element public var result: String? = null\n    @get:Element public var token: String? = null\n    @get:Element public var uid: String? = null\n}\n</code></pre>\n\n<p>See the <a href=\"https://stackoverflow.com/questions/35847763/kotlin-data-class-bean-validation-jsr-303/35853200#35853200\">linked answer</a> for the details.</p>\n"}, {"comments": [{"owner": {"reputation": 7441, "user_id": 1575353, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rvz3i.png?s=128&g=1", "display_name": "S\u1d00\u1d0d On\u1d07\u1d0c\u1d00", "link": "https://stackoverflow.com/users/1575353/s%e1%b4%80%e1%b4%8d-on%e1%b4%87%e1%b4%8c%e1%b4%80"}, "edited": false, "score": 0, "creation_date": 1497988807, "post_id": 44661889, "comment_id": 76309580, "body": "Por favor leia <a href=\"https://stackoverflow.blog/2009/07/23/non-english-question-policy/\">stackoverflow.blog/2009/07/23/non-english-question-policy</a> ... Voc&#234; pode us&#225; <a href=\"https://pt.stackoverflow.com/\">pt.stackoverflow.com</a>?"}, {"owner": {"reputation": 2732, "user_id": 2441420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WA58o.jpg?s=128&g=1", "display_name": "lustig", "link": "https://stackoverflow.com/users/2441420/lustig"}, "edited": false, "score": 0, "creation_date": 1560111754, "post_id": 44661889, "comment_id": 99621428, "body": "Any idea why this works? Is there a way to clean this code up?"}], "tags": [], "owner": {"reputation": 71, "user_id": 3124103, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001777038392/picture?type=large", "display_name": "Tairo Roberto", "link": "https://stackoverflow.com/users/3124103/tairo-roberto"}, "is_accepted": false, "score": 4, "last_activity_date": 1497990666, "last_edit_date": 1497990666, "creation_date": 1497988308, "answer_id": 44661889, "question_id": 35913391, "link": "https://stackoverflow.com/questions/35913391/retrofit2-simplexml-in-kotlin-methodexception-annotation-must-mark-a-set-or/44661889#44661889", "title": "Retrofit2 + SimpleXML in Kotlin: MethodException: Annotation must mark a set or get method", "body": "<pre><code>To avoid the error in parse do one should place annotation tags @set e @get\n\n@Root(name = \"response\", strict = false)\npublic class User() {\n\n    @set:Element(name = \"result\")\n    @get:Element(name = \"result\")\n    public var result: String? = null\n\n    @set:Element(name = \"token\")\n    @get:Element(name = \"token\")\n    @Element public var token: String? = null\n\n    @set:Element(name = \"uid\")\n    @get:Element(name = \"uid\")\n    public var uid: String? = null\n}\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 2053939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VgEds.jpg?s=128&g=1", "display_name": "c8112002", "link": "https://stackoverflow.com/users/2053939/c8112002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7600, "favorite_count": 9, "accepted_answer_id": 35942345, "answer_count": 3, "score": 22, "last_activity_date": 1497990666, "creation_date": 1457604555, "last_edit_date": 1457690849, "question_id": 35913391, "link": "https://stackoverflow.com/questions/35913391/retrofit2-simplexml-in-kotlin-methodexception-annotation-must-mark-a-set-or", "title": "Retrofit2 + SimpleXML in Kotlin: MethodException: Annotation must mark a set or get method", "body": "<p>I want to fetch XML data from API and map it to Kotlin model object by using Retrofit2 + SimpleXML in Kotlin.</p>\n\n<p>However, I got such as the following error message from SimpleXML.</p>\n\n<blockquote>\n  <p>org.simpleframework.xml.core.MethodException: Annotation @org.simpleframework.xml.Element(data=false, name=, required=true, type=void) must mark a set or get method</p>\n</blockquote>\n\n<p>This is fetched XML data</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;response&gt;\n    &lt;result code=\"0\"&gt;Success&lt;/result&gt;\n    &lt;token&gt;XXXXXXXXXXXXXXXXXXXX&lt;/token&gt;\n    &lt;uid&gt;4294967295&lt;/uid&gt;\n&lt;/response&gt;\n</code></pre>\n\n<p>Kotlin model object is below</p>\n\n<pre><code>@Root(name = \"response\")\npublic class User() {\n    @Element public var result: String? = null\n    @Element public var token: String? = null\n    @Element public var uid: String? = null\n}\n</code></pre>\n\n<p>and APIClient is as follows.</p>\n\n<pre><code>interface  MyService {\n    @GET(\"/testLogin.xml\")\n    fun getUser(): Call&lt;User&gt;\n}\n\nval retrofit = Retrofit.Builder()\n        .baseUrl(baseURL)\n        .addConverterFactory(SimpleXmlConverterFactory.create())\n        .build()\nval call = retrofit.create(MyService::class.java).getUser()\ncall.enqueue(object: Callback&lt;User&gt; {\n        override fun onResponse(p0: Call&lt;User&gt;?, response: Response&lt;User&gt;?) {\n            val response = response?.body()\n        }\n        override fun onFailure(p0: Call&lt;User&gt;?, t: Throwable?) {\n            Log.e(\"APIClient\", t?.message)\n        }\n</code></pre>\n\n<p>I got HTTP status code 200 and correct XML data. So I think my declaration of model object is problem.</p>\n"}, {"tags": ["ternary-operator", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1457705835, "post_id": 35910693, "comment_id": 59541129, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16336500/kotlin-ternary-conditional-operator\">Kotlin Ternary Conditional Operator</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457705848, "post_id": 35910693, "comment_id": 59541137, "body": "Also duplicate of the duplicate: <a href=\"http://stackoverflow.com/questions/34935918/kotlin-equivalent-of-ternary-operator\" title=\"kotlin equivalent of ternary operator\">stackoverflow.com/questions/34935918/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 6, "creation_date": 1457599123, "post_id": 35910807, "comment_id": 59481695, "body": "<code>if-else</code> works fine in many languages and they have ternary operator too (<a href=\"https://gist.github.com/maxd/76e924d147d60cdc003c\" rel=\"nofollow noreferrer\">look at Ruby</a> for example)."}, {"owner": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "reply_to_user": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 0, "creation_date": 1457599519, "post_id": 35910807, "comment_id": 59481935, "body": "I just wrote that Andrey Breslav (one of the authors of Kotlin) said in his video presentations in russian. i.e. &quot;if else is fine, no needs of ternary operator&quot;"}, {"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 2, "creation_date": 1457600188, "post_id": 35910807, "comment_id": 59482375, "body": "Right, but this is very doubtful argument (like extension methods is useless because exists &quot;utility&quot; classes but extension methods is exists in Kotlin). Except this argument I don&#39;t see real motivation why they can&#39;t implement ternary operator because ternary operators is a syntax sugar like extension methods."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1457627018, "post_id": 35910807, "comment_id": 59502099, "body": "Are the referenced video presentations in Russian available online? If so, where can I find them? Thanks."}, {"owner": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "edited": false, "score": 0, "creation_date": 1457675438, "post_id": 35910807, "comment_id": 59523366, "body": "I saw video from this post <a href=\"https://habrahabr.ru/company/jugru/blog/278647/\" rel=\"nofollow noreferrer\">habrahabr.ru/company/jugru/blog/278647</a> I&#39;m not sure about which one of them contains phrase about ternary operator"}], "tags": [], "owner": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "is_accepted": false, "score": 4, "last_activity_date": 1457597119, "creation_date": 1457597119, "answer_id": 35910807, "question_id": 35910693, "link": "https://stackoverflow.com/questions/35910693/why-doesnt-kotlin-support-ternary-operator/35910807#35910807", "title": "Why doesn&#39;t Kotlin support &quot;ternary operator&quot;", "body": "<p>Because <code>if .. else ..</code> works fine. Take a look:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    var i = 2\n\n    println(\"i ${ if(i == 1) \"equals 1\" else \"not equals 1\" }\")\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 5, "creation_date": 1457600877, "post_id": 35911769, "comment_id": 59482851, "body": "Here is <code>if-else</code> instead of ternary operator: <code>const long offset = if (comm_rank &gt; 0) task_size_mod + (comm_rank - 1) * task_size else 0;</code> -  it is still a big expression :) Just need to use ternary operators for simple conditions and <code>if-else</code> (in multi-line variant) in other cases (as in your case). Moreover, in some cases ternary operator has better &quot;readability&quot; than <code>if-else</code> because it shorter."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 0, "creation_date": 1457604764, "post_id": 35911769, "comment_id": 59485728, "body": "@maxd If I had <code>if-else</code> here I would split it into 4 lines. For <code>? :</code> it is considered a nonsense"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 3, "last_activity_date": 1457600413, "creation_date": 1457600413, "answer_id": 35911769, "question_id": 35910693, "link": "https://stackoverflow.com/questions/35910693/why-doesnt-kotlin-support-ternary-operator/35911769#35911769", "title": "Why doesn&#39;t Kotlin support &quot;ternary operator&quot;", "body": "<p>Ternary operator has its problems, for example it is hard to read with big expressions. Here is a line from my C++ project where I used ternary operator:</p>\n\n<pre><code>const long offset = (comm_rank &gt; 0) ? task_size_mod + (comm_rank - 1) * task_size : 0;\n</code></pre>\n\n<p>I would rather use an <code>if else</code> expression here since it is so much more visible.</p>\n\n<p>Answering you question, I am aware of two reasons why <code>ternary operator</code> was not implemented in Kotlin:</p>\n\n<p>1) Since <code>if else</code> is an expression anyway, it can replace <code>? :</code></p>\n\n<p>2) Experience from other languages (C++) shows that <code>? :</code> provokes hard-to-read code, so it is better to be left out</p>\n"}, {"tags": [], "owner": {"reputation": 1250, "user_id": 809702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001113f9af243c8fa5d1ca8abc7720a0?s=128&d=identicon&r=PG", "display_name": "dishan", "link": "https://stackoverflow.com/users/809702/dishan"}, "is_accepted": false, "score": 5, "last_activity_date": 1457605692, "creation_date": 1457605692, "answer_id": 35913805, "question_id": 35910693, "link": "https://stackoverflow.com/questions/35910693/why-doesnt-kotlin-support-ternary-operator/35913805#35913805", "title": "Why doesn&#39;t Kotlin support &quot;ternary operator&quot;", "body": "<p>In languages which have <code>ternary operator</code> you use it like this</p>\n\n<pre><code>String value = condition ? foo : bar;\n</code></pre>\n\n<p>In Kotlin you can do the same thing using if and else</p>\n\n<pre><code>var value = if(condition) foo else bar;\n</code></pre>\n\n<p>Its bit verbose than the <code>ternary operator</code>. But designers of Kotlin have thought it is ok. You can use <code>if-else</code> like this because in Kotlin <code>if</code> is an expression and returns a value</p>\n\n<p><code>Elvis operator</code> is essentially a compressed version of ternary conditional statement and equivalent to following in Kotlin.</p>\n\n<pre><code>var value = if(foo != null) foo else bar;\n</code></pre>\n\n<p>But if <code>Elvis operator</code> is used it simplify as follows</p>\n\n<pre><code>var value = foo ?: bar;\n</code></pre>\n\n<p>This is considerable simplification and Kotlin decided to keep it.</p>\n"}, {"tags": [], "owner": {"reputation": 3964, "user_id": 5188516, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh5.googleusercontent.com/-Rm8h7GXYYB4/AAAAAAAAAAI/AAAAAAAAABw/ZrJ_i_mACi0/photo.jpg?sz=128", "display_name": "Abdul Waheed", "link": "https://stackoverflow.com/users/5188516/abdul-waheed"}, "is_accepted": false, "score": 1, "last_activity_date": 1588074588, "creation_date": 1588074588, "answer_id": 61479515, "question_id": 35910693, "link": "https://stackoverflow.com/questions/35910693/why-doesnt-kotlin-support-ternary-operator/61479515#61479515", "title": "Why doesn&#39;t Kotlin support &quot;ternary operator&quot;", "body": "<p>Programmers at some point, have to make a decision to execute a block of code, this is known as <strong>Control Flow</strong>. <strong>If</strong> statement is most basic way to control flow in <strong>Kotlin</strong>. Important point to note that  in <strong>Kotlin</strong>, <strong>If</strong> is an <strong>expression</strong> not a <strong>statement</strong> as it is <strong>Java</strong>.</p>\n\n<ol>\n<li><strong>Statement</strong>: A statement is an executed line which does not return a\nvalue. As a result, statement cannot sit right side of an equal\nsign.</li>\n<li><p>Expression: An expression returns a value.So the result of a Kolin\nIf expression can be assigned to a variable.</p>\n\n<p><strong>Because of this the ternary expression would be redundant and does not exists in Kotlin. In Java we would write</strong> (Here is the answer of your question)</p></li>\n</ol>\n\n<h1>For Example</h1>\n\n<p><strong>Ternary Operator in Java</strong></p>\n\n<p>int lowest  = (a &lt; b) ? a : b; </p>\n\n<p>In <strong>Kotlin</strong> we can write something similar using the if expression.</p>\n\n<p>val lowest = if(a &lt; b) a else b</p>\n\n<p>NOTE:\nWhen If is used as an expression it must contain an else clause. The expression must have a value in all case.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 13850914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abad411844235a2b4900e6180d0fffa2?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin M", "link": "https://stackoverflow.com/users/13850914/kelvin-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1593766880, "creation_date": 1593766880, "answer_id": 62712011, "question_id": 35910693, "link": "https://stackoverflow.com/questions/35910693/why-doesnt-kotlin-support-ternary-operator/62712011#62712011", "title": "Why doesn&#39;t Kotlin support &quot;ternary operator&quot;", "body": "<p>Because <strong>if-else</strong> is an expression in Kotlin :</p>\n<pre><code>String check = number % 2 == 0 ? &quot;even&quot; : &quot;odd&quot; // Java\n\nif (number % 2 == 0) &quot;even else &quot;odd&quot; // Kotlin\n</code></pre>\n<p>So that's why there are no ternary operator in Kotlin, Moreover you can use <code>when</code> expressions too, it's so handy if you want to provide a lot of possible execution paths</p>\n"}], "owner": {"reputation": 618, "user_id": 3496176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TrPop.jpg?s=128&g=1", "display_name": "zhumengzhu", "link": "https://stackoverflow.com/users/3496176/zhumengzhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2200, "favorite_count": 0, "closed_date": 1593812361, "answer_count": 5, "score": 14, "last_activity_date": 1593766880, "creation_date": 1457596717, "last_edit_date": 1469198701, "question_id": 35910693, "link": "https://stackoverflow.com/questions/35910693/why-doesnt-kotlin-support-ternary-operator", "closed_reason": "Opinion-based", "title": "Why doesn&#39;t Kotlin support &quot;ternary operator&quot;", "body": "<p>Explain: This question is more about the design intentions of Kotlin. Many expression languages support both <code>Ternary operator</code> and <code>if expression</code> [e.g., <em>Ruby, Groovy</em>.]</p>\n\n<hr>\n\n<p>First of all, I know Groovy supports both <code>Ternary operator</code> and <code>Elvis operator</code>: <a href=\"http://www.groovy-lang.org/operators.html#_ternary_operator\" rel=\"noreferrer\">Ternary operator in Groovy</a>. So I don't think it's a syntax problem.</p>\n\n<hr>\n\n<p>Then the official documents said:</p>\n\n<blockquote>\n  <p>In Kotlin, if is an expression, i.e. it returns a value. Therefore there is no ternary operator (condition ? then : else), because ordinary if works fine in this role.</p>\n</blockquote>\n\n<p>And this doesn't convince me. Because Kotlin support <code>Elvis operator</code> which ordinary if works just fine in that role either.</p>\n\n<p>I think <code>ternary operator</code> is sometimes better than ordinary <code>if</code>, though I wonder why doesn't Kotlin just support <code>ternary operator</code>?</p>\n"}, {"tags": ["nullable", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1457596542, "post_id": 35910604, "comment_id": 59480268, "body": "oh seems intellij was using decompiler all this time... gonna find how to attach sources"}, {"owner": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "reply_to_user": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1457596804, "post_id": 35910604, "comment_id": 59480432, "body": "I use IntelliJ Idea 15.0.4. Simply hold <code>ctrl</code> and click on <code>put</code> function"}, {"owner": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "reply_to_user": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1457596893, "post_id": 35910604, "comment_id": 59480493, "body": "Also you can use <code>ctrl+shift+i</code> to open quick definition"}], "tags": [], "owner": {"reputation": 4588, "user_id": 1895328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c88191a4c9de0f547e51c5f9e4bea8?s=128&d=identicon&r=PG", "display_name": "RoninDev", "link": "https://stackoverflow.com/users/1895328/ronindev"}, "is_accepted": true, "score": 7, "last_activity_date": 1466061256, "last_edit_date": 1466061256, "creation_date": 1457596384, "answer_id": 35910604, "question_id": 35910429, "link": "https://stackoverflow.com/questions/35910429/kotlin-mutablemap-put-returns-nullable/35910604#35910604", "title": "Kotlin mutableMap.put returns nullable", "body": "<p>Take a look at the definition </p>\n\n<pre><code>/**\n * Associates the specified [value] with the specified [key] in the map.\n *\n * @return the previous value associated with the key, or `null` if the key was not present in the map.\n */\npublic fun put(key: K, value: V): V?\n</code></pre>\n\n<p>So </p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    var m: MutableMap&lt;Int, String&gt; = mutableMapOf(Pair(1, \"a\"))\n    val prev1Value = m.put(1, \"b\")\n    val prev2Value = m.put(2, \"c\")\n\n    println(m)\n    println(\"Previous value of 1 was: $prev1Value\")\n    println(\"Previous value of 2 was: $prev2Value\")\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>{1=b, 2=c}\nPrevious value of 1 was: a\nPrevious value of 2 was: null\n</code></pre>\n"}], "owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 35910604, "answer_count": 1, "score": 2, "last_activity_date": 1466061256, "creation_date": 1457595853, "question_id": 35910429, "link": "https://stackoverflow.com/questions/35910429/kotlin-mutablemap-put-returns-nullable", "title": "Kotlin mutableMap.put returns nullable", "body": "<p>In kotlin standard lib we have <code>MutableMap</code> interface\nwhich has this method</p>\n\n<pre><code>public abstract fun put(key: K, value: V): V?\n</code></pre>\n\n<p>Why is it returning nullable value if it accepts not nullable one? Is it done for java interop?</p>\n"}]