[{"tags": ["android", "kotlin", "android-testing", "android-espresso"], "answers": [{"tags": [], "owner": {"reputation": 3321, "user_id": 2567799, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/18a46b758e63887d0fe89e5a82cb8695?s=128&d=identicon&r=PG", "display_name": "stamanuel", "link": "https://stackoverflow.com/users/2567799/stamanuel"}, "is_accepted": true, "score": 7, "last_activity_date": 1489783245, "last_edit_date": 1489783245, "creation_date": 1489620908, "answer_id": 42822723, "question_id": 42819656, "link": "https://stackoverflow.com/questions/42819656/press-overview-button-in-android-espresso/42822723#42822723", "title": "Press Overview Button in Android Espresso", "body": "<p>This is not possible with espresso, espresso is for UI testing within your app but can not interact with UI elements outside.</p>\n\n<p>If you want to press the Overview (or Back- or any other system) button you can use ui-automator:</p>\n\n<pre><code>UiDevice mDevice = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation());\nmDevice.pressRecentApps();\nmDevice.pressRecentApps();\n</code></pre>\n\n<p>this code above presses the recent Apps button twice.</p>\n\n<p><a href=\"https://developer.android.com/training/testing/ui-testing/uiautomator-testing.html\" rel=\"nofollow noreferrer\">ui-automator</a> is exactly for interacting with UI outside your app (home or recent app button, permission dialogs, ....) and is perfectly combineable with espresso to enhance your tests. To use it include this in your gradle:</p>\n\n<pre><code>androidTestCompile 'com.android.support.test.uiautomator:uiautomator-v18:2.1.2'\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 7544860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21d7fc2b450e82e887abb8d118d07d43?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas W&#252;nsche", "link": "https://stackoverflow.com/users/7544860/niklas-w%c3%bcnsche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 1, "accepted_answer_id": 42822723, "answer_count": 1, "score": 4, "last_activity_date": 1489783245, "creation_date": 1489608337, "last_edit_date": 1489668979, "question_id": 42819656, "link": "https://stackoverflow.com/questions/42819656/press-overview-button-in-android-espresso", "title": "Press Overview Button in Android Espresso", "body": "<p>I want to create a test for my Android app. Everytime it loses focus, it should do something. </p>\n\n<p>Therefore, I want to test this out by pressing the overview button 2 times (the button next to the home button). But how can I do this with Espresso? I tried out some Keycodes to press, but none of them worked (Unfortunately, there is no <code>KEY_OVERVIEW</code> in the table). </p>\n\n<p>So how can I test this?</p>\n\n<p>Thanks,</p>\n\n<p>Niklas</p>\n"}, {"tags": ["android", "kotlin", "kotlin-reflect"], "comments": [{"owner": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "edited": false, "score": 0, "creation_date": 1489605354, "post_id": 42817993, "comment_id": 72749306, "body": "You probably need to also keep the members and their names"}, {"owner": {"reputation": 5351, "user_id": 620138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d02edc21d79a4015690af79f54678a?s=128&d=identicon&r=PG", "display_name": "Aaron He", "link": "https://stackoverflow.com/users/620138/aaron-he"}, "edited": false, "score": 0, "creation_date": 1504909916, "post_id": 42817993, "comment_id": 79213274, "body": "use <code>-dontoptimize</code> in the proguard config"}], "answers": [{"tags": [], "owner": {"reputation": 3008, "user_id": 2439283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a58b468d0f98eab872aa90025038435?s=128&d=identicon&r=PG", "display_name": "Ignacio Tomas Crespo", "link": "https://stackoverflow.com/users/2439283/ignacio-tomas-crespo"}, "is_accepted": false, "score": 0, "last_activity_date": 1569019038, "last_edit_date": 1569019038, "creation_date": 1569018039, "answer_id": 58035725, "question_id": 42817993, "link": "https://stackoverflow.com/questions/42817993/android-build-fails-with-kotlin-reflect-and-proguard/58035725#58035725", "title": "Android build fails with kotlin-reflect and proguard", "body": "<p>I had some similar errors with kotlin reflect class and proguard, solved adding in the -optimizations</p>\n\n<p>!class/unboxing/enum</p>\n\n<p>My bug was related to this <a href=\"https://stackoverflow.com/questions/32185060/android-proguard-failing-with-value-i-is-not-a-reference-value\">Android Proguard failing with &quot;Value &#39;i&#39; is not a reference value&quot;</a>\nand found the fix in one of the comments</p>\n"}], "owner": {"reputation": 2703, "user_id": 736963, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a0555bcd8e1daf09e4dd7576d246e222?s=128&d=identicon&r=PG", "display_name": "David Pisoni", "link": "https://stackoverflow.com/users/736963/david-pisoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 679, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1569019038, "creation_date": 1489602754, "question_id": 42817993, "link": "https://stackoverflow.com/questions/42817993/android-build-fails-with-kotlin-reflect-and-proguard", "title": "Android build fails with kotlin-reflect and proguard", "body": "<p>I am unable to build my release product if I include <code>kotlin-reflect</code> with it. I attempted adding this to proguard configuration:</p>\n\n<pre><code>-keep class kotlin.reflect.** { *; }\n</code></pre>\n\n<p>But it did not help at all. Here is the error result from the gradle build:</p>\n\n<pre><code>Optimizing...\nUnexpected error while performing partial evaluation:\n   Class       = [kotlin/reflect/jvm/internal/impl/renderer/DescriptorRendererImpl]\n   Method      = [renderPossiblyInnerType(Ljava/lang/StringBuilder;Lkotlin/reflect/jvm/internal/impl/descriptors/PossiblyInnerType;)V]\n   Exception   = [java.lang.IllegalArgumentException] (Stacks have different current sizes [0] and [1])\n Warning: Exception while processing task java.io.IOException: java.lang.IllegalArgumentException: Stacks have different current sizes [0] and [1]\n</code></pre>\n\n<p>I am using kotlin 1.1.1 (and gradle 3.3, if that matters.)\nj</p>\n"}, {"tags": ["java", "kotlin", "kotlin-lateinit"], "answers": [{"comments": [{"owner": {"reputation": 2414, "user_id": 4052962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nGD2o.jpg?s=128&g=1", "display_name": "Michael Spitsin", "link": "https://stackoverflow.com/users/4052962/michael-spitsin"}, "edited": false, "score": 0, "creation_date": 1489588772, "post_id": 42808489, "comment_id": 72737936, "body": "Thank you. That&#39;s exactly what I need."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1489599771, "post_id": 42808489, "comment_id": 72745981, "body": "I checked the generated byte code with Kotlin 1.0.6, and the backing field was still public"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1489600011, "post_id": 42808489, "comment_id": 72746113, "body": "@voddan, but it should now have the <code>synthetic</code> modifier, does it? With this modifier, its usages in Java sources should become invalid."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1489600227, "post_id": 42808489, "comment_id": 72746246, "body": "@voddan, like this: <code>public synthetic Ljava&#47;lang&#47;String; s</code>. Or have you found any way to reference the field from Java?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1489600558, "post_id": 42808489, "comment_id": 72746457, "body": "@hotkey the field appears to have the <code>ACC_SYNTHETIC</code> on it. Let me check if I can access it from Java"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1489608290, "post_id": 42808489, "comment_id": 72751012, "body": "@hotkey you were absolutely correct, sorry for the <code>-1</code>. Please edit your A (add a space somewhere :) so I could upvote it"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1489610535, "post_id": 42808489, "comment_id": 72752309, "body": "@voddan, no problem, updated the answer with more details on what this does. :)"}, {"owner": {"reputation": 2246, "user_id": 1913542, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a0bd188bbbab99184afd75b18e3271d7?s=128&d=identicon&r=PG&f=1", "display_name": "stefana", "link": "https://stackoverflow.com/users/1913542/stefana"}, "edited": false, "score": 0, "creation_date": 1520606077, "post_id": 42808489, "comment_id": 85396852, "body": "Is there any way to hide the generated getter and setter as well without setting those as private?"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 13, "last_activity_date": 1489610471, "last_edit_date": 1495535480, "creation_date": 1489577366, "answer_id": 42808489, "question_id": 42808363, "link": "https://stackoverflow.com/questions/42808363/how-to-hide-kotlins-lateinit-var-backing-field-from-java/42808489#42808489", "title": "How to hide Kotlin&#39;s lateinit var backing field from Java?", "body": "<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-synthetic/index.html\" rel=\"nofollow noreferrer\"><code>@JvmSynthetic</code></a> that hides declarations from Java (and not from Kotlin). Just <a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"nofollow noreferrer\">annotate the backing field</a> of the property:</p>\n\n<pre><code>@field:JvmSynthetic\nlateinit var field: String\n</code></pre>\n\n<p>Though the field will remain <code>public</code> in the bytecode, it will also have the <code>synthetic</code> modifier, which prevents it from being used in Java sources. However, the field seems to be still accessible through reflection at runtime.</p>\n\n<p>See also: another <a href=\"https://stackoverflow.com/questions/41022275/whats-the-intended-use-of-jvmsynthetic-in-kotlin\">question about <code>@JvmSynthetic</code></a> (though no definite answer there).</p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1489591294, "creation_date": 1489591294, "answer_id": 42813921, "question_id": 42808363, "link": "https://stackoverflow.com/questions/42808363/how-to-hide-kotlins-lateinit-var-backing-field-from-java/42813921#42813921", "title": "How to hide Kotlin&#39;s lateinit var backing field from Java?", "body": "<p>The visibility of <code>lateinit</code> field is derived from the visibility of setter of the corresponding property, so another option is to have a property with non-public setter:</p>\n\n<pre><code>lateinit var field: String\n    private set\n</code></pre>\n\n<p>The drawback of this approach is that the setter itself becomes inaccessible outside of the class.</p>\n"}, {"comments": [{"owner": {"reputation": 2414, "user_id": 4052962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nGD2o.jpg?s=128&g=1", "display_name": "Michael Spitsin", "link": "https://stackoverflow.com/users/4052962/michael-spitsin"}, "edited": false, "score": 1, "creation_date": 1489641534, "post_id": 42817157, "comment_id": 72762523, "body": "Thank you for an alternative solutions. I&#39;ve also checked this discussion <a href=\"https://discuss.kotlinlang.org/t/notnull-delegate-vs-lateinit/1923\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/notnull-delegate-vs-lateinit/1923</a> - to see the actual difference between <code>lateinit</code> and <code>Delegates.notNull()</code>"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1489600244, "creation_date": 1489600244, "answer_id": 42817157, "question_id": 42808363, "link": "https://stackoverflow.com/questions/42808363/how-to-hide-kotlins-lateinit-var-backing-field-from-java/42817157#42817157", "title": "How to hide Kotlin&#39;s lateinit var backing field from Java?", "body": "<p>The classical solution to this problem would be to use <a href=\"http://kotlinlang.org/docs/reference/delegated-properties.html#delegated-properties\" rel=\"nofollow noreferrer\">property delegation</a>:</p>\n\n<pre><code>import kotlin.properties.Delegates\n\nclass MyKotlinClass {\n    var field: String by Delegates.notNull()\n}\n</code></pre>\n\n<p>This code does exactly what you asked for in the question </p>\n"}], "owner": {"reputation": 2414, "user_id": 4052962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nGD2o.jpg?s=128&g=1", "display_name": "Michael Spitsin", "link": "https://stackoverflow.com/users/4052962/michael-spitsin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1094, "favorite_count": 2, "accepted_answer_id": 42808489, "answer_count": 3, "score": 11, "last_activity_date": 1489615320, "creation_date": 1489576987, "last_edit_date": 1489615320, "question_id": 42808363, "link": "https://stackoverflow.com/questions/42808363/how-to-hide-kotlins-lateinit-var-backing-field-from-java", "title": "How to hide Kotlin&#39;s lateinit var backing field from Java?", "body": "<p>In Kotlin, suppose, I have class:</p>\n\n<pre><code>class MyKotlinClass {\n    lateinit var field: String\n}\n</code></pre>\n\n<p>According to <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#instance-fields\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Late-Initialized properties are also exposed as fields. The visibility of the field will be the same as the visibility of lateinit property setter.</p>\n</blockquote>\n\n<p>I can use in <strong>java</strong> code either <code>myKotlinClass.field</code> or <code>myKotlinClass.getField()</code>. I want to disable field access and remain only access through <em>getter</em> and <em>setter</em>.</p>\n\n<p>How can I achieve this and remain <strong>lateinit</strong> modifier? </p>\n"}, {"tags": ["android", "android-studio", "android-gradle-plugin", "kotlin", "build-tools"], "comments": [{"owner": {"reputation": 660, "user_id": 2228201, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/04ef228dbdefbe6ebc6e1590e18b2714?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2228201/michael"}, "edited": false, "score": 0, "creation_date": 1489572270, "post_id": 42806332, "comment_id": 72725600, "body": "I removed <code>apply plugin: &#39;android-sdk-manager&#39;</code> and it works"}, {"owner": {"reputation": 2042, "user_id": 805105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4DJm3.jpg?s=128&g=1", "display_name": "sohailehmad", "link": "https://stackoverflow.com/users/805105/sohailehmad"}, "edited": false, "score": 0, "creation_date": 1489590247, "post_id": 42806332, "comment_id": 72739138, "body": "Add it as an answer and accept it."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 3784026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec71a0e5d4717404d8c192e907ef8f55?s=128&d=identicon&r=PG", "display_name": "Hajime", "link": "https://stackoverflow.com/users/3784026/hajime"}, "edited": false, "score": 0, "creation_date": 1498102268, "post_id": 42813751, "comment_id": 76362931, "body": "i really appricate you! By the way, what does <code>apply plugin: &#39;android-sdk-manager&#39;</code>  means ?"}, {"owner": {"reputation": 660, "user_id": 2228201, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/04ef228dbdefbe6ebc6e1590e18b2714?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2228201/michael"}, "reply_to_user": {"reputation": 129, "user_id": 3784026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec71a0e5d4717404d8c192e907ef8f55?s=128&d=identicon&r=PG", "display_name": "Hajime", "link": "https://stackoverflow.com/users/3784026/hajime"}, "edited": false, "score": 1, "creation_date": 1504635987, "post_id": 42813751, "comment_id": 79082726, "body": "@Hajime more info here: <a href=\"https://github.com/JakeWharton/sdk-manager-plugin\" rel=\"nofollow noreferrer\">github.com/JakeWharton/sdk-manager-plugin</a>"}], "tags": [], "owner": {"reputation": 660, "user_id": 2228201, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/04ef228dbdefbe6ebc6e1590e18b2714?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2228201/michael"}, "is_accepted": true, "score": 8, "last_activity_date": 1496267654, "last_edit_date": 1496267654, "creation_date": 1489590828, "answer_id": 42813751, "question_id": 42806332, "link": "https://stackoverflow.com/questions/42806332/unsupportedoperationexception-the-android-command-is-no-longer-included-in-the/42813751#42813751", "title": "UnsupportedOperationException The &quot;android&quot; command is no longer included in the SDK", "body": "<p>I removed <code>apply plugin: 'android-sdk-manager'</code> and it works</p>\n"}], "owner": {"reputation": 660, "user_id": 2228201, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/04ef228dbdefbe6ebc6e1590e18b2714?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2228201/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1997, "favorite_count": 1, "accepted_answer_id": 42813751, "answer_count": 1, "score": 2, "last_activity_date": 1496267654, "creation_date": 1489571843, "last_edit_date": 1489572326, "question_id": 42806332, "link": "https://stackoverflow.com/questions/42806332/unsupportedoperationexception-the-android-command-is-no-longer-included-in-the", "title": "UnsupportedOperationException The &quot;android&quot; command is no longer included in the SDK", "body": "<p>I have project in <code>Kotlin</code> and I have updated Android Studio to 2.3.3 and <code>gradle</code> to 3.3 and build tools to 25.3.1. During building I got this error:</p>\n\n<pre><code>Caused by: java.lang.UnsupportedOperationException: The \"android\" command is no longer included in the SDK. Any references to it (e.g. by third-party plugins) should be removed.\n        at com.android.SdkConstants.androidCmdName(SdkConstants.java:1947)\n        at com.android.SdkConstants$androidCmdName$0.callStatic(Unknown Source)\n        at com.jakewharton.sdkmanager.internal.AndroidCommand$Real.&lt;init&gt;(AndroidCommand.groovy:21)\n        at com.jakewharton.sdkmanager.internal.PackageResolver.resolve(PackageResolver.groovy:22)\n        at com.jakewharton.sdkmanager.internal.PackageResolver$resolve.call(Unknown Source)\n        at com.jakewharton.sdkmanager.SdkManagerPlugin$_apply_closure2$_closure3.doCall(SdkManagerPlugin.groovy:44)\n        at com.jakewharton.sdkmanager.SdkManagerPlugin$_apply_closure2$_closure3.doCall(SdkManagerPlugin.groovy)\n        at com.jakewharton.sdkmanager.SdkManagerPlugin.time(SdkManagerPlugin.groovy:51)\n        at com.jakewharton.sdkmanager.SdkManagerPlugin$_apply_closure2.doCall(SdkManagerPlugin.groovy:43)\n        at org.gradle.listener.ClosureBackedMethodInvocationDispatch.dispatch(ClosureBackedMethodInvocationDispatch.java:40)\n        at org.gradle.listener.ClosureBackedMethodInvocationDispatch.dispatch(ClosureBackedMethodInvocationDispatch.java:25)\n        at org.gradle.internal.event.AbstractBroadcastDispatch.dispatch(AbstractBroadcastDispatch.java:44)\n        at org.gradle.internal.event.BroadcastDispatch.dispatch(BroadcastDispatch.java:79)\n        at org.gradle.internal.event.BroadcastDispatch.dispatch(BroadcastDispatch.java:30)\n        at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n        at com.sun.proxy.$Proxy16.afterEvaluate(Unknown Source)\n        at org.gradle.configuration.project.LifecycleProjectEvaluator.notifyAfterEvaluate(LifecycleProjectEvaluator.java:82)\n        ... 56 more\n</code></pre>\n\n<p>Gralde file:</p>\n\n<pre><code>buildscript {\n    repositories {\n        maven { url 'https://maven.fabric.io/public' }\n        maven { url \"https://jitpack.io\" }\n        jcenter()\n    }\n\n    dependencies {\n        classpath 'io.fabric.tools:gradle:1.+'\n        classpath 'com.github.JakeWharton:sdk-manager-plugin:master'\n    }\n}\n\napply plugin: 'android-sdk-manager'\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\napply plugin: 'realm-android'\napply plugin: 'io.fabric'\n\ntask increaseBuildStageVersion &lt;&lt; {\n    def versionPropsFileI = file('version.properties')\n    if (versionPropsFileI.canRead()) {\n        def Properties versionPropsI = new Properties()\n\n        versionPropsI.load(new FileInputStream(versionPropsFileI))\n        def value = 1\n        println(\"INCREASING STAGE VERSION\")\n\n        def versionBuild = versionPropsI['VERSION_BUILD_STAGE'].toInteger() + value\n        def codeVersion = versionPropsI['VERSION_CODE_STAGE'].toInteger() + value\n\n        versionPropsI['VERSION_BUILD_STAGE'] = versionBuild.toString()\n        versionPropsI['VERSION_CODE_STAGE'] = codeVersion.toString()\n\n        versionPropsI.store(versionPropsFileI.newWriter(), null)\n    } else {\n        throw new GradleException(\"Could not read version.properties!\")\n    }\n}\n\ntask increaseBuildProductionVersion &lt;&lt; {\n    def versionPropsFileI = file('version.properties')\n    if (versionPropsFileI.canRead()) {\n        def Properties versionPropsI = new Properties()\n\n        versionPropsI.load(new FileInputStream(versionPropsFileI))\n        def value = 1\n        println(\"INCREASING PRODUCTION VERSION\")\n\n        def versionBuild = versionPropsI['VERSION_BUILD_PRODUCTION'].toInteger() + value\n        def codeVersion = versionPropsI['VERSION_CODE_PRODUCTION'].toInteger() + value\n\n        versionPropsI['VERSION_BUILD_PRODUCTION'] = versionBuild.toString()\n        versionPropsI['VERSION_CODE_PRODUCTION'] = codeVersion.toString()\n\n        versionPropsI.store(versionPropsFileI.newWriter(), null)\n    } else {\n        throw new GradleException(\"Could not read version.properties!\")\n    }\n}\n\ntasks.whenTaskAdded { task -&gt;\n    if (task.name == 'packageStageRelease') {\n        task.dependsOn increaseBuildStageVersion\n    } else if (task.name == 'packageProductionRelease') {\n        task.dependsOn increaseBuildProductionVersion\n    }\n}\n\nandroid {\n    signingConfigs {\n        release {\n            .....\n        }\n    }\n\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.2\"\n\n    defaultConfig {\n        applicationId \"com.fivedottwelve.bonusapp\"\n        minSdkVersion 19\n        targetSdkVersion 25\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        vectorDrawables.useSupportLibrary = true\n        multiDexEnabled true\n    }\n\n    buildTypes {\n        release {\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            debuggable false\n            signingConfig signingConfigs.release\n\n\n            def gitSha = 'git rev-parse --short HEAD'.execute([], project.rootDir).text.trim()\n            def buildTime = new GregorianCalendar().format(\"dd-MM-yyyy' 'h:mm:ss a Z\")\n            buildConfigField \"String\", \"GIT_SHA\", \"\\\"{$gitSha}\\\"\"\n            buildConfigField \"String\", \"BUILD_TIME\", \"\\\"{$buildTime}\\\"\"\n        }\n\n        debug {\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            debuggable true\n\n            buildConfigField \"String\", \"GIT_SHA\", \"\\\"DEBUG\\\"\"\n            buildConfigField \"String\", \"BUILD_TIME\", \"\\\"BUILD_TIME\\\"\"\n        }\n    }\n    productFlavors {\n        development {\n            versionName \"1.0.\" + getStageVersionName() + \"-stage\"\n            versionCode getStageVersionCode()\n            applicationIdSuffix \".stage\"\n            resValue \"string\", \"app_name\", \"BonusApp\"\n\n            buildConfigField('String', 'API_URL', \"\\\"https://fivedottwelve.com/\\\"\")\n        }\n        stage {\n            versionName \"1.0.\" + getStageVersionName() + \"-stage\"\n            versionCode getStageVersionCode()\n            applicationIdSuffix \".stage\"\n            resValue \"string\", \"app_name\", \"BonusApp\"\n\n            buildConfigField('String', 'API_URL', \"\\\"https://fivedottwelve.com/\\\"\")\n\n        }\n        production {\n            versionName \"1.0.\" + getProdVersionName()\n            versionCode getProdVersionCode()\n            resValue \"string\", \"app_name\", \"BonusApp\"\n\n            buildConfigField('String', 'API_URL', \"\\\"https://fivedottwelve.com/\\\"\")\n        }\n    }\n\n    dexOptions {\n        preDexLibraries true\n        maxProcessCount 6\n        javaMaxHeapSize \"3g\"\n    }\n\n    testOptions {\n        unitTests.all {\n            // All the usual Gradle options.\n            testLogging {\n                jvmArgs '-XX:MaxPermSize=256m'\n                events \"passed\", \"skipped\", \"failed\", \"standardOut\", \"standardError\"\n                outputs.upToDateWhen { false }\n                showStandardStreams = true\n            }\n        }\n    }\n    lintOptions {\n        disable 'InvalidPackage', 'ContentDescription'\n        abortOnError false\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n    packagingOptions {\n        exclude 'main/AndroidManifest.xml'\n        exclude 'META-INF/services/javax.annotation.processing.Processor'\n        exclude 'META-INF/DEPENDENCIES.txt'\n        exclude 'META-INF/LICENSE.txt'\n        exclude 'META-INF/NOTICE.txt'\n        exclude 'META-INF/NOTICE'\n        exclude 'META-INF/LICENSE'\n        exclude 'META-INF/DEPENDENCIES'\n        exclude 'META-INF/notice.txt'\n        exclude 'META-INF/license.txt'\n        exclude 'META-INF/dependencies.txt'\n        exclude 'META-INF/LGPL2.1'\n        exclude 'LICENSE.txt'\n        exclude 'LICENSE'\n    }\n}\n\nkapt {\n    generateStubs = true\n}\n\n\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    compile \"org.jetbrains.kotlin:kotlin-reflect:$kotlin_version\"\n\n    compile 'com.github.salomonbrys.kotson:kotson:2.5.0'\n\n    compile \"com.android.support:support-v4:$rootProject.ext.android_support_version\"\n    compile \"com.android.support:appcompat-v7:$rootProject.ext.android_support_version\"\n    compile \"com.android.support:design:$rootProject.ext.android_support_version\"\n    compile \"com.android.support:recyclerview-v7:$rootProject.ext.android_support_version\"\n    compile \"com.android.support:cardview-v7:$rootProject.ext.android_support_version\"\n    compile 'com.android.support:multidex:1.0.1'\n\n    compile \"com.google.android.gms:play-services-base:$rootProject.ext.play_service_version\"\n    compile \"com.google.android.gms:play-services-gcm:$rootProject.ext.play_service_version\"\n\n    kapt \"com.google.dagger:dagger-compiler:$rootProject.ext.Dagger_version\"\n    compile \"com.google.dagger:dagger:$rootProject.ext.Dagger_version\"\n\n    compile \"io.reactivex:rxjava:$rootProject.ext.RxJava_version\"\n    compile \"io.reactivex:rxandroid:$rootProject.ext.RxAndroid_version\"\n    provided 'javax.annotation:jsr250-api:1.0'\n\n\n    compile \"com.squareup.okhttp3:okhttp:$rootProject.ext.retrofit_http_version\"\n    compile \"com.squareup.okhttp3:okhttp-urlconnection:$rootProject.ext.retrofit_http_version\"\n    compile \"com.squareup.okhttp3:logging-interceptor:$rootProject.ext.retrofit_http_version\"\n\n    compile \"com.squareup.retrofit2:retrofit:$rootProject.ext.retorfit_version\"\n    compile \"com.squareup.retrofit2:converter-gson:$rootProject.ext.retorfit_version\"\n    compile \"com.squareup.retrofit2:adapter-rxjava:$rootProject.ext.retorfit_version\"\n\n    compile 'com.facebook.android:facebook-android-sdk:4.20.0'\n\n    compile 'me.relex:circleindicator:1.2.1@aar'\n\n    //glide\n    compile 'com.github.bumptech.glide:glide:3.7.0'\n    compile 'com.github.bumptech.glide:okhttp3-integration:1.4.0@aar'\n\n    //transitions\n    compile \"com.andkulikov:transitionseverywhere:1.7.0\"\n\n    //beacons\n    compile \"com.kontaktio:sdk:$rootProject.ext.kontakt_io\"\n\n    compile('com.crashlytics.sdk.android:crashlytics:2.6.7@aar') {\n        transitive = true;\n    }\n\n}\n\nrepositories {\n    maven { url 'http://oss.jfrog.org/artifactory/oss-snapshot-local' }\n    maven { url 'http://maven.livotovlabs.pro/content/groups/public' }\n    maven { url 'https://maven.fabric.io/public' }\n}\n\n/*\nResolves dependency versions across test and production APKs, specifically, transitive\ndependencies. This is required since Espresso internally has a dependency on support-annotations.\n*/\nconfigurations.all {\n    resolutionStrategy.force \"com.android.support:support-annotations:$rootProject.ext.android_support_version\"\n}\n\n/*\nAll direct/transitive dependencies shared between your test and production APKs need to be\nexcluded from the test APK! This is necessary because both APKs will contain the same classes. Not\nexcluding these dependencies from your test configuration will result in an dex pre-verifier error\nat runtime. More info in this tools bug: (https://code.google.com/p/android/issues/detail?id=192497)\n*/\nconfigurations.compile.dependencies.each { compileDependency -&gt;\n    println \"Excluding compile dependency: ${compileDependency.getName()}\"\n    configurations.androidTestCompile.dependencies.each { androidTestCompileDependency -&gt;\n        configurations.androidTestCompile.exclude module: \"${compileDependency.getName()}\"\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "edited": false, "score": 1, "creation_date": 1489568468, "post_id": 42802172, "comment_id": 72723020, "body": "<i>You might want to consider writing your own pow method if this is a concern.</i> Converting to an int is not an issue as any custom pow would fail too, javadoc explicitly states: <i>BigInteger must support values in [..] to +2^Integer.MAX_VALUE</i> <b>(exclusive)</b>. The smallest possible pow made &quot;possible&quot; by a custom pow <code>2^(Int.MAX_VALUE+1)</code> is already out of the supported range."}], "tags": [], "owner": {"reputation": 308, "user_id": 1814802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1hYO.jpg?s=128&g=1", "display_name": "mbStavola", "link": "https://stackoverflow.com/users/1814802/mbstavola"}, "is_accepted": true, "score": 7, "last_activity_date": 1551877843, "last_edit_date": 1551877843, "creation_date": 1489557912, "answer_id": 42802172, "question_id": 42801780, "link": "https://stackoverflow.com/questions/42801780/kotlin-make-java-function-callable-infix/42802172#42802172", "title": "Kotlin: make Java function callable infix", "body": "<p>This is because when you're doing:</p>\n\n<p><code>this.pow(x)</code></p>\n\n<p>You're actually recursing your infix function. BigInteger doesn't have pow function that takes another BigInteger-- that's what you're defining here. And don't forget, infix functions can still be called with the dot operator!</p>\n\n<p>What you probably meant to write was this:</p>\n\n<pre><code>infix fun BigInteger.pow(x: BigInteger): BigInteger {\n    // Convert x to an int\n    return pow(x.longValueExact().toInt())\n}\n\nfun main(args : Array&lt;String&gt;) {\n    val a = BigInteger(\"2\")\n    val b = BigInteger(\"3\")\n\n    println(a + b)\n    println(a pow b)\n}\n</code></pre>\n\n<p>If you want to reuse BigInteger's pow method, we need to convert to an int. Unfortunately, this is potentially lossy and may overflow. You might want to consider writing your own pow method if this is a concern.</p>\n\n<p>There is no way to mark a Java method \"natively\" as infix. You can only accomplish this by using a wrapper.</p>\n"}], "owner": {"reputation": 1786, "user_id": 2419207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c78050166e151a98887f8e98169e0a8?s=128&d=identicon&r=PG&f=1", "display_name": "iljau", "link": "https://stackoverflow.com/users/2419207/iljau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 42802172, "answer_count": 1, "score": 4, "last_activity_date": 1551878040, "creation_date": 1489555989, "last_edit_date": 1551878040, "question_id": 42801780, "link": "https://stackoverflow.com/questions/42801780/kotlin-make-java-function-callable-infix", "title": "Kotlin: make Java function callable infix", "body": "<p>Tried to make <code>pow</code> function from BigInteger class available as infix function with the same name. The problem is that now the <code>pow</code> infix operator calls itself recursively.</p>\n\n<p>Is it possible to make Java function callable using infix operator with same name as function?</p>\n\n<pre><code>package experiments\n\nimport java.math.BigInteger\n\ninfix fun BigInteger.pow(x: BigInteger): BigInteger {\n    return this.pow(x);\n}\n\nfun main(args : Array&lt;String&gt;) {\n    val a = BigInteger(\"2\");\n    val b = BigInteger(\"3\");\n\n    println(a + b)\n    println(a pow b)\n}\n</code></pre>\n\n<p>Causes:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.StackOverflowError\n    at kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull(Intrinsics.java:126)\n    at experiments.KotlinTestKt.pow(KotlinTest.kt)\n    at experiments.KotlinTestKt.pow(KotlinTest.kt:6)\n</code></pre>\n\n<p>If I were defining my own Java class (rather than using a library class), is there any way to mark the Java method as infix? Perhaps an annotation?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4343399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uBS7E.png?s=128&g=1", "display_name": "Kenji Tomita", "link": "https://stackoverflow.com/users/4343399/kenji-tomita"}, "edited": false, "score": 0, "creation_date": 1489547891, "post_id": 42800230, "comment_id": 72715056, "body": "I see. Thanks!!"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 1, "creation_date": 1489577182, "post_id": 42800230, "comment_id": 72729107, "body": "Thanks @marstran. I completely spaced on the fact that it appeared to be working in the REPL. I&#39;ve updated my answer to address such."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 3, "last_activity_date": 1489577635, "last_edit_date": 1489577635, "creation_date": 1489546049, "answer_id": 42800230, "question_id": 42798224, "link": "https://stackoverflow.com/questions/42798224/kotlin-repl-destructuring-declarations-is-not-working-with-pair/42800230#42800230", "title": "Kotlin REPL destructuring declarations is not working with Pair", "body": "<p>An <code>Int</code> is an <code>Int</code> and a <code>String</code> is a <code>String</code>; destructuring does not convert between types. As such, the code you have specified will not compile but the following will:</p>\n\n<pre><code>val (a: String, b: Int) = Pair(\"1\", 2)\nval (c: Int, d: Int) = Pair(3, 4)\n</code></pre>\n\n<p>Note that specifying the types explicitly is not necessary:</p>\n\n<pre><code>val (a, b) = Pair(\"1\", 2)\nval (c, d) = Pair(3, 4)\n</code></pre>\n\n<p>I am not certain why the REPL fails silently but the following in the REPL results in a \"Unresolved reference\" error so clearly the destructuring is not working but the REPL is not reporting such as an error. This appears to be a known issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-5620\" rel=\"nofollow noreferrer\">KT-5620</a>.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Welcome to Kotlin version 1.1.0 (JRE 1.8.0_111-b14)\nType :help for help, :quit for quit\n\nval (a, b) = Pair(1, 2)\nprintln(a) // Error: Unresolved reference: a\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4343399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uBS7E.png?s=128&g=1", "display_name": "Kenji Tomita", "link": "https://stackoverflow.com/users/4343399/kenji-tomita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 42800230, "answer_count": 1, "score": 0, "last_activity_date": 1489577635, "creation_date": 1489532979, "question_id": 42798224, "link": "https://stackoverflow.com/questions/42798224/kotlin-repl-destructuring-declarations-is-not-working-with-pair", "title": "Kotlin REPL destructuring declarations is not working with Pair", "body": "<p>I am trying to learn Kotlin and have written this sample code in the REPL.\nThe following code does not cause a crash.</p>\n\n<pre><code>Welcome to Kotlin version 1.1.0 (JRE 1.6.0_65-b14-468-11M4833)\nType :help for help, :quit for quit\n&gt;&gt;&gt; val (a:String, b:Int) = Pair(1,2)\n&gt;&gt;&gt; \n</code></pre>\n\n<p>In Android Studio 2.3 the following code failed</p>\n\n<pre><code>val (a:String, b:Int) = Pair(1,2) // 'component1() function returns 'Int', but 'String' is expected\n</code></pre>\n\n<p>Is this a REPL bug?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "fragmentmanager"], "comments": [{"owner": {"reputation": 8276, "user_id": 3827276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gWiXC.png?s=128&g=1", "display_name": "Maciej Ciemi\u0119ga", "link": "https://stackoverflow.com/users/3827276/maciej-ciemi%c4%99ga"}, "edited": false, "score": 0, "creation_date": 1490467916, "post_id": 42795611, "comment_id": 73128914, "body": "Maybe there is a problem when you call <code>hide()</code> and then <code>show()</code> on the same fragments within the same transaction? Like when <code>currentFragment</code> refers to the same fragments as <code>fragment</code>, which certainly can happen here. Speaking about it, I think it is wrong to claim that last fragment in <code>supportFragmentManager.fragments</code> list will be the last shown fragment (rather most recently added one). You should either iterate through all <code>fragments</code> and search for one that has <code>isVisible()</code> as true or just store the last shown fragment tag and find it later."}], "answers": [{"tags": [], "owner": {"reputation": 2067, "user_id": 2419581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PPZeO.png?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/2419581/ali"}, "is_accepted": false, "score": 5, "last_activity_date": 1494013728, "last_edit_date": 1495540494, "creation_date": 1494013728, "answer_id": 43812766, "question_id": 42795611, "link": "https://stackoverflow.com/questions/42795611/fragmenttransaction-hide-show-doesnt-work-sometimes/43812766#43812766", "title": "FragmentTransaction hide/show doesn&#39;t work sometimes", "body": "<p>The problem here is even though you're hiding \"current\" fragment, there are other fragments loaded in the memory and that gives inconsistent behaviour.</p>\n\n<p>You should be able to fix this by hiding all the fragment except the fragment you want to show.</p>\n\n<p>Thanks to this answer. <a href=\"https://stackoverflow.com/questions/14347588/show-hide-fragment-in-android/31197906#31197906\">Show hide fragment in android</a></p>\n\n<p>eg:</p>\n\n<pre><code>private FragmentA fragmentA;\nprivate FragmentB fragmentB;\nprivate FragmentC fragmentC;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    fragmentA = FragmentA.newInstance();\n    fragmentB = FragmentB.newInstance();\n    fragmentC = FragmentC.newInstance();\n\n}\n\nprotected void displayFragmentA() {\n\n    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();\n    if (fragmentA.isAdded()) { \n        ft.show(fragmentA);\n    } else { \n        ft.add(R.id.fragement_container, fragmentA);\n    }\n\n    if (fragmentB.isAdded()) { ft.hide(fragmentB); }\n\n    if (fragmentC.isAdded()) { ft.hide(fragmentC); }\n\n    ft.commit();\n}\n</code></pre>\n\n<p>Similarly you will have to write functions for displayFragmentB() and displayFragmentC()</p>\n"}, {"comments": [{"owner": {"reputation": 574, "user_id": 4435650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/784a4ce9ab32608b95bf8d8cf4c31f09?s=128&d=identicon&r=PG&f=1", "display_name": "Shuji", "link": "https://stackoverflow.com/users/4435650/shuji"}, "edited": false, "score": 1, "creation_date": 1525200000, "post_id": 46676381, "comment_id": 87261746, "body": "Can you please show the implementation of, at least,  FragmentA class? As I am a beginner so I am confused how NewInstance() methods are defined."}, {"owner": {"reputation": 790, "user_id": 3808178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6aadb872e7409e237cf04aa6d07982bc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Claude", "link": "https://stackoverflow.com/users/3808178/maxime-claude"}, "reply_to_user": {"reputation": 574, "user_id": 4435650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/784a4ce9ab32608b95bf8d8cf4c31f09?s=128&d=identicon&r=PG&f=1", "display_name": "Shuji", "link": "https://stackoverflow.com/users/4435650/shuji"}, "edited": false, "score": 2, "creation_date": 1525533866, "post_id": 46676381, "comment_id": 87398847, "body": "@ShujaatAliKhan I just edited the answer to add an example."}], "tags": [], "owner": {"reputation": 790, "user_id": 3808178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6aadb872e7409e237cf04aa6d07982bc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Claude", "link": "https://stackoverflow.com/users/3808178/maxime-claude"}, "is_accepted": false, "score": 6, "last_activity_date": 1525533817, "last_edit_date": 1525533817, "creation_date": 1507671239, "answer_id": 46676381, "question_id": 42795611, "link": "https://stackoverflow.com/questions/42795611/fragmenttransaction-hide-show-doesnt-work-sometimes/46676381#46676381", "title": "FragmentTransaction hide/show doesn&#39;t work sometimes", "body": "<p>@Ali's answer is good, yet imagine if you have 5 fragments. This is another way to show/hide your fragments: </p>\n\n<pre><code>    // in BaseFragment\n    public abstract String getTAG();\n\n    //in FragmentA, FragmentB and FragmentC\n    public String getTAG(){\n        return TAG;\n    }\n\n    //Activity containing the fragments\n    //android.support.v4.app.Fragment;    \n    private FragmentA fragmentA; //inherited BaseFragment\n    private FragmentB fragmentB; //inherited BaseFragment\n    private FragmentC fragmentC; //inherited BaseFragment\n    private ConcurrentHashMap&lt;String,BaseFragment&gt; mapOfAddedFragments = new ConcurrentHashMap&lt;&gt;();\n\n\n    /**\n     * Displays fragment A\n     */\n    private void displayFragmentA() {\n        displayFragment(fragmentA)\n    }\n\n    /**\n     * Displays  fragment B\n     */\n    private void displayFragmentB() {\n       displayFragment(fragmentB)\n    }\n\n    /**\n     * Displays  fragment C\n     */\n    private void displayFragmentC() {\n        displayFragment(fragmentC)\n    }\n\n\n     /**\n     * Loads a fragment using show a fragment\n     * @param fragment\n     */\n    private void displayFragment(BaseFragment fragment){\n        if(!mapOfAddedFragments.containsKey(fragment.getTAG()))\n            mapOfAddedFragments.put(fragment.getTAG(), fragment);\n\n        showFragment(fragment.getTAG(), R.id.containerBody);\n    }\n\n    /**\n     * Displays a fragment and hides all the other ones\n     * @param fragmentTag is the tag of the fragment we want to display\n     */\n    private void showFragment(String fragmentTag, @IdRes int containerViewId){\n        FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();\n        BaseFragment fragment = null;\n\n        fragment = mapOfAddedFragments.get(fragmentTag);\n        if(fragment != null) {\n            if (fragment.isAdded())\n                ft.show(fragment);\n            else { //fragment needs to be added to the frame container\n                ft.add(containerViewId, fragment, fragment.getTAG());\n            }\n        }\n        else //the chosen fragment doesn't exist\n            return;\n\n        //we hide the other fragments\n        for (ConcurrentHashMap.Entry&lt;String, BaseFragment&gt; entry : mapOfAddedFragments.entrySet()){\n            if(!entry.getKey().equals(fragmentTag)){\n                BaseFragment fragmentTemp = entry.getValue();\n                // Hide the other fragments\n                if(fragmentTemp != null)\n                    if(fragmentTemp.isAdded())\n                        ft.hide(fragmentTemp);\n            }\n        }\n\n        //commit changes\n        ft.commit();\n    }\n</code></pre>\n\n<p>And to instantiate them you can do this in the onCreate() method of your activity:</p>\n\n<pre><code>//don't forget to get the .TAG elsewhere before using them here\n    //never call them directly\n    private void instantiateFragments(Bundle inState) {\n        if (inState != null) {\n            fragmentA = inState.containsKey(FragmentA.TAG) ?\n                    (FragmentA) getSupportFragmentManager().getFragment(inState, FragmentA.TAG):\n                    FragmentA.newInstance(FragmentA.TAG,\"0\");\n\n            fragmentB = inState.containsKey(FragmentB.TAG) ?\n                    (FragmentB) getSupportFragmentManager().getFragment(inState, FragmentB.TAG):\n                    FragmentB.newInstance(FragmentB.TAG,\"1\");        \n\n            fragmentc = inState.containsKey(FragmentC.TAG) ?\n                    (FragmentC) getSupportFragmentManager().getFragment(inState, FragmentC.TAG):\n                    FragmentC.newInstance(FragmentC.TAG,\"2\");         \n        }\n        else{\n            fragmentA = FragmentA.newInstance(FragmentA.TAG,\"0\");\n            fragmentB = FragmentB.newInstance(FragmentB.TAG,\"1\");\n            fragmentc = FragmentC.newInstance(FragmentC.TAG,\"2\");\n        }\n    }\n</code></pre>\n\n<p><strong>Edit according to  Shujaat Ali Khan's question:</strong></p>\n\n<p>The BaseFragment extends support4 fragment:</p>\n\n<pre><code>public abstract class BaseFragment extends Fragment {\n    public abstract String getTAG();\n    //whatever we can add to be inherited\n}\n</code></pre>\n\n<p>FragmentA for example:</p>\n\n<pre><code>public class FragmentA extends BaseFragment {\n    // Store instance variables\n    private static final String ARG_PARAM1 = \"param1\";\n    private static final String ARG_PARAM2 = \"param2\";\n\n    private String mParam1;\n    private String mParam2;\n\n    public static final String TAG = \"FragmentA\";\n\n    // newInstance constructor for creating fragment with arguments\n    public static FragmentA newInstance(String param1, String param2) {\n        FragmentA fragment = new FragmentA();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    // Store instance variables based on arguments passed\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    // Inflate the view for the fragment based on layout XML\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragmentA, container, false);\n        return view;\n    }\n\n    //other lifecycle methods\n\n    @Override\n    public String getTAG() {\n        return TAG;\n    }\n}\n</code></pre>\n\n<p>Finally the <code>R.id.containerBody</code> is the id of a FrameLayout containing the fragments in the activity containing these fragments.</p>\n"}, {"tags": [], "owner": {"reputation": 258, "user_id": 3433252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BOiP4.jpg?s=128&g=1", "display_name": "dtunctuncer", "link": "https://stackoverflow.com/users/3433252/dtunctuncer"}, "is_accepted": false, "score": 19, "last_activity_date": 1534599272, "creation_date": 1534599272, "answer_id": 51909216, "question_id": 42795611, "link": "https://stackoverflow.com/questions/42795611/fragmenttransaction-hide-show-doesnt-work-sometimes/51909216#51909216", "title": "FragmentTransaction hide/show doesn&#39;t work sometimes", "body": "<p>You need to reuse the same instance of a fragment that you wanted to hide or show.</p>\n\n<pre><code>private fun replaceFragment(fragment: Fragment) {\n    supportFragmentManager.beginTransaction().apply {\n        if (fragment.isAdded) {\n            show(fragment)\n        } else {\n            add(R.id.fmFragmentContainer, fragment)\n        }\n\n        supportFragmentManager.fragments.forEach {\n            if (it != fragment &amp;&amp; it.isAdded) {\n                hide(it)\n            }\n        }\n    }.commit()\n}\n</code></pre>\n"}], "owner": {"reputation": 11425, "user_id": 928611, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da05aaa7485715ca1f59f19a6ba69d7a?s=128&d=identicon&r=PG", "display_name": "Jacek Kwiecie\u0144", "link": "https://stackoverflow.com/users/928611/jacek-kwiecie%c5%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6985, "favorite_count": 4, "answer_count": 3, "score": 11, "last_activity_date": 1534599272, "creation_date": 1489522150, "last_edit_date": 1489522754, "question_id": 42795611, "link": "https://stackoverflow.com/questions/42795611/fragmenttransaction-hide-show-doesnt-work-sometimes", "title": "FragmentTransaction hide/show doesn&#39;t work sometimes", "body": "<p>I have an activity with bottom navigation tabs that are changing the fragments in it. When I click back and forth on those tabs, at some point it stops working. Code executes just fine as I put some logs in it. But the fragments aren't being switched. </p>\n\n<p>Code is in kotlin but it's rather straight forward</p>\n\n<pre><code>fun showTabFragment(tag: String) {\n        val currentFragment: Fragment? = supportFragmentManager.fragments?.lastOrNull()\n        var fragment = supportFragmentManager.findFragmentByTag(tag)\n        val fragmentExists = fragment != null\n        if (fragment == null) {\n            when (tag) {\n                TAG_LOGBOOK -&gt; fragment = LogbookFragment()\n                TAG_RECIPES -&gt; fragment = RecipesFragment()\n                TAG_PROFILE -&gt; fragment = ProfileFragment()\n                else -&gt; fragment = MeetingPlacesFragment()\n            }\n        }\n\n        val transaction = supportFragmentManager.beginTransaction()\n\n        if (currentFragment != null) {\n            Log.i(\"jacek\", \"hiding \" + currentFragment.javaClass.simpleName)\n            transaction.hide(currentFragment)\n        }\n\n        if (fragmentExists) {\n            Log.i(\"jacek\", \"showing \" + fragment.javaClass.simpleName)\n            transaction.show(fragment)\n        } else {\n            Log.i(\"jacek\", \"adding \" + fragment.javaClass.simpleName)\n            transaction.add(R.id.container, fragment, tag)\n        }\n\n        transaction.commit()\n    }\n</code></pre>\n\n<p>The fragments are quite heavy. I will try with some lightweight ones, but still that shouldn't be a problem in my opinion. Is there anything else I could try?</p>\n\n<p>I'm using the latest support library - 25.2.0\nAlso I'm not interested in replacing the fragments as the point is to add crossfade animation without recreating them</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "edited": false, "score": 0, "creation_date": 1489577877, "post_id": 42798378, "comment_id": 72729567, "body": "Thanks. I wasn&#39;t aware of the super type tokens. This is something I will investigate. Looks like it can be good enough for my use case."}, {"owner": {"reputation": 499, "user_id": 5666171, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Nu7os.png?s=128&g=1", "display_name": "CLOVIS", "link": "https://stackoverflow.com/users/5666171/clovis"}, "edited": false, "score": 0, "creation_date": 1554873568, "post_id": 42798378, "comment_id": 97905399, "body": "It looks like super type tokens only work in Kotlin/JVM and not in Kotlin/Common though?"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 3, "last_activity_date": 1489577539, "last_edit_date": 1495541840, "creation_date": 1489533890, "answer_id": 42798378, "question_id": 42795402, "link": "https://stackoverflow.com/questions/42795402/can-i-create-ktype-from-reified-t/42798378#42798378", "title": "Can I create KType from reified T", "body": "<p>No, as for now, this cannot be done, there is <a href=\"https://youtrack.jetbrains.com/issue/KT-15992\" rel=\"nofollow noreferrer\">an issue</a> in the Kotlin issue tracker about it, currently marked as <em>To be discussed</em>.</p>\n\n<p>You can, however, get more than just <code>KClass&lt;T&gt;</code> from the reified type parameter using subclassing and, in particular, the <a href=\"https://stackoverflow.com/questions/36253310/how-to-get-actual-type-arguments-of-a-reified-generic-parameter-in-kotlin\">technique called super type tokens</a>.</p>\n"}], "owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 42798378, "answer_count": 1, "score": 2, "last_activity_date": 1489577539, "creation_date": 1489521411, "question_id": 42795402, "link": "https://stackoverflow.com/questions/42795402/can-i-create-ktype-from-reified-t", "title": "Can I create KType from reified T", "body": "<p>I use reified generics to capture <code>KClass&lt;&gt;</code></p>\n\n<pre><code>inline fun &lt;reified T&gt; register(generator: Generator&lt;T&gt;) {\n    register(T::class, generator)\n}\n</code></pre>\n\n<p>But <code>KType</code> has some additional properties which are interesting to me like nullability. I would like to write something like this to capture the <code>KType</code> instead.</p>\n\n<pre><code>inline fun &lt;reified T&gt; register(generator: Generator&lt;T&gt;) {\n    register(T::ktype, generator) // Doesn't compile\n}\n\n...\n\nregister&lt;String?&gt;(myGen) // The nullability of String? is captured\n</code></pre>\n\n<p>Is there someway to capture <code>KType</code> instead of <code>KClass&lt;&gt;</code>?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "edited": false, "score": 0, "creation_date": 1489519479, "post_id": 42791492, "comment_id": 72704209, "body": "Did I understand correctly that you try to compile Kotlin to JS?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1489526426, "post_id": 42791492, "comment_id": 72708161, "body": "Yes, that is what they&#39;re doing."}], "answers": [{"comments": [{"owner": {"reputation": 271, "user_id": 2776080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d9efe7883ff7b80e8ca1a2d3f157e7?s=128&d=identicon&r=PG&f=1", "display_name": "eloo", "link": "https://stackoverflow.com/users/2776080/eloo"}, "edited": false, "score": 0, "creation_date": 1489570167, "post_id": 42799606, "comment_id": 72724125, "body": "Nice! That worked, thanks! However you mistake in call <code>toFixed()</code>, you have to call <code>format()</code>. So in my example would be <code>num.format(2)</code>. To be said also that this also convert <code>Float</code> to <code>String</code>, so better called when have to print it"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 10, "last_activity_date": 1489541316, "creation_date": 1489541316, "answer_id": 42799606, "question_id": 42791492, "link": "https://stackoverflow.com/questions/42791492/kotlin-js-define-number-of-decimals/42799606#42799606", "title": "Kotlin-js: Define number of decimals", "body": "<p>Kotlin standard library for JS doesn't have anything like <code>Double.format</code> yet, but you can implement it easily with aforementioned <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed\" rel=\"noreferrer\"><code>toFixed</code></a> function available in javascript:</p>\n\n<pre><code>fun Double.format(digits: Int): String = this.asDynamic().toFixed(digits)\nfun Float.format(digits: Int): String = this.asDynamic().toFixed(digits)\n</code></pre>\n\n<p>This works because <code>Double</code> and <code>Float</code> in Kotlin are represented with <code>Number</code> data type in JS, so you can call <code>toFixed()</code> function on instances of those types.</p>\n"}], "owner": {"reputation": 271, "user_id": 2776080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d9efe7883ff7b80e8ca1a2d3f157e7?s=128&d=identicon&r=PG&f=1", "display_name": "eloo", "link": "https://stackoverflow.com/users/2776080/eloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1639, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1489541316, "creation_date": 1489509024, "last_edit_date": 1489540887, "question_id": 42791492, "link": "https://stackoverflow.com/questions/42791492/kotlin-js-define-number-of-decimals", "title": "Kotlin-js: Define number of decimals", "body": "<p>Let's imagine something like this:</p>\n\n<pre><code>var num: Float = 0.0f\nnum = 2.4 * 3.5 / 3.8\n</code></pre>\n\n<p><code>num</code> has several decimals, but I want only 2. </p>\n\n<p>In JS I would use <code>num.toFixed(2)</code>.</p>\n\n<p>Other answers here suggest to use <code>\"%.2f\".format(num)</code> or <code>num.format(2)</code>. The latter needs a custom extension fun: </p>\n\n<pre><code>fun Double.format(digits: Int) = java.lang.String.format(\"%.${digits}f\", this)\n</code></pre>\n\n<p>However, any of these options leads to a compiler error of \"unresolved reference\". I don't think is a question of imports cause the compiler would suggest it.</p>\n\n<p>Is there an easy way to do this?</p>\n"}, {"tags": ["android", "gradle", "kotlin", "rawstring"], "comments": [{"owner": {"reputation": 3321, "user_id": 2567799, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/18a46b758e63887d0fe89e5a82cb8695?s=128&d=identicon&r=PG", "display_name": "stamanuel", "link": "https://stackoverflow.com/users/2567799/stamanuel"}, "edited": false, "score": 0, "creation_date": 1489503817, "post_id": 42789342, "comment_id": 72693377, "body": "interesting, i just tried your println statement here on the JVM and it works  <a href=\"http://try.kotlinlang.org/\" rel=\"nofollow noreferrer\">try.kotlinlang.org</a>"}, {"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 0, "creation_date": 1489523217, "post_id": 42789342, "comment_id": 72706367, "body": "I can&#39;t replicate the issue either. It works exactly as expected on try.kotlinlang.org and on my local machine."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1489545664, "post_id": 42789342, "comment_id": 72714507, "body": "What version of Kotlin are you using? Do you have any conflicting versions on the classpath?"}, {"owner": {"reputation": 1, "user_id": 7709244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1cf9e9db723186e722a7d7f544151dc?s=128&d=identicon&r=PG&f=1", "display_name": "ddowney", "link": "https://stackoverflow.com/users/7709244/ddowney"}, "edited": false, "score": 0, "creation_date": 1489593899, "post_id": 42789342, "comment_id": 72742176, "body": "Cheers for the response guys, I&#39;ll update the question now with some new information"}, {"owner": {"reputation": 184, "user_id": 3462387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554ce0d5c8c34104ec81c567fb2e1029?s=128&d=identicon&r=PG&f=1", "display_name": "Kaituo Li", "link": "https://stackoverflow.com/users/3462387/kaituo-li"}, "edited": false, "score": 0, "creation_date": 1563339520, "post_id": 42789342, "comment_id": 100661547, "body": "I tried the statement in your new edited information.  It works.  I am using kotlin 1.3.41 and JDK 11"}], "owner": {"reputation": 1, "user_id": 7709244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1cf9e9db723186e722a7d7f544151dc?s=128&d=identicon&r=PG&f=1", "display_name": "ddowney", "link": "https://stackoverflow.com/users/7709244/ddowney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489594405, "creation_date": 1489503297, "last_edit_date": 1489594405, "question_id": 42789342, "link": "https://stackoverflow.com/questions/42789342/kotlin-raw-string-throws-blank-error", "title": "Kotlin raw string throws blank error", "body": "<p>I'm creating a gradle plugin using kotlin and I am inserting some ascii art. Rather than trying to escape a load of backslashes, I decided to use raw strings but now I'm encountering bizarre nameless errors whenever my line contains 2 vertical bars.</p>\n\n<p>Here's some sample code:</p>\n\n<pre><code>println(\"\"\"\n        ] |___1\n        ] ||__2\n        ] |||_3 \n        ] ||||4\n        \"\"\".trimMargin(\"]\"))\n</code></pre>\n\n<p>This results in the following errors in my message log:</p>\n\n<pre><code>Error:__2\nError:|_3\nError:||4\n</code></pre>\n\n<p>Does anyone know why this error is happening? I've overwritten the margin character so I don't understand why the vertical bar is still affecting the raw string. It's odd that it only happens from the second bar onward.</p>\n\n<p>It's a purely cosmetic part of the project so it's not a huge deal if I have to remove it.</p>\n\n<p>Any insight is appreciated!</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I've since restarted my computer and IDE and now the sample string I supplied doesn't cause those errors. However my ascii string still does so I'll supply a snippet of the art that gives errors.</p>\n\n<p>I'm also using kotlin 1.1.0 and have tried downgrading to 1.0.6 and still see the errors.</p>\n\n<p>New sample code:</p>\n\n<pre><code>println(\"\"\"\n        ]                      \\                    ^    /^\n        ]                       \\                  / \\  // \\\n        ]                        \\   |\\___/|      /   \\//  .\\\n        ]                         \\  /O  O  \\__  /    //  | \\ \\           *----*\n        ]                           /     /  \\/_/    //   |  \\  \\          \\   |\n        ]                           @___@`    \\/_   //    |   \\   \\         \\/\\ \\\n        ]                          0/0/|       \\/_ //     |    \\    \\         \\  \\\n        ]                      0/0/0/0/|        \\///      |     \\     \\       |  |\n        ]                   0/0/0/0/0/_|_ /   (  //       |      \\     _\\     |  /\n        ]                0/0/0/0/0/0/`/,_ _ _/  ) ; -.    |    _ _\\.-~       /   /\n        \"\"\".trimMargin(\"]\"))\n</code></pre>\n\n<p>Gives these errors:</p>\n\n<pre><code>Error:/   \\//  .\\\nError:\nError:\\    \\         \\  \\\nError:\\     \\       |  |\nError:\\     _\\     |  /\n</code></pre>\n"}, {"tags": ["java", "kotlin", "rx-java2"], "comments": [{"owner": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "edited": false, "score": 0, "creation_date": 1489498824, "post_id": 42787419, "comment_id": 72689304, "body": "Have you <i>tried</i> <code>onErrorResumeNext</code>?  The documentation as you&#39;ve shown is a little weird, but that sure sounds like it does what you describe wanting it do do... I think the disconnect is that the API assumes, if an Observable has failed, that it may be unable to advance to the next element; so it&#39;s written to let you provide a new Observable that continues the sequence; so you just need one that picks up where the error caused you to leave off, don&#39;t you?"}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "edited": false, "score": 0, "creation_date": 1489498946, "post_id": 42787419, "comment_id": 72689410, "body": "<code>onErrorResumeNext</code> has a parameter and if I call it with the same <code>subject</code> I still can&#39;t see the remaining next values and the <code>onComplete</code>. If i add a new <code>Subject</code> it obviously won&#39;t have the subscriber I added to the previous one."}, {"owner": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "edited": false, "score": 0, "creation_date": 1489499330, "post_id": 42787419, "comment_id": 72689706, "body": "Ok, to you it&#39;s &quot;obvious&quot; it wouldn&#39;t have the subscriber, and to me if the error-handling function doesn&#39;t take care of that, then what exactly does the error-handling function do?  It is both named and documented as the solution to your problem, so again <i>have you tried it</i>?"}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "edited": false, "score": 0, "creation_date": 1489500016, "post_id": 42787419, "comment_id": 72690238, "body": "Yes I tried but it does not work. <code>retry()</code> just hangs the process."}, {"owner": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "edited": false, "score": 0, "creation_date": 1489500173, "post_id": 42787419, "comment_id": 72690357, "body": "I didn&#39;t ask if you tried <code>retry()</code>.  I asked if you tried passing a new observable to <code>onErrorResumeNext()</code>.  But clearly you don&#39;t want help if it contradicts your assumptions, so good luck."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "edited": false, "score": 0, "creation_date": 1489500516, "post_id": 42787419, "comment_id": 72690613, "body": "I tried <code>onErrorResumeNext</code>. It didn&#39;t work. I expected that <code>retry</code> will work but it did not work either."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "edited": false, "score": 0, "creation_date": 1489500937, "post_id": 42787419, "comment_id": 72690978, "body": "Why the hostility?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user21037"}, "edited": false, "score": 0, "creation_date": 1489590312, "post_id": 42787419, "comment_id": 72739189, "body": "<code>&quot;If i add a new Subject it obviously won&#39;t have the subscriber I added to the previous one.&quot;</code> - not true. That&#39;s what <code>onErrorResumeNext</code> is for: it RESUMES the flow of items to existing subscribers, but taking subsequent items from a different observable. It does not dispose existing subscribers. <code>retry</code> will rerun the observable (on existing subscribers) from the start, which means you will probably get the same items again as you did before (it doesn&#39;t simply resume). <code>onErrorResumeNext</code> lets you pass control from your &quot;bad&quot; observable to a new one."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1489623204, "post_id": 42787419, "comment_id": 72757646, "body": "As I said (with the example above) it does not work. Go ahead and try it."}], "answers": [{"comments": [{"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1489513126, "post_id": 42789772, "comment_id": 72700324, "body": "Is <code>Notification</code> is something like the <code>Either</code> type in functional languages?"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "reply_to_user": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 3, "creation_date": 1489527295, "post_id": 42789772, "comment_id": 72708620, "body": "Something like <code>Try&lt;Optional&lt;T&gt;&gt;</code> compacted into a single class."}], "tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 12, "last_activity_date": 1489513469, "last_edit_date": 1489513469, "creation_date": 1489504442, "answer_id": 42789772, "question_id": 42787419, "link": "https://stackoverflow.com/questions/42787419/how-to-continue-processing-after-an-error-happens-in-rxjava-2/42789772#42789772", "title": "How to continue processing after an error happens in RxJava 2?", "body": "<p>If you want to continue processing after an error, it means your error is a value just like your <code>String</code>s and should go through <code>onNext</code>. To ensure type safety in this case, you should use some form of wrapper that can either take a regular value or an error; for example, the <code>io.reactivex.Notification&lt;T&gt;</code> is available in RxJava 2:</p>\n\n<pre><code>PublishSubject&lt;Notification&lt;String&gt;&gt; subject = PublishSubject.create();\n\nsubject.subscribe(System.out::println);\n\nsubject.onNext(Notification.createOnNext(\"Hello\"));\nsubject.onNext(Notification.&lt;String&gt;createOnError(new RuntimeException(\"oops\")));\nsubject.onNext(Notification.createOnNext(\"World\"));\n</code></pre>\n"}], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3429, "favorite_count": 3, "accepted_answer_id": 42789772, "answer_count": 1, "score": 6, "last_activity_date": 1489513469, "creation_date": 1489498306, "last_edit_date": 1489500805, "question_id": 42787419, "link": "https://stackoverflow.com/questions/42787419/how-to-continue-processing-after-an-error-happens-in-rxjava-2", "title": "How to continue processing after an error happens in RxJava 2?", "body": "<p>I have a <code>PublishSubject</code> and a <code>Subscriber</code> which I use to process a (possibly) infinite stream of preprocessed data. The problem is that some of the elements might contain some error. I'd like to ignore them and continue processing. How can I do so? I've tried something like this:</p>\n\n<pre><code>    val subject = PublishSubject.create&lt;String&gt;()\n    subject.retry().subscribe({\n        println(\"next: $it\")\n    }, {\n        println(\"error\")\n    }, {\n        println(\"complete\")\n    })\n\n    subject.onNext(\"foo\")\n    subject.onNext(\"bar\")\n    subject.onError(RuntimeException())\n    subject.onNext(\"wom\")\n    subject.onComplete()\n</code></pre>\n\n<p>My problem is that none of the error handling methods help me out here:</p>\n\n<blockquote>\n  <p><code>onErrorResumeNext()</code> \u2014 instructs an Observable to emit a sequence of\n  items if it encounters an error</p>\n  \n  <p><code>onErrorReturn(\u202f)</code> \u2014 instructs an\n  Observable to emit a particular item when it encounters an error</p>\n  \n  <p><code>onExceptionResumeNext(\u202f)</code> \u2014 instructs an Observable to continue\n  emitting items after it encounters an exception (but not another\n  variety of throwable)</p>\n  \n  <p><code>retry(\u202f)</code> \u2014 if a source Observable emits an\n  error, resubscribe to it in the hopes that it will complete without\n  error</p>\n  \n  <p><code>retryWhen(\u202f)</code> \u2014 if a source Observable emits an error, pass that\n  error to another Observable to determine whether to resubscribe to the\n  source</p>\n</blockquote>\n\n<p>I tried <code>retry()</code> for example but it hangs my process after the error indefinitely.</p>\n\n<p>I also tried <code>onErrorResumeNext()</code> but it does not work as expected:</p>\n\n<pre><code>    val backupSubject = PublishSubject.create&lt;String&gt;()\n    val subject = PublishSubject.create&lt;String&gt;()\n    var currentSubject = subject\n    subject.onErrorResumeNext(backupSubject).subscribe({\n        println(\"next: $it\")\n    }, {\n        println(\"error\")\n        currentSubject = backupSubject\n    }, {\n        println(\"complete\")\n    })\n\n    backupSubject.subscribe({\n        println(\"backup\")\n    }, {\n        println(\"backup error\")\n    })\n\n    currentSubject.onNext(\"foo\")\n    currentSubject.onNext(\"bar\")\n    currentSubject.onError(RuntimeException())\n    currentSubject.onNext(\"wom\")\n    currentSubject.onComplete()\n</code></pre>\n\n<p>This only prints <code>foo</code> and <code>bar</code>.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 271, "user_id": 2776080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d9efe7883ff7b80e8ca1a2d3f157e7?s=128&d=identicon&r=PG&f=1", "display_name": "eloo", "link": "https://stackoverflow.com/users/2776080/eloo"}, "edited": false, "score": 0, "creation_date": 1489497491, "post_id": 42785284, "comment_id": 72688212, "body": "I finally reached the &quot;explicit lanbda paramater&quot; solution by myself but the sumby is a nice and better solution, thanks!"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1489503677, "post_id": 42785284, "comment_id": 72693280, "body": "Since 1.1 you can also do <code>it.value.price.toInt()</code>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 17, "last_activity_date": 1489493626, "last_edit_date": 1489493626, "creation_date": 1489492346, "answer_id": 42785284, "question_id": 42785186, "link": "https://stackoverflow.com/questions/42785186/kotlin-mutablemap-foreach/42785284#42785284", "title": "Kotlin mutableMap foreach", "body": "<p>The lambda that you pass to <code>forEach { ... }</code> accepts an <code>Entry&lt;K, V&gt;</code>, and you can work with this entry, accessing its <code>value</code>:</p>\n\n<pre><code>listItems.forEach { total += parseInt(it.value.price) }\n</code></pre>\n\n<p>Which is equivalent to this using <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expression-syntax\" rel=\"noreferrer\">explicit lambda parameter</a>:</p>\n\n<pre><code>listItems.forEach { entry -&gt; total += parseInt(entry.value.price) }\n</code></pre>\n\n<p>Or, since Kotlin 1.1, you can use <a href=\"https://kotlinlang.org/docs/reference/whatsnew11.html#destructuring-in-lambdas\" rel=\"noreferrer\">destructuring in lambdas</a>:</p>\n\n<pre><code>listItems.forEach { (_, value) -&gt; total += parseInt(value.price) }\n</code></pre>\n\n<hr>\n\n<p>If you only need to sum the values, you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sum-by.html\" rel=\"noreferrer\"><code>sumBy { ... }</code></a>:</p>\n\n<pre><code>val total = listItems.entries.sumBy { parseInt(it.value.price) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19421, "user_id": 3795501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaeec79535337d9a96f63f2d6ef3e49d?s=128&d=identicon&r=PG", "display_name": "Luka Jacobowitz", "link": "https://stackoverflow.com/users/3795501/luka-jacobowitz"}, "is_accepted": false, "score": 4, "last_activity_date": 1489492685, "creation_date": 1489492685, "answer_id": 42785400, "question_id": 42785186, "link": "https://stackoverflow.com/questions/42785186/kotlin-mutablemap-foreach/42785400#42785400", "title": "Kotlin mutableMap foreach", "body": "<p>For the some of a collection, instead of using <code>forEach</code>, I'd suggest going for <code>sumBy</code> or <code>fold</code>. </p>\n\n<p>You can get the underlying values by calling <code>value</code> on the <code>Map&lt;K,V&gt;</code>.\nSo to get the <code>sum</code> you'd do something like this:</p>\n\n<pre><code>val total = listItems.values.sumBy{ it.price.toInt() }\n</code></pre>\n\n<p>Now there's no need to introduce a mutable <code>var</code>.</p>\n"}], "owner": {"reputation": 271, "user_id": 2776080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d9efe7883ff7b80e8ca1a2d3f157e7?s=128&d=identicon&r=PG&f=1", "display_name": "eloo", "link": "https://stackoverflow.com/users/2776080/eloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9166, "favorite_count": 0, "answer_count": 2, "score": 11, "last_activity_date": 1489493626, "creation_date": 1489492082, "last_edit_date": 1592644375, "question_id": 42785186, "link": "https://stackoverflow.com/questions/42785186/kotlin-mutablemap-foreach", "title": "Kotlin mutableMap foreach", "body": "<p>My question is more to understand the documentation. It say's:</p>\n<pre><code>fun &lt;K, V&gt; Map&lt;out K, V&gt;.forEach(\naction: (Entry&lt;K, V&gt;) -&gt; Unit)\n</code></pre>\n<p>However I don't understand how to implement it. How I get the Key and Value inside the loop?</p>\n<p>I want to sum for each item in <code>listItems</code> the value of the price. The map associates a string with an item</p>\n<pre><code>data class Item(val name: String, val description: String, val price: String, val index: Int)\n</code></pre>\n<p>Imagine <code>listItems</code> contains this:</p>\n<blockquote>\n<p>listItems[&quot;shirt&quot;]-&gt; name: shirt, description: lorem ipsum, price: 10, index: 0</p>\n<p>listItems[&quot;shoes&quot;]-&gt; name: shoes, description: lorem ipsum, price: 30, index: 0</p>\n</blockquote>\n<p>So the code would be something like:</p>\n<pre><code>var total: Int = 0\nlistItems.forEach {\n       total += parseInt(value.price)\n    }\n</code></pre>\n<p>However I don't understand how to acces this <code>value</code> refering to the <code>V</code> of the documentation</p>\n"}, {"tags": ["java", "arrays", "spring", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 8, "last_activity_date": 1489480370, "creation_date": 1489480370, "answer_id": 42781104, "question_id": 42781004, "link": "https://stackoverflow.com/questions/42781004/how-to-create-java-array-in-kotlin-for-propertysource/42781104#42781104", "title": "How to create Java array in Kotlin for @PropertySource?", "body": "<p>The <code>value</code> annotation parameter is handled in a special way in Kotlin (following its special handling in Java), and if it has an array type, Kotlin converts it to a <code>vararg</code>. Therefore, the correct syntax here is simply:</p>\n\n<pre><code>@PropertySource(\"application.properties\", \"other.properties\")\n</code></pre>\n\n<p>If you do want to specify the parameter name explicitly, use the spread operator to expand the array into varargs:</p>\n\n<pre><code>@PropertySource(value = *arrayOf(\"application.properties\", \"other.properties\"))\n</code></pre>\n\n<p>For any other array annotation parameter, you should simply use <code>arrayOf()</code> normally.</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 797512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06d8d490079661f783fe02a485d6d941?s=128&d=identicon&r=PG", "display_name": "jeremyt", "link": "https://stackoverflow.com/users/797512/jeremyt"}, "is_accepted": false, "score": 2, "last_activity_date": 1580121189, "creation_date": 1580121189, "answer_id": 59929366, "question_id": 42781004, "link": "https://stackoverflow.com/questions/42781004/how-to-create-java-array-in-kotlin-for-propertysource/59929366#59929366", "title": "How to create Java array in Kotlin for @PropertySource?", "body": "<p>Adding this in case it helps anyone...</p>\n\n<p>I needed multiple instances of the same annotation, but I also needed to set other attributes of the annotation.</p>\n\n<pre><code>@Configuration\n@PropertySources(\n        PropertySource(\n                value = [\"classpath:consul.properties\"]),\n        PropertySource(\n                value = [\"file:/run/example/consul.properties\"],\n                ignoreResourceNotFound = true)\n)\n</code></pre>\n"}], "owner": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "accepted_answer_id": 42781104, "answer_count": 2, "score": 3, "last_activity_date": 1580121189, "creation_date": 1489479970, "question_id": 42781004, "link": "https://stackoverflow.com/questions/42781004/how-to-create-java-array-in-kotlin-for-propertysource", "title": "How to create Java array in Kotlin for @PropertySource?", "body": "<p>I am trying to configure @PropertySource for my Spring-based application.</p>\n\n<p>In Java, I could do something like this:</p>\n\n<pre><code>@PropertySource(value = {\"application.properties\",\"other.properties\" })\n</code></pre>\n\n<p>I tried <code>arrayOf</code> in Kotlin but I end up with a type mismatch:</p>\n\n<pre><code>@PropertySource(value = arrayOf(\"application.properties\", \"other.properties\"))\n</code></pre>\n\n<p>What is the right way to go here?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1489480099, "post_id": 42773619, "comment_id": 72676115, "body": "How exactly did you compile intellij-markdown? The default build.gradle of intellij-markdown generates Java 6 bytecode and will not trigger this error."}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1489483100, "post_id": 42773619, "comment_id": 72677924, "body": "I do not compile it - I use the one via maven repo from maven { url &#39;<a href=\"http://dl.bintray.com/jetbrains/markdown\" rel=\"nofollow noreferrer\">dl.bintray.com/jetbrains/markdown</a>&#39; }"}], "answers": [{"tags": [], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "is_accepted": true, "score": 1, "last_activity_date": 1490113391, "creation_date": 1490113391, "answer_id": 42932830, "question_id": 42773619, "link": "https://stackoverflow.com/questions/42773619/using-intellij-markdown-in-kotlin-android-project/42932830#42932830", "title": "using intellij-markdown in kotlin android project", "body": "<p>This was the way I went in the end:\n<a href=\"https://github.com/valich/intellij-markdown/pull/19\" rel=\"nofollow noreferrer\">https://github.com/valich/intellij-markdown/pull/19</a></p>\n"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 1, "accepted_answer_id": 42932830, "answer_count": 1, "score": 1, "last_activity_date": 1490113391, "creation_date": 1489439942, "question_id": 42773619, "link": "https://stackoverflow.com/questions/42773619/using-intellij-markdown-in-kotlin-android-project", "title": "using intellij-markdown in kotlin android project", "body": "<p>I wanted to use intellij-markdown in one android kotlin project - but it does not survive the java roundtrip. Now I am searching for the least painful way to deal with this problem and hence ask here - perhaps someone faced the same problem. All solutions I have in mind currently are not really nice as they all diverge from upstream.</p>\n\n<pre><code>Error:Error converting bytecode to dex:\nCause: Dex cannot parse version 52 byte code.\nThis is caused by library dependencies that have been compiled using Java 8 or above.\nIf you are using the 'java' gradle plugin in a library submodule add \ntargetCompatibility = '1.7'\nsourceCompatibility = '1.7'\nto that submodule's build.gradle file.\nError:1 error; aborting\nError:Execution failed for task ':android:transformClassesWithDexForProdWithFirebaseDebug'.\n&gt; com.android.build.api.transform.TransformException: java.lang.RuntimeException: java.lang.RuntimeException: Unable to pre-dex '/home/ligi/.gradle/caches/modules-2/files-2.1/org.jetbrains/markdown/0.1.23/f02dce4ef95be9f24a6ea59de2c187f597befb70/markdown-0.1.23.jar' to '/home/ligi/git/SurvivalManual/android/build/intermediates/transforms/dex/prodWithFirebase/debug/folders/1000/10/markdown-0.1.23_4afcc7019db1f3375984c600cc493df386228117'\n</code></pre>\n"}, {"tags": ["function", "extension-methods", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1489496207, "post_id": 42773101, "comment_id": 72687193, "body": "<a href=\"https://kotlinlang.org/docs/reference/extensions.html#declaring-extensions-as-members\" rel=\"nofollow noreferrer\">Declaring Extensions as Members</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1441, "user_id": 3239558, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100002152175824/picture?type=large", "display_name": "user3239558", "link": "https://stackoverflow.com/users/3239558/user3239558"}, "edited": false, "score": 0, "creation_date": 1489440904, "post_id": 42773208, "comment_id": 72663070, "body": "I just edit the question, I added a subclass, why in the subclass, the extended function call is not determined by compile-time ?"}, {"owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "edited": false, "score": 0, "creation_date": 1489443095, "post_id": 42773208, "comment_id": 72664065, "body": "It is determined at compile-time. The difference is that in your subclass you have <code>fun react(particle: Electron): Unit</code> and in your base-class <code>fun react(particle: Particle)</code>"}, {"owner": {"reputation": 4427, "user_id": 4706743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b05c3b09628ba8955d6d7a188271af?s=128&d=identicon&r=PG&f=1", "display_name": "D3xter", "link": "https://stackoverflow.com/users/4706743/d3xter"}, "edited": false, "score": 0, "creation_date": 1489443135, "post_id": 42773208, "comment_id": 72664081, "body": "As said by @zsmb13, extension methods are statically dispatched (at compile time) and not dynamically (at run-time). take a look at <a href=\"https://www.codeproject.com/Tips/875393/Static-Dynamic-Dispatch-ReExplained\" rel=\"nofollow noreferrer\">codeproject.com/Tips/875393/Static-Dynamic-Dispatch-ReExplai&zwnj;&#8203;ned</a>"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1489492551, "post_id": 42773208, "comment_id": 72684736, "body": "Basically, extensions defined in a class are compiled into <i>member</i> functions, not static ones. They are still resolved statically in terms of which function to call, but the implementation of that function is resolved at runtime. I think, it is important in context of this question to avoid confusion."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 2, "last_activity_date": 1489438385, "creation_date": 1489438385, "answer_id": 42773208, "question_id": 42773101, "link": "https://stackoverflow.com/questions/42773101/kotlin-can-you-explain-member-extension-functions/42773208#42773208", "title": "Kotlin : can you explain member extension functions?", "body": "<p>Extension functions compile to static function calls, and therefore which method to call is determined by the compile-time static types instead of the runtime types of the objects. </p>\n\n<p>There isn't dynamic dispatch here like you get when you call a method that's overridden in a subclass and you get that implementation instead of what's in the base class. Basically, there's no overriding extension functions.</p>\n\n<p>To the specific example: at compile time, inside the <code>react(particle: Particle)</code> function, the static type of <code>particle</code> is just <code>Particle</code> at compile time, so it will always call the extension function that's defined on the <code>Particle</code> class.</p>\n"}], "owner": {"reputation": 1441, "user_id": 3239558, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100002152175824/picture?type=large", "display_name": "user3239558", "link": "https://stackoverflow.com/users/3239558/user3239558"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 42773208, "answer_count": 1, "score": 2, "last_activity_date": 1489442302, "creation_date": 1489438007, "last_edit_date": 1489442302, "question_id": 42773101, "link": "https://stackoverflow.com/questions/42773101/kotlin-can-you-explain-member-extension-functions", "title": "Kotlin : can you explain member extension functions?", "body": "<p>My code is as follows:</p>\n\n<pre><code>open class Particle\n\nclass Electron : Particle()\n\nopen class Element(val name: String) {\n\n    open fun Particle.react(name: String): Unit {\n        println(\"$name is reacting with a particle\")\n    }\n\n    open fun Electron.react(name: String): Unit {\n        println(\"$name is reacting with an electron\")\n    }\n\n    fun react(particle: Particle): Unit {\n        particle.react(name)\n    }\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val selenium = Element(\"Selenium\")\n    selenium.react(Particle())\n    selenium.react(Electron())\n}\n</code></pre>\n\n<p>My output is as follows:</p>\n\n<p>Selenium is reacting with a particle</p>\n\n<p>Selenium is reacting with a particle</p>\n\n<p>I don't understand : why the second output should not be \"Selenium is reacting with an electron\"?</p>\n\n<p>If I added another subclass </p>\n\n<pre><code>class NobleGas(name: String) : Element(name) {\n\n    fun react(particle: Electron): Unit {\n        particle.react(name)\n    }\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val neon = NobleGas(\"Selenium\")\n    neon.react(Particle())\n    neon.react(Electron())\n}\n</code></pre>\n\n<p>The output is :\nSelenium is reacting with a particle\nSelenium is reacting with an electron</p>\n\n<p>Why the second output is \"Selenium is reacting with an electron\"?</p>\n"}, {"tags": ["android", "system.reactive", "kotlin", "rx-kotlin"], "comments": [{"owner": {"reputation": 153257, "user_id": 6509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de6eafe28472ceb9522fd3f609afed53?s=128&d=identicon&r=PG", "display_name": "tim_yates", "link": "https://stackoverflow.com/users/6509/tim-yates"}, "edited": false, "score": 1, "creation_date": 1489435976, "post_id": 42772319, "comment_id": 72660609, "body": "Don&#39;t you need to <code>.observeOn(AndroidSchedulers.mainThread())</code>?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1489436223, "post_id": 42772319, "comment_id": 72660730, "body": "Yup, that&#39;s it. You should post that as the answer. Odd that it doesn&#39;t crash or anything though."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 7544860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21d7fc2b450e82e887abb8d118d07d43?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas W&#252;nsche", "link": "https://stackoverflow.com/users/7544860/niklas-w%c3%bcnsche"}, "edited": false, "score": 0, "creation_date": 1489486299, "post_id": 42774592, "comment_id": 72680171, "body": "Thank you, this works :). However, could you explain why it still updated the text once in my example?"}], "tags": [], "owner": {"reputation": 153257, "user_id": 6509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de6eafe28472ceb9522fd3f609afed53?s=128&d=identicon&r=PG", "display_name": "tim_yates", "link": "https://stackoverflow.com/users/6509/tim-yates"}, "is_accepted": true, "score": 0, "last_activity_date": 1489444209, "creation_date": 1489444209, "answer_id": 42774592, "question_id": 42772319, "link": "https://stackoverflow.com/questions/42772319/cant-change-text-of-actionmenuitemview-with-rxkotlin/42774592#42774592", "title": "Can&#39;t Change Text of ActionMenuItemView with RxKotlin", "body": "<p>In order for the text to update, it needs to be updated on the main thread (not the <code>Schedulers.newThread()</code> one)</p>\n\n<p>Adding:</p>\n\n<pre><code>.observeOn(AndroidSchedulers.mainThread())\n</code></pre>\n\n<p>Should fix things, and get the label to update</p>\n"}], "owner": {"reputation": 93, "user_id": 7544860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21d7fc2b450e82e887abb8d118d07d43?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas W&#252;nsche", "link": "https://stackoverflow.com/users/7544860/niklas-w%c3%bcnsche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 42774592, "answer_count": 1, "score": 0, "last_activity_date": 1489444209, "creation_date": 1489434938, "question_id": 42772319, "link": "https://stackoverflow.com/questions/42772319/cant-change-text-of-actionmenuitemview-with-rxkotlin", "title": "Can&#39;t Change Text of ActionMenuItemView with RxKotlin", "body": "<p>I'm trying to write an Android app with Kotlin. Now, I want to show a counter in the ActionBar. I added an item called show_timer for that. Each second, it should count up by one:</p>\n\n<pre><code>override fun onWindowFocusChanged(hasFocus: Boolean) {\n    val item = findViewById(R.id.show_timer) as ActionMenuItemView\n    PublishSubject.interval(1, java.util.concurrent.TimeUnit.SECONDS, Schedulers.newThread())\n            .subscribeBy(onNext = {item.text = it.toString()})\n\n    super.onWindowFocusChanged(hasFocus)\n}\n</code></pre>\n\n<p>But somehow this doesn't work. It updates the default text to 0, but after that it does nothing. Does someone know why this doesn't work?</p>\n\n<p>Thank you in advance,</p>\n\n<p>Niklas</p>\n"}, {"tags": ["file", "class", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 10161, "user_id": 8034839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N8r2x.jpg?s=128&g=1", "display_name": "shizhen", "link": "https://stackoverflow.com/users/8034839/shizhen"}, "edited": false, "score": 0, "creation_date": 1596110778, "post_id": 42770281, "comment_id": 111709843, "body": "This should be the decent answer"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 54, "last_activity_date": 1489427623, "creation_date": 1489427623, "answer_id": 42770281, "question_id": 42769873, "link": "https://stackoverflow.com/questions/42769873/kotlin-file-vs-class-whats-the-difference/42770281#42770281", "title": "Kotlin File vs Class. Whats the difference?", "body": "<p>The only difference is that creating a file creates a file with no classes, and creating a class creates a file with one class. You can then add more classes to the file, or delete classes, or make any other changes - the end result doesn't depend on how the file was created.</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 2734915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debc5166a7588ebaad5c643ba3ecb87d?s=128&d=identicon&r=PG&f=1", "display_name": "user2734915", "link": "https://stackoverflow.com/users/2734915/user2734915"}, "is_accepted": false, "score": 2, "last_activity_date": 1495626365, "creation_date": 1495626365, "answer_id": 44157496, "question_id": 42769873, "link": "https://stackoverflow.com/questions/42769873/kotlin-file-vs-class-whats-the-difference/44157496#44157496", "title": "Kotlin File vs Class. Whats the difference?", "body": "<p>As I can see Kotlin file has many classes inside it But a Kotlin class has one class with that name, that's only an observation though. </p>\n"}, {"comments": [{"owner": {"reputation": 7099, "user_id": 1475548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09sbK.jpg?s=128&g=1", "display_name": "Octopus", "link": "https://stackoverflow.com/users/1475548/octopus"}, "edited": false, "score": 0, "creation_date": 1544133232, "post_id": 52055655, "comment_id": 94178746, "body": "So, if I put a <code>private const val TAG = &quot;MyActivity&quot;</code> at the top simply for the purpose of Log.d messages, it turns my class into a file. I know it&#39;s not really a problem, but is there a better place to put that?"}, {"owner": {"reputation": 2662, "user_id": 3886459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed94b9c64c9abb7a0c0ea126b63782f?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej Beimcik", "link": "https://stackoverflow.com/users/3886459/maciej-beimcik"}, "reply_to_user": {"reputation": 7099, "user_id": 1475548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09sbK.jpg?s=128&g=1", "display_name": "Octopus", "link": "https://stackoverflow.com/users/1475548/octopus"}, "edited": false, "score": 0, "creation_date": 1547713380, "post_id": 52055655, "comment_id": 95288177, "body": "@Octopus IMO this is the best place to put it if you want a private, static constant. You limit the scope to the file so a class inside this file can use it and this is pretty much the same as private static String from Java."}, {"owner": {"reputation": 160, "user_id": 5934912, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1J4Xcf1Yccg/AAAAAAAAAAI/AAAAAAAAAF4/lOjYA-ojiDk/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/5934912/rob"}, "edited": false, "score": 0, "creation_date": 1610369273, "post_id": 52055655, "comment_id": 116102461, "body": "So pretty much ignore it and let AS figure it out!"}], "tags": [], "owner": {"reputation": 2662, "user_id": 3886459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed94b9c64c9abb7a0c0ea126b63782f?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej Beimcik", "link": "https://stackoverflow.com/users/3886459/maciej-beimcik"}, "is_accepted": true, "score": 34, "last_activity_date": 1535451999, "creation_date": 1535451999, "answer_id": 52055655, "question_id": 42769873, "link": "https://stackoverflow.com/questions/42769873/kotlin-file-vs-class-whats-the-difference/52055655#52055655", "title": "Kotlin File vs Class. Whats the difference?", "body": "<p><a href=\"https://i.stack.imgur.com/9lhTX.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9lhTX.png\" alt=\"icon\"></a> Kotlin Class: Android Studio displays it with no extension if the file contains ONLY ONE class.</p>\n\n<p>Unlike Java, Kotlin allows you to put certain things outside the class like:</p>\n\n<ul>\n<li>extension functions </li>\n<li>constants</li>\n</ul>\n\n<p>If you, therefore, add any of the above or another class to the file, Android Studio will change it to \"Kotlin File\":</p>\n\n<p><a href=\"https://i.stack.imgur.com/hz5fr.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hz5fr.png\" alt=\"icon\"></a> with extension .kt</p>\n\n<p>Removing the above extras, will again show the file as \"Kotlin Class\"</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7176857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BBtbqEhl_oM/AAAAAAAAAAI/AAAAAAAAACU/8P_4IB0ep6k/photo.jpg?sz=128", "display_name": "FoAng", "link": "https://stackoverflow.com/users/7176857/foang"}, "is_accepted": false, "score": 1, "last_activity_date": 1542184222, "creation_date": 1542184222, "answer_id": 53295879, "question_id": 42769873, "link": "https://stackoverflow.com/questions/42769873/kotlin-file-vs-class-whats-the-difference/53295879#53295879", "title": "Kotlin File vs Class. Whats the difference?", "body": "<p>Yes, if you define more than one class, it will be automatically converted to file, otherwise it will be automatically converted to class. Usually I think if you need to define some variables or methods that can be directly referenced, you can put them in the file.</p>\n"}, {"tags": [], "owner": {"reputation": 837, "user_id": 8977328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887d003f455e846244056ff8285721a7?s=128&d=identicon&r=PG&f=1", "display_name": "korchix", "link": "https://stackoverflow.com/users/8977328/korchix"}, "is_accepted": false, "score": 5, "last_activity_date": 1555662636, "creation_date": 1555662636, "answer_id": 55758880, "question_id": 42769873, "link": "https://stackoverflow.com/questions/42769873/kotlin-file-vs-class-whats-the-difference/55758880#55758880", "title": "Kotlin File vs Class. Whats the difference?", "body": "<p>Here is the answer from the official <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#source-file-names\" rel=\"noreferrer\">Documentation</a>:</p>\n\n<blockquote>\n  <p>If a Kotlin file contains a single class (potentially with related\n  top-level declarations), its name should be the same as the name of\n  the class, with the .kt extension appended. If a file contains\n  multiple classes, or only top-level declarations, choose a name\n  describing what the file contains, and name the file accordingly. Use\n  camel humps with an uppercase first letter (e.g.\n  ProcessDeclarations.kt).</p>\n  \n  <p>The name of the file should describe what the code in the file does.\n  Therefore, you should avoid using meaningless words such as \"Util\" in\n  file names.</p>\n</blockquote>\n\n<p>so basically a file can -for instance- contains just (helper-)functions without any class declaration.</p>\n"}], "owner": {"reputation": 904, "user_id": 7564239, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/OCL4G.jpg?s=128&g=1", "display_name": "Vlad Skurtolov", "link": "https://stackoverflow.com/users/7564239/vlad-skurtolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12044, "favorite_count": 5, "accepted_answer_id": 52055655, "answer_count": 5, "score": 54, "last_activity_date": 1602649506, "creation_date": 1489426381, "last_edit_date": 1602649506, "question_id": 42769873, "link": "https://stackoverflow.com/questions/42769873/kotlin-file-vs-class-whats-the-difference", "title": "Kotlin File vs Class. Whats the difference?", "body": "<p>Just started using Kotlin and created some activities as Kotlin Files. They work, but still, I want to know what the difference between creating a File and a Class.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3008, "user_id": 404386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3849ae4f45ddf597606bf01d13c789b4?s=128&d=identicon&r=PG", "display_name": "LightMan", "link": "https://stackoverflow.com/users/404386/lightman"}, "edited": false, "score": 1, "creation_date": 1586342014, "post_id": 42768895, "comment_id": 108091223, "body": "associateTo only works with collections (your xs). That does not work if xs is a Map, as it is asked."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 19, "last_activity_date": 1491476589, "last_edit_date": 1491476589, "creation_date": 1489423068, "answer_id": 42768895, "question_id": 42768802, "link": "https://stackoverflow.com/questions/42768802/map-mapto-to-another-map/42768895#42768895", "title": "Map.mapTo to another map", "body": "<p>Use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/associate-to.html\" rel=\"noreferrer\"><code>associateTo</code></a> instead:</p>\n\n<pre><code>xs.associateTo(mutableMapOf&lt;String, Boolean&gt;(), { \"${it.key}\" to (it.value != 0) })\n</code></pre>\n\n<p><sup>Also, note the brackets around <code>it.value != 0</code>.</sup></p>\n\n<p>The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map-to.html\" rel=\"noreferrer\"><code>mapTo</code></a> function, similarly to <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map.html\" rel=\"noreferrer\"><code>map</code></a>, doesn't collect the results into a <code>Map</code>, but instead works with a <code>Collection</code>, expecting you to provide a <code>MutableCollection&lt;Pair&lt;String, Boolean&gt;&gt;</code>.</p>\n"}], "owner": {"reputation": 1325, "user_id": 4978624, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/854707784602530/picture?type=large", "display_name": "Viktor Sinelnikov", "link": "https://stackoverflow.com/users/4978624/viktor-sinelnikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3958, "favorite_count": 2, "accepted_answer_id": 42768895, "answer_count": 1, "score": 11, "last_activity_date": 1491476589, "creation_date": 1489422764, "question_id": 42768802, "link": "https://stackoverflow.com/questions/42768802/map-mapto-to-another-map", "title": "Map.mapTo to another map", "body": "<p>I want to map <code>Map&lt;DAO, Int&gt;</code> to <code>Map&lt;String, Boolean&gt;</code> but I can't return Map.Entry in map function:</p>\n\n<pre><code>itemsWithQuantity.mapTo(mutableMapOf&lt;String, Boolean&gt;(), { it.key.toString() to it.value != 0 })\n</code></pre>\n\n<p>(of course I am using more complex mapping function, but it doesn't matter, problem is same)</p>\n\n<p>It says </p>\n\n<pre><code>MutableMap&lt;String, Boolean&gt; is not a subtype of MutableCollection&lt;Pair&lt;String, Boolean&gt;&gt;.\n</code></pre>\n\n<p>So how can I return Map.Entry instead of Pair?</p>\n\n<p>Now I am doing it this way:</p>\n\n<pre><code>val detailsIds = mutableMapOf&lt;String, Boolean&gt;()\nitemsWithQuantity.forEach { item, quantity -&gt; detailsIds.put(it.key.toString(), it.value != 0) }\n</code></pre>\n\n<p>But I want to use mapTo</p>\n"}, {"tags": ["android", "unit-testing", "testing", "mockito", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 983, "user_id": 4958167, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1632640893647064/picture?type=large", "display_name": "Slava Sotone", "link": "https://stackoverflow.com/users/4958167/slava-sotone"}, "edited": false, "score": 0, "creation_date": 1489424411, "post_id": 42769060, "comment_id": 72654152, "body": "Thank you very much for help! I&#39;ve spend all day to fix that:)"}, {"owner": {"reputation": 983, "user_id": 4958167, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1632640893647064/picture?type=large", "display_name": "Slava Sotone", "link": "https://stackoverflow.com/users/4958167/slava-sotone"}, "edited": false, "score": 0, "creation_date": 1489424496, "post_id": 42769060, "comment_id": 72654205, "body": "I&#39;ve tried use mockMaker extension for mockito, that actually do the same, but it didn&#39;t work..."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 983, "user_id": 4958167, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1632640893647064/picture?type=large", "display_name": "Slava Sotone", "link": "https://stackoverflow.com/users/4958167/slava-sotone"}, "edited": false, "score": 0, "creation_date": 1489424543, "post_id": 42769060, "comment_id": 72654234, "body": "The extension solution works for me in some projects/modules, but not in others. No idea why it&#39;s so flaky. This one seems to be reliable so far."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 2, "last_activity_date": 1489423579, "creation_date": 1489423579, "answer_id": 42769060, "question_id": 42767781, "link": "https://stackoverflow.com/questions/42767781/android-mockito-uses-real-objects-instead-of-mock/42769060#42769060", "title": "Android. Mockito uses real objects instead of mock", "body": "<p>Alright, this is a good one. Here's what I found:</p>\n\n<p>The test code is not the problem, Mockito creates real (?) instances of the <code>Repository</code> for some reason. Or at least fails to intercept the method calls somewhere? </p>\n\n<p>Anyhow, Here's a completely stripped down example that reproduces the problem with <code>org.mockito:mockito-core:2.7.11</code>:</p>\n\n<pre><code>open class Greeter {\n    fun hello() = \"hello world\"\n}\n\nclass MockitoJavaExample {\n\n    @Test\n    fun test() {\n        val greeter: Greeter = mock()\n        println(greeter.hello()) // prints \"hello world\" which it shouldn't\n    }\n\n}\n</code></pre>\n\n<p>I'm not familiar enough with the internals of Mockito to tell you how this is happening, but switching to using <code>mockito-inline</code>, a different mocking method solves this. It also gives you the ability to mock non-<code>open</code> classes in Kotlin, which you might want anyway so that you don't have to open up your classes for extension just to test them. With this method, whether or not the class is open, you correctly get <code>null</code> returned by the function, so it doesn't use the real implementation.</p>\n\n<p>You can switch to the inline version of Mockito by using <code>compile 'org.mockito:mockito-inline:2.7.11'</code> instead of the <code>-core</code> version.</p>\n"}], "owner": {"reputation": 983, "user_id": 4958167, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1632640893647064/picture?type=large", "display_name": "Slava Sotone", "link": "https://stackoverflow.com/users/4958167/slava-sotone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "accepted_answer_id": 42769060, "answer_count": 1, "score": 1, "last_activity_date": 1489423579, "creation_date": 1489419818, "question_id": 42767781, "link": "https://stackoverflow.com/questions/42767781/android-mockito-uses-real-objects-instead-of-mock", "title": "Android. Mockito uses real objects instead of mock", "body": "<p>So, I've just writing simple test. \nThe problem is that test runner runs real 'Repository' class code instead of mock code...\nDo you have any idea why could I get an exception on this?</p>\n\n<p>Test class</p>\n\n<pre><code>class SingInFacebookPresenterTest {\n\n    @Mock\n    private lateinit var view: SignInFacebookContract.View\n\n    @Mock\n    private lateinit var repository: Repository\n\n    @Captor\n    private lateinit var callback: ArgumentCaptor&lt;RepositoryCallback.FacebookLoginImp&gt;\n\n    private lateinit var presenter: SingInFacebookPresenter\n\n    private val serverToken = \"token\"\n\n    @Before\n    fun init() {\n\n        MockitoAnnotations.initMocks(this)\n\n        presenter = SingInFacebookPresenter(MockContext(), repository, view)\n    }\n\n    @Test\n    fun facebook_login_success() {\n\n        //Given\n        val token = \"token\"\n        val serverToken = \"server token\"\n\n        presenter.loginViaFacebook(token)\n\n        //When\n        verify(repository).loginViaFacebook(token, callback.capture())\n\n\n        callback.value.onSuccess(serverToken)\n\n        //Then\n        verify(view).success(serverToken)\n    }\n</code></pre>\n\n<p>Presenter</p>\n\n<pre><code>class SingInFacebookPresenter(var context: Context, var repository: Repository, var view: SignInFacebookContract.View): SignInFacebookContract.Presenter {\n\n    public override fun loginViaFacebook(token: String) {\n        repository.loginViaFacebook(token, object : RepositoryCallback.FacebookLoginImp {\n            override fun onSuccess(token: String) {\n                view.success(token)\n            }\n\n            override fun onFailure() {\n                view.onFailure()\n            }\n\n        })\n    }\n</code></pre>\n\n<p>Repository</p>\n\n<pre><code>open class Repository(context: Context) {\n\n    init {\n        ApiHelper(context)\n    }\n\n    private var facebookLoginPresenterCallback: RepositoryCallback.FacebookLoginImp? = null\n\n    fun loginViaFacebook(token: String, facebookLoginPresenterCallback: RepositoryCallback.FacebookLoginImp?) {\n//        this.facebookLoginPresenterCallback = facebookLoginPresenterCallback\n        val signInResponse = ApiHelper.signInViaFacebook(token)\n//        signInResponse.enqueue(signInFacebookCallback)\n        signInResponse.enqueue(object : Callback&lt;SignInResponse&gt; {\n            override fun onResponse(call: Call&lt;SignInResponse&gt;?, response: Response&lt;SignInResponse&gt;?) {\n                if (response!!.isSuccessful) {\n                    val token = response.body()?.token ?: return\n                    facebookLoginPresenterCallback?.onSuccess(token)\n                    return\n                }\n                facebookLoginPresenterCallback?.onFailure()\n            }\n\n            override fun onFailure(call: Call&lt;SignInResponse&gt;?, t: Throwable?) {\n                facebookLoginPresenterCallback?.onFailure()\n            }\n        })\n    }\n\n    private val signInFacebookCallback = object : Callback&lt;SignInResponse&gt; {\n        override fun onResponse(call: Call&lt;SignInResponse&gt;?, response: Response&lt;SignInResponse&gt;?) {\n            if (response!!.isSuccessful) {\n                val token = response.body()?.token ?: return\n                facebookLoginPresenterCallback?.onSuccess(token)\n                return\n            }\n            facebookLoginPresenterCallback?.onFailure()\n        }\n\n        override fun onFailure(call: Call&lt;SignInResponse&gt;?, t: Throwable?) {\n            facebookLoginPresenterCallback?.onFailure()\n        }\n    }\n}\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>Exception in thread \"OkHttp Dispatcher\" java.lang.NoSuchMethodError: okhttp3.internal.Platform.log(Ljava/lang/String;)V\n    at okhttp3.logging.HttpLoggingInterceptor$Logger$1.log(HttpLoggingInterceptor.java:109)\n    at okhttp3.logging.HttpLoggingInterceptor.intercept(HttpLoggingInterceptor.java:157)\n    at okhttp3.RealCall$ApplicationInterceptorChain.proceed(RealCall.java:190)\n    at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:163)\n    at okhttp3.RealCall.access$100(RealCall.java:30)\n    at okhttp3.RealCall$AsyncCall.execute(RealCall.java:127)\n    at okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nException in thread \"OkHttp Dispatcher\" java.lang.NoSuchMethodError: okhttp3.internal.Platform.log(Ljava/lang/String;)V\n    at okhttp3.logging.HttpLoggingInterceptor$Logger$1.log(HttpLoggingInterceptor.java:109)\n    at okhttp3.logging.HttpLoggingInterceptor.intercept(HttpLoggingInterceptor.java:157)\n    at okhttp3.RealCall$ApplicationInterceptorChain.proceed(RealCall.java:190)\n    at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:163)\n    at okhttp3.RealCall.access$100(RealCall.java:30)\n    at okhttp3.RealCall$AsyncCall.execute(RealCall.java:127)\n    at okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\norg.mockito.exceptions.base.MockitoException: \nNo argument value was captured!\nYou might have forgotten to use argument.capture() in verify()...\n...or you used capture() in stubbing but stubbed method was not called.\nBe aware that it is recommended to use capture() only with verify()\n\nExamples of correct argument capturing:\n    ArgumentCaptor&lt;Person&gt; argument = ArgumentCaptor.forClass(Person.class);\n    verify(mock).doSomething(argument.capture());\n    assertEquals(\"John\", argument.getValue().getName());\n</code></pre>\n"}, {"tags": ["android", "android-viewpager", "kotlin"], "comments": [{"owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 0, "creation_date": 1489421040, "post_id": 42767657, "comment_id": 72651812, "body": "Are either of <code>setViewPagerInStateTwo()</code> or <code>resetViewPagerStyling()</code> being called when you swipe the <code>ViewPager</code>?"}, {"owner": {"reputation": 1564, "user_id": 1129647, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5b0dcd2a60e21a57484e643f685248c3?s=128&d=identicon&r=PG", "display_name": "TomTaila", "link": "https://stackoverflow.com/users/1129647/tomtaila"}, "reply_to_user": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 0, "creation_date": 1489421170, "post_id": 42767657, "comment_id": 72651898, "body": "@azizbekian Nope."}], "owner": {"reputation": 1564, "user_id": 1129647, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5b0dcd2a60e21a57484e643f685248c3?s=128&d=identicon&r=PG", "display_name": "TomTaila", "link": "https://stackoverflow.com/users/1129647/tomtaila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489419514, "creation_date": 1489419514, "question_id": 42767657, "link": "https://stackoverflow.com/questions/42767657/why-does-scrolling-a-viewpager-before-changing-its-padding-and-pagemargin-compl", "title": "Why does scrolling a ViewPager before changing it&#39;s padding and pagemargin completely jack it up?", "body": "<p>I want to be able to toggle my viewpager between two different states. One state where the fragment takes up the entire screen, and the second state where it shows previews of the fragments on either side. \nThe following is the desired effect: <a href=\"https://im2.ezgif.com/tmp/ezgif-2-d5afc38aa7.gif\" rel=\"nofollow noreferrer\">https://im2.ezgif.com/tmp/ezgif-2-d5afc38aa7.gif</a></p>\n\n<p>Notice that the gif is only for the first item in the viewpager. Watch what happens when I scroll to another item in the viewpager before attempting to switch states: <a href=\"https://im2.ezgif.com/tmp/ezgif-2-bf17757173.gif\" rel=\"nofollow noreferrer\">https://im2.ezgif.com/tmp/ezgif-2-bf17757173.gif</a>\nAs you can see I was on the item labelled \"2\" and it \"zoomed out\" to some incorrect point in the second state. </p>\n\n<p>The following is my code (in Kotlin):</p>\n\n<pre><code>fun setupListeners() {\n    btnTest.setOnClickListener {\n        TransitionManager.beginDelayedTransition(binding.viewPager)\n        if(stateTwo) {\n            resetViewPagerStyling()\n        } else {\n            setViewPagerStateTwo()\n        }\n\n        stateTwo = !stateTwo\n    }\n}\n\nfun setViewPagerInStateTwo() {\n    // Setup view pager to show siblings\n    viewPager.clipToPadding = false\n    // Setup margins to show pages to the side\n    viewPager.setPadding(100, 100, 100, 100)\n    viewPager.pageMargin = 50\n}\n\nfun resetViewPagerStyling() {\n    // Setup view pager to show siblings\n    viewPager.clipToPadding = true\n    // Reset margin and padding to 0\n    viewPager.setPadding(0, 0, 0, 0)\n    viewPager.pageMargin = 0\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "kotlin-extension"], "answers": [{"comments": [{"owner": {"reputation": 540, "user_id": 1763562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcf9d916a42d2a7a9668c1566a540022?s=128&d=identicon&r=PG", "display_name": "Big Kahuna", "link": "https://stackoverflow.com/users/1763562/big-kahuna"}, "edited": false, "score": 0, "creation_date": 1489399384, "post_id": 42753052, "comment_id": 72637189, "body": "Thanks for the comprehensive answer."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 18, "last_activity_date": 1489352087, "creation_date": 1489352087, "answer_id": 42753052, "question_id": 42752651, "link": "https://stackoverflow.com/questions/42752651/kotlin-extension-clash/42753052#42753052", "title": "Kotlin extension clash", "body": "<p>Indeed, if they're in the same package, it won't compile. For the other scenario, let's say you have two files with two different packages, containing extension functions with the same signature:</p>\n\n<p>First file:</p>\n\n<pre><code>package ext1\n\nfun Int.print() = print(this)\n</code></pre>\n\n<p>Second file:</p>\n\n<pre><code>package ext2\n\nfun Int.print() = print(this * 2)\n</code></pre>\n\n<p>And this file where you're trying to use it:</p>\n\n<pre><code>package main\n\nfun main(args: Array&lt;String&gt;) {\n    42.print()\n}\n</code></pre>\n\n<p>IntelliJ will actually give you an import dialog where you can choose which one you want to use:</p>\n\n<p><a href=\"https://i.stack.imgur.com/t8uL4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/t8uL4.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can import one of them like this:</p>\n\n<pre><code>import ext1.print\n</code></pre>\n\n<p>And if you need to use the other one as well, you can rename it with the <code>as</code> keyword. This keyword works for imports in general, classes with the same name, etc.</p>\n\n<pre><code>import ext2.print as print2\n</code></pre>\n\n<p>So this program compiles and prints <code>4284</code>:</p>\n\n<pre><code>package main\n\nimport ext1.print\nimport ext2.print as print2\n\nfun main(args: Array&lt;String&gt;) {\n    42.print()\n    42.print2()\n}\n</code></pre>\n\n<p>As a quick note, the one you import with the <code>as</code> keyword will be slightly harder to use, as autocomplete doesn't seem to pick it up well, selecting the second option here just completes the call to <code>42.print()</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/5CgMi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5CgMi.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 540, "user_id": 1763562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcf9d916a42d2a7a9668c1566a540022?s=128&d=identicon&r=PG", "display_name": "Big Kahuna", "link": "https://stackoverflow.com/users/1763562/big-kahuna"}, "edited": false, "score": 0, "creation_date": 1489399400, "post_id": 42753058, "comment_id": 72637197, "body": "Thanks for your answer"}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 5, "last_activity_date": 1489352121, "creation_date": 1489352121, "answer_id": 42753058, "question_id": 42752651, "link": "https://stackoverflow.com/questions/42752651/kotlin-extension-clash/42753058#42753058", "title": "Kotlin extension clash", "body": "<p>So since extension function in kotlin is just static function, other functions will be distinguish by import. </p>\n\n<p>Also you can make alias for one of extension functions for more readability:</p>\n\n<pre><code>import by.bkug.extensions.helpers.extension\nimport by.bkug.extensions.extension as extension1\n\nfun test() {\n    myType().extension() // by.bkug.extensions.helpers.extension\n    myType().extention1() // by.bkug.extensions.extension\n}\n</code></pre>\n"}], "owner": {"reputation": 540, "user_id": 1763562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcf9d916a42d2a7a9668c1566a540022?s=128&d=identicon&r=PG", "display_name": "Big Kahuna", "link": "https://stackoverflow.com/users/1763562/big-kahuna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 1, "answer_count": 2, "score": 8, "last_activity_date": 1489352121, "creation_date": 1489350118, "last_edit_date": 1489351363, "question_id": 42752651, "link": "https://stackoverflow.com/questions/42752651/kotlin-extension-clash", "title": "Kotlin extension clash", "body": "<p>If I have a jar, on the classpath, where I've created an extension function on say the String class for argument's sake and I have another jar with the same extension function on String, how will Kotlin resolve the two?</p>\n\n<p>I presume if both functions are defined in the same packages then there will be a clash?  </p>\n\n<p>But if different packages, how I can distinguish the two extensions?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 123, "user_id": 10821068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715a76ed48967bf6f1d945bae4ca6adb?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Kane", "link": "https://stackoverflow.com/users/10821068/harry-kane"}, "edited": false, "score": 0, "creation_date": 1571691685, "post_id": 42752322, "comment_id": 103318002, "body": "Im having the same issue. Have you figured out the error?"}], "owner": {"reputation": 2221, "user_id": 66611, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/i1e01.jpg?s=128&g=1", "display_name": "Jamol", "link": "https://stackoverflow.com/users/66611/jamol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1489348368, "creation_date": 1489348368, "question_id": 42752322, "link": "https://stackoverflow.com/questions/42752322/getting-a-subcomponent-instance-into-an-activity", "title": "Getting a subcomponent instance into an activity", "body": "<p><strong><code>AppComponent</code></strong>:</p>\n\n<pre><code>@PerApplication\n@Component(modules = arrayOf(AppModule::class))\ninterface AppComponent {\n}\n</code></pre>\n\n<hr>\n\n<p><strong><code>AppModule</code></strong>:</p>\n\n<pre><code>@Module(subcomponents = arrayOf(ActivityComponent::class))\nclass AppModule(private val context: Context) {\n\n  @Provides @PerApplication\n  fun provideContext() = context\n\n  @Provides @PerApplication\n  fun provideSharedPreferences(context: Context)\n      = context.getSharedPreferences(\"${context.packageName}.preferences\", Context.MODE_PRIVATE)\n\n  @Provides @PerApplication\n  fun provideMoshi() = Moshi.Builder().build()\n\n  @Provides @PerApplication\n  fun provideRetrofit(moshi: Moshi): Retrofit {\n    return Retrofit.Builder()\n        .baseUrl(\"https://reqres.in\")\n        .addConverterFactory(MoshiConverterFactory.create(moshi))\n            .addCallAdapterFactory(RxJavaCallAdapterFactory.createWithScheduler(Schedulers.io()))\n        .build()\n  }\n}\n</code></pre>\n\n<hr>\n\n<p><strong><code>ActivityComponent</code></strong>:</p>\n\n<pre><code>@PerActivity\n@Subcomponent(modules = arrayOf(ActivityModule::class))\ninterface ActivityComponent {\n\n  fun inject(activity: MainActivity)\n\n  @Subcomponent.Builder\n  interface Builder {\n    fun activityModule(module: ActivityModule): Builder\n    fun build(): ActivityComponent\n  }\n}\n</code></pre>\n\n<hr>\n\n<p><strong><code>ActivityModule</code></strong>:</p>\n\n<pre><code>@Module\nclass ActivityModule(private val activity: FragmentActivity) {\n\n  @Provides @PerActivity\n  fun provideActivity() = activity\n\n  @Provides @PerActivity\n  fun provideTestApi(retrofit: Retrofit) = retrofit.create(TestApi::class.java)\n}\n</code></pre>\n\n<p><strong>How do I get a Builder instance of <code>ActivityComponent</code> into <code>MainActivity</code>?</strong></p>\n\n<p>Activities are created by Dagger, so I can't inject a provider into the constructor like the example given in the <a href=\"https://google.github.io/dagger/subcomponents.html\" rel=\"noreferrer\">official docs</a>.</p>\n\n<p>I tried to use the pre dagger-2.7 way of creating subcomponents by add the following line to <code>AppComponent</code>:</p>\n\n<pre><code>fun activityComponent(module: ActivityModule): ActivityComponent\n</code></pre>\n\n<p>and in <code>MainActivity</code>:</p>\n\n<pre><code>(application as App).appComponent.activityComponent(ActivityModule(this)).inject(this)\n</code></pre>\n\n<p>which gave me:</p>\n\n<blockquote>\n  <p>Error:[com.example.injection.ActivityComponent.inject(com.example.modules.main.MainActivity)] com.example.api.TestApi cannot be provided without an @Provides-annotated method.</p>\n</blockquote>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3483, "user_id": 2668666, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3QEDd.jpg?s=128&g=1", "display_name": "jmrah", "link": "https://stackoverflow.com/users/2668666/jmrah"}, "edited": false, "score": 1, "creation_date": 1489348129, "post_id": 42751933, "comment_id": 72620735, "body": "I see.  If <code>NotANumber</code> was marked as a class, I would need to instantiate  it every time I needed to reference it.  That makes complete sense now, thank you."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 10, "last_activity_date": 1489346283, "creation_date": 1489346283, "answer_id": 42751933, "question_id": 42751782, "link": "https://stackoverflow.com/questions/42751782/what-is-the-purpose-of-a-object-declaration-inside-a-sealed-class-in-kotlin/42751933#42751933", "title": "What is the purpose of a Object Declaration inside a Sealed Class in Kotlin?", "body": "<p>Since it doesn't contain a significant value, the single instance of it can be reused everywhere. This saves you the creation cost of this object where you need it.</p>\n\n<p>Another example of this would be Kotlin's <code>Unit</code>, which is also just an <code>object</code>. </p>\n\n<p>This is just one of the examples of how you can avoid creating unnecessary instances that the garbage collector then has to clean up. Another example would be how the Java <code>BigInteger</code> class has final static fields for constants like <code>ZERO</code> and <code>ONE</code>. Although these do contain state, they are immutable, so they can be just one instance each that's reused and don't have to be re-created all the time.</p>\n"}], "owner": {"reputation": 3483, "user_id": 2668666, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3QEDd.jpg?s=128&g=1", "display_name": "jmrah", "link": "https://stackoverflow.com/users/2668666/jmrah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 42751933, "answer_count": 1, "score": 7, "last_activity_date": 1489346283, "creation_date": 1489345436, "question_id": 42751782, "link": "https://stackoverflow.com/questions/42751782/what-is-the-purpose-of-a-object-declaration-inside-a-sealed-class-in-kotlin", "title": "What is the purpose of a Object Declaration inside a Sealed Class in Kotlin?", "body": "<p>In the Kotiln documentation, they give the following example for sealed classes:</p>\n\n<pre><code>sealed class Expr {\n    class Const(val number: Double) : Expr()\n    class Sum(val e1: Expr, val e2: Expr) : Expr()\n    object NotANumber : Expr()\n}\n</code></pre>\n\n<p>What would be the use of delcaring <code>NotANumber</code> as a object declaration (singleton?) here?  Why not just write <code>class NotANumber : Expr()</code>?</p>\n"}, {"tags": ["reflection", "jvm", "kotlin"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1489335918, "post_id": 42748892, "comment_id": 72616166, "body": "Is your goal specifically to initialize all null properties with calls to the default, no parameter constructors of the classes you need in those places?"}, {"owner": {"reputation": 1211, "user_id": 4783965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ezsWKyHTPew/AAAAAAAAAAI/AAAAAAAADbE/nZ1PyKNEoWc/photo.jpg?sz=128", "display_name": "Ritave", "link": "https://stackoverflow.com/users/4783965/ritave"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1489342057, "post_id": 42748892, "comment_id": 72618582, "body": "That&#39;s right, all of them will be POJO (POKO?) classes"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 2, "creation_date": 1489342728, "post_id": 42748892, "comment_id": 72618820, "body": "I believe that there isn&#39;t currently a way to do this without making the <code>jvmErasure</code> call right now. I suppose that makes it the proper way."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 5, "last_activity_date": 1489391259, "creation_date": 1489391259, "answer_id": 42758655, "question_id": 42748892, "link": "https://stackoverflow.com/questions/42748892/what-is-a-proper-way-to-create-class-instance-from-ktype/42758655#42758655", "title": "What is a proper way to create class instance from KType", "body": "<p>You can use <code>(property.returnType.classifier as KClass).createInstance()</code> instead.</p>\n"}], "owner": {"reputation": 1211, "user_id": 4783965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ezsWKyHTPew/AAAAAAAAAAI/AAAAAAAADbE/nZ1PyKNEoWc/photo.jpg?sz=128", "display_name": "Ritave", "link": "https://stackoverflow.com/users/4783965/ritave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1061, "favorite_count": 1, "accepted_answer_id": 42758655, "answer_count": 1, "score": 6, "last_activity_date": 1489391259, "creation_date": 1489330530, "question_id": 42748892, "link": "https://stackoverflow.com/questions/42748892/what-is-a-proper-way-to-create-class-instance-from-ktype", "title": "What is a proper way to create class instance from KType", "body": "<p>I have two classes which might look like this</p>\n\n\n\n<pre><code>class MyClass {\n    var myProperty: AnotherClass?\n}\n\nclass AnotherClass {\n\n}\n</code></pre>\n\n<p>Through reflection I iterate the properties of MyClass and when I find a <code>KMutableProperty&lt;*&gt;</code> which is null I want to create an instance of that class. Right now I'm doing something like this</p>\n\n<pre><code>val instance = MyClass()\nval property = MyClass::myProperty\nvar subInstance = it.getter.call(instance)\nif (subInstance == null) {\n    it.setter.call(instance, property.returnType.jvmErasure.createInstance())\n}\n</code></pre>\n\n<p>but this seems like a terrible hack that needs to know internals and use Java magic instead of being pure Kotlin, is there a <em>proper</em> way to do what I want? Or is this the proper way?</p>\n"}, {"tags": ["java", "spring", "spring-data", "kotlin", "dao"], "comments": [{"owner": {"reputation": 6825, "user_id": 1262865, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1c93afaf48cdb37ee73b67acb533e63c?s=128&d=identicon&r=PG", "display_name": "john16384", "link": "https://stackoverflow.com/users/1262865/john16384"}, "edited": false, "score": 0, "creation_date": 1489320828, "post_id": 42747132, "comment_id": 72611281, "body": "You don&#39;t strictly need the Service.  You can use the DAO/Repository directly.  The Service can come in handy though if you want to translate the low-level database representation to a strict internal model (immutable &amp; asserted).  These models are more suitable for being processed by higher level layers (so you don&#39;t expose Database internals like ID&#39;s etc).  It depends on how big your application will be if you need this additional layering."}], "answers": [{"comments": [{"owner": {"reputation": 1938, "user_id": 1099093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbb34059dbba60ef1621a8a8aa1d3904?s=128&d=identicon&r=PG", "display_name": "Sterling Duchess", "link": "https://stackoverflow.com/users/1099093/sterling-duchess"}, "edited": false, "score": 0, "creation_date": 1489321888, "post_id": 42747251, "comment_id": 72611552, "body": "Oh wow thanks this is actually a very good explanation. So for instance in my case if you look at the first snippet I have 3 functions <code>getUsersScore</code> which is an algorithm that calculates users score based on 3 fields which are all part of User entity. So this method would stay here. But the other two: <code>assignUserToDevice()</code> which takes a Device entity and assigns user to it and <code>connectUserToService</code> which takes ex.: <code>MessagingService</code> class . These two methods would better fit into UserService."}, {"owner": {"reputation": 1938, "user_id": 1099093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbb34059dbba60ef1621a8a8aa1d3904?s=128&d=identicon&r=PG", "display_name": "Sterling Duchess", "link": "https://stackoverflow.com/users/1099093/sterling-duchess"}, "edited": false, "score": 0, "creation_date": 1489322137, "post_id": 42747251, "comment_id": 72611634, "body": "Tho than It would also make sense to reimplement the CRUD methods in the <code>UserService</code> no ? Since that way I avoid using both <code>UserRepository</code> and <code>UserService</code> in other parts of my code. It also makes testing easier. To just use <code>UserService</code> everywhere."}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 1, "last_activity_date": 1489320959, "creation_date": 1489320959, "answer_id": 42747251, "question_id": 42747132, "link": "https://stackoverflow.com/questions/42747132/why-do-i-need-a-repository-and-a-service-contract/42747251#42747251", "title": "Why do I need a repository and a service + contract", "body": "<p>The User is the entity. It basically represents a row from a table in the database. And it can definitely have methods. It's usually not a good idea to put methods that don't relate to that entity only in the entity class. Especially  not methods that would need access to external dependencies (like repositories or services).</p>\n\n<p>The Repository is the component allowing to execute queries related to a given entity, or to save new instances of that entity.</p>\n\n<p>The service is what contains the business logic. It can be as simple as simply delegating to a repository, but unless your app just consists in viewing information from the database, it often contains more complex logic, involving several entities and repositories.</p>\n\n<p>Separating the repository from the service is useful because it allows </p>\n\n<ul>\n<li>avoiding mixed responsibilities, </li>\n<li>testing the queries easily, without having to invoke complex logic using them</li>\n<li>testing the business logic easily and efficiently by mocking the repositories</li>\n<li>demarcating transaction boundaries: a service method is typically a transaction.</li>\n</ul>\n\n<p>Whether you use an interface or not to define the contract of your service is up to you. Spring doesn't force you to do that. You can also mix the service and the repository if you want to shoot yourself in the foot, but Spring doesn't encourage it, and you won't be able to do that if you use spring-data-jpa, which basically generates a repository implementation for you based on an interface.</p>\n\n<p>I don't know much about the frameworks you're used to, but you need to keep this in mind when thinking about the design of a spring app: Spring is a dependency injection framework, which thus consists in injecting components into other components. Entities are not Spring components, and thus can't be injected with the dependencies they would need if they contained business logic (which again, would mix responsibilities, IMO). And dependency injection itself is mainly useful to make the code \ntestable, and to be able to add aspects around method invocations (to start and commit transactions, for example). That's what drives the Spring design: single-responsibility principle, testability thanks to dependency injection, and .</p>\n"}], "owner": {"reputation": 1938, "user_id": 1099093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbb34059dbba60ef1621a8a8aa1d3904?s=128&d=identicon&r=PG", "display_name": "Sterling Duchess", "link": "https://stackoverflow.com/users/1099093/sterling-duchess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 42747251, "answer_count": 1, "score": 1, "last_activity_date": 1489320959, "creation_date": 1489320071, "question_id": 42747132, "link": "https://stackoverflow.com/questions/42747132/why-do-i-need-a-repository-and-a-service-contract", "title": "Why do I need a repository and a service + contract", "body": "<p>I'm new to Spring coming from PHP/Larvel, Ruby/Rails and Python/Django. Coming from these frameworks I'm used to only seeing the Model (Entity/Dao?) and everything else is handled by the Framework/ORM/QueryBuilders thus all there is for me to do is declare a model and add to it any operations/relations/methods I need.  </p>\n\n<p>In these frameworks this is all I would have:  </p>\n\n<pre><code>class User extends BaseModel\n{\n  public function devices() { .. } // Relation to Device model\n\n  // Any additional functions on user go here these can operate on \n  // just the User model or pull additional data from DB or other models.  \n  public function assignUserToDevice();\n  public function getUsersScore();\n  public function connectUserToService();\n}\n</code></pre>\n\n<p>However following this Spring tutorial I now have this:  </p>\n\n<p>Model (Entity/Dao ?): Only contains properties no methods except for GET/SET and relations.  </p>\n\n<pre><code>@Entity  \n@Table(name = \"users\")  \nclass User {\n  @Id\n  @GeneratedValue  \n  var id: Long = 0\n\n  var username: String = \"\" //...\n}\n</code></pre>\n\n<p>Repository:  </p>\n\n<pre><code>interface UserRepository : CrudRepository&lt;User, Long&gt; {\n  fun findByUsername(username: String): User\n}\n</code></pre>\n\n<p>UserServiceContract:  </p>\n\n<pre><code>interface UserServiceContract {\n\n    /**\n     * Attempts to find User associated with the given id.\n     * @throws ModelNotFoundException if not user has been found associated with the given id.\n     * @param id given users id.\n     * @return User associated with the given id.\n     */\n    @Throws(ModelNotFoundException::class)\n    fun find(id: Long): User\n\n    /**\n     * Returns all existing users.\n     * @return list of all existing users.\n     */\n    fun findAll(): List&lt;User&gt;\n}  \n</code></pre>\n\n<p>And a service:  </p>\n\n<pre><code>@Service\nclass UserService : UserServiceContract {\n\n    @Autowired\n    lateinit var userRepository: UserRepository\n\n    /**\n     * Attempts to find User associated with the given id.\n     * @throws ModelNotFoundException if not user has been found associated with the given id.\n     * @param id given users id.\n     * @return User associated with the given id.\n     */\n    override fun find(id: Long) = userRepository.findOne(id) ?: throw ModelNotFoundException(\"User not found!\")\n\n    override fun findAll(): List&lt;User&gt; {\n        throw UnsupportedOperationException(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n}  \n</code></pre>\n\n<p>Questions:  </p>\n\n<ol>\n<li><p>Why do I need a <code>UserRepository</code> and <code>UserService + UserServiceContract</code> ? From what I read on Spring guides on Repositories you already get the default <code>CRUD</code> methods <code>save, read, update, delete..</code> on top of that you also have query methods where you can do <code>findUserBy...</code> or write annotated raw queries. So I'm a bit confused why than declare a <code>UserServiceContract</code> and <code>UserService</code> just to implement that functionality which is already provided by the repository ?  </p></li>\n<li><p>Previously I would keep methods for working on/with my Model in said Model however as I noticed from few resources this is not where they go in Spring so where do I keep them ? Is this why there is a <code>UserService</code> and <code>UserServiceContract</code> ? \nShould I really use the <code>UserRepository</code> for database access only and in <code>UserServiceContract</code> declare methods for working on/with the User like: <code>public function connectUserToService()</code> ?</p></li>\n</ol>\n"}, {"tags": ["extension-methods", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1489323127, "post_id": 42747125, "comment_id": 72611921, "body": "There actually is a way to call a <i>public</i> member extension from outside the class: using an implicit receiver instance of that class."}], "tags": [], "owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "is_accepted": false, "score": 0, "last_activity_date": 1489320030, "creation_date": 1489320030, "answer_id": 42747125, "question_id": 42746965, "link": "https://stackoverflow.com/questions/42746965/how-do-i-call-extension-methods-from-outside-the-class-they-are-defined-in/42747125#42747125", "title": "How do I call extension methods from outside the class they are defined in?", "body": "<p>Your extension function is defined only inside of Base/Derived class. See <a href=\"https://kotlinlang.org/docs/reference/extensions.html#declaring-extensions-as-members\" rel=\"nofollow noreferrer\">Declaring Extensions as Members</a>.</p>\n\n<pre><code>abstract class Base {\n    abstract fun String.extension(x: Char)\n}\n\nclass Derived : Base() {\n    override fun String.extension(x: Char) {\n        // Calling lots of methods on String, hence extension method\n        println(\"${first()} $length ${last()} ${firstOrNull { it == x }} ...\")\n    }\n\n    fun callExtension(c: Char) {\n        \"hello\".extension(c)\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val base = Derived()\n    base.callExtension('h')\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1489391842, "post_id": 42747555, "comment_id": 72633143, "body": "What I meant is, not only extension <i>lambdas</i> but also extension <i>functions</i> can be used to provide the implicit receiver. Example: <code>fun C.inScope() = &quot;&quot;.extended()</code>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 21, "last_activity_date": 1490350498, "last_edit_date": 1495541442, "creation_date": 1489322742, "answer_id": 42747555, "question_id": 42746965, "link": "https://stackoverflow.com/questions/42746965/how-do-i-call-extension-methods-from-outside-the-class-they-are-defined-in/42747555#42747555", "title": "How do I call extension methods from outside the class they are defined in?", "body": "<p>First, note that an extension function defined as a member requires two receivers, one is an instance of the enclosing class (<em>dispatch receiver</em>, usually <code>this</code> of the enclosing class) and the other is the instance of the type that the function extends (<em>extension receiver</em>). This is documented <a href=\"https://kotlinlang.org/docs/reference/extensions.html#declaring-extensions-as-members\" rel=\"noreferrer\">here</a>.</p>\n\n<p>So, to call such a function from outside the class you have to provide two receivers. Kotlin <a href=\"https://youtrack.jetbrains.com/issue/KT-10468\" rel=\"noreferrer\">doesn't have any syntax</a> to do that explicitly like <code>(x, \"abc\").stringExtension()</code>, but you can provide the dispatch receiver implicitly using an <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-literals-with-receiver\" rel=\"noreferrer\">extension lambda</a>:</p>\n\n<pre><code>class C(val name: String) {\n    fun String.extended() = this + \" extended by \" + name\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val c = C(\"c\")\n    with(c) { println(\"abc\".extended()) }\n}\n</code></pre>\n\n<p><sup><a href=\"https://try.kotlinlang.org/#/UserProjects/o07cqupkc2lbv8d3d4vvm2t9in/6rc9a81na5ki85lc1kset35jkl\" rel=\"noreferrer\">(runnable demo of this code)</a></sup></p>\n\n<p>In the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/with.html\" rel=\"noreferrer\"><code>with(...) { ... }</code></a> block, <code>c</code> becomes the implicit receiver, thus allowing you to use it as a dispatch receiver in <code>C</code> member extensions. This would work with any other function that uses functional types with receivers: <code>apply</code>, <code>run</code>, <code>use</code> etc.</p>\n\n<p>In your case, it would be <code>with(o) { \"hello world\".extension('l') }</code></p>\n\n<p>As <a href=\"https://stackoverflow.com/users/615306/kirill-rakhman\">@KirillRakhman</a> noted, an extension receiver of an extension function for <code>C</code> can also be implicitly used as a dispatch receiver for the extensions defined inside <code>C</code>:</p>\n\n<pre><code>fun C.someExtension() = \"something\".extended()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 726, "user_id": 3577664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9843887a40dc67dee3666ea3034abde4?s=128&d=identicon&r=PG", "display_name": "JuniperPhoton", "link": "https://stackoverflow.com/users/3577664/juniperphoton"}, "is_accepted": false, "score": 1, "last_activity_date": 1492265821, "last_edit_date": 1492265821, "creation_date": 1492265518, "answer_id": 43427081, "question_id": 42746965, "link": "https://stackoverflow.com/questions/42746965/how-do-i-call-extension-methods-from-outside-the-class-they-are-defined-in/43427081#43427081", "title": "How do I call extension methods from outside the class they are defined in?", "body": "<p>To decale an extension method outside the class using it, you should <strong>NOT</strong> implement it inside a class, and you should do like this:</p>\n\n<pre><code>package com.sample.test\n\nimport java.io.File\n\nfun File.folderLength() : Long {\n    return 0L\n}\n</code></pre>\n\n<p>So in your class that call this method:</p>\n\n<pre><code>package com.sample.util\n\nimport com.sample.test.*\nimport java.io.File\n\nclass foo{\n    fun getFolderSize(url: String) : Long{\n        var file = new File(\"...\")\n        var length = file.folderLength()\n        return length\n    }\n}\n</code></pre>\n\n<p>Hope this should help you.</p>\n"}], "owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1711, "favorite_count": 3, "accepted_answer_id": 42747555, "answer_count": 3, "score": 11, "last_activity_date": 1492265821, "creation_date": 1489318947, "question_id": 42746965, "link": "https://stackoverflow.com/questions/42746965/how-do-i-call-extension-methods-from-outside-the-class-they-are-defined-in", "title": "How do I call extension methods from outside the class they are defined in?", "body": "<p>Here is a minimal example that demonstrates the problem:</p>\n\n<pre><code>abstract class Base {\n    abstract fun String.extension(x: Char)\n}\n\nclass Derived : Base() {\n    override fun String.extension(x: Char) {\n        // Calling lots of methods on String, hence extension method\n        println(\"${first()} $length ${last()} ${firstOrNull { it == x }} ...\")\n    }\n}\n</code></pre>\n\n<p>Calling the extension method from Java is trivial:</p>\n\n<pre><code>Base o = new Derived();\no.extension(\"hello world\", 'l');\n</code></pre>\n\n<p>But I can't figure out how to do it in pure Kotlin. Neither <code>String</code> nor <code>Base</code> seems to have the <code>extension</code> method.</p>\n"}, {"tags": ["java", "kotlin", "reification"], "answers": [{"comments": [{"owner": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "edited": false, "score": 2, "creation_date": 1551118426, "post_id": 42742119, "comment_id": 96514794, "body": "thanks a lot~ brb refactor java code bit by bit, to kotlin"}, {"owner": {"reputation": 181, "user_id": 14996499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b402833c71ecefa0bdbde42b3ae84568?s=128&d=identicon&r=PG&f=1", "display_name": "supergrecko", "link": "https://stackoverflow.com/users/14996499/supergrecko"}, "edited": false, "score": 0, "creation_date": 1616695892, "post_id": 42742119, "comment_id": 118090998, "body": "To make the conversion easier you can define an overload which consumes a Class&lt;T&gt; instead of the reified type in the implementation as an overload. <code>kotlin inline fun &lt;reified T&gt; help() = help(T::class.java); fun &lt;T&gt; help(cls: Class&lt;T&gt;) { ... } </code>  This way you may call it via a reified generic in Kotlin and using class object in Java`"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 32, "last_activity_date": 1514305098, "last_edit_date": 1514305098, "creation_date": 1489276741, "answer_id": 42742119, "question_id": 42741780, "link": "https://stackoverflow.com/questions/42741780/how-can-i-call-kotlin-methods-with-reified-generics-from-java/42742119#42742119", "title": "How can I call Kotlin methods with reified generics from Java?", "body": "<p>There's no way to call Kotlin <code>inline</code> functions with reified type parameters from Java because they must be transformed and inlined at the call sites (in your case, <code>T</code> should be substituted with the actual type at each call site, but there's much more compiler logic for <code>inline</code> functions than just this), and the Java compiler is, expectedly, completely unaware of that.</p>\n"}, {"tags": [], "owner": {"reputation": 15831, "user_id": 5925259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/89crf.jpg?s=128&g=1", "display_name": "Yogesh Umesh Vaity", "link": "https://stackoverflow.com/users/5925259/yogesh-umesh-vaity"}, "is_accepted": false, "score": 0, "last_activity_date": 1616684410, "creation_date": 1616684410, "answer_id": 66802177, "question_id": 42741780, "link": "https://stackoverflow.com/questions/42741780/how-can-i-call-kotlin-methods-with-reified-generics-from-java/66802177#66802177", "title": "How can I call Kotlin methods with reified generics from Java?", "body": "<p>The <code>inline</code> functions declared without <code>reified</code> type parameters can be called from Java as regular Java functions. But the ones declared with the <code>reified</code> type parameters are not callable from Java.</p>\n<p>Even if you call it using the reflection like following:</p>\n<pre><code>Method method = MyClass.class.getDeclaredMethod(&quot;foo&quot;, Object.class);\nmethod.invoke(new MyClass(), Object.class);\n</code></pre>\n<p>You get the <code>UnsupportedOperationException: This function has a reified type parameter and thus can only be inlined at compilation time, not called directly.</code></p>\n<p>If you have access to the code of the function, removing the <code>reified</code> modifier in some cases works. In other cases, you need to make adjustment to the code to overcome the type erasure.</p>\n"}], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3057, "favorite_count": 3, "accepted_answer_id": 42742119, "answer_count": 2, "score": 25, "last_activity_date": 1616684410, "creation_date": 1489273823, "question_id": 42741780, "link": "https://stackoverflow.com/questions/42741780/how-can-i-call-kotlin-methods-with-reified-generics-from-java", "title": "How can I call Kotlin methods with reified generics from Java?", "body": "<p>I have the following method in Kotlin:</p>\n\n<pre><code>inline fun &lt;reified T&gt; foo() {\n\n}\n</code></pre>\n\n<p>If I try to call this from Java like this:</p>\n\n<pre><code>myObject.foo();\n</code></pre>\n\n<p>OR like this:</p>\n\n<pre><code>myObject.&lt;SomeClass&gt;foo();\n</code></pre>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>java: foo() has private access in MyClass</p>\n</blockquote>\n\n<p>How can I call the <code>foo</code> method from Java?</p>\n"}, {"tags": ["java", "kotlin", "reification"], "answers": [{"comments": [{"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1489275162, "post_id": 42741850, "comment_id": 72601587, "body": "This will be fine, thank you. This is just a configuration class with final fields so I don&#39;t mind."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 8, "last_activity_date": 1489418185, "last_edit_date": 1495541368, "creation_date": 1489274420, "answer_id": 42741850, "question_id": 42741586, "link": "https://stackoverflow.com/questions/42741586/how-can-i-store-reified-type-data-in-instance-fields-in-kotlin/42741850#42741850", "title": "How can I store reified type data in instance fields in Kotlin?", "body": "<p>Public <code>inline</code> functions cannot use <code>private</code> declarations directly, because, when inlined at the call sites outside the class, the usages will have incorrect access level (on JVM, a <code>private</code> member of a class cannot be accessed from outside).</p>\n\n<p>What you can do is use <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html#visibility-modifiers\" rel=\"nofollow noreferrer\">the <code>internal</code> visibility</a> in Kotlin: on JVM, the members with this visibility modifier will be compiled into public members with their names mangled (therefore still visible but not easy-to-call from Java), and the Kotlin compiler will at least control the usages from the Kotlin code.</p>\n\n<p>There are a few ways to access an <code>internal</code> member from within a <code>public inline fun</code>, see this question: <a href=\"https://stackoverflow.com/questions/41892715/inline-function-cannot-access-non-public-api-publishedapi-vs-suppress-vs-jvm\">(link)</a></p>\n\n<p>In your particular case, I would prefer doing it with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-published-api/\" rel=\"nofollow noreferrer\"><code>@PublishedApi</code></a>:</p>\n\n<pre><code>private val consumers = mutableMapOf&lt;Class&lt;*&gt;, Any&gt;()\n\n@PublishedApi\ninternal fun &lt;T&gt; putConsumer(clazz: Class&lt;out T&gt;, consumer: (T) -&gt; Unit) {\n    consumers.put(clazz, consumer)\n}\n\ninline fun &lt;reified T&gt; consumerFor(noinline consumer: (T) -&gt; Unit): C {\n    putConsumer(T::class.java, consumer)\n    return this\n}\n</code></pre>\n\n<p>Or, if you don't mind exposing <code>consumers</code> with <code>@PublishedApi</code>, then you can do it as follows:</p>\n\n<pre><code>@PublishedApi\ninternal val consumers = mutableMapOf&lt;Class&lt;*&gt;, Any&gt;()\n\ninline fun &lt;reified T&gt; consumerFor(noinline consumer: (T) -&gt; Unit): C {\n    consumers.put(T::class.java, consumer)\n    return this\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1489284280, "last_edit_date": 1489284280, "creation_date": 1489283832, "answer_id": 42742864, "question_id": 42741586, "link": "https://stackoverflow.com/questions/42741586/how-can-i-store-reified-type-data-in-instance-fields-in-kotlin/42742864#42742864", "title": "How can I store reified type data in instance fields in Kotlin?", "body": "<p>If all that you need the reified type parameter for is to reflect its java class, then you can manage with a non-inline overload with additional <code>Class&lt;T&gt;</code> parameter.</p>\n\n<pre><code>inline fun &lt;reified T&gt; consumerFor(noinline consumer: (T) -&gt; Unit) =\n    consumerFor(T::class.java, consumer)\n\nfun &lt;T&gt; consumerFor(key: Class&lt;T&gt;, consumer: (T) -&gt; Unit) = apply {\n    consumers.put(key, consumer)\n}\n</code></pre>\n\n<p>This way you haven't expose <code>consumers</code> property effectively published. The bonus point is that you can call that non-inline overload also from Java.</p>\n"}], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "accepted_answer_id": 42741850, "answer_count": 2, "score": 7, "last_activity_date": 1489418185, "creation_date": 1489272513, "last_edit_date": 1489273834, "question_id": 42741586, "link": "https://stackoverflow.com/questions/42741586/how-can-i-store-reified-type-data-in-instance-fields-in-kotlin", "title": "How can I store reified type data in instance fields in Kotlin?", "body": "<p>I'm currently writing a DSL for a library and I'd like to supply type metadata using reified type parameters like this:</p>\n\n<pre><code>    val config = Config.create()\n            .consumerFor&lt;MyType&gt;{\n              // consume\n            }\n</code></pre>\n\n<p>My problem is that i can only use the <code>reified</code> keyword in <code>inline</code> functions and in an <code>inline</code> function I can't use instance fields like this:</p>\n\n<pre><code>    inline fun &lt;reified T&gt; consumerFor(consumer: (T) -&gt; Unit) {\n        consumers.put(T::class.java, consumer)\n        return this\n    }\n</code></pre>\n\n<p>because I get an error:</p>\n\n<blockquote>\n  <p>Public-API inline function cannot access non-public-API 'private final val consumers...</p>\n</blockquote>\n\n<p>It seems so far that I can't use reified type parameters where they would be most useful. Is there a workaround for this?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "edited": false, "score": 33, "creation_date": 1505485156, "post_id": 42740416, "comment_id": 79447402, "body": "For me this didn&#39;t work, I had to change it to <code>this::class.java.classLoader.getResource(&quot;&#47;html&#47;file.html&quot;).&zwnj;&#8203;readText()</code>"}, {"owner": {"reputation": 2398, "user_id": 2429928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Krw2n.jpg?s=128&g=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/2429928/franco"}, "edited": false, "score": 4, "creation_date": 1512527713, "post_id": 42740416, "comment_id": 82290983, "body": "For me both these options worked in an Android app (notice the extra <code>&#47;</code> in one of them, which has to be removed in the other): <code>this::class.java.getResource(&quot;&#47;html&#47;file.html&quot;).readText()</code> and <code>this::class.java.classLoader.getResource(&quot;html&#47;file.html&quot;).\u200c&zwnj;&#8203;\u200breadText()</code>"}, {"owner": {"reputation": 2365, "user_id": 4774054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LRst1.jpg?s=128&g=1", "display_name": "Frank Neblung", "link": "https://stackoverflow.com/users/4774054/frank-neblung"}, "edited": false, "score": 26, "creation_date": 1534847091, "post_id": 42740416, "comment_id": 90842436, "body": "<code>val fileContent = javaClass.getResource(&quot;&#47;html&#47;file.html&quot;).readText()</code> does the job even shorter"}, {"owner": {"reputation": 5826, "user_id": 535060, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Fqlon.jpg?s=128&g=1", "display_name": "Somaiah Kumbera", "link": "https://stackoverflow.com/users/535060/somaiah-kumbera"}, "edited": false, "score": 1, "creation_date": 1601976465, "post_id": 42740416, "comment_id": 113566584, "body": "Oddly enough I always need a leading slash. E.g if the file is in the resources root directory, you still have to refer to it as &quot;/file.html&quot;"}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 134, "last_activity_date": 1489265089, "creation_date": 1489265089, "answer_id": 42740416, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin/42740416#42740416", "title": "How to read a text file from resources in Kotlin?", "body": "<pre><code>val fileContent = MySpec::class.java.getResource(\"/html/file.html\").readText()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1156, "user_id": 1649917, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98f36daa955c06085670a76a55a246a6?s=128&d=identicon&r=PG&f=1", "display_name": "nmu", "link": "https://stackoverflow.com/users/1649917/nmu"}, "edited": false, "score": 0, "creation_date": 1504035333, "post_id": 42741135, "comment_id": 78852507, "body": "For some reason this didn&#39;t work for me. Only explicitly calling the class worked. Just adding for others. I think it has something to do with tornadofx"}, {"owner": {"reputation": 1275, "user_id": 931472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/opsDL.jpg?s=128&g=1", "display_name": "jkwuc89", "link": "https://stackoverflow.com/users/931472/jkwuc89"}, "edited": false, "score": 0, "creation_date": 1513002856, "post_id": 42741135, "comment_id": 82470944, "body": "After creating a test input file in <code>&#47;src&#47;test&#47;resources</code>,  <code>this.javaClass.getResource(&quot;&#47;&lt;test input filename&gt;&quot;)</code> worked as expected. Thanks for the solution above."}, {"owner": {"reputation": 553, "user_id": 5294432, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411c8d915e7ee7041d35fdf24ae0ca27?s=128&d=identicon&r=PG&f=1", "display_name": "minizibi", "link": "https://stackoverflow.com/users/5294432/minizibi"}, "edited": false, "score": 0, "creation_date": 1523192701, "post_id": 42741135, "comment_id": 86449080, "body": "what to do, if fileContent is not String and I won&#39;t create any dummy object?"}, {"owner": {"reputation": 1455, "user_id": 2649611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ff3b4b9e7a105dc104f8d76a0b31e92?s=128&d=identicon&r=PG", "display_name": "cakraww", "link": "https://stackoverflow.com/users/2649611/cakraww"}, "edited": false, "score": 1, "creation_date": 1533621260, "post_id": 42741135, "comment_id": 90400041, "body": "leading slash before the path seems mandatory here, whereas in Java I usually omit it."}], "tags": [], "owner": {"reputation": 2836, "user_id": 538318, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2faabe7a323cd83e8de4bcd254f217bc?s=128&d=identicon&r=PG", "display_name": "Olaf", "link": "https://stackoverflow.com/users/538318/olaf"}, "is_accepted": false, "score": 15, "last_activity_date": 1489269496, "creation_date": 1489269496, "answer_id": 42741135, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin/42741135#42741135", "title": "How to read a text file from resources in Kotlin?", "body": "<p>A slightly different solution:</p>\n\n<pre><code>class MySpec : Spek({\n    describe(\"blah blah\") {\n        given(\"blah blah\") {\n\n            var fileContent = \"\"\n\n            beforeEachTest {\n                html = this.javaClass.getResource(\"/html/file.html\").readText()\n            }\n\n            it(\"should blah blah\") {\n                ...\n            }\n        }\n    }\n})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1012, "user_id": 2448440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e087e22595668ec941533856e078bad?s=128&d=identicon&r=PG", "display_name": "Qw3ry", "link": "https://stackoverflow.com/users/2448440/qw3ry"}, "edited": false, "score": 0, "creation_date": 1561535293, "post_id": 45403183, "comment_id": 100091347, "body": "Nice usage of an extension function! But why do you use a lambda function here? That does not make much sense to me. Furthermore, the <code>this</code> part did not work for me. Thus I recommend the following: <code>fun String.asResource(): URL? = object {}.javaClass.getResource(this)</code>"}, {"owner": {"reputation": 2852, "user_id": 642389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e94c71eefa1583686434e57e2dee1edc?s=128&d=identicon&r=PG", "display_name": "jhodges", "link": "https://stackoverflow.com/users/642389/jhodges"}, "reply_to_user": {"reputation": 1012, "user_id": 2448440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e087e22595668ec941533856e078bad?s=128&d=identicon&r=PG", "display_name": "Qw3ry", "link": "https://stackoverflow.com/users/2448440/qw3ry"}, "edited": false, "score": 0, "creation_date": 1562962897, "post_id": 45403183, "comment_id": 100559268, "body": "I like this method of working on it where you declare the file, then work on the contents of that file. Personal preference I guess. <code>this</code> in the example above refers to the string object."}, {"owner": {"reputation": 3013, "user_id": 1188047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs94t.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1188047/ben"}, "edited": false, "score": 4, "creation_date": 1581949960, "post_id": 45403183, "comment_id": 106598115, "body": "that&#39;s terrible abuse of extension function. Loading files is not a concern of String class."}, {"owner": {"reputation": 2852, "user_id": 642389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e94c71eefa1583686434e57e2dee1edc?s=128&d=identicon&r=PG", "display_name": "jhodges", "link": "https://stackoverflow.com/users/642389/jhodges"}, "edited": false, "score": 2, "creation_date": 1582047810, "post_id": 45403183, "comment_id": 106639297, "body": "it is in this context. i wouldn&#39;t make this globally available or use it outside of test classes. I consider it more of a mapping function here."}, {"owner": {"reputation": 186666, "user_id": 5486, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/750159e9cdab58c4b6547d382311c9af?s=128&d=identicon&r=PG", "display_name": "Ryan Lundy", "link": "https://stackoverflow.com/users/5486/ryan-lundy"}, "reply_to_user": {"reputation": 3013, "user_id": 1188047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs94t.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1188047/ben"}, "edited": false, "score": 0, "creation_date": 1613990692, "post_id": 45403183, "comment_id": 117237724, "body": "@Ben Use of extension functions and extension properties is by definition an abuse, since it pretends to add members to a class it doesn&#39;t have internal access to.  If you don&#39;t like it, don&#39;t use it.  Some of us are focused on making our code more straightforward rather than worrying about OO purity."}, {"owner": {"reputation": 3013, "user_id": 1188047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs94t.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1188047/ben"}, "reply_to_user": {"reputation": 186666, "user_id": 5486, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/750159e9cdab58c4b6547d382311c9af?s=128&d=identicon&r=PG", "display_name": "Ryan Lundy", "link": "https://stackoverflow.com/users/5486/ryan-lundy"}, "edited": false, "score": 0, "creation_date": 1614010308, "post_id": 45403183, "comment_id": 117246933, "body": "@RyanLundy no it&#39;s not, extension functions are perfectly ok in OOP. The whole idea of extension function is that it does not break encapsulation and remains a pure function, <b>T.x()</b> is just a normalized version of <b>x(T)</b>. The problem with your code snippet is not that it uses extension function, but that it breaks domain boundaries"}, {"owner": {"reputation": 2852, "user_id": 642389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e94c71eefa1583686434e57e2dee1edc?s=128&d=identicon&r=PG", "display_name": "jhodges", "link": "https://stackoverflow.com/users/642389/jhodges"}, "reply_to_user": {"reputation": 3013, "user_id": 1188047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs94t.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1188047/ben"}, "edited": false, "score": 0, "creation_date": 1618328840, "post_id": 45403183, "comment_id": 118566422, "body": "@Ben how though? is this an impure function? i could write <i>asResource(filename)</i> just as well."}, {"owner": {"reputation": 3013, "user_id": 1188047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs94t.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1188047/ben"}, "edited": false, "score": 0, "creation_date": 1618392841, "post_id": 45403183, "comment_id": 118585485, "body": "@jhodges that&#39;s not the point. I&#39;m not implying that your function is impure, I&#39;m implying that it breaks separation of concern. It&#39;s not cohesive for the <i>String</i> to handle classloader. <code>fun asResource(path:String, work: (String) -&gt; Unit)</code> is the proper signature. ////  Extension functions are ok in OOP, in fact, they are way better than the hack that &quot;default&quot; keyword is, however they often confuse developers as you can seemingly implement methods where they don&#39;t belong. Great feature requires great care"}], "tags": [], "owner": {"reputation": 2852, "user_id": 642389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e94c71eefa1583686434e57e2dee1edc?s=128&d=identicon&r=PG", "display_name": "jhodges", "link": "https://stackoverflow.com/users/642389/jhodges"}, "is_accepted": false, "score": 31, "last_activity_date": 1501438979, "creation_date": 1501438979, "answer_id": 45403183, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin/45403183#45403183", "title": "How to read a text file from resources in Kotlin?", "body": "<p>another slightly different solution:</p>\n\n<pre><code>@Test\nfun basicTest() {\n    \"/html/file.html\".asResource {\n        // test on `it` here...\n        println(it)\n    }\n\n}\n\nfun String.asResource(work: (String) -&gt; Unit) {\n    val content = this.javaClass::class.java.getResource(this).readText()\n    work(content)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1256, "user_id": 4889030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B41A3.jpg?s=128&g=1", "display_name": "andrewgazelka", "link": "https://stackoverflow.com/users/4889030/andrewgazelka"}, "edited": false, "score": 1, "creation_date": 1556657176, "post_id": 53018129, "comment_id": 98510500, "body": "is <code>{}</code> required? Why not just <code>javaClass.getResource(path).readText()</code>?"}, {"owner": {"reputation": 505, "user_id": 4415186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd543726f143499fb5c2d1e893cc3b96?s=128&d=identicon&r=PG&f=1", "display_name": "Russell Briggs", "link": "https://stackoverflow.com/users/4415186/russell-briggs"}, "reply_to_user": {"reputation": 1256, "user_id": 4889030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B41A3.jpg?s=128&g=1", "display_name": "andrewgazelka", "link": "https://stackoverflow.com/users/4889030/andrewgazelka"}, "edited": false, "score": 2, "creation_date": 1556828200, "post_id": 53018129, "comment_id": 98570905, "body": "javaClass must be called on an object according to the docs <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java-class.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java-class.h&zwnj;&#8203;tml</a>  If it works without then go for ya life :)"}, {"owner": {"reputation": 505, "user_id": 4415186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd543726f143499fb5c2d1e893cc3b96?s=128&d=identicon&r=PG&f=1", "display_name": "Russell Briggs", "link": "https://stackoverflow.com/users/4415186/russell-briggs"}, "reply_to_user": {"reputation": 1256, "user_id": 4889030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B41A3.jpg?s=128&g=1", "display_name": "andrewgazelka", "link": "https://stackoverflow.com/users/4889030/andrewgazelka"}, "edited": false, "score": 3, "creation_date": 1556828391, "post_id": 53018129, "comment_id": 98570978, "body": "One downside with the method above is it creates a new object for every resource access.  Would be better to store the dummy object outside the function."}, {"owner": {"reputation": 1012, "user_id": 2448440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e087e22595668ec941533856e078bad?s=128&d=identicon&r=PG", "display_name": "Qw3ry", "link": "https://stackoverflow.com/users/2448440/qw3ry"}, "edited": false, "score": 0, "creation_date": 1561535414, "post_id": 53018129, "comment_id": 100091402, "body": "@RussellBriggs tbh I don&#39;t think that matters much. The performance of an object creation is not really an issue if you do disk access!"}], "tags": [], "owner": {"reputation": 505, "user_id": 4415186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd543726f143499fb5c2d1e893cc3b96?s=128&d=identicon&r=PG&f=1", "display_name": "Russell Briggs", "link": "https://stackoverflow.com/users/4415186/russell-briggs"}, "is_accepted": false, "score": 35, "last_activity_date": 1540605757, "creation_date": 1540605757, "answer_id": 53018129, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin/53018129#53018129", "title": "How to read a text file from resources in Kotlin?", "body": "<p>No idea why this is so hard, but the simplest way I've found (without having to refer to a particular class) is:</p>\n\n<pre><code>fun getResourceAsText(path: String): String {\n    return object {}.javaClass.getResource(path).readText()\n}\n</code></pre>\n\n<p>And then passing in an absolute URL, e.g.</p>\n\n<pre><code>val html = getResourceAsText(\"/www/index.html\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 632, "user_id": 1499171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mARXO.jpg?s=128&g=1", "display_name": "jivimberg", "link": "https://stackoverflow.com/users/1499171/jivimberg"}, "is_accepted": false, "score": 5, "last_activity_date": 1552370708, "creation_date": 1552370708, "answer_id": 55115079, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin/55115079#55115079", "title": "How to read a text file from resources in Kotlin?", "body": "<pre><code>val fileContent = javaClass.getResource(\"/html/file.html\").readText()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26227, "user_id": 1429387, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/LVOVA.jpg?s=128&g=1", "display_name": "naXa", "link": "https://stackoverflow.com/users/1429387/naxa"}, "is_accepted": false, "score": 9, "last_activity_date": 1553889891, "creation_date": 1553889891, "answer_id": 55424801, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin/55424801#55424801", "title": "How to read a text file from resources in Kotlin?", "body": "<p>Kotlin + Spring way:</p>\n\n<pre class=\"lang-kt prettyprint-override\"><code>@Autowired\nprivate lateinit var resourceLoader: ResourceLoader\n\nfun load() {\n    val html = resourceLoader.getResource(\"classpath:html/file.html\").file\n        .readText(charset = Charsets.UTF_8)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3013, "user_id": 1188047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs94t.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1188047/ben"}, "edited": false, "score": 7, "creation_date": 1581281512, "post_id": 55471983, "comment_id": 106369537, "body": "This answer is misleading. That does not load a &quot;resource&quot; but loads file straight from file system, instead of the classpath. It will no longer work after application is assembled as you will try to refer to nonexisting files, instead of loading them from the jar file."}, {"owner": {"reputation": 374, "user_id": 4942014, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153251413818805/picture?type=large", "display_name": "Krzysztof Ziomek", "link": "https://stackoverflow.com/users/4942014/krzysztof-ziomek"}, "reply_to_user": {"reputation": 3013, "user_id": 1188047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs94t.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1188047/ben"}, "edited": false, "score": 0, "creation_date": 1581515630, "post_id": 55471983, "comment_id": 106460234, "body": "@ben Thanks for your comment. Question was about reading file from resource in kotlin Spek test."}], "tags": [], "owner": {"reputation": 374, "user_id": 4942014, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153251413818805/picture?type=large", "display_name": "Krzysztof Ziomek", "link": "https://stackoverflow.com/users/4942014/krzysztof-ziomek"}, "is_accepted": false, "score": 0, "last_activity_date": 1554199299, "creation_date": 1554199299, "answer_id": 55471983, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin/55471983#55471983", "title": "How to read a text file from resources in Kotlin?", "body": "<p>You might find the File class useful:</p>\n\n<pre><code>import java.io.File\n\nfun main(args: Array&lt;String&gt;) {\n  val content = File(\"src/main/resources/input.txt\").readText()\n  print(content)\n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10085, "user_id": 211369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f839749ed17ce68045d9e130ea7937bb?s=128&d=identicon&r=PG", "display_name": "Nishi", "link": "https://stackoverflow.com/users/211369/nishi"}, "edited": false, "score": 1, "creation_date": 1567012730, "post_id": 56265984, "comment_id": 101838735, "body": "it is nice that Guave reports a file name if resource is not found - much better for troubleshooting"}], "tags": [], "owner": {"reputation": 17430, "user_id": 355438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb132c7de803cf864996a922a073e5f2?s=128&d=identicon&r=PG", "display_name": "Lu55", "link": "https://stackoverflow.com/users/355438/lu55"}, "is_accepted": false, "score": 6, "last_activity_date": 1558565683, "creation_date": 1558565683, "answer_id": 56265984, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin/56265984#56265984", "title": "How to read a text file from resources in Kotlin?", "body": "<p>Using Google Guava library <a href=\"https://google.github.io/guava/releases/27.0-jre/api/docs/com/google/common/io/Resources.html#getResource-java.lang.String-\" rel=\"noreferrer\">Resources class</a>:</p>\n\n<pre><code>import com.google.common.io.Resources;\n\nval fileContent: String = Resources.getResource(\"/html/file.html\").readText()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2836, "user_id": 538318, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2faabe7a323cd83e8de4bcd254f217bc?s=128&d=identicon&r=PG", "display_name": "Olaf", "link": "https://stackoverflow.com/users/538318/olaf"}, "is_accepted": false, "score": 5, "last_activity_date": 1587479092, "creation_date": 1587479092, "answer_id": 61345914, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin/61345914#61345914", "title": "How to read a text file from resources in Kotlin?", "body": "<pre><code>private fun loadResource(file: String) = {}::class.java.getResource(file).readText()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 1781499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pmgse.jpg?s=128&g=1", "display_name": "saidaspen", "link": "https://stackoverflow.com/users/1781499/saidaspen"}, "is_accepted": false, "score": 3, "last_activity_date": 1597032603, "creation_date": 1597032603, "answer_id": 63334024, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin/63334024#63334024", "title": "How to read a text file from resources in Kotlin?", "body": "<p>This is the way that I prefer to do it:</p>\n<pre><code>fun getResourceText(path: String): String {\n    return File(ClassLoader.getSystemResource(path).file).readText()\n}\n</code></pre>\n"}], "owner": {"reputation": 2836, "user_id": 538318, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2faabe7a323cd83e8de4bcd254f217bc?s=128&d=identicon&r=PG", "display_name": "Olaf", "link": "https://stackoverflow.com/users/538318/olaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86182, "favorite_count": 9, "accepted_answer_id": 42740416, "answer_count": 10, "score": 114, "last_activity_date": 1597032603, "creation_date": 1489261556, "question_id": 42739807, "link": "https://stackoverflow.com/questions/42739807/how-to-read-a-text-file-from-resources-in-kotlin", "title": "How to read a text file from resources in Kotlin?", "body": "<p>I want to write a Spek test in Kotlin. The test should read an HTML file from the <code>src/test/resources</code> folder. How to do it?</p>\n\n<pre><code>class MySpec : Spek({\n\n    describe(\"blah blah\") {\n\n        given(\"blah blah\") {\n\n            var fileContent : String = \"\"\n\n            beforeEachTest {\n                // How to read the file file.html in src/test/resources/html\n                fileContent = ...  \n            }\n\n            it(\"should blah blah\") {\n                ...\n            }\n        }\n    }\n})\n</code></pre>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 1211, "user_id": 4783965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ezsWKyHTPew/AAAAAAAAAAI/AAAAAAAADbE/nZ1PyKNEoWc/photo.jpg?sz=128", "display_name": "Ritave", "link": "https://stackoverflow.com/users/4783965/ritave"}, "edited": false, "score": 1, "creation_date": 1489250865, "post_id": 42737499, "comment_id": 72593683, "body": "GSON doesn&#39;t allow serializing functions, and by extension getters/setters which delegates are. One possible solution is to make a unitEnum a delegate which on updates also update the unit string.  <code>var unitEnum: WeightUnit by EnumStringUpdate(WeightUnit::class.java).getDelegate(Weight:&zwnj;&#8203;:unit)</code>"}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 1, "creation_date": 1489253895, "post_id": 42737499, "comment_id": 72594809, "body": "<code>::class.java</code> is deprecated, use <code>.javaClass</code>"}], "answers": [{"comments": [{"owner": {"reputation": 934, "user_id": 1815209, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6cbca63e8eae12b8959f53c6e4e5133?s=128&d=identicon&r=PG", "display_name": "quezak", "link": "https://stackoverflow.com/users/1815209/quezak"}, "edited": false, "score": 0, "creation_date": 1489257292, "post_id": 42738405, "comment_id": 72596012, "body": "This is the obvious solution, I know this would work, but take a look at the previous question I linked above, about why I don&#39;t want to do that :) <a href=\"https://stackoverflow.com/questions/41651507/firebase-clean-way-for-using-enum-fields-in-kotlin-java\" title=\"firebase clean way for using enum fields in kotlin java\">stackoverflow.com/questions/41651507/&hellip;</a>  In short: (1) I have enum fields which don&#39;t convert directly as you posted, (2) I have lots of those fields and don&#39;t want to repeat code, (3) I have fields to convert that are more complicated than simple enum."}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "reply_to_user": {"reputation": 934, "user_id": 1815209, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6cbca63e8eae12b8959f53c6e4e5133?s=128&d=identicon&r=PG", "display_name": "quezak", "link": "https://stackoverflow.com/users/1815209/quezak"}, "edited": false, "score": 1, "creation_date": 1489259017, "post_id": 42738405, "comment_id": 72596584, "body": "@quezak I would stick with <code>@StringDef</code> annotation, just hate enums (: Also, think about creating methods <code>toMap()</code> and <code>fromMap()</code> instead of serializing/deserializing using built-in firebase methods"}, {"owner": {"reputation": 934, "user_id": 1815209, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6cbca63e8eae12b8959f53c6e4e5133?s=128&d=identicon&r=PG", "display_name": "quezak", "link": "https://stackoverflow.com/users/1815209/quezak"}, "edited": false, "score": 0, "creation_date": 1489262926, "post_id": 42738405, "comment_id": 72597809, "body": "yeah, I&#39;m now working on a generic <code>toMap()</code> and <code>fromMap()</code> that will suit my case. The advantage is no doubled fields in model classes. The downside may be the whole model needs to be converted on read/write, not just the enum fields -- but for now my models are small enough that this shouldn&#39;t be an issue. (and firebase probably does some processing anyway, with similar compleixity)"}], "tags": [], "owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "is_accepted": false, "score": 0, "last_activity_date": 1489253690, "creation_date": 1489253690, "answer_id": 42738405, "question_id": 42737499, "link": "https://stackoverflow.com/questions/42737499/firebase-db-models-with-kotlin-delegated-properties/42738405#42738405", "title": "firebase db: models with Kotlin delegated properties", "body": "<p>Try this code, it should work.</p>\n\n<pre><code>@get:Exclude @set:Exclude\nvar unitEnum: WeightUnit = WeightUnit.KG\nvar unit: String\n    get() = unitEnum.name\n    set(v) { unitEnum = WeightUnit.valueOf(v) }\n</code></pre>\n"}], "owner": {"reputation": 934, "user_id": 1815209, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6cbca63e8eae12b8959f53c6e4e5133?s=128&d=identicon&r=PG", "display_name": "quezak", "link": "https://stackoverflow.com/users/1815209/quezak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 892, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1489263783, "creation_date": 1489248875, "last_edit_date": 1489263783, "question_id": 42737499, "link": "https://stackoverflow.com/questions/42737499/firebase-db-models-with-kotlin-delegated-properties", "title": "firebase db: models with Kotlin delegated properties", "body": "<p>I'm using Kotlin objects to work with my Firebase Database models, as described <a href=\"https://firebase.google.com/docs/database/android/read-and-write#basic_write\" rel=\"nofollow noreferrer\">in the guide</a>. I have many fields that are stored as strings, but really are enums, so to be type-safe I have enum fields in the models, plus a string delegated property that returns the firebase stored value (as suggested in <a href=\"https://stackoverflow.com/questions/41651507/firebase-clean-way-for-using-enum-fields-in-kotlin-java\">a question I asked</a> some time ago). Now, these fields work if I get/set the string delegate in code, but firebase libs seem to skip them when converting to/from database's json format.</p>\n\n<p>A simple example:</p>\n\n<pre><code>abstract class BaseModel {\n    @Exclude\n    open var path: String? = null  // fails even if I delete this field!\n}\n\nclass Weight() : BaseModel() {\n    constructor(v: Double, u: WeightUnit) : this() {\n        value = v\n        unitEnum = u\n    }\n\n    var value: Double = 0.0\n    @Exclude\n    var unitEnum: WeightUnit = WeightUnit.KG\n    var unit: String by EnumStringLowercaseConverter(WeightUnit::class.java).getDelegate(Weight::unitEnum)\n\n}\n\n[...]\nval testWeight = Weight(7.0, \"kg\")\ndb.getReference(\"/valid/path/to/save/testWeight\").setValue(testWeight)\n            .addOnSuccessListener { r -&gt; Log.d(LOG_TAG, \"set successful\") }\n            .addOnFailureListener { e -&gt; Log.e(LOG_TAG, \"set error\", e) }\n</code></pre>\n\n<p>The <code>setValue</code> always gives a <code>Permission Denied</code> error, but works, if I delete <code>unitEnum</code> field and make <code>unit</code> a normal <code>String</code> property.</p>\n\n<p>It's similar for reading: Firebase gives no errors when getting a Weight object, but the <code>weightUnit</code> field is never set to anything else than the default. But, if I manually do <code>weight.unit = \"lb\"</code>, the <code>unitEnum</code> field properly returns <code>WeightUnit.LB</code>.</p>\n\n<p>I'm using firebase libs v10.0.1</p>\n\n<p>Now, the questions:</p>\n\n<ul>\n<li>What can I do to make the delegated properties work correctly with firebase? I can try a different approach to the delegated enum fields, as long as the points from <a href=\"https://stackoverflow.com/questions/41651507/firebase-clean-way-for-using-enum-fields-in-kotlin-java\">my original question</a> are satisfied (readable, concise and type-safe code).</li>\n<li>is there any way to see how <strong>exactly</strong> do firebase libs convert objects to/from json? Or at least see the converted json? Maybe then I could tweak things myself. Unfortunately, everything firebase-related shows as <code>/* compiled code */</code> in AndroidStudio.</li>\n</ul>\n\n<p><strong>UPDATE</strong>: I could of course add a <code>toMap()</code> method to each model, where I would construct a map containing all the properties needed in firebase, but it would be tiresome to do this for every model, and it solves the saving issue only, the enum fields still wouldn't be set when getting.</p>\n\n<p>The delegated props are also skipped when serializing with GSON. So maybe is there a generic way to make the delegated properties look like regular fields?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7539473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8063c58b6c4e51279dd3fedf6ab86650?s=128&d=identicon&r=PG&f=1", "display_name": "user7539473", "link": "https://stackoverflow.com/users/7539473/user7539473"}, "edited": false, "score": 0, "creation_date": 1489755644, "post_id": 42738607, "comment_id": 72822472, "body": "Now get error with binom.kt: binom.kt:8:16: error: unresolved reference: forOdd         (1..n).forOdd { result = result * it }                ^ binom.kt:8:43: error: unresolved reference: it         (1..n).forOdd { result = result * it }"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": false, "score": 3, "last_activity_date": 1489254841, "creation_date": 1489254841, "answer_id": 42738607, "question_id": 42735175, "link": "https://stackoverflow.com/questions/42735175/kotlin-javascript-library-files-invalid-argument/42738607#42738607", "title": "Kotlin Javascript -library-files invalid argument", "body": "<p>This option has been renamed to <code>-libraries</code> before JavaScript support has been released as a part of Kotlin 1.1. This part of the tutorial is not up-to-date yet, I'll fix it.</p>\n"}], "owner": {"reputation": 43, "user_id": 7539473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8063c58b6c4e51279dd3fedf6ab86650?s=128&d=identicon&r=PG&f=1", "display_name": "user7539473", "link": "https://stackoverflow.com/users/7539473/user7539473"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489254841, "creation_date": 1489235158, "question_id": 42735175, "link": "https://stackoverflow.com/questions/42735175/kotlin-javascript-library-files-invalid-argument", "title": "Kotlin Javascript -library-files invalid argument", "body": "<p>Following instruction here:\n   <a href=\"https://kotlinlang.org/docs/tutorials/command-line-library-js.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/tutorials/command-line-library-js.html</a>\nbut getting <strong>Invalid argument: -library-files</strong> when compiling. I am not sure where I did wrong. Any help appreciated.</p>\n\n<p>Compiler obtained from <a href=\"https://github.com/JetBrains/kotlin/releases/tag/v1.1\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlin/releases/tag/v1.1</a></p>\n\n<p>kotlin-compiler-1.1.zip</p>\n\n<pre><code>kotlinc-js -output binom.js -library-files sample-library.jar binom.kt\n\nInvalid argument: -library-files\nUsage: kotlinc-js &lt;options&gt; &lt;source files&gt;\nwhere possible options include:\n  -output &lt;path&gt;             Output file path\n  -no-stdlib                 Don't use bundled Kotlin stdlib\n  -libraries &lt;path&gt;          Paths to Kotlin libraries with .meta.js and .kjsm files, separated by system file separator\n  -source-map                Generate source map\n  -meta-info                 Generate .meta.js and .kjsm files with metadata. Use to create a library\n  -target { v5 }             Generate JS files for specific ECMA version\n  -module-kind { plain, amd, commonjs, umd }\n                         Kind of a module generated by compiler\n  -main {call,noCall}        Whether a main function should be called\n  -output-prefix &lt;path&gt;      Path to file which will be added to the beginning of output file\n  -output-postfix &lt;path&gt;     Path to file which will be added to the end of output file\n  -language-version &lt;version&gt; Provide source compatibility with specified language version\n  -api-version &lt;version&gt;     Allow to use declarations only from the specified version of bundled libraries\n  -nowarn                    Generate no warnings\n  -verbose                   Enable verbose logging output\n  -version                   Display compiler version\n  -help (-h)                 Print a synopsis of standard options\n  -X                         Print a synopsis of advanced options\n  -P plugin:&lt;pluginId&gt;:&lt;optionName&gt;=&lt;value&gt;\n                         Pass an option to a plugin\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "edited": false, "score": 0, "creation_date": 1490121936, "post_id": 42734278, "comment_id": 72968309, "body": "See how it is done in <a href=\"https://github.com/Kotlin/kotlinx.html\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.html</a>, for example"}], "answers": [{"tags": [], "owner": {"reputation": 4441, "user_id": 1716487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cb7969a127a12e8707cfa9fb95431d58?s=128&d=identicon&r=PG", "display_name": "morpheus05", "link": "https://stackoverflow.com/users/1716487/morpheus05"}, "is_accepted": true, "score": 1, "last_activity_date": 1490257027, "creation_date": 1490257027, "answer_id": 42970525, "question_id": 42734278, "link": "https://stackoverflow.com/questions/42734278/spliting-kotlin2javascript-code-into-several-maven-modules/42970525#42970525", "title": "Spliting Kotlin2JavaScript code into several maven modules", "body": "<p>The solution is indeed in the <a href=\"https://github.com/JetBrains/kotlin/tree/master/libraries/examples\" rel=\"nofollow noreferrer\">github examples</a> of kotlin. Here is a summary:</p>\n\n<ol>\n<li><p>The library has to produce a jar file containing the js files and the *.class files. To achieve this you have to tell the kotlin compiler to produce js files and put them into the class folder and also compile all kotlin files to *.class files in the class directory (target/classes)</p>\n\n<pre><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;id&gt;compile&lt;/id&gt;\n                &lt;phase&gt;compile&lt;/phase&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;js&lt;/goal&gt;\n                    &lt;goal&gt;compile&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                    &lt;sourceDirs&gt;\n                        &lt;sourceDir&gt;${project.basedir}/src/main/kotlin&lt;/sourceDir&gt;\n                        &lt;sourceDir&gt;${project.basedir}/src/main/java&lt;/sourceDir&gt;\n                    &lt;/sourceDirs&gt;\n                    &lt;outputFile&gt;${project.build.outputDirectory}/${project.artifactId}.js&lt;/outputFile&gt;  &lt;!-- super important! --&gt;\n                &lt;/configuration&gt;\n            &lt;/execution&gt;\n            &lt;execution&gt;\n                &lt;id&gt;test-compile&lt;/id&gt;\n                &lt;phase&gt;test-compile&lt;/phase&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;test-js&lt;/goal&gt;\n                    &lt;goal&gt;test-compile&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                    &lt;sourceDirs&gt;\n                        &lt;sourceDir&gt;${project.basedir}/src/test/kotlin&lt;/sourceDir&gt;\n                        &lt;sourceDir&gt;${project.basedir}/src/test/java&lt;/sourceDir&gt;\n                    &lt;/sourceDirs&gt;\n                &lt;/configuration&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n        &lt;!-- Insert these lines --&gt;\n        &lt;configuration&gt;\n            &lt;moduleKind&gt;commonjs&lt;/moduleKind&gt;\n        &lt;/configuration&gt;\n        &lt;!-- end of inserted text --&gt;\n    &lt;/plugin&gt;\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;forceCreation&gt;true&lt;/forceCreation&gt;\n            &lt;includes&gt;\n                &lt;include&gt;**/*&lt;/include&gt;\n            &lt;/includes&gt;\n            &lt;archive&gt;\n                &lt;forced/&gt;\n                &lt;manifestEntries&gt;\n                    &lt;Built-By&gt;Me&lt;/Built-By&gt;\n                    &lt;Implementation-Vendor&gt;Me&lt;/Implementation-Vendor&gt;\n                    &lt;Implementation-Version&gt;1.0.0&lt;/Implementation-Version&gt;\n                &lt;/manifestEntries&gt;\n            &lt;/archive&gt;\n        &lt;/configuration&gt;\n    &lt;/plugin&gt;\n</code></pre></li>\n<li><p>In the js project which uses the library you have to tell maven to unpack the dependency and make the js files available. Change the pom.xml the following way:</p>\n\n<pre><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;id&gt;unpack&lt;/id&gt;\n                &lt;phase&gt;compile&lt;/phase&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;unpack&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                    &lt;artifactItems&gt;\n                        &lt;artifactItem&gt;\n                            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                            &lt;artifactId&gt;kotlin-stdlib-js&lt;/artifactId&gt;\n                            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/js/lib&lt;/outputDirectory&gt;\n                            &lt;includes&gt;*.js&lt;/includes&gt;\n                        &lt;/artifactItem&gt;\n                        &lt;artifactItem&gt;\n                            &lt;groupId&gt;ch.viseon.openOrca&lt;/groupId&gt;\n                            &lt;artifactId&gt;share&lt;/artifactId&gt;\n                            &lt;version&gt;${project.version}&lt;/version&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/js/lib&lt;/outputDirectory&gt;\n                            &lt;includes&gt;*.js&lt;/includes&gt;\n                        &lt;/artifactItem&gt;\n                    &lt;/artifactItems&gt;\n                &lt;/configuration&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 4441, "user_id": 1716487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cb7969a127a12e8707cfa9fb95431d58?s=128&d=identicon&r=PG", "display_name": "morpheus05", "link": "https://stackoverflow.com/users/1716487/morpheus05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 42970525, "answer_count": 1, "score": 2, "last_activity_date": 1490257027, "creation_date": 1489229390, "question_id": 42734278, "link": "https://stackoverflow.com/questions/42734278/spliting-kotlin2javascript-code-into-several-maven-modules", "title": "Spliting Kotlin2JavaScript code into several maven modules", "body": "<p>I have three modules: client, share, server. </p>\n\n<p>Server is a \"normal\" Kotlin module, compiled to JVM ByteCode. \nShare should be compiled to JS and to JVM ByteCod\nClient compiles only to JS.</p>\n\n<p>I have setup share to compile JS and ByteCode - this works fine. The problem is, that the client module cannnot be compiled because it doesn't see the classes from client. </p>\n\n<p>Kotlin Code:</p>\n\n<pre><code>import com.a.typical.super.long.package.which.contains.ModelId\n\ninterface ClientOrca {\n\n  fun test(): ModelId\n}\n\n[ERROR] &lt;ClientKt&gt;:[1,8] Unresolved reference: com\n[ERROR] &lt;ClientKt&gt;:[5,15] Unresolved reference: ModelId\n</code></pre>\n\n<p>How can I setup a project (with maven) so that my code, which is splitted into several maven modules, is compiled in one-go to one JS file?</p>\n"}, {"tags": ["kotlin", "overload-resolution"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1489219572, "post_id": 42728753, "comment_id": 72584373, "body": "If you think it should be fixed/improved, please report it as a bug at <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/KT</a>"}], "owner": {"reputation": 487, "user_id": 1717100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kKfQ4.jpg?s=128&g=1", "display_name": "Edgar Espina", "link": "https://stackoverflow.com/users/1717100/edgar-espina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489285152, "creation_date": 1489184766, "last_edit_date": 1489285152, "question_id": 42728753, "link": "https://stackoverflow.com/questions/42728753/overload-resolution-ambiguity-on-the-number-of-lambda-parameters", "title": "Overload resolution ambiguity on the number of lambda parameters", "body": "<p>The following lines produces an <code>Overload resolution ambiguity</code> compiler error:</p>\n\n<pre><code>class Req {}\nclass Rsp {}\n\nfun get(filter: (Req, Rsp) -&gt; Unit) {\n  filter(Req(), Rsp())\n}\n\nfun get(init: Req.()-&gt; Unit) {\n  val req = Req()\n  req.init()\n}\n\nfun main(args: Array&lt;String&gt;) {\n  get {\n    println(\"Overload resolution ambiguity\")\n  }\n\n  get {req, rsp -&gt;\n    println(\"OK\")\n  }\n}\n</code></pre>\n\n<p>The first <strong>get</strong> produces the <code>Overload resolution ambiguity</code> compiler error, but I don't understand why? It is clear which function I'm referring to, isn't?</p>\n\n<p>The workaround is to being explicit and add an <code>-&gt;</code>:</p>\n\n<pre><code>get {-&gt;\n  println(\"OK\")\n}\n</code></pre>\n\n<p>This fix the problem, but of course doesn't look as good as previous version.</p>\n\n<p>Seems a compiler bug to me.</p>\n\n<p>Thanks.</p>\n\n<p>Kotlin: 1.1.0</p>\n"}, {"tags": ["kotlin", "ehcache"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1489172592, "post_id": 42725818, "comment_id": 72571368, "body": "<code>reified</code> can only be used on type parameters of inline functions, not classes. You need to pass the Class or KClass instances as constructor parameters."}, {"owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1489173426, "post_id": 42725818, "comment_id": 72571755, "body": "@yole I have also tried a version without reified. It omits the first two errors but still gives the other errors."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1489173881, "post_id": 42725818, "comment_id": 72571977, "body": "You need to pass the Class or KClass instances as constructor parameters."}, {"owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1489196650, "post_id": 42725818, "comment_id": 72580156, "body": "@yole: Ok, I have tried to do that but still get some issues with private constructors. Thanks for the help though."}, {"owner": {"reputation": 3827, "user_id": 743716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Okvki.png?s=128&g=1", "display_name": "Rafal G.", "link": "https://stackoverflow.com/users/743716/rafal-g"}, "edited": false, "score": 0, "creation_date": 1489239359, "post_id": 42725818, "comment_id": 72589720, "body": "Which version of EHCache are you using? I couldn&#39;t find &#39;CacheManagerBuilder&#39; on my classpath and I do have EHCache as well."}, {"owner": {"reputation": 4959, "user_id": 753739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b547234fa2cf147e85aa1b460f2f03?s=128&d=identicon&r=PG", "display_name": "Henri", "link": "https://stackoverflow.com/users/753739/henri"}, "edited": false, "score": 1, "creation_date": 1489245890, "post_id": 42725818, "comment_id": 72591843, "body": "CacheManagerBuilder is version 3"}, {"owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "reply_to_user": {"reputation": 3827, "user_id": 743716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Okvki.png?s=128&g=1", "display_name": "Rafal G.", "link": "https://stackoverflow.com/users/743716/rafal-g"}, "edited": false, "score": 0, "creation_date": 1489260548, "post_id": 42725818, "comment_id": 72597080, "body": "@RafalG. I am using 3.3.0 to be precise."}], "answers": [{"tags": [], "owner": {"reputation": 11383, "user_id": 18591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0448125956bd350df1252528ddcd5a76?s=128&d=identicon&r=PG", "display_name": "Louis Jacomet", "link": "https://stackoverflow.com/users/18591/louis-jacomet"}, "is_accepted": true, "score": 1, "last_activity_date": 1489395373, "creation_date": 1489395373, "answer_id": 42759657, "question_id": 42725818, "link": "https://stackoverflow.com/questions/42725818/creating-a-ehcache-cache-in-kotlin/42759657#42759657", "title": "Creating a ehcache cache in Kotlin", "body": "<p>You have an issue left with the <code>CacheConfigurationBuilder</code>: it does not have a public constructor and you need instead to use:</p>\n\n<pre><code>CacheConfigurationBuilder.newCacheConfigurationBuilder(keyClass, valueClass, ResourcePools);\n</code></pre>\n\n<p>I believe the form you are trying to use existed in the early builds of 3.0.0 but was removed before release as it allowed to try building cache configurations with missing mandatory fields.</p>\n"}, {"tags": [], "owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "is_accepted": false, "score": 0, "last_activity_date": 1489430839, "creation_date": 1489430839, "answer_id": 42771210, "question_id": 42725818, "link": "https://stackoverflow.com/questions/42725818/creating-a-ehcache-cache-in-kotlin/42771210#42771210", "title": "Creating a ehcache cache in Kotlin", "body": "<p>Just for an entire working example here is what ended up working:</p>\n\n<pre><code>import org.ehcache.CacheManager\nimport org.ehcache.Cache\nimport org.ehcache.config.builders.CacheManagerBuilder\nimport org.ehcache.config.builders.CacheConfigurationBuilder\nimport org.ehcache.config.builders.ResourcePoolsBuilder\n\nclass Main&lt;Pos, Move&gt;(p: Class&lt;Pos&gt;, m: Class&lt;Move&gt;) {\n\n    val cm : CacheManager?\n    val solvedPositions : Cache&lt;Class&lt;Pos&gt;, Class&lt;Move&gt;&gt;?\n\n    init {\n        cm = CacheManagerBuilder.newCacheManagerBuilder() \n                                .withCache(\"solved\", \n                                CacheConfigurationBuilder\n                                .newCacheConfigurationBuilder(p.javaClass, m.javaClass, ResourcePoolsBuilder.heap(10))).build()\n        solvedPositions = cm.getCache(\"solved\", p.javaClass, m.javaClass)\n    }\n\n\n    fun main(args: Array&lt;String&gt;) {\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 1, "accepted_answer_id": 42759657, "answer_count": 2, "score": 1, "last_activity_date": 1489430839, "creation_date": 1489172304, "last_edit_date": 1489196545, "question_id": 42725818, "link": "https://stackoverflow.com/questions/42725818/creating-a-ehcache-cache-in-kotlin", "title": "Creating a ehcache cache in Kotlin", "body": "<p>I am having trouble creating a simple <a href=\"http://www.ehcache.org/\" rel=\"nofollow noreferrer\">ehcache</a> cache in Kotlin. I am trying to keep the cache as generic as possible so the key value pairs are the generics <code>Pos</code> and <code>Move</code>.</p>\n\n<pre><code>import org.ehcache.CacheManager\nimport org.ehcache.Cache\nimport org.ehcache.config.builders.CacheManagerBuilder\nimport org.ehcache.config.builders.CacheConfigurationBuilder\nimport org.ehcache.config.builders.ResourcePoolsBuilder\n\nclass Main&lt;reified Pos, reified Move&gt; {\n\n    val cm : CacheManager?\n    val solvedPositions : Cache&lt;Pos, Move&gt;?\n\n    init {\n            cm = CacheManagerBuilder.newCacheManagerBuilder() \n                               .withCache(\"solved\", CacheConfigurationBuilder&lt;Pos, Move&gt;()\n                               .withResourcePools(ResourcePoolsBuilder.heap(10)))\n                               .buildConfig(Class&lt;Pos&gt;::class.java, Class&lt;Move&gt;::class.java)\n                               .build(true); \n            solvedPositions = cm.getCache(\"solved\", Class&lt;Pos&gt;::class.java, Class&lt;Move&gt;::class.java);\n    }\n\n\n    fun main(args: Array&lt;String&gt;) {\n    }\n}\n</code></pre>\n\n<p>Running this program gives the following error messages:</p>\n\n<pre><code>e: /Users/christophersumnicht/CacheIssue/src/main/kotlin/Main.kt: (7, 12): Only type parameters of inline functions can be reified\ne: /Users/christophersumnicht/CacheIssue/src/main/kotlin/Main.kt: (7, 25): Only type parameters of inline functions can be reified\ne: /Users/christophersumnicht/CacheIssue/src/main/kotlin/Main.kt: (14, 53): None of the following functions can be called with the arguments supplied: \nprivate constructor CacheConfigurationBuilder&lt;K : Any!, V : Any!&gt;(keyType: Class&lt;Pos!&gt;!, valueType: Class&lt;Move!&gt;!, resourcePools: ResourcePools!) defined in org.ehcache.config.builders.CacheConfigurationBuilder\nprivate constructor CacheConfigurationBuilder&lt;K : Any!, V : Any!&gt;(other: CacheConfigurationBuilder&lt;Pos!, Move!&gt;!) defined in org.ehcache.config.builders.CacheConfigurationBuilder\ne: /Users/christophersumnicht/CacheIssue/src/main/kotlin/Main.kt: (16, 45): Only classes are allowed on the left hand side of a class literal\ne: /Users/christophersumnicht/CacheIssue/src/main/kotlin/Main.kt: (16, 69): Only classes are allowed on the left hand side of a class literal\ne: /Users/christophersumnicht/CacheIssue/src/main/kotlin/Main.kt: (18, 53): Only classes are allowed on the left hand side of a class literal\ne: /Users/christophersumnicht/CacheIssue/src/main/kotlin/Main.kt: (18, 77): Only classes are allowed on the left hand side of a class literal\n:compileKotlin FAILED\n</code></pre>\n\n<p>Note that I have also removed <code>reified</code> and I get similar errors to this. How can I resolve these errors?</p>\n\n<p><strong>UPDATE:</strong> </p>\n\n<p>I have tried to to pass a <code>Class</code> instance as a constructor as follows:</p>\n\n<pre><code>import org.ehcache.CacheManager\nimport org.ehcache.Cache\nimport org.ehcache.config.builders.CacheManagerBuilder\nimport org.ehcache.config.builders.CacheConfigurationBuilder\nimport org.ehcache.config.builders.ResourcePoolsBuilder\n\nclass Main&lt;Pos, Move&gt;(p: Class&lt;Pos&gt;, m: Class&lt;Move&gt;) {\n\n    val cm : CacheManager?\n    val solvedPositions : Cache&lt;Class&lt;Pos&gt;, Class&lt;Move&gt;&gt;?\n\n    init {\n        cm = CacheManagerBuilder.newCacheManagerBuilder() \n                                .withCache(\"solved\", CacheConfigurationBuilder&lt;Pos, Move&gt;()\n                                .withResourcePools(ResourcePoolsBuilder.heap(10)))\n                                .buildConfig(p.javaClass, m.javaClass)\n                                .build(true); \n        solvedPositions = cm.getCache(\"solved\", p.javaClass, m.javaClass);\n    }\n\n\n    fun main(args: Array&lt;String&gt;) {\n    }\n}\n</code></pre>\n\n<p>Unfortunately, I still have issues with the private constructors:</p>\n\n<pre><code>:compileKotlin\ne: /Users/christophersumnicht/CacheIssue/src/main/kotlin/Main.kt: (14, 54): None of the following functions can be called with the arguments supplied: \nprivate constructor CacheConfigurationBuilder&lt;K : Any!, V : Any!&gt;(keyType: Class&lt;Pos!&gt;!, valueType: Class&lt;Move!&gt;!, resourcePools: ResourcePools!) defined in org.ehcache.config.builders.CacheConfigurationBuilder\nprivate constructor CacheConfigurationBuilder&lt;K : Any!, V : Any!&gt;(other: CacheConfigurationBuilder&lt;Pos!, Move!&gt;!) defined in org.ehcache.config.builders.CacheConfigurationBuilder\n:compileKotlin FAILED\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java2", "rx-binding"], "answers": [{"comments": [{"owner": {"reputation": 1608, "user_id": 5031114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nJzUn.jpg?s=128&g=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/5031114/vicky"}, "edited": false, "score": 0, "creation_date": 1512801321, "post_id": 42726197, "comment_id": 82412582, "body": "Took me so long figure this out."}, {"owner": {"reputation": 1693, "user_id": 6654475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-vGc62SM1OzI/AAAAAAAAAAI/AAAAAAAAPao/fNzdBMXdwwQ/photo.jpg?sz=128", "display_name": "Francislainy Campos", "link": "https://stackoverflow.com/users/6654475/francislainy-campos"}, "edited": false, "score": 0, "creation_date": 1560971008, "post_id": 42726197, "comment_id": 99915917, "body": "This <a href=\"https://dev.to/amay077/rxjava-combinelatest-quick-example-e8b\" rel=\"nofollow noreferrer\">link</a> may be helpful in connection with this answer."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 40, "last_activity_date": 1489175895, "last_edit_date": 1495540969, "creation_date": 1489173732, "answer_id": 42726197, "question_id": 42725749, "link": "https://stackoverflow.com/questions/42725749/observable-combinelatest-type-inference-in-kotlin/42726197#42726197", "title": "Observable.combineLatest type inference in kotlin", "body": "<p>Your issue is that the compiler can't figure out which override of <code>combineLatest</code> to call, because multiple ones have functional interfaces as their third parameter. You can make the conversion explicit with a SAM constructor like this:</p>\n\n<pre><code>val isSignInEnabled: Observable&lt;Boolean&gt; = Observable.combineLatest(\n        userNameObservable,\n        passwordObservable,\n        BiFunction { u, p -&gt; u.isNotEmpty() &amp;&amp; p.isNotEmpty() })\n</code></pre>\n\n<p>Ps. Thanks for asking this question, it helped me figure out that I was initially wrong about this one that turns out to be the same problem, which I've now updated with this solution as well. <a href=\"https://stackoverflow.com/a/42636503/4465208\">https://stackoverflow.com/a/42636503/4465208</a></p>\n"}, {"comments": [{"owner": {"reputation": 1541, "user_id": 3663980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d55a424272f2cb2c68b201207d60ce2?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny", "link": "https://stackoverflow.com/users/3663980/johnny"}, "edited": false, "score": 1, "creation_date": 1515852407, "post_id": 47117666, "comment_id": 83463513, "body": "You saved my life! Thanks."}], "tags": [], "owner": {"reputation": 656, "user_id": 4289852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860bf040d996601213e05747dd661c23?s=128&d=identicon&r=PG", "display_name": "tomoima525", "link": "https://stackoverflow.com/users/4289852/tomoima525"}, "is_accepted": false, "score": 40, "last_activity_date": 1509849630, "creation_date": 1509849630, "answer_id": 47117666, "question_id": 42725749, "link": "https://stackoverflow.com/questions/42725749/observable-combinelatest-type-inference-in-kotlin/47117666#47117666", "title": "Observable.combineLatest type inference in kotlin", "body": "<p>You can use <a href=\"https://github.com/ReactiveX/RxKotlin\" rel=\"noreferrer\">RxKotlin</a> which gives you helper methods for SAM ambiguity issue.</p>\n\n<pre><code>val isSignInEnabled: Observable&lt;Boolean&gt; = Observables.combineLatest(\n    userNameObservable,\n    passwordObservable)\n    { u, p -&gt; u.isNotEmpty() &amp;&amp; p.isNotEmpty() })\n</code></pre>\n\n<p>As you can see, in RxKotlin use <code>Observables</code> instead of <code>Observable</code></p>\n"}], "owner": {"reputation": 4917, "user_id": 549978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QGiga.png?s=128&g=1", "display_name": "blizzard", "link": "https://stackoverflow.com/users/549978/blizzard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12188, "favorite_count": 4, "accepted_answer_id": 42726197, "answer_count": 2, "score": 24, "last_activity_date": 1532030921, "creation_date": 1489171974, "question_id": 42725749, "link": "https://stackoverflow.com/questions/42725749/observable-combinelatest-type-inference-in-kotlin", "title": "Observable.combineLatest type inference in kotlin", "body": "<p>I'm using RxJava2, Kotlin-1.1 along with RxBindings in my project.</p>\n\n<p>I have simple login screen with 'login' button disabled by default, I want to enable the button only when username and password edittext fields are not empty.</p>\n\n<p><strong>LoginActivity.java</strong></p>\n\n<pre><code>Observable&lt;Boolean&gt; isFormEnabled =\n    Observable.combineLatest(mUserNameObservable, mPasswordObservable,\n        (userName, password) -&gt; userName.length() &gt; 0 &amp;&amp; password.length() &gt; 0)\n        .distinctUntilChanged();\n</code></pre>\n\n<p>I'm unable to translate the above code from Java to Kotlin:</p>\n\n<p><strong>LoginActivity.kt</strong></p>\n\n<pre><code>class LoginActivity : AppCompatActivity() {\n\n  val disposable = CompositeDisposable()\n\n  private var userNameObservable: Observable&lt;CharSequence&gt;? = null\n  private var passwordObservable: Observable&lt;CharSequence&gt;? = null\n\n  override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_login)\n    initialize()\n  }\n\n  fun initialize() {\n    userNameObservable = RxTextView.textChanges(username).skip(1)\n        .debounce(500, TimeUnit.MILLISECONDS)\n    passwordObservable = RxTextView.textChanges(password).skip(1)\n        .debounce(500, TimeUnit.MILLISECONDS) \n  }\n\n  private fun setSignInButtonEnableListener() {\n    val isSignInEnabled: Observable&lt;Boolean&gt; = Observable.combineLatest(userNameObservable,\n        passwordObservable,\n        { u: CharSequence, p: CharSequence -&gt; u.isNotEmpty() &amp;&amp; p.isNotEmpty() })\n  }\n}\n</code></pre>\n\n<p>I assumed it's something related to type inference of the third argument in <code>combinelatest</code>, but I don't get the issue properly by reading the error message: \n<a href=\"https://i.stack.imgur.com/obrG5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/obrG5.png\" alt=\"Type Inference issue\"></a></p>\n"}, {"tags": ["android", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 1778, "user_id": 3698762, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100000899588541/picture?type=large", "display_name": "Stefan", "link": "https://stackoverflow.com/users/3698762/stefan"}, "edited": false, "score": 0, "creation_date": 1489158946, "post_id": 42721648, "comment_id": 72563276, "body": "Are you using Wear App lib?"}, {"owner": {"reputation": 1406, "user_id": 2252174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/113ce5711f751d31b643c65c9cb44585?s=128&d=identicon&r=PG", "display_name": "Anton A.", "link": "https://stackoverflow.com/users/2252174/anton-a"}, "reply_to_user": {"reputation": 1778, "user_id": 3698762, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100000899588541/picture?type=large", "display_name": "Stefan", "link": "https://stackoverflow.com/users/3698762/stefan"}, "edited": false, "score": 0, "creation_date": 1489158975, "post_id": 42721648, "comment_id": 72563297, "body": "@Stefan I am using Wear module"}, {"owner": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1489159042, "post_id": 42721648, "comment_id": 72563345, "body": "You have a problem of conflicting minSdkVersion with a module/library called staging"}, {"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1489159053, "post_id": 42721648, "comment_id": 72563353, "body": "are you using gradle as build tool ?"}, {"owner": {"reputation": 1991, "user_id": 3870382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/953339cb13e33915e33fbfddff0d88b8?s=128&d=identicon&r=PG&f=1", "display_name": "miljon", "link": "https://stackoverflow.com/users/3870382/miljon"}, "edited": false, "score": 1, "creation_date": 1489159182, "post_id": 42721648, "comment_id": 72563435, "body": "It&#39;s probably Android Studio unsolved issue. Downgrade of Android Studio might be solution, but I don&#39;t know if it settle you. <a href=\"https://code.google.com/p/android/issues/detail?id=232834\" rel=\"nofollow noreferrer\">code.google.com/p/android/issues/detail?id=232834</a>"}, {"owner": {"reputation": 1406, "user_id": 2252174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/113ce5711f751d31b643c65c9cb44585?s=128&d=identicon&r=PG", "display_name": "Anton A.", "link": "https://stackoverflow.com/users/2252174/anton-a"}, "reply_to_user": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1489159305, "post_id": 42721648, "comment_id": 72563528, "body": "@MatPag I know that"}, {"owner": {"reputation": 1406, "user_id": 2252174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/113ce5711f751d31b643c65c9cb44585?s=128&d=identicon&r=PG", "display_name": "Anton A.", "link": "https://stackoverflow.com/users/2252174/anton-a"}, "reply_to_user": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1489159307, "post_id": 42721648, "comment_id": 72563529, "body": "@AbhishekAryan yes"}, {"owner": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "reply_to_user": {"reputation": 1991, "user_id": 3870382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/953339cb13e33915e33fbfddff0d88b8?s=128&d=identicon&r=PG&f=1", "display_name": "miljon", "link": "https://stackoverflow.com/users/3870382/miljon"}, "edited": false, "score": 0, "creation_date": 1489159403, "post_id": 42721648, "comment_id": 72563584, "body": "if @Mij is right the only thing you can do for now is reverting android gradle plugin back to 2.2.3 until it&#39;s fixed (without downgrading AS)"}, {"owner": {"reputation": 1406, "user_id": 2252174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/113ce5711f751d31b643c65c9cb44585?s=128&d=identicon&r=PG", "display_name": "Anton A.", "link": "https://stackoverflow.com/users/2252174/anton-a"}, "reply_to_user": {"reputation": 1991, "user_id": 3870382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/953339cb13e33915e33fbfddff0d88b8?s=128&d=identicon&r=PG&f=1", "display_name": "miljon", "link": "https://stackoverflow.com/users/3870382/miljon"}, "edited": false, "score": 0, "creation_date": 1489159705, "post_id": 42721648, "comment_id": 72563773, "body": "@Mij, yap, downgrade to 2.2.3 works"}, {"owner": {"reputation": 1406, "user_id": 2252174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/113ce5711f751d31b643c65c9cb44585?s=128&d=identicon&r=PG", "display_name": "Anton A.", "link": "https://stackoverflow.com/users/2252174/anton-a"}, "reply_to_user": {"reputation": 1991, "user_id": 3870382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/953339cb13e33915e33fbfddff0d88b8?s=128&d=identicon&r=PG&f=1", "display_name": "miljon", "link": "https://stackoverflow.com/users/3870382/miljon"}, "edited": false, "score": 1, "creation_date": 1489159783, "post_id": 42721648, "comment_id": 72563830, "body": "@Mij, post it as answer please"}], "answers": [{"tags": [], "owner": {"reputation": 1991, "user_id": 3870382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/953339cb13e33915e33fbfddff0d88b8?s=128&d=identicon&r=PG&f=1", "display_name": "miljon", "link": "https://stackoverflow.com/users/3870382/miljon"}, "is_accepted": true, "score": 1, "last_activity_date": 1489259580, "creation_date": 1489259580, "answer_id": 42739430, "question_id": 42721648, "link": "https://stackoverflow.com/questions/42721648/gradle-release-build-failed-with-gradle-3-3/42739430#42739430", "title": "Gradle release build failed with Gradle 3.3", "body": "<p>It's probably Android Studio unsolved issue. </p>\n\n<p>For now downgrade of Android Studio is a solution, \nbut I don't know if it fits you. </p>\n\n<p><a href=\"https://code.google.com/p/android/issues/detail?id=232834\" rel=\"nofollow noreferrer\">https://code.google.com/p/android/issues/detail?id=232834</a></p>\n"}], "owner": {"reputation": 1406, "user_id": 2252174, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/113ce5711f751d31b643c65c9cb44585?s=128&d=identicon&r=PG", "display_name": "Anton A.", "link": "https://stackoverflow.com/users/2252174/anton-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 42739430, "answer_count": 1, "score": 0, "last_activity_date": 1489259580, "creation_date": 1489158655, "last_edit_date": 1489158949, "question_id": 42721648, "link": "https://stackoverflow.com/questions/42721648/gradle-release-build-failed-with-gradle-3-3", "title": "Gradle release build failed with Gradle 3.3", "body": "<p>I cant deal with gradle build for several hours.\nIt all ok on debug build but release just not building.</p>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>Error:Execution failed for task ':app:processStagingManifest'.\n  Manifest merger failed : uses-sdk:minSdkVersion 15 cannot be smaller than version 24 declared in library [Wear App sub-manifest] /home/NAME/BOOM/app/build/generated/manifests/microapk/staging/AndroidManifest.xml\n      Suggestion: use tools:overrideLibrary=\"\" to force usage</p>\n</blockquote>\n\n<p>I understand suggestion, but not understand how to use it and where.</p>\n\n<p>Also, I cant find declared minSdkVersion 24 anywhere in my app modules.</p>\n"}, {"tags": ["intellij-idea", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 8, "last_activity_date": 1489236549, "last_edit_date": 1495541844, "creation_date": 1489151049, "answer_id": 42719089, "question_id": 42717683, "link": "https://stackoverflow.com/questions/42717683/kotlin-rem-as-replacement-for-mod-not-available/42719089#42719089", "title": "Kotlin &#39;rem&#39; as replacement for &#39;mod&#39; not available?", "body": "<p>This is a <a href=\"https://youtrack.jetbrains.com/issue/KT-16372\" rel=\"nofollow noreferrer\">known bug</a> in the Kotlin IDE plugin.</p>\n\n<p>It arises from the deprecation of the <code>mod</code> function in Kotlin 1.1, which should be replaced by <code>rem</code> (see <em>Other changes</em> in <a href=\"https://blog.jetbrains.com/kotlin/2016/12/kotlin-1-1-m04-is-here/\" rel=\"nofollow noreferrer\">this blog post</a>). But the IDE plugin incorrectly reports and suggest the quick fix even for earlier Kotlin versions which didn't have <code>rem</code>.</p>\n\n<p>Unitl it is fixed, you can either update your project to Kotlin 1.1 or <a href=\"https://stackoverflow.com/questions/36676512/kotlin-supress-warning-deprecated-for-android\">suppress the warnings</a>, or just ignore them.</p>\n"}], "owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2194, "favorite_count": 0, "accepted_answer_id": 42719089, "answer_count": 1, "score": 7, "last_activity_date": 1489236549, "creation_date": 1489146467, "last_edit_date": 1489157520, "question_id": 42717683, "link": "https://stackoverflow.com/questions/42717683/kotlin-rem-as-replacement-for-mod-not-available", "title": "Kotlin &#39;rem&#39; as replacement for &#39;mod&#39; not available?", "body": "<p>For <code>count % 2</code> I get the warning </p>\n\n<blockquote>\n  <p>Warning:(137, 17) Kotlin: 'mod(Int): Int' is deprecated. Use rem(other) instead</p>\n</blockquote>\n\n<p>and the Intellij IDE provides for an automated correction to <code>count.rem(2)</code> which I then get flagged as an error due to an unresolved reference to <code>rem</code>. </p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["unit-testing", "gradle", "kotlin", "jacoco"], "comments": [{"owner": {"reputation": 505, "user_id": 1425525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7sxUa.png?s=128&g=1", "display_name": "raniejade", "link": "https://stackoverflow.com/users/1425525/raniejade"}, "edited": false, "score": 1, "creation_date": 1489150634, "post_id": 42717350, "comment_id": 72557629, "body": "This might help <a href=\"http://stackoverflow.com/a/42520303/1425525\">stackoverflow.com/a/42520303/1425525</a>"}, {"owner": {"reputation": 1696, "user_id": 1766828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42089f03a647bcd617b57967efabef3?s=128&d=identicon&r=PG", "display_name": "Javier Diaz", "link": "https://stackoverflow.com/users/1766828/javier-diaz"}, "edited": false, "score": 0, "creation_date": 1489922733, "post_id": 42717350, "comment_id": 72873993, "body": "Was it useful? Since in the other question wasn&#39;t (too) useful I could move it here."}], "answers": [{"tags": [], "owner": {"reputation": 1150, "user_id": 844313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85c5c9477cc9362fcd6e554241d3e76?s=128&d=identicon&r=PG", "display_name": "Matthijs van den Bos", "link": "https://stackoverflow.com/users/844313/matthijs-van-den-bos"}, "is_accepted": true, "score": 2, "last_activity_date": 1499075976, "creation_date": 1499075976, "answer_id": 44882712, "question_id": 42717350, "link": "https://stackoverflow.com/questions/42717350/how-to-setup-jacoco-with-spek-in-a-multi-project/44882712#44882712", "title": "How to setup Jacoco with Spek in a multi-project?", "body": "<p>By default, the JUnit Gradle plugin disables the standard Gradle test task, but this can be overridden via the enableStandardTestTask flag. It seems the jacocoTestReport task is looking for that.</p>\n\n<pre><code>junitPlatform {\n    filters {\n        engines {\n            include 'spek'\n        }\n    }\n\n    enableStandardTestTask true\n}\n</code></pre>\n\n<p>See <a href=\"http://junit.org/junit5/docs/current/user-guide/#running-tests-build\" rel=\"nofollow noreferrer\">http://junit.org/junit5/docs/current/user-guide/#running-tests-build</a></p>\n"}], "owner": {"reputation": 727, "user_id": 7108266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2123ca83dfca370821fbac4360a5a27?s=128&d=identicon&r=PG&f=1", "display_name": "mmorihiro", "link": "https://stackoverflow.com/users/7108266/mmorihiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 0, "accepted_answer_id": 44882712, "answer_count": 1, "score": 2, "last_activity_date": 1499075976, "creation_date": 1489145447, "last_edit_date": 1489222774, "question_id": 42717350, "link": "https://stackoverflow.com/questions/42717350/how-to-setup-jacoco-with-spek-in-a-multi-project", "title": "How to setup Jacoco with Spek in a multi-project?", "body": "<p>I want to measure coverage by Jacoco in <code>model</code> project, one of the child projects.\nHowever, after <code>test</code> task, <code>jacocoTestReport</code> task is skipped.</p>\n\n<p><code>test</code>: </p>\n\n<pre><code>:model:compileKotlin UP-TO-DATE\n:model:compileJava UP-TO-DATE\n:model:copyMainKotlinClasses UP-TO-DATE\n:model:processResources UP-TO-DATE\n:model:classes UP-TO-DATE\n:model:compileTestKotlin UP-TO-DATE\n:model:compileTestJava UP-TO-DATE\n:model:copyTestKotlinClasses UP-TO-DATE\n:model:processTestResources UP-TO-DATE\n:model:testClasses UP-TO-DATE\n3 10, 2017 8:17:48 org.junit.platform.launcher.core.ServiceLoaderTestEngineRegistry loadTestEngines\nDiscovered TestEngines with IDs: [spek]\n:model:junitPlatformTest\nTest run finished after 113 ms\n[         4 containers found      ]\n[         0 containers skipped    ]\n[         4 containers started    ]\n[         0 containers aborted    ]\n[         4 containers successful ]\n[         0 containers failed     ]\n[         1 tests found           ]\n[         0 tests skipped         ]\n[         1 tests started         ]\n[         0 tests aborted         ]\n[         1 tests successful      ]\n[         0 tests failed          ]\n:model:test\n:model:test SKIPPED\n</code></pre>\n\n<p>Then, a xml file is output. (model/build/test-results/junit-platform/TEST-spek.xml) </p>\n\n<p><code>jacocoTestReport</code>: </p>\n\n<pre><code>:model:compileKotlin UP-TO-DATE\n:model:compileJava UP-TO-DATE\n:model:copyMainKotlinClasses UP-TO-DATE\n:model:processResources UP-TO-DATE\n:model:classes UP-TO-DATE\n:model:jacocoTestReport SKIPPED\n</code></pre>\n\n<p>build.gradle:</p>\n\n<pre><code>buildscript {\n    ext.kotlinVersion = '1.1.0'\n    repositories {\n        mavenLocal()\n        mavenCentral()\n        maven { url \"https://oss.sonatype.org/content/repositories/snapshots/\" }\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion\"\n        classpath \"org.junit.platform:junit-platform-gradle-plugin:1.0.0-M3\"\n    }\n}\n\nallprojects {\n    ext {\n        spekVersion = '1.1.0-beta3'\n    }\n\n    repositories {\n        mavenLocal()\n        mavenCentral()\n        jcenter()\n        maven { url \"http://dl.bintray.com/jetbrains/spek\" }\n        maven { url \"https://oss.sonatype.org/content/repositories/snapshots/\" }\n        maven { url \"https://oss.sonatype.org/content/repositories/releases/\" }\n    }\n}\n\nproject(\":model\") {\n    apply plugin: \"java\"\n    apply plugin: \"kotlin\"\n    apply plugin: 'org.junit.platform.gradle.plugin'\n    apply plugin: \"jacoco\"\n\n    jacoco {\n        reportsDir = file(\"$rootProject.buildDir/reports/jacoco\")\n    }\n\n    jacocoTestReport {\n        reports {\n            html.enabled = true\n            xml.enabled = true\n            csv.enabled = false\n        }\n    }\n\n    junitPlatform {\n        filters {\n            engines {\n                include 'spek'\n            }\n        }\n    }\n\n    dependencies {\n        compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion\"\n        testCompile \"org.jetbrains.spek:spek-api:$spekVersion\"\n        testCompile 'org.amshove.kluent:kluent:1.14'\n        testRuntime \"org.jetbrains.spek:spek-junit-platform-engine:$spekVersion\"\n        testRuntime 'org.junit.platform:junit-platform-console:1.0.0-M3'\n    }\n}\n</code></pre>\n\n<p>What should I do to make <code>jacocoTestReport</code> task succeed?</p>\n\n<p>[EDIT] </p>\n\n<p>When I add <code>onlyIf</code>, <code>jacocoTestReport</code> task runs, but it still fails.</p>\n\n<pre><code>jacocoTestReport {\n    onlyIf = {\n        true\n    }\n}\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>:model:compileKotlin UP-TO-DATE\n:model:compileJava UP-TO-DATE\n:model:copyMainKotlinClasses UP-TO-DATE\n:model:processResources UP-TO-DATE\n:model:classes UP-TO-DATE\n:model:jacocoTestReport FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':model:jacocoTestReport'.\n&gt; Unable to read execution data file model\\build\\jacoco\\test.exec\n</code></pre>\n"}, {"tags": ["intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7582574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RGZwU.png?s=128&g=1", "display_name": "RCC", "link": "https://stackoverflow.com/users/7582574/rcc"}, "edited": false, "score": 0, "creation_date": 1489204851, "post_id": 42719253, "comment_id": 72581484, "body": "Thanks for reply.  Yes, the <code>q</code> variable is <code>CriteriaDelete</code>, but this code is a rewrite of a Java code i have, and in Java i call this <code>.from( Class&lt;?&gt; )</code> method of <code>CriteriaDelete</code> and <code>CriteriaUpdate</code> (not post about, but i have same issue with <code>CriteriaUpdate</code>). If i not call this method, an exeception is thrown saying that root need to be specified. Thanks to open an issue  =D"}, {"owner": {"reputation": 81, "user_id": 5690112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc58bf427ea1b60b38efcfe5c096269e?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Zharkov", "link": "https://stackoverflow.com/users/5690112/denis-zharkov"}, "reply_to_user": {"reputation": 31, "user_id": 7582574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RGZwU.png?s=128&g=1", "display_name": "RCC", "link": "https://stackoverflow.com/users/7582574/rcc"}, "edited": false, "score": 0, "creation_date": 1489389044, "post_id": 42719253, "comment_id": 72631902, "body": "It&#39;s very strange, that it works in Java. Can you please share the relevant Java version?"}, {"owner": {"reputation": 31, "user_id": 7582574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RGZwU.png?s=128&g=1", "display_name": "RCC", "link": "https://stackoverflow.com/users/7582574/rcc"}, "edited": false, "score": 0, "creation_date": 1489473272, "post_id": 42719253, "comment_id": 72672639, "body": "Edited the question adding the piece of code write on Java.Thanks for your help."}, {"owner": {"reputation": 81, "user_id": 5690112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc58bf427ea1b60b38efcfe5c096269e?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Zharkov", "link": "https://stackoverflow.com/users/5690112/denis-zharkov"}, "reply_to_user": {"reputation": 31, "user_id": 7582574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RGZwU.png?s=128&g=1", "display_name": "RCC", "link": "https://stackoverflow.com/users/7582574/rcc"}, "edited": false, "score": 0, "creation_date": 1489476578, "post_id": 42719253, "comment_id": 72674282, "body": "There is a tricky moment in your Java code: you use raw type <code>CriteriaDelete query</code> that effectively turns off exact type matching when calling <code>from</code> on it. If you use <code>CriteriaDelete&lt;?&gt;</code> type instead you will get a similar error.  In Kotlin there are no raw types, but you always can use unsafe cast like <code>(q as CriteriaDelete&lt;Any&gt;).from(info.classe as Class&lt;Any&gt;)</code> that would be a fair Kotlin version of your Java code"}], "tags": [], "owner": {"reputation": 81, "user_id": 5690112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc58bf427ea1b60b38efcfe5c096269e?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Zharkov", "link": "https://stackoverflow.com/users/5690112/denis-zharkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1489151536, "creation_date": 1489151536, "answer_id": 42719253, "question_id": 42711192, "link": "https://stackoverflow.com/questions/42711192/kotlin-intellij-compiler-cannot-find-correct-parameter-type-of-function/42719253#42719253", "title": "Kotlin / IntelliJ - Compiler cannot find correct parameter type of function", "body": "<p>Can you please check the type of <code>q</code> variable? (navigate to it, the run alt+q)\nI suppose its type is <code>CriteriaDelete&lt;*&gt;</code>, and none of these <code>from</code> methods can be called for the same reasons they can't in Java on a variable of type <code>CriteriaDelete&lt;?&gt;</code>: we can't say exactly what <code>T</code> was there when the instance was created.</p>\n\n<p>But diagnostic, of course, could be better here. I've created <a href=\"https://youtrack.jetbrains.com/issue/KT-16779\" rel=\"nofollow noreferrer\">issue</a> on this</p>\n"}], "owner": {"reputation": 31, "user_id": 7582574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RGZwU.png?s=128&g=1", "display_name": "RCC", "link": "https://stackoverflow.com/users/7582574/rcc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489473121, "creation_date": 1489125107, "last_edit_date": 1489473121, "question_id": 42711192, "link": "https://stackoverflow.com/questions/42711192/kotlin-intellij-compiler-cannot-find-correct-parameter-type-of-function", "title": "Kotlin / IntelliJ - Compiler cannot find correct parameter type of function", "body": "<p>I'm writing a code in <strong>Kotlin</strong> language <em>(of JetBrains)</em> using <strong>IntelliJ</strong> and i'm facing a error on compiler where the compiler cannot find the correct parameter type of a function, always saying that the function receve a <strong><code>Nothing</code></strong> parameter.</p>\n\n<p>Someone have any idea of what is the problem?</p>\n\n<p><a href=\"https://i.stack.imgur.com/49f0O.png\" rel=\"nofollow noreferrer\">Print Screen showing the error on IntelliJ IDE</a></p>\n\n<p>In the image, the console show the compiler error, but a help on center of the screen shows that IntelliJ can find the correct parameter type of the function, but compiler not.</p>\n\n<p>==== Edited ==========================================</p>\n\n<p>The Java code is:</p>\n\n<pre><code>  @Transactional\n  public int deletar(BuscaInfo info) {\n\n    // ----  Criando a busca ao banco:\n    CriteriaBuilder cb = em.getCriteriaBuilder();\n    CriteriaDelete query = cb.createCriteriaDelete( info.classe );\n    Root root = query.from( info.classe );\n\n    // Cl\u00e1usula WHERE do banco:\n    Predicate[] preds = WhereBuilder.build(cb, root, info.where);\n    if (preds.length &lt; 1) {\n      throw new MsgException(JsonResponse.ERROR_EXCECAO,null,\"Os par\u00e2metros de filtragem da QueryString n\u00e3o s\u00e3o v\u00e1lidos.\");\n    }\n    query.where(preds);\n\n\n    // A busca ao banco:\n    int qtd = em.createQuery(query).executeUpdate();\n    return qtd;\n  }\n</code></pre>\n\n<p>and <code>info.classe</code> is of type <code>Class&lt;?&gt;</code>.  </p>\n\n<p>Using Hibernate 5.x and JPA 2.1 api to compile.<br>\nThat code works on WildFly 9.x and 10.x.</p>\n"}, {"tags": ["collections", "kotlin"], "comments": [{"owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "edited": false, "score": 0, "creation_date": 1489103169, "post_id": 42705761, "comment_id": 72537094, "body": "An enum using a <code>value</code> property may be preferable for cleaner code. Here&#39;s a quick syntax example: <a href=\"http://pastebin.com/1BtynHMN\" rel=\"nofollow noreferrer\">pastebin.com/1BtynHMN</a>"}], "answers": [{"comments": [{"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 0, "creation_date": 1489096101, "post_id": 42705954, "comment_id": 72534081, "body": "Ofcourse ! If key is not present in the map the return is null."}, {"owner": {"reputation": 762, "user_id": 7674825, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/707de4473c926e952f41710d4a1fa636?s=128&d=identicon&r=PG&f=1", "display_name": "DanielBK", "link": "https://stackoverflow.com/users/7674825/danielbk"}, "edited": false, "score": 0, "creation_date": 1608121451, "post_id": 42705954, "comment_id": 115484667, "body": "Thanks! I was about to ask the same question before I found your answer"}], "tags": [], "owner": {"reputation": 3827, "user_id": 743716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Okvki.png?s=128&g=1", "display_name": "Rafal G.", "link": "https://stackoverflow.com/users/743716/rafal-g"}, "is_accepted": true, "score": 14, "last_activity_date": 1489095586, "creation_date": 1489095586, "answer_id": 42705954, "question_id": 42705761, "link": "https://stackoverflow.com/questions/42705761/kotlin-map-with-non-null-values/42705954#42705954", "title": "Kotlin Map with non null values", "body": "<p>It is not about the implementation of Map (being it Kotlin or Java based). You are using a Map and a map may not have a key hence [] operator returns nullable type.</p>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 1814802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1hYO.jpg?s=128&g=1", "display_name": "mbStavola", "link": "https://stackoverflow.com/users/1814802/mbstavola"}, "is_accepted": false, "score": 9, "last_activity_date": 1489116340, "creation_date": 1489116340, "answer_id": 42709643, "question_id": 42705761, "link": "https://stackoverflow.com/questions/42705761/kotlin-map-with-non-null-values/42709643#42709643", "title": "Kotlin Map with non null values", "body": "<p>mapOf() is providing a Map with no guarantees for the presence of a key-- something which is kind of expected especially considering the Java implementation of Map.</p>\n\n<p>While I might personally prefer sticking with null-safe calls and elvis operators, it sounds like you'd prefer cleaner code at the call site (especially considering you know these keys exist and have associated non-null values). Consider this: </p>\n\n<pre><code>class NonNullMap&lt;K, V&gt;(private val map: Map&lt;K, V&gt;) : Map&lt;K, V&gt; by map {\n    override operator fun get(key: K): V {\n        return map[key]!! // Force an NPE if the key doesn't exist\n    }\n}\n</code></pre>\n\n<p>By delegating to an implementation of map, but overriding the get method, we can guarantee that return values are non-null. This means you no longer have to worry about !!, ?., or ?: for your usecase.</p>\n\n<p>Some simple test code shows this to be true:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) { \n    val rank = nonNullMapOf(\"J\" to 11, \"Q\" to 12, \"K\" to 13, \"A\" to 14)\n    val jackValue: Int = rank[\"J\"] // Works as expected\n    println(jackValue)\n    val paladinValue: Int = rank[\"P\"] // Throws an NPE if it's not found, but chained calls are considered \"safe\"\n    println(jackValue)\n}\n\n// Provides the same interface for creating a NonNullMap as mapOf() does for Map\nfun &lt;K, V&gt; nonNullMapOf(vararg pairs: Pair&lt;K, V&gt;) = NonNullMap(mapOf&lt;K, V&gt;(*pairs))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 514, "user_id": 2807072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9rqlp.jpg?s=128&g=1", "display_name": "Nurlan", "link": "https://stackoverflow.com/users/2807072/nurlan"}, "is_accepted": false, "score": 16, "last_activity_date": 1606923200, "last_edit_date": 1606923200, "creation_date": 1575642061, "answer_id": 59214939, "question_id": 42705761, "link": "https://stackoverflow.com/questions/42705761/kotlin-map-with-non-null-values/59214939#59214939", "title": "Kotlin Map with non null values", "body": "<p>There is another method for getting <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/get-value.html\" rel=\"nofollow noreferrer\">not null value from map</a>:</p>\n<pre><code>fun &lt;K, V&gt; Map&lt;K, V&gt;.getValue(key: K): V\n</code></pre>\n<p>throws <em>NoSuchElementException</em> - when the map doesn't contain a value for the specified key and no implicit default value was provided for that map.</p>\n<p>but operator for <em>get</em> == <em>map[]</em> <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/get.html\" rel=\"nofollow noreferrer\">returns nullable</a>.</p>\n<pre><code>operator fun &lt;K, V&gt; Map&lt;out K, V&gt;.get(key: K): V?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10567, "user_id": 541624, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uyz2B.jpg?s=128&g=1", "display_name": "ericn", "link": "https://stackoverflow.com/users/541624/ericn"}, "is_accepted": false, "score": 0, "last_activity_date": 1593704514, "last_edit_date": 1593704514, "creation_date": 1591236594, "answer_id": 62185738, "question_id": 42705761, "link": "https://stackoverflow.com/questions/42705761/kotlin-map-with-non-null-values/62185738#62185738", "title": "Kotlin Map with non null values", "body": "<p>The short answer is you can't achieve that until Kotlin changes. As others have pointed out, this doesn't have to do with mutability but the fact that Java's Maps accept <strong>null</strong> as valid values. At the moment, Kotlin's <code>*Map</code> classes has the exact implementation as Java's <code>*Map</code> classes.</p>\n<p>If you still want to achieve non-null-value only map, you'll need to implement your own e.g. extending <code>Map</code> or wrap around it</p>\n<p>More specifically, behind the scene, <code>mapOf</code> gives us a Kotlin's LinkedHashMap which is not a different class but a just a <strong>typealias</strong> of Java's LinkedHashMap</p>\n<p>Maps.kt</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>public fun &lt;K, V&gt; mapOf(vararg pairs: Pair&lt;K, V&gt;): Map&lt;K, V&gt; =\n    if (pairs.size &gt; 0) pairs.toMap(LinkedHashMap(mapCapacity(pairs.size))) else emptyMap()\n</code></pre>\n<p>TypeAliases.kt</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@SinceKotlin(&quot;1.1&quot;) public actual typealias LinkedHashMap&lt;K, V&gt; = java.util.LinkedHashMap&lt;K, V&gt;\n</code></pre>\n<p>You can try <code>map.getValue(key)</code> instead of <code>map.get(key)</code> but I personally think that's unclean and confusing.</p>\n<p>Perhaps some others from Dan Lew <a href=\"https://blog.danlew.net/2017/06/14/convincing-the-kotlin-compiler-that-code-is-safe/\" rel=\"nofollow noreferrer\">here</a> would be useful for you?</p>\n<p>My Kotlin version is <code>1.3.72-release-IJ2020.1-3</code></p>\n"}], "owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13661, "favorite_count": 2, "accepted_answer_id": 42705954, "answer_count": 4, "score": 17, "last_activity_date": 1606923200, "creation_date": 1489094916, "question_id": 42705761, "link": "https://stackoverflow.com/questions/42705761/kotlin-map-with-non-null-values", "title": "Kotlin Map with non null values", "body": "<p>Let say that I have a Map for translating a letter of a playing card to an integer </p>\n\n<pre><code> val rank = mapOf(\"J\" to 11, \"Q\" to 12, \"K\" to 13, \"A\" to 14)\n</code></pre>\n\n<p>When working with the map it seems that I always have to make a null safety check even though the Map and Pair are immutable:</p>\n\n<pre><code>val difference = rank[\"Q\"]!! - rank[\"K\"]!!\n</code></pre>\n\n<p>I guess this comes from that generic types have Any? supertype. Why can't this be resolved at compile time when both Map and Pair are immutable?</p>\n"}, {"tags": ["android", "gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 3819227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e8fda1d6d9f56a444a83d814c12af1?s=128&d=identicon&r=PG&f=1", "display_name": "RaINqer", "link": "https://stackoverflow.com/users/3819227/rainqer"}, "is_accepted": true, "score": 3, "last_activity_date": 1489078905, "creation_date": 1489078905, "answer_id": 42701259, "question_id": 42701258, "link": "https://stackoverflow.com/questions/42701258/kotlin-crash-cannot-convert-the-provided-notation-to-an-object-of-type-dependenc/42701259#42701259", "title": "Kotlin crash Cannot convert the provided notation to an object of type Dependency: org.jetbrains.kotlin.gradle.dsl.KotlinProjectExtension_Decorated", "body": "<p>Turns out that \"kotlin\" keyword is used within gradle configuration of the new version of kotlin dependecy. The solution was to change the dependency labelname from kotlin to (for example) kotlinDependency</p>\n\n<p>Old:</p>\n\n<pre><code>ext {\n    kotlin_version = '1.1.0'\n    //(...)\n    kotlin = \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\n</code></pre>\n\n<p>New:</p>\n\n<pre><code>ext {\n    kotlin_version = '1.1.0'\n    //(...)\n    kotlinDependency = \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\n</code></pre>\n"}], "owner": {"reputation": 436, "user_id": 3819227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e8fda1d6d9f56a444a83d814c12af1?s=128&d=identicon&r=PG&f=1", "display_name": "RaINqer", "link": "https://stackoverflow.com/users/3819227/rainqer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "accepted_answer_id": 42701259, "answer_count": 1, "score": 2, "last_activity_date": 1489078905, "creation_date": 1489078905, "question_id": 42701258, "link": "https://stackoverflow.com/questions/42701258/kotlin-crash-cannot-convert-the-provided-notation-to-an-object-of-type-dependenc", "title": "Kotlin crash Cannot convert the provided notation to an object of type Dependency: org.jetbrains.kotlin.gradle.dsl.KotlinProjectExtension_Decorated", "body": "<p>After bumping version of kotlin from 1.0.5-2 to 1.1.0 I get a crash:</p>\n\n<pre><code>Error:(114, 0) Cannot convert the provided notation to an object of type Dependency: org.jetbrains.kotlin.gradle.dsl.KotlinProjectExtension_Decorated@5a39a165.\nThe following types/formats are supported:\n  - Instances of Dependency.\n  - String or CharSequence values, for example 'org.gradle:gradle-core:1.0'.\n  - Maps, for example [group: 'org.gradle', name: 'gradle-core', version: '1.0'].\n  - FileCollections, for example files('some.jar', 'someOther.jar').\n  - Projects, for example project(':some:project:path').\n  - ClassPathNotation, for example gradleApi().\n\nComprehensive documentation on dependency notations is available in DSL reference for DependencyHandler type.\n</code></pre>\n\n<p>The project is not synced so I cannot call gradle dependencies or anything else.</p>\n\n<p>main build.gradle</p>\n\n<pre><code>ext {\n    kotlin_version = '1.1.0'\n    //(...)\n    kotlin = \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\n</code></pre>\n\n<p>Sync crashes in app build.gradle</p>\n\n<pre><code>dependencies {\n    compile kotlin\n    //...\n}\n</code></pre>\n"}, {"tags": ["android", "rx-java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2354, "user_id": 1081896, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/73fd9757bddc793c9d95228c62b50aaa?s=128&d=identicon&r=PG", "display_name": "Gorets", "link": "https://stackoverflow.com/users/1081896/gorets"}, "edited": false, "score": 0, "creation_date": 1489073489, "post_id": 42699131, "comment_id": 72520433, "body": "Thanks, got it. Using <code>map</code> on the second call is similar solution I did"}], "tags": [], "owner": {"reputation": 6571, "user_id": 244702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22b3a019954e1e8a25f303a5ed555340?s=128&d=identicon&r=PG", "display_name": "Kevin Robatel", "link": "https://stackoverflow.com/users/244702/kevin-robatel"}, "is_accepted": true, "score": 0, "last_activity_date": 1489073045, "creation_date": 1489073045, "answer_id": 42699131, "question_id": 42698723, "link": "https://stackoverflow.com/questions/42698723/how-to-get-emitted-value-from-first-observable/42699131#42699131", "title": "How to get emitted value from first observable", "body": "<p>You have to use something else than <code>flatMap</code> like <code>zip</code> (<a href=\"http://reactivex.io/documentation/operators/zip.html\" rel=\"nofollow noreferrer\">doc</a>).<br>\nWith <code>zip</code> the two observable will be combined two by two.</p>\n\n<p>Or you can continue to use <code>flatMap</code> but add a <code>map</code> on the second observable like: </p>\n\n<pre><code>api.anotherCall(symbol = it) // emitted value \n    .map { secondValue -&gt; it to secondValue }\n    .subscribeOn(Schedulers.newThread())\n    .observeOn(AndroidSchedulers.mainThread())\n</code></pre>\n\n<p>Then the end observer will receive a <code>Pair&lt;&gt;</code>.</p>\n"}], "owner": {"reputation": 2354, "user_id": 1081896, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/73fd9757bddc793c9d95228c62b50aaa?s=128&d=identicon&r=PG", "display_name": "Gorets", "link": "https://stackoverflow.com/users/1081896/gorets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 42699131, "answer_count": 1, "score": 1, "last_activity_date": 1489073045, "creation_date": 1489071941, "question_id": 42698723, "link": "https://stackoverflow.com/questions/42698723/how-to-get-emitted-value-from-first-observable", "title": "How to get emitted value from first observable", "body": "<p>I have a flow like this </p>\n\n<pre><code>        Observable.fromIterable(configuration.symbols) // list of data (for ex. 0, 1, 2, 3)\n                    .subscribeOn(Schedulers.newThread())\n                    .observeOn(AndroidSchedulers.mainThread())\n                    .flatMap {\napi.anotherCall(\n                                symbol = it) // emitted value \n                                .subscribeOn(Schedulers.newThread())\n                                .observeOn(AndroidSchedulers.mainThread())\n                    }\n                    .subscribe { res -&gt;\n                        {\n                            Ln.i(res) // result, but it would be perfect to know this data + symbol as a second param\n                        }\n                    }\n</code></pre>\n\n<p>Thanks for any help</p>\n\n<p>ps Kotlin syntax</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1489151310, "post_id": 42698177, "comment_id": 72558081, "body": "I forgot about ts2kt, added to my answer."}], "answers": [{"comments": [{"owner": {"reputation": 271, "user_id": 2776080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d9efe7883ff7b80e8ca1a2d3f157e7?s=128&d=identicon&r=PG&f=1", "display_name": "eloo", "link": "https://stackoverflow.com/users/2776080/eloo"}, "edited": false, "score": 0, "creation_date": 1489490664, "post_id": 42700474, "comment_id": 72683364, "body": "If it&#39;s deprecated which is the new way to use JQuery? Cause I found that variable of type JQuery had only a few methods like <code>.html()</code> and <code>.next()</code> but missing many of the JQuery library"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 271, "user_id": 2776080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d9efe7883ff7b80e8ca1a2d3f157e7?s=128&d=identicon&r=PG&f=1", "display_name": "eloo", "link": "https://stackoverflow.com/users/2776080/eloo"}, "edited": false, "score": 0, "creation_date": 1489558419, "post_id": 42700474, "comment_id": 72717974, "body": "I described in my answer: took jquery definitions from DefenitelyTyped, use ts2kt to create kotlin interfaces/functions for jquery."}, {"owner": {"reputation": 271, "user_id": 2776080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d9efe7883ff7b80e8ca1a2d3f157e7?s=128&d=identicon&r=PG&f=1", "display_name": "eloo", "link": "https://stackoverflow.com/users/2776080/eloo"}, "edited": false, "score": 0, "creation_date": 1489570611, "post_id": 42700474, "comment_id": 72724405, "body": "But this are 3rd party libraries right? If kotlin says jq is deprecated is cause they have implemented a better way in the base kotlin library (with no need of 3rd parties), or am I wrong?"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 271, "user_id": 2776080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d9efe7883ff7b80e8ca1a2d3f157e7?s=128&d=identicon&r=PG&f=1", "display_name": "eloo", "link": "https://stackoverflow.com/users/2776080/eloo"}, "edited": false, "score": 0, "creation_date": 1489583494, "post_id": 42700474, "comment_id": 72733662, "body": "No, jq in koltin is just bunch of interfaces, actual implementation is jquery, which should be included in your html to work."}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 3, "last_activity_date": 1489151246, "last_edit_date": 1489151246, "creation_date": 1489076742, "answer_id": 42700474, "question_id": 42698177, "link": "https://stackoverflow.com/questions/42698177/kotlin-get-target-of-jquery-click/42700474#42700474", "title": "Kotlin get target of jquery click", "body": "<p>I suppose you use <code>jq</code> from standard library, and first of all <code>jq</code> from standard library is deprecated.</p>\n\n<p>Then lets look at definition of <code>click</code> handler:</p>\n\n<pre><code>public fun click(handler: (MouseClickEvent) -&gt; Unit): JQuery\n</code></pre>\n\n<p>As you see, <code>it</code> in your case is <code>MouseClickEvent</code>. But <code>MouseClickEvent</code> and <code>MouseEvent</code> doesn't contains <code>target</code>.</p>\n\n<p>You can write own bindings for jquery:</p>\n\n<pre><code>import jquery.MouseClickEvent\nimport jquery.MouseEvent\n\n@JsName(\"$\")\npublic external fun jq(selector: String): JQuery\n\npublic external class JQuery() {\n    public fun click(handler: (ExtendedMouseClickEvent) -&gt; Unit): JQuery\n}\n\npublic external class ExtendedMouseClickEvent() : MouseEvent {\n    public val target: JQuery\n    public val which: Int\n}\n\nfun main(args: Array&lt;String&gt;) {\n    jq(\"#element\").click {\n        console.log(it.target)\n    }\n}\n</code></pre>\n\n<p>Also, you can convert existing definitions for TypeScript to kotlin.</p>\n\n<p>jQuery typings: <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/jquery\" rel=\"nofollow noreferrer\">https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/jquery</a></p>\n\n<p>ts2kt: <a href=\"https://github.com/Kotlin/ts2kt\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/ts2kt</a></p>\n"}], "owner": {"reputation": 271, "user_id": 2776080, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d9efe7883ff7b80e8ca1a2d3f157e7?s=128&d=identicon&r=PG&f=1", "display_name": "eloo", "link": "https://stackoverflow.com/users/2776080/eloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1489151246, "creation_date": 1489070472, "question_id": 42698177, "link": "https://stackoverflow.com/questions/42698177/kotlin-get-target-of-jquery-click", "title": "Kotlin get target of jquery click", "body": "<p>If I write the next code I get the compiler error: \"Unresolved refrence:target\"</p>\n\n<pre><code>jq(\"#element\").click {\n    console.log(it.target)\n}\n</code></pre>\n\n<p>However, if I print only \"it\" it has the property target</p>\n\n<pre><code>r.Event {originalEvent: MouseEvent, type: \"click\", target: button, currentTarget: button, relatedTarget: null\u2026}\n</code></pre>\n\n<p>How I'm supoused to get the target then?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 10, "creation_date": 1489070644, "post_id": 42698001, "comment_id": 72518332, "body": "This keyword is related to multi-platform projects, but this functionality has been neither released nor announced and is currently an internal feature."}, {"owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1498013862, "post_id": 42698001, "comment_id": 76317429, "body": "@hotkey are you aware of any examples of the feature being used?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "edited": false, "score": 0, "creation_date": 1498051107, "post_id": 42698001, "comment_id": 76338654, "body": "@spierce7, I don&#39;t know of any usage outside the Kotlin project itself."}, {"owner": {"reputation": 509, "user_id": 2832996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46814cb72562ea0b2e5b9da4cad32ea6?s=128&d=identicon&r=PG", "display_name": "Aro", "link": "https://stackoverflow.com/users/2832996/aro"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1512577129, "post_id": 42698001, "comment_id": 82316840, "body": "@hotkey Here&#39;s an example of a multiplatform app made by Jetbrains: <a href=\"https://github.com/JetBrains/kotlinconf-app\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlinconf-app</a>"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 509, "user_id": 2832996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46814cb72562ea0b2e5b9da4cad32ea6?s=128&d=identicon&r=PG", "display_name": "Aro", "link": "https://stackoverflow.com/users/2832996/aro"}, "edited": false, "score": 0, "creation_date": 1512581046, "post_id": 42698001, "comment_id": 82319318, "body": "@Aro, indeed, thanks for the update."}], "answers": [{"comments": [{"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1498633630, "post_id": 44762890, "comment_id": 76571891, "body": "These should be all one need to know about <code>header</code> and <code>impl</code> keyword`. Thanks for digging that out."}], "tags": [], "owner": {"reputation": 509, "user_id": 2832996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46814cb72562ea0b2e5b9da4cad32ea6?s=128&d=identicon&r=PG", "display_name": "Aro", "link": "https://stackoverflow.com/users/2832996/aro"}, "is_accepted": true, "score": 6, "last_activity_date": 1512577480, "last_edit_date": 1512577480, "creation_date": 1498489939, "answer_id": 44762890, "question_id": 42698001, "link": "https://stackoverflow.com/questions/42698001/what-does-header-impl-keyword-mean-in-kotlin/44762890#44762890", "title": "What does header/impl keyword mean in kotlin?", "body": "<h1>UPDATE 2:</h1>\n\n<p>Multiplatform project support has been released.</p>\n\n<ul>\n<li><a href=\"https://blog.jetbrains.com/kotlin/2017/11/kotlin-1-2-released/\" rel=\"nofollow noreferrer\">Link to the announcement</a></li>\n<li><a href=\"https://github.com/JetBrains/kotlinconf-app\" rel=\"nofollow noreferrer\">Multiplatform application for KotlinConf 2017</a></li>\n</ul>\n\n<h1>UPDATE 1:</h1>\n\n<p>The <code>impl</code> and <code>header</code> keywords have been replaced by <code>actual</code> and <code>expect</code> in the preview release of multiplatform projects for Kotlin.</p>\n\n<p>The official documentation can be found <a href=\"https://kotlinlang.org/docs/reference/multiplatform.html\" rel=\"nofollow noreferrer\">here</a> or at this\nGitHub <a href=\"https://github.com/JetBrains/kotlin-web-site/blob/b056703475e9a7e586c588d634a23b36132e0620/pages/docs/reference/multiplatform.md\" rel=\"nofollow noreferrer\">permalink</a></p>\n\n<hr>\n\n<p>It was talked about in <a href=\"https://vimeo.com/215556547#t=868s\" rel=\"nofollow noreferrer\">this video</a> at 14:28.</p>\n\n<p>From the <a href=\"https://www.slideshare.net/abreslav/future-of-kotlin-how-agile-can-language-development-be\" rel=\"nofollow noreferrer\">slides</a>:\n<a href=\"https://i.stack.imgur.com/IGECL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IGECL.jpg\" alt=\"Slide #14\"></a></p>\n\n<p>Basically, <code>header</code> will be used when writing interfaces for modules that work across multiple platforms (JVM, JS, and Native). The<code>impl</code> keyword will be used when writing an implementation for a specific platform.</p>\n"}], "owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 1, "accepted_answer_id": 44762890, "answer_count": 1, "score": 6, "last_activity_date": 1512577480, "creation_date": 1489069984, "last_edit_date": 1498633703, "question_id": 42698001, "link": "https://stackoverflow.com/questions/42698001/what-does-header-impl-keyword-mean-in-kotlin", "title": "What does header/impl keyword mean in kotlin?", "body": "<p>Just moments ago when I was exploring the Kotlin github repo, I found something interesting: Kotlin now seems to have a header keyword.</p>\n\n<p><a href=\"https://github.com/JetBrains/kotlin/blob/be95f66b1343af2a4df2fd022d1ddd6000d5a017/libraries/stdlib/common/src/kotlin/CollectionsH.kt\" rel=\"nofollow noreferrer\">CollectionsH.kt</a>:</p>\n\n<pre><code> open header class ArrayList&lt;E&gt; : MutableList&lt;E&gt; {\n\n //...\n\n header inline fun &lt;reified T&gt; Array&lt;out T&gt;?.orEmpty(): Array&lt;out T&gt;\n</code></pre>\n\n<p>What does it mean? Is it some public available feature or a internal feature to help stdlib development?</p>\n\n<hr>\n\n<p>EDIT: There seems to be a <code>impl</code> keyword that work in conjunction with header. What's that?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "edited": false, "score": 0, "creation_date": 1520860006, "post_id": 42696747, "comment_id": 85475127, "body": "I get deprecation warnings now for the <code>JRE</code> version, but the <code>JDK</code> version seems to be missing Autocloseable.use, is there a reason? (both were Kotlin <code>1.2.21</code>)"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 10, "last_activity_date": 1489071487, "last_edit_date": 1489071487, "creation_date": 1489066319, "answer_id": 42696747, "question_id": 42696551, "link": "https://stackoverflow.com/questions/42696551/use-with-autoclose-in-kotlin/42696747#42696747", "title": "Use with autoclose in Kotlin", "body": "<p>The <code>kotlin-stdlib</code> is meant for usage with JDK 6 and above, so that it is not aware of <code>AutoCloseable</code> (only added in Java 7).</p>\n\n<p>But you can find the function you need in <a href=\"https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-stdlib-jre7/1.1.0\" rel=\"noreferrer\"><code>kotlin-stdlib-jre7</code></a>, the stdlib extension for JDK 7 added for Kotlin 1.1. You can replace the <code>kotlin-stdlib</code> dependency with it since it depends on the base stdlib itself.</p>\n\n<p>It is defined as:</p>\n\n<pre><code>public inline fun &lt;T : AutoCloseable?, R&gt; T.use(block: (T) -&gt; R): R { ... }\n</code></pre>\n\n<p><sup><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/use.html\" rel=\"noreferrer\">(api reference)</a> <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jre7/src/kotlin/AutoCloseable.kt#L33\" rel=\"noreferrer\">(github source)</a></sup></p>\n\n<p>And it was first mentioned in <a href=\"https://blog.jetbrains.com/kotlin/2016/07/first-glimpse-of-kotlin-1-1-coroutines-type-aliases-and-more/\" rel=\"noreferrer\">this blog post</a>.</p>\n"}], "owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1412, "favorite_count": 0, "accepted_answer_id": 42696747, "answer_count": 1, "score": 7, "last_activity_date": 1489071487, "creation_date": 1489065769, "question_id": 42696551, "link": "https://stackoverflow.com/questions/42696551/use-with-autoclose-in-kotlin", "title": "Use with autoclose in Kotlin", "body": "<p>In stdlib/ kotlin.io we find</p>\n\n<pre><code>inline fun &lt;T : Closeable?, R&gt; T.use(block: (T) -&gt; R): R (source)\n</code></pre>\n\n<p>However it is implemented on Closeable and not on the superinterface AutoCloseable. When working with some frameworks that use AutoCloseable this can be a bit painfull.</p>\n\n<p>Why doesn't Kotlin support \"use\" with AutoCloseble ?</p>\n"}, {"tags": ["android", "unit-testing", "data-binding", "kotlin", "android-databinding"], "comments": [{"owner": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1489150169, "post_id": 42692556, "comment_id": 72557348, "body": "<code>dataBinding {         enabled = true     }</code> - I don&#39;t think this changes in Kotlin, so try it with a <code>= </code> in your <code>build.gradle</code> file."}, {"owner": {"reputation": 182, "user_id": 4423292, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HwZacaNS5fk/AAAAAAAAAAI/AAAAAAAABLU/bAVZErbfqSo/photo.jpg?sz=128", "display_name": "Trevor Wang", "link": "https://stackoverflow.com/users/4423292/trevor-wang"}, "reply_to_user": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1489380118, "post_id": 42692556, "comment_id": 72629312, "body": "@Amylinn I do confirm that data binding works when I run application in IDE.  It fails only when I try to run test.  I changed as you mentioned, it doesn&#39;t work either."}, {"owner": {"reputation": 65602, "user_id": 401025, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/VSVpF.jpg?s=128&g=1", "display_name": "Upvote", "link": "https://stackoverflow.com/users/401025/upvote"}, "edited": false, "score": 0, "creation_date": 1489672337, "post_id": 42692556, "comment_id": 72781168, "body": "@TrevorWang did you find a solution?"}, {"owner": {"reputation": 182, "user_id": 4423292, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HwZacaNS5fk/AAAAAAAAAAI/AAAAAAAABLU/bAVZErbfqSo/photo.jpg?sz=128", "display_name": "Trevor Wang", "link": "https://stackoverflow.com/users/4423292/trevor-wang"}, "reply_to_user": {"reputation": 65602, "user_id": 401025, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/VSVpF.jpg?s=128&g=1", "display_name": "Upvote", "link": "https://stackoverflow.com/users/401025/upvote"}, "edited": false, "score": 0, "creation_date": 1489989265, "post_id": 42692556, "comment_id": 72893692, "body": "@LostinBielefeld Not yet."}], "answers": [{"comments": [{"owner": {"reputation": 1374, "user_id": 2742194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1aaec4bd136a8f5b3095fe3646b029b?s=128&d=identicon&r=PG", "display_name": "ilya", "link": "https://stackoverflow.com/users/2742194/ilya"}, "reply_to_user": {"reputation": 182, "user_id": 4423292, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HwZacaNS5fk/AAAAAAAAAAI/AAAAAAAABLU/bAVZErbfqSo/photo.jpg?sz=128", "display_name": "Trevor Wang", "link": "https://stackoverflow.com/users/4423292/trevor-wang"}, "edited": false, "score": 0, "creation_date": 1490609411, "post_id": 42974558, "comment_id": 73171415, "body": "Right but (I haven&#39;t dig to exact reason) you should explicitly specify this plugin in gradle. In my project it used to work before I had been updated to kotlin 1.1 @TrevorWang"}], "tags": [], "owner": {"reputation": 1374, "user_id": 2742194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1aaec4bd136a8f5b3095fe3646b029b?s=128&d=identicon&r=PG", "display_name": "ilya", "link": "https://stackoverflow.com/users/2742194/ilya"}, "is_accepted": true, "score": 20, "last_activity_date": 1490267970, "creation_date": 1490267970, "answer_id": 42974558, "question_id": 42692556, "link": "https://stackoverflow.com/questions/42692556/android-databinding-unit-test-error-failed-to-parse-data-binding-compiler-option/42974558#42974558", "title": "android databinding unit test error Failed to parse data binding compiler options. Params:", "body": "<p>You need to add <code>apply plugin: 'kotlin-kapt'</code> to your application gradle file. Explanations in this article (New Experimental Annotation Processing) <a href=\"https://blog.jetbrains.com/kotlin/2016/09/kotlin-1-0-4-is-here/#sthash.y5NtHdYW.dpuf\" rel=\"noreferrer\">https://blog.jetbrains.com/kotlin/2016/09/kotlin-1-0-4-is-here/#sthash.y5NtHdYW.dpuf</a> </p>\n"}], "owner": {"reputation": 182, "user_id": 4423292, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HwZacaNS5fk/AAAAAAAAAAI/AAAAAAAABLU/bAVZErbfqSo/photo.jpg?sz=128", "display_name": "Trevor Wang", "link": "https://stackoverflow.com/users/4423292/trevor-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3730, "favorite_count": 3, "accepted_answer_id": 42974558, "answer_count": 1, "score": 15, "last_activity_date": 1490584739, "creation_date": 1489054557, "last_edit_date": 1490584739, "question_id": 42692556, "link": "https://stackoverflow.com/questions/42692556/android-databinding-unit-test-error-failed-to-parse-data-binding-compiler-option", "title": "android databinding unit test error Failed to parse data binding compiler options. Params:", "body": "<p>When I try to setup unit test for my kotlin android project, I met the following error. Any one has met this kind of issue before?</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/KT-16190\" rel=\"noreferrer\">This has been marked as a bug on official bug tracker</a></p>\n\n<pre>\n    FAILURE: Build failed with an exception.\n    <strong><em>\n    * What went wrong:\n    Execution failed for task ':app:compileDebugUnitTestJavaWithJavac'.\n    > java.lang.RuntimeException: Failed to parse data binding compiler options. Params:\n      kapt.annotations : /Users/trevor/Dev/Android/workspace/gitlab-example/app/build/tmp/kapt/debugUnitTest/wrappers/annotations.debugUnitTest.txt\n      kapt.kotlin.generated : /Users/trevor/Dev/Android/workspace/gitlab-example/app/build/tmp/kapt/debugUnitTest/kotlinGenerated\n    </em></strong>\n    * Try:\n    Run with --info or --debug option to get more log output.\n\n    * Exception is:\n    org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:compileDebugUnitTestJavaWithJavac'.\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:84)\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:55)\n            at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:62)\n            at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n            at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:88)\n            at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:46)\n            at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)\n            at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n            at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n            at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.execute(DefaultTaskGraphExecuter.java:236)\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.execute(DefaultTaskGraphExecuter.java:228)\n            at org.gradle.internal.Transformers$4.transform(Transformers.java:169)\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:106)\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:61)\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:228)\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:215)\n            at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:77)\n            at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:58)\n            at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:32)\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:113)\n            at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\n            at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n            at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\n            at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\n            at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n            at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n            at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\n            at org.gradle.initialization.DefaultGradleLauncher$3.execute(DefaultGradleLauncher.java:196)\n            at org.gradle.initialization.DefaultGradleLauncher$3.execute(DefaultGradleLauncher.java:193)\n            at org.gradle.internal.Transformers$4.transform(Transformers.java:169)\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:106)\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:56)\n            at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:193)\n            at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:119)\n            at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:102)\n            at org.gradle.launcher.exec.GradleBuildController.run(GradleBuildController.java:71)\n            at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:28)\n            at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n            at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:41)\n            at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)\n            at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:75)\n            at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:49)\n            at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:44)\n            at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:29)\n            at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\n            at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n            at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:47)\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n            at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n            at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n            at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n            at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n            at org.gradle.util.Swapper.swap(Swapper.java:38)\n            at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n            at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n            at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)\n            at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n            at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\n            at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n            at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n            at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\n            at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\n            at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\n    Caused by: java.lang.RuntimeException: java.lang.RuntimeException: Failed to parse data binding compiler options. Params:\n    kapt.annotations : /Users/trevor/Dev/Android/workspace/gitlab-example/app/build/tmp/kapt/debugUnitTest/wrappers/annotations.debugUnitTest.txt\n    kapt.kotlin.generated : /Users/trevor/Dev/Android/workspace/gitlab-example/app/build/tmp/kapt/debugUnitTest/kotlinGenerated\n            at com.sun.tools.javac.main.Main.compile(Main.java:553)\n            at com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:129)\n            at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:138)\n            at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:46)\n            at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:33)\n            at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:104)\n            at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:53)\n            at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:38)\n            at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:35)\n            at org.gradle.api.internal.tasks.compile.CleaningJavaCompilerSupport.execute(CleaningJavaCompilerSupport.java:25)\n            at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:206)\n            at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:187)\n            at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:130)\n            at com.android.build.gradle.tasks.factory.AndroidJavaCompile.compile(AndroidJavaCompile.java:49)\n            at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n            at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$IncrementalTaskAction.doExecute(DefaultTaskClassInfoStore.java:163)\n            at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:134)\n            at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:123)\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:95)\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:76)\n            ... 70 more\n    Caused by: java.lang.RuntimeException: Failed to parse data binding compiler options. Params:\n    kapt.annotations : /Users/trevor/Dev/Android/workspace/gitlab-example/app/build/tmp/kapt/debugUnitTest/wrappers/annotations.debugUnitTest.txt\n    kapt.kotlin.generated : /Users/trevor/Dev/Android/workspace/gitlab-example/app/build/tmp/kapt/debugUnitTest/kotlinGenerated\n            at android.databinding.annotationprocessor.ProcessDataBinding.readArguments(ProcessDataBinding.java:159)\n            at android.databinding.annotationprocessor.ProcessDataBinding.process(ProcessDataBinding.java:65)\n            at org.jetbrains.kotlin.annotation.AnnotationProcessorWrapper.process(AnnotationProcessorWrapper.kt:129)\n            at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:794)\n            at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:705)\n            at com.sun.tools.javac.processing.JavacProcessingEnvironment.access$1800(JavacProcessingEnvironment.java:91)\n            at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1035)\n            at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1176)\n            at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1170)\n            at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:856)\n            at com.sun.tools.javac.main.Main.compile(Main.java:523)\n            ... 89 more\n    Caused by: java.lang.NumberFormatException: null\n            at android.databinding.tool.DataBindingCompilerArgs.readFromOptions(DataBindingCompilerArgs.java:92)\n            at android.databinding.annotationprocessor.ProcessDataBinding.readArguments(ProcessDataBinding.java:152)\n            ... 99 more\n\n\n</pre>\n\n<p>My gradle scripts are as following:</p>\n\n<pre>\n    apply plugin: 'com.android.application'\n    apply plugin: 'kotlin-android'\n\n    android {\n        compileSdkVersion 25\n        buildToolsVersion \"25.0.2\"\n        defaultConfig {\n            applicationId \"com.example.abce\"\n            minSdkVersion 15\n            targetSdkVersion 25\n            versionCode 1\n            versionName \"1.0\"\n            testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        }\n        buildTypes {\n            release {\n                minifyEnabled false\n                proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            }\n        }\n\n        dataBinding {\n            enabled = true\n        }\n    }\n\n    kapt {\n        generateStubs = true\n    }\n\n    dependencies {\n        compile fileTree(dir: 'libs', include: ['*.jar'])\n        androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n            exclude group: 'com.android.support', module: 'support-annotations'\n        })\n        compile 'com.android.support:appcompat-v7:25.2.0'\n        compile 'com.android.support.constraint:constraint-layout:1.0.1'\n\n        compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n        kapt \"com.android.databinding:compiler:2.3.0\"\n\n        testCompile 'junit:junit:4.12'\n        testCompile \"org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version\"\n    }\n    repositories {\n        mavenCentral()\n    }\n\n</pre>\n\n<pre>\n\n    buildscript {\n        ext.kotlin_version = '1.1.0'\n        repositories {\n            jcenter()\n        }\n        dependencies {\n            classpath 'com.android.tools.build:gradle:2.3.0'\n            classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n            // NOTE: Do not place your application dependencies here; they belong\n            // in the individual module build.gradle files\n        }\n    }\n\n    allprojects {\n        repositories {\n            jcenter()\n        }\n    }\n\n    task clean(type: Delete) {\n        delete rootProject.buildDir\n    }\n\n</pre>\n\n<pre>\n\n    import org.junit.Assert.assertEquals\n    import org.junit.Test\n\n    /**\n     * Example local unit test, which will execute on the development machine (host).\n\n     * @see [Testing documentation](http://d.android.com/tools/testing)\n     */\n    class ExampleUnitTest {\n        @Test\n        @Throws(Exception::class)\n        fun addition_isCorrect() {\n            assertEquals(4, (2 + 2).toLong())\n        }\n\n        @Test\n        fun additon_isNotCorrect() {\n            assertEquals(4, (2 + 3))\n        }\n    }\n</pre>\n"}]