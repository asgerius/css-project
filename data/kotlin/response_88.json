[{"tags": ["inputstream", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1473947632, "post_id": 39500046, "comment_id": 66341621, "body": "I think &quot;readText&quot; would be a better name than &quot;useText&quot; for the extension function you propose. When I read &quot;useText&quot; I expect a function like <code>use</code> or <code>useLines</code> which executes a block function on what is being &quot;used&quot;. e.g. <code>inputStream.useText { text -&gt; ... }</code> On the other hand, when I read &quot;readText&quot; I expect a function which returns the text: <code>val inputAsString = inputStream.readText()</code>."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1473973809, "post_id": 39500046, "comment_id": 66356520, "body": "True, but readText already has the wrong meaning, so wanted to signify it was more like the <code>use</code> functions in that regard. at least in context of this Q&amp;A.   maybe a new verb can be found..."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 3, "creation_date": 1473980756, "post_id": 39500046, "comment_id": 66358895, "body": "@mfulton26 I went with <code>readTextAndClose()</code> for this example to avoid conflicting with <code>readText()</code> patterns of not closing, and with <code>use</code> patterns wanting a lambda, since I&#39;m not trying to introduce a new stdlib function I don&#39;t want to do more than make a point about using extensions to save future labour."}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1474107887, "post_id": 39500046, "comment_id": 66403896, "body": "@JaysonMinard why don&#39;t you mark this for answer? it&#39;s great though :-)"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 247, "last_activity_date": 1473980688, "last_edit_date": 1473980688, "creation_date": 1473889209, "answer_id": 39500046, "question_id": 39500045, "link": "https://stackoverflow.com/questions/39500045/in-kotlin-how-do-i-read-the-entire-contents-of-an-inputstream-into-a-string/39500046#39500046", "title": "In Kotlin, how do I read the entire contents of an InputStream into a String?", "body": "<p>Kotlin has a specific extensions just for this purpose.  </p>\n\n<p><strong>The simplest:</strong></p>\n\n<pre><code>val inputAsString = input.bufferedReader().use { it.readText() }  // defaults to UTF-8\n</code></pre>\n\n<p>And in this example you could decide between <code>bufferedReader()</code> or just <code>reader()</code>.  The call to the function <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html\"><code>Closeable.use()</code></a> will automatically close the input at the end of the lambda's execution.  </p>\n\n<p><strong>Further reading:</strong></p>\n\n<p>If you do this type of thing a lot, you could write this as an extension function:</p>\n\n<pre><code>fun InputStream.readTextAndClose(charset: Charset = Charsets.UTF_8): String {\n    return this.bufferedReader(charset).use { it.readText() }\n}\n</code></pre>\n\n<p>Which you could then call easily as:</p>\n\n<pre><code>val inputAsString = input.readTextAndClose()  // defaults to UTF-8\n</code></pre>\n\n<p>On a side note, all Kotlin extension functions that require knowing the <code>charset</code> already default to <code>UTF-8</code>, so if you require a different encoding you need to adjust the code above in calls to include an encoding for <code>reader(charset)</code> or <code>bufferedReader(charset)</code>.</p>\n\n<p><strong>Warning:</strong> You might see examples that are shorter:</p>\n\n<pre><code>val inputAsString = input.reader().readText() \n</code></pre>\n\n<p>But these <strong>do not close the stream</strong>.  Make sure you check the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/index.html\">API documentation for all of the IO functions</a> you use to be sure which ones close and which do not.  Usually if they include the word <code>use</code> (such as <code>useLines()</code> or <code>use()</code>) thy close the stream after.  An exception is that <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/read-text.html\"><code>File.readText()</code></a> differs from <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-reader/read-text.html\"><code>Reader.readText()</code></a> in that the former does not leave anything open and the latter does indeed require an explicit close.</p>\n\n<p><strong>See also:</strong>  <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/index.html\">Kotlin IO related extension functions</a></p>\n"}, {"comments": [{"owner": {"reputation": 1183, "user_id": 1511077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688ec604ef6cb96baadeaaa5d4036858?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny Lebedev", "link": "https://stackoverflow.com/users/1511077/evgeny-lebedev"}, "edited": false, "score": 1, "creation_date": 1562231523, "post_id": 46509396, "comment_id": 100316330, "body": "Your example contains flaws: 1) For cross-platform paths you should use <code>Paths.get()</code> method. 2) For streams - try-resource feature (In kotlin: .use {})"}], "tags": [], "owner": {"reputation": 1333, "user_id": 6427595, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mmi4NN5UzJI/AAAAAAAAAAI/AAAAAAAAAY4/i_B5k1UEhtQ/photo.jpg?sz=128", "display_name": "Mallikarjun M", "link": "https://stackoverflow.com/users/6427595/mallikarjun-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1506834280, "creation_date": 1506834280, "answer_id": 46509396, "question_id": 39500045, "link": "https://stackoverflow.com/questions/39500045/in-kotlin-how-do-i-read-the-entire-contents-of-an-inputstream-into-a-string/46509396#46509396", "title": "In Kotlin, how do I read the entire contents of an InputStream into a String?", "body": "<p>An example that reads contents of an InputStream to a String</p>\n\n<pre><code>import java.io.File\nimport java.io.InputStream\nimport java.nio.charset.Charset\n\nfun main(args: Array&lt;String&gt;) {\n    val file = File(\"input\"+File.separator+\"contents.txt\")\n    var ins:InputStream = file.inputStream()\n    var content = ins.readBytes().toString(Charset.defaultCharset())\n    println(content)\n}\n</code></pre>\n\n<p>For Reference - <a href=\"https://www.tutorialkart.com/kotlin/read-contents-of-a-file-in-kotlin/#inputstream\" rel=\"nofollow noreferrer\">Kotlin Read File</a></p>\n"}, {"comments": [{"owner": {"reputation": 12964, "user_id": 266531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/619aaf27f793d8ffdbc879c74884c0cc?s=128&d=identicon&r=PG", "display_name": "Kirby", "link": "https://stackoverflow.com/users/266531/kirby"}, "edited": false, "score": 0, "creation_date": 1599177277, "post_id": 63728681, "comment_id": 112700991, "body": "to improve the answer, please give some narrative explaining how this works"}], "tags": [], "owner": {"reputation": 2243, "user_id": 3466808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pr9RU.jpg?s=128&g=1", "display_name": "Sam Chen", "link": "https://stackoverflow.com/users/3466808/sam-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1599237110, "last_edit_date": 1599237110, "creation_date": 1599153597, "answer_id": 63728681, "question_id": 39500045, "link": "https://stackoverflow.com/questions/39500045/in-kotlin-how-do-i-read-the-entire-contents-of-an-inputstream-into-a-string/63728681#63728681", "title": "In Kotlin, how do I read the entire contents of an InputStream into a String?", "body": "<p>\u3010<strong>Method 1 | Manually Close Stream</strong>\u3011</p>\n<pre><code>private fun getFileText(uri: Uri):String {\n    val inputStream = contentResolver.openInputStream(uri)!!\n\n    val bytes = inputStream.readBytes()        //see below\n\n    val text = String(bytes, StandardCharsets.UTF_8)    //specify charset\n\n    inputStream.close()\n\n    return text\n}\n</code></pre>\n<ul>\n<li><code>inputStream.readBytes()</code> requires manually close the stream: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-input-stream/read-bytes.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-input-stream/read-bytes.html</a></li>\n</ul>\n<hr />\n<p>\u3010<strong>Method 2 | Automatically Close Stream</strong>\u3011</p>\n<pre><code>private fun getFileText(uri: Uri): String {\n    return contentResolver.openInputStream(uri)!!.bufferedReader().use {it.readText() }\n}\n</code></pre>\n<ul>\n<li><p>You can specify the charset inside <code>bufferedReader()</code>, default is <code>UTF-8</code>:\n<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-input-stream/buffered-reader.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-input-stream/buffered-reader.html</a></p>\n</li>\n<li><p><code>bufferedReader()</code> is an upgrade version of <code>reader()</code>, it is more versatile:\n<a href=\"https://stackoverflow.com/questions/55510968/how-exactly-does-bufferedreader-work-in-kotlin\">How exactly does bufferedReader() work in Kotlin?</a></p>\n</li>\n<li><p><code>use()</code> can automatically close the stream when the block is done:\n<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html</a></p>\n</li>\n</ul>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54454, "favorite_count": 16, "accepted_answer_id": 39500046, "answer_count": 3, "score": 119, "last_activity_date": 1599237110, "creation_date": 1473889209, "last_edit_date": 1610973576, "question_id": 39500045, "link": "https://stackoverflow.com/questions/39500045/in-kotlin-how-do-i-read-the-entire-contents-of-an-inputstream-into-a-string", "title": "In Kotlin, how do I read the entire contents of an InputStream into a String?", "body": "<p>I recently saw code for reading entire contents of an <code>InputStream</code> into a String in Kotlin, such as:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>// input is of type InputStream\nval baos = ByteArrayOutputStream()\ninput.use { it.copyTo(baos) }\nval inputAsString = baos.toString()\n</code></pre>\n<p>And also:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val reader = BufferedReader(InputStreamReader(input))\ntry {\n    val results = StringBuilder()\n    while (true) { \n        val line = reader.readLine()\n        if (line == null) break\n        results.append(line) \n    }\n    val inputAsString = results.toString()\n} finally {\n    reader.close()\n}\n</code></pre>\n<p>And even this that looks smoother since it auto-closes the <code>InputStream</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val inputString = BufferedReader(InputStreamReader(input)).useLines { lines -&gt;\n    val results = StringBuilder()\n    lines.forEach { results.append(it) }\n    results.toString()\n}\n</code></pre>\n<p>Or slight variation on that one:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val results = StringBuilder()\nBufferedReader(InputStreamReader(input)).forEachLine { results.append(it) }\nval resultsAsString = results.toString()   \n</code></pre>\n<p>Then this functional fold thingy:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val inputString = input.bufferedReader().useLines { lines -&gt;\n    lines.fold(StringBuilder()) { buff, line -&gt; buff.append(line) }.toString()\n}\n</code></pre>\n<p>Or a <strong>bad</strong> variation which doesn't close the <code>InputStream</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val inputString = BufferedReader(InputStreamReader(input))\n        .lineSequence()\n        .fold(StringBuilder()) { buff, line -&gt; buff.append(line) }\n        .toString()\n</code></pre>\n<p>But they are all clunky and I keep finding newer and different versions of the same... and some of them never even close the <code>InputStream</code>.  What is a non-clunky (idiomatic) way to read the <code>InputStream</code>?</p>\n<p><strong>Note:</strong> <em>this question is intentionally written and answered by the author (<a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the idiomatic answers to commonly asked Kotlin topics are present in SO.</em></p>\n"}, {"tags": ["json", "jackson", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 5188979, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81be8dbc4c95c605bd5a9aa631023896?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/5188979/joel"}, "edited": false, "score": 0, "creation_date": 1473939651, "post_id": 39496509, "comment_id": 66336271, "body": "Thanks for the detailed answer and the helpful tips!"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 5, "last_activity_date": 1473875902, "last_edit_date": 1473875902, "creation_date": 1473874583, "answer_id": 39496509, "question_id": 39494621, "link": "https://stackoverflow.com/questions/39494621/convert-bytearrayoutputstream-to-json-in-kotlin/39496509#39496509", "title": "Convert ByteArrayOutputStream to json in Kotlin", "body": "<p>You should use <code>mapper.readValue</code> to deserialize JSON into an object.</p>\n\n<p>Using raw Jackson <strong>without</strong> the <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow\">Jackson-Kotlin module</a>:</p>\n\n\n\n<pre><code>val map: Map&lt;String, String&gt; = JSON.readValue(\"\"\"{\"name\" :\"test\"}\"\"\",\n                      object : TypeReference&lt;Map&lt;String, String&gt;&gt;() {})\n</code></pre>\n\n<p>This passes in an <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-expressions\" rel=\"nofollow\">object expression</a> with superclass <code>TypeReference</code> specifying the the type you are wanting to create with full generics still intact (you method suffers from type erasure).  </p>\n\n<p>Instead, if you <strong>are using</strong> the <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow\">Jackson-Kotlin module</a> you only need:</p>\n\n<pre><code>val map: Map&lt;String, String&gt; = JSON.readValue(\"\"\"{\"name\" :\"test\"}\"\"\")\n</code></pre>\n\n<p>Since it has helper/extension functions to hide some of the uglier things like <code>TypeReference</code> creation.</p>\n\n<p><strong>You should always use the <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow\">Jackson-Kotlin module</a> with Kotlin code</strong> so that you can instantiate any type of Kotlin object including data classes that have all <code>val</code> parameters and no default constructors, have it understand nullability, and also deal with default values for constructor parameters.  A simple stand-alone example:</p>\n\n<pre><code>import com.fasterxml.jackson.module.kotlin.*\n\nval JSON = jacksonObjectMapper() // creates ObjectMapper() and adds Kotlin module in one step\n\nval map: Map&lt;String, String&gt; = JSON.readValue(\"\"\"{\"name\" :\"test\"}\"\"\")\n</code></pre>\n\n<p>Notice the import <code>.*</code> so that it picks up all the extension functions otherwise you need to explicitly import:  <code>com.fasterxml.jackson.module.kotlin.readValue</code></p>\n\n<p><strong>Or in your case the modified code would be:</strong></p>\n\n<pre><code>import com.fasterxml.jackson.module.kotlin.readValue\n\nval objectMapper = jacksonObjectMappe() // instead of ObjectMapper()\n\n... \n\n@POST @Path(\"/test\")\nfun test(@Context request: ContainerRequest): Response {\n    val bodyAsString = request.entityStream.bufferedReader().readText() \n    val map: Map&lt;String, Any&gt; = when (request.headers.getFirst(\"Content-Type\")) {\n        \"application/json\" -&gt; objectMapper.readValue(bodyAsString) \n        \"application/x-www-form-urlencoded\" -&gt; LinkedHashMap()\n        else -&gt; throw UnsupportedOperationException()\n    }\n    //....handle the map\n    return Response.status(200).build()\n}\n</code></pre>\n\n<p>The code has also been cleaned up a little to remove the use of a <code>var</code> and to read the entity stream in a more Kotlin friendly way.</p>\n\n<p>Also note that the <code>Content-Type</code> header may be more complicated, it could contain encoding as well such as:</p>\n\n<pre><code>Content-type: application/json; charset=utf-8\n</code></pre>\n\n<p>So you may want a utility function that checks if the header is \"equal to <code>application/json</code> or starts with <code>application/json;</code>\" instead of only an equality check.</p>\n\n<p>Lastly you could pass the <code>request.entityStream</code> directly to <code>objectMapper.readValue</code> and never copy it into a string at all.  There are various overloads for <code>readValue</code> that are helpful for these types of inputs.</p>\n"}], "owner": {"reputation": 391, "user_id": 5188979, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81be8dbc4c95c605bd5a9aa631023896?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/5188979/joel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1744, "favorite_count": 0, "accepted_answer_id": 39496509, "answer_count": 1, "score": 0, "last_activity_date": 1473875902, "creation_date": 1473867704, "last_edit_date": 1473874892, "question_id": 39494621, "link": "https://stackoverflow.com/questions/39494621/convert-bytearrayoutputstream-to-json-in-kotlin", "title": "Convert ByteArrayOutputStream to json in Kotlin", "body": "<p>I'm trying to create a resource for 2 services, 1 in application/x-www-form-urlencoded and string payload and the other application/json format with json body.</p>\n\n<p>I have this code:</p>\n\n<pre><code>@POST @Path(\"/test\")\nfun test(@Context request: ContainerRequest): Response {\n    val baos = ByteArrayOutputStream()\n    request.entityStream.use { it.copyTo(baos) }\n    val ipnRawData = baos.toString()\n    var map : Map&lt;String,Any&gt;\n    map = when (request.headers.getFirst(\"Content-Type\")) {\n        \"application/json\" -&gt; objectMapper.convertValue(ipnRawData,Map::class.java) as Map&lt;String,Any&gt;\n        \"application/x-www-form-urlencoded\" -&gt; LinkedHashMap()\n        else -&gt; throw UnsupportedOperationException()\n    }\n    //....handle the map\n    return Response.status(200).build()\n}\n</code></pre>\n\n<p>But when I try to run it with the json option, and body: <code>{\"name\" :\"test\"}</code>), I get an error: </p>\n\n<blockquote>\n  <p>\"java.lang.IllegalArgumentException: Can not construct instance of java.util.LinkedHashMap: no String-argument constructor/factory method to deserialize from String value ('{\n  \"name\" :\"test\"}')\"</p>\n</blockquote>\n\n<p>Thanks for any help, Yoel</p>\n"}, {"tags": ["android", "fragment", "toolbar", "kotlin"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1473855127, "post_id": 39489887, "comment_id": 66297800, "body": "Does Kotlin have static methods? If not, what you&#39;ve shown makes sense"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473885265, "post_id": 39489887, "comment_id": 66315948, "body": "If all of these only work with one class, <code>MainActivity</code> why are they just not methods on that class?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473885965, "post_id": 39489887, "comment_id": 66316307, "body": "You asked an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">xy question</a> ... you decided on an answer to a programming problem and then asked for help using that pre-decided answer.  But in this case your answer is not the correct one at all.  Idiomatic Kotlin would not use statics or object declarations in a case like this, but instead use <a href=\"http://stackoverflow.com/a/39499145/3679676\">stackoverflow.com/a/39499145/3679676</a>"}], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": false, "score": 4, "last_activity_date": 1473855274, "creation_date": 1473855274, "answer_id": 39490203, "question_id": 39489887, "link": "https://stackoverflow.com/questions/39489887/call-method-from-kotlin-class/39490203#39490203", "title": "Call method from Kotlin class", "body": "<p>Sounds like <code>MyToolbarUtils</code> should be an <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-expressions-and-declarations\" rel=\"nofollow\">object declaration</a> instead of a class.</p>\n\n<p>Another way would be to declare functions inside this class on the top level in a file (not inside any class) and just refer to them by their simple name.</p>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 9140698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Sv6s.jpg?s=128&g=1", "display_name": "chandani c patel", "link": "https://stackoverflow.com/users/9140698/chandani-c-patel"}, "edited": false, "score": 0, "creation_date": 1514986136, "post_id": 39490252, "comment_id": 83130551, "body": "then how to call that function from fragment and adapter ??"}, {"owner": {"reputation": 548, "user_id": 9273211, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9b012cbc9683a1b10f9a4c73c5086fb7?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle ", "link": "https://stackoverflow.com/users/9273211/kyle"}, "reply_to_user": {"reputation": 309, "user_id": 9140698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Sv6s.jpg?s=128&g=1", "display_name": "chandani c patel", "link": "https://stackoverflow.com/users/9140698/chandani-c-patel"}, "edited": false, "score": 0, "creation_date": 1533062370, "post_id": 39490252, "comment_id": 90205551, "body": "@chandanicpatel...<code>Class.Method()</code> or using example above... <code>MyToolbarUtils.showToolbar()</code>. OP put this in his question"}], "tags": [], "owner": {"reputation": 404, "user_id": 261652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be38890ab2e16fef20bfb10f088c39d?s=128&d=identicon&r=PG", "display_name": "ilya.dorofeev", "link": "https://stackoverflow.com/users/261652/ilya-dorofeev"}, "is_accepted": true, "score": 17, "last_activity_date": 1473855431, "creation_date": 1473855431, "answer_id": 39490252, "question_id": 39489887, "link": "https://stackoverflow.com/questions/39489887/call-method-from-kotlin-class/39490252#39490252", "title": "Call method from Kotlin class", "body": "<p>Convert your <strong>class</strong> into an <strong>object</strong> which is supposed to work similarly to java static methods.</p>\n\n<p>You can get more info here: <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations</a></p>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473890249, "post_id": 39490543, "comment_id": 66318033, "body": "This doesn&#39;t really make sense. He isn&#39;t trying to call the code from Java, nor do you need to have the <code>@JvmName</code> no the <code>ClassInKotlin</code> nor the calls from Java."}], "tags": [], "owner": {"reputation": 3278, "user_id": 3282461, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/v6pSx.png?s=128&g=1", "display_name": "Ankit Kumar", "link": "https://stackoverflow.com/users/3282461/ankit-kumar"}, "is_accepted": false, "score": -3, "last_activity_date": 1473856303, "creation_date": 1473856303, "answer_id": 39490543, "question_id": 39489887, "link": "https://stackoverflow.com/questions/39489887/call-method-from-kotlin-class/39490543#39490543", "title": "Call method from Kotlin class", "body": "<pre><code>// Kotlin\n\n@file:JvmName(\"DemoUtils\")\npackage demo\n\nclass ClassInKotlin\n\nfun methodInKotlin() {\n}\n\n// Java\nnew demo.ClassInKotlin();\ndemo.DemoUtils.methodInKotlin();\n</code></pre>\n\n<p>Try this. This should work.</p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 3, "last_activity_date": 1473886149, "last_edit_date": 1473886149, "creation_date": 1473884970, "answer_id": 39499145, "question_id": 39489887, "link": "https://stackoverflow.com/questions/39489887/call-method-from-kotlin-class/39499145#39499145", "title": "Call method from Kotlin class", "body": "<p>Others answered how to make your functions feel like static methods, but for this use case you have a more idiomatic option.</p>\n\n<p><strong>Extension functions in Kotlin replace static utility classes in Java:</strong></p>\n\n<p>Since <strong>all</strong> of your functions take an <code>Activity</code> as a parameter, why not use <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extension-functions\" rel=\"nofollow\">extension functions</a> and make them extend the <code>Activity</code> or <code>MainActivity</code> class instead?</p>\n\n\n\n<pre><code>fun MainActivity.hideToolbar() {\n    supportActionBar!!.hide()\n}\n\nfun MainActivity.showToolbar(tag: String) {\n    setToolbarTitle(tag)\n    supportActionBar!!.show()\n}\n\nfun Activity.setToolbarTitle(tag: String) {\n    title = when (tag) {\n        \"Main_fragment\" -&gt; title = resources.getString(R.string.Main_screen)\n        \"Add_note\" -&gt; title = resources.getString(R.string.Add_note)\n        else -&gt; \"\" // or did you mean this to be an exception?\n    }\n}\n</code></pre>\n\n<p>Now they are all in context of your <code>MainActivity</code> or <code>Activity</code> classes (the <code>this</code> is now an instance of one of those), you don't have to go hunt for them in some other unrelated <code>ActivityUtils</code> class.  Whenever you are inside the activity class you can simply:</p>\n\n<pre><code>showToolbar(\"Main_fragment\")\n</code></pre>\n\n<p>or from somewhere else where you have a reference to an activity:</p>\n\n<pre><code>// you have a reference of MainActivity type\nmyMainActivity.showToolbar(\"Main_fragment\")\n\n// you have a reference you can cast to MainActivity type\n(someActivity as MainActivity).showToolbar(\"Main_fragment\")\n\n// this function works with any Activity\nsomeActivity.setToolbarTitle(\"Add_note\")\n</code></pre>\n\n<p>Also note that I cleaned up the code a little and used <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow\"><code>when</code> as an expression</a> to set the title, and also the removal of <code>var</code> (it is rare when you need a <code>var</code>, so always think about how to work with <code>val</code>).   And as an expression the <code>when</code> will need an <code>else</code> clause, so I made that the same as you default <code>\"\"</code> empty string.</p>\n\n<p><strong>Alternative as Class Methods:</strong></p>\n\n<p>Since all 3 methods all require an instance of <code>MainActivity</code> (based on their casting), why not just put them into <code>MainActivity</code> as member functions.</p>\n\n<pre><code>class MainActivity ... {\n    ...\n\n    fun hideToolbar() {\n        supportActionBar!!.hide()\n    }\n\n    fun showToolbar(tag: String) {\n        setToolbarTitle(tag)\n        supportActionBar!!.show()\n    }\n\n    fun setToolbarTitle(tag: String) {\n        title = when (tag) {\n            \"Main_fragment\" -&gt; title = resources.getString(R.string.Main_screen)\n            \"Add_note\" -&gt; title = resources.getString(R.string.Add_note)\n            else -&gt; \"\" // or did you mean this to be an exception?\n        }\n    }\n}\n</code></pre>\n\n<p>And call them from any reference to <code>MainActivity</code>.  </p>\n\n<p><strong>Alternative as Object Declaration:</strong></p>\n\n<p>Lastly as suggested by others and for completeness, here they are in a utility class acting similar to statics but instead methods on a singleton <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow\">object declaration</a>:</p>\n\n<pre><code>object MyToolbarUtils() {\n    fun hideToolbar(activity: MainActivity) {\n        activity.supportActionBar!!.hide()\n    }\n\n    fun showToolbar(activity: MainActivity, tag: String) {\n        setToolbarTitle(activity, tag)\n        activity.supportActionBar!!.show()\n    }\n\n    fun setToolbarTitle(activity: Activity, tag: String) {\n        activity.title = when (tag) {\n            \"Main_fragment\" -&gt; title = resources.getString(R.string.Main_screen)\n            \"Add_note\" -&gt; title = resources.getString(R.string.Add_note)\n            else -&gt; \"\" // or did you mean this to be an exception?\n        }\n    }\n}\n</code></pre>\n\n<p>But I think this is the worst and least Kotlin-like way to extend functionality of another class.  Classes/Objects like <code>SomethingUtils</code> full of statics means that you probably should be writing <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extension-functions\" rel=\"nofollow\">extension functions</a> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 1387, "user_id": 651377, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/537563472e02359f184f0d4a5da446a5?s=128&d=identicon&r=PG", "display_name": "Alok Gupta", "link": "https://stackoverflow.com/users/651377/alok-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1576344201, "creation_date": 1576344201, "answer_id": 59337453, "question_id": 39489887, "link": "https://stackoverflow.com/questions/39489887/call-method-from-kotlin-class/59337453#59337453", "title": "Call method from Kotlin class", "body": "<p>Create a singleton class in Kotlin using the object keyword and call Kotlin singleton class in Java like below :</p>\n\n<pre><code>object SampleSingleton {\n   fun someMethod() { \n     println(\"I love coding\")\n   }\n}\n</code></pre>\n\n<p>If from Java then as follows</p>\n\n<pre><code>public static void main(String args[]) {\n   SampleSingleton.INSTANCE.someMethod();\n}\n</code></pre>\n\n<p>or from Kotlin class as follows</p>\n\n<pre><code>SampleSingleton.someMethod()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 7145285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbbaf66181195dd8c704794eb802f86?s=128&d=identicon&r=PG&f=1", "display_name": "xwaxes", "link": "https://stackoverflow.com/users/7145285/xwaxes"}, "is_accepted": false, "score": 0, "last_activity_date": 1602792823, "creation_date": 1602792823, "answer_id": 64379040, "question_id": 39489887, "link": "https://stackoverflow.com/questions/39489887/call-method-from-kotlin-class/64379040#64379040", "title": "Call method from Kotlin class", "body": "<p>I am not sure if this meets your definition of a better way, but a simpler way would have been to replace your two lines of code:</p>\n<pre><code>val setToolbarTitle = MyToolbarUtils()\nsetToolbarTitle.showToolbar(activity, tag)\n</code></pre>\n<p>with this single line;</p>\n<pre><code>MyToolbarUtils().showToolbar(activity, tag)\n</code></pre>\n<p>Happy Coding!</p>\n"}], "owner": {"reputation": 785, "user_id": 6743114, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b7fa572f4e8c7a4625a52c07c6ac440b?s=128&d=identicon&r=PG&f=1", "display_name": "Stepan", "link": "https://stackoverflow.com/users/6743114/stepan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41874, "favorite_count": 1, "accepted_answer_id": 39490252, "answer_count": 6, "score": 8, "last_activity_date": 1602792823, "creation_date": 1473854272, "last_edit_date": 1473854783, "question_id": 39489887, "link": "https://stackoverflow.com/questions/39489887/call-method-from-kotlin-class", "title": "Call method from Kotlin class", "body": "<p>I have an util Kotlin class where I set toolbar title, hide or show toolbar depends on the fragment:</p>\n\n<pre><code>class MyToolbarUtils() {\n\n    fun hideToolbar(activity: Activity) {\n        (activity as MainActivity).supportActionBar!!.hide()\n    }\n\n    fun showToolbar(activity: Activity, tag: String) {\n        setToolbarTitle(tag, activity)\n        (activity as MainActivity).supportActionBar!!.show()\n    }\n\n    fun setToolbarTitle(tag: String, activity: Activity) {\n        var title = \"\"\n        when (tag) {\n            \"Main_fragment\" -&gt; title = activity.resources.getString(R.string.Main_screen)\n            \"Add_note\" -&gt; title = activity.resources.getString(R.string.Add_note)\n        }\n        activity.title = title\n    }\n}\n</code></pre>\n\n<p>how to call showToolbar(...) from Fragment?\nI just tried <code>MyToolbarUtils.showToolbar(..)</code> but it can not be possible</p>\n\n<p>only one way I discover is: </p>\n\n<pre><code>val setToolbarTitle = MyToolbarUtils()\nsetToolbarTitle.showToolbar(activity, tag)\n</code></pre>\n\n<p>but there must be better way to do that..</p>\n"}, {"tags": ["java", "json", "design-patterns", "configuration", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 5, "last_activity_date": 1473877410, "last_edit_date": 1473877410, "creation_date": 1473847653, "answer_id": 39487784, "question_id": 39487535, "link": "https://stackoverflow.com/questions/39487535/choosing-a-strategy-via-json-config/39487784#39487784", "title": "Choosing a strategy via JSON config", "body": "<p>One way to solve it is to use class name to load and create an instance of the strategy like so:</p>\n\n<pre><code>val agentClass = classLoader.loadClass(config.agentStrategy)!!\nval agent = agentClass.newInstance() as SearchStrategy\n</code></pre>\n\n<p>Another way would be to register all search strategies and then match one using given <code>config</code> like so:</p>\n\n<pre><code>class SearchStrategies(val strategies: List&lt;SearchStrategy&gt;){\n    fun findForConfig(config:Config) = strategies.find { it.javaClass.name.contains(config.agentStrategy) }\n}\n\n\n//somewhere at boot time\nval searchStrategies = SearchStrategies(listOf(FastSearch(), AccurateSearch()))\n\n\n//when needed\nval config = ...\nval agent = searchStrategies.findForConfig(config)\n</code></pre>\n\n<p>Finally it's also possible to make use of <a href=\"https://docs.oracle.com/javase/tutorial/sound/SPI-intro.html\" rel=\"nofollow\">SPI</a> to achieve greater extensibility and standard complianace at the cost of complexity.</p>\n"}], "owner": {"reputation": 1493, "user_id": 982995, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c36203feca850963f5a5b4b7de24722f?s=128&d=identicon&r=PG", "display_name": "Craig Innes", "link": "https://stackoverflow.com/users/982995/craig-innes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 39487784, "answer_count": 1, "score": 4, "last_activity_date": 1473877410, "creation_date": 1473846955, "question_id": 39487535, "link": "https://stackoverflow.com/questions/39487535/choosing-a-strategy-via-json-config", "title": "Choosing a strategy via JSON config", "body": "<p>I am implementing a learning agent in Java/Kotlin. Part of this agent's functionality involves it searching through a large list of possible options. There are multiple good ways to search the possibility space, and I frequently change my mind about which one is the best. Therefore, I decided to implement it as a strategy pattern.</p>\n\n<pre><code>class Agent(val searchStrategy : SearchStrategy){\n    fun search(input : InputGraph) : Result{\n        return searchStrategy.search()\n    }\n}\n\ninterface SearchStrategy{\n    fun search(input : InputGraph) : Result\n}\n\nclass FastSearch : SearchStrategy{\n    //implementation here\n}\n\nclass AccurateSearch : SearchStrategy{\n   // implementation here\n}\n\nclass ExperimentalSerach : SearchStrategy{\n  // implentation here\n}\n</code></pre>\n\n<p>Recently, I've decided to run a large suite of experiments which test the effectiveness of various system parameters. This is done through a python script, which kicks of each experiment by running the compiled jar with a different config.json file as an argument. Something like:</p>\n\n<pre><code>{\n    \"numSamples\" : 5000,\n    \"environmentDifficulty\" : 3,\n    \"hazardProbability\" : 0.4,\n    //etc..\n}\n</code></pre>\n\n<p>I now want to give the experimenter the ability to configure the strategy used by the agent as well. What is the best way to do this? My immediate thought is that I could just add an additional string field to the config.json:</p>\n\n<pre><code>{\n    \"numSamples\" : 5000,\n    \"environmentDifficulty\" : 3,\n    \"hazardProbability\" : 0.4,\n    \"agentStrategy\": \"FastSearch\"\n}\n</code></pre>\n\n<p>Then construct it in the main system with an when or if branch:</p>\n\n<pre><code>val searchStrategy = when(config.agentStrategy){\n    \"FastSearch\" -&gt; FastSearch()\n    \"AccurateSearch\" -&gt; AccurateSearch()\n    \"ExperimentalSearch\" -&gt; ExperimentalSearch()\nval agent = agent(searchStrategy)\n</code></pre>\n\n<p>But this seems like it will start to get awkward / difficult to maintain if I begin to add more strategies. Is there a better way?</p>\n"}, {"tags": ["android", "realm", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473781349, "post_id": 39472561, "comment_id": 66267357, "body": "can you show more of your build.gradle, are those dependencies in your <code>buildScript</code> block?"}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1473782714, "post_id": 39472561, "comment_id": 66268168, "body": "Try restarting your IDE: <a href=\"https://youtrack.jetbrains.com/issue/KT-12912\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-12912</a>"}, {"owner": {"reputation": 41, "user_id": 6826884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f71c1cd16fbee4bfe31b7e73ef4929fe?s=128&d=identicon&r=PG&f=1", "display_name": "Griill", "link": "https://stackoverflow.com/users/6826884/griill"}, "edited": false, "score": 1, "creation_date": 1473837597, "post_id": 39472561, "comment_id": 66287507, "body": "the issue was in instant run mode, when i disabled it everything became ok"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473981218, "post_id": 39472561, "comment_id": 66359010, "body": "Griill, I made notes in my answer below about instant run problems and Realm, there are likely more than just this one, so is good to turn instant run off for now."}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 2, "last_activity_date": 1473863002, "last_edit_date": 1495541700, "creation_date": 1473862331, "answer_id": 39492652, "question_id": 39472561, "link": "https://stackoverflow.com/questions/39472561/cannot-build-android-project-after-adding-realm-class/39492652#39492652", "title": "Cannot build Android project after adding Realm class", "body": "<p><strong>Android Studio <em>Instant Run</em> feature and Realm are not compatible.</strong>  And using this feature can cause many non-obvious errors and compile time or runtime.  Including the one you are reporting.</p>\n\n<p>In Android, when using <em>Instant Run</em> feature some plugins that do byte code manipulation may not function correctly.  In the <a href=\"https://developer.android.com/studio/run/index.html#instant-run\" rel=\"nofollow noreferrer\">documentation for <em>Instant Run</em></a> it says:</p>\n\n<blockquote>\n  <p>Certain third-party plugins that perform bytecode enhancement may cause issues with how Instant Run instruments your app. If you experience these issues, but want to continue using Instant Run, you should disable those plugins for your debug build variant. You can also help improve compatibility with third-party plugins by filing a bug</p>\n</blockquote>\n\n<p>Realm <a href=\"https://realm.io/news/android-installation-change/\" rel=\"nofollow noreferrer\">talks about their change to use bytecode weaving</a> at compile time so this is the type of plugin that might break with <em>Instant Run</em> either at compile time or at runtime.  And sure enough in the <a href=\"https://github.com/realm/realm-java/issues/1832\" rel=\"nofollow noreferrer\">Realm issue 1832</a> they talk about problems with <em>Instant Run</em> (there are over <a href=\"https://github.com/realm/realm-java/search?utf8=%E2%9C%93&amp;q=%22instant+run%22&amp;type=Issues\" rel=\"nofollow noreferrer\">28 issues with the phrase \"Instant Run\"</a> in the Realm issue tracker).  Also other Stack Overflow questions talks about these problems, such as: <a href=\"https://stackoverflow.com/questions/38144443/realm-causes-my-app-to-crash-when-trying-to-build-a-realmconfiguration\">Realm causes my app to crash when trying to build a RealmConfiguration</a>. </p>\n\n<p>The only current solution is to disable the <em>Instant Run</em> feature in Android Studio preferences, clean your project, and then build/run again.</p>\n"}], "owner": {"reputation": 41, "user_id": 6826884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f71c1cd16fbee4bfe31b7e73ef4929fe?s=128&d=identicon&r=PG&f=1", "display_name": "Griill", "link": "https://stackoverflow.com/users/6826884/griill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1473864202, "creation_date": 1473777008, "last_edit_date": 1473864202, "question_id": 39472561, "link": "https://stackoverflow.com/questions/39472561/cannot-build-android-project-after-adding-realm-class", "title": "Cannot build Android project after adding Realm class", "body": "<p>I've created <code>SelfGeneration</code> Realm class with Kotlin and after adding that the project is no longer building. How do I fix this?</p>\n\n<pre><code>@RealmClass open class SelfGeneration() : BaseRealmObject {\n    @PrimaryKey override var id: Int? = null\n    open var type: ItemType? = null\n    open var model: String? = null\n    open var watt: Int? = null\n    companion object {\n        fun getById(id: Int): SelfGeneration {\n            val realm = Realm.getDefaultInstance()\n            val selfGeneration = realm.where(SelfGeneration::class.java)\n                    .equalTo(BaseRealmObject.Field.ID, id)\n                    .findFirst()\n            return realm.copyFromRealm(selfGeneration)\n        }\n    }\n}\n</code></pre>\n\n<p>Dependencies:</p>\n\n<pre><code>dependencies {\n    classpath com.android.tools.build:gradle:2.1.3\n    classpath io.realm:realm-gradle-plugin:1.2.0\n    classpath com.neenbedankt.gradle.plugins:android-apt:1.8\n    classpath \"com.fernandocejas.frodo:frodo-plugin:0.8.1\n}\n</code></pre>\n\n<p>Gradle error:</p>\n\n<blockquote>\n  <p>Error:Execution failed for task  javassist.<br/>\n  NotFoundException: com.theappsolution.conectric.model.SelfGeneration</p>\n</blockquote>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 404, "user_id": 261652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be38890ab2e16fef20bfb10f088c39d?s=128&d=identicon&r=PG", "display_name": "ilya.dorofeev", "link": "https://stackoverflow.com/users/261652/ilya-dorofeev"}, "edited": false, "score": 0, "creation_date": 1473770196, "post_id": 39469158, "comment_id": 66259981, "body": "Do you want to get rid of if-conditions? Where does the &#39;v&#39; come from?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 404, "user_id": 261652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be38890ab2e16fef20bfb10f088c39d?s=128&d=identicon&r=PG", "display_name": "ilya.dorofeev", "link": "https://stackoverflow.com/users/261652/ilya-dorofeev"}, "edited": false, "score": 0, "creation_date": 1473771335, "post_id": 39469158, "comment_id": 66260687, "body": "@ilya.dorofeev hhe shows the final intended function that gets rid of all the if conditions."}], "answers": [{"tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 1, "last_activity_date": 1473767196, "creation_date": 1473767196, "answer_id": 39469259, "question_id": 39469158, "link": "https://stackoverflow.com/questions/39469158/kotlin-passing-operator-as-a-function-parameter/39469259#39469259", "title": "Kotlin: Passing operator as a function parameter", "body": "<p>Change <code>() -&gt; Unit</code> into <code>Int.(Int) -&gt; Int</code>. Then all the other code should work as you've written it there.</p>\n\n<p>On the calling side it <code>this</code> is the first int, and the first parameter is the second int: <code>{ other -&gt; this * other }</code></p>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1473784122, "post_id": 39470291, "comment_id": 66268957, "body": "This works as well: <code>evaluate2(value1, value2, Int::times)</code>, so you don&#39;t need a separate function, just the last one"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1473859787, "post_id": 39470291, "comment_id": 66300940, "body": "Interesting that the signature doesn&#39;t match, but because of the receiver being the first parameter it still works.  cool.   Is that intentional or a bug?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1473860024, "post_id": 39470291, "comment_id": 66301118, "body": "confirmed it is intentional, wil update answer, thanks @voddan"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1473864263, "post_id": 39470291, "comment_id": 66304210, "body": "It was a pre 1.0 feature)"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 9, "last_activity_date": 1473891061, "last_edit_date": 1473891061, "creation_date": 1473770164, "answer_id": 39470291, "question_id": 39469158, "link": "https://stackoverflow.com/questions/39469158/kotlin-passing-operator-as-a-function-parameter/39470291#39470291", "title": "Kotlin: Passing operator as a function parameter", "body": "<p>Writing a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#higher-order-functions\" rel=\"noreferrer\">higher order function</a> using a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\" rel=\"noreferrer\">function type</a> as a parameter allows using both built-in operators and <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expression-syntax\" rel=\"noreferrer\">lambda expressions</a> for the operation, so this would look like: </p>\n\n\n\n<pre><code>fun evaluate(first: Int?, second: Int?, op: (Int, Int) -&gt; Int): Int {\n    return op(first ?: 0, second ?: 0)\n} \n</code></pre>\n\n<p>Which can be called with built-in operators such as:</p>\n\n<pre><code>val r1 = evaluate(value1, value2, Int::times) \nval r2 = evaluate(value1, value2, Int::plus)\nval r3 = evaluate(value1, value2, Int::minus) \nval r4 = evaluate(value1, value2, Int::div) \n</code></pre>\n\n<p>And with custom functions:</p>\n\n<pre><code>val r5 = evaluate(value1, value2) { a, b -&gt; (a * a) + b }\n</code></pre>\n\n<p>Now you can also assign the operators to variables, such as you <code>v</code>:</p>\n\n<pre><code>val v: (Int, Int)-&gt;Int = Int::times  // typing needed on left to avoid ambiguous alternatives\n// and then later...\nval r6 = evaluate(value1, value2, v) \n</code></pre>\n\n<p>Note that a function written for signature <code>Int.(Int)-&gt;Int</code> can be passed into a parameter expecting <code>(Int, Int)-&gt;Int</code> because the receiver <code>this</code> will be passed in as the first parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 5381825, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/shF6d.jpg?s=128&g=1", "display_name": "dzrkot", "link": "https://stackoverflow.com/users/5381825/dzrkot"}, "is_accepted": false, "score": 0, "last_activity_date": 1474018300, "creation_date": 1474018300, "answer_id": 39528104, "question_id": 39469158, "link": "https://stackoverflow.com/questions/39469158/kotlin-passing-operator-as-a-function-parameter/39528104#39528104", "title": "Kotlin: Passing operator as a function parameter", "body": "<p>you can try do that:</p>\n\n<pre><code>fun evaluate(first: Int?, second: Int? , v:String ): Int = v.op(first ?: 0, second ?: 0)\n\nfun String.op(first:Int,second:Int):Int = when (this) {\n    \"*\" -&gt; first * second\n    \"+\" -&gt; first + second\n//....\n    else -&gt; throw Exception()\n}       \nfun main(args: Array&lt;String&gt;) {\n    println(evaluate(2,3,\"*\"))\n    println(evaluate(2,3,\"+\"))\n}\n</code></pre>\n"}], "owner": {"reputation": 7853, "user_id": 1534407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/btu16.jpg?s=128&g=1", "display_name": "vtor", "link": "https://stackoverflow.com/users/1534407/vtor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1331, "favorite_count": 1, "accepted_answer_id": 39470291, "answer_count": 3, "score": 8, "last_activity_date": 1474018300, "creation_date": 1473766917, "last_edit_date": 1495540303, "question_id": 39469158, "link": "https://stackoverflow.com/questions/39469158/kotlin-passing-operator-as-a-function-parameter", "title": "Kotlin: Passing operator as a function parameter", "body": "<p>I've the following function in Kotlin</p>\n\n<pre><code>fun evaluate(first:Int?, second:Int?) {\n    var result = 0\n    if (v.equals('*')) {\n        result = (first ?: 0) * (second ?: 0)\n    } else if (v.equals('+')) {\n        result = (first ?: 0) + (second ?: 0)\n    } else if (v.equals('-')) {\n        result = (first ?: 0) - (second ?: 0)\n    } else if (v.equals('/')) {\n        result = (first ?: 0) / (second ?: 0)\n    }\n    return result   \n}\n</code></pre>\n\n<p>I want to change it in a way so that I can pass as a third parameter needed operator and evalute the expression. Something like</p>\n\n<pre><code>fun evaluate(first:Int?, second:Int?, op: () -&gt; Unit):Int {\n    return (first ?: 0).op(second ?: 0)\n}\n</code></pre>\n\n<p>How can I pass the operator as a function in this case? I checked the same kind of a <a href=\"https://stackoverflow.com/questions/16120697/kotlin-how-to-pass-a-function-as-parameter-to-another\">question</a>, but it is not clear how you can do that with operator.</p>\n"}, {"tags": ["android", "android-intent", "kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 2, "creation_date": 1473748160, "post_id": 39462397, "comment_id": 66247489, "body": "The exception happens at com.pashabred.passlin.Enterring.onCreate(Enterring.kt:17). What is on that line?"}], "answers": [{"tags": [], "owner": {"reputation": 3495, "user_id": 1993577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646fb3da2e0fdccacb2a4474a3a6f806?s=128&d=identicon&r=PG", "display_name": "Ruchira Randana", "link": "https://stackoverflow.com/users/1993577/ruchira-randana"}, "is_accepted": false, "score": 0, "last_activity_date": 1473749186, "creation_date": 1473749186, "answer_id": 39463769, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/39463769#39463769", "title": "Intents in Kotlin", "body": "<p>You're having a null pointer exception on the <code>onCreate</code> method of the new activity. Please check the <code>onCreate</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 971, "user_id": 5892317, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MrDgUVUsPmE/AAAAAAAAAAI/AAAAAAAABEE/-TMJPqjjrT8/photo.jpg?sz=128", "display_name": "Pavel Bredelev", "link": "https://stackoverflow.com/users/5892317/pavel-bredelev"}, "edited": false, "score": 0, "creation_date": 1473794332, "post_id": 39463790, "comment_id": 66274210, "body": "Yes, I had a question mark, any other ides what can be  problem?"}, {"owner": {"reputation": 971, "user_id": 5892317, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MrDgUVUsPmE/AAAAAAAAAAI/AAAAAAAABEE/-TMJPqjjrT8/photo.jpg?sz=128", "display_name": "Pavel Bredelev", "link": "https://stackoverflow.com/users/5892317/pavel-bredelev"}, "edited": false, "score": 1, "creation_date": 1473959240, "post_id": 39463790, "comment_id": 66349097, "body": "Oh, its no need, I dont know why but when I rewrote code it started to work) Thank you very much for help"}, {"owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "reply_to_user": {"reputation": 971, "user_id": 5892317, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MrDgUVUsPmE/AAAAAAAAAAI/AAAAAAAABEE/-TMJPqjjrT8/photo.jpg?sz=128", "display_name": "Pavel Bredelev", "link": "https://stackoverflow.com/users/5892317/pavel-bredelev"}, "edited": false, "score": 0, "creation_date": 1473959527, "post_id": 39463790, "comment_id": 66349247, "body": "Accept the answer then ;)"}, {"owner": {"reputation": 656, "user_id": 5687476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4c57abeca2396bdbb690bd5137bd80?s=128&d=identicon&r=PG", "display_name": "Paramjit Singh Rana", "link": "https://stackoverflow.com/users/5687476/paramjit-singh-rana"}, "edited": false, "score": 0, "creation_date": 1599630840, "post_id": 39463790, "comment_id": 112828457, "body": "everything is same but still, I am getting errors with intent"}], "tags": [], "owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "is_accepted": true, "score": 16, "last_activity_date": 1473749279, "creation_date": 1473749279, "answer_id": 39463790, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/39463790#39463790", "title": "Intents in Kotlin", "body": "<p>Ensure you have (<strong>question mark</strong>):</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n}\n</code></pre>\n\n<p>Instead:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle) {\n    super.onCreate(savedInstanceState)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 656, "user_id": 5687476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f4c57abeca2396bdbb690bd5137bd80?s=128&d=identicon&r=PG", "display_name": "Paramjit Singh Rana", "link": "https://stackoverflow.com/users/5687476/paramjit-singh-rana"}, "edited": false, "score": 0, "creation_date": 1599630792, "post_id": 44845102, "comment_id": 112828444, "body": "Worked like a charm!!"}, {"owner": {"reputation": 1173, "user_id": 5390254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CwUA1.png?s=128&g=1", "display_name": "J A S K I E R", "link": "https://stackoverflow.com/users/5390254/j-a-s-k-i-e-r"}, "edited": false, "score": 0, "creation_date": 1610555654, "post_id": 44845102, "comment_id": 116172972, "body": "Unresolved reference: instance"}], "tags": [], "owner": {"reputation": 498, "user_id": 6164819, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NJ0M1AzemT8/AAAAAAAAAAI/AAAAAAAAABc/URQP5QUxzjg/photo.jpg?sz=128", "display_name": "rakesh rajput", "link": "https://stackoverflow.com/users/6164819/rakesh-rajput"}, "is_accepted": false, "score": 2, "last_activity_date": 1498821137, "creation_date": 1498821137, "answer_id": 44845102, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/44845102#44845102", "title": "Intents in Kotlin", "body": "<ol>\n<li>Create Singleton class for application instance for example :</li>\n</ol>\n\n<p>class MyApp: Application() {</p>\n\n<pre><code>override fun onCreate() {\n    super.onCreate()\n    instance = this\n}\n\ncompanion object {\n    lateinit var instance: MyApp\n        private set\n}\n</code></pre>\n\n<p>}                      </p>\n\n<ol start=\"2\">\n<li><p>then after call it where you required application object instance. for example :</p>\n\n<pre><code>val intent: Intent = Intent(MyApp.instance, DestinationActivity::class.java);\nMyApp.instance.startActivity(intent)\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 915, "user_id": 5555218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce90ad1f3217015fd431989d091063f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ricard", "link": "https://stackoverflow.com/users/5555218/ricard"}, "edited": false, "score": 3, "creation_date": 1506519868, "post_id": 45166764, "comment_id": 79854647, "body": "If you copy and paste a section of an article, please, reference it. <a href=\"https://antonioleiva.com/kotlin-awesome-tricks-for-android/\" rel=\"nofollow noreferrer\">antonioleiva.com/kotlin-awesome-tricks-for-android</a>"}], "tags": [], "owner": {"reputation": 41, "user_id": 7865728, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JiLRG3nnr5Y/AAAAAAAAAAI/AAAAAAAACKM/RvSU1TO5jCE/photo.jpg?sz=128", "display_name": "Mithilesh Gautam", "link": "https://stackoverflow.com/users/7865728/mithilesh-gautam"}, "is_accepted": false, "score": 4, "last_activity_date": 1527029772, "last_edit_date": 1527029772, "creation_date": 1500380731, "answer_id": 45166764, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/45166764#45166764", "title": "Intents in Kotlin", "body": "<p>As explained on <a href=\"https://antonioleiva.com/kotlin-awesome-tricks-for-android/#crayon-5b012bc043e60755528721\" rel=\"nofollow noreferrer\">this page</a>, Anko also provides some nice functions to navigate to other activity without the need of creating an intent, adding the extras or calling the function. </p>\n\n<p>Everything can be done in a single line:</p>\n\n<pre><code>startActivity&lt;DetailActivity&gt;(\"id\" to 2, \"name\" to \"Kotlin\")\n</code></pre>\n\n<p>This will create a set of extras for the intent with the values specified by the list of pairs the function is receiving as a parameter.</p>\n"}, {"comments": [{"owner": {"reputation": 1474, "user_id": 1969198, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a681568cf3b33612532e90e1cd0e1d3e?s=128&d=identicon&r=PG", "display_name": "AesSedai101", "link": "https://stackoverflow.com/users/1969198/aessedai101"}, "edited": false, "score": 1, "creation_date": 1508322664, "post_id": 46807740, "comment_id": 80563114, "body": "This doesn&#39;t seem to answer the question"}, {"owner": {"reputation": 85, "user_id": 4672392, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-sKB8ToXTtwg/AAAAAAAAAAI/AAAAAAAAATE/kcddITddUP0/photo.jpg?sz=128", "display_name": "GurpreetSK95", "link": "https://stackoverflow.com/users/4672392/gurpreetsk95"}, "edited": false, "score": 5, "creation_date": 1509278476, "post_id": 46807740, "comment_id": 80946420, "body": "Why do we need to add <code>.java</code> in the end? Isn&#39;t HelloActivity a .kt file?"}, {"owner": {"reputation": 2485, "user_id": 4083237, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3VloV2uI0_Y/AAAAAAAAAAI/AAAAAAAAAnI/PaERGCtqYvQ/photo.jpg?sz=128", "display_name": "AaRiF", "link": "https://stackoverflow.com/users/4083237/aarif"}, "edited": false, "score": 17, "creation_date": 1509361731, "post_id": 46807740, "comment_id": 80973838, "body": "Its because you are calling Java Code from the Kotlin as Intent is a Java Class in Android which accepts .class reference as mentioned below.  Intent(Context packageContext, Class cls)  Kotlin class reference is not the same as a Java class reference. To obtain a Java class reference, use the .java property on a KClass instance as SampleActivity::class returns KClass which is Kotlin class not a java class.  So you cannot pass Kotlin class reference to Java (Intent in your case) and so you have to pass Java class reference."}], "tags": [], "owner": {"reputation": 2485, "user_id": 4083237, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3VloV2uI0_Y/AAAAAAAAAAI/AAAAAAAAAnI/PaERGCtqYvQ/photo.jpg?sz=128", "display_name": "AaRiF", "link": "https://stackoverflow.com/users/4083237/aarif"}, "is_accepted": false, "score": 33, "last_activity_date": 1509362341, "last_edit_date": 1509362341, "creation_date": 1508321469, "answer_id": 46807740, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/46807740#46807740", "title": "Intents in Kotlin", "body": "<p>Intents using Kotlin for Android are almost same we just need to change slight in the syntax as below.</p>\n\n<pre><code>val intent = Intent(this,HelloActivity::class.java) startActivity(intent)\n</code></pre>\n\n<p>Exception that you are getting is null pointer exception in your <code>onCreate</code> method on the activity, please check the same..</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 8769783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e528d7a3c1a6bba09932f8aaf2d788e?s=128&d=identicon&r=PG&f=1", "display_name": "Android.Dev17", "link": "https://stackoverflow.com/users/8769783/android-dev17"}, "is_accepted": false, "score": 2, "last_activity_date": 1508321927, "creation_date": 1508321927, "answer_id": 46807871, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/46807871#46807871", "title": "Intents in Kotlin", "body": "<p>Intents in android kotlin can be used as given below.</p>\n\n<pre><code>val intent = Intent(this,YourActivity::class.java)\nstartActivity(intent)\n</code></pre>\n\n<p>Further, the exception that you are getting exists in your <code>onCreate</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 2012, "user_id": 3426524, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/BGH9k.jpg?s=128&g=1", "display_name": "Gaurav Sarma", "link": "https://stackoverflow.com/users/3426524/gaurav-sarma"}, "is_accepted": false, "score": 9, "last_activity_date": 1582439199, "last_edit_date": 1582439199, "creation_date": 1520887182, "answer_id": 49244063, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/49244063#49244063", "title": "Intents in Kotlin", "body": "<p>The shortest and the simplest way I use to open a new activity </p>\n\n<pre><code>startActivity(Intent(this@MainActivity, NextActivity::class.java))\n</code></pre>\n\n<p>P.S: One of the main points to notice here is that the Intent() is expecting a packageContext as the first parameter hence just using <strong>this</strong> will still throw an error. </p>\n\n<p>Hence, you need to explicitly define the class name. As shown in the above line (this@MainActivity)  </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12902960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afa3814288d16e5af55a2ce8ba0510e?s=128&d=identicon&r=PG&f=1", "display_name": "Kalp", "link": "https://stackoverflow.com/users/12902960/kalp"}, "is_accepted": false, "score": 0, "last_activity_date": 1585646738, "creation_date": 1585646738, "answer_id": 60947290, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/60947290#60947290", "title": "Intents in Kotlin", "body": "<p>You can try \"context?.applicationContext\" instead of \"this\"</p>\n\n<pre><code>val intent = Intent(context?.applicationContext,TimerActivity::class.java)\nstartActivity(intent)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 4242794, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-mj872VL0v-I/AAAAAAAAAAI/AAAAAAAABIo/igezWYd4Af8/photo.jpg?sz=128", "display_name": "sanjay", "link": "https://stackoverflow.com/users/4242794/sanjay"}, "is_accepted": false, "score": 3, "last_activity_date": 1586634829, "creation_date": 1586634829, "answer_id": 61162883, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/61162883#61162883", "title": "Intents in Kotlin", "body": "<p>You can call like this   </p>\n\n<pre><code> val intent = Intent(this, ListActivity::class.java)\n startActivity(intent)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1153, "user_id": 11369023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFtbF.png?s=128&g=1", "display_name": "Aftab Alam", "link": "https://stackoverflow.com/users/11369023/aftab-alam"}, "is_accepted": false, "score": 2, "last_activity_date": 1614954973, "last_edit_date": 1614954973, "creation_date": 1607470354, "answer_id": 65208498, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/65208498#65208498", "title": "Intents in Kotlin", "body": "<blockquote>\n<p>Intents in kotlin</p>\n</blockquote>\n<pre><code>//In Activity\nval intent = Intent(this, MainActivity::class.java)\nstartActivity(intent)\n\n//for fragment change &quot;this&quot; to &quot;activity&quot;\nval intent = Intent(activity, MainActivity::class.java)\nstartActivity(intent)\n</code></pre>\n<blockquote>\n<p>Intent in kotlin single line</p>\n</blockquote>\n<pre><code>startActivity(Intent(this, MainActivity::class.java))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 10452964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WCnxs.png?s=128&g=1", "display_name": "Kamau Mb&#251;gua", "link": "https://stackoverflow.com/users/10452964/kamau-mb%c3%bbgua"}, "is_accepted": false, "score": 0, "last_activity_date": 1616958164, "creation_date": 1616958164, "answer_id": 66845149, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin/66845149#66845149", "title": "Intents in Kotlin", "body": "<p>For <code>Adapter Class</code>\nspecify your <code>context</code></p>\n<pre><code>val mContext: Context\n</code></pre>\n<p>then</p>\n<pre><code>val intent = Intent(mContext, ActivityNext::class.java)\n        mContext.startActivity(intent)\n</code></pre>\n"}], "owner": {"reputation": 971, "user_id": 5892317, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MrDgUVUsPmE/AAAAAAAAAAI/AAAAAAAABEE/-TMJPqjjrT8/photo.jpg?sz=128", "display_name": "Pavel Bredelev", "link": "https://stackoverflow.com/users/5892317/pavel-bredelev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68343, "favorite_count": 9, "accepted_answer_id": 39463790, "answer_count": 11, "score": 27, "last_activity_date": 1616958164, "creation_date": 1473742323, "last_edit_date": 1527029445, "question_id": 39462397, "link": "https://stackoverflow.com/questions/39462397/intents-in-kotlin", "title": "Intents in Kotlin", "body": "<p>So, I know that in Java we use this to launch new <code>Activity</code></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Intent intent = new Intent(this, SomeActivity.class);\nstartActivity(intent);\n</code></pre>\n\n<p>But I'm writting a project using Kotlin, so in Kotlin it's like </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>val intent = Intent(this,SomeActivity::class.java)\nstartActivity(intent)\n</code></pre>\n\n<p>But it crashes with problem </p>\n\n<pre><code>FATAL EXCEPTION: main\nProcess: com.pashabred.passlin, PID: 15243\n                                                                           java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pashabred.passlin/com.pashabred.passlin.Enterring}: kotlin.KotlinNullPointerException\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2325)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)\n    at android.app.ActivityThread.access$800(ActivityThread.java:151)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1303)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:135)\n    at android.app.ActivityThread.main(ActivityThread.java:5254)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:372)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\n                                                                            Caused by: kotlin.KotlinNullPointerException\n    at com.pashabred.passlin.Enterring.onCreate(Enterring.kt:17)\n    at android.app.Activity.performCreate(Activity.java:5990)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1106)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2278)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)\n    at android.app.ActivityThread.access$800(ActivityThread.java:151)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1303)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n    at android.os.Looper.loop(Looper.java:135)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:5254)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at java.lang.reflect.Method.invoke(Method.java:372)\u00a0\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\u00a0\n</code></pre>\n"}, {"tags": ["lambda", "kotlin", "type-safety", "builder-pattern"], "comments": [{"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 2, "creation_date": 1473711912, "post_id": 39456697, "comment_id": 66237648, "body": "There is a workaround if you would like: <a href=\"http://stackoverflow.com/a/37000303/2094298\">stackoverflow.com/a/37000303/2094298</a>"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1473706320, "creation_date": 1473706320, "answer_id": 39456870, "question_id": 39456697, "link": "https://stackoverflow.com/questions/39456697/is-it-possible-to-hide-variables-from-lambdas-closure/39456870#39456870", "title": "Is it possible to hide variables from lambda&#39;s closure?", "body": "<p>As of Kotlin 1.0 this is not possible. There is an <a href=\"https://youtrack.jetbrains.com/issue/KT-11551\" rel=\"nofollow\">open feature request</a> for this functionality.</p>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 1, "last_activity_date": 1521906519, "creation_date": 1521906519, "answer_id": 49466694, "question_id": 39456697, "link": "https://stackoverflow.com/questions/39456697/is-it-possible-to-hide-variables-from-lambdas-closure/49466694#49466694", "title": "Is it possible to hide variables from lambda&#39;s closure?", "body": "<p>This is possible since Kotlin 1.1, thanks to the <a href=\"https://kotlinlang.org/docs/reference/whatsnew11.html#scope-control-for-implicit-receivers-in-dsls\" rel=\"nofollow noreferrer\">introduction of the <code>@DslMarker</code> annotation</a>.</p>\n\n<p>Here's an example of how it can be used:</p>\n\n<pre><code>@DslMarker\nannotation class MyHtmlDsl\n\n@MyHtmlDsl\nclass HeadBuilder\n\n@MyHtmlDsl\nclass BodyBuilder\n\n@MyHtmlDsl\nclass HtmlBuilder {\n    fun head(setup: HeadBuilder.() -&gt; Unit) {}\n    fun body(setup: BodyBuilder.() -&gt; Unit) {}\n}\n\nfun html(setup: HtmlBuilder.() -&gt; Unit) {}\n\nfun main(args: Array&lt;String&gt;) {\n    html {\n        head {}\n        body {\n            head { } // fun head(...) can't be called in this context by implicit receiver\n        }\n    }\n}\n</code></pre>\n\n<p>See also the documentation at the announcement linked above.</p>\n"}], "owner": {"reputation": 166, "user_id": 1293630, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b71710642f31a543b7c6aea54807d9fc?s=128&d=identicon&r=PG", "display_name": "Alexey Pomelov", "link": "https://stackoverflow.com/users/1293630/alexey-pomelov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 39456870, "answer_count": 2, "score": 5, "last_activity_date": 1521906519, "creation_date": 1473705566, "question_id": 39456697, "link": "https://stackoverflow.com/questions/39456697/is-it-possible-to-hide-variables-from-lambdas-closure", "title": "Is it possible to hide variables from lambda&#39;s closure?", "body": "<p>I'm trying to crate a type-safe groovy-style builder in Kotlin like it's described <a href=\"https://kotlinlang.org/docs/reference/type-safe-builders.html\" rel=\"noreferrer\">here</a>.\nThe problem is visibility of lambda receivers in nested lambdas.\nHere is a simple example.</p>\n\n<pre><code>html {\n    head(id = \"head1\")\n    body() {\n        head(id = \"head2\")\n    }\n}\n</code></pre>\n\n<p>Receiver of the nested lambda is Body that doesn't have the 'head' method. Nevertheless this code compiles and prints into this:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head id=\"head1\"&gt;&lt;/head&gt;\n    &lt;head id=\"head2\"&gt;&lt;/head&gt;\n    &lt;body&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>It is expected but is there any way to get compilation error on the inner head?</p>\n"}, {"tags": ["android", "rx-java", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473715633, "post_id": 39453346, "comment_id": 66239287, "body": "Note that functions like <code>routes.toSortedList()</code> on readonly lists in Kotlin stdlib copy the list and return a new list, so your variable <code>routes</code> was not actaully changed into a sorted list but rather you made a copy and threw it away because you didn&#39;t assign it.  <code>val sortedRoutes = routes.toSortedList()</code> and then use <code>sortedRoutes</code> later instead of the original list."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473718046, "post_id": 39453346, "comment_id": 66240212, "body": "@JaysonMinard there is no such extension function (<code>toSortedList</code>) in kotlin stdlib. It is the member function of <code>rx.Observable</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473769250, "post_id": 39453346, "comment_id": 66259364, "body": "I was generically talking about that type of function.  <code>toSortedList</code> also returns a new <code>Observable</code> that must be used instead of the original yes?  same problem, it does not in-place sort the original, you have to use the resulting reference."}], "answers": [{"comments": [{"owner": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "edited": false, "score": 0, "creation_date": 1473695535, "post_id": 39453821, "comment_id": 66229799, "body": "Trying both of these gives me Receiver type mismatch errors.  val sortedRoute = routes.sortedBy(Route::route_id)"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "edited": false, "score": 0, "creation_date": 1473696327, "post_id": 39453821, "comment_id": 66230260, "body": "What is the type of <code>routes</code>? <code>List&lt;Route&gt;</code>?"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 2, "creation_date": 1473698455, "post_id": 39453821, "comment_id": 66231208, "body": "@mfulton26 I suggest to assign the result of the <code>sortedBy</code> to some variable, otherwise it looks like <code>sortedBy</code> does side-effect on the <code>routes</code>"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1473699286, "post_id": 39453821, "comment_id": 66231542, "body": "Good point @Ilya. I&#39;ve updated the example to assigned the result to a new variable, <code>sortedRoutes</code>. Thank you."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 2, "last_activity_date": 1473699218, "last_edit_date": 1473699218, "creation_date": 1473693944, "answer_id": 39453821, "question_id": 39453346, "link": "https://stackoverflow.com/questions/39453346/sorting-objects-alphanumerically/39453821#39453821", "title": "Sorting Objects Alphanumerically", "body": "<p>If <code>routes</code> is a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/\" rel=\"nofollow\"><code>MutableList</code></a> and you want to sort it in-place then you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sort-by.html\" rel=\"nofollow\"><code>sortBy</code></a>:</p>\n\n<pre><code>routes.sortBy(Route::route_id)\n</code></pre>\n\n<p>Otherwise you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-by.html\" rel=\"nofollow\"><code>sortedBy</code></a> to create a new list with the elements sorted:</p>\n\n<pre><code>val sortedRoutes = routes.sortedBy(Route::route_id)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 2, "creation_date": 1473698697, "post_id": 39454594, "comment_id": 66231293, "body": "The question author wants to sort routes based on routeId number and not its string representation."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1473698779, "post_id": 39454594, "comment_id": 66231320, "body": "It would be more idiomatically to use <code>sortedBy</code> inside the <code>map</code> operation, like in the answer of @mfulton26"}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1473699110, "post_id": 39454594, "comment_id": 66231461, "body": "@Ilya Ah, I actually misread and thought the aim was a lexical sorting, thats my bad"}, {"owner": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "edited": false, "score": 0, "creation_date": 1473701818, "post_id": 39454594, "comment_id": 66232760, "body": "@Kiskae if you ever need anything, like a kidney or part of my liver...it is yours. You have saved me so much time."}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 4, "last_activity_date": 1473699518, "last_edit_date": 1473699518, "creation_date": 1473696772, "answer_id": 39454594, "question_id": 39453346, "link": "https://stackoverflow.com/questions/39453346/sorting-objects-alphanumerically/39454594#39454594", "title": "Sorting Objects Alphanumerically", "body": "<pre><code>val routes = cache.getRoutes()\n        .observeOn(AndroidSchedulers.mainThread())\n</code></pre>\n\n<p>This code tells me you're dealing with RxJava, which requires an entirely different solution so in the future it is important to include that type of information.</p>\n\n<p>If <code>cache.getRoutes()</code> returns an <code>Observable&lt;List&lt;Route&gt;&gt;</code> then that route can be sorted with the code </p>\n\n<pre><code>.map { \n    it.sortedBy(Route::route_id)\n}\n</code></pre>\n\n<p>This will produce a new inner list sorted by the numerical value of <code>route_id</code>.</p>\n\n<p>If <code>cache.getRoutes()</code> returns <code>Observable&lt;Route&gt;</code> then you need to include the additional call to <code>.toList()</code> to turn it into an <code>Observable&lt;List&lt;Route&gt;&gt;</code>.</p>\n"}], "owner": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 1, "accepted_answer_id": 39454594, "answer_count": 2, "score": 3, "last_activity_date": 1473715202, "creation_date": 1473692512, "last_edit_date": 1473715202, "question_id": 39453346, "link": "https://stackoverflow.com/questions/39453346/sorting-objects-alphanumerically", "title": "Sorting Objects Alphanumerically", "body": "<p>I am running into an issue when trying to sort a List of \"Routes\" for my app, no matter what I try, I cannot obtain the sorting that I am looking for.</p>\n\n<p>I want it sorted 1,2,3,4,5, etc but when I sort, I get 1,11,12,2,20 and so on. </p>\n\n<p>My Route model is</p>\n\n<pre><code>public open class Route(docValue:Map&lt;String,Any&gt;) {\n    val route_id = (docValue[\"route_id\"] as Number).toInt()\n    val short_name = docValue[\"route_short_name\"] as String\n    val color = readColorMoreSafely(docValue, \"route_color\", Color.BLUE)\n    val long_name = docValue[\"route_long_name\"] as String \n}\n</code></pre>\n\n<p>The code used to sort is </p>\n\n<pre><code>if(cityId != null &amp;&amp; view != null) {\n        val routesList = view.findViewById(R.id.routesList) as ListView\n        val cache = TransitCache.getInstance(applicationContext, cityId, true)\n        val routes = cache.getRoutes()\n            .observeOn(AndroidSchedulers.mainThread())\n            .doOnNext {\n                val noRoutesMessage = view.findViewById(R.id.list_routes_no_routes_visible) as TextView\n                noRoutesMessage.visibility = if(it.size == 0) View.VISIBLE else View.GONE\n            }\n        routes.toSortedList()\n        listAdapter = RxListAdapter(applicationContext, R.layout.activity_list_routes_row, routes)\n        routesList.adapter = listAdapter\n</code></pre>\n\n<p>But still nothing, I just want to sort the routes by \"route_id\", i've tried a few different things, the last one of which was</p>\n\n<pre><code>routes.toSortedList()\n</code></pre>\n\n<p>which still ended up not doing what I wanted, at this point I'm stuck. </p>\n"}, {"tags": ["maven", "gradle", "kotlin", "kotlin-dokka"], "answers": [{"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1473699015, "post_id": 39450381, "comment_id": 66231415, "body": "AFAIK, since 0.9.8 dokka shades compiler classes so it&#39;s no longer needed to have corresponding versions of dokka and kotlin complier. @yole could correct me if I&#39;m wrong."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 2, "last_activity_date": 1492351618, "last_edit_date": 1492351618, "creation_date": 1473683406, "answer_id": 39450381, "question_id": 39450380, "link": "https://stackoverflow.com/questions/39450380/what-version-of-dokka-goes-with-what-version-of-kotlin/39450381#39450381", "title": "What version of Dokka goes with what version of Kotlin?", "body": "<p>Here are the matching compatible versions:</p>\n\n<pre>\nKotlin Version    Dokka Version\n----------------|-----------------\n1.0.0             0.9.7\n1.0.1             0.9.7\nall               0.9.8 or later \n</pre>\n\n<p>Since <code>0.9.8</code> Dokka no longer can conflict with the compiler classes since it embeds a shaded version of the compiler.  </p>\n\n<p>See current versions on <a href=\"https://mvnrepository.com/artifact/org.jetbrains.dokka/dokka-maven-plugin\" rel=\"nofollow noreferrer\">maven repository</a></p>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 1, "accepted_answer_id": 39450381, "answer_count": 1, "score": 4, "last_activity_date": 1492351618, "creation_date": 1473683406, "last_edit_date": 1610973576, "question_id": 39450380, "link": "https://stackoverflow.com/questions/39450380/what-version-of-dokka-goes-with-what-version-of-kotlin", "title": "What version of Dokka goes with what version of Kotlin?", "body": "<p>Whenever the Kotlin and Dokka versions are not compatible, things might break oddly in Gradle and Maven builds.  I cannot find anywhere a list of the compatible versions between the two.  What is the version compatibility?</p>\n<p><strong>Note:</strong> <em>this question is intentionally written and answered by the author (<a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the idiomatic answers to commonly asked Kotlin topics are present in SO.</em></p>\n"}, {"tags": ["android", "android-layout", "android-studio", "kotlin", "anko"], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 523378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fa8253577fb3f9e66275734466b6f7?s=128&d=identicon&r=PG", "display_name": "Gary Lee", "link": "https://stackoverflow.com/users/523378/gary-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1474428586, "last_edit_date": 1474428586, "creation_date": 1473789156, "answer_id": 39476192, "question_id": 39448576, "link": "https://stackoverflow.com/questions/39448576/context-issue-when-using-anko-dsl-within-customized-adapter-for-listview/39476192#39476192", "title": "Context issue when using Anko DSL within customized adapter for ListView", "body": "<p>According to this <a href=\"https://www.youtube.com/watch?v=A2LukgT2mKc\" rel=\"nofollow\">video</a>, here is the modified version:</p>\n\n<pre><code>class AnkoAdapter&lt;T&gt;(itemFactory: () -&gt; List&lt;T&gt;, viewFactory: Context.(index: Int, items: List&lt;T&gt;, view: View?) -&gt; View): BaseAdapter() {\n    val viewFactory = viewFactory\n    val items: List&lt;T&gt; by lazy { itemFactory() }\n\n    override fun getView(index: Int, view: View?, viewGroup: ViewGroup?): View {\n        return viewGroup!!.context.viewFactory(index, items, view)\n    }\n\n    override fun getCount(): Int {\n        return items.size\n    }\n\n    override fun getItem(index: Int): T {\n        return items.get(index)\n    }\n\n    override fun getItemId(index: Int): Long {\n\n        return (items.get(index) as Any).hashCode().toLong() + (index.toLong() * Int.MAX_VALUE)\n    }\n}\n\nval items = listOf&lt;String&gt;(\"Mary\", \"Lisa\", \"Cheryl\", \"Linda\")\nval buttonCaption = \"...\"\nlockView.adapter = AnkoAdapter&lt;String&gt;({ items }) {\n    index, items, view -&gt;\n    linearLayout {\n        textView(items[index])\n        button(buttonCaption)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 523378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fa8253577fb3f9e66275734466b6f7?s=128&d=identicon&r=PG", "display_name": "Gary Lee", "link": "https://stackoverflow.com/users/523378/gary-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474428586, "creation_date": 1473677174, "last_edit_date": 1473796831, "question_id": 39448576, "link": "https://stackoverflow.com/questions/39448576/context-issue-when-using-anko-dsl-within-customized-adapter-for-listview", "title": "Context issue when using Anko DSL within customized adapter for ListView", "body": "<p>I am trying to write a general-purpose adapter for <code>ListView</code> which allows using Anko DSL as the content of items. The code is listed below. As you can see, there is an ugly patch <code>with(viewGroup!!.context)</code> to make the code work. It doesn't like other Anko example you have see. If I remove the <code>with</code> statement, my app will crash by</p>\n\n<pre><code>FATAL EXCEPTION: java.lang.ClassCastException: android.widget.FrameLayout$LayoutParams cannot be cast to android.widget.AbsListView$LayoutParams \n</code></pre>\n\n<p>Is there any way to avoid the <code>with</code> statement?</p>\n\n<pre><code>import java.util.*\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.BaseAdapter\n\nclass AnkoAdapter(itemFactory: () -&gt; AbstractList&lt;Any&gt;, viewFactory: (index: Int, items: AbstractList&lt;Any&gt;, view: View?, viewGroup: ViewGroup?) -&gt; View): BaseAdapter() {\n    val viewFactory = viewFactory\n    val items: AbstractList&lt;Any&gt; by lazy { itemFactory() }\n\n    override fun getView(index: Int, view: View?, viewGroup: ViewGroup?): View {\n        return viewFactory(index, items, view, viewGroup)\n    }\n\n    override fun getCount(): Int {\n        return items.size\n    }\n\n    override fun getItem(index: Int): Any {\n        return items.get(index)\n    }\n\n    override fun getItemId(index: Int): Long {\n        return items.get(index).hashCode().toLong() + (index.toLong() * Int.MAX_VALUE)\n    }\n}\n\n// -------------\n// In main acitivty.\n...\nval items = listOf&lt;String&gt;(\"Mary\", \"Lisa\", \"Cheryl\", \"Linda\")\nval buttonCaption = \"...\"\nlistView.adapter = AnkoAdapter({items as AbstractList&lt;Any&gt;}) {\n    index: Int, items: AbstractList&lt;Any&gt;, view: View?, viewGroup: ViewGroup? -&gt;\n    with(viewGroup!!.context) {\n        linearLayout {\n            textView(items[index].toString())\n            button(buttonCaption)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-testing", "android-espresso"], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 6100078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7oT9.jpg?s=128&g=1", "display_name": "Igor Escodro", "link": "https://stackoverflow.com/users/6100078/igor-escodro"}, "edited": false, "score": 0, "creation_date": 1575650811, "post_id": 39437548, "comment_id": 104650226, "body": "Hello, Geob-o-matic. Please, consider marking your own answer as correct to help others. :)"}], "tags": [], "owner": {"reputation": 5143, "user_id": 600351, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2a3b9fd62972fa271deb3d0e31256c?s=128&d=identicon&r=PG", "display_name": "Geob-o-matic", "link": "https://stackoverflow.com/users/600351/geob-o-matic"}, "is_accepted": true, "score": 8, "last_activity_date": 1473606838, "creation_date": 1473606838, "answer_id": 39437548, "question_id": 39437122, "link": "https://stackoverflow.com/questions/39437122/kotlin-espresso-no-activities-found/39437548#39437548", "title": "kotlin + espresso:&#160;No activities found", "body": "<p>Found it! Changed:</p>\n\n<pre><code>@get:Rule @JvmField var activityRule: ActivityTestRule&lt;MainActivity&gt; = ActivityTestRule(MainActivity::class.java)\n</code></pre>\n\n<p>To:</p>\n\n<pre><code> @Rule @JvmField var activityRule: ActivityTestRule&lt;MainActivity&gt; = ActivityTestRule(MainActivity::class.java)\n</code></pre>\n\n<p>(removed get:)</p>\n"}, {"tags": [], "owner": {"reputation": 2668, "user_id": 3836142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd79ba60a009b30c4ac3f810262a5089?s=128&d=identicon&r=PG&f=1", "display_name": "Patricia Heimfarth", "link": "https://stackoverflow.com/users/3836142/patricia-heimfarth"}, "is_accepted": false, "score": 2, "last_activity_date": 1602954080, "creation_date": 1602954080, "answer_id": 64405068, "question_id": 39437122, "link": "https://stackoverflow.com/questions/39437122/kotlin-espresso-no-activities-found/64405068#64405068", "title": "kotlin + espresso:&#160;No activities found", "body": "<p>For me</p>\n<pre><code> @get:Rule\n    val activityRule = ActivityScenarioRule(MainActivity::class.java)\n</code></pre>\n<p>has worked</p>\n"}], "owner": {"reputation": 5143, "user_id": 600351, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2a3b9fd62972fa271deb3d0e31256c?s=128&d=identicon&r=PG", "display_name": "Geob-o-matic", "link": "https://stackoverflow.com/users/600351/geob-o-matic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4026, "favorite_count": 0, "accepted_answer_id": 39437548, "answer_count": 2, "score": 6, "last_activity_date": 1602954080, "creation_date": 1473604291, "question_id": 39437122, "link": "https://stackoverflow.com/questions/39437122/kotlin-espresso-no-activities-found", "title": "kotlin + espresso:&#160;No activities found", "body": "<p>Coming back to Android dev after a year and I'm all confused on espresso again -_-</p>\n\n<p>I'm just trying to setup a simple espresso test and it fails saying:</p>\n\n<blockquote>\n  <p>java.lang.RuntimeException: No activities found. Did you forget to launch the activity by calling getActivity() or startActivitySync or similar?</p>\n</blockquote>\n\n<p>and indeed, I don't see the app being launched. Here is the code:</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\n@LargeTest\nclass EfficioTest {\n    @get:Rule @JvmField var activityRule: ActivityTestRule&lt;MainActivity&gt; = ActivityTestRule(MainActivity::class.java)\n\n    private fun getActivity() = activityRule.activity\n\n    @Test fun testInitState() {\n        onView(withId(R.id.store_spinner)).check(matches(isDisplayed()))\n    }\n}\n</code></pre>\n\n<p>MainActivity is in the manifest and is working fine when launching using the launcher.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["java", "android", "package", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473596883, "post_id": 39435673, "comment_id": 66194636, "body": "Where did you click and what did you then type when saying &quot;New Package?&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 5706897, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4666a4ec33bb0d0044a267620ef8c070?s=128&d=identicon&r=PG&f=1", "display_name": "Massimo Caroccia", "link": "https://stackoverflow.com/users/5706897/massimo-caroccia"}, "edited": false, "score": 0, "creation_date": 1473600009, "post_id": 39436157, "comment_id": 66195412, "body": "The problem is not package creation, but the tree structure view. I don&#39;t see <code>other</code> or <code>three</code> but <code>one.two.other</code> and <code>one.two.three</code>"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 0, "last_activity_date": 1473606783, "last_edit_date": 1473606783, "creation_date": 1473597338, "answer_id": 39436157, "question_id": 39435673, "link": "https://stackoverflow.com/questions/39435673/android-studio-package-2-2-rc2-structure/39436157#39436157", "title": "Android Studio Package 2.2 RC2 Structure", "body": "<p>One possible scenario:</p>\n\n<p>When you add a new package in Intellij (any version including Android studio), the command operates based on the context of where you right-clicked to select <code>New -&gt; Package</code>.  Think of <code>New -&gt; Package</code> as really meaning <code>New -&gt; Add subpackage at this point in three</code>.</p>\n\n<p>So you right-click at the source root of <code>app/java</code> and select <code>New -&gt; Package</code> and type <code>one.two.three</code> you end up with:</p>\n\n<pre><code>app\n  +-- java\n      +-- one\n          +-- two\n              +-- three\n</code></pre>\n\n<p>But if you right-click on the new node in the project tree of <code>app/java/one/two/three</code> and select <code>New -&gt; Package</code> typing <code>one.two.other</code> you end up nesting the package within the other.  Your tree would then be:</p>\n\n<pre><code>app\n  +-- java\n      +-- one\n          +-- two\n              +-- three\n                  +-- one             &lt;---- OOOPS!\n                      +-- two\n                          +-- other\n</code></pre>\n\n<p>But had I right clicked back at the root of <code>app/java</code> and typed the same package name <code>one.two.other</code> I would have ended up with:</p>\n\n<pre><code>app\n  +-- java\n      +-- one\n          +-- two\n              +-- three\n              +-- other\n</code></pre>\n\n<p>I could also click on the tree at <code>app/one/two</code> a typed only <code>other</code> to get the same, again because <code>New -&gt; Package</code> is adding a sub package to where I happen to have taken the action.</p>\n\n<p>Just because you type what appears to be a fully qualified package name in <code>New -&gt; Package</code> doesn't mean that Intellij knows you mean to go back and start at the root.  It nests from wherever you clicked even if it may be obvious (<em>to you</em>) what you intended, Intellij consistently does the action from where you started the action.</p>\n\n<p>Some screenshots of this in action...</p>\n\n<p><strong>Adding at the wrong place:</strong> (notice the selection in the project tree)</p>\n\n<p><a href=\"https://i.stack.imgur.com/Hq5hw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hq5hw.png\" alt=\"Adding package at the wrong place\"></a></p>\n\n<p>Results in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JmpZx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JmpZx.png\" alt=\"Result of adding package at the wrong place\"></a></p>\n\n<p><strong>Adding at the correct place:</strong>  (notice the selection in the project tree)</p>\n\n<p><a href=\"https://i.stack.imgur.com/NCd6u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NCd6u.png\" alt=\"Adding package at the correct place\"></a></p>\n\n<p>Results in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5J7TL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5J7TL.png\" alt=\"Result of adding package at the correct place\"></a></p>\n\n<p><strong>Also adding at the correct place:</strong>  (expand collapsed middle packages to see as tree)</p>\n\n<p><a href=\"https://i.stack.imgur.com/yRKNH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yRKNH.png\" alt=\"Adding package at the correct place\"></a></p>\n\n<p>Results in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/sRktL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sRktL.png\" alt=\"Result of adding package at the correct place\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473606963, "post_id": 39437354, "comment_id": 66197416, "body": "what led you to that conclusion?  is it documented somewhere (its relationship to what you saw in the project tree)?"}, {"owner": {"reputation": 277, "user_id": 5706897, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4666a4ec33bb0d0044a267620ef8c070?s=128&d=identicon&r=PG&f=1", "display_name": "Massimo Caroccia", "link": "https://stackoverflow.com/users/5706897/massimo-caroccia"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473615574, "post_id": 39437354, "comment_id": 66200156, "body": "I&#39;ve tested it and I see that some packages are not grouped"}], "tags": [], "owner": {"reputation": 277, "user_id": 5706897, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4666a4ec33bb0d0044a267620ef8c070?s=128&d=identicon&r=PG&f=1", "display_name": "Massimo Caroccia", "link": "https://stackoverflow.com/users/5706897/massimo-caroccia"}, "is_accepted": false, "score": 0, "last_activity_date": 1473605742, "creation_date": 1473605742, "answer_id": 39437354, "question_id": 39435673, "link": "https://stackoverflow.com/questions/39435673/android-studio-package-2-2-rc2-structure/39437354#39437354", "title": "Android Studio Package 2.2 RC2 Structure", "body": "<p>I found the problem:\nIf add </p>\n\n<blockquote>\n<pre><code>dataBinding {\n    enabled = true\n}\n</code></pre>\n</blockquote>\n\n<p>to app .gradle the project structure is displayed without standard children.</p>\n"}], "owner": {"reputation": 277, "user_id": 5706897, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4666a4ec33bb0d0044a267620ef8c070?s=128&d=identicon&r=PG&f=1", "display_name": "Massimo Caroccia", "link": "https://stackoverflow.com/users/5706897/massimo-caroccia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473606783, "creation_date": 1473593909, "last_edit_date": 1473596995, "question_id": 39435673, "link": "https://stackoverflow.com/questions/39435673/android-studio-package-2-2-rc2-structure", "title": "Android Studio Package 2.2 RC2 Structure", "body": "<p>I've a problem with Android Studio 2.2 RC2, when I add a new package into project structure I don't see the standard:</p>\n\n<pre><code>app\n  +-- java\n      +-- com.myapp\n          +-- package\n</code></pre>\n\n<p>but this:</p>\n\n<pre><code>app\n  +-- java\n      +-- com.myapp\n          +-- com.myapp.package\n</code></pre>\n\n<p>can anyone help me?</p>\n"}, {"tags": ["android", "sqlite", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 7061, "user_id": 4727432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca061f55238f6dba1e1815db6a48b1f6?s=128&d=identicon&r=PG", "display_name": "hluhovskyi", "link": "https://stackoverflow.com/users/4727432/hluhovskyi"}, "edited": false, "score": 0, "creation_date": 1473579223, "post_id": 39431929, "comment_id": 66190479, "body": "Yes, you are right. On pre-lollipop <code>readableDatabase is Closeable</code> returns false, while on lollipop returns true. I wonder, why there is no documentation that SQLiteDatabase implements Closeable interface since API19. But anyway, thank you!"}, {"owner": {"reputation": 28310, "user_id": 1642079, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/OheTJ.jpg?s=128&g=1", "display_name": "Chad Bingham", "link": "https://stackoverflow.com/users/1642079/chad-bingham"}, "edited": false, "score": 0, "creation_date": 1500083973, "post_id": 39431929, "comment_id": 77198876, "body": "Sorry, but where do you put this?"}, {"owner": {"reputation": 1764, "user_id": 4548520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5a177d9d1652832f694552623905abbb?s=128&d=identicon&r=PG&f=1", "display_name": "user25", "link": "https://stackoverflow.com/users/4548520/user25"}, "edited": false, "score": 1, "creation_date": 1548932031, "post_id": 39431929, "comment_id": 95725780, "body": "So are you saying that it&#39;s not safe to use <code>.use { ... }</code> when we support old versions of Android? E.g, from 14 to 28 API"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 6, "last_activity_date": 1473556892, "last_edit_date": 1473556892, "creation_date": 1473555729, "answer_id": 39431929, "question_id": 39430179, "link": "https://stackoverflow.com/questions/39430179/kotlin-closable-and-sqlitedatabase-on-android/39431929#39431929", "title": "Kotlin Closable and SQLiteDatabase on Android", "body": "<p>The issue has nothing to do with <em>try-with-resources</em> and is simply an incompatible dependency issue between the compiled code and the runtime environment.</p>\n\n<p>The problem is at compile time <code>SQLiteDatabase</code> implements the interface <code>Closeable</code> and later you swap this out for another implementation that does not.  But the code is compiled already and doesn't know about this change.</p>\n\n<p>When you call a function / method, all parameters are checked to make sure they are the correct types, this usually being handled by the JVM.  For inline and extension functions the Kotlin compiler inserts a type check to make sure it is operating on the correct type, and for this specific inline function the receiver of the function is defined as being <code>Closeable</code>.  Here is the method signature:</p>\n\n\n\n<pre><code>inline fun &lt;T : Closeable, R&gt; T.use(block: (T) -&gt; R): R { ... }\n</code></pre>\n\n<p>So the compiler inlines a type check on <code>writableDatabase</code> as follows (<em>in bytecode</em>):</p>\n\n<pre><code>CHECKCAST java/io/Closeable\n</code></pre>\n\n<p>So at this point, the implementation of <code>SQLiteDatabase</code> must forever implement the <code>Closeable</code> interface or the compiled code will fail.  By swapping to an older version of Android where this is no longer true, you break the contract and cause the exception.  There is no way the compiler can do anything different.  It would be the same as me swapping out a JAR in any JVM application to one with radically different implementations after I've already compiled my code.  Changing Android versions basically swaps all the JARs.</p>\n\n<p><strong>What you can do to work around this problem</strong> is write your own <code>use</code> function specifically for the <code>SQLiteDatabase</code> class if all versions have a <code>close</code> method (<em>copied and modified from the Kotlin stdlib <code>use</code> function</em>):</p>\n\n<pre><code>inline fun &lt;T : SQLiteDatabase, R&gt; T.use(block: (T) -&gt; R): R {\n    var closed = false\n    try {\n        return block(this)\n    } catch (e: Exception) {\n        closed = true\n        try {\n            close()\n        } catch (closeException: Exception) {\n            // eat the closeException as we are already throwing the original cause\n            // and we don't want to mask the real exception\n       }\n        throw e\n    } finally {\n        if (!closed) {\n            close()\n        }\n    }\n}\n</code></pre>\n\n<p>Now the inline typecheck will be <code>CHECKCAST android/database/sqlite/SQLiteDatabase</code> which will always succeed.</p>\n"}], "owner": {"reputation": 7061, "user_id": 4727432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca061f55238f6dba1e1815db6a48b1f6?s=128&d=identicon&r=PG", "display_name": "hluhovskyi", "link": "https://stackoverflow.com/users/4727432/hluhovskyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1104, "favorite_count": 0, "accepted_answer_id": 39431929, "answer_count": 1, "score": 8, "last_activity_date": 1486538997, "creation_date": 1473538355, "last_edit_date": 1486538997, "question_id": 39430179, "link": "https://stackoverflow.com/questions/39430179/kotlin-closable-and-sqlitedatabase-on-android", "title": "Kotlin Closable and SQLiteDatabase on Android", "body": "<p>I use this code in my project</p>\n\n<pre><code>fun getAllData(): List&lt;Data&gt; = writableDatabase.use { db -&gt;\n    db.query(...)\n}\n</code></pre>\n\n<p>It executes successfully on Lollipop devices, but on pre-Lollipop it throws a ClassCastException</p>\n\n<pre><code>FATAL EXCEPTION: main\njava.lang.ClassCastException: android.database.sqlite.SQLiteDatabase cannot be cast to java.io.Closeable\n</code></pre>\n\n<p>Probably because it's Java 1.6 and doesn't have the try-with-resources feature, but I'm not sure.</p>\n\n<p>So why do I have this exception and how can it be fixed?</p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 6734792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3e80648006bff3cbc01fd52866d3524b?s=128&d=identicon&r=PG&f=1", "display_name": "tinto mathew", "link": "https://stackoverflow.com/users/6734792/tinto-mathew"}, "edited": false, "score": 0, "creation_date": 1473605579, "post_id": 39425974, "comment_id": 66197007, "body": "I want to change the text view color from activity class is it possible?.The text view is declared in the RecyclerView&#39;s adapter class"}], "tags": [], "owner": {"reputation": 1599, "user_id": 2251837, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/28686c1d9a2e0fbc482a8cd6fc039194?s=128&d=identicon&r=PG&f=1", "display_name": "Aman Grover", "link": "https://stackoverflow.com/users/2251837/aman-grover"}, "is_accepted": false, "score": 0, "last_activity_date": 1473669401, "last_edit_date": 1473669401, "creation_date": 1473509658, "answer_id": 39425974, "question_id": 39425809, "link": "https://stackoverflow.com/questions/39425809/calling-startactivityresult-inside-adapter-class-and-updating-the-recyclerview/39425974#39425974", "title": "Calling StartActivityResult inside adapter class and updating the recyclerview", "body": "<p><code>startActivityForResult()</code> inside the adapter class:\npass the context to your adapter class and do this: </p>\n\n<pre><code>((Activity)context).startActivityForResult(...);\n</code></pre>\n\n<p>As far as updating the <code>RecyclerView</code>, you can get the position inside the <code>onBindViewHolder()</code> and just update the class object from the <code>List</code> or <code>ArrayList</code>for the image and call <code>notifyDataSetChanged()</code> after that.</p>\n\n<p>P.S. this is the best I can do to explain to you without any code.</p>\n\n<p><strong>Edit</strong> : to get the <code>TextView</code> from the adapter class inside the Activity class:</p>\n\n<pre><code>View viewItem = recycleView.getLayoutManager().findViewByPosition(position);\nTextView textView = viewItem.findViewById(R.id.textView);\ntextView.setTextColor(getResources().getColor(R.color.yourColor));\n</code></pre>\n"}], "owner": {"reputation": 176, "user_id": 6734792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3e80648006bff3cbc01fd52866d3524b?s=128&d=identicon&r=PG&f=1", "display_name": "tinto mathew", "link": "https://stackoverflow.com/users/6734792/tinto-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576419873, "creation_date": 1473508515, "last_edit_date": 1576419873, "question_id": 39425809, "link": "https://stackoverflow.com/questions/39425809/calling-startactivityresult-inside-adapter-class-and-updating-the-recyclerview", "title": "Calling StartActivityResult inside adapter class and updating the recyclerview", "body": "<p>I have an adapter class and calling <strong><code>startActivityForResult()</code></strong> and getting the result in my Activity where I am using the adapter.</p>\n\n<p>I want to change the image view background on getting the result.And the change should effect only the particular position of the <strong><code>RecyclerView</code></strong>.</p>\n"}, {"tags": ["intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473512376, "post_id": 39426054, "comment_id": 66176394, "body": "Thank you. I was aware of that but it&#39;s funny because my code worked as it is in Eclipse. I first wrote the whole thing in Eclipse in Java, then in Eclipse in Kotlin and now am porting it to IntelliJ IDEA. I had to, in the process, refactor most static methods that were earlier in Java classes into the global namespace as just independent functions in Kotlin but not for the <code>main</code>.  contd..."}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 0, "creation_date": 1473512382, "post_id": 39426054, "comment_id": 66176398, "body": "The <code>main</code> ran just fine inside the <code>Program</code> class as an instance method in Eclipse. I also looked up and tried adding the @platformStatic annotation to the <code>main</code> method inside an <i>object declaration</i> called <code>Program</code> instead of having the class <code>Program</code> but IntelliJ was not happy with that either. Your suggestion works fine, though."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "edited": false, "score": 1, "creation_date": 1473538924, "post_id": 39426054, "comment_id": 66183868, "body": "The <code>@platformStatic</code> annotation existed only in pre-release versions of Kotlin. If you found its mentions in some documentation or samples, you should be aware that they are out of date."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 2, "last_activity_date": 1473510322, "creation_date": 1473510322, "answer_id": 39426054, "question_id": 39425753, "link": "https://stackoverflow.com/questions/39425753/how-to-select-a-different-module-to-run-when-you-click-the-run-button-in-intelli/39426054#39426054", "title": "How to select a different module to run when you click the Run button in IntelliJ IDEA?", "body": "<p>The <code>main</code> method needs to be static, and the method you have declared is not. In Kotlin, you can either declare <code>main</code> as a top-level function (outside of a class), or, if you want to keep it inside the class, use the following syntax:</p>\n\n<pre><code>class Program {\n    companion object {\n        @JvmStatic fun main(args: Array&lt;String) { ... }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 39426054, "answer_count": 1, "score": 0, "last_activity_date": 1473510441, "creation_date": 1473508198, "last_edit_date": 1473510441, "question_id": 39425753, "link": "https://stackoverflow.com/questions/39425753/how-to-select-a-different-module-to-run-when-you-click-the-run-button-in-intelli", "title": "How to select a different module to run when you click the Run button in IntelliJ IDEA?", "body": "<p>In my IntelliJ IDEA project, I have 3 modules written in Kotlin:</p>\n\n<ol>\n<li>An HTTP Servlet one.</li>\n<li>A desktop swing application; and</li>\n<li>A library that contains contracts that the above two listed projects share to talk to each other.</li>\n</ol>\n\n<p>When I click the <strong>Run</strong> button, it starts the Tomcat server and loads up my servlet project. That is because, and I am guessing here, the new project creation template inside of the IDE created a new <strong>Run Configuration</strong> for the entire project and it is defined in this run configuration that it must start the module that has the servlet inside it.</p>\n\n<p>Now that the servlet runs fine, I'd like to also run the desktop application written using Swing.</p>\n\n<p>How do I do that? I've done this once before but I have forgotten how I did it.</p>\n\n<p>Do I have to define a new <strong>Run Configuation</strong>? I tried that this way:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Sr7k9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sr7k9.png\" alt=\"enter image description here\"></a></p>\n\n<p>I selected <strong>Kotlin</strong> from the left pane titled <strong>Add New Configuration</strong> and specified the name of the class that had the <code>main</code> function, and also the name of the module that had this class.</p>\n\n<p>Here is the source code of my <code>main</code> class.</p>\n\n<pre><code>package bookyard.client;\n\nimport javax.swing.SwingUtilities;\n\npublic class Program {\n\n    public fun main(args : Array&lt;String&gt;) {\n\n        SwingUtilities.invokeLater(LoginDialogEventLoop());\n\n    }\n}\n</code></pre>\n\n<p>But when I click the <strong>Run</strong> button after choosing that run configuration's name, the process reports an error that suggests that the class name I specified as having the <code>main</code> function actually does not have the <code>main</code> function, which I am not sure why that is.</p>\n"}, {"tags": ["java", "android", "jackson", "java-7", "kotlin"], "comments": [{"owner": {"reputation": 3306, "user_id": 4229796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x9p0l.jpg?s=128&g=1", "display_name": "Dipali Shah", "link": "https://stackoverflow.com/users/4229796/dipali-shah"}, "edited": false, "score": 0, "creation_date": 1473507829, "post_id": 39425594, "comment_id": 66175372, "body": "Have you checked this - <a href=\"https://github.com/FasterXML/jackson-databind/blob/master/src/main/java/com/fasterxml/jackson/databind/ext/Java7Support.java\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-databind/blob/master/src/main/j&zwnj;&#8203;ava/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 21, "last_activity_date": 1473559281, "last_edit_date": 1495539996, "creation_date": 1473557694, "answer_id": 39432087, "question_id": 39425594, "link": "https://stackoverflow.com/questions/39425594/jackson-unable-to-load-jdk7-types-on-android/39432087#39432087", "title": "Jackson unable to load JDK7 types on Android", "body": "<p>First, your <code>sourceCompatibility</code> setting of <code>1.7</code> doesn't mean anything about the runtime environment, so it has no impact on this message.  </p>\n\n<p>This is purely a \"<em>do these classes exist at the time Jackson initializes this class</em>\" issue -- and they do <strong>not</strong> exist in some combination.  And maybe that is ok, if you do not use the Java 7 <code>java.nio.file.Path</code> class then you should have no issue with this logged <strong>warning</strong> message.  Because that is what this warning is about, Jackson supporting serialization/deserialization of this specific class.</p>\n\n<p>Looking at <a href=\"https://developer.android.com/reference/java/nio/package-summary.html\" rel=\"noreferrer\">Android <code>java.nio.*</code> packages</a>, it does not have <code>java.nio.file.*</code> packages at <strong>any</strong> API level.  So that explains why you see the warning message.  And since you can't use <code>java.nio.file.Path</code> anyway, this isn't even a real issue other than an annoying logging message.</p>\n\n<p>If this message is bothersome you can always set the Java Util Logging level for logger <code>com.fasterxml.jackson.databind.ext.Java7Support</code> to be level <code>ERROR</code>.  Then you will no longer see these <strong>warning</strong> messages.</p>\n\n<p><strong>More about the logged message:</strong></p>\n\n<p>In Jackson 2.8.x this support for Java 7 class <code>java.nio.file.Path</code> is all loading from the same JAR file and is built-in.  One class dynamically checks if another can load without error:</p>\n\n<pre><code>Class&lt;?&gt; cls = Class.forName(\"com.fasterxml.jackson.databind.ext.Java7SupportImpl\");\n</code></pre>\n\n<p>The only way this can fail is if something is stripping this class from the final set of classes.  Or one of these classes it depends on is missing from the runtime:</p>\n\n<pre><code>import java.beans.ConstructorProperties;\nimport java.beans.Transient;\nimport java.nio.file.Path;\n</code></pre>\n\n<p>If any of those are missing then you will see the logged error message.  So one of these is true:</p>\n\n<ul>\n<li>one or more of the JDK 7 classes are missing at runtime</li>\n<li><code>com.fasterxml.jackson.databind.ext.Java7SupportImpl</code> is missing at runtime</li>\n</ul>\n\n<p>Neither of those causes are Jackson's fault, they are something about your runtime environment (i.e. they don't exist in Android API's), or Proguard stripping classes it doesn't think are used.  </p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/24869323/android-import-java-nio-file-files-cannot-be-resolved\">Android import java.nio.file.Files; cannot be resolved</a></li>\n<li><a href=\"https://stackoverflow.com/questions/18981757/how-to-use-java-nio-file-package-in-android\">How to use java.nio.file package in android?</a></li>\n<li><a href=\"https://developer.android.com/reference/java/nio/package-summary.html\" rel=\"noreferrer\">Android java.nio packages</a></li>\n</ul>\n"}], "owner": {"reputation": 3150, "user_id": 468102, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/be87f741833cb7870c546c9eb3ac08f3?s=128&d=identicon&r=PG", "display_name": "tyrondis", "link": "https://stackoverflow.com/users/468102/tyrondis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12533, "favorite_count": 2, "accepted_answer_id": 39432087, "answer_count": 1, "score": 9, "last_activity_date": 1473559426, "creation_date": 1473507071, "last_edit_date": 1473559426, "question_id": 39425594, "link": "https://stackoverflow.com/questions/39425594/jackson-unable-to-load-jdk7-types-on-android", "title": "Jackson unable to load JDK7 types on Android", "body": "<p>I use Jackson 2.8.2 in my Android app to deserialize JSON. The deserialization itself works, however, I can see the following warning in the application log:</p>\n\n<pre><code>Unable to load JDK7 types (annotations, java.nio.file.Path): no Java7 support added\n</code></pre>\n\n<p>Proguard is disabled, <code>sourceCompatibility</code> is set to <code>'1.7'</code>. How can I add these seemingly missing types to my build?</p>\n"}, {"tags": ["java", "tomcat", "servlets", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1473506550, "post_id": 39425467, "comment_id": 66175046, "body": "Does this configuration works with pure Java?"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 1, "creation_date": 1473506647, "post_id": 39425467, "comment_id": 66175073, "body": "Based on the exception, you&#39;re not bringing kotlin-runtime library with you. If you&#39;re using Maven, make sure you&#39;re using kotlin-maven-plugin"}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "reply_to_user": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1473507049, "post_id": 39425467, "comment_id": 66175172, "body": "@AlexeySoshin Thank you. That fixed it. Would you like to write an answer?"}], "answers": [{"tags": [], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "is_accepted": true, "score": 1, "last_activity_date": 1473507505, "creation_date": 1473507505, "answer_id": 39425644, "question_id": 39425467, "link": "https://stackoverflow.com/questions/39425467/error-running-an-apache-tomcat-servlet-written-in-kotlin/39425644#39425644", "title": "Error running an Apache Tomcat servlet written in Kotlin", "body": "<p>I am writing this answer for myself in case I forget again, and for the benefit of anyone else who faces this problem.</p>\n\n<p>As Alexy Soshin alludes to the reason in the comments to this question, the Tomcat server wasn't able to reference the kotlin runtime libraries because they were missing from the project <strong>Artifacts</strong>.</p>\n\n<p>To fix the problem, I selected the servlet project in the <strong>Project</strong> window, and right-clicked my mouse and selected <strong>Open Module Settings</strong> from the context menu.</p>\n\n<p>Then in the <strong>Project Structure</strong> dialog, I selected <strong>Artifacts</strong> from the <strong>Project Settings</strong> section on the left, and added not just the kotlin runtime libraries but also all other libraries that my entire project was referencing.</p>\n\n<p>Thankfully, I'd put them all in one place in the %PROJECTROOT%\\lib folder that I'd created.</p>\n\n<p>After doing this, when I clicked the <strong>Run</strong> button again, the server was able to load my servlet fine.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ryWT2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ryWT2.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 39425644, "answer_count": 1, "score": 0, "last_activity_date": 1473507505, "creation_date": 1473506064, "question_id": 39425467, "link": "https://stackoverflow.com/questions/39425467/error-running-an-apache-tomcat-servlet-written-in-kotlin", "title": "Error running an Apache Tomcat servlet written in Kotlin", "body": "<p>When I click the <strong>Run</strong> green arrow button on the toolbar, or select the <strong>Run Tomcat 8.0.36</strong> command from the <strong>Run</strong> menu in IntelliJ IDEA Ultimate in order to start my HTTP Servlet application that I wrote in Kotlin, it appears as though the server starts but is not able to load my application.</p>\n\n<p>I say that because when I hit the url <code>http://localhost:8080</code> or that of one of my servlets at <code>http://localhost:8080/login</code>, I see just a blank page.</p>\n\n<p>Here is the relevant excerpt from the output from the <strong>Output</strong> window of IntelliJ when I click the <strong>Run</strong> button.</p>\n\n<pre><code>10-Sep-2016 15:34:05.807 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in 595 ms\nConnected to server\n[2016-09-10 03:34:06,384] Artifact Server:war exploded: Artifact is being deployed, please wait...\n10-Sep-2016 15:34:09.256 SEVERE [RMI TCP Connection(3)-127.0.0.1] org.apache.catalina.core.ContainerBase.addChildInternal ContainerBase.addChild: start: \n org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:153)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\n    at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1696)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:484)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:433)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1471)\n    at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\n    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1312)\n    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1404)\n    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:832)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:323)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$256(TCPTransport.java:683)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.NoClassDefFoundError: kotlin/TypeCastException\n    at java.lang.Class.getDeclaredFields0(Native Method)\n    at java.lang.Class.privateGetDeclaredFields(Class.java:2583)\n    at java.lang.Class.getDeclaredFields(Class.java:1916)\n    at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:106)\n    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:256)\n    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationFilterAnnotations(WebAnnotationSet.java:105)\n    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:64)\n    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:335)\n    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:782)\n    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:306)\n    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:95)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5202)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147)\n    ... 42 more\nCaused by: java.lang.ClassNotFoundException: kotlin.TypeCastException\n    at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1332)\n    at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1166)\n    ... 56 more\n\n10-Sep-2016 15:34:09.265 SEVERE [RMI TCP Connection(3)-127.0.0.1] org.apache.tomcat.util.modeler.BaseModelMBean.invoke Exception invoking method manageApp\n[2016-09-10 03:34:10,530] Artifact Server:war exploded: Error during artifact deployment. See server log for details.\n java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:729)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\n    at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1696)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:484)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:433)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1471)\n    at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\n    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1312)\n    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1404)\n    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:832)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:323)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$256(TCPTransport.java:683)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\n10-Sep-2016 15:34:09.266 SEVERE [RMI TCP Connection(3)-127.0.0.1] org.apache.tomcat.util.modeler.BaseModelMBean.invoke Exception invoking method createStandardContext\n javax.management.RuntimeOperationsException: Exception invoking method manageApp\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:308)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:484)\n    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:433)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1471)\n    at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\n    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1312)\n    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1404)\n    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:832)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:323)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$256(TCPTransport.java:683)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:729)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\n    at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1696)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    ... 33 more\n\n10-Sep-2016 15:34:15.589 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory C:\\Program Files\\Apache Software Foundation\\Tomcat 8.0\\webapps\\manager\n10-Sep-2016 15:34:16.517 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory C:\\Program Files\\Apache Software Foundation\\Tomcat 8.0\\webapps\\manager has finished in 927 ms\n</code></pre>\n"}, {"tags": ["properties", "delegates", "kotlin", "member", "delegation"], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1473488038, "creation_date": 1473488038, "answer_id": 39423167, "question_id": 39421593, "link": "https://stackoverflow.com/questions/39421593/kotlin-how-can-i-get-the-delegation-class-of-a-member-property/39423167#39423167", "title": "Kotlin: How can I get the delegation class of a member property?", "body": "<p>On the byte code level delegated properties do not defer from regular ones (public getter/setter and a private field). </p>\n\n<p>One way you could go is scanning the private fields of <code>Example</code> and filtering those which have <code>operator getValue(thisRef: R, KProperty&lt;*&gt;)</code>. Technically a field may contain a delegate object <code>val x = lazy {1}</code>, but that is not very likely. </p>\n"}, {"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1474781391, "post_id": 39426864, "comment_id": 66667169, "body": "My patch: <a href=\"https://gist.github.com/Jire/df9c99fac5e4d3f35e1a6c517716f989\" rel=\"nofollow noreferrer\">gist.github.com/Jire/df9c99fac5e4d3f35e1a6c517716f989</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 1, "creation_date": 1474814106, "post_id": 39426864, "comment_id": 66675343, "body": "Sure, both do similar things.  I wanted to return all things that delegate in this example, and also not call <code>isAccessible</code> on anything I didn&#39;t have to (is there impact in calling it more?)"}, {"owner": {"reputation": 441, "user_id": 4381679, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/291b18f582b91fc3b01e20b00c73c539?s=128&d=identicon&r=PG&f=1", "display_name": "Monte Creasor", "link": "https://stackoverflow.com/users/4381679/monte-creasor"}, "edited": false, "score": 0, "creation_date": 1508205631, "post_id": 39426864, "comment_id": 80509038, "body": "The patch you reference (Jire) will only work if there is only one declared property that use the delegate that is passed as the 2nd parameter. Is there anyway to find the delegate for a given property when there are 2 or more properties using the same delegate? I would love to have a function that could do that. I&#39;ve tried to figure it out but I don&#39;t think it&#39;s possible."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 4, "last_activity_date": 1474814603, "last_edit_date": 1474814603, "creation_date": 1473516530, "answer_id": 39426864, "question_id": 39421593, "link": "https://stackoverflow.com/questions/39421593/kotlin-how-can-i-get-the-delegation-class-of-a-member-property/39426864#39426864", "title": "Kotlin: How can I get the delegation class of a member property?", "body": "<p>To find properties that delegate to a delegate class along with the instance of that class, here is a utility function:</p>\n\n\n\n<pre><code>data class DelegatedProperty&lt;T : Any, DELEGATE : Any&gt;(val property: KProperty1&lt;T, *&gt;, val delegatingToInstance: DELEGATE)\n\ninline fun &lt;reified T : Any, DELEGATE : Any&gt; findDelegatingPropertyInstances(instance: T, delegatingTo: KClass&lt;DELEGATE&gt;): List&lt;DelegatedProperty&lt;T, DELEGATE&gt;&gt; {\n    return T::class.declaredMemberProperties.map { prop -&gt;\n        val javaField = prop.javaField\n        if (javaField != null &amp;&amp; delegatingTo.java.isAssignableFrom(javaField.type)) {\n            javaField.isAccessible = true // is private, have to open that up\n            @Suppress(\"UNCHECKED_CAST\")\n            val delegateInstance = javaField.get(instance) as DELEGATE\n            DelegatedProperty(prop, delegateInstance)\n        } else {\n            null\n        }\n    }.filterNotNull()\n}\n</code></pre>\n\n<p>A few notes:</p>\n\n<ul>\n<li>First correct your reified type <code>T</code> to <code>T: Any</code> or you cannot access all of the extensions in Kotlin reflection including <code>declaredMemberProperties</code></li>\n<li>It is easiest to get to the field from a property reference to be sure you are actually talking about something that is really a property, so for each of <code>declaredMemberProperties</code> use <code>javaField</code> to do so.  </li>\n<li>Since <code>javaField</code> is a custom getter and could be nullable, it is saved to a local variable so smart casting will work later.  </li>\n<li>Then if this field has the same type as the delegation class you are looking for, you can then access the field.  </li>\n<li>But first you have to force the field's accessibility because it is a <code>private</code> field.  </li>\n</ul>\n\n<p>Running this in test program:</p>\n\n<pre><code>class DelegationExample {\n    operator fun getValue(ref: Any, prop: KProperty&lt;*&gt;) = 0\n}\n\nclass Example {\n    val a by DelegationExample()\n    val b by DelegationExample()\n    val c by DelegationExample()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    findDelegatingPropertyInstances(Example(), DelegationExample::class).forEach {\n        println(\"property '${it.property.name}' delegates to instance of [${it.delegatingToInstance}]\")\n    }\n}\n</code></pre>\n\n<p>The output is something like:</p>\n\n<pre><code>property 'a' delegates to instance of [DelegationExample@2c1b194a]\nproperty 'b' delegates to instance of [DelegationExample@4dbb42b7]\nproperty 'c' delegates to instance of [DelegationExample@66f57048]\n</code></pre>\n"}], "owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1929, "favorite_count": 1, "accepted_answer_id": 39426864, "answer_count": 2, "score": 4, "last_activity_date": 1474814603, "creation_date": 1473470307, "question_id": 39421593, "link": "https://stackoverflow.com/questions/39421593/kotlin-how-can-i-get-the-delegation-class-of-a-member-property", "title": "Kotlin: How can I get the delegation class of a member property?", "body": "<p>How can I get the delegation class of a member property?</p>\n\n<p>By this, I mean is it possible to complete such a function:</p>\n\n<pre><code>inline fun &lt;reified T&gt; delegationExample(t: T) {\n    for (prop in T::class.declaredMemberProperties) {\n        val delegatedClass = // what to do?!\n    }\n}\n</code></pre>\n\n<p>Where the delegation class may look like:</p>\n\n<pre><code>class DelegationExample {\n    operator fun getValue(ref: Any, prop: KProperty&lt;*&gt;) = 0\n}\n</code></pre>\n\n<p>And the declaration class might look like this:</p>\n\n<pre><code>object Example {\n    val a by DelegationExample()\n    val b by DelegationExample()\n    val c by DelegationExample()\n}\n</code></pre>\n"}, {"tags": ["java", "spring", "netty", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "edited": false, "score": 0, "creation_date": 1473459893, "post_id": 39420471, "comment_id": 66166027, "body": "Thanks for your answer Jayson. I will give consideration to these other clients. That being said, my interest is that the client is not only asynchronous, but also non-blocking. I may be wrong on this, but I think both OkHttp and Apache Http Components, although async, are unfortunately blocking. Right?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "edited": false, "score": 0, "creation_date": 1473461027, "post_id": 39420471, "comment_id": 66166296, "body": "okHTTP does something mixed, &quot;In OkHttp we expose a blocking API over a framed protocol&quot; <a href=\"https://github.com/square/okhttp/wiki/Concurrency\" rel=\"nofollow noreferrer\">github.com/square/okhttp/wiki/Concurrency</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "edited": false, "score": 0, "creation_date": 1473461150, "post_id": 39420471, "comment_id": 66166318, "body": "But if proxy support is required, you can&#39;t use the default <code>Netty4ClientHttpRequestFactory</code> so you have to give up on non-blocking or write a new implementation."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "edited": false, "score": 1, "creation_date": 1473461216, "post_id": 39420471, "comment_id": 66166333, "body": "Most apps that use non-blocking I/O use thread pools of their own to do work, and at that point you aren&#39;t participating in the same event loop as Netty anyway, so you are causing context shifts across threads and blocking in other ways.    Anyway, this is off topic from your question."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 2, "last_activity_date": 1473459561, "creation_date": 1473459561, "answer_id": 39420471, "question_id": 39419488, "link": "https://stackoverflow.com/questions/39419488/how-to-set-proxy-for-spring-asyncresttemplate-using-netty4clienthttprequestfacto/39420471#39420471", "title": "How to set proxy for Spring AsyncRestTemplate using Netty4ClientHttpRequestFactory?", "body": "<p>The <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/http/client/Netty4ClientHttpRequestFactory.java\" rel=\"nofollow\"><code>Netty4ClientHttpRequestFactory</code></a> (<a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/http/client/Netty4ClientHttpRequestFactory.java\" rel=\"nofollow\"><em>source</em></a>) and related classes such as <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/http/client/Netty4ClientHttpRequest.java\" rel=\"nofollow\"><code>Netty4ClientHttpRequest</code></a>  (<a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/http/client/Netty4ClientHttpRequest.java\" rel=\"nofollow\"><em>source</em></a>) use <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/main/java/org/springframework/http/client/Netty4ClientHttpRequest.java#L33\" rel=\"nofollow\"><code>SimpleChannelInboundHandler</code></a> for the channel and do not use the proxy handler.  Everything is private and unable to be overridden within the source, so there is no way to change it to support Proxies.  You would have to almost rewrite the whole thing.  </p>\n\n<p>You have other async client options that will work very well and allow you more configuration options.  The included Netty one is fairly basic anyway.  <code>OkHttpClientHttpRequestFactory</code> and <code>HttpComponentsAsyncClientHttpRequestFactory</code> both let you pass in your own configured client.</p>\n"}, {"tags": [], "owner": {"reputation": 670, "user_id": 5347441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/594b2adfe51360b80aa27c84d24b437b?s=128&d=identicon&r=PG&f=1", "display_name": "XuDong Wu", "link": "https://stackoverflow.com/users/5347441/xudong-wu"}, "is_accepted": false, "score": 0, "last_activity_date": 1480736233, "creation_date": 1480736233, "answer_id": 40943984, "question_id": 39419488, "link": "https://stackoverflow.com/questions/39419488/how-to-set-proxy-for-spring-asyncresttemplate-using-netty4clienthttprequestfacto/40943984#40943984", "title": "How to set proxy for Spring AsyncRestTemplate using Netty4ClientHttpRequestFactory?", "body": "<p>To your interest, AsyncRestTemplate's different implementation:  </p>\n\n<p>SimpleClientHttpRequestFactory -> simple thread pool, blocking api, proxy supported</p>\n\n<p>OkHttpClient (OkHttp3) -> blocking api, proxy supported</p>\n\n<p>CloseableHttpAsyncClient -> non-blocking nio api, proxy supported</p>\n\n<p>Netty4ClientHttpRequestFactory -> non-blocking nio api, proxy not supported</p>\n\n<p>you can visit <a href=\"https://github.com/wuxudong/VariousAsyncHttpClientPerformance\" rel=\"nofollow noreferrer\">https://github.com/wuxudong/VariousAsyncHttpClientPerformance</a> for more details</p>\n"}], "owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1198, "favorite_count": 1, "accepted_answer_id": 39420471, "answer_count": 2, "score": 0, "last_activity_date": 1480736233, "creation_date": 1473454106, "last_edit_date": 1473466599, "question_id": 39419488, "link": "https://stackoverflow.com/questions/39419488/how-to-set-proxy-for-spring-asyncresttemplate-using-netty4clienthttprequestfacto", "title": "How to set proxy for Spring AsyncRestTemplate using Netty4ClientHttpRequestFactory?", "body": "<p>When I use a SimpleRequestFactory with my AsyncRestTemplate I can easily configure an HTTP proxy server.</p>\n\n<p>I can either do (sample code in Kotlin):</p>\n\n<pre><code>@Bean\nopen fun asyncRestTemplate(): AsyncRestTemplate {\n    val proxy = Proxy(Proxy.Type.HTTP, InetSocketAddress(\"127.0.0.1\", 8008))\n\n    val requestFactory = SimpleClientHttpRequestFactory().apply {\n        this.setConnectTimeout(TimeUnit.SECONDS.toMillis(10).toInt())\n        this.setReadTimeout(TimeUnit.SECONDS.toMillis(10).toInt())\n        this.setProxy(proxy)\n        this.setTaskExecutor(taskExecutor())\n    }\n\n    return AsyncRestTemplate(requestFactory)\n}\n</code></pre>\n\n<p>Or I can simply set the corresponding system properties: <code>-Dhttp.proxyHost=127.0.0.1 -Dhttp.proxyPort=8008</code>.</p>\n\n<p>However, in the moment that I switch from the <code>SimpleClientHttpRequestFactory</code> to a <code>Netty4ClientHttpRequestFactory</code> there is no evident way to configure the proxy directly and it seems this client does not respect the system properties either.</p>\n\n<pre><code>val requestFactory = Netty4ClientHttpRequestFactory().apply {\n    this.setConnectTimeout(TimeUnit.SECONDS.toMillis(10).toInt())\n    this.setReadTimeout(TimeUnit.SECONDS.toMillis(10).toInt())\n    //this.setProxy(proxy) //???\n}\n</code></pre>\n\n<p>Once I change for the netty client, I have no clue on how to make it go through the proxy.  </p>\n\n<p>My interest in using the netty client was that I not only wanted to make async requests, but also I wanted this to be non-blocking. I hope I'm not making a wrong assumption here.</p>\n\n<p>Does anyone know how can I use a proxy server when using the <code>Netty4ClientHttpRequestFactory</code> or perhaps know of an alternative non-blocking client supported by Spring that I could use?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473439200, "post_id": 39415898, "comment_id": 66156973, "body": "What outputs &quot;------- write threw an exception&quot;?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473439367, "post_id": 39415898, "comment_id": 66157052, "body": "it&#39;s also a bit confusing to see code return something of type <code>Exception</code> instead of throwing the exception (which would cause an <code>ExecutionException</code> to be thrown when you retrieve the results of the AynscTask), you could return a <code>PhotoEditResult</code> class or enum instead."}, {"owner": {"reputation": 537, "user_id": 5207721, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/686783f7f5ad8284b8c1491775db498c?s=128&d=identicon&r=PG&f=1", "display_name": "gesuwall", "link": "https://stackoverflow.com/users/5207721/gesuwall"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473439701, "post_id": 39415898, "comment_id": 66157188, "body": "After doing some googling, the output is from SKIA library that android uses for image decoding <a href=\"http://stackoverflow.com/questions/5751719/android-skia-image-decoding\" title=\"android skia image decoding\">stackoverflow.com/questions/5751719/android-skia-image-decod&zwnj;&#8203;ing</a>"}, {"owner": {"reputation": 537, "user_id": 5207721, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/686783f7f5ad8284b8c1491775db498c?s=128&d=identicon&r=PG&f=1", "display_name": "gesuwall", "link": "https://stackoverflow.com/users/5207721/gesuwall"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473439768, "post_id": 39415898, "comment_id": 66157223, "body": "I agree that it is a bit confusing, but I expect it to crash and not return anything at all. my original idea was to catch the <code>IOException</code> and return it as a result, but that didn&#39;t work either."}, {"owner": {"reputation": 1329, "user_id": 786462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4aaf9b744189b30c7d6ee320120201?s=128&d=identicon&r=PG", "display_name": "DataDino", "link": "https://stackoverflow.com/users/786462/datadino"}, "edited": false, "score": 0, "creation_date": 1473440762, "post_id": 39415898, "comment_id": 66157695, "body": "This looks suspicious:  <code>Caused by: libcore.io.ErrnoException: write failed: ENOSPC (No space left on device)</code>  Is your device full and therefore can&#39;t write the file?"}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 1, "last_activity_date": 1473441175, "last_edit_date": 1473441175, "creation_date": 1473440786, "answer_id": 39416549, "question_id": 39415898, "link": "https://stackoverflow.com/questions/39415898/thrown-exception-while-compressing-bitmap-inside-asynctask-is-not-stopping-execu/39416549#39416549", "title": "Thrown exception while compressing bitmap inside AsyncTask is not stopping execution", "body": "<p>The <code>Bitmap</code> class <a href=\"https://developer.android.com/reference/android/graphics/Bitmap.html#compress(android.graphics.Bitmap.CompressFormat%2C%20int%2C%20java.io.OutputStream)\" rel=\"nofollow\"><code>compress()</code> method</a> intentionally does not throw an exception on failure.  </p>\n\n<p>The documentation lists no exceptions for this method, and instead lists the expected return value as:</p>\n\n<blockquote>\n  <p>Returns: boolean true if successfully compressed to the specified stream.</p>\n</blockquote>\n\n<p>That is why you see your line of logging output of <strong>\"fout is closed\"</strong> since no exception is thrown and there is no checking of the boolean result.</p>\n\n<p>The line of code calling <code>compress()</code> needs to check the boolean results:</p>\n\n\n\n<pre><code>if (!source.compress(Bitmap.CompressFormat.PNG, quality, fout)) {\n    throw IOException(\"compression failure\")\n}\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 5207721, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/686783f7f5ad8284b8c1491775db498c?s=128&d=identicon&r=PG&f=1", "display_name": "gesuwall", "link": "https://stackoverflow.com/users/5207721/gesuwall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 39416549, "answer_count": 1, "score": 1, "last_activity_date": 1473441175, "creation_date": 1473438199, "last_edit_date": 1473440261, "question_id": 39415898, "link": "https://stackoverflow.com/questions/39415898/thrown-exception-while-compressing-bitmap-inside-asynctask-is-not-stopping-execu", "title": "Thrown exception while compressing bitmap inside AsyncTask is not stopping execution", "body": "<p>I have an <code>AsyncTask</code> written in Kotlin that processes a bitmap and the stores it to a file in internal storage. My phone has no free space for the new bitmap, so during the write, an IOException is thrown, which should make the app crash.</p>\n\n<p>This is my <code>doInBackground()</code> function:</p>\n\n<pre><code>override fun doInBackground(vararg params: Int?): Exception? {\n    if(params[0] == null)\n        throw IllegalArgumentException();\n    Log.d(\"PhotoEditTask\", \"start\")\n    var bitmap : Bitmap? = null\n        val degrees = if(params.size == 0) 0 else params[0] ?: 0\n        bitmap = BitmapProcessing.getBitmapFromUri(sourceUri, resolver)\n        if (bitmap != null) {\n            bitmap = BitmapProcessing.rotateBitmap(bitmap, degrees)\n            var destFile = File(destPath)\n            destFile.delete()\n            BitmapFile.saveBitmapToFile(bitmap, destFile, 85)\n            Log.d(\"PhotoEditTask\", \"save successfull!\")\n            return null\n        }\n        bitmap?.recycle()\n\n    return Exception(\"Write failed\")\n\n}\n</code></pre>\n\n<p>and the function that writes the file to a Bitmap is:</p>\n\n<pre><code>fun saveBitmapToFile(source: Bitmap, dest: File, quality: Int) {\n        var fout : FileOutputStream? = null\n        fout = FileOutputStream(dest)\n        source.compress(Bitmap.CompressFormat.PNG, quality, fout)\n        fout.flush()\n        fout.close()\n        Log.d(\"BitmapProcessing\", \"fout is closed\")\n\n    }\n</code></pre>\n\n<p>This should crash, or at the very least return an Exception with the \"Write failed\" message, but it should never return null since my phone can't write the file. However the log shows otherwise:</p>\n\n<pre><code>09-09 12:16:40.824 26074-26805/com.criptext.uisample D/skia: jpeg_decoder finish successfully, L:1881!!!\n09-09 12:16:40.833 26074-26805/com.criptext.uisample W/System.err: java.io.IOException: write failed: ENOSPC (No space left on device)\n09-09 12:16:40.836 26074-26805/com.criptext.uisample W/System.err:     at libcore.io.IoBridge.write(IoBridge.java:499)\n09-09 12:16:40.836 26074-26805/com.criptext.uisample W/System.err:     at java.io.FileOutputStream.write(FileOutputStream.java:187)\n09-09 12:16:40.837 26074-26805/com.criptext.uisample W/System.err:     at android.graphics.Bitmap.nativeCompress(Native Method)\n09-09 12:16:40.837 26074-26805/com.criptext.uisample W/System.err:     at android.graphics.Bitmap.compress(Bitmap.java:1013)\n09-09 12:16:40.837 26074-26805/com.criptext.uisample W/System.err:     at com.criptext.monkeykitui.util.BitmapFile.saveBitmapToFile(BitmapFile.java:18)\n09-09 12:16:40.837 26074-26805/com.criptext.uisample W/System.err:     at com.criptext.monkeykitui.input.photoEditor.PhotoEditTask.doInBackground(PhotoEditTask.kt:42)\n09-09 12:16:40.838 26074-26805/com.criptext.uisample W/System.err:     at com.criptext.monkeykitui.input.photoEditor.PhotoEditTask.doInBackground(PhotoEditTask.kt:17)\n09-09 12:16:40.838 26074-26805/com.criptext.uisample W/System.err:     at android.os.AsyncTask$2.call(AsyncTask.java:288)\n09-09 12:16:40.838 26074-26805/com.criptext.uisample W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n09-09 12:16:40.839 26074-26805/com.criptext.uisample W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n09-09 12:16:40.840 26074-26805/com.criptext.uisample W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n09-09 12:16:40.840 26074-26805/com.criptext.uisample W/System.err:     at java.lang.Thread.run(Thread.java:848)\n09-09 12:16:40.840 26074-26805/com.criptext.uisample W/System.err: Caused by: libcore.io.ErrnoException: write failed: ENOSPC (No space left on device)\n09-09 12:16:40.842 26074-26805/com.criptext.uisample W/System.err:     at libcore.io.Posix.writeBytes(Native Method)\n09-09 12:16:40.842 26074-26805/com.criptext.uisample W/System.err:     at libcore.io.Posix.write(Posix.java:202)\n09-09 12:16:40.843 26074-26805/com.criptext.uisample W/System.err:     at libcore.io.BlockGuardOs.write(BlockGuardOs.java:197)\n09-09 12:16:40.843 26074-26805/com.criptext.uisample W/System.err:     at libcore.io.IoBridge.write(IoBridge.java:494)\n09-09 12:16:40.843 26074-26805/com.criptext.uisample W/System.err:  ... 11 more\n09-09 12:16:40.843 26074-26805/com.criptext.uisample D/skia: ------- write threw an exception\n09-09 12:16:40.844 26074-26805/com.criptext.uisample D/BitmapToFile: fout is closed\n09-09 12:16:40.844 26074-26805/com.criptext.uisample D/PhotoEditTask: save successfull!\n09-09 12:16:40.844 26074-26074/com.criptext.uisample D/PhotoEditTask: result: null\n</code></pre>\n\n<p>According to the Log, the <code>IOException</code> is thrown and it is caught somewhere, but the execution is never interrupted, so it always returns null. What is going on? How can I handle the <code>IOException</code>??</p>\n"}, {"tags": ["operator-overloading", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 7, "last_activity_date": 1473421831, "creation_date": 1473421831, "answer_id": 39410947, "question_id": 39410946, "link": "https://stackoverflow.com/questions/39410946/in-kotlin-i-can-override-some-existing-operators-but-what-about-creating-new-op/39410947#39410947", "title": "In Kotlin, I can override some existing operators but what about creating new operators?", "body": "<p>Kotlin only allows a very specific set of <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"noreferrer\">operators to be overridden</a> and you <strong>cannot</strong> change the list of available operators.  </p>\n\n<p>You should take care when overriding operators that you try to stay in the spirit of the original operator, or of other common uses of the mathematical symbol.  But sometime the typical symbol isn't available.  For example set Union <code>\u222a</code> can easily treated as <code>+</code> because conceptually it makes sense and that is a built-in operator <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/plus.html\" rel=\"noreferrer\"><code>Set&lt;T&gt;.plus()</code></a> already provided by Kotlin, or you could get creative and use an <a href=\"https://kotlinlang.org/docs/reference/functions.html#infix-notation\" rel=\"noreferrer\">infix function</a> for this case:</p>\n\n\n\n<pre><code>// already provided by Kotlin:\n// operator fun &lt;T&gt; Set&lt;T&gt;.plus(elements: Iterable&lt;T&gt;): Set&lt;T&gt; \n\n// and now add my new one, lower case 'u' is pretty similar to math symbol \u222a\ninfix fun &lt;T&gt; Set&lt;T&gt;.u(elements: Set&lt;T&gt;): Set&lt;T&gt; = this.plus(elements)\n\n// and therefore use any of...\nval union1 = setOf(1,2,5) u setOf(3,6)\nval union2 = setOf(1,2,5) + setOf(3,6)  \nval union3 = setOf(1,2,5) plus setOf(3,6)\n</code></pre>\n\n<p>Or maybe it is more clear as:</p>\n\n<pre><code>infix fun &lt;T&gt; Set&lt;T&gt;.union(elements: Set&lt;T&gt;): Set&lt;T&gt; = this.plus(elements)\n\n// and therefore\nval union4 = setOf(1,2,5) union setOf(3,6)\n</code></pre>\n\n<p>And continuing with your list of Set operators, intersection is the symbol <code>\u2229</code> so assuming every programmer has a font where letter 'n' looks <code>\u2229</code> we could get away with:</p>\n\n<pre><code>infix fun &lt;T&gt; Set&lt;T&gt;.n(elements: Set&lt;T&gt;): Set&lt;T&gt; = this.intersect(elements)\n\n// and therefore...\nval intersect = setOf(1,3,5) n setOf(3,5)\n</code></pre>\n\n<p>or via operator overloading of <code>*</code> as:</p>\n\n<pre><code>operator fun &lt;T&gt; Set&lt;T&gt;.times(elements: Set&lt;T&gt;): Set&lt;T&gt; = this.intersect(elements)  \n\n// and therefore...\nval intersect = setOf(1,3,5) * setOf(3,5)\n</code></pre>\n\n<p>Although you can already use the existing standard library infix function <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/intersect.html\" rel=\"noreferrer\"><code>intersect()</code></a> as:</p>\n\n<pre><code>val intersect = setOf(1,3,5) intersect setOf(3,5)\n</code></pre>\n\n<p>In cases where you are inventing something new you need to pick the closest operator or function name.  For example negating a Set of enums, maybe use <code>-</code> operator (<code>unaryMinus()</code>) or the <code>!</code> operator (<code>not()</code>):</p>\n\n<pre><code>enum class Things {\n    ONE, TWO, THREE, FOUR, FIVE\n}\n\noperator fun Set&lt;Things&gt;.unaryMinus() = Things.values().toSet().minus(this)\noperator fun Set&lt;Things&gt;.not() = Things.values().toSet().minus(this)\n\n// and therefore use any of...\n\nval current = setOf(Things.THREE, Things.FIVE)\n\nprintln(-current)             // [ONE, TWO, FOUR]\nprintln(-(-current))          // [THREE, FIVE]\nprintln(!current)             // [ONE, TWO, FOUR]\nprintln(!!current)            // [THREE, FIVE]\nprintln(current.not())        // [ONE, TWO, FOUR]\nprintln(current.not().not())  // [THREE, FIVE]\n</code></pre>\n\n<p>Be thoughtful since operator overloading can be very helpful, or it can lead to confusion and chaos.  You have to decide what is best while maintaining code readability.  Sometimes the operator is best if it fits the norm for that symbol, or an infix replacement that is similar to the original symbol, or using a descriptive word so that there is no chance of confusion.  </p>\n\n<p>Always check the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/\" rel=\"noreferrer\">Kotlin Stdlib API Reference</a> because many operators you want might already be defined, or have equivalent extension functions.</p>\n\n<p><strong>One other thing...</strong></p>\n\n<p>And about your <code>$$</code> operator, technically you can do that as:</p>\n\n<pre><code>infix fun String.`$$`(other: String) = \"$this !!whatever!! $other\"\n</code></pre>\n\n<p>But because you need to escape the name of the function, it will be ugly to call:</p>\n\n<pre><code>val text = \"you should do\" `$$` \"you want\"\n</code></pre>\n\n<p>That isn't truly operator overloading and only would work if it is a function that <a href=\"https://kotlinlang.org/docs/reference/functions.html#infix-notation\" rel=\"noreferrer\">can me made <code>infix</code></a>.</p>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3483, "favorite_count": 1, "accepted_answer_id": 39410947, "answer_count": 1, "score": 6, "last_activity_date": 1473424404, "creation_date": 1473421831, "last_edit_date": 1610973576, "question_id": 39410946, "link": "https://stackoverflow.com/questions/39410946/in-kotlin-i-can-override-some-existing-operators-but-what-about-creating-new-op", "title": "In Kotlin, I can override some existing operators but what about creating new operators?", "body": "<p>In Kotlin, I see I can override some operators, such as <code>+</code> by function <code>plus()</code>, and <code>*</code> by function <code>times()</code> ... but for some things like Sets, the preferred (set theory) symbols/operators don't exist.  For example <code>A\u2229B</code> for intersection and <code>A\u222aB</code> for union.</p>\n<p>I can't seem to define my own operators, there is no clear syntax to say what symbol to use for an operator.  For example if I want to make a function for <code>$$</code> as an operator:</p>\n<pre><code>operator fun String.$$(other: String) = &quot;$this !!whatever!! $other&quot;\n// or even\noperator fun String.whatever(other: String) = &quot;$this !!whatever!! $other&quot; // how do I say this is the $$ symbol?!?\n</code></pre>\n<p>I get the same error for both:</p>\n<blockquote>\n<p>Error:(y, x) Kotlin: 'operator' modifier is inapplicable on this function: illegal function name</p>\n</blockquote>\n<p>What are the rules for what operators can be created or overridden?</p>\n<p><strong>Note:</strong> <em>this question is intentionally written and answered by the author (<a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the idiomatic answers to commonly asked Kotlin topics are present in SO.</em></p>\n"}, {"tags": ["java", "android", "kotlin", "android-testing", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 4031, "user_id": 4142087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004205677206/picture?type=large", "display_name": "Anton Shkurenko", "link": "https://stackoverflow.com/users/4142087/anton-shkurenko"}, "edited": false, "score": 0, "creation_date": 1473605253, "post_id": 39417140, "comment_id": 66196880, "body": "Yeah, this work to me. But with Realm in dependencies I have to clean project every time before tests, to make it work. Too much problems :("}], "tags": [], "owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "is_accepted": true, "score": 2, "last_activity_date": 1473445286, "last_edit_date": 1473445286, "creation_date": 1473443355, "answer_id": 39417140, "question_id": 39410667, "link": "https://stackoverflow.com/questions/39410667/kotlin-androidtest-tests-ran-to-completion-empty-test-suite/39417140#39417140", "title": "Kotlin androidTest: Tests ran to completion. Empty test suite", "body": "<p>Change  </p>\n\n<pre><code>@Rule @JvmField val mRuleChain: TestRule = RuleChain.outerRule(mTestComponentRule).around(mActivityTestRule)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>@get:Rule @JvmField var mRuleChain: TestRule = RuleChain.outerRule(mTestComponentRule).around(mActivityTestRule)\n</code></pre>\n\n<p>if it won't work, it means that mRuleChain is null, check Dagger provided objects.</p>\n"}], "owner": {"reputation": 4031, "user_id": 4142087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004205677206/picture?type=large", "display_name": "Anton Shkurenko", "link": "https://stackoverflow.com/users/4142087/anton-shkurenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1879, "favorite_count": 0, "accepted_answer_id": 39417140, "answer_count": 1, "score": 6, "last_activity_date": 1473609539, "creation_date": 1473420873, "last_edit_date": 1473609539, "question_id": 39410667, "link": "https://stackoverflow.com/questions/39410667/kotlin-androidtest-tests-ran-to-completion-empty-test-suite", "title": "Kotlin androidTest: Tests ran to completion. Empty test suite", "body": "<p>I'm trying to translate my tests from java to kotlin.</p>\n\n<p>Simple unit tests were translated successfully, like this:</p>\n\n<pre><code>class BindingUtilsTest {\n  @Test @Throws(Exception::class)\n  fun testConvertBooleanToVisibility_visible() {\n    assertEquals(BindingUtils.convertBooleanToVisibility(true), View.VISIBLE)\n  }\n}\n</code></pre>\n\n<p>But when I'm trying to run androidTest it fails with message: \"No tests were found\" and </p>\n\n<blockquote>\n  <p>Test running started<br>\n  Tests ran to completion.</p>\n  \n  <p>Empty test suite.</p>\n</blockquote>\n\n<p>Code worked perfectly, when was in java. Related code:</p>\n\n<p>build.gradle parts:</p>\n\n<pre><code>apply plugin: \"com.android.application\"\napply plugin: \"com.neenbedankt.android-apt\"\n\n// for tests\napply plugin: 'kotlin-android'\n\n\n// defaultConfig\ntestInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n\nsourceSets {\n    test.java.srcDirs += 'src/test/kotlin' // tests are there\n    androidTest.java.srcDirs += 'src/androidTest/kotlin' // and there\n}\n\n// unit tests\ntestApt \"com.google.dagger:dagger-compiler:${daggerVer}\"\n\n// kotlin\ntestCompile \"org.jetbrains.kotlin:kotlin-stdlib:${kotlinVer}\"\ntestCompile \"org.jetbrains.kotlin:kotlin-test-junit:${kotlinVer}\"\n\n// android tests\n\nandroidTestApt \"com.google.dagger:dagger-compiler:${daggerVer}\"\n\n// kotlin\nandroidTestCompile \"org.jetbrains.kotlin:kotlin-stdlib:${kotlinVer}\"\nandroidTestCompile \"org.jetbrains.kotlin:kotlin-test-junit:${kotlinVer}\"\n</code></pre>\n\n<p>Simple test:</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class) class MainDrawerActivityTest {\n\n  private val mQuestions = InstrumentationRegistry.getTargetContext().applicationContext as Questions\n\n  private val mTestComponentRule = TestComponentRule&lt;Questions, AppComponentTest&gt;(mQuestions,\n      DaggerAppComponentTest.builder().appModuleTest(AppModuleTest(mQuestions)).build(),\n      { obj, component -&gt; obj.setAppComponent(component) }, // set test component\n      { objectToClear -&gt; objectToClear.setAppComponent(null) }) // clear test component\n\n  private val mActivityTestRule = ActivityTestRule(\n      MainDrawerActivity::class.java, false, false)\n\n  // TestComponentRule needs to go first to make sure the Dagger TestComponent is set\n  // in the Application before any Activity is launched.\n  @Rule @JvmField val mRuleChain: TestRule = RuleChain.outerRule(mTestComponentRule).around(mActivityTestRule)\n\n  private var mActivity: MainDrawerActivity? = null\n\n  @Before @Throws(Exception::class)\n  fun setUp() {\n    mActivityTestRule.launchActivity(null)\n\n    mActivity = mActivityTestRule.activity\n  }\n\n  @Test @Throws(Exception::class)\n  fun testOnCreate() {\n\n    val size = mActivity!!.supportFragmentManager.fragments.size\n\n    // check if fragment instantly added\n    assertEquals(size.toLong(), 1)\n  }\n}\n</code></pre>\n\n<p>Test component is in Kotlin:</p>\n\n<pre><code>// Empty because extends ApplicationComponent\n@Singleton @Component(modules = arrayOf(\n    AppModuleTest::class)) interface AppComponentTest : AppComponent\n</code></pre>\n\n<p>And test module is also in Kotlin:</p>\n\n<pre><code>@Module class AppModuleTest(private val mApp: Questions) /*: AppModule*/ {\n  @Provides fun provideApp(): Questions {\n    return mApp\n  }\n}\n</code></pre>\n\n<p>I don't even see, that DaggerAppComponentTest is built.</p>\n\n<p><strong>Why I use apt instead of kapt for tests?</strong></p>\n\n<p>Because I've got an error that I can't mix apt and kapt in one project. I tried to switch apt to kapt and got billion of errors.</p>\n\n<p>As I understand, kapt processes kotlin files and using it people generate kotlin code? And for apt: java files, java code. How to mix it? How to solve this problem?</p>\n\n<p><strong>Solution</strong></p>\n\n<p>Accepted solution works. Before that I returned kapt for Kotlin. With <code>kaptAndroidTest</code> and <code>kaptTest</code>.</p>\n"}, {"tags": ["operators", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 3, "last_activity_date": 1473407680, "last_edit_date": 1473407680, "creation_date": 1473407186, "answer_id": 39406412, "question_id": 39406307, "link": "https://stackoverflow.com/questions/39406307/kotlin-what-do-the-unary-plus-minus-operators-do-on-numbers/39406412#39406412", "title": "Kotlin: What do the unary plus/minus operators do on numbers?", "body": "<p>The purpose of those operators is to be able to write:</p>\n\n<pre><code>val a = System.nanoTime()\nval b = -a // a.unaryMinus()\nval c = +b // b.unaryPlus()\n</code></pre>\n\n<p>They are not directly related to <code>++</code>/<code>inc</code> and <code>--</code>/<code>dec</code> operators however they can be used in conjunction.</p>\n\n<p>Notice that the following expressions are different:</p>\n\n<pre><code>--a // a = a.dec()\n-(-a) // a.unaryMinus().unaryMinus()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1473407684, "post_id": 39406453, "comment_id": 66138097, "body": "Makes a lot of sense!"}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": false, "score": 8, "last_activity_date": 1473410170, "last_edit_date": 1473410170, "creation_date": 1473407334, "answer_id": 39406453, "question_id": 39406307, "link": "https://stackoverflow.com/questions/39406307/kotlin-what-do-the-unary-plus-minus-operators-do-on-numbers/39406453#39406453", "title": "Kotlin: What do the unary plus/minus operators do on numbers?", "body": "<p>These operators are the signs of the integers. Here are some examples:</p>\n\n<p><code>+5</code> calls <code>5.unaryPlus()</code> and returns 5.</p>\n\n<p><code>-5</code> calls <code>5.unaryMinus()</code> and returns -5.</p>\n\n<p><code>-(-5)</code> calls <code>5.unaryMinus().unaryMinus()</code> and returns 5.</p>\n"}, {"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1473470421, "post_id": 39410048, "comment_id": 66168050, "body": "Truly complete answer. Thanks!"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 13, "last_activity_date": 1473424262, "last_edit_date": 1473424262, "creation_date": 1473418744, "answer_id": 39410048, "question_id": 39406307, "link": "https://stackoverflow.com/questions/39406307/kotlin-what-do-the-unary-plus-minus-operators-do-on-numbers/39410048#39410048", "title": "Kotlin: What do the unary plus/minus operators do on numbers?", "body": "<p>Others have defined the basic meaning of <code>unaryMinus</code> and <code>unaryPlus</code>, and in reality on numeric types they may not actually even be called as functions.  For example, coding <code>+x</code> or <code>x.unaryPlus()</code> generates the same bytecode (where <code>x</code> is type <code>Int</code>):</p>\n\n<pre><code>ILOAD 1\nISTORE 2\n</code></pre>\n\n<p>And the code <code>-x</code> or <code>x.unaryMinus()</code> generates the identical bytecode:</p>\n\n<pre><code>ILOAD 1\nINEG\nISTORE 2\n</code></pre>\n\n<p><strong>But there is more going on that this...</strong></p>\n\n<p>So why does the compiler even generate anything for <code>+x</code>?  Some people will say that <code>+x</code> and <code>x.unaryPlus()</code> doesn't do anything, and that <code>-x</code> and <code>x.unaryMinus()</code> only reverses the sign.  That isn't correct.  In Java it is more complicated because it can involve widening and unboxing, see <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.1\">Unary Numeric Promotion</a> which explains the full consequences of these operators.   This has consequences for boxed values and types smaller than <code>Int</code>.  For value of type <code>Short</code> and <code>Byte</code> these operators will return a new unboxed value widened of type <code>Int</code>.  And since both operators have this more hidden functionality then both must generate bytecode even if you don't think <code>+x</code> does anything.  By the way, this is similar to what C language does and it is called <a href=\"https://msdn.microsoft.com/en-us/library/3t4w2bkb(VS.80).aspx\">Usual Arithmetic Conversions</a>. </p>\n\n<p>Therefore this code is invalid:</p>\n\n<pre><code>val x: Short = 1\nval y1: Short = +x              // incompatible types\nval y2: Short = x.unaryPlus()   // incompatible types\nval z1: Short = -x              // incompatible types\nval z2: Short = x.unaryMinus()  // incompatible types\n</code></pre>\n\n<p>In these numeric cases on the base numeric types they are just compiler magic to allow for the idea of these operators to be equated to operator functions that you might want to overload in other classes.</p>\n\n<p><strong>For other uses such as Operator Overloading...</strong></p>\n\n<p>But they are there for more than just mathematical use and can be used on any class as an operator.  Kotlin exposes operators as functions so that you can apply <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\">operator overloading</a> on a specific set of operators which include <code>unaryMinus</code> and <code>unaryPlus</code>.</p>\n\n<p>I could use these to define operators for my own or existing classes.  For example I have a <code>Set&lt;Things&gt;</code> where <code>Things</code> is an enum class along with an <code>unaryMinus()</code> operator to negate the contents of the finite set of options:</p>\n\n<pre><code>enum class Things {\n    ONE, TWO, THREE, FOUR, FIVE\n}\n\noperator fun Set&lt;Things&gt;.unaryMinus() = Things.values().toSet().minus(this)\n</code></pre>\n\n<p>And then I can negate my enum set whenever I want:</p>\n\n<pre><code>val current = setOf(Things.THREE, Things.FIVE)\nprintln(-current)       // [ONE, TWO, FOUR]\nprintln(-(-current))    // [THREE, FIVE]\n</code></pre>\n\n<p>Notice that I had to declare my extension function with the modifier <code>operator</code> or this will not work.  The compiler will remind you if you forget this when you try to use the operator:</p>\n\n<blockquote>\n  <p>Error:(y, x) Kotlin: 'operator' modifier is required on 'unaryMinus' in 'com.my.favorite.package.SomeClass'</p>\n</blockquote>\n"}], "owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2467, "favorite_count": 2, "accepted_answer_id": 39410048, "answer_count": 3, "score": 7, "last_activity_date": 1473424262, "creation_date": 1473406804, "question_id": 39406307, "link": "https://stackoverflow.com/questions/39406307/kotlin-what-do-the-unary-plus-minus-operators-do-on-numbers", "title": "Kotlin: What do the unary plus/minus operators do on numbers?", "body": "<p>I've noticed in Kotlin that there are already defined <code>unaryPlus</code> and <code>unaryMinus</code> operators on all of the number types.</p>\n\n<p>What's the purpose of these operators? Are they in some way connected to the prefix forms of <code>inc</code> and <code>dec</code>?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 15, "last_activity_date": 1473353409, "last_edit_date": 1473353409, "creation_date": 1473353297, "answer_id": 39396383, "question_id": 39396214, "link": "https://stackoverflow.com/questions/39396214/custom-getter-for-properties-from-type-parameters/39396383#39396383", "title": "Custom getter for properties from type parameters", "body": "<p>You need to use \"field\" instead of \"property\" in the body of your <code>get()</code> in order to declare a <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-fields\" rel=\"noreferrer\">backing field</a>:</p>\n\n<pre><code>class Thing(property: String?) {\n    val property: String? = property\n        get() = field ?: \"blah blah blah\"\n}\n</code></pre>\n\n<p>However, in this particular example you might be better off with a non-null property declaration:</p>\n\n<pre><code>class Thing(property: String?) {\n    val property: String = property ?: \"blah blah blah\"\n}\n</code></pre>\n"}], "owner": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5475, "favorite_count": 0, "accepted_answer_id": 39396383, "answer_count": 1, "score": 10, "last_activity_date": 1473353409, "creation_date": 1473352690, "question_id": 39396214, "link": "https://stackoverflow.com/questions/39396214/custom-getter-for-properties-from-type-parameters", "title": "Custom getter for properties from type parameters", "body": "<p>I have a Java file a little like so:</p>\n\n<pre><code>public class Thing {\n\n    private String property;\n\n    public Thing(String property) {\n        this.property = property;\n    }\n\n    public String getProperty() {\n        if (property == null) {\n            return \"blah blah blah\";\n        } else {\n            return property;\n        }\n    }\n\n}\n</code></pre>\n\n<p>Obviously there's more to my actual class but the above is just an example.</p>\n\n<p>I want to write this in Kotlin, so I started with this:</p>\n\n<pre><code>class Thing(val property: String?)\n</code></pre>\n\n<p>Then I tried to implement the custom getter using <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"noreferrer\">the official documentation</a> and <a href=\"https://discuss.kotlinlang.org/t/custom-getter-setter-for-properties-created-by-type-params/46/2\" rel=\"noreferrer\">another Kotlin question</a> as reference, like this:</p>\n\n<pre><code>class Thing(property: String?) {\n\n    val property: String? = property\n        get() = property ?: \"blah blah blah\"\n\n}\n</code></pre>\n\n<p>However, my IDE (Android Studio) highlights the second <code>property</code> on the 3rd line of the above code in red and gives me the message:</p>\n\n<blockquote>\n  <p>Initializer is not allowed here because the property has no backing field</p>\n</blockquote>\n\n<p>Why am I getting this error, and how would I be able to write this custom getter as described above?</p>\n"}, {"tags": ["spring-data", "cypher", "kotlin", "spring-data-neo4j-4"], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 3, "last_activity_date": 1473350280, "last_edit_date": 1495542834, "creation_date": 1473345147, "answer_id": 39393690, "question_id": 39392784, "link": "https://stackoverflow.com/questions/39392784/spring-data-neo4j-order-by-order-fails/39393690#39393690", "title": "Spring Data Neo4j - ORDER BY {order} fails", "body": "<p>This is the wrong model for changing <strong>sorting</strong> and <strong>paging</strong> information.  You can skip to the answer below for using those options, or continue reading for an explanation of what is wrong in your code as it stands.</p>\n\n<h3>You cannot bind where things aren't allowed to be bound:</h3>\n\n<p>You cannot bind a parameter into a syntax element of the query that is not setup for \"parameter binding\".  Parameter binding doesn't do simple string substitutions (because you would be open for injection attacks) but rather uses binding API's to bind parameters.  You are treating the query annotation like it is performing string substitution instead, and that is not what is happening. </p>\n\n<p>The <a href=\"http://neo4j.com/docs/developer-manual/3.0/cypher/#cypher-parameters\" rel=\"nofollow noreferrer\">parameter binding docs for Neo4J</a> and the <a href=\"http://neo4j.com/docs/java-reference/current/#tutorials-cypher-parameters-java\" rel=\"nofollow noreferrer\">Java manual for Query Parameters</a> show exactly where you can bind, <strong>the only places allowed are:</strong></p>\n\n<ul>\n<li>in place of String Literals</li>\n<li>in place of Regular Expressions</li>\n<li>String Pattern Matching</li>\n<li>Create node with properties, as the properties</li>\n<li>Create multiple nodes with properties, as the properties</li>\n<li>Setting all properties of a node</li>\n<li>numeric values for SKIP and LIMIT</li>\n<li>as the Node ID</li>\n<li>as multiple Node IDs</li>\n<li>Index Value </li>\n<li>Index Query</li>\n</ul>\n\n<p>There is nothing that says what you are trying is allowed, binding in the ORDER BY clause.  </p>\n\n<p>That isn't to say that the authors of Spring Data couldn't work around this and allow binding in other places, but it doesn't appear they have done more than what Neo4J Java API allows.</p>\n\n<h3>You can instead use the Sort class:</h3>\n\n<p>(<em>the fix to allow this is marked for version <code>4.2.0.M1</code> which is a pre-release as of Sept 8, 2016, see below for using milestone builds</em>)</p>\n\n<p>Spring Data has a <a href=\"http://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Sort.html\" rel=\"nofollow noreferrer\"><code>Sort</code> class</a>, if your <code>@Query</code> annotated method has a parameter of this type, it should apply sorting and allow that to dynamically modify the query.</p>\n\n<p>I assume the code would look something like (untested):</p>\n\n<pre><code>@Query(\"MATCH (movie:Movie {title={0}})&lt;-[:ACTS_IN]-(actor) RETURN actor\")\nList&lt;Actor&gt; getActorsThatActInMovieFromTitle(String movieTitle, Sort sort);\n</code></pre>\n\n<h3>Or you can use the PageRequest class / Pageable interface:</h3>\n\n<p>(<em>the fix to allow this is marked for version <code>4.2.0.M1</code> which is a pre-release as of Sept 8, 2016, see below for using milestone builds</em>)</p>\n\n<p>In current <a href=\"http://docs.spring.io/spring-data/neo4j/docs/current/reference/html/\" rel=\"nofollow noreferrer\">Spring Data + Neo4j docs</a> you see examples using paging:</p>\n\n<pre><code>@Query(\"MATCH (movie:Movie {title={0}})&lt;-[:ACTS_IN]-(actor) RETURN actor\")\nPage&lt;Actor&gt; getActorsThatActInMovieFromTitle(String movieTitle, PageRequest page);\n</code></pre>\n\n<p>(<em>sample from <a href=\"http://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#_cypher_examples\" rel=\"nofollow noreferrer\">Cypher Examples</a> in the Spring Data + Neo4j docs</em>)</p>\n\n<p>And this <a href=\"http://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/PageRequest.html\" rel=\"nofollow noreferrer\"><code>PageRequest</code> class</a> also allows sorting parameterization.  Anything that implements <a href=\"http://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Pageable.html\" rel=\"nofollow noreferrer\"><code>Pageable</code></a> will do the same.  Using <code>Pageable</code> instead is probably more proper:</p>\n\n<pre><code>@Query(\"MATCH (movie:Movie {title={0}})&lt;-[:ACTS_IN]-(actor) RETURN actor\")\nPage&lt;Actor&gt; getActorsThatActInMovieFromTitle(String movieTitle, Pageable page);\n</code></pre>\n\n<h3>You might be able to use SpEL in earlier versions:</h3>\n\n<p>As an alternative, you can look at <a href=\"https://spring.io/blog/2014/07/15/spel-support-in-spring-data-jpa-query-definitions\" rel=\"nofollow noreferrer\">using SpEL expressions</a> to do substitutions in other areas of the query. I am not familiar with it but it says:</p>\n\n<blockquote>\n  <p>Since this mechanism exposes special parameter types like <code>Sort</code> or <code>Pageable</code> as well, we\u2019re now able to use pagination in native queries.</p>\n</blockquote>\n\n<p>But the <a href=\"http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query.spel-expressions\" rel=\"nofollow noreferrer\">official docs</a> seem to say it is more limited.</p>\n\n<h3>And you should know this other information:</h3>\n\n<p>Here is someone reporting your exact same problem in a <a href=\"https://github.com/neo4j-examples/sdn4-university/issues/9#issuecomment-151978675\" rel=\"nofollow noreferrer\">GitHub issue</a>.  Which then leads to <a href=\"https://jira.spring.io/browse/DATAGRAPH-653\" rel=\"nofollow noreferrer\">DATAGRAPH-653</a> issue which was marked as fixed in version <code>4.2.0.M1</code>. This references other SO questions here which are outdated so you should ignore those like <a href=\"https://stackoverflow.com/questions/30624435/paging-and-sorting-in-spring-data-neo4j-4/30625554\">Paging and sorting in Spring Data Neo4j 4</a> which are no longer correct.</p>\n\n<h3>Finding Spring Data Neo4j Milestone Builds:</h3>\n\n<p>You can view the <a href=\"http://projects.spring.io/spring-data-neo4j/#quick-start\" rel=\"nofollow noreferrer\">dependencies information for any release</a> on the project page.  And for the <code>4.2.0.M1</code> build the information for Gradle (you can infer Maven) is:</p>\n\n<pre><code>dependencies {\n    compile 'org.springframework.data:spring-data-neo4j:4.2.0.M1'\n}\n\nrepositories {\n    maven {\n        url 'https://repo.spring.io/libs-milestone'\n    }\n}\n</code></pre>\n\n<p>Any newer final release should be used instead.</p>\n"}], "owner": {"reputation": 972, "user_id": 6313877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84210826cfb25aede7774f974aab97ba?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph M&#246;bius", "link": "https://stackoverflow.com/users/6313877/christoph-m%c3%b6bius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "accepted_answer_id": 39393690, "answer_count": 1, "score": 1, "last_activity_date": 1577378734, "creation_date": 1473342686, "last_edit_date": 1473343671, "question_id": 39392784, "link": "https://stackoverflow.com/questions/39392784/spring-data-neo4j-order-by-order-fails", "title": "Spring Data Neo4j - ORDER BY {order} fails", "body": "<p>I have a query where the result should be ordered depending on the passed parameter:</p>\n\n<pre><code>@Query(\"\"\"MATCH (u:User {userId:{uid}})-[:KNOWS]-(:User)-[h:HAS_STUFF]-&gt;(s:Stuff)\n    WITH s, count(h) as count ORDER BY count {order}\n    RETURN o, count SKIP {skip} LIMIT {limit}\"\"\")\n        fun findFromOthersByUserIdAndSortByAmountOfStuff(\n         @Param(\"uid\") userId: String,\n         @Param(\"skip\") skip: Int,\n         @Param(\"limit\") limit: Int,\n         @Param(\"order) order: String): List&lt;StuffWithCountResult&gt;\n</code></pre>\n\n<p>For the <code>order</code> parameter I use the following <code>enum</code> and its sole method:</p>\n\n<pre><code>enum class SortOrder {\n    ASC,\n    DESC;\n    fun toNeo4JSortOrder(): String {\n        when(this) {\n            ASC -&gt; return \"\"\n            DESC -&gt; return \"DESC\"\n        }\n    } \n }\n</code></pre>\n\n<p>It seems that SDN does not handle the <code>{order}</code> parameter properly? On execution, I get an exception telling that</p>\n\n<pre><code> Caused by: org.neo4j.kernel.impl.query.QueryExecutionKernelException: Invalid input 'R': expected whitespace, comment or a relationship pattern (line 3, column 5 (offset: 244))\n \"    RETURN o, count SKIP {skip} LIMIT {limit}\"\n      ^\n</code></pre>\n\n<p>If I remove the parameter from the Cypher statement or replace it with a hardcoded <code>DESC</code> the method succeeds. I believe it's not because of the <code>enum</code> since I use (other) enums in other repository methods and all these methods succeed. I already tried a different parameter naming like <code>sortOrder</code>, but this did not help.</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["syntax", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1867, "user_id": 3848334, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XyhMu.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/3848334/david"}, "edited": false, "score": 1, "creation_date": 1590568539, "post_id": 39389045, "comment_id": 109725147, "body": "Is Spread operator inline array? For example for array a = [1, 2, 3] funWithVararg(*a) inlines into funWithVararg(1,2,3)? I mean in bytecode level."}], "tags": [], "owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "is_accepted": true, "score": 199, "last_activity_date": 1607636157, "last_edit_date": 1607636157, "creation_date": 1473331960, "answer_id": 39389045, "question_id": 39389003, "link": "https://stackoverflow.com/questions/39389003/kotlin-asterisk-operator-before-variable-name-or-spread-operator-in-kotlin/39389045#39389045", "title": "Kotlin asterisk operator before variable name or Spread Operator in Kotlin", "body": "<p>The <code>*</code> operator is known as the <strong>Spread Operator</strong> in Kotlin.</p>\n<p>From the <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"noreferrer\">Kotlin Reference</a>...</p>\n<blockquote>\n<p>When we call a vararg-function, we can pass arguments one-by-one, e.g. asList(1, 2, 3), or, if we already have an array and want to pass its contents to the function, we use the spread operator (prefix the array with *):</p>\n</blockquote>\n<p>It can be applied to an Array before passing it into a function that accepts <code>varargs</code>.</p>\n<h3>For Example...</h3>\n<p>If you have a function that accepts a varied number of arguments...</p>\n<pre><code>fun sumOfNumbers(vararg numbers: Int): Int {\n    return numbers.sum()\n}\n</code></pre>\n<p>Use the spread operator to pass an array's elements as the arguments:</p>\n<pre><code>val numbers = intArrayOf(2, 3, 4)\nval sum = sumOfNumbers(*numbers)\nprintln(sum) // Prints '9'\n</code></pre>\n<hr />\n<p><strong>Notes:</strong></p>\n<ul>\n<li>The <code>*</code> operator is also the <strong>multiplication operator</strong> (of course).</li>\n<li>The operator can only be used when passing arguments to a function. The result of the operation <strong>cannot be stored</strong> since it yields no value (it is <em>purely</em> syntactic sugar).</li>\n<li>The operator may confuse some C/C++ programmers at first because it looks like a pointer is being de-referenced. It isn't; Kotlin has <strong>no notion of pointers</strong>.</li>\n<li>The operator can be used <strong>in-between other arguments</strong> when calling a vararg function. This is demonstrated in the example <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"noreferrer\">here</a>.</li>\n<li>The operator is similar to the <code>apply</code> function in various functional programming languages.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 11, "last_activity_date": 1473331991, "creation_date": 1473331991, "answer_id": 39389061, "question_id": 39389003, "link": "https://stackoverflow.com/questions/39389003/kotlin-asterisk-operator-before-variable-name-or-spread-operator-in-kotlin/39389061#39389061", "title": "Kotlin asterisk operator before variable name or Spread Operator in Kotlin", "body": "<p>As described in <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"noreferrer\">the documentation</a> this is a spread operator:</p>\n\n<blockquote>\n  <p>When we call a vararg-function, we can pass arguments one-by-one, e.g.\n  asList(1, 2, 3), or, if we already have an array and want to pass its\n  contents to the function, we use the spread operator (prefix the array\n  with *):</p>\n\n<pre><code>val a = arrayOf(1, 2, 3) \nval list = asList(-1, 0, *a, 4)\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1025, "user_id": 2117581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/12a3f80cf27cdbdd6bb38e5088ada257?s=128&d=identicon&r=PG", "display_name": "pleasedesktop", "link": "https://stackoverflow.com/users/2117581/pleasedesktop"}, "edited": false, "score": 0, "creation_date": 1504777939, "post_id": 39400428, "comment_id": 79148088, "body": "Thank you so much! This should be in the official docs under the spread operator section as something to watch out for when your spread operator is not working."}, {"owner": {"reputation": 2332, "user_id": 682216, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/752644e7386956fde1e497e0b27546f3?s=128&d=identicon&r=PG", "display_name": "Nicolas Jafelle", "link": "https://stackoverflow.com/users/682216/nicolas-jafelle"}, "edited": false, "score": 0, "creation_date": 1510683185, "post_id": 39400428, "comment_id": 81535682, "body": "Thanks! Really helpfull. Wondering what is &quot;Spread Operator&quot; behind the scenes? Is just a way to get a varargs value?"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 25, "last_activity_date": 1473369808, "creation_date": 1473369808, "answer_id": 39400428, "question_id": 39389003, "link": "https://stackoverflow.com/questions/39389003/kotlin-asterisk-operator-before-variable-name-or-spread-operator-in-kotlin/39400428#39400428", "title": "Kotlin asterisk operator before variable name or Spread Operator in Kotlin", "body": "<p>In addition to the answers that were directly towards \"what is this thing!?!\", you often have the case where you have a <code>List</code> and want to pass it to a function that is expecting a <code>vararg</code>.  For this, the conversion is:</p>\n\n<pre><code>someFunc(x, y, *myList.toTypedArray())\n</code></pre>\n\n<p>Assuming that last parameter of <code>someFunc</code> is <code>vararg</code> of the same type as the elements in the list.</p>\n"}, {"comments": [{"owner": {"reputation": 58529, "user_id": 60518, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c5060835472688a132ffeb67a05803c1?s=128&d=identicon&r=PG", "display_name": "Tim B&#252;the", "link": "https://stackoverflow.com/users/60518/tim-b%c3%bcthe"}, "edited": false, "score": 1, "creation_date": 1566646783, "post_id": 48138566, "comment_id": 101727476, "body": "Upvoted, because I asked myself why they implemented it like this. I&#39;m still not 100% sure about it. I mean, couldn&#39;t they just infer this in most cases?"}, {"owner": {"reputation": 2085, "user_id": 5636313, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/igjep.jpg?s=128&g=1", "display_name": "Farid", "link": "https://stackoverflow.com/users/5636313/farid"}, "reply_to_user": {"reputation": 58529, "user_id": 60518, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c5060835472688a132ffeb67a05803c1?s=128&d=identicon&r=PG", "display_name": "Tim B&#252;the", "link": "https://stackoverflow.com/users/60518/tim-b%c3%bcthe"}, "edited": false, "score": 1, "creation_date": 1570005771, "post_id": 48138566, "comment_id": 102774321, "body": "@TimB&#252;the In some cases, it wouldn&#39;t be possible to infer it, consider the following cases <code>val resultOne = arrayOf(intArrayOne, intArrayTwo)</code> and <code>val resultTwo = arrayOf(*intArrayOne, *intArrayTwo)</code>. Type of <code>resultOne</code> and <code>resultTwo</code> are respectively <code>Array&lt;Int&gt;</code> and <code>Array&lt;Array&lt;Int&gt;&gt;</code>. I beleive that&#39;s one of the reasons"}], "tags": [], "owner": {"reputation": 721, "user_id": 6893685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pc8f4.jpg?s=128&g=1", "display_name": "Gulzar Bhat", "link": "https://stackoverflow.com/users/6893685/gulzar-bhat"}, "is_accepted": false, "score": 6, "last_activity_date": 1515338470, "creation_date": 1515338470, "answer_id": 48138566, "question_id": 39389003, "link": "https://stackoverflow.com/questions/39389003/kotlin-asterisk-operator-before-variable-name-or-spread-operator-in-kotlin/48138566#48138566", "title": "Kotlin asterisk operator before variable name or Spread Operator in Kotlin", "body": "<p>In Java you can pass an array as is but an advantage of unpacking an array with spread operator <code>*</code> is that spread operator lets you combine the values from an array and some fixed values in a single call. Java doesn't support this.</p>\n"}, {"tags": [], "owner": {"reputation": 5511, "user_id": 7682257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3VeNQ.jpg?s=128&g=1", "display_name": "Suraj Vaishnav", "link": "https://stackoverflow.com/users/7682257/suraj-vaishnav"}, "is_accepted": false, "score": 7, "last_activity_date": 1564482125, "last_edit_date": 1564482125, "creation_date": 1560239726, "answer_id": 56538975, "question_id": 39389003, "link": "https://stackoverflow.com/questions/39389003/kotlin-asterisk-operator-before-variable-name-or-spread-operator-in-kotlin/56538975#56538975", "title": "Kotlin asterisk operator before variable name or Spread Operator in Kotlin", "body": "<p>If a function which accept a vararg(Variable number of arguments) parameter like: </p>\n\n<pre><code>fun sum(vararg data:Int)\n{\n   // function body here         \n}\n</code></pre>\n\n<p>Now to call this method, we can do:</p>\n\n<pre><code>sum(1,2,3,4,5)\n</code></pre>\n\n<p>But what if we have these value in an array, like:</p>\n\n<pre><code>val array= intArrayOf(1,2,3,4,5)\n</code></pre>\n\n<p>then, to call this method we have to use spread operator, like:</p>\n\n<pre><code> sum(*array)\n</code></pre>\n\n<p>Here, *(spread operator) will pass all content of that array.</p>\n\n<blockquote>\n  <p><strong>*array</strong> is equivalent to <strong>1,2,3,4,5</strong></p>\n</blockquote>\n\n<p>But wait a minute, what if we call it like this: <code>sum(array)</code>\nit will give us Type Mismatch compile time error:</p>\n\n<blockquote>\n<pre><code>Type mismatch.\nRequired:Int\nFound:IntArray\n</code></pre>\n</blockquote>\n\n<p>The problem is <code>sum</code> function accept a <code>vararg Int</code> parameter(which accept value like: 1,2,3,4,5) and if we pass array, it will be passed as <code>IntArray</code>.</p>\n"}], "owner": {"reputation": 2043, "user_id": 3291867, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1Vaxp.jpg?s=128&g=1", "display_name": "mojtab23", "link": "https://stackoverflow.com/users/3291867/mojtab23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28274, "favorite_count": 18, "accepted_answer_id": 39389045, "answer_count": 5, "score": 119, "last_activity_date": 1607636157, "creation_date": 1473331822, "last_edit_date": 1601990461, "question_id": 39389003, "link": "https://stackoverflow.com/questions/39389003/kotlin-asterisk-operator-before-variable-name-or-spread-operator-in-kotlin", "title": "Kotlin asterisk operator before variable name or Spread Operator in Kotlin", "body": "<p>I want to know what exactly an asterisk does before a variable name in Kotlin.\nI saw this (<code>*args</code>) in a <a href=\"https://spring.io/blog/2016/02/15/developing-spring-boot-applications-with-kotlin\" rel=\"noreferrer\">Spring boot Kotlin example</a>:</p>\n<pre><code>@SpringBootApplication\nopen class Application {\n\n    @Bean\n    open fun init(repository: CustomerRepository) = CommandLineRunner {\n        repository.save(Customer(&quot;Jack&quot;, &quot;Bauer&quot;))\n        repository.save(Customer(&quot;Chloe&quot;, &quot;O'Brian&quot;))\n        repository.save(Customer(&quot;Kim&quot;, &quot;Bauer&quot;))\n        repository.save(Customer(&quot;David&quot;, &quot;Palmer&quot;))\n        repository.save(Customer(&quot;Michelle&quot;, &quot;Dessler&quot;))\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    SpringApplication.run(Application::class.java, *args)\n}\n</code></pre>\n"}, {"tags": ["java", "spring", "spring-mvc", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 10222, "user_id": 3493036, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rBHhs.jpg?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/3493036/patrick"}, "edited": false, "score": 0, "creation_date": 1473323906, "post_id": 39386168, "comment_id": 66099292, "body": "I just read something about spring-cloud last time and there was a <code>refresh endpoint</code> which refreshes al the beans in the context. Maybe you find something helpful there. <a href=\"http://projects.spring.io/spring-cloud/spring-cloud.html\" rel=\"nofollow noreferrer\">Refresh Scope</a>"}, {"owner": {"reputation": 836, "user_id": 170637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mFEYvK3lfMY/AAAAAAAAAAI/AAAAAAAAH3w/WuYcTTUB2Oc/photo.jpg?sz=128", "display_name": "Olivier G&#233;rardin", "link": "https://stackoverflow.com/users/170637/olivier-g%c3%a9rardin"}, "edited": false, "score": 0, "creation_date": 1519222154, "post_id": 39386168, "comment_id": 84821709, "body": "Why is this tagged &quot;java&quot; ?"}, {"owner": {"reputation": 4018, "user_id": 371737, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d5c82f08befc629a767eb2b269e3f772?s=128&d=identicon&r=PG", "display_name": "Crembo", "link": "https://stackoverflow.com/users/371737/crembo"}, "edited": false, "score": 1, "creation_date": 1519225095, "post_id": 39386168, "comment_id": 84823951, "body": "Because I didn&#39;t care if somebody had a solution in Java or Kotlin. Kotlin has no significance in this question."}, {"owner": {"reputation": 836, "user_id": 170637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mFEYvK3lfMY/AAAAAAAAAAI/AAAAAAAAH3w/WuYcTTUB2Oc/photo.jpg?sz=128", "display_name": "Olivier G&#233;rardin", "link": "https://stackoverflow.com/users/170637/olivier-g%c3%a9rardin"}, "edited": false, "score": 0, "creation_date": 1519226347, "post_id": 39386168, "comment_id": 84824817, "body": "Then java is not significant either... If you tag Java it would be nice to provide a Java version of the solution at least. (I can do the translation, but probably not all people who program in Java and land here will be able to)"}], "answers": [{"comments": [{"owner": {"reputation": 4018, "user_id": 371737, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d5c82f08befc629a767eb2b269e3f772?s=128&d=identicon&r=PG", "display_name": "Crembo", "link": "https://stackoverflow.com/users/371737/crembo"}, "edited": false, "score": 1, "creation_date": 1473339508, "post_id": 39389169, "comment_id": 66109247, "body": "Even though your answer wasn&#39;t exactly what I needed, I used your answer to find a solution that works for me. See my self-posted answer. Thanks."}], "tags": [], "owner": {"reputation": 14127, "user_id": 641627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XEgWh.jpg?s=128&g=1", "display_name": "alexbt", "link": "https://stackoverflow.com/users/641627/alexbt"}, "is_accepted": false, "score": 3, "last_activity_date": 1473333049, "last_edit_date": 1495541876, "creation_date": 1473332327, "answer_id": 39389169, "question_id": 39386168, "link": "https://stackoverflow.com/questions/39386168/programmatically-restart-spring-boot-application-refresh-spring-context/39389169#39389169", "title": "Programmatically restart Spring Boot application / Refresh Spring Context", "body": "<p>You can use the <code>RestartEndPoint</code> (in <code>spring-cloud-context</code> dependency) to restart the Spring Boot application programmatically:</p>\n\n<pre><code>@Autowired\nprivate RestartEndpoint restartEndpoint;\n\n...\n\nThread restartThread = new Thread(() -&gt; restartEndpoint.restart());\nrestartThread.setDaemon(false);\nrestartThread.start();\n</code></pre>\n\n<p>It works, even though it will throw an exception to inform you that this may lead to memory leaks:</p>\n\n<blockquote>\n  <p>The web application [xyx] appears to have started a thread named\n  [Thread-6] but has failed to stop it. This is very likely to create a\n  memory leak. Stack trace of thread:</p>\n</blockquote>\n\n<p><strong>The same answer was provided for this other question (worded differently)</strong>: <a href=\"https://stackoverflow.com/questions/38850762/call-spring-actuator-restart-endpoint-from-spring-boot-using-a-java-function/38851994#38851994\">Call Spring actuator /restart endpoint from Spring boot using a java function</a></p>\n"}, {"comments": [{"owner": {"reputation": 836, "user_id": 170637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mFEYvK3lfMY/AAAAAAAAAAI/AAAAAAAAH3w/WuYcTTUB2Oc/photo.jpg?sz=128", "display_name": "Olivier G&#233;rardin", "link": "https://stackoverflow.com/users/170637/olivier-g%c3%a9rardin"}, "edited": false, "score": 1, "creation_date": 1524153168, "post_id": 39391579, "comment_id": 86866491, "body": "As commented above, apparently this works only once, have you observed the same behaviour?"}], "tags": [], "owner": {"reputation": 4018, "user_id": 371737, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d5c82f08befc629a767eb2b269e3f772?s=128&d=identicon&r=PG", "display_name": "Crembo", "link": "https://stackoverflow.com/users/371737/crembo"}, "is_accepted": true, "score": 10, "last_activity_date": 1473339406, "creation_date": 1473339406, "answer_id": 39391579, "question_id": 39386168, "link": "https://stackoverflow.com/questions/39386168/programmatically-restart-spring-boot-application-refresh-spring-context/39391579#39391579", "title": "Programmatically restart Spring Boot application / Refresh Spring Context", "body": "<p>Even though Alex's solution <em>works</em>, I don't believe in including 2 additional dependencies (<code>Actuator</code> and <code>Cloud Context</code>) just to be able to do one operation. Instead, I have combined his answer and modified my code in order to do what I wanted.</p>\n\n<p>So, first of all, it is <strong>crucial</strong> that the code is executed using <code>new Thread()</code> and <code>setDaemon(false);</code>. I have the following endpoint method that handles the restart:</p>\n\n<pre><code>val restartThread = Thread {\n    logger.info(\"Restarting...\")\n    Thread.sleep(1000)\n    SpringMain.restartToMode(AppMode.valueOf(change.newMode.toUpperCase()))\n    logger.info(\"Restarting... Done.\")\n}\nrestartThread.isDaemon = false\nrestartThread.start()\n</code></pre>\n\n<p>The <code>Thread.sleep(1000)</code> is not required, but I want my controller to output the view before actually restarting the application.</p>\n\n<p><code>SpringMain.restartToMode</code> has the following:</p>\n\n<pre><code>@Synchronized fun restartToMode(mode: AppMode) {\n    requireNotNull(context)\n    requireNotNull(application)\n\n    // internal logic to potentially produce a new arguments array\n\n    // close previous context\n    context.close()\n\n    // and build new one using the new mode\n    val builder = SpringApplicationBuilder(SpringMain::class.java)\n    application = builder.application()\n    context = builder.build().run(*argsArray)\n}\n</code></pre>\n\n<p>Where <code>context</code> and <code>application</code> come from the <code>main</code> method upon starting the application:</p>\n\n<pre><code>val args = ArrayList&lt;String&gt;()\nlateinit var context: ConfigurableApplicationContext\nlateinit var application: SpringApplication\n\n@Throws(Exception::class)\n@JvmStatic fun main(args: Array&lt;String&gt;) {\n    this.args += args\n\n    val builder = SpringApplicationBuilder(SpringMain::class.java)\n    application = builder.application()\n    context = builder.build().run(*args)\n}\n</code></pre>\n\n<p>I am not entirely sure if this produces any problems. If there will be, I will update this answer. Hopefully this will be of any help to others.</p>\n"}, {"comments": [{"owner": {"reputation": 836, "user_id": 170637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mFEYvK3lfMY/AAAAAAAAAAI/AAAAAAAAH3w/WuYcTTUB2Oc/photo.jpg?sz=128", "display_name": "Olivier G&#233;rardin", "link": "https://stackoverflow.com/users/170637/olivier-g%c3%a9rardin"}, "edited": false, "score": 1, "creation_date": 1524153062, "post_id": 48910154, "comment_id": 86866419, "body": "OK apparently this approach works only works once... The second time i get a NPE on the context.close(). How can it be null since it is a static member of Main ?? I&#39;m puzzled here."}, {"owner": {"reputation": 1122, "user_id": 1925327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c6527cb9ecdbba51bff2792d93ce4b2?s=128&d=identicon&r=PG", "display_name": "moritz.vieli", "link": "https://stackoverflow.com/users/1925327/moritz-vieli"}, "edited": false, "score": 0, "creation_date": 1545076637, "post_id": 48910154, "comment_id": 94492964, "body": "It works perfectly for me, also multiple times. Is the sleep really necessary?"}, {"owner": {"reputation": 836, "user_id": 170637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mFEYvK3lfMY/AAAAAAAAAAI/AAAAAAAAH3w/WuYcTTUB2Oc/photo.jpg?sz=128", "display_name": "Olivier G&#233;rardin", "link": "https://stackoverflow.com/users/170637/olivier-g%c3%a9rardin"}, "reply_to_user": {"reputation": 1122, "user_id": 1925327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c6527cb9ecdbba51bff2792d93ce4b2?s=128&d=identicon&r=PG", "display_name": "moritz.vieli", "link": "https://stackoverflow.com/users/1925327/moritz-vieli"}, "edited": false, "score": 1, "creation_date": 1545137837, "post_id": 48910154, "comment_id": 94515142, "body": "Quoted from the accepted answer: &quot;The Thread.sleep(1000) is not required, but I want my controller to output the view before actually restarting the application.&quot;"}], "tags": [], "owner": {"reputation": 836, "user_id": 170637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mFEYvK3lfMY/AAAAAAAAAAI/AAAAAAAAH3w/WuYcTTUB2Oc/photo.jpg?sz=128", "display_name": "Olivier G&#233;rardin", "link": "https://stackoverflow.com/users/170637/olivier-g%c3%a9rardin"}, "is_accepted": false, "score": 7, "last_activity_date": 1519252287, "last_edit_date": 1519252287, "creation_date": 1519228421, "answer_id": 48910154, "question_id": 39386168, "link": "https://stackoverflow.com/questions/39386168/programmatically-restart-spring-boot-application-refresh-spring-context/48910154#48910154", "title": "Programmatically restart Spring Boot application / Refresh Spring Context", "body": "<p>In case it might help someone, here's a pura Java translation of Crembo's accepted answer.</p>\n\n<p>Controller method:</p>\n\n<pre><code>@GetMapping(\"/restart\")\nvoid restart() {\n    Thread restartThread = new Thread(() -&gt; {\n        try {\n            Thread.sleep(1000);\n            Main.restart();\n        } catch (InterruptedException ignored) {\n        }\n    });\n    restartThread.setDaemon(false);\n    restartThread.start();\n}\n</code></pre>\n\n<p>Main class (significant bits only):</p>\n\n<pre><code>private static String[] args;\nprivate static ConfigurableApplicationContext context;\n\npublic static void main(String[] args) {\n    Main.args = args;\n    Main.context = SpringApplication.run(Main.class, args);\n}\n\npublic static void restart() {\n    // close previous context\n    context.close();\n\n    // and build new one\n    Main.context = SpringApplication.run(Main.class, args);\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 6924377, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PvT4PH__fi0/AAAAAAAAAAI/AAAAAAAAAPg/Qxdqb5m69cw/photo.jpg?sz=128", "display_name": "Lucifer Nick", "link": "https://stackoverflow.com/users/6924377/lucifer-nick"}, "is_accepted": false, "score": 2, "last_activity_date": 1547211538, "creation_date": 1547211538, "answer_id": 54147057, "question_id": 39386168, "link": "https://stackoverflow.com/questions/39386168/programmatically-restart-spring-boot-application-refresh-spring-context/54147057#54147057", "title": "Programmatically restart Spring Boot application / Refresh Spring Context", "body": "<p>I've solved this issue by using Restarter from Spring Devtools.\nAdd this to pom.xml:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then use org.springframework.boot.devtools.restart.Restarter\nto call this:</p>\n\n<pre><code>Restarter.getInstance().restart();\n</code></pre>\n\n<p>It works for me. Hope this help.</p>\n"}, {"comments": [{"owner": {"reputation": 484, "user_id": 5001278, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh3.googleusercontent.com/-8v-05A1sc6s/AAAAAAAAAAI/AAAAAAAAASI/_7tiS0FrZEY/photo.jpg?sz=128", "display_name": "heug", "link": "https://stackoverflow.com/users/5001278/heug"}, "edited": false, "score": 0, "creation_date": 1565798993, "post_id": 55967945, "comment_id": 101466435, "body": "why are you closing the context from within the new thread? also, doesnt SpringApplication.run(...) start a thread itself? why explicitly instantiate a new thread for it?"}], "tags": [], "owner": {"reputation": 847, "user_id": 1512670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kYgqt.png?s=128&g=1", "display_name": "Chetan Laddha", "link": "https://stackoverflow.com/users/1512670/chetan-laddha"}, "is_accepted": false, "score": 0, "last_activity_date": 1556879291, "creation_date": 1556879291, "answer_id": 55967945, "question_id": 39386168, "link": "https://stackoverflow.com/questions/39386168/programmatically-restart-spring-boot-application-refresh-spring-context/55967945#55967945", "title": "Programmatically restart Spring Boot application / Refresh Spring Context", "body": "<p>Below restart method will work.</p>\n\n<p>`@SpringBootApplication\npublic class Application {</p>\n\n<pre><code>private static ConfigurableApplicationContext context;\n\npublic static void main(String[] args) {\n    context = SpringApplication.run(Application.class, args);\n}\n\npublic static void restart() {\n    ApplicationArguments args = context.getBean(ApplicationArguments.class);\n\n    Thread thread = new Thread(() -&gt; {\n        context.close();\n        context = SpringApplication.run(Application.class, args.getSourceArgs());\n    });\n\n    thread.setDaemon(false);\n    thread.start();\n}\n</code></pre>\n\n<p>}`</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12959169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81912c85148dfd84e674f86be667292d?s=128&d=identicon&r=PG&f=1", "display_name": "johnwoo", "link": "https://stackoverflow.com/users/12959169/johnwoo"}, "is_accepted": false, "score": 3, "last_activity_date": 1585680181, "creation_date": 1585680181, "answer_id": 60957691, "question_id": 39386168, "link": "https://stackoverflow.com/questions/39386168/programmatically-restart-spring-boot-application-refresh-spring-context/60957691#60957691", "title": "Programmatically restart Spring Boot application / Refresh Spring Context", "body": "<p>As was commented already, the restart-via-thread implementations given before only work once, and second time around throw a NPE because context is null.</p>\n\n<p>This NPE can be avoided by having the restart thread use the same class loader as the initial main-invoking thread:</p>\n\n<pre><code>private static volatile ConfigurableApplicationContext context;\nprivate static ClassLoader mainThreadClassLoader;\n\npublic static void main(String[] args) {\n    mainThreadClassLoader = Thread.currentThread().getContextClassLoader();\n    context = SpringApplication.run(Application.class, args);\n}\n\npublic static void restart() {\n    ApplicationArguments args = context.getBean(ApplicationArguments.class);\n\n    Thread thread = new Thread(() -&gt; {\n        context.close();\n        context = SpringApplication.run(Application.class, args.getSourceArgs());\n    });\n\n    thread.setContextClassLoader(mainThreadClassLoader);\n    thread.setDaemon(false);\n    thread.start();\n}\n</code></pre>\n"}], "owner": {"reputation": 4018, "user_id": 371737, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d5c82f08befc629a767eb2b269e3f772?s=128&d=identicon&r=PG", "display_name": "Crembo", "link": "https://stackoverflow.com/users/371737/crembo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20763, "favorite_count": 3, "accepted_answer_id": 39391579, "answer_count": 6, "score": 9, "last_activity_date": 1585680181, "creation_date": 1473323511, "last_edit_date": 1573701224, "question_id": 39386168, "link": "https://stackoverflow.com/questions/39386168/programmatically-restart-spring-boot-application-refresh-spring-context", "title": "Programmatically restart Spring Boot application / Refresh Spring Context", "body": "<p>I am trying to programmatically restart my Spring Application without having the user to intervene.</p>\n\n<p>Basically, I have a page which allows to switch the mode of the application (actually meaning switching the currently active profile) and as far as I understand I must restart the context.</p>\n\n<p>Currently my code is very simple, it's just for the restarting bit (this is Kotlin by the way):</p>\n\n<pre><code>    context.close()\n    application.setEnvironment(context.environment)\n    ClassUtils.overrideThreadContextClassLoader(application.javaClass.classLoader)\n    context = application.run(*argsArray)\n</code></pre>\n\n<p>However the moment I do <code>context.close()</code> the JVM exists immediately. I have also tried <code>context.refresh()</code> but that seems to simply kill Tomcat/Jetty (tried both just in case it was a Tomcat problem) and then nothing happens.</p>\n\n<p>I have also seen <a href=\"https://stackoverflow.com/questions/29117308/programmatically-restart-spring-boot-application\">Programmatically restart Spring Boot application</a> but nothing seems to work for me from those answers. Furthermore, I looked into Spring Actuator which supposedly has the <code>/restart</code> endpoint, but that doesn't seem to be there anymore?</p>\n"}]