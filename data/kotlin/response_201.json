[{"tags": ["java", "inheritance", "kotlin", "nested"], "comments": [{"owner": {"reputation": 27978, "user_id": 981744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJi4S.png?s=128&g=1", "display_name": "Erwin Bolwidt", "link": "https://stackoverflow.com/users/981744/erwin-bolwidt"}, "edited": false, "score": 1, "creation_date": 1542238467, "post_id": 53310263, "comment_id": 93501479, "body": "For one thing, this doesn&#39;t work, because you have an inner class in Java but a static member class in Kotlin. For a class to be <i>inner</i> in Kotlin, you need to mark it with the <code>inner</code> keyword: <code>inner class DerivedInner ...</code>"}, {"owner": {"reputation": 387, "user_id": 9205446, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k0eBEZh5FSE/AAAAAAAAAAI/AAAAAAAAAB4/PnaLocfTGfM/photo.jpg?sz=128", "display_name": "Emil Kabirov", "link": "https://stackoverflow.com/users/9205446/emil-kabirov"}, "reply_to_user": {"reputation": 27978, "user_id": 981744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJi4S.png?s=128&g=1", "display_name": "Erwin Bolwidt", "link": "https://stackoverflow.com/users/981744/erwin-bolwidt"}, "edited": false, "score": 0, "creation_date": 1542238926, "post_id": 53310263, "comment_id": 93501612, "body": "@ErwinBolwidt thanks"}, {"owner": {"reputation": 27978, "user_id": 981744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJi4S.png?s=128&g=1", "display_name": "Erwin Bolwidt", "link": "https://stackoverflow.com/users/981744/erwin-bolwidt"}, "edited": false, "score": 0, "creation_date": 1542240903, "post_id": 53310263, "comment_id": 93502135, "body": "You&#39;re welcome. I didn&#39;t think it would solve it (because the error says it can&#39;t resolve the reference which doesn&#39;t sound like the problem I mentioned) and I didn&#39;t have time to try it. Hence only a comment"}], "answers": [{"tags": [], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "is_accepted": true, "score": 2, "last_activity_date": 1542238912, "creation_date": 1542238912, "answer_id": 53310412, "question_id": 53310263, "link": "https://stackoverflow.com/questions/53310263/kotlin-inherit-from-a-nested-java-class/53310412#53310412", "title": "Kotlin: inherit from a nested Java class", "body": "<p>The equivalent of Java's non-static nested class in Kotlin is inner class.</p>\n\n<p>To make your code work, you need to use <code>inner</code> keyword:</p>\n\n<pre><code>class DerivedOuter() : BaseOuter() {\n    inner class DerivedInner : BaseOuter.BaseInner() {\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 9205446, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k0eBEZh5FSE/AAAAAAAAAAI/AAAAAAAAAB4/PnaLocfTGfM/photo.jpg?sz=128", "display_name": "Emil Kabirov", "link": "https://stackoverflow.com/users/9205446/emil-kabirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 53310412, "answer_count": 1, "score": 1, "last_activity_date": 1542238912, "creation_date": 1542237805, "last_edit_date": 1542238132, "question_id": 53310263, "link": "https://stackoverflow.com/questions/53310263/kotlin-inherit-from-a-nested-java-class", "title": "Kotlin: inherit from a nested Java class", "body": "<p>I have these Java classes in a <em>.java</em> file:</p>\n\n<pre><code>public class BaseOuter\n{\n    public class BaseInner\n    {\n    }\n}\n</code></pre>\n\n<p>And I have these Kotlin classes in a <em>.kt</em> file:</p>\n\n<pre><code>class DerivedOuter : BaseOuter()\n{\n    class DerivedInner : BaseOuter.BaseInner()\n    {\n    }\n}\n</code></pre>\n\n<p>This Kotlin code in Android Studio gives me an \"Unresolved reference: BaseInner\" error. So I can inherit from the BaseOuter class, but deriving from Java's BaseOuter.BaseInner is not syntactically correct (but if I try the same with inheritance from Kotlin classes I get no errors).</p>\n\n<p>Somehow I can't google a same example or the question.</p>\n"}, {"tags": ["android", "gradle", "kotlin", "android-proguard", "dex"], "comments": [{"owner": {"reputation": 1202, "user_id": 9060113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6l9hb.png?s=128&g=1", "display_name": "p.alexey", "link": "https://stackoverflow.com/users/9060113/p-alexey"}, "edited": false, "score": 0, "creation_date": 1542232218, "post_id": 53309163, "comment_id": 93499269, "body": "You can use proguard for obfuscate your code. Just turn on it int <code>build.gradle</code> file: <code>android {buildTypes {release { minifyEnabled true ...} } }</code>."}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1542235252, "post_id": 53309163, "comment_id": 93500459, "body": "Please explain in detail what &quot;I can see all my Kotlin files&quot; means. For example, you might want to show the output of the APK Analyzer or <code>unzip</code> or something that demonstrates what you are seeing."}, {"owner": {"reputation": 1984, "user_id": 2134955, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZnaXq.jpg?s=128&g=1", "display_name": "Leguman", "link": "https://stackoverflow.com/users/2134955/leguman"}, "reply_to_user": {"reputation": 1202, "user_id": 9060113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6l9hb.png?s=128&g=1", "display_name": "p.alexey", "link": "https://stackoverflow.com/users/9060113/p-alexey"}, "edited": false, "score": 0, "creation_date": 1542291238, "post_id": 53309163, "comment_id": 93522795, "body": "@p.alexey Proguard seems to be turned on correctly, and I can see some warnings concerning Proguard while building the apk"}, {"owner": {"reputation": 1984, "user_id": 2134955, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZnaXq.jpg?s=128&g=1", "display_name": "Leguman", "link": "https://stackoverflow.com/users/2134955/leguman"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1542291791, "post_id": 53309163, "comment_id": 93523135, "body": "@CommonsWare I edited my question and added a screenshot of the unzipped apk output"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1542320269, "post_id": 53309163, "comment_id": 93537799, "body": "There&#39;s something fairly strange going on here. That&#39;s not normal. Did you make significant changes to your <code>build.gradle</code> file for this module?"}, {"owner": {"reputation": 1984, "user_id": 2134955, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZnaXq.jpg?s=128&g=1", "display_name": "Leguman", "link": "https://stackoverflow.com/users/2134955/leguman"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1542392032, "post_id": 53309163, "comment_id": 93565408, "body": "@CommonsWare Yes, it&#39;s an old project and the build.gradle has a lot of changes. But I can&#39;t get my hand on which one would produce that. I&#39;ll add it to my question"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1542392924, "post_id": 53309163, "comment_id": 93565802, "body": "Is this the debug or release APK?"}, {"owner": {"reputation": 1984, "user_id": 2134955, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZnaXq.jpg?s=128&g=1", "display_name": "Leguman", "link": "https://stackoverflow.com/users/2134955/leguman"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1542395117, "post_id": 53309163, "comment_id": 93566763, "body": "@m0skit0 the release apk"}], "answers": [{"tags": [], "owner": {"reputation": 1984, "user_id": 2134955, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZnaXq.jpg?s=128&g=1", "display_name": "Leguman", "link": "https://stackoverflow.com/users/2134955/leguman"}, "is_accepted": true, "score": 6, "last_activity_date": 1548888116, "creation_date": 1548888116, "answer_id": 54450665, "question_id": 53309163, "link": "https://stackoverflow.com/questions/53309163/android-kotlin-files-are-present-in-apk-after-compilation/54450665#54450665", "title": "Android - Kotlin files are present in apk after compilation", "body": "<p>Finally found the issue:</p>\n\n<p>I had to removed <code>resources.srcDirs = ['src']</code> from the sources set</p>\n\n<p>This was copying all non-java files contains under the src folder</p>\n"}], "owner": {"reputation": 1984, "user_id": 2134955, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZnaXq.jpg?s=128&g=1", "display_name": "Leguman", "link": "https://stackoverflow.com/users/2134955/leguman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 3, "accepted_answer_id": 54450665, "answer_count": 1, "score": 5, "last_activity_date": 1550068982, "creation_date": 1542231810, "last_edit_date": 1550068982, "question_id": 53309163, "link": "https://stackoverflow.com/questions/53309163/android-kotlin-files-are-present-in-apk-after-compilation", "title": "Android - Kotlin files are present in apk after compilation", "body": "<p>I have an android project with both java and kotlin files.</p>\n\n<p>After compilation, when I unzip the generated apk file, I can see all the Kotlin files of my project in their package path.\nThe Java files however are not present.</p>\n\n<p>How can I fix this, and stop the Koltin files from beeing added to the apk ?</p>\n\n<p>Thanks</p>\n\n<p><a href=\"https://i.stack.imgur.com/4unnG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4unnG.png\" alt=\"Screenshot of unzipped apk content\"></a></p>\n\n<p>My build.gradle:</p>\n\n<pre>\nbuildscript {\n    ext.kotlin_version = '1.2.71'\n    repositories {\n        jcenter()\n        maven { url 'https://maven.fabric.io/public' }\n        google()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.1.3'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\napply plugin: 'com.google.gms.google-services'\n\nrepositories {\n    maven { url \"https://jitpack.io\" }\n    mavenCentral()\n    jcenter()\n    flatDir{\n        dirs 'libs'\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: '*.jar')\n    /* A bunch of dependencies */\n}\n\nandroid {\n\n    compileSdkVersion 27\n    buildToolsVersion '27.0.3'\n\n    defaultConfig {\n\n        minSdkVersion 19\n        targetSdkVersion 27\n\n        multiDexEnabled true\n\n        setOutputPath applicationVariants, goevent[\"outputDir\"], goevent[\"outputName\"]\n        setOutputPath testVariants, goevent[\"outputDir\"], goevent[\"outputNameTest\"]\n    }\n\n    dataBinding {\n        enabled = true\n    }\n\n    packagingOptions {\n        exclude 'META-INF/DEPENDENCIES'\n        exclude 'META-INF/LICENSE'\n        exclude 'META-INF/NOTICE'\n        exclude 'main/AndroidManifest.xml'\n        pickFirst 'META-INF/maven/com.squareup.okio/okio/pom.properties'\n        pickFirst 'META-INF/maven/com.squareup.okio/okio/pom.xml'\n    }\n\n    sourceSets {\n        main {\n            manifest.srcFile 'AndroidManifest.xml'\n            java.srcDirs = ['src']\n            resources.srcDirs = ['src']\n            aidl.srcDirs = ['src']\n            renderscript.srcDirs = ['src']\n            res.srcDirs = ['res']\n            assets.srcDirs = ['assets']\n            jniLibs.srcDirs = ['libs']\n        }\n\n        androidTest.setRoot('tests')\n        debug.setRoot('build-types/debug')\n        release.setRoot('build-types/release')\n    }\n\n    signingConfigs {\n        release {\n\n            //Fetch the signing file\n            File signFile = rootProject.file('signing.properties')\n\n            //Read the signing properties file\n            Properties properties = new Properties()\n            properties.load(new FileInputStream(signFile))\n\n\n            if (properties['signingKeystorePath'] && properties['signingKeystorePassword'] && properties['signingKeyAlias'] && properties['signingKeyPassword']) {\n                String toolsPath = System.getenv(\"TOOLS\")\n                if(toolsPath != null) {\n                    storeFile file(toolsPath + properties['signingKeystorePath'])\n                    storePassword properties['signingKeystorePassword']\n                    keyAlias properties['signingKeyAlias']\n                    keyPassword properties['signingKeyPassword']\n                }\n\n            } else {\n\n                //If the signing file doesn't exist or the properties are not set\n                if (project.hasProperty(\"signingKeystorePath\")) {\n                    storeFile file(\"$signingKeystorePath\")\n                    storePassword signingKeystorePassword\n                    keyAlias signingKeyAlias\n                    keyPassword signingKeyPassword\n                }\n\n            }\n        }\n    }\n    lintOptions {\n        abortOnError false\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard.pro'\n                    signingConfig signingConfigs.release\n            zipAlignEnabled true\n        }\n    }\n\n    dexOptions {\n        jumboMode = true\n    }\n}\n\ndef setOutputPath(variants, dir, name) {\n    variants.all { variant ->\n        variant.outputs.all { output ->\n            def relativeRootDir = output.packageApplication.outputDirectory.toPath()\n                    .relativize(rootDir.toPath()).toFile()\n\n            output.outputFileName = new File(\"$relativeRootDir/$dir\", name)\n        }\n    }\n}\n</pre>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 1393, "user_id": 8456062, "user_type": "registered", "profile_image": "https://graph.facebook.com/1423344851113585/picture?type=large", "display_name": "Christophe Chenel", "link": "https://stackoverflow.com/users/8456062/christophe-chenel"}, "edited": false, "score": 0, "creation_date": 1542229391, "post_id": 53308635, "comment_id": 93498095, "body": "could you show the code where you read ?"}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "reply_to_user": {"reputation": 1393, "user_id": 8456062, "user_type": "registered", "profile_image": "https://graph.facebook.com/1423344851113585/picture?type=large", "display_name": "Christophe Chenel", "link": "https://stackoverflow.com/users/8456062/christophe-chenel"}, "edited": false, "score": 0, "creation_date": 1542235770, "post_id": 53308635, "comment_id": 93500615, "body": "@ChristopheGudlake done"}], "answers": [{"comments": [{"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542294173, "post_id": 53315007, "comment_id": 93524707, "body": "I&#39;ve updated the versionCode and versionName of the gradle file but the results are the same,  <code>likes</code> field is still missing."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542297536, "post_id": 53315007, "comment_id": 93527033, "body": "You should <b>not</b> update only the versionCode and versionName of the gradle file because it wll not solve your problem, you should update the entire app. All devices should have the latest version of your app, which includes your modified <code>Game</code> class in which this new property exists. Have you tried this out?"}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542305524, "post_id": 53315007, "comment_id": 93531583, "body": "I&#39;m running the updated code in two devices. One is a new install and everything works fine, but the second have same code as the first one but the field <code>likes</code> is still missing."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542305693, "post_id": 53315007, "comment_id": 93531661, "body": "Yes, that the correct behaviour. Without updating the app to the latest version <b>also</b> on the second device, the problem will persist. So to solve this, as I already mentoned, update the app to the lastest version on the second device and your problem will be solved. That&#39;s it!"}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542315978, "post_id": 53315007, "comment_id": 93536130, "body": "when i say the first device have the same code as the second one i think its obvious that I mean the second device is updated to the last code version."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542316130, "post_id": 53315007, "comment_id": 93536174, "body": "If you have the same latest version on both devices, are you sure that each one of them is quering the database and get documents that have that new <code>likes</code> property?"}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542316810, "post_id": 53315007, "comment_id": 93536429, "body": "yes I&#39;m sure. I know it&#39;s weird. Thanks for the support anyway."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542316997, "post_id": 53315007, "comment_id": 93536507, "body": "I was asking you the last question because I see in your screenshot that <b>not</b> all your objects have that <code>likes</code> property. In particular, the second object (<code>1 ... 5</code>), does <b>not</b>, right?"}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542319098, "post_id": 53315007, "comment_id": 93537367, "body": "@AlexMalmo yes you are right. But that shouldn&#39;t produce this behavior."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542319747, "post_id": 53315007, "comment_id": 93537610, "body": "Yes it should since that data does not exist. This is the right behavior, right?"}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1542324099, "post_id": 53315007, "comment_id": 93538926, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/183751/discussion-between-ricardo-and-alex-mamo\">continue this discussion in chat</a>."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542357312, "post_id": 53315007, "comment_id": 93547433, "body": "As I aslo see in your screenshot, you&#39;re right, that likes property is missing. The reason why you cannot get its value is NOT because of your updated app is because it actually it does not exist. The reason why that property does not exist is because you didn&#39;t add it. Is not enough to add that property ONLY it in your POJO class, you actually need to populat the property in database in order to see it, right? Add that value in the database and tell me if it works, ok?"}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542369855, "post_id": 53315007, "comment_id": 93553783, "body": "So you mean is i have to set likes value in all items of blog?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542369927, "post_id": 53315007, "comment_id": 93553822, "body": "Yes, that&#39;s correct. In order to be able to read some data, that data should exist in the first place. So please update that data and tell me if it works."}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542380110, "post_id": 53315007, "comment_id": 93559375, "body": "That&#39;s not accurate since i have one device which is receiving that field."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542380309, "post_id": 53315007, "comment_id": 93559478, "body": "If one device is able to read data, it means that particular data <b>exists</b>. If that data does <b>not</b> exist it cannot be read. You cannot read something that it does <b>not</b> exist. So for sure, you are reading data from an object in which that <code>likes</code> property exists, right? If you&#39;ll update that property allover your database, there will be no problems anymore. Have you tried this?"}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542388807, "post_id": 53315007, "comment_id": 93564048, "body": "You are reading data from an object in which that likes property exists, right? Yes."}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542388999, "post_id": 53315007, "comment_id": 93564148, "body": "If you&#39;ll update that property allover your database, there will be no problems anymore. Have you tried this? No. Because i think is a workarround. I can&#39;t find oficial doc that say a new field should be allover collection is required."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542390572, "post_id": 53315007, "comment_id": 93564804, "body": "You think it&#39;s a workaround but it&#39;s not. This how things work. In order to be able to read some data, that particular data must exist. If you just define a new property in your POJO class doesn&#39;t mean that you have some data in database. You should add it in order to get it back. Is the same as you say, I want to get a value from a variable which doesn&#39;t exist and this not possible, right?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542390663, "post_id": 53315007, "comment_id": 93564845, "body": "A field should exist and should hold some data in order to be able to get it back, otherwise you&#39;ll get that error. Which makes sense."}, {"owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542467206, "post_id": 53315007, "comment_id": 93582518, "body": "I finally decide to try uninstall and install again the app in the device which I&#39;m having problems without modify firebase database and now is working fine. But I think this is not a proper behavior."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "edited": false, "score": 0, "creation_date": 1542535415, "post_id": 53315007, "comment_id": 93596208, "body": "Good to hear that it finally worked! If you think that my answer/comments helped you, please consider accepting it. If you think that my answer will also help future visitors, please also consider give a vote-up. I&#39;d appreciate it. Thanks!"}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": false, "score": 1, "last_activity_date": 1542269764, "creation_date": 1542269764, "answer_id": 53315007, "question_id": 53308635, "link": "https://stackoverflow.com/questions/53308635/firebase-database-realtime-are-ignoring-some-values/53315007#53315007", "title": "Firebase database realtime are ignoring some values", "body": "<blockquote>\n  <p>I read the snapshot all fields were read except the new field likes</p>\n</blockquote>\n\n<p>This is <strong>only</strong> happening when you are using the app on devices that have older versions of your app.</p>\n\n<blockquote>\n  <p>Why this behavior?</p>\n</blockquote>\n\n<p>This is happening because the earlier versions of your app do not inculde the updated version of your <code>Game</code> class which contains that new added <code>likes</code> field. With other words, the older version can only read and write properties that are aware of.</p>\n\n<p>To solve this, you should update the older version to the new veriosn so it can see the new added property.</p>\n"}], "owner": {"reputation": 6287, "user_id": 2139691, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ce43c3942da5a6d63a81ef76f0c109ba?s=128&d=identicon&r=PG", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2139691/ricardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542269764, "creation_date": 1542229260, "last_edit_date": 1542262449, "question_id": 53308635, "link": "https://stackoverflow.com/questions/53308635/firebase-database-realtime-are-ignoring-some-values", "title": "Firebase database realtime are ignoring some values", "body": "<p>I have an android app and firebase realtime database.\nI have a class called <code>Game</code> which have properties described below.\nRecently i've decided added a new property called <code>likes</code> but when I read the snapshot all fields were read except the new field <code>likes</code> </p>\n\n<p>Why this behavior?</p>\n\n<p><a href=\"https://i.stack.imgur.com/sVyzA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sVyzA.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>data class Game (\n    val id: String? = null,\n    val title: String? = null,\n    val release_date: String? = null,\n    val gender: String? = null,\n    val image: String? = null,\n    val description: String? = null,\n    val rating: Long? = null,\n    var likes: Long? = null,\n    var liked: Boolean? = null,\n    val video: String? = null,\n    val plataformas: String? = null\n)\n\nprivate val gamesVEL : ValueEventListener by lazy {\n    object : ValueEventListener{\n        override fun onCancelled(databaseError: DatabaseError) {}\n\n        override fun onDataChange(dataSnapshot: DataSnapshot) {\n            Log.d(\"firebase\",\"jejejejje\")\n            juegos.clear()\n            dataSnapshot.children.forEach {\n                val game = it.getValue(Game::class.java)\n                juegos.add(game!!)\n            }\n            queryStars.addListenerForSingleValueEvent(starsVEL)\n\n        }\n\n    }\n}\n</code></pre>\n\n<h1>UPDATE</h1>\n\n<p>A install in new device solve the problem but not in older devices. I mean if i've the installed app before the field <code>likes</code> is still missed.</p>\n"}, {"tags": ["android", "kotlin", "android-camera2"], "answers": [{"comments": [{"owner": {"reputation": 2533, "user_id": 3498044, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/rwWEw.jpg?s=128&g=1", "display_name": "priyank", "link": "https://stackoverflow.com/users/3498044/priyank"}, "edited": false, "score": 1, "creation_date": 1542236949, "post_id": 53310072, "comment_id": 93500983, "body": "Thanks for the quick response Alex. I will add clarifications about all of that in the original post. The <code>internalOutputFormat</code> is <code>ImageFormat.JPEG</code>, I also tried with <code>ImageFormat.YUV_420_888</code> but same result. Also <code>maxImages = 4</code> is safe in this case because I only request next frame once I am done with current one. Both the image readers work individually if I don&#39;t use the other one. But together it is just blank screen. I wonder if the device is relevant. If so I am testing on <code>Samsung Galaxy S8</code> with Android 8.0"}, {"owner": {"reputation": 15299, "user_id": 1344825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddb46ca4bba1b0ddb4762e622fab9084?s=128&d=identicon&r=PG", "display_name": "Eddy Talvala", "link": "https://stackoverflow.com/users/1344825/eddy-talvala"}, "edited": false, "score": 2, "creation_date": 1542238286, "post_id": 53310072, "comment_id": 93501419, "body": "As Alex says, there are limits to how many simultaneous outputs you can add to a capture session.  There should be errors in either the session creation or when submitting the first capture request, so try checking if any capture errors are being reported to your app.  Or if the capture session creation is returning an error callback."}, {"owner": {"reputation": 2533, "user_id": 3498044, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/rwWEw.jpg?s=128&g=1", "display_name": "priyank", "link": "https://stackoverflow.com/users/3498044/priyank"}, "reply_to_user": {"reputation": 15299, "user_id": 1344825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddb46ca4bba1b0ddb4762e622fab9084?s=128&d=identicon&r=PG", "display_name": "Eddy Talvala", "link": "https://stackoverflow.com/users/1344825/eddy-talvala"}, "edited": false, "score": 1, "creation_date": 1542240130, "post_id": 53310072, "comment_id": 93501953, "body": "@EddyTalvala thanks for pointing me to exceptions. The error itself doesn&#39;t say much <code>Stream configuration failed due to: endConfigure:434</code> but upon searching, it is found that multiple surfaces are not supported for JPEG format. Upon changing it to <code>YUV_420_888</code> it works flawlessly."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 1, "creation_date": 1542261748, "post_id": 53310072, "comment_id": 93506959, "body": "Yes, jpeg is the king of image formats. I mean, there may be only one jpeg in capture session, or none."}, {"owner": {"reputation": 10289, "user_id": 15394, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9757acb5b356cbf87576c2005f2cf33c?s=128&d=identicon&r=PG", "display_name": "glenatron", "link": "https://stackoverflow.com/users/15394/glenatron"}, "edited": false, "score": 1, "creation_date": 1554308669, "post_id": 53310072, "comment_id": 97706576, "body": "This is super useful! I have edited some of these comments into the answer because it solved the problem for me."}], "tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 2, "last_activity_date": 1554308580, "last_edit_date": 1554308580, "creation_date": 1542236747, "answer_id": 53310072, "question_id": 53308362, "link": "https://stackoverflow.com/questions/53308362/android-camera2-api-setting-multiple-imagereader-surfaces-gives-blank-output/53310072#53310072", "title": "Android camera2 api. Setting multiple ImageReader surfaces gives blank output", "body": "<p><strong>maxImages == 4</strong> may be too much and exhaust your RAM. Also, it's not clear what <strong>internalOutputFormat</strong> you use, and whether it is compatible with the <strong>largestPreview</strong> size.</p>\n\n<p>The bottom line is, study the long list of tables for supported surface list parameter of <a href=\"https://developer.android.com/reference/android/hardware/camera2/CameraDevice#createCaptureSession(android.hardware.camera2.params.SessionConfiguration)\" rel=\"nofollow noreferrer\">createCaptureSession()</a>. Depending on your camera capabilities, the three surfaces that you use, could be too much.</p>\n\n<p>From the comments below, a working solution: <em>\"The error itself doesn't say much [...] but upon searching, it is found that multiple surfaces are not supported for JPEG format. Upon changing it to YUV_420_888 it works flawlessly.\"</em></p>\n"}], "owner": {"reputation": 2533, "user_id": 3498044, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/rwWEw.jpg?s=128&g=1", "display_name": "priyank", "link": "https://stackoverflow.com/users/3498044/priyank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1993, "favorite_count": 0, "accepted_answer_id": 53310072, "answer_count": 1, "score": 4, "last_activity_date": 1554308580, "creation_date": 1542227829, "last_edit_date": 1542237700, "question_id": 53308362, "link": "https://stackoverflow.com/questions/53308362/android-camera2-api-setting-multiple-imagereader-surfaces-gives-blank-output", "title": "Android camera2 api. Setting multiple ImageReader surfaces gives blank output", "body": "<p>I have a camera2 implementation. The current setup is, it uses a texture view surface to display the actual camera view and an <code>ImageReader</code> surface for capturing images.</p>\n\n<p>Now I want to capture preview frames as well. So I tried adding a new <code>ImageReader</code> surface for capturing frames. But when I add that surface to <code>createCaptureSession</code> request, the screen goes blank. What could possibly be wrong? Below is the code that I use to add surfaces to <code>createCaptureSession</code></p>\n\n<pre><code>val surface = preview.surface\n            ?: throw CameraAccessException(CameraAccessException.CAMERA_ERROR)\n\nval previewIRSurface = previewImageReader?.surface\n            ?: throw CameraAccessException(CameraAccessException.CAMERA_ERROR)\n\nval captureSurface = captureImageReader?.surface\n            ?: throw CameraAccessException(CameraAccessException.CAMERA_ERROR)\n\ntry {\n    val template = if (zsl) CameraDevice.TEMPLATE_ZERO_SHUTTER_LAG else CameraDevice.TEMPLATE_PREVIEW\n\n    previewRequestBuilder = camera?.createCaptureRequest(template)\n            ?.apply { addTarget(surface) }\n            ?: throw CameraAccessException(CameraAccessException.CAMERA_ERROR)\n\n    val surfaces: ArrayList&lt;Surface&gt; = arrayListOf(surface, previewIRSurface, captureSurface)\n\n    camera?.createCaptureSession(surfaces, sessionCallback, backgroundHandler)\n\n} catch (e: CameraAccessException) {\n    throw RuntimeException(\"Failed to start camera session\")\n}\n</code></pre>\n\n<p>The initialization of ImageReaders is like this.</p>\n\n<pre><code>private fun prepareImageReaders() {\n\n    val largestPreview = previewSizes.sizes(aspectRatio).last()\n\n    previewImageReader?.close()\n\n    previewImageReader = ImageReader.newInstance(\n            largestPreview.width,\n            largestPreview.height,\n            internalOutputFormat,\n            4 // maxImages\n    ).apply { setOnImageAvailableListener(onPreviewImageAvailableListener, backgroundHandler) }\n\n    val largestPicture = pictureSizes.sizes(aspectRatio).last()\n\n    captureImageReader?.close()\n\n    captureImageReader = ImageReader.newInstance(\n            largestPicture.width,\n            largestPicture.height,\n            internalOutputFormat,\n            2 // maxImages\n    ).apply { setOnImageAvailableListener(onCaptureImageAvailableListener, backgroundHandler) }\n}\n</code></pre>\n\n<p><strong>More clarifications about the parameters used above:</strong></p>\n\n<ul>\n<li><code>internalOutput</code> format is either <code>ImageFormat.JPEG</code> or <code>ImageFormat.YUV_420_888</code>.</li>\n<li>Image sizes are based on best possible sizes</li>\n<li>It works good with either of the image readers individually but as soon as I add both together, blank screen!</li>\n<li>Testing on Samsung Galaxy S8 with Android Oreo (8.0)</li>\n</ul>\n\n<p><em>The original code is here <a href=\"https://github.com/pvasa/cameraview-ex/blob/development/cameraViewEx/src/main/api21/com/priyankvasa/android/cameraviewex/Camera2.kt\" rel=\"nofollow noreferrer\">https://github.com/pvasa/cameraview-ex/blob/development/cameraViewEx/src/main/api21/com/priyankvasa/android/cameraviewex/Camera2.kt</a></em></p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-gradle-plugin"], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 8787636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pIE5J.jpg?s=128&g=1", "display_name": "med.Hamdan", "link": "https://stackoverflow.com/users/8787636/med-hamdan"}, "is_accepted": true, "score": 0, "last_activity_date": 1542440736, "creation_date": 1542440736, "answer_id": 53349272, "question_id": 53308024, "link": "https://stackoverflow.com/questions/53308024/how-can-i-solve-this-problem-error-cannot-find-getter-for-field/53349272#53349272", "title": "How can I solve this problem. (error: Cannot find getter for field.)", "body": "<ol>\n<li>I clone the project</li>\n<li>update kotlin </li>\n<li>rename keystore.properties_sample to keystore.properties</li>\n<li>run it.. and everything works fine.</li>\n</ol>\n"}], "owner": {"reputation": 17, "user_id": 8639098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10248804eb00f79d0d9c860ae22400c?s=128&d=identicon&r=PG&f=1", "display_name": "Ayberk Ahmet", "link": "https://stackoverflow.com/users/8639098/ayberk-ahmet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 1, "accepted_answer_id": 53349272, "answer_count": 1, "score": 0, "last_activity_date": 1542440736, "creation_date": 1542226102, "question_id": 53308024, "link": "https://stackoverflow.com/questions/53308024/how-can-i-solve-this-problem-error-cannot-find-getter-for-field", "title": "How can I solve this problem. (error: Cannot find getter for field.)", "body": "<p>I have a problem. I clone this github project. <a href=\"https://github.com/SimpleMobileTools/Simple-Calendar\" rel=\"nofollow noreferrer\">https://github.com/SimpleMobileTools/Simple-Calendar</a> \nThen I update Kotlin in Android Studio. When I run project, I take errors and I didn't solve them.</p>\n\n<p>That are errors when I build it:</p>\n\n<pre><code>22:51:20: Executing task 'build'...\n\nExecuting tasks: [build]\n\n:app:checkDebugClasspath UP-TO-DATE\n:app:preBuild UP-TO-DATE\n:app:preDebugBuild UP-TO-DATE\n:app:compileDebugAidl NO-SOURCE\n:app:compileDebugRenderscript UP-TO-DATE\n:app:checkDebugManifest UP-TO-DATE\n:app:generateDebugBuildConfig UP-TO-DATE\n:app:mainApkListPersistenceDebug UP-TO-DATE\n:app:generateDebugResValues UP-TO-DATE\n:app:generateDebugResources UP-TO-DATE\n:app:mergeDebugResources UP-TO-DATE\n:app:createDebugCompatibleScreenManifests UP-TO-DATE\n:app:processDebugManifest UP-TO-DATE\n:app:splitsDiscoveryTaskDebug UP-TO-DATE\n:app:processDebugResources UP-TO-DATE\n:app:kaptGenerateStubsDebugKotlin UP-TO-DATE\ne: C:\\Users\\Ayberk\\Simple-Calendar\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\simplemobiletools\\calendar\\pro\\models\\Event.java:11: error: Cannot find getter for field.\n    private java.lang.Long id;\n                           ^\ne: C:\\Users\\Ayberk\\Simple-Calendar\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\simplemobiletools\\calendar\\pro\\models\\Event.java:39: error: Cannot find getter for field.\n    private java.lang.String importId;\n                             ^\ne: C:\\Users\\Ayberk\\Simple-Calendar\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\simplemobiletools\\calendar\\pro\\models\\EventType.java:10: error: Cannot find getter for field.\n    private java.lang.Long id;\n                           ^\ne: C:\\Users\\Ayberk\\Simple-Calendar\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\simplemobiletools\\calendar\\pro\\models\\EventRepetition.java:10: error: Cannot find getter for field.\n    private java.lang.Long id;\n                           ^\ne: C:\\Users\\Ayberk\\Simple-Calendar\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\simplemobiletools\\calendar\\pro\\models\\EventRepetitionException.java:10: error: Cannot find getter for field.\n    private java.lang.Long id;\n                           ^\n:app:kaptDebugKotlin\nw: C:\\Users\\Ayberk\\Simple-Calendar\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\simplemobiletools\\calendar\\pro\\databases\\EventsDatabase.java:7: warning: Schema export directory is not provided to the annotation processor so we cannot export the schema. You can either provide `room.schemaLocation` annotation processor argument OR set exportSchema to false.\npublic abstract class EventsDatabase extends androidx.room.RoomDatabase {\n                ^\n:app:kaptDebugKotlin FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:kaptDebugKotlin'.\n&gt; Compilation error. See log for more details\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBU\u0130LD FAILED in 4s\n14 actionable tasks: 1 executed, 13 up-to-date\n22:51:25: Task execution finished 'build'.\n</code></pre>\n\n<p>This is first errors' generated java class:</p>\n\n<pre><code>package com.simplemobiletools.calendar.pro.models;\n\nimport java.lang.System;\n\n@androidx.room.Entity(tableName = \"events\", indices = {@androidx.room.Index(unique = true, value = {\"id\"})})\n@kotlin.Metadata(mv = {1, 1, 13}, bv = {1, 0, 3}, k = 1, d1 = {\"\\u0000X\\n\\u0002\\u0018\\u0002\\n\\u0002\\u0018\\u0002\\n\\u0000\\n\\u0002\\u0010\\t\\n\\u0000\\n\\u0002\\u0010\\b\\n\\u0002\\b\\u0002\\n\\u0002\\u0010\\u000e\\n\\u0002\\b(\\n\\u0002\\u0010\\u000b\\n\\u0002\\b\\u001c\\n\\u0002\\u0010\\u0002\\n\\u0002\\b\\u0002\\n\\u0002\\u0018\\u0002\\n\\u0002\\b\\u0019\\n\\u0002\\u0010\\u0000\\n\\u0002\\b\\u0003\\n\\u0002\\u0018\\u0002\\n\\u0002\\b\\u0003\\n\\u0002\\u0010 \\n\\u0002\\b\\u0003\\n\\u0002\\u0018\\u0002\\n\\u0002\\b\\u0004\\b\\u0087\\b\\u0018\\u0000 z2\\u00020\\u0001:\\u0001zB\\u00b9\\u0001\\u0012\\b\\u0010\\u0002\\u001a\\u0004\\u0018\\u00010\\u0003\\u0012\\b\\b\\u0002\\u0010\\u0004\\u001a\\u00020\\u0005\\u0012\\b\\b\\u0002\\u0010\\u0006\\u001a\\u00020\\u0005\\u0012\\b\\b\\u0002\\u0010\\u0007\\u001a\\u00020\\b\\u0012\\b\\b\\u0002\\u0010\\t\\u001a\\u00020\\b\\u0012\\b\\b\\u0002\\u0010\\n\\u001a\\u00020\\b\\u0012\\b\\b\\u0002\\u0010\\u000b\\u001a\\u00020\\u0005\\u0012\\b\\b\\u0002\\u0010\\f\\u001a\\u00020\\u0005\\u0012\\b\\b\\u0002\\u0010\\r\\u001a\\u00020\\u0005\\u0012\\b\\b\\u0002\\u0010\\u000e\\u001a\\u00020\\u0005\\u0012\\b\\b\\u0002\\u0010\\u000f\\u001a\\u00020\\u0005\\u0012\\b\\b\\u0002\\u0010\\u0010\\u001a\\u00020\\u0005\\u0012\\b\\b\\u0002\\u0010\\u0011\\u001a\\u00020\\b\\u0012\\b\\b\\u0002\\u0010\\u0012\\u001a\\u00020\\u0005\\u0012\\b\\b\\u0002\\u0010\\u0013\\u001a\\u00020\\u0003\\u0012\\b\\b\\u0002\\u0010\\u0014\\u001a\\u00020\\u0003\\u0012\\b\\b\\u0002\\u0010\\u0015\\u001a\\u00020\\u0003\\u0012\\b\\b\\u0002\\u0010\\u0016\\u001a\\u00020\\b\\u00a2\\u0006\\u0002\\u0010\\u0017J\\u000e\\u0010M\\u001a\\u00020N2\\u0006\\u0010O\\u001a\\u00020\\u0000J\\u0018\\u0010P\\u001a\\u00020Q2\\u0006\\u0010R\\u001a\\u00020Q2\\u0006\\u0010O\\u001a\\u00020\\u0000H\\u0002J \\u0010S\\u001a\\u00020Q2\\u0006\\u0010R\\u001a\\u00020Q2\\u0006\\u0010O\\u001a\\u00020\\u00002\\u0006\\u0010T\\u001a\\u000201H\\u0002J\\u0010\\u0010U\\u001a\\u0004\\u0018\\u00010\\u0003H\\u00c6\\u0003\\u00a2\\u0006\\u0002\\u0010*J\\t\\u0010V\\u001a\\u00020\\u0005H\\u00c6\\u0003J\\t\\u0010W\\u001a\\u00020\\u0005H\\u00c6\\u0003J\\t\\u0010X\\u001a\\u00020\\u0005H\\u00c6\\u0003J\\t\\u0010Y\\u001a\\u00020\\bH\\u00c6\\u0003J\\t\\u0010Z\\u001a\\u00020\\u0005H\\u00c6\\u0003J\\t\\u0010[\\u001a\\u00020\\u0003H\\u00c6\\u0003J\\t\\u0010\\\\\\u001a\\u00020\\u0003H\\u00c6\\u0003J\\t\\u0010]\\u001a\\u00020\\u0003H\\u00c6\\u0003J\\t\\u0010^\\u001a\\u00020\\bH\\u00c6\\u0003J\\t\\u0010_\\u001a\\u00020\\u0005H\\u00c6\\u0003J\\t\\u0010`\\u001a\\u00020\\u0005H\\u00c6\\u0003J\\t\\u0010a\\u001a\\u00020\\bH\\u00c6\\u0003J\\t\\u0010b\\u001a\\u00020\\bH\\u00c6\\u0003J\\t\\u0010c\\u001a\\u00020\\bH\\u00c6\\u0003J\\t\\u0010d\\u001a\\u00020\\u0005H\\u00c6\\u0003J\\t\\u0010e\\u001a\\u00020\\u0005H\\u00c6\\u0003J\\t\\u0010f\\u001a\\u00020\\u0005H\\u00c6\\u0003J\\u00c4\\u0001\\u0010g\\u001a\\u00020\\u00002\\n\\b\\u0002\\u0010\\u0002\\u001a\\u0004\\u0018\\u00010\\u00032\\b\\b\\u0002\\u0010\\u0004\\u001a\\u00020\\u00052\\b\\b\\u0002\\u0010\\u0006\\u001a\\u00020\\u00052\\b\\b\\u0002\\u0010\\u0007\\u001a\\u00020\\b2\\b\\b\\u0002\\u0010\\t\\u001a\\u00020\\b2\\b\\b\\u0002\\u0010\\n\\u001a\\u00020\\b2\\b\\b\\u0002\\u0010\\u000b\\u001a\\u00020\\u00052\\b\\b\\u0002\\u0010\\f\\u001a\\u00020\\u00052\\b\\b\\u0002\\u0010\\r\\u001a\\u00020\\u00052\\b\\b\\u0002\\u0010\\u000e\\u001a\\u00020\\u00052\\b\\b\\u0002\\u0010\\u000f\\u001a\\u00020\\u00052\\b\\b\\u0002\\u0010\\u0010\\u001a\\u00020\\u00052\\b\\b\\u0002\\u0010\\u0011\\u001a\\u00020\\b2\\b\\b\\u0002\\u0010\\u0012\\u001a\\u00020\\u00052\\b\\b\\u0002\\u0010\\u0013\\u001a\\u00020\\u00032\\b\\b\\u0002\\u0010\\u0014\\u001a\\u00020\\u00032\\b\\b\\u0002\\u0010\\u0015\\u001a\\u00020\\u00032\\b\\b\\u0002\\u0010\\u0016\\u001a\\u00020\\bH\\u00c6\\u0001\\u00a2\\u0006\\u0002\\u0010hJ\\u0013\\u0010i\\u001a\\u0002012\\b\\u0010j\\u001a\\u0004\\u0018\\u00010kH\\u00d6\\u0003J\\u0006\\u0010l\\u001a\\u00020\\u0005J\\u0006\\u0010m\\u001a\\u00020\\u0003J\\u0006\\u0010n\\u001a\\u00020oJ\\u0006\\u0010p\\u001a\\u00020\\u0005J\\u0006\\u0010q\\u001a\\u000201J\\f\\u0010r\\u001a\\b\\u0012\\u0004\\u0012\\u00020\\u00050sJ\\t\\u0010t\\u001a\\u00020\\u0005H\\u00d6\\u0001J\\u0014\\u0010u\\u001a\\u0002012\\f\\u0010v\\u001a\\b\\u0012\\u0004\\u0012\\u00020\\u00050wJ\\t\\u0010x\\u001a\\u00020\\bH\\u00d6\\u0001J\\u0006\\u0010y\\u001a\\u00020NR\\u001a\\u0010\\u0018\\u001a\\u00020\\u0005X\\u0086\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b\\u0019\\u0010\\u001a\\\"\\u0004\\b\\u001b\\u0010\\u001cR\\u001e\\u0010\\n\\u001a\\u00020\\b8\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b\\u001d\\u0010\\u001e\\\"\\u0004\\b\\u001f\\u0010 R\\u001e\\u0010\\u0006\\u001a\\u00020\\u00058\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b!\\u0010\\u001a\\\"\\u0004\\b\\\"\\u0010\\u001cR\\u001e\\u0010\\u0013\\u001a\\u00020\\u00038\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b#\\u0010$\\\"\\u0004\\b%\\u0010&amp;R\\u001e\\u0010\\u0012\\u001a\\u00020\\u00058\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b\\'\\u0010\\u001a\\\"\\u0004\\b(\\u0010\\u001cR\\\"\\u0010\\u0002\\u001a\\u0004\\u0018\\u00010\\u00038\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u0010\\n\\u0002\\u0010-\\u001a\\u0004\\b)\\u0010*\\\"\\u0004\\b+\\u0010,R\\u001e\\u0010\\u0011\\u001a\\u00020\\b8\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b.\\u0010\\u001e\\\"\\u0004\\b/\\u0010 R$\\u00100\\u001a\\u0002012\\u0006\\u00100\\u001a\\u0002018F@FX\\u0086\\u000e\\u00a2\\u0006\\f\\u001a\\u0004\\b0\\u00102\\\"\\u0004\\b3\\u00104R\\u001e\\u0010\\u0015\\u001a\\u00020\\u00038\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b5\\u0010$\\\"\\u0004\\b6\\u0010&amp;R\\u001e\\u0010\\t\\u001a\\u00020\\b8\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b7\\u0010\\u001e\\\"\\u0004\\b8\\u0010 R\\u001e\\u0010\\u0014\\u001a\\u00020\\u00038\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b9\\u0010$\\\"\\u0004\\b:\\u0010&amp;R\\u001e\\u0010\\u000b\\u001a\\u00020\\u00058\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b;\\u0010\\u001a\\\"\\u0004\\b&lt;\\u0010\\u001cR\\u001e\\u0010\\f\\u001a\\u00020\\u00058\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b=\\u0010\\u001a\\\"\\u0004\\b&gt;\\u0010\\u001cR\\u001e\\u0010\\r\\u001a\\u00020\\u00058\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\b?\\u0010\\u001a\\\"\\u0004\\b@\\u0010\\u001cR\\u001e\\u0010\\u000e\\u001a\\u00020\\u00058\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\bA\\u0010\\u001a\\\"\\u0004\\bB\\u0010\\u001cR\\u001e\\u0010\\u0010\\u001a\\u00020\\u00058\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\bC\\u0010\\u001a\\\"\\u0004\\bD\\u0010\\u001cR\\u001e\\u0010\\u000f\\u001a\\u00020\\u00058\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\bE\\u0010\\u001a\\\"\\u0004\\bF\\u0010\\u001cR\\u001e\\u0010\\u0016\\u001a\\u00020\\b8\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\bG\\u0010\\u001e\\\"\\u0004\\bH\\u0010 R\\u001e\\u0010\\u0004\\u001a\\u00020\\u00058\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\bI\\u0010\\u001a\\\"\\u0004\\bJ\\u0010\\u001cR\\u001e\\u0010\\u0007\\u001a\\u00020\\b8\\u0006@\\u0006X\\u0087\\u000e\\u00a2\\u0006\\u000e\\n\\u0000\\u001a\\u0004\\bK\\u0010\\u001e\\\"\\u0004\\bL\\u0010 \\u00a8\\u0006{\"}, d2 = {\"Lcom/simplemobiletools/calendar/pro/models/Event;\", \"Ljava/io/Serializable;\", \"id\", \"\", \"startTS\", \"\", \"endTS\", \"title\", \"\", \"location\", \"description\", \"reminder1Minutes\", \"reminder2Minutes\", \"reminder3Minutes\", \"repeatInterval\", \"repeatRule\", \"repeatLimit\", \"importId\", \"flags\", \"eventType\", \"parentId\", \"lastUpdated\", \"source\", \"(Ljava/lang/Long;IILjava/lang/String;Ljava/lang/String;Ljava/lang/String;IIIIIILjava/lang/String;IJJJLjava/lang/String;)V\", \"color\", \"getColor\", \"()I\", \"setColor\", \"(I)V\", \"getDescription\", \"()Ljava/lang/String;\", \"setDescription\", \"(Ljava/lang/String;)V\", \"getEndTS\", \"setEndTS\", \"getEventType\", \"()J\", \"setEventType\", \"(J)V\", \"getFlags\", \"setFlags\", \"getId\", \"()Ljava/lang/Long;\", \"setId\", \"(Ljava/lang/Long;)V\", \"Ljava/lang/Long;\", \"getImportId\", \"setImportId\", \"isPastEvent\", \"\", \"()Z\", \"setPastEvent\", \"(Z)V\", \"getLastUpdated\", \"setLastUpdated\", \"getLocation\", \"setLocation\", \"getParentId\", \"setParentId\", \"getReminder1Minutes\", \"setReminder1Minutes\", \"getReminder2Minutes\", \"setReminder2Minutes\", \"getReminder3Minutes\", \"setReminder3Minutes\", \"getRepeatInterval\", \"setRepeatInterval\", \"getRepeatLimit\", \"setRepeatLimit\", \"getRepeatRule\", \"setRepeatRule\", \"getSource\", \"setSource\", \"getStartTS\", \"setStartTS\", \"getTitle\", \"setTitle\", \"addIntervalTime\", \"\", \"original\", \"addMonthsWithSameDay\", \"Lorg/joda/time/DateTime;\", \"currStart\", \"addXthDayInterval\", \"forceLastWeekday\", \"component1\", \"component10\", \"component11\", \"component12\", \"component13\", \"component14\", \"component15\", \"component16\", \"component17\", \"component18\", \"component2\", \"component3\", \"component4\", \"component5\", \"component6\", \"component7\", \"component8\", \"component9\", \"copy\", \"(Ljava/lang/Long;IILjava/lang/String;Ljava/lang/String;Ljava/lang/String;IIIIIILjava/lang/String;IJJJLjava/lang/String;)Lcom/simplemobiletools/calendar/pro/models/Event;\", \"equals\", \"other\", \"\", \"getCalDAVCalendarId\", \"getCalDAVEventId\", \"getEventRepetition\", \"Lcom/simplemobiletools/calendar/pro/models/EventRepetition;\", \"getEventStartTS\", \"getIsAllDay\", \"getReminders\", \"\", \"hashCode\", \"isOnProperWeek\", \"startTimes\", \"Landroidx/collection/LongSparseArray;\", \"toString\", \"updateIsPastEvent\", \"Companion\", \"calendar_debug\"})\npublic final class Event implements java.io.Serializable {\n    private int color;\n    @org.jetbrains.annotations.Nullable()\n    @androidx.room.PrimaryKey(autoGenerate = true)\n    private java.lang.Long id;\n    @androidx.room.ColumnInfo(name = \"start_ts\")\n    private int startTS;\n    @androidx.room.ColumnInfo(name = \"end_ts\")\n    private int endTS;\n    @org.jetbrains.annotations.NotNull()\n    @androidx.room.ColumnInfo(name = \"title\")\n    private java.lang.String title;\n    @org.jetbrains.annotations.NotNull()\n    @androidx.room.ColumnInfo(name = \"location\")\n    private java.lang.String location;\n    @org.jetbrains.annotations.NotNull()\n    @androidx.room.ColumnInfo(name = \"description\")\n    private java.lang.String description;\n    @androidx.room.ColumnInfo(name = \"reminder_1_minutes\")\n    private int reminder1Minutes;\n    @androidx.room.ColumnInfo(name = \"reminder_2_minutes\")\n    private int reminder2Minutes;\n    @androidx.room.ColumnInfo(name = \"reminder_3_minutes\")\n    private int reminder3Minutes;\n    @androidx.room.ColumnInfo(name = \"repeat_interval\")\n    private int repeatInterval;\n    @androidx.room.ColumnInfo(name = \"repeat_rule\")\n    private int repeatRule;\n    @androidx.room.ColumnInfo(name = \"repeat_limit\")\n    private int repeatLimit;\n    @org.jetbrains.annotations.NotNull()\n    @androidx.room.ColumnInfo(name = \"import_id\")\n    private java.lang.String importId;\n    @androidx.room.ColumnInfo(name = \"flags\")\n    private int flags;\n    @androidx.room.ColumnInfo(name = \"event_type\")\n    private long eventType;\n    @androidx.room.ColumnInfo(name = \"parent_id\")\n    private long parentId;\n    @androidx.room.ColumnInfo(name = \"last_updated\")\n    private long lastUpdated;\n    @org.jetbrains.annotations.NotNull()\n    @androidx.room.ColumnInfo(name = \"source\")\n    private java.lang.String source;\n    private static final long serialVersionUID = -32456795132345616L;\n    public static final com.simplemobiletools.calendar.pro.models.Event.Companion Companion = null;\n\n    public final void addIntervalTime(@org.jetbrains.annotations.NotNull()\n    com.simplemobiletools.calendar.pro.models.Event original) {\n    }\n\n    private final org.joda.time.DateTime addMonthsWithSameDay(org.joda.time.DateTime currStart, com.simplemobiletools.calendar.pro.models.Event original) {\n        return null;\n    }\n\n    private final org.joda.time.DateTime addXthDayInterval(org.joda.time.DateTime currStart, com.simplemobiletools.calendar.pro.models.Event original, boolean forceLastWeekday) {\n        return null;\n    }\n\n    public final boolean getIsAllDay() {\n        return false;\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.util.List&lt;java.lang.Integer&gt; getReminders() {\n        return null;\n    }\n\n    public final int getEventStartTS() {\n        return 0;\n    }\n\n    public final long getCalDAVEventId() {\n        return 0L;\n    }\n\n    public final int getCalDAVCalendarId() {\n        return 0;\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final com.simplemobiletools.calendar.pro.models.EventRepetition getEventRepetition() {\n        return null;\n    }\n\n    public final boolean isOnProperWeek(@org.jetbrains.annotations.NotNull()\n    androidx.collection.LongSparseArray&lt;java.lang.Integer&gt; startTimes) {\n        return false;\n    }\n\n    public final void updateIsPastEvent() {\n    }\n\n    public final boolean isPastEvent() {\n        return false;\n    }\n\n    public final void setPastEvent(boolean isPastEvent) {\n    }\n\n    public final int getColor() {\n        return 0;\n    }\n\n    public final void setColor(int p0) {\n    }\n\n    @org.jetbrains.annotations.Nullable()\n    public final java.lang.Long getId() {\n        return null;\n    }\n\n    public final void setId(@org.jetbrains.annotations.Nullable()\n    java.lang.Long p0) {\n    }\n\n    public final int getStartTS() {\n        return 0;\n    }\n\n    public final void setStartTS(int p0) {\n    }\n\n    public final int getEndTS() {\n        return 0;\n    }\n\n    public final void setEndTS(int p0) {\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.lang.String getTitle() {\n        return null;\n    }\n\n    public final void setTitle(@org.jetbrains.annotations.NotNull()\n    java.lang.String p0) {\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.lang.String getLocation() {\n        return null;\n    }\n\n    public final void setLocation(@org.jetbrains.annotations.NotNull()\n    java.lang.String p0) {\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.lang.String getDescription() {\n        return null;\n    }\n\n    public final void setDescription(@org.jetbrains.annotations.NotNull()\n    java.lang.String p0) {\n    }\n\n    public final int getReminder1Minutes() {\n        return 0;\n    }\n\n    public final void setReminder1Minutes(int p0) {\n    }\n\n    public final int getReminder2Minutes() {\n        return 0;\n    }\n\n    public final void setReminder2Minutes(int p0) {\n    }\n\n    public final int getReminder3Minutes() {\n        return 0;\n    }\n\n    public final void setReminder3Minutes(int p0) {\n    }\n\n    public final int getRepeatInterval() {\n        return 0;\n    }\n\n    public final void setRepeatInterval(int p0) {\n    }\n\n    public final int getRepeatRule() {\n        return 0;\n    }\n\n    public final void setRepeatRule(int p0) {\n    }\n\n    public final int getRepeatLimit() {\n        return 0;\n    }\n\n    public final void setRepeatLimit(int p0) {\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.lang.String getImportId() {\n        return null;\n    }\n\n    public final void setImportId(@org.jetbrains.annotations.NotNull()\n    java.lang.String p0) {\n    }\n\n    public final int getFlags() {\n        return 0;\n    }\n\n    public final void setFlags(int p0) {\n    }\n\n    public final long getEventType() {\n        return 0L;\n    }\n\n    public final void setEventType(long p0) {\n    }\n\n    public final long getParentId() {\n        return 0L;\n    }\n\n    public final void setParentId(long p0) {\n    }\n\n    public final long getLastUpdated() {\n        return 0L;\n    }\n\n    public final void setLastUpdated(long p0) {\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.lang.String getSource() {\n        return null;\n    }\n\n    public final void setSource(@org.jetbrains.annotations.NotNull()\n    java.lang.String p0) {\n    }\n\n    public Event(@org.jetbrains.annotations.Nullable()\n    java.lang.Long id, int startTS, int endTS, @org.jetbrains.annotations.NotNull()\n    java.lang.String title, @org.jetbrains.annotations.NotNull()\n    java.lang.String location, @org.jetbrains.annotations.NotNull()\n    java.lang.String description, int reminder1Minutes, int reminder2Minutes, int reminder3Minutes, int repeatInterval, int repeatRule, int repeatLimit, @org.jetbrains.annotations.NotNull()\n    java.lang.String importId, int flags, long eventType, long parentId, long lastUpdated, @org.jetbrains.annotations.NotNull()\n    java.lang.String source) {\n        super();\n    }\n\n    @org.jetbrains.annotations.Nullable()\n    public final java.lang.Long component1() {\n        return null;\n    }\n\n    public final int component2() {\n        return 0;\n    }\n\n    public final int component3() {\n        return 0;\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.lang.String component4() {\n        return null;\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.lang.String component5() {\n        return null;\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.lang.String component6() {\n        return null;\n    }\n\n    public final int component7() {\n        return 0;\n    }\n\n    public final int component8() {\n        return 0;\n    }\n\n    public final int component9() {\n        return 0;\n    }\n\n    public final int component10() {\n        return 0;\n    }\n\n    public final int component11() {\n        return 0;\n    }\n\n    public final int component12() {\n        return 0;\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.lang.String component13() {\n        return null;\n    }\n\n    public final int component14() {\n        return 0;\n    }\n\n    public final long component15() {\n        return 0L;\n    }\n\n    public final long component16() {\n        return 0L;\n    }\n\n    public final long component17() {\n        return 0L;\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final java.lang.String component18() {\n        return null;\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    public final com.simplemobiletools.calendar.pro.models.Event copy(@org.jetbrains.annotations.Nullable()\n    java.lang.Long id, int startTS, int endTS, @org.jetbrains.annotations.NotNull()\n    java.lang.String title, @org.jetbrains.annotations.NotNull()\n    java.lang.String location, @org.jetbrains.annotations.NotNull()\n    java.lang.String description, int reminder1Minutes, int reminder2Minutes, int reminder3Minutes, int repeatInterval, int repeatRule, int repeatLimit, @org.jetbrains.annotations.NotNull()\n    java.lang.String importId, int flags, long eventType, long parentId, long lastUpdated, @org.jetbrains.annotations.NotNull()\n    java.lang.String source) {\n        return null;\n    }\n\n    @org.jetbrains.annotations.NotNull()\n    @java.lang.Override()\n    public java.lang.String toString() {\n        return null;\n    }\n\n    @java.lang.Override()\n    public int hashCode() {\n        return 0;\n    }\n\n    @java.lang.Override()\n    public boolean equals(@org.jetbrains.annotations.Nullable()\n    java.lang.Object p0) {\n        return false;\n    }\n\n    @kotlin.Metadata(mv = {1, 1, 13}, bv = {1, 0, 3}, k = 1, d1 = {\"\\u0000\\u0012\\n\\u0002\\u0018\\u0002\\n\\u0002\\u0010\\u0000\\n\\u0002\\b\\u0002\\n\\u0002\\u0010\\t\\n\\u0000\\b\\u0086\\u0003\\u0018\\u00002\\u00020\\u0001B\\u0007\\b\\u0002\\u00a2\\u0006\\u0002\\u0010\\u0002R\\u000e\\u0010\\u0003\\u001a\\u00020\\u0004X\\u0082T\\u00a2\\u0006\\u0002\\n\\u0000\\u00a8\\u0006\\u0005\"}, d2 = {\"Lcom/simplemobiletools/calendar/pro/models/Event$Companion;\", \"\", \"()V\", \"serialVersionUID\", \"\", \"calendar_debug\"})\n    public static final class Companion {\n\n        private Companion() {\n            super();\n        }\n    }\n}\n</code></pre>\n\n<p>I fixed kotlin version at current version and rebuild it. But there is not change anything. I search this errors and try their solutions. But didn't worked. And other problem I didn't any change in java file. Android Studio is saying \"Files under the \"build\" folder are generated and should not be edited\".</p>\n"}, {"tags": ["error-handling", "kotlin", "observable", "rx-java2", "rx-kotlin"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10614184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6Dc016zAshk/AAAAAAAAAAI/AAAAAAAAAuY/gEOzadK7qWk/photo.jpg?sz=128", "display_name": "Yuri Machioni", "link": "https://stackoverflow.com/users/10614184/yuri-machioni"}, "edited": false, "score": 0, "creation_date": 1542283912, "post_id": 53307691, "comment_id": 93518354, "body": "So that means that in the first case the app will crash if the subscriber is disposed (if i&#39;m using the default global error handler) and in the second it won&#39;t ?"}, {"owner": {"reputation": 1720, "user_id": 8490194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/003116725d07e12e51de7c159bd2f218?s=128&d=identicon&r=PG&f=1", "display_name": "ConstOrVar", "link": "https://stackoverflow.com/users/8490194/constorvar"}, "reply_to_user": {"reputation": 5, "user_id": 10614184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6Dc016zAshk/AAAAAAAAAAI/AAAAAAAAAuY/gEOzadK7qWk/photo.jpg?sz=128", "display_name": "Yuri Machioni", "link": "https://stackoverflow.com/users/10614184/yuri-machioni"}, "edited": false, "score": 0, "creation_date": 1542287259, "post_id": 53307691, "comment_id": 93520324, "body": "I suppose, yes."}, {"owner": {"reputation": 5, "user_id": 10614184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6Dc016zAshk/AAAAAAAAAAI/AAAAAAAAAuY/gEOzadK7qWk/photo.jpg?sz=128", "display_name": "Yuri Machioni", "link": "https://stackoverflow.com/users/10614184/yuri-machioni"}, "edited": false, "score": 0, "creation_date": 1542642392, "post_id": 53307691, "comment_id": 93631903, "body": "RxJava 2.1.1 introduced an experimental tryOnError(t: Throwable) method on SingleEmitter. It&#39;s documentation says: &quot;Attempts to emit the specified {@code Throwable} error if the downstream      * hasn&#39;t cancelled the sequence or is otherwise terminated, returning false      * if the emission is not allowed to happen due to lifecycle restrictions.      * &lt;p&gt;      * Unlike {@link #onError(Throwable)}, the {@code RxJavaPlugins.onError} is not called      * if the error could not be delivered.&quot; So I don&#39;t know how this fits what you said."}, {"owner": {"reputation": 5, "user_id": 10614184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6Dc016zAshk/AAAAAAAAAAI/AAAAAAAAAuY/gEOzadK7qWk/photo.jpg?sz=128", "display_name": "Yuri Machioni", "link": "https://stackoverflow.com/users/10614184/yuri-machioni"}, "edited": false, "score": 0, "creation_date": 1542642672, "post_id": 53307691, "comment_id": 93632076, "body": "Seems to me that both behave the same except tryOnError(), but if thats the case, everything before it would crash if disposal happens before onError ? How could I safely ignore a network error if the user (for an example) navigates away before the error is returned then ? This is really confusing."}], "tags": [], "owner": {"reputation": 1720, "user_id": 8490194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/003116725d07e12e51de7c159bd2f218?s=128&d=identicon&r=PG&f=1", "display_name": "ConstOrVar", "link": "https://stackoverflow.com/users/8490194/constorvar"}, "is_accepted": true, "score": 1, "last_activity_date": 1542224603, "creation_date": 1542224603, "answer_id": 53307691, "question_id": 53307056, "link": "https://stackoverflow.com/questions/53307056/in-rxjava-rxkotlin-what-are-the-differences-between-returning-a-completable-err/53307691#53307691", "title": "In RxJava/RxKotlin, what are the differences between returning a Completable.error(Exception()) and throwing?", "body": "<p>According to <a href=\"http://reactivex.io/RxJava/javadoc/io/reactivex/Completable.html#fromAction-io.reactivex.functions.Action-\" rel=\"nofollow noreferrer\">documentation</a>, </p>\n\n<blockquote>\n  <p>If the Action throws an exception, the respective Throwable is delivered to the downstream via CompletableObserver.onError(Throwable), except when the downstream has disposed this Completable source. In this latter case, the Throwable is delivered to the global error handler via RxJavaPlugins.onError(Throwable) as an UndeliverableException.</p>\n</blockquote>\n\n<p>So both of two ways you described are similar (except when the downstream has disposed). Note, that first approach (with manually throwing exception) allow to modify behavior of <code>Completable</code> at runtime. And second one - statically defined as you return particular type of <code>Completable</code> and can't modify it.</p>\n\n<p>What to choose depends on your needs.</p>\n"}], "owner": {"reputation": 5, "user_id": 10614184, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6Dc016zAshk/AAAAAAAAAAI/AAAAAAAAAuY/gEOzadK7qWk/photo.jpg?sz=128", "display_name": "Yuri Machioni", "link": "https://stackoverflow.com/users/10614184/yuri-machioni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "accepted_answer_id": 53307691, "answer_count": 1, "score": 0, "last_activity_date": 1542224603, "creation_date": 1542221957, "question_id": 53307056, "link": "https://stackoverflow.com/questions/53307056/in-rxjava-rxkotlin-what-are-the-differences-between-returning-a-completable-err", "title": "In RxJava/RxKotlin, what are the differences between returning a Completable.error(Exception()) and throwing?", "body": "<p>What are the differences in the following cases: </p>\n\n<pre><code>fun a(params: String) = Completable.fromAction {\n        if (params.isEmpty()) {\n            throw EmptyRequiredFieldException() \n        }\n    }\n</code></pre>\n\n<p>VS</p>\n\n<pre><code>fun b(params: String) = if(params.isEmpty()) \n       Completable.error(EmptyRequiredFieldException()) \nelse \n       Completable.complete()\n</code></pre>\n\n<p>Specifically in the context of android, if it matters (even though I don't think it does)\nThanks!</p>\n"}, {"tags": ["kotlin", "mockito"], "comments": [{"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1542242795, "post_id": 53306884, "comment_id": 93502627, "body": "Why would you bother mocking it instead of writing a function that does its own verification?"}, {"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "reply_to_user": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1542270978, "post_id": 53306884, "comment_id": 93510768, "body": "Mockito takes care of waiting for the result, since it comes async. If I had to do that myself I would have to use some futur object or maybe wait and notify."}], "answers": [{"comments": [{"owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "edited": false, "score": 0, "creation_date": 1542222014, "post_id": 53306974, "comment_id": 93494818, "body": "Oh interesting library. I&#39;ll try that one after dinner thanks. because without the library that doesn&#39;t work^^"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "edited": false, "score": 0, "creation_date": 1542222172, "post_id": 53306974, "comment_id": 93494907, "body": "@findusl - That&#39;s fair, I&#39;ve been using this library for so long I&#39;ve forgotten what life was like without it :)"}], "tags": [], "owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "is_accepted": true, "score": 11, "last_activity_date": 1542222017, "last_edit_date": 1542222017, "creation_date": 1542221640, "answer_id": 53306974, "question_id": 53306884, "link": "https://stackoverflow.com/questions/53306884/how-to-mock-lambda-with-mockito-in-kotlin/53306974#53306974", "title": "How to mock lambda with mockito in kotlin", "body": "<p>This is really no different to mocking any other type:</p>\n\n<pre><code>val callback = mock&lt;(Array&lt;Composition&gt;) -&gt; Unit&gt;()\n\ngetCompositons(callback)\n\nverify(callback)(any())  // Or verify(callback).invoke(any()) to be explicit\n</code></pre>\n\n<p><em>(In case you weren't aware of them, I'm using the <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"noreferrer\">mockito-kotlin bindings</a> here.)</em></p>\n"}, {"comments": [{"owner": {"reputation": 4221, "user_id": 191761, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/umagg.jpg?s=128&g=1", "display_name": "Adam Burley", "link": "https://stackoverflow.com/users/191761/adam-burley"}, "edited": false, "score": 0, "creation_date": 1615673499, "post_id": 65006678, "comment_id": 117765739, "body": "I tried this but got &quot;Cannot mock/spy class MyTest$myTestMethod$function$1. Mockito cannot mock/spy because :- final class&quot; The error occurs at the second line of your code snippet. Basically it seems the class which Kotlin assigns to such callbacks is a final class"}], "tags": [], "owner": {"reputation": 1388, "user_id": 761668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T0pRJ.jpg?s=128&g=1", "display_name": "Javier Mendon&#231;a", "link": "https://stackoverflow.com/users/761668/javier-mendon%c3%a7a"}, "is_accepted": false, "score": 1, "last_activity_date": 1606314556, "creation_date": 1606314556, "answer_id": 65006678, "question_id": 53306884, "link": "https://stackoverflow.com/questions/53306884/how-to-mock-lambda-with-mockito-in-kotlin/65006678#65006678", "title": "How to mock lambda with mockito in kotlin", "body": "<p>You can do that like this:</p>\n<pre><code>val function: Array&lt;Composition&gt;) -&gt; Unit = {}\nval callback = mock(function::class.java)\n\ngetCompositons(callback)\n\nverify(callback)(any()) // or for example verifyNoInteractions(callback)\n</code></pre>\n<p>No extra libraries besides the standard mockito are needed</p>\n"}], "owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5676, "favorite_count": 0, "accepted_answer_id": 53306974, "answer_count": 2, "score": 11, "last_activity_date": 1606314556, "creation_date": 1542221219, "question_id": 53306884, "link": "https://stackoverflow.com/questions/53306884/how-to-mock-lambda-with-mockito-in-kotlin", "title": "How to mock lambda with mockito in kotlin", "body": "<p>I have a kotlin Android app. There is a function that loads compositions from the backend and returns them to a callback:</p>\n\n<pre><code>getCompositons(callback: (Array&lt;Composition&gt;) -&gt; Unit)\n</code></pre>\n\n<p>How can I mock the callback using mockito. So that I then can do something like this:</p>\n\n<pre><code>var callback = //mockito mock\ngetCompositons(callback) \nverify(callback, timeout(10000)).apply()\n</code></pre>\n\n<p>I read that lambda are matched to the java type function and therefore I assume apply could be the method invoked. Maybe I could mock a function and use that? But the Kotlin function interface only seems to have one return type, no parameters. java.util.Function says unresolved reference function.</p>\n\n<p>Any help appreciated. </p>\n"}, {"tags": ["java", "kotlin", "jvm", "java-native-interface"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 10419797, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XRRK5HDpugM/AAAAAAAAAAI/AAAAAAAAAOs/dLYs0VfOvhs/photo.jpg?sz=128", "display_name": "exfalso", "link": "https://stackoverflow.com/users/10419797/exfalso"}, "is_accepted": false, "score": 0, "last_activity_date": 1543335082, "creation_date": 1543335082, "answer_id": 53503745, "question_id": 53306837, "link": "https://stackoverflow.com/questions/53306837/unsatisfiedlinkerror-when-system-load-ing-dependent-libraries-in-reverse-order/53503745#53503745", "title": "UnsatisfiedLinkError when System.load-ing dependent libraries in reverse order", "body": "<p>Solved this in an alternative way. Not sure why the reverse loading doesn't work, but the following does:</p>\n\n<p>When linking the top-level .so add an RPATH of <code>$ORIGIN</code> like so:</p>\n\n<pre><code>ld (...) -rpath \"\\$ORIGIN\"\n</code></pre>\n\n<p>With CMake:</p>\n\n<pre><code>target_link_libraries(jvm_host\n    (...)\n    -Wl,-rpath,\"$ORIGIN\")\n</code></pre>\n\n<p>This special RPATH causes the loader to add the top-level .so's parent directory to the list of library paths, meaning it's enough to have the dependencies in the same folder as <code>libjvm_host.so</code>.</p>\n\n<p>With this <code>System.load(File(temporaryDirectory, \"libjvm_host.so\").absolutePath</code> on its own works like a charm.</p>\n"}], "owner": {"reputation": 26, "user_id": 10419797, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XRRK5HDpugM/AAAAAAAAAAI/AAAAAAAAAOs/dLYs0VfOvhs/photo.jpg?sz=128", "display_name": "exfalso", "link": "https://stackoverflow.com/users/10419797/exfalso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543335082, "creation_date": 1542221035, "question_id": 53306837, "link": "https://stackoverflow.com/questions/53306837/unsatisfiedlinkerror-when-system-load-ing-dependent-libraries-in-reverse-order", "title": "UnsatisfiedLinkError when System.load-ing dependent libraries in reverse order", "body": "<p>I have a dynamic library <code>libjvm_host.so</code> which depends on <code>libsgx_uae_service_sim.so</code> and <code>libsgx_urts_sim.so</code>:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ldd libjvm_host.so \nlinux-vdso.so.1 =&gt;  (0x00007ffcc376f000)\nlibsgx_uae_service_sim.so =&gt; not found\nlibsgx_urts_sim.so =&gt; not found\nlibpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f37d91fc000)\nlibstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f37d8e7a000)\nlibgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f37d8c64000)\nlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f37d889a000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f37d9651000)\nlibm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f37d8591000)\n</code></pre>\n\n<p>Both of these dependencies are next to <code>libjvm_host.so</code>, the reason it says <code>not found</code> is because I haven't set <code>LD_LIBRARY_PATH</code>.</p>\n\n<p>I'm trying to use <code>System.load</code> to load these libraries using their absolute paths, without relying on <code>LD_LIBRARY_PATH</code>, in reverse order:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>System.load(File(temporaryDirectory, \"libsgx_uae_service_sim.so\").absolutePath)\nSystem.load(File(temporaryDirectory, \"libsgx_urts_sim.so\").absolutePath)\nSystem.load(File(temporaryDirectory, \"libjvm_host.so\").absolutePath)\n</code></pre>\n\n<p><code>temporaryDirectory</code> is where I unpacked the <code>.so</code>s. However I'm getting an <code>UnsatisfiedLinkError</code>:</p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: /tmp/com.r3.sgx.host-libraries/libjvm_host.so: libsgx_uae_service_sim.so: cannot open shared object file: No such file or directory\n    at java.lang.ClassLoader$NativeLibrary.load(Native Method)\n    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1941)\n    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1824)\n    at java.lang.Runtime.load0(Runtime.java:809)\n    at java.lang.System.load(System.java:1086)\n    at com.r3.sgx.core.host.internal.NativeLoader.loadHostLibraries(NativeLoader.kt:31)\n</code></pre>\n\n<p>It loads the first two <code>.so</code>s, and fails on <code>libjvm_host.so</code>, which depends on the former two.</p>\n\n<p>I've read in multiple places that this is the way to load libraries that depend on one another without relying on <code>LD_LIBRARY_PATH</code>, however I can't get it to work. What am I missing?</p>\n"}, {"tags": ["java", "opencv", "image-processing", "kotlin", "javacv"], "owner": {"reputation": 4026, "user_id": 1117848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1215059/picture?type=large", "display_name": "Benjamin H", "link": "https://stackoverflow.com/users/1117848/benjamin-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542220987, "creation_date": 1542220602, "last_edit_date": 1542220987, "question_id": 53306745, "link": "https://stackoverflow.com/questions/53306745/trying-to-detect-faces-in-mp4-javacv-opencv-leads-to-fatal-errors-sigserv", "title": "Trying to detect faces in mp4 (javacv + opencv) leads to fatal errors SIGSERV", "body": "<p>My best guess: Am I not releasing frames somehow?</p>\n\n<p>I read a video using <code>org.bytedeco.javacv.FFmpegFrameGrabber</code>, and convert the frames to <code>opencv_core.Mat</code>, then convert THOSE to <code>opencv.core.Mat</code> (because I need to run a <code>CascadeClassifier</code> on it and we can't have nice things).  I then skip frames that have already been processed.</p>\n\n<p>Then it crashes.</p>\n\n<pre><code># A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x000000010a6c2d21, pid=746, tid=0x0000000000005103\n#\n# JRE version: Java(TM) SE Runtime Environment (8.0_191-b12) (build 1.8.0_191-b12)\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.191-b12 mixed mode bsd-amd64 compressed oops)\n# Problematic frame:\n# C  [libopencv_java342.dylib+0xed21]  Java_org_opencv_core_Mat_n_1delete+0x21\n</code></pre>\n\n<p>The odd thing is: if I don't skip the previously processed frames, it seems to work ok!  Which is why I was wondering if there was some race going on, where the time I take processing the frames gives the system time to catch up in clearing out garbage?</p>\n\n<p>The code (should be able to check out project and run it in IntelliJ if you have a long enough input.mp4 file to test it on)</p>\n\n<ul>\n<li><a href=\"https://github.com/salamanders/facesnap/blob/033a2ce839772f0edf0d6cbce508970c1afb82c7/src/main/kotlin/Main.kt#L20\" rel=\"nofollow noreferrer\">Kotlin sequence of Mat frames</a></li>\n<li><a href=\"https://github.com/salamanders/facesnap/blob/033a2ce839772f0edf0d6cbce508970c1afb82c7/src/main/kotlin/Main.kt#L60\" rel=\"nofollow noreferrer\">The line that seems to kill it (working with the Mat frame)</a></li>\n</ul>\n"}, {"tags": ["android-studio", "kotlin", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": true, "score": 1, "last_activity_date": 1543242210, "last_edit_date": 1543242210, "creation_date": 1542220482, "answer_id": 53306712, "question_id": 53306434, "link": "https://stackoverflow.com/questions/53306434/update-android-studio-project-to-kotlin-1-3/53306712#53306712", "title": "Update Android Studio Project to Kotlin 1.3", "body": "<p>I guess it has different version. Try to use: </p>\n\n<blockquote>\n  <p>implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.3.0'</p>\n</blockquote>\n"}], "owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1685, "favorite_count": 0, "accepted_answer_id": 53306712, "answer_count": 1, "score": 0, "last_activity_date": 1543242210, "creation_date": 1542219181, "question_id": 53306434, "link": "https://stackoverflow.com/questions/53306434/update-android-studio-project-to-kotlin-1-3", "title": "Update Android Studio Project to Kotlin 1.3", "body": "<p>I am attempting to Use Kotlin Coroutine's <code>runBlocking</code> function, but I receive the error that this method was introduced in Kotlin 1.3.</p>\n\n<p>So, I tried updating my Android Studio project to use Kotlin <code>1.3.0</code></p>\n\n<p>But, when I do that, I get the error: <code>\"org.jetbrains.kotlin:kotlin-stdlib-jre7:1.3.0\" is unresolved</code>...</p>\n\n<p>What is the recommended way to update my Android Studio project to use Kotlin 1.3? Or is there another method similar to <code>runBlocking</code> that is compatible with Kotlin <code>1.2.51</code>?</p>\n"}, {"tags": ["kotlin", "coroutine", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": true, "score": 0, "last_activity_date": 1542265845, "last_edit_date": 1542265845, "creation_date": 1542225980, "answer_id": 53307992, "question_id": 53306162, "link": "https://stackoverflow.com/questions/53306162/async-wont-compile-because-of-multiple-implementations-in-source/53307992#53307992", "title": "Async won&#39;t compile because of multiple implementations in source", "body": "<p>From Kotlin 1.3 you need to call <code>async</code> on a scope. In this example I have chosen\nthe <code>GlobalScope</code>. But it doesn't matter which scope you choose, you always have to explicitly import the <code>async</code>extension function;</p>\n\n<pre><code>import kotlinx.coroutines.GlobalScope\nimport kotlinx.coroutines.async\nimport kotlinx.coroutines.runBlocking\nimport java.util.concurrent.atomic.AtomicInteger\n\n\nfun main(args: Array&lt;String&gt;) {\n\n    val counter=AtomicInteger(0)\n\n    fun asyncIncrement(by:Int)= GlobalScope.async{\n        for(i in 1..by){\n            counter.incrementAndGet()\n        }\n    }\n\n    val workerA=asyncIncrement(5000)\n    val workerB=asyncIncrement(100)\n    runBlocking {\n        workerA.await()\n        workerB.await()\n    }\n\n    print(\"counter = $counter\")\n}\n</code></pre>\n\n<p>BTW:\nI changed the variable <code>counter</code> from <code>int</code> to an <code>AtomicInteger</code> because the two <code>async</code> blocks may run in different threads. And I introduced <code>runBlocking</code>, because <code>await</code> has to run in a suspend function.</p>\n"}], "owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 53307992, "answer_count": 1, "score": 0, "last_activity_date": 1542265845, "creation_date": 1542218058, "question_id": 53306162, "link": "https://stackoverflow.com/questions/53306162/async-wont-compile-because-of-multiple-implementations-in-source", "title": "Async won&#39;t compile because of multiple implementations in source", "body": "<p>I am trying to run the following code but it's not running because the compiler doesn't know which version of the <code>async</code> method to call. How do I tell it which one to call?</p>\n\n<p>v</p>\n\n<pre><code>ar counter=0\nval workerA=asyncIncrement(5000)\nval workerB=asyncIncrement(100)\nworkerA.await()\nworkerB.await()\n\nprint(\"counter = $counter\")\n\nfun asyncIncrement(by:Int)=async{\n    for(i in 1..by){\n        counter++\n    }\n}\n</code></pre>\n\n<p>Just copy and paste the code into a scratch file or wherever and you should see the same compiler error</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542213450, "post_id": 53304653, "comment_id": 93490626, "body": "The simple answer is: you should remove <code>override val</code> from the GBoardImpl constructor. The full answer was given here in another question, but I can&#39;t seem to find it."}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 0, "creation_date": 1542215220, "post_id": 53304653, "comment_id": 93491610, "body": "I answered something similar recently: <a href=\"https://stackoverflow.com/questions/53179841/beginner-question-inheritance-why-isnt-my-age-constructor-parameter-used/53185727#53185727\" title=\"beginner question inheritance why isnt my age constructor parameter used\">stackoverflow.com/questions/53179841/&hellip;</a>.  There are other similar answers too, I&#39;m sure."}, {"owner": {"reputation": 1490, "user_id": 4424680, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c17ba831e770f869c0e6ed689f55ed5?s=128&d=identicon&r=PG&f=1", "display_name": "gringogordo", "link": "https://stackoverflow.com/users/4424680/gringogordo"}, "edited": false, "score": 0, "creation_date": 1542220159, "post_id": 53304653, "comment_id": 93493945, "body": "Thanks must have done inept searching.  Agree it&#39;s a dupe"}], "owner": {"reputation": 1490, "user_id": 4424680, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c17ba831e770f869c0e6ed689f55ed5?s=128&d=identicon&r=PG&f=1", "display_name": "gringogordo", "link": "https://stackoverflow.com/users/4424680/gringogordo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "closed_date": 1542218468, "answer_count": 0, "score": 0, "last_activity_date": 1542212624, "creation_date": 1542212624, "question_id": 53304653, "link": "https://stackoverflow.com/questions/53304653/passing-variable-to-parent-class-in-kotlin", "closed_reason": "Duplicate", "title": "passing variable to parent class in Kotlin", "body": "<p>I think this has been asked before but I'm not sure why it isn't working</p>\n\n<p>I have a couple of interfaces</p>\n\n<pre><code>interface SBoard {\n    val size: Int\n}\n\ninterface GBoard&lt;T&gt; : SquareBoard {\n}\n</code></pre>\n\n<p>with classes </p>\n\n<pre><code>open class SBoardImpl (override val size: Int) : SBoard {\n    lateinit var allCells: Array&lt;Array&lt;CellImpl&gt;&gt;\n\n    init {\n        println (\"Parent Generator: \" + this.size.toString())\n    }\n\n   ...\n}\n\nclass GBoardImpl&lt;T&gt; (override val size: Int): SBoardImpl (size), GBoard&lt;T&gt;{\n    lateinit var cellValues: Array&lt;Array&lt;Any?&gt;&gt;\n\n    init {\n        println (\"Child Initialisation:\" + super.size.toString())\n    }\n\n    ...\n}\n</code></pre>\n\n<p>when I create GBoardImpl like this </p>\n\n<pre><code>GameBoardImpl&lt;T&gt;(2)\n</code></pre>\n\n<p>e.g. </p>\n\n<pre><code>val g = createGBoard&lt;Char&gt;(2)\n</code></pre>\n\n<p>The size doesn't get passed to the super (SBoard) ?  I get output of </p>\n\n<blockquote>\n  <p>Parent Generator: 0</p>\n</blockquote>\n\n<p>I've ripped quite a bit out so I hope it still makes sense but essentially the SBoard init does get called (i.e. the parent) and the value of size is 0 instead of 2 (in this example).  All the examples I've seen (or at least the way I've read them) show that the inclusion of the parameter in the method signature should pass it up</p>\n\n<p>i.e. </p>\n\n<pre><code>class GBoardImpl&lt;T&gt; (override val size: Int): SBoardImpl (size)... \n</code></pre>\n\n<p>means that size gets passed to the SBoardImpl/Parent initialiser.  Is that a misunderstanding or can anyone tell me what I've done wrong ?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "edited": false, "score": 0, "creation_date": 1542213031, "post_id": 53304383, "comment_id": 93490355, "body": "What is the error you get under <code>setText</code>?"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1542213233, "post_id": 53304383, "comment_id": 93490480, "body": "Create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 994, "user_id": 8494980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc12bf6f2b6b1278753628f10ee32ff2?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Ghassan", "link": "https://stackoverflow.com/users/8494980/ali-ghassan"}, "edited": false, "score": 0, "creation_date": 1542213236, "post_id": 53304383, "comment_id": 93490482, "body": "there is no error in this code  ` if (TimeArrival==null) {         timearraiveId2.setText(&quot;N/A&quot;)     }` but he dosent show the text for n/a"}], "answers": [{"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 1, "last_activity_date": 1542214592, "creation_date": 1542214592, "answer_id": 53305225, "question_id": 53304383, "link": "https://stackoverflow.com/questions/53304383/kotlin-check-data-json-string-if-null/53305225#53305225", "title": "kotlin check data json string if null", "body": "<p>Replace:</p>\n\n<pre><code>try {\n    val sdf = SimpleDateFormat(\"KK:mm a\")\n    val netDate = Date(s.toLong() * 1000)\n    return sdf.format(netDate)\n} catch (e: Exception) {\n    return e.toString()\n\n}\n</code></pre>\n\n<p>with</p>\n\n<pre><code>try {\n    val sdf = SimpleDateFormat(\"KK:mm a\")\n    val netDate = Date(s.toLong() * 1000)\n    return sdf.format(netDate)\n} catch (e: Exception) {\n    return \"N/A\"\n}\n</code></pre>\n\n<p>You don't want the error itself showed inside the recyclerview, <br/>\nyou want <code>\"N/A\"</code>.  <br/>\nSo id time is <code>null</code> then the catch statement will return <code>\"N/A\"</code>.</p>\n"}], "owner": {"reputation": 994, "user_id": 8494980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc12bf6f2b6b1278753628f10ee32ff2?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Ghassan", "link": "https://stackoverflow.com/users/8494980/ali-ghassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1022, "favorite_count": 0, "accepted_answer_id": 53305225, "answer_count": 1, "score": -2, "last_activity_date": 1542214592, "creation_date": 1542211673, "last_edit_date": 1542214438, "question_id": 53304383, "link": "https://stackoverflow.com/questions/53304383/kotlin-check-data-json-string-if-null", "title": "kotlin check data json string if null", "body": "<p>l am try to build app for flight schedule via api data json . my app working fine without problem . only problem l have is time for flight . some flights has null value , so l want check if time is null return N/A . </p>\n\n<p>the result for time if the value in data json null . </p>\n\n<p><a href=\"https://i.stack.imgur.com/VameC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VameC.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>HandleJson </p>\n\n<pre><code>   private fun handleJson (jsonString: String?){\n\n            val jsonObj = JSONObject(jsonString)\n            val result = jsonObj.getJSONObject(\"result\")\n            val response = result.getJSONObject(\"response\")\n            val airport = response.getJSONObject(\"airport\")\n            val pluginData = airport.getJSONObject(\"pluginData\")\n            val schedule = pluginData.getJSONObject(\"schedule\")\n            val arrivals = schedule.getJSONObject(\"arrivals\")\n//        val data = arrivals.getJSONObject(\"data\")\n            val jsonArray = JSONArray(arrivals.get(\"data\").toString())\n\n            val list =  ArrayList&lt;FlightShdu&gt;()\n            var x = 0\n            while (x &lt; jsonArray.length()){\n\n                val jsonObject = jsonArray.getJSONObject(x)\n\n\n\n                list.add(FlightShdu(\n                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"identification\").getJSONObject(\"number\").getString(\"default\"),\n                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"airline\").getString(\"short\"),\n                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"status\").getJSONObject(\"generic\").getJSONObject(\"status\").getString(\"text\"),\n                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"airline\").getJSONObject(\"code\").getString(\"icao\"),\n                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"time\").getJSONObject(\"scheduled\").getString(\"departure\"),\n                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"airport\").getJSONObject(\"origin\").getJSONObject(\"code\").getString(\"iata\"),\n                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"aircraft\").getJSONObject(\"model\").getString(\"code\"),\n//                    for more information\n                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"time\").getJSONObject(\"real\").getString(\"departure\"),\n                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"time\").getJSONObject(\"estimated\").getString(\"arrival\")?: \"N/A\"\n//                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"time\").getJSONObject(\"estimated\").getString(\"arrival\"),\n//                    jsonObject.getJSONObject(\"flight\").getJSONObject(\"status\").getJSONObject(\"generic\").getJSONObject(\"status\").getString(\"diverted\")\n\n\n\n                    ))\n\n\n                x++\n            }\n            list.forEach(::println)\n\n            val adapter = ListAdapte(this@MainActivity,list)\n            flight_arrivel_list.adapter = adapter\n\n        }\n</code></pre>\n\n<p>intent activity </p>\n\n<pre><code>val  TimeArrival = bundle.getString(\"TimeArrival\")?: \"N/A\"\n    timearraiveId2.text=getDateTime(TimeArrival)\n\n   fun getDateTime(s: String): String? {\n        try {\n            val sdf = SimpleDateFormat(\"KK:mm a\")\n            val netDate = Date(s.toLong() * 1000)\n            return sdf.format(netDate)\n        } catch (e: Exception) {\n            return e.toString()\n\n        }\n    }\n</code></pre>\n\n<p>l try with this code ,but he doesn't work .  </p>\n\n<pre><code>  if (TimeArrival==null) {\n        timearraiveId2.setText(\"N/A\")\n    }\n</code></pre>\n"}, {"tags": ["kotlin", "android-livedata", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 2060, "user_id": 1646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0427346b6a25d32f75a7730187c7efa1?s=128&d=identicon&r=PG", "display_name": "RedDeckWins", "link": "https://stackoverflow.com/users/1646/reddeckwins"}, "edited": false, "score": 5, "creation_date": 1542212916, "post_id": 53304347, "comment_id": 93490281, "body": "Is there a reason you don&#39;t want to use postValue?"}, {"owner": {"reputation": 3027, "user_id": 2145504, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/769e20141cad3cf57b17b0a3b3e89db3?s=128&d=identicon&r=PG", "display_name": "kike", "link": "https://stackoverflow.com/users/2145504/kike"}, "reply_to_user": {"reputation": 2060, "user_id": 1646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0427346b6a25d32f75a7730187c7efa1?s=128&d=identicon&r=PG", "display_name": "RedDeckWins", "link": "https://stackoverflow.com/users/1646/reddeckwins"}, "edited": false, "score": 1, "creation_date": 1542270687, "post_id": 53304347, "comment_id": 93510609, "body": "@RedDeckWins. No, I just didn&#39;t take it into account but it is definitely the way to update MutableLiveData from a coroutine."}], "answers": [{"comments": [{"owner": {"reputation": 11165, "user_id": 2000300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/c8eI2.jpg?s=128&g=1", "display_name": "pdegand59", "link": "https://stackoverflow.com/users/2000300/pdegand59"}, "edited": false, "score": 2, "creation_date": 1542213036, "post_id": 53304616, "comment_id": 93490359, "body": "Don&#39;t call <code>getAdresseList()</code> inside the <code>withContext(Dispatchers.Main)</code> block because this will be run on the main thread. Call it outside so it&#39;s properly dispatched by <code>Dispatchers.Default</code> and use only the result on the main thread"}], "tags": [], "owner": {"reputation": 3027, "user_id": 2145504, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/769e20141cad3cf57b17b0a3b3e89db3?s=128&d=identicon&r=PG", "display_name": "kike", "link": "https://stackoverflow.com/users/2145504/kike"}, "is_accepted": false, "score": 4, "last_activity_date": 1542212433, "creation_date": 1542212433, "answer_id": 53304616, "question_id": 53304347, "link": "https://stackoverflow.com/questions/53304347/mutablelivedata-cannot-invoke-setvalue-on-a-background-thread-from-coroutine/53304616#53304616", "title": "MutableLiveData: Cannot invoke setValue on a background thread from Coroutine", "body": "<p>I just figured out that it's possible by using <code>withContext(Dispatchers.Main){}</code>:</p>\n\n<pre><code>object AddressList: MutableLiveData&lt;List&lt;Address&gt;&gt;()\nfun getAddressesLiveData(): LiveData&lt;List&lt;Address&gt;&gt; {\n    GlobalScope.launch {\n        withContext(Dispatchers.Main){ AddressList.value = getAddressList() }\n    }\n    return AddressList\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3027, "user_id": 2145504, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/769e20141cad3cf57b17b0a3b3e89db3?s=128&d=identicon&r=PG", "display_name": "kike", "link": "https://stackoverflow.com/users/2145504/kike"}, "edited": false, "score": 7, "creation_date": 1542270265, "post_id": 53304727, "comment_id": 93510383, "body": "Actually, I think this is the perfect <code>postValue()</code> usage scenario. There is no need to force Main Thread context."}], "tags": [], "owner": {"reputation": 11165, "user_id": 2000300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/c8eI2.jpg?s=128&g=1", "display_name": "pdegand59", "link": "https://stackoverflow.com/users/2000300/pdegand59"}, "is_accepted": false, "score": 16, "last_activity_date": 1542212886, "creation_date": 1542212886, "answer_id": 53304727, "question_id": 53304347, "link": "https://stackoverflow.com/questions/53304347/mutablelivedata-cannot-invoke-setvalue-on-a-background-thread-from-coroutine/53304727#53304727", "title": "MutableLiveData: Cannot invoke setValue on a background thread from Coroutine", "body": "<p>You can do one of the following : </p>\n\n<pre><code>object AddressList: MutableLiveData&lt;List&lt;Address&gt;&gt;()\nfun getAddressesLiveData(): LiveData&lt;List&lt;Address&gt;&gt; {\n    AddressList.value = listOf()\n    GlobalScope.launch {\n        AddressList.postValue(getAddressList())\n    }\n\nreturn AddressList\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>fun getAddressesLiveData(): LiveData&lt;List&lt;Address&gt;&gt; {\n    AddressList.value = listOf()\n    GlobalScope.launch {\n        val adresses = getAddressList()\n        withContext(Dispatchers.Main) {\n            AddressList.value = adresses\n        }\n    }\n    return AddressList\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 4, "last_activity_date": 1542276839, "creation_date": 1542276839, "answer_id": 53317071, "question_id": 53304347, "link": "https://stackoverflow.com/questions/53304347/mutablelivedata-cannot-invoke-setvalue-on-a-background-thread-from-coroutine/53317071#53317071", "title": "MutableLiveData: Cannot invoke setValue on a background thread from Coroutine", "body": "<p>Although others have pointed out that, in this case, the library provides its own method to post an operation to the main thread, coroutines provide a general solution that works regardless of a given library's functionality.</p>\n\n<p>The first step is to stop using <code>GlobalScope</code> for background jobs, doing this will lead to leaks where your activity, or scheduled job, or whatever unit of work you invoke this from, may get destroyed, and yet your job will continue in the background and even submit its results to the main thread. Here's what the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-global-scope/\" rel=\"nofollow noreferrer\">official documentation on <code>GlobalScope</code></a> states:</p>\n\n<blockquote>\n  <p>Application code usually should use application-defined CoroutineScope, using async or launch on the instance of GlobalScope is highly discouraged.</p>\n</blockquote>\n\n<p>You should define your own coroutine scope and its <code>coroutineContext</code> property should contain <code>Dispatchers.Main</code> as the dispatcher. Furthermore, the whole pattern of launching jobs within a function call and returning <code>LiveData</code> (which is basically another kind of <code>Future</code>), isn't the most convenient way to use coroutines. Instead you should have</p>\n\n<pre><code>suspend fun getAddresses() = withContext(Dispatchers.Default) { getAddressList() }\n</code></pre>\n\n<p>and at the call site you should <code>launch</code> a coroutine, within which you can now freely call <code>getAddresses()</code> as if it was a blocking method and get the addresses directly as a return value.</p>\n"}, {"tags": [], "owner": {"reputation": 2195, "user_id": 2472350, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/slD29.jpg?s=128&g=1", "display_name": "Amin Keshavarzian", "link": "https://stackoverflow.com/users/2472350/amin-keshavarzian"}, "is_accepted": false, "score": 3, "last_activity_date": 1566394456, "creation_date": 1566394456, "answer_id": 57592914, "question_id": 53304347, "link": "https://stackoverflow.com/questions/53304347/mutablelivedata-cannot-invoke-setvalue-on-a-background-thread-from-coroutine/57592914#57592914", "title": "MutableLiveData: Cannot invoke setValue on a background thread from Coroutine", "body": "<p>In my case, I had to add <strong>Dispatchers.Main</strong> to the launch arguments and it worked fine:</p>\n\n<pre><code> val job = GlobalScope.launch(Dispatchers.Main) {\n                    delay(1500)\n                    search(query)\n                }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4360, "user_id": 1868841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ADiwD.jpg?s=128&g=1", "display_name": "Waqar UlHaq", "link": "https://stackoverflow.com/users/1868841/waqar-ulhaq"}, "is_accepted": false, "score": 2, "last_activity_date": 1576684018, "creation_date": 1576684018, "answer_id": 59395584, "question_id": 53304347, "link": "https://stackoverflow.com/questions/53304347/mutablelivedata-cannot-invoke-setvalue-on-a-background-thread-from-coroutine/59395584#59395584", "title": "MutableLiveData: Cannot invoke setValue on a background thread from Coroutine", "body": "<p>If you want to updated UI by using <strong>Coroutines</strong>, there are 2 ways to achieve this </p>\n\n<p><strong>GlobalScope.launch(Dispatchers.Main):</strong></p>\n\n<pre><code>GlobalScope.launch(Dispatchers.Main) {\n    delay(1000)     // 1 sec delay\n    // call to UI thread\n}\n</code></pre>\n\n<p>And if you want some work to be done in background but after that you want to <strong>update UI</strong>, this can be achieved by the following:</p>\n\n<p><strong>withContext(Dispatchers.Main)</strong></p>\n\n<pre><code>GlobalScope.launch {\n    delay(1000)     // 1 sec delay\n\n    // do some background task\n\n    withContext(Dispatchers.Main) {\n            // call to UI thread\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7324, "user_id": 2652368, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/22TKg.jpg?s=128&g=1", "display_name": "Amir Hossein Ghasemi", "link": "https://stackoverflow.com/users/2652368/amir-hossein-ghasemi"}, "is_accepted": true, "score": 180, "last_activity_date": 1583437717, "last_edit_date": 1583437717, "creation_date": 1581163419, "answer_id": 60126585, "question_id": 53304347, "link": "https://stackoverflow.com/questions/53304347/mutablelivedata-cannot-invoke-setvalue-on-a-background-thread-from-coroutine/60126585#60126585", "title": "MutableLiveData: Cannot invoke setValue on a background thread from Coroutine", "body": "<p>Use <code>liveData.postValue(value)</code> instead of <code>liveData.value = value</code>. It is called asynchronous.</p>\n\n<p>From <a href=\"https://developer.android.com/reference/androidx/lifecycle/MutableLiveData#postValue(T)\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p><strong>postValue</strong> - Posts a task to a main thread to set the given value.</p>\n</blockquote>\n"}], "owner": {"reputation": 3027, "user_id": 2145504, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/769e20141cad3cf57b17b0a3b3e89db3?s=128&d=identicon&r=PG", "display_name": "kike", "link": "https://stackoverflow.com/users/2145504/kike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28628, "favorite_count": 11, "accepted_answer_id": 60126585, "answer_count": 6, "score": 87, "last_activity_date": 1583437717, "creation_date": 1542211574, "last_edit_date": 1552980531, "question_id": 53304347, "link": "https://stackoverflow.com/questions/53304347/mutablelivedata-cannot-invoke-setvalue-on-a-background-thread-from-coroutine", "title": "MutableLiveData: Cannot invoke setValue on a background thread from Coroutine", "body": "<p>I'm trying to trigger an update on LiveData from a coroutine:</p>\n\n<pre><code>object AddressList: MutableLiveData&lt;List&lt;Address&gt;&gt;()\nfun getAddressesLiveData(): LiveData&lt;List&lt;Address&gt;&gt; {\n    AddressList.value = listOf()\n    GlobalScope.launch {\n        AddressList.value = getAddressList()\n    }\n    return AddressList\n}\n</code></pre>\n\n<p>but I get the following error:</p>\n\n<blockquote>\n  <p>IllegalStateException: Cannot invoke setValue on a background thread</p>\n</blockquote>\n\n<p>Is there a way to make it work with coroutines?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 9311, "user_id": 214525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7684a686e233476c6713ced10a9cef41?s=128&d=identicon&r=PG", "display_name": "f1sh", "link": "https://stackoverflow.com/users/214525/f1sh"}, "edited": false, "score": 1, "creation_date": 1542209974, "post_id": 53303660, "comment_id": 93488391, "body": "What does your IDE tell you about the underlined parts of code?"}, {"owner": {"reputation": 81, "user_id": 2087498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQaDT.jpg?s=128&g=1", "display_name": "juicy_cesar", "link": "https://stackoverflow.com/users/2087498/juicy-cesar"}, "edited": false, "score": 0, "creation_date": 1542209981, "post_id": 53303660, "comment_id": 93488395, "body": "Can you please put the java code too?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1542210197, "post_id": 53303660, "comment_id": 93488527, "body": "Cuz it should be <code>val postsMap: HashMap&lt;String, Any?&gt; = hashMapOf()</code>"}, {"owner": {"reputation": 6925, "user_id": 882251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fcbed75edf82be759579f3fed59ab55?s=128&d=identicon&r=PG&f=1", "display_name": "Darwind", "link": "https://stackoverflow.com/users/882251/darwind"}, "edited": false, "score": 0, "creation_date": 1542213092, "post_id": 53303660, "comment_id": 93490396, "body": "Have you tried to write the code in Java and get Android Studio (I&#39;m assuming you&#39;re using Android Studio) to convert the code for you and see how it converts it to understand what&#39;s going wrong?"}, {"owner": {"reputation": 1, "user_id": 10652739, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Hm0FkD948ck/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCBxjtr_W3KAEKTa5gVcTTLTL-Gsg/mo/photo.jpg?sz=128", "display_name": "Mr. lee", "link": "https://stackoverflow.com/users/10652739/mr-lee"}, "edited": false, "score": 0, "creation_date": 1542243180, "post_id": 53303660, "comment_id": 93502715, "body": "oh thanks  I have solved this problem."}], "answers": [{"tags": [], "owner": {"reputation": 9262, "user_id": 1426469, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a99e0f9b6711f185ae3fdefbc9dcaa0e?s=128&d=identicon&r=PG", "display_name": "Leo Aso", "link": "https://stackoverflow.com/users/1426469/leo-aso"}, "is_accepted": false, "score": 0, "last_activity_date": 1542280369, "creation_date": 1542280369, "answer_id": 53318204, "question_id": 53303660, "link": "https://stackoverflow.com/questions/53303660/i-am-modifying-java-with-kotlin-but-i-am-struggling-to-fix-the-wrong-partsedit/53318204#53318204", "title": "I am modifying Java with Kotlin, but I am struggling to fix the wrong parts(edit )", "body": "<p>HashMap requires type parameters. Change first line to</p>\n\n<pre><code>val postsMap = HashMap&lt;String, String&gt;()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>val postsMap = HashMap&lt;String, Any?&gt;()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10652739, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Hm0FkD948ck/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCBxjtr_W3KAEKTa5gVcTTLTL-Gsg/mo/photo.jpg?sz=128", "display_name": "Mr. lee", "link": "https://stackoverflow.com/users/10652739/mr-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1542280369, "creation_date": 1542209518, "last_edit_date": 1542243088, "question_id": 53303660, "link": "https://stackoverflow.com/questions/53303660/i-am-modifying-java-with-kotlin-but-i-am-struggling-to-fix-the-wrong-partsedit", "title": "I am modifying Java with Kotlin, but I am struggling to fix the wrong parts(edit )", "body": "<p>I would appreciate it if you could help me.</p>\n\n<p><strong>activity.kotlin</strong></p>\n\n<pre><code>var postsMap = HashMap&lt;&gt;() //Here error\npostsMap.put(\"uid\", current_user_id)\npostsMap.put(\"date\", saveCurrentDate)\npostsMap.put(\"time\", saveCurrentTime)\npostsMap.put(\"description\", Description)\npostsMap.put(\"postimage\", downloadUrl)\npostsMap.put(\"profileimage\", userProfileImage)\npostsMap.put(\"fullname\", userFullName)\nPostsRef.child(current_user_id + postRandomName).updateChildren(postsMap)//Here error\n    .addOnCompleteListener(object : OnCompleteListener {//Here error\n        override fun onComplete(task: Task&lt;*&gt;) { //Here error\n            if (task.isSuccessful) {\n                SendUserToMainActivity()\n                Toast.makeText(\n                    this@PostActivity,\n                    \"New Post is updated successfully.\",\n                    Toast.LENGTH_SHORT\n                ).show()\n\n            } else {\n                Toast.makeText(\n                    this@PostActivity,\n                    \"Error Occured while updating your post.\",\n                    Toast.LENGTH_SHORT\n                ).show()\n\n            }\n        }\n    })\n</code></pre>\n\n<p>sorry for the inaccurate question.\nThank you</p>\n\n<p>I corrected the code through answer. Thank you.</p>\n\n<p>val postsMap: HashMap = hashMapOf()</p>\n\n<p>PostsRef!!.child(current_user_id + postRandomName).updateChildren(postsMap)</p>\n"}, {"tags": ["android", "asynchronous", "kotlin", "crash", "coroutine"], "comments": [{"owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "edited": false, "score": 1, "creation_date": 1542208730, "post_id": 53303358, "comment_id": 93487641, "body": "Whats the error? Please post the stacktrace from the crash"}], "answers": [{"tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": false, "score": 2, "last_activity_date": 1542226792, "creation_date": 1542226792, "answer_id": 53308156, "question_id": 53303358, "link": "https://stackoverflow.com/questions/53303358/kotlin-async-exception-handling/53308156#53308156", "title": "kotlin async exception handling", "body": "<p>In your second example, if you add <code>Thread.sleep(1000)</code> after your <code>println(\"main end\")</code> statement you will see an exception as well. Without the <code>sleep</code> the application ends before the exception is thrown:</p>\n\n<pre><code>Exception in thread \"DefaultDispatcher-worker-3\" java.lang.Exception: aaa\nat de.e2.app$Companion$main$job$1$1.invokeSuspend(AsyncProblem2.kt:26)\nat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:32)\nat kotlinx.coroutines.DispatchedTask.run(Dispatched.kt:236)\nat kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:594)\nat kotlinx.coroutines.scheduling.CoroutineScheduler.access$runSafely(CoroutineScheduler.kt:60)\nat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:742)\n</code></pre>\n\n<p>In both cases you run into a standard behavior of structured concurrency introduced with Kotlin 1.3 (see <a href=\"https://medium.com/@elizarov/structured-concurrency-722d765aa952\" rel=\"nofollow noreferrer\">https://medium.com/@elizarov/structured-concurrency-722d765aa952</a>). </p>\n\n<p>If in an <code>async</code> block an exception is thrown, the own coroutine is cancelled and the parent coroutines as well: see <a href=\"https://stackoverflow.com/questions/53238495/kotlin-coroutine-cant-handle-exception/53240861#53240861\">Kotlin coroutine can&#39;t handle exception</a> </p>\n"}, {"tags": [], "owner": {"reputation": 1960, "user_id": 1094333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k388L.png?s=128&g=1", "display_name": "nglauber", "link": "https://stackoverflow.com/users/1094333/nglauber"}, "is_accepted": true, "score": 15, "last_activity_date": 1562212841, "last_edit_date": 1592644375, "creation_date": 1562212841, "answer_id": 56880495, "question_id": 53303358, "link": "https://stackoverflow.com/questions/53303358/kotlin-async-exception-handling/56880495#56880495", "title": "kotlin async exception handling", "body": "<p>You can find your answer here:\n<a href=\"https://proandroiddev.com/kotlin-coroutines-patterns-anti-patterns-f9d12984c68e\" rel=\"noreferrer\">https://proandroiddev.com/kotlin-coroutines-patterns-anti-patterns-f9d12984c68e</a></p>\n<p>To summarise, there are a few ways to catch exceptions with <code>async</code>.</p>\n<h1>1 - Wrap <code>async</code> call with <code>supervisorScope</code></h1>\n<pre><code>launch {\n    supervisorScope {\n        val task = async {\n            methodThatThrowsException()\n        }\n        try {\n            updateUI(&quot;Ok ${task.await()}&quot;)\n        } catch (e: Throwable) {\n            showError(&quot;Erro! ${e.message}&quot;)\n        }\n    }\n}\n</code></pre>\n<h1>2 - Passing a <code>SupervisorJob</code> as param</h1>\n<pre><code>launch { \n    // parentJob (optional) is the parent Job of the CoroutineContext\n    val task = async(SupervisorJob(parentJob)) {\n        methodThatThrowsException()\n    }\n    try {\n        updateUI(&quot;Ok ${task.await()}&quot;)\n    } catch (e: Throwable) {\n        showError(&quot;Erro! ${e.message}&quot;)\n    }\n}\n</code></pre>\n<h1>3 - Wrapping <code>async</code> with <code>coroutineScope</code></h1>\n<pre><code>launch {\n    try {\n        coroutineScope {\n            val task = async {\n                methodThatThrowsException()\n            }\n            updateUI(&quot;Ok ${task.await()}&quot;)\n        }\n    } catch (e: Throwable) {\n        showError(&quot;Erro! ${e.message}&quot;)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 148, "user_id": 1264648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5840500297fa8e113706118b6e427c9?s=128&d=identicon&r=PG", "display_name": "Leres Aldtai", "link": "https://stackoverflow.com/users/1264648/leres-aldtai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9563, "favorite_count": 4, "accepted_answer_id": 56880495, "answer_count": 2, "score": 5, "last_activity_date": 1562212841, "creation_date": 1542208502, "last_edit_date": 1542209303, "question_id": 53303358, "link": "https://stackoverflow.com/questions/53303358/kotlin-async-exception-handling", "title": "kotlin async exception handling", "body": "<p>Given the following snippet, i do not understand why my android app crashes. I tested in a standalone kotlin app but this does not happen.</p>\n\n<pre><code>class LoginActivity : AppCompatActivity(), CoroutineScope\n{\n     lateinit var job: Job\n    override val coroutineContext: CoroutineContext\n        get() = Dispatchers.Main + job\n\n\n   override fun onCreate(savedInstanceState: Bundle?)\n    {\n        super.onCreate(savedInstanceState)\n        job = Job()\n\n        try\n        {\n            launch()\n            {\n                try\n                {\n                    var res = async { test() }\n\n                    res.await()\n\n                } \n                catch (e2: java.lang.Exception)\n                {\n\n                }\n            }\n\n        }\n        catch (e: java.lang.Exception)\n        {\n\n\n        }\n    }\n\n    fun test(): String\n    {\n        throw java.lang.Exception(\"test ex\")\n        return \"\";\n    }\n}\n\n\n --------- beginning of crash\nE/AndroidRuntime: FATAL EXCEPTION: main\n    Process: ro.ingr.ingeeasafety, PID: 11298\n    java.lang.Exception: test ex\n        at ro.ingr.ingeeasafety.activities.LoginActivity.test(LoginActivity.kt:72)\n        at ro.ingr.ingeeasafety.activities.LoginActivity$onCreate$1$res$1.invokeSuspend(LoginActivity.kt:48)\n        at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:32)\n        at kotlinx.coroutines.DispatchedTask.run(Dispatched.kt:236)\n        at android.os.Handler.handleCallback(Handler.java:751)\n        at android.os.Handler.dispatchMessage(Handler.java:95)\n        at android.os.Looper.loop(Looper.java:154)\n        at android.app.ActivityThread.main(ActivityThread.java:6119)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n</code></pre>\n\n<p>Standalone kotlin app code, execution reaches \"main end\" println</p>\n\n<pre><code>class app\n{\n    companion object :CoroutineScope\n    {\n        lateinit var job: Job\n        override val coroutineContext: CoroutineContext\n            get() = Dispatchers.Default+ job\n\n        init\n        {\n            job=Job()\n        }\n\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;)\n        {\n            launch()\n            {\n                try\n                {\n                    async()\n                    {\n                        println(\"async start\")\n                        throw Exception(\"aaa\")\n\n                    }.await()\n                }\n                catch (e: Exception)\n                {\n                    println(\"async exception\")\n                }\n            }\n\n\n            println(\"main end\")\n\n        }\n    }\n}\n</code></pre>\n\n<p>I am trying to create a flow where i load something from somewhere and if the load operation fails my app does not crash. I was expecting that the exception got caught in the handlers defined.</p>\n\n<p>LE: I added the crash stack trace.</p>\n"}, {"tags": ["java", "postgresql", "kotlin", "jooq", "timescaledb"], "comments": [{"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 1, "creation_date": 1542625780, "post_id": 53303207, "comment_id": 93622548, "body": "What exactly doesn&#39;t work? I&#39;m assuming you&#39;ve written some <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/plain-sql-templating\" rel=\"nofollow noreferrer\">plain SQL templating functions</a> like <code>timeBucket()</code>. What&#39;s the implementation there?"}], "answers": [{"tags": [], "owner": {"reputation": 1121, "user_id": 2937875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da97c9604533eb5c853ce676c9e77093?s=128&d=identicon&r=PG", "display_name": "Grigory K", "link": "https://stackoverflow.com/users/2937875/grigory-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1589367207, "creation_date": 1589367207, "answer_id": 61772735, "question_id": 53303207, "link": "https://stackoverflow.com/questions/53303207/jooq-and-timescaledb-how-to-implement-a-basic-time-bucket-statement-in-jooq/61772735#61772735", "title": "JOOQ and TimescaleDB - How to implement a basic time_bucket statement in JOOQ", "body": "<p>SQL:</p>\n\n<pre><code>create table mytable (moment timestamp with timezone, ...)\nselect create_hypertable('mytable', 'moment', chunk_time_interval =&gt; INTERVAL '5 minute');\n</code></pre>\n\n<p>Select with jooq:</p>\n\n<pre><code>import org.jooq.types.YearToSecond\nimport java.time.Duration\nimport org.jooq.impl.DSL.count\nimport org.jooq.impl.DSL.field\n\n// custom function to combine arguments Duration and OffsetDateTime for TimeBucket2\nprivate fun timeBucket(d: Duration, field: Field&lt;OffsetDateTime&gt;): Field&lt;OffsetDateTime&gt; {\n    val f = TimeBucket2()\n    f.setBucketWidth(YearToSecond.valueOf(d))\n    f.setTs(field)\n    return f.asField()\n}\n\n// field name alias\nval BUCKET = field(\"bucket\", OffsetDateTime::class.java)\nval COUNT = field(\"count\", Int::class.java)\n\nval ctx = DSL.using(conn, SQLDialect.POSTGRES, settings)\n\nval recs = ctx.select(\n        timeBucket(Duration.ofMinutes(5), MYTABLE.MOMENT).`as`(BUCKET),\n        count().`as`(COUNT)\n).from(MYTABLE)\n        .groupBy(BUCKET)\n        .fetch()\n\nfor (rec in recs) {\n    println(rec[BUCKET] + \" =&gt; \" + rec[COUNT])\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 10263515, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2eMmp.png?s=128&g=1", "display_name": "S&#246;ren Linnemann", "link": "https://stackoverflow.com/users/10263515/s%c3%b6ren-linnemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1589367207, "creation_date": 1542207928, "last_edit_date": 1542625707, "question_id": 53303207, "link": "https://stackoverflow.com/questions/53303207/jooq-and-timescaledb-how-to-implement-a-basic-time-bucket-statement-in-jooq", "title": "JOOQ and TimescaleDB - How to implement a basic time_bucket statement in JOOQ", "body": "<p>I would like to implement a basic time_bucket statement in JOOQ.</p>\n\n<p>If I run this Statement in the console it works perfekly fine:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT time_bucket('5 minutes', time) as t, avg(average)\nfrom TABLE\nGROUP BY t\n</code></pre>\n\n<p>If i try to implement it with JOOQ I have the Problem that the generated routines do not work, because I cannot add the intervals.</p>\n\n<p>I want something like the following code, but the Interval '5 minutes' doesn't work:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>dslContext.select(timeBucket('5 minutes', TABLE.TIME), avg(TABLE.AVERAGE))\n                .from(TABLE)\n                .groupBy(timeBucket8('5 minutes', TABLE.TIME))\n                .fetch())\n</code></pre>\n\n<p>Is there a simple way to implement the Intervals?</p>\n"}, {"tags": ["java", "memory", "kotlin", "jvm", "out-of-memory"], "comments": [{"owner": {"reputation": 661, "user_id": 6162023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6ebdf352fa25d07b1d68eb2b1ad3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Sofo Gial", "link": "https://stackoverflow.com/users/6162023/sofo-gial"}, "edited": false, "score": 0, "creation_date": 1542205999, "post_id": 53302540, "comment_id": 93485817, "body": "What size is the CSV you are reading? What&#39;s the -Xmx value of your JVM (if you defined any yourself) ?"}, {"owner": {"reputation": 3529, "user_id": 2625772, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0QjpB.jpg?s=128&g=1", "display_name": "AnOldSoul", "link": "https://stackoverflow.com/users/2625772/anoldsoul"}, "reply_to_user": {"reputation": 661, "user_id": 6162023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6ebdf352fa25d07b1d68eb2b1ad3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Sofo Gial", "link": "https://stackoverflow.com/users/6162023/sofo-gial"}, "edited": false, "score": 0, "creation_date": 1542206053, "post_id": 53302540, "comment_id": 93485849, "body": "Sorry I edited the question. its 6422"}, {"owner": {"reputation": 661, "user_id": 6162023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6ebdf352fa25d07b1d68eb2b1ad3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Sofo Gial", "link": "https://stackoverflow.com/users/6162023/sofo-gial"}, "edited": false, "score": 0, "creation_date": 1542206187, "post_id": 53302540, "comment_id": 93485951, "body": "In bytes? Also, did you define the -Xmx anywhere or is it default?"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1542207483, "post_id": 53302540, "comment_id": 93486812, "body": "I guess the answers have solved the problem, so this is to solve another one: replace <code>i in 0 until it.size()-1</code> with <code>i in 0 until it.size()</code> or <code>i in 0..it.size()-1</code> because the code as it is loses the last line."}], "answers": [{"comments": [{"owner": {"reputation": 3597, "user_id": 7946807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UkEte.png?s=128&g=1", "display_name": "Schidu Luca", "link": "https://stackoverflow.com/users/7946807/schidu-luca"}, "edited": false, "score": 0, "creation_date": 1542207940, "post_id": 53302754, "comment_id": 93487134, "body": "Did you try this ? I don&#39;t think this will help, as OP is getting <code>GC overhead limit exceeded</code>, that means there are a lot of objects in heap"}, {"owner": {"reputation": 3221, "user_id": 4727666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xzs0NoBGYUM/AAAAAAAAAAI/AAAAAAAAAsI/OvJLK1sQo0k/photo.jpg?sz=128", "display_name": "Julio Daniel Reyes", "link": "https://stackoverflow.com/users/4727666/julio-daniel-reyes"}, "reply_to_user": {"reputation": 3597, "user_id": 7946807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UkEte.png?s=128&g=1", "display_name": "Schidu Luca", "link": "https://stackoverflow.com/users/7946807/schidu-luca"}, "edited": false, "score": 0, "creation_date": 1542209336, "post_id": 53302754, "comment_id": 93487982, "body": "I agree that StringBuilder will help, but this will also help, because this is the cause of the GC having to run that many times. rows.add(output) -&gt; rows.add(&quot;row1&quot;); rows.add(output) -&gt; rows.add(&quot;row1row2&quot;); rows.add(output) -&gt; rows.add(&quot;row1row2row3&quot;); rows.add(output) -&gt; rows.add(&quot;row1row2row3...row6422&quot;);"}, {"owner": {"reputation": 3597, "user_id": 7946807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UkEte.png?s=128&g=1", "display_name": "Schidu Luca", "link": "https://stackoverflow.com/users/7946807/schidu-luca"}, "edited": false, "score": 0, "creation_date": 1542209869, "post_id": 53302754, "comment_id": 93488296, "body": "this does not affect in any way how many time GC runs <code>rows.add(output)</code>, the string just keeps getting bigger, OP&#39;s mistake"}, {"owner": {"reputation": 3221, "user_id": 4727666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xzs0NoBGYUM/AAAAAAAAAAI/AAAAAAAAAsI/OvJLK1sQo0k/photo.jpg?sz=128", "display_name": "Julio Daniel Reyes", "link": "https://stackoverflow.com/users/4727666/julio-daniel-reyes"}, "reply_to_user": {"reputation": 3597, "user_id": 7946807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UkEte.png?s=128&g=1", "display_name": "Schidu Luca", "link": "https://stackoverflow.com/users/7946807/schidu-luca"}, "edited": false, "score": 0, "creation_date": 1542210286, "post_id": 53302754, "comment_id": 93488598, "body": "The string keeps getting bigger, running out of heap memory, will cause the GC to run. GC has been trying to free the memory but is pretty much unable to get any job done, as rows content cannot be garbage collected."}], "tags": [], "owner": {"reputation": 3221, "user_id": 4727666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xzs0NoBGYUM/AAAAAAAAAAI/AAAAAAAAAsI/OvJLK1sQo0k/photo.jpg?sz=128", "display_name": "Julio Daniel Reyes", "link": "https://stackoverflow.com/users/4727666/julio-daniel-reyes"}, "is_accepted": false, "score": 4, "last_activity_date": 1542207814, "last_edit_date": 1542207814, "creation_date": 1542206481, "answer_id": 53302754, "question_id": 53302540, "link": "https://stackoverflow.com/questions/53302540/out-of-memory-error-in-kotlin-when-looping-through-a-medium-size-data-set/53302754#53302754", "title": "Out of memory error in Kotlin when looping through a medium size data set", "body": "<p>I think there is a bug in your code</p>\n\n<pre><code>records.forEach() {\n    output = \"\" // clear output ;)\n    ...\n}\n</code></pre>\n\n<p>Compare it to your java code</p>\n\n<pre><code>for (CSVRecord record : records) {\n    StringBuilder builder = new StringBuilder(); // clear builder\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3597, "user_id": 7946807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UkEte.png?s=128&g=1", "display_name": "Schidu Luca", "link": "https://stackoverflow.com/users/7946807/schidu-luca"}, "is_accepted": true, "score": 3, "last_activity_date": 1542207744, "last_edit_date": 1542207744, "creation_date": 1542206984, "answer_id": 53302927, "question_id": 53302540, "link": "https://stackoverflow.com/questions/53302540/out-of-memory-error-in-kotlin-when-looping-through-a-medium-size-data-set/53302927#53302927", "title": "Out of memory error in Kotlin when looping through a medium size data set", "body": "<p>Use a <code>StringBuilder</code> in your kotlin code as well. You are creating a log of <code>String</code> objects in heap. String is immutable and this code:</p>\n\n<pre><code>var output = \"\"\noutput = output + \",\"\n</code></pre>\n\n<p>is creating two objects in heap, although you have only reference to one of them. So the other one is eligible for GC to remove it. GC is \"working\" too hard in your case, that's why you get <code>java.lang.OutOfMemoryError: GC overhead limit exceeded</code>.</p>\n\n<pre><code>fun readCSVFile(filePath: String): List&lt;String&gt; {\n    val reader = FileReader(filePath)\n    val records = CSVFormat.DEFAULT.parse(reader)\n    val rows = mutableListOf&lt;String&gt;()\n\n    var output = StringBuilder(\"\")\n    records.forEach() {\n        output = StringBuilder(\"\")\n        val size = it.size()\n        for (i in 0 until it.size()-1) {\n            output = output.append(it.get(i) + \",\")\n        }\n        output.deleteCharAt(output.length - 1)\n        rows.add(output.toString())\n    }\n    return rows\n}\n</code></pre>\n\n<p>You code will also run a lot faster, as creating a new object is quite costly.</p>\n"}, {"tags": [], "owner": {"reputation": 1865, "user_id": 3703819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/822bb82fae2070a74869ea657ee2759d?s=128&d=identicon&r=PG&f=1", "display_name": "dey", "link": "https://stackoverflow.com/users/3703819/dey"}, "is_accepted": false, "score": 0, "last_activity_date": 1542210229, "creation_date": 1542210229, "answer_id": 53303892, "question_id": 53302540, "link": "https://stackoverflow.com/questions/53302540/out-of-memory-error-in-kotlin-when-looping-through-a-medium-size-data-set/53303892#53303892", "title": "Out of memory error in Kotlin when looping through a medium size data set", "body": "<p>You have two problems in your Kotlin code:</p>\n\n<ol>\n<li>You are using strings and string concatenation - which is costly operation. You should use StringBuilder as well.</li>\n<li>You are setting <code>output = \"\"</code> outside of the foreach loop - for each iteration, you have all previous rows inside output</li>\n</ol>\n"}], "owner": {"reputation": 3529, "user_id": 2625772, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0QjpB.jpg?s=128&g=1", "display_name": "AnOldSoul", "link": "https://stackoverflow.com/users/2625772/anoldsoul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1585, "favorite_count": 0, "accepted_answer_id": 53302927, "answer_count": 3, "score": 2, "last_activity_date": 1542210229, "creation_date": 1542205763, "last_edit_date": 1542206041, "question_id": 53302540, "link": "https://stackoverflow.com/questions/53302540/out-of-memory-error-in-kotlin-when-looping-through-a-medium-size-data-set", "title": "Out of memory error in Kotlin when looping through a medium size data set", "body": "<p>I am running the below loop in Kotlin and is throwing an out of memory error. I am running this for reading the rows in a csv file. Size of \"records\" is 6422.</p>\n\n<pre><code>fun readCSVFile(filePath: String): List&lt;String&gt; {\n    val reader = FileReader(filePath)\n    val records = CSVFormat.DEFAULT.parse(reader)\n    val rows = mutableListOf&lt;String&gt;()\n\n    var output = \"\"\n    records.forEach() {\n        val size = it.size()\n        for (i in 0 until it.size()-1) {\n            output = output + it.get(i) + \",\"\n        }\n        output.dropLast(1)\n        rows.add(output)\n    }\n    return rows\n}\n</code></pre>\n\n<p>Below is the exception I get.</p>\n\n<pre><code>Exception in thread \"main\" java.lang.OutOfMemoryError: GC overhead limit exceeded\nat java.util.Arrays.copyOf(Arrays.java:3332)\nat java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:124)\nat java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:448)\nat java.lang.StringBuilder.append(StringBuilder.java:136)\nat trivago.ti.tools.FileProcessor.readCSVFile(FileProcessor.kt:16)\nat trivago.ti.tools.ComparatorMainKt.main(ComparatorMain.kt:25)\n</code></pre>\n\n<p>I have the same logic executing in Java but it works fine. Below is what I have in Java.</p>\n\n<pre><code>private static List&lt;String&gt; readCSVFile(String filePath) throws IOException {\n    Reader in = new FileReader(filePath);\n    Iterable&lt;CSVRecord&gt; records = CSVFormat.DEFAULT.parse(in);\n    List&lt;String&gt; rows = new ArrayList&lt;&gt;();\n    for (CSVRecord record : records) {\n        StringBuilder builder = new StringBuilder();\n        for (int i = 0; i &lt; record.size(); i++)\n            builder.append(record.get(i) + \",\");\n        builder.deleteCharAt(builder.length() - 1);\n        rows.add(builder.toString());\n    }\n    return rows;\n}\n</code></pre>\n\n<p>Why is Kotlin having a problem with this? Am I doing something wrong with the loop? Any help would be much appreciated as I'm a newbie to Kotlin.</p>\n"}, {"tags": ["android", "string", "url", "networking", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2124, "user_id": 6325119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10209015392040147/picture?type=large", "display_name": "Joel Brostr&#246;m", "link": "https://stackoverflow.com/users/6325119/joel-brostr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1542205239, "post_id": 53302244, "comment_id": 93485303, "body": "I actually used Enum before I tried to remodel it with structs/ data classes. When googleing &quot;Enum android&quot; the first result is an article titled &quot;Android Performance: Avoid using ENUM on Android&quot; by Ankit Sinhal. This is what led me to the conclution Enum was to be avoided at all costs. Can you do this without the Enums?  article: <a href=\"https://android.jlelse.eu/android-performance-avoid-using-enum-on-android-326be0794dc3\" rel=\"nofollow noreferrer\">android.jlelse.eu/&hellip;</a>"}, {"owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "reply_to_user": {"reputation": 2124, "user_id": 6325119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10209015392040147/picture?type=large", "display_name": "Joel Brostr&#246;m", "link": "https://stackoverflow.com/users/6325119/joel-brostr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1542205983, "post_id": 53302244, "comment_id": 93485801, "body": "@JoelBrostr&#246;m I think <a href=\"https://www.reddit.com/r/androiddev/comments/7so7ne/you_should_strictly_avoid_using_enums_on_android/\" rel=\"nofollow noreferrer\">this</a> is a good discussion of that post. To summarise, it&#39;s the decision between maintainability and readability, or a <i>slight</i> performance optimisation (a matter of kilobytes) Up to you, I can update to not use enums if necessary"}, {"owner": {"reputation": 2124, "user_id": 6325119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10209015392040147/picture?type=large", "display_name": "Joel Brostr&#246;m", "link": "https://stackoverflow.com/users/6325119/joel-brostr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1542212158, "post_id": 53302244, "comment_id": 93489802, "body": "Never have I been so glad to stand corrected! Would it not be that I spent 2 hours refactoring my Enum code I would be jumping in excitement."}], "tags": [], "owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "is_accepted": true, "score": 1, "last_activity_date": 1542204852, "creation_date": 1542204852, "answer_id": 53302244, "question_id": 53301573, "link": "https://stackoverflow.com/questions/53301573/manage-and-build-url-strings-from-a-collection-of-substrings-aka-build-request/53302244#53302244", "title": "Manage and build Url/strings from a collection of substrings (aka build request urls)", "body": "<p>You can create an object <code>Url</code> which is in charge of building up your URL string.</p>\n\n<p>You can build up Url by passing in your selected options through the constructor.</p>\n\n<p>When the object is constructed, you can then call <code>toString</code> which will concatenate and return the values together.</p>\n\n<pre><code>class Url ( var protocol : Protocol, \n           var baseUrl : BaseUrl, \n           var apiEndpoint : ApiEndpoint, \n           var webUrl : WebUrl, \n           var requestEnvironment : RequestEnvironment) {\n\n    override fun toString() : String {\n        return protocol.value + \n            baseUrl.value + \n            apiEndpoint.value + \n            webUrl.value + \n            requestEnvironment.value\n    }\n}\n</code></pre>\n\n<p>To add another level of safety when working with your Strings, I took the liberty of converting them to enums. This will give you the benefit of allowing you to limit the possible values which can be set:</p>\n\n<pre><code>enum class Protocol(val value : String) {\n    HTTP(\"http://\"),\n    HTTPS(\"https://\")\n}\n\nenum class BaseUrl(val value : String) {\n    BASE_PROD(\"url_prod\"),\n    BASE_DEV(\"url_dev\"),\n    BASE_TEST(\"url_test\")\n}\n\nenum class ApiEndpoint(val value : String) {\n    GET_USER(\"endpoint_get_user\"),\n    LOGIN(\"endpoint_login\"),\n    REGISTER(\"endpoint_get\"),\n    FETCH_HISTORY(\"endpoint_fetch_history\")\n}\n\nenum class WebUrl(val value : String) {\n    HOME(\"path_home\"),\n    BALANCE(\"path_balance\"),\n    MANAGE_SUBSCRIPTION(\"path_manage_subscription\")\n}\n\nenum class RequestEnvironment(val value : String) {\n    MOBILE(\"query_mobile\"),\n    DESKTOP(\"query_desktop\")\n}\n</code></pre>\n\n<p>Finally, here is an example of how you can now build your URL:</p>\n\n<pre><code>fun main() {\n\n    val url : Url = Url(Protocol.HTTP, \n                        BaseUrl.BASE_DEV, \n                        ApiEndpoint.GET_USER, \n                        WebUrl.HOME,\n                        RequestEnvironment.MOBILE);\n\n    println(url.toString())\n}\n</code></pre>\n"}], "owner": {"reputation": 2124, "user_id": 6325119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10209015392040147/picture?type=large", "display_name": "Joel Brostr&#246;m", "link": "https://stackoverflow.com/users/6325119/joel-brostr%c3%b6m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "accepted_answer_id": 53302244, "answer_count": 1, "score": 0, "last_activity_date": 1542204852, "creation_date": 1542202708, "question_id": 53301573, "link": "https://stackoverflow.com/questions/53301573/manage-and-build-url-strings-from-a-collection-of-substrings-aka-build-request", "title": "Manage and build Url/strings from a collection of substrings (aka build request urls)", "body": "<p>I have following groups of string and would like to create a string following the syntax: substr1.substr2.substr3 = substr1 + substr2 + substr3</p>\n\n<pre><code>data class Protocol( val http: String = \"http://\",\n                     val https: String = \"https://\")\n\ndata class BaseUrl( val baseProd: String = \"url_prod\",\n                    val baseDev: String = \"url_dev\",\n                    val baseTest: String = \"url_test\")\n\ndata class ApiEndpoint( val GET_USER: String = \"endpoint_get_user\",\n                        val LOGIN: String = \"endpoint_login\",\n                        val REGISTER: String = \"endpoint_get\",\n                        val FETCH_HISTORY: String = \"endpoint_fetch_history\")\n\ndata class WebUrl( val HOME: String = \"path_home\",\n                   val BALANCE: String = \"path_balance\",\n                   val MANAGE_SUBSCRIPTION: String = \"path_manage_subscription\")\n\ndata class RequestEnvironment( val mobile: String = \"query_mobile\",\n                               val desktop: String = \"query_desktop\")\n</code></pre>\n\n<p>My goal is to make something that build the strings like this</p>\n\n<pre><code>UrlFactory.https.baseDev.GET_USER     //result: https://url_dev/get_user\nUrlFactory.https.baseProd.HOME.mobile //result: https://url_prod/home?mobile=1\nUrlFactory.http.baseDev.BALANCE       //result: http://url_dev/balance\n</code></pre>\n\n<p>Have anyone built a nice way to handle url strings dynamically like this?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 968, "user_id": 5511947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDYhnOYieM0/AAAAAAAAAAI/AAAAAAAAC7M/UTSsQXWNTj4/photo.jpg?sz=128", "display_name": "Vairavan", "link": "https://stackoverflow.com/users/5511947/vairavan"}, "edited": false, "score": 0, "creation_date": 1542333291, "post_id": 53303081, "comment_id": 93540865, "body": "Any reason to host view model factory in app component over that of activity and fragment?"}, {"owner": {"reputation": 658, "user_id": 4182946, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-Cbh2k0RN26U/AAAAAAAAAAI/AAAAAAAAADE/3unk-s0QwlI/photo.jpg?sz=128", "display_name": "TooLazy", "link": "https://stackoverflow.com/users/4182946/toolazy"}, "reply_to_user": {"reputation": 968, "user_id": 5511947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDYhnOYieM0/AAAAAAAAAAI/AAAAAAAAC7M/UTSsQXWNTj4/photo.jpg?sz=128", "display_name": "Vairavan", "link": "https://stackoverflow.com/users/5511947/vairavan"}, "edited": false, "score": 0, "creation_date": 1542357432, "post_id": 53303081, "comment_id": 93547484, "body": "@Vairavan, do you mean add ViewModelModule dependency in CountryComponent or create ViewModelComponent?"}, {"owner": {"reputation": 968, "user_id": 5511947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDYhnOYieM0/AAAAAAAAAAI/AAAAAAAAC7M/UTSsQXWNTj4/photo.jpg?sz=128", "display_name": "Vairavan", "link": "https://stackoverflow.com/users/5511947/vairavan"}, "edited": false, "score": 0, "creation_date": 1542371614, "post_id": 53303081, "comment_id": 93554693, "body": "not the entire ViewModelModule just the one corresponding to the activity/fragment being handled by CountryComponent, as in why a view model factory needs to live longer than the activity using the factory?"}, {"owner": {"reputation": 658, "user_id": 4182946, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-Cbh2k0RN26U/AAAAAAAAAAI/AAAAAAAAADE/3unk-s0QwlI/photo.jpg?sz=128", "display_name": "TooLazy", "link": "https://stackoverflow.com/users/4182946/toolazy"}, "reply_to_user": {"reputation": 968, "user_id": 5511947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDYhnOYieM0/AAAAAAAAAAI/AAAAAAAAC7M/UTSsQXWNTj4/photo.jpg?sz=128", "display_name": "Vairavan", "link": "https://stackoverflow.com/users/5511947/vairavan"}, "edited": false, "score": 0, "creation_date": 1543215085, "post_id": 53303081, "comment_id": 93822050, "body": "Not sure how to do this properly"}, {"owner": {"reputation": 968, "user_id": 5511947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDYhnOYieM0/AAAAAAAAAAI/AAAAAAAAC7M/UTSsQXWNTj4/photo.jpg?sz=128", "display_name": "Vairavan", "link": "https://stackoverflow.com/users/5511947/vairavan"}, "edited": false, "score": 0, "creation_date": 1543255549, "post_id": 53303081, "comment_id": 93843056, "body": "The module providing dependency for the activity/fragment could provide the factory as well. This way once the activity/fragment is done, the factory too is garbage collected."}], "tags": [], "owner": {"reputation": 658, "user_id": 4182946, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-Cbh2k0RN26U/AAAAAAAAAAI/AAAAAAAAADE/3unk-s0QwlI/photo.jpg?sz=128", "display_name": "TooLazy", "link": "https://stackoverflow.com/users/4182946/toolazy"}, "is_accepted": false, "score": 0, "last_activity_date": 1542207513, "creation_date": 1542207513, "answer_id": 53303081, "question_id": 53301482, "link": "https://stackoverflow.com/questions/53301482/android-dagger-2-dependency-cannot-be-provided-without-an-provides-annotated-m/53303081#53303081", "title": "Android dagger 2: dependency cannot be provided without an @Provides-annotated method", "body": "<p>Fixed by adding </p>\n\n<pre><code>fun viewModelFactory(): ViewModelFactory\n</code></pre>\n\n<p>to my <code>AppComponent</code>.\nAlso removed <code>@Singleton</code> from <code>ViewModelFactory</code></p>\n"}], "owner": {"reputation": 658, "user_id": 4182946, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-Cbh2k0RN26U/AAAAAAAAAAI/AAAAAAAAADE/3unk-s0QwlI/photo.jpg?sz=128", "display_name": "TooLazy", "link": "https://stackoverflow.com/users/4182946/toolazy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 455, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542207513, "creation_date": 1542202470, "question_id": 53301482, "link": "https://stackoverflow.com/questions/53301482/android-dagger-2-dependency-cannot-be-provided-without-an-provides-annotated-m", "title": "Android dagger 2: dependency cannot be provided without an @Provides-annotated method", "body": "<p>Dagger 2 dependencies:</p>\n\n<pre><code>implementation \"com.google.dagger:dagger:2.15\"\nkapt \"com.google.dagger:dagger-compiler:2.15\"\n</code></pre>\n\n<p>My <code>AppComponent</code>:</p>\n\n<pre><code>@Singleton\n@Component(modules = [\n    DomainModule::class,\n    DataModule::class,\n    PresentationModule::class,\n    ViewModelModule::class,\n    RepositoriesModule::class\n])\ninterface AppComponent {\n\n    //reps\n    fun topicsRep(): TopicsRepository\n    fun countriesRep(): CountriesRepository\n    fun loginRep(): LoginRepository\n}\n</code></pre>\n\n<p>My <code>ViewModelModule</code> class:</p>\n\n<pre><code>@Module\nabstract class ViewModelModule {\n\n    @Binds\n    internal abstract fun bindViewModelFactory(factory: ViewModelFactory): ViewModelProvider.Factory\n\n    @Binds\n    @IntoMap\n    @ViewModelKey(LoginViewModel::class)\n    internal abstract fun loginViewModel(viewModel: LoginViewModel): ViewModel\n\n    @Binds\n    @IntoMap\n    @ViewModelKey(CountriesViewModel::class)\n    internal abstract fun countriesViewModel(viewModel: CountriesViewModel): ViewModel\n}\n</code></pre>\n\n<p>My <code>ViewModelFactory</code>:</p>\n\n<pre><code>   @Suppress(\"UNCHECKED_CAST\")\n@Singleton\nclass ViewModelFactory\n@Inject constructor(private val viewModels: MutableMap&lt;Class&lt;out ViewModel&gt;,\n        @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;) :\n        ViewModelProvider.Factory {\n\n    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T = viewModels[modelClass]?.get() as T\n}\n\n@Target(AnnotationTarget.FUNCTION, AnnotationTarget.PROPERTY_GETTER, AnnotationTarget.PROPERTY_SETTER)\n@kotlin.annotation.Retention(AnnotationRetention.RUNTIME)\n@MapKey\ninternal annotation class ViewModelKey(val value: KClass&lt;out ViewModel&gt;)\n</code></pre>\n\n<p>And for example my <code>CountryComponent</code> and <code>CountryModule</code>:</p>\n\n<pre><code>@ActivityScope\n@Component(modules = [CountryModule::class], dependencies = [AppComponent::class])\ninterface CountryComponent {\n\n   fun inject(activity: SelectCountryActivity)\n}\n\n@Module\nclass CountryModule {\n\n    @Provides\n    @Singleton\n    fun provideCountriesInteractor(rep: CountriesRepository)\n             = SelectCountryInteractor(rep)\n}\n</code></pre>\n\n<p>What i am trying to achieve - i need to inject an instance of <code>ViewModelFactory</code> to my activities and fragments. My viewmodels contains others dependensies. Also trying to separate dependencies for each screen.</p>\n\n<p>After build getting error:</p>\n\n<pre><code>CountryComponent.java:10: error: java.util.Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;android.arch.lifecycle.ViewModel&gt;&gt; cannot be provided without an @Provides-annotated method\n\njava.util.Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;android.arch.lifecycle.ViewModel&gt;&gt; is injected at ViewModelFactory.&lt;init&gt;(viewModels)\nViewModelFactory is injected at SelectCountryActivity.factory\nSelectCountryActivity is injected at CountryComponent.inject(activity)\n</code></pre>\n\n<p>When setting <code>ViewModelFactory</code> as <code>@Singleton</code> getting error:</p>\n\n<pre><code>CountryComponent scoped with @ActivityScope may not reference bindings with different scopes:\n@dagger.Component(modules = {CountryModule.class}, dependencies = {AppComponent.class})\n@Singleton class ViewModelFactory\nAppComponent.java:6: error: AppComponent scoped with @Singleton may not reference bindings with different scopes:\n@dagger.Component(modules = {DomainModule.class, DataModule.class, PresentationModule.class, ViewModelModule.class, RepositoriesModule.class})\n</code></pre>\n\n<p>Is there any reason to mark ViewModel as <code>Singleton</code> or <code>ActivityScope</code>?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 51, "user_id": 7248738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209588ceacaacd0fb5e0e77173779f60?s=128&d=identicon&r=PG&f=1", "display_name": "yoni", "link": "https://stackoverflow.com/users/7248738/yoni"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1542204796, "post_id": 53301263, "comment_id": 93485045, "body": "You are correct but I looked at the answers there and came out the other end as confused as I went in."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1542205039, "post_id": 53301263, "comment_id": 93485195, "body": "It answers precisely the questions you have including references to further reading. How would you expect a &quot;better&quot; answer to look like?"}, {"owner": {"reputation": 51, "user_id": 7248738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209588ceacaacd0fb5e0e77173779f60?s=128&d=identicon&r=PG&f=1", "display_name": "yoni", "link": "https://stackoverflow.com/users/7248738/yoni"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1542208880, "post_id": 53301263, "comment_id": 93487712, "body": "Coming from C/C++ the multitude of different names is very confusing. The technicality of the implementation behind the scenes (implementing an interface vs being a proper object etc..., will be interesting to me once I understand the logic/point of the different entities their <b>naming</b>).  After reading the documentation and the above-referenced answer, I still wouldn&#39;t know how to init an array/list or when would be the appropriate place to use an ArrayList vs List&lt;Int&gt; vs IntArray vs intArray.....  I think what I need is the big picture if this is irrelevant, please delete the Q."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7248738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209588ceacaacd0fb5e0e77173779f60?s=128&d=identicon&r=PG&f=1", "display_name": "yoni", "link": "https://stackoverflow.com/users/7248738/yoni"}, "edited": false, "score": 0, "creation_date": 1542209441, "post_id": 53302852, "comment_id": 93488051, "body": "Thanks, this was a help"}, {"owner": {"reputation": 51, "user_id": 7248738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209588ceacaacd0fb5e0e77173779f60?s=128&d=identicon&r=PG&f=1", "display_name": "yoni", "link": "https://stackoverflow.com/users/7248738/yoni"}, "edited": false, "score": 1, "creation_date": 1542210295, "post_id": 53302852, "comment_id": 93488610, "body": "Would it be correct to say. If it is preformance critical use an array, otherwise use a list. If using a list try to init it using <code>listOf</code> <code>mutableListOf</code> and let the compiler deside what kind of list to create. So creating a mutable ist of 100 cells init to 0 would look like <code>val l2 = mutableListOf((1..100).map{0})</code>"}, {"owner": {"reputation": 51, "user_id": 7248738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209588ceacaacd0fb5e0e77173779f60?s=128&d=identicon&r=PG&f=1", "display_name": "yoni", "link": "https://stackoverflow.com/users/7248738/yoni"}, "edited": false, "score": 0, "creation_date": 1542210710, "post_id": 53302852, "comment_id": 93488881, "body": "ment <code>val l2 = (1..100).map{0}.toMutableList()</code>"}, {"owner": {"reputation": 2261, "user_id": 7327572, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/111afeb457014dbcc846245eec06e492?s=128&d=identicon&r=PG&f=1", "display_name": "FilipRistic", "link": "https://stackoverflow.com/users/7327572/filipristic"}, "reply_to_user": {"reputation": 51, "user_id": 7248738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209588ceacaacd0fb5e0e77173779f60?s=128&d=identicon&r=PG&f=1", "display_name": "yoni", "link": "https://stackoverflow.com/users/7248738/yoni"}, "edited": false, "score": 0, "creation_date": 1542221146, "post_id": 53302852, "comment_id": 93494406, "body": "Yes array is better for performance critical tasks, otherwise lists are preferred as they offer a lot more flexibility. For initializing lists yes using those factory functions is the way to go."}], "tags": [], "owner": {"reputation": 2261, "user_id": 7327572, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/111afeb457014dbcc846245eec06e492?s=128&d=identicon&r=PG&f=1", "display_name": "FilipRistic", "link": "https://stackoverflow.com/users/7327572/filipristic"}, "is_accepted": false, "score": 4, "last_activity_date": 1542206778, "creation_date": 1542206778, "answer_id": 53302852, "question_id": 53301263, "link": "https://stackoverflow.com/questions/53301263/kotlin-lists-and-arrays/53302852#53302852", "title": "Kotlin Lists and Arrays", "body": "<ol>\n<li>First difference is that <code>List</code> is interface describing some common list operations, while <code>Array</code> is a class. From memory perspective, <code>Array</code> is continuous region in memory which size doesn't change, that is why you can't change the size of <code>Array</code> after it is created, but you can change its elements, on other hand <code>List</code> can be implemented in different ways, meaning that memory structure can be different, most common implementations are <code>ArrayList</code> where array is used to store elements, and once array is filled, its changed with bigger array with contents of old one being added to new one, another implementation is <code>LinkedList</code>, where you have nodes pointing to next element on list. From performance perspective <code>Array</code> is always faster than any implementation of <code>List</code> but it is also much more limited.</li>\n<li><p>Difference between <code>List</code> and <code>MutableList</code> is that when you use <code>MutableList</code> you can change elements of that list(add or remove elements from it), while when using immutable <code>List</code> you can't add or remove elements from it. Both lists allow you to change properties of those elements.</p></li>\n<li><p>Will divide this answer into three answers:</p>\n\n<ul>\n<li><code>List</code> is the interface which extends <code>Collection</code> interface, provides basic common list operations, <code>MutableList</code> extends <code>List</code> interface as well as <code>MutableCollection</code> interface adding methods needed to change elements of that list, <code>listOf</code> is function which creates <code>List</code> and fills it with given arguments, by using <code>listOf</code> we don't need to specify which implementation of <code>List</code> will be used, for example on JVM <code>List</code> is backed by <code>java.util.Arrays.ArrayList</code>(not same as <code>java.util.ArrayList</code>), while on JavaScript side it is probably backed up by <code>Array</code>(take this statement with grain of salt, as I have never worked with Kotlin for JS)</li>\n<li><code>ArrayList</code> is <strong>typealias</strong> to <code>java.util.ArrayList</code>, there is nothing special about it, it is implemenentation of Java's <code>List</code> interface, <code>MutableList</code> is backed by this implementation on JVM. </li>\n<li><code>Array</code> is equivalent to Java's array, nothing special for it either, <code>IntArray</code> and other primitive array company is used to make up for the lack of primitive types in kotlin, <code>Array&lt;Int&gt;</code> is same as <code>Integer[]</code> in Java, while <code>IntArray</code> is same as <code>int[]</code>. Same logic is applied to all other variants. Using primitive types you get better performance, but difference can be neglected in most cases on modern computers, still if you have really a lot of data you should go for primitive types where possible.</li>\n</ul></li>\n</ol>\n\n<p>You can see yourself all collections hierarchy on <a href=\"https://github.com/JetBrains/kotlin/blob/master/core/builtins/native/kotlin/Collections.kt\" rel=\"nofollow noreferrer\">kotlin repository</a></p>\n\n<ol start=\"4\">\n<li>Use built-in Kotlin functions like <code>listOf</code>, <code>arrayOf</code>, <code>mutableListOf</code>, this isn't a must, but its always good to follow best practices.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 7248738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209588ceacaacd0fb5e0e77173779f60?s=128&d=identicon&r=PG&f=1", "display_name": "yoni", "link": "https://stackoverflow.com/users/7248738/yoni"}, "edited": false, "score": 0, "creation_date": 1542547508, "post_id": 53305446, "comment_id": 93599245, "body": "Thanks. Every one really helped me a lot"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1542215363, "creation_date": 1542215363, "answer_id": 53305446, "question_id": 53301263, "link": "https://stackoverflow.com/questions/53301263/kotlin-lists-and-arrays/53305446#53305446", "title": "Kotlin Lists and Arrays", "body": "<blockquote>\n  <p>Coming from C/C++ the multitude of different names is very confusing.</p>\n</blockquote>\n\n<p>Then maybe this can give C++ analogy specifically:</p>\n\n<ol>\n<li><p><code>Array</code> is like <code>std::array</code> (though length doesn't need to be known at compile time), or like C arrays, except it stores the length and all accesses are bounds-checked.</p></li>\n<li><p><code>ArrayList</code> is like <code>std::vector</code> (again, all accesses are bounds-checked).</p></li>\n<li><p><code>MutableList</code> is the interface to <code>ArrayList</code> (like <a href=\"https://en.cppreference.com/w/cpp/named_req/SequenceContainer\" rel=\"nofollow noreferrer\"><code>SequenceContainer</code></a>).</p></li>\n<li><p><code>List</code> is the read-only part of <code>MutableList</code>.</p></li>\n</ol>\n\n<p>Generics work very differently from C++ templates, in particular there's no specialization: in C++, there is separate code generated for <code>std::vector&lt;int&gt;</code> and <code>std::vector&lt;std::string&gt;</code>, in Java and Kotlin there isn't. (Actually, Kotlin has a form of it with reified type parameters, but it doesn't apply here.) So e.g. <code>Array&lt;Int&gt;</code> and <code>List&lt;Int&gt;</code> have to work with boxed <code>java.lang.Integer</code>s instead of primitive types. But Java does have arrays of primitives, and that's what Kotlin calls <code>IntArray</code>.</p>\n"}], "owner": {"reputation": 51, "user_id": 7248738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209588ceacaacd0fb5e0e77173779f60?s=128&d=identicon&r=PG&f=1", "display_name": "yoni", "link": "https://stackoverflow.com/users/7248738/yoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 1, "closed_date": 1542215440, "answer_count": 2, "score": 1, "last_activity_date": 1542215363, "creation_date": 1542201794, "question_id": 53301263, "link": "https://stackoverflow.com/questions/53301263/kotlin-lists-and-arrays", "closed_reason": "Duplicate", "title": "Kotlin Lists and Arrays", "body": "<p>Just started working with Kotlin and I love it but...\nI can not make any sense of Lists and Arrys in this language.\nI'm not new to programming and do not need an explanation on what arrays are. What I do not understand is.</p>\n\n<ol>\n<li><p>What is the difference between a List and an Array? They seem very much the same you access both using a[index] and use them in much the same way. If a list is immutable they are even more the same, so... What is the difference? Assuming the list is not a linked list they both work in O(1) access time.</p></li>\n<li><p>If I'm using a list; What is the difference between mutable and immutable? When can I edit the content? When can I change the length?</p></li>\n<li><p>There seem to be many overlapping and confusing names for the same thing. List, ListOf, ArrayList, IntArray, intArray....<br>\nCould someone make an exhaustive list of all of them and give some kind of rule of thumb when you would use every one. Specifically, I find the concept of an immutable empty list very perplexing. What on earth would that be used for?</p></li>\n<li><p>How do you initialize these things?</p></li>\n</ol>\n\n<p>Sorry for the long question,</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["maven", "javafx", "kotlin", "tornadofx"], "comments": [{"owner": {"reputation": 10434, "user_id": 1007991, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1254dabbec32d7cbc502dfd2fd0438d?s=128&d=identicon&r=PG", "display_name": "Renato", "link": "https://stackoverflow.com/users/1007991/renato"}, "edited": false, "score": 1, "creation_date": 1542199390, "post_id": 53300469, "comment_id": 93481548, "body": "shouldn&#39;t the entries in the MANIFEST have a <code>.jar</code> extension?"}, {"owner": {"reputation": 10434, "user_id": 1007991, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1254dabbec32d7cbc502dfd2fd0438d?s=128&d=identicon&r=PG", "display_name": "Renato", "link": "https://stackoverflow.com/users/1007991/renato"}, "edited": false, "score": 2, "creation_date": 1542199449, "post_id": 53300469, "comment_id": 93481578, "body": "I would suggest you stop messing with the manifest, just create a fat jar: <a href=\"https://www.mkyong.com/maven/create-a-fat-jar-file-maven-assembly-plugin/\" rel=\"nofollow noreferrer\">mkyong.com/maven/create-a-fat-jar-file-maven-assembly-plugin</a>"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 1, "creation_date": 1542200600, "post_id": 53300469, "comment_id": 93482233, "body": "Can you post your pom? We need to see the source to figure out where things go wrong. What version on Java? I also agree that you should consider a fat jar."}, {"owner": {"reputation": 348, "user_id": 3312628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67366fe7e0e9c13492a9fec689b87736?s=128&d=identicon&r=PG&f=1", "display_name": "Leder", "link": "https://stackoverflow.com/users/3312628/leder"}, "edited": false, "score": 0, "creation_date": 1542200990, "post_id": 53300469, "comment_id": 93482452, "body": "yes, <code>.jar</code> was missing, now I have to add javafx library to <code>pom.xml</code>"}, {"owner": {"reputation": 348, "user_id": 3312628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67366fe7e0e9c13492a9fec689b87736?s=128&d=identicon&r=PG&f=1", "display_name": "Leder", "link": "https://stackoverflow.com/users/3312628/leder"}, "edited": false, "score": 0, "creation_date": 1542203938, "post_id": 53300469, "comment_id": 93484435, "body": "<code>D:\\Source\\deauticonmaventornadofx\\target&gt;javac -version javac 11.0.1</code>"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 2, "creation_date": 1542204776, "post_id": 53300469, "comment_id": 93485031, "body": "TornadoFX is not yet compatible with Java 11, you have to use Java 8. We&#39;re working on Java 11 support and it should be ready soon."}, {"owner": {"reputation": 348, "user_id": 3312628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67366fe7e0e9c13492a9fec689b87736?s=128&d=identicon&r=PG&f=1", "display_name": "Leder", "link": "https://stackoverflow.com/users/3312628/leder"}, "edited": false, "score": 0, "creation_date": 1542208003, "post_id": 53300469, "comment_id": 93487186, "body": "Yes, fat JAR is building and running with JDK 8. Please add an answer, so I can accept it."}], "owner": {"reputation": 348, "user_id": 3312628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67366fe7e0e9c13492a9fec689b87736?s=128&d=identicon&r=PG&f=1", "display_name": "Leder", "link": "https://stackoverflow.com/users/3312628/leder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 717, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542204197, "creation_date": 1542199185, "last_edit_date": 1542204197, "question_id": 53300469, "link": "https://stackoverflow.com/questions/53300469/i-want-to-package-jar-for-kotlin-tornadofx-project-with-maven3", "title": "I want to package JAR for kotlin/tornadofx project with maven3", "body": "<p>Creating JAR is going wrong with JDK 11 and JavaFX dependencies. Fat JAR is building, but execution is not working, see error below...</p>\n\n<p>This is my MANIFEST.MF:</p>\n\n<hr>\n\n<pre><code>Manifest-Version: 1.0\nCreated-By: Apache Maven 3.5.4\nBuilt-By: gerri\nBuild-Jdk: 11.0.1\nClass-Path: javax.json-api-1.1.2 tornadofx-1.7.17 kotlin-reflect-1.2.60 \n kotlin-stdlib-1.3.0-rc-198 kotlin-stdlib-common-1.3.0-rc-198 kotlin-std\n lib-jdk7-1.2.60 kotlin-stdlib-jdk8-1.2.60 javax.json-1.1.2 annotations-\n 13.0\nMain-Class: de.auticon.maven.tornadofx.MainAppKt\n</code></pre>\n\n<hr>\n\n<p>P. S. I want to package JAR with maven3, b/c with IntelliJ IDEA it is not running, too!</p>\n\n<p>Updated <code>pom.xml</code> as requested:</p>\n\n<hr>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;de.auticon.maven.tornadofx&lt;/groupId&gt;\n    &lt;artifactId&gt;de-auticon-maven-tornadofx&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;de.auticon.maven.tornadofx de-auticon-maven-tornadofx&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;kotlin.version&gt;1.3.0-rc-198&lt;/kotlin.version&gt;\n        &lt;kotlin.code.style&gt;official&lt;/kotlin.code.style&gt;\n        &lt;junit.version&gt;4.12&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-test-junit&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;no.tornado&lt;/groupId&gt;\n            &lt;artifactId&gt;tornadofx&lt;/artifactId&gt;\n            &lt;version&gt;1.7.17&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;11-ea+19&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;src/main/kotlin&lt;/sourceDirectory&gt;\n        &lt;testSourceDirectory&gt;src/test/kotlin&lt;/testSourceDirectory&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifestFile&gt;src/main/resources/META-INF/MANIFEST.MF&lt;/manifestFile&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;jvmTarget&gt;1.8&lt;/jvmTarget&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;test-compile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;test-compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.4.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;!-- get all project dependencies --&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                    &lt;!-- MainClass in mainfest make a executable jar --&gt;\n                    &lt;archive&gt;\n                      &lt;manifest&gt;\n                        &lt;mainClass&gt;de.auticon.maven.tornadofx.MainAppKt&lt;/mainClass&gt;\n                      &lt;/manifest&gt;\n                    &lt;/archive&gt;\n\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                  &lt;execution&gt;\n                    &lt;id&gt;make-assembly&lt;/id&gt;\n                                        &lt;!-- bind to the packaging phase --&gt;\n                    &lt;phase&gt;package&lt;/phase&gt; \n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                  &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<hr>\n\n<p>Do I really need <code>javafxpackager</code> as described <a href=\"https://stackoverflow.com/questions/16868446/javafx-exception-in-thread-main-java-lang-noclassdeffounderror-javafx-applica\">here?</a></p>\n\n<p>FatJAR is building, but not executing:</p>\n\n<pre><code>D:\\Source\\deauticonmaventornadofx\\target&gt;java -jar de-auticon-maven-tornadofx-1.0-SNAPSHOT-jar-with-dependencies.jar\nError: JavaFX runtime components are missing, and are required to run this application\n</code></pre>\n"}, {"tags": ["android", "android-recyclerview", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1380, "user_id": 4646166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Zyl7g4-sXrU/AAAAAAAAAAI/AAAAAAAAAQI/yjofsLxB8ss/photo.jpg?sz=128", "display_name": "Vignesh KM", "link": "https://stackoverflow.com/users/4646166/vignesh-km"}, "edited": false, "score": 0, "creation_date": 1542210093, "post_id": 53300503, "comment_id": 93488454, "body": "I tried to do that inside onMove method. But If I do that, I am not able to drag an item for more that one position. Because of onMove method getting called for every position change."}], "tags": [], "owner": {"reputation": 354, "user_id": 9396006, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159910553485398/picture?type=large", "display_name": "Blue Jones", "link": "https://stackoverflow.com/users/9396006/blue-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1542199317, "creation_date": 1542199317, "answer_id": 53300503, "question_id": 53300082, "link": "https://stackoverflow.com/questions/53300082/drag-and-drop-recyclerview-with-checkbox-triggering-previous-position/53300503#53300503", "title": "Drag and drop Recyclerview with checkbox triggering previous position", "body": "<p>I haven't got 50 rep so can't leave a comment but I had a similar issue and it was because I wasnt updating the list that i pass to the adapter</p>\n\n<pre><code>fun updateAdapterList(newList: MutableList&lt;Object&gt;) {\n    adapterList.clear()\n    adapterList.addAll(newList)\n    notifyDataSetChanged()\n}\n</code></pre>\n\n<p>In your case just use <code>notifyItemMoved(dragged_item_pos, target_item_pos)</code> and pass in the positions required.</p>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 1380, "user_id": 4646166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Zyl7g4-sXrU/AAAAAAAAAAI/AAAAAAAAAQI/yjofsLxB8ss/photo.jpg?sz=128", "display_name": "Vignesh KM", "link": "https://stackoverflow.com/users/4646166/vignesh-km"}, "is_accepted": true, "score": 0, "last_activity_date": 1542361505, "creation_date": 1542361505, "answer_id": 53335177, "question_id": 53300082, "link": "https://stackoverflow.com/questions/53300082/drag-and-drop-recyclerview-with-checkbox-triggering-previous-position/53335177#53335177", "title": "Drag and drop Recyclerview with checkbox triggering previous position", "body": "<p>Sorry, I found the answer myself. So I am adding this answer. \n<br>Using position for updating the checked status is wrong. Because the position of the item will vary while moving the item. To handle that I am using a unique id for finding the exact object.\nFirst, I am setting the unique id as the tag for the checkbox.</p>\n\n<pre><code>holder.cb_completed.tag = activity.list!!.items[pos].id\n</code></pre>\n\n<p>Inside Onclick listener finding the object which matches the unique id. Once we found, I am updating the checkbox value</p>\n\n<pre><code>holder.cb_completed.setOnClickListener {\n    activity.list!!.items.forEach { it -&gt;\n        if(it.id == holder.cb_completed.tag.toString().toLong()){\n            it.isCompleted = holder.cb_completed.isChecked\n        }\n    }\n}\n</code></pre>\n\n<p>Hope it help to others.</p>\n"}], "owner": {"reputation": 1380, "user_id": 4646166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Zyl7g4-sXrU/AAAAAAAAAAI/AAAAAAAAAQI/yjofsLxB8ss/photo.jpg?sz=128", "display_name": "Vignesh KM", "link": "https://stackoverflow.com/users/4646166/vignesh-km"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 53335177, "answer_count": 2, "score": 1, "last_activity_date": 1542361505, "creation_date": 1542197905, "last_edit_date": 1542198269, "question_id": 53300082, "link": "https://stackoverflow.com/questions/53300082/drag-and-drop-recyclerview-with-checkbox-triggering-previous-position", "title": "Drag and drop Recyclerview with checkbox triggering previous position", "body": "<p>I have the following code for handling drag and drop option for RecyclerView.</p>\n\n<pre><code>class TodoActivity : AppCompatActivity() {\n\n    lateinit var adapter: ToDoItemAdapter\n    lateinit var touchHelper: ItemTouchHelper\n    var list: ToDoList? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n\n        .....\n\n        rv_item_list.layoutManager = LinearLayoutManager(this)\n\n        .....\n\n\n        touchHelper =\n                ItemTouchHelper(object : ItemTouchHelper.SimpleCallback(ItemTouchHelper.UP or ItemTouchHelper.DOWN, 0) {\n                    override fun onMove(\n                        rv: RecyclerView,\n                        dragged: RecyclerView.ViewHolder,\n                        target: RecyclerView.ViewHolder\n                    ): Boolean {\n                        val dragged_item_pos = dragged.adapterPosition\n                        val target_item_pos = target.adapterPosition\n                        Collections.swap(list.items, dragged_item_pos, target_item_pos)\n                        adapter.notifyItemMoved(dragged_item_pos, target_item_pos)\n                        return false\n                    }\n\n                    override fun onSwiped(p0: RecyclerView.ViewHolder, p1: Int) {\n                        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n                    }\n                })\n\n        touchHelper.attachToRecyclerView(rv_item_list)\n\n    }\n\n\n    class ToDoItemAdapter(val context: Context, val activity: TodoActivity) :\n\n        override fun onBindViewHolder(holder: ViewHolder, pos: Int) {\n            holder.cb_completed.setOnClickListener {\n               .....\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Without dragging any item I tried to check the checkbox which is working fine. Now the problem is after dragging items if I check the item it is triggering the checkbox which was there earlier. </p>\n\n<p>Eg:  </p>\n\n<pre><code>I have Item 1, Item 2, Item 3.\nI dragged the Item 3 to Item 1 position.\nNow the order is Item 3, Item 1, Item 2\nIf I check Item 3(Position 0), Its checking Item 2(Position 2). Because currently Item 2 has the position of previous Item 3 position.\n</code></pre>\n"}, {"tags": ["kotlin", "ktor"], "answers": [{"tags": [], "owner": {"reputation": 10942, "user_id": 18575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/318654a786700455b96049d8ac9beb11?s=128&d=identicon&r=PG", "display_name": "Ilya Ryzhenkov", "link": "https://stackoverflow.com/users/18575/ilya-ryzhenkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1542204475, "creation_date": 1542204475, "answer_id": 53302114, "question_id": 53299937, "link": "https://stackoverflow.com/questions/53299937/add-content-of-a-url-to-respondtext-in-ktor/53302114#53302114", "title": "Add content of a url to respondText in Ktor", "body": "<p>This looks like a kind of a proxy. You can check a reverse proxy sample here: <a href=\"https://github.com/ktorio/ktor-samples/tree/master/other/reverse-proxy\" rel=\"nofollow noreferrer\">https://github.com/ktorio/ktor-samples/tree/master/other/reverse-proxy</a></p>\n"}], "owner": {"reputation": 6712, "user_id": 6678991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vT7P5.jpg?s=128&g=1", "display_name": "Mahdi-Malv", "link": "https://stackoverflow.com/users/6678991/mahdi-malv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 53302114, "answer_count": 1, "score": 0, "last_activity_date": 1542204475, "creation_date": 1542197426, "question_id": 53299937, "link": "https://stackoverflow.com/questions/53299937/add-content-of-a-url-to-respondtext-in-ktor", "title": "Add content of a url to respondText in Ktor", "body": "<p><br>\nI have a <a href=\"https://jsonplaceholder.typicode.com/posts\" rel=\"nofollow noreferrer\">url</a> that i want to display as the content of my webpage using <strong>Ktor</strong> framework.</p>\n\n<pre><code>fun Application.module() {\n    install(DefaultHeaders)\n    install(CallLogging)\n    install(Routing) {\n\n        get(\"/\") {\n            call.respondText(/*Content of that url in the output ?*/, ContentType.Text.Any)\n        }\n    }\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["java", "android", "kotlin", "timer", "countdown"], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 8203859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ov4e6ZSATRE/AAAAAAAAAAI/AAAAAAAAENw/uOv0K-HG4Xg/photo.jpg?sz=128", "display_name": "Shanmuka Chowdary", "link": "https://stackoverflow.com/users/8203859/shanmuka-chowdary"}, "edited": false, "score": 0, "creation_date": 1542195929, "post_id": 53299420, "comment_id": 93479523, "body": "The entire code I&#39;m just calling in a normal method, the countdown variable i declared as  ( private lateinit var countDownTimer: CountDownTimer) and the method i&#39;m calling is (   fun countDownTimer(activity: FragmentActivity?, batteryHealthView: BatteryHealthCheckView, timeLeft: Long?)) the time left is nothing but the reamining time I&#39;m passing and each time i need to conitinue the progress instead starting from 0"}, {"owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "reply_to_user": {"reputation": 98, "user_id": 8203859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ov4e6ZSATRE/AAAAAAAAAAI/AAAAAAAAENw/uOv0K-HG4Xg/photo.jpg?sz=128", "display_name": "Shanmuka Chowdary", "link": "https://stackoverflow.com/users/8203859/shanmuka-chowdary"}, "edited": false, "score": 0, "creation_date": 1542196884, "post_id": 53299420, "comment_id": 93480110, "body": "You don&#39;t need to pass 900000 each time, you need to store spent time when you leave app and re calculate remaining time when you back in app and pass that time in constructure"}, {"owner": {"reputation": 98, "user_id": 8203859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ov4e6ZSATRE/AAAAAAAAAAI/AAAAAAAAENw/uOv0K-HG4Xg/photo.jpg?sz=128", "display_name": "Shanmuka Chowdary", "link": "https://stackoverflow.com/users/8203859/shanmuka-chowdary"}, "edited": false, "score": 1, "creation_date": 1542200968, "post_id": 53299420, "comment_id": 93482435, "body": "Thanks it&#39;s worked now everytime I&#39;m sending the remaining time and gives the correct value"}], "tags": [], "owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "is_accepted": true, "score": 2, "last_activity_date": 1542195678, "creation_date": 1542195678, "answer_id": 53299420, "question_id": 53299363, "link": "https://stackoverflow.com/questions/53299363/countdown-timer-ontick-method-not-working-when-i-give-time/53299420#53299420", "title": "CountDown Timer OnTick method Not Working when I give Time", "body": "<p>Share code how you are calling <strong>CountDownTimer(900000, 1000)</strong>  Its seems you are using 900000 each time, Instead you need to re calculate remain time and pass that time in method call.</p>\n"}], "owner": {"reputation": 98, "user_id": 8203859, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ov4e6ZSATRE/AAAAAAAAAAI/AAAAAAAAENw/uOv0K-HG4Xg/photo.jpg?sz=128", "display_name": "Shanmuka Chowdary", "link": "https://stackoverflow.com/users/8203859/shanmuka-chowdary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 53299420, "answer_count": 1, "score": 1, "last_activity_date": 1542195678, "creation_date": 1542195462, "question_id": 53299363, "link": "https://stackoverflow.com/questions/53299363/countdown-timer-ontick-method-not-working-when-i-give-time", "title": "CountDown Timer OnTick method Not Working when I give Time", "body": "<pre><code>I'm Running one count down timer for 15 minutes which is equals to 100%,\n</code></pre>\n\n<p>When I'm in the app it's fine working for me.\nWhat i'm doing is when i'm closing the app I'm saving start time and opening the app taking current time and calculating the remaining time.\n I'm giving the remaining time to ontick method before starting the countdown timer. on the first tick it's showing correct but for the next tick,It's starting from 15 minutes. Can anyone tell why it's happenning</p>\n\n<pre><code> countDownTimer = object : CountDownTimer(900000, 1000) {\n                override fun onTick(millisUntilFinished: Long) {\n                    activity?.runOnUiThread {\n                        val minutes = TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished)\n                        val seconds = TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished))\n\n                        val progress = 100 - ((((minutes / 15f) + (seconds / 900f)) * 100).toInt())\n\n                        if (progress == 100) {\n                            countDownTimer.cancel()\n                            batteryHealthView.hideProgress()\n                        }\n                        saveData(progress, percentageString)\n                    }\n                }\n\n                override fun onFinish() {\n                    activity?.runOnUiThread {\n                        countDownTimer.cancel()\n                    }\n                }\n            }\n            if (timeLeft!! &gt; 0) {\n                countDownTimer.onTick(timeLeft)\n            }\n            countDownTimer.start()\n</code></pre>\n"}, {"tags": ["while-loop", "kotlin", "synchronized"], "comments": [{"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 1, "creation_date": 1542192781, "post_id": 53298437, "comment_id": 93477733, "body": "What version of Kotlin are you using?  The <code>baz</code> function compiles for me on Kotlin 1.3."}, {"owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "edited": false, "score": 1, "creation_date": 1542192850, "post_id": 53298437, "comment_id": 93477775, "body": "Whats the error? Seems to compile for me"}, {"owner": {"reputation": 3991, "user_id": 1343979, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1cde802f2b3fae0e23f43a65b507bd05?s=128&d=identicon&r=PG", "display_name": "Bass", "link": "https://stackoverflow.com/users/1343979/bass"}, "reply_to_user": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 0, "creation_date": 1542193257, "post_id": 53298437, "comment_id": 93478009, "body": "@YoniGibbs: kotlinc-jvm 1.2.71"}, {"owner": {"reputation": 3991, "user_id": 1343979, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1cde802f2b3fae0e23f43a65b507bd05?s=128&d=identicon&r=PG", "display_name": "Bass", "link": "https://stackoverflow.com/users/1343979/bass"}, "reply_to_user": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "edited": false, "score": 0, "creation_date": 1542193321, "post_id": 53298437, "comment_id": 93478037, "body": "@EamonScullion: <code>Error:(8, 5) Kotlin: A &#39;return&#39; expression required in a function with a block body (&#39;{...}&#39;)</code>"}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 1, "creation_date": 1542193556, "post_id": 53298437, "comment_id": 93478194, "body": "Looks like this has changed in Kotlin 1.3.  You can try it out <a href=\"https://try.kotlinlang.org/#/Examples/Hello,%20world!/Simplest%20version/Simplest%20version.kt\" rel=\"nofollow noreferrer\">here</a>.  There&#39;s an option at the bottom right for what version of Kotlin to use.  Sure enough, it compiles on 1.3.10, but not on 1.2.71.  Can you upgrade your project to Kotlin 1.3?"}, {"owner": {"reputation": 3991, "user_id": 1343979, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1cde802f2b3fae0e23f43a65b507bd05?s=128&d=identicon&r=PG", "display_name": "Bass", "link": "https://stackoverflow.com/users/1343979/bass"}, "reply_to_user": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 0, "creation_date": 1542193640, "post_id": 53298437, "comment_id": 93478240, "body": "@YoniGibbs Thanks, the code does compile on 1.3.10. Will try to upgrade."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 2, "creation_date": 1542200830, "post_id": 53298437, "comment_id": 93482357, "body": "Your issue stems from the same compiler issue that explains <a href=\"https://stackoverflow.com/questions/53286435/custom-getter-without-return-on-all-paths-compiles-nevertheless\">this issue here</a>. So Kotlin 1.3 actually has a bug that&#39;s in your favor for this example."}], "owner": {"reputation": 3991, "user_id": 1343979, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1cde802f2b3fae0e23f43a65b507bd05?s=128&d=identicon&r=PG", "display_name": "Bass", "link": "https://stackoverflow.com/users/1343979/bass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542192611, "creation_date": 1542192611, "question_id": 53298437, "link": "https://stackoverflow.com/questions/53298437/while-loop-nested-under-synchronized-block-in-kotlin", "title": "While loop nested under synchronized block in Kotlin", "body": "<p>Why the following <em>does</em> compile in Kotlin:</p>\n\n<pre><code>fun foo(): Boolean {\n    while (true) {\n        return true\n    }\n}\n\nfun bar(): Boolean {\n    synchronized(\"\") {\n        return foo()\n    }\n}\n</code></pre>\n\n<p>while the following <em>doesn't</em>?</p>\n\n<pre><code>fun baz(): Boolean {\n    synchronized(\"\") {\n        while (true) {\n            return true\n        }\n    }\n}\n</code></pre>\n\n<p>And what is the idiomatic way to make the latter function to compile? I can rewrite it as follows:</p>\n\n<pre><code>fun baz(): Boolean {\n    synchronized(\"\") {\n        while (true) {\n            return true\n        }\n\n        TODO(\"Never\")\n    }\n}\n</code></pre>\n\n<p>-- but it doesn't look elegant enough.</p>\n"}, {"tags": ["lambda", "kotlin", "inline", "higher-order-functions"], "comments": [{"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 0, "creation_date": 1542192570, "post_id": 53298025, "comment_id": 93477614, "body": "The error message says &quot;Add noinline modifier to the parameter declaration&quot;.  If you add this modifier to the <code>block</code> parameter it now compiles.  Do you want to avoid this, or is that good enough?"}, {"owner": {"reputation": 40175, "user_id": 85821, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28d7fc76db803c6757e7cfd2cde20354?s=128&d=identicon&r=PG", "display_name": "Bart van Heukelom", "link": "https://stackoverflow.com/users/85821/bart-van-heukelom"}, "reply_to_user": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 0, "creation_date": 1542192814, "post_id": 53298025, "comment_id": 93477752, "body": "Yes that&#39;s what I would like to avoid. I did just realize that it&#39;s a not a good idea to inline a lambda that&#39;s called twice, but I&#39;m still interested in why this is conceptually not possible."}], "answers": [{"tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": false, "score": 1, "last_activity_date": 1542203821, "last_edit_date": 1542203821, "creation_date": 1542195126, "answer_id": 53299223, "question_id": 53298025, "link": "https://stackoverflow.com/questions/53298025/call-inline-lambda-with-another-inline-lambda-argument/53299223#53299223", "title": "Call inline lambda with another inline lambda argument", "body": "<p>You get the same error if you do something like <code>val x = block</code>.  If you try to decompile that Kotlin into Bytecode the very last error you'll see is:</p>\n\n<p><code>Trying to access skipped parameter</code></p>\n\n<p>I think the point is that when you inline something it's no longer an object in the code, so you can't directly refer to it.  Obviously just calling the function itself is OK as that's inlined into your calling code.</p>\n\n<p>This is explained in more detail <a href=\"https://android.jlelse.eu/inline-noinline-crossinline-what-do-they-mean-b13f48e113c2\" rel=\"nofollow noreferrer\">here</a>.  When the function parameter is inlined, there is no <code>Function</code> object created.  I wonder if in your question what you're implying is: \"Why doesn't the compiler inline <code>enter</code> and then inline <code>block</code> into that?\"  And I guess the reason is that this would assume that all <code>enter</code> does is invoke <code>block</code>.  But what if it didn't?  What if it wanted to store a reference to it, e.g. in a list of functions to call at some point in future?  It couldn't do this, as there's no <code>Function</code> object for it to reference.</p>\n"}], "owner": {"reputation": 40175, "user_id": 85821, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28d7fc76db803c6757e7cfd2cde20354?s=128&d=identicon&r=PG", "display_name": "Bart van Heukelom", "link": "https://stackoverflow.com/users/85821/bart-van-heukelom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542203821, "creation_date": 1542191379, "last_edit_date": 1542193650, "question_id": 53298025, "link": "https://stackoverflow.com/questions/53298025/call-inline-lambda-with-another-inline-lambda-argument", "title": "Call inline lambda with another inline lambda argument", "body": "<p>I'm trying to make this higher-order Kotlin function:</p>\n\n<pre><code>private inline fun &lt;T&gt; reentrant(entered: ThreadLocal&lt;Boolean&gt;, block: () -&gt; T, enter: (() -&gt; T) -&gt; T) =\n    if (entered.get()) block()\n    else {\n        try {\n            entered.set(true)\n            enter(block)\n        } finally {\n            entered.set(false)\n        }\n    }\n</code></pre>\n\n<p>To be used like this, for example:</p>\n\n<pre><code>reentrant(fooing, block) { b -&gt;\n  try {\n    log(\"Entering a state of foo\")\n    b()\n    // sidenote: while writing this question it dawned on me,\n    //           that i could just calll the captured `block` here,\n    //           as a workaround\n  } finally {\n    log(\"Foo nevermore\")\n  }\n}\n</code></pre>\n\n<p>However, apparently the construct <code>enter(block)</code> is not allowed (<code>Illegal usage of inline parameter block</code>).</p>\n\n<p>Since everything here is inline, I think it should be technically possible. Is this feature just not supported by the compiler? Or is there a way I can do this after all?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 1, "last_activity_date": 1542190099, "last_edit_date": 1542190099, "creation_date": 1542189638, "answer_id": 53297473, "question_id": 53297361, "link": "https://stackoverflow.com/questions/53297361/kotlin-string-contains-one-of-particular-symbols/53297473#53297473", "title": "Kotlin: String contains one of particular symbols", "body": "<pre><code>myString.indexOfAny(charArrayOf('.', '$', '!')) &gt;= 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "reply_to_user": {"reputation": 187, "user_id": 7505665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73e1d9b5f71e8025c370118cc475e6a?s=128&d=identicon&r=PG&f=1", "display_name": "ShadeToD", "link": "https://stackoverflow.com/users/7505665/shadetod"}, "edited": false, "score": 0, "creation_date": 1567505835, "post_id": 53298213, "comment_id": 101974312, "body": "@ShadeToD what did you try? make sure to replace <code>string</code> with the String you want to test"}], "tags": [], "owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "is_accepted": false, "score": 1, "last_activity_date": 1542191869, "creation_date": 1542191869, "answer_id": 53298213, "question_id": 53297361, "link": "https://stackoverflow.com/questions/53297361/kotlin-string-contains-one-of-particular-symbols/53298213#53298213", "title": "Kotlin: String contains one of particular symbols", "body": "<p>Will print true if <code>string</code> contains any of the following ('.', '$', '!)</p>\n\n<pre><code>val illegalCharacters = setOf('.', '$', '!')\nprint(string.any(illegalCharacters::contains))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 2862942, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f21ec70b510a418c73b125ca57cfd98f?s=128&d=identicon&r=PG&f=1", "display_name": "clementiano", "link": "https://stackoverflow.com/users/2862942/clementiano"}, "is_accepted": false, "score": 0, "last_activity_date": 1542195986, "last_edit_date": 1542195986, "creation_date": 1542192350, "answer_id": 53298359, "question_id": 53297361, "link": "https://stackoverflow.com/questions/53297361/kotlin-string-contains-one-of-particular-symbols/53298359#53298359", "title": "Kotlin: String contains one of particular symbols", "body": "<p>There is a simple method to do this in kotlin</p>\n\n<pre><code>val stringVal = \"Hello, World!\"\nval containsSymbol = stringVal.findAnyOf(strings = listOf(\".\", \"$\", \"!\"), startIndex = 0, ignoreCase = false) != null\n</code></pre>\n\n<p>It can be made into an extension function if you like</p>\n\n<pre><code>fun String.containsSymbol(symbols: List&lt;String&gt;, startIndex: Int = 0, ignoreCase: Boolean = false): Boolean {\n   return this.findAnyOf(symbols, 0, false) != null\n}\n</code></pre>\n\n<p>Can be invoked like this <code>\"Hello world\".containsSymbol(listOf(\".\", \"$\", \"!\"))</code></p>\n"}], "owner": {"reputation": 587, "user_id": 10490583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1e73ca2aa6d3d621d41ed1c6a7c7ec?s=128&d=identicon&r=PG&f=1", "display_name": "Strangelove", "link": "https://stackoverflow.com/users/10490583/strangelove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1326, "favorite_count": 0, "accepted_answer_id": 53297473, "answer_count": 3, "score": 0, "last_activity_date": 1542196746, "creation_date": 1542189327, "last_edit_date": 1542196746, "question_id": 53297361, "link": "https://stackoverflow.com/questions/53297361/kotlin-string-contains-one-of-particular-symbols", "title": "Kotlin: String contains one of particular symbols", "body": "<p>I need to check if my string contains one (or more) symbols from set (assuming that \".\", \"$\", \"!\"). How to check it without iteration of each symbol?</p>\n"}, {"tags": ["android", "kotlin", "navigation-drawer", "android-jetpack", "androidx"], "answers": [{"tags": [], "owner": {"reputation": 1432, "user_id": 5302251, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/FQmyH.jpg?s=128&g=1", "display_name": "Sakib Syed", "link": "https://stackoverflow.com/users/5302251/sakib-syed"}, "is_accepted": false, "score": 3, "last_activity_date": 1569416165, "creation_date": 1569416165, "answer_id": 58098953, "question_id": 53295011, "link": "https://stackoverflow.com/questions/53295011/androidx-jetpack-navigationui-overriding-action-on-non-navigation-item-in-draw/58098953#58098953", "title": "AndroidX JetPack NavigationUI - Overriding Action on Non-Navigation Item In Drawer", "body": "<p>You just need to add below mentioned code </p>\n\n<pre><code>    nav_view.menu.findItem(R.id.nav_logout).setOnMenuItemClickListener {\n            Log.e(\"=&gt;\",\" You clicked on logout !!! \")\n            true\n        }\n</code></pre>\n\n<p>and Here is my full code</p>\n\n<pre><code>    class NavigationDrawerActivity : AppCompatActivity() {\n\n    private lateinit var appBarConfig: AppBarConfiguration\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_navigation_drawer)\n        setSupportActionBar(toolbar)\n\n        val navController: NavController = findNavController(R.id.nav_host_fragment)\n\n        appBarConfig = AppBarConfiguration(\n            setOf(\n                R.id.nav_home,\n                R.id.nav_gallery,\n                R.id.nav_slideshow,\n                R.id.nav_tools,\n                R.id.nav_share,\n                R.id.nav_send\n            )\n            , drawer_layout\n        )\n\n        setupActionBarWithNavController(navController, appBarConfig)\n        nav_view.setupWithNavController(navController)\n\n        //For log out button related stuff\n        nav_view.menu.findItem(R.id.nav_logout).setOnMenuItemClickListener {\n            Log.e(\"=&gt;\",\" You clicked on logout !!! \")\n            true\n        }\n    }\n\n    override fun onSupportNavigateUp(): Boolean {\n        return findNavController(R.id.nav_host_fragment).navigateUp(appBarConfig)\n                || super.onSupportNavigateUp()\n    }\n}\n</code></pre>\n\n<p>You can also <code>check out</code> my project from <code>Git Hub</code> by this <a href=\"https://github.com/sakib143/NavigationUI-Demo\" rel=\"nofollow noreferrer\">this link</a></p>\n"}], "owner": {"reputation": 921, "user_id": 5066924, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/vi5Py.jpg?s=128&g=1", "display_name": "Giulio Colleluori", "link": "https://stackoverflow.com/users/5066924/giulio-colleluori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1569416165, "creation_date": 1542180276, "question_id": 53295011, "link": "https://stackoverflow.com/questions/53295011/androidx-jetpack-navigationui-overriding-action-on-non-navigation-item-in-draw", "title": "AndroidX JetPack NavigationUI - Overriding Action on Non-Navigation Item In Drawer", "body": "<p>I just started using Android NavigationUI to implement Fragment Navigation through a drawer menu. While it does feel a bit like magic, I have one main issue with it. That is, I have a <code>logout</code> item in the menu that should not Navigate to any Fragment, but rather to an \"action\". While I found similar questions here such as <a href=\"https://stackoverflow.com/questions/52699935/android-jetpack-navigation-custom-action-with-drawer-item\">this</a> one, I haven't found a clear answer to my question yet. The following is the function I'm currently using to setup the navigation:</p>\n\n<pre><code>private fun setupNav() {\n    val binding: ActivityMainMenuBinding = DataBindingUtil.setContentView(this,\n            R.layout.activity_main_menu)\n    drawerLayout = binding.drawerLayout\n    navController = Navigation.findNavController(this, R.id.content_frame)\n    appBarConfiguration = AppBarConfiguration(navController.graph, drawerLayout)\n\n    // Set up ActionBar\n    setSupportActionBar(binding.toolbar)\n    setupActionBarWithNavController(navController, appBarConfiguration)\n    binding.navView.setupWithNavController(navController)\n}\n</code></pre>\n\n<p>If you have any suggestions on how I could approach this, it would be truly appreciated if you could share them.</p>\n"}, {"tags": ["java", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 5, "last_activity_date": 1542180013, "creation_date": 1542180013, "answer_id": 53294958, "question_id": 53294668, "link": "https://stackoverflow.com/questions/53294668/how-do-i-zip-a-list-and-skip-next-in-kotlin/53294958#53294958", "title": "How do I zip a list and skip next in Kotlin?", "body": "<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/chunked.html\" rel=\"noreferrer\"><code>chunked</code></a> is the closest standard library function for this:</p>\n\n<pre><code>val list = listOf(1, 2, 3, 4, 5)\nlist.chunked(2) // [[1, 2], [3, 4], [5]]\n</code></pre>\n\n<p>If you need a <code>0</code> or <code>null</code> in the last chunk, I'd just pad the list accordingly before calling this function:</p>\n\n<pre><code>val list = listOf(1, 2, 3, 4, 5)\n\nval paddedList = if (list.size % 2 == 0) list else (list + 0) // [1, 2, 3, 4, 5, 0]\n\npaddedList.chunked(2) // [[1, 2], [3, 4], [5, 0]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12380545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bf312344548822c4b0f93a31290dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Alex F.", "link": "https://stackoverflow.com/users/12380545/alex-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1573853507, "creation_date": 1573853507, "answer_id": 58884972, "question_id": 53294668, "link": "https://stackoverflow.com/questions/53294668/how-do-i-zip-a-list-and-skip-next-in-kotlin/58884972#58884972", "title": "How do I zip a list and skip next in Kotlin?", "body": "<p>You else can use this function:\nlist.windowed(2, 2, true)</p>\n\n<p>windowed is more flexible function,\njust look:</p>\n\n<pre><code>val list = listOf(1, 2, 3, 4, 5)\nlist.windowed(2, 2, true) {\n    if (it.size % 2 != 0) listOf(it.first(), null) else it.toList()\n} // [[1, 2], [3, 4], [5, null]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12380545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bf312344548822c4b0f93a31290dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Alex F.", "link": "https://stackoverflow.com/users/12380545/alex-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1573935580, "creation_date": 1573935580, "answer_id": 58894822, "question_id": 53294668, "link": "https://stackoverflow.com/questions/53294668/how-do-i-zip-a-list-and-skip-next-in-kotlin/58894822#58894822", "title": "How do I zip a list and skip next in Kotlin?", "body": "<p>Also you can do it this way:  </p>\n\n<pre><code>val list = listOf(1, 2, 3, 4, 5)\nwith(list.windowed(2, 2, true))\n{\n    var newMutableList: MutableList&lt;List&lt;Int&gt;&gt; =\n        ArrayList(0)\n    if (size &gt; 0 &amp;&amp; size % 2 != 0) {\n        newMutableList = this.toMutableList()\n        newMutableList[newMutableList.lastIndex] += listOf(0)\n    }\n\n    if (newMutableList.isEmpty()) this else newMutableList\n}\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 4952478, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/XiyUZ.jpg?s=128&g=1", "display_name": "RainFool", "link": "https://stackoverflow.com/users/4952478/rainfool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "accepted_answer_id": 53294958, "answer_count": 3, "score": 1, "last_activity_date": 1573935580, "creation_date": 1542178688, "last_edit_date": 1542179146, "question_id": 53294668, "link": "https://stackoverflow.com/questions/53294668/how-do-i-zip-a-list-and-skip-next-in-kotlin", "title": "How do I zip a list and skip next in Kotlin?", "body": "<p>I hope a list like \n<code>[1,2,3,4,5]</code>\nwould be <code>[(1,2),(3,4),(5,0 or null)]</code>.</p>\n\n<p>What operation should I use in Kotlin or Java.</p>\n\n<p>And I tried zipWithNext, it will be <code>[(1,2),(2,3),(3,4),(4,5)]</code></p>\n"}, {"tags": ["android", "kotlin", "rsa"], "comments": [{"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1542184834, "post_id": 53294291, "comment_id": 93472858, "body": "refer <a href=\"https://stackoverflow.com/questions/10007147/getting-a-illegalblocksizeexception-data-must-not-be-longer-than-256-bytes-when\" title=\"getting a illegalblocksizeexception data must not be longer than 256 bytes when\">stackoverflow.com/questions/10007147/&hellip;</a>"}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1542185239, "post_id": 53294291, "comment_id": 93473074, "body": "With PKCS1Padding adds 11 bytes of padding so a message of the key size will be to large by 11 bytes. See the above comment link."}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1542207255, "post_id": 53294291, "comment_id": 93486646, "body": "I don&#39;t believe that exception is possible with the data you&#39;ve supplied. First of all, the private is not in PKCS#8 format, so I don&#39;t see how your code could&#39;ve gotten past the <code>keyFactory.generatePrivate(spec)</code> without throwing an exception at that point."}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1542218117, "post_id": 53294291, "comment_id": 93493037, "body": "Well, I actually ran your an almost identical Java version of your code on an Android emulator and worked as is, which was very surprising."}], "answers": [{"tags": [], "owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "is_accepted": false, "score": 0, "last_activity_date": 1542234142, "creation_date": 1542234142, "answer_id": 53309616, "question_id": 53294291, "link": "https://stackoverflow.com/questions/53294291/illegalblocksizeexception-when-decrypt-string-by-rsa-2048-private-key/53309616#53309616", "title": "IllegalBlockSizeException when Decrypt String by RSA 2048 Private Key", "body": "<p>The problem was very simple. You failed to base64-decode the <code>plain</code> argument. As an interesting aside, the Bouncycastle provider is somewhat forgiving in its PKCS8EncodedKeySpec generator. If the data passed is <em>not</em> PKCS8 then it attempts to parse it as a <a href=\"https://tools.ietf.org/html/rfc8017#appendix-A.1.2\" rel=\"nofollow noreferrer\">PKCS #1 RSA Private key</a>, and only if that fails does it finally throw an exception. You private key is formatting according to PKCS#1, not PKCS#8.</p>\n"}], "owner": {"reputation": 153, "user_id": 5113390, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bdf0343aa91f1f0335fd5172efa8e217?s=128&d=identicon&r=PG&f=1", "display_name": "shisushi", "link": "https://stackoverflow.com/users/5113390/shisushi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542234142, "creation_date": 1542176936, "last_edit_date": 1542206811, "question_id": 53294291, "link": "https://stackoverflow.com/questions/53294291/illegalblocksizeexception-when-decrypt-string-by-rsa-2048-private-key", "title": "IllegalBlockSizeException when Decrypt String by RSA 2048 Private Key", "body": "<p>I was trying to decrypt the string by RSA 2048 private key, but the error below is occurred.</p>\n\n<pre><code>java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:811)\n     Caused by: java.lang.reflect.InvocationTargetException\n        at java.lang.reflect.Method.invoke(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:372)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1016)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:811)\u00a0\n     Caused by: javax.crypto.IllegalBlockSizeException: input must be under 256 bytes\n        at com.android.org.conscrypt.OpenSSLCipherRSA.engineDoFinal(OpenSSLCipherRSA.java:245)\n        at javax.crypto.Cipher.doFinal(Cipher.java:1340)\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>private fun rsaDecrypt(key: String, plain: String): String {\n    var privateKey = \"\"\n    if (key.contains(\"-----BEGIN RSA PRIVATE KEY-----\") || key.contains(\"-----END RSA PRIVATE KEY-----\")) {\n        privateKey = key.replace(\"-----BEGIN RSA PRIVATE KEY-----\", \"\").replace(\"-----END RSA PRIVATE KEY-----\", \"\")\n    }\n\n    val base64Key = Base64.decode(privateKey.toByteArray(Charsets.UTF_8), Base64.DEFAULT)\n    val spec = PKCS8EncodedKeySpec(base64Key)\n    val keyFactory = KeyFactory.getInstance(\"RSA\", \"BC\")\n    val rsaPrivateKey = keyFactory.generatePrivate(spec)\n\n    val cipher = Cipher.getInstance(\"RSA/ECB/PKCS1Padding\")\n    cipher.init(Cipher.DECRYPT_MODE, rsaPrivateKey)\n    val decryptedBytes = cipher.doFinal(plain.toByteArray(Charsets.UTF_8))\n\n    return Base64.encodeToString(decryptedBytes, Base64.DEFAULT)\n}\n</code></pre>\n\n<p>Encrypted string:</p>\n\n<pre><code>fhTGWW3Zn/nnhXoQO2Y3eKfYkBe/um7XUu2SlrnXMHT7tqT+KvcEUWXnJvLgN7/jpJp8ZOFvHiB6w8OFjPob7VSzQbyultpkFvBGZR7Z6j8m24IoqAPj2OhZDPQ4W8kza4eu/LP2560MfcbJqblOG0tcVF72fQZ2fXKPVRyWv53pDLfxC38+jxdd+49mSTRcl7sfyYvqvW4HVb4IHnwwt+m+1Y4zG7GFxnP+FuywgXmELO1skNCdCHxZ2zopZDtZiBA0vplEkWv18V2lF7SNnaN17SVQQc83yfZnwTQjbfKBWd0HU+4DKtO5ADGJmMCMRV0ceq+BnP141Q45CFDxbQ==\n</code></pre>\n\n<p>Private key:</p>\n\n<pre><code>-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAk2ZbtbEaZhgdRzOecjfgsQqvlPf7SizxrAqT1PW3clXf9Lfq\nZE48aScg/S0Ji0JlgFcD3Ycg/+YTnZZTwCxsG/DgLP8Y2Oiq1wBivuMnOzIh9+Ty\noRAKJvvsc9C0ZfI0XMLntM4utlb772/bmaHJPkW0p8KIuIHBqLYHcMKAy1R08Xmm\nfQ6Q5JLy0uFy3wWTqbdk7uXDDfbo4C9MiGdVYa0RGlt703aYpSc3d9Du3U2Xm3dt\nQ0zgbBQnmzpahuW/J7hWCNdeoAXbekX0YV38vmVWf1DI+OQXHqKvy/nHflJXcQXe\nv7hgJA5oFvAvW0MwaC++Pp2E5fRdD5PZ2qHmnwIDAQABAoIBAHkqjj74O9wq/H5Y\nR2pa1qCSSS1rAC3EblFfTJCmAEvDndr8CHi1+2DxImQcTpkkVm2+mdXTy+OvzPYg\n6e2yVphNVOqINHOyJyWgEowaDFjT6CpwEKcnmUDcnE3EBVc8V6DdMz1ks+9955G2\n4M0UumovQMca2erZ90jpgYpGyTrahG7nN2HKaxO2mcJzZPXJzFyc1SrY1IPpEtlP\nxsLsnaRjE2DgClf72DBI0Qwa/ZaRjnjnAcvU4tVp2BIZYLqKpXU/1LMiRF39LKQC\ncoVFwzqLLkb84v6ReGy8J2mWQpSuyWpmGiLacMyBf1OPDkAa/gXpHUOg+jJOzVlX\nZsC9jDkCgYEA9/DMjSF//hdmSgxjQsLii/NJBdpa3t1yfo8q7hHwZQ9Xz0R4YPg3\nSifnGNI3TnRzpVqiGGkpYsogk8QwkVO4J8uvddUDshbFX5F7sReOJxwwNmTy5FR0\nfx/AEeJ3GhvkMfNBwZcaQtngK2UKu9rRsaF7bitL4intxU/EtmpDHU0CgYEAmDDs\njgbTkmgLsp7/vzot+lMTv6er4KB3AHTJWY9pDkNv5vvcyd/I04S/vFDar8FvlrXM\nqlcAYptnpUBUPWJ43cnE8VBz2pwInNzty490YHH1mQ622801vAOiZ0t7dowypuip\nqE3zYTRUc+qqZmeZYw8IWX/uqxizz67yHelrTZsCgYBZZ6ta+Ml+hlGMQgtI951Z\nedDLG4HI+3Fd0aJZVn6o8m9nffkqflbxlpHukV8AG13YMmZhBwq1ZM16ezRIMzgk\noX4Tr0w126AwZfWEVkocMD3yX1R2oT2g2YIY8OChuYz/tgfwFtyRXp9HBphoRO94\nbhJkF5i1ZQkoLStx2793wQKBgD4827BlSEZ6ODZu4WWhdEYHjW72McrltGTCXck7\nZZoIqA2M+EiyNJ2TjxmC8zum3myColUSyTyKEwO4X/rOd2Ez709EOGyxHLCRhMmX\nO99pGyfhpZQTwqLF1bdqXe4n/VrWkPMcFaitzs+sqszAFzE0Z5S6Ra9ApeALykXD\nPDd7AoGBAPQEoz1MYCT58LMwZwJJPeX6RbHp0j9rnzOoHcZof2XBCZ1JmTDtQ6F7\nP1Exmmt/UH1km0Nq/caJx2M751bAPP+hM5t4ycZAzpQQsiZaXHDtq+OAIAPyC+vf\nnnfSk8udDv445chqGZiMGIwg3XavoUJ5yzu8CTKd5dItxPwzG46Z\n-----END RSA PRIVATE KEY-----\n</code></pre>\n\n<p>How can I decrypt the string?</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin", "android-framelayout"], "comments": [{"owner": {"reputation": 1880, "user_id": 1269074, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NSGtc.jpg?s=128&g=1", "display_name": "Oladipo Olasemo", "link": "https://stackoverflow.com/users/1269074/oladipo-olasemo"}, "edited": false, "score": 0, "creation_date": 1559810206, "post_id": 53294194, "comment_id": 99538112, "body": "Did you get a fix for this eventually?"}, {"owner": {"reputation": 231, "user_id": 1992895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29519e96726b0edf5d765bfdc4aa7b8e?s=128&d=identicon&r=PG", "display_name": "Ashish singh", "link": "https://stackoverflow.com/users/1992895/ashish-singh"}, "reply_to_user": {"reputation": 1880, "user_id": 1269074, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NSGtc.jpg?s=128&g=1", "display_name": "Oladipo Olasemo", "link": "https://stackoverflow.com/users/1269074/oladipo-olasemo"}, "edited": false, "score": 0, "creation_date": 1559812471, "post_id": 53294194, "comment_id": 99539234, "body": "@OladipoOlasemo yes ..! I used ontouchEvent for background view . I have divided the view in three rect ,and on basis of whatever rect user touches ,I have corresponding callback ."}, {"owner": {"reputation": 1880, "user_id": 1269074, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NSGtc.jpg?s=128&g=1", "display_name": "Oladipo Olasemo", "link": "https://stackoverflow.com/users/1269074/oladipo-olasemo"}, "edited": false, "score": 0, "creation_date": 1559812606, "post_id": 53294194, "comment_id": 99539311, "body": "can you share a sample of the code/implementation?"}, {"owner": {"reputation": 231, "user_id": 1992895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29519e96726b0edf5d765bfdc4aa7b8e?s=128&d=identicon&r=PG", "display_name": "Ashish singh", "link": "https://stackoverflow.com/users/1992895/ashish-singh"}, "reply_to_user": {"reputation": 1880, "user_id": 1269074, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NSGtc.jpg?s=128&g=1", "display_name": "Oladipo Olasemo", "link": "https://stackoverflow.com/users/1269074/oladipo-olasemo"}, "edited": false, "score": 1, "creation_date": 1559814212, "post_id": 53294194, "comment_id": 99540182, "body": "@OladipoOlasemo .. Posted in answer"}], "answers": [{"tags": [], "owner": {"reputation": 231, "user_id": 1992895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29519e96726b0edf5d765bfdc4aa7b8e?s=128&d=identicon&r=PG", "display_name": "Ashish singh", "link": "https://stackoverflow.com/users/1992895/ashish-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1559813940, "creation_date": 1559813940, "answer_id": 56474858, "question_id": 53294194, "link": "https://stackoverflow.com/questions/53294194/how-to-pass-click-events-to-overlapping-views-in-framelayout/56474858#56474858", "title": "How to pass Click Events to overlapping views in framelayout", "body": "<pre><code>open class RecyclerItemTouchHelper(dragDirs: Int, swipeDirs: Int, private val listener: RecyclerItemTouchHelperListener) : ItemTouchHelper.SimpleCallback(dragDirs, swipeDirs) {\n\noverride fun onMove(recyclerView: androidx.recyclerview.widget.RecyclerView, viewHolder: androidx.recyclerview.widget.RecyclerView.ViewHolder, target: androidx.recyclerview.widget.RecyclerView.ViewHolder): Boolean {\n    return true\n}\n\noverride fun onSelectedChanged(viewHolder: androidx.recyclerview.widget.RecyclerView.ViewHolder?, actionState: Int) {\n    if (viewHolder != null) {\n        val foregroundView = (viewHolder as InboxListAdapter.InboxItemHolder).viewForeground\n\n        getDefaultUIUtil().onSelected(foregroundView)\n    }\n}\n\noverride fun onChildDrawOver(c: Canvas, recyclerView: androidx.recyclerview.widget.RecyclerView,\n                             viewHolder: androidx.recyclerview.widget.RecyclerView.ViewHolder, dX: Float, dY: Float,\n                             actionState: Int, isCurrentlyActive: Boolean) {\n    val foregroundView = (viewHolder as InboxListAdapter.InboxItemHolder).viewForeground\n    getDefaultUIUtil().onDrawOver(c, recyclerView, foregroundView, dX, dY,\n            actionState, isCurrentlyActive)\n}\n\noverride fun clearView(recyclerView: androidx.recyclerview.widget.RecyclerView, viewHolder: androidx.recyclerview.widget.RecyclerView.ViewHolder) {\n    val foregroundView = (viewHolder as InboxListAdapter.InboxItemHolder).viewForeground\n    getDefaultUIUtil().clearView(foregroundView)\n}\n\noverride fun onChildDraw(c: Canvas, recyclerView: androidx.recyclerview.widget.RecyclerView,\n                         viewHolder: androidx.recyclerview.widget.RecyclerView.ViewHolder, dX: Float, dY: Float,\n                         actionState: Int, isCurrentlyActive: Boolean) {\n    val foregroundView = (viewHolder as InboxListAdapter.InboxItemHolder).viewForeground\n    getDefaultUIUtil().onDraw(c, recyclerView, foregroundView, dX, dY,\n            actionState, isCurrentlyActive)\n\n    listener.onChildDraw(viewHolder, viewHolder.adapterPosition, dX, dY)\n}\n\noverride fun onSwiped(viewHolder: androidx.recyclerview.widget.RecyclerView.ViewHolder, direction: Int) {\n    listener.onSwiped(viewHolder, direction, viewHolder.adapterPosition)\n}\n\noverride fun convertToAbsoluteDirection(flags: Int, layoutDirection: Int): Int {\n    return super.convertToAbsoluteDirection(flags, layoutDirection)\n}\n\noverride fun getSwipeDirs(recyclerView: androidx.recyclerview.widget.RecyclerView, viewHolder: androidx.recyclerview.widget.RecyclerView.ViewHolder): Int {\n    listener.getSwipeDirs(viewHolder)\n    return super.getSwipeDirs(recyclerView, viewHolder)\n}\n\n\n\ninterface RecyclerItemTouchHelperListener {\n    fun onSwiped(viewHolder: androidx.recyclerview.widget.RecyclerView.ViewHolder, direction: Int, position: Int)\n    fun onChildDraw(viewHolder: androidx.recyclerview.widget.RecyclerView.ViewHolder, position: Int, dX : Float, dY : Float)\n    fun getSwipeDirs(viewHolder: androidx.recyclerview.widget.RecyclerView.ViewHolder)\n}\n}\n</code></pre>\n\n<p>// onCreatView of fragment / OnCreate of activity</p>\n\n<pre><code>recyclerView_inbox.setOnTouchListener { _, motionEvent -&gt;\n            if (motionEvent.action == MotionEvent.ACTION_DOWN) {\n                val point = Point(motionEvent.x.toInt(), motionEvent.y.toInt())\n\n                if (mSwipeState == SWIPE_STATE_RIGHT) {\n                    if (mItemClickRegionRect!!.contains(point.x, point.y)) {\n                        when {\n                            mSpamBtnClickRegionRect!!.contains(point.x, point.y) -&gt;{}\n                            mMoveBtnClickRegionRect!!.contains(point.x, point.y) -&gt; {\n                                moveMailDialog()\n                            }\n                            mUnreadBtnClickRegionRect!!.contains(point.x, point.y) -&gt;{\n                                markUnread()\n                            }\n                        }\n                    }\n                }\n            }\n            false\n        }\n\n        mItemTouchHelperCallback = RecyclerItemTouchHelper(0, ItemTouchHelper.LEFT or ItemTouchHelper.RIGHT, this)\n\n        ItemTouchHelper(mItemTouchHelperCallback!!).attachToRecyclerView(recyclerView_inbox)\n</code></pre>\n\n<p>// implemented callback in fragment/Activity</p>\n\n<pre><code>  override fun onSwiped(viewHolder: RecyclerView.ViewHolder, direction: Int, position: Int) {\n            if (viewHolder is InboxListAdapter.InboxItemHolder) {\n                if (direction == ItemTouchHelper.LEFT) {\n                    val item = mInboxListAdapter!!.getItem(position)\n                    // mInboxListAdapter!!.removeItem(position)\n                    // Toast.makeText(context, \"Deleted\", Toast.LENGTH_SHORT).show()\n                    mPresenter.deleteMail(item, mFolderName!!, mFolderId!!, 20, 0, \"\", mTrashfolderId, position)\n            }\n\n        mFlagSwiped = true\n        mEditPosition = viewHolder.adapterPosition\n\n        val spamBtnView = viewHolder.spamButtonLayout\n        val unreadBtnView = viewHolder.unreadButtonLayout\n        val moveBtnView = viewHolder.moveButtonLayout\n\n\n        mItemClickRegionRect = Rect(viewHolder.itemView.left,\n                viewHolder.itemView.top + recyclerView_inbox.y.toInt(),\n                viewHolder.itemView.right,\n                viewHolder.itemView.bottom + recyclerView_inbox.y.toInt())\n\n        mSpamBtnClickRegionRect = Rect(spamBtnView.left + mItemClickRegionRect!!.left,\n                spamBtnView.top + mItemClickRegionRect!!.top,\n                spamBtnView.right + mItemClickRegionRect!!.left,\n                spamBtnView.bottom + mItemClickRegionRect!!.top)\n\n        mUnreadBtnClickRegionRect = Rect(unreadBtnView.left + mItemClickRegionRect!!.left,\n                unreadBtnView.top + mItemClickRegionRect!!.top,\n                unreadBtnView.right + mItemClickRegionRect!!.left,\n                unreadBtnView.bottom + mItemClickRegionRect!!.top)\n\n        mMoveBtnClickRegionRect = Rect(moveBtnView.left + mItemClickRegionRect!!.left,\n                moveBtnView.top + mItemClickRegionRect!!.top,\n                moveBtnView.right + mItemClickRegionRect!!.left,\n                moveBtnView.bottom + mItemClickRegionRect!!.top)\n\n\n    }\n}\n\noverride fun onChildDraw(viewHolder:RecyclerView.ViewHolder, position: Int, dX: Float, dY: Float) {\n    if (viewHolder is InboxListAdapter.InboxItemHolder) {\n        if (dX &gt;= resources.displayMetrics.widthPixels) {\n            if (mSwipeState != SWIPE_STATE_RIGHT) {\n                mPositionSwiped = position\n                mSwipeState = SWIPE_STATE_RIGHT\n                Toast.makeText(context, \"SWIPE_STATE_RIGHT\", Toast.LENGTH_SHORT).show()\n            }\n        } else if (dX &lt;= -resources.displayMetrics.widthPixels) {\n            if (mSwipeState != SWIPE_STATE_LEFT) {\n                mSwipeState = SWIPE_STATE_LEFT\n                Toast.makeText(context, \"SWIPE_STATE_LEFT\", Toast.LENGTH_SHORT).show()\n            }\n        } else if (dX == 0f) {\n            if (mSwipeState != SWIPE_STATE_MID) {\n                mSwipeState = SWIPE_STATE_MID\n                Toast.makeText(context, \"SWIPE_STATE_MID\", Toast.LENGTH_SHORT).show()\n            }\n        }\n\n        when (dX &gt; 0) {\n            true -&gt; {\n                viewHolder.viewBackGround.setBackgroundColor(ContextCompat.getColor(context!!, R.color.mailSwipeMenu))\n                viewHolder.viewRightSwipe.visibility = View.VISIBLE\n                viewHolder.viewLeftSwipe.visibility = View.GONE\n            }\n            false -&gt; {\n                viewHolder.viewBackGround.setBackgroundColor(ContextCompat.getColor(context!!, R.color.mailSwipeDelete))\n                viewHolder.viewRightSwipe.visibility = View.GONE\n                viewHolder.viewLeftSwipe.visibility = View.VISIBLE\n            }\n        }\n    }\n}\n\noverride fun getSwipeDirs(viewHolder: RecyclerView.ViewHolder) {\n    val position = viewHolder.adapterPosition\n    if (position != mEditPosition) {\n        if (mEditPosition != -1 &amp;&amp; mFlagSwiped) {\n            mInboxListAdapter!!.notifyItemChanged(mEditPosition)\n            mFlagSwiped = false\n            mEditPosition = position\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 1992895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29519e96726b0edf5d765bfdc4aa7b8e?s=128&d=identicon&r=PG", "display_name": "Ashish singh", "link": "https://stackoverflow.com/users/1992895/ashish-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1559813940, "creation_date": 1542176409, "question_id": 53294194, "link": "https://stackoverflow.com/questions/53294194/how-to-pass-click-events-to-overlapping-views-in-framelayout", "title": "How to pass Click Events to overlapping views in framelayout", "body": "<p>Here I have made a <em>RecyclerView</em> , each row in list consist of frameLayout with two primary child layout (Background RelativeLayout and foreGround RelativeLayout) overlapping each other .</p>\n\n<p>Using ItemTouchHelper.SimpleCallback ,I am swiping the foreground layout to reveal the background layout .</p>\n\n<p>I am not able to get ClickEvent on any of the entities in background . Please find code </p>\n\n<p><strong>list_row.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"vertical\"&gt;\n    &lt;!-- android:paddingStart=\"?listPreferredItemPaddingLeft\"\n     android:paddingTop=\"@dimen/padding_list_row\"\n     android:paddingEnd=\"?listPreferredItemPaddingRight\"\n     android:paddingBottom=\"@dimen/padding_list_row\"--&gt;\n\n    &lt;RelativeLayout\n        android:id=\"@+id/view_background\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:background=\"@color/mailSwipeMenu\"&gt;\n\n        &lt;LinearLayout\n            android:id=\"@+id/right_swipe_options_layout\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_centerVertical=\"true\"\n            android:gravity=\"center\"\n            android:orientation=\"horizontal\"\n            android:visibility=\"gone\"&gt;\n\n            &lt;RelativeLayout\n                android:id=\"@+id/unread_btn_layout\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginStart=\"@dimen/padding_10\"\n                android:layout_marginEnd=\"@dimen/padding_10\"\n                android:gravity=\"center\"&gt;\n\n                &lt;ImageView\n                    android:id=\"@+id/mark_unread_icon\"\n                    android:layout_width=\"@dimen/icon_delete\"\n                    android:layout_height=\"@dimen/icon_delete\"\n                    android:layout_centerHorizontal=\"true\"\n                    android:layout_marginBottom=\"@dimen/padding_6\"\n                    android:src=\"@drawable/icon_read_button\" /&gt;\n\n                &lt;TextView\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_below=\"@id/mark_unread_icon\"\n                    android:layout_centerHorizontal=\"true\"\n                    android:text=\"@string/mark_as_unread\"\n                    android:textColor=\"#fff\"\n                    android:textSize=\"@dimen/text_icon\" /&gt;\n            &lt;/RelativeLayout&gt;\n\n            &lt;RelativeLayout\n                android:id=\"@+id/spam_btn_layout\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginStart=\"@dimen/padding_10\"\n                android:layout_marginEnd=\"@dimen/padding_10\"\n                android:gravity=\"center\"&gt;\n\n                &lt;ImageView\n                    android:id=\"@+id/report_spam_icon\"\n                    android:layout_width=\"@dimen/icon_delete\"\n                    android:layout_height=\"@dimen/icon_delete\"\n                    android:layout_centerHorizontal=\"true\"\n                    android:layout_marginBottom=\"@dimen/padding_6\"\n                    android:src=\"@drawable/icon_spam_button\" /&gt;\n\n                &lt;TextView\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_below=\"@id/report_spam_icon\"\n                    android:layout_centerHorizontal=\"true\"\n                    android:text=\"@string/report_spam\"\n                    android:textColor=\"#fff\"\n                    android:textSize=\"@dimen/text_icon\" /&gt;\n            &lt;/RelativeLayout&gt;\n\n            &lt;RelativeLayout\n                android:id=\"@+id/move_btn_layout\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginStart=\"@dimen/padding_10\"\n                android:layout_marginEnd=\"@dimen/padding_10\"\n                android:gravity=\"center\"&gt;\n\n                &lt;ImageView\n                    android:id=\"@+id/move_mail_icon\"\n                    android:layout_width=\"@dimen/icon_delete\"\n                    android:layout_height=\"@dimen/icon_delete\"\n                    android:layout_centerHorizontal=\"true\"\n                    android:layout_marginBottom=\"@dimen/padding_6\"\n                    android:src=\"@drawable/icon_move_button\" /&gt;\n\n                &lt;TextView\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_below=\"@id/move_mail_icon\"\n                    android:layout_centerHorizontal=\"true\"\n                    android:text=\"@string/move_mail\"\n                    android:textColor=\"#fff\"\n                    android:textSize=\"@dimen/text_icon\" /&gt;\n            &lt;/RelativeLayout&gt;\n\n\n        &lt;/LinearLayout&gt;\n\n        &lt;RelativeLayout\n            android:id=\"@+id/left_swipe_options_layout\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentEnd=\"true\"\n            android:layout_centerVertical=\"true\"\n            android:layout_marginEnd=\"@dimen/padding_10\"\n            android:gravity=\"center\"\n            android:visibility=\"gone\"&gt;\n\n            &lt;ImageView\n                android:id=\"@+id/delete_icon\"\n                android:layout_width=\"@dimen/icon_delete\"\n                android:layout_height=\"@dimen/icon_delete\"\n                android:layout_centerHorizontal=\"true\"\n                android:layout_marginBottom=\"@dimen/padding_6\"\n                android:src=\"@drawable/icon_delete_button\" /&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@id/delete_icon\"\n                android:layout_centerHorizontal=\"true\"\n                android:text=\"@string/delete\"\n                android:textColor=\"#fff\"\n                android:textSize=\"@dimen/text_icon\" /&gt;\n        &lt;/RelativeLayout&gt;\n\n    &lt;/RelativeLayout&gt;\n\n    &lt;RelativeLayout\n        android:id=\"@+id/view_foreground\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@drawable/bg_list_row_inbox\"\n        android:orientation=\"vertical\"\n        android:padding=\"@dimen/padding_10\"&gt;\n\n        &lt;LinearLayout\n            android:id=\"@+id/message_container\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:orientation=\"vertical\"\n            android:paddingStart=\"72dp\"\n            android:paddingEnd=\"@dimen/padding_list_row\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/from\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:ellipsize=\"end\"\n                android:lines=\"1\"\n                android:textColor=\"@color/from\"\n                android:textSize=\"@dimen/msg_text_primary\"\n                android:textStyle=\"bold\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/txt_primary\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:ellipsize=\"end\"\n                android:lines=\"1\"\n                android:textColor=\"@color/subject\"\n                android:textSize=\"@dimen/msg_text_secondary\"\n                android:textStyle=\"bold\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/txt_secondary\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:ellipsize=\"end\"\n                android:lines=\"1\"\n                android:textColor=\"@color/message\"\n                android:textSize=\"@dimen/msg_text_secondary\" /&gt;\n\n        &lt;/LinearLayout&gt;\n\n        &lt;RelativeLayout\n            android:id=\"@+id/select_icon_container\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_centerVertical=\"true\"\n            android:orientation=\"vertical\"&gt;\n\n            &lt;RelativeLayout\n                android:id=\"@+id/icon_back\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"&gt;\n\n                &lt;ImageView\n                    android:layout_width=\"@dimen/icon_width_height\"\n                    android:layout_height=\"@dimen/icon_width_height\"\n                    android:src=\"@drawable/bg_circle\" /&gt;\n\n                &lt;ImageView\n                    android:layout_width=\"25dp\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_centerInParent=\"true\"\n                    app:srcCompat=\"@drawable/icon_check_white_24dp\" /&gt;\n\n            &lt;/RelativeLayout&gt;\n\n            &lt;RelativeLayout\n                android:id=\"@+id/icon_front\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"&gt;\n\n                &lt;ImageView\n                    android:id=\"@+id/icon_profile\"\n                    android:layout_width=\"@dimen/icon_width_height\"\n                    android:layout_height=\"@dimen/icon_width_height\" /&gt;\n\n                &lt;TextView\n                    android:id=\"@+id/icon_text\"\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_centerInParent=\"true\"\n                    android:textColor=\"@android:color/white\"\n                    android:textSize=\"@dimen/text_icon\" /&gt;\n            &lt;/RelativeLayout&gt;\n\n        &lt;/RelativeLayout&gt;\n\n        &lt;TextView\n            android:id=\"@+id/timestamp\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentEnd=\"true\"\n            android:textColor=\"@color/timestamp\"\n            android:textSize=\"@dimen/text_timestamp\"\n            android:textStyle=\"bold\" /&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/icon_star\"\n            android:layout_width=\"@dimen/icon_star\"\n            android:layout_height=\"@dimen/icon_star\"\n            android:layout_alignParentEnd=\"true\"\n            android:layout_alignParentBottom=\"true\"\n            android:tint=\"@color/icon_tint_normal\" /&gt;\n\n    &lt;/RelativeLayout&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n\n<p><strong>RecyclerItemTouchHelper.kt</strong></p>\n\n<pre><code>    open class RecyclerItemTouchHelper(dragDirs: Int, swipeDirs: Int, private val listener: RecyclerItemTouchHelperListener) : ItemTouchHelper.SimpleCallback(dragDirs, swipeDirs) {\n\n    override fun onMove(recyclerView: RecyclerView, viewHolder: RecyclerView.ViewHolder, target: RecyclerView.ViewHolder): Boolean {\n        return true\n    }\n\n    override fun onSelectedChanged(viewHolder: RecyclerView.ViewHolder?, actionState: Int) {\n        if (viewHolder != null) {\n            val foregroundView = (viewHolder as InboxListAdapter.InboxItemHolder).viewForeground\n\n            getDefaultUIUtil().onSelected(foregroundView)\n        }\n    }\n\n    override fun onChildDrawOver(c: Canvas, recyclerView: RecyclerView,\n                        viewHolder: RecyclerView.ViewHolder, dX: Float, dY: Float,\n                        actionState: Int, isCurrentlyActive: Boolean) {\n        val foregroundView = (viewHolder as InboxListAdapter.InboxItemHolder).viewForeground\n        getDefaultUIUtil().onDrawOver(c, recyclerView, foregroundView, dX, dY,\n                actionState, isCurrentlyActive)\n    }\n\n    override fun clearView(recyclerView: RecyclerView?, viewHolder: RecyclerView.ViewHolder) {\n        val foregroundView = (viewHolder as InboxListAdapter.InboxItemHolder).viewForeground\n        getDefaultUIUtil().clearView(foregroundView)\n        listener.onForegroundViewRestored(viewHolder,viewHolder.adapterPosition)\n    }\n\n    override fun onChildDraw(c: Canvas, recyclerView: RecyclerView,\n                    viewHolder: RecyclerView.ViewHolder, dX: Float, dY: Float,\n                    actionState: Int, isCurrentlyActive: Boolean) {\n        val foregroundView = (viewHolder as InboxListAdapter.InboxItemHolder).viewForeground\n\n        listener.onSwipeStart(viewHolder, if (dX &lt; 0) ItemTouchHelper.LEFT else ItemTouchHelper.RIGHT, viewHolder.adapterPosition)\n        getDefaultUIUtil().onDraw(c, recyclerView, foregroundView, dX * .9F, dY,\n                actionState, isCurrentlyActive)\n    }\n\n    override fun onSwiped(viewHolder: RecyclerView.ViewHolder, direction: Int) {\n        listener.onSwiped(viewHolder, direction, viewHolder.adapterPosition)\n    }\n\n    override fun convertToAbsoluteDirection(flags: Int, layoutDirection: Int): Int {\n        return super.convertToAbsoluteDirection(flags, layoutDirection)\n    }\n\n\n\n    interface RecyclerItemTouchHelperListener {\n        fun onSwiped(viewHolder: RecyclerView.ViewHolder, direction: Int, position: Int)\n        fun onSwipeStart(viewHolder: RecyclerView.ViewHolder, direction: Int, position: Int)\n        fun onForegroundViewRestored(viewHolder: RecyclerView.ViewHolder, position: Int)\n    }\n}\n</code></pre>\n\n<p><strong>InboxListAdapter.kt</strong></p>\n\n<pre><code>class InboxListAdapter() : RecyclerView.Adapter&lt;InboxListAdapter.InboxItemHolder&gt;() {\n\n\n    var mContext: Context? = null\n    private var messages = mutableListOf&lt;InboxItemModel&gt;()\n    var listener: MessageAdapterListener? = null\n    private var selectedItems: SparseBooleanArray? = null\n    private var animationItemsIndex: SparseBooleanArray? = null\n    private var reverseAllAnimations = false\n    private var currentSelectedIndex = -1\n\n    constructor(context: Context, messages: MutableList&lt;InboxItemModel&gt;, listener: MessageAdapterListener) : this() {\n        this.mContext = context\n        this.messages = messages\n        this.listener = listener\n        selectedItems = SparseBooleanArray()\n        animationItemsIndex = SparseBooleanArray()\n    }\n\n    inner class InboxItemHolder(view: View) : RecyclerView.ViewHolder(view), View.OnLongClickListener ,View.OnClickListener {\n        var viewForeground : RelativeLayout = view.findViewById&lt;View&gt;(R.id.view_foreground) as RelativeLayout\n        var viewBackGround : RelativeLayout = view.findViewById&lt;View&gt;(R.id.view_background) as RelativeLayout\n        var viewLeftSwipe : RelativeLayout = view.findViewById&lt;View&gt;(R.id.left_swipe_options_layout) as RelativeLayout\n        var viewRightSwipe : LinearLayout = view.findViewById&lt;View&gt;(R.id.right_swipe_options_layout) as LinearLayout\n        var spamButtonLayout : RelativeLayout = view.findViewById&lt;View&gt;(R.id.spam_btn_layout) as RelativeLayout\n        var moveButtonLayout : RelativeLayout = view.findViewById&lt;View&gt;(R.id.move_btn_layout) as RelativeLayout\n        var unreadButtonLayout : RelativeLayout = view.findViewById&lt;View&gt;(R.id.unread_btn_layout) as RelativeLayout\n        var deleteImageView : ImageView = view.findViewById&lt;View&gt;(R.id.delete_icon) as ImageView\n        var from: TextView = view.findViewById&lt;View&gt;(R.id.from) as TextView\n        var subject: TextView = view.findViewById&lt;View&gt;(R.id.txt_primary) as TextView\n        var message: TextView = view.findViewById&lt;View&gt;(R.id.txt_secondary) as TextView\n        var iconText: TextView = view.findViewById&lt;View&gt;(R.id.icon_text) as TextView\n        var timestamp: TextView = view.findViewById&lt;View&gt;(R.id.timestamp) as TextView\n        var iconImp: ImageView = view.findViewById&lt;View&gt;(R.id.icon_star) as ImageView\n        var imgProfile: ImageView = view.findViewById&lt;View&gt;(R.id.icon_profile) as ImageView\n        var messageContainer: LinearLayout = view.findViewById&lt;View&gt;(R.id.message_container) as LinearLayout\n        var iconContainer: RelativeLayout = view.findViewById&lt;View&gt;(R.id.select_icon_container) as RelativeLayout\n        var iconBack: RelativeLayout = view.findViewById&lt;View&gt;(R.id.icon_back) as RelativeLayout\n        var iconFront: RelativeLayout = view.findViewById&lt;View&gt;(R.id.icon_front) as RelativeLayout\n\n        init {\n            view.setOnLongClickListener(this)\n            spamButtonLayout.setOnClickListener(this)\n            moveButtonLayout.setOnClickListener(this)\n            unreadButtonLayout.setOnClickListener(this)\n            viewLeftSwipe.setOnClickListener(this)\n            deleteImageView.setOnClickListener(this)\n\n        }\n\n        override fun onLongClick(view: View): Boolean {\n            listener!!.onRowLongClicked(adapterPosition)\n            view.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS)\n            return true\n        }\n\n        override fun onClick(p0: View?) {\n            when(p0!!.id){\n                R.id.spam_btn_layout -&gt; listener!!.onSpamButtonClicked(adapterPosition)\n                R.id.unread_btn_layout -&gt; listener!!.onReadButtonClicked(adapterPosition)\n                R.id.move_btn_layout -&gt; listener!!.onMoveButtonClicked(adapterPosition)\n                R.id.left_swipe_options_layout -&gt; listener!!.onDeleteButtonClicked(adapterPosition)\n                R.id.delete_icon -&gt; listener!!.onDeleteButtonClicked(adapterPosition)\n            }\n        }\n    }\n\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): InboxItemHolder {\n        val itemView = LayoutInflater.from(parent.context)\n                .inflate(R.layout.list_row_inbox, parent, false)\n\n        return InboxItemHolder(itemView)\n    }\n\n    override fun onBindViewHolder(holder: InboxItemHolder, position: Int) {\n        val message = messages[position]\n\n        holder.from.text = message.sender\n        holder.subject.text = message.subject\n        holder.message.text = message.subject\n        holder.timestamp.text = message.timeStamp\n        holder.itemView.isActivated = selectedItems!!.get(position, false)\n\n\n[![enter image description here][1]][1]\n        // apply click events\n        applyClickEvents(holder, position)\n    }\n\n    private fun applyClickEvents(holder: InboxItemHolder, position: Int) {\n        holder.iconContainer.setOnClickListener { listener!!.onIconClicked(position) }\n\n        holder.iconImp.setOnClickListener { listener!!.onIconImportantClicked(position) }\n\n        holder.messageContainer.setOnClickListener { listener!!.onMessageRowClicked(position) }\n\n        holder.messageContainer.setOnLongClickListener { view -&gt;\n            listener!!.onRowLongClicked(position)\n            view.performHapticFeedback(HapticFeedbackConstants.LONG_PRESS)\n            true\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/4OUum.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4OUum.jpg\" alt=\"Swiping the foreground layout\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/XJVtY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XJVtY.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 696, "user_id": 5405965, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/I9Pwc.jpg?s=128&g=1", "display_name": "Ashish Choudhary", "link": "https://stackoverflow.com/users/5405965/ashish-choudhary"}, "edited": false, "score": 0, "creation_date": 1542177735, "post_id": 53294178, "comment_id": 93469890, "body": "what should I initialize player with ?"}, {"owner": {"reputation": 1754, "user_id": 8114201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lJjdC.jpg?s=128&g=1", "display_name": "VolkanSahin45", "link": "https://stackoverflow.com/users/8114201/volkansahin45"}, "reply_to_user": {"reputation": 696, "user_id": 5405965, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/I9Pwc.jpg?s=128&g=1", "display_name": "Ashish Choudhary", "link": "https://stackoverflow.com/users/5405965/ashish-choudhary"}, "edited": false, "score": 0, "creation_date": 1542184036, "post_id": 53294178, "comment_id": 93472472, "body": "You already initialize player in onCreate. &quot;youtube_player.initialize(Config.API_KEY,this)&quot;"}, {"owner": {"reputation": 696, "user_id": 5405965, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/I9Pwc.jpg?s=128&g=1", "display_name": "Ashish Choudhary", "link": "https://stackoverflow.com/users/5405965/ashish-choudhary"}, "edited": false, "score": 0, "creation_date": 1542187037, "post_id": 53294178, "comment_id": 93474150, "body": "hi, I tried doing so but I am getting an error  it is showing     kotlin.UninitializedPropertyAccessException: lateinit property player has not been initialized I have added this line just above onCreate() method     lateinit var player: YouTubePlayer"}, {"owner": {"reputation": 1754, "user_id": 8114201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lJjdC.jpg?s=128&g=1", "display_name": "VolkanSahin45", "link": "https://stackoverflow.com/users/8114201/volkansahin45"}, "reply_to_user": {"reputation": 696, "user_id": 5405965, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/I9Pwc.jpg?s=128&g=1", "display_name": "Ashish Choudhary", "link": "https://stackoverflow.com/users/5405965/ashish-choudhary"}, "edited": false, "score": 0, "creation_date": 1542196865, "post_id": 53294178, "comment_id": 93480095, "body": "Then you should check your api key and the docs. <a href=\"https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerView\" rel=\"nofollow noreferrer\">developers.google.com/youtube/android/player/reference/com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1754, "user_id": 8114201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lJjdC.jpg?s=128&g=1", "display_name": "VolkanSahin45", "link": "https://stackoverflow.com/users/8114201/volkansahin45"}, "is_accepted": false, "score": 0, "last_activity_date": 1542176297, "creation_date": 1542176297, "answer_id": 53294178, "question_id": 53293955, "link": "https://stackoverflow.com/questions/53293955/change-youtube-video-on-click-of-listitem-in-recyclerview/53294178#53294178", "title": "change youtube video on click of listitem in recyclerview", "body": "<p>First of all in <code>onInitializationSuccess</code> set player instance to a global field. Then Add a onClickListener to listview. After that in onClick method call player.setCue() method with the video id that you want to play. And at the last play the video with player.play().</p>\n"}], "owner": {"reputation": 696, "user_id": 5405965, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/I9Pwc.jpg?s=128&g=1", "display_name": "Ashish Choudhary", "link": "https://stackoverflow.com/users/5405965/ashish-choudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1542176297, "creation_date": 1542174914, "question_id": 53293955, "link": "https://stackoverflow.com/questions/53293955/change-youtube-video-on-click-of-listitem-in-recyclerview", "title": "change youtube video on click of listitem in recyclerview", "body": "<p>I am using YoutubeplayerApi in my android app\nwhat I have done is that there is a youtubeplayerView and a recycler view below the player\nI want to implement the functionality that once a user click on the item view of recycler view the youtubeplayer should play that particular video but I am not able to implement that </p>\n\n<p>any help would be appreciated</p>\n\n<p>activity_music.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".UI.MusicActivity\"&gt;\n\n    &lt;com.google.android.youtube.player.YouTubePlayerView\n            android:layout_width=\"450dp\"\n            android:layout_height=\"384dp\"\n            android:id=\"@+id/youtube_player\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            android:layout_marginTop=\"24dp\"\n    /&gt;\n    &lt;android.support.v7.widget.RecyclerView\n            android:layout_width=\"0dp\"\n            android:layout_height=\"0dp\"\n            app:layout_constraintBottom_toBottomOf=\"parent\" app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            android:id=\"@+id/songs_recycler_view\"\n            app:layout_constraintTop_toBottomOf=\"@+id/youtube_player\"/&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>MusicActivity.kt</p>\n\n<pre><code>package com.example.ashish.batmn.UI\n\nimport android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.support.v7.widget.LinearLayoutManager\nimport android.support.v7.widget.RecyclerView\nimport android.widget.Toast\nimport com.example.ashish.batmn.Adapters.SongsAdapter\nimport com.example.ashish.batmn.Config\nimport com.example.ashish.batmn.Models.Songs\nimport com.example.ashish.batmn.R\nimport com.google.android.youtube.player.YouTubeBaseActivity\nimport com.google.android.youtube.player.YouTubeInitializationResult\nimport com.google.android.youtube.player.YouTubePlayer\nimport com.google.android.youtube.player.YouTubeStandalonePlayer\nimport kotlinx.android.synthetic.main.activity_music.*\n\nclass MusicActivity : YouTubeBaseActivity(), YouTubePlayer.OnInitializedListener {\n\n    val songsList = listOf&lt;Songs&gt;(\n        Songs(\"Girls Like You\",\"cBVGlBWQzuc\",\"${Config.IMAGE_BASE_URL}cBVGlBWQzuc${Config.IMAGE_PIC_END}\"),\n        Songs(\"The National - Fake Empire\",\"KehwyWmXr3U\",\"${Config.IMAGE_BASE_URL}KehwyWmXr3U${Config.IMAGE_PIC_END}\"),\n        Songs(\"Halka Halka\",\"nZhLM-FeV9A\",\"${Config.IMAGE_BASE_URL}nZhLM-FeV9A${Config.IMAGE_PIC_END}\"),\n        Songs(\"Camila Cabello - Real Friends\",\"66rxB7_zzs8\",\"${Config.IMAGE_BASE_URL}66rxB7_zzs8${Config.IMAGE_PIC_END}\"),\n        Songs(\"Darya\",\"wHHCO29mqiA\",\"${Config.IMAGE_BASE_URL}wHHCO29mqiA${Config.IMAGE_PIC_END}\"),\n        Songs(\"Naina Da Kya Kasoor\",\"BJWTzYPWINw\",\"${Config.IMAGE_BASE_URL}BJWTzYPWINw${Config.IMAGE_PIC_END}\")\n\n    )\n\n    override fun onInitializationSuccess(provider: YouTubePlayer.Provider?, player: YouTubePlayer?, wasRestored: Boolean) {\n        if (!wasRestored){\n            player!!.cueVideo(Config.VIDEO_CODE)\n            player.setPlayerStyle(YouTubePlayer.PlayerStyle.DEFAULT)\n        }\n    }\n\n\n\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        if(requestCode  ==  1){\n            getYoutubePlayerProvider().initialize(Config.VIDEO_CODE,this)\n        }\n    }\n\n    override fun onInitializationFailure(p0: YouTubePlayer.Provider?, errorResult: YouTubeInitializationResult?) {\n        if (errorResult!!.isUserRecoverableError){\n            errorResult.getErrorDialog(this,1).show()\n        }\n        else{\n            Toast.makeText(this,\"Some unforseen  error has occured\",Toast.LENGTH_SHORT).show()\n        }\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_music)\n        youtube_player.initialize(Config.API_KEY,this)\n        val songAdapter = SongsAdapter(songsList,this){\n\n             // what should be added in here?\n\n\n\n        }\n        songs_recycler_view.layoutManager = LinearLayoutManager(this,LinearLayoutManager.VERTICAL,false)\n        songs_recycler_view.adapter = songAdapter\n\n\n    }\n\n    fun getYoutubePlayerProvider():YouTubePlayer.Provider{\n        return youtube_player\n    }\n}\n</code></pre>\n\n<p>Songs.kt    // Model class</p>\n\n<pre><code>package com.example.ashish.batmn.Models\n\nclass Songs(val mSongName:String, val mVideoCode:String,val mSongPic:String) {\n}\n</code></pre>\n"}, {"tags": ["swift", "unit-testing", "kotlin", "promise"], "comments": [{"owner": {"reputation": 8318, "user_id": 763546, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/9WXnH.jpg?s=128&g=1", "display_name": "Mike Taverne", "link": "https://stackoverflow.com/users/763546/mike-taverne"}, "edited": false, "score": 0, "creation_date": 1542160103, "post_id": 53291051, "comment_id": 93465534, "body": "This might help: <a href=\"https://medium.com/@tonyowen/android-kotlin-coroutines-unit-test-16e984ba35b4\" rel=\"nofollow noreferrer\">medium.com/@tonyowen/&hellip;</a>"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1542186189, "post_id": 53291051, "comment_id": 93473607, "body": "The most straightforward analog of a promise on Kotlin-Android is the plain old <code>CompletableFuture</code>."}], "answers": [{"comments": [{"owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542211771, "post_id": 53293333, "comment_id": 93489554, "body": "Thanks for the information. So if I were to use this, I would essentially have to write a suspend function and a function that runs the suspend function for every test?"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542214273, "post_id": 53293333, "comment_id": 93491072, "body": "Yes, the code is more clear and readable that way. You can try avoid of creating of  <code>login()</code> method by moving <code>suspendCoroutine {}</code> block inside <code>runBlocking {}</code>, but there will be some mess in the code."}, {"owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542214391, "post_id": 53293333, "comment_id": 93491132, "body": "Talk about the lesser of two evils... haha."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542214608, "post_id": 53293333, "comment_id": 93491257, "body": "I prefer to create a new method with <code>suspendCoroutine {}</code> block :)"}, {"owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 1, "creation_date": 1542215040, "post_id": 53293333, "comment_id": 93491494, "body": "I&#39;ll be doing separate methods. Kotlin is kinda lame in the sense that you have to choose between (A) concise, but complicated, ultra-nested, messy code or (B) expansive, but simple, readable, clean code. Swift seems to be both clean and concise"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542217344, "post_id": 53293333, "comment_id": 93492708, "body": "You&#39;e welcome. Btw you can accept my answer if it works for you."}, {"owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542218227, "post_id": 53293333, "comment_id": 93493094, "body": "I&#39;m actually having an issue with the <code>runBlocking</code> part. It says it was introduced in Kotlin 1.3, but anything I look up about Kotlin 1.3 says a stable version for JetBrains?? Do you have any tips on that? Thanks."}, {"owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542218276, "post_id": 53293333, "comment_id": 93493114, "body": "I understand that is a different issue, so I will mark it as complete once I figure this Kotlin issue out and can confirm your solution suites my needs."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542219990, "post_id": 53293333, "comment_id": 93493856, "body": "try to update Kotlin&#39;s plugin in Android Studio and change version of Kotlin in build.gradle file of your app"}, {"owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542220200, "post_id": 53293333, "comment_id": 93493958, "body": "I tried that but then got the error: <code>&quot;org.jetbrains.kotlin:kotlin-stdlib-jre7:1.3.0&quot; is unresolved</code>. I posted a new issue about that here: <a href=\"https://stackoverflow.com/questions/53306434/update-android-studio-project-to-kotlin-1-3\" title=\"update android studio project to kotlin 1 3\">stackoverflow.com/questions/53306434/&hellip;</a>"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542220989, "post_id": 53293333, "comment_id": 93494332, "body": "I answered the question. Did it help?"}, {"owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542221234, "post_id": 53293333, "comment_id": 93494457, "body": "Sure did! Thanks"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "edited": false, "score": 0, "creation_date": 1542221566, "post_id": 53293333, "comment_id": 93494608, "body": "great, glad to help"}], "tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": true, "score": 2, "last_activity_date": 1542314039, "last_edit_date": 1542314039, "creation_date": 1542170783, "answer_id": 53293333, "question_id": 53291051, "link": "https://stackoverflow.com/questions/53291051/kotlin-equivalent-of-swift-expectations-promises/53293333#53293333", "title": "Kotlin equivalent of Swift Expectations/Promises", "body": "<p>You can use Kotlin coroutines, for example:</p>\n\n<pre><code>@Test\nfun loginTest() {\n    val result = runBlocking {\n        val loginResult = login() \n        loginResult\n    }\n    if (result == \"Success\") {\n        // do your work when Success\n    } else {\n        // do your work when Error\n    }\n}\nsuspend fun login(): String = suspendCoroutine { continuation -&gt;\n    val username = \"\"\n    val password = \"\"\n    loginFragment.loginViewModel\n    .login(username, password)\n    .observe(loginFragment, Observer {\n        loginFragment.activity?.onResult(it?.result,\n\n                    onSuccess = {\n                        continuation.resume(\"Success\")\n                    },\n                    onValidationError = {\n                        continuation.resume(\"Error\") // take a look for other methods, e.g. resumeWithException(exception)\n\n                    })\n    })   \n}\n</code></pre>\n\n<p>To use coroutines you need to add next lines to app's build.gradle file dependencies:</p>\n\n<blockquote>\n<pre><code>final KOTLIN_COROUTINES_VERSION = '1.0.1'\nimplementation \"org.jetbrains.kotlinx:kotlinx-coroutines-core:$KOTLIN_COROUTINES_VERSION\"\n</code></pre>\n</blockquote>\n\n<p>Hope it will help.</p>\n"}, {"tags": [], "owner": {"reputation": 166, "user_id": 3233109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6699c05d6c75bd2770a7187af613c371?s=128&d=identicon&r=PG&f=1", "display_name": "user3233109", "link": "https://stackoverflow.com/users/3233109/user3233109"}, "is_accepted": false, "score": 1, "last_activity_date": 1578439781, "creation_date": 1578439781, "answer_id": 59637539, "question_id": 53291051, "link": "https://stackoverflow.com/questions/53291051/kotlin-equivalent-of-swift-expectations-promises/59637539#59637539", "title": "Kotlin equivalent of Swift Expectations/Promises", "body": "<p>I found <a href=\"https://github.com/Shopify/promise-kotlin\" rel=\"nofollow noreferrer\">this</a> Kotlin Promise lib closer to Swift Promises.\nUsing this library your test would like.</p>\n\n<pre><code>@Test\nfun loginTest() {\n    val username = \"\"\n    val password = \"\"\n\n    Promise&lt;Boolean, Exception&gt; { promise -&gt;\n        loginFragment.loginViewModel\n            .login(username, password)\n            .observe(loginFragment, Observer {\n                loginFragment.activity?.onResult(it?.result,\n\n                    onSuccess = {\n                        promise.resolve(true)\n                    },\n                    onValidationError = {\n                        promise.reject(Exception(\"Login error\"))\n                    })\n            })\n    }.whenComplete {\n        when (it) {\n            is Promise.Result.Success -&gt; {\n                assert(it.value)\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 610, "user_id": 10365158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajOMa.jpg?s=128&g=1", "display_name": "BlondeSwan", "link": "https://stackoverflow.com/users/10365158/blondeswan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1104, "favorite_count": 1, "accepted_answer_id": 53293333, "answer_count": 2, "score": 4, "last_activity_date": 1578439781, "creation_date": 1542152071, "question_id": 53291051, "link": "https://stackoverflow.com/questions/53291051/kotlin-equivalent-of-swift-expectations-promises", "title": "Kotlin equivalent of Swift Expectations/Promises", "body": "<p>I am trying to write some UnitTests for my native mobile applications, but have ran into a roadblock in my Android Tests. Specifically, I am struggling to find an example of Kotlin's version of Swift's Expectations/Promises.. </p>\n\n<p>I've found examples of Kotlin Promises, but they seem to be way more complicated than needed...</p>\n\n<p>For example, here is a test for the login API function in my iOS project:</p>\n\n<pre><code>func testLogin() {\n\n    /// Prepare for login\n    if CURRENT_USER != nil {\n        logout()\n    }\n\n    /// Login\n    let promise = expectation(description: \"User is logged in.\")\n\n    // 1. Given\n    var isSuccess: Bool = false\n\n    // 2. When\n    User.login(username: maleUsername, password: malePassword, success: {\n        isSuccess = true\n        promise.fulfill()\n    }) { (_, agreeToTerms) in\n        XCTFail()\n    }\n    wait(for: [promise], timeout: maxTimeOut)\n\n    // 3. Then\n    XCTAssertNotNil(CURRENT_USER)\n    XCTAssertTrue(isSuccess)\n\n    /// Logout\n    logout()\n}\n</code></pre>\n\n<p>This is pretty simple to me. I have an asynchronous method <code>login</code> that has two possible completion blocks: <code>success</code> and <code>failure</code>; and I need to wait for one of them to complete before evaluating. To do this, I create a <strong>promise</strong> before the call, then I <strong>fulfill</strong> the promise in the two completion blocks, and I <strong>wait</strong> for the promise to fulfill before running my assertions.</p>\n\n<p>Now in Kotlin, I have a similar test:</p>\n\n<pre><code>private val loginFragment = LoginFragment()\n\n@Test\nfun loginTest() {\n\n    val username = \"\"\n    val password = \"\"\n\n    // TODO: Create Promise\n\n    loginFragment.loginViewModel\n            .login(username, password)\n            .observe(loginFragment, Observer {\n                loginFragment.activity?.onResult(it?.result,\n\n                        onSuccess = {\n                            // TODO: Fill Promise\n                        },\n                        onValidationError = {\n                            // TODO: Fail Test\n                        })\n            })\n\n    // TODO: Assertions\n\n}\n</code></pre>\n\n<p>But I can't find an equivalent of swift's promises..</p>\n\n<p>Does one exist in Kotlin? If not, how would I implement a version of my Swift's <code>testLogin</code> method in Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "google-play-services"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 3844222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/760423282ea8c0511f63fb040b0ef763?s=128&d=identicon&r=PG&f=1", "display_name": "waterPoweredMonkey", "link": "https://stackoverflow.com/users/3844222/waterpoweredmonkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1542148580, "creation_date": 1542148580, "answer_id": 53290545, "question_id": 53290241, "link": "https://stackoverflow.com/questions/53290241/gms-tasktresult-class-can-getresult-return-null-if-issuccessful/53290545#53290545", "title": "GMS Task&lt;TResult&gt; class: can getResult() return null if isSuccessful()?", "body": "<p>What you are seeing is the Kotlin compiler failing to smart-cast the result to a NonNull type based on the result of isSuccessful, this can happen when interacting with both Java and Kotlin code.</p>\n\n<p>In Kotlin 1.3 an implementation of \"Contracts\" was added to the language to allow developers to add meta data about a method in a format that the IDE can use to statically analyze and infer type (smart-cast).</p>\n\n<p>See Section 1.2 \"Returns and Implies\" <a href=\"https://proandroiddev.com/kotlin-contracts-make-great-deals-with-the-compiler-f524e57f11c\" rel=\"nofollow noreferrer\">https://proandroiddev.com/kotlin-contracts-make-great-deals-with-the-compiler-f524e57f11c</a></p>\n\n<p>So with contracts it would correctly smart-cast if the implementation looked like this:</p>\n\n<pre><code>open class Task&lt;T&gt; {\n    var result: T? = null\n        private set\n\n    fun isSuccessful(): Boolean {\n        contract {\n            returns(true) implies (result != null)\n        }\n        return result != null\n    }\n}\n</code></pre>\n\n<p>In your case however you probably want to throw on another safe call operator <code>?</code> and call your <code>!task.isSuccessful</code> code with the Elvis operator <code>?:</code> like this:</p>\n\n<pre><code>if (task.isSuccessful) {\n        task.result?.user?.getIdToken(false)?.addOnCompleteListener { taskk -&gt;\n            this.emailIdTokenCompleteListener()(taskk)\n        } ?: handleFailure() // Defensively call just in case\n} else {\n    handleFailure()\n}\n</code></pre>\n"}], "owner": {"reputation": 2276, "user_id": 3175580, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bbfe30c791549584b87aa50bdcaf8b08?s=128&d=identicon&r=PG&f=1", "display_name": "androidguy", "link": "https://stackoverflow.com/users/3175580/androidguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 53290545, "answer_count": 1, "score": 1, "last_activity_date": 1542148580, "creation_date": 1542146901, "question_id": 53290241, "link": "https://stackoverflow.com/questions/53290241/gms-tasktresult-class-can-getresult-return-null-if-issuccessful", "title": "GMS Task&lt;TResult&gt; class: can getResult() return null if isSuccessful()?", "body": "<p>There is recently a @Nullable change to GMS tasks library. The first few lines of decompiled .class looks like</p>\n\n<pre><code>public abstract class Task&lt;TResult&gt; {\n    public Task() {\n    }\n\n    public abstract boolean isComplete();\n\n    public abstract boolean isSuccessful();\n\n    public abstract boolean isCanceled();\n\n    @Nullable\n    public abstract TResult getResult();\n</code></pre>\n\n<p>Previously my Kotlin code compiled:</p>\n\n<pre><code>        if (task.isSuccessful) {\n            task.result.user?.getIdToken(false)?.addOnCompleteListener { taskk -&gt;\n                this.emailIdTokenCompleteListener()(taskk)\n            }\n</code></pre>\n\n<p>After updating some gms <code>play-services-zzz</code> dependencies the code now has compile error:</p>\n\n<blockquote>\n  <p>LoginActivity.kt: (148, 28): Only safe (?.) or non-null asserted (!!.) calls are allowed on a nullable receiver of type AuthResult?</p>\n</blockquote>\n\n<p>The question is, does <code>isSuccessful() == true</code> imply that <code>getResult != null</code>? Or would it just be better to change the if test to <code>if (task.result != null)</code>?</p>\n"}, {"tags": ["android", "sqlite", "kotlin", "android-room"], "answers": [{"comments": [{"owner": {"reputation": 1921, "user_id": 5927732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97TcRPaEW78/AAAAAAAAAAI/AAAAAAAAANM/XFUX8H0wVLo/photo.jpg?sz=128", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/5927732/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1542148346, "post_id": 53290487, "comment_id": 93462762, "body": "So what do you recommend to do on the dao. Do i change the return type?"}, {"owner": {"reputation": 387, "user_id": 7303452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xHgsn.jpg?s=128&g=1", "display_name": "Hamlet Leon", "link": "https://stackoverflow.com/users/7303452/hamlet-leon"}, "reply_to_user": {"reputation": 1921, "user_id": 5927732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97TcRPaEW78/AAAAAAAAAAI/AAAAAAAAANM/XFUX8H0wVLo/photo.jpg?sz=128", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/5927732/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1542148423, "post_id": 53290487, "comment_id": 93462788, "body": "Yes. Remove the Single, just leave it as <code>fun load(): TutorialEntity?</code>"}, {"owner": {"reputation": 387, "user_id": 7303452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xHgsn.jpg?s=128&g=1", "display_name": "Hamlet Leon", "link": "https://stackoverflow.com/users/7303452/hamlet-leon"}, "reply_to_user": {"reputation": 1921, "user_id": 5927732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97TcRPaEW78/AAAAAAAAAAI/AAAAAAAAANM/XFUX8H0wVLo/photo.jpg?sz=128", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/5927732/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1542148571, "post_id": 53290487, "comment_id": 93462830, "body": "And also the single on the insert statement"}, {"owner": {"reputation": 1921, "user_id": 5927732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97TcRPaEW78/AAAAAAAAAAI/AAAAAAAAANM/XFUX8H0wVLo/photo.jpg?sz=128", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/5927732/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1542148650, "post_id": 53290487, "comment_id": 93462858, "body": "Ok I will do that. 2 minutes"}, {"owner": {"reputation": 1921, "user_id": 5927732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97TcRPaEW78/AAAAAAAAAAI/AAAAAAAAANM/XFUX8H0wVLo/photo.jpg?sz=128", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/5927732/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1542148701, "post_id": 53290487, "comment_id": 93462874, "body": "the insert statement should be returning Long our TutorialEntity?"}, {"owner": {"reputation": 387, "user_id": 7303452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xHgsn.jpg?s=128&g=1", "display_name": "Hamlet Leon", "link": "https://stackoverflow.com/users/7303452/hamlet-leon"}, "reply_to_user": {"reputation": 1921, "user_id": 5927732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97TcRPaEW78/AAAAAAAAAAI/AAAAAAAAANM/XFUX8H0wVLo/photo.jpg?sz=128", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/5927732/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1542149336, "post_id": 53290487, "comment_id": 93463050, "body": "The insert returns a Long always. If is -1 was not posible to insert."}, {"owner": {"reputation": 1921, "user_id": 5927732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97TcRPaEW78/AAAAAAAAAAI/AAAAAAAAANM/XFUX8H0wVLo/photo.jpg?sz=128", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/5927732/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1542149386, "post_id": 53290487, "comment_id": 93463065, "body": "So val load = tutorialDao.load() is giving me null"}, {"owner": {"reputation": 1921, "user_id": 5927732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97TcRPaEW78/AAAAAAAAAAI/AAAAAAAAANM/XFUX8H0wVLo/photo.jpg?sz=128", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/5927732/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1542149555, "post_id": 53290487, "comment_id": 93463106, "body": "Should I do tutorialDao.load() ? @Hamlet Leon"}, {"owner": {"reputation": 1921, "user_id": 5927732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97TcRPaEW78/AAAAAAAAAAI/AAAAAAAAANM/XFUX8H0wVLo/photo.jpg?sz=128", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/5927732/jos%c3%a9-nobre"}, "reply_to_user": {"reputation": 387, "user_id": 7303452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xHgsn.jpg?s=128&g=1", "display_name": "Hamlet Leon", "link": "https://stackoverflow.com/users/7303452/hamlet-leon"}, "edited": false, "score": 0, "creation_date": 1542150016, "post_id": 53290487, "comment_id": 93463220, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/183595/discussion-between-jose-and-hamlet-leon\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 387, "user_id": 7303452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xHgsn.jpg?s=128&g=1", "display_name": "Hamlet Leon", "link": "https://stackoverflow.com/users/7303452/hamlet-leon"}, "is_accepted": false, "score": 1, "last_activity_date": 1542148352, "last_edit_date": 1542148352, "creation_date": 1542148223, "answer_id": 53290487, "question_id": 53290187, "link": "https://stackoverflow.com/questions/53290187/how-to-check-values-from-query-using-dao/53290487#53290487", "title": "How to check values from query using DAO", "body": "<p>Well. I don't know if i understand you well but i had some questions before respond your doubt.</p>\n\n<p>Why are you using a Single? (You are going to receive a NPE) (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/single.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/single.html</a>)</p>\n\n<p>I recommend you to use just the class as nullable, so just check your variable for </p>\n\n<pre><code>if (load?.asSeenTutorial == 1) {\n   // Do your stuff\n}\n</code></pre>\n\n<p>And also remember that you need to do the insert operation under an AsyncTask.</p>\n"}, {"tags": [], "owner": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "is_accepted": false, "score": 1, "last_activity_date": 1542158012, "creation_date": 1542158012, "answer_id": 53291781, "question_id": 53290187, "link": "https://stackoverflow.com/questions/53290187/how-to-check-values-from-query-using-dao/53291781#53291781", "title": "How to check values from query using DAO", "body": "<p>While you can do this using Room, it is suggested that you better not use Room for such operations. These kinds of single value checks are done using <code>SharedPreference</code>.\nQuoted by Google <a href=\"https://developer.android.com/training/data-storage/shared-preferences\" rel=\"nofollow noreferrer\">Documentation</a></p>\n\n<blockquote>\n  <p>If you have a relatively small collection of key-values that you'd like to save, you should use the SharedPreferences APIs.</p>\n</blockquote>\n\n<p>With Room you have to consider creating <code>@Entity</code>, <code>@Dao</code>, call them in <strong>background thread</strong>. which are so much work</p>\n\n<p>Here is how you do it with <code>SharedPreference</code></p>\n\n<pre><code>val sharedPref = activity?.getSharedPreferences(\"AppPreference\", Context.MODE_PRIVATE)\n</code></pre>\n\n<p>And you check it as below</p>\n\n<pre><code>if (sharedPref.getBoolean(\"as_seen_tutorial\", false)){\n    // show tutorial. \n    // false is a default value\n}\nelse{\n    // start another activity\n}\n</code></pre>\n\n<p>And after showing your tutorial, you save \"as_seen_tutorial\" as <code>true</code> like below</p>\n\n<pre><code>with (sharedPref.edit()) {\n    putBoolean(\"as_seen_tutorial\", true)\n    commit()\n}\n</code></pre>\n"}], "owner": {"reputation": 1921, "user_id": 5927732, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97TcRPaEW78/AAAAAAAAAAI/AAAAAAAAANM/XFUX8H0wVLo/photo.jpg?sz=128", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/5927732/jos%c3%a9-nobre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1542158012, "creation_date": 1542146598, "question_id": 53290187, "link": "https://stackoverflow.com/questions/53290187/how-to-check-values-from-query-using-dao", "title": "How to check values from query using DAO", "body": "<p>I have this app that has a start tutorial and I am saving in room database if the user already saw the tutorial. For that I save the data when the user finishes the tutorial and do a query in the onCreateMethod of the TutorialActivity to see if I skip to other activity. My DAO as two methods, one to insert and another to load. My load method(what I want to ask) has the following code:</p>\n\n<pre><code>@Query(\"SELECT * FROM tutorial LIMIT 1\")\n    fun load(): Single&lt;TutorialEntity&gt;\n\n@Insert(onConflict = OnConflictStrategy.REPLACE)\nfun insert(userEntity: TutorialEntity): Single&lt;Long&gt;\n</code></pre>\n\n<p>My entity:</p>\n\n<pre><code>@Entity(tableName = \"tutorial\")\nclass TutorialEntity (\n\n    @PrimaryKey\n    @ColumnInfo(name = \"as_seen_tutorial\")\n    val asSeenTutorial: Long\n\n)\n</code></pre>\n\n<p>This is my tutorial activity:</p>\n\n<p>Note: I use dagger to inject the tutorialDao(not important here)</p>\n\n<pre><code>//here is where I check if the value is already 1 to skip\n    onCreate(){\n    val load = tutorialDao.load()\n    if(load.? contains 1) -&gt; This is my doubt {      \n      //OBJECTIVE: does not show and skips to other activity   \n   } \n }\n\n//here is where I insert the flag into the database\nfun showTutorial(){\n  val entity = TutorialEntity(1)\n  tutorialDao.insert(entity)\n}\n</code></pre>\n\n<p>I wanted to know how can I check if the value that cames from the select query is one</p>\n"}, {"tags": ["android", "android-layout", "kotlin", "android-support-library", "android-constraintlayout"], "answers": [{"tags": [], "owner": {"reputation": 3161, "user_id": 10510491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4QsPKELpII/AAAAAAAAAAI/AAAAAAAAV14/3oA6QmFw68U/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10510491/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1542148706, "creation_date": 1542148706, "answer_id": 53290568, "question_id": 53290024, "link": "https://stackoverflow.com/questions/53290024/set-constraint-params-for-cardview-inside-the-constraintlayout/53290568#53290568", "title": "Set constraint params for CardView inside the ConstraintLayout", "body": "<p>To achieve the same configuration in Kotlin, you could try:</p>\n\n<pre><code>val resultCard = findViewById(R.id.resultCard)\nval params = resultCard.layoutParams as ConstraintLayout.LayoutParams\nparams.apply {\n   startToStart = ConstraintLayout.LayoutParams.PARENT_ID\n   endToEnd = ConstraintLayout.LayoutParams.PARENT_ID\n   topToTop = ConstraintLayout.LayoutParams.PARENT_ID\n   bottomToBottom = ConstraintLayout.LayoutParams.PARENT_ID\n   horizontalBias = .5f\n   verticalBias = .35f\n}\n</code></pre>\n"}], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542148706, "creation_date": 1542145754, "last_edit_date": 1542146369, "question_id": 53290024, "link": "https://stackoverflow.com/questions/53290024/set-constraint-params-for-cardview-inside-the-constraintlayout", "title": "Set constraint params for CardView inside the ConstraintLayout", "body": "<p>I need to apply some display configuration programmatically in Kotlin to a card view (because the problem is  i cannot define it in xml right away)</p>\n\n<p>Here is this configuration in xml (which i want to be able to set identical programmatically if possible)</p>\n\n<pre><code>       &lt;android.support.v7.widget.CardView\n            android:id=\"@+id/resultCard\"\n            android:layout_width=\"280dp\"\n            android:layout_height=\"340dp\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintHorizontal_bias=\"0.5\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintVertical_bias=\"0.35\"&gt;\n\n       //some other Views inside this CardView \n     &lt;/android.support.v7.widget.CardView&gt;\n</code></pre>\n\n<p>Is it possible to achive same configuration by coding it in Kotlin? </p>\n"}, {"tags": ["android", "kotlin", "android-gradle-plugin", "kapt"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 1, "creation_date": 1542143686, "post_id": 53289265, "comment_id": 93460915, "body": "Have you tried refactoring your enum so it doesn&#39;t generate anonymous classes? <code>enum class DurationModifier(val displayName: String){ GreaterThan(&quot;\u2265&quot;), LessThan(&quot;\u2264&quot;) }</code>."}, {"owner": {"reputation": 3487, "user_id": 1777839, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43bb079d35ba13d8bbb53fa755d27be1?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/1777839/jordan"}, "reply_to_user": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1542149376, "post_id": 53289265, "comment_id": 93463060, "body": "Tried that and it does fix this particular issue, but started dumping out all kinds of other problems. Appears to be some problem with kapt &amp; Java 11. See my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 191362, "user_id": 244296, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce53ae6a59699c189a1724bef35d8f89?s=128&d=identicon&r=PG", "display_name": "Cristian", "link": "https://stackoverflow.com/users/244296/cristian"}, "edited": false, "score": 1, "creation_date": 1562651743, "post_id": 53290680, "comment_id": 100431565, "body": "THis is not about the Java8 byte code. This is about kapt3 generating plain Java code that the jdk 11 does not like."}, {"owner": {"reputation": 541, "user_id": 6462184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fc9f03bb95224f2e9cdf59d528ac6e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Sahana Prabhakar", "link": "https://stackoverflow.com/users/6462184/sahana-prabhakar"}, "edited": false, "score": 1, "creation_date": 1563442709, "post_id": 53290680, "comment_id": 100704742, "body": "Using java 8 instead of 12. Solved my problem. Thank you for posting the answer @Jordan Bondo"}], "tags": [], "owner": {"reputation": 3487, "user_id": 1777839, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43bb079d35ba13d8bbb53fa755d27be1?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/1777839/jordan"}, "is_accepted": true, "score": 6, "last_activity_date": 1542149317, "creation_date": 1542149317, "answer_id": 53290680, "question_id": 53289265, "link": "https://stackoverflow.com/questions/53289265/invalid-method-declaration-in-kotlin-enum-class-building-with-gradle-wrapper/53290680#53290680", "title": "Invalid Method Declaration in Kotlin Enum Class building with gradle wrapper", "body": "<p>Figured out what was going on. Android Studio &amp; IntelliJ both are using a bundled JDK (AS 3.2.1 uses 1.8.0_152), so gradle was executing kapt in that environment. On my machine however I have Java 11 set as the default java. I use JENV to manage multiple java versions, so on a hunch I set the local java version to 1.8 rather than 11. Works fine after that.</p>\n\n<p>My understanding is that the Kotlin compiler is supposed to emit Java 8 byte code that the Java 11 compiler should understand (I do the Kotlin compiler configured to do so in build.gradle), but apparently that's not true in this case.</p>\n\n<p>Not really an answer to <em>why</em> it is happening, but it is a solution. </p>\n"}, {"tags": [], "owner": {"reputation": 362, "user_id": 8752286, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZwXcDXFNCfU/AAAAAAAAAAI/AAAAAAAAAOI/ZlzhprUo8MM/photo.jpg?sz=128", "display_name": "Georg Moser", "link": "https://stackoverflow.com/users/8752286/georg-moser"}, "is_accepted": false, "score": 2, "last_activity_date": 1553191226, "creation_date": 1553191226, "answer_id": 55286592, "question_id": 53289265, "link": "https://stackoverflow.com/questions/53289265/invalid-method-declaration-in-kotlin-enum-class-building-with-gradle-wrapper/55286592#55286592", "title": "Invalid Method Declaration in Kotlin Enum Class building with gradle wrapper", "body": "<p>I had a similar error with an abstract enum function.\nGradle was using JDK 11.\nSwitching to JDK 8, by adding an <code>org.gradle.java.home</code> entry to <code>gradle.properties</code> (in your <code>HOME/.gradle/gradle.properties</code> or in your project specifig <code>gradle.properties</code> resolved the issue. </p>\n\n<pre><code> echo 'org.gradle.java.home=PATH_TO_JDK8' &gt;&gt; ~/.gradle/gradle.properties\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2195, "user_id": 2472350, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/slD29.jpg?s=128&g=1", "display_name": "Amin Keshavarzian", "link": "https://stackoverflow.com/users/2472350/amin-keshavarzian"}, "is_accepted": false, "score": 0, "last_activity_date": 1586435068, "creation_date": 1586435068, "answer_id": 61121112, "question_id": 53289265, "link": "https://stackoverflow.com/questions/53289265/invalid-method-declaration-in-kotlin-enum-class-building-with-gradle-wrapper/61121112#61121112", "title": "Invalid Method Declaration in Kotlin Enum Class building with gradle wrapper", "body": "<p>I also encountered this problem and just downloaded Java 8 and changed Java location in Project Structure (File\\Project Structure) here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MORsI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MORsI.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3487, "user_id": 1777839, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/43bb079d35ba13d8bbb53fa755d27be1?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/1777839/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 1, "accepted_answer_id": 53290680, "answer_count": 3, "score": 6, "last_activity_date": 1586435068, "creation_date": 1542142082, "last_edit_date": 1542144965, "question_id": 53289265, "link": "https://stackoverflow.com/questions/53289265/invalid-method-declaration-in-kotlin-enum-class-building-with-gradle-wrapper", "title": "Invalid Method Declaration in Kotlin Enum Class building with gradle wrapper", "body": "<p>I have the following Kotlin enum class:</p>\n\n<pre><code>enum class DurationModifier {\n    GreaterThan {\n        override val displayName = \"\u2265\"\n    },\n    LessThan {\n        override val displayName = \"\u2264\"\n    };\n\n    abstract val displayName: String\n}\n</code></pre>\n\n<p>It has been part of my project for a long time and has been compiling just fine. This compiles just fine using IntelliJ or Android Studio, but when I run the gradle build manually from the command line (<code>./gradlew assembleDebug</code>) I get this:</p>\n\n<pre><code>e: {projectDir}/build/tmp/kapt3/stubs/{package}/search/DurationModifier.java:17: error: invalid method declaration; return type required\n        DurationModifier() {\n        ^\n</code></pre>\n\n<p>I've completely cleaned everything I can think of (build directories, gradle cache, etc).</p>\n\n<p>I've made lots of changes recently, but since everything has been working fine from the IDE I have no clue what might have caused this. What is wrong here? Why does this work in the IDE but not from the command line?</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 1, "creation_date": 1542135941, "post_id": 53287666, "comment_id": 93457743, "body": "Since the actual rendering happens on another thread in any modern version of android, this isn&#39;t going to work."}, {"owner": {"reputation": 1009, "user_id": 5555116, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HF43B.jpg?s=128&g=1", "display_name": "Saril Sudhakaran", "link": "https://stackoverflow.com/users/5555116/saril-sudhakaran"}, "reply_to_user": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1542136109, "post_id": 53287666, "comment_id": 93457841, "body": "@GabeSechanEven if the rendering happens at another background thread , the control goes back the the actual activity which intiated the rendering right ?"}, {"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 1, "creation_date": 1542136250, "post_id": 53287666, "comment_id": 93457907, "body": "The best question here is what are you actually trying to measure?  How long it takes from onCreate() to seeing the screen?  That won&#39;t be dominated by render time, it will be dominated by layout/measure time (which is distinct from render time) and what your app is doing at startup."}, {"owner": {"reputation": 1009, "user_id": 5555116, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HF43B.jpg?s=128&g=1", "display_name": "Saril Sudhakaran", "link": "https://stackoverflow.com/users/5555116/saril-sudhakaran"}, "reply_to_user": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1542136707, "post_id": 53287666, "comment_id": 93458119, "body": "@GabeSechan Thanks for looking in to my question . I am trying to measure how long it take to load(render/paint) the screen fully starting from when onCreate() in invoked on the activity. Just looking for some help on how to indentify whether the screen is fully rendered programatically.  eg: if I click the alarm in the clock app, how long it takes to load the alarm screen fully. Thanks"}, {"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1542137346, "post_id": 53287666, "comment_id": 93458407, "body": "SO because the actual rendering is asynchronous to the actual main UI thread and doesn&#39;t cause a callback, that&#39;s actually very hard to measure.  I&#39;d think the best proxy would be to call setGlobalLayoutListener on your root view, and put the end timer in that listener&#39;s onGlobalLayout.  That will include the layout/measure time, but not the actual drawing-  which should be minor compared to the layout."}, {"owner": {"reputation": 4386, "user_id": 4507927, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/47bcb40aceb9761c65dbf9d1012b60f1?s=128&d=identicon&r=PG&f=1", "display_name": "Yupi", "link": "https://stackoverflow.com/users/4507927/yupi"}, "edited": false, "score": 0, "creation_date": 1542140277, "post_id": 53287666, "comment_id": 93459665, "body": "If you are still using Android Studio version lower than 3.1. than you can user Android Device Monitor to get render informations about your layout. In 3.2. Android Device Monitor is deprecated and that should be possible inside Profiler."}], "owner": {"reputation": 1009, "user_id": 5555116, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HF43B.jpg?s=128&g=1", "display_name": "Saril Sudhakaran", "link": "https://stackoverflow.com/users/5555116/saril-sudhakaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542135616, "creation_date": 1542134930, "last_edit_date": 1542135616, "question_id": 53287666, "link": "https://stackoverflow.com/questions/53287666/what-is-the-best-way-to-measure-android-app-screen-rendering-time", "title": "What is the best way to measure android app screen rendering time", "body": "<p>I would like to measure how long (in millis) it took to fully render a screen in android . I am trying to use System.nanoTime() to measure the time . But where will I start the timer and end the timer to make sure the screen is fully loaded or rendered . Tried in onCreate and onResume , but its not giving consistent results</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1542132872, "creation_date": 1542132872, "answer_id": 53287183, "question_id": 53286435, "link": "https://stackoverflow.com/questions/53286435/custom-getter-without-return-on-all-paths-compiles-nevertheless/53287183#53287183", "title": "Custom getter without return on all paths compiles nevertheless", "body": "<p>This is indeed <a href=\"https://youtrack.jetbrains.com/issue/KT-28061\" rel=\"nofollow noreferrer\">a bug</a>, planned to be fixed in 1.3.20.</p>\n"}], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "accepted_answer_id": 53287183, "answer_count": 1, "score": 3, "last_activity_date": 1542132872, "creation_date": 1542129718, "question_id": 53286435, "link": "https://stackoverflow.com/questions/53286435/custom-getter-without-return-on-all-paths-compiles-nevertheless", "title": "Custom getter without return on all paths compiles nevertheless", "body": "<p>I wrote this code:</p>\n\n<pre><code>var test: String? = null\n    get() {\n        field?.also {\n            return \"has value\"\n        }\n    }\n</code></pre>\n\n<p>It reaches <code>return</code> only when the field is non-null. Otherwise the body just completes. Nevertheless, this compiles fine and returns <code>null</code> if field is null.</p>\n\n<p>If I change to this:</p>\n\n<pre><code>var test: String? = null\n    get() {\n        if (field != null)\n            return \"has value\"\n    }\n</code></pre>\n\n<p>now the compiler complains that the block body needs a return statement.</p>\n\n<p>Is this some undocumented feature or a bug?</p>\n"}, {"tags": ["android", "lambda", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 6305, "user_id": 389649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc842fef375d0c258c3762684d149d1?s=128&d=identicon&r=PG", "display_name": "Cristan", "link": "https://stackoverflow.com/users/389649/cristan"}, "is_accepted": false, "score": 0, "last_activity_date": 1542127352, "creation_date": 1542127352, "answer_id": 53285691, "question_id": 53285525, "link": "https://stackoverflow.com/questions/53285525/how-to-refer-to-outer-this-on-foreach-in-kotlin/53285691#53285691", "title": "How to refer to outer this on forEach in Kotlin", "body": "<p>You can name the variable in the forEach.</p>\n\n<pre><code>things.forEach { thing -&gt;\n    someWidget.setOnClickListener {\n        thing.doSomething()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 0, "last_activity_date": 1542127702, "last_edit_date": 1542127702, "creation_date": 1542127391, "answer_id": 53285710, "question_id": 53285525, "link": "https://stackoverflow.com/questions/53285525/how-to-refer-to-outer-this-on-foreach-in-kotlin/53285710#53285710", "title": "How to refer to outer this on forEach in Kotlin", "body": "<p>I think you mean something like this:</p>\n\n<pre><code>someThing.forEach{ x-&gt;\n    someWidget.setOnClickListener{\n        //use x\n        //I need foreach it of someObject\n    }\n}\n</code></pre>\n\n<p>just use another name like <code>x</code>, you don't have to use <code>it</code>.<br/>\nHere is an example:</p>\n\n<pre><code>val a = mutableListOf&lt;Int&gt;(1, 3)\nval b = mutableListOf&lt;Int&gt;(2, 4)\n\na.forEach { x -&gt;\n    b.forEach {\n        println(\"\" + x + \" \" + it)\n    }\n}\n</code></pre>\n\n<p>here <code>x</code> is each item from list <code>a</code>  <br/>\nand <code>it</code> is each item from list <code>b</code></p>\n"}, {"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 2, "last_activity_date": 1542127446, "creation_date": 1542127446, "answer_id": 53285727, "question_id": 53285525, "link": "https://stackoverflow.com/questions/53285525/how-to-refer-to-outer-this-on-foreach-in-kotlin/53285727#53285727", "title": "How to refer to outer this on forEach in Kotlin", "body": "<p>The problem is that you are not dealing with <code>this</code> here.</p>\n\n<p><code>forEach</code> has a parameter and for simplicity you can leave it away and just use <code>it</code> instead. Not using it is the same as using <code>_ -&gt;</code> instead... you just discard it.</p>\n\n<p>So your example written with named lambda parameters instead:</p>\n\n<pre><code>someThing.forEach{ some -&gt; // 'it' was available here too, but will not be accessible from within the next setOnClickListener...\n  someWidget.setOnClickListener{\n    // some contains one of the someThings now and 'it' is still your View\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4724451, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7rQ4ENQ8J4/AAAAAAAAAAI/AAAAAAAAAJE/tdB1m-xtiG0/photo.jpg?sz=128", "display_name": "Erick Daniel Juarez Gil", "link": "https://stackoverflow.com/users/4724451/erick-daniel-juarez-gil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 53285727, "answer_count": 3, "score": 1, "last_activity_date": 1542127702, "creation_date": 1542126801, "question_id": 53285525, "link": "https://stackoverflow.com/questions/53285525/how-to-refer-to-outer-this-on-foreach-in-kotlin", "title": "How to refer to outer this on forEach in Kotlin", "body": "<p>I have the following case</p>\n\n<pre><code>someThing.forEach{\n    someWidget.setOnClickListener{\n        //it is an View\n        //I need foreach it of someObject\n    }\n}\n</code></pre>\n\n<p>I read this answer but it does not work</p>\n\n<blockquote>\n  <p><a href=\"https://stackoverflow.com/questions/44779568/kotlin-how-to-refer-outer-scope-this-in-multi-layer-apply-functions?answertab=active#tab-top\">kotlin how to refer outer-scope this in multi-layer apply functions</a></p>\n</blockquote>\n"}, {"tags": ["kotlin", "retrofit2"], "answers": [{"comments": [{"owner": {"reputation": 3487, "user_id": 1035691, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f5738969bd8269a7882ae567b8005e5d?s=128&d=identicon&r=PG", "display_name": "Vinicius Carvalho", "link": "https://stackoverflow.com/users/1035691/vinicius-carvalho"}, "edited": false, "score": 0, "creation_date": 1542289982, "post_id": 53293152, "comment_id": 93521964, "body": "I tried that and also does not work. Added a QueryMap, with a map: &quot;filter&quot; : JsonString, and it also escapes quotes"}], "tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1542169284, "creation_date": 1542169284, "answer_id": 53293152, "question_id": 53284927, "link": "https://stackoverflow.com/questions/53284927/retrofit2-encodes-query-value-even-when-encoded-true/53293152#53293152", "title": "Retrofit2 encodes Query value even when encoded=true", "body": "<p>Use QueryMap in your functions</p>\n\n<pre><code>@QueryMap(encodeNames = true) \n</code></pre>\n\n<p>more details refer <a href=\"https://square.github.io/retrofit/2.x/retrofit/index.html?retrofit2/http/QueryMap.html\" rel=\"nofollow noreferrer\">Annotation Type QueryMap\n</a></p>\n"}], "owner": {"reputation": 3487, "user_id": 1035691, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f5738969bd8269a7882ae567b8005e5d?s=128&d=identicon&r=PG", "display_name": "Vinicius Carvalho", "link": "https://stackoverflow.com/users/1035691/vinicius-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542169284, "creation_date": 1542124957, "question_id": 53284927, "link": "https://stackoverflow.com/questions/53284927/retrofit2-encodes-query-value-even-when-encoded-true", "title": "Retrofit2 encodes Query value even when encoded=true", "body": "<p>Using Retrofit 2.4, I'm calling an API that receives a JSON object as part of a query string such as /list?filter={\"columns\":\"a,b,c\",\"start\":\"\"...}</p>\n\n<p>Instead of writing a converter I just use a jackson mapper to write the object as string before.</p>\n\n<pre><code>fun getReport(@Query(\"filter\", encoded = true) request: String)\n</code></pre>\n\n<p>But what retrofit is doing is that it does not encode the brackets, but it does encode all the quotes, the url then becomes:</p>\n\n<p>filter={%22columns%22: ...</p>\n\n<p>And this is of course causing issues with the invocation.</p>\n\n<p>Ideas?</p>\n"}, {"tags": ["android", "kotlin", "decompiler"], "comments": [{"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1542124649, "post_id": 53284773, "comment_id": 93451607, "body": "What do you mean by <i>in order to avoid bytecode?</i>"}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1542124837, "post_id": 53284773, "comment_id": 93451728, "body": "kotlin has its own compiler, yes"}, {"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1542124861, "post_id": 53284773, "comment_id": 93451739, "body": "@TimCastelijns but it still becomes Java bytecode, although it&#39;s an absolute mess."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1542125155, "post_id": 53284773, "comment_id": 93451939, "body": "What leads you to say &quot;an absolute mess?&quot; It&#39;s not."}, {"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542125249, "post_id": 53284773, "comment_id": 93452008, "body": "@yole Well I guess I don&#39;t know about the bytecode, but when it&#39;s decompiled, using Android Studio&#39;s decompiler, JADx or APKTool (Java, Java, Smali), it&#39;s much harder to follow the code vs a Java app. Kotlin classes also still use <code>kotlin.String</code>, <code>kotlin.Int</code> and <code>kotlin.Unit</code> types when compiled, instead of <code>java.lang.String</code>, <code>int</code> and <code>void</code>."}, {"owner": {"reputation": 1531, "user_id": 1574250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b6c7da23c6c37545aa57cc04d83b04?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Sousa", "link": "https://stackoverflow.com/users/1574250/andr%c3%a9-sousa"}, "reply_to_user": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1542125713, "post_id": 53284773, "comment_id": 93452283, "body": "@leonardkraemer I mean avoid Java compatible bytecode."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1542126364, "post_id": 53284773, "comment_id": 93452723, "body": "<i>&quot;I mean avoid Java compatible bytecode&quot;</i> The Android runtime (whether ART or Dalvik) expects DEX bytecode. If you decided to compile your Kotlin code into some other kind of bytecode you&#39;d no longer be able to run your apps on any Android devices (unless you were to bundle an entire VM that handles that custom bytecode)."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 0, "creation_date": 1542128647, "post_id": 53284773, "comment_id": 93454201, "body": "@TheWanderer They don&#39;t. There is no <code>kotlin.String.class</code>, the bytecode uses  regular Java strings. You see <code>kotlin.String</code> if you look at Kotlin libraries which don&#39;t have source code in IntelliJ IDEA; this shows you decoded Kotlin metadata, not Java bytecode."}, {"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542128858, "post_id": 53284773, "comment_id": 93454337, "body": "@yole you&#39;re right about that, sorry, but I still maintain that decompiling Kotlin classes results in a mess. For one, extension functions just get added to every class they&#39;re used in, instead of something less boilerplatey, like a static method in a generic class. Another is the <code>by lazy</code> init."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542129018, "post_id": 53284773, "comment_id": 93454446, "body": "Extension functions do not get added to every class they&#39;re used in; they are compiled to static methods. You might be confusing them with inline functions."}, {"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542137296, "post_id": 53284773, "comment_id": 93458378, "body": "@yole I just decompiled one of my apps and saw an extension function in a class."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 0, "creation_date": 1542144847, "post_id": 53284773, "comment_id": 93461409, "body": "@TheWanderer as someone who has worked on Kotlin bytecode generation, I&#39;m quite certain it does not copy extension functions. You&#39;re welcome to post a separate question with a code snippet and a description of how you&#39;re decompiling it, and I&#39;ll explain what happens."}], "answers": [{"tags": [], "owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "is_accepted": true, "score": 4, "last_activity_date": 1542126455, "creation_date": 1542126455, "answer_id": 53285397, "question_id": 53284773, "link": "https://stackoverflow.com/questions/53284773/kotlin-bytecode-in-android-apps/53285397#53285397", "title": "Kotlin bytecode in Android Apps", "body": "<p>The only way you're going to avoid Java bytecode with Kotlin is to use Kotlin Native, and you won't be able to use the Android SDK in that case.</p>\n\n<p>Kotlin JVM, as the name implies, compiles to JVM bytecode; it's one of the main draws of using it. If it compiled to something different, it would be Kotlin Native.</p>\n\n<p>To answer your bullets:</p>\n\n<ol>\n<li>No, the same compiler is used whether or not you have Java source files.</li>\n<li>Probably not. Kotlin JVM is made to be almost completely interoperable with Java, and that's the same whether or not your project includes Java code.</li>\n</ol>\n\n<p>Think about if you were creating an Android library in Kotlin. Would you really want it to automatically compile to something other than Java bytecode in that case? It wouldn't be able to be used in Java projects, defeating one of the main reasons Kotlin is so good as a Java alternative.</p>\n\n<p>Also remember, you're using the Android SDK. Even if you have no dependencies in your build.gradle, you still reference the core SDK itself, which is Java. The SDK isn't included in your APK, but it's still used during compilation.</p>\n\n<p>If you want something that avoids Java bytecode, use something like Flutter. It has its own SDK, and can bridge back to Java components. Of course, you can't completely avoid the JVM, because you still need some way for Android to install and open the app.</p>\n"}], "owner": {"reputation": 1531, "user_id": 1574250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b6c7da23c6c37545aa57cc04d83b04?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Sousa", "link": "https://stackoverflow.com/users/1574250/andr%c3%a9-sousa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 53285397, "answer_count": 1, "score": 1, "last_activity_date": 1542126455, "creation_date": 1542124490, "last_edit_date": 1542125680, "question_id": 53284773, "link": "https://stackoverflow.com/questions/53284773/kotlin-bytecode-in-android-apps", "title": "Kotlin bytecode in Android Apps", "body": "<p>I'm a kotlin and Java developer, and recently I started analyzing the bytecode generated by kotlin. And I found out a lot of wrapper code and other stuff that the compiler generates in order to translate what I have coded in Kotlin to Java.</p>\n\n<p><strong>So, my question is:</strong></p>\n\n<p><em>Imagine that I have an app that its code is 100% written in kotlin.</em> Dependencies and the main app. All Kotlin. </p>\n\n<ol>\n<li>Does this mean that a different compiler will be used in order to avoid Java compatible bytecode? </li>\n<li>Or is there any optimization done by the compiler in this kind of scenarios?</li>\n</ol>\n\n<p>Many Thanks.</p>\n\n<hr>\n\n<p>I know about <code>Kotlin Native</code> but I think it will only be applied to Android in the future.</p>\n"}, {"tags": ["android", "kotlin", "android-testing"], "answers": [{"tags": [], "owner": {"reputation": 3324, "user_id": 651827, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a5dcdcbc4b50e1b6b641334af042aa6d?s=128&d=identicon&r=PG", "display_name": "codebrane", "link": "https://stackoverflow.com/users/651827/codebrane"}, "is_accepted": false, "score": 0, "last_activity_date": 1542293357, "creation_date": 1542293357, "answer_id": 53322038, "question_id": 53284629, "link": "https://stackoverflow.com/questions/53284629/filenotfoundexception-for-url-readtext-in-androidtest/53322038#53322038", "title": "FileNotFoundException for URL.readText in androidTest", "body": "<p>Turns out the <code>FileNotFoundException</code> is completely wrong and has nothing to do with a file not being found. The unit test works as it mocks <code>android.util.Base64</code> using <code>java.util.Base64</code>. The difference is <code>android.util.Base64</code> by default uses wrapping which adds a <code>\\n</code> at the end of the encoded string which breaks the Flickr signature. The real error is HTTP 401 as the signature is invalid but <code>URL.readText</code> reports it as <code>FileNotFoundException</code>.</p>\n\n<p>The solution in Android is to use:</p>\n\n<pre><code>Base64.encodeToString(hmac.doFinal(baseString.toByteArray()), Base64.NO_WRAP)\n</code></pre>\n"}], "owner": {"reputation": 3324, "user_id": 651827, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a5dcdcbc4b50e1b6b641334af042aa6d?s=128&d=identicon&r=PG", "display_name": "codebrane", "link": "https://stackoverflow.com/users/651827/codebrane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542293357, "creation_date": 1542124024, "last_edit_date": 1542292708, "question_id": 53284629, "link": "https://stackoverflow.com/questions/53284629/filenotfoundexception-for-url-readtext-in-androidtest", "title": "FileNotFoundException for URL.readText in androidTest", "body": "<p>In an Android app, when I use a Kotlin class from a unit test, mocking out <code>android.util.Base64</code> the test is successful. Running the test as an androidTest it fails when:</p>\n\n<pre><code>URL(urlRequestToken).readText()\n</code></pre>\n\n<p>throws <code>FileNotFoundException</code> for an <code>https</code> url. The manifest has the network permission (when it didn't the error was different). Copy/pasting <code>urlRequestToken</code> into the browser gives an expected result but loading it with <code>URL</code> from the phone in the test always throws <code>FileNotFoundException</code>.</p>\n\n<p>The test includes a network check with <code>ConnectivityManager</code> which is successful so there is network.</p>\n\n<p>Is there something else I need to be doing to get it to access the url from the test?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10646140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/792dc88425f787b593a6356dca1e67d0?s=128&d=identicon&r=PG&f=1", "display_name": "beltraoluis", "link": "https://stackoverflow.com/users/10646140/beltraoluis"}, "is_accepted": true, "score": 0, "last_activity_date": 1547904688, "creation_date": 1547904688, "answer_id": 54267621, "question_id": 53283051, "link": "https://stackoverflow.com/questions/53283051/fragment-changes-to-blanck-fragment-after-destroy/54267621#54267621", "title": "Fragment changes to blanck fragment after destroy", "body": "<p>in my case the blank screen was caused by the main thread blocked, after an api update some deprecated functions started to return null and block the main thread inside the fragments for solve the problem I used the new functions provided by the api to replace the deprecated ones</p>\n"}], "owner": {"reputation": 1, "user_id": 10646140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/792dc88425f787b593a6356dca1e67d0?s=128&d=identicon&r=PG&f=1", "display_name": "beltraoluis", "link": "https://stackoverflow.com/users/10646140/beltraoluis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 54267621, "answer_count": 1, "score": 0, "last_activity_date": 1547904688, "creation_date": 1542118699, "question_id": 53283051, "link": "https://stackoverflow.com/questions/53283051/fragment-changes-to-blanck-fragment-after-destroy", "title": "Fragment changes to blanck fragment after destroy", "body": "<p>When I start my activity by the first time everything is fine I can navigate normally but after rotating the screen the fragmentMananger appears to bug, and after every change of fragment it loads a blank fragment if I rotate the screen and the activity is recreated the correct fragment appears but the bug persists. <br>\nwhen I quit the app and back to use it the error persists and only disappears after clear the user data, I try to recreate the activity after every fragment change but it only turn things worst. <br>\nthe one thing solve the problem is to clear user data after every app finalization but it erases important data managed by the app at runtime that need persist via file for the next execution.</p>\n\n<p>I use a companion object for manage fragment names:</p>\n\n<pre><code>companion object {\n    val TAG = this::class.java.canonicalName!!\n    const val MAIN_FRAGMENT = \"MainFragment\"\n    const val SECOND_FRAGMENT = \"SecondFragment\"\n    const val THIRD_FRAGMENT = \"ThirdFragment\"\n    const val FOURTH_FRAGMENT = \"FourthFragment\"\n    const val FIFTH_FRAGMENT = \"FifthFragment\"\n}\n</code></pre>\n\n<p>functions for manage fragments:</p>\n\n<pre><code>fun callFragment(s: String? = null) {\n    validateFrag(s ?: MAIN_FRAGMENT, ::setFragment)\n}\n\nfun updateFragment() {\n    Control.logData(\"updating fragment $fragment_state\")\n    validateFrag(fragment_state, ::setFragment)\n}\n\nprivate fun validateFrag(s: String, f: (String) -&gt; Unit) {\n    when (s) {\n        SECOND_FRAGMENT -&gt; f(s)\n        THIRD_FRAGMENT -&gt; f(s)\n        FOURTH_FRAGMENT -&gt; f(s)\n        FIFTH_FRAGMENT -&gt; f(s)\n        else -&gt; f(MAIN_FRAGMENT)\n    }\n}\n\nprivate fun createFrag(id: String): Fragment = when (id) {\n    SECOND_FRAGMENT -&gt; SecondFragment.newInstance()\n    THIRD_FRAGMENT -&gt; ThirdFragment.newInstance()\n    FOURTH_FRAGMENT -&gt; FourthFragment.newInstance()\n    FIFTH_FRAGMENT -&gt; FifthFragment.newInstance(this)\n    else -&gt; MainFragment.newInstance()\n}\n\nprivate fun setFragment(id: String) {\n    val userAuth = userAuth\n    userAuth ?: return\n    Control.logData(\"loading fragment $id\")\n    val frame = R.id.app_frame\n    val fragment = (fragmentManager.findFragmentByTag(id) ?: createFrag(id))\n    currentFragment = fragment as MyAppFragment\n    fragment_state = id\n\n    when{\n        fragmentManager.fragments.size == 0 -&gt; {\n            fragmentManager.beginTransaction()\n                    .add(frame, createFrag(MAIN_FRAGMENT), MAIN_FRAGMENT)\n                    .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN)\n                    .commitNowAllowingStateLoss()\n        }\n        !fragmentManager.fragments.contains(fragment as Fragment) -&gt; {\n            fragmentManager.beginTransaction()\n                    .add(frame, fragment, id)\n                    .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN)\n                    .commitNowAllowingStateLoss()\n        }\n        else -&gt;{\n            with(fragmentManager.beginTransaction()) {\n                replace(frame, fragment, id)\n                setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN)\n                commitNowAllowingStateLoss()\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>for the commits I try Commit(), CommitNow() too</p>\n\n<p>my fragment implementation:</p>\n\n<pre><code>package com.domain.app.fragments\n\nimport android.content.Context\nimport android.support.v4.app.Fragment\nimport android.os.Bundle\nimport android.support.v7.widget.LinearLayoutManager\nimport android.support.v7.widget.RecyclerView\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.ImageButton\nimport android.widget.ScrollView\nimport com.reactivex.disposables.Disposable\nimport com.domain.app.Control\nimport com.domain.app.R\nimport com.domain.app.AppApplicatcomn\nimport com.domain.app.activities.appActivity\nimport com.domain.app.dagger.services.IRXService\nimport com.domain.app.recycler.adapter.DataListAdapter\nimport kotlinx.android.synthetic.main.fragment_main.*\nimport javax.inject.Inject\n\nclass MainFragment : Fragment(), AppFragment {\n\n// instanciate data\n\ncompancomn object {\n    fun newInstance(): MainFragment{\n        return MainFragment()\n    }\n}\n\noverride fun onAttach(context: Context?) {\n    super.onAttach(context)\n    activity?.let { act -&gt;\n        //subscribe RX\n    }\n}\n\noverride fun onDetach() {\n    super.onDetach()\n    //disposeRX\n}\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n    return inflater.inflate(R.layout.fragment_main, container, false)\n}\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    dockInit()\n    recyclerInit()\n    if(Control.index.isEmpty()){\n        noDataScreen()\n    }\n    else{\n        Control.putOnScreen()\n    }\n}\n\noverride fun noDataScreen() {\n    activity?.runOnUiThread {\n        main_noDataQrButton?.visibility = View.VISIBLE\n        main_noDataText?.visibility = View.VISIBLE\n        Control.loadingDataStream.onNext(false)\n        isInit = false\n    }\n}\n\noverride fun notifyRecycler() {\n    activity?.runOnUiThread{\n        if(::list.isInitialized){\n            mAdapter.update()\n            list.adapter?.notifyDataSetChanged()\n        }\n    }\n}\n\nprivate fun recyclerInit(){\n    mAdapter = DataListAdapter(activity as appActivity)\n    mAdapter.setHasStableIds(true)\n    list = view!!.findViewById&lt;RecyclerView&gt;(R.id.main_listDataListRecycler).apply {\n        setHasFixedSize(true)\n        setItemViewCacheSize(8)\n        layoutManager = LinearLayoutManager(context)\n        adapter = mAdapter\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>my manifest:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\npackage=\"com.domain.app\"&gt;\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.CAMERA\" /&gt;\n&lt;uses-permission android:name=\"android.permission.VIBRATE\" /&gt;\n\n&lt;application\n    android:name=\".AppApplication\"\n    android:allowBackup=\"true\"\n    android:icon=\"@drawable/app\"\n    android:label=\"@string/app_name\"\n    android:roundIcon=\"@drawable/app_round\"\n    android:supportsRtl=\"true\"\n    android:theme=\"@style/AppTheme.NoActionBar\"\n    android:allowClearUserData=\"true\"\n    android:fullBackupContent=\"@xml/backup_descriptor\"&gt;\n\n    &lt;!-- android:theme=\"@style/AppTheme\" --&gt;\n\n    &lt;activity\n        android:name=\".activities.AppActivity\"\n        android:screenOrientation=\"portrait\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@style/AppTheme.NoActionBar\"&gt;\n        &lt;intent-filter&gt;\n\n            &lt;!-- para ser aberto com action APP --&gt;\n            &lt;action android:name=\"android.intent.action.APP\" /&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n            &lt;action android:name=\"io.ubivis.digitalmobility.action.CONSUME_APP_NOTIFICATION\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n        &lt;/intent-filter&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.VIEW\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n            &lt;category android:name=\"android.intent.category.BROWSABLE\" /&gt;\n\n            &lt;data\n                android:host=\"app.domain.io\"\n                android:scheme=\"https\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n\n    &lt;service android:name=\".services.FirebaseMessageService\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"com.google.firebase.MESSAGING_EVENT\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/service&gt;\n    &lt;service android:name=\".services.FirebaseTokenService\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"com.google.firebase.INSTANCE_ID_EVENT\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/service&gt;\n\n    &lt;meta-data\n        android:name=\"com.google.firebase.messaging.default_notification_icon\"\n        android:resource=\"@drawable/ic_logo_app_60dp\" /&gt;\n    &lt;meta-data\n        android:name=\"com.google.firebase.messaging.default_notification_color\"\n        android:resource=\"@color/colorPrimary\" /&gt;\n\n    &lt;!-- Para Android 8 - Necess\u00e1rio um canal para notifica\u00e7\u00f5es --&gt;\n    &lt;!-- &lt;meta-data --&gt;\n    &lt;!-- android:name=\"com.google.firebase.messaging.default_notification_channel_id\" --&gt;\n    &lt;!-- android:value=\"@string/default_notification_channel_id\"/&gt; --&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p></p>\n\n<p>my activity xml is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"&gt;\n\n&lt;android.support.v7.widget.CardView\n    android:id=\"@+id/app_connectionCard\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"40dp\"\n    android:visibility=\"gone\"\n    app:cardBackgroundColor=\"@android:color/holo_red_dark\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toBottomOf=\"@+id/app_toolbar\"&gt;\n\n    &lt;android.support.constraint.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/textView2\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@string/connectionFail\"\n            android:textColor=\"@color/cardview_light_background\"\n            android:textSize=\"24sp\"\n            android:textStyle=\"bold\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n&lt;/android.support.v7.widget.CardView&gt;\n\n&lt;android.support.v7.widget.Toolbar\n    android:id=\"@+id/app_toolbar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@color/ubivis_background_blue\"\n    android:theme=\"@style/ThemeOverlay.AppCompat.Dark\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n&lt;android.support.v4.widget.DrawerLayout\n    android:id=\"@+id/app_drawer\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"0dp\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toBottomOf=\"@+id/app_connectionCard\"\n    tools:openDrawer=\"start\"&gt;\n\n    &lt;FrameLayout\n        android:id=\"@+id/app_frame\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"&gt;\n    &lt;/FrameLayout&gt;\n\n    &lt;android.support.design.widget.NavigationView\n        android:id=\"@+id/app_navigation\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        android:layout_gravity=\"start\"\n        android:background=\"@color/colorPrimaryDark\"\n        android:fitsSystemWindows=\"true\"\n        android:theme=\"@style/UbivisDrawerTheme\"\n        app:headerLayout=\"@layout/nav_header_app\"\n        app:itemIconTint=\"@color/ubivis_orange\"\n        app:menu=\"@menu/activity_app_drawer\" /&gt;\n\n&lt;/android.support.v4.widget.DrawerLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>fragment xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:id=\"@+id/root\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:background=\"@android:color/white\"\nandroid:theme=\"@style/AppTheme.NoActionBar\"\ntools:context=\".fragments.MainFragment\"&gt;\n\n&lt;ImageView\n    android:id=\"@+id/imageView\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"0dp\"\n    android:adjustViewBounds=\"false\"\n    android:cropToPadding=\"false\"\n    android:scaleType=\"fitEnd\"\n    android:tint=\"@color/background\"\n    android:translationX=\"128dp\"\n    android:translationY=\"128dp\"\n    android:visibility=\"visible\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:srcCompat=\"@drawable/logo_domain_vasado\" /&gt;\n\n&lt;android.support.v7.widget.RecyclerView\n    android:id=\"@+id/main_listDataListRecycler\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"0dp\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toStartOf=\"@+id/main_dock\"\n    app:layout_constraintHorizontal_bias=\"0.0\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.0\"&gt;\n\n&lt;/android.support.v7.widget.RecyclerView&gt;\n\n&lt;TextView\n    android:id=\"@+id/main_noDataText\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginBottom=\"8dp\"\n    android:layout_marginEnd=\"8dp\"\n    android:layout_marginStart=\"8dp\"\n    android:text=\"@string/noDataMessage\"\n    android:textAlignment=\"center\"\n    android:textSize=\"30sp\"\n    android:textStyle=\"bold\"\n    android:visibility=\"visible\"\n    app:layout_constraintBottom_toTopOf=\"@+id/main_noDataQrButton\"\n    app:layout_constraintEnd_toStartOf=\"@+id/main_dock\"\n    app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/main_noDataQrButton\"\n    android:layout_width=\"220dp\"\n    android:layout_height=\"220dp\"\n    android:layout_marginBottom=\"5dp\"\n    android:layout_marginEnd=\"8dp\"\n    android:layout_marginStart=\"8dp\"\n    android:layout_marginTop=\"30dp\"\n    android:background=\"@drawable/shape_qr_code_frame\"\n    android:elevation=\"16dp\"\n    android:onClick=\"qrScan\"\n    android:theme=\"@style/AppTheme\"\n    android:visibility=\"visible\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toStartOf=\"@+id/main_dock\"\n    app:layout_constraintStart_toStartOf=\"@+id/main_listDataListRecycler\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    tools:ignore=\"OnClick\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>for the activity lifecycle:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    Control.logData(\"creating activity\")\n\n    setContentView(R.layout.activity_app)\n    // keep screen alive\n    window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)\n    // set toolbar\n    setSupportActionBar(findViewById(R.id.app_toolbar))\n    supportActionBar?.title = getString(R.string.Datas)\n    supportActionBar?.setDisplayHomeAsUpEnabled(true)\n    supportActionBar?.setDisplayShowHomeEnabled(true)\n    isWaitingResult = savedInstanceState?.getBoolean(isWaitingResultCode) ?: false\n    savedInstanceState?.let{\n        fragment_state =  savedInstanceState.getString(fragState) ?: fragment_state\n        userAuth = savedInstanceState.getSerializable(userAuthCode) as? UserAuthentication?\n    }\n    val DataMenu = findViewById&lt;NavigationView&gt;(R.id.app_navigation)\n            .menu.findItem(R.id.DataButton)\n    DataMenu?.isChecked = true\n    if (!Control.filters) filterMenu?.icon = drawable(R.drawable.filter_inactive)\n    //injection\n    if (!isInjected) {\n        onInject()\n    }\n}\n\noverride fun onStop() {\n    super.onStop()\n    Control.logData(\"stopping activity\")\n    fragmentManager.executePendingTransactions()\n    Control.mainRunning = false\n    loop = false\n    saveFav()\n}\n\noverride fun onDestroy() {\n    super.onDestroy()\n    Control.logData(\"destroying activity\")\n    Control.rx.forEach { it.dismiss() }\n    Control.rx.clear()\n}\n</code></pre>\n\n<p>Control is a object with some function and data commonly used across the App</p>\n"}, {"tags": ["kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1542118325, "post_id": 53282761, "comment_id": 93447422, "body": "If you use a dispatcher other than <code>Unconfined</code>, I wonder how <code>map</code> would even work with a rendezvous channel."}, {"owner": {"reputation": 2679, "user_id": 4465354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peiDQ.png?s=128&g=1", "display_name": "qwwdfsad", "link": "https://stackoverflow.com/users/4465354/qwwdfsad"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1542361873, "post_id": 53282761, "comment_id": 93549530, "body": "@MarkoTopolnik why do you think it will not work?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 2679, "user_id": 4465354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peiDQ.png?s=128&g=1", "display_name": "qwwdfsad", "link": "https://stackoverflow.com/users/4465354/qwwdfsad"}, "edited": false, "score": 0, "creation_date": 1542361967, "post_id": 53282761, "comment_id": 93549584, "body": "@qwwdfsad Later on I realized it would, but awkwardly. The sending coroutine would remain suspended until the receiving coroutine gets and processes the item."}, {"owner": {"reputation": 2679, "user_id": 4465354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peiDQ.png?s=128&g=1", "display_name": "qwwdfsad", "link": "https://stackoverflow.com/users/4465354/qwwdfsad"}, "edited": false, "score": 1, "creation_date": 1542362101, "post_id": 53282761, "comment_id": 93549654, "body": "Just to clarify: sending coroutine is <code>GlobalScope.produce</code>, not the one which sends an element to the original channel. I honestly don&#39;t see why is it awkward for hot streams"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 2679, "user_id": 4465354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peiDQ.png?s=128&g=1", "display_name": "qwwdfsad", "link": "https://stackoverflow.com/users/4465354/qwwdfsad"}, "edited": false, "score": 0, "creation_date": 1542363154, "post_id": 53282761, "comment_id": 93550251, "body": "@qwwdfsad I automatically assumed that <code>produce</code> here is just a self-contained example and that the actual work would involve communicating coroutines."}], "answers": [{"tags": [], "owner": {"reputation": 2679, "user_id": 4465354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peiDQ.png?s=128&g=1", "display_name": "qwwdfsad", "link": "https://stackoverflow.com/users/4465354/qwwdfsad"}, "is_accepted": false, "score": 2, "last_activity_date": 1542361859, "creation_date": 1542361859, "answer_id": 53335266, "question_id": 53282761, "link": "https://stackoverflow.com/questions/53282761/kotlin-coroutines-how-to-use-array-channel-with-filter-map/53335266#53335266", "title": "Kotlin coroutines: How to use Array channel with filter / map?", "body": "<p>The only way is to provide your own map implementation with <code>capacity</code> parameter:</p>\n\n<pre><code>fun &lt;E, R&gt; ReceiveChannel&lt;E&gt;.map(context: CoroutineContext = Unconfined, capacity: Int = 0, transform: suspend (E) -&gt; R): ReceiveChannel&lt;R&gt; =\n    produce(context, capacity = capacity) {\n        consumeEach {\n            send(transform(it))\n        }\n    }\n</code></pre>\n\n<p>I've created a <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/841\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/issues/841</a>, but it won't be implemented soon. All channel operators can be potentially reworked when cold streams are introduced to make cancellation and scopes hierarchies consistent between hot and cold data sources.</p>\n"}], "owner": {"reputation": 15751, "user_id": 1345655, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2f01aca0b4d2d9347a6fd0f16f24d084?s=128&d=identicon&r=PG", "display_name": "Kshitiz Sharma", "link": "https://stackoverflow.com/users/1345655/kshitiz-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542361859, "creation_date": 1542117837, "question_id": 53282761, "link": "https://stackoverflow.com/questions/53282761/kotlin-coroutines-how-to-use-array-channel-with-filter-map", "title": "Kotlin coroutines: How to use Array channel with filter / map?", "body": "<p>I need to insert a buffer of 10000 elements between the various channel processors. </p>\n\n<p><code>produce()</code> provides a way to configure the buffer size:</p>\n\n<pre><code>produce(capacity = 10_000) {\n}\n</code></pre>\n\n<p>However <code>map</code>, <code>filter</code> default to a Rendezvous channel:</p>\n\n<pre><code>fun &lt;E, R&gt; ReceiveChannel&lt;E&gt;.map(context: CoroutineContext = Unconfined, transform: suspend (E) -&gt; R): ReceiveChannel&lt;R&gt; =\n    produce(context) { // No capacity specified, defaults to 0\n        consumeEach {\n            send(transform(it))\n        }\n    }\n</code></pre>\n\n<p>Is there a way to configure this? Currently I'm constructing my own versions of these stdlib functions with a buffer, which isn't very elegant.</p>\n"}, {"tags": ["android", "kotlin", "android-viewmodel", "android-paging"], "answers": [{"comments": [{"owner": {"reputation": 1024, "user_id": 5095473, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-viE-V7PoMqY/AAAAAAAAAAI/AAAAAAAAANg/bsytZE_XHYc/photo.jpg?sz=128", "display_name": "Mehul Kanzariya", "link": "https://stackoverflow.com/users/5095473/mehul-kanzariya"}, "edited": false, "score": 0, "creation_date": 1547279343, "post_id": 54146065, "comment_id": 95145682, "body": "I am getting the list and also the data is displayed. But the size of studentDataPagedList is always zero."}], "tags": [], "owner": {"reputation": 1159, "user_id": 6329985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26042e2e619f77144b8d947e3d2b671?s=128&d=identicon&r=PG&f=1", "display_name": "DawidJ", "link": "https://stackoverflow.com/users/6329985/dawidj"}, "is_accepted": false, "score": 0, "last_activity_date": 1547207736, "creation_date": 1547207736, "answer_id": 54146065, "question_id": 53282206, "link": "https://stackoverflow.com/questions/53282206/viewmodel-returns-arraylist-size-as-zero/54146065#54146065", "title": "ViewModel returns ArrayList size as zero", "body": "<blockquote>\n  <p>The Log statement prints always zero. I want to show a TextView if\n  list is empty but the list always returns size as zero.</p>\n</blockquote>\n\n<p>If list is empty, its size should be zero so it's correct behaviour.</p>\n\n<p>If you're getting empty list all the time than the problem is somewhere else, propably in the place when you extract data and add it to the list.</p>\n"}, {"comments": [{"owner": {"reputation": 1024, "user_id": 5095473, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-viE-V7PoMqY/AAAAAAAAAAI/AAAAAAAAANg/bsytZE_XHYc/photo.jpg?sz=128", "display_name": "Mehul Kanzariya", "link": "https://stackoverflow.com/users/5095473/mehul-kanzariya"}, "edited": false, "score": 0, "creation_date": 1547549488, "post_id": 54183843, "comment_id": 95221419, "body": "But the problem is that the log statement is only printed once with value 0 and I am also seeing the data in the RecyclerView."}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 1024, "user_id": 5095473, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-viE-V7PoMqY/AAAAAAAAAAI/AAAAAAAAANg/bsytZE_XHYc/photo.jpg?sz=128", "display_name": "Mehul Kanzariya", "link": "https://stackoverflow.com/users/5095473/mehul-kanzariya"}, "edited": false, "score": 0, "creation_date": 1547553127, "post_id": 54183843, "comment_id": 95223244, "body": "It is only printed once, because you only receive the list once. The list itself will be populated later."}, {"owner": {"reputation": 1024, "user_id": 5095473, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-viE-V7PoMqY/AAAAAAAAAAI/AAAAAAAAANg/bsytZE_XHYc/photo.jpg?sz=128", "display_name": "Mehul Kanzariya", "link": "https://stackoverflow.com/users/5095473/mehul-kanzariya"}, "edited": false, "score": 0, "creation_date": 1547553227, "post_id": 54183843, "comment_id": 95223303, "body": "Can you please provide the solution. I am kind of stuck here for more than 2 days."}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 1024, "user_id": 5095473, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-viE-V7PoMqY/AAAAAAAAAAI/AAAAAAAAANg/bsytZE_XHYc/photo.jpg?sz=128", "display_name": "Mehul Kanzariya", "link": "https://stackoverflow.com/users/5095473/mehul-kanzariya"}, "edited": false, "score": 0, "creation_date": 1547570813, "post_id": 54183843, "comment_id": 95233469, "body": "It might be out of scope a bit. Have a look at <a href=\"http://alexzh.com/tutorials/how-to-setemptyview-to-recyclerview/\" rel=\"nofollow noreferrer\">this blog post</a> or try to look for something similar with google. There might be libraries for it already."}, {"owner": {"reputation": 1024, "user_id": 5095473, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-viE-V7PoMqY/AAAAAAAAAAI/AAAAAAAAANg/bsytZE_XHYc/photo.jpg?sz=128", "display_name": "Mehul Kanzariya", "link": "https://stackoverflow.com/users/5095473/mehul-kanzariya"}, "edited": false, "score": 0, "creation_date": 1547629922, "post_id": 54183843, "comment_id": 95252974, "body": "Thanks, the link helped."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 1, "last_activity_date": 1547477768, "creation_date": 1547477768, "answer_id": 54183843, "question_id": 53282206, "link": "https://stackoverflow.com/questions/53282206/viewmodel-returns-arraylist-size-as-zero/54183843#54183843", "title": "ViewModel returns ArrayList size as zero", "body": "<p>When you receive the <code>PagedList</code> for the first time it could be empty if <code>setEnablePlaceholders(false)</code> was provided as configuration. If you want or can handle <code>null</code> values, you might enable placeholders. If there's just no data yet, you might want to look into different approaches.</p>\n\n<p>You could wrap you adapter with a custom implementation which delegates the dataset changes properly and displays a single item when the original adapter has no items.</p>\n\n<p>The <a href=\"https://developer.android.com/reference/android/arch/paging/PagedList\" rel=\"nofollow noreferrer\">PagedList documentation</a> states in regard of the placeholder:</p>\n\n<blockquote>\n  <p><strong>Placeholders</strong></p>\n  \n  <p>There are two ways that PagedList can represent its not-yet-loaded\n  data - with or without <code>null</code> placeholders.</p>\n  \n  <p>With placeholders, the PagedList is always the full size of the data\n  set. <code>get(N)</code> returns the <code>N</code>th item in the data set, or <code>null</code> if its\n  not yet loaded.</p>\n  \n  <p>Without <code>null</code> placeholders, the PagedList is the sublist of data that\n  has already been loaded. The size of the PagedList is the number of\n  currently loaded items, and <code>get(N)</code> returns the <code>N</code>th loaded item.\n  This is not necessarily the <code>N</code>th item in the data set.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1024, "user_id": 5095473, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-viE-V7PoMqY/AAAAAAAAAAI/AAAAAAAAANg/bsytZE_XHYc/photo.jpg?sz=128", "display_name": "Mehul Kanzariya", "link": "https://stackoverflow.com/users/5095473/mehul-kanzariya"}, "is_accepted": false, "score": -1, "last_activity_date": 1547636287, "creation_date": 1547636287, "answer_id": 54215553, "question_id": 53282206, "link": "https://stackoverflow.com/questions/53282206/viewmodel-returns-arraylist-size-as-zero/54215553#54215553", "title": "ViewModel returns ArrayList size as zero", "body": "<p>I was able to show the empty state using <code>RecyclerView.AdapterObserver</code> as shown below:</p>\n\n<p><strong>Initialize and register the AdapterObserver</strong></p>\n\n<pre><code>        val adapterDataObserver = object : RecyclerView.AdapterDataObserver() {\n\n        override fun onItemRangeInserted(positionStart: Int, itemCount: Int) {\n            super.onItemRangeInserted(positionStart, itemCount)\n            showEmptyState(myAdapter.itemCount == 0)\n        }\n\n        override fun onItemRangeRemoved(positionStart: Int, itemCount: Int) {\n            super.onItemRangeRemoved(positionStart, itemCount)\n            showEmptyState(myAdapter.itemCount == 0)\n        }\n    }\n       myAdapter.registerAdapterDataObserver(adapterDataObserver)\n</code></pre>\n\n<p>Also, don't forget to unRegister the AdapterObserver in <code>onDestroy()</code></p>\n"}], "owner": {"reputation": 8825, "user_id": 9552485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64199688cf1f452ad34b279db836038?s=128&d=identicon&r=PG&f=1", "display_name": "Pritish", "link": "https://stackoverflow.com/users/9552485/pritish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1547636287, "creation_date": 1542116093, "last_edit_date": 1547207856, "question_id": 53282206, "link": "https://stackoverflow.com/questions/53282206/viewmodel-returns-arraylist-size-as-zero", "title": "ViewModel returns ArrayList size as zero", "body": "<p>I am using Android <code>Paging</code> library to load data from server in my <code>RecyclerView</code>. I am able to see the data properly but when i print the size of the list, it returns me zero.</p>\n\n<p>Following is my code:</p>\n\n<pre><code>val itemViewModel =\n                ViewModelProviders.of(this, MyViewModelFacotry(disciplineId, schoolId, yearId)).get(StudentInfoViewModel::class.java)\n        activity?.let {\n            itemViewModel.itemPagedList.observe(it, Observer&lt;PagedList&lt;StudentData&gt;&gt; { studentDataPagedList -&gt;\n                if(BuildConfig.DEBUG){\n                    Log.i(\"MainActivity\",studentDataPagedList?.size.toString())\n                }\n                studentInfoNameAdapter?.submitList(studentDataPagedList)\n            })\n\n            recyclerView.adapter = studentInfoNameAdapter\n        }\n</code></pre>\n\n<p>The <code>Log</code> statement prints always zero. I want to show a <code>TextView</code> if list is empty but the list always returns size as zero.</p>\n"}, {"tags": ["android", "kotlin", "calculator"], "comments": [{"owner": {"reputation": 4036, "user_id": 1277259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FQ3JN.png?s=128&g=1", "display_name": "KevinO", "link": "https://stackoverflow.com/users/1277259/kevino"}, "edited": false, "score": 0, "creation_date": 1542112205, "post_id": 53281019, "comment_id": 93443715, "body": "what would <code>input.length == 1</code> indicate?"}, {"owner": {"reputation": 4036, "user_id": 1277259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FQ3JN.png?s=128&g=1", "display_name": "KevinO", "link": "https://stackoverflow.com/users/1277259/kevino"}, "edited": false, "score": 0, "creation_date": 1542112479, "post_id": 53281019, "comment_id": 93443864, "body": "if you have a line of <code>if (input.length == 2)</code> which returns a boolean, why would <code>input.length == 1</code> therefore return the first input?"}, {"owner": {"reputation": 43, "user_id": 10646020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2d7cd3dce68c11282aeb1645b4f0c0?s=128&d=identicon&r=PG&f=1", "display_name": "user10646020", "link": "https://stackoverflow.com/users/10646020/user10646020"}, "edited": false, "score": 2, "creation_date": 1542112565, "post_id": 53281019, "comment_id": 93443909, "body": "this question is in kotlin."}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 1, "creation_date": 1542112980, "post_id": 53281019, "comment_id": 93444140, "body": "Honestly: I think you are trying to do 10 things at the same time, but you understand only 10% of the code you write. I think you are overburdening yourself right now, and you should step back and study some basic kotlin for a while. There is no point in trying to do &quot;real world&quot; things when you have no idea how the language works. Beyond that, you got some good answers by now, so please dont forget about accepting one of them!"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10646020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2d7cd3dce68c11282aeb1645b4f0c0?s=128&d=identicon&r=PG&f=1", "display_name": "user10646020", "link": "https://stackoverflow.com/users/10646020/user10646020"}, "edited": false, "score": 2, "creation_date": 1542112475, "post_id": 53281085, "comment_id": 93443860, "body": "So what can i do to get firstValue and secondValue."}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "reply_to_user": {"reputation": 43, "user_id": 10646020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2d7cd3dce68c11282aeb1645b4f0c0?s=128&d=identicon&r=PG&f=1", "display_name": "user10646020", "link": "https://stackoverflow.com/users/10646020/user10646020"}, "edited": false, "score": 1, "creation_date": 1542112532, "post_id": 53281085, "comment_id": 93443888, "body": "@user10646020 What do you <b>want</b> them to be? You see, <code>input.length == 1 </code> results in a boolean value. Do you want true, or &quot;true&quot; as string?!"}, {"owner": {"reputation": 43, "user_id": 10646020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2d7cd3dce68c11282aeb1645b4f0c0?s=128&d=identicon&r=PG&f=1", "display_name": "user10646020", "link": "https://stackoverflow.com/users/10646020/user10646020"}, "edited": false, "score": 1, "creation_date": 1542112703, "post_id": 53281085, "comment_id": 93443993, "body": "I tries to get 1st and 2nd values of user input and then add them."}], "tags": [], "owner": {"reputation": 1459, "user_id": 3557714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28dd7675ea1dc75bc4fb12aa7cab2ff?s=128&d=identicon&r=PG&f=1", "display_name": "Ben R.", "link": "https://stackoverflow.com/users/3557714/ben-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1542112353, "creation_date": 1542112353, "answer_id": 53281085, "question_id": 53281019, "link": "https://stackoverflow.com/questions/53281019/how-to-add-two-numbers-on-same-line/53281085#53281085", "title": "How to add two numbers on same line?", "body": "<pre><code>    val firstValue = input.length == 1 \n    val secondValue = input.length == 2 \n</code></pre>\n\n<p>Both of these blocks are actually booleans. firstValue is the boolean result of \"is input length equal to 1\", and similarly for secondValue. This means firstValue + secondValue is actually something like</p>\n\n<pre><code>val result = true + false\n</code></pre>\n\n<p>which I guess isn't being picked up as an error at compile time because of the Java 9 <code>val</code> keyword. But result is actually a boolean.</p>\n"}, {"tags": [], "owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "is_accepted": false, "score": 1, "last_activity_date": 1542112850, "last_edit_date": 1542112850, "creation_date": 1542112377, "answer_id": 53281088, "question_id": 53281019, "link": "https://stackoverflow.com/questions/53281019/how-to-add-two-numbers-on-same-line/53281088#53281088", "title": "How to add two numbers on same line?", "body": "<p>First of all, this is \"half of\" a duplicate of this <a href=\"https://stackoverflow.com/questions/29140402/how-do-i-print-my-java-object-without-getting-sometype2f92e0f4\">question</a>. But it goes beyond that.</p>\n\n<p>The problem here is that val is hiding actual types, and then things go wrong. </p>\n\n<p><code>[Ljava.lang.Boolean;@312b186\"</code> means that you are calling <code>toString()</code> on an array of <strong>Boolean</strong> objects. </p>\n\n<p>In other words: instead of putting together a string object, you created a boolean array (with two values), and then you get thatArray.toString() as result.</p>\n\n<p>So, in a first step: don't use <code>val</code> all over the place, but give distinct types. </p>\n\n<p>It looks like you expect the <strong>incoming</strong> strings to be numbers. If so, you should rather do as the other answer suggests, and use <code>toInt()</code> on your input strings!</p>\n"}, {"comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 1, "creation_date": 1542112886, "post_id": 53281186, "comment_id": 93444086, "body": "Ah, I was about to change my answer to talk about &quot;how to convert to int&quot;. I took the short path, just mention it, and upvoted your example instead ;-)"}, {"owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "edited": false, "score": 0, "creation_date": 1542113574, "post_id": 53281186, "comment_id": 93444454, "body": "You&#39;re right about having to use <code>subsequence</code>, <code>toInt</code> on a CharSequence won&#39;t compile. Another small note, semicolons are optional"}], "tags": [], "owner": {"reputation": 4036, "user_id": 1277259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FQ3JN.png?s=128&g=1", "display_name": "KevinO", "link": "https://stackoverflow.com/users/1277259/kevino"}, "is_accepted": false, "score": 1, "last_activity_date": 1542113144, "last_edit_date": 1542113144, "creation_date": 1542112718, "answer_id": 53281186, "question_id": 53281019, "link": "https://stackoverflow.com/questions/53281019/how-to-add-two-numbers-on-same-line/53281186#53281186", "title": "How to add two numbers on same line?", "body": "<p>The issue is that <code>val firstValue = input.length == 1</code> returns a boolean. As is somewhat clear by the original <code>if</code> test.</p>\n\n<p>To get the value of the position, first you will need to do something like:</p>\n\n<pre><code>val firstValue = input.get(0);\n</code></pre>\n\n<p>However, I would expect that to return a <code>String</code>. So you will need to convert the <code>String</code> to an integer. </p>\n\n<pre><code>val firstValue = input.get(0).toInt(10);\n</code></pre>\n\n<p>You should then be able to add the values (subject to making modifications to the <code>secondValue</code>).</p>\n\n<p>Note: instead of <code>get()</code>, it might be necessary to do <code>.subSequence(0, 1)</code> and <code>.subsequence(1, 2)</code> depending upon the specifics of the <code>.toInt()</code>. I don't have a Kotlin environment running at the moment to confirm.</p>\n"}, {"comments": [{"owner": {"reputation": 4036, "user_id": 1277259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FQ3JN.png?s=128&g=1", "display_name": "KevinO", "link": "https://stackoverflow.com/users/1277259/kevino"}, "edited": false, "score": 0, "creation_date": 1542113276, "post_id": 53281275, "comment_id": 93444310, "body": "I don&#39;t see how this answer addresses the issue of the OP. They have (in essence) a <code>String</code>, and this answer starts with the assumption of an <code>int</code>. If the OP first converted the <code>String</code> to an <code>int</code>, then this approach could work."}, {"owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "edited": false, "score": 0, "creation_date": 1542113658, "post_id": 53281275, "comment_id": 93444512, "body": "The question is asking for Kotlin, this won&#39;t compile"}, {"owner": {"reputation": 17, "user_id": 9559168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c78948ae6d087c8158d2bae3bf2848e?s=128&d=identicon&r=PG&f=1", "display_name": "Cibi Pranov A", "link": "https://stackoverflow.com/users/9559168/cibi-pranov-a"}, "reply_to_user": {"reputation": 4036, "user_id": 1277259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FQ3JN.png?s=128&g=1", "display_name": "KevinO", "link": "https://stackoverflow.com/users/1277259/kevino"}, "edited": false, "score": 0, "creation_date": 1542113743, "post_id": 53281275, "comment_id": 93444554, "body": "@KevinO You&#39;re right. I just gave him the logic of how to do it. Obviously for his requirement, editText content should be converted to int. I probably should&#39;ve mentioned that in the answer."}], "tags": [], "owner": {"reputation": 17, "user_id": 9559168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c78948ae6d087c8158d2bae3bf2848e?s=128&d=identicon&r=PG&f=1", "display_name": "Cibi Pranov A", "link": "https://stackoverflow.com/users/9559168/cibi-pranov-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1542113814, "last_edit_date": 1542113814, "creation_date": 1542113006, "answer_id": 53281275, "question_id": 53281019, "link": "https://stackoverflow.com/questions/53281019/how-to-add-two-numbers-on-same-line/53281275#53281275", "title": "How to add two numbers on same line?", "body": "<p>Extract the remainder of the number by using modulus operation and add the remainder to the result variable. Here's the code...</p>\n\n<pre><code>    int remainder, result = 0;\n    String value= editText.getText().toString();\n    int i=Integer.parseInt(value);\n    int temp=i;\n    while(temp != 0){\n        remainder=temp % 10;\n        result += remainder;\n        temp=temp/10;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "is_accepted": true, "score": 1, "last_activity_date": 1542113088, "creation_date": 1542113088, "answer_id": 53281299, "question_id": 53281019, "link": "https://stackoverflow.com/questions/53281019/how-to-add-two-numbers-on-same-line/53281299#53281299", "title": "How to add two numbers on same line?", "body": "<p>In your example, you are incorrectly retrieving the values from the EditText:</p>\n\n<pre><code>val firstValue = input.length == 1\n</code></pre>\n\n<p>What this will do is check if <code>input.length</code> has a length of 1, and will set <code>firstValue</code> to the resulting boolean (either <code>true</code> or <code>false</code>). hence why you are a Boolean as a result.</p>\n\n<p>To retrieve text from an EditText, you must do something like:</p>\n\n<pre><code>val inputString = input.getText().toString()\n</code></pre>\n\n<p>Which will retrieve the text from an EditText as a String.</p>\n\n<p>Next, we retrieve a single character using substring, then parse it to an integer. </p>\n\n<pre><code>val firstValue = inputString.substring(0,1).toInt()\nval secondValue = inputString.subString(1,2).toInt()\n</code></pre>\n\n<p>We can now add our integers together to get the result:</p>\n\n<pre><code>val result = firstValue + secondValue\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 117, "user_id": 7202109, "user_type": "registered", "profile_image": "https://graph.facebook.com/1905456089739937/picture?type=large", "display_name": "ngenge", "link": "https://stackoverflow.com/users/7202109/ngenge"}, "is_accepted": false, "score": 1, "last_activity_date": 1542113277, "creation_date": 1542113277, "answer_id": 53281359, "question_id": 53281019, "link": "https://stackoverflow.com/questions/53281019/how-to-add-two-numbers-on-same-line/53281359#53281359", "title": "How to add two numbers on same line?", "body": "<p>firstValue and secondValue are assigned booleans and not Ints. A quick fix will be as follows. </p>\n\n<pre><code>val input = editText.text.toString()\nif (input.length == 2) { \n    val firstValue = input[0]\n    val secondValue = input[1]\n    val result = firstValue.toInt() + secondValue.toInt()\n    textView.text = \"$result\"\n}`\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10646020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2d7cd3dce68c11282aeb1645b4f0c0?s=128&d=identicon&r=PG&f=1", "display_name": "user10646020", "link": "https://stackoverflow.com/users/10646020/user10646020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 1, "accepted_answer_id": 53281299, "answer_count": 6, "score": 1, "last_activity_date": 1542113814, "creation_date": 1542112115, "last_edit_date": 1542112898, "question_id": 53281019, "link": "https://stackoverflow.com/questions/53281019/how-to-add-two-numbers-on-same-line", "title": "How to add two numbers on same line?", "body": "<p>I want to add first and second value of editText. For example: If user enters 15 then add 1 into 5. I have tried this code:</p>\n\n<pre><code>    val input = editText.text\n    if (input.length == 2) { \n        val firstValue = input.length == 1 \n        val secondValue = input.length == 2 \n        val result = firstValue + secondValue\n        textView.text = result\n    }\n</code></pre>\n\n<p>but I get this result: \"[Ljava.lang.Boolean;@312b186\"</p>\n"}, {"tags": ["android", "kotlin", "android-room", "androidx"], "comments": [{"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1542112253, "post_id": 53280994, "comment_id": 93443744, "body": "__insertionAdapterOfUserTable is final?"}, {"owner": {"reputation": 5192, "user_id": 3084205, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qaFQu.jpg?s=128&g=1", "display_name": "Stanislav Bondar", "link": "https://stackoverflow.com/users/3084205/stanislav-bondar"}, "reply_to_user": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1542112439, "post_id": 53280994, "comment_id": 93443836, "body": "@sasikumar Yes, all the local variables are final"}, {"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1542112569, "post_id": 53280994, "comment_id": 93443911, "body": "make long _result as final"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1542112627, "post_id": 53280994, "comment_id": 93443949, "body": "Try using a newer Java version. In these the compiler is able to use variables which are not changed as if these were <code>final</code>."}, {"owner": {"reputation": 5192, "user_id": 3084205, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qaFQu.jpg?s=128&g=1", "display_name": "Stanislav Bondar", "link": "https://stackoverflow.com/users/3084205/stanislav-bondar"}, "reply_to_user": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1542112763, "post_id": 53280994, "comment_id": 93444018, "body": "@tynn thank you i&#39;ll try it"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 3021656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbaac7748c0bb58f56458b13b6e0d857?s=128&d=identicon&r=PG&f=1", "display_name": "CamiH", "link": "https://stackoverflow.com/users/3021656/camih"}, "is_accepted": true, "score": 1, "last_activity_date": 1542892037, "creation_date": 1542892037, "answer_id": 53431729, "question_id": 53280994, "link": "https://stackoverflow.com/questions/53280994/andoridx-room-rx-issue/53431729#53431729", "title": "Andoridx Room rx issue", "body": "<p>I had the same problem. Solved it by adding </p>\n\n<pre><code>compileOptions {\n  sourceCompatibility JavaVersion.VERSION_1_8\n  targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre>\n\n<p>in build.gradle</p>\n"}, {"tags": [], "owner": {"reputation": 5192, "user_id": 3084205, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qaFQu.jpg?s=128&g=1", "display_name": "Stanislav Bondar", "link": "https://stackoverflow.com/users/3084205/stanislav-bondar"}, "is_accepted": false, "score": 0, "last_activity_date": 1543391482, "last_edit_date": 1592644375, "creation_date": 1543391482, "answer_id": 53514560, "question_id": 53280994, "link": "https://stackoverflow.com/questions/53280994/andoridx-room-rx-issue/53514560#53514560", "title": "Andoridx Room rx issue", "body": "<p>I'm using Linux machine and combining answers of user3021656 and tynn got success build with</p>\n<pre><code>compileOptions {\n  sourceCompatibility JavaVersion.VERSION_1_8\n  targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre>\n<p>and setting Java version for Android Studio as</p>\n<blockquote>\n<p>java version &quot;1.8.0_191&quot;</p>\n<p>Java(TM) SE Runtime Environment (build 1.8.0_191-b12)</p>\n</blockquote>\n"}], "owner": {"reputation": 5192, "user_id": 3084205, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qaFQu.jpg?s=128&g=1", "display_name": "Stanislav Bondar", "link": "https://stackoverflow.com/users/3084205/stanislav-bondar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 53431729, "answer_count": 2, "score": 4, "last_activity_date": 1543391482, "creation_date": 1542112003, "last_edit_date": 1542915784, "question_id": 53280994, "link": "https://stackoverflow.com/questions/53280994/andoridx-room-rx-issue", "title": "Andoridx Room rx issue", "body": "<p>I'm start to use latest <code>androidx.room</code> version that support <code>io.reactivex</code> return type. </p>\n\n<pre><code>dependencies {\n    def room_version = \"2.1.0-alpha02\"\n    implementation \"androidx.room:room-rxjava2:$room_version\"\n    kapt \"androidx.room:room-compiler:$room_version\"\n    testImplementation \"androidx.room:room-testing:$room_version\"\n}\n</code></pre>\n\n<p>Simple dao class </p>\n\n<pre><code>@Dao\ninterface UserDao : BaseDao&lt;UserTable&gt; {\n\n    @Insert(onConflict = OnConflictStrategy.IGNORE)\n    fun insertUser(user: UserTable):Maybe&lt;Long&gt;\n\n    @Update\n    fun updateUser(user:UserTable):Completable\n\n    @Query(\"DELETE FROM $USER_TABLE\")\n    fun clear()\n}\n</code></pre>\n\n<p>generates <code>UserDao_Impl.java</code> with error</p>\n\n<blockquote>\n  <p>error: local variable user is accessed from within inner class; needs to be declared final</p>\n</blockquote>\n\n<p>Highlighted field is in this method</p>\n\n<pre><code>  @Override\n  public Maybe&lt;Long&gt; insertUser(UserTable user) {\n    return Maybe.fromCallable(new Callable&lt;Long&gt;() {\n     @Override\n     public Long call() throws Exception {\n       __db.beginTransaction();\n        try {\n          long _result = \n           __insertionAdapterOfUserTable.insertAndReturnId(user);//error line\n           __db.setTransactionSuccessful();\n         return _result;\n        } finally {\n         __db.endTransaction();\n        }\n      }\n    });\n  }\n</code></pre>\n\n<p>It's true that <code>(UserTable user)</code> should be declared as final in java but it is generated class.\nDoes any one came across this?</p>\n"}, {"tags": ["http", "kotlin", "request", "mockk"], "comments": [{"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 1, "creation_date": 1542216310, "post_id": 53280953, "comment_id": 93492159, "body": "I think this kinds of questions are more appropriate to ask to gitter chat or github issues, as they are pretty specific. Anyway this issue is not related to MockK itself, it is about building apropriate request, which may be super hard to achieve. Just debug &quot;Request.equals&quot; method and compare what is included there. Thanks"}, {"owner": {"reputation": 8806, "user_id": 629555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f75ab6b6c73485b51b2ac990de379a0?s=128&d=identicon&r=PG", "display_name": "Louth", "link": "https://stackoverflow.com/users/629555/louth"}, "edited": false, "score": 2, "creation_date": 1554171047, "post_id": 53280953, "comment_id": 97643530, "body": "This is a perfectly acceptable question for StackOverflow."}], "answers": [{"tags": [], "owner": {"reputation": 632, "user_id": 7341528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddee6302cbca0f95b323769671827d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vova Stelmashchuk", "link": "https://stackoverflow.com/users/7341528/vova-stelmashchuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1542283728, "creation_date": 1542283728, "answer_id": 53319186, "question_id": 53280953, "link": "https://stackoverflow.com/questions/53280953/how-to-mock-a-post-request-with-mockk-and-fuel-in-kotlin/53319186#53319186", "title": "How to mock a POST request with mockk and fuel in kotlin?", "body": "<p>Try to use following:</p>\n\n<pre><code> every { client.executeRequest(req) } returns &lt;mock object&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 594, "user_id": 3947487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HafAV.png?s=128&g=1", "display_name": "nanangarsyad", "link": "https://stackoverflow.com/users/3947487/nanangarsyad"}, "is_accepted": false, "score": 0, "last_activity_date": 1572567770, "last_edit_date": 1572567770, "creation_date": 1572567156, "answer_id": 58652651, "question_id": 53280953, "link": "https://stackoverflow.com/questions/53280953/how-to-mock-a-post-request-with-mockk-and-fuel-in-kotlin/58652651#58652651", "title": "How to mock a POST request with mockk and fuel in kotlin?", "body": "<p>You could try these lines. Regarding how to intercept fuel request.</p>\n\n<pre><code>fun interceptFuel(method: Method, url: String) {\n    val interceptor = { next: (Request) -&gt; Request -&gt;\n        { req: Request -&gt;\n            if (req.method == method &amp;&amp; req.url.toString() == url) {\n                val client = mockk&lt;Client&gt;()\n                /*mock fuel into whatever you like*/\n                FuelManager.instance.client = client\n            }\n            next(req)\n        }\n    }\n    FuelManager.instance.addRequestInterceptor(interceptor)\n}\n</code></pre>\n\n<p>then, use it like this</p>\n\n<pre><code>interceptFuel(Method.GET, \"https://google.com\") \n</code></pre>\n\n<p>BTW, this code not fully tested. Use at your own risk</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5190052, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qQXlXd5aYTU/AAAAAAAAAAI/AAAAAAAAOYk/O73d7DbjeMA/photo.jpg?sz=128", "display_name": "Rich", "link": "https://stackoverflow.com/users/5190052/rich"}, "is_accepted": false, "score": 1, "last_activity_date": 1592493068, "creation_date": 1592493068, "answer_id": 62453254, "question_id": 53280953, "link": "https://stackoverflow.com/questions/53280953/how-to-mock-a-post-request-with-mockk-and-fuel-in-kotlin/62453254#62453254", "title": "How to mock a POST request with mockk and fuel in kotlin?", "body": "<p>To all those people that ended up here trying to find a solution to this, I've found something that solves the problem for my use case (but there are likely many use cases it's not appropriate for and I accept that it may not be the nicest...).</p>\n\n<p>Provided you always have the calls to different endpoints in the same order every time you can do - </p>\n\n<pre><code>every { client.executeRequest(any()).data} returnsMany listOf(responseBody1, responseBody2, ... , responseBodyN)\n</code></pre>\n\n<p>Which will return the next response body for every subsequent call to the Fuel client.</p>\n\n<p>The full code would look like (using OP's example) - </p>\n\n<pre><code>val response1 = \"This is response one\"\nval response2 = \"This is response two\"\n\nval client = mockk&lt;Client&gt;()\n    every { client.executeRequest(any()).statusCode } returns 200\n    every { client.executeRequest(any()).responseMessage } returns \"test\"\n    every { client.executeRequest(any()).data } returnsMany listOf(response1.toByteArray(), response2.toByteArray())\n\n    FuelManager.instance.client = client\n\n    assertEquals(\"This is response one\", testHttpRequest())\n    assertEquals(\"This is response two\", testHttpRequest())\n</code></pre>\n\n<p>I suspect the correct way to do this is with a 'CustomMatcher' extension function on the <code>MockKMatcherScope</code> as detailed <a href=\"https://github.com/mockk/mockk#matcher-extensibility\" rel=\"nofollow noreferrer\">here</a>. I could only get the mock to response with the last item that'd been mocked when doing that, rather than the correct item but YMMV...</p>\n"}], "owner": {"reputation": 191, "user_id": 3745870, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1a982032ee21c5eeb6a8336f419e669f?s=128&d=identicon&r=PG&f=1", "display_name": "user3745870", "link": "https://stackoverflow.com/users/3745870/user3745870"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1872, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1592493068, "creation_date": 1542111842, "question_id": 53280953, "link": "https://stackoverflow.com/questions/53280953/how-to-mock-a-post-request-with-mockk-and-fuel-in-kotlin", "title": "How to mock a POST request with mockk and fuel in kotlin?", "body": "<p>I am making some http requests in kotlin with fuel library. I want to test that code using mockk library. I figured out how to mock http requests. Below is the code for that. </p>\n\n<pre><code>    val client = mockk&lt;Client&gt;()\n    every { client.executeRequest(any()).statusCode } returns 200\n    every { client.executeRequest(any()).responseMessage } returns \"test\"\n    every { client.executeRequest(any()).data } returns \"abc\".toByteArray()\n\n    FuelManager.instance.client = client\n\n    assertEquals(\"abc\" , testHttpRequest())\n</code></pre>\n\n<p>I do not like that <code>any()</code> here. I want to be specific about the http method and the url. I would like to return specific responses based on the url being called and the http method being used. </p>\n\n<p>I figured may be I could do following </p>\n\n<pre><code>    val req = Request(Method.POST, \"my/test\", URL(\"https://testRequest.com\"), timeoutInMillisecond = 3000, timeoutReadInMillisecond = 3000)\n\n    every { client.executeRequest(req).statusCode } returns 200\n    every { client.executeRequest(req).responseMessage } returns \"OK\"\n    every { client.executeRequest(req).data } returns \"abc\".toByteArray()\n\n    FuelManager.instance.client = client\n</code></pre>\n\n<p>But I am getting following error. </p>\n\n<pre><code>io.mockk.MockKException: no answer found for: Client(#1).executeRequest(--&gt; \nhttps://testRequest.com/my/test\n\"Body : abc\"\n\"Headers : (3)\"\nAccept-Encoding : compress;q=0.5, gzip;q=1.0\nContent-Type : application/json\nAuthorization : Basic xxx)\n</code></pre>\n\n<p>What am I missing here? </p>\n"}, {"tags": ["android", "kotlin", "material-components"], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 7301994, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-qWaBeDMhPDg/AAAAAAAAAAI/AAAAAAAAAdU/CgdafEnGZbE/photo.jpg?sz=128", "display_name": "Daniel D&#228;schle", "link": "https://stackoverflow.com/users/7301994/daniel-d%c3%a4schle"}, "edited": false, "score": 0, "creation_date": 1542270936, "post_id": 53306623, "comment_id": 93510747, "body": "Nice, thank you. My solution was to use the MaterialComponents Bridge Theme in combination with MaterialDateTimePicker."}, {"owner": {"reputation": 170, "user_id": 5489626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nqYdH.jpg?s=128&g=1", "display_name": "cleanOK", "link": "https://stackoverflow.com/users/5489626/cleanok"}, "reply_to_user": {"reputation": 553, "user_id": 7301994, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-qWaBeDMhPDg/AAAAAAAAAAI/AAAAAAAAAdU/CgdafEnGZbE/photo.jpg?sz=128", "display_name": "Daniel D&#228;schle", "link": "https://stackoverflow.com/users/7301994/daniel-d%c3%a4schle"}, "edited": false, "score": 2, "creation_date": 1561907721, "post_id": 53306623, "comment_id": 100204124, "body": "Hi @DanielD&#228;schle can you elaborate on this and provide some code?"}, {"owner": {"reputation": 89, "user_id": 10226121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4B1Tu.gif?s=128&g=1", "display_name": "wcshi", "link": "https://stackoverflow.com/users/10226121/wcshi"}, "edited": false, "score": 1, "creation_date": 1580424328, "post_id": 53306623, "comment_id": 106103472, "body": "<a href=\"https://github.com/material-components/material-components-android/blob/master/docs/components/Picker.md\" rel=\"nofollow noreferrer\">github.com/material-components/material-components-android/b&zwnj;&#8203;lob/&hellip;</a>"}], "tags": [], "owner": {"reputation": 89, "user_id": 10226121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4B1Tu.gif?s=128&g=1", "display_name": "wcshi", "link": "https://stackoverflow.com/users/10226121/wcshi"}, "is_accepted": true, "score": 1, "last_activity_date": 1542220109, "creation_date": 1542220109, "answer_id": 53306623, "question_id": 53280662, "link": "https://stackoverflow.com/questions/53280662/how-to-properly-display-datepickerdialog-using-materialcomponents/53306623#53306623", "title": "How to properly display DatePickerDialog using MaterialComponents?", "body": "<p>Thank you for the question. The Material Components library currently doesn't support dark mode for date and time pickers. We plan to add support for this, please stay tuned.</p>\n"}], "owner": {"reputation": 553, "user_id": 7301994, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-qWaBeDMhPDg/AAAAAAAAAAI/AAAAAAAAAdU/CgdafEnGZbE/photo.jpg?sz=128", "display_name": "Daniel D&#228;schle", "link": "https://stackoverflow.com/users/7301994/daniel-d%c3%a4schle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 53306623, "answer_count": 1, "score": 6, "last_activity_date": 1542220109, "creation_date": 1542110669, "question_id": 53280662, "link": "https://stackoverflow.com/questions/53280662/how-to-properly-display-datepickerdialog-using-materialcomponents", "title": "How to properly display DatePickerDialog using MaterialComponents?", "body": "<p>I'm using MaterialComponents for Android from material.io.</p>\n\n<p>I have two themes (light and dark). I want to show an DatePickerDialog.\nBut this is the result:\n<a href=\"https://i.stack.imgur.com/U20oF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/U20oF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the code how i show my dialog:</p>\n\n<pre><code>private fun selectDeadline() {\n    val dialog = DateDialog()\n    val bundle = Bundle()\n    bundle.putInt(\"themeId\", themeId)\n    dialog.arguments = bundle\n    dialog.show(supportFragmentManager, \"\")\n}\n\nclass DateDialog : DialogFragment(), DatePickerDialog.OnDateSetListener {\n\n    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {\n        val date = DateTime.now()\n        val themeId = arguments!!.getInt(\"themeId\")\n        return DatePickerDialog(activity!!, themeId, this, date.year, date.monthOfYear - 1, date.dayOfMonth)\n    }\n\n    override fun onDateSet(view: DatePicker?, year: Int, month: Int, day: Int) {\n        deadlineTitle.text = \"$year, $month, $day\"\n    }\n}\n</code></pre>\n\n<p>And last but not least, my themes:</p>\n\n<pre><code>&lt;resources&gt;\n\n&lt;!-- Dark application theme. --&gt;\n&lt;style name=\"AppTheme.Dark\" parent=\"Theme.MaterialComponents.NoActionBar\"&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n\n    &lt;item name=\"toolbarBackground\"&gt;@color/darkBackground&lt;/item&gt;\n    &lt;item name=\"toolbarStyle\"&gt;@style/AppTheme.Dark.Toolbar&lt;/item&gt;\n    &lt;item name=\"iconColor\"&gt;#fff&lt;/item&gt;\n    &lt;item name=\"dividerBackground\"&gt;@android:drawable/divider_horizontal_dark&lt;/item&gt;\n\n    &lt;item name=\"android:statusBarColor\"&gt;@android:color/black&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"AppTheme.Dark.Toolbar\" parent=\"Widget.AppCompat.Toolbar\"&gt;\n    &lt;item name=\"android:background\"&gt;@color/darkBackground&lt;/item&gt;\n    &lt;item name=\"android:elevation\"&gt;8dp&lt;/item&gt;\n&lt;/style&gt;\n\n\n\n&lt;!-- Light application theme. --&gt;\n&lt;style name=\"AppTheme.Light\" parent=\"Theme.MaterialComponents.Light.NoActionBar\"&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n\n    &lt;item name=\"toolbarBackground\"&gt;@color/lightBackground&lt;/item&gt;\n    &lt;item name=\"toolbarStyle\"&gt;@style/AppTheme.Light.Toolbar&lt;/item&gt;\n    &lt;item name=\"iconColor\"&gt;#000&lt;/item&gt;\n    &lt;item name=\"dividerBackground\"&gt;@android:drawable/divider_horizontal_bright&lt;/item&gt;\n\n    &lt;item name=\"android:datePickerDialogTheme\"&gt;@style/AppTheme.Light.DatePicker&lt;/item&gt;\n\n    &lt;item name=\"android:statusBarColor\"&gt;@color/colorPrimaryDark&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"AppTheme.Light.DatePicker\" parent=\"ThemeOverlay.MaterialComponents.Dialog\"&gt;\n    &lt;item name=\"materialButtonStyle\"&gt;?android:attr/borderlessButtonStyle&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"AppTheme.Light.Toolbar\" parent=\"Widget.MaterialComponents.Toolbar\"&gt;\n    &lt;item name=\"android:background\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"android:elevation\"&gt;8dp&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p></p>\n\n<p>If i don't give themeId as parameter it shows properly on light theme but on dark theme it shows just the light version with white text which is invisible for the user to see because of the white background.</p>\n\n<p>What is the proper way to solve this problem?</p>\n"}, {"tags": ["android", "kotlin", "android-things", "onvif"], "comments": [{"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1542110715, "post_id": 53280568, "comment_id": 93442951, "body": "This is internal error in your server API not client side"}, {"owner": {"reputation": 2328, "user_id": 2618275, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a05e6b9254535687f5e898fa476624ee?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Alexander", "link": "https://stackoverflow.com/users/2618275/paul-alexander"}, "reply_to_user": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1542111439, "post_id": 53280568, "comment_id": 93443314, "body": "Okay, so the error is in the device running my app? Not the IP camera?"}, {"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1542111555, "post_id": 53280568, "comment_id": 93443367, "body": "i think ip camera .did you pass correct  values for ip camera?"}, {"owner": {"reputation": 2328, "user_id": 2618275, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a05e6b9254535687f5e898fa476624ee?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Alexander", "link": "https://stackoverflow.com/users/2618275/paul-alexander"}, "reply_to_user": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1542111704, "post_id": 53280568, "comment_id": 93443441, "body": "Yeah correct IP, username and password. I have tested this by inputting an incorrect password where I received 400 Bad Request and no camera device information"}, {"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1542111894, "post_id": 53280568, "comment_id": 93443539, "body": "then check with other device"}, {"owner": {"reputation": 486, "user_id": 8377287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yT4Zr.png?s=128&g=1", "display_name": "LoukMouk", "link": "https://stackoverflow.com/users/8377287/loukmouk"}, "reply_to_user": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 1, "creation_date": 1542213716, "post_id": 53280568, "comment_id": 93490776, "body": "sometimes, the problem isn&#39;t with the code you wrote, but with the device/camera you&#39;re using... I had a problem with one of my camera... It wasn&#39;t returning a valid response when asked for its status. <a href=\"https://stackoverflow.com/questions/51523249/onvif-error-in-deserializing-body-of-reply-message-for-operation-getstatus\">here</a> I would suggest you to look for any camera software update. If this still doesn&#39;t work, I would suggest to try with another device as @sasikumar said."}, {"owner": {"reputation": 2328, "user_id": 2618275, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a05e6b9254535687f5e898fa476624ee?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Alexander", "link": "https://stackoverflow.com/users/2618275/paul-alexander"}, "edited": false, "score": 0, "creation_date": 1542290364, "post_id": 53280568, "comment_id": 93522242, "body": "Thanks for your advice, I&#39;ll give this a try."}], "answers": [{"comments": [{"owner": {"reputation": 2328, "user_id": 2618275, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a05e6b9254535687f5e898fa476624ee?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Alexander", "link": "https://stackoverflow.com/users/2618275/paul-alexander"}, "edited": false, "score": 0, "creation_date": 1546605379, "post_id": 53340795, "comment_id": 94913242, "body": "Thanks for your reply. I think I will try with another device of another manufacturer and see what the result is."}], "tags": [], "owner": {"reputation": 486, "user_id": 8377287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yT4Zr.png?s=128&g=1", "display_name": "LoukMouk", "link": "https://stackoverflow.com/users/8377287/loukmouk"}, "is_accepted": false, "score": 0, "last_activity_date": 1542381982, "creation_date": 1542381982, "answer_id": 53340795, "question_id": 53280568, "link": "https://stackoverflow.com/questions/53280568/android-onvif-internal-server-error-when-trying-to-retrieve-profiles-from-onvi/53340795#53340795", "title": "Android ONVIF - Internal Server Error when trying to retrieve profiles from ONVIF IP camera", "body": "<p>Sometimes, the problem isn't with the code you wrote, but with the device/camera you're using... I had a problem with one of my camera... It wasn't returning a valid response when asked for its status. <a href=\"https://stackoverflow.com/questions/51523249/onvif-error-in-deserializing-body-of-reply-message-for-operation-getstatus\">here</a> </p>\n\n<p>I would suggest you to look for any camera software update. If this still doesn't work, I would suggest to try with another device as @sasikumar said.</p>\n"}], "owner": {"reputation": 2328, "user_id": 2618275, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a05e6b9254535687f5e898fa476624ee?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Alexander", "link": "https://stackoverflow.com/users/2618275/paul-alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 403, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542381982, "creation_date": 1542110318, "question_id": 53280568, "link": "https://stackoverflow.com/questions/53280568/android-onvif-internal-server-error-when-trying-to-retrieve-profiles-from-onvi", "title": "Android ONVIF - Internal Server Error when trying to retrieve profiles from ONVIF IP camera", "body": "<p>I'm currently building an Android Things application that communicates with an ONVIF IP camera following <a href=\"https://www.youtube.com/watch?v=FlPYcgj6UdU&amp;t=489s\" rel=\"nofollow noreferrer\">this youtube tutorial</a> <br><br> I can talk to the camera and I can get services and device information but when I try to retrieve profiles, it responds with <code>D/RESPONSE: Response{protocol=http/1.1, code=500, message=Internal Server Error</code>\n<br>What would cause this response?<br><br></p>\n\n<p><strong>onCreate</strong></p>\n\n<pre><code>currentDevice = OnvifDevice(\"192.168.1.5\",\"admin\",\"password\")\ncurrentDevice.listener = this\ncurrentDevice.getServices()\nLog.d(\"REQUEST\", \"Get services\");\n</code></pre>\n\n<p><br></p>\n\n<p><strong>requestPerformed</strong></p>\n\n<pre><code>override fun requestPerformed(response: OnvifResponse) {\n        //method called when response is received from camera\n\n        Log.d(\"RESPONSE\", response.parsingUIMessage);\n\n        if (response.request.type == OnvifRequest.Type.GetServices) {\n\n            Log.d(\"REQUEST\", \"Get device information\");\n            currentDevice.getDeviceInformation()\n        }\n        else if (response.request.type == OnvifRequest.Type.GetDeviceInformation) {\n\n            Log.d(\"REQUEST\", \"Get profiles\");\n            currentDevice.getProfiles()\n        }\n        else if (response.request.type == OnvifRequest.Type.GetProfiles) {\n\n            Log.d(\"REQUEST\", \"Get stream URI\");\n            currentDevice.mediaProfiles.firstOrNull()?.let {\n                currentDevice.getStreamURI(it)\n            }\n        }\n        else if (response.request.type == OnvifRequest.Type.GetStreamURI) {\n\n            Log.d(\"REQUEST\", \"Get get video stream\");\n            currentDevice.rtspURI?.let { uri -&gt;\n\n                val surfaceView = findViewById&lt;SurfaceView&gt;(R.id.surfaceView)\n\n                vlcVideoLibrary = VlcVideoLibrary(this, this, surfaceView)\n                vlcVideoLibrary?.play(uri)\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["date", "kotlin", "datepicker"], "comments": [{"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1542110094, "post_id": 53280392, "comment_id": 93442651, "body": "what kind of problem you faced in the code?"}, {"owner": {"reputation": 3020, "user_id": 2813804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/061Zc.jpg?s=128&g=1", "display_name": "Akshay Paliwal", "link": "https://stackoverflow.com/users/2813804/akshay-paliwal"}, "edited": false, "score": 0, "creation_date": 1542110637, "post_id": 53280392, "comment_id": 93442914, "body": "Please describe, what is the issue in your code. Is it working or not, if not then which line failing."}, {"owner": {"reputation": 191, "user_id": 6863582, "user_type": "registered", "profile_image": "https://graph.facebook.com/1279255442106281/picture?type=large", "display_name": "Simona Buga", "link": "https://stackoverflow.com/users/6863582/simona-buga"}, "edited": false, "score": 1, "creation_date": 1542112348, "post_id": 53280392, "comment_id": 93443789, "body": "so far the code works well. The date pickers  are displaying the information but I don&#39;t know how to do the calculation. Thank you so much"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1542114745, "post_id": 53280392, "comment_id": 93445135, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5405610/date-difference-in-days-in-android\">date difference in days, in Android</a> (i know that that question doesn\u2019t use Kotlin code, so you would have to translate)."}], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 5959404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0db5af229b2db8dd96ff89e89dfbe94a?s=128&d=identicon&r=PG", "display_name": "Gihan Sandaru", "link": "https://stackoverflow.com/users/5959404/gihan-sandaru"}, "edited": false, "score": 0, "creation_date": 1601138569, "post_id": 53281469, "comment_id": 113314854, "body": "ChronoUnit.DAYS.between requires API level 26"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 343, "user_id": 5959404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0db5af229b2db8dd96ff89e89dfbe94a?s=128&d=identicon&r=PG", "display_name": "Gihan Sandaru", "link": "https://stackoverflow.com/users/5959404/gihan-sandaru"}, "edited": false, "score": 1, "creation_date": 1601138646, "post_id": 53281469, "comment_id": 113314874, "body": "@GihanSandaru this is already mentioned in the answer."}], "tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 2, "last_activity_date": 1542114891, "last_edit_date": 1542114891, "creation_date": 1542113642, "answer_id": 53281469, "question_id": 53280392, "link": "https://stackoverflow.com/questions/53280392/calculating-dates-in-kotlin/53281469#53281469", "title": "Calculating Dates in Kotlin", "body": "<p>You can use these functions:</p>\n\n<pre><code>fun getLocalDateFromString(d: String, format: String): LocalDate {\n    return LocalDate.parse(d, DateTimeFormatter.ofPattern(format))\n}\n</code></pre>\n\n<p>it returns a <code>LocalDate</code> from a string <code>d</code> formatted with <code>format</code>.</p>\n\n<pre><code>fun getDaysDif(fromDate: LocalDate, toDate: LocalDate): Long {\n    return ChronoUnit.DAYS.between(fromDate, toDate)\n}\n</code></pre>\n\n<p>it returns the difference in days between 2 dates (<code>LocalDate</code>)</p>\n\n<p>So you can do:</p>\n\n<pre><code>val days = getDaysDif(\n        getLocalDateFromString(tvDate1.text, \"MM/dd/yyyy\"),\n        getLocalDateFromString(tvDate2.text, \"MM/dd/yyyy\"))\n</code></pre>\n\n<p>The above code works for API level 26 and above.<br/> <br/></p>\n\n<p>For lower versions, use this:</p>\n\n<pre><code>val format = SimpleDateFormat(\"MM/dd/yyyy\")\nval days = TimeUnit.DAYS.convert(\n    format.parse(tvDate2.text).getTime() - \n    format.parse(tvDate1.text).getTime(), \n    TimeUnit.MILLISECONDS)\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 6863582, "user_type": "registered", "profile_image": "https://graph.facebook.com/1279255442106281/picture?type=large", "display_name": "Simona Buga", "link": "https://stackoverflow.com/users/6863582/simona-buga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1949, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542114891, "creation_date": 1542109673, "last_edit_date": 1542112734, "question_id": 53280392, "link": "https://stackoverflow.com/questions/53280392/calculating-dates-in-kotlin", "title": "Calculating Dates in Kotlin", "body": "<p>The code below works well I am trying to figure how to calculate total number of days once the dates have been selected.  Thank you so much.</p>\n\n<p>The problem I'm trying to solve: \nSelect vacation start date - date selector   - this part works well\nSelect vacation end date  - date selector  - this part works well\n<strong>Total days =Calculate End date - Start date  - I don't know how to conduct the calculations</strong> \nTotal 10 days</p>\n\n<p>Here is my code</p>\n\n<pre><code>class VacationActivity : AppCompatActivity() {\n\n    private var selectedYear = 0\n    private var selectedMonth = 0\n    private var selectedDay = 0\n\n    @RequiresApi(Build.VERSION_CODES.O)\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_vacation)\n\n\n        // get view\n        val tvDate = findViewById&lt;TextView&gt;(R.id.from_date_view)\n        tvDate.setOnClickListener {\n\n            val currentDate = Calendar.getInstance()\n            val year = currentDate.get(Calendar.YEAR)\n            val month = currentDate.get(Calendar.MONTH)\n            val day = currentDate.get(Calendar.DAY_OF_MONTH)\n\n\n            if (tvDate.text.isNotEmpty()) {\n                this.selectedYear\n                this.selectedMonth\n                this.selectedDay\n            }\n\n            var listener = DatePickerDialog.OnDateSetListener { view, selectedYear, selectedMonth, selectedDay -&gt;\n                this.selectedYear = selectedYear\n                this.selectedMonth = selectedMonth\n                this.selectedDay = selectedDay\n\n                tvDate.text = \"${selectedMonth + 1}/$selectedDay/$selectedYear\"\n\n            }\n            val datePicker = DatePickerDialog(this, listener, year, month, day)\n            datePicker.show()\n        }\n\n\n        val tvDate2 = findViewById&lt;TextView&gt;(R.id.to_date_view)\n        tvDate2.setOnClickListener {\n\n            val currentDate = Calendar.getInstance()\n            val year = currentDate.get(Calendar.YEAR)\n            val month = currentDate.get(Calendar.MONTH)\n            val day = currentDate.get(Calendar.DAY_OF_MONTH)\n\n\n            if (tvDate2.text.isNotEmpty()) {\n                this.selectedYear\n                this.selectedMonth\n                this.selectedDay\n            }\n\n            var listener = DatePickerDialog.OnDateSetListener { view, selectedYear, selectedMonth, selectedDay -&gt;\n                this.selectedYear = selectedYear\n                this.selectedMonth = selectedMonth\n                this.selectedDay = selectedDay\n\n                tvDate2.text = \"${selectedMonth + 1}/$selectedDay/$selectedYear\"\n            }\n\n            val datePicker = DatePickerDialog(this, listener, year, month, day)\n            datePicker.show()\n\n\n        }\n\n\n            }\n        }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-preferences"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1542109651, "post_id": 53280352, "comment_id": 93442430, "body": "Have you tried <code>.value</code>?"}, {"owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 1, "creation_date": 1542109766, "post_id": 53280352, "comment_id": 93442492, "body": "I don&#39;t see getValue() here... <a href=\"https://developer.android.com/reference/android/preference/Preference\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/preference/Preferenc&zwnj;&#8203;e</a>"}, {"owner": {"reputation": 7021, "user_id": 4620609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dR89W.jpg?s=128&g=1", "display_name": "Samuel Robert", "link": "https://stackoverflow.com/users/4620609/samuel-robert"}, "edited": false, "score": 0, "creation_date": 1542109791, "post_id": 53280352, "comment_id": 93442504, "body": "shouldn&#39;t you be calling like <code>pref.getDataType()</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 45763, "user_id": 6891563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HJ9QX.jpg?s=128&g=1", "display_name": "Khemraj", "link": "https://stackoverflow.com/users/6891563/khemraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1542109982, "creation_date": 1542109982, "answer_id": 53280477, "question_id": 53280352, "link": "https://stackoverflow.com/questions/53280352/unresolved-reference-getvalue-in-kotlin-android-studio-3/53280477#53280477", "title": "Unresolved reference getValue() in kotlin (Android Studio 3)", "body": "<p><code>getValue()</code> is method of <a href=\"https://developer.android.com/reference/android/preference/ListPreference\" rel=\"nofollow noreferrer\">ListPreference</a> not <a href=\"https://developer.android.com/reference/android/preference/Preference\" rel=\"nofollow noreferrer\">Preference</a>, so you need to cast it.</p>\n\n<pre><code>val pref = findPreference(\"selected_maptype\") as ListPreference\nval current_value = pref.value\n</code></pre>\n\n<p>You will use <code>pref.value</code> instead of <code>pref.getValue()</code> in Kotlin. Kotlin changes getters setters in direct name.</p>\n"}, {"tags": [], "owner": {"reputation": 570, "user_id": 12331220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5S9Wo.gif?s=128&g=1", "display_name": "Anupam Haldkar", "link": "https://stackoverflow.com/users/12331220/anupam-haldkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1588876448, "creation_date": 1588876448, "answer_id": 61665196, "question_id": 53280352, "link": "https://stackoverflow.com/questions/53280352/unresolved-reference-getvalue-in-kotlin-android-studio-3/61665196#61665196", "title": "Unresolved reference getValue() in kotlin (Android Studio 3)", "body": "<p>In Kotlin <strong>getter</strong> and <strong>setter</strong> are generally set by default so we cannot call them using <strong>getter</strong> and <strong>setter</strong> function.</p>\n\n<p>An Easy way to access them is to use direct variable name with <strong>(.)dot</strong> operator.</p>\n\n<p>You can refer this <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"nofollow noreferrer\">Kotlin Properties</a></p>\n"}], "owner": {"reputation": 49, "user_id": 2679193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5df2952d90291870c6fb700aae32487?s=128&d=identicon&r=PG&f=1", "display_name": "HWK", "link": "https://stackoverflow.com/users/2679193/hwk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 421, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1588876448, "creation_date": 1542109531, "question_id": 53280352, "link": "https://stackoverflow.com/questions/53280352/unresolved-reference-getvalue-in-kotlin-android-studio-3", "title": "Unresolved reference getValue() in kotlin (Android Studio 3)", "body": "<p>I have the following piece of code for a setting page using Preferences. I can find the correct ListPreference, I can set the summary string, but I cannot get the value from the preference object. At least Android Studio cannot find the reference to the getValue() method.</p>\n\n<pre><code>import android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.support.v7.preference.ListPreference\nimport android.support.v7.preference.Preference\nimport android.support.v7.preference.PreferenceFragmentCompat\n\n\nclass SettingsActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_settings)\n\n        setSupportActionBar(findViewById(R.id.settings_toolbar))\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\n\n        supportFragmentManager\n            .beginTransaction()\n            .replace(R.id.content_settings, MySettingsFragment())\n            .commit()\n\n    }\n\n    class MySettingsFragment : PreferenceFragmentCompat() {\n        override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {\n            setPreferencesFromResource(R.xml.pref_settings, rootKey)\n            val pref = findPreference(\"selected_maptype\")\n            pref.summary = \"This is a summary\"\n            val current_value = pref.getValue()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1720, "user_id": 8490194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/003116725d07e12e51de7c159bd2f218?s=128&d=identicon&r=PG&f=1", "display_name": "ConstOrVar", "link": "https://stackoverflow.com/users/8490194/constorvar"}, "is_accepted": true, "score": 1, "last_activity_date": 1542111997, "creation_date": 1542111997, "answer_id": 53280992, "question_id": 53280224, "link": "https://stackoverflow.com/questions/53280224/can-you-explicitly-call-the-super-class-when-using-interface-delegation-in-kotli/53280992#53280992", "title": "Can you explicitly call the super class when using interface delegation in Kotlin?", "body": "<p>You can't access <code>delegate</code> in that case. As workaround you can use next approach</p>\n\n<pre><code>class Rect(\n    val width: Int,\n    val height: Int,\n    val pos: Position,\n    private val positinable: Positionable = DefaultPositionable(pos)\n) : Positionable by positinable {\n    override fun getPosition(): Position {\n        val parent = positinable.getPosition()\n        return parent.copy(x = parent.x + 1)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2444, "user_id": 1671319, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c5e6e6d2fa9873b6e8869a583b062af3?s=128&d=identicon&r=PG", "display_name": "reikje", "link": "https://stackoverflow.com/users/1671319/reikje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 53280992, "answer_count": 1, "score": 1, "last_activity_date": 1542111997, "creation_date": 1542109094, "question_id": 53280224, "link": "https://stackoverflow.com/questions/53280224/can-you-explicitly-call-the-super-class-when-using-interface-delegation-in-kotli", "title": "Can you explicitly call the super class when using interface delegation in Kotlin?", "body": "<p>I using interface delegation as described <a href=\"http://the-cogitator.com/2018/09/29/by-the-way-exploring-delegation-in-kotlin.html\" rel=\"nofollow noreferrer\">here</a>. Is there a way to use this but override and explicitly call the super class (delegate)?</p>\n\n<p>Something along these lines (does not compile):</p>\n\n<pre><code>class Rect(val width: Int, val height: Int, position: Position) : Positionable by DefaultPositionable(position) {\n\n    override fun getPosition() {\n        val parent = super.getPosition()\n        return parent.copy(x = parent.x + 1)    \n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1742, "user_id": 2642024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ifi9n.jpg?s=128&g=1", "display_name": "finki", "link": "https://stackoverflow.com/users/2642024/finki"}, "edited": false, "score": 0, "creation_date": 1542107198, "post_id": 53279621, "comment_id": 93440994, "body": "This code has actually nothing to do with RecyclerView, can you please adapt your title?"}], "answers": [{"tags": [], "owner": {"reputation": 3161, "user_id": 10510491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4QsPKELpII/AAAAAAAAAAI/AAAAAAAAV14/3oA6QmFw68U/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10510491/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1542107576, "creation_date": 1542107576, "answer_id": 53279761, "question_id": 53279621, "link": "https://stackoverflow.com/questions/53279621/items-added-to-recyclelist-only-in-debugging-mode-or-when-the-screen-is-locked/53279761#53279761", "title": "Items added to RecycleList only in Debugging mode or when the screen is locked", "body": "<p>Apparently, you're making an asynchronous call on search, the <code>values</code> was returned immediately from the block with empty size.</p>\n\n<p>When in debugging mode, it probably somehow conveniently gave it just enough time for the data to return. And the same happened when you came back from lock screen, your views were triggered to redraw.</p>\n"}], "owner": {"reputation": 365, "user_id": 6704060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10209096141857224/picture?type=large", "display_name": "Anton Platonov", "link": "https://stackoverflow.com/users/6704060/anton-platonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542107576, "creation_date": 1542107083, "question_id": 53279621, "link": "https://stackoverflow.com/questions/53279621/items-added-to-recyclelist-only-in-debugging-mode-or-when-the-screen-is-locked", "title": "Items added to RecycleList only in Debugging mode or when the screen is locked", "body": "<p>I am doing the searching and sorting when request data from the API but the results do not \"come through\" until I lock the screen or do put a breakpoint. What might be the reason for this bug and is it a bug at all. Here's my request code:</p>\n\n<pre><code>fun SearchInServer(SearchString: String): MutableList&lt;SearchResult&gt;{\n    val url = \"https://mysite/api/search/\"+SearchString\n    val request = Request.Builder().url(url).build()\n    val values = mutableListOf&lt;SearchResult&gt;()\n\n    val client = OkHttpClient()\n    // val point\n    client.newCall(request).enqueue(object: Callback {\n        override fun onFailure(call: Call, e: IOException) {\n            println(\"False\")\n        }\n\n        override fun onResponse(call: Call, response: Response){\n            val body = response.body()?.string()\n            val results: List&lt;SearchResult&gt; = Gson().fromJson(body, object: TypeToken&lt;List&lt;SearchResult&gt;&gt;(){}.type)\n            results.forEach() {\n                Log.v(\"res:\", it.result)\n                values.add(SearchResult(it.result, it.type, it.id))\n\n            }\n        }\n    })\n    Log.v(\"sizee\", values.size.toString())\n    return values\n}\n</code></pre>\n"}, {"tags": ["kotlin", "coroutine", "java.util.concurrent", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 1453, "user_id": 5193455, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/aa9a0d7bf5720a4d03e5266477f3ba55?s=128&d=identicon&r=PG&f=1", "display_name": "ProtossShuttle", "link": "https://stackoverflow.com/users/5193455/protossshuttle"}, "edited": false, "score": 0, "creation_date": 1542193435, "post_id": 53279750, "comment_id": 93478106, "body": "Thanks! Setting <code>kotlinx.coroutines.scheduler</code> to <code>off</code> fixed this problem."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 2, "last_activity_date": 1542107542, "creation_date": 1542107542, "answer_id": 53279750, "question_id": 53279409, "link": "https://stackoverflow.com/questions/53279409/kotlin-coroutines-cause-heavy-cpu-usage-with-defaultdispatcher-after-migration/53279750#53279750", "title": "Kotlin - Coroutines cause heavy CPU usage with DefaultDispatcher after migration to Kotlin 1.3", "body": "<blockquote>\n  <ol>\n  <li>Why does it cost so much CPU usage with <code>DefaultDispatcher</code>?</li>\n  </ol>\n</blockquote>\n\n<p>It's a completely different implementation that optimizes for several performance targets, for example communication via a channel. It is subject to future improvements.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Why does kotlin 1.3 use <code>DefaultDispatcher</code> in place of <code>ForkJoinPool.commonPool()</code> by default?</li>\n  </ol>\n</blockquote>\n\n<p>Actually it has been using the <code>Default</code> dispatcher all the time, but the resolution of <code>Default</code> changed. In the experimental phase, it was equal to the <code>CommonPool</code> but now it prefers the custom implementation.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>How to keep the behavior of coroutines just like before 1.3?</li>\n  </ol>\n</blockquote>\n\n<p>Set the <code>kotlinx.coroutines.scheduler</code> system property to <code>off</code>.</p>\n"}], "owner": {"reputation": 1453, "user_id": 5193455, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/aa9a0d7bf5720a4d03e5266477f3ba55?s=128&d=identicon&r=PG&f=1", "display_name": "ProtossShuttle", "link": "https://stackoverflow.com/users/5193455/protossshuttle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 53279750, "answer_count": 1, "score": 4, "last_activity_date": 1552980540, "creation_date": 1542106377, "last_edit_date": 1552980540, "question_id": 53279409, "link": "https://stackoverflow.com/questions/53279409/kotlin-coroutines-cause-heavy-cpu-usage-with-defaultdispatcher-after-migration", "title": "Kotlin - Coroutines cause heavy CPU usage with DefaultDispatcher after migration to Kotlin 1.3", "body": "<p>I have been using the experimental versions of Kotlin coroutines under high concurrency for a long time, and the performance has always been excellent. The main logic could be simplified to the code below:</p>\n\n<pre><code>// works fine in kotlin 1.2 with 3000+ QPS for a 40-core host\nlaunch {\n  // running in ForkJoinPool.commonPool() by default\n  // non-blocking IO function\n  val result = supendFunction()\n  doSomething(result)\n}\n</code></pre>\n\n<p>However, after I updated kotlin to 1.3, and migrated to the formal version of coroutines, like this</p>\n\n<pre><code>// kotlin 1.3 version\nGlobalScope.launch {\n  // running in DefaultDispatcher\n  // non-blocking IO function\n  val result = supendFunction()\n  doSomething(result)\n}\n</code></pre>\n\n<p>The CPU usage rises from 2% to 50% without any exception or error thrown. The only difference that I notice is that the coroutines are no longer executed in <code>ForkJoinPool.commonPool()</code> like before. Instead, they are running in <code>DefaultDispatcher</code> threads, like <code>DefaultDispatcher-worker-30</code>.</p>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Why does it cost so much CPU usage with <code>DefaultDispatcher</code>?</li>\n<li>Why does kotlin 1.3 use <code>DefaultDispatcher</code> in place of <code>ForkJoinPool.commonPool()</code> by default?</li>\n<li>How to keep the behavior of coroutines just like before 1.3?</li>\n</ol>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "comments": [{"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1542103016, "post_id": 53278290, "comment_id": 93438586, "body": "<code>app:visibleGone</code> . Post the <code>@BindingAdapter</code> annotated method"}, {"owner": {"reputation": 3161, "user_id": 10510491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4QsPKELpII/AAAAAAAAAAI/AAAAAAAAV14/3oA6QmFw68U/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10510491/aaron"}, "edited": false, "score": 0, "creation_date": 1542103106, "post_id": 53278290, "comment_id": 93438645, "body": "I&#39;m curious if it&#39;s because of your variable type, what&#39;d happen if you change <code>boolean</code> to <code>Boolean</code>? Or even <code>java.lang.Boolean</code>?"}, {"owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "reply_to_user": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1542103187, "post_id": 53278290, "comment_id": 93438709, "body": "@Blackbelt <a href=\"https://bitbucket.org/ali-rezaei/tmdb/src/dataBinding/app/src/main/java/com/sample/android/tmdb/ui/MainFragment.kt\" rel=\"nofollow noreferrer\">bitbucket.org/ali-rezaei/tmdb/src/dataBinding/app/src/main/j&zwnj;&#8203;ava/&hellip;</a>, thanks"}, {"owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "reply_to_user": {"reputation": 3161, "user_id": 10510491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4QsPKELpII/AAAAAAAAAAI/AAAAAAAAV14/3oA6QmFw68U/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10510491/aaron"}, "edited": false, "score": 0, "creation_date": 1542103356, "post_id": 53278290, "comment_id": 93438812, "body": "@Aaron, I got the same error message."}], "answers": [{"comments": [{"owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "edited": false, "score": 0, "creation_date": 1542104555, "post_id": 53278553, "comment_id": 93439510, "body": "Thanks, BR.<code>vm</code> is not recognized. I tried both <code>import com.android.databinding.library.baseAdapters.BR</code> and <code>import com.sample.android.tmdb.BR</code>"}, {"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "reply_to_user": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "edited": false, "score": 0, "creation_date": 1542104639, "post_id": 53278553, "comment_id": 93439559, "body": "did you build ? Push on a different branch and past here the link"}, {"owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "edited": false, "score": 0, "creation_date": 1542105831, "post_id": 53278553, "comment_id": 93440255, "body": "Yes, it was related to build. Now I just get <code>network_state_item</code> layout and not RecyclerView"}, {"owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "edited": false, "score": 0, "creation_date": 1542106068, "post_id": 53278553, "comment_id": 93440388, "body": "<a href=\"https://bitbucket.org/ali-rezaei/tmdb/src/new-dataBinding/app/src/main/res/layout/network_state_item.xml\" rel=\"nofollow noreferrer\">bitbucket.org/ali-rezaei/tmdb/src/new-dataBinding/app/src/ma&zwnj;&#8203;in/&hellip;</a>"}, {"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "reply_to_user": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "edited": false, "score": 0, "creation_date": 1542106175, "post_id": 53278553, "comment_id": 93440447, "body": "try adding <code>android:layout_width</code> <code>android:layout_height</code> and <code>android:id</code> to the include"}, {"owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "reply_to_user": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1542107382, "post_id": 53278553, "comment_id": 93441077, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/183553/discussion-between-ali-and-blackbelt\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "is_accepted": true, "score": 3, "last_activity_date": 1542103743, "creation_date": 1542103743, "answer_id": 53278553, "question_id": 53278290, "link": "https://stackoverflow.com/questions/53278290/databinding-causing-a-kotlin-compiler-error/53278553#53278553", "title": "DataBinding causing a Kotlin compiler error", "body": "<p>The changes I would do are: Here</p>\n\n<pre><code>&lt;variable\n        name=\"isLoaded\"\n        type=\"boolean\" /&gt;\n</code></pre>\n\n<p>Instead of passing <code>boolean</code> I would pass an instance of your VM</p>\n\n<pre><code>   &lt;variable\n        name=\"vm\"\n        type=\"com.sample.android.tmdb.ui.MovieViewModel\" /&gt;\n</code></pre>\n\n<p>in your fragment, you do</p>\n\n<pre><code>    mBinding = DataBindingUtil.inflate(inflater, R.layout.fragment_main, container, false)\n    mBinding?.setVariable(BR.vm, mViewModel)\n    mBinding?.setLifecycleOwner(this)\n</code></pre>\n\n<p>this way, your VM is connected to the lifecycle of your fragment. </p>\n\n<p>Declare a method </p>\n\n<pre><code>  @BindingAdapter(\"visibleGone\")\n  fun View.visibleGone(visible: Boolean) {\n      setVisibility(if (visible) View.VISIBLE else View.GONE)\n  }\n</code></pre>\n\n<p>declare a <code>LiveData&lt;Boolean&gt;</code> variable in you <code>MovieViewModel</code> and connect it in your layout. Eg. </p>\n\n<pre><code> val loading: LiveData&lt;Boolean&gt;\n</code></pre>\n\n<p>then in your layout you could have</p>\n\n<pre><code>       &lt;android.support.v7.widget.RecyclerView\n            android:id=\"@+id/list\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:visibleGone=\"@{!safeUnbox(vm.loading)}\" /&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 140, "user_id": 8344055, "user_type": "registered", "profile_image": "https://graph.facebook.com/1500126920010375/picture?type=large", "display_name": "Beast77", "link": "https://stackoverflow.com/users/8344055/beast77"}, "is_accepted": false, "score": 0, "last_activity_date": 1560175439, "creation_date": 1560175439, "answer_id": 56527980, "question_id": 53278290, "link": "https://stackoverflow.com/questions/53278290/databinding-causing-a-kotlin-compiler-error/56527980#56527980", "title": "DataBinding causing a Kotlin compiler error", "body": "<p>I had a slightly different problem that generated this error.\nIn my ViewModel, I had the following method:</p>\n\n<pre><code>`fun onSkip() {\n    _score.value = (_score.value)?.minus(1)\n    nextWord()\n}`\n</code></pre>\n\n<p>Now, when i was setting the onClick attributes in my xml, I set them like this:</p>\n\n<pre><code>android:onClick=\"@{() -&gt; gameViewModel.onSkip}\" \n\n                 instead of\n</code></pre>\n\n<p><code>android:onClick=\"@{() -&gt; gameViewModel.onSkip()}\"</code></p>\n\n<p>Notice how I forgot to use the parenthesis in the first method.</p>\n"}], "owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1026, "favorite_count": 0, "accepted_answer_id": 53278553, "answer_count": 2, "score": 1, "last_activity_date": 1560175439, "creation_date": 1542102912, "last_edit_date": 1542382663, "question_id": 53278290, "link": "https://stackoverflow.com/questions/53278290/databinding-causing-a-kotlin-compiler-error", "title": "DataBinding causing a Kotlin compiler error", "body": "<p>I have following branch in Bitbucket : <a href=\"https://bitbucket.org/ali-rezaei/tmdb/src/dataBinding/\" rel=\"nofollow noreferrer\">https://bitbucket.org/ali-rezaei/tmdb/src/dataBinding/</a></p>\n\n<p>I get following <code>Kotlin compiler</code> error when I build the project :</p>\n\n<pre><code>e: [kapt] An exception occurred: android.databinding.tool.util.LoggedErrorException: Found data binding errors.\n</code></pre>\n\n<p>Error is related to :</p>\n\n<pre><code>app:visibleGone=\"@{isLoaded}\"\n</code></pre>\n\n<p>in the following layout :</p>\n\n<pre><code>&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n\n    &lt;data&gt;\n        &lt;variable\n            name=\"isLoaded\"\n            type=\"boolean\" /&gt;\n    &lt;/data&gt;\n\n    &lt;FrameLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".ui.MainActivity\"&gt;\n\n        &lt;android.support.v4.widget.SwipeRefreshLayout\n            android:id=\"@+id/swipe_refresh\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"&gt;\n\n            &lt;android.support.v7.widget.RecyclerView\n                android:id=\"@+id/list\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                app:visibleGone=\"@{isLoaded}\" /&gt;\n\n        &lt;/android.support.v4.widget.SwipeRefreshLayout&gt;\n\n        &lt;include\n            layout=\"@layout/network_state_item\"\n            app:visibleGone=\"@{!isLoaded}\" /&gt;\n\n    &lt;/FrameLayout&gt;\n\n&lt;/layout&gt;\n</code></pre>\n\n<p>I appreciate if you can help me out.</p>\n"}, {"tags": ["kotlin", "http4k"], "answers": [{"comments": [{"owner": {"reputation": 2444, "user_id": 1671319, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c5e6e6d2fa9873b6e8869a583b062af3?s=128&d=identicon&r=PG", "display_name": "reikje", "link": "https://stackoverflow.com/users/1671319/reikje"}, "edited": false, "score": 0, "creation_date": 1542171377, "post_id": 53286272, "comment_id": 93467955, "body": "Your example doesnt have a fixed String at the end of the path."}, {"owner": {"reputation": 189, "user_id": 10143127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afd59853dcbdf822492c6c3f7adf599?s=128&d=identicon&r=PG&f=1", "display_name": "David D", "link": "https://stackoverflow.com/users/10143127/david-d"}, "reply_to_user": {"reputation": 2444, "user_id": 1671319, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c5e6e6d2fa9873b6e8869a583b062af3?s=128&d=identicon&r=PG", "display_name": "reikje", "link": "https://stackoverflow.com/users/1671319/reikje"}, "edited": false, "score": 0, "creation_date": 1542181832, "post_id": 53286272, "comment_id": 93471496, "body": "Well spotted, however the question is titled &quot;How do you model a path parameter in the middle with http4k&quot;. I&#39;ll edit the above to add that. :)"}, {"owner": {"reputation": 2444, "user_id": 1671319, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c5e6e6d2fa9873b6e8869a583b062af3?s=128&d=identicon&r=PG", "display_name": "reikje", "link": "https://stackoverflow.com/users/1671319/reikje"}, "edited": false, "score": 0, "creation_date": 1542205218, "post_id": 53286272, "comment_id": 93485291, "body": "Thanks, David. In my non working example, I had <code>Path.string().of(&quot;id&quot;)</code> instead of <code>Path.of(&quot;first&quot;)</code>. I also used <code>meta</code> straight after the path instead of having <code>bindContract</code> directly. Either one of them makes it not compile then I guess. How would you specify the <code>meta</code> in your second example?"}, {"owner": {"reputation": 189, "user_id": 10143127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afd59853dcbdf822492c6c3f7adf599?s=128&d=identicon&r=PG&f=1", "display_name": "David D", "link": "https://stackoverflow.com/users/10143127/david-d"}, "reply_to_user": {"reputation": 2444, "user_id": 1671319, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c5e6e6d2fa9873b6e8869a583b062af3?s=128&d=identicon&r=PG", "display_name": "reikje", "link": "https://stackoverflow.com/users/1671319/reikje"}, "edited": false, "score": 0, "creation_date": 1542319818, "post_id": 53286272, "comment_id": 93537637, "body": "see above  ^^ :)"}, {"owner": {"reputation": 2444, "user_id": 1671319, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c5e6e6d2fa9873b6e8869a583b062af3?s=128&d=identicon&r=PG", "display_name": "reikje", "link": "https://stackoverflow.com/users/1671319/reikje"}, "edited": false, "score": 0, "creation_date": 1542372628, "post_id": 53286272, "comment_id": 93555250, "body": "Okay I fully understand the issue now, thanks! So basically there is no way to exclude the &quot;dead&#39; parts in the path? These always have to be added as arguments to the function or, in your example, ignored using <code>_</code>?"}, {"owner": {"reputation": 189, "user_id": 10143127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afd59853dcbdf822492c6c3f7adf599?s=128&d=identicon&r=PG&f=1", "display_name": "David D", "link": "https://stackoverflow.com/users/10143127/david-d"}, "reply_to_user": {"reputation": 2444, "user_id": 1671319, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c5e6e6d2fa9873b6e8869a583b062af3?s=128&d=identicon&r=PG", "display_name": "reikje", "link": "https://stackoverflow.com/users/1671319/reikje"}, "edited": false, "score": 1, "creation_date": 1542463001, "post_id": 53286272, "comment_id": 93581519, "body": "That&#39;s right - the problem is that the parsing of the &quot;part&quot; (ie. making sure it&#39;s exactly the matching string) is independent of the declaration - so as far as the routing is concerned there are still the same number of parts."}], "tags": [], "owner": {"reputation": 189, "user_id": 10143127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afd59853dcbdf822492c6c3f7adf599?s=128&d=identicon&r=PG&f=1", "display_name": "David D", "link": "https://stackoverflow.com/users/10143127/david-d"}, "is_accepted": true, "score": 3, "last_activity_date": 1603221814, "last_edit_date": 1603221814, "creation_date": 1542129070, "answer_id": 53286272, "question_id": 53278208, "link": "https://stackoverflow.com/questions/53278208/how-do-you-model-a-path-parameter-in-the-middle-with-http4k/53286272#53286272", "title": "How do you model a path parameter in the middle with http4k", "body": "<p>If this doesn't compile, it probably means that the function on the end of that statement doesn't have enough parameters. You need something like this - notice the &quot;dead&quot; parameter in the middle of the lambda where the string &quot;foo&quot; would be injected:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>&quot;/prefix&quot; / Path.of(&quot;first&quot;) / &quot;foo&quot; / Path.of(&quot;second&quot;) \n    bindContract GET to { first, _, second -&gt; { \n        Response(OK).body(&quot;$first $second&quot;) }\n    }\n</code></pre>\n<p>Trailing parameters work in exactly the same way, so by extrapolation you'd need this:</p>\n<pre><code>val route = &quot;/prefix&quot; / Path.of(&quot;first&quot;) / &quot;foo&quot; meta { description = &quot;I am great&quot;} bindContract GET to { first, _ -&gt; { Response(OK).body(first) } }\n</code></pre>\n<p>For adding the meta tags, you can easily get tripped up by the infix whitespace, so try playing with the line breaks if it doesn't compile.</p>\n"}], "owner": {"reputation": 2444, "user_id": 1671319, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c5e6e6d2fa9873b6e8869a583b062af3?s=128&d=identicon&r=PG", "display_name": "reikje", "link": "https://stackoverflow.com/users/1671319/reikje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 53286272, "answer_count": 1, "score": 1, "last_activity_date": 1603221814, "creation_date": 1542102686, "question_id": 53278208, "link": "https://stackoverflow.com/questions/53278208/how-do-you-model-a-path-parameter-in-the-middle-with-http4k", "title": "How do you model a path parameter in the middle with http4k", "body": "<p>I am using http4k-contracts and I am trying to model a route with a path parameter in the middle of the path, i.e.</p>\n\n<p>This is the path: <code>/player/{id}/match</code></p>\n\n<p>This is my code (does not compile): <code>\"/player/\" / Path.string().of(\"id\") / \"match\" meta { ..</code></p>\n\n<p>Whats the right way to do it?</p>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1542360511, "post_id": 53330371, "comment_id": 93548866, "body": "I can&#39;t change my the <code>updateValue</code> function, but your answer does contain a key point: I messed up when i wrote <code>override val coroutineContext get() = Job()</code>, this will create another <code>Job</code> every time i access it."}], "tags": [], "owner": {"reputation": 1, "user_id": 10660590, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/dbc23ab81a1b2de227d652507f1bf1ac?s=128&d=identicon&r=PG", "display_name": "painsparrow", "link": "https://stackoverflow.com/users/10660590/painsparrow"}, "is_accepted": false, "score": 0, "last_activity_date": 1542337648, "last_edit_date": 1542337648, "creation_date": 1542333245, "answer_id": 53330371, "question_id": 53277906, "link": "https://stackoverflow.com/questions/53277906/how-to-use-runblocking-to-await-the-completion-of-a-coroutinescope/53330371#53330371", "title": "How to use runBlocking to await the completion of a CoroutineScope", "body": "<p>modify your coroutine builder launch to </p>\n\n<pre><code>this.launch(start = CoroutineStart.LAZY) \n</code></pre>\n\n<p>and change your job object initialisation to direct</p>\n\n<pre><code>override val coroutineContext : Job =   Job()  \n</code></pre>\n\n<p>and it should produce the desired result</p>\n\n<p>here's the example i tried, it's producing the desired result</p>\n\n<pre><code>import kotlinx.coroutines.*\nimport kotlin.coroutines.CoroutineContext\n\nclass Main : CoroutineScope {\n\nval scope: CoroutineScope = this\n\noverride val coroutineContext = Job()\n    //Dispatchers.Default +\n\nvar value = 0\n\n fun updateValue(csc : CoroutineScope) {\n    csc.launch(context = coroutineContext, start = CoroutineStart.LAZY) { println(this.coroutineContext[Job]!!.toString() + \" job 2\") }\n    csc.launch (context = coroutineContext, start = CoroutineStart.LAZY){ println(this.coroutineContext[Job]!!.toString() + \" job 3\") }\n    csc.launch (start = CoroutineStart.LAZY){\n        println(this.coroutineContext[Job]!!.toString() + \" job 1\")\n        //delay(1000)\n        value = 1\n    }\n\n }\n\nfun something() {\n    launch (start = CoroutineStart.LAZY){\n        println(this.coroutineContext[Job]!!.toString() + \" something 1\")\n    }\n\n    launch (start = CoroutineStart.LAZY){\n        println(this.coroutineContext[Job]!!.toString() + \" something 2\")\n    }\n\n    launch(start = CoroutineStart.LAZY) {\n        println(this.coroutineContext[Job]!!.toString() + \" something 3\")\n        delay(2000)\n        value = 1\n    }\n}\n\n}\n\nfun main() {\n    val main = Main()\n    val mainJob = main.coroutineContext[Job]!!\n    main.updateValue(main.scope)\n    //main.something()\n    runBlocking {\n        //println(mainJob.children.count())\n        println(mainJob.children.count())\n        mainJob.children.forEach {\n            //println(\"in run blocking\")\n            println(it.toString())\n            it.join()\n        }\n    }\n    println(main.value)\n}\n\n\n`\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1544177271, "post_id": 53335262, "comment_id": 94192135, "body": "Hi! Should we remove <code>get()</code> in usual cases? Or we should remove for loops?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 1, "creation_date": 1544179108, "post_id": 53335262, "comment_id": 94193107, "body": "<code>coroutineContext</code> should always return the same <code>Job()</code>. You can achieve that with and without a custom getter. Recently I began using this on Android: <code>override val coroutineContext = Dispatchers.Main + SupervisorJob()</code>"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1544179200, "post_id": 53335262, "comment_id": 94193156, "body": "Thanks! I suppose, this should be fixed in documentation."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 1, "creation_date": 1544180722, "post_id": 53335262, "comment_id": 94193966, "body": "In the documentation it always returns the same job as well because it has a separate <code>var _job</code> property."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1545990583, "post_id": 53335262, "comment_id": 94750912, "body": "Thanks, but I faced a problem in <code>ViewPager</code>, see <a href=\"https://stackoverflow.com/a/53117790/2914140\">stackoverflow.com/a/53117790/2914140</a>. When I swiped forward-backward fragments, the <code>job</code> hasn&#39;t recreated, so I had to use <code>get() =</code>."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 1, "last_activity_date": 1542361838, "creation_date": 1542361838, "answer_id": 53335262, "question_id": 53277906, "link": "https://stackoverflow.com/questions/53277906/how-to-use-runblocking-to-await-the-completion-of-a-coroutinescope/53335262#53335262", "title": "How to use runBlocking to await the completion of a CoroutineScope", "body": "<p>The error in my code was simple:</p>\n\n<pre><code>override val coroutineContext get() = Job()\n</code></pre>\n\n<p>I accidentally left a custom getter, which means each access to <code>coroutineContext</code> created a new job. Naturally, the job I got in the test code had no children. Removing <code>get()</code> makes the code work:</p>\n\n<pre><code>override val coroutineContext = Job()\n</code></pre>\n"}], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 53335262, "answer_count": 2, "score": 1, "last_activity_date": 1552980499, "creation_date": 1542101758, "last_edit_date": 1552980499, "question_id": 53277906, "link": "https://stackoverflow.com/questions/53277906/how-to-use-runblocking-to-await-the-completion-of-a-coroutinescope", "title": "How to use runBlocking to await the completion of a CoroutineScope", "body": "<p>I'm trying to test a class that declares itself as a <code>CoroutineScope</code>. The class has some methods that <code>launch</code> jobs within its scope and I must assert the effects of those jobs from a test method.</p>\n\n<p>Here's what I tried:</p>\n\n<pre><code>import kotlinx.coroutines.*\n\nclass Main : CoroutineScope {\n    override val coroutineContext get() = Job()\n\n    var value = 0\n\n    fun updateValue() {\n        this.launch {\n            delay(1000)\n            value = 1\n        }\n    }\n}\n\nfun main() {\n    val main = Main()\n    val mainJob = main.coroutineContext[Job]!!\n    main.updateValue()\n    runBlocking {\n        mainJob.children.forEach { it.join() }\n    }\n    require(main.value == 1)\n}\n</code></pre>\n\n<p>My expectation was that <code>updateValue()</code> will create a child of the root job in <code>coroutineContext</code>. but it turns out that <code>mainJob.children</code> is empty, so I can't await on the completion of <code>launch</code> and the <code>require</code> statement fails.</p>\n\n<p>What is the proper way to make this work?</p>\n"}, {"tags": ["android", "kotlin", "android-edittext"], "comments": [{"owner": {"reputation": 13821, "user_id": 5137352, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/852863871429825/picture?type=large", "display_name": "Nabin Bhandari", "link": "https://stackoverflow.com/users/5137352/nabin-bhandari"}, "edited": false, "score": 3, "creation_date": 1542101235, "post_id": 53277708, "comment_id": 93437471, "body": "Check the tutorial of <code>AutoCompleteTextView</code>: <a href=\"https://www.tutorialspoint.com/android/android_autocompletetextview_control.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/android/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 100, "user_id": 5607081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98555713f9982fc6a7d1f7ca2d62085a?s=128&d=identicon&r=PG&f=1", "display_name": "user5607081", "link": "https://stackoverflow.com/users/5607081/user5607081"}, "is_accepted": false, "score": 0, "last_activity_date": 1542101791, "creation_date": 1542101791, "answer_id": 53277913, "question_id": 53277708, "link": "https://stackoverflow.com/questions/53277708/how-to-create-edittext-with-menu-underneath/53277913#53277913", "title": "How to create EditText with menu underneath?", "body": "<p>try this,\nxml</p>\n\n<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:gravity=\"center\"\nandroid:orientation=\"vertical\"&gt;\n\n&lt;TextView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"State:\" /&gt;\n\n&lt;AutoCompleteTextView\n    android:id=\"@+id/autoCompleteTextView\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>java</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\nAutoCompleteTextView autoCompleteTextView;\nString[] arr={\"used\",\"new\",\"repaired\"};\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main2);\n    autoCompleteTextView=findViewById(R.id.autoCompleteTextView);\n    ArrayAdapter aa=new ArrayAdapter(this,android.R.layout.simple_list_item_1,arr);\n    autoCompleteTextView.setAdapter(aa);\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": [], "owner": {"reputation": 1223, "user_id": 6796066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3oHGC.jpg?s=128&g=1", "display_name": "Sultan Mahmud", "link": "https://stackoverflow.com/users/6796066/sultan-mahmud"}, "is_accepted": true, "score": 0, "last_activity_date": 1542101946, "creation_date": 1542101946, "answer_id": 53277973, "question_id": 53277708, "link": "https://stackoverflow.com/questions/53277708/how-to-create-edittext-with-menu-underneath/53277973#53277973", "title": "How to create EditText with menu underneath?", "body": "<p>AutoCompleteTextView is a component used to show suggestions while writing in an editable text field. The suggestions list is shown in a drop-down menu from which a user can select the desired item. The list of suggestions is obtained from an adapter and it appears only after a number of characters that are specified in the threshold.</p>\n\n<p>Here is a simple example of AutoCompleteTextView:</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\" \n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" \n        android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n        android:paddingRight=\"@dimen/activity_horizontal_margin\"\n        android:paddingTop=\"@dimen/activity_vertical_margin\"\n        android:paddingBottom=\"@dimen/activity_vertical_margin\" \n       tools:context=\".MainActivity\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/textView\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentLeft=\"true\"\n            android:layout_alignParentTop=\"true\"\n            android:layout_marginTop=\"15dp\"\n            android:text=\"X\" /&gt;\n\n        &lt;AutoCompleteTextView\n            android:id=\"@+id/autoCompleteTextView\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentLeft=\"true\"\n            android:layout_below=\"@+id/textView\"\n            android:layout_marginLeft=\"36dp\"\n            android:layout_marginTop=\"17dp\"\n            android:ems=\"10\"\n            android:text=\"\"&gt;\n\n            &lt;requestFocus /&gt;\n        &lt;/AutoCompleteTextView&gt;\n\n    &lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>The MainActivity.java is defined below.</p>\n\n<pre><code> public class MainActivity extends Activity {\n        String[] animals = {\"Ant\", \"Bbird\", \"Cat\"};\n\n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n\n            //Creating the instance of ArrayAdapter containing list of fruit names\n            ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;\n                    (this, android.R.layout.select_dialog_item, animals);\n            //Getting the instance of AutoCompleteTextView\n            AutoCompleteTextView actv = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView);\n            actv.setThreshold(1);//will start working from first character\n            actv.setAdapter(adapter);//setting the adapter data into the AutoCompleteTextView\n            actv.setTextColor(Color.BLACK);\n\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 53277973, "answer_count": 2, "score": 0, "last_activity_date": 1542101946, "creation_date": 1542101143, "question_id": 53277708, "link": "https://stackoverflow.com/questions/53277708/how-to-create-edittext-with-menu-underneath", "title": "How to create EditText with menu underneath?", "body": "<p>I want to create <code>EditText</code> with clickable menu underneath. User should be able to write his own custom text into <code>EditText</code> or choose from predefined options.</p>\n\n<p>I though about adding <code>recyclerView</code> under <code>EditText</code>, but for 4-5 options its waste of <code>recylerView</code>. Is there any way to do it better (I dont want to write a lot of code for this feature).</p>\n\n<p><a href=\"https://i.stack.imgur.com/8N44D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8N44D.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "android", "string", "replace", "kotlin"], "comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 1, "creation_date": 1542099328, "post_id": 53277138, "comment_id": 93436336, "body": "Please read &quot;How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Then use the <a href=\"https://stackoverflow.com/posts/53277138/edit\">edit</a> link to improve your question (do not add more information via comments). Otherwise we are not able to answer your question and help you. Show us a complete example, and the code you have, and tell us where it deviates from your expectations."}, {"owner": {"reputation": 41460, "user_id": 2310289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PO7Uz.jpg?s=128&g=1", "display_name": "Scary Wombat", "link": "https://stackoverflow.com/users/2310289/scary-wombat"}, "edited": false, "score": 0, "creation_date": 1542099554, "post_id": 53277138, "comment_id": 93436463, "body": "<i>Maybe regex?</i> - gooed idea using <code>String::replaceAll</code>"}, {"owner": {"reputation": 490, "user_id": 2659925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLNh1.jpg?s=128&g=1", "display_name": "Skullper", "link": "https://stackoverflow.com/users/2659925/skullper"}, "reply_to_user": {"reputation": 41460, "user_id": 2310289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PO7Uz.jpg?s=128&g=1", "display_name": "Scary Wombat", "link": "https://stackoverflow.com/users/2310289/scary-wombat"}, "edited": false, "score": 0, "creation_date": 1542100079, "post_id": 53277138, "comment_id": 93436755, "body": "@ScaryWombat replaceAll will replace all whitespaces in string. I need to save spaces between curly braces"}], "answers": [{"comments": [{"owner": {"reputation": 490, "user_id": 2659925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLNh1.jpg?s=128&g=1", "display_name": "Skullper", "link": "https://stackoverflow.com/users/2659925/skullper"}, "edited": false, "score": 1, "creation_date": 1542100316, "post_id": 53277377, "comment_id": 93436914, "body": "thanks, but this not working. Because it&#39;s deleting spaces only from start and end. If we paste string like this: <code>2+ {oper 1}</code>, we will get: <code>2+ {oper 1}</code>"}, {"owner": {"reputation": 2359, "user_id": 3955129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxfYS.jpg?s=128&g=1", "display_name": "Abdollah", "link": "https://stackoverflow.com/users/3955129/abdollah"}, "reply_to_user": {"reputation": 490, "user_id": 2659925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLNh1.jpg?s=128&g=1", "display_name": "Skullper", "link": "https://stackoverflow.com/users/2659925/skullper"}, "edited": false, "score": 0, "creation_date": 1542105780, "post_id": 53277377, "comment_id": 93440215, "body": "From your update and comments, I think you mean <code>2 + 3 - { any string }</code> must be converted to <code>2+3-{ any string }</code>. Am I right?"}, {"owner": {"reputation": 2359, "user_id": 3955129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxfYS.jpg?s=128&g=1", "display_name": "Abdollah", "link": "https://stackoverflow.com/users/3955129/abdollah"}, "reply_to_user": {"reputation": 490, "user_id": 2659925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLNh1.jpg?s=128&g=1", "display_name": "Skullper", "link": "https://stackoverflow.com/users/2659925/skullper"}, "edited": false, "score": 0, "creation_date": 1542132479, "post_id": 53277377, "comment_id": 93456141, "body": "@Skullper I added a regex to the solution and tested it. It works fine."}, {"owner": {"reputation": 490, "user_id": 2659925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLNh1.jpg?s=128&g=1", "display_name": "Skullper", "link": "https://stackoverflow.com/users/2659925/skullper"}, "edited": false, "score": 0, "creation_date": 1542133365, "post_id": 53277377, "comment_id": 93456552, "body": "@Abdolah Wow, thank you it really helps. I have tried regex with look-ahead, but your solution is more sophisticated)"}], "tags": [], "owner": {"reputation": 2359, "user_id": 3955129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxfYS.jpg?s=128&g=1", "display_name": "Abdollah", "link": "https://stackoverflow.com/users/3955129/abdollah"}, "is_accepted": true, "score": 1, "last_activity_date": 1542132808, "last_edit_date": 1542132808, "creation_date": 1542100072, "answer_id": 53277377, "question_id": 53277138, "link": "https://stackoverflow.com/questions/53277138/how-can-i-replace-specified-whitespaces-in-string/53277377#53277377", "title": "How can I replace specified whitespaces in string?", "body": "<p><strong>UDATE</strong></p>\n\n<p>Based on that code snippet you provided, I modified the answer.\nFirst, use trim() function to remove spaces from the beginning and end of the input string. After trimming the string, use the following regular expression to reach the desired pattern.</p>\n\n<pre><code>private fun removeSpaces(s: CharSequence) {\n    // e.g. s is \" 2 + 3 - { some value } \" \n    s = s.trim()\n    // now s is \"2 + 3 - { some value }\"\n\n    // define a regex matching a pattern of characters including some spaces before and after an operator (+,-,*,/)\n    val re = Regex(\"\"\"\\s*([\\+\\-\\*\\/])\\s*\"\"\")\n\n    // $1 denotes the group in the regex containing only an operator\n    val textWithoutSpaces = re.replace(s, \"$1\")\n    // textWithoutSpaces is \"2+3-{ some value }\"\n\n    getText().clear()\n    append(textWithoutSpaces)\n    setSelection(textWithoutSpaces.length)\n}\n</code></pre>\n\n<p>The regex works in this way that finds each operator i.e. <code>+</code>,<code>-</code>,<code>*</code>,and <code>/</code> along with white spaces before and after it. By grouping the operator itself using parantheses, all patterns including extra spaces are replaced by only the operators without any extra spaces.</p>\n"}], "owner": {"reputation": 490, "user_id": 2659925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLNh1.jpg?s=128&g=1", "display_name": "Skullper", "link": "https://stackoverflow.com/users/2659925/skullper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 53277377, "answer_count": 1, "score": 1, "last_activity_date": 1542132808, "creation_date": 1542099252, "last_edit_date": 1542100549, "question_id": 53277138, "link": "https://stackoverflow.com/questions/53277138/how-can-i-replace-specified-whitespaces-in-string", "title": "How can I replace specified whitespaces in string?", "body": "<p>I have a string: </p>\n\n<pre><code>2+3-{Some value}\n</code></pre>\n\n<p>How can I prevent user from adding spaces between operators and operands, but allow to add spaces between curly braces? Maybe regex?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I'm working on real time validating formula. All validations including whitespace removal are done using <code>TextWatcher</code>. My simplified code looks like this:</p>\n\n<pre><code>private val formulaWatcher: TextWatcher = object : TextWatcher {\n        override fun afterTextChanged(s: Editable?) = Unit\n\n        override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) = Unit\n\n        override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {\n            //Delay used here to avoid IndexOfBoundExceptions which arise because of a setSelection() method, it works with a little delay\n            Handler().postDelayed({\n                removeSpaces(s)\n            }, 100)\n        }\n    }\n</code></pre>\n\n<p>Remove spaces function:</p>\n\n<pre><code>private fun removeSpaces(s: CharSequence) {\n        if (s.last().isWhitespace()) {\n            val textWithoutSpaces = s.replace(Regex(\"\\\\s\"), \"\")\n            getText().clear()\n            append(textWithoutSpaces)\n            setSelection(textWithoutSpaces.length)\n        }\n    }\n</code></pre>\n"}, {"tags": ["spring-boot", "kotlin", "kotlintest"], "answers": [{"comments": [{"owner": {"reputation": 7375, "user_id": 390513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db85dd6e3b1972fafa2c36e6df3abfb?s=128&d=identicon&r=PG", "display_name": "Kane", "link": "https://stackoverflow.com/users/390513/kane"}, "edited": false, "score": 0, "creation_date": 1542277104, "post_id": 53296034, "comment_id": 93514361, "body": "It does not work for me. Could you pls share a sample project to demonstrate it?"}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "reply_to_user": {"reputation": 7375, "user_id": 390513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db85dd6e3b1972fafa2c36e6df3abfb?s=128&d=identicon&r=PG", "display_name": "Kane", "link": "https://stackoverflow.com/users/390513/kane"}, "edited": false, "score": 0, "creation_date": 1542295678, "post_id": 53296034, "comment_id": 93525751, "body": "Apologies, I missed a step: you need to override <code>listeners</code> and return <code>SpringListener</code>. Have updated my answer. If you&#39;re still stuck let me know and I&#39;ll stick an example repo up on github."}, {"owner": {"reputation": 5208, "user_id": 4257162, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKajj.jpg?s=128&g=1", "display_name": "LeoColman", "link": "https://stackoverflow.com/users/4257162/leocolman"}, "edited": false, "score": 0, "creation_date": 1545795808, "post_id": 53296034, "comment_id": 94695875, "body": "@YoniGibbs I don&#39;t believe you need that many dependencies. I set it up using only <code>testImplementation &quot;org.springframework.boot:spring-boot-starter-test:${springB&zwnj;&#8203;ootVersion}&quot;</code>, <code>testImplementation &#39;io.kotlintest:kotlintest-runner-junit5:3.1.10&#39;</code> and <code>testImplementation &quot;io.kotlintest:kotlintest-extensions-spring:3.1.10&quot;</code>"}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "reply_to_user": {"reputation": 5208, "user_id": 4257162, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKajj.jpg?s=128&g=1", "display_name": "LeoColman", "link": "https://stackoverflow.com/users/4257162/leocolman"}, "edited": false, "score": 0, "creation_date": 1546014081, "post_id": 53296034, "comment_id": 94760313, "body": "That&#39;s great to know. Thanks @Kerooker."}], "tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": true, "score": 2, "last_activity_date": 1542295628, "last_edit_date": 1542295628, "creation_date": 1542184872, "answer_id": 53296034, "question_id": 53277045, "link": "https://stackoverflow.com/questions/53277045/how-does-kotlintest-test-spring-boot-application/53296034#53296034", "title": "How does kotlintest test spring boot application", "body": "<p>Here's how I've got it set up: firstly, make sure to reference JUnit 5 instead of 4, e.g. I've got this in the <code>dependencies</code> section of my <code>build.gradle</code>:</p>\n\n<pre><code>testImplementation \"org.springframework.boot:spring-boot-starter-test:${springBootVersion}\"\ntestImplementation \"org.jetbrains.kotlin:kotlin-test\"\ntestImplementation \"org.jetbrains.kotlin:kotlin-test-junit\"\ntestImplementation \"io.kotlintest:kotlintest-extensions-spring:3.1.10\"\ntestImplementation 'io.kotlintest:kotlintest-runner-junit5:3.1.10'\ntestImplementation \"org.junit.jupiter:junit-jupiter-api:5.3.1\"\ntestImplementation \"org.junit.jupiter:junit-jupiter-engine:5.3.1\"\n</code></pre>\n\n<p>Also add this to <code>build.gradle</code>:</p>\n\n<pre><code>test {\n    useJUnitPlatform()\n}\n</code></pre>\n\n<p>Then in your integration test class have this (notice the override of <code>listeners</code>, without which it won't work):</p>\n\n<pre><code>import org.springframework.boot.test.context.SpringBootTest\nimport io.kotlintest.spring.SpringListener\n\n@SpringBootTest(\n        webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,\n        classes = [MyApplication::class])\nclass MyTestStringSpec : StringSpec() {\n    override fun listeners() = listOf(SpringListener)\n\n    init {\n        // Tests go in here\n    }\n}\n</code></pre>\n\n<p>Obviously you can replace <code>StringSpec</code> with any of the other Kotlin Test <a href=\"https://github.com/kotlintest/kotlintest/blob/master/doc/styles.md\" rel=\"nofollow noreferrer\">testing styles</a>, e.g. <code>FunSpec</code>, <code>ShouldSpec</code>, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 5208, "user_id": 4257162, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GKajj.jpg?s=128&g=1", "display_name": "LeoColman", "link": "https://stackoverflow.com/users/4257162/leocolman"}, "is_accepted": false, "score": 5, "last_activity_date": 1610906371, "last_edit_date": 1610906371, "creation_date": 1545796167, "answer_id": 53927235, "question_id": 53277045, "link": "https://stackoverflow.com/questions/53277045/how-does-kotlintest-test-spring-boot-application/53927235#53927235", "title": "How does kotlintest test spring boot application", "body": "<p>Kotlintest has a <a href=\"http://kotest.io/docs/framework/extensions/spring.html\" rel=\"nofollow noreferrer\">very nice guide</a> on how to setup Spring Extension to test Spring Framework.</p>\n<p>Basically, in addition to <code>KotlinTest</code> dependency, you also add it's <code>Spring Extension</code>:</p>\n<pre><code>testImplementation (&quot;io.kotlintest:kotlintest-runner-junit5:3.3.2&quot;) // KT dependency\ntestImplementation(&quot;io.kotlintest:kotlintest-extensions-spring:3.3.2&quot;) // KT Spring Extensions\n</code></pre>\n<p>And then you include the <code>SpringListener</code> <strong>and</strong> <code>SpringBootTest</code> to your code:</p>\n<pre><code>import org.springframework.boot.test.context.SpringBootTest\nimport io.kotlintest.spring.SpringListener\n\n@SpringBootTest\nclass SpringExample : FreeSpec() {\n\n    override fun listeners() = listOf(SpringListener)\n\n    init {\n        &quot;Verify context loads&quot; {\n\n        }\n    }\n}\n</code></pre>\n<p>You don't need to add <code>SpringListener</code> to every test you create, you can configure it globally using <code>ProjectConfig</code>. ProjectConfig is explained in <a href=\"https://github.com/kotlintest/kotlintest/blob/master/doc/reference.md#project-config\" rel=\"nofollow noreferrer\">KotlinTest Documentation</a></p>\n"}], "owner": {"reputation": 7375, "user_id": 390513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db85dd6e3b1972fafa2c36e6df3abfb?s=128&d=identicon&r=PG", "display_name": "Kane", "link": "https://stackoverflow.com/users/390513/kane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2879, "favorite_count": 1, "accepted_answer_id": 53296034, "answer_count": 2, "score": 1, "last_activity_date": 1610906371, "creation_date": 1542098845, "last_edit_date": 1542099493, "question_id": 53277045, "link": "https://stackoverflow.com/questions/53277045/how-does-kotlintest-test-spring-boot-application", "title": "How does kotlintest test spring boot application", "body": "<p>The integration test of Spring boot application always starts the web server firstly.</p>\n\n<p>The simplest test of spring boot test looks like below, how does migrate it using kotlintest instead?</p>\n\n<pre><code>@ExtendWith(SpringExtension::class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass ReportApplicationTests {\n\n    @Test\n    fun `Server can be launched`() {\n    }\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "notifications", "android-notifications", "kotlin-android-extensions"], "answers": [{"tags": [], "owner": {"reputation": 711, "user_id": 5724937, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/gkRm6.jpg?s=128&g=1", "display_name": "Bjarn Bronsveld", "link": "https://stackoverflow.com/users/5724937/bjarn-bronsveld"}, "is_accepted": true, "score": 1, "last_activity_date": 1542266482, "creation_date": 1542266482, "answer_id": 53314260, "question_id": 53276789, "link": "https://stackoverflow.com/questions/53276789/bundled-notification-replaces-the-first-notification/53314260#53314260", "title": "Bundled notification replaces the first notification", "body": "<p>I have fixed it by creating a seperate summary notification when isFirstNotificationInGroup is true. \nThis will be send just before the 'real' notification will be send.</p>\n"}], "owner": {"reputation": 711, "user_id": 5724937, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/gkRm6.jpg?s=128&g=1", "display_name": "Bjarn Bronsveld", "link": "https://stackoverflow.com/users/5724937/bjarn-bronsveld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 53314260, "answer_count": 1, "score": 0, "last_activity_date": 1542266482, "creation_date": 1542097826, "question_id": 53276789, "link": "https://stackoverflow.com/questions/53276789/bundled-notification-replaces-the-first-notification", "title": "Bundled notification replaces the first notification", "body": "<p>When creating a bundled notification using setGroup() and setGroupSummary() I am having some strange issues regarding the behaviour of the notifications.</p>\n\n<p>So, as a reference. This example contains the issue:</p>\n\n<pre><code>        var isFirstNotificationInGroup = true\n\n        val notificationManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            notificationManager.activeNotifications.forEach {\n                if (it.notification.group == groupId) {\n                    isFirstNotificationInGroup = false\n                }\n            }\n        }\n\n        val builder = NotificationCompat.Builder(this, channelId).apply {\n            color = resources.getColor(R.color.colorAccent)\n            priority = NotificationCompat.PRIORITY_MAX\n            setSmallIcon(R.drawable.ic_dotoo_logo)\n            setContentTitle(title)\n            setContentText(body)\n            setStyle(NotificationCompat.BigTextStyle()\n                    .bigText(body))\n            setAutoCancel(true)\n            setCategory(NotificationCompat.CATEGORY_SOCIAL)\n            setGroup(groupId)\n            setGroupSummary(isFirstNotificationInGroup)\n        }\n\n        &lt; ... &gt;\n\n        with(NotificationManagerCompat.from(this)) {\n            notify(notificationId, builder.build())\n        }\n</code></pre>\n\n<p><strong>What happens?</strong></p>\n\n<p>The first notification will be shown as it should. So no issues here.\nThen, when we show the second notification. It replaces the first one. This shouldn't happen. <em>And no, it is not due to the notification ID. That's not related to this as far as I know.</em></p>\n\n<p>But, when we show a third (or more) notification, the bundle works as expected and shows two (or more) bundled notifications. But the first one is... gone.</p>\n\n<p>Thanks in advance for helping me.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 10320361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QMDeLs6gz_A/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP6ZjlGncW7UimHkTM2xjcZRvxbig/mo/photo.jpg?sz=128", "display_name": "John Paoletto", "link": "https://stackoverflow.com/users/10320361/john-paoletto"}, "edited": false, "score": 0, "creation_date": 1542099152, "post_id": 53276904, "comment_id": 93436245, "body": "Thanks! And how exactly can I do something like MyAnimations(goPiano).fadeAnimation().postAnimation { code } ? I ask this because I want to create functions for preAnimation &amp; postAnimation and have the easy option to choose either in this way."}], "tags": [], "owner": {"reputation": 7021, "user_id": 4620609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dR89W.jpg?s=128&g=1", "display_name": "Samuel Robert", "link": "https://stackoverflow.com/users/4620609/samuel-robert"}, "is_accepted": true, "score": 0, "last_activity_date": 1542099425, "last_edit_date": 1542099425, "creation_date": 1542098289, "answer_id": 53276904, "question_id": 53276742, "link": "https://stackoverflow.com/questions/53276742/kotlin-how-to-do-function-inside-a-function/53276904#53276904", "title": "Kotlin - How to do Function inside a Function?", "body": "<p>You can use higher order functions to do that. You don't need a function inside function for that</p>\n\n<pre><code>fun fadeAnimation(postAnimCallback: () -&gt; Unit) {\n    val fadeAnimator = ValueAnimator.ofFloat(0.2f, 1f)\n\n    fadeAnimator.addUpdateListener {\n        val value = it.animatedValue as Float\n        view.alpha = value\n    }\n\n    fadeAnimator.interpolator = DecelerateInterpolator(1.4f)\n    fadeAnimator.duration = 400\n\n    fadeAnimator.addListener(object : Animator.AnimatorListener {\n        override fun onAnimationRepeat(animation: Animator?) {\n            //empty\n        }\n\n        override fun onAnimationEnd(animation: Animator?) {\n            postAnimCallback()\n        }\n\n        override fun onAnimationCancel(animation: Animator?) {\n            //empty\n        }\n\n        override fun onAnimationStart(animation: Animator?) {\n            //empty\n        }\n    })\n\n    fadeAnimator.start()\n}\n</code></pre>\n\n<p>Now you can invoke it like</p>\n\n<pre><code>MyAnimations(goPiano).fadeAnimation() {\n     // post animation code\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>MyAnimations(goPiano).fadeAnimation(::postAnimation)\n\nfun postAnimation() {\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 10320361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QMDeLs6gz_A/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP6ZjlGncW7UimHkTM2xjcZRvxbig/mo/photo.jpg?sz=128", "display_name": "John Paoletto", "link": "https://stackoverflow.com/users/10320361/john-paoletto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1466, "favorite_count": 0, "accepted_answer_id": 53276904, "answer_count": 1, "score": 1, "last_activity_date": 1542099425, "creation_date": 1542097656, "question_id": 53276742, "link": "https://stackoverflow.com/questions/53276742/kotlin-how-to-do-function-inside-a-function", "title": "Kotlin - How to do Function inside a Function?", "body": "<p>I have a class I created for animations that is as follows:</p>\n\n<pre><code>    class MyAnimations(val view: View) {\n\nfun fadeAnimation() {\n    val fadeAnimator = ValueAnimator.ofFloat(0.2f, 1f)\n\n    fadeAnimator.addUpdateListener {\n        val value = it.animatedValue as Float\n        view.alpha = value\n    }\n\n    fadeAnimator.interpolator = DecelerateInterpolator(1.4f)\n    fadeAnimator.duration = 400\n\n\n    fun postAnimation() {\n\n        fadeAnimator.addListener(object : Animator.AnimatorListener {\n            override fun onAnimationRepeat(animation: Animator?) {\n                //empty\n            }\n\n            override fun onAnimationEnd(animation: Animator?) {\n                -- I WANT TO RUN CODE HERE --\n            }\n\n            override fun onAnimationCancel(animation: Animator?) {\n                //empty\n            }\n\n            override fun onAnimationStart(animation: Animator?) {\n                //empty\n            }\n        })\n    }\n\n    fadeAnimator.start()\n    }\n}\n</code></pre>\n\n<p>In my Activities, my goal is to have something like this &amp; run <strong>myfunction()</strong> after the animation is over:</p>\n\n<pre><code>    MyAnimations(goPiano).fadeAnimation().postAnimation(myfunction())\n</code></pre>\n\n<p>or like this, and write any code to run when my animation is over:</p>\n\n<pre><code>    MyAnimations(goPiano).fadeAnimation().postAnimation() {\n            //Block of code here\n        }\n</code></pre>\n\n<p>What do I need to add and change in MyAnimations class to allow me to do this? I'm new to Kotlin, and would love to know how to do this in my classes. Thanks!</p>\n"}, {"tags": ["android", "kotlin", "mapbox"], "answers": [{"comments": [{"owner": {"reputation": 84, "user_id": 8391709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55de3cdbfffa73b728823eebc3a884c7?s=128&d=identicon&r=PG&f=1", "display_name": "Mavisa9", "link": "https://stackoverflow.com/users/8391709/mavisa9"}, "edited": false, "score": 0, "creation_date": 1542100261, "post_id": 53276877, "comment_id": 93436883, "body": "i always find the example that using maps from mapbox not maps from google. mapbox only can be run at sdk above 27?"}, {"owner": {"reputation": 3467, "user_id": 3306020, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/vqger.png?s=128&g=1", "display_name": "Magnas", "link": "https://stackoverflow.com/users/3306020/magnas"}, "edited": false, "score": 0, "creation_date": 1542112297, "post_id": 53276877, "comment_id": 93443769, "body": "Mapbox turn by turn navigation is free unto a point. Depends on how much &#39;use&#39; your app will get. <a href=\"https://www.mapbox.com/pricing/\" rel=\"nofollow noreferrer\">mapbox.com/pricing</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10296025"}, "is_accepted": false, "score": 0, "last_activity_date": 1542098186, "creation_date": 1542098186, "answer_id": 53276877, "question_id": 53276679, "link": "https://stackoverflow.com/questions/53276679/is-it-possible-to-implement-turn-by-turn-navigation-sdk-from-mapbox-on-android-g/53276877#53276877", "title": "is it possible to implement Turn by Turn navigation sdk from mapbox on Android Google Maps?", "body": "<p>ya turn by turn navigation is tricky.Map box should make it easier though u just have to implement there sdk in your project and they also have docs on how to use the Map box sdk. only downfall is you have to pay for it.</p>\n\n<p>i would advise if you are creating a personal project try creating a location listener and update current position of the device on a google maps intent. you can then just create your own navigation app  ( its abit of a longer way around it but you would have more control over the navigation and plus its free) </p>\n"}], "owner": {"reputation": 84, "user_id": 8391709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55de3cdbfffa73b728823eebc3a884c7?s=128&d=identicon&r=PG&f=1", "display_name": "Mavisa9", "link": "https://stackoverflow.com/users/8391709/mavisa9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542098186, "creation_date": 1542097368, "question_id": 53276679, "link": "https://stackoverflow.com/questions/53276679/is-it-possible-to-implement-turn-by-turn-navigation-sdk-from-mapbox-on-android-g", "title": "is it possible to implement Turn by Turn navigation sdk from mapbox on Android Google Maps?", "body": "<p>i have create a tracking project using maps from Google on android kotlin, and i want to create more that user can go to somewhere with navigation (so  there's two point, a current location point and destination point). i want to implement turn by turn navigation sdk from mapbox? is it possible to do that? have you build it before?</p>\n"}, {"tags": ["spring-boot", "kotlin", "mockito"], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 4402290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-1WigBHz4gHs/AAAAAAAAAAI/AAAAAAAAABA/AnYBvvBeYZQ/photo.jpg?sz=128", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/4402290/mohanraj"}, "edited": false, "score": 0, "creation_date": 1542090249, "post_id": 53274969, "comment_id": 93432391, "body": "krishna Murari but both services have userRepository as common dependency"}, {"owner": {"reputation": 567, "user_id": 4402290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-1WigBHz4gHs/AAAAAAAAAAI/AAAAAAAAABA/AnYBvvBeYZQ/photo.jpg?sz=128", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/4402290/mohanraj"}, "edited": false, "score": 0, "creation_date": 1542090658, "post_id": 53274969, "comment_id": 93432534, "body": "I have edited the question as you suggested please have a look and tell what to change"}, {"owner": {"reputation": 370, "user_id": 4464017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2acd756130fc0e65ae55789b8a711c39?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nobody", "link": "https://stackoverflow.com/users/4464017/mr-nobody"}, "reply_to_user": {"reputation": 567, "user_id": 4402290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-1WigBHz4gHs/AAAAAAAAAAI/AAAAAAAAABA/AnYBvvBeYZQ/photo.jpg?sz=128", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/4402290/mohanraj"}, "edited": false, "score": 0, "creation_date": 1542090755, "post_id": 53274969, "comment_id": 93432559, "body": "@Mohanraj It would not matter you are only creating  mock objects  Mock - UserRepository , UserRoleRepository ,JwtGenerator , EmailService ,AdminRepository create object  of UserService of above required mock objects.  Then create object of AdminService with object of UserService and UserRepository ,AdminRepository as mock objects I suggest it would be a better design to create a StorageService and put all repositories inside it ."}, {"owner": {"reputation": 370, "user_id": 4464017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2acd756130fc0e65ae55789b8a711c39?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nobody", "link": "https://stackoverflow.com/users/4464017/mr-nobody"}, "reply_to_user": {"reputation": 567, "user_id": 4402290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-1WigBHz4gHs/AAAAAAAAAAI/AAAAAAAAABA/AnYBvvBeYZQ/photo.jpg?sz=128", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/4402290/mohanraj"}, "edited": false, "score": 1, "creation_date": 1542091702, "post_id": 53274969, "comment_id": 93432878, "body": "what i am suggesting is create a simple object of UserService with its required dependencies as mocked objects . Then create object of AdminService using UserService object and other dependencies as mocked ones. You can google that how to do it. I am not familiar with kotlin . I write tests in groovy and spock."}], "tags": [], "owner": {"reputation": 370, "user_id": 4464017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2acd756130fc0e65ae55789b8a711c39?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Nobody", "link": "https://stackoverflow.com/users/4464017/mr-nobody"}, "is_accepted": false, "score": 2, "last_activity_date": 1542090155, "creation_date": 1542090155, "answer_id": 53274969, "question_id": 53274917, "link": "https://stackoverflow.com/questions/53274917/mock-a-service-class-with-dependencies-in-another-service-class-mockito/53274969#53274969", "title": "Mock a Service class with dependencies in another Service Class Mockito", "body": "<p>You can create object of UserService with its dependencies as mocked objects and then use it as a dependency in AdminServiceTests.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13671545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ce175cd938e18310ae9f577e8ef09ce?s=128&d=identicon&r=PG&f=1", "display_name": "darkell", "link": "https://stackoverflow.com/users/13671545/darkell"}, "is_accepted": false, "score": 0, "last_activity_date": 1591177148, "creation_date": 1591177148, "answer_id": 62169684, "question_id": 53274917, "link": "https://stackoverflow.com/questions/53274917/mock-a-service-class-with-dependencies-in-another-service-class-mockito/62169684#62169684", "title": "Mock a Service class with dependencies in another Service Class Mockito", "body": "<p>If you're using Gradle &amp; Spring, add this plugin to your build.gradle</p>\n\n<pre><code>plugins {\n    kotlin(\"plugin.spring\") version \"1.3.72\"\n}\n</code></pre>\n\n<p>Mockito should then work without having to mock the dependencies of the service:</p>\n\n<pre><code>val userService = Mockito.mock(UserService::class.java)\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 4402290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-1WigBHz4gHs/AAAAAAAAAAI/AAAAAAAAABA/AnYBvvBeYZQ/photo.jpg?sz=128", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/4402290/mohanraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1091, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1591177148, "creation_date": 1542089867, "last_edit_date": 1542091902, "question_id": 53274917, "link": "https://stackoverflow.com/questions/53274917/mock-a-service-class-with-dependencies-in-another-service-class-mockito", "title": "Mock a Service class with dependencies in another Service Class Mockito", "body": "<p>I want to Mock a Service class with dependencies in another Service Class Mockito. </p>\n\n<p><strong>UserService Class</strong></p>\n\n<pre><code>@Service\nclass UserService(\n    val userRepository: UserRepository,\n    val userRoleRepository: UserRoleRepository,\n    val jwtGenerator: JwtGenerator,\n    val emailService: EmailService\n)\n</code></pre>\n\n<p><strong>AdminService Class</strong></p>\n\n<pre><code>@Service\nclass AdminService(\n    val userService: UserService,\n    val userRepository: UserRepository,\n    val adminRepository: AdminRepository\n)\n</code></pre>\n\n<p>Now I'm trying to write unit test with these classes as follows</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner::class)\nclass AdminServiceTests {\n\nprivate lateinit var createAdmin: CreateAdmin\n\n@Mock\nlateinit var userRepository: UserRepository\n\n@Mock\nlateinit var userRoleRepository: UserRoleRepository\n\n@Mock\nlateinit var jwtGenerator: JwtGenerator\n\n@Mock\nlateinit var emailService: EmailService\n\n@InjectMocks\nlateinit var userService: UserService\n\n@Mock\nlateinit var userRepository: UserRepository // Conflicting declarations\n\n@Mock\nlateinit var adminRepository: AdminRepository\n\n@InjectMocks\nlateinit var adminService: AdminService\n\n@Before\nfun setup() {\n    this.createAdmin = CreateAdmin().apply {\n        email = \"admin@gmail.com\"\n        name = \"admin\"\n        password = \"qwerty\"\n        phone = 9873555555555\n    }\n}\n\n@Test\nfun testCreateAdmin() {\n    val result = adminService.createAdmin(createAdmin)\n    Assert.assertEquals(true, result)\n}\n}\n</code></pre>\n\n<p>Please advice how to mock the userService inside AdminService with all the   four dependencies injected</p>\n"}, {"tags": ["kotlin", "coroutine"], "answers": [{"tags": [], "owner": {"reputation": 2569, "user_id": 2853392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2j5ao.jpg?s=128&g=1", "display_name": "vishal jangid", "link": "https://stackoverflow.com/users/2853392/vishal-jangid"}, "is_accepted": false, "score": -2, "last_activity_date": 1542081255, "creation_date": 1542081255, "answer_id": 53273541, "question_id": 53273361, "link": "https://stackoverflow.com/questions/53273361/how-to-return-deferred-with-the-instant-result/53273541#53273541", "title": "How to return Deferred with the instant result?", "body": "<p>you can drictlly use like below.\nIn first condition it will return int and in second case it will return boolean</p>\n\n<pre><code>   val deferredResult = if (condition) {\n        3\n    } else {\n      true\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": true, "score": 4, "last_activity_date": 1542088045, "creation_date": 1542088045, "answer_id": 53274579, "question_id": 53273361, "link": "https://stackoverflow.com/questions/53273361/how-to-return-deferred-with-the-instant-result/53274579#53274579", "title": "How to return Deferred with the instant result?", "body": "<p>You can use a <code>CompletableDeferred</code>, see <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-completable-deferred/\" rel=\"nofollow noreferrer\">https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-completable-deferred/</a></p>\n\n<pre><code>val value = if(true) {\n    callSuspendFunction(params)\n} else {\n    CompletableDeferred(10)\n}\n</code></pre>\n"}], "owner": {"reputation": 966, "user_id": 4978865, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-75z0lafdAEk/AAAAAAAAAAI/AAAAAAAAABQ/LjBjsQQLGnM/photo.jpg?sz=128", "display_name": "Praytic", "link": "https://stackoverflow.com/users/4978865/praytic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "accepted_answer_id": 53274579, "answer_count": 2, "score": 3, "last_activity_date": 1542088045, "creation_date": 1542079714, "last_edit_date": 1542087544, "question_id": 53273361, "link": "https://stackoverflow.com/questions/53273361/how-to-return-deferred-with-the-instant-result", "title": "How to return Deferred with the instant result?", "body": "<p>I have a conditional statement which should return <code>Deferred</code> result in both cases, but I don't know how to manually create <code>Deferred</code> object with predefined result. Here's code snapshot:</p>\n\n<pre><code>val deferredResult = if (condition) {\n   callSuspendFunction(params)\n} else {\n  deferred???\n}\n</code></pre>\n\n<p><code>callSuspendFunction</code> returns the result of <code>async</code> operation. Although I can write something like <code>coroutineScope { async { result } }</code> instead of <code>deferred???</code>, but it looks really not what it should be. </p>\n"}, {"tags": ["java", "kotlin", "bit-manipulation"], "answers": [{"tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": true, "score": 3, "last_activity_date": 1542070405, "creation_date": 1542070405, "answer_id": 53272228, "question_id": 53271952, "link": "https://stackoverflow.com/questions/53271952/converting-java-bitwise-and-operator-over-to-kotlin/53272228#53272228", "title": "Converting Java bitwise &quot;and&quot; operator over to Kotlin", "body": "<p>Returning a <code>Byte</code> means the function cannot return 128 no matter what, so that needs to be <code>Int</code>. The Java checksum does a \"full\" sum, not just the lowest byte of the sum. Similarly the bitwise AND cannot be done on bytes, that is useless, the sign extension (the AND with 0xFF is to remove the extended sign bits) would still happen. Then it could be written as a loop, Java style, but in Kotlin it probably makes more sense to write something like this:</p>\n\n<pre><code>fun getKotlinChecksum(array: ByteArray): Int {\n    return array.map({ it.toInt() and 0xFF }).sum()\n}\n</code></pre>\n"}], "owner": {"reputation": 2506, "user_id": 3079130, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e1f9a7c19b1487fb867184e4366748d6?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa", "link": "https://stackoverflow.com/users/3079130/rafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 53272228, "answer_count": 1, "score": 5, "last_activity_date": 1542070405, "creation_date": 1542067959, "last_edit_date": 1542069927, "question_id": 53271952, "link": "https://stackoverflow.com/questions/53271952/converting-java-bitwise-and-operator-over-to-kotlin", "title": "Converting Java bitwise &quot;and&quot; operator over to Kotlin", "body": "<p>I have a an array of bytes I'm calculating a checksum for in Java. And I'm trying to convert it to Kotlin. But the problem is that I am getting different values when calculating the <code>-128 &amp; 0xff</code> in Java than it's equivalent in Kotlin. When passing in the -128, when I make the calculation in Java, it gives me a positive 128, but when I run it in Kotlin, it gives me a -128.</p>\n\n<pre><code>public class Bytes {\n\n    public static byte[] getByteArray() {\n        return new byte [] {-128};\n    }\n\n    public static int getJavaChecksum() {\n        int checksum = 0;\n\n        for (Byte b : getByteArray()) {\n            checksum += (b &amp; 0xff);\n        }\n\n        return checksum;\n    }\n}\n</code></pre>\n\n<p>This is my Kotlin code. I'm calling into the above bytes class to get the \"byte array\" I'm working with. So both pieces are running on the same input.</p>\n\n<pre><code>fun getKotlinChecksum(array: ByteArray): Byte {\n    var checksum = 0\n    for (b in array) {\n        checksum += (b and 0xFF.toByte())\n    }\n    return checksum.toByte()\n}\n\nfun main(args: Array&lt;String&gt;) {\n\n    println(Bytes.getJavaChecksum())\n    print(getKotlinChecksum(Bytes.getByteArray()))\n}\n</code></pre>\n\n<p>The Java code is from a legacy code base that uses I2C to send over these bytes to a microcontroller. Is the Java just wrong? Or is there a way that I can get the 128 in the Kotlin code?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3161, "user_id": 10510491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4QsPKELpII/AAAAAAAAAAI/AAAAAAAAV14/3oA6QmFw68U/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10510491/aaron"}, "edited": false, "score": 0, "creation_date": 1542068356, "post_id": 53271946, "comment_id": 93427379, "body": "Either your list is empty or recycler view is null..? Or maybe the adapter is attached but the recycler view is not visible..?"}, {"owner": {"reputation": 37, "user_id": 2631565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/16RJd.png?s=128&g=1", "display_name": "danielvilha", "link": "https://stackoverflow.com/users/2631565/danielvilha"}, "reply_to_user": {"reputation": 3161, "user_id": 10510491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4QsPKELpII/AAAAAAAAAAI/AAAAAAAAV14/3oA6QmFw68U/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10510491/aaron"}, "edited": false, "score": 1, "creation_date": 1542068458, "post_id": 53271946, "comment_id": 93427407, "body": "I forgot to initialize my layoutManager.      <code>recycler? .layoutManager = LinearLayoutManager (fragment? .text, LinearLayoutManager.VERTICAL, false)</code>"}], "owner": {"reputation": 37, "user_id": 2631565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/16RJd.png?s=128&g=1", "display_name": "danielvilha", "link": "https://stackoverflow.com/users/2631565/danielvilha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542067908, "creation_date": 1542067908, "question_id": 53271946, "link": "https://stackoverflow.com/questions/53271946/why-is-my-adapter-not-being-called-in-my-fragment", "title": "Why is my adapter not being called in my fragment?", "body": "<p>I have the following adapter:</p>\n\n<pre><code>class HomeAdapter(val list: List&lt;Team&gt;, val fragment: HomeFragment) : RecyclerView.Adapter&lt;HomeAdapter.ViewHolder&gt;() {\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        return ViewHolder(LayoutInflater.from(fragment.context).inflate(R.layout.list_team, parent, false))\n    }\n\n    override fun getItemCount(): Int {\n        return list.size\n   }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        holder.position?.text = list[position].position.toString()\n        holder.number?.text = list[position].number\n        holder.name?.text = list[position].name\n        holder.puntuation?.text = list[position].puntuation.toString()\n    }\n\n    class ViewHolder(v: View) : RecyclerView.ViewHolder(v) {\n        var view: View = v\n        var position: TextView? = view.findViewById(R.id.textViewPosition)\n        var number: TextView? = view.findViewById(R.id.textViewNumber)\n        var name: TextView? = view.findViewById(R.id.textViewName)\n        var puntuation: TextView? = view.findViewById(R.id.textViewPuntuation)\n    }\n}\n</code></pre>\n\n<p>And I have the following call in my fragment:</p>\n\n<pre><code>    adapter = HomeAdapter(teams, fragment!!)\n\n    if (adapter?.list!!.isNullOrEmpty()) {\n        image_empty?.visibility = View.VISIBLE\n    } else {\n        recycler?.adapter = adapter\n    }\n</code></pre>\n\n<p>But my adapter is not being called. What am I doing wrong?</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "coroutine", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 3900, "user_id": 475242, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/y6FOo.jpg?s=128&g=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/475242/cody"}, "edited": false, "score": 0, "creation_date": 1542068446, "post_id": 53271912, "comment_id": 93427401, "body": "Is there a way to not including the specific delay number in the test?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 3900, "user_id": 475242, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/y6FOo.jpg?s=128&g=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/475242/cody"}, "edited": false, "score": 1, "creation_date": 1542069397, "post_id": 53271912, "comment_id": 93427607, "body": "with async for example"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 2, "last_activity_date": 1542069388, "last_edit_date": 1542069388, "creation_date": 1542067706, "answer_id": 53271912, "question_id": 53271646, "link": "https://stackoverflow.com/questions/53271646/how-to-unit-test-coroutine-when-it-contains-coroutine-delay/53271912#53271912", "title": "How to unit test coroutine when it contains coroutine delay?", "body": "<p>You start a coroutine which suspends for 1 second before setting <code>data</code> to 1. Your test just invokes <code>doSomething</code> but does not wait until <code>data</code> is actually being set. If you add another, longer <code>delay</code>, to the test it will, work:</p>\n\n<pre><code>@Test     \nfun coroutineDelay() = runBlocking {\n    ...\n    viewModel.doSomething()\n    delay(1100)\n    ...\n}\n</code></pre>\n\n<p>You can also make the coroutine return a <code>Deferred</code> which you can wait on:</p>\n\n<pre><code>fun doSomething(): Deferred&lt;Unit&gt; {\n    return async {\n        delay(1000)\n        data = 1\n    }\n}\n</code></pre>\n\n<p>With <code>await</code> there's no need to delay your code anymore:</p>\n\n<pre><code>val model = SimpleViewModel()\nmodel.doSomething().await()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 2, "last_activity_date": 1591607988, "last_edit_date": 1591607988, "creation_date": 1542361693, "answer_id": 53335224, "question_id": 53271646, "link": "https://stackoverflow.com/questions/53271646/how-to-unit-test-coroutine-when-it-contains-coroutine-delay/53335224#53335224", "title": "How to unit test coroutine when it contains coroutine delay?", "body": "<p>The first issue in your code is that <code>SimpleViewModel.coroutineContext</code> has no <code>Job</code> associated with it. The whole point of making your view model a <code>CoroutineScope</code> is the ability to centralize the cancelling of all coroutines it starts. So add the job as follows (note the <em>absence</em> of a custom getter):</p>\n\n<pre><code>class SimpleViewModel : ViewModel(), CoroutineScope {\n\n    override val coroutineContext = Job() + Dispatchers.Unconfined\n\n    var data = 0\n\n    fun doSomething() {\n        launch {\n            delay(1000)\n            data = 1\n        }\n    }\n}\n</code></pre>\n\n<p>Now your test code can ensure it proceeds to the assertions only after all the jobs your view model launched are done:</p>\n\n<pre><code>class ScopedViewModelTest {\n\n    @Test\n    fun coroutineDelay() {\n        // Arrange\n        val viewModel = SimpleViewModel()\n\n        // ActTes\n        viewModel.doSomething()\n\n        // Assert\n        runBlocking {\n            viewModel.coroutineContext[Job]!!.children.forEach { it.join() }\n        }\n        Assert.assertEquals(1, viewModel.data)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3900, "user_id": 475242, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/y6FOo.jpg?s=128&g=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/475242/cody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1797, "favorite_count": 0, "accepted_answer_id": 53271912, "answer_count": 2, "score": 4, "last_activity_date": 1591607988, "creation_date": 1542065663, "last_edit_date": 1552980511, "question_id": 53271646, "link": "https://stackoverflow.com/questions/53271646/how-to-unit-test-coroutine-when-it-contains-coroutine-delay", "title": "How to unit test coroutine when it contains coroutine delay?", "body": "<p>When I add a coroutine delay() in my view model, the remaining part of the code will not be executed. </p>\n\n<p>This is my demo code:</p>\n\n<pre><code>class SimpleViewModel : ViewModel(), CoroutineScope {\n\n    override val coroutineContext: CoroutineContext\n        get() = Dispatchers.Unconfined\n\n    var data = 0\n\n    fun doSomething() {\n        launch {\n            delay(1000)\n            data = 1\n        }\n    }\n}\n\nclass ScopedViewModelTest {\n\n    @Test\n    fun coroutineDelay() {\n        // Arrange\n        val viewModel = SimpleViewModel()\n\n        // ActTes\n        viewModel.doSomething()\n\n        // Assert\n        Assert.assertEquals(1, viewModel.data)\n    }\n}\n</code></pre>\n\n<p>I got the assertion result:</p>\n\n<pre><code>java.lang.AssertionError: \nExpected :1\nActual   :0\n</code></pre>\n\n<p>Any idea how to fix this?</p>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1542062920, "post_id": 53271106, "comment_id": 93425944, "body": "Hint: write the Java class, select the action &quot;Convert Java file to Kotlin&quot; in IntelliJ."}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1542067875, "post_id": 53271106, "comment_id": 93427257, "body": "described in <a href=\"https://stackoverflow.com/a/48391246/8073652\">stackoverflow.com/a/48391246/8073652</a>"}, {"owner": {"reputation": 439, "user_id": 6545201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8exXl.jpg?s=128&g=1", "display_name": "David Ferreira", "link": "https://stackoverflow.com/users/6545201/david-ferreira"}, "reply_to_user": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1542076290, "post_id": 53271106, "comment_id": 93428896, "body": "@s1m0nw1 I did that but it generated a compilation error. That doesn&#39;t solve my question. Looks like doesn&#39;t work when working with generics."}], "owner": {"reputation": 439, "user_id": 6545201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8exXl.jpg?s=128&g=1", "display_name": "David Ferreira", "link": "https://stackoverflow.com/users/6545201/david-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1542067883, "answer_count": 0, "score": 0, "last_activity_date": 1542062236, "creation_date": 1542062236, "question_id": 53271106, "link": "https://stackoverflow.com/questions/53271106/implementation-of-multiple-interfaces", "closed_reason": "Duplicate", "title": "Implementation of multiple interfaces", "body": "<p>I want to know if is possible the multiple interface implementation in kotlin as java.</p>\n\n<p>How can i do this...</p>\n\n<pre><code>interface MyInterface &lt;T : Serializable, Iterable&lt;T&gt; { //.. }\n</code></pre>\n\n<p>...in Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "android-source", "android-package-managers"], "answers": [{"comments": [{"owner": {"reputation": 996, "user_id": 6704320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb8cbdc379bfa97bee49eb731e601134?s=128&d=identicon&r=PG&f=1", "display_name": "phoebus", "link": "https://stackoverflow.com/users/6704320/phoebus"}, "edited": false, "score": 1, "creation_date": 1542059906, "post_id": 53270669, "comment_id": 93425045, "body": "the device in question is not rooted, so this will probably not work. My app has system privileges though, but I guess it won&#39;t be able without remounting the system as you said."}, {"owner": {"reputation": 3014, "user_id": 5148795, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PC5b4qkB2x8/AAAAAAAAAAI/AAAAAAAABFE/v8lpqfero1M/photo.jpg?sz=128", "display_name": "Haroun Hajem", "link": "https://stackoverflow.com/users/5148795/haroun-hajem"}, "reply_to_user": {"reputation": 996, "user_id": 6704320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb8cbdc379bfa97bee49eb731e601134?s=128&d=identicon&r=PG&f=1", "display_name": "phoebus", "link": "https://stackoverflow.com/users/6704320/phoebus"}, "edited": false, "score": 0, "creation_date": 1542060975, "post_id": 53270669, "comment_id": 93425393, "body": "If you still have time to develop then try this here, <code>mount -o rw,remount &#47;system </code>, Method 2. By terminal you should runt the code above.  Try this locally before further development --&gt; <a href=\"https://android.stackexchange.com/questions/110927/how-to-mount-system-rewritable-or-read-only-rw-ro\" title=\"how to mount system rewritable or read only rw ro\">android.stackexchange.com/questions/110927/&hellip;</a>"}, {"owner": {"reputation": 3014, "user_id": 5148795, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PC5b4qkB2x8/AAAAAAAAAAI/AAAAAAAABFE/v8lpqfero1M/photo.jpg?sz=128", "display_name": "Haroun Hajem", "link": "https://stackoverflow.com/users/5148795/haroun-hajem"}, "reply_to_user": {"reputation": 996, "user_id": 6704320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb8cbdc379bfa97bee49eb731e601134?s=128&d=identicon&r=PG&f=1", "display_name": "phoebus", "link": "https://stackoverflow.com/users/6704320/phoebus"}, "edited": false, "score": 0, "creation_date": 1542061004, "post_id": 53270669, "comment_id": 93425402, "body": "What Android version are you running/targeting?"}, {"owner": {"reputation": 996, "user_id": 6704320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb8cbdc379bfa97bee49eb731e601134?s=128&d=identicon&r=PG&f=1", "display_name": "phoebus", "link": "https://stackoverflow.com/users/6704320/phoebus"}, "edited": false, "score": 1, "creation_date": 1542065291, "post_id": 53270669, "comment_id": 93426626, "body": "I&#39;ll look into that - thanks for your help. I&#39;m targeting 8.1"}, {"owner": {"reputation": 3014, "user_id": 5148795, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PC5b4qkB2x8/AAAAAAAAAAI/AAAAAAAABFE/v8lpqfero1M/photo.jpg?sz=128", "display_name": "Haroun Hajem", "link": "https://stackoverflow.com/users/5148795/haroun-hajem"}, "reply_to_user": {"reputation": 996, "user_id": 6704320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb8cbdc379bfa97bee49eb731e601134?s=128&d=identicon&r=PG&f=1", "display_name": "phoebus", "link": "https://stackoverflow.com/users/6704320/phoebus"}, "edited": false, "score": 0, "creation_date": 1542102282, "post_id": 53270669, "comment_id": 93438099, "body": "This should work in Oreo in my experience. I did <code>mount -o rw,remount &#47;system</code> all the time"}], "tags": [], "owner": {"reputation": 3014, "user_id": 5148795, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PC5b4qkB2x8/AAAAAAAAAAI/AAAAAAAABFE/v8lpqfero1M/photo.jpg?sz=128", "display_name": "Haroun Hajem", "link": "https://stackoverflow.com/users/5148795/haroun-hajem"}, "is_accepted": false, "score": 1, "last_activity_date": 1542059722, "creation_date": 1542059722, "answer_id": 53270669, "question_id": 53270330, "link": "https://stackoverflow.com/questions/53270330/android-uninstall-other-system-app-as-system-app/53270669#53270669", "title": "Android - uninstall other system app as system app", "body": "<ol>\n<li><p>Don't you need to be a rooted device to uninstall <code>System apps</code>, or have you found a way to do this without any rooting?</p></li>\n<li><p>You must <code>remount</code> the system, since you run SELinux, to be able to rearrange the locked files in the system.</p></li>\n</ol>\n\n<p>3.You can run this code in your app instead </p>\n\n<pre><code>try{\n Process su = Runtime.getRuntime().exec(\"su\");\n DataOutputStream outputStream = new DataOutputStream(su.getOutputStream());\n\n outputStream.writeBytes(\"pm uninstall com.package.name\");\n outputStream.flush();\n outputStream.writeBytes(\"exit\\n\");\n outputStream.flush();\n su.waitFor();\n}catch(IOException e){\n throw new Exception(e);\n}catch(InterruptedException e){\n throw new Exception(e);\n}\n</code></pre>\n\n<p>if <code>pm uninstall</code> doesn't work, use the <code>rm -rf path/deletefolder</code> then reboot the system</p>\n"}], "owner": {"reputation": 996, "user_id": 6704320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb8cbdc379bfa97bee49eb731e601134?s=128&d=identicon&r=PG&f=1", "display_name": "phoebus", "link": "https://stackoverflow.com/users/6704320/phoebus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542059722, "creation_date": 1542057870, "question_id": 53270330, "link": "https://stackoverflow.com/questions/53270330/android-uninstall-other-system-app-as-system-app", "title": "Android - uninstall other system app as system app", "body": "<p>My app is running as a system app on a custom AOSP image. I am able to uninstall/install other APKs that I'm downloading from my backend. However, I cannot uninstall other system apps (which is a hard requirement for my purpose). My current mechanism is to use the deletePackage mechanism from the Android package manager via reflection:</p>\n\n<pre><code>val cPackageManager = Class.forName(\"android.content.pm.PackageManager\")\ncPackageDeleteObserver = Class.forName(\"android.content.pm.IPackageDeleteObserver\")\ndeletePackage = cPackageManager.getMethod(\"deletePackage\", String::class.java, cPackageDeleteObserver, Integer.TYPE)\ndeletePackage!!.invoke(context.packageManager, packageName, deleteObserver, DELETE_ALL_USERS)\n</code></pre>\n\n<p>Does anybody know how to achieve what I'm trying to do?</p>\n"}, {"tags": ["kotlin", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 1603, "user_id": 1412973, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l72dW.jpg?s=128&g=1", "display_name": "colintheshots", "link": "https://stackoverflow.com/users/1412973/colintheshots"}, "is_accepted": false, "score": 5, "last_activity_date": 1542126292, "last_edit_date": 1542126292, "creation_date": 1542124931, "answer_id": 53284917, "question_id": 53270280, "link": "https://stackoverflow.com/questions/53270280/i-tried-to-use-kotlin-coroutine-channels-and-got-an-obsoletecoroutinesapi-warnin/53284917#53284917", "title": "I tried to use Kotlin Coroutine Channels and got an ObsoleteCoroutinesApi warning. Where is the replacement?", "body": "<p>As of today, no replacement yet exists for the Kotlin Coroutine Channels API. Despite confusing naming, they added this annotation to indicate that the existing API is being rewritten and will be replaced.</p>\n\n<p>It's a warning that you can accept. If you have <code>kotlinOptions.allWarningsAsErrors = true</code> stopping you from building your app, you can simply add the <code>@ObsoleteCoroutinesApi</code> annotation to the top of the class to indicate that you accept the risk that your code will require changes.</p>\n\n<p>However, this may quickly spiral out of control as you need to apply these markers to every class that uses these APIs and then every dependency that uses those classes, ad infinitum. To accept these risks project-wide, add the following to your gradle options:</p>\n\n<pre><code>    kotlinOptions.freeCompilerArgs += [\n            \"-Xuse-experimental=kotlinx.coroutines.ExperimentalCoroutinesApi\",\n            \"-Xuse-experimental=kotlinx.coroutines.ObsoleteCoroutinesApi\"]\n</code></pre>\n\n<p>Feel free to update this answer when a replacement API exists.</p>\n"}], "owner": {"reputation": 1603, "user_id": 1412973, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l72dW.jpg?s=128&g=1", "display_name": "colintheshots", "link": "https://stackoverflow.com/users/1412973/colintheshots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1598, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1542126292, "creation_date": 1542057583, "last_edit_date": 1542124998, "question_id": 53270280, "link": "https://stackoverflow.com/questions/53270280/i-tried-to-use-kotlin-coroutine-channels-and-got-an-obsoletecoroutinesapi-warnin", "title": "I tried to use Kotlin Coroutine Channels and got an ObsoleteCoroutinesApi warning. Where is the replacement?", "body": "<p>I tried to use Kotlin's coroutine channels, but got a warning about the code using an ObsoleteCoroutinesApi. Where is the replacement for the deprecated channels code?</p>\n"}, {"tags": ["java", "android", "json", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3498, "user_id": 6801443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cba631e2b30cf9b6b8fa433996ef1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean F", "link": "https://stackoverflow.com/users/6801443/sean-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1547003077, "creation_date": 1547003077, "answer_id": 54102704, "question_id": 53269518, "link": "https://stackoverflow.com/questions/53269518/javax-json-bind-with-android-issues/54102704#54102704", "title": "Javax.json.bind with Android issues", "body": "<p>The module-info is used only with Java 9 and up for the new \"Jigsaw\" module feature added with Java 9:\n<a href=\"https://www.oracle.com/corporate/features/understanding-java-9-modules.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/corporate/features/understanding-java-9-modules.html</a></p>\n\n<p>AFAIK Android does not yet support Java 9, but does support most, if not all, of Java 8. \n<a href=\"https://stackoverflow.com/questions/47627499/does-android-studio-3-support-java-9-for-android-development-if-so-what-featur\">Does Android Studio 3 support Java 9 for Android development? If so, what features of Java 9 are supported?</a></p>\n\n<p>You can delete the compiled file module-info.class, it doesn't need to be there when not using modules.  You will find it inside the jar file javax.json.bind-api-1.0.jar, and you can remove it using any zip file or jar tool like winzip, winrar, gzip, zip, or jar.</p>\n"}], "owner": {"reputation": 300, "user_id": 4165384, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9ZleR.jpg?s=128&g=1", "display_name": "Damien Cooke", "link": "https://stackoverflow.com/users/4165384/damien-cooke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547003077, "creation_date": 1542054076, "question_id": 53269518, "link": "https://stackoverflow.com/questions/53269518/javax-json-bind-with-android-issues", "title": "Javax.json.bind with Android issues", "body": "<p>Hi all I am trying to use javax.json-b with Android and getting errors.  So I include the library in gradle using this line:</p>\n\n<p>implementation group: 'javax.json.bind', name: 'javax.json.bind-api', version: '1.0'</p>\n\n<p>Then import it the usual way:</p>\n\n<p>import javax.json.bind.annotation.JsonbProperty</p>\n\n<p>Compiles fine but when I run it on any device it gives me this:  </p>\n\n<p>../../../home/.gradle/caches/modules-2/files-2.1/javax.json.bind/javax.json.bind-api/1.0/10332203cb05f4ab2e8bf058bfd7d99648c5ca68/javax.json.bind-api-1.0.jar<br>\nIllegal class file: Class module-info is missing a super type.  </p>\n\n<p>So I cleared the gradle cache incase it was a bad version, same happened, I removed the import implementation line from the build.gradle file and downloaded the jar from the maven repository but I got a similar issue.</p>\n\n<p>I thought initially that this means the Java version on the Android phone is incompatible with the version the jar was compiled for.  But I am less convinced of that now I think it is something else.  Can anyone shed some light on this for me please?</p>\n\n<p>Damien</p>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "answers": [{"tags": [], "owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "is_accepted": true, "score": 0, "last_activity_date": 1542551419, "last_edit_date": 1542551419, "creation_date": 1542282895, "answer_id": 53318949, "question_id": 53268277, "link": "https://stackoverflow.com/questions/53268277/databinding-in-a-kotlin-project/53318949#53318949", "title": "DataBinding in a Kotlin project", "body": "<p>Problem will be solved by creating following method as a Kotlin file in the project :</p>\n\n<pre><code>  @BindingAdapter(\"visibleGone\")\n  fun View.visibleGone(visible: Boolean) {\n      visibility = if (visible) View.VISIBLE else View.GONE\n  }\n</code></pre>\n"}], "owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 53318949, "answer_count": 1, "score": 1, "last_activity_date": 1542551419, "creation_date": 1542048310, "last_edit_date": 1542058309, "question_id": 53268277, "link": "https://stackoverflow.com/questions/53268277/databinding-in-a-kotlin-project", "title": "DataBinding in a Kotlin project", "body": "<p>Addenda :</p>\n\n<p>I realize problem is related to :</p>\n\n<pre><code>app:visibleGone=\"@{isLoaded}\"\n</code></pre>\n\n<p>in the following layout :</p>\n\n<pre><code>&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"&gt;\n\n    &lt;data&gt;\n        &lt;variable\n            name=\"isLoaded\"\n            type=\"boolean\" /&gt;\n    &lt;/data&gt;\n\n    &lt;FrameLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".ui.MainActivity\"&gt;\n\n        &lt;android.support.v4.widget.SwipeRefreshLayout\n            android:id=\"@+id/swipe_refresh\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"&gt;\n\n            &lt;android.support.v7.widget.RecyclerView\n                android:id=\"@+id/list\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                app:visibleGone=\"@{isLoaded}\" /&gt;\n\n        &lt;/android.support.v4.widget.SwipeRefreshLayout&gt;\n\n        &lt;include\n            layout=\"@layout/network_state_item\"\n            app:visibleGone=\"@{!isLoaded}\" /&gt;\n\n    &lt;/FrameLayout&gt;\n\n&lt;/layout&gt;\n</code></pre>\n\n<p>I have following branch in Bitbucket : <a href=\"https://bitbucket.org/ali-rezaei/tmdb/src/dataBinding/\" rel=\"nofollow noreferrer\">https://bitbucket.org/ali-rezaei/tmdb/src/dataBinding/</a></p>\n\n<p>I get following <code>Kotlin compiler</code> error when I build the project : </p>\n\n<pre><code>e: [kapt] An exception occurred: android.databinding.tool.util.LoggedErrorException: Found data binding errors.\n</code></pre>\n\n<p>I appreciate if you can help me out.</p>\n\n<p>Here is my project build.gradle : </p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.60'\n    ext.gradle_version = '3.1.4'\n    repositories {\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath \"com.android.tools.build:gradle:$gradle_version\"\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n</code></pre>\n\n<p>And here is my app build.gradle : </p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\napply plugin: 'kotlin-kapt'\n\nandroidExtensions {\n    experimental = true\n}\n\nandroid {\n    compileSdkVersion rootProject.ext.compileSdkVersion\n    defaultConfig {\n        applicationId \"com.sample.android.tmdb\"\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        versionCode 1\n        versionName \"1.0\"\n\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n\n        dataBinding {\n            enabled = true\n        }\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    // Support libraries\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation \"com.android.support:appcompat-v7:$rootProject.supportLibraryVersion\"\n    implementation \"com.android.support:design:$rootProject.supportLibraryVersion\"\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    implementation \"com.android.support:recyclerview-v7:$rootProject.supportLibraryVersion\"\n\n    // Architecture components\n    implementation \"android.arch.paging:runtime:$rootProject.paging\"\n    implementation \"android.arch.lifecycle:runtime:$rootProject.lifecycle\"\n    implementation \"android.arch.lifecycle:extensions:$rootProject.lifecycle\"\n\n    //DataBinding\n    kapt \"com.android.databinding:compiler:$gradle_version\"\n\n    //Gson\n    implementation 'com.google.code.gson:gson:2.8.2'\n\n    //Retrofit\n    implementation \"com.squareup.retrofit2:retrofit:$rootProject.retrofitVersion\"\n    implementation \"com.squareup.retrofit2:adapter-rxjava2:$rootProject.retrofitVersion\"\n    implementation \"com.squareup.retrofit2:converter-gson:$rootProject.retrofitVersion\"\n\n    //Dagger\n    implementation \"com.google.dagger:dagger:$rootProject.daggerVersion\"\n    kapt \"com.google.dagger:dagger-compiler:$rootProject.daggerVersion\"\n    compileOnly 'org.glassfish:javax.annotation:10.0-b28'\n    implementation \"com.google.dagger:dagger-android:$rootProject.daggerVersion\"\n    implementation \"com.google.dagger:dagger-android-support:$rootProject.daggerVersion\"\n    kapt \"com.google.dagger:dagger-android-processor:$rootProject.daggerVersion\"\n\n    // Network\n    implementation 'com.squareup.okhttp3:logging-interceptor:3.10.0'\n    implementation \"com.github.bumptech.glide:glide:$rootProject.glideVersion\"\n    kapt \"com.github.bumptech.glide:compiler:$rootProject.glideVersion\"\n\n    //Butter knife\n    implementation \"com.jakewharton:butterknife:$rootProject.butterknifeVersion\"\n    kapt \"com.jakewharton:butterknife-compiler:$rootProject.butterknifeVersion\"\n\n    //Timber\n    implementation 'com.jakewharton.timber:timber:4.5.1'\n\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n}\n</code></pre>\n\n<p>As a sample you can look at : <a href=\"https://www.moveoapps.com/blog/how-to-use-data-binding-library-with-kotlin-a-step-by-step-guide/\" rel=\"nofollow noreferrer\">https://www.moveoapps.com/blog/how-to-use-data-binding-library-with-kotlin-a-step-by-step-guide/</a></p>\n"}, {"tags": ["object", "kotlin", "nested"], "comments": [{"owner": {"reputation": 2377, "user_id": 1160959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2c84b77b3b8d07e85f5c7b9e3cdcaa?s=128&d=identicon&r=PG", "display_name": "asm0dey", "link": "https://stackoverflow.com/users/1160959/asm0dey"}, "edited": false, "score": 0, "creation_date": 1542049270, "post_id": 53267761, "comment_id": 93420820, "body": "I think you&#39;re looking for reflextion. <a href=\"https://kotlinlang.org/docs/reference/reflection.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/reflection.html</a> It&#39;s not dymanimacally-typed language where everything is map, so you&#39;ll need to find field with reflection."}, {"owner": {"reputation": 31, "user_id": 7524558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e0f34faaf87e54fb339b31328a81ec?s=128&d=identicon&r=PG&f=1", "display_name": "Osolemio", "link": "https://stackoverflow.com/users/7524558/osolemio"}, "reply_to_user": {"reputation": 2377, "user_id": 1160959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2c84b77b3b8d07e85f5c7b9e3cdcaa?s=128&d=identicon&r=PG", "display_name": "asm0dey", "link": "https://stackoverflow.com/users/1160959/asm0dey"}, "edited": false, "score": 0, "creation_date": 1542049547, "post_id": 53267761, "comment_id": 93420931, "body": "Yep, I c. That would be like val name = p.javaClass.kotlin.memberProperties.first { it.name == &quot;name&quot; }.get(p)"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 7524558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e0f34faaf87e54fb339b31328a81ec?s=128&d=identicon&r=PG&f=1", "display_name": "Osolemio", "link": "https://stackoverflow.com/users/7524558/osolemio"}, "is_accepted": false, "score": 0, "last_activity_date": 1542050948, "creation_date": 1542050948, "answer_id": 53268853, "question_id": 53267761, "link": "https://stackoverflow.com/questions/53267761/kotlin-how-to-access-nested-object-or-property-by-var/53268853#53268853", "title": "Kotlin: How to access nested object or property by var?", "body": "<p>Taken from <a href=\"https://stackoverflow.com/questions/35525122/kotlin-data-class-how-to-read-the-value-of-property-if-i-dont-know-its-name-at\">here</a></p>\n\n<p>Using the reflection. Don't forget to add the dependency.\nGlobal inline extension fun for Any:</p>\n\n<pre><code> inline fun &lt;reified T : Any&gt; Any.getThroughReflection(propertyName: String): T? {\n    val getterName = \"get\" + propertyName.capitalize()\n    return try {\n        javaClass.getMethod(getterName).invoke(this) as? T\n    } catch (e: NoSuchMethodException) {\n        null\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7524558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e0f34faaf87e54fb339b31328a81ec?s=128&d=identicon&r=PG&f=1", "display_name": "Osolemio", "link": "https://stackoverflow.com/users/7524558/osolemio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 512, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542050948, "creation_date": 1542046029, "last_edit_date": 1542048324, "question_id": 53267761, "link": "https://stackoverflow.com/questions/53267761/kotlin-how-to-access-nested-object-or-property-by-var", "title": "Kotlin: How to access nested object or property by var?", "body": "<p>Is there a native way in kotlin to access a nested complex object (parsed from JSON string) through a variable?</p>\n\n<p>Smth similar to: </p>\n\n<pre><code>   var = \"Obj4\"\n    a = Obj1.Obj2.Obj3.$var.Obj5.Array[index]\n</code></pre>\n\n<p>Thanks a lot in advance</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 17304, "user_id": 3363481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4HU5.png?s=128&g=1", "display_name": "earthw0rmjim", "link": "https://stackoverflow.com/users/3363481/earthw0rmjim"}, "edited": false, "score": 0, "creation_date": 1542083744, "post_id": 53266920, "comment_id": 93430476, "body": "Are you inserting in a loop? Show the full code for the insertion, not just a snippet."}, {"owner": {"reputation": 8316, "user_id": 1616317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4533abb0fab9a5a284c2cdcb40512e85?s=128&d=identicon&r=PG&f=1", "display_name": "karan", "link": "https://stackoverflow.com/users/1616317/karan"}, "edited": false, "score": 0, "creation_date": 1542112808, "post_id": 53266920, "comment_id": 93444046, "body": "you are assigning id to your itemview which is not needed as it will be auto generated, remove that code and try."}, {"owner": {"reputation": 176, "user_id": 7334752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d4010800854bfbc4425a091330aaad7?s=128&d=identicon&r=PG&f=1", "display_name": "tmath", "link": "https://stackoverflow.com/users/7334752/tmath"}, "reply_to_user": {"reputation": 8316, "user_id": 1616317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4533abb0fab9a5a284c2cdcb40512e85?s=128&d=identicon&r=PG&f=1", "display_name": "karan", "link": "https://stackoverflow.com/users/1616317/karan"}, "edited": false, "score": 0, "creation_date": 1542117412, "post_id": 53266920, "comment_id": 93446836, "body": "@KaranMer Where is that happening? This code assigns the return value of the insert to <code>id</code>, which is the ID of the inserted item."}, {"owner": {"reputation": 8316, "user_id": 1616317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4533abb0fab9a5a284c2cdcb40512e85?s=128&d=identicon&r=PG&f=1", "display_name": "karan", "link": "https://stackoverflow.com/users/1616317/karan"}, "edited": false, "score": 0, "creation_date": 1542117546, "post_id": 53266920, "comment_id": 93446932, "body": "yes you are right, can you directly log what <code>mDb?.itemDataDao()?.insert(itemData)</code> returns without assigning variable to it?"}, {"owner": {"reputation": 176, "user_id": 7334752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d4010800854bfbc4425a091330aaad7?s=128&d=identicon&r=PG&f=1", "display_name": "tmath", "link": "https://stackoverflow.com/users/7334752/tmath"}, "edited": false, "score": 0, "creation_date": 1542152759, "post_id": 53266920, "comment_id": 93463895, "body": "The same thing happens but 1 is the id that keeps getting inserted each time."}], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 7334752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d4010800854bfbc4425a091330aaad7?s=128&d=identicon&r=PG&f=1", "display_name": "tmath", "link": "https://stackoverflow.com/users/7334752/tmath"}, "edited": false, "score": 0, "creation_date": 1542056445, "post_id": 53269524, "comment_id": 93423754, "body": "Could you explain more? I already have autoGenerate on the column."}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 0, "last_activity_date": 1542054090, "creation_date": 1542054090, "answer_id": 53269524, "question_id": 53266920, "link": "https://stackoverflow.com/questions/53266920/room-database-inserted-id-is-always-0/53269524#53269524", "title": "Room database: inserted ID is always 0", "body": "<p>you'd to add an auto-increment column:</p>\n\n<pre><code>@Entity(tableName = \"item_data\")\npublic class ItemData extends BaseObservable {\n\n    /** Fields */\n    @ColumnInfo(name = \"item_id\")\n    @PrimaryKey(autoGenerate = true)\n    private int itemId;\n\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 7334752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d4010800854bfbc4425a091330aaad7?s=128&d=identicon&r=PG&f=1", "display_name": "tmath", "link": "https://stackoverflow.com/users/7334752/tmath"}, "is_accepted": true, "score": 1, "last_activity_date": 1542235677, "creation_date": 1542235677, "answer_id": 53309878, "question_id": 53266920, "link": "https://stackoverflow.com/questions/53266920/room-database-inserted-id-is-always-0/53309878#53309878", "title": "Room database: inserted ID is always 0", "body": "<p>The following changes fixed the issue.</p>\n\n<p>Instead of calling the constructor like this</p>\n\n<pre><code>var itemData = ItemData(text = text, checked = false)\n</code></pre>\n\n<p>I called the default constructor and then set the parameters after construction.</p>\n\n<pre><code>var itemData = ItemData()\nitemData.text = text\nitemData.checked = false\n</code></pre>\n\n<p>This required the following constructor to the ItemData entity:</p>\n\n<pre><code>constructor():this(null,\"\",false)\n</code></pre>\n"}], "owner": {"reputation": 176, "user_id": 7334752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d4010800854bfbc4425a091330aaad7?s=128&d=identicon&r=PG&f=1", "display_name": "tmath", "link": "https://stackoverflow.com/users/7334752/tmath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2256, "favorite_count": 1, "accepted_answer_id": 53309878, "answer_count": 2, "score": 3, "last_activity_date": 1542235677, "creation_date": 1542042389, "last_edit_date": 1542112230, "question_id": 53266920, "link": "https://stackoverflow.com/questions/53266920/room-database-inserted-id-is-always-0", "title": "Room database: inserted ID is always 0", "body": "<p>I am trying to create a Room database of list items. I am following the example here: <a href=\"https://medium.com/mindorks/room-kotlin-android-architecture-components-71cad5a1bb35\" rel=\"nofollow noreferrer\">https://medium.com/mindorks/room-kotlin-android-architecture-components-71cad5a1bb35</a></p>\n\n<p>Here is my data class:</p>\n\n<pre><code>@Entity(tableName = \"itemData\")\ndata class ItemData(@PrimaryKey(autoGenerate = true) var id: Long? = null,\n                    @ColumnInfo(name = \"text\") var text: String,\n                    @ColumnInfo(name = \"checked\") var checked: Boolean\n\n)\n</code></pre>\n\n<p>The DAO:</p>\n\n<pre><code>@Dao\ninterface ItemDataDAO {\n\n    @Insert(onConflict = REPLACE)\n    fun insert(itemData: ItemData) : Long\n}\n</code></pre>\n\n<p>The database:</p>\n\n<pre><code>@Database(entities = arrayOf(ItemData::class), version = 1)\nabstract class ItemDatabase() : RoomDatabase() {\n\n\n    abstract fun itemDataDao(): ItemDataDAO\n\n    companion object {\n        private var INSTANCE: ItemDatabase? = null\n\n        fun getInstance(context: Context): ItemDatabase? {\n            if (INSTANCE == null) {\n                synchronized(ItemDatabase::class) {\n                    INSTANCE = Room.databaseBuilder(context.getApplicationContext(),\n                            ItemDatabase::class.java, \"items.db\")\n                            .build()\n                }\n            }\n            return INSTANCE\n        }\n\n        fun destroyInstance() {\n            INSTANCE = null\n        }\n    }\n}\n</code></pre>\n\n<p>Worker thread:</p>\n\n<pre><code>class DbWorkerThread(threadName: String) : HandlerThread(threadName) {\n\n    private lateinit var mWorkerHandler: Handler\n\n    override fun onLooperPrepared() {\n        super.onLooperPrepared()\n        mWorkerHandler = Handler(looper)\n    }\n\n    fun postTask(task: Runnable) {\n        mWorkerHandler.post(task)\n    }\n}\n</code></pre>\n\n<p>Here is the listener than calls the insert function:</p>\n\n<pre><code>editText.setOnEditorActionListener { v, actionId, event -&gt;\n    return@setOnEditorActionListener when (actionId) {\n        EditorInfo.IME_ACTION_DONE -&gt; {\n            createItem(editText)\n            true\n        }\n        else -&gt; false\n    }\n}\n</code></pre>\n\n<p>Here is the function that gets called to insert the item:</p>\n\n<pre><code>fun createItem(editText: EditText) {\n    var text = editText.text.toString().trim()\n    var itemData = ItemData(text = text, checked = false)\n    var id : Long? = 0\n    val task = Runnable {\n        id = mDb?.itemDataDao()?.insert(itemData)\n        println(\"inserted $id\")\n    }\n    mDbWorkerThread.postTask(task)\n}\n</code></pre>\n\n<p>But the ID is always 0 so only one item ever gets inserted. Can anyone see the problem? </p>\n\n<p>I have also tried removing the default <code>null</code> value for the <code>id</code>, but it gives the same result.</p>\n"}, {"tags": ["android", "json", "kotlin", "gson"], "comments": [{"owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "edited": false, "score": 0, "creation_date": 1542040902, "post_id": 53266370, "comment_id": 93417102, "body": "Can you post your method <code>retrieveForecast</code> and what calls it? That seems to be what the stacktrace is referring to"}], "answers": [{"tags": [], "owner": {"reputation": 7362, "user_id": 972671, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d60679aa1bf8f8400d3953e7dc78d2db?s=128&d=identicon&r=PG", "display_name": "Kingfisher Phuoc", "link": "https://stackoverflow.com/users/972671/kingfisher-phuoc"}, "is_accepted": false, "score": 4, "last_activity_date": 1542041098, "creation_date": 1542041098, "answer_id": 53266577, "question_id": 53266370, "link": "https://stackoverflow.com/questions/53266370/java-lang-illegalargumentexception-parameter-specified-as-non-null-is-null-whil/53266577#53266577", "title": "java.lang.IllegalArgumentException: Parameter specified as non-null is null while parsing JSON to kotlin Data class", "body": "<p>this is your issue <code>Parameter specified as non-null is null</code>. All your data classes are declared with <code>non-null parameter constructor</code>. However, in parsing JSON process, there's a null parameter --> that made the crash. To solve this issue, you should declare constructor parameters as nullable as below:</p>\n\n<pre><code>data class Current(@SerializedName(\"coord\") val location: Location?,\n      @SerializedName(\"weather\") val weather: List&lt;Weather&gt;?,\n      @SerializedName(\"main\") val temperatureAndPressure: TemperatureAndPressure?,\n      @SerializedName(\"wind\") val wind: Wind?,\n      @SerializedName(\"dt\") val timeStamp: Long?,\n      @SerializedName(\"name\") val placeName: String?) {\n// your CurrentWeather class should be the same. \n// Of course, if you are sure with non-null parameters, you should make them non-null.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2105, "user_id": 1909309, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/zBBmU.jpg?s=128&g=1", "display_name": "Wubbalubbadubdub", "link": "https://stackoverflow.com/users/1909309/wubbalubbadubdub"}, "is_accepted": true, "score": 0, "last_activity_date": 1542101834, "last_edit_date": 1542101834, "creation_date": 1542101278, "answer_id": 53277747, "question_id": 53266370, "link": "https://stackoverflow.com/questions/53266370/java-lang-illegalargumentexception-parameter-specified-as-non-null-is-null-whil/53277747#53277747", "title": "java.lang.IllegalArgumentException: Parameter specified as non-null is null while parsing JSON to kotlin Data class", "body": "<p>I believe if you follow the above solution by making your variable nullable type won't solve your problem.\nIn your case problem lies in JSON parse for this case Gson itself. First of all, Gson has no native support for Kotlin data class. I would suggest you read through this article <a href=\"https://proandroiddev.com/most-elegant-way-of-using-gson-kotlin-with-default-values-and-null-safety-b6216ac5328c\" rel=\"nofollow noreferrer\">GSON+KOTLIN</a>. \nA short summary of this writing is </p>\n\n<ol>\n<li>This is especially awful when we consider the assumption of null-safety by the developer when using non-nullable types. It will result in a NullPointerException at runtime with no hints by the IDE about possible nullability. We won\u2019t even get an exception while parsing, because Gson uses unsafe reflection and Java has no concept of the non-nullable types.</li>\n<li>One way of dealing with this is giving in and making everything nullable, just like the answer suggested by @Kingfisher Phuoc. Unfortunately, that won't just make the code run. The reason is your member variable <code>val currentWeather</code> which is an instance of the data class and Gson which uses reflect can't instantiate it from deserialised JSON, hence it will be null even if you parse the member variables for <code>data class Current</code> correctly.</li>\n</ol>\n\n<p>My suggestion would be a switch to <a href=\"https://medium.com/square-corner-blog/moshi-another-json-processor-624f8741f703\" rel=\"nofollow noreferrer\">Moshi</a>, which has a built-in support for Kotlin.On the contrary, if you are an extreme fan of Gson, you need to follow this workaround with help of default value and making variables null type. For this, we basically have the constructor arguments be private backing properties. We then provide a read-only property for each backing field with the real name and use the custom get() = combined with the Elvis operator to define our default value or behavior, resulting in non-nullable return values.</p>\n\n<pre><code>data class Current(@SerializedName(\"coord\") val _location: Location?,\n      @SerializedName(\"weather\") val _weather: List&lt;Weather&gt;?,\n      @SerializedName(\"main\") val _temperatureAndPressure: TemperatureAndPressure?,\n      @SerializedName(\"wind\") val _wind: Wind?,\n      @SerializedName(\"dt\") val _timeStamp: Long?, = 0.0\n      @SerializedName(\"name\") val _placeName: String? = \"\") {\n\n\nval location\n   get() = _location ?: throw IllegalArgumentException(\"Location is required\")\nval weather\n   get() = _weather ?: throw IllegalArgumentException(\"Title is required\")\nval wind\n   get() = _wind ?: throw IllegalArgumentException(\"Title is required\")\nval temperatureAndPressure\n   get() = _temperatureAndPressure ?: throw IllegalArgumentException(\"Title is required\")\n......and so on\n\n\n\nval time: Instant by fastLazy { Instant.ofEpochSecond(timeStamp) }\n\n\nval currentWeather = CurrentWeather(location.latitude,\n    location.longitude,\n    placeName,\n    temperatureAndPressure.temperature,\n    temperatureAndPressure.maxTemperature,\n    temperatureAndPressure.minTemperature,\n    wind.windSpeed ?: 0f,\n    wind.windAngle ?: 0f,\n    weather[0].main,\n    weather[0].description,\n    weather[0].icon,\n    time)\n}\n</code></pre>\n\n<p><strong>In my opinion, in these days of Kotlin ruling world Gson hasn't been able to keep up the pace. If you are just doing this project just for sake of learning, you should definitely use Moshi.</strong> it has <code>KotlinJsonAdapterFactory</code> which has out-of-the-box support for JSON </p>\n"}], "owner": {"reputation": 94, "user_id": 7026730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a9e3a9baa8efb9acf9dac94ccc15c10?s=128&d=identicon&r=PG&f=1", "display_name": "PuchkaIndur", "link": "https://stackoverflow.com/users/7026730/puchkaindur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 0, "accepted_answer_id": 53277747, "answer_count": 2, "score": 1, "last_activity_date": 1542101834, "creation_date": 1542040253, "last_edit_date": 1549310398, "question_id": 53266370, "link": "https://stackoverflow.com/questions/53266370/java-lang-illegalargumentexception-parameter-specified-as-non-null-is-null-whil", "title": "java.lang.IllegalArgumentException: Parameter specified as non-null is null while parsing JSON to kotlin Data class", "body": "<p>After kotlin being the first language for android, I have devoted myself into it. With a little progress over the days I have been migrating my existing knowledge to kotlin. Recently, I am learning how to use GSON, Retrofit and kotlin in a dummy project. </p>\n\n<p>Here <code>CurrentWeather</code> is the model which shows data in a view</p>\n\n<pre><code>data class CurrentWeather(\n    val latitude: Double,\n    val longitude: Double,\n    val placeName: String,\n    val temperature: Float,\n    val maxTemperature: Float,\n    val minTemperature: Float,\n    val windSpeed: Float,\n    val windDirection: Float,\n    val weatherType: String,\n    val weatherDescription: String,\n    val icon: String,\n    val timestamp: Instant)\n</code></pre>\n\n<p>class <code>Current</code> is responsible to parse the JSON to POJO class just like I did in the past, but today it just looks a little different for using kotlin</p>\n\n<pre><code>data class Current(@SerializedName(\"coord\") val location: Location,\n          @SerializedName(\"weather\") val weather: List&lt;Weather&gt;,\n          @SerializedName(\"main\") val temperatureAndPressure: TemperatureAndPressure,\n          @SerializedName(\"wind\") val wind: Wind,\n          @SerializedName(\"dt\") val timeStamp: Long,\n          @SerializedName(\"name\") val placeName: String) {\n\nval time: Instant by fastLazy { Instant.ofEpochSecond(timeStamp) }\n\n\nval currentWeather = CurrentWeather(location.latitude,\n        location.longitude,\n        placeName,\n        temperatureAndPressure.temperature,\n        temperatureAndPressure.maxTemperature,\n        temperatureAndPressure.minTemperature,\n        wind.windSpeed ?: 0f,\n        wind.windAngle ?: 0f,\n        weather[0].main,\n        weather[0].description,\n        weather[0].icon,\n        time)\n }\n</code></pre>\n\n<p>Even if I get a successful response from retrofit(I have checked the members variables; such as location: Location, weather: List, temperatureAndPressure: TemperatureAndPressure etc. However, I am getting this error.</p>\n\n<blockquote>\n  <p>2018-11-12 21:04:07.455 9948-9948/bus.green.fivedayweather E/AndroidRuntime: FATAL EXCEPTION: main\n      Process: bus.green.fivedayweather, PID: 9948\n      java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter p1\n          at bus.green.fivedayweather.ui.CurrentWeatherFragment$retrieveForecast$1.invoke(Unknown Source:6)\n          at bus.green.fivedayweather.ui.CurrentWeatherFragment$retrieveForecast$1.invoke(CurrentWeatherFragment.kt:20)\n          at bus.green.fivedayweather.net.OpenWeatherMapProvider$RetrofitCallbackWrapper.onResponse(OpenWeatherMapProvider.kt:62)</p>\n</blockquote>\n\n<p>Am I doing anything wrong in parsing?</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 2238, "user_id": 5722607, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5664a85b22ab45a9bf6fe96299701f92?s=128&d=identicon&r=PG&f=1", "display_name": "Boris van Katwijk", "link": "https://stackoverflow.com/users/5722607/boris-van-katwijk"}, "edited": false, "score": 1, "creation_date": 1542040380, "post_id": 53266336, "comment_id": 93416788, "body": "isn&#39;t kotlin bytecode the same as JVM bytecode?"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1542040829, "post_id": 53266336, "comment_id": 93417056, "body": "No, since Kotlin depends on the Kotlin stdlib (which includes some nice extra utility functions and classes not found in Java). The compiled classes themselves should work, given that the stdlib is on the classpath (i.e. embedded in a .jar for example), but in the environment you suggest, probably not."}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 0, "creation_date": 1542051424, "post_id": 53266336, "comment_id": 93421690, "body": "If you can compile Kotlin, then you should be able to run it as well. Can you elaborate on what environment this might not hold?"}, {"owner": {"reputation": 202, "user_id": 6180554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hrvu_iz-_ks/AAAAAAAAAAI/AAAAAAAAAB0/ogWbvUPcaks/photo.jpg?sz=128", "display_name": "lightsing", "link": "https://stackoverflow.com/users/6180554/lightsing"}, "edited": false, "score": 0, "creation_date": 1542081282, "post_id": 53266336, "comment_id": 93429939, "body": "If Leetcode doesn&#39;t support Kotlin, I can only submit Java code in this case. How to use Kotlin in this case?"}], "owner": {"reputation": 202, "user_id": 6180554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hrvu_iz-_ks/AAAAAAAAAAI/AAAAAAAAAB0/ogWbvUPcaks/photo.jpg?sz=128", "display_name": "lightsing", "link": "https://stackoverflow.com/users/6180554/lightsing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542040140, "creation_date": 1542040140, "question_id": 53266336, "link": "https://stackoverflow.com/questions/53266336/is-it-possible-to-translate-kotlin-to-java-without-kotlin-libraries", "title": "Is it possible to translate Kotlin to Java without Kotlin libraries?", "body": "<p>Is it possible to translate Kotlin to Java without Kotlin libraries?\nSome environments can only run standard Java files (some acm online judgments for example). Is it possible using Kotlin in this kind case?</p>\n\n<p>I tried using decompile Kotlin byte code, but most cases it imports Kotlin's libraries (<code>import kotlin.collections.CollectionsKt;</code> for example). Can it be translated to pure Java?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1542038662, "post_id": 53265785, "comment_id": 93415806, "body": "Check docs on <code>reified</code>, might be useful for you"}, {"owner": {"reputation": 1104, "user_id": 3271729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d90fc036972c653f06e511ebe6bbdf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Scullion", "link": "https://stackoverflow.com/users/3271729/eamon-scullion"}, "edited": false, "score": 0, "creation_date": 1542038678, "post_id": 53265785, "comment_id": 93415814, "body": "What is the error?"}], "owner": {"user_type": "does_not_exist", "display_name": "user5699130"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1542039018, "answer_count": 0, "score": 1, "last_activity_date": 1542038256, "creation_date": 1542038256, "question_id": 53265785, "link": "https://stackoverflow.com/questions/53265785/get-class-from-generic-in-kotlin", "closed_reason": "Duplicate", "title": "Get class from generic in Kotlin", "body": "<p>In my Kotlin project, I have the following class:</p>\n\n<pre><code>class NewTest {\n    @Rule\n    @JvmField\n    var activityTestRule: ActivityTestRule&lt;NewActivity&gt; =\n        ActivityTestRule(NewActivity::class.java, false, false)\n    .....\n}\n</code></pre>\n\n<p>as the activity <code>rule</code> will be used in most of my test, I decided to write something like:</p>\n\n<pre><code>class BaseTestClass&lt;T&gt; {\n    @Rule\n    @JvmField\n    var activityTestRule: ActivityTestRule&lt;T&gt; =\n        ActivityTestRule(T::class.java, false, false)\n    .....\n}\n</code></pre>\n\n<p>but this is not working. Any idea is it possible at all?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 2584, "user_id": 2938090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/jFzPm.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/2938090/rafael"}, "edited": false, "score": 0, "creation_date": 1542036971, "post_id": 53265108, "comment_id": 93414881, "body": "Make sure your rules allow you to read/write to the database"}, {"owner": {"reputation": 31, "user_id": 9908150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1657329527677770/picture?type=large", "display_name": "Ionu\u0163 Grigore", "link": "https://stackoverflow.com/users/9908150/ionu%c5%a3-grigore"}, "reply_to_user": {"reputation": 2584, "user_id": 2938090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/jFzPm.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/2938090/rafael"}, "edited": false, "score": 0, "creation_date": 1542037036, "post_id": 53265108, "comment_id": 93414916, "body": "service cloud.firestore {   match /databases/{database}/documents {     match /{document=**} {       allow read, write;     }   } }"}, {"owner": {"reputation": 31, "user_id": 9908150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1657329527677770/picture?type=large", "display_name": "Ionu\u0163 Grigore", "link": "https://stackoverflow.com/users/9908150/ionu%c5%a3-grigore"}, "edited": false, "score": 0, "creation_date": 1542037062, "post_id": 53265108, "comment_id": 93414938, "body": "It&#39;s very very strange, i don&#39;t understand why..."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1542037450, "post_id": 53265108, "comment_id": 93415135, "body": "@Ionu\u0163Grigore Does this line: <code>Toast.makeText(this,it.toString(),Toast.LENGTH_SHORT).show()</code> display something? Please responde with @AlexMamo"}, {"owner": {"reputation": 31, "user_id": 9908150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1657329527677770/picture?type=large", "display_name": "Ionu\u0163 Grigore", "link": "https://stackoverflow.com/users/9908150/ionu%c5%a3-grigore"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1542039225, "post_id": 53265108, "comment_id": 93416111, "body": "@AlexMamo Nothing..."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1542040739, "post_id": 53265108, "comment_id": 93417010, "body": "@Ionu\u0163Grigore Have you tried to add a complete listener and see what is happening when the task is not successful?"}, {"owner": {"reputation": 31, "user_id": 9908150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1657329527677770/picture?type=large", "display_name": "Ionu\u0163 Grigore", "link": "https://stackoverflow.com/users/9908150/ionu%c5%a3-grigore"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1542040811, "post_id": 53265108, "comment_id": 93417046, "body": "@AlexMamo yes i did, same thing, is not executed, nothing seems to execute."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1542040983, "post_id": 53265108, "comment_id": 93417158, "body": "If you add this line of code: <code>Toast.makeText(this,&quot;Test&quot;,Toast.LENGTH_SHORT).show()</code> before this <code>val detail = mutableMapOf&lt;String, Any&gt;()</code>, do you get the message?"}, {"owner": {"reputation": 31, "user_id": 9908150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1657329527677770/picture?type=large", "display_name": "Ionu\u0163 Grigore", "link": "https://stackoverflow.com/users/9908150/ionu%c5%a3-grigore"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1542041031, "post_id": 53265108, "comment_id": 93417186, "body": "@AlexMamo yes. Everything is executed before add/set."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1542041219, "post_id": 53265108, "comment_id": 93417283, "body": "Please add your database structure."}], "owner": {"reputation": 31, "user_id": 9908150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1657329527677770/picture?type=large", "display_name": "Ionu\u0163 Grigore", "link": "https://stackoverflow.com/users/9908150/ionu%c5%a3-grigore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 946, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542040504, "creation_date": 1542035862, "last_edit_date": 1542040504, "question_id": 53265108, "link": "https://stackoverflow.com/questions/53265108/firebase-firestore-not-connecting", "title": "Firebase Firestore not connecting", "body": "<p>I have a problem that drives me crazy. I try to populate Firestore db with some tests fields. First time when i tried it worked perfectly, i did some modifications and nothing seems to work right now. The problem is that set/add are never called whatever i do. I can create and log in without problems. I don't post layout because is self explanatory. A button that set data: add_ddb. Thanks.</p>\n\n<pre><code>class StartingActivity : AppCompatActivity() {\n\n\n    private lateinit var firebaseFirestore: FirebaseFirestore\n    private val firebaseAuth by lazy { FirebaseAuth.getInstance() }\n    private var uid = firebaseAuth.currentUser?.uid\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_starting)\n        firebaseFirestore = FirebaseFirestore.getInstance()\n\n        setSupportActionBar(toolbar)\n        supportActionBar?.apply {\n            setDisplayHomeAsUpEnabled(true)\n            setHomeAsUpIndicator(R.drawable.ic_menu_black_24dp)\n        }\n        add_ddb.setOnClickListener {vieew-&gt;\n            val detail = mutableMapOf&lt;String, Any&gt;()\n            detail.put(\"nameOfDocument\",\"sdsad\")\n            detail.put(\"documentNumber\",\"sdasdvc\")\n            firebaseFirestore.collection(\"users\").document(\"asda\").\n                set(detail).addOnSuccessListener {\n                Toast.makeText(this,\"sdasdasdasda\",Toast.LENGTH_SHORT).show()\n            }.addOnFailureListener {\n                Toast.makeText(this,it.toString(),Toast.LENGTH_SHORT).show()\n            }\n        }\n        nav_view.apply {\n            setNavigationItemSelectedListener {\n                it.isChecked = true\n                drawer_layout.closeDrawers()\n                when (it.itemId) {\n                    R.id.nav_signOut -&gt; {\n                       signOut()\n                        true\n                    }\n                    else -&gt; false\n                }\n            }\n        }\n\n        recycler.apply {\n            layoutManager = LinearLayoutManager(applicationContext)\n        }\n        DisplayInRecycler(this).displayDetails(recycler)\n\n        fab.setOnClickListener {\n            startActivity(intentFor&lt;ActivityAdd&gt;())\n        }\n    }\n\n\n    override fun onOptionsItemSelected(item: MenuItem?): Boolean {\n        return when (item?.itemId) {\n            android.R.id.home -&gt; {\n                drawer_layout.openDrawer(Gravity.START)\n                true\n            }\n            else -&gt; super.onOptionsItemSelected(item)\n        }\n    }\n\n\n\n\n    fun signOut(){\n        FirebaseAuth.getInstance().signOut()\n        startActivity(intentFor&lt;SignInActivity&gt;().clearTop().clearTask())\n        finish()\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlinx.coroutines"], "answers": [{"comments": [{"owner": {"reputation": 1240, "user_id": 1261287, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/212115a31533862673813157bcfdd033?s=128&d=identicon&r=PG", "display_name": "Vladimir Sitnikov", "link": "https://stackoverflow.com/users/1261287/vladimir-sitnikov"}, "edited": false, "score": 0, "creation_date": 1542036804, "post_id": 53264454, "comment_id": 93414800, "body": "Well, <code>Channel(capacity==cache_size_capacity*2+42)</code> should be &quot;enough&quot; for my case since the items are put via single thread (==coroutine), so there can&#39;t (shouldn&#39;t) suddenly expire lots of objects, so all the expired objects should fit into the buffer, and the coroutine could select from the expired channel first."}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 1, "last_activity_date": 1542033560, "creation_date": 1542033560, "answer_id": 53264454, "question_id": 53263690, "link": "https://stackoverflow.com/questions/53263690/what-is-the-way-to-push-data-from-a-callback-to-a-kotlin-coroutine/53264454#53264454", "title": "What is the way to push data from a callback to a Kotlin coroutine", "body": "<p>The only way to not block the removal listener (and thus break the cache) is to have a buffered channel. This means two changes:</p>\n\n<ol>\n<li>Create the <code>SendChannel</code> with a non-zero capacity, see <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.channels/-channel/index.html\" rel=\"nofollow noreferrer\"><code>Channel(capacity)</code></a> to consider the different behaviors. It mostly depends on what the behavior should be if more items expire than the consumer can handle.</li>\n<li>Use <code>SendChannel.offer()</code> instead of <code>SendChannel.sendBlocking()</code>. If it returns <code>false</code> you can implement backup behavior like logging the failure so you can figure out what the best balance between memory and losing events is.</li>\n</ol>\n"}], "owner": {"reputation": 1240, "user_id": 1261287, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/212115a31533862673813157bcfdd033?s=128&d=identicon&r=PG", "display_name": "Vladimir Sitnikov", "link": "https://stackoverflow.com/users/1261287/vladimir-sitnikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 53264454, "answer_count": 1, "score": 1, "last_activity_date": 1542033560, "creation_date": 1542030998, "question_id": 53263690, "link": "https://stackoverflow.com/questions/53263690/what-is-the-way-to-push-data-from-a-callback-to-a-kotlin-coroutine", "title": "What is the way to push data from a callback to a Kotlin coroutine", "body": "<p>Suppose I want to use a cache in a <a href=\"https://gist.github.com/elizarov/34de14377c6a1caf50d560b35a47adc0#file-downloadqueue-kt-L31\" rel=\"nofollow noreferrer\">DownloadQueue</a> like example.\nThe joy of coroutines there is that a simple data structure (e.g. <code>HashMap</code>) can be used in a single threaded algorithm.</p>\n\n<p>However I want to use a limited cache, and evict extra entries to a slower persistent storage.\nFor instance, I can take <code>Guava</code> + <code>CacheBuilder</code> + <code>RemovalListener</code>: <a href=\"https://github.com/google/guava/wiki/CachesExplained#removal-listeners\" rel=\"nofollow noreferrer\">https://github.com/google/guava/wiki/CachesExplained#removal-listeners</a></p>\n\n<p>Here's a problem: <code>RemovalListener</code> is a non-suspended callback, so there's no way to push data to <code>Channels</code> or whatever from the callback.</p>\n\n<pre><code>// This is placed in a suspend context (e.g. within `actor`)\nval cache = CacheBuilder.newBuilder().maximumSize(1000)\n    .expireAfterWrite(10, TimeUnit.SECONDS)\n    .removalListener&lt;Key, Value&gt; { n -&gt;\n        expireChannel.sendBlocking(n.value!!) // &lt;-- could sendBlocking be used here???\n    }.build&lt;Key, Value&gt;()\n</code></pre>\n\n<p>As far as I understand, <code>runBlocking</code> blocks the execution of a current thread, thus it blocks current coroutine, and it won't be able to receive/handle the data.</p>\n\n<p>Is there a way to make <code>RemovalListener</code>-like callbacks coroutine-friendly?</p>\n\n<p>I can imagine a workaround of using an unbounded queue that is populated by a <code>RemovalListener</code> while the coroutine in question eventually checks the queue.</p>\n"}, {"tags": ["java", "kotlin", "biginteger", "bigdecimal"], "comments": [{"owner": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "edited": false, "score": 1, "creation_date": 1542034116, "post_id": 53262639, "comment_id": 93413304, "body": "You shouldn&#39;t convert to BigDecimal for the purpose of comparing. Consider comparing (1/3) with (2000000001/600000000). You have to choose a certain arbitrary scale - say, 5 - when converting to BigDecimal. Both the above numbers would give you 0.33333, yet they&#39;re obviously not equal. You should, instead, compare the numerators and denominators directly. Find the lowest common multiple of the two denominators and convert the fractions and compare numerators."}, {"owner": {"reputation": 1490, "user_id": 4424680, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c17ba831e770f869c0e6ed689f55ed5?s=128&d=identicon&r=PG&f=1", "display_name": "gringogordo", "link": "https://stackoverflow.com/users/4424680/gringogordo"}, "reply_to_user": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "edited": false, "score": 0, "creation_date": 1542034641, "post_id": 53262639, "comment_id": 93413595, "body": "Yes good point thanks"}], "answers": [{"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 3, "last_activity_date": 1542037998, "last_edit_date": 1542037998, "creation_date": 1542028784, "answer_id": 53263059, "question_id": 53262639, "link": "https://stackoverflow.com/questions/53262639/kotlin-biginteger-to-bigdecimal-conversion/53263059#53263059", "title": "Kotlin BigInteger to BigDecimal conversion", "body": "<p>One of the problems lies within <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/java.math.-big-decimal/div.html\" rel=\"nofollow noreferrer\"><code>BigDecimal.div</code></a>. It uses the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/RoundingMode.html#HALF_EVEN\" rel=\"nofollow noreferrer\">RoundingMode.HALF_EVEN</a> and the given <code>scale</code> of the used dividend <code>BigDecimal</code> (which is also stated in the documentation). The other problem is that the <code>BigInteger</code> to <code>BigDecimal</code>-transformation first sets the scale to 0 (check also <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html#%3Cinit%3E(java.math.BigInteger)\" rel=\"nofollow noreferrer\"><code>BigDecimal(BigInteger)</code></a>) and therefore it will round without using decimal digits.</p>\n\n<p>Note also that on your sample you used <code>a.divide(b)</code> with two <code>BigDecimal</code> first and on the actual transformation you used <code>a.div(b)</code> with two <code>BigInteger</code>-transformed <code>BigDecimal</code>. That's a completely different story ;-)</p>\n\n<p>You can solve your issue with one of the following:</p>\n\n<p>Either transform your <code>BigInteger</code> using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/java.math.-big-integer/to-big-decimal.html\" rel=\"nofollow noreferrer\"><code>toBigDecimal</code></a> and specify a desired <code>scale</code>, e.g.:</p>\n\n<pre><code>val scale = 10 // decimal digits\nval decimalRepresentation = numerator.toBigDecimal(scale) / denominator.toBigDecimal(scale)\n</code></pre>\n\n<p>Or you may want to use <code>divide</code> instead and pass the desired scale:</p>\n\n<pre><code>val decimalRepresentation = BigDecimal(numerator).divide(BigDecimal(denominator), 2, RoundingMode.HALF_UP)\n</code></pre>\n\n<p>In this case I used 2 decimal digits and I am <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/RoundingMode.html#HALF_UP\" rel=\"nofollow noreferrer\">rounding up on half (<code>RoundingMode.HALF_UP</code>)</a>.</p>\n"}], "owner": {"reputation": 1490, "user_id": 4424680, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7c17ba831e770f869c0e6ed689f55ed5?s=128&d=identicon&r=PG&f=1", "display_name": "gringogordo", "link": "https://stackoverflow.com/users/4424680/gringogordo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 914, "favorite_count": 0, "accepted_answer_id": 53263059, "answer_count": 1, "score": 0, "last_activity_date": 1542037998, "creation_date": 1542027322, "last_edit_date": 1542032776, "question_id": 53262639, "link": "https://stackoverflow.com/questions/53262639/kotlin-biginteger-to-bigdecimal-conversion", "title": "Kotlin BigInteger to BigDecimal conversion", "body": "<p>I'm writing a very simple class and I'm struggling to do some decimal division.</p>\n\n<p>So this is not great code but ...</p>\n\n<pre><code>class Rational (val numerator: BigInteger, val denominator: BigInteger) : Comparable &lt;Rational&gt; {\n\n     //ATTEMPT 1\n     //val decimalRepresentation: BigDecimal = (numerator.toBigDecimal().div(denominator.toBigDecimal()))//.setScale(5)\n\n     //ATTEMPT 2  \n     val decimalRepresentation = (BigDecimal(numerator).div(BigDecimal(denominator))) //.setScale(5)\n\n     override fun compareTo(other: Rational): Int {\n        val a = BigDecimal(1.0)\n        val b = BigDecimal(2.0)\n        val x = a.divide(b) // 0.5\n        println (\"x: \" + x.toString())\n\n        println(\"this val: \" + this.decimalRepresentation)\n        println(\"other val: \" + other.decimalRepresentation)\n\n        return when {\n           ...\n        }\n    }\n</code></pre>\n\n<p>So I've tried two ways of converting the BigIntegers into BigDecimals to do the compare and both fail and the maths performs integer division</p>\n\n<p>so </p>\n\n<p>1 / 3 = 0<br>\n5 / 6 = 1</p>\n\n<p>I've done a poc in case I'm going mad and x is 0.5.  </p>\n\n<p>Could anyone tell me how to fix this (without changing parameter types or converting to a string and back!)</p>\n\n<p>Oddly 1 / 2 is returning 0 as well which seems odd to me as I would expect 0.5 to round to 1 ?  This makes me worry that I'm completely missing a very simple point somewhere!</p>\n"}, {"tags": ["spring-boot", "kotlin", "mockito"], "comments": [{"owner": {"reputation": 14138, "user_id": 474287, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c573bb99af70871f3ce97507d564f49f?s=128&d=identicon&r=PG", "display_name": "Morfic", "link": "https://stackoverflow.com/users/474287/morfic"}, "edited": false, "score": 0, "creation_date": 1542030884, "post_id": 53262391, "comment_id": 93411358, "body": "<code>UserService</code> is mocked in your <code>AdminServiceTests</code>, so it&#39;s original behavior is <i>replaced</i> with whatever you configure (when this then that), or with default behavior if you did not specify anything, in your case <code>userService.createUser(user)</code> will return the default boolean value which is <code>false</code>. So yeah, it&#39;s normal that the original method is not invoked inside a mock, unless <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.23.0/org/mockito/Mockito.html#doCallRealMethod--\" rel=\"nofollow noreferrer\">you actually specify that</a>, if that&#39;s actually what you really want."}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 4402290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-1WigBHz4gHs/AAAAAAAAAAI/AAAAAAAAABA/AnYBvvBeYZQ/photo.jpg?sz=128", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/4402290/mohanraj"}, "edited": false, "score": 0, "creation_date": 1542032789, "post_id": 53263764, "comment_id": 93412501, "body": "Thanks a lot... Please help me with the question updated"}], "tags": [], "owner": {"reputation": 11165, "user_id": 2000300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/c8eI2.jpg?s=128&g=1", "display_name": "pdegand59", "link": "https://stackoverflow.com/users/2000300/pdegand59"}, "is_accepted": true, "score": 1, "last_activity_date": 1542031266, "creation_date": 1542031266, "answer_id": 53263764, "question_id": 53262391, "link": "https://stackoverflow.com/questions/53262391/call-a-function-from-test-class-not-working-mockito/53263764#53263764", "title": "Call a function from Test class not working Mockito", "body": "<p>In your <code>testCreateAdmin()</code> you have to mock the behavior of the <code>userService</code> methods. By default, non-mocked methods will return <code>null</code>.</p>\n\n<p>It should look like this, with mockito-kotlin.</p>\n\n<pre><code>@Test\nfun testCreateAdmin() {\n  val admin = mock&lt;User&gt;() {\n    on { id } doReturn \"id\"\n  }\n  whenever(userService.getUser(createAdmin)).doReturn(admin)\n  whenever(userService.createUser(admin)).doReturn(true)\n\n  val result = adminService.createAdmin(createAdmin)\n\n  Assert.assertEquals(true, result)\n  verify(userService).saveAdmin(\"id\")\n}\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 4402290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-1WigBHz4gHs/AAAAAAAAAAI/AAAAAAAAABA/AnYBvvBeYZQ/photo.jpg?sz=128", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/4402290/mohanraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 53263764, "answer_count": 1, "score": 0, "last_activity_date": 1542032731, "creation_date": 1542026386, "last_edit_date": 1542032731, "question_id": 53262391, "link": "https://stackoverflow.com/questions/53262391/call-a-function-from-test-class-not-working-mockito", "title": "Call a function from Test class not working Mockito", "body": "<p>Hi I have a test class named UserServiceTest which contains userService class which is injected with the above mocks and the tests in this test class works fine.</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner::class)\nclass UserServiceTest {\n\nlateinit var login: Login\n\n@Mock\nlateinit var userRepository: UserRepository\n\n@Mock\nlateinit var emailService: EmailService\n\n@InjectMocks\nlateinit var userService: UserService\n\n@Before\nfun setup() {\n    login = Login(email = \"mohanraj@gmail.com\", password = \"qwerty\"\n}\n</code></pre>\n\n<p>And I have another test class named AdminServiceTests which contains the AdminServiceClass which is injected with the above mocks which also consists the userService class</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner::class)\nclass AdminServiceTests {\n\nlateinit var user: User\n\n@Mock\nlateinit var userRepository: UserRepository\n\n@Mock\nlateinit var adminRepository: AdminRepository\n\n@Mock\nlateinit var userService: UserService\n\n@InjectMocks\nlateinit var adminService: AdminService\n\n@Before\nfun setup() {\n\n    this.createAdmin = CreateAdmin().apply {\n        email = \"admin@gmail.com\"\n        name = \"admin\"\n        password = \"qwerty\"\n        phone = 98345678899\n    }\n}\n\n@Test\nfun testCreateAdmin() {\n\n    val result = adminService.createAdmin(createAdmin)\n    Assert.assertEquals(true, result)\n}\n</code></pre>\n\n<p>When I run the test, adminService.createAdmin(createAdmin) calls a function in the adminService which calls a function in userService</p>\n\n<pre><code>fun createAdmin(newUser: CreateAdmin): Boolean {\n    val user = userService.getUser(newUser)\n\n    if (userService.createUser(user)) { // calls a function in user service\n        this.saveAdmin(user.id)\n\n        return true\n    }\n\n    return false\n}\n</code></pre>\n\n<p>I want to call a function in userService from testCreateAdmin function, but the user service which I have included as @Mock contains some dependencies for itself and it is a dependency for adminService, so when I debug the @Mock userService object contains null and so the function in userService is not called. so how to inject the dependencies to userService and inject it into adminService.. Please help</p>\n\n<pre><code>userService = {UserService$MockitoMock$825690330@2479}\nmockitoInterceptor = {MockMethodInterceptor@2532} \nuserRepository = null\nemailService = null\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-styles"], "answers": [{"tags": [], "owner": {"reputation": 713, "user_id": 7782316, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/wMCgH.png?s=128&g=1", "display_name": "Sz-Nika Janos", "link": "https://stackoverflow.com/users/7782316/sz-nika-janos"}, "is_accepted": true, "score": 0, "last_activity_date": 1542023837, "creation_date": 1542023837, "answer_id": 53261686, "question_id": 53261620, "link": "https://stackoverflow.com/questions/53261620/center-icon-in-actionbar/53261686#53261686", "title": "Center icon in Actionbar", "body": "<p>step 1: create a custom layout in R.layout. directory, as you desire and then set the view \nto action bar </p>\n\n<p>step 2:  Set the custom layout.</p>\n\n<pre><code>   ActionBar actionBar = getActionBar();\n    actionBar.setDisplayShowCustomEnabled(true);\n    View customView = getLayoutInflater().inflate(R.layout.customActionBar, null);\n    actionBar.setCustomView(customView );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8316, "user_id": 1616317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4533abb0fab9a5a284c2cdcb40512e85?s=128&d=identicon&r=PG&f=1", "display_name": "karan", "link": "https://stackoverflow.com/users/1616317/karan"}, "is_accepted": false, "score": 0, "last_activity_date": 1542024052, "creation_date": 1542024052, "answer_id": 53261751, "question_id": 53261620, "link": "https://stackoverflow.com/questions/53261620/center-icon-in-actionbar/53261751#53261751", "title": "Center icon in Actionbar", "body": "<p>From your xml add ToolBar as below and set Icon to ImageView inside it.</p>\n\n<pre><code>&lt;android.support.v7.widget.Toolbar\n   xmlns:android=\"http://schemas.android.com/apk/res/android\"\n   android:layout_width=\"match_parent\"\n   android:layout_height=\"wrap_content\"\n   android:background=\"?attr/colorPrimary\" &gt;\n\n    &lt;ImageView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:src=\"@mipmap/ic_launcher\"/&gt;\n\n &lt;/android.support.v7.widget.Toolbar&gt;\n</code></pre>\n\n<p>Set toolbar as support action bar as you are doing.</p>\n"}], "owner": {"reputation": 63, "user_id": 10625203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R6cUCUbIKOo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAdRgRl7tnVsoUYGrEo0UgQ7-GBmg/mo/photo.jpg?sz=128", "display_name": "Tri Ako Nugroho", "link": "https://stackoverflow.com/users/10625203/tri-ako-nugroho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 53261686, "answer_count": 2, "score": 0, "last_activity_date": 1542040037, "creation_date": 1542023627, "last_edit_date": 1542040037, "question_id": 53261620, "link": "https://stackoverflow.com/questions/53261620/center-icon-in-actionbar", "title": "Center icon in Actionbar", "body": "<p>I want to insert a centered icon in Actionbar, but i have no idea what code that i need. anyone can help me?</p>\n\n<p><strong>This is my code :</strong></p>\n\n<pre><code>Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\nsetSupportActionBar(toolbar);\n\ngetSupportActionBar().setIcon(R.mipmap.ic_launcher);\ngetSupportActionBar().setTitle(\"\");\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["android", "kotlin", "arduino", "bluetooth", "android-bluetooth"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 10635691, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nikitich", "link": "https://stackoverflow.com/users/10635691/nikitich"}, "edited": false, "score": 0, "creation_date": 1542025545, "post_id": 53260571, "comment_id": 93408515, "body": "Thank you very much"}, {"owner": {"reputation": 29, "user_id": 10635691, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nikitich", "link": "https://stackoverflow.com/users/10635691/nikitich"}, "edited": false, "score": 0, "creation_date": 1542027428, "post_id": 53260571, "comment_id": 93409511, "body": "But now I have another problem: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:921)    When i try call mmSocket!!.connect()"}, {"owner": {"reputation": 614, "user_id": 10627568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GrCWe.jpg?s=128&g=1", "display_name": "Onix", "link": "https://stackoverflow.com/users/10627568/onix"}, "reply_to_user": {"reputation": 29, "user_id": 10635691, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nikitich", "link": "https://stackoverflow.com/users/10635691/nikitich"}, "edited": false, "score": 0, "creation_date": 1542029424, "post_id": 53260571, "comment_id": 93410540, "body": "In the log of error must seen line cause error in you code. Please attach full stack-trace here."}, {"owner": {"reputation": 614, "user_id": 10627568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GrCWe.jpg?s=128&g=1", "display_name": "Onix", "link": "https://stackoverflow.com/users/10627568/onix"}, "reply_to_user": {"reputation": 29, "user_id": 10635691, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nikitich", "link": "https://stackoverflow.com/users/10635691/nikitich"}, "edited": false, "score": 0, "creation_date": 1542092562, "post_id": 53260571, "comment_id": 93433172, "body": "I looked at your stacktrace. Look there, maybe this is answer <a href=\"https://stackoverflow.com/questions/18657427/ioexception-read-failed-socket-might-closed-bluetooth-on-android-4-3\" title=\"ioexception read failed socket might closed bluetooth on android 4 3\">stackoverflow.com/questions/18657427/&hellip;</a>"}], "tags": [], "owner": {"reputation": 614, "user_id": 10627568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GrCWe.jpg?s=128&g=1", "display_name": "Onix", "link": "https://stackoverflow.com/users/10627568/onix"}, "is_accepted": true, "score": 3, "last_activity_date": 1542019796, "creation_date": 1542019796, "answer_id": 53260571, "question_id": 53260304, "link": "https://stackoverflow.com/questions/53260304/data-transmission-between-arduino-and-android-over-bluetooth-problem-with-npe/53260571#53260571", "title": "Data transmission between arduino and android over bluetooth. Problem with NPE", "body": "<p>You forgot to call <code>mmSocket.connect()</code> before accessing <code>outputStream</code> object.\nTry this:</p>\n\n<pre><code> mmSocket= device.createRfcommSocketToServiceRecord( \n                    UUID.fromString(\"00000000-0000-1000-8000-00805F9B34FB\"))\n                    mmSocket.connect()\n                    mmOutputStream = mmSocket!!.outputStream\n                    val message = \"aaa\"\n                    val msgBuffer = message.toByteArray(Charset.defaultCharset())\n                    mmOutputStream!!.write(msgBuffer)\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10635691, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nikitich", "link": "https://stackoverflow.com/users/10635691/nikitich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1540, "favorite_count": 0, "accepted_answer_id": 53260571, "answer_count": 1, "score": 2, "last_activity_date": 1580549522, "creation_date": 1542018808, "last_edit_date": 1580549522, "question_id": 53260304, "link": "https://stackoverflow.com/questions/53260304/data-transmission-between-arduino-and-android-over-bluetooth-problem-with-npe", "title": "Data transmission between arduino and android over bluetooth. Problem with NPE", "body": "<p>I should transfer some Strings to arduino. Just only pass, do not take anything.\nThis my code. I'm working with android and kotlin for the first time.</p>\n\n<pre><code>class Validation : AppCompatActivity() {\nlateinit var mmOutputStream: OutputStream\nlateinit var mmSocket: BluetoothSocket\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_validation)\n\n\n    resolve_Btn.setOnClickListener {bluetoothAdd() }\n\n\n}\n\n@SuppressLint(\"HardwareIds\")\nprivate fun bluetoothAdd() {\n    val mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter()\n    if (mBluetoothAdapter == null) {\n        // Device does not support Bluetooth\n\n        Log.e(\"Bluetooth \", \"not found\")\n    }\n\n    if (mBluetoothAdapter!!.isEnabled) {\n        val pairedDevices = mBluetoothAdapter.bondedDevices\n        // If there are paired devices\n        if (pairedDevices.size &gt; 0) {\n            // Loop through paired devices\n            for (device in pairedDevices) {\n                mmSocket= device.createRfcommSocketToServiceRecord(\n                        UUID.fromString(\"00000000-0000-1000-8000-00805F9B34FB\"))\n                mmSocket.connect()\n                mmOutputStream = mmSocket.outputStream\n                val message = \"aaa\"\n                val msgBuffer = message.toByteArray(Charset.defaultCharset())\n                mmOutputStream.write(msgBuffer)\n                Log.e(\"Mac Addressess\", \"are:  \" + mBluetoothAdapter.getRemoteDevice(device.address))\n\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Now when I added mmSocket!!.connect(), I catch this</p>\n\n<blockquote>\n  <p>Caused by: java.lang.reflect.InvocationTargetException\n          at java.lang.reflect.Method.invoke(Native Method)\n          at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245)\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:921)\u00a0\n       Caused by: java.io.IOException: read failed, socket might closed or timeout, read ret: -1\n          at android.bluetooth.BluetoothSocket.readAll(BluetoothSocket.java:706)\n          at android.bluetooth.BluetoothSocket.readInt(BluetoothSocket.java:718)\n          at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:384)\n          at com.example.nikita.vas.Validation.bluetoothAdd(Validation.kt:52)\n          at com.example.nikita.vas.Validation.access$bluetoothAdd(Validation.kt:21)\n          at com.example.nikita.vas.Validation$onCreate$1.onClick(Validation.kt:30)\n          at android.view.View.performClick(View.java:6291)\n          at android.view.View$PerformClick.run(View.java:24931)\n          at android.os.Handler.handleCallback(Handler.java:808)\n          at android.os.Handler.dispatchMessage(Handler.java:101)\n          at android.os.Looper.loop(Looper.java:166)</p>\n</blockquote>\n"}, {"tags": ["android", "kotlin", "interface", "viewmodel"], "comments": [{"owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "edited": false, "score": 0, "creation_date": 1542021636, "post_id": 53260283, "comment_id": 93406439, "body": "Have your read this? <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel#sharing\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/architecture/&hellip;</a>"}, {"owner": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "edited": false, "score": 0, "creation_date": 1542021754, "post_id": 53260283, "comment_id": 93406510, "body": "Also, this: <a href=\"https://medium.com/mindorks/how-to-communicate-between-fragments-and-activity-using-viewmodel-ca733233a51c\" rel=\"nofollow noreferrer\">medium.com/mindorks/&hellip;</a>"}, {"owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "reply_to_user": {"reputation": 1682, "user_id": 122742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DF9Vs.jpg?s=128&g=1", "display_name": "Andre Artus", "link": "https://stackoverflow.com/users/122742/andre-artus"}, "edited": false, "score": 0, "creation_date": 1542023898, "post_id": 53260283, "comment_id": 93407613, "body": "@AndreArtus i will try."}], "answers": [{"tags": [], "owner": {"reputation": 785, "user_id": 6544777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7da980c664467a7bd3f60dc07522ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Virendra Varma", "link": "https://stackoverflow.com/users/6544777/virendra-varma"}, "is_accepted": false, "score": 1, "last_activity_date": 1542021831, "creation_date": 1542021831, "answer_id": 53261151, "question_id": 53260283, "link": "https://stackoverflow.com/questions/53260283/how-to-call-interface-method-in-view-model-of-fragment-class-in-kotlin/53261151#53261151", "title": "how to call interface method in view model of fragment class in kotlin", "body": "<p>You can use <code>MutableLiveData</code> in your ViewModel class and observe the value of notification count, whenever the value of notification count changed it will inform to observing the class.</p>\n"}], "owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542021831, "creation_date": 1542018740, "last_edit_date": 1542019832, "question_id": 53260283, "link": "https://stackoverflow.com/questions/53260283/how-to-call-interface-method-in-view-model-of-fragment-class-in-kotlin", "title": "how to call interface method in view model of fragment class in kotlin", "body": "<p>I have an <code>Activity</code> which is called <code>Homeactivity</code> and I have a fragment <code>Notification</code> and their <code>ViewModel</code> class, I want to update notification count from fragment's <code>ViewModel</code> and I declared that interface outside the notification <code>ViewModel</code> and I'm unable to call the method of that interface in Kotlin</p>\n\n<pre><code>class NotificationsViewModel(val notificationsActivity: HomeActivity) : \n          BaseObservable() {  \n\n\n //somewhere i want to update count which is in homeactivity\n\n    } \n  interface NotifyCount {\n    fun notifyNotificationCount(count: String)\n\n}\n</code></pre>\n\n<p>My fragment class is given below</p>\n\n<pre><code>class NotificationsFragment : Fragment() {\nprivate var notificationsBinding: NotificationsActivityBinding? = null\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    notificationsBinding=  DataBindingUtil.inflate(inflater, R.layout.notifications_activity,container,false)\n    notificationsBinding!!.viewModel= NotificationsViewModel(activity!! as HomeActivity)\n    return notificationsBinding!!.root\n}\n\n}\n</code></pre>\n\n<p>I just want to call method <code>notifyNotificationCount</code> in <code>ViewModel</code> so that I will update my count from <code>HomeActivity</code> by overriding the <code>NotifyCount</code> </p>\n\n<p>how can I call the method <code>notifyNotificationCount</code> in \nviewModel` class?</p>\n"}, {"tags": ["kotlin", "jackson", "mocking"], "comments": [{"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1542059978, "post_id": 53260062, "comment_id": 93425073, "body": "Just for the future, I subscribed only for mockk tag, so accidentally found this one."}, {"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1542060169, "post_id": 53260062, "comment_id": 93425152, "body": "Looks like an issue with ByteBuddy transformation on the first sight. I don&#39;t think such traces are good for stackoverflow. Can you submit it here: <a href=\"https://github.com/mockk/mockk/issues\" rel=\"nofollow noreferrer\">github.com/mockk/mockk/issues</a>. A bit later I will try to rerpoduce it."}], "owner": {"reputation": 1081, "user_id": 9080066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYG0.jpg?s=128&g=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/9080066/dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 612, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1542021377, "creation_date": 1542017971, "last_edit_date": 1542021377, "question_id": 53260062, "link": "https://stackoverflow.com/questions/53260062/mocking-objectmapper-extension-functions-with-mockk", "title": "Mocking ObjectMapper Extension Functions with Mockk", "body": "<p>I have been trying to use <a href=\"https://github.com/mockk/mockk\" rel=\"nofollow noreferrer\">Mockk</a> to mock the following extension function for the Jackson <code>ObjectMapper</code>:</p>\n\n<pre><code>inline fun &lt;reified T: Any&gt; ObjectMapper.convertValue(from: Any): T = convertValue(from, jacksonTypeRef&lt;T&gt;())\n</code></pre>\n\n<p>The documentation indicates that I need to do something like this:</p>\n\n<pre><code>mockkStatic(\"com.fasterxml.jackson.module.kotlin.ExtensionsKt\")\nevery {\n   ObjectMapper().convertValue&lt;SNSEvent&gt;(any&lt;Map&lt;String, Any&gt;&gt;())\n} returns event  \n</code></pre>\n\n<p>However when I do this i get the following error:</p>\n\n<pre><code>java.lang.AbstractMethodError: Method net/bytebuddy/renamed/java/util/Map$ByteBuddy$smykbfJj.isEmpty()Z is abstract\n\nat net.bytebuddy.renamed.java.util.Map$ByteBuddy$smykbfJj.isEmpty(Unknown Source)\nat com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:516)\nat com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:30)\nat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:292)\nat com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:3567)\nat com.fasterxml.jackson.databind.ObjectMapper.convertValue(ObjectMapper.java:3530)\nat com.fasterxml.jackson.databind.ObjectMapper.convertValue(ObjectMapper.java:3518)\nat eventlogger.mapper.EventMapperImplTest$objectMapper$1$1.invoke(EventMapperImplTest.kt:85)\nat eventlogger.mapper.EventMapperImplTest$objectMapper$1$1.invoke(EventMapperImplTest.kt:13)\nat io.mockk.impl.eval.RecordedBlockEvaluator$record$block$1.invoke(RecordedBlockEvaluator.kt:22)\nat io.mockk.impl.recording.JvmAutoHinter.autoHint(JvmAutoHinter.kt:23)\nat io.mockk.impl.eval.RecordedBlockEvaluator.record(RecordedBlockEvaluator.kt:31)\nat io.mockk.impl.eval.EveryBlockEvaluator.every(EveryBlockEvaluator.kt:25)\nat io.mockk.MockKDsl.internalEvery(API.kt:93)\nat io.mockk.MockKKt.every(MockK.kt:104)\nat eventlogger.mapper.EventMapperImplTest.&lt;init&gt;(EventMapperImplTest.kt:66)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\nat org.junit.platform.commons.util.ReflectionUtils.newInstance(ReflectionUtils.java:352)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:60)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateTestClass(ClassTestDescriptor.java:208)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateAndPostProcessTestInstance(ClassTestDescriptor.java:195)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$0(ClassTestDescriptor.java:185)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$1(ClassTestDescriptor.java:189)\nat java.util.Optional.orElseGet(Optional.java:267)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$2(ClassTestDescriptor.java:188)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:81)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:58)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.prepare(HierarchicalTestExecutor.java:89)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:74)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\nat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\nat java.util.Iterator.forEachRemaining(Iterator.java:116)\nat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\nat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\nat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\nat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\nat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\nat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\nat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\nat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\nat java.util.Iterator.forEachRemaining(Iterator.java:116)\nat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\nat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\nat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\nat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\nat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\nat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\nat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)\nat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:74)\nat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\nat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\nat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n</code></pre>\n\n<p>Another attempt was to change it so that it accepts the actual map that will be passed:</p>\n\n<pre><code> mockkStatic(\"com.fasterxml.jackson.module.kotlin.ExtensionsKt\")\n    every {\n        ObjectMapper().convertValue&lt;SNSEvent&gt;(map)\n    } returns event\n</code></pre>\n\n<p>This produces another error:</p>\n\n<pre><code>io.mockk.MockKException: Missing calls inside every { ... } block.\n\nat io.mockk.impl.recording.states.StubbingState.checkMissingCalls(StubbingState.kt:14)\nat io.mockk.impl.recording.states.StubbingState.recordingDone(StubbingState.kt:8)\nat io.mockk.impl.recording.CommonCallRecorder.done(CommonCallRecorder.kt:42)\nat io.mockk.impl.eval.RecordedBlockEvaluator.record(RecordedBlockEvaluator.kt:48)\nat io.mockk.impl.eval.EveryBlockEvaluator.every(EveryBlockEvaluator.kt:25)\nat io.mockk.MockKDsl.internalEvery(API.kt:93)\nat io.mockk.MockKKt.every(MockK.kt:104)\nat eventlogger.mapper.EventMapperImplTest.setUpWorks(EventMapperImplTest.kt:81)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:436)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)\nat org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:112)\nat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\nat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\nat java.util.Iterator.forEachRemaining(Iterator.java:116)\nat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\nat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\nat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\nat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\nat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\nat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\nat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\nat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\nat java.util.Iterator.forEachRemaining(Iterator.java:116)\nat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\nat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\nat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\nat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\nat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\nat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\nat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)\nat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:74)\nat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\nat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\nat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n</code></pre>\n\n<p>Reading the documentation again it suggests that the class name can be unexpected:</p>\n\n<blockquote>\n  <p>This is standard Kotlin behaviour that may be unpredictable for user of mocking library. Use Tools -> Kotlin -> Show Kotlin Bytecode or check .class files in JAR archive to detect such names.</p>\n</blockquote>\n\n<p>As such I unzipped the jar and discovered the following class <code>com.fasterxml.jackson.module.kotlin.ExtensionsKt$convertValue$$inlined$jacksonTypeRef$1.class</code> and I attempted to use it instead:</p>\n\n<pre><code>   mockkStatic(\"com.fasterxml.jackson.module.kotlin.ExtensionsKt\\$convertValue\\$\\$inlined\\$jacksonTypeRef\\$1\")\n    every {\n        ObjectMapper().convertValue&lt;SNSEvent&gt;(map)\n    } returns event\n</code></pre>\n\n<p>This produced the same error and logged another:</p>\n\n<pre><code>java.lang.IncompatibleClassChangeError: com.fasterxml.jackson.module.kotlin.ExtensionsKt and com.fasterxml.jackson.module.kotlin.ExtensionsKt$convertValue$$inlined$jacksonTypeRef$1 disagree on InnerClasses attribute\nat java.lang.Class.getDeclaringClass0(Native Method)\nat java.lang.Class.getDeclaringClass(Class.java:1235)\nat net.bytebuddy.description.type.TypeDescription$ForLoadedType.getDeclaringType(TypeDescription.java:7255)\nat net.bytebuddy.dynamic.scaffold.InstrumentedType$Factory$Default$1.represent(InstrumentedType.java:227)\nat net.bytebuddy.ByteBuddy.redefine(ByteBuddy.java:698)\nat net.bytebuddy.ByteBuddy.redefine(ByteBuddy.java:676)\nat io.mockk.proxy.jvm.transformation.InliningClassTransformer.transform(InliningClassTransformer.kt:70)\nat sun.instrument.TransformerManager.transform(TransformerManager.java:188)\nat sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:428)\nat sun.instrument.InstrumentationImpl.retransformClasses0(Native Method)\nat sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:144)\nat io.mockk.proxy.jvm.transformation.InlineInstrumentation.execute(InlineInstrumentation.kt:39)\nat io.mockk.proxy.jvm.StaticProxyMaker.staticProxy(StaticProxyMaker.kt:33)\nat io.mockk.impl.instantiation.JvmStaticMockFactory.staticMockk(JvmStaticMockFactory.kt:31)\nat eventlogger.mapper.EventMapperImplTest.&lt;init&gt;(EventMapperImplTest.kt:291)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\nat org.junit.platform.commons.util.ReflectionUtils.newInstance(ReflectionUtils.java:352)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:60)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateTestClass(ClassTestDescriptor.java:208)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateAndPostProcessTestInstance(ClassTestDescriptor.java:195)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$0(ClassTestDescriptor.java:185)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$1(ClassTestDescriptor.java:189)\nat java.util.Optional.orElseGet(Optional.java:267)\nat org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$2(ClassTestDescriptor.java:188)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:81)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:58)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.prepare(HierarchicalTestExecutor.java:89)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:74)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\nat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\nat java.util.Iterator.forEachRemaining(Iterator.java:116)\nat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\nat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\nat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\nat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\nat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\nat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\nat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\nat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\nat java.util.Iterator.forEachRemaining(Iterator.java:116)\nat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\nat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\nat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\nat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\nat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\nat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\nat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\nat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)\nat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:74)\nat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\nat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\nat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n</code></pre>\n\n<p>I know that a possible solution would be to not use the extension function and to use the original Java <code>convertValue</code> function. However given the choice I would like to be able to use the extension functions in my code and mock them if possible.</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "fragment"], "comments": [{"owner": {"reputation": 354, "user_id": 8399393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7q2qq.jpg?s=128&g=1", "display_name": "hamid keyhani", "link": "https://stackoverflow.com/users/8399393/hamid-keyhani"}, "edited": false, "score": 0, "creation_date": 1542098742, "post_id": 53259615, "comment_id": 93436012, "body": "which variable of alerts variable? plz share full code"}, {"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "reply_to_user": {"reputation": 354, "user_id": 8399393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7q2qq.jpg?s=128&g=1", "display_name": "hamid keyhani", "link": "https://stackoverflow.com/users/8399393/hamid-keyhani"}, "edited": false, "score": 0, "creation_date": 1542385042, "post_id": 53259615, "comment_id": 93562175, "body": "It&#39;s my only used code, the rest is not useful."}], "answers": [{"tags": [], "owner": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "is_accepted": false, "score": 0, "last_activity_date": 1542017891, "creation_date": 1542017891, "answer_id": 53260038, "question_id": 53259615, "link": "https://stackoverflow.com/questions/53259615/avc-denied-read-fragment-android/53260038#53260038", "title": "avc: denied { read } fragment Android", "body": "<p>You should call <code>mydialog.create()</code> before calling the <code>mydialog.show()</code> method or trying to access its internal views.</p>\n\n<pre><code>fun showDialog(){\n    mydialog = Dialog(this, R.style.DialogCustomTheme)\n    mydialog.requestWindowFeature(Window.FEATURE_NO_TITLE)\n    mydialog.setContentView(R.layout.alerts_dialog_remi)\n\n    mydialog.create()\n\n    txt = mydialog.findViewById(R.id.close_modal_alerte)\n    txt.isEnabled = true\n    txt.setOnClickListener{\n        mydialog.cancel()\n    }\n    mydialog.show()\n}\n</code></pre>\n"}], "owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1748, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542096802, "creation_date": 1542016426, "last_edit_date": 1542096802, "question_id": 53259615, "link": "https://stackoverflow.com/questions/53259615/avc-denied-read-fragment-android", "title": "avc: denied { read } fragment Android", "body": "<p>I have a <strong>modal dialog</strong> that I've created with XML. Then, I show it in <strong>kotlin</strong> (it's not a real dialog view, more than an information popup). </p>\n\n<p>See the XML: </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".AlertsDialogRemi\"\n    android:id=\"@+id/alertLayoutRoot\"\n    android:orientation=\"vertical\"\n    &gt;\n\n    &lt;RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        tools:ignore=\"UselessParent\"\n        &gt;\n\n        &lt;RelativeLayout\n            android:id=\"@+id/layoutTopAlert\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"33dp\"\n            android:gravity=\"center\"\n            &gt;\n\n            &lt;LinearLayout\n                android:id=\"@+id/layoutAlert\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:orientation=\"vertical\"\n                android:background=\"@color/orange\"\n                &gt;\n\n                &lt;TextView\n                    android:id=\"@+id/alerte_title\"\n                    style=\"@style/titleActu\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_gravity=\"center\"\n                    android:layout_marginTop=\"66dp\"\n                    android:text=\"@string/alertes\"\n                    android:textColor=\"@color/colorWhite\" /&gt;\n\n\n                &lt;ViewFlipper\n                    android:id=\"@+id/viewFlipperAlert\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\"\n                    android:background=\"@color/orange\"&gt;\n                &lt;/ViewFlipper&gt;\n\n                &lt;LinearLayout\n                    android:id=\"@+id/dotNavAlert\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n                    android:gravity=\"center\"\n                    android:orientation=\"horizontal\"&gt;\n\n                &lt;/LinearLayout&gt;\n\n            &lt;/LinearLayout&gt;\n            &lt;Button\n                android:id=\"@+id/close_modal_alerte\"\n                style=\"@style/Base.Widget.AppCompat.Button.Borderless\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_centerHorizontal=\"true\"\n                android:background=\"@android:color/transparent\"\n                android:text=\"Fermer\"\n                android:layout_below=\"@id/layoutAlert\"/&gt;\n        &lt;/RelativeLayout&gt;\n        &lt;ImageView\n            android:id=\"@+id/alert_logo\"\n            android:layout_width=\"66dp\"\n            android:layout_height=\"66dp\"\n            android:layout_centerHorizontal=\"true\"\n            android:src=\"@drawable/alertes\" /&gt;\n\n\n    &lt;/RelativeLayout&gt;\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>This function show the modal in MainActivity.kt (I'm using <strong>fragment and navigation drawer</strong>) : </p>\n\n<pre><code>lateinit var mydialog : Dialog\nlateinit var txt : TextView\n\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n        // Handle action bar item clicks here. The action bar will\n        // automatically handle clicks on the Home/Up button, so long\n        // as you specify a parent activity in AndroidManifest.xml.\n        var fragment: Fragment? = null\n\n        when (item.itemId) {\n            R.id.action_alert -&gt; {\n                showDialog()\n                return true\n            }\n            else -&gt; return super.onOptionsItemSelected(item)\n        }\n    }\n\n    fun showDialog(){\n        mydialog = Dialog(this, R.style.DialogCustomTheme)\n        mydialog.requestWindowFeature(Window.FEATURE_NO_TITLE)\n        mydialog.setContentView(R.layout.alerts_dialog_remi)\n\n        txt = mydialog.findViewById(R.id.close_modal_alerte)\n        txt.isEnabled = true\n        txt.setOnClickListener{\n            mydialog.cancel()\n        }\n        mydialog.show()\n    }\n</code></pre>\n\n<p>And in AlertsDialogRemi.xml, I have this : </p>\n\n<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n\n    val alerts = arrayOf(\"AlertsDialogRemi 1\", \"AlertsDialogRemi 2\", \"AlertsDialogRemi 3\")\n    for(alert in alerts){\n        Log.i(TAG, \"Alert : $alert\")\n    }\n</code></pre>\n\n<p>I have this <strong>error</strong> in my logs when I'm trying to access alerts variable in AlertDialogRemi.kt: </p>\n\n<blockquote>\n  <p>W/RenderThread: type=1400 audit(0.0:6789172): avc: denied { read } for\n  name=\"perf_ioctl\" dev=\"proc\" ino=4026533700\n  scontext=u:r:untrusted_app:s0:c512,c768 tcontext=u:object_r:proc:s0\n  tclass=file permissive=0</p>\n</blockquote>\n\n<p>It's weird because I do the same thing in another Fragment (Accueil.kt) but I have no problem at all.</p>\n\n<p>EDIT : \nApparently, this is due to the dialog, if I call the fragment without the dialog, I have my data. So what should I change ?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "edited": false, "score": 1, "creation_date": 1542016147, "post_id": 53259514, "comment_id": 93403436, "body": "Can you post your manifest? It seems like you didn&#39;t update it to use your class instead of the default application"}, {"owner": {"reputation": 1320, "user_id": 5502638, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cMg8M.jpg?s=128&g=1", "display_name": "Akash Dubey", "link": "https://stackoverflow.com/users/5502638/akash-dubey"}, "edited": false, "score": 0, "creation_date": 1542016242, "post_id": 53259514, "comment_id": 93403479, "body": "Why one will pass object of whole application&#39;s context if work gets done by only activity&#39;s context!!"}, {"owner": {"reputation": 101, "user_id": 10320361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QMDeLs6gz_A/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP6ZjlGncW7UimHkTM2xjcZRvxbig/mo/photo.jpg?sz=128", "display_name": "John Paoletto", "link": "https://stackoverflow.com/users/10320361/john-paoletto"}, "reply_to_user": {"reputation": 1320, "user_id": 5502638, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cMg8M.jpg?s=128&g=1", "display_name": "Akash Dubey", "link": "https://stackoverflow.com/users/5502638/akash-dubey"}, "edited": false, "score": 0, "creation_date": 1542021177, "post_id": 53259514, "comment_id": 93406190, "body": "@Akash because it runs <b>before</b> the first activity&#39;s onCreate"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 10320361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QMDeLs6gz_A/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP6ZjlGncW7UimHkTM2xjcZRvxbig/mo/photo.jpg?sz=128", "display_name": "John Paoletto", "link": "https://stackoverflow.com/users/10320361/john-paoletto"}, "edited": false, "score": 0, "creation_date": 1542021140, "post_id": 53259710, "comment_id": 93406169, "body": "Thanks a ton @Bedant!"}], "tags": [], "owner": {"reputation": 306, "user_id": 1980177, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/100000146321786/picture?type=large", "display_name": "Bedant", "link": "https://stackoverflow.com/users/1980177/bedant"}, "is_accepted": true, "score": 4, "last_activity_date": 1542016692, "creation_date": 1542016692, "answer_id": 53259710, "question_id": 53259514, "link": "https://stackoverflow.com/questions/53259514/code-not-executing-on-applications-oncreate-kotlin-android/53259710#53259710", "title": "Code Not Executing on Application&#39;s onCreate - Kotlin/Android", "body": "<pre><code>     &lt;application\n        -------\n        android:name=\".MyApplication\"\n        ------\n       &gt;\n</code></pre>\n\n<p>Add this to your manifest file.</p>\n"}], "owner": {"reputation": 101, "user_id": 10320361, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QMDeLs6gz_A/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP6ZjlGncW7UimHkTM2xjcZRvxbig/mo/photo.jpg?sz=128", "display_name": "John Paoletto", "link": "https://stackoverflow.com/users/10320361/john-paoletto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 1, "accepted_answer_id": 53259710, "answer_count": 1, "score": 2, "last_activity_date": 1542016692, "creation_date": 1542016096, "question_id": 53259514, "link": "https://stackoverflow.com/questions/53259514/code-not-executing-on-applications-oncreate-kotlin-android", "title": "Code Not Executing on Application&#39;s onCreate - Kotlin/Android", "body": "<p>Can you please help me understand why I can't run the line <strong>SoundManager.initialize(this)</strong> within Application's onCreate?</p>\n\n<pre><code>    class MyApplication : Application() {\n\noverride fun onCreate() {\n    super.onCreate()\n    SoundManager.initialize(this)\n    }\n}\n</code></pre>\n\n<p>from</p>\n\n<pre><code>    class SoundManager {\n\nvar soundPool: SoundPool\nvar c3 = 0\n\ninit {\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP) {\n        soundPool = SoundPool.Builder().setMaxStreams(13).build()\n    } else {\n        soundPool = SoundPool(13, AudioManager.STREAM_MUSIC, 5)\n    }\n}\n\nfun loadSound(context: Context) {\n    c3 = soundPool.load(context, R.raw.c3, 1)\n}\n\nfun playSound() {\n    soundPool.play(c3, 1.0f, 1.0f, 0, 0, 1.0f)\n}\n\ncompanion object {\n\n    private var singleton: SoundManager? = null\n\n    fun initialize(context: Context) {\n        val soundManager = instance\n        soundManager.loadSound(context)\n    }\n\n    val instance: SoundManager\n        @Synchronized get() {\n            if (singleton == null) {\n                singleton = SoundManager()\n            }\n            return singleton as SoundManager\n        }\n    }\n}\n</code></pre>\n\n<p>I've found a workaround by calling SoundManager.initialize(this) inside my first Activity's onCreate function, but I'm curious as to why I can't have it run with Application's onCreate. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["android", "kotlin", "android-espresso"], "comments": [{"owner": {"reputation": 3161, "user_id": 10510491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4QsPKELpII/AAAAAAAAAAI/AAAAAAAAV14/3oA6QmFw68U/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10510491/aaron"}, "edited": false, "score": 0, "creation_date": 1542014266, "post_id": 53258793, "comment_id": 93402480, "body": "Could you post the error?"}, {"owner": {"reputation": 816, "user_id": 7790894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/64dbd258a08b9a0bd7e5512820a987bd?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7790894/john"}, "reply_to_user": {"reputation": 3161, "user_id": 10510491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4QsPKELpII/AAAAAAAAAAI/AAAAAAAAV14/3oA6QmFw68U/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10510491/aaron"}, "edited": false, "score": 0, "creation_date": 1542073559, "post_id": 53258793, "comment_id": 93428361, "body": "@Aaron I added error log"}], "answers": [{"tags": [], "owner": {"reputation": 3161, "user_id": 10510491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4QsPKELpII/AAAAAAAAAAI/AAAAAAAAV14/3oA6QmFw68U/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10510491/aaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1542074906, "creation_date": 1542074906, "answer_id": 53272752, "question_id": 53258793, "link": "https://stackoverflow.com/questions/53258793/espresso-how-to-check-an-item-from-recyclerview-consists-of-certain-layout/53272752#53272752", "title": "Espresso, how to check an item from RecyclerView consists of certain layout", "body": "<p>I think here's the problem:</p>\n\n<pre><code>onView(withRecyclerView(recyclerViewResId).atPosition(0))\n        .check(matches(withId(com.xx.yy.R.layout.item_camera)))\n</code></pre>\n\n<p>You're trying to match an id with a layout, which of course is incorrect. You can only use a resource id on <code>withId</code>, not others.</p>\n"}], "owner": {"reputation": 816, "user_id": 7790894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/64dbd258a08b9a0bd7e5512820a987bd?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7790894/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 567, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542074906, "creation_date": 1542013354, "last_edit_date": 1542073528, "question_id": 53258793, "link": "https://stackoverflow.com/questions/53258793/espresso-how-to-check-an-item-from-recyclerview-consists-of-certain-layout", "title": "Espresso, how to check an item from RecyclerView consists of certain layout", "body": "<p>Hi my grid recycler view's 0th item should be always camera and\nother items should be always video contents.</p>\n\n<p>To check 0th item has layout of com.xx.yy.R.layout.item_camera\nI tried like this:</p>\n\n<blockquote>\n  <p>onView(withRecyclerView(recyclerViewResId).atPosition(0)).check(matches(withId(com.xx.yy.R.layout.item_camera)))</p>\n</blockquote>\n\n<p>But it doesn't work, someone knows what I miss?</p>\n\n<p>This is helper class:</p>\n\n<pre><code>fun withRecyclerView(recyclerViewId: Int) = RecyclerViewTestHelper.RecyclerViewMatcher(recyclerViewId)\n\nobject RecyclerViewTestHelper {\n\n    class RecyclerViewMatcher(private val recyclerViewId: Int) {\n\n        fun atPosition(position: Int): Matcher&lt;View&gt; {\n            return atPositionOnView(position, -1)\n        }\n\n        fun atPositionOnView(position: Int, targetViewId: Int): Matcher&lt;View&gt; {\n\n            return object : TypeSafeMatcher&lt;View&gt;() {\n                var resources: Resources? = null\n                var childView: View? = null\n\n                override fun describeTo(description: Description) {\n                    var idDescription = Integer.toString(recyclerViewId)\n                    if (this.resources != null) {\n                        try {\n                            idDescription = this.resources!!.getResourceName(recyclerViewId)\n                        } catch (var4: Resources.NotFoundException) {\n                            idDescription = String.format(\"%s (resource name not found)\",\n                                    *arrayOf&lt;Any&gt;(Integer.valueOf(recyclerViewId)))\n                        }\n\n                    }\n\n                    description.appendText(\"with id: $idDescription\")\n                }\n\n                override fun matchesSafely(view: View): Boolean {\n\n                    this.resources = view.getResources()\n\n                    if (childView == null) {\n                        val recyclerView = view.getRootView().findViewById(recyclerViewId) as RecyclerView\n                        if (recyclerView != null &amp;&amp; recyclerView!!.getId() === recyclerViewId) {\n                            childView = recyclerView!!.findViewHolderForAdapterPosition(position).itemView\n                        } else {\n                            return false\n                        }\n                    }\n\n                    if (targetViewId == -1) {\n                        return view === childView\n                    } else {\n                        val targetView = childView!!.findViewById&lt;View&gt;(targetViewId)\n                        return view === targetView\n                    }\n\n                }\n            }\n        }\n\n        fun withResourceId(position: Int, targetViewId: Int): Matcher&lt;View&gt; {\n\n            return object : TypeSafeMatcher&lt;View&gt;() {\n                var resources: Resources? = null\n                var childView: View? = null\n\n                override fun describeTo(description: Description) {\n                    var idDescription = Integer.toString(recyclerViewId)\n                    if (this.resources != null) {\n                        try {\n                            idDescription = this.resources!!.getResourceName(recyclerViewId)\n                        } catch (var4: Resources.NotFoundException) {\n                            idDescription = String.format(\"%s (resource name not found)\",\n                                    *arrayOf&lt;Any&gt;(Integer.valueOf(recyclerViewId)))\n                        }\n\n                    }\n\n                    description.appendText(\"with id: $idDescription\")\n                }\n\n                override fun matchesSafely(view: View): Boolean {\n\n                    this.resources = view.getResources()\n\n                    if (childView == null) {\n                        val recyclerView = view.getRootView().findViewById(recyclerViewId) as RecyclerView\n                        if (recyclerView != null &amp;&amp; recyclerView!!.getId() === recyclerViewId) {\n                            childView = recyclerView!!.findViewHolderForAdapterPosition(position).itemView\n                        } else {\n                            return false\n                        }\n                    }\n\n                    if (targetViewId == -1) {\n                        return view === childView\n                    } else {\n                        val targetView = childView!!.findViewById&lt;View&gt;(targetViewId)\n                        return view === targetView\n                    }\n\n                }\n            }\n        }\n    }\n\n    class CustomAssertions {\n        companion object {\n            fun hasItemCount(count: Int): ViewAssertion {\n                return RecyclerViewItemCountAssertion(count)\n            }\n        }\n\n        private class RecyclerViewItemCountAssertion(private val count: Int) : ViewAssertion {\n\n            override fun check(view: View, noViewFoundException: NoMatchingViewException?) {\n                if (noViewFoundException != null) {\n                    throw noViewFoundException\n                }\n\n                if (view !is RecyclerView) {\n                    throw IllegalStateException(\"The asserted view is not RecyclerView\")\n                }\n\n                if (view.adapter == null) {\n                    throw IllegalStateException(\"No adapter is assigned to RecyclerView\")\n                }\n                ViewMatchers.assertThat(\"RecyclerView item count\", view.adapter.itemCount, CoreMatchers.equalTo(count))\n            }\n        }\n    }\n\n    class HintTextColorMatcher private constructor(private val color: Int) : BoundedMatcher&lt;View, TextView&gt;(TextView::class.java) {\n        override fun matchesSafely(item: TextView): Boolean {\n            return item.currentHintTextColor == color\n        }\n\n        override fun describeTo(description: Description) {\n            description.appendText(\"with hint text color:\")\n                    .appendValue(color)\n        }\n\n        companion object {\n            fun withHintTextColor(color: Int): HintTextColorMatcher {\n                return HintTextColorMatcher(color)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Error log:</p>\n\n<pre><code>android.support.test.espresso.base.DefaultFailureHandler$AssertionFailedWithCauseError: 'with id: 2131427448' doesn't match the selected view.\nExpected: with id: jp.naver.line.android.beta:layout/media_content_item\nGot: \"RelativeLayout{id=-1, visibility=VISIBLE, width=477, height=476, has-focus=false, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=964.0, y=3.0, child-count=10}\"\n\nat dalvik.system.VMStack.getThreadStackTrace(Native Method)\nat java.lang.Thread.getStackTrace(Thread.java:1566)\nat android.support.test.espresso.base.DefaultFailureHandler.getUserFriendlyError(DefaultFailureHandler.java:92)\nat android.support.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:56)\nat android.support.test.espresso.ViewInteraction.runSynchronouslyOnUiThread(ViewInteraction.java:184)\nat android.support.test.espresso.ViewInteraction.check(ViewInteraction.java:158)\nat gallery.android.line.naver.jp.line_android_gallery.RobotActions.BaseActions.checkRecyclerViewItemRes(BaseActions.kt:46)\nat gallery.android.line.naver.jp.line_android_gallery.RobotActions.PickerActivityActions.clickFirstMediaItem(PickerActivityActions.kt:42)\nat gallery.android.line.naver.jp.line_android_gallery.GalleryInstruTest$launchPickerForAllTest$2.invoke(GalleryInstruTest.kt:76)\nat gallery.android.line.naver.jp.line_android_gallery.GalleryInstruTest$launchPickerForAllTest$2.invoke(GalleryInstruTest.kt:20)\nat gallery.android.line.naver.jp.line_android_gallery.RobotActions.PickerActivityActionsKt.picker(PickerActivityActions.kt:9)\nat gallery.android.line.naver.jp.line_android_gallery.GalleryInstruTest.launchPickerForAllTest(GalleryInstruTest.kt:72)\nat java.lang.reflect.Method.invoke(Native Method)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\nat android.support.test.internal.statement.UiThreadStatement.evaluate(UiThreadStatement.java:55)\nat android.support.test.rule.ActivityTestRule$ActivityStatement.evaluate(ActivityTestRule.java:270)\nat org.junit.rules.RunRules.evaluate(RunRules.java:20)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.junit.runners.Suite.runChild(Suite.java:128)\nat org.junit.runners.Suite.runChild(Suite.java:27)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\nat org.junit.runner.JUnitCore.run(JUnitCore.java:115)\nat android.support.test.internal.runner.TestExecutor.execute(TestExecutor.java:59)\nat android.support.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:262)\nat android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1939)\nCaused by: junit.framework.AssertionFailedError: 'with id: 2131427448' doesn't match the selected view.\nExpected: with id: jp.naver.line.android.beta:layout/media_content_item\nGot: \"RelativeLayout{id=-1, visibility=VISIBLE, width=477, height=476, has-focus=false, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=964.0, y=3.0, child-count=10}\"\n\nat android.support.test.espresso.matcher.ViewMatchers.assertThat(ViewMatchers.java:1053)\nat android.support.test.espresso.assertion.ViewAssertions$2.check(ViewAssertions.java:89)\nat android.support.test.espresso.ViewInteraction$2.run(ViewInteraction.java:170)\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:428)\nat java.util.concurrent.FutureTask.run(FutureTask.java:237)\nat android.os.Handler.handleCallback(Handler.java:751)\nat android.os.Handler.dispatchMessage(Handler.java:95)\nat android.os.Looper.loop(Looper.java:154)\nat android.app.ActivityThread.main(ActivityThread.java:6316)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:872)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:762)\n</code></pre>\n"}, {"tags": ["android", "xml", "android-layout", "kotlin"], "comments": [{"owner": {"reputation": 5, "user_id": 7490156, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155593094085021/picture?type=large", "display_name": "Oskar Gustavsson", "link": "https://stackoverflow.com/users/7490156/oskar-gustavsson"}, "edited": false, "score": 0, "creation_date": 1547194032, "post_id": 53258682, "comment_id": 95116104, "body": "So after getting back to this issue as im nearing release, I found the issue for anyone else interested:  Using Ripple with selector with exitFadeDuration makes the background resource not appear before you click it. I have no idea why but removing it makes it now work in all colors :D"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7490156, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155593094085021/picture?type=large", "display_name": "Oskar Gustavsson", "link": "https://stackoverflow.com/users/7490156/oskar-gustavsson"}, "edited": false, "score": 0, "creation_date": 1542111972, "post_id": 53260518, "comment_id": 93443575, "body": "Thanks for your responses, however im not sure what you mean, my issue is not that its not correct in the XML its that Android 5 doesnt render it correctly until I press it the first time. If you look at the correct picture there are 2 buttons and both of thoose are correct, and they look like that in all android versions above 5. The left ones are from Android 5 where the xml doesnt seem to apply until I press the button one time..."}], "tags": [], "owner": {"reputation": 64, "user_id": 4814110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agLAd.jpg?s=128&g=1", "display_name": "Muhammad Waqas", "link": "https://stackoverflow.com/users/4814110/muhammad-waqas"}, "is_accepted": false, "score": 0, "last_activity_date": 1542019570, "creation_date": 1542019570, "answer_id": 53260518, "question_id": 53258682, "link": "https://stackoverflow.com/questions/53258682/custom-appcompatbutton-getting-wrong-colors-on-android-5-api-21/53260518#53260518", "title": "Custom AppCompatButton getting wrong colors on Android 5 (Api 21)", "body": "<pre><code>&lt;shape xmlns:android=\"http://schemas.android.com/apk/res/android\" android:shape=\"rectangle\" &gt;\n&lt;corners\n    android:radius=\"5dp\"\n    /&gt;\n&lt;solid\n    android:color=\"@color/Transparent\"\n    /&gt;\n</code></pre>\n\n<p></p>\n\n<p>just use this as background you are using on pressed state in your file</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 7490156, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155593094085021/picture?type=large", "display_name": "Oskar Gustavsson", "link": "https://stackoverflow.com/users/7490156/oskar-gustavsson"}, "edited": false, "score": 0, "creation_date": 1542112006, "post_id": 53260564, "comment_id": 93443596, "body": "See comment above, Im pretty sure its not an XML issue, but something with Android 5"}, {"owner": {"reputation": 5, "user_id": 7490156, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155593094085021/picture?type=large", "display_name": "Oskar Gustavsson", "link": "https://stackoverflow.com/users/7490156/oskar-gustavsson"}, "edited": false, "score": 0, "creation_date": 1547797021, "post_id": 53260564, "comment_id": 95323139, "body": "Finally got this to work! Solution was to remove   <code>android:exitFadeDuration=&quot;@android:integer&#47;config_mediumAnim&zwnj;&#8203;Time&quot; android:enterFadeDuration=&quot;@android:integer&#47;config_shortAnim&zwnj;&#8203;Time&quot;</code>"}], "tags": [], "owner": {"reputation": 64, "user_id": 4814110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agLAd.jpg?s=128&g=1", "display_name": "Muhammad Waqas", "link": "https://stackoverflow.com/users/4814110/muhammad-waqas"}, "is_accepted": true, "score": 0, "last_activity_date": 1542019768, "creation_date": 1542019768, "answer_id": 53260564, "question_id": 53258682, "link": "https://stackoverflow.com/questions/53258682/custom-appcompatbutton-getting-wrong-colors-on-android-5-api-21/53260564#53260564", "title": "Custom AppCompatButton getting wrong colors on Android 5 (Api 21)", "body": "<pre><code>&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n&lt;item&gt;\n    &lt;shape &gt;\n        &lt;solid android:color=\"@android:color/white\"/&gt;\n        &lt;size android:height=\"1dp\"/&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n&lt;item  android:bottom=\"2dip\" android:top=\"2dip\" android:left=\"2dip\" android:right=\"2dip\"&gt;\n    &lt;shape&gt;\n        &lt;solid android:color=\"@android:color/Transparent\"/&gt;\n    &lt;/shape&gt;\n&lt;/item&gt;\n</code></pre>\n\n<p></p>\n\n<p>this is exactly look like your correct button</p>\n"}], "owner": {"reputation": 5, "user_id": 7490156, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155593094085021/picture?type=large", "display_name": "Oskar Gustavsson", "link": "https://stackoverflow.com/users/7490156/oskar-gustavsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 53260564, "answer_count": 2, "score": 0, "last_activity_date": 1547797159, "creation_date": 1542012952, "last_edit_date": 1547797159, "question_id": 53258682, "link": "https://stackoverflow.com/questions/53258682/custom-appcompatbutton-getting-wrong-colors-on-android-5-api-21", "title": "Custom AppCompatButton getting wrong colors on Android 5 (Api 21)", "body": "<p>So I've implemented a custom button for our app, the implementation works perfect on Android 6 and up but I run into an issue on Android 5, where the background color doesn't get applied until I press the button once. Then it looks as it should. </p>\n\n<ul>\n<li><a href=\"https://i.stack.imgur.com/vNQFU.png\" rel=\"nofollow noreferrer\">Buttons not correct</a></li>\n<li><a href=\"https://i.stack.imgur.com/dxyBE.png\" rel=\"nofollow noreferrer\">Buttons correct</a></li>\n</ul>\n\n<p>The implementation looks like this:</p>\n\n<pre><code>class MpButton @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = R.style.ButtonStyle) : AppCompatButton(context, attrs, defStyleAttr) {\n\nprivate val toScale = 0.9f\nprivate val fromScale = 1f\n\ninit {\n    var style = 0\n    var allCaps = false\n\n    attrs?.let {\n        val a = context.obtainStyledAttributes(it, R.styleable.MpButton)\n        style = a.getInt(R.styleable.MpButton_MpButtonColor, 0)\n        allCaps = a.getBoolean(R.styleable.MpButton_MpButtonAllcaps, false)\n        a.recycle()\n    }\n\n    when (style) {\n        WHITE -&gt; {\n            this.setBackgroundResource(R.drawable.mp_button_white)\n            this.setTextColor(ContextCompat.getColor(context, R.color.white))\n        }\n        RED -&gt; {\n            this.setBackgroundResource(R.drawable.mp_button_red)\n            this.setTextColor(ContextCompat.getColor(context, R.color.white))\n        }\n        BLACK -&gt; {\n            this.setBackgroundResource(R.drawable.mp_button_black)\n            this.setTextColor(ContextCompat.getColor(context, R.color.mp_black))\n        }\n        BLUE -&gt; {\n            this.setBackgroundResource(R.drawable.mp_button_blue)\n            this.setTextColor(ContextCompat.getColor(context, R.color.white))\n        }\n        YELLOW -&gt; {\n            this.setBackgroundResource(R.drawable.mp_button_yellow)\n            this.setTextColor(ContextCompat.getColor(context, R.color.white))\n        }\n        else -&gt; {\n            this.setBackgroundResource(R.drawable.mp_button_green)\n            this.setTextColor(ContextCompat.getColor(context, R.color.white))\n        }\n    }\n\n    this.gravity = Gravity.CENTER\n    val padding = Utils.convertDpToPixel(context, 5)\n    this.setPadding(padding, padding, padding, padding)\n    this.isAllCaps = allCaps\n}\n\noverride fun dispatchTouchEvent(event: MotionEvent): Boolean {\n    when(event.action) {\n        MotionEvent.ACTION_DOWN -&gt; {\n            this.animate().scaleX(toScale).scaleY(toScale).setDuration(100).start()\n        }\n        MotionEvent.ACTION_UP -&gt; {\n            this.animate().scaleX(fromScale).scaleY(fromScale).setDuration(100).start()\n        }\n    }\n    return super.dispatchTouchEvent(event)\n}\n\ncompanion object {\n    const val WHITE = 1\n    const val RED = 2\n    const val BLACK = 3\n    const val BLUE = 4\n    const val YELLOW = 5\n}\n}\n</code></pre>\n\n<p>For info Ill also add the XML for one of the colors:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;ripple xmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:color=\"@color/mp_black\"&gt;\n&lt;item&gt;\n    &lt;selector\n        android:exitFadeDuration=\"@android:integer/config_mediumAnimTime\"\n        android:enterFadeDuration=\"@android:integer/config_shortAnimTime\"&gt;\n        &lt;item android:state_enabled=\"true\" android:state_pressed=\"false\"&gt;\n            &lt;shape android:shape=\"rectangle\"&gt;\n                &lt;corners android:radius=\"30dp\"/&gt;\n                &lt;solid android:color=\"@color/jungle_green\" /&gt;\n            &lt;/shape&gt;\n        &lt;/item&gt;\n        &lt;item android:state_enabled=\"true\" android:state_pressed=\"true\"&gt;\n            &lt;shape android:shape=\"rectangle\"&gt;\n                &lt;corners android:radius=\"30dp\"/&gt;\n                &lt;solid android:color=\"@color/forest\" /&gt;\n            &lt;/shape&gt;\n        &lt;/item&gt;\n        &lt;item android:state_enabled=\"false\"&gt;\n            &lt;shape android:shape=\"rectangle\"&gt;\n                &lt;corners android:radius=\"30dp\"/&gt;\n                &lt;solid android:color=\"@color/mp_gray_5\" /&gt;\n            &lt;/shape&gt;\n        &lt;/item&gt;\n    &lt;/selector&gt;\n&lt;/item&gt;\n&lt;/ripple&gt;\n</code></pre>\n\n<p>As a last ill copy the part of the XML of the view aswell to give as much info as possible:</p>\n\n<pre><code>&lt;se.motesplatsen.app.ui.controls.MpButton\n    android:id=\"@+id/btnStartLogin\"\n    android:layout_width=\"220dp\"\n    android:layout_height=\"44dp\"\n    android:text=\"@string/DEFAULT_LOGIN\"\n    android:layout_marginBottom=\"10dp\"\n    android:layout_marginTop=\"20dp\"\n    app:MpButtonAllcaps=\"true\"\n    app:layout_constraintVertical_chainStyle=\"packed\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintLeft_toLeftOf=\"parent\"\n    app:layout_constraintRight_toRightOf=\"parent\"\n    app:layout_constraintTop_toBottomOf=\"@id/btnStartBecomeMember\"/&gt;\n\n&lt;se.motesplatsen.app.ui.controls.MpButton\n    android:id=\"@+id/btnStartBecomeMember\"\n    android:layout_width=\"220dp\"\n    android:layout_height=\"44dp\"\n    android:layout_marginTop=\"25dp\"\n    android:text=\"@string/BECOME_MEMBER_BUTTON\"\n    app:MpButtonColor=\"1\"\n    app:MpButtonAllcaps=\"true\"\n    app:layout_constraintVertical_chainStyle=\"packed\"\n    app:layout_constraintTop_toBottomOf=\"@id/tvStartDesc\"\n    app:layout_constraintLeft_toLeftOf=\"parent\"\n    app:layout_constraintRight_toRightOf=\"parent\"\n    app:layout_constraintBottom_toTopOf=\"@id/btnStartLogin\"/&gt;\n</code></pre>\n\n<p><strong>UPDATE &amp; SOLUTION!:</strong> \nFinally got this to work! Solution was to remove </p>\n\n<p><code>android:exitFadeDuration=\"@android:integer/config_mediumAnimTime\"\nandroid:enterFadeDuration=\"@android:integer/config_shortAnimTime\"</code></p>\n\n<p>Im guessing it somehow interferes with the ripple animation on certain Android versions. So for anyone else that have my issue, check so you dont have Ripple togheter with fadeduration in the selector :)!</p>\n"}, {"tags": ["android", "kotlin", "build.gradle", "default-method", "jvm-default"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542028257, "post_id": 53257163, "comment_id": 93409993, "body": "The sourceCompatibilty option is an option that affects the Java compiler. Kotlin has separate options, and you aren&#39;t setting those."}, {"owner": {"reputation": 4780, "user_id": 3926506, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ex7wk.jpg?s=128&g=1", "display_name": "XIII-th", "link": "https://stackoverflow.com/users/3926506/xiii-th"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542078981, "post_id": 53257163, "comment_id": 93429470, "body": "@yole you need to share link to original question if you mark my question as duplicate"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542105032, "post_id": 53257163, "comment_id": 93439763, "body": "I did. See the top of the question."}, {"owner": {"reputation": 4780, "user_id": 3926506, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ex7wk.jpg?s=128&g=1", "display_name": "XIII-th", "link": "https://stackoverflow.com/users/3926506/xiii-th"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542109166, "post_id": 53257163, "comment_id": 93442182, "body": "@yole I missed it. Thank you"}], "owner": {"reputation": 4780, "user_id": 3926506, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ex7wk.jpg?s=128&g=1", "display_name": "XIII-th", "link": "https://stackoverflow.com/users/3926506/xiii-th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 428, "favorite_count": 0, "closed_date": 1542028227, "answer_count": 0, "score": 0, "last_activity_date": 1542005622, "creation_date": 1542005622, "question_id": 53257163, "link": "https://stackoverflow.com/questions/53257163/jvmdefault-not-found-sourcecompatibility-targetcompatibility-assigned-by-projec", "closed_reason": "Duplicate", "title": "@JvmDefault not found sourceCompatibility/targetCompatibility assigned by project variable", "body": "<p>I want to provide default implementation for method in my Kotlin interface:</p>\n\n<pre><code>interface INavItem : Comparable&lt;INavItem&gt; {\n\n    val order: Int\n\n    @JvmDefault\n    override fun compareTo(other: INavItem): Int = order.compareTo(other.order)\n}\n</code></pre>\n\n<p>but <code>@JvmDefault</code> highlighted with error:</p>\n\n<blockquote>\n  <p>'@JvmDefault' is only supported since JVM target 1.8. Recompile with '-jvm-target 1.8</p>\n</blockquote>\n\n<hr>\n\n<p>JVM target 1.8 setting is present in <em>root project</em> build file:</p>\n\n<pre><code>project.ext {\n    javaVersion = JavaVersion.VERSION_1_8\n    // other properties\n}\n</code></pre>\n\n<p>and I use it inside of <em>module</em> build file:</p>\n\n<pre><code>android {\n\n    compileOptions {\n        sourceCompatibility rootProject.ext.javaVersion\n        targetCompatibility rootProject.ext.javaVersion\n    }\n    // ...\n}\n</code></pre>\n\n<p>Note: Java 8 features (lambdas, etc...) are available in java sources.</p>\n\n<hr>\n\n<p>Is exist any way to assign <code>source/targetCompatibility</code> by variables visible for Kotlin lint?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1542004165, "post_id": 53256901, "comment_id": 93398282, "body": "Did it looses its value ?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1542013002, "post_id": 53256901, "comment_id": 93401835, "body": "No, most likely they were talking about process being killed by the OS (see <a href=\"https://medium.com/inloopx/android-process-kill-and-the-big-implications-for-your-app-1ecbed4921cb\" rel=\"nofollow noreferrer\">medium.com/inloopx/&hellip;</a> and <a href=\"https://developer.android.com/guide/components/activities/process-lifecycle\" rel=\"nofollow noreferrer\">developer.android.com/guide/components/activities/&hellip;</a>). But Kotlin version isn&#39;t relevant here."}], "answers": [{"tags": [], "owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "is_accepted": false, "score": 3, "last_activity_date": 1542016376, "last_edit_date": 1542016376, "creation_date": 1542005717, "answer_id": 53257186, "question_id": 53256901, "link": "https://stackoverflow.com/questions/53256901/object-in-kotlin-loosing-it-var-values/53257186#53257186", "title": "Object in Kotlin loosing it var values?", "body": "<p>It should not lose the values it contains because when you create a new class as an object you create it as a thread-safe singleton.</p>\n\n<p>Which means unless you directly change the value somewhere else, the value should stay the same as the original value.</p>\n\n<p>That's all in case your application is still alive, in case your application is killed/ destroyed the whole class would also be destroyed with it.</p>\n"}], "owner": {"reputation": 2877, "user_id": 3553494, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ZoUgd.png?s=128&g=1", "display_name": "HixField", "link": "https://stackoverflow.com/users/3553494/hixfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542016376, "creation_date": 1542004079, "question_id": 53256901, "link": "https://stackoverflow.com/questions/53256901/object-in-kotlin-loosing-it-var-values", "title": "Object in Kotlin loosing it var values?", "body": "<p>I recently made the transition from iOS/Swift to Androi/Kotlin. I am using a object for encapsulating Analytics functionality (as I did in Swift):</p>\n\n<pre><code>Object Analytics{\nvar connection: AnalyticsConnection? = null\nfun sendEvent(name: String)...\ninit {\nconnection = //allocate here\n}\n}\n</code></pre>\n\n<p>I heard (one of our Android devs mentioned it) that in the latest version of kotlin the var <code>connection</code> could actually loose it value at some point spontanically? I find this very weird, is this true? It seams that vars at global scope get cleared out at some point?</p>\n"}, {"tags": ["java", "android", "kotlin", "augmented-reality", "arcore"], "comments": [{"owner": {"reputation": 1775, "user_id": 9242491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBgTi.jpg?s=128&g=1", "display_name": "Ali Kanat", "link": "https://stackoverflow.com/users/9242491/ali-kanat"}, "edited": false, "score": 0, "creation_date": 1542010539, "post_id": 53256147, "comment_id": 93400709, "body": "Maybe you can visualize the feature points and check if your  vertical plane has enough features to be detected."}], "answers": [{"tags": [], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "is_accepted": false, "score": 2, "last_activity_date": 1569513629, "last_edit_date": 1569513629, "creation_date": 1542019889, "answer_id": 53260589, "question_id": 53256147, "link": "https://stackoverflow.com/questions/53256147/android-unable-to-detect-vertical-plane/53260589#53260589", "title": "Android: Unable to detect vertical plane", "body": "<p>Firstly, you need an appropriate vertical surface for tracking. Wall with a solid color (with no distinguishing features on it) is very bad instance. The most robust approach for tracking of a vertical surface is a well lit brick wall, or a wall with pictures on it, etc.</p>\n\n<p><a href=\"https://i.stack.imgur.com/BJ6OE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BJ6OE.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Secondly, the easiest way of creating an <code>Anchor</code> in the center of your detected plane is to use the following code (make sure you call it once, so it couldn't create a new <code>Anchor</code> on every update):</p>\n\n<pre><code>Anchor newAnchor;\n\nfor (Plane plane : mSession.getAllTrackables(Plane.class)) {\n\n    if (plane.getType() == Plane.Type.VERTICAL &amp;&amp;\n        plane.getTrackingState() == TrackingState.TRACKING) {\n\n        newAnchor = plane.createAnchor(plane.getCenterPose());\n        break;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10612970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RKgCa.png?s=128&g=1", "display_name": "Hemal Patel", "link": "https://stackoverflow.com/users/10612970/hemal-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569513629, "creation_date": 1541998416, "last_edit_date": 1556338496, "question_id": 53256147, "link": "https://stackoverflow.com/questions/53256147/android-unable-to-detect-vertical-plane", "title": "Android: Unable to detect vertical plane", "body": "<p>I am trying to detect a vertical plane like wall to add image view on a vertical plane. But did not find the vertical plane. As per the default config for a session that can find both planes as a horizontal and vertical plane. But unable to find a vertical plan.</p>\n\n<p>How to find a vertical plane in android application?</p>\n\n<p>Please help me.</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1541972666, "post_id": 53253505, "comment_id": 93391657, "body": "Your code does define your own variable, and is not modifying anything. The completion suggestion shows that there is a library type that you can use, but since you&#39;re initializing the variable with the value of 10, its type will be Int, and not the Channel type shown in the autocomplete popup. The wifi disconnections are not caused by your code."}, {"owner": {"reputation": 21, "user_id": 5601367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a81b1bb30836557ded1a5ddbd8b8d69?s=128&d=identicon&r=PG&f=1", "display_name": "Israphel", "link": "https://stackoverflow.com/users/5601367/israphel"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1541972979, "post_id": 53253505, "comment_id": 93391723, "body": "@yole The thing is, simple socket code also works if I change the variable name, but doesn&#39;t work if I keep it as &quot;channel&quot; even though I dont use it anywhere. var socket = Socket(&quot;10.0.0.10&quot;, 1010) on another thread."}, {"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1541973189, "post_id": 53253505, "comment_id": 93391775, "body": "Can you post the code as code and not as image please? Makes it easier to try it."}, {"owner": {"reputation": 21, "user_id": 5601367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a81b1bb30836557ded1a5ddbd8b8d69?s=128&d=identicon&r=PG&f=1", "display_name": "Israphel", "link": "https://stackoverflow.com/users/5601367/israphel"}, "reply_to_user": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1541973470, "post_id": 53253505, "comment_id": 93391857, "body": "@leonardkraemer sure, i added the code now"}, {"owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 0, "creation_date": 1541973800, "post_id": 53253505, "comment_id": 93391942, "body": "First of all, there&#39;s no such thing as altering (overriding) variables (fields) in JVM code. The only way this could&#39;ve gone wrong is if <code>AppCompatActivity</code> or any of its parents had <code>getChannel()</code> or <code>setChannel()</code> methods, but in this case the Kotlin compiler would&#39;ve failed to compile your code because it expected the property to have the <code>override</code> modifier. I think the behavior you&#39;re observing is purely coincidental."}, {"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1541974254, "post_id": 53253505, "comment_id": 93392063, "body": "minimum viable example is actually just <code>class Clazz {     var channel = 20 }</code> in an androit-kotlin project. I suspect it is a visuall bug in android studio. You cant ctrl-b to the usage."}, {"owner": {"reputation": 21, "user_id": 5601367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a81b1bb30836557ded1a5ddbd8b8d69?s=128&d=identicon&r=PG&f=1", "display_name": "Israphel", "link": "https://stackoverflow.com/users/5601367/israphel"}, "reply_to_user": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 1, "creation_date": 1541974404, "post_id": 53253505, "comment_id": 93392090, "body": "@Egor setChannel and getChannel was what i meant with &quot;altering&quot; since Kotlin changes obj.setChannel(10) to obj.channel=10. But yes, as i experiment more, it seems coincidential to me too, it started workin when it is named &quot;channel&quot; now. I am asking since i am new to SO, do i mark it as solved now, or simply delete the question since it was a not a valid question?"}, {"owner": {"reputation": 21, "user_id": 5601367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a81b1bb30836557ded1a5ddbd8b8d69?s=128&d=identicon&r=PG&f=1", "display_name": "Israphel", "link": "https://stackoverflow.com/users/5601367/israphel"}, "reply_to_user": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "edited": false, "score": 0, "creation_date": 1541974499, "post_id": 53253505, "comment_id": 93392115, "body": "@leonardkraemer uhm yeah, ctrl+b takes me to nowhere, only saying &quot;No usage found in Project Files&quot;, it seems it is just a visual bug"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542028079, "post_id": 53253505, "comment_id": 93409901, "body": "@Israphel I&#39;m not sure what you&#39;re calling a bug. The code completion behavior is exactly as designed."}, {"owner": {"reputation": 21, "user_id": 5601367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a81b1bb30836557ded1a5ddbd8b8d69?s=128&d=identicon&r=PG&f=1", "display_name": "Israphel", "link": "https://stackoverflow.com/users/5601367/israphel"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542028897, "post_id": 53253505, "comment_id": 93410268, "body": "@yole completion is okay, marking a non-used variable as used is not"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1542031295, "post_id": 53253505, "comment_id": 93411584, "body": "@Israphel Highlightling of non-private variables in IntelliJ IDEA is performed optimistically: if the name of a variable has more than a certain number of occurrences in the codebase, IntelliJ IDEA can&#39;t check in real time whether any of them refer to the variable being highlighted, so it does not highlight it as unused"}], "owner": {"reputation": 21, "user_id": 5601367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a81b1bb30836557ded1a5ddbd8b8d69?s=128&d=identicon&r=PG&f=1", "display_name": "Israphel", "link": "https://stackoverflow.com/users/5601367/israphel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541973745, "creation_date": 1541972415, "last_edit_date": 1541973745, "question_id": 53253505, "link": "https://stackoverflow.com/questions/53253505/kotlin-on-android-alters-library-variable-instead-of-defining-a-new-variable", "title": "Kotlin on Android alters library variable instead of defining a new variable", "body": "<p>today I started a new Android project with Kotlin support. But as soon as I launch it on my phone, it is disconnected from Wi-Fi (Application has INTERNET and ACCESS_NETWORK_STATE permissons but no socket code yet). Here is the code:</p>\n\n<pre><code>package org.arch.cast\n\nimport android.os.Bundle\nimport android.support.v7.app.AppCompatActivity\n\nclass MainActivity : AppCompatActivity() {\n\n    internal var dummy = 10\n    internal var channel = 20\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n}\n</code></pre>\n\n<p>After experimenting a bit I noticed that one of my variables wasn't marked as \"not used\" even though it was not used.</p>\n\n<p><img src=\"https://i.stack.imgur.com/lSVBk.png\" alt=\"Here is the screenshot of variables\"></p>\n\n<p>This is the only class the project contains right now, no other service or activity exists so nothing is referring channel variable anywhere in the project. I also added a dummy variable to show that it is marked as not used. I noticed that the problem was its name and it was actually not defining it but altering another variable from a library I didn't import. And since it was related to Wi-Fi, phone was disconnecting.</p>\n\n<p><img src=\"https://i.stack.imgur.com/eYdpb.png\" alt=\"Here is the screenshot of autocomplete\"></p>\n\n<p>Sure everything works when I change the variable name but this should not be the solution, it is only a temporary workaround. So the question is, how can I prevent Kotlin from altering the variable and make it actually define it in my class?</p>\n"}, {"tags": ["android", "function", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2413, "user_id": 2475470, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/1tcOU.png?s=128&g=1", "display_name": "Vector", "link": "https://stackoverflow.com/users/2475470/vector"}, "edited": false, "score": 0, "creation_date": 1541969699, "post_id": 53253083, "comment_id": 93390927, "body": "So we needed to look at the documentation for lambda&#39;s when calling a function. Even though the keyword &quot;it&quot; works we assume this to be non favorable syntax ? thanks"}], "tags": [], "owner": {"reputation": 6555, "user_id": 994939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8fc3e78a90fde1b61cfba1020b128f3d?s=128&d=identicon&r=PG", "display_name": "veritas1", "link": "https://stackoverflow.com/users/994939/veritas1"}, "is_accepted": true, "score": 2, "last_activity_date": 1541969319, "creation_date": 1541969319, "answer_id": 53253083, "question_id": 53253040, "link": "https://stackoverflow.com/questions/53253040/kotlin-call-function-with-android-view/53253083#53253083", "title": "kotlin call function with android view", "body": "<p><code>it</code> is the implicit name for a single parameter lambda. You can override as you wish, e.g:</p>\n\n<pre><code>btnSB2.setOnClickListener { view -&gt; onSIMPLE(view)}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2413, "user_id": 2475470, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/1tcOU.png?s=128&g=1", "display_name": "Vector", "link": "https://stackoverflow.com/users/2475470/vector"}, "edited": false, "score": 0, "creation_date": 1541993652, "post_id": 53253200, "comment_id": 93395820, "body": "To use your first two answers we needed to use this declarationclass MainActivity(val it: View) : AppCompatActivity() { The concept makes the code a little confusing"}], "tags": [], "owner": {"reputation": 2273, "user_id": 7661119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nkofM.jpg?s=128&g=1", "display_name": "Ervin Szilagyi", "link": "https://stackoverflow.com/users/7661119/ervin-szilagyi"}, "is_accepted": false, "score": 1, "last_activity_date": 1541970136, "creation_date": 1541970136, "answer_id": 53253200, "question_id": 53253040, "link": "https://stackoverflow.com/questions/53253040/kotlin-call-function-with-android-view/53253200#53253200", "title": "kotlin call function with android view", "body": "<p><code>setOnClickListener</code> expects a lambda as a parameter, using a Java-like approach, this should look like this:</p>\n\n<pre><code>btnSB2.setOnClickListener({\n    v:View -&gt; onSIMPLE(it)\n})\n</code></pre>\n\n<p>Also, if the lambda is the last parameter for a given function, it can be specified outside of the parenthesis, which would look like this:</p>\n\n<pre><code>btnSB2.setOnClickListener {\n    v:View -&gt; onSIMPLE(it)\n}\n</code></pre>\n\n<p>It is common for lambda functions to have a single parameter. For these functions, Kotlin maintains the <code>it</code> keyword. Knowing this, the code becomes:</p>\n\n<pre><code>btnSB2.setOnClickListener {\n    onSIMPLE(it)\n}\n</code></pre>\n"}], "owner": {"reputation": 2413, "user_id": 2475470, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/1tcOU.png?s=128&g=1", "display_name": "Vector", "link": "https://stackoverflow.com/users/2475470/vector"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 53253083, "answer_count": 2, "score": 0, "last_activity_date": 1541970136, "creation_date": 1541968995, "question_id": 53253040, "link": "https://stackoverflow.com/questions/53253040/kotlin-call-function-with-android-view", "title": "kotlin call function with android view", "body": "<p>We are trying to understand calling a function in Kotlin<br/></p>\n\n<p>The function looks like this<br/></p>\n\n<pre><code>    fun onSIMPLE(view: View){\n    val snack = Snackbar.make(view,\"This is a simple Snackbar\", Snackbar.LENGTH_LONG)\n    snack.show()\n}\n</code></pre>\n\n<p>And the call is made this way<br/></p>\n\n<pre><code>btnSB2.setOnClickListener {onSIMPLE(it)}\n</code></pre>\n\n<p>What we do not understand is how does one know to use the keyword <strong>\"it\"</strong>?<br/>\nWho ever created the keyword \"it\" must have never searched the Web<br/></p>\n\n<p>We plugged every reasonable keyword in the ( ) to solve the issue<br/>\nYES we also looked at the documentation<br/>\nIs there a better way to construct the function or make the call?<br/> </p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1541967382, "creation_date": 1541967382, "answer_id": 53252813, "question_id": 53252759, "link": "https://stackoverflow.com/questions/53252759/how-do-i-represent-dates-in-kotlin-android/53252813#53252813", "title": "How do I represent dates in Kotlin/Android?", "body": "<p>Indeed Java's <code>Date</code> class is awful in various ways; steer clear of it. If you can't use the good new Java 8 stuff like <code>GregorianCalendar</code>, the <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda-Time</a> library is an excellent replacement.</p>\n"}, {"tags": [], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "is_accepted": false, "score": 2, "last_activity_date": 1541968335, "last_edit_date": 1541968335, "creation_date": 1541967829, "answer_id": 53252888, "question_id": 53252759, "link": "https://stackoverflow.com/questions/53252759/how-do-i-represent-dates-in-kotlin-android/53252888#53252888", "title": "How do I represent dates in Kotlin/Android?", "body": "<p>Use the <a href=\"http://%20https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTen Android Backport</a> to bring <code>java.time</code>to android pre API 26.</p>\n\n<p>Then you can use a <code>LocalDate</code> to represent the birthday without time zone information (as it is valid in all time zones.) See <a href=\"https://stackoverflow.com/a/39379431/4265739\">https://stackoverflow.com/a/39379431/4265739</a> for an overview of the time classes.</p>\n\n<p>For calculating age with <code>java.time</code> in kotlin you can use (shamelessly adapted from <a href=\"https://stackoverflow.com/a/27738766/4265739\">this</a>)</p>\n\n<pre><code>  val start = LocalDate.of(1996, 2, 29)\n  val end = LocalDate.of(2014, 2, 28) // use for age-calculation: LocalDate.now()\n  val years = ChronoUnit.YEARS.between(start, end)\n  println(years) // 17\n</code></pre>\n\n<p>For how to install follow the instructions in the github repo and see <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a> if you are running into problems.</p>\n"}], "owner": {"reputation": 1, "user_id": 9008088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3671fdfbdac5d4608f99e66b75ec90?s=128&d=identicon&r=PG&f=1", "display_name": "L.Z.", "link": "https://stackoverflow.com/users/9008088/l-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541968335, "creation_date": 1541966998, "question_id": 53252759, "link": "https://stackoverflow.com/questions/53252759/how-do-i-represent-dates-in-kotlin-android", "title": "How do I represent dates in Kotlin/Android?", "body": "<p>I want to make a Person class in an android application. In that class I want to store the birthday of this person, and later calculate with this date (for example how old he is, or how many days left to his next birthday).\nI don't know how to do this, altough I tried several classes, such as Date (which is deprecated), and GregorianCalendar, which is not available below API level 28 (I use API level 21).</p>\n"}, {"tags": ["unit-testing", "kotlin", "local", "android-room"], "comments": [{"owner": {"reputation": 1096, "user_id": 1361689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d2777bab7e0cef1d27958cdfb5993c1?s=128&d=identicon&r=PG", "display_name": "ianribas", "link": "https://stackoverflow.com/users/1361689/ianribas"}, "edited": false, "score": 0, "creation_date": 1575059023, "post_id": 53252750, "comment_id": 104452411, "body": "Thanks for this start, this allowed me to locally test my Room implementation!   Just a small comment, that may not even be real, your naming conventions seem strange, with these all uppercase names. We usually use CamelCase in java and kotlin ..."}], "answers": [{"comments": [{"owner": {"reputation": 2563, "user_id": 958580, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CVawG.png?s=128&g=1", "display_name": "Carel", "link": "https://stackoverflow.com/users/958580/carel"}, "edited": false, "score": 0, "creation_date": 1575282509, "post_id": 59110576, "comment_id": 104501014, "body": "I&#39;ve marked this as the correct answer for now (I haven&#39;t looked into this is a while I&#39;m afraid)."}], "tags": [], "owner": {"reputation": 1096, "user_id": 1361689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d2777bab7e0cef1d27958cdfb5993c1?s=128&d=identicon&r=PG", "display_name": "ianribas", "link": "https://stackoverflow.com/users/1361689/ianribas"}, "is_accepted": true, "score": 0, "last_activity_date": 1575058877, "creation_date": 1575058877, "answer_id": 59110576, "question_id": 53252750, "link": "https://stackoverflow.com/questions/53252750/testing-room-in-android-kotlin/59110576#59110576", "title": "Testing Room in Android (Kotlin)", "body": "<p>It seems to me you were almost there. The main thing to change is the runner, use: <code>AndroidJUnit4</code>, and maybe the version of the dependencies. Assuming your database and DAO are set up correctly, this should work (add import for your classes):</p>\n\n<pre><code>package com.manaikan.airvendor.AirTime\n\nimport android.content.Context\nimport androidx.room.Room\nimport androidx.test.core.app.ApplicationProvider\nimport androidx.test.ext.junit.runners.AndroidJUnit4\nimport org.junit.After\nimport org.junit.Before\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport java.io.IOException\n\n@RunWith(AndroidJUnit4::class)\nclass BundleTest {\n\n  private lateinit var queryset : ChannelProgramsDao\n  private lateinit var database : ChannelProgramsDatabase\n\n  @Before\n  fun setup()\n  {\n    val context = ApplicationProvider.getApplicationContext&lt;Context&gt;()\n    database = Room.inMemoryDatabaseBuilder(context, APPLICATIONDatabase::class.java)\n        .allowMainThreadQueries()\n        .build()\n    queryset = database.bundleQuery()\n  }\n\n  @After\n  @Throws(IOException::class)\n  fun tearDown()\n  {\n    database.close()\n  }\n\n  @Test\n  @Throws(Exception::class)\n  fun review()\n  {\n  }\n}\n</code></pre>\n\n<p>It worked for me with the following dependencies:</p>\n\n<pre><code>  testImplementation \"org.robolectric:robolectric:4.2\"\n  testImplementation \"androidx.test.ext:junit:4.12\"\n\n  implementation \"androidx.room:room-runtime:2.2.2\"\n  implementation \"androidx.room:room-ktx:2.2.2\"\n  kapt \"androidx.room:room-compiler:2.2.2\"\n  testImplementation \"androidx.room:room-testing:2.2.2\"\n</code></pre>\n"}], "owner": {"reputation": 2563, "user_id": 958580, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CVawG.png?s=128&g=1", "display_name": "Carel", "link": "https://stackoverflow.com/users/958580/carel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 59110576, "answer_count": 1, "score": 1, "last_activity_date": 1575058877, "creation_date": 1541966959, "last_edit_date": 1592644375, "question_id": 53252750, "link": "https://stackoverflow.com/questions/53252750/testing-room-in-android-kotlin", "title": "Testing Room in Android (Kotlin)", "body": "<p>I'm trying to test a Room database in Android, written in Kotlin, <strong>locally</strong>; that is not on an emulator and without <strong>instrumented</strong> testing. As I understand it this is possible using the Roboelectric framework but I'm having some trouble with this :</p>\n<ul>\n<li><p>How does one select the appropriate class for the <code>RunWith(CLASS)</code> decorator ?</p>\n<p>I understand <code>AndroidJUnit4</code> is necessary for instrumented tests, given that this is a local test should I be using <code>JUnit4</code> instead or some other derivative from RoboElectric.</p>\n</li>\n<li><p>How should I correctly determine the <code>context</code> ?</p>\n<p>Trying <code>InstrumentationRegistry.getTargetContext()</code> requires that I use <code>InstrumentationRegistry</code> which isn't available when testing locally or that <code>test</code> can not be imported when importing <code>androidx.test.platform.app.InstrumentationRegistry</code> or <code>android.support.test.InstrumentationRegistry</code>. Trying <code>ApplicationProvider.getApplicationContext()</code> claims the reference <code>getApplicationContext</code> can't be found. I'm also not sure where I should be importing either <code>InstrumentationRegistry</code> or <code>ApplicationProvider</code> from.</p>\n</li>\n</ul>\n<p>In general I'm finding it tricky to determine the appropriate libraries to use in Java; all the documentation appears very version specific and assumes you magically know where to import a given class from where often such a classes appear in more then one library. Then package imported through gradle also seems to be well related but does not explicitly match the package being imported. If you have any general tips on this I would be quite keen to hear it.</p>\n<p>My code so far is as follows:</p>\n<pre><code>package com.manaikan.airvendor.AirTime\n\nimport android.content.Context\nimport android.arch.persistence.room.Room\nimport androidx.test.platform.app.InstrumentationRegistry\nimport com.manaikan.airvendor.airtime.AirVendorDatabase\nimport com.manaikan.airvendor.airtime.BundleQuery\nimport org.junit.After\nimport org.junit.Before\nimport org.junit.Rule\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.junit.runners.JUnit4\nimport java.io.IOException\n// Roboelectric\nimport androidx.test.core.app.ApplicationProvider\n\n@RunWith(JUnit4::class)\nclass BundleTest {\n\n    private lateinit var queryset : ENTITYDao\n    private lateinit var database : APPLICATIONDatabase\n\n    @Before\n    fun setup()\n    {\n        val context = ApplicationProvider.getApplicationContext&lt;Context&gt;()\n        database = Room.inMemoryDatabaseBuilder(context, APPLICATIONDatabase::class.java)\n            .allowMainThreadQueries()\n            .build()\n        queryset = database.bundleQuery()\n    }\n\n    @After\n    @Throws(IOException::class)\n    fun tearDown()\n    {\n        database.close()\n    }\n\n    @Test\n    @Throws(Exception::class)\n    fun review()\n    {\n    }\n}\n</code></pre>\n"}]