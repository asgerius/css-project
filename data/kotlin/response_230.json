[{"tags": ["android", "kotlin", "socket.io"], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 3335377, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/KjoWc.jpg?s=128&g=1", "display_name": "SonickSeven", "link": "https://stackoverflow.com/users/3335377/sonickseven"}, "edited": false, "score": 0, "creation_date": 1590762365, "post_id": 61797233, "comment_id": 109812149, "body": "hey thanks, but on this moment i&#39;m not working in it, when i can try it i answered you"}, {"owner": {"reputation": 188, "user_id": 3335377, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/KjoWc.jpg?s=128&g=1", "display_name": "SonickSeven", "link": "https://stackoverflow.com/users/3335377/sonickseven"}, "edited": false, "score": 0, "creation_date": 1609203438, "post_id": 61797233, "comment_id": 115776673, "body": "i use implementation(&#39;com.github.nkzawa:socket.io-client:0.5.0&#39;) but with your code doesn&#39;t work and i try change to implementation(&#39;com.github.nkzawa:socket.io-client:0.9.0&#39;) but android could not find that. Do you can share me your src implemenatation"}, {"owner": {"reputation": 571, "user_id": 5127938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNrZo.jpg?s=128&g=1", "display_name": "Hayuki", "link": "https://stackoverflow.com/users/5127938/hayuki"}, "reply_to_user": {"reputation": 188, "user_id": 3335377, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/KjoWc.jpg?s=128&g=1", "display_name": "SonickSeven", "link": "https://stackoverflow.com/users/3335377/sonickseven"}, "edited": false, "score": 0, "creation_date": 1618333373, "post_id": 61797233, "comment_id": 118568544, "body": "Unfortunately, since writing that answer I have moved on to another company, so I no longer have access to the source code. However, as I mentioned in my answer, I used the <code>socketio&#47;socket.io-client-java</code> library as opposed to <code>com.github.nkzawa:socket.io-client</code>, so if you use `&#39;io.socket:socket.io-client:0.9.0&#39; in your gradle file it should find it. Just to mention, seems like that library now has a v2.0.0 released, so it might be a good idea to try the latest version."}], "tags": [], "owner": {"reputation": 571, "user_id": 5127938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNrZo.jpg?s=128&g=1", "display_name": "Hayuki", "link": "https://stackoverflow.com/users/5127938/hayuki"}, "is_accepted": false, "score": 0, "last_activity_date": 1589458931, "creation_date": 1589458931, "answer_id": 61797233, "question_id": 56469423, "link": "https://stackoverflow.com/questions/56469423/how-use-socket-io-ack-with-kotlin-android/61797233#61797233", "title": "How use socket.io ack() with Kotlin Android", "body": "<p>In Kotlin your <code>socket.emit</code> function would look like this :</p>\n\n<pre><code>sockets.mSocket.emit(\n    \"socketID\",\n    data,\n    Ack { args -&gt;\n        val repues = args[0] as JSONObject\n        // todo with repues\n    }\n)\n</code></pre>\n\n<p>Note: in my project I'm using version 0.9.0 of <a href=\"https://github.com/socketio/socket.io-client-java\" rel=\"nofollow noreferrer\">this</a> Socket IO Java library</p>\n"}], "owner": {"reputation": 188, "user_id": 3335377, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/KjoWc.jpg?s=128&g=1", "display_name": "SonickSeven", "link": "https://stackoverflow.com/users/3335377/sonickseven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 899, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1589458931, "creation_date": 1559778795, "last_edit_date": 1559799104, "question_id": 56469423, "link": "https://stackoverflow.com/questions/56469423/how-use-socket-io-ack-with-kotlin-android", "title": "How use socket.io ack() with Kotlin Android", "body": "<p>I'm node.js developer and i developed one app with socket.io with android and i used Ack() correctly on that time. But i want update my java code to Kotlin because i guess that it's so easy to learn and quickly to render.</p>\n\n<p>The problem is that i have not could use Ack() with Kotlin </p>\n\n<p>java code</p>\n\n<pre><code>sockets.mSocket.emit(\"socketID\", data, new Ack() {\n    @Override\n    public void call(Object... args) {\n        JSONObject repues = (JSONObject) args[0];\n        // todo with repues\n    }\n});\n</code></pre>\n\n<p>javscript code</p>\n\n<pre><code>sockets.emit(\"socketID\", data, repues=&gt;{\n    // todo with repues\n});\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1559777258, "post_id": 56469213, "comment_id": 99529823, "body": "I guess the problem is more the <code>context</code> variable/property which may be set to/returns null sometimes."}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1559780094, "post_id": 56469213, "comment_id": 99530286, "body": "<code>DataBaseHandler(context)</code> appears to be a likely candidate."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 9673103, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MMw7I1M9Ba4/AAAAAAAAAAI/AAAAAAAABi4/hRRF5fdFFEk/photo.jpg?sz=128", "display_name": "Said", "link": "https://stackoverflow.com/users/9673103/said"}, "edited": false, "score": 0, "creation_date": 1559786760, "post_id": 56469739, "comment_id": 99531341, "body": "I added ` } else if (context != null){                             listAdapter = ArrayAdapter(context, android.R.layout.simple_spinner_dropdown_item, resultList)                             etSearch.setAdapter(listAdapter)                             etSearch.showDropDown()                         }` Thank you so much!"}], "tags": [], "owner": {"reputation": 4175, "user_id": 766755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b9f06fbc3de382d56e24d283c5b0957?s=128&d=identicon&r=PG", "display_name": "Michael Krause", "link": "https://stackoverflow.com/users/766755/michael-krause"}, "is_accepted": true, "score": 2, "last_activity_date": 1559783329, "last_edit_date": 1559783329, "creation_date": 1559782448, "answer_id": 56469739, "question_id": 56469213, "link": "https://stackoverflow.com/questions/56469213/how-to-avoid-nullpointerexception-in-a-fragment-with-a-delayed-runnable/56469739#56469739", "title": "How to avoid NullPointerException in a Fragment with a delayed Runnable", "body": "<p>You can't assume your Fragment will always have a non-null Context.</p>\n\n<p>To fix this, it's good to understand where <a href=\"https://developer.android.com/reference/androidx/fragment/app/Fragment.html#onAttach(android.content.Context)\" rel=\"nofollow noreferrer\">onAttach</a> and <a href=\"https://developer.android.com/reference/androidx/fragment/app/Fragment.html#onDetach()\" rel=\"nofollow noreferrer\">onDetach</a> fit in the <a href=\"https://developer.android.com/guide/components/fragments#Lifecycle\" rel=\"nofollow noreferrer\">Fragment lifecycle</a>.</p>\n\n<p>You've got a Runnable chunk of code that you're purposely delaying execution by 600 milliseconds.  That will be more than enough time for the Fragment to be detached from its parent Activity in race conditions like the <code>\"When I click the tabs really fast\"</code> scenario you've mentioned.</p>\n\n<p>The NullPointerException occurs inside of the <a href=\"https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/widget/ArrayAdapter.java#216\" rel=\"nofollow noreferrer\">ArrayAdapter constructor</a> when it tries to create a LayoutInflater from your passed in Context (which is null).  </p>\n\n<p>According to your stack trace, the line of code in your Runnable that causes this is:</p>\n\n<pre><code>listAdapter = ArrayAdapter(context, android.R.layout.simple_spinner_dropdown_item, resultList)\n</code></pre>\n\n<p>One way to fix this would be to null-check the context as the first line in your Runnable block and early return if it is null.</p>\n"}], "owner": {"reputation": 53, "user_id": 9673103, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MMw7I1M9Ba4/AAAAAAAAAAI/AAAAAAAABi4/hRRF5fdFFEk/photo.jpg?sz=128", "display_name": "Said", "link": "https://stackoverflow.com/users/9673103/said"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "closed_date": 1559827296, "accepted_answer_id": 56469739, "answer_count": 1, "score": 0, "last_activity_date": 1559783416, "creation_date": 1559776781, "last_edit_date": 1559783416, "question_id": 56469213, "link": "https://stackoverflow.com/questions/56469213/how-to-avoid-nullpointerexception-in-a-fragment-with-a-delayed-runnable", "closed_reason": "Duplicate", "title": "How to avoid NullPointerException in a Fragment with a delayed Runnable", "body": "<p>I have an app with 5 tabs, 3 are the same fragment and two are two different fragments. This problem happens in all 5 fragments since the code is the same.</p>\n\n<p>When I click the tabs really fast and there's some text in my <code>AutoCompleteTextView</code>, the app crashes.</p>\n\n<p>I've tried to check if my components (<code>listAdapter</code> and <code>ArrayAdapter</code>) are not null before asigning or initializing them.</p>\n\n<pre><code>override fun afterTextChanged(s: Editable?) {\n            val db = DataBaseHandler(context)\n            var listAdapter: ArrayAdapter&lt;String&gt;\n\n            Handler().postDelayed({\n                search = etSearch.text.toString().trim()\n                if (search.length &gt;= 3){\n                    resultList.clear()\n                    products = if (isNumeric(search)) db.readData_SomeProductsId(search)\n                        else db.readData_SomeProductsDesc(search)\n                    for (product in products!!)\n                        resultList.add(product.prod_description)\n                    if (resultList.size == 1){\n                        product = products!![0]\n                        ETClear(etSearch)\n                        addProduct()\n                    } else{\n                        if (resultList.size &gt; 1){\n                            listAdapter = ArrayAdapter(context, android.R.layout.simple_spinner_dropdown_item, resultList)\n                            etSearch.setAdapter(listAdapter)\n                            etSearch.showDropDown()\n                        }\n\n                    }\n                }\n            }, 600)\n\n            etSearch.setOnItemClickListener{ parent,view,position,id-&gt;\n                val selectedItem = parent.getItemAtPosition(position).toString()\n                product = db.readData_ProductDescription(selectedItem)!!\n                ETClear(etSearch)\n                addProduct()\n            }\n        }\n</code></pre>\n\n<p>The error shows as follows:</p>\n\n<pre><code>06-05 18:01:49.034 26859-26859/com.example.said.puntodeventa E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.said.puntodeventa, PID: 26859\njava.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Object android.content.Context.getSystemService(java.lang.String)' on a null object reference\n    at android.view.LayoutInflater.from(LayoutInflater.java:234)\n    at android.widget.ArrayAdapter.&lt;init&gt;(ArrayAdapter.java:178)\n    at android.widget.ArrayAdapter.&lt;init&gt;(ArrayAdapter.java:163)\n    at com.example.said.puntodeventa.SaleFragment1$onViewCreated$1$afterTextChanged$1.run(SaleFragment1.kt:109)\n    at android.os.Handler.handleCallback(Handler.java:739)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:158)\n    at android.app.ActivityThread.main(ActivityThread.java:7231)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1230)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1120)\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["java", "spring-boot", "kotlin", "spring-webflux", "project-reactor"], "comments": [{"owner": {"reputation": 7696, "user_id": 287138, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/50465000ce35ffc2a09ba61f7e6d3536?s=128&d=identicon&r=PG", "display_name": "Stefan Haberl", "link": "https://stackoverflow.com/users/287138/stefan-haberl"}, "edited": false, "score": 0, "creation_date": 1590743070, "post_id": 56468969, "comment_id": 109801619, "body": "Ever found out the answer to this one?"}, {"owner": {"reputation": 346, "user_id": 1891745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPYFJ.jpg?s=128&g=1", "display_name": "Ahmed H. Saab", "link": "https://stackoverflow.com/users/1891745/ahmed-h-saab"}, "reply_to_user": {"reputation": 7696, "user_id": 287138, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/50465000ce35ffc2a09ba61f7e6d3536?s=128&d=identicon&r=PG", "display_name": "Stefan Haberl", "link": "https://stackoverflow.com/users/287138/stefan-haberl"}, "edited": false, "score": 0, "creation_date": 1591711989, "post_id": 56468969, "comment_id": 110155670, "body": "No unfortunately, I had to switch to use Mono instead of Flux for everything..."}], "owner": {"reputation": 346, "user_id": 1891745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPYFJ.jpg?s=128&g=1", "display_name": "Ahmed H. Saab", "link": "https://stackoverflow.com/users/1891745/ahmed-h-saab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1596393071, "creation_date": 1559774651, "last_edit_date": 1559776533, "question_id": 56468969, "link": "https://stackoverflow.com/questions/56468969/why-does-this-simple-webflux-controller-calls-the-webclient-retrieve-method-twic", "title": "Why does this simple Webflux Controller calls the Webclient retrieve method twice?", "body": "<p>I have a very simple Webflux controller that just do a GET request to another service endpoint and returns a simple JSON list. The problem is the remote endpoint is always called twice.</p>\n\n<p>This issue doesn't happen if I used Mono as the return type of the controller instead of Flux!</p>\n\n<pre><code>// This calls \"/remote/endpoint\" twice!\n\n@GetMapping(\"/blabla\")\nfun controller() : Flux&lt;JsonNode&gt; {\n    return webClient.get()\n            .uri(\"/remote/endpoint\")\n            .retrieve()\n            .bodyToMono(JsonNode::class.java)\n            .flatMapIterable { body -&gt;\n                body.get(\"data\")\n            }\n}\n\n// This calls \"/remote/endpoint\" once.\n\n@GetMapping(\"/blabla\")\nfun controller() : Mono&lt;JsonNode&gt; {\n    return webClient.get()\n            .uri(\"/remote/endpoint\")\n            .retrieve()\n            .bodyToMono(JsonNode::class.java)\n            .map { body -&gt;\n                body.get(\"data\")\n            }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1559772267, "post_id": 56468627, "comment_id": 99528728, "body": "Do you see a specific case of this in some particular code?"}, {"owner": {"reputation": 25, "user_id": 11606362, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ur_tkTHukyE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfmJlo5GnIcHsmHsfjdmHcItzLw0w/mo/photo.jpg?sz=128", "display_name": "ZoologyKT", "link": "https://stackoverflow.com/users/11606362/zoologykt"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1559772454, "post_id": 56468627, "comment_id": 99528759, "body": "I&#39;ve seen it in the learnings I&#39;ve been doing. I think I just dont understand whats the advantage to storing a data in a function that could be stored in a variable/value in general?"}], "answers": [{"tags": [], "owner": {"reputation": 192, "user_id": 822835, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/005313e1300e450f87f0cb05ca7d15e7?s=128&d=identicon&r=PG", "display_name": "VishalHemnani", "link": "https://stackoverflow.com/users/822835/vishalhemnani"}, "is_accepted": false, "score": 0, "last_activity_date": 1559776474, "creation_date": 1559776474, "answer_id": 56469179, "question_id": 56468627, "link": "https://stackoverflow.com/questions/56468627/whats-the-advantage-of-creating-a-one-line-function-that-contains-a-string-tha/56469179#56469179", "title": "What&#39;s the advantage of creating a one line function that contains a string, that wouldn&#39;t be achievable by just assigning a string to a variable?", "body": "<p>This is more about when to prefer a function v/s a property.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#functions-vs-properties\" rel=\"nofollow noreferrer\">Kotlin coding conventions</a> has a section that describes this.</p>\n\n<p>A property should be preferred over a function when-</p>\n\n<ul>\n<li>the underlying algorithm does not throw</li>\n<li>value is cheap to calculate (or ca\u0441hed on the first run)</li>\n<li>returns the same result over invocations if the object state hasn't changed</li>\n</ul>\n\n<p>In terms of an API use-case, in some cases exposing a function instead of a property might be a good idea as that gives you the scope to change the implementation of this API in future. What might be a hardcoded value today, could be replaced by code that computes the value in future.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 11606362, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ur_tkTHukyE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfmJlo5GnIcHsmHsfjdmHcItzLw0w/mo/photo.jpg?sz=128", "display_name": "ZoologyKT", "link": "https://stackoverflow.com/users/11606362/zoologykt"}, "edited": false, "score": 0, "creation_date": 1560137694, "post_id": 56469596, "comment_id": 99625260, "body": "I think I understand. Thanks for the response."}], "tags": [], "owner": {"reputation": 11023, "user_id": 1225617, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d5221312c38d547a0de3476fa0b8e49a?s=128&d=identicon&r=PG", "display_name": "Adam Millerchip", "link": "https://stackoverflow.com/users/1225617/adam-millerchip"}, "is_accepted": true, "score": 2, "last_activity_date": 1559781108, "last_edit_date": 1559781108, "creation_date": 1559780760, "answer_id": 56469596, "question_id": 56468627, "link": "https://stackoverflow.com/questions/56468627/whats-the-advantage-of-creating-a-one-line-function-that-contains-a-string-tha/56469596#56469596", "title": "What&#39;s the advantage of creating a one line function that contains a string, that wouldn&#39;t be achievable by just assigning a string to a variable?", "body": "<p>The interesting thing about </p>\n\n<pre><code>fun foo(): String = \"Hello World\"\n</code></pre>\n\n<p>is that it is using the expression syntax, and is equivalent to:</p>\n\n<pre><code>fun foo(): String {\n    return \"Hello World\"\n}\n</code></pre>\n\n<p>While just returning a constant isn't very useful, using the expression syntax, avoiding the <code>{block}</code> and <code>return</code> statements allows much more concise function definitions in the case where the entire function can be expressed in one expression.</p>\n\n<p>For example, if <code>foo()</code> was a method on a class, you could say hello with a property of that class:</p>\n\n<pre><code>class Hello(var what : String = \"World\") {\n    fun foo(): String = \"Hello, $what!\"\n}\n\nfun main() {\n    val hello = Hello()\n    println(hello.foo())\n\n    hello.what = \"Universe\"\n    println(hello.foo())\n}\n</code></pre>\n\n<p>This prints:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Hello, World!\nHello, Universe!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "is_accepted": false, "score": 0, "last_activity_date": 1559782618, "last_edit_date": 1559782618, "creation_date": 1559782107, "answer_id": 56469705, "question_id": 56468627, "link": "https://stackoverflow.com/questions/56468627/whats-the-advantage-of-creating-a-one-line-function-that-contains-a-string-tha/56469705#56469705", "title": "What&#39;s the advantage of creating a one line function that contains a string, that wouldn&#39;t be achievable by just assigning a string to a variable?", "body": "<p>It's simple, think about what the word coding means. Coding rules. Rules that are complicated get broken down in rules that are exactly one level below in abstraction, so that the program is as intelligible as possible. </p>\n\n<p>Well, the function name is just one level above the expression. This is even more true in a language as expressive as kotlin where one line can easily be equivalent to several lines of Java.</p>\n\n<p>If you are talking about strings or primitives exclusively then, yes, an attribute is a more natural choice than a function.</p>\n"}], "owner": {"reputation": 25, "user_id": 11606362, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ur_tkTHukyE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfmJlo5GnIcHsmHsfjdmHcItzLw0w/mo/photo.jpg?sz=128", "display_name": "ZoologyKT", "link": "https://stackoverflow.com/users/11606362/zoologykt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 56469596, "answer_count": 3, "score": 0, "last_activity_date": 1559782618, "creation_date": 1559772167, "last_edit_date": 1559780191, "question_id": 56468627, "link": "https://stackoverflow.com/questions/56468627/whats-the-advantage-of-creating-a-one-line-function-that-contains-a-string-tha", "title": "What&#39;s the advantage of creating a one line function that contains a string, that wouldn&#39;t be achievable by just assigning a string to a variable?", "body": "<p>In Kotlin, I understand that a string can be assigned to a function directly, such as:</p>\n\n<pre><code>fun foo(): String = \"Hello World\"\n</code></pre>\n\n<p>But you can also assign a String to a variable directly as well:</p>\n\n<pre><code>var foobar: String = \"Hello Word\"\n</code></pre>\n\n<p>My question is, why would you ever create a function when you could just create a variable? I can't see the point in the existence of this functionality.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11606291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fe3d0cd3f60ef2e07259ee1aa84206?s=128&d=identicon&r=PG&f=1", "display_name": "oegeonu", "link": "https://stackoverflow.com/users/11606291/oegeonu"}, "edited": false, "score": 0, "creation_date": 1559829737, "post_id": 56468510, "comment_id": 99548956, "body": "Sorry if I wasn&#39;t too clear. Im trying to run a test on some completed applications that will test if the app launches. Some of the apps will crash when loaded on a device.so im just trying to write a simple test that launches the app if it opens it passes if it does not it fails.The applications were written in Kotlin which I have no experience in. I hope that makes more sense."}, {"owner": {"reputation": 130, "user_id": 11028902, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-onJNcV3RQW8/AAAAAAAAAAI/AAAAAAAAAC8/fl7xRYpK6fo/photo.jpg?sz=128", "display_name": "Pavel Malinovskij", "link": "https://stackoverflow.com/users/11028902/pavel-malinovskij"}, "reply_to_user": {"reputation": 1, "user_id": 11606291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fe3d0cd3f60ef2e07259ee1aa84206?s=128&d=identicon&r=PG&f=1", "display_name": "oegeonu", "link": "https://stackoverflow.com/users/11606291/oegeonu"}, "edited": false, "score": 0, "creation_date": 1559850353, "post_id": 56468510, "comment_id": 99558529, "body": "If there is many apps I am not sure how you can check them automatically... If you check by hand, you can just install that apps and look if that apps work correctly - if there is an error, you can open &quot;logcat&quot; inside of android studio and see in which line of code error appears"}, {"owner": {"reputation": 1, "user_id": 11606291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fe3d0cd3f60ef2e07259ee1aa84206?s=128&d=identicon&r=PG&f=1", "display_name": "oegeonu", "link": "https://stackoverflow.com/users/11606291/oegeonu"}, "edited": false, "score": 0, "creation_date": 1559852916, "post_id": 56468510, "comment_id": 99559571, "body": "I need to do it as a test because it needs to be a part of the build process. When the app gets built it needs to test if can open on a device if not the build should fail."}], "tags": [], "owner": {"reputation": 130, "user_id": 11028902, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-onJNcV3RQW8/AAAAAAAAAAI/AAAAAAAAAC8/fl7xRYpK6fo/photo.jpg?sz=128", "display_name": "Pavel Malinovskij", "link": "https://stackoverflow.com/users/11028902/pavel-malinovskij"}, "is_accepted": false, "score": 1, "last_activity_date": 1559771491, "creation_date": 1559771491, "answer_id": 56468510, "question_id": 56468381, "link": "https://stackoverflow.com/questions/56468381/how-to-write-a-test-in-kotlin-that-will-just-open-and-then-close-an-app/56468510#56468510", "title": "How to write a test in Kotlin that will just open and then close an app", "body": "<p>Could you explain what do you mean with this? Just open app which contains nothing and than close? I do not understand your idea... If you explain more, I will try</p>\n"}], "owner": {"reputation": 1, "user_id": 11606291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fe3d0cd3f60ef2e07259ee1aa84206?s=128&d=identicon&r=PG&f=1", "display_name": "oegeonu", "link": "https://stackoverflow.com/users/11606291/oegeonu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1559771491, "creation_date": 1559770800, "question_id": 56468381, "link": "https://stackoverflow.com/questions/56468381/how-to-write-a-test-in-kotlin-that-will-just-open-and-then-close-an-app", "title": "How to write a test in Kotlin that will just open and then close an app", "body": "<p>Im new to Android studio and I want to write a test in Kotlin that will just open an application and then close it.</p>\n"}, {"tags": ["spring-boot", "kotlin", "spring-webflux", "project-reactor", "spring-webclient"], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 1891745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPYFJ.jpg?s=128&g=1", "display_name": "Ahmed H. Saab", "link": "https://stackoverflow.com/users/1891745/ahmed-h-saab"}, "edited": false, "score": 0, "creation_date": 1559773936, "post_id": 56468672, "comment_id": 99529174, "body": "Also <code>getTaskOffers</code> returns a <code>Flux</code> so mapping it will return a single offer and not offers"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 346, "user_id": 1891745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPYFJ.jpg?s=128&g=1", "display_name": "Ahmed H. Saab", "link": "https://stackoverflow.com/users/1891745/ahmed-h-saab"}, "edited": false, "score": 0, "creation_date": 1559812511, "post_id": 56468672, "comment_id": 99539251, "body": "Remember, I don&#39;t have your actual code, so I can&#39;t be 100% accurate. Still, I expanded my answer. Hope that helps."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 1, "last_activity_date": 1559812519, "last_edit_date": 1559812519, "creation_date": 1559772446, "answer_id": 56468672, "question_id": 56467836, "link": "https://stackoverflow.com/questions/56467836/how-to-make-multiple-spring-webclient-calls-in-parallel-and-wait-for-the-result/56468672#56468672", "title": "How to make multiple Spring Webclient calls in parallel and wait for the result?", "body": "<p>As you already figured out, <code>zipWith</code> won't help you there, since it will produce <code>min(a.size, b.size)</code>, which will always be 1, in case one of them is <code>Mono</code>.</p>\n\n<p>But since those two are independent, you can simply split them:</p>\n\n<pre><code>val task: Mono&lt;TaskDTO&gt; = client.getTask(id)\nval result: Flux&lt;ViewOfferDTO&gt; = \ntask.flatMapMany {t -&gt;\n        client.getTaskOffers(id).map {offer -&gt;\n            t to offer\n        }\n    }.filter {\n        it.second.workerUser.id == user.id || it.first.creatorUser == user.id\n    }.map {\n        it.second\n}\n</code></pre>\n\n<p>Note that if you want to have pair of elements, you can use built-in <code>Pair</code>.</p>\n\n<p>Also, this check doesn't make much sense, since you have only <code>Mono</code>: <code>it.first.creatorUser</code></p>\n"}, {"tags": [], "owner": {"reputation": 8698, "user_id": 2490074, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/40Zoo.jpg?s=128&g=1", "display_name": "Sarvar Nishonboyev", "link": "https://stackoverflow.com/users/2490074/sarvar-nishonboyev"}, "is_accepted": true, "score": 3, "last_activity_date": 1575886107, "creation_date": 1575886107, "answer_id": 59246565, "question_id": 56467836, "link": "https://stackoverflow.com/questions/56467836/how-to-make-multiple-spring-webclient-calls-in-parallel-and-wait-for-the-result/59246565#59246565", "title": "How to make multiple Spring Webclient calls in parallel and wait for the result?", "body": "<p>Here is a use case for a parallel call. </p>\n\n<pre><code>public Mono&lt;UserInfo&gt; fetchCarrierUserInfo(User user) {\n        Mono&lt;UserInfo&gt; userInfoMono = fetchUserInfo(user.getGuid());\n        Mono&lt;CarrierInfo&gt; carrierInfoMono = fetchCarrierInfo(user.getCarrierGuid());\n\n        return Mono.zip(userInfoMono, carrierInfoMono).map(tuple -&gt; {\n            UserInfo userInfo = tuple.getT1();\n            userInfo.setCarrier(tuple.getT2());\n            return userInfo;\n        });\n    }\n</code></pre>\n\n<p>Here:</p>\n\n<ul>\n<li><code>fetchUserInfo</code> makes http call to get user info from another service and returns <code>Mono</code> </li>\n<li><code>fetchCarrierInfo</code> method makes HTTP call to get carrierInfo from another service and returns <code>Mono</code> </li>\n<li><code>Mono.zip()</code> merges given monos into a new Mono that will be fulfilled when all of the given Monos have produced an item, aggregating their values into a Tuple2. </li>\n</ul>\n\n<p>Then, call <code>fetchCarrierUserInfo().block()</code> it to get the final result.</p>\n"}, {"tags": [], "owner": {"reputation": 1261, "user_id": 197342, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eAmWf.jpg?s=128&g=1", "display_name": "McGin", "link": "https://stackoverflow.com/users/197342/mcgin"}, "is_accepted": false, "score": 1, "last_activity_date": 1575979032, "creation_date": 1575979032, "answer_id": 59266682, "question_id": 56467836, "link": "https://stackoverflow.com/questions/56467836/how-to-make-multiple-spring-webclient-calls-in-parallel-and-wait-for-the-result/59266682#59266682", "title": "How to make multiple Spring Webclient calls in parallel and wait for the result?", "body": "<p>Convert your Mono to a Flux using <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#repeat--\" rel=\"nofollow noreferrer\">repeat()</a>:     </p>\n\n<pre><code>client.getTask(id).cache().repeat();\n</code></pre>\n\n<p>So your code would become</p>\n\n<pre><code>    return client.getTaskOffers(id).map {\n        it.toViewOfferDTO()\n    }.zipWith(client.getTask(id).cache().repeat(), BiFunction {\n        offer: ViewOfferDTO, task: TaskDTO -&gt; TaskOfferPair(task, offer)\n    }).filter {\n        it.offer.workerUser.id == user.id || it.task.creatorUser == user.id\n    }.map {\n        it.offer\n    }\n</code></pre>\n"}], "owner": {"reputation": 346, "user_id": 1891745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPYFJ.jpg?s=128&g=1", "display_name": "Ahmed H. Saab", "link": "https://stackoverflow.com/users/1891745/ahmed-h-saab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3367, "favorite_count": 1, "accepted_answer_id": 59246565, "answer_count": 3, "score": 2, "last_activity_date": 1575979032, "creation_date": 1559767931, "question_id": 56467836, "link": "https://stackoverflow.com/questions/56467836/how-to-make-multiple-spring-webclient-calls-in-parallel-and-wait-for-the-result", "title": "How to make multiple Spring Webclient calls in parallel and wait for the result?", "body": "<p>I am new to Reactive programming and I would like to make two API calls in parallel and process the results and return a simple array or list of items.</p>\n\n<p>I have two functions, one returns a Flux and the other returns a Mono and I make a very simple filtering logic on the Flux emitted items depending on the result of that Mono.</p>\n\n<p>I tried to use <code>zipWith</code> but only one item made it to the end no matter what filtering logic. Also I tried with <code>block</code> but that is not allowed inside the controller :/</p>\n\n<pre><code>@GetMapping(\"/{id}/offers\")\nfun viewTaskOffers(\n        @PathVariable(\"id\") id: String,\n        @AuthenticationPrincipal user: UserPrincipal\n) : Flux&lt;ViewOfferDTO&gt; {\n    data class TaskOfferPair(\n        val task: TaskDTO,\n        val offer: ViewOfferDTO\n    )\n\n    return client.getTaskOffers(id).map {\n            it.toViewOfferDTO()\n        }.zipWith(client.getTask(id), BiFunction {\n            offer: ViewOfferDTO, task: TaskDTO -&gt; TaskOfferPair(task, offer)\n        }).filter {\n            it.offer.workerUser.id == user.id || it.task.creatorUser == user.id\n        }.map {\n            it.offer\n        }\n}\n</code></pre>\n\n<ul>\n<li><code>getTaskOffers</code> returns a Flux of <code>OfferDTO</code></li>\n<li><code>getTask</code> returns a Mono of <code>TaskDTO</code></li>\n</ul>\n\n<p>If you cannot answer my question please tell me atleast how to do multiple API calls in parallel and wait for the results in WebClient</p>\n"}, {"tags": ["java", "android", "kotlin", "mockito"], "answers": [{"comments": [{"owner": {"reputation": 1549, "user_id": 8549281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jykz4.jpg?s=128&g=1", "display_name": "GOVIND DIXIT", "link": "https://stackoverflow.com/users/8549281/govind-dixit"}, "edited": false, "score": 0, "creation_date": 1559809626, "post_id": 56469458, "comment_id": 99537792, "body": "Yes it indeed solved my problem. Can you please modified your answer to use <code>when</code>(serverInteractor.get()).thenReturn(&quot;<a href=\"http://fakeurl&quot;\" rel=\"nofollow noreferrer\">fakeurl&quot;</a>) so I can accept your ans as it is supported by official mockito library."}, {"owner": {"reputation": 1549, "user_id": 8549281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jykz4.jpg?s=128&g=1", "display_name": "GOVIND DIXIT", "link": "https://stackoverflow.com/users/8549281/govind-dixit"}, "edited": false, "score": 0, "creation_date": 1559906396, "post_id": 56469458, "comment_id": 99575343, "body": "I am facing a similar problem in case of UI tests I have tried this solution there but then I am getting another error. Can you have a look at it here <a href=\"https://stackoverflow.com/q/56493147/8549281\">stackoverflow.com/q/56493147/8549281</a>"}], "tags": [], "owner": {"reputation": 192, "user_id": 822835, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/005313e1300e450f87f0cb05ca7d15e7?s=128&d=identicon&r=PG", "display_name": "VishalHemnani", "link": "https://stackoverflow.com/users/822835/vishalhemnani"}, "is_accepted": true, "score": 1, "last_activity_date": 1559853903, "last_edit_date": 1559853903, "creation_date": 1559779227, "answer_id": 56469458, "question_id": 56467566, "link": "https://stackoverflow.com/questions/56467566/how-to-mock-a-class-which-contain-a-variable-that-can-throw-npe/56469458#56469458", "title": "How to mock a class which contain a variable that can throw NPE", "body": "<p>Have you tried this?</p>\n\n<pre><code>@Before\n    fun setUp() {\n        MockitoAnnotations.initMocks(this)\n        whenever(serverInteractor.get()).thenReturn(\"http://fakeurl\")\n        loginPresenter = LoginPresenter(\n            view, strategy, navigator, tokenRepository, localRepository, settingsInteractor,\n            analyticsManager, saveCurrentServer, saveAccountInteractor, factory, serverInteractor\n        )\n    }\n</code></pre>\n\n<p>The <code>whenever</code> method is from <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">https://github.com/nhaarman/mockito-kotlin</a>.</p>\n\n<p>EDIT:\nAlternatively, you can also use <code>when</code> keyword if you don't want a dependency on mockito-kotlin-</p>\n\n<pre><code>`when`(serverInteractor.get()).thenReturn(\"http://fakeurl\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1549, "user_id": 8549281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jykz4.jpg?s=128&g=1", "display_name": "GOVIND DIXIT", "link": "https://stackoverflow.com/users/8549281/govind-dixit"}, "is_accepted": false, "score": 1, "last_activity_date": 1559845496, "creation_date": 1559845496, "answer_id": 56483153, "question_id": 56467566, "link": "https://stackoverflow.com/questions/56467566/how-to-mock-a-class-which-contain-a-variable-that-can-throw-npe/56483153#56483153", "title": "How to mock a class which contain a variable that can throw NPE", "body": "<p>Answer by VishalHemnani really helps me but if someone does not want to use <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">https://github.com/nhaarman/mockito-kotlin</a> and is using the official mockito library. In that case, this will work</p>\n\n<pre><code>@Before\n    fun setUp() {\n        MockitoAnnotations.initMocks(this)\n        `when`(serverInteractor.get()).thenReturn(\"http://fakeurl\")\n        loginPresenter = LoginPresenter(\n            view, strategy, navigator, tokenRepository, localRepository, settingsInteractor,\n            analyticsManager, saveCurrentServer, saveAccountInteractor, factory, serverInteractor\n        )\n    }\n</code></pre>\n"}], "owner": {"reputation": 1549, "user_id": 8549281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jykz4.jpg?s=128&g=1", "display_name": "GOVIND DIXIT", "link": "https://stackoverflow.com/users/8549281/govind-dixit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 56469458, "answer_count": 2, "score": 0, "last_activity_date": 1559853903, "creation_date": 1559766614, "question_id": 56467566, "link": "https://stackoverflow.com/questions/56467566/how-to-mock-a-class-which-contain-a-variable-that-can-throw-npe", "title": "How to mock a class which contain a variable that can throw NPE", "body": "<p>I have a login presenter which I want to test. I am new to unit testing and I have written a basic test to test a small functionality.</p>\n\n<pre><code>class LoginPresenter @Inject constructor(\n    private val view: LoginView,\n    private val strategy: CancelStrategy,\n    private val navigator: AuthenticationNavigator,\n    private val tokenRepository: TokenRepository,\n    private val localRepository: LocalRepository,\n    private val settingsInteractor: GetSettingsInteractor,\n    private val analyticsManager: AnalyticsManager,\n    private val saveCurrentServer: SaveCurrentServerInteractor,\n    private val saveAccountInteractor: SaveAccountInteractor,\n    private val factory: RocketChatClientFactory,\n    val serverInteractor: GetConnectingServerInteractor\n) {\n    // TODO - we should validate the current server when opening the app, and have a nonnull get()\n    private var currentServer = serverInteractor.get()!!\n    private val token = tokenRepository.get(currentServer)\n    private lateinit var client: RocketChatClient\n    private lateinit var settings: PublicSettings\n\n    fun setupView() {\n        setupConnectionInfo(currentServer)\n        setupForgotPasswordView()\n    }\n\n    private fun setupConnectionInfo(serverUrl: String) {\n        currentServer = serverUrl\n        client = factory.get(currentServer)\n        settings = settingsInteractor.get(currentServer)\n    }\n\n    private fun setupForgotPasswordView() {\n        if (settings.isPasswordResetEnabled()) {\n            view.showForgotPasswordView()\n        }\n    }\n\n    fun authenticateWithUserAndPassword(usernameOrEmail: String, password: String) {\n        launchUI(strategy) {\n            view.showLoading()\n            try {\n                val token = retryIO(\"login\") {\n                    when {\n                        settings.isLdapAuthenticationEnabled() -&gt;\n                            client.loginWithLdap(usernameOrEmail, password)\n                        usernameOrEmail.isEmail() -&gt;\n                            client.loginWithEmail(usernameOrEmail, password)\n                        else -&gt;\n                            client.login(usernameOrEmail, password)\n                    }\n                }\n                val myself = retryIO(\"me()\") { client.me() }\n                myself.username?.let { username -&gt;\n                    val user = User(\n                        id = myself.id,\n                        roles = myself.roles,\n                        status = myself.status,\n                        name = myself.name,\n                        emails = myself.emails?.map { Email(it.address ?: \"\", it.verified) },\n                        username = username,\n                        utcOffset = myself.utcOffset\n                    )\n                    localRepository.saveCurrentUser(currentServer, user)\n                    saveCurrentServer.save(currentServer)\n                    localRepository.save(LocalRepository.CURRENT_USERNAME_KEY, username)\n                    saveAccount(username)\n                    saveToken(token)\n                    analyticsManager.logLogin(\n                        AuthenticationEvent.AuthenticationWithUserAndPassword,\n                        true\n                    )\n                    view.saveSmartLockCredentials(usernameOrEmail, password)\n                    navigator.toChatList()\n                }\n            } catch (exception: RocketChatException) {\n                when (exception) {\n                    is RocketChatTwoFactorException -&gt; {\n                        navigator.toTwoFA(usernameOrEmail, password)\n                    }\n                    else -&gt; {\n                        analyticsManager.logLogin(\n                            AuthenticationEvent.AuthenticationWithUserAndPassword,\n                            false\n                        )\n                        exception.message?.let {\n                            view.showMessage(it)\n                        }.ifNull {\n                            view.showGenericErrorMessage()\n                        }\n                    }\n                }\n            } finally {\n                view.hideLoading()\n            }\n        }\n\n    }\n\n    fun forgotPassword() = navigator.toForgotPassword()\n\n    private fun saveAccount(username: String) {\n        val icon = settings.favicon()?.let {\n            currentServer.serverLogoUrl(it)\n        }\n        val logo = settings.wideTile()?.let {\n            currentServer.serverLogoUrl(it)\n        }\n        val thumb = currentServer.avatarUrl(username, token?.userId, token?.authToken)\n        val account = Account(\n            settings.siteName() ?: currentServer,\n            currentServer,\n            icon,\n            logo,\n            username,\n            thumb\n        )\n        saveAccountInteractor.save(account)\n    }\n\n    private fun saveToken(token: Token) = tokenRepository.save(currentServer, token)\n}\n</code></pre>\n\n<p>LoginPresenterTest</p>\n\n<pre><code>class LoginPresenterTest {\n\n    lateinit var loginPresenter: LoginPresenter\n\n    private val view = mock(LoginView::class.java)\n    private val strategy = mock(CancelStrategy::class.java)\n    private val navigator = mock(AuthenticationNavigator::class.java)\n    private val tokenRepository = mock(TokenRepository::class.java)\n    private val localRepository = mock(LocalRepository::class.java)\n    private val settingsInteractor = mock(GetSettingsInteractor::class.java)\n    private val analyticsManager = mock(AnalyticsManager::class.java)\n    private val saveCurrentServer = mock(SaveCurrentServerInteractor::class.java)\n    private val saveAccountInteractor = mock(SaveAccountInteractor::class.java)\n    private val factory = mock(RocketChatClientFactory::class.java)\n    private val serverInteractor = mock(GetConnectingServerInteractor::class.java)\n    private val token = mock(Token::class.java)\n    private lateinit var settings: PublicSettings\n\n    @Before\n    fun setUp() {\n        MockitoAnnotations.initMocks(this)\n        loginPresenter = LoginPresenter(\n            view, strategy, navigator, tokenRepository, localRepository, settingsInteractor,\n            analyticsManager, saveCurrentServer, saveAccountInteractor, factory, serverInteractor\n        )\n    }\n\n    @Test\n    fun testAttach() {\n        loginPresenter.setupView()\n        assertNotNull(view)\n    }\n}\n</code></pre>\n\n<p>But on running the test I am getting KotlinNullPointerException as the variable current server is becoming null because there is no url saved in it. Is there any way I can avoid it from being null during running test. I have tried using elvis operator and modify LoginPresenter but I want to know is there anything other way which can work. I just want to initialise the value of current server with any url string to avoid NPE during running tests.</p>\n\n<pre><code>private var currentServer = serverInteractor.get()?: \"https://example.com\"\n</code></pre>\n\n<p>I also have SaveConnectingServerInteractor and GetConnectingServerInteractor  which is used to store the server url at the time of authentication. </p>\n\n<pre><code>class SaveConnectingServerInteractor @Inject constructor(\n    @ForAuthentication private val repository: CurrentServerRepository\n) {\n    fun save(url: String) = repository.save(url)\n}\n\nclass GetConnectingServerInteractor @Inject constructor(\n    @ForAuthentication private val repository: CurrentServerRepository\n) {\n    fun get(): String? = repository.get()\n\n    fun clear() {\n        repository.clear()\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559764514, "post_id": 56467129, "comment_id": 99525726, "body": "So, I should only use .addToBackStack when I want to create one or more instances  of the fragment?"}, {"owner": {"reputation": 2512, "user_id": 10635880, "user_type": "registered", "profile_image": "https://graph.facebook.com/961118704088155/picture?type=large", "display_name": "Vedprakash Wagh", "link": "https://stackoverflow.com/users/10635880/vedprakash-wagh"}, "reply_to_user": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559764581, "post_id": 56467129, "comment_id": 99525759, "body": "You can read why .addToBackStack is used here -&gt; <a href=\"https://stackoverflow.com/questions/22984950/what-is-the-meaning-of-addtobackstack-with-null-parameter\" title=\"what is the meaning of addtobackstack with null parameter\">stackoverflow.com/questions/22984950/&hellip;</a>"}, {"owner": {"reputation": 2512, "user_id": 10635880, "user_type": "registered", "profile_image": "https://graph.facebook.com/961118704088155/picture?type=large", "display_name": "Vedprakash Wagh", "link": "https://stackoverflow.com/users/10635880/vedprakash-wagh"}, "reply_to_user": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559764659, "post_id": 56467129, "comment_id": 99525793, "body": "Also, why are you doing HelpFragment.newInstance()? You can simply use new HelpFragment() in  your getSupportFragmentManager.replace() method"}, {"owner": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559764787, "post_id": 56467129, "comment_id": 99525854, "body": "That is true, thanks for the tip. I actually need .repalce(R.id.container, HelpFragment.newInstance())."}, {"owner": {"reputation": 502, "user_id": 4410330, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/05coL.png?s=128&g=1", "display_name": "Yamko", "link": "https://stackoverflow.com/users/4410330/yamko"}, "edited": false, "score": 0, "creation_date": 1559765443, "post_id": 56467129, "comment_id": 99526124, "body": "It&#39;s not a solution. Just a bad advice. You create a new fragment each time you click on button. It hits performance badly. Instead you should create one instance, when user clicked first time on your button"}, {"owner": {"reputation": 2512, "user_id": 10635880, "user_type": "registered", "profile_image": "https://graph.facebook.com/961118704088155/picture?type=large", "display_name": "Vedprakash Wagh", "link": "https://stackoverflow.com/users/10635880/vedprakash-wagh"}, "edited": false, "score": 0, "creation_date": 1559765593, "post_id": 56467129, "comment_id": 99526180, "body": "I&#39;ve been using the same method with my apps with 10K+ downloads, never had a single problem. All the objects that are not used are garbage collected later."}], "tags": [], "owner": {"reputation": 2512, "user_id": 10635880, "user_type": "registered", "profile_image": "https://graph.facebook.com/961118704088155/picture?type=large", "display_name": "Vedprakash Wagh", "link": "https://stackoverflow.com/users/10635880/vedprakash-wagh"}, "is_accepted": true, "score": -1, "last_activity_date": 1559774319, "last_edit_date": 1559774319, "creation_date": 1559764450, "answer_id": 56467129, "question_id": 56467111, "link": "https://stackoverflow.com/questions/56467111/inflate-fragment-just-once/56467129#56467129", "title": "Inflate fragment just once", "body": "<p>If you use <code>addToBackStack</code>, it'll always save the fragments to the backstack. Remove that line to not add the fragment to backstack. <code>addToBackStack</code> is used when there are multiple changes to the transaction, then all the changes are added in stack, and pressing back button will then restore those transactions one by one.</p>\n\n<pre><code>helpFragment = HelpFragment.newInstance()\n            supportFragmentManager\n                .beginTransaction() // Come\u00e7ar a transi\u00e7\u00e3o\n                .replace(R.id.container, helpFragment)\n                .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN)\n                .commit() // Aplicar as altera\u00e7\u00f5es\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2512, "user_id": 10635880, "user_type": "registered", "profile_image": "https://graph.facebook.com/961118704088155/picture?type=large", "display_name": "Vedprakash Wagh", "link": "https://stackoverflow.com/users/10635880/vedprakash-wagh"}, "edited": false, "score": 0, "creation_date": 1559776197, "post_id": 56467211, "comment_id": 99529616, "body": "How is your answer relevant to the question that is asked? I mean, what has &quot;Using lazy in Kotlin to bind Android views&quot; got to do with Fragments in Android?"}, {"owner": {"reputation": 502, "user_id": 4410330, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/05coL.png?s=128&g=1", "display_name": "Yamko", "link": "https://stackoverflow.com/users/4410330/yamko"}, "reply_to_user": {"reputation": 2512, "user_id": 10635880, "user_type": "registered", "profile_image": "https://graph.facebook.com/961118704088155/picture?type=large", "display_name": "Vedprakash Wagh", "link": "https://stackoverflow.com/users/10635880/vedprakash-wagh"}, "edited": false, "score": 0, "creation_date": 1559802167, "post_id": 56467211, "comment_id": 99534475, "body": "@VedprakashWagh read about lazy initialization and what it used for. This certainly can solve the problem mentioned in question. I prefer to show people how the can solve their problem instead of giving &quot;bad solutions&quot;"}, {"owner": {"reputation": 2512, "user_id": 10635880, "user_type": "registered", "profile_image": "https://graph.facebook.com/961118704088155/picture?type=large", "display_name": "Vedprakash Wagh", "link": "https://stackoverflow.com/users/10635880/vedprakash-wagh"}, "edited": false, "score": 0, "creation_date": 1559802586, "post_id": 56467211, "comment_id": 99534632, "body": "If you&#39;re giving an answer, try being more clear on what you&#39;re trying to tell. Your link carries the questioner to a completely different thing. There&#39;s literally no mention of anything remotely related to question on the link that you provided, also, my answer isn&#39;t wrong/&quot;bad solution&quot;, if it was I&#39;d have known ages ago. I create a new fragment every time bottomnavigation item is clicked in my apps. Never had a single problem on my apps with almost 3-4K+ daily active users."}], "tags": [], "owner": {"reputation": 502, "user_id": 4410330, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/05coL.png?s=128&g=1", "display_name": "Yamko", "link": "https://stackoverflow.com/users/4410330/yamko"}, "is_accepted": false, "score": -1, "last_activity_date": 1559764866, "creation_date": 1559764866, "answer_id": 56467211, "question_id": 56467111, "link": "https://stackoverflow.com/questions/56467111/inflate-fragment-just-once/56467211#56467211", "title": "Inflate fragment just once", "body": "<p>It is better to see whole codebase of your problem. You can solve it with Kotlin's <code>lazy</code>. Check out this <a href=\"https://www.lordcodes.com/posts/using-lazy-in-kotlin-to-bind-android-views\" rel=\"nofollow noreferrer\">topic</a></p>\n"}, {"tags": [], "owner": {"reputation": 1759, "user_id": 974184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2f97a8d3cae8511952cb3eda041027?s=128&d=identicon&r=PG", "display_name": "Rodrigo Queiroz", "link": "https://stackoverflow.com/users/974184/rodrigo-queiroz"}, "is_accepted": false, "score": 0, "last_activity_date": 1559764982, "creation_date": 1559764982, "answer_id": 56467233, "question_id": 56467111, "link": "https://stackoverflow.com/questions/56467111/inflate-fragment-just-once/56467233#56467233", "title": "Inflate fragment just once", "body": "<p>Adding a Fragment to the back stack will retain fragments in the stack so that you can navigate back when needed.</p>\n\n<p>You can still use the back stack but you have to check if the fragment is already added so that you don't have duplicated instances of the fragment in the stack.</p>\n\n<p>E.g.</p>\n\n<pre><code>val helpFragment = HelpFragment.newInstance()\nval isInBackstack = supportFragmentManager.findFragmentByTag(helpFragment.toString())\nif (!isInBackstack) {\n    supportFragmentManager\n        .beginTransaction() // Come\u00e7ar a transi\u00e7\u00e3o\n        .replace(R.id.container, helpFragment)\n        .addToBackStack(helpFragment.toString())\n        .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN)\n        .commit() // Aplicar as altera\u00e7\u00f5es\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 56467129, "answer_count": 3, "score": 0, "last_activity_date": 1559774319, "creation_date": 1559764343, "last_edit_date": 1559764636, "question_id": 56467111, "link": "https://stackoverflow.com/questions/56467111/inflate-fragment-just-once", "title": "Inflate fragment just once", "body": "<p>So, I have this code inside a <code>setOnClickListener</code>:</p>\n\n<pre><code>helpFragment = HelpFragment.newInstance()\n            supportFragmentManager\n                .beginTransaction() // Come\u00e7ar a transi\u00e7\u00e3o\n                .replace(R.id.container, helpFragment)\n                .addToBackStack(helpFragment.toString())\n                .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN)\n                .commit() // Aplicar as altera\u00e7\u00f5es\n}\n</code></pre>\n\n<p>But the problem is, every time I click the button a new instance of the fragment is instantiated. With that, for example, if I click 10 times in the button, I will have 9 fragments added to backstack and 1 visible. How can I create just one instance of the fragment? I have tried:</p>\n\n<pre><code>if (helpFragment == null)\n</code></pre>\n\n<p>But that obviously doesn't work...</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1559758405, "post_id": 56465852, "comment_id": 99523186, "body": "This is caused by replacing adapter when data changes. You&#39;re only supposed to update the list it references and notify changes."}, {"owner": {"reputation": 2606, "user_id": 3940133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ndv13.jpg?s=128&g=1", "display_name": "HendraWD", "link": "https://stackoverflow.com/users/3940133/hendrawd"}, "edited": false, "score": 0, "creation_date": 1559761728, "post_id": 56465852, "comment_id": 99524599, "body": "You are creating a new adapter and set it to the RecyclerView every time, no wonder it will jump to the top."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9135388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca65215d5decff5eb3723ac83866a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Enzo Franzini", "link": "https://stackoverflow.com/users/9135388/enzo-franzini"}, "edited": false, "score": 0, "creation_date": 1559759670, "post_id": 56465927, "comment_id": 99523738, "body": "Hi Diego, first of all, thank you for helping me, you&#39;re the guy.  I&#39;m a beginner in Kotlin, so can you explain a little bit more detailed? I&#39;ll be very grateful."}, {"owner": {"reputation": 916, "user_id": 2874418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhGuM.jpg?s=128&g=1", "display_name": "Diego Malone", "link": "https://stackoverflow.com/users/2874418/diego-malone"}, "reply_to_user": {"reputation": 59, "user_id": 9135388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca65215d5decff5eb3723ac83866a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Enzo Franzini", "link": "https://stackoverflow.com/users/9135388/enzo-franzini"}, "edited": false, "score": 0, "creation_date": 1559759821, "post_id": 56465927, "comment_id": 99523790, "body": "I am not able to provide more code because I don&#39;t have your <code>ViewHolderAdapter</code> code. But the main point is that you should keep the same adapter and only update the data. You may find <a href=\"https://stackoverflow.com/questions/31367599/how-to-update-recyclerview-adapter-data?rq=1\">this answer</a> helpful in how to achieve this."}, {"owner": {"reputation": 59, "user_id": 9135388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca65215d5decff5eb3723ac83866a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Enzo Franzini", "link": "https://stackoverflow.com/users/9135388/enzo-franzini"}, "edited": false, "score": 0, "creation_date": 1559760502, "post_id": 56465927, "comment_id": 99524071, "body": "I edited and add the ViewHolderAdapter. He&#39;s pretty simple"}, {"owner": {"reputation": 59, "user_id": 9135388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca65215d5decff5eb3723ac83866a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Enzo Franzini", "link": "https://stackoverflow.com/users/9135388/enzo-franzini"}, "edited": false, "score": 0, "creation_date": 1559761590, "post_id": 56465927, "comment_id": 99524538, "body": "I think that my case is a little different of the link that you recommend me, because I do not use Lists inside my ViewHolderAdapter"}, {"owner": {"reputation": 916, "user_id": 2874418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhGuM.jpg?s=128&g=1", "display_name": "Diego Malone", "link": "https://stackoverflow.com/users/2874418/diego-malone"}, "reply_to_user": {"reputation": 59, "user_id": 9135388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca65215d5decff5eb3723ac83866a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Enzo Franzini", "link": "https://stackoverflow.com/users/9135388/enzo-franzini"}, "edited": false, "score": 0, "creation_date": 1559761751, "post_id": 56465927, "comment_id": 99524611, "body": "Yes, that is the problem. You will need a list in your <code>ViewHolderAdapter</code>. The adapter will receive additional elements to append to its list to allow the <code>RecyclerView</code> to maintain the current position."}, {"owner": {"reputation": 59, "user_id": 9135388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca65215d5decff5eb3723ac83866a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Enzo Franzini", "link": "https://stackoverflow.com/users/9135388/enzo-franzini"}, "edited": false, "score": 0, "creation_date": 1559829142, "post_id": 56465927, "comment_id": 99548572, "body": "Valeu cara. Foi isso mesmo. Muito obrigado"}, {"owner": {"reputation": 916, "user_id": 2874418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhGuM.jpg?s=128&g=1", "display_name": "Diego Malone", "link": "https://stackoverflow.com/users/2874418/diego-malone"}, "reply_to_user": {"reputation": 59, "user_id": 9135388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca65215d5decff5eb3723ac83866a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Enzo Franzini", "link": "https://stackoverflow.com/users/9135388/enzo-franzini"}, "edited": false, "score": 0, "creation_date": 1559829240, "post_id": 56465927, "comment_id": 99548641, "body": "Nice! Also, be sure to use English in your comments."}], "tags": [], "owner": {"reputation": 916, "user_id": 2874418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhGuM.jpg?s=128&g=1", "display_name": "Diego Malone", "link": "https://stackoverflow.com/users/2874418/diego-malone"}, "is_accepted": true, "score": 1, "last_activity_date": 1559758434, "creation_date": 1559758434, "answer_id": 56465927, "question_id": 56465852, "link": "https://stackoverflow.com/questions/56465852/recyclerview-scroll-returning-to-the-top-of-the-list-when-add-new-items/56465927#56465927", "title": "RecyclerView scroll returning to the top of the list when add new items", "body": "<p>As you are creating a new adapter each time, the <code>RecyclerView</code> will be always going back to the start position. You have to update the current adapter, and not to create another adapter with the entire list.</p>\n\n<p>You should have a method on your adapter to manage the item list, such as </p>\n\n<pre><code>fun updateList(product: Product) {\n    myList.add(product.list)\n}\n</code></pre>\n\n<p>And in your else branch you will need to update the list</p>\n\n<pre><code>recyclerView.apply{\n    (adapter as? ViewHolderAdapter)?.updateList(products)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 11028902, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-onJNcV3RQW8/AAAAAAAAAAI/AAAAAAAAAC8/fl7xRYpK6fo/photo.jpg?sz=128", "display_name": "Pavel Malinovskij", "link": "https://stackoverflow.com/users/11028902/pavel-malinovskij"}, "is_accepted": false, "score": 1, "last_activity_date": 1559762532, "creation_date": 1559762532, "answer_id": 56466761, "question_id": 56465852, "link": "https://stackoverflow.com/questions/56465852/recyclerview-scroll-returning-to-the-top-of-the-list-when-add-new-items/56466761#56466761", "title": "RecyclerView scroll returning to the top of the list when add new items", "body": "<p>just use code bellow, and input requared position (in your case - last position)\nrecyclerView.scrollToPosition()</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 9135388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca65215d5decff5eb3723ac83866a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Enzo Franzini", "link": "https://stackoverflow.com/users/9135388/enzo-franzini"}, "edited": false, "score": 0, "creation_date": 1559764000, "post_id": 56466908, "comment_id": 99525531, "body": "I understand your point, but in my case, the list is already completed, I don&#39;t need to add nothing in the product&#39;s list. I just want to show the content in pages when the user scroll."}], "tags": [], "owner": {"reputation": 731, "user_id": 9130759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Jm9w.png?s=128&g=1", "display_name": "Mini Chip", "link": "https://stackoverflow.com/users/9130759/mini-chip"}, "is_accepted": false, "score": 1, "last_activity_date": 1559763321, "creation_date": 1559763321, "answer_id": 56466908, "question_id": 56465852, "link": "https://stackoverflow.com/questions/56465852/recyclerview-scroll-returning-to-the-top-of-the-list-when-add-new-items/56466908#56466908", "title": "RecyclerView scroll returning to the top of the list when add new items", "body": "<p>Create one instance of your recycler view adapter , the pass the orignal list to it . whenever you want to add the any data , add it to the list , and then notify the adapter. \nIn your case , Just add the product list and notify it </p>\n\n<pre><code>private list&lt;product&gt; list = newArrayList&lt;&gt;();\n\nadapter= new ViewHolderAdapter(list);\n</code></pre>\n\n<p>OnClick of button when you want to add data , just insert it into the list </p>\n\n<pre><code>list.addAll(productlist);\nAnd now notify it to the adapter \nadapter.notifyDataSetChange();\n</code></pre>\n\n<p>In your case </p>\n\n<pre><code>fun showData(products:Product,productsListSize:Int){\n\nif(!isStarted){\n\n         list.addAll(product)\n          adapter.notifyDataSetChange();\n          pageNumber++\n    }\n\n         progressBar.visibility=View.GONE\n         isStarted=true\n    }\n    progressBar.visibility=View.GONE\n }\n\n     }\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9135388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca65215d5decff5eb3723ac83866a8a?s=128&d=identicon&r=PG&f=1", "display_name": "Enzo Franzini", "link": "https://stackoverflow.com/users/9135388/enzo-franzini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3451, "favorite_count": 0, "closed_date": 1559828621, "accepted_answer_id": 56465927, "answer_count": 3, "score": 2, "last_activity_date": 1559764199, "creation_date": 1559758060, "last_edit_date": 1559764199, "question_id": 56465852, "link": "https://stackoverflow.com/questions/56465852/recyclerview-scroll-returning-to-the-top-of-the-list-when-add-new-items", "closed_reason": "Duplicate", "title": "RecyclerView scroll returning to the top of the list when add new items", "body": "<p>I'm developing a application that the RecyclerView load new data when the user hit the bottom of the scroll. However, the list is already completed and have it's fixed size, I just want to put the content in the Recycler, but when I insert the content in the Recycler, the scroll returns to the top of the list. And then I need to scroll down all over again until I reach the new data that was inserted in to the bottom of the list. All that I want is to maintain the scroll position when the new data is loaded.</p>\n\n<p>I've tried use descendantFocusability = \"blocksDescendants\", but this didn't work.</p>\n\n<p>This is my XML code where the RecyclerView can be found</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xmlversion=\"1.0\"encoding=\"utf-8\"?&gt;\n\n&lt;RelativeLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:card_view=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\napp:headerLayout=\"@layout/top_navigation_bar\"\ntools:context=\".MainActivity\"\nandroid:descendantFocusability=\"blocksDescendants\"&gt;\n\n&lt;RelativeLayout\nandroid:id=\"@+id/productsLayout\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginBottom=\"50dp\"\nandroid:orientation=\"vertical\"\nandroid:background=\"#EBE7E7\"\n&gt;\n\n&lt;TextView\nandroid:id=\"@+id/productsLayoutTitle\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginStart=\"16dp\"\nandroid:layout_marginTop=\"16dp\"\nandroid:layout_marginBottom=\"16dp\"\nandroid:lineSpacingExtra=\"0sp\"\nandroid:text=\"@string/produtos_em_destaque\"\nandroid:textColor=\"#000000\"\nandroid:textSize=\"16sp\"\nandroid:textStyle=\"normal\"/&gt;\n\n&lt;androidx.recyclerview.widget.RecyclerView\nandroid:id=\"@+id/recyclerView\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_below=\"@+id/productsLayoutTitle\"\n/&gt;\n\n&lt;ProgressBar\nandroid:id=\"@+id/progressBar\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_centerVertical=\"true\"\nandroid:layout_centerHorizontal=\"true\"\nandroid:layout_alignBottom=\"@+id/recyclerView\"\nandroid:scaleX=\"1\"\nandroid:scaleY=\"1\"\nandroid:progressTint=\"#1C36FF\"\n/&gt;\n\n&lt;/RelativeLayout&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>The code that is used to add data to the RecyclersView is</p>\n\n<pre><code>fun showData(products:Product,productsListSize:Int){\n\nif(!isStarted){\n\n  recyclerView.apply{\n   layoutManager=LinearLayoutManager(this@MainActivity)\n   adapter=ViewHolderAdapter(products,productsListSize)\n   (adapter as ViewHolderAdapter).notifyItemRangeInserted(0,productsListSize)\n   pageNumber++\n  }\n\n  progressBar.visibility=View.GONE\n  isStarted=true\n}else{\n\n  recyclerView.apply{\n    adapter=ViewHolderAdapter(products,pageNumber*limitPerPage)\n    (adapter as ViewHolderAdapter).notifyItemRangeInserted(((pageNumber-1)*limitPerPage),pageNumber*limitPerPage)\n    pageNumber++\n  }\n  progressBar.visibility=View.GONE\n}\n\n}\n\n</code></pre>\n\n<p>My ViewHolderAdapter</p>\n\n<pre><code>\npackagecom.example.kotlinbasics\n\nimportandroid.graphics.Color\nimportandroid.view.LayoutInflater\nimportandroid.view.View\nimportandroid.view.ViewGroup\nimportandroid.widget.ImageView\nimportandroid.widget.RatingBar\nimportandroid.widget.TextView\nimportandroidx.recyclerview.widget.RecyclerView\nimportcom.squareup.picasso.Picasso\nimportkotlinx.android.synthetic.main.recyclerview_layout.view.*\n\nclass ViewHolderAdapter(private val products:Product,private val productsListSize:Int):RecyclerView.Adapter&lt;ViewHolderAdapter.ViewHolder&gt;(){\n\noverride fun onCreateViewHolder(parent:ViewGroup,viewType:Int):ViewHolder{\nval view=LayoutInflater.from(parent.context).inflate(R.layout.recyclerview_layout,parent,false)\nreturn ViewHolder(view)\n}\n\noverride fun getItemCount()=productsListSize\n\noverride fun onBindViewHolder(holder:ViewHolder,position:Int){\n\nholder.productName.text=products.produtos[position].nome\nPicasso.get().load(products.produtos[position].img).into(holder.productImage)\n}\n\nclass ViewHolder(itemView:View):RecyclerView.ViewHolder(itemView){\n\nval productName:TextView=itemView.ProductName\nval productImage:ImageView=itemView.ProductImage\n}\n\n}\n\n\n</code></pre>\n\n<p>All application works really fine, the only problem is with that scroll behavior.\nI expected that the scroll position didn't goes to the top of the RecyclersView list when I add new data in him.</p>\n"}, {"tags": ["java", "android", "animation", "kotlin"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1559757268, "post_id": 56465669, "comment_id": 99522744, "body": "Load the images first. Then animate them. Disk I/O and decoding the bitmap will be too slow for 30fps."}, {"owner": {"reputation": 1, "user_id": 11360127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0172a98dcebd88bec64953cb4e53232?s=128&d=identicon&r=PG&f=1", "display_name": "aman chaturvedi", "link": "https://stackoverflow.com/users/11360127/aman-chaturvedi"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1559850734, "post_id": 56465669, "comment_id": 99558682, "body": "what&#39;s the best way to load the images first ?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11360127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0172a98dcebd88bec64953cb4e53232?s=128&d=identicon&r=PG&f=1", "display_name": "aman chaturvedi", "link": "https://stackoverflow.com/users/11360127/aman-chaturvedi"}, "edited": false, "score": 0, "creation_date": 1559850797, "post_id": 56466465, "comment_id": 99558711, "body": "How do I preload the images ?"}, {"owner": {"reputation": 478, "user_id": 1117509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a768c98e53a97a3260763de7a5d01883?s=128&d=identicon&r=PG", "display_name": "kroegerama", "link": "https://stackoverflow.com/users/1117509/kroegerama"}, "reply_to_user": {"reputation": 1, "user_id": 11360127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0172a98dcebd88bec64953cb4e53232?s=128&d=identicon&r=PG&f=1", "display_name": "aman chaturvedi", "link": "https://stackoverflow.com/users/11360127/aman-chaturvedi"}, "edited": false, "score": 0, "creation_date": 1559853384, "post_id": 56466465, "comment_id": 99559753, "body": "@amanchaturvedi just use your own code from above to load the files via BitmapFactory. You can do this in your onCreate for example. Or asynchronous, which is a better approach."}, {"owner": {"reputation": 1, "user_id": 11360127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0172a98dcebd88bec64953cb4e53232?s=128&d=identicon&r=PG&f=1", "display_name": "aman chaturvedi", "link": "https://stackoverflow.com/users/11360127/aman-chaturvedi"}, "edited": false, "score": 0, "creation_date": 1559981352, "post_id": 56466465, "comment_id": 99597157, "body": "loading all the images taking a lot of time, it&#39;s even hanging my emulator. Please tell me an asynchronous way to add images."}, {"owner": {"reputation": 1, "user_id": 11360127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0172a98dcebd88bec64953cb4e53232?s=128&d=identicon&r=PG&f=1", "display_name": "aman chaturvedi", "link": "https://stackoverflow.com/users/11360127/aman-chaturvedi"}, "edited": false, "score": 0, "creation_date": 1560261827, "post_id": 56466465, "comment_id": 99672627, "body": "can you tell how to do that?"}], "tags": [], "owner": {"reputation": 478, "user_id": 1117509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a768c98e53a97a3260763de7a5d01883?s=128&d=identicon&r=PG", "display_name": "kroegerama", "link": "https://stackoverflow.com/users/1117509/kroegerama"}, "is_accepted": false, "score": 0, "last_activity_date": 1559760967, "creation_date": 1559760967, "answer_id": 56466465, "question_id": 56465669, "link": "https://stackoverflow.com/questions/56465669/using-bitmap-factory-to-display-150-images-at-30-images-per-second-inside-a-runn/56466465#56466465", "title": "using bitmap factory to display 150 images at 30 images per second inside a runnable but it&#39;s laggy", "body": "<p>You should load all images before displaying them. To play the animation, you can use an AnimationDrawable:</p>\n\n<pre><code>AnimationDrawable myAnim = new AnimationDrawable();\n</code></pre>\n\n<p>And for each image file, you can use <code>BitmapFactory</code> to decode it into a Bitmap and put this Bitmap into a <code>BitmapDrawable</code>.</p>\n\n<p>Then you can add this BitmapDrawable to your animation:</p>\n\n<pre><code>myAnim.addFrame(myBitmap, 1000/30)\n</code></pre>\n\n<p>You can then use the AnimationDrawable at any time and start the animation with <code>myAnim.start()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11360127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0172a98dcebd88bec64953cb4e53232?s=128&d=identicon&r=PG&f=1", "display_name": "aman chaturvedi", "link": "https://stackoverflow.com/users/11360127/aman-chaturvedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559761921, "creation_date": 1559757175, "last_edit_date": 1559761921, "question_id": 56465669, "link": "https://stackoverflow.com/questions/56465669/using-bitmap-factory-to-display-150-images-at-30-images-per-second-inside-a-runn", "title": "using bitmap factory to display 150 images at 30 images per second inside a runnable but it&#39;s laggy", "body": "<p>I have 150 images in external storage of android device that I've to use as animation for an activity at the rate of 30 images per second.</p>\n\n<p>I've used Bitmap to decode file at the given path and then set it inside an imageView. I am using handler to do this but the animation is quite laggy.</p>\n\n<p>In the code below <code>animationReadyPath</code> is the path to the folder and <code>imageList</code> is the arraylist of files inside that folder. I used this code inside <code>onWindowFocusChanged()</code>.</p>\n\n<pre><code>var i = 0\nval interval = 1000/30       \nval handler = Handler()\nval runnable = Runnable {\n    handler.postDelayed(runnable, interval.toLong())\n    val imgFile = File(animationReadyPath+imageList[i])\n    val myBitmap = BitmapFactory.decodeFile(imgFile.absolutePath)\n    iv_animation_ready.setImageBitmap(myBitmap)\n\n    if(i&lt;numOfImg){\n        i++\n    }\n    if(i&gt;numOfImg){            \n        iv_animation_ready.setImageBitmap(\n            BitmapFactory.decodeFile(\n                animationReadyPath+imageList[149]\n            )\n        )\n    }\n}\nhandler.postAtTime(runnable, System.currentTimeMillis()+interval)\nhandler.postDelayed(runnable, interval.toLong())\n</code></pre>\n\n<p>animation is very laggy. How to correct it or suggest other ways to load animations smoothly.</p>\n\n<p>I can't include images inside my project as it'll increase the size of my project.</p>\n"}, {"tags": ["android", "kotlin", "android-view"], "comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1559749762, "post_id": 56463883, "comment_id": 99519456, "body": "I don&#39;t think there&#39;s any <code>isVisible()</code> method, but you should rather check <code>if (visibility == View.VISIBLE)</code>. That&#39;s because there are 3 possible visibility values: <code>VISIBLE</code>, <code>INVISIBLE</code> and <code>GONE</code>"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 11107511, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b-veF_N8Dv4/AAAAAAAAAAI/AAAAAAAAAG0/FMfPBKWNQOg/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/11107511/rob"}, "edited": false, "score": 0, "creation_date": 1559751612, "post_id": 56463961, "comment_id": 99520397, "body": "Thank you,  I was under the assumption that there would be a isVisible method in the View class."}, {"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 3, "creation_date": 1559752397, "post_id": 56463961, "comment_id": 99520806, "body": "It does exist as a Kotlin extension, you just don&#39;t have the right dependency as per <a href=\"https://stackoverflow.com/a/56464337/1676363\">the actual correct answer</a>"}], "tags": [], "owner": {"reputation": 7045, "user_id": 1000551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8cb0eaa4de7f781e42328ec7544ca3?s=128&d=identicon&r=PG", "display_name": "Vadim Kotov", "link": "https://stackoverflow.com/users/1000551/vadim-kotov"}, "is_accepted": true, "score": 2, "last_activity_date": 1559749803, "creation_date": 1559749803, "answer_id": 56463961, "question_id": 56463883, "link": "https://stackoverflow.com/questions/56463883/toggling-visibility-in-kotlin-isvisible-unresolved-reference/56463961#56463961", "title": "Toggling visibility in Kotlin, isVisible unresolved reference", "body": "<p>Did you define <code>isVisible</code> for a View by yourself?<br>\n<a href=\"https://developer.android.com/reference/kotlin/android/view/View.html\" rel=\"nofollow noreferrer\">View</a> class has no method called<code>isVisible()</code>.</p>\n\n<p>As @user2340612 said, it can be defined as:</p>\n\n<pre><code>fun View.isVisible(): Boolean {\n    return this.visibility == View.VISIBLE\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 1, "last_activity_date": 1559750003, "creation_date": 1559750003, "answer_id": 56464018, "question_id": 56463883, "link": "https://stackoverflow.com/questions/56463883/toggling-visibility-in-kotlin-isvisible-unresolved-reference/56464018#56464018", "title": "Toggling visibility in Kotlin, isVisible unresolved reference", "body": "<p>There is no <code>isVisible()</code> method inside the class <code>View</code>.<br/>\nYou can define your extension method like this:</p>\n\n<pre><code>fun View.toggleVisibility() {\n    this.visibility = if (this.visibility == View.VISIBLE) View.INVISIBLE else View.VISIBLE\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 10991118, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SFo3Pi0npcM/AAAAAAAAAAI/AAAAAAAADJM/5KKCRETMz54/photo.jpg?sz=128", "display_name": "Chase Farmer", "link": "https://stackoverflow.com/users/10991118/chase-farmer"}, "is_accepted": false, "score": 1, "last_activity_date": 1559750044, "creation_date": 1559750044, "answer_id": 56464033, "question_id": 56463883, "link": "https://stackoverflow.com/questions/56463883/toggling-visibility-in-kotlin-isvisible-unresolved-reference/56464033#56464033", "title": "Toggling visibility in Kotlin, isVisible unresolved reference", "body": "<p>As @Vadim Kotov said, <code>isVisible</code> is not a method that exists within <code>View</code>.  There is, however, a <code>getVisibility()</code> function that will return one of the three possible visibility values: <code>VISIBLE</code>, <code>INVISIBLE</code>, or <code>GONE</code>.  You can use these results to determine the visibility and set it how you want.</p>\n"}, {"tags": [], "owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "is_accepted": false, "score": 10, "last_activity_date": 1559761512, "last_edit_date": 1559761512, "creation_date": 1559751302, "answer_id": 56464337, "question_id": 56463883, "link": "https://stackoverflow.com/questions/56463883/toggling-visibility-in-kotlin-isvisible-unresolved-reference/56464337#56464337", "title": "Toggling visibility in Kotlin, isVisible unresolved reference", "body": "<p>As others mentioned above, you can either specify <code>isVisible()</code> as an extension function by yourself.</p>\n\n<pre><code>fun View.isVisible() = this.visibility == View.Visible\n</code></pre>\n\n<p>Or you can add the KTX view dependency and start using some of the methods there. I recommend you have a look at: <a href=\"https://developer.android.com/reference/kotlin/androidx/core/view/package-summary#(android.view.View).isVisible:kotlin.Boolean\" rel=\"noreferrer\">https://developer.android.com/reference/kotlin/androidx/core/view/package-summary#(android.view.View).isVisible:kotlin.Boolean</a></p>\n\n<p>To import and start using KTX add to your Dependencies in <code>build.gradle</code></p>\n\n<pre><code>implementation \"androidx.core:core-ktx:1.0.2\"\n</code></pre>\n\n<p>KTX is a set of Kotlin extensions that are commonly used. Check also: <a href=\"https://developer.android.com/kotlin/ktx\" rel=\"noreferrer\">https://developer.android.com/kotlin/ktx</a></p>\n"}], "owner": {"reputation": 45, "user_id": 11107511, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b-veF_N8Dv4/AAAAAAAAAAI/AAAAAAAAAG0/FMfPBKWNQOg/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/11107511/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2845, "favorite_count": 0, "accepted_answer_id": 56463961, "answer_count": 4, "score": 4, "last_activity_date": 1559761512, "creation_date": 1559749498, "last_edit_date": 1559751780, "question_id": 56463883, "link": "https://stackoverflow.com/questions/56463883/toggling-visibility-in-kotlin-isvisible-unresolved-reference", "title": "Toggling visibility in Kotlin, isVisible unresolved reference", "body": "<p>Slowly learning Kotlin.  Just generating a random number from a roll.  If roll = 9 I want to make the button and seekbar invisible.  </p>\n\n<p>I'm using the toggleVisibility function to accomplish this, but the Kotlin compiler sees isVisible as a unresolved reference</p>\n\n<pre><code>package com.example.randomizer\n\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.View\nimport android.widget.Button\nimport android.widget.SeekBar\nimport android.widget.TextView\nimport android.widget.VideoView\nimport java.util.*\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val rollButton = findViewById&lt;Button&gt;(R.id.rollButton)\n        val resultsTextView = findViewById&lt;TextView&gt;(R.id.resultsTextView)\n        val seekBar = findViewById&lt;SeekBar&gt;(R.id.seekBar)\n        val winText = \"9 You Win !\"\n\n\n\n\n        rollButton.setOnClickListener {\n            val rand = Random().nextInt(seekBar.progress)\n            resultsTextView.text = rand.toString()\n            if (rand == 9) {\n                resultsTextView.text = winText\n                seekBar.toggleVisibility()\n                rollButton.toggleVisibility()\n            }\n\n        }\n\n\n\n    }\n\n    fun View.toggleVisibility() {\n        if (this.isVisible()) {\n            this.visibility = View.INVISIBLE\n        } else {\n            this.visibility = View.VISIBLE\n        }\n    }\n}\n</code></pre>\n\n<p>Compiler error:</p>\n\n<pre><code>unresolved reference isVisible\n</code></pre>\n"}, {"tags": ["android", "kotlin", "colors"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6092898"}, "edited": false, "score": 0, "creation_date": 1559745852, "post_id": 56462810, "comment_id": 99517170, "body": "i see a bug in your code."}, {"owner": {"reputation": 117, "user_id": 1610059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e78c13a064187bed0f6f71995f9fed?s=128&d=identicon&r=PG", "display_name": "Pepa Novotn&#253;", "link": "https://stackoverflow.com/users/1610059/pepa-novotn%c3%bd"}, "edited": false, "score": 1, "creation_date": 1559746195, "post_id": 56462810, "comment_id": 99517384, "body": "@Roger Well - I do, obviously, too. I just do not know how to fix (or rewrite) it properly, otherwise I would not ask the question here in the first place :)"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 1610059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e78c13a064187bed0f6f71995f9fed?s=128&d=identicon&r=PG", "display_name": "Pepa Novotn&#253;", "link": "https://stackoverflow.com/users/1610059/pepa-novotn%c3%bd"}, "edited": false, "score": 0, "creation_date": 1559750346, "post_id": 56463135, "comment_id": 99519784, "body": "Yes, this seems to work perfectly, thank you!  I would just note that correct syntax for receiver annotation would be: <code>@ColorInt infix fun @receiver:ColorInt Int.overlay(@ColorInt bottomColor: Int): Int</code>"}], "tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": true, "score": 2, "last_activity_date": 1559751695, "last_edit_date": 1559751695, "creation_date": 1559746850, "answer_id": 56463135, "question_id": 56462810, "link": "https://stackoverflow.com/questions/56462810/how-to-calculate-result-of-overlaying-two-color-integers-with-alpha-channels-on/56463135#56463135", "title": "How to calculate result of overlaying two color integers with alpha channels on Android", "body": "<p>I think this will blend colours respecting their alphas.</p>\n\n<pre><code>@ColorInt infix fun @receiver:ColorInt Int.overlay(@ColorInt bottomColor: Int): Int {\n    val topAlpha = Color.alpha(this)\n    val bottomAlpha = Color.alpha(bottomColor)\n    val alphaSum = bottomAlpha + topAlpha\n    return Color.argb(\n        Math.min(255, alphaSum),\n        (Color.red(bottomColor) * bottomAlpha + Color.red(this) * topAlpha) / alphaSum,\n        (Color.green(bottomColor) * bottomAlpha + Color.green(this) * topAlpha) / alphaSum,\n        (Color.blue(bottomColor) * bottomAlpha + Color.blue(this) * topAlpha) / alphaSum\n    )\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 1610059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e78c13a064187bed0f6f71995f9fed?s=128&d=identicon&r=PG", "display_name": "Pepa Novotn&#253;", "link": "https://stackoverflow.com/users/1610059/pepa-novotn%c3%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 56463135, "answer_count": 1, "score": 0, "last_activity_date": 1559751695, "creation_date": 1559745742, "question_id": 56462810, "link": "https://stackoverflow.com/questions/56462810/how-to-calculate-result-of-overlaying-two-color-integers-with-alpha-channels-on", "title": "How to calculate result of overlaying two color integers with alpha channels on Android", "body": "<p>I have two colors with alpha channels represented as integers on Android and I need to get the result color of these colors being overlayed over each other (as if I had two semi-transparent views on each other).</p>\n\n<p>I have already tried to use the variations of <code>ColorUtils.blendARGB</code> but that is not exactly what I need.</p>\n\n<p>I can easily calculate something like this:</p>\n\n<pre><code>/**\n * Takes receiver as top color and attempts to overlay it over param color.\n * Result is basically [ColorUtils.blendARGB] but in overlay mode instead of blend mode.\n */\ninfix fun Int.overlay(bottomColor: Int): Int {\n    val ratio = 1 - ((Color.alpha(this) / 255f) * (Color.alpha(bottomColor) / 255f))\n    return ColorUtils.blendARGB(ColorUtils.setAlphaComponent(this, 255), ColorUtils.setAlphaComponent(bottomColor, 255), ratio)\n}\n</code></pre>\n\n<p>It is however obvious that this will not work in case both colors have alpha channel as it will remove alpha completely.</p>\n\n<p>How can I also keep the alpha channel of both overlaying colors?</p>\n"}, {"tags": ["android", "kotlin", "graphql", "apollo", "apollo-android"], "comments": [{"owner": {"reputation": 2863, "user_id": 11097368, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--1X0N-bF1wE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOhgeQfUYdlIL7iiOmZ15h6e3k02Q/mo/photo.jpg?sz=128", "display_name": "James Dean", "link": "https://stackoverflow.com/users/11097368/james-dean"}, "edited": false, "score": 0, "creation_date": 1559787204, "post_id": 56462107, "comment_id": 99531431, "body": "graphql only allows GET, you need to pass the parameter in query string."}], "owner": {"reputation": 321, "user_id": 6006986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMZSc.jpg?s=128&g=1", "display_name": "Koerfer_P", "link": "https://stackoverflow.com/users/6006986/koerfer-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 594, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1559743382, "creation_date": 1559743382, "question_id": 56462107, "link": "https://stackoverflow.com/questions/56462107/apollo-sends-subscription-as-get", "title": "Apollo sends subscription as GET", "body": "<p>my tech setup is as follows:</p>\n\n<p>GraphQl via Apollo</p>\n\n<p>AWS as backend</p>\n\n<p>Native Android App written in Kotlin</p>\n\n<p>GraphQl queries and mutations work without any problem.</p>\n\n<p>I have the following Issue:</p>\n\n<p>When creating a subscription the execution produces a GET instead of a POST. Resulting in a Backend Error saying:</p>\n\n<pre><code>&lt;-- 400 Bad Request aws.url/graphql (152ms)\nContent-Type: application/json;charset=UTF-8\nContent-Length: 135\nConnection: close\nDate: Wed, 05 Jun 2019 12:40:04 GMT\nx-amzn-RequestId: id\nx-amzn-ErrorType: MalformedHttpRequestException\nX-Cache: Error from cloudfront\nVia: 1.1 cloudfront.url (CloudFront)\nX-Amz-Cf-Pop: pop\nX-Amz-Cf-Id: id\n{\n \"errors\" : [ {\n   \"message\" : \"Invalid request, `query` can't be null.\",\n   \"errorType\" : \"MalformedHttpRequestException\"\n } ]\n}\n\n</code></pre>\n\n<p>Here is my code:</p>\n\n<p><strong>Client creation:</strong></p>\n\n<pre><code>val logger = HttpLoggingInterceptor()\n        logger.level = HttpLoggingInterceptor.Level.HEADERS\n        val blogger = HttpLoggingInterceptor()\n        blogger.level = HttpLoggingInterceptor.Level.BODY\n        val client = OkHttpClient.Builder()\n                .addInterceptor(blogger)\n                .authenticator(get())\n                .build()\n        ApolloClient.builder()\n            .serverUrl(BuildConfig.backendUrl)\n            .okHttpClient(client)\n            .subscriptionTransportFactory(WebSocketSubscriptionTransport.Factory(BuildConfig.backendUrl, client))\n            .build() as ApolloClient\n</code></pre>\n\n<p><strong>Subscription</strong></p>\n\n<pre><code>override suspend fun subscribeToVehiclePosition(vehicleId: String, listener: DataRegistration.Listener&lt;SubscribeToVehicleSubscription.Data&gt;): DataRegistration {\n        val registration = RemoteDataRegistration()\n        authenticatedClient.subscribe(SubscribeToVehicleSubscription.builder().id(vehicleId).build()).execute(object: ApolloSubscriptionCall.Callback&lt;SubscribeToVehicleSubscription.Data&gt; {\n            override fun onFailure(e: ApolloException) {\n                listener.onClose(e)\n            }\n\n            override fun onResponse(response: Response&lt;SubscribeToVehicleSubscription.Data&gt;) {\n                val data = response.data()\n                if (data != null) {\n                    listener.onData(data)\n                }\n            }\n\n            override fun onTerminated() {\n                listener.onClose(IllegalStateException(\"Connection Terminated!!\"))\n            }\n\n            override fun onCompleted() {\n                listener.onCompleted()\n            }\n        })\n        return registration\n    }\n</code></pre>\n\n<p><strong>The graphql definition</strong></p>\n\n<pre><code>subscription subscribeToVehicle($id: String!) {\n    subscribeToCreateVehiclePositionLog(vehicleId: $id) {\n        lat\n        lng\n        date\n        tripId\n    }\n}\n</code></pre>\n\n<p><strong>The schema</strong></p>\n\n<pre><code>{\n          \"kind\": \"OBJECT\",\n          \"name\": \"Subscription\",\n          \"description\": null,\n          \"fields\": [\n            {\n              \"name\": \"subscribeToCreateVehiclePositionLog\",\n              \"description\": null,\n              \"args\": [\n                {\n                  \"name\": \"vehicleId\",\n                  \"description\": null,\n                  \"type\": {\n                    \"kind\": \"NON_NULL\",\n                    \"name\": null,\n                    \"ofType\": {\n                      \"kind\": \"SCALAR\",\n                      \"name\": \"String\",\n                      \"ofType\": null\n                    }\n                  },\n                  \"defaultValue\": null\n                }\n              ],\n              \"type\": {\n                \"kind\": \"OBJECT\",\n                \"name\": \"VehiclePositionLog\",\n                \"ofType\": null\n              },\n              \"isDeprecated\": false,\n              \"deprecationReason\": null\n            }\n          ],\n          \"inputFields\": null,\n          \"interfaces\": [],\n          \"enumValues\": null,\n          \"possibleTypes\": null\n        },\n</code></pre>\n\n<p>I\u00b4m a bit lost why the subscription is called as a GET call.\nCan anybody help me / does know what\u00b4s wrong here?</p>\n"}, {"tags": ["java", "kotlin", "mocking", "mockito", "ros"], "comments": [{"owner": {"reputation": 8429, "user_id": 2636929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fa83a02c04af43fcd224821ca9b750?s=128&d=identicon&r=PG", "display_name": "Stultuske", "link": "https://stackoverflow.com/users/2636929/stultuske"}, "edited": false, "score": 1, "creation_date": 1559742232, "post_id": 56461724, "comment_id": 99515059, "body": "do you have a class called Nothing which you use in this flow?"}, {"owner": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "reply_to_user": {"reputation": 8429, "user_id": 2636929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fa83a02c04af43fcd224821ca9b750?s=128&d=identicon&r=PG", "display_name": "Stultuske", "link": "https://stackoverflow.com/users/2636929/stultuske"}, "edited": false, "score": 0, "creation_date": 1559742321, "post_id": 56461724, "comment_id": 99515118, "body": "No, I think it is referring to the Nothing class of Kotlin: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "is_accepted": true, "score": 2, "last_activity_date": 1559744027, "creation_date": 1559744027, "answer_id": 56462309, "question_id": 56461724, "link": "https://stackoverflow.com/questions/56461724/why-does-mockito-expects-my-verification-method-to-be-called-with-nothing/56462309#56462309", "title": "Why does Mockito expects my verification method to be called with `Nothing`?", "body": "<p>That's because your <code>Publisher</code> class is generic. Creating mock with <code>mock(Publisher::class.java)</code> code creates <code>Publisher&lt;*&gt;</code> object (it means that type parameter is <code>Nothing</code>).</p>\n\n<p>To solve it you can't just place type parameter in mock creating code - <code>Publisher&lt;String&gt;::class.java</code> is not a valid code for Java or Kotlin.</p>\n\n<p>All you can do is unchecked cast:</p>\n\n<pre><code>val publisherMock = mock(Publisher::class.java) as Publisher&lt;String&gt;\n</code></pre>\n\n<p>If you need to disable warning from <code>Android Studio</code> just place <code>@Suppress(\"UNCHECKED_CAST\")</code> line before that.</p>\n"}], "owner": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "closed_date": 1559744037, "accepted_answer_id": 56462309, "answer_count": 1, "score": 1, "last_activity_date": 1559744050, "creation_date": 1559742146, "last_edit_date": 1559743580, "question_id": 56461724, "link": "https://stackoverflow.com/questions/56461724/why-does-mockito-expects-my-verification-method-to-be-called-with-nothing", "closed_reason": "Duplicate", "title": "Why does Mockito expects my verification method to be called with `Nothing`?", "body": "<p>In my project I tried to setup a test in which should be verified that a method is called with a specific parameter. For this I am using Mockito and Kotlin. </p>\n\n<p>In the test I am using a mock class. (<code>publisher</code>) This class is part of rosjava and contains a method <code>publish</code>;</p>\n\n<pre><code>public interface Publisher&lt;T&gt; extends TopicParticipant { //(java)\n    void setLatchMode(boolean var1);\n\n    boolean getLatchMode();\n\n    T newMessage();\n\n    void publish(T var1);\n\n    boolean hasSubscribers();\n\n    int getNumberOfSubscribers();\n\n    void shutdown(long var1, TimeUnit var3);\n\n    void shutdown();\n\n    void addListener(PublisherListener&lt;T&gt; var1);\n}\n</code></pre>\n\n<p>When I try to set my expectation like: </p>\n\n<pre><code>val publisherMock = mock(Publisher::class.java)\n\nverify(publisherMock, atLeastOnce()).publish(message) // message is underlined with a red color\n</code></pre>\n\n<p>This does not compile and says that the parameter for <code>publish</code> should be of class <code>Nothing!</code>. Why is this? </p>\n"}, {"tags": ["kotlin", "android-jetpack", "android-bottomappbar", "android-jetpack-navigation"], "comments": [{"owner": {"reputation": 679, "user_id": 905006, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6496e721783a26b87bfb939bf33d830e?s=128&d=identicon&r=PG", "display_name": "SlowDeep", "link": "https://stackoverflow.com/users/905006/slowdeep"}, "edited": false, "score": 1, "creation_date": 1614624323, "post_id": 56461156, "comment_id": 117436245, "body": "Thank you for editing in the solution, saved me some time!"}, {"owner": {"reputation": 1557, "user_id": 10008183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H2oBc1SH68A/AAAAAAAAAAI/AAAAAAAAAuw/w1z-RiIGsvs/photo.jpg?sz=128", "display_name": "Doilio Matsinhe", "link": "https://stackoverflow.com/users/10008183/doilio-matsinhe"}, "reply_to_user": {"reputation": 679, "user_id": 905006, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6496e721783a26b87bfb939bf33d830e?s=128&d=identicon&r=PG", "display_name": "SlowDeep", "link": "https://stackoverflow.com/users/905006/slowdeep"}, "edited": false, "score": 1, "creation_date": 1614714095, "post_id": 56461156, "comment_id": 117468253, "body": "You&#39;re welcome @SlowDeep , Happy Coding"}], "answers": [{"comments": [{"owner": {"reputation": 1557, "user_id": 10008183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H2oBc1SH68A/AAAAAAAAAAI/AAAAAAAAAuw/w1z-RiIGsvs/photo.jpg?sz=128", "display_name": "Doilio Matsinhe", "link": "https://stackoverflow.com/users/10008183/doilio-matsinhe"}, "edited": false, "score": 0, "creation_date": 1559742268, "post_id": 56461336, "comment_id": 99515079, "body": "Worked, Thanks, the biggest problem was finding the fragments to set the visibility, ended up using a listener"}], "tags": [], "owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "is_accepted": true, "score": 4, "last_activity_date": 1559740805, "creation_date": 1559740805, "answer_id": 56461336, "question_id": 56461156, "link": "https://stackoverflow.com/questions/56461156/how-to-hide-the-bottom-navigation-bar-in-certain-fragments/56461336#56461336", "title": "How to hide the bottom navigation bar in certain fragments?", "body": "<p>For your fragment where it should be visible</p>\n\n<pre><code>navView.visibility = View.VISIBLE\n</code></pre>\n\n<p>Where it shouldn't be visible</p>\n\n<pre><code>navView.visibility = View.GONE\n</code></pre>\n"}], "owner": {"reputation": 1557, "user_id": 10008183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H2oBc1SH68A/AAAAAAAAAAI/AAAAAAAAAuw/w1z-RiIGsvs/photo.jpg?sz=128", "display_name": "Doilio Matsinhe", "link": "https://stackoverflow.com/users/10008183/doilio-matsinhe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2908, "favorite_count": 3, "accepted_answer_id": 56461336, "answer_count": 1, "score": 7, "last_activity_date": 1559742375, "creation_date": 1559740084, "last_edit_date": 1559742375, "question_id": 56461156, "link": "https://stackoverflow.com/questions/56461156/how-to-hide-the-bottom-navigation-bar-in-certain-fragments", "title": "How to hide the bottom navigation bar in certain fragments?", "body": "<p>I have An activity with a navGraph and a bottom Navigation bar with 2 menu items.\nMy problem is that My Bottom Navigation Bar appears everywhere, detailFragment, aboutFragment, signInFragment and so on.</p>\n\n<pre><code>\n        val navController = this.findNavController(R.id.myNavHostFragment)\n\n        val appBarConfiguration = AppBarConfiguration.Builder(\n            R.id.contactsFragment,\n            R.id.profileFragment\n        ).build()\n\n        NavigationUI.setupActionBarWithNavController(this, navController, appBarConfiguration)\n\n        val navView: BottomNavigationView = findViewById(R.id.nav_view)\n        NavigationUI.setupWithNavController(navView, navController)\n\n\n</code></pre>\n\n<p>How do i Limit it to just show on the 2 fragments on my menu Item?</p>\n\n<p><strong>This is how I solved It</strong></p>\n\n<pre><code>    navController.addOnDestinationChangedListener{ _, nd: NavDestination, _-&gt;\n        if(nd.id == R.id.contactsFragment || nd.id == R.id.profileFragment){\n            navView.visibility = View.VISIBLE\n        }else{\n            navView.visibility = View.GONE\n        }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-gradle-plugin", "kotlin-multiplatform", "kotlin-dokka"], "comments": [{"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1559737463, "post_id": 56460245, "comment_id": 99512223, "body": "<code>apply plugin: &#39;org.jetbrains.dokka-android&#39;</code> ???"}, {"owner": {"reputation": 345, "user_id": 9905408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd08d341dd1d90103bf46a5efbbb22aa?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/9905408/alan"}, "reply_to_user": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1559737936, "post_id": 56460245, "comment_id": 99512473, "body": "nope. And i&#39;m already using gradle plugins dsl syntax : plugins { id ...}"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1559749956, "post_id": 56460245, "comment_id": 99519558, "body": "I think you need to explicitly tell Gradle what version to use: `id &#39;org.jetbrains.dokka-android&#39; version &#39;0.9.18&#39;"}, {"owner": {"reputation": 345, "user_id": 9905408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd08d341dd1d90103bf46a5efbbb22aa?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/9905408/alan"}, "edited": false, "score": 0, "creation_date": 1559751505, "post_id": 56460245, "comment_id": 99520341, "body": "the version is already in the classpath, so no need to explicitly tell the version when applying the plugin"}, {"owner": {"reputation": 345, "user_id": 9905408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd08d341dd1d90103bf46a5efbbb22aa?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/9905408/alan"}, "edited": false, "score": 0, "creation_date": 1559753844, "post_id": 56460245, "comment_id": 99521378, "body": "I don&#39;t know if it has some impact but it&#39;s a multi module project, and there&#39;s a multiplatform ios/android module in addition to the android app"}], "answers": [{"tags": [], "owner": {"reputation": 345, "user_id": 9905408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd08d341dd1d90103bf46a5efbbb22aa?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/9905408/alan"}, "is_accepted": true, "score": 1, "last_activity_date": 1562243791, "last_edit_date": 1562243791, "creation_date": 1562242631, "answer_id": 56887786, "question_id": 56460245, "link": "https://stackoverflow.com/questions/56460245/could-not-determine-the-dependencies-of-task-appdokka/56887786#56887786", "title": "Could not determine the dependencies of task &#39;:app:dokka&#39;", "body": "<p>The issue is that it's a multiplatform project. In the app level gradle file, I'm also applying the <code>org.jetbrains.kotlin.multiplatform</code> plugin. As described in the <a href=\"https://github.com/Kotlin/dokka/releases\" rel=\"nofollow noreferrer\">dokka github release page</a>:</p>\n\n<p><code>Experimental Kotlin Multiplatform support is scheduled for 0.9.19</code></p>\n\n<p>Looks like there's no other solution than wait for the next release of dokka.</p>\n\n<p><strong>Edit:</strong> There's a workaround described <a href=\"https://discuss.kotlinlang.org/t/how-to-configure-dokka-for-kotlin-multiplatform/9834\" rel=\"nofollow noreferrer\">on the kolinlang forum</a></p>\n\n<pre><code>dokka {\n    impliedPlatforms = [\"common\"] // This will force platform tags for all non-common sources e.g. \"JVM\"\n    kotlinTasks {\n        // dokka fails to retrieve sources from MPP-tasks so they must be set empty to avoid exception\n        // use sourceRoot instead (see below)\n        []\n    }\n    sourceRoot {\n        // assuming there is only a single source dir...\n        path = kotlin.sourceSets.commonMain.kotlin.srcDirs[0]\n        platforms = [\"common\"]\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 9905408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd08d341dd1d90103bf46a5efbbb22aa?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/9905408/alan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "accepted_answer_id": 56887786, "answer_count": 1, "score": 3, "last_activity_date": 1562336898, "creation_date": 1559736680, "last_edit_date": 1562336898, "question_id": 56460245, "link": "https://stackoverflow.com/questions/56460245/could-not-determine-the-dependencies-of-task-appdokka", "title": "Could not determine the dependencies of task &#39;:app:dokka&#39;", "body": "<p>I'm trying to use dokka on my android project to generate kdoc.\nBut I have this error when I'm running the script 'modules:app [dokka]' :\nCould not determine the dependencies of task ':app:dokka'.\nkotlin.KotlinNullPointerException (no error message)</p>\n\n<p>I added the following lines on my gradle files :</p>\n\n<p>Project build.gradle</p>\n\n<pre><code>buildscript {\n    ext {\n        dokka_version = '0.9.18'\n    }\n    dependencies {\n        classpath \"org.jetbrains.dokka:dokka-android-gradle-plugin:$dokka_version\"\n    }\n}\n</code></pre>\n\n<p>app build.gradle</p>\n\n<pre><code>plugins {\n    id 'org.jetbrains.dokka-android'\n}\ndokka {\n    outputFormat = 'html'\n    sourceDirs = files('src/main')\n    outputDirectory = \"$buildDir/javadoc\"\n}\n</code></pre>\n\n<blockquote>\n  <p>Could not determine the dependencies of task ':app:dokka'.\n  kotlin.KotlinNullPointerException (no error message)</p>\n</blockquote>\n"}, {"tags": ["android", "mvvm", "kotlin", "runtimeexception", "androidx"], "answers": [{"tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 2, "last_activity_date": 1559730497, "creation_date": 1559730497, "answer_id": 56458703, "question_id": 56458662, "link": "https://stackoverflow.com/questions/56458662/kotlin-cannot-create-an-instance-of-viewmodel/56458703#56458703", "title": "Kotlin cannot create an instance of ViewModel", "body": "<pre><code>Caused by: kotlin.UninitializedPropertyAccessException: lateinit property allEntries has not been initialized\n</code></pre>\n\n<p>In <code>EntryViewModel</code>, you have this line:</p>\n\n<pre><code>init {allEntries = repository.allEntries }\n</code></pre>\n\n<p>You are referencing the <code>allEntries</code> property of the <code>EntryRepository</code>. That is defined as <code>lateinit</code>:</p>\n\n<pre><code>lateinit var allEntries: LiveData&lt;List&lt;Entry&gt;&gt;\n</code></pre>\n\n<p>The error is telling you that you have not assigned a value to <code>allEntries</code> before trying to reference it. If you are going to use <code>lateinit</code> on a visible (non-<code>private</code>) property, you need to ensure that you assign a value to it before any other object can try using that property.</p>\n"}], "owner": {"reputation": 634, "user_id": 8095827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yaNCe.png?s=128&g=1", "display_name": "Andros Adrianopolos", "link": "https://stackoverflow.com/users/8095827/andros-adrianopolos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "accepted_answer_id": 56458703, "answer_count": 1, "score": 1, "last_activity_date": 1559730497, "creation_date": 1559730318, "question_id": 56458662, "link": "https://stackoverflow.com/questions/56458662/kotlin-cannot-create-an-instance-of-viewmodel", "title": "Kotlin cannot create an instance of ViewModel", "body": "<p>I've been getting the following error against my ViewModel:</p>\n\n<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.cryptpass_kt/com.example.cryptpass_kt.MainActivity}: java.lang.RuntimeException: Cannot create an instance of class com.example.cryptpass_kt.EntryViewModel\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2853)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2928)\n        at android.app.ActivityThread.-wrap11(Unknown Source:0)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1609)\n        at android.os.Handler.dispatchMessage(Handler.java:105)\n        at android.os.Looper.loop(Looper.java:164)\n        at android.app.ActivityThread.main(ActivityThread.java:6703)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:769)\n     Caused by: java.lang.RuntimeException: Cannot create an instance of class com.example.cryptpass_kt.EntryViewModel\n        at androidx.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:238)\n        at androidx.lifecycle.ViewModelProvider.get(ViewModelProvider.java:164)\n        at androidx.lifecycle.ViewModelProvider.get(ViewModelProvider.java:130)\n        at com.example.cryptpass_kt.MainActivity.onCreate(MainActivity.kt:40)\n        at android.app.Activity.performCreate(Activity.java:6980)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2806)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2928)\u00a0\n        at android.app.ActivityThread.-wrap11(Unknown Source:0)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1609)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:105)\u00a0\n        at android.os.Looper.loop(Looper.java:164)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:6703)\u00a0\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\u00a0\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:769)\u00a0\n     Caused by: java.lang.reflect.InvocationTargetException\n        at java.lang.reflect.Constructor.newInstance0(Native Method)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:334)\n        at androidx.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:230)\n        at androidx.lifecycle.ViewModelProvider.get(ViewModelProvider.java:164)\u00a0\n        at androidx.lifecycle.ViewModelProvider.get(ViewModelProvider.java:130)\u00a0\n        at com.example.cryptpass_kt.MainActivity.onCreate(MainActivity.kt:40)\u00a0\n        at android.app.Activity.performCreate(Activity.java:6980)\u00a0\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214)\u00a0\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2806)\u00a0\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2928)\u00a0\n        at android.app.ActivityThread.-wrap11(Unknown Source:0)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1609)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:105)\u00a0\n        at android.os.Looper.loop(Looper.java:164)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:6703)\u00a0\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\u00a0\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:769)\u00a0\n     Caused by: kotlin.UninitializedPropertyAccessException: lateinit property allEntries has not been initialized\n        at com.example.cryptpass_kt.EntryRepository.getAllEntries(EntryRepository.kt:9)\n        at com.example.cryptpass_kt.EntryViewModel.&lt;init&gt;(EntryViewModel.kt:11)\n        at java.lang.reflect.Constructor.newInstance0(Native Method)\u00a0\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:334)\u00a0\n        at androidx.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:230)\u00a0\n        at androidx.lifecycle.ViewModelProvider.get(ViewModelProvider.java:164)\u00a0\n        at androidx.lifecycle.ViewModelProvider.get(ViewModelProvider.java:130)\u00a0\n        at com.example.cryptpass_kt.MainActivity.onCreate(MainActivity.kt:40)\u00a0\n        at android.app.Activity.performCreate(Activity.java:6980)\u00a0\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214)\u00a0\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2806)\u00a0\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2928)\u00a0\n        at android.app.ActivityThread.-wrap11(Unknown Source:0)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1609)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:105)\u00a0\n        at android.os.Looper.loop(Looper.java:164)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:6703)\u00a0\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\u00a0\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:769)\u00a0\n</code></pre>\n\n<p>The error points to 3 locations in my app.  The first one being the initiation of the <code>viewModel</code> object in my <code>MainActivity.kt</code> class' <code>onCreate()</code> method:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        ...\n\n        viewModel = ViewModelProviders.of(this).get(EntryViewModel::class.java)\n        viewModel.allEntries.observe(this, Observer { entries -&gt; adapter.submitList(entries) })\n\n        ...\n    }\n</code></pre>\n\n<p>The 2ndpoint is the <code>LiveData</code> object in my repository class:</p>\n\n<pre><code>class EntryRepository(application: Application) {\n    private val entryDAO: EntryDAO\n    lateinit var allEntries: LiveData&lt;List&lt;Entry&gt;&gt;\n\n    ...\n    }\n</code></pre>\n\n<p>And the 3rd point is the repository object inside the <code>ViewModel</code>:</p>\n\n<pre><code>class EntryViewModel(application: Application) : AndroidViewModel(application) {\n    private val repository: EntryRepository = EntryRepository(application)\n    val allEntries: LiveData&lt;List&lt;Entry&gt;&gt;\n\n    init {allEntries = repository.allEntries }\n\n    fun insert(entry: Entry) {repository.insert(entry)}\n\n    fun update(entry: Entry) {repository.update(entry)}\n\n    fun delete(entry: Entry) {repository.update(entry)}\n\n    fun deleteAll() {repository.deleteAllEntries()}\n}\n</code></pre>\n\n<p>The first time I had this error, I was told on S/O that it was due the fact that I had some implementations in my gradle file that were not AnroidX compatible.  After fixing that, the problem still exists.</p>\n"}, {"tags": ["java", "android", "kotlin", "bluetooth"], "comments": [{"owner": {"reputation": 506, "user_id": 11051950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62f39f6164075b56e81fc18181d2334?s=128&d=identicon&r=PG&f=1", "display_name": "bautista", "link": "https://stackoverflow.com/users/11051950/bautista"}, "edited": false, "score": 0, "creation_date": 1559737031, "post_id": 56458582, "comment_id": 99511987, "body": "Are you looking for code samples or a general approach?"}, {"owner": {"reputation": 151, "user_id": 11503193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e1b6be7e94c7a7ca4fb96cc19e5a12?s=128&d=identicon&r=PG&f=1", "display_name": "MarkWang", "link": "https://stackoverflow.com/users/11503193/markwang"}, "reply_to_user": {"reputation": 506, "user_id": 11051950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62f39f6164075b56e81fc18181d2334?s=128&d=identicon&r=PG&f=1", "display_name": "bautista", "link": "https://stackoverflow.com/users/11051950/bautista"}, "edited": false, "score": 0, "creation_date": 1559812680, "post_id": 56458582, "comment_id": 99539345, "body": "@bautista I want to find the code samples.  And I found the using A2dp disconnect and reconnect can switch the activity of audio, I hope to find the smarter code samples."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 11503193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e1b6be7e94c7a7ca4fb96cc19e5a12?s=128&d=identicon&r=PG&f=1", "display_name": "MarkWang", "link": "https://stackoverflow.com/users/11503193/markwang"}, "edited": false, "score": 0, "creation_date": 1566977352, "post_id": 57679349, "comment_id": 101819270, "body": "Thanks your reply, so BluetoothSockets can control Bluetooth earbuds? I think bluetoothSockets only use between two android phone when we want to control."}, {"owner": {"reputation": 11, "user_id": 7388221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ab056d68a434f7d0aa1c2475a5813c?s=128&d=identicon&r=PG&f=1", "display_name": "Kre\u0161imir Turkalj", "link": "https://stackoverflow.com/users/7388221/kre%c5%a1imir-turkalj"}, "edited": false, "score": 0, "creation_date": 1567081926, "post_id": 57679349, "comment_id": 101862576, "body": "Unfortunately, I wouldn&#39;t know correct way to set it. That was closest I could get so far (dealing with similar issue).  Other closest thing to finding an answer was this thread, but I have hard time figuring out which part actually sets current device playing sound.  <a href=\"https://stackoverflow.com/questions/22226552/programmatically-connect-to-paired-bluetooth-speaker-and-play-audio/22390540#22390540\" title=\"programmatically connect to paired bluetooth speaker and play audio\">stackoverflow.com/questions/22226552/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 7388221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ab056d68a434f7d0aa1c2475a5813c?s=128&d=identicon&r=PG&f=1", "display_name": "Kre\u0161imir Turkalj", "link": "https://stackoverflow.com/users/7388221/kre%c5%a1imir-turkalj"}, "reply_to_user": {"reputation": 151, "user_id": 11503193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e1b6be7e94c7a7ca4fb96cc19e5a12?s=128&d=identicon&r=PG&f=1", "display_name": "MarkWang", "link": "https://stackoverflow.com/users/11503193/markwang"}, "edited": false, "score": 0, "creation_date": 1570888185, "post_id": 57679349, "comment_id": 103062990, "body": "Hopefully new addition helps you more!"}], "tags": [], "owner": {"reputation": 11, "user_id": 7388221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ab056d68a434f7d0aa1c2475a5813c?s=128&d=identicon&r=PG&f=1", "display_name": "Kre\u0161imir Turkalj", "link": "https://stackoverflow.com/users/7388221/kre%c5%a1imir-turkalj"}, "is_accepted": false, "score": 1, "last_activity_date": 1570887932, "last_edit_date": 1570887932, "creation_date": 1566925572, "answer_id": 57679349, "question_id": 56458582, "link": "https://stackoverflow.com/questions/56458582/how-to-switching-audio-between-bluetooth-audio-devices-on-android-using-programm/57679349#57679349", "title": "How to switching audio between Bluetooth audio devices on android using programmatically", "body": "<p><a href=\"https://developer.android.com/reference/android/bluetooth/BluetoothA2dp.html\" rel=\"nofollow noreferrer\">Documentation</a> says it can only be connected to a single A2DP device at a time, so you should be able to switch between devices by connecting to device you want to use.\nYou can connect to device by using <a href=\"https://developer.android.com/guide/topics/connectivity/bluetooth#ConnectDevices\" rel=\"nofollow noreferrer\">BluetoothSockets</a>. </p>\n\n<p>EDIT:\nI found other solutions, one which I find reliable. Both of them rely on method reflections.</p>\n\n<p>First one is from this <a href=\"https://stackoverflow.com/a/18397935/7388221\">post</a>.\n 1. Get BluetoothA2dp proxy from serviceListener</p>\n\n<pre><code>bluetoothManager.adapter.getProfileProxy(this, serviceListener, BluetoothProfile.A2DP)\n\nprivate val serviceListener = object : BluetoothProfile.ServiceListener {\n    override fun onServiceDisconnected(profile: Int) {\n        if (profile == BluetoothProfile.A2DP) {\n            bluetoothA2dp = null\n        }\n    }\n\n    override fun onServiceConnected(profile: Int, proxy: BluetoothProfile?) {\n        if (profile == BluetoothProfile.A2DP) {\n            handler.post(btSearchRunnable)\n            bluetoothA2dp = proxy as BluetoothA2dp\n        }\n    }\n}\n</code></pre>\n\n<ol start=\"2\">\n<li><p>Get \"connect\" method from reflection.</p>\n\n<pre><code>private val connect = BluetoothA2dp::class.java.getDeclaredMethod(\"connect\",BluetoothDevice::class.java)\n</code></pre></li>\n<li><p>Invoke method with proxy as first argument and device as second.</p>\n\n<p>connect.invoke(bluetoothA2dp,device)</p></li>\n</ol>\n\n<p>Other method used reflection to get createRfcommSocket to circumvent issue with one parameter which you can't normally access. I can post link to it, but problem I had with it is that always lagged main thread, always threw me an error and connected unpredictably.</p>\n"}], "owner": {"reputation": 151, "user_id": 11503193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e1b6be7e94c7a7ca4fb96cc19e5a12?s=128&d=identicon&r=PG&f=1", "display_name": "MarkWang", "link": "https://stackoverflow.com/users/11503193/markwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570887932, "creation_date": 1559729971, "question_id": 56458582, "link": "https://stackoverflow.com/questions/56458582/how-to-switching-audio-between-bluetooth-audio-devices-on-android-using-programm", "title": "How to switching audio between Bluetooth audio devices on android using programmatically", "body": "<p>It's let me confused for a long time.</p>\n\n<p>I have two bt audio devices connected on android phone, and I want to switch specific bt audio device using programmatically.</p>\n\n<p>I search keyword about a2dp, media router and audioManager than seems can't do this thing... </p>\n\n<p>I only way found the function is:</p>\n\n<p>BT devices=> A and B connected on an Android phone.\nAnd right now the media play to A and I want to switch to B</p>\n\n<p>Step1: A, B unpair on Android phone.</p>\n\n<p>Step2: A pair on Android phone.</p>\n\n<p>Step3: B pair on Android phone.</p>\n\n<p>The media play output is B,</p>\n\n<p>seems lastest pair Bluetooth device is media play output.</p>\n\n<p>Can anyone give me some advice or direction? \nThanks, guys</p>\n"}, {"tags": ["android", "amazon-web-services", "kotlin", "aws-lambda"], "comments": [{"owner": {"reputation": 1461, "user_id": 7746398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/61cst.png?s=128&g=1", "display_name": "TechFree", "link": "https://stackoverflow.com/users/7746398/techfree"}, "edited": false, "score": 0, "creation_date": 1559731916, "post_id": 56458520, "comment_id": 99509640, "body": "Please see if this is helpful: <a href=\"https://stackoverflow.com/questions/52350025/lambda-expression-returning-null-android\">lambda-expression-returning-null-android</a>"}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 4907037, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/PPXQS.jpg?s=128&g=1", "display_name": "YoanGJ", "link": "https://stackoverflow.com/users/4907037/yoangj"}, "edited": false, "score": 0, "creation_date": 1559812672, "post_id": 56459375, "comment_id": 99539338, "body": "Indeed it helped me a lot! The error was from a typo in a key value on my generated code. From my client I was sending <code>objectID</code> but my backend was looking for the key <code>objectId</code>"}], "tags": [], "owner": {"reputation": 4760, "user_id": 819019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MiYfP.jpg?s=128&g=1", "display_name": "Taterhead", "link": "https://stackoverflow.com/users/819019/taterhead"}, "is_accepted": true, "score": 1, "last_activity_date": 1559737845, "last_edit_date": 1559737845, "creation_date": 1559733257, "answer_id": 56459375, "question_id": 56458520, "link": "https://stackoverflow.com/questions/56458520/aws-lambda-always-returns-null-on-android/56459375#56459375", "title": "AWS Lambda always returns null on Android", "body": "<p>Troubleshooting your lambda function without logging is a bit like finding something in the dark:  Its very difficult.  You are going to need logging for the client side and the server side (aka backend) to be able to troubleshoot this.</p>\n\n<p>For the backend logging, AWS provides <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html\" rel=\"nofollow noreferrer\">Cloudwatch logs</a> for the Lambda and API Gateway.  </p>\n\n<p>So to check your Cloudwatch logs for your lambda, go into your AWS console for the Region where your Lambda is installed and go into the Cloudwatch service.  Then select Logs on the side.  You should see a log group named for your Lambda function.  Clicking on this will show you the diagnostic information collected for your lambda when it is called (see image below for an example).  Expand and collapse the log line entries.\n<a href=\"https://i.stack.imgur.com/QaMMW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QaMMW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Once you confirm you have cloudwatch logs turned on, follow this strategy:</p>\n\n<ol>\n<li><p>Run a test call from the IOS client and confirm the output is successful on the client.  Then check the cloudwatch logs (for both the API gateway and the Lambda function) of your IOS test and note what a success looks like.</p></li>\n<li><p>Next run a second test from Android using your code above.  Look in cloudwatch for the differences between the two and this should reveal details to help you troubleshoot what went wrong in your Android call.</p></li>\n</ol>\n\n<p>If Amplify did not create Cloudwatch logs for your API gateway or Lambda function, follow the steps <a href=\"https://serverless-stack.com/chapters/api-gateway-and-lambda-logs.html\" rel=\"nofollow noreferrer\">here</a> in setting them up.  Hope this helps you find the solution.</p>\n"}], "owner": {"reputation": 449, "user_id": 4907037, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/PPXQS.jpg?s=128&g=1", "display_name": "YoanGJ", "link": "https://stackoverflow.com/users/4907037/yoangj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 56459375, "answer_count": 1, "score": 1, "last_activity_date": 1559737845, "creation_date": 1559729743, "question_id": 56458520, "link": "https://stackoverflow.com/questions/56458520/aws-lambda-always-returns-null-on-android", "title": "AWS Lambda always returns null on Android", "body": "<p>I'm building an app on iOS and Android using AWS Amplify. I have a lambda expression that takes a longitude, a latitude, a username, an object id and returns me a boolean that tells me if yes or no the user is physically close to this object.</p>\n\n<p>It works perfectly on my iOS app, I get <code>true</code> or <code>false</code> depending on the user location but on Android I always get <code>null</code> as a response.</p>\n\n<p>Here's my function that triggers my lambda:</p>\n\n<pre><code>fun locationLambda() {\n    if ( ContextCompat.checkSelfPermission( this, Manifest.permission.ACCESS_FINE_LOCATION ) == PackageManager.PERMISSION_GRANTED ) {\n        fusedLocationClient.lastLocation.addOnSuccessListener { location : Location? -&gt;\n            if (location != null) {\n\n                val latitude = location.latitude.toString()\n                val longitude = location.longitude.toString()\n                val username = AWSMobileClient.getInstance().username\n                val objectId = (intent.extras.getSerializable(\"object\") as Object).getId()\n\n                Log.i(\"ObjectId\", objectId)\n                Log.i(\"Longitude\", longitude)\n                Log.i(\"Latitude\", latitude)\n                Log.i(\"Username\", username)\n\n                mAWSAppSyncClient?.query(IsObjectFoundQuery.builder()\n                        .latitude(latitude)\n                        .longitude(longitude)\n                        .username(username)\n                        .objectID(objectId)\n                        .build())\n                        ?.responseFetcher(AppSyncResponseFetchers.NETWORK_ONLY)\n                        ?.enqueue(locationCallback)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>When I print in logs the parameters sent to the lambda everything is normal, the right values are sent.</p>\n\n<p>And here's my callback function:</p>\n\n<pre><code>private val locationCallback = object : GraphQLCall.Callback&lt;IsObjectFoundQuery.Data&gt;() {\n    override fun onResponse( response: com.apollographql.apollo.api.Response&lt;IsObjectFoundQuery.Data&gt;) {\n        Log.i(\"Results\", response.data()?.isObjectFound.toString())\n    }\n\n    override fun onFailure(e: ApolloException) {\n        Log.e(\"ERROR\", e.toString())\n    }\n}\n</code></pre>\n\n<p>Here I successfully get a response but <code>response.data()?.isObjectFound</code> is <code>null</code></p>\n\n<p>Am I doing something wrong here or do I have to look somewhere else?</p>\n"}, {"tags": ["android", "firebase", "mvvm", "kotlin"], "comments": [{"owner": {"reputation": 655, "user_id": 8708759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc95a82999202329794b8cf9abd7174e?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Phillips", "link": "https://stackoverflow.com/users/8708759/luke-phillips"}, "edited": false, "score": 1, "creation_date": 1560418288, "post_id": 56457405, "comment_id": 99732776, "body": "Have a look at Paha&#39;s implementation of implementing GoogleSignIn: <a href=\"https://github.com/jojink/Android-Kotlin-FirebaseAuth/blob/feature/full_refactored/app/src/main/java/com/example/auth/feature/login/LoginActivity.kt\" rel=\"nofollow noreferrer\">github.com/jojink/Android-Kotlin-FirebaseAuth/blob/feature/&hellip;</a>  Hope this helps."}, {"owner": {"reputation": 151, "user_id": 8813572, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ugRG-lLdZzE/AAAAAAAAAAI/AAAAAAAAArQ/hUQfNQ7M56w/photo.jpg?sz=128", "display_name": "HeinerTheBest", "link": "https://stackoverflow.com/users/8813572/heinerthebest"}, "edited": false, "score": 0, "creation_date": 1565281300, "post_id": 56457405, "comment_id": 101313662, "body": "that git look more like MVP no MVVM"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1571690444, "post_id": 56457405, "comment_id": 103317547, "body": "If you are interested in a clean Firebase authentication, you can check this <a href=\"https://medium.com/firebase-tips-tricks/how-to-create-a-clean-firebase-authentication-using-mvvm-37f9b8eb7336\" rel=\"nofollow noreferrer\">article</a>."}, {"owner": {"reputation": 1631, "user_id": 9130109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QgXr.jpg?s=128&g=1", "display_name": "EL TEGANI MOHAMED HAMAD GABIR", "link": "https://stackoverflow.com/users/9130109/el-tegani-mohamed-hamad-gabir"}, "edited": false, "score": 1, "creation_date": 1575259696, "post_id": 56457405, "comment_id": 104492953, "body": "check this example from google at codelab <a href=\"https://github.com/googlecodelabs/android-kotlin-login\" rel=\"nofollow noreferrer\">github.com/googlecodelabs/android-kotlin-login</a>"}, {"owner": {"reputation": 111, "user_id": 8526518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bfad362140b492dc16248ff13c039b1?s=128&d=identicon&r=PG&f=1", "display_name": "Adama Traore", "link": "https://stackoverflow.com/users/8526518/adama-traore"}, "reply_to_user": {"reputation": 1631, "user_id": 9130109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QgXr.jpg?s=128&g=1", "display_name": "EL TEGANI MOHAMED HAMAD GABIR", "link": "https://stackoverflow.com/users/9130109/el-tegani-mohamed-hamad-gabir"}, "edited": false, "score": 0, "creation_date": 1575361618, "post_id": 56457405, "comment_id": 104530282, "body": "Hello @ELTEGANIMOHAMED ! Thanks ! It&#39;s exactly what I was looking for :)"}, {"owner": {"reputation": 111, "user_id": 8526518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bfad362140b492dc16248ff13c039b1?s=128&d=identicon&r=PG&f=1", "display_name": "Adama Traore", "link": "https://stackoverflow.com/users/8526518/adama-traore"}, "edited": false, "score": 0, "creation_date": 1575361806, "post_id": 56457405, "comment_id": 104530371, "body": "Can you post your answer so I can mark it as the &quot;best answer&quot;."}, {"owner": {"reputation": 1631, "user_id": 9130109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QgXr.jpg?s=128&g=1", "display_name": "EL TEGANI MOHAMED HAMAD GABIR", "link": "https://stackoverflow.com/users/9130109/el-tegani-mohamed-hamad-gabir"}, "edited": false, "score": 0, "creation_date": 1575392228, "post_id": 56457405, "comment_id": 104548167, "body": "@AdamaTraore glad it helped you..ok i will post it soon"}, {"owner": {"reputation": 534, "user_id": 6766678, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oQU1M.jpg?s=128&g=1", "display_name": "Toufic Batache", "link": "https://stackoverflow.com/users/6766678/toufic-batache"}, "edited": false, "score": 0, "creation_date": 1609758266, "post_id": 56457405, "comment_id": 115913311, "body": "Hey Adama, hope you&#39;re doing well. Would you mind posting an answer to your question with how you achieved it? It would make it easier for everyone looking for an answer as it&#39;s very hard to find anything about this online. Thank you!"}], "owner": {"reputation": 111, "user_id": 8526518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bfad362140b492dc16248ff13c039b1?s=128&d=identicon&r=PG&f=1", "display_name": "Adama Traore", "link": "https://stackoverflow.com/users/8526518/adama-traore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2096, "favorite_count": 3, "answer_count": 0, "score": 8, "last_activity_date": 1603269942, "creation_date": 1559725621, "question_id": 56457405, "link": "https://stackoverflow.com/questions/56457405/how-to-implement-firebase-google-signin-with-mvvm-architecture", "title": "How to implement Firebase Google SignIn with MVVM architecture?", "body": "<p>Im building an app and Im currently facing a problem : I wrote all the events of my Google/Facebook SignIn buttons inside the LoginActivity by following the <a href=\"https://firebase.google.com/docs/auth/android/google-signin#authenticate_with_firebase\" rel=\"noreferrer\">google guide</a>. However, I don't want to keep business code inside the activity to follow MVVM architecture. Therefore how can I put the Firebase methods (which need an activity reference and lifecycle callbacks) ?</p>\n\n<p>I've tried a LoginViewModel which is working BUT it has references to LoginActivity</p>\n\n<pre><code>class LoginViewModel(application: Application) : BaseViewModelContext(application) {\n\n    lateinit var auth: FirebaseAuth\n    val Tag: String = LoginViewModel::class.java.simpleName;\n    val gso: GoogleSignInOptions\n    val googleSignInClient: GoogleSignInClient\n\n    init {\n        auth = FirebaseAuth.getInstance()\n        gso = GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\n            .requestIdToken(application.getString(R.string.default_client_id))\n            .build()\n\n        googleSignInClient = GoogleSignIn.getClient(application, gso)\n    }\n\n\n\n    fun activityForResultLogin(requestCode:Int, resultCode: Int, data: Intent?, activity: Activity){\n        if(requestCode == Constants.RC_SIGN_IN){\n            val task = GoogleSignIn.getSignedInAccountFromIntent(data)\n            try {\n                // Google Sign In was successful, authenticate with Firebase\n                val account = task.getResult(ApiException::class.java)\n                firebaseAuthWithGoogle(account!!, activity)\n            } catch (e: ApiException) {\n                // Google Sign In failed, update UI appropriately\n                Log.w(Tag, \"Google sign in failed\", e)\n                // ...\n            }\n        }\n    }\n\n    private fun firebaseAuthWithGoogle(acct: GoogleSignInAccount, activity: Activity) {\n        Log.d(Tag, \"firebaseAuthWithGoogle:\" + acct.id!!)\n\n        val credential = GoogleAuthProvider.getCredential(acct.idToken, null)\n        auth.signInWithCredential(credential)\n            .addOnCompleteListener(activity) { task -&gt;\n                if (task.isSuccessful) {\n                    // Sign in success, update UI with the signed-in user's information\n                    Log.d(Tag, \"signInWithCredential:success\")\n                    val user = auth.currentUser\n                    activity.shortToast(\"SignInSuccess\")\n                } else {\n                    // If sign in fails, display a message to the user.\n                    Log.w(Tag, \"signInWithCredential:failure\", task.exception)\n                    activity.shortToast(\"SignInFailed\")\n                }\n\n            }\n    }\n\n    fun signInGoogle(activity: Activity){\n        val signInIntent = googleSignInClient.signInIntent\n        activity.startActivityForResult(signInIntent, Constants.RC_SIGN_IN)\n    }\n\n    fun signOutGoogle(activity: Activity){\n        googleSignInClient.signOut().addOnCompleteListener(activity){\n            //Update ui\n        }\n    }\n</code></pre>\n"}, {"tags": ["testing", "kotlin", "android-espresso", "qa"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11603123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518107b33d1e80d1921de683260541d1?s=128&d=identicon&r=PG&f=1", "display_name": "sushitrash", "link": "https://stackoverflow.com/users/11603123/sushitrash"}, "is_accepted": false, "score": 0, "last_activity_date": 1560579613, "creation_date": 1560579613, "answer_id": 56607886, "question_id": 56457331, "link": "https://stackoverflow.com/questions/56457331/perform-onclick-is-not-performing-click/56607886#56607886", "title": "perform.onClick() is not performing click", "body": "<p>I was calling it wrong from PageObject. It should be</p>\n\n<pre><code>    fun clickButton(){\n        Button{\n            act{ClickWithMessageAction(error_message)}\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11603123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518107b33d1e80d1921de683260541d1?s=128&d=identicon&r=PG&f=1", "display_name": "sushitrash", "link": "https://stackoverflow.com/users/11603123/sushitrash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560579613, "creation_date": 1559725297, "last_edit_date": 1559726826, "question_id": 56457331, "link": "https://stackoverflow.com/questions/56457331/perform-onclick-is-not-performing-click", "title": "perform.onClick() is not performing click", "body": "<p>I'm trying to write a custom ViewAction <code>ClickWithMessageAction()</code>. But it seems like <code>perform.onClick()</code> is not clicking given element.</p>\n\n<p><code>ClickWithMessageAction()</code> is called from <code>PageObject</code> where Kakao is used </p>\n\n<pre><code>fun clickButton(){\n            Button{\n                ClickWithMessageAction(error_message)\n            }\n\nclass ClickWithMessageAction(private val error_message: String) : ViewAction{\n\n    override fun getDescription(): String {\n        return \"Click button\"\n    }\n\n    override fun getConstraints(): Matcher&lt;View&gt; {\n        return isEnabled()\n    }\n\n    override fun perform(uiController: UiController?, view: View?) {\n        if (view != null){\n            try{\n                view.performClick()\n            }catch(e: PerformException){\n                throw Error(error_message)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I expect <code>ClickWithMessageAction</code> to click on element and post an error_message if it fails to do so.</p>\n"}, {"tags": ["java", "class", "kotlin", "class-constants"], "answers": [{"tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": true, "score": 5, "last_activity_date": 1559726030, "creation_date": 1559726030, "answer_id": 56457519, "question_id": 56457256, "link": "https://stackoverflow.com/questions/56457256/crazy-utf-8-entry-in-a-kotlin-class-constant-pool/56457519#56457519", "title": "Crazy UTF-8 entry in a kotlin class&#39; constant pool", "body": "<p>This is the content of <code>kotlin.Metadata</code> annotation. It is coded with Protobuf and used by both compiler and Kotlin-Reflect.</p>\n\n<p>Kotlin uses <code>String</code> instead of <code>byte[]</code> because class format is very wasteful at storing arrays.</p>\n\n<p>When you are not using Kotlin-Reflect, metadata is unused and can be removed by ProGuard.</p>\n"}], "owner": {"reputation": 502, "user_id": 1803608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9fac276a6af7e8c7133773c4ea0a7141?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/1803608/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 56457519, "answer_count": 1, "score": 2, "last_activity_date": 1559726030, "creation_date": 1559724993, "question_id": 56457256, "link": "https://stackoverflow.com/questions/56457256/crazy-utf-8-entry-in-a-kotlin-class-constant-pool", "title": "Crazy UTF-8 entry in a kotlin class&#39; constant pool", "body": "<p>When examining the content of a .class file from a Kotlin source (just \"Hello World\", nothing else) I found an UTF-8 string within the constant pool that is (a) not used anywhere and (b) with strange content.</p>\n\n<p>Can any tell me what this is?</p>\n\n<p><a href=\"https://i.stack.imgur.com/lNUu0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lNUu0.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["logging", "kotlin", "ktor"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1559733193, "post_id": 56457143, "comment_id": 99510215, "body": "<i>I have issues importing io.ktor.features</i> what issues?"}, {"owner": {"reputation": 459, "user_id": 11234746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c24406e3aaf5f6bbbf9ddf010c211e3?s=128&d=identicon&r=PG&f=1", "display_name": "Noam Silverstein", "link": "https://stackoverflow.com/users/11234746/noam-silverstein"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1559734321, "post_id": 56457143, "comment_id": 99510724, "body": "@TimCastelijns Where does io.ktor.features come from? Obviously   implementation &quot;io.ktor:ktor-features:$ktor_version&quot; is not working for me"}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1559736481, "post_id": 56457143, "comment_id": 99511729, "body": "it seems like it&#39;s built in &quot;This feature is defined in the class io.ktor.features.CallLogging and no additional artifacts are required.&quot; try leaving out the import"}, {"owner": {"reputation": 459, "user_id": 11234746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c24406e3aaf5f6bbbf9ddf010c211e3?s=128&d=identicon&r=PG&f=1", "display_name": "Noam Silverstein", "link": "https://stackoverflow.com/users/11234746/noam-silverstein"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1559746077, "post_id": 56457143, "comment_id": 99517307, "body": "No that was not the issue. I had `    implementation &quot;io.ktor:ktor-client-okhttp:$ktor_version&quot;` only. So I added: `    implementation &quot;io.ktor:ktor-server-netty:$ktor_version&quot;`"}], "answers": [{"tags": [], "owner": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1559930653, "creation_date": 1559930653, "answer_id": 56499281, "question_id": 56457143, "link": "https://stackoverflow.com/questions/56457143/how-to-add-a-logging-interceptor-for-ktor/56499281#56499281", "title": "How to add a logging interceptor for KTOR?", "body": "<p>Did you configure your logging? Ktor only provides the slf4j api. \nWhen you start the server, you should see this:</p>\n\n<pre><code>SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\n</code></pre>\n\n<p>Which means, that you need to put a logger implementation on the classpath. </p>\n\n<p>The fastest option is probably <code>implementation 'org.slf4j:slf4j-simple:1.7.26'</code>.</p>\n\n<p>Now you should get some logs from the server. </p>\n\n<p>However, by default, only calls are logged. </p>\n\n<p>Headers and body are not logged. </p>\n\n<p>IIRC the body can only be consumed once, but maybe something changed about that. </p>\n\n<p>Headers can be logged with a custom interceptor. </p>\n\n<p>For example:</p>\n\n<pre><code>call.request.headers.entries()\n    .map { it.key to it.value.joinToString(\",\") }\n    .joinToString(\";\") { \"${it.first}:${it.second}\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8916246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ymrQkSc94VU/AAAAAAAAAAI/AAAAAAAAD1g/o4OPGdxxRrY/photo.jpg?sz=128", "display_name": "Rob O&#39;Connell", "link": "https://stackoverflow.com/users/8916246/rob-oconnell"}, "is_accepted": false, "score": 0, "last_activity_date": 1589553897, "creation_date": 1589553897, "answer_id": 61821957, "question_id": 56457143, "link": "https://stackoverflow.com/questions/56457143/how-to-add-a-logging-interceptor-for-ktor/61821957#61821957", "title": "How to add a logging interceptor for KTOR?", "body": "<p>Since you are configuring the call logging feature level to trace, you will need to configure your logging system (whatever sl4j provider you're using) to log ktor.application to trace.  E.g. for log4j2.xml:</p>\n\n<p><code>&lt;Logger name=\"ktor.application\" level=\"trace\"/&gt;</code></p>\n"}], "owner": {"reputation": 459, "user_id": 11234746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c24406e3aaf5f6bbbf9ddf010c211e3?s=128&d=identicon&r=PG&f=1", "display_name": "Noam Silverstein", "link": "https://stackoverflow.com/users/11234746/noam-silverstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2551, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1589553897, "creation_date": 1559724604, "last_edit_date": 1559746962, "question_id": 56457143, "link": "https://stackoverflow.com/questions/56457143/how-to-add-a-logging-interceptor-for-ktor", "title": "How to add a logging interceptor for KTOR?", "body": "<p>When I was using Retrofit, I could easily create logging interceptors to see the calls with body and headers on the logcat:</p>\n\n<pre><code> val loggingInterceptor = HttpLoggingInterceptor().setLevel(HttpLoggingInterceptor.Level.BODY)\n            val httpClient = OkHttpClient.Builder()\n                    .addInterceptor(loggingInterceptor)\n</code></pre>\n\n<p>and then </p>\n\n<pre><code> val retrofit = retrofit2.Retrofit.Builder()\n                    .client(httpClient.build())\n</code></pre>\n\n<p>Now, <a href=\"https://ktor.io/\" rel=\"nofollow noreferrer\">we switched to Ktor</a> and I don't know \nI dont know how </p>\n\n<ul>\n<li>to use <code>addInterceptor()</code>? </li>\n<li>and for [<code>install(CallLogging)</code>][2] nothing happens..</li>\n</ul>\n\n<p>Any suggestions or examples?</p>\n\n<p>[2] source: </p>\n\n<pre><code>fun Application.main() {\n    install(CallLogging){\n        level = Level.TRACE\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "android-espresso"], "answers": [{"tags": [], "owner": {"reputation": 4660, "user_id": 2797847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68581c16298dfecc62b2b0439573b18d?s=128&d=identicon&r=PG", "display_name": "minhazur", "link": "https://stackoverflow.com/users/2797847/minhazur"}, "is_accepted": false, "score": 0, "last_activity_date": 1559722857, "creation_date": 1559722857, "answer_id": 56456679, "question_id": 56456440, "link": "https://stackoverflow.com/questions/56456440/why-not-correct-check-is/56456679#56456679", "title": "Why not correct check &quot;is&quot;?", "body": "<p>The problem is with your if condition, as the view is not a ViewGroup the condition is always true thus will print the LOG.</p>\n\n<pre><code>if (view is View) {\n     Log.w(TAG, \"withBackgroundColorResId_incorrect_type, view = $view\")\n     return false\n}\n</code></pre>\n\n<p>Please, try with this one and see the outcome.</p>\n"}, {"tags": [], "owner": {"reputation": 10912, "user_id": 619673, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Jp5FC.jpg?s=128&g=1", "display_name": "deadfish", "link": "https://stackoverflow.com/users/619673/deadfish"}, "is_accepted": true, "score": 3, "last_activity_date": 1559723213, "creation_date": 1559723213, "answer_id": 56456766, "question_id": 56456440, "link": "https://stackoverflow.com/questions/56456440/why-not-correct-check-is/56456766#56456766", "title": "Why not correct check &quot;is&quot;?", "body": "<p>In Kotlin's documentation <code>is</code> states:</p>\n\n<blockquote>\n  <p>checks that a value has a certain type</p>\n</blockquote>\n\n<p>So according to Your code, You ask in a way</p>\n\n<blockquote>\n  <p>is my view instance of X?</p>\n</blockquote>\n\n<p>Following this line You get:</p>\n\n<ol>\n<li>is <code>view instanceof View</code>? Answer is yes.</li>\n<li>is <code>view instanceof ViewGroup</code>? Answer is no. </li>\n</ol>\n\n<p>Single views extends mainly by View class. ViewGroups are mostly used in more complex layouts like <code>LinearLayout</code>,<code>FrameLayout</code>, etc.</p>\n\n<p>Concluding the results, You have:</p>\n\n<p><code>true||false</code> = true</p>\n"}], "owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 56456766, "answer_count": 2, "score": 0, "last_activity_date": 1559723213, "creation_date": 1559721929, "question_id": 56456440, "link": "https://stackoverflow.com/questions/56456440/why-not-correct-check-is", "title": "Why not correct check &quot;is&quot;?", "body": "<p>Here Kotlin's snippet:</p>\n\n<pre><code>fun withBackgroundColorResId(@IdRes expectedId: Int): Matcher&lt;Any&gt; {\n\n        return object : BoundedMatcher&lt;Any, Any&gt;(Any::class.java) {\n            override fun matchesSafely(view: Any): Boolean {\n                if (view !is View || view !is ViewGroup) {\n                    Log.w(TAG, \"withBackgroundColorResId_incorrect_type, view = $view\")\n                    return false\n                }\n                val currenColor = (view.background.current as ColorDrawable).color\n                val expectedColor = ContextCompat.getColor(view.context, expectedId)\n                return currenColor == expectedColor\n            }\n\n            override fun describeTo(description: Description) {\n                description.appendText(\"textView with background color resId: \")\n                description.appendValue(context.getResources().getString(expectedId))\n            }\n        }\n}\n</code></pre>\n\n<p>and usage:</p>\n\n<pre><code>onView(withRecyclerView(tradersRecyclerView).atPositionOnView(traderCheckPos, pauseTextView)).check(matches(withBackgroundColorResId(trade_not_running_color)))\n</code></pre>\n\n<p>and here logcat:</p>\n\n<pre><code>06-05 10:25:12.787 I/ViewInteraction(22053): Checking 'MatchesViewAssertion{viewMatcher=textView with background color resId: \"#ffbde6ff\"}' assertion on view RecyclerView with id: com.myproject.debug:id/tradersRecyclerView at position: 0\n06-05 10:25:12.787 W/com.myproject.custom.matcher.CustomMatchers(22053): withBackgroundColorResId_incorrect_type, view = androidx.appcompat.widget.AppCompatTextView{a412c35 V.ED..C.. ........ 0,0-288,288 #7f0800c9 app:id/pauseTextView}\n06-05 10:25:12.794 D/com.myproject.activity.TradersActivityTest(22053): afterEach\n06-05 10:25:12.794 I/MockWebServer(22053): MockWebServer[8081] done accepting connections: Socket closed\n06-05 10:25:12.825 D/LifecycleMonitor(22053): Lifecycle status change: com.myproject.ui.activity.TradersActivity@2964795 in: PAUSED\n06-05 10:25:12.825 D/LifecycleMonitor(22053): running callback: androidx.test.rule.ActivityTestRule$LifecycleCallback@9705558\n06-05 10:25:12.825 D/LifecycleMonitor(22053): callback completes: androidx.test.rule.ActivityTestRule$LifecycleCallback@9705558\n</code></pre>\n\n<p>as you can see the object \"<strong>view</strong>\" has type <code>androidx.appcompat.widget.AppCompatTextView</code>. As we known <code>AppCompatTextView</code> is extends from <code>View</code></p>\n\n<p>But why it print</p>\n\n<pre><code>withBackgroundColorResId_incorrect_type, view = androidx.appcompat.widget.AppCompatTextView\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["java", "kotlin", "dbflow"], "comments": [{"owner": {"reputation": 5714, "user_id": 211197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqXAX.jpg?s=128&g=1", "display_name": "maksimov", "link": "https://stackoverflow.com/users/211197/maksimov"}, "edited": false, "score": 0, "creation_date": 1559738492, "post_id": 56456131, "comment_id": 99512796, "body": "Database migrations are typically used for database schema changes, not data updates. Did you have a chance to look through the documentation, there&#39;re some examples there: <a href=\"https://github.com/agrosner/DBFlow/blob/master/usage2/usage/migrations.md\" rel=\"nofollow noreferrer\">github.com/agrosner/DBFlow/blob/master/usage2/usage/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 7153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zVO7S5tIeOA/AAAAAAAAAAI/AAAAAAAAAoE/orHeADrzXyc/photo.jpg?sz=128", "display_name": "ali johar", "link": "https://stackoverflow.com/users/7153461/ali-johar"}, "reply_to_user": {"reputation": 5714, "user_id": 211197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqXAX.jpg?s=128&g=1", "display_name": "maksimov", "link": "https://stackoverflow.com/users/211197/maksimov"}, "edited": false, "score": 0, "creation_date": 1559748807, "post_id": 56456131, "comment_id": 99518911, "body": "My problem is only data, the strange thing is when i update my app all my old data is shown, and i should make clear data to app to see the new data"}, {"owner": {"reputation": 5714, "user_id": 211197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqXAX.jpg?s=128&g=1", "display_name": "maksimov", "link": "https://stackoverflow.com/users/211197/maksimov"}, "edited": false, "score": 0, "creation_date": 1559757489, "post_id": 56456131, "comment_id": 99522813, "body": "Primary function of databases is to <i>keep</i> data. If you need your data to be reset to some initial state, you will need to make it so."}, {"owner": {"reputation": 13, "user_id": 7153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zVO7S5tIeOA/AAAAAAAAAAI/AAAAAAAAAoE/orHeADrzXyc/photo.jpg?sz=128", "display_name": "ali johar", "link": "https://stackoverflow.com/users/7153461/ali-johar"}, "reply_to_user": {"reputation": 5714, "user_id": 211197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqXAX.jpg?s=128&g=1", "display_name": "maksimov", "link": "https://stackoverflow.com/users/211197/maksimov"}, "edited": false, "score": 0, "creation_date": 1559823883, "post_id": 56456131, "comment_id": 99545330, "body": "No, I don&#39;t want to reset data.... in data version 1 I have 35 records in the table. I now want to add 10 new records to my table in the database. when I update my app the app show only 36 records of data until making clear data to replace the new database with the old version. I want to show new app with new database records without the need to make clear data"}], "owner": {"reputation": 13, "user_id": 7153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zVO7S5tIeOA/AAAAAAAAAAI/AAAAAAAAAoE/orHeADrzXyc/photo.jpg?sz=128", "display_name": "ali johar", "link": "https://stackoverflow.com/users/7153461/ali-johar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559720499, "creation_date": 1559720499, "question_id": 56456131, "link": "https://stackoverflow.com/questions/56456131/how-to-update-dbflow-databse-when-i-add-some-data-only-in-table-not-rename-or-a", "title": "how to update dbflow databse when i add some data only in table, not rename or add colume", "body": "<p>I am using DBFLOW library, I have prepacked database. now I want to add new data to my database in two tables, when I increase the version database and update my app, the old version of the database is still showing.\nI think I should use Migration, but I don't know how to use it when I just change some data without rename or add columns.</p>\n\n<pre><code>@Database(name = BookDatabase.NAME, version = BookDatabase.VERSION, foreignKeysSupported = true, backupEnabled = true, consistencyCheckEnabled = true)\n\npublic class BookDatabase {\n    public static final String NAME = \"book_list\";\n    public static final int VERSION = 2;\n\n    @Migration(version = 2, database = BookDatabase.class)\n    public static class Migration2 extends BaseMigration {\n\n        @Override\n        public void migrate(DatabaseWrapper database) {\n\n//            I don't know what should I write here !!\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "ktor"], "comments": [{"owner": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "edited": false, "score": 0, "creation_date": 1559716199, "post_id": 56454823, "comment_id": 99502744, "body": "Can you show us your ktor set up? I think <code>params</code> is a map, and does not work like json."}, {"owner": {"reputation": 4954, "user_id": 8914336, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZiaPSSVtqI/AAAAAAAAAAI/AAAAAAAAAZE/Bpxg5UxWaP0/photo.jpg?sz=128", "display_name": "coroutineDispatcher", "link": "https://stackoverflow.com/users/8914336/coroutinedispatcher"}, "edited": false, "score": 0, "creation_date": 1559719086, "post_id": 56454823, "comment_id": 99503804, "body": "I believe you are missing something here, maybe parsing. are you using some Moshi or Gson to parse that JSON ?\\"}], "answers": [{"tags": [], "owner": {"reputation": 1695, "user_id": 4487858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/08fvj.jpg?s=128&g=1", "display_name": "Robert Nagy", "link": "https://stackoverflow.com/users/4487858/robert-nagy"}, "is_accepted": false, "score": 0, "last_activity_date": 1585990871, "creation_date": 1585990871, "answer_id": 61025861, "question_id": 56454823, "link": "https://stackoverflow.com/questions/56454823/how-to-receive-post-array-params-in-ktor/61025861#61025861", "title": "How to receive POST array params in ktor?", "body": "<p>You could use <code>call.receiveParameters().getAll(\"array[]\")</code>.</p>\n\n<p>Where <code>&lt;input name=\"array[]\"&gt;</code>.</p>\n\n<p>But I suggest to use breakpoints, and try debugging, how actually Ktor parses your payload.</p>\n"}], "owner": {"reputation": 21, "user_id": 3221547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/830a615fdbadd4a7115660cf858fd56e?s=128&d=identicon&r=PG&f=1", "display_name": "user3221547", "link": "https://stackoverflow.com/users/3221547/user3221547"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1585990871, "creation_date": 1559713455, "last_edit_date": 1559718449, "question_id": 56454823, "link": "https://stackoverflow.com/questions/56454823/how-to-receive-post-array-params-in-ktor", "title": "How to receive POST array params in ktor?", "body": "<p>can`t receive post body array params</p>\n\n<pre><code>$.post(\n  'http://some_url/url',\n  {\n    order_items: [\n      {\n        order_item_id: 1,\n        action_id: 1,\n        fulfillment_time: \"String 1\"\n      },\n      {\n        order_item_id: 2,\n        action_id: 2,\n        fulfillment_time: \"string 2\"}\n    ]\n  }\n);\n</code></pre>\n\n<pre><code>post(\"/url\") {\n    val params = call.receiveParameters()\n}\n</code></pre>\n\n<p>i got array/map:</p>\n\n<pre><code>order_items[0][order_item_id]=[1],\norder_items[0][action_id]=[1],\norder_items[0][fulfillment_time]=[1s],\norder_items[1][order_item_id]=[2],\norder_items[1][action_id]=[2],\norder_items[1][fulfillment_time]=[2s]\n</code></pre>\n\n<p>and i cant get param <code>order_items</code>.</p>\n\n<pre><code>val p1 = params.get(\"order_items\") //null\nval p2 = params.get(\"order_items[0][order_item_id]\") //1\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin", "testng", "appium"], "owner": {"reputation": 11, "user_id": 11602215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c9e17d014c94961ffd4cfd31bee77e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishu Kumar Singh", "link": "https://stackoverflow.com/users/11602215/rishu-kumar-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559719775, "creation_date": 1559711623, "last_edit_date": 1559719775, "question_id": 56454564, "link": "https://stackoverflow.com/questions/56454564/not-able-to-execute-testng-xml-file-from-gradle-command-line", "title": "Not able to execute testng.xml file from gradle command line", "body": "<p>I have created a gradle project with kotlin in android studio for mobile automation And created task in build.gradle While I am executing test from command prompt eg: 'gradle Test' my test is not getting executed(Message is getting printed which is mention on this tasks). When I am executing directly from testng.xml file than scripts is getting executed successfully.</p>\n\n<p>Below sample code for build.gradle \n<code>App -&gt; build.gradle</code></p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\ncompileSdkVersion 28\ndefaultConfig {\n    applicationId \"com.appium.automation\"\n    minSdkVersion 21\n    targetSdkVersion 28`enter code here`\n    versionCode 1\n    versionName \"1.0\"\n    testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n\n\n}\n\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n    }\n\n}\n\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n}\ndependencies {\n\nimplementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version\"\nimplementation 'io.appium:java-client:7.0.0'\nimplementation 'org.assertj:assertj-core:3.12.2'\nimplementation 'org.testng:testng:6.14.3'\nimplementation 'org.junit.jupiter:junit-jupiter-api:5.5.0-M1'\nimplementation 'io.cucumber:cucumber-java8:4.3.1'\nimplementation 'org.apache.commons:commons-lang3:3.9'\nimplementation 'io.cucumber:cucumber-testng:4.3.1'\nimplementation 'io.cucumber:gherkin:5.1.0'\nimplementation 'com.aventstack:extentreports:4.0.9'\n}\n\ntasks.withType(Test) {\nprint(\"Hi\")\nuseTestNG(){\n    println(\"Hi2\")\n    suites '/app/testng.xml'\n    println(\"Hi3\")\n}\n}\n</code></pre>\n\n<p>Project -> build.gradle</p>\n\n<pre><code>buildscript {\next.kotlin_version = '1.3.31'\nrepositories {\n    google()\n    jcenter()\n    mavenCentral()\n}\n\ndependencies {\n    classpath 'com.android.tools.build:gradle:3.4.0'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n}\n}\nallprojects {\nrepositories {\n    google()\n    jcenter()\n    mavenCentral()\n}\n}\ntask clean(type: Delete) {\ndelete rootProject.buildDir\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "junit", "coroutine", "clean-architecture"], "comments": [{"owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "edited": false, "score": 0, "creation_date": 1559713403, "post_id": 56454451, "comment_id": 99502000, "body": "It would be useful if you post creating <code>mockData</code> object code."}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1559713517, "post_id": 56454451, "comment_id": 99502032, "body": "can you share the message of the failed test?"}, {"owner": {"reputation": 1790, "user_id": 1936853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/645c409be5ec708590c5d5ace154053d?s=128&d=identicon&r=PG", "display_name": "yoonhok", "link": "https://stackoverflow.com/users/1936853/yoonhok"}, "edited": false, "score": 0, "creation_date": 1559713968, "post_id": 56454451, "comment_id": 99502125, "body": "r2rek, I already wrote the error message in the Presenter code as a comment."}, {"owner": {"reputation": 1790, "user_id": 1936853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/645c409be5ec708590c5d5ace154053d?s=128&d=identicon&r=PG", "display_name": "yoonhok", "link": "https://stackoverflow.com/users/1936853/yoonhok"}, "edited": false, "score": 0, "creation_date": 1559714018, "post_id": 56454451, "comment_id": 99502134, "body": "Ircover, It just simple list of data class, when I check it in the test code, it was not null."}], "answers": [{"comments": [{"owner": {"reputation": 1790, "user_id": 1936853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/645c409be5ec708590c5d5ace154053d?s=128&d=identicon&r=PG", "display_name": "yoonhok", "link": "https://stackoverflow.com/users/1936853/yoonhok"}, "edited": false, "score": 1, "creation_date": 1559715793, "post_id": 56455109, "comment_id": 99502621, "body": "I applied your code, but it failed with error message: Exception in thread &quot;main @coroutine#1&quot; java.lang.IllegalStateException: Module with the Main dispatcher had failed to initialize. For tests Dispatchers.setMain from kotlinx-coroutines-test module can be used"}], "tags": [], "owner": {"reputation": 1, "user_id": 11602509, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/f48a1df0d8cfc0bcf51720d73c643caa?s=128&d=identicon&r=PG", "display_name": "user11602509", "link": "https://stackoverflow.com/users/11602509/user11602509"}, "is_accepted": false, "score": 0, "last_activity_date": 1559715852, "last_edit_date": 1559715852, "creation_date": 1559715434, "answer_id": 56455109, "question_id": 56454451, "link": "https://stackoverflow.com/questions/56454451/android-coroutine-mvp-junit-test-code-failed/56455109#56455109", "title": "Android Coroutine MVP junit test code failed", "body": "<p>In my case and conventions....</p>\n\n<ol>\n<li>implement 'CoroutineScope' and override coroutineContext</li>\n<li>coroutineContext = Job() + Dispatchers \n(need job.cancel() because cancel CoroutineScope and childs)</li>\n<li>Use launch and withContext(...)</li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>        launch {\r\n            val data = withContext(ioContext) { \r\n              repository.get(id)\r\n            }\r\n             \r\n            withContext(uiContext) {\r\n                view?.onDataLoaded(data)\r\n            }\r\n        }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 4639261, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001961774418/picture?type=large", "display_name": "BattleShip Park", "link": "https://stackoverflow.com/users/4639261/battleship-park"}, "is_accepted": true, "score": 1, "last_activity_date": 1560148992, "creation_date": 1560148992, "answer_id": 56521654, "question_id": 56454451, "link": "https://stackoverflow.com/questions/56454451/android-coroutine-mvp-junit-test-code-failed/56521654#56521654", "title": "Android Coroutine MVP junit test code failed", "body": "<p>You are using Mockito 1.x. If you make the mock for suspend function, use the lastest Mockito. <a href=\"https://stackoverflow.com/a/53101077/4639261\">https://stackoverflow.com/a/53101077/4639261</a></p>\n"}], "owner": {"reputation": 1790, "user_id": 1936853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/645c409be5ec708590c5d5ace154053d?s=128&d=identicon&r=PG", "display_name": "yoonhok", "link": "https://stackoverflow.com/users/1936853/yoonhok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 873, "favorite_count": 0, "accepted_answer_id": 56521654, "answer_count": 2, "score": 0, "last_activity_date": 1560148992, "creation_date": 1559710737, "last_edit_date": 1559725635, "question_id": 56454451, "link": "https://stackoverflow.com/questions/56454451/android-coroutine-mvp-junit-test-code-failed", "title": "Android Coroutine MVP junit test code failed", "body": "<p>I am developing a toy Android app using Kotlin (Coroutine).</p>\n\n<p>I am familiar with Rx more than Coroutine.</p>\n\n<p>I feel that Coroutine difficult more than Rx.</p>\n\n<p>Anyway here is my Presenter code:</p>\n\n<pre><code>class NowPlayingPresenter(\n    private val view: NowPlayingContract.View,\n    private val getMovies: GetNowPlayingMovies,\n    private val uiContext: CoroutineContext = Dispatchers.Main,\n    ioContext: CoroutineContext = Dispatchers.IO\n) : NowPlayingContract.Presenter, CoroutineScope, AnkoLogger {\n\n    override val coroutineContext: CoroutineContext = Job() + ioContext\n\n    override fun unsubscribe() {\n        coroutineContext.cancel()\n    }\n\n    override fun getMoviesNowPlaying() {\n        view.showProgressBar(View.VISIBLE)\n        view.hideError()\n\n        launch {\n            try {\n                val movies = getMovies.get()\n\n                // 'movies' is always null!!! I don't know why...\n\n                withContext(uiContext) {\n                    view.showProgressBar(View.GONE)\n                    if (movies.isNullOrEmpty()) {\n                        view.onError(R.string.err_movies_not_exists)\n                    } else {\n                        view.onMoviesLoaded(movies)\n                    }\n                }\n            } catch (t: Throwable) {\n                view.showProgressBar(View.GONE)\n                view.onError(R.string.err_get_movies_failed)\n                error(\"[Y.M.] getMoviesNowPlaying - failed: ${t.message}\", t)\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>Here is my GetNowPlayingMovies code, it is just interface:</p>\n\n<pre><code>interface GetNowPlayingMovies {\n    suspend fun get(): List&lt;SimpleMovie&gt;\n}\n</code></pre>\n\n<p>And below is my JUnit test code:</p>\n\n<pre><code>class MyDataPresenterTest {\n\n    @Mock\n    private lateinit var mockView: NowPlayingContract.View\n\n    @Mock\n    private lateinit var getMovies: GetNowPlayingMovies\n\n    private lateinit var presenter: NowPlayingPresenter\n\n    private lateinit var inOrder: InOrder\n\n    private val mockMovie1 = SimpleMovie(\"posterpath1\", false, \"2019-03-01\", 10, \"hello world1\", 10f)\n    private val mockMovie2 = SimpleMovie(\"posterpath2\", true, \"2019-03-02\", 20, \"hello world2\", 9f)\n    private val mockMovie3 = SimpleMovie(\"posterpath3\", false, \"2019-03-03\", 30, \"hello world3\", 8f)\n    private val mockMovie4 = SimpleMovie(\"posterpath4\", false, \"2019-03-04\", 40, \"hello world4\", 7f)\n    private val mockMovie5 = SimpleMovie(\"posterpath5\", false, \"2019-03-05\", 50, \"hello world5\", 6f)\n    private val mockMovies: List&lt;SimpleMovie&gt; = listOf(\n        mockMovie1,\n        mockMovie2,\n        mockMovie3,\n        mockMovie4,\n        mockMovie5\n    )\n\n    @Before\n    fun setup() {\n        MockitoAnnotations.initMocks(this)\n\n        inOrder = Mockito.inOrder(mockView)\n\n        presenter = NowPlayingPresenter(mockView, getMovies, Dispatchers.Unconfined, Dispatchers.Unconfined)\n    }\n\n    @Test\n    fun getMoviesNowPlayingTest() = runBlocking {\n        `when`(getMovies.get()).thenReturn(mockMovies)\n\n        presenter.getMoviesNowPlaying()\n\n        inOrder.verify(mockView).showProgressBar(View.VISIBLE)\n        inOrder.verify(mockView).hideError()\n        inOrder.verify(mockView).showProgressBar(View.GONE)\n        inOrder.verify(mockView).onMoviesLoaded(mockMovies)\n    }\n\n}\n</code></pre>\n\n<p>Somebody help me, please?</p>\n\n<p>Here is my full code:\n<a href=\"https://github.com/yoonhok524/Android-Sandbox/tree/master/kotlin-coroutine\" rel=\"nofollow noreferrer\">https://github.com/yoonhok524/Android-Sandbox/tree/master/kotlin-coroutine</a></p>\n\n<p>I tried to apply 'Clean architecture' in this project, so the code is not easy to read... maybe...</p>\n"}, {"tags": ["android", "android-activity", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 11107511, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b-veF_N8Dv4/AAAAAAAAAAI/AAAAAAAAAG0/FMfPBKWNQOg/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/11107511/rob"}, "edited": false, "score": 0, "creation_date": 1559748005, "post_id": 56454386, "comment_id": 99518446, "body": "The compiler doesn&#39;t know what isVisible() is (unresolved reference isVisible)"}], "tags": [], "owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "is_accepted": true, "score": 0, "last_activity_date": 1559710072, "creation_date": 1559710072, "answer_id": 56454386, "question_id": 56454303, "link": "https://stackoverflow.com/questions/56454303/how-to-toggle-the-visibility-of-1-or-multiple-activities-in-kotlin/56454386#56454386", "title": "How to toggle the visibility of 1 or multiple activities in Kotlin", "body": "<p>Just use <code>if else</code> to toggle view visibility</p>\n\n<pre><code>fun View.toggleVisibility() {\n    if (this.isVisible()) {\n        this.visibility = View.INVISIBLE\n    } else {\n        this.visibility = View.VISIBLE\n    }\n}\n</code></pre>\n\n<p>then call this function</p>\n\n<pre><code>seekBar.toggleVisibility()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 8564324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b18b6757b355e5f9f1cce1c3ebef282?s=128&d=identicon&r=PG&f=1", "display_name": "ExtinctSpecie", "link": "https://stackoverflow.com/users/8564324/extinctspecie"}, "is_accepted": false, "score": 0, "last_activity_date": 1559751293, "creation_date": 1559751293, "answer_id": 56464334, "question_id": 56454303, "link": "https://stackoverflow.com/questions/56454303/how-to-toggle-the-visibility-of-1-or-multiple-activities-in-kotlin/56464334#56464334", "title": "How to toggle the visibility of 1 or multiple activities in Kotlin", "body": "<pre><code>val rollButton = findViewById&lt;Button&gt;(R.id.rollButton)\nval resultsTextView = findViewById&lt;TextView&gt;(R.id.resultsTextView)\nval seekBar = findViewById&lt;SeekBar&gt;(R.id.seekBar)\n\nseekBar.setVisibility(View.INVISIBLE)\nrollButton.setVisibility(View.INVISIBLE)\nresultsTextView.setVisibility(View.INVISIBLE)\n</code></pre>\n\n<p>by the way you dont need to do fineViewById in kotlin, you can import them directly with synthetics. </p>\n\n<pre><code>fun hideViews() {\n    rollButton.visibility = View.GONE\n    ...\n    ...\n}\nfun showViews() {\n    rollButton.visibility = View.VISIBLE\n    ...\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 11107511, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b-veF_N8Dv4/AAAAAAAAAAI/AAAAAAAAAG0/FMfPBKWNQOg/photo.jpg?sz=128", "display_name": "Rob", "link": "https://stackoverflow.com/users/11107511/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 56454386, "answer_count": 2, "score": 0, "last_activity_date": 1559751293, "creation_date": 1559709261, "last_edit_date": 1559713019, "question_id": 56454303, "link": "https://stackoverflow.com/questions/56454303/how-to-toggle-the-visibility-of-1-or-multiple-activities-in-kotlin", "title": "How to toggle the visibility of 1 or multiple activities in Kotlin", "body": "<p>The problem at hand is pretty straight forward I just have a button that generates and displays a number 1-9.  This consists of a button, a seek bar and a text view.</p>\n\n<p>I'd like to hide these activities once a 9 is rolled, but I'm not sure how to toggle the visibility of the button, seek bar and text view.</p>\n\n<pre><code>    val rollButton = findViewById&lt;Button&gt;(R.id.rollButton)\n    val resultsTextView = findViewById&lt;TextView&gt;(R.id.resultsTextView)\n    val seekBar = findViewById&lt;SeekBar&gt;(R.id.seekBar)\n\n    seekBar.setVisibility(View.INVISIBLE)\n    rollButton.setVisibility(View.INVISIBLE)\n    resultsTextView.setVisibility(View.INVISIBLE)\n</code></pre>\n\n<pre><code>package com.example.randomizer\n\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.widget.Button\nimport android.widget.SeekBar\nimport android.widget.TextView\nimport android.widget.VideoView\nimport java.util.*\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val rollButton = findViewById&lt;Button&gt;(R.id.rollButton)\n        val resultsTextView = findViewById&lt;TextView&gt;(R.id.resultsTextView)\n        val seekBar = findViewById&lt;SeekBar&gt;(R.id.seekBar)\n        seekBar.setVisibility(View.INVISIBLE)\n        rollButton.setVisibility(View.INVISIBLE)\n        resultsTextView.setVisibility(View.INVISIBLE)\n\n        rollButton.setOnClickListener {\n            val rand = Random().nextInt(seekBar.progress)\n            resultsTextView.text = rand.toString()\n            if rand == 9)\n\n        }    \n    }\n}\n</code></pre>\n"}, {"tags": ["android", "generics", "mvvm", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 494, "user_id": 10138929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/419ff84b6b4c28df9f29a2531c981e69?s=128&d=identicon&r=PG&f=1", "display_name": "samaromku", "link": "https://stackoverflow.com/users/10138929/samaromku"}, "is_accepted": false, "score": 0, "last_activity_date": 1559710660, "creation_date": 1559710660, "answer_id": 56454449, "question_id": 56454023, "link": "https://stackoverflow.com/questions/56454023/generic-inside-a-generic-kotlin/56454449#56454449", "title": "Generic inside a generic kotlin", "body": "<p>You mean like this?</p>\n\n<pre><code>abstract class BaseViewModel&lt;N&gt; : ViewModel(){}\n\nabstract class BaseActivity&lt;T : ViewDataBinding,V: BaseViewModel&lt;Test&gt;&gt; : AppCompatActivity() {}\n\ninterface Test\n</code></pre>\n\n<p>You can make it even more protected, if you extend from base interface:</p>\n\n<pre><code>abstract class BaseViewModel&lt;N:BaseTest&gt; : ViewModel(){}\n\nabstract class BaseActivity&lt;T : ViewDataBinding,V: BaseViewModel&lt;Test&gt;&gt; : AppCompatActivity() {}\n\ninterface Test:BaseTest\n\ninterface BaseTest\n</code></pre>\n\n<p>In that case, if you interface doesn't inherit generic's parent class, compiler will give you an error of compilation.</p>\n"}], "owner": {"reputation": 1, "user_id": 7768513, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yoHASnx6k4I/AAAAAAAAAAI/AAAAAAAAAAs/osceekZmF5Y/photo.jpg?sz=128", "display_name": "Ph\u1ea1m Kh&#225;nh Huy", "link": "https://stackoverflow.com/users/7768513/ph%e1%ba%a1m-kh%c3%a1nh-huy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559714826, "creation_date": 1559706681, "last_edit_date": 1559714826, "question_id": 56454023, "link": "https://stackoverflow.com/questions/56454023/generic-inside-a-generic-kotlin", "title": "Generic inside a generic kotlin", "body": "<p>I have some abstract class <code>BaseViewModel</code>, <code>BaseActivity</code>.</p>\n\n<pre><code>abstract class BaseViewModel&lt;N&gt; : ViewModel(){}\n</code></pre>\n\n<p>My purpose using <strong>N</strong> to pass as an interface into it, and when any <code>viewModel</code> extends to <code>BaseViewModel</code>, just pass its navigator into.</p>\n\n<p>But I got a problem when write <code>BaseActivity</code>. </p>\n\n<pre><code>abstract class BaseActivity&lt;T : ViewDataBinding,V: BaseViewModel&lt;???&gt;&gt; : AppCompatActivity() {}\n</code></pre>\n\n<p>what it should be?</p>\n"}, {"tags": ["android-studio", "kotlin"], "comments": [{"owner": {"reputation": 2631, "user_id": 8342718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vm7um.jpg?s=128&g=1", "display_name": "Jasurbek", "link": "https://stackoverflow.com/users/8342718/jasurbek"}, "edited": false, "score": 1, "creation_date": 1559706041, "post_id": 56453909, "comment_id": 99500564, "body": "File-&gt;Settings-&gt;Coding Style-&gt;Java there you can find all coding settings"}, {"owner": {"reputation": 7833, "user_id": 1079990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roW20.png?s=128&g=1", "display_name": "hannes ach", "link": "https://stackoverflow.com/users/1079990/hannes-ach"}, "reply_to_user": {"reputation": 2631, "user_id": 8342718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vm7um.jpg?s=128&g=1", "display_name": "Jasurbek", "link": "https://stackoverflow.com/users/8342718/jasurbek"}, "edited": false, "score": 0, "creation_date": 1567951069, "post_id": 56453909, "comment_id": 102112552, "body": "@Jasurbek please read &quot;... using Kotlin ...&quot; . How to do it there ?"}], "owner": {"reputation": 456, "user_id": 5745925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIJEQ.jpg?s=128&g=1", "display_name": "stegnerd", "link": "https://stackoverflow.com/users/5745925/stegnerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559719909, "creation_date": 1559705352, "last_edit_date": 1559719909, "question_id": 56453909, "link": "https://stackoverflow.com/questions/56453909/how-to-force-curly-brace-in-android-studio", "title": "How to force curly brace in android studio", "body": "<p>I am trying to set up android studio to a coding standard and I cannot get one setting in particular.</p>\n\n<p>I would like for there to always be curly braces on if statements (including one line ones) on manually typed and generated ones. I am using Kotlin in android studio </p>\n\n<p>what it does:</p>\n\n<pre><code>if(true)\n   foo\n</code></pre>\n\n<p>what I want :</p>\n\n<pre><code>if(true){\n   bar\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559704274, "creation_date": 1559704274, "question_id": 56453818, "link": "https://stackoverflow.com/questions/56453818/unable-to-resolve-version-for-dependency-org-jetbrains-kotlinkotlin-testjar", "title": "Unable to resolve version for dependency &#39;org.jetbrains.kotlin:kotlin-test:jar&#39;", "body": "<p>I am trying to add a library to kotlin-web-demo. Unforunately I am getting this error:</p>\n\n<pre><code>$ ./gradlew ::copyKotlinLibs ; ./gradlew war\n\nBUILD SUCCESSFUL in 1s\n5 actionable tasks: 5 up-to-date\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nCould not resolve all files for configuration ':versions:1.3.31:library'.\n&gt; Could not resolve com.github.komputing.kethereum:model:0.75.1.\n  Required by:\n      project :versions:1.3.31\n   &gt; Could not resolve com.github.komputing.kethereum:model:0.75.1.\n      &gt; Could not parse POM https://jitpack.io/com/github/komputing/kethereum/model/0.75.1/model-0.75.1.pom\n         &gt; Unable to resolve version for dependency 'org.jetbrains.kotlin:kotlin-test:jar'\n&gt; Could not resolve com.github.komputing.kethereum:erc55:0.75.1.\n  Required by:\n      project :versions:1.3.31\n   &gt; Could not resolve com.github.komputing.kethereum:erc55:0.75.1.\n      &gt; Could not parse POM https://jitpack.io/com/github/komputing/kethereum/erc55/0.75.1/erc55-0.75.1.pom\n         &gt; Unable to resolve version for dependency 'org.jetbrains.kotlin:kotlin-test:jar'\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 5s\n24 actionable tasks: 1 executed, 23 up-to-date\n</code></pre>\n\n<p>This is the change I made and how I understood the README:</p>\n\n<pre><code>diff --git a/versions/1.3.31/build.gradle b/versions/1.3.31/build.gradle\nindex 1e0ab00e..721c12e0 100644\n--- a/versions/1.3.31/build.gradle\n+++ b/versions/1.3.31/build.gradle\n@@ -40,6 +40,8 @@ repositories {\n     maven {\n         url  \"https://dl.bintray.com/kotlin/kotlin-dev\"\n     }\n+    jcenter()\n+    maven { url 'https://jitpack.io' }\n }\n\n configurations {\n@@ -106,7 +108,8 @@ dependencies {\n      *      permission java.lang.RuntimePermission \"accessDeclaredMembers\";\n      * };\n      */\n-\n+    library \"com.github.komputing.kethereum:model:0.75.1\"\n+    library \"com.github.komputing.kethereum:erc55:0.75.1\"\n     compile fileTree(dir: projectDir.toString() + File.separator + \"kotlin\", include: '*.jar')\n }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "in-app-subscription"], "comments": [{"owner": {"reputation": 1995, "user_id": 8265484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eo5pY.jpg?s=128&g=1", "display_name": "Mayur Dabhi", "link": "https://stackoverflow.com/users/8265484/mayur-dabhi"}, "edited": false, "score": 0, "creation_date": 1559713248, "post_id": 56453729, "comment_id": 99501963, "body": "have you  Active that SKU from  play console?"}, {"owner": {"reputation": 2516, "user_id": 683482, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lBysC.jpg?s=128&g=1", "display_name": "Raju yourPepe", "link": "https://stackoverflow.com/users/683482/raju-yourpepe"}, "reply_to_user": {"reputation": 1995, "user_id": 8265484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eo5pY.jpg?s=128&g=1", "display_name": "Mayur Dabhi", "link": "https://stackoverflow.com/users/8265484/mayur-dabhi"}, "edited": false, "score": 0, "creation_date": 1559714626, "post_id": 56453729, "comment_id": 99502286, "body": "Yes and it works now . It seems there are time lags"}], "owner": {"reputation": 2516, "user_id": 683482, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lBysC.jpg?s=128&g=1", "display_name": "Raju yourPepe", "link": "https://stackoverflow.com/users/683482/raju-yourpepe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559712994, "creation_date": 1559703388, "last_edit_date": 1559712994, "question_id": 56453729, "link": "https://stackoverflow.com/questions/56453729/i-can-fetch-my-sku-details-but-the-in-app-purchase-dialog-says-item-could-not-be", "title": "I can fetch my SKU Details but the in-app purchase dialog says item could not be found", "body": "<p>I change my android package name and create subscriptions with same reference SKU code. </p>\n\n<p>When my code below runs, it gives item could not be found. Before changing the package name, everything works. Would you please tell me whether I should change the subscription SKU code? </p>\n\n<p>I swear I have rollout my app to alpha release, just now.</p>\n\n<p>Here is my client app working: </p>\n\n<pre><code>val skusList = arrayListOf&lt;String&gt;()\n            skusList.add(selectedSku)\n            val params = SkuDetailsParams.newBuilder().setSkusList(skusList).setType(BillingClient.SkuType.SUBS).build()\n\n            playStoreBillingClient.querySkuDetailsAsync(params\n            ) { billingResult, skuDetailsList -&gt;\n                println(\"billingResult : $billingResult\")\n                if(billingResult == BillingClient.BillingResponse.OK) {\n                    println(\"skuDetailsList : $skuDetailsList\")\n                    println(\"I want to purcahse sku : $selectedSku\")\n\n                    subscriptionList = ArrayList(skuDetailsList)\n                    val fetchedPackage = subscriptionList.firstOrNull ()\n                    if(fetchedPackage !=null){\n                         selectedSkuPackage = fetchedPackage\n                        val builder = BillingFlowParams.newBuilder()\n                            .setSku(selectedSku).setType(BillingClient.SkuType.SUBS)\n                        val responseCode = playStoreBillingClient.launchBillingFlow(this, builder.build())\n                    }\n\n                }else{\n                    Toast.makeText(this, \"No subscription\" , Toast.LENGTH_SHORT) . show()\n                }\n            }\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "rx-java", "rx-java2"], "comments": [{"owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "edited": false, "score": 0, "creation_date": 1559703043, "post_id": 56453667, "comment_id": 99500084, "body": "I can&#39;t see your <code>ThreadPersister.kt class</code> code, could you post it?"}, {"owner": {"reputation": 41, "user_id": 11307914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82344542f3ccb1d1a5417a0b1c15a303?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Reina", "link": "https://stackoverflow.com/users/11307914/jorge-reina"}, "reply_to_user": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "edited": false, "score": 0, "creation_date": 1559703556, "post_id": 56453667, "comment_id": 99500165, "body": "@BachVu please check again as I edited the post"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 11307914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82344542f3ccb1d1a5417a0b1c15a303?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Reina", "link": "https://stackoverflow.com/users/11307914/jorge-reina"}, "edited": false, "score": 0, "creation_date": 1559704478, "post_id": 56453822, "comment_id": 99500307, "body": "can you be a little more specific as in where I need to do this? Sorry, I am new to RxJava"}, {"owner": {"reputation": 41, "user_id": 11307914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82344542f3ccb1d1a5417a0b1c15a303?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Reina", "link": "https://stackoverflow.com/users/11307914/jorge-reina"}, "edited": false, "score": 0, "creation_date": 1559706775, "post_id": 56453822, "comment_id": 99500686, "body": "sorry, that did not solve the issue. I am still getting the same error."}], "tags": [], "owner": {"reputation": 2631, "user_id": 8342718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vm7um.jpg?s=128&g=1", "display_name": "Jasurbek", "link": "https://stackoverflow.com/users/8342718/jasurbek"}, "is_accepted": false, "score": 0, "last_activity_date": 1559705194, "last_edit_date": 1559705194, "creation_date": 1559704295, "answer_id": 56453822, "question_id": 56453667, "link": "https://stackoverflow.com/questions/56453667/how-to-fix-cannot-access-database-on-the-main-thread-since-it-may-potentially-l/56453822#56453822", "title": "How to fix &#39;Cannot access database on the main thread since it may potentially lock the UI for a long period of time.&#39;", "body": "<p>you forget subscribeOn and observeOn functions</p>\n\n<ol>\n<li><p>You should subscribe on the IO thread </p></li>\n<li><p>Observe on the main thread</p></li>\n</ol>\n\n<p>Like that</p>\n\n<pre><code> mOrderHistoryService.getOrderHistoryDetails(mOrder)\n        .subscribeOn(Schedulers.io())\n        .observeOn (AndroidSchedulers.mainThread())\n        .subscribe(new SimpleSubscriber....\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 11307914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82344542f3ccb1d1a5417a0b1c15a303?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Reina", "link": "https://stackoverflow.com/users/11307914/jorge-reina"}, "edited": false, "score": 0, "creation_date": 1559762684, "post_id": 56454213, "comment_id": 99525000, "body": "Thanks for this. I used <code>SingleSubscriber&lt;Product&gt;</code> instead of <code>DisposableSingleObserver&lt;Product&gt;</code> and worked like a charm."}], "tags": [], "owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "is_accepted": true, "score": 1, "last_activity_date": 1559708388, "creation_date": 1559708388, "answer_id": 56454213, "question_id": 56453667, "link": "https://stackoverflow.com/questions/56453667/how-to-fix-cannot-access-database-on-the-main-thread-since-it-may-potentially-l/56454213#56454213", "title": "How to fix &#39;Cannot access database on the main thread since it may potentially lock the UI for a long period of time.&#39;", "body": "<p>Try this in your fragment</p>\n\n<pre><code>Single.fromCallable(new Callable&lt;Product&gt;() {\n\n            @Override\n            public Product call() throws Exception {\n                return threadStore.getThreadRepository()\n                    .getThreadPersister()\n                    .getProductByStyleColorSuspended(detailOrder.getStyleColor())\n            }\n        })\n                .subscribeOn(Schedulers.io())\n                .observeOn (AndroidSchedulers.mainThread())\n                .subscribe(new DisposableSingleObserver&lt;Object&gt;() {\n                    @Override\n                    public void onSuccess(Object o) {\n                        if (product != null) {\n                            final DeferredPaymentOrder deferredPaymentOrder =\n                                mSnkrsDatabaseHelper.getDeferredPaymentOrder(detailOrder.getId());\n                            if (deferredPaymentOrder != null &amp;&amp; deferredPaymentOrder.isWaiting()) {\n                              mTopButton.setVisibility(View.VISIBLE);\n                              mTopButton.setText(R.string.cta_go_fund);\n                              mTopButton.setOnClickListener(\n                                  v -&gt; ((BaseActivity) getActivity()).fundDeferredPaymentOrder(product,\n                                      AnalyticsAction.ORDER_DETAILS_FUND));\n                            } else {\n                              mTopButton.setVisibility(View.GONE);\n                            }\n                          } else {\n                            mTopButton.setVisibility(View.GONE);\n                          }\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n\n                    }\n                });\n</code></pre>\n\n<p>Apply the same for everywhere you access to your database</p>\n"}], "owner": {"reputation": 41, "user_id": 11307914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82344542f3ccb1d1a5417a0b1c15a303?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Reina", "link": "https://stackoverflow.com/users/11307914/jorge-reina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 56454213, "answer_count": 2, "score": 1, "last_activity_date": 1559708388, "creation_date": 1559702867, "last_edit_date": 1559703181, "question_id": 56453667, "link": "https://stackoverflow.com/questions/56453667/how-to-fix-cannot-access-database-on-the-main-thread-since-it-may-potentially-l", "title": "How to fix &#39;Cannot access database on the main thread since it may potentially lock the UI for a long period of time.&#39;", "body": "<p>I am trying to create a <code>Procduct</code> variable but I need to call a <code>suspend fun</code> from an existing java class, but I get the following error when I call the method needed to create it:</p>\n\n<pre><code>    Process: com.some.app.debug, PID: 6758\n    java.lang.IllegalStateException: Cannot access database on the main thread since it may potentially lock the UI for a long period of time.\n        at androidx.room.RoomDatabase.assertNotMainThread(RoomDatabase.java:209)\n        at androidx.room.RoomDatabase.query(RoomDatabase.java:237)\n        at com.some.app.thread.local.ProductDAO_Impl.getProductByStyleColor(ProductDAO_Impl.java:513)\n        at com.some.app.thread.local.ThreadPersister.getProductByStyleColor(ThreadPersister.kt:315)\n        at com.some.app.user.orders.OrderDetailsFragment.loadDetails(OrderDetailsFragment.java:189)\n        at com.some.app.user.orders.OrderDetailsFragment.onCreateView(OrderDetailsFragment.java:131)\n        at androidx.fragment.app.Fragment.performCreateView(Fragment.java:2439)\n        at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManager.java:1460)\n        at androidx.fragment.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManager.java:1784)\n        at androidx.fragment.app.FragmentManagerImpl.moveToState(FragmentManager.java:1852)\n        at androidx.fragment.app.BackStackRecord.executeOps(BackStackRecord.java:802)\n        at androidx.fragment.app.FragmentManagerImpl.executeOps(FragmentManager.java:2625)\n        at androidx.fragment.app.FragmentManagerImpl.executeOpsTogether(FragmentManager.java:2411)\n        at androidx.fragment.app.FragmentManagerImpl.removeRedundantOperationsAndExecute(FragmentManager.java:2366)\n        at androidx.fragment.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:2273)\n        at androidx.fragment.app.FragmentManagerImpl$1.run(FragmentManager.java:733)\n        at android.os.Handler.handleCallback(Handler.java:873)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:193)\n        at android.app.ActivityThread.main(ActivityThread.java:6718)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n</code></pre>\n\n<p>I am trying to call the method <code>getProductByStyleColorSuspended()</code> from <code>OrderDetailsFragment.java</code> class. The method is in <code>ThreadPersister.kt</code> </p>\n\n<p>Here are the classes:</p>\n\n<pre><code>public class OrderDetailsFragment extends BaseToolbarFragment {\n\n  @BindView(R.id.item_order_imageview)\n  protected ImageView mHeaderItemImageView;\n  @BindView(R.id.item_order_progressbar)\n  protected ProgressBar mLoadingProgressBar;\n  @BindView(R.id.item_order_title_textview)\n  protected TextView mItemTitleTextView;\n  @BindView(R.id.item_order_status_textview)\n  protected TextView mItemStatusTextView;\n  @BindView(R.id.fragment_order_detail_color_value)\n  protected TextView mColorTextView;\n  @BindView(R.id.fragment_order_detail_size_value)\n  protected TextView mSizeTextView;\n  @BindView(R.id.fragment_order_detail_order_number_value)\n  protected TextView mOrderNumberTextView;\n  @BindView(R.id.fragment_order_detail_order_date_value)\n  protected TextView mOrderDateTextView;\n  @BindView(R.id.fragment_order_detail_tax_value)\n  protected TextView mTaxTextView;\n  @BindView(R.id.fragment_order_detail_shipping_value)\n  protected TextView mShippingTextView;\n  @BindView(R.id.fragment_order_detail_total_value)\n  protected TextView mTotalTextView;\n  @BindView(R.id.fragment_order_detail_address_textview)\n  protected TextView mAddressTextView;\n  @BindView(R.id.fragment_order_detail_top_button)\n  protected Button mTopButton;\n  @BindView(R.id.fragment_order_detail_bottom_button)\n  protected Button mBottomButton;\n  @BindView(R.id.fragment_order_detail_relativelayout)\n  protected RelativeLayout mRelativeLayout;\n  @BindView(R.id.fragment_order_detail_progressview)\n  protected ProgressBar mFragmentProgressBar;\n  @BindView(R.id.fragment_order_detail_tax_title)\n  protected TextView mTaxTextViewTitle;\n\n  @FragmentArgument(\"order\")\n  protected SnkrsOrder mOrder;\n\n  public SnkrsOrder getOrder() {\n    return mOrder;\n  }\n\n  @SuppressLint(\"RxLeakedSubscription\") @Nullable\n  @Override\n  public View onCreateView(LayoutInflater inflater, ViewGroup container,\n      Bundle savedInstanceState) {\n\n    Analytics.with(AnalyticsState.INBOX_ORDER_DETAILS).buildAndSend();\n\n    final View rootView = getActivity() instanceof SnkrsActivity ?\n        super.onCreateView(inflater, container, savedInstanceState) :\n        inflater.inflate(R.layout.fragment_order_details, container, false);\n\n    ButterKnife.bind(this, rootView);\n\n    if (mOrder != null) {\n      if (mOrder.getDetails() == null) {\n        mRelativeLayout.setVisibility(View.GONE);\n        mFragmentProgressBar.setVisibility(View.VISIBLE);\n        mOrderHistoryService.getOrderHistoryDetails(mOrder)\n            .subscribe(new SimpleSubscriber&lt;SnkrsOrder&gt;() {\n              @Override\n              public void onNext(SnkrsOrder order) {\n                super.onNext(order);\n                order.setSubmittedDate(order.getDetails().getOrder().getSubmittedDate());\n                safeRunOnUiThread(() -&gt; loadDetails(order.getDetails().getOrder()));\n              }\n            });\n      } else {\n        loadDetails(mOrder.getDetails().getOrder());\n      }\n    }\n    return rootView;\n  }\n\n  public void loadDetails(SnkrsOrderDetails.Order detailOrder) {\n\n    mItemTitleTextView.setText(detailOrder.getDisplayName());\n    mItemStatusTextView.setText(detailOrder.getLocalizedStatusText());\n    mLoadingProgressBar.setVisibility(View.VISIBLE);\n\n    String encodedStyleColor = detailOrder.getEncodedStyleColor();\n    if (!TextUtils.isEmpty(encodedStyleColor)) {\n      String url = getContext().getString(R.string.style_color_url_format_transparent_bgc,\n          encodedStyleColor);\n      loadImage(url);\n    }\n\n    SnkrsOrderDetails.CommerceItem commerceItem = detailOrder.getCommerceItem();\n\n    if (commerceItem != null) {\n      mColorTextView.setText(commerceItem.getColorDescription());\n      mSizeTextView.setText(commerceItem.getDisplaySize());\n    }\n\n    mOrderNumberTextView.setText(detailOrder.getId());\n    SimpleDateFormat fromFormat = new SimpleDateFormat(\"yyyy-MM-dd\", Locale.US);\n    try {\n      Date date = fromFormat.parse(mOrder.getSubmittedDate());\n      mOrderDateTextView.setText(TimeFormatter.format(\"MM/d/yyyy\", date));\n    } catch (ParseException e) {\n      Timber.e(e, e.getLocalizedMessage());\n    }\n\n    SnkrsOrderDetails.PriceInfo priceInfo = detailOrder.getPriceInfo();\n    if (priceInfo != null) {\n      mTaxTextView.setText(priceInfo.getFormattedTax());\n      mShippingTextView.setText(priceInfo.getFormattedShipping());\n      mTotalTextView.setText(priceInfo.getFormattedTotal());\n      if (mFeedLocalizationService.getCurrentFeedLocale() != null\n          &amp;&amp; (mFeedLocalizationService.getCurrentFeedLocale().isChina() ||\n          mFeedLocalizationService.getCurrentFeedLocale().isJapan())) {\n        mTaxTextViewTitle.setVisibility(View.GONE);\n        mTaxTextView.setVisibility(View.GONE);\n      }\n    }\n\n    SnkrsAddress address = detailOrder.getShippingGroups().get(0).getShippingAddress();\n    mAddressTextView.setText(address.getMultilineFormattedNameAndAddress());\n\n    if (detailOrder.canBeCancelled()) {\n      mBottomButton.setText(R.string.orders_details_cancel_order_button);\n      mBottomButton.setOnClickListener(v -&gt; cancelOrder(detailOrder));\n\n      final Product product = threadStore.getThreadRepository()\n          .getThreadPersister()\n//          .getProductByStyleColor(detailOrder.getStyleColor());\n      .getProductByStyleColorSuspended(detailOrder.getStyleColor());\n\n\n      if (product != null) {\n        final DeferredPaymentOrder deferredPaymentOrder =\n            mSnkrsDatabaseHelper.getDeferredPaymentOrder(detailOrder.getId());\n        if (deferredPaymentOrder != null &amp;&amp; deferredPaymentOrder.isWaiting()) {\n          mTopButton.setVisibility(View.VISIBLE);\n          mTopButton.setText(R.string.cta_go_fund);\n          mTopButton.setOnClickListener(\n              v -&gt; ((BaseActivity) getActivity()).fundDeferredPaymentOrder(product,\n                  AnalyticsAction.ORDER_DETAILS_FUND));\n        } else {\n          mTopButton.setVisibility(View.GONE);\n        }\n      } else {\n        mTopButton.setVisibility(View.GONE);\n      }\n    } else if (detailOrder.canTrackAndReturn()) {\n      mTopButton.setText(R.string.orders_details_track_order_button);\n      mBottomButton.setText(R.string.orders_details_return_order_button);\n      mTopButton.setOnClickListener(v -&gt; trackOrder(detailOrder));\n      mBottomButton.setOnClickListener(v -&gt; returnOrder(detailOrder));\n    } else {\n      mTopButton.setVisibility(View.GONE);\n      mBottomButton.setVisibility(View.GONE);\n    }\n\n    Activity snkrsActivity = getActivity();\n    if (snkrsActivity instanceof SnkrsActivity) {\n      // For some reason, adding only the bottom bar's padding does not give enough padding. However, doubling it seems to work\n      mRelativeLayout.setPadding(0, 0, 0, ((SnkrsActivity) snkrsActivity).getBottomBarHeight() * 2);\n    }\n\n    mFragmentProgressBar.setVisibility(View.GONE);\n    mRelativeLayout.setVisibility(View.VISIBLE);\n  }\n\n  @Override\n  public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\n    super.onViewCreated(view, savedInstanceState);\n    if (getActivity() instanceof SnkrsActivity) {\n      //force hide on inbox in case bottom bar animation messes up and leaves it\n      ((SnkrsActivity) getActivity()).clearInboxBadge();\n      ((SnkrsActivity) getActivity()).forceBottomBarVisibility(false);\n    }\n  }\n\n  @Override\n  public void onDestroyView() {\n    super.onDestroyView();\n    if (getActivity() instanceof SnkrsActivity) {\n      ((SnkrsActivity) getActivity()).forceBottomBarVisibility(true);\n    }\n  }\n\n  @NonNull\n  @Override\n  public String getTitle() {\n    return safeGetString(R.string.inbox_orders_title).toUpperCase();\n  }\n\n  @Override\n  public int getLayoutId() {\n    return R.layout.fragment_order_details;\n  }\n\n  private void cancelOrder(SnkrsOrderDetails.Order order) {\n    Analytics.with(AnalyticsAction.ORDER_CANCEL).buildAndSend();\n    String email = mPreferenceStore.getString(R.string.pref_key_email, null);\n    ((BaseActivity) getActivity()).goToXxxxSiteForOrderActions(order.getId(), email);\n  }\n\n  private void trackOrder(SnkrsOrderDetails.Order order) {\n    Analytics.with(AnalyticsAction.ORDER_TRACK).buildAndSend();\n    String trackingUrl = order.getShippingGroups().get(0).getTrackingUrl();\n    if (!TextUtils.isEmpty(trackingUrl)) {\n      ((BaseActivity) getActivity()).goToSite(Uri.parse(trackingUrl));\n    }\n  }\n\n  private void returnOrder(SnkrsOrderDetails.Order order) {\n    Analytics.with(AnalyticsAction.ORDER_RETURN).buildAndSend();\n    String email = mPreferenceStore.getString(R.string.pref_key_email, null);\n    ((BaseActivity) getActivity()).goToXxxxSiteForOrderActions(order.getId(), email);\n  }\n\n  private void loadImage(String url) {\n\n    //noinspection CodeBlock2Expr\n    safeRunOnUiThread(() -&gt; {\n      ImageUtilities.INSTANCE.displayImage(mHeaderItemImageView, url,\n          () -&gt; {\n            if (mLoadingProgressBar != null) {\n              mLoadingProgressBar.setVisibility(View.INVISIBLE);\n            }\n          }\n      );\n    });\n  }\n}\n</code></pre>\n\n<p>This is the <code>ThreadPersister.kt</code> class</p>\n\n<pre><code>class ThreadPersister @Inject constructor(val snkrsDB: SnkrsDB) {\n  private val config = Builder()\n      .setPageSize(10)\n      .setInitialLoadSizeHint(20)\n      .build()\n  private val dataSourceFactory = snkrsDB\n      .threadDAO()\n      .getPage()\n      .mapByPage {\n        it.mapToThreads()\n            .withCardProducts(snkrsDB)\n      }\n  val pages = RxPagedListBuilder(\n      dataSourceFactory, config\n  )\n      .buildObservable()\n\n  fun insertThreads(threads: List&lt;Thread&gt;): ThreadDAO {\n    val threadDAO = snkrsDB.threadDAO()\n    snkrsDB.runInTransaction {\n      threads.forEach { thread -&gt;\n        insertThread(threadDAO, thread)\n      }\n    }\n    return threadDAO\n  }\n\n  fun insertThread(thread: Thread) {\n    insertThread(snkrsDB.threadDAO(), thread)\n  }\n\n  private fun insertThread(\n    threadDAO: ThreadDAO,\n    thread: Thread\n  ) {\n    thread.productId = thread.product?.id;\n    threadDAO.insert(thread)\n    thread.product?.let { insertProduct(it) }\n    thread.cards?.forEach { card -&gt; insertCard(card, thread) }\n    thread.relations?.let {\n      it.forEach { related -&gt;\n        related.threadId = thread.threadId;snkrsDB.relatedThreadsDAO()\n          .insert(related)\n      }\n    }\n  }\n\n  fun insertProduct(product: Product) {\n    snkrsDB.productDAO()\n        .insert(product)\n    product.skus?.let {\n      it.forEach { sku -&gt;\n        sku.productId = product.id; insertSku(sku)\n      }\n\n    }\n  }\n\n  fun insertSku(vararg sku: Sku) {\n    snkrsDB.skuDAO()\n        .insert(*sku)\n  }\n\n  private fun insertCard(\n    card: Card,\n    thread: Thread\n  ) {\n    card.threadId = thread.threadId\n    card.images?.let {\n      it.forEach { image -&gt;\n        image.cardId = card.cardId; snkrsDB.imageDAO()\n          .insert(image)\n      }\n    }\n    card.videos?.let {\n      it.forEach { video -&gt;\n        video.cardId = card.cardId; snkrsDB.videoDAO()\n          .insert(video)\n      }\n    }\n\n    card.product?.let {\n      card.productId = it.id\n      insertProduct(it)\n    }\n    snkrsDB.cardDAO()\n        .insert(card)\n  }\n\n  private fun List&lt;Thread&gt;.withCardProducts(snkrsDB: SnkrsDB): List&lt;Thread&gt; {\n    val cards = this.mapNotNull { it.cards }\n        .flatten()\n    val ids = cards.mapNotNull { it.productId }\n\n    val idGroups = ids.chunked(900)\n\n    val products = idGroups.map {\n      snkrsDB.productDAO()\n          .getProductsById(it)\n    }\n        .flatten()\n\n    cards.forEach {\n      if (it.productId != null) {\n        val productFull =\n          products.firstOrNull { productFull -&gt; it.productId == productFull.product?.id }\n        if (productFull != null) {\n          it.product = productFull.product\n          it.product?.skus = productFull.skus\n        }\n      }\n    }\n    val list = this\n    val filteredList = list.take(10)\n        .filter {\n          it.product?.skus?.any { sku -&gt; sku.available } ?: false &amp;&amp; it.product?.selectionEngine != \"DAN\" &amp;&amp; it.product?.style != \"999999\" &amp;&amp; it.product?.isOnSale() == false\n        }\n    return list\n  }\n\n  @Transaction\n  private fun Thread.withCardProducts(snkrsDB: SnkrsDB): Thread {\n    val ids = cards?.filter { it.productId != null }\n        ?.map { it.productId!! }\n    val products = snkrsDB.productDAO()\n        .getProductsById(ids!!)\n\n\n    cards?.forEach {\n      if (it.productId != null) {\n        val productFull =\n          products.firstOrNull { productFull -&gt; it.productId == productFull.product?.id }\n        if (productFull != null) {\n          it.product = productFull.product\n          it.product?.skus = productFull.skus\n        }\n      }\n    }\n    return this\n  }\n\n  @Transaction\n  fun getThreadsFromDB(): Observable&lt;List&lt;Thread&gt;&gt; {\n    return snkrsDB.threadDAO()\n        .getData()\n        .toObservable()\n        .map {\n          it.mapToThreads()\n              .map { threads -&gt; threads.withCardProducts(snkrsDB) }\n        }\n  }\n\n  @Synchronized\n  @Transaction\n  fun getAllPages(): Single&lt;List&lt;Thread&gt;&gt; {\n    return snkrsDB.threadDAO()\n        .getData()\n        .doOnSuccess { it }\n        .map { it.mapToThreads() }\n        .map { it.withCardProducts(snkrsDB) }\n  }\n\n  @Transaction\n  fun getPage(pageNumber: Int): Maybe&lt;List&lt;Thread&gt;&gt; {\n    return snkrsDB.threadDAO()\n        .getPage(50 * pageNumber, 50)\n        .filter { it.isNotEmpty() }\n        .firstOrError()\n        .map { it.mapToThreads() }\n        .map { it.withCardProducts(snkrsDB) }\n        .toMaybe()\n        .doAfterSuccess { it }\n  }\n\n  fun getFeed(): Observable&lt;PagedList&lt;Thread&gt;&gt; {\n    return pages.throttlePages()\n  }\n\n  private fun Observable&lt;PagedList&lt;Thread&gt;&gt;.throttlePages() =\n    this.filter { it.size &gt; 0 }\n        .sample(Observable.interval(0, 5, SECONDS), true)\n        .distinctUntilChanged()\n\n  fun getFirstThreadId(time: Long) =\n    snkrsDB.threadDAO().getFirstThreadId(time).mapToThread().withCardProducts(snkrsDB)\n\n  fun getThreadByInterestId(id: String) =\n    snkrsDB.threadDAO().getThreadByInterestId(id)?.mapToThread()?.withCardProducts(snkrsDB)\n\n  fun getThreadsByRelatedIds(ids: List&lt;String&gt;) =\n    snkrsDB.threadDAO().getThreadsByRelatedIds(ids).mapToThreads().withCardProducts(snkrsDB)\n\n  fun getThreadsByInterestIds(ids: List&lt;String&gt;): List&lt;Thread&gt; =\n    snkrsDB.threadDAO().getThreadsByAllInterestIds(ids).mapToThreads().withCardProducts(snkrsDB)\n\n  fun getThreadByProductId(id: String) =\n    snkrsDB.threadDAO().getThreadByProductId(id).mapToThread().withCardProducts(snkrsDB)\n\n  fun getThreadBySlug(slug: String) =\n    snkrsDB.threadDAO().getThreadBySlug(slug).mapToThread().withCardProducts(snkrsDB)\n\n  @Deprecated(message = \"Use safeGetThreadByThreadId\")\n  fun getThreadByThreadId(id: String) =\n    snkrsDB.threadDAO().getThreadByThreadId(id)!!.mapToThread().withCardProducts(snkrsDB)\n\n  //TODO MIKE: Migrate all to safe version\n  fun safeGetThreadByThreadId(id: String): Thread? {\n    val thread = snkrsDB.threadDAO()\n        .getThreadByThreadId(id)\n\n    return thread?.mapToThread()\n        ?.withCardProducts(snkrsDB)\n  }\n\n  fun getThreadsById(ids: List&lt;String&gt;) =\n    snkrsDB.threadDAO().getThreadsByIDs(ids).mapToThreads().withCardProducts(snkrsDB)\n\n  fun getThreadByStyleColor(styleColor: String): Thread {\n    val split = styleColor.split('-')\n    return snkrsDB.threadDAO()\n        .getThreadByStyleColor(split[0], split[1])\n        .mapToThread()\n        .withCardProducts(snkrsDB)\n  }\n\n  suspend fun getThreadByStyleColorSuspended(styleColor: String): Thread =\n    withContext(Dispatchers.IO) {\n      val split = styleColor.split('-')\n      snkrsDB.threadDAO()\n          .getThreadByStyleColor(split[0], split[1])\n          .mapToThread()\n          .withCardProducts(snkrsDB)\n    }\n\n  fun getThreadsThatMatch(searchTerm: String) =\n    snkrsDB.threadDAO().getThreadsForSearch(searchTerm).mapToThreads().withCardProducts(snkrsDB)\n\n  //TODO MIKE: change to exponential dropoff\n  fun getInStockThreads() =\n    snkrsDB.threadDAO().getPurchasableInStockThreads()\n//        .mergeWith {\n//          snkrsDB.threadDAO()\n//        .getDrawInStockThreads()\n//        }\n        .toObservable()\n        .sample(Observable.interval(0, 10, SECONDS), true)\n        .distinct { it.map { it.thread.lastUpdatedTime } }\n        .map {\n          it.distinctBy { it.thread.threadId }\n              .mapToThreads()\n              .withCardProducts(snkrsDB)\n        }\n\n  fun getUpcomingThreads() =\n    snkrsDB.threadDAO().getUpcomingThreads()\n        .toObservable()\n        .sample(Observable.interval(0, 10, SECONDS), true)\n        .distinct { it.map { it.thread.lastUpdatedTime } }\n        .map {\n          it.distinctBy { threadFull -&gt; threadFull.thread.threadId }\n              .mapToThreads()\n              .withCardProducts(snkrsDB)\n        }\n\n  fun threadsByTags(searchTerm: String) = snkrsDB\n      .threadDAO()\n      .getThreadsByTag(searchTerm)\n      .map { it.map { it.mapToThread() } }\n\n  fun threadsByTag(searchTerm: String) = snkrsDB\n      .threadDAO()\n      .getThreadByTag(searchTerm)\n      .map { it.mapToThread() }\n\n  suspend fun getProductByProductIdSuspended(id: String): Product? = withContext(Dispatchers.IO) {\n   getProductByProductId(id)\n  }\n\n  fun getProductByProductId(id: String) = snkrsDB.productDAO().getProductById(id)?.mapToProduct()\n\n\n  suspend fun getProductByStyleColorSuspended(styleColor: String): Product? = withContext(Dispatchers.IO){\n    getProductByStyleColor(styleColor)\n  }\n\n  fun getProductByStyleColor(styleColor: String?): Product? {\n    if (styleColor == null) return null\n    val split = styleColor.split('-')\n\n    Timber.d(\"split string: %s\", split)\n    return snkrsDB.productDAO()\n        .getProductByStyleColor(split[0], split[1])\n        .mapToProduct()\n  }\n\n  @Transaction\n  fun updateProductSkus(productSkus: List&lt;Sku&gt;) {\n    productSkus.forEach { Timber.i(\"updating sku with productId ${it.productId} ${it.available}\") }\n    insertSku(*productSkus.toTypedArray())\n  }\n}\n</code></pre>\n\n<p>I've tried using <code>AsyncTask</code>, with no success, but I would like to see if there is a solution out there using RxJava. Also looking to see if I can find a solution using <code>Coroutines</code></p>\n\n<p>I've also tried passing in a <code>Continuation</code> parameter but the method was not returning a ``Product``` object, but even casting it, it would give me a different error.</p>\n\n<p>I am just looking to create a <code>Product</code> object successfully from <code>OrderDetailsFragment.java</code> using the method <code>getProductByStyleColorSuspended(detailOrder.getStyleColor())</code> or <code>getProductByStyleColor(detailOrders.getStyleColor())</code></p>\n"}, {"tags": ["android", "kotlin", "android-databinding", "two-way-binding"], "owner": {"reputation": 112, "user_id": 1241482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85504059a6ae426a42adf16dda005ea1?s=128&d=identicon&r=PG", "display_name": "misterbee180", "link": "https://stackoverflow.com/users/1241482/misterbee180"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559731275, "creation_date": 1559692218, "last_edit_date": 1559731275, "question_id": 56452658, "link": "https://stackoverflow.com/questions/56452658/how-can-i-2-way-databind-to-a-livedatapojo-members", "title": "How can I 2-way databind to a livedata&lt;POJO&gt; members?", "body": "<p>I am trying to two way databind from a checkbox to a mutable livedata variable in my viewModel that's a POJO(plain old java object). It's a Time POJO that has a thru boolean.</p>\n\n<p>I've tried setting up the view in xml to 2 way bind to the data variable \n@=(modelview.mTime.blnThru) and I've also set up a text box to show me the string value of that same boolean. When I click the checkbox on and off the string value doesn't change.</p>\n\n<p>I've tested this w/ a standard mutableLiveData replacing the original bindings with this test set and now when i toggle it on and off, the text value properly shows true and false. So I know I'm on the right track.</p>\n\n<pre><code>&lt;CheckBox\n        android:id=\"@+id/Thru_CheckBox\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Days Thru\"\n        android:visibility=\"visible\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@id/ToTime_Add_Button\"\n        android:checked=\"@={viewmodel.mTime.blnThru}\"/&gt;\n\n&lt;TextView\n        android:id=\"@+id/textView\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"@{String.valueOf(viewmodel.mTime.blnThru)}\"\n        tools:layout_editor_absoluteX=\"104dp\"\n        tools:layout_editor_absoluteY=\"316dp\" /&gt;\n</code></pre>\n\n<p>View model variable declaration</p>\n\n<pre><code>val test = MutableLiveData&lt;Boolean&gt;().apply { this.value = false }\nvar mTime = MutableLiveData&lt;Time&gt;()\n...\n\ninit{\n        mTime.value = Time()\n...}\n</code></pre>\n\n<p>I just want to know what I'm needing to do extra so that I can get rid of my event trigger code in my fragment.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 2249, "user_id": 2450936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/174d70ca270f9c1bdadb37ac9eaf8fe0?s=128&d=identicon&r=PG", "display_name": "howie", "link": "https://stackoverflow.com/users/2450936/howie"}, "edited": false, "score": 0, "creation_date": 1559691075, "post_id": 56452529, "comment_id": 99498100, "body": "Do you use Gradle or Maven for dependency management ?"}, {"owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1559691155, "post_id": 56452529, "comment_id": 99498111, "body": "1. You can compile code into jars for other code bases to use 2. Git 3. Maven 4. Gradle"}, {"owner": {"reputation": 181, "user_id": 2043840, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a1e569a8f6541edf1e2faeb3ea0fcef3?s=128&d=identicon&r=PG", "display_name": "Abbas", "link": "https://stackoverflow.com/users/2043840/abbas"}, "edited": false, "score": 0, "creation_date": 1559695242, "post_id": 56452529, "comment_id": 99498808, "body": "Is there a way to not bundle in a jar and/or not share it on maven central publically but just pull down as a module, similar to what git submodule does?"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 2043840, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a1e569a8f6541edf1e2faeb3ea0fcef3?s=128&d=identicon&r=PG", "display_name": "Abbas", "link": "https://stackoverflow.com/users/2043840/abbas"}, "edited": false, "score": 0, "creation_date": 1559702114, "post_id": 56453055, "comment_id": 99499928, "body": "Okay. That makes sense. I was looking for ways to distribute the code without bundling it, so that debugging or modification is easy. But seems like created my a JAR file is the right way to do it."}, {"owner": {"reputation": 51, "user_id": 2534926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75876fd1569647ea4fdf2ec455439697?s=128&d=identicon&r=PG", "display_name": "rchakraborty", "link": "https://stackoverflow.com/users/2534926/rchakraborty"}, "reply_to_user": {"reputation": 181, "user_id": 2043840, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a1e569a8f6541edf1e2faeb3ea0fcef3?s=128&d=identicon&r=PG", "display_name": "Abbas", "link": "https://stackoverflow.com/users/2043840/abbas"}, "edited": false, "score": 0, "creation_date": 1559744295, "post_id": 56453055, "comment_id": 99516267, "body": "The debugging/modification/bug fixes all should be done in the project and strictly maintained by release/snapshot/patch cycle. That way, the code remains stable and reliable. If you take a look at here: <a href=\"https://commons.apache.org/proper/commons-io/\" rel=\"nofollow noreferrer\">link</a> you can see the release notes for a popular java library, you can see how they fix bugs, improve/add a feature and document it throughout the release cycle"}], "tags": [], "owner": {"reputation": 51, "user_id": 2534926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75876fd1569647ea4fdf2ec455439697?s=128&d=identicon&r=PG", "display_name": "rchakraborty", "link": "https://stackoverflow.com/users/2534926/rchakraborty"}, "is_accepted": true, "score": 1, "last_activity_date": 1559696552, "creation_date": 1559696552, "answer_id": 56453055, "question_id": 56452529, "link": "https://stackoverflow.com/questions/56452529/how-to-setup-shareable-java-project/56453055#56453055", "title": "How to setup shareable Java project?", "body": "<p>Regarding sharing the code (Code reuse):\n You can package the project as jar and add that jar in other projects. The preferred way to do this would be to use either gradle/maven as they have well defined structure and in most cases plugin supports. See this : <a href=\"https://guides.gradle.org/building-java-libraries/\" rel=\"nofollow noreferrer\">https://guides.gradle.org/building-java-libraries/</a>. Please make sure there are adequate unit test for the library so that other projects can use your library with confidence.</p>\n\n<p>For versioning the library:\nUsing gradle/maven with a VCS (git/ hg) can make your life easier. As an example, You can use the \"version\" property on the build.gradle file to manage SNAPSHOT/PATCH/RELEASE versions (e.g. 1.1.0-SNAPSHOT, 1.1.1-RELASE etc) and use git for source control. I hope this helps!</p>\n"}], "owner": {"reputation": 181, "user_id": 2043840, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a1e569a8f6541edf1e2faeb3ea0fcef3?s=128&d=identicon&r=PG", "display_name": "Abbas", "link": "https://stackoverflow.com/users/2043840/abbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 56453055, "answer_count": 1, "score": -4, "last_activity_date": 1559696552, "creation_date": 1559690948, "question_id": 56452529, "link": "https://stackoverflow.com/questions/56452529/how-to-setup-shareable-java-project", "title": "How to setup shareable Java project?", "body": "<p>I have a Java-based automation framework project which I need to share with other test projects. In other words, I need to share the code as a library, so that other projects can just consume it. What do I need to do so that I can create a sharable code base, instead of manually copy pasting it? </p>\n\n<p>Also, how can I implement versioning with this approach?</p>\n"}, {"tags": ["kotlin", "vert.x", "vertx-verticle", "vertxoptions"], "answers": [{"comments": [{"owner": {"reputation": 592, "user_id": 2336165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049d406ef5ee5efae29c10cbd1ca7cd0?s=128&d=identicon&r=PG", "display_name": "lfmunoz", "link": "https://stackoverflow.com/users/2336165/lfmunoz"}, "edited": false, "score": 0, "creation_date": 1559749389, "post_id": 56461620, "comment_id": 99519241, "body": "Thank you, I got it working, I think the problem I was having is that I was already within a verticle context while in your example you are not inside a verticle"}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 0, "last_activity_date": 1559741820, "creation_date": 1559741820, "answer_id": 56461620, "question_id": 56452133, "link": "https://stackoverflow.com/questions/56452133/how-do-i-launch-clients-on-different-event-loops/56461620#56461620", "title": "How do I launch clients on different event loops?", "body": "<p>First and foremost, creating many connections from a single host is a mistake. You'll get into a bottleneck on your client machine probably long before you overload your server.</p>\n\n<p>Second, creating your own load test tool is a mistake. There are excellent tools available for that already, like <a href=\"https://github.com/wg/wrk\" rel=\"nofollow noreferrer\">wrk</a>, which solved many problems you'll have.</p>\n\n<p>Now, to the question at hand. Connections are launched on different threads of the event loop. You can see it running the following code:</p>\n\n<pre><code>private const val port = 8443\n\nfun main() {\n    val counter = AtomicLong(0)\n    val vertx = Vertx.vertx()\n    val client = vertx.createNetClient()\n    var timestamp = System.currentTimeMillis()\n    vertx.createNetServer().connectHandler { ctx -&gt;\n        counter.getAndIncrement()\n        if (System.currentTimeMillis() - timestamp &gt; 1000) {\n            println(counter.get())\n            counter.set(0)\n            timestamp = System.currentTimeMillis()\n        }\n        ctx.end()\n    }.listen(port)\n\n    println(\"Server started\")\n\n    ddos(client)\n}\n\nfun ddos(client: NetClient) {\n    for (i in 0..999999) {\n        client.connect(port, \"localhost\") {\n            println(Thread.currentThread().name)\n        }\n    }\n}\n</code></pre>\n\n<p>Note that you'll also get much more threads:</p>\n\n<pre><code>vert.x-eventloop-thread-14\nvert.x-eventloop-thread-12\nvert.x-eventloop-thread-10\nvert.x-eventloop-thread-14\nvert.x-eventloop-thread-14\nvert.x-eventloop-thread-10\n</code></pre>\n\n<p>Also note that you don't actually need to use coroutines for that.</p>\n"}], "owner": {"reputation": 592, "user_id": 2336165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049d406ef5ee5efae29c10cbd1ca7cd0?s=128&d=identicon&r=PG", "display_name": "lfmunoz", "link": "https://stackoverflow.com/users/2336165/lfmunoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 56461620, "answer_count": 1, "score": 0, "last_activity_date": 1559741820, "creation_date": 1559687449, "question_id": 56452133, "link": "https://stackoverflow.com/questions/56452133/how-do-i-launch-clients-on-different-event-loops", "title": "How do I launch clients on different event loops?", "body": "<p>I am creating a testing application that suppose to have many connections to a server. When I create a client from my Verticle it is always processing the connection and messages on the same tread.</p>\n\n<p>When I created my verticle I set</p>\n\n<p>options.setEventLoopPoolSize(4)</p>\n\n<p>So I would it expect it to round robin to the 4 event loops because I want to have millions of connections.</p>\n\n<p>I'm doing</p>\n\n<pre><code>        launch {\n            val socket = netClient.connectAwait(port, host)\n            log.info().log(\"connected on - {} {}\", Thread.currentThread(), Vertx.currentContext())\n            socket.handler {\n                log.info().log(\"{}\", it)\n            }\n        }\n</code></pre>\n\n<p>2019-06-04 17:30:06,479 INFO  [vert.x-eventloop-thread-0] MainVerticle: connected on - Thread[vert.x-eventloop-thread-0,5,main] io.vertx.core.impl.EventLoopContext@150049b3</p>\n\n<p>Always on same thread.... How do I launch the connection on different event-loops</p>\n"}, {"tags": ["android", "kotlin", "android-view", "touch-event"], "answers": [{"comments": [{"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1559686865, "post_id": 56452027, "comment_id": 99497288, "body": "Yep simply changing <code>return true</code> to <code>return false</code> in <code>onTouch()</code> worked - thankyou!"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1559687175, "post_id": 56452027, "comment_id": 99497354, "body": "Just to confirm: only 1 listener can be executed on a view each time?"}, {"owner": {"reputation": 206, "user_id": 2328242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107bf623ceab856b1a0564ad70823095?s=128&d=identicon&r=PG", "display_name": "Taranjit Kaur", "link": "https://stackoverflow.com/users/2328242/taranjit-kaur"}, "reply_to_user": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1559687397, "post_id": 56452027, "comment_id": 99497404, "body": "yes .. only ontouch would work if you consume the event"}], "tags": [], "owner": {"reputation": 206, "user_id": 2328242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107bf623ceab856b1a0564ad70823095?s=128&d=identicon&r=PG", "display_name": "Taranjit Kaur", "link": "https://stackoverflow.com/users/2328242/taranjit-kaur"}, "is_accepted": false, "score": 2, "last_activity_date": 1559686626, "creation_date": 1559686626, "answer_id": 56452027, "question_id": 56451982, "link": "https://stackoverflow.com/questions/56451982/view-onlongclick-doesnt-work-when-implementing-ontouch-action-down/56452027#56452027", "title": "View.OnLongClick() doesn&#39;t work when implementing onTouch() ACTION_DOWN", "body": "<p>Because the event is already being consumed by onTouch .Theoratically,\nIf you can return false from touch(not consumed for long click), it should work </p>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559713063, "creation_date": 1559686264, "last_edit_date": 1559713063, "question_id": 56451982, "link": "https://stackoverflow.com/questions/56451982/view-onlongclick-doesnt-work-when-implementing-ontouch-action-down", "title": "View.OnLongClick() doesn&#39;t work when implementing onTouch() ACTION_DOWN", "body": "<p>I'm trying to enable drag and dropping imageviews after the imageview has been held for a certain duration (long click). </p>\n\n<p>So the dragging and dropping works fine (onTouch <code>ACTION_DOWN</code>/<code>ACTION_MOVE</code>/<code>ACTION_UP</code>), however it prevents me from detecting <code>View.OnLongClick</code>. When I remove the <code>onTouch</code>, the <code>OnLongClick</code> is successfully detected. </p>\n\n<p>How can I get these 2 listeners to be working side by side? </p>\n\n<p>onCreate:</p>\n\n<pre><code>{\n    editPhoto1.setOnTouchListener(this)\n    editPhoto2.setOnTouchListener(this)\n    editPhoto3.setOnTouchListener(this)\n    editPhoto1.isLongClickable = true\n    editPhoto2.isLongClickable = true\n    editPhoto3.isLongClickable = true\n    editPhoto1.setOnLongClickListener(this)\n    editPhoto2.setOnLongClickListener(this)\n    editPhoto3.setOnLongClickListener(this)\n}\n</code></pre>\n\n<p>onLongClick</p>\n\n<pre><code>override fun onLongClick(v: View?): Boolean {\n    Log.d(TAG, \"LongClick\") // doesn't fire\n    when (v){\n        is CircleImageView -&gt; {\n            v.elevation = 20f\n            v.borderColor = ContextCompat.getColor(this, R.color.colorPrimary)\n            ready = true\n        }\n    }\n    return true\n}\n</code></pre>\n\n<p>onTouch</p>\n\n<pre><code>override fun onTouch(v: View?, event: MotionEvent?): Boolean {\n\n    if (v is CircleImageView){\n        when (event?.action){\n            ACTION_DOWN -&gt; {\n                v.alpha = 0.7f\n            }\n            ACTION_MOVE -&gt; {\n                if (!ready) return false\n\n                ...\n            }\n    return true\n}\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 7629, "user_id": 978005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9219975d0b744e19422761516d419f12?s=128&d=identicon&r=PG", "display_name": "Phix", "link": "https://stackoverflow.com/users/978005/phix"}, "edited": false, "score": 1, "creation_date": 1559683610, "post_id": 56451513, "comment_id": 99496389, "body": "Based on the <a href=\"https://kotlinlang.org/docs/reference/reflection.html\" rel=\"nofollow noreferrer\">docs</a> Kotlin classes are different from Java classes, and since <code>Intent</code> requires a Java class, that&#39;s one way to do it.  I&#39;m not a kt dev, so maybe someone else can correct this."}], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 11601018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a42f5422952754a742280a8b9b37935d?s=128&d=identicon&r=PG", "display_name": "alxgmpr", "link": "https://stackoverflow.com/users/11601018/alxgmpr"}, "is_accepted": true, "score": 2, "last_activity_date": 1559683633, "creation_date": 1559683633, "answer_id": 56451568, "question_id": 56451513, "link": "https://stackoverflow.com/questions/56451513/why-is-is-this-a-java-file-if-i-am-programming-in-kotlin/56451568#56451568", "title": "Why is is this a Java file if I am programming in Kotlin", "body": "<p><code>::class.java</code> is requesting the Java class, as they can be used inside Kotlin files. Although it ends in <code>.java</code>, it is just a reference to a Java class, not a file.</p>\n\n<p>See: </p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/reflection.html#class-references\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/reflection.html#class-references</a></p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/java-interop.html#java-reflection\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/java-interop.html#java-reflection</a></p>\n"}, {"tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": false, "score": 2, "last_activity_date": 1559751061, "creation_date": 1559751061, "answer_id": 56464291, "question_id": 56451513, "link": "https://stackoverflow.com/questions/56451513/why-is-is-this-a-java-file-if-i-am-programming-in-kotlin/56464291#56464291", "title": "Why is is this a Java file if I am programming in Kotlin", "body": "<p>To expand on @alxgmpr's answer, <a href=\"https://kotlinlang.org/docs/reference/reflection.html#class-references\" rel=\"nofollow noreferrer\"><code>::class</code></a> operator returns a <code>KClass</code>, which is a reference to a Kotlin class. It is conceptually similar to Java's <code>Class</code> type, but it is technically different, as it needs to provide Kotlin-specific capabilities (e.g., <code>isSealed</code>, <code>isCompanion</code>).</p>\n\n<p>So <code>KClass != Class</code>.</p>\n\n<p>However, <code>Intent</code> is written in Java and knows nothing about <code>KClass</code> (but it knows about <code>Class</code>), that's why you need to use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/java.html\" rel=\"nofollow noreferrer\"><code>KClass.java</code></a>, which returns the Java class corresponding to that specific <code>KClass</code>.</p>\n\n<p>Here's an example that should clarify that (types are explicit to differentiate the 2 variables):</p>\n\n<pre><code>val kClass: kotlin.reflect.KClass&lt;String&gt; = String::class\nval javaClass: java.lang.Class&lt;String&gt; = kClass.java // equivalent to String::class.java\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7362680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fb31c1b292e2f6e02f4ac7d2c71539f?s=128&d=identicon&r=PG&f=1", "display_name": "BlueLite", "link": "https://stackoverflow.com/users/7362680/bluelite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 56451568, "answer_count": 2, "score": -5, "last_activity_date": 1559751061, "creation_date": 1559683299, "question_id": 56451513, "link": "https://stackoverflow.com/questions/56451513/why-is-is-this-a-java-file-if-i-am-programming-in-kotlin", "title": "Why is is this a Java file if I am programming in Kotlin", "body": "<p>I am your classic programmer that learned in Java for app dev and is now trying to switch over to Kotlin. Right now I am just going through the <a href=\"https://developer.android.com/training/basics/firstapp/starting-activity#kotlin\" rel=\"nofollow noreferrer\">tutorial</a> that Android Developer has. On that page though I come across this.</p>\n\n<pre><code>fun sendMessage(view: View) {\n    //What you do in response to click\n\n    val editText = findViewById&lt;EditText&gt;(R.id.editText)\n    val message = editText.text.toString()\n    val intent = Intent(this, DisplayMessageActivity::class.java).apply {\n        putExtra(EXTRA_MESSAGE, message)\n    }\n    startActivity(intent)\n}\n</code></pre>\n\n<p>On line 6 the code references a Java file. Is this supposed to be there for anything?</p>\n\n<p>I know the extension for Kotlin files is .kt so why isn't that attached?</p>\n"}, {"tags": ["generics", "kotlin"], "owner": {"reputation": 192, "user_id": 822835, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/005313e1300e450f87f0cb05ca7d15e7?s=128&d=identicon&r=PG", "display_name": "VishalHemnani", "link": "https://stackoverflow.com/users/822835/vishalhemnani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559685444, "creation_date": 1559681040, "last_edit_date": 1559685444, "question_id": 56451089, "link": "https://stackoverflow.com/questions/56451089/initializing-kotlin-map-with-nested-generics", "title": "Initializing kotlin map with nested generics", "body": "<p>I have a Kotlin map defined on a Dagger component interface that I'm trying to test by initializing the map with some fake values.\nSince the map is defined with nested generics types for value, the compiler complains about initializing incorrectly.</p>\n\n<p>Here's the way the map is declared on the interface-</p>\n\n<pre><code>interface ClassInjectionHolder {\n  fun classInjections(): Map&lt;Class&lt;out Any&gt;, Provider&lt;ClassInjection&lt;out Any&gt;&gt;&gt;\n}\n</code></pre>\n\n<p>Here are the ways I've tried initializing this map-</p>\n\n<pre><code>private val injectionMap = mutableMapOf&lt;Class&lt;out Any&gt;, Provider&lt;ClassInjection&lt;out Any&gt;&gt;&gt;()\n\n@Mock private lateinit var mockInjectionProvider1: Provider&lt;ClassInjection&lt;Test1&gt;&gt;\ninjectionMap.put(Test1::class.java, mockInjectionProvider1) // doesn't work\n</code></pre>\n\n<pre><code>private val injectionMap = mapOf&lt;Class&lt;out Any&gt;, Provider&lt;ClassInjection&lt;out Any&gt;&gt;&gt;(Test1::class.java to mockInjectionProvider1)\n</code></pre>\n\n<p>I believe what is happening is that Kotlin cannot detect that <code>Provider&lt;ClassInjection&lt;Test1&gt;</code> can be included in a map of <code>Provider&lt;ClassInjection&lt;out Any&gt;</code>.\nIt does compile if the map is declared as-</p>\n\n<pre><code>Map&lt;Class&lt;out Any&gt;, Provider&lt;out ClassInjection&lt;out Any&gt;&gt;&gt;\n</code></pre>\n\n<p>But unfortunately that doesn't work well with Dagger.\nAny ideas on how to initialize the map without specifying the covariance for ClassInjection?</p>\n"}, {"tags": ["kotlin", "jackson"], "answers": [{"comments": [{"owner": {"reputation": 739, "user_id": 914749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fa73badfee2aaca6ee927a1c08b99b4?s=128&d=identicon&r=PG", "display_name": "Scott Nelson", "link": "https://stackoverflow.com/users/914749/scott-nelson"}, "edited": false, "score": 0, "creation_date": 1559750351, "post_id": 56451019, "comment_id": 99519788, "body": "Thanks, I was not familiar with the &quot;associate&quot; function, which works well in this case.  I changed the function body to be this:   <code>val localMap = localNodeArray.associate { it[\u201cvalue\u201d].asText() to it[\u201ckey\u201d].asText() }</code>   <code>return exportedNodeArray.associate { it[\u201ckey\u201d].asText() to localMap[it[\u201cvalue\u201d].asText()] }</code>"}], "tags": [], "owner": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1559680650, "creation_date": 1559680650, "answer_id": 56451019, "question_id": 56450791, "link": "https://stackoverflow.com/questions/56450791/map-values-of-jsonnode-arrays-in-kotlin/56451019#56451019", "title": "Map values of JsonNode arrays in Kotlin", "body": "<p>If you define one more function, it could look like this: </p>\n\n<pre><code>fun mapIds(exportedNodeArray: JsonNode, localNodeArray: JsonNode) : Map&lt;String, String&gt; {\n    val localConverted = convert(localNodeArray)\n    return convert(exportedNodeArray)\n        .filterKeys(localConverted::containsKey)\n        .map { it.value to localConverted.getValue(it.key) }\n        .toMap()\n}\n\nfun convert(node: JsonNode): Map&lt;String, String&gt; = node.associate {\n    it[\"value\"].asText() to it[\"key\"].asText() \n}\n</code></pre>\n"}], "owner": {"reputation": 739, "user_id": 914749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fa73badfee2aaca6ee927a1c08b99b4?s=128&d=identicon&r=PG", "display_name": "Scott Nelson", "link": "https://stackoverflow.com/users/914749/scott-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 708, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559681305, "creation_date": 1559679497, "last_edit_date": 1559681305, "question_id": 56450791, "link": "https://stackoverflow.com/questions/56450791/map-values-of-jsonnode-arrays-in-kotlin", "title": "Map values of JsonNode arrays in Kotlin", "body": "<p>I have two JsonNode objects which are arrays returned from API calls and look like this</p>\n\n<p>exportedNodeArray:</p>\n\n<pre><code>[\n    {\"key\":\"111\", \"value\":\"aaa\"},\n    {\"key\":\"222\", \"value\":\"bbb\"},\n    {\"key\":\"333\", \"value\":\"ccc\"}\n]\n</code></pre>\n\n<p>localNodeArray</p>\n\n<pre><code>[\n    {\"key\":\"999\", \"value\":\"aaa\"},\n    {\"key\":\"888\", \"value\":\"bbb\"},\n    {\"key\":\"777\", \"value\":\"ccc\"}\n]\n</code></pre>\n\n<p>The required output is a Map of any keys which correspond to the same values in each array.  The values are guaranteed to be unique within an array.</p>\n\n<pre><code>\"111\"=\"999\"\n\"222\"=\"888\"\n\"333\"=\"777\"\n</code></pre>\n\n<p>This function returns the correct result, but seems like a very in-elegant way to do it.</p>\n\n<pre><code>fun mapIds(exportedNodeArray: JsonNode, localNodeArray: JsonNode) : MutableMap&lt;String, String?&gt; {\n    val localMap = mutableMapOf&lt;String, String&gt;()\n    localNodeArray.forEach {\n        localMap[it[\"value\"].asText()] = it[\"key\"].asText()\n    }\n    val idMap = mutableMapOf&lt;String, String?&gt;()\n    exportedNodeArray.forEach {\n        idMap[it[\"key\"].asText()] = localMap[it[\"value\"].asText()]\n    }\n    return idMap\n}\n</code></pre>\n\n<p>I am new to Kotlin, and would like to understand a more functional approach.  Especially if there is a way to access elements of a JsonNode by attribute value, and accomplish this in a single loop or map call.</p>\n"}, {"tags": ["multithreading", "kotlin", "concurrency", "coroutine", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 5661, "user_id": 2541276, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100001587714573/picture?type=large", "display_name": "Rajkumar Natarajan", "link": "https://stackoverflow.com/users/2541276/rajkumar-natarajan"}, "edited": false, "score": 0, "creation_date": 1559677680, "post_id": 56450383, "comment_id": 99494078, "body": "what&#39;s version of coroutine module you are using?"}, {"owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "reply_to_user": {"reputation": 5661, "user_id": 2541276, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100001587714573/picture?type=large", "display_name": "Rajkumar Natarajan", "link": "https://stackoverflow.com/users/2541276/rajkumar-natarajan"}, "edited": false, "score": 0, "creation_date": 1559678497, "post_id": 56450383, "comment_id": 99494418, "body": "I am using 1.2.1."}], "answers": [{"comments": [{"owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "edited": false, "score": 0, "creation_date": 1559679835, "post_id": 56450704, "comment_id": 99494968, "body": "Makes sense :) if you return a string from <code>runBlocking</code> you get an error saying <code>main should return a unit</code>. Thankyou."}], "tags": [], "owner": {"reputation": 5265, "user_id": 6486622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b9237af0f1560b25956eab5056c2e3?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Zavedeev", "link": "https://stackoverflow.com/users/6486622/denis-zavedeev"}, "is_accepted": true, "score": 1, "last_activity_date": 1559680000, "last_edit_date": 1559680000, "creation_date": 1559679096, "answer_id": 56450704, "question_id": 56450383, "link": "https://stackoverflow.com/questions/56450383/kotlin-coroutine-wont-compile-without-delay-suspend-function/56450704#56450704", "title": "Kotlin coroutine won&#39;t compile without delay (suspend function?)", "body": "<p>This happens because of return types.</p>\n\n<p><code>main</code> function should return <code>Unit</code> type.</p>\n\n<p>In Kotlin</p>\n\n<blockquote>\n  <p>We can explicitly return a value from the lambda using the qualified return syntax. <strong>Otherwise, the value of the last expression is implicitly returned.</strong></p>\n</blockquote>\n\n<p><em>See <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#returning-a-value-from-a-lambda-expression\" rel=\"nofollow noreferrer\">Returning a value from a lambda expression</a></em></p>\n\n<p>If the the <code>delay</code> call removed the outer lambda's(<code>runBlocking</code>) return type changed to <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-job/\" rel=\"nofollow noreferrer\"><code>Job</code></a> (<code>launch</code> functions's return value) and <code>main</code> also returns <code>Job</code>. </p>\n\n<p>So it fails to run</p>\n\n<pre><code>fun main() = runBlocking {\n    GlobalScope.launch {\n        repeat(1000) {i-&gt;\n            println(\"I'm sleeping $i ...\")\n            delay(500)\n        }\n    }\n    delay(1300) // returns Unit, runBlocking also returns Unit and so does main\n}\n</code></pre>\n\n<p>With <code>delay</code> removed:</p>\n\n<pre><code>fun main() = runBlocking {\n    GlobalScope.launch {\n        repeat(1000) {i-&gt;\n            println(\"I'm sleeping $i ...\")\n            delay(500)\n        }\n    } // returns Job, runBlocking also returns Job and so does main\n}\n</code></pre>\n"}], "owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 56450704, "answer_count": 1, "score": 0, "last_activity_date": 1559680000, "creation_date": 1559677568, "question_id": 56450383, "link": "https://stackoverflow.com/questions/56450383/kotlin-coroutine-wont-compile-without-delay-suspend-function", "title": "Kotlin coroutine won&#39;t compile without delay (suspend function?)", "body": "<p>I was going through the Kotlin coroutine examples and was playing with this example.</p>\n\n<pre><code>fun main() = runBlocking {\n    GlobalScope.launch {\n        repeat(1000) {i-&gt;\n            println(\"I'm sleeping $i ...\")\n            delay(500)\n        }\n    }\n    delay(1300)\n}\n</code></pre>\n\n<p>It works as the example expected, printing 3 times and terminating. How ever if the last line, delay(1300), is removed, the program will not recognise the main function and not compile. Why is this?</p>\n\n<p>Replacing the last line with println() still compiles but only prints once.</p>\n"}, {"tags": ["android", "kotlin", "data-class"], "comments": [{"owner": {"reputation": 483, "user_id": 2132115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f8d32b5dc86ec7a2b9f068b4613f10b?s=128&d=identicon&r=PG", "display_name": "cesarmarch", "link": "https://stackoverflow.com/users/2132115/cesarmarch"}, "edited": false, "score": 0, "creation_date": 1559676817, "post_id": 56449828, "comment_id": 99493728, "body": "You should override the <code>currentValue</code> setter and set the previous value before setting the new current value."}], "answers": [{"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 1, "last_activity_date": 1559678561, "last_edit_date": 1559678561, "creation_date": 1559677002, "answer_id": 56450263, "question_id": 56449828, "link": "https://stackoverflow.com/questions/56449828/how-to-save-old-data-in-a-data-class-in-kotlin/56450263#56450263", "title": "How to save old data in a data class in Kotlin", "body": "<p>A data class in Kotlin is not supposed to provide such functionalities, as they are designed to hold data. <br/>\nYou could just use a simple class.<br/>\nNevertheless you can achieve what you want (with or without a data class), but you will have to move <code>currentValue</code> inside the class and use a setter (and a getter).<br/> \nIn its place use a <code>private</code> property like <code>_currentValue</code>:</p>\n\n<pre><code>data class SavedValue(private var _currentValue: String, var previousValue: String = \"\") {\n    var currentValue: String\n        get() = _currentValue\n        set(value) {\n            previousValue = _currentValue\n            _currentValue = value\n        }\n}\n</code></pre>\n\n<p>This code:</p>\n\n<pre><code>val sv = SavedValue(\"abc\")\nprintln(\"currentValue = ${sv.currentValue} and previousValue = ${sv.previousValue}\")\n</code></pre>\n\n<p>will print:</p>\n\n<pre><code>currentValue = abc and previousValue = \n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>sv.currentValue = \"ABC\"\nprintln(\"currentValue = ${sv.currentValue} and previousValue = ${sv.previousValue}\")\n</code></pre>\n\n<p>will print:</p>\n\n<pre><code>currentValue = ABC and previousValue = abc\n</code></pre>\n\n<p>Also, I think that you need <code>previousValue</code> as a <em>read only</em> property, right?<br/>\nSo move it too inside the class and make its setter <code>private</code>: </p>\n\n<pre><code>data class SavedValue(private var _currentValue: String) {\n    var _previousValue: String = \"\"\n\n    var currentValue: String\n        get() = _currentValue\n        set(value) {\n            previousValue = _currentValue\n            _currentValue = value\n        }\n\n    var previousValue: String\n        get() = _previousValue\n        private set(value) {\n            _previousValue = value\n        }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4660, "user_id": 2797847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68581c16298dfecc62b2b0439573b18d?s=128&d=identicon&r=PG", "display_name": "minhazur", "link": "https://stackoverflow.com/users/2797847/minhazur"}, "is_accepted": false, "score": 0, "last_activity_date": 1559677136, "creation_date": 1559677136, "answer_id": 56450289, "question_id": 56449828, "link": "https://stackoverflow.com/questions/56449828/how-to-save-old-data-in-a-data-class-in-kotlin/56450289#56450289", "title": "How to save old data in a data class in Kotlin", "body": "<p>What you are trying to achieve isn't straight forward using <strong>data class</strong>. Instead, you can use POJO class and use custom setter and getter.</p>\n\n<pre><code>class SavedValue(currentValue: String, previousValue: String) {\nprivate var _currentValue: String = currentValue\nprivate var _previousValue: String = previousValue\n\nvar currentValue: String\n    get() {\n        return _currentValue\n    }\n    set(value) {\n        _previousValue = _currentValue\n        _currentValue = value\n    }\n\n   override fun toString(): String {\n       return \"SavedValue(_currentValue='$_currentValue', \n      _previousValue='$_previousValue')\"\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1759, "user_id": 974184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2f97a8d3cae8511952cb3eda041027?s=128&d=identicon&r=PG", "display_name": "Rodrigo Queiroz", "link": "https://stackoverflow.com/users/974184/rodrigo-queiroz"}, "is_accepted": false, "score": 0, "last_activity_date": 1559688684, "last_edit_date": 1559688684, "creation_date": 1559688133, "answer_id": 56452224, "question_id": 56449828, "link": "https://stackoverflow.com/questions/56449828/how-to-save-old-data-in-a-data-class-in-kotlin/56452224#56452224", "title": "How to save old data in a data class in Kotlin", "body": "<p>The first solution works fine but if you do not want the third field just to hold the current value you can do:</p>\n\n<pre><code>data class SavedValue(var previousValue: String = \"\") {\n    var currentValue: String = \"\"\n        set(value) {\n            if (field != value) previousValue = field\n            field = value\n        }\n}\n</code></pre>\n\n<p>E.g.</p>\n\n<pre><code>val savedValue = SavedValue()\nsavedValue.currentValue = \"initial value\"\nprintln(\"current: ${savedValue.currentValue} - previous: ${savedValue.previousValue}\")\nsavedValue.currentValue = \"second value\"\nprintln(\"current: ${savedValue.currentValue} - previous: ${savedValue.previousValue}\")\nsavedValue.currentValue = \"third value\"\nprintln(\"current: ${savedValue.currentValue} - previous: ${savedValue.previousValue}\")\n</code></pre>\n\n<p>Outputs: </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>I/System.out: current: initial value - previous:\nI/System.out: current: second value - previous: initial value\nI/System.out: current: third value - previous: second value\n</code></pre>\n\n<p>Or if you want the non-mutable previousValue you'll need the third field:</p>\n\n<pre><code>data class SavedValue(private var _previousValue: String = \"\") {\n    var currentValue: String = \"\"\n        set(value) {\n            if (field != value) _previousValue = field\n            field = value\n        }\n    val previousValue: String\n        get() = _previousValue\n}\n</code></pre>\n"}], "owner": {"reputation": 2343, "user_id": 4033050, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8617552b81048f6c4b67c9ec04f413b1?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/4033050/seb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1559688684, "creation_date": 1559674845, "question_id": 56449828, "link": "https://stackoverflow.com/questions/56449828/how-to-save-old-data-in-a-data-class-in-kotlin", "title": "How to save old data in a data class in Kotlin", "body": "<p>I am trying to use a data class but I can't figure out how to save the data properly.</p>\n\n<p>I have created a data class:</p>\n\n<pre><code>  data class SavedValue( var currentValue:String, var previousValue:String = \"\")\n</code></pre>\n\n<p>What I want is each time I am want to save a new <code>currentValue</code>, the already saved value for <code>current</code> is copy to <code>previousValue</code> and the new <code>currentValue</code> overwrite the <code>currentValue</code> field.</p>\n\n<p>Thanks for the help</p>\n"}, {"tags": ["image", "kotlin", "ktor"], "answers": [{"tags": [], "owner": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "is_accepted": true, "score": 1, "last_activity_date": 1559679686, "last_edit_date": 1559679686, "creation_date": 1559679059, "answer_id": 56450698, "question_id": 56449759, "link": "https://stackoverflow.com/questions/56449759/image-tag-in-ktor-html-dsl/56450698#56450698", "title": "Image Tag in Ktor HTML DSL", "body": "<p>You have to put it in your resources folder. </p>\n\n<p>The src folder is for code to be compiled.</p>\n\n<p>The resources folder should be in <code>src/main/</code>.</p>\n\n<p>Furthermore, you need to tell ktor to serve static files in your routing. </p>\n\n<p>See the official documentation:\n<a href=\"https://ktor.io/servers/features/static-content.html\" rel=\"nofollow noreferrer\">https://ktor.io/servers/features/static-content.html</a></p>\n\n<p>Also, here is an example including the <code>img</code> tag: <a href=\"https://ktor.io/samples/feature/static.html\" rel=\"nofollow noreferrer\">https://ktor.io/samples/feature/static.html</a></p>\n\n<p>Also, take a look at my previous answer for more details regarding static content routing in ktor: <a href=\"https://stackoverflow.com/a/50965188/5335131\">https://stackoverflow.com/a/50965188/5335131</a></p>\n"}], "owner": {"reputation": 23, "user_id": 11600653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5f7eb036129518667ab4f8b58bd33b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sparkles", "link": "https://stackoverflow.com/users/11600653/sparkles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 56450698, "answer_count": 1, "score": 1, "last_activity_date": 1559679686, "creation_date": 1559674512, "question_id": 56449759, "link": "https://stackoverflow.com/questions/56449759/image-tag-in-ktor-html-dsl", "title": "Image Tag in Ktor HTML DSL", "body": "<p>I am trying to get an image to display on a webpage through the ktor HTML DSL. The image won't appear, and the alt is showing.</p>\n\n<p>I am currently using the IDE Intellij, and I can't think of where to put the image. I tried putting it in the src folder where the .kt file is, but it is still not seeing it.</p>\n\n<p>img (src: \"This is a picture!!\", alt: \"/img/picture.jpg\")\nHere is a source I used: <a href=\"https://github.com/celtric/kotlin-html/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/celtric/kotlin-html/blob/master/README.md</a></p>\n\n<p>The image is supposed to show but the alt shows instead.</p>\n"}, {"tags": ["java", "kotlin", "rx-java", "micronaut"], "answers": [{"tags": [], "owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "is_accepted": false, "score": -2, "last_activity_date": 1559673058, "creation_date": 1559673058, "answer_id": 56449470, "question_id": 56449143, "link": "https://stackoverflow.com/questions/56449143/micronaut-map-empty-flowable-to-404/56449470#56449470", "title": "Micronaut map empty Flowable to 404", "body": "<p>I don't know Micronaut, but I think this may be what you want:</p>\n\n<pre><code>Flowable.empty&lt;Int&gt;()\n    .switchIfEmpty { it.onError(Exception()) } // or HttpStatusException(404) in your case\n    .subscribe({\n        println(it)\n    }, {\n        it.printStackTrace()\n    })\n</code></pre>\n\n<p>The <code>Flowable</code> is empty, and what you get downstream is the <code>Exception</code> created inside <code>switchIfEmpty</code>. Note that you have to call <code>it.onError</code> inside <code>switchIfEmpty</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 343, "user_id": 3302091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100004881542382/picture?type=large", "display_name": "GAlexMES", "link": "https://stackoverflow.com/users/3302091/galexmes"}, "is_accepted": false, "score": 0, "last_activity_date": 1559886269, "creation_date": 1559886269, "answer_id": 56488573, "question_id": 56449143, "link": "https://stackoverflow.com/questions/56449143/micronaut-map-empty-flowable-to-404/56488573#56488573", "title": "Micronaut map empty Flowable to 404", "body": "<p>A possible Solution is, to use Maybe instead of Flowable.</p>\n\n<pre><code>@Controller(\"/api\")\nclass HelloController {\n    @Get(\"/\")\n    @Produces(MediaType.APPLICATION_JSON)\n    fun get(): Maybe&lt;String&gt; {\n        return Flowable.empty&lt;String&gt;()\n            .toList()\n            .flatMapMaybe { x -&gt;\n                if (x.size == 0)\n                    Maybe.empty&lt;String&gt;()\n                else\n                    Maybe.just(x)\n            }           \n        }\n    }\n}\n</code></pre>\n\n<p>It is not the best solution, but a working one.</p>\n"}], "owner": {"reputation": 343, "user_id": 3302091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100004881542382/picture?type=large", "display_name": "GAlexMES", "link": "https://stackoverflow.com/users/3302091/galexmes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1559886269, "creation_date": 1559671242, "last_edit_date": 1559846114, "question_id": 56449143, "link": "https://stackoverflow.com/questions/56449143/micronaut-map-empty-flowable-to-404", "title": "Micronaut map empty Flowable to 404", "body": "<p><strong>Given:</strong> I have a service which produces a <code>Flowable&lt;T&gt;</code>. This <code>Flowable&lt;T&gt;</code> can be empty.</p>\n\n<p>I have a controller, which looks similar to this:</p>\n\n<pre><code>@Controller(\"/api}\")\nclass ApiController constructor( private val myService: MyService) {\n    @Get(\"/\")\n    @Produces(MediaType.APPLICATION_JSON)\n    fun getSomething(): Flowable&lt;T&gt; {\n        return myService.get()\n    }\n}\n</code></pre>\n\n<p>What I want to achieve: when the flowable is empty -> throw a <code>HttpStatusException(404)</code>.</p>\n\n<p>Otherwise return the flowable with the data inside.</p>\n\n<p><strong>What I already tried</strong></p>\n\n<p>I tried different combinations of the following RxJava Operators:</p>\n\n<ol>\n<li>doOnError</li>\n<li>onErrorResumeNext</li>\n<li>onErrorReturn</li>\n<li>switchIfEmpty</li>\n<li>...</li>\n</ol>\n\n<p><strong>What I experienced</strong></p>\n\n<p>None of the options produced a 404 in the Browser/Postman.</p>\n\n<p>A couple of options are just doing \"nothing\". Which means, that the page is not loading in the browser.</p>\n\n<p>Other options are creating \"OK\" (200) responses with empty bodies.</p>\n\n<p>And some are creating a <code>CompositeException</code>...</p>\n\n<p>Does someone have a hint for me?</p>\n\n<p><strong>Update</strong>: as suggested:</p>\n\n<pre><code>@Controller(\"/api\")\nclass HelloController {\n    @Get(\"/\")\n    @Produces(MediaType.APPLICATION_JSON)\n    fun get(): Flowable&lt;String&gt; {\n        return Flowable.empty&lt;String&gt;()\n                .switchIfEmpty {\n            it.onError(HttpStatusException(HttpStatus.NOT_FOUND,\"\"))\n        }\n    }\n}\n</code></pre>\n\n<p>This produces the following, when I call it with firefox:</p>\n\n<pre><code>HttpResponseStatus: 200\nHttpContent: [\nYes, the closing bracet is missing!\n</code></pre>\n"}, {"tags": ["android", "kotlin", "background-process"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1559667953, "post_id": 56448218, "comment_id": 99490269, "body": "Ah ok, that looks like a good way of doing, i have made notes and will try it. That is a good point, i have mixed them up, your right, woops. Thats what i thought, it did seem fast at doing it, i will do more testing."}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1559746920, "post_id": 56448218, "comment_id": 99517809, "body": "I have built around what you suggested using coroutines and it works beautifully, :)"}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1559667029, "creation_date": 1559667029, "answer_id": 56448218, "question_id": 56447531, "link": "https://stackoverflow.com/questions/56447531/running-part-of-my-mainactivty-in-a-separate-thread/56448218#56448218", "title": "running part of my MainActivty in a separate thread", "body": "<p>You could use coroutines to load the data in a background thread and then switch back to the UI thread to populate your views, like this (for clarity, I only use 2 properties):</p>\n\n<pre><code>data class MyData(\n        val myStr: Int,\n        val myDex: Int\n)\n\noverride fun onResume() {\n    super.onResume()\n\n    lifecycleScope.launch {\n        val data = withContext(Dispatchers.IO) {\n            val mystr = sharedPref.getInt(getString(R.string.STR), 0);\n            val mydex = sharedPref.getInt(getString(R.string.DEX), 0);\n            MyData(mystr, mydex)\n        }\n        editText2.setText(data.myStr.toString())\n        editText.setText(data.myDex.toString())\n    }\n}\n</code></pre>\n\n<p>However, note that loading preferences is very fast, so I doubt that this is your bottleneck, you may need to do some profiling to see where the time is spent.</p>\n\n<p>Also note that you are mixing <code>process</code> and <code>thread</code> - your whole app runs in a <code>process</code>, and you have multiple <code>threads</code> in that process - you can switch threads within your process, but your whole app is a single <code>process</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 6185975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c970d20395df0dc1d7c3dbad66928ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lenin", "link": "https://stackoverflow.com/users/6185975/lenin"}, "is_accepted": false, "score": 0, "last_activity_date": 1559668478, "creation_date": 1559668478, "answer_id": 56448542, "question_id": 56447531, "link": "https://stackoverflow.com/questions/56447531/running-part-of-my-mainactivty-in-a-separate-thread/56448542#56448542", "title": "running part of my MainActivty in a separate thread", "body": "<p>As you are using kotlin you could also use Anko library that let you execute in background with doAsync{} and return to UI thread</p>\n\n<pre><code>// Example from Anko documentation\ndoAsync {\n    // Long background task\n    uiThread {\n        result.text = \"Done\"\n    }\n}\n</code></pre>\n\n<p>Check it: <a href=\"https://github.com/Kotlin/anko\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/anko</a></p>\n"}], "owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 56448218, "answer_count": 2, "score": 1, "last_activity_date": 1559668478, "creation_date": 1559664180, "question_id": 56447531, "link": "https://stackoverflow.com/questions/56447531/running-part-of-my-mainactivty-in-a-separate-thread", "title": "running part of my MainActivty in a separate thread", "body": "<p>I am researching ways to run my onResume function in a separate thread or process, so it doesn't block the loading of that activity.</p>\n\n<p>I am looking at ways of running the onResume function i have in my MainActivity separately. What is within the onResume is a collection of routines that loads data back from sharedPref when the app either starts or resumes. However that onResume process delays the whole loading of the activity, so what i am thinking is can it be run from a separate process in order to not delay the loading of the whole activity?</p>\n\n<pre><code>package com.taylorworld.tw1\n\nimport android.content.Context\nimport android.content.Context.*\nimport android.content.Intent\nimport android.net.Uri\nimport android.os.Bundle\nimport android.support.design.widget.FloatingActionButton\nimport android.support.design.widget.Snackbar\nimport android.support.v4.view.GravityCompat\nimport android.support.v7.app.ActionBarDrawerToggle\nimport android.view.MenuItem\nimport android.support.v4.widget.DrawerLayout\nimport android.support.design.widget.NavigationView\nimport android.support.v7.app.AppCompatActivity\nimport android.support.v7.widget.Toolbar\nimport android.view.Menu\nimport android.view.View\nimport android.widget.Toast\nimport com.google.firebase.database.FirebaseDatabase\n//import com.google.firebase.firestore.FirebaseFirestore\nimport kotlinx.android.synthetic.main.content_main.*\nimport java.sql.Types.NULL\n\nclass MainActivity : AppCompatActivity(),     NavigationView.OnNavigationItemSelectedListener {\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    val toolbar: Toolbar = findViewById(R.id.toolbar)\n    setSupportActionBar(toolbar)\n\n    val fab: FloatingActionButton = findViewById(R.id.fab)\n    fab.setOnClickListener { view -&gt;\n        val intent = Intent(this, Main2Activity::class.java)\n        val sharedPref = this?.getPreferences(Context.MODE_PRIVATE)\n        val mystr = sharedPref.getInt(getString(R.string.STR), 0)\n        intent.putExtra(\"data\", mystr)\n        startActivity(intent)\n    }\n    val drawerLayout: DrawerLayout = findViewById(R.id.drawer_layout)\n    val navView: NavigationView = findViewById(R.id.nav_view)\n    val toggle = ActionBarDrawerToggle(\n        this, drawerLayout, toolbar, R.string.navigation_drawer_open,     R.string.navigation_drawer_close\n    )\n    drawerLayout.addDrawerListener(toggle)\n    toggle.syncState()\n\n    navView.setNavigationItemSelectedListener(this)\n\n    //val db = FirebaseFirestore.getInstance()\n}\n\noverride fun onBackPressed() {\n    val drawerLayout: DrawerLayout = findViewById(R.id.drawer_layout)\n    if (drawerLayout.isDrawerOpen(GravityCompat.START)) {\n        drawerLayout.closeDrawer(GravityCompat.START)\n    } else {\n        super.onBackPressed()\n    }\n}\n\noverride fun onCreateOptionsMenu(menu: Menu): Boolean {\n    // Inflate the menu; this adds items to the action bar if it is     present.\n    menuInflater.inflate(R.menu.main, menu)\n    return true\n}\n\noverride fun onOptionsItemSelected(item: MenuItem): Boolean {\n    // Handle action bar item clicks here. The action bar will\n    // automatically handle clicks on the Home/Up button, so long\n    // as you specify a parent activity in AndroidManifest.xml.\n    return when (item.itemId) {\n        R.id.action_settings -&gt; true\n        else -&gt; super.onOptionsItemSelected(item)\n    }\n}\n\noverride fun onNavigationItemSelected(item: MenuItem): Boolean {\n    // Handle navigation view item clicks here.\n    when (item.itemId) {\n        R.id.nav_home -&gt; {\n            // Handle the camera action\n            val i = Intent(Intent.ACTION_VIEW,     Uri.parse(\"https://www.facebook.com/brobostigon/\"))\n            startActivity(i)\n        }\n        R.id.nav_gallery -&gt; {\n\n        }\n        R.id.nav_slideshow -&gt; {\n\n        }\n        R.id.nav_tools -&gt; {\n\n        }\n        R.id.nav_share -&gt; {\n\n        }\n        R.id.nav_send -&gt; {\n\n        }\n    }\n    val drawerLayout: DrawerLayout = findViewById(R.id.drawer_layout)\n    drawerLayout.closeDrawer(GravityCompat.START)\n    return true\n}\n\npublic fun saveStr(view: View) {\n    var strength = Integer.parseInt(editText2.text.toString())\n    // this should be getPreferences\n    val sharedPref = this?.getPreferences(Context.MODE_PRIVATE);\n    with(sharedPref.edit()) {\n        putInt(getString(R.string.STR), strength)\n        apply()\n    }\n    Toast.makeText(this, \"Strength Saved\", Toast.LENGTH_SHORT).show();\n\n    //val database = FirebaseDatabase.getInstance()\n    //val myRef = database.getReference(\"str\")\n    //myRef.setValue(strength)\n}\n\npublic fun saveDex(view: View) {\n    var dexterity = Integer.parseInt(editText.text.toString())\n    // this should be getPreferences\n    val sharedPref = this?.getPreferences(Context.MODE_PRIVATE);\n    with(sharedPref.edit()) {\n        putInt(getString(R.string.DEX), dexterity)\n        apply()\n    }\n    Toast.makeText(this, \"Dexterity Saved\",     Toast.LENGTH_SHORT).show();\n}\n\npublic fun saveInt(view: View) {\n    var intelligance = Integer.parseInt(editText4.text.toString())\n    // this should be getPreferences\n    val sharedPref = this?.getPreferences(Context.MODE_PRIVATE);\n    with(sharedPref.edit()) {\n        putInt(getString(R.string.INT), intelligance)\n        apply()\n    }\n    Toast.makeText(this, \"Intelligence Saved\", Toast.LENGTH_SHORT).show();\n}\n\npublic fun saveWis(view: View) {\n    var wisdom = Integer.parseInt(editText3.text.toString())\n    // this should be getPreferences\n    val sharedPref = this?.getPreferences(Context.MODE_PRIVATE);\n    with(sharedPref.edit()) {\n        putInt(getString(R.string.WIS), wisdom)\n        apply()\n    }\n    Toast.makeText(this, \"Wisdom Saved\", Toast.LENGTH_SHORT).show();\n}\n\npublic fun saveCha(view: View) {\n    var charisma = Integer.parseInt(editText5.text.toString())\n    // this should be getPreferences\n    val sharedPref = this?.getPreferences(Context.MODE_PRIVATE);\n    with(sharedPref.edit()) {\n        putInt(getString(R.string.CHA), charisma)\n        apply()\n    }\n    Toast.makeText(this, \"charisma Saved\", Toast.LENGTH_SHORT).show();\n}\n\npublic fun saveCon(view: View) {\n    var constitution = Integer.parseInt(editText6.text.toString())\n    // this should be getPreferences\n    val sharedPref = this?.getPreferences(Context.MODE_PRIVATE);\n    with(sharedPref.edit()) {\n        putInt(getString(R.string.CON), constitution)\n        apply()\n    }\n    Toast.makeText(this, \"Constitution Saved\", Toast.LENGTH_SHORT).show();\n}\n\npublic fun saveChr(view: View) {\n    var chrname = editText7.text.toString()\n    // this should be getPreferences\n    val sharedPref = this?.getPreferences(Context.MODE_PRIVATE);\n    with(sharedPref.edit()) {\n        putString(getString(R.string.CHR), chrname)\n        apply()\n    }\n    Toast.makeText(this, \"Character Name Saved\", Toast.LENGTH_SHORT).show();\n}\n\n    override fun onResume() {\n        super.onResume()\n\n        //public fun readSP(view: View) {\n\n        val sharedPref = this?.getPreferences(Context.MODE_PRIVATE)\n\n        val mystr = sharedPref.getInt(getString(R.string.STR), 0);\n        editText2.setText(Integer.toString(mystr))\n\n        val mydex = sharedPref.getInt(getString(R.string.DEX), 0);\n        editText.setText(Integer.toString(mydex))\n\n        val myint = sharedPref.getInt(getString(R.string.INT), 0);\n        editText4.setText(Integer.toString(myint))\n\n        val mywis = sharedPref.getInt(getString(R.string.WIS), 0);\n        editText3.setText(Integer.toString(mywis))\n\n        val mycon = sharedPref.getInt(getString(R.string.CON), 0);\n        editText6.setText(Integer.toString(mycon))\n\n        val mycha = sharedPref.getInt(getString(R.string.CHA), 0);\n        editText5.setText(Integer.toString(mycha))\n\n        val mychr = sharedPref.getString(getString(R.string.CHR), null);\n        editText7.setText(mychr)\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 2827089, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/747896240/picture?type=large", "display_name": "Cam Hashemi", "link": "https://stackoverflow.com/users/2827089/cam-hashemi"}, "edited": false, "score": 0, "creation_date": 1559723090, "post_id": 56452103, "comment_id": 99505457, "body": "it&#39;s a common pattern when creating a resource, either from a client-server protocol or from a server-db protocol. e.g. the client sends a POST request w/ a resource w/o ID, then the same resource is returned with the ID."}], "tags": [], "owner": {"reputation": 2850, "user_id": 6375041, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/251807625186795/picture?type=large", "display_name": "Sergei Rybalkin", "link": "https://stackoverflow.com/users/6375041/sergei-rybalkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1559687235, "creation_date": 1559687235, "answer_id": 56452103, "question_id": 56447513, "link": "https://stackoverflow.com/questions/56447513/implementing-a-type-safe-class-hierarchy-w-a-nullable-value/56452103#56452103", "title": "Implementing a type-safe class hierarchy w/ a nullable value", "body": "<p>One of the options is to get into composition relying on <code>properties</code> inside interfaces.</p>\n\n<pre><code>interface Resource {\n    val property: String\n}\n\ninterface WithId : Resource {\n    val id: Int\n}\n\ninterface WithOtherField : Resource {\n    val otherField: Any\n}\n\n\nclass WithoutIdImpl(override val property: String) : Resource\nclass WithIdImpl(override val id: Int, override val property: String) : WithId\nclass WithIdAndOtherField(\n        override val id: Int,\n        override val otherField: Any,\n        override val property: String) : WithId, WithOtherField\n</code></pre>\n\n<p>I didn't get from your example, how you're going to switch between two states of <code>Resource</code>. So probably there is a gap to overcome.\nProbably, Smart casts will allow to switch states. </p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 2827089, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/747896240/picture?type=large", "display_name": "Cam Hashemi", "link": "https://stackoverflow.com/users/2827089/cam-hashemi"}, "edited": false, "score": 0, "creation_date": 1559734999, "post_id": 56455750, "comment_id": 99511018, "body": "this is interesting, and useful because it can be applied to any T."}, {"owner": {"reputation": 129, "user_id": 2827089, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/747896240/picture?type=large", "display_name": "Cam Hashemi", "link": "https://stackoverflow.com/users/2827089/cam-hashemi"}, "edited": false, "score": 0, "creation_date": 1559735400, "post_id": 56455750, "comment_id": 99511188, "body": "my main problem with this is that it&#39;s not as data-centric. <code>id</code> and <code>record</code> are properties of <code>MayHaveId</code>, so in practice, you would have to (un/)pack and (de/)serialize them separately. in my original implementation, <code>id</code> and <code>property</code> are direct attributes of the resource itself, and it is a single object."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1559718797, "creation_date": 1559718797, "answer_id": 56455750, "question_id": 56447513, "link": "https://stackoverflow.com/questions/56447513/implementing-a-type-safe-class-hierarchy-w-a-nullable-value/56455750#56455750", "title": "Implementing a type-safe class hierarchy w/ a nullable value", "body": "<p>What about defining</p>\n\n<pre><code>sealed class MayHaveId&lt;T&gt; { abstract val record: T }\nclass WithId&lt;T&gt;(val id: String, override val record: T): MayHaveId&lt;T&gt;()\nclass WithoutId&lt;T&gt;(override val record: T): MayHaveId&lt;T&gt;()\n\nclass Resource(val property: String)\n// and other similar types\n</code></pre>\n\n<p>and using <code>WithId&lt;Resource&gt;</code> and <code>WithoutId&lt;Resource&gt;</code>? In Scala you could add an implicit conversion from <code>MayHaveId&lt;T&gt;</code> to <code>T</code>, but not in Kotlin, alas, nor can you write <code>: T by record</code>. Still should be clean enough to use.</p>\n"}], "owner": {"reputation": 129, "user_id": 2827089, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/747896240/picture?type=large", "display_name": "Cam Hashemi", "link": "https://stackoverflow.com/users/2827089/cam-hashemi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1559718797, "creation_date": 1559664100, "question_id": 56447513, "link": "https://stackoverflow.com/questions/56447513/implementing-a-type-safe-class-hierarchy-w-a-nullable-value", "title": "Implementing a type-safe class hierarchy w/ a nullable value", "body": "<p>I (often) have a resource with two states, pre-created and post-created, where both states have the same fields except for an <code>id</code> field. <code>id</code> is null in the pre-created state and non-null in the post-created state.</p>\n\n<p>I would like to define and use this resource in a clean and type-safe way.</p>\n\n<p>It's common to represent this ID field as a nullable, which handles both scenarios with minimal boilerplate in the class definition. The problem is that it creates a lot of boilerplate in the business logic because you can't assert whether a resource is pre-created or post-created by looking at its type.</p>\n\n<p>Here is an example of the nullable approach:</p>\n\n<p><code>data class Resource(val id: String?, val property: String)</code></p>\n\n<p>This is simple to define, but not as simple to handle with due to lack of compile-time guarantees.</p>\n\n<p>Here's an example of a more type-safe approach:</p>\n\n<pre><code>sealed class Resource(val property: String) {\n  class WithoutID(property: String): Resource(property)\n  class WithID(val id: String, property: String): Resource(property)\n}\n</code></pre>\n\n<p>This allows me to pass around <code>Resource.WithID</code> and <code>Resource.WithoutID</code>, which have all the same fields and methods, except for <code>id</code>.</p>\n\n<p>One inconvenience with this type-safe approach is that the resource definition code gets quite bloated when you have many <code>property</code> fields. This bloating makes the code harder to read. </p>\n\n<p>I'm wondering if there's an alternative approach with less boilerplate, or if Kotlin has any features that make this kind of thing simpler.</p>\n"}, {"tags": ["android", "kotlin", "uri"], "comments": [{"owner": {"reputation": 544, "user_id": 11577815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1daaad3689f0c0242ef83915055024d7?s=128&d=identicon&r=PG&f=1", "display_name": "Prachi Singh", "link": "https://stackoverflow.com/users/11577815/prachi-singh"}, "edited": false, "score": 0, "creation_date": 1559657399, "post_id": 56445496, "comment_id": 99484786, "body": "<a href=\"https://stackoverflow.com/questions/16324482/convert-uri-to-string-and-string-to-uri?rq=1\" title=\"convert uri to string and string to uri\">stackoverflow.com/questions/16324482/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "is_accepted": true, "score": 9, "last_activity_date": 1559657572, "last_edit_date": 1559657572, "creation_date": 1559656854, "answer_id": 56445514, "question_id": 56445496, "link": "https://stackoverflow.com/questions/56445496/convert-string-to-uri-in-kotlin/56445514#56445514", "title": "Convert String to Uri in Kotlin", "body": "<pre><code>val uri = Uri.parse(Uri_string)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>val fileName = \"example.jpg\"\nval path = \"${Environment.getExternalStorageDirectory()}/$fileName\"\nval file = File(path); \nval uri = Uri.fromFile(file);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80, "user_id": 7371230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HwBco.jpg?s=128&g=1", "display_name": "Edgardo Barr&#237;a Meli&#225;n", "link": "https://stackoverflow.com/users/7371230/edgardo-barr%c3%ada-meli%c3%a1n"}, "is_accepted": false, "score": 1, "last_activity_date": 1559657816, "creation_date": 1559657816, "answer_id": 56445777, "question_id": 56445496, "link": "https://stackoverflow.com/questions/56445496/convert-string-to-uri-in-kotlin/56445777#56445777", "title": "Convert String to Uri in Kotlin", "body": "<p>If you are using <a href=\"https://developer.android.com/kotlin/ktx\" rel=\"nofollow noreferrer\">Android KTX</a> you can also parse this way:</p>\n\n<pre><code>val uri_string = \"/sdcard/example.jpg\"\nval uri = uri_string.toUri()\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 11114699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df6d8160b3bf2de69bac30434472e312?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/11114699/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4198, "favorite_count": 0, "closed_date": 1559828828, "accepted_answer_id": 56445514, "answer_count": 2, "score": 7, "last_activity_date": 1559746348, "creation_date": 1559656781, "last_edit_date": 1559746348, "question_id": 56445496, "link": "https://stackoverflow.com/questions/56445496/convert-string-to-uri-in-kotlin", "closed_reason": "Duplicate", "title": "Convert String to Uri in Kotlin", "body": "<p>How can I convert a String to a Uri in Kotlin instead of java (Android)?</p>\n\n<pre><code>val Uri_string = \"/sdcard/example.jpg\"\n</code></pre>\n\n<p><strong>Uri_string = ???;</strong></p>\n"}, {"tags": ["kotlin", "kotlin-multiplatform"], "answers": [{"tags": [], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "is_accepted": false, "score": 1, "last_activity_date": 1559656944, "creation_date": 1559656944, "answer_id": 56445543, "question_id": 56445460, "link": "https://stackoverflow.com/questions/56445460/kotlin-multi-platform-to-javascript-naming-of-the-method-not-respected/56445543#56445543", "title": "kotlin multi-platform to javascript : naming of the method not respected", "body": "<p>You can use the <code>@JsName</code> annotation to give a specific name for your method. It looks like this;</p>\n\n<pre><code>@JsName(\"launch\")\nfun launch() {\n\n}\n</code></pre>\n\n<p>More info <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.js/-js-name/index.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 2453, "user_id": 2560685, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SIRC8.png?s=128&g=1", "display_name": "sab", "link": "https://stackoverflow.com/users/2560685/sab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1559656944, "creation_date": 1559656641, "question_id": 56445460, "link": "https://stackoverflow.com/questions/56445460/kotlin-multi-platform-to-javascript-naming-of-the-method-not-respected", "title": "kotlin multi-platform to javascript : naming of the method not respected", "body": "<p>I use the gradle kotlin multi-platform  plugin to build something in java and js</p>\n\n<p>My issue is in the js version, the name of the function/class is not consistent:</p>\n\n<p>in my kotlin, I define a function \"launch()\", in the js buid, it will be \"launch12434()\"</p>\n\n<p>any idea how to correct-it?</p>\n"}, {"tags": ["android", "regex", "kotlin"], "comments": [{"owner": {"reputation": 918, "user_id": 4916945, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/QhGwD.jpg?s=128&g=1", "display_name": "ron_g", "link": "https://stackoverflow.com/users/4916945/ron-g"}, "edited": false, "score": 0, "creation_date": 1559653028, "post_id": 56444323, "comment_id": 99482248, "body": "are you supposed to use double backslashes? <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> might be a good place to test it out on"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 918, "user_id": 4916945, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/QhGwD.jpg?s=128&g=1", "display_name": "ron_g", "link": "https://stackoverflow.com/users/4916945/ron-g"}, "edited": false, "score": 0, "creation_date": 1559654463, "post_id": 56444323, "comment_id": 99483083, "body": "@rong yeah, you need to escape them in Java/Kotlin, unless you use the Kotlin string literal (surrounded by <code>&quot;&quot;&quot;</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1559652981, "post_id": 56444357, "comment_id": 99482210, "body": "I want the whole string to conform to the regular expression not a substring"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1559653597, "post_id": 56444357, "comment_id": 99482545, "body": "@RishabhJain I updated the answer to only contain the relevant solution."}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1559653171, "last_edit_date": 1559653171, "creation_date": 1559652923, "answer_id": 56444357, "question_id": 56444323, "link": "https://stackoverflow.com/questions/56444323/regex-matches-always-returns-false/56444357#56444357", "title": "Regex matches always returns false", "body": "<p>To match the whole string meeting a pattern use</p>\n\n<pre><code>val regex = Regex(\"[\\\\w\\\\s-]+\")\n</code></pre>\n\n<p>Or, to avoid overescaping:</p>\n\n<pre><code>val regex = Regex(\"\"\"[\\w\\s-]+\"\"\")\n</code></pre>\n\n<p>See the <a href=\"https://rextester.com/DEMFH24342\" rel=\"nofollow noreferrer\">Kotlin demo</a>. Note that <code>matches</code> requires a full string match, but <code>[\\w\\s-]</code> only matches  a single character.</p>\n\n<pre><code>val regex = Regex(\"\"\"[\\w\\s-]+\"\"\")\nval flag = regex.matches(\"Hello Overlay\")\nprintln(flag)  // =&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11100784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69220ae2e539ca2985a00ec3c70bf686?s=128&d=identicon&r=PG", "display_name": "Dedicated Android Developer", "link": "https://stackoverflow.com/users/11100784/dedicated-android-developer"}, "is_accepted": false, "score": 0, "last_activity_date": 1559816859, "last_edit_date": 1559816859, "creation_date": 1559653899, "answer_id": 56444639, "question_id": 56444323, "link": "https://stackoverflow.com/questions/56444323/regex-matches-always-returns-false/56444639#56444639", "title": "Regex matches always returns false", "body": "<pre><code>val regex = Regex(\"\"\"[\\w\\s-]+\"\"\")\nval flag = regex.matches(\"Hello Overlay\")\nprintln(flag)  // =&gt; true\n</code></pre>\n"}], "owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 56444357, "answer_count": 2, "score": 1, "last_activity_date": 1559816859, "creation_date": 1559652769, "question_id": 56444323, "link": "https://stackoverflow.com/questions/56444323/regex-matches-always-returns-false", "title": "Regex matches always returns false", "body": "<p>I'm trying to validate user input so that the only allowed characters in a string are A-Z, a-z, _, - and whitespace. To do that I wrote the following code:</p>\n\n<pre><code>val regex = Regex(\"[\\\\w\\\\s-]\")\nval flag = regex.matches(\"Hello Overlay\")\n</code></pre>\n\n<p>But the value of <code>flag</code> is false and I can't figure out why.</p>\n"}, {"tags": ["android", "kotlin", "mockwebserver"], "comments": [{"owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "edited": false, "score": 0, "creation_date": 1559653798, "post_id": 56443862, "comment_id": 99482660, "body": "I&#39;m not certain but try to remove the port"}, {"owner": {"reputation": 48, "user_id": 6756860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RNV0A.jpg?s=128&g=1", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0410\u0440\u0445\u0438\u043f\u043e\u0432", "link": "https://stackoverflow.com/users/6756860/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%90%d1%80%d1%85%d0%b8%d0%bf%d0%be%d0%b2"}, "reply_to_user": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "edited": false, "score": 0, "creation_date": 1559654177, "post_id": 56443862, "comment_id": 99482883, "body": "@GilGoldzweig thank you for your answer. I tried it and it didn&#39;t help to me"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 5004735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-x5fX6JdJJNo/AAAAAAAAAAI/AAAAAAAAAwU/dGHPu4t6HAE/photo.jpg?sz=128", "display_name": "Mr.Ustiik", "link": "https://stackoverflow.com/users/5004735/mr-ustiik"}, "edited": false, "score": 0, "creation_date": 1611300199, "post_id": 56704227, "comment_id": 116411361, "body": "could you please give a more detailed answer? What&#39;s the method <code>routeToFragment()</code>?"}, {"owner": {"reputation": 48, "user_id": 6756860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RNV0A.jpg?s=128&g=1", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0410\u0440\u0445\u0438\u043f\u043e\u0432", "link": "https://stackoverflow.com/users/6756860/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%90%d1%80%d1%85%d0%b8%d0%bf%d0%be%d0%b2"}, "reply_to_user": {"reputation": 175, "user_id": 5004735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-x5fX6JdJJNo/AAAAAAAAAAI/AAAAAAAAAwU/dGHPu4t6HAE/photo.jpg?sz=128", "display_name": "Mr.Ustiik", "link": "https://stackoverflow.com/users/5004735/mr-ustiik"}, "edited": false, "score": 0, "creation_date": 1611564910, "post_id": 56704227, "comment_id": 116482591, "body": "It&#39;s just routing between fragments. I&#39;ll try to find this part of the code"}], "tags": [], "owner": {"reputation": 48, "user_id": 6756860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RNV0A.jpg?s=128&g=1", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0410\u0440\u0445\u0438\u043f\u043e\u0432", "link": "https://stackoverflow.com/users/6756860/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%90%d1%80%d1%85%d0%b8%d0%bf%d0%be%d0%b2"}, "is_accepted": true, "score": 1, "last_activity_date": 1561122946, "creation_date": 1561122946, "answer_id": 56704227, "question_id": 56443862, "link": "https://stackoverflow.com/questions/56443862/mockwebserver-connectexception-failed-to-connect-to/56704227#56704227", "title": "MockWebServer - ConnectException: Failed to connect to", "body": "<p>I resolved my question.</p>\n\n<p>My code should be like this:</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\nclass RideFragmentTest {\n\n@get:Rule\n    val activityRule: ActivityTestRule&lt;MainActivity&gt; = ActivityTestRule(MainActivity::class.java)\n    private val mockWebServer = MockWebServer()\n    private val PORT = 8607\n\n@Before\n    fun init() {\n        mockWebServer.start(PORT)\n    }\n\n@After\n    fun finish() {\n        mockWebServer.shutdown()\n    }\n\n@Test\n    fun someTest() {\n        val dispatcher = code above..\n        mockWebServer.dispatcher = dispatcher\n        routeToFragment()\n\n        assertDisplayed(..., ...)\n    }\n}\n</code></pre>\n\n<p>i.e. I had to route my fragment after setting dispatcher because mockwebserver had no time for initialization otherwise(i understand so).</p>\n"}], "owner": {"reputation": 48, "user_id": 6756860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RNV0A.jpg?s=128&g=1", "display_name": "\u041f\u0430\u0432\u0435\u043b \u0410\u0440\u0445\u0438\u043f\u043e\u0432", "link": "https://stackoverflow.com/users/6756860/%d0%9f%d0%b0%d0%b2%d0%b5%d0%bb-%d0%90%d1%80%d1%85%d0%b8%d0%bf%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1011, "favorite_count": 0, "accepted_answer_id": 56704227, "answer_count": 1, "score": 1, "last_activity_date": 1561122946, "creation_date": 1559651129, "last_edit_date": 1561122530, "question_id": 56443862, "link": "https://stackoverflow.com/questions/56443862/mockwebserver-connectexception-failed-to-connect-to", "title": "MockWebServer - ConnectException: Failed to connect to", "body": "<p>When I start my test I get connect exception and I have no idea why.</p>\n\n<p>I found some code others authors and compare code and i didn't find anything wrong. I tried to change ports or remove it and it didn't help me.</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\nclass RideFragmentTest {\n\n@get:Rule\n    val activityRule: ActivityTestRule&lt;MainActivity&gt; = ActivityTestRule(MainActivity::class.java)\n    private val mockWebServer = MockWebServer()\n    private val PORT = 8607\n\n@Before\n    fun init() {\n        mockWebServer.start(PORT)\n        routeToFragment()\n    }\n\n@After\n    fun finish() {\n        mockWebServer.shutdown()\n    }\n\n@Test\n    fun someTest() {\n        val dispatcher = object : Dispatcher() {\n            @Throws(InterruptedException::class)\n            override fun dispatch(request: RecordedRequest): MockResponse {\n                when (request.path) {\n                    \"/something/current\" -&gt; {\n                        val jsonBody = asset(activityRule.activity, \"something.json\")\n                        return MockResponse().setResponseCode(200).setBody(jsonBody)\n                    }\n                    \"/something/save\" -&gt; {\n                        return MockResponse().setResponseCode(200)\n                    }\n                }\n                return MockResponse().setResponseCode(404)\n            }\n        }\n        mockWebServer.dispatcher = dispatcher\n\n        assertDisplayed(..., ...)\n    }\n}\n</code></pre>\n\n<pre><code>D/OkHttp: --&gt; GET http://127.0.0.1:8607/something/current\nD/OkHttp: --&gt; END GET\nHTTP FAILED: java.net.ConnectException: Failed to connect to /127.0.0.1:8607\n</code></pre>\n\n<p>I didn't find any strange logs.</p>\n"}, {"tags": ["unit-testing", "kotlin", "corda"], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 5611906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37234f7e304d5c2ff69b75a9c616a84e?s=128&d=identicon&r=PG&f=1", "display_name": "TCH", "link": "https://stackoverflow.com/users/5611906/tch"}, "is_accepted": true, "score": 0, "last_activity_date": 1559724623, "creation_date": 1559724623, "answer_id": 56457150, "question_id": 56443678, "link": "https://stackoverflow.com/questions/56443678/illegalargumentexception-while-running-contract-unit-test-in-kotlin-corda/56457150#56457150", "title": "IllegalArgumentException while running contract unit test in Kotlin (Corda)", "body": "<p>Kotlin tests must be run with JDK8. \nChange configuration of JDK8 in your project before running tests.\nThis will avoid this exception</p>\n"}], "owner": {"reputation": 115, "user_id": 5611906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37234f7e304d5c2ff69b75a9c616a84e?s=128&d=identicon&r=PG&f=1", "display_name": "TCH", "link": "https://stackoverflow.com/users/5611906/tch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 56457150, "answer_count": 1, "score": 0, "last_activity_date": 1559724673, "creation_date": 1559650430, "last_edit_date": 1559724673, "question_id": 56443678, "link": "https://stackoverflow.com/questions/56443678/illegalargumentexception-while-running-contract-unit-test-in-kotlin-corda", "title": "IllegalArgumentException while running contract unit test in Kotlin (Corda)", "body": "<p>When I try to run my Junit tests (Wrote in Kotlin) I get the following exception :</p>\n\n<pre><code>java.lang.IllegalArgumentException: Attempted to find dependent attachment for class javax/xml/bind/DatatypeConverter, but could not find a suitable candidate.\n</code></pre>\n\n<p>I tried to comment/decomment some lines in following code, it seems that the exception occurs when I call command()</p>\n\n<p>class IRIssueTests {</p>\n\n<pre><code>class DummyCommand : TypeOnlyCommandData()\n\nprivate val ledgerServices = MockServices(listOf(\"com.my.package.name\"))\n\nprivate val ALICE = TestIdentity(CordaX500Name(organisation = \"Alice\", locality = \"TestLand\", country = \"US\"))\n\n@Test\nfun mustIncludeIssueCommand() {\n    val ir = IRState(\n        UniqueIdentifier(),\n        mutableListOf(ALICE.party)\n    )\n\n    ledgerServices.ledger {\n        transaction {\n            output(IRContract.ID, ir)\n            command(listOf(ALICE.publicKey), DummyCommand())\n            fails()\n        }\n        transaction {\n            output(IRContract.ID, ir)\n            command(listOf(ALICE.publicKey), IRContract.Commands.Issue())\n            verifies()\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I would like to understand why I'm getting this exception and how to resolve it to make my test passing</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 860, "user_id": 9347168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958b75f6f8f36ed5e82baf0965804034?s=128&d=identicon&r=PG&f=1", "display_name": "Hfrav", "link": "https://stackoverflow.com/users/9347168/hfrav"}, "edited": false, "score": 0, "creation_date": 1559760916, "post_id": 56442962, "comment_id": 99524263, "body": "Great! That does the trick; No need for &lt;&gt; in my case, so &quot;between x and u&quot; is perfect."}], "tags": [], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "is_accepted": true, "score": 6, "last_activity_date": 1593979537, "last_edit_date": 1593979537, "creation_date": 1559647692, "answer_id": 56442962, "question_id": 56442863, "link": "https://stackoverflow.com/questions/56442863/kotlin-function-using-when-to-return-values/56442962#56442962", "title": "Kotlin: Function using = when() to return value(s)", "body": "<p>You can do some of these things, but not in the way you describe. For example you can use <code>is</code>, <code>in</code> and <code>==</code> like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val x = 10\n\nwhen (x) {\n    in 0..10 -&gt; 1\n    10 -&gt; 2\n    is Int -&gt; 3\n    else -&gt; 4\n}\n</code></pre>\n<p>but you can't use comparison operators (<code>&lt;</code>, <code>&gt;</code>). The reason for this is explained <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow noreferrer\">here</a>. You can use arbitrary expressions, but <code>&lt;</code> and <code>&gt;</code> can't be overloaded so you can't do <code>greaterThan(x)</code>.</p>\n<p>If you are missing some features from Kotlin you can always open a <a href=\"https://github.com/Kotlin/KEEP\" rel=\"nofollow noreferrer\">KEEP</a> so at some point, it might get implemented!</p>\n"}], "owner": {"reputation": 860, "user_id": 9347168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958b75f6f8f36ed5e82baf0965804034?s=128&d=identicon&r=PG&f=1", "display_name": "Hfrav", "link": "https://stackoverflow.com/users/9347168/hfrav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 56442962, "answer_count": 1, "score": 2, "last_activity_date": 1593979537, "creation_date": 1559647284, "question_id": 56442863, "link": "https://stackoverflow.com/questions/56442863/kotlin-function-using-when-to-return-values", "title": "Kotlin: Function using = when() to return value(s)", "body": "<p>I recently discovered this nice syntax for a function that only returns a value based on the input:</p>\n\n<pre><code>fun getItem(value: Int): String = when (getPosition(value)) {\n   0 -&gt; \"Zero\"\n   1 -&gt; \"One\"\n   2 -&gt; \"Two\"\n   else -&gt; \"Other\"\n}\n</code></pre>\n\n<p>Is it also possible to use ranges or &lt;> operators? </p>\n\n<p>I've tried doing things like:</p>\n\n<pre><code>&gt;0 -&gt; \"Positive\"\n</code></pre>\n\n<p>Which is not accepted, and</p>\n\n<pre><code>0-10 -&gt; \"Postively small\"\n</code></pre>\n\n<p>is (naturally) seen as \"0 minus 10\" I think.</p>\n"}, {"tags": ["java", "spring-boot", "kotlin", "aspectj", "spring-aop"], "comments": [{"owner": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 0, "creation_date": 1559647464, "post_id": 56442727, "comment_id": 99479127, "body": "<code>&lt;scope&gt;compile&lt;&#47;scope&gt;</code> does only mean that the dependecy must be available at compile time. <b>Not</b> that aop is applied when the class is compiled AFAIK"}, {"owner": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "edited": false, "score": 0, "creation_date": 1559652102, "post_id": 56442727, "comment_id": 99481692, "body": "1) If you want to have compile time weaving you need to add the aspectj plugin to your pom. 2) Do you see some output in the console? Maybe you should set the log level to debug and check which step is taking long"}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "edited": false, "score": 0, "creation_date": 1559652499, "post_id": 56442727, "comment_id": 99481920, "body": "@SimonMartinelli Set debug output for what package? If I set <code>logging.level.org.springframework=DEBUG</code> there are no outputs for the interesting step, there&#39;s just a &quot;gap&quot; of a bit over a minute in the debug outputs where I assume it&#39;s doing whatever it&#39;s doing in AOP."}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "edited": false, "score": 0, "creation_date": 1559653063, "post_id": 56442727, "comment_id": 99482267, "body": "@SimonMartinelli actually if I do a  <code>logging.level.org=DEBUG</code>, <code>logging.level.com=DEBUG</code>, I get the very (un)interesting outputs <code>HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)</code> during that period. No idea what that has to say -- or if at all."}, {"owner": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "edited": false, "score": 0, "creation_date": 1559655094, "post_id": 56442727, "comment_id": 99483462, "body": "Can you remove @EnableAspectJAutoProxy and test again?"}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "edited": false, "score": 0, "creation_date": 1559655177, "post_id": 56442727, "comment_id": 99483498, "body": "@SimonMartinelli already did. Makes no difference, I&#39;m afraid."}], "answers": [{"comments": [{"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 0, "creation_date": 1559660002, "post_id": 56446101, "comment_id": 99486220, "body": "Doesn&#39;t change anything, I&#39;m afraid (and I would&#39;ve been very surprised if it did because your second dependency is already included in the first)."}, {"owner": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "reply_to_user": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 0, "creation_date": 1559660171, "post_id": 56446101, "comment_id": 99486307, "body": "Strange. Probably it&#39;s a Kotlin issue. I will try with Kotlin"}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 0, "creation_date": 1559660278, "post_id": 56446101, "comment_id": 99486365, "body": "I very much doubt Kotlin is the issue since it&#39;s essentially just a different syntax. But please let me know if it does change something. :)"}, {"owner": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "reply_to_user": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 1, "creation_date": 1559660401, "post_id": 56446101, "comment_id": 99486442, "body": "As I said if tried with Java and have no difference"}, {"owner": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "reply_to_user": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 1, "creation_date": 1559660756, "post_id": 56446101, "comment_id": 99486663, "body": "I took your Kotlin code an can&#39;t see any issues. What other dependencies and code do you have? You mentioned Hikari so you have data access."}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 0, "creation_date": 1559664549, "post_id": 56446101, "comment_id": 99488668, "body": "Well, it&#39;s a rather large app and we have tons of dependencies. ^^&#39; But as a workaround, we&#39;ve created our own annotation and are using THAT to filter rather than specifying packages / classes / methods directly in aspectj. That seems to work ... for now. Thanks, though."}, {"owner": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "reply_to_user": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 0, "creation_date": 1559722294, "post_id": 56446101, "comment_id": 99505081, "body": "So if it is a large app are you sure that your aspect only considers the two classes or are there many more ?"}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "edited": false, "score": 0, "creation_date": 1559722610, "post_id": 56446101, "comment_id": 99505246, "body": "The kotlin file I posted in the question is the only file in the <code>ch.cypherk.myapp.util.aop</code> package (in fact, I created it under <code>src&#47;test</code> just for this IT). So unless I blundered and <code>@Before(&quot;execution(* ch.cypherk.myapp.util.aop.*.*(..))&quot;)</code> is scanning more than that package, yes, I&#39;m fairly sure these are the only classes considered."}], "tags": [], "owner": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "is_accepted": false, "score": 1, "last_activity_date": 1559660841, "last_edit_date": 1559660841, "creation_date": 1559659028, "answer_id": 56446101, "question_id": 56442727, "link": "https://stackoverflow.com/questions/56442727/understanding-spring-aop-interceptor-overhead/56446101#56446101", "title": "Understanding Spring AOP interceptor overhead", "body": "<p>I did the same as you did and it works fast.</p>\n\n<p>But I have different dependencies.</p>\n\n<p>Can you try with</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Edit:</p>\n\n<p>I've run your provided Kotlin code and the output is:</p>\n\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v2.1.5.RELEASE)\n\n2019-06-04 17:05:19.411  INFO 19840 --- [           main] c.c.myapp.util.aop.SimpleInterceptorIT   : Starting SimpleInterceptorIT on LAPTOP-FQPHQ5E5 with PID 19840 (started by simon in C:\\Users\\simon\\Workspace\\stackoverflow\\demo-aop-kotlin)\n2019-06-04 17:05:19.411  INFO 19840 --- [           main] c.c.myapp.util.aop.SimpleInterceptorIT   : No active profile set, falling back to default profiles: default\n2019-06-04 17:05:21.353  INFO 19840 --- [           main] c.c.myapp.util.aop.SimpleInterceptorIT   : Started SimpleInterceptorIT in 2.358 seconds (JVM running for 4.008)\nvoid ch.cypherk.myapp.util.aop.ClientClass.foo()\nvoid ch.cypherk.myapp.util.aop.TargetClass.foo(String)\nI did something.\n</code></pre>\n\n<p>No difference between both executions.</p>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 5043823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/royPs.jpg?s=128&g=1", "display_name": "Devilluminati", "link": "https://stackoverflow.com/users/5043823/devilluminati"}, "is_accepted": false, "score": 1, "last_activity_date": 1559660119, "creation_date": 1559660119, "answer_id": 56446414, "question_id": 56442727, "link": "https://stackoverflow.com/questions/56442727/understanding-spring-aop-interceptor-overhead/56446414#56446414", "title": "Understanding Spring AOP interceptor overhead", "body": "<p>I'm not sure but how i understand the aspectjweaver, introduce advice to Java class at load time</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n    &lt;version&gt;1.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>compile-time weaving is the simplest approach</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.7&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;complianceLevel&gt;1.8&lt;/complianceLevel&gt;\n        &lt;source&gt;1.8&lt;/source&gt;\n        &lt;target&gt;1.8&lt;/target&gt;\n        &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n        &lt;verbose&gt;true&lt;/verbose&gt;\n        &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n        &lt;encoding&gt;UTF-8 &lt;/encoding&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;!-- use this goal to weave all your main classes --&gt;\n                &lt;goal&gt;compile&lt;/goal&gt;\n                &lt;!-- use this goal to weave all your test classes --&gt;\n                &lt;goal&gt;test-compile&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Havent tried it out, but hope this works for you.</p>\n"}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1559660841, "creation_date": 1559646745, "question_id": 56442727, "link": "https://stackoverflow.com/questions/56442727/understanding-spring-aop-interceptor-overhead", "title": "Understanding Spring AOP interceptor overhead", "body": "<p>Alright so I need to migrate some CDI Interceptors to Spring Boot and I've written a simple \"proof of concept\" test case:</p>\n\n<pre><code>package ch.cypherk.myapp.util.aop\n\nimport org.aspectj.lang.JoinPoint\nimport org.aspectj.lang.annotation.Aspect\nimport org.aspectj.lang.annotation.Before\nimport org.assertj.core.api.Assertions.assertThat\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.springframework.boot.test.context.SpringBootTest\nimport org.springframework.context.annotation.Configuration\nimport org.springframework.context.annotation.EnableAspectJAutoProxy\nimport org.springframework.stereotype.Component\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner\nimport javax.inject.Inject\n\n@RunWith(SpringJUnit4ClassRunner::class)\n@SpringBootTest\nclass SimpleInterceptorIT{\n    companion object {\n        val expectedArg = \"Hakuna Matata\"\n        lateinit var interceptorOutput:String\n    }\n\n    @Inject\n    private lateinit var client:ClientClass\n\n\n    @Test\n    fun `interceptor works`(){\n        client.foo()\n\n\n        assertThat(interceptorOutput).isEqualTo(\"ch.cypherk.myapp.util.aop.TargetClass.foo(\\\"$expectedArg\\\")\")\n    }\n}\n@Component\nclass TargetClass{\n    fun foo(arg:String){\n        println(\"I did something.\")\n    }\n}\n\n@Component\nclass ClientClass(val target:TargetClass){\n    fun foo(){\n        target.foo(\"Hakuna Matata\")\n    }\n}\n\n@Aspect\n@Configuration\n@EnableAspectJAutoProxy\nclass TestInterceptorConfiguration{\n\n    @Before(\"execution(* ch.cypherk.myapp.util.aop.TargetClass.*(..))\")\n    fun intercept(joinPoint:JoinPoint){\n        val signature = joinPoint.signature\n        println(signature)\n        SimpleInterceptorIT.interceptorOutput =\n            \"${signature.declaringTypeName}.${signature.name}(${\n            joinPoint.args\n                .map { when(it){\n                    is String -&gt; \"\\\"$it\\\"\"\n                    else -&gt; it\n                }}\n                .joinToString(\",\")\n            })\"\n    }\n}\n</code></pre>\n\n<p>These are the <strong>ONLY</strong> classes in that package.</p>\n\n<p>Output:</p>\n\n<pre><code>void ch.cypherk.myapp.util.aop.TargetClass.foo(String)\nI did something.\n</code></pre>\n\n<p>And the test is green.</p>\n\n<p>Now let's widen the search spectrum a bit ...</p>\n\n<pre><code>@Aspect\n@Configuration\n@EnableAspectJAutoProxy\nclass TestInterceptorConfiguration{\n\n    @Before(\"execution(* ch.cypherk.myapp.util.aop.*.*(..))\")\n    fun intercept(joinPoint:JoinPoint){\n        val signature = joinPoint.signature\n        println(signature)\n        SimpleInterceptorIT.interceptorOutput =\n            \"${signature.declaringTypeName}.${signature.name}(${\n            joinPoint.args\n                .map { when(it){\n                    is String -&gt; \"\\\"$it\\\"\"\n                    else -&gt; it\n                }}\n                .joinToString(\",\")\n            })\"\n    }\n}\n</code></pre>\n\n<p>This takes an <em>ETERNITY</em> to start.</p>\n\n<p>Yes, the output is </p>\n\n<pre><code>void ch.cypherk.myapp.util.aop.ClientClass.foo()\nvoid ch.cypherk.myapp.util.aop.TargetClass.foo(String)\nI did something.\n</code></pre>\n\n<p>Yes, the test is green.</p>\n\n<p>Yes, the test <em>runs</em> for a as little as <code>117ms</code>.</p>\n\n<p>BUT it takes an eternity for Spring to start up.</p>\n\n<p>Why? And more importantly, what can I do about it? Because this is very not ok.</p>\n\n<p>I've taken a look at the <code>spring-boot-starter-aop</code> and it defines</p>\n\n<pre><code>  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n      &lt;version&gt;2.1.4.RELEASE&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n      &lt;version&gt;5.1.6.RELEASE&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n      &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n      &lt;version&gt;1.9.2&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n</code></pre>\n\n<p>All of which are -- as you will have noticed -- <em>compile</em> scoped.</p>\n\n<p>My expectation was, then, that this would all get weaved at compile time.\nThat does not seem to be the case. Or if it is, it doesn't stop Spring from doing something weird with the package anyway.</p>\n\n<p>I'd appreciate some help in understanding what's going on, here.</p>\n"}, {"tags": ["java", "intellij-idea", "kotlin", "nullable", "project-reactor"], "answers": [{"comments": [{"owner": {"reputation": 2618, "user_id": 4128524, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16f6196a2b998aa02df3d44d452df942?s=128&d=identicon&r=PG&f=1", "display_name": "David ten Hove", "link": "https://stackoverflow.com/users/4128524/david-ten-hove"}, "edited": false, "score": 0, "creation_date": 1559648511, "post_id": 56442365, "comment_id": 99479661, "body": "The classes in reactor apply the JSR-305 annotations, as you can see in the documentation link in the question. You can also see it here: <a href=\"https://github.com/reactor/reactor-core/blob/master/reactor-core/src/main/java/reactor/core/publisher/package-info.java\" rel=\"nofollow noreferrer\">github.com/reactor/reactor-core/blob/master/reactor-core/src&zwnj;&#8203;/&hellip;</a>. This is why I am confused. Why doesn&#39;t this work?"}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 2618, "user_id": 4128524, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16f6196a2b998aa02df3d44d452df942?s=128&d=identicon&r=PG&f=1", "display_name": "David ten Hove", "link": "https://stackoverflow.com/users/4128524/david-ten-hove"}, "edited": false, "score": 1, "creation_date": 1559648967, "post_id": 56442365, "comment_id": 99479928, "body": "Which version of IDEA are you using? Which version of Kotlin &amp; Kotlin plugin? My experience is that if you don&#39;t have the same version of Kotlin &amp; Kotlin plugin in IDEA or if you have an old IDEA weird things like this might happen."}, {"owner": {"reputation": 2618, "user_id": 4128524, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16f6196a2b998aa02df3d44d452df942?s=128&d=identicon&r=PG&f=1", "display_name": "David ten Hove", "link": "https://stackoverflow.com/users/4128524/david-ten-hove"}, "edited": false, "score": 0, "creation_date": 1559650602, "post_id": 56442365, "comment_id": 99480864, "body": "IDEA 2019.1.3 Ultimate. Kotlin version 1.3.31. Kotlin Maven plugin has no version specified, so I guess the latest, which would also be 1.3.31."}, {"owner": {"reputation": 2618, "user_id": 4128524, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16f6196a2b998aa02df3d44d452df942?s=128&d=identicon&r=PG&f=1", "display_name": "David ten Hove", "link": "https://stackoverflow.com/users/4128524/david-ten-hove"}, "edited": false, "score": 0, "creation_date": 1559651144, "post_id": 56442365, "comment_id": 99481143, "body": "Oh and the IntelliJ Kotlin plugin is also 1.3.31."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 2618, "user_id": 4128524, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16f6196a2b998aa02df3d44d452df942?s=128&d=identicon&r=PG&f=1", "display_name": "David ten Hove", "link": "https://stackoverflow.com/users/4128524/david-ten-hove"}, "edited": false, "score": 1, "creation_date": 1559651202, "post_id": 56442365, "comment_id": 99481181, "body": "Then this is weird. It is supposed to work. One option is to disable the warning (I don&#39;t recommend it). Or you can write to JetBrains support. This is a bug on their part I think. But first I&#39;d check the actual source code of <code>Mono</code>, maybe this is a bug on their part, who knows."}], "tags": [], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "is_accepted": false, "score": 1, "last_activity_date": 1559645347, "creation_date": 1559645347, "answer_id": 56442365, "question_id": 56441933, "link": "https://stackoverflow.com/questions/56441933/null-typesafety-in-reactor-code-in-kotlin-and-intellij-idea/56442365#56442365", "title": "Null typesafety in Reactor code in Kotlin and IntelliJ IDEA", "body": "<p>The problem here is that Kotlin treats all types from a non-null-safe platform (like Java) as a platform type so it doesn't matter what the docs say in this case. If something you try to use (<code>Mono</code> in this case) is not written in Kotlin it will be a platform type.</p>\n\n<p>You can <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#nullability-annotations\" rel=\"nofollow noreferrer\">annotate your Java methods</a> to alleviate this problem so in your case my guess is that <code>Mono</code> doesn't have any of the annotations from this list:</p>\n\n<ul>\n<li>JetBrains (<code>@Nullable</code> and <code>@NotNull</code> from the <code>org.jetbrains.annotations</code> package)</li>\n<li>Android (<code>com.android.annotations</code> and <code>android.support.annotations</code>)</li>\n<li>JSR-305 (<code>javax.annotation</code>)</li>\n<li>FindBugs (<code>edu.umd.cs.findbugs.annotations</code>)</li>\n<li>Eclipse (<code>org.eclipse.jdt.annotation</code>)</li>\n<li>Lombok (<code>lombok.NonNull</code>).</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2618, "user_id": 4128524, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16f6196a2b998aa02df3d44d452df942?s=128&d=identicon&r=PG&f=1", "display_name": "David ten Hove", "link": "https://stackoverflow.com/users/4128524/david-ten-hove"}, "edited": false, "score": 0, "creation_date": 1559648634, "post_id": 56442435, "comment_id": 99479725, "body": "But the Java class &quot;Mono&quot; IS annotated (by package-info.java). This is why I&#39;m confused why it doesn&#39;t work."}], "tags": [], "owner": {"reputation": 815, "user_id": 753975, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jWPtQ.png?s=128&g=1", "display_name": "MarkRobbo", "link": "https://stackoverflow.com/users/753975/markrobbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1559645609, "creation_date": 1559645609, "answer_id": 56442435, "question_id": 56441933, "link": "https://stackoverflow.com/questions/56441933/null-typesafety-in-reactor-code-in-kotlin-and-intellij-idea/56442435#56442435", "title": "Null typesafety in Reactor code in Kotlin and IntelliJ IDEA", "body": "<p>Type names or class names ending with single exclamation mark are called <strong>Platform Types</strong> in Kotlin. The subscribe in this case is returning a Java <code>String</code> without annotations, Kotlin doesn't know whether that value can or cannot be null.</p>\n\n<p>You're correct that <code>null</code> cannot be passed into <code>Mono.just</code> but the result of the subscribe is not similarly annotated.</p>\n\n<p>In that way, this is an issue with Reactor, but given the complex generics which are likely involved it could be infeasible to implement. Probably worth raising an issue with them if one does not exist.</p>\n"}], "owner": {"reputation": 2618, "user_id": 4128524, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16f6196a2b998aa02df3d44d452df942?s=128&d=identicon&r=PG&f=1", "display_name": "David ten Hove", "link": "https://stackoverflow.com/users/4128524/david-ten-hove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1559645609, "creation_date": 1559643646, "last_edit_date": 1559644158, "question_id": 56441933, "link": "https://stackoverflow.com/questions/56441933/null-typesafety-in-reactor-code-in-kotlin-and-intellij-idea", "title": "Null typesafety in Reactor code in Kotlin and IntelliJ IDEA", "body": "<p>I have the following code in my Kotlin class:</p>\n\n<pre><code>Mono.just(\"banana\").subscribe({\n    println(it)\n})\n</code></pre>\n\n<p>IntelliJ IDEA tells me that the variable \"it\" in this case has type \"String!\" (see screenshot).</p>\n\n<p><img src=\"https://i.stack.imgur.com/CYn9G.png\" alt=\"IntelliJ IDEA screenshot\"></p>\n\n<p>I'm not sure if this is an issue with Kotlin, IntelliJ IDEA or Reactor, but according to the <a href=\"https://projectreactor.io/docs/core/release/reference/#kotlin-null-safety\" rel=\"nofollow noreferrer\">Project Reactor documentation</a>, it should have null annotations, and the Mono class does not allow null values to be passed.</p>\n\n<p>I'm using Kotlin version 1.3.31 and have the following in my pom.xml:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;sourceDirectory&gt;${project.basedir}/src/main/kotlin&lt;/sourceDirectory&gt;\n    &lt;testSourceDirectory&gt;${project.basedir}/src/test/kotlin&lt;/testSourceDirectory&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;args&gt;\n                    &lt;arg&gt;-Xjsr305=strict&lt;/arg&gt;\n                &lt;/args&gt;\n                &lt;compilerPlugins&gt;\n                    &lt;plugin&gt;spring&lt;/plugin&gt;\n                &lt;/compilerPlugins&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                    &lt;artifactId&gt;kotlin-maven-allopen&lt;/artifactId&gt;\n                    &lt;version&gt;1.3.31&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>So my question is, why is the variable \"it\" of type \"String!\" rather than \"String\"?</p>\n"}, {"tags": ["hibernate", "gradle", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1509, "user_id": 3699261, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/fqJKs.jpg?s=128&g=1", "display_name": "eszik.k", "link": "https://stackoverflow.com/users/3699261/eszik-k"}, "edited": false, "score": 0, "creation_date": 1559731678, "post_id": 56442509, "comment_id": 99509540, "body": "Yes, resolution startegy solved my problem. I wrote this in build.gradle.kts <code>id(&quot;org.hibernate.orm&quot;) version &quot;5.4.3.Final&quot;</code> and this to <code>settings.gradle.kts</code> <code>resolutionStrategy {         eachPlugin {             if (requested.id.id == &quot;org.hibernate.orm&quot;) {                 useModule(&quot;org.hibernate:hibernate-gradle-plugin:${requested&zwnj;&#8203;.version}&quot;)             }         }     }</code>"}, {"owner": {"reputation": 815, "user_id": 753975, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jWPtQ.png?s=128&g=1", "display_name": "MarkRobbo", "link": "https://stackoverflow.com/users/753975/markrobbo"}, "reply_to_user": {"reputation": 1509, "user_id": 3699261, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/fqJKs.jpg?s=128&g=1", "display_name": "eszik.k", "link": "https://stackoverflow.com/users/3699261/eszik-k"}, "edited": false, "score": 1, "creation_date": 1559820214, "post_id": 56442509, "comment_id": 99543361, "body": "@aszik.k awesome! Glad you got it working. I&#39;ll add that to the answer for completeness"}, {"owner": {"reputation": 499, "user_id": 12900361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B3Ivd.jpg?s=128&g=1", "display_name": "mleister", "link": "https://stackoverflow.com/users/12900361/mleister"}, "edited": false, "score": 0, "creation_date": 1590953026, "post_id": 56442509, "comment_id": 109869592, "body": "Does this work? I don&#39;t get any information in the console that the feature is enabled"}, {"owner": {"reputation": 2765, "user_id": 401712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab83e913223d2bee3eb4c4b5629122a?s=128&d=identicon&r=PG", "display_name": "Dario Seidl", "link": "https://stackoverflow.com/users/401712/dario-seidl"}, "edited": false, "score": 1, "creation_date": 1600265291, "post_id": 56442509, "comment_id": 113033972, "body": "Thanks. It seems that with Gradle version 6.6.1, the <code>resolutionStrategy</code> in <code>settings.gradle.kts</code> need to be wrapped in <code>pluginManagement { ... }</code> to work."}], "tags": [], "owner": {"reputation": 815, "user_id": 753975, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jWPtQ.png?s=128&g=1", "display_name": "MarkRobbo", "link": "https://stackoverflow.com/users/753975/markrobbo"}, "is_accepted": true, "score": 11, "last_activity_date": 1600353019, "last_edit_date": 1600353019, "creation_date": 1559645925, "answer_id": 56442509, "question_id": 56441725, "link": "https://stackoverflow.com/questions/56441725/apply-hibernate-gradle-plugin-using-plugins-dsl-syntax/56442509#56442509", "title": "Apply hibernate-gradle-plugin using plugins dsl syntax?", "body": "<p>It looks like they haven't registered this plugin in the <a href=\"https://plugins.gradle.org/search?term=hibernate\" rel=\"nofollow noreferrer\">Gradle Plugins Repository</a> which rules out using the newer DSL without using a custom <a href=\"https://docs.gradle.org/current/userguide/plugins.html#sec:plugin_resolution_rules\" rel=\"nofollow noreferrer\">plugin resolution strategy</a>.</p>\n<p>For your case in <code>build.gradle.kts</code></p>\n<pre><code>plugins {\n    id(&quot;org.hibernate.orm&quot;) version &quot;5.4.3.Final&quot;\n}\n</code></pre>\n<p>And in <code>settings.gradle.kts</code></p>\n<pre><code>pluginManagement {\n    resolutionStrategy {\n        eachPlugin { \n            if (requested.id.id == &quot;org.hibernate.orm&quot;) { \n                useModule(&quot;org.hibernate:hibernate-gradle-plugin:${requested.version}&quot;) \n            } \n        } \n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 2765349, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/396488e03bec71fdf7b49812c840be57?s=128&d=identicon&r=PG&f=1", "display_name": "Bernhard Kern", "link": "https://stackoverflow.com/users/2765349/bernhard-kern"}, "is_accepted": false, "score": 3, "last_activity_date": 1579191425, "creation_date": 1579191425, "answer_id": 59773798, "question_id": 56441725, "link": "https://stackoverflow.com/questions/56441725/apply-hibernate-gradle-plugin-using-plugins-dsl-syntax/59773798#59773798", "title": "Apply hibernate-gradle-plugin using plugins dsl syntax?", "body": "<p>In addition to the perfectly working solution of <em>@MarkRobbo</em> you can use the following snippet to configure the options of the <code>hibernate-gradle-plugin</code> in <code>build.gradle.kts</code></p>\n\n<pre><code>tasks.withType&lt;org.hibernate.orm.tooling.gradle.EnhanceTask&gt;().configureEach {\n     options.enableLazyInitialization = true\n}\n</code></pre>\n"}], "owner": {"reputation": 1509, "user_id": 3699261, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/fqJKs.jpg?s=128&g=1", "display_name": "eszik.k", "link": "https://stackoverflow.com/users/3699261/eszik-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 1, "accepted_answer_id": 56442509, "answer_count": 2, "score": 5, "last_activity_date": 1600353019, "creation_date": 1559642837, "question_id": 56441725, "link": "https://stackoverflow.com/questions/56441725/apply-hibernate-gradle-plugin-using-plugins-dsl-syntax", "title": "Apply hibernate-gradle-plugin using plugins dsl syntax?", "body": "<p>I want to use <code>org.hibernate:hibernate-gradle-plugin</code> in my project with plugins dsl style. This is my <code>build.gradle.kts</code> plugin section:</p>\n\n<pre><code>plugins {\n    kotlin(\"jvm\") version \"1.3.31\"\n    id(\"io.spring.dependency-management\") version \"1.0.6.RELEASE\"\n    id(\"org.springframework.boot\") version \"2.1.5.RELEASE\"\n    id(\"org.jetbrains.kotlin.plugin.spring\") version \"1.3.31\"\n    id(\"org.jetbrains.kotlin.plugin.jpa\") version \"1.3.31\"\n}\n</code></pre>\n\n<p>Does anybody knows how to do this?</p>\n\n<p>All of the documentation and posts are using the legacy plugin application. Like this: <a href=\"https://stackoverflow.com/questions/35552109/how-to-setup-hibernate-gradle-plugin-for-bytecode-enhancement\">How to setup Hibernate Gradle plugin for bytecode enhancement?</a></p>\n"}, {"tags": ["android", "kotlin", "permissions", "manifest"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1559644692, "post_id": 56441517, "comment_id": 99477730, "body": "<code>checkSelfPermission()</code> is only for <code>dangerous</code> permissions. Do not use it for <code>normal</code> permissions."}, {"owner": {"reputation": 61, "user_id": 5641228, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-TFFNcCQvEwM/AAAAAAAAAAI/AAAAAAAABXE/url1YGBs_Ss/photo.jpg?sz=128", "display_name": "Warle", "link": "https://stackoverflow.com/users/5641228/warle"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1559646548, "post_id": 56441517, "comment_id": 99478659, "body": "@CommonsWare Hm, you are probably right, why does it work for the rest of permissions when some of them are normal too? I guess there is no way to check if the permission is normal or danger, so i have to add this permision to condition (it != Manifest.permission.USE_BIOMETRIC) whitch i really don&#39;t like. Thanks anyway"}], "owner": {"reputation": 61, "user_id": 5641228, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-TFFNcCQvEwM/AAAAAAAAAAI/AAAAAAAABXE/url1YGBs_Ss/photo.jpg?sz=128", "display_name": "Warle", "link": "https://stackoverflow.com/users/5641228/warle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2209, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559642001, "creation_date": 1559642001, "question_id": 56441517, "link": "https://stackoverflow.com/questions/56441517/android-not-granted-use-biometric", "title": "Android - Not granted USE_BIOMETRIC", "body": "<p>I am checking all permisions from the Manifest with the code bellow. Now I added USE_BIOMETRIC permission, because I want to use fingerprint, but this permission is not granted and I don't know why.</p>\n\n<p>I know that USE_BIOMETRIC is normal permission so it shouldn't be asked and should be granted when it's in the Manifest, but it's not.</p>\n\n<p>Checking for other permissions is working and all are granted or asked for it, only this one is not.</p>\n\n<p>I am testing app on 2 phones, emulated Google pixel with Android 8.0 and API 26 and physical Xiaomi Redmi 5 with Android 8.1 and API 27.</p>\n\n<p>Both phones are using fingerprint to unlock screen.</p>\n\n<p>Permisions in the manifest:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.CAMERA\" /&gt;\n&lt;uses-permission android:name=\"android.permission.SEND_SMS\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /&gt;\n&lt;uses-permission android:name=\"android.permission.USE_BIOMETRIC\" /&gt;\n</code></pre>\n\n<p>Code that loads permissions from the manifest and check if is granted or not:</p>\n\n<pre><code>fun checkAndRequestPermissions(): Boolean{\n    var listPermissionsNeeded = ArrayList&lt;String&gt;()\n    val permissions = retrievePermissions(activity.baseContext)\n    permissions.forEach {\n        if(ContextCompat.checkSelfPermission(activity.baseContext, it) != PackageManager.PERMISSION_GRANTED){\n            listPermissionsNeeded.add(it)\n            Log.d(\"Missing permission\", it)\n        }\n    }\n    if (!listPermissionsNeeded.isEmpty()) {\n        val array = arrayOfNulls&lt;String&gt;(listPermissionsNeeded.size)\n        listPermissionsNeeded.toArray(array)\n        ActivityCompat.requestPermissions(activity, array, ConstantsStorage.ACTIVITY_REQUEST_PERMISSIONS_CODE)\n        return false\n    }\n    return true\n}\n\ncompanion object {\n\n    /**\n     * Retrieves permissions listed in the manifest file\n     * @param context Context\n     * @return Returns String array of permissions\n     */\n    fun retrievePermissions(context: Context): Array&lt;String&gt; {\n        try {\n            return context\n                    .packageManager\n                    .getPackageInfo(context.packageName, PackageManager.GET_PERMISSIONS)\n                    .requestedPermissions\n        } catch (e: PackageManager.NameNotFoundException) {\n            throw RuntimeException(\"This should have never happened.\", e)\n        }\n\n    }\n}\n</code></pre>\n\n<p>Thank you for your help</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "junit"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1560160788, "post_id": 56441794, "comment_id": 99632342, "body": "Thank you for your help and the code seems simple. But the test you&#39;ve written is not working and it is showing as <code>nullpointerexception</code>"}, {"owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1560170256, "post_id": 56441794, "comment_id": 99636697, "body": "<code>java.lang.IllegalStateException: properties.getProperty(&quot;prodUrl&quot;) must not be null</code> . This the exception I&#39;m getting. So do you know how to test a method containing property file,it seems that the property file is not getting invoked."}, {"owner": {"reputation": 69363, "user_id": 413127, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/D8FKw.jpg?s=128&g=1", "display_name": "Blundell", "link": "https://stackoverflow.com/users/413127/blundell"}, "reply_to_user": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "edited": false, "score": 0, "creation_date": 1560194073, "post_id": 56441794, "comment_id": 99647818, "body": "I think because your using PowerMockito to create the <code>Properties</code> variable. You need to mock the <code>getProperty</code> method, something like: <code>Mockito.</code>when<code>(testProperties.getProperty(anyString()).thenRet&zwnj;&#8203;urn(&quot;expectedPropert&zwnj;&#8203;y&quot;)</code>"}], "tags": [], "owner": {"reputation": 69363, "user_id": 413127, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/D8FKw.jpg?s=128&g=1", "display_name": "Blundell", "link": "https://stackoverflow.com/users/413127/blundell"}, "is_accepted": true, "score": 1, "last_activity_date": 1559643077, "creation_date": 1559643077, "answer_id": 56441794, "question_id": 56441134, "link": "https://stackoverflow.com/questions/56441134/how-to-write-test-cases-for-switch-condition-in-android-kotlin/56441794#56441794", "title": "How to write test cases for switch condition in android kotlin", "body": "<p>I haven't answered your question, but perhaps refactoring your code slightly makes it more obvious to test:</p>\n\n<pre><code>private val SELECTED_ENV = \"\";\n\nfun getEnvSwitchURL(applicationContext: Context, envSwitchInfo: String): String {\n    val resources = applicationContext.resources\n    val assetManager = resources.assets\n    val properties = Properties()\n    val selectedUrl: String\n    try {\n        val inputStream = assetManager.open(\"configuration.properties\")\n        properties.load(inputStream)\n        val urlPref = applicationContext.getSharedPreferences(SELECTED_ENV, Context.MODE_PRIVATE)\n        val editor = urlPref.edit()\n        selectedUrl = get(envSwitchInfo, properties)\n        editor.putString(\"selectedUrl\", selectedUrl)\n        editor.apply()\n        inputStream.close()\n    }\n    return selectedUrl\n}\n\nfun get(envSwitchInfo: String, properties: Properties): String {\n    when (envSwitchInfo) {\n        \"Production\" -&gt; {\n            return properties.getProperty(\"prodUrl\")\n        }\n        \"Development\" -&gt; {\n            return properties.getProperty(\"devUrl\")\n        }\n        \"Testing\" -&gt; {\n            return properties.getProperty(\"testUrl\")\n        }\n        else -&gt; throw IllegalStateException(\"Unhandled environment $envSwitchInfo\")\n    }\n}\n</code></pre>\n\n<p>You could do a lot more here, look into the Single Responsibilty Principle. This is a start, for unit testing you don't want to test that SharePreferences works correctly because then you are testing the platform and not your code. You may want to test only that when you pass an environment like \"Production\", then the selectedUrl you get is returned.</p>\n\n<p>Testing inputs and outputs as described above would be something like this:</p>\n\n<pre><code> String url = envSwitchUtils.getEnvSwitchURL(testApplicationContext, \"Production\")\n assertEquals(url, \"http://myProdUrl\")\n</code></pre>\n\n<p>and another test</p>\n\n<pre><code> String url = envSwitchUtils.getEnvSwitchURL(testApplicationContext, \"Development\")\n assertEquals(url, \"http://myDevUrl\")\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 10259634, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-17VC2FDXEf0/AAAAAAAAAAI/AAAAAAAAChk/Y9u6b0aJPCc/photo.jpg?sz=128", "display_name": "Christina Varghese", "link": "https://stackoverflow.com/users/10259634/christina-varghese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "accepted_answer_id": 56441794, "answer_count": 1, "score": 3, "last_activity_date": 1559643077, "creation_date": 1559640512, "last_edit_date": 1559642361, "question_id": 56441134, "link": "https://stackoverflow.com/questions/56441134/how-to-write-test-cases-for-switch-condition-in-android-kotlin", "title": "How to write test cases for switch condition in android kotlin", "body": "<p>I need to write test case for the switch condition in <code>kotlin</code>.</p>\n\n<p><em>Class.kt</em></p>\n\n<pre><code>fun getEnvSwitchURL(applicationContext: Context, envSwitchInfo: String): String {\n        val resources = applicationContext.getResources()\n        val assetManager = resources.getAssets()\n        val properties = Properties()\n        try {\n            val inputStream = assetManager.open(\"configuration.properties\")\n            properties.load(inputStream)\n            val urlPref = applicationContext.getSharedPreferences(SELECTED_ENV, Context.MODE_PRIVATE)\n            val editor = urlPref.edit()\n            when (envSwitchInfo) {\n                \"Production\" -&gt;{\n                    editor.putString(\"selectedUrl\", properties.getProperty(\"prodUrl\"))\n                    editor.apply()\n                    selectedUrl=properties.getProperty(\"prodUrl\")\n                }\n                \"Development\" -&gt;{\n                    editor.putString(\"selectedUrl\", properties.getProperty(\"devUrl\"))\n                    editor.apply()\n                    selectedUrl=properties.getProperty(\"devUrl\")\n                }\n                \"Testing\" -&gt;{\n                    editor.putString(\"selectedUrl\", properties.getProperty(\"testUrl\"))\n                    editor.apply()\n                    selectedUrl=properties.getProperty(\"testUrl\")\n                }\n            }\n            inputStream.close()\n        }\n        return selectedUrl\n    }\n</code></pre>\n\n<p><em>test.kt</em></p>\n\n<pre><code>@BeforeEach\n    fun runBeforeTest() {\n\n        testApplicationContext = Mockito.mock(Context::class.java)\n        testResource = Mockito.mock(Resources::class.java)\n        testAsset = Mockito.mock(AssetManager::class.java)\n        testInputStream = Mockito.mock(InputStream::class.java)\n        testSharedPref=Mockito.mock(SharedPreferences::class.java)\n        testEditor=Mockito.mock(SharedPreferences.Editor::class.java)\n        testProperties=Mockito.mock(Properties::class.java)\n        testProperties.setProperty(\"prodUrl\", \"Value\");\n    }\n\n@Test\n    fun getEnvSwitchURL() {\n        Mockito.`when`(testApplicationContext.getResources()).thenReturn(testResource)\n        Mockito.`when`(testResource.assets).thenReturn(testAsset)\n        Mockito.`when`(testAsset.open(Mockito.anyString())).thenReturn(testInputStream)\n        PowerMockito.whenNew(Properties::class.java).withNoArguments().thenReturn(testProperties)\n        Mockito.doNothing().`when`(testProperties).load(Mockito.any(InputStream::class.java))\n        Mockito.`when`(testApplicationContext.getSharedPreferences(anyString(),anyInt())).thenReturn(testSharedPref)\n        Mockito.`when`(testSharedPref.edit()).thenReturn(testEditor)\n        envSwitchUtils.getEnvSwitchURL(testApplicationContext, testEnvSwitchInfo)\n    }\n</code></pre>\n\n<p>Above written test case is working fine. I need to find out how to write test case for switch condition for the above class. Kindly help me to write the same</p>\n"}, {"tags": ["java", "android", "unit-testing", "kotlin"], "comments": [{"owner": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 0, "creation_date": 1559640752, "post_id": 56441084, "comment_id": 99475633, "body": "You could use something like this: <code>any&lt;() -&gt; Unit&gt;()</code> instead of specifying the methods directly"}, {"owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "reply_to_user": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 0, "creation_date": 1559641193, "post_id": 56441084, "comment_id": 99475893, "body": "Yes I can use <code>any()</code>, but wonder if I can specify it directly since it&#39;s a verify"}, {"owner": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 0, "creation_date": 1559641287, "post_id": 56441084, "comment_id": 99475959, "body": "Does <code>verify(moveToNextStepUseCase).execute(any&lt;() -&gt; Observable&lt;Boolean&gt;(), any&lt;() -&gt; Unit&gt;(), any&lt;() -&gt; Unit&gt;())</code> work?"}, {"owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "reply_to_user": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 0, "creation_date": 1559641646, "post_id": 56441084, "comment_id": 99476152, "body": "I have not tried that yet, what works for me is <code>verify(moveToNextStepUseCase).execute(any(), any(), any())</code>"}, {"owner": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 0, "creation_date": 1559641712, "post_id": 56441084, "comment_id": 99476188, "body": "I guess that works too, as the arguments are automatically inferred"}], "owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559640339, "creation_date": 1559640339, "question_id": 56441084, "link": "https://stackoverflow.com/questions/56441084/verify-kotlin-function-as-parameter-in-unittest", "title": "Verify Kotlin function as parameter in unittest", "body": "<p>I am trying to verify kotlin function in parameter in unit test but failed. Here is my code</p>\n\n<p>Unit test:</p>\n\n<pre><code>verify(moveToNextStepUseCase).execute(validateStepAssemblyUseCase.validate(ID),\n                { view.showCompleteAssemblyConfirmDialog(type) },\n                { view.showCompleteAssemblyErrorDialog() })\n</code></pre>\n\n<p>My <code>moveToNextStepUseCase</code> code:</p>\n\n<pre><code>interface MoveToNextStepUseCase {\n    fun execute(validator: () -&gt; Observable&lt;Boolean&gt;, successAction: () -&gt; Unit, errorAction: () -&gt; Unit)\n}\n</code></pre>\n\n<p>My calling code:</p>\n\n<pre><code>moveToNextStepUseCase.execute(\n                                        validateStepAssemblyUseCase.validateMissingAssembly(assignmentId),\n                                        { view.showCompleteAssemblyConfirmDialog(currentStepId) },\n                                        { view.showCompleteAssemblyErrorDialog() }\n                                )\n</code></pre>\n\n<p>But I got the error after running test:</p>\n\n<pre><code>Argument(s) are different! Wanted:\nmoveToNextStepUseCase.execute(\n    Function0&lt;io.reactivex.Observable&lt;java.lang.Boolean&gt;&gt;,\n    (move next assembly step incomplete case$1) Function0&lt;kotlin.Unit&gt;,\n    (move next assembly step incomplete case$2) Function0&lt;kotlin.Unit&gt;\n);\n\nActual invocation has different arguments:\nmoveToNextStepUseCase.execute(\n    Function0&lt;io.reactivex.Observable&lt;java.lang.Boolean&gt;&gt;,\n    () Function0&lt;kotlin.Unit&gt;,\n    () Function0&lt;kotlin.Unit&gt;\n);\n</code></pre>\n\n<p>Anyone knows why the parameter is empty in actual invoke? <code>()</code></p>\n"}, {"tags": ["android", "kotlin", "google-calendar-api"], "comments": [{"owner": {"reputation": 5278, "user_id": 7393478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gNAVs.jpg?s=128&g=1", "display_name": "Kaddath", "link": "https://stackoverflow.com/users/7393478/kaddath"}, "edited": false, "score": 0, "creation_date": 1559643307, "post_id": 56440989, "comment_id": 99476979, "body": "This is too broad, you need to be more precise and focus on a specific code. Also, remember that SO is not a free coding service. You should take the guide code that suits you best, share it in the question itself with all the relavant details: the error code if there is any, or describe how the behaviour is unexpected. For the process, identifying with your google account will only work if you are in a browser (if browser is embedded in the app, you need to log in there). If not in a browser, you need to log in manually to the API, with your credentials (hide them in the code you share here)"}, {"owner": {"reputation": 56, "user_id": 11271967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZssB.jpg?s=128&g=1", "display_name": "Captain Allergy", "link": "https://stackoverflow.com/users/11271967/captain-allergy"}, "reply_to_user": {"reputation": 5278, "user_id": 7393478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gNAVs.jpg?s=128&g=1", "display_name": "Kaddath", "link": "https://stackoverflow.com/users/7393478/kaddath"}, "edited": false, "score": 0, "creation_date": 1559648777, "post_id": 56440989, "comment_id": 99479820, "body": "@Kaddath I understand that this question is quite broad but I don&#39;t want anyone to give detailed explanation. Maybe somebody faced the same problems but found a solution that suits them or anybody has a github reference.  And no, a browser is not necessary. You can of course authenticate yourself with your google account inside an app. And you don&#39;t have to hide any credentials inside the code, you can use smartlock to store them and to automatically log in the user with his credentials when launching the app. And this was not the problem that I was facing."}, {"owner": {"reputation": 5278, "user_id": 7393478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gNAVs.jpg?s=128&g=1", "display_name": "Kaddath", "link": "https://stackoverflow.com/users/7393478/kaddath"}, "edited": false, "score": 0, "creation_date": 1559649605, "post_id": 56440989, "comment_id": 99480292, "body": "It&#39;s not that it&#39;s too broad that it cannot be answered at all, it&#39;s too broad for this site rules, even off-topic if what you want is tutorials. And because there is nothing more specific than &quot;cannot get it to work&quot;, very unlikely that the post can be useful for others. About hiding your credentials, it was if you share your code here, so that other users don&#39;t see them."}, {"owner": {"reputation": 56, "user_id": 11271967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZssB.jpg?s=128&g=1", "display_name": "Captain Allergy", "link": "https://stackoverflow.com/users/11271967/captain-allergy"}, "reply_to_user": {"reputation": 5278, "user_id": 7393478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gNAVs.jpg?s=128&g=1", "display_name": "Kaddath", "link": "https://stackoverflow.com/users/7393478/kaddath"}, "edited": false, "score": 0, "creation_date": 1559650568, "post_id": 56440989, "comment_id": 99480838, "body": "@Kaddath I often had the experience on stack overflow where people shared there experience with facing the same problem even without given a specific context. And I often found the provided links or projects as an answer pretty useful. If this won&#39;t be answered here it&#39;s fine for me but if anyobdy has a recommendation for me, the question payed itself off"}], "answers": [{"tags": [], "owner": {"reputation": 383, "user_id": 11459434, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MBGtgCQoHCA/AAAAAAAAAAI/AAAAAAAAC4Q/gerg1wH2wMQ/photo.jpg?sz=128", "display_name": "Dharmender Manral", "link": "https://stackoverflow.com/users/11459434/dharmender-manral"}, "is_accepted": false, "score": 0, "last_activity_date": 1559658497, "last_edit_date": 1559658497, "creation_date": 1559656607, "answer_id": 56445447, "question_id": 56440989, "link": "https://stackoverflow.com/questions/56440989/what-is-the-best-practice-to-get-events-from-a-users-google-calendar/56445447#56445447", "title": "What is the best practice to get events from a users google calendar?", "body": "<p>Using Content provider you can access Calendar Events, Content resolver query() method is used to get content provider data. You need to pass list of columns that need to be retrieved.</p>\n\n<p>you can take refrence from android calendar docs check below link <a href=\"https://developer.android.com/reference/java/util/Calendar\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/java/util/Calendar</a></p>\n\n<pre><code>  // add below permission in your manifest file and ask these permission at run time also\n   &lt;uses-permission android:name=\"android.permission.WRITE_CALENDAR\"&gt;&lt;/uses-permission&gt;\n   &lt;uses-permission android:name=\"android.permission.READ_CALENDAR\"&gt;&lt;/uses-permission&gt;\n\n\n  public void getDataFromEventsTable() {\n    Cursor cur = null;\n    ContentResolver cr =getContentResolver();\n\n    //if you want access calendar details use below uri\n   // Uri uri = CalendarContract.Calendars.CONTENT_URI;\n    String[] calmProjection ={CalendarContract.Calendars._ID,\n                    CalendarContract.Calendars.ACCOUNT_NAME,\n                    CalendarContract.Calendars.ACCOUNT_TYPE,\n                    CalendarContract.Calendars.CALENDAR_DISPLAY_NAME,\n                    CalendarContract.Calendars.CALENDAR_COLOR,\n                    CalendarContract.Calendars.CALENDAR_ACCESS_LEVEL,\n                    CalendarContract.Calendars.OWNER_ACCOUNT,\n                    CalendarContract.Calendars.CALENDAR_TIME_ZONE,\n                    CalendarContract.Calendars.ALLOWED_REMINDERS};\n\n    //if your want access event related info use below uri\n    Uri uri=CalendarContract.Events.CONTENT_URI;\n    String[] eventmProjection =\n            {CalendarContract.Calendars._ID,\n                    CalendarContract.Events.DTSTART,\n                    CalendarContract.Events.DTEND,\n                    CalendarContract.Events.TITLE,\n                    CalendarContract.Events.EVENT_LOCATION,\n                    CalendarContract.Events.ORGANIZER,\n                    CalendarContract.Events._ID,\n                    CalendarContract.Events.DESCRIPTION,\n                    CalendarContract.Events.DURATION,\n                    CalendarContract.Events.SYNC_DATA1,\n                    CalendarContract.Events.DIRTY,\n                    CalendarContract.Events.UID_2445,\n                    CalendarContract.Events.DELETED,\n                    CalendarContract.Events.LAST_DATE,\n                    CalendarContract.Events.SYNC_DATA2,\n                    CalendarContract.Events.ALL_DAY,\n                    CalendarContract.Events.RRULE,\n                    CalendarContract.Events.STATUS,\n                    CalendarContract.Events.RDATE\n            };\n\n    String selection = \"((\" + CalendarContract.Calendars.ACCOUNT_NAME + \" = ?) AND (\"\n            + CalendarContract.Calendars.ACCOUNT_TYPE + \" = ?) AND (\"\n            + CalendarContract.Calendars.OWNER_ACCOUNT + \" = ?))\";\n  // pass here details of account, which account linked with your google calendar \n String[] selectionArgs = new String[]{\"xyz@gmail.com\", \"com.google\",\n            \"xyz@gmail.com\"};\n\n    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_CALENDAR) != PackageManager.PERMISSION_GRANTED) {\n        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_CALENDAR},12);\n    }\n    cur = cr.query(uri, eventmProjection, selection, selectionArgs, null);\n       if(cur.getCount()&gt;0){\n        while (cur.moveToNext()) {\n            String eventTitle = cur.getString(cur.getColumnIndex(CalendarContract.Events.TITLE));\n            String eventId = cur.getString(cur.getColumnIndex(CalendarContract.Events._ID));\n            String startDate = cur.getString(cur.getColumnIndex(CalendarContract.Events.DTSTART));\n            String endDate = cur.getString(cur.getColumnIndex(CalendarContract.Events.DTEND));\n            Log.d(\"Events\", \"-&gt;\" + eventTitle + \"-&gt;\" + eventId + \"-&gt;\" + startDate + \"-&gt;\" + endDate);\n        }\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 56, "user_id": 11271967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZssB.jpg?s=128&g=1", "display_name": "Captain Allergy", "link": "https://stackoverflow.com/users/11271967/captain-allergy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 363, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1559658497, "creation_date": 1559639974, "question_id": 56440989, "link": "https://stackoverflow.com/questions/56440989/what-is-the-best-practice-to-get-events-from-a-users-google-calendar", "title": "What is the best practice to get events from a users google calendar?", "body": "<p>I want to read events from a users google calendar and use the title of the events for future purposes in an android app. </p>\n\n<p>So far I've read the documentation about the google-calendar-api and the calendar-provider and so on but couldn't get any of the \"getting started\" guides to run. I also couldn't find any useful example on how to implement the api. </p>\n\n<p>I am aware of the process (User needs to authenticate himself with his google account and with that information the desired content can be accessed) but as I said, I am unaware of how to implement this inside an android app. </p>\n\n<p>If anyone has useful code, an example or any advice, I'd really appreciate it since this simple topic was driving me crazy.</p>\n"}, {"tags": ["android", "kotlin", "android-camera", "android-gallery"], "comments": [{"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 1, "creation_date": 1559640302, "post_id": 56440869, "comment_id": 99475379, "body": "Go through <a href=\"https://infinum.co/the-capsized-eight/share-files-using-fileprovider\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 6818, "user_id": 1282166, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Hd0XQ.jpg?s=128&g=1", "display_name": "Shudy", "link": "https://stackoverflow.com/users/1282166/shudy"}, "reply_to_user": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 0, "creation_date": 1559642381, "post_id": 56440869, "comment_id": 99476521, "body": "Thanks for the link @HemantParmar ! good explanation"}], "answers": [{"tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": false, "score": 0, "last_activity_date": 1559644940, "creation_date": 1559644940, "answer_id": 56442277, "question_id": 56440869, "link": "https://stackoverflow.com/questions/56440869/take-picture-save-into-gallery-and-pick-the-uri-in-android/56442277#56442277", "title": "Take picture, save into Gallery and pick the Uri in Android", "body": "<blockquote>\n  <p>I get this error:</p>\n</blockquote>\n\n<p><code>path</code> is relative to the base location defined in the element name. Use:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;paths&gt;\n    &lt;external-files-path\n        name=\"my_images\"\n        path=\"Pictures\" /&gt;\n&lt;/paths&gt;\n</code></pre>\n\n<blockquote>\n  <p>BUT, in the onActivityResult, the intent arrives null</p>\n</blockquote>\n\n<p>It's supposed to be <code>null</code>. You know where the image is supposed to be: in the location identified by <code>photoFile</code>. Look for it there. See <a href=\"https://github.com/commonsguy/cw-omnibus/tree/FINAL/Camera/FileProvider\" rel=\"nofollow noreferrer\">this sample app</a> for an example of using <code>FileProvider</code> with <code>ACTION_IMAGE_CAPTURE</code>.</p>\n"}], "owner": {"reputation": 6818, "user_id": 1282166, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Hd0XQ.jpg?s=128&g=1", "display_name": "Shudy", "link": "https://stackoverflow.com/users/1282166/shudy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 908, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559644940, "creation_date": 1559639576, "last_edit_date": 1559642398, "question_id": 56440869, "link": "https://stackoverflow.com/questions/56440869/take-picture-save-into-gallery-and-pick-the-uri-in-android", "title": "Take picture, save into Gallery and pick the Uri in Android", "body": "<p>I'm trying to launch the camera to take a picture, then save it into gallery and recover the Uri, to show it into image view.</p>\n\n<p>With this, later on I will send it to FirebaseStorage.</p>\n\n<p>(I simplified names of variables and methods to do ir more readable)</p>\n\n<p>At this moment I got the click action that checks the permissions needed.</p>\n\n<pre><code>button.setOnClickListener {\n            val permissions = arrayOf(\n                Manifest.permission.CAMERA,\n                Manifest.permission.WRITE_EXTERNAL_STORAGE,\n                Manifest.permission.READ_EXTERNAL_STORAGE\n            )\n\n            Permissions.check(context!!, permissions, null, null, object : PermissionHandler() {\n                override fun onGranted() {\n                    dispatchTakePictureIntent()\n                }\n            })\n        }\n\n\nprivate fun dispatchTakePictureIntent() {\n        Intent(MediaStore.ACTION_IMAGE_CAPTURE).also { takePictureIntent -&gt;\n            takePictureIntent.resolveActivity(context!!.packageManager)?.also {\n                val photoFile: File? = try {\n                    createImageFile()\n                } catch (ex: IOException) {\n                    // Error occurred while creating the File\n                    Log.d(\"PictureIntent\", \"Error trying to get file\")\n                    null\n                }\n                photoFile?.also {\n                    val photoURI: Uri = FileProvider.getUriForFile(\n                        context!!,\n                        \"com.elias.myapplication.fileprovider\",\n                        it\n                    )\n                    takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI)\n                    activity!!.startActivityForResult(takePictureIntent, REQUEST_IMAGE_CAPTURE)\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p>Following the documentation of google, in Manifest I added the declaration of FileProvider like this:</p>\n\n<pre><code>&lt;provider\n    android:name=\"androidx.core.content.FileProvider\"\n    android:authorities=\"${applicationId}.fileprovider\"\n    android:exported=\"false\"\n    android:grantUriPermissions=\"true\"&gt;\n    &lt;meta-data\n         android:name=\"android.support.FILE_PROVIDER_PATHS\"\n         android:resource=\"@xml/file_paths\"/&gt;\n&lt;/provider&gt;\n</code></pre>\n\n<p>And here is where all the problems come...</p>\n\n<p>In the xml file <code>file_paths</code> if I put the path like example :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;paths&gt;\n    &lt;external-files-path\n        name=\"my_images\"\n        path=\"/storage/emulated/0/Android/data/com.elias.myapplication/files/Pictures/\" /&gt;\n&lt;/paths&gt;\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>Process: com.elias.myapplication, PID: 24093\n    java.lang.NullPointerException: Attempt to invoke virtual method 'android.content.res.XmlResourceParser android.content.pm.ProviderInfo.loadXmlMetaData(android.content.pm.PackageManager, java.lang.String)' on a null object reference\n        at androidx.core.content.FileProvider.parsePathStrategy(FileProvider.java:605)\n        at androidx.core.content.FileProvider.getPathStrategy(FileProvider.java:579)\n        at androidx.core.content.FileProvider.getUriForFile(FileProvider.java:417)\n        at com.elias.myapplication.ui.main.MainFragment.dispatchTakePictureIntent(MainFragment.kt:76)\n        at com.elias.myapplication.ui.main.MainFragment.access$dispatchTakePictureIntent(MainFragment.kt:28)\n        at com.elias.myapplication.ui.main.MainFragment$onViewCreated$1$1.onGranted(MainFragment.kt:59)\n        at com.nabinbhandari.android.permissions.Permissions.check(Permissions.java:105)\n        at com.el.myapplication.ui.main.MainFragment$onViewCreated$1.onClick(MainFragment.kt:57)\n        at android.view.View.performClick(View.java:7333)\n        at android.widget.TextView.performClick(TextView.java:14160)\n        at android.view.View.performClickInternal(View.java:7299)\n        at android.view.View.access$3200(View.java:846)\n        at android.view.View$PerformClick.run(View.java:27773)\n        at android.os.Handler.handleCallback(Handler.java:873)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:214)\n        at android.app.ActivityThread.main(ActivityThread.java:6981)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1445)\n</code></pre>\n\n<p>Reading more question on SO, i found a \"solution\". Modify the xml file with this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;paths&gt;\n  &lt;external-path\n    name=\"external\"\n    path=\".\" /&gt;\n  &lt;external-files-path\n    name=\"external_files\"\n    path=\".\" /&gt;\n  &lt;cache-path\n    name=\"cache\"\n    path=\".\" /&gt;\n  &lt;external-cache-path\n    name=\"external_cache\"\n    path=\".\" /&gt;\n&lt;files-path\n    name=\"files\"\n    path=\".\" /&gt;\n&lt;/paths&gt;\n</code></pre>\n\n<p>With this solution doesn't crash, BUT, in the <code>onActivityResult</code>, the intent arrives <code>null</code></p>\n\n<p>And here is where I'm lost.</p>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["android", "kotlin", "autocompletetextview"], "comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1559639861, "post_id": 56440768, "comment_id": 99475139, "body": "You forget to add stacktrace of exception .."}, {"owner": {"reputation": 20928, "user_id": 863257, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jjP5j.jpg?s=128&g=1", "display_name": "Nikunj Patel", "link": "https://stackoverflow.com/users/863257/nikunj-patel"}, "reply_to_user": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1559641045, "post_id": 56440768, "comment_id": 99475810, "body": "@ADM Added please check"}], "answers": [{"tags": [], "owner": {"reputation": 316, "user_id": 3402004, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001632616293/picture?type=large", "display_name": "Bram Jongebloet", "link": "https://stackoverflow.com/users/3402004/bram-jongebloet"}, "is_accepted": true, "score": 1, "last_activity_date": 1559641651, "creation_date": 1559641651, "answer_id": 56441428, "question_id": 56440768, "link": "https://stackoverflow.com/questions/56440768/autocompletetextviewappcompat-issue-while-no-character-kotlin/56441428#56441428", "title": "AutoCompleteTextView(AppCompat) issue while no character (Kotlin)", "body": "<pre><code>protected override fun publishResults(constraint: CharSequence, results: FilterResults?) {\n                    if (results != null &amp;&amp; results!!.count &gt; 0) {\n                        notifyDataSetChanged()\n                    } else\n                    {\n                    }\n                }\n</code></pre>\n\n<p>constraint: CharSequence . &lt;-- in this method is defined as nonNullable CharSequence. But your providing a null as CharSequence. </p>\n\n<p>What will probably fix your issue is</p>\n\n<pre><code>protected override fun publishResults(constraint: CharSequence?, results: FilterResults?) {\n                    if (results != null &amp;&amp; results!!.count &gt; 0) {\n                        notifyDataSetChanged()\n                    } else\n                    {\n                    }\n    }\n</code></pre>\n\n<p>Just add a ? behind CharSequence. Now you defined that it's possible for constraint to be null</p>\n"}], "owner": {"reputation": 20928, "user_id": 863257, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jjP5j.jpg?s=128&g=1", "display_name": "Nikunj Patel", "link": "https://stackoverflow.com/users/863257/nikunj-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 1, "accepted_answer_id": 56441428, "answer_count": 1, "score": 0, "last_activity_date": 1559641651, "creation_date": 1559639212, "last_edit_date": 1559641013, "question_id": 56440768, "link": "https://stackoverflow.com/questions/56440768/autocompletetextviewappcompat-issue-while-no-character-kotlin", "title": "AutoCompleteTextView(AppCompat) issue while no character (Kotlin)", "body": "<p>I am using AutoCompleteTextView(AppCompat) by ArrayAdapter. I am getting result successfully when I type some character. But when I remove first character of this component, it consider null object in filter and giving me null pointer exception.</p>\n\n<p><strong>What I tried so far</strong></p>\n\n<ol>\n<li>From few old post I found that <code>setThreshold</code> can be solution, but its not working.</li>\n<li>I customized AppCompat's AutoCompleteTextView class and try to handle <code>replaceText</code> and <code>performFiltering</code> but its not working.</li>\n<li>I try to restrict backspace on 1st character by adding <code>setOnKeyListener</code>, but its not getting called because its totally controlled by <code>Filter</code> class after having some result in cache.</li>\n<li>Customize <code>android.widget.filter</code> class, but its not allowed by OS, as its restricted by Android OS to use out of Package.</li>\n</ol>\n\n<p><strong>Code :</strong> </p>\n\n<pre><code>class MyAutoCompleteTextView(context: Context?, attrs: AttributeSet?) : AppCompatAutoCompleteTextView(context, attrs) {\n\n    override fun replaceText(text: CharSequence?) {\n        super.replaceText(\"\")\n    }\n\n    override fun performFiltering(text: CharSequence?, keyCode: Int) {\n        super.performFiltering(\"\", keyCode)\n    }\n}\n</code></pre>\n\n<p><em>XML :</em> </p>\n\n<pre><code>&lt;com.spec.trailapp.utils.taglibs.MyAutoCompleteTextView\n    android:id=\"@+id/autocomplTagged\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_alignParentTop=\"true\"\n    android:layout_margin=\"10dp\"\n    android:inputType=\"text\"\n    android:textCursorDrawable=\"@drawable/color_cursor\"\n    android:background=\"@null\"\n    android:completionThreshold=\"1\"\n\n    android:fontFamily=\"@font/brandotextlight\"\n    android:hint=\"@string/txt_who_did_you_go_with\"\n    android:textColorHint=\"@color/itinerary_title_txt_color\"\n    android:textColor=\"@color/colorBlack\"\n    android:maxLines=\"1\"/&gt;\n</code></pre>\n\n<p><em>Adapter</em> </p>\n\n<pre><code>class AutoSuggestAdapter(@NonNull context: Context, resource: Int) : ArrayAdapter&lt;String&gt;(context, resource),\n    Filterable {\n        private val mlistData: MutableList&lt;String&gt;\n        var alLocalresult: ArrayList&lt;ResultItem?&gt; = ArrayList&lt;ResultItem?&gt;()\n\n        init {\n            mlistData = ArrayList()\n        }\n\n        fun setData(result: ArrayList&lt;ResultItem&gt;) {\n            /*mlistData.clear()\n            mlistData.addAll(list)*/\n\n            if (result != null) {\n                this.alLocalresult.addAll(result)\n            }\n        }\n\n        override fun getCount(): Int {\n            if(alLocalresult==null)\n            {\n                return 0\n            } else\n                return alLocalresult.size\n        }\n\n        override fun getItem(position: Int): String {\n            return alLocalresult.get(position)?.firstName + \" \" + alLocalresult.get(position)?.lastName\n            // return result\n        }\n\n        /**\n         * Used to Return the full object directly from adapter.\n         *\n         * @param position\n         * @return\n         */\n        /*fun getObject(position: Int): String {\n            return mlistData[position]\n        }*/\n\n        @NonNull\n        override fun getFilter(): Filter {\n            return object : Filter() {\n                protected override fun performFiltering(constraint: CharSequence?): FilterResults {\n                    val filterResults = FilterResults()\n                    if (constraint != null) {\n                        filterResults.values = alLocalresult\n                        filterResults.count = alLocalresult.size\n\n                    }\n                    return filterResults\n                }\n\n                protected override fun publishResults(constraint: CharSequence, results: FilterResults?) {\n                    if (results != null &amp;&amp; results!!.count &gt; 0) {\n                        notifyDataSetChanged()\n                    } else\n                    {\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p><em>MainAvtivity :</em></p>\n\n<pre><code>var autoSuggestAdapter = AutoSuggestAdapter(\n    this,\n    android.R.layout.simple_dropdown_item_1line\n)\nautocomplTagged.setThreshold(1)\nautocomplTagged.setAdapter(autoSuggestAdapter)\nautoSuggestAdapter.setData(frindslist.data!!.result!!)\n</code></pre>\n\n<p><em>Crash Log</em></p>\n\n<pre><code>java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter constraint\n        at com.spec.trailapp.utils.taglibs.AutoSuggestAdapter$getFilter$1.publishResults(AutoSuggestAdapter.kt)\n        at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:282)\n        at android.os.Handler.dispatchMessage(Handler.java:102)\n        at android.os.Looper.loop(Looper.java:154)\n        at android.app.ActivityThread.main(ActivityThread.java:6123)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:757)\n</code></pre>\n\n<p>Please help on this. Even some clue will be niice for me.</p>\n"}, {"tags": ["dictionary", "kotlin", "delegates", "observable", "concurrenthashmap"], "comments": [{"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1559639287, "post_id": 56440641, "comment_id": 99474820, "body": "How does <code>MyObservable</code> look like?"}, {"owner": {"reputation": 4613, "user_id": 784766, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc5a8416823b374a9ad4a06b7eb8ba63?s=128&d=identicon&r=PG", "display_name": "Gabrielle", "link": "https://stackoverflow.com/users/784766/gabrielle"}, "reply_to_user": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1559639382, "post_id": 56440641, "comment_id": 99474879, "body": "@AdamArold it is in my question."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1559639489, "post_id": 56440641, "comment_id": 99474942, "body": "Oh, sorry I see it"}], "answers": [{"comments": [{"owner": {"reputation": 4613, "user_id": 784766, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc5a8416823b374a9ad4a06b7eb8ba63?s=128&d=identicon&r=PG", "display_name": "Gabrielle", "link": "https://stackoverflow.com/users/784766/gabrielle"}, "edited": false, "score": 0, "creation_date": 1559644792, "post_id": 56440898, "comment_id": 99477783, "body": "Thank you, it works very nice. One more question: I have this cache on service layer (it is a java-library module). I need to send these notifications (when is added, updated or removed) to presentation layer (android-layer), in a viewModel. The only solution I see is to use listeners. Is it possible using this decorator to inform the UI about these changes? The service layer doesn&#39;t know about the presentation layer, only the presentation layer knows about service layer."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 4613, "user_id": 784766, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc5a8416823b374a9ad4a06b7eb8ba63?s=128&d=identicon&r=PG", "display_name": "Gabrielle", "link": "https://stackoverflow.com/users/784766/gabrielle"}, "edited": false, "score": 0, "creation_date": 1559645216, "post_id": 56440898, "comment_id": 99478001, "body": "I&#39;d use an event bus probably. Have you tried <a href=\"https://android.jlelse.eu/rxbus-kotlin-listen-where-ever-you-want-e6fc0760a4a8\" rel=\"nofollow noreferrer\">this one</a>?"}, {"owner": {"reputation": 4613, "user_id": 784766, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc5a8416823b374a9ad4a06b7eb8ba63?s=128&d=identicon&r=PG", "display_name": "Gabrielle", "link": "https://stackoverflow.com/users/784766/gabrielle"}, "edited": false, "score": 0, "creation_date": 1559647131, "post_id": 56440898, "comment_id": 99478960, "body": "No, I must to implement with no libraries."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 4613, "user_id": 784766, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc5a8416823b374a9ad4a06b7eb8ba63?s=128&d=identicon&r=PG", "display_name": "Gabrielle", "link": "https://stackoverflow.com/users/784766/gabrielle"}, "edited": false, "score": 0, "creation_date": 1559647572, "post_id": 56440898, "comment_id": 99479186, "body": "You can write one easily. <a href=\"https://github.com/Hexworks/cobalt/tree/master/cobalt.events/common/src/main/kotlin/org/hexworks/cobalt/events/api\" rel=\"nofollow noreferrer\">Here</a> is an example."}], "tags": [], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "is_accepted": true, "score": 3, "last_activity_date": 1559639668, "creation_date": 1559639668, "answer_id": 56440898, "question_id": 56440641, "link": "https://stackoverflow.com/questions/56440641/observable-on-map-to-detect-when-is-added-updated-of-deleted-an-entry/56440898#56440898", "title": "Observable on map to detect when is added, updated of deleted an entry", "body": "<p>The problem is that <code>Map</code> is not a property, you can't use property delegates this way. What you have to do is to write a decorator for <code>Map</code> like this:</p>\n\n<pre><code>class ObservableMap&lt;K, V&gt;(private val map: MutableMap&lt;K, V&gt;) : MutableMap&lt;K, V&gt; by map {\n\n    override fun put(key: K, value: V): V? {\n        TODO(\"not implemented\")\n    }\n\n    override fun putAll(from: Map&lt;out K, V&gt;) {\n        TODO(\"not implemented\")\n    }\n\n    override fun remove(key: K): V? {\n        TODO(\"not implemented\")\n    }\n\n}\n</code></pre>\n\n<p>Here we delegate all operations to the backing <code>map</code> and you just only have to implement your logic when adding/deleting in the methods above.</p>\n\n<p>I'm not sure what you mean by <code>update</code> but if you mean \"a value in the map gets overwritten\" than you can handle it in <code>put</code>.</p>\n\n<p>You can use this <code>ObservableMap</code> like this:</p>\n\n<pre><code>val map = ObservableMap(ConcurrentHashMap&lt;String, String&gt;())\n</code></pre>\n\n<p>Note that if you want to support the operations of <code>ConcurrentHashMap</code> you also need to include <code>overrides</code> for <code>AbstractMap&lt;K,V&gt;</code> and <code>ConcurrentMap&lt;K,V&gt;</code> since they add some new operations you might want to track. The code above is just an example.</p>\n"}], "owner": {"reputation": 4613, "user_id": 784766, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dc5a8416823b374a9ad4a06b7eb8ba63?s=128&d=identicon&r=PG", "display_name": "Gabrielle", "link": "https://stackoverflow.com/users/784766/gabrielle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 56440898, "answer_count": 1, "score": 1, "last_activity_date": 1559639668, "creation_date": 1559638858, "question_id": 56440641, "link": "https://stackoverflow.com/questions/56440641/observable-on-map-to-detect-when-is-added-updated-of-deleted-an-entry", "title": "Observable on map to detect when is added, updated of deleted an entry", "body": "<p>I have a map, in my case a <code>ConcurrentHashMap&lt;String, Device&gt;</code> which is updating when receiving some events on websocket. I want to implement an observable on this map to know when an entry is added, updated or deleted. I tried with an <code>ObservableProperty</code> but no methods are called when map is changed. </p>\n\n<pre><code>var deviceCache : ConcurrentHashMap&lt;String, Device&gt; by MyObservable(ConcurrentHashMap())\n\n class MyObservable&lt;T, V&gt;(initialValue: ConcurrentHashMap&lt;T, V&gt;) : ObservableProperty&lt;ConcurrentHashMap&lt;T, V&gt;&gt;(initialValue) {\noverride fun afterChange(property: KProperty&lt;*&gt;, oldValue: ConcurrentHashMap&lt;T, V&gt;, newValue: ConcurrentHashMap&lt;T, V&gt;) {\n  super.afterChange(property, oldValue, newValue)\n  log.e(\"new value is $newValue\")\n}\n\noverride fun beforeChange(property: KProperty&lt;*&gt;, oldValue: ConcurrentHashMap&lt;T, V&gt;, newValue: ConcurrentHashMap&lt;T, V&gt;): Boolean {\n  log.e(\"beforeChange called\")\n  return super.beforeChange(property, oldValue, newValue)\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Can anyone help me how can I solve this?</p>\n"}, {"tags": ["android", "kotlin", "msal"], "answers": [{"tags": [], "owner": {"reputation": 1527, "user_id": 3649894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e4074181c04268447f2d8c5b691e584?s=128&d=identicon&r=PG&f=1", "display_name": "kobowo", "link": "https://stackoverflow.com/users/3649894/kobowo"}, "is_accepted": true, "score": 0, "last_activity_date": 1559836624, "creation_date": 1559836624, "answer_id": 56481214, "question_id": 56440142, "link": "https://stackoverflow.com/questions/56440142/service-not-registered-on-microsoft-authentication-library-android/56481214#56481214", "title": "Service Not Registered on Microsoft Authentication Library (Android)", "body": "<p>I found a workaround for those who might be having the same problem as mine. I was originally using the default method for handling the authentication process (Via Intents and the BrowserTab). </p>\n\n<p>Another method to authenticate would be to edit the <code>auth_config.json</code> file in the <code>Raw</code> folder and change the user agent to this <code>\"authorization_user_agent\": \"WEBVIEW\"</code>. You'll have to work with a WebView instead of the browser but it does prevent the app from crashing. You also won't need the intent filters in the <code>AndroidManifest</code> file if you're gonna go this route.</p>\n\n<p>PS: I'm still unable to pinpoint what caused my phone specifically to crash though. I was able to test my app on a Galaxy S9 and also on emulators and they all work. My personal phone used to work until recently and is what prompted me to post here. If I find the cause I'll update this answer.</p>\n"}], "owner": {"reputation": 1527, "user_id": 3649894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e4074181c04268447f2d8c5b691e584?s=128&d=identicon&r=PG&f=1", "display_name": "kobowo", "link": "https://stackoverflow.com/users/3649894/kobowo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 56481214, "answer_count": 1, "score": 0, "last_activity_date": 1559836624, "creation_date": 1559637054, "question_id": 56440142, "link": "https://stackoverflow.com/questions/56440142/service-not-registered-on-microsoft-authentication-library-android", "title": "Service Not Registered on Microsoft Authentication Library (Android)", "body": "<p>I'm using a modified version of the example app from the MSAL Android library and for the past few weeks it worked like a charm but just yesterday it started crashing on me giving me this error:</p>\n\n<blockquote>\n  <p>2019-06-04 15:22:07.807 20645-20645/com.example.myApp E/AndroidRuntime: FATAL </p>\n  \n  <p>EXCEPTION: main\n      Process: com.example.myApp, PID: 20645\n      java.lang.RuntimeException: Unable to resume activity {com.example.myApp/com.example.myApp.Activities.LoginActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1001, result=2003, data=Intent { (has extras) }} to activity {com.example.myApp/com.example.myApp.Activities.LoginActivity}: java.lang.IllegalArgumentException: Service not registered: com.microsoft.identity.common.internal.ui.browser.CustomTabsManager$1@f965d28\n          at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3961)\n          at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3993)\n          at android.app.servertransaction.ResumeActivityItem.execute(ResumeActivityItem.java:51)\n          at android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:145)\n          at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:70)\n          at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1934)\n          at android.os.Handler.dispatchMessage(Handler.java:106)\n          at android.os.Looper.loop(Looper.java:193)\n          at android.app.ActivityThread.main(ActivityThread.java:6940)\n          at java.lang.reflect.Method.invoke(Native Method)\n          at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:537)\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n       Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1001, result=2003, data=Intent { (has extras) }} to activity {com.example.myApp/com.example.myApp.Activities.LoginActivity}: java.lang.IllegalArgumentException: Service not registered: com.microsoft.identity.common.internal.ui.browser.CustomTabsManager$1@f965d28</p>\n</blockquote>\n\n<p>I haven't changed anything with the logic of how the example app works. The only thing I did was move the logic of logging in into a separate static class.</p>\n\n<p>The code still works with most phones and even on emulators but I can't get it to work anymore with my Oneplus 6. Has anyone encountered this before?</p>\n\n<p>It's just weird because I haven't changed anything and it started to stop working all of a sudden.</p>\n\n<p>This line of code causes the crash: </p>\n\n<pre><code> override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    app?.handleInteractiveRequestRedirect(requestCode, resultCode, data)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11597704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lCdC3uSqFCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reEQIZfaiCqYWTp8RVZRPZIov34ow/mo/photo.jpg?sz=128", "display_name": "Badr Kouki", "link": "https://stackoverflow.com/users/11597704/badr-kouki"}, "edited": false, "score": 0, "creation_date": 1559636874, "post_id": 56440047, "comment_id": 99473593, "body": "val getall: List&lt;User&gt; also should be val getall: List&lt;UserTable&gt; ?"}, {"owner": {"reputation": 1442, "user_id": 11288846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NDoB.png?s=128&g=1", "display_name": "Ferran", "link": "https://stackoverflow.com/users/11288846/ferran"}, "reply_to_user": {"reputation": 3, "user_id": 11597704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lCdC3uSqFCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reEQIZfaiCqYWTp8RVZRPZIov34ow/mo/photo.jpg?sz=128", "display_name": "Badr Kouki", "link": "https://stackoverflow.com/users/11597704/badr-kouki"}, "edited": false, "score": 0, "creation_date": 1559637520, "post_id": 56440047, "comment_id": 99473887, "body": "Glad to help. However, let me advise you to change some names. It&#39;s better to change <code>UserTable</code> to <code>User_entity</code> and <code>user</code> to <code>user_table</code>. I think it&#39;s more readable."}], "tags": [], "owner": {"reputation": 1442, "user_id": 11288846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NDoB.png?s=128&g=1", "display_name": "Ferran", "link": "https://stackoverflow.com/users/11288846/ferran"}, "is_accepted": true, "score": 1, "last_activity_date": 1559636941, "last_edit_date": 1559636941, "creation_date": 1559636718, "answer_id": 56440047, "question_id": 56439942, "link": "https://stackoverflow.com/questions/56439942/type-of-the-parameter-must-be-a-class-annotated-with-entity/56440047#56440047", "title": "Type of the parameter must be a class annotated with @Entity", "body": "<p>You are mixing <code>user</code> and <code>UserTable</code>. <code>User</code> is valid for referencing your table, but your entity is <code>UserTable</code></p>\n\n<pre><code>@Dao\nabstract interface UserDao\n{\n@get:Query(\"SELECT * FROM user\")\nval getall: List&lt;UserTable&gt;\n\n@Query(\"SELECT * FROM user where name LIKE  :name AND login LIKE :login\")\nfun findByName(name: String, login: String): UserTable\n\n@Query(\"SELECT COUNT(*) from user\")\nfun countUsers(): Int\n\n@Insert\nfun insertAll(users: List&lt;UserTable&gt;)\n\n@Delete\nfun delete(vararg user: UserTable)\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11597704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lCdC3uSqFCw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reEQIZfaiCqYWTp8RVZRPZIov34ow/mo/photo.jpg?sz=128", "display_name": "Badr Kouki", "link": "https://stackoverflow.com/users/11597704/badr-kouki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 56440047, "answer_count": 1, "score": 0, "last_activity_date": 1559636941, "creation_date": 1559636247, "last_edit_date": 1559636737, "question_id": 56439942, "link": "https://stackoverflow.com/questions/56439942/type-of-the-parameter-must-be-a-class-annotated-with-entity", "title": "Type of the parameter must be a class annotated with @Entity", "body": "<p>I'm working with Room persistance databases in android but i get this error \n<strong>error: Type of the parameter must be a class annotated with @Entity or a collection/array of it.\n    test.android.orca.com.ws2db.Models.User... user);</strong>\nPlease help me</p>\n\n<p><strong>This is my DAO :</strong></p>\n\n<pre><code>@Dao\nabstract interface UserDao\n{\n@get:Query(\"SELECT * FROM user\")\nval getall: List&lt;User&gt;\n\n@Query(\"SELECT * FROM user where name LIKE  :name AND login LIKE :login\")\nfun findByName(name: String, login: String): User\n\n@Query(\"SELECT COUNT(*) from user\")\nfun countUsers(): Int\n\n@Insert\nfun insertAll(users: List&lt;User&gt;)\n\n@Delete\nfun delete(vararg user: User)\n}\n</code></pre>\n\n<p><strong>This is my Entity</strong></p>\n\n<pre><code>@Entity(tableName = \"user\")\nclass UserTable {\n\n@PrimaryKey(autoGenerate = true)\nvar uid: Int = 0\n\n@ColumnInfo(name = \"name\")\nvar name: String? = null\n\n@ColumnInfo(name = \"login\")\nvar login: String? = null\n\n@ColumnInfo(name = \"id\")\nvar id: Int = 0\n\n@ColumnInfo(name=\"url\")\nvar url: String? = null\n\n@ColumnInfo(name=\"company\")\nvar company:String?=null\n\n}\n</code></pre>\n\n<p><strong>Database</strong></p>\n\n<pre><code>@Database(entities = [UserTable::class], version = 1)\nabstract class AppDatabase : RoomDatabase() {\n\nabstract fun userDao(): UserDao\n\ncompanion object {\n\n    private var INSTANCE: AppDatabase? = null\n\n    fun getAppDatabase(context: Context): AppDatabase? {\n        if (INSTANCE == null) {\n            INSTANCE = Room.databaseBuilder(context.applicationContext, \n             AppDatabase::class.java, \"user-database\")\n                .allowMainThreadQueries()\n                .build()\n        }\n        return INSTANCE\n    }\n\n    fun destroyInstance() {\n        INSTANCE = null\n    }\n}}\n</code></pre>\n\n<p>This is the error : <a href=\"https://i.stack.imgur.com/FnECR.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/FnECR.jpg</a></p>\n"}, {"tags": ["android", "kotlin", "progress-bar", "objectanimator"], "comments": [{"owner": {"reputation": 966, "user_id": 10970473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P2gU1.jpg?s=128&g=1", "display_name": "Dinesh Shingadiya", "link": "https://stackoverflow.com/users/10970473/dinesh-shingadiya"}, "edited": false, "score": 0, "creation_date": 1559631579, "post_id": 56438752, "comment_id": 99471211, "body": "what you use for <code>progressbar</code> ?"}, {"owner": {"reputation": 966, "user_id": 10970473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P2gU1.jpg?s=128&g=1", "display_name": "Dinesh Shingadiya", "link": "https://stackoverflow.com/users/10970473/dinesh-shingadiya"}, "edited": false, "score": 0, "creation_date": 1559631602, "post_id": 56438752, "comment_id": 99471228, "body": "I mean <code>SeekBar</code> or <code>ProgressBar</code>"}, {"owner": {"reputation": 2874, "user_id": 9522732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/srrqm.jpg?s=128&g=1", "display_name": "Uni", "link": "https://stackoverflow.com/users/9522732/uni"}, "reply_to_user": {"reputation": 966, "user_id": 10970473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P2gU1.jpg?s=128&g=1", "display_name": "Dinesh Shingadiya", "link": "https://stackoverflow.com/users/10970473/dinesh-shingadiya"}, "edited": false, "score": 0, "creation_date": 1559635182, "post_id": 56438752, "comment_id": 99472858, "body": "@DineshShingadiya its for telling the user the progress like load menu"}], "answers": [{"comments": [{"owner": {"reputation": 2874, "user_id": 9522732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/srrqm.jpg?s=128&g=1", "display_name": "Uni", "link": "https://stackoverflow.com/users/9522732/uni"}, "edited": false, "score": 0, "creation_date": 1559635676, "post_id": 56439063, "comment_id": 99473081, "body": "Thanks for trying to help me out but what I am using is a progressbar not a seekbar"}], "tags": [], "owner": {"reputation": 3061, "user_id": 10159898, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5mqHUyc2x6w/AAAAAAAAAAI/AAAAAAAAD1g/QPOjkkQJ8Qw/photo.jpg?sz=128", "display_name": "Bruno", "link": "https://stackoverflow.com/users/10159898/bruno"}, "is_accepted": false, "score": 1, "last_activity_date": 1559632515, "creation_date": 1559632515, "answer_id": 56439063, "question_id": 56438752, "link": "https://stackoverflow.com/questions/56438752/how-to-update-textview-value-based-on-progressbar-progress-in-kotlin/56439063#56439063", "title": "How to update textview value based on progressbar progress in Kotlin", "body": "<p>Not sure you can be able to do this with the animation.</p>\n\n<p>But you can use the <a href=\"https://developer.android.com/reference/android/widget/SeekBar.OnSeekBarChangeListener\" rel=\"nofollow noreferrer\">SeekBar.OnSeekBarChangeListener</a></p>\n"}, {"comments": [{"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "reply_to_user": {"reputation": 2874, "user_id": 9522732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/srrqm.jpg?s=128&g=1", "display_name": "Uni", "link": "https://stackoverflow.com/users/9522732/uni"}, "edited": false, "score": 1, "creation_date": 1559642205, "post_id": 56439252, "comment_id": 99476448, "body": "@TechMaxed, <code>TextView.setText(int)</code> method accepts string resource id (like <code>R.string.text</code>). To set number as a text use <code>TextView.text = progress.toString()</code>"}, {"owner": {"reputation": 16463, "user_id": 115890, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7BJ2g.jpg?s=128&g=1", "display_name": "ibrahimyilmaz", "link": "https://stackoverflow.com/users/115890/ibrahimyilmaz"}, "edited": false, "score": 0, "creation_date": 1559655482, "post_id": 56439252, "comment_id": 99483685, "body": "or TextView.text = &quot;$progress&quot;"}], "tags": [], "owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "is_accepted": true, "score": 2, "last_activity_date": 1559647171, "last_edit_date": 1559647171, "creation_date": 1559633277, "answer_id": 56439252, "question_id": 56438752, "link": "https://stackoverflow.com/questions/56438752/how-to-update-textview-value-based-on-progressbar-progress-in-kotlin/56439252#56439252", "title": "How to update textview value based on progressbar progress in Kotlin", "body": "<p>With <code>ObjectAnimator</code> you can use an update listener:</p>\n\n<pre><code>    animation.addUpdateListener(object: ValueAnimator.AnimatorUpdateListener {\n        override fun onAnimationUpdate(animation: ValueAnimator?) {\n            val progress = animation?.animatedValue as Int\n            // Update you text view\n        }\n    })\n</code></pre>\n\n<p>Here in <code>onAnimationUpdate</code> you can get animated value or progress bar progress depending on what you need and set it to your text view.</p>\n"}], "owner": {"reputation": 2874, "user_id": 9522732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/srrqm.jpg?s=128&g=1", "display_name": "Uni", "link": "https://stackoverflow.com/users/9522732/uni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "accepted_answer_id": 56439252, "answer_count": 2, "score": 1, "last_activity_date": 1559647171, "creation_date": 1559631121, "last_edit_date": 1559637917, "question_id": 56438752, "link": "https://stackoverflow.com/questions/56438752/how-to-update-textview-value-based-on-progressbar-progress-in-kotlin", "title": "How to update textview value based on progressbar progress in Kotlin", "body": "<p>I would like to use <code>ObjectAnimator</code> to animate by <code>ProgressBar</code> progress. However, I wouldn't be able to update the text since I am not using a for loop. What is the best way to update the <code>Textview</code> while using <code>ObjectAnimator</code>? Here is what I've tried to update it but I failed to do so:</p>\n\n<pre><code>val animation = ObjectAnimator.ofInt(progressbar, \"progress\", 0, 10000)\n   animation.setDuration(2000)\n   animation.setInterpolator(DecelerateInterpolator())\n   animation.start()\n   var progress=progressbar.getProgress() /100\n   progtxt.text=\"$progress%\"\n</code></pre>\n"}, {"tags": ["android", "google-maps", "kotlin"], "comments": [{"owner": {"reputation": 11935, "user_id": 6950238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JysE9.jpg?s=128&g=1", "display_name": "Andrii Omelchenko", "link": "https://stackoverflow.com/users/6950238/andrii-omelchenko"}, "edited": false, "score": 1, "creation_date": 1559635312, "post_id": 56438569, "comment_id": 99472911, "body": "Probably there is no way from origin to destination via waypoints set. Can you share  full URL from line <code>System.out.println(&quot;map url: &quot;+url);</code> (without KEY of course)?"}, {"owner": {"reputation": 6009, "user_id": 132127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/TnwQX.jpg?s=128&g=1", "display_name": "anta40", "link": "https://stackoverflow.com/users/132127/anta40"}, "reply_to_user": {"reputation": 11935, "user_id": 6950238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JysE9.jpg?s=128&g=1", "display_name": "Andrii Omelchenko", "link": "https://stackoverflow.com/users/6950238/andrii-omelchenko"}, "edited": false, "score": 0, "creation_date": 1559730690, "post_id": 56438569, "comment_id": 99509149, "body": "@AndriiOmelchenko Please check this 2 URLs: <a href=\"https://maps.googleapis.com/maps/api/directions/json?origin=-6.2684059,106.8103103&amp;waypoints=optimize:true|-6.263459,106.815903|-6.240607,106.792831|-6.263459,106.815903&amp;destination=-6.240607,106.792831&amp;sensor=false&amp;key=\" rel=\"nofollow noreferrer\">maps.googleapis.com/maps/api/directions/&hellip;</a>..... and <a href=\"https://maps.googleapis.com/maps/api/directions/json?origin=-6.2684059,106.8103103&amp;waypoints=optimize:true%7C-6.263459,106.815903%7C-6.240607,106.792831%7C-6.240607,106.792831&amp;destination=-6.235759,6.823277&amp;sensor=false&amp;key=\" rel=\"nofollow noreferrer\">maps.googleapis.com/maps/api/directions/&hellip;</a>..... The first one works, the second doesn&#39;t. All the positions refer to valid locations in Jakarta."}], "answers": [{"tags": [], "owner": {"reputation": 11935, "user_id": 6950238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JysE9.jpg?s=128&g=1", "display_name": "Andrii Omelchenko", "link": "https://stackoverflow.com/users/6950238/andrii-omelchenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1559733901, "creation_date": 1559733901, "answer_id": 56459558, "question_id": 56438569, "link": "https://stackoverflow.com/questions/56438569/how-to-draw-route-from-a-to-b-through-multiple-points-on-googlemaps/56459558#56459558", "title": "How to draw route from A to B through multiple points on GoogleMaps?", "body": "<p>There is no way from origin to destination via waypoints set. The second URL:</p>\n\n<p><code>https://maps.googleapis.com/maps/api/directions/json?origin=-6.2684059,106.8103103&amp;waypoints=optimize:true%7C-6.263459,106.815903%7C-6.240607,106.792831%7C-6.240607,106.792831&amp;destination=-6.235759,6.823277&amp;sensor=false&amp;key=&lt;YOUR_KEY&gt;</code></p>\n\n<p>contains unreachable destination <code>destination=-6.235759,6.823277</code> in Atlantic Ocean. Probably destination should be <code>106.823277</code> instead of  <code>6.823277</code> : <code>destination=-6.235759,106.823277</code> if all the positions should refer to valid locations in Jakarta. So, double check code, that compose URL for Directions API request.</p>\n"}], "owner": {"reputation": 6009, "user_id": 132127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/TnwQX.jpg?s=128&g=1", "display_name": "anta40", "link": "https://stackoverflow.com/users/132127/anta40"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1594531124, "creation_date": 1559630338, "last_edit_date": 1594531124, "question_id": 56438569, "link": "https://stackoverflow.com/questions/56438569/how-to-draw-route-from-a-to-b-through-multiple-points-on-googlemaps", "title": "How to draw route from A to B through multiple points on GoogleMaps?", "body": "<p>Imagine I want to go from A to B through 3 waypoints. I have this code, which forms the Google Maps direction URL:</p>\n<pre><code>fun getMapsApiDirectionsUrl(): String {\n    val origin = &quot;origin=&quot; + currentLocation.latitude + &quot;,&quot; + currentLocation.longitude;\n    val waypoints = &quot;waypoints=optimize:true|&quot; + loc1.latitude + &quot;,&quot; + loc1.longitude + &quot;|&quot; + loc2.latitude + &quot;,&quot; + loc2.longitude + &quot;|&quot; + loc3.latitude + &quot;,&quot; + loc3.longitude\n    val destination = &quot;destination=&quot; + loc4.latitude + &quot;,&quot; + loc4.longitude\n    val sensor = &quot;sensor=false&quot;\n    val key = &quot;key=&quot;+API_KEY;\n    val params = &quot;$origin&amp;$waypoints&amp;$destination&amp;$sensor&amp;$key&quot;\n    val output = &quot;json&quot;\n\n    val url = &quot;https://maps.googleapis.com/maps/api/directions/&quot; + output + &quot;?&quot; + params\n    System.out.println(&quot;map url: &quot;+url)\n    return url\n}\n</code></pre>\n<p>Opening the URL on browser gave this:</p>\n<blockquote>\n<p>{    &quot;routes&quot; : [],    &quot;status&quot; : &quot;ZERO_RESULTS&quot; }</p>\n</blockquote>\n<p>But if I only use 1 waypoint (instead of 3 like shown above), the direction will be displayed in 1 big JSON correctly, like this:</p>\n<blockquote>\n<p>{    &quot;geocoded_waypoints&quot; : [\n{\n&quot;geocoder_status&quot; : &quot;OK&quot;,\n&quot;place_id&quot; : &quot;ChIJH87yjIXxaS4R5_ww8ZCufeo&quot;,\n&quot;types&quot; : [ &quot;clothing_store&quot;, &quot;establishment&quot;, &quot;point_of_interest&quot;, &quot;store&quot; ]\n},\n{\n&quot;geocoder_status&quot; : &quot;OK&quot;,\n&quot;place_id&quot; : &quot;ChIJ1wVXzIDxaS4RkyUYgf3ZV0c&quot;,\n&quot;types&quot; : [ &quot;street_address&quot; ]\n},\n{\n&quot;geocoder_status&quot; : &quot;OK&quot;,\n&quot;place_id&quot; : &quot;ChIJrfOSGBXxaS4Ro595K_5ClCg&quot;,\n&quot;types&quot; : [ &quot;establishment&quot;, &quot;hospital&quot;, &quot;point_of_interest&quot; ]\n}    ],    &quot;routes&quot; : [\n{\n&quot;bounds&quot; : {\n&quot;northeast&quot; : {\n&quot;lat&quot; : -6.2399232,\n&quot;lng&quot; : 106.8161445\n},\n&quot;southwest&quot; : {\n&quot;lat&quot; : -6.2684858,\n&quot;lng&quot; : 106.7929824\n}\n},\n&quot;copyrights&quot; : &quot;Map data \u00a92019 Google&quot;,\n&quot;legs&quot; : [\n{\n&quot;distance&quot; : {\n&quot;text&quot; : &quot;1.2 km&quot;,\n&quot;value&quot; : 1205\n},\n&quot;duration&quot; : {\n&quot;text&quot; : &quot;4 mins&quot;,\n&quot;value&quot; : 254\n},\n&quot;end_address&quot; : &quot;Jl. Kemang Raya No.54, RT.8/RW.2, Bangka, Kec. Mampang Prpt., Kota Jakarta Selatan, Daerah Khusus\nIbukota Jakarta 12730, Indonesia&quot;,\n&quot;end_location&quot; : {\n&quot;lat&quot; : -6.263443499999999,\n&quot;lng&quot; : 106.8160131....</p>\n</blockquote>\n<p>So does it mean I can only use 1 waypoint?</p>\n"}, {"tags": ["android", "kotlin", "android-intent", "android-activity"], "comments": [{"owner": {"reputation": 16790, "user_id": 2936153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIaVu.jpg?s=128&g=1", "display_name": "Rohit5k2", "link": "https://stackoverflow.com/users/2936153/rohit5k2"}, "edited": false, "score": 0, "creation_date": 1559627863, "post_id": 56438011, "comment_id": 99469838, "body": "This answer explains it. In short if you already have login screen in the backstack and want to lauch it without resetting the stack then clear_top would be ideal. Still read this <a href=\"https://stackoverflow.com/a/23718678/2936153\">stackoverflow.com/a/23718678/2936153</a>"}, {"owner": {"reputation": 16790, "user_id": 2936153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIaVu.jpg?s=128&g=1", "display_name": "Rohit5k2", "link": "https://stackoverflow.com/users/2936153/rohit5k2"}, "edited": false, "score": 0, "creation_date": 1559627885, "post_id": 56438011, "comment_id": 99469845, "body": "<a href=\"https://stackoverflow.com/questions/7385443/flag-activity-clear-top-in-android?noredirect=1&amp;lq=1\" title=\"flag activity clear top in android\">stackoverflow.com/questions/7385443/&hellip;</a>"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1559628120, "post_id": 56438011, "comment_id": 99469919, "body": "If that was my task, I&#39;d check myself. Isn&#39;t it more exciting to discover it yourself?"}, {"owner": {"reputation": 443, "user_id": 4473756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4b06b93ac4a32adcc25c191b569f741?s=128&d=identicon&r=PG&f=1", "display_name": "Jishant", "link": "https://stackoverflow.com/users/4473756/jishant"}, "edited": false, "score": 0, "creation_date": 1559631612, "post_id": 56438011, "comment_id": 99471232, "body": "you can use finishAffinity in place of finish but yes it will create new instance of Login Activity as well. check this <a href=\"https://developer.android.com/reference/android/app/Activity.html#finishAffinity()\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/app/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6777, "user_id": 4853133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/3GSSn.jpg?s=128&g=1", "display_name": "Quick learner", "link": "https://stackoverflow.com/users/4853133/quick-learner"}, "is_accepted": false, "score": 1, "last_activity_date": 1559628876, "last_edit_date": 1559628876, "creation_date": 1559628141, "answer_id": 56438130, "question_id": 56438011, "link": "https://stackoverflow.com/questions/56438011/should-i-use-flag-activity-clear-top-in-this-case-how-to-use-flag-activity-clea/56438130#56438130", "title": "Should I use FLAG_ACTIVITY_CLEAR_TOP in this case? how to use FLAG_ACTIVITY_CLEAR_TOP intent flag?", "body": "<blockquote>\n  <p>If you want to just clear the previous activities from stack and\n  launch login activity just do this</p>\n</blockquote>\n\n<p>in <code>manifest</code> file your login activity should be like this </p>\n\n<pre><code>&lt;activity\n    android:name=\".LoginActivity\"\n    android:screenOrientation=\"portrait\"/&gt;\n</code></pre>\n\n<p>After changing password launch the login <code>activity</code> with following tags</p>\n\n<pre><code>Intent intent = new Intent(ChangePassword.this, LoginActivity.class);\nintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\nstartActivity(intent);\nfinish();\n</code></pre>\n\n<p>By setting flag to <code>Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK</code>\nall the previous activities will be cleared from stack.</p>\n\n<p>for more info check this \n<a href=\"https://developer.android.com/reference/android/content/Intent\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/content/Intent</a>\nFrom the official documentation - <code>FLAG_ACTIVITY_CLEAR_TOP</code></p>\n\n<blockquote>\n  <p>If set, and the activity being launched is already running in the\n  current task, then instead of launching a new instance of that\n  activity, all of the other activities on top of it will be closed and\n  this Intent will be delivered to the (now on top) old activity as a\n  new Intent.</p>\n  \n  <p>For example, consider a task consisting of the activities: A, B, C, D.\n  If D calls startActivity() with an Intent that resolves to the\n  component of activity B, then C and D will be finished and B receive\n  the given Intent, resulting in the stack now being: A, B.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 8555508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cac54c412b988107a6357991c8e3c7?s=128&d=identicon&r=PG&f=1", "display_name": "Deejayen", "link": "https://stackoverflow.com/users/8555508/deejayen"}, "is_accepted": false, "score": 1, "last_activity_date": 1559631735, "last_edit_date": 1559631735, "creation_date": 1559631096, "answer_id": 56438742, "question_id": 56438011, "link": "https://stackoverflow.com/questions/56438011/should-i-use-flag-activity-clear-top-in-this-case-how-to-use-flag-activity-clea/56438742#56438742", "title": "Should I use FLAG_ACTIVITY_CLEAR_TOP in this case? how to use FLAG_ACTIVITY_CLEAR_TOP intent flag?", "body": "<blockquote>\n  <p>LoginActivity > DashboardActivity > (if user opts to change their password) > ChangePasswordActivity</p>\n</blockquote>\n\n<ul>\n<li><p>In order to clear task and intent to LoginActivty you should use</p>\n\n<p>intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);</p></li>\n</ul>\n\n<blockquote>\n  <p>Is it correct to use FLAG_ACTIVITY_CLEAR_TOP to start a new LoginActivity in this case? I'd like to know which flags are appropriate in this </p>\n</blockquote>\n\n<ul>\n<li>FLAG_ACTIVITY_CLEAR_TOP will clear everything from the stack and make\nthe new activity as root task. In your case, there is no previous\nactivity for LoginActivity it will also work but not advisable.</li>\n</ul>\n\n<blockquote>\n  <p>For what it's worth, my DashboardActivity has a launchMode set to singleTop in my AndroidManifest.</p>\n</blockquote>\n\n<ul>\n<li>It will not be useful in your case though you get detail of \u201cLaunchMode\" here <a href=\"https://blog.mindorks.com/android-activity-launchmode-explained-cbc6cf996802\" rel=\"nofollow noreferrer\">https://blog.mindorks.com/android-activity-launchmode-explained-cbc6cf996802</a></li>\n<li>Also check\n<a href=\"https://blog.mindorks.com/android-task-and-back-stack-review-5017f2c18196\" rel=\"nofollow noreferrer\">https://blog.mindorks.com/android-task-and-back-stack-review-5017f2c18196</a>\nfor details</li>\n</ul>\n"}], "owner": {"reputation": 319, "user_id": 9429718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d17db04da1d475c6937303e498d878c2?s=128&d=identicon&r=PG&f=1", "display_name": "fishhau", "link": "https://stackoverflow.com/users/9429718/fishhau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1595824535, "creation_date": 1559627504, "last_edit_date": 1595824535, "question_id": 56438011, "link": "https://stackoverflow.com/questions/56438011/should-i-use-flag-activity-clear-top-in-this-case-how-to-use-flag-activity-clea", "title": "Should I use FLAG_ACTIVITY_CLEAR_TOP in this case? how to use FLAG_ACTIVITY_CLEAR_TOP intent flag?", "body": "<p>In my app I have the following <code>Activity</code> flow:\n<code>LoginActivity</code> > <code>DashboardActivity</code> > (if user opts to change their password) > <code>ChangePasswordActivity</code></p>\n\n<p>If the user successfully changes their password, I'd like to send them back to the very first Activity which is <code>LoginActivity</code>. I would like to <code>pop</code> <code>DashboardActivity</code> in the process to prevent any unwanted lingering Activities.  </p>\n\n<p>Is it correct to use <code>FLAG_ACTIVITY_CLEAR_TOP</code> to start a new <code>LoginActivity</code> in this case? I'd like to know which flags are appropriate in this scenario. </p>\n\n<p>For what it's worth, my <code>DashboardActivity</code> has a <code>launchMode</code> set to <code>singleTop</code> in my <code>AndroidManifest</code>. </p>\n"}, {"tags": ["android", "kotlin", "textview", "custom-exceptions"], "comments": [{"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1559623948, "post_id": 56437496, "comment_id": 99468773, "body": "you don&#39;t need a custom class to use custom font. Normal TextView already supports it."}, {"owner": {"reputation": 1046, "user_id": 8546205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuebv.jpg?s=128&g=1", "display_name": "Rahul Kushwaha", "link": "https://stackoverflow.com/users/8546205/rahul-kushwaha"}, "edited": false, "score": 0, "creation_date": 1559624039, "post_id": 56437496, "comment_id": 99468788, "body": "If want to add for only Custom Font then it supports already and you don&#39;t need to make a new custom class."}, {"owner": {"reputation": 353, "user_id": 11367893, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9Kykfadsf7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc3njAMU3GKzHkXoMspajA3Iq5BZQ/mo/photo.jpg?sz=128", "display_name": "P A Gosai", "link": "https://stackoverflow.com/users/11367893/p-a-gosai"}, "reply_to_user": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1559624066, "post_id": 56437496, "comment_id": 99468795, "body": "@VladyslavMatviienko can you please give me an example?"}, {"owner": {"reputation": 1046, "user_id": 8546205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuebv.jpg?s=128&g=1", "display_name": "Rahul Kushwaha", "link": "https://stackoverflow.com/users/8546205/rahul-kushwaha"}, "edited": false, "score": 0, "creation_date": 1559624076, "post_id": 56437496, "comment_id": 99468802, "body": "Inspite of this ,If want to make a custom class this link may help you:<a href=\"https://stackoverflow.com/questions/9477336/how-to-make-a-custom-textview\" title=\"how to make a custom textview\">stackoverflow.com/questions/9477336/&hellip;</a>"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 1, "creation_date": 1559624118, "post_id": 56437496, "comment_id": 99468813, "body": "just search for <code>textview android kotlin font</code>, should take you around 12 seconds to find answer"}], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 6379435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mKIGo.jpg?s=128&g=1", "display_name": "Ram Kadam", "link": "https://stackoverflow.com/users/6379435/ram-kadam"}, "is_accepted": false, "score": 1, "last_activity_date": 1559624706, "creation_date": 1559624706, "answer_id": 56437638, "question_id": 56437496, "link": "https://stackoverflow.com/questions/56437496/how-can-we-create-custom-class-of-textview-with-custom-font-in-kotlin/56437638#56437638", "title": "How can we create custom class of TextView with custom font in kotlin?", "body": "<pre><code>Follow following steps to set custom font:-\n\n// Set your font as you want\nval typeface = Typeface.createFromAsset(assets, \"baamini.ttf\")\n\n// Set Your test\ntxtMessage.text = \"Hello world\" \n\n// Set the typeface\ntxtMessage.typeface = typeface \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 926, "user_id": 9060917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10ff9052f91c7e5893cace91dd3c90ab?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/9060917/praveen"}, "is_accepted": true, "score": 4, "last_activity_date": 1559644960, "last_edit_date": 1559644960, "creation_date": 1559624869, "answer_id": 56437654, "question_id": 56437496, "link": "https://stackoverflow.com/questions/56437496/how-can-we-create-custom-class-of-textview-with-custom-font-in-kotlin/56437654#56437654", "title": "How can we create custom class of TextView with custom font in kotlin?", "body": "<p>create a folder \"<strong>font</strong>\" inside \"<strong>res</strong>\" folder and copy your font </p>\n\n<p><a href=\"https://i.stack.imgur.com/IA33M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IA33M.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>   &lt;TextView\n       android:layout_width=\"wrap_content\"\n       android:layout_height=\"wrap_content\"\n       android:fontFamily=\"@font/muli_font\"\n      /&gt;\n</code></pre>\n\n<p><strong>programmatically</strong></p>\n\n<pre><code> view.setTypeface(ResourcesCompat.getFont(context, R.font.muli_font))\n</code></pre>\n\n<p>you can download \"<strong>.ttf</strong>\" font from <a href=\"https://fonts.google.com/\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 353, "user_id": 11367893, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9Kykfadsf7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc3njAMU3GKzHkXoMspajA3Iq5BZQ/mo/photo.jpg?sz=128", "display_name": "P A Gosai", "link": "https://stackoverflow.com/users/11367893/p-a-gosai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 0, "accepted_answer_id": 56437654, "answer_count": 2, "score": 1, "last_activity_date": 1559644960, "creation_date": 1559623680, "last_edit_date": 1559628322, "question_id": 56437496, "link": "https://stackoverflow.com/questions/56437496/how-can-we-create-custom-class-of-textview-with-custom-font-in-kotlin", "title": "How can we create custom class of TextView with custom font in kotlin?", "body": "<p>Can anyone help me to define a custom class for android <code>Textview</code> with a custom font in <code>kotlin</code>?</p>\n"}, {"tags": ["android", "listview", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 375, "user_id": 7229349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18270e159ad11729a3e0d227ef0a96e7?s=128&d=identicon&r=PG&f=1", "display_name": "Muthu S", "link": "https://stackoverflow.com/users/7229349/muthu-s"}, "edited": false, "score": 0, "creation_date": 1559622273, "post_id": 56437291, "comment_id": 99468393, "body": "You can go with <a href=\"https://www.codingdemos.com/android-gridlayout-example-recyclerview\" rel=\"nofollow noreferrer\">RecyclerView</a> with GridLayoutManager"}, {"owner": {"reputation": 45, "user_id": 5664068, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_QX9ga2EEZM/AAAAAAAAAAI/AAAAAAAAGpM/YgFgYJ6gNEQ/photo.jpg?sz=128", "display_name": "Takshak Rajput", "link": "https://stackoverflow.com/users/5664068/takshak-rajput"}, "reply_to_user": {"reputation": 375, "user_id": 7229349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18270e159ad11729a3e0d227ef0a96e7?s=128&d=identicon&r=PG&f=1", "display_name": "Muthu S", "link": "https://stackoverflow.com/users/7229349/muthu-s"}, "edited": false, "score": 0, "creation_date": 1559645679, "post_id": 56437291, "comment_id": 99478233, "body": "@MuthuS Yes, it&#39;s way better."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5664068, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_QX9ga2EEZM/AAAAAAAAAAI/AAAAAAAAGpM/YgFgYJ6gNEQ/photo.jpg?sz=128", "display_name": "Takshak Rajput", "link": "https://stackoverflow.com/users/5664068/takshak-rajput"}, "edited": false, "score": 0, "creation_date": 1559622732, "post_id": 56437357, "comment_id": 99468503, "body": "what is dataSource here?"}, {"owner": {"reputation": 45, "user_id": 5664068, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_QX9ga2EEZM/AAAAAAAAAAI/AAAAAAAAGpM/YgFgYJ6gNEQ/photo.jpg?sz=128", "display_name": "Takshak Rajput", "link": "https://stackoverflow.com/users/5664068/takshak-rajput"}, "edited": false, "score": 0, "creation_date": 1559623201, "post_id": 56437357, "comment_id": 99468603, "body": "Thank you so much.  And in getItem function, Any was giving an error so I changed it to String and it worked as expected- is it correct?   And can you guide me through some info on how ArrayAdapter is working here, can any good resource also:D"}, {"owner": {"reputation": 4910, "user_id": 4896784, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7D2Mdu6NAdk/AAAAAAAAAAI/AAAAAAAAAQg/OgEfBdpBgXg/photo.jpg?sz=128", "display_name": "ismail alaoui", "link": "https://stackoverflow.com/users/4896784/ismail-alaoui"}, "reply_to_user": {"reputation": 45, "user_id": 5664068, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_QX9ga2EEZM/AAAAAAAAAAI/AAAAAAAAGpM/YgFgYJ6gNEQ/photo.jpg?sz=128", "display_name": "Takshak Rajput", "link": "https://stackoverflow.com/users/5664068/takshak-rajput"}, "edited": false, "score": 0, "creation_date": 1559623339, "post_id": 56437357, "comment_id": 99468637, "body": "check this great tuto here : <a href=\"https://www.raywenderlich.com/155-android-listview-tutorial-with-kotlin\" rel=\"nofollow noreferrer\">raywenderlich.com/155-android-listview-tutorial-with-kotlin</a> , it will explain you everything you need about listview , adapter ,...."}], "tags": [], "owner": {"reputation": 4910, "user_id": 4896784, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7D2Mdu6NAdk/AAAAAAAAAAI/AAAAAAAAAQg/OgEfBdpBgXg/photo.jpg?sz=128", "display_name": "ismail alaoui", "link": "https://stackoverflow.com/users/4896784/ismail-alaoui"}, "is_accepted": true, "score": 2, "last_activity_date": 1559622464, "creation_date": 1559622464, "answer_id": 56437357, "question_id": 56437291, "link": "https://stackoverflow.com/questions/56437291/listview-data-not-showing-in-kotlin/56437357#56437357", "title": "ListView data not showing in Kotlin", "body": "<p>you still need to override some method in your adapter and the most important one <code>getCount()</code> </p>\n\n<pre><code>//1\noverride fun getCount(): Int {\n  return keyName.size\n}\n\n//2\noverride fun getItem(position: Int): Any {\n  return keyName[position]\n}\n\n//3\noverride fun getItemId(position: Int): Long {\n  return position.toLong()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 375, "user_id": 7229349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18270e159ad11729a3e0d227ef0a96e7?s=128&d=identicon&r=PG&f=1", "display_name": "Muthu S", "link": "https://stackoverflow.com/users/7229349/muthu-s"}, "reply_to_user": {"reputation": 45, "user_id": 5664068, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_QX9ga2EEZM/AAAAAAAAAAI/AAAAAAAAGpM/YgFgYJ6gNEQ/photo.jpg?sz=128", "display_name": "Takshak Rajput", "link": "https://stackoverflow.com/users/5664068/takshak-rajput"}, "edited": false, "score": 0, "creation_date": 1559654852, "post_id": 56438197, "comment_id": 99483313, "body": "Happy coding:) Best luck:)"}], "tags": [], "owner": {"reputation": 375, "user_id": 7229349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18270e159ad11729a3e0d227ef0a96e7?s=128&d=identicon&r=PG&f=1", "display_name": "Muthu S", "link": "https://stackoverflow.com/users/7229349/muthu-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1559628577, "creation_date": 1559628577, "answer_id": 56438197, "question_id": 56437291, "link": "https://stackoverflow.com/questions/56437291/listview-data-not-showing-in-kotlin/56438197#56438197", "title": "ListView data not showing in Kotlin", "body": "<p>You may go with RecyclerView with GridLayoutManager. you can increase span count you needed. <a href=\"https://github.com/MuthuHere/SimpleRecyclerViewKotlin.git\" rel=\"nofollow noreferrer\">Clone this </a> :) Happie coding:)</p>\n"}], "owner": {"reputation": 45, "user_id": 5664068, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_QX9ga2EEZM/AAAAAAAAAAI/AAAAAAAAGpM/YgFgYJ6gNEQ/photo.jpg?sz=128", "display_name": "Takshak Rajput", "link": "https://stackoverflow.com/users/5664068/takshak-rajput"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 56437357, "answer_count": 2, "score": 0, "last_activity_date": 1559629424, "creation_date": 1559621992, "last_edit_date": 1559629424, "question_id": 56437291, "link": "https://stackoverflow.com/questions/56437291/listview-data-not-showing-in-kotlin", "title": "ListView data not showing in Kotlin", "body": "<p>I am trying to display a custom list view having two string values side by side in a fragment under tab layout but data is not showing.</p>\n\n<p>When I run the application nothing shows up just the blank screen.</p>\n\n<p>I followed this guide : <a href=\"https://www.javatpoint.com/kotlin-android-custom-listview\" rel=\"nofollow noreferrer\">javatpoint</a></p>\n\n<p>and tried to apply it to the fragment.</p>\n\n<p><a href=\"https://i.stack.imgur.com/nBuT8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nBuT8.jpg\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>CustomAdapter.kt</strong></p>\n\n<pre><code>import android.app.Activity\nimport android.view.View\nimport android.view.ViewGroup\nimport android.view.ViewParent\nimport android.widget.ArrayAdapter\nimport android.widget.TextView\n\nclass CustomListAdapter(private val context: Activity, private val keyName: Array&lt;String&gt;, private val valueName: Array&lt;String&gt;) : ArrayAdapter&lt;String&gt;(context, R.layout.customer_list_view){\noverride fun getView(position: Int, view: View?, parent: ViewGroup): View{\n    val inflater = context.layoutInflater\n    val rowView = inflater.inflate(R.layout.customer_list_view, null, true)\n\n    val keyNameText = rowView.findViewById&lt;TextView&gt;(R.id.keyName)\n    val valueNameText = rowView.findViewById&lt;TextView&gt;(R.id.valueName)\n\n    keyNameText.text = keyName[position]\n    valueNameText.text = valueName[position]\n\n    return rowView\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>FragmentSoftware.kt</strong></p>\n\n<pre><code>import android.os.Bundle\nimport android.support.v4.app.Fragment\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.ListView\n\nclass FragmentSoftware : Fragment(){\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    val fragmentVar: View = inflater.inflate(R.layout.software_fragment, container, false)\n\n    val names = arrayOf(\"Tesla\", \"BMW\", \"Audi\", \"Tata\", \"Ford\", \"Honda\", \"Jaguar\", \"Mustang\", \"Mercedes\", \"Lamborghini\", \"Tesla\", \"BMW\", \"Audi\", \"Tata\", \"Ford\", \"Honda\", \"Jaguar\", \"Mustang\", \"Mercedes\", \"Lamborghini\")\n    val values = arrayOf(\"Tesla\", \"BMW\", \"Audi\", \"Tata\", \"Ford\", \"Honda\", \"Jaguar\", \"Mustang\", \"Mercedes\", \"Lamborghini\", \"Tesla\", \"BMW\", \"Audi\", \"Tata\", \"Ford\", \"Honda\", \"Jaguar\", \"Mustang\", \"Mercedes\", \"Lamborghini\")\n\n\n    val fragmentListView = fragmentVar.findViewById&lt;ListView&gt;(R.id.listView2)\n    fragmentListView.adapter = CustomListAdapter(requireActivity(), names, values)\n\n return fragmentVar\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>software_fragment.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:gravity=\"center\"&gt;\n    &lt;ListView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:id=\"@+id/listView2\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p><strong>custom_list_view.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\"&gt;\n\n        &lt;TextView\n                android:layout_width=\"0dp\"\n                android:layout_height=\"wrap_content\"\n                android:layout_weight=\"1\"\n                android:id=\"@+id/keyName\"\n                android:paddingStart=\"20dp\"\n                android:paddingEnd=\"20dp\"\n                android:paddingTop=\"8dp\"\n                android:paddingBottom=\"8dp\"\n                android:textStyle=\"bold\"\n                android:textColor=\"#000000\"/&gt;\n    &lt;TextView\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"1\"\n            android:id=\"@+id/valueName\"\n            android:paddingStart=\"20dp\"\n            android:paddingEnd=\"20dp\"\n            android:paddingTop=\"8dp\"\n            android:paddingBottom=\"8dp\"\n            android:textStyle=\"bold\"\n            android:textColor=\"#000000\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1559620846, "post_id": 56437100, "comment_id": 99468159, "body": "Change <code>onBindViewHolder</code> to <code>override fun onBindViewHolder(holder: CustomViewHolder, position: Int)</code>. holder is not nullable here .. Also you can make <code>CustomViewHolder</code> as a inner class .."}, {"owner": {"reputation": 1205, "user_id": 1345143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/p7Vzs.jpg?s=128&g=1", "display_name": "Joe Shamuraq", "link": "https://stackoverflow.com/users/1345143/joe-shamuraq"}, "edited": false, "score": 0, "creation_date": 1573871973, "post_id": 56437100, "comment_id": 104040988, "body": "@Hem Poudyal . The tutorial you are following is 1 out of 4 tutorial. Did you have problem with the other three?"}], "answers": [{"tags": [], "owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "is_accepted": true, "score": 6, "last_activity_date": 1559630360, "last_edit_date": 1559630360, "creation_date": 1559622518, "answer_id": 56437365, "question_id": 56437100, "link": "https://stackoverflow.com/questions/56437100/kotiln-class-is-not-abstract-and-does-not-implement-abstract-base-class-member/56437365#56437365", "title": "kotiln- Class is not abstract and does not implement abstract base class member (RecyclerView)", "body": "<p>I already answered in comments . For sake of Closing the question i am posting it as an answer here .</p>\n\n<p><strong>Problem</strong>:- <code>onBindViewHolder</code> argument is not nullable in parent class So when you override it it should be the same .</p>\n\n<pre><code>class MainAdapter: RecyclerView.Adapter&lt;MainAdapter.CustomViewHolder&gt;() {\nval videoTitles = listOf(\"First Title\",\"Second\",\"Third\")\noverride fun getItemCount(): Int {\n    return videoTitles.size\n}\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CustomViewHolder {\n    val layoutInflater = LayoutInflater.from(parent.context)\n    val cellForRow = layoutInflater.inflate(R.layout.activity_dx,parent,false)\n    return CustomViewHolder(cellForRow)\n}\noverride fun onBindViewHolder(holder: CustomViewHolder, position: Int) {\n\n}\ninner class CustomViewHolder(val view: View): RecyclerView.ViewHolder(view){\n}\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1559653455, "post_id": 56439478, "comment_id": 99482484, "body": "What does this code does ? Code only answer are not helpful .. Also its the same code you have pasted as accepted answer ."}, {"owner": {"reputation": 1402, "user_id": 2138457, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/05fUt.jpg?s=128&g=1", "display_name": "GunJack", "link": "https://stackoverflow.com/users/2138457/gunjack"}, "edited": false, "score": 0, "creation_date": 1588422560, "post_id": 56439478, "comment_id": 108891821, "body": "Please explain what you did here"}], "tags": [], "owner": {"reputation": 99, "user_id": 6070229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KvhWeyhjJhM/AAAAAAAAAAI/AAAAAAAAADM/5FClXAVMP30/photo.jpg?sz=128", "display_name": "Chandan Yadav", "link": "https://stackoverflow.com/users/6070229/chandan-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1559716319, "last_edit_date": 1559716319, "creation_date": 1559634317, "answer_id": 56439478, "question_id": 56437100, "link": "https://stackoverflow.com/questions/56437100/kotiln-class-is-not-abstract-and-does-not-implement-abstract-base-class-member/56439478#56439478", "title": "kotiln- Class is not abstract and does not implement abstract base class member (RecyclerView)", "body": "<pre><code>class MyOrderRecycleAdapter(val cont: Context, val ordersList: List&lt;MyOrderModel.Datum&gt;) : RecyclerView.Adapter&lt;MyOrderRecycleAdapter.ViewHolder&gt;() {\n\n   override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyOrderRecycleAdapter.ViewHolder {\n        val viewHoler = LayoutInflater.from(cont).inflate(R.layout.my_orders_rc_row, parent, false)\n        return ViewHolder(viewHoler)\n    }\n\n    override fun getItemCount(): Int {\n        return ordersList.size\n    }\n\n    override fun onBindViewHolder(holder: MyOrderRecycleAdapter.ViewHolder, position: Int) {\n        Glide.with(cont).load(ordersList!!.get(position)!!.product_image).into(holder.product_icon);\n        holder.product_name.text = ordersList!!.get(position)!!.name\n    }\n\n    inner class ViewHolder(itemView: View?) : RecyclerView.ViewHolder(itemView!!) {\n        val product_icon: ImageView = itemView!!.findViewById(R.id.product_icon);\n        val product_name: TextView = itemView!!.findViewById(R.id.product_name);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 1917958, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5e753b4534458c536b5c8c4913111fba?s=128&d=identicon&r=PG", "display_name": "Hem Poudyal", "link": "https://stackoverflow.com/users/1917958/hem-poudyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1615, "favorite_count": 0, "accepted_answer_id": 56437365, "answer_count": 2, "score": 1, "last_activity_date": 1559716319, "creation_date": 1559620096, "last_edit_date": 1559628402, "question_id": 56437100, "link": "https://stackoverflow.com/questions/56437100/kotiln-class-is-not-abstract-and-does-not-implement-abstract-base-class-member", "title": "kotiln- Class is not abstract and does not implement abstract base class member (RecyclerView)", "body": "<p>I am new to Kotlin, I tried RecycleView implementation from a tutorial but got this</p>\n\n<pre><code>class MainAdapter: RecyclerView.Adapter&lt;CustomViewHolder&gt;() {\n\n    val videoTitles = listOf(\"First Title\",\"Second\",\"Third\")\n\n    override fun getItemCount(): Int {\n        return videoTitles.size\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CustomViewHolder {\n        val layoutInflater = LayoutInflater.from(parent.context)\n        val cellForRow = layoutInflater.inflate(R.layout.video_row,parent,false)\n        return CustomViewHolder(cellForRow)\n    }\n\n    override fun onBindViewHolder(holder: CustomViewHolder?, position: Int) {\n        val videoTitle = videoTitles.get(position)\n        holder.view.textView_video_title.text = videoTitle\n    }\n\n}\n\nclass CustomViewHolder(val view: View): RecyclerView.ViewHolder(view){\n\n\n}\n</code></pre>\n\n<p>I am working on Android Studio 3.4, is it causing the error?</p>\n"}, {"tags": ["android", "kotlin", "picasso"], "comments": [{"owner": {"reputation": 1118, "user_id": 11555903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KT4Ri.jpg?s=128&g=1", "display_name": "Ben Shmuel", "link": "https://stackoverflow.com/users/11555903/ben-shmuel"}, "edited": false, "score": 0, "creation_date": 1559623014, "post_id": 56436967, "comment_id": 99468564, "body": "Any particular error ?  try to see what\u2019s going on in the logcat"}, {"owner": {"reputation": 1046, "user_id": 8546205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuebv.jpg?s=128&g=1", "display_name": "Rahul Kushwaha", "link": "https://stackoverflow.com/users/8546205/rahul-kushwaha"}, "edited": false, "score": 0, "creation_date": 1559623404, "post_id": 56436967, "comment_id": 99468654, "body": "Hi will you please share me the  log caterror or response"}, {"owner": {"reputation": 1046, "user_id": 8546205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuebv.jpg?s=128&g=1", "display_name": "Rahul Kushwaha", "link": "https://stackoverflow.com/users/8546205/rahul-kushwaha"}, "edited": false, "score": 0, "creation_date": 1559623420, "post_id": 56436967, "comment_id": 99468660, "body": "It worked at mine side."}, {"owner": {"reputation": 1118, "user_id": 11555903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KT4Ri.jpg?s=128&g=1", "display_name": "Ben Shmuel", "link": "https://stackoverflow.com/users/11555903/ben-shmuel"}, "edited": false, "score": 0, "creation_date": 1559624245, "post_id": 56436967, "comment_id": 99468850, "body": "Does your app uses pro guard ?"}, {"owner": {"reputation": 2987, "user_id": 7832102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a7BV.jpg?s=128&g=1", "display_name": "Prince Dholakiya", "link": "https://stackoverflow.com/users/7832102/prince-dholakiya"}, "edited": false, "score": 0, "creation_date": 1559629411, "post_id": 56436967, "comment_id": 99470343, "body": "your solution is here. <a href=\"https://stackoverflow.com/a/56438058/7832102\">stackoverflow.com/a/56438058/7832102</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "edited": false, "score": 0, "creation_date": 1559621473, "post_id": 56437076, "comment_id": 99468266, "body": "Thank you. I have already put a permission and i implement the picasso in build.gradle but it&#39;s is not work. Thanks anyway"}, {"owner": {"reputation": 777, "user_id": 3318025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCeKz.jpg?s=128&g=1", "display_name": "TheAnkush", "link": "https://stackoverflow.com/users/3318025/theankush"}, "reply_to_user": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "edited": false, "score": 0, "creation_date": 1559623183, "post_id": 56437076, "comment_id": 99468599, "body": "Ok in that case can you share the xml? what are the dimensions of imageview?"}, {"owner": {"reputation": 777, "user_id": 3318025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCeKz.jpg?s=128&g=1", "display_name": "TheAnkush", "link": "https://stackoverflow.com/users/3318025/theankush"}, "reply_to_user": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "edited": false, "score": 0, "creation_date": 1559672348, "post_id": 56437076, "comment_id": 99491974, "body": "@AliSaki - Give imageview height and width in dp. like 150 dp &amp; 150dp and don&#39;t use constraint layout. Lets test if it works."}], "tags": [], "owner": {"reputation": 777, "user_id": 3318025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCeKz.jpg?s=128&g=1", "display_name": "TheAnkush", "link": "https://stackoverflow.com/users/3318025/theankush"}, "is_accepted": false, "score": 0, "last_activity_date": 1559672506, "last_edit_date": 1559672506, "creation_date": 1559619845, "answer_id": 56437076, "question_id": 56436967, "link": "https://stackoverflow.com/questions/56436967/picasso-not-work-with-1-bp-blogspot-com-url/56437076#56437076", "title": "Picasso not work with 1.bp.blogspot.com url", "body": "<p><strong>Update</strong></p>\n\n<p>Give your imageview height and width instead of 0dp and remove constraint layoutlayout.</p>\n\n<p>Add internet permission in your Android Manifest</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n\n<p>I tried and it is working fine with below Picasso version</p>\n\n<pre><code>implementation 'com.squareup.picasso:picasso:2.71828'\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MolrL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MolrL.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "edited": false, "score": 0, "creation_date": 1559627989, "post_id": 56438058, "comment_id": 99469881, "body": "Thank you. I have already put a permission but it&#39;s is not work. Thanks anyway"}, {"owner": {"reputation": 2987, "user_id": 7832102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a7BV.jpg?s=128&g=1", "display_name": "Prince Dholakiya", "link": "https://stackoverflow.com/users/7832102/prince-dholakiya"}, "reply_to_user": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "edited": false, "score": 0, "creation_date": 1559629376, "post_id": 56438058, "comment_id": 99470332, "body": "I try to open this image URL in my browser but it takes a long time to load the image."}, {"owner": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "edited": false, "score": 0, "creation_date": 1559629602, "post_id": 56438058, "comment_id": 99470422, "body": "wen I try use with method i recived this error : &quot;Unresolved reference: with&quot;"}, {"owner": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "edited": false, "score": 0, "creation_date": 1559629889, "post_id": 56438058, "comment_id": 99470522, "body": "Loading photos is fast in my browser. I have many pictures in this host so I do not think about cache"}, {"owner": {"reputation": 2987, "user_id": 7832102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a7BV.jpg?s=128&g=1", "display_name": "Prince Dholakiya", "link": "https://stackoverflow.com/users/7832102/prince-dholakiya"}, "reply_to_user": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "edited": false, "score": 0, "creation_date": 1559633909, "post_id": 56438058, "comment_id": 99472288, "body": "com.squareup.picasso:picasso:2.4.0 use this library version. @AliSaki"}, {"owner": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "edited": false, "score": 0, "creation_date": 1559636258, "post_id": 56438058, "comment_id": 99473340, "body": "picasso:2.4.0 There is no difference"}, {"owner": {"reputation": 2987, "user_id": 7832102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a7BV.jpg?s=128&g=1", "display_name": "Prince Dholakiya", "link": "https://stackoverflow.com/users/7832102/prince-dholakiya"}, "reply_to_user": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "edited": false, "score": 0, "creation_date": 1559636465, "post_id": 56438058, "comment_id": 99473416, "body": "Did you add this version of library?"}], "tags": [], "owner": {"reputation": 2987, "user_id": 7832102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a7BV.jpg?s=128&g=1", "display_name": "Prince Dholakiya", "link": "https://stackoverflow.com/users/7832102/prince-dholakiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1559629160, "last_edit_date": 1559629160, "creation_date": 1559627762, "answer_id": 56438058, "question_id": 56436967, "link": "https://stackoverflow.com/questions/56436967/picasso-not-work-with-1-bp-blogspot-com-url/56438058#56438058", "title": "Picasso not work with 1.bp.blogspot.com url", "body": "<p>Did you add internet permission into the <code>AndroidManifest.xml</code></p>\n\n<p>Like.</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n\n<p>Please use the below method to get your solution.</p>\n\n<pre><code>Picasso..with(this)\n            .load(\"https://1.bp.blogspot.com/-qgZfrkC0FWw/XPWFD8BtcOI/AAAAAAABcs4/S8KFUqFgVtgrmMn5CZ7J8UkKLM1OQ6FVACLcBGAs/s640/Firefox%2BLockwise.jpg\")\n            .memoryPolicy(MemoryPolicy.NO_CACHE, MemoryPolicy.NO_STORE)\n            .into(imageView);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8970948, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ox1dW4SRhY8/AAAAAAAAAAI/AAAAAAAAAm4/pWJ2zG069PA/photo.jpg?sz=128", "display_name": "Ali Saki", "link": "https://stackoverflow.com/users/8970948/ali-saki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1559917365, "creation_date": 1559618861, "last_edit_date": 1559917365, "question_id": 56436967, "link": "https://stackoverflow.com/questions/56436967/picasso-not-work-with-1-bp-blogspot-com-url", "title": "Picasso not work with 1.bp.blogspot.com url", "body": "<p>I tried to do everything but not working.\nI checked the link a thousand times and opened it in the browser and it works well.\nBut another link works perfectly</p>\n\n<p>Do anyone tell me why this code does not work?</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        setSupportActionBar(toolbar)\n\n        Picasso.get()\n            .load(\"https://1.bp.blogspot.com/-qgZfrkC0FWw/XPWFD8BtcOI/AAAAAAABcs4/S8KFUqFgVtgrmMn5CZ7J8UkKLM1OQ6FVACLcBGAs/s640/Firefox%2BLockwise.jpg\")\n            .memoryPolicy(MemoryPolicy.NO_CACHE, MemoryPolicy.NO_STORE)\n            .into(imageView)\n    }\n\n}\n</code></pre>\n\n<p>My layout code is:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_height=\"match_parent\"\n        android:layout_width=\"match_parent\"\n        android:fitsSystemWindows=\"true\"\n        android:id=\"@+id/coordinatorLayout\"&gt;\n\n    &lt;com.google.android.material.appbar.AppBarLayout\n            android:id=\"@+id/appbar\"\n            android:layout_height=\"wrap_content\"\n            android:layout_width=\"match_parent\"\n            tools:layout_conversion_absoluteHeight=\"56dp\"\n            tools:layout_editor_absoluteY=\"0dp\"\n            tools:layout_editor_absoluteX=\"0dp\"\n            tools:layout_conversion_absoluteWidth=\"411dp\"&gt;\n\n        &lt;androidx.appcompat.widget.Toolbar\n                android:id=\"@+id/toolbar\"\n                android:layout_height=\"?attr/actionBarSize\"\n                android:layout_width=\"match_parent\"\n                app:popupTheme=\"@style/AppTheme.PopupOverlay\"\n                tools:layout_conversion_absoluteHeight=\"56dp\"\n                tools:layout_editor_absoluteY=\"0dp\"\n                tools:layout_editor_absoluteX=\"0dp\"\n                tools:layout_conversion_absoluteWidth=\"411dp\"&gt;\n        &lt;/androidx.appcompat.widget.Toolbar&gt;\n\n    &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:orientation=\"vertical\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\n            tools:layout_conversion_absoluteHeight=\"675dp\"\n            tools:layout_editor_absoluteY=\"56dp\"\n            tools:layout_editor_absoluteX=\"0dp\"\n            tools:layout_conversion_absoluteWidth=\"411dp\"&gt;\n\n        &lt;ImageView\n                android:layout_width=\"0dp\"\n                android:layout_height=\"0dp\"\n                android:id=\"@+id/imageView\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintBottom_toBottomOf=\"parent\"/&gt;\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p>And log:</p>\n\n<pre><code>06/04 10:11:44: Launching app\n$ adb install-multiple -r -t D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\dep\\dependencies.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\slices\\slice_1.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\slices\\slice_0.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\slices\\slice_2.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\slices\\slice_3.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\slices\\slice_5.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\slices\\slice_4.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\slices\\slice_6.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\slices\\slice_7.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\slices\\slice_8.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\split-apk\\debug\\slices\\slice_9.apk D:\\AndroidStudioProjects\\MyBlog\\app\\build\\intermediates\\instant-run-apk\\debug\\app-debug.apk \nSplit APKs installed in 32 s 391 ms\n$ adb shell am start -n \"com.alisaki.myblog/com.alisaki.myblog.MainActivity\" -a android.intent.action.MAIN -c android.intent.category.LAUNCHER\nConnected to process 31943 on device samsung-sm_j320f-420009d1f0c85400\nCapturing and displaying logcat messages from application. This behavior can be disabled in the \"Logcat output\" section of the \"Debugger\" settings page.\nE/Zygote: MountEmulatedStorage()\n    v2\nI/SELinux: Function: selinux_compare_spd_ram , priority [2] , priority version is VE=SEPF_SM-J320F_5.1.1_0072\nE/SELinux: [DEBUG] get_category: variable seinfo: default sensitivity: NULL, cateogry: NULL\nI/art: Late-enabling -Xcheck:jni\nE/art: setrlimit(RLIMIT_CORE) failed for pid 31943: Operation not permitted\nI/libpersona: KNOX_SDCARD checking this for 10113\n    KNOX_SDCARD not a persona\nI/InjectionManager: Inside getClassLibPath + mLibMap{0=, 1=}\nW/ResourcesManager: getTopLevelResources: /data/app/com.alisaki.myblog-2/base.apk / 1.0 running in com.alisaki.myblog rsrc of package com.alisaki.myblog\nD/ResourcesManager: For user 0 new overlays fetched Null\nI/InjectionManager: Inside getClassLibPath caller \nI/InstantRun: starting instant run server: is main process\nD/InjectionManager: InjectionManager\n    fillFeatureStoreMap com.alisaki.myblog\nI/InjectionManager: Constructor com.alisaki.myblog, Feature store :{}\n    featureStore :{}\nW/ResourcesManager: getTopLevelResources: /data/app/com.alisaki.myblog-2/base.apk / 1.0 running in com.alisaki.myblog rsrc of package com.alisaki.myblog\nW/ResourcesManager: getTopLevelResources: /data/app/com.alisaki.myblog-2/base.apk / 1.0 running in com.alisaki.myblog rsrc of package com.alisaki.myblog\nW/ResourceType: Failure getting entry for 0x01080947 (t=7 e=2375) (error -75)\nW/art: Before Android 4.1, method android.graphics.PorterDuffColorFilter androidx.vectordrawable.graphics.drawable.VectorDrawableCompat.updateTintFilter(android.graphics.PorterDuffColorFilter, android.content.res.ColorStateList, android.graphics.PorterDuff$Mode) would have incorrectly overridden the package-private method in android.graphics.drawable.Drawable\nD/PhoneWindow: *FMB* installDecor mIsFloating : false\n    *FMB* installDecor flags : -2139029248\nI/art: Rejecting re-init on previously-failed class java.lang.Class&lt;androidx.core.view.ViewCompat$OnUnhandledKeyEventListenerWrapper&gt;\n    Rejecting re-init on previously-failed class java.lang.Class&lt;androidx.core.view.ViewCompat$OnUnhandledKeyEventListenerWrapper&gt;\nD/TextView: setTypeface with style : 0\n    setTypeface with style : 0\nD/Activity: performCreate Call Injection manager\nI/InjectionManager: dispatchOnViewCreated &gt; Target : com.alisaki.myblog.MainActivity isFragment :false\nD/OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: false\nD/PhoneWindow: *FMB* isFloatingMenuEnabled mFloatingMenuBtn : null\n    *FMB* isFloatingMenuEnabled return false\nW/System.err: remove failed: ENOENT (No such file or directory) : /data/data/com.alisaki.myblog/cache/picasso-cache/journal.tmp\nI/OpenGLRenderer: Initialized EGL, version 1.4\nD/OpenGLRenderer: Get maximum texture size. GL_MAX_TEXTURE_SIZE is 4096\n    Enabling debug mode 0\nW/art: Before Android 4.1, method int androidx.appcompat.widget.DropDownListView.lookForSelectablePosition(int, boolean) would have incorrectly overridden the package-private method in android.widget.ListView\nI/InjectionManager: dispatchCreateOptionsMenu :com.alisaki.myblog.MainActivity\n    dispatchPrepareOptionsMenu :com.alisaki.myblog.MainActivity\nI/Timeline: Timeline: Activity_idle id: android.os.BinderProxy@25ceb117 time:28955475\n</code></pre>\n\n<p>AndroidManifest.xml content:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n          package=\"com.alisaki.myblog\"&gt;\n    &lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n\n    &lt;application\n            android:allowBackup=\"true\"\n            android:icon=\"@mipmap/ic_launcher\"\n            android:label=\"@string/app_name\"\n            android:roundIcon=\"@mipmap/ic_launcher_round\"\n            android:supportsRtl=\"true\"\n            android:theme=\"@style/AppTheme\"&gt;\n        &lt;activity android:name=\".MainActivity\"\n                  android:theme=\"@style/AppTheme.NoActionBar\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\"/&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>Logcat:</p>\n\n<pre><code>06-04 10:24:54.753 32201-32201/? E/Zygote: MountEmulatedStorage()\n06-04 10:24:54.753 32201-32201/? E/Zygote: v2\n06-04 10:24:54.753 32201-32201/? I/libpersona: KNOX_SDCARD checking this for 10113\n06-04 10:24:54.753 32201-32201/? I/libpersona: KNOX_SDCARD not a persona\n06-04 10:24:54.753 32201-32201/? I/SELinux: Function: selinux_compare_spd_ram , priority [2] , priority version is VE=SEPF_SM-J320F_5.1.1_0072\n06-04 10:24:54.753 32201-32201/? E/SELinux: [DEBUG] get_category: variable seinfo: default sensitivity: NULL, cateogry: NULL\n06-04 10:24:54.753 32201-32201/? I/art: Late-enabling -Xcheck:jni\n06-04 10:24:54.753 32201-32201/? E/art: setrlimit(RLIMIT_CORE) failed for pid 32201: Operation not permitted\n06-04 10:24:54.803 32201-32208/? I/art: Debugger is no longer active\n06-04 10:24:54.823 32201-32201/? W/ResourcesManager: getTopLevelResources: /data/app/com.alisaki.myblog-2/base.apk / 1.0 running in com.alisaki.myblog rsrc of package com.alisaki.myblog\n06-04 10:24:54.833 32201-32201/? I/InjectionManager: Inside getClassLibPath + mLibMap{0=, 1=}\n06-04 10:24:54.843 32201-32201/? D/ResourcesManager: For user 0 new overlays fetched Null\n06-04 10:24:54.843 32201-32201/? I/InjectionManager: Inside getClassLibPath caller \n06-04 10:24:55.474 32201-32201/? I/InstantRun: starting instant run server: is main process\n06-04 10:24:55.474 32201-32201/? D/InjectionManager: InjectionManager\n06-04 10:24:55.474 32201-32201/? D/InjectionManager: fillFeatureStoreMap com.alisaki.myblog\n06-04 10:24:55.474 32201-32201/? I/InjectionManager: Constructor com.alisaki.myblog, Feature store :{}\n06-04 10:24:55.474 32201-32201/? I/InjectionManager: featureStore :{}\n06-04 10:24:55.594 32201-32201/? W/ResourcesManager: getTopLevelResources: /data/app/com.alisaki.myblog-2/base.apk / 1.0 running in com.alisaki.myblog rsrc of package com.alisaki.myblog\n06-04 10:24:55.594 32201-32201/? W/ResourcesManager: getTopLevelResources: /data/app/com.alisaki.myblog-2/base.apk / 1.0 running in com.alisaki.myblog rsrc of package com.alisaki.myblog\n06-04 10:24:55.594 32201-32201/? W/ResourceType: Failure getting entry for 0x01080947 (t=7 e=2375) (error -75)\n06-04 10:24:55.644 32201-32201/? W/art: Before Android 4.1, method android.graphics.PorterDuffColorFilter androidx.vectordrawable.graphics.drawable.VectorDrawableCompat.updateTintFilter(android.graphics.PorterDuffColorFilter, android.content.res.ColorStateList, android.graphics.PorterDuff$Mode) would have incorrectly overridden the package-private method in android.graphics.drawable.Drawable\n06-04 10:24:55.734 32201-32201/? D/PhoneWindow: *FMB* installDecor mIsFloating : false\n06-04 10:24:55.734 32201-32201/? D/PhoneWindow: *FMB* installDecor flags : -2139029248\n06-04 10:24:55.744 32201-32201/? I/art: Rejecting re-init on previously-failed class java.lang.Class&lt;androidx.core.view.ViewCompat$OnUnhandledKeyEventListenerWrapper&gt;\n06-04 10:24:55.744 32201-32201/? I/art: Rejecting re-init on previously-failed class java.lang.Class&lt;androidx.core.view.ViewCompat$OnUnhandledKeyEventListenerWrapper&gt;\n06-04 10:24:56.014 32201-32201/? D/TextView: setTypeface with style : 0\n06-04 10:24:56.014 32201-32201/? D/TextView: setTypeface with style : 0\n06-04 10:24:56.194 32201-32201/com.alisaki.myblog D/Activity: performCreate Call Injection manager\n06-04 10:24:56.194 32201-32201/com.alisaki.myblog I/InjectionManager: dispatchOnViewCreated &gt; Target : com.alisaki.myblog.MainActivity isFragment :false\n06-04 10:24:56.214 32201-32222/com.alisaki.myblog D/OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: false\n06-04 10:24:56.224 32201-32201/com.alisaki.myblog D/PhoneWindow: *FMB* isFloatingMenuEnabled mFloatingMenuBtn : null\n06-04 10:24:56.224 32201-32201/com.alisaki.myblog D/PhoneWindow: *FMB* isFloatingMenuEnabled return false\n06-04 10:24:56.275 32201-32221/com.alisaki.myblog W/System.err: remove failed: ENOENT (No such file or directory) : /data/data/com.alisaki.myblog/cache/picasso-cache/journal.tmp\n06-04 10:24:56.285 32201-32222/com.alisaki.myblog I/OpenGLRenderer: Initialized EGL, version 1.4\n06-04 10:24:56.285 32201-32222/com.alisaki.myblog D/OpenGLRenderer: Get maximum texture size. GL_MAX_TEXTURE_SIZE is 4096\n06-04 10:24:56.285 32201-32222/com.alisaki.myblog D/OpenGLRenderer: Enabling debug mode 0\n06-04 10:24:56.375 32201-32201/com.alisaki.myblog W/art: Before Android 4.1, method int androidx.appcompat.widget.DropDownListView.lookForSelectablePosition(int, boolean) would have incorrectly overridden the package-private method in android.widget.ListView\n06-04 10:24:56.385 32201-32201/com.alisaki.myblog I/InjectionManager: dispatchCreateOptionsMenu :com.alisaki.myblog.MainActivity\n06-04 10:24:56.385 32201-32201/com.alisaki.myblog I/InjectionManager: dispatchPrepareOptionsMenu :com.alisaki.myblog.MainActivity\n06-04 10:24:56.405 32201-32201/com.alisaki.myblog I/Timeline: Timeline: Activity_idle id: android.os.BinderProxy@25ceb117 time:29711119\n06-04 10:25:07.716 32201-32201/com.alisaki.myblog V/ActivityThread: updateVisibility : ActivityRecord{369d2259 token=android.os.BinderProxy@25ceb117 {com.alisaki.myblog/com.alisaki.myblog.MainActivity}} show : true\n</code></pre>\n\n<p>Build.gradle content:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"com.alisaki.myblog\"\n        minSdkVersion 14\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation \"androidx.appcompat:appcompat:1.0.2\"\n    implementation \"androidx.core:core-ktx:1.0.2\"\n    implementation \"androidx.constraintlayout:constraintlayout:1.1.3\"\n    implementation \"com.google.android.material:material:1.0.0\"\n    implementation \"com.android.volley:volley:1.1.1\"\n    implementation \"androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version\"\n    kapt \"androidx.lifecycle:lifecycle-compiler:$lifecycle_version\"\n    implementation \"de.hdodenhof:circleimageview:3.0.0\"\n    implementation \"org.jsoup:jsoup:1.12.1\"\n    implementation \"com.squareup.picasso:picasso:2.71828\"\n    implementation \"com.github.bumptech.glide:glide:4.9.0\"\n    kapt \"com.github.bumptech.glide:compiler:4.9.0\"\n    implementation \"androidx.legacy:legacy-support-v4:1.0.0\"\n    testImplementation \"junit:junit:4.12\"\n    testImplementation \"androidx.arch.core:core-testing:$lifecycle_version\"\n    androidTestImplementation \"androidx.test:runner:1.2.0\"\n    androidTestImplementation \"androidx.test.espresso:espresso-core:3.2.0\"\n}\n</code></pre>\n\n<p>Picasso is not provide any log's</p>\n\n<p>Whene I try to use Glide it's not work too. I receive the error in log :</p>\n\n<pre><code>W/Glide: Load failed for https://1.bp.blogspot.com/-qgZfrkC0FWw/XPWFD8BtcOI/AAAAAAABcs4/S8KFUqFgVtgrmMn5CZ7J8UkKLM1OQ6FVACLcBGAs/s640/Firefox%2BLockwise.jpg with size [389x623]\n    class com.bumptech.glide.load.engine.GlideException: Failed to load resource\n    There was 1 cause:\n    java.net.NoRouteToHostException(No route to host)\n     call GlideException#logRootCauses(String) for more detail\n      Cause (1 of 1): class com.bumptech.glide.load.engine.GlideException: Fetching data failed, class java.io.InputStream, REMOTE\n    There was 1 cause:\n    java.net.NoRouteToHostException(No route to host)\n     call GlideException#logRootCauses(String) for more detail\n        Cause (1 of 1): class com.bumptech.glide.load.engine.GlideException: Fetch failed\n    There was 1 cause:\n    java.net.NoRouteToHostException(No route to host)\n     call GlideException#logRootCauses(String) for more detail\n          Cause (1 of 1): class java.net.NoRouteToHostException: No route to host\nI/Glide: Root cause (1 of 1)\n    java.net.NoRouteToHostException: No route to host\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:334)\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:196)\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:178)\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:356)\n        at java.net.Socket.connect(Socket.java:605)\n        at com.android.okhttp.internal.Platform.connectSocket(Platform.java:113)\n        at com.android.okhttp.Connection.connectSocket(Connection.java:196)\n        at com.android.okhttp.Connection.connect(Connection.java:172)\n        at com.android.okhttp.Connection.connectAndSetOwner(Connection.java:367)\n        at com.android.okhttp.OkHttpClient$1.connectAndSetOwner(OkHttpClient.java:130)\n        at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:329)\n        at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:246)\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:457)\n        at com.android.okhttp.internal.huc.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:126)\n        at com.android.okhttp.internal.huc.DelegatingHttpsURLConnection.connect(DelegatingHttpsURLConnection.java:89)\n        at com.android.okhttp.internal.huc.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java)\n        at com.bumptech.glide.load.data.HttpUrlFetcher.loadDataWithRedirects(HttpUrlFetcher.java:104)\n        at com.bumptech.glide.load.data.HttpUrlFetcher.loadData(HttpUrlFetcher.java:59)\n        at com.bumptech.glide.load.model.MultiModelLoader$MultiFetcher.loadData(MultiModelLoader.java:100)\n        at com.bumptech.glide.load.model.MultiModelLoader$MultiFetcher.startNextOrFail(MultiModelLoader.java:164)\n        at com.bumptech.glide.load.model.MultiModelLoader$MultiFetcher.onLoadFailed(MultiModelLoader.java:154)\n        at com.bumptech.glide.load.data.HttpUrlFetcher.loadData(HttpUrlFetcher.java:65)\n        at com.bumptech.glide.load.model.MultiModelLoader$MultiFetcher.loadData(MultiModelLoader.java:100)\n        at com.bumptech.glide.load.engine.SourceGenerator.startNext(SourceGenerator.java:62)\n        at com.bumptech.glide.load.engine.DecodeJob.runGenerators(DecodeJob.java:309)\n        at com.bumptech.glide.load.engine.DecodeJob.runWrapped(DecodeJob.java:279)\n        at com.bumptech.glide.load.engine.DecodeJob.run(DecodeJob.java:235)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\n        at java.lang.Thread.run(Thread.java:761)\n        at com.bumptech.glide.load.engine.executor.GlideExecutor$DefaultThreadFactory$1.run(GlideExecutor.java:446)\n</code></pre>\n\n<p>I'm Using Samsung J3 6 android Lolipop (API 22)</p>\n\n<p>Sorry for bad English</p>\n"}, {"tags": ["android", "kotlin", "dependency-injection", "koin"], "answers": [{"comments": [{"owner": {"reputation": 11256, "user_id": 1015595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3SRWR.jpg?s=128&g=1", "display_name": "Big McLargeHuge", "link": "https://stackoverflow.com/users/1015595/big-mclargehuge"}, "edited": false, "score": 2, "creation_date": 1583085656, "post_id": 56441284, "comment_id": 106989424, "body": "New URL: <a href=\"https://doc.insert-koin.io/#/koin-core/injection-parameters\" rel=\"nofollow noreferrer\">doc.insert-koin.io/#/koin-core/injection-parameters</a>"}, {"owner": {"reputation": 2367, "user_id": 3100601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf267dc04bdbe5b7d8359e54e8fa8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ror", "link": "https://stackoverflow.com/users/3100601/ror"}, "edited": false, "score": 0, "creation_date": 1585847919, "post_id": 56441284, "comment_id": 107914883, "body": "Thanks a ton!!! Do you happen to know if (for the scenario above) <code>parametersOf(this)</code> can be used? I do not understand this construct. Is it mapping by name or should I call some setParameter before I&#39;m using view model?"}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1585892708, "post_id": 56441284, "comment_id": 107928978, "body": "can you clarify your question more so I could answer it better??"}, {"owner": {"reputation": 11742, "user_id": 5730321, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/6yX7D.jpg?s=128&g=1", "display_name": "Leo Droidcoder", "link": "https://stackoverflow.com/users/5730321/leo-droidcoder"}, "edited": false, "score": 0, "creation_date": 1609314310, "post_id": 56441284, "comment_id": 115807726, "body": "But what will it look like if the viewModel also receives single dependencies, such as repository?"}, {"owner": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "edited": false, "score": 2, "creation_date": 1613292017, "post_id": 56441284, "comment_id": 117026225, "body": "Even newer URL \ud83d\ude02 <a href=\"https://insert-koin.io/docs/reference/koin-android/viewmodel#viewmodel-and-injection-parameters\" rel=\"nofollow noreferrer\">insert-koin.io/docs/reference/koin-android/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "is_accepted": true, "score": 22, "last_activity_date": 1583527586, "last_edit_date": 1583527586, "creation_date": 1559641127, "answer_id": 56441284, "question_id": 56436705, "link": "https://stackoverflow.com/questions/56436705/how-to-add-a-fragments-argument-item-to-koin-dependency-graph/56441284#56441284", "title": "How to add a Fragment&#39;s argument item to Koin dependency graph?", "body": "<p>So for anyone else asking the same question, here is the answer:</p>\n\n<p><a href=\"https://doc.insert-koin.io/#/koin-core/injection-parameters\" rel=\"noreferrer\">https://doc.insert-koin.io/#/koin-core/injection-parameters</a></p>\n\n<p>So basically, </p>\n\n<p>you could create your module like so:</p>\n\n<pre><code>val myModule = module {\n    viewModel { (someValue : SomeValue) -&gt; SomeViewModel(someValue ) }\n}\n</code></pre>\n\n<p>Now in your fragment, you could do something like:</p>\n\n<pre><code>class SomeFragment : Fragment() {\n    val someViewModel: SomeViewModel by viewModel { \n        parametersOf(argument!!.getParcelable&lt;SomeValue&gt;(\"someKey\")) \n    }\n\n    companion object {\n        fun newInstance(someValue: SomeValue) = SomeFragment().apply {\n            arguments = bundleof(\"someKey\" to someValue)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3707, "favorite_count": 2, "accepted_answer_id": 56441284, "answer_count": 1, "score": 14, "last_activity_date": 1609314264, "creation_date": 1559615974, "last_edit_date": 1559743142, "question_id": 56436705, "link": "https://stackoverflow.com/questions/56436705/how-to-add-a-fragments-argument-item-to-koin-dependency-graph", "title": "How to add a Fragment&#39;s argument item to Koin dependency graph?", "body": "<p>I have a <code>ViewModel</code> which has a dependency which should be taken from the <code>Fragment</code>'s <code>arguments</code>.</p>\n\n<p>So its something like:</p>\n\n<pre><code>class SomeViewModel(someValue: SomeValue)\n</code></pre>\n\n<p>now the fragment recieves the <code>SomeValue</code> in its arguemnt like so:</p>\n\n<pre><code>class SomeFragment : Fragment() {\n    val someViewModel: SomeViewModel by viewModel()\n\n    companion object {\n        fun newInstance(someValue: SomeValue) = SomeFragment().apply {\n            arguments = bundleof(\"someKey\" to someValue)\n        }\n    }\n}\n</code></pre>\n\n<p>problem is I don't know how to add <code>SomeValue</code> thats taken from the <code>Fragment</code>'s <code>arguments</code> to <code>Koin</code>'s module.</p>\n\n<p>Is there a way to make the fragment contribute to the Koin Dependency Graph?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 128, "user_id": 10818029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36353799b762db235845559f8cbcfa76?s=128&d=identicon&r=PG&f=1", "display_name": "MarkT", "link": "https://stackoverflow.com/users/10818029/markt"}, "edited": false, "score": 0, "creation_date": 1559603639, "post_id": 56435554, "comment_id": 99465391, "body": "The problem is here, i got an Unresolved reference    mLeftComplicationId = MyWatchFace.getComplicartionId(ComplicationLocation.LEFT)"}], "answers": [{"tags": [], "owner": {"reputation": 1484, "user_id": 6662739, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b3ead54cd5f2928c0e9a65a29c7ce3a4?s=128&d=identicon&r=PG&f=1", "display_name": "Ollaw", "link": "https://stackoverflow.com/users/6662739/ollaw"}, "is_accepted": false, "score": 3, "last_activity_date": 1559606709, "creation_date": 1559606709, "answer_id": 56435876, "question_id": 56435554, "link": "https://stackoverflow.com/questions/56435554/why-i-cannot-access-to-this-function/56435876#56435876", "title": "Why I Cannot Access to this function?", "body": "<p>You're calling <code>getComplicationId</code> like a <em>static</em> method, but it's an <em>Instance</em> method instead. <br>To solve, put that method (and the variables it uses) inside a <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\" rel=\"nofollow noreferrer\">Companion Object</a> :</p>\n\n<pre><code>class MyWatchFace : CanvasWatchFaceService() {\n    companion object{\n        private val LEFT_COMPLICATION_ID = 0\n        private val RIGHT_COMPLICATION_ID = 1\n        private val TOP_COMPLICATION_ID = 2\n        private val BOTTOM_COMPLICATION_ID = 3\n\n        internal fun getComplicationId(complicationLocation: ComplicationLocation): Int {\n            when (complicationLocation) {\n                ComplicationLocation.LEFT -&gt; return LEFT_COMPLICATION_ID\n                ComplicationLocation.RIGHT -&gt; return RIGHT_COMPLICATION_ID\n                ComplicationLocation.TOP -&gt; return TOP_COMPLICATION_ID\n                ComplicationLocation.BOTTOM -&gt; return BOTTOM_COMPLICATION_ID\n                else -&gt; return -1\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 128, "user_id": 10818029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36353799b762db235845559f8cbcfa76?s=128&d=identicon&r=PG&f=1", "display_name": "MarkT", "link": "https://stackoverflow.com/users/10818029/markt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559606709, "creation_date": 1559603359, "question_id": 56435554, "link": "https://stackoverflow.com/questions/56435554/why-i-cannot-access-to-this-function", "title": "Why I Cannot Access to this function?", "body": "<p>I've been past this example of watchface from java to kotlin, but I suddenly notice that I can not access three functions. (I only mention one because the error is the same \"unresolved reference\")</p>\n\n<p>I do not understand why I can not access them, I have changed the access modifiers I have extended one class to another but I can not access those functions</p>\n\n<p>I will appreciate your valuable comments</p>\n\n<p>class ComplicationConfigActivity : WearableActivity(), View.OnClickListener {</p>\n\n<pre><code>private val TAG = \"Configuration Activity\"\n\ninternal val COMPLICATION_CONFIG_REQUEST_CODE = 1001 // internal val COMPLICATION_CONFIG_REQUEST_CODE = 1001\n\n\nenum class ComplicationLocation {\n    LEFT,\n    RIGHT,\n    TOP,\n    BOTTOM\n}//---\n\nprivate var mLeftComplicationId: Int = 0\nprivate var mRightComplicationId: Int = 0\n//---\nprivate var mTopComplicationId: Int = 0\nprivate var mBottomComplicationId: Int = 0\n//---\n\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_complication_config)\n\n    setContentView(R.layout.activity_complication_config)\n    mDefaultAddComplicationDrawable = getDrawable(R.drawable.add_complication)\n\n    mSelectedComplicationId = -1\n\n    mLeftComplicationId = MyWatchFace.getComplicationId(ComplicationLocation.LEFT) // unresolved reference\n    mRightComplicationId = MyWatchFace.getComplicationId(ComplicationLocation.RIGHT) // getComplicationId\n    mTopComplicationId = MyWatchFace.getComplicationId(ComplicationLocation.TOP)\n    mBottomComplicationId = MyWatchFace.getComplicationId(ComplicationLocation.BOTTOM)\n</code></pre>\n\n<p>class MyWatchFace : CanvasWatchFaceService() {</p>\n\n<pre><code>private val TAG = \"ComplicationConfigActivity\"\n// TODO: Step 2, intro 1\nprivate val LEFT_COMPLICATION_ID = 0\nprivate val RIGHT_COMPLICATION_ID = 1\nprivate val TOP_COMPLICATION_ID = 2\nprivate val BOTTOM_COMPLICATION_ID = 3\n\nprivate val COMPLICATION_IDS =\n    intArrayOf(LEFT_COMPLICATION_ID, RIGHT_COMPLICATION_ID, TOP_COMPLICATION_ID, BOTTOM_COMPLICATION_ID)\n\n// Left and right dial supported types.\nprivate val COMPLICATION_SUPPORTED_TYPES = arrayOf(\n    intArrayOf(\n        ComplicationData.TYPE_RANGED_VALUE, ComplicationData.TYPE_ICON, ComplicationData.TYPE_SHORT_TEXT,\n        //ComplicationData.IMAGE_STYLE_PHOTO,//\n        ComplicationData.TYPE_SMALL_IMAGE\n    ), intArrayOf(\n        ComplicationData.TYPE_RANGED_VALUE, ComplicationData.TYPE_ICON, ComplicationData.TYPE_SHORT_TEXT,\n        //ComplicationData.IMAGE_STYLE_PHOTO,//\n        ComplicationData.TYPE_SMALL_IMAGE\n    ), intArrayOf(\n        ComplicationData.TYPE_RANGED_VALUE, ComplicationData.TYPE_ICON, ComplicationData.TYPE_SHORT_TEXT,\n        //ComplicationData.IMAGE_STYLE_PHOTO,//\n        ComplicationData.TYPE_SMALL_IMAGE\n    ), intArrayOf(\n        ComplicationData.TYPE_RANGED_VALUE, ComplicationData.TYPE_ICON, ComplicationData.TYPE_SHORT_TEXT,\n        //ComplicationData.IMAGE_STYLE_PHOTO, //\n        ComplicationData.TYPE_SMALL_IMAGE\n    )\n)\n\n// Used by {@link ComplicationConfigActivity} to retrieve id for complication locations and\n// to check if complication location is supported.\n// TODO: Step 3, expose complication information, part 1\n//---\ninternal fun getComplicationId( // CAN\u00b4T ACCESS THIS FUNCTION\n    complicationLocation: ComplicationLocation\n): Int {\n    when (complicationLocation) {\n        LEFT -&gt; return LEFT_COMPLICATION_ID\n        RIGHT -&gt; return RIGHT_COMPLICATION_ID\n        TOP -&gt; return TOP_COMPLICATION_ID\n        BOTTOM -&gt; return BOTTOM_COMPLICATION_ID\n        else -&gt; return -1\n    }\n}\n//----\n// Used by {@link ComplicationConfigActivity} to retrieve all complication ids.\n// TODO: Step 3, expose complication information, part 2\n//---\ninternal fun getComplicationIds(): IntArray { // CAN\u00b4T ACCESS THIS FUNCTION\n\n    return COMPLICATION_IDS\n}\n//---\n\n// Used by {@link ComplicationConfigActivity} to retrieve complication types supported by\n// location.\n// TODO: Step 3, expose complication information, part 3\n//---\ninternal fun getSupportedComplicationTypes( // CAN\u00b4T ACCESS THIS FUNCTION\n    complicationLocation: ComplicationLocation\n): IntArray {\n    when (complicationLocation) {\n        LEFT -&gt; return COMPLICATION_SUPPORTED_TYPES[0]\n        RIGHT -&gt; return COMPLICATION_SUPPORTED_TYPES[1]\n        TOP -&gt; return COMPLICATION_SUPPORTED_TYPES[2]\n        BOTTOM -&gt; return COMPLICATION_SUPPORTED_TYPES[3]\n        else -&gt; return intArrayOf()\n    }\n}\n//---\n\n/*\n * Update rate in milliseconds for interactive mode. We update once a second to advance the\n * second hand.\n */\nprivate val INTERACTIVE_UPDATE_RATE_MS = TimeUnit.SECONDS.toMillis(1)\n\n\noverride fun onCreateEngine(): Engine {\n    return Engine()\n}\n\nprivate class EngineHandler(reference: Engine) : Handler() { // \n    private val mWeakReference: WeakReference&lt;Engine&gt; = WeakReference(reference)\n\n    override fun handleMessage(msg: Message) {\n        val engine = mWeakReference.get()\n        if (engine != null) {\n            when (msg.what) {\n                MSG_UPDATE_TIME -&gt; engine.handleUpdateTimeMessage()\n            }\n        }\n    }\n}\n\ninner class Engine : CanvasWatchFaceService.Engine() {}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-view"], "answers": [{"tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": false, "score": 3, "last_activity_date": 1559601152, "creation_date": 1559601152, "answer_id": 56435295, "question_id": 56435239, "link": "https://stackoverflow.com/questions/56435239/add-custom-property-to-android-view-using-kotlin/56435295#56435295", "title": "Add custom property to android View using Kotlin?", "body": "<blockquote>\n  <p>I'm trying to create an order property which will be either 1, 2 or 3</p>\n</blockquote>\n\n<p>Your syntax is for an extension function, not an extension property.</p>\n\n<p>If you want an extension <code>var</code>, use:</p>\n\n<pre><code>var View.order: Int\n  get() = getTag(R.id.tag_order) as Int\n  set(value: Int) = setTag(R.id.tag_order, value)\n</code></pre>\n\n<p>where you define an <code>id</code> resource named <code>tag_order</code>. We need view tags to be unique for the entire app, and various libraries use tags, so an <code>id</code> resource gives you a value that should not collide with those from anyone else. So, you would have a <code>res/values/ids.xml</code> (or whatever) file with:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n  &lt;id name=\"tag_order\" /&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>If the value will be 1, 2, or 3, though, probably you should use an <code>enum class</code> rather than an <code>Int</code>.</p>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1559636313, "creation_date": 1559600664, "last_edit_date": 1559636313, "question_id": 56435239, "link": "https://stackoverflow.com/questions/56435239/add-custom-property-to-android-view-using-kotlin", "title": "Add custom property to android View using Kotlin?", "body": "<p>I know it's possible to create custom properties with Kotlin by creating my own class, but is it possible to assign a custom property to an android <code>View</code> without extending the <code>View</code> class?</p>\n\n<p>I'm trying to create an <code>order</code> property which will be either 1, 2 or 3:</p>\n\n<pre><code>fun View.setOrder(order: Int){\n    // not sure what to put here\n}\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1559650437, "post_id": 56435216, "comment_id": 99480770, "body": "I am glad that not everything that works in Java is also possible in Kotlin. What is the benefit of using <code>Subclass.Nested()</code> when it is a static nested class of <code>Superclass</code>? Why not just use <code>Superclass.Nested()</code> then? I am also glad that accessing a <code>static</code> field from a Kotlin instance isn&#39;t working too ;-) maybe that&#39;s even related..."}, {"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1559658176, "post_id": 56435216, "comment_id": 99485200, "body": "@Roland I explained my constraints in the final paragraph. Was the explanation unclear?"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1559659726, "post_id": 56435216, "comment_id": 99486059, "body": "No, it wasn&#39;t...I was disturbed writing this comment (which should have followed just a minute after ;-)) Regarding your refactoring issue: I would keep the <code>Superclass.Nested()</code> until the new <code>Nested</code> inside of <code>Subclass</code> exists... as long as this isn&#39;t the case, <code>Superclass</code> and <code>Superclass.Nested</code> are still needed... while there are ways to have something like <code>Subclass.Nested()</code> in place, these are just workarounds... either you need that nested class again or you don&#39;t... simulating it is there, because it worked that way in Java, doesn&#39;t seem to be the best excuse for me..."}, {"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1559659825, "post_id": 56435216, "comment_id": 99486118, "body": "Agreed that continuing to reference <code>Superclass.Nested</code> is a viable option for the time being. I was just trying to get ahead of the curve so that when <code>Superclass</code> does eventually get removed in favor of <code>Subclass</code> we will already be ready for it."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1559659906, "post_id": 56435216, "comment_id": 99486165, "body": "as <code>Nested</code> is a substantial part of <code>Superclass</code> (it is translated to a static inner class), it makes no real sense to simulate it being there for <code>Subclass</code>. If <code>Superclass</code> then gets removed, your <code>Subclass</code> is still not ready as long as it doesn&#39;t contain that <code>Nested</code> inner class. Moreover your <code>Subclass</code> is a subclass of <code>Superclass</code>, so basically you still have work to do, when <code>Superclass</code> finally gets removed... so I don&#39;t see any refactoring problem here besides <code>Subclass</code> being a subclass of <code>Superclass</code> ;-)"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1559661288, "post_id": 56435216, "comment_id": 99486964, "body": "ok... I just saw your adapted question... as both, <code>Superclass</code> and <code>Subclass</code> aren&#39;t under your control, that seems to be a pity, that <code>Subclass.Nested()</code> then doesn&#39;t work... I would probably work with a <code>typealias</code> meanwhile... that however still references <code>Superclass</code>, but you can limit the usage on a single line: <code>typealias BetterNameForNested = Superclass.Nested</code>"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1559661935, "post_id": 56435216, "comment_id": 99487348, "body": "Note, that even though I am glad that this isn&#39;t working, this doesn&#39;t mean, that this was also intended.... it could still be a bug... actually I didn&#39;t find anything related to it yet (whether it should be allowed or not)... so maybe you have better luck finding something in the docs or issues than me... maybe you also find something or want to ask in the <a href=\"https://discuss.kotlinlang.org/\" rel=\"nofollow noreferrer\">Kotlin forums</a>"}], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1559631643, "post_id": 56435490, "comment_id": 99471245, "body": "No reason to make <code>Nested</code> a <i>companion</i> object in the first case. And you can add type alias <code>type Nested = Superclass.Nested</code> to make it usable as a type, I think."}, {"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 0, "creation_date": 1559658035, "post_id": 56435490, "comment_id": 99485122, "body": "Thank you for your suggestion. Unfortunately it won&#39;t work in my case; <code>Superclass</code> and <code>Subclass</code> are part of a library written in Java which won&#39;t change. (I&#39;m sorry I didn&#39;t make this clear in the original question -- I&#39;ll update it.) I <i>can</i> PR the library to make a compatibility change and it might be accepted, but I can&#39;t think of any change that will make <code>Nested</code> accessible from Kotlin via <code>Subclass</code>. <code>Nested</code> will not be moved <i>yet</i> (but it will eventually). The best I&#39;ve come up with is subclassing <code>Nested</code> inside of <code>Subclass</code>, but that&#39;s pretty gross."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 0, "creation_date": 1559659796, "post_id": 56435490, "comment_id": 99486104, "body": "@ean5533 actually having <code>Nested</code> inside of <code>Subclass</code> seems the only clean way for me to do what you want... and if you want to refactor that in future that seems also the right way... but why do you need to do it immediately? is it a refactoring or do you want to keep imports similar or what is your real purpose?"}, {"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 0, "creation_date": 1559659885, "post_id": 56435490, "comment_id": 99486150, "body": "I&#39;m just trying to stop using the deprecated classes as quickly as possible rather than waiting for the breaking change to land. Since that isn&#39;t possible in this case we&#39;ll just have to wait for the change to occur."}], "tags": [], "owner": {"reputation": 106, "user_id": 4632435, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BecvuDgTksY/AAAAAAAAAAI/AAAAAAAADRA/-UoqznmbIro/photo.jpg?sz=128", "display_name": "rlino", "link": "https://stackoverflow.com/users/4632435/rlino"}, "is_accepted": false, "score": 3, "last_activity_date": 1559602769, "creation_date": 1559602769, "answer_id": 56435490, "question_id": 56435216, "link": "https://stackoverflow.com/questions/56435216/is-it-possible-to-reference-a-nested-class-from-a-subclass-like-in-java/56435490#56435490", "title": "Is it possible to reference a nested class from a subclass like in Java?", "body": "<p>I am not sure if this solves your problem, buy you can access the Nested class from the Subclass, so you could do something like this:</p>\n\n<pre><code>open class Superclass {\n    class Nested\n}\n\nclass Subclass : Superclass() {\n\n    companion object Nested {\n        operator fun invoke(): Superclass.Nested = Nested()\n    }\n\n}\n\nclass Test() {\n    val thing1 = Superclass.Nested()\n    val thing2 = Subclass.Nested()\n}\n</code></pre>\n\n<p>Also, to avoid any confunsion you could just make a function that creates the Nested class</p>\n\n<pre><code>class Subclass : Superclass() {\n\n    companion object {\n        fun createNested() = Nested()\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 1, "creation_date": 1559668380, "post_id": 56447139, "comment_id": 99490455, "body": "Looks like it is intentionally disallowed: <a href=\"https://youtrack.jetbrains.com/issue/KT-17717\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-17717</a>"}, {"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 1, "creation_date": 1559668523, "post_id": 56447139, "comment_id": 99490501, "body": "I spoke too soon, that issue says that it should work for classes defined in Java, but there was never any followup..."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 0, "creation_date": 1559674682, "post_id": 56447139, "comment_id": 99492908, "body": "@ean5533 good catch! I wonder how one could differentiate between Kotlin nested classes and Java ones when at the end both are the same in the resulting byte code... So it seems to me that either both should work or none..."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 1, "last_activity_date": 1559662707, "creation_date": 1559662707, "answer_id": 56447139, "question_id": 56435216, "link": "https://stackoverflow.com/questions/56435216/is-it-possible-to-reference-a-nested-class-from-a-subclass-like-in-java/56447139#56447139", "title": "Is it possible to reference a nested class from a subclass like in Java?", "body": "<p>As you can't access the source code or have to wait for the PR to be approved, I probably would try it with <a href=\"https://kotlinlang.org/docs/reference/type-aliases.html\" rel=\"nofollow noreferrer\"><code>typealias</code></a> instead, e.g.:</p>\n\n<pre><code>typealias MyNested = Superclass.Nested\n</code></pre>\n\n<p>and use it like:</p>\n\n<pre><code>MyNested()\n</code></pre>\n\n<p>As soon as <code>Superclass</code> is obsolete you only need to replace the type-alias, e.g.:</p>\n\n<pre><code>typealias MyNested = Subclass.Nested\n</code></pre>\n\n<p>That way you only have 1 place where you need to adapt your code when <code>Superclass</code> is removed.</p>\n\n<p>It's now really a pity that both classes aren't under your control and that this feature of Java doesn't work in Kotlin. On the other hand I am really glad that it isn't. Something like <code>Subclass.Nested</code> when there actually isn't any such nested class there, isn't really convenient in my opinion. However, that's also what is possible with extension functions... so now I am in conflict ;-)</p>\n\n<p>As also said in the comment: there might be a chance that this could also just be a bug. I didn't find any sources yet whether this was a deliberate design decision or not. It sounds good to me, but that doesn't mean it was intentional. You may want to ask the same question in the <a href=\"https://discuss.kotlinlang.org/\" rel=\"nofollow noreferrer\">Kotlin forums</a> or <a href=\"https://kotl.in/issue\" rel=\"nofollow noreferrer\">open an issue</a> and link it here.</p>\n"}], "owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1559662707, "creation_date": 1559600440, "last_edit_date": 1559658123, "question_id": 56435216, "link": "https://stackoverflow.com/questions/56435216/is-it-possible-to-reference-a-nested-class-from-a-subclass-like-in-java", "title": "Is it possible to reference a nested class from a subclass like in Java?", "body": "<p>There is a Java library I'm interacting with that has the following:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class Superclass {\n    static class Nested {}\n}\n\nclass Subclass extends Superclass {}\n</code></pre>\n\n<p>This is code is illegal in Kotlin:</p>\n\n<pre><code>class Test() {\n    val thing1 = Superclass.Nested()\n    val thing2 = Subclass.Nested()\n}\n</code></pre>\n\n<p>The compiler says that <code>Subclass.Nested</code> is an unresolved reference. However, the equivalent Java code is not illegal:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class Test {\n    Superclass.Nested thing1 = new Superclass.Nested();\n    Subclass.Nested thing2 = new Subclass.Nested();\n}\n</code></pre>\n\n<p>Is there some other way in Kotlin to reference a nested class by qualifying it with a subclass instead of the superclass?</p>\n\n<p>(Why? Because there is an unusual deprecation pattern in play here: <code>Superclass</code> is deprecated and is being replaced by <code>Subclass</code>. The <code>Nested</code> class is going to be moved into <code>Subclass</code> later. That is the external constraint I am working under.)</p>\n"}, {"tags": ["android", "kotlin", "dependency-injection", "kodein"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11584963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02c2323dfdb0a362ccb21bcd4e63bf8?s=128&d=identicon&r=PG&f=1", "display_name": "user67223", "link": "https://stackoverflow.com/users/11584963/user67223"}, "edited": false, "score": 1, "creation_date": 1564497901, "post_id": 57052304, "comment_id": 101046711, "body": "I used instance(arg=M(id, type)), but in debug inform &quot;Lazy value not initialized yet.&quot; for the variable."}], "tags": [], "owner": {"reputation": 7879, "user_id": 1269640, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/41b92fffd289939497f29809d146c59d?s=128&d=identicon&r=PG", "display_name": "Salomon BRYS", "link": "https://stackoverflow.com/users/1269640/salomon-brys"}, "is_accepted": false, "score": 0, "last_activity_date": 1563262799, "creation_date": 1563262799, "answer_id": 57052304, "question_id": 56435081, "link": "https://stackoverflow.com/questions/56435081/how-to-recover-object-with-a-factory-binding-with-two-arguments-in-kodein/57052304#57052304", "title": "How to recover object with a factory binding with two arguments in kodein?", "body": "<p>If you want to retrieve a facotry and not an instance, use <code>by factory2()</code>.</p>\n\n<p>If you want to retrieve an instance, use <code>by instance(arg = M(42L, \"whatever\"))</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 11584963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02c2323dfdb0a362ccb21bcd4e63bf8?s=128&d=identicon&r=PG&f=1", "display_name": "user67223", "link": "https://stackoverflow.com/users/11584963/user67223"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1563262799, "creation_date": 1559599392, "question_id": 56435081, "link": "https://stackoverflow.com/questions/56435081/how-to-recover-object-with-a-factory-binding-with-two-arguments-in-kodein", "title": "How to recover object with a factory binding with two arguments in kodein?", "body": "<p>I called a ViewModel that gets three arguments in its constructor:</p>\n\n<pre><code>class DetailViewModel(\n    private val id: Long,\n    private val tipo: String,\n    private val msRepository: MSRepository) : ViewModel() {\nval establishmentProfessional by lazyDeferred { \n      msRepository.getEstablishment(id, tipo)\n   }\n}\n</code></pre>\n\n<p>And I created a factory to build the object com DI:</p>\n\n<pre><code>class DetailViewModelFactory(\n    private val id: Long,\n    private val tipo: String,\n    private val msRepository: MSRepository\n    ) : ViewModelProvider.NewInstanceFactory() {\n\n@Suppress(\"UNCHECKED_CAST\")\noverride fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n    return DetailViewModelFactory(id,  tipo, msRepository) as T\n     }\n}\n</code></pre>\n\n<p>I wrote the Factory binding as follows:<code>bind() from factory { id: Long, entity: String -&gt; DetailViewModelFactory(id, entity, instance()) }</code>, the latter being previously reported.</p>\n\n<p>However, when I try to retrieve the object, I can not spell the code correctly:</p>\n\n<pre><code>private var viewModelFactory: ( (Long, String) -&gt; DetailViewModelFactory) by factory()\n</code></pre>\n\n<p>How do I retrieve the object correctly with a series of arguments?</p>\n\n<p>I did not find in the documentation how to do it, because the information is insufficient.<a href=\"https://kodein.org/Kodein-DI/?6.2/core#direct-retrieval\" rel=\"nofollow noreferrer\">Retrieval Direct</a>, \n<a href=\"https://github.com/Kodein-Framework/Kodein-DI/blob/master/doc/core.adoc#factory-binding\" rel=\"nofollow noreferrer\">multiple argumentes</a>, \n<a href=\"https://github.com/Kodein-Framework/Kodein-DI/issues/196\" rel=\"nofollow noreferrer\">Little documentation on multi-argument factories</a>, \n<a href=\"https://stackoverflow.com/questions/56018569/how-can-i-use-kodeins-direct-retrieval-to-fetch-a-dependency-bound-as-a-factory/56020437#56020437\">How can I use Kodein's direct retrieval to fetch a dependency bound as a factory?</a></p>\n"}, {"tags": ["android", "arrays", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 2, "creation_date": 1559604094, "post_id": 56435043, "comment_id": 99465476, "body": "It&#39;s hard to help you without more context. One way to sort this out is to add some types, especially on <code>ogr1</code>, <code>ozet</code> and <code>bilgiler</code>. You&#39;ll probably realize the problem by yourself if you do this."}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1559672952, "post_id": 56435043, "comment_id": 99492179, "body": "What you&#39;re writing there doesn&#39;t make any sense. Why did you put a <code>break</code> in the <code>if</code> statement? If you meant to put <code>break</code> into the <code>for</code> loop, that means that the <code>for</code> loop will break after the first iteration. In case you still have the error after removing the <code>break</code>, please post a minimal example reproducing your problem"}, {"owner": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "edited": false, "score": 0, "creation_date": 1559673369, "post_id": 56435043, "comment_id": 99492353, "body": "My guess is that <code>ogr1.ozet()</code> returns unit and therefore we would need to see this function"}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "reply_to_user": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "edited": false, "score": 0, "creation_date": 1559679240, "post_id": 56435043, "comment_id": 99494732, "body": "@Fred Good catch! I assume <code>bilgiler</code> is some sort of List, but without knowing the exact type (probably <code>List&lt;Unit&gt;</code> or <code>List&lt;Any&gt;</code>) it&#39;s hard to tell"}, {"owner": {"reputation": 3, "user_id": 11596016, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f26H6ClxFQM/AAAAAAAAAAI/AAAAAAAAEiY/178iTI91ZwI/photo.jpg?sz=128", "display_name": "Mert Arda Asar", "link": "https://stackoverflow.com/users/11596016/mert-arda-asar"}, "reply_to_user": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "edited": false, "score": 0, "creation_date": 1559727897, "post_id": 56435043, "comment_id": 99507862, "body": "@Fred I added all of the codes"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11596016, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f26H6ClxFQM/AAAAAAAAAAI/AAAAAAAAEiY/178iTI91ZwI/photo.jpg?sz=128", "display_name": "Mert Arda Asar", "link": "https://stackoverflow.com/users/11596016/mert-arda-asar"}, "edited": false, "score": 0, "creation_date": 1559733464, "post_id": 56458632, "comment_id": 99510350, "body": "Thanks, that worked. Also , How can I add &#39;var ortalama&#39; to &#39;fun ozet():String&#39; ?"}], "tags": [], "owner": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "is_accepted": true, "score": 0, "last_activity_date": 1559730166, "creation_date": 1559730166, "answer_id": 56458632, "question_id": 56435043, "link": "https://stackoverflow.com/questions/56435043/i-cant-print-array-elements-kotlin-unit/56458632#56458632", "title": "I can&#39;t print array elements (kotlin.Unit)", "body": "<p>As I suspected, the function <code>ozet()</code> returns <code>Unit</code> since it's declared like:</p>\n\n<pre><code>fun ozet() {\n    var ozet = \"$isim,$numara\"\n}\n</code></pre>\n\n<p>When the return type is omitted, kotlin knows it's <code>Unit</code>, so it is the same as:</p>\n\n<pre><code>fun ozet(): Unit {\n    var ozet = \"$isim,$numara\"\n}\n</code></pre>\n\n<p>For this reason, every time you execute it and put the result in the array you get back a <code>Unit</code> object and that's why you see <code>Unit</code>.</p>\n\n<p>It's hard to say what exactly should be in the array, but I guess it's easy to realise it needs to be something returned from <code>ozet</code>.</p>\n\n<p>If you want to put the contents of the variable you could simply change it to:</p>\n\n<pre><code>fun ozet() = \"$isim,$numara\"\n</code></pre>\n\n<p>This is a shorthand for:</p>\n\n<pre><code>fun ozet(): String {\n    return \"$isim,$numara\"\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11596016, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f26H6ClxFQM/AAAAAAAAAAI/AAAAAAAAEiY/178iTI91ZwI/photo.jpg?sz=128", "display_name": "Mert Arda Asar", "link": "https://stackoverflow.com/users/11596016/mert-arda-asar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 56458632, "answer_count": 1, "score": -1, "last_activity_date": 1559730166, "creation_date": 1559599158, "last_edit_date": 1559728213, "question_id": 56435043, "link": "https://stackoverflow.com/questions/56435043/i-cant-print-array-elements-kotlin-unit", "title": "I can&#39;t print array elements (kotlin.Unit)", "body": "<p>I added all codes. I want to write all of the elements of the array but I can only see \" kotlin.Unit \" on the screen. For example, if I ad three 'ozet' to 'bilgiler' I see three \"kotlin.Unit\". Is that related to arrays type? (I deleted 'Menu' function while sending)\n<a href=\"https://i.stack.imgur.com/30e46.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<pre><code>    package OOP\n\nclass Ogrenci constructor(var isim:String,var numara:Int)\n{\nfun bilgileriGoster ()\n{\n\n    println(\"\u00d6\u011frencinin Ad\u0131: $isim\"+\" \"+ \"($numara)\")\n\n    print(\"\u0130lk s\u0131nav notunu girin: \")\n    var not1 = readLine()!!.toInt()\n\n    print(\"\u0130kinci s\u0131nav notunu girin: \")\n    var not2 = readLine()!!.toInt()\n\n    var ortalama:Float = (not1+not2).toFloat()/2\n    println(\"$isim adl\u0131 \u00f6\u011frencinin ortalamas\u0131:\"+ortalama )\n}\n    fun ozet()\n    {\n        var ozet = \"$isim,$numara\"\n    }\n}\n    fun main()\n{\n    var bilgiler = arrayListOf&lt;Any&gt;(0)\n\n var Se\u00e7im = Menu()\nwhile (true){\n    if (Se\u00e7im==1) {\n        println(\"\u00d6\u011frenci Ad\u0131n\u0131 Giriniz:\")\n        var ad: String = readLine().toString()\n        println(\"\u00d6\u011frenci Numaras\u0131n\u0131 Giriniz:\")\n        var numara: Int = readLine()!!.toInt()\n\n        var ogr1: Ogrenci = Ogrenci(ad, numara)\n        ogr1.bilgileriGoster()\n        println()\n\n        var ozet = ogr1.ozet()\n        bilgiler.add(bilgiler.size,ozet)\n\n        println(\"1-Devam\")\n        println(\"2-\u00c7\u0131k\u0131\u015f\")\n        print(\"Se\u00e7im:\")\n        var karar = readLine()!!.toInt()\n\n        if (karar==2)\n        {\n            for (index in bilgiler)\n        {\n            print(index)\n        }\n            break\n        }\n\n    }\n    }\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["kotlin", "kotlin-js", "kotlin-js-interop"], "answers": [{"comments": [{"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1559648996, "post_id": 56440602, "comment_id": 99479943, "body": "I understand your point about identifiers, and I understand what the compile error means, but not every declaration has to be compiled to a JS identifier. I certainly would understand that writing <code>val `content-length` = 2</code> in Kotlin would trigger a compiler error, but <code>val length = headers.`content-length`</code> should be valid and compiled to <code>let length = headers[&quot;content-type&quot;]</code>. Here we&#39;re talking about a type declaration, which doesn&#39;t have to appear in the produced JS at all. In fact, what matters in JS regarding an interface is only property access, and this is valid as I have shown."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1559649056, "post_id": 56440602, "comment_id": 99479975, "body": "I&#39;m not familiar with the Javascript compiler so I can&#39;t speculate any further I&#39;m afraid. :("}, {"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1559655674, "post_id": 56440602, "comment_id": 99483811, "body": "I&#39;m not familiar either with the details of the Kotlin/JS compiler, unfortunately. But in this case, the JS library already exists, so I know this is possible to use in JS, I would just love to be able to type this properly in Kotlin without resorting to <code>dynamic</code>."}, {"owner": {"reputation": 1128, "user_id": 2550940, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/188596724cddd5444ae629042981be73?s=128&d=identicon&r=PG", "display_name": "gunslingor", "link": "https://stackoverflow.com/users/2550940/gunslingor"}, "edited": false, "score": 0, "creation_date": 1598105268, "post_id": 56440602, "comment_id": 112352294, "body": "This is a real bug in KJS I believe. &#39;grapesjs-lory-slider&#39;: { } is valid JS, but there is ZERO way to get kotlin to transpile to that. Pretty big problem... it means no one can interface with an javascript packages that use that convention... if I am not mistaken. in KJS I should be able to do <code>grapesjs-lory-slider</code> = jsObject&lt;dynamic&gt; { }"}], "tags": [], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "is_accepted": false, "score": 2, "last_activity_date": 1559649682, "last_edit_date": 1559649682, "creation_date": 1559638734, "answer_id": 56440602, "question_id": 56434633, "link": "https://stackoverflow.com/questions/56434633/kotlin-js-external-declaration-name-contains-illegal-chars-that-cant-appear/56440602#56440602", "title": "Kotlin/JS external declaration - &quot;Name contains illegal chars that can&#39;t appear in JavaScript identifier&quot;", "body": "<p>The problem is that hyphens <code>-</code> are not valid identifiers in <strong>Javascript</strong>. This means that you can't declare a variable like this:</p>\n\n<pre><code>var content-length = 4\n</code></pre>\n\n<p>You can only do this: <code>var contentLength = 4</code></p>\n\n<p>Kotlin Kultiplatform will not allow you to write common code which can't be compiled to a target platfrom, that's why even if that this is valid Kotlin code:</p>\n\n<pre><code>var `content-length`: String? // ...\n</code></pre>\n\n<p>you still can't use it in a Multiplatform environment because of the <em>Javascript</em> constraints.</p>\n\n<p>Please also note that while this might be valid <em>Typescript</em> code, Kotlin doesn't have a Typescript target, only a Javascript one, so bear this in mind.</p>\n"}, {"comments": [{"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1618694784, "post_id": 63540807, "comment_id": 118681397, "body": "There is nowhere here where the headers&#39; type is defined in Kotlin. The point of the question is about finding a way to statically and properly type this interface/class, not to find ways to construct instances."}], "tags": [], "owner": {"reputation": 1128, "user_id": 2550940, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/188596724cddd5444ae629042981be73?s=128&d=identicon&r=PG", "display_name": "gunslingor", "link": "https://stackoverflow.com/users/2550940/gunslingor"}, "is_accepted": false, "score": 1, "last_activity_date": 1598129125, "last_edit_date": 1598129125, "creation_date": 1598128107, "answer_id": 63540807, "question_id": 56434633, "link": "https://stackoverflow.com/questions/56434633/kotlin-js-external-declaration-name-contains-illegal-chars-that-cant-appear/63540807#63540807", "title": "Kotlin/JS external declaration - &quot;Name contains illegal chars that can&#39;t appear in JavaScript identifier&quot;", "body": "<p>Hyphens are allowed in JSONs, and I believe they may be allowed in JavaScript if you use ticks (``). I had this same hyphen issue while using jsObject, this was the solution, literally.</p>\n<p>My hyphen problem and this solution:</p>\n<pre><code>pluginsOpts = jsObject&lt;dynamic&gt; {\n        this[&quot;grapesjs-tabs&quot;] = jsObject&lt;dynamic&gt; {\n            tabsBlock = jsObject&lt;dynamic&gt; {\n                category = &quot;Extra&quot;\n            }\n        }\n}\n</code></pre>\n<p>Try this, literally:</p>\n<pre><code>export interface Headers {\n  this['content-length']?: string;\n}\n</code></pre>\n<p>I couldn't get this working in an external, but this was a good hyphen hack that may assist. Here is how you would use it: Rather than defining an external object, you would use a jsObject{} in it's place. You can nest them, but be sure to explicitly include the dynamic identifier in every layer, especially if you have to use multiple this(es) in different layers to overcome the hyphen issue. This is your <strong>solution</strong>:</p>\n<pre><code>val Header = jsObject&lt;dynamic&gt; {\n    this[&quot;content-length&quot;] = &quot;something&quot;\n}\n</code></pre>\n<p>Let &quot;this&quot; be a lesson to you.</p>\n"}, {"comments": [{"owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "edited": false, "score": 0, "creation_date": 1618694755, "post_id": 65978768, "comment_id": 118681386, "body": "But how is your <code>Headers</code> type declared here? That&#39;s the whole point of the question"}], "tags": [], "owner": {"reputation": 331, "user_id": 10928439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f96adfa5034912960b1ee84fb06923?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Jacobs", "link": "https://stackoverflow.com/users/10928439/simon-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1612093852, "creation_date": 1612093852, "answer_id": 65978768, "question_id": 56434633, "link": "https://stackoverflow.com/questions/56434633/kotlin-js-external-declaration-name-contains-illegal-chars-that-cant-appear/65978768#65978768", "title": "Kotlin/JS external declaration - &quot;Name contains illegal chars that can&#39;t appear in JavaScript identifier&quot;", "body": "<p>I solved this in my app by writing a library function. It takes advantage of the dynamic type (returned by the <code>js</code> function) to assign values to an object without the compiler checking.</p>\n<pre><code>fun jsObjectOfPairs( vararg pairs: Pair&lt;String,Any&gt; ): dynamic {\n   val jsObject = js( &quot;{}&quot; )\n   pairs.forEach {\n      jsObject[ it.key ] = it.value\n   }\n   return jsObject\n}\n</code></pre>\n<p>Then you have a function which you can construct an arbitrary JavaScript object with no restrictions on characters in the property keys, eg:</p>\n<pre><code>val headers = jsObjectOfPairs( &quot;content-length&quot; to 552 ) as Headers\n</code></pre>\n"}], "owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1618695061, "creation_date": 1559596529, "last_edit_date": 1618695061, "question_id": 56434633, "link": "https://stackoverflow.com/questions/56434633/kotlin-js-external-declaration-name-contains-illegal-chars-that-cant-appear", "title": "Kotlin/JS external declaration - &quot;Name contains illegal chars that can&#39;t appear in JavaScript identifier&quot;", "body": "<p>EDIT: This is not supported yet and <a href=\"https://youtrack.jetbrains.com/issue/KT-31799\" rel=\"nofollow noreferrer\">tracked on Kotlin YouTrack</a></p>\n<hr />\n<p>I'm trying to write a Kotlin <code>external</code> declaration matching the following Typescript interface (this is valid TS to represent JavaScript accesses via <code>headers['content-length']</code>):</p>\n<pre><code>export interface Headers {\n  'content-length'?: string;\n}\n</code></pre>\n<p>Dukat generates the following, which should be considered valid:</p>\n<pre><code>external interface Headers {\n    var `content-length`: String? get() = definedExternally; set(value) = definedExternally\n}\n</code></pre>\n<p>But now the compiler complains with:</p>\n<p><code>Name contains illegal chars that can't appear in JavaScript identifier</code></p>\n<p><strong>It is true that it can't appear in a JS identifier, but it doesn't have to.</strong> All Kotlin accesses to this property like:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val length = headers.`content-length`\n</code></pre>\n<p>could be valid if compiled to <code>const length = headers[&quot;content-length&quot;]</code>.</p>\n<p>I tried to use <code>@JsName</code> to work around it the following ways:</p>\n<ul>\n<li><code>@JsName(&quot;content-length&quot;)</code></li>\n<li><code>@JsName(&quot;'content-length'&quot;)</code></li>\n<li><code>@JsName(&quot;\\&quot;content-length\\&quot;&quot;)</code></li>\n</ul>\n<p>But all of these fail because they only allow strings that are valid JS identifiers.\nIs there a way to work around this?</p>\n"}, {"tags": ["java", "gradle", "kotlin", "bukkit"], "comments": [{"owner": {"reputation": 1556, "user_id": 10433739, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SseFTbME50A/AAAAAAAAAAI/AAAAAAAAAAw/X-bo6dqWWHc/photo.jpg?sz=128", "display_name": "Benjamin Urquhart", "link": "https://stackoverflow.com/users/10433739/benjamin-urquhart"}, "edited": false, "score": 0, "creation_date": 1559594558, "post_id": 56434280, "comment_id": 99462893, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/26956393/java-plugin-library-shading\">Java plugin library shading</a>"}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1559639189, "post_id": 56434280, "comment_id": 99474753, "body": "No, he is using Gradle, not Maven."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5382007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c73c5144e3e582610c0ca449520721?s=128&d=identicon&r=PG", "display_name": "graphicalcake95", "link": "https://stackoverflow.com/users/5382007/graphicalcake95"}, "edited": false, "score": 0, "creation_date": 1559672386, "post_id": 56440713, "comment_id": 99491989, "body": "I tried what you suggested, but I still get the same error, (I edited my original post to add the build.gradle)"}, {"owner": {"reputation": 35, "user_id": 5382007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c73c5144e3e582610c0ca449520721?s=128&d=identicon&r=PG", "display_name": "graphicalcake95", "link": "https://stackoverflow.com/users/5382007/graphicalcake95"}, "edited": false, "score": 0, "creation_date": 1559745589, "post_id": 56440713, "comment_id": 99517026, "body": "Same as the original (<code>Caused by: java.lang.ClassNotFoundException: kotlin.jvm.internal.Intrinsics</code>)"}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 35, "user_id": 5382007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c73c5144e3e582610c0ca449520721?s=128&d=identicon&r=PG", "display_name": "graphicalcake95", "link": "https://stackoverflow.com/users/5382007/graphicalcake95"}, "edited": false, "score": 0, "creation_date": 1559920469, "post_id": 56440713, "comment_id": 99582892, "body": "Try adding the <a href=\"https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-runtime\" rel=\"nofollow noreferrer\">kotlin-runtime</a> library as well. Did you check your <code>shadow.jar</code> whether it has Kotlin&#39;s code copied into it?"}, {"owner": {"reputation": 35, "user_id": 5382007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c73c5144e3e582610c0ca449520721?s=128&d=identicon&r=PG", "display_name": "graphicalcake95", "link": "https://stackoverflow.com/users/5382007/graphicalcake95"}, "edited": false, "score": 0, "creation_date": 1560011802, "post_id": 56440713, "comment_id": 99603692, "body": "kotlin-runtime page says it is deprecated, so use kotlin-stdlib instead. Where would I find the shadow.jar? (it&#39;s not in build/libs). I&#39;ve opened the finished jar file with 7zip, and the only packages are from my project (no org.jetbrains.kotlin etc)"}, {"owner": {"reputation": 35, "user_id": 5382007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c73c5144e3e582610c0ca449520721?s=128&d=identicon&r=PG", "display_name": "graphicalcake95", "link": "https://stackoverflow.com/users/5382007/graphicalcake95"}, "edited": false, "score": 0, "creation_date": 1560088230, "post_id": 56440713, "comment_id": 99616031, "body": "I googled a bit more and some people said to add &quot;build.dependsOn shadowJar&quot; to the build.gradle. When I do this, I get a jar file for my project and also a shadow.jar in my build/libs folder, but when I open them both up as zip files, they just have my packages in (no Kotlin code)"}, {"owner": {"reputation": 4874, "user_id": 595304, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e4cc4011841c2a363c66e259c68a567f?s=128&d=identicon&r=PG", "display_name": "evotopid", "link": "https://stackoverflow.com/users/595304/evotopid"}, "edited": false, "score": 0, "creation_date": 1589018583, "post_id": 56440713, "comment_id": 109128072, "body": "For me it worked when I changed the dependency directive from shadow to compile, as specified in <a href=\"https://www.spigotmc.org/wiki/how-to-use-kotlin-in-your-plugins/\" rel=\"nofollow noreferrer\">spigotmc.org/wiki/how-to-use-kotlin-in-your-plugins</a>"}], "tags": [], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "is_accepted": false, "score": 0, "last_activity_date": 1559639063, "creation_date": 1559639063, "answer_id": 56440713, "question_id": 56434280, "link": "https://stackoverflow.com/questions/56434280/how-to-use-kotlin-with-a-bukkit-spigot-plugin-and-gradle/56440713#56440713", "title": "How to use Kotlin with a Bukkit/Spigot plugin and Gradle", "body": "<p>You indeed need to Shadow the Kotlin standard library into your plugin. Since you are using Gradle it can do this by using the <a href=\"https://imperceptiblethoughts.com/shadow/\" rel=\"nofollow noreferrer\">Shadow Plugin</a> which is similar to <em>Shade</em> but Shade is only for <strong>Maven</strong> so it won't be useful for you.</p>\n\n<p>Using the Shadow plugin is straightforward. First you apply the plugin itself:</p>\n\n<pre><code>plugins {\n  id 'com.github.johnrengelman.shadow' version '5.0.0'\n}\n</code></pre>\n\n<p>then you can configure Shadow:</p>\n\n<pre><code>shadowJar {\n   baseName = 'shadow'\n   classifier = null\n   version = null\n}\n</code></pre>\n\n<p>This will create a <code>shadow.jar</code> in your build folder when you build the project. After applying the shadow plugin you can <code>shadow</code> dependencies to be included in the fat jar:</p>\n\n<pre><code>dependencies {\n  shadow \"org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion\"\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5382007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c73c5144e3e582610c0ca449520721?s=128&d=identicon&r=PG", "display_name": "graphicalcake95", "link": "https://stackoverflow.com/users/5382007/graphicalcake95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1893, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559672353, "creation_date": 1559594404, "last_edit_date": 1559672353, "question_id": 56434280, "link": "https://stackoverflow.com/questions/56434280/how-to-use-kotlin-with-a-bukkit-spigot-plugin-and-gradle", "title": "How to use Kotlin with a Bukkit/Spigot plugin and Gradle", "body": "<p>I am trying to use Kotlin for a Spigot plugin (for version 1.8.8), as I find Kotlin a lot more efficient to use. But, whenever I try and run the plugin, I get this error:</p>\n\n<pre><code>Caused by: java.lang.ClassNotFoundException: kotlin.jvm.internal.Intrinsics\n</code></pre>\n\n<p>I have looked online, and it seems I need to shade the Kotlin jar file into my plugin, could anyone advise me how I would do that?</p>\n\n<p><strong>UPDATE</strong> After trying what was suggested below I still get the same error.\nHere is my build.gradle:</p>\n\n<pre><code>plugins {\n    id 'java'\n    id 'org.jetbrains.kotlin.jvm' version '1.3.31'\n    id 'com.github.johnrengelman.shadow' version '4.0.2'\n}\n\ngroup 'me.graphicalcake95'\nversion '1.0.0'\n\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n    maven {\n        url 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/'\n    }\n}\n\nshadowJar {\n    baseName = 'shadow'\n    classifier = null\n    version = null\n}\n\ndependencies {\n    testCompile group: 'junit', name: 'junit', version: '4.12'\n    compileOnly 'org.bukkit:bukkit:1.8.8-R0.1-SNAPSHOT'\n    shadow \"org.jetbrains.kotlin:kotlin-stdlib-jdk8\"\n}\ncompileKotlin {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\ncompileTestKotlin {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\n</code></pre>\n"}, {"tags": ["animation", "kotlin", "libgdx", "actor", "scene2d"], "comments": [{"owner": {"reputation": 3646, "user_id": 11514534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10ca983c4ac8bcb07661de28130b991?s=128&d=identicon&r=PG&f=1", "display_name": "second", "link": "https://stackoverflow.com/users/11514534/second"}, "edited": false, "score": 2, "creation_date": 1559588185, "post_id": 56432494, "comment_id": 99460546, "body": "I have no idea how to read kotlin, but doesn&#39;t <code>setScreen(MainMenuScreen(this))</code> create a new MainMenuScreen object? That would explain why x is reset."}, {"owner": {"reputation": 103, "user_id": 7097494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1LjYr.png?s=128&g=1", "display_name": "lenivaya10001", "link": "https://stackoverflow.com/users/7097494/lenivaya10001"}, "reply_to_user": {"reputation": 3646, "user_id": 11514534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10ca983c4ac8bcb07661de28130b991?s=128&d=identicon&r=PG&f=1", "display_name": "second", "link": "https://stackoverflow.com/users/11514534/second"}, "edited": false, "score": 0, "creation_date": 1559664089, "post_id": 56432494, "comment_id": 99488442, "body": "you are right. Now all work as expected uses syntax <code>if (fresh) setScreen(MainMenuScreen(this)); fresh = false</code>"}], "owner": {"reputation": 103, "user_id": 7097494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/1LjYr.png?s=128&g=1", "display_name": "lenivaya10001", "link": "https://stackoverflow.com/users/7097494/lenivaya10001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559585463, "creation_date": 1559585463, "question_id": 56432494, "link": "https://stackoverflow.com/questions/56432494/why-image-moved-on-screen-jump-to-default-position-every-click-on-screen", "title": "Why Image() moved on screen, jump to default position , every click on screen , and start moving from default position?", "body": "<p>I have simple demo project. Image moved along screen follow mouse point.</p>\n\n<p>LibGDX <code>Image</code> instance jump to default x coordinate along x axis, determined inside MainMenuScreen.kt <code>show</code> method, every time i click on screen, and start from default position moving. But i expect Image will continue/start new moving from last position before click on screen. How fix it, and what problem?</p>\n\n<p>Code is simple and short, and i can't understand what can be wrong.</p>\n\n<p>pastebin link to full project code:\n<a href=\"https://pastebin.com/4UQDjSWa\" rel=\"nofollow noreferrer\">https://pastebin.com/4UQDjSWa</a>  </p>\n\n<p>github link to project:\n<a href=\"https://github.com/3dformortals/demo-libgdx/tree/master/DemoMovingImageOnScreen\" rel=\"nofollow noreferrer\">https://github.com/3dformortals/demo-libgdx/tree/master/DemoMovingImageOnScreen</a>  </p>\n\n<p>full project code:</p>\n\n<pre><code>//-------\n//KDA.kt\n//-------\n\npackage com.kda\n\nimport com.badlogic.gdx.Game\nimport com.badlogic.gdx.Gdx\nimport com.badlogic.gdx.graphics.GL20\n\nimport gui.AnimationSkin as AniSkin\n\nclass KDA : Game() {\n    internal var screenWidth:Float = 0.0f\n    internal var screenHeight:Float = 0.0f\n    internal val aniskin:AniSkin = AniSkin() //incuded human.atlas TextureAtlas for animation\n\n    override fun create() {\n        screenWidth = Gdx.graphics.width.toFloat()\n        screenHeight = Gdx.graphics.height.toFloat()\n        aniskin.prepare() //call preparing method for connect human.atlas for later using for animation\n    }\n\n    override fun render() {\n        Gdx.gl.glClearColor(1f, 0f, 0f, 1f)\n        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT)\n\n        if (Gdx.input.justTouched()){\n            setScreen(MainMenuScreen(this))\n        }\n        super.render()\n    }\n}\n\n\n//-------------------\n//AnimationSkin.kt\n//-------------------\n\npackage gui\n\nimport com.badlogic.gdx.Gdx\nimport com.badlogic.gdx.graphics.g2d.TextureAtlas\nimport com.badlogic.gdx.scenes.scene2d.ui.Skin\n\nclass AnimationSkin : Skin() {\n    fun prepare(){\n        addRegions(TextureAtlas(Gdx.files.internal(\"animation/human.atlas\")))\n    }\n}\n\n\n//----------------------\n//MainMenuScreen.kt\n//----------------------\n\npackage com.kda\n\nimport animated.ImageMoving\nimport com.badlogic.gdx.Gdx\nimport com.badlogic.gdx.ScreenAdapter\nimport com.badlogic.gdx.graphics.GL20\nimport com.badlogic.gdx.scenes.scene2d.Stage\n\nimport com.badlogic.gdx.utils.viewport.FitViewport\n\nclass MainMenuScreen(private val game: KDA) : ScreenAdapter() {\n    private val stage: Stage = Stage(FitViewport(game.screenWidth, game.screenHeight))\n    private val player = ImageMoving(game)\n    private val sprite = player.viewBox()\n\n    override fun show() {\n        Gdx.input.inputProcessor = stage\n        stage.isDebugAll = true //turn on frames around objects\n        sprite.x = 500f\n        //------------------------------------------------------------------------------------\n        //later, every mouse click on screen sprite jump to x500 position, and i can't fix it\n        //if i don't execute `sprite.x = 500f` , then sprite jump to x0 position, every click on screen\n        //--------------------------------------------------------------------------------------------\n        stage.addActor(sprite)\n    }\n\n    override fun resize(width: Int, height: Int) {\n        stage.viewport.update(width, height, true)\n    }\n\n    override fun render(delta: Float) {\n        super.render(delta)\n        Gdx.gl.glClearColor(0f, 0.5f, 0.5f, 1f)\n        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT)\n        if(Gdx.input.justTouched()) println(\"before calculateAction box.x= \"+sprite.x.toString()) //500 always\n        player.calculateAction(delta) //call player method for calculation moving on screen\n        println(sprite.x) //print normal as expected\n        stage.act(delta)\n        stage.draw()\n\n    }\n}\n\n\n//-----------------\n//ImageMoving.kt\n//-----------------\n\npackage animated\n\nimport com.badlogic.gdx.Gdx\nimport com.badlogic.gdx.scenes.scene2d.ui.Image\nimport com.kda.KDA\n\nclass ImageMoving(game: KDA) {\n    fun viewBox() = img\n    private val img = Image(game.aniskin.getDrawable(\"move-skin-male-back-R-0\"))\n    fun calculateAction(delta:Float){\n        if (img.x &gt; Gdx.input.x) img.x-=(100*delta).toInt().toFloat()\n        else if (img.x &lt; Gdx.input.x) img.x+=(100*delta).toInt().toFloat()\n    }\n}\n\n\n//----------------------\n//DesktopLauncher.kt\n//---------------------\n\npackage com.kda.desktop\n\nimport com.badlogic.gdx.backends.lwjgl.LwjglApplication\nimport com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration\nimport com.kda.KDA\n\nobject DesktopLauncher {\n    @JvmStatic\n    fun main(arg: Array&lt;String&gt;) {\n        val config = LwjglApplicationConfiguration()\n        config.height = 720\n        config.width = 1280\n        LwjglApplication(KDA(), config)\n    }\n}\n</code></pre>\n\n<p>gif animation demo of jumping image to default position <code>x=500</code> after clicking on screen<br>\n<a href=\"https://i.stack.imgur.com/0Ny4p.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Ny4p.gif\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "firebase-realtime-database"], "answers": [{"comments": [{"owner": {"reputation": 5540, "user_id": 3675659, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/CGSNr.jpg?s=128&g=1", "display_name": "Gaket", "link": "https://stackoverflow.com/users/3675659/gaket"}, "reply_to_user": {"reputation": 3, "user_id": 11595003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a2BOeJsDqgA/AAAAAAAAAAI/AAAAAAAAABE/kMNqM5hbjGs/photo.jpg?sz=128", "display_name": "FunTime channel", "link": "https://stackoverflow.com/users/11595003/funtime-channel"}, "edited": false, "score": 0, "creation_date": 1559586683, "post_id": 56432422, "comment_id": 99459964, "body": "Then start checking everything from the start, as it is impossible in your simple case. Are you sure you did everything from the manual? Did you add the App class name to the Manifest? You can post your Manifest, App and Activity classes here or to pastebin to show what you have. And did you create your Firebase project to the Firebase console, to start with? <a href=\"https://firebase.google.com/docs/android/setup\" rel=\"nofollow noreferrer\">firebase.google.com/docs/android/setup</a>"}, {"owner": {"reputation": 3, "user_id": 11595003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a2BOeJsDqgA/AAAAAAAAAAI/AAAAAAAAABE/kMNqM5hbjGs/photo.jpg?sz=128", "display_name": "FunTime channel", "link": "https://stackoverflow.com/users/11595003/funtime-channel"}, "edited": false, "score": 0, "creation_date": 1559587924, "post_id": 56432422, "comment_id": 99460436, "body": "I create navigation drawer activity project. And yes app class name added to Manifest, and yes I created firebase project."}, {"owner": {"reputation": 5540, "user_id": 3675659, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/CGSNr.jpg?s=128&g=1", "display_name": "Gaket", "link": "https://stackoverflow.com/users/3675659/gaket"}, "reply_to_user": {"reputation": 3, "user_id": 11595003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a2BOeJsDqgA/AAAAAAAAAAI/AAAAAAAAABE/kMNqM5hbjGs/photo.jpg?sz=128", "display_name": "FunTime channel", "link": "https://stackoverflow.com/users/11595003/funtime-channel"}, "edited": false, "score": 0, "creation_date": 1559588826, "post_id": 56432422, "comment_id": 99460754, "body": "Have you checked the Firebase configuration file you&#39;ve added to the project? 90% probability that you&#39;ve just missed a step in some configuration. Unfortunately, I&#39;m giving up with the current inputs about the problem."}, {"owner": {"reputation": 5540, "user_id": 3675659, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/CGSNr.jpg?s=128&g=1", "display_name": "Gaket", "link": "https://stackoverflow.com/users/3675659/gaket"}, "reply_to_user": {"reputation": 3, "user_id": 11595003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a2BOeJsDqgA/AAAAAAAAAAI/AAAAAAAAABE/kMNqM5hbjGs/photo.jpg?sz=128", "display_name": "FunTime channel", "link": "https://stackoverflow.com/users/11595003/funtime-channel"}, "edited": false, "score": 0, "creation_date": 1559589007, "post_id": 56432422, "comment_id": 99460820, "body": "Btw, you can add the same line to your Activity, before line var firebaseDatabase = FirebaseDatabase.getInstance(). If it doesn&#39;t work this way, that&#39;s rather a problem with Firebase config."}], "tags": [], "owner": {"reputation": 5540, "user_id": 3675659, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/CGSNr.jpg?s=128&g=1", "display_name": "Gaket", "link": "https://stackoverflow.com/users/3675659/gaket"}, "is_accepted": false, "score": 0, "last_activity_date": 1559586874, "last_edit_date": 1559586874, "creation_date": 1559585067, "answer_id": 56432422, "question_id": 56432338, "link": "https://stackoverflow.com/questions/56432338/make-sure-to-call-firebaseapp-initializeappcontext-first-the-error-is-not-sen/56432422#56432422", "title": "Make sure to call FirebaseApp.initializeApp(Context) first. The error is not sending message to firebase and application terminated", "body": "<p>As the error says, you need to init the FirebaseApp instance before calling its methods. This it the line:</p>\n\n<pre><code>FirebaseApp.initializeApp(this); // \"this\" is a context\n</code></pre>\n\n<p>A common way to do it - to add this line to <code>onCreate()</code> method of your custom Application class.</p>\n\n<p>And <a href=\"https://github.com/codepath/android_guides/wiki/Understanding-the-Android-Application-Class\" rel=\"nofollow noreferrer\">here, on Codepath</a> you can find how to create your custom Application class to put that line in.</p>\n\n<p><strong>Update</strong></p>\n\n<p>This will work after you configure the Firebase App project in Firebase Console as well. Don't forget to do the steps <a href=\"https://firebase.google.com/docs/android/setup\" rel=\"nofollow noreferrer\">from here, Firebase docs</a></p>\n"}], "owner": {"reputation": 3, "user_id": 11595003, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a2BOeJsDqgA/AAAAAAAAAAI/AAAAAAAAABE/kMNqM5hbjGs/photo.jpg?sz=128", "display_name": "FunTime channel", "link": "https://stackoverflow.com/users/11595003/funtime-channel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 570, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1614736184, "creation_date": 1559584618, "last_edit_date": 1614736184, "question_id": 56432338, "link": "https://stackoverflow.com/questions/56432338/make-sure-to-call-firebaseapp-initializeappcontext-first-the-error-is-not-sen", "title": "Make sure to call FirebaseApp.initializeApp(Context) first. The error is not sending message to firebase and application terminated", "body": "<p>I have only three line of code to send msg to firebase and when I run app it automatically terminated. I added firebase through Tools menu.</p>\n<p>I have tried internet permission to manifest file but didn't work.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>var firebaseDatabase = FirebaseDatabase.getInstance()\nvar databaseRef = firebaseDatabase.reference\ndatabaseRef.setValue(&quot;Hello There&quot;)\n</code></pre>\n<pre><code>implementation fileTree(dir: 'libs', include: ['*.jar'])\nimplementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\nimplementation 'androidx.appcompat:appcompat:1.0.0-beta01'\nimplementation 'androidx.core:core-ktx:1.2.0-alpha01'\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0-beta01'\nimplementation 'com.google.android.material:material:1.0.0-beta01'\nimplementation 'androidx.constraintlayout:constraintlayout:1.1.3'\nimplementation 'com.google.firebase:firebase-database:16.0.1'\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'androidx.test:runner:1.1.0-alpha4'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-alpha4'\n</code></pre>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.3.21'\n    repositories {\n        google()\n        jcenter()\n        \n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.3.2'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n        classpath 'com.google.gms:google-services:4.1.0'\n  }\n}\n</code></pre>\n<blockquote>\n<p>&quot;I/FirebaseInitProvider: FirebaseApp initialization unsuccessful&quot;\n&quot;Unable to start activity ComponentInfo{.MainActivity}:\njava.lang.IllegalStateException: Default FirebaseApp is not\ninitialized in this process ... Make sure to call\nFirebaseApp.initializeApp(Context) first.&quot;</p>\n</blockquote>\n"}, {"tags": ["android", "gradle", "kotlin", "dynatrace"], "answers": [{"comments": [{"owner": {"reputation": 2709, "user_id": 502365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/547746b56dcb2ea5614e5db9047c649f?s=128&d=identicon&r=PG", "display_name": "Hrafn", "link": "https://stackoverflow.com/users/502365/hrafn"}, "edited": false, "score": 0, "creation_date": 1559585441, "post_id": 56432341, "comment_id": 99459545, "body": "I had tried that but receive an error that the plugin wasn&#39;t found. Are you pulling it from jcenter?"}, {"owner": {"reputation": 916, "user_id": 2874418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhGuM.jpg?s=128&g=1", "display_name": "Diego Malone", "link": "https://stackoverflow.com/users/2874418/diego-malone"}, "reply_to_user": {"reputation": 2709, "user_id": 502365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/547746b56dcb2ea5614e5db9047c649f?s=128&d=identicon&r=PG", "display_name": "Hrafn", "link": "https://stackoverflow.com/users/502365/hrafn"}, "edited": false, "score": 0, "creation_date": 1559585495, "post_id": 56432341, "comment_id": 99459560, "body": "Put it on your app <code>build.gradle.kts</code>, not in your top level <code>build.gradle.kts</code>"}, {"owner": {"reputation": 2709, "user_id": 502365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/547746b56dcb2ea5614e5db9047c649f?s=128&d=identicon&r=PG", "display_name": "Hrafn", "link": "https://stackoverflow.com/users/502365/hrafn"}, "edited": false, "score": 0, "creation_date": 1559588752, "post_id": 56432341, "comment_id": 99460733, "body": "I have both the dependency and plugin in my application level gradle file, not the top level one."}, {"owner": {"reputation": 916, "user_id": 2874418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhGuM.jpg?s=128&g=1", "display_name": "Diego Malone", "link": "https://stackoverflow.com/users/2874418/diego-malone"}, "reply_to_user": {"reputation": 2709, "user_id": 502365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/547746b56dcb2ea5614e5db9047c649f?s=128&d=identicon&r=PG", "display_name": "Hrafn", "link": "https://stackoverflow.com/users/502365/hrafn"}, "edited": false, "score": 0, "creation_date": 1559589644, "post_id": 56432341, "comment_id": 99461024, "body": "You should have the classpath dependency on your top level <code>build.gradle.kts</code> and the <code>plugins</code> DSL call in your app <code>build.gradle.kts</code>. I have tried many combinations here and I couldn&#39;t make it work with the classpath in my app&#39;s <code>build.gradle.kts</code>."}, {"owner": {"reputation": 2709, "user_id": 502365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/547746b56dcb2ea5614e5db9047c649f?s=128&d=identicon&r=PG", "display_name": "Hrafn", "link": "https://stackoverflow.com/users/502365/hrafn"}, "edited": false, "score": 0, "creation_date": 1559590478, "post_id": 56432341, "comment_id": 99461340, "body": "I have also tried that, but still receive an error (that the plugin id was not found) when trying to resolve the plugin."}, {"owner": {"reputation": 916, "user_id": 2874418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhGuM.jpg?s=128&g=1", "display_name": "Diego Malone", "link": "https://stackoverflow.com/users/2874418/diego-malone"}, "reply_to_user": {"reputation": 2709, "user_id": 502365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/547746b56dcb2ea5614e5db9047c649f?s=128&d=identicon&r=PG", "display_name": "Hrafn", "link": "https://stackoverflow.com/users/502365/hrafn"}, "edited": false, "score": 0, "creation_date": 1559591228, "post_id": 56432341, "comment_id": 99461629, "body": "I have updated my answer to having my top level and my app <code>build.gradle.kts</code>. This configuration enabled my <code>dynatrace</code> configuration block."}, {"owner": {"reputation": 2709, "user_id": 502365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/547746b56dcb2ea5614e5db9047c649f?s=128&d=identicon&r=PG", "display_name": "Hrafn", "link": "https://stackoverflow.com/users/502365/hrafn"}, "edited": false, "score": 1, "creation_date": 1559591293, "post_id": 56432341, "comment_id": 99461654, "body": "A cache invalidation and restart later I have everything working, after putting the dependency into the project root. Thank you for the assistance."}], "tags": [], "owner": {"reputation": 916, "user_id": 2874418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhGuM.jpg?s=128&g=1", "display_name": "Diego Malone", "link": "https://stackoverflow.com/users/2874418/diego-malone"}, "is_accepted": true, "score": 1, "last_activity_date": 1559591161, "last_edit_date": 1559591161, "creation_date": 1559584622, "answer_id": 56432341, "question_id": 56431545, "link": "https://stackoverflow.com/questions/56431545/configuration-of-dynatrace-in-gradle-kotlin-dsl/56432341#56432341", "title": "Configuration of Dynatrace in Gradle Kotlin DSL", "body": "<p>I have tried it with the <code>apply</code> DSL and it didn't work. I got it working applying the plugin via <code>plugins</code> DSL.</p>\n\n<p>Top level <code>build.gradle.kts</code>:</p>\n\n<pre><code>buildscript {\n    repositories {\n        google()\n        jcenter()\n\n    }\n    dependencies {\n        classpath(\"com.android.tools.build:gradle:3.5.0-beta01\")\n        classpath(\"org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.31\")\n        classpath(\"com.dynatrace.tools:android:7.2.4.1262\")\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()  \n    }\n}\n</code></pre>\n\n<p>App <code>build.gradle.kts</code>:</p>\n\n<pre><code>plugins {\n    id(\"com.android.application\")\n    kotlin(\"android\")\n    id(\"com.dynatrace.tools.android\")\n    ...\n}\n\nandroid {\n    defaultConfig {\n        ...\n    }\n    buildTypes {\n        ...\n    }\n}\n\ndynatrace {\n    defaultConfig {\n        ...\n    }\n}\n\ndependencies {\n    ...\n}\n\n</code></pre>\n"}], "owner": {"reputation": 2709, "user_id": 502365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/547746b56dcb2ea5614e5db9047c649f?s=128&d=identicon&r=PG", "display_name": "Hrafn", "link": "https://stackoverflow.com/users/502365/hrafn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 56432341, "answer_count": 1, "score": 1, "last_activity_date": 1559591161, "creation_date": 1559580689, "last_edit_date": 1559590377, "question_id": 56431545, "link": "https://stackoverflow.com/questions/56431545/configuration-of-dynatrace-in-gradle-kotlin-dsl", "title": "Configuration of Dynatrace in Gradle Kotlin DSL", "body": "<p>I have an Android project, using a Gradle build configuration written in the kotlin-dsl and trying to apply Dynatrace:</p>\n\n<pre><code>buildscript {\n  repositories {\n    jcenter()\n  }\n  dependencies {\n    classpath(\"com.dynatrace.tools:android:7.2.4.1262\")\n  }\n}\n\n// I apply the plugin\napply(plugin = \"com.dynatrace.tools.android\")\n</code></pre>\n\n<p>Everything runs smoothly until I try to use the dynatrace configuration block, which is never resolved:</p>\n\n<pre><code>dynatrace {\n    defaultConfig {\n       ....\n    }\n}\n</code></pre>\n\n<p>This is the environment I am working with:</p>\n\n<ul>\n<li>Gradle: 5.1.1</li>\n<li>Android Gradle plugin: 3.4.1</li>\n<li>Dynatrace version: 7.2.4.1262</li>\n</ul>\n\n<p>I am following <a href=\"https://www.dynatrace.com/support/doc/appmon/user-experience-management/mobile-uem/how-to-instrument-an-android-app/gradle-plugin-for-android/\" rel=\"nofollow noreferrer\">Dynatrace's own instructions</a>, and even though they don't mention how to perform the configuration with the kotlin-dsl, they have just <a href=\"https://www.dynatrace.com/support/doc/appmon/release-notes-7-2/release-notes-android-agent-7-2/android-agent-7-2-4/\" rel=\"nofollow noreferrer\">added support for it</a>. </p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "edited": false, "score": 0, "creation_date": 1559579291, "post_id": 56431199, "comment_id": 99456970, "body": "Changing <code>async</code> to <code>async(context = newSingleThreadContext(&quot;producer&quot;))</code> doesn&#39;t appear to have any impact."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1559632796, "post_id": 56431199, "comment_id": 99471765, "body": "<code>It works if I change produce to produce(capacity = 1)</code> -- only because you produce just one element. In a production case it will keep producing until it fills the buffer."}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1559881883, "post_id": 56431199, "comment_id": 99565344, "body": "If I were expecting <code>async {</code> to behave like <code>thread {</code>, it shouldn&#39;t matter what I put inside the block -- it&#39;ll execute regardless. But that&#39;s not happening here, because of some disconnect in my understanding."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1559910216, "post_id": 56431199, "comment_id": 99577230, "body": "It does behave like <code>thread {</code> until you <code>await()</code> on the result, which has no equivalent in <code>thread {</code>, but is comparable to <code>executor.submit(task).get()</code>, which blocks the same way because you create a deadlock where the submitted task is waiting for you to accept its item, but you don&#39;t accept it until it has completed."}], "answers": [{"tags": [], "owner": {"reputation": 5903, "user_id": 3908170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vou9q.jpg?s=128&g=1", "display_name": "DarkCygnus", "link": "https://stackoverflow.com/users/3908170/darkcygnus"}, "is_accepted": false, "score": 1, "last_activity_date": 1559580952, "creation_date": 1559580952, "answer_id": 56431604, "question_id": 56431199, "link": "https://stackoverflow.com/questions/56431199/asynchronously-constructing-a-producer/56431604#56431604", "title": "Asynchronously constructing a producer", "body": "<blockquote>\n  <p>It works if I change produce to produce(capacity = 1), but why is that? Shouldn't the await() succeed, at least, regardless of the producer's capacity?</p>\n</blockquote>\n\n<p>Checking the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.channels/produce.html\" rel=\"nofollow noreferrer\">docs</a> on the <code>produce()</code> method you call, and specifically the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.channels/-channel/index.html\" rel=\"nofollow noreferrer\">docs</a> on the capacity parameter and <code>Channel</code> we have (emphasis mine):</p>\n\n<blockquote>\n  <p><strong>When capacity is 0</strong> \u2013 it creates RendezvousChannel. <strong>This channel does not have any buffer at all</strong>. An <strong>element is transferred from sender to receiver only when send and receive invocations meet in time</strong> (rendezvous), so <strong>send suspends until another coroutine invokes receive</strong> and receive suspends until another coroutine invokes send.</p>\n</blockquote>\n\n<p>This could be the reason why it's hanging. You are calling <code>send</code> on your <code>async</code> thread and then <code>await</code> for it... however, as the docs say, no other co-routine has invoked <code>receive</code> yet... so it will suspend until that happens and in this case it hangs.</p>\n\n<p>Checking that same link on Channel, we also see why giving it a number greater than 0 solves this (emphasis mine):</p>\n\n<blockquote>\n  <p><strong>When capacity is positive</strong>, but less than UNLIMITED \u2013 it creates array-based channel with given capacity. This channel has an array buffer of a fixed capacity. <strong>Sender suspends only when buffer is full and receiver suspends only when buffer is empty</strong>.</p>\n</blockquote>\n"}], "owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1559580952, "creation_date": 1559579127, "last_edit_date": 1559580367, "question_id": 56431199, "link": "https://stackoverflow.com/questions/56431199/asynchronously-constructing-a-producer", "title": "Asynchronously constructing a producer", "body": "<p>I have a case where I want to construct a <code>ReceiveChannel</code> using <code>produce</code>, asynchronously, but it's hanging. Here's a simplified example:</p>\n\n<pre><code>runBlocking {\n    val deferredChannel = async {\n        produce&lt;String&gt; { send(\"foo\") }\n    }\n\n    val channel = deferredChannel.await()\n\n    println(\"Got channel\")\n\n    val value = channel.receive()\n\n    println(\"Got value $value\")\n}\n</code></pre>\n\n<p><em>Neither</em> <code>println</code> is hit. It's plausible that there's some kind of coroutine deadlock going on, but I'm not not clear where/how.</p>\n\n<p>How can I produce a <code>ReceiveChannel</code> asynchronously?</p>\n\n<p>Edit: It works if I change <code>produce</code> to <code>produce(capacity = 1)</code>, but why is that? Shouldn't the <code>await()</code> succeed, at least, regardless of the producer's capacity? And what if I want to keep capacity=0?</p>\n"}, {"tags": ["android", "caching", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 11644123, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DCSlFVIvXZY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5GBg7OZy9mgebx_FlpC3Pi-iGJQ/mo/photo.jpg?sz=128", "display_name": "Landon", "link": "https://stackoverflow.com/users/11644123/landon"}, "is_accepted": true, "score": 1, "last_activity_date": 1587667679, "creation_date": 1587667679, "answer_id": 61394792, "question_id": 56430911, "link": "https://stackoverflow.com/questions/56430911/ony-if-cached-errors-implementing-caching-with-retrofit/61394792#61394792", "title": "ony-if-cached errors: implementing caching with retrofit", "body": "<p>I'm not super familiar with the ins and outs of how each interceptor works, but I fiddled/searched around until I found something that worked for me using two Interceptors. Part of my implementation was to be able to force a refresh, which is the boolean you see in the first interceptor</p>\n\n<p>Kotlin:</p>\n\n<pre><code>...\nval cacheControl = CacheControl.Builder().maxAge(timeUnit.toSeconds(cacheDuration), TimeUnit.SECONDS).build()\n\ncache(Cache(File(context?.cacheDir, \"http-cache\"), CACHE_SIZE.toLong()))\n// Adding both interceptors ensures the FORCE_NETWORK to call the api through the network and override the cache with new data\naddInterceptor { chain -&gt; chain.proceed(chain.request().newBuilder().header(\"Cache-Control\", if (!useCache) CacheControl.FORCE_NETWORK.toString() else cacheControl.toString()).build()) }\n//The 'Pragma' header key has a no-cache value in some APIs so it must be removed for us to cache it\naddNetworkInterceptor { chain -&gt; chain.proceed(chain.request()).newBuilder().removeHeader(\"Pragma\").header(\"Cache-Control\", cacheControl.toString()).build() }\n...\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 11579656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c282a56dee58a3a7d3b4f15da87db39?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Roth", "link": "https://stackoverflow.com/users/11579656/mark-roth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 61394792, "answer_count": 1, "score": 2, "last_activity_date": 1587667679, "creation_date": 1559577824, "question_id": 56430911, "link": "https://stackoverflow.com/questions/56430911/ony-if-cached-errors-implementing-caching-with-retrofit", "title": "ony-if-cached errors: implementing caching with retrofit", "body": "<p>I am relatively new to coding/android development and I am trying to implement caching for the first time in my app. The app currently makes database calls every time it is opened to get some basic information that could easily be cached and stored between sessions. </p>\n\n<p>I figured the easiest solution would be to implement caching with retrofit as outlined here: <a href=\"https://medium.com/mindorks/caching-with-retrofit-store-responses-offline-71439ed32fda\" rel=\"nofollow noreferrer\">https://medium.com/mindorks/caching-with-retrofit-store-responses-offline-71439ed32fda</a> I wanted to be able to modify this to check if there was non-expired data in the cache and only make the database call if the data was expired. As opposed to using the cache if the phone was offline. </p>\n\n<p>So far this is what I have </p>\n\n<pre><code>OkHttpClient = OkHttpClient.Builder().connectTimeout(timeout.toLong(), TimeUnit.SECONDS).run {\n        context?.let { context -&gt;\n                cache(Cache(context.cacheDir, (5 * 1024 * 1024).toLong()))\n                addInterceptor {\n                    it.proceed(it.request().newBuilder().header(\"Cache-Control\", \"private, only-if-cached, max-stale=\" + 60*60*24*28).build())\n                }\n</code></pre>\n\n<p>I was hoping that this would check if there was data in the cache and then make the call if there wasn't, but instead I get a 504 error response from the database. I figure that I am missing some key steps, but I am not sure what they are. Any help would be great. Thanks</p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-storage"], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 11005041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a0efe5ce7ad2fa29b7f0961ca1236b?s=128&d=identicon&r=PG&f=1", "display_name": "FabZbi", "link": "https://stackoverflow.com/users/11005041/fabzbi"}, "edited": false, "score": 0, "creation_date": 1559581693, "post_id": 56431023, "comment_id": 99458019, "body": "My plan is to check this way if the upload is even possible mostly due to network timeouts. If not I&#39;d save my state to a local DB and retry my upload asap when the connection is available again. Im referencing my idea from here: <a href=\"https://stackoverflow.com/questions/42495696/how-to-shorten-firebase-storage-download-retrying-period-on-network-error\" title=\"how to shorten firebase storage download retrying period on network error\">stackoverflow.com/questions/42495696/&hellip;</a> and here: <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/storage/FirebaseStorage.html#setMaxDownloadRetryTimeMillis(long)\" rel=\"nofollow noreferrer\">firebase.google.com/docs/reference/android/com/google/fireba&zwnj;&#8203;se/&hellip;</a>"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 337, "user_id": 11005041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a0efe5ce7ad2fa29b7f0961ca1236b?s=128&d=identicon&r=PG&f=1", "display_name": "FabZbi", "link": "https://stackoverflow.com/users/11005041/fabzbi"}, "edited": false, "score": 0, "creation_date": 1559585582, "post_id": 56431023, "comment_id": 99459588, "body": "Yes, you should definitely save state.  There is no telling how long it will take or if it will succeed in the end."}, {"owner": {"reputation": 337, "user_id": 11005041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a0efe5ce7ad2fa29b7f0961ca1236b?s=128&d=identicon&r=PG&f=1", "display_name": "FabZbi", "link": "https://stackoverflow.com/users/11005041/fabzbi"}, "edited": false, "score": 0, "creation_date": 1559586373, "post_id": 56431023, "comment_id": 99459849, "body": "But if saving state with <code>SessionURI</code> is only possible if my upload initialy starts with network connection (see here: <a href=\"https://stackoverflow.com/questions/38822982/firebase-uploading-images-when-internet-is-offline\" title=\"firebase uploading images when internet is offline\">stackoverflow.com/questions/38822982/&hellip;</a>)  And if I check for network connection in general from Android I only check for network not if Firebase Services are available or not. How would I go about this?"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 337, "user_id": 11005041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a0efe5ce7ad2fa29b7f0961ca1236b?s=128&d=identicon&r=PG&f=1", "display_name": "FabZbi", "link": "https://stackoverflow.com/users/11005041/fabzbi"}, "edited": false, "score": 0, "creation_date": 1559588255, "post_id": 56431023, "comment_id": 99460570, "body": "That&#39;s not how it works. You just kick off the upload and assume that it will eventually work when there is connectivity.  You can&#39;t &quot;check for connectivity&quot;, as that is still not a guarantee that the app will <i>never</i> be able to connect, or <i>how long</i> will it take, or <i>if</i> it will be able to complete if you start the upload now."}, {"owner": {"reputation": 337, "user_id": 11005041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a0efe5ce7ad2fa29b7f0961ca1236b?s=128&d=identicon&r=PG&f=1", "display_name": "FabZbi", "link": "https://stackoverflow.com/users/11005041/fabzbi"}, "edited": false, "score": 0, "creation_date": 1559592864, "post_id": 56431023, "comment_id": 99462212, "body": "Why do so many threads simply sugest to test internet connectivity with a ping call to say for example google.com before starting any network task then? Is this bad practise? I&#39;d assume if I can ping google.com within a reasonable response time I should also be able to upload a &lt;5mb File to Firebase Storage within those standart 10min. Is this a bad assumtion? If yes, how would I go about implementing my own timer for such a upload method like in my example above?"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 337, "user_id": 11005041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a0efe5ce7ad2fa29b7f0961ca1236b?s=128&d=identicon&r=PG&f=1", "display_name": "FabZbi", "link": "https://stackoverflow.com/users/11005041/fabzbi"}, "edited": false, "score": 0, "creation_date": 1559593555, "post_id": 56431023, "comment_id": 99462476, "body": "I wouldn&#39;t make that assumption, unless you know for a fact the quality of the network of all your user at all times.  Ping is not going to tell you the whole story.  It doesn&#39;t give you a bandwidth estimate, just latency.  Try doing a web search first to learn about your options for making a timer on Android."}, {"owner": {"reputation": 337, "user_id": 11005041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a0efe5ce7ad2fa29b7f0961ca1236b?s=128&d=identicon&r=PG&f=1", "display_name": "FabZbi", "link": "https://stackoverflow.com/users/11005041/fabzbi"}, "edited": false, "score": 0, "creation_date": 1559594863, "post_id": 56431023, "comment_id": 99463013, "body": "So my idea now is to save my data primarily to a local DB. Then I try to upload it with a async callback function (see edit). And if I did not get any result back yet I just retry at some later point manually. So there would be no need for a timer since FB Storage stops after 10min anyways and my upload function is non blocking. Does this seem alright?"}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": false, "score": 0, "last_activity_date": 1559578299, "creation_date": 1559578299, "answer_id": 56431023, "question_id": 56430902, "link": "https://stackoverflow.com/questions/56430902/how-to-change-maxuploadretrytimemillis-from-firebase-storage-instance-in-kotlin/56431023#56431023", "title": "How to change maxUploadRetryTimeMillis from Firebase Storage Instance in Kotlin?", "body": "<p>There's no way to configure any timeout with the SDK.  The reason is because the SDK will silently and persistently retry and resume uploads when there is a bad network connection.  This is a very good feature for mobile apps.</p>\n\n<p>If you need to move on to do other work after some amount of time, you'll need to set your own timer and trigger on the timeout you specify.  You can then cancel the upload and do whatever you need to do to recover.</p>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 11005041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a0efe5ce7ad2fa29b7f0961ca1236b?s=128&d=identicon&r=PG&f=1", "display_name": "FabZbi", "link": "https://stackoverflow.com/users/11005041/fabzbi"}, "is_accepted": true, "score": 1, "last_activity_date": 1559725346, "last_edit_date": 1559725346, "creation_date": 1559724715, "answer_id": 56457175, "question_id": 56430902, "link": "https://stackoverflow.com/questions/56430902/how-to-change-maxuploadretrytimemillis-from-firebase-storage-instance-in-kotlin/56457175#56457175", "title": "How to change maxUploadRetryTimeMillis from Firebase Storage Instance in Kotlin?", "body": "<p>I found out that you you have change the <code>maxDownloadRetryTimeMills</code> too.</p>\n\n<p>Especially if the device is offline already at the start of the upload. Because then it tries to fetch a upload URL which apparently counts as a Download.</p>\n"}], "owner": {"reputation": 337, "user_id": 11005041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a0efe5ce7ad2fa29b7f0961ca1236b?s=128&d=identicon&r=PG&f=1", "display_name": "FabZbi", "link": "https://stackoverflow.com/users/11005041/fabzbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 56457175, "answer_count": 2, "score": 0, "last_activity_date": 1559725346, "creation_date": 1559577781, "last_edit_date": 1559594698, "question_id": 56430902, "link": "https://stackoverflow.com/questions/56430902/how-to-change-maxuploadretrytimemillis-from-firebase-storage-instance-in-kotlin", "title": "How to change maxUploadRetryTimeMillis from Firebase Storage Instance in Kotlin?", "body": "<p>When my Android device does not have any network connection my <code>FailureListener</code> only trigers after 10min like specified by Firebase when I try to upload a picture to my Firebase Storage.</p>\n\n<p>I'd like to change this to about 10s with the <code>maxUploadRetryTimeMillis</code> property. But this does not work like intended.</p>\n\n<p>My simplified code so far:</p>\n\n<pre><code>object StorageUtil {\n    private val storageInstance: FirebaseStorage by lazy { FirebaseStorage.getInstance() }\n\n    private val currentUserRef: StorageReference\n        get() = storageInstance.reference\n            .child(FirebaseAuth.getInstance().uid ?: throw NullPointerException(\"UID is null.\"))\n\n    fun uploadPicture(imageBytes: ByteArray,\n                      onSuccess: (imagePath: String) -&gt; Unit) {\n        storageInstance.maxUploadRetryTimeMillis = 10000\n        val ref = currentUserRef.child(\"pictures/${UUID.nameUUIDFromBytes(imageBytes)}\")\n\n        val uploadTask = ref.putBytes(imageBytes)\n\n        uploadTask.addOnFailureListener {\n            Log.i(\"Upload Failed\", \"This message never shows up\")\n        }\n    }\n</code></pre>\n\n<p><code>uploadPicture()</code> gets called like so:</p>\n\n<pre><code>StorageUtil.uploadPicture(picture) { url -&gt;\n                    moment.phtotoPaths.add(url)\n                    renderImages()\n}\n</code></pre>\n\n<p>This does not work. It trigers the <code>FailureListener</code> still only after 10min.</p>\n\n<p>Hopy I get get some help from you. Thanks in advance!</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 406, "user_id": 8806969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a397c6039334c3579a59073d340ceb8a?s=128&d=identicon&r=PG&f=1", "display_name": "IcedLance", "link": "https://stackoverflow.com/users/8806969/icedlance"}, "edited": false, "score": 0, "creation_date": 1559577293, "post_id": 56430655, "comment_id": 99455966, "body": "Cant you just add if message_from==anon in front of filename.add ? I mean yiu dont even say what the error is and where you put that line, so this is the best i can do."}, {"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "edited": false, "score": 0, "creation_date": 1559577628, "post_id": 56430655, "comment_id": 99456143, "body": "If the string is actually &quot;web_anon&quot; you should wrap it into single quotes."}, {"owner": {"reputation": 31, "user_id": 7381723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54743d52aa81bb7c766696db6018a87a?s=128&d=identicon&r=PG&f=1", "display_name": "Ot&#225;vio Souza", "link": "https://stackoverflow.com/users/7381723/ot%c3%a1vio-souza"}, "reply_to_user": {"reputation": 406, "user_id": 8806969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a397c6039334c3579a59073d340ceb8a?s=128&d=identicon&r=PG&f=1", "display_name": "IcedLance", "link": "https://stackoverflow.com/users/8806969/icedlance"}, "edited": false, "score": 0, "creation_date": 1559579519, "post_id": 56430655, "comment_id": 99457062, "body": "Thanks @IcedLance an Giorgos.  The two forms work. I will be with the second option, already selecting in the database exactly the data I want, using the single quotes as suggested by Giorgos."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 7381723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54743d52aa81bb7c766696db6018a87a?s=128&d=identicon&r=PG&f=1", "display_name": "Ot&#225;vio Souza", "link": "https://stackoverflow.com/users/7381723/ot%c3%a1vio-souza"}, "is_accepted": false, "score": 0, "last_activity_date": 1559580116, "last_edit_date": 1559580116, "creation_date": 1559579758, "answer_id": 56431349, "question_id": 56430655, "link": "https://stackoverflow.com/questions/56430655/how-to-filter-a-search-in-the-database-by-specific-column/56431349#56431349", "title": "how to filter a search in the database by specific column?", "body": "<p>Working. The correct select is:</p>\n\n<p><code>return db.rawQuery(\"select * from CHAT where message_from= 'web_anon' , null)</code> with single quotes on argument. </p>\n\n<p>A second option is add this condition: <code>if (message_from==web_anon) { filename.add(message_body)}</code> </p>\n"}, {"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 0, "last_activity_date": 1559580818, "creation_date": 1559580818, "answer_id": 56431579, "question_id": 56430655, "link": "https://stackoverflow.com/questions/56430655/how-to-filter-a-search-in-the-database-by-specific-column/56431579#56431579", "title": "how to filter a search in the database by specific column?", "body": "<p>The recommended way of using <a href=\"https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery(java.lang.String,%2520java.lang.String%5B%5D)\" rel=\"nofollow noreferrer\"><code>rawQuery()</code></a> is this:</p>\n\n<pre><code>db.rawQuery(\"select * from CHAT where message_from= ?\" , arrayOf(\"web_anon\"))\n</code></pre>\n\n<p>The 2nd argument is an array of strings passed to the 1st argument which is the query itself and each <code>?</code> placeholder is replaced by each item of the array.<br/>\nThis way you don't have to worry about the data type of the columns and is also sql-injection safe.</p>\n"}], "owner": {"reputation": 31, "user_id": 7381723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54743d52aa81bb7c766696db6018a87a?s=128&d=identicon&r=PG&f=1", "display_name": "Ot&#225;vio Souza", "link": "https://stackoverflow.com/users/7381723/ot%c3%a1vio-souza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1559580818, "creation_date": 1559576867, "question_id": 56430655, "link": "https://stackoverflow.com/questions/56430655/how-to-filter-a-search-in-the-database-by-specific-column", "title": "how to filter a search in the database by specific column?", "body": "<p>I'm trying to filter the search in sqlite. I would like to select only the rows that have a certain argument in the column.</p>\n\n<p>with the following code I get the return of all the rows through a array constructed by the function queueAll ()</p>\n\n<p>fun readFileFromSQLite(): ArrayList {</p>\n\n<pre><code>    var fileName = ArrayList&lt;String&gt;()\n\n    var cursor = queueAll()\n\n    if (cursor.moveToFirst()) {\n        while (!cursor.isAfterLast) {\n            //val name = cursor.getString(cursor.getColumnIndex(countyname))\n            var message_uuid = cursor.getString(cursor.getColumnIndex(COL_y1))\n            var message_time = cursor.getString(cursor.getColumnIndex(COL_y2))\n            var message_from = cursor.getString(cursor.getColumnIndex(COL_y3))\n            var message_to = cursor.getString(cursor.getColumnIndex(COL_y4))\n            var message_subject = cursor.getString(cursor.getColumnIndex(COL_y5))\n            var message_body = cursor.getString(cursor.getColumnIndex(COL_y6))\n\n            fileName.add(message_body)\n            cursor.moveToNext()\n        }\n\n\n\n        }\n        cursor.close()\n\n    return fileName\n}\n\nfun queueAll(): Cursor {\n    val columns = arrayOf&lt;String&gt;(\"message_uuid\", \"message_time\",\"message_from\",\"message_to\",\"message_subject\",\"message_body\")\n    val db = readableDatabase\n\n    val comp = \"comprimido\"\n    return db.query(CHAT, columns,  null, null, null, null, null)\n  //  return db.rawQuery(\"select * from CHAT where message_from=web_anon , null);\n}\n</code></pre>\n\n<p>Now, I'd like to extract only the rows that have the message_from column with a specific string. My attempt by:\nreturn db.rawQuery (\"select * from CHAT where message_from = web_anon, null) returns error</p>\n"}, {"tags": ["android", "unity3d", "kotlin", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 1612, "user_id": 3142741, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8d823983245110f781dc5bc8e4bba5fe?s=128&d=identicon&r=PG&f=1", "display_name": "Arshia001", "link": "https://stackoverflow.com/users/3142741/arshia001"}, "is_accepted": false, "score": 0, "last_activity_date": 1559639054, "creation_date": 1559639054, "answer_id": 56440708, "question_id": 56430597, "link": "https://stackoverflow.com/questions/56430597/kotlin-not-compiling-lambdas-in-android-library/56440708#56440708", "title": "Kotlin not compiling lambdas in android library", "body": "<p>So I figured it out. The real error was being reported when the apk was installed, saying that my lambda's class could not be resolved due to a missing class from kotlin's base libraries. To solve it, I had to include the correct version of <code>kotlin-stdlib</code> (1.3.11 in my case) in the build. To do that, I used <a href=\"https://github.com/googlesamples/unity-jar-resolver\" rel=\"nofollow noreferrer\">Google JAR resolver</a> with this <code>Dependencies.xml</code>:</p>\n\n<pre><code>&lt;dependencies&gt;\n  &lt;androidPackages&gt;\n    &lt;androidPackage spec=\"org.jetbrains.kotlin:kotlin-stdlib:1.3.11\" /&gt;\n  &lt;/androidPackages&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"}], "owner": {"reputation": 1612, "user_id": 3142741, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8d823983245110f781dc5bc8e4bba5fe?s=128&d=identicon&r=PG&f=1", "display_name": "Arshia001", "link": "https://stackoverflow.com/users/3142741/arshia001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559639054, "creation_date": 1559576633, "last_edit_date": 1559632677, "question_id": 56430597, "link": "https://stackoverflow.com/questions/56430597/kotlin-not-compiling-lambdas-in-android-library", "title": "Kotlin not compiling lambdas in android library", "body": "<p>I have an android library which I'm calling from within Unity (but that shouldn't be important). I have this code:</p>\n\n<pre><code>class UnityInterop {\n    companion object {\n        @JvmStatic\n        fun initialize() = initInternal()\n\n        private fun initInternal(): Boolean {\n            executePluginFunction {\n                // do some stuff here...\n            }\n\n            return false\n        }\n\n        fun executePluginFunction(func: () -&gt; Unit) {\n            try {\n                UnityPlayer.currentActivity.runOnUiThread {\n                    func()\n                }\n            } catch (e: Exception) {\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>When I run it, I get this error, which looks like it's saying that the class generated for the lambda isn't there:</p>\n\n<pre><code>06-04 20:07:09.767  5469  5493 E Unity   : java.lang.NoClassDefFoundError: Failed resolution of: Lcom/onehand/nativekeyboard/UnityInterop$Companion$initInternal$1;\n06-04 20:07:09.767  5469  5493 E Unity   :      at com.onehand.nativekeyboard.UnityInterop$Companion.initInternal(UnityInterop.kt:87)\n06-04 20:07:09.767  5469  5493 E Unity   :      at com.onehand.nativekeyboard.UnityInterop$Companion.initialize(UnityInterop.kt:81)\n06-04 20:07:09.767  5469  5493 E Unity   :      at com.onehand.nativekeyboard.UnityInterop.initialize(Unknown Source:2)\n06-04 20:07:09.767  5469  5493 E Unity   :      at com.unity3d.player.UnityPlayer.nativeRender(Native Method)\n06-04 20:07:09.767  5469  5493 E Unity   :      at com.unity3d.player.UnityPlayer.c(Unknown Source:0)\n06-04 20:07:09.767  5469  5493 E Unity   :      at com.unity3d.player.UnityPlayer$e$1.handleMessage(Unknown Source:88)\n06-04 20:07:09.767  5469  5493 E Unity   :      at android.os.Handler.dispatchMessage(Handler.java:104)\n06-04 20:07:09.767  5469  5493 E Unity   :      at android.os.Looper.loop(Looper.java:166)\n06-04 20:07:09.767  5469  5493 E Unity   :      at com.unity3d.player.UnityPlayer$e.run(Unknown Source:20)\n06-04 20:07:09.767  5469  5493 E Unity   : Caused by: java.lang.ClassNotFoundException: com.onehand.nativekeyboard.UnityInterop$Companion$initInternal$1\n</code></pre>\n\n<p>So I decompiled the jar from inside the aar, and as far as jd-gui can tell me, the lambda really isn't there. What's happening here? Here are the gradle scripts, just in case:</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext.kotlin_version = '1.3.31'\n    repositories {\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.4.1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        minSdkVersion 16\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compileOnly fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n}\n</code></pre>\n\n<hr>\n\n<p>EDIT: I was looking in the wrong place. The classes are all there inside the jar. I still don't know why they're not being loaded though. And jd-gui <em>did</em> fail to show any source for the class Android thinks is missing...</p>\n"}, {"tags": ["kotlin", "kotlin-exposed"], "answers": [{"tags": [], "owner": {"reputation": 876, "user_id": 813981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b707cdfcc7f71b6b450cef2f30a2703?s=128&d=identicon&r=PG", "display_name": "Tapac", "link": "https://stackoverflow.com/users/813981/tapac"}, "is_accepted": false, "score": 2, "last_activity_date": 1559641752, "creation_date": 1559641752, "answer_id": 56441455, "question_id": 56430591, "link": "https://stackoverflow.com/questions/56430591/how-to-insert-in-kotlin-exposed-a-record-with-the-foreign-key/56441455#56441455", "title": "How to insert in Kotlin Exposed a record with the foreign key?", "body": "<p>You should do that the same way as you insert any other value - provide proper <code>documentId</code>:</p>\n\n<pre><code>transaction {\n    val docId = DocumentTable.select { /*your condition here */ }.single()[DocumentTable.id] \n    // or if you want to construct your id from scratch (be sure that you have such record in a database or it will fail with exception)\n    val docId = EntityID(123, DocumentTable)\n\n    TransactionTable.insert {\n       it[this.amount] = amount\n       it[this.documentId] = docId\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3514920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dc26826a129e9fd19fcd0457ca360d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3514920", "link": "https://stackoverflow.com/users/3514920/user3514920"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1559641752, "creation_date": 1559576600, "question_id": 56430591, "link": "https://stackoverflow.com/questions/56430591/how-to-insert-in-kotlin-exposed-a-record-with-the-foreign-key", "title": "How to insert in Kotlin Exposed a record with the foreign key?", "body": "<p>I cannot find in Kotlin Exposed documentation the way how to insert a record with the foreign key:</p>\n\n<pre><code>object DocumentTable : IntIdTable() {\n    val description = varchar(\"desc\", 200)\n}\n\nobject TransactionTable : IntIdTable() {\n    val amount = long(\"amount\")\n    val documentId = reference(\"documentId\", DocumentTable.id)\n}\n\nfun createTrans(amount: Long, document: Document) {\n    transaction {\n        TransactionTable.insert {\n           it[this.amount] = amount\n           it[this.documentId] =  ?????????????\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "controls", "naming-conventions"], "comments": [{"owner": {"reputation": 600, "user_id": 4511489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5836ac85fbcc05160dcaf9d36b7a5434?s=128&d=identicon&r=PG&f=1", "display_name": "bhavya_karia", "link": "https://stackoverflow.com/users/4511489/bhavya-karia"}, "edited": false, "score": 0, "creation_date": 1559632554, "post_id": 56429900, "comment_id": 99471653, "body": "Did you check this out <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#naming-rules\" rel=\"nofollow noreferrer\">Coding Convention</a> ?"}, {"owner": {"reputation": 11, "user_id": 10404466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3DTb2jWWoBc/AAAAAAAAAAI/AAAAAAAAMBQ/5yOiMD5H0Zw/photo.jpg?sz=128", "display_name": "marie-pier Morissette", "link": "https://stackoverflow.com/users/10404466/marie-pier-morissette"}, "reply_to_user": {"reputation": 600, "user_id": 4511489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5836ac85fbcc05160dcaf9d36b7a5434?s=128&d=identicon&r=PG&f=1", "display_name": "bhavya_karia", "link": "https://stackoverflow.com/users/4511489/bhavya-karia"}, "edited": false, "score": 0, "creation_date": 1559653988, "post_id": 56429900, "comment_id": 99482779, "body": "Thank you for your answer, but yes I did. I have found almost everything I needed except for the controls... I Think that I will simply follow the control prefixes from Microsoft and adapt the following part according to This Coding Convention."}, {"owner": {"reputation": 600, "user_id": 4511489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5836ac85fbcc05160dcaf9d36b7a5434?s=128&d=identicon&r=PG&f=1", "display_name": "bhavya_karia", "link": "https://stackoverflow.com/users/4511489/bhavya-karia"}, "edited": false, "score": 0, "creation_date": 1559658472, "post_id": 56429900, "comment_id": 99485339, "body": "Hey, can you help me out understanding what control names are?"}, {"owner": {"reputation": 11, "user_id": 10404466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3DTb2jWWoBc/AAAAAAAAAAI/AAAAAAAAMBQ/5yOiMD5H0Zw/photo.jpg?sz=128", "display_name": "marie-pier Morissette", "link": "https://stackoverflow.com/users/10404466/marie-pier-morissette"}, "reply_to_user": {"reputation": 600, "user_id": 4511489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5836ac85fbcc05160dcaf9d36b7a5434?s=128&d=identicon&r=PG&f=1", "display_name": "bhavya_karia", "link": "https://stackoverflow.com/users/4511489/bhavya-karia"}, "edited": false, "score": 1, "creation_date": 1559671301, "post_id": 56429900, "comment_id": 99491602, "body": "What i call &#39;control name&#39; are &#39;btn&#39; for button, &#39;lbl&#39; for label, &#39;txt&#39; for textbox... Here is a link that I&#39;ve found: <a href=\"https://gist.github.com/hosuaby/fe180dc02238c16e6be2\" rel=\"nofollow noreferrer\">gist.github.com/hosuaby/fe180dc02238c16e6be2</a>"}], "owner": {"reputation": 11, "user_id": 10404466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3DTb2jWWoBc/AAAAAAAAAAI/AAAAAAAAMBQ/5yOiMD5H0Zw/photo.jpg?sz=128", "display_name": "marie-pier Morissette", "link": "https://stackoverflow.com/users/10404466/marie-pier-morissette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559574732, "creation_date": 1559573782, "last_edit_date": 1559574732, "question_id": 56429900, "link": "https://stackoverflow.com/questions/56429900/where-can-we-find-a-kotlin-naming-convention-that-include-controls-naming", "title": "Where can we find a kotlin naming-convention that include control&#39;s naming?", "body": "<p>Where can we find the official naming conventions for Kotlin that includes all the control names? Is it the same as Java?</p>\n\n<p>I've been looking for Java and Kotlin naming conventions, but there seems no official naming conventions for controls in Kotlin.</p>\n"}, {"tags": ["android", "kotlin", "android-listview", "onclicklistener", "textcolor"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11593182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d55e2b6ebf1614de48a016ae131311e?s=128&d=identicon&r=PG&f=1", "display_name": "darya_s", "link": "https://stackoverflow.com/users/11593182/darya-s"}, "edited": false, "score": 0, "creation_date": 1559570196, "post_id": 56428552, "comment_id": 99452159, "body": "Thank you for your response @cesarmarch, but I had already tried the similar solution and it didn&#39;t help. The color changes only while clicking on an item. When you stop pressing the item, the color return to its default color. And I need the color to remain different until I click on another list item."}, {"owner": {"reputation": 483, "user_id": 2132115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f8d32b5dc86ec7a2b9f068b4613f10b?s=128&d=identicon&r=PG", "display_name": "cesarmarch", "link": "https://stackoverflow.com/users/2132115/cesarmarch"}, "reply_to_user": {"reputation": 11, "user_id": 11593182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d55e2b6ebf1614de48a016ae131311e?s=128&d=identicon&r=PG&f=1", "display_name": "darya_s", "link": "https://stackoverflow.com/users/11593182/darya-s"}, "edited": false, "score": 0, "creation_date": 1559576561, "post_id": 56428552, "comment_id": 99455637, "body": "I think you should manually set your item as selected to keep the color. And, same thing, manually unselect it when another is selected."}], "tags": [], "owner": {"reputation": 483, "user_id": 2132115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f8d32b5dc86ec7a2b9f068b4613f10b?s=128&d=identicon&r=PG", "display_name": "cesarmarch", "link": "https://stackoverflow.com/users/2132115/cesarmarch"}, "is_accepted": false, "score": 0, "last_activity_date": 1559569065, "creation_date": 1559569065, "answer_id": 56428552, "question_id": 56428307, "link": "https://stackoverflow.com/questions/56428307/%d0%a1hange-the-text-color-of-the-selected-item-in-list-view-kotlin-android/56428552#56428552", "title": "\u0421hange the text color of the selected item in list view (Kotlin, Android)", "body": "<p>You have to use selectors. Something like :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;item android:color =\"@color/selected_color\" android:state_selected=\"true\"/&gt;\n    &lt;item android:color =\"@color/pressed_color\" android:state_pressed=\"true\"/&gt;\n    &lt;item android:color =\"@color/default_color\"/&gt;\n\n&lt;/selector&gt;\n</code></pre>\n\n<p>And then use your selector in the item XML file :</p>\n\n<p><code>android:textColor=\"@color/text_selector\"</code></p>\n\n<p>You can have more information <a href=\"https://developer.android.com/guide/topics/resources/color-list-resource\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 11, "user_id": 11593182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d55e2b6ebf1614de48a016ae131311e?s=128&d=identicon&r=PG&f=1", "display_name": "darya_s", "link": "https://stackoverflow.com/users/11593182/darya-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 729, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559569065, "creation_date": 1559568188, "last_edit_date": 1559568514, "question_id": 56428307, "link": "https://stackoverflow.com/questions/56428307/%d0%a1hange-the-text-color-of-the-selected-item-in-list-view-kotlin-android", "title": "\u0421hange the text color of the selected item in list view (Kotlin, Android)", "body": "<p>I have a list view in my app. How can I change the text color of the selected item? </p>\n\n<p>For example, I select some list item. Its text color should be changed from black to gray.\nThen I select another item. Its text color should also be changed from black to gray, but the text color of the first element should turn black again.</p>\n\n<p>I tried the following code, but I got an exception: </p>\n\n<blockquote>\n  <p>Attempt to invoke virtual method '<code>void android.widget.TextView.setText(java.lang.CharSequence)</code>' on a null object reference</p>\n</blockquote>\n\n<p><b>QuestionActivity.kt:</b></p>\n\n<pre><code>var answersList = arrayOf(\"about\", \"against\", \"for\", \"by\")\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_question)\n\n    val selection= findViewById&lt;TextView&gt;(R.id.options)\n    val lv = findViewById&lt;ListView&gt;(R.id.variants)\n    val prodAdapter = ArrayAdapter&lt;String&gt;(this, R.layout.mytextview, answersList)\n    lv.adapter = prodAdapter\n\n    lv.setOnItemClickListener { parent, view, position, id -&gt;\n     val selectedItem = parent.getItemAtPosition(position).toString()\n     selection.setText(selectedItem)\n     selection.setTextColor(Color.DKGRAY)\n    }}  \n</code></pre>\n\n<p><b>activity_question.xml:</b></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n    &lt;ListView\n        android:id=\"@+id/variants\"\n        android:divider=\"#FFFFFF\"\n        android:layout_width=\"347dp\"\n        android:layout_height=\"254dp\" tools:ignore=\"MissingConstraints\"\n        app:layout_constraintStart_toStartOf=\"parent\" android:layout_marginLeft=\"32dp\"\n        android:layout_marginStart=\"32dp\" app:layout_constraintEnd_toEndOf=\"parent\" android:layout_marginEnd=\"32dp\"\n        android:layout_marginRight=\"32dp\" android:layout_marginTop=\"8dp\"\n        app:layout_constraintTop_toBottomOf=\"@+id/appBarLayout\" android:layout_marginBottom=\"8dp\"\n        app:layout_constraintBottom_toBottomOf=\"@+id/button4\"\n    /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>and <b>mytextview.xml:</b></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;TextView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      android:id=\"@+id/options\"\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"wrap_content\"\n      android:textAppearance=\"?android:attr/textAppearanceListItemSmall\"\n      android:gravity=\"center_vertical\"\n      android:minHeight=\"?android:attr/listPreferredItemHeightSmall\"\n      android:textSize=\"20dp\"\n      android:textColor=\"#000000\"\n/&gt;\n</code></pre>\n\n<p>Please help me to solve this issue</p>\n"}, {"tags": ["java", "kotlin", "jackson", "primitive", "json-serialization"], "comments": [{"owner": {"reputation": 2691, "user_id": 202059, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/d7PGT.jpg?s=128&g=1", "display_name": "cmaynard", "link": "https://stackoverflow.com/users/202059/cmaynard"}, "edited": false, "score": 2, "creation_date": 1559568279, "post_id": 56428069, "comment_id": 99451105, "body": "Looks like the problem is with the binding, in particular here: <code>Long::class.javaPrimitiveType</code> I&#39;m guessing that is the un-boxed type in Java. Which is not what <code>Long</code> is in Java."}, {"owner": {"reputation": 369, "user_id": 7473490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53d1a8b2edd6593ff4cb0de6b48d4acd?s=128&d=identicon&r=PG&f=1", "display_name": "V. Kuznetsov", "link": "https://stackoverflow.com/users/7473490/v-kuznetsov"}, "reply_to_user": {"reputation": 2691, "user_id": 202059, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/d7PGT.jpg?s=128&g=1", "display_name": "cmaynard", "link": "https://stackoverflow.com/users/202059/cmaynard"}, "edited": false, "score": 0, "creation_date": 1559569368, "post_id": 56428069, "comment_id": 99451696, "body": "If I use a primitive long value in the java class then i getting the excected result. The problem is only with the Long object type."}], "answers": [{"tags": [], "owner": {"reputation": 369, "user_id": 7473490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53d1a8b2edd6593ff4cb0de6b48d4acd?s=128&d=identicon&r=PG&f=1", "display_name": "V. Kuznetsov", "link": "https://stackoverflow.com/users/7473490/v-kuznetsov"}, "is_accepted": true, "score": 4, "last_activity_date": 1559569821, "creation_date": 1559569821, "answer_id": 56428770, "question_id": 56428069, "link": "https://stackoverflow.com/questions/56428069/custom-json-serialization-java-primitives-from-kotlin-by-jackson/56428770#56428770", "title": "Custom json serialization java primitives from kotlin by Jackson", "body": "<p>Problem was in the wrong type of serialization.</p>\n\n<p>Object mapper should be defined like this: </p>\n\n<pre><code>val mapper = ObjectMapper()\n        .registerModule(KotlinModule())\n        .registerModule(JavaTimeModule())\n        .registerModule(\n                SimpleModule()\n                        .addSerializer(Long::class.javaPrimitiveType, LongToStringJSONSerializer.ofObject())\n                        .addSerializer(Long::class.javaObjectType, LongToStringJSONSerializer.ofPrimitive())\n        )\n</code></pre>\n\n<p>I missed <code>Long::class.javaObjectType</code></p>\n"}], "owner": {"reputation": 369, "user_id": 7473490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53d1a8b2edd6593ff4cb0de6b48d4acd?s=128&d=identicon&r=PG&f=1", "display_name": "V. Kuznetsov", "link": "https://stackoverflow.com/users/7473490/v-kuznetsov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 988, "favorite_count": 0, "accepted_answer_id": 56428770, "answer_count": 1, "score": 2, "last_activity_date": 1559569821, "creation_date": 1559567271, "question_id": 56428069, "link": "https://stackoverflow.com/questions/56428069/custom-json-serialization-java-primitives-from-kotlin-by-jackson", "title": "Custom json serialization java primitives from kotlin by Jackson", "body": "<p>In my project there are java and kotlin modules. In some kotlin module I need a custom serialization. All long values should be serialized as string. I use Jackson. </p>\n\n<p>Example: </p>\n\n<p><strong>kotlin</strong> </p>\n\n<pre><code>data class KotlinRecord(val id: Long)\n</code></pre>\n\n<p><strong>java</strong></p>\n\n<pre><code>public class JavaRecord {\n    private Long id;\n\n    public Long getId() {\n        return id;\n    }\n\n    public JavaRecord setId(Long id) {\n        this.id = id;\n        return this;\n    }\n}\n</code></pre>\n\n<p>When ObjectMapper is configured in <strong>java</strong> module and I serialize value like this: </p>\n\n<pre><code> ObjectMapper mapper = new ObjectMapper()\n            .registerModule(new KotlinModule())\n            .registerModule(new JavaTimeModule())\n            .registerModule(\n                    new SimpleModule()\n                            .addSerializer(Long.class, LongToStringJSONSerializer.ofObject())\n                            .addSerializer(long.class, LongToStringJSONSerializer.ofPrimitive())\n            );\n\nJavaRecord javaRecord = new JavaRecord().setId(Long.MAX_VALUE);\nKotlinRecord kotlinRecord = new KotlinRecord(Long.MAX_VALUE);\n\nSystem.out.println(\"Java record:   \" + mapper.writeValueAsString(javaRecord));\nSystem.out.println(\"Kotlin record: \" + mapper.writeValueAsString(kotlinRecord));\n</code></pre>\n\n<p>I get the following result: </p>\n\n<pre><code>Java record:   {\"id\":\"9223372036854775807\"}\nKotlin record: {\"id\":\"9223372036854775807\"}\n</code></pre>\n\n<p>It's fine. That's what i need. </p>\n\n<p>But if I do the same in <strong>kotlin</strong> module like this: </p>\n\n<pre><code>val mapper = ObjectMapper()\n        .registerModule(KotlinModule())\n        .registerModule(JavaTimeModule())\n        .registerModule(\n                SimpleModule()\n                        .addSerializer(Long::class.java, LongToStringJSONSerializer.ofObject())\n                        .addSerializer(Long::class.javaPrimitiveType, LongToStringJSONSerializer.ofPrimitive())\n        )\n\nval javaRecord = JavaRecord().setId(Long.MAX_VALUE)\nval kotlinRecord = KotlinRecord(Long.MAX_VALUE)\n\nprintln(\"Java record:   ${mapper.writeValueAsString(javaRecord)}\")\nprintln(\"Kotlin record: ${mapper.writeValueAsString(kotlinRecord)}\")\n</code></pre>\n\n<p>I get: </p>\n\n<pre><code>Java record:   {\"id\":9223372036854775807}\nKotlin record: {\"id\":\"9223372036854775807\"}\n</code></pre>\n\n<p>For record defined as java class long value wasn't conveted to string. </p>\n\n<p>My custom serializer: </p>\n\n<pre><code>public class LongToStringJSONSerializer extends JsonSerializer&lt;Long&gt; {\n    private boolean forPrimitive;\n\n    private LongToStringJSONSerializer(boolean forPrimitive) {\n        this.forPrimitive = forPrimitive;\n    }\n\n    @Override\n    public void serialize(Long longVal, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws\n            IOException {\n        jsonGenerator.writeObject(longVal == null ? \"\" : String.valueOf(longVal));\n    }\n\n    @Override\n    public Class&lt;Long&gt; handledType() {\n        return forPrimitive ? long.class : Long.class;\n    }\n\n    public static LongToStringJSONSerializer ofPrimitive() {\n        return new LongToStringJSONSerializer(true);\n    }\n\n    public static LongToStringJSONSerializer ofObject() {\n        return new LongToStringJSONSerializer(false);\n    }\n} \n</code></pre>\n\n<p>Can anyone explain this behavior and what needs to be done to fix it? Thanks! </p>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 1694, "user_id": 10172915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dgRVP.png?s=128&g=1", "display_name": "Akaki Kapanadze", "link": "https://stackoverflow.com/users/10172915/akaki-kapanadze"}, "is_accepted": false, "score": 0, "last_activity_date": 1559602158, "creation_date": 1559602158, "answer_id": 56435421, "question_id": 56427969, "link": "https://stackoverflow.com/questions/56427969/android-populate-values-into-already-created-pojo-model-object-using-retrofit/56435421#56435421", "title": "Android - Populate values into already created POJO model object using retrofit", "body": "<p>I think it is not possible to populate the additional fields in the existing <code>UserModel</code> object by using <code>Retrofit</code>, but you can do some magic with <code>GSON</code>:</p>\n\n<pre><code>data class UserModel(\n        val userId: Int? = null,\n        val userName: String? = null)\n\nclass OtherContentRelatedToUserModel\n\ndata class ApiResponsePojo(\n        val status: Int? = null,\n        val userModel: UserModel? = null,\n        val otherContentRelatedToUserModel: OtherContentRelatedToUserModel? = null)\n\nclass UserModelInstanceCreator(var userModelToUpdate: UserModel? = null)\n    : InstanceCreator&lt;UserModel&gt; {\n    override fun createInstance(type: Type?): UserModel {\n        return userModelToUpdate ?: UserModel()\n    }\n}\n\nval apiResponseJson =\n        \"\"\"\n            {\n                \"status\":200,\n                \"userModel\":{\n                    \"userId\": 1\n                },\n                \"otherContentRelatedToUserModel\":{\n                }\n            }\n        \"\"\"\n\nval userModelResponseJson =\n        \"\"\"\n            {\n                \"userName\": \"john wick\"\n            }\n        \"\"\"\n\nval userModelInstanceCreator = UserModelInstanceCreator()\n\nval gson = GsonBuilder()\n        .registerTypeAdapter(UserModel::class.java, userModelInstanceCreator)\n        .create()\n\nval apiResponse: ApiResponsePojo = gson.fromJson(apiResponseJson, ApiResponsePojo::class.java)\nuserModelInstanceCreator.userModelToUpdate = apiResponse.userModel\ngson.fromJson(userModelResponseJson, UserModel::class.java)\n\n...\n// apiResponse.toString() result\n// ApiResponsePojo(status=200, userModel=UserModel(userId=1, userName=john wick)...\n</code></pre>\n"}], "owner": {"reputation": 1754, "user_id": 5251407, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/o4raw.jpg?s=128&g=1", "display_name": "Akhil Soman", "link": "https://stackoverflow.com/users/5251407/akhil-soman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559602158, "creation_date": 1559566931, "question_id": 56427969, "link": "https://stackoverflow.com/questions/56427969/android-populate-values-into-already-created-pojo-model-object-using-retrofit", "title": "Android - Populate values into already created POJO model object using retrofit", "body": "<p>I have a POJO model object \"apiResponse\" that has values from a previous API call.</p>\n\n<pre><code>{\n   \"status\":200,\n   \"userModel\":{\n                 ...SOME VARIABLES...\n               },\n   \"otherContentRelatedToUserModel\":{\n                    ..SOME RELATED CONTENT..\n                    }\n}\n</code></pre>\n\n<p>This apiResponse has an \"UserModel\" as an inner object. </p>\n\n<p><strong>What i want to do</strong> is pass this \"apiResponse\" object to another api call whose response is \"UserModel\", and have it update only the UserModel object in the APIResponse POJO object.</p>\n\n<p><strong>The objective</strong> is to keep a single source of related content, which could change based on the interaction in the application, but might not update the rest of the related content. </p>\n\n<p>Or is it possible to atleast update an already created pojo model as a whole, updating the variable values in the model.?</p>\n\n<p><strong>Reason for this ::</strong></p>\n\n<p>The API's content does not change for a set amount of time in the server, mainly to avoid over traffic to the server. So some amount of logic has to be implemented on the application side. Currently using a DB is not really a viable option.</p>\n\n<p>Basically update only a portion of the already created POJO class object with another api call.</p>\n\n<p>Is this possible in android(kotlin) using retrofit? Or is there any other way this could be achievable?</p>\n"}, {"tags": ["android", "kotlin", "rx-java"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1559563026, "post_id": 56426657, "comment_id": 99448300, "body": "it&#39;s difficult to say unless you specify what this fun should be doing. Why would <code>storeConnections</code> return an obervable? What is it observing?"}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1559563352, "post_id": 56426657, "comment_id": 99448456, "body": "@TimCastelijns That&#39;s the problem. storeConnections is returning nothing. But I need to wrap it in an observable in order to push it down the stream. So maybe my question is how to wrap an API call with an Observable when that api call returns nothing. Most of the samples I&#39;ve seen all return something from an api. But this one doesn&#39;t"}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1559563540, "post_id": 56426657, "comment_id": 99448546, "body": "<i>I need to wrap it in an observable in order to push it down the stream.</i> can you clarify?"}, {"owner": {"reputation": 741, "user_id": 2425683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215ad9102474c439dc778f6db4a2520c?s=128&d=identicon&r=PG", "display_name": "Diego Magdaleno", "link": "https://stackoverflow.com/users/2425683/diego-magdaleno"}, "edited": false, "score": 0, "creation_date": 1559563685, "post_id": 56426657, "comment_id": 99448633, "body": "What does the function <code>mapper.toDb(it)</code> return?"}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1559563756, "post_id": 56426657, "comment_id": 99448671, "body": "I updated my question and have shown the code that calls storeConnections. It is called with a fromCallable in a flatMap which requires an Observable."}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "reply_to_user": {"reputation": 741, "user_id": 2425683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215ad9102474c439dc778f6db4a2520c?s=128&d=identicon&r=PG", "display_name": "Diego Magdaleno", "link": "https://stackoverflow.com/users/2425683/diego-magdaleno"}, "edited": false, "score": 0, "creation_date": 1559563761, "post_id": 56426657, "comment_id": 99448673, "body": "@DiegoMagdaleno it returns a <code>List&lt;LinkedInConnectionEntity&gt;</code>"}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "reply_to_user": {"reputation": 741, "user_id": 2425683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215ad9102474c439dc778f6db4a2520c?s=128&d=identicon&r=PG", "display_name": "Diego Magdaleno", "link": "https://stackoverflow.com/users/2425683/diego-magdaleno"}, "edited": false, "score": 0, "creation_date": 1559563848, "post_id": 56426657, "comment_id": 99448710, "body": "@DiegoMagdaleno toDB just converts one from one class to another. You can ignore that. That part works fine and is only used as a parameter for the storeConnections function."}], "answers": [{"tags": [], "owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "is_accepted": false, "score": -1, "last_activity_date": 1559564870, "creation_date": 1559564870, "answer_id": 56427388, "question_id": 56426657, "link": "https://stackoverflow.com/questions/56426657/type-mismatch-returning-an-observable-with-fromcallable/56427388#56427388", "title": "Type mismatch returning an observable with fromCallable", "body": "<p>The key to getting it to work is using this:</p>\n\n<pre><code>return@fromCallable connections\n</code></pre>\n\n<p>So this is the corrected code:</p>\n\n<pre><code>override fun storeConnections(connections: List&lt;Connection&gt;): Observable&lt;List&lt;Connection&gt;&gt; =\n    Observable.fromCallable&lt;List&lt;Connection&gt;&gt; {\n\n        appDao.storeConnections(connections.map {\n            mapper.toDb(it)\n        })\n\n        return@fromCallable connections\n    }\n</code></pre>\n\n<p>And the rx stream that calls it:</p>\n\n<pre><code>val startPositions = BehaviorSubject.createDefault(0)\n\n    startPositions.flatMap { startPos -&gt; App.context.repository.getConnections(startPos) }\n        .flatMap {\n                connections -&gt; App.context.repository.storeConnections(connections)\n        }\n        .doOnNext {\n                connections -&gt; startPositions.onNext(startPos++)\n        }\n        .subscribe({ ind -&gt; println(\"Index $ind\") })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5120, "user_id": 1401164, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/892b23de3c567590676d6ce001d5d854?s=128&d=identicon&r=PG", "display_name": "Gustavo", "link": "https://stackoverflow.com/users/1401164/gustavo"}, "is_accepted": false, "score": 0, "last_activity_date": 1559772778, "creation_date": 1559772778, "answer_id": 56468728, "question_id": 56426657, "link": "https://stackoverflow.com/questions/56426657/type-mismatch-returning-an-observable-with-fromcallable/56468728#56468728", "title": "Type mismatch returning an observable with fromCallable", "body": "<p>Given your reply to your question:</p>\n\n<blockquote>\n  <p>storeConnections is returning nothing. But I need to wrap it in an observable in order to push it down the stream. So maybe my question is how to wrap an API call with an Observable when that api call returns nothing.</p>\n</blockquote>\n\n<p>I will answer how you can wrap it in an observable in order to push it down the stream:</p>\n\n<pre><code>        .flatMap {\n                connections -&gt; \n                    App.context.repository.storeConnections(connections)\n                        .andThen(Observable.just(connections))\n        }\n</code></pre>\n\n<p>Given that storeConnections returns a Completable:</p>\n\n<pre><code>    override fun storeConnections(connections: List&lt;Connection&gt;): Completable =\n        Completable.fromAction {\n            appDao.storeConnections(connections.map { mapper.toDb(it) } )\n        }\n    }\n</code></pre>\n\n<p>If storeConnections returns \"nothing\", you could simply move the Completable.fromAction to your stream:</p>\n\n<pre><code>        .flatMap {\n                connections -&gt; \n                    Completable.fromAction { App.context.repository.storeConnections(connections) }\n                        .andThen(Observable.just(connections))\n        }\n</code></pre>\n"}], "owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1559772778, "creation_date": 1559562307, "last_edit_date": 1592644375, "question_id": 56426657, "link": "https://stackoverflow.com/questions/56426657/type-mismatch-returning-an-observable-with-fromcallable", "title": "Type mismatch returning an observable with fromCallable", "body": "<p>The following code does not compile:</p>\n<pre><code>override fun storeConnections(connections: List&lt;Connection&gt;): Observable&lt;List&lt;Connection&gt;&gt; =\n    Observable.fromCallable&lt;List&lt;Connection&gt;&gt; {\n        appDao.storeConnections(connections.map {\n                            mapper.toDb(it)})\n        \n        \n    }\n</code></pre>\n<p>The line with appDao.storeConnections indicates the following error:</p>\n<blockquote>\n<p>Required List!</p>\n<p>Found Unit</p>\n</blockquote>\n<p>The storeConnections is done using Room:</p>\n<pre><code>@Dao\ninterface RoomDao {\n    @Insert(onConflict = REPLACE)\n    fun storeConnections(linkedInConnection: List&lt;LinkedInConnectionEntity&gt;)\n\n}\n</code></pre>\n<p>The storeConnections is called from my rx stream:</p>\n<pre><code>val startPositions = BehaviorSubject.createDefault(0)\n\nstartPositions.flatMap { startPos -&gt; App.context.repository.getConnections(startPos) }\n    .flatMap { connections -&gt; Observable.fromCallable(App.context.repository.storeConnections(connections)) }\n    .doOnNext { ind -&gt; startPositions.onNext(ind + 1) }\n    .subscribe({ ind -&gt; println(&quot;Index $ind&quot;) })\n</code></pre>\n<p>How do I properly implement this fromCallable?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559561866, "post_id": 56426529, "comment_id": 99447662, "body": "Why should I never create an instance of an activity class?"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "reply_to_user": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559561989, "post_id": 56426529, "comment_id": 99447714, "body": "@Andr&#233;Silva: Only the framework code can create an activity correctly. Your <code>DashboardActivity()</code> instance is going to be fairly broken, for any functionality that it inherits from <code>Activity</code> or <code>Context</code>."}, {"owner": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559562250, "post_id": 56426529, "comment_id": 99447874, "body": "So the companion objects are always used when I want to access other classes methods?"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "reply_to_user": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559562405, "post_id": 56426529, "comment_id": 99447968, "body": "@Andr&#233;Silva: A companion object in Kotlin is akin to <code>static</code> methods in Java. Companion objects provide functions that are global in scope -- if <code>createActivity()</code> is a function on a companion object on <code>DashboardActivity</code>, you do not need an instance of <code>DashboardActivity</code>. As I noted just now in an update to the answer, since there is no <code>DashboardActivity</code> instance, you would call <code>startActivity()</code> on the passed-in <code>Context</code>."}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": false, "score": 0, "last_activity_date": 1559562367, "last_edit_date": 1559562367, "creation_date": 1559561790, "answer_id": 56426529, "question_id": 56426488, "link": "https://stackoverflow.com/questions/56426488/cannot-pass-context-between-two-classes-kotlin/56426529#56426529", "title": "Cannot pass context between two classes [kotlin]", "body": "<blockquote>\n  <p>every time I try to call DashboardActivity().createActivity(this), I get a NullPointerException</p>\n</blockquote>\n\n<p>Never create an instance of an activity class yourself.</p>\n\n<blockquote>\n  <p>why do I get this error?</p>\n</blockquote>\n\n<p>Because you created an instance of <code>DashboardActivity</code> yourself and tried using it.</p>\n\n<blockquote>\n  <p>I have tried using this@LoginActivity but didn't work...</p>\n</blockquote>\n\n<p>Make <code>createActivity()</code> be <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\" rel=\"nofollow noreferrer\">a function on a <code>companion object</code></a>. This will require a slight change to your implementation, calling <code>startActivity()</code> on the passed-in <code>Context</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1559561984, "creation_date": 1559561984, "answer_id": 56426574, "question_id": 56426488, "link": "https://stackoverflow.com/questions/56426488/cannot-pass-context-between-two-classes-kotlin/56426574#56426574", "title": "Cannot pass context between two classes [kotlin]", "body": "<p>use ApplicationContext</p>\n\n<pre><code>fun createActivity(){\n    val intent = Intent(applicationContext, DashboardActivity::class.java)\n    startActivity(intent)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559562171, "post_id": 56426576, "comment_id": 99447819, "body": "Thanks! One thing tho, inside the companion object, the &quot;startActivity(intent)&quot; gives me an error... Why?"}, {"owner": {"reputation": 637, "user_id": 5864033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV8Ps.jpg?s=128&g=1", "display_name": "Nimdokai", "link": "https://stackoverflow.com/users/5864033/nimdokai"}, "reply_to_user": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559562253, "post_id": 56426576, "comment_id": 99447877, "body": "correct, you should&#39;t put it inside createActivity(), I will edit my post. inside Dashboard Activity you should return Intent which will be used inside the LoginActivity and you use this intent to startActivity"}, {"owner": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559562388, "post_id": 56426576, "comment_id": 99447953, "body": "Hm, and why can&#39;t I put it inside createActivity()? What is the reason?"}, {"owner": {"reputation": 637, "user_id": 5864033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV8Ps.jpg?s=128&g=1", "display_name": "Nimdokai", "link": "https://stackoverflow.com/users/5864033/nimdokai"}, "reply_to_user": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "edited": false, "score": 0, "creation_date": 1559562453, "post_id": 56426576, "comment_id": 99447990, "body": "as mentioned it is inside companion object -&gt; static. And startActivity can be only used on objects."}], "tags": [], "owner": {"reputation": 637, "user_id": 5864033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV8Ps.jpg?s=128&g=1", "display_name": "Nimdokai", "link": "https://stackoverflow.com/users/5864033/nimdokai"}, "is_accepted": true, "score": 1, "last_activity_date": 1559562828, "last_edit_date": 1559562828, "creation_date": 1559561989, "answer_id": 56426576, "question_id": 56426488, "link": "https://stackoverflow.com/questions/56426488/cannot-pass-context-between-two-classes-kotlin/56426576#56426576", "title": "Cannot pass context between two classes [kotlin]", "body": "<p>you can't do that:\n <code>DashboardActivity().createActivity(this)</code>\nin that line you are trying to initialize activity and then use a method.</p>\n\n<p>What you should do is:\n<br>1.<br> </p>\n\n<pre><code>startActivity(DashboardActivity.createActivity(this))\n</code></pre>\n\n<p>2.<br> In <code>DashboardActivity.kt</code><br></p>\n\n<pre><code>companion object {\n      fun createActivity(context: Context): Intent {\n        return Intent(context, DashboardActivity::class.java)\n      }\n}\n</code></pre>\n\n<p>This creates <code>createActivity</code> method as \"static\" which means that you can access without need to initilize an intsance of this class. </p>\n"}], "owner": {"reputation": 83, "user_id": 9857555, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YrDzWW-zVvs/AAAAAAAAAAI/AAAAAAAACNw/W3bp9EdfgOk/photo.jpg?sz=128", "display_name": "Andr&#233; Silva", "link": "https://stackoverflow.com/users/9857555/andr%c3%a9-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 56426576, "answer_count": 3, "score": -1, "last_activity_date": 1559562828, "creation_date": 1559561586, "question_id": 56426488, "link": "https://stackoverflow.com/questions/56426488/cannot-pass-context-between-two-classes-kotlin", "title": "Cannot pass context between two classes [kotlin]", "body": "<p>So, I am new to Kotlin.\nI have two classes <code>LoginActivity</code> and <code>DashboardActivity</code>.\nIn the <code>DashboardActivity</code> I have a method:</p>\n\n<pre><code>fun createActivity(context: Context){\n        val intent = Intent(context, DashboardActivity::class.java)\n        startActivity(intent)\n}\n</code></pre>\n\n<p>and in the <code>LoginActivity</code>, when the user clicks the button to login, I have a method that calls the previous method:</p>\n\n<pre><code>private fun onClickLogin() {\n        val username : String = editTextUsername.text.toString()\n        val password : String = editTextPassword.text.toString()\n\n        if (username.isEmpty()){\n            editTextUsername.error = \"Insira um username\"\n            return\n        }\n        if (password.isEmpty()){\n            editTextPassword.error = \"Insira uma password\"\n            return\n        }\n\n       if (username.compareTo(\"user\") == 0 &amp;&amp; password.compareTo(\"password\") == 0){\n           DashboardActivity().createActivity(this)\n       }\n}\n</code></pre>\n\n<p>The problem is, every time I try to call <strong>DashboardActivity().createActivity(this)</strong>, I get a <strong>NullPointerException</strong>.\nHere is the logcat:</p>\n\n<p><a href=\"https://i.stack.imgur.com/8cKb3.png\" rel=\"nofollow noreferrer\">Click here, please</a></p>\n\n<p>So, why do I get this error? Is it because I cannot pass the context like this?\nI have tried using <code>this@LoginActivity</code> but didn't work...</p>\n"}, {"tags": ["android", "kotlin", "android-viewpager"], "comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1559557352, "post_id": 56425306, "comment_id": 99445412, "body": "<code>start a new activity with overridependingtransition</code> .. <code>overridePendingTransition</code> is method of <code>Activity</code> . SO you only need current Activity&#39;s reference to call it ,,, Which you already i guess for building <code>Intent</code>."}, {"owner": {"reputation": 1, "user_id": 11535247, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YGY0wDK7IF0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdDTHgDbHJgxxGRrPjQRT7in5Yh_Q/mo/photo.jpg?sz=128", "display_name": "Pram", "link": "https://stackoverflow.com/users/11535247/pram"}, "reply_to_user": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1559557803, "post_id": 56425306, "comment_id": 99445639, "body": "Thank you for your replay. val intent = Intent(mContext, XX::class.java) mContext?.startActivity(intent) mContext is a context  But i need to know how i start &quot;overridependingtransition(R.anim.slide_up, R.anim.no_animation)&quot; after calling startactivity. by mcontext i can&#39;t do that right"}, {"owner": {"reputation": 1557, "user_id": 3330058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C010X.png?s=128&g=1", "display_name": "Giorgos Neokleous", "link": "https://stackoverflow.com/users/3330058/giorgos-neokleous"}, "reply_to_user": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1559558047, "post_id": 56425306, "comment_id": 99445760, "body": "You should provide a more detailed description of your problem and any code snippets of what you have and it&#39;s not working. As @ADM said the overridePendingTransition() method belongs to an Activity, therefore if you have a reference to the activity you can call it."}], "answers": [{"tags": [], "owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "is_accepted": false, "score": 1, "last_activity_date": 1559558089, "creation_date": 1559558089, "answer_id": 56425547, "question_id": 56425306, "link": "https://stackoverflow.com/questions/56425306/how-to-call-overridependingtransition-on-viewpager-class-in-kotlin/56425547#56425547", "title": "How to call overridependingtransition on viewpager class in kotlin", "body": "<p>You need <code>Context</code> of an Activity here not Application context. If <code>mContext</code> holds a reference to and <code>Activity</code> and declared as <code>mContext:Activity?</code> Then you can simply use:-</p>\n\n<pre><code>mContext?.overridePendingTransition()\n</code></pre>\n\n<p>if Its declared as <code>Context</code> You can cast it to Activity .</p>\n\n<pre><code>(mContext as Activity).overridePendingTransition()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11535247, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YGY0wDK7IF0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdDTHgDbHJgxxGRrPjQRT7in5Yh_Q/mo/photo.jpg?sz=128", "display_name": "Pram", "link": "https://stackoverflow.com/users/11535247/pram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1559568031, "creation_date": 1559557163, "last_edit_date": 1559568031, "question_id": 56425306, "link": "https://stackoverflow.com/questions/56425306/how-to-call-overridependingtransition-on-viewpager-class-in-kotlin", "title": "How to call overridependingtransition on viewpager class in kotlin", "body": "<p>I have a view pager class.In that class onFling method i need to start a new activity with overridependingtransition.Is it possble? .If so then how.Please help me.</p>\n"}, {"tags": ["kotlin", "rx-java"], "answers": [{"tags": [], "owner": {"reputation": 5120, "user_id": 1401164, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/892b23de3c567590676d6ce001d5d854?s=128&d=identicon&r=PG", "display_name": "Gustavo", "link": "https://stackoverflow.com/users/1401164/gustavo"}, "is_accepted": false, "score": 0, "last_activity_date": 1559769481, "creation_date": 1559769481, "answer_id": 56468145, "question_id": 56425095, "link": "https://stackoverflow.com/questions/56425095/using-flatmap-with-a-completable/56468145#56468145", "title": "Using flatMap with a Completable", "body": "<p>In order to fix the type mismatch error, use operator <code>flatMapCompletable</code> instead of <code>flatMap</code>:</p>\n\n<pre><code>    .flatMapCompletable { connections -&gt; App.context.repository.storeConnections(connections) }\n</code></pre>\n\n<p>Then you will have to use <code>doOnComplete</code> instead of <code>doOnNext</code>:</p>\n\n<pre><code>    .doOnComplete { startPos -&gt; startPositions.onNext(startPos + 1) }\n</code></pre>\n"}], "owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1559769481, "creation_date": 1559556344, "question_id": 56425095, "link": "https://stackoverflow.com/questions/56425095/using-flatmap-with-a-completable", "title": "Using flatMap with a Completable", "body": "<p>I am trying to make an API call multiple times, passing in a different parameter. When no more data is returned, the rx stream should terminate. After each call, the data is stored in my local repository. Here is what I have:</p>\n\n<pre><code>val startPositions = BehaviorSubject.createDefault(0)\n\nstartPositions.flatMap { startPos -&gt; App.context.repository.getConnections(startPos) }\n        .flatMap { connections -&gt; App.context.repository.storeConnections(connections) }\n        .doOnNext { startPos -&gt; startPositions.onNext(startPos + 1) }\n        .subscribe({ startPos -&gt; println(\"Index $startPos\") })\n</code></pre>\n\n<p>Here is the api method to handle downloading the data:</p>\n\n<pre><code> override fun getConnections(startPos: Int): Observable&lt;List&lt;Connection&gt;&gt; {\n            return myAPI.getConnections(startPos)\n        }\n</code></pre>\n\n<p>And this is the api method for storing the data:</p>\n\n<pre><code>override fun storeConnections(connections: List&lt;Connection&gt;): Completable =\n        Completable.fromAction {\n            appDao.storeConnections(connections.map {\n                mapper.toDb(it)\n            })\n        }\n</code></pre>\n\n<p>The compile error I get is:</p>\n\n<blockquote>\n  <p>Type mismatch: inferred type is (List) -> Completable but ((List) -> ObservableSource!)! was expected</p>\n</blockquote>\n\n<p>If possible, I don't want to change the return types of my api calls. I'm also not certain about using a flatMap. The data returned from downloading is a list and I want the list to remain as a list in the stream. I don't want to emit individual list items.</p>\n"}, {"tags": ["android", "kotlin", "navigation", "toolbar"], "comments": [{"owner": {"reputation": 1702, "user_id": 6120487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c9bdc29c21b9f8b5c38120a99b9e44?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Leontev", "link": "https://stackoverflow.com/users/6120487/leo-leontev"}, "edited": false, "score": 1, "creation_date": 1559555796, "post_id": 56424869, "comment_id": 99444657, "body": "See <a href=\"https://stackoverflow.com/questions/38335216/transition-animation-from-hamburger-to-arrow-icon-on-adding-fragment\" title=\"transition animation from hamburger to arrow icon on adding fragment\">stackoverflow.com/questions/38335216/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/35716854/hamburger-menu-icon-to-cross-animation-in-android\" title=\"hamburger menu icon to cross animation in android\">stackoverflow.com/questions/35716854/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 11464168, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6X2a9yGwCIo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfQyzZDEUb38xzdJ_dMGngc4blwHA/mo/photo.jpg?sz=128", "display_name": "Jac Cabuhat", "link": "https://stackoverflow.com/users/11464168/jac-cabuhat"}, "reply_to_user": {"reputation": 1702, "user_id": 6120487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c9bdc29c21b9f8b5c38120a99b9e44?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Leontev", "link": "https://stackoverflow.com/users/6120487/leo-leontev"}, "edited": false, "score": 0, "creation_date": 1559555883, "post_id": 56424869, "comment_id": 99444699, "body": "i already add the actionbardrawertoggle but still not working and i want to disable the animation."}], "owner": {"reputation": 1, "user_id": 11464168, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6X2a9yGwCIo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfQyzZDEUb38xzdJ_dMGngc4blwHA/mo/photo.jpg?sz=128", "display_name": "Jac Cabuhat", "link": "https://stackoverflow.com/users/11464168/jac-cabuhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559555798, "creation_date": 1559555434, "last_edit_date": 1559555798, "question_id": 56424869, "link": "https://stackoverflow.com/questions/56424869/disable-hamburger-icon-to-arrow-transition-animation-fragment", "title": "Disable hamburger icon to arrow transition animation fragment", "body": "<p>I replace my hamburger to custom icon but when i start a new fragment there's a default transition to hamburger to arrow icon. i would like to disable that animation.</p>\n\n<p>[from hamburger to arrow <a href=\"https://i.stack.imgur.com/D0Bk1.png\" rel=\"nofollow noreferrer\">2</a>  <a href=\"https://i.stack.imgur.com/fwbNo.png\" rel=\"nofollow noreferrer\">1</a>  </p>\n\n<p>i'ts like this\n<a href=\"https://media.giphy.com/media/1ffNDQPOkJ50OvGVpN/giphy.gif\" rel=\"nofollow noreferrer\">https://media.giphy.com/media/1ffNDQPOkJ50OvGVpN/giphy.gif</a></p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 12999, "user_id": 241518, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9322bbe0a2e5ce86a464f1e7291f1ae2?s=128&d=identicon&r=PG", "display_name": "Vivart", "link": "https://stackoverflow.com/users/241518/vivart"}, "edited": false, "score": 0, "creation_date": 1559555788, "post_id": 56424677, "comment_id": 99444650, "body": "You are expecting a return value from Async call. If you want exchange token for some other service call, you can chain that service call with <code>getExchangeToken</code> call. <code>getExchangeToken().flatMap{ (token) -&gt; callSomeOtherService(token) } </code>"}], "answers": [{"tags": [], "owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "is_accepted": true, "score": 2, "last_activity_date": 1559557274, "creation_date": 1559557274, "answer_id": 56425324, "question_id": 56424677, "link": "https://stackoverflow.com/questions/56424677/return-string-from-a-method-after-rxjava-call/56425324#56425324", "title": "Return String from a Method after RxJava call", "body": "<p>You just didn't get how threads works. <code>Rx</code> starts new thread (because you called <code>subscribeOn(Schedulers.io())</code>), then <code>return token</code> code executes in parallel with your request. It means that at the moment when <code>getExchangePortalToken</code> come to end, your request just started to process.</p>\n\n<p>If you want to get result with your <code>getExchangePortalToken</code> you can put callback parameter:</p>\n\n<pre><code>fun getExchangePortalToken(onSuccess: (String) -&gt; Unit): Unit {//now it doesn't return anything\n</code></pre>\n\n<p>Then call it at the end of <code>onSuccess</code>:</p>\n\n<pre><code>override fun onSuccess(value: Response&lt;ResponseBody&gt;?) {\n    ...\n    var access_token = obj.getString(\"access_token\")\n    onSuccess(access_token)\n}\n</code></pre>\n\n<p>It would be usefull to put similar callback to handle errors and invoke it in <code>onError</code>. I wish you can make it by yourself.</p>\n\n<p>Of cource, you can use <a href=\"https://kotlinlang.org/docs/reference/coroutines-overview.html\" rel=\"nofollow noreferrer\">coroutines</a> to make your code look like your current one, but I highly recommend you to learn how to work with threads first.</p>\n"}], "owner": {"reputation": 19, "user_id": 10489375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0369078e330ae48e21a6e979fa2395f?s=128&d=identicon&r=PG&f=1", "display_name": "Kasper Niedrig", "link": "https://stackoverflow.com/users/10489375/kasper-niedrig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 56425324, "answer_count": 1, "score": 0, "last_activity_date": 1559557274, "creation_date": 1559554737, "question_id": 56424677, "link": "https://stackoverflow.com/questions/56424677/return-string-from-a-method-after-rxjava-call", "title": "Return String from a Method after RxJava call", "body": "<p>i am having a problem to return a value after i call a Service from the Backend, it is a String i get from the Service and after i call this service i want that method to return me that string</p>\n\n<p>I have tried saving it in a variable, saving it in sharedpreference but it always returns me an empty string. Yet when i Log.d the result i get from the service i can see that it returns me the thing i want but i want the Method then to return me that result</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    fun getExchangePortalToken(): String {\n//I want this variable to be the value of the String i get from the Service and to return it afterwards\n        var token = \"\"\n        compositeDisposable!!.add(apiServicePortal!!.getExchangeToken(basic, \"casopenid-bearer\", idToken)\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribeWith(object: DisposableSingleObserver&lt;Response&lt;ResponseBody&gt;&gt;(){\n                    override fun onSuccess(value: Response&lt;ResponseBody&gt;?) {\n                        Log.d(\"EXCHANGE_PORTAL\", \"SUCCESS\")\n\n                        val string = value!!.body()!!.string()\n                        val obj = JSONObject(string)\n                        var access_token = obj.getString(\"access_token\")\n\n//Here im setting the value of the string based on the Result i get from the service\n                        token = access_token\n                    }\n\n                    override fun onError(e: Throwable?) {\n                        Log.d(\"EXCHANGE_PORTAL\", e!!.message)\n                        token = \"ERROR\"\n                    }\n\n                }))\n        return token\n    }\n\n</code></pre>\n"}, {"tags": ["android-studio", "kotlin", "switch-statement"], "comments": [{"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1559555403, "post_id": 56424564, "comment_id": 99444464, "body": "You can add <code>.also { }</code> or <code>!!</code> to force <code>when</code> to be an expression."}, {"owner": {"reputation": 4394, "user_id": 1565635, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47afd04b281fd1fb5ff38a9cc5378562?s=128&d=identicon&r=PG", "display_name": "Tobias Reich", "link": "https://stackoverflow.com/users/1565635/tobias-reich"}, "reply_to_user": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1559555487, "post_id": 56424564, "comment_id": 99444497, "body": "Not exactly sure how it&#39;s meant to be with .also{}, but what I&#39;d really like is to see all these cases in my code inspection. Hence the request for Lint warnings / errors."}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1559557686, "post_id": 56424564, "comment_id": 99445580, "body": "When <code>when</code> is an expression, compiler will require you to cover all the possible cases."}], "answers": [{"comments": [{"owner": {"reputation": 4394, "user_id": 1565635, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47afd04b281fd1fb5ff38a9cc5378562?s=128&d=identicon&r=PG", "display_name": "Tobias Reich", "link": "https://stackoverflow.com/users/1565635/tobias-reich"}, "edited": false, "score": 0, "creation_date": 1559562939, "post_id": 56425091, "comment_id": 99448250, "body": "The idea sounds nice but to me it does compile. It just states a slightly different message now about sealed classes that should be exhaustive (instead of Enums). Am I missing something?"}, {"owner": {"reputation": 2277, "user_id": 1421319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6396188f7ed7202ce7a5e132c0b071d7?s=128&d=identicon&r=PG", "display_name": "Gal Naor", "link": "https://stackoverflow.com/users/1421319/gal-naor"}, "reply_to_user": {"reputation": 4394, "user_id": 1565635, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47afd04b281fd1fb5ff38a9cc5378562?s=128&d=identicon&r=PG", "display_name": "Tobias Reich", "link": "https://stackoverflow.com/users/1565635/tobias-reich"}, "edited": false, "score": 0, "creation_date": 1559563971, "post_id": 56425091, "comment_id": 99448768, "body": "so I might get confused the way scala does it... anyway, the message means that not all the sealed class cases are covered in the <code>when</code> clause. because I suggested to &quot;convert&quot; your enum to sealed class, you got a warning which refers to a sealed class"}, {"owner": {"reputation": 2277, "user_id": 1421319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6396188f7ed7202ce7a5e132c0b071d7?s=128&d=identicon&r=PG", "display_name": "Gal Naor", "link": "https://stackoverflow.com/users/1421319/gal-naor"}, "reply_to_user": {"reputation": 4394, "user_id": 1565635, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47afd04b281fd1fb5ff38a9cc5378562?s=128&d=identicon&r=PG", "display_name": "Tobias Reich", "link": "https://stackoverflow.com/users/1565635/tobias-reich"}, "edited": false, "score": 0, "creation_date": 1559564350, "post_id": 56425091, "comment_id": 99448956, "body": "In addition - take a look in this article - <a href=\"https://medium.com/fuzz/kotlin-features-you-should-use-now-62d246d80a53\" rel=\"nofollow noreferrer\">medium.com/fuzz/kotlin-features-you-should-use-now-62d246d80&zwnj;&#8203;a53</a> and the sentence: <code>To allow our enum to hold state, but have the compiler verify we covered all cases of an instance, we change the declaration to a sealed class</code>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1559564388, "post_id": 56425091, "comment_id": 99448967, "body": "The is no substantial functional difference between sealed classes and enums, so refactoring ones into others will not change things"}, {"owner": {"reputation": 2277, "user_id": 1421319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6396188f7ed7202ce7a5e132c0b071d7?s=128&d=identicon&r=PG", "display_name": "Gal Naor", "link": "https://stackoverflow.com/users/1421319/gal-naor"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1559564611, "post_id": 56425091, "comment_id": 99449069, "body": "10x for the clarification @voddan"}, {"owner": {"reputation": 4394, "user_id": 1565635, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47afd04b281fd1fb5ff38a9cc5378562?s=128&d=identicon&r=PG", "display_name": "Tobias Reich", "link": "https://stackoverflow.com/users/1565635/tobias-reich"}, "edited": false, "score": 0, "creation_date": 1559565042, "post_id": 56425091, "comment_id": 99449319, "body": "Okay, so then there is little benefit (even though I guess I gonna use sealed classes for other benefits). However, if anyone has any idea on how to achieve a warning. After all, the compiler seams so see this problem anyway (I can also annotate in order to ignore it). So I assumed, there must be a way of enforcing it, too"}], "tags": [], "owner": {"reputation": 2277, "user_id": 1421319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6396188f7ed7202ce7a5e132c0b071d7?s=128&d=identicon&r=PG", "display_name": "Gal Naor", "link": "https://stackoverflow.com/users/1421319/gal-naor"}, "is_accepted": false, "score": 0, "last_activity_date": 1559556756, "last_edit_date": 1559556756, "creation_date": 1559556325, "answer_id": 56425091, "question_id": 56424564, "link": "https://stackoverflow.com/questions/56424564/kotlin-when-how-to-get-lint-warning-in-android-studio/56425091#56425091", "title": "Kotlin &#39;when&#39; - How to get lint warning in Android Studio", "body": "<p>You can achieve that by using <a href=\"https://kotlinlang.org/docs/reference/sealed-classes.html\" rel=\"nofollow noreferrer\">sealed classes</a>.</p>\n\n<p>You can migrate your enum to sealed class, and use it like this:</p>\n\n<pre><code>sealed class MyFancyEnum {\n   object TYPE_A : MyFancyEnum()\n   object TYPE_B : MyFancyEnum()\n   object TYPE_C : MyFancyEnum()\n}\n\nfun setFancyEnum(fancyEnum: MyFancyEnum) {\n   when(fancyEnum) {\n     is MyFancyEnum.TYPE_A -&gt; ...\n     is MyFancyEnum.TYPE_B -&gt; ...    \n  }\n}\n</code></pre>\n\n<p>In that case, it won't even compile, because not all sealed class options are handled.</p>\n"}, {"comments": [{"owner": {"reputation": 4394, "user_id": 1565635, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47afd04b281fd1fb5ff38a9cc5378562?s=128&d=identicon&r=PG", "display_name": "Tobias Reich", "link": "https://stackoverflow.com/users/1565635/tobias-reich"}, "edited": false, "score": 1, "creation_date": 1559565668, "post_id": 56427364, "comment_id": 99449657, "body": "Okay, well, this is a &quot;solution&quot;. However, its not really perfect because I can already see developers forgetting to add this &quot;arbitrary&quot; also expression at the end disabling the check again. But thanks for one possible solution so far."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 4394, "user_id": 1565635, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47afd04b281fd1fb5ff38a9cc5378562?s=128&d=identicon&r=PG", "display_name": "Tobias Reich", "link": "https://stackoverflow.com/users/1565635/tobias-reich"}, "edited": false, "score": 0, "creation_date": 1559569013, "post_id": 56427364, "comment_id": 99451492, "body": "Exactly right. A Lint check would be better since you already use Lint. Unfortunately I don&#39;t now how to work with Lint :("}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1559564780, "creation_date": 1559564780, "answer_id": 56427364, "question_id": 56424564, "link": "https://stackoverflow.com/questions/56424564/kotlin-when-how-to-get-lint-warning-in-android-studio/56427364#56427364", "title": "Kotlin &#39;when&#39; - How to get lint warning in Android Studio", "body": "<p>This is the workaround the was suggested in the comments: add an empty <code>.also{}</code> operator to the end of the <code>when</code> expression. </p>\n\n<pre><code> when (it){\n     TYPE_A -&gt; { ... }\n }.also{}\n</code></pre>\n\n<p>This trick utilises the Kotlin compiler itself, which requires all branches of <code>when</code> to be covered if the result of the <code>when() { .. }</code> expression is used by someone. Since <code>.also{}</code> technically uses the result of the <code>when</code>, this triggers a compiler error.</p>\n"}], "owner": {"reputation": 4394, "user_id": 1565635, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47afd04b281fd1fb5ff38a9cc5378562?s=128&d=identicon&r=PG", "display_name": "Tobias Reich", "link": "https://stackoverflow.com/users/1565635/tobias-reich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1559564780, "creation_date": 1559554308, "question_id": 56424564, "link": "https://stackoverflow.com/questions/56424564/kotlin-when-how-to-get-lint-warning-in-android-studio", "title": "Kotlin &#39;when&#39; - How to get lint warning in Android Studio", "body": "<p>So I have many Enums in my app which get used in kotlins <em>when</em> calls.</p>\n\n<p>For instance my enum class </p>\n\n<pre><code>enum class MyFancyEnum {\n  TYPE_A,TYPE_B, TYPE_C\n}\n</code></pre>\n\n<p>is used in something like this:</p>\n\n<pre><code>when (it){\n TYPE_A -&gt; { ... }\n}\n</code></pre>\n\n<p>What I need is a warning (or even better an error) in case I have forgotten to distinguish between all branches.</p>\n\n<p>I can see, the compiler is highlighting this already and moving the cursor on it I get a message similar to that one:</p>\n\n<blockquote>\n  <p>'when' expression on enum is recommended to be exhaustive, add '...'\n  branch or 'else' branch instead</p>\n</blockquote>\n\n<p>However, there are no lint checks for this in Android Studio. (One seems to be switch-case for Java but nothing similar for Kotlin).</p>\n\n<p><strong>Question:</strong>\nHow can I get a Lint Warning / Error in case I forgot one branch in a when expression? </p>\n"}]