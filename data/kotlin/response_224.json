[{"tags": ["android", "firebase", "kotlin", "firebase-storage", "firebase-security"], "comments": [{"owner": {"reputation": 897, "user_id": 2855810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J0mS1.png?s=128&g=1", "display_name": "Ergin Ersoy", "link": "https://stackoverflow.com/users/2855810/ergin-ersoy"}, "edited": false, "score": 0, "creation_date": 1556148623, "post_id": 55839832, "comment_id": 98343364, "body": "is this &quot;/b/savephoto-a1cc3.appspot.com/o&quot; your path are you sure. I think you get the code from here <a href=\"https://stackoverflow.com/questions/38671444/user-does-not-have-permission-to-access-this-object-firebase-storage-android\" title=\"user does not have permission to access this object firebase storage android\">stackoverflow.com/questions/38671444/&hellip;</a> . So you need to check your application id from firebase"}], "answers": [{"tags": [], "owner": {"reputation": 2206, "user_id": 7967164, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fZY-EicPiTM/AAAAAAAAAAI/AAAAAAABvGI/Bb7G8qimGZY/photo.jpg?sz=128", "display_name": "Dennis Alund", "link": "https://stackoverflow.com/users/7967164/dennis-alund"}, "is_accepted": false, "score": 2, "last_activity_date": 1556162319, "creation_date": 1556162319, "answer_id": 55841324, "question_id": 55839832, "link": "https://stackoverflow.com/questions/55839832/uploading-an-image-and-firebase-says-user-does-not-have-permission-to-access-th/55841324#55841324", "title": "Uploading an Image and Firebase says &quot;User does not have permission to access this object&quot;, even when storage settings are public", "body": "<p>Hard coding the bucket name is not a good idea. Use variable placeholder for the bucket name instead as see <a href=\"https://firebase.google.com/docs/storage/security/start#sample-rules\" rel=\"nofollow noreferrer\">in the documentation</a>.</p>\n\n<blockquote>\n  <p>Storage Security Rules must first specify the service (in our case firebase.storage), and the Cloud Storage bucket <strong>(via match /b/{bucket}/o)</strong> which rules are evaluated against. The default rules require Firebase Authentication, but here are some examples of other common rules with different access control.</p>\n</blockquote>\n\n<p>Change your storage rules to the rules below to achieve what you want. </p>\n\n<pre><code>service firebase.storage {\n  match /b/{bucket}/o {\n    match /{allPaths=**} {\n      allow read, write;\n    }\n  }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/oKrlQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oKrlQ.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 21, "user_id": 11407874, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m0czkCCopFI/AAAAAAAAAAI/AAAAAAAAV9U/iSUNroQ20-Q/photo.jpg?sz=128", "display_name": "Imad Mashhood", "link": "https://stackoverflow.com/users/11407874/imad-mashhood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556167340, "creation_date": 1556148230, "last_edit_date": 1556167340, "question_id": 55839832, "link": "https://stackoverflow.com/questions/55839832/uploading-an-image-and-firebase-says-user-does-not-have-permission-to-access-th", "title": "Uploading an Image and Firebase says &quot;User does not have permission to access this object&quot;, even when storage settings are public", "body": "<p>I'm trying to upload an image, then have the download location of said image stored in a val. Yesterday it was working 100% perfectly with no issue. I changed no code and I cant upload the image now, now it says</p>\n\n<blockquote>\n  <p>Failed to Upload Image User does not have permission to access this object.</p>\n</blockquote>\n\n<p>I checked every single stack-overflow/Reddit post with the same topic, and they all say to change permissions of my rules to public. </p>\n\n<p>My rules are set to public</p>\n\n<pre><code>service firebase.storage {\n  match /b/savephoto-a1cc3.appspot.com/o {\n    match /{allPaths=**} {\n      allow read, write;\n    }\n  }\n}\n</code></pre>\n\n<p>This is the implementation of uploading the image.</p>\n\n<pre><code>      val ref = FirebaseStorage.getInstance().getReference(\"/images/profilePictures/$filename\")\n\n        //Stores File\n        ref.putFile(selectedPhoto!!)\n            .addOnSuccessListener {\n                Log.d(\"main\", \"Succesfully Uploaded Image ${it.metadata?.path}\")\n\n                //Gets Download Link for Image\n                ref.downloadUrl.addOnSuccessListener {\n                    val downloadImg = it.toString()\n                    Log.d(\"main\", \"Profile Picture Location $it\")\n                    //Create User\n                    createUser(downloadImg, age, gender, firstName, lastName)\n                }\n            }\n            .addOnFailureListener {\n                Log.d(\"main\", \"Failed to Upload Image ${it.message}\")\n            }\n    }\n</code></pre>\n\n<p>still unsure why I'm getting a </p>\n\n<blockquote>\n  <p>Failed to Upload Image User does not have permission to access this object.</p>\n</blockquote>\n\n<p>even when the rules are set to public and my code seems perfectly fine.\nIt was properly uploading images yesterday but now I'm being given this error.</p>\n"}, {"tags": ["android", "kotlin", "broadcastreceiver", "android-audiomanager"], "answers": [{"tags": [], "owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "is_accepted": true, "score": 1, "last_activity_date": 1556143606, "creation_date": 1556143606, "answer_id": 55839227, "question_id": 55839125, "link": "https://stackoverflow.com/questions/55839125/kotlin-how-to-turn-back-volume-changing/55839227#55839227", "title": "Kotlin - How to turn back volume changing?", "body": "<p>Maybe you can handle it like this?</p>\n\n<pre><code>private val broadcastReceiver = object : BroadcastReceiver() {\nvar wasVolumeChangedByApp = false\noverride fun onReceive(context: Context, intent: Intent) {\n    if (\"android.media.VOLUME_CHANGED_ACTION\" == intent.action &amp;&amp; !wasVolumeChangedByApp) {\n        audioManager.setStreamVolume(AudioManager.STREAM_RING, constDeviceVolume, 0)\n        wasVolumeChangedByApp = true\n        return\n    }\n    wasVolumeChangedByApp = false\n}\n</code></pre>\n\n<p>When the boolean flag (indicating that your App modified the volume) is set the handling of onReceive() is simply ignored. This flag is then reset so the onReceive call afterwards will be handled as desired.</p>\n"}], "owner": {"reputation": 101, "user_id": 11251645, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qgz2-ShkGdk/AAAAAAAAAAI/AAAAAAAAAHs/ZwyNFUubWU4/photo.jpg?sz=128", "display_name": "Michael", "link": "https://stackoverflow.com/users/11251645/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 55839227, "answer_count": 1, "score": 0, "last_activity_date": 1556143606, "creation_date": 1556142946, "question_id": 55839125, "link": "https://stackoverflow.com/questions/55839125/kotlin-how-to-turn-back-volume-changing", "title": "Kotlin - How to turn back volume changing?", "body": "<p>I'm trying to set set const volume with <code>AudioManager</code> by changing it every time.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>private val broadcastReceiver = object : BroadcastReceiver() {\n        override fun onReceive(context: Context, intent: Intent) {\n            if (\"android.media.VOLUME_CHANGED_ACTION\" == intent.action) {\n                audioManager.setStreamVolume(AudioManager.STREAM_RING, constDeviceVolume, 0)\n            }\n        }\n    }\n</code></pre>\n\n<p>The problem is in that it line <code>audioManager.setStreamVolume(AudioManager.STREAM_RING, constDeviceVolume, 0)</code> triggers <code>onReceive()</code> fun. </p>\n\n<p>I need to change volume without triggering <code>orReceive()</code> fun or alternative method.</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 11483, "user_id": 600486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/akN6H.png?s=128&g=1", "display_name": "blurfus", "link": "https://stackoverflow.com/users/600486/blurfus"}, "edited": false, "score": 0, "creation_date": 1556142059, "post_id": 55838939, "comment_id": 98341786, "body": "you need to create an instance of the <code>TestObject</code> (i.e. <code>new TestObject().name</code>) - unless the property <code>name</code> is <code>public static</code>, then you can make references to <code>TestObject.name</code>"}], "answers": [{"comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "reply_to_user": {"reputation": 11483, "user_id": 600486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/akN6H.png?s=128&g=1", "display_name": "blurfus", "link": "https://stackoverflow.com/users/600486/blurfus"}, "edited": false, "score": 0, "creation_date": 1556144916, "post_id": 55839155, "comment_id": 98342569, "body": "@ochi: Yes, Kotlin generates the accessor(s) and backing field as needed.  (At least, Kotlin/JVM does; I don&#39;t know about the other platforms.)  Strictly, the property <i>is</i> the getter (and, if present, setter) \u2014 most properties also have a backing field, but you don&#39;t have to have one if you override the accessor(s).  (Which is how extension properties work.)  Of course, the Kotlin syntax makes it look like you&#39;re accessing a field directly, but you&#39;re not; Java doesn&#39;t know about this, so it&#39;s more obvious there."}, {"owner": {"reputation": 1457, "user_id": 2462241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/11da47c8987402a92cb8b1f2aef11216?s=128&d=identicon&r=PG", "display_name": "Xi Wei", "link": "https://stackoverflow.com/users/2462241/xi-wei"}, "edited": false, "score": 0, "creation_date": 1556199914, "post_id": 55839155, "comment_id": 98363394, "body": "<code>TestObject.INSTANCE</code> is what I am looking for. Thanks a lot!"}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": true, "score": 7, "last_activity_date": 1556146085, "last_edit_date": 1556146085, "creation_date": 1556143086, "answer_id": 55839155, "question_id": 55838939, "link": "https://stackoverflow.com/questions/55838939/how-to-refer-an-kotlin-object-type-in-java/55839155#55839155", "title": "How to refer an Kotlin object type in Java?", "body": "<p>There are two things going on here, both related to how Kotlin/JVM generates Java bytecode.\u00a0 (These are implementation details that aren't visible from other Kotlin code, but become apparent when you access it from Java.)</p>\n\n<ul>\n<li><p>A singleton object gets translated to a class, and its single instance gets stored in a field of that object called <code>INSTANCE</code>.</p></li>\n<li><p>A Kotlin property consists of accessor methods (getter and, if writable, setter), and (if needed) a backing field.\u00a0 These get translated to a private field, and methods with the relevant visibility named in the conventional way (<code>getField()</code> and <code>setField()</code>, or <code>isField()</code> and <code>setField()</code> if the property's called <code>isField</code>).</p></li>\n</ul>\n\n<p>Putting that together, you can refer to the property in the question from Java code as:</p>\n\n<pre><code>TestObject.INSTANCE.getName()\n</code></pre>\n\n<p>(Full details on how to access Kotlin from Java are <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html\" rel=\"noreferrer\">here</a>.)</p>\n"}], "owner": {"reputation": 1457, "user_id": 2462241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/11da47c8987402a92cb8b1f2aef11216?s=128&d=identicon&r=PG", "display_name": "Xi Wei", "link": "https://stackoverflow.com/users/2462241/xi-wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 55839155, "answer_count": 1, "score": 0, "last_activity_date": 1556200127, "creation_date": 1556141905, "last_edit_date": 1556200127, "question_id": 55838939, "link": "https://stackoverflow.com/questions/55838939/how-to-refer-an-kotlin-object-type-in-java", "title": "How to refer an Kotlin object type in Java?", "body": "<p>I have the Kotlin object as below:</p>\n\n<pre><code>object TestObject {\n    val name: String = \"Hi\"\n}\n</code></pre>\n\n<p>How would I refer to <code>TestObject</code> in Java? The code below doesn't understand <code>TestObject.name</code>:</p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        System.out.println(TestObject.name);\n    }\n}\n</code></pre>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 2131, "user_id": 2343935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li569.png?s=128&g=1", "display_name": "grooveplex", "link": "https://stackoverflow.com/users/2343935/grooveplex"}, "edited": false, "score": 2, "creation_date": 1556140599, "post_id": 55838641, "comment_id": 98341297, "body": "I think it&#39;s not possible, but I would love to be proved wrong. :-)"}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1556143245, "post_id": 55838641, "comment_id": 98342134, "body": "I&#39;m sure you could write a specialised map class which could provide that sort of type-safety.  But I&#39;m not aware of any existing ones.  And I don&#39;t know whether it could implement the existing <code>Map</code> interface."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 2, "creation_date": 1556184094, "post_id": 55838641, "comment_id": 98353918, "body": "To put them in a list, you will lose the type info. At the very end, this will be <code>Map&lt;Any, Any&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 1, "creation_date": 1556178369, "post_id": 55843987, "comment_id": 98350869, "body": "+1. Due to how Kotlin infers types in generics, it&#39;s possible to have related, but not equal types for <code>T</code>. Example: <code>put(Number::class, 3)</code> or even <code>put(Any::class, 3)</code>. You could use a <code>reified</code> function that infers the class from the argument (so <code>put(3)</code> would be <code>put&lt;Int&gt;(3)</code>), but this can still be misused if explicitly specifying the type argument. Eventually, you can only check actual equality at runtime, e.g. <code>assert(key == value::class)</code>."}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 1, "creation_date": 1556178459, "post_id": 55843987, "comment_id": 98350919, "body": "Also, for map-like classes, I recommend overloading the <code>set</code> and <code>get</code> operators, to enable syntax <code>map[key]</code> and <code>map[key] = value</code>."}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "reply_to_user": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 0, "creation_date": 1556178588, "post_id": 55843987, "comment_id": 98350979, "body": "@TheOperator nice suggestion on the operator overloading"}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "reply_to_user": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 1, "creation_date": 1556212070, "post_id": 55843987, "comment_id": 98370294, "body": "I think if you include @xinaiz constructor extension function builder constructor from his answer with this, you will have a pretty complete Map like class that does what you want."}], "tags": [], "owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "is_accepted": false, "score": 2, "last_activity_date": 1556178921, "last_edit_date": 1556178921, "creation_date": 1556177258, "answer_id": 55843987, "question_id": 55838641, "link": "https://stackoverflow.com/questions/55838641/how-to-create-map-with-generics-in-kotlin/55843987#55843987", "title": "How to create map with generics in Kotlin?", "body": "<p>Your example using generics does not actually describe your goal for that map. Generics on the Map interface are not capable of describing the sort of functionality you want. The types of the keys and the values would need to encapsulate every key and value you put in that map, so, this is possible:</p>\n\n<pre><code>val myInstanceMap = mapOf&lt;KClass&lt;*&gt;, Any&gt;(\n        Int::class to 10,\n        String::class to \"10\"\n)\n</code></pre>\n\n<p>To get the type safety around particular keys and values in that map, you would have to do some of your own work to wrap such a general map. Here is an example:</p>\n\n<pre><code>class ClassToInstanceMap {\n\n    private val backingMap = mutableMapOf&lt;KClass&lt;*&gt;, Any?&gt;()\n\n    operator fun &lt;T: Any&gt; set(key: KClass&lt;T&gt;, value: T) {\n        backingMap[key] = value\n    }\n\n    @Suppress(\"UNCHECKED_CAST\")\n    operator fun &lt;T: Any&gt; get(key: KClass&lt;T&gt;): T {\n        return backingMap[key] as T\n    }\n\n    fun containsKey(key: KClass&lt;*&gt;): Boolean {\n        return backingMap.containsKey(key)\n    }\n\n}\n\nfun main() {\n    val classToInstanceMap = ClassToInstanceMap()\n\n    classToInstanceMap[Int::class] = 1\n    val intInstance = classToInstanceMap[Int::class]\n    println(intInstance)\n\n    classToInstanceMap[Int::class] = 2\n    val intInstance2 = classToInstanceMap[Int::class]\n    println(intInstance2)\n\n    classToInstanceMap[String::class] =\"1\"\n    val stringInstance = classToInstanceMap[String::class]\n    println(stringInstance)\n\n    classToInstanceMap[String::class] =\"2\"\n    val stringInstance2 = classToInstanceMap[String::class]\n    println(stringInstance2)\n}\n</code></pre>\n\n<p>I am sure you can figure out how to implement the other general methods of a map from that.</p>\n"}, {"tags": [], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "is_accepted": false, "score": 1, "last_activity_date": 1556183532, "creation_date": 1556183532, "answer_id": 55845718, "question_id": 55838641, "link": "https://stackoverflow.com/questions/55838641/how-to-create-map-with-generics-in-kotlin/55845718#55845718", "title": "How to create map with generics in Kotlin?", "body": "<p>If you want your map to be immutable after initialization, you could do this:</p>\n\n<pre><code>import kotlin.reflect.KClass\n\nclass InstanceKeyMapper(initBlock: InstanceKeyMapper.() -&gt; Unit) {\n\n    private val map = mutableMapOf&lt;KClass&lt;*&gt;, Any&gt;()\n\n    init {\n        initBlock(this)\n    }\n\n    infix fun &lt;T : Any&gt; KClass&lt;T&gt;.instance(value: T) {\n        map[this] = value\n    }\n\n    fun toMap() = map as Map&lt;KClass&lt;*&gt;, Any&gt; // downcast to disable mutability\n\n}\n\nfun instanceMapOf(initBlock: InstanceKeyMapper.() -&gt; Unit) = InstanceKeyMapper(initBlock).toMap()\n</code></pre>\n\n<p>And use it the following way:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n\n    val map = instanceMapOf {\n        Int::class instance 42 // ok\n        String::class instance \"abc\" // ok\n        Float::class instance 3.14f // ok\n        Boolean::class instance true // ok\n        Long::class instance \"not legit\" // bad type, compilation error\n    }\n\n    println(map[Int::class]) // 2\n    println(map[String::class]) // \"abc\"\n    map[Long::class] = 123L // compilation error, read-only\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 5, "last_activity_date": 1556188352, "last_edit_date": 1556188352, "creation_date": 1556183957, "answer_id": 55845836, "question_id": 55838641, "link": "https://stackoverflow.com/questions/55838641/how-to-create-map-with-generics-in-kotlin/55845836#55845836", "title": "How to create map with generics in Kotlin?", "body": "<p>I am not so sure whether I get what you really want to accomplish. Don't forget that generics are erased at runtime so at the end you will just have a <code>Map&lt;KClass&lt;*&gt;, Any&gt;</code> (more correctly: <code>Map&lt;Any, Any&gt;</code>). Nonetheless, the probably easiest way is to just stick to what you already know. You already showed a convenience method (<code>to</code>) to create a <code>Pair</code> which is then passed to the <code>mapOf</code>, so why not just use a new function that adheres to your requirements, e.g.</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; typedPair(value : T) = Pair(T::class, value)\n</code></pre>\n\n<p>So you can use:</p>\n\n<pre><code>mapOf(\n  typedPair(10), // adds Int::class as key with 10 as value\n  typedPair&lt;Short&gt;(1) // adds Short::class as key with 1 as value\n  typedPair&lt;Number&gt;(2) // adds Number::class as key with 2 as value\n)\n</code></pre>\n\n<p>Of course this way you are still able to add any other constellation into that map. If you want to overcome that, you have still some different options available:</p>\n\n<p>What about creating an additional <code>typedMapOf</code> function, e.g.:</p>\n\n<pre><code>fun typedMapOf(vararg values : Any) = values.associateBy { it::class }\n</code></pre>\n\n<p>Using it could look as follows:</p>\n\n<pre><code>typedMapOf(10, \"string\", 1.toShort())\n</code></pre>\n\n<p>However you probably will have a hard time adding <code>Number::class</code> then ;-)</p>\n\n<p>You can also mix the two variants above to something like:</p>\n\n<pre><code>data class MyTypedPair&lt;T : Any&gt;(val type : KClass&lt;T&gt;, val value : T)\ninline fun &lt;reified T : Any&gt; typedPair(value : T) = MyTypedPair(T::class, value)\nfun typedMapOf(vararg values : MyTypedPair&lt;*&gt;) = values.associateBy({it.type}) { it.value }\n</code></pre>\n\n<p>Which basically now forces you to deliver the specialized type to create that typed map.</p>\n\n<p>I still have some other variants... You can also have something like a wrapper that just supports a minimal set of functions:</p>\n\n<pre><code>class MyValues {\n    private val backedMap = mutableMapOf&lt;KClass&lt;*&gt;, Any&gt;()\n    fun &lt;T : Any&gt; put(value : T) = backedMap.put(value::class, value)\n    operator fun &lt;T : Any&gt; get(key : KClass&lt;T&gt;) = backedMap[key]\n}\n</code></pre>\n\n<p>Usage then differs a bit from the <code>Map</code> but is still very easy:</p>\n\n<pre><code>MyValues().apply {\n  put(10)\n  put&lt;Short&gt;(1)\n}\n</code></pre>\n\n<p>And if the type isn't derivable from the value then you can still use the above to construct a solution that probably fits your needs.</p>\n"}], "owner": {"reputation": 2270, "user_id": 3375151, "user_type": "registered", "accept_rate": 15, "profile_image": "https://graph.facebook.com/100001056706994/picture?type=large", "display_name": "Alexey", "link": "https://stackoverflow.com/users/3375151/alexey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3523, "favorite_count": 0, "accepted_answer_id": 55845836, "answer_count": 3, "score": 3, "last_activity_date": 1556188352, "creation_date": 1556140402, "last_edit_date": 1556180906, "question_id": 55838641, "link": "https://stackoverflow.com/questions/55838641/how-to-create-map-with-generics-in-kotlin", "title": "How to create map with generics in Kotlin?", "body": "<p>I need to create a Map where keys are classes, and values are objects of appropriate classes.</p>\n\n<p>Like:</p>\n\n<pre><code>mapOf&lt;KClass&lt;T&gt;, T&gt;(\n    Int::class to 10,\n    String::class to \"Ten\"\n)\n</code></pre>\n\n<p>I want to use generics to avoid 'invalid' entries, like <code>Int::class to \"Ten\"</code></p>\n\n<p>How can I implement it?</p>\n"}, {"tags": ["kotlin", "type-conversion"], "comments": [{"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 2, "creation_date": 1556140410, "post_id": 55838532, "comment_id": 98341251, "body": "<i>Clearly this is not correct</i>! <code>toInt()</code> does what it is designed to do: <i>&quot;The resulting <code>Int</code> value is represented by the least significant 32 bits of this <code>Long</code> value&quot;</i> and does not throw an exception but you can write an extension function which will do that."}], "answers": [{"tags": [], "owner": {"reputation": 11342, "user_id": 4616087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kEud.png?s=128&g=1", "display_name": "Marvin", "link": "https://stackoverflow.com/users/4616087/marvin"}, "is_accepted": false, "score": 2, "last_activity_date": 1556140470, "creation_date": 1556140470, "answer_id": 55838650, "question_id": 55838532, "link": "https://stackoverflow.com/questions/55838532/kotlin-type-conversion-with-overflow-exceptions/55838650#55838650", "title": "Kotlin - Type conversion with overflow exceptions", "body": "<p>If you are running on the JVM you may use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#toIntExact-long-\" rel=\"nofollow noreferrer\"><code>Math.toIntExact</code></a>:</p>\n\n<blockquote>\n  <p>Returns the value of the long argument; throwing an exception if the value overflows an int.</p>\n</blockquote>\n\n<p>There doesn't seem to be a pure Kotlin way, but at least you can nicely wrap it:</p>\n\n<pre><code>fun Long.toIntExact() = Math.toIntExact(this)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 10584305, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oFZJt5hSqXw/AAAAAAAAAAI/AAAAAAAAAAc/0QcVoPFA98I/photo.jpg?sz=128", "display_name": "Viktor Penelski", "link": "https://stackoverflow.com/users/10584305/viktor-penelski"}, "is_accepted": true, "score": 5, "last_activity_date": 1556141143, "creation_date": 1556141143, "answer_id": 55838789, "question_id": 55838532, "link": "https://stackoverflow.com/questions/55838532/kotlin-type-conversion-with-overflow-exceptions/55838789#55838789", "title": "Kotlin - Type conversion with overflow exceptions", "body": "<p>TL;DR you can make a custom extension function that checks if the value is between Int.MIN_VALUE and Int.MAX_VALUE</p>\n\n<pre><code>fun Long.toIntThrowing() : Int {\n    if (this &lt; Int.MIN_VALUE || this &gt; Int.MAX_VALUE) {\n        throw RuntimeException()\n    }\n\n    return this.toInt()\n}\n</code></pre>\n\n<p>The \"weird\" behavior you are observing is happening, because in Kotlin, Long is represented as a 64 bit signed integer, while Int is represented as a 32 bit signed integer.</p>\n\n<p>While 123L is easily representable by a 32 bit integer, Long.MAX_VALUE will overflow the Integer (almost) twice, resulting in the behavior you are observing.</p>\n\n<p>I believe the example below will illustrate it better:</p>\n\n<pre><code>    println((2147483647L).toInt()) // the max 32 bit signed int\n    println((2147483648L).toInt()) // 1 more overflows it to the min (negative) 32 bit signed int\n    println((2147483649L).toInt()) // 2 more...\n    println((Long.MAX_VALUE - 1).toInt())\n    println((Long.MAX_VALUE).toInt())\n</code></pre>\n\n<p>results in :</p>\n\n<pre><code>2147483647\n-2147483648\n-2147483647\n-2\n-1\n</code></pre>\n\n<p>From: <a href=\"https://discuss.kotlinlang.org/t/checked-and-unsigned-integer-operations/529/2\" rel=\"noreferrer\">https://discuss.kotlinlang.org/t/checked-and-unsigned-integer-operations/529/2</a></p>\n\n<blockquote>\n  <p>Exceptions on arithmetic overflow: this will likely make arithmetics significantly slower, and we don\u2019t see how to avoid it without changes to the JVM, nor are we ready to accept the slowdown</p>\n</blockquote>\n"}], "owner": {"reputation": 32231, "user_id": 1033686, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KsvGz.jpg?s=128&g=1", "display_name": "Matthew Layton", "link": "https://stackoverflow.com/users/1033686/matthew-layton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "accepted_answer_id": 55838789, "answer_count": 2, "score": 1, "last_activity_date": 1556141143, "creation_date": 1556139921, "question_id": 55838532, "link": "https://stackoverflow.com/questions/55838532/kotlin-type-conversion-with-overflow-exceptions", "title": "Kotlin - Type conversion with overflow exceptions", "body": "<p><code>(123L).toInt()</code> produces <code>123</code> but <code>Long.MAX_VALUE.toInt()</code> produces <code>-1</code>. Clearly this is not correct. Without having to write a lot of boilerplate code, is there a way to get Kotlin to throw an exception when a value is out of range/bounds for the target type?</p>\n"}, {"tags": ["android", "android-layout", "kotlin", "fragment"], "comments": [{"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1556139804, "post_id": 55838291, "comment_id": 98341013, "body": "<code>FragmentTransaction</code>s deal only with <code>Fragment</code>s&#39; <code>View</code>s. They will not remove, replace, or otherwise hide any <code>View</code>s that do not belong to a <code>Fragment</code>. Your <code>onMovieClicked()</code> method is just sticking a <code>MovieDetailsFragment</code> on top of everything in the <code>main_container</code> <code>CoordinatorLayout</code>."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 11251496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b15eb15f1d65041152b744dfed48a81?s=128&d=identicon&r=PG&f=1", "display_name": "piedra97", "link": "https://stackoverflow.com/users/11251496/piedra97"}, "edited": false, "score": 0, "creation_date": 1556147193, "post_id": 55838950, "comment_id": 98343103, "body": "I&#39;m sorry but now if I press the back button the viewpager is not displayed cause it&#39;s visibility is gone so how can i manage this situation?."}, {"owner": {"reputation": 713, "user_id": 10214713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rStee.jpg?s=128&g=1", "display_name": "Alireza Bideli", "link": "https://stackoverflow.com/users/10214713/alireza-bideli"}, "reply_to_user": {"reputation": 37, "user_id": 11251496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b15eb15f1d65041152b744dfed48a81?s=128&d=identicon&r=PG&f=1", "display_name": "piedra97", "link": "https://stackoverflow.com/users/11251496/piedra97"}, "edited": false, "score": 0, "creation_date": 1556160452, "post_id": 55838950, "comment_id": 98345372, "body": "Use this condition in Your Activity onBackPressed method <code>if(getSupportFragmentManager.findFragmentById(R.id.main_cont&zwnj;&#8203;ainer)!=null)</code> and then show your tablayout and viewpager  this check weather your fragments have shown or not"}, {"owner": {"reputation": 713, "user_id": 10214713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rStee.jpg?s=128&g=1", "display_name": "Alireza Bideli", "link": "https://stackoverflow.com/users/10214713/alireza-bideli"}, "reply_to_user": {"reputation": 37, "user_id": 11251496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b15eb15f1d65041152b744dfed48a81?s=128&d=identicon&r=PG&f=1", "display_name": "piedra97", "link": "https://stackoverflow.com/users/11251496/piedra97"}, "edited": false, "score": 0, "creation_date": 1556161986, "post_id": 55838950, "comment_id": 98345669, "body": "Also you can use second way"}], "tags": [], "owner": {"reputation": 713, "user_id": 10214713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rStee.jpg?s=128&g=1", "display_name": "Alireza Bideli", "link": "https://stackoverflow.com/users/10214713/alireza-bideli"}, "is_accepted": false, "score": 0, "last_activity_date": 1556142413, "last_edit_date": 1556142413, "creation_date": 1556141950, "answer_id": 55838950, "question_id": 55838291, "link": "https://stackoverflow.com/questions/55838291/how-to-handle-overlapping-fragments-in-tablayout-in-android/55838950#55838950", "title": "How to handle overlapping Fragments in TabLayout in android?", "body": "<p>You can solve your problem in <strong>2 ways</strong></p>\n\n<p><strong>first:</strong>\nYou can <strong>hide</strong> your ViewPager and TabLayout befor inflating Your fragments.\nso change your MovieClicked method like below</p>\n\n<pre><code>override fun onMovieClicked(iDMovie: Int) {\n\n   viewPager.visibiliy=View.Gone;\n   tabLayout.visibility=View.Gone\n    val movieDetails = MovieDetailsFragment.newInstance(iDMovie)\n    supportFragmentManager.\n       beginTransaction().\n       replace(R.id.main_container, movieDetails).\n       addToBackStack(null).\n       commit()\n}\n</code></pre>\n\n<p><strong>Seconde:</strong>\nYou can change your fragments XML <strong>Root elements</strong>\n 1-set a background for each of you fragments <code>android:background=\"yourColor\"</code> to hide\n behind layout .\n 2-set OnClick attribute to true to make app receive your current layout \n onClickListeners not behind layout  with <code>android:onClick=true</code></p>\n\n<p>Your Xml must be like below</p>\n\n<pre><code>&lt;android.support.design.widget.CoordinatorLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:onClick=\"true\"\n    android:background=\"#ffffff\"&lt;!--White Color for example--&gt;\n&gt;\n\n\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p>If you have <strong>several fragment layout</strong> that has your problem\nYou can set an style and change your fragment style to your style\nSo declare an style in <code>style.xml</code></p>\n\n<pre><code>&lt;style name=\"fragmentsRootElementStyle\"&gt;\n    &lt;item name=\"android:onClick\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:background\"&gt;#ffffff&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>and set <strong>style</strong> for fragment layouts root as below</p>\n\n<pre><code>    &lt;android.support.design.widget.CoordinatorLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        style=\"@style/fragmentsRootElementsStyle\"\n    &gt;\n\n    &lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 11251496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b15eb15f1d65041152b744dfed48a81?s=128&d=identicon&r=PG&f=1", "display_name": "piedra97", "link": "https://stackoverflow.com/users/11251496/piedra97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569426047, "creation_date": 1556138679, "last_edit_date": 1569426047, "question_id": 55838291, "link": "https://stackoverflow.com/questions/55838291/how-to-handle-overlapping-fragments-in-tablayout-in-android", "title": "How to handle overlapping Fragments in TabLayout in android?", "body": "<p>I have a TabLayout with two fragments which  both of them shows a RecyclerView (one movies and the other tv shows). The TabLayout works perfectly but the problem comes when I click on the image of a film. The click in a movie should make a transaction to the movie details fragment. But when this happens the ListFragment with the TabLayout appears under the new one so the two of them are displayed.</p>\n\n<p>My ActivityMain code where I call the transaction and where I set the Page Adapter:</p>\n\n<pre><code>override fun onMovieClicked(iDMovie: Int) {\n\n        val movieDetails = MovieDetailsFragment.newInstance(iDMovie)\n        supportFragmentManager.\n           beginTransaction().\n           replace(R.id.main_container, movieDetails).\n           addToBackStack(null).\n           commit()\n    }\n\nprivate fun setStatePageAdapter() {\n\n        val fragmentAdapter = MyPagerAdapter(supportFragmentManager)\n        viewPager.adapter = fragmentAdapter\n\n        tabLayout.setupWithViewPager(viewPager)\n\n    }\n</code></pre>\n\n<p>My PageAdapterClass:</p>\n\n<pre><code>class MyPagerAdapter(fm: FragmentManager): FragmentPagerAdapter(fm) {\n\n   override fun getItem(position: Int): Fragment {\n        return when (position) {\n            0 -&gt; {\n                ListFilmFragment()\n            }\n            else -&gt; {\n                return TVShowsFragmentList()\n            }\n        }\n    }\n\n    override fun getCount(): Int {\n        return 2\n    }\n\n    override fun getPageTitle(position: Int): CharSequence {\n        return when (position) {\n            0 -&gt; \"Pel\u00edculas\"\n            else -&gt; {\n                return \"Series\"\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And the Layouts:\nActivity Main:</p>\n\n<pre><code>&lt;android.support.design.widget.CoordinatorLayout\n    android:id=\"@+id/main_container\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n\n&lt;android.support.design.widget.TabLayout\n        android:id=\"@+id/tabLayout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:minHeight=\"?actionBarSize\"\n        app:tabGravity=\"fill\"\n        app:tabIndicatorHeight=\"4dp\"\n        app:tabBackground=\"@color/black\"\n        app:tabMode=\"fixed\"\n        app:tabTextColor=\"@color/white\"\n        app:layout_scrollFlags=\"scroll|enterAlways\"&gt;\n&lt;/android.support.design.widget.TabLayout&gt;\n\n&lt;android.support.v4.view.ViewPager\n        android:id=\"@+id/viewPager\"\n        android:layout_height=\"match_parent\"\n        android:layout_width=\"match_parent\"&gt;\n\n&lt;/android.support.v4.view.ViewPager&gt;\n</code></pre>\n\n<p></p>\n\n<p>Observation: With FrameLayout instead of Coordinator didn't work either.</p>\n\n<p>The result I get is the following:\nThe FragmentDetails overlaps the filmListFragment and the two of them are displayed at the same time. But only the details fragments has to be displayed.</p>\n"}, {"tags": ["android", "kotlin", "navigation"], "comments": [{"owner": {"reputation": 1795, "user_id": 7160898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LGfPx.jpg?s=128&g=1", "display_name": "Jimale Abdi", "link": "https://stackoverflow.com/users/7160898/jimale-abdi"}, "edited": false, "score": 0, "creation_date": 1556148609, "post_id": 55837541, "comment_id": 98343362, "body": "What you mean in Next Button"}, {"owner": {"reputation": 1, "user_id": 11332238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Nfg-ykz4Hs/AAAAAAAAAAI/AAAAAAAAABs/VRePxVjp4D0/photo.jpg?sz=128", "display_name": "Luis Alberto Garcia Urrutia De", "link": "https://stackoverflow.com/users/11332238/luis-alberto-garcia-urrutia-de"}, "reply_to_user": {"reputation": 1795, "user_id": 7160898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LGfPx.jpg?s=128&g=1", "display_name": "Jimale Abdi", "link": "https://stackoverflow.com/users/7160898/jimale-abdi"}, "edited": false, "score": 0, "creation_date": 1556159912, "post_id": 55837541, "comment_id": 98345279, "body": "@JimaleAbdi a butto to pass to a  third activity"}], "answers": [{"comments": [{"owner": {"reputation": 1795, "user_id": 7160898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LGfPx.jpg?s=128&g=1", "display_name": "Jimale Abdi", "link": "https://stackoverflow.com/users/7160898/jimale-abdi"}, "reply_to_user": {"reputation": 1, "user_id": 11332238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Nfg-ykz4Hs/AAAAAAAAAAI/AAAAAAAAABs/VRePxVjp4D0/photo.jpg?sz=128", "display_name": "Luis Alberto Garcia Urrutia De", "link": "https://stackoverflow.com/users/11332238/luis-alberto-garcia-urrutia-de"}, "edited": false, "score": 0, "creation_date": 1556270927, "post_id": 55845326, "comment_id": 98389418, "body": "If its works for you please up vote my answer also accept it, to help the others"}], "tags": [], "owner": {"reputation": 1795, "user_id": 7160898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LGfPx.jpg?s=128&g=1", "display_name": "Jimale Abdi", "link": "https://stackoverflow.com/users/7160898/jimale-abdi"}, "is_accepted": false, "score": 0, "last_activity_date": 1556182249, "creation_date": 1556182249, "answer_id": 55845326, "question_id": 55837541, "link": "https://stackoverflow.com/questions/55837541/implement-next-button-on-actionbar-kotlin/55845326#55845326", "title": "implement next button on ActionBar Kotlin", "body": "<p>Normally there is no next button but this is makes something like next button, as i understand your question you need to intent new activity in action bar</p>\n\n<p>Step 1 create XML resource in res/menu</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu xmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n&lt;item\n    android:id=\"@+id/nxtbutton\"\n    android:icon=\"@drawable/ic_action_edit\"\n    app:showAsAction=\"ifRoom\"\n    android:title=\"nxtbtn\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>Then you need to override <code>onCreateOptionsMenu</code> function in your <code>Activity</code> like this:</p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu): Boolean {\nmenuInflater.inflate(R.menu.menuTest, menu)\nreturn true\n\n}\n</code></pre>\n\n<p>Handling click events</p>\n\n<pre><code>override fun onOptionsItemSelected(item: MenuItem): Boolean = when (item.itemId) {\nR.id.nxtbutton -&gt; {\n     val intent = Intent(context, nextActivity::class.java);\n      startActivity(intent);\n\n      true\n     }\n     else -&gt; super.onOptionsItemSelected(item)\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11332238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Nfg-ykz4Hs/AAAAAAAAAAI/AAAAAAAAABs/VRePxVjp4D0/photo.jpg?sz=128", "display_name": "Luis Alberto Garcia Urrutia De", "link": "https://stackoverflow.com/users/11332238/luis-alberto-garcia-urrutia-de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556182249, "creation_date": 1556135311, "last_edit_date": 1556148459, "question_id": 55837541, "link": "https://stackoverflow.com/questions/55837541/implement-next-button-on-actionbar-kotlin", "title": "implement next button on ActionBar Kotlin", "body": "<p>How can I implement a \"next\" button on the actionbar in my App?</p>\n\n<p>I have already implemented a back button in the bar.</p>\n\n<pre><code>val actionbar = supportActionBar\nactionbar?.setDisplayHomeAsUpEnabled(true)\n</code></pre>\n\n<p><img src=\"https://i.imgur.com/yMqJZ9I.jpg\" alt=\"\"></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 1, "creation_date": 1556141195, "post_id": 55837473, "comment_id": 98341495, "body": "what about something like var myHandler: MyHandler = {a,b -&gt; ....}"}], "answers": [{"tags": [], "owner": {"reputation": 451, "user_id": 5390707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMri2.jpg?s=128&g=1", "display_name": "theThapa", "link": "https://stackoverflow.com/users/5390707/thethapa"}, "is_accepted": true, "score": 1, "last_activity_date": 1556138699, "creation_date": 1556138699, "answer_id": 55838293, "question_id": 55837473, "link": "https://stackoverflow.com/questions/55837473/how-to-use-typealias-of-function-type/55838293#55838293", "title": "How to use typealias of function type?", "body": "<p>You are trying to instantiate a typealias and are getting <code>interface doesn't have a constructor</code> error. To my understanding, typealias with function types work with three steps:</p>\n\n<ol>\n<li><p>Define the typealias itself</p>\n\n<pre><code>typealias MyHandler = (Int, String) -&gt; Unit\n</code></pre></li>\n<li><p>declare an action of that type</p>\n\n<pre><code>val myHandler: MyHandler = {intValue, stringValue -&gt; \n // do something\n}\n</code></pre></li>\n<li><p>use that action, e.g.</p>\n\n<pre><code>class Foo(val action: MyHandler) {\n\n  val stateOne: Boolean = false\n\n  // ...\n\n  fun bar() {\n\n    if (stateOne) {\n      action.invoke(1, \"One\")\n    } else {\n      action.invoke(0, \"notOne\")\n    }\n  }\n}\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "is_accepted": false, "score": 0, "last_activity_date": 1556172011, "creation_date": 1556172011, "answer_id": 55842709, "question_id": 55837473, "link": "https://stackoverflow.com/questions/55837473/how-to-use-typealias-of-function-type/55842709#55842709", "title": "How to use typealias of function type?", "body": "<p><code>typealias</code> are just an alias for the type :) in other words, it's just another name for the type. </p>\n\n<p>Imagine having to write all the time <code>(Int, String) -&gt; Unit</code>. With <code>typealias</code> you can define something like you did to help out and write less,i.e. instead of:</p>\n\n<pre><code>fun Foo(handler: (Int, String) -&gt; Unit)\n</code></pre>\n\n<p>You can write:</p>\n\n<pre><code>fun Foo(handler: MyHandler)\n</code></pre>\n\n<p>They also help giving hints, meaning they can give you a way to describe types in a more contextualized way. Imagine implementing an app where in it's entire domain time is represented as an <code>Int</code>. One approach we could follow is defining:</p>\n\n<pre><code>typealias Time = Int\n</code></pre>\n\n<p>From there on, every time you want to code something specifically with time, instead of using <code>Int</code> you can provide more context to others by using <code>Time</code>. This is not a new type, it's just another name for an <code>Int</code>, so therefore everything that works with integers works with it too.</p>\n\n<p>There's more if you want to have a <a href=\"https://kotlinlang.org/docs/reference/type-aliases.html\" rel=\"nofollow noreferrer\">look</a></p>\n"}], "owner": {"reputation": 79, "user_id": 1639348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e346d85ad7c743fd24f9b0c7002de9f5?s=128&d=identicon&r=PG", "display_name": "user1639348", "link": "https://stackoverflow.com/users/1639348/user1639348"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 55838293, "answer_count": 2, "score": 0, "last_activity_date": 1556172011, "creation_date": 1556135016, "last_edit_date": 1556135320, "question_id": 55837473, "link": "https://stackoverflow.com/questions/55837473/how-to-use-typealias-of-function-type", "title": "How to use typealias of function type?", "body": "<p>how can I use this typalias?</p>\n\n<pre><code>typealias MyHandler = (Int, String) -&gt; Unit\n</code></pre>\n\n<p>I tried this but it doesn't work:</p>\n\n<pre><code>var myHandler = MyHandler(1, \"2\")\n</code></pre>\n"}, {"tags": ["android", "generics", "kotlin", "gson", "json-deserialization"], "answers": [{"tags": [], "owner": {"reputation": 2246, "user_id": 1195473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjmQQ.png?s=128&g=1", "display_name": "svguerin3", "link": "https://stackoverflow.com/users/1195473/svguerin3"}, "is_accepted": true, "score": 1, "last_activity_date": 1557410085, "last_edit_date": 1557410085, "creation_date": 1557258498, "answer_id": 56029547, "question_id": 55837043, "link": "https://stackoverflow.com/questions/55837043/android-kotlin-generics-in-gson-jsondeserializer-to-handle-array-vs-obj/56029547#56029547", "title": "Android Kotlin - Generics in GSON JsonDeserializer to handle Array vs Obj", "body": "<p>In order to fix this, I had to just make multiple Adapters for each type of Object that can be an array or an object.  It's unfortunate, since I had about 50 different types of those objects, so it's a lot of repeat code with calling \"registerTypeAdapters\" in the GsonBuilder.</p>\n\n<p>To simplify a bit, I made a generic method to return an array based on a given JsonElement and generic T object:</p>\n\n<pre><code>fun &lt;T&gt; getJSONArray(json: JsonElement, type: Type, ctx: \nJsonDeserializationContext): ArrayList&lt;T&gt; {\n    val list = ArrayList&lt;T&gt;()\n    if (json.isJsonArray) {\n        for (e in json.asJsonArray) {\n            list.add(ctx.deserialize&lt;Any&gt;(e, type) as T)\n        }\n    } else if (json.isJsonObject) {\n        list.add(ctx.deserialize&lt;Any&gt;(json, type) as T)\n    } else {\n        throw RuntimeException(\"Unexpected JSON type: \" + json.javaClass)\n    }\n    return list\n}\n</code></pre>\n\n<p>And an example of a definition of an Adapter utilizing the above method:</p>\n\n<pre><code>class JsonArrayObjectAdapterExampleDataClass: JsonDeserializer&lt;ArrayList&lt;ExampleDataClass&gt;&gt; {\n    override fun deserialize(json: JsonElement, typeOfT: Type, ctx: JsonDeserializationContext): ArrayList&lt;ExampleDataClass&gt; {\n        return getJSONArray(json, ExampleDataClass::class.java, ctx)\n    }\n}\n</code></pre>\n\n<p>It does not work to simply pass the <code>typeOfT</code> var to the <code>getJSONArray</code> method, as I had to explicitly send the specific type instead.</p>\n"}], "owner": {"reputation": 2246, "user_id": 1195473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjmQQ.png?s=128&g=1", "display_name": "svguerin3", "link": "https://stackoverflow.com/users/1195473/svguerin3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 56029547, "answer_count": 1, "score": 0, "last_activity_date": 1557410085, "creation_date": 1556133079, "last_edit_date": 1556244571, "question_id": 55837043, "link": "https://stackoverflow.com/questions/55837043/android-kotlin-generics-in-gson-jsondeserializer-to-handle-array-vs-obj", "title": "Android Kotlin - Generics in GSON JsonDeserializer to handle Array vs Obj", "body": "<p>I am needing our GSON parser to be able to handle an array vs single objects.  I've got it working to where it recognizes any MutableList and falls into the Deserializer adapter below.  However, I'm missing a piece where it's not liking the \"T\" type when actually doing the serialization into an object.  I understand that it needs the type at this point, but is there something I'm missing to be able to infer this given what we have here?</p>\n\n<pre><code>class JsonArrayObjectAdapter&lt;T&gt;: JsonDeserializer&lt;MutableList&lt;T&gt;&gt; {\n    override fun deserialize(json: JsonElement?, typeOfT: Type?, context: JsonDeserializationContext?): MutableList&lt;T&gt; {\n        val list = mutableListOf&lt;T&gt;()\n        json?.let {\n            context?.let {\n                if (json.isJsonArray) {\n                    for (element in json.asJsonArray) {\n                        val obj: T = context.deserialize(element, T::class.java) // does not like this\n                        list.add(obj)\n                    }\n                } else if (json.isJsonObject) {\n                    val obj: T = context.deserialize(json, T!!::class.java) // does not like this\n                    list.add(obj)\n                }\n            }\n        }\n        return list\n    }\n}\n</code></pre>\n\n<p>I get this compile error when trying to use <code>T::class.java</code> :</p>\n\n<pre><code>Cannot use 'T' as reified type parameter. Use a class instead.\n</code></pre>\n\n<p>Here's an example of a data class I'm using, for reference:</p>\n\n<pre><code>data class ExampleDataClass(\n    @SerializedName(\"ExampleKey\") val exampleVar: MutableList&lt;ExampleSubDataClass&gt;\n)\n</code></pre>\n\n<p>And here is how I do the gson creation:</p>\n\n<pre><code>val listType = object : TypeToken&lt;MutableList&lt;ExampleDataSubClass&gt;&gt;() {}.getType()\nval gson = GsonBuilder()\n        .registerTypeAdapter(listType, JsonArrayObjectAdapter&lt;ExampleDataSubClass&gt;())\n        .create()\nresult = gson.fromJson(jsonString, ExampleDataClass::class.java)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "beacon", "altbeacon", "indoor-positioning-system"], "comments": [{"owner": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1556130485, "post_id": 55836035, "comment_id": 98337122, "body": "This is not normal.  The value of RSSI is measured in dBm.  You typically see it drop from about -59 dBM at one meter to about -69 dBM at two meters, then to around -90 dBM at 25 meters.  What specific values do you see?  What Android device is this?  Do you have other Android devices to try?"}, {"owner": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "reply_to_user": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1556287033, "post_id": 55836035, "comment_id": 98398384, "body": "@davidgyoung Okay, so I changed the Android device and it worked. Now I get different values - thanks. But, I guess that&#39;s okay if I get from one beacon approx. distastance 20m and then it drops to 10m and repeats (in reality, it&#39;s around 5m away, haha)."}], "answers": [{"tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 0, "last_activity_date": 1556130095, "creation_date": 1556130095, "answer_id": 55836351, "question_id": 55836035, "link": "https://stackoverflow.com/questions/55836035/detected-beacons-have-same-rssi/55836351#55836351", "title": "Detected beacons have same RSSI", "body": "<p>Compare <code>dBm</code>, which is an absolute value - while <code>RSSI</code> is just a relative index.</p>\n"}], "owner": {"reputation": 1390, "user_id": 8358447, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/42517ecf0b59e26c5e2b4cd1f6a7e0f0?s=128&d=identicon&r=PG&f=1", "display_name": "MaartinAndroid", "link": "https://stackoverflow.com/users/8358447/maartinandroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556130095, "creation_date": 1556128891, "question_id": 55836035, "link": "https://stackoverflow.com/questions/55836035/detected-beacons-have-same-rssi", "title": "Detected beacons have same RSSI", "body": "<p>I'm using <code>AltBeacon</code> library to detect my beacons. They are place in rooms corners around 3-4m away from each other. What is pretty weird, is that they all return same RSSI value +/- 1. I wanted to do home experiments to understand how far am I from each beacon to detect my current position, but I didn't not thought that beacons will return same RSSI. How to get best accuracy in such a small room and is it normal for beacons to return same RSSI (I thought it should vary heavily).</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 0, "creation_date": 1556129433, "post_id": 55835971, "comment_id": 98336647, "body": "It looks like you&#39;re not including the code that is actually causing the issue. The crash indicates an error in an onItemSelected() callback method."}, {"owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "reply_to_user": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 0, "creation_date": 1556129803, "post_id": 55835971, "comment_id": 98336813, "body": "Yes, of course, it is that I use the variable <b>temario</b> to condition certain data and show the related content"}, {"owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 1, "creation_date": 1556130535, "post_id": 55835971, "comment_id": 98337142, "body": "Where are you setting the item selected listener? From the exception it appears that the <code>view</code> parameter is null."}, {"owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "reply_to_user": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "edited": false, "score": 0, "creation_date": 1556130917, "post_id": 55835971, "comment_id": 98337347, "body": "inside of the <code>override fun onCreate(savedInstanceState: Bundle?){ &#47;&#47;here}</code> of <b>NormalStudentActivity</b>"}, {"owner": {"reputation": 451, "user_id": 5390707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMri2.jpg?s=128&g=1", "display_name": "theThapa", "link": "https://stackoverflow.com/users/5390707/thethapa"}, "edited": false, "score": 0, "creation_date": 1556131034, "post_id": 55835971, "comment_id": 98337396, "body": "The error is that the <code>view</code> parameter on the <code>onItemSelected(..)</code> shouldn&#39;t be <code>null</code>."}, {"owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "edited": false, "score": 0, "creation_date": 1556131212, "post_id": 55835971, "comment_id": 98337455, "body": "Could you please explain? Excuse me, I do not understand the situation so much."}, {"owner": {"reputation": 451, "user_id": 5390707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMri2.jpg?s=128&g=1", "display_name": "theThapa", "link": "https://stackoverflow.com/users/5390707/thethapa"}, "edited": false, "score": 0, "creation_date": 1556136015, "post_id": 55835971, "comment_id": 98339466, "body": "Can you please post your Spinner&#39;s selection listener? And also the code where you are creating and assigning the listener."}, {"owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "edited": false, "score": 0, "creation_date": 1556136865, "post_id": 55835971, "comment_id": 98339795, "body": "I have added data that are very important in the error, excuse my ignorance, now if"}], "owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556136788, "creation_date": 1556128654, "last_edit_date": 1556136788, "question_id": 55835971, "link": "https://stackoverflow.com/questions/55835971/how-to-recover-content-from-a-variable-when-the-activity-changes-state", "title": "How to recover content from a variable when the activity changes state?", "body": "<p>I have two activities</p>\n\n<ul>\n<li>MainActivity</li>\n<li>NormalStudentActivity</li>\n</ul>\n\n<p>Since the <strong>MainActivity</strong> shares a data towards the other activity <strong>NormalStudentActivity</strong></p>\n\n<p><strong>MainActivity.kt</strong></p>\n\n<pre><code>val intent = Intent(this, NormalStudentActivity::class.java)\nintent.putExtra(\"tipo\", \"normal\")\nstartActivity(intent)\n</code></pre>\n\n<p>Now within NormalStudentActivity I create a general variable\n<code>lateinit var temario:String</code></p>\n\n<pre><code>class NormalStudentActivity : AppCompatActivity() {\n\n  lateinit var temario:String\n\n  override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_normal_student)\n\n        val data = intent.extras\n        tem = data.get(\"tipo\").toString()\n\n        if (tem !=null){\n            temario = tem\n             // add data to spinner ------------&gt;\n             //======================================\n            val spnnormal = ArrayAdapter.createFromResource(this,R.array.DistNormal,\n                    android.R.layout.simple_spinner_item)\n                spnnormal.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n            spnnTipo.adapter = spnnormal\n            //=====================================\n        }\n  }\n\n      override fun onSaveInstanceState(outState: Bundle?) {\n        super.onSaveInstanceState(outState)\n        outState?.putString(\"temas\",tem)\n    }\n\n    override fun onRestoreInstanceState(savedInstanceState: Bundle?) {\n        super.onRestoreInstanceState(savedInstanceState)\n\n        val str = savedInstanceState?.getString(\"temas\")\n        temario = str.toString()\n        Toast.makeText(this, \"variable restored --&gt; $temario\",Toast.LENGTH_LONG).show()\n\n    }\n}\n</code></pre>\n\n<p>But it generates an error and that is when I rotate the screen of the device I get an error.</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.mrl.fred.alumn, PID: 31186\n    java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter view\n        at com.mrl.fred.alumn.NormalStudentActivity$onCreate$1.onItemSelected(NormalStudentActivity.kt)\n</code></pre>\n\n<hr>\n\n<p>The problem is that the variable <strong>temario</strong>, generates a <strong>null value</strong> and I use this same to condition in other events as in a <strong>spinner onItemSelected</strong></p>\n\n<hr>\n\n<pre><code>\n            override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View, position: Int, id: Long) {\n                when(position){\n                    1 -&gt;{\n                        //hight\n                        textView34.text = \"Long\"\n                        txtUnico.text = \"\"\n                        if (temario == \"student\"){\n                            editText2.hint = \"Insert Weight\"\n                        }\n                    }\n                    2 -&gt;{\n                        // number student\n                        textView34.text = \"\"\n                        txtUnico.text = \"\"\n                        if (temario == \"student\"){\n                            editText2.hint = \"Insert number\"\n                        }\n                    }\n                }\n            }\n</code></pre>\n\n<blockquote>\n  <p>Action in Spinner </p>\n</blockquote>\n\n<hr>\n\n<pre><code>    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_normal_student)\n\n        spnnTipo.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {\n            override fun onNothingSelected(p0: AdapterView&lt;*&gt;?) {\n            }\n            override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View, position: Int, id: Long) {\n                when(position){\n                    1 -&gt;{\n                        //data\n                        textView34.text = \"Density weight\"\n                        txtUnico.text = \"\"\n                        if (temario == \"student\"){\n                            editText2.hint = \"Insert data\"\n                        }\n                    }\n                    2 -&gt;{\n                        // Student angry\n                        textView34.text = \"\"\n                        txtUnico.text = \"\"\n                        if (temario == \"student\"){\n                            editText2.hint = \"Insert value\"\n                        }\n                    }\n                }\n            }\n        }\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 451, "user_id": 5390707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMri2.jpg?s=128&g=1", "display_name": "theThapa", "link": "https://stackoverflow.com/users/5390707/thethapa"}, "is_accepted": false, "score": 0, "last_activity_date": 1556304943, "last_edit_date": 1556304943, "creation_date": 1556141451, "answer_id": 55838858, "question_id": 55835351, "link": "https://stackoverflow.com/questions/55835351/itemtouchhelper-throws-indexoutofboundexception-while-trying-to-swap-items/55838858#55838858", "title": "ItemTouchHelper throws IndexOutOfBoundException while trying to swap items", "body": "<p>@Ludovico Brocca You are running into <code>IndexOutOfBoundException</code> because you are not calling <code>notifyDataSetChanged()</code> after you add new item to the adapter.</p>\n\n<p>So, initialize your adapter with just context then have the items as setter.\nExample below for reference:</p>\n\n<pre><code>class BlockViewAdapter(val context: Context) : RecyclerView.Adapter&lt;BlockViewHolder&gt;() {\n\n    var dataset: List&lt;String&gt; = emptyList()\n      set(value) {\n        // might have to do this on main thread\n        field = value\n        notifyDataSetChanged()\n      }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BlockViewHolder {\n      TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    override fun onBindViewHolder(holder: BlockViewHolder, position: Int) {\n      TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    override fun getItemCount(): Int {\n      TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n  }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11406595, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CfXY7zw5YoA/AAAAAAAAAAI/AAAAAAAAACE/TEu44B4erTU/photo.jpg?sz=128", "display_name": "Ludovico Brocca", "link": "https://stackoverflow.com/users/11406595/ludovico-brocca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556304943, "creation_date": 1556126069, "question_id": 55835351, "link": "https://stackoverflow.com/questions/55835351/itemtouchhelper-throws-indexoutofboundexception-while-trying-to-swap-items", "title": "ItemTouchHelper throws IndexOutOfBoundException while trying to swap items", "body": "<p>I have a RecyclerView that adds items which should be dragged &amp; dropped, however, when an item gets added and i try to swap it an IndexOutOfBoundException get thrown</p>\n\n<p>The RecyclerView observes a ViewModel that refreshes information when some block gets added, i've used LiveData to achieve it.</p>\n\n<p>My solution works perfectly fine when the list has a set number of items, the problem arises when i try to add something to the RecyclerView.</p>\n\n<p>I've extended the ItemTouchHelper.SimpleCallBack with a class that contains\nthe adapter for the RecyclerView, but when items get added the size strangely doesn't change(i've tried to set it manually but it won't work).</p>\n\n<p>Iv've tried to detach the TouchHelper by calling</p>\n\n<p>touchHelper?.attachToRecyclerView(null) </p>\n\n<p>and then attaching it again with a new callback but it won't work either. </p>\n\n<p>this is the acitvity</p>\n\n<pre><code>\nclass CreateWorkflowActivity: AppCompatActivity(), View.OnClickListener {\n\n    var touchHelper:ItemTouchHelper?= null\n    private lateinit var callback:ItemMoveCallback\n    private lateinit var rec_view: RecyclerView\n    companion object {\n        private lateinit var viewModel : WorkflowViewModel\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_create_workflow)\n        val factory= InjectorUtils.provideWorkflowViewModelFactory(\"\")\n        viewModel = ViewModelProviders.of(this,factory).get(WorkflowViewModel::class.java)\n        rec_view= findViewById(R.id.recyclerView_addedBlocksOnCreation)\n        rec_view.layoutManager= LinearLayoutManager(this)\n        val observer = Observer&lt;ArrayList&lt;String&gt;&gt;{\n            val adapter = BlockViewAdapter(it!!, this@CreateWorkflowActivity)\n            callback= ItemMoveCallback(adapter,this@CreateWorkflowActivity,ItemTouchHelper.UP.or(ItemTouchHelper.DOWN),0)\n            touchHelper= ItemTouchHelper(callback)\n            touchHelper?.attachToRecyclerView(rec_view)\n            runOnUiThread{\n                rec_view.adapter= adapter\n            }\n        }\n        viewModel.getLiveBlockNames().observe(this,observer)\n\n\n    }\n\n//this gets called when the user has decided the parameters for the block\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n\n        if(requestCode == 1) {\n            if(resultCode==Activity.RESULT_OK) {\n\n               //all block additions\n\n                }\n\n            }\n\n        }\n\n    }\n\n}\n\n\n</code></pre>\n\n<p>this extends ItemTouchHelper.SimpleCallBack</p>\n\n<pre><code>\nclass ItemMoveCallback(adapter: BlockViewAdapter, context: Context, dragDirs: Int, swipeDirs: Int) : ItemTouchHelper.SimpleCallback(dragDirs, swipeDirs)\n{\n    var mAdapter = adapter\n\n\n    override fun onSwiped(p0: RecyclerView.ViewHolder, p1: Int) {\n        return\n    }\n\n    override fun onMove(p0: RecyclerView, viewHolder: RecyclerView.ViewHolder, target: RecyclerView.ViewHolder): Boolean {\n        mAdapter.swapItems(viewHolder.adapterPosition, target.adapterPosition)\n        return true\n    }\n    fun setAdapter(adapter: BlockViewAdapter){\n        mAdapter=adapter\n    }\n\n}\n\n</code></pre>\n\n<p>This is the adapter (i've omitted the BlockViewHolder because it's pretty standard)</p>\n\n<pre><code>class BlockViewAdapter(val dataset: ArrayList&lt;String&gt;,val context: Context): RecyclerView.Adapter&lt;BlockViewHolder&gt;(){\n\n    @SuppressLint(\"ClickableViewAccessibility\")\n    override fun onBindViewHolder(holder: BlockViewHolder, position: Int) {\n        holder.tView?.text = dataset[position]\n\n        }\n\n\n    override fun getItemCount(): Int {\n        return dataset.size\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): BlockViewHolder {\n\n        return BlockViewHolder(\n            LayoutInflater.from(context).inflate(\n                R.layout.block_item,\n                parent,\n                false\n            )\n        )\n\n    }\n\n    fun swapItems(fromPosition: Int, toPosition: Int) {\n\n        if (fromPosition &lt; toPosition) {\n            for (i in fromPosition..toPosition - 1) {\n                dataset.set(i, dataset.set(i+1, dataset.get(i)))\n            }\n        } else {\n            for (i in fromPosition..toPosition + 1) {\n                dataset.set(i, dataset.set(i-1, dataset.get(i)))\n            }\n        }\n\n        notifyItemMoved(fromPosition, toPosition)\n    }\n\n\n}\n\n</code></pre>\n"}, {"tags": ["android", "android-activity", "kotlin", "admob", "banner"], "comments": [{"owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 0, "creation_date": 1556124672, "post_id": 55834992, "comment_id": 98334513, "body": "Do you want to integrate google AdMob banner ads for all of your activities? That what you meant?"}, {"owner": {"reputation": 3, "user_id": 8085043, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4ezm8V6rIY/AAAAAAAAAAI/AAAAAAAABMI/GXR-uPBKU7Y/photo.jpg?sz=128", "display_name": "Siebert Mandebvu", "link": "https://stackoverflow.com/users/8085043/siebert-mandebvu"}, "reply_to_user": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 1, "creation_date": 1556128386, "post_id": 55834992, "comment_id": 98336209, "body": "Yes, that is exactly what I want to do."}, {"owner": {"reputation": 4479, "user_id": 563306, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4103cd1a8b61447cb4b9995c0020e0de?s=128&d=identicon&r=PG", "display_name": "dcanh121", "link": "https://stackoverflow.com/users/563306/dcanh121"}, "edited": false, "score": 0, "creation_date": 1556130223, "post_id": 55834992, "comment_id": 98337015, "body": "Can&#39;t you do the same way you did it for Mainactivity."}, {"owner": {"reputation": 3, "user_id": 8085043, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4ezm8V6rIY/AAAAAAAAAAI/AAAAAAAABMI/GXR-uPBKU7Y/photo.jpg?sz=128", "display_name": "Siebert Mandebvu", "link": "https://stackoverflow.com/users/8085043/siebert-mandebvu"}, "edited": false, "score": 0, "creation_date": 1556139031, "post_id": 55834992, "comment_id": 98340713, "body": "let me try again, it was giving this error:"}, {"owner": {"reputation": 3, "user_id": 8085043, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4ezm8V6rIY/AAAAAAAAAAI/AAAAAAAABMI/GXR-uPBKU7Y/photo.jpg?sz=128", "display_name": "Siebert Mandebvu", "link": "https://stackoverflow.com/users/8085043/siebert-mandebvu"}, "edited": false, "score": 0, "creation_date": 1556139595, "post_id": 55834992, "comment_id": 98340931, "body": "java.lang.RuntimeException: Unable to start activity ComponentInfo{com.poc.com.eas/com.poc.com.eas.Main2Activity}&zwnj;&#8203;: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void com.google.android.gms.ads.AdView.loadAd(com.google.android.&zwnj;&#8203;gms.ads.AdRequest)&#39; on a null object reference.                                                                       Thats the error Im getting after doing the same as Main Activity"}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 11334402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c72d18a084c745cb0c2de3accd1b06?s=128&d=identicon&r=PG&f=1", "display_name": "Kasiopeous", "link": "https://stackoverflow.com/users/11334402/kasiopeous"}, "is_accepted": true, "score": 0, "last_activity_date": 1556188607, "creation_date": 1556188607, "answer_id": 55847325, "question_id": 55834992, "link": "https://stackoverflow.com/questions/55834992/how-to-implement-admob-banner-on-multiple-activities/55847325#55847325", "title": "How to implement admob banner on multiple activities", "body": "<p>The reason you are getting the following error:</p>\n\n<pre><code>Java.lang.RuntimeException: Unable to start activity ComponentInfo{com.poc.com.eas/com.poc.com.eas.Main2Activity}: java.lang.NullPointerException: Attempt to invoke virtual method 'void com.google.android.gms.ads.AdView.loadAd(com.google.android.gms.ads.AdRequest)' on a null object reference.\n</code></pre>\n\n<p>Is because you are trying to call the <code>loadAd()</code> method on the same view you had in your past activity which is no longer active. So what you need to do is define an AdView for your banners on each of the activies and then when you start your Main2Activity you need to call <code>adView2.loadAd(AdRequest.Builder().build())</code></p>\n"}], "owner": {"reputation": 3, "user_id": 8085043, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4ezm8V6rIY/AAAAAAAAAAI/AAAAAAAABMI/GXR-uPBKU7Y/photo.jpg?sz=128", "display_name": "Siebert Mandebvu", "link": "https://stackoverflow.com/users/8085043/siebert-mandebvu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 1, "accepted_answer_id": 55847325, "answer_count": 1, "score": 0, "last_activity_date": 1556188607, "creation_date": 1556124546, "last_edit_date": 1556170945, "question_id": 55834992, "link": "https://stackoverflow.com/questions/55834992/how-to-implement-admob-banner-on-multiple-activities", "title": "How to implement admob banner on multiple activities", "body": "<p>I have an app with 2 activities, I used Kotlin. I managed to implement an admob banner with no issues on the main activity, now I want another banner on the second activity, how do I do that. I have searched everywhere but the solutions I get are for implementing the same banner on two activities, but what I want is for each activity to have its own banner. Please note that I am using kotlin not Java, and I have no java experience.</p>\n\n<p>My activity_main.xml looks like this</p>\n\n<pre><code> &lt;com.google.android.gms.ads.AdView\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/adView\"\n            android:background=\"@mipmap/ic_launcher_background\"\n            ads:adSize=\"BANNER\"\n            ads:adUnitId=\"ca-app-pub-3940256099942544/6300978111\"/&gt;\n</code></pre>\n\n<p>My MainActivity.kt looks like this</p>\n\n<pre><code>  super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    MobileAds.initialize(this, \"ca-app-pub-3940256099942544~3347511713\")\n    adView.loadAd(AdRequest.Builder().build())\n</code></pre>\n\n<p>When I do the same for the second activity and run the app, the first activity runs and show the ad, now when I move on to the next activity it crashes. how is it done exactly?</p>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 785, "user_id": 5571700, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/edfa10f7db9a89a516b196098f6a1409?s=128&d=identicon&r=PG&f=1", "display_name": "p.mathew13", "link": "https://stackoverflow.com/users/5571700/p-mathew13"}, "is_accepted": true, "score": 1, "last_activity_date": 1556124954, "creation_date": 1556124954, "answer_id": 55835083, "question_id": 55834843, "link": "https://stackoverflow.com/questions/55834843/how-can-i-retrieve-the-errorbody-sent-from-server-on-retrofit-error-handler/55835083#55835083", "title": "How can I retrieve the errorBody sent from server on retrofit error handler?", "body": "<p>You have to use string() rather than toString() to get the correct error message. So your code would look something like this:</p>\n\n<pre><code>fun postCliente(cliente: Cliente) {\n    val TAG = \"API Activity\"\n    val apiInterface: ApiInterface\n    apiInterface = ClientApi.getClient().create(ApiInterface::class.java)\n    val clientePostCall = apiInterface.postCliente(cliente)\n    mProgressBar.visibility = View.VISIBLE\n\n    clientePostCall.enqueue(object: Callback&lt;Cliente&gt; {\n        override fun onResponse(call: Call&lt;Cliente&gt;, response: Response&lt;Cliente&gt;) {\n            mProgressBar.visibility = View.GONE\n            if(response.isSuccessful){\n                try {\n                Toast.makeText(context,\"Usuario \" + response.body()!!.name + \" criado com sucesso.\",Toast.LENGTH_SHORT).show()\n                    val backHomeIntent = Intent(context, MainActivity::class.java)\n                    context.startActivity(backHomeIntent)\n                } catch (e: NullPointerException) {\n                    Toast.makeText(context, \"Problem is unknown: \", Toast.LENGTH_SHORT).show()\n                }\n            }else {\n                try {\n                    val errorBody = response.errorBody().string()\n\n\n                    Toast.makeText(context, \"Dados incorretos\", Toast.LENGTH_SHORT).show()\n                        Log.e(TAG, \"onResponse: \" + errorBody )\n\n                } catch (e: IOException){\n                    Toast.makeText(context, \"Problem is unknown: \", Toast.LENGTH_SHORT).show()\n                }\n            }\n        }\n        override fun onFailure(call: Call&lt;Cliente&gt;, t: Throwable) {\n            mProgressBar.visibility = View.GONE\n            Log.e(TAG, \"onFailure: \" + t.localizedMessage)\n        }\n    })\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 7039001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3ce96cd81b0d115e52585793f29a10e?s=128&d=identicon&r=PG&f=1", "display_name": "Zowye", "link": "https://stackoverflow.com/users/7039001/zowye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 55835083, "answer_count": 1, "score": 0, "last_activity_date": 1556124954, "creation_date": 1556123939, "question_id": 55834843, "link": "https://stackoverflow.com/questions/55834843/how-can-i-retrieve-the-errorbody-sent-from-server-on-retrofit-error-handler", "title": "How can I retrieve the errorBody sent from server on retrofit error handler?", "body": "<p>When everything goes well, I can retrieve the body from <code>response.body()</code> with no problem. </p>\n\n<p>Althought, when a validation error occurs on server (in my case, duplicated email) it sends the error to <code>frontend</code> and when I try to access the error body <em>response.errorBody()</em> the following info is retrieved: </p>\n\n<p><code>\"E/API\u00a0Activity: onResponse: PostSalao okhttp3.ResponseBody$1@84d856e\"</code></p>\n\n<p>I expected to get something like <em>\"error: email already used\"</em>.</p>\n\n<p>As you may see on this <a href=\"https://www.youtube.com/watch?v=IuPFlr8N2DA\" rel=\"nofollow noreferrer\">video</a> on (10:08), he does the same thing I'm doing on my code, but he retrieves the erros correctly (10:17).</p>\n\n<p>What am I doing wrong?</p>\n\n<pre><code>fun postCliente(cliente: Cliente) {\n        val TAG = \"API Activity\"\n        val apiInterface: ApiInterface\n        apiInterface = ClientApi.getClient().create(ApiInterface::class.java)\n        val clientePostCall = apiInterface.postCliente(cliente)\n        mProgressBar.visibility = View.VISIBLE\n\n        clientePostCall.enqueue(object: Callback&lt;Cliente&gt; {\n            override fun onResponse(call: Call&lt;Cliente&gt;, response: Response&lt;Cliente&gt;) {\n                mProgressBar.visibility = View.GONE\n                if(response.isSuccessful){\n                    try {\n                    Toast.makeText(context,\"Usuario \" + response.body()!!.name + \" criado com sucesso.\",Toast.LENGTH_SHORT).show()\n                        val backHomeIntent = Intent(context, MainActivity::class.java)\n                        context.startActivity(backHomeIntent)\n                    } catch (e: NullPointerException) {\n                        Toast.makeText(context, \"Problem is unknown: \", Toast.LENGTH_SHORT).show()\n                    }\n                }else {\n                    try {\n                        val errorBody = response.errorBody().toString()\n\n\n                        Toast.makeText(context, \"Dados incorretos\", Toast.LENGTH_SHORT).show()\n                            Log.e(TAG, \"onResponse: \" + errorBody )\n\n                    } catch (e: IOException){\n                        Toast.makeText(context, \"Problem is unknown: \", Toast.LENGTH_SHORT).show()\n                    }\n                }\n            }\n            override fun onFailure(call: Call&lt;Cliente&gt;, t: Throwable) {\n                mProgressBar.visibility = View.GONE\n                Log.e(TAG, \"onFailure: \" + t.localizedMessage)\n            }\n        })\n    }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ob4kP.png\" rel=\"nofollow noreferrer\">Logcat on Android in red</a></p>\n"}, {"tags": ["variables", "kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1556123613, "post_id": 55834728, "comment_id": 98333997, "body": "It can sometimes be more readable to specify the type (not with Int and Int literals, though). It can also be useful if you want the type to be something other than what is inferred (a super class or super interface, for example)"}, {"owner": {"reputation": 23, "user_id": 5827297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jMfhi.jpg?s=128&g=1", "display_name": "Vedant Mamgain", "link": "https://stackoverflow.com/users/5827297/vedant-mamgain"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1556123808, "post_id": 55834728, "comment_id": 98334088, "body": "Is there any other advantage other than better readability of the code."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1556124464, "post_id": 55834728, "comment_id": 98334394, "body": "When doing interop with Java, the Kotlin compiler may not always be able to infer the nullability of objects coming from Java. So you may want to write <code>val foo : Foo? = getFooFromJava()</code> if you know that <code>getFooFromJava</code> can return a <code>null</code> reference (another alternative is to add annotations in the Java code, if modifying the Java code is an option)."}], "answers": [{"tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 1, "last_activity_date": 1556410072, "last_edit_date": 1556410072, "creation_date": 1556128743, "answer_id": 55836004, "question_id": 55834728, "link": "https://stackoverflow.com/questions/55834728/why-should-i-assign-the-data-type-of-variables-in-kotlin-if-giving-it-values-ini/55836004#55836004", "title": "Why should I assign the data type of variables in Kotlin if giving it values initially it is capable of inferring the data type of the variable", "body": "<p>A few reasons you might want to specify a type explicitly:</p>\n\n<ul>\n<li><p>You want a supertype of the value (perhaps so you can to reassign it later), e.g.:</p>\n\n<p><code>var myList: List&lt;String&gt; = ArrayList&lt;String&gt;()</code></p></li>\n<li><p>You want to protect against changes to other code (especially if it's outside your control), e.g.:</p>\n\n<p><code>val x: MustBeThisType = SomeLibrary.getValue()</code></p>\n\n<p>(That would give an error if <code>SomeLibrary.getValue()</code> ever changes to returns something other than <code>MustBeThisType</code> or a subtype.)</p></li>\n<li><p>You want to avoid an explicit numeric conversion, e.g.:</p>\n\n<p><code>val x: Long = 2</code></p>\n\n<p>instead of:</p>\n\n<p><code>val x = 2.toLong()</code></p></li>\n<li><p>You want to make it very clear to someone reading your code (especially if that might not be in an IDE).</p></li>\n<li><p>As Michael says, you may need to specify the nullability of types returned from Java, e.g.:</p>\n\n<p><code>val x: String = someJavaClass.getAString() // Never returns null</code></p></li>\n</ul>\n\n<p>None of those is particularly common in my experience, though.</p>\n"}], "owner": {"reputation": 23, "user_id": 5827297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jMfhi.jpg?s=128&g=1", "display_name": "Vedant Mamgain", "link": "https://stackoverflow.com/users/5827297/vedant-mamgain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556410072, "creation_date": 1556123455, "last_edit_date": 1556123555, "question_id": 55834728, "link": "https://stackoverflow.com/questions/55834728/why-should-i-assign-the-data-type-of-variables-in-kotlin-if-giving-it-values-ini", "title": "Why should I assign the data type of variables in Kotlin if giving it values initially it is capable of inferring the data type of the variable", "body": "<p>As mentioned in the code provided. My question is if there is any advantage by mentioning the data type early on when I am just giving the variable it's value. As said in line 2 it can understand that it is int type.</p>\n\n<pre><code>val a: Int = 1  // immediate assignment\nval b = 2   // `Int` type is inferred\nval c: Int  // Type required when no initializer is provided.\n</code></pre>\n"}, {"tags": ["android-studio", "kotlin", "comments", "todo"], "answers": [{"comments": [{"owner": {"reputation": 1391, "user_id": 4308897, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X67wO4XjVAE/AAAAAAAAAAI/AAAAAAAAADw/NacwJv67gHI/photo.jpg?sz=128", "display_name": "Ercan", "link": "https://stackoverflow.com/users/4308897/ercan"}, "edited": false, "score": 0, "creation_date": 1582618972, "post_id": 55834667, "comment_id": 106829915, "body": "Thanks for the answer, Android studio hint wasn&#39;t very helpful."}], "tags": [], "owner": {"reputation": 478, "user_id": 6561371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e5196f6eb4c051d4c5f56680fd32615?s=128&d=identicon&r=PG&f=1", "display_name": "Dominik G.", "link": "https://stackoverflow.com/users/6561371/dominik-g"}, "is_accepted": true, "score": 7, "last_activity_date": 1556123240, "creation_date": 1556123240, "answer_id": 55834667, "question_id": 55834530, "link": "https://stackoverflow.com/questions/55834530/how-to-change-body-of-function-todo-generated-on-kotlin/55834667#55834667", "title": "How to change body of function TODO() generated on Kotlin?", "body": "<p>Go to the Preferences window in Android Studio, select <code>Editor -&gt; File and Code Templates</code>, open the <code>Code</code> tab, there you will find an option for <code>New Kotlin Function Body</code> which you can customize.</p>\n"}], "owner": {"reputation": 2086, "user_id": 6733404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vARvedsWAsM/AAAAAAAAAAI/AAAAAAAAAHc/qeiBs7OBaMY/photo.jpg?sz=128", "display_name": "Abner Esc&#243;cio", "link": "https://stackoverflow.com/users/6733404/abner-esc%c3%b3cio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1020, "favorite_count": 2, "accepted_answer_id": 55834667, "answer_count": 1, "score": 3, "last_activity_date": 1556123759, "creation_date": 1556122690, "last_edit_date": 1556123759, "question_id": 55834530, "link": "https://stackoverflow.com/questions/55834530/how-to-change-body-of-function-todo-generated-on-kotlin", "title": "How to change body of function TODO() generated on Kotlin?", "body": "<p>I need leave something to do later on my code and <code>TODO()</code> auto generated produces a very long comment like follow</p>\n\n<pre><code>TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n</code></pre>\n\n<p>The above line tell me to go to <code>File -&gt; Setting -&gt; File Template</code> to change it, but this option not exists to <code>TODO()</code> functions. How to solve it?</p>\n"}, {"tags": ["android", "validation", "mvvm", "kotlin", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 152, "user_id": 2312248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8sYYv.png?s=128&g=1", "display_name": "ruitercomp", "link": "https://stackoverflow.com/users/2312248/ruitercomp"}, "edited": false, "score": 0, "creation_date": 1556124455, "post_id": 55834167, "comment_id": 98334387, "body": "Thanks for the answer. I do not quite understand where the btnClick () method is in the Activity?"}, {"owner": {"reputation": 1089, "user_id": 8893132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E5G9K.jpg?s=128&g=1", "display_name": "mahdi shahbazi", "link": "https://stackoverflow.com/users/8893132/mahdi-shahbazi"}, "reply_to_user": {"reputation": 152, "user_id": 2312248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8sYYv.png?s=128&g=1", "display_name": "ruitercomp", "link": "https://stackoverflow.com/users/2312248/ruitercomp"}, "edited": false, "score": 1, "creation_date": 1556169292, "post_id": 55834167, "comment_id": 98347188, "body": "@ruitercomp the <code>btnClick()</code> is the method that called when your button clicked, I will change the answer for you and add it"}], "tags": [], "owner": {"reputation": 1089, "user_id": 8893132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E5G9K.jpg?s=128&g=1", "display_name": "mahdi shahbazi", "link": "https://stackoverflow.com/users/8893132/mahdi-shahbazi"}, "is_accepted": false, "score": 2, "last_activity_date": 1556169420, "last_edit_date": 1556169420, "creation_date": 1556121484, "answer_id": 55834167, "question_id": 55833897, "link": "https://stackoverflow.com/questions/55833897/how-should-i-create-a-field-validation-of-a-form-using-mvvm-databinding-on-and/55834167#55834167", "title": "How should I create a field validation of a form using MVVM + Databinding on Android", "body": "<p>you can add text watcher to your edit text then save your edit text in a string field in your model then use it on button click.</p>\n\n<pre><code>class Model{\n   private TextWatcher textWatcher;\n   private String text;\n\n   public Model() {\n       this.textWatcher = new TextChangeWatcher() {\n           @Override\n           public void onTextChanged(CharSequence s, int start, int before, int count) {\n               text= s.toString();\n           }\n       };\n\n   }\n\n   public void btnClick() {\n    //now you can validate string text here\n   }\n}\n</code></pre>\n\n<pre><code>&lt;Button\n        android:id=\"@+id/btEnter\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"@dimen/login_button_enter\"\n        android:layout_marginTop=\"@dimen/margin_16dp\"\n        android:layout_marginBottom=\"@dimen/margin_8dp\"\n        android:text=\"@string/enter\"\n        android:onClick=\"@{() -&gt; model.btnClick()}\"/&gt;\n</code></pre>\n\n<p>for adding text watcher to edit text you can use <a href=\"https://stackoverflow.com/questions/33798426/how-to-databind-to-ontextchanged-for-an-edittext-on-android/55701091#55701091\">How to databind to onTextChanged for an EditText on Android?</a> this answer.</p>\n"}, {"comments": [{"owner": {"reputation": 152, "user_id": 2312248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8sYYv.png?s=128&g=1", "display_name": "ruitercomp", "link": "https://stackoverflow.com/users/2312248/ruitercomp"}, "edited": false, "score": 0, "creation_date": 1556191876, "post_id": 55841858, "comment_id": 98358414, "body": "Thanks for the answer this approach seems interesting to me, in fact I think there are several ways to be done. Yesterday I implemented an approach I will post it here."}], "tags": [], "owner": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "is_accepted": false, "score": 2, "last_activity_date": 1556167021, "creation_date": 1556167021, "answer_id": 55841858, "question_id": 55833897, "link": "https://stackoverflow.com/questions/55833897/how-should-i-create-a-field-validation-of-a-form-using-mvvm-databinding-on-and/55841858#55841858", "title": "How should I create a field validation of a form using MVVM + Databinding on Android", "body": "<p>Personally I'd keep the 2 way binding like you have and the click handling. I wouldn't bother with a binding adapter because the databinding library can figure out the method <code>setError</code>.</p>\n\n<p>On the XML I'd assign the error to an observable that could be in the <code>presenter</code> variable (I know you said mvvm, but the XML calls it presenter).</p>\n\n<pre><code>&lt;EditText\n    app:error=\"presenter.passwordError\"\n    ...\n    /&gt;\n</code></pre>\n\n<p>And now inside the click listener you can add the validation logic</p>\n\n<pre><code>val passwordError = ObservableField&lt;String&gt;()\n\nfun btnClick() {\n  if (user.pass.isEmpty()) {\n    passwordError.set(\"Empty password\")\n    return\n  }\n\n  if (user.pass.length  &lt; 7) {\n    passwordError.set( \"nvalid pass\")\n  } else {\n    passwordError.set(null)\n  }\n}\n</code></pre>\n\n<p>I'm assuming you can access the user variable from the presenter. Nevertheless, I think this is enough to get the idea.</p>\n"}, {"comments": [{"owner": {"reputation": 1293, "user_id": 12423905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c2e6034770729b699cd274a1738ff?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/12423905/andrew"}, "edited": false, "score": 0, "creation_date": 1599306472, "post_id": 55848726, "comment_id": 112737886, "body": "Where did you get the LiveEvent class?"}], "tags": [], "owner": {"reputation": 152, "user_id": 2312248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8sYYv.png?s=128&g=1", "display_name": "ruitercomp", "link": "https://stackoverflow.com/users/2312248/ruitercomp"}, "is_accepted": false, "score": 1, "last_activity_date": 1556193219, "creation_date": 1556193219, "answer_id": 55848726, "question_id": 55833897, "link": "https://stackoverflow.com/questions/55833897/how-should-i-create-a-field-validation-of-a-form-using-mvvm-databinding-on-and/55848726#55848726", "title": "How should I create a field validation of a form using MVVM + Databinding on Android", "body": "<p>I did this way to check the edittext field:</p>\n\n<pre><code>// I created a LiveData to observe the validations inside my ViewModel.\nprivate val validationLiveEvent = LiveEvent&lt;Validations&gt;()\nval validation: LiveData&lt;Validations&gt; = validationLiveEvent\n\nfun validate (user: User) : Boolean {\n\n   if (user.email.trim { it &lt;= ' ' }.isEmpty() \n       || user.email.trim { it &lt;= ' ' }.length &lt; 6) {\n\n       // I put the value so that the screen has some action\n       validationLiveEvent.value = Validations.EmailEmpty\n       return false\n   }\n\n   if (user.password.trim { it &lt;= ' ' }.isEmpty()) {\n       validationLiveEvent.value = Validations.PasswordEmpty\n       return false\n   }\n\n   return true\n}\n</code></pre>\n\n<p>In my Activity I pass the User object to my ViewModel like this:</p>\n\n<pre><code>fun onLoginClick() {\n    binding.user?.let { loginViewModel.onLoginClick(it) }\n}\n</code></pre>\n\n<p>Observing the validation also within the Activity I can say which message should appear on the screen:</p>\n\n<pre><code>loginViewModel.validation.observe(this, Observer {\n\n    when(it) {\n        Validations.EmailEmpty -&gt; {\n            binding.etEmail.error = getString(R.string.login_hint_email_error)\n            binding.etEmail.focus()\n        }\n\n        Validations.PasswordEmpty -&gt; {\n            binding.tilPassword.isPasswordVisibilityToggleEnabled = false\n            binding.etPassword.error = getString(R.string.login_password_hint)\n            binding.etPassword.focus()\n        }\n    }\n})\n</code></pre>\n\n<p>I think there are several ways to be done feel free to post more answers. I liked all approaches and will test them all. Tks!</p>\n"}, {"comments": [{"owner": {"reputation": 152, "user_id": 2312248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8sYYv.png?s=128&g=1", "display_name": "ruitercomp", "link": "https://stackoverflow.com/users/2312248/ruitercomp"}, "edited": false, "score": 0, "creation_date": 1561740140, "post_id": 56736847, "comment_id": 100175188, "body": "Great answer tks! I&#39;ll try to implement"}], "tags": [], "owner": {"reputation": 644, "user_id": 4924737, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/371ccb7a2d35c3e43e45f336be416eeb?s=128&d=identicon&r=PG&f=1", "display_name": "Ludvig W", "link": "https://stackoverflow.com/users/4924737/ludvig-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1561381705, "last_edit_date": 1561381705, "creation_date": 1561380105, "answer_id": 56736847, "question_id": 55833897, "link": "https://stackoverflow.com/questions/55833897/how-should-i-create-a-field-validation-of-a-form-using-mvvm-databinding-on-and/56736847#56736847", "title": "How should I create a field validation of a form using MVVM + Databinding on Android", "body": "<p>I have written my own builder in order to construct a LiveData which depends on some given constraints and other LiveData instances to use as triggers. See below.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Builder class used to create {@link LiveData} instances which combines multiple\n * sources (triggers) and evaluates given constraints to finally emit\n * either {@code true} (success/valid) or {@code false} (fail/invalid) which is an\n * aggregation of all the constraints using the {@code AND} operator.\n */\npublic final class ValidatorLiveDataBuilder {\n\n    /**\n     * A boolean supplier which supports aggregation of suppliers using {@code AND} operation.\n     */\n    private static final class BooleanAndSupplier implements BooleanSupplier {\n\n        /**\n         * Field for the source {@code supplier}.\n         */\n        private final BooleanSupplier source;\n\n        /**\n         * Private constructor\n         *\n         * @param source source to base this supplier on\n         */\n        private BooleanAndSupplier(BooleanSupplier source) {\n            this.source = source;\n        }\n\n        /**\n         * Returns a new {@code supplier} which combines {@code this} instance\n         * and the given supplier. &lt;br /&gt;\n         * &lt;b&gt;Note:&lt;/b&gt; the given {@code supplier} is not called if {@code this} instance\n         * evaluates to {@code false}.\n         *\n         * @param supplier the supplier to combine with\n         * @return a new combined {@code BooleanAndSupplier}\n         */\n        private BooleanAndSupplier andThen(BooleanSupplier supplier) {\n            return new BooleanAndSupplier(() -&gt; {\n                if (!getAsBoolean()) {\n                    return false;\n                }\n\n                return supplier.getAsBoolean();\n            });\n        }\n\n        @Override\n        public boolean getAsBoolean() {\n            return source.getAsBoolean();\n        }\n    }\n\n/**\n * Field for the returned {@link LiveData}.\n */\nprivate final MediatorLiveData&lt;Boolean&gt; validatorLiveData = new MediatorLiveData&lt;&gt;();\n\n/**\n * Field for the used validator.\n */\nprivate BooleanAndSupplier validator = new BooleanAndSupplier(() -&gt; true);\n\n/**\n * Field for all the added sources.\n */\nprivate final List&lt;LiveData&lt;?&gt;&gt; sources = new ArrayList&lt;&gt;();\n\n/**\n * Constructor\n */\nprivate ValidatorLiveDataBuilder() {\n    // empty\n}\n\n/**\n * Constructs a new {@code ValidatorLiveDataBuilder}.\n *\n * @return new instance\n */\npublic static ValidatorLiveDataBuilder newInstance() {\n    return new ValidatorLiveDataBuilder();\n}\n\n/**\n * Adds a source to {@code this} builder which is used as a trigger to evaluate the\n * added constraints.\n *\n * @param source the source to add\n * @return this instance to allow chaining\n */\npublic ValidatorLiveDataBuilder addSource(LiveData&lt;?&gt; source) {\n    sources.add(source);\n    return this;\n}\n\n/**\n * Adds a constraint to {@code this} builder which is evaluated when any of the added\n * sources emits value and aggregated using the {@code &amp;&amp; (AND)} operator.\n *\n * @param constraint the constraint to add\n * @return this instance to allow chaining\n */\npublic ValidatorLiveDataBuilder addConstraint(BooleanSupplier constraint) {\n    validator = validator.andThen(constraint);\n    return this;\n}\n\n/**\n * Adds a source to {@code this} builder which is used as a trigger to evaluate\n * the added constraints. The given {@code constraint} gets the current item\n * in the {@code source} when any of the added sources emits a value. &lt;br /&gt;\n *\n * &lt;b&gt;Note:&lt;/b&gt; the item given to the constraint might be {@code null}.\n *\n * @param source     source to add\n * @param constraint the constraint to add\n * @param &lt;T&gt;        type of the items emitted by the source\n * @return this instance to allow chaining\n */\npublic &lt;T&gt; ValidatorLiveDataBuilder addSource(LiveData&lt;T&gt; source,\n                                              Function&lt;T, Boolean&gt; constraint) {\n    return addSource(source)\n            .addConstraint(() -&gt; constraint.apply(source.getValue()));\n}\n\n/**\n * Constructs a {@code LiveData} from {@code this} builder instance which\n * is updated to the result of the constraints when any of the sources emits a value. &lt;br /&gt;\n * &lt;b&gt;Note:&lt;/b&gt; a synthetic emission is forced in order to prevent cases where\n * none of the given sources has emitted any data and the validation logic is not run\n * on the first subscription. In other words, the validation logic will always evaluate\n * directly on subscription (observation).\n *\n * @return live data instance\n */\npublic LiveData&lt;Boolean&gt; build() {\n\n    // Creates the observer which is called when any of the added sources\n    // emits a value. The observer checks with the added constraints and updates\n    // the live data accordingly.\n    Observer&lt;Object&gt; onChanged = o -&gt; validatorLiveData.setValue(validator.getAsBoolean());\n\n    // Adds all the added sources to this live data with the same observer.\n    for (LiveData&lt;?&gt; source : sources) {\n        validatorLiveData.addSource(source, onChanged);\n    }\n\n    // Forces a validation call on first subscription.\n    onChanged.onChanged(null);\n\n    return validatorLiveData;\n}\n}\n</code></pre>\n\n<p>I use this with a Command type (they idea copied from .NET WPF).</p>\n\n\n\n<pre><code>public interface Command&lt;T&gt; {\n\n    void execute(T arg);\n\n    boolean canExecute(T arg);\n}\n</code></pre>\n\n<p>These two work perfectly when combined using the following BindingAdapter.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@BindingAdapter(value = {\"command\", \"command_arg\", \"command_validator\"}, requireAll = false)\npublic static &lt;T&gt; void setCommand(View view, Command&lt;T&gt; command, T arg, Boolean valid) {\n    boolean enabled = true;\n\n    if (command != null &amp;&amp; !command.canExecute(arg)) {\n        enabled = false;\n    }\n\n    if (valid != null &amp;&amp; !valid) {\n        enabled = false;\n    }\n\n    if (view.isEnabled() ^ enabled) {\n        // Enables or disables the view if they two are different (XOR).\n        view.setEnabled(enabled);\n    }\n\n    if (command != null) {\n        view.setOnClickListener(v -&gt; command.execute(arg));\n    }\n}\n</code></pre>\n\n<h1>Example of usage</h1>\n\n<p><strong>Goal</strong> to allow the press of the button when the EditText contains any data and when the Command is executing, to disallow presses again.</p>\n\n<h3>Nothin in the EditText (initially)</h3>\n\n<p><a href=\"https://i.stack.imgur.com/NajNM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NajNM.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Input 100 inside the EditText, UI validation is OK</h3>\n\n<p><a href=\"https://i.stack.imgur.com/ST2Fr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ST2Fr.png\" alt=\"enter image description here\"></a></p>\n\n<h3>The request is pending</h3>\n\n<p><a href=\"https://i.stack.imgur.com/eRYm5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eRYm5.png\" alt=\"enter image description here\"></a></p>\n\n<p>We can accomplish the following by first constructing a command instance which\nwe allow for binding by the view.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private Command&lt;Object&gt; requestBalanceCommand \n        = Commands.newInstance(this::requestBalance, this::canRequestBalance);\n\n@Bindable\npublic Command&lt;Object&gt; getRequestBalanceCommand() {\n    return requestBalanceCommand;\n}\n\n  public boolean canRequestBalance(Object ignored) {\n    return isInState(State.STANDBY);\n}\n\npublic void requestBalance(Object ignored) {\n    setState(State.REQUESTING);\n\n    if (balanceAmount.getValue() == null) {\n        event.setValue(Event.FAILED_TO_SEND);\n        return;\n    }\n\n    Timber.e(\"Requesting %d balance...\", balanceAmount.getValue());\n\n    Disposable disposable = Completable.timer(3, TimeUnit.SECONDS)\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(() -&gt; {\n                Timber.e(\"DONE!\");\n                setState(State.STANDBY);\n            });\n\n    addDisposable(disposable);\n\n}\n</code></pre>\n\n<p>(The isInState() and setState() are just two methods on this view model to set the current state. The setState also notifies that the Bindable command has been updated using:</p>\n\n<pre><code>notifyPropertyChanged(BR.requestBalanceCommand)\n</code></pre>\n\n<p>You need to implement androidx.databinding.Observable on your ViewModel to allow for this, the information to do this can be found in the <a href=\"https://developer.android.com/topic/libraries/data-binding/architecture\" rel=\"nofollow noreferrer\">documentation</a>.)</p>\n\n<p>(The Commands class is just a static factory which creates a Command instance, see below <em>INCOMPLETE</em> snippet for the idea how to implement it.)</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; Command&lt;T&gt; newInstance(Consumer&lt;T&gt; execute, Predicate&lt;T&gt; canExecute) {\n    return new CommandImpl&lt;&gt;(execute, canExecute);\n}\n</code></pre>\n\n<p>(The CommandImpl implements Command simply holds the Consumer and Predicate which it delegates to. But you could just as well return an anonymous class just implementing the Command interface right there in the static factory.)</p>\n\n<p>And we construct the LiveData used for validation.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>validator = ValidatorLiveDataBuilder.newInstance()\n            .addSource(edtLiveData, amount -&gt; {\n                Timber.e(\"Checking amount(%d) != null = %b\", amount, amount != null);\n                return amount != null;\n            })\n            .build();\n</code></pre>\n\n<p>And expose it like so.</p>\n\n<p>private final LiveData validator;</p>\n\n<pre><code>public LiveData&lt;Boolean&gt; getValidator() {\n    return validator;\n}\n</code></pre>\n\n<p>(The edtLiveData is a MutableLiveData instance hooked to the text of the EditText in question using two-way data binding.)</p>\n\n<p>Now we attach it using the BindingAdapter on to the button.</p>\n\n<pre><code>&lt;Button command=\"@{vm.requestBalanceCommand}\"\n        command_validator=\"@{vm.validator}\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Request Balance\" /&gt;\n</code></pre>\n\n<p>Please comment if anything is unclear, requires more code or is missing. The hooking of the EditText to the LiveData requires a Converter and InverseMethod but I didn't want to get into that part in this post, I assumed the LiveData to the EditText is already working. I know this might be more than what OP is looking for but I know I appreciate more complete examples than just small crumbs here and there.</p>\n\n<h1>What we achieved</h1>\n\n<p>Combined validation with command execution in a clean and stable way which makes sense and is easy to use.</p>\n"}, {"tags": [], "owner": {"reputation": 1054, "user_id": 3064870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XrLA2.jpg?s=128&g=1", "display_name": "NhatVM", "link": "https://stackoverflow.com/users/3064870/nhatvm"}, "is_accepted": false, "score": 0, "last_activity_date": 1610705440, "creation_date": 1610705440, "answer_id": 65734158, "question_id": 55833897, "link": "https://stackoverflow.com/questions/55833897/how-should-i-create-a-field-validation-of-a-form-using-mvvm-databinding-on-and/65734158#65734158", "title": "How should I create a field validation of a form using MVVM + Databinding on Android", "body": "<p>you shouldn't\nThis is the way you can validate data of EditText from ViewModel\nXML Layout</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;data&gt;\n\n        &lt;variable\n            name=&quot;loginViewModel&quot;\n            type=&quot;com.xxx.android.ui.customer.login.LoginViewModel&quot; /&gt;\n\n        &lt;variable\n            name=&quot;customerViewModel&quot;\n            type=&quot;com.xxx.android.ui.customer.CustomerViewModel&quot; /&gt;\n\n    &lt;/data&gt;\n\n    &lt;androidx.core.widget.NestedScrollView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;LinearLayout\n        android:gravity=&quot;center&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n\n        &lt;androidx.appcompat.widget.AppCompatEditText\n            android:id=&quot;@+id/edtEmail&quot;\n            android:layout_marginTop=&quot;40dp&quot;\n            android:layout_marginStart=&quot;24dp&quot;\n            android:layout_marginEnd=&quot;24dp&quot;\n            android:textSize=&quot;14sp&quot;\n            android:inputType=&quot;textEmailAddress&quot;\n            android:hint=&quot;Enter email&quot;\n            android:onTextChanged=&quot;@{loginViewModel.onEmailChanged}&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;/&gt;\n\n        &lt;androidx.appcompat.widget.AppCompatEditText\n            android:id=&quot;@+id/edtPassword&quot;\n            android:layout_marginStart=&quot;24dp&quot;\n            android:layout_marginEnd=&quot;24dp&quot;\n            android:layout_marginTop=&quot;12dp&quot;\n            android:textSize=&quot;14sp&quot;\n            android:inputType=&quot;textPassword&quot;\n            android:hint=&quot;Enter password&quot;\n            android:onTextChanged=&quot;@{loginViewModel.onPasswordChanged}&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;/&gt;\n\n\n        &lt;androidx.appcompat.widget.AppCompatButton\n            android:layout_marginTop=&quot;24dp&quot;\n            android:background=&quot;@android:color/holo_orange_dark&quot;\n            android:textColor=&quot;@color/white&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:enabled=&quot;@{ loginViewModel.isEmailValidate &amp;amp; loginViewModel.isPasswordValidate() ? true : false  }&quot;\n\n            android:padding=&quot;12dp&quot;\n            android:text=&quot;@string/logout&quot; /&gt;\n\n\n\n    &lt;/LinearLayout&gt;\n\n    &lt;/androidx.core.widget.NestedScrollView&gt;\n&lt;/layout&gt;\n</code></pre>\n<p>And here is the way you validate in ViewModel</p>\n<pre><code>private var _isEmailValidate = MutableLiveData&lt;Boolean&gt;()\nval isEmailValidate: LiveData&lt;Boolean&gt;\nget() = _isEmailValidate\n\nprivate var _isPasswordValidate = MutableLiveData&lt;Boolean&gt;()\nval isPasswordValidate: LiveData&lt;Boolean&gt;\nget() = _isPasswordValidate\n\nfun onEmailChanged(s: CharSequence, start: Int, before: Int, count: Int) {\n    val email = s.toString()\n    _isEmailValidate.postValue(android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches())\n    Log.e(&quot;Frank&quot;, &quot;onEmailChanged ${s.toString()}&quot;)\n\n}\n\nfun onPasswordChanged(s: CharSequence, start: Int, before: Int, count: Int) {\n    Log.e(&quot;Frank&quot;, &quot;onEmailChanged ${s.toString()}&quot;)\n    val result = (s.length &gt; 0)\n    _isPasswordValidate.postValue(result)\n}\n</code></pre>\n<p>Please take not that you must type &quot;android:onTextChanged&quot;, Android Studio will not suggest for you.</p>\n"}], "owner": {"reputation": 152, "user_id": 2312248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/8sYYv.png?s=128&g=1", "display_name": "ruitercomp", "link": "https://stackoverflow.com/users/2312248/ruitercomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4223, "favorite_count": 4, "answer_count": 5, "score": 1, "last_activity_date": 1610705440, "creation_date": 1556120528, "question_id": 55833897, "link": "https://stackoverflow.com/questions/55833897/how-should-i-create-a-field-validation-of-a-form-using-mvvm-databinding-on-and", "title": "How should I create a field validation of a form using MVVM + Databinding on Android", "body": "<p>I'm working with the MVVM standard recently and need to validate the fields of a form when the user clicks the submit button. Example form:</p>\n\n<pre><code>&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:card_view=\"http://schemas.android.com/tools\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;data&gt;\n        &lt;variable name=\"user\" \n            type=\"me.example.presentation.model.User\" /&gt;\n        &lt;variable\n            name=\"presenter\"\n            type=\"me.example.presentation.view.LoginActivity\"/&gt;\n\n... &lt;!-- some code --&gt;\n\n    &lt;EditText\n        android:id=\"@+id/etPassword\"\n        android:layout_width=\"match_parent\"                           \n        android:layout_height=\"wrap_content\"                          \n        android:digits=\"@string/allowed_digits_vehicle_plate\"                   \n        android:hint=\"@string/login_hint_vehicle_plate\"\n        android:inputType=\"textFilter|textCapCharacters\"\n        android:maxLength=\"7\"\n        android:text=\"@={user.password}\"\n        password=\"@{user.password}\"\n        android:textSize=\"@dimen/size16\" /&gt;\n\n... &lt;!-- some code --&gt;\n\n    &lt;Button\n        android:id=\"@+id/btEnter\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"@dimen/login_button_enter\"\n        android:layout_marginTop=\"@dimen/margin_16dp\"\n        android:layout_marginBottom=\"@dimen/margin_8dp\"\n        android:text=\"@string/enter\"\n        android:onClick=\"@{() -&gt; presenter.onLoginClick()}\"/&gt;\n\n... &lt;!-- some code --&gt;\n\n\n</code></pre>\n\n<p>I'm trying to validate edittext using a <strong>BindingAdapter</strong> as below:</p>\n\n<pre><code>@JvmStatic\n@BindingAdapter(\"password\")\nfun setPassError(editText: EditText, pass: String) {\n    if (pass.isEmpty()) {\n       editText.error = null\n       return\n    }\n\n    if (editText.text.toString().length  &lt; 7) {\n       editText.error = \"invalid pass\"\n    } else {\n       editText.error = null\n    }\n}\n</code></pre>\n\n<p>That way it validates while the user is typing, but I want it to perform validation when the submit button is clicked. How can I change and improve this approach?</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "kotlin-coroutines", "mockk"], "answers": [{"comments": [{"owner": {"reputation": 122, "user_id": 7915845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f140b8a27260548305c948fea7b28cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Vikram Singh", "link": "https://stackoverflow.com/users/7915845/vikram-singh"}, "edited": false, "score": 0, "creation_date": 1556526404, "post_id": 55889831, "comment_id": 98455152, "body": "Hey Len, thanks for your time dear. i know about these functions but sorry to say i am unable to implement it with viewmodal"}], "tags": [], "owner": {"reputation": 41, "user_id": 11420546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BfsYI.jpg?s=128&g=1", "display_name": "Len J. de Penquer", "link": "https://stackoverflow.com/users/11420546/len-j-de-penquer"}, "is_accepted": false, "score": 0, "last_activity_date": 1556451189, "creation_date": 1556451189, "answer_id": 55889831, "question_id": 55833313, "link": "https://stackoverflow.com/questions/55833313/coroutines-unit-test-mockk-java-lang-abstractmethoderror-at-kotlinx-coroutines-c/55889831#55889831", "title": "Coroutines Unit test Mockk java.lang.AbstractMethodError at kotlinx.coroutines.CoroutineContextKt.newCoroutineContext", "body": "<p>To use mockK with coroutines you need to use the new \"coEvery\" and \"coVerify\" functions and it will work better :</p>\n\n<p><a href=\"https://mockk.io/#coroutines\" rel=\"nofollow noreferrer\">https://mockk.io/#coroutines</a></p>\n"}], "owner": {"reputation": 122, "user_id": 7915845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f140b8a27260548305c948fea7b28cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Vikram Singh", "link": "https://stackoverflow.com/users/7915845/vikram-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 774, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556451189, "creation_date": 1556118588, "question_id": 55833313, "link": "https://stackoverflow.com/questions/55833313/coroutines-unit-test-mockk-java-lang-abstractmethoderror-at-kotlinx-coroutines-c", "title": "Coroutines Unit test Mockk java.lang.AbstractMethodError at kotlinx.coroutines.CoroutineContextKt.newCoroutineContext", "body": "<p>I want to unit test a method in viewmodal but everytime i failed, and had gone through many of the websites and stack answers but none of them helped out.\nI just wanted to test a method in my viewmodal that is loadWeatherForeCast</p>\n\n<p>I had gone through the following links,\n<a href=\"https://stackoverflow.com/questions/54061885/error-calling-dispatchers-setmain-in-unit-test\">Error calling Dispatchers.setMain() in unit test</a></p>\n\n<p><a href=\"https://android.jlelse.eu/mastering-coroutines-android-unit-tests-8bc0d082bf15\" rel=\"nofollow noreferrer\">https://android.jlelse.eu/mastering-coroutines-android-unit-tests-8bc0d082bf15</a></p>\n\n<p><a href=\"https://proandroiddev.com/mocking-coroutines-7024073a8c09\" rel=\"nofollow noreferrer\">https://proandroiddev.com/mocking-coroutines-7024073a8c09</a></p>\n\n<pre><code>import androidx.arch.core.executor.testing.InstantTaskExecutorRule\nimport io.mockk.MockKAnnotations\nimport io.mockk.every\nimport io.mockk.impl.annotations.MockK\nimport io.mockk.junit5.MockKExtension\nimport io.mockk.verify\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.InternalCoroutinesApi\nimport kotlinx.coroutines.runBlocking\nimport org.junit.Rule\nimport org.junit.jupiter.api.BeforeAll\nimport org.junit.jupiter.api.Test\nimport org.junit.jupiter.api.TestInstance\nimport go_jek.domain.entities.LocationTemperature\nimport go_jek.domain.interactor.Result\nimport go_jek.domain.interactor.weatherUseCase.WeatherParam\nimport go_jek.domain.interactor.weatherUseCase.WeatherUseCase\nimport go_jek.domain.repository.ApiDataSource\nimport go_jek.utility.dateUtils.DateUtils\n\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\nclass WeatherViewModelTest {\n@get:Rule\nval rule = InstantTaskExecutorRule()\n\n@MockK\nlateinit var apiDataSource: ApiDataSource       //Interface\n\n@MockK\nlateinit var dateUtilImpl: DateUtils                //Interface\n\n@MockK\nlateinit var weatherParam: WeatherParam\n\n@MockK\nlateinit var locationTemperatureOutput: LocationTemperature\n\nprivate lateinit var weatherUseCase: WeatherUseCase\nprivate lateinit var weatherViewModel: WeatherViewModel\n\n@BeforeAll\nfun setup() {\n    MockKAnnotations.init(this)\n\n    weatherUseCase = WeatherUseCase(apiDataSource)\n    weatherViewModel = WeatherViewModel(weatherUseCase, dateUtilImpl, Dispatchers.Unconfined)\n}\n\n@Test\nfun check() = runBlocking {\n    every {\n        weatherUseCase.execute(any(), any(), any())\n    } answers {\n        thirdArg&lt;(Result&lt;LocationTemperature&gt;) -&gt; Unit&gt;().invoke(Result.Success(locationTemperatureOutput))\n    }\n\n    weatherViewModel.loadWeatherForeCast(32.45, 72.452)\n\n    verify(atLeast = 1) {\n        apiDataSource.getWeatherInfo(weatherParam)\n    }\n}\n}\n\n\ninterface ApiDataSource {\nfun getWeatherInfo(weatherParam: WeatherParam):   Result&lt;LocationTemperature&gt;\n}\n\n\n class WeatherUseCase(var apiDataSource: ApiDataSource) :   UseCase&lt;LocationTemperature, WeatherParam&gt;() {\noverride suspend fun run(params: WeatherParam): Result&lt;LocationTemperature&gt; = apiDataSource.getWeatherInfo(params)\n</code></pre>\n\n<p>}</p>\n\n<pre><code> class WeatherParam(\nval apiKey: String = BuildConfig.appixu_secretkey,\nval location: String\n  ) : UseCase.NoParams()\n\n\n class LocationTemperature(val location: Location, val current: Current, val forecast: Forecast) : Parcelable\n\n\n class WeatherViewModel (val weatherUseCase: WeatherUseCase,\n                    val dateUtilImpl: DateUtils,\n                    val uiContext: CoroutineContext = Dispatchers.Main) : ViewModel(), CoroutineScope {\n\nprivate val job: Job\n\nprivate val _locationLiveData = MutableLiveData&lt;LocationTemperature&gt;()\nval locationLiveData: LiveData&lt;LocationTemperature&gt;\n\nprivate val _error: MutableLiveData&lt;String&gt; = MutableLiveData()\nvar error: LiveData&lt;String&gt; = _error\n\nprivate val loadingState = MutableLiveData&lt;Boolean&gt;()\nval loadingLiveData = loadingState\n\noverride val coroutineContext: CoroutineContext\n    get() = uiContext + job\n\ninit {\n    job = Job()\n\n    locationLiveData = Transformations.map(_locationLiveData) {\n        it.apply {\n            forecast.forecastday.forEach {\n                it.dayOfWeek = dateUtilImpl.format(it.date, DateUtils.FOR_YYYY_H_MM_H_DD, FULL_DAY)\n            }\n        }\n    }\n}\n\nfun handleError(error: Exception) {\n    loadingState.value = false\n    _error.value = error.localizedMessage\n}\n\nfun loadWeatherForeCast(latitude: Double, longitude: Double) {\n    val weatherParam = WeatherParam(location = String.format(Locale.getDefault(), \"%1f, %2f\",\n        latitude, longitude))\n\n    weatherUseCase.execute(this, weatherParam)\n    {\n        when (it) {\n            is Result.Success -&gt; {\n                loadingState.value = false\n                _locationLiveData.value = it.data\n            }\n            is Result.Error -&gt; {\n                handleError(it.exception)\n            }\n        }\n    }\n}\n\noverride fun onCleared() {\n    job.cancel()\n    super.onCleared()\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["java", "kotlin", "kotlin-inline-class"], "comments": [{"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556123785, "post_id": 55833296, "comment_id": 98334074, "body": "Maybe using the object type e.g. Long and rely on auto boxing?"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556125088, "post_id": 55833296, "comment_id": 98334708, "body": "What do you mean by rely on auto boxing?"}, {"owner": {"reputation": 23961, "user_id": 2151351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c4jmP.png?s=128&g=1", "display_name": "a better oliver", "link": "https://stackoverflow.com/users/2151351/a-better-oliver"}, "edited": false, "score": 0, "creation_date": 1556132639, "post_id": 55833296, "comment_id": 98338084, "body": "<code>Cleaner</code> and off-heap are mutually exclusive. <code>Cleaner</code> and primitives are mutually exclusive. What is your actual goal?"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1556173263, "post_id": 55833296, "comment_id": 98348432, "body": "To replicate the <code>Unique</code> handle of <a href=\"https://github.com/KhronosGroup/Vulkan-Hpp#uniquehandle-for-automatic-resource-management\" rel=\"nofollow noreferrer\">vulkan hpp</a> for automatic resource management"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556118540, "creation_date": 1556118540, "question_id": 55833296, "link": "https://stackoverflow.com/questions/55833296/is-there-a-way-to-implement-the-cleaner-with-primitives-other-than-boxing-them-i", "title": "Is there a way to implement the Cleaner with primitives other than boxing them in classes?", "body": "<p>So, we have a kotlin wrapper around <a href=\"https://github.com/kotlin-graphics/vkk\" rel=\"nofollow noreferrer\">vulkan</a> which relies on inline classes for vulkan identifiers (which are usually <code>Long</code>s)</p>\n\n<p>As far as I got, Java (9+) <code>Cleaner</code> is supposed to work only with classes.</p>\n\n<p><a href=\"https://www.logicbig.com/tutorials/core-java-tutorial/gc/ref-cleaner.html\" rel=\"nofollow noreferrer\">Here</a> an example</p>\n\n<p>I tried to modify that in order to run with plain primitives</p>\n\n<pre><code>fun main() {\n    val cleaner = Cleaner.create()\n    for (i in 0..9) {\n        val id = Integer.toString(i)\n        val vkObject = 0L + i\n        cleaner.register(vkObject, CleanerRunnable(id))\n    }\n\n    //myObjects are not reachable anymore\n    //do some other memory intensive work\n    for (i in 1..10000) {\n        val a = IntArray(10000)\n        try {\n            Thread.sleep(1)\n        } catch (e: InterruptedException) {\n        }\n\n    }\n}\n</code></pre>\n\n<p>But unfortunately without success.</p>\n\n<p>So my question is if there is a way to have <code>Cleaner</code> working with primitives representing native off-heap resources without having to wrap them in classes</p>\n"}, {"tags": ["mvvm", "kotlin", "dependency-injection", "viewmodel", "dagger-2"], "comments": [{"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 1, "creation_date": 1556135159, "post_id": 55833152, "comment_id": 98339080, "body": "Did you see <a href=\"https://stackoverflow.com/q/55647120/1837367\">this question</a>?"}, {"owner": {"reputation": 1804, "user_id": 5695091, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eyHWK.jpg?s=128&g=1", "display_name": "ysfcyln", "link": "https://stackoverflow.com/users/5695091/ysfcyln"}, "reply_to_user": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1556174878, "post_id": 55833152, "comment_id": 98349131, "body": "Wow, I did not see that, thanks a lot. Can you post it as answer?"}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 1, "creation_date": 1556176238, "post_id": 55833152, "comment_id": 98349786, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/55647120/update-to-kotlin-1-3-30-breaks-build-with-dagger-2-21\">Update to Kotlin 1.3.30 breaks build with Dagger 2.21</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556166569, "creation_date": 1556166569, "answer_id": 55841805, "question_id": 55833152, "link": "https://stackoverflow.com/questions/55833152/dagger-can-not-inject-viewmodel-with-kclass/55841805#55841805", "title": "Dagger can not inject ViewModel with KClass", "body": "<blockquote>\n  <p>Your ViewModelKey be like</p>\n</blockquote>\n\n<pre><code>@MustBeDocumented\n@kotlin.annotation.Target(AnnotationTarget.FUNCTION, AnnotationTarget.PROPERTY_GETTER, AnnotationTarget.PROPERTY_SETTER)\n@kotlin.annotation.Retention(AnnotationRetention.RUNTIME)\n@MapKey\ninternal annotation class ViewModelKey(val value: KClass&lt;out ViewModel&gt;)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1804, "user_id": 5695091, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eyHWK.jpg?s=128&g=1", "display_name": "ysfcyln", "link": "https://stackoverflow.com/users/5695091/ysfcyln"}, "is_accepted": true, "score": 0, "last_activity_date": 1568802726, "creation_date": 1568802726, "answer_id": 57990709, "question_id": 55833152, "link": "https://stackoverflow.com/questions/55833152/dagger-can-not-inject-viewmodel-with-kclass/57990709#57990709", "title": "Dagger can not inject ViewModel with KClass", "body": "<p>As mentioned <a href=\"https://stackoverflow.com/questions/55647120/update-to-kotlin-1-3-30-breaks-build-with-dagger-2-21\">this question</a> problem is related to Kotlin version. Using higher than 1.3.30 version solves the problem.</p>\n"}], "owner": {"reputation": 1804, "user_id": 5695091, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eyHWK.jpg?s=128&g=1", "display_name": "ysfcyln", "link": "https://stackoverflow.com/users/5695091/ysfcyln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 57990709, "answer_count": 2, "score": 0, "last_activity_date": 1568802726, "creation_date": 1556118098, "question_id": 55833152, "link": "https://stackoverflow.com/questions/55833152/dagger-can-not-inject-viewmodel-with-kclass", "title": "Dagger can not inject ViewModel with KClass", "body": "<p>I am moving my project java to kotlin, but got some confusion about <code>KClass</code> and <code>Class</code></p>\n\n<p>Here is my <code>BaseActivity</code></p>\n\n<pre><code>abstract class BaseActivity&lt;DB : ViewDataBinding, VM : BaseViewModel&gt; : DaggerAppCompatActivity() {\n\n    private lateinit var mCustomDialog: CustomDialog\n    private lateinit var mViewDataBinding: DB\n    private lateinit var mViewModel : VM\n\n    @Inject\n    lateinit var viewModelFactory: ViewModelFactory\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        // Set Custom Dialog\n        mCustomDialog = CustomDialog(this, R.style.LoadingDialogStyle)\n        // Set ViewModel\n        mViewModel = ViewModelProviders.of(this, viewModelFactory).get(getViewModelClass().java)\n        // Set DataBinding\n        mViewDataBinding = DataBindingUtil.setContentView(this, getLayoutId())\n        mViewDataBinding.lifecycleOwner = this\n        mViewDataBinding.setVariable(getBindingVariable(), mViewModel)\n        mViewDataBinding.executePendingBindings()\n        // Initialize UI\n        prepareView(savedInstanceState)\n    }\n\n\n    @LayoutRes\n    abstract fun getLayoutId(): Int\n\n\n    protected abstract fun getViewModelClass(): KClass&lt;VM&gt;\n\n\n    abstract fun getBindingVariable(): Int\n\n\n    fun getViewModel(): VM {\n        return mViewModel\n    }\n\n\n    fun getViewDataBinding() : DB {\n        return mViewDataBinding\n    }\n</code></pre>\n\n<p>I am using <code>protected abstract fun getViewModelClass(): KClass&lt;VM&gt;</code> function for initializing <code>ViewModel</code> class in the function below</p>\n\n<pre><code>ViewModelProviders.of(this, viewModelFactory).get(getViewModelClass().java)\n</code></pre>\n\n<p>I use ViewModel in activities by this way</p>\n\n<pre><code>class SplashActivity : BaseActivity&lt;ActivitySplashBinding, SplashViewModel&gt;() {\n\n    override fun getViewModelClass(): KClass&lt;SplashViewModel&gt; {\n        return SplashViewModel::class\n    }\n\n    override fun getLayoutId(): Int {\n        return R.layout.activity_splash\n    }\n\n    override fun getBindingVariable(): Int {\n        return BR.vm\n    }\n\n    override fun prepareView(savedInstanceState: Bundle?) {\n        getViewModel().testLog()\n    }\n\n}\n</code></pre>\n\n<p>But when I run the project, I got this error</p>\n\n<pre><code>error: [Dagger/MissingBinding] java.util.Map&lt;java.lang.Class&lt;? extends androidx.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;androidx.lifecycle.ViewModel&gt;&gt; cannot be provided without an @Provides-annotated method.\npublic abstract interface AppComponent extends dagger.android.AndroidInjector&lt;com.example.example.MyApp&gt; {\n                ^\n      java.util.Map&lt;java.lang.Class&lt;? extends androidx.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;androidx.lifecycle.ViewModel&gt;&gt; is injected at\n          com.example.example.utils.ViewModelFactory(viewModels)\n      com.example.example.utils.ViewModelFactory is injected at\n          com.example.example.base.BaseActivity.viewModelFactory\n      com.example.example.ui.splash.SplashActivity is injected at\n          dagger.android.AndroidInjector.inject(T) [com.example.example.di.AppComponent ? com.example.example.di.ActivityBindingsModule_SplashActivityInjector$app_debug.SplashActivitySubcomponent]\n</code></pre>\n\n<p>So I made some research and find out it is about <code>KClass</code> in my <code>ViewModelKey</code></p>\n\n<p>Here is <code>ViewModelKey</code></p>\n\n<pre><code>@Target(AnnotationTarget.FUNCTION, AnnotationTarget.PROPERTY_GETTER, AnnotationTarget.PROPERTY_SETTER)\n@Retention(AnnotationRetention.RUNTIME)\n@MapKey\nannotation class ViewModelKey(val value: KClass&lt;out ViewModel&gt;)\n</code></pre>\n\n<p>If I do not change my code to Kotlin and use old Java class like this it works properly</p>\n\n<pre><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\n@MapKey\npublic @interface ViewModelKey {\n    Class&lt;? extends ViewModel&gt; value();\n}\n</code></pre>\n\n<p>This is my <code>ViewModelFactory</code> class</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\nclass ViewModelFactory @Inject\nconstructor(private val viewModels: MutableMap&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;) : ViewModelProvider.Factory {\n\n    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {\n        val creator = viewModels[modelClass]\n            ?: viewModels.asIterable().firstOrNull { modelClass.isAssignableFrom(it.key) }?.value\n            ?: throw IllegalArgumentException(\"unknown model class $modelClass\")\n        return try {\n            creator.get() as T\n        } catch (e: Exception) {\n            throw RuntimeException(e)\n        }\n    }\n}\n</code></pre>\n\n<p>My <code>SplashActivityModule</code></p>\n\n<pre><code>@Module\nabstract class SplashActivityModule {\n\n    @Binds\n    @IntoMap\n    @ViewModelKey(SplashViewModel::class)\n    internal abstract fun provideSplashViewModel(splashViewModel: SplashViewModel) : ViewModel\n\n}\n</code></pre>\n\n<p>So how can I use <code>ViewModelKey</code> properly with Kotlin and what is main cause of this error, any help will be appreciated</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1556118002, "post_id": 55833001, "comment_id": 98330818, "body": "Just add <code>val</code> to the variables in the <code>Item</code> class constructor and remove the fields. Doesn&#39;t solve the problem, but it makes the class look less ugly"}, {"owner": {"reputation": 1, "user_id": 11405969, "user_type": "registered", "profile_image": "https://graph.facebook.com/2421677571228684/picture?type=large", "display_name": "Fin Dus", "link": "https://stackoverflow.com/users/11405969/fin-dus"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1556209858, "post_id": 55833001, "comment_id": 98369312, "body": "Hey, you mean like this: class Item(val name: String,val price: Double) ?"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1556210727, "post_id": 55833001, "comment_id": 98369712, "body": "Yeah, exactly like that. That also removes the declaration of the variables in the body"}], "owner": {"reputation": 1, "user_id": 11405969, "user_type": "registered", "profile_image": "https://graph.facebook.com/2421677571228684/picture?type=large", "display_name": "Fin Dus", "link": "https://stackoverflow.com/users/11405969/fin-dus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556125865, "creation_date": 1556117662, "last_edit_date": 1556125865, "question_id": 55833001, "link": "https://stackoverflow.com/questions/55833001/android-studio-dont-open-the-app-but-the-emulator", "title": "Android Studio dont open the App but the emulator", "body": "<p>I have wrote a little app in  Android Studio with kotline and the app does not start in the emulatet phone. I have activated Logcat and got some warnings or fails. It worked 1 day before without problems I just added the addCart method. I program like 3 months and only know the basics and with this problem I cant deal anymore without asking a question on my own. </p>\n\n<p>I will give you my code and the logs. I do not need help at the code if he doesn't cause the problem. I will get better by the time :)</p>\n\n<p>Here is the code:</p>\n\n<p>Main:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    private val tag =\"Main_Activity\"\n    private val shoppingCard = mutableListOf&lt;Item&gt;()\n    private var txtPrice = 0.0\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val addButton  = findViewById&lt;Button&gt;(R.id.addButton)\n        val showButton = findViewById&lt;Button&gt;(R.id.showButton)\n\n        addButton.setOnClickListener { Log.d(tag, \"addButton was pressed\");addCart(shoppingCard)}\n        showButton.setOnClickListener { Log.d(tag, \"showButton was pressed\");printList(shoppingCard)}\n    }\n\n    private fun addCart(shoppingCard: MutableList&lt;Item&gt;){\n         val name = editProductText.toString()\n         val pr = editPriceText.toString()\n         val price      = pr.toDouble()\n\n\n\n        val p = Item(name,price)\n        shoppingCard.add(p)\n        calcPrice(shoppingCard)\n    }\n\n    private fun printList(shoppingCard: MutableList&lt;Item&gt;)\n    {\n       for(Item in shoppingCard.indices)println(\"The name of the product is ${shoppingCard[Item].name} and the price is\n${shoppingCard[Item].price}\")\n    }\n\n    private fun calcPrice(shoppingCard: MutableList&lt;Item&gt;)\n    {\n        for(Item in shoppingCard.indices) txtPrice+shoppingCard[Item].price\n    }\n\n    private fun removeItem(shoppingCard: MutableList&lt;Item&gt;, Item: Item)\n    {\n        shoppingCard.remove(Item)\n        txtPrice - Item.price\n    } \n}\n</code></pre>\n\n<p>Item class:</p>\n\n<pre><code>class Item(name: String,price: Doubleuble ) {\n\n    val name = name\n    val price = price \n}\n</code></pre>\n\n<p>Main Activty XML: </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:paddingLeft=\"16dp\"\n    android:paddingRight=\"16dp\"\n    android:orientation=\"vertical\"\n    &gt;\n\n\n    &lt;TextView\n            android:text=\"Product Name\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\" android:id=\"@+id/Name\"/&gt;\n    &lt;EditText\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:inputType=\"textPersonName\"\n            android:text=\"Type Here\"\n            android:ems=\"10\"\n            android:id=\"@+id/editProductText\"/&gt;\n    &lt;TextView\n            android:text=\"Price\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\" android:id=\"@+id/Price\"/&gt;\n    &lt;EditText\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:inputType=\"numberDecimal\"\n            android:ems=\"10\"\n            android:id=\"@+id/editPriceText\"/&gt;\n    &lt;Button\n            android:text=\"Add\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\" android:id=\"@+id/addButton\"/&gt;\n    &lt;Button\n            android:text=\"SHOW SHOPPING CART\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\" android:id=\"@+id/showButton\"/&gt;\n    &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"38dp\" android:id=\"@+id/txtPrice\"/&gt; &lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Here are the logs:</p>\n\n<pre><code>E/NetworkScheduler: Invalid component specified.\n\n2019-04-24 16:28:26.944 1592-3964/? E/AudioFlinger: not enough memory for AudioTrack size=131296\n\n2019-04-24 16:28:26.946 1592-3964/? E/AudioFlinger: createRecordTrack_l() initCheck failed -12; no control block?\n2019-04-24 16:28:26.969 1592-4736/? I/AudioFlinger: AudioFlinger's thread 0xe6d83340 tid=4736 ready to run\n2019-04-24 16:28:26.984 3095-3206/? E/IAudioFlinger: createRecord returned error -12\n2019-04-24 16:28:26.984 3095-3206/? E/AudioRecord: AudioFlinger could not create record track, status: -12\n2019-04-24 16:28:26.987 3095-3206/? E/AudioRecord-JNI: Error creating AudioRecord instance: initialization check failed with status -12.\n2019-04-24 16:28:27.004 3095-3206/? E/android.media.AudioRecord: Error code -20 when initializing native AudioRecord object.\n</code></pre>\n"}, {"tags": ["android", "kotlin", "webview"], "comments": [{"owner": {"reputation": 115, "user_id": 11359372, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oJ5W7lMKWx4/AAAAAAAAAAI/AAAAAAAAABI/yXp5pMa51Uw/photo.jpg?sz=128", "display_name": "Tanguy Epifanic", "link": "https://stackoverflow.com/users/11359372/tanguy-epifanic"}, "edited": false, "score": 0, "creation_date": 1556272906, "post_id": 55832411, "comment_id": 98390512, "body": "Any idea on how to fix this?"}], "answers": [{"tags": [], "owner": {"reputation": 1318, "user_id": 769726, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/4kbxA.jpg?s=128&g=1", "display_name": "Klemens Zleptnig", "link": "https://stackoverflow.com/users/769726/klemens-zleptnig"}, "is_accepted": true, "score": 1, "last_activity_date": 1574263228, "creation_date": 1574263228, "answer_id": 58957781, "question_id": 55832411, "link": "https://stackoverflow.com/questions/55832411/kotlin-uncaught-typeerror-x-is-not-a-function-javascriptinterface-with-webv/58957781#58957781", "title": "Kotlin - Uncaught TypeError: X is not a function - JavascriptInterface with WebViews", "body": "<p>I think <code>@JavascriptInterface fun onAuthenticated()</code> should be outside of <code>override fun onCreate()</code>, not inside of it.</p>\n"}], "owner": {"reputation": 115, "user_id": 11359372, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oJ5W7lMKWx4/AAAAAAAAAAI/AAAAAAAAABI/yXp5pMa51Uw/photo.jpg?sz=128", "display_name": "Tanguy Epifanic", "link": "https://stackoverflow.com/users/11359372/tanguy-epifanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 58957781, "answer_count": 1, "score": 0, "last_activity_date": 1574263228, "creation_date": 1556115825, "last_edit_date": 1556187197, "question_id": 55832411, "link": "https://stackoverflow.com/questions/55832411/kotlin-uncaught-typeerror-x-is-not-a-function-javascriptinterface-with-webv", "title": "Kotlin - Uncaught TypeError: X is not a function - JavascriptInterface with WebViews", "body": "<p>I have a back application with a cshtml file that is basically used to get authentified.</p>\n\n<p>Now, in my Android app in Kotlin, I'm using a WebView and a JavascriptInterface to call the URL that I need and to call my method in the back.</p>\n\n<p>There are the useful code lines:</p>\n\n<p>Login activity:</p>\n\n<pre><code>val myWebView: WebView = findViewById(R.id.connexionWebview)\n        myWebView.setWebViewClient(object : WebViewClient() {\n            override fun shouldOverrideUrlLoading(view: WebView, url: String): Boolean {\n                view.loadUrl(url)\n                return false\n            }\n        })\n        myWebView.settings.javaScriptEnabled = true\n        myWebView.addJavascriptInterface(AuthenticatedHandler(this), \"AndroidAuthenticatedManager\")\n        myWebView.loadUrl(\"HiddenURL\")\n</code></pre>\n\n<p>AuthenticatedHandler.kt:</p>\n\n<pre><code>class AuthenticatedHandler(private val mContext: Context): AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        @JavascriptInterface\n        fun onAuthenticated(token: String, email: String, userId: Int) {\n            val intent = Intent(this, Home::class.java)\n            val extras = Bundle()\n            extras.putString(\"token\", token)\n            startActivity(intent)\n        }\n    }\n}`\n</code></pre>\n\n<p>In my back, Authenticated.cshtml:</p>\n\n<pre><code>AndroidAuthenticatedManager.onAuthenticated('@token.AccessToken', '@email', @userId);\n</code></pre>\n\n<p>And this is the error that I got:</p>\n\n<pre><code>I/chromium: [INFO:CONSOLE(14)] \"Uncaught TypeError: AndroidAuthenticatedManager.onAuthenticated is not a function\", source: http://HidenURL:5000/Account/Authenticated (14)\n</code></pre>\n\n<p>What do you think about it? I tried several little changes and searched about it on internet but nothing fixes it...</p>\n\n<p>Thanks for your reading,\nTanguy.</p>\n"}, {"tags": ["kotlin", "parallel-processing", "sequence"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1556111326, "post_id": 55830626, "comment_id": 98326234, "body": "Is the 3rd function supposed to be on an Iterable or a Sequence?"}, {"owner": {"reputation": 423, "user_id": 6849045, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba8cc095ecdee411223b06f5cfef4f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Typhaon", "link": "https://stackoverflow.com/users/6849045/typhaon"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1556113062, "post_id": 55830626, "comment_id": 98327476, "body": "Yeah, thanks, my bad"}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 6849045, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba8cc095ecdee411223b06f5cfef4f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Typhaon", "link": "https://stackoverflow.com/users/6849045/typhaon"}, "edited": false, "score": 0, "creation_date": 1556113899, "post_id": 55831059, "comment_id": 98327986, "body": "Fair point. That might be a problem. What if I want to fire all the async blocks, but want to await them lazily. would something like  <code>suspend fun &lt;T, R&gt; Sequence&lt;T&gt;.parrallelMap(block: suspend (T) -&gt; R) =         asIterable().mapAsync(block).asSequence().map { runBlocking { it.await() }}</code> work you think? Edit: mapAsync is <code>suspend fun &lt;T, R&gt; Iterable&lt;T&gt;.mapAsync(block: suspend(T) -&gt; R) =     coroutineScope { map { async { block(it) } } }</code>"}, {"owner": {"reputation": 423, "user_id": 6849045, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba8cc095ecdee411223b06f5cfef4f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Typhaon", "link": "https://stackoverflow.com/users/6849045/typhaon"}, "edited": false, "score": 1, "creation_date": 1556116076, "post_id": 55831059, "comment_id": 98329541, "body": "Thinking about this. Does this also mean that the parallelForEach doesn&#39;t do anything parallel at all?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 423, "user_id": 6849045, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba8cc095ecdee411223b06f5cfef4f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Typhaon", "link": "https://stackoverflow.com/users/6849045/typhaon"}, "edited": false, "score": 0, "creation_date": 1556188748, "post_id": 55831059, "comment_id": 98356704, "body": "Ye, <code>parallelForEach</code> is exactly the same as <code>parrallelMap</code> here"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 3, "last_activity_date": 1556111962, "creation_date": 1556111962, "answer_id": 55831059, "question_id": 55830626, "link": "https://stackoverflow.com/questions/55830626/how-to-implement-parallel-mapping-for-sequences-in-kotlin/55831059#55831059", "title": "How to implement parallel mapping for sequences in kotlin", "body": "<p>There is a problem with the core semantics of parallel execution for lazy sequences. Your current implementation does not start <code>block(it)</code> until the resulting sequence is iterated:</p>\n\n<pre><code>suspend fun &lt;T, R&gt; Sequence&lt;T&gt;.parallelMap(block: suspend(T) -&gt; R) =\n    coroutineScope { map { async { block(it) } }.map { it.await() } }\n</code></pre>\n\n<p>Consider the following example:</p>\n\n<pre><code>sequenceOf(1, 2, 3).parallelMap { it * it }.forEach { println(it) }\n</code></pre>\n\n<p>For this sample the order of execution will be</p>\n\n<pre><code>val p1 = async { 1 * 1 } \nval r1 = p1.await()\nprintln(r1)\nval p2 = async { 2 * 2 } \nval r2 = p2.await()\nprintln(r2)\nval p3 = async { 3 * 3 } \nval r3 = p3.await()\nprintln(r3)\n</code></pre>\n\n<p>Note that the execution of the mapping operations is sequientional, not parallel.</p>\n\n<p>What the compiler tells you is that the lambda of <code>Sequence&lt;T&gt;.map {}</code> is performed lazily on-demand outside of the context of the call (read: outside of your coroutine), so you can't use the coroutine you are currently in.</p>\n\n<p>Frankly, I am not sure how one can both perform lazy computation and do it in parallel.</p>\n"}], "owner": {"reputation": 423, "user_id": 6849045, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba8cc095ecdee411223b06f5cfef4f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Typhaon", "link": "https://stackoverflow.com/users/6849045/typhaon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1303, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556117500, "creation_date": 1556110742, "last_edit_date": 1556117500, "question_id": 55830626, "link": "https://stackoverflow.com/questions/55830626/how-to-implement-parallel-mapping-for-sequences-in-kotlin", "title": "How to implement parallel mapping for sequences in kotlin", "body": "<p>I'm trying to implement a parallel implementation for both Iterable and Sequence in Kotlin. I got a little file, it consists of 4 extension functions, but the third one gives me an compiler error:</p>\n\n<pre><code>suspend fun &lt;T, R&gt; Iterable&lt;T&gt;.parallelMap(block: suspend(T) -&gt; R) =\n    coroutineScope { map { async { block(it) } }.map { it.await() } }\n\nsuspend fun &lt;T&gt; Iterable&lt;T&gt;.parallelForEach(block: suspend (T) -&gt; Unit) =\n    coroutineScope { map { async { block(it) } }.forEach { it.await() } }\n\nsuspend fun &lt;T, R&gt; Sequence&lt;T&gt;.parallelMap(block: suspend(T) -&gt; R) =\n    coroutineScope { map { async { block(it) } }.map { it.await() } }\n\nsuspend fun &lt;T&gt; Sequence&lt;T&gt;.parallelForEach(block: suspend (T) -&gt; Unit) =\n    coroutineScope { map { async { block(it) } }.forEach { it.await() } }\n</code></pre>\n\n<p>The compiler comes back and says that suspension functions can only be called inside suspension functions. Is there a way to implement this?</p>\n\n<p>Edit: fixed bad copy/paste</p>\n\n<p>Edit2: I thought of an implementation:</p>\n\n<pre><code>suspend fun &lt;T, R&gt; Sequence&lt;T&gt;.parrallelMap(block: suspend (T) -&gt; R) =\n        asIterable().map { coroutineScope { async { block(it) } } }\n              .asSequence().map { runBlocking { it.await() } }\n</code></pre>\n\n<p>I was hoping that this would fire all the suspending functions and await them lazily. I'm just not sure if this is safe, or this saves time or not.</p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 9317765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fcffcb584bc99c2850cfb2dd7d7e25?s=128&d=identicon&r=PG&f=1", "display_name": "marcnaddaf", "link": "https://stackoverflow.com/users/9317765/marcnaddaf"}, "is_accepted": true, "score": 1, "last_activity_date": 1556113678, "creation_date": 1556113678, "answer_id": 55831649, "question_id": 55830582, "link": "https://stackoverflow.com/questions/55830582/when-kotlin-call-subclass-of-abstract-java-code-from-different-module-in-android/55831649#55831649", "title": "when kotlin call subclass of abstract java code from different module in android studio IllegalAccessError occur", "body": "<p>In Kotlin, a class and its ancestors must all be accessible from the using class. Even though it is allowed in Java, invoking this code from Kotlin will produce an java.lang.IllegalAccessError.</p>\n\n<p>If you check the decompiled Kotlin Bytecode for the problematic call, you get the following in Java:</p>\n\n<pre><code>(new Invoker()).visit((AbstractClass)(new SubClass()));\n</code></pre>\n\n<p>There's an explicit cast to <code>AbstractClass</code> which is causing the error since it's inaccessible from the calling code. Even though this cast is unnecessary in Java, it is introduced by Kotlin in the compiled bytecode which makes such a call fail. There is no way around this other than making <code>AbstractClass</code> public.</p>\n"}], "owner": {"reputation": 23, "user_id": 11405073, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LQZstNNLeUs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfLgM4FfwPAjN5rwEQ5lq5zw7T2Jw/mo/photo.jpg?sz=128", "display_name": "owl", "link": "https://stackoverflow.com/users/11405073/owl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 55831649, "answer_count": 1, "score": 1, "last_activity_date": 1556113678, "creation_date": 1556110575, "question_id": 55830582, "link": "https://stackoverflow.com/questions/55830582/when-kotlin-call-subclass-of-abstract-java-code-from-different-module-in-android", "title": "when kotlin call subclass of abstract java code from different module in android studio IllegalAccessError occur", "body": "<pre><code>//module A in java\n\nabstract class AbstractClass {\n    public abstract void foo();\n}\n\npublic class SubClass extends AbstractClass {\n    @Override\n    public void foo() {\n        Log.v(\"x\",\"-----------------\");\n    }\n}\n\npublic class Invoker {\n    public void visit(AbstractClass a){\n        a.foo();\n    }\n}\n\n\n\n//module B in kotlin\n\nSubClass().foo()            // it works\nInvoker().visit(SubClass()) // java.lang.IllegalAccessError occur\n</code></pre>\n\n<p>add public in front of AbstractClass will solve the problem, but i don't want AbstractClass accessed by others. Is there any other way?</p>\n"}, {"tags": ["android", "arraylist", "kotlin", "android-adapter", "android-dialogfragment"], "comments": [{"owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556111783, "post_id": 55830110, "comment_id": 98326573, "body": "1. Please share the MyDialog.createInstance() body 2. Where is MyFragment being used?"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "reply_to_user": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556122336, "post_id": 55830110, "comment_id": 98333359, "body": "@RishabhJain What do you mean by the <code>MyDialog.createInstance() body</code>?"}, {"owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556217336, "post_id": 55830110, "comment_id": 98372703, "body": "where did you define the createInstance() method in MyDialog"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "reply_to_user": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556218233, "post_id": 55830110, "comment_id": 98373095, "body": "In <code>onCreateDialog</code>"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "reply_to_user": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556379736, "post_id": 55830110, "comment_id": 98422970, "body": "Where am I supposed to define it if you believe that&#39;s wrong?"}, {"owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556524179, "post_id": 55830110, "comment_id": 98454141, "body": "Can you post the body of the createInstance() method?"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "reply_to_user": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556539510, "post_id": 55830110, "comment_id": 98461585, "body": "Sure. Just added that, I forgot to include that before."}, {"owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556544367, "post_id": 55830110, "comment_id": 98464261, "body": "I&#39;m not able to understand the hierarchy of your app. You have a DialogFragment that has 3 tabs. In each tab, you want to show the same DialogFragment?"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "reply_to_user": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556544427, "post_id": 55830110, "comment_id": 98464293, "body": "No, I don&#39;t. Read the <b>Expected result</b> section, that&#39;s what I want."}, {"owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556544687, "post_id": 55830110, "comment_id": 98464436, "body": "But which fragment do you want to show in the tab?"}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "reply_to_user": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1556544749, "post_id": 55830110, "comment_id": 98464469, "body": "<b>Tab A</b> with <b>Description A</b>; <b>Tab B</b> with <b>Description B</b>; <b>Tab C</b> with <b>Description C</b>"}, {"owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "reply_to_user": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "edited": false, "score": 0, "creation_date": 1556544829, "post_id": 55830110, "comment_id": 98464528, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/192571/discussion-between-rishabh-jain-and-macaronlover\">continue this discussion in chat</a>."}, {"owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "reply_to_user": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 0, "creation_date": 1557002781, "post_id": 55830110, "comment_id": 98622275, "body": "Why leave the chat? The problem hasn&#39;t been solved."}], "owner": {"reputation": 6563, "user_id": 3293579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f186d84e766b05647e6384ade0a046d6?s=128&d=identicon&r=PG&f=1", "display_name": "SD826E", "link": "https://stackoverflow.com/users/3293579/sd826e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556539498, "creation_date": 1556109036, "last_edit_date": 1556539498, "question_id": 55830110, "link": "https://stackoverflow.com/questions/55830110/arraylist-item-undesirably-repeated-in-dialogfragment", "title": "ArrayList item undesirably repeated in DialogFragment", "body": "<p>I'm trying to show different content for different tabs in my <code>DialogFragment</code>, but for some reason the content text keeps repating the first item regardless of the tab selected. The tab names are appearing corretly as expected though.  I believe the issue lies in the <code>DialogFragment</code> class, within the <code>for</code> loop around <code>createInstance</code>, but I don't know what needs to change in that area.</p>\n\n<p><strong>Expected result</strong></p>\n\n<ul>\n<li><strong>Tab A</strong> with <strong>Description A</strong></li>\n<li><strong>Tab B</strong> with <strong>Description B</strong></li>\n<li><strong>Tab C</strong> with <strong>Description C</strong></li>\n</ul>\n\n<p><strong>Current result</strong></p>\n\n<ul>\n<li>All tabs show <strong>Description A</strong></li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/NHpjj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NHpjj.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/PyrYe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PyrYe.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/zRnPZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zRnPZ.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Item class</strong></p>\n\n<pre><code>data class Item (val myDialogTitle: String,\n                 val myDialogDescription: String)\n</code></pre>\n\n<p><strong>Adapter class</strong></p>\n\n<pre><code>class MyDialogAdapter(fm: FragmentManager) : FragmentPagerAdapter(fm) {\n    private var mTitleCollection: MutableList&lt;String&gt; = ArrayList()\n    private var mFragmentCollection: MutableList&lt;Fragment&gt; = ArrayList()\n\n    fun addFragment(title: String, fragment: Fragment) {\n        mTitleCollection.add(title)\n        mFragmentCollection.add(fragment)\n    }\n\n    override fun getPageTitle(position: Int): CharSequence? {\n        return mTitleCollection[position]\n    }\n\n    override fun getItem(position: Int): Fragment {\n        return mFragmentCollection[position]\n    }\n\n    override fun getCount(): Int {\n        return mFragmentCollection.size\n    }\n}\n</code></pre>\n\n<p><strong>DialogFragment class</strong></p>\n\n<pre><code>class MyDialog(val myList: ArrayList&lt;Item&gt;) : DialogFragment() {    \n    private var mText = \"\"\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        return customView\n    }\n\n    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {\n        val b = AlertDialog.Builder(activity)\n                .setTitle(\"Dialog Title\")\n                .setPositiveButton(getString(android.R.string.ok)) { dialog, _ -&gt; dialog.dismiss() }\n\n        val adapter = MyDialogAdapter(childFragmentManager)\n        for (item in myListTitles) {\n            adapter.addFragment(id, MyDialog.createInstance(myListDescriptions[id]))\n        }\n\n        b.setView(customView)\n        return b.create()\n    }\n\n    companion object {\n        fun createInstance(txt: String): MyDialog {\n            val fragment = MyDialog()\n            fragment.mText = txt\n            return fragment\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Fragment class</strong></p>\n\n<pre><code>class MyFragment : androidx.fragment.app.Fragment() {\n    private lateinit var mRecyclerView: RecyclerView\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        return inflater.inflate(R.layout.fragment_rv, container, false)\n    }\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        val v = view\n\n        mRecyclerView = v!!.findViewById&lt;RecyclerView&gt;(R.id.my_recyclerview)\n\n        mRecyclerView.layoutManager = LinearLayoutManager(activity)\n\n        val myList = ArrayList&lt;Item&gt;()\n\n        val myListTitles = ArrayList&lt;String&gt;()\n        myListTitles.add(\"Tab A\")\n        myListTitles.add(\"Tab B\")\n        myListTitles.add(\"Tab C\")\n\n        val myListDescriptions = ArrayList&lt;String&gt;()\n        myListDescriptions.add(\"Description A\")\n        myListDescriptions.add(\"Description B\")\n        myListDescriptions.add(\"Description C\")\n\n\n        val mAdapter = MyAdapter(myList, childFragmentManager)\n\n        mRecyclerView.adapter = mAdapter\n\n        super.onActivityCreated(savedInstanceState)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "picasso"], "comments": [{"owner": {"reputation": 5192, "user_id": 3084205, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qaFQu.jpg?s=128&g=1", "display_name": "Stanislav Bondar", "link": "https://stackoverflow.com/users/3084205/stanislav-bondar"}, "edited": false, "score": 4, "creation_date": 1556108044, "post_id": 55829753, "comment_id": 98324238, "body": "This is looks like <code>object: Callback{}</code> in Kotlin"}], "answers": [{"tags": [], "owner": {"reputation": 3265, "user_id": 2757664, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/2Lap3.jpg?s=128&g=1", "display_name": "Saeed Entezari", "link": "https://stackoverflow.com/users/2757664/saeed-entezari"}, "is_accepted": true, "score": 14, "last_activity_date": 1588754987, "last_edit_date": 1588754987, "creation_date": 1556108307, "answer_id": 55829880, "question_id": 55829753, "link": "https://stackoverflow.com/questions/55829753/picasso-callback-with-kotlin/55829880#55829880", "title": "Picasso Callback with Kotlin", "body": "<pre><code>Picasso.with(MainActivity::this)\n       .load(imageUrl)\n       .into(imageView, object: com.squareup.picasso.Callback {\n                    override fun onSuccess() {\n                        //set animations here\n\n                    }\n\n                    override fun onError(e: java.lang.Exception?) {\n                        //do smth when there is picture loading error\n                    }\n                })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1156, "user_id": 5962076, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HMDid.jpg?s=128&g=1", "display_name": "Varun Malhotra", "link": "https://stackoverflow.com/users/5962076/varun-malhotra"}, "is_accepted": false, "score": 1, "last_activity_date": 1556108340, "creation_date": 1556108340, "answer_id": 55829889, "question_id": 55829753, "link": "https://stackoverflow.com/questions/55829753/picasso-callback-with-kotlin/55829889#55829889", "title": "Picasso Callback with Kotlin", "body": "<p>Hi here are some different ways that Picasso provides:</p>\n\n<pre><code>Picasso.with(context).load(path).into(imageView);\n</code></pre>\n\n<p>2.create a new file inside our utils package, call it picasso.kt and fill it with simple code below:</p>\n\n<pre><code> public val Context.picasso: Picasso\n    get() = Picasso.with(this)\n</code></pre>\n\n<p>3. While this corresponds to the receiver object we can invoke following code on any Context:</p>\n\n<pre><code>picasso.load(path).into(imageView)\n</code></pre>\n\n<ol start=\"4\">\n<li><p>We can go further and extend ImageView class like:</p>\n\n<pre><code>public fun ImageView.load(path: String, request: (RequestCreator) -&gt; RequestCreator) {\nrequest(getContext().picasso.load(path)).into(this)    }\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1010, "user_id": 5895297, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fmrWqRZOhMU/AAAAAAAAAAI/AAAAAAAAAKE/zakbPXcy-2o/photo.jpg?sz=128", "display_name": "Vinil Prabhu", "link": "https://stackoverflow.com/users/5895297/vinil-prabhu"}, "edited": false, "score": 1, "creation_date": 1573120098, "post_id": 57424878, "comment_id": 103780758, "body": "Thanks was looking for this only"}], "tags": [], "owner": {"reputation": 10683, "user_id": 4286992, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pzdNl.jpg?s=128&g=1", "display_name": "Kapil Rajput", "link": "https://stackoverflow.com/users/4286992/kapil-rajput"}, "is_accepted": false, "score": 12, "last_activity_date": 1565333908, "creation_date": 1565333908, "answer_id": 57424878, "question_id": 55829753, "link": "https://stackoverflow.com/questions/55829753/picasso-callback-with-kotlin/57424878#57424878", "title": "Picasso Callback with Kotlin", "body": "<p>In Latest version <code>onError</code> recives an <code>Exception</code> as parameter and uses <code>get()</code> instead of <code>with()</code> :</p>\n\n<pre><code>  Picasso.get()\n  .load(imageUrl)\n  .into(imageView, object :Callback{\n   override fun onSuccess() {\n   Log.d(TAG, \"success\")\n   }\n\n   override fun onError(e: Exception?) {\n   Log.d(TAG, \"error\")\n   }\n   })\n</code></pre>\n\n<p>and On the previous version </p>\n\n<pre><code>   Picasso.with(MainActivity::this)\n   .load(imageUrl)\n   .into(imageView, object: Callback {\n                override fun onSuccess() {\n                   Log.d(TAG, \"success\")\n                }\n\n                override fun onError() {\n                  Log.d(TAG, \"error\")\n                }\n            })\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 7210372, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T2JV9T-a4DU/AAAAAAAAAAI/AAAAAAAAEMI/pLEFuSSFgBg/photo.jpg?sz=128", "display_name": "Valentin Garcia", "link": "https://stackoverflow.com/users/7210372/valentin-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6651, "favorite_count": 1, "accepted_answer_id": 55829880, "answer_count": 3, "score": 7, "last_activity_date": 1588754987, "creation_date": 1556107882, "question_id": 55829753, "link": "https://stackoverflow.com/questions/55829753/picasso-callback-with-kotlin", "title": "Picasso Callback with Kotlin", "body": "<p>I'm making an Android app with Kotlin, and need to use Picasso to download images. I saw this Java code below for setting animations to images, but I can't convert it to Kotlin, cause I don't know how to set Callback in \"into\" function.</p>\n\n<pre><code>Picasso.with(MainActivity.this)\n       .load(imageUrl)\n       .into(imageView, new com.squareup.picasso.Callback() {\n                    @Override\n                    public void onSuccess() {\n                        //set animations here\n\n                    }\n\n                    @Override\n                    public void onError() {\n                        //do smth when there is picture loading error\n                    }\n                });\n</code></pre>\n\n<p>Can someone help me ?</p>\n\n<p>My actual code :</p>\n\n<pre><code>Picasso.with(context)\n       .load(url)\n       .into(imageDiapo, com.squareup.picasso.Callback)\n</code></pre>\n"}, {"tags": ["java", "kotlin", "overloading", "type-inference", "overload-resolution"], "comments": [{"owner": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "edited": false, "score": 0, "creation_date": 1556123271, "post_id": 55829074, "comment_id": 98333804, "body": "The <code>Select</code> is essentially a <code>Query</code> so the method you want to use cannot be resolved correctly. Try to change the method signature so it does&#39;t depend on the passed argument to resolve the method."}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "edited": false, "score": 0, "creation_date": 1556123751, "post_id": 55829074, "comment_id": 98334065, "body": "@KeivanEsbati could you elaborate on &quot;so the method you want to use cannot be resolved correctly&quot;? I can see that that&#39;s the case, I&#39;d prefer to understand WHY it is the case. Even if <code>Select</code> is a <code>Query</code>, the reverse doesn&#39;t hold true. So why aren&#39;t the non-<code>Select</code> queries bound to the non-<code>Select</code> method?"}, {"owner": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "edited": false, "score": 0, "creation_date": 1556126621, "post_id": 55829074, "comment_id": 98335371, "body": "I added a reference and post it as an answer so you can read a little more about it if you like."}, {"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 2, "creation_date": 1556186614, "post_id": 55829074, "comment_id": 98355455, "body": "jOOQ distinguishes between <code>fetch</code> (produces a result) and <code>execute</code> (produces an update count). Why do you want to use the same term for both, instead? At some point, overloading is a much bigger source of pain than convenience... Note, you probably want to reference <code>ResultQuery&lt;T&gt;</code> instead of <code>Select&lt;T&gt;</code> for a more generic solution."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1556210543, "post_id": 55829074, "comment_id": 98369631, "body": "if you extract your code into its own function, e.g. <code>fun q() : DSLContext.() -&gt; Query = { ... }</code> or <code>fun s() : DSLContext.() -&gt; Select</code> and pass those functions to your <code>execute</code> it will (probably) work (not yet tested)... probably even the following could work: <code>fun &lt;T&gt; dsl(dsl : DSLContext.() -&gt; T) = dsl</code> and call <code>manipulate.execute(dsl { ... })</code>... does it work? ;-) Maybe you will sooner or later end up here: <a href=\"https://stackoverflow.com/questions/42916801\">How does type erasure work in Kotlin?</a> or here: <a href=\"https://stackoverflow.com/questions/52092214\">Kotlin type erasure - ... generics</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "is_accepted": false, "score": 0, "last_activity_date": 1556126551, "creation_date": 1556126551, "answer_id": 55835471, "question_id": 55829074, "link": "https://stackoverflow.com/questions/55829074/why-doesnt-this-overload/55835471#55835471", "title": "Why doesn&#39;t this overload?", "body": "<p>The <code>Select</code> is essentially <code>Query</code> so the method you want to use cannot be inferred correctly.</p>\n\n<blockquote>\n  <p>The compiler resolves everything about the method invocation without paying any attention to the generic constraints involved until the very last moment \u2013 where it notices that the chosen method isn\u2019t valid, and fails with an error.</p>\n</blockquote>\n\n<p>This problem occur with <strong>generics</strong>, the compiler recognize the methods as two different method but when trying to resolve the method it may not find the correct method based on available data. If you want to know why check this article, <a href=\"https://codeblog.jonskeet.uk/2010/10/28/overloading-and-generic-constraints/\" rel=\"nofollow noreferrer\">Overloading and Generic constraints</a> by Jon Skeet. </p>\n"}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1556126551, "creation_date": 1556105504, "last_edit_date": 1556109344, "question_id": 55829074, "link": "https://stackoverflow.com/questions/55829074/why-doesnt-this-overload", "title": "Why doesn&#39;t this overload?", "body": "<p>Writing on a Jooq helper class. (More business-specific methods to be added as soon as I've figured this out ...)</p>\n\n<pre><code>import org.jooq.*\nimport org.springframework.stereotype.Repository\nimport javax.inject.Inject\nimport javax.inject.Provider\n\n/**A helper class facilitating database manipulations.\n * Uses jOOQ for its manipulations.\n * Relies on the application context being properly initialized s.t. Spring creates and injects the correct\n * [DSLContext].*/\n@Repository\nclass DatabaseManipulator{\n\n    private val provider: Provider&lt;DSLContext&gt;\n    private val create:DSLContext\n        get() = provider.get()\n\n    @Inject\n    constructor(provider: Provider&lt;DSLContext&gt;) {\n        this.provider = provider\n    }\n\n\n    /**Executes non-[Select]-type SQL queries on the database.\n     * Does not perform any kind of checks and trusts the client to know what they're doing.\n     * @param query the query to be executed.\n     *\n     * @return depending on the type of the [query]:\n     *      &lt;ul&gt;\n     *      &lt;li&gt; Delete : the number of deleted records&lt;/li&gt;\n     *      &lt;li&gt; Insert : the number of inserted records&lt;/li&gt;\n     *      &lt;li&gt; Merge : result may be meaningless&lt;/li&gt;\n     *      &lt;li&gt; Truncate : result may be meaningless&lt;/li&gt;\n     *      &lt;li&gt; Update : the number of updated records&lt;/li&gt;\n     *      &lt;/ul&gt;\n     */\n    fun execute(query:DSLContext.()-&gt; Query):Int{\n        return create.query().execute()\n    }\n\n    /**Executes [Select]-type [query] and returns its result*/\n    fun &lt;T:Record&gt; execute(query:DSLContext.()-&gt;Select&lt;T&gt;):Result&lt;T&gt;{\n        return create.query().fetch()\n    }\n}\n</code></pre>\n\n<p>So far, so good. Now let's add some tests</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner::class)\n@SpringBootTest\n@Transactional\nclass DatabaseManipulatorIT {\n\n    @Inject\n    private lateinit var manipulate:DatabaseManipulator\n\n    @Inject\n    private lateinit var em:EntityManager\n\n    @Test\n    fun executeSelectQuery() {\n        //given\n        val expectedNumberOfOrganizations = em.createQuery(\"SELECT COUNT (o) FROM Organization o\")\n            .singleResult as Long\n\n        //when\n        val reportedNumberOfOrganizations = manipulate.execute {\n            selectCount().from(ORGANIZATION)\n        }.first().value1().toLong()\n\n        //then\n        assertThat(reportedNumberOfOrganizations).isEqualTo(expectedNumberOfOrganizations)\n    }\n\n    @Test\n    fun executeNonSelectQuery() {\n        //given\n        val expectedNumberOfDeletions = em.createQuery(\n            \"SELECT COUNT (o) FROM Organization o WHERE o.usageCreditLimited = true\"\n        ).singleResult as Long\n\n        //when\n        val actualNumberOfDeletions = manipulate.execute {(\n            deleteFrom(ORGANIZATION)\n                .where(ORGANIZATION.USAGECREDITLIMITED.eq(true))\n            ) as Query\n        }\n\n        //then\n        assertThat(actualNumberOfDeletions).isEqualTo(expectedNumberOfDeletions)\n\n    }\n}\n</code></pre>\n\n<p>That fails to compile because</p>\n\n<pre><code>Error:(50, 50) Kotlin: Type inference failed: fun &lt;T : Record&gt; execute(query: DSLContext.() -&gt; Select&lt;T&gt;): Result&lt;T&gt;\ncannot be applied to\n(DSLContext.() -&gt; DeleteConditionStep&lt;OrganizationRecord!&gt;!)\nError:(50, 58) Kotlin: Type mismatch: inferred type is DSLContext.() -&gt; DeleteConditionStep&lt;OrganizationRecord!&gt;! but DSLContext.() -&gt; Select&lt;???&gt; was expected\n</code></pre>\n\n<p>No shit, I don't <em>want</em> you to use that method, I want you to use the <em>other</em>.</p>\n\n<p>Let's try making that explicit:</p>\n\n<pre><code>//when\nval actualNumberOfDeletions = manipulate.execute {(\n    deleteFrom(ORGANIZATION)\n        .where(ORGANIZATION.USAGECREDITLIMITED.eq(true))\n    ) as Query\n}\n</code></pre>\n\n<p>still fails to compile the second test case because </p>\n\n<pre><code>Error:(50, 50) Kotlin: Type inference failed: fun &lt;T : Record&gt; execute(query: DSLContext.() -&gt; Select&lt;T&gt;): Result&lt;T&gt;\ncannot be applied to\n(DSLContext.() -&gt; Query)\nError:(50, 58) Kotlin: Type mismatch: inferred type is DSLContext.() -&gt; Query but DSLContext.() -&gt; Select&lt;???&gt; was expected\n</code></pre>\n\n<p>How do I get Kotlin to call the correct method?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 11334059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OrFw7.png?s=128&g=1", "display_name": "Juna", "link": "https://stackoverflow.com/users/11334059/juna"}, "is_accepted": true, "score": 0, "last_activity_date": 1556116921, "creation_date": 1556116921, "answer_id": 55832784, "question_id": 55829027, "link": "https://stackoverflow.com/questions/55829027/how-can-i-fix-these-errors-to-upload-some-files-into-server-related-with-kotlin/55832784#55832784", "title": "How can I fix these errors to upload some files into server related with kotlin suspend function?", "body": "<p>I found main reason above issue.\nBecause the \"content-type\" is setted \"application/json\" the server is not conduct this data.\nSo I removed \"Content-type\"option in header.\nIt works well.\nOriginal code.</p>\n\n<pre><code>headers: {\n    'Content-Type': 'multipart/form-data',\n    'Accept': 'application/json'\n  },\n</code></pre>\n\n<p>Now</p>\n\n<pre><code>headers: {\n    'Accept': 'application/json'\n  },\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11334059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OrFw7.png?s=128&g=1", "display_name": "Juna", "link": "https://stackoverflow.com/users/11334059/juna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 55832784, "answer_count": 1, "score": 0, "last_activity_date": 1556116921, "creation_date": 1556105320, "question_id": 55829027, "link": "https://stackoverflow.com/questions/55829027/how-can-i-fix-these-errors-to-upload-some-files-into-server-related-with-kotlin", "title": "How can I fix these errors to upload some files into server related with kotlin suspend function?", "body": "<p>I had several issues to upload my images to server.\nThen I used kotlin suspend function to implement pipeline.\nBut I met server error following.\n<a href=\"https://i.stack.imgur.com/dd8g9.png\" rel=\"nofollow noreferrer\">my errors</a></p>\n\n<p>This is my code.</p>\n\n<pre><code>fun Route.customerUploadImage() {\nlogger.info { \"Receiveing Image request\" };\npost(\"/me/image\") {\n    logger.info { \"Receiveing Image POST request\" };\n    call.customerService.saveProfileImage(call.receiveMultipart(), loggedUser().userId!!)\n    call.respondStatus(HttpStatusCode.Accepted)\n}\n</code></pre>\n\n<p>This is the code of customerUploadImage in customerService().</p>\n\n<pre><code>suspend fun saveProfileImage(multipart: MultiPartData, userId: Long) {\n    logger.info { \"Receving Image Request!!!!\" }\n    multipart.forEachPart { part -&gt;\n        (part as? PartData.FileItem)?.run {\n            logger.info { this.headers.get(\"Content-Type\") }\n            logger.info { \"save image, name: $name, file name: $originalFileName\" }\n            val imageName = allowedProfileImages.firstOrNull { it == name } ?: throw AppException(ErrorCode.INVALID_IMAGE_NAME)\n            bao.put(streamProvider(), \"profile/$userId-${imageName.toLowerCase()}\", blobContentType).also { resourceUrl -&gt;\n                logger.info { \"resourceUrl - $resourceUrl\" }\n                dao.get(Customer::class, userId)?.also { customer -&gt;\n                    logger.info { \"customer - $customer\" }\n                    dao.put(customer.copy(images = setOf(resourceUrl, *customer.images.toTypedArray())))\n                }\n            }\n        }\n        part.dispose()\n    }\n}\n</code></pre>\n\n<p>I found server could not receive uploaded images file with log info.\nSo How can I fix these errors?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 241, "user_id": 10775846, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AvDiuifRnCQ/AAAAAAAAAAI/AAAAAAAAAYs/CSiNpPEWDZA/photo.jpg?sz=128", "display_name": "Rajiv Reddy", "link": "https://stackoverflow.com/users/10775846/rajiv-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1556105690, "creation_date": 1556105690, "answer_id": 55829141, "question_id": 55828960, "link": "https://stackoverflow.com/questions/55828960/how-to-refresh-the-main-view/55829141#55829141", "title": "How to refresh the main view?", "body": "<p>try creating a static Constants class or in application class where you can save the current fragment as count or string, and after recreate show the Fragment you saved in the above mentions class.</p>\n"}, {"tags": [], "owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1556106841, "creation_date": 1556106841, "answer_id": 55829449, "question_id": 55828960, "link": "https://stackoverflow.com/questions/55828960/how-to-refresh-the-main-view/55829449#55829449", "title": "How to refresh the main view?", "body": "<p>You can save the fragment number in SharedPreference. But recreating the activity is the wrong approach in my opinion. You should just reload all the data in the current fragment instead.</p>\n"}, {"tags": [], "owner": {"reputation": 581, "user_id": 9177766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVFHjniLCfo/AAAAAAAAAAI/AAAAAAAAADQ/krDE-b5fbKA/photo.jpg?sz=128", "display_name": "Romain Goutte-Fangeas", "link": "https://stackoverflow.com/users/9177766/romain-goutte-fangeas"}, "is_accepted": false, "score": 0, "last_activity_date": 1556107217, "creation_date": 1556107217, "answer_id": 55829580, "question_id": 55828960, "link": "https://stackoverflow.com/questions/55828960/how-to-refresh-the-main-view/55829580#55829580", "title": "How to refresh the main view?", "body": "<p>I'll suggest you to see this documentation that explain how to save UI state: <a href=\"https://developer.android.com/topic/libraries/architecture/saving-states\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/libraries/architecture/saving-states</a></p>\n\n<p>In my opinion ViewModel can be a good choice for your problem, coupled with LiveData. </p>\n\n<p>ViewModel: <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/libraries/architecture/viewmodel</a></p>\n\n<p>LiveData: <a href=\"https://developer.android.com/topic/libraries/architecture/livedata\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/libraries/architecture/livedata</a></p>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 6902588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4606eecefbb5d50527ef17bf732c5f3?s=128&d=identicon&r=PG&f=1", "display_name": "leimenghao", "link": "https://stackoverflow.com/users/6902588/leimenghao"}, "is_accepted": false, "score": 0, "last_activity_date": 1556108258, "last_edit_date": 1556108258, "creation_date": 1556107883, "answer_id": 55829754, "question_id": 55828960, "link": "https://stackoverflow.com/questions/55828960/how-to-refresh-the-main-view/55829754#55829754", "title": "How to refresh the main view?", "body": "<pre><code>public class MainActivity extends AppCompatActivity {\nprivate int fragmentIndex = 0;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    Button button = findViewById(R.id.btn_next);\n    button.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            fragmentIndex++;\n            if (fragmentIndex &gt;= 3) {\n                fragmentIndex = 0;\n            }\n            showFragment(fragmentIndex);\n        }\n    });\n    //get the index saved\n    if (savedInstanceState != null) {\n        fragmentIndex = savedInstanceState.getInt(\"index\");\n    }\n    showFragment(fragmentIndex);\n}\n\n//override this function to save fragment index. This function will be called when activity is destroyed.\n//And when activity is recreated, you can get the index from the savedInstanceState as code above.\n@Override\nprotected void onSaveInstanceState(Bundle outState) {\n    super.onSaveInstanceState(outState);\n    outState.putInt(\"index\", fragmentIndex);\n}\n\n\n\nprivate void showFragment(int index) {\n    Fragment fragment = SimpleFragment.createFragment(String.valueOf(index));\n    getSupportFragmentManager().beginTransaction().replace(R.id.container, fragment).commit();\n}\n\npublic static class SimpleFragment extends Fragment {\n    public static SimpleFragment createFragment(String index) {\n        SimpleFragment fragment = new SimpleFragment();\n        Bundle bundle = new Bundle();\n        bundle.putString(\"index\", index);\n        fragment.setArguments(bundle);\n        return fragment;\n    }\n\n    @Nullable\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        View rootView = inflater.inflate(R.layout.fragment_simple, container, false);\n        TextView indexView = rootView.findViewById(R.id.tv_index);\n        String index = getArguments().getString(\"index\");\n        indexView.setText(index);\n        return rootView;\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>You can test my code with or without overriding the <code>onSaveInstanceState</code> function by rotating device witch makes activity recreate</p>\n"}], "owner": {"reputation": 1061, "user_id": 2072762, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/ddeev.jpg?s=128&g=1", "display_name": "J.M.J", "link": "https://stackoverflow.com/users/2072762/j-m-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1556110932, "creation_date": 1556105132, "last_edit_date": 1556110932, "question_id": 55828960, "link": "https://stackoverflow.com/questions/55828960/how-to-refresh-the-main-view", "title": "How to refresh the main view?", "body": "<p>I have in my activity 3 fragments which each is numbered like 1,2 &amp; 3. It's kind like a step activity ; if fragment 1 is done, the view content concerned will be replaced by the second fragment and it is the same for frgs. 2 &amp; 3.</p>\n\n<p>I have in the possibility in my action bar to change the app. language and when I change it I need to refresh the concerned layout with the new ressources and for that I use :</p>\n\n<pre><code>   private fun refreshView() {\n        this.recreate()\n   }\n</code></pre>\n\n<p>My pb. is when the activity is recreated and I'm in the second or the third fragment, the activity is returned to the first one.</p>\n\n<p>How should I fix this ? and is there a solution to refresh the view without recreating the activity ?</p>\n"}, {"tags": ["kotlin", "android-room"], "comments": [{"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556102943, "post_id": 55828056, "comment_id": 98321140, "body": "i guess the problem comes with the list, cause its an interface and has therefore no constructor"}, {"owner": {"reputation": 13, "user_id": 11324954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdf248d7a7b05c29b07248176015811?s=128&d=identicon&r=PG&f=1", "display_name": "\u0415\u0433\u043e\u0440 \u0413\u043b\u0443\u0445\u043e\u0432", "link": "https://stackoverflow.com/users/11324954/%d0%95%d0%b3%d0%be%d1%80-%d0%93%d0%bb%d1%83%d1%85%d0%be%d0%b2"}, "reply_to_user": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556104795, "post_id": 55828056, "comment_id": 98322289, "body": "@IEE1394 what needs to be fixed?"}, {"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556123224, "post_id": 55828056, "comment_id": 98333793, "body": "sorry i dont know andriod-room .. but maybe try some specific list e.g. <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-array-list/index.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/&hellip;</a>"}, {"owner": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "edited": false, "score": 0, "creation_date": 1556167426, "post_id": 55828056, "comment_id": 98346715, "body": "Can you clean up your code?"}, {"owner": {"reputation": 13, "user_id": 11324954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdf248d7a7b05c29b07248176015811?s=128&d=identicon&r=PG&f=1", "display_name": "\u0415\u0433\u043e\u0440 \u0413\u043b\u0443\u0445\u043e\u0432", "link": "https://stackoverflow.com/users/11324954/%d0%95%d0%b3%d0%be%d1%80-%d0%93%d0%bb%d1%83%d1%85%d0%be%d0%b2"}, "reply_to_user": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "edited": false, "score": 0, "creation_date": 1556207682, "post_id": 55828056, "comment_id": 98368256, "body": "@musooff I do not understand"}, {"owner": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "edited": false, "score": 0, "creation_date": 1556242376, "post_id": 55828056, "comment_id": 98380223, "body": "@\u0415\u0433\u043e\u0440\u0413\u043b\u0443\u0445\u043e\u0432 can you remove unrelated code lines. Like, you have so many comment outs <code>&#47;&#47;</code>. Your <code>Book</code> class doesn&#39;t have closing brackets, doesn&#39;t have <code>@Entity</code> annotation."}], "owner": {"reputation": 13, "user_id": 11324954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdf248d7a7b05c29b07248176015811?s=128&d=identicon&r=PG&f=1", "display_name": "\u0415\u0433\u043e\u0440 \u0413\u043b\u0443\u0445\u043e\u0432", "link": "https://stackoverflow.com/users/11324954/%d0%95%d0%b3%d0%be%d1%80-%d0%93%d0%bb%d1%83%d1%85%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556102190, "creation_date": 1556102190, "question_id": 55828056, "link": "https://stackoverflow.com/questions/55828056/kotlin-room-figure-out-how-to-save-this-field", "title": "kotlin-room figure out how to save this field", "body": "<p>I upload information to the Book class.</p>\n\n<pre><code>tableName = \"Books_name\"  data class Books(  // @Embedded  // val additional_imgs: MutableList&lt;String&gt;,  val adult: Int,  val author: String,  val bookmark: Int,  val chapters: MutableList&lt;Chapter&gt;? = null,  val chapters_total: Int,  // @Embedded  // val comments: MutableList&lt;Comment&gt;,  autoGenerate = true  val id: Int? = null,  val img: String,  val lang: String,  val last_activity: Int,  val n_chapters: Int,  val publisher: String,  val rating: String,  val s_title: String,  val status: String,  val t_title: String,  // val team: Int,  val writer: String,  val year: String  )\n</code></pre>\n\n<p>Book has a class Chapter</p>\n\n<pre><code>//@Entity(tableName = \"Books_name\") \ndata class Chapter( \nval can_read: Boolean, \n// autoGenerate = true \nval id_glavs_list: Int, \nval new: Boolean, \nval status: String, \nval title: String \n)\n</code></pre>\n\n<p>But after adding this class, an error appears. I was looking for information, but everywhere they say that this is corrected by cleaning the project. But it does not help. EROR:</p>\n\n<blockquote>\n  <p>Entities and Pojos must have a usable public constructor. You can have\n  an empty constructor or a constructor whose parameters match the\n  fields (by name and type). - java.util.List</p>\n</blockquote>\n"}, {"tags": ["android", "kotlin", "rx-java2", "android-room", "mvp"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 9827306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O4faKYMV3uE/AAAAAAAAAAI/AAAAAAAAAAs/WZZtN6nkvZY/photo.jpg?sz=128", "display_name": "Ali bana", "link": "https://stackoverflow.com/users/9827306/ali-bana"}, "edited": false, "score": 0, "creation_date": 1556156742, "post_id": 55828564, "comment_id": 98344692, "body": "Thank you for you answer, after see your answer I know the problem about my code. The problem in function insertSample where I user thread and runnable. I not need both of them coz I use rxjava."}, {"owner": {"reputation": 3552, "user_id": 3374428, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c379754f2f4fbc85f6b7474308033933?s=128&d=identicon&r=PG", "display_name": "Joaquim Ley", "link": "https://stackoverflow.com/users/3374428/joaquim-ley"}, "reply_to_user": {"reputation": 111, "user_id": 9827306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O4faKYMV3uE/AAAAAAAAAAI/AAAAAAAAAAs/WZZtN6nkvZY/photo.jpg?sz=128", "display_name": "Ali bana", "link": "https://stackoverflow.com/users/9827306/ali-bana"}, "edited": false, "score": 0, "creation_date": 1556185363, "post_id": 55828564, "comment_id": 98354677, "body": "Exactly that&#39;s what I mean since you already used Rx you <i>should</i> do it like this :). Glad I could help you out."}], "tags": [], "owner": {"reputation": 3552, "user_id": 3374428, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c379754f2f4fbc85f6b7474308033933?s=128&d=identicon&r=PG", "display_name": "Joaquim Ley", "link": "https://stackoverflow.com/users/3374428/joaquim-ley"}, "is_accepted": true, "score": 0, "last_activity_date": 1556105641, "last_edit_date": 1556105641, "creation_date": 1556103796, "answer_id": 55828564, "question_id": 55827956, "link": "https://stackoverflow.com/questions/55827956/data-from-database-always-returns-empty-array-while-using-room-library/55828564#55828564", "title": "Data from database always returns Empty Array while using Room Library", "body": "<p>Have you debugged the origin of the issue? </p>\n\n<p>You should check if your <code>INSERT</code> is working correctly before thinking the error is the <code>QUERY</code> (get)</p>\n\n<p>As you are using Rx already, try to change your insertion code to this:</p>\n\n<pre><code>val sample = Sample(id, name, age)\n\nCompletable.fromAction(() -&gt; mDB.sampleDao()\n                .insertSampel(sample)) // By the way there's a typo here :)\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread()) // If you want to observe\n                .subscribe(/* Handle the result and/or error */);\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 9827306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O4faKYMV3uE/AAAAAAAAAAI/AAAAAAAAAAs/WZZtN6nkvZY/photo.jpg?sz=128", "display_name": "Ali bana", "link": "https://stackoverflow.com/users/9827306/ali-bana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "accepted_answer_id": 55828564, "answer_count": 1, "score": 0, "last_activity_date": 1556105641, "creation_date": 1556101915, "last_edit_date": 1556103342, "question_id": 55827956, "link": "https://stackoverflow.com/questions/55827956/data-from-database-always-returns-empty-array-while-using-room-library", "title": "Data from database always returns Empty Array while using Room Library", "body": "<p>I want ask about my code. Error does not show when I insert data in the database, but when I try to getAll I just get empty array.\nI don't know where it goes wrong. I hope someone can give me a solution to this problem.</p>\n\n<p>This is the first time I'm using the Room Library.</p>\n\n<p>This is my interface for the Dao:</p>\n\n<pre><code>@Dao\ninterface SampleDao {\n@Query(\"SELECT * from Sample\")\nfun getAll():Single&lt;List&lt;Sample&gt;&gt;\n\n@Insert\nfun insertSampel(sample:Sample)\n</code></pre>\n\n<p>This is my singletonDB:</p>\n\n<pre><code>@Database (entities = [Sample::class], version = 1)\nabstract class SingletonDB : RoomDatabase() {\nabstract fun sampleDao():SampleDao\n\ncompanion object {\n    private var INSTANCE:SingletonDB? = null\n\n    fun getInstance(context: Context):SingletonDB?{\n        if (INSTANCE == null){\n            synchronized(SingletonDB::class){\n                INSTANCE = Room.databaseBuilder(context.applicationContext,\n                        SingletonDB::class.java, \"db\")\n                        .build()\n            }\n        }\n        return INSTANCE!!\n    }\n\n    fun destroyInstance() {\n        INSTANCE = null\n    }\n\n}\n</code></pre>\n\n<p>This is the getAllData method from the room database:</p>\n\n<pre><code>  override fun getAll() {\n    mDB.sampleDao().getAll()\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(object : SingleObserver&lt;List&lt;Sample&gt;&gt; {\n                override fun onSuccess(t: List&lt;Sample&gt;) {\n                    Log.i(TAG, t.toString())\n                }\n\n                override fun onSubscribe(d: Disposable) {\n\n                }\n\n                override fun onError(e: Throwable) {\n                    Log.i(TAG, e.message)\n                }\n            })\n}\n</code></pre>\n\n<p>This code is used to insert data in database:</p>\n\n<pre><code>override fun insertSampel(id: Int, name: String, age: Int) {\n    val sample = Sample(id, name, age)\n    Completable.fromAction {\n        Thread {\n            Runnable {\n                mDB.sampleDao().insertSampel(sample)\n            }\n        }\n    }.observeOn(AndroidSchedulers.mainThread())\n            .subscribeOn(Schedulers.io()).subscribe(\n                    object : CompletableObserver {\n                        override fun onComplete() {\n                            Log.i(TAG, \"Complete\")\n                        }\n\n                        override fun onSubscribe(d: Disposable) {\n\n                        }\n\n                        override fun onError(e: Throwable) {\n                            Log.i(TAG, e.message)\n                        }\n                    }\n            )\n}\n</code></pre>\n"}, {"tags": ["java", "post", "kotlin", "spring-webclient"], "comments": [{"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556097718, "post_id": 55826466, "comment_id": 98318176, "body": "i think spring boot is expecting application/json if you try to deserialize it."}, {"owner": {"reputation": 585, "user_id": 3843853, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d6dfd6c7e486fd8896bc1ab2599a6fb3?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun Nagathankandy", "link": "https://stackoverflow.com/users/3843853/arjun-nagathankandy"}, "reply_to_user": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556097866, "post_id": 55826466, "comment_id": 98318256, "body": "Then how it is working for String type ?"}, {"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 1, "creation_date": 1556098055, "post_id": 55826466, "comment_id": 98318369, "body": "content type string could be transfered into a string without a problem .. but how should the framework know, the structure of the text for creating an object of it .. could be json, something binary, xml anything"}, {"owner": {"reputation": 585, "user_id": 3843853, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d6dfd6c7e486fd8896bc1ab2599a6fb3?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun Nagathankandy", "link": "https://stackoverflow.com/users/3843853/arjun-nagathankandy"}, "reply_to_user": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556098543, "post_id": 55826466, "comment_id": 98318659, "body": "Okay. Thank you let me check."}, {"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556099958, "post_id": 55826466, "comment_id": 98319450, "body": "you could use objectMapper yourself to create an object if its JSON"}, {"owner": {"reputation": 585, "user_id": 3843853, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d6dfd6c7e486fd8896bc1ab2599a6fb3?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun Nagathankandy", "link": "https://stackoverflow.com/users/3843853/arjun-nagathankandy"}, "reply_to_user": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556099976, "post_id": 55826466, "comment_id": 98319465, "body": "is there any way to receive it as UUID in text/plain format other than parsing from client side /"}, {"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "edited": false, "score": 0, "creation_date": 1556102668, "post_id": 55826466, "comment_id": 98320989, "body": "i don&#39;t know .. but maybe using a HttpMessageConverter?"}], "answers": [{"tags": [], "owner": {"reputation": 6782, "user_id": 2240409, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b52128e90fc2a35f1540edd4a9ac06f?s=128&d=identicon&r=PG", "display_name": "dazito", "link": "https://stackoverflow.com/users/2240409/dazito"}, "is_accepted": false, "score": 0, "last_activity_date": 1594412997, "creation_date": 1594412997, "answer_id": 62841859, "question_id": 55826466, "link": "https://stackoverflow.com/questions/55826466/spring-webclient-throwing-unsupported-mediatype-exception-when-trying-to-convert/62841859#62841859", "title": "Spring webclient throwing unsupported mediatype exception when trying to convert bodyToMono&lt;UUID&gt;, POST request", "body": "<p>You are getting that exception because the response content type is <code>text/plain;charset=UTF-8</code> and not <code>application/json</code> as stated in the exception message you posted. In the exception message it also says you are trying to parse the response body to a UUID. I am not sure why you want to do it and it will fail because the response body cannot be mapped to a UUID class/object but this is another issue.</p>\n<p>So to solve your main issue at the moment, you need to tell Jackson to accept <code>text/plain</code> as it was <code>application/json</code> and for that you need to set the codec in the <code>exchangeStrategies</code> method when building uo the <code>WebClient</code>.</p>\n<p>Check the code below, it should fix your issue.</p>\n<pre><code>WebClient.builder()\n                .baseUrl(BASE_URL)\n                .clientConnector(new ReactorClientHttpConnector(httpClient))\n                .exchangeStrategies(ExchangeStrategies.builder().codecs(this::acceptedCodecs).build())\n                .build();\n\n\nprivate void acceptedCodecs(ClientCodecConfigurer clientCodecConfigurer) {\n        clientCodecConfigurer.customCodecs().register(new Jackson2JsonEncoder(new ObjectMapper(), TEXT_HTML));\n        clientCodecConfigurer.customCodecs().register(new Jackson2JsonDecoder(new ObjectMapper(), TEXT_HTML));\n    }\n</code></pre>\n"}], "owner": {"reputation": 585, "user_id": 3843853, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d6dfd6c7e486fd8896bc1ab2599a6fb3?s=128&d=identicon&r=PG&f=1", "display_name": "Arjun Nagathankandy", "link": "https://stackoverflow.com/users/3843853/arjun-nagathankandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1970, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1594412997, "creation_date": 1556097287, "question_id": 55826466, "link": "https://stackoverflow.com/questions/55826466/spring-webclient-throwing-unsupported-mediatype-exception-when-trying-to-convert", "title": "Spring webclient throwing unsupported mediatype exception when trying to convert bodyToMono&lt;UUID&gt;, POST request", "body": "<p>I am trying to consume an api using spring-webclient. below is my code.code is in kotlin</p>\n\n<pre><code>webClient.post()\n.uri(\u201csome url\u201d)\n.body(Mono.just(request))\n.retrieve()\n**.bodyToMono&lt;UUID&gt;()**\n.awaitSingle()\n</code></pre>\n\n<p>it is throwing error below</p>\n\n<blockquote>\n  <p>org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type 'text/plain;charset=UTF-8' not supported for bodyType=java.util.UUID</p>\n</blockquote>\n\n<p>If i am trying to convert in to string it is working fine. code below</p>\n\n<pre><code>webClient.post()\n.uri(\u201csome url\u201d)\n.body(Mono.just(request))\n.retrieve()\n**.bodyToMono&lt;String&gt;()**\n.awaitSingle()\n</code></pre>\n\n<p>Response I am expecting from the API is below</p>\n\n<pre><code>\"response\": {\n\"headers\": {\n  \"Content-Type\": \"text/plain;charset=UTF-8\"\n},\n\"status\": 200,\n\"body\": \"6ea4c979-5e05-4e72-9007-c4644bef5672\"\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 84, "user_id": 8490503, "user_type": "registered", "profile_image": "https://graph.facebook.com/1289878214475253/picture?type=large", "display_name": "shadow", "link": "https://stackoverflow.com/users/8490503/shadow"}, "is_accepted": false, "score": 0, "last_activity_date": 1556094067, "creation_date": 1556094067, "answer_id": 55825457, "question_id": 55824589, "link": "https://stackoverflow.com/questions/55824589/how-to-send-string-class-to-activity-in-android/55825457#55825457", "title": "How to send String class to Activity in android", "body": "<p>try this :</p>\n\n<pre><code>socket.on(\"a\", new Emitter.Listener() {\n      @Override\n      public void call(Object... args) {\n        runOnUiThread(new Runnable() {\n          @Override\n          public void run() {\n            Intent intent = new Intent(\"Action\");\n            intent.putExtra(\"KEY\",your_data);\n            LocalBroadcastManager.getInstance(getApplicationContext()).sendBroadcast(intent);\n          }\n        });\n\n      }\n    });\n</code></pre>\n\n<p>and then register the broadcast receive on your activity</p>\n"}], "owner": {"reputation": 27, "user_id": 11339773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ffa3c74c0528e6096d4bec7a8ef2be?s=128&d=identicon&r=PG&f=1", "display_name": "Shaikh Danish", "link": "https://stackoverflow.com/users/11339773/shaikh-danish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556094067, "creation_date": 1556091104, "last_edit_date": 1556091573, "question_id": 55824589, "link": "https://stackoverflow.com/questions/55824589/how-to-send-string-class-to-activity-in-android", "title": "How to send String class to Activity in android", "body": "<p>this is my string where i am added the queuelist.</p>\n\n<pre><code>   private lateinit var str_weighment_data: String\n     fun enable_data_event():Boolean{\n        socket.on(this.data_event_id, object : Emitter.Listener {\n            override fun call(vararg args: Any) {\n\n                receive_data_queue.add(args[0] as String)\n                msg_recieved.set(true)\n                str_weighment_data= receive_data_queue.peek()\n                receive_data_queue.remove()\n            }\n        })\n        return false\n    }\n</code></pre>\n\n<p>and the data <code>str_weighment_data</code> send to the another activity?</p>\n"}, {"tags": ["gradle", "intellij-idea", "kotlin", "micronaut"], "comments": [{"owner": {"reputation": 9828, "user_id": 2000323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a95484b8877a108fc979ce4ee1c9d8?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/2000323/andrey"}, "edited": false, "score": 1, "creation_date": 1556096655, "post_id": 55824374, "comment_id": 98317515, "body": "What IDE version do you use? Try Settings (Preferences on macOS) | Build, Execution, Deployment | Build Tools | Gradle | Runner | <b>Delegate IDE build/run actions to Gradle</b> option. Does it help?"}, {"owner": {"reputation": 646, "user_id": 4786162, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6d7c98f84a3ff4930e2ec24f507d4e5?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Hansen", "link": "https://stackoverflow.com/users/4786162/florian-hansen"}, "reply_to_user": {"reputation": 9828, "user_id": 2000323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a95484b8877a108fc979ce4ee1c9d8?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/2000323/andrey"}, "edited": false, "score": 0, "creation_date": 1556097168, "post_id": 55824374, "comment_id": 98317839, "body": "Hey @Andrey I applied the menu setting you mentioned and now it works. Thank you. If I could, I&#39;d mark your answer ans the solution."}], "answers": [{"tags": [], "owner": {"reputation": 9828, "user_id": 2000323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a95484b8877a108fc979ce4ee1c9d8?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/2000323/andrey"}, "is_accepted": true, "score": 5, "last_activity_date": 1556181780, "creation_date": 1556181780, "answer_id": 55845187, "question_id": 55824374, "link": "https://stackoverflow.com/questions/55824374/intellij-gradle-kotlin-micronaut-changing-files-does-not-re-generate-cla/55845187#55845187", "title": "IntelliJ - Gradle - Kotlin - Micronaut - Changing files does not re-generate classes on &quot;run&quot;", "body": "<p>Enable Settings (Preferences on macOS) | Build, Execution, Deployment | Build Tools | Gradle | Runner | <strong>Delegate IDE build/run actions to Gradle</strong> option. This way IDE will use Gradle to generate and build classes according to logic of Gradle plugins you are using.</p>\n"}], "owner": {"reputation": 646, "user_id": 4786162, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6d7c98f84a3ff4930e2ec24f507d4e5?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Hansen", "link": "https://stackoverflow.com/users/4786162/florian-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 55845187, "answer_count": 1, "score": 2, "last_activity_date": 1556181780, "creation_date": 1556090248, "last_edit_date": 1556091709, "question_id": 55824374, "link": "https://stackoverflow.com/questions/55824374/intellij-gradle-kotlin-micronaut-changing-files-does-not-re-generate-cla", "title": "IntelliJ - Gradle - Kotlin - Micronaut - Changing files does not re-generate classes on &quot;run&quot;", "body": "<p>I have a Kotlin-Micronaut v.1.0.2 project in IntelliJ and with Gradle v5.3.\nMy running application has for example the following controller:</p>\n\n<pre><code>@Controller(\"/api/test\")\nclass TestController {\n\n    @Get\n    fun helloWorld() = \"Hello World\"\n}\n</code></pre>\n\n<p>In case I change any of this code, for example change the return value or add another REST method (e.g. POST), the necessary code will only be generated on a <code>./gradlew clean build</code>. Hitting \"Run\" in IntelliJ will not generate the necessary endpoints for me (e.g. on adding a POST endpoint and trying to curl it, I get \"Method not allowed\" until I clean build).</p>\n\n<p>Do you have any suggestions?</p>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-java2"], "comments": [{"owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "edited": false, "score": 0, "creation_date": 1556088153, "post_id": 55823638, "comment_id": 98313000, "body": "<a href=\"https://stackoverflow.com/questions/36927550/dynamic-delay-value-with-repeatwhen\" title=\"dynamic delay value with repeatwhen\">stackoverflow.com/questions/36927550/&hellip;</a> check this"}, {"owner": {"reputation": 348, "user_id": 5303468, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/c65b201a28adda4004e9a8fecb0faf72?s=128&d=identicon&r=PG&f=1", "display_name": "Anns Rahim", "link": "https://stackoverflow.com/users/5303468/anns-rahim"}, "reply_to_user": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "edited": false, "score": 0, "creation_date": 1556089372, "post_id": 55823638, "comment_id": 98313533, "body": "thanks that one worked"}], "owner": {"reputation": 348, "user_id": 5303468, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/c65b201a28adda4004e9a8fecb0faf72?s=128&d=identicon&r=PG&f=1", "display_name": "Anns Rahim", "link": "https://stackoverflow.com/users/5303468/anns-rahim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "closed_date": 1556090128, "answer_count": 0, "score": 0, "last_activity_date": 1556087270, "creation_date": 1556087270, "question_id": 55823638, "link": "https://stackoverflow.com/questions/55823638/rxjava-kotlin-i-need-to-repeat-a-task-with-dynamic-delay-like-after-2-seconds", "closed_reason": "Duplicate", "title": "RXJAVA ,Kotlin : i need to repeat a task with dynamic delay like after 2 seconds,5 sec,3 sec etc", "body": "<p>I need to repeat the task for several delay in time i tried with repeatWhen also but it delays with the same time.here is the code i tried </p>\n\n<pre><code>Observable.just(1)\n           .repeatWhen {\n               it.delay(getAnswerIntervalTime(),TimeUnit.SECONDS)\n           }\n           .subscribeOn(Schedulers.io())\n           .observeOn(AndroidSchedulers.mainThread())\n           .doOnNext {\n               updateScore(it)\n           }\n          .takeUntil{\n              it&gt;60\n          }\n</code></pre>\n\n<p>Pls give me the best solutions for this\nThanks in advance</p>\n"}, {"tags": ["android", "firebase", "kotlin", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1556087678, "post_id": 55823586, "comment_id": 98312786, "body": "<a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#ofEpochSecond-long-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/time/&hellip;</a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#plusNanos-long-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/time/&hellip;</a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Date.html#Date-long-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/sql/Date.html#Date-lo&zwnj;&#8203;ng-</a>"}], "answers": [{"comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 5591, "user_id": 4806155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh5.googleusercontent.com/-4SelvQhqjYQ/AAAAAAAAAAI/AAAAAAAAJi4/LWDZLdw55CM/photo.jpg?sz=128", "display_name": "wesley franks", "link": "https://stackoverflow.com/users/4806155/wesley-franks"}, "edited": false, "score": 0, "creation_date": 1570749236, "post_id": 55824275, "comment_id": 103022081, "body": "@wesleyfranks Calling a method on an object should be pretty straightforward.  Assuming your Timestamp object is in a val called &quot;ts&quot;:  <code>ts.toDate()</code>"}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": false, "score": 9, "last_activity_date": 1556089924, "creation_date": 1556089924, "answer_id": 55824275, "question_id": 55823586, "link": "https://stackoverflow.com/questions/55823586/how-do-i-convert-a-firestore-date-timestamp-to-date-in-kotlin/55824275#55824275", "title": "How do I convert a Firestore date/Timestamp to Date in Kotlin?", "body": "<p>Call <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/Timestamp.html#toDate()\" rel=\"noreferrer\"><code>toDate()</code></a> on a Firestore <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/Timestamp\" rel=\"noreferrer\">Timestamp</a> object to return a Date object.</p>\n"}, {"tags": [], "owner": {"reputation": 594, "user_id": 7975049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da402b2f4507e138db213ff7839c42b?s=128&d=identicon&r=PG", "display_name": "Alif Al-Gibran", "link": "https://stackoverflow.com/users/7975049/alif-al-gibran"}, "is_accepted": true, "score": 4, "last_activity_date": 1601383908, "last_edit_date": 1601383908, "creation_date": 1556091099, "answer_id": 55824586, "question_id": 55823586, "link": "https://stackoverflow.com/questions/55823586/how-do-i-convert-a-firestore-date-timestamp-to-date-in-kotlin/55824586#55824586", "title": "How do I convert a Firestore date/Timestamp to Date in Kotlin?", "body": "<p>I'm using this code:</p>\n<pre><code>val timestamp = it[&quot;time&quot;] as com.google.firebase.Timestamp\nval milliseconds = timestamp.seconds * 1000 + timestamp.nanoseconds / 1000000\nval sdf = SimpleDateFormat(&quot;MM/dd/yyyy&quot;)\nval netDate = Date(milliseconds)\nval date = sdf.format(netDate).toString()\nLog.d(&quot;TAG170&quot;, date)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 459, "user_id": 11737287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reghE.png?s=128&g=1", "display_name": "thesamoanppprogrammer", "link": "https://stackoverflow.com/users/11737287/thesamoanppprogrammer"}, "is_accepted": false, "score": 2, "last_activity_date": 1580552068, "creation_date": 1580552068, "answer_id": 60015915, "question_id": 55823586, "link": "https://stackoverflow.com/questions/55823586/how-do-i-convert-a-firestore-date-timestamp-to-date-in-kotlin/60015915#60015915", "title": "How do I convert a Firestore date/Timestamp to Date in Kotlin?", "body": "<p>Combined both answers on top and this is what worked for me.</p>\n\n<pre><code>val timestamp = data[TIMESTAMP] as com.google.firebase.Timestamp\n            val date = timestamp.toDate()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 166, "user_id": 12322093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2CX2I.jpg?s=128&g=1", "display_name": "cbear84", "link": "https://stackoverflow.com/users/12322093/cbear84"}, "is_accepted": false, "score": 0, "last_activity_date": 1602224027, "creation_date": 1602224027, "answer_id": 64274798, "question_id": 55823586, "link": "https://stackoverflow.com/questions/55823586/how-do-i-convert-a-firestore-date-timestamp-to-date-in-kotlin/64274798#64274798", "title": "How do I convert a Firestore date/Timestamp to Date in Kotlin?", "body": "<blockquote>\n<p>I used this class to serialize the Timestamp</p>\n</blockquote>\n<pre><code>import com.google.firebase.Timestamp\n\ndata class Article (\nvar createdAt: Timestamp? = Timestamp.now(),\nvar title: String = &quot;&quot;,\nvar image: String = &quot;&quot;\n)\n</code></pre>\n"}], "owner": {"reputation": 594, "user_id": 7975049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5da402b2f4507e138db213ff7839c42b?s=128&d=identicon&r=PG", "display_name": "Alif Al-Gibran", "link": "https://stackoverflow.com/users/7975049/alif-al-gibran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4440, "favorite_count": 0, "accepted_answer_id": 55824586, "answer_count": 4, "score": 4, "last_activity_date": 1602224027, "creation_date": 1556087027, "last_edit_date": 1556090033, "question_id": 55823586, "link": "https://stackoverflow.com/questions/55823586/how-do-i-convert-a-firestore-date-timestamp-to-date-in-kotlin", "title": "How do I convert a Firestore date/Timestamp to Date in Kotlin?", "body": "<p>i'm working with firestore, and getting stuck when i get the timestamp from firestore. how i convert this <code>Timestamp(seconds=1556006384, nanoseconds=994000000)</code> to Date in kotlin.</p>\n\n<p>my minimum SDK is 21 so the  code below doesn't work</p>\n\n<pre><code>val timestamp = it[\"time\"] as com.google.firebase.Timestamp\nval milliseconds = timestamp.seconds * 1000 + timestamp.nanoseconds / 1000000\nval tz = ZoneId.of(\"Asia/Jakarta (UTC+07:00)\")\nval localDateTime = LocalDateTime.ofInstant(Instant.ofEpochMilli(milliseconds), tz)\n</code></pre>\n\n<p>thank you.</p>\n"}, {"tags": ["android", "datetime", "kotlin"], "comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1556084497, "post_id": 55823042, "comment_id": 98311588, "body": "Use <a href=\"https://developer.android.com/reference/java/util/Timer.html#scheduleAtFixedRate(java.util.TimerTask,%20long,%20long)\" rel=\"nofollow noreferrer\">Timer#scheduleAtFixedRate</a>."}], "answers": [{"tags": [], "owner": {"reputation": 5210, "user_id": 1343788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttSYv.jpg?s=128&g=1", "display_name": "Mehul Kabaria", "link": "https://stackoverflow.com/users/1343788/mehul-kabaria"}, "is_accepted": true, "score": 3, "last_activity_date": 1569277643, "last_edit_date": 1569277643, "creation_date": 1556084433, "answer_id": 55823073, "question_id": 55823042, "link": "https://stackoverflow.com/questions/55823042/how-to-update-this-textview-with-the-date-every-second/55823073#55823073", "title": "How to update this textview with the Date every second", "body": "<p>you can update your value using <code>Timer</code> class.</p>\n\n<pre><code>val timer = Timer()\ntimer?.scheduleAtFixedRate(object : TimerTask() {\n    override fun run() {\n        updateTimer()\n    }\n}, 0, 1000)\n\n\nprivate fun updateTimer() {\n    runOnUiThread {\n        resultLabel.text = \"${SimpleDateFormat(\"MM/dd hh:mm\").format(Date())}\"\n    }\n}\n</code></pre>\n\n<p>Here is method to stop Time.</p>\n\n<pre><code>private fun stopTimer() {\n        if (timer != null) {\n            timer?.cancel()\n            timer?.purge()\n            timer = null\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6777, "user_id": 4853133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/3GSSn.jpg?s=128&g=1", "display_name": "Quick learner", "link": "https://stackoverflow.com/users/4853133/quick-learner"}, "is_accepted": false, "score": 0, "last_activity_date": 1556085390, "creation_date": 1556085390, "answer_id": 55823249, "question_id": 55823042, "link": "https://stackoverflow.com/questions/55823042/how-to-update-this-textview-with-the-date-every-second/55823249#55823249", "title": "How to update this textview with the Date every second", "body": "<p>Try this to update textview every second</p>\n\n<p>Handler handler = new Handler();</p>\n\n<pre><code>final Runnable r = new Runnable() {\n    public void run() {\n        tv.append(\"Hello World\");\n        resultLabel.text = \"${SimpleDateFormat(\"MM/dd hh:mm\").format(Date())}\"\n    }\n};\n</code></pre>\n\n<p><strong>Call this to start updating textview every second</strong></p>\n\n<pre><code>handler.postDelayed(r, 1000);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11403214, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s2hQh9sc4Xk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfY1xIHWV3fNLZg9iYhaq9WAIjDvA/mo/photo.jpg?sz=128", "display_name": "Baek Sangjun", "link": "https://stackoverflow.com/users/11403214/baek-sangjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 55823073, "answer_count": 2, "score": -2, "last_activity_date": 1569277643, "creation_date": 1556084235, "last_edit_date": 1556087199, "question_id": 55823042, "link": "https://stackoverflow.com/questions/55823042/how-to-update-this-textview-with-the-date-every-second", "title": "How to update this textview with the Date every second", "body": "<pre><code>resultLabel.text = \"${SimpleDateFormat(\"MM/dd hh:mm\").format(Date())}\"\n</code></pre>\n\n<p>This code is working but I don't know how yu can update <code>resultLabel.text</code> every second .</p>\n\n<p>How could I get update time and date like clock in Kotlin?</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1556086883, "post_id": 55822855, "comment_id": 98312448, "body": "see <a href=\"https://docs.gradle.org/current/userguide/init_scripts.html\" rel=\"nofollow noreferrer\">Initialization Scripts</a>."}, {"owner": {"reputation": 3909, "user_id": 3067542, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bf7e520d66249a250a769cc55effd391?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent F", "link": "https://stackoverflow.com/users/3067542/vincent-f"}, "reply_to_user": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1556095847, "post_id": 55822855, "comment_id": 98316977, "body": "I did already, I don&#39;t see the solution there"}], "answers": [{"tags": [], "owner": {"reputation": 3909, "user_id": 3067542, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bf7e520d66249a250a769cc55effd391?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent F", "link": "https://stackoverflow.com/users/3067542/vincent-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1556097993, "creation_date": 1556097993, "answer_id": 55826722, "question_id": 55822855, "link": "https://stackoverflow.com/questions/55822855/gradle-global-plugin-repository-with-kotlin-dsl/55826722#55826722", "title": "Gradle global plugin repository with Kotlin DSL", "body": "<p>it seems to work with :</p>\n\n<pre><code>settingsEvaluated {\n        settings.pluginManagement {\n            repositories {\n                mavenLocal()\n                maven(\"https://my_corporate_nexus/\")\n            }\n        }\n}\n</code></pre>\n\n<p>no <code>settings -&gt;</code> .</p>\n\n<p>I am not sure whether documentation is wrong or if my setup is specific though...</p>\n"}], "owner": {"reputation": 3909, "user_id": 3067542, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bf7e520d66249a250a769cc55effd391?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent F", "link": "https://stackoverflow.com/users/3067542/vincent-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556097993, "creation_date": 1556083115, "question_id": 55822855, "link": "https://stackoverflow.com/questions/55822855/gradle-global-plugin-repository-with-kotlin-dsl", "title": "Gradle global plugin repository with Kotlin DSL", "body": "<p>I am new to Gradle, but need to build an opensource project that uses it, from my machine on the corporate network. The project has recently moved to Kotlin DSL, so some plugins are required.</p>\n\n<p>I need to use our corporate Nexus server to fetch the plugin dependencies, and I would like to set this globally, because I don't want to have to modify the <code>settings.gradle.kts</code> in all the projects (I've tried this and it works)</p>\n\n<p>If I want to do this globally, I understand from <a href=\"https://docs.gradle.org/current/userguide/plugins.html#sec:plugin_management\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/plugins.html#sec:plugin_management</a> that I need to have an <code>init.gradle.kts</code> file in my <code>USER_HOME/.gradle</code> directory. That's what I did, here's the content of the file : </p>\n\n<pre><code>    settingsEvaluated { settings -&gt;\n            settings.pluginManagement {\n                repositories {\n                    mavenLocal()\n                    maven(\"https://my_corporate_nexus/\")\n                }\n            }\n    }\n</code></pre>\n\n<p>But when I then trigger my build, here's what I get : </p>\n\n<pre><code>* What went wrong:\nScript compilation errors:\n\n  Line 1: settingsEvaluated { settings -&gt;\n          ^ None of the following functions can be called with the arguments supplied:\n              public open fun settingsEvaluated(p0: Closure&lt;(raw) Any!&gt;): Unit defined in Init_gradle\n              public open fun settingsEvaluated(p0: Action&lt;in Settings!&gt;): Unit defined in Init_gradle\n              public final fun settingsEvaluated(p0: Settings!.() -&gt; Unit): Unit defined in Init_gradle\n</code></pre>\n\n<p>Below are my version details, as provided by <code>gradle -v</code> : </p>\n\n<ul>\n<li>Gradle 4.9</li>\n<li>Kotlin DSL:   0.18.4</li>\n<li>Kotlin:       1.2.41</li>\n<li>Groovy:       2.4.12</li>\n</ul>\n\n<p>So it looks likes there's something obvious I am missing.</p>\n\n<p>Any idea what it could be ?  </p>\n"}, {"tags": ["android", "generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556764574, "post_id": 55823000, "comment_id": 98542721, "body": "I don&#39;t get it can you explain this futher? How can this simplify my methods above?"}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556781570, "post_id": 55823000, "comment_id": 98547443, "body": "will that work for different Types. Like <code>someFunction(liveDataOfString, liveDataOfInteger)</code> and it will enforce that the <code>someFunction(liveDataOfString, liveDataOfInteger) { someString, someInteger -&gt;  &#47;&#47; do something here }</code>?"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556782451, "post_id": 55823000, "comment_id": 98547901, "body": "Yes, it will work for different types. But the lambda will look like this: <code>someFunction(l1, l2, l3) { sources: Array&lt;out LiveData&lt;out Any&gt;&gt; -&gt; ... }</code>"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556783459, "post_id": 55823000, "comment_id": 98548364, "body": "Please see my edits. If I understood correctly, you need just cast it to appropriate type, e.g.: ` val data1 = sources[0] as LiveData&lt;Int&gt;`"}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556783908, "post_id": 55823000, "comment_id": 98548594, "body": "Thats what I though too. I just hoped there could be some other way. Anyway I&#39;ll mark your answer now. Thank you very much!"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556784321, "post_id": 55823000, "comment_id": 98548809, "body": "I didn&#39;t find better way, avoiding casting. But, as I figured out, we can&#39;t use modifier <code>vararg</code> in lambda expression. So I replaced it with an <code>Array</code>."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556787064, "post_id": 55823000, "comment_id": 98550154, "body": "Yep! I actually discovered that too. I actually agree with your solution."}], "tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": true, "score": 1, "last_activity_date": 1556783480, "last_edit_date": 1556783480, "creation_date": 1556084000, "answer_id": 55823000, "question_id": 55821329, "link": "https://stackoverflow.com/questions/55821329/is-there-a-way-to-preserve-the-types-in-a-vararg-parameter/55823000#55823000", "title": "Is there a way to preserve the types in a vararg parameter?", "body": "<p>Try out the following function:</p>\n\n<pre><code>fun &lt;T, R&gt; someFunction(vararg sources: LiveData&lt;out T&gt;, doSomething: (sources: Array&lt;out LiveData&lt;out T&gt;&gt;) -&gt; R) {\n    // ...\n\n    doSomething(sources)\n}\n</code></pre>\n\n<p>It seems we can't use modifier <code>vararg</code> in lambda expression <code>doSomething</code>, replacing it with <code>Array</code> will work.</p>\n\n<p>EDIT:\nSo basically you will be able to do something like the following for different number of sources without creating additional functions like in your example:</p>\n\n<pre><code>fun &lt;T, R&gt; someFunction(vararg sources: LiveData&lt;out T&gt;, doSomething: (sources: Array&lt;out LiveData&lt;out T&gt;&gt;) -&gt; R) {\n    sources.forEach {\n        addSource(it) {\n            doSomething.invoke(sources)\n        }\n    }\n}\n\n// Call someFunction with different number of args:\nval l1: LiveData&lt;Int&gt; = MutableLiveData()\nval l2: LiveData&lt;String&gt; = MutableLiveData()\nval l3: LiveData&lt;String&gt; = MutableLiveData()\n\n// Call with two args:\nsomeFunction(l1, l2) { sources: Array&lt;out LiveData&lt;out Any&gt;&gt; -&gt;\n    val data1 = sources[0] as LiveData&lt;Int&gt;\n    val data2 = sources[1] as LiveData&lt;String&gt;\n    // do your work here   \n}\n// Or Call with three args:\nsomeFunction(l1, l2, l3) { sources: Array&lt;out LiveData&lt;out Any&gt;&gt; -&gt;\n    val data1 = sources[0] as LiveData&lt;Int&gt;\n    val data2 = sources[1] as LiveData&lt;String&gt;\n    val data3 = sources[2] as LiveData&lt;String&gt;\n    // do your work here   \n}\n</code></pre>\n"}], "owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 55823000, "answer_count": 1, "score": 0, "last_activity_date": 1556783480, "creation_date": 1556071089, "question_id": 55821329, "link": "https://stackoverflow.com/questions/55821329/is-there-a-way-to-preserve-the-types-in-a-vararg-parameter", "title": "Is there a way to preserve the types in a vararg parameter?", "body": "<p>My question is it is possible to do something like:</p>\n\n<pre><code>fun &lt;T, R&gt; someFunction(vararg sources&lt;out T&gt;, doSomething: (vararg sources&lt;out T&gt;) -&gt; R) {\n    // do something here\n}\n</code></pre>\n\n<p>So if I do something like:</p>\n\n<pre><code>someFunction(SomeType&lt;A&gt;(), SomeType&lt;B&gt;(), SomeType&lt;C&gt;()) { a: A, b: B c: C -&gt;\n    // do Something\n}\n</code></pre>\n\n<p>Basically, the higher ordered function needs to require all the parameter types.</p>\n\n<p>The reason why I'm asking this is that I would like to simplify code that are like this:</p>\n\n<pre><code>inline fun &lt;T1, T2, R&gt; MediatorLiveData&lt;out R&gt;.merge(source1: LiveData&lt;out T1&gt;, source2: LiveData&lt;out T2&gt;, crossinline merger: (T1?, T2?) -&gt; R?) {\n    addSource(source1) {\n        this.value = merger.invoke(source1.value, source2.value)\n    }\n    addSource(source2) {\n        this.value = merger.invoke(source1.value, source2.value)\n    }\n}\n\ninline fun &lt;T1, T2, T3, R&gt; MediatorLiveData&lt;out R&gt;.merge(source1: LiveData&lt;out T1&gt;, source2: LiveData&lt;out T2&gt;, source3: LiveData&lt;out T3&gt;, crossinline merger: (T1?, T2?, T3?) -&gt; R?) {\n    addSource(source1) {\n        this.value = merger.invoke(source1.value, source2.value, source3.value)\n    }\n    addSource(source2) {\n        this.value = merger.invoke(source1.value, source2.value, source3.value)\n    }\n    addSource(source3) {\n        this.value = merger.invoke(source1.value, source2.value, source3.value)\n    }\n}\n\ninline fun &lt;T1, T2, T3, T4, R&gt; MediatorLiveData&lt;out R&gt;.merge(source1: LiveData&lt;out T1&gt;, source2: LiveData&lt;out T2&gt;, source3: LiveData&lt;out T3&gt;, source4: LiveData&lt;out T4&gt;, crossinline merger: (T1?, T2?, T3?, T4?) -&gt; R?) {\n    addSource(source1) {\n        this.value = merger.invoke(source1.value, source2.value, source3.value, source4.value)\n    }\n    addSource(source2) {\n        this.value = merger.invoke(source1.value, source2.value, source3.value, source4.value)\n    }\n    addSource(source3) {\n        this.value = merger.invoke(source1.value, source2.value, source3.value, source4.value)\n    }\n    addSource(source4) {\n        this.value = merger.invoke(source1.value, source2.value, source3.value, source4.value)\n    }\n}\n</code></pre>\n\n<p>Can anyone suggest something? Thanks in advance!</p>\n"}, {"tags": ["android", "kotlin", "mutablelist"], "comments": [{"owner": {"reputation": 1324, "user_id": 7231449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K4GZN.jpg?s=128&g=1", "display_name": "acarlstein", "link": "https://stackoverflow.com/users/7231449/acarlstein"}, "edited": false, "score": 0, "creation_date": 1556062247, "post_id": 55820683, "comment_id": 98307636, "body": "I am not too verse in kotlin but I would not be surprise that it has some method with the name of <code>iterator</code> or similar to that. <code>Iterable</code> is an interface which means that whatever you are passing, must implement such interface in order to be accepted."}], "answers": [{"tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": false, "score": 6, "last_activity_date": 1556062372, "creation_date": 1556062372, "answer_id": 55820735, "question_id": 55820683, "link": "https://stackoverflow.com/questions/55820683/how-to-fix-required-iterable-but-found-list-in-kotlin/55820735#55820735", "title": "How to fix Required Iterable but found List in Kotlin", "body": "<p>I suspect that the error message actually is:</p>\n\n<pre><code>Required Iterable&lt;ProductData&gt;, Found List&lt;ProductData&gt;?\n</code></pre>\n\n<p>The question mark at the end is not just punctuation. That is the nullable indicator in Kotlin. A <code>List&lt;ProductData&gt;</code> cannot be <code>null</code>, but a <code>List&lt;ProductData&gt;?</code> can. And I believe that <code>addAll()</code> requires a non-<code>null</code> value.</p>\n\n<p>Ideally, you should change <code>ProductView</code> so that the signature for <code>showProduct()</code> is <code>fun showProduct(products: List&lt;ProductData&gt;)</code>.</p>\n\n<p>Alternatively, you could rewrite <code>showProduct()</code> to be:</p>\n\n<pre><code>override fun showProduct(products: List&lt;ProductData&gt;?) {\n    if (products?.size != 0){\n        this.productList.clear()\n        products?.let { this.productList.addAll(it) }\n        productAdapter.notifyDataSetChanged()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7201326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1327cf3a44c18664c4f7a7d77ec0bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Asqa", "link": "https://stackoverflow.com/users/7201326/asqa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556062372, "creation_date": 1556062002, "question_id": 55820683, "link": "https://stackoverflow.com/questions/55820683/how-to-fix-required-iterable-but-found-list-in-kotlin", "title": "How to fix Required Iterable but found List in Kotlin", "body": "<p>Hello iam learning build apps with kotlin but i got stack with this error says \"Required Iterable, Found List\", how i can solve this problem? please see my code below thanks</p>\n\n<pre><code>class MainActivity : AppCompatActivity(),ProductView {\n\nprivate lateinit var productAdapter: ProductAdapter\nprivate var productList: MutableList&lt;ProductData&gt; = mutableListOf()\nprivate lateinit var dataPresenter : DataPresenter\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    initRecycler();\n    getProduct()\n}\n\nprivate fun getProduct() {\n    dataPresenter = DataPresenter(applicationContext,this)\n    dataPresenter.getProduct()\n}\n\nprivate fun initRecycler() {\n    productAdapter = ProductAdapter(this,productList)\n    rvMain.layoutManager = LinearLayoutManager(this,LinearLayoutManager.VERTICAL,false)\n    rvMain.adapter = productAdapter\n}\n\noverride fun showLoading() {\n    pgMain.visibility = View.VISIBLE\n}\n\noverride fun hideLoading() {\n    pgMain.visibility = View.GONE\n}\n\noverride fun showProduct(products: List&lt;ProductData&gt;?) {\n    if (products?.size != 0){\n        this.productList.clear()\n        this.productList.addAll(products)  // &lt;= Required Iterable&lt;ProductData&gt;, Found List&lt;ProductData&gt;\n        productAdapter.notifyDataSetChanged()\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["android", "kotlin", "coroutine"], "answers": [{"tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": true, "score": 0, "last_activity_date": 1556226359, "creation_date": 1556226359, "answer_id": 55857636, "question_id": 55820671, "link": "https://stackoverflow.com/questions/55820671/android-coroutines/55857636#55857636", "title": "Android Coroutines", "body": "<p>That is bug in <code>kotlinx.coroutines</code> version <code>1.2.0</code> that is due to be fixed in version <code>1.2.1</code>. See <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/1064\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/issues/1064</a></p>\n"}], "owner": {"reputation": 105, "user_id": 9633447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ee45k.png?s=128&g=1", "display_name": "gentlemanRabbit", "link": "https://stackoverflow.com/users/9633447/gentlemanrabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 1, "accepted_answer_id": 55857636, "answer_count": 1, "score": 0, "last_activity_date": 1556226359, "creation_date": 1556061902, "question_id": 55820671, "link": "https://stackoverflow.com/questions/55820671/android-coroutines", "title": "Android Coroutines", "body": "<p>I am trying to work through the coroutines code lab from Google: </p>\n\n<p><a href=\"https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#0\" rel=\"nofollow noreferrer\">https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#0</a></p>\n\n<p>When I build the project I get the error:</p>\n\n<p>More than one file was found with OS independent path 'META-INF/atomicfu.kotlin_module'</p>\n\n<p>To fix it, I found some answers that suggest packaging options should be included in the Android block of my Gradle file:</p>\n\n<pre><code>android {\n    packagingOptions {\n        exclude 'META-INF/atomicfu.kotlin_module'\n    }\n}\n</code></pre>\n\n<p>It does solves that error, but then when I try and install the app onto a device I get another error that I can't make sense of:</p>\n\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task \n':app:transformDexWithInstantRunSlicesApkForDebug'.&gt; java.lang.RuntimeException: java.io.FileNotFoundException: /Users/Zach/Desktop/android-coroutines/kotlin-coroutines/kotlin-coroutines-start/app/build/intermediates/instant_run_split_apk_resources/debug/instantRunSplitApkResourcesDebug/out/slice_3/resources_ap\n</code></pre>\n\n<p>Can anyone point me in the right direction as far as finding out exactly what went wrong and how to fix it? </p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11402288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSLl8.jpg?s=128&g=1", "display_name": "LegoLine", "link": "https://stackoverflow.com/users/11402288/legoline"}, "edited": false, "score": 0, "creation_date": 1556100153, "post_id": 55820888, "comment_id": 98319561, "body": "Thanks @MichaelDougan, I changed it to this in HomeFragment now, but it will not accept this@HomeFragment as a parameter   <code>...         val list = mutableListOf&lt;Model&gt;()                  listView.adapter = MyListAdapter(this@HomeFragment, R.layout.row, list)</code>  and i kind of get why, since I changed the parameters of MyListAdapter to take an activity instead of a context, but I don&#39;t know what to replace it with   <code>class MyListAdapter (var mCtx: Activity, var resource: Int, var items: List&lt;Model&gt;) :ArrayAdapter&lt;Model&gt;(mCtx, resource, items){</code>"}], "tags": [], "owner": {"reputation": 1548, "user_id": 997341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8bade2ecc5240ed1779fa08dbb6a?s=128&d=identicon&r=PG", "display_name": "Michael Dougan", "link": "https://stackoverflow.com/users/997341/michael-dougan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556121873, "last_edit_date": 1556121873, "creation_date": 1556063827, "answer_id": 55820888, "question_id": 55820642, "link": "https://stackoverflow.com/questions/55820642/how-can-i-connect-my-listadapter-class-to-work-in-a-fragment-with-a-customized/55820888#55820888", "title": "How can I connect my ListAdapter-class to work in a fragment with a customized &quot;Model&quot; class for the rows?", "body": "<p>MyListAdapter should be able to take a reference to a Fragment instead of a Context (Activity) provided you change the parameter type and local variable in MyListAdapter, then, you just have to pass 'this' and the syntax is the same as that of an Activity.  If that doesn't work, then you might need to get the Fragment's Context (Activity) onCreate() and save it for use in the creation of MyListAdapter.  I'll have to look at my code samples tomorrow for an example...</p>\n\n<p>OK, this is how I do it (sorry it is not in Kotlin):</p>\n\n<p>FavoritesFragment.java</p>\n\n<pre><code>            package org.mycompany.myapp;\n\n            import java.util.ArrayList;\n            import java.util.HashMap;\n            import java.util.Map;\n\n            import org.json.JSONArray;\n            import org.json.JSONException;\n            import org.json.JSONObject;\n            import org.mycompany.TEST.adapter.FavoriteListAdapter;\n            import org.mycompany.TEST.model.FavoriteItem;\n\n            import android.app.Fragment;\n            import android.app.ProgressDialog;\n            import android.content.Context;\n            import android.content.Intent;\n            import android.view.LayoutInflater;\n            import android.view.View;\n            import android.view.ViewGroup;\n            import android.widget.AdapterView;\n            import android.widget.ListView;\n\n            public class FavoritesFragment extends Fragment {\n\n                Context thisContext;\n                private MainActivity myActivity;\n\n                private ViewGroup container;\n                private View rootView;\n\n                private ListView mFavoriteList;                 \n                private ArrayList&lt;FavoriteItem&gt; favoriteItems;\n                private FavoriteListAdapter adapter;\n                private FavoritesFragment thisFragment;\n\n                public FavoritesFragment(){}\n\n                @Override\n                public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n\n                    rootView = inflater.inflate(R.layout.fragment_favorites, container, false);\n                    this.container = container;\n\n                    //Get a reference to the fragments activity \n                    myActivity = (MainActivity)getActivity();   \n\n                    RestoreAllItems();\n\n                    //Declare the favorite array\n                    favoriteItems = new ArrayList&lt;FavoriteItem&gt;();\n\n                    //Load the favorite array\n                    callGetFavorites();\n\n                    return rootView;\n\n                }\n\n                private void RestoreAllItems()\n                {\n\n                    //Get a reference to the fragments Context\n                    thisContext = container.getContext();\n\n                    //Get a reference to the Fragment\n                    thisFragment = this;\n\n                    mFavoriteList = (ListView) rootView.findViewById(R.id.list_browse);\n\n                    mFavoriteList.setOnItemClickListener(new FavoriteClickListener());\n\n\n                }\n\n                /**\n                 * Item click listener\n                 * */\n                private class FavoriteClickListener implements ListView.OnItemClickListener {\n                    @Override\n                    public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n\n                        FavoriteItem item = favoriteItems.get(position);\n\n                            Intent iIntent = new Intent(thisContext, DetailActivity.class);\n\n                            iIntent.putExtra(\"animal_id\", item.getAnimalID());\n\n                            startActivityForResult(iIntent, ACTIVITY_PET_DETAIL);\n\n                    }\n                }  \n\n                //Method called from the ListAdapter when an items checkbox changes\n                public void checkChanged(int position, boolean isChecked) {\n\n                    if (position &lt; favoriteItems.size()) {      \n                        FavoriteItem item = favoriteItems.get(position);\n                        item.setSelected(isChecked);\n\n                        favoriteItems.set(position, item);\n                    }\n\n\n                }\n\n                //Load the favoriteItems array\n                private void getFavorites(String url) {\n                    final ProgressDialog dialog;    \n\n                    dialog = new ProgressDialog(thisContext);         \n                    dialog.setMessage(\"Loading, please wait...\");         \n                    dialog.setIndeterminate(true);         \n                    dialog.setCancelable(false);         \n                    dialog.show();     \n\n                    favoriteItems = new ArrayList&lt;FavoriteItem&gt;();\n\n                    JsonArrayRequest req = new JsonArrayRequest(url, new Response.Listener&lt;JSONArray&gt; () {  \n\n                        @Override\n                        public void onResponse(JSONArray response) {\n                            try {\n                                ....\n\n                                for (int i = 0; i &lt; response.length(); i++) {\n\n                                ....\n\n                                    // Load the favoriteItems array\n                                    favoriteItems.add(new FavoriteItem(name, breed, sex, age_long, animal_id));\n\n                                }\n\n                                try {\n\n                                    //When the array is fully loaded set the ListAdapter\n                                    adapter = new FavoriteListAdapter(thisContext, favoriteItems, thisFragment);\n                                    mFavoriteList.setAdapter(adapter);\n\n                                } catch (Exception e) {\n                                   e.printStackTrace();\n                                } \n\n                            } catch (JSONException e) {\n                                e.printStackTrace();\n                            }\n\n                            dialog.dismiss();\n                        }\n\n\n                    }, new Response.ErrorListener() {\n                        @Override\n                        public void onErrorResponse(VolleyError error) {\n                            VolleyLog.e(\"Error: \", error.getMessage());\n                            Log.e(\"Error: \", error.getMessage());\n                            dialog.dismiss();\n                        }\n                    }) {\n\n                       @Override\n                       public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n                           HashMap&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();\n                                String authValue = \"Bearer \" + apiToken;\n                                headers.put(\"Authorization\", authValue);\n                                headers.put(\"Accept\", \"application/json; charset=UTF-8\");\n                                headers.put(\"Content-Type\", \"application/json; charset=UTF-8\");\n                           return headers;\n                       };\n                    };\n\n                    // add the request object to the queue to be executed\n                    MyApplication.getInstance().addToRequestQueue(req);\n                }   \n            }\n</code></pre>\n\n<p>Then, the ListAdapter:\nFavoriteListAdapter.java</p>\n\n<pre><code>            package org.mycompany.TEST.adapter;\n\n            import java.util.ArrayList;\n\n            import org.mycompany.TEST.FavoritesFragment;\n            import org.mycompany.TEST.R;\n            import org.mycompany.TEST.model.FavoriteItem;\n\n            import android.app.Activity;\n            import android.content.Context;\n            import android.view.LayoutInflater;\n            import android.view.View;\n            import android.view.ViewGroup;\n            import android.widget.BaseAdapter;\n            import android.widget.CheckBox;\n            import android.widget.CompoundButton;\n            import android.widget.CompoundButton.OnCheckedChangeListener;\n            import android.widget.ImageView;\n            import android.widget.TextView;\n\n\n            public class FavoriteListAdapter extends BaseAdapter {\n\n                private Context context;\n                private FavoritesFragment thisFragment;\n                private ArrayList&lt;FavoriteItem&gt; favoriteItems;\n                private boolean isEditing = false;\n\n\n                public FavoriteListAdapter(Context context, ArrayList&lt;FavoriteItem&gt; favoriteItems, FavoritesFragment thisFragment){\n                    //Reference to the Context\n                    this.context = context;\n                    //Reference to the ArrayList\n                    this.favoriteItems = favoriteItems;\n                    //Reference to the Fragment that created the ListAdapter\n                    this.thisFragment = thisFragment;\n                }\n\n                @Override\n                public int getCount() {\n                    return favoriteItems.size();\n                }\n\n                @Override\n                public Object getItem(int position) {       \n                    return favoriteItems.get(position);\n                }\n\n                @Override\n                public long getItemId(int position) {\n                    return position;\n                }\n\n                @Override\n                public View getView(int position, View convertView, ViewGroup parent) {\n\n                    if (convertView == null) {\n                        //Context allows you to get the LayoutInflater\n                        LayoutInflater mInflater = (LayoutInflater)context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);\n                        convertView = mInflater.inflate(R.layout.favorite_list_item, null);\n                    }\n\n                     TextView txtName = (TextView) convertView.findViewById(R.id.name);\n                    CheckBox chkSelected = (CheckBox) convertView.findViewById(R.id.isSelected);\n\n                    txtName.setText(favoriteItems.get(position).getName());\n                    chkSelected.setChecked(favoriteItems.get(position).isSelected());\n                    //Store the position in the list of this list item\n                    chkSelected.setTag(\"\" + position);\n                    chkSelected.setOnCheckedChangeListener(new OnCheckedChangeListener() \n                    {\n\n                        public void onCheckedChanged(CompoundButton chkBox, boolean isChecked) \n                        {\n                            //Get the position out of the tag when the checkbox changes\n                            String sPos = (String) chkBox.getTag();\n                            int position = Integer.parseInt(sPos);\n\n                            //Call the checkChanged method in the Fragment\n                            thisFragment.checkChanged(position, isChecked);\n                        }\n                    });\n\n                    return convertView;\n                }\n\n            }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11402288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSLl8.jpg?s=128&g=1", "display_name": "LegoLine", "link": "https://stackoverflow.com/users/11402288/legoline"}, "edited": false, "score": 0, "creation_date": 1556100873, "post_id": 55820925, "comment_id": 98319973, "body": "Thanks @alexscmar , but I can&#39;t get the context to work. Since <b>MyListAdapter</b> is extending <b>ArrayAdapter</b>, I can not get it to work taking a <b>fragment</b> as a parameter instead of a <b>context</b>. Do you maybe know of an alternative to <b>Context</b> and <b>Activity</b> that I can pass as a parameter and will still work with <b>ArrayAdapter</b>?"}, {"owner": {"reputation": 411, "user_id": 4359307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IYHo.jpg?s=128&g=1", "display_name": "alexscmar", "link": "https://stackoverflow.com/users/4359307/alexscmar"}, "reply_to_user": {"reputation": 11, "user_id": 11402288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSLl8.jpg?s=128&g=1", "display_name": "LegoLine", "link": "https://stackoverflow.com/users/11402288/legoline"}, "edited": false, "score": 0, "creation_date": 1556108878, "post_id": 55820925, "comment_id": 98324744, "body": "Maybe you can use a BaseAdapter instead of ArrayAdapter... Let me better check your code."}, {"owner": {"reputation": 411, "user_id": 4359307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IYHo.jpg?s=128&g=1", "display_name": "alexscmar", "link": "https://stackoverflow.com/users/4359307/alexscmar"}, "reply_to_user": {"reputation": 11, "user_id": 11402288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSLl8.jpg?s=128&g=1", "display_name": "LegoLine", "link": "https://stackoverflow.com/users/11402288/legoline"}, "edited": false, "score": 0, "creation_date": 1556121019, "post_id": 55820925, "comment_id": 98332600, "body": "I&#39;ve completed a bit more my answer, please check it out. You have two options to get a valid context from a Fragment:  1 - this.context  2 - this.activity.  Inside your fragment you can show toast messages using either <i>context</i> or <i>activity</i> as Toast class context. You can also call public methods of your Activity like this:    <b>(this.activity as MyActivity).publicMethod(param: Type)</b>  You can use this to show a new fragment in your activity using FramentManager. Please let me know if this helps you."}, {"owner": {"reputation": 11, "user_id": 11402288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSLl8.jpg?s=128&g=1", "display_name": "LegoLine", "link": "https://stackoverflow.com/users/11402288/legoline"}, "edited": false, "score": 0, "creation_date": 1556158814, "post_id": 55820925, "comment_id": 98345075, "body": "Thank you @alexscmar , I will try it out tomorrow and let you know how it went."}], "tags": [], "owner": {"reputation": 411, "user_id": 4359307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IYHo.jpg?s=128&g=1", "display_name": "alexscmar", "link": "https://stackoverflow.com/users/4359307/alexscmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1556120390, "last_edit_date": 1556120390, "creation_date": 1556064160, "answer_id": 55820925, "question_id": 55820642, "link": "https://stackoverflow.com/questions/55820642/how-can-i-connect-my-listadapter-class-to-work-in-a-fragment-with-a-customized/55820925#55820925", "title": "How can I connect my ListAdapter-class to work in a fragment with a customized &quot;Model&quot; class for the rows?", "body": "<pre><code> val adapter: MyListAdapter\n    //Not sure how to instantiate MyListAdapter\n</code></pre>\n\n<p>Will go:</p>\n\n<pre><code>listView.adapter = MyListAdapter(context, R.layout.row, list)\n</code></pre>\n\n<p>The <strong>context</strong> (<strong>this.context</strong>, where <strong>this</strong> is your HomeFragment and <strong>context</strong> is from getContext() ) will be used in your adapter to inflate you list row (resource = R.layout.row)</p>\n\n<p>In the case that you need your activity as context you can instantiate your list adapter like this:</p>\n\n<pre><code>listView.adapter = MyListAdapter(activity, R.layout.row, list)\n</code></pre>\n\n<p>where <strong>activity</strong> is from <em>getActivity()</em></p>\n\n<p>In either case you'll get access to your application's resources to get the Model.img.</p>\n"}], "owner": {"reputation": 11, "user_id": 11402288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSLl8.jpg?s=128&g=1", "display_name": "LegoLine", "link": "https://stackoverflow.com/users/11402288/legoline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1556121873, "creation_date": 1556061654, "last_edit_date": 1556080891, "question_id": 55820642, "link": "https://stackoverflow.com/questions/55820642/how-can-i-connect-my-listadapter-class-to-work-in-a-fragment-with-a-customized", "title": "How can I connect my ListAdapter-class to work in a fragment with a customized &quot;Model&quot; class for the rows?", "body": "<p>I am trying to create a customized ListView in an app I am making following a tutorial. The tutorial works fine if you want to launch the ListView from an activity, but I am trying to get it to work from inside a fragment and I can not seem to figure out how to connect my adapter to the fragment. \nDoes anyone know how I could figure this out? Kotlin is quite new to me at this point, so there might be an obvious solution, I just have not found it yet.</p>\n\n<p>I did get it to work attaching the code to an activity, but in my project, I am trying to attach it to a fragment in a navigation bar, but the fragment will not handle the code that is working in the activity. </p>\n\n<p>This is what the code looks like in the onCreate-method when it is attached to an activity:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        //listview\n        var listView = findViewById&lt;ListView&gt;(R.id.listView)\n\n        var list = mutableListOf&lt;Model&gt;()\n\n        //adding items to the listview\n        list.add(Model(\"title one\", \"description one....\", R.drawable.imgone))\n        list.add(Model(\"title two\", \"description two....\", R.drawable.imgtwo))\n.....\n\n        //adapter\n        listView.adapter = MyListAdapter(this, R.layout.row, list)\n\n        //ListView item clicks\n        listView.setOnItemClickListener { parent, view, position, id -&gt;\n            if (position == 0){\n                Toast.makeText(this@MainActivity, \"Item One clicked\", Toast.LENGTH_LONG).show()\n            }\n            if (position == 1){\n                Toast.makeText(this@MainActivity, \"Item Two clicked\", Toast.LENGTH_LONG).show()\n            }\n.....\n        }\n\n    }\n</code></pre>\n\n<p>This is what the code looks like in the fragment at this point</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n    }\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val view = inflater.inflate(R.layout.fragment_home, container, false)\n\n        val listView: ListView = view.findViewById(R.id.homeListView)\n\n        val adapter: MyListAdapter\n        //Not sure how to instantiate MyListAdapter\n\n        return view\n    }\n</code></pre>\n\n<p>The Model class looks like this</p>\n\n<pre><code>class Model(val title: String, val desc: String, val img: Int)\n</code></pre>\n\n<p>And MyListAdapter looks like this</p>\n\n<pre><code>class MyListAdapter (var mCtx: Context, var resource: Int, var items: List&lt;Model&gt;)\n    :ArrayAdapter&lt;Model&gt;(mCtx, resource, items){\n\n\n    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {\n\n        val layoutInflater: LayoutInflater = LayoutInflater.from(mCtx)\n\n        val view: View = layoutInflater.inflate(resource, null)\n        val imageView: ImageView = view.findViewById(R.id.list_view_image)\n        val titleView: TextView = view.findViewById(R.id.list_view_title_txt)\n        val descTView: TextView = view.findViewById(R.id.list_view_desc_txt)\n\n        var mItems: Model = items[position]\n\n        imageView.setImageDrawable(mCtx.resources.getDrawable(mItems.img))\n        titleView.text = mItems.title\n        descTView.text = mItems.desc\n\n\n        return view\n    }\n}\n</code></pre>\n\n<p>My fragment_home.xml uses a pretty simple ListView:</p>\n\n<pre><code>&lt;ListView\n            android:id=\"@+id/homeListView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"&gt;\n\n    &lt;/ListView&gt;\n</code></pre>\n\n<p>Whilst it is the row.xml that customizes the look of the items in my list</p>\n\n<pre><code>&lt;LinearLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\"\n        android:padding=\"10dp\"&gt;\n\n    &lt;ImageView\n            android:id=\"@+id/list_view_image\"\n            android:layout_width=\"80dp\"\n            android:layout_height=\"80dp\"\n            android:contentDescription=\"@string/list_view_img_content_desc\"/&gt;\n\n    &lt;LinearLayout\n            android:layout_margin=\"5dp\"\n            android:layout_gravity=\"center\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:orientation=\"vertical\"&gt;\n\n        &lt;TextView\n                android:id=\"@+id/list_view_title_txt\"\n                android:text=\"@string/list_view_title\"\n                android:textSize=\"15sp\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"/&gt;\n        &lt;TextView\n                android:id=\"@+id/list_view_desc_txt\"\n                android:text=\"@string/list_view_desc\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"/&gt;\n\n    &lt;/LinearLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>What it is supposed to do, is that I should be able to launch my customized ListView from my HomeFragment and from there be able to click on an item in the list and have a Toast show up(eventually another fragment, but first things first).\nAt the moment, I have the customized rows and the ListView ready, but I can not seem to make the connection from MyListAdapter to the HomeFragment.</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "answers": [{"tags": [], "owner": {"reputation": 2037, "user_id": 1668576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411ff8888c03cf888be5d1a39b192a8e?s=128&d=identicon&r=PG", "display_name": "exscape", "link": "https://stackoverflow.com/users/1668576/exscape"}, "is_accepted": true, "score": 0, "last_activity_date": 1556134528, "creation_date": 1556134528, "answer_id": 55837348, "question_id": 55820483, "link": "https://stackoverflow.com/questions/55820483/edittext-in-recyclerview-only-focused-if-scrolled-to-the-top/55837348#55837348", "title": "EditText in RecyclerView only focused if scrolled to the top", "body": "<p>I found a solution, but it doesn't feel ideal. If anyone has a better solution, I'm absolutely open to changing my selected answer.</p>\n\n<p>This can be fixed by calling <code>.post()</code> on the RecyclerView, and set focus manually in there. I'm not certain if there is a race condition, but if so I haven't hit it yet.</p>\n\n<p>MyAdapter.kt:</p>\n\n<pre><code>package org.exscape.recyclerviewfocusissue\n\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.EditText\nimport androidx.recyclerview.widget.LinearLayoutManager\nimport androidx.recyclerview.widget.RecyclerView\n\nclass MyAdapter : RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n    private val contents = (1..100).toList()\n    private var enabled = false\n    private lateinit var attachedRecyclerView: RecyclerView\n\n    override fun onAttachedToRecyclerView(recyclerView: RecyclerView) {\n        super.onAttachedToRecyclerView(recyclerView)\n        attachedRecyclerView = recyclerView\n    }\n\n    override fun getItemCount(): Int = contents.size\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\n        val view = LayoutInflater.from(parent.context)\n            .inflate(R.layout.item, parent, false)\n\n        return ViewHolder(view)\n    }\n\n    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n        (holder as ViewHolder).editText.setText(contents[position].toString())\n        holder.editText.isEnabled = enabled\n    }\n\n    fun toggle() {\n        enabled = !enabled\n        notifyDataSetChanged()\n\n        attachedRecyclerView.post {\n            val layoutManager = attachedRecyclerView.layoutManager as? LinearLayoutManager\n            if (layoutManager != null) {\n                val position = layoutManager.findFirstCompletelyVisibleItemPosition()\n                if (position != RecyclerView.NO_POSITION)\n                    attachedRecyclerView.findViewHolderForAdapterPosition(position)?.itemView?.requestFocus()\n            }\n        }\n    }\n\n    inner class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        val editText : EditText = itemView.findViewById(R.id.editText)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2037, "user_id": 1668576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/411ff8888c03cf888be5d1a39b192a8e?s=128&d=identicon&r=PG", "display_name": "exscape", "link": "https://stackoverflow.com/users/1668576/exscape"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 55837348, "answer_count": 1, "score": 0, "last_activity_date": 1556134528, "creation_date": 1556060352, "last_edit_date": 1556081537, "question_id": 55820483, "link": "https://stackoverflow.com/questions/55820483/edittext-in-recyclerview-only-focused-if-scrolled-to-the-top", "title": "EditText in RecyclerView only focused if scrolled to the top", "body": "<p>I've read dozens of posts of RecyclerView + EditText focus issues, but haven't found any about this particular problem.</p>\n\n<p>I have a RecyclerView where the item layout contains a CardView, which in turn contains a LinearLayout with a few items inside. One of them is an EditText with some styling. (Actually, it's a custom view containing an EditText, but the issue appears with a plain EditText as well.)  </p>\n\n<p>By default, the EditText is disabled, and styled like a TextView. The user can then toggle \"edit mode\", which causes the EditText in each row to become enabled and editable.</p>\n\n<p>When the RecyclerView is scrolled to the absolute top, the top EditText is automatically focused when you enable them, and you can start typing immediately.<br>\nHowever, when it's not scrolled to the top, <em>no</em> EditText is focused, and I've been unable to focus one programmatically as well (e.g. by calling requestFocus on the appropriate EditText).</p>\n\n<p>Here's some minimal sample code that shows this behavior:</p>\n\n<p>MainActivity.kt:</p>\n\n<pre><code>package org.exscape.recyclerviewfocusissue\n\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.Menu\nimport android.view.MenuItem\nimport androidx.recyclerview.widget.LinearLayoutManager\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity() {\n    private val adapter = MyAdapter()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        recyclerView.layoutManager = LinearLayoutManager(this)\n        recyclerView.adapter = adapter\n    }\n\n    override fun onCreateOptionsMenu(menu: Menu?): Boolean {\n        menuInflater.inflate(R.menu.menu_main, menu)\n        return super.onCreateOptionsMenu(menu)\n    }\n\n    override fun onOptionsItemSelected(item: MenuItem?): Boolean = when (item?.itemId) {\n        R.id.toggle -&gt; { adapter.toggle(); true }\n        else -&gt; super.onOptionsItemSelected(item)\n    }\n}\n</code></pre>\n\n<p>MyAdapter.kt:</p>\n\n<pre><code>package org.exscape.recyclerviewfocusissue\n\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.EditText\nimport androidx.recyclerview.widget.RecyclerView\n\nclass MyAdapter : RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n    private val contents = (1..100).toList()\n    private var enabled = false\n\n    override fun getItemCount(): Int = contents.size\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\n        val view = LayoutInflater.from(parent.context)\n            .inflate(R.layout.item, parent, false)\n\n        return ViewHolder(view)\n    }\n\n    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n        (holder as ViewHolder).editText.setText(contents[position].toString())\n        holder.editText.isEnabled = enabled\n    }\n\n    fun toggle() {\n        enabled = !enabled\n        notifyDataSetChanged()\n    }\n\n    inner class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        val editText : EditText = itemView.findViewById(R.id.editText)\n    }\n}\n</code></pre>\n\n<p>activity_main.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".MainActivity\"&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n            android:layout_width=\"0dp\"\n            android:layout_height=\"0dp\"\n            android:id=\"@+id/recyclerView\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintBottom_toBottomOf=\"parent\" /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p>item.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:orientation=\"horizontal\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"wrap_content\"&gt;\n\n    &lt;EditText\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:inputType=\"text\"\n            android:id=\"@+id/editText\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>menu_main.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n    &lt;item android:id=\"@+id/toggle\" android:title=\"Toggle\" app:showAsAction=\"ifRoom\" /&gt;\n&lt;/menu&gt;\n</code></pre>\n\n<p>How can I solve this issue?<br>\nIdeally, the solution should focus the topmost fully visible (or partially visible, if it scrolls up) EditText on toggle, while also giving the ability for me to explicitly focus one of my choosing at any time.</p>\n\n<p><strong>Update:</strong> I got the example program to work by using <code>.post()</code> on the RecyclerView, and calling <code>requestFocus()</code> inside that Runnable, instead of immediately inside my <code>toggle()</code> method. I then switched to my custom view, and it still worked. However, my original program still doesn't work.<br>\nThere is far too much code to post in the original, though. I will try to narrow the issue down further.</p>\n"}, {"tags": ["android", "kotlin", "navigation", "styles", "android-architecture-navigation"], "answers": [{"comments": [{"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 2, "creation_date": 1556056465, "post_id": 55819746, "comment_id": 98306241, "body": "That won&#39;t affect window flags like those used for the transparent status bar or window background. You&#39;d also have more luck just adding a <code>android:theme</code> to the root of the Fragment&#39;s layout if you&#39;re trying to achieve this approach for views within the Fragment"}], "tags": [], "owner": {"reputation": 731, "user_id": 9130759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Jm9w.png?s=128&g=1", "display_name": "Mini Chip", "link": "https://stackoverflow.com/users/9130759/mini-chip"}, "is_accepted": false, "score": 1, "last_activity_date": 1556055354, "creation_date": 1556055354, "answer_id": 55819746, "question_id": 55819634, "link": "https://stackoverflow.com/questions/55819634/is-there-any-way-to-change-fragment-theme/55819746#55819746", "title": "Is there any way to change fragment theme?", "body": "<p>Use ContextThemeWrapper to provide the different theme to fragment.While appplying contextThemeWrapper , your minSDKVersion should be >=11 . </p>\n\n<p>Use this in the onCreateView method of fragment</p>\n\n<pre><code>final Context contextThemeWrapper = new ContextThemeWrapper(getActivity(), R.style.yourCustomTheme);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11402079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041963a72369417f6c1b9480be88ff67?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Lebedev", "link": "https://stackoverflow.com/users/11402079/anton-lebedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1556061472, "creation_date": 1556054764, "last_edit_date": 1556061472, "question_id": 55819634, "link": "https://stackoverflow.com/questions/55819634/is-there-any-way-to-change-fragment-theme", "title": "Is there any way to change fragment theme?", "body": "<p>I'm currently using 'Navigation component' in my project, using 'Single Activity' approach.\nEach of my fragments has transparent status bar and different windowBackground.\nI'm looking for a way to change fragments windowBackground, without affecting the other fragments.</p>\n\n<p>I've tried the solution mentioned here:\n<a href=\"https://stackoverflow.com/a/15496425/11402079\">https://stackoverflow.com/a/15496425/11402079</a>\nBut it didn't work.\nI can't find anything related to this 'Single Activity' approach.\nCan anyone help?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 8423930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45441bf595fbdadd61fb7c6865d3a122?s=128&d=identicon&r=PG&f=1", "display_name": "Brendon Shaw", "link": "https://stackoverflow.com/users/8423930/brendon-shaw"}, "edited": false, "score": 0, "creation_date": 1556092625, "post_id": 55824216, "comment_id": 98315173, "body": "Many thanks for the very detailed overview, that is a great help as still trying to convert by Python thinking brain into Kotlin"}, {"owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "reply_to_user": {"reputation": 107, "user_id": 8423930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45441bf595fbdadd61fb7c6865d3a122?s=128&d=identicon&r=PG&f=1", "display_name": "Brendon Shaw", "link": "https://stackoverflow.com/users/8423930/brendon-shaw"}, "edited": false, "score": 0, "creation_date": 1556092891, "post_id": 55824216, "comment_id": 98315327, "body": "oh that will be fun :D .. i try to avoid the other way around ;-)"}], "tags": [], "owner": {"reputation": 992, "user_id": 7776688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aQnX0.png?s=128&g=1", "display_name": "IEE1394", "link": "https://stackoverflow.com/users/7776688/iee1394"}, "is_accepted": false, "score": 2, "last_activity_date": 1556089728, "creation_date": 1556089728, "answer_id": 55824216, "question_id": 55819584, "link": "https://stackoverflow.com/questions/55819584/kotlin-multiple-class-for-data-storage/55824216#55824216", "title": "Kotlin multiple class for data storage", "body": "<p>First at all, using the \"class aprocah\" makes it easy for you to understand and give you the full benefits of the language itself... so dont dry to save data in an array .. let the compiler handle those stuff. </p>\n\n<p>Secondly i suggest you have maybe two types (and use data classes ;-) )</p>\n\n<pre><code>data class VehicleListEntry(\n  val id: Long,\n  val name: String\n)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>data class VehicleSpec(\n  val id: Long,\n  val oem: String = \"\",\n  val modelName: String = \"\",\n  val engineSize: String = \"\"\n)\n</code></pre>\n\n<p>from my perspective try to avoid null values whenever possible.\nSo if you have strings - which you are display only - use empty strings instead of null.</p>\n\n<p>and now have a Model to store your data</p>\n\n<pre><code>class VehicleModel() {\n  private val specs: MutableMap&lt;Long, VehicleSpec&gt; = mutableMapOf()\n  private var entries: List&lt;VehicleListEntry&gt; = listOf()\n\n  fun getSpec(id: Long) = specs[id]\n  fun addSpec(spec: VehicleSpec) = specs[spec.id] = spec\n  fun getEntries(): List&lt;VehicleListEntry&gt; = entries\n  fun setEntries(data: List&lt;VehicleListEntry&gt;)  {\n    entries = data.toMutableList()\n  }\n\n}\n</code></pre>\n\n<p>You could also use a data class for your model which looks like</p>\n\n<pre><code>data class VehicleModel(\n  val specs: MutableMap&lt;Long, VehicleSpec&gt; = mutableMapOf(),\n  var entries: List&lt;VehicleListEntry&gt; = listOf()\n)\n</code></pre>\n\n<p>And last but not least a controller for getting stuff together</p>\n\n<pre><code>class VehicleController() {\n  private val model = VehicleModel()\n\n  init{\n     // TODO get the entries list together\n  }\n\n  fun getEntries() = model.entries\n\n  fun getSpec(id: Long) : VehicleSpec? {\n     // TODO load the data from external source (or check the model first)\n     // TODO store the data into the model\n     // TODO return result\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "is_accepted": true, "score": 2, "last_activity_date": 1556093002, "creation_date": 1556093002, "answer_id": 55825130, "question_id": 55819584, "link": "https://stackoverflow.com/questions/55819584/kotlin-multiple-class-for-data-storage/55825130#55825130", "title": "Kotlin multiple class for data storage", "body": "<blockquote>\n  <p>What is the correct way to define the data, is it best to create an class as below then create an array of the class</p>\n</blockquote>\n\n<p>Using an array for the properties of an object is not making the full use of the type safety you have in Kotlin (and even Java for that matter).\nIf what you want to express is multiple properties of an object, then you should use a <strong>class</strong> to define those properties. This is especially true if the properties have different types.</p>\n\n<p>There is no performance difference between an array and a class, because you'll get a reference to the heap in both cases. You could save on performance only if you convert your multi-dimensional array approach to a single-dimension array with smart indexing. Most of the time, you should not consider this option unless you are handling a lot of data and if you know that performance is an issue at this specific level.</p>\n\n<blockquote>\n  <p>(not sure if this is possible)</p>\n</blockquote>\n\n<p>Defining lists/arrays of classes is definitely possible.</p>\n\n<p>Usually, for classes that are only used as data containers, you should prefer <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">data classes</a>, because they give you useful methods for free, and these methods totally make sense for simple \"data bags\" like in your case (equals, hashcode, component access, etc.).</p>\n\n<pre><code>data class Vehicle(\n   val OEM: String,\n   val ModelName: String,\n   val EngineSize: String\n)\n</code></pre>\n\n<p>Also, I suggest using <code>val</code> instead of <code>var</code> as much as possible. Immutability is more idiomatic in Kotlin.</p>\n\n<p>Last but not least, prefer non-null values to null values if you know a value must always be present. If there are valid cases where the value is absent, you should use null instead of a placeholder value like empty string or -1.</p>\n"}], "owner": {"reputation": 107, "user_id": 8423930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45441bf595fbdadd61fb7c6865d3a122?s=128&d=identicon&r=PG&f=1", "display_name": "Brendon Shaw", "link": "https://stackoverflow.com/users/8423930/brendon-shaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "accepted_answer_id": 55825130, "answer_count": 2, "score": 1, "last_activity_date": 1564392560, "creation_date": 1556054462, "last_edit_date": 1564392560, "question_id": 55819584, "link": "https://stackoverflow.com/questions/55819584/kotlin-multiple-class-for-data-storage", "title": "Kotlin multiple class for data storage", "body": "<p>I am developing a simple Android app, that will display an icon of a vehicle and the user can click on the icon to display the vehicle information. I want to load the data dynamically when I build the app i.e. the data will come from an external source including the picture for the icon.   </p>\n\n<p>I am new to Kotlin and not sure what to search for to understand a suitable solution. What is the correct way to define the data, is it best to create an class as below then create an array of the class (not sure if this is possible)</p>\n\n<pre><code>public class VehicleSpec()\n{\nvar OEM: String? = null\nvar ModelName: String? = null\nvar EngineSize: String? = null\n}\n</code></pre>\n\n<p>Or would be better to create a multiple dimension array and then link the data to the cells?</p>\n\n<pre><code>var VehicleSpec = arrayOf(20,20)\nVehicleSpec[0][0] = Null //OEM\nVehicleSpec[0][1] = Null //ModelName\nVehicleSpec[0][2] = Null //EngineSize\n</code></pre>\n\n<p>What is the best way to set up the data storage, is there any good references to understand how this should be setup?</p>\n"}, {"tags": ["android", "kotlin", "androidx"], "answers": [{"comments": [{"owner": {"reputation": 20314, "user_id": 1281501, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/db591cfa2d3fc416c8ea91a16393fc28?s=128&d=identicon&r=PG", "display_name": "lostintranslation", "link": "https://stackoverflow.com/users/1281501/lostintranslation"}, "edited": false, "score": 0, "creation_date": 1556055033, "post_id": 55819618, "comment_id": 98305776, "body": "YES!  Thank you so much."}], "tags": [], "owner": {"reputation": 3657, "user_id": 8170714, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OqwAS.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/8170714/jack"}, "is_accepted": true, "score": 56, "last_activity_date": 1606275550, "last_edit_date": 1606275550, "creation_date": 1556054662, "answer_id": 55819618, "question_id": 55819499, "link": "https://stackoverflow.com/questions/55819499/androidx-lifecycle-defaultlifecycleobserver-not-found/55819618#55819618", "title": "androidx.lifecycle..DefaultLifecycleObserver not found", "body": "<p>I think that's because you're missing one dependency:</p>\n<pre><code>implementation &quot;androidx.lifecycle:lifecycle-common-java8:$lifecycle_version&quot;\n</code></pre>\n<p>Get the latest version of <code>lifecycle-common-java8</code> <a href=\"https://mvnrepository.com/artifact/androidx.lifecycle/lifecycle-common-java8\" rel=\"noreferrer\">here</a></p>\n<p>See the <a href=\"https://developer.android.com/reference/androidx/lifecycle/Lifecycle\" rel=\"noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>If you use Java 8 Language, then observe events with\nDefaultLifecycleObserver. To include it you should add\n&quot;androidx.lifecycle:lifecycle-common-java8:&quot; to your\nbuild.gradle file.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 11983, "user_id": 10563627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xQL2O.jpg?s=128&g=1", "display_name": "Paresh Mangukiya", "link": "https://stackoverflow.com/users/10563627/paresh-mangukiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1612841150, "creation_date": 1612841150, "answer_id": 66112555, "question_id": 55819499, "link": "https://stackoverflow.com/questions/55819499/androidx-lifecycle-defaultlifecycleobserver-not-found/66112555#66112555", "title": "androidx.lifecycle..DefaultLifecycleObserver not found", "body": "<p><strong>In Flutter</strong></p>\n<p>Typically this happens because your project isn't fully supporting Android X. Please make sure you have completely migrated to it, by checking the <a href=\"https://flutter.dev/docs/development/androidx-migration\" rel=\"nofollow noreferrer\">official instructions</a> or you can just check if the requirements below are met</p>\n<ol>\n<li><p>On your project's <code>android/app/build.gradle</code> change <code>compileSdkVersion</code> and <code>targetSdkVersion</code> to <strong>28</strong></p>\n</li>\n<li><p>Go to <code>android/gradle.properties</code> file and add the following lines:</p>\n<pre><code>android.useAndroidX=true\nandroid.enableJetifier=true\n</code></pre>\n</li>\n</ol>\n<p>If neither of those worked, you've probably have some conflicting dependencies or have <a href=\"https://flutter.dev/docs/development/packages-and-plugins/plugin-api-migration\" rel=\"nofollow noreferrer\">wrongly migrated to V2 embedded support</a>. To fix it, please do the following:</p>\n<ol>\n<li><p>Create a new app with the same name and dependencies using <code>flutter create</code>;</p>\n</li>\n<li><p>Carefully copy your source code to the new project picking only the required files, specially inside <code>android</code>/ directory;</p>\n</li>\n<li><p>Build, and everything should be OK at this point;</p>\n</li>\n</ol>\n"}], "owner": {"reputation": 20314, "user_id": 1281501, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/db591cfa2d3fc416c8ea91a16393fc28?s=128&d=identicon&r=PG", "display_name": "lostintranslation", "link": "https://stackoverflow.com/users/1281501/lostintranslation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8437, "favorite_count": 1, "accepted_answer_id": 55819618, "answer_count": 2, "score": 25, "last_activity_date": 1612841150, "creation_date": 1556053978, "question_id": 55819499, "link": "https://stackoverflow.com/questions/55819499/androidx-lifecycle-defaultlifecycleobserver-not-found", "title": "androidx.lifecycle..DefaultLifecycleObserver not found", "body": "<p>I am having a problem where my build cannot find one of the androidx classes, specifically:</p>\n\n<pre><code>androidx.lifecycle.DefaultLifecycleObserver\n</code></pre>\n\n<p>Here are my gradle deps:</p>\n\n<pre><code>annotationProcessor \"androidx.lifecycle:lifecycle-compiler:2.0.0\"\nimplementation \"androidx.lifecycle:lifecycle-runtime:2.0.0\"\nimplementation \"androidx.lifecycle:lifecycle-extensions:2.0.0\"\n</code></pre>\n\n<p>I don't have any other problems getting androidx classes, just this one.</p>\n\n<p>I have tried to invalidate caches in android studio and restart with no luck.  Also a build clean as well as a gradle sync.</p>\n\n<p>I verified here:</p>\n\n<p><a href=\"https://developer.android.com/jetpack/androidx/migrate\" rel=\"noreferrer\">https://developer.android.com/jetpack/androidx/migrate</a></p>\n\n<p>The mapping of that class from the support library to androidx:</p>\n\n<blockquote>\n  <p>android.arch.lifecycle.DefaultLifecycleObserver ->\n  androidx.lifecycle.DefaultLifecycleObserver</p>\n</blockquote>\n\n<p>Any ideas on why this is happening?</p>\n"}, {"tags": ["intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1556054877, "post_id": 55818363, "comment_id": 98305729, "body": "Do you create the file in the source root? See <a href=\"https://www.jetbrains.com/help/idea/configuring-content-roots.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/configuring-content-roots.html</a> and <a href=\"https://stackoverflow.com/a/43319356/104891\">stackoverflow.com/a/43319356/104891</a>."}, {"owner": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "reply_to_user": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1556055069, "post_id": 55818363, "comment_id": 98305793, "body": "@CrazyCoder I checked the box to create a content root in <code>src</code>, and attempt to create the file there."}, {"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 1, "creation_date": 1556055173, "post_id": 55818363, "comment_id": 98305825, "body": "Make sure the directory you are creating the file in is marked as Source root and is displayed in blue color in the project view."}, {"owner": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "reply_to_user": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1556055607, "post_id": 55818363, "comment_id": 98305977, "body": "@CrazyCoder Interesting: There appears to be a bug. The project creation process offers an option (which I select, and is selected by default) to &quot;create a source root&quot;, but that doesn&#39;t happen. Though the directory is created, it is not marked as a source root."}, {"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1556055691, "post_id": 55818363, "comment_id": 98305995, "body": "Sorry, can&#39;t reproduce: <a href=\"https://i.imgur.com/rE20IEC.png\" rel=\"nofollow noreferrer\">i.imgur.com/rE20IEC.png</a> <a href=\"https://i.imgur.com/WWCbPFF.png\" rel=\"nofollow noreferrer\">i.imgur.com/WWCbPFF.png</a>."}, {"owner": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "reply_to_user": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1556055830, "post_id": 55818363, "comment_id": 98306044, "body": "@CrazyCoder Any thoughts on why my IDE would be failing to mark the created directory as a source root? Could other plugins be interfering (e.g., Mathematica, Haskell), or could there be a setting somewhere that got flipped into the wrong state?"}, {"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 0, "creation_date": 1556056024, "post_id": 55818363, "comment_id": 98306098, "body": "Please report at <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/KT</a> with the steps to reproduce, sample project attached and <a href=\"https://intellij-support.jetbrains.com/hc/articles/207241085\" rel=\"nofollow noreferrer\">idea.log</a>."}], "owner": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1556048690, "creation_date": 1556048690, "question_id": 55818363, "link": "https://stackoverflow.com/questions/55818363/how-do-i-create-a-kotlin-project-in-intellij", "title": "How do I create a Kotlin project in IntelliJ", "body": "<p>None of the instructions available on the JetBrains website or elsewhere allow me to create a Kotlin project, so I assume (as a beginner to Kotlin) I must be missing something. The process of new project creation in JetBrains IDE's is generally quite straightforward and natural (e.g. Python in PyCharm, or even Haskell or Mathematica in IntelliJ); but with Kotlin, I always reach a dead end.</p>\n\n<p>In IntelliJ I'm given several choices for creating a new project, For example, I can select \"Kotlin\" and choose one of the options there (e.g. \"JVM | IDEA\")</p>\n\n<p><a href=\"https://i.stack.imgur.com/RoHJq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RoHJq.png\" alt=\"enter image description here\"></a> </p>\n\n<p>or choose \"Java\" and then \"Kotlin/JVM\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/7P3Gi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7P3Gi.png\" alt=\"enter image description here\"></a></p>\n\n<p>but in both cases, I then arrive at a dead end, unable to create a new Kotlin source (<code>.kt</code>) file to begin my project, since no such file is among the choices presented:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NLNNT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NLNNT.png\" alt=\"enter image description here\"></a></p>\n\n<p>Confusingly, I <em>am</em> able to add Kotlin source files to non Kotlin projects (e.g. Mathematica):</p>\n\n<p><a href=\"https://i.stack.imgur.com/bHRQF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bHRQF.png\" alt=\"enter image description here\"></a></p>\n\n<p>What am I missing? What is the correct way to create a basic Kotlin project in IntelliJ?</p>\n"}, {"tags": ["android", "animation", "kotlin", "animator", "animatorset"], "owner": {"reputation": 11, "user_id": 11382609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baf27efadc22959062179b03b22d1b98?s=128&d=identicon&r=PG&f=1", "display_name": "wikktamm", "link": "https://stackoverflow.com/users/11382609/wikktamm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556047496, "creation_date": 1556047496, "question_id": 55818112, "link": "https://stackoverflow.com/questions/55818112/whats-the-difference-between-animatorsets-and-object-valueanimators-duration", "title": "What&#39;s the difference between AnimatorSet&#39;s and Object/ValueAnimator&#39;s duration?", "body": "<p>I have a AnimatorSet with couple of ObjectAnimators. I can not see the difference between their duration time. Can anyone explain this to me?</p>\n\n<pre><code>&lt;set xmlns:android=\"http://schemas.android.com/apk/res/android\"\n     android:ordering=\"together\"&gt;\n    &lt;objectAnimator\n        android:propertyName=\"translationY\"\n        android:duration=\"1000\"\n        android:interpolator=\"@android:interpolator/bounce\"\n        android:repeatCount=\"3\"\n        android:valueFrom=\"0.0\"\n        android:valueTo=\"-600.0\"\n        android:repeatMode=\"reverse\"\n        android:valueType=\"floatType\"/&gt;\n    &lt;objectAnimator\n        android:propertyName=\"alpha\"\n        android:duration=\"1000\"\n        android:interpolator=\"@android:interpolator/linear\"\n        android:repeatCount=\"3\"\n        android:valueFrom=\"1.0\"\n        android:valueTo=\"0.0\"\n        android:repeatMode=\"reverse\"\n        android:valueType=\"floatType\"\n        /&gt;\n&lt;/set&gt;\n\nval rocketAnimatorSet = AnimatorInflater.loadAnimator(this, R.animator.jump_and_blink) as AnimatorSet\n    val dogeAnimatorSet = AnimatorInflater.loadAnimator(this, R.animator.jump_and_blink) as AnimatorSet\n\n    rocketAnimatorSet.setTarget(rocket)\n    dogeAnimatorSet.setTarget(doge)\n\n\n    val animatorSet = AnimatorSet()\n    animatorSet.playTogether(rocketAnimatorSet, dogeAnimatorSet)\n    animatorSet.duration =9000L\n    animatorSet.start()\n</code></pre>\n"}, {"tags": ["android", "kotlin", "admob", "ads", "google-dfp"], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 11334402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c72d18a084c745cb0c2de3accd1b06?s=128&d=identicon&r=PG&f=1", "display_name": "Kasiopeous", "link": "https://stackoverflow.com/users/11334402/kasiopeous"}, "is_accepted": false, "score": 0, "last_activity_date": 1556189263, "creation_date": 1556189263, "answer_id": 55847528, "question_id": 55817950, "link": "https://stackoverflow.com/questions/55817950/how-to-limit-redirects-in-the-android-native-app-ads/55847528#55847528", "title": "How to limit redirects in the Android native App Ads?", "body": "<p>Usually the different advertisers which are supplying ads to AdMob are setting some redirect urls in order to be able to track some of the data. I do not think there is a way in which you can restrict the redirects since you have no control over the data which is loaded in your ad views. I think the only approach you can take is to set extras to your ad request - e.g. the Native ads for AdMob you can pass a bundle in which you can state whether you want the ad to be personalized or not. I think in this case if you opt for the option of non personalized it should limit the amount of data which is collected through those redirects. Example is below:</p>\n\n<pre><code>val adExtras = Bundle()\n\n//\"npa\" stands for Non-personalized ad\nadExtras.putString(\"npa\", \"1\") //you can put \"0\" respectively if you want personalized \nadView.loadAd(AdRequestBuilder()\n             .addNetworkExtrasBundle(AdMobAdapter::class.java, adExtras)\n             .build())\n</code></pre>\n\n<p>For the fraudulent ads my question is are you using any other ad networks to mediate to when AdMob is unable to fill a specific ad request? From personal experience I have noticed that some of the smaller ad networks tend to gather data which is not very privacy-aware, so this can lead to some of your users feeling that you are doing something shady. However, I do not think there is anything else which you can do.</p>\n"}], "owner": {"reputation": 113, "user_id": 3285525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/20656038df5c1357c51c6dbb64652953?s=128&d=identicon&r=PG&f=1", "display_name": "user3285525", "link": "https://stackoverflow.com/users/3285525/user3285525"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556195275, "creation_date": 1556046760, "last_edit_date": 1556195275, "question_id": 55817950, "link": "https://stackoverflow.com/questions/55817950/how-to-limit-redirects-in-the-android-native-app-ads", "title": "How to limit redirects in the Android native App Ads?", "body": "<p>I have an Android App it's very popular and I make money by showing banner Ads on my App. The problem I am facing is there is no way for me to block Ads that have unlimited redirects. I am being hammered with fraudulent Ads and they download tons of data in my App and my users keep complaining about how much data my App is consuming. So coming to specifics does GMA SDK provides any capability of stopping these redirects or is there any other solution/library someone knows that can help resolve this issue.</p>\n\n<p>I take a reactive approach working with Charles proxy identifying the individual Ads that are responsible for unlimited redirects and then reporting to google or third-party Ad servers.</p>\n\n<p>Expected: Able to restrict the number of the redirects a banner Ad can do in my Android App.</p>\n\n<p>Actual: Unlimited redirects in some of the banner Ads</p>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11142387, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HZx25RrVIo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reb0BcqfamoFrTG0twTwqSo81pcsw/mo/photo.jpg?sz=128", "display_name": "Wilman Rojas", "link": "https://stackoverflow.com/users/11142387/wilman-rojas"}, "edited": false, "score": 0, "creation_date": 1556052904, "post_id": 55819117, "comment_id": 98304965, "body": "Really i am so lost. :&#39;( , I am new in android. But i&#39;m just want take the value from notification and pass to fragment. The problem is thar i dont found info in Kotlin."}], "tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1556052138, "creation_date": 1556052138, "answer_id": 55819117, "question_id": 55817873, "link": "https://stackoverflow.com/questions/55817873/how-to-call-a-method-of-the-fragment-from-an-activity-and-sending-data-to-fragme/55819117#55819117", "title": "How to call a method of the fragment from an activity and sending data to fragment at the same time in Kotlin", "body": "<p><strong>Problem:</strong> You are trying to assign an <code>Int</code> to <code>MutableLiveData&lt;Int&gt;</code>.</p>\n\n<p><strong>Solution:</strong> What you want to do instead is assigning the value held by the <code>MutableLiveData&lt;Int&gt;</code> wrapper using the <a href=\"https://developer.android.com/reference/android/arch/lifecycle/MutableLiveData.html#setValue(T)\" rel=\"nofollow noreferrer\">setter</a>:</p>\n\n<pre><code>public class StatusStudent: ViewModel() {\n    val status = MutableLiveData&lt;Int&gt;()\n    fun setStatus(newStatus: Int) {\n        status.value = newStatus\n    }\n}\n</code></pre>\n\n<p>Note: <code>status</code> should most likely be a <code>val</code> (instead of a <code>var</code>) since you are already using a mutable wrapper and don't want to change the reference of it but the value!</p>\n"}], "owner": {"reputation": 13, "user_id": 11142387, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HZx25RrVIo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reb0BcqfamoFrTG0twTwqSo81pcsw/mo/photo.jpg?sz=128", "display_name": "Wilman Rojas", "link": "https://stackoverflow.com/users/11142387/wilman-rojas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556070118, "creation_date": 1556046405, "last_edit_date": 1556070118, "question_id": 55817873, "link": "https://stackoverflow.com/questions/55817873/how-to-call-a-method-of-the-fragment-from-an-activity-and-sending-data-to-fragme", "title": "How to call a method of the fragment from an activity and sending data to fragment at the same time in Kotlin", "body": "<p>I need to call a method of a fragment with event <code>onStart()</code> of activity. I found a lot of answers but Java I need in Kotlin. the same time the onStart event take values for sending to the fragment. I think that I can do this with ViewModel but I try set the value in the model I have the error \"mismatch\".</p>\n\n<pre><code>public class StatusStudent: ViewModel(){\n    var  status = MutableLiveData&lt;Int&gt;()\n    fun setStatus(newStatus: Int ){\n        status = newStatus //Here Error \"Mismatch\"\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-coroutines", "networkonmainthread"], "comments": [{"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 0, "creation_date": 1556043973, "post_id": 55816145, "comment_id": 98301238, "body": "You&#39;ll need to provide the stack trace to even begin answering that question, since we cannot infer from the provided code what is actually calling the function and causing the exception."}], "answers": [{"comments": [{"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 0, "creation_date": 1556043905, "post_id": 55817031, "comment_id": 98301209, "body": "Even if the suspend function never suspends it is being called in a <code>CoroutineScope.async</code> context, so it should execute on the IO dispatcher regardless."}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1556042760, "creation_date": 1556042760, "answer_id": 55817031, "question_id": 55816145, "link": "https://stackoverflow.com/questions/55816145/networkonmainthreadexception-while-launching-coroutines-via-dispatchers-io/55817031#55817031", "title": "NetworkOnMainThreadException while launching coroutines via `Dispatchers.IO`", "body": "<p>Marking a function <code>suspend</code> does not make it suspendable, you have to ensure the work actually happens in a background thread.</p>\n\n<p>You have this</p>\n\n<pre><code>override suspend fun run(params: Params) = repository.getContactHistory(params.userId, params.contactId)\n</code></pre>\n\n<p>which calls this</p>\n\n<pre><code>override fun getContactHistory(userId: Long, contactId: Long): Either&lt;Failure, ContactHistory&gt; {\n    return request(cloudStore.get().getContactHistory(userId, contactId), {it}, ContactHistory(null, null))\n}\n</code></pre>\n\n<p>These are all synchronous, your <code>suspend</code> modifier is not doing anything here.</p>\n\n<p>A quick fix would be to change your repository like this</p>\n\n<pre><code>override suspend fun getContactHistory(userId: Long, contactId: Long): Either&lt;Failure, ContactHistory&gt; {\nreturn withContext(Dispatchers.IO) {\n    request(cloudStore.get().getContactHistory(userId, contactId), {it}, ContactHistory(null, null))\n    }\n}\n</code></pre>\n\n<p>But a much better solution would be to use the Coroutine adapter for Retrofit.</p>\n"}, {"tags": [], "owner": {"reputation": 231, "user_id": 10162475, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tVV554TDC9Q/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rfSrxWHK3uTofT4C2wwoilQtdv7w/mo/photo.jpg?sz=128", "display_name": "C&#233;sar Chr&#233;tien", "link": "https://stackoverflow.com/users/10162475/c%c3%a9sar-chr%c3%a9tien"}, "is_accepted": false, "score": 0, "last_activity_date": 1556045663, "creation_date": 1556045663, "answer_id": 55817702, "question_id": 55816145, "link": "https://stackoverflow.com/questions/55816145/networkonmainthreadexception-while-launching-coroutines-via-dispatchers-io/55817702#55817702", "title": "NetworkOnMainThreadException while launching coroutines via `Dispatchers.IO`", "body": "<p>The problem is is that you're not creating a coroutine anywhere. You can use the higher order function <code>suspendCoroutine</code> for this. A simple example would be like so:</p>\n\n<pre><code>private suspend fun &lt;T, R&gt; request(call: Call&lt;T&gt;, transform: (T) -&gt; R, default: T): Either&lt;Failure, R&gt; {\n        return suspendCoroutine { continuation -&gt;\n            continuation.resume(try {\n                val response = call.execute()\n                when (response.isSuccessful) {\n                    true -&gt; Either.Right(transform((response.body() ?: default)))\n                    false -&gt; Either.Left(Failure.GenericFailure())\n                }\n            } catch (exception: Throwable) {\n                Either.Left(Failure.GenericFailure())\n            })\n        }\n    }\n</code></pre>\n\n<p>There's a lot of ways you can go with this, too. Note this function will never throw an exception. I think that's intended, but if you want to propagate it upwards to be able to wrap it in a <code>try-catch</code> block for example, you could use <code>continuation.resumeWithException(...)</code>.</p>\n\n<p>Since this function returns an actual coroutine, your <code>withContext(Dispatchers.IO)</code> should work as intended. Hope that helps!</p>\n"}], "owner": {"reputation": 2654, "user_id": 3917064, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/eS3Ul.jpg?s=128&g=1", "display_name": "Orbit", "link": "https://stackoverflow.com/users/3917064/orbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1556045663, "creation_date": 1556038991, "question_id": 55816145, "link": "https://stackoverflow.com/questions/55816145/networkonmainthreadexception-while-launching-coroutines-via-dispatchers-io", "title": "NetworkOnMainThreadException while launching coroutines via `Dispatchers.IO`", "body": "<p>I'm attempting to make a basic network call using the View/ViewModel/UseCase/Repository pattern. The main async call is performed via Coroutines, which are both launched using <code>Dispatchers.IO</code>.</p>\n\n<p>To start, here is the relevant code:</p>\n\n<p><strong>ViewModel:</strong></p>\n\n<pre><code>class ContactHistoryViewModel @Inject constructor(private val useCase: GetContactHistory) : BaseViewModel() {\n    // ...\n    fun getContactHistory(userId: Long, contactId: Long) {\n        useCase(GetContactHistory.Params(userId, contactId)) { it.either(::onFailure, ::onSuccess) }\n    }\n}\n</code></pre>\n\n<p><strong>GetContactHistory UseCase:</strong></p>\n\n<pre><code>class GetContactHistory @Inject constructor(private val repository: ContactRepository) : UseCase&lt;ContactHistory, GetContactHistory.Params&gt;() {\n\n    override suspend fun run(params: Params) = repository.getContactHistory(params.userId, params.contactId)\n    data class Params(val userId: Long, val contactId: Long)\n}\n</code></pre>\n\n<p><strong>Base UseCase class used above:</strong></p>\n\n<pre><code>abstract class UseCase&lt;out Type, in Params&gt; where Type : Any {\n\n    abstract suspend fun run(params: Params): Either&lt;Failure, Type&gt;\n\n    operator fun invoke(params: Params, onResult: (Either&lt;Failure, Type&gt;) -&gt; Unit = {}) {\n        val job = GlobalScope.async(Dispatchers.IO) { run(params) }\n        GlobalScope.launch(Dispatchers.IO) { onResult(job.await()) }\n    }\n}\n</code></pre>\n\n<p><strong>Finally, the Repository:</strong></p>\n\n<pre><code>class ContactDataRepository(...) : SyncableDataRepository&lt;ContactDetailDomainModel&gt;(cloudStore.get(), localStore),\n        ContactRepository {\n\n    override fun getContactHistory(userId: Long, contactId: Long): Either&lt;Failure, ContactHistory&gt; {\n        return request(cloudStore.get().getContactHistory(userId, contactId), {it}, ContactHistory(null, null))\n    }\n\n    /**\n     * Executes the request.\n     * @param call the API call to execute.\n     * @param transform a function to transform the response.\n     * @param default the value returned by default.\n     */\n    private fun &lt;T, R&gt; request(call: Call&lt;T&gt;, transform: (T) -&gt; R, default: T): Either&lt;Failure, R&gt; {\n        return try {\n            val response = call.execute()\n            when (response.isSuccessful) {\n                true -&gt; Either.Right(transform((response.body() ?: default)))\n                false -&gt; Either.Left(Failure.GenericFailure())\n            }\n        } catch (exception: Throwable) {\n            Either.Left(Failure.GenericFailure())\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Summary:</strong>\nPlacing a debug breakpoint in that <code>catch{}</code> block in the repository (seen directly above) shows that a <code>android.os.NetworkOnMainThreadException</code> is being thrown. This is strange, given that both coroutines are launched with a context of <code>Dispatchers.IO</code>, not <code>Dispatchers.Main</code> (Android's main UI thread).</p>\n\n<p><strong>Question:</strong>\nWhy is the aforementioned exception being thrown, and how can this code be corrected?</p>\n"}, {"tags": ["android", "kotlin", "filter", "openfiledialog"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1556041317, "post_id": 55815738, "comment_id": 98300062, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/27407157/android-file-chooser-with-specific-file-extensions\">Android file chooser with specific file extensions</a>"}, {"owner": {"reputation": 111, "user_id": 3426262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee54bd0a76c93c09680573b1d6df0fd6?s=128&d=identicon&r=PG&f=1", "display_name": "csk", "link": "https://stackoverflow.com/users/3426262/csk"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1556042557, "post_id": 55815738, "comment_id": 98300590, "body": "Thank you for your answer! I was looking for something better than interact a list of all files and then select those which have the extension that I wish... isn&#39;t there any way to add a filter like <code>.setExtensionFilter(&quot;.xxx&quot;) </code> ? thanks again."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 3426262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee54bd0a76c93c09680573b1d6df0fd6?s=128&d=identicon&r=PG&f=1", "display_name": "csk", "link": "https://stackoverflow.com/users/3426262/csk"}, "edited": false, "score": 0, "creation_date": 1556048572, "post_id": 55817766, "comment_id": 98303085, "body": "Thank you for your answer! the extension I need is <code>.shp</code>. So, it is not so well-known. I think I will do this filter &quot;by hand&quot;."}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 2, "last_activity_date": 1556045951, "creation_date": 1556045951, "answer_id": 55817766, "question_id": 55815738, "link": "https://stackoverflow.com/questions/55815738/open-file-dialog-with-extension-filter-for-a-custom-extension-with-kotlin/55817766#55817766", "title": "Open file dialog with extension filter for a custom extension with kotlin", "body": "<blockquote>\n  <p>Is there any way to set a file extension filter for this intent</p>\n</blockquote>\n\n<p>No, sorry.</p>\n\n<blockquote>\n  <p><code>it doesn't work if I put it here (\".xxx\")</code></p>\n</blockquote>\n\n<p>That is because <code>setType()</code> takes a MIME type, not a file extension. If your file extension is common and maps to a well-known MIME type, you might try using that MIME type with <code>setType()</code>.</p>\n"}], "owner": {"reputation": 111, "user_id": 3426262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee54bd0a76c93c09680573b1d6df0fd6?s=128&d=identicon&r=PG&f=1", "display_name": "csk", "link": "https://stackoverflow.com/users/3426262/csk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "accepted_answer_id": 55817766, "answer_count": 1, "score": 1, "last_activity_date": 1556045951, "creation_date": 1556037200, "last_edit_date": 1556039960, "question_id": 55815738, "link": "https://stackoverflow.com/questions/55815738/open-file-dialog-with-extension-filter-for-a-custom-extension-with-kotlin", "title": "Open file dialog with extension filter for a custom extension with kotlin", "body": "<p>Is there any way to set a file extension filter for this intent:\nI want to filter files with this extension \".xxx\"</p>\n\n<pre><code>val intent = Intent()\n                .setType(\"*/*\") // &lt;- it doesn't work if I put it here (\".xxx\")\n                .setAction(Intent.ACTION_GET_CONTENT)\n            startActivityForResult(Intent.createChooser(intent, \"Select a file (.xxx)\"), OPEN_FILE_CODE)\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["android", "kotlin", "android-espresso", "android-instrumentation", "android-junit"], "answers": [{"tags": [], "owner": {"reputation": 9433, "user_id": 271877, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/jiCq2.jpg?s=128&g=1", "display_name": "Moritz", "link": "https://stackoverflow.com/users/271877/moritz"}, "is_accepted": false, "score": 0, "last_activity_date": 1580921182, "creation_date": 1580921182, "answer_id": 60080437, "question_id": 55815558, "link": "https://stackoverflow.com/questions/55815558/how-do-i-use-an-activitytestrule-with-classrule-in-kotlin/60080437#60080437", "title": "How do I use an ActivityTestRule with @ClassRule in Kotlin?", "body": "<p>You are not doing anything wrong. It is a shortcoming of the <code>AndroidJUnit4</code> test runner that does not execute rules with <code>@ClassRule</code> annotations. You can remove the <code>@RunWith</code> annotation and see the rule being executed but crashing.</p>\n"}], "owner": {"reputation": 11256, "user_id": 1015595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3SRWR.jpg?s=128&g=1", "display_name": "Big McLargeHuge", "link": "https://stackoverflow.com/users/1015595/big-mclargehuge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1580921182, "creation_date": 1556036586, "last_edit_date": 1556124884, "question_id": 55815558, "link": "https://stackoverflow.com/questions/55815558/how-do-i-use-an-activitytestrule-with-classrule-in-kotlin", "title": "How do I use an ActivityTestRule with @ClassRule in Kotlin?", "body": "<p>I suspect my question is the same as <a href=\"https://stackoverflow.com/q/35820936/1015595\">this one</a>, but the code there is incomplete and I must be missing something.</p>\n\n<p>Here's my test class:</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\nclass MyTest {\n\n    companion object {\n\n        @ClassRule\n        @JvmField\n        val activityTestRule = ActivityTestRule(MainActivity::class.java, true, true)\n    }\n\n    @Test\n    fun verifySomething() {\n        onView(withId(R.id.something)).perform(click())\n    }\n}\n</code></pre>\n\n<p>The test fails with the following error:</p>\n\n<pre><code>java.lang.RuntimeException: No activities found. Did you t to launch the activity by calling getActivity() or startActivitySync or similar?\nat android.support.test.espresso.base.RootViewPicker.waitForAtLeastOneActivityToBeResumed(RootViewPicker.java:169)\nat android.support.test.espresso.base.RootViewPicker.get(RootViewPicker.java:83)\nat android.support.test.espresso.ViewInteractionModule.provideRootView(ViewInteractionModule.java:77)\nat android.support.test.espresso.ViewInteractionModule_ProvideRootViewFactory.proxyProvideRootView(ViewInteractionModule_ProvideRootViewFactory.java:35)\nat android.support.test.espresso.ViewInteractionModule_ProvideRootViewFactory.get(ViewInteractionModule_ProvideRootViewFactory.java:24)\nat android.support.test.espresso.ViewInteractionModule_ProvideRootViewFactory.get(ViewInteractionModule_ProvideRootViewFactory.java:10)\nat android.support.test.espresso.base.ViewFinderImpl.getView(ViewFinderImpl.java:62)\nat android.support.test.espresso.ViewInteraction.doPerform(ViewInteraction.java:218)\nat android.support.test.espresso.ViewInteraction.access$100(ViewInteraction.java:63)\nat android.support.test.espresso.ViewInteraction$1.call(ViewInteraction.java:153)\nat android.support.test.espresso.ViewInteraction$1.call(ViewInteraction.java:150)\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\nat android.os.Handler.handleCallback(Handler.java:873)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:193)\nat android.app.ActivityThread.main(ActivityThread.java:6669)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["function", "kotlin", "functional-programming"], "answers": [{"tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 1, "last_activity_date": 1556039236, "creation_date": 1556039236, "answer_id": 55816212, "question_id": 55815552, "link": "https://stackoverflow.com/questions/55815552/returning-anonymous-functions-rather-than-lambda-function/55816212#55816212", "title": "Returning anonymous functions rather than lambda function", "body": "<p>You can return anonymous functions. Just add <code>return</code> statement before <code>when</code> and it will work:</p>\n\n<pre><code>fun wrong() : (String) -&gt; String {\n    return fun(s: String): String {\n        return when {\n            s.isEmpty() -&gt; \"Empty\"\n            else -&gt; s.reversed()\n        }\n    }\n}\n</code></pre>\n\n<p>And you can call it something like this:</p>\n\n<pre><code>wrong()(\"string\")\n// or using a variable:\nval v = wrong()\nv(\"string\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 2, "last_activity_date": 1556055406, "last_edit_date": 1556055406, "creation_date": 1556051415, "answer_id": 55818968, "question_id": 55815552, "link": "https://stackoverflow.com/questions/55815552/returning-anonymous-functions-rather-than-lambda-function/55818968#55818968", "title": "Returning anonymous functions rather than lambda function", "body": "<p>First, let's examine why <code>right1</code> and <code>right2</code> are correct. Since you return a lambda and the lambda will return its last expression which is <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow noreferrer\"><code>when</code></a> it will work for <code>right1</code> and <code>right2</code>.</p>\n\n<p>Now, let's take a look at <code>wrong</code>. The compiler will give the following error.</p>\n\n<blockquote>\n  <p>A 'return' expression is required in a function with a block body.</p>\n</blockquote>\n\n<p>So, all you have to do is add a <code>return</code> statement before <code>when</code>, like so:</p>\n\n<pre><code>fun notWrong() : (String) -&gt; String {\n    return fun(s: String): String {\n        return when {\n            s.isEmpty() -&gt; \"Empty\"\n            else -&gt; s.reversed()\n        }\n    }\n}\n</code></pre>\n\n<p>But there is a better way! Note, that you can take advantage of Kotlin's type inference like that:</p>\n\n<pre><code>fun notWrong() = { s: String -&gt; // parameter of lambda is a String\n    when { // String is inferred as return type of when expression\n        s.isEmpty() -&gt; \"Empty\"\n        else -&gt; s.reversed()\n    }\n}\n</code></pre>\n\n<p>This is less redundant and does the same thing: return a lambda which takes a <code>String</code> as parameter and returns a <code>String</code>.</p>\n\n<p>Invoking the returned lambda will work like this:</p>\n\n<pre><code>notWrong()(\"Hello World\")\n</code></pre>\n\n<p>The first pair of parenthesis are for the invocation of <code>notWrong</code> and the second for the invocation of the lambda.</p>\n"}], "owner": {"reputation": 892, "user_id": 3331931, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/667d26246734ae54783faeebf84ced20?s=128&d=identicon&r=PG", "display_name": "fcracker79", "link": "https://stackoverflow.com/users/3331931/fcracker79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556055406, "creation_date": 1556036570, "question_id": 55815552, "link": "https://stackoverflow.com/questions/55815552/returning-anonymous-functions-rather-than-lambda-function", "title": "Returning anonymous functions rather than lambda function", "body": "<p>I cannot understand why the <code>wrong</code> function is illegal in Kotlin</p>\n\n<pre><code>\nfun right1() : (String) -&gt; String {\n    return {\n        when {\n            it.isEmpty() -&gt; \"Empty\"\n            else -&gt; it.reversed()\n        }\n    }\n}\n\n\nfun wrong() : (String) -&gt; String {\n    return fun(s: String): String {\n        when {\n            s.isEmpty() -&gt; \"Empty\"\n            else -&gt; s.reversed()\n        }\n    }\n}\n\nfun right2() : (String) -&gt; String {\n    return {\n        s: String -&gt; \n        when {\n            s.isEmpty() -&gt; \"Empty\"\n            else -&gt; s.reversed()\n        }\n    }\n}\n</code></pre>\n\n<p>It seems to be that I can only return lambda functions and non anonymous ones.</p>\n\n<p>Sorry for the trivial question, I am a Kotlin newbye.</p>\n"}, {"tags": ["android", "kotlin", "shadow", "alpha", "elevation"], "comments": [{"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 1, "creation_date": 1611265283, "post_id": 55815430, "comment_id": 116403098, "body": "To draw a transparent View, Android calls <code>canvas.saveLayerAlpha</code> which creates an intermediate buffer before drawing, calls <code>draw()</code>, and then <code>canvas.restore()</code> which blends the buffer into the surface (see <code>View.draw(Canvas canvas, ViewGroup parent, long drawingTime)</code>). Unfortunately, the bounds passed to <code>saveLayerAlpha</code> are not under our control, so clipChildren is effectively true if alpha != 1. Thus, there&#39;s no &#39;canonical&#39; way, only workarounds."}], "owner": {"reputation": 41, "user_id": 11400758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b75e89107023594fc6d93b78c79a9d3?s=128&d=identicon&r=PG&f=1", "display_name": "methedroid", "link": "https://stackoverflow.com/users/11400758/methedroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1556036804, "creation_date": 1556036138, "last_edit_date": 1556036804, "question_id": 55815430, "link": "https://stackoverflow.com/questions/55815430/recyclerview-items-shadow-clipped-when-rv-alpha-is-less-than-1-0", "title": "RecyclerView items shadow clipped when RV alpha is less than 1.0", "body": "<p>I'm working on a RecyclerView that shows in horizontal orientation a list of items.\nEvery item is a CardView with <code>elevation=8dp</code>. The elevation gives the items a shadow that gets cut by the RecyclerView. So to make it work I added <code>android:clipChildren=\"false\"</code> and <code>android:clipToPadding=\"false\"</code> so that the shadow is no longer clipped. \nEverything works fine up until the alpha of the RV changes.</p>\n\n<p>The animation I use to hide RV:</p>\n\n<pre><code>view.apply {\n            animate().alpha(0f)\n                    .setDuration(300)\n                    .withEndAction { view.visibility = outVisibility }\n                    .start()\n        }\n</code></pre>\n\n<p>...and the one to show it:</p>\n\n<pre><code>view.apply {\n            if (visibility != View.VISIBLE) alpha = 0f\n            animate().alpha(1f)\n                    .setDuration(300)\n                    .withStartAction { view.visibility = View.VISIBLE }\n                    .start()\n        }\n</code></pre>\n\n<p><strong>ISSUE</strong></p>\n\n<p>As long as the <code>alpha</code> of RV is lower than <code>1.0</code> the items inside of the RV are being clipped(the shadows). As soon as the <code>alpha</code> reaches <code>1.0</code> the shadows suddenly stop being clipped and everything looks nice again.</p>\n\n<p>Is there anything I can do to fix it?</p>\n\n<p>Same issue occurs if I set the <code>alpha</code> to a fixed value below <code>1.0</code> in XML(not animating at all in this case).\nAlso the same issue occurs when I try to animate <code>alpha</code> of items inside the RV.</p>\n\n<p><strong>When RV <code>alpha = 1.0</code></strong>\n<a href=\"https://www.dropbox.com/s/g1cun1jqv0op0qw/Screenshot_20190423-180952__01.jpg?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/g1cun1jqv0op0qw/Screenshot_20190423-180952__01.jpg?dl=0</a></p>\n\n<p><strong>When RV <code>alpha = 0.9</code></strong>\n<a href=\"https://www.dropbox.com/s/s06f9f3orci135m/Screenshot_20190423-180819__01.jpg?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/s06f9f3orci135m/Screenshot_20190423-180819__01.jpg?dl=0</a></p>\n\n<p><strong>UPDATE 1</strong>\nWhen I try to animate <code>alpha</code> RV parent instead of RV itself then the issue disappears. But it feels kinda hacky to have to wrap RV in extra parent just to animate its alpha :/</p>\n"}, {"tags": ["kotlin", "rx-java2", "android-livedata"], "answers": [{"tags": [], "owner": {"reputation": 2331, "user_id": 2333010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7134e36891735da054e22fbe01e903c2?s=128&d=identicon&r=PG", "display_name": "Ricardo Costeira", "link": "https://stackoverflow.com/users/2333010/ricardo-costeira"}, "is_accepted": false, "score": 6, "last_activity_date": 1556028023, "creation_date": 1556028023, "answer_id": 55813000, "question_id": 55812658, "link": "https://stackoverflow.com/questions/55812658/is-observeon-requried-for-livedata-postvalue/55813000#55813000", "title": "Is observeOn requried for livedata postvalue?", "body": "<p><code>observeOn</code> will force all operations below it to run on a thread from the scheduler you pass as its parameter. In this case, you're forcing the subscription to work on the main thread. Read <a href=\"http://reactivex.io/documentation/operators/observeon.html\" rel=\"noreferrer\">this</a> for more information.</p>\n\n<p><code>Livedata</code> has two ways of updating its value: you either do <code>livedata.setValue(newValue)</code> (<code>livedata.value = newValue</code> in Kotlin) or <code>livedata.postValue(newValue)</code>. The first option only works on the main thread. On the other hand, <code>postValue</code> is commonly used to set the value from a background thread (the background thread actually posts a task for the main thread to update the value).</p>\n\n<p>Given all this, in this case, since you're using <code>postValue</code>, you don't need to force the subscription on the main thread. However, note that since <code>postValue</code> is not synchronous, calling it from the main thread does not guarantee immediate execution. For instance, in your subscriber, if you call a <code>livedata.postValue(newValue)</code> followed by <code>livedata.setValue(anotherValue)</code>, <code>setValue</code> will execute first. In other words, your <code>livedata</code>'s value will be set to <code>anotherValue</code>, and later overridden to <code>newValue</code>. If you want to keep the execution in the main thread, use <code>setValue</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 839, "user_id": 1151799, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/f386b4d43ec2db8888cec5be46254a90?s=128&d=identicon&r=PG", "display_name": "arungiri_10", "link": "https://stackoverflow.com/users/1151799/arungiri-10"}, "is_accepted": false, "score": 0, "last_activity_date": 1556028109, "creation_date": 1556028109, "answer_id": 55813028, "question_id": 55812658, "link": "https://stackoverflow.com/questions/55812658/is-observeon-requried-for-livedata-postvalue/55813028#55813028", "title": "Is observeOn requried for livedata postvalue?", "body": "<p><code>observeOn()</code> -> This method simply changes the thread of all operators further downstream (in the calls that come after).</p>\n\n<p><code>observeOn()</code> -> This only influences the thread that is used when the Observable is subscribed to and it will stay on it downstream</p>\n\n<p>If the above case mentioned in question, if the calls after <code>observeOn(AndroidSchedulers.mainThread())</code> needs to run on UI thread, basically <code>liveData.postValue(it)</code> does some changes on UI thread, then this line is needed. </p>\n\n<p>If it's removed, the further calls will be run on thread spawned by <code>subscribeOn()</code> method.</p>\n\n<p>Below link gives a nice explanation of subscribeOn() and observeOn() method:\n<a href=\"https://medium.com/upday-devs/rxjava-subscribeon-vs-observeon-9af518ded53a\" rel=\"nofollow noreferrer\">https://medium.com/upday-devs/rxjava-subscribeon-vs-observeon-9af518ded53a</a></p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 275, "user_id": 2179276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2fffd88289a3dadce6adea4e730cbda?s=128&d=identicon&r=PG", "display_name": "\u0410\u043d\u0434\u0440\u0456\u0439 \u041f\u0443\u0433\u0430\u0447", "link": "https://stackoverflow.com/users/2179276/%d0%90%d0%bd%d0%b4%d1%80%d1%96%d0%b9-%d0%9f%d1%83%d0%b3%d0%b0%d1%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1556028109, "creation_date": 1556026939, "question_id": 55812658, "link": "https://stackoverflow.com/questions/55812658/is-observeon-requried-for-livedata-postvalue", "title": "Is observeOn requried for livedata postvalue?", "body": "<p>Is observe on part required in this case or posting value in livedata is itself enough for it to be processed correctly.</p>\n\n<pre><code>method()\n  .subscribeOn(Schedulers.io())\n  .observeOn(AndroidSchedulers.mainThread())\n  .subscribe(\n     { liveData.postValue(it) },\n     { Timber.e(it) }\n  )\n</code></pre>\n"}, {"tags": ["spring-boot", "kotlin", "resttemplate"], "answers": [{"comments": [{"owner": {"reputation": 442, "user_id": 8057308, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33407cb9bc8523b55f32c2f85990c758?s=128&d=identicon&r=PG&f=1", "display_name": "Jitendra", "link": "https://stackoverflow.com/users/8057308/jitendra"}, "edited": false, "score": 0, "creation_date": 1556027788, "post_id": 55812856, "comment_id": 98292527, "body": "Yaa Thanks. I know this way and it is working but is it possible to with the message converters that I did in my code?"}, {"owner": {"reputation": 442, "user_id": 8057308, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33407cb9bc8523b55f32c2f85990c758?s=128&d=identicon&r=PG&f=1", "display_name": "Jitendra", "link": "https://stackoverflow.com/users/8057308/jitendra"}, "edited": false, "score": 0, "creation_date": 1556028077, "post_id": 55812856, "comment_id": 98292717, "body": "I referred this link <a href=\"https://www.baeldung.com/spring-httpmessageconverter-rest\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "reply_to_user": {"reputation": 442, "user_id": 8057308, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33407cb9bc8523b55f32c2f85990c758?s=128&d=identicon&r=PG&f=1", "display_name": "Jitendra", "link": "https://stackoverflow.com/users/8057308/jitendra"}, "edited": false, "score": 1, "creation_date": 1556028103, "post_id": 55812856, "comment_id": 98292732, "body": "There is no generic converters in Spring to serialize POJOs to form data, unfortunately."}, {"owner": {"reputation": 442, "user_id": 8057308, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33407cb9bc8523b55f32c2f85990c758?s=128&d=identicon&r=PG&f=1", "display_name": "Jitendra", "link": "https://stackoverflow.com/users/8057308/jitendra"}, "edited": false, "score": 0, "creation_date": 1556028397, "post_id": 55812856, "comment_id": 98292920, "body": "Can you please check the above link in the comment?"}, {"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "reply_to_user": {"reputation": 442, "user_id": 8057308, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33407cb9bc8523b55f32c2f85990c758?s=128&d=identicon&r=PG&f=1", "display_name": "Jitendra", "link": "https://stackoverflow.com/users/8057308/jitendra"}, "edited": false, "score": 1, "creation_date": 1556028622, "post_id": 55812856, "comment_id": 98293062, "body": "It&#39;s not possible with built-in converters. You would have to write your own. But why? You can for example write a helper method in your POJOs <code>toMap</code> that will serialize your object to a <code>LinkedMultiValueMap</code> that you can send with RestTemplate."}, {"owner": {"reputation": 442, "user_id": 8057308, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33407cb9bc8523b55f32c2f85990c758?s=128&d=identicon&r=PG&f=1", "display_name": "Jitendra", "link": "https://stackoverflow.com/users/8057308/jitendra"}, "edited": false, "score": 0, "creation_date": 1556029185, "post_id": 55812856, "comment_id": 98293426, "body": "Thanks!  Actually, with the LinkedMultiValueMap, I have to pass every parameter(suppose if there are 20 or more variables then it is not feasible so) and If in future the parameter will be changed then I have to again change this function so just wanted some generic converters that will convert it automatically."}, {"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "reply_to_user": {"reputation": 442, "user_id": 8057308, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33407cb9bc8523b55f32c2f85990c758?s=128&d=identicon&r=PG&f=1", "display_name": "Jitendra", "link": "https://stackoverflow.com/users/8057308/jitendra"}, "edited": false, "score": 0, "creation_date": 1556029424, "post_id": 55812856, "comment_id": 98293566, "body": "Would be better if the other side just accepted JSON."}, {"owner": {"reputation": 442, "user_id": 8057308, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33407cb9bc8523b55f32c2f85990c758?s=128&d=identicon&r=PG&f=1", "display_name": "Jitendra", "link": "https://stackoverflow.com/users/8057308/jitendra"}, "edited": false, "score": 0, "creation_date": 1556029779, "post_id": 55812856, "comment_id": 98293757, "body": "Yeah true, but I&#39;m consuming an API that requires application/x-www-form-urlencoded. Btw Thanks."}], "tags": [], "owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "is_accepted": true, "score": 5, "last_activity_date": 1556027581, "creation_date": 1556027581, "answer_id": 55812856, "question_id": 55812574, "link": "https://stackoverflow.com/questions/55812574/no-httpmessageconverter-for-com-example-blog-snapengchatrequest-and-content-ty/55812856#55812856", "title": "No HttpMessageConverter for [com.example.blog.SnapEngChatRequest] and content type [application/x-www-form-urlencoded]", "body": "<p>From documentation for <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/util/LinkedMultiValueMap.html\" rel=\"noreferrer\">FormHttpMessageConverter</a> it can:</p>\n\n<blockquote>\n  <p>... read and write the \"application/x-www-form-urlencoded\" media type\n  as MultiValueMap</p>\n</blockquote>\n\n<p>So it can't read it from a POJO. Send your data like this:</p>\n\n<pre><code>val data = LinkedMultiValueMap(\n  mapOf(\"widgetId\" to listOf(widgetId), \"visitorMessage\" to listOf(\"Test\"))\n)\n</code></pre>\n"}], "owner": {"reputation": 442, "user_id": 8057308, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33407cb9bc8523b55f32c2f85990c758?s=128&d=identicon&r=PG&f=1", "display_name": "Jitendra", "link": "https://stackoverflow.com/users/8057308/jitendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4677, "favorite_count": 1, "accepted_answer_id": 55812856, "answer_count": 1, "score": 2, "last_activity_date": 1556027581, "creation_date": 1556026716, "question_id": 55812574, "link": "https://stackoverflow.com/questions/55812574/no-httpmessageconverter-for-com-example-blog-snapengchatrequest-and-content-ty", "title": "No HttpMessageConverter for [com.example.blog.SnapEngChatRequest] and content type [application/x-www-form-urlencoded]", "body": "<p>I wanted to call a post API with form URL encoded header. Here's my code</p>\n\n<pre><code> var data = SnapEngChatRequest(\n            widgetId = widgetId,\n            visitorMessage = \"Test\"\n    )\n\n    val headers = HttpHeaders()\n\n    headers.set(\"x-api-key\", apiKey)\n    headers.set(\"Content-Type\", \"application/x-www-form-urlencoded\")\n\n    val entity = HttpEntity(data, headers)\n\n    val converter = FormHttpMessageConverter()\n    converter.supportedMediaTypes = singletonList(MediaType.APPLICATION_FORM_URLENCODED)\n    restTemplate.messageConverters.add(converter)\n\n    val result = restTemplate.exchange(\n            url,\n            HttpMethod.POST,\n            entity,\n            String::class.java\n    )\n</code></pre>\n\n<p>But unfortunately, it is not working and I'm getting below error</p>\n\n<pre><code>No HttpMessageConverter for [com.example.blog.SnapEngChatRequest] and content type [application/x-www-form-urlencoded]\norg.springframework.web.client.RestClientException: No HttpMessageConverter for [com.example.blog.SnapEngChatRequest] and content type [application/x-www-form-urlencoded]\n</code></pre>\n\n<p>Here, I'm giving the httpMessageConverter but I'm not sure why it is not taking or I'm not sure if I'm doing something wrong here. I have tried everything possible. Any help will be helpful, Thanks! </p>\n"}, {"tags": ["java", "kotlin", "icu"], "comments": [{"owner": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "edited": false, "score": 1, "creation_date": 1556026727, "post_id": 55812416, "comment_id": 98291876, "body": "Have you tried <a href=\"http://icu-project.org/apiref/icu4j/com/ibm/icu/text/NumberFormat.html#parse-java.lang.String-\" rel=\"nofollow noreferrer\">icu-project.org/apiref/icu4j/com/ibm/icu/text/&hellip;</a> , e.g. <code>val esFormatter = RuleBasedNumberFormat(Locale.ENGLISH, RuleBasedNumberFormat.ORDINAL); val n = esFormatter.parse(&quot;sixth&quot;)</code>"}, {"owner": {"reputation": 2399, "user_id": 6073886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/136a6c109e91e7df36f67e14184a2523?s=128&d=identicon&r=PG&f=1", "display_name": "OH GOD SPIDERS", "link": "https://stackoverflow.com/users/6073886/oh-god-spiders"}, "edited": false, "score": 1, "creation_date": 1556026782, "post_id": 55812416, "comment_id": 98291915, "body": "<code>RuleBasedNumberFormat</code> also has a <code>parse</code> method that looks like it is doing what you want."}, {"owner": {"reputation": 390, "user_id": 6240833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vv9RI.jpg?s=128&g=1", "display_name": "Ilias Mentz", "link": "https://stackoverflow.com/users/6240833/ilias-mentz"}, "edited": false, "score": 0, "creation_date": 1556027274, "post_id": 55812416, "comment_id": 98292216, "body": "You guys are right. I tried that but also used it for invalid strings so it threw exception. I had to wrap it with a try-catch."}], "answers": [{"comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1556036129, "post_id": 55812812, "comment_id": 98297562, "body": "\u201cThis should not throw an exception for invalid spelled-out inputs.\u201d  That&#39;s your choice, of course; but in my experience it tends to lead to bigger problems in the long run.  (If it makes sense for this particular need, you could have <code>numberFromSpelledOut</code> throw the exception, and then have the caller catch it.  That would be more explicit, and more flexible.  Though if it can throw an exception, it might make more sense as an extension method rather than an extension property.)"}], "tags": [], "owner": {"reputation": 390, "user_id": 6240833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vv9RI.jpg?s=128&g=1", "display_name": "Ilias Mentz", "link": "https://stackoverflow.com/users/6240833/ilias-mentz"}, "is_accepted": true, "score": 2, "last_activity_date": 1556027431, "creation_date": 1556027431, "answer_id": 55812812, "question_id": 55812416, "link": "https://stackoverflow.com/questions/55812416/spelled-out-number-string-to-integer-using-icu/55812812#55812812", "title": "Spelled-out number (string) to integer using ICU", "body": "<p>After getting help from the comments here is my solution, in case anybody else needs it:</p>\n\n<pre><code>private val String.numberFromSpelledOut: Boolean\n  get() {\n    val esFormatter = RuleBasedNumberFormat(Locale.ENGLISH, RuleBasedNumberFormat.SPELLOUT)\n    return try {\n      return esFormatter.parse(this)\n    } catch (e: ParseException) {\n      \"\"\n    }\n  }\n</code></pre>\n\n<p>This should not throw an exception for invalid spelled-out inputs.</p>\n"}], "owner": {"reputation": 390, "user_id": 6240833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vv9RI.jpg?s=128&g=1", "display_name": "Ilias Mentz", "link": "https://stackoverflow.com/users/6240833/ilias-mentz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 55812812, "answer_count": 1, "score": 2, "last_activity_date": 1556027431, "creation_date": 1556026282, "question_id": 55812416, "link": "https://stackoverflow.com/questions/55812416/spelled-out-number-string-to-integer-using-icu", "title": "Spelled-out number (string) to integer using ICU", "body": "<p>I need to convert a string to an integer. For example, I would like to convert sixth to 6. </p>\n\n<p>I did the reverse one (6 \u2192 sixth) by using IBM's library ICU.</p>\n\n<pre><code>private val String.spellout: String\n  get() {\n    val esFormatter = RuleBasedNumberFormat(Locale.ENGLISH, RuleBasedNumberFormat.SPELLOUT)\n    return esFormatter.format(this.toDouble(), \"%spellout-ordinal\")\n  }\n</code></pre>\n\n<p>I would like to create another method that takes that spelled-out string and converts it to a double (sixth \u2192 6)</p>\n"}, {"tags": ["android", "kotlin", "lint"], "owner": {"reputation": 312, "user_id": 8746644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a519bf2c839cd239b8c5e24a1704dca2?s=128&d=identicon&r=PG&f=1", "display_name": "michpohl", "link": "https://stackoverflow.com/users/8746644/michpohl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1629, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1556030462, "creation_date": 1556025738, "last_edit_date": 1556030462, "question_id": 55812241, "link": "https://stackoverflow.com/questions/55812241/how-to-resolve-obsolete-custom-lint-check-for-my-custom-issueregistry-written", "title": "How to resolve &quot;Obsolete custom lint check&quot; for my custom IssueRegistry written in Kotlin and make it work (Android)", "body": "<p>I am trying to implement custom lint checks (using Kotlin). I have set up a module for my custom checks and added classes to test my first lew lint check, mostly following these two tutorials <a href=\"https://medium.com/@vanniktech/writing-your-first-lint-check-39ad0e90b9e6\" rel=\"noreferrer\">here</a> and <a href=\"https://jayrambhia.com/blog/android-lint\" rel=\"noreferrer\">here</a>.</p>\n\n<p>So I now have a module, I have a custom IssueRegistry, I've created an issue and a Detector class for it. So far it seems complete. I've added a test to check if my lint check works and it looks alright.</p>\n\n<p>I have added my module to the project by referencing it in settings.gradle like this: <code>include ':app', ':somemodule', ':mylintmodule'</code></p>\n\n<p>Now if I run the linter using <code>./gradlew lint</code> I get a lint result file telling me this: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Lint found an issue registry (com.myproject.mylintmodule) which requires a newer API level. That means that the custom lint checks are intended for a newer lint version; please upgrade\r\nLint can be extended with \"custom checks\": additional checks implemented by developers and libraries to for example enforce specific API usages required by a library or a company coding style guideline.\r\n\r\nThe Lint APIs are not yet stable, so these checks may either cause a performance degradation, or stop working, or provide wrong results.\r\n\r\nThis warning flags custom lint checks that are found to be using obsolete APIs and will need to be updated to run in the current lint environment.\r\n\r\nIt may also flag issues found to be using a newer version of the API, meaning that you need to use a newer version of lint (or Android Studio or Gradle plugin etc) to work with these checks.\r\nTo suppress this error, use the issue id \"ObsoleteLintCustomCheck\" as explained in the Suppressing Warnings and Errors section.</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>So it tells me that I am using a newer API verion in my custom lint check, right? This is my custom IssueRegistry (minus some parts not relevant for this problem):</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class MyCustomIssueRegistry : IssueRegistry() {\r\n    override val issues: List&lt;Issue&gt;\r\n        get() = listOf(ISSUE_NAMING_PATTERN)\r\n\r\n    override val api: Int = com.android.tools.lint.detector.api.CURRENT_API\r\n    override val minApi: Int = 1 \r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>From googling this problem and finding <a href=\"https://github.com/JakeWharton/timber/issues/329\" rel=\"noreferrer\">this</a> issue I figured I have to override and set the right API version (and maybe the min API?) by overriding these properties like I did above (this version is my last attempt, directly taken from that issue). \nSo this property can be set to values between -1 and 5, meaning this (taken right out of the lint.detector.api class):</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>/** Describes the given API level */\r\nfun describeApi(api: Int): String {\r\n    return when (api) {\r\n        5 -&gt; \"3.5+\" // 3.5.0-alpha07\r\n        4 -&gt; \"3.4\" // 3.4.0-alpha03\r\n        3 -&gt; \"3.3\" // 3.3.0-alpha12\r\n        2 -&gt; \"3.2\" // 3.2.0-alpha07\r\n        1 -&gt; \"3.1\" // Initial; 3.1.0-alpha4\r\n        0 -&gt; \"3.0 and older\"\r\n        -1 -&gt; \"Not specified\"\r\n        else -&gt; \"Future: $api\"\r\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I have tried all of them, plus the one above adding a minApi override too, and I keep getting the exact same result for each of them. </p>\n\n<p>Also I am unable to locate what other API version this is compared with. Is there a place where this is set for the regular linter in an Android project?</p>\n\n<p>It's also unclear to me what I have to do to make sure my changes got applied - is it enough to change some code, then run lint, or do I have to compile the project first, or build &amp; clean?</p>\n\n<p>Following the tutorials, I added my custom lint check by adding this to the app's build.gradle: <code>lintChecks project(\":mylintmodule\")</code>\nIs that even right? The API issue on my registry class shows up no matter if my lint check is referenced (and hopefully used) like that or not. I have also tried the other method described in the first tutorial, adding this task to the linter module build.gradle:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>defaultTasks 'assemble'\r\n\r\ntask copyLintJar(type: Copy) {\r\n    description = 'Copies the lint jar file into the {user.home}/.android/lint folder.'\r\n    from('build/libs/')\r\n    into(System.getProperty(\"user.home\") + '/.android/lint')\r\n    include(\"*.jar\")\r\n}\r\n\r\n// Runs the copyLintJar task after build has completed.\r\nbuild.finalizedBy(copyLintJar)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>But since I can't figure out how to see if my custom checks are actually run, I don't know if that works as intended either.</p>\n\n<p>So how do I get this warning resolved (since I interpret the text as \"As long as the versions don't match I will not try to run your lint check\"), and how can I make sure my lint check is actually run by the linter?</p>\n"}, {"tags": ["kotlin", "ktor"], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 5232184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3e7ee42e9aaa18454998c4d1a87e6e?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5232184/william"}, "edited": false, "score": 1, "creation_date": 1556025531, "post_id": 55812147, "comment_id": 98291137, "body": "Thanks for quick reply i will try it. It seems parsing manually if possible without doing it that would be better but its better than not work. Thanks agian"}], "tags": [], "owner": {"reputation": 1168, "user_id": 5232267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff599a1fcc840083e88709c33bdccab8?s=128&d=identicon&r=PG&f=1", "display_name": "Sabeeh", "link": "https://stackoverflow.com/users/5232267/sabeeh"}, "is_accepted": true, "score": 1, "last_activity_date": 1556027462, "last_edit_date": 1556027462, "creation_date": 1556025428, "answer_id": 55812147, "question_id": 55811989, "link": "https://stackoverflow.com/questions/55811989/how-parse-raw-json-list-of-data-posted-in-ktor/55812147#55812147", "title": "How parse raw json list of data posted in ktor", "body": "<p>You can do like this</p>\n\n<pre><code>val json = call.receive&lt;String&gt;()\nval objs = Gson().fromJson(json, Array&lt;MyClass&gt;::class.java)\nobjs[0].name\n</code></pre>\n\n<p><strong>Updated</strong></p>\n\n<p>You can also create extention function for that like this</p>\n\n<pre><code>suspend inline fun &lt;reified T&gt; ApplicationCall.safeReceive(): T {\n    val json = this.receiveOrNull&lt;String&gt;()\n    return Gson().fromJson(json, T::class.java)\n}\n</code></pre>\n\n<p>then use it like this</p>\n\n<pre><code>val objs = call.safeReceive&lt;Array&lt;MyClass&gt;&gt;()\nobjs[0].name\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2178, "user_id": 2681195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ft0p.png?s=128&g=1", "display_name": "findall", "link": "https://stackoverflow.com/users/2681195/findall"}, "edited": false, "score": 0, "creation_date": 1565864296, "post_id": 57401820, "comment_id": 101484111, "body": "This had been working but after updating ktor to v1.2.3 from v1.1.3 no longer works.."}], "tags": [], "owner": {"reputation": 1846, "user_id": 3806701, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/14b442768a2a85ed53e71914d88ae926?s=128&d=identicon&r=PG&f=1", "display_name": "cs_pupil", "link": "https://stackoverflow.com/users/3806701/cs-pupil"}, "is_accepted": false, "score": 1, "last_activity_date": 1565892282, "last_edit_date": 1565892282, "creation_date": 1565209327, "answer_id": 57401820, "question_id": 55811989, "link": "https://stackoverflow.com/questions/55811989/how-parse-raw-json-list-of-data-posted-in-ktor/57401820#57401820", "title": "How parse raw json list of data posted in ktor", "body": "<p>Using your code with <code>Array</code> instead of <code>List</code> worked for me using ktor v1.2.3:</p>\n\n<pre><code>val objs = call.receive&lt;Array&lt;MyClass&gt;&gt;() \nval name = objs[0].name\n</code></pre>\n\n<p><br/>  </p>\n\n<p>Side Note:  </p>\n\n<p>I later changed my data class to this format to help with mapping from database rows to a data class (i.e. to use BeanPropertyRowMapper). I don't remember this having an effect on de/serialization, but if the first part still isn't working for you, you may try this...</p>\n\n<pre><code>data class MyClass(\n    var id: Int? = null,\n    var name: String? = null,\n    var description: String? = null,\n)\n</code></pre>\n\n<p>Reference: <a href=\"https://stackoverflow.com/q/47134138/3806701\">Kotlin data class optional variable</a></p>\n"}], "owner": {"reputation": 185, "user_id": 5232184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3e7ee42e9aaa18454998c4d1a87e6e?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5232184/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1597, "favorite_count": 1, "accepted_answer_id": 55812147, "answer_count": 2, "score": 5, "last_activity_date": 1565892282, "creation_date": 1556024889, "question_id": 55811989, "link": "https://stackoverflow.com/questions/55811989/how-parse-raw-json-list-of-data-posted-in-ktor", "title": "How parse raw json list of data posted in ktor", "body": "<p>I'm posting json array of objects. I'm trying to parse it in code like this</p>\n\n<pre><code>val objs = call.receive&lt;List&lt;MyClass&gt;&gt;() // this work fine\nval name objs[0].name // this throw exception LinkedTreeMap cannot be cast to MyClass\n</code></pre>\n\n<p>In above code second line throws exception <code>com.google.gson.internal.LinkedTreeMap cannot be cast to MyClass</code></p>\n\n<p>If i post simple object and parse it in ktor with  <code>call.receive&lt;MyClass&gt;()</code> then it will work fine. So issue is only when parsing list of objects.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1556024428, "post_id": 55811813, "comment_id": 98290407, "body": "&quot;I have another data class LocalBooks with exactly same fields like class Books&quot; -- why? Why not have one <code>Books</code> class that has an <code>isLocal: Boolean = false</code> property that you set to <code>true</code> for local books? If you do that, then a simple <code>copy()</code> is sufficient for your needs."}, {"owner": {"reputation": 500, "user_id": 3809653, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Ezd9I.png?s=128&g=1", "display_name": "ArbenMaloku", "link": "https://stackoverflow.com/users/3809653/arbenmaloku"}, "edited": false, "score": 0, "creation_date": 1556024888, "post_id": 55811813, "comment_id": 98290704, "body": "Or you can even extend your &quot;Books&quot; class in case you don&#39;t want to have a solution as the comment above."}, {"owner": {"reputation": 343, "user_id": 10964503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df2cbf6c760635f9b604e36a67ba4077?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Efimov", "link": "https://stackoverflow.com/users/10964503/mikhail-efimov"}, "edited": false, "score": 0, "creation_date": 1556025894, "post_id": 55811813, "comment_id": 98291333, "body": "You may use reflection. Or dismiss classes completely and use <code>Map</code> implementation to mimic dynamic languages behavior."}], "answers": [{"comments": [{"owner": {"reputation": 74, "user_id": 11238317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00cbb021803e4902b13e5202fa20c653?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed farhan", "link": "https://stackoverflow.com/users/11238317/mohammed-farhan"}, "edited": false, "score": 0, "creation_date": 1556028529, "post_id": 55812864, "comment_id": 98292999, "body": "hi what is &quot;bar&quot; here?"}, {"owner": {"reputation": 3168, "user_id": 778951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKT8D.jpg?s=128&g=1", "display_name": "jhavatar", "link": "https://stackoverflow.com/users/778951/jhavatar"}, "reply_to_user": {"reputation": 74, "user_id": 11238317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00cbb021803e4902b13e5202fa20c653?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed farhan", "link": "https://stackoverflow.com/users/11238317/mohammed-farhan"}, "edited": false, "score": 0, "creation_date": 1556049678, "post_id": 55812864, "comment_id": 98303510, "body": "hi. just a throwaway placeholder value for <code>LocalBook</code>&#39;s <code>localInfo</code>  property."}], "tags": [], "owner": {"reputation": 3168, "user_id": 778951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKT8D.jpg?s=128&g=1", "display_name": "jhavatar", "link": "https://stackoverflow.com/users/778951/jhavatar"}, "is_accepted": false, "score": 0, "last_activity_date": 1556027975, "last_edit_date": 1556027975, "creation_date": 1556027608, "answer_id": 55812864, "question_id": 55811813, "link": "https://stackoverflow.com/questions/55811813/kotlin-data-class-copy-field-values-of-one-data-class-to-another-data-class-wit/55812864#55812864", "title": "Kotlin data class, copy field values of one data class to another data class with same fields", "body": "<p>How about a <em>composite reuse principle</em> solution:</p>\n\n<pre><code>data class Book(val name: String, val price: Int)\ndata class LocalBook(val book: Book, val localInfo: String)\nval book = Book(\"foo\", 1)\nval localBook = LocalBook(book.copy(), \"bar\")\n</code></pre>\n"}], "owner": {"reputation": 74, "user_id": 11238317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00cbb021803e4902b13e5202fa20c653?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed farhan", "link": "https://stackoverflow.com/users/11238317/mohammed-farhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 597, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556027975, "creation_date": 1556024300, "question_id": 55811813, "link": "https://stackoverflow.com/questions/55811813/kotlin-data-class-copy-field-values-of-one-data-class-to-another-data-class-wit", "title": "Kotlin data class, copy field values of one data class to another data class with same fields", "body": "<p>Hi i have a data class <code>Books</code> with some fields like id, name, price etc. I have another data class <code>LocalBooks</code> with exactly <code>same</code> fields like class <code>Books</code>. I want to copy all the values of <code>Books</code> data class fields to fields of <code>LocalBooks</code>. I tried this way. This is good to go when you have just few fields but when you have more fields above 20 or greater then following this method is time consuming. I wanted to know if there is any method in kotlin which can help in this purpose.</p>\n\n<pre><code>data class Books(val name: String, val price: Int) : Serializable\ndata class LocalBooks(val name: String, val price: Int) : Serializable\nval books = Books(\"Book1\", 22)\nval localBooks = LocalBooks(books.name, books.price)\n</code></pre>\n"}, {"tags": ["java", "kotlin", "abstract-class", "covariance"], "comments": [{"owner": {"reputation": 5703, "user_id": 4899193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b65fc5fb7ab727d1f770206d6b5325?s=128&d=identicon&r=PG", "display_name": "Usagi Miyamoto", "link": "https://stackoverflow.com/users/4899193/usagi-miyamoto"}, "edited": false, "score": 0, "creation_date": 1556023741, "post_id": 55811569, "comment_id": 98289999, "body": "<code>Class&lt;Message&gt;</code> is a class to the interface <code>Message</code>. What you need is: <code>Class&lt;? extends Message&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 1, "last_activity_date": 1556024361, "last_edit_date": 1556024361, "creation_date": 1556023880, "answer_id": 55811678, "question_id": 55811569, "link": "https://stackoverflow.com/questions/55811569/type-inference-failed-for-a-java-class-definition-how-can-i-solve-this/55811678#55811678", "title": "Type inference failed for a Java class definition. How can I solve this?", "body": "<p>The following is valid Kotlin code (assuming <code>Dog</code> is a subclass of <code>Animal</code>):</p>\n\n<pre><code>val listOfDogs: List&lt;Dog&gt; = listOf(dog1, dog2)\nval listOfAnimals: List&lt;Animal&gt; = listOfDogs\n</code></pre>\n\n<p>The reason behind this is that <code>List</code> is an Kotlin interface defined as:</p>\n\n<pre><code>public interface List&lt;out E&gt; : Collection&lt;E&gt;\n</code></pre>\n\n<p>Unfortunately you can't do the same in pure Java, but you can do this:</p>\n\n<pre><code>List&lt;Dog&gt; listOfDogs = new ArrayList&lt;&gt;();\nList&lt;? extends Animal&gt; listOfAnimals = listOfDogs;\n</code></pre>\n\n<p>Now, <code>doSomethingWithType</code> expects a <code>Class&lt;Message&gt;</code> while you're providing <code>Class&lt;Int32&gt;</code>, and <code>Class</code> is not covariant in <code>T</code>. In order to make that code compile you can do the following:</p>\n\n<pre><code>fun doSomethingWithType(type: Class&lt;out Message&gt;) { ... }\ndoSomethingWithType(Int32::class.java)\n</code></pre>\n\n<p>This will work as long as you'll only pull out <code>T</code> from <code>Class&lt;T&gt;</code>, i.e. <code>Class</code> will only produce type <code>T</code>.</p>\n"}], "owner": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 55811678, "answer_count": 1, "score": 1, "last_activity_date": 1556024361, "creation_date": 1556023572, "last_edit_date": 1556023750, "question_id": 55811569, "link": "https://stackoverflow.com/questions/55811569/type-inference-failed-for-a-java-class-definition-how-can-i-solve-this", "title": "Type inference failed for a Java class definition. How can I solve this?", "body": "<p>In Kotlin I have found that, in contrast to Java, the following can be done using <a href=\"https://proandroiddev.com/understanding-generics-and-variance-in-kotlin-714c14564c47\" rel=\"nofollow noreferrer\">covariance</a>:</p>\n\n<pre><code>ArrayList&lt;Dog&gt; listOfDogs = listOf(dog1, dog2)\nArrayList&lt;Animal&gt; animalList = listOfDogs // No compiler error\n</code></pre>\n\n<p>In my situation I have an interface Message:</p>\n\n<pre><code>public interface Message {\n     RawMessage toRawMessage();\n}\n</code></pre>\n\n<p>For example I have an <code>Int32</code> Message:</p>\n\n<pre><code>public interface Int32 extends Message {\n    // abstract methods\n} \n</code></pre>\n\n<p>Now I have a method with a parameter <code>type</code> of type <code>Class&lt;Message&gt;</code>:</p>\n\n<pre><code>fun doSomethingWithType(type: Class&lt;Message&gt;) {\n    // Implementation\n}\n</code></pre>\n\n<p>The problem is that I am trying to pass a Java class extending from Message like:</p>\n\n<pre><code>doSomethingWithType(Int32::class.java)\n</code></pre>\n\n<p>But this gives me the following compiler error:</p>\n\n<pre><code>Expected type mismatch: \nrequired: Class&lt;Message&gt; \nfound:    Class&lt;Int32&gt;\n</code></pre>\n\n<p>Why is this not working and how should I solve it?</p>\n"}, {"tags": ["android", "kotlin", "realm"], "answers": [{"comments": [{"owner": {"reputation": 8237, "user_id": 2425851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fFyvZ.png?s=128&g=1", "display_name": "NickUnuchek", "link": "https://stackoverflow.com/users/2425851/nickunuchek"}, "edited": false, "score": 0, "creation_date": 1556810183, "post_id": 55955124, "comment_id": 98562788, "body": "Updated to 5.11.0 , but the issue still exist"}, {"owner": {"reputation": 8237, "user_id": 2425851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fFyvZ.png?s=128&g=1", "display_name": "NickUnuchek", "link": "https://stackoverflow.com/users/2425851/nickunuchek"}, "edited": false, "score": 0, "creation_date": 1556810384, "post_id": 55955124, "comment_id": 98562892, "body": "Found issues  I have  <code>failOnVersionConflict()</code> at top build gradle"}, {"owner": {"reputation": 5882, "user_id": 1370087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g3ak7.jpg?s=128&g=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/1370087/benjamin"}, "reply_to_user": {"reputation": 8237, "user_id": 2425851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fFyvZ.png?s=128&g=1", "display_name": "NickUnuchek", "link": "https://stackoverflow.com/users/2425851/nickunuchek"}, "edited": false, "score": 0, "creation_date": 1556811061, "post_id": 55955124, "comment_id": 98563279, "body": "@NickUnuchek did you manage to fix it? also, do not forget to <code>apply plugin: &#39;kotlin-kapt&#39;</code> last in your module <code>build.gradle</code>"}], "tags": [], "owner": {"reputation": 5882, "user_id": 1370087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g3ak7.jpg?s=128&g=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/1370087/benjamin"}, "is_accepted": false, "score": 1, "last_activity_date": 1556810976, "last_edit_date": 1556810976, "creation_date": 1556808938, "answer_id": 55955124, "question_id": 55810584, "link": "https://stackoverflow.com/questions/55810584/cant-integrate-realm-into-android-library-module-with-kotlin/55955124#55955124", "title": "Can&#39;t integrate realm into android library module with kotlin", "body": "<p>Change your root <code>build.gradle</code> to</p>\n\n<pre><code>apply plugin: 'kotlin'\n\nbuildscript {\n    ext.kotlin_version = '1.3.31'\n\n    repositories {\n        google()\n        jcenter()\n        maven {\n            url 'http://oss.jfrog.org/artifactory/oss-snapshot-local'\n        }\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.4.0'\n        classpath 'com.google.gms:google-services:4.2.0'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath \"io.realm:realm-gradle-plugin:5.11.0-SNAPSHOT\"\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n        google()\n        maven {\n            url 'http://oss.jfrog.org/artifactory/oss-snapshot-local'\n        }\n    }\n}\n</code></pre>\n\n<p>and it should work just fine (it does sync on my sample project). Note the <code>allprojects</code> block that you forgot. Also, you should <code>apply plugin: 'kotlin-kapt'</code> last.</p>\n"}, {"comments": [{"owner": {"reputation": 8237, "user_id": 2425851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fFyvZ.png?s=128&g=1", "display_name": "NickUnuchek", "link": "https://stackoverflow.com/users/2425851/nickunuchek"}, "edited": false, "score": 0, "creation_date": 1556810391, "post_id": 55955381, "comment_id": 98562895, "body": "Found issues I have failOnVersionConflict() at top build gradle"}], "tags": [], "owner": {"reputation": 8424, "user_id": 2511882, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/14b27314457e78023d62224bc508a5c0?s=128&d=identicon&r=PG", "display_name": "user2511882", "link": "https://stackoverflow.com/users/2511882/user2511882"}, "is_accepted": false, "score": 1, "last_activity_date": 1556809774, "creation_date": 1556809774, "answer_id": 55955381, "question_id": 55810584, "link": "https://stackoverflow.com/questions/55810584/cant-integrate-realm-into-android-library-module-with-kotlin/55955381#55955381", "title": "Can&#39;t integrate realm into android library module with kotlin", "body": "<p>I am currently using <code>Realm</code> with <code>Kotlin</code>. Here are my <code>gradle</code> files.</p>\n\n<p>It seems like the order of <code>Kotlin-kapt</code> and <code>kotlin-android-extensions</code> in the app <code>gradle</code> should be switched around. Check below</p>\n\n<p>App <code>gradle</code> file:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n\napply plugin: 'realm-android'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"xxx\"\n        minSdkVersion 21\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.1.0-alpha03'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.0-alpha3'\n    implementation 'com.google.android.material:material:1.1.0-alpha04'\n    implementation \"androidx.lifecycle:lifecycle-extensions:$lifecycle_version\"\n    testImplementation 'junit:junit:4.12'\n    implementation 'com.google.firebase:firebase-core:16.0.1'\n// Add dependency\n    implementation 'com.crashlytics.sdk.android:crashlytics:2.9.9'\n    androidTestImplementation 'androidx.test:runner:1.1.2-alpha02'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0-alpha02'\n\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p>Root level <code>gradle</code> file:</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext.kotlin_version = '1.2.71'\n    ext.lifecycle_version = '2.0.0'\n    ext.anko_version='0.10.8'\n    repositories {\n\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.google.gms:google-services:4.0.1'\n        classpath 'com.android.tools.build:gradle:3.2.1'\n        // Add dependency\n        classpath 'io.fabric.tools:gradle:1.26.1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath \"io.realm:realm-gradle-plugin:5.10.0\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8237, "user_id": 2425851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fFyvZ.png?s=128&g=1", "display_name": "NickUnuchek", "link": "https://stackoverflow.com/users/2425851/nickunuchek"}, "is_accepted": true, "score": 5, "last_activity_date": 1556862489, "creation_date": 1556862489, "answer_id": 55963909, "question_id": 55810584, "link": "https://stackoverflow.com/questions/55810584/cant-integrate-realm-into-android-library-module-with-kotlin/55963909#55963909", "title": "Can&#39;t integrate realm into android library module with kotlin", "body": "<p>To fix the issue:\ntop <strong>build.gradle</strong> file:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.3.31'\n    repositories {\n        mavenLocal()\n        google()\n        jcenter()\n\n        //region realm\n        maven { url 'http://oss.jfrog.org/artifactory/oss-snapshot-local' }\n        maven { url 'https://dl.bintray.com/realm/maven' }\n        //endregion\n    }\n    dependencies {\n        //region google()\n        classpath 'com.android.tools.build:gradle:3.3.2'\n        //endregion\n        //region jcenter()\n        classpath 'com.google.gms:google-services:4.2.0'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        //endregion\n\n        //region realm\n        classpath \"io.realm:realm-gradle-plugin:5.11.0\"\n        //endregion\n    }\n}\n\nallprojects {\n   ...\n\n    configurations.all {\n        exclude group: 'org.jetbrains.kotlin', module: 'kotlin-stdlib-jre7'\n\n        resolutionStrategy {\n            // fail eagerly on version conflict (includes transitive dependencies)\n            // e.g. multiple different versions of the same dependency (group and name are equal)\n            failOnVersionConflict()\n\n            //this is needed:\n            force \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\",\n                    \"org.jetbrains.kotlin:kotlin-android-extensions-runtime:$kotlin_version\",\n                    \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\",\n\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 8237, "user_id": 2425851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fFyvZ.png?s=128&g=1", "display_name": "NickUnuchek", "link": "https://stackoverflow.com/users/2425851/nickunuchek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 55963909, "answer_count": 3, "score": 7, "last_activity_date": 1556862489, "creation_date": 1556020180, "last_edit_date": 1556810447, "question_id": 55810584, "link": "https://stackoverflow.com/questions/55810584/cant-integrate-realm-into-android-library-module-with-kotlin", "title": "Can&#39;t integrate realm into android library module with kotlin", "body": "<p>My top level build.gradle</p>\n\n<pre><code>apply plugin: 'kotlin'\n\n\nbuildscript {\n    ext.kotlin_version = '1.3.30'\n    repositories {\n        mavenLocal()\n        google()\n        jcenter()\n        maven { url 'https://maven.fabric.io/public' }\n        //region realm\n        maven { url 'http://oss.jfrog.org/artifactory/oss-snapshot-local' }\n        //endregion\n    }\n    dependencies {\n        //region google()\n        classpath 'com.android.tools.build:gradle:3.3.2'\n        //endregion\n        //region jcenter()\n        classpath 'com.google.gms:google-services:4.2.0'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        //endregion\n        //region maven { url 'https://maven.fabric.io/public' }\n        //to check fabric gradle ver\n        //https://s3.amazonaws.com/fabric-artifacts/public/io/fabric/tools/gradle/maven-metadata.xml\n        classpath 'io.fabric.tools:gradle:1.+'\n        //endregion\n        //region realm\n        classpath \"io.realm:realm-gradle-plugin:5.8.0\"\n        //endregion\n    }\n}\n</code></pre>\n\n<p>Here is my library module build.gradle</p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'realm-android'\n\nandroid {\n    ...\n\n    defaultConfig {\n        ...\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"com.android.support:appcompat-v7:${supportLibVer}\"\n\n    implementation \"io.reactivex:rxjava:${rxJavaVersion}\"\n    implementation(\"io.reactivex:rxandroid:${rxAndroidVersion}\") {\n        exclude group: 'io.reactivex', module: 'rxjava'\n    }\n\n    implementation(\"com.github.davidmoten:rxjava-extras:${rxExtrasVersion}\") {\n        exclude group: 'io.reactivex', module: 'rxjava'\n    }\n\n    implementation('io.reactivex:rxjava-math:1.0.0') {\n        exclude group: 'io.reactivex', module: 'rxjava'\n    }\n\n    implementation \"com.google.dagger:dagger:${daggerVersion}\"\n    implementation(\"com.google.dagger:dagger-android-support:${daggerVersion}\") {\n        exclude group: 'com.android.support', module: 'appcompat-v7'\n        exclude group: 'com.android.support', module: 'support-annotations'\n        exclude group: 'com.android.support', module: 'support-fragment'\n    }\n    annotationProcessor \"com.google.dagger:dagger-compiler:${daggerVersion}\"\n    kapt \"com.google.dagger:dagger-compiler:${daggerVersion}\"\n    annotationProcessor \"com.google.dagger:dagger-android-processor:${daggerVersion}\"\n    kapt \"com.google.dagger:dagger-android-processor:${daggerVersion}\"\n    implementation \"javax.inject:javax.inject:${javaxInjectVersion}\"\n    implementation \"javax.annotation:jsr250-api:${javaxAnnotationVersion}\"\n    implementation \"com.android.support:support-annotations:${supportLibVer}\"\n\n    ...\n}\n</code></pre>\n\n<p>In result I can't make <strong>Sync</strong>, error is:</p>\n\n<pre><code>ERROR: Unable to resolve dependency for ':module@debug/compileClasspath': Could not resolve all dependencies for configuration ':module:debugCompileClasspath'.\nShow Details\nAffected Modules: module\n</code></pre>\n\n<p>But if I remote </p>\n\n<pre><code>apply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\napply plugin: 'kotlin-android-extensions'\n</code></pre>\n\n<p>then all works fine</p>\n\n<p>Found issue: it was because of I have <code>failOnVersionConflict()</code> at top build gradle</p>\n"}, {"tags": ["android", "kotlin", "android-room", "android-architecture-components", "android-paging-library"], "answers": [{"tags": [], "owner": {"reputation": 323, "user_id": 4588511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q0Di3.png?s=128&g=1", "display_name": "NoHarmDan", "link": "https://stackoverflow.com/users/4588511/noharmdan"}, "is_accepted": true, "score": 1, "last_activity_date": 1556197711, "creation_date": 1556197711, "answer_id": 55850050, "question_id": 55810440, "link": "https://stackoverflow.com/questions/55810440/paging-library-room-not-fetching-relation/55850050#55850050", "title": "Paging library + room not fetching @relation", "body": "<p>Turns out this is an issue in Room which can happen even when you don't use the Paging library, given a large-ish (hundreds of results+) query.</p>\n\n<p>There is no solution, but there is a workaround for 1:1 relations: using <code>@embedded</code> instead of <code>@relation</code>. That can however complicate things through the need of setting a <code>prefix</code> and enumerating all columns in the query and giving them aliases. That's pain but such is life. Room sucks.</p>\n\n<p>Or if the joined entity doesn't have too many columns and there aren't any duplicate names, it works just as fine to copy those columns/properties in the DTO that is returned by the query.</p>\n"}], "owner": {"reputation": 323, "user_id": 4588511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q0Di3.png?s=128&g=1", "display_name": "NoHarmDan", "link": "https://stackoverflow.com/users/4588511/noharmdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 55850050, "answer_count": 1, "score": 0, "last_activity_date": 1556197711, "creation_date": 1556019690, "question_id": 55810440, "link": "https://stackoverflow.com/questions/55810440/paging-library-room-not-fetching-relation", "title": "Paging library + room not fetching @relation", "body": "<p>In an app I'm working on, I need to very simply fetch data from a Room database. There are relations involved. Everything was working perfectly with simple  queries returning <code>LiveData</code>, however, the size of the data that needs to be retrieved grew much larger than expected and it also contains blobs (images), which can make the query very slow. I've resolved to using the Paging library, implemented as follows, but for some reason the <code>@relation</code> annotation simply doesn't work anymore.</p>\n\n<p>The entity fetched is a DTO, looks basically like this:</p>\n\n<pre><code>data class EntityOtherAnotherDTO(\n        var id: Long? = null,\n        var name: String? = null,\n        ...,\n\n        @Relation(parentColumn = \"id\", entityColumn = \"entity_id\", entity = OtherEntity::class)\n        var others: List&lt;OtherEntity&gt;,\n\n        @Relation(parentColumn = \"id\", entityColumn = \"entity_id\", entity = AnotherEntity::class)\n        var anothers: List&lt;AnotherEntity&gt;\n) \n</code></pre>\n\n<p>The query:</p>\n\n<pre><code> @Query(\"SELECT * FROM other\n        JOIN entity ON entity.id = other.entity_id\n        JOIN another ON entity.id = another.entity_id\n        WHERE entity.deleted = 0\n        ORDER BY\n        CASE WHEN other.some_column IS NULL THEN 1 ELSE 0 END,\n        other.some_column ASC,\n        entity.some_other_column DESC\")\n    fun getAllEntityOtherAnotherDTOs(): DataSource.Factory&lt;Int, EntityOtherAnotherDTO&gt;\n</code></pre>\n\n<p>When the query was like this: <code>fun getAllEntityOtherAnotherDTOs(): LiveData&lt;List&lt;EntityOtherAnotherDTO&gt;&gt;</code> everything worked just fine. The results were ordered as required and all data was fetched, including the lists annotated with <code>@relation</code>. But after changing the return type to <code>DataSource.Factory</code> and of course implementing a paging adapter, the relations return empty. </p>\n\n<p>The ordering still works perfectly, the query appears to be working exactly as before, the paging also works, but the data is simply missing. All the columns in the <code>entity</code> table are there (<code>name</code>, <code>some_other_column</code> etc.), the relations are the only but major problem.</p>\n\n<p>(I can provide further details about the paging implementation, if that's of any relevance.)</p>\n"}, {"tags": ["java", "math", "kotlin", "primes", "prime-factoring"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1556018988, "post_id": 55810130, "comment_id": 98287482, "body": "btw <code>all += all * it</code> does not compute the product of the primeList"}, {"owner": {"reputation": 2955, "user_id": 1042124, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f41bd8db2424f7895f2d19df47253e82?s=128&d=identicon&r=PG&f=1", "display_name": "user6327816", "link": "https://stackoverflow.com/users/1042124/user6327816"}, "edited": false, "score": 0, "creation_date": 1556019466, "post_id": 55810130, "comment_id": 98287731, "body": "<a href=\"https://gist.github.com/domnikl/6ad30f0a6ca3228f44e8273c08dbd879\" rel=\"nofollow noreferrer\">gist.github.com/domnikl/6ad30f0a6ca3228f44e8273c08dbd879</a>  you can change the code for big integer."}, {"owner": {"reputation": 2955, "user_id": 1042124, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f41bd8db2424f7895f2d19df47253e82?s=128&d=identicon&r=PG&f=1", "display_name": "user6327816", "link": "https://stackoverflow.com/users/1042124/user6327816"}, "edited": false, "score": 0, "creation_date": 1556019553, "post_id": 55810130, "comment_id": 98287775, "body": "there is a concept of sequence in kotlin. you should look into it. Also the 200th price is 1217 which is not that big so you can just use integer."}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 4, "creation_date": 1556020556, "post_id": 55810130, "comment_id": 98288340, "body": "<code>well n is prime</code> ? That isn&#39;t true in general. Not all <a href=\"https://en.wikipedia.org/wiki/Primorial\" rel=\"nofollow noreferrer\">primorials</a> differ by 1 from a prime. To get a prime that is 200 digits long, the only feasible way is to generate random odd numbers of that size and test them for primality. In other words -- fish for them"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1556021459, "post_id": 55810130, "comment_id": 98288808, "body": "I just ran the Miller-Rabin test on the two primorial prime candidates which straddle 200 digits. Both are composite numbers."}, {"owner": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "edited": false, "score": 0, "creation_date": 1556028507, "post_id": 55810130, "comment_id": 98292991, "body": "harold : that&#39;s in a foreach loop.so I&#39;m sure it does. Rahul : not the 200th I meant a 200 digit number."}, {"owner": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "reply_to_user": {"reputation": 2955, "user_id": 1042124, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f41bd8db2424f7895f2d19df47253e82?s=128&d=identicon&r=PG&f=1", "display_name": "user6327816", "link": "https://stackoverflow.com/users/1042124/user6327816"}, "edited": false, "score": 0, "creation_date": 1556028556, "post_id": 55810130, "comment_id": 98293018, "body": "@RahulKumar please explain filter and yeild in thaat gist code it&#39;s amazing still haven&#39;t tried it with bigInteger but it looks great honestly."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1556031365, "post_id": 55810130, "comment_id": 98294757, "body": "@stevemoretz products don&#39;t have addition in them, just multiplication"}, {"owner": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1556031914, "post_id": 55810130, "comment_id": 98295113, "body": "@harold You are totally right.I&#39;m a little off today.all *= it meant to write this actually."}, {"owner": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "reply_to_user": {"reputation": 2955, "user_id": 1042124, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f41bd8db2424f7895f2d19df47253e82?s=128&d=identicon&r=PG&f=1", "display_name": "user6327816", "link": "https://stackoverflow.com/users/1042124/user6327816"}, "edited": false, "score": 0, "creation_date": 1556032008, "post_id": 55810130, "comment_id": 98295180, "body": "@RahulKumar The gist works fine but not for 200 digits I made it work with BigInteger but it&#39;s again too slow."}], "answers": [{"comments": [{"owner": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "edited": false, "score": 0, "creation_date": 1556028726, "post_id": 55811399, "comment_id": 98293127, "body": "I was told by a master of university that,that 3*5*7... always works.Looks like he&#39;s a bit off.Thanks for letting me know.And by the way even sharing your python code can help if you don&#39;t like kotlin or java :) so please post it thank you."}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "reply_to_user": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "edited": false, "score": 0, "creation_date": 1556032044, "post_id": 55811399, "comment_id": 98295203, "body": "@stevemoretz I added the code. 3*5*7 ... + 1 is used as a way to show that there are arbitrarily large primes, so if you just remember that fact and haven&#39;t worked through the proof in a while, it is easy to see how the fine print that the number itself isn&#39;t necessarily prime might get lost."}, {"owner": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "edited": false, "score": 0, "creation_date": 1556032810, "post_id": 55811399, "comment_id": 98295731, "body": "I&#39;m sorry what do you mean by expression probable prime?Aren&#39;t we sure yet you mean by the end?"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "reply_to_user": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "edited": false, "score": 0, "creation_date": 1556033259, "post_id": 55811399, "comment_id": 98296001, "body": "@stevemoretz The Miller Rabin test is probabilistic. It doesn&#39;t certify a number is prime, but can make the chance of a false positive arbitrarily low (lower than the probability of a hardware error in running a deterministic algorithm)."}, {"owner": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "edited": false, "score": 0, "creation_date": 1556033829, "post_id": 55811399, "comment_id": 98296328, "body": "Thank you.It also looks like Miller Rabin is already a function in native java!I just don&#39;t really understand it.If you could explain it a little further and less complicating that would be great I&#39;m just a programmer not in math major really."}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "reply_to_user": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "edited": false, "score": 0, "creation_date": 1556035587, "post_id": 55811399, "comment_id": 98297256, "body": "@stevemoretz There is no easy way to explain <a href=\"https://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test\" rel=\"nofollow noreferrer\">Miller-Rabin</a>. The text that I used last time I taught the class did a decent job of explaining the math: &quot;Public Key Cryptography&quot; by Lynn Batten. This book was meant mostly for programmers, so doesn&#39;t really make many background assumptions."}, {"owner": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "edited": false, "score": 0, "creation_date": 1556038066, "post_id": 55811399, "comment_id": 98298585, "body": "You know what you&#39;re right.Maybe it&#39;s just the python making it complicated for me.Because I&#39;m not a python scripter normally.After writing the same thing in java it makes much more sense now.Thank you again I accepted your answer but will also add the method that does this in java by default."}, {"owner": {"reputation": 714, "user_id": 3126317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2ff8888829b737847fb890598b2523?s=128&d=identicon&r=PG&f=1", "display_name": "DanaJ", "link": "https://stackoverflow.com/users/3126317/danaj"}, "edited": false, "score": 0, "creation_date": 1556172321, "post_id": 55811399, "comment_id": 98348081, "body": "Technically there are constructive methods like Maurer and Shawe-Taylor that produce proven primes, in addition to the usual methods involving selection+PRP testing.  It is also possible to do a general form primality proof on a 200 digit number quite rapidly (under 1 second), though people rarely bother."}], "tags": [], "owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "is_accepted": true, "score": 3, "last_activity_date": 1556031810, "last_edit_date": 1556031810, "creation_date": 1556023036, "answer_id": 55811399, "question_id": 55810130, "link": "https://stackoverflow.com/questions/55810130/find-200-digit-prime-numbers-using-biginteger/55811399#55811399", "title": "find 200 digit prime numbers using BigInteger", "body": "<p>It isn't true that 1 + the product of the first <code>n</code> primes is always prime. You are possibly misremebering its role in the proof that there are infinitely many primes. It <em>is</em> true that if <code>p_1, p_2, ..., p_n</code> are the first <code>n</code> primes then</p>\n\n<pre><code>p_1 * p_2 * ... * p_n + 1\n</code></pre>\n\n<p>is either prime or contains a prime factor which is larger than any of those <code>p_i</code>, but this is consistent with the number being composite. See the Wikipedia article on <a href=\"https://en.wikipedia.org/wiki/Primorial\" rel=\"nofollow noreferrer\">primorials</a> for more information.</p>\n\n<p>In the case of trying for 200 digits, the product of the first 92 primes + 1 has 199 digits and the product of the first 93 primes + 1 has 201 digits. In both cases, the <a href=\"https://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test\" rel=\"nofollow noreferrer\">Miller-Rabin test</a> shows that they are composite. I haven't been able to factor the 199 digit one, but the 201 digit one factors as</p>\n\n<pre><code>509558935064289364432032169616857776489168568369134671296055828054188240764364761921821351373922822013621199759688858354748131233614846920025560717744496960296617420071391914813530238313960697008021211 = 11587 * 43976778723076669062918112506848863078378231498156094873224806080451216083918595142989673890905568483094951217717170825472351016968572272376418461874902646094469441621765074205016849772500275913353\n</code></pre>\n\n<p>With numbers of this magnitude, the only effective way to get a prime is to randomly generate a candidate number of the target size and test it for primality (using something like the Miller-Rabin test). By the prime number theorem, 200 digit primes are relatively plentiful, so in practice you can find such a prime very rapidly. For example, a Python script I wrote using Miller-Rabin spit out the following 200 digit prime in less than a second:</p>\n\n<pre><code>49675218696612399034240799519655205503986657506787162015105425670413948962864456158664793804627084299081036134562339483478437262146378569515417671690110863951848724044479367633926630234074394356492223\n</code></pre>\n\n<p><strong>On Edit</strong>: Here is the Python script that I used to find a 200 digit prime. The code was for a class I was teaching in cryptography, so I wrote it to be easy to discuss rather than concise or efficient:</p>\n\n<pre><code>import random\n\n#The following function finds s and d in\n#n-1 = 2^s*d with d odd\ndef findSD(n):\n    s = 0\n    d = n-1\n    while d % 2 == 0:\n        s = s + 1\n        d = d//2\n    return s,d\n\ndef checkBase(a,n):\n    s,d = findSD(n)\n    x = pow(a,d,n)\n    if x == 1 or x == n-1:\n        return \"probable prime\"\n    else:\n        for i in range(s-1):\n            x = pow(x,2,n)\n            if x == 1:\n                return \"composite\"\n            elif x == n-1:\n                return \"probable prime\"\n        #if you get to this stage, -1 not reached despite s-1\n        #squarings -- so must be composite\n        return \"composite\"\n\ndef MSR(n,k):\n    #Implements the Miller-Selfridge-Rabin test for primality\n    for i in range(k):\n        a = random.randint(2,n-2)\n        if checkBase(a,n) == \"composite\":\n            return \"composite\"\n    #if you get here n has survived k potential witnesses, so\n    return \"probable prime\"\n\n#The following function is slightly different from the one discussed in class:\n\ndef prime(n):\n    smallPrimes = [2,3,5,7,11,13,17,19]\n\n    for p in smallPrimes:\n        if n == p:\n            return True\n        elif n % p == 0:\n            return False\n\n    if MSR(n,20) == \"composite\":\n        return False\n    else:\n        return True\n\ndef findPrime(maxN):\n    while True:\n        m = random.randint(1,maxN//2)\n        n = 2*m+1\n        if prime(n):\n            return n\n</code></pre>\n\n<p>For example, <code>findPrime(10**200)</code> will usually give you a 200-digit prime number (though getting a 199 digit or even smaller is possible).</p>\n"}, {"tags": [], "owner": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "is_accepted": false, "score": 3, "last_activity_date": 1556041250, "last_edit_date": 1556041250, "creation_date": 1556038209, "answer_id": 55815966, "question_id": 55810130, "link": "https://stackoverflow.com/questions/55810130/find-200-digit-prime-numbers-using-biginteger/55815966#55815966", "title": "find 200 digit prime numbers using BigInteger", "body": "<p>in BigInteger class there is a method called:</p>\n\n<pre><code>isProbablePrime(int)\n</code></pre>\n\n<p>it uses the same algorithm our friend used <a href=\"https://stackoverflow.com/a/55811399/10268067\">here</a>: \nBut it also checks the result with another algorithm.It works quite neat.</p>\n"}], "owner": {"reputation": 1818, "user_id": 10268067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a0e0e1dda857b69f91563605bf028?s=128&d=identicon&r=PG&f=1", "display_name": "steve moretz", "link": "https://stackoverflow.com/users/10268067/steve-moretz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 55811399, "answer_count": 2, "score": 2, "last_activity_date": 1556126694, "creation_date": 1556018712, "last_edit_date": 1556126694, "question_id": 55810130, "link": "https://stackoverflow.com/questions/55810130/find-200-digit-prime-numbers-using-biginteger", "title": "find 200 digit prime numbers using BigInteger", "body": "<p>One way to do this which absolutely works is starting from 0 up to where you'll find 200 digit prime numbers.In order to do that I wrote this method:</p>\n\n<pre><code>var primeList = arrayListOf(BigInteger(\"2\"))\nfun findNextPrime(num : BigInteger): BigInteger {\n    val n = num + BigInteger.ONE\n    val sqrt = sqrt(num)\n    for (bigInteger in primeList) {\n        if(bigInteger &gt; sqrt){\n            return n\n        }\n        if(n % bigInteger == BigInteger.ZERO){\n            return findNextPrime(num + BigInteger.ONE)\n        }\n    }\n    return n;\n}\n</code></pre>\n\n<p>I add the numbers I find to primeList and check only the numbers less than squareRoot.Even though this was the fastest algorithm I could write but it takes so long after finding a million digits.which is only 7 digits.I'll probably die till it goes to 200 digits.(even though my laptop is i7 8th generation).So the next thing I used was this:</p>\n\n<pre><code>n = 2 * 3 * 5 *... + 1\n</code></pre>\n\n<p>well n is prime and it's pretty fast to use this method to get to high digits,but there's nothing for sure to get to 200 digits exactly.I got to 198 and 201 digits.But no 200 the code is simple but I post it anyway:</p>\n\n<pre><code>var all = BigInteger.ONE\nprimeList.forEach {\n   all *= it\n}\nall++\nprintln(all.toString().length)\n</code></pre>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3403, "user_id": 5815673, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/9rbit.jpg?s=128&g=1", "display_name": "Shailesh", "link": "https://stackoverflow.com/users/5815673/shailesh"}, "edited": false, "score": 0, "creation_date": 1556018505, "post_id": 55809881, "comment_id": 98287242, "body": "Thanks, Its working. I just want to know that <code>checkIn</code> is child of date node and we don&#39;t pass then also its working, how ?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 3403, "user_id": 5815673, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/9rbit.jpg?s=128&g=1", "display_name": "Shailesh", "link": "https://stackoverflow.com/users/5815673/shailesh"}, "edited": false, "score": 2, "creation_date": 1556019657, "post_id": 55809881, "comment_id": 98287832, "body": "Simply call <code>hasChild()</code> function: <code>dsnpNode.hasChild(&quot;checkIn&quot;)</code>."}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 3, "last_activity_date": 1556017767, "creation_date": 1556017767, "answer_id": 55809881, "question_id": 55809812, "link": "https://stackoverflow.com/questions/55809812/cant-get-data-from-datasnapshot-in-android/55809881#55809881", "title": "Can&#39;t get data from dataSnapShot in Android", "body": "<p>To solve this, please change the following line of code:</p>\n\n<pre><code>val key: String = dsnpNode.key.toString()\n</code></pre>\n\n<p>to</p>\n\n<pre><code>val key: String = dsnpNode.key\n</code></pre>\n\n<p>Calling <code>toString()</code> doesn't help you at all since the keys are always strings.</p>\n\n<p>And also change the following line of code:</p>\n\n<pre><code>val value: Any? = dsnpNode.child(key).child(\"checkIn\").getValue().toString()\n</code></pre>\n\n<p>to</p>\n\n<pre><code>val value: Any? = dsnpNode.child(\"checkIn\").getValue(String::class.java)\n</code></pre>\n\n<p>See, I have removed the call to <code>.child(key)</code> because there is no need for that.</p>\n"}], "owner": {"reputation": 3403, "user_id": 5815673, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/9rbit.jpg?s=128&g=1", "display_name": "Shailesh", "link": "https://stackoverflow.com/users/5815673/shailesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 1, "accepted_answer_id": 55809881, "answer_count": 1, "score": 2, "last_activity_date": 1556025160, "creation_date": 1556017477, "last_edit_date": 1556025160, "question_id": 55809812, "link": "https://stackoverflow.com/questions/55809812/cant-get-data-from-datasnapshot-in-android", "title": "Can&#39;t get data from dataSnapShot in Android", "body": "<p>I have checked these and other questions that how to get data from <code>dataSnapShot</code> so please first read the question.</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/50968342/cant-get-value-from-firebase-database-datasnapshot\">Can&#39;t get value from Firebase Database DataSnapshot</a></li>\n<li><a href=\"https://stackoverflow.com/questions/43261522/unable-to-read-data-from-firebase-in-android\">Unable to read data from firebase in android</a></li>\n<li><a href=\"https://stackoverflow.com/questions/39800547/read-data-from-firebase-database\">Read Data From Firebase database</a></li>\n</ul>\n\n<p>Below is the my Firebase DB structure where I am performing these all.</p>\n\n<p><a href=\"https://i.stack.imgur.com/to5fT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/to5fT.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have implemented below code to get/read data from Firebase. <strong>Issue is</strong> unable to get value by using that key or by passing that key directly. When I get key then its possible and printed also but its not working with value.</p>\n\n<pre><code>mDatabase!!.reference.child(FirebaseKey.NodeEmpCheckInOut) //--&gt;EmpCheckInOut\n            .child(AppConstant.yyyy_MM.format(Date()))     //--&gt;2019-04\n            .child(userSession!!.getUserId())              //--&gt;N8OE2CGu8nav0k0n7Rh61tKjvRF3\n            .addValueEventListener(object : ValueEventListener {\n                override fun onCancelled(dataSnapshotError: DatabaseError) {\n                    Log.e(TAG, \"Error:Exception-&gt;\" + dataSnapshotError.message)\n                }\n\n                override fun onDataChange(dataSnapShot: DataSnapshot) {\n                    Log.i(TAG, \"complete Data SnapShot::-&gt;$dataSnapShot\")\n\n                    for (dsnpNode: DataSnapshot in dataSnapShot.children) {\n                        val key: String = dsnpNode.key.toString()\n                        val value: Any? = dsnpNode.child(key).child(\"checkIn\").getValue().toString()\n\n                        //I have tried these ways also to retry data\n                        //val value: String = dsnpNode.child(key).child(\"checkIn\").value.toString()\n                        //val value: String = dsnpNode.child(\"2019-04-11\").child(\"checkIn\").value.toString()\n\n                        Logg.i(TAG, \"key-&gt;$key\")\n                        Logg.i(TAG, \"value::-&gt; $value\")\n\n                        /*Log value is printed in log window\n                          key-&gt;2019-04-11\n                          value::-&gt; null*/\n                    }\n                }\n\n            })\n</code></pre>\n\n<p>When i print <code>dataSnapShot.toString()</code> then its printed as below in\n log window.</p>\n\n<pre><code>{ key = N8OE2CGu8nav0k0n7Rh61tKjvRF3, value = {2019-04-17={todayDate=2019-04-17, checkIn=05:41 AM, isCheckIn=2, checkOut=05:44 PM}, 2019-04-23={todayDate=2019-04-23, checkIn=03:29 PM, isCheckIn=1, checkOut=00}, 2019-04-12={todayDate=2019-04-12, checkIn=09:35 AM, isCheckIn=2, checkOut=10:00 PM}, 2019-04-16={todayDate=2019-04-16, checkIn=05:39 AM, isCheckIn=2, checkOut=05:39 PM}, 2019-04-18={todayDate=2019-04-18, checkIn=05:55 PM, isCheckIn=2, checkOut=08:13 PM}, 2019-04-13={todayDate=2019-04-13, checkIn=09:36 AM, isCheckIn=2, checkOut=5:00 PM}, 2019-04-19={todayDate=2019-04-19, checkIn=10:48 AM, isCheckIn=1, checkOut=00}, 2019-04-11={todayDate=2019-04-11, checkIn=05:35 AM, isCheckIn=2, checkOut=08:00 PM}, 2019-04-22={todayDate=2019-04-22, checkIn=12:10 PM, isCheckIn=1, checkOut=00}} }\n</code></pre>\n\n<p>where am I wrong?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 715, "user_id": 594628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/132c4e5e2dbd09ab1a9a76911bc56982?s=128&d=identicon&r=PG", "display_name": "Tyler Gannon", "link": "https://stackoverflow.com/users/594628/tyler-gannon"}, "edited": false, "score": 0, "creation_date": 1556017163, "post_id": 55809521, "comment_id": 98286548, "body": "Thanks!!  I didn&#39;t realize that the Kotlin source code was so accessible.  I&#39;ll try and track down my own answer next time.  :)"}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 4, "creation_date": 1556018471, "post_id": 55809521, "comment_id": 98287215, "body": "Beware: that&#39;s an implementation detail which could change in future versions.  (JetBrains would have documented the types if they were guaranteed not to change.  As you can see, there&#39;s one case where they differ; more may well be added in future.)  So I strongly suggest you <i>don&#39;t write any code which relies on them returning <code>LinkedHashMap</code>s.</i>"}], "tags": [], "owner": {"reputation": 46, "user_id": 11399146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/480bc4141d4dfbbc6f0ebc9f9d902605?s=128&d=identicon&r=PG&f=1", "display_name": "atzarul", "link": "https://stackoverflow.com/users/11399146/atzarul"}, "is_accepted": true, "score": 3, "last_activity_date": 1561103411, "last_edit_date": 1561103411, "creation_date": 1556016379, "answer_id": 55809521, "question_id": 55808998, "link": "https://stackoverflow.com/questions/55808998/jvm-implementation-of-kotlin-set-and-mutableset/55809521#55809521", "title": "JVM Implementation of Kotlin Set and MutableSet", "body": "<p>Taking a look inside Kotlin sources <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/collections/Sets.kt\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/common/src/generated/_Arrays.kt\" rel=\"nofollow noreferrer\">here</a>, it seems that both return <code>LinkedHashSet</code>. There is an exception, in case <code>setOf()</code> is provided an empty list, it returns a singleton object (Kotlin object) which is defined at the top of the first file (link).</p>\n"}], "owner": {"reputation": 715, "user_id": 594628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/132c4e5e2dbd09ab1a9a76911bc56982?s=128&d=identicon&r=PG", "display_name": "Tyler Gannon", "link": "https://stackoverflow.com/users/594628/tyler-gannon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 55809521, "answer_count": 1, "score": 0, "last_activity_date": 1561103411, "creation_date": 1556014677, "question_id": 55808998, "link": "https://stackoverflow.com/questions/55808998/jvm-implementation-of-kotlin-set-and-mutableset", "title": "JVM Implementation of Kotlin Set and MutableSet", "body": "<p>What implementation class is used to back the <code>Set&lt;E&gt;</code> and <code>MutableSet&lt;E&gt;</code> types returned by <code>setOf()</code> and <code>mutableSetOf()</code>?  </p>\n\n<p>Since the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-set/index.html\" rel=\"nofollow noreferrer\">api documentation</a> describes <code>MutableSet</code> as <code>A generic unordered collection of elements</code>, and since elements don't have to be <code>Comparable</code>, I'm guessing it's a <code>HashSet</code> but I can't find confirmation.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 783, "user_id": 4081756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40c70b015c558d62b32386325129cad0?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Stillitano", "link": "https://stackoverflow.com/users/4081756/brandon-stillitano"}, "edited": false, "score": 0, "creation_date": 1556012017, "post_id": 55808173, "comment_id": 98283960, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4208730/how-to-detect-user-inactivity-in-android\">How to detect user inactivity in Android</a>"}, {"owner": {"reputation": 783, "user_id": 4081756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40c70b015c558d62b32386325129cad0?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Stillitano", "link": "https://stackoverflow.com/users/4081756/brandon-stillitano"}, "edited": false, "score": 0, "creation_date": 1556012073, "post_id": 55808173, "comment_id": 98283990, "body": "<a href=\"https://stackoverflow.com/questions/4208730/how-to-detect-user-inactivity-in-android\" title=\"how to detect user inactivity in android\">stackoverflow.com/questions/4208730/&hellip;</a>"}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1556012232, "post_id": 55808173, "comment_id": 98284067, "body": "5 minutes is pretty long for activity that was put in background. A lot of OEM implementations will straight out kill your apps process long time before your timer finishes."}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 5214788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/keJSC.jpg?s=128&g=1", "display_name": "Arwy Shelke", "link": "https://stackoverflow.com/users/5214788/arwy-shelke"}, "is_accepted": false, "score": 0, "last_activity_date": 1556015039, "last_edit_date": 1556015039, "creation_date": 1556012312, "answer_id": 55808324, "question_id": 55808173, "link": "https://stackoverflow.com/questions/55808173/how-to-logout-user-if-he-puts-app-in-background-is-inactive-on-app-in-android-ko/55808324#55808324", "title": "How to logout user if he puts app in background/is inactive on app in android/kotlin?", "body": "<p>Its simple, Create a custom activity called it BaseActivity, and put your code in it, then Extends it in all the your activities..\nNot forget to override the onResume &amp; onStop method...</p>\n\n<p>But above solution is best given by vikas kumar...</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 11083013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72699827904a24abc759c46a5ef3e2ca?s=128&d=identicon&r=PG&f=1", "display_name": "sansiad", "link": "https://stackoverflow.com/users/11083013/sansiad"}, "edited": false, "score": 0, "creation_date": 1556014509, "post_id": 55808487, "comment_id": 98285206, "body": "so do i need to create a new class file named myapp which extends application and it is registered in manifest.Then once done will this class directly run when app is inactive?I dont need to cal this class in any activity?"}, {"owner": {"reputation": 7766, "user_id": 4517450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AFIyx.jpg?s=128&g=1", "display_name": "vikas kumar", "link": "https://stackoverflow.com/users/4517450/vikas-kumar"}, "reply_to_user": {"reputation": 47, "user_id": 11083013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72699827904a24abc759c46a5ef3e2ca?s=128&d=identicon&r=PG&f=1", "display_name": "sansiad", "link": "https://stackoverflow.com/users/11083013/sansiad"}, "edited": false, "score": 0, "creation_date": 1556016352, "post_id": 55808487, "comment_id": 98286155, "body": "yes this is your application level component. you might need to tweak your logic accordingly. but overall the basic idea remains the same. this is what might work also check the blog i posted in the end it has more ways to explore."}, {"owner": {"reputation": 47, "user_id": 11083013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72699827904a24abc759c46a5ef3e2ca?s=128&d=identicon&r=PG&f=1", "display_name": "sansiad", "link": "https://stackoverflow.com/users/11083013/sansiad"}, "edited": false, "score": 0, "creation_date": 1556019254, "post_id": 55808487, "comment_id": 98287617, "body": "I am getting KotlinNullPointerException on  registerActivityLifecycleCallbacks(object : ActivityLifecycleCallbacks {  line"}, {"owner": {"reputation": 47, "user_id": 11083013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72699827904a24abc759c46a5ef3e2ca?s=128&d=identicon&r=PG&f=1", "display_name": "sansiad", "link": "https://stackoverflow.com/users/11083013/sansiad"}, "edited": false, "score": 0, "creation_date": 1556021443, "post_id": 55808487, "comment_id": 98288799, "body": "I am getting KotlinNullPointerException on registerActivityLifecycleCallbacks(object : ActivityLifecycleCallbacks { line .How can I remove the error?"}, {"owner": {"reputation": 47, "user_id": 11083013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72699827904a24abc759c46a5ef3e2ca?s=128&d=identicon&r=PG&f=1", "display_name": "sansiad", "link": "https://stackoverflow.com/users/11083013/sansiad"}, "edited": false, "score": 0, "creation_date": 1556025923, "post_id": 55808487, "comment_id": 98291356, "body": "yes registered in manifest as  &lt;application         android:name=&quot;.MyApplication&quot;&gt;------------&lt;/application&gt;"}], "tags": [], "owner": {"reputation": 7766, "user_id": 4517450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AFIyx.jpg?s=128&g=1", "display_name": "vikas kumar", "link": "https://stackoverflow.com/users/4517450/vikas-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1556013400, "last_edit_date": 1556013400, "creation_date": 1556012879, "answer_id": 55808487, "question_id": 55808173, "link": "https://stackoverflow.com/questions/55808173/how-to-logout-user-if-he-puts-app-in-background-is-inactive-on-app-in-android-ko/55808487#55808487", "title": "How to logout user if he puts app in background/is inactive on app in android/kotlin?", "body": "<p>Here is a sample which you can try at the application level.</p>\n\n<pre><code>  public class App extends Application {\n\n    private Handler handler;\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        registerActivityLifecycleCallbacks(new ActivityLifecycleCallbacks() {\n            @Override\n            public void onActivityCreated(Activity activity, Bundle bundle) {\n\n            }\n\n            @Override\n            public void onActivityStarted(Activity activity) {\n\n            }\n\n            @Override\n            public void onActivityResumed(Activity activity) {\n\n            }\n\n            @Override\n            public void onActivityPaused(Activity activity) {\n\n            }\n\n            @Override\n            public void onActivityStopped(Activity activity) {\n                startTrackingPauseTime();\n            }\n\n            @Override\n            public void onActivitySaveInstanceState(Activity activity, Bundle bundle) {\n\n            }\n\n            @Override\n            public void onActivityDestroyed(Activity activity) {\n\n            }\n        });\n    }\n\n    private void startTrackingPauseTime() {\n        if (handler != null) return;\n        handler = new Handler();\n        handler.postDelayed(new Runnable() {\n            @Override\n            public void run() {\n                //some action to logout user\n            }\n        }, 1000 * 60 * 5);\n    }\n}\n</code></pre>\n\n<p>don't forget to register this application in the manifest if newly used.</p>\n\n<p>a good read is here on how to use <strong>ProcessLifecycleOwner</strong> and other ways for this <a href=\"https://android.jlelse.eu/how-to-detect-android-application-open-and-close-background-and-foreground-events-1b4713784b57\" rel=\"nofollow noreferrer\">problem</a>.</p>\n"}], "owner": {"reputation": 47, "user_id": 11083013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72699827904a24abc759c46a5ef3e2ca?s=128&d=identicon&r=PG&f=1", "display_name": "sansiad", "link": "https://stackoverflow.com/users/11083013/sansiad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556015039, "creation_date": 1556011741, "question_id": 55808173, "link": "https://stackoverflow.com/questions/55808173/how-to-logout-user-if-he-puts-app-in-background-is-inactive-on-app-in-android-ko", "title": "How to logout user if he puts app in background/is inactive on app in android/kotlin?", "body": "<p>I am posting this question as I did not find the perfect solution.\nI want to logout user if he/she has pressed home button or is inactive on app for 5 minutes.</p>\n\n<p>I have tried to use a timer as below(kotlin code),but thats not really the right way,that will just work for a single activity screen,not entire app:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code> timer = object : CountDownTimer((1 * 60 * 1000).toLong(), 1000) {\r\n            override fun onTick(millisUntilFinished: Long) {\r\n                Toast.makeText(this@MainActivity, \"Ticking\", Toast.LENGTH_LONG).show()\r\n            }\r\n            override fun onFinish() {\r\n                currentUser = mAuth!!.currentUser!!\r\n                // Code for Logout\r\n                Toast.makeText(this@MainActivity, \"Finished\", Toast.LENGTH_LONG).show()\r\n                val colref = mFirestore.collection(\"AllUsers\")\r\n                deleteCollectiontimer(colref, EXECUTOR)\r\n            }\r\n        }\r\n        override fun onResume() {\r\n        super.onResume()\r\n        Toast.makeText(this@MainActivity, \"Timer Stopped\", Toast.LENGTH_LONG).show()\r\n        timer.cancel()\r\n    }\r\n    override fun onStop() {\r\n        super.onStop()\r\n        Toast.makeText(this@MainActivity, \"Timer Started\", Toast.LENGTH_LONG).show()\r\n        timer.start()\r\n    }\r\n        \r\n        </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>But if I put the above code in every activitys onstop() and onresume(),that is not right.So I am confused on how to logout user when inactive on entire app?</p>\n\n<p>I also read something like the ProcessLifecycleowner,but did not quite understand how to use it,so can that help me in this case,if yes then how?</p>\n\n<p>Is there a particular lifecycle method or a direct code which will take care for inactivity of entire application?</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["java", "spring", "spring-boot", "kotlin", "dependency-injection"], "comments": [{"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 1, "creation_date": 1556014368, "post_id": 55808019, "comment_id": 98285155, "body": "You do have a request, that is what <code>@WebAppConfiguration</code> is taking care of. It binds a <code>MockServletRequest</code> etc. to the current executing thread. So yes you do have a request."}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1556016198, "post_id": 55808019, "comment_id": 98286093, "body": "@M.Deinum Thank you. Want to make an answer out of it?"}], "answers": [{"tags": [], "owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "is_accepted": true, "score": 1, "last_activity_date": 1556016407, "creation_date": 1556016407, "answer_id": 55809531, "question_id": 55808019, "link": "https://stackoverflow.com/questions/55808019/why-can-i-inject-request-scoped-beans-in-the-absence-of-a-request/55809531#55809531", "title": "Why can I inject request-scoped beans in the absence of a request?", "body": "<p>Although you might think you don't have a current you request and session you actually do have one. </p>\n\n<p>The <code>@WebAppConfiguration</code> is what triggers that. It will activate the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/web/ServletTestExecutionListener.html\" rel=\"nofollow noreferrer\"><code>ServletTestExecutionListener</code></a> which will register a thread-bound mocked request and response. </p>\n\n<p>Which explains why the test succeeds as there is a thread-bound request.</p>\n"}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 55809531, "answer_count": 1, "score": 0, "last_activity_date": 1556016407, "creation_date": 1556011236, "question_id": 55808019, "link": "https://stackoverflow.com/questions/55808019/why-can-i-inject-request-scoped-beans-in-the-absence-of-a-request", "title": "Why can I inject request-scoped beans in the absence of a request?", "body": "<p>If I try to inject a request-scoped bean into a singleton-scoped one, that  fails because</p>\n\n<pre><code>java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n</code></pre>\n\n<p>as it should.</p>\n\n<p>(See at the end of this post for code examples)</p>\n\n<p>I know of three ways to get below test to turn green:</p>\n\n<ol>\n<li>change the scope of the <code>UsingBean</code></li>\n<li>method injection</li>\n<li>scoped proxies</li>\n</ol>\n\n<p>([1] is more of a hack than a solution and likely to cause issues further down the line, but it <em>does</em> turn the test green. :P)</p>\n\n<p>And while I do understand the idea behind these three options, I don't get <em>why</em> they work at all.</p>\n\n<p>I mean, even if I change the scope to \"session\" in [1], I still have neither session nor request when I instantiate the <code>UsingBean</code>.</p>\n\n<p>As for [2] and [3], they avoid getting an instance at startup, but I still don't have a request when they actually DO fetch an instance.</p>\n\n<p>And yet the test doesn't fail. Why?</p>\n\n<p><strong><em>CODE EXAMPLE</em></strong></p>\n\n<p>Let's say I have a request-scoped bean</p>\n\n<pre><code>@Repository\n@Scope(\"request\")\nclass RequestScopedBean : ScopedBean{\n    override fun foo(): String {\n        return \"Hello World\"\n    }\n}\n</code></pre>\n\n<p>used in a singleton-scoped one</p>\n\n<pre><code>@Service\nclass UsingBean{\n    private val scopedBean:ScopedBean\n\n    @Inject\n    constructor(scopedBean: ScopedBean) {\n        this.scopedBean = scopedBean\n    }\n\n    fun foo():String{\n        val foo = scopedBean.foo()\n        println(foo)\n        return foo\n    }\n}\n</code></pre>\n\n<p>and let's also create a small test for this:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner::class)\n@SpringBootTest\n@WebAppConfiguration\nclass RequestScopedBeansIT{\n\n    @Inject\n    private lateinit var bean : UsingBean\n\n    @Test\n    fun canInject(){\n        assertThat(bean.foo()).isEqualTo(\"Hello World\")\n    }\n}\n</code></pre>\n\n<p><strong>1) change the scope</strong> of the <code>UsingBean</code></p>\n\n<pre><code>@Service\n@Scope(\"session\")\nclass UsingBean{\n    private val scopedBean:ScopedBean\n\n    @Inject\n    constructor(scopedBean: ScopedBean) {\n        this.scopedBean = scopedBean\n    }\n\n    fun foo():String{\n        val foo = scopedBean.foo()\n        println(foo)\n        return foo\n    }\n}\n</code></pre>\n\n<p><strong>2) method injection</strong></p>\n\n<pre><code>@Service\nclass UsingBean{\n    private val scopedBean:ScopedBean\n        get() = injectBean()\n\n    fun foo():String{\n        val foo = scopedBean.foo()\n        println(foo)\n        return foo\n    }\n\n    @Lookup\n    fun injectBean():ScopedBean{\n        TODO(\"will be replaced by spring\")\n    }\n}\n</code></pre>\n\n<p><strong>3) Scoped Proxy</strong></p>\n\n<pre><code>@Repository\n@Scope(\"request\",proxyMode = ScopedProxyMode.TARGET_CLASS)\nclass RequestScopedBean : ScopedBean{\n    override fun foo(): String {\n        return \"Hello World\"\n    }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@Repository\n@RequestScope\nclass RequestScopedBean : ScopedBean{\n    override fun foo(): String {\n        return \"Hello World\"\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "enums", "set", "enumset"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1556010507, "post_id": 55807514, "comment_id": 98283136, "body": "You can use <code>map</code> on any collection to transform it to a new collection with the desired values... i.e. <code>someTypeSet.map { it.id }</code> will already return you a list of string. If you really want to have a <code>Set</code> you can also use something like <code>mapTo</code>. Regarding the <code>filter</code> that might also be simplifiable using the <code>in</code>-keyword, e.g.: <code>somethingList.filter { it.id in setOfSomeTypeIds }</code>"}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1556010737, "post_id": 55807514, "comment_id": 98283276, "body": "Wow thanks! Can you post that as an answer so I could mark it. Also, is there a better Idea that doing what I did?"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1556011200, "post_id": 55807514, "comment_id": 98283536, "body": "the only better idea that comes to my mind is to reuse the enum type <code>SomeType</code> on the class <code>Something</code> itself... that way you could just write something like: <code>somethingList.filter { it.type in someTypeSet }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 10894219, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aZVzzD9Bcx0/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ2W6UVf-6I_E1s3nPUXfOqyDb2Bg/mo/photo.jpg?sz=128", "display_name": "Nizan Ifrach", "link": "https://stackoverflow.com/users/10894219/nizan-ifrach"}, "is_accepted": false, "score": 1, "last_activity_date": 1556010578, "creation_date": 1556010578, "answer_id": 55807832, "question_id": 55807514, "link": "https://stackoverflow.com/questions/55807514/how-to-convert-enumseta-to-setb/55807832#55807832", "title": "How to convert EnumSet&lt;A&gt; to Set&lt;B&gt;", "body": "<p>You can use the <code>map</code> function after you filter the relevant types.</p>\n\n<pre><code>val filteredSomethings:List&lt;Something&gt; = someTypeSet.filter { something -&gt;\n            setOfSomeTypeIds.contains(something.id) }.map { Something(it.id) }\n</code></pre>\n\n<p>It will return a List of <code>Something</code> with the relevant Ids.</p>\n"}, {"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 1, "last_activity_date": 1556011051, "creation_date": 1556011051, "answer_id": 55807974, "question_id": 55807514, "link": "https://stackoverflow.com/questions/55807514/how-to-convert-enumseta-to-setb/55807974#55807974", "title": "How to convert EnumSet&lt;A&gt; to Set&lt;B&gt;", "body": "<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map.html\" rel=\"nofollow noreferrer\"><code>map</code></a> on any collection to transform it to a new collection with the desired values... i.e. <code>someTypeSet.map { it.id }</code> will already return you a list of string. If you really want to have a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-set/index.html\" rel=\"nofollow noreferrer\"><code>Set</code></a> you can also use something like <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map-to.html\" rel=\"nofollow noreferrer\"><code>mapTo</code></a>. Regarding the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter.html\" rel=\"nofollow noreferrer\"><code>filter</code></a> that might also be simplifiable using the <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#in\" rel=\"nofollow noreferrer\"><code>in</code></a>-keyword, e.g.: <code>somethingList.filter { it.id in setOfSomeTypeIds }</code>.</p>\n\n<p>So summarized:</p>\n\n<pre><code>val setOfSomeTypeIds = someTypeSet.map { it.id }\n\nval filteredList = somethingList.filter { it.id in setOfSomeTypeIds }\n</code></pre>\n"}], "owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 55807974, "answer_count": 2, "score": 0, "last_activity_date": 1556011051, "creation_date": 1556009535, "question_id": 55807514, "link": "https://stackoverflow.com/questions/55807514/how-to-convert-enumseta-to-setb", "title": "How to convert EnumSet&lt;A&gt; to Set&lt;B&gt;", "body": "<p>I have an enum class thats something like this:</p>\n\n<pre><code>enum class SomeType(val id: String) {\n    TYPE1(\"A\"),\n    TYPE2(\"B\"),\n    TYPE3(\"C\"),\n    TYPE4(\"D\")\n}\n</code></pre>\n\n<p>Now, I need to filter a list of <code>Something</code> which has a String that's stated in <code>SomeType</code> enum. So Basically I have something like this:</p>\n\n<pre><code>class Something(val id: String)\n// where the value of id is one of the value of the SomeType's id\n</code></pre>\n\n<p>I have a list of Something like so:</p>\n\n<pre><code>val somethingList = arrayListOf&lt;Something&gt;(\n    Something(\"A\"),\n    Something(\"B\"),\n    Something(\"A\"),\n    Something(\"C\"),\n    Something(\"D\"),\n    Something(\"A\"),\n    Something(\"D\")\n)\n</code></pre>\n\n<p>Now I need to filter that <code>somethingList</code> to by the given <code>EnumSet&lt;SomeType&gt;</code>.</p>\n\n<p>So if I have a:</p>\n\n<pre><code>val someTypeSet = EnumSet.of(SomeType.Type3, SomeType.Type2)\n</code></pre>\n\n<p>the resulting filtered List should be,</p>\n\n<pre><code>val filteredList = arrayListOf&lt;Something&gt;(\n    Something(\"B\"),\n    Something(\"C\")\n)\n</code></pre>\n\n<p>My idea is to convert the <code>someTypeSet</code> to a <code>Set&lt;String&gt;</code> and just do something like:</p>\n\n<pre><code>Set&lt;String&gt; setOfSomeTypeIds = convertToSet(someTypeSet)\nval filteredList = somethingList.filter { something -&gt;\n    setOfSomeTypeIds.contains(something.id)\n}\n</code></pre>\n\n<p>Can someone guide me how to convert an <code>EnumSet</code> to a <code>Set</code> of its value?</p>\n\n<p>I also explained the whole process just in case there is a better solution to the problem above.</p>\n\n<p>Anything will be appreciated.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["java", "android", "list", "generics", "kotlin"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 2, "creation_date": 1556009195, "post_id": 55807382, "comment_id": 98282418, "body": "You should never use raw types in Java in the first place, see <a href=\"https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html\" rel=\"nofollow noreferrer\">wildcards</a> or <a href=\"https://kotlinlang.org/docs/reference/generics.html#star-projections\" rel=\"nofollow noreferrer\">their Kotlin equivalent</a>."}, {"owner": {"reputation": 7231, "user_id": 4370279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tjPvY.png?s=128&g=1", "display_name": "theapache64", "link": "https://stackoverflow.com/users/4370279/theapache64"}, "edited": false, "score": 0, "creation_date": 1556010253, "post_id": 55807382, "comment_id": 98282991, "body": "@Klyner, I tried converting your code to kotlin. Is <a href=\"https://pastebin.com/MuRMFRCe\" rel=\"nofollow noreferrer\">this</a> ok with your requirement ?"}, {"owner": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "reply_to_user": {"reputation": 7231, "user_id": 4370279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tjPvY.png?s=128&g=1", "display_name": "theapache64", "link": "https://stackoverflow.com/users/4370279/theapache64"}, "edited": false, "score": 0, "creation_date": 1556013270, "post_id": 55807382, "comment_id": 98284591, "body": "@theapache64 The problem this solution gives me is that when you want to define <code>TopicControllerImpl</code> you need to specify <code>T</code>. <code>T</code> is variable in the list of Topic Nodes in Java but Kotlin wants us to specify it."}, {"owner": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "edited": false, "score": 0, "creation_date": 1556117711, "post_id": 55807382, "comment_id": 98330675, "body": "@Klyner did you solve the problem? If possible I would like to know what did you do."}], "answers": [{"comments": [{"owner": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "edited": false, "score": 0, "creation_date": 1556017838, "post_id": 55809754, "comment_id": 98286862, "body": "How and why should I change my array definition?"}, {"owner": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "reply_to_user": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "edited": false, "score": 0, "creation_date": 1556018304, "post_id": 55809754, "comment_id": 98287111, "body": "I explained the differences between two, it&#39;s up to you to choose the one that serves you best. now about how just add type whenever you defining or declaring or passing the array.."}, {"owner": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "edited": false, "score": 0, "creation_date": 1556018566, "post_id": 55809754, "comment_id": 98287284, "body": "As you see in my example code <code>TopicControllerImpl.kt</code> I already used the generic raw type solution. But this leads to the issue that TopicControllerImpl needs to be defined with a specified object <code>T</code>. In Java this could be avoided but in Kotlin it seems that it cannot be avoided."}, {"owner": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "reply_to_user": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "edited": false, "score": 0, "creation_date": 1556019686, "post_id": 55809754, "comment_id": 98287852, "body": "You had to specify the generic raw type for class because you are using a typed generic. As with the second solution you can go ahead and define it as wildcard so you don&#39;t have to specify the class type anymore."}, {"owner": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "reply_to_user": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "edited": false, "score": 0, "creation_date": 1556019862, "post_id": 55809754, "comment_id": 98287941, "body": "@Klyner btw I mixed the array and class definition so I updated my answer, sorry for confusion. If you want raw type change your class definition as you did. If you want mixed type change your array definition."}], "tags": [], "owner": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "is_accepted": false, "score": 0, "last_activity_date": 1556019761, "last_edit_date": 1556019761, "creation_date": 1556017275, "answer_id": 55809754, "question_id": 55807382, "link": "https://stackoverflow.com/questions/55807382/how-to-deal-with-this-generic-list-conversion-from-java-to-kotlin/55809754#55809754", "title": "How to deal with this Generic list conversion from Java to Kotlin?", "body": "<p>Here is a difference between generic and wildcard. For example</p>\n\n<pre><code>private val nodes: ArrayList&lt;TopicNode&lt;T&gt;&gt; = ArrayList()\n</code></pre>\n\n<p>means I will have an array of this generic class with the <strong>given</strong> type <code>T</code>. while</p>\n\n<pre><code>private val nodes: ArrayList&lt;TopicNode&lt;*&gt;&gt; = ArrayList()\n</code></pre>\n\n<p>means I will have an array of this generic class with <strong>mixed</strong> type.</p>\n\n<p>If you want to use the first one change your <strong>class</strong> definition but if you want the second one change your <strong>array</strong> declaration.</p>\n"}, {"tags": [], "owner": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "is_accepted": true, "score": -1, "last_activity_date": 1556174201, "creation_date": 1556174201, "answer_id": 55843189, "question_id": 55807382, "link": "https://stackoverflow.com/questions/55807382/how-to-deal-with-this-generic-list-conversion-from-java-to-kotlin/55843189#55843189", "title": "How to deal with this Generic list conversion from Java to Kotlin?", "body": "<p><code>You should never use raw types in Java in the first place, see wildcards or their Kotlin equivalent - @Moira</code></p>\n\n<p>I solved this problem by avoiding the use of the raw type <code>T</code>. So I removed the <code>&lt;T : Message&gt;</code> in the class definition; meaning that wherever <code>T</code> is used, the object filling this up need to extend from <code>Message</code>. </p>\n\n<p>Let's say we have an object <code>Monkey</code> which is a subclass of abstract class <code>Animal</code>.</p>\n\n<p>In kotlin, in contrast to Java, it is possible to add a list of Monkeys to a List that requires Animals. So:</p>\n\n<pre><code>List&lt;Monkey&gt; monkeys = getMonkeys()\nList&lt;Animal&gt; animals = monkeys      // Will compile with Kotlin; will not compile for Java\n</code></pre>\n\n<p>This ability to do this is caused by so called <code>covariance</code>. </p>\n\n<p>More information about generics and variance: <a href=\"https://proandroiddev.com/understanding-generics-and-variance-in-kotlin-714c14564c47\" rel=\"nofollow noreferrer\">https://proandroiddev.com/understanding-generics-and-variance-in-kotlin-714c14564c47</a></p>\n\n<p>It states that it is not possible to assign monkeys to the list of animals because:</p>\n\n<blockquote>\n  <p>This is because generics in Java ignore type vs subtype relation between its components. In the case when List cannot be assigned to List nor vice versa, this is called invariance. There is no subtype to supertype relationship here.</p>\n</blockquote>\n"}], "owner": {"reputation": 2796, "user_id": 3181492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8eb2d073b1570575dc48f6090cabd7af?s=128&d=identicon&r=PG&f=1", "display_name": "Klyner", "link": "https://stackoverflow.com/users/3181492/klyner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 0, "accepted_answer_id": 55843189, "answer_count": 2, "score": 1, "last_activity_date": 1556174201, "creation_date": 1556009052, "last_edit_date": 1556009583, "question_id": 55807382, "link": "https://stackoverflow.com/questions/55807382/how-to-deal-with-this-generic-list-conversion-from-java-to-kotlin", "title": "How to deal with this Generic list conversion from Java to Kotlin?", "body": "<p>In the process of rewriting Java code to Kotlin I need to define the object type of a list. The thing is that it <strong>is</strong> unknown and it can contain different type of objects. The situation:</p>\n\n<p>In my Java class I have defined a list with <code>TopicNode</code> objects: <code>private List&lt;TopicNode&gt; nodes</code>. Those objects can contain Messages of a type <code>T extends Message</code>. Messages can be of type <code>Boolean</code>, <code>Int32</code>, <code>String</code> etc. A node looks like:</p>\n\n<blockquote>\n  <p>TopicNode.java</p>\n</blockquote>\n\n<pre><code>class TopicNode&lt;T extends Message&gt; extends AbstractNodeMain {\n    // Implementation\n}\n</code></pre>\n\n<p>The Javaclass containing this list looks like:</p>\n\n<blockquote>\n  <p>TopicControllerImpl.java</p>\n</blockquote>\n\n<pre><code>public class TopicControllerImpl implements TopicController {\n\n    private List&lt;TopicNode&gt; nodes;\n\n    @Override\n    public void subscribe(String topic, Class type, Messenger subscriber) {\n        TopicNode node = findOrCreateNode(topic, type);\n        node.addListener(subscriber);\n    }\n\n    private &lt;T extends Message&gt; TopicNode&lt;T&gt; findNode(String topic) {\n        for (TopicNode node : nodes) {\n            if (node.getTopic().equals(topic)) {\n                return (TopicNode&lt;T&gt;) node;\n            }\n        }\n        return null;\n    }\n\n    private &lt;T extends Message&gt; TopicNode findOrCreateNode(String topic, Class&lt;T&gt; type) {\n        TopicNode&lt;T&gt; node = findNode(topic);\n        if (node != null) {\n            return node;\n        }\n        // If node doesn't exist yet, create it, run it and add it to the collection\n        node = new TopicNode&lt;&gt;(topic, type);\n        executor.execute(node, configuration);\n        nodes.add(node);\n        return node;\n    }\n}\n</code></pre>\n\n<p>When I try to define the list like this in Kotlin  (<code>private val nodes: ArrayList&lt;TopicNode&gt; = ArrayList()</code>), the compiler says: <code>One type argument expected for class TopicNode&lt;T : Message&gt;</code>. </p>\n\n<p>To solve this you can define the class and list like the following in Kotlin:</p>\n\n<blockquote>\n  <p>TopicControllerImpl.kt</p>\n</blockquote>\n\n<pre><code>class TopicControllerImpl&lt;T : Message&gt;(/** args */) : TopicController&lt;T&gt; {\n    private val nodes: ArrayList&lt;TopicNode&lt;T&gt;&gt; = ArrayList()\n\n    override fun subscribe(topic: String, type: Class&lt;T&gt;, subscriber: Messenger) {\n        val node = findOrCreateNode(topic, type)\n        node.addListener(subscriber)\n    }\n\n    private fun findNode(topic: String): TopicNode&lt;T&gt;? {\n        return nodes.firstOrNull { it.topic == topic }\n    }\n\n    private fun findOrCreateNode(topic: String, type: Class&lt;T&gt;): TopicNode&lt;T&gt; \n    {\n        var node = findNode(topic)\n        if (node != null) {\n            return node\n        }\n        // If node doesn't exist yet, create it, run it and add it to the collection\n        node = TopicNode(topic, type)\n        executor.execute(node, configuration)\n        nodes.add(node)\n\n        return node\n    }\n}\n</code></pre>\n\n<p>The problem with this is that you need to define the type of <code>T</code> that is used for the list in <code>TopicControllerImpl</code> while this unknown and it is not required in Java. It is unknown what the type of <code>Message</code> is going to be and it can also vary. </p>\n\n<p>Since this is the case, how can I deal with this situation in Kotlin? Is it even possible? </p>\n\n<p>Thanks a lot in advance!</p>\n"}, {"tags": ["android", "kotlin", "android-architecture-components", "android-viewmodel", "android-mvvm"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1556021385, "post_id": 55806684, "comment_id": 98288769, "body": "Just like how you have a <code>NetManager</code>, make a <code>__Manager</code> that uses either SharedPreferences, or Context as its constructor arg. Then use application context for that."}, {"owner": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "edited": false, "score": 0, "creation_date": 1557208774, "post_id": 55806684, "comment_id": 98676568, "body": "Hi, did you solve the problem? I would really appreciate if you share your solution. Cheers"}], "answers": [{"tags": [], "owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "is_accepted": false, "score": 0, "last_activity_date": 1556006493, "creation_date": 1556006493, "answer_id": 55806732, "question_id": 55806684, "link": "https://stackoverflow.com/questions/55806684/andorid-how-to-access-context-or-sharedprefences-in-model-class-mvvm/55806732#55806732", "title": "andorid- how to access context or sharedprefences in model class MVVM", "body": "<blockquote>\n  <p>I need to access sharedPrefences in my model class, since we shouldn't\n  access context and views from model class, How can I get a value from\n  model ?</p>\n</blockquote>\n\n<p>Wrap it and pass it as dependency to the constructor of your <code>ViewModel</code>.</p>\n\n<p>Wrapping it, it is only a recommendation in case you want to switch from <code>SharedPreferences</code> to something else to store data (EG. a different library)</p>\n"}, {"comments": [{"owner": {"reputation": 1129, "user_id": 1191678, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/733e90c64bd48ebc0eb2e3e7c1d13592?s=128&d=identicon&r=PG&f=1", "display_name": "Navid Abutorab", "link": "https://stackoverflow.com/users/1191678/navid-abutorab"}, "edited": false, "score": 0, "creation_date": 1556007608, "post_id": 55806875, "comment_id": 98281632, "body": "thanks for reply , could you send an example of this ?"}], "tags": [], "owner": {"reputation": 13694, "user_id": 519334, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AOukD.jpg?s=128&g=1", "display_name": "k3b", "link": "https://stackoverflow.com/users/519334/k3b"}, "is_accepted": false, "score": 0, "last_activity_date": 1556007047, "creation_date": 1556007047, "answer_id": 55806875, "question_id": 55806684, "link": "https://stackoverflow.com/questions/55806684/andorid-how-to-access-context-or-sharedprefences-in-model-class-mvvm/55806875#55806875", "title": "andorid- how to access context or sharedprefences in model class MVVM", "body": "<p>I would wrap the sharedPreferences as a Repository so you model gets a dependency to this repository interface and the repository-implementation gets the ApplicationContext in it-s constructor</p>\n"}, {"tags": [], "owner": {"reputation": 2825, "user_id": 6600000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jFof.jpg?s=128&g=1", "display_name": "Keivan Esbati", "link": "https://stackoverflow.com/users/6600000/keivan-esbati"}, "is_accepted": false, "score": 2, "last_activity_date": 1556041487, "last_edit_date": 1556041487, "creation_date": 1556019278, "answer_id": 55810315, "question_id": 55806684, "link": "https://stackoverflow.com/questions/55806684/andorid-how-to-access-context-or-sharedprefences-in-model-class-mvvm/55810315#55810315", "title": "andorid- how to access context or sharedprefences in model class MVVM", "body": "<p>First you have to change the <code>Model</code> class:</p>\n\n<pre><code>class CategoryModel(.. NetManager, private val sharedPrefences: SharedPrefences)\n</code></pre>\n\n<p>, now you can obtain applicationContext by using <code>AndroidViewModel</code> instead of <code>ViewModel</code>, don't be alarmed as obtaining a static reference to applicationContext is <strong>not</strong> necessarily a <a href=\"https://www.philosophicalhacker.com/2015/07/14/why-static-references-to-application-contexts-are-probably-not-the-best-idea/\" rel=\"nofollow noreferrer\">bad idea</a>:</p>\n\n<pre><code>public class MyViewModel extends AndroidViewModel {\n\n    private val preferences: SharedPreferences = \n        PreferenceManager.getDefaultSharedPreferences(getApplication())\n    private val netManager: NetManager\n    private val model = CategoryModel(netManager, preferences)\n\n    ...\n}           \n</code></pre>\n\n<p>Now a more elegant way would be using a <code>Factory</code> to inject dependencies into <code>ViewModel</code> like this:</p>\n\n<pre><code>public static class Factory extends ViewModelProvider.NewInstanceFactory {\n\n    @NonNull\n    private final SharedPreferences mPreferences;\n    ...\n\n    public Factory(@NonNull SharedPreferences preferences, ...) {\n        mPreferences = preferences;\n    }\n\n    @Override\n    public &lt;T extends ViewModel&gt; T create(Class&lt;T&gt; modelClass) {\n        //noinspection unchecked\n        return (T) new MyViewModel(mPreferences, ..);\n    }\n}\n</code></pre>\n\n<p>P.S: Ideally I would create the model using a <em>ServiceLocator</em> or <em>DependencyInjector</em> and inject it directly into the <code>ViewModel</code> using the mentioned <code>Factory</code>. </p>\n"}], "owner": {"reputation": 1129, "user_id": 1191678, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/733e90c64bd48ebc0eb2e3e7c1d13592?s=128&d=identicon&r=PG&f=1", "display_name": "Navid Abutorab", "link": "https://stackoverflow.com/users/1191678/navid-abutorab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1556041487, "creation_date": 1556006338, "last_edit_date": 1556020638, "question_id": 55806684, "link": "https://stackoverflow.com/questions/55806684/andorid-how-to-access-context-or-sharedprefences-in-model-class-mvvm", "title": "andorid- how to access context or sharedprefences in model class MVVM", "body": "<p>I need to access sharedPrefences in my model class since we shouldn't access context and views from model class, How can I get a value from the model? I don't want to parse each of my variables to <code>viewmodel</code> and then my model class. </p>\n\n<p><strong>model class:</strong> </p>\n\n<pre><code>class CategoryModel(private val netManager: NetManager) {\n    var dateChanges: String = \"null\";\n    var isLoading= ObservableField&lt;Boolean&gt;(false)\n\n    fun getCats(): MutableLiveData&lt;MutableList&lt;Cat&gt;&gt; {\n        isLoading.set(true)\n        var list = MutableLiveData&lt;MutableList&lt;Cat&gt;&gt;();\n        if (netManager.isConnected!!) {\n            list = getCatsOnline();\n        }\n        return list\n    }\n\n    private fun getCatsOnline(): MutableLiveData&lt;MutableList&lt;Cat&gt;&gt; {\n        var list = MutableLiveData&lt;MutableList&lt;Cat&gt;&gt;();\n        val getCats = ApiConnection.client.create(Category::class.java)\n\n        Log.v(\"this\",\"uid \"+MyApp().uid)\n        getCats.getCats(MyApp().uid, dateChanges)\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(\n                { success -&gt;\n                    isLoading.set(false)\n                    list+= success.cats\n                },{\n                    error-&gt;\n                        isLoading.set(false)\n                        Log.v(\"this\",\"ErrorGetCats \"+ error.localizedMessage);\n                }\n            )\n\n        return list;\n    }\n\n    operator fun &lt;T&gt; MutableLiveData&lt;MutableList&lt;T&gt;&gt;.plusAssign(values: List&lt;T&gt;) {\n        val value = this.value ?: arrayListOf()\n        value.addAll(values)\n        this.value = value\n    }\n}\n</code></pre>\n\n<p>How can I do so ? </p>\n"}, {"tags": ["kotlin", "enums", "inner-classes"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 1, "creation_date": 1556006446, "post_id": 55806546, "comment_id": 98281057, "body": "If you don&#39;t know what you created, it&#39;s bad"}, {"owner": {"reputation": 1537, "user_id": 1392366, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/FBF0r.png?s=128&g=1", "display_name": "LiTTle", "link": "https://stackoverflow.com/users/1392366/little"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 2, "creation_date": 1556006904, "post_id": 55806546, "comment_id": 98281272, "body": "@TimCastelijns As I said I was playing around and I did not type random characters! I did it on purpose and I am wondering if this is a good way to go! Is it a good practice to use nested enum classes? And why it seems that it needs <code>;</code> before a new <code>enum</code> class?"}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1556007456, "post_id": 55806546, "comment_id": 98281550, "body": "<i>Is it a good practice to use nested enum classes?</i> - probably not. I can&#39;t think of a situation where you would use it (or how)"}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 1, "creation_date": 1556007625, "post_id": 55806546, "comment_id": 98281641, "body": "If you do something you should have a reason to do it. We can&#39;t say if it&#39;s good or bad in a void. What&#39;s the purpose that it is accomplishing? What are you trying to convey with that structure?"}, {"owner": {"reputation": 1537, "user_id": 1392366, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/FBF0r.png?s=128&g=1", "display_name": "LiTTle", "link": "https://stackoverflow.com/users/1392366/little"}, "edited": false, "score": 0, "creation_date": 1556008448, "post_id": 55806546, "comment_id": 98282053, "body": "I edited and I tried to be more specific. This is a simple idea/example I was thinking about."}], "answers": [{"tags": [], "owner": {"reputation": 17145, "user_id": 5093961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3736a281ed5cdc18e41f6d3100d76dcc?s=128&d=identicon&r=PG", "display_name": "Steven Spungin", "link": "https://stackoverflow.com/users/5093961/steven-spungin"}, "is_accepted": false, "score": 3, "last_activity_date": 1556104201, "last_edit_date": 1556104201, "creation_date": 1556011546, "answer_id": 55808111, "question_id": 55806546, "link": "https://stackoverflow.com/questions/55806546/kotlin-nested-enum-class/55808111#55808111", "title": "Kotlin nested enum class", "body": "<p>You need to think about how these enums will be used by external code.  In essence you are creating another <code>namespace</code>.  The first namespace is the package, and the second is the class.  That may become tedious for developers to type.  It also requires the class to be typed in first for your IDE autocompletion to kick in.</p>\n\n<p>Unless the package is saturated with too many definitions, or there are potential name conflicts, it might be better to define them outside of the class. Kotlin allows the enums to still be defined in the same file as the class if that helps keep you organized on the physical level.</p>\n\n<p>Finally, if these enums will be used on their own, outside of the class, or  shared by other classes, definitely do not nest them.</p>\n"}, {"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": false, "score": 1, "last_activity_date": 1556125226, "creation_date": 1556125226, "answer_id": 55835149, "question_id": 55806546, "link": "https://stackoverflow.com/questions/55806546/kotlin-nested-enum-class/55835149#55835149", "title": "Kotlin nested enum class", "body": "<p>According to your code, there is no reason for <code>ElectricPart</code> to be an <code>enum class</code> -- an enum without enumerators is pointless.</p>\n\n<p>For namespacing purposes, <code>ElectricPart</code> might as well be a <code>class</code> (with private constructor, i.e. no instances) or an <code>object</code> (exactly one singleton instance). Note that classes are not primarily designed to be used as namespaces in Kotlin, i.e. they come at the cost of JVM runtime overhead, even if you only use their name at compile time.</p>\n\n<blockquote>\n  <p>A car has electric parts (<code>ElectricPart</code>). The <code>VisionLight</code>s and <code>DirectionLight</code>s are part of the electrics of a car.</p>\n</blockquote>\n\n<p>This sounds like a typical <strong>is-a relationship</strong>: vision lights and direction lights <em>are</em> electrical parts of a car. This relation is typically modeled through inheritance and interface implementation, as such you might do this:</p>\n\n<pre><code>interface ElectricPart\nenum class VisionLight(val id:String) : ElectricPart {...}\nenum class DirectionLight(val id:String) : ElectricPart {...}\n</code></pre>\n\n<p>Keep in mind that interfaces are primarily useful when you have methods that are overridden in each implementation, to achieve polymorphic behavior. Nevertheless, it's also possible to use marker interfaces (interfaces without methods) in places where you would otherwise have to use the less type-safe <code>Any</code>.</p>\n"}], "owner": {"reputation": 1537, "user_id": 1392366, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/FBF0r.png?s=128&g=1", "display_name": "LiTTle", "link": "https://stackoverflow.com/users/1392366/little"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1153, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1556125226, "creation_date": 1556005750, "last_edit_date": 1556008288, "question_id": 55806546, "link": "https://stackoverflow.com/questions/55806546/kotlin-nested-enum-class", "title": "Kotlin nested enum class", "body": "<p>While I was playing around with <code>enum</code>s I created this:</p>\n\n<pre><code>enum class ElectricPart {\n    // Wow, what I had implemented here? Is it good or bad?!\n    ;\n    enum class VisionLight(val id:String){\n        LIGHTS_OFF(\"lights_off\"),\n        POSITION_LIGHTS(\"lights_position\"),\n        DRIVING_LIGHTS(\"lights_driving\"),\n        LONG_RANGE_LIGHTS(\"lights_long_range\"),\n        LONG_RANGE_SIGNAL_LIGHTS(\"lights_long_range_signal\")\n    }\n    enum class DirectionLight(val id:String){\n        DIRECTION_LIGHTS_RIGHT(\"lights_direction_right\"),\n        DIRECTION_LIGHTS_LEFT(\"lights_direction_left\"),\n        DIRECTION_LIGHTS_STRAIGHT(\"lights_direction_straight\")\n    }\n    //More enum classes if needed\n}\n</code></pre>\n\n<p>A car has electric parts (<code>ElectricPart</code>). The <code>VisionLight</code>s and <code>DirectionLight</code>s are part of the electrics of a car.</p>\n\n<p>Is this a good implementation? Is this bad? For sure it feels weird!\n<br/>I would like to hear your comments about this one!</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1555984239, "post_id": 55803207, "comment_id": 98274830, "body": "Duplicate: <a href=\"https://stackoverflow.com/questions/55772345/unresolved-reference-parcelize-after-updating-to-kotlin-1-3-30\" title=\"unresolved reference parcelize after updating to kotlin 1 3 30\">stackoverflow.com/questions/55772345/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 244, "user_id": 3924372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9PJte.jpg?s=128&g=1", "display_name": "finalpets", "link": "https://stackoverflow.com/users/3924372/finalpets"}, "edited": false, "score": 0, "creation_date": 1587152274, "post_id": 55803350, "comment_id": 108407076, "body": "Works for me Thanks a lot!!"}], "tags": [], "owner": {"reputation": 894, "user_id": 8235347, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rx77mu2Of_0/AAAAAAAAAAI/AAAAAAAAABs/LP__Ojw_tS8/photo.jpg?sz=128", "display_name": "\u5e84 \u9e4f", "link": "https://stackoverflow.com/users/8235347/%e5%ba%84-%e9%b9%8f"}, "is_accepted": true, "score": 16, "last_activity_date": 1555996389, "last_edit_date": 1555996389, "creation_date": 1555985330, "answer_id": 55803350, "question_id": 55803207, "link": "https://stackoverflow.com/questions/55803207/androidextensions-parcelize-not-work-in-kotlin-1-3-30/55803350#55803350", "title": "androidExtensions &quot;parcelize&quot; not work in Kotlin 1.3.30", "body": "<p>I find the error </p>\n\n<p><code>Kotlin plugin should be enabled before 'kotlin-android-extensions'</code></p>\n\n<p>so change the order to</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n</code></pre>\n\n<p>it work fine (:\u0437\u300d\u2220) \u3002</p>\n\n<p>good luck to you.</p>\n"}], "owner": {"reputation": 894, "user_id": 8235347, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rx77mu2Of_0/AAAAAAAAAAI/AAAAAAAAABs/LP__Ojw_tS8/photo.jpg?sz=128", "display_name": "\u5e84 \u9e4f", "link": "https://stackoverflow.com/users/8235347/%e5%ba%84-%e9%b9%8f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1295, "favorite_count": 0, "accepted_answer_id": 55803350, "answer_count": 1, "score": 4, "last_activity_date": 1607424331, "creation_date": 1555983962, "question_id": 55803207, "link": "https://stackoverflow.com/questions/55803207/androidextensions-parcelize-not-work-in-kotlin-1-3-30", "title": "androidExtensions &quot;parcelize&quot; not work in Kotlin 1.3.30", "body": "<p>it work fine with  <code>ext.kotlin_version = '1.3.21'</code></p>\n\n<p>Unresolved reference: Parcelize\u201d after updating to Kotlin 1.3.30</p>\n\n<pre><code>apply plugin: 'kotlin-android-extensions'\n\nandroidExtensions {\n    experimental = true\n    features = [\"parcelize\"]\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-multidex"], "comments": [{"owner": {"reputation": 555, "user_id": 1877019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GkI5H.jpg?s=128&g=1", "display_name": "Mahabub Karim", "link": "https://stackoverflow.com/users/1877019/mahabub-karim"}, "edited": false, "score": 0, "creation_date": 1555991550, "post_id": 55803196, "comment_id": 98276112, "body": "Use this -keep public class app.module.** { *; }"}, {"owner": {"reputation": 2475, "user_id": 2897341, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/jlQJG.jpg?s=128&g=1", "display_name": "alashow", "link": "https://stackoverflow.com/users/2897341/alashow"}, "reply_to_user": {"reputation": 555, "user_id": 1877019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GkI5H.jpg?s=128&g=1", "display_name": "Mahabub Karim", "link": "https://stackoverflow.com/users/1877019/mahabub-karim"}, "edited": false, "score": 0, "creation_date": 1555994284, "post_id": 55803196, "comment_id": 98276706, "body": "@MahabubKarim I tried, no effect."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556181664, "post_id": 55803196, "comment_id": 98352561, "body": "why is <code>multiDexKeepProguard file(&#39;multidex-config.pro&#39;)</code> in the debug config?"}, {"owner": {"reputation": 2475, "user_id": 2897341, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/jlQJG.jpg?s=128&g=1", "display_name": "alashow", "link": "https://stackoverflow.com/users/2897341/alashow"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556212593, "post_id": 55803196, "comment_id": 98370524, "body": "@ArchieG.Qui&#241;ones because the app is crashing in both debug &amp; release builds."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556240849, "post_id": 55803196, "comment_id": 98379942, "body": "correct me if I&#39;m wrong but you check if <code>app.module.SomeClass</code> is present after multidex and it is there? that doesn&#39;t sound like a produard issue. Have you tried removing proguard optimization?"}, {"owner": {"reputation": 2475, "user_id": 2897341, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/jlQJG.jpg?s=128&g=1", "display_name": "alashow", "link": "https://stackoverflow.com/users/2897341/alashow"}, "reply_to_user": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1556242267, "post_id": 55803196, "comment_id": 98380198, "body": "@ArchieG.Qui&#241;ones Yes, I tried removing proguard (and proguard is disabled for debug builds)."}, {"owner": {"reputation": 777, "user_id": 3318025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCeKz.jpg?s=128&g=1", "display_name": "TheAnkush", "link": "https://stackoverflow.com/users/3318025/theankush"}, "edited": false, "score": 0, "creation_date": 1556600027, "post_id": 55803196, "comment_id": 98482579, "body": "is instant run disabled ?"}, {"owner": {"reputation": 5308, "user_id": 7542765, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FBTZO.jpg?s=128&g=1", "display_name": "Levon Petrosyan", "link": "https://stackoverflow.com/users/7542765/levon-petrosyan"}, "edited": false, "score": 0, "creation_date": 1556768200, "post_id": 55803196, "comment_id": 98543370, "body": "Hey @alashow what gradle version are you using ?"}, {"owner": {"reputation": 2475, "user_id": 2897341, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/jlQJG.jpg?s=128&g=1", "display_name": "alashow", "link": "https://stackoverflow.com/users/2897341/alashow"}, "reply_to_user": {"reputation": 5308, "user_id": 7542765, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FBTZO.jpg?s=128&g=1", "display_name": "Levon Petrosyan", "link": "https://stackoverflow.com/users/7542765/levon-petrosyan"}, "edited": false, "score": 0, "creation_date": 1556842546, "post_id": 55803196, "comment_id": 98574848, "body": "@LevonPetrosyan I&#39;m using gradle&#39;s v5.4"}, {"owner": {"reputation": 5308, "user_id": 7542765, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FBTZO.jpg?s=128&g=1", "display_name": "Levon Petrosyan", "link": "https://stackoverflow.com/users/7542765/levon-petrosyan"}, "edited": false, "score": 0, "creation_date": 1556845220, "post_id": 55803196, "comment_id": 98575351, "body": "I am not sure about <code>multiDexKeepProguard</code>, but try  this <code>proguardFiles getDefaultProguardFile( &#39;proguard-android-optimize.txt&#39;), &#39;yourProguardRuleFile&#39; </code>"}, {"owner": {"reputation": 2475, "user_id": 2897341, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/jlQJG.jpg?s=128&g=1", "display_name": "alashow", "link": "https://stackoverflow.com/users/2897341/alashow"}, "reply_to_user": {"reputation": 5308, "user_id": 7542765, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FBTZO.jpg?s=128&g=1", "display_name": "Levon Petrosyan", "link": "https://stackoverflow.com/users/7542765/levon-petrosyan"}, "edited": false, "score": 0, "creation_date": 1556871231, "post_id": 55803196, "comment_id": 98582267, "body": "@LevonPetrosyan I tried disabling proguard itself for Release builds. Regardless, the crash is present in Debug builds too."}], "answers": [{"tags": [], "owner": {"reputation": 1442, "user_id": 11288846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NDoB.png?s=128&g=1", "display_name": "Ferran", "link": "https://stackoverflow.com/users/11288846/ferran"}, "is_accepted": false, "score": 1, "last_activity_date": 1556349054, "creation_date": 1556349054, "answer_id": 55878179, "question_id": 55803196, "link": "https://stackoverflow.com/questions/55803196/multidex-noclassdeffounderror-with-multidex-enabled/55878179#55878179", "title": "multidex - NoClassDefFoundError with multidex enabled", "body": "<p>In your app gradle file add this</p>\n\n<pre><code>android {\n    ...\n    dexOptions {\n        jumboMode = true\n        javaMaxHeapSize \"4g\"\n     }\n     defaultConfig {\n         ...\n</code></pre>\n\n<p><strong>javaMaxHeapSize</strong> </p>\n\n<p>Specify the maximum size, in bytes, of the memory allocation pool. This value must a multiple of 1024 greater than 2MB. Append the letter k or K to indicate kilobytes, or m or M to indicate megabytes. The default value is chosen at runtime based on system configuration.</p>\n"}, {"comments": [{"owner": {"reputation": 2475, "user_id": 2897341, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/jlQJG.jpg?s=128&g=1", "display_name": "alashow", "link": "https://stackoverflow.com/users/2897341/alashow"}, "edited": false, "score": 0, "creation_date": 1556475498, "post_id": 55892351, "comment_id": 98443125, "body": "Moving <code>Multidex.install()</code> there cause actual multidex issues with other classes. I tried removing everything from my app class and just extending from <code>MultiDexApplication</code>"}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "reply_to_user": {"reputation": 2475, "user_id": 2897341, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/jlQJG.jpg?s=128&g=1", "display_name": "alashow", "link": "https://stackoverflow.com/users/2897341/alashow"}, "edited": false, "score": 0, "creation_date": 1556722116, "post_id": 55892351, "comment_id": 98529008, "body": "@alashow when it only crashes &lt; API 21, this hints for the library not properly installed... because later the library is not required anymore. <code>DaggerApplication</code> might behave differently than <code>Application</code>. <code>&lt;application android:name</code> in the <code>Manifest.xml</code> might be missing; this ordinary defines the <code>Application</code> entry point."}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 1, "last_activity_date": 1556469235, "creation_date": 1556469235, "answer_id": 55892351, "question_id": 55803196, "link": "https://stackoverflow.com/questions/55803196/multidex-noclassdeffounderror-with-multidex-enabled/55892351#55892351", "title": "multidex - NoClassDefFoundError with multidex enabled", "body": "<p>try changing the order of instructions for <code>DaggerApplication</code>:</p>\n\n<pre><code>override fun onCreate() {\n    MultiDex.install(this)\n    super.onCreate()\n}\n</code></pre>\n\n<p>because the <a href=\"https://developer.android.com/studio/build/multidex\" rel=\"nofollow noreferrer\">documentation</a> reads:</p>\n\n<blockquote>\n  <p><strong>Caution</strong>: Do not execute <code>MultiDex.install()</code> or any other code through reflection or JNI before <code>MultiDex.install()</code> is complete. Multidex tracing will not follow those calls, causing <code>ClassNotFoundException</code> or verify errors due to a bad class partition between DEX files.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 837, "user_id": 9593509, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T249r88XTHk/AAAAAAAAAAI/AAAAAAAAAIM/2E11TPIqh8k/photo.jpg?sz=128", "display_name": "jonatas Borges", "link": "https://stackoverflow.com/users/9593509/jonatas-borges"}, "is_accepted": false, "score": 1, "last_activity_date": 1556469468, "creation_date": 1556469468, "answer_id": 55892394, "question_id": 55803196, "link": "https://stackoverflow.com/questions/55803196/multidex-noclassdeffounderror-with-multidex-enabled/55892394#55892394", "title": "multidex - NoClassDefFoundError with multidex enabled", "body": "<p>Try this </p>\n\n<pre><code>dexOptions {\n            preDexLibraries = false\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1745, "user_id": 2248045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X1Q3J.jpg?s=128&g=1", "display_name": "Hitesh Singh", "link": "https://stackoverflow.com/users/2248045/hitesh-singh"}, "is_accepted": false, "score": 3, "last_activity_date": 1556705008, "creation_date": 1556705008, "answer_id": 55934557, "question_id": 55803196, "link": "https://stackoverflow.com/questions/55803196/multidex-noclassdeffounderror-with-multidex-enabled/55934557#55934557", "title": "multidex - NoClassDefFoundError with multidex enabled", "body": "<h2>Try below steps hope it will help you</h2>\n\n<pre><code>dependencies { \n compile 'com.android.support:multidex:1.0.1' \n}\n</code></pre>\n\n<p>Config your source\nDeclare MultiDexApplication class in AndroidManifest.xml file</p>\n\n<pre><code>&lt;application\n    android:icon=\"@drawable/ic_launcher\"\n    android:label=\"@string/app_name\"\n    android:theme=\"@style/AppTheme\"\n    android:name=\"android.support.multidex.MultiDexApplication\"&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p>If we can\u2019t extend MultiDexApplication we can install multiple dex files manually by overriding attachBaseContext(Context base) method in our Application class</p>\n\n<pre><code>public class HelloMultiDexApplication extends Application {\n    @Override\n    public void onCreate() {\n        super.onCreate();\n    }\n@Override\n    protected void attachBaseContext(Context base) {\n        super.attachBaseContext(base);\n        MultiDex.install(this);\n    }\n}\n</code></pre>\n\n<p>Config dexOptions in app/build.gradle</p>\n\n<pre><code>android {\n    dexOptions {\n        incremental true         \n        javaMaxHeapSize \"4g\"\n    }\n}\n</code></pre>\n\n<p>Enable multidex in app/build.gradle</p>\n\n<pre><code>android {\n defaultConfig { \n  multiDexEnabled true \n }\n}\nafterEvaluate {\n    tasks.matching {\n        it.name.startsWith('dex')\n    }.each { dx -&gt;\n        if (dx.additionalParameters == null) {\n            dx.additionalParameters = ['--multi-dex']\n        } else {\n            dx.additionalParameters += '--multi-dex'\n        }\n    }\n}\ndependencies {\n compile 'com.android.support:multidex:1.0.1' \n}\n</code></pre>\n\n<p>Disabled pre-dexing each module at the end of root build.gradle</p>\n\n<pre><code>subprojects {\n    project.plugins.whenPluginAdded { plugin -&gt;\n        if (\"com.android.build.gradle.AppPlugin\".equals(plugin.class.name)) {\n            project.android.dexOptions.preDexLibraries = false\n        } else if (\"com.android.build.gradle.LibraryPlugin\".equals(plugin.class.name)) {\n            project.android.dexOptions.preDexLibraries = false\n        }\n    }\n}\n</code></pre>\n\n<p>Increase gradle jvm build in gradle.properties</p>\n\n<pre><code>org.gradle.jvmargs=-Xmx4608M\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3168, "user_id": 778951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TKT8D.jpg?s=128&g=1", "display_name": "jhavatar", "link": "https://stackoverflow.com/users/778951/jhavatar"}, "is_accepted": false, "score": 1, "last_activity_date": 1556730791, "creation_date": 1556730791, "answer_id": 55939946, "question_id": 55803196, "link": "https://stackoverflow.com/questions/55803196/multidex-noclassdeffounderror-with-multidex-enabled/55939946#55939946", "title": "multidex - NoClassDefFoundError with multidex enabled", "body": "<p>I use to have this issue when making ADB builds for ice cream sandwich (API 14) devices.</p>\n\n<p>What worked for me was <a href=\"https://github.com/ftctechnh/ftc_app/wiki/Disabling-Android-Studio-Instant-Run\" rel=\"nofollow noreferrer\">disabling Android Studio's instant run</a>. </p>\n"}, {"comments": [{"owner": {"reputation": 1423, "user_id": 3997751, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qNM1h.jpg?s=128&g=1", "display_name": "Max Pinto", "link": "https://stackoverflow.com/users/3997751/max-pinto"}, "edited": false, "score": 0, "creation_date": 1582728868, "post_id": 57370849, "comment_id": 106878331, "body": "Thanks for this, this really help."}], "tags": [], "owner": {"reputation": 114, "user_id": 2168606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1bea8163f1c23a7be800bc8bd0c7a70?s=128&d=identicon&r=PG", "display_name": "Mads Ager", "link": "https://stackoverflow.com/users/2168606/mads-ager"}, "is_accepted": false, "score": 8, "last_activity_date": 1565076088, "creation_date": 1565076088, "answer_id": 57370849, "question_id": 55803196, "link": "https://stackoverflow.com/questions/55803196/multidex-noclassdeffounderror-with-multidex-enabled/57370849#57370849", "title": "multidex - NoClassDefFoundError with multidex enabled", "body": "<p>We had a deeper look at this here:</p>\n\n<p><a href=\"https://issuetracker.google.com/issues/131100011\" rel=\"noreferrer\">https://issuetracker.google.com/issues/131100011</a></p>\n\n<p>There is an unfortunate bug in some Dalvik VMs on pre-21 devices where package private methods were sometimes incorrectly overriden by public methods in another package. If the package private method is final, that will then lead to errors of the form:</p>\n\n<p><code>E/dalvikvm: Method Lcom/mycompany/MyViewModel;.clear overrides final Landroidx/lifecycle/ViewModel;.clear</code></p>\n\n<p>It looks like that could be what is hitting you here. Unfortunately, the only workaround for that particular issue is to rename your \"clear\" method to something else so that you do not hit this unfortunate VM bug.</p>\n"}], "owner": {"reputation": 2475, "user_id": 2897341, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/jlQJG.jpg?s=128&g=1", "display_name": "alashow", "link": "https://stackoverflow.com/users/2897341/alashow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2458, "favorite_count": 1, "answer_count": 6, "score": 8, "last_activity_date": 1565076088, "creation_date": 1555983888, "last_edit_date": 1556871450, "question_id": 55803196, "link": "https://stackoverflow.com/questions/55803196/multidex-noclassdeffounderror-with-multidex-enabled", "title": "multidex - NoClassDefFoundError with multidex enabled", "body": "<p>My app is crashing on pre-21 with <code>java.lang.NoClassDefFoundError app.module.SomeClass</code> error.</p>\n\n<p>I already have Multidex enabled:</p>\n\n<p>build.gradle:</p>\n\n<pre><code>android {\n    defaultConfig {\n        ...\n        multiDexEnabled true\n    }\n}\n\ndependencies {\n   ...\n   implementation \"androidx.multidex:multidex:2.0.1\"\n}\n</code></pre>\n\n<p>My Application class:</p>\n\n<pre><code>class App : DaggerApplication() {\n    ...\n    override fun attachBaseContext(base: Context) {\n        super.attachBaseContext(base)\n        MultiDex.install(this)\n    }\n</code></pre>\n\n<p>After reading about <a href=\"https://developer.android.com/studio/build/multidex.html#keep\" rel=\"noreferrer\">Declaring classes required in the primary DEX file</a> I created <code>multidex-config.pro</code> file to include <code>app.module.**</code> in primary DEX file:</p>\n\n<pre><code>-keep class app.module.** { *; }\n</code></pre>\n\n<p>And registered it in build.gradle:</p>\n\n<pre><code>android {\n  buildTypes {\n    debug {\n      ...\n      multiDexKeepProguard file('multidex-config.pro')\n    }\n}\n</code></pre>\n\n<p>I confirmed it by checking <code>build/intermediates/legacy_multidex_main_dex_list/debug/mainDexList.txt</code> and analyzing the debug apk (checking whether <code>classes.dex</code> includes <code>app.module.SomeClass</code>).</p>\n\n<p>But I'm still getting <code>java.lang.NoClassDefFoundError app.module.SomeClass</code> error.</p>\n\n<p>I also tried cleaning caches, running on different machines (cli build only without Android Studio), disabling instant run, specifying <code>javaMaxHeapSize</code>, just extending <code>MultiDexApplication</code> and etc.</p>\n\n<p>What can I try next?</p>\n"}, {"tags": ["java", "android", "exception", "kotlin", "collections"], "comments": [{"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1555978077, "post_id": 55802573, "comment_id": 98273703, "body": "It&#39;s not an ArrayList."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1555978219, "post_id": 55802573, "comment_id": 98273737, "body": "What kind of List is it? Try <code>Log.d(&quot;choose some tag here&quot;, &quot;myThings is a &quot;+myThings.getClass().getName());</code>"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1555978558, "post_id": 55802573, "comment_id": 98273804, "body": "Some lists don&#39;t support all the <code>List</code> operations. However this list is being made (not shown in your code), it&#39;s making a type of list that doesn&#39;t support <code>set</code>."}, {"owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1555979447, "post_id": 55802573, "comment_id": 98273978, "body": "@khelwood, updated. The list sorts perfectly for me every time I&#39;ve tested and debugged, but my crash logs are showing that some users on OS 5.0-7.1 are crashing intermittently, and unfortunately I cannot reproduce it myself."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1555979858, "post_id": 55802573, "comment_id": 98274032, "body": "So your Kotlin code is returning an EmptyList which can&#39;t be modified."}, {"owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1555992914, "post_id": 55802573, "comment_id": 98276411, "body": "@immibis, actually no.. i just observed on a 7.0 emulator an EmptyList get .sort&#39;ed and not crash"}, {"owner": {"reputation": 2558, "user_id": 1226095, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/9jYCt.jpg?s=128&g=1", "display_name": "jesses.co.tt", "link": "https://stackoverflow.com/users/1226095/jesses-co-tt"}, "edited": false, "score": 0, "creation_date": 1556029347, "post_id": 55802573, "comment_id": 98293521, "body": "can you add the StackTrace ?"}], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 5, "last_activity_date": 1555996860, "creation_date": 1555996860, "answer_id": 55804776, "question_id": 55802573, "link": "https://stackoverflow.com/questions/55802573/abstractlist-unsupportedoperationexception-when-calling-sort-on-a-list/55804776#55804776", "title": "AbstractList UnsupportedOperationException when calling .sort on a List", "body": "<p><code>Collections.sort</code> is an in-place list mutating operation. If you're going to invoke it in your Java method, do only pass a list there that is statically known to be a <code>MutableList</code> in Kotlin.</p>\n\n<p>If you have a <code>List</code> of unknown mutability, you can get a <code>MutableList</code> from it by calling <code>.toMutableList()</code> extension function on it.</p>\n\n<p>And if it's not principal to you to have <code>myMethod</code> written in Java, you can replace it with <code>list.sortedByDescending { it.longValue }</code> call in Kotlin, then you wouldn't need to turn that list into a mutable list first. In fact that's what <code>mapAndSort</code> method does in the end, so it looks like there's no need to sort it again. </p>\n"}, {"comments": [{"owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "edited": false, "score": 0, "creation_date": 1556038716, "post_id": 55815896, "comment_id": 98298893, "body": "This is a great answer! Thank you!"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1556039678, "post_id": 55815896, "comment_id": 98299340, "body": "<code>toList</code> is used to return a copy of list because we couldn&#39;t guarantee otherwise that result won&#39;t be modified if the original list is modified. So we can&#39;t return just <code>this</code>."}, {"owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "edited": false, "score": 0, "creation_date": 1556039954, "post_id": 55815896, "comment_id": 98299453, "body": "The exception is not thrown on OS 8.0 and higher, though."}, {"owner": {"reputation": 12909, "user_id": 458365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aEkXV.jpg?s=128&g=1", "display_name": "pablisco", "link": "https://stackoverflow.com/users/458365/pablisco"}, "edited": false, "score": 0, "creation_date": 1556040074, "post_id": 55815896, "comment_id": 98299521, "body": "Good point, however, it could check whether it&#39;s mutable or not too."}, {"owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "edited": false, "score": 0, "creation_date": 1556040142, "post_id": 55815896, "comment_id": 98299558, "body": "Thanks everyone! This was a fun one"}], "tags": [], "owner": {"reputation": 12909, "user_id": 458365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aEkXV.jpg?s=128&g=1", "display_name": "pablisco", "link": "https://stackoverflow.com/users/458365/pablisco"}, "is_accepted": true, "score": 1, "last_activity_date": 1556037891, "creation_date": 1556037891, "answer_id": 55815896, "question_id": 55802573, "link": "https://stackoverflow.com/questions/55802573/abstractlist-unsupportedoperationexception-when-calling-sort-on-a-list/55815896#55815896", "title": "AbstractList UnsupportedOperationException when calling .sort on a List", "body": "<p>The source of this crash seems to be that, internally, <code>Iterable&lt;T&gt;.sortedWith</code> (which is used by <code>Iterable&lt;T&gt;.sortedByDescending</code>) creates a new list if the size of the <code>Iterable</code> is 0 or 1:</p>\n\n<pre><code>public fun &lt;T&gt; Iterable&lt;T&gt;.sortedWith(comparator: Comparator&lt;in T&gt;): List&lt;T&gt; {\n    if (this is Collection) {\n       if (size &lt;= 1) return this.toList() // &lt;-- HERE\n       @Suppress(\"UNCHECKED_CAST\")\n       return (toTypedArray&lt;Any?&gt;() as Array&lt;T&gt;).apply { sortWith(comparator) }.asList()\n    }\n    return toMutableList().apply { sortWith(comparator) }\n}\n</code></pre>\n\n<p>The function <code>toList()</code> in turn will call <code>listOf</code>:</p>\n\n<pre><code>public fun &lt;T&gt; Iterable&lt;T&gt;.toList(): List&lt;T&gt; {\n    if (this is Collection) {\n        return when (size) {\n            0 -&gt; emptyList()\n            1 -&gt; listOf(if (this is List) get(0) else iterator().next())\n            else -&gt; this.toMutableList()\n        }\n    }\n    return this.toMutableList().optimizeReadOnlyList()\n}\n</code></pre>\n\n<p>Which in turn will resolve into either an <code>EmptyList</code> (which is safe to sort since it's empty) or a <code>SingletonList</code> which doesn't implement <code>set</code> from <code>AbstractList</code></p>\n\n<p>Here is some evidence:</p>\n\n<p><a href=\"https://try.kotlinlang.org/#/UserProjects/s3j6g8476h8047vvvsjuvletlr/rjlkkn3n6117c1aagja8dr1h67\" rel=\"nofollow noreferrer\">https://try.kotlinlang.org/#/UserProjects/s3j6g8476h8047vvvsjuvletlr/rjlkkn3n6117c1aagja8dr1h67</a></p>\n\n<p>We could potentially have a bug or, at least, an improvement since <code>sortedWith</code> could return <code>this</code> if it's of type <code>List</code>:</p>\n\n<pre><code>public fun &lt;T&gt; Iterable&lt;T&gt;.sortedWith(comparator: Comparator&lt;in T&gt;): List&lt;T&gt; {\n    if (this is Collection) {\n       if (size &lt;= 1) return if(this is List&lt;T&gt;) this else this.toList()\n       @Suppress(\"UNCHECKED_CAST\")\n       return (toTypedArray&lt;Any?&gt;() as Array&lt;T&gt;).apply { sortWith(comparator) }.asList()\n    }\n    return toMutableList().apply { sortWith(comparator) }\n}\n</code></pre>\n"}], "owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 55815896, "answer_count": 2, "score": 0, "last_activity_date": 1556037891, "creation_date": 1555977987, "last_edit_date": 1555979385, "question_id": 55802573, "link": "https://stackoverflow.com/questions/55802573/abstractlist-unsupportedoperationexception-when-calling-sort-on-a-list", "title": "AbstractList UnsupportedOperationException when calling .sort on a List", "body": "<p>I'm sorting a List using Collections.sort(), which seems to be working every way I can test it.  Some of my users are crashing though.</p>\n\n<pre><code>Caused by java.lang.UnsupportedOperationException\n    java.util.AbstractList.set (AbstractList.java:681)\n    java.util.AbstractList$FullListIterator.set (AbstractList.java:143)\n    java.util.Collections.sort (Collections.java:1909)\n    com.myapp.MyFragment.myMethod (MyFragment.java:225)\n</code></pre>\n\n<p>But, all I'm doing is trying to sort a List</p>\n\n<pre><code>private void myMethod(List&lt;MyThing&gt; myThings) {\n\n    Collections.sort(myList, (thing1, thing2) -&gt; Long.compare(thing2.getLongValue(), thing1.getLongValue()));\n</code></pre>\n\n<p>I'm noticing this doesnt happen on Android 8 and above. Its only happening on 5.0 - 7.1</p>\n\n<p>The list is instantiated as an ArrayList, populated, and set as a member of an instance of a class as a generic list.  This object is then posted with EventBus.  The list is then mapped and sorted using Kotlin's <code>map</code> and <code>sortedByDescending</code> functions.  The mapped and sorted list is then passed to <code>myMethod()</code></p>\n\n<p>This Kotlin extension is generating the list passed to this method:</p>\n\n<pre><code>fun List&lt;MyThing&gt;.mapAndSort(context: Context): List&lt;MyThing&gt; {\n    return mapNotNull {\n        when (it.type) {\n            type -&gt; it.getTyped(context) //all of these return polymorphic MyThings\n            anotherType -&gt; it.getAnotherTyped(context)\n            someOtherType -&gt; it.getSomeOtherTyped(context)\n            yetAnotherType -&gt; it.getYetAnotherType(context)\n            yetOneMoreType -&gt; it.getYetOneMoreType(context)\n            finallyLastTyope -&gt; it.getFinallyLastType(context)\n            else -&gt; null\n        }\n    }.sortedByDescending { it.longValue }\n}\n</code></pre>\n\n<p>So far I've seen this list be a <code>java.util.Arrays$ArrayList</code>, and <code>kotlin.collections.EmptyList</code>. </p>\n\n<p>I'm thinking this has something to do with EventBus, but may be Kotlin passing a Kotlin collections list type.  Does anyone know exactly what's going on?</p>\n"}, {"tags": ["android", "json", "kotlin", "retrofit2", "moshi"], "answers": [{"comments": [{"owner": {"reputation": 2057, "user_id": 6439023, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Z7XKDeTLdNw/AAAAAAAAAAI/AAAAAAAAACA/TlXVWsX_ZKc/photo.jpg?sz=128", "display_name": "Luca Nicoletti", "link": "https://stackoverflow.com/users/6439023/luca-nicoletti"}, "edited": false, "score": 1, "creation_date": 1555992776, "post_id": 55803049, "comment_id": 98276375, "body": "it actually fails when it reaches this part <code>&quot;capabilities&quot;: [&quot;Switch&quot;, {</code> as it&#39;s expecting a list of <code>String</code> and it finds an object instead"}, {"owner": {"reputation": 41, "user_id": 1722885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eddbecaa54238685bf833b80430f979e?s=128&d=identicon&r=PG", "display_name": "user1722885", "link": "https://stackoverflow.com/users/1722885/user1722885"}, "edited": false, "score": 0, "creation_date": 1556054401, "post_id": 55803049, "comment_id": 98305563, "body": "You are right! So my capabilities block is listed as a List&lt;String&gt; but its getting an object. Any suggestions how to do this and make it work?"}, {"owner": {"reputation": 15691, "user_id": 400286, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c7c553e50dba63827f185f72cae8d492?s=128&d=identicon&r=PG", "display_name": "mjhm", "link": "https://stackoverflow.com/users/400286/mjhm"}, "edited": false, "score": 0, "creation_date": 1556057702, "post_id": 55803049, "comment_id": 98306606, "body": "Can you get the API developer to return a more uniformly structured object, or at least document the return object schema?  From just this example it&#39;s hard to tell what the general schema of the object actually is, so it&#39;s impossible to know how construct a useful data structure from it."}, {"owner": {"reputation": 41, "user_id": 1722885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eddbecaa54238685bf833b80430f979e?s=128&d=identicon&r=PG", "display_name": "user1722885", "link": "https://stackoverflow.com/users/1722885/user1722885"}, "edited": false, "score": 0, "creation_date": 1556105800, "post_id": 55803049, "comment_id": 98322911, "body": "I have asked but I doubt it goes anywhere. If they do not change, what would my adapter have to do? I&#39;ve looked at the &quot;case&quot; statements but those are way over my head at this point."}, {"owner": {"reputation": 15691, "user_id": 400286, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c7c553e50dba63827f185f72cae8d492?s=128&d=identicon&r=PG", "display_name": "mjhm", "link": "https://stackoverflow.com/users/400286/mjhm"}, "edited": false, "score": 0, "creation_date": 1556122051, "post_id": 55803049, "comment_id": 98333201, "body": "At least the API should have a documented schema somewhere.  If it doesn&#39;t you&#39;re just playing a guessing game.  Far less ideal, but a different possible approach is to determine what you minimally need from the API and write a custom Moshi adapter to ignore everything else. Granted this isn&#39;t easy, and you might need more help than what you can get on SO."}, {"owner": {"reputation": 41, "user_id": 1722885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eddbecaa54238685bf833b80430f979e?s=128&d=identicon&r=PG", "display_name": "user1722885", "link": "https://stackoverflow.com/users/1722885/user1722885"}, "edited": false, "score": 0, "creation_date": 1556129886, "post_id": 55803049, "comment_id": 98336857, "body": "Thanks for the help!"}], "tags": [], "owner": {"reputation": 15691, "user_id": 400286, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c7c553e50dba63827f185f72cae8d492?s=128&d=identicon&r=PG", "display_name": "mjhm", "link": "https://stackoverflow.com/users/400286/mjhm"}, "is_accepted": false, "score": 1, "last_activity_date": 1555982462, "creation_date": 1555982462, "answer_id": 55803049, "question_id": 55802567, "link": "https://stackoverflow.com/questions/55802567/kotlin-json-question-expected-a-string-but-was-begin-object-at-path/55803049#55803049", "title": "Kotlin Json Question Expected a string but was BEGIN_OBJECT at path", "body": "<p>The apparent problem is that the <code>\"capabilities\": ...</code> in the JSON block is a mixed type list, but you declare it as <code>val capabilities: List&lt;String&gt;</code>. Hence it fails when it hits the</p>\n\n<pre><code>  {\n    \"attributes\": [\n      {\n        \"name\": \"switch\",\n        \"dataType\": null\n      }\n    ]\n  },\n</code></pre>\n\n<p>item. It's hard to guess how this item relates to the <code>capabilities</code>, but as it currently stands it looks like this will require a pretty complicated <a href=\"https://github.com/square/moshi#custom-type-adapters\" rel=\"nofollow noreferrer\">custom Moshi adapter</a> to be able to parse this into a meaningful data structure.</p>\n"}], "owner": {"reputation": 41, "user_id": 1722885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eddbecaa54238685bf833b80430f979e?s=128&d=identicon&r=PG", "display_name": "user1722885", "link": "https://stackoverflow.com/users/1722885/user1722885"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1605398192, "creation_date": 1555977920, "last_edit_date": 1605398192, "question_id": 55802567, "link": "https://stackoverflow.com/questions/55802567/kotlin-json-question-expected-a-string-but-was-begin-object-at-path", "title": "Kotlin Json Question Expected a string but was BEGIN_OBJECT at path", "body": "<p>Trying some different methods to parse nested Json that is less than user friendly. With the logger I can see the result coming in correctly but the log shows error</p>\n<pre><code>  com.squareup.moshi.JsonDataException: Expected a string but was BEGIN_OBJECT at path $.capabilities[1]\n</code></pre>\n<p>I cannot for the life of me figure out how to parse the Attribute array. I have tried doing <code>&lt;List&lt;Attribute&gt;&gt;</code> and Attribute and it does not change the result. Is there a way to convert the Attribute array into a list?\nVery new at coding in Android so looking for some help.</p>\n<p>JSON to parse</p>\n<pre><code>{\n    &quot;id&quot;: &quot;65&quot;,\n    &quot;name&quot;: &quot;Switch - Kitchen&quot;,\n    &quot;label&quot;: &quot;Switch - Kitchen&quot;,\n    &quot;attributes&quot;: [\n        {\n            &quot;name&quot;: &quot;switch&quot;,\n            &quot;currentValue&quot;: &quot;off&quot;,\n            &quot;dataType&quot;: &quot;ENUM&quot;,\n            &quot;values&quot;: [\n                &quot;on&quot;,\n                &quot;off&quot;\n            ]\n        }\n    ],\n    &quot;capabilities&quot;: [\n        &quot;Switch&quot;,\n        {\n            &quot;attributes&quot;: [\n                {\n                    &quot;name&quot;: &quot;switch&quot;,\n                    &quot;dataType&quot;: null\n                }\n            ]\n        },\n        &quot;Configuration&quot;,\n        &quot;Refresh&quot;,\n        &quot;Actuator&quot;\n    ],\n    &quot;commands&quot;: [\n        &quot;configure&quot;,\n        &quot;flash&quot;,\n        &quot;off&quot;,\n        &quot;on&quot;,\n        &quot;refresh&quot;,\n        &quot;refresh&quot;\n    ]\n}\n</code></pre>\n<p>DeviceDetails</p>\n<pre><code>data class DeviceDetails(\n    @Json(name=&quot;CapabilitiesList&quot;)\n    var attributeList: Attribute,\n    @Json(name=&quot;CapabilitiesList&quot;)\n    val capabilities: List&lt;String&gt;,\n    @Json(name=&quot;CommandsList&quot;)\n    val commands: List&lt;String&gt;,\n    var id: String = &quot;&quot;,\n    var label: String = &quot;&quot;,\n    var name: String = &quot;&quot;\n\n)\n\ndata class Attribute(\n    val currentValue: String,\n    val dataType: String,\n    val name: String,\n    @Json(name=&quot;AttributesValues&quot;)\n    val values: List&lt;String&gt;\n)\n</code></pre>\n<p>DeviceDetailsAPI</p>\n<pre><code>interface DeviceDetailsAPI {\n        @GET(&quot;devices/65&quot;)\n        fun getDeviceDetails(@Query(&quot;access_token&quot;) access_token: String):\n            Deferred&lt;DeviceDetails&gt;\n\n    companion object{\n        operator fun invoke(): DeviceDetailsAPI {\n            //Debugging URL//\n            val interceptor : HttpLoggingInterceptor = HttpLoggingInterceptor().apply {\n                this.level = HttpLoggingInterceptor.Level.BODY }\n            val client : OkHttpClient = OkHttpClient.Builder().apply {\n                this.addInterceptor(interceptor)}.build()\n            //Debugging URL//\n\n\n            val okHttpClient = OkHttpClient.Builder()\n                .build()\n\n            return Retrofit.Builder()\n                .client(okHttpClient)\n                .baseUrl(&quot;http://xxx.xxx.xxx.xxx/apps/api/109/&quot;)\n                .addCallAdapterFactory(CoroutineCallAdapterFactory())\n                .addConverterFactory(MoshiConverterFactory.create())\n                .client(client)\n                .build()\n                .create(DeviceDetailsAPI::class.java)\n        }\n    }\n}\n</code></pre>\n<p>MainActivity</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val API_KEY = &quot;xxxxxxxx&quot;\n        val testapiService = DeviceListAPI()\n        val testapiDetails = DeviceDetailsAPI()\n\n        //GlobalScope.launch (Dispatchers.Main) {\n            //val DeviceListAPI = testapiService.getAllDevices(access_token = API_KEY).await()\n            //textViewID.text = DeviceListAPI.toString()\n        //}\n\n        GlobalScope.launch (Dispatchers.Main) {\n            val DeviceDetailsAPI = testapiDetails.getDeviceDetails(access_token = API_KEY).await()\n            textViewID.text = DeviceDetailsAPI.toString()\n        }\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["android", "listview", "kotlin", "clickable"], "comments": [{"owner": {"reputation": 411, "user_id": 3266929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BwUm.jpg?s=128&g=1", "display_name": "Jatin", "link": "https://stackoverflow.com/users/3266929/jatin"}, "edited": false, "score": 0, "creation_date": 1556005202, "post_id": 55802503, "comment_id": 98280504, "body": "Hello, could you please add the code-snippet, where have you created object of FeedAdapter and assigned it to &#39;rssListView&#39;?"}, {"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1556009774, "post_id": 55802503, "comment_id": 98282733, "body": "<code>val item = parent.getItemAtPosition(position) as ViewHolder</code> is wrong . <code>getItemAtPosition</code> in your case should be <code>Article</code>"}, {"owner": {"reputation": 349, "user_id": 2835825, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/a7rqM.png?s=128&g=1", "display_name": "Le Nguyen Duy Anh", "link": "https://stackoverflow.com/users/2835825/le-nguyen-duy-anh"}, "reply_to_user": {"reputation": 411, "user_id": 3266929, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BwUm.jpg?s=128&g=1", "display_name": "Jatin", "link": "https://stackoverflow.com/users/3266929/jatin"}, "edited": false, "score": 0, "creation_date": 1556012580, "post_id": 55802503, "comment_id": 98284236, "body": "@Jatin added the code."}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 2835825, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/a7rqM.png?s=128&g=1", "display_name": "Le Nguyen Duy Anh", "link": "https://stackoverflow.com/users/2835825/le-nguyen-duy-anh"}, "edited": false, "score": 0, "creation_date": 1556022443, "post_id": 55808440, "comment_id": 98289283, "body": "I don&#39;t understand, how would I implement <code>onClickLIstener()</code> for <code>ViewHolder</code> when it doesn&#39;t inherit from anything? And I also don&#39;t understand your <code>onClick</code> at all since that&#39;s not how you create a function."}, {"owner": {"reputation": 2112, "user_id": 5250973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d547c8d93531b8b4fa5c7d3132d729?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Dangar", "link": "https://stackoverflow.com/users/5250973/jay-dangar"}, "reply_to_user": {"reputation": 349, "user_id": 2835825, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/a7rqM.png?s=128&g=1", "display_name": "Le Nguyen Duy Anh", "link": "https://stackoverflow.com/users/2835825/le-nguyen-duy-anh"}, "edited": false, "score": 0, "creation_date": 1556024111, "post_id": 55808440, "comment_id": 98290224, "body": "it&#39;s overridden function, and yes convertView will work as a viewHolder for listview in this custom adapter scenario. see i am not implementing setOnClickListener for viewHolder, i am doing it for convertView. Check the code."}, {"owner": {"reputation": 349, "user_id": 2835825, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/a7rqM.png?s=128&g=1", "display_name": "Le Nguyen Duy Anh", "link": "https://stackoverflow.com/users/2835825/le-nguyen-duy-anh"}, "edited": false, "score": 0, "creation_date": 1556025541, "post_id": 55808440, "comment_id": 98291144, "body": "I&#39;m looking at the code and it&#39;s very confusing since you&#39;re mixing Java with Kotlin. Anyway, I have implemented the <code>setOnClickListener</code> using lambdas (because I still have absolutely no idea what your <code>onClick()</code> is supopsed to do or where it&#39;s even supposed to be) and now my items are clickable but only sometimes and I have no idea why (see last edit)."}, {"owner": {"reputation": 2112, "user_id": 5250973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d547c8d93531b8b4fa5c7d3132d729?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Dangar", "link": "https://stackoverflow.com/users/5250973/jay-dangar"}, "reply_to_user": {"reputation": 349, "user_id": 2835825, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/a7rqM.png?s=128&g=1", "display_name": "Le Nguyen Duy Anh", "link": "https://stackoverflow.com/users/2835825/le-nguyen-duy-anh"}, "edited": false, "score": 0, "creation_date": 1556025673, "post_id": 55808440, "comment_id": 98291215, "body": "@LeNguyenDuyAnh, look, my code is in java but it&#39;s easily understandable. I am just setting up onClickListener on convertView, because that&#39;s the view on which you are clicking on. and then you need to implement the onClick method, just like every viewOnClick Listener. that&#39;s it, inside onClick you can put your code to do your work when an item inside listView is clicked,"}, {"owner": {"reputation": 2112, "user_id": 5250973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d547c8d93531b8b4fa5c7d3132d729?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Dangar", "link": "https://stackoverflow.com/users/5250973/jay-dangar"}, "reply_to_user": {"reputation": 349, "user_id": 2835825, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/a7rqM.png?s=128&g=1", "display_name": "Le Nguyen Duy Anh", "link": "https://stackoverflow.com/users/2835825/le-nguyen-duy-anh"}, "edited": false, "score": 0, "creation_date": 1556026308, "post_id": 55808440, "comment_id": 98291639, "body": "in edit you are describing &quot;Now I&#39;m able to click on it SOMETIMES&quot;. so your problem might now be something else. check you logcat and put it in the question."}, {"owner": {"reputation": 349, "user_id": 2835825, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/a7rqM.png?s=128&g=1", "display_name": "Le Nguyen Duy Anh", "link": "https://stackoverflow.com/users/2835825/le-nguyen-duy-anh"}, "edited": false, "score": 0, "creation_date": 1556026986, "post_id": 55808440, "comment_id": 98292037, "body": "How would Logcat show anything if the item wasn&#39;t clickable 99% of the time? What exactly do you expect Logcat to show??? If I manage to successfully click an item, the Logcat shows what I expected and the behavior is correct..."}, {"owner": {"reputation": 2112, "user_id": 5250973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d547c8d93531b8b4fa5c7d3132d729?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Dangar", "link": "https://stackoverflow.com/users/5250973/jay-dangar"}, "reply_to_user": {"reputation": 349, "user_id": 2835825, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/a7rqM.png?s=128&g=1", "display_name": "Le Nguyen Duy Anh", "link": "https://stackoverflow.com/users/2835825/le-nguyen-duy-anh"}, "edited": false, "score": 0, "creation_date": 1556027063, "post_id": 55808440, "comment_id": 98292085, "body": "when your app crashes it stored data related crashing to debug in your code, or solve the problem, i want that logcat error, so that i can see the error and try to help."}, {"owner": {"reputation": 349, "user_id": 2835825, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/a7rqM.png?s=128&g=1", "display_name": "Le Nguyen Duy Anh", "link": "https://stackoverflow.com/users/2835825/le-nguyen-duy-anh"}, "edited": false, "score": 0, "creation_date": 1556029122, "post_id": 55808440, "comment_id": 98293391, "body": "There is no crash, there is no error, I just can&#39;t click it. I can click it maybe once every 20 times, randomly. As I wrote."}], "tags": [], "owner": {"reputation": 2112, "user_id": 5250973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d547c8d93531b8b4fa5c7d3132d729?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Dangar", "link": "https://stackoverflow.com/users/5250973/jay-dangar"}, "is_accepted": false, "score": 0, "last_activity_date": 1556024182, "last_edit_date": 1556024182, "creation_date": 1556012737, "answer_id": 55808440, "question_id": 55802503, "link": "https://stackoverflow.com/questions/55802503/listview-is-not-clickable-custom-adapter/55808440#55808440", "title": "ListView is not clickable (custom Adapter)", "body": "<p>this is because you haven't implemented onClickListener for viewHolder class. you have implemented for listview onItemClick Listener which simply won't work for custom adapters. for custom adapters you need to implement onClickListener inside your getView Method. </p>\n\n<pre><code>override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {\n        val view: View\n        val viewHolder: ViewHolder\n        if(convertView == null) {\n            view = inflater.inflate(resource, parent, false)\n            viewHolder = ViewHolder(view)\n            view.tag = viewHolder\n        } else {\n            view = convertView\n            viewHolder = view.tag as ViewHolder\n        }\n\n        val currentEntry = feed[position] as SyndEntry\n\n        viewHolder.tvName.text = currentEntry.title\n        viewHolder.tvSummary.text = currentEntry.description.value\n\n        // set onClickListener for your ConvertView...\n        convertView.setOnClickListener(context);    \n\n        return view\n    }\n\n// now implement your on Click \n@Overriden\nvoid onClick(View view){\n\n}\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 2835825, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/a7rqM.png?s=128&g=1", "display_name": "Le Nguyen Duy Anh", "link": "https://stackoverflow.com/users/2835825/le-nguyen-duy-anh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556024182, "creation_date": 1555977156, "last_edit_date": 1556022824, "question_id": 55802503, "link": "https://stackoverflow.com/questions/55802503/listview-is-not-clickable-custom-adapter", "title": "ListView is not clickable (custom Adapter)", "body": "<p>I'm trying to create a simple RSS reader with Rome.</p>\n\n<p>My barebones implementation uses <code>ListView</code> and my custom <code>Adapter</code> to fill it with <code>feed_stub.xml</code>. Clicking on a ListView item will start another activity.</p>\n\n<p>So far I have two problems:</p>\n\n<ol>\n<li><p>My ListView items are not clickable - my <code>setOnItemClickListener</code> isn't triggered.</p></li>\n<li><p>If I click on some items many times, my app crashes with out of bound exception. Which means my Adapter probably has errors.</p></li>\n</ol>\n\n<p><code>ListView</code> from <code>activity_main.xml</code></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ListView\n            android:layout_width=\"0dp\"\n            android:layout_height=\"0dp\" android:layout_marginTop=\"8dp\"\n            app:layout_constraintTop_toTopOf=\"parent\" app:layout_constraintStart_toStartOf=\"parent\"\n            android:layout_marginStart=\"8dp\"\n            android:layout_marginBottom=\"8dp\" app:layout_constraintBottom_toBottomOf=\"parent\"\n            android:id=\"@+id/rssListView\" app:layout_constraintEnd_toEndOf=\"parent\" android:layout_marginEnd=\"8dp\"\n            android:clickable=\"true\" app:layout_constraintHorizontal_bias=\"0.0\"\n            app:layout_constraintVertical_bias=\"0.0\"/&gt;\n</code></pre>\n\n<p>My <code>MainActivity</code></p>\n\n<pre><code>import android.content.Intent\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.util.Log\nimport android.widget.Toast\nimport cz.cvut.lenguduy.rss.Downloader\nimport cz.cvut.lenguduy.view.ViewHolder\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity() {\n    private val TAG = \"MainActivity\"\n\n    private val downloader by lazy { Downloader(this, rssListView) }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        rssListView.setOnItemClickListener { parent, _, position, _ -&gt;\n            Log.d(TAG, \"rssListView: item @pos $position clicked\")\n            val intent = Intent(this, SecondActivity::class.java)\n            val item = parent.getItemAtPosition(position) as ViewHolder\n\n            Toast.makeText(this, \"clicked\", Toast.LENGTH_LONG).show()\n\n            intent.putExtra(\"title\", item.tvName.text)\n            intent.putExtra(\"text\", item.tvSummary.text)\n            this.startActivity(intent)\n        }\n\n        downloader.execute(\"http://ax.itunes.apple.com/WebObjects/MZStoreServices.woa/ws/RSS/topfreeapplications/limit=25/xml\")\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        downloader.cancel(true)\n    }\n}\n</code></pre>\n\n<p><code>ViewHolder</code> is simple:</p>\n\n<pre><code>class ViewHolder(view: View) {\n    val tvName: TextView = view.findViewById(R.id.tvName)\n    val tvSummary: TextView = view.findViewById(R.id.tvSummary)\n}\n</code></pre>\n\n<p>My <code>ListView</code> uses <code>feed_stub.xml</code>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                                             xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\"\n                                             android:layout_height=\"match_parent\"&gt;\n\n    &lt;TextView\n            android:text=\"TextView\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/tvName\" android:layout_marginTop=\"8dp\"\n            app:layout_constraintTop_toTopOf=\"parent\" app:layout_constraintEnd_toEndOf=\"parent\"\n            android:layout_marginEnd=\"16dp\" app:layout_constraintStart_toStartOf=\"parent\"\n            android:layout_marginStart=\"16dp\" android:textSize=\"20sp\" android:textStyle=\"bold\" android:maxLines=\"2\"\n            android:clickable=\"true\"/&gt;\n    &lt;TextView\n            android:text=\"TextView\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/tvSummary\"\n            app:layout_constraintTop_toBottomOf=\"@+id/tvName\" app:layout_constraintEnd_toEndOf=\"parent\"\n            android:layout_marginEnd=\"16dp\" app:layout_constraintStart_toStartOf=\"parent\"\n            android:layout_marginStart=\"16dp\" android:maxLines=\"3\" android:clickable=\"true\"/&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>And finally my <code>FeedAdapter</code>:</p>\n\n<pre><code>class FeedAdapter(context: Context,\n                  private val resource: Int, private val feed: MutableList&lt;Any?&gt;)\n    : ArrayAdapter&lt;Article&gt;(context, resource) {\n\n    private val inflater = LayoutInflater.from(context)\n\n    override fun getCount(): Int {\n        return feed.size\n    }\n\n    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {\n        val view: View\n        val viewHolder: ViewHolder\n        if(convertView == null) {\n            view = inflater.inflate(resource, parent, false)\n            viewHolder = ViewHolder(view)\n            view.tag = viewHolder\n        } else {\n            view = convertView\n            viewHolder = view.tag as ViewHolder\n        }\n\n        val currentEntry = feed[position] as SyndEntry\n\n        viewHolder.tvName.text = currentEntry.title\n        viewHolder.tvSummary.text = currentEntry.description.value\n\n        return view\n    }\n\n    override fun isEnabled(position: Int): Boolean {\n        return true\n    }\n}\n</code></pre>\n\n<p>Most operations are performed by my pseudo-controller:</p>\n\n<pre><code>class Downloader(context: Context, listView: ListView): AsyncTask&lt;String, Void, String&gt;() {\n    private val TAG = \"Downloader\"\n\n    private var propContext: Context by Delegates.notNull()\n    private var propListView: ListView by Delegates.notNull()\n\n    init {\n        propContext = context\n        propListView = listView\n    }\n\n    private lateinit var list: MutableList&lt;Any?&gt;\n\n    override fun doInBackground(vararg url: String?): String {\n        val input = SyndFeedInput()\n        val feed = input.build(XmlReader(URL(url[0])))\n\n        list = feed.entries\n\n        return feed.toString()\n    }\n\n    override fun onPostExecute(result: String?) {\n        super.onPostExecute(result)\n\n        val feedAdapter = FeedAdapter(propContext, R.layout.feed_stub, list)\n        propListView.adapter = feedAdapter\n    }\n}\n</code></pre>\n\n<p><strong>So why are my <code>ListView</code> items not clickable?</strong></p>\n\n<p>And why does my app crash after multiple clicks with <code>java.lang.IndexOutOfBoundsException: Invalid index 10, size is 0</code>?</p>\n\n<p><strong>EDIT:</strong> In <code>FeedAdapter</code>s <code>getView()</code> I added this onClickListener:</p>\n\n<pre><code>convertView?.setOnClickListener() { v -&gt;\n            Log.d(TAG, \"getView(): item clicked\")\n\n            val intent = Intent(context, SecondActivity::class.java)\n            intent.putExtra(\"title\", currentEntry.title)\n            intent.putExtra(\"summary\", currentEntry.description.value)\n\n            context.startActivity(intent)\n        }\n</code></pre>\n\n<p>Now I'm able to click on it SOMETIMES. I have absolutely no idea why that is but if I click randomly enough, I will get the intended behavior of going to another activity.</p>\n"}, {"tags": ["gradle", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 17430, "user_id": 355438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb132c7de803cf864996a922a073e5f2?s=128&d=identicon&r=PG", "display_name": "Lu55", "link": "https://stackoverflow.com/users/355438/lu55"}, "edited": false, "score": 0, "creation_date": 1594921859, "post_id": 55801356, "comment_id": 111304001, "body": "see <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/examples/kotlin-jsr223-local-example/build.gradle.kts\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin/blob/master/libraries/examples/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3962, "user_id": 2789327, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/819a89b05f92171a5bb1e3e20f0832ae?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2789327/dan"}, "is_accepted": true, "score": 3, "last_activity_date": 1555968547, "creation_date": 1555968547, "answer_id": 55801356, "question_id": 55801355, "link": "https://stackoverflow.com/questions/55801355/why-did-kotlin-jsr223-scripting-stop-working-when-i-upgraded-to-kotlin-1-3-30/55801356#55801356", "title": "Why did Kotlin JSR223 Scripting stop working when I upgraded to Kotlin 1.3.30", "body": "<p>It broke because JetBrains have refactored the scripting functionality into a plugin, and the dependencies required to successfully run Kotlin script through JSR223 have changed.</p>\n\n<p>The relevant issue on the Kotlin bug tracker is <a href=\"https://youtrack.jetbrains.com/issue/KT-30972\" rel=\"nofollow noreferrer\">KT-30972</a>, which was closed as a duplicate of <a href=\"https://youtrack.jetbrains.com/issue/KT-30986\" rel=\"nofollow noreferrer\">KT-30986</a>.</p>\n\n<p>The upshot is, you need to adjust the dependencies to include <code>kotlin-scripting-compiler-embeddable</code>.</p>\n\n<pre><code>dependencies {\n    // ... other stuff ...\n    testCompile \"org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version\"\n    testCompile \"org.jetbrains.kotlin:kotlin-compiler-embeddable:$kotlin_version\"\n    testCompile \"org.jetbrains.kotlin:kotlin-scripting-compiler-embeddable:$kotlin_version\"\n    testCompile \"org.jetbrains.kotlin:kotlin-script-util:$kotlin_version\"\n}\n</code></pre>\n"}], "owner": {"reputation": 3962, "user_id": 2789327, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/819a89b05f92171a5bb1e3e20f0832ae?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2789327/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 0, "accepted_answer_id": 55801356, "answer_count": 1, "score": 4, "last_activity_date": 1555968547, "creation_date": 1555968547, "question_id": 55801355, "link": "https://stackoverflow.com/questions/55801355/why-did-kotlin-jsr223-scripting-stop-working-when-i-upgraded-to-kotlin-1-3-30", "title": "Why did Kotlin JSR223 Scripting stop working when I upgraded to Kotlin 1.3.30", "body": "<p>In a project that uses the <a href=\"https://kotlinlang.org/docs/reference/whatsnew11.html#javaxscript-support\" rel=\"nofollow noreferrer\"><code>javax.script</code> scripting support added in 1.1</a> in its unit tests, upgrading the Kotlin language version from 1.3.21 to 1.3.30 caused those tests to fail with the following exception:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: org/jetbrains/kotlin/scripting/compiler/plugin/ScriptingCompilerConfigurationComponentRegistrar\n        at org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngine.makeCompilerConfiguration(KotlinJsr223JvmLocalScriptEngine.kt:72)\n        at org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngine.access$makeCompilerConfiguration(KotlinJsr223JvmLocalScriptEngine.kt:38)\n        at org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngine$replCompiler$2.invoke(KotlinJsr223JvmLocalScriptEngine.kt:49)\n        at org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngine$replCompiler$2.invoke(KotlinJsr223JvmLocalScriptEngine.kt:38)\n        at kotlin.SynchronizedLazyImpl.getValue(LazyJVM.kt:74)\n        at org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngine.getReplCompiler(KotlinJsr223JvmLocalScriptEngine.kt)\n        at org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngine$localEvaluator$2.invoke(KotlinJsr223JvmLocalScriptEngine.kt:53)\n        at org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngine$localEvaluator$2.invoke(KotlinJsr223JvmLocalScriptEngine.kt:38)\n        at kotlin.SynchronizedLazyImpl.getValue(LazyJVM.kt:74)\n        at org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngine.getLocalEvaluator(KotlinJsr223JvmLocalScriptEngine.kt)\n        at org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngine.getReplEvaluator(KotlinJsr223JvmLocalScriptEngine.kt:55)\n        at org.jetbrains.kotlin.script.jsr223.KotlinJsr223JvmLocalScriptEngine.createState(KotlinJsr223JvmLocalScriptEngine.kt:59)\n        at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.createState$default(KotlinJsr223JvmScriptEngineBase.kt:46)\n        at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.getCurrentState(KotlinJsr223JvmScriptEngineBase.kt:53)\n        at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.nextCodeLine(KotlinJsr223JvmScriptEngineBase.kt:44)\n        at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.compileAndEval(KotlinJsr223JvmScriptEngineBase.kt:59)\n        at org.jetbrains.kotlin.cli.common.repl.KotlinJsr223JvmScriptEngineBase.eval(KotlinJsr223JvmScriptEngineBase.kt:31)\n</code></pre>\n\n<p>The relevant lines in <code>build.gradle</code> are:</p>\n\n<pre><code>dependencies {\n    // ... other stuff ...\n    testCompile \"org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version\"\n    testCompile \"org.jetbrains.kotlin:kotlin-compiler-embeddable:$kotlin_version\"\n    testCompile \"org.jetbrains.kotlin:kotlin-script-util:$kotlin_version\"\n}\n</code></pre>\n\n<p>where <code>ext.kotlin_version</code> is either <code>\"1.3.21\"</code> or <code>\"1.3.30\"</code>.</p>\n\n<p>Why did this break, and how can I fix it?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1555968473, "post_id": 55801291, "comment_id": 98271405, "body": "Hit Ctrl-shift-A (or Cmd-shift-A on Mac), then type &quot;convert java file to Kotlin&quot;."}, {"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1555970636, "post_id": 55801291, "comment_id": 98272044, "body": "What&#39;s wrong with an exception at runtime?  If you&#39;re testing your code thoroughly, it&#39;s a lot easier to debug an exception than to debug silently transformed data."}], "answers": [{"comments": [{"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 1, "creation_date": 1555970575, "post_id": 55801495, "comment_id": 98272033, "body": "<code>this.text = str ?: &quot;&quot;</code> ?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1556003798, "post_id": 55801495, "comment_id": 98279883, "body": "Make the getter public with private setter instead of <code>getText()</code>."}], "tags": [], "owner": {"reputation": 5120, "user_id": 1401164, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/892b23de3c567590676d6ce001d5d854?s=128&d=identicon&r=PG", "display_name": "Gustavo", "link": "https://stackoverflow.com/users/1401164/gustavo"}, "is_accepted": true, "score": 0, "last_activity_date": 1555970721, "last_edit_date": 1555970721, "creation_date": 1555969302, "answer_id": 55801495, "question_id": 55801291, "link": "https://stackoverflow.com/questions/55801291/how-to-set-non-null-string-variables-value-to-empty-if-null-value-passed/55801495#55801495", "title": "How to set non-null string variable&#39;s value to empty if null value passed", "body": "<pre><code>class Item {\n    private var text: String = \"\"\n\n    fun getText() = text\n\n    fun setText(str: String?) {\n        text = str ?: \"\"\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 2858147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9ac04755b03b7825fe4934a653a65b01?s=128&d=identicon&r=PG&f=1", "display_name": "Nur4I", "link": "https://stackoverflow.com/users/2858147/nur4i"}, "edited": false, "score": 0, "creation_date": 1556084428, "post_id": 55809770, "comment_id": 98311565, "body": "You exactly described my problem. Setter is called only from kotlin code, but the value is taken from Java library, which may return null. So I was searching for elegant way to easily overcome these null values and set empty strings if null passed"}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "reply_to_user": {"reputation": 153, "user_id": 2858147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9ac04755b03b7825fe4934a653a65b01?s=128&d=identicon&r=PG&f=1", "display_name": "Nur4I", "link": "https://stackoverflow.com/users/2858147/nur4i"}, "edited": false, "score": 0, "creation_date": 1556095155, "post_id": 55809770, "comment_id": 98316577, "body": "If the setter is called only from Kotlin, then I&#39;d suggest using a simple non-nullable property (as per my last example), and fixing nulls when you <i>call</i> the setter, e.g. <code>myItem.text = someValueFromJava ?: &quot;&quot;</code>.  (That&#39;s concise, and keeps the null handling nearer the Java.)  Or, if that happens a lot, perhaps adding a separate method to Item e.g. <code>fun setTextHandlingNull(value: String?) { text = value ?: &quot;&quot; }</code>.  (That makes it more obvious to the caller what&#39;s happening.)"}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 0, "last_activity_date": 1556017359, "creation_date": 1556017359, "answer_id": 55809770, "question_id": 55801291, "link": "https://stackoverflow.com/questions/55801291/how-to-set-non-null-string-variables-value-to-empty-if-null-value-passed/55809770#55809770", "title": "How to set non-null string variable&#39;s value to empty if null value passed", "body": "<p>The Java code in the question implements a property whose value can't be null, but whose setter allows null (converting it to a default value).\u00a0 (Java doesn't have direct support for properties, so you have to code the field, getter, and setter by hand.)</p>\n\n<p>This doesn't really have an idiomatic Kotlin equivalent.\u00a0 The direct translation would be:</p>\n\n<pre><code>class Item {\n    var text: String = \"\"\n        set(value) { field = value ?: \"\" }\n}\n</code></pre>\n\n<p>This declares a non-nullable property with a default value.\u00a0 (Like all Kotlin properties, its field is private; it also has a getter method and \u2014 because it's a <code>var</code> \u2014 a setter method,  both of which are public because the no other visibility was specified.)\u00a0 And it overrides the setter to substitute the default value if <code>null</code> is passed.</p>\n\n<p>If called from Java code, then I <em>think</em> the above would handle it as expected.\u00a0 (I haven't tested it.)</p>\n\n<p>But because the Kotlin compiler knows that the field is not nullable, it wouldn't allow you to call the setter with a null value in the first place; this is where it differs from the Java version.</p>\n\n<p>So if it were called only from other Kotlin code, the <code>?: \"\"</code> would never be used, and so the setter wouldn't need to be overridden.\u00a0 The most natural Kotlin translation would be simply:</p>\n\n<pre><code>class Item {\n    var text: String = \"\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22786, "user_id": 974045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ad548cd357d81ab99c5d60e64e02070?s=128&d=identicon&r=PG", "display_name": "Gibolt", "link": "https://stackoverflow.com/users/974045/gibolt"}, "is_accepted": false, "score": 1, "last_activity_date": 1577132610, "last_edit_date": 1592644375, "creation_date": 1577132610, "answer_id": 59460957, "question_id": 55801291, "link": "https://stackoverflow.com/questions/55801291/how-to-set-non-null-string-variables-value-to-empty-if-null-value-passed/59460957#59460957", "title": "How to set non-null string variable&#39;s value to empty if null value passed", "body": "<h2>The simplest way is <code>text.orEmpty()</code></h2>\n<p><code>text.orEmpty()</code> for a <code>String?</code> will return &quot;&quot; if null, or the original string</p>\n<p>The best alternate option is <code>text ?: &quot;&quot;</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8476308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mtjTe.jpg?s=128&g=1", "display_name": "John Jeremias", "link": "https://stackoverflow.com/users/8476308/john-jeremias"}, "is_accepted": false, "score": 0, "last_activity_date": 1618567365, "creation_date": 1618567365, "answer_id": 67123169, "question_id": 55801291, "link": "https://stackoverflow.com/questions/55801291/how-to-set-non-null-string-variables-value-to-empty-if-null-value-passed/67123169#67123169", "title": "How to set non-null string variable&#39;s value to empty if null value passed", "body": "<p>Some times the IDE will tell you that is unnecesary, so I made function and named ifNull then I passed the value.</p>\n<pre><code>    private fun ifNull(value: String?): String {\n\n    return value ?: &quot; &quot;\n}\n</code></pre>\n<p>Now, use it like this.</p>\n<pre><code>TextView.text = ifNull(name)\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 2858147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9ac04755b03b7825fe4934a653a65b01?s=128&d=identicon&r=PG&f=1", "display_name": "Nur4I", "link": "https://stackoverflow.com/users/2858147/nur4i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3026, "favorite_count": 0, "accepted_answer_id": 55801495, "answer_count": 4, "score": 1, "last_activity_date": 1618567365, "creation_date": 1555968119, "question_id": 55801291, "link": "https://stackoverflow.com/questions/55801291/how-to-set-non-null-string-variables-value-to-empty-if-null-value-passed", "title": "How to set non-null string variable&#39;s value to empty if null value passed", "body": "<p>How can I achieve this java code's analog in Kotlin?</p>\n\n<pre><code>class Item {\n    private String text = \"\";\n\n    public String getText() {\n        return text;\n    }\n\n    public void setText(String str) {\n        if(str == null){\n            text = \"\";\n        } else {\n            text = str;\n        }\n    }\n\n}\n</code></pre>\n\n<p>So whenever I set null value for text, it's value replaced with empty string.\nI want exactly the same behavior but in Kotlin, because I'm working with Java classes in Kotlin code, which may return some null values. Checking for nullability everytime before setting fields value is not a good idea, because it can be forgotten by accident, and give an exception at runtime.</p>\n"}, {"tags": ["android", "kotlin", "android-graphview"], "comments": [{"owner": {"reputation": 1111, "user_id": 3795571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5134e5d6a9bbc973e0b57a823788eff8?s=128&d=identicon&r=PG&f=1", "display_name": "Aleckson Nyamwaya", "link": "https://stackoverflow.com/users/3795571/aleckson-nyamwaya"}, "edited": false, "score": 0, "creation_date": 1559625573, "post_id": 55800712, "comment_id": 99469172, "body": "Hey did you ever figure this out? is there a gist? I&#39;m having a similar Issue and to see your code would really help me."}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "edited": false, "score": 0, "creation_date": 1555984772, "post_id": 55802653, "comment_id": 98274925, "body": "ohh, tank you  <i>@mjhm</i>"}], "tags": [], "owner": {"reputation": 15691, "user_id": 400286, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c7c553e50dba63827f185f72cae8d492?s=128&d=identicon&r=PG", "display_name": "mjhm", "link": "https://stackoverflow.com/users/400286/mjhm"}, "is_accepted": true, "score": 1, "last_activity_date": 1555978753, "creation_date": 1555978753, "answer_id": 55802653, "question_id": 55800712, "link": "https://stackoverflow.com/questions/55800712/kotlin-how-can-a-math-function-be-graphically-plotted-using-graphview/55802653#55802653", "title": "Kotlin - How can a math function be graphically plotted using GraphView?", "body": "<p>It looks like the python example is plotting the <code>.pdf</code> \"probability density function\" while the kotlin example is plotting the <code>.cumulativeProbability</code> which is essentially the integral of the PDF. Most likely you'll want to use the <a href=\"http://commons.apache.org/proper/commons-math/javadocs/api-3.6/org/apache/commons/math3/distribution/NormalDistribution.html#density(double)\" rel=\"nofollow noreferrer\"><code>.density</code></a> method instead.</p>\n"}], "owner": {"reputation": 431, "user_id": 10078148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2399f9b8e40752690d3529004f458d6?s=128&d=identicon&r=PG&f=1", "display_name": "royer", "link": "https://stackoverflow.com/users/10078148/royer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 55802653, "answer_count": 1, "score": 0, "last_activity_date": 1555978753, "creation_date": 1555964977, "question_id": 55800712, "link": "https://stackoverflow.com/questions/55800712/kotlin-how-can-a-math-function-be-graphically-plotted-using-graphview", "title": "Kotlin - How can a math function be graphically plotted using GraphView?", "body": "<p>I have the following function, well it is the formula of the normal distribution and my goal is to graph it using the GraphView library.\nWell, I have the following:</p>\n\n<ul>\n<li>Id --  <strong>plot</strong></li>\n</ul>\n\n<blockquote>\n  <p>code kotlin</p>\n</blockquote>\n\n<pre class=\"lang-java prettyprint-override\"><code>class ExampleActivity : AppCompatActivity() {\n    lateinit var series1: LineGraphSeries&lt;DataPoint&gt;\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_example)\n\n        series1 = LineGraphSeries&lt;DataPoint&gt;()\n\n        val media = 8.0  \n        val sd = 2.0  \n\n        fun linspace(start: Double, stop: Double, num: Int) = Array(num) { start + it * ((stop - start) / (num - 1)) }\n\n        val x1 = linspace(media - 3*sd, media + 3*sd, 10)\n        val normal = NormalDistribution(media,sd)\n\n        for (i in x1){\n            val y = normal.cumulativeProbability(i)\n            series1.appendData(DataPoint(i,y),false,x1.size)\n        }\n        plot.viewport.isXAxisBoundsManual = true\n        plot.viewport.setMaxX(20.0)\n        plot.viewport.isYAxisBoundsManual = true\n        plot.viewport.setMaxY(2.0)\n        //plot.viewport.isScalable = true\n        plot.addSeries(series1)\n    }\n}\n</code></pre>\n\n<p>result\n<a href=\"https://i.stack.imgur.com/6P7RQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6P7RQ.png\" alt=\"reference\"></a></p>\n\n<p>this is very strange, in python I used the same and the result is more complete, I show you.</p>\n\n<blockquote>\n  <p>code python</p>\n</blockquote>\n\n<pre class=\"lang-py prettyprint-override\"><code>import matplotlib.pyplot as plt\nimport numpy as np\nimport scipy.stats as stats\nimport math\n\nmu = 8\nsigma = 2\nx = np.linspace(mu - 3*sigma, mu + 3*sigma, 10)\nprint(np.linspace(mu - 3*sigma, mu + 3*sigma, 10))\nplt.plot(x, stats.norm.pdf(x, mu, sigma))\nplt.show()\n</code></pre>\n\n<p>result python\n<a href=\"https://i.stack.imgur.com/OSOWx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OSOWx.png\" alt=\"referente python\"></a></p>\n\n<blockquote>\n  <p><strong>Info</strong></p>\n</blockquote>\n\n<p><strong>code kotlin</strong>\n<code>val x1 = linspace(media - 3*sd, media + 3*sd, 10)</code> </p>\n\n<p>==</p>\n\n<p><strong>code Python</strong>\n<code>x = np.linspace(mu - 3*sigma, mu + 3*sigma, 10)</code></p>\n\n<p>Can you help me please, what do I need to add?</p>\n"}, {"tags": ["kotlin", "initialization", "set"], "answers": [{"tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": false, "score": 1, "last_activity_date": 1555965837, "last_edit_date": 1555965837, "creation_date": 1555965428, "answer_id": 55800812, "question_id": 55800506, "link": "https://stackoverflow.com/questions/55800506/more-idiomatic-way-to-initialize-a-set-in-kotlin/55800812#55800812", "title": "More idiomatic way to initialize a set in Kotlin?", "body": "<p>You could define an extension that takes in a transformer to get the combinations as a pair of integers, then map it to a <code>Cell</code>. For instance:</p>\n\n<pre><code>inline fun &lt;R&gt; IntRange.combine(block: (Int, Int) -&gt; R): Set&lt;R&gt; {\n    return flatMap { x -&gt; map { y -&gt; block(x, y) } }.toSet()\n}\n</code></pre>\n\n<p>And then you can initialize with:</p>\n\n<pre><code>protected val board = (1..width).combine { x, y -&gt; Cell(x, y) }\n</code></pre>\n\n<p>or simply:</p>\n\n<pre><code>protected val board = (1..width).flatMap { i -&gt; (1..width).map { j -&gt; Cell(i, j) } }\n</code></pre>\n\n<p>I think the former is more readable, though.</p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1555967446, "last_edit_date": 1555967446, "creation_date": 1555967101, "answer_id": 55801114, "question_id": 55800506, "link": "https://stackoverflow.com/questions/55800506/more-idiomatic-way-to-initialize-a-set-in-kotlin/55801114#55801114", "title": "More idiomatic way to initialize a set in Kotlin?", "body": "<p>Unfortunately there is no constructor or top-level function to make the creation of a set following a certain logic easy, but if you already have a list you can turn it into a <code>Set</code> using <code>toSet()</code>.</p>\n\n<p>In any case I would separate the logic of creating a list of combinations and the creation of the <code>Cell</code> instances.</p>\n\n<pre><code>// extension property on IntRange to create all possible combinations\nval IntRange.combinations get() = flatMap { i -&gt; map { j -&gt; i to j }}\n\nval set = (1..5)\n             .combinations\n             .map { (i, j) -&gt; Cell(i, j) }\n             .toSet()\n</code></pre>\n\n<p><strong>Addition:</strong></p>\n\n<p>If you create a secondary constructor for <code>Cell</code> which takes a <code>Pair</code> like this:</p>\n\n<pre><code>data class Cell(val i: Int, val j: Int) {\n    constructor(pair: Pair&lt;Int, Int&gt;): this(pair.first, pair.second)\n}\n</code></pre>\n\n<p>you can shorten the code to this:</p>\n\n<pre><code>val set = (1..5).combinations.map(::Cell).toSet()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": false, "score": 0, "last_activity_date": 1555972857, "creation_date": 1555972857, "answer_id": 55801995, "question_id": 55800506, "link": "https://stackoverflow.com/questions/55800506/more-idiomatic-way-to-initialize-a-set-in-kotlin/55801995#55801995", "title": "More idiomatic way to initialize a set in Kotlin?", "body": "<p>You can do this</p>\n\n<pre><code>fun initBoard(width: Int): Set&lt;Cell&gt; {\n    return List&lt;Cell&gt;(width * width) { index -&gt;\n            val i = index / width\n            val j = index % width\n            Cell(i + 1, j + 1)\n    }.toSet()\n}\n</code></pre>\n\n<p>then in your init block</p>\n\n<pre><code>lateinit var board: Set&lt;Cell&gt;\n\ninit {\n    board = initBoard(width)\n}\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 6666239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--yXN1CnP_N0/AAAAAAAAAAI/AAAAAAAAADg/C6_PPQ2tkMQ/photo.jpg?sz=128", "display_name": "Ole Steinar Skrede", "link": "https://stackoverflow.com/users/6666239/ole-steinar-skrede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1555972857, "creation_date": 1555963930, "question_id": 55800506, "link": "https://stackoverflow.com/questions/55800506/more-idiomatic-way-to-initialize-a-set-in-kotlin", "title": "More idiomatic way to initialize a set in Kotlin?", "body": "<p>I have a set of Cells<br>\n<code>data class Cell(val i: Int, val j: Int)</code><br>\nthat I initialize in my class like this</p>\n\n<pre><code>protected val board = mutableSetOf&lt;Cell&gt;()\ninit {\n    for (i in 1..width) {\n        for (j in 1..width) {\n            board += Cell(i, j)\n        }\n    }\n}\n</code></pre>\n\n<p>Is there a more idiomatic (functional) way to initialize the set?<br>\nIdeally I would like the set to be immutable, because after this initialization it should never be changed.</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "mockk"], "comments": [{"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1555961893, "post_id": 55800066, "comment_id": 98269087, "body": "Isn&#39;t that because of the difference in sticktness? In mockk you need to specify all the behaviour."}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "reply_to_user": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1555964223, "post_id": 55800066, "comment_id": 98269947, "body": "ok hmm I could see that but then I am at a loss the <code>private val enableLoading = LoginResult.Loading(true)</code> is a sealed class  <code>sealed class LoginResult {      data class Success(val user: CurrentUserResponse) : LoginResult()     data class Loading(val value: Boolean): LoginResult()     data class Failure(val reason: String): LoginResult() } </code>  So how do I go about mockking the results I tried this... coEvery { LoginResult.Loading(true) } returns LoginResult.Loading(true)  but It still came back with the same error."}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "reply_to_user": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1555964623, "post_id": 55800066, "comment_id": 98270102, "body": "Also I dont know what the alternative in mockk is for this @RunWith(MockitoJUnitRunner::class) I tried @RunWith(MockKJUnitRunner::class) But I cant get it to be found"}, {"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1555964964, "post_id": 55800066, "comment_id": 98270219, "body": "You can try relaxed mocks (check docs) if you don&#39;t want strickness. It is hard to understand from comment what code do you have. Submit github issue with proper formatting and I&#39;ll try to help. Also check this article for advanced cases <a href=\"https://blog.kotlin-academy.com/mocking-is-not-rocket-science-mockk-advanced-features-42277e5983b5\" rel=\"nofollow noreferrer\">blog.kotlin-academy.com/&hellip;</a>"}, {"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1555965149, "post_id": 55800066, "comment_id": 98270287, "body": "No alternative for run with because it is not needed. Although you can use JUnit 5 extensions if you want (check corresponding doc section)"}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "reply_to_user": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1555965227, "post_id": 55800066, "comment_id": 98270323, "body": "Oh haha duh... yeah adding the relaxed = true helped make it work :) thanks.  As always you are amazing. :)"}, {"owner": {"reputation": 146, "user_id": 9087847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8CNPf.jpg?s=128&g=1", "display_name": "Giovanka Bisano", "link": "https://stackoverflow.com/users/9087847/giovanka-bisano"}, "edited": false, "score": 0, "creation_date": 1572512131, "post_id": 55800066, "comment_id": 103585197, "body": "@Crash1hd . Have you find a solution without using <code>relaxed = true</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 146, "user_id": 9087847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8CNPf.jpg?s=128&g=1", "display_name": "Giovanka Bisano", "link": "https://stackoverflow.com/users/9087847/giovanka-bisano"}, "edited": false, "score": 0, "creation_date": 1572511640, "post_id": 56053236, "comment_id": 103584954, "body": "can you explain more about <code>answers nothing</code> ?"}, {"owner": {"reputation": 53, "user_id": 4445472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MSTO3RiRd0c/AAAAAAAAAAI/AAAAAAAAAGE/id93werZqgA/photo.jpg?sz=128", "display_name": "Makzimalist", "link": "https://stackoverflow.com/users/4445472/makzimalist"}, "reply_to_user": {"reputation": 146, "user_id": 9087847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8CNPf.jpg?s=128&g=1", "display_name": "Giovanka Bisano", "link": "https://stackoverflow.com/users/9087847/giovanka-bisano"}, "edited": false, "score": 0, "creation_date": 1573560710, "post_id": 56053236, "comment_id": 103914271, "body": "@GiovankaBisano find the docu here <a href=\"http://mockk.io/#answers\" rel=\"nofollow noreferrer\">mockk.io/#answers</a>, it says: <code>specify that the matched call answers null</code>"}], "tags": [], "owner": {"reputation": 53, "user_id": 4445472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MSTO3RiRd0c/AAAAAAAAAAI/AAAAAAAAAGE/id93werZqgA/photo.jpg?sz=128", "display_name": "Makzimalist", "link": "https://stackoverflow.com/users/4445472/makzimalist"}, "is_accepted": false, "score": 1, "last_activity_date": 1557382537, "creation_date": 1557382537, "answer_id": 56053236, "question_id": 55800066, "link": "https://stackoverflow.com/questions/55800066/trying-to-convert-this-mockito-test-to-mockk-results-in-error/56053236#56053236", "title": "Trying to convert this Mockito test to Mockk results in error", "body": "<p>Your exception says it all (and one of the direct answers), you always have to specify the behaviour of your mocks..</p>\n\n<p>in your case:</p>\n\n<pre><code>private val loginLiveDataObserver = mockk&lt;Observer&lt;LoginResult&gt;&gt;()\n\n// Example answer you can use different here\nevery { loginLiveDataObserver.onChange(any()) } answers nothing\n\nverifyOrder {\n    loginLiveDataObserver.onChanged(enableLoading)\n    loginLiveDataObserver.onChanged(loginResults)\n    loginLiveDataObserver.onChanged(disableLoading)\n}\n</code></pre>\n\n<p>Check the <a href=\"https://mockk.io/#verification-order\" rel=\"nofollow noreferrer\">Documentation</a> at this point and look for the <code>every { ... }</code> part in the example</p>\n\n<p>hope this helps.</p>\n"}], "owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2355, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1557382537, "creation_date": 1555961572, "question_id": 55800066, "link": "https://stackoverflow.com/questions/55800066/trying-to-convert-this-mockito-test-to-mockk-results-in-error", "title": "Trying to convert this Mockito test to Mockk results in error", "body": "<p>Having issues with the following conversion from Mockito to Mockk.</p>\n\n<p>So I have this</p>\n\n<pre><code>@Mock\nprivate lateinit var loginLiveDataObserver: Observer&lt;LoginResult&gt;\n\nval inOrder = inOrder(loginLiveDataObserver)\n\ninOrder.verify(loginLiveDataObserver).onChanged(enableLoading)\ninOrder.verify(loginLiveDataObserver).onChanged(loginResults)\ninOrder.verify(loginLiveDataObserver).onChanged(disableLoading)\n</code></pre>\n\n<p>Try turning it into this</p>\n\n<pre><code>private val loginLiveDataObserver = mockk&lt;Observer&lt;LoginResult&gt;&gt;()\n\nverifyOrder {\n    loginLiveDataObserver.onChanged(enableLoading)\n    loginLiveDataObserver.onChanged(loginResults)\n    loginLiveDataObserver.onChanged(disableLoading)\n}\n</code></pre>\n\n<p>Gives me the following error</p>\n\n<p>io.mockk.MockKException: no answer found for: Observer(#4).onChanged(Loading(value=true))</p>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1555963253, "post_id": 55800042, "comment_id": 98269598, "body": "If you&#39;re resolving <code>Class</code> at runtime there&#39;s no way to guarantee type safety at compile time, that&#39;s why <code>unchecked cast</code> warning appears. You&#39;ll have to suppress it or write custom <code>HeadHelper</code> class implementation for each available type of <code>T</code>."}, {"owner": {"reputation": 49, "user_id": 9139601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f10282e8ef31892752dc17406d8c76d?s=128&d=identicon&r=PG&f=1", "display_name": "Celsius", "link": "https://stackoverflow.com/users/9139601/celsius"}, "reply_to_user": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1555963819, "post_id": 55800042, "comment_id": 98269814, "body": "I see, thanks for your reply!"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1556002986, "post_id": 55800042, "comment_id": 98279557, "body": "1. <code>action.cast(...)</code> should return <code>T</code> because <code>action</code>&#39;s type is <code>Class&lt;T&gt;</code>. So I can&#39;t see why the error should happen."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1556003097, "post_id": 55800042, "comment_id": 98279612, "body": "2. There&#39;s no point to making <code>val action</code> separate from <code>_action</code>, instead it should be <code>class HeadHelper&lt;T : Action&gt;(private val action: Class&lt;T&gt;) ...</code>. Same with <code>online</code>/<code>_online</code>."}, {"owner": {"reputation": 49, "user_id": 9139601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f10282e8ef31892752dc17406d8c76d?s=128&d=identicon&r=PG&f=1", "display_name": "Celsius", "link": "https://stackoverflow.com/users/9139601/celsius"}, "edited": false, "score": 0, "creation_date": 1556039198, "post_id": 55800042, "comment_id": 98299116, "body": "It also confuses me that <code>action#cast</code> returns <code>ActionOnlineStatus!</code> But thanks a lot for this hint, I always wondered if there&#39;s a possibility to put these vals in the constructor."}], "owner": {"reputation": 49, "user_id": 9139601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f10282e8ef31892752dc17406d8c76d?s=128&d=identicon&r=PG&f=1", "display_name": "Celsius", "link": "https://stackoverflow.com/users/9139601/celsius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1555963027, "creation_date": 1555961463, "last_edit_date": 1555963027, "question_id": 55800042, "link": "https://stackoverflow.com/questions/55800042/kotlin-casting-via-classt-with-when-check-but-it-says-type-mismatch", "title": "Kotlin: Casting via Class&lt;T&gt; with when-check, but it says &quot;Type mismatch.&quot;", "body": "<p>My intention is to use this class with different actions.\ne.g: <code>HeadHelper&lt;ActionOnlineStatus&gt;(ActionOnlineStatus::class.java)</code>\nin order to have only one function. But now a type mismatch error appears, and I'm curious about how to solve it because everything seems fine to me.</p>\n\n<pre><code>Type mismatch.\nRequired: T\nFound: ActionOnlineStatus!\n</code></pre>\n\n<p>I already tried this <code>ActionOnlineStatus(connection.responseCode == HttpURLConnection.HTTP_OK) as T</code> but it's an <code>Unchecked cast: ActionOnlineStatus! to T</code> and I don't wanna use suppress annotations.</p>\n\n<p>my code:</p>\n\n<pre><code>class HeadHelper&lt;T : Action&gt;(_action: Class&lt;T&gt;) : AsyncTask&lt;Consumer&lt;T&gt;, Unit, Unit&gt;() {\n\n    private val action = _action\n\n    override fun doInBackground(vararg params: Consumer&lt;T&gt;) {\n        when (action) {\n            ActionOnlineStatus::class.java -&gt; {\n                params[0].accept(action.cast(ActionOnlineStatus(true)))\n                //Type mismatch.\n                //Required: T\n                //Found: ActionOnlineStatus!\n            }\n        }\n    }\n\n}\n\ninterface Action\n\nclass ActionOnlineStatus(_online: Boolean) : Action {\n    val online = _online\n}\n</code></pre>\n"}, {"tags": ["gradle", "kotlin", "properties", "gradle-kotlin-dsl"], "answers": [{"tags": [], "owner": {"reputation": 1578, "user_id": 357437, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f91a7ac411059abb04af17795009fad9?s=128&d=identicon&r=PG", "display_name": "sedovav", "link": "https://stackoverflow.com/users/357437/sedovav"}, "is_accepted": true, "score": 6, "last_activity_date": 1555963830, "creation_date": 1555963830, "answer_id": 55800486, "question_id": 55799287, "link": "https://stackoverflow.com/questions/55799287/how-to-read-a-dotted-gradle-property-in-kotlin-dsl/55800486#55800486", "title": "How to read a dotted Gradle property in Kotlin DSL?", "body": "<p>Here is what I found:</p>\n\n<pre><code>val myProperty: Boolean \n    get() = settings.extra[\"kotlin.incremental\"]?.toString()?.toBoolean() ?: false\n</code></pre>\n"}], "owner": {"reputation": 1578, "user_id": 357437, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f91a7ac411059abb04af17795009fad9?s=128&d=identicon&r=PG", "display_name": "sedovav", "link": "https://stackoverflow.com/users/357437/sedovav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 2, "accepted_answer_id": 55800486, "answer_count": 1, "score": 7, "last_activity_date": 1555963830, "creation_date": 1555958028, "question_id": 55799287, "link": "https://stackoverflow.com/questions/55799287/how-to-read-a-dotted-gradle-property-in-kotlin-dsl", "title": "How to read a dotted Gradle property in Kotlin DSL?", "body": "<p>I can read from <code>gradle.properties</code> with <code>val myProperty by settings</code>, and that's nice! But what if the property name contains dots? Consider the next <code>gradle.properties</code> file:</p>\n\n<pre><code>kotlin.incremental=true\nkotlin.incremental.js=true\nkotlin.incremental.multiplatform=true\n</code></pre>\n\n<p>How can I read those properties above in a <code>settings.gradle.kts</code> script?</p>\n"}, {"tags": ["android", "kotlin", "apply"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8062627, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207561563031089/picture?type=large", "display_name": "Javiseeker", "link": "https://stackoverflow.com/users/8062627/javiseeker"}, "edited": false, "score": 0, "creation_date": 1555950342, "post_id": 55797541, "comment_id": 98264113, "body": "Yeah, i tried using removeCallbacks but its not working. My guess it needs a special way to be called with apply{} instance. I don&#39;t know what I&#39;m doing wrong."}, {"owner": {"reputation": 609, "user_id": 7530555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d34e763043565e0a86614faecd4a530b?s=128&d=identicon&r=PG&f=1", "display_name": "H.Taras", "link": "https://stackoverflow.com/users/7530555/h-taras"}, "reply_to_user": {"reputation": 13, "user_id": 8062627, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207561563031089/picture?type=large", "display_name": "Javiseeker", "link": "https://stackoverflow.com/users/8062627/javiseeker"}, "edited": false, "score": 0, "creation_date": 1555950568, "post_id": 55797541, "comment_id": 98264219, "body": "Don&#39;t use Handler(). before calling this method in apply{}"}], "tags": [], "owner": {"reputation": 609, "user_id": 7530555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d34e763043565e0a86614faecd4a530b?s=128&d=identicon&r=PG&f=1", "display_name": "H.Taras", "link": "https://stackoverflow.com/users/7530555/h-taras"}, "is_accepted": false, "score": 0, "last_activity_date": 1555950013, "creation_date": 1555950013, "answer_id": 55797541, "question_id": 55797200, "link": "https://stackoverflow.com/questions/55797200/how-to-stop-a-handler-and-its-runnable-when-it-is-initiated-via-apply/55797541#55797541", "title": "How to stop a handler and its runnable when it is initiated via Apply{}", "body": "<p>It is a bit hard to understand what exactly you want to do, but here is possible solution: </p>\n\n<pre><code>private fun getSalesData(session:Boolean,delayMs:Long,salesRequest: JsonObjectRequest){\n        lateinit var runnable: Runnable\n        if (session) {\n            HttpRequestSingleton.getInstance(this@NavBarActivity).addToRequestQueue(salesRequest)\n        }\n        Handler().apply {\n            runnable = object : Runnable {\n                override fun run() {\n                    HttpRequestSingleton.getInstance(this@NavBarActivity).addToRequestQueue(salesRequest)\n                    Log.d(TAG, \"se esta repitiendo cada 15 segs mamahuevo\")\n                    postDelayed(this, delayMs)\n                }\n            }\n            postDelayed(runnable, delayMs)\n            if (!session){\n                Log.d(TAG,\"entre aca como todo un crack\")\n                removeCallbacks(runnable) // just call this method, as part of your handler object \n            }\n        }\n        if(!session){\n            Log.d(TAG,\"aanopqwwwwww\")\n            removeCallbacks(runnable)// just call this method, as part of your handler object \n        }\n    }\n</code></pre>\n\n<p>Update: Sorry, didn't see, that you used <code>removeCallbacksAndMessages</code>. <code>removeCallbacks</code> will remove any queued runnables </p>\n"}], "owner": {"reputation": 13, "user_id": 8062627, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207561563031089/picture?type=large", "display_name": "Javiseeker", "link": "https://stackoverflow.com/users/8062627/javiseeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555950013, "creation_date": 1555948559, "question_id": 55797200, "link": "https://stackoverflow.com/questions/55797200/how-to-stop-a-handler-and-its-runnable-when-it-is-initiated-via-apply", "title": "How to stop a handler and its runnable when it is initiated via Apply{}", "body": "<p>I made the following function to generate a handler event every 15 seconds. It starts with a given flag, when I pass False I want the handler to stop its loop. Here is my code snippet in Kotlin:</p>\n\n<pre><code>private fun getSalesData(session:Boolean,delayMs:Long,salesRequest: JsonObjectRequest){\n        lateinit var runnable: Runnable\n        if (session) {\n            HttpRequestSingleton.getInstance(this@NavBarActivity).addToRequestQueue(salesRequest)\n        }\n        Handler().apply {\n            runnable = object : Runnable {\n                override fun run() {\n                    HttpRequestSingleton.getInstance(this@NavBarActivity).addToRequestQueue(salesRequest)\n                    Log.d(TAG, \"se esta repitiendo cada 15 segs mamahuevo\")\n                    postDelayed(this, delayMs)\n                }\n            }\n            postDelayed(runnable, delayMs)\n            if (!session){\n                Log.d(TAG,\"entre aca como todo un crack\")\n                Handler().removeCallbacksAndMessages(runnable)\n            }\n        }\n        if(!session){\n            Log.d(TAG,\"aanopqwwwwww\")\n            Handler().removeCallbacksAndMessages(runnable)\n        }\n    }\n</code></pre>\n"}, {"tags": ["java", "mysql", "kotlin", "kotlin-exposed"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 4, "creation_date": 1555948050, "post_id": 55797013, "comment_id": 98263092, "body": "I&#39;ve never used exposed. But the message says: &quot;No transaction in context&quot;. And the call to firstOrNull(), which throws the exception, is <i>outside</i> of the transaction block. My logical deduction would be that it needs to be <i>inside</i> the transaction block."}, {"owner": {"reputation": 5589, "user_id": 5897602, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WZb8m.jpg?s=128&g=1", "display_name": "Jaquarh", "link": "https://stackoverflow.com/users/5897602/jaquarh"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1555948360, "post_id": 55797013, "comment_id": 98263238, "body": "That solved my issue! There documentation is so confusing sometimes. Thanks @JBNizet"}], "owner": {"reputation": 5589, "user_id": 5897602, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WZb8m.jpg?s=128&g=1", "display_name": "Jaquarh", "link": "https://stackoverflow.com/users/5897602/jaquarh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1156, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1555947756, "creation_date": 1555947756, "question_id": 55797013, "link": "https://stackoverflow.com/questions/55797013/jetbrains-exposed-throwing-an-error-when-trying-to-access-first-row-of-select-qu", "title": "JetBrains Exposed throwing an error when trying to access first row of select query", "body": "<p>When trying to fetch the first row from my <code>transaction</code>, I receive an error:</p>\n\n<blockquote>\n  <p>java.lang.IllegalStateException: No transaction in context.</p>\n</blockquote>\n\n<p>My code looks like this:</p>\n\n<pre><code>fun loadPlayer(client: Client): PlayerLoadResult {\n    var player = transaction {\n        PlayerModel.select {\n            PlayerModel.username eq client.loginUsername\n        }\n    }.firstOrNull() ?: return PlayerLoadResult.NEW_ACCOUNT\n\n    // ...\n\n    return PlayerLoadResult.LOAD_ACCOUNT\n}\n</code></pre>\n\n<p>My <code>PlayerModel</code> looks like this:</p>\n\n<pre><code>object PlayerModel : Table(\"Players\") {\n    val id = integer(\"id\").autoIncrement().primaryKey()\n    val username = varchar(\"username\", 60).uniqueIndex()\n    val displayName = varchar(\"display_name\", 60).uniqueIndex()\n    val x = integer(\"position_x\")\n    val height = integer(\"position_y\")\n    val z = integer(\"position_z\")\n    val privilege = integer(\"privilege\").default(1)\n    val runEnergy = float(\"run_energy\").default(100.toFloat())\n    val displayMode = integer(\"display_mode\").default(0)\n    val hash = varchar(\"password_hash\", 60)\n    val xteaKeyOne = integer(\"xtea_one\")\n    val xteaKeyTwo = integer(\"xtea_two\")\n    val xteaKeyThree = integer(\"xtea_three\")\n    val xteaKeyFour = integer(\"xtea_four\")\n}\n</code></pre>\n\n<p>My full stack trace looks like this:</p>\n\n<pre><code>java.lang.IllegalStateException: No transaction in context.\n    at org.jetbrains.exposed.sql.transactions.TransactionManager$Companion.current(TransactionApi.kt:89) ~[exposed-0.13.6.jar:?]\n    at org.jetbrains.exposed.sql.Query.getTransaction(Query.kt:93) ~[exposed-0.13.6.jar:?]\n    at org.jetbrains.exposed.sql.Query.flushEntities(Query.kt:299) ~[exposed-0.13.6.jar:?]\n    at org.jetbrains.exposed.sql.Query.iterator(Query.kt:303) ~[exposed-0.13.6.jar:?]\n    at kotlin.collections.CollectionsKt___CollectionsKt.firstOrNull(_Collections.kt:219) ~[kotlin-stdlib-1.3.21.jar:1.3.21-release-158 (1.3.21)]\n    at gg.rsmod.plugins.service.sql.controllers.PlayerLoadController.loadPlayer(PlayerLoadController.kt:38) ~[plugins-0.0.4.jar:?]\n    at gg.rsmod.plugins.service.sql.SQLService.loadClientData(SQLService.kt:104) ~[plugins-0.0.4.jar:?]\n    at gg.rsmod.game.service.login.LoginWorker.run(LoginWorker.kt:28) [main/:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_211]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_211]\n    at java.lang.Thread.run(Thread.java:748) [?:1.8.0_211]\n</code></pre>\n\n<p>What seems to be the issue with fetching the first row? This query should only return a single row, not multiple.</p>\n"}, {"tags": ["java", "android", "xml", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8613111, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9CrCQb-i0IQ/AAAAAAAAAAI/AAAAAAAAABM/sNN3Qd7QxN4/photo.jpg?sz=128", "display_name": "Ahmed EL-barbri", "link": "https://stackoverflow.com/users/8613111/ahmed-el-barbri"}, "edited": false, "score": 0, "creation_date": 1556453213, "post_id": 55799416, "comment_id": 98437073, "body": "but, i found some apps do it that ..!"}], "tags": [], "owner": {"reputation": 970, "user_id": 783238, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/258b3a7ea358be1710a0eae54f471b63?s=128&d=identicon&r=PG", "display_name": "Shermano", "link": "https://stackoverflow.com/users/783238/shermano"}, "is_accepted": false, "score": 0, "last_activity_date": 1555958525, "creation_date": 1555958525, "answer_id": 55799416, "question_id": 55796983, "link": "https://stackoverflow.com/questions/55796983/how-can-i-get-all-number-of-chatting-whats-in-my-android-app/55799416#55799416", "title": "how can i get all number of chatting whats in my android app", "body": "<p>I don't think you can do this to be honest, it would be need an content provider implemenation on whatsapp side, i didn't found related on whats documentation</p>\n"}], "owner": {"reputation": 1, "user_id": 8613111, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9CrCQb-i0IQ/AAAAAAAAAAI/AAAAAAAAABM/sNN3Qd7QxN4/photo.jpg?sz=128", "display_name": "Ahmed EL-barbri", "link": "https://stackoverflow.com/users/8613111/ahmed-el-barbri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1555958525, "creation_date": 1555947647, "question_id": 55796983, "link": "https://stackoverflow.com/questions/55796983/how-can-i-get-all-number-of-chatting-whats-in-my-android-app", "title": "how can i get all number of chatting whats in my android app", "body": "<p>I  need to get all numbers has been chatting with me on whats to my android app Regardless of  this number of my contact or not </p>\n"}, {"tags": ["java", "android", "kotlin", "singleton"], "comments": [{"owner": {"reputation": 395, "user_id": 6405527, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/91af99f31c12ee4d4fd31e7107c5881b?s=128&d=identicon&r=PG&f=1", "display_name": "65536", "link": "https://stackoverflow.com/users/6405527/65536"}, "edited": false, "score": 1, "creation_date": 1555946645, "post_id": 55796710, "comment_id": 98262519, "body": "try this instead <code>OrderTitle.INSTANCE. generateMessage()</code>"}, {"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1555946765, "post_id": 55796710, "comment_id": 98262571, "body": "If its a singleton, you&#39;d call it on an instance of OrderTitle, not the class."}], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1555951206, "post_id": 55796765, "comment_id": 98264510, "body": "Whether the object is companion or not doesn&#39;t make a difference: &quot;Kotlin can also generate static methods for functions defined in named objects or companion objects if you annotate those functions as @JvmStatic.&quot;"}], "tags": [], "owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "is_accepted": true, "score": 9, "last_activity_date": 1555958936, "last_edit_date": 1555958936, "creation_date": 1555946654, "answer_id": 55796765, "question_id": 55796710, "link": "https://stackoverflow.com/questions/55796710/using-kotlin-singleton-from-java/55796765#55796765", "title": "Using Kotlin singleton from Java", "body": "<p>Annotate your function with <code>@JvmStatic</code> so a real static java function is generated when compiling.</p>\n"}, {"tags": [], "owner": {"reputation": 9280, "user_id": 987753, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e48a721814fa3a27f8a1eaedcc328cfa?s=128&d=identicon&r=PG&f=1", "display_name": "kingston", "link": "https://stackoverflow.com/users/987753/kingston"}, "is_accepted": false, "score": 4, "last_activity_date": 1556387341, "last_edit_date": 1556387341, "creation_date": 1555946917, "answer_id": 55796829, "question_id": 55796710, "link": "https://stackoverflow.com/questions/55796710/using-kotlin-singleton-from-java/55796829#55796829", "title": "Using Kotlin singleton from Java", "body": "<p>You can use:</p>\n\n<pre><code>object OrderTitle {\n    @JvmStatic\n    fun generateMessage(context: Activity, otherParameter: AType? = null): AnotherType {\n        // Do some things\n   }\n}\n</code></pre>\n\n<p>and then you can call it from Java:</p>\n\n<pre><code>OrderTitle.generateMessage(...)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1555947059, "creation_date": 1555947059, "answer_id": 55796858, "question_id": 55796710, "link": "https://stackoverflow.com/questions/55796710/using-kotlin-singleton-from-java/55796858#55796858", "title": "Using Kotlin singleton from Java", "body": "<p>The idiomatic way to do this is with top level functions,</p>\n\n<pre><code>@file:JvmName(\"ClassNameHere\")\nfun generateMessage(context: Activity, otherParameter: AType? = null): AnotherType {\n    // Do some things\n}\n</code></pre>\n\n<p>Then from java just use it as</p>\n\n<pre><code>ClassNameHere.generateMessage()\n</code></pre>\n"}], "owner": {"reputation": 4912, "user_id": 3307720, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a9af81f6e3d88cba98772f0419f85214?s=128&d=identicon&r=PG&f=1", "display_name": "nasch", "link": "https://stackoverflow.com/users/3307720/nasch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1131, "favorite_count": 2, "accepted_answer_id": 55796765, "answer_count": 3, "score": 6, "last_activity_date": 1556387341, "creation_date": 1555946362, "question_id": 55796710, "link": "https://stackoverflow.com/questions/55796710/using-kotlin-singleton-from-java", "title": "Using Kotlin singleton from Java", "body": "<p>I've read up on this and everything I'm seeing says I should be able to do this so there must be some little thing I'm missing.  I've converted a Java class to Kotlin:</p>\n\n<pre><code>object OrderTitle {\n  @JvmOverloads\n    fun generateMessage(context: Activity, otherParameter: AType? = null): AnotherType {\n        // Do some things\n   }\n}\n</code></pre>\n\n<p>And I call it from Java:</p>\n\n<pre><code>message = OrderTitle.generateMessage(activity, property);\n</code></pre>\n\n<p>and get this error:</p>\n\n<pre><code>error: non-static method generateMessage(Activity,Property) cannot be referenced from a static context\n</code></pre>\n"}, {"tags": ["android", "firebase", "kotlin"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1555948734, "post_id": 55796707, "comment_id": 98263409, "body": "Please indicate what is the exact data that you want to change. Please add your database structure."}, {"owner": {"reputation": 1, "user_id": 11395394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a39d9649f2d70fa4e0a2bdb39041349f?s=128&d=identicon&r=PG&f=1", "display_name": "Lazania", "link": "https://stackoverflow.com/users/11395394/lazania"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1555950866, "post_id": 55796707, "comment_id": 98264359, "body": "@AlexMamo In this case, only stars : double"}], "owner": {"reputation": 1, "user_id": 11395394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a39d9649f2d70fa4e0a2bdb39041349f?s=128&d=identicon&r=PG&f=1", "display_name": "Lazania", "link": "https://stackoverflow.com/users/11395394/lazania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1555955490, "creation_date": 1555946348, "last_edit_date": 1555955490, "question_id": 55796707, "link": "https://stackoverflow.com/questions/55796707/how-to-change-value-of-firebase-data-it-databaseref-exist-with-valueeventlisten", "title": "How to change value of firebase data, it databaseRef exist with valueEventListener in different class", "body": "<p>I have fragment with ratingBar. If use database reference here, data will change, but when i return and try enter again app crash, because in this moment is added only data about rating bar</p>\n\n<p>I tried interface, but when i do that, fragment has:</p>\n\n<blockquote>\n  <p>Binary XML file line #7: Error inflating class fragment</p>\n</blockquote>\n\n<pre><code>//Fragment\noverride fun onRatingChanged(ratingBar: RatingBar?, rating: Float, fromUser: Boolean) {\n\n        // val mDatabase: DatabaseReference = FirebaseDatabase.getInstance().getReference(\"uploads\")\n        //val itemReference = mDatabase.child(objectId)\n        //itemReference.child(\"stars\").setValue(rating.toDouble())\n        setStars(rating.toDouble())\n    }\n</code></pre>\n\n<pre><code>//Activity\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"uploads\")\n\n        mDatabaseRef.addValueEventListener(object : ValueEventListener {\n            override fun onDataChange(dataSnapshot: DataSnapshot) {\n                mUploads.clear()\n                for (postSnapshot in dataSnapshot.children) {\n                    val upload: Upload = postSnapshot.getValue(Upload::class.java)!!\n                    (mUploads).add(upload)\n                }\n\n                mAdapter.notifyDataSetChanged()\n\n                mProgressCircle.visibility = View.INVISIBLE\n            }\n\n            override fun onCancelled(databaseError: DatabaseError) {\n                Toast.makeText(this@ImagesActivity, databaseError.message, Toast.LENGTH_SHORT).show()\n                mProgressCircle.visibility = View.INVISIBLE\n            }\n        })\n\n    }\n//My interface try\n    override fun modifyItemState(itemObjectId: String, stars: Double) {\n        // val mDatabase: DatabaseReference = FirebaseDatabase.getInstance().getReference(\"uploads\")\n        val itemReference = mDatabaseRef.child(itemObjectId)\n        itemReference.child(\"stars\").setValue(stars)\n    }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/o10bj.png\" rel=\"nofollow noreferrer\">it was change from 0</a>\n<a href=\"https://i.stack.imgur.com/BxwQe.png\" rel=\"nofollow noreferrer\">when i want back to this fragmentactivity, stars is created</a></p>\n"}, {"tags": ["android", "kotlin", "scrollview", "gesture"], "answers": [{"comments": [{"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1555947418, "post_id": 55795982, "comment_id": 98262861, "body": "Yes, is same. Just wonder why you use <code>addOnGesturePerformedListener</code> ?"}, {"owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1555947632, "post_id": 55795982, "comment_id": 98262944, "body": "<code>addOnGesturePerformedListener</code> is just a suggestion, you can use what you are already using. And you are right, this won&#39;t work because the scrollview action will be performed after the gesture listener is complete. I will update the answer."}, {"owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1555947656, "post_id": 55795982, "comment_id": 98262947, "body": "@JohnJoe Can you post you gesture logic ?"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1555947779, "post_id": 55795982, "comment_id": 98262999, "body": "Thanks. There are no logic for the gesture."}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1555947995, "post_id": 55795982, "comment_id": 98263080, "body": "Thanks. I will look at it."}, {"owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1555948238, "post_id": 55795982, "comment_id": 98263173, "body": "Any time :) . Tell me the output when you try it ."}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1555948318, "post_id": 55795982, "comment_id": 98263213, "body": "I&#39;m using Fragment, does this answer helped ?"}, {"owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1555948346, "post_id": 55795982, "comment_id": 98263228, "body": "Yes there is no problem"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1556005730, "post_id": 55795982, "comment_id": 98280740, "body": "Thanks,the link you sent is helped"}, {"owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 1, "creation_date": 1556012800, "post_id": 55795982, "comment_id": 98284357, "body": "I&#39;m glad it helps you :)"}], "tags": [], "owner": {"reputation": 1695, "user_id": 7940639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/010d85ca9a205087a63ca844be2dcc24?s=128&d=identicon&r=PG&f=1", "display_name": "Amine", "link": "https://stackoverflow.com/users/7940639/amine"}, "is_accepted": true, "score": 0, "last_activity_date": 1555947845, "last_edit_date": 1555947845, "creation_date": 1555943219, "answer_id": 55795982, "question_id": 55795631, "link": "https://stackoverflow.com/questions/55795631/make-layout-unscrollable-when-gestureoverlayview-is-touched/55795982#55795982", "title": "Make layout unscrollable when GestureOverlayView is touched", "body": "<p>You should use <code>OnGesturePerformedListener</code> on your gesture view and there you disable your <code>scrollView</code> scrolling by returning <code>true</code> on the touch listener</p>\n\n<pre><code>gesture.addOnGesturePerformedListener(new OnGesturePerformedListener() {\n\n    public void onGesturePerformed(GestureOverlayView v, Gesture g) {\n\n        mScrollView.setOnTouchListener( new OnTouchListener() {\n\n          @Override\n          public boolean onTouch(View v, MotionEvent event) \n          {\n                return true;\n          }\n        });\n    }\n\n});\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>You can take a look at this <a href=\"https://stackoverflow.com/a/38610886/7940639\">answer</a> , it actually present a custom ScrollView that will intercept the scroll touch and disable it when you perform gesture listener.</p>\n"}], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 55795982, "answer_count": 1, "score": 0, "last_activity_date": 1555947845, "creation_date": 1555941794, "last_edit_date": 1555945523, "question_id": 55795631, "link": "https://stackoverflow.com/questions/55795631/make-layout-unscrollable-when-gestureoverlayview-is-touched", "title": "Make layout unscrollable when GestureOverlayView is touched", "body": "<p>In <code>FragmentA</code>, I have a scrollable layout. Inside the layout, I have\n<code>GestureOverlayView</code>.</p>\n\n<pre><code>&lt;android.gesture.GestureOverlayView\n                android:id=\"@+id/signGesture\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"200dp\"\n                android:background=\"@android:color/white\"\n                android:fadeEnabled=\"false\"\n                android:fadeOffset=\"10000\"\n                android:gestureColor=\"@color/black\"\n                android:gestureStrokeLengthThreshold=\"0.1\"\n                android:gestureStrokeType=\"multiple\"\n                android:orientation=\"vertical\"&gt;\n</code></pre>\n\n<p></p>\n\n<p>Is there a way to make the layout unscrollable when <code>GestureOverlayView</code> is touched ? I can't draw anything because the layout is moving !</p>\n\n<p><a href=\"https://i.stack.imgur.com/0BFyM.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0BFyM.gif\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": false, "score": 1, "last_activity_date": 1555942204, "creation_date": 1555942204, "answer_id": 55795732, "question_id": 55795612, "link": "https://stackoverflow.com/questions/55795612/firebase-any-way-to-define-a-any-node/55795732#55795732", "title": "Firebase: any way to define a &quot;any&quot; node?", "body": "<p>To write a value to a node in the Firebase Realtime Database you need to know the exact path to that node. Firebase does not have the concept of SQL's update queries.</p>\n\n<p>So in your case you'll need to first read the nodes you want to update, then loop over them, and then update them either one by one or with one big multi-location update statement.</p>\n"}, {"comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1556005368, "post_id": 55795774, "comment_id": 98280576, "body": "Hi murkr! Have you tried my solution above, does it work? If you think that my answer helped you, please consider accepting it by clicking the checkmark (\u2714\ufe0f) on the left side under the vote arrows. Should change the color in green. I&#39;d appreciate it. Thanks!"}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 1, "last_activity_date": 1555942347, "creation_date": 1555942347, "answer_id": 55795774, "question_id": 55795612, "link": "https://stackoverflow.com/questions/55795612/firebase-any-way-to-define-a-any-node/55795774#55795774", "title": "Firebase: any way to define a &quot;any&quot; node?", "body": "<p>To update your <code>about</code> property within all user objects, please use the following lines of code:</p>\n\n<pre><code>val rootRef = FirebaseDatabase.getInstance().reference\nval usersRef = rootRef.child(\"Users\")\nval valueEventListener = object : ValueEventListener {\n    override fun onDataChange(dataSnapshot: DataSnapshot) {\n        for (ds in dataSnapshot.children) {\n            val childUpdates = HashMap&lt;String, Any&gt;()\n            childUpdates[\"about\"] = \"yourNewAboutValue\"\n            ds.ref.updateChildren(childUpdates)\n        }\n    }\n\n    override fun onCancelled(databaseError: DatabaseError) {\n        Log.d(TAG, databaseError.getMessage()) //Don't ignore errors!\n    }\n}\nusersRef.addListenerForSingleValueEvent(valueEventListener)\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 4611216, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/7ff88e6b1539db98acfc465fe3a316b9?s=128&d=identicon&r=PG&f=1", "display_name": "murkr", "link": "https://stackoverflow.com/users/4611216/murkr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 55795774, "answer_count": 2, "score": 0, "last_activity_date": 1555942513, "creation_date": 1555941685, "last_edit_date": 1555942513, "question_id": 55795612, "link": "https://stackoverflow.com/questions/55795612/firebase-any-way-to-define-a-any-node", "title": "Firebase: any way to define a &quot;any&quot; node?", "body": "<p>Ok, so this is what my Fireabse database looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lEzNR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lEzNR.png\" alt=\"enter image description here\"></a>\nNow I need to update the \"about\" node for every user. Without the user node, this is what I would do:</p>\n\n<pre><code>    val mAllUserDatabase : DatabaseReference  = FirebaseDatabase.getInstance().reference.child(\"Users\"))\n\n    val childUpdates = HashMap&lt;String, Any&gt;()\n    childUpdates[\"/about\"] = \"new value\"\n\n    mAllUserDatabase.updateChildren(childUpdates)\n</code></pre>\n\n<p>The problem is, I need to define the node of the user (don't I?). But since the user node all have a different name, I would need something like \"any- node\" or \"all nodes\". Something like </p>\n\n<pre><code>    childUpdates[\"/any/about\"] = \"new value\"\n</code></pre>\n\n<p>or <code>getChildren()</code>of the snapshots. </p>\n\n<p>What would be the best way to solve this? Do I have to use <code>addListenerForSingleValueEvent</code> to read the names of all nodes and then use the names on <code>mAllUserDatabase</code> with <code>.updateChildren(childUpdates)</code>? That cant be the best way to do this.</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 3, "creation_date": 1555940008, "post_id": 55795166, "comment_id": 98259318, "body": "OT: you could make <code>return a &lt; 15 &amp;&amp; b &gt; 15</code> to simplify your function"}, {"owner": {"reputation": 156, "user_id": 10071874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984648428ecadc5303d4100fbf62369b?s=128&d=identicon&r=PG&f=1", "display_name": "Zach", "link": "https://stackoverflow.com/users/10071874/zach"}, "edited": false, "score": 1, "creation_date": 1555940409, "post_id": 55795166, "comment_id": 98259508, "body": "I believe it is because you are checking a Boolean to return a Boolean.  Instead, you could just return the check for the Boolean:  <code>return ((15 - a) &gt;= 1) &amp;&amp; ((b - 15) &gt;= 1)</code>"}, {"owner": {"reputation": 73, "user_id": 3459016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FQqgS.jpg?s=128&g=1", "display_name": "SeagulFish", "link": "https://stackoverflow.com/users/3459016/seagulfish"}, "reply_to_user": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1555941057, "post_id": 55795166, "comment_id": 98259823, "body": "@crgarridos: I have updated the question. The code was simplified from a more complex piece of code, and I didn&#39;t catch that one. Thank you."}, {"owner": {"reputation": 2955, "user_id": 1042124, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f41bd8db2424f7895f2d19df47253e82?s=128&d=identicon&r=PG&f=1", "display_name": "user6327816", "link": "https://stackoverflow.com/users/1042124/user6327816"}, "edited": false, "score": 0, "creation_date": 1555942299, "post_id": 55795166, "comment_id": 98260395, "body": "you could have used <code>fun isFifteenBetween(val a: Int, val b: Int) = a &lt;15 &amp;&amp; b &gt; 15</code>"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 3459016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FQqgS.jpg?s=128&g=1", "display_name": "SeagulFish", "link": "https://stackoverflow.com/users/3459016/seagulfish"}, "edited": false, "score": 0, "creation_date": 1555945166, "post_id": 55795643, "comment_id": 98261832, "body": "I have accepted your answer, due to your explenation of exhaustive principles. I was not aware of this. In the end, however, I believe the expression suggested by @forpas, <code>return (a &lt; 15) &amp;&amp; (b &gt; 15)</code>, is probably the most simple and readable solution. Hence, I will be using something similar in my code."}], "tags": [], "owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "is_accepted": true, "score": 10, "last_activity_date": 1555941845, "creation_date": 1555941845, "answer_id": 55795643, "question_id": 55795166, "link": "https://stackoverflow.com/questions/55795166/kotlin-why-should-return-be-lifted-out-of-if-recommended-by-android-studi/55795643#55795643", "title": "Kotlin: Why should &#39;return&#39; be lifted out of &#39;if&#39;? (Recommended by Android studio)", "body": "<p>The official convention is to prefer to return the expression itself:\n<a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#using-conditional-statements\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/coding-conventions.html#using-conditional-statements</a></p>\n\n<p>This said the example from android studio should become:</p>\n\n<pre><code>return when (arg) {\n    true -&gt; \"Truth\"\n    false -&gt; \"Falsehood\"\n} \n</code></pre>\n\n<p>This will change the code of <code>isFifteenBetween</code> to:</p>\n\n<pre><code>/** Determine if a is less than 15 and b is more than 15. **/\nfun isFifteenBetween(val a: Int, val b: Int) {\n    return if((a &lt; 15) &amp;&amp; (b &gt; 15)) true \n    else false\n}\n</code></pre>\n\n<p>In terms of performance, both alternatives are almost equivalent.</p>\n\n<hr>\n\n<p>These answers could be a little influenced by my opinion. but I think is more or less the reason behind. The fact of return the expression give direct impact while reading the piece of code. You know the result of the statement will be exhaustive and you have the information that every branch has been treated. </p>\n\n<p>I consider this a best practice because in some case making a branching condition exhaustive could make the compiler give you an error while forgetting some new conditions. More than all for sealed classes. Further reading: <a href=\"https://proandroiddev.com/til-when-is-when-exhaustive-31d69f630a8b\" rel=\"noreferrer\">https://proandroiddev.com/til-when-is-when-exhaustive-31d69f630a8b</a></p>\n"}, {"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 3, "last_activity_date": 1555941862, "creation_date": 1555941862, "answer_id": 55795646, "question_id": 55795166, "link": "https://stackoverflow.com/questions/55795166/kotlin-why-should-return-be-lifted-out-of-if-recommended-by-android-studi/55795646#55795646", "title": "Kotlin: Why should &#39;return&#39; be lifted out of &#39;if&#39;? (Recommended by Android studio)", "body": "<p>The message is quite clear:</p>\n\n<blockquote>\n  <p>This inspection reports if, when and try statements that can be\n  converted to expressions by lifting a return or an assignment out.<br/></p>\n</blockquote>\n\n<p>And it states the fact that:</p>\n\n<blockquote>\n  <p>In Kotlin, if is an expression, i.e. it returns a value.</p>\n</blockquote>\n\n<p>You can find more here: <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#if-expression\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/control-flow.html#if-expression</a><br/>\nIn your case, you can return the result like this:</p>\n\n<pre><code>return if((a &lt; 15) &amp;&amp; (b &gt; 15)) true else false\n</code></pre>\n\n<p>So this:</p>\n\n<pre><code>if((a &lt; 15) &amp;&amp; (b &gt; 15)) true else false\n</code></pre>\n\n<p>is an expression and its value is returned by <code>return</code>.<br/> </p>\n\n<p>This expression can be further simplified (but it's not related to your question):</p>\n\n<pre><code>return (a &lt; 15) &amp;&amp; (b &gt; 15)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 409, "user_id": 8797900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2FtFj.jpg?s=128&g=1", "display_name": "gromyk", "link": "https://stackoverflow.com/users/8797900/gromyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1555942004, "creation_date": 1555942004, "answer_id": 55795681, "question_id": 55795166, "link": "https://stackoverflow.com/questions/55795166/kotlin-why-should-return-be-lifted-out-of-if-recommended-by-android-studi/55795681#55795681", "title": "Kotlin: Why should &#39;return&#39; be lifted out of &#39;if&#39;? (Recommended by Android studio)", "body": "<p>In Kotlin <em>when</em> replace <em>switch-operator</em> from java, but main difference is that <em>when</em> is an <strong>expression</strong>, therefore it can return result. \nTo better understand how does work when-expression in Kotlin, you can have a look on lambdas. The when-operator just returns result of its 'lambda' after each case.</p>\n\n<p>Even if you write</p>\n\n<pre><code>when(a) {\n    1 -&gt; println(\"one\")\n    else -&gt; println(\"something else\")\n}\n</code></pre>\n\n<hr>\n\n<p>This notation returns result of function println(...), that returns Unit. Therefore it isn't the best way to write code, when you duplicate this 'return'.</p>\n\n<pre><code>val result = when(a) {\n    1 -&gt; println(\"one\")\n    else -&gt; println(\"something else\")\n}\n// and now result equals to Unit-object\n</code></pre>\n\n<p>The same story is with if-else, that is also <strong>expression</strong>.</p>\n"}], "owner": {"reputation": 73, "user_id": 3459016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FQqgS.jpg?s=128&g=1", "display_name": "SeagulFish", "link": "https://stackoverflow.com/users/3459016/seagulfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4264, "favorite_count": 0, "accepted_answer_id": 55795643, "answer_count": 3, "score": 4, "last_activity_date": 1555942004, "creation_date": 1555939710, "last_edit_date": 1555940813, "question_id": 55795166, "link": "https://stackoverflow.com/questions/55795166/kotlin-why-should-return-be-lifted-out-of-if-recommended-by-android-studi", "title": "Kotlin: Why should &#39;return&#39; be lifted out of &#39;if&#39;? (Recommended by Android studio)", "body": "<p>The following code (simplified example):</p>\n\n<pre><code>/** Determine if a is less than 15 and b is more than 15. **/\nfun isFifteenBetween(val a: Int, val b: Int) {\n    if((a &lt; 15) &amp;&amp; (b &gt; 15)) { return(true) }\n    else { return(false) }\n}\n</code></pre>\n\n<p>should make <code>isFifteenBetween(3, 20)</code> return <strong>true</strong>, and <code>isFifteenBetween(20, 3)</code> return <strong>false</strong>. However, I get the following recommendation from Android studio (v3.4):</p>\n\n<pre><code>Return should be lifted out of 'if'\nInspection info: This inspection reports if, when and try statements\nthat can be converted to expressions by lifting a return or an assignment out.\nTypical example:\n\nfun foo(arg: Boolean): String {\n    when (arg) {\n        true -&gt; return \"Truth\"\n        false -&gt; return \"Falsehood\"\n    }\n}\n</code></pre>\n\n<p>The only related question I have found at stackoverflow is <a href=\"https://stackoverflow.com/questions/48018091/kotlin-return-can-be-lifted-out-of-when\">Kotlin: Return can be lifted out of &#39;when&#39;</a>, but this doesn't quite seem to cover my case, I think.</p>\n\n<ol>\n<li>How should my code be written? I don't understand how the 'when'-expression provided by Android studio is supposed to fit in my case.</li>\n<li>Is the recommendation from Android studio simply a matter of taste and comfort, or will a change of code in this case actually make an impact on performance?</li>\n<li>Are there any guidelines available for best practise?</li>\n</ol>\n"}, {"tags": ["hibernate", "jpa", "kotlin", "spring-data-jpa"], "comments": [{"owner": {"reputation": 2753, "user_id": 1771073, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/L5uiE.png?s=128&g=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/1771073/arun"}, "edited": false, "score": 0, "creation_date": 1555939944, "post_id": 55795102, "comment_id": 98259284, "body": "can you post Subscription class?"}, {"owner": {"reputation": 2753, "user_id": 1771073, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/L5uiE.png?s=128&g=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/1771073/arun"}, "edited": false, "score": 0, "creation_date": 1555940021, "post_id": 55795102, "comment_id": 98259323, "body": "either you forgot to use @id in the SubscriptionSourceId class or you did not specify the &#39;column name&#39; for that parameter."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1555940759, "post_id": 55795102, "comment_id": 98259685, "body": "Do you really have attributes named subs_id and source_id in your SubscriptionSourceId class? That would violate the Java naming conventions. Post all the relevant code."}, {"owner": {"reputation": 73, "user_id": 11394868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Kt-kGQQvdYo/AAAAAAAAAAI/AAAAAAAAAAs/TnkrtkOBMd0/photo.jpg?sz=128", "display_name": "incompletablefuture", "link": "https://stackoverflow.com/users/11394868/incompletablefuture"}, "edited": false, "score": 0, "creation_date": 1555941875, "post_id": 55795102, "comment_id": 98260200, "body": "Thanks for your comments, I&#39;ve added code of Subscription and SubscriptionSourceId classes."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1555942060, "post_id": 55795102, "comment_id": 98260282, "body": "So you have no property named subs_id and source_id in SubscriptionSourceId. So <code>@MapsId(&quot;subs_id&quot;)</code> and <code>@MapsId(&quot;source_id&quot;)</code> aren&#39;t correct."}, {"owner": {"reputation": 73, "user_id": 11394868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Kt-kGQQvdYo/AAAAAAAAAAI/AAAAAAAAAAs/TnkrtkOBMd0/photo.jpg?sz=128", "display_name": "incompletablefuture", "link": "https://stackoverflow.com/users/11394868/incompletablefuture"}, "edited": false, "score": 0, "creation_date": 1555949928, "post_id": 55795102, "comment_id": 98263913, "body": "JB Nizet thank you for your answer. I tried to change property names to appropriate ones, it didn&#39;t work, then I tried to change value in annotation @MapsId, it also didn&#39;t work. Interesting thing, after my changes Hibernate changed its query. Second string with &quot;subs_id&quot; just disappeared. I still can&#39;t understand where problem is."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 11394868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Kt-kGQQvdYo/AAAAAAAAAAI/AAAAAAAAAAs/TnkrtkOBMd0/photo.jpg?sz=128", "display_name": "incompletablefuture", "link": "https://stackoverflow.com/users/11394868/incompletablefuture"}, "is_accepted": true, "score": 0, "last_activity_date": 1556012311, "creation_date": 1556012311, "answer_id": 55808322, "question_id": 55795102, "link": "https://stackoverflow.com/questions/55795102/hibernate-generates-incorrect-query/55808322#55808322", "title": "Hibernate generates incorrect query", "body": "<p>Finally I've solved my problem. I've added @JoinColumn annotations to fields in <strong>SubscriptionSource</strong> class and changed value in @MapsId annotations as recommended by JB Nizet. Now it looks like this.</p>\n\n<pre><code>@Entity\n@Table(name = \"SUBSCRIPTION_SOURCES\")\ndata class SubscriptionSource (\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @MapsId(\"subsId\")\n    @JoinColumn(name = \"subs_id\")\n    val subscription: Subscription,\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @MapsId(\"sourceId\")\n    @JoinColumn(name = \"source_id\")\n    val source: Source,\n\n    @EmbeddedId\n    val subscriptionSourceId: SubscriptionSourceId = SubscriptionSourceId(subscription.id, source.id),\n\n    @Column(name = \"value\")\n    val value : Long\n)\n</code></pre>\n\n<p>Thanks to all.</p>\n"}], "owner": {"reputation": 73, "user_id": 11394868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Kt-kGQQvdYo/AAAAAAAAAAI/AAAAAAAAAAs/TnkrtkOBMd0/photo.jpg?sz=128", "display_name": "incompletablefuture", "link": "https://stackoverflow.com/users/11394868/incompletablefuture"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 55808322, "answer_count": 1, "score": 0, "last_activity_date": 1556012311, "creation_date": 1555939453, "last_edit_date": 1555941798, "question_id": 55795102, "link": "https://stackoverflow.com/questions/55795102/hibernate-generates-incorrect-query", "title": "Hibernate generates incorrect query", "body": "<p>I have an entity with composite key. <strong>Subscription</strong> and <strong>Source</strong> have Many-To-Many relationship.</p>\n\n<pre><code>    @Entity\n    @Table(name = \"SUBSCRIPTION_SOURCES\")\n    data class SubscriptionSource (\n\n       @ManyToOne(fetch = FetchType.LAZY)\n       @MapsId(\"subs_id\")\n       val subscription: Subscription,\n\n       @ManyToOne(fetch = FetchType.LAZY)\n       @MapsId(\"source_id\")\n       val source: Source,\n\n       @EmbeddedId\n       val subscriptionSourceId: SubscriptionSourceId = SubscriptionSourceId(subscription.id, source.id),\n\n       @Column(name = \"value\")\n       val value : Long\n   )\n\nTable \"SUBSCRIPTION_SOURCES\" has only three columns: subs_id, source_id, value.\n</code></pre>\n\n<p>I'm using Spring Data repository to work with it.</p>\n\n<p>When I'm trying to use method <strong>saveAll</strong>, it throws </p>\n\n<blockquote>\n  <p><em>\"com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'subscripti0_.subscription_id'\"</em></p>\n</blockquote>\n\n<p>while trying to return value after saving.</p>\n\n<p>Hibernate generates this query:</p>\n\n<pre><code>   select\n        subscripti0_.source_id as source_i1_6_0_,\n        subscripti0_.subs_id as subs_id2_6_0_,\n        subscripti0_.subscription_id as subscrip4_6_0_, // error happens here\n        subscripti0_.value as value3_6_0_ \n    from\n        SUBSCRIPTION_SOURCES subscripti0_ \n    where\n        subscripti0_.source_id=? \n        and subscripti0_.subs_id=?\n</code></pre>\n\n<p>So, now I am confused, why Hibernate is putting a string with <strong>subscription_id</strong> into the query, if I don't even have this field in my entities?</p>\n\n<p>Class <strong>SubscriptionSourceId</strong>:</p>\n\n<pre><code>@Embeddable\ndata class SubscriptionSourceId (\n\n    @Column(name = \"subs_id\")\n    val subsId : Long?,\n\n    @Column(name = \"source_id\")\n    val sourceId : Long?\n\n) : Serializable\n</code></pre>\n\n<p>class <strong>Subscription</strong>:</p>\n\n<pre><code>@Entity\n@Table(name = \"SUBSCRIPTIONS\")\ndata class Subscription(\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        var id: Long? = null,\n\n        @Column(name = \"subscription_id\")\n        var subscriptionId: String?,\n\n        @Column(name = \"submitted_on\")\n        var submittedOn: LocalDateTime?,\n\n        @Column(name = \"status_MPP\")\n        var statusMpp: String?,\n\n        @Column(name = \"requested_by_user\")\n        var requestedByUser: String?,\n\n        @Column(name = \"requested_by_user_email\")\n        var requestedByUserEmail: String?,\n\n        @Column(name = \"organization_name\")\n        var organizationName: String?,\n\n        @Column(name = \"vm\")\n        var virtualMachine: String?,\n\n        @Column(name = \"node\")\n        var node: String?,\n\n        @Column(name = \"period\")\n        var period: String?,\n\n        @Column(name = \"ad_criterion\")\n        var adCriterion: String?,\n\n        @Column(name = \"name\")\n        var name: String?,\n\n        @Column(name = \"description\")\n        var description: String?,\n\n        @Column(name = \"s_number\")\n        var sNumber: String?,\n\n        @Column(name = \"p_number\")\n        var pNumber: String?,\n\n        @Column(name = \"reason\")\n        var reason: String?,\n\n        @Column(name = \"months\")\n        var months: String?,\n\n        @Column(name = \"start_date\")\n        var startDate: String?,\n\n        @Column(name = \"x_start_date\")\n        var actualStartDay: String? = startDate,\n\n        @Column(name = \"end_date\")\n        var endDate: String?,\n\n        @Column(name = \"x_end_date\")\n        var actualEndDate: String? = endDate,\n\n        @Column(name = \"channel\")\n        var channel: String?,\n\n        @Column(name = \"connection\")\n        var connection: String?,\n\n        @Column(name = \"connection_data\")\n        var connectionData: String?,\n\n        @Column(name = \"action\")\n        var action: String?,\n\n        @Column(name = \"department\")\n        var department: String?,\n\n        @Column(name = \"login\")\n        var login: String?,\n\n        @Column(name = \"customer_name\")\n        var customerName: String?,\n\n        @Column(name = \"customer_postaddress\")\n        var customerPostAddress: String?,\n\n        @Column(name = \"phone\")\n        var phone: String?,\n\n        @Column(name = \"customer_chief\")\n        var customerChief: String?,\n\n        @Column(name = \"user_name\")\n        var userName: String?,\n\n        @Column(name = \"position\")\n        var position: String?,\n\n        @Column(name = \"user_postaddress\")\n        var userPostAddress: String?,\n\n        @Column(name = \"user_phone\")\n        var userPhone: String?,\n\n        @Column(name = \"user_chief\")\n        var userChief: String?,\n\n        @Column(name = \"location\")\n        var location: String?,\n\n        @Enumerated(EnumType.STRING)\n        @Column(name = \"status\")\n        var status: SubscriptionStatus? = SubscriptionStatus.REQUEST,\n\n        @Column(name = \"comment\")\n        var comment: String? = \"\",\n\n        @ManyToMany(fetch = FetchType.EAGER)\n        @JoinTable(\n                name = \"MTM_NODES2SUBSCRIPTIONS\",\n                joinColumns = [JoinColumn(name = \"subs_id\")],\n                inverseJoinColumns = [JoinColumn(name = \"node_id\")]\n        )\n        var nodes : Set&lt;Node&gt; = emptySet(),\n\n        @ManyToMany(fetch = FetchType.EAGER)\n        @JoinTable(name = \"SUBSCRIPTION_SOURCES\",\n                joinColumns = [JoinColumn(name = \"subs_id\", referencedColumnName = \"id\")],\n                inverseJoinColumns = [JoinColumn(name = \"source_id\", referencedColumnName = \"id\")])\n        val sources : Set&lt;Source?&gt; = emptySet(),\n\n        @Column(name = \"db_status\")\n        val dbStatus: SubscriptionDbStatus?\n\n)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "firebase-cloud-messaging", "android-service"], "answers": [{"comments": [{"owner": {"reputation": 500, "user_id": 5938872, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/eb5f7a311ef855dc80873d2f986632ca?s=128&d=identicon&r=PG&f=1", "display_name": "Ralph", "link": "https://stackoverflow.com/users/5938872/ralph"}, "edited": false, "score": 0, "creation_date": 1556014301, "post_id": 55795287, "comment_id": 98285122, "body": "Hello thank you for the response, will try doing this"}], "tags": [], "owner": {"reputation": 7231, "user_id": 4370279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tjPvY.png?s=128&g=1", "display_name": "theapache64", "link": "https://stackoverflow.com/users/4370279/theapache64"}, "is_accepted": false, "score": 0, "last_activity_date": 1555940294, "creation_date": 1555940294, "answer_id": 55795287, "question_id": 55795022, "link": "https://stackoverflow.com/questions/55795022/action-during-onmessagereceived-in-firebasemessagingservice/55795287#55795287", "title": "Action during onMessageReceived() in FirebaseMessagingService", "body": "<p><code>FirebaseMessagingService</code> is a <code>Service</code>, it doesn't run on UI thread, so you can run tasks that are meant to be run in background threads. </p>\n\n<blockquote>\n  <p>Do you guys have any recommendations on how or where to run the task?</p>\n</blockquote>\n\n<p>To make code readable, I'd suggest you to create another class to handle the task. Something like <code>MessageSender.sent(data)</code>. So the code will be a lot easier to read. </p>\n\n<blockquote>\n  <p>Should I create another service for this task?</p>\n</blockquote>\n\n<p>It's not necessary, but when looking from the <a href=\"https://en.wikipedia.org/wiki/Separation_of_concerns\" rel=\"nofollow noreferrer\">SOC</a> perspective, it's better to  separate task. So it'll be more better to create something like <code>MessageSenderService</code> and invoke it from <code>FirebaseMessagingService</code>.</p>\n\n<p>Anyone can correct me if am wrong. :)</p>\n"}], "owner": {"reputation": 500, "user_id": 5938872, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/eb5f7a311ef855dc80873d2f986632ca?s=128&d=identicon&r=PG&f=1", "display_name": "Ralph", "link": "https://stackoverflow.com/users/5938872/ralph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555940294, "creation_date": 1555938999, "question_id": 55795022, "link": "https://stackoverflow.com/questions/55795022/action-during-onmessagereceived-in-firebasemessagingservice", "title": "Action during onMessageReceived() in FirebaseMessagingService", "body": "<p>I want to do something everytime <code>onMessageReceived()</code> triggers specifically. I want to send text messages. I'm not really sure if it's a great idea to put a code in <code>FirebaseMessagingService</code> that runs a task that might take a little while to finish (number of messages sent may vary). Do you guys have any recommendations on how or where to run the task? Should I create another service for this task? I'm not really well versed on this side of Android Development. Any response is much appreciated thanks.</p>\n"}, {"tags": ["java", "kotlin", "augmented-reality", "arkit", "arcore"], "answers": [{"tags": [], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "is_accepted": true, "score": 3, "last_activity_date": 1555995654, "creation_date": 1555995654, "answer_id": 55804599, "question_id": 55794972, "link": "https://stackoverflow.com/questions/55794972/does-arcore-have-sessions-delegate-methods-like-arkit-has/55804599#55804599", "title": "Does ARCore have session&#39;s delegate methods like ARKit has?", "body": "<p>After going through an ARCore documentation I discovered at least two similar methods:</p>\n\n<blockquote>\n  <p><strong>First</strong>: This method is used for receiving a new camera frame, updating the location of the device, updating the location of tracking anchors, updating detected planes, etc.</p>\n</blockquote>\n\n<pre><code>ArStatus ArSession_update(ArSession *session, ArFrame *out_frame)\n</code></pre>\n\n<blockquote>\n  <p><strong>Second</strong>: This method defines a tracked location in the physical world:</p>\n</blockquote>\n\n<pre><code>ArStatus ArSession_acquireNewAnchor(ArSession *session, const ArPose *pose, ArAnchor **out_anchor)\n</code></pre>\n"}], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 55804599, "answer_count": 1, "score": 2, "last_activity_date": 1586249900, "creation_date": 1555938739, "last_edit_date": 1586249900, "question_id": 55794972, "link": "https://stackoverflow.com/questions/55794972/does-arcore-have-sessions-delegate-methods-like-arkit-has", "title": "Does ARCore have session&#39;s delegate methods like ARKit has?", "body": "<p>In ARKit there's a <code>ARSessionDelegate</code> protocol what has 4 main methods you can implement to receive captured video frame images and tracking state from an AR session. </p>\n\n<p>Does ARCore API have a similar protocol (interface) with similar methods?</p>\n\n<pre><code>override func viewDidLoad() {  \n    super.viewDidLoad()\n    sceneView.session.delegate = self       // ARSessionDelegate? protocol\n}\n</code></pre>\n\n<blockquote>\n  <ol>\n  <li>This method provides a newly captured ARCamera image and accompanying AR information to the delegate:</li>\n  </ol>\n</blockquote>\n\n<pre><code>func session(ARSession, didUpdate: ARFrame) { ... }\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>This method tells the delegate that one or more ARAnchors have been added to the session:</li>\n  </ol>\n</blockquote>\n\n<pre><code>func session(ARSession, didAdd: [ARAnchor]) { ... }\n</code></pre>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>This method tells the delegate that the ARSession has adjusted the properties of one or more ARAnchors:</li>\n  </ol>\n</blockquote>\n\n<pre><code>func session(ARSession, didUpdate: [ARAnchor]) { ... }\n</code></pre>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>This method tells the delegate that one or more ARAnchors have been removed from the ARSession:</li>\n  </ol>\n</blockquote>\n\n<pre><code>func session(ARSession, didRemove: [ARAnchor]) { ... }\n</code></pre>\n\n<p>If similar methods (even not all of them) exist in ARCore, please show me how they look like using Kotlin code.</p>\n\n<p>Any help appreciated.</p>\n"}, {"tags": ["android", "android-intent", "kotlin", "broadcastreceiver"], "answers": [{"tags": [], "owner": {"reputation": 1585, "user_id": 1749223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Pt19o.jpg?s=128&g=1", "display_name": "Binary Baba", "link": "https://stackoverflow.com/users/1749223/binary-baba"}, "is_accepted": true, "score": 1, "last_activity_date": 1555949252, "creation_date": 1555949252, "answer_id": 55797360, "question_id": 55794801, "link": "https://stackoverflow.com/questions/55794801/intent-createchooser-broadcastreceiver-is-not-called/55797360#55797360", "title": "Intent.Createchooser() Broadcastreceiver is not called", "body": "<p>I believe the problem is in creating the <code>Intent</code> object. Instead of </p>\n\n<pre><code>val receiver = Intent(context, BroadcastReceiver::class.java)\n</code></pre>\n\n<p>it should be,</p>\n\n<pre><code>val receiver = Intent(context, ShareBroadcastReceiver::class.java)\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5163074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d65d6a803e557c95be4a54b7d45816?s=128&d=identicon&r=PG&f=1", "display_name": "crazything", "link": "https://stackoverflow.com/users/5163074/crazything"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 55797360, "answer_count": 1, "score": 0, "last_activity_date": 1561715175, "creation_date": 1555937831, "last_edit_date": 1561715175, "question_id": 55794801, "link": "https://stackoverflow.com/questions/55794801/intent-createchooser-broadcastreceiver-is-not-called", "title": "Intent.Createchooser() Broadcastreceiver is not called", "body": "<p>I'm trying to figure out what app users pick when they share content from my app. To achieve this I'm using Inten.createChooser with a custom broadcast receiver. Unfortunately, I can't seem to get the receiver to actually be called.</p>\n\n<p>Running Android 9, I've tried a few different combinations of receiver registration. Making it exported true/false, adding and removing intent-filters (though I can't really find any related to the chooser). The share-chooser itself works just fine and my images are shared. It's just the broadcastreceiver that is not triggering. I can see in logcat that PackageManager has found and registered the receiver.</p>\n\n<p>AndroidManifest.xml (I am aware that exported -should- not be needed)</p>\n\n<pre><code>&lt;receiver android:name=\".receivers.ShareBroadcastReceiver\"\n            android:enabled=\"true\"\n            android:exported=\"false\"&gt;\n        &lt;/receiver\n</code></pre>\n\n<p>The code that creates the share intent (done in a fragment if that matters)</p>\n\n<pre><code>private fun startShareIntent(image: Bitmap){\n        val receiver = Intent(context, BroadcastReceiver::class.java)\n        val pendingIntent = PendingIntent.getBroadcast(context, 0, receiver, PendingIntent.FLAG_UPDATE_CURRENT)\n        val intent = Intent(Intent.ACTION_SEND)\n        intent.type = \"image/jpg\"\n        // saveTempFile creates a temporary share:able file of the image and returns it's URI.\n        intent.putExtra(Intent.EXTRA_STREAM, saveTempFile(image))\n\n        if (intent.resolveActivity(context!!.packageManager) != null) {\n            startActivity(Intent.createChooser(intent,\n                    getString(R.string.share_menu_title),\n                    pendingIntent.intentSender))\n        }\n    }\n</code></pre>\n\n<pre><code>class ShareBroadcastReceiver : BroadcastReceiver() {\n\n    override fun onReceive(context: Context, intent: Intent) {\n        Log.d(\"ShareBroadcastReceiver\", \"Received broadcast\")\n}\n</code></pre>\n"}, {"tags": ["android", "android-fragments", "kotlin", "listener", "android-custom-view"], "comments": [{"owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "edited": false, "score": 1, "creation_date": 1555936361, "post_id": 55794431, "comment_id": 98257803, "body": "where you implement click listener ?"}, {"owner": {"reputation": 893, "user_id": 4954322, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/28f5646aadd954d020329a6f15cff472?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/4954322/harry"}, "edited": false, "score": 0, "creation_date": 1555937011, "post_id": 55794431, "comment_id": 98258050, "body": "Can you please post code for <code>logMessage</code>"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1574086870, "post_id": 55794431, "comment_id": 104094785, "body": "You should have added <code>item_custom_btn</code> too, but it&#39;s probably just <code>setClickable(true); setFocusable(true);</code> missing in <code>ButtonWithImage</code> constructor"}], "answers": [{"tags": [], "owner": {"reputation": 474, "user_id": 8713068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a972a6bec2ccc8cbaa72046fa56c5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Karzel", "link": "https://stackoverflow.com/users/8713068/karzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1555938887, "creation_date": 1555938887, "answer_id": 55795000, "question_id": 55794431, "link": "https://stackoverflow.com/questions/55794431/fragment-does-not-respond-to-onclick-event-on-custom-views/55795000#55795000", "title": "Fragment does not respond to onClick event on custom views", "body": "<p>I think you can fix it by:</p>\n\n<ol>\n<li>Adding <code>focusable=false</code> and <code>clickable=false</code> to your <code>btn_image</code> and <code>btn_text</code></li>\n<li>Adding <code>focusable=true</code> and <code>clickable=true</code> to your root view of this custom layout (also give it id -> lets say <code>custom_button_container</code>)</li>\n<li>call <code>my_cards.findViewById&lt;LinearLayout&gt;(R.id.custom_button_container).setOnClickListener { logMessage(\"loooooog\") }</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 148, "user_id": 10921974, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GQzb8psOMFI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaEqhrGzgmJBFCM82pv3wShlAXn8Q/mo/photo.jpg?sz=128", "display_name": "Madina Saidova", "link": "https://stackoverflow.com/users/10921974/madina-saidova"}, "is_accepted": true, "score": 0, "last_activity_date": 1574086544, "last_edit_date": 1574086544, "creation_date": 1574083924, "answer_id": 58915761, "question_id": 55794431, "link": "https://stackoverflow.com/questions/55794431/fragment-does-not-respond-to-onclick-event-on-custom-views/58915761#58915761", "title": "Fragment does not respond to onClick event on custom views", "body": "<p>The optimal solution is making all views in <code>XML</code> clickable and focusable false.</p>\n\n<p>You can use the following code:</p>\n\n<pre><code>my_cards.setOnClickListener { logMessage(\"loooooog\") }\n</code></pre>\n\n<p>As all views are not clickable and focusable, they do ignore clicks, but not the custom view itself.</p>\n"}], "owner": {"reputation": 148, "user_id": 10921974, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GQzb8psOMFI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaEqhrGzgmJBFCM82pv3wShlAXn8Q/mo/photo.jpg?sz=128", "display_name": "Madina Saidova", "link": "https://stackoverflow.com/users/10921974/madina-saidova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58915761, "answer_count": 2, "score": 0, "last_activity_date": 1574086544, "creation_date": 1555936135, "question_id": 55794431, "link": "https://stackoverflow.com/questions/55794431/fragment-does-not-respond-to-onclick-event-on-custom-views", "title": "Fragment does not respond to onClick event on custom views", "body": "<p>I have MainFragment, and inside my fragment I added my CustomButton custom view. And, onViewCreated, I setOnClickListener to the view. But, the fragmenet does not respond to the click.</p>\n\n<p>ButtonWithImage</p>\n\n<pre><code>class ButtonWithImage(context: Context, attrs: AttributeSet) : LinearLayout(context, attrs) {\n\n    init {\n        val view = View.inflate(context, R.layout.item_custom_btn, this)\n\n        val attributes = context.obtainStyledAttributes(attrs, R.styleable.BadgeIcon)\n\n        view.btn_image.setImageDrawable(attributes.getDrawable(R.styleable.BadgeIcon_image))\n        view.btn_text.setText(attributes.getResourceId(R.styleable.BadgeIcon_text, 0))\n\n        attributes.recycle()\n    }\n\n}\n</code></pre>\n\n<p>fragment_main.xml</p>\n\n<pre><code>...\n    &lt;LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"50dp\"\n            android:orientation=\"horizontal\"&gt;\n\n        &lt;corn.transaction.custom_view.ButtonWithImage\n                android:id=\"@+id/my_cards\"\n                android:layout_width=\"0dp\"\n                android:layout_weight=\"1\"\n                android:layout_height=\"match_parent\"\n                app:image=\"@drawable/ic_my_cards\"\n                app:text=\"@string/btn_text_my_cards\"/&gt;\n\n        &lt;corn.transaction.custom_view.ButtonWithImage\n                android:id=\"@+id/transactions\"\n                android:layout_width=\"0dp\"\n                android:layout_weight=\"1\"\n                android:layout_height=\"match_parent\"\n                app:image=\"@drawable/ic_transactions\"\n                app:text=\"@string/btn_text_transactions\"/&gt;\n\n    &lt;/LinearLayout&gt;\n...\n</code></pre>\n\n<p>MainFragment.kt</p>\n\n<pre><code>class MainFragment : Fragment() {\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? = inflater.inflate(R.layout.fragment_main, container, false)\n\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        my_cards.setOnClickListener { logMessage(\"loooooog\") }\n    }\n\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 7231, "user_id": 4370279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tjPvY.png?s=128&g=1", "display_name": "theapache64", "link": "https://stackoverflow.com/users/4370279/theapache64"}, "edited": false, "score": 1, "creation_date": 1555934178, "post_id": 55793647, "comment_id": 98256904, "body": "I appreciate the time you spent to learn new things rather than using stackoverflow to fix your bugs :D."}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 4, "last_activity_date": 1555932777, "creation_date": 1555932777, "answer_id": 55793722, "question_id": 55793647, "link": "https://stackoverflow.com/questions/55793647/why-kotlin-allow-write-main-function-with-no-arguments/55793722#55793722", "title": "Why Kotlin allow write main function with no arguments?", "body": "<p>Other languages like C/C++ allow a <code>main</code> function with empty parameter list. Under the hood they are just usual <code>main</code> methods with the parameters being ignored. This feature is purely syntactic to simplify short programs and demo-ware</p>\n"}, {"comments": [{"owner": {"reputation": 7231, "user_id": 4370279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tjPvY.png?s=128&g=1", "display_name": "theapache64", "link": "https://stackoverflow.com/users/4370279/theapache64"}, "reply_to_user": {"reputation": 1224, "user_id": 7805359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gdCcs.png?s=128&g=1", "display_name": "Nazarii Moshenskiy", "link": "https://stackoverflow.com/users/7805359/nazarii-moshenskiy"}, "edited": false, "score": 0, "creation_date": 1555934848, "post_id": 55794003, "comment_id": 98257169, "body": "Which IDE you&#39;re using for Kotlin development ? IntelliJ IDEA ?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1555951568, "post_id": 55794003, "comment_id": 98264683, "body": "Minor nitpick: it&#39;s the JVM launcher which calls <code>main(String[])</code> and of course it doesn&#39;t know anything about Kotlin."}], "tags": [], "owner": {"reputation": 7231, "user_id": 4370279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tjPvY.png?s=128&g=1", "display_name": "theapache64", "link": "https://stackoverflow.com/users/4370279/theapache64"}, "is_accepted": true, "score": 7, "last_activity_date": 1555935497, "last_edit_date": 1555935497, "creation_date": 1555934032, "answer_id": 55794003, "question_id": 55793647, "link": "https://stackoverflow.com/questions/55793647/why-kotlin-allow-write-main-function-with-no-arguments/55794003#55794003", "title": "Why Kotlin allow write main function with no arguments?", "body": "<p>The signature of main is based on what the Java Virtual Machine expects:</p>\n\n<blockquote>\n  <p>The Java Virtual Machine starts execution by invoking the method main\n  of some specified class, passing it a single argument, which is an\n  array of strings.</p>\n  \n  <p>The method main must be declared public, static, and void. It must\n  specify a formal parameter (\u00a78.4.1) whose declared type is array of\n  String. Therefore, either of the following declarations is acceptable:</p>\n  \n  <p>public static void main(String[] args) public static void\n  main(String... args)</p>\n</blockquote>\n\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.1\" rel=\"nofollow noreferrer\">Ref1</a>, <a href=\"https://stackoverflow.com/a/54325625/4370279\">Ref2</a></p>\n\n<p>So yes, we should define an array string param in the <code>main</code> method. But, as you asked, </p>\n\n<blockquote>\n  <p>How is this possible and what Kotlin does under the hood?</p>\n</blockquote>\n\n<p>Let's see, </p>\n\n<p><strong>Kotlin Code</strong></p>\n\n<pre><code>// fileName : Main.kt\nfun main() {\n    println(\"Hello World!\")\n}\n</code></pre>\n\n<p><strong>Compiled Java Code</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public final class MainKt {\n   public static final void main() {\n      String var0 = \"Hello World!\";\n      System.out.println(var0);\n   }\n\n   // $FF: synthetic method\n   public static void main(String[] var0) {\n      main();\n   }\n}\n</code></pre>\n\n<p>As you can see, in the compiled Java code, Kotlin uses method overloading to call <code>main</code> method with <code>String[]</code> argument. From this, we can understand that the Koltin simply helps us to save time and make syntax more readable.</p>\n\n<p>Internally, Kotlin calls the main method with <code>String[]</code> argument.</p>\n\n<p><strong>Tip</strong></p>\n\n<p>If you're using IntelliJ IDEA, you can use the built-in Kotlin tools to see the compiled Java version of the Kotlin code.</p>\n\n<ol>\n<li><code>Menu &gt; Tools &gt; Kotlin &gt; Show Kotlin Bytecode</code></li>\n<li>Click on the <code>Decompile</code> button</li>\n</ol>\n\n<p>You can find simple guide with screenshots from <a href=\"https://stackoverflow.com/a/52983100/4370279\">here</a></p>\n"}], "owner": {"reputation": 1224, "user_id": 7805359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gdCcs.png?s=128&g=1", "display_name": "Nazarii Moshenskiy", "link": "https://stackoverflow.com/users/7805359/nazarii-moshenskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1133, "favorite_count": 0, "accepted_answer_id": 55794003, "answer_count": 2, "score": 3, "last_activity_date": 1564367282, "creation_date": 1555932442, "last_edit_date": 1564367282, "question_id": 55793647, "link": "https://stackoverflow.com/questions/55793647/why-kotlin-allow-write-main-function-with-no-arguments", "title": "Why Kotlin allow write main function with no arguments?", "body": "<p>Recently, I started to learn <code>Kotlin</code> and figured out that the <code>main()</code> function may be written without arguments like this:</p>\n\n<pre><code>fun main() {\n    dayOfWeek()\n}\n</code></pre>\n\n<p>How is this possible and what <code>Kotlin</code> is doing under the hood? \n<code>Java</code> doesn't allow us to do so.</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11339773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ffa3c74c0528e6096d4bec7a8ef2be?s=128&d=identicon&r=PG&f=1", "display_name": "Shaikh Danish", "link": "https://stackoverflow.com/users/11339773/shaikh-danish"}, "edited": false, "score": 0, "creation_date": 1555927743, "post_id": 55792397, "comment_id": 98254457, "body": "2 one is empty,nothing is loaded in webview"}], "tags": [], "owner": {"reputation": 2225, "user_id": 5002179, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/zWz2b.jpg?s=128&g=1", "display_name": "MurugananthamS", "link": "https://stackoverflow.com/users/5002179/murugananthams"}, "is_accepted": false, "score": 0, "last_activity_date": 1555926239, "creation_date": 1555926239, "answer_id": 55792397, "question_id": 55791930, "link": "https://stackoverflow.com/questions/55791930/how-to-load-pdf-file-from-local-url-in-android/55792397#55792397", "title": "How to load pdf file from local url in android", "body": "<p>Try this:</p>\n\n<p>String pdf = \"<a href=\"http://192.168.1.181:8081/reports/RepoActivityLog181.pdf\" rel=\"nofollow noreferrer\">http://192.168.1.181:8081/reports/RepoActivityLog181.pdf</a>\";</p>\n\n<pre><code>  Thorough Intent:\n\n   Uri path = Uri.fromFile(pdf);\n  Intent pdfOpenintent = new Intent(Intent.ACTION_VIEW);\n  pdfOpenintent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n  pdfOpenintent.setDataAndType(path, \"application/pdf\");\n  try {\n  startActivity(pdfOpenintent);\n  }\n  catch (ActivityNotFoundException e) {\n\n  }\n</code></pre>\n\n<p>OR Webview</p>\n\n<pre><code>   WebView webView = (WebView) findViewById(R.id.my_webview);\n   webView.setWebViewClient(new MyWebViewClient());\n   webView.addView(webView.getZoomControls());\n   webView.getSettings().setJavaScriptEnabled(true);\n   webView.loadUrl(\"http://docs.google.com/gview? \n  embedded=true&amp;url=\"+pdf);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 11339773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ffa3c74c0528e6096d4bec7a8ef2be?s=128&d=identicon&r=PG&f=1", "display_name": "Shaikh Danish", "link": "https://stackoverflow.com/users/11339773/shaikh-danish"}, "edited": false, "score": 0, "creation_date": 1555929799, "post_id": 55792768, "comment_id": 98255170, "body": "again No preview Available"}, {"owner": {"reputation": 28, "user_id": 5868847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543c6866b467976c0469aa2c37a191c?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/5868847/saad"}, "reply_to_user": {"reputation": 27, "user_id": 11339773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ffa3c74c0528e6096d4bec7a8ef2be?s=128&d=identicon&r=PG&f=1", "display_name": "Shaikh Danish", "link": "https://stackoverflow.com/users/11339773/shaikh-danish"}, "edited": false, "score": 0, "creation_date": 1555931005, "post_id": 55792768, "comment_id": 98255572, "body": "How many times have you tried it? Did the pdf open once? You can also override the onPageStarted Method and then check whether the url comes empty or not."}, {"owner": {"reputation": 27, "user_id": 11339773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ffa3c74c0528e6096d4bec7a8ef2be?s=128&d=identicon&r=PG&f=1", "display_name": "Shaikh Danish", "link": "https://stackoverflow.com/users/11339773/shaikh-danish"}, "edited": false, "score": 0, "creation_date": 1555995882, "post_id": 55792768, "comment_id": 98277106, "body": "i have implement but same issue"}, {"owner": {"reputation": 27, "user_id": 11339773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ffa3c74c0528e6096d4bec7a8ef2be?s=128&d=identicon&r=PG&f=1", "display_name": "Shaikh Danish", "link": "https://stackoverflow.com/users/11339773/shaikh-danish"}, "edited": false, "score": 0, "creation_date": 1555995887, "post_id": 55792768, "comment_id": 98277109, "body": "if (url==null || url.equals(&quot;&quot;)) {                 view.loadUrl(&quot;<a href=\"http://docs.google.com/gview?embedded=true&amp;url=&quot;+\" rel=\"nofollow noreferrer\">docs.google.com/gview?embedded=true&amp;url=&quot;+</a> finalURL);                 }"}], "tags": [], "owner": {"reputation": 28, "user_id": 5868847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543c6866b467976c0469aa2c37a191c?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/5868847/saad"}, "is_accepted": false, "score": 0, "last_activity_date": 1555931291, "last_edit_date": 1555931291, "creation_date": 1555928152, "answer_id": 55792768, "question_id": 55791930, "link": "https://stackoverflow.com/questions/55791930/how-to-load-pdf-file-from-local-url-in-android/55792768#55792768", "title": "How to load pdf file from local url in android", "body": "<p>In the web view client method shouldOverrideUrlLoading, load the url and return true..</p>\n\n<pre><code>view.loadUrl(url);\nreturn true;\n</code></pre>\n\n<p>Also override the onPageStarted method of the WebViewClient to see whether the url is empty or not...</p>\n\n<pre><code> public void onPageStarted(WebView view, String url, Bitmap favicon) {\n        // TODO Auto-generated method stub\n        super.onPageStarted(view, url, favicon);\n\n        if(url == null || url.equals(\"\"))\n            view.loadUrl(\"yoururl\");\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11339773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ffa3c74c0528e6096d4bec7a8ef2be?s=128&d=identicon&r=PG&f=1", "display_name": "Shaikh Danish", "link": "https://stackoverflow.com/users/11339773/shaikh-danish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1555931291, "creation_date": 1555924239, "question_id": 55791930, "link": "https://stackoverflow.com/questions/55791930/how-to-load-pdf-file-from-local-url-in-android", "title": "How to load pdf file from local url in android", "body": "<p>I am using WebView to load the PDF.</p>\n\n<p>this is my pdf from local url:</p>\n\n<pre><code>String pdf = \"http://192.168.1.181:8081/reports/RepoActivityLog181.pdf\";\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>webView=new WebView(MainActivity.this);\n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.getSettings().setPluginState(WebSettings.PluginState.ON);\n\n        webView.setWebViewClient(new Callback());\n\n        String pdfURL = \"http://192.168.1.181:8081/reports/RepoActivityLog181.pdf\";\n        webView.loadUrl(\"http://docs.google.com/gview?embedded=true&amp;url=\" + pdfURL);\n\n        setContentView(webView);\n    }\n\n    private class Callback extends WebViewClient {\n        @Override\n        public boolean shouldOverrideUrlLoading(\n                WebView view, String url) {\n            return(false);\n        }\n</code></pre>\n\n<p>and the output is :\nNo preview available</p>\n"}]