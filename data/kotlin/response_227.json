[{"tags": ["kotlin", "swagger-ui", "swagger-2.0", "openapi-generator"], "answers": [{"tags": [], "owner": {"reputation": 1547, "user_id": 7519419, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3yC8Wy7aYpo/AAAAAAAAAAI/AAAAAAAAA-Q/b3mAljwJI48/photo.jpg?sz=128", "display_name": "Vladas Maier", "link": "https://stackoverflow.com/users/7519419/vladas-maier"}, "is_accepted": false, "score": 0, "last_activity_date": 1557993023, "creation_date": 1557993023, "answer_id": 56163485, "question_id": 56159003, "link": "https://stackoverflow.com/questions/56159003/swagger-ui-is-not-showing-control-documentation/56163485#56163485", "title": "Swagger-ui is not showing control documentation", "body": "<p>Try to replace <code>paths</code> value with <code>PathSelectors.any()</code>:</p>\n\n<pre><code>@Bean\nopen fun newsApi() : Docket {\n    return Docket(DocumentationType.SWAGGER_2)\n            .groupName(\"api-infos\")\n            .apiInfo(apiInfo())\n            .directModelSubstitute(LocalDateTime::class.java, Date::class.java)\n            .select()\n            .paths(PathSelectors.any())\n            .build()\n}\n</code></pre>\n\n<ul>\n<li><p>The default value for swagger path is <code>/v2/api-docs</code>.  </p>\n\n<p>You can change is in the <code>application.properties</code> with the <code>springfox.documentation.swagger.v2.path</code> key to whatever you want to.</p></li>\n<li><p><code>?group=api-infos</code> comes from the <code>.groupName(\"api-infos\")</code> value.  </p>\n\n<p>If you don't want to group your APIs for any reasons (like sets of selected APIs  for specific clients) then remove the <code>.groupName(...)</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 903, "user_id": 4759182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aeb3a99d91298b5daac0ec647d445b?s=128&d=identicon&r=PG&f=1", "display_name": "rasilvap", "link": "https://stackoverflow.com/users/4759182/rasilvap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2130, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564737384, "creation_date": 1557963897, "last_edit_date": 1564737384, "question_id": 56159003, "link": "https://stackoverflow.com/questions/56159003/swagger-ui-is-not-showing-control-documentation", "title": "Swagger-ui is not showing control documentation", "body": "<p>I am trying to use springfox-swagger-ui for the documentation of my rest services. I had used the next basic configuration in a kotlin project:</p>\n\n<p>This is my Docket class:</p>\n\n<pre><code>@Configuration\n@EnableSwagger2\nopen class SwaggerConfig {\n\n    @Bean\n    open fun newsApi(): Docket {\n        return Docket(DocumentationType.SWAGGER_2)\n                .groupName(\"api-infos\")\n                .apiInfo(apiInfo())\n                .directModelSubstitute(LocalDateTime::class.java, Date::class.java)\n                .select()\n                .paths(regex(\"/api.*\"))\n                .build()\n    }\n\n    private fun apiInfo(): ApiInfo {\n        return ApiInfoBuilder()\n                .title(\"Infos REST api\")\n                .description(\"Swagger test for Api ESPN\")\n                .termsOfServiceUrl(\"http://en.wikipedia.org/wiki/Terms_of_service\")\n                .contact(\"rodolfo.silva@globant.com\")\n                .license(\"Apache License Version 2.0\")\n                .licenseUrl(\"http://www.apache.org/licenses/LICENSE-2.0.html\")\n                .version(\"1.0\")\n                .build()\n    }\n}\n</code></pre>\n\n<p>And this is my controller:</p>\n\n<pre><code>@Controller\n@ProductApi(\n        id = \"v1_browse_player\",\n        title = \"Browse Player (v1)\",\n        description = \"\")\n@Api(value = \"controller\", description = \"Controllers API\", produces = \"application/json\")\n@RequestMapping(\"/api/infos\")\nclass BrowsePlayerController {\n\n    @Autowired\n    lateinit var browsePlayerService: BrowsePlayerServiceRepresentable\n\n    @GetRequest(\n            path = \"/v1/browse/players\",\n            timeToLive = 300,\n            queries = [\n                QueryParameter(name = \"swid\", required = true),\n                QueryParameter(name = \"uid\"),\n                QueryParameter(name = \"seeAll\", type = java.lang.Boolean::class),\n                QueryParameter(name = \"lang\", required = true),\n                QueryParameter(name = \"region\", required = true),\n                QueryParameter(name = \"version\", required = true, type = Integer::class),\n                QueryParameter(name = \"appName\", required = true),\n                QueryParameter(name = \"platform\", required = true)\n            ]\n    )\n    @ApiOperation(value = \"Get the players\", notes = \"Returns one info for playerBrowse\")\n    fun processBrowsePlayerRequest(transaction: Transaction, apiRequest: ApiRequest): Single&lt;BrowsePlayerResponse?&gt; {\n        val applicationContext = RequestBasedApplicationContext(apiRequest)\n        val standardContext = RequestBasedStandardContext(\n                RequestBasedVersionContext(apiRequest),\n                applicationContext,\n                RequestBasedEditionContext(apiRequest, applicationContext),\n                RequestBasedPlatformContext(apiRequest),\n                transaction\n        )\n        val swidContext = RequestBasedSWIDContext(apiRequest)\n        val uidContext = if (checkUIDPresent(apiRequest)) RequestBasedUIDContext(apiRequest) else null\n        val seeAllContext = RequestBasedSeeAllContext(apiRequest)\n        val requestBrowsePlayerContext = RequestBrowsePlayerContext(standardContext, swidContext, uidContext, seeAllContext, apiRequest)\n        return browsePlayerService.getEntitiesBrowse(requestBrowsePlayerContext)\n    }\n\n    private fun checkUIDPresent(apiRequest: ApiRequest): Boolean =\n            apiRequest.parameters[\"uid\"] != null\n}\n</code></pre>\n\n<p>I had used a very basic configuration, the ApiOperation, Api and RequestMapping(\"/api/infos\") tags, also at the data class level, the next configuration:</p>\n\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\ndata class TopBrowsePlayerHeader(val title: String, val searchURL: String?)\n@ApiModel(value = \"Info entity\", description = \"Entity class BrowsePlayerResponse\")\ndata class BrowsePlayerResponse(\n        @ApiModelProperty(value = \"The header of the info\", required = false)\n        val header: TopBrowsePlayerHeader,\n        @ApiModelProperty(value = \"The analytics node of the info\", required = true)\n        val analytics: Analytics,\n        @ApiModelProperty(value = \"The sections node of the info\", required = true)\n        val sections: List&lt;Section&gt;)\n</code></pre>\n\n<p>When I load the <a href=\"http://localhost:8080/swagger-ui.html#/api-controller\" rel=\"nofollow noreferrer\">http://localhost:8080/swagger-ui.html#/api-controller</a> (swagger browser). I can't see my controller structure. It seems like there is a predefined endpoint which is shown: </p>\n\n<p><a href=\"http://localhost:8080/v2/api-docs?group=api-infos\" rel=\"nofollow noreferrer\">http://localhost:8080/v2/api-docs?group=api-infos</a></p>\n\n<p>I am not pretty familiar with this configuration. Any ideas to the correct configuration?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "kotlin", "geolocation"], "answers": [{"tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 4, "last_activity_date": 1557963554, "creation_date": 1557963554, "answer_id": 56158959, "question_id": 56158940, "link": "https://stackoverflow.com/questions/56158940/kotlin-cannot-reassign-latlngs-latitude-longitude/56158959#56158959", "title": "Kotlin: Cannot reassign LatLng&#39;s latitude/longitude", "body": "<blockquote>\n  <p>If my mLatLng1 variable is of type var, then why am I getting this error?</p>\n</blockquote>\n\n<p>Because you are not assigning something to <code>mLatLng1</code>. That would be:</p>\n\n<pre><code>mLatLng1 = LatLng(45.0, 123.0)\n</code></pre>\n\n<p>Instead, you are doing this:</p>\n\n<pre><code>mLatLng1.latitude = mLatLng2.latitude\n</code></pre>\n\n<p>This is attempting to update a field <em>inside</em> <code>mLatLng1</code>. And, if your object is <a href=\"https://developers.google.com/android/reference/com/google/android/gms/maps/model/LatLng\" rel=\"nofollow noreferrer\">this <code>LatLng</code></a>, those fields are <code>final</code>, which in Kotlin maps to <code>val</code>.</p>\n"}], "owner": {"reputation": 1791, "user_id": 6868161, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EIdND.jpg?s=128&g=1", "display_name": "grantespo", "link": "https://stackoverflow.com/users/6868161/grantespo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 56158959, "answer_count": 1, "score": 1, "last_activity_date": 1557963554, "creation_date": 1557963416, "question_id": 56158940, "link": "https://stackoverflow.com/questions/56158940/kotlin-cannot-reassign-latlngs-latitude-longitude", "title": "Kotlin: Cannot reassign LatLng&#39;s latitude/longitude", "body": "<p>Let's say I have 2 <code>LatLng</code> variables.</p>\n\n<pre><code>lateinit var mLatLng1:LatLng\nlateinit var mLatLng2:LatLng\n</code></pre>\n\n<p>Let's say they've both already been initialized to some values.</p>\n\n<p>If I try this: </p>\n\n<pre><code>mLatLng1 = mLatLng2\n</code></pre>\n\n<p>It works as expected. However, when i try this:</p>\n\n<pre><code>mLatLng1.latitude = mLatLng2.latitude\n</code></pre>\n\n<p>I get an error:</p>\n\n<blockquote>\n  <p>Val cannot be reassigned</p>\n</blockquote>\n\n<p>If my <code>mLatLng1</code> variable is of type <code>var</code>, then why am I getting this error?</p>\n"}, {"tags": ["android", "kotlin", "annotations", "lint"], "answers": [{"tags": [], "owner": {"reputation": 1354, "user_id": 4584212, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/BDBCq.jpg?s=128&g=1", "display_name": "Oliver Metz", "link": "https://stackoverflow.com/users/4584212/oliver-metz"}, "is_accepted": false, "score": 0, "last_activity_date": 1557963390, "creation_date": 1557963390, "answer_id": 56158933, "question_id": 56158779, "link": "https://stackoverflow.com/questions/56158779/android-resource-annotations-on-a-list/56158933#56158933", "title": "Android resource annotations on a list", "body": "<p>I actually used my brain a little just now and this is my workaround. Does not answer the question but somewhat solves the problem. Simply reduce the return to a single value:</p>\n\n<pre><code>fun useColor() {\n    val textView = TextView(null)\n    textView.setTextColor(getColorValue(0)) // Correctly show error\n}\n\n@ColorRes\nfun getColorValue(index : Int) : Int {\n    return arrayListOf(R.color.black)[index]\n}\n</code></pre>\n"}], "owner": {"reputation": 1354, "user_id": 4584212, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/BDBCq.jpg?s=128&g=1", "display_name": "Oliver Metz", "link": "https://stackoverflow.com/users/4584212/oliver-metz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557963390, "creation_date": 1557962027, "question_id": 56158779, "link": "https://stackoverflow.com/questions/56158779/android-resource-annotations-on-a-list", "title": "Android resource annotations on a list", "body": "<p>Is there a way to annotate a list of integers with a resource annotation so that lint shows me an error when I use a method's integer return value wrongly? </p>\n\n<p>Example (<code>setTextColor()</code> only takes <code>@ColorInt</code>):</p>\n\n<pre><code>fun useColor() {\n    val textView = TextView(null)\n    textView.setTextColor(getColor()) // This correctly shows an error\n    textView.setTextColor(getColorList()[0]) // Can I make this show an error too? \n}\n\n@ColorRes\nfun getColor() : Int {\n    return R.color.black\n}\n\n@ColorRes // any way to specify this differently?\nfun getColorList() : List&lt;Int&gt;{\n    return arrayListOf(R.color.black)\n}\n</code></pre>\n"}, {"tags": ["kotlin", "functional-programming", "arrow-kt"], "comments": [{"owner": {"reputation": 16905, "user_id": 1266326, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dcbc6c3587f5c62e877500ac4061b8b1?s=128&d=identicon&r=PG&f=1", "display_name": "MLProgrammer-CiM", "link": "https://stackoverflow.com/users/1266326/mlprogrammer-cim"}, "edited": false, "score": 2, "creation_date": 1558036795, "post_id": 56158776, "comment_id": 98978170, "body": "Have you tried using <code>flatMap</code> instead of <code>fold</code> for the cases where the left is respected?"}], "answers": [{"comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1558080499, "post_id": 56181037, "comment_id": 98989912, "body": "Correct, the methods do return <code>MaybeError</code>. Looks great, thanks!"}], "tags": [], "owner": {"reputation": 7918, "user_id": 5500224, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Cy4uM.jpg?s=128&g=1", "display_name": "Bukharov Sergey", "link": "https://stackoverflow.com/users/5500224/bukharov-sergey"}, "is_accepted": true, "score": 1, "last_activity_date": 1558075816, "creation_date": 1558075816, "answer_id": 56181037, "question_id": 56158776, "link": "https://stackoverflow.com/questions/56158776/idiomatic-arrow/56181037#56181037", "title": "Idiomatic Arrow", "body": "<p>It is hard to refactor because I can only assume what used methods should return. But I guess the methods returns <code>MaybeError</code>. In this case we can omit <code>fold({ Either.left(it) })</code> and we can use <code>map</code> or <code>flatMap</code>.</p>\n\n<pre><code>internal typealias MaybeError&lt;T&gt; = Either&lt;GenericError, T&gt;\n\noverride fun createCompany(companyDomain: CompanyDomain): MaybeError&lt;CompanyDomain&gt; =\n    checkCompany(companyDomain)\n        .map { it.toEntity() }\n        .flatMap { company -&gt;\n            companyRepository.isCompanyExists(company)\n                .flatMap { isExists -&gt;\n                    if (isExists) {\n                        MaybeError.left(CompanyNameExists(companyDomain))\n                    } else {\n                        companyRepository.createCompany(company)\n                    }\n                }\n        }\n</code></pre>\n"}], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 2, "accepted_answer_id": 56181037, "answer_count": 1, "score": 2, "last_activity_date": 1558075816, "creation_date": 1557961962, "question_id": 56158776, "link": "https://stackoverflow.com/questions/56158776/idiomatic-arrow", "title": "Idiomatic Arrow", "body": "<p>I have the following method:</p>\n\n<pre><code>internal typealias MaybeError&lt;T&gt; = Either&lt;GenericError, T&gt;\n\noverride fun createCompany(companyDomain: CompanyDomain): MaybeError&lt;CompanyDomain&gt; =\n    checkCompany(companyDomain).map { it.toEntity() }.fold({ Either.left(it) }) { company -&gt;\n        with (companyRepository) {\n            isCompanyExists(company).fold({ Either.left(it) }) { isExists -&gt;\n                if (isExists) return@with Either.left(CompanyNameExists(companyDomain))\n                createCompany(company).fold({ Either.right(companyDomain) }) { Either.left(it) }\n            }\n        }\n    }\n</code></pre>\n\n<p>Is there a better/more idiomatic way to write this using Arrow?</p>\n"}, {"tags": ["android", "kotlin", "android-permissions", "fusedlocationproviderclient"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1557965731, "post_id": 56158649, "comment_id": 98946884, "body": "Compiler is not able to determine that your function actually checks the permission. If you exclude the method and check permission in-line, it works."}, {"owner": {"reputation": 1198, "user_id": 3117966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h2Q4v.jpg?s=128&g=1", "display_name": "Nisarg", "link": "https://stackoverflow.com/users/3117966/nisarg"}, "edited": false, "score": 0, "creation_date": 1558012883, "post_id": 56158649, "comment_id": 98965765, "body": "@zorgan which location services version are you using ?"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "reply_to_user": {"reputation": 1198, "user_id": 3117966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h2Q4v.jpg?s=128&g=1", "display_name": "Nisarg", "link": "https://stackoverflow.com/users/3117966/nisarg"}, "edited": false, "score": 0, "creation_date": 1558055627, "post_id": 56158649, "comment_id": 98983007, "body": "I&#39;m using <code>com.google.android.gms:play-services-location:16.0.0</code> - does that answer your question? @Nisarg"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557960811, "creation_date": 1557960811, "question_id": 56158649, "link": "https://stackoverflow.com/questions/56158649/call-requires-permission-which-may-be-rejected-by-user-when-using-fusedlocatio", "title": "&quot;Call requires permission which may be rejected by user&quot; when using fusedLocationProviderClient", "body": "<p>I understand you need to check if the user has allowed location before performing methods on <code>fusedLocationProviderClient</code>. So I created a global method like so:</p>\n\n<pre><code>fun locationAllowed(context: Context): Int {\n    if (ContextCompat.checkSelfPermission(context, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n        return PackageManager.PERMISSION_GRANTED\n    }\n    return PackageManager.PERMISSION_DENIED\n}\n</code></pre>\n\n<p>and used it in my activity:</p>\n\n<pre><code>class Home : FragmentActivity() {\n\n    lateinit var fusedLocationProviderClient: FusedLocationProviderClient\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_home)\n        fusedLocationProviderClient = LocationServices.getFusedLocationProviderClient(this)\n        if (locationAllowed(this) == PackageManager.PERMISSION_GRANTED) {\n            fusedLocationProviderClient.lastLocation // still gives me the error\n        }\n    }\n}\n</code></pre>\n\n<p>however I'm still getting a red underline on <code>fusedLocationProviderClient.lastLocation</code> : <code>Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with checkPermission) or explicitly handle a potential SecurityException.</code></p>\n\n<p>Any idea why?</p>\n"}, {"tags": ["java", "parsing", "kotlin", "time"], "answers": [{"comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1558009064, "post_id": 56158610, "comment_id": 98963196, "body": "I get <code>Exception java.time.format.DateTimeParseException: Text &#39;33m 50s&#39; could not be parsed: Unable to obtain LocalTime from TemporalAccessor: {MicroOfSecond=0, NanoOfSecond=0, SecondOfMinute=50, MinuteOfHour=33, MilliOfSecond=0},ISO of type java.time.format.Parsed</code>."}, {"owner": {"reputation": 7254, "user_id": 633684, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FILa8kQG7TI/AAAAAAAAAAI/AAAAAAAAABE/W39twkD272Q/photo.jpg?sz=128", "display_name": "xiaofeng.li", "link": "https://stackoverflow.com/users/633684/xiaofeng-li"}, "reply_to_user": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1558055747, "post_id": 56158610, "comment_id": 98983042, "body": "Because <code>33m 50s</code> is not a <code>LocalTime</code>, it&#39;s missing the hour field."}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1558098801, "post_id": 56158610, "comment_id": 98999364, "body": "Correct. So your answer doesn\u2019t work and doesn\u2019t solve the problem asked about."}], "tags": [], "owner": {"reputation": 7254, "user_id": 633684, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FILa8kQG7TI/AAAAAAAAAAI/AAAAAAAAABE/W39twkD272Q/photo.jpg?sz=128", "display_name": "xiaofeng.li", "link": "https://stackoverflow.com/users/633684/xiaofeng-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1557960533, "creation_date": 1557960533, "answer_id": 56158610, "question_id": 56158486, "link": "https://stackoverflow.com/questions/56158486/how-to-parse-hhmmss-without-hours/56158610#56158610", "title": "How to parse HH:mm:ss without hours?", "body": "<p>Use pattern <code>\"[H'h ']m'm 's's'\"</code>, which will parse both.</p>\n\n<ul>\n<li><code>[H'h ']</code> matches the optional hours, e.g. <code>\"2h \"</code></li>\n<li><code>m'm '</code> matches <code>\"33m \"</code></li>\n<li><code>s's'</code> matches <code>\"50s\"</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1558008893, "post_id": 56158689, "comment_id": 98963097, "body": "<code>toUpperCase</code> is not technically needed, but since durations are conventionally printed in upper case, the principle of least surprise may still require that it be there."}], "tags": [], "owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "is_accepted": true, "score": 6, "last_activity_date": 1557975144, "last_edit_date": 1557975144, "creation_date": 1557961187, "answer_id": 56158689, "question_id": 56158486, "link": "https://stackoverflow.com/questions/56158486/how-to-parse-hhmmss-without-hours/56158689#56158689", "title": "How to parse HH:mm:ss without hours?", "body": "<h1>tl;dr</h1>\n\n<p>You are working too hard, and going in the wrong direction.</p>\n\n<p>Regex is overkill for this problem.</p>\n\n<p>No need for <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter</code></a> class, nor a formatting pattern. </p>\n\n<p>Use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code></a> class to parse a <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Durations\" rel=\"nofollow noreferrer\">ISO 8601</a> string crafted from your input.</p>\n\n<pre><code>Duration                    // Represent a span-of-time not attached to the timeline with class `Duration`, not `LocalTime`.\n.parse(                     // By default, the *java.time* classes such as `Duration` use the standard ISO 8601 formats to parse/generate date-time strings.\n    \"PT\" + \"2h 33m 50s\"     // Morph your input string to comply with the ISO 8601 standard. Add `P` for the beginning, and `T` to separate years-months-days from hours-minutes-seconds. \n    .replace( \" \" , \"\" )    // Delete any SPACE characters by replacing them with nothing.\n    .toUpperCase()          // Force all the letters to be uppercase.\n)                           // Returns a `Duration`.\n</code></pre>\n\n<p>Ditto for just minutes and seconds.</p>\n\n<pre><code>Duration.parse( \"PT\" + \"33m 50s\".replace( \" \" , \"\" ).toUpperCase() ) \n</code></pre>\n\n<h1><code>Duration</code>, not <code>LocalTime</code></h1>\n\n<blockquote>\n  <p>if this string goes through LocalTime.parse</p>\n</blockquote>\n\n<p><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/LocalTime.html\" rel=\"nofollow noreferrer\"><code>LocalTime</code></a> is for a time-of-day. Your input is not a time-of-day.</p>\n\n<p>Your input string represents a span-of-time unattached to the timeline. The class for that is <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code></a>.</p>\n\n<h2>ISO 8601</h2>\n\n<p>Your input string is close to <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Durations\" rel=\"nofollow noreferrer\">standard ISO 8601</a> format, <code>PnYnMnDTnHnMnS</code>. The <code>P</code> marks the beginning. The <code>T</code> separates any years-months-days from any hours-minutes-seconds.</p>\n\n<p>Let's adjust your input string to comply with the standard.</p>\n\n<pre><code>String input = \"PT\" + \"2h 33m 50s\".replace( \" \" , \"\" ).toUpperCase() ;\n</code></pre>\n\n<blockquote>\n  <p>input: PT2H33M50S</p>\n</blockquote>\n\n<p>Parse.</p>\n\n<pre><code>Duration d = Duration.parse( input ) ;  // PT2H33M50S\n</code></pre>\n\n<p>To generate a string in standard ISO 8601, call <code>toString</code>.</p>\n\n<pre><code>String output = d.toString() ;\n</code></pre>\n\n<blockquote>\n  <p>output: PT2H33M50S</p>\n</blockquote>\n\n<p>You can add that <code>Duration</code> object to a time-of-day, a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/LocalTime.html\" rel=\"nofollow noreferrer\"><code>LocalTime</code></a>. </p>\n\n<pre><code>LocalTime lt = LocalTime.NOON.plus( d ) ;\n</code></pre>\n\n<p>You can add that <code>Duration</code> to the current moment in UTC to determine a future moment (or a past moment is the duration is a negative amount).</p>\n\n<pre><code>Instant instant = Instant.now().plus( d ) ;\n</code></pre>\n\n<blockquote>\n  <p>lt.toString(): 14:33:50</p>\n</blockquote>\n\n<p>See all the above <a href=\"https://ideone.com/UzVOxH\" rel=\"nofollow noreferrer\">code run live at IdeOne.com</a>.</p>\n\n<p>You can extract each part of the <code>Duration</code>.</p>\n\n<pre><code>long daysPart = d.toDaysPart() ;  // 24-hour chunks of time, not related to calendar days.\nint hoursPart = d.toHoursPart() ;\nint minutesPart = d.toMinutesPart() ;\nint secondsPart = d.toSecondsPart() ;\n</code></pre>\n\n<p>Or perhaps you want the entire span-of-time as a count of total milliseconds.</p>\n\n<pre><code>long millis = d.toMillis() ;  // All the hours-minutes-seconds and such totaled as one count of elapsed milliseconds.\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11506669, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uTvmO7XWXKQ/AAAAAAAAAAI/AAAAAAAAABk/9z2Y00VwGUo/photo.jpg?sz=128", "display_name": "Aurora", "link": "https://stackoverflow.com/users/11506669/aurora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 1, "accepted_answer_id": 56158689, "answer_count": 2, "score": 0, "last_activity_date": 1557975144, "creation_date": 1557959534, "question_id": 56158486, "link": "https://stackoverflow.com/questions/56158486/how-to-parse-hhmmss-without-hours", "title": "How to parse HH:mm:ss without hours?", "body": "<p>I have a string with format like: \"2h 33m 50s\". If hours reach zero this string changes to: \"33m 50s\". So, if this string goes through LocalTime.parse it throw exception. How can I parse it?</p>\n\n<pre><code>fun main() {\n    val timeString = \"2h 33m 50s\"\n    val timeString2 = \"33m 50s\"\n    val formatterH = DateTimeFormatter.ofPattern(\"[H]'h 'm[m]'m 's[s]'s'\")\n    val formatterM = DateTimeFormatter.ofPattern(\"m[m]'m 's[s]'s'\")\n\n    val time = LocalTime.parse(timeString, formatterH)\n    println(time)\n    val time2 = LocalTime.parse(timeString2, formatterH) //throws exception\n    println(time2)\n    val time3 = LocalTime.parse(timeString2, formatterM) //throws similar exception\n    println(time3)\n}\n</code></pre>\n\n<pre><code>Program output:\n02:33:50\nException in thread \"main\" org.threeten.bp.format.DateTimeParseException: Text '33m 50s' could not be parsed: Unable to obtain LocalTime from TemporalAccessor: DateTimeBuilder[fields={SecondOfMinute=50, NanoOfSecond=0, MicroOfSecond=0, MinuteOfHour=33, MilliOfSecond=0}, ISO, null, null, null], type org.threeten.bp.format.DateTimeBuilder\n    at org.threeten.bp.format.DateTimeFormatter.createError(DateTimeFormatter.java:1559)\n    at org.threeten.bp.format.DateTimeFormatter.parse(DateTimeFormatter.java:1496)\n    at org.threeten.bp.LocalTime.parse(LocalTime.java:437)\n    at MainKt.main(main.kt:16)\n    at MainKt.main(main.kt)\nCaused by: org.threeten.bp.DateTimeException: Unable to obtain LocalTime from TemporalAccessor: DateTimeBuilder[fields={SecondOfMinute=50, NanoOfSecond=0, MicroOfSecond=0, MinuteOfHour=33, MilliOfSecond=0}, ISO, null, null, null], type org.threeten.bp.format.DateTimeBuilder\n    at org.threeten.bp.LocalTime.from(LocalTime.java:405)\n    at org.threeten.bp.LocalTime$1.queryFrom(LocalTime.java:116)\n    at org.threeten.bp.LocalTime$1.queryFrom(LocalTime.java:113)\n    at org.threeten.bp.format.DateTimeBuilder.build(DateTimeBuilder.java:642)\n    at org.threeten.bp.format.DateTimeFormatter.parse(DateTimeFormatter.java:1492)\n</code></pre>\n"}, {"tags": ["java", "kotlin", "bouncycastle", "gnupg", "pgp"], "comments": [{"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1558358991, "post_id": 56157995, "comment_id": 99064465, "body": "What are you trying to do, and what is your question?"}, {"owner": {"reputation": 733, "user_id": 4727842, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0483ae091acc1d00135c0bc5a1df6e6d?s=128&d=identicon&r=PG", "display_name": "Grayden Hormes", "link": "https://stackoverflow.com/users/4727842/grayden-hormes"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1558461117, "post_id": 56157995, "comment_id": 99106368, "body": "@JamesKPolk I am trying to encrypt files with pgp. I am unable to provide a public key that bouncy castle will accept as outlined above."}], "answers": [{"tags": [], "owner": {"reputation": 462, "user_id": 7550201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QXLJQ.png?s=128&g=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/7550201/jens"}, "is_accepted": false, "score": 1, "last_activity_date": 1581456296, "creation_date": 1581456296, "answer_id": 60177587, "question_id": 56157995, "link": "https://stackoverflow.com/questions/56157995/bouncy-castle-open-gpg2-public-key/60177587#60177587", "title": "bouncy castle open gpg2 public key", "body": "<p>If you just want to do proper en-/decryption use <a href=\"https://github.com/neuhalje/bouncy-gpg\" rel=\"nofollow noreferrer\" title=\"bouncy-gpg\">bouncy-gpg</a> (shameless plug: I am the author).</p>\n\n<p>Also do not use 3DES, it is dead Slow and not the most modern algorithm (though it is still considered secure, AFAIK).</p>\n\n<p>You export the public key via <code>gpg --export -a me@example.com</code>.</p>\n\n<p>You manage keys using the <code>InMemoryKeyring</code> (see <a href=\"https://github.com/neuhalje/bouncy-gpg/blob/master/README.md#recommendation-inmemorykeyring\" rel=\"nofollow noreferrer\">here</a> for details):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static KeyringConfig keyringConfigInMemoryForKeys(final String exportedPubKey, final String exportedPrivateKey, final String passphrase) throws IOException, PGPException {\n\n   final InMemoryKeyring keyring = KeyringConfigs.forGpgExportedKeys(KeyringConfigCallbacks.withPassword(passphrase);\n\n       keyring.addPublicKey(exportedPubKey.getBytes(\"US-ASCII\"));\n// you can add many more public keys\n\n       // if you only want to encrypt you do not need a private key and can ignore this line\nkeyring.addSecretKey(exportedPrivateKey.getBytes(\"US-ASCII\"));\n// you can add many more private keys\n\nreturn keyring;\n}\n\n\nfinal String original_message = \"I love deadlines. I like the whooshing sound they make as they fly by. Douglas Adams\";\n\n// Most likely you will use  one of the KeyringConfigs.... methods.\nKeyringConfig keyringConfigOfSender = keyringConfigInMemoryForKeys(..); // TODO - here comes your code to get keys\n\nByteArrayOutputStream result = new ByteArrayOutputStream();\n\ntry (\n    BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(result);\n\n    final OutputStream outputStream = BouncyGPG\n        .encryptToStream()\n        .withConfig(keyringConfigOfSender)\n        .withStrongAlgorithms()\n        .toRecipients(\"recipient@example.com\", \"sender@example.com\") // TODO - also your job to set the recipients \n        .andSignWith(\"sender@example.com\") // TODO - same here\n        .binaryOutput()\n        .andWriteTo(bufferedOutputStream);\n    // Maybe read a file or a webservice?\n    final ByteArrayInputStream is = new ByteArrayInputStream(original_message.getBytes())\n) {\n  Streams.pipeAll(is, outputStream);\n// It is very important that outputStream is closed before the result stream is read.\n// The reason is that GPG writes the signature at the end of the stream.\n// This is triggered by closing the stream.\n// In this example outputStream is closed via the try-with-resources mechanism of Java\n}\n\nresult.close();\nbyte[] chipertext = result.toByteArray();\n</code></pre>\n"}], "owner": {"reputation": 733, "user_id": 4727842, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0483ae091acc1d00135c0bc5a1df6e6d?s=128&d=identicon&r=PG", "display_name": "Grayden Hormes", "link": "https://stackoverflow.com/users/4727842/grayden-hormes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1581456296, "creation_date": 1557956377, "last_edit_date": 1558320109, "question_id": 56157995, "link": "https://stackoverflow.com/questions/56157995/bouncy-castle-open-gpg2-public-key", "title": "bouncy castle open gpg2 public key", "body": "<p>I tried to implement the solution here <a href=\"https://stackoverflow.com/a/33216302/4727842\">https://stackoverflow.com/a/33216302/4727842</a>. My code looks like this</p>\n\n<pre><code>private fun readPublicKey(input: InputStream): PGPPublicKey {\n    val publicKey = PGPPublicKeyRingCollection(PGPUtil.getDecoderStream(input), BcKeyFingerprintCalculator())\n    var key: PGPPublicKey? = null\n\n    publicKey.keyRings.forEach { ring: PGPPublicKeyRing -&gt;\n        ring.publicKeys.forEach { k: PGPPublicKey -&gt;\n            if (k.isEncryptionKey) {\n                key = k\n            }\n        }\n    }\n\n    if (key == null) {\n        throw IllegalArgumentException(\"Can't find encryption key input key ring.\")\n    } else {\n        return key!!\n    }\n}\n\nprivate fun encrypt(file: File): String {\n    val input = IOUtils.toInputStream(\"pub.asc\", \"UTF-8\")\n    val key = readPublicKey(input)\n\n    Security.addProvider(BouncyCastleProvider())\n\n    val out = ByteArrayOutputStream()\n    val compressor = PGPCompressedDataGenerator(PGPCompressedData.ZIP)\n\n    PGPUtil.writeFileToLiteralData(compressor.open(out), PGPLiteralData.BINARY, file)\n    compressor.close()\n\n    val builder = BcPGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.TRIPLE_DES)\n    val generator = PGPEncryptedDataGenerator(builder.setSecureRandom(SecureRandom()))\n\n    generator.addMethod(BcPublicKeyKeyEncryptionMethodGenerator(key))\n\n    return String(out.toByteArray())\n}\n</code></pre>\n\n<p>Using the gpg cli (v2.2.15), after generating a key, I output the asc file.</p>\n\n<p><code>gpg -ab -o ./pub.asc</code></p>\n\n<p>its contents look like this</p>\n\n<pre><code>-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEpjyVE0VY1bLTdOo7wzVyPJ8SXFIFAlzbRfQACgkQwzVyPJ8S\nXFKtjwgAp1ad9jFxKtsbzR4XT4HqypTPxpwY8raoIeXNg2PMDAFXGqmcRmP4NEBO\nBYqalHAxrzXKVPcmKHtYnm7Jb91VLcYycsF+9RM53mwhg2YJhv49xROx8IsJuhVG\n8X52nhPc+qQtzE/79FPDgiZNKSnrHUDvPU3rrZH44WPsGQJ9iGy0eoJPomuU29Cb\nwWYxOHq8fRmL5h5Pi9mU1dJRZvHej8ewt0DpredY//7Er7xjCKHrFyzddSn1sGtv\nQvoOP+1pLNCV/LKAgCz2N2vSOToLqYTuQlrO/kNApnza0+lO0GW4RMf0OJntbSIa\nMHDa+/uc9YnyABkptxD2a9DsbvHwvg==\n=QeFf\n-----END PGP SIGNATURE-----\n</code></pre>\n\n<p>Then with the line </p>\n\n<p><code>val input = IOUtils.toInputStream(\"pub.asc\", \"UTF-8\")</code></p>\n\n<p>I attempted to run. It output the message <code>\"Can't find encryption key input key ring.\"</code> after failing to extract a key. After debugging I saw that <code>publicKey.keyRings</code> size was <code>0</code>.</p>\n\n<p>I didn't understand the situation since the linked guide seems to advocate using the <code>.asc</code> file for encrypting when I thought it was for signing. I don't know much about PGP but I thought those were different steps and that maybe signing was not necessary for my use case. </p>\n\n<p>So, I tried exporting the public key</p>\n\n<p><code>gpg --export -a \"User\" &gt; public.key</code></p>\n\n<p>containing</p>\n\n<pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQENBFzaBaIBCACngN7Zu5ZKKJuwlp9/iYLleIbYqTm1mxIVEsCiiksLTwbKIo2M\nd7YeFDjJRPoKS94bt0FaRUV7cKwXTvqdVg0OITkTLE446TrMhi6Yz9InxkO1yC2l\nRfVIZJgOfFBFTwiqx5HpPMmgHnpyzYESiwkNXR7mVIbIX4/5r+NOjMH/ioBSAd80\nFV8Yl7k72B6gpbD/CEV6iR+uWlL99Bv6aYtbubCUEieY0KZyk998TFlatrtHvhDQ\nftVHYS4EsrnvlwtVD8QLbnYA2WsX6xVqpz8KHZ5LzXLys4D64sHZ5BkD3aX8Jp5s\niCpOb6rU4wdlD7gDJb1a1ks613C8Qj5/KHN1ABEBAAG0J0dyYXlkZW4gSG9ybWVz\nIDxncmF5ZGVuLmhvcm1lc0BzYXAuY29tPokBVAQTAQgAPhYhBKY8lRNFWNWy03Tq\nO8M1cjyfElxSBQJc2gWiAhsDBQkDwmcABQsJCAcCBhUKCQgLAgQWAgMBAh4BAheA\nAAoJEMM1cjyfElxS2H0H/0O37sJfcNC2UFeuwoGqPMV4+3dN6sejpWBvQCw8OuGv\nlDQmPUpEbBHs3awI83XlpYBbAKaDcJlIHPugM6CKGNWOL8RhL+ziJoGX1/Cldc5M\nNHToNwU78/LE9Eog6oiC/VELnLP2qMRGK9+6sSYy7kz4zVPRzGjjD3t2uSxpoclO\nLnF7Iqm6W+j2OIHACgBeqjjv4hgH4bJjXuixuPSxRLNp0dQ6PU8fj+xRjJudJWS6\nhx3PM8/NZvoDruqEWjoTJW96S7askitImtcSw90kMbTpw/knZhpNeCJMQPF8jLUo\nZSbuC+8EukzuJ1mNxS9S0M1IX4psKEUttBYya+SoX/C5AQ0EXNoFogEIALk9vHyO\nsXeqHEXeRsCHDyfOtFJlUFQvtkf3dwyyg4hVQq2vYTVyO+couxpgmCCrCzSNdlwK\nSalh7Wejf+U+Erx8RzGJ764uyIlw/1B2qlGFgdWPaRWHtufQiUz6RNtWEhsBuddI\nlbWxMOvbA3wfkFAIl+NQ8Aqqd8N9ao7mrXcADF7hRMtM+TllFJjxpNJeCWxwfeDf\nEMM6totFf9CyD+Q0Zq6zyVFhgLiMuLPX4LsRMBKHGrg0LyyRQgDEezI1WH25YeAT\nEl8YJriEV4PcXQGnrsfkKbvsnNkXFb3nRlANuKlnHgBrSLE9Tqm4XuwG+czdGJuU\np0eyoxv4vrCGCgMAEQEAAYkBPAQYAQgAJhYhBKY8lRNFWNWy03TqO8M1cjyfElxS\nBQJc2gWiAhsMBQkDwmcAAAoJEMM1cjyfElxSRuwH/3RZ6Zs5K76GaakJh0H5uw3H\nmqrQiVSh1PmcGO2qRZuDrGDOiJWnOCnl48t71DgqjyABPAYsYzIhZXltA6lYVCI5\n68HmUyfOHyeoZa6t35YM3A6S3jsIHRSQgu98R/1VK5EksQnGTrYwsa3gUQy+7BbN\nF88+jRhEKnBYOABQ+M29pkx8zvH9UdrHWMTu2h5tb70volDSQzsdN9KX4EHoAto3\njP3janjIzYohBXM+FFte9HIOndwJ0RsZ5UD8lx8EmKh4DCUw3JxHagHOvdXopAAM\nj+bUVTlu72LmvcsiNAKg7UicIuprKyHxDkSeelgEQt7Iz+6w3WL9djvL3hG3cks=\n=9i+0\n-----END PGP PUBLIC KEY BLOCK-----\n</code></pre>\n\n<p>and ran with </p>\n\n<p><code>val input = IOUtils.toInputStream(\"public.key\", \"UTF-8\")</code></p>\n\n<p>This yielded no change. bouncycastle found no keys in my public key file. I then saw that since I am using gpg2 there are differences in how key rings are handled. I found a solution to convert a <code>.pkr</code> to a <code>.kbx</code> here <a href=\"https://stackoverflow.com/a/34221494/4727842\">https://stackoverflow.com/a/34221494/4727842</a> but at this point this has become woefully complicated. I don't know the difference between a public key ring and a public key. I don't know why the first example used a <code>.asc</code> file as a suposedly valid keyring. I especially don't know why it is so hard to create a bouncycastle <code>PGPPublicKey</code> object from my <code>public.key</code> file.</p>\n"}, {"tags": ["unit-testing", "kotlin", "mockito", "junit4", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 737, "user_id": 10715642, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QRLDtnm1-IE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ipSlUb1x7ARbIjnOaLC_Y9VX2jNQ/mo/photo.jpg?sz=128", "display_name": "Damon Baker", "link": "https://stackoverflow.com/users/10715642/damon-baker"}, "is_accepted": false, "score": 0, "last_activity_date": 1558000905, "creation_date": 1558000905, "answer_id": 56165928, "question_id": 56157936, "link": "https://stackoverflow.com/questions/56157936/rxjava-unit-testing-for-observable-interval-context-has-changed-error/56165928#56165928", "title": "RxJava Unit Testing for Observable.Interval, &quot;Context has changed&quot; error", "body": "<p>By default, <code>Observable.interval</code> runs on the the computation scheduler. So you will need to use the overload of <code>Observable.interval</code> that takes a scheduler or add <code>Schedulers.computation</code> into your test rule.</p>\n\n<p><code>Observable.interval(INITIAL_DELAY, REFRESH_PERIOD, TimeUnit.SECONDS, [Your scheduler here])</code></p>\n\n<p><a href=\"http://reactivex.io/RxJava/javadoc/io/reactivex/Observable.html#interval-long-long-java.util.concurrent.TimeUnit-\" rel=\"nofollow noreferrer\">Observable.interval documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 1127, "user_id": 1516954, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f0943dc5050ad26e49df093cb8b8ddf3?s=128&d=identicon&r=PG", "display_name": "paxcow", "link": "https://stackoverflow.com/users/1516954/paxcow"}, "is_accepted": true, "score": -1, "last_activity_date": 1558008478, "creation_date": 1558008478, "answer_id": 56168184, "question_id": 56157936, "link": "https://stackoverflow.com/questions/56157936/rxjava-unit-testing-for-observable-interval-context-has-changed-error/56168184#56168184", "title": "RxJava Unit Testing for Observable.Interval, &quot;Context has changed&quot; error", "body": "<p>Adding a ComputationSchedulerHandler to my test rule solved my problem.</p>\n"}], "owner": {"reputation": 1127, "user_id": 1516954, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f0943dc5050ad26e49df093cb8b8ddf3?s=128&d=identicon&r=PG", "display_name": "paxcow", "link": "https://stackoverflow.com/users/1516954/paxcow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 56168184, "answer_count": 2, "score": 0, "last_activity_date": 1558008478, "creation_date": 1557956088, "question_id": 56157936, "link": "https://stackoverflow.com/questions/56157936/rxjava-unit-testing-for-observable-interval-context-has-changed-error", "title": "RxJava Unit Testing for Observable.Interval, &quot;Context has changed&quot; error", "body": "<p>I am trying to write unit tests for the code block below :</p>\n\n<pre><code>Observable.interval(INITIAL_DELAY, REFRESH_PERIOD, TimeUnit.SECONDS)\n            .flatMap {thisMethodReturnsAnObservable()}\n            .subscribeOn(Schedulers.io()) \n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(this::onDataLoaded, this::onError)\n            .disposeLater()) \n</code></pre>\n\n<p>I have a test rule that overrides the RxSchedulers with testSchedulers which works.</p>\n\n<p><strong>Important</strong> the tests can run one by one, but not all together, also run with coverage is broken with the same error.</p>\n\n<p>The error I am getting is, the running of the test immediately stops when debugger hits the <code>onDataLoaded</code> method, and displays the following message:\n<a href=\"https://i.stack.imgur.com/OsE6u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OsE6u.png\" alt=\" &quot;\"></a></p>\n"}, {"tags": ["android", "animation", "kotlin", "bottomnavigationview"], "comments": [{"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1557954928, "post_id": 56157660, "comment_id": 98944412, "body": "provide your code or xml file"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 8132928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae083e151aae2cd9d77b1e3d87a5f3b?s=128&d=identicon&r=PG&f=1", "display_name": "Aln", "link": "https://stackoverflow.com/users/8132928/aln"}, "is_accepted": false, "score": 4, "last_activity_date": 1557997127, "creation_date": 1557997127, "answer_id": 56164675, "question_id": 56157660, "link": "https://stackoverflow.com/questions/56157660/how-to-disable-gray-animation-from-center-to-edges-on-bottom-navigation-on-tap/56164675#56164675", "title": "How to disable gray animation from center to edges on bottom navigation on tap", "body": "<p>Found solution to this, just add  <code>app:itemBackground=\"@null\"</code> to xml.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 9659254, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V9TNbixte78/AAAAAAAAAAI/AAAAAAAAJQI/hkPu2M886SM/photo.jpg?sz=128", "display_name": "Naimul Kabir", "link": "https://stackoverflow.com/users/9659254/naimul-kabir"}, "edited": false, "score": 0, "creation_date": 1619166843, "post_id": 66286209, "comment_id": 118827859, "body": "Thanks, man. I was just looking for this."}], "tags": [], "owner": {"reputation": 1390, "user_id": 4001920, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/JNPlB.jpg?s=128&g=1", "display_name": "Alexander Tumanin", "link": "https://stackoverflow.com/users/4001920/alexander-tumanin"}, "is_accepted": false, "score": 1, "last_activity_date": 1613776251, "creation_date": 1613776251, "answer_id": 66286209, "question_id": 56157660, "link": "https://stackoverflow.com/questions/56157660/how-to-disable-gray-animation-from-center-to-edges-on-bottom-navigation-on-tap/66286209#66286209", "title": "How to disable gray animation from center to edges on bottom navigation on tap", "body": "<p>Use <code>app:itemRippleColor=&quot;@color/your_color&quot;</code> to set your custom color for tap effect or <code>app:itemRippleColor=&quot;@null&quot;</code> for no effect</p>\n"}], "owner": {"reputation": 61, "user_id": 8132928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae083e151aae2cd9d77b1e3d87a5f3b?s=128&d=identicon&r=PG&f=1", "display_name": "Aln", "link": "https://stackoverflow.com/users/8132928/aln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1613776251, "creation_date": 1557954560, "last_edit_date": 1557997230, "question_id": 56157660, "link": "https://stackoverflow.com/questions/56157660/how-to-disable-gray-animation-from-center-to-edges-on-bottom-navigation-on-tap", "title": "How to disable gray animation from center to edges on bottom navigation on tap", "body": "<p>Having reviewed a lot of material, I still did not find a solution. As you can see on git below, when you tap on the botton navigation icon, it has gray animation from the center to the edges. Is there a way to disable this animation?</p>\n\n<p><a href=\"https://cdn-images-1.medium.com/max/800/1*ru89Jnj0ObDXthynZMZrdw.gif\" rel=\"nofollow noreferrer\">Gray animation</a>\nHere's my XML</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;com.google.android.material.bottomnavigation.BottomNavigationView\n        android:id=\"@+id/bottom_navigation\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentBottom=\"true\"\n        android:layout_gravity=\"bottom\"\n        android:background=\"@android:color/white\"\n        app:elevation=\"0dp\"\n        app:itemIconTint=\"@color/bottomNavigationIconColor\"\n        app:itemTextColor=\"@drawable/nav_item_text_color_state\"\n        app:labelVisibilityMode=\"labeled\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:menu=\"@menu/bottom_navigation_main\" /&gt;\n</code></pre>\n\n<p>and nav_item_text_color_state</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;item\n        android:state_checked=\"false\"\n        android:color=\"@color/bottomNavigationIconColor\" /&gt;\n    &lt;item\n        android:state_checked=\"true\"\n        android:color=\"#005EFF\" /&gt;\n&lt;/selector&gt;\n</code></pre>\n\n<p><strong>Update</strong>\nFound solution to this. To disable this gray ripple effect just add  <code>app:itemBackground=\"@null\"</code> to xml.</p>\n"}, {"tags": ["generics", "kotlin", "mockito"], "answers": [{"comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1558219306, "post_id": 56196680, "comment_id": 99029226, "body": "Exactly! Thanks a lot! Just a small correction: <code>TestUnitCreateCompanyController</code>&#39;s <code>service</code> and <code>controller</code> should be specific types, not generics."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 1, "last_activity_date": 1558256760, "last_edit_date": 1558256760, "creation_date": 1558162425, "answer_id": 56196680, "question_id": 56156838, "link": "https://stackoverflow.com/questions/56156838/mockito-classcastexception-on-generic-parent-class/56196680#56196680", "title": "Mockito: ClassCastException on generic parent class", "body": "<p>You're running into an issue with <em>Generic Type Erasure</em> of <em>Java</em>.</p>\n\n<p>When <em>Mockito</em> creates and injects the mocks, <code>service</code> actually looks like a simple <code>Object</code> or <code>Any</code> to it:</p>\n\n<pre><code>protected lateinit var service: Any\n</code></pre>\n\n<p>So the mock itself is created as a mock of <code>Object</code>.</p>\n\n<p>Instead I'd suggest to you to have everything <em>Mockito</em> related within the actual test class.</p>\n\n<pre><code>internal abstract class TestUnitController&lt;CONTROLLER: Any, SERVICE: Any&gt; {\n    protected abstract val service: SERVICE\n\n    protected abstract fun controllerCall(): CONTROLLER.() -&gt; Unit\n    protected abstract fun serviceCall(): SERVICE.() -&gt; Any?\n\n    @Test\n    fun `when service returns error should throw ResponseStatusException`() {\n        testControllerServiceError(service, serviceCall()) { controllerCall() }\n    }\n\n    protected fun &lt;U&gt; testController(value: U, assertions: () -&gt; Unit) {\n        testController(service, serviceCall(), value) { assertions() }\n    }\n}\n</code></pre>\n\n\n\n<pre><code>@RunWith(MockitoJUnitRunner::class)\ninternal class TestUnitCreateCompanyController : TestUnitController&lt;CreateCompanyController, CompanyService&gt;() {\n    @Mock\n    override lateinit var service: CompanyService\n\n    @InjectMocks\n    private lateinit var controller: CreateCompanyController\n\n    private val request = CompanyCreateRequest(\"LOL SARL\")\n\n    override fun controllerCall(): CreateCompanyController.() -&gt; Unit = { createCompany(request) }\n\n    override fun serviceCall(): CompanyService.() -&gt; Any? = { createCompany(any()) }\n\n    @Test\n    fun `when create company service successful should return created company`() {\n        val domain = CompanyDomain(name = request.name)\n        testController(domain) {\n            controller.createCompany(request).run {\n                uuid.shouldEqual(domain.uuid.toString())\n                name.shouldEqual(domain.name)\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 56196680, "answer_count": 1, "score": 0, "last_activity_date": 1558256760, "creation_date": 1557950669, "question_id": 56156838, "link": "https://stackoverflow.com/questions/56156838/mockito-classcastexception-on-generic-parent-class", "title": "Mockito: ClassCastException on generic parent class", "body": "<p>To abbreviate my unit tests, I created the following parent class:</p>\n\n<pre><code>internal abstract class TestUnitController&lt;CONTROLLER: Any, SERVICE: Any&gt; {\n\n    @Mock\n    protected lateinit var service: SERVICE\n\n    @InjectMocks\n    protected lateinit var controller: CONTROLLER\n\n    protected abstract fun controllerCall(): CONTROLLER.() -&gt; Unit\n    protected abstract fun serviceCall(): SERVICE.() -&gt; Any?\n\n    @Test\n    fun `when service returns error should throw ResponseStatusException`() {\n        testControllerServiceError(service, serviceCall()) { controllerCall() }\n    }\n\n    protected fun &lt;U&gt; testController(value: U, assertions: () -&gt; Unit) {\n        testController(service, serviceCall(), value) { assertions() }\n    }\n}\n</code></pre>\n\n<p>And a unit test child like the following:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner::class)\ninternal class TestUnitCreateCompanyController : TestUnitController&lt;CreateCompanyController, CompanyService&gt;() {\n\n    private val request = CompanyCreateRequest(\"LOL SARL\")\n\n    override fun controllerCall(): CreateCompanyController.() -&gt; Unit = { createCompany(request) }\n\n    override fun serviceCall(): CompanyService.() -&gt; Any? = { createCompany(any()) }\n\n    @Test\n    fun `when create company service successful should return created company`() {\n        val domain = CompanyDomain(name = request.name)\n        testController(domain) {\n            controller.createCompany(request).run {\n                uuid.shouldEqual(domain.uuid.toString())\n                name.shouldEqual(domain.name)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>However when I run this, I get the following exception:</p>\n\n<pre><code>java.lang.ClassCastException: org.mockito.codegen.Object$MockitoMock$1782227983 cannot be cast to org.m0skit0.fikchador.spring.domain.company.CompanyService\n\n    at org.m0skit0.fikchador.spring.endpoint.company.create.TestUnitCreateCompanyController$serviceCall$1.invoke(TestUnitCreateCompanyController.kt:13)\n    at org.m0skit0.fikchador.spring.test.TestUtilsKt.testController(TestUtils.kt:21)\n    at org.m0skit0.fikchador.spring.test.TestUnitController.testController(TestUnitController.kt:24)\n    at org.m0skit0.fikchador.spring.endpoint.company.create.TestUnitCreateCompanyController.when create company service successful should return created company(TestUnitCreateCompanyController.kt:24)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:79)\n    at org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:85)\n    at org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:39)\n    at org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "viewmodel"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1557947470, "post_id": 56156164, "comment_id": 98941420, "body": "&quot;But when i am navigating from last fragment to previous fragment ( to edit details that already provided ) the shared ViewModel destroys&quot; -- if you are using an activity-scoped <code>ViewModel</code>, and these fragments are in the same activity, the <code>ViewModel</code> should not get cleared. You might consider a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to show how you have things set up and how you are determining that your <code>ViewModel</code> is getting cleared."}, {"owner": {"reputation": 709, "user_id": 11457806, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wc3qEDo5ANY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcgo0uvIoS5_y24ibXeT6SlWWoQ7Q/mo/photo.jpg?sz=128", "display_name": "Israel dela Cruz", "link": "https://stackoverflow.com/users/11457806/israel-dela-cruz"}, "edited": false, "score": 0, "creation_date": 1557948821, "post_id": 56156164, "comment_id": 98942009, "body": "The only time the ViewModel gets destroyed is when the context(usually activity) that was used to create it is also destroyed. If you are sending your ViewModel reference to your fragment via fragmet.viewModel = viewModel from the activity. Then it might be the problem, because you shouldn&#39;t be doing it like that."}, {"owner": {"reputation": 5084, "user_id": 4281239, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/aee59cc99dc01815b8d3456c14c9ce9b?s=128&d=identicon&r=PG&f=1", "display_name": "AADProgramming", "link": "https://stackoverflow.com/users/4281239/aadprogramming"}, "edited": false, "score": 0, "creation_date": 1557976739, "post_id": 56156164, "comment_id": 98948696, "body": "You need to post the relevant code snippet where this issue is"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9656117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406bc430f4981797952c12e0d2cbf489?s=128&d=identicon&r=PG&f=1", "display_name": "Obi Weng", "link": "https://stackoverflow.com/users/9656117/obi-weng"}, "is_accepted": false, "score": 0, "last_activity_date": 1557976467, "creation_date": 1557976467, "answer_id": 56160293, "question_id": 56156164, "link": "https://stackoverflow.com/questions/56156164/how-to-prevent-viewmodel-from-destroying/56160293#56160293", "title": "How to Prevent ViewModel from destroying", "body": "<p>If you are using multiple fragments inside a single activity, make use you are providing the ViewModels using the activity context instead of the fragment context.</p>\n\n<p>In your fragments, it should be like this:</p>\n\n<pre><code>vm = ViewModelProviders.of(activity!!, vmFactory)[vmclass.java]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8698961, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I8EmGQ72vA8/AAAAAAAAAAI/AAAAAAAAAEE/7OsjNahDfSE/photo.jpg?sz=128", "display_name": "Gokuldas V R", "link": "https://stackoverflow.com/users/8698961/gokuldas-v-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557976467, "creation_date": 1557947391, "question_id": 56156164, "link": "https://stackoverflow.com/questions/56156164/how-to-prevent-viewmodel-from-destroying", "title": "How to Prevent ViewModel from destroying", "body": "<p>I am building an app to save the user details step by step with multiple fragments. I used multiple fragments which shares same view model. But when i am navigating from last fragment to previous fragment ( to edit details that already provided ) the shared ViewModel destroys. Is there any way to prevent it from destroying ?!</p>\n"}, {"tags": ["android", "kotlin", "android-uiautomator"], "owner": {"reputation": 1104, "user_id": 901465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af175bc25165d85a2dcd6d69bda01f5a?s=128&d=identicon&r=PG", "display_name": "acrespo", "link": "https://stackoverflow.com/users/901465/acrespo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1557958502, "creation_date": 1557946087, "last_edit_date": 1557958502, "question_id": 56155877, "link": "https://stackoverflow.com/questions/56155877/uiselector-text-different-behavior-between-os-versions", "title": "UISelector.text() different behavior between OS versions", "body": "<p>I have found some weird behavior regarding UiAutomator's <code>UISelector.text()</code> method.</p>\n\n<p>Let's take this sample code:</p>\n\n<pre><code>val device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation())\ndevice.wait(Until.hasObject(By.pkg(resolveInfo.activityInfo.packageName).depth(0)), 1000)\n\ndevice.findObject(UiSelector().text(\"Some text\"))\n</code></pre>\n\n<p>And suppose I have a <code>Button</code> in my first activity that looks like this:</p>\n\n<pre><code>&lt;Button\n        android:id=\"@+id/my_button\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"@dimen/my_button_height\"\n        android:text=\"Some text\"\n        android:textAllCaps\n        /&gt;\n</code></pre>\n\n<p>When trying to target buttons with properties like <code>textAllCaps</code> the behavior of this method changes depending on the Android version of the device.</p>\n\n<p>For android versions <code>Nougat</code> (api level 24) or higher, this method expects the string passed as parameter to be in caps, as it is rendered (e.g. <code>\"SOME TEXT\"</code>), while for lower versions it expects the string to be the text assigned to that button's <code>android:text</code> attribute.</p>\n\n<p>Has anyone come up with this? How do you write UITests that run for every android version (let's say <code>minSDKVersion = 19</code>)? </p>\n\n<p>(I know I can use <code>UISelector.description()</code> and <code>UISelector.resourceId()</code> but I would like to be able to use <code>UISelector.text()</code> when desired)</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1557945810, "post_id": 56155739, "comment_id": 98940704, "body": "Most likely, that activity is no longer exported."}], "answers": [{"tags": [], "owner": {"reputation": 4910, "user_id": 4896784, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7D2Mdu6NAdk/AAAAAAAAAAI/AAAAAAAAAQg/OgEfBdpBgXg/photo.jpg?sz=128", "display_name": "ismail alaoui", "link": "https://stackoverflow.com/users/4896784/ismail-alaoui"}, "is_accepted": false, "score": 0, "last_activity_date": 1557946159, "creation_date": 1557946159, "answer_id": 56155898, "question_id": 56155739, "link": "https://stackoverflow.com/questions/56155739/java-lang-securityexception-permission-denial-starting-intent-flg-0x800000-c/56155898#56155898", "title": "java.lang.SecurityException: Permission Denial: starting Intent { flg=0x800000 cmp=com.android.systemui/.recents.RecentsActivity", "body": "<p>Looks like its because new permissions system in android 6 </p>\n\n<blockquote>\n  <p>Every Android app runs in a limited-access sandbox. If an app needs to\n  use resources or information outside of its own sandbox, the app has\n  to request the appropriate permission. You declare that your app needs\n  a permission by listing the permission in the app manifest and then\n  requesting that the user approve each permission at runtime (on\n  Android 6.0 and higher).</p>\n  \n  <p>If your app needs a dangerous permission, you must check whether you\n  have that permission every time you perform an operation that requires\n  that permission. Beginning with Android 6.0 (API level 23), users can\n  revoke permissions from any app at any time, even if the app targets a\n  lower API level. So even if the app used the camera yesterday, it\n  can't assume it still has that permission today</p>\n</blockquote>\n\n<p>check the <a href=\"https://developer.android.com/training/permissions/requesting\" rel=\"nofollow noreferrer\">documentation</a> for more informations </p>\n"}], "owner": {"reputation": 11, "user_id": 10512799, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O3mCT4VQdcQ/AAAAAAAAAAI/AAAAAAAAijU/ASqJgef_lvQ/photo.jpg?sz=128", "display_name": "Guilherme Biff Zarelli", "link": "https://stackoverflow.com/users/10512799/guilherme-biff-zarelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557946159, "creation_date": 1557945468, "question_id": 56155739, "link": "https://stackoverflow.com/questions/56155739/java-lang-securityexception-permission-denial-starting-intent-flg-0x800000-c", "title": "java.lang.SecurityException: Permission Denial: starting Intent { flg=0x800000 cmp=com.android.systemui/.recents.RecentsActivity", "body": "<p>I'm trying to open recent apps but I have a permission problem.</p>\n\n<p>This feature works on Android 4, but seemingly from 6/7 is displaying the following error:</p>\n\n<p>java.lang.SecurityException: Permission Denial: starting Intent { flg=0x800000 cmp=com.android.systemui/.recents.RecentsActivity }</p>\n\n<pre><code>val intent = Intent()\nintent.component = ComponentName(\"com.android.systemui\", \"com.android.systemui.recents.RecentsActivity\")\nif (null != intent.resolveActivityInfo(context.packageManager, 0)) {\n    startActivity(intent)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit2", "rx-java2"], "comments": [{"owner": {"reputation": 2788, "user_id": 4643073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rf9P0.jpg?s=128&g=1", "display_name": "Tuby", "link": "https://stackoverflow.com/users/4643073/tuby"}, "edited": false, "score": 0, "creation_date": 1557983216, "post_id": 56155177, "comment_id": 98950100, "body": "<a href=\"https://stackoverflow.com/a/40970191/4643073\">stackoverflow.com/a/40970191/4643073</a>"}, {"owner": {"reputation": 21, "user_id": 1937768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10261b91beefd83b5dbc5fdb6e95a74d?s=128&d=identicon&r=PG", "display_name": "S.Singh", "link": "https://stackoverflow.com/users/1937768/s-singh"}, "reply_to_user": {"reputation": 2788, "user_id": 4643073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rf9P0.jpg?s=128&g=1", "display_name": "Tuby", "link": "https://stackoverflow.com/users/4643073/tuby"}, "edited": false, "score": 0, "creation_date": 1558026479, "post_id": 56155177, "comment_id": 98973455, "body": "Hi @Tuby I tried the solution. It does not work in my case because for validation request i get okhttp3.Response and for refresh token request i get custom LoginResponse in which i get my new accesstoken value. The solution you provided works fine if the response for both the requests is same. Can you please suggest a workaround for this."}, {"owner": {"reputation": 21, "user_id": 1937768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10261b91beefd83b5dbc5fdb6e95a74d?s=128&d=identicon&r=PG", "display_name": "S.Singh", "link": "https://stackoverflow.com/users/1937768/s-singh"}, "reply_to_user": {"reputation": 2788, "user_id": 4643073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rf9P0.jpg?s=128&g=1", "display_name": "Tuby", "link": "https://stackoverflow.com/users/4643073/tuby"}, "edited": false, "score": 0, "creation_date": 1558184911, "post_id": 56155177, "comment_id": 99021647, "body": "Thanks @Tuby Played around a bit with the solution you provided and issue is resolved now."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 1937768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10261b91beefd83b5dbc5fdb6e95a74d?s=128&d=identicon&r=PG", "display_name": "S.Singh", "link": "https://stackoverflow.com/users/1937768/s-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1558185473, "creation_date": 1558185473, "answer_id": 56199323, "question_id": 56155177, "link": "https://stackoverflow.com/questions/56155177/how-to-make-another-api-call-only-if-1st-api-call-fails-using-retrofit-rxjava/56199323#56199323", "title": "How to make another api call only if 1st api call fails using retrofit rxjava", "body": "<pre><code>requestApi.checkAccessToken(accessToken).flatMap(\n     object : Function&lt;Response, Observable&lt;Response&gt;&gt; {\n         override fun apply(t: Response): Observable&lt;Response&gt; {\n            if (t.code() === 400) {\n              return requestApi.getAccessToken(refreshToken,\"refreshToken\").flatMap(\n               object : Function&lt;LoginResponse, Observable&lt;Response&gt;&gt; {\n                 override fun apply(t: LoginResponse): Observable&lt;Response&gt; {\n                        return requestApi.checkAccessToken(t.access_token)\n            }\n          })\n       } else {\n          return Observable.just(t)\n       }\n    }\n }).subscribeOn(Schedulers.io())\n   .observeOn(AndroidSchedulers.mainThread())\n   .subscribe(this::handleAccessTokenResponse, this::handleError)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 1937768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10261b91beefd83b5dbc5fdb6e95a74d?s=128&d=identicon&r=PG", "display_name": "S.Singh", "link": "https://stackoverflow.com/users/1937768/s-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558185473, "creation_date": 1557943106, "question_id": 56155177, "link": "https://stackoverflow.com/questions/56155177/how-to-make-another-api-call-only-if-1st-api-call-fails-using-retrofit-rxjava", "title": "How to make another api call only if 1st api call fails using retrofit rxjava", "body": "<p>I am new to retrofit and rxjava. I am trying to achieve a very common use case using these 2 but not able to find the right operators to do. Use Case - I am making an API call to check if my access token is valid or not. If it is no more valid i get 401 unauthorized exception, at this point i want to make an API call to fetch new access token using refresh token. \nNote - The response type for both the API requests is different.</p>\n\n<p>How can i achieve this using retrofit and rxjava.</p>\n\n<p>I tried achieving it using flatMap, onErrorResume but not able to figure out the best way to do it.</p>\n"}, {"tags": ["firebase", "firebase-realtime-database", "kotlin", "firebase-authentication"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1557995790, "post_id": 56154195, "comment_id": 98955697, "body": "If you consider at some point to try using <a href=\"https://firebase.google.com/docs/firestore/\" rel=\"nofollow noreferrer\">Cloud Firestore</a>, here you can find a tutorial on how to create a complete and functional <a href=\"https://www.youtube.com/playlist?list=PLn2n4GESV0Ak1HiH0tTPTJXsOEy-5v9qb\" rel=\"nofollow noreferrer\">Firestore Chat App</a> using Kotlin."}, {"owner": {"reputation": 27, "user_id": 10316152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KA56XX0yLHw/AAAAAAAAAAI/AAAAAAAAARc/VQfOkoZ1VmI/photo.jpg?sz=128", "display_name": "salomo hutapea", "link": "https://stackoverflow.com/users/10316152/salomo-hutapea"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1558004787, "post_id": 56154195, "comment_id": 98960819, "body": "@AlexMamo thanks for the tutorial, maybe later I&#39;ll learn more how to use cloud firestore"}], "owner": {"reputation": 27, "user_id": 10316152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KA56XX0yLHw/AAAAAAAAAAI/AAAAAAAAARc/VQfOkoZ1VmI/photo.jpg?sz=128", "display_name": "salomo hutapea", "link": "https://stackoverflow.com/users/10316152/salomo-hutapea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1557940273, "creation_date": 1557939099, "last_edit_date": 1557940273, "question_id": 56154195, "link": "https://stackoverflow.com/questions/56154195/cannot-fetch-messages-from-another-user-firebasedatabase", "title": "Cannot fetch messages from another user FirebaseDatabase", "body": "<p>This is a simple chat messaging app, using Firebase Realtime Database and the Authentication. I have successfully created the database, but I cannot fetch the message from one user to another. Because, when I send the message/click the send button, it creates different nodes, I think its a string node with quotation mark in the name. The node structure I created is user-messages --> fromId(current user uid) --> toUid(to whom the messages are sent). </p>\n\n<p>To make more clear explanation, this is the screenshot of what happened.\n<a href=\"https://i.stack.imgur.com/DOlkJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DOlkJ.png\" alt=\"This is when I send message from the first user.\"></a><a href=\"https://i.stack.imgur.com/8VDFQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8VDFQ.png\" alt=\"Send message from the second user.\"></a></p>\n\n<p>I think the problem is, it creates a different nodes with the \"uid\", which means string. So the database has two nodes, one with the \"...\", and the other the normal one. For some info, I use some library such as Picasso image load, groupie, and parcelize.</p>\n\n<p>This is the source code for the ChatLogActivity</p>\n\n<pre><code>import...\n\nclass ChatLogActivity : AppCompatActivity() {\n\ncompanion object {\n    val TAG = \"ChatLog\"\n}\n\nval adapter = GroupAdapter&lt;ViewHolder&gt;()\nvar toUser: User? = null\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_chat_log)\n    recyclerview_chat_log.adapter = adapter\n    toUser = intent.getParcelableExtra(NewMessageActivity.USER_KEY)\n    titleChatLog.text = toUser?.nama\n\n    listenForMessages()\n    arrowBack.setOnClickListener {\n        finish()\n    }\n\n    send_button_chat_log.setOnClickListener {\n        Log.d(TAG, \"Attempt to send message.....\")\n        performSendMessage()\n    }\n}\n\nprivate fun listenForMessages() {\n    val fromId = FirebaseAuth.getInstance().uid\n    val toId = toUser?.uid\n    val ref = FirebaseDatabase.getInstance().getReference(\"/user-messages/$fromId/$toId\")\n    ref.addChildEventListener(object : ChildEventListener {\n        override fun onChildAdded(p0: DataSnapshot, p1: String?) {\n            val chatMessage = p0.getValue(ChatMessage::class.java)\n            if (chatMessage != null) {\n                Log.d(TAG, chatMessage.text)\n                if (chatMessage.fromId == FirebaseAuth.getInstance().uid) {\n                    val currentUser = LatestMessageActivity.currentUser?: return\n                    adapter.add(ChatFromItem(chatMessage.text, currentUser))\n                } else {\n                    adapter.add(ChatToItem(chatMessage.text, toUser!!))\n                }\n            }\n        }\n\n        override fun onCancelled(p0: DatabaseError) {\n\n        }\n\n        override fun onChildChanged(p0: DataSnapshot, p1: String?) {\n\n        }\n\n        override fun onChildMoved(p0: DataSnapshot, p1: String?) {\n\n        }\n\n        override fun onChildRemoved(p0: DataSnapshot) {\n\n        }\n    })\n}\n\nprivate fun performSendMessage() {\n    val text = edittext_chat_log.text.toString()\n    val fromId = FirebaseAuth.getInstance().uid\n    val user = intent.getParcelableExtra&lt;User&gt;(NewMessageActivity.USER_KEY)\n    val toId = user.uid\n    val ref = FirebaseDatabase.getInstance().getReference(\"/user-messages/$fromId/$toId\").push()\n    val toRef = FirebaseDatabase.getInstance().getReference(\"/user-messages/$toId/$fromId \").push()\n    if (fromId == null) return\n\n    val chatMessage = ChatMessage(ref.key!!, text, fromId, toId, System.currentTimeMillis() / 1000)\n    ref.setValue(chatMessage)\n        .addOnSuccessListener {\n            Log.d(TAG, \"Save our chat message: ${ref.key}\")\n            edittext_chat_log.text.clear()\n            recyclerview_chat_log.scrollToPosition(adapter.itemCount - 1)\n        }\n    toRef.setValue(chatMessage)\n}\n}\n\nclass ChatFromItem(val text: String, val user: User) : Item&lt;ViewHolder&gt;() {\noverride fun getLayout(): Int {\n    return R.layout.chat_from_row\n}\n\noverride fun bind(viewHolder: ViewHolder, position: Int) {\n    val uri = user.profileImageUrl\n    val targetImageView = viewHolder.itemView.imageViewFrom\n    Picasso.get().load(uri).into(targetImageView)\n    viewHolder.itemView.textViewFrom.text = text\n}\n}\n\nclass ChatToItem(val text: String, val user: User) : Item&lt;ViewHolder&gt;() {\noverride fun getLayout(): Int {\n    return R.layout.chat_to_row\n}\n\noverride fun bind(viewHolder: ViewHolder, position: Int) {\n    val uri = user.profileImageUrl\n    val targetImageView = viewHolder.itemView.imageViewTo\n    Picasso.get().load(uri).into(targetImageView)\n    viewHolder.itemView.textViewTo.text = text\n}\n}\n</code></pre>\n\n<p>And this is the ChatMessage, class that store the messages.</p>\n\n<pre><code>class ChatMessage(val id:String, val text: String, val fromId: String, val toId: String, val timeStamp: Long) {\nconstructor(): this(\"\", \"\", \"\", \"\", -1)\n}\n</code></pre>\n\n<p>I'm very glad if anyone can help this problem. Thank you</p>\n"}, {"tags": ["android", "kotlin", "types"], "answers": [{"comments": [{"owner": {"reputation": 1010, "user_id": 5336567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCTLx.jpg?s=128&g=1", "display_name": "SadeQ digitALLife", "link": "https://stackoverflow.com/users/5336567/sadeq-digitallife"}, "edited": false, "score": 0, "creation_date": 1557940606, "post_id": 56154147, "comment_id": 98938415, "body": "thanks, question edited ,can you help me again? plz!"}], "tags": [], "owner": {"reputation": 22909, "user_id": 2291, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/52c5b2df0b28f6efc9d50e4d0d47e42a?s=128&d=identicon&r=PG", "display_name": "Jon Adams", "link": "https://stackoverflow.com/users/2291/jon-adams"}, "is_accepted": false, "score": 1, "last_activity_date": 1557942052, "last_edit_date": 1557942052, "creation_date": 1557938906, "answer_id": 56154147, "question_id": 56154014, "link": "https://stackoverflow.com/questions/56154014/cast-an-object-into-specific-class-depend-on-when-called/56154147#56154147", "title": "cast an object into specific class depend on when called", "body": "<p>You're almost there. Either check for null, or better yet, use <code>is</code> or <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow noreferrer\"><code>when</code> and <code>is</code></a></p>\n\n<pre><code>// as:\nif(myobject.meta as ObjectA != null) Log.e(\"log\", myobject.meta.name)\nif(myobject.meta as ObjectB != null) Log.e(\"log\", myobject.meta.number)\n\n// is:\nval meta = myobject.meta\nif (meta is ObjectA) Log.e(\"log\", meta.somePropertyOfObjectA)\nif (meta is ObjectB) Log.e(\"log\", meta.somePropertyOfObjectB)\n\n// when:\nwhen (myobject.meta) {\n    is ObjectA -&gt; Log.e(\"log\", myobject.meta.name)\n    is ObjectB -&gt; Log.e(\"log\", myobject.meta.number)\n    else -&gt; throw Exception()\n}\n</code></pre>\n\n<p>However, this only works if the original type makes sense. If meta is of class ObjectC, and neither ObjectA nor ObjectB inherit from it, then it won't help. Without seeing your class code though, we can't help you there.</p>\n\n<p>But if that is the case, you may want to revisit your class design or code flow if the above won't work for you.</p>\n\n<p>EDIT: After the class info was added to the Question, it looks like you'll want to the first option, the <a href=\"https://kotlinlang.org/docs/reference/typecasts.html#unsafe-cast-operator\" rel=\"nofollow noreferrer\">unsafe cast</a> via <code>as</code> with a null check.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 3465272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533a801aaa65d74ef096339a5c45b349?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Dziedzic", "link": "https://stackoverflow.com/users/3465272/adam-dziedzic"}, "is_accepted": false, "score": 0, "last_activity_date": 1557952092, "creation_date": 1557952092, "answer_id": 56157155, "question_id": 56154014, "link": "https://stackoverflow.com/questions/56154014/cast-an-object-into-specific-class-depend-on-when-called/56157155#56157155", "title": "cast an object into specific class depend on when called", "body": "<p>It looks like what you need is a sealed class</p>\n\n<pre><code>sealed class Model() : GsonBaseModel()\n\nclass TypeA(val number: Int?) : Model()\nclass TypeB(val name: String?) : Model()\n\nwhen (myObject) {\n    is TypeA -&gt; log(myObject.number)\n    is TypeB -&gt; log(myObject.name)\n}\n</code></pre>\n"}], "owner": {"reputation": 1010, "user_id": 5336567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCTLx.jpg?s=128&g=1", "display_name": "SadeQ digitALLife", "link": "https://stackoverflow.com/users/5336567/sadeq-digitallife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1557952092, "creation_date": 1557938318, "last_edit_date": 1557940556, "question_id": 56154014, "link": "https://stackoverflow.com/questions/56154014/cast-an-object-into-specific-class-depend-on-when-called", "title": "cast an object into specific class depend on when called", "body": "<p>I have a class that one of properties can has 2 different types, How can I cast that variable to one of those classes that I want?</p>\n\n<pre><code>    class myObject{\n        var type: Int\n        var meta: Any? = null }\n\n   var myobject:myObject=myObject()\n        if(myobjetc.type ==1){\nval myObject = (myobjetc.meta) as ObjectA\n Log.e(\"log\",myObject.name)\n}\n        if(myobjetc.type ==2){\nval myObject = (myobjetc.meta) as ObjectB\n Log.e(\"log\",myObject.number)\n}\n</code></pre>\n\n<p>problem is that it cant cast.</p>\n\n<p><strong>EDITED</strong></p>\n\n<pre><code>class ObjectB: GsonBaseModel() {\nvar name: String? = null\n}\n\n    class ObjectA: GsonBaseModel() {\nvar number: Int? = null\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-button"], "answers": [{"tags": [], "owner": {"reputation": 707, "user_id": 10742340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t545m.jpg?s=128&g=1", "display_name": "KirstenLy", "link": "https://stackoverflow.com/users/10742340/kirstenly"}, "is_accepted": true, "score": 0, "last_activity_date": 1557939256, "creation_date": 1557939256, "answer_id": 56154229, "question_id": 56153657, "link": "https://stackoverflow.com/questions/56153657/how-to-return-materialbutton-default-border-color/56154229#56154229", "title": "How to return MaterialButton default border color?", "body": "<p>Ok, i get it myself.</p>\n\n<p>After goes deeper i call it before button clicked:</p>\n\n<pre><code>Timber.e(btn_schemes_1.strokeColor.toString())\n</code></pre>\n\n<p>And get:</p>\n\n<pre><code>ColorStateList{mThemeAttrs=nullmChangingConfigurations=1073742848mStateSpecs=[[16842912], [-16842912]]mColors=[-16743049, 520093696]mDefaultColor=-16743049}\n</code></pre>\n\n<p>So 520093696 is my color. Google says it <code>black12 constant</code>, presented by <code>0x1F000000</code></p>\n\n<p>And after </p>\n\n<p><code>private var defaultColor: Int = 0x1F000000</code></p>\n\n<p>All works.</p>\n"}], "owner": {"reputation": 707, "user_id": 10742340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t545m.jpg?s=128&g=1", "display_name": "KirstenLy", "link": "https://stackoverflow.com/users/10742340/kirstenly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56154229, "answer_count": 1, "score": 0, "last_activity_date": 1557939256, "creation_date": 1557936945, "question_id": 56153657, "link": "https://stackoverflow.com/questions/56153657/how-to-return-materialbutton-default-border-color", "title": "How to return MaterialButton default border color?", "body": "<p>I have two buttons, and i want to realize blue border on pressed one. When button pressed, it't border become blue, border of another button return to default.</p>\n\n<p>I can't return default border correct. I write function, but is works wrong.</p>\n\n<p>My button(second is the same with another id and text):</p>\n\n<pre><code> &lt;com.google.android.material.button.MaterialButton\n            android:id=\"@+id/btn_schemes_1\"\n            style=\"@style/Buttons.Schemes\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"@dimen/margin_4\"\n            android:layout_weight=\"1\"\n            android:text=\"@string/schemes_1\"\n            app:icon=\"@drawable/ic_schemes_1\" /&gt;\n</code></pre>\n\n<p>Style has nothing interesting:</p>\n\n<pre><code>&lt;style name=\"Buttons.Schemes\" parent=\"Widget.MaterialComponents.Button.OutlinedButton\"&gt;\n        &lt;item name=\"android:typeface\"&gt;sans&lt;/item&gt;\n        &lt;!--android:fontFamily=\"sans-serif-condensed-medium\"--&gt;\n        &lt;item name=\"android:textColor\"&gt;@android:color/black&lt;/item&gt;\n        &lt;item name=\"android:letterSpacing\"&gt;0&lt;/item&gt;\n        &lt;item name=\"iconTint\"&gt;@null&lt;/item&gt;\n        &lt;item name=\"backgroundTint\"&gt;@android:color/white&lt;/item&gt;\n    &lt;/style&gt;\n</code></pre>\n\n<p>My last realization was about to find and remember default border value before first click happens, so at the first i write:</p>\n\n<pre><code>private var defaultColor: Int = 0\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>defaultColor = btn_schemes_1.strokeColor.defaultColor\n</code></pre>\n\n<p>And function, called when one of button clicked:</p>\n\n<pre><code>  private fun setButtonsBorder(buttonNumber: Int) {\n        when (buttonNumber) {\n            1 -&gt; {\n                btn_schemes_1.strokeColor = ColorStateList.valueOf(Color.BLUE)\n                btn_schemes_1.strokeWidth = 2\n\n                btn_schemes_2.strokeColor = ColorStateList.valueOf(defaultColor)\n                btn_schemes_2.strokeWidth = 1\n            }\n            2 -&gt; {\n                btn_schemes_1.strokeColor = ColorStateList.valueOf(defaultColor)\n                btn_schemes_1.strokeWidth = 1\n\n                btn_schemes_2.strokeColor = ColorStateList.valueOf(Color.BLUE)\n                btn_schemes_2.strokeWidth = 2\n            }\n        }\n    }\n</code></pre>\n\n<p>But this failed too, because default color not \"those\" default at fact. When i set it, i found it's just <code>colorPrimary</code>.</p>\n\n<p>How can i find this default color or write method to retutn border color to default?</p>\n"}, {"tags": ["android", "kotlin", "singleton"], "answers": [{"comments": [{"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1558344373, "post_id": 56157388, "comment_id": 99056403, "body": "Yes, seems that is initialized everytime I add an element. Look my new approach that is doing correctly"}, {"owner": {"reputation": 31, "user_id": 3465272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533a801aaa65d74ef096339a5c45b349?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Dziedzic", "link": "https://stackoverflow.com/users/3465272/adam-dziedzic"}, "reply_to_user": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1558382034, "post_id": 56157388, "comment_id": 99075034, "body": "Oh, that&#39;s great! But how do you initialize <code>Repository</code>? Is it initialized multiple times? What framework are you using?"}], "tags": [], "owner": {"reputation": 31, "user_id": 3465272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533a801aaa65d74ef096339a5c45b349?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Dziedzic", "link": "https://stackoverflow.com/users/3465272/adam-dziedzic"}, "is_accepted": false, "score": 0, "last_activity_date": 1557953181, "creation_date": 1557953181, "answer_id": 56157388, "question_id": 56153579, "link": "https://stackoverflow.com/questions/56153579/how-to-save-a-list-by-element-in-a-singleton-object-in-kotlin/56157388#56157388", "title": "How to save a list by element in a Singleton object in Kotlin", "body": "<p>Could you show example code? I was not able to reproduce issue. </p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    println(\"Hello, world!\")\n    val repo = VoucherRepository()\n\n    println(VoucherRepository.Singleton.vouchers) // []\n    repo.addProductToShoppingCart(\"aaa\")\n    println(VoucherRepository.Singleton.vouchers) // [aaa]\n    repo.addProductToShoppingCart(\"bbb\")\n    println(VoucherRepository.Singleton.vouchers) // [aaa, bbb]\n\n    VoucherRepository().addProductToShoppingCart(\"ccc\")\n    println(VoucherRepository.Singleton.vouchers) // [aaa, bbb, ccc]\n    println(repo.getProductsInShoppinCart()) // [aaa, bbb, ccc]\n    println(VoucherRepository().getProductsInShoppinCart()) // [aaa, bbb, ccc]\n\n}\n\nclass VoucherRepository {\n\n    object Singleton {\n        var vouchers: MutableList&lt;String&gt; = mutableListOf()\n    }\n\n\n    fun addProductToShoppingCart(voucherProduct: String) {\n        Singleton.vouchers.add(voucherProduct)\n    }\n\n    fun getProductsInShoppinCart() : List&lt;String&gt; {\n        return Singleton.vouchers\n    }\n}\n</code></pre>\n\n<p>It looks like your singleton was released from memory somehow and initialized again and again, but without more code I cannot help.</p>\n"}, {"tags": [], "owner": {"reputation": 445, "user_id": 10003471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q2RTk.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/10003471/ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1590058704, "last_edit_date": 1590058704, "creation_date": 1590057374, "answer_id": 61932563, "question_id": 56153579, "link": "https://stackoverflow.com/questions/56153579/how-to-save-a-list-by-element-in-a-singleton-object-in-kotlin/61932563#61932563", "title": "How to save a list by element in a Singleton object in Kotlin", "body": "<p><strong>This technique is similar to builder pattern</strong></p>\n\n<hr>\n\n<p>it will save all the Products to a temporary MutableList and after successful addition of all the products to tempVauchers it will initialize the singleton and you can get the singleton by calling getVauchers()*</p>\n\n<p><strong>Singleton Class</strong></p>\n\n<pre><code> class VoucherRepository {\n      object Singleton {\n          var vouchers: MutableList&lt;Product&gt; = mutableListOf&lt;Product&gt;()\n       }\n    }\n</code></pre>\n\n<p><strong>Use blow code to add products</strong></p>\n\n<pre><code> var tempVauchers: MutableList&lt;Product&gt; = mutableListOf&lt;Product&gt;()\n\n        fun compileCart(voucherProduct: String, isComplete: Boolean){\n            if(!isComplete){\n                tempVauchers.add(voucherProduct)\n            }else{\n                VoucherRepository.vouchers = tempVauchers\n            }\n\n        }\n</code></pre>\n\n<p><strong>get Singleton</strong></p>\n\n<pre><code>fun getVauchers(): MutableList&lt;Product&gt; {\n    return VoucherRepository.vouchers\n }\n</code></pre>\n"}], "owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1590058704, "creation_date": 1557936589, "last_edit_date": 1558344414, "question_id": 56153579, "link": "https://stackoverflow.com/questions/56153579/how-to-save-a-list-by-element-in-a-singleton-object-in-kotlin", "title": "How to save a list by element in a Singleton object in Kotlin", "body": "<p>I have a Singleton class where I have two methods, one to save elements in a singleton list and another one to get all save products. Notice that the products will be save one by one.</p>\n\n<p>My problem is that I always save the last element and only have one in the singleton. How can I do it to save all the elements that I want to put in the singleton.</p>\n\n<pre><code>class VoucherRepository {\n\n    object Singleton {\n        var vouchers: MutableList&lt;Product&gt; = mutableListOf&lt;Product&gt;()\n    }\n\n\n    fun addProductToShoppingCart(voucherProduct: Product){\n        Singleton.vouchers.add(voucherProduct)\n    }\n\n    fun getProductsInShoppinCart() : List&lt;Product&gt;?{\n        return Singleton.vouchers\n    }\n}\n</code></pre>\n\n<p>UPDATE</p>\n\n<pre><code>class ProductRepository {\n\n    companion object Singleton {\n        var vouchers: MutableList&lt;Product&gt; = mutableListOf&lt;Product&gt;()\n\n        fun addProductToShoppingCart(voucherProduct: Product){\n            vouchers.add(voucherProduct)\n        }\n\n        fun getProductsInShoppinCart() : List&lt;Product&gt;?{\n            return vouchers\n        }\n\n        fun cleanProductsInShoppinCart(){\n            vouchers.clear()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "tableview"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8110225, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fpKL3T9JVPI/AAAAAAAAAAI/AAAAAAAAACM/eRRM7febUqo/photo.jpg?sz=128", "display_name": "Varun Khatri", "link": "https://stackoverflow.com/users/8110225/varun-khatri"}, "is_accepted": false, "score": 2, "last_activity_date": 1579942704, "creation_date": 1579942704, "answer_id": 59907776, "question_id": 56153364, "link": "https://stackoverflow.com/questions/56153364/remove-the-cornerview-tableview/59907776#59907776", "title": "Remove the cornerview tableview", "body": "<p>If you're okay with row header to not be visible either, try this:</p>\n\n<pre><code>mTableView.rowHeaderWidth = 0;\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 263146, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c50e1d2964634c4149af9dd245deaefb?s=128&d=identicon&r=PG", "display_name": "ronnie173", "link": "https://stackoverflow.com/users/263146/ronnie173"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1579942704, "creation_date": 1557935707, "last_edit_date": 1557997896, "question_id": 56153364, "link": "https://stackoverflow.com/questions/56153364/remove-the-cornerview-tableview", "title": "Remove the cornerview tableview", "body": "<p>[tableview] [android] Anyone know how to remove the cornerview from this tableview plugin <a href=\"https://github.com/evrencoskun/TableView\" rel=\"nofollow noreferrer\">https://github.com/evrencoskun/TableView</a></p>\n\n<p>I have tried to set an empty view</p>\n\n<pre><code>  override fun onCreateCornerView(): View {\n       // return LayoutInflater.from(mContext).inflate(R.layout.tableview_corner_layout, null, false)\n        return View(mContext)\n    }\n</code></pre>\n\n<p>I don't want the cornerview to show at all.</p>\n"}, {"tags": ["gradle", "kotlin", "gradle-kotlin-dsl", "kotlin-dsl", "http4k"], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 10143127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afd59853dcbdf822492c6c3f7adf599?s=128&d=identicon&r=PG&f=1", "display_name": "David D", "link": "https://stackoverflow.com/users/10143127/david-d"}, "is_accepted": true, "score": 3, "last_activity_date": 1568617922, "creation_date": 1568617922, "answer_id": 57951962, "question_id": 56152800, "link": "https://stackoverflow.com/questions/56152800/error-with-building-fatjar-using-kotlin-dsl/57951962#57951962", "title": "Error with Building Fatjar Using Kotlin DSL", "body": "<p>The problem here is that during the process of merging all the JARs in to one FatJAR, the contents of the META-INF folder in the http4k-core JAR (which contains the mime.types file used for matching a request to a content type) is somehow omitted or overridden by the merging process. </p>\n\n<p>This isn't http4k specific and is (quite) a common problem with the use of the shadow-jar gradle plugin. But it can be easily solved by just correctly configuring the plugin as below:</p>\n\n<pre><code>shadowJar {\n    mergeServiceFiles() // &lt;-- this!\n}\n</code></pre>\n\n<p>From the http4k side, the exception message generated has been changed to highlight this problem.</p>\n"}], "owner": {"reputation": 785, "user_id": 714122, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f8e00794e0519fea9b0888ee92ec78ff?s=128&d=identicon&r=PG", "display_name": "Dan Largo", "link": "https://stackoverflow.com/users/714122/dan-largo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 57951962, "answer_count": 1, "score": 2, "last_activity_date": 1568617922, "creation_date": 1557933671, "question_id": 56152800, "link": "https://stackoverflow.com/questions/56152800/error-with-building-fatjar-using-kotlin-dsl", "title": "Error with Building Fatjar Using Kotlin DSL", "body": "<p>I am trying to build a fatjar using ShadowJar. My app and gradle code are below. I'm using Gradle 5.0 for the build. When I run ./gradlew run, the code works. When I run 'gradle shadowjar', and run the fatjar using 'java -jar' in the 'build/lib' folder, I get the below error. </p>\n\n<p>I'm guessing the dependencies are not getting loaded in the fatjar? I have also used Groovy to build the Gradle file, and I get the same error.</p>\n\n<p>Am I correct in that I am not including all of the dependencies in the fatjar file? If that is the case, any idea on how to modify the Gradle file to make sure this is included?</p>\n\n<p>Gradle Kotlin DSL</p>\n\n<pre><code>import com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar\nimport org.jetbrains.kotlin.gradle.tasks.KotlinCompile\n\nplugins {\n    // Apply the Kotlin JVM plugin to add support for Kotlin on the JVM.\n    id(\"org.jetbrains.kotlin.jvm\").version(\"1.3.21\")\n\n    id(\"com.github.johnrengelman.shadow\") version \"5.0.0\"\n\n    // Apply the application plugin to add support for building a CLI application.\n    application\n}\n\nrepositories {\n    // Use jcenter for resolving your dependencies.\n    // You can declare any Maven/Ivy/file repository here.\n    jcenter()\n    mavenCentral()\n}\n\ndependencies {\n    // Use the Kotlin JDK 8 standard library.\n    implementation(\"org.jetbrains.kotlin:kotlin-stdlib-jdk8\")\n\n    // Use the Kotlin test library.\n    testImplementation(\"org.jetbrains.kotlin:kotlin-test\")\n\n    // Use the Kotlin JUnit integration.\n    testImplementation(\"org.jetbrains.kotlin:kotlin-test-junit\")\n\n    implementation(\"org.http4k:http4k-core:3.143.1\")\n    implementation(\"org.http4k:http4k-server-jetty:3.143.1\")\n    implementation(\"org.http4k:http4k-client-okhttp:3.143.1\")\n    implementation(\"org.http4k:http4k-client-apache:3.143.1\")\n\n}\n\ntasks.withType&lt;KotlinCompile&gt; {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n\napplication {\n    // Define the main class for the application.\n    mainClassName = \"com.benito.AppKt\"\n}\n\ntasks.withType&lt;ShadowJar&gt;  {\n    archiveBaseName.set(\"${project.name}-all\")\n}\n</code></pre>\n\n<p>Kotlin Code</p>\n\n<pre><code>import org.http4k.core.HttpHandler\nimport org.http4k.core.Method\nimport org.http4k.core.Request\nimport org.http4k.core.Response\nimport org.http4k.core.Status.Companion.OK\nimport org.http4k.routing.bind\nimport org.http4k.routing.path\nimport org.http4k.routing.routes\nimport org.http4k.server.Jetty\nimport org.http4k.server.asServer\n\nfun main(args: Array&lt;String&gt;) {\n    println(\"Starting\")\n\n\n    val app: HttpHandler = routes(\n        \"/ping\" bind Method.GET to { _: Request -&gt; Response(OK).body(\"pong!\") },\n        \"/greet/{name}\" bind Method.GET to { req: Request -&gt;\n            val path: String? = req.path(\"name\")\n            Response(OK).body(\"hello ${path ?: \"anon!\"}\")\n        }\n    )\n    app.asServer(Jetty(8080)).start()\n}\n</code></pre>\n\n<p>Error Message</p>\n\n<pre><code>2019-05-15 11:15:13.925:INFO::main: Logging initialized @287ms to org.eclipse.jetty.util.log.StdErrLog\n2019-05-15 11:15:14.039:INFO:oejs.Server:main: jetty-9.4.z-SNAPSHOT; built: 2019-04-29T20:42:08.989Z; git: e1bc35120a6617ee3df052294e433f3a25ce7097; jvm 1.8.0_211-b12\nException in thread \"main\" java.lang.ExceptionInInitializerError\n    at org.eclipse.jetty.http.MimeTypes$Type.&lt;init&gt;(MimeTypes.java:103)\n    at org.eclipse.jetty.http.MimeTypes$Type.&lt;clinit&gt;(MimeTypes.java:58)\n    at org.eclipse.jetty.http.MimeTypes.&lt;clinit&gt;(MimeTypes.java:191)\n    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:836)\n    at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:278)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:167)\n    at org.eclipse.jetty.server.Server.start(Server.java:418)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:113)\n    at org.eclipse.jetty.server.Server.doStart(Server.java:382)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n    at org.http4k.server.Jetty$toServer$3.start(jetty.kt:33)\n    at com.benito.AppKt.main(App.kt:38)\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 1\n    at org.eclipse.jetty.http.PreEncodedHttpField.&lt;clinit&gt;(PreEncodedHttpField.java:70)\n    ... 14 more\n</code></pre>\n"}, {"tags": ["android", "kotlin", "watermark", "android-ffmpeg", "video-watermarking"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1557951248, "post_id": 56152464, "comment_id": 98942995, "body": "see <a href=\"https://stackoverflow.com/questions/55589904/ffmpeg-adding-image-watermark-to-video-process-is-very-slow/55598421\" title=\"ffmpeg adding image watermark to video process is very slow\">stackoverflow.com/questions/55589904/&hellip;</a>"}, {"owner": {"reputation": 364, "user_id": 9595956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nVX0C.png?s=128&g=1", "display_name": "Sekhon123", "link": "https://stackoverflow.com/users/9595956/sekhon123"}, "edited": false, "score": 0, "creation_date": 1568877023, "post_id": 56152464, "comment_id": 102415912, "body": "{ &quot;-i&quot;,inputPath.mp4, &quot;-i&quot;, imagepath.jpg,&quot;-filter_complex&quot;, &quot;[1] scale=70:70 [tmp];[0][tmp] overlay=main_w-overlay_w-10:main_h-overlay_h-10&quot;,output.mp4} try this it will help you."}], "owner": {"reputation": 11, "user_id": 4070005, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002117405796/picture?type=large", "display_name": "Devarala Ravi", "link": "https://stackoverflow.com/users/4070005/devarala-ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557933310, "creation_date": 1557932702, "last_edit_date": 1557933310, "question_id": 56152464, "link": "https://stackoverflow.com/questions/56152464/watermarking-to-video-android-using-ffmpeg", "title": "watermarking to video Android using ffmpeg", "body": "<p>I am using ffmpeg library for water marking in android, somehow it is taking high amount of time (like 5MB video taking 1 minute of time). Let me know if you have any suggestions.</p>\n\n<p>gradle dependency: <code>implementation 'com.writingminds:FFmpegAndroid:0.3.2'</code></p>\n\n<p>slow code: <code>val command = arrayOf(\"-i\", srcVideo, \"-i\", watermarkImgPath, \"-filter_complex\", \"overlay=20:20\", outPutVideo)</code></p>\n"}, {"tags": ["kotlin", "android-recyclerview", "linearlayoutmanager"], "answers": [{"tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": true, "score": 1, "last_activity_date": 1557932807, "creation_date": 1557932807, "answer_id": 56152502, "question_id": 56152357, "link": "https://stackoverflow.com/questions/56152357/how-can-i-fix-the-error-java-lang-illegalstateexception-recyclerview-must-not/56152502#56152502", "title": "How can i fix the error &#39;java.lang.IllegalStateException: RecyclerView must not be null&#39;", "body": "<p>You should change <code>LinearLayoutManager(this)</code> to <code>LinearLayoutManager(this.context)</code></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9656117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406bc430f4981797952c12e0d2cbf489?s=128&d=identicon&r=PG&f=1", "display_name": "Obi Weng", "link": "https://stackoverflow.com/users/9656117/obi-weng"}, "is_accepted": false, "score": 1, "last_activity_date": 1557977238, "creation_date": 1557977238, "answer_id": 56160373, "question_id": 56152357, "link": "https://stackoverflow.com/questions/56152357/how-can-i-fix-the-error-java-lang-illegalstateexception-recyclerview-must-not/56160373#56160373", "title": "How can i fix the error &#39;java.lang.IllegalStateException: RecyclerView must not be null&#39;", "body": "<p>For your LinearLayoutManager, Fragments aren't extending Context so you cant use <code>this</code> as parameters. Instead, use this:</p>\n\n<pre><code>waitingRecyclerView.layoutManager = LinearLayoutManager(context!!)\n</code></pre>\n\n<p>For the runtime error, \"RecyclerView must not be null\", it's because you're accessing the properties of the <code>waitingRecyclerView</code> inside the <code>onCreateView</code> callback. The layout hasn't been initialized yet. You can move your initialization of <code>waitingRecyclerView</code> to the 'onViewCreated' callback.</p>\n\n<p>If you must initialize the <code>waitingRecyclerView</code> inside <code>onCreateView</code> you can access the <code>waitingRecyclerView</code> via the object you created when inflating the layout, i.e. <code>inflate</code>:</p>\n\n<pre><code>inflate.waitingRecyclerView.layoutManager = LinearLayoutManager(context!!)\ninflate.waitingRecyclerView.adapter = adapter\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8288717, "user_type": "registered", "profile_image": "https://graph.facebook.com/1898459917073839/picture?type=large", "display_name": "Alexis Leleu", "link": "https://stackoverflow.com/users/8288717/alexis-leleu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2951, "favorite_count": 0, "accepted_answer_id": 56152502, "answer_count": 2, "score": 0, "last_activity_date": 1557977238, "creation_date": 1557932382, "last_edit_date": 1557946537, "question_id": 56152357, "link": "https://stackoverflow.com/questions/56152357/how-can-i-fix-the-error-java-lang-illegalstateexception-recyclerview-must-not", "title": "How can i fix the error &#39;java.lang.IllegalStateException: RecyclerView must not be null&#39;", "body": "<p>I have a recyclerView where I send data with my adapter but got the error</p>\n\n<blockquote>\n  <p><code>RecyclerView must not be null</code></p>\n</blockquote>\n\n<p>code with my adpater:</p>\n\n<pre><code>class InWaitingFragment : Fragment() {\n\n    private lateinit var adapter: FastItemAdapter&lt;BarterWaitingItem&gt;\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n\n    ): View? {\n\n        println(\"CONTAINER:  \" + container)\n\n        val inflate: FrameLayout = inflater.inflate(R.layout.fragment_in_waiting, container, false) as FrameLayout\n\n        adapter = FastItemAdapter&lt;BarterWaitingItem&gt;()\n\n       waitingRecyclerView.layoutManager = LinearLayoutManager(this)\n\n       waitingRecyclerView.adapter = adapter\n\n        val retrofit = Retrofit.Builder()\n            .baseUrl(\"http://10.93.182.95:8888\")\n            .addConverterFactory(GsonConverterFactory.create())\n            .build()\n\n        val service = retrofit.create(RequestManager::class.java)\n\n        val action  = service.getPending()\n\n\n        action.enqueue(object: Callback&lt;ArrayList&lt;GetBarterResponse&gt;&gt; {\n            override fun onResponse(\n                call: Call&lt;ArrayList&lt;GetBarterResponse&gt;&gt;,\n                response: Response&lt;ArrayList&lt;GetBarterResponse&gt;&gt;\n            ) {\n                val allBarter = response.body()\n                if(allBarter != null){\n                    for (c in allBarter){\n                        println(\"OBJET: ${c.buyer_object.title}\")\n                    }\n\n                    println(\"ONRESPONSE En attente: \" + response.body().toString())\n                }\n            }\n\n            override fun onFailure(call: Call&lt;ArrayList&lt;GetBarterResponse&gt;&gt;, t: Throwable) {\n                println(\"ONFAILURE En attente: \" + t.toString())\n            }\n        })\n\n        return inflate\n    }\n\n\n}\n</code></pre>\n\n<p>got an error to on the this of <code>LinearLayoutManager(this)</code>, says:</p>\n\n<blockquote>\n<pre><code>`require:Context!\n Founds: InWaitingFragment\n</code></pre>\n</blockquote>\n"}, {"tags": ["java", "curl", "kotlin", "jsoup", "apache-httpclient-4.x"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1557938629, "post_id": 56152139, "comment_id": 98937523, "body": "if the <a href=\"https://jsoup.org/apidocs/org/jsoup/Connection.html#data-java.lang.String-\" rel=\"nofollow noreferrer\"><code>data</code></a>-methods do not work for you (i.e. you really only need to send raw binary data), you may be out of luck for the moment.. there is an <a href=\"https://github.com/jhy/jsoup/issues/1122\" rel=\"nofollow noreferrer\">issue regarding binary data in <code>requestBody</code></a>, but no comment or solution to it yet. If <code>requestBody</code> would be a <code>ByteArray</code> instead of <code>String</code>, it could already work out of the box (<a href=\"https://github.com/jhy/jsoup/blob/e499559601270be462bbcc665014dc061032134f/src/main/java/org/jsoup/helper/HttpConnection.java#L1062\" rel=\"nofollow noreferrer\">related line</a>)"}, {"owner": {"reputation": 182, "user_id": 4948967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23240e32ba0037fa7b61cbc1a3ded1eb?s=128&d=identicon&r=PG&f=1", "display_name": "Adrenal1ne", "link": "https://stackoverflow.com/users/4948967/adrenal1ne"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1557987578, "post_id": 56152139, "comment_id": 98951582, "body": "@Roland , And what about apache client ?"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1557991987, "post_id": 56152139, "comment_id": 98953648, "body": "that shouldn&#39;t be a problem... doesn&#39;t Jsoup use it already? Nonetheless, applying a fix so that binary data in the request (i.e. <code>byte[]</code>) is supported too, shouldn&#39;t be that much of a problem and would basically solve <a href=\"https://github.com/jhy/jsoup/issues/1122\" rel=\"nofollow noreferrer\">issue #1122</a> ... it uses a <code>BufferedWriter</code> on the linked line (see first comment), but the <code>OutputStream</code> is available there as well, so we may just write the <code>byte[]</code> directly to the <code>body</code> and overload the <code>requestBody</code> allowing passing <code>InputStream</code> or <code>byte[]</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 182, "user_id": 4948967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23240e32ba0037fa7b61cbc1a3ded1eb?s=128&d=identicon&r=PG&f=1", "display_name": "Adrenal1ne", "link": "https://stackoverflow.com/users/4948967/adrenal1ne"}, "edited": false, "score": 0, "creation_date": 1557997833, "post_id": 56163486, "comment_id": 98956834, "body": "Thx. I uploaded the picture myself to instagram ..... yahuuuuuuuuuuuuuu It works."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 1, "last_activity_date": 1557993026, "creation_date": 1557993026, "answer_id": 56163486, "question_id": 56152139, "link": "https://stackoverflow.com/questions/56152139/how-to-add-param-request-payload-to-post-request/56163486#56163486", "title": "How to add param &#39;request payload&#39; to post request?", "body": "<p>As mentioned also in the comments. As for now this doesn't work with Jsoup. There is an <a href=\"https://github.com/jhy/jsoup/issues/1122\" rel=\"nofollow noreferrer\">open issue</a> regarding this and the fix might be as easy as changing the <code>Request.body</code> to <code>byte[]</code> and overload the <code>requestBody</code>-methods appropriately (of course using the <code>OutputStream</code> instead of the <code>BufferedWriter</code> where appropriate).</p>\n\n<p>So you need to use an alternative, if you do not want to supply a pull request. Using apache httpclient this alternative could look as follows:</p>\n\n<pre><code>HttpClients.createDefault().use {client -&gt;\n    val post = HttpPost(\"yourUri\").apply {\n        entity = ByteArrayEntity(File(\"yourFile\").readBytes())\n        // addHeader or setHeaders ... \n        addHeader(\"headerName\", \"value\")\n        // ... all your headers...\n    }\n\n    client.execute(post)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11934838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fff100da96013324fd486da51e90388?s=128&d=identicon&r=PG&f=1", "display_name": "clane", "link": "https://stackoverflow.com/users/11934838/clane"}, "reply_to_user": {"reputation": 22888, "user_id": 7606764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff66904cb49ba020965898e8dd6b9d1?s=128&d=identicon&r=PG&f=1", "display_name": "Andronicus", "link": "https://stackoverflow.com/users/7606764/andronicus"}, "edited": false, "score": 0, "creation_date": 1565944077, "post_id": 57520342, "comment_id": 101509397, "body": "what  is  request binary"}, {"owner": {"reputation": 1, "user_id": 11934838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fff100da96013324fd486da51e90388?s=128&d=identicon&r=PG&f=1", "display_name": "clane", "link": "https://stackoverflow.com/users/11934838/clane"}, "reply_to_user": {"reputation": 22888, "user_id": 7606764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff66904cb49ba020965898e8dd6b9d1?s=128&d=identicon&r=PG&f=1", "display_name": "Andronicus", "link": "https://stackoverflow.com/users/7606764/andronicus"}, "edited": false, "score": 0, "creation_date": 1565944121, "post_id": 57520342, "comment_id": 101509417, "body": "do  you have a demo use this url ,<a href=\"https://www.instagram.com/rupload_igphoto/fb_uploader_\" rel=\"nofollow noreferrer\">instagram.com/rupload_igphoto/fb_uploader_</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 11934838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fff100da96013324fd486da51e90388?s=128&d=identicon&r=PG&f=1", "display_name": "clane", "link": "https://stackoverflow.com/users/11934838/clane"}, "is_accepted": false, "score": 0, "last_activity_date": 1565942027, "last_edit_date": 1565942027, "creation_date": 1565939591, "answer_id": 57520342, "question_id": 56152139, "link": "https://stackoverflow.com/questions/56152139/how-to-add-param-request-payload-to-post-request/57520342#57520342", "title": "How to add param &#39;request payload&#39; to post request?", "body": "<p>Return this:</p>\n\n<pre><code>{\n    \"debug_info\": {\n        \"retriable\": true,\n        \"type\": \"PartialRequestError\",\n        \"message\": \"Partial request (did not match length of file)\"\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 182, "user_id": 4948967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23240e32ba0037fa7b61cbc1a3ded1eb?s=128&d=identicon&r=PG&f=1", "display_name": "Adrenal1ne", "link": "https://stackoverflow.com/users/4948967/adrenal1ne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 1, "accepted_answer_id": 56163486, "answer_count": 2, "score": 1, "last_activity_date": 1565942027, "creation_date": 1557931631, "question_id": 56152139, "link": "https://stackoverflow.com/questions/56152139/how-to-add-param-request-payload-to-post-request", "title": "How to add param &#39;request payload&#39; to post request?", "body": "<p>How to create this request from CURL with Jsoup or apache httpClient?</p>\n\n<pre><code>curl 'https://www.instagram.com/rupload_igphoto/fb_uploader_1557924189090' \n-H 'cookie: mid=XNvymQAEAAFb4YRR4JkElxTB8I2_; csrftoken=IEpfr1jO1kB4EOFblQE285c9h5vD1LSh; ds_user_id=12828973541; sessionid=12828973541%3AXYcFYbRfWuitX7%3A23; rur=FRC; urlgen=\"{\\\"83.242.226.146\\\": 8359}:1hQtFJ:UiVB7Sl3c0NxnZh7VB9XujhuDGc\"' \n-H 'origin: https://www.instagram.com' \n-H 'accept-encoding: gzip, deflate, br' \n-H 'accept-language: ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7' \n-H 'user-agent: Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1' \n-H 'x-requested-with: XMLHttpRequest' \n-H 'x-csrftoken: IEpfr1jO1kB4EOFblQE285c9h5vD1LSh' \n-H 'x-ig-app-id: 1217981644879628' \n-H 'x-entity-name: fb_uploader_1557924189090' \n-H 'offset: 0' \n-H 'x-instagram-ajax: 748957cebea4' \n-H 'content-type: image/jpeg' \n-H 'accept: */*' \n-H 'authority: www.instagram.com' \n-H 'x-instagram-rupload-params: {\"media_type\":1,\"upload_id\":\"1557924189090\",\"upload_media_height\":1080,\"upload_media_width\":1079}' \n-H 'x-entity-length: 16620' \n-H 'referer: https://www.instagram.com/create/details/'\n--data-binary $'\u00ff\u00d8\u00ff\u00e0\\u00\\u10JFIF\\u00\\u01\\u01\\u00\\u00\\u01\\u00\\u01\\u00\\u00\u00ff\u00db\\u00C\\u00\\u03\\u02\\u02\\u02\\u02\\u02\\u03\\u02\\u02\\u02\\u03\\u03\\u03\\u03\\u04\\u06\\u04\\u04\\u04\\u04\\u04\\u08\\u06\\u06\\u05\\u06\\u09\\u08\\n\\n\\u09\\u08\\u09\\u09\\n\\u0c\\u0f\\u0c\\n\\u0b\\u0e\\u0b\\u09\\u09\\r\\u11\\r\\u0e\\u0f\\u10\\u10\\u11\\u10\\n\\u0c\\u12\\u13\\u12\\u10\\u13\\u0f\\u10\\u10\\u10\u00ff\u00db\\u00C\\u01\\u03\\u03\\u03\\u04\\u03\\u04\\u08\\u04\\u04\\u08\\u10\\u0b\\u09\\u0b\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\\u10\u00ff\u00c0\\u00\\u11\\u08\\u048\\u047\\u03\\u01\"\\u00\\u02\\u11\\u01\\u03\\u11\\u01\u00ff\u00c4\\u00\\u1a\\u00\\u01\\u01\\u01\\u01\\u01\\u01\\u01\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u02\\u01\\u03\\u04\\u05\\u08\u00ff\u00c4\\u00\\u1f\\u10\\u01\\u01\\u00\\u02\\u03\\u01\\u01\\u01\\u01\\u01\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u01\\u111\\u02\\u12AQa\\u21q\"\u00ff\u00c4\\u00\\u17\\u01\\u01\\u01\\u01\\u01\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u01\\u02\\u04\u00ff\u00c4\\u00\\u1c\\u11\\u01\\u00\\u02\\u03\\u01\\u01\\u01\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u01\\u11\\u211qAaQ\u00ff\u00da\\u00\\u0c\\u03\\u01\\u00\\u02\\u11\\u03\\u11\\u00?\\u00\u00fd\u00f6\\u03\\u89\u00da\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u02n\u00d4\\u9b\u00b0`\\u00\\u00\\u09\u00bbcn\u00d8\\u00\\u00]%WI\\u00\\u00\\u19t\u00d6]\\u02@\\u00\\u00o\\u1d\u00a9&lt;v\u00a0\\u00\\u07\u00a0\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u017jM\u00d80\\u00\\u00\\u04\u00dd\u00b1\u00b7l\\u00\\u00.\\u92\u00ab\u00a4\\u80\\u00\\u0c\u00bak.\\u81 \\u00\\u007\\u8e\u00d4\\u9e;P\\u00\\u03\u00d0\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u9b\u00b5\\'\\u900\\u00\\u00\\u04\u00dd\u00b1V$\\u00\\u00\u00baJ\\u8b2\\u09\\u0b0\\u00\u00cb\u00a6\\u80\\u81VJ\u00cb(01U8\\u838\u00ed@\\u00\\u00\u00f4\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u002\u00e9\u00a0 m\\u98\u00ac\\u00\\u00\\u19c@@\u00ab2\u00cb0\\u0c\\u00\\u06^?\\u1a\\u02E3\u00af\u00c0`b\\u80\\u00\\u00\u00de\u00b5\u00b8\\u90\\u19%\\u1a\\u03\u00b0\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\u00cb2\\u95\u00b2\u00cfA \\u00\\u00\\u00\\u03/\\u1f\\u8cP\\u08\\u15\u00d63\\u14\\u18\\u00\\u06 \\u03:\u00c6\\u80\\u00\\u007\\u14\\u07P\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u19fR\u00b0\\u10*\u00f1\u00f8\u00ccP`\\u00\\u00\\u00\\u003\\u11\u00a03\u00ab1T\\u02q~\\u1dj\\u80gX\u00dc@\\u00\\u00X\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u031\\u1a\\u02z\u00fe\\u9dj\\u80N+1~,\\u04\\u0b\\u01\\u02\u00b1&gt;\\u18\\u80\\u91X\\u86\\'\u00c0H\u00acO\\u8d\\u04\\u0b\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u01=\\u8c\u00d0P\\u80\\u15\\u99\u00f4\u00ccH\\n\u00cc;D\u00e6}f`/\u00b4;Dv\\u87o\u00c0Wo\u00c3\u00b7\u00e2{~3\u00b5\\u05\u00f6\u00fc;~#\u00b53A}\u00bf\\u0e\u00df\\u88\u00ed\u00fa\u00cc\u00fe\\u83\u00a7o\u00c3\u00b7\u00e3\\u9e\\u7fL\u00fe\\u83\u00a7o\u00c3\u00b7\u00e3\\u9e\\u7fL\u00fe\\u83\u00a7o\u00c3\u00b7\u00e3\\u9e\\u7fL\u00fe\\u83\u00a7o\u00c3\u00b7\u00e3\\u9e\\u7fL\u00fe\\u83\u00a7o\u00c3\u00b7\u00e3\\u9e\\u7fL\u00fe\\u83\u00a7o\u00c3\u00b7\u00e23~\\u9d\u00a8/\u00b7\u00e3{Dv\u00fc;\\u02\u00fbC1\\u19\\u8d\\u05f}j\\u00X\\u8c\u00df\u00ad\u00edAB{~70\\u1a\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u03-\u00c2v\u00dbr\u00c0\\u01\\u97\\u97\u00c0k;1\\u80\u00dc\u00d6\\u16\u00c6[A\u00a6g\u00d4\u00b3\"+\u00b4;~\\'\u00b4go\u00c1W\u00da\u00b359\u00ac\u00cf\u00da\"\u00f3\u00fa\u00cc\u00cf\u00a8\u00cc;~\\n\u00be\u00d1\\u9d\u00bf\\u11\u00da\\u9d\u00af\u00d0_o\u00c3\u00b7\u00e2;~\\u9d\u00bfA}\u00bf\\u0e\u00df\\u88\u00ed\u00fav\u00fd\\u05\u00f6\u00fc;~#\u00b7\u00e9\u00db\u00f4\\u17\u00db\u00f0\u00ed\u00f8\\u8e\u00df\u00a7o\u00d0_o\u00c3\u00b7\u00e2;~\\u9d\u00af\u00d0t\u00ccno\u00d7&gt;\u00df\\u86`:\u00f6\u00a7df\u00b7\u00b0/2\\u89%\u00a0\u00bc\u00d6\u00cb\\u13,\u00a0,L\u00b8V`\\u00\\u00\u00dc\u00d6\\u00\u00a9r\u00d4*\\\\\\u83@\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u01\\u97MO `2\u00dc\\u01o\\u91\\u21n\\u03E\u00b8M\u00b6\\u8c\u00b7\\u025\\u97\\u92m\u00c9l\\u80\u00dc\u00d6\\'\u00b5`+\u00b4gj\u00cbc;PVo\u00d6f\\'?k;@Wff\u00a7\u00b5e\u00bfh.\u00df\u00b5\\u9d\u00a2;3\u00b5\\u07N\u00d0\u00ed\\u1c\u00f3L\u00d0t\u00ed\\u0e\u00d1\u00cf4\u00cd\\u07N\u00d0\u00ed\\u1c\u00f3L\u00d0t\u00ed\\u0e\u00d1\u00cf4\u00cd\\u07N\u00d0\u00ed\\u1c\u00f3N\u00d4\\u1de\u00bf[\u00db\u00eb\\u94\u00b1]\u00be\\u83\u00ac\u00bf+g/\u00aer\u00fcl\u00e5\u00f4\\u1d3\u00f1\u00b3\\u97\u00d4K\\u86\u00cb\\u91]\\u1b/\u00d4K\\u85\\u02\\u86K\u00e3A\u00b2\u00aa\\\\\u00a0\\u05\\u8c\\u97-\\u00\\u00V\u00da\\u9e7\u00c5\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u9e[Rn\u00c1\\u89\u00b75WH\\u03I\u00dbmM\u00b8\\u10\u00b7\\u096\u00cb|\\u80Z\\u93I\u00b7 \u00db\u00cb\u00e33\\u96[#-\u00b4F\u00db\\u19\\u9a\\u9bde\u00b6\\u82\u00ad\\u8c\u00ed\u00f19\\u8c\u00cd\\u05[\u00f6\u00a7\u00b4Nc;P_j\\u9b\u00ca\"\u00f2\\u9fY\u00d8\\u1d;C\u00b4s\u00edN\u00d4[t\u00ed\\u0e\u00d1\u00cf\u00b5;P\u00b7N\u00d0\u00ed\\u1c\u00fbS\u00b5\\u0bt\u00ed\\u0e\u00d1\u00cf\u00b5;P\u00b7N\u00d0\\u9c\\u9c\u00fbV\u00f6\u00fa\\u0e\u00b3\\u97\u00d5J\u00e3*\u00a5\u00f8\\u0e\u00d2\u00b6r\u00fa\u00e7.U/\u00d0t\\u97\\n\\u95\u00ce\\\\*\\\\\\u03\u00a4\u00b9T\u00b8s\\u95R\u00e4WF\u00cb\u00f5\\u1co\\u8a\\u05\\u09\\u97\\n\\u01R\u00e5-\u00d0(\\u00&amp;\u00d6\\u85M\\u03@\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u00\\u01\u00ff\u00d9' --compressed ;\n</code></pre>\n\n<p>I'm can create some path of request(kotlin)</p>\n\n<pre><code>val c = Jsoup.connect(link)\n            .timeout(20 * 1000)\n            .userAgent(userAgent).ignoreContentType(true)\n            .header(\"X-Requested-With\", \"XMLHttpRequest\")\n            .header(\"origin\", \"https://www.instagram.com\")\n            .header(\"accept-encoding\",\"gzip, deflate, br\")\n//            .header(\"accept-language\",\"ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7\")\n            .header(\"user-agent\", userAgent)\n            .header(\"x-requested-with\",\"XMLHttpRequest\")\n            .header(\"x-csrftoken\", csrf)\n            .header(\"x-ig-app-id\", igAppId)\n            .header(\"x-entity-name\", \"fb_uploader_$ts\")\n            .header(\"offset\", \"0\")\n            .header(\"x-instagram-ajax\", rollOutHash)\n            .header(\"content-type\", \"image/jpeg\")\n            .header(\"accept\", \"*/*\")\n            .header(\"authority\", \"www.instagram.com\")\n            .header(\"x-instagram-rupload-params\",\"{\\\"media_type\\\":1,\\\"upload_id\\\":\\\"${ts}\\\",\\\"upload_media_height\\\":1080,\\\"upload_media_width\\\":1079}\")\n            .header(\"x-entity-length\", \"16620\")\n            .header(\"content-length\", \"16620\")\n            .header(\"referer\",\"https://www.instagram.com/create/details/\")\n            .cookies(cookie)\n</code></pre>\n\n<p>I can add all headers and cookies to request but I do not now how to add image file in this request.\nImage file in '--data-binary ' parameter.\nHow make it ? (sorry for my English)</p>\n"}, {"tags": ["android", "kotlin", "build.gradle"], "answers": [{"tags": [], "owner": {"reputation": 479, "user_id": 1966798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f3baa1caf541b42aa5c0dae9bc690e0?s=128&d=identicon&r=PG", "display_name": "Narshim", "link": "https://stackoverflow.com/users/1966798/narshim"}, "is_accepted": true, "score": 1, "last_activity_date": 1557932948, "creation_date": 1557932948, "answer_id": 56152542, "question_id": 56151573, "link": "https://stackoverflow.com/questions/56151573/could-not-get-unknown-property-incremental-for-object-of-type-org-jetbrains-ko/56152542#56152542", "title": "Could not get unknown property &#39;incremental&#39; for object of type org.jetbrains.kotlin.gradle.plugin.KaptExtension", "body": "<p>Ok, I read the doc properly now and figured out that, it should be added in gradle.properties file</p>\n\n<p><a href=\"https://blog.jetbrains.com/kotlin/2019/04/kotlin-1-3-30-released/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/kotlin/2019/04/kotlin-1-3-30-released/</a></p>\n"}], "owner": {"reputation": 479, "user_id": 1966798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f3baa1caf541b42aa5c0dae9bc690e0?s=128&d=identicon&r=PG", "display_name": "Narshim", "link": "https://stackoverflow.com/users/1966798/narshim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 56152542, "answer_count": 1, "score": 0, "last_activity_date": 1557932948, "creation_date": 1557929950, "question_id": 56151573, "link": "https://stackoverflow.com/questions/56151573/could-not-get-unknown-property-incremental-for-object-of-type-org-jetbrains-ko", "title": "Could not get unknown property &#39;incremental&#39; for object of type org.jetbrains.kotlin.gradle.plugin.KaptExtension", "body": "<p>This might be a simple one. I am trying to add below line in my build.gradle file,</p>\n\n<pre><code>kapt.incremental.apt=true\n</code></pre>\n\n<p>Getting below error after that,</p>\n\n<p>Could not get unknown property 'incremental' for object of type org.jetbrains.kotlin.gradle.plugin.KaptExtension.</p>\n\n<p>I am using kotlin Version: 1.3.31-release-Studio3.3-1</p>\n\n<p>What am I missing ?</p>\n\n<p>Any suggestions will be appreciated.</p>\n"}, {"tags": ["gradle", "kotlin", "shadowjar"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 826865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8546319edc81a4a9f261e6ca5032aef4?s=128&d=identicon&r=PG", "display_name": "Selcaby", "link": "https://stackoverflow.com/users/826865/selcaby"}, "is_accepted": false, "score": 1, "last_activity_date": 1558005079, "creation_date": 1558005079, "answer_id": 56167203, "question_id": 56151548, "link": "https://stackoverflow.com/questions/56151548/should-i-shadow-kotlin-when-writing-a-gradle-plugin/56167203#56167203", "title": "Should I shadow Kotlin when writing a Gradle Plugin", "body": "<p>Since your plugin is replacing boilerplate and is presumably not destined for public release, would it make sense to write it as a <a href=\"https://docs.gradle.org/current/userguide/plugins.html#sec:script_plugins\" rel=\"nofollow noreferrer\">script plugin</a> in the Gradle Kotlin DSL?  That way a new enough Gradle should be able to understand it natively.</p>\n"}, {"tags": [], "owner": {"reputation": 2706, "user_id": 1867, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c12e7343e0b0deb70dc13b3dc939d16a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Oxspring", "link": "https://stackoverflow.com/users/1867/rob-oxspring"}, "is_accepted": false, "score": 1, "last_activity_date": 1558011628, "creation_date": 1558011628, "answer_id": 56169208, "question_id": 56151548, "link": "https://stackoverflow.com/questions/56151548/should-i-shadow-kotlin-when-writing-a-gradle-plugin/56169208#56169208", "title": "Should I shadow Kotlin when writing a Gradle Plugin", "body": "<p>Raised this in <a href=\"https://gradle-community.slack.com/archives/CA745PZHN/p1558006918127700\" rel=\"nofollow noreferrer\">Gradle Community Slack</a> and was recommended to use Gradle's <code>kotlin-dsl</code> plugin to automatically configure dependencies on <code>gradleApi()</code> and <code>embeddedKotlin()</code> versions, and therefore whatever Kotlin version is bundled with Gradle's Kotlin DSL support.</p>\n\n<p>I was concerned that this might introduce a dependency on the calling script using Kotlin DSL, but I've tested with a Groovy script and have been able to use my plugin. I assume that it does still depend on a version of Gradle with Kotlin DSL support though - i.e. 4.0+.</p>\n"}], "owner": {"reputation": 2706, "user_id": 1867, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c12e7343e0b0deb70dc13b3dc939d16a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Oxspring", "link": "https://stackoverflow.com/users/1867/rob-oxspring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1558011662, "creation_date": 1557929871, "last_edit_date": 1558011662, "question_id": 56151548, "link": "https://stackoverflow.com/questions/56151548/should-i-shadow-kotlin-when-writing-a-gradle-plugin", "title": "Should I shadow Kotlin when writing a Gradle Plugin", "body": "<p>I'm writing a plugin to extract some boilerplate from a selection of existing Gradle build scripts. The existing build scripts are primarily written in Groovy and compiling Java.</p>\n\n<p>To build my plugin I'm using the Gradle Kotlin DSL and figured I'd take the opportunity to write the plugin in Kotlin too. This all works but now my plugin has a huge dependency on Kotlin - and the Gradle docs specifically recommend <a href=\"https://guides.gradle.org/designing-gradle-plugins/#minimizing_the_use_of_external_libraries\" rel=\"nofollow noreferrer\">minimizing external libraries</a>.</p>\n\n<p>Java and Groovy plugins avoid this because Java &amp; Groovy are a shared dependency with Gradle, but Kotlin isn't a shared pre-requirement and so we then have to be concerned about potentially conflicting Kotlin versions needed by different plugins.</p>\n\n<p>I figure I should move forward with one of the following approaches but am not clear which:</p>\n\n<ol>\n<li><p>Just list Kotlin's <code>stdlib</code> as a standard dependency and trust Gradle to sort things out.</p>\n\n<p>This works for one plugin, but should I expect problems when another plugin is also being used but depending on a different Kotlin?</p></li>\n<li><p>Build some sort of uber shadowJar shadowing Kotlin libraries for my plugin</p>\n\n<p>Implying that every plugin I write like this will be 10s of MB bigger than necessary.</p></li>\n<li><p>Give up on Kotlin based plugins and rewrite in Java/Groovy</p>\n\n<p>Would be a shame to give up on the new goodness but might be better to avoid the above sins.</p></li>\n</ol>\n\n<p>Recommendations welcome!</p>\n"}, {"tags": ["android", "kotlin", "android-viewmodel", "android-architecture-lifecycle"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1557929662, "post_id": 56151362, "comment_id": 98932275, "body": "For more, see <a href=\"https://kotlinlang.org/docs/reference/reflection.html#function-references\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1557930245, "post_id": 56151362, "comment_id": 98932676, "body": "It is most likely a function reference to the constructor of the class."}, {"owner": {"reputation": 6667, "user_id": 2987953, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c2a6cba46cf5f4c9c7338f324a1d7732?s=128&d=identicon&r=PG&f=1", "display_name": "lannyf", "link": "https://stackoverflow.com/users/2987953/lannyf"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1557931461, "post_id": 56151362, "comment_id": 98933513, "body": "@CommonsWare, and EpicPandaForce,   thank you all for the help to quickly point to the explanation!"}], "answers": [{"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 2, "last_activity_date": 1557929886, "last_edit_date": 1557929886, "creation_date": 1557929556, "answer_id": 56151452, "question_id": 56151362, "link": "https://stackoverflow.com/questions/56151362/what-does-the-mainviewmodel-mean-when-pass-to-the-singleargviewmodelfactory/56151452#56151452", "title": "what does the ::MainViewModel mean when pass to the singleArgViewModelFactory", "body": "<p><code>::MainViewModel</code> is a <a href=\"https://kotlinlang.org/docs/reference/reflection.html#function-references\" rel=\"nofollow noreferrer\">function reference</a>. For a parameter of type <code>(A) -&gt; T</code> it basically is a reference to a function (constructor in this case) that accepts a parameter of type <code>A</code> and delivers <code>T</code> (which in this case is the <code>MainViewModel</code> itself).</p>\n\n<p>Comparing reference with its actual counterpart:</p>\n\n<pre><code>val ref : (A) -&gt; T = ::MainViewModel\nval ref : (A) -&gt; T = { MainViewModel(it) } // or: = { anA : A -&gt; MainViewModel(anA) }\n</code></pre>\n"}], "owner": {"reputation": 6667, "user_id": 2987953, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c2a6cba46cf5f4c9c7338f324a1d7732?s=128&d=identicon&r=PG&f=1", "display_name": "lannyf", "link": "https://stackoverflow.com/users/2987953/lannyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 56151452, "answer_count": 1, "score": 1, "last_activity_date": 1557936595, "creation_date": 1557929308, "last_edit_date": 1557936595, "question_id": 56151362, "link": "https://stackoverflow.com/questions/56151362/what-does-the-mainviewmodel-mean-when-pass-to-the-singleargviewmodelfactory", "title": "what does the ::MainViewModel mean when pass to the singleArgViewModelFactory", "body": "<p>in kotlin coroutines lab smaple,  <a href=\"https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#6\" rel=\"nofollow noreferrer\">https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#6</a></p>\n\n<p>it creates the viewModel by passing the <code>MainViewModel.FACTORY(repository)</code></p>\n\n<pre><code>val viewModel = ViewModelProviders\n    .of(this, MainViewModel.FACTORY(repository))\n    .get(MainViewModel::class.java)\n</code></pre>\n\n<p>the MainViewModel is as below,  not understand what syntax is the <code>::MainViewModel</code> used in the</p>\n\n<pre><code>val FACTORY = singleArgViewModelFactory(::MainViewModel)\n</code></pre>\n\n<p>the <code>singleArgViewModelFactory</code> has constructor:</p>\n\n<pre><code>singleArgViewModelFactory(constructor: (A) -&gt; T)\n</code></pre>\n\n<p>which taking a function <code>(A) -&gt; T</code>,  what does the <code>::MainViewModel</code> in the  <code>singleArgViewModelFactory(::MainViewModel)</code> mean?</p>\n\n<pre><code>class MainViewModel(private val repository: TitleRepository) : ViewModel() {\n\n    companion object {\n        /**\n         * Factory for creating [MainViewModel]\n         *\n         * @param arg the repository to pass to [MainViewModel]\n         */\n        val FACTORY = singleArgViewModelFactory(::MainViewModel)\n    }\n\n\n    ......\n}\n\n\n\nfun &lt;T : ViewModel, A&gt; singleArgViewModelFactory(constructor: (A) -&gt; T):\n        (A) -&gt; ViewModelProvider.NewInstanceFactory {\n    return { arg: A -&gt;\n        object : ViewModelProvider.NewInstanceFactory() {\n            @Suppress(\"UNCHECKED_CAST\")\n            override fun &lt;V : ViewModel&gt; create(modelClass: Class&lt;V&gt;): V {\n                return constructor(arg) as V\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "abstract-syntax-tree", "code-analysis", "detekt"], "answers": [{"tags": [], "owner": {"reputation": 2292, "user_id": 3383038, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/PR3Vp.jpg?s=128&g=1", "display_name": "Oleg Osipenko", "link": "https://stackoverflow.com/users/3383038/oleg-osipenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1561465069, "creation_date": 1561465069, "answer_id": 56753881, "question_id": 56150117, "link": "https://stackoverflow.com/questions/56150117/how-can-i-use-detekt-and-its-visitor-to-navigate-over-the-ast-of-a-given-kotlin/56753881#56753881", "title": "How can I use detekt and its visitor to navigate over the AST of a given Kotlin file?", "body": "<p>I recommend you to check the of Mohit Sarveiya about Detekt, he explains AST, PSI and how detekt utilizes visitor pattern.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=LT6m5_LO2DQ\" rel=\"nofollow noreferrer\">Video</a> \n<a href=\"https://speakerdeck.com/heyitsmohit/static-code-analysis-with-kotlin\" rel=\"nofollow noreferrer\">Slides</a></p>\n"}], "owner": {"reputation": 47, "user_id": 9424618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51ff8e9aa67d699de666ca66e3eba65?s=128&d=identicon&r=PG&f=1", "display_name": "albert", "link": "https://stackoverflow.com/users/9424618/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1561465069, "creation_date": 1557925524, "question_id": 56150117, "link": "https://stackoverflow.com/questions/56150117/how-can-i-use-detekt-and-its-visitor-to-navigate-over-the-ast-of-a-given-kotlin", "title": "How can I use detekt and its visitor to navigate over the AST of a given Kotlin file?", "body": "<p>I need to check how can I navigate over the Kotlin AST of a given file. I do not know how can I pass this file to get a generated AST nor how can I navigate over its nodes using the Visitor pattern. My goal is to check the usage of some Kotlin operators in a given Kotlin file. Can anyone help me with this?</p>\n\n<p>Thank you in advance!</p>\n\n<p>I already tried to use Kastree (<a href=\"https://github.com/cretz/kastree\" rel=\"nofollow noreferrer\">https://github.com/cretz/kastree</a>) but it does not work if I change any part of its sample code.\nI could not find how can I do this with detekt (<a href=\"https://github.com/arturbosch/detekt\" rel=\"nofollow noreferrer\">https://github.com/arturbosch/detekt</a>).</p>\n"}, {"tags": ["kotlin", "mapdb"], "owner": {"reputation": 305, "user_id": 3313500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/85Qyo.jpg?s=128&g=1", "display_name": "Scrooge McD", "link": "https://stackoverflow.com/users/3313500/scrooge-mcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557931624, "creation_date": 1557924618, "last_edit_date": 1557931624, "question_id": 56149789, "link": "https://stackoverflow.com/questions/56149789/mapdb-reading-in-batches", "title": "MapDB | reading in batches", "body": "<p>How do I read records from MapDB in batches, instead of reading all at once ?</p>\n\n<p>I have a list of say 1,000 records that I have persisted on disk through MapDB.</p>\n\n<pre><code>private fun storeRecordsInFile(records : List&lt;Record&gt;): String {\n    val fileName = \"/some/location/temp_file.db\"\n    val db = DBMaker.fileDB(fileName).fileMmapEnable().closeOnJvmShutdown().make()\n    val diskBasedRecordsList = db.indexTreeList(\"recordsList\").create()\n    records.forEach { diskBasedRecordsList.add(it) }\n\n    db.commit()\n    db.close()\n\n    return fileName\n}\n</code></pre>\n\n<p>I am able to read all of these records at once. </p>\n\n<pre><code>private fun readRecordsFromFile(fileName: String): List&lt;Record&gt; {\n    val db = DBMaker.fileDB(fileName).fileMmapEnable().make()\n    val diskBasedRecordsList = db.indexTreeList(\"recordsList\").open()\n\n    //read from disk based list\n    val recordsList = mutableListOf&lt;Record&gt;()\n    val size = diskBasedRecordsList.size\n    for(i in 0 until size-1){\n        recordsList.add(diskBasedRecordsList[i] as Record)\n    }\n\n    db.close()\n    return recordsList\n}\n</code></pre>\n\n<p>However, I would want to read them in a chunk/batch of only 100 at a time in memory (i.e. without fetching the entire 1000 records in memory at once) ?</p>\n"}, {"tags": ["spring", "postgresql", "hibernate", "jpa", "kotlin"], "comments": [{"owner": {"reputation": 3600, "user_id": 3841161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acf3ec13097b93112cf97da8cf4e06a9?s=128&d=identicon&r=PG&f=1", "display_name": "coladict", "link": "https://stackoverflow.com/users/3841161/coladict"}, "edited": false, "score": 0, "creation_date": 1557924837, "post_id": 56149740, "comment_id": 98929037, "body": "You can&#39;t do that with lists. Hibernate can&#39;t know what you mean to do in a native query to try and split-up the list for you. You can have <code>INSERT INTO table VALUES (?, ?) ON CONFLICT DO NOTHING RETURNING id</code>"}, {"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "reply_to_user": {"reputation": 3600, "user_id": 3841161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acf3ec13097b93112cf97da8cf4e06a9?s=128&d=identicon&r=PG&f=1", "display_name": "coladict", "link": "https://stackoverflow.com/users/3841161/coladict"}, "edited": false, "score": 0, "creation_date": 1557926924, "post_id": 56149740, "comment_id": 98930450, "body": "@coladict do you have another suggestion on how to build a query as described in my question?"}], "answers": [{"tags": [], "owner": {"reputation": 1869, "user_id": 11139634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b3d0220aa641f9d660a316336d8ddb6?s=128&d=identicon&r=PG&f=1", "display_name": "Ancoron", "link": "https://stackoverflow.com/users/11139634/ancoron"}, "is_accepted": false, "score": 3, "last_activity_date": 1557985740, "last_edit_date": 1557985740, "creation_date": 1557927506, "answer_id": 56150784, "question_id": 56149740, "link": "https://stackoverflow.com/questions/56149740/jpa-native-query-puts-parentheses-wrong-for-list-paremeter-on-insert-into-values/56150784#56150784", "title": "JPA Native query puts parentheses wrong for List paremeter on INSERT INTO VALUES", "body": "<p>No, your idea is nice but will not work with Spring Data, because:</p>\n\n<ol>\n<li>list parameter expansion happens only as a comma-separated list of data values <code>(a, b, ...)</code>, not a list of records or rows <code>(a), (b), (...)</code></li>\n<li>data-modifying statements that return something are also not supported (yet): <a href=\"https://jira.spring.io/browse/DATAJPA-1389\" rel=\"nofollow noreferrer\">https://jira.spring.io/browse/DATAJPA-1389</a></li>\n</ol>\n\n<p>However, there is a workaround to at least the batching problem as described here:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/50772230/how-to-do-bulk-multi-row-inserts-with-jparepository/50882952#50882952\">How to do bulk (multi row) inserts with JpaRepository?</a></li>\n</ul>\n"}], "owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1557985740, "creation_date": 1557924495, "last_edit_date": 1557924990, "question_id": 56149740, "link": "https://stackoverflow.com/questions/56149740/jpa-native-query-puts-parentheses-wrong-for-list-paremeter-on-insert-into-values", "title": "JPA Native query puts parentheses wrong for List paremeter on INSERT INTO VALUES", "body": "<p>So I am trying to write a native named query for JPA (JPQL) to <code>INSERT</code> multiple rows of data in one go, and get back all id's of the inserted records (that don't conflict with unique constrain on the primary key). I am using a Postgres database.</p>\n\n<p>Database looks like this: <code>SELECT * FROM table;</code></p>\n\n<pre><code>id | sent\n---+------\n1  | f\n(1 row)\n</code></pre>\n\n<p>What I'd like to achieve is this PSQL statement:</p>\n\n<p><code>INSERT INTO table VALUES (1, false),(2, false) ON CONFLICT DO NOTHING RETURNING id;</code></p>\n\n<p>Which should return:</p>\n\n<pre><code>id\n---\n2\n(1 row)\n</code></pre>\n\n<p>So my initial idea was to make a native query in JPA:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\ninterface NotificationRepository : JpaRepository&lt;Foo, Int&gt; {\n\n    @Modifying\n    @Query(\"INSERT INTO Foo VALUES (:foos) ON CONFLICT DO NOTHING RETURNING id\", nativeQuery = true)\n    fun addAllAndReturnInserted(foos: List&lt;Foo&gt;): List&lt;Int&gt;\n}\n</code></pre>\n\n<p>Which works for one value in the list, but for multiple values it will create a query like:</p>\n\n<p><code>Hibernate: INSERT INTO Foo VALUES (?, ?) ON CONFLICT DO NOTHING RETURNING id</code></p>\n\n<p>And it throws an exception:</p>\n\n<blockquote>\n  <p>PSQLException: ERROR: column \"sent\" is of type boolean but expression is of type int</p>\n</blockquote>\n\n<p>Is there a way to transform the list into separate perentheses like <code>(?), (?)</code> instead of in one <code>(?, ?)</code> ??</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10539074"}, "edited": false, "score": 1, "creation_date": 1557924826, "post_id": 56149667, "comment_id": 98929026, "body": "is it ok? <code>val map = testData.mapNotNull { it.value?.let { value -&gt; it.key to value } }.toMap()</code>"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1557925148, "post_id": 56149667, "comment_id": 98929235, "body": "That&#39;s one way. But I&#39;m hoping something readily available without need to construct our own logic in the chain as above."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10539074"}, "edited": false, "score": 0, "creation_date": 1557925235, "post_id": 56149667, "comment_id": 98929300, "body": "just make it as an extension function and you will get something short and readable in code )"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1557925543, "post_id": 56149667, "comment_id": 98929506, "body": "@Eugene that should be an answer ;)"}], "answers": [{"comments": [{"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 1, "creation_date": 1557950707, "post_id": 56150130, "comment_id": 98942780, "body": "<b>+1</b> for the unconventional <code>as</code> cast and avoiding an extra map (or list) copy and using the type system to your advantage. Useless copies are too often unhesitatingly accepted in the JVM world..."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 4, "last_activity_date": 1557930102, "last_edit_date": 1557930102, "creation_date": 1557925541, "answer_id": 56150130, "question_id": 56149667, "link": "https://stackoverflow.com/questions/56149667/whats-the-equivalent-of-mapnotnull-that-result-in-map/56150130#56150130", "title": "What&#39;s the equivalent of `mapNotNull` that result in map?", "body": "<p>Well, not really out of the box (in the sense that you get <code>Map&lt;String, Int&gt;</code> immediately), but what about <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-values.html\" rel=\"nofollow noreferrer\"><code>filterValues</code></a>?</p>\n\n<pre><code>testData.filterValues { it != null } // gives Map&lt;String, Int?&gt; but without null-values\n</code></pre>\n\n<p>Combining or replacing that with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map-values.html\" rel=\"nofollow noreferrer\"><code>mapValues</code></a> (maybe you can use a default value instead of <code>null</code>?):</p>\n\n<pre><code>// combining:\ntestData.filterValues { it != null }\n        .mapValues { (_, value) -&gt; value as Int }\n// replacing:\ntestData.mapValues { (_, value) -&gt; value ?: /* default value */ 0 } \n</code></pre>\n\n<p>Both give a <code>Map&lt;String, Int&gt;</code> but the first creates and fills 2 maps under the hood and the second uses <code>0</code> instead of <code>null</code>.</p>\n\n<p>You can also simplify the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-values.html\" rel=\"nofollow noreferrer\"><code>filterValues</code></a>-variant with an appropriate <a href=\"https://kotlinlang.org/docs/reference/typecasts.html#unchecked-casts\" rel=\"nofollow noreferrer\">unchecked cast</a>, as \"we know it better\":</p>\n\n<pre><code>testData.filterValues { it != null } as Map&lt;String, Int&gt; // unchecked cast, because: we really do know better, do we? ;-)\n</code></pre>\n\n<p>Alternatively, you could also just handle all entries the way you knew already (using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/map-not-null.html\" rel=\"nofollow noreferrer\"><code>mapNotNull</code></a>) and then create a new map out of it:</p>\n\n<pre><code>testData.asSequence()\n        .mapNotNull { (key, value) -&gt;\n            value?.let {\n              key to it\n            }\n        }\n        .toMap() // giving Map&lt;String, Int&gt;\n</code></pre>\n\n<p>If you require that more often you may even want to have your own extension function in place:</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\nfun &lt;K, V&gt; Map&lt;K, V?&gt;.filterValuesNotNull() = filterValues { it != null } as Map&lt;K, V&gt;\n</code></pre>\n\n<p>Now you can use it similar as to follows:</p>\n\n<pre><code>testData.filterValuesNotNull() // giving Map&lt;String, Int&gt;\n</code></pre>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 56150130, "answer_count": 1, "score": 1, "last_activity_date": 1557930102, "creation_date": 1557924281, "question_id": 56149667, "link": "https://stackoverflow.com/questions/56149667/whats-the-equivalent-of-mapnotnull-that-result-in-map", "title": "What&#39;s the equivalent of `mapNotNull` that result in map?", "body": "<p>I can convert a <code>List&lt;Int?&gt;</code> to <code>List&lt;Int&gt;</code> using <code>mapNotNull</code> function as shown below.</p>\n\n<pre><code>    @Test\n    fun main() {\n        val testData = listOf(1, null, 3, null)\n        val noNull = processAwayNull(testData)\n    }\n\n    private fun processAwayNull(testData: List&lt;Int?&gt;): List&lt;Int&gt; {\n        return testData.mapNotNull{ it }\n    }\n</code></pre>\n\n<p>How could I convert <code>Map&lt;String, Int?&gt;</code> to <code>Map&lt;String, Int&gt;</code>?\nThe below with <code>testData.filter { it.value != null }</code> doesn't works, as it still produce <code>Map&lt;String, Int?&gt;</code>.</p>\n\n<pre><code>    @Test\n    fun main() {\n        val testData = mapOf(\"One\" to 1, \"Two\" to null, \"Three\" to 3, \"Four\" to null)\n        val noNull = processAwayNull(testData)\n    }\n\n    private fun processAwayNull(testData: Map&lt;String, Int?&gt;): Map&lt;String, Int&gt; {\n        return testData.filter { it.value != null }\n    }\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "androidx", "itemtouchhelper"], "answers": [{"comments": [{"owner": {"reputation": 322, "user_id": 11202401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65f1bc1618a8c991d151d6cf49252e3b?s=128&d=identicon&r=PG&f=1", "display_name": "nt95", "link": "https://stackoverflow.com/users/11202401/nt95"}, "edited": false, "score": 0, "creation_date": 1557932548, "post_id": 56151460, "comment_id": 98934207, "body": "This is the code that will resize the childViews correctly, however my issue is when to call this. ItemTouchHelper only monitors the specific item that is being moved. This is a good article on it <a href=\"https://medium.com/@ipaulpro/drag-and-swipe-with-recyclerview-b9456d2b1aaf\" rel=\"nofollow noreferrer\">medium.com/@ipaulpro/&hellip;</a>  i essentially want to call the code that you&#39;ve written but in the ItemTouchHelper."}], "tags": [], "owner": {"reputation": 121, "user_id": 3429935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0dc03ad1de683f3b3c94d298f125cde?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Malhotra", "link": "https://stackoverflow.com/users/3429935/vikas-malhotra"}, "is_accepted": false, "score": 0, "last_activity_date": 1557929589, "creation_date": 1557929589, "answer_id": 56151460, "question_id": 56149550, "link": "https://stackoverflow.com/questions/56149550/resize-all-recyclerview-cells-on-itemtouchhelper-during-drag-reorder/56151460#56151460", "title": "Resize all recyclerview cells on itemTouchhelper during drag/reorder", "body": "<p>I am not sure if I completely understand what you are trying to do, but I think this might help:</p>\n\n<pre><code>\n        int childs = recyclerView.getChildCount();\n        for (int i = 0; i &lt; childs; i++) {\n            View child = recyclerView.getChildAt(i);\n            if (child != null) {\n                RecyclerView.ViewHolder vholder = recyclerView.getChildViewHolder(child);\n                if (vholder != null) {\n                    ViewHolder holder = (ViewHolder) vholder;\n                    if (holder.view != null) {\n                        LayoutParams params = (LayoutParams)holder.view.getLayoutParams();\n                        params.width = &lt;new_width&gt;;\n                        params.height = &lt;new_height&gt;;\n                        holder.view.setLayoutParams(params);\n                    }\n                }\n            }\n        }\n</code></pre>\n\n<p>Happy coding !!</p>\n"}], "owner": {"reputation": 322, "user_id": 11202401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65f1bc1618a8c991d151d6cf49252e3b?s=128&d=identicon&r=PG&f=1", "display_name": "nt95", "link": "https://stackoverflow.com/users/11202401/nt95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557929589, "creation_date": 1557923896, "question_id": 56149550, "link": "https://stackoverflow.com/questions/56149550/resize-all-recyclerview-cells-on-itemtouchhelper-during-drag-reorder", "title": "Resize all recyclerview cells on itemTouchhelper during drag/reorder", "body": "<p>I have a horizontal recyclerview which implements ItemTouchHelper callback for dragging and reordering cells. When a cell is being moved i want to shrink all of the cells widths so they all appear on screen. In onItemSelected() i can successfully change the size of the cell currently being moved, and revert back in onItemClear. </p>\n\n<p>However, i want to resize all cells and not just the current cell. What is the best approach for this?</p>\n\n<p>I tried creating a function in my adapter class and calling it to resize via notifyDataSetChanged() however it was removing the current cell being moved. </p>\n\n<p>Is there a way to do this as part of my ItemTouchHelperCallback - creating a similar function as onItemSelected but updating all other cells?</p>\n"}, {"tags": ["android", "kotlin", "model", "retrofit2"], "comments": [{"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1557923549, "post_id": 56149296, "comment_id": 98928215, "body": "My model class in the question data class Voucher(val products: List&lt;Product&gt;) data class Product(val code: String, val name: String, val price: Double)"}, {"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "reply_to_user": {"reputation": 405, "user_id": 6376080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5e9YY.jpg?s=128&g=1", "display_name": "Nick Bapu", "link": "https://stackoverflow.com/users/6376080/nick-bapu"}, "edited": false, "score": 0, "creation_date": 1557923616, "post_id": 56149296, "comment_id": 98928257, "body": "I&#39;ve generate the model class with plugin in Android Studio"}, {"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "reply_to_user": {"reputation": 405, "user_id": 6376080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5e9YY.jpg?s=128&g=1", "display_name": "Nick Bapu", "link": "https://stackoverflow.com/users/6376080/nick-bapu"}, "edited": false, "score": 0, "creation_date": 1557923983, "post_id": 56149296, "comment_id": 98928488, "body": "This is my model class: data class Voucher(val products: List&lt;Product&gt;) data class Product(val code: String, val name: String, val price: Double)"}, {"owner": {"reputation": 581, "user_id": 9177766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVFHjniLCfo/AAAAAAAAAAI/AAAAAAAAADQ/krDE-b5fbKA/photo.jpg?sz=128", "display_name": "Romain Goutte-Fangeas", "link": "https://stackoverflow.com/users/9177766/romain-goutte-fangeas"}, "edited": false, "score": 0, "creation_date": 1557923992, "post_id": 56149296, "comment_id": 98928497, "body": "What does your getVouchers() looks like ? Have you tried to debug in the disposable when the result part is triggered (the result object) ?"}, {"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "reply_to_user": {"reputation": 581, "user_id": 9177766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVFHjniLCfo/AAAAAAAAAAI/AAAAAAAAADQ/krDE-b5fbKA/photo.jpg?sz=128", "display_name": "Romain Goutte-Fangeas", "link": "https://stackoverflow.com/users/9177766/romain-goutte-fangeas"}, "edited": false, "score": 0, "creation_date": 1557924037, "post_id": 56149296, "comment_id": 98928519, "body": "yep, result objet get null on result.products Could be a problem of my model class?? I&#39;ve update with getVouchers()"}, {"owner": {"reputation": 581, "user_id": 9177766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVFHjniLCfo/AAAAAAAAAAI/AAAAAAAAADQ/krDE-b5fbKA/photo.jpg?sz=128", "display_name": "Romain Goutte-Fangeas", "link": "https://stackoverflow.com/users/9177766/romain-goutte-fangeas"}, "edited": false, "score": 0, "creation_date": 1557924284, "post_id": 56149296, "comment_id": 98928658, "body": "The getVouchers() function return a Voucher.Vouchers but your data class name is just Voucher"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1557924302, "post_id": 56149296, "comment_id": 98928669, "body": "@S.P. ok, then what is the code of <code>Vouchers</code> class?"}, {"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1557924463, "post_id": 56149296, "comment_id": 98928787, "body": "Not code in Voucher class. Maybe the question have to be how to do a model class in kotlin with the provided json"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1557925295, "post_id": 56149296, "comment_id": 98929339, "body": "@S.P. just redefine <code>getVouchers</code> to: <code>fun getVouchers(): Observable&lt;Voucher&gt;</code>. Class <code>Voucher.Vouchers</code> is not needed (and not shown in your question)"}, {"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1557925833, "post_id": 56149296, "comment_id": 98929690, "body": "@user2340612 I  just define the method, error disappear but I still get null in result.products"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1557926192, "post_id": 56149296, "comment_id": 98929940, "body": "Is the JSON you posted the whole response you&#39;re getting? If that&#39;s not the case, could you please update your question with the full body? I&#39;m asking that because if <code>Voucher</code> is an inner object then you&#39;ll need a different model"}, {"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1557926273, "post_id": 56149296, "comment_id": 98929995, "body": "Yes is the whole json that I&#39;m waiting"}, {"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1557928297, "post_id": 56149296, "comment_id": 98931360, "body": "@user2340612 Yes is the whole json that I&#39;m waiting"}], "answers": [{"comments": [{"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1557925788, "post_id": 56150166, "comment_id": 98929662, "body": "Yep, ok, I put fun getVouchers(): Observable&lt;Vouche&gt; but in my retrofit method                 { result -&gt; processVouchers(result.products) }, products is null. But I can see in the logs that I have 200 ok and the json. I just remove from my question"}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "reply_to_user": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1557925930, "post_id": 56150166, "comment_id": 98929749, "body": "are you, by any chance, using proguard?"}, {"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1557926014, "post_id": 56150166, "comment_id": 98929813, "body": "The default proguard that is provided by Android studio. Just remove and all seem work, but I products still null. I&#39;m quite sure that have to be a problem with model class"}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "reply_to_user": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1557926265, "post_id": 56150166, "comment_id": 98929985, "body": "Are you sure that there are no other classes with name Voucher in your project that ApiService might be referring to? Quick check would be to check the imports or cmd(ctrl) + b on the return type of getVouchers"}, {"owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1557926445, "post_id": 56150166, "comment_id": 98930109, "body": "Yes, is the only one. I can change the name to another name and products = null"}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "reply_to_user": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1557926528, "post_id": 56150166, "comment_id": 98930157, "body": "Great, so, where did you get this json from? Is this from logs? Are you sure that your endpoint is correct? Perhaps you could try to change getVouchers return type to <code>Observable&lt;Response&lt;Vouchers&gt;&gt;</code> and debug if the response is successful"}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "reply_to_user": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "edited": false, "score": 0, "creation_date": 1557928484, "post_id": 56150166, "comment_id": 98931466, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/193403/discussion-between-r2rek-and-s-p\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": true, "score": 0, "last_activity_date": 1557929493, "last_edit_date": 1557929493, "creation_date": 1557925646, "answer_id": 56150166, "question_id": 56149296, "link": "https://stackoverflow.com/questions/56149296/retrofit-parameter-specified-as-non-null-is-null/56150166#56150166", "title": "Retrofit Parameter specified as non-null is null", "body": "<p>I believe that the issue here might be that </p>\n\n<pre><code> fun getVouchers(): Observable&lt;Voucher.Vouchers&gt;\n</code></pre>\n\n<p>Are you sure that getVoucher returns the correct type? Shouldn't it be <code>Observable&lt;Voucher&gt;</code> ?</p>\n\n<p>Edit:\nIt turned out that author was using <code>excludeFieldsWithModifiers</code> for his GsonConverterFactory, which was causing issues with parsing to model.</p>\n"}, {"comments": [{"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557929692, "post_id": 56151191, "comment_id": 98932298, "body": "This answer is wrong - wrapping it in Response gives you more granular control on the error checking process - without it any unsuccessful response would trigger onError. Actually wrapping it allows you to check if the error is caused by lack of internet connection or just e.g. 400 response from the server."}, {"owner": {"reputation": 10606, "user_id": 1559852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FmZgv.jpg?s=128&g=1", "display_name": "savepopulation", "link": "https://stackoverflow.com/users/1559852/savepopulation"}, "reply_to_user": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557930157, "post_id": 56151191, "comment_id": 98932603, "body": "So why you did not wrap with a response in your answer? I&#39;m not talking about wrapping it is useful or not. I&#39;m just mapping the object with the given json response."}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557930290, "post_id": 56151191, "comment_id": 98932713, "body": "Because it is not necessary in this case, it&#39;s not causing the error though. As I said in my edited answer, the issue was in GsonConverterFactory&#39;s <code>excludeFieldsWithModifiers</code>, which author didn&#39;t specify in his question"}, {"owner": {"reputation": 10606, "user_id": 1559852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FmZgv.jpg?s=128&g=1", "display_name": "savepopulation", "link": "https://stackoverflow.com/users/1559852/savepopulation"}, "reply_to_user": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557930404, "post_id": 56151191, "comment_id": 98932793, "body": "haha funny. I think my answer is clear and correct for mapping the given JSON. so I don&#39;t want to waste my time anymore here with you. thanks for your feedback."}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557930471, "post_id": 56151191, "comment_id": 98932849, "body": "it isn&#39;t, as at the beginning author had an unwrapped version, just like yours, with the same issue. go ahead and waste it wherever you please. good day"}], "tags": [], "owner": {"reputation": 10606, "user_id": 1559852, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FmZgv.jpg?s=128&g=1", "display_name": "savepopulation", "link": "https://stackoverflow.com/users/1559852/savepopulation"}, "is_accepted": false, "score": 1, "last_activity_date": 1557928779, "creation_date": 1557928779, "answer_id": 56151191, "question_id": 56149296, "link": "https://stackoverflow.com/questions/56149296/retrofit-parameter-specified-as-non-null-is-null/56151191#56151191", "title": "Retrofit Parameter specified as non-null is null", "body": "<p>I think it's because you're wrapping your return type with <code>Response</code> in your <code>Retrofit</code> services interface. Just try to change like this:</p>\n\n<pre><code>@GET(Api.ENDPOINT.VOUCHER_ENDPOIN)\nfun getVoucher(): Observable&lt;Voucher&gt;\n</code></pre>\n"}], "owner": {"reputation": 1736, "user_id": 4403871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/590b56e9b5cbb9289d54f0af3f3c9d12?s=128&d=identicon&r=PG&f=1", "display_name": "S.P.", "link": "https://stackoverflow.com/users/4403871/s-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 56150166, "answer_count": 2, "score": 0, "last_activity_date": 1561805347, "creation_date": 1557923024, "last_edit_date": 1561805347, "question_id": 56149296, "link": "https://stackoverflow.com/questions/56149296/retrofit-parameter-specified-as-non-null-is-null", "title": "Retrofit Parameter specified as non-null is null", "body": "<p>I'm new in Kotlin and I'm trying to parse a simple JSON, but I'm getting an \n<code>\" Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter vouchers\"</code></p>\n\n<p><code>result.products</code> is always null, but I can see in the logs that retrofit is getting correctly the json with a 200 ok request. So I suppose that could be a problem when I'm trying to parse the json</p>\n\n<p>How can I solve this?</p>\n\n<p>I have add my code below</p>\n\n<pre><code>disposable = ApiServe.getVouchers()\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(\n                { result -&gt; processVouchers(result.products) },\n                { error -&gt; error(error.message)}\n            )\n\nfun processVouchers(vouchers : List&lt;Product&gt;){\n        mCallback?.onResponseVouchers(vouchers)\n    }\n</code></pre>\n\n<p>GET VOUCHERES in ApiServe class</p>\n\n<pre><code>@GET(Api.ENDPOINT.VOUCHER_ENDPOIN)\n        fun getVoucher(): Observable&lt;Response&lt;Vouchers&gt;&gt;\n</code></pre>\n\n<p>MODEL</p>\n\n<pre><code>data class Voucher(val products: List&lt;Product&gt;)\ndata class Product(val code: String, val name: String, val price: Double)\n</code></pre>\n\n<p>JSON</p>\n\n<p><code>{\"products\":[{\"code\":\"Voucher\",\"name\":\"Voucher\",\"price\":3},{\"code\":\"Ball\",\"name\":\"Voucher Ball\",\"price\":10},{\"code\":\"Milk\",\"name\":\"Voucher Milk\",\"price\":8.5}]}</code></p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1557923943, "post_id": 56149268, "comment_id": 98928462, "body": "Wouldn&#39;t it be easier to check whether the system language is not available in your translations?"}, {"owner": {"reputation": 1346, "user_id": 5605517, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/60f7fec1bc15247462f34d2ba0d00fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Esperanz0", "link": "https://stackoverflow.com/users/5605517/esperanz0"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1557923973, "post_id": 56149268, "comment_id": 98928479, "body": "It would be but how ? @FedericoklezCulloca"}, {"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1557924079, "post_id": 56149268, "comment_id": 98928545, "body": "1. Get system language; 2. Put available translation languages in list; 3. Check if system language is in that list."}, {"owner": {"reputation": 1346, "user_id": 5605517, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/60f7fec1bc15247462f34d2ba0d00fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Esperanz0", "link": "https://stackoverflow.com/users/5605517/esperanz0"}, "reply_to_user": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1557924139, "post_id": 56149268, "comment_id": 98928573, "body": "Yes but this &quot;2. Put available translation languages in list&quot; is a bit problematic. @FedericoklezCulloca"}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "edited": false, "score": 0, "creation_date": 1557924458, "post_id": 56149268, "comment_id": 98928784, "body": "I don&#39;t really understand what you mean with &quot;<i>language used by application (default English) instead of language selected in the phone</i>&quot;"}, {"owner": {"reputation": 1346, "user_id": 5605517, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/60f7fec1bc15247462f34d2ba0d00fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Esperanz0", "link": "https://stackoverflow.com/users/5605517/esperanz0"}, "edited": false, "score": 0, "creation_date": 1557924540, "post_id": 56149268, "comment_id": 98928832, "body": "For example user from Arabia has selected Arabic language which is not supported by application. And then application using English language displaying date in Arabic because of Locale.getDefault()"}, {"owner": {"reputation": 800, "user_id": 5912570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aNMw4Qrx4v8/AAAAAAAAAAI/AAAAAAAAB-4/lll-4_R7zdA/photo.jpg?sz=128", "display_name": "Harshad Prajapati", "link": "https://stackoverflow.com/users/5912570/harshad-prajapati"}, "edited": false, "score": 0, "creation_date": 1557928628, "post_id": 56149268, "comment_id": 98931558, "body": "@Esperanz0 I have done the same things. can you tell me a little bit more so that I can help you? are you taking date from <code>DatePickerDialog</code> or formatting it?"}, {"owner": {"reputation": 3293, "user_id": 1047418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3deab5aa1be96fe145d3103251263523?s=128&d=identicon&r=PG", "display_name": "Torben", "link": "https://stackoverflow.com/users/1047418/torben"}, "edited": false, "score": 0, "creation_date": 1557981718, "post_id": 56149268, "comment_id": 98949729, "body": "Android uses the default localization if the user&#39;s selected device locale is not included in the resources. Isn&#39;t that exactly what you&#39;re looking for? In which language is  your default localization now?"}, {"owner": {"reputation": 1346, "user_id": 5605517, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/60f7fec1bc15247462f34d2ba0d00fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Esperanz0", "link": "https://stackoverflow.com/users/5605517/esperanz0"}, "reply_to_user": {"reputation": 800, "user_id": 5912570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aNMw4Qrx4v8/AAAAAAAAAAI/AAAAAAAAB-4/lll-4_R7zdA/photo.jpg?sz=128", "display_name": "Harshad Prajapati", "link": "https://stackoverflow.com/users/5912570/harshad-prajapati"}, "edited": false, "score": 0, "creation_date": 1557990705, "post_id": 56149268, "comment_id": 98952955, "body": "@HarshadPrajapati Yes something like that."}, {"owner": {"reputation": 1346, "user_id": 5605517, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/60f7fec1bc15247462f34d2ba0d00fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Esperanz0", "link": "https://stackoverflow.com/users/5605517/esperanz0"}, "reply_to_user": {"reputation": 3293, "user_id": 1047418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3deab5aa1be96fe145d3103251263523?s=128&d=identicon&r=PG", "display_name": "Torben", "link": "https://stackoverflow.com/users/1047418/torben"}, "edited": false, "score": 0, "creation_date": 1557990708, "post_id": 56149268, "comment_id": 98952958, "body": "@Torben And the language of application is fine. But date is formated by Locale.getDefault() which is not default English language and date is formated by language selected in phone."}, {"owner": {"reputation": 152, "user_id": 10057347, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3qr72hPe3sY/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oveh17m4w-E9iQVTfTVBX3FiQT1w/mo/photo.jpg?sz=128", "display_name": "Harshil kakadiya", "link": "https://stackoverflow.com/users/10057347/harshil-kakadiya"}, "edited": false, "score": 0, "creation_date": 1557991073, "post_id": 56149268, "comment_id": 98953152, "body": "<b>String lang = Locale.getDefault().getLanguage();</b>"}, {"owner": {"reputation": 1346, "user_id": 5605517, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/60f7fec1bc15247462f34d2ba0d00fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Esperanz0", "link": "https://stackoverflow.com/users/5605517/esperanz0"}, "reply_to_user": {"reputation": 152, "user_id": 10057347, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3qr72hPe3sY/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oveh17m4w-E9iQVTfTVBX3FiQT1w/mo/photo.jpg?sz=128", "display_name": "Harshil kakadiya", "link": "https://stackoverflow.com/users/10057347/harshil-kakadiya"}, "edited": false, "score": 0, "creation_date": 1557991655, "post_id": 56149268, "comment_id": 98953442, "body": "@Harshilkakadiya For some reasons it&#39;s returning language selected on phone instead of app."}, {"owner": {"reputation": 800, "user_id": 5912570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aNMw4Qrx4v8/AAAAAAAAAAI/AAAAAAAAB-4/lll-4_R7zdA/photo.jpg?sz=128", "display_name": "Harshad Prajapati", "link": "https://stackoverflow.com/users/5912570/harshad-prajapati"}, "edited": false, "score": 0, "creation_date": 1558068087, "post_id": 56149268, "comment_id": 98985225, "body": "hey @Esperanz0. I have just posted my answer check it and let me know if you want any further explanation or change."}], "answers": [{"comments": [{"owner": {"reputation": 1346, "user_id": 5605517, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/60f7fec1bc15247462f34d2ba0d00fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Esperanz0", "link": "https://stackoverflow.com/users/5605517/esperanz0"}, "edited": false, "score": 0, "creation_date": 1557923880, "post_id": 56149507, "comment_id": 98928426, "body": "It also returning system language not the app language."}], "tags": [], "owner": {"reputation": 966, "user_id": 10970473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P2gU1.jpg?s=128&g=1", "display_name": "Dinesh Shingadiya", "link": "https://stackoverflow.com/users/10970473/dinesh-shingadiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1557923750, "creation_date": 1557923750, "answer_id": 56149507, "question_id": 56149268, "link": "https://stackoverflow.com/questions/56149268/detect-application-language-instead-of-phone-language/56149507#56149507", "title": "Detect application language instead of phone language", "body": "<p>Get system language</p>\n\n<pre><code>Resources.getSystem().getConfiguration().locale.getLanguage();\n</code></pre>\n\n<p>Get application language</p>\n\n<pre><code>String appLang = Locale.getDefault().getLanguage();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 800, "user_id": 5912570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aNMw4Qrx4v8/AAAAAAAAAAI/AAAAAAAAB-4/lll-4_R7zdA/photo.jpg?sz=128", "display_name": "Harshad Prajapati", "link": "https://stackoverflow.com/users/5912570/harshad-prajapati"}, "is_accepted": false, "score": 0, "last_activity_date": 1558068057, "last_edit_date": 1558068057, "creation_date": 1558067392, "answer_id": 56179620, "question_id": 56149268, "link": "https://stackoverflow.com/questions/56149268/detect-application-language-instead-of-phone-language/56179620#56179620", "title": "Detect application language instead of phone language", "body": "<p><strong>Try this:</strong></p>\n\n<p>I have made one extension function to format date with the default locale of the app or only English.</p>\n\n<p><strong>Note: This function will always return formatted date in English it doesn't matter what your device language or whats your app language.</strong></p>\n\n<p><strong>And if you want to date as per your app language just pass your app's selected language locale to this method.</strong></p>\n\n<p>Before showing <code>DatePickerDialog</code> set <code>Locale</code> to <code>en</code> like this.</p>\n\n<pre><code>Locale.setDefault(Locale(\"en\"))\nstartDatePickerDialog.show()\n</code></pre>\n\n<p>And after that use this method to format date.</p>\n\n<pre><code> fun Context.getFormattedDate(\n    inputFormat: String = \"dd/MM/yyyy\",\n    outputFormat: String,\n    inputDate: String,\n    locale: Locale = Locale(\"en\")\n): String {\n\n    val inputFormat = inputFormat\n    var outputFormat = outputFormat\n\n    var parsed: Date? = null\n    var outputDate = \"\"\n\n    val dfInput = SimpleDateFormat(inputFormat, locale)\n    val dfOutput = SimpleDateFormat(outputFormat, locale)\n\n    try {\n        parsed = dfInput.parse(inputDate)\n        outputDate = dfOutput.format(parsed)\n    } catch (e: Exception) {\n        Log.e(\"formattedDateFromString\", \"Exception in formate Date From string(): \" + e.message)\n        e.printStackTrace()\n    }\n    return outputDate\n\n}\n</code></pre>\n\n<p>How to use this function</p>\n\n<pre><code> Log.e(\"Formated date\", getFormattedDate(\n                    inputFormat = \"dd/MM/yyyy\",\n                    outputFormat = \"dd-MMM-yyyy\",\n                    inputDate = \"17/05/2019\"\n                )\n            )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1346, "user_id": 5605517, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/60f7fec1bc15247462f34d2ba0d00fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Esperanz0", "link": "https://stackoverflow.com/users/5605517/esperanz0"}, "is_accepted": false, "score": 0, "last_activity_date": 1558362873, "creation_date": 1558362873, "answer_id": 56223136, "question_id": 56149268, "link": "https://stackoverflow.com/questions/56149268/detect-application-language-instead-of-phone-language/56223136#56223136", "title": "Detect application language instead of phone language", "body": "<p>Since there is no helpfull answer I will post my solution for this problem. </p>\n\n<p>So I decided to create xml file for every supported language with locale code inside:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n    &lt;string name=\"language_locale\"&gt;en&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>fun Date.formatWithShortMonthAndDay(context: Context, date: Date): String {\n    val locale = context.resources.getString(R.string.language_locale)\n    return SimpleDateFormat(DATE_WITH_SHORT_MONTH_AND_DAY_PATTERN, Locale(locale)).format(date)\n}\n</code></pre>\n"}], "owner": {"reputation": 1346, "user_id": 5605517, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/60f7fec1bc15247462f34d2ba0d00fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Esperanz0", "link": "https://stackoverflow.com/users/5605517/esperanz0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1558362873, "creation_date": 1557922929, "last_edit_date": 1557990969, "question_id": 56149268, "link": "https://stackoverflow.com/questions/56149268/detect-application-language-instead-of-phone-language", "title": "Detect application language instead of phone language", "body": "<p>I have multi language application and I want to display date in English if the selected language on phone is not supported by the application translations.</p>\n\n<p><strong>Is there any method to get language used by application (default English)\ninstead of language selected in the phone?</strong></p>\n\n<p>Looks like this is returning only the phone language:</p>\n\n<pre><code>Locale.getDefault()\ngetContext().getResources().getConfiguration().locale\n</code></pre>\n\n<p>Screenshot: \n<a href=\"https://i.stack.imgur.com/MtttD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MtttD.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "android-studio", "kotlin", "listadapter"], "comments": [{"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1557922373, "post_id": 56149053, "comment_id": 98927443, "body": "Show imports in MainActivity, please. A problem may be in other imports, even in <code>R</code>. Also you can for experiment move TodoAdapter to MainActivity. And what is <code>adapter</code>, what type?"}, {"owner": {"reputation": 892, "user_id": 4464680, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh3.googleusercontent.com/-8JmyJuysqbM/AAAAAAAAAAI/AAAAAAAAAqU/Lb9fp_9V5RQ/photo.jpg?sz=128", "display_name": "just_deko", "link": "https://stackoverflow.com/users/4464680/just-deko"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1557922780, "post_id": 56149053, "comment_id": 98927699, "body": "@CoolMind added the imports. Weirdly enough, the adapter shows up as (&lt;root&gt;) (where the package name should be instead) whatever that means. Obviously it should be a ListAdapter, see code above."}, {"owner": {"reputation": 892, "user_id": 4464680, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh3.googleusercontent.com/-8JmyJuysqbM/AAAAAAAAAAI/AAAAAAAAAqU/Lb9fp_9V5RQ/photo.jpg?sz=128", "display_name": "just_deko", "link": "https://stackoverflow.com/users/4464680/just-deko"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1557923117, "post_id": 56149053, "comment_id": 98927932, "body": "@CoolMInd inserted it as a private class into my main activity, and it suddenly works. certainly weird"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 1, "creation_date": 1557923157, "post_id": 56149053, "comment_id": 98927958, "body": "I also sometimes face this problem. AS can mix <code>R</code> and doesn&#39;t see other classes."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1557923509, "post_id": 56149053, "comment_id": 98928181, "body": "Well, if in private class no errors are found and it is built, you can commit the work. Probably you can remove old class <code>TodoAdapter</code> and move private TodoAdapter outside of MainActivity (I don&#39;t remember, for instance, select it, press F6, select <code>Move nested class TodoAdapter to upper level</code>)."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1557929283, "post_id": 56149053, "comment_id": 98932005, "body": "If you do <code>invalidate caches and restart</code>, then it was a bug in AS. If it still doesn&#39;t work, then it&#39;s a bug in your code"}, {"owner": {"reputation": 892, "user_id": 4464680, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh3.googleusercontent.com/-8JmyJuysqbM/AAAAAAAAAAI/AAAAAAAAAqU/Lb9fp_9V5RQ/photo.jpg?sz=128", "display_name": "just_deko", "link": "https://stackoverflow.com/users/4464680/just-deko"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1557944031, "post_id": 56149053, "comment_id": 98939931, "body": "@EpicPandaForce the question would be what exactly my bug here is. as I said, it works as a private inner class in my activity, so I&#39;m leaning more towards AS bug."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1557962631, "post_id": 56149053, "comment_id": 98946297, "body": "Maybe you are just modularizing too much and using <code>implementation</code> instead of <code>api</code> in your Gradle configuration, who knows"}], "owner": {"reputation": 892, "user_id": 4464680, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh3.googleusercontent.com/-8JmyJuysqbM/AAAAAAAAAAI/AAAAAAAAAqU/Lb9fp_9V5RQ/photo.jpg?sz=128", "display_name": "just_deko", "link": "https://stackoverflow.com/users/4464680/just-deko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557929051, "creation_date": 1557922169, "last_edit_date": 1557929051, "question_id": 56149053, "link": "https://stackoverflow.com/questions/56149053/android-studio-cant-import-adapter", "title": "Android Studio can&#39;t import Adapter", "body": "<p>I'm not really sure whether this is an issue with my code, or a bug with Android studio. I'm trying to instantiate my adapter for a recyclerview in my main activity. It's in the package adapters, but I tried it with being in the same directory as activity and the problem still occurs.</p>\n\n<p>Android Studio suggests to import the adapter (Alt-Enter) but after I do that, literally nothing happens. importing it manually doesn't work either, I get \"Unresolved reference: TodoAdapter\". It's almost like the file doesn't exist, despite being clearly there. </p>\n\n<p>I tried everything: making the adapter public, invalidating my caches, using another pc, the problem is still the same.</p>\n\n<p>Here's my code:</p>\n\n<p>TodoAdapter:</p>\n\n<pre><code>public class TodoAdapter : ListAdapter&lt;Todo, TodoAdapter.ViewHolder&gt;(TodoDiffCallBack()){\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        return ViewHolder(ListItemTodoBinding.inflate(\n            LayoutInflater.from(parent.context), parent, false))\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        val todo = getItem(position)\n        holder.apply {\n            bind(createOnClickListener(todo.id), todo)\n            itemView.tag = todo\n        }\n    }\n\n    private fun createOnClickListener(todoId: Int): View.OnClickListener {\n        return View.OnClickListener {\n            Log.v(\"its working!\",\"workssss\")\n        }\n    }\n\n    class ViewHolder(\n        private val binding: ListItemTodoBinding\n    ) : RecyclerView.ViewHolder(binding.root){\n        fun bind(listener: View.OnClickListener, item: Todo) {\n            binding.apply {\n                clickListener = listener\n                todo = item\n                executePendingBindings()\n            }\n        }\n    }\n\n    private class TodoDiffCallBack : DiffUtil.ItemCallback&lt;Todo&gt;() {\n        override fun areItemsTheSame(oldItem: Todo, newItem: Todo): Boolean {\n            return oldItem.id == newItem.id\n        }\n\n        override fun areContentsTheSame(oldItem: Todo, newItem: Todo): Boolean {\n            return oldItem == newItem\n        }\n    }\n}\n</code></pre>\n\n<p>(No errors in that class, and binding works)</p>\n\n<p>And here's my MainActivity</p>\n\n<pre><code>import android.content.Intent\nimport android.os.Bundle\nimport android.view.Menu\nimport android.view.MenuItem\nimport com.test.myapp.adapters.TodoAdapter //unresolved reference here as well!\nimport androidx.appcompat.app.AppCompatActivity\nimport androidx.lifecycle.ViewModelProviders\nimport com.test.myapp.util.Injectors\nimport com.test.myapp.viewmodels.TodoListViewModel\nimport kotlinx.android.synthetic.main.activity_main.*\n...\n\nclass MainActivity : AppCompatActivity() {\n...\n   override fun onCreate(savedInstanceState: Bundle?) {\n           super.onCreate(savedInstanceState)\n           setContentView(R.layout.activity_main)\n           setSupportActionBar(toolbar)\n\n           val adapter = TodoAdapter() //Unresolved reference!\n   }\n...\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-livedata"], "comments": [{"owner": {"reputation": 405, "user_id": 6376080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5e9YY.jpg?s=128&g=1", "display_name": "Nick Bapu", "link": "https://stackoverflow.com/users/6376080/nick-bapu"}, "edited": false, "score": 0, "creation_date": 1557920301, "post_id": 56148417, "comment_id": 98926147, "body": "30ms is slow for you?!"}, {"owner": {"reputation": 1685, "user_id": 3891038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXlsK.png?s=128&g=1", "display_name": "Julio E. Rodr&#237;guez Caba&#241;as", "link": "https://stackoverflow.com/users/3891038/julio-e-rodr%c3%adguez-caba%c3%b1as"}, "edited": false, "score": 0, "creation_date": 1557920364, "post_id": 56148417, "comment_id": 98926184, "body": "A delay of 30ms is almost impossible to notice. The reason why your app is slow must certainly be somewhere else."}, {"owner": {"reputation": 1617, "user_id": 3024933, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100004051072097/picture?type=large", "display_name": "just", "link": "https://stackoverflow.com/users/3024933/just"}, "edited": false, "score": 0, "creation_date": 1557920510, "post_id": 56148417, "comment_id": 98926280, "body": "If I using it in a bigger project the delay is bigger ~300ms."}, {"owner": {"reputation": 1685, "user_id": 3891038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXlsK.png?s=128&g=1", "display_name": "Julio E. Rodr&#237;guez Caba&#241;as", "link": "https://stackoverflow.com/users/3891038/julio-e-rodr%c3%adguez-caba%c3%b1as"}, "edited": false, "score": 0, "creation_date": 1557920735, "post_id": 56148417, "comment_id": 98926427, "body": "If the <code>LiveData</code> instance is having so much trouble reaching the main thread to deliver the value, then the app is probably doing too much work."}], "answers": [{"comments": [{"owner": {"reputation": 1617, "user_id": 3024933, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100004051072097/picture?type=large", "display_name": "just", "link": "https://stackoverflow.com/users/3024933/just"}, "edited": false, "score": 0, "creation_date": 1557923698, "post_id": 56148747, "comment_id": 98928316, "body": "Thanks! I changed the <code>postValue()</code> to <code>.value = </code> and it&#39;s more faster."}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 7, "last_activity_date": 1557921164, "creation_date": 1557921164, "answer_id": 56148747, "question_id": 56148417, "link": "https://stackoverflow.com/questions/56148417/why-livedata-is-slow/56148747#56148747", "title": "Why LiveData is slow", "body": "<blockquote>\n  <p>You can see that dataLoadedEvent.postValue(null) take at least 30ms</p>\n</blockquote>\n\n<p><code>postValue()</code> is for when you want to update the <code>MutableLiveData</code> from a background thread. Under the covers, it uses a <code>Handler</code> to route your event to the main application thread. Therefore, there will be some delay, as other main application thread work queue events get processed.</p>\n\n<p>It also illustrates that your benchmark is flawed (\"comparing apples to oranges\"). Either:</p>\n\n<ul>\n<li><p>Use <code>Handler</code> instead of a callback (or some other \"run this code on the main application thread\" approach), or</p></li>\n<li><p>Use <code>setValue()</code> (or <code>value=</code> since you are in Kotlin) instead of <code>postValue()</code>, to update the <code>MutableLiveData</code> content directly on the main application thread</p></li>\n</ul>\n"}], "owner": {"reputation": 1617, "user_id": 3024933, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100004051072097/picture?type=large", "display_name": "just", "link": "https://stackoverflow.com/users/3024933/just"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2326, "favorite_count": 2, "accepted_answer_id": 56148747, "answer_count": 1, "score": 6, "last_activity_date": 1557921164, "creation_date": 1557920118, "last_edit_date": 1592644375, "question_id": 56148417, "link": "https://stackoverflow.com/questions/56148417/why-livedata-is-slow", "title": "Why LiveData is slow", "body": "<p>In my application, I load data from the local database and it's very slow. I tried to find what is slow and I found that this occurs because of LiveData.</p>\n<p>I created a sample application to test LiveData speed here you are my test code:\nFirstFragment:</p>\n<pre><code>class FirstFragment : Fragment(), FirstFragmentCallback {\nprivate val TAG = FirstFragment::class.java.simpleName\n\nprivate var mViewModel: FirstFragmentViewModel? = null\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    mViewModel = ActivityUtils.obtainViewModel(requireActivity(), FirstFragmentViewModel::class.java)\n    (mViewModel as FirstFragmentViewModel).callback = this\n}\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    val v = inflater.inflate(R.layout.first_fragment, container, false)\n    Log.d(TAG, &quot;onCreateView called&quot;)\n\n    registerObservables()\n    mViewModel?.loadData()\n    return v\n}\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    val secondFragmentButton = view.findViewById&lt;Button&gt;(R.id.second)\n    secondFragmentButton.setOnClickListener {\n        ActivityUtils.replaceFragmentInActivity(requireFragmentManager(), SecondFragment(), R.id.container, false)\n    }\n}\n\nprivate fun registerObservables(){\n    mViewModel?.dataLoadedEvent?.observe(this, Observer {\n        Log.d(TAG, &quot;dataLoaded event&quot;)\n    })\n    mViewModel?.dataLoaded2Event?.observe(this, Observer {\n        Log.d(TAG, &quot;dataLoaded2 event&quot;)\n    })\n}\n\noverride fun dataLoaded() {\n    Log.d(TAG, &quot;dataLoaded callback&quot;)\n}\n}\n</code></pre>\n<p>FirstFragmentViewModel:</p>\n<pre><code>class FirstFragmentViewModel(val mAppliction: Application): AndroidViewModel(mAppliction) {\n\nval dataLoadedEvent: SingleLiveEvent&lt;Void&gt; = SingleLiveEvent()\n\nval dataLoaded2Event: MutableLiveData&lt;Void&gt; = MutableLiveData()\n\nvar callback: FirstFragmentCallback? = null\n\nfun loadData(){\n    dataLoadedEvent.postValue(null)\n    dataLoaded2Event.postValue(null)\n    callback?.dataLoaded()\n}\n}\n</code></pre>\n<p>If I run this fragment I got these in the LogCat:</p>\n<blockquote>\n<p>2019-05-15 13:23:07.405 8632-8632/livedatatest D/FirstFragment: onCreateView called</p>\n<p>2019-05-15 13:23:07.406 8632-8632/livedatatest D/FirstFragment: dataLoaded callback</p>\n<p>2019-05-15 13:23:07.438 8632-8632/livedatatest D/FirstFragment: dataLoaded event</p>\n<p>2019-05-15 13:23:07.439 8632-8632/livedatatest D/FirstFragment: dataLoaded2 event</p>\n</blockquote>\n<p>You can see that <code>dataLoadedEvent.postValue(null)</code> take at least 30ms, but the simple callback is called immediately.</p>\n<p>Is there any solution to speed up LiveData events?</p>\n"}, {"tags": ["java", "kotlin", "dialogflow-es"], "answers": [{"comments": [{"owner": {"reputation": 1967, "user_id": 151153, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/21394188a4a5788bc81a2c5fe9013fe9?s=128&d=identicon&r=PG", "display_name": "Richard Green", "link": "https://stackoverflow.com/users/151153/richard-green"}, "edited": false, "score": 0, "creation_date": 1558184948, "post_id": 56188478, "comment_id": 99021660, "body": "Sure - but I can&#39;t figure out how to use the API in order to make this happen.. Do you have the line of code?"}, {"owner": {"reputation": 10420, "user_id": 1491707, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/rOXkJ.png?s=128&g=1", "display_name": "Nick Felker", "link": "https://stackoverflow.com/users/1491707/nick-felker"}, "reply_to_user": {"reputation": 1967, "user_id": 151153, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/21394188a4a5788bc81a2c5fe9013fe9?s=128&d=identicon&r=PG", "display_name": "Richard Green", "link": "https://stackoverflow.com/users/151153/richard-green"}, "edited": false, "score": 0, "creation_date": 1558361571, "post_id": 56188478, "comment_id": 99066051, "body": "I&#39;ve updated the answer with a Node.js snippet of the code you&#39;d generally need to implement. I think, based on reading the docs, that many response types are only used in the Google Assistant section, such as simpleResponses. The text field should be generic."}, {"owner": {"reputation": 1967, "user_id": 151153, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/21394188a4a5788bc81a2c5fe9013fe9?s=128&d=identicon&r=PG", "display_name": "Richard Green", "link": "https://stackoverflow.com/users/151153/richard-green"}, "edited": false, "score": 0, "creation_date": 1558365231, "post_id": 56188478, "comment_id": 99068202, "body": "Thanks Nick - but I need a java / kotlin solution as this needs to integrate with the rest of the platform, and that requires the <code>builder</code> and <code>SimpleResponse.newBuilder()</code> stuff..."}, {"owner": {"reputation": 10420, "user_id": 1491707, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/rOXkJ.png?s=128&g=1", "display_name": "Nick Felker", "link": "https://stackoverflow.com/users/1491707/nick-felker"}, "reply_to_user": {"reputation": 1967, "user_id": 151153, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/21394188a4a5788bc81a2c5fe9013fe9?s=128&d=identicon&r=PG", "display_name": "Richard Green", "link": "https://stackoverflow.com/users/151153/richard-green"}, "edited": false, "score": 0, "creation_date": 1558366821, "post_id": 56188478, "comment_id": 99069038, "body": "If you understand the snippet above, you should be able to adjust the logic to fit your language of choice"}, {"owner": {"reputation": 10420, "user_id": 1491707, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/rOXkJ.png?s=128&g=1", "display_name": "Nick Felker", "link": "https://stackoverflow.com/users/1491707/nick-felker"}, "reply_to_user": {"reputation": 1967, "user_id": 151153, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/21394188a4a5788bc81a2c5fe9013fe9?s=128&d=identicon&r=PG", "display_name": "Richard Green", "link": "https://stackoverflow.com/users/151153/richard-green"}, "edited": false, "score": 0, "creation_date": 1558366859, "post_id": 56188478, "comment_id": 99069059, "body": "Seems like you can do <code>addMessagesBuilder().setPlatform(...).addText(...).build()</code>"}, {"owner": {"reputation": 1967, "user_id": 151153, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/21394188a4a5788bc81a2c5fe9013fe9?s=128&d=identicon&r=PG", "display_name": "Richard Green", "link": "https://stackoverflow.com/users/151153/richard-green"}, "edited": false, "score": 0, "creation_date": 1558431631, "post_id": 56188478, "comment_id": 99089726, "body": "There is no <code>addText()</code> after <code>setPlatform()</code>"}], "tags": [], "owner": {"reputation": 10420, "user_id": 1491707, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/rOXkJ.png?s=128&g=1", "display_name": "Nick Felker", "link": "https://stackoverflow.com/users/1491707/nick-felker"}, "is_accepted": false, "score": 1, "last_activity_date": 1558361502, "last_edit_date": 1558361502, "creation_date": 1558103286, "answer_id": 56188478, "question_id": 56147720, "link": "https://stackoverflow.com/questions/56147720/how-to-create-a-default-response-using-dialogflow-v2beta1/56188478#56188478", "title": "How to create a default response using dialogflow.v2beta1", "body": "<p>While I haven't done it myself, I am referring to the REST API and found the <a href=\"https://cloud.google.com/dialogflow-enterprise/docs/reference/rest/v2/projects.agent.intents#resource-intent\" rel=\"nofollow noreferrer\">Intent</a> has a <a href=\"https://cloud.google.com/dialogflow-enterprise/docs/reference/rest/v2/projects.agent.intents#message\" rel=\"nofollow noreferrer\">Message</a> type which can be a collection responses.</p>\n\n<p>The message should have a field called <a href=\"https://cloud.google.com/dialogflow-enterprise/docs/reference/rest/v2/projects.agent.intents#simpleresponses\" rel=\"nofollow noreferrer\">SimpleResponses</a>, which is an array of <a href=\"https://cloud.google.com/dialogflow-enterprise/docs/reference/rest/v2/projects.agent.intents#simpleresponse\" rel=\"nofollow noreferrer\">SimpleResponse</a> objects.</p>\n\n<p>This should update the console. It looks like they appear in <em>Google Assistant</em> because the Message type has an optional field of type <a href=\"https://cloud.google.com/dialogflow-enterprise/docs/reference/rest/v2/projects.agent.intents#Platform\" rel=\"nofollow noreferrer\">Platform</a>. I'm not sure what the default value is, but would <code>PLATFORM_UNSPECIFIED</code> place it in the right section?</p>\n\n<p>The implementation would look similar to (using the <a href=\"https://www.npmjs.com/package/dialogflow\" rel=\"nofollow noreferrer\">dialogflow</a> package):</p>\n\n<pre><code>const intentsClient = new dialogflow.IntentsClient();\nconst parent = intentsClient.projectAgentPath(projectId);\nconst dfIntent = {\n  // Put other values in here\n  // ...\n  messages: [{\n    platform: 'PLATFORM_UNSPECIFIED',\n    text: [ 'Default message' ]\n  }]\n}\n// Or execute updateIntent if it already exists\nconst creationResponse = await intentsClient.createIntent({\n  parent,\n  languageCode: 'en',\n  intent: dfIntent\n})\n</code></pre>\n\n<p>I haven't tested the behavior of the snippet, but this should add a generic text response.</p>\n"}, {"tags": [], "owner": {"reputation": 1967, "user_id": 151153, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/21394188a4a5788bc81a2c5fe9013fe9?s=128&d=identicon&r=PG", "display_name": "Richard Green", "link": "https://stackoverflow.com/users/151153/richard-green"}, "is_accepted": true, "score": 0, "last_activity_date": 1558431900, "creation_date": 1558431900, "answer_id": 56235547, "question_id": 56147720, "link": "https://stackoverflow.com/questions/56147720/how-to-create-a-default-response-using-dialogflow-v2beta1/56235547#56235547", "title": "How to create a default response using dialogflow.v2beta1", "body": "<pre><code> addMessagesBuilder().setPlatform(Intent.Message.Platform.PLATFORM_UNSPECIFIED).setText(Intent.Message.Text.newBuilder().addText(\"ffs\")).build()\n</code></pre>\n"}], "owner": {"reputation": 1967, "user_id": 151153, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/21394188a4a5788bc81a2c5fe9013fe9?s=128&d=identicon&r=PG", "display_name": "Richard Green", "link": "https://stackoverflow.com/users/151153/richard-green"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 56235547, "answer_count": 2, "score": 8, "last_activity_date": 1558431900, "creation_date": 1557917929, "last_edit_date": 1558365253, "question_id": 56147720, "link": "https://stackoverflow.com/questions/56147720/how-to-create-a-default-response-using-dialogflow-v2beta1", "title": "How to create a default response using dialogflow.v2beta1", "body": "<p>I have the following (kotlin) code:</p>\n\n<pre><code>import com.google.cloud.dialogflow.v2beta1.*\n\nval project = \"my-super-agent\"\n\nval trainingPhraseBuilder = Intent.TrainingPhrase.Part.newBuilder()\ntrainingPhraseBuilder.text = \"Tell me about the product.\"\nval trainingPhrasePart = trainingPhraseBuilder.build()\nprintln(trainingPhrasePart)\n\nvar i = with(Intent.newBuilder()) {\n    displayName = \"My First Built Intent\"\n    addTrainingPhrases(Intent.TrainingPhrase.newBuilder().addAllParts(listOf(trainingPhrasePart)))\n    val message =\n        with(addMessagesBuilder()) {\n            basicCardBuilder.setFormattedText(\"It is amazing. Truly it is.\")\n            build()\n        }\n    build()\n}\n</code></pre>\n\n<p>and then of course</p>\n\n<pre><code>IntentsClient.create().use({ intentsClient -&gt;\n\n    val intrequest = CreateIntentRequest.newBuilder()\n        .setParent(\"projects/$project/agent\")\n        .setIntent(i)\n        .build()\n\n    val response1 = intentsClient.createIntent(intrequest)\n\n})\n</code></pre>\n\n<p>but for the life of me I can't figure out how to create a trivial entry in this section: <a href=\"https://i.stack.imgur.com/4D2BZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4D2BZ.png\" alt=\"enter image description here\"></a> </p>\n\n<p>The basic cards appear in the Google Assistant section (obviously).</p>\n\n<p>What am I missing in order to create default simple default responses? If you are thinking \"oh that's easy - it's ....\" then yes you are correct - it is simple I just can't find it.  </p>\n\n<p>FWIW. Some of my (not working) attempts look like:</p>\n\n<pre><code>var sr = Intent.Message.SimpleResponse.newBuilder()\nsr.setDisplayText(\"Pleeeeaaaassssseeee\")\nval simpleReponseMessage = sr.build()\n\naddMessagesBuilder()\n.simpleResponsesBuilder\n.addSimpleResponses(simpleReponseMessage)\n.build()\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557912609, "post_id": 56145902, "comment_id": 98921613, "body": "is the connection one-sided or are you plannign to both send and receive data from server?"}, {"owner": {"reputation": 581, "user_id": 9177766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVFHjniLCfo/AAAAAAAAAAI/AAAAAAAAADQ/krDE-b5fbKA/photo.jpg?sz=128", "display_name": "Romain Goutte-Fangeas", "link": "https://stackoverflow.com/users/9177766/romain-goutte-fangeas"}, "edited": false, "score": 1, "creation_date": 1557913360, "post_id": 56145902, "comment_id": 98922060, "body": "If you just send the location without any data send from the server maybe it is easier to use a POST (if you have the control of the backend)."}, {"owner": {"reputation": 61, "user_id": 10879695, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Oob0DA2fFRE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbE9jtPSqdo6waOlqDPH9eog8X6Yg/mo/photo.jpg?sz=128", "display_name": "Chidinma Ekenne", "link": "https://stackoverflow.com/users/10879695/chidinma-ekenne"}, "edited": false, "score": 0, "creation_date": 1557919516, "post_id": 56145902, "comment_id": 98925711, "body": "no, this socket is dedicated to sending current location of a user ever 6 seconds"}], "answers": [{"comments": [{"owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "edited": false, "score": 0, "creation_date": 1557914077, "post_id": 56146150, "comment_id": 98922508, "body": "I would suggest you to set a RESTful HTTPS method on the server side and then access it from the Android device through Retrofit API."}, {"owner": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1573501888, "post_id": 56146150, "comment_id": 103894999, "body": "Does this use Firebase real-time DB?"}], "tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": false, "score": 1, "last_activity_date": 1557913103, "creation_date": 1557913103, "answer_id": 56146150, "question_id": 56145902, "link": "https://stackoverflow.com/questions/56145902/socket-connection-using-retrofit-in-kotlin/56146150#56146150", "title": "socket connection using retrofit in Kotlin", "body": "<p>I believe that what you're referring to is actually OkHttp's WebSocket</p>\n\n<p>Refer here:</p>\n\n<p><a href=\"https://square.github.io/okhttp/3.x/okhttp/okhttp3/WebSocket.html\" rel=\"nofollow noreferrer\">https://square.github.io/okhttp/3.x/okhttp/okhttp3/WebSocket.html</a></p>\n\n<p>You can implement it by hand or use some library - e.g. Tinder's Scarlet, which by design is inspired by retrofit:</p>\n\n<p><a href=\"https://github.com/Tinder/Scarlet\" rel=\"nofollow noreferrer\">https://github.com/Tinder/Scarlet</a></p>\n"}, {"comments": [{"owner": {"reputation": 938, "user_id": 8174825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JEfn.jpg?s=128&g=1", "display_name": "Mehul Solanki", "link": "https://stackoverflow.com/users/8174825/mehul-solanki"}, "edited": false, "score": 0, "creation_date": 1557915277, "post_id": 56146497, "comment_id": 98923249, "body": "Probably this is the best solution"}, {"owner": {"reputation": 61, "user_id": 10879695, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Oob0DA2fFRE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbE9jtPSqdo6waOlqDPH9eog8X6Yg/mo/photo.jpg?sz=128", "display_name": "Chidinma Ekenne", "link": "https://stackoverflow.com/users/10879695/chidinma-ekenne"}, "edited": false, "score": 0, "creation_date": 1557919447, "post_id": 56146497, "comment_id": 98925675, "body": "I have an existing server that is requesting for the user&#39;s location."}, {"owner": {"reputation": 80, "user_id": 11494599, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-58UeHyRzV2E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re4KB7DIK1PWCr7YXUJRcT5u9yxnQ/mo/photo.jpg?sz=128", "display_name": "Hello world ", "link": "https://stackoverflow.com/users/11494599/hello-world"}, "edited": false, "score": 0, "creation_date": 1557980064, "post_id": 56146497, "comment_id": 98949355, "body": "You can use your server for everything except for the socket you can try it out"}], "tags": [], "owner": {"reputation": 80, "user_id": 11494599, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-58UeHyRzV2E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re4KB7DIK1PWCr7YXUJRcT5u9yxnQ/mo/photo.jpg?sz=128", "display_name": "Hello world ", "link": "https://stackoverflow.com/users/11494599/hello-world"}, "is_accepted": false, "score": 4, "last_activity_date": 1557914057, "creation_date": 1557914057, "answer_id": 56146497, "question_id": 56145902, "link": "https://stackoverflow.com/questions/56145902/socket-connection-using-retrofit-in-kotlin/56146497#56146497", "title": "socket connection using retrofit in Kotlin", "body": "<p>Hello there you can try Firebase realtime database  for this </p>\n\n<p><a href=\"https://firebase.google.com/docs/database\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/database</a></p>\n\n<p>From this you can create you observable sockets rather than creating from server side sockets </p>\n\n<p>It can easily be implemented on any front end i.e Android, IOS and Web</p>\n"}], "owner": {"reputation": 61, "user_id": 10879695, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Oob0DA2fFRE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbE9jtPSqdo6waOlqDPH9eog8X6Yg/mo/photo.jpg?sz=128", "display_name": "Chidinma Ekenne", "link": "https://stackoverflow.com/users/10879695/chidinma-ekenne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1557981796, "creation_date": 1557912406, "last_edit_date": 1557981796, "question_id": 56145902, "link": "https://stackoverflow.com/questions/56145902/socket-connection-using-retrofit-in-kotlin", "title": "socket connection using retrofit in Kotlin", "body": "<p>I wish to create an open connection with my server to be sending a user's current location every 6 seconds. I was advised to use socket connection, please how can I create such connection with a retrofit if not what another way can I create a socket connection that sends users current location</p>\n"}, {"tags": ["java", "spring", "rest", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 3324, "user_id": 651827, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a5dcdcbc4b50e1b6b641334af042aa6d?s=128&d=identicon&r=PG", "display_name": "codebrane", "link": "https://stackoverflow.com/users/651827/codebrane"}, "edited": false, "score": 0, "creation_date": 1557910132, "post_id": 56144703, "comment_id": 98920143, "body": "according to the docs, Origin is only set for CORS or POST <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin</a>"}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557908637, "creation_date": 1557908637, "question_id": 56144703, "link": "https://stackoverflow.com/questions/56144703/how-do-i-change-the-request-ip-for-testing", "title": "How do I change the request IP for testing?", "body": "<p>So as a follow-up on <a href=\"https://stackoverflow.com/questions/56133593/associating-an-authenticationfailurebadcredentialsevent-with-the-remote-addres\">this question</a>, I am writing a couple of sanity tests to verify Spring Boot's <code>server.tomcat.remote-ip-header=X-Forwarded-For</code> is working as intended...</p>\n\n<pre><code>@RestController\nclass RemoteAddressTesterController {\n    @GetMapping(\"/remoteAddr\")\n    fun getRemoteAddress(request: HttpServletRequest):String = request.remoteAddr\n}\n</code></pre>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner::class)\n@SpringBootTest(\n    properties = [\"server.tomcat.remote-ip-header=X-Forwarded-For\"],\n    webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT\n)\nclass RemoteAddressProviderIT{\n\n    private val NON_LOCAL_IP_1 = \"212.13.43.12\"\n    private val NON_LOCAL_IP_2 = \"12.13.24.34\"\n    private val LOCAL_HOST = \"127.0.0.1\"\n\n    @Inject\n    lateinit var rest:TestRestTemplate\n\n    private lateinit var headers:HttpHeaders\n\n    @Before\n    fun setup(){\n        headers = HttpHeaders()\n    }\n</code></pre>\n\n<p>works:</p>\n\n<pre><code>    @Test\n    fun withoutXFF_localhost() {\n        val request = HttpEntity&lt;Any&gt;(headers)\n\n\n\n        val remoteAddress = rest.exchange(\"/remoteAddr\", HttpMethod.GET,request,String::class.java).body!!\n\n\n\n        assertThat(remoteAddress).isEqualTo(LOCAL_HOST)\n    }\n</code></pre>\n\n<p>this works too:</p>\n\n<pre><code>    @Test\n    fun XFF_clientWithProxy() {\n        headers[\"X-Forwarded-For\"] = \"$NON_LOCAL_IP_2,$NON_LOCAL_IP_1\"\n        val request = HttpEntity&lt;Any&gt;(headers)\n\n\n\n        val remoteAddress = rest.exchange(\"/remoteAddr\", HttpMethod.GET,request,String::class.java).body!!\n\n\n\n        assertThat(remoteAddress).isEqualTo(NON_LOCAL_IP_1)\n    }\n</code></pre>\n\n<p>This, however ...</p>\n\n<pre><code>    @Test\n    fun withoutXFF_remoteOrigin(){\n        headers.origin = NON_LOCAL_IP_1\n        headers.host = InetSocketAddress(NON_LOCAL_IP_1,8080)\n        val request = HttpEntity&lt;Any&gt;(headers)\n\n\n\n        val remoteAddress = rest.exchange(\"/remoteAddr\", HttpMethod.GET,request,String::class.java).body!!\n\n\n\n        assertThat(remoteAddress).isEqualTo(NON_LOCAL_IP_1)\n    }\n</code></pre>\n\n<p>gives me an</p>\n\n<pre><code>org.junit.ComparisonFailure: \nExpected :\"212.13.43.12\"\nActual   :\"127.0.0.1\"\n</code></pre>\n\n<p>My expectation, here, is that the IP is taken from the IP header, not the HTTP headers. Can I somehow change that IP to verify?</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1557906464, "post_id": 56144037, "comment_id": 98918221, "body": "It should be <code>@Entity</code>, <code>String</code>"}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "reply_to_user": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1557906623, "post_id": 56144037, "comment_id": 98918303, "body": "Uppercase E and S?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1557913080, "post_id": 56144037, "comment_id": 98921879, "body": "Yes, Java and Kotlin are both case-sensitive."}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557914579, "post_id": 56144037, "comment_id": 98922813, "body": "Thank you, i have made a note of it, :)"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "edited": false, "score": 0, "creation_date": 1558372701, "post_id": 56144037, "comment_id": 99071561, "body": "any update ????"}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1558379242, "post_id": 56144037, "comment_id": 99074035, "body": "Sortof, not using room but using sharedPreferences instead. using android:onClick on Textview, calling a function in MainActivity.ky, <a href=\"https://github.com/brobostigon/TW01/blob/master/app/src/main/java/com/taylorworld/tw01/MainActivity.kt\" rel=\"nofollow noreferrer\">github.com/brobostigon/TW01/blob/master/app/src/main/java/co&zwnj;&#8203;m/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557907288, "post_id": 56144151, "comment_id": 98918665, "body": "into two separate files?"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557907495, "post_id": 56144151, "comment_id": 98918769, "body": "Don&#39;t take them out."}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557908212, "post_id": 56144151, "comment_id": 98919141, "body": "<a href=\"https://imagebin.ca/v/4h9mDrglPqrL\" rel=\"nofollow noreferrer\">imagebin.ca/v/4h9mDrglPqrL</a> i put them both in stats.kt, i am getting less errors."}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557908323, "post_id": 56144151, "comment_id": 98919200, "body": "You miss to import some reference. Use your mouse and point to the red line. You should get the errors."}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557908602, "post_id": 56144151, "comment_id": 98919358, "body": "Add import <code>kotlinx.android.parcel.Parcelize</code> on top."}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557909242, "post_id": 56144151, "comment_id": 98919669, "body": "I added that, and parcel in that import is showing red and an unresolved reference error."}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557911224, "post_id": 56144151, "comment_id": 98920769, "body": "the &#39;Project: TW01&#39; or &#39;Module: app&#39; build.gradle, or both?"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557912763, "post_id": 56144151, "comment_id": 98921701, "body": "The reason is because you are using <code>androidx</code>, but I not. Remove all the red lines."}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557912966, "post_id": 56144151, "comment_id": 98921814, "body": "check my answer again."}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1557914554, "post_id": 56144151, "comment_id": 98922789, "body": "<a href=\"https://imagebin.ca/v/4hAJQJoI5q4v\" rel=\"nofollow noreferrer\">imagebin.ca/v/4hAJQJoI5q4v</a> that seems to have progressed it, and shows the two errors, when i click on those two errors, it highlights the {} on line 22."}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1558024137, "post_id": 56144151, "comment_id": 98972360, "body": "<code>@PrimaryKey    @ColumnInfo(name = &quot;charecter&quot;)</code>"}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1558073580, "post_id": 56144151, "comment_id": 98986808, "body": "it did not, because as soon as i added the RoomDatabase, as detailed below, it became uncompilable again and throws errors again."}], "tags": [], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1557912956, "last_edit_date": 1557912956, "creation_date": 1557906683, "answer_id": 56144151, "question_id": 56144037, "link": "https://stackoverflow.com/questions/56144037/how-to-store-basic-dd-stats-within-my-app-using-room-in-such-a-way-that-they-c/56144151#56144151", "title": "how to store basic D&amp;D stats within my app using room, in such a way that they can be edited and retrieved", "body": "<p>I would suggest you to move Entity class and Dao interface to different class.</p>\n\n<pre><code>package com.taylorworld.tw01\n\nimport androidx.lifecycle.LiveData\nimport androidx.room.*\nimport androidx.room.ColumnInfo\nimport androidx.room.Entity\nimport androidx.room.PrimaryKey\n\n@Entity (tableName = \"stat_table\")\ndata class Stats(\n    @ColumnInfo(name = \"stat\") val stat: String,\n    @PrimaryKey val num: Int)\n\n@Dao\ninterface StatDao {\n    @Query(\"SELECT stat from stat_table\")\n    fun getStats(): LiveData&lt;List&lt;Stats&gt;&gt;\n\n    @Insert\n    suspend fun insert(stat: Stats)\n\n    @Abstract val statDao: StatDao{}\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1558029548, "post_id": 56147952, "comment_id": 98974896, "body": "I added your above posted RoomDatabase into stats.kt, and it resulted in the following errors, <a href=\"https://imagebin.ca/v/4hJeR9Jxm8R1\" rel=\"nofollow noreferrer\">imagebin.ca/v/4hJeR9Jxm8R1</a> , i checked it as far as i understand it and it looks right."}, {"owner": {"reputation": 33, "user_id": 10910819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4d64f786f4c5f496b8da7903c4d447?s=128&d=identicon&r=PG&f=1", "display_name": "Salladsmannen", "link": "https://stackoverflow.com/users/10910819/salladsmannen"}, "reply_to_user": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1558079561, "post_id": 56147952, "comment_id": 98989436, "body": "I see that someone else has had the same issue, I&#39;m not sure what causes it, but you could try the solution stated here:  <a href=\"https://stackoverflow.com/questions/44485631/room-persistence-errorentities-and-pojos-must-have-a-usable-public-constructor\" title=\"room persistence errorentities and pojos must have a usable public constructor\">stackoverflow.com/questions/44485631/&hellip;</a>  Now to be a bit clearer, the Database class should be separate from the DAO. The DAO is simply a generated interface which helps generate the classes which will access your database.  The class I stated in my answer should exist in addition to your StatsDao, so you should be able to keep your StatsDao and entity as they were prior"}, {"owner": {"reputation": 33, "user_id": 10910819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4d64f786f4c5f496b8da7903c4d447?s=128&d=identicon&r=PG&f=1", "display_name": "Salladsmannen", "link": "https://stackoverflow.com/users/10910819/salladsmannen"}, "reply_to_user": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 1, "creation_date": 1558080053, "post_id": 56147952, "comment_id": 98989666, "body": "Get back to me if this is unclear. I also suggest, just as @JohnJoe stated, that you separate the entity and the DAO into two different classes."}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1558084922, "post_id": 56147952, "comment_id": 98992256, "body": "<a href=\"https://github.com/brobostigon/TW01/blob/master/app/src/main/java/com/taylorworld/tw01/stats.kt\" rel=\"nofollow noreferrer\">github.com/brobostigon/TW01/blob/master/app/src/main/java/co&zwnj;&#8203;m/&hellip;</a> i separated the entity and DAO as @JohnJoe suggested. <a href=\"https://imagebin.ca/v/4hO8AbCIyPCd\" rel=\"nofollow noreferrer\">imagebin.ca/v/4hO8AbCIyPCd</a> i seperated the database as you suggested into something seperate, results in the error shown in that picture."}, {"owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "edited": false, "score": 0, "creation_date": 1558096867, "post_id": 56147952, "comment_id": 98998358, "body": "i have made some changes, <a href=\"https://github.com/brobostigon/TW01/commit/13c80e5e9fe3a971f722e50b91a372106dd6fb12\" rel=\"nofollow noreferrer\">github.com/brobostigon/TW01/commit/&hellip;</a> and it certainly gets further and am left with the following error, <a href=\"https://imagebin.ca/v/4hP7SICXFXSr\" rel=\"nofollow noreferrer\">imagebin.ca/v/4hP7SICXFXSr</a> &quot;Expecting a top level declaration&quot;."}], "tags": [], "owner": {"reputation": 33, "user_id": 10910819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4d64f786f4c5f496b8da7903c4d447?s=128&d=identicon&r=PG&f=1", "display_name": "Salladsmannen", "link": "https://stackoverflow.com/users/10910819/salladsmannen"}, "is_accepted": false, "score": 0, "last_activity_date": 1557918619, "creation_date": 1557918619, "answer_id": 56147952, "question_id": 56144037, "link": "https://stackoverflow.com/questions/56144037/how-to-store-basic-dd-stats-within-my-app-using-room-in-such-a-way-that-they-c/56147952#56147952", "title": "how to store basic D&amp;D stats within my app using room, in such a way that they can be edited and retrieved", "body": "<p>Are you aware that a RoomDatabase is needed to access the DAOs? It might look something like this:</p>\n\n<pre><code>@Database(\n  entities = [(Stats::class)],\n  version = 1,\n  exportSchema = false\n)\nabstract class DDDatabase : RoomDatabase() {\n\n  abstract fun statDao(): StatDao\n\n  private var inst: DDDatabase? = null\n  private val instLock = Object()\n\n  fun getInstance(context: Context): DDDatabase = inst ?: synchronized(instLock) {\n    return inst ?: run {\n      inst = Room.databaseBuilder(\n        context,\n        DDDatabase::class.java, \"name of the database\"\n      ).build()\n      inst!!\n  }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>however I use the applicationContext instead of injecting a context. You might then later use it as follows:</p>\n\n<pre><code>DDDatabase.getDatabase().statDao().getStats()\n</code></pre>\n\n<p>I however see that your Query for getStats is not correctly constructed. If you want all of the Stats in the database it should be written as:</p>\n\n<pre><code>@Query(\"SELECT * from stat_table\")\n    fun getStats(): LiveData&lt;List&lt;Stats&gt;&gt;\n</code></pre>\n\n<p>Please mark the answer as approved if it works for you, or get back to me if it doesn't :)</p>\n"}], "owner": {"reputation": 17, "user_id": 11502526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nWQXlbtKKxc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9GTkFI-P1RoXM4V50e8VFokLcog/mo/photo.jpg?sz=128", "display_name": "philip taylor", "link": "https://stackoverflow.com/users/11502526/philip-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557918619, "creation_date": 1557906248, "last_edit_date": 1557916290, "question_id": 56144037, "link": "https://stackoverflow.com/questions/56144037/how-to-store-basic-dd-stats-within-my-app-using-room-in-such-a-way-that-they-c", "title": "how to store basic D&amp;D stats within my app using room, in such a way that they can be edited and retrieved", "body": "<p>I am attempting to write an app for my D&amp;D group, and one of the functions will be to store the groups character stats, which i will display in the app.</p>\n\n<p>I went to the following tutorials and documents to try and learn about how to do it, \n<a href=\"https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin/#0\" rel=\"nofollow noreferrer\">https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin/#0</a>\n<a href=\"https://developer.android.com/training/data-storage/room/defining-data.html\" rel=\"nofollow noreferrer\">https://developer.android.com/training/data-storage/room/defining-data.html</a>\n<a href=\"https://developer.android.com/guide/topics/data/data-storage\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/data/data-storage</a>\nI got the basics, and created a new kotlin file within my project to define the entity, Dao etc, and will post my code how far i have got, however have reached a dead end of my understanding in trying to get it to work. I am trying to do something as minimal as possible and get that working, and then expand it to store the other character stats.</p>\n\n<p>stats.kt</p>\n\n<pre><code>package com.taylorworld.tw01\n\nimport androidx.lifecycle.LiveData\nimport androidx.room.*\n\n@entity (tablename = \"stat_table\")\ndata class Stats(\n    @ColumnInfo(name = \"stat\") val stat: string,\n    @PrimaryKey val num: Int)\n)\n\n@Dao\ninterface StatDao {\n    @Query(\"SELECT stat from stat_table\")\n    fun getStats(): LiveData&lt;&lt;List&lt;Stats&gt;\n\n    @Insert\n    suspend fun insert(stat: Stats)\n}\n@Abstract val statDao: StatDao{}\n</code></pre>\n\n<p>when i try and compile the project, i get the following error messages.\n<a href=\"https://imagebin.ca/v/4h9cpZurjoA2\" rel=\"nofollow noreferrer\">https://imagebin.ca/v/4h9cpZurjoA2</a></p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1557905102, "post_id": 56143657, "comment_id": 98917464, "body": "Try <code>WriteResponseMess.Companion.deleteAttachment(position);</code>. is this what you are asking ?"}, {"owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "edited": false, "score": 0, "creation_date": 1557905221, "post_id": 56143657, "comment_id": 98917534, "body": "With annotation @JvmStatic it should work without Companion"}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "reply_to_user": {"reputation": 16050, "user_id": 4168607, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/Z0uMk.jpg?s=128&g=1", "display_name": "ADM", "link": "https://stackoverflow.com/users/4168607/adm"}, "edited": false, "score": 0, "creation_date": 1557905354, "post_id": 56143657, "comment_id": 98917606, "body": "@ADM, I have the access to this method, but variables are still closed for me :("}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1557906975, "post_id": 56143657, "comment_id": 98918495, "body": "You&#39;re holding data within static fields. This means that you have serious correctness and architectural problems. Fix them first (<code>static</code> is only for constants), migrate them (if this makes sense)."}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "reply_to_user": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1557907326, "post_id": 56143657, "comment_id": 98918683, "body": "@Miha_x64, I&#39;m moving from java and don&#39;t know some parts of kotlin, I suggested that it will be right for this task, so I don&#39;t have to use static as I understand? how I can solve this task without static fields? via interface or like what?"}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1557908337, "post_id": 56143657, "comment_id": 98919212, "body": "@AndrewGoroshko I can&#39;t answer without knowing why do you use statics. If you need to pass data across activities, consider implementing <code>Parcelable</code> and using Intent Extras."}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557910391, "post_id": 56143657, "comment_id": 98920294, "body": "@AndrewGoroshko, why is that method static?"}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "reply_to_user": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557916828, "post_id": 56143657, "comment_id": 98924199, "body": "@r2rek, because I need to use method from adapter"}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557917679, "post_id": 56143657, "comment_id": 98924702, "body": "@AndrewGoroshko and are you using it from outside the activity?"}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "reply_to_user": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557918187, "post_id": 56143657, "comment_id": 98924981, "body": "@r2rek, about what are you asking?? about method or what? I use this method inside activity, but I don&#39;t have access to activity members"}, {"owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "edited": false, "score": 0, "creation_date": 1557918230, "post_id": 56143657, "comment_id": 98925001, "body": "If you&#39;re using it inside the activity that has the adapter, then you shouldn&#39;t make it static"}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "edited": false, "score": 0, "creation_date": 1557918365, "post_id": 56143657, "comment_id": 98925079, "body": "but I need to send data from adapter to activity, and as I understand I have to use static for it"}], "answers": [{"comments": [{"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "edited": false, "score": 0, "creation_date": 1557905465, "post_id": 56143757, "comment_id": 98917670, "body": "I don&#39;t understand about member variables, right now I &quot;see&quot; this fun, but I can&#39;t get access to activity variables anyway"}, {"owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "reply_to_user": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "edited": false, "score": 0, "creation_date": 1557905686, "post_id": 56143757, "comment_id": 98917801, "body": "You have to <b>make your activity variables static</b> to gain access to them by a <b>static function</b> ..  @AndrewGoroshko <code>deleteAttachment</code> is a static function."}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "edited": false, "score": 0, "creation_date": 1557905688, "post_id": 56143757, "comment_id": 98917805, "body": "hmmm... this companion object is placed at my activity, and I thought that I can get access to activity variables like in Java"}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "edited": false, "score": 0, "creation_date": 1557905806, "post_id": 56143757, "comment_id": 98917869, "body": "and how I have to change <code>var</code> to <code>static</code>? in kotlin as I understand we have smth like companion, but I didn&#39;t manage to use it for my purposes"}, {"owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "reply_to_user": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "edited": false, "score": 0, "creation_date": 1557906023, "post_id": 56143757, "comment_id": 98917986, "body": "<code>To achieve what you want</code> ... you need to use an <code>interface or lambda functions</code> in kotlin ... <b>which is altogether a separate question</b> . Check this <a href=\"https://antonioleiva.com/lambdas-kotlin/\" rel=\"nofollow noreferrer\">antonioleiva.com/lambdas-kotlin</a> @AndrewGoroshko"}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "edited": false, "score": 0, "creation_date": 1557906087, "post_id": 56143757, "comment_id": 98918025, "body": "so as I understood I can&#39;t do it like in Java?)"}, {"owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "reply_to_user": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "edited": false, "score": 0, "creation_date": 1557906161, "post_id": 56143757, "comment_id": 98918070, "body": "Correct.. in this case.. you cant. but you can surely use <code>lambdas</code> which is also recommended in java... instead of using static functions.. @AndrewGoroshko"}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "edited": false, "score": 0, "creation_date": 1557906271, "post_id": 56143757, "comment_id": 98918126, "body": "thank you for your help, I didn&#39;t understand bigger part of info which you gave, so I will go into kotlin and will try to solve this problem :)"}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1557907072, "post_id": 56143757, "comment_id": 98918555, "body": "To clarify: this answer suggests converting existing bugs to a new language."}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "reply_to_user": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1557907181, "post_id": 56143757, "comment_id": 98918605, "body": "@Miha_x64, which bugs did you mean?"}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "reply_to_user": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "edited": false, "score": 0, "creation_date": 1557908250, "post_id": 56143757, "comment_id": 98919159, "body": "@AndrewGoroshko, I mean keeping data in static fields. This is implies coupling, memory leak, and they will disappear after process restart."}, {"owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "reply_to_user": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1557908307, "post_id": 56143757, "comment_id": 98919191, "body": "@Miha_x64, I know that static fields cause some problems, but I managed to solve this task only via static fields :("}], "tags": [], "owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "is_accepted": true, "score": 1, "last_activity_date": 1557905210, "creation_date": 1557905210, "answer_id": 56143757, "question_id": 56143657, "link": "https://stackoverflow.com/questions/56143657/how-to-get-access-to-view-elements-from-adapter-kotlin/56143757#56143757", "title": "How to get access to view elements from adapter kotlin?", "body": "<p>A <code>static block</code> can access only <strong><code>static members</code></strong>.</p>\n\n<p>The activity <code>member variables</code> should also be a part of the <code>companion object</code>. </p>\n\n<p>For instance :-</p>\n\n<pre><code>companion object {\n    var mNames : MutableList&lt;Name&gt; = mutableListOf // is a member variable\n    ......\n    fun deleteAttachment(position: Int) {\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1404, "user_id": 9363441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d35c7fa72cae0a189c4fb090de3b87?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9363441/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 56143757, "answer_count": 1, "score": 0, "last_activity_date": 1557905210, "creation_date": 1557904843, "question_id": 56143657, "link": "https://stackoverflow.com/questions/56143657/how-to-get-access-to-view-elements-from-adapter-kotlin", "title": "How to get access to view elements from adapter kotlin?", "body": "<p>I'm moving from java to kotlin and I faced with some difficulties which are connected with static method usage at kotlin. I'd like to get access from recyclerView adapter to views at my activity. At Java I did smth like that at adapter:</p>\n\n<pre><code>WriteResponseMess.deleteAttachment(position);\n</code></pre>\n\n<p>and static method at my activity:</p>\n\n<pre><code>public static void deleteAttachment(int adapterPosition) {\n        mNames = adapter.getItems();\n        mNames.remove(adapterPosition);\n        adapter.updateNames(mNames);\n        adapter.notifyDataSetChanged();\n        mNames = adapter.getItems();\n    }\n</code></pre>\n\n<p>right now I want to do it via kotlin. The main tack is that I have to delete item of RV and update views. I have read <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://stackoverflow.com/questions/51819983/kotlin-update-view-using-function-created-in-companion-object\">this</a> resources and I have done smth like that:</p>\n\n<pre><code>companion object {\n        @JvmStatic\n        fun deleteAttachment(position: Int) {\n\n        }\n    }\n</code></pre>\n\n<p>but I don't have any access to activity variables, so what I have to do in that situation?</p>\n"}, {"tags": ["arraylist", "kotlin", "collections", "transform"], "comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 4, "creation_date": 1557904994, "post_id": 56143435, "comment_id": 98917402, "body": "What about <code>List.map()</code>?"}, {"owner": {"reputation": 2365, "user_id": 4774054, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/LRst1.jpg?s=128&g=1", "display_name": "Frank Neblung", "link": "https://stackoverflow.com/users/4774054/frank-neblung"}, "edited": false, "score": 0, "creation_date": 1557907728, "post_id": 56143435, "comment_id": 98918906, "body": "I recommend <a href=\"https://play.kotlinlang.org/byExample/05_Collections/04_map\" rel=\"nofollow noreferrer\">Learning Kotlin by Example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5338, "user_id": 1209216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63a3484cba986a0021642831c7609a93?s=128&d=identicon&r=PG", "display_name": "user1209216", "link": "https://stackoverflow.com/users/1209216/user1209216"}, "edited": false, "score": 0, "creation_date": 1557989417, "post_id": 56143780, "comment_id": 98952339, "body": "Well this seems to be what I was looking for, thanks"}], "tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": true, "score": 2, "last_activity_date": 1557905295, "creation_date": 1557905295, "answer_id": 56143780, "question_id": 56143435, "link": "https://stackoverflow.com/questions/56143435/kotlin-guavas-iterables-transform-equivalent/56143780#56143780", "title": "Kotlin - Guava&#39;s Iterables.transform equivalent?", "body": "<p>Kotlin has <code>map</code> extension function on Iterables. E. g.</p>\n\n<pre><code>calendarEvents = wastageSchedule.map { item -&gt;\n    BaseCalendarEvent(...)\n}\n</code></pre>\n"}], "owner": {"reputation": 5338, "user_id": 1209216, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63a3484cba986a0021642831c7609a93?s=128&d=identicon&r=PG", "display_name": "user1209216", "link": "https://stackoverflow.com/users/1209216/user1209216"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 56143780, "answer_count": 1, "score": 0, "last_activity_date": 1557905295, "creation_date": 1557903846, "last_edit_date": 1557904526, "question_id": 56143435, "link": "https://stackoverflow.com/questions/56143435/kotlin-guavas-iterables-transform-equivalent", "title": "Kotlin - Guava&#39;s Iterables.transform equivalent?", "body": "<p>Please look at this Java code:</p>\n\n<pre><code>calendarEvents = Lists.newArrayList(Iterables.transform(\n    wastageSchedule, item -&gt; new BaseCalendarEvent(\n        item.getWastageTypeName(),\n        item.getWastageTypeName(),\n        item.getLocation(),\n        ContextCompat.getColor(this, R.color.colorWastageItem),\n        item.getStartDate(),\n        item.getEndDate(),\n        true\n    )\n));\n</code></pre>\n\n<p>It just transforms <code>ArrayList&lt;CalendarEvent&gt;</code> into <code>ArrayList&lt;BaseCalendarEvent&gt;</code>. Is there any equivalent to it in Kotlin? I looked into Kotlin documentation, but I did not find anything like <code>transform</code>, can you provide any tip?</p>\n"}, {"tags": ["spring-boot", "kotlin", "configuration", "javabeans"], "answers": [{"tags": [], "owner": {"reputation": 12916, "user_id": 829970, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a438b9fd2889adabf56d0b71566a1702?s=128&d=identicon&r=PG", "display_name": "Moshe Katz", "link": "https://stackoverflow.com/users/829970/moshe-katz"}, "is_accepted": true, "score": 0, "last_activity_date": 1557899160, "creation_date": 1557899160, "answer_id": 56142445, "question_id": 56142444, "link": "https://stackoverflow.com/questions/56142444/migrating-to-configurationproperties-with-naming-conflicts/56142445#56142445", "title": "Migrating to @ConfigurationProperties with naming conflicts", "body": "<p>The proper way to do this is <em>not</em> to have a single <code>ConfigurationProperties</code> class with all the nested classes to build the whole structure, because that means you are unnecessarily filling in parts that you know will not be used because their corresponding beans are not registered.</p>\n\n<p>The best way to do this is to split out configuration classes <code>A</code> and <code>B</code> like this:</p>\n\n<pre><code>@Component\n@ConfigurationProperties(\"setting.mode.a\")\nclass AProperties {\n    lateinit var subsetting1: String\n    lateinit var subsetting2: String\n}\n\n@Component\n@ConfigurationProperties(\"setting.mode.b\")\nclass BProperties {\n    lateinit var subsetting1: String\n    lateinit var subsetting2: String\n}\n</code></pre>\n\n<p>Then change the <code>@Bean</code> definitions to use these classes directly instead of calling for the entire configuration object:</p>\n\n<pre><code>@Bean\n@ConditionalOnProperty(name = [\"setting.mode\"], havingValue = \"a\")\nfun a(properties: AProperties): CommonInterface {\n    return A(properties)\n}\n\n@Bean\n@ConditionalOnProperty(name = [\"setting.mode\"], havingValue = \"b\")\nfun b(properties: BProperties): CommonInterface {\n    return B(properties)\n}\n</code></pre>\n"}], "owner": {"reputation": 12916, "user_id": 829970, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a438b9fd2889adabf56d0b71566a1702?s=128&d=identicon&r=PG", "display_name": "Moshe Katz", "link": "https://stackoverflow.com/users/829970/moshe-katz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 56142445, "answer_count": 1, "score": 0, "last_activity_date": 1557899160, "creation_date": 1557899160, "question_id": 56142444, "link": "https://stackoverflow.com/questions/56142444/migrating-to-configurationproperties-with-naming-conflicts", "title": "Migrating to @ConfigurationProperties with naming conflicts", "body": "<p>I have a Spring Boot application with an <code>application.properties</code> file that looks like this:</p>\n\n<pre><code>setting.mode = a # Can be either `a` or `b`\nsetting.mode.a.subsetting1 = abc\nsetting.mode.a.subsetting2 = def\nsetting.mode.b.subsetting1 = ghi\nsetting.mode.b.subsetting2 = jkl\n</code></pre>\n\n<p>We used to use <code>@Value</code> annotations to read these values, so it didn't matter that the name of the String <code>setting.mode</code> is the same as the prefix of the \"sub-settings\".</p>\n\n<p>I was given the task of cleaning up this application, and I want to move to using <code>@ConfigurationProperties</code> with a large configuration object that matches the content of the properties file in order to make the code easier to work with.</p>\n\n<p>I was thinking that the structure of the configuration class would look something like this (Kotlin example, but it doesn't matter):</p>\n\n<pre><code>@Component\n@ConfigurationProperties(\"setting\")\nclass MyProperties {\n\n    // Has the value either `a` or `b` to tell us which component to use\n    lateinit var mode: String\n\n    // THE PROBLEM IS HERE\n    // -------------------\n    //\n    // The two classes below need to be under the `mode`\n    // prefix, but they can't be because it is already used\n    // to get its String value above.\n\n    val a = A()\n\n    val b = B()\n\n    class A {\n        lateinit var subsetting1: String\n        lateinit var subsetting2: String\n    }\n\n    class B {\n        lateinit var subsetting1: String\n        lateinit var subsetting2: String\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Note that the value of <code>setting.mode</code> is also used to decide which bean to register:</p>\n\n<pre><code>@Bean\n@ConditionalOnProperty(name = [\"setting.mode\"], havingValue = \"a\")\nfun a(properties: MyProperties): CommonInterface {\n    return A(properties.mode.a)\n}\n\n@Bean\n@ConditionalOnProperty(name = [\"setting.mode\"], havingValue = \"b\")\nfun b(properties: MyProperties): CommonInterface {\n    return B(properties.mode.b)\n}\n</code></pre>\n\n<hr>\n\n<p>How can I set up this configuration (without having to rewrite the <code>application.properties</code> to remove the naming issue for all instances of this application)?</p>\n"}, {"tags": ["android", "kotlin", "anko", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": true, "score": 1, "last_activity_date": 1557905644, "creation_date": 1557905644, "answer_id": 56143881, "question_id": 56142234, "link": "https://stackoverflow.com/questions/56142234/what-is-the-replacement-of-anko-bg/56143881#56143881", "title": "What is the replacement of anko bg?", "body": "<p>Consider creating your own <code>ThreadPoolExecutor</code>s for different kinds of background tasks and using them as coroutine dispatchers.</p>\n\n<p>And you always can take a look at <a href=\"https://github.com/Kotlin/anko/blob/b036b59aa5d9d24dc49ad2dfcc57fe4114436175/anko/library/generated/coroutines/src/main/java/bg.kt\" rel=\"nofollow noreferrer\">Anko <code>bg</code> source code</a> for reference.</p>\n"}, {"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 1, "last_activity_date": 1557906887, "creation_date": 1557906887, "answer_id": 56144202, "question_id": 56142234, "link": "https://stackoverflow.com/questions/56142234/what-is-the-replacement-of-anko-bg/56144202#56144202", "title": "What is the replacement of anko bg?", "body": "<p>You shouldn't use any replacement for <code>bg</code> because Fuel supports async HTTP. You don't need any background thread to perform requests. Additionally, Fuel has <a href=\"https://github.com/kittinunf/fuel/blob/master/fuel-coroutines/README.md\" rel=\"nofollow noreferrer\">first-class support for coroutines</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": false, "score": 0, "last_activity_date": 1557910638, "creation_date": 1557910638, "answer_id": 56145306, "question_id": 56142234, "link": "https://stackoverflow.com/questions/56142234/what-is-the-replacement-of-anko-bg/56145306#56145306", "title": "What is the replacement of anko bg?", "body": "<p>as per the info, you should just replace it with coroutine's async. \nProbably something among the lines of:</p>\n\n<pre><code>return async(Dispatchers.IO) {\n            HttpService.post&lt;GenResponse&gt;(\"/auth/login\",login.toJsonString())\n        }.await()\n</code></pre>\n\n<p>Let me know if it helps :)!</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 11235113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2316faca193c676eb85176363d4786a7?s=128&d=identicon&r=PG&f=1", "display_name": "user2729183", "link": "https://stackoverflow.com/users/11235113/user2729183"}, "is_accepted": false, "score": 0, "last_activity_date": 1557910945, "creation_date": 1557910945, "answer_id": 56145403, "question_id": 56142234, "link": "https://stackoverflow.com/questions/56142234/what-is-the-replacement-of-anko-bg/56145403#56145403", "title": "What is the replacement of anko bg?", "body": "<p>Another approach</p>\n\n<pre><code>suspend fun login(login: Login): Triple&lt;Request, Response, Result&lt;GenResponse, FuelError&gt;&gt; {\n        return withContext(Dispatchers.Default) {\n            HttpService.postNoAuth&lt;GenResponse&gt;(\"/auth/login\", login.toJsonString())\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 11235113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2316faca193c676eb85176363d4786a7?s=128&d=identicon&r=PG&f=1", "display_name": "user2729183", "link": "https://stackoverflow.com/users/11235113/user2729183"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 56143881, "answer_count": 4, "score": 1, "last_activity_date": 1557910945, "creation_date": 1557897761, "question_id": 56142234, "link": "https://stackoverflow.com/questions/56142234/what-is-the-replacement-of-anko-bg", "title": "What is the replacement of anko bg?", "body": "<p>I am using the anko bg functionality to manage background task.</p>\n\n<p>The code is as following</p>\n\n<pre><code>import com.github.kittinunf.fuel.core.FuelError\nimport com.github.kittinunf.fuel.core.Request\nimport com.github.kittinunf.fuel.core.Response\nimport com.github.kittinunf.result.Result\nimport org.jetbrains.anko.coroutines.experimental.bg\n\nobject AuthenticationService {\n    suspend fun login(login: Login): Triple&lt;Request, Response, Result&lt;GenResponse, FuelError&gt;&gt; {\n        return bg {\n            HttpService.post&lt;GenResponse&gt;(\"/auth/login\",login.toJsonString())\n        }.await()\n    }\n}\n</code></pre>\n\n<p>it is showing bg is deprecated and asking me to use <code>async(block)</code></p>\n\n<p>how to replace this background task with async?</p>\n"}, {"tags": ["android", "kotlin", "gson", "retrofit", "android-r8"], "answers": [{"tags": [], "owner": {"reputation": 1673, "user_id": 3775934, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/i2TBD.png?s=128&g=1", "display_name": "Scrobot", "link": "https://stackoverflow.com/users/3775934/scrobot"}, "is_accepted": false, "score": 0, "last_activity_date": 1557899782, "creation_date": 1557899782, "answer_id": 56142550, "question_id": 56142150, "link": "https://stackoverflow.com/questions/56142150/fatal-exception-java-lang-nullpointerexception-in-release-build/56142550#56142550", "title": "Fatal Exception: java.lang.NullPointerException in release build", "body": "<p>I suppose, that you receive null in the json field <code>min_allowed_version</code> because of exception is clearly typed:</p>\n\n<pre><code>Fatal Exception: java.lang.NullPointerException throw with null \nexceptionin.hopq.hopq.authentication.models.AppUpdateSourceDO$AppUpdate.getMinAllowedVersion (AppUpdateSourceDO.java:3)\n</code></pre>\n\n<p>It means, that when you calling getter of <code>minAllowedVersion</code> field and its returns null - you caught NPE. Try to use null-safety and maybe all will works fine.</p>\n\n<pre><code>data class AppUpdate(\n        @SerializedName(\"excluded_versions\")\n        val excludedVersions: List&lt;ExcludedVersion&gt; = listOf(),\n        @SerializedName(\"min_allowed_version\")\n        val minAllowedVersion: Int? = null,\n        @SerializedName(\"min_allowed_version_ios\")\n        val minAllowedVersionIos: String? = null,\n        @SerializedName(\"recommended_version\")\n        val recommendedVersion: Int? = null\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1435, "user_id": 1159930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5Hizy.jpg?s=128&g=1", "display_name": "Markymark", "link": "https://stackoverflow.com/users/1159930/markymark"}, "edited": false, "score": 2, "creation_date": 1559853149, "post_id": 56149162, "comment_id": 99559674, "body": "Seems that R8 still has this bug <a href=\"https://issuetracker.google.com/issues/120277396\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/120277396</a> Hope they fix this soon."}, {"owner": {"reputation": 3408, "user_id": 4405246, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-nmMv-nKmVsI/AAAAAAAAAAI/AAAAAAAAAM8/AH3o1QNdTo0/photo.jpg?sz=128", "display_name": "pratham kesarkar", "link": "https://stackoverflow.com/users/4405246/pratham-kesarkar"}, "reply_to_user": {"reputation": 5210, "user_id": 1343788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ttSYv.jpg?s=128&g=1", "display_name": "Mehul Kabaria", "link": "https://stackoverflow.com/users/1343788/mehul-kabaria"}, "edited": false, "score": 0, "creation_date": 1565703903, "post_id": 56149162, "comment_id": 101429727, "body": "@MehulKabaria pleasure"}, {"owner": {"reputation": 2050, "user_id": 3448003, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/Jf7IY.jpg?s=128&g=1", "display_name": "Bajrang Hudda", "link": "https://stackoverflow.com/users/3448003/bajrang-hudda"}, "edited": false, "score": 0, "creation_date": 1567774475, "post_id": 56149162, "comment_id": 102074896, "body": "Is it good to do so for code obfuscation or is there any impact?"}, {"owner": {"reputation": 2383, "user_id": 5634798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDdoW.png?s=128&g=1", "display_name": "Gundu Bandgar", "link": "https://stackoverflow.com/users/5634798/gundu-bandgar"}, "edited": false, "score": 1, "creation_date": 1569322782, "post_id": 56149162, "comment_id": 102552035, "body": "great answer kesarkar sir, but what is enableR8?"}, {"owner": {"reputation": 3408, "user_id": 4405246, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-nmMv-nKmVsI/AAAAAAAAAAI/AAAAAAAAAM8/AH3o1QNdTo0/photo.jpg?sz=128", "display_name": "pratham kesarkar", "link": "https://stackoverflow.com/users/4405246/pratham-kesarkar"}, "reply_to_user": {"reputation": 2383, "user_id": 5634798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDdoW.png?s=128&g=1", "display_name": "Gundu Bandgar", "link": "https://stackoverflow.com/users/5634798/gundu-bandgar"}, "edited": false, "score": 0, "creation_date": 1569406954, "post_id": 56149162, "comment_id": 102584549, "body": "@GunduBandgar R8 is google&#39;s new code obfuscation engine similar to proguard."}], "tags": [], "owner": {"reputation": 3408, "user_id": 4405246, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-nmMv-nKmVsI/AAAAAAAAAAI/AAAAAAAAAM8/AH3o1QNdTo0/photo.jpg?sz=128", "display_name": "pratham kesarkar", "link": "https://stackoverflow.com/users/4405246/pratham-kesarkar"}, "is_accepted": true, "score": 29, "last_activity_date": 1557922561, "creation_date": 1557922561, "answer_id": 56149162, "question_id": 56142150, "link": "https://stackoverflow.com/questions/56142150/fatal-exception-java-lang-nullpointerexception-in-release-build/56149162#56149162", "title": "Fatal Exception: java.lang.NullPointerException in release build", "body": "<p>Finally solved this issue. This is because of the new R8 code obfuscation. Simply disable it from your project by adding this to the gradle.properties file </p>\n\n<p><code>android.enableR8=false</code></p>\n\n<p>Additionally you add this to your proguard rules file.</p>\n\n<pre><code># Prevent R8 from leaving Data object members always null\n-keepclassmembers,allowobfuscation class * {\n  @com.google.gson.annotations.SerializedName &lt;fields&gt;;\n}\n</code></pre>\n\n<p>However adding this to the proguard didn't really worked out.</p>\n"}, {"tags": [], "owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "is_accepted": false, "score": 9, "last_activity_date": 1562144961, "creation_date": 1562144961, "answer_id": 56866636, "question_id": 56142150, "link": "https://stackoverflow.com/questions/56142150/fatal-exception-java-lang-nullpointerexception-in-release-build/56866636#56866636", "title": "Fatal Exception: java.lang.NullPointerException in release build", "body": "<p>Seems GSON and R8 don't work well together, and it's written about <a href=\"https://issuetracker.google.com/issues/136600124#comment4\" rel=\"noreferrer\"><strong>here</strong></a>:</p>\n\n<blockquote>\n  <p>Actually, the following should also work:</p>\n  \n  <p>-keepclassmembers,allowobfuscation class * {\n        @com.google.gson.annotations.SerializedName ;\n      }\n  -keep,allowobfuscation @interface com.google.gson.annotations.SerializedName</p>\n  \n  <p>That will minify (obfuscate) the names of the fields and the attribute\n  as well, to further reduce the size of the final APK.</p>\n</blockquote>\n\n<p>In addition, you can see the next rules in the <a href=\"https://github.com/google/gson/blob/master/examples/android-proguard-example/proguard.cfg\" rel=\"noreferrer\"><strong>sample of Gson</strong></a>:</p>\n\n<pre><code>##---------------Begin: proguard configuration for Gson  ----------\n# Gson uses generic type information stored in a class file when working with fields. Proguard\n# removes such information by default, so configure it to keep all of it.\n-keepattributes Signature\n\n# For using GSON @Expose annotation\n-keepattributes *Annotation*\n\n# Gson specific classes\n-dontwarn sun.misc.**\n#-keep class com.google.gson.stream.** { *; }\n\n# Application classes that will be serialized/deserialized over Gson\n-keep class com.google.gson.examples.android.model.** { &lt;fields&gt;; }\n\n# Prevent proguard from stripping interface information from TypeAdapterFactory,\n# JsonSerializer, JsonDeserializer instances (so they can be used in @JsonAdapter)\n-keep class * implements com.google.gson.TypeAdapterFactory\n-keep class * implements com.google.gson.JsonSerializer\n-keep class * implements com.google.gson.JsonDeserializer\n\n# Prevent R8 from leaving Data object members always null\n-keepclassmembers,allowobfuscation class * {\n  @com.google.gson.annotations.SerializedName &lt;fields&gt;;\n}\n\n##---------------End: proguard configuration for Gson  ----------\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 597, "user_id": 11118648, "user_type": "registered", "profile_image": "https://graph.facebook.com/2204506889637057/picture?type=large", "display_name": "Bhaven Shah", "link": "https://stackoverflow.com/users/11118648/bhaven-shah"}, "is_accepted": false, "score": 2, "last_activity_date": 1564032959, "creation_date": 1564032959, "answer_id": 57194971, "question_id": 56142150, "link": "https://stackoverflow.com/questions/56142150/fatal-exception-java-lang-nullpointerexception-in-release-build/57194971#57194971", "title": "Fatal Exception: java.lang.NullPointerException in release build", "body": "<p>If the @SerializedName annotation is used consistently for data classes the following keep rule can be used</p>\n\n<pre><code>-keepclassmembers,allowobfuscation class * {\n  @com.google.gson.annotations.SerializedName &lt;fields&gt;;\n }\n</code></pre>\n\n<p>If the @SerializedName annotation is not used the following conservative rule can be used for each data class:</p>\n\n<pre><code>-keepclassmembers class MyDataClass {\n  !transient &lt;fields&gt;;\n }\n</code></pre>\n\n<p>For more info, you can check out below link :-</p>\n\n<p><a href=\"https://r8.googlesource.com/r8/+/refs/heads/master/compatibility-faq.md\" rel=\"nofollow noreferrer\">https://r8.googlesource.com/r8/+/refs/heads/master/compatibility-faq.md</a></p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 4920921, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BYPJ7Fszif8/AAAAAAAAAAI/AAAAAAAAAFo/JVhLjBhPtMI/photo.jpg?sz=128", "display_name": "Johana Lopez 1327", "link": "https://stackoverflow.com/users/4920921/johana-lopez-1327"}, "edited": false, "score": 0, "creation_date": 1584546506, "post_id": 57904190, "comment_id": 107471199, "body": "This solution worked for me. I implemented the first solution of this post and I had compilation problem with Dagger and OKHttp3 when building and signing my app for release"}], "tags": [], "owner": {"reputation": 795, "user_id": 3917166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX3sZ.jpg?s=128&g=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/3917166/abhishek"}, "is_accepted": false, "score": 22, "last_activity_date": 1568282201, "creation_date": 1568282201, "answer_id": 57904190, "question_id": 56142150, "link": "https://stackoverflow.com/questions/56142150/fatal-exception-java-lang-nullpointerexception-in-release-build/57904190#57904190", "title": "Fatal Exception: java.lang.NullPointerException in release build", "body": "<p>Disabling <code>R8</code> entirely might not be a good idea. But by adding below lines in your <strong>Proguard Rules</strong> file might solve the issue --</p>\n\n<pre><code>-keepclassmembers,allowobfuscation class * {\n    @com.google.gson.annotations.SerializedName &lt;fields&gt;;\n  }\n-keep,allowobfuscation @interface com.google.gson.annotations.SerializedName\n</code></pre>\n\n<p>This is also suggested by one of the Google developers as the desired solution. You can find his answer <a href=\"https://issuetracker.google.com/issues/136600124#comment4\" rel=\"noreferrer\">here</a> and you can also follow the entire discussion around it.</p>\n"}, {"tags": [], "owner": {"reputation": 964, "user_id": 5116572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af40e7f5b815ad0acca7c9c93db77d4?s=128&d=identicon&r=PG&f=1", "display_name": "art", "link": "https://stackoverflow.com/users/5116572/art"}, "is_accepted": false, "score": 0, "last_activity_date": 1576772374, "creation_date": 1576772374, "answer_id": 59413458, "question_id": 56142150, "link": "https://stackoverflow.com/questions/56142150/fatal-exception-java-lang-nullpointerexception-in-release-build/59413458#59413458", "title": "Fatal Exception: java.lang.NullPointerException in release build", "body": "<p>Using <a href=\"https://developer.android.com/reference/kotlin/androidx/annotation/Keep\" rel=\"nofollow noreferrer\"><code>@Keep</code></a> annotation can be a reasonable alternative for dealing with proguard files. Just annotate your data class with <code>@Keep</code> and the whole class with its members won't be minified.</p>\n\n<p>It is especially useful when names of all properties match with names of json fields and there is no need to annotate properties with <code>@SerializedName</code>. Proguard rules for classes with <code>@SerializedName</code> annotated fields (mentioned in other answers) are not applicable to such a case.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 9502867, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xoAfEQEzvGc/AAAAAAAAAAI/AAAAAAAABRI/I18anw4vCVE/photo.jpg?sz=128", "display_name": "Barral", "link": "https://stackoverflow.com/users/9502867/barral"}, "is_accepted": false, "score": 0, "last_activity_date": 1583181309, "creation_date": 1583181309, "answer_id": 60496257, "question_id": 56142150, "link": "https://stackoverflow.com/questions/56142150/fatal-exception-java-lang-nullpointerexception-in-release-build/60496257#60496257", "title": "Fatal Exception: java.lang.NullPointerException in release build", "body": "<p>You may need to use</p>\n\n<pre><code>-keepclassmembers enum * { *; }\n</code></pre>\n\n<p>to keep your enums</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 10575326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138d0e3e472c3b8dedbc6cb827d0d8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav bhiwaniwala", "link": "https://stackoverflow.com/users/10575326/gaurav-bhiwaniwala"}, "is_accepted": false, "score": 1, "last_activity_date": 1599134423, "creation_date": 1599134423, "answer_id": 63723226, "question_id": 56142150, "link": "https://stackoverflow.com/questions/56142150/fatal-exception-java-lang-nullpointerexception-in-release-build/63723226#63723226", "title": "Fatal Exception: java.lang.NullPointerException in release build", "body": "<p>In my case adding <code>android.enableR8=true</code> to my gradle.properties and <code>-keepclassmembers,allowobfuscation class * { @com.google.gson.annotations.SerializedName &lt;fields&gt;; }</code> to my proguard-rules.pro did the trick</p>\n"}], "owner": {"reputation": 3408, "user_id": 4405246, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-nmMv-nKmVsI/AAAAAAAAAAI/AAAAAAAAAM8/AH3o1QNdTo0/photo.jpg?sz=128", "display_name": "pratham kesarkar", "link": "https://stackoverflow.com/users/4405246/pratham-kesarkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7734, "favorite_count": 10, "accepted_answer_id": 56149162, "answer_count": 8, "score": 25, "last_activity_date": 1599134423, "creation_date": 1557897208, "last_edit_date": 1559972268, "question_id": 56142150, "link": "https://stackoverflow.com/questions/56142150/fatal-exception-java-lang-nullpointerexception-in-release-build", "title": "Fatal Exception: java.lang.NullPointerException in release build", "body": "<p>I am facing a weird issue in the release build of the app.\nHere's my exception</p>\n\n<pre><code>Fatal Exception: java.lang.NullPointerException`\nthrow with null exception\nin.hopq.hopq.authentication.models.AppUpdateSourceDO$AppUpdate.getMinAllowedVersion (AppUpdateSourceDO.java:3)\nin.hopq.hopq.authentication.activities.SplashActivity$onCreate$1.onChanged (SplashActivity.java:48)\nin.hopq.hopq.authentication.activities.SplashActivity$onCreate$1.onChanged (SplashActivity.java:31)\n</code></pre>\n\n<p>Pojo File </p>\n\n<pre><code>data class AppUpdateSourceDO(\n    @SerializedName(\"app_update\")\n    val appUpdate: AppUpdate,\n    @SerializedName(\"message\")\n    val message: String,\n    @SerializedName(\"success\")\n    val success: Boolean\n) {\ndata class AppUpdate(\n        @SerializedName(\"excluded_versions\")\n        val excludedVersions: List&lt;ExcludedVersion&gt;,\n        @SerializedName(\"min_allowed_version\")\n        val minAllowedVersion: Int,\n        @SerializedName(\"min_allowed_version_ios\")\n        val minAllowedVersionIos: String,\n        @SerializedName(\"recommended_version\")\n        val recommendedVersion: Int?\n) {\n    data class ExcludedVersion(\n            @SerializedName(\"version\")\n            val version: String\n    )\n}\n}\n</code></pre>\n\n<p>Here's my proguard file </p>\n\n<pre><code>##OKHTTP3\n-keepattributes Signature\n-keepattributes *Annotation*\n-keep class okhttp3.** { *; }\n-keep interface okhttp3.** { *; }\n-dontwarn okhttp3.**\n-dontnote okhttp3.**\n-dontwarn okio.**\n-dontwarn retrofit2.Platform$Java8\n# Gson uses generic type information stored in a class file when working with fields. Proguard\n# removes such information by default, so configure it to keep all of it.\n-keepattributes Signature\n# For using GSON @Expose annotation\n-keepattributes *Annotation*\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-jobscheduler"], "comments": [{"owner": {"reputation": 172, "user_id": 2406925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c47e0a80eac7869985c2933edd44a28?s=128&d=identicon&r=PG", "display_name": "unzila", "link": "https://stackoverflow.com/users/2406925/unzila"}, "edited": false, "score": 1, "creation_date": 1557895125, "post_id": 56141843, "comment_id": 98913637, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41828490/check-internet-connection-in-background\">Check internet connection in background</a>"}, {"owner": {"reputation": 121, "user_id": 4452048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06LBp.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/4452048/justin"}, "edited": false, "score": 0, "creation_date": 1557895551, "post_id": 56141843, "comment_id": 98913740, "body": "A better way to handle this has already been explained here: <a href=\"https://stackoverflow.com/a/25873554/4452048\">Android event for internet connectivity state change</a>"}, {"owner": {"reputation": 51, "user_id": 8227603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2djeF.jpg?s=128&g=1", "display_name": "Songpol Rungsawang", "link": "https://stackoverflow.com/users/8227603/songpol-rungsawang"}, "edited": false, "score": 0, "creation_date": 1557896231, "post_id": 56141843, "comment_id": 98913921, "body": "both of them just check internet connection state(turn on/off), it not check internet access. What I want is &quot;can access&quot; to internet(can reach to server) not &quot;can connect&quot;"}], "owner": {"reputation": 51, "user_id": 8227603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2djeF.jpg?s=128&g=1", "display_name": "Songpol Rungsawang", "link": "https://stackoverflow.com/users/8227603/songpol-rungsawang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557897437, "creation_date": 1557894992, "last_edit_date": 1557897437, "question_id": 56141843, "link": "https://stackoverflow.com/questions/56141843/how-to-keep-observe-internet-access-in-app-background", "title": "How to keep observe internet access in app background", "body": "<p>I have one method that must be execute when device can access to internet(can ping to 8.8.8.8, not just connect or available). What method should I use to detect internet access(can/cannot reach to server) both app running in foreground and background?</p>\n\n<p>I use NetworkCallback(onAvailable() and onLost()) with JobService(by registerNetworkCallback in onStartJob()). It can perform internet connection correctly but not internet access.</p>\n\n<pre><code>class MyNetworkCallback() : ConnectivityManager.NetworkCallback() {\n\n    override fun onAvailable(network: Network?) {\n        super.onAvailable(network)\n        Log.i(\"ConnectionStatus\", \"Connected\")\n        // perform my method\n    }\n\n    override fun onLost(network: Network?) {\n        super.onLost(network)\n        Log.i(\"ConnectionStatus\", \"Disconnected\")\n    }\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/1560788/how-to-check-internet-access-on-android-inetaddress-never-times-out/50962092\">How to check internet access on Android? InetAddress never times out</a> \nThis topic is good about how to check internet access by many method, but I do not know how to integrate this method to JobService for keep observe internet access to check device can reach to server or not.</p>\n\n<p>What I want:</p>\n\n<ol>\n<li><p>when app running in both foreground and background, device connect to internet and device can access to server ==> perform method()</p></li>\n<li><p>when app running in both foreground and background, device connect to internet BUT device cannot access to server ==> NOT perform method()</p></li>\n<li>when app running in both foreground and background, device not connect to internet and device cannot access to server ==> NOT perform method()</li>\n</ol>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 0, "creation_date": 1557882005, "post_id": 56140460, "comment_id": 98911331, "body": "The object you&#39;re being passed in is named <code>listener</code>, not <code>itemListener</code>."}, {"owner": {"reputation": 1782, "user_id": 5750389, "user_type": "registered", "profile_image": "https://graph.facebook.com/908028102588999/picture?type=large", "display_name": "Elias Fazel", "link": "https://stackoverflow.com/users/5750389/elias-fazel"}, "edited": false, "score": 0, "creation_date": 1557882051, "post_id": 56140460, "comment_id": 98911342, "body": "don&#39;t use &gt;&gt; &#39;this&#39;"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1557882179, "post_id": 56140460, "comment_id": 98911360, "body": "If I dont use this, it says val cannot be reasigned, but I dont have any itemListener of type val"}], "answers": [{"tags": [], "owner": {"reputation": 1782, "user_id": 5750389, "user_type": "registered", "profile_image": "https://graph.facebook.com/908028102588999/picture?type=large", "display_name": "Elias Fazel", "link": "https://stackoverflow.com/users/5750389/elias-fazel"}, "is_accepted": true, "score": 2, "last_activity_date": 1557882474, "last_edit_date": 1557882474, "creation_date": 1557882220, "answer_id": 56140505, "question_id": 56140460, "link": "https://stackoverflow.com/questions/56140460/kotlin-cant-init-a-companion-object-value/56140505#56140505", "title": "Kotlin - Cant init a companion object value", "body": "<p>declare like this &amp; change name of input variable from main constructor</p>\n\n<pre><code>class MyAdapter(itemListenerMAIN:RecyclerViewClickListener){\n\n companion object{\n        var itemListener: RecyclerViewClickListener? = null\n    }\n\n    init {\n      //don't use &gt;&gt; this. \n        itemListener = itemListenerMAIN\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 56140505, "answer_count": 1, "score": 1, "last_activity_date": 1557882474, "creation_date": 1557881759, "last_edit_date": 1557882141, "question_id": 56140460, "link": "https://stackoverflow.com/questions/56140460/kotlin-cant-init-a-companion-object-value", "title": "Kotlin - Cant init a companion object value", "body": "<p>I'm trying to deliver the itemListener to my viewHolder in order to capture the element that I click, I have done this</p>\n\n<pre><code>class MyAdapter(itemListener:RecyclerViewClickListener){\n\n companion object{\n        var itemListener: RecyclerViewClickListener? = null\n    }\n\n    init {\n        this.equipmentSearchList = equipmentList\n        this.itemListener = itemListener\n    }\n}\n</code></pre>\n\n<p>But I cant do <code>this.itemListener = itemListener</code></p>\n\n<p>How to solve it ?</p>\n"}, {"tags": ["android", "kotlin", "functional-programming"], "comments": [{"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1557900780, "post_id": 56140179, "comment_id": 98915470, "body": "I&#39;m not experienced with coroutines, but one mistake I see is that you are not calling the function you are passing as parameter. It should be <code>query()</code> instead of <code>query</code>."}, {"owner": {"reputation": 458, "user_id": 4613259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Lj58n.png?s=128&g=1", "display_name": "Dinorah Tovar", "link": "https://stackoverflow.com/users/4613259/dinorah-tovar"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1557928705, "post_id": 56140179, "comment_id": 98931610, "body": "I want to pass a Function to another functions and returns me the same function suspended"}], "answers": [{"tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": true, "score": 1, "last_activity_date": 1557908641, "creation_date": 1557908641, "answer_id": 56144705, "question_id": 56140179, "link": "https://stackoverflow.com/questions/56140179/converting-any-fun-to-a-suspended-fun-with-high-lamba-expression/56144705#56144705", "title": "Converting any fun to a suspended fun with high lamba expression", "body": "<p>Soo...something like:</p>\n\n<pre><code>suspend fun &lt;T : Any?&gt; safeQuery(query: (T) -&gt; Unit): Unit {\n     return withContext(Dispatchers.IO) { query }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>suspend fun &lt;T : Any?&gt; safeQuery(query: () -&gt; T): T {\n     return withContext(Dispatchers.IO) { query }\n}\n</code></pre>\n\n<p>Does that answer your question?</p>\n"}], "owner": {"reputation": 458, "user_id": 4613259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Lj58n.png?s=128&g=1", "display_name": "Dinorah Tovar", "link": "https://stackoverflow.com/users/4613259/dinorah-tovar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 56144705, "answer_count": 1, "score": 0, "last_activity_date": 1557908641, "creation_date": 1557879078, "question_id": 56140179, "link": "https://stackoverflow.com/questions/56140179/converting-any-fun-to-a-suspended-fun-with-high-lamba-expression", "title": "Converting any fun to a suspended fun with high lamba expression", "body": "<p>I'm looking for a way to send Any function as a parameter and get back a suspended function\nthis is one example of the possible function and how I am solving this: \nPossible function</p>\n\n<pre><code>fun getSomething(): List&lt;SomethingObject&gt;\n</code></pre>\n\n<p>Incorrect approachment </p>\n\n<pre><code>suspend fun AnyClass.awaitAll(): List&lt;SomethingObject&gt; = withContext(Dispatchers.IO) { getSomething() }\n</code></pre>\n\n<p>But what I really want is something like this: </p>\n\n<pre><code>suspend fun &lt;T : Any?&gt; safeQuery(query: () -&gt; Unit): () -&gt; Unit {\n     return withContext(Dispatchers.IO) { query }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7914895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8598c809a8bc722f8e356a2166eebefa?s=128&d=identicon&r=PG&f=1", "display_name": "knockmark10", "link": "https://stackoverflow.com/users/7914895/knockmark10"}, "edited": false, "score": 0, "creation_date": 1558564929, "post_id": 56142837, "comment_id": 99148029, "body": "But this way, we get the objects of type Object. My question is if there is a way to specify the type of the object, so I don&#39;t need to explicitly cast the object."}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "reply_to_user": {"reputation": 3, "user_id": 7914895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8598c809a8bc722f8e356a2166eebefa?s=128&d=identicon&r=PG&f=1", "display_name": "knockmark10", "link": "https://stackoverflow.com/users/7914895/knockmark10"}, "edited": false, "score": 0, "creation_date": 1558596227, "post_id": 56142837, "comment_id": 99154936, "body": "If <code>iterateObservable</code> is a <code>List&lt;Observable&lt;T&gt;&gt;</code>, <code>items</code> will be an <code>Array&lt;T&gt;</code>. Why do you say you get <code>Object</code>s?"}], "tags": [], "owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "is_accepted": false, "score": 0, "last_activity_date": 1557901207, "creation_date": 1557901207, "answer_id": 56142837, "question_id": 56140024, "link": "https://stackoverflow.com/questions/56140024/zip-dynamic-number-of-observables/56142837#56142837", "title": "Zip dynamic number of observables", "body": "<p>You have to do something like this:</p>\n\n<pre><code>Observable.zip(iterateObservable) { items -&gt;\n    // zip them in some way\n}\n</code></pre>\n\n<p><code>items</code> will contain the emission of all <code>Observable</code>s in <code>iterableObservable</code></p>\n"}], "owner": {"reputation": 3, "user_id": 7914895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8598c809a8bc722f8e356a2166eebefa?s=128&d=identicon&r=PG&f=1", "display_name": "knockmark10", "link": "https://stackoverflow.com/users/7914895/knockmark10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557919380, "creation_date": 1557877603, "last_edit_date": 1557919380, "question_id": 56140024, "link": "https://stackoverflow.com/questions/56140024/zip-dynamic-number-of-observables", "title": "Zip dynamic number of observables", "body": "<p>I have a list of observables. The size of it is dynamic. Each observable represents an api call made via Retrofit. So, I need to zip all those calls in order to return a list of responses of the same type.</p>\n\n<p>Here's a look of what I've tried:</p>\n\n<pre><code>//The method that perfoms the api call\nprivate fun iterateObservable(params: AssignSeatStatusResponse): List&lt;Observable&lt;SeatSelectionResponse&gt;&gt; {\n        val seatsMatrix = mutableListOf&lt;Observable&lt;SeatSelectionResponse&gt;&gt;()\n        params.seatJourneys.forEach { seatJourneysItem -&gt;\n            seatJourneysItem.seatSegments.forEach { seatSegmentsItem -&gt;\n                seatsMatrix.add(\n                    this.getSeatMapFromServiceUseCase.createObservable(buildSeatSelectionRequest(seatSegmentsItem))\n                        .subscribeOn(Schedulers.newThread())\n                )\n            }\n        }\n\n        return seatsMatrix\n\n//The method I need to return the list of observables\noverride fun createObservable(params: AssignSeatStatusResponse): Observable&lt;List&lt;SeatSelectionResponse&gt;&gt; {\n        return Observable.zip(iterateObservable(params), FuncN {\n\n        })\n    }\n</code></pre>\n\n<p>My problem is the zip displaying an error, saying that <em>none of the following functions can be called with the arguments supplied.</em></p>\n\n<p>What am I doing wrong? Any help will be apprecciated. Thanks in advance.</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "swiperefreshlayout"], "comments": [{"owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 0, "creation_date": 1557875230, "post_id": 56139636, "comment_id": 98910079, "body": "There is nothing wrong with the code that provided I suppose. Can you please post swipe refresh code?"}, {"owner": {"reputation": 23, "user_id": 7668616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7K7tQ.jpg?s=128&g=1", "display_name": "Noah McClelland", "link": "https://stackoverflow.com/users/7668616/noah-mcclelland"}, "reply_to_user": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 0, "creation_date": 1557875841, "post_id": 56139636, "comment_id": 98910192, "body": "@ReazMurshed I have included more complete samples from the code. If there is anything else that would help let me know."}, {"owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 0, "creation_date": 1557875955, "post_id": 56139636, "comment_id": 98910214, "body": "Do you have any code where there is a checking like <code>if(swipe_refresh.isRefreshing)  doSomething()</code>?"}, {"owner": {"reputation": 23, "user_id": 7668616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7K7tQ.jpg?s=128&g=1", "display_name": "Noah McClelland", "link": "https://stackoverflow.com/users/7668616/noah-mcclelland"}, "reply_to_user": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 0, "creation_date": 1557876063, "post_id": 56139636, "comment_id": 98910232, "body": "No - that is just to provide a loading spinner while the web call happens and dispel it after the data is updated."}, {"owner": {"reputation": 23, "user_id": 7668616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7K7tQ.jpg?s=128&g=1", "display_name": "Noah McClelland", "link": "https://stackoverflow.com/users/7668616/noah-mcclelland"}, "reply_to_user": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 1, "creation_date": 1557876126, "post_id": 56139636, "comment_id": 98910248, "body": "This could be a problem with the emulator I suppose. The screenshot above is from a Pixel 2 API level 28 emulator. I will try it on my Samsung Galaxy S8 physical device now and update."}, {"owner": {"reputation": 23, "user_id": 7668616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7K7tQ.jpg?s=128&g=1", "display_name": "Noah McClelland", "link": "https://stackoverflow.com/users/7668616/noah-mcclelland"}, "reply_to_user": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 1, "creation_date": 1557876279, "post_id": 56139636, "comment_id": 98910279, "body": "Confirmed the same behavior occurs on my Samsung Galaxy S8 also running API level 28."}, {"owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 0, "creation_date": 1557876409, "post_id": 56139636, "comment_id": 98910303, "body": "I found nothing wrong yet. Please post your full adapter and remove the code which is repeated."}, {"owner": {"reputation": 23, "user_id": 7668616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7K7tQ.jpg?s=128&g=1", "display_name": "Noah McClelland", "link": "https://stackoverflow.com/users/7668616/noah-mcclelland"}, "reply_to_user": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 1, "creation_date": 1557876812, "post_id": 56139636, "comment_id": 98910387, "body": "@ReazMurshed I have included the full adapter code in the original post, thanks."}, {"owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "edited": false, "score": 0, "creation_date": 1557877439, "post_id": 56139636, "comment_id": 98910537, "body": "Thanks. Can you please check the answer and let me know if that helped?"}], "answers": [{"comments": [{"owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "reply_to_user": {"reputation": 23, "user_id": 7668616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7K7tQ.jpg?s=128&g=1", "display_name": "Noah McClelland", "link": "https://stackoverflow.com/users/7668616/noah-mcclelland"}, "edited": false, "score": 0, "creation_date": 1557878128, "post_id": 56140000, "comment_id": 98910670, "body": "Great to know that helped!"}], "tags": [], "owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "is_accepted": true, "score": 0, "last_activity_date": 1557877419, "creation_date": 1557877419, "answer_id": 56140000, "question_id": 56139636, "link": "https://stackoverflow.com/questions/56139636/remove-item-not-updating-recyclerview-after-swipe-refresh/56140000#56140000", "title": "Remove Item Not Updating RecyclerView After Swipe Refresh", "body": "<p>I think the problem is where you set the new items when you pull and refresh the <code>RecyclerView</code> again. In the <code>successOnGetEarthquakes</code> method, you are initializing a new adapter each time you get the data from the server. </p>\n\n<p>You might just change the list passed to the adapter and call <code>notifyDataSetChanged()</code> on your adapter. I am just posing some pseudo code in Java. I hope that helps! </p>\n\n<pre><code>private fun successOnGetEarthquakes(it: EarthquakeFeed) {\n    swipe_refresh.isRefreshing = false\n    rvEarthQuakes.layoutManager = LinearLayoutManager(this)\n\n    // Just feed the list, do not create a new adapter\n    if(adapter != null) {\n        adapter = AdapterEarthquake(this, it.features.toMutableList())\n        rvEarthQuakes.adapter = adapter\n    }\n    else adapter.setItemsList(it.features.toMutableList())\n\n    // Call the notifyDataSetChanged here\n    adapter.notifyDataSetChanged()\n\n    val dragDirs = ItemTouchHelper.UP or ItemTouchHelper.DOWN\n    val recyclerItemTouchHelper = RecyclerItemTouchHelper(dragDirs, adapter)\n    val itemTouchHelper = ItemTouchHelper(recyclerItemTouchHelper)\n    itemTouchHelper.attachToRecyclerView(rvEarthQuakes)\n}\n</code></pre>\n\n<p>Hence create a new function in your adapter which just changes the <code>items</code> list. I hope you get the idea. </p>\n"}], "owner": {"reputation": 23, "user_id": 7668616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7K7tQ.jpg?s=128&g=1", "display_name": "Noah McClelland", "link": "https://stackoverflow.com/users/7668616/noah-mcclelland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 0, "accepted_answer_id": 56140000, "answer_count": 1, "score": 2, "last_activity_date": 1557877419, "creation_date": 1557874351, "last_edit_date": 1557876738, "question_id": 56139636, "link": "https://stackoverflow.com/questions/56139636/remove-item-not-updating-recyclerview-after-swipe-refresh", "title": "Remove Item Not Updating RecyclerView After Swipe Refresh", "body": "<p>I have implemented swipe to delete an item as well as pull to refresh items in a <code>RecyclerView</code>. The deleting working as intended until I perform a pull to refresh. After pulling to refresh, when I perform a deletion the recycler view does not seem to respond to the <code>notifyItemRemoved</code>.</p>\n\n<p>I have also tried <code>notifyDataSetChanged</code> with the same results.</p>\n\n<p>Retrieving and updating data:</p>\n\n<pre><code>private fun callForEarthquakeData() {\n    swipe_refresh.isRefreshing = true\n    earthquakeApiEndpoint.getEarthquakes()\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribeBy(::errorOnGetEarthquakes, ::successOnGetEarthquakes)\n}\n</code></pre>\n\n<p>Setting up <code>RecyclerView</code> after a successful call for data:</p>\n\n<pre><code>private fun successOnGetEarthquakes(it: EarthquakeFeed) {\n    swipe_refresh.isRefreshing = false\n    rvEarthQuakes.layoutManager = LinearLayoutManager(this)\n    adapter = AdapterEarthquake(this, it.features.toMutableList())\n    rvEarthQuakes.adapter = adapter\n    val dragDirs = ItemTouchHelper.UP or ItemTouchHelper.DOWN\n    val recyclerItemTouchHelper = RecyclerItemTouchHelper(dragDirs, adapter)\n    val itemTouchHelper = ItemTouchHelper(recyclerItemTouchHelper)\n    itemTouchHelper.attachToRecyclerView(rvEarthQuakes)\n}\n</code></pre>\n\n<p>Listener on swipe refresh layout to retrieve data:</p>\n\n<pre><code>swipe_refresh.setOnRefreshListener { callForEarthquakeData() }\n</code></pre>\n\n<p>Full Adapter Code:</p>\n\n<pre><code>class AdapterEarthquake(private val context: Context, private val items: MutableList&lt;Feature&gt;)\n    : RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;(), ItemTouchHelperAdapter {\n\n    private val sdf = SimpleDateFormat(context.getString(R.string.earthquake_date_format), Locale.US)\n\n    override fun onItemMove(fromPosition: Int, toPosition: Int): Boolean {\n        Collections.swap(items, fromPosition, toPosition)\n        notifyItemMoved(fromPosition, toPosition)\n        return true\n    }\n\n    override fun onItemDismiss(position: Int) {\n        items.removeAt(position)\n        notifyDataSetChanged()\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder =\n            ViewHolder(LayoutInflater.from(parent.context)\n                    .inflate(R.layout.quake_list_item, parent, false))\n\n    override fun getItemCount(): Int = items.size\n\n    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n        val viewHolder = holder as ViewHolder\n        val item = items[position]\n        val formattedLocalDateTime = sdf.format(item.properties.time)\n        val formattedCoordinates = item.geometry.coordinates.let { \"[${it[0]}, ${it[1]}, ${it[2]}]\" }\n        viewHolder.title.text = item.properties.title\n        viewHolder.date.text = formattedLocalDateTime\n        viewHolder.coordinates.text = formattedCoordinates\n\n        when {\n            item.properties.magnitude &gt;= 7 -&gt; viewHolder.itemView.setBackgroundColor(Color.RED)\n            item.properties.magnitude &gt;= 5 -&gt; viewHolder.itemView.setBackgroundColor(ContextCompat.getColor(context, R.color.lightRed))\n            else -&gt; viewHolder.itemView.setBackgroundColor(Color.WHITE)\n        }\n    }\n\n    inner class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {\n        init {\n            view.setOnClickListener {\n                context.startActivity(Intent(\n                        Intent.ACTION_VIEW, Uri.parse(items[adapterPosition].properties.detailsUrl)))\n            }\n        }\n\n        val title = view.quake_title!!\n        val coordinates = view.quake_coordinates!!\n        val date = view.quake_date!!\n    }\n}\n</code></pre>\n\n<p>I expect the <code>RecyclerView</code> to update with the removed item after <code>notifyDataSetChanged()</code> is called (as it does before the swipe data refresh), but the result is the following. </p>\n\n<p><a href=\"https://i.stack.imgur.com/3o7Ev.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3o7Ev.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1557868836, "post_id": 56138763, "comment_id": 98908294, "body": "Note that some of these <code>WifiManager</code> methods are defunct on Android Q."}], "owner": {"reputation": 3007, "user_id": 705544, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01d0590a2787663c5eac4283092cbc12?s=128&d=identicon&r=PG", "display_name": "edi233", "link": "https://stackoverflow.com/users/705544/edi233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557868737, "creation_date": 1557868737, "question_id": 56138763, "link": "https://stackoverflow.com/questions/56138763/check-if-password-is-incorrect-when-try-to-wifi-connect-on-android", "title": "Check if password is incorrect when try to wifi connect on android", "body": "<p>I have a code which I am using to connection with wifi:</p>\n\n<pre><code>override fun setupWifi(ssid: String, password: String) {\n        try {\n            val wifiConfig = WifiConfiguration()\n            wifiConfig.SSID = String.format(\"\\\"%s\\\"\", ssid)\n            wifiConfig.preSharedKey = String.format(\"\\\"%s\\\"\", password)\n\n            val wifiManager = getSystemService(Context.WIFI_SERVICE) as WifiManager\n            wifiManager.isWifiEnabled = true\n            val netId = wifiManager.addNetwork(wifiConfig)\n            wifiManager.disconnect()\n            wifiManager.enableNetwork(netId, true)\n            wifiManager.reconnect()\n\n            ReactiveNetwork\n                    .observeNetworkConnectivity(applicationContext)\n                    .subscribeOn(Schedulers.io())\n                    .filter(ConnectivityPredicate.hasState(NetworkInfo.State.CONNECTED))\n                    .filter(ConnectivityPredicate.hasType(ConnectivityManager.TYPE_WIFI))\n                    .observeOn(AndroidSchedulers.mainThread())\n                    .subscribeBy(onNext = { connectivity -&gt;\n                        if (connectivity.available())\n                            presenter.showActivationScreen()\n                    }, onError = {\n                        presenter.showPasswordError()\n                        logger.e(\"wificonfigactivity\", \"wifi connection failed\", it)\n                    }, onComplete = {\n                        logger.d(\"wificonfigactivity\", \"wifi connection failed\")\n                    })\n                    .addTo(startStopDisposables)\n\n        } catch (e: Exception) {\n            showError(getString(R.string.activation_wlan_error))\n        }\n    }\n</code></pre>\n\n<p>Now, I have a question - how can I check if user put wrong password?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1557910667, "post_id": 56138163, "comment_id": 98920448, "body": "How many collection do you have in depth, 500?"}, {"owner": {"reputation": 63, "user_id": 4736383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc6e6729ac79d324c15ba8b632d55079?s=128&d=identicon&r=PG&f=1", "display_name": "ChristianK", "link": "https://stackoverflow.com/users/4736383/christiank"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1558020128, "post_id": 56138163, "comment_id": 98970304, "body": "There&#39;s only eight corrections total, and the collection being accessed only has 3 documents"}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 9335588, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9nNEVSWegD4/AAAAAAAAAAI/AAAAAAAAAcg/jAOlg3IXTbA/photo.jpg?sz=128", "display_name": "Prakarsh Jain", "link": "https://stackoverflow.com/users/9335588/prakarsh-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1559555433, "creation_date": 1559555433, "answer_id": 56424868, "question_id": 56138163, "link": "https://stackoverflow.com/questions/56138163/error-when-trying-to-add-downloaduri-to-firestore-document-could-not-serialize/56424868#56424868", "title": "Error when trying to add downloadUri to firestore document. &quot;Could not serialize object. Exceeded maximum depth of 500&quot;", "body": "<p>What solved my problem that the some object in the map was same as the map name,so it was getting nested inside it infinitely.</p>\n\n<p>Hope it solves your problem!</p>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 2237812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54821ee870227ce67b050ae696aad7e1?s=128&d=identicon&r=PG", "display_name": "Martin B", "link": "https://stackoverflow.com/users/2237812/martin-b"}, "edited": false, "score": 0, "creation_date": 1586454415, "post_id": 57722264, "comment_id": 108140943, "body": "This solved the problem for me too. Field in FireStore is a String, need to use toString() on the uri before storing it in FireStore. The error message is strange."}], "tags": [], "owner": {"reputation": 1288, "user_id": 5407056, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kdXIb.jpg?s=128&g=1", "display_name": "Latief Anwar", "link": "https://stackoverflow.com/users/5407056/latief-anwar"}, "is_accepted": false, "score": 12, "last_activity_date": 1567149533, "creation_date": 1567149533, "answer_id": 57722264, "question_id": 56138163, "link": "https://stackoverflow.com/questions/56138163/error-when-trying-to-add-downloaduri-to-firestore-document-could-not-serialize/57722264#57722264", "title": "Error when trying to add downloadUri to firestore document. &quot;Could not serialize object. Exceeded maximum depth of 500&quot;", "body": "<p>The problem is in data type <code>Uri downloadUri = task.getResult();</code> return uri. But may be in firestore DB require string. So, before you update to firestore change downloadUri to string:</p>\n\n<pre><code>Uri downloadUri = task.getResult();\nString uri = downloadUri.toString();\ndb.collection(\"menuitems\").document(dbMealItem.CatererId + dbMealItem.name).set(**uri**);\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4736383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc6e6729ac79d324c15ba8b632d55079?s=128&d=identicon&r=PG&f=1", "display_name": "ChristianK", "link": "https://stackoverflow.com/users/4736383/christiank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1518, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1567149533, "creation_date": 1557865768, "last_edit_date": 1557865840, "question_id": 56138163, "link": "https://stackoverflow.com/questions/56138163/error-when-trying-to-add-downloaduri-to-firestore-document-could-not-serialize", "title": "Error when trying to add downloadUri to firestore document. &quot;Could not serialize object. Exceeded maximum depth of 500&quot;", "body": "<p>I have a Firestore collection in which each document has an image associated with it that is stored in Firebase storage. Previously I stored the image reference and retrieved the image through that, but since that was taking some time for each call, I tried to switch to storing the downloaduri so that with picasso I could reference it through the downloaduri without having to retrieve the downloaduri each item. However when I try to write to the document inside the on success listener of the getdownloaduri, I get an error indicating an object cycle. </p>\n\n<p>If I don't include the update to the database, the code is able to succesfully retrieve the downloaduri and pass it to the recyclerview and display the image, it is only when trying to upload it to the database that I get this error. I've tried updating the database outside of the dowonloadUri.addonsuccesslistenr, however the values I set inside the listener are never updated outside of the listener. </p>\n\n<pre><code> if(menucarditem.dluri == null)\n                        {\n                            val storageRef = storage.reference\n                            val pathReference = storageRef.child(menucarditem.img)\n                            pathReference.downloadUrl.addOnSuccessListener {\n                                menucarditem.dluri = it\n                                dbMealItem.dluri = it\n                                db.collection(\"menuitems\").document(dbMealItem.CatererId + dbMealItem.name).set(dbMealItem).addOnSuccessListener {  }\n                                    .addOnFailureListener { }\n\n                           viewAdapter.notifyDataSetChanged()\n\n                            }\n       .addOnFailureListener{\n                                    Toast.makeText(this, \"Image from database not found\", Toast.LENGTH_LONG).show()\n                                    Log.w(TAG, \"Error getting documents: \", it)\n                                }\n}\n\n</code></pre>\n\n<p>The error that is outputted during runtime is: </p>\n\n<blockquote>\n  <p>E/AndroidRuntime: java.lang.IllegalArgumentException: Could not\n  serialize object. Exceeded maximum depth of 500, which likely\n  indicates there's an object cycle (found in field\n  'dluri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonicalUri.canonica</p>\n</blockquote>\n\n<p>etc.</p>\n"}, {"tags": ["spring", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 2841037, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/389fc77e5e7bdd43652f33a11696e3eb?s=128&d=identicon&r=PG&f=1", "display_name": "Zaid Bin Irfan", "link": "https://stackoverflow.com/users/2841037/zaid-bin-irfan"}, "edited": false, "score": 0, "creation_date": 1557944466, "post_id": 56144813, "comment_id": 98940102, "body": "According to what i have found, only <code>@Configuration</code> and <code>@Bean</code> needs to be open, since it is needed for spring to add some logic when we create the bean. Even if i remove open from the class, then too it works. It&#39;s just that with this combination it is failing for me"}], "tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 0, "last_activity_date": 1557909034, "creation_date": 1557909034, "answer_id": 56144813, "question_id": 56137474, "link": "https://stackoverflow.com/questions/56137474/spring-with-kotlin-final-method-in-an-open-class-is-not-able-to-access-member/56144813#56144813", "title": "Spring with Kotlin - final method in an open class is not able to access member variables", "body": "<p>This is probably because the Spring framework works its magic by creating hidden subclasses and overriding methods.</p>\n\n<p>Kotlin, unlike Java, defaults to non-open (what Java calls <code>final</code>) for classes and methods, and needs the <code>open</code> keyword to make them open.\u00a0 This is usually a Good Thing\u2122, but breaks Spring, as you found.</p>\n\n<p>One way to solve this is to mark all such classes and methods as <code>open</code>.</p>\n\n<p>But it's easier to use the <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html#all-open-compiler-plugin\" rel=\"nofollow noreferrer\">compiler plug-in</a>.\u00a0 That automatically makes all classes that use specific Spring annotations open.</p>\n"}], "owner": {"reputation": 221, "user_id": 2841037, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/389fc77e5e7bdd43652f33a11696e3eb?s=128&d=identicon&r=PG&f=1", "display_name": "Zaid Bin Irfan", "link": "https://stackoverflow.com/users/2841037/zaid-bin-irfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557909034, "creation_date": 1557862619, "question_id": 56137474, "link": "https://stackoverflow.com/questions/56137474/spring-with-kotlin-final-method-in-an-open-class-is-not-able-to-access-member", "title": "Spring with Kotlin - final method in an open class is not able to access member variables", "body": "<p>I have a class say - </p>\n\n<pre><code>@Component\nopen class Foo @Autowired constructor(bar: Bar) {\n\n    private val myList = listOf(1,2,3)\n\n    open fun readFirst() {\n        println(myList[0])\n    }\n\n    fun readAll() {\n        myList.forEach { i -&gt; println(i) }\n    }\n}\n</code></pre>\n\n<p>The method readFirst works fine and is able to access myList, but the method readAll throws a null pointer exception for myList. </p>\n\n<p>If i make readAll open or i make the class and readFirst final by removing open keyword then also it works fine. </p>\n\n<p>Is there a reason for this, or is this a bug. </p>\n\n<p>NOTE: This is not the exact code that was failing, but this is an example of what was happening.</p>\n"}, {"tags": ["kotlin", "timer"], "comments": [{"owner": {"reputation": 197, "user_id": 4149561, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-I19mx58iRP8/AAAAAAAAAAI/AAAAAAAAATU/lvUUJXTQo9M/photo.jpg?sz=128", "display_name": "Juan", "link": "https://stackoverflow.com/users/4149561/juan"}, "edited": false, "score": 0, "creation_date": 1557905866, "post_id": 56137389, "comment_id": 98917901, "body": "Please elaborate on the question. What is the error? What syntax do you want fixed? Are you asking how this code can be improved in general?"}, {"owner": {"reputation": 197, "user_id": 4149561, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-I19mx58iRP8/AAAAAAAAAAI/AAAAAAAAATU/lvUUJXTQo9M/photo.jpg?sz=128", "display_name": "Juan", "link": "https://stackoverflow.com/users/4149561/juan"}, "edited": false, "score": 0, "creation_date": 1557906094, "post_id": 56137389, "comment_id": 98918033, "body": "One change you can make to start with is using the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.random/-random/-default/next-int.html\" rel=\"nofollow noreferrer\">Random object</a> to generate your two numbers: <code>Random.nextInt(100)</code>."}, {"owner": {"reputation": 11, "user_id": 11455927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wliWX.jpg?s=128&g=1", "display_name": "Sanjeev Saju", "link": "https://stackoverflow.com/users/11455927/sanjeev-saju"}, "reply_to_user": {"reputation": 197, "user_id": 4149561, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-I19mx58iRP8/AAAAAAAAAAI/AAAAAAAAATU/lvUUJXTQo9M/photo.jpg?sz=128", "display_name": "Juan", "link": "https://stackoverflow.com/users/4149561/juan"}, "edited": false, "score": 0, "creation_date": 1557938830, "post_id": 56137389, "comment_id": 98937625, "body": "Error shown at: textView.text=&quot;$num1 + $num2= &quot;  as &#39;Expecting Member Declaration&#39;."}, {"owner": {"reputation": 197, "user_id": 4149561, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-I19mx58iRP8/AAAAAAAAAAI/AAAAAAAAATU/lvUUJXTQo9M/photo.jpg?sz=128", "display_name": "Juan", "link": "https://stackoverflow.com/users/4149561/juan"}, "edited": false, "score": 0, "creation_date": 1557994051, "post_id": 56137389, "comment_id": 98954790, "body": "That line is problematic for several reasons. You can fix it by wrapping it in an init block: <code>init { textView.text = &quot;$num1 + $num2 = &quot; }</code> You might want to have a look at this article: <a href=\"https://kotlinlang.org/docs/reference/classes.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/classes.html</a>"}, {"owner": {"reputation": 197, "user_id": 4149561, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-I19mx58iRP8/AAAAAAAAAAI/AAAAAAAAATU/lvUUJXTQo9M/photo.jpg?sz=128", "display_name": "Juan", "link": "https://stackoverflow.com/users/4149561/juan"}, "edited": false, "score": 0, "creation_date": 1557994280, "post_id": 56137389, "comment_id": 98954912, "body": "Furthermore, I don&#39;t think it even knows what <code>textView</code> is, you have to tell it: <code>findViewById(R.id.&lt;TextViewID&gt;)</code>. Same goes for <code>editText</code> on the next line."}], "owner": {"reputation": 11, "user_id": 11455927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wliWX.jpg?s=128&g=1", "display_name": "Sanjeev Saju", "link": "https://stackoverflow.com/users/11455927/sanjeev-saju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1557862863, "creation_date": 1557862286, "last_edit_date": 1557862863, "question_id": 56137389, "link": "https://stackoverflow.com/questions/56137389/how-to-fix-the-error-and-syntax-in-this-timer-program", "title": "How to fix the error and syntax in this Timer program?", "body": "<p>I am a beginner and wrote this code which generates two random two digit numbers and display it. The user need to type the sum as answer (in the editText) and if its correct, the score gets added by one and another two random numbers gets displayed. The entire program lasts 10 seconds (10000 milliseconds) and the user has to make maximum correct answers. </p>\n\n<p>There is a high chance that my syntax might be wrong. I am new to Kotlin.</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        object : CountDownTimer(10000, 1000) {\n\n            var count=0\n            var num1: Int = (0..99).random()\n            var num2: Int = (0..99).random()\n            var result: Int = num1 + num2\n\n            textView.text=\"$num1 + $num2= \"\n\n            var inputval= editText.text.toString().toInt()\n\n            override fun onFinish() {\n                Toast.makeText(applicationContext, \"Times Up!\", Toast.LENGTH_LONG).show()\n                scoreView.text = \"Time Up! Score= $count\"\n            }\n\n            override fun onTick(p0: Long) {\n\n                if (inputval == result) {\n                    count++\n\n                }\n                textView3.text = \"Time Left: ${p0 / 1000} Score= $count\"\n\n\n            }\n\n        }.start()\n    }\n}\n</code></pre>\n\n<p>I expect the program to run for 10 seconds generating and displaying two random numbers where the user need to type the correct sum answer. The score gets added by one if its correct and next set of random numbers get displayed.</p>\n"}, {"tags": ["java", "kotlin", "osgi", "apache-felix"], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 3308078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Kqdu.png?s=128&g=1", "display_name": "GuillaumeCleme", "link": "https://stackoverflow.com/users/3308078/guillaumecleme"}, "edited": false, "score": 0, "creation_date": 1573782689, "post_id": 58561100, "comment_id": 104007427, "body": "Worked like a charm! Used this approach to implement configurations on Kotlin-based OSGI services. Thanks."}], "tags": [], "owner": {"reputation": 1778, "user_id": 117220, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6c5b9841f23e69b08f121b06df6ed1c8?s=128&d=identicon&r=PG", "display_name": "Petr Gladkikh", "link": "https://stackoverflow.com/users/117220/petr-gladkikh"}, "is_accepted": true, "score": 1, "last_activity_date": 1572015890, "creation_date": 1572015890, "answer_id": 58561100, "question_id": 56137109, "link": "https://stackoverflow.com/questions/56137109/expressing-java-annotation-class-with-members-in-kotlin/58561100#58561100", "title": "Expressing Java Annotation Class with Members in Kotlin", "body": "<pre><code>@ObjectClassDefinition(\n    name = \"Sample Kotlin servlet\",\n    description = \"Simple Kotlin servlet with configurable properties\")\nannotation class  Config (\n  @get:AttributeDefinition(name = \"A parameter\", description = \"Configurable param\")\n  val value : String = \"hello\")\n</code></pre>\n\n<p>(\"public\" does not seem to have any effect).\nSee this documentation for details <a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"nofollow noreferrer\">annotation-use-site-targets</a></p>\n"}], "owner": {"reputation": 307, "user_id": 3308078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Kqdu.png?s=128&g=1", "display_name": "GuillaumeCleme", "link": "https://stackoverflow.com/users/3308078/guillaumecleme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 58561100, "answer_count": 1, "score": 1, "last_activity_date": 1572015890, "creation_date": 1557861227, "last_edit_date": 1557862385, "question_id": 56137109, "link": "https://stackoverflow.com/questions/56137109/expressing-java-annotation-class-with-members-in-kotlin", "title": "Expressing Java Annotation Class with Members in Kotlin", "body": "<p>I'm new to Kotlin and currently using v1.3.31 in an OSGI bundle development POC. I'm currently using annotation processors to generate the OSGI manifest declarations and I am trying to find the <strong>Kotlin equivalent</strong> of the following:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ObjectClassDefinition(name=\"Config\", description = \"Sample Config\")\n    public static @interface Config {\n        @AttributeDefinition(name = \"A parameter\", description = \"Configurable param\")\n        String myParameter() default \"\";\n    }\n</code></pre>\n\n<p>Given that these OSGI annotations are created as:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RetentionPolicy.CLASS)\n@Target(ElementType.TYPE)\npublic @interface ObjectClassDefinition\n\n/*....*/\n\n@Retention(RetentionPolicy.CLASS)\n@Target(ElementType.METHOD)\npublic @interface AttributeDefinition\n</code></pre>\n\n<p>The closest I can get in Kotlin is using the <code>@ObjectClassDefinition</code> annotation on a <code>public annotation class</code> but since Kotlin annotation classes do not support members, I cannot use the <code>@AttributeDefinition</code> on a class member. </p>\n\n<ul>\n<li>I've tried to only use a Kotlin <code>class</code> or <code>interface</code> but the annotation processor will not allow any non-annotation class. </li>\n<li>I've also tried to create a <code>java.lang.Annotation</code> in Kotlin to bypass this behavior, but the compiler will not allow it.</li>\n</ul>\n\n<p>Current partially working implementation and here's is the latest working <a href=\"https://github.com/GuillaumeC91/sling-kotlin-samples/blob/5dfabad73810433fa5c4a0b17e11a61b2580e755/core/src/main/java/com/github/guillaumec91/core/servlets/SimpleKotlinServlet.kt\" rel=\"nofollow noreferrer\">GitHub source.</a>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ObjectClassDefinition(name = \"Sample Kotlin servlet\",\n            description = \"Simple Kotlin servlet with configurable properties\")\n    public annotation class  Config (\n        val value : String = \"hello\"\n    )\n</code></pre>\n\n<p>I've noticed that annotations can be particularly tricky in Kotlin. Any insight is greatly appreciated!</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1557860874, "post_id": 56137023, "comment_id": 98905099, "body": "You hover over the field, or CTRL+click to find the replacement, or you read the docs to find the replacement."}, {"owner": {"reputation": 585, "user_id": 8894193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agc2O.jpg?s=128&g=1", "display_name": "Said", "link": "https://stackoverflow.com/users/8894193/said"}, "edited": false, "score": 0, "creation_date": 1557860947, "post_id": 56137023, "comment_id": 98905149, "body": "Do you use that for view pager or?"}, {"owner": {"reputation": 27, "user_id": 9911470, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fz-DSHmV8ck/AAAAAAAAAAI/AAAAAAAAJHY/F8ypd6YNkBE/photo.jpg?sz=128", "display_name": "Daniel Gustavo Leguizamon Rozo", "link": "https://stackoverflow.com/users/9911470/daniel-gustavo-leguizamon-rozo"}, "edited": false, "score": 0, "creation_date": 1557861053, "post_id": 56137023, "comment_id": 98905202, "body": "It does not give the option to replace, it&#39;s just a warning. Yes, I am using a viewpager"}, {"owner": {"reputation": 7521, "user_id": 1219389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6otAH.jpg?s=128&g=1", "display_name": "PPartisan", "link": "https://stackoverflow.com/users/1219389/ppartisan"}, "edited": false, "score": 0, "creation_date": 1557862753, "post_id": 56137023, "comment_id": 98905988, "body": "Have a look at the <a href=\"https://developer.android.com/jetpack/androidx/releases/fragment#1.1.0-alpha07\" rel=\"nofollow noreferrer\">Android Docs</a> on this. It recommends you use <code>setMaxLifecycle()</code> instead"}], "answers": [{"tags": [], "owner": {"reputation": 585, "user_id": 8894193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agc2O.jpg?s=128&g=1", "display_name": "Said", "link": "https://stackoverflow.com/users/8894193/said"}, "is_accepted": false, "score": 0, "last_activity_date": 1557861531, "last_edit_date": 1557861531, "creation_date": 1557861221, "answer_id": 56137106, "question_id": 56137023, "link": "https://stackoverflow.com/questions/56137023/what-can-i-do-when-an-android-method-is-depreciated/56137106#56137106", "title": "What can I do when an Android method is depreciated?", "body": "<p>So, if you're using view pager, you can do this</p>\n\n<pre><code>viewPager?.addOnPageChangeListener(object : ViewPager.OnPageChangeListener {\n\n        override fun onPageScrollStateChanged(state: Int) {\n        }\n\n        override fun onPageScrolled(position: Int, positionOffset: Float, positionOffsetPixels: Int) {\n\n        }\n        override fun onPageSelected(position: Int) {\n\n        }\n\n    })\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 369, "user_id": 4148985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120c69409d84fbdb2a2fefaa9bea90d6?s=128&d=identicon&r=PG&f=1", "display_name": "rd7773", "link": "https://stackoverflow.com/users/4148985/rd7773"}, "edited": false, "score": 0, "creation_date": 1560754934, "post_id": 56139679, "comment_id": 99824728, "body": "So the lazy fragment initialisation should now be moved to onResume of the fragment instead of setUserVisibleHint where we inflate the viewStub ?"}, {"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "reply_to_user": {"reputation": 369, "user_id": 4148985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120c69409d84fbdb2a2fefaa9bea90d6?s=128&d=identicon&r=PG&f=1", "display_name": "rd7773", "link": "https://stackoverflow.com/users/4148985/rd7773"}, "edited": false, "score": 0, "creation_date": 1560788847, "post_id": 56139679, "comment_id": 99842084, "body": "@rd7773 - yep, you&#39;ll only get <code>onResume()</code> once you become the current page in the ViewPager."}, {"owner": {"reputation": 49025, "user_id": 72437, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ay0Dg.jpg?s=128&g=1", "display_name": "Cheok Yan Cheng", "link": "https://stackoverflow.com/users/72437/cheok-yan-cheng"}, "edited": false, "score": 0, "creation_date": 1563483101, "post_id": 56139679, "comment_id": 100725845, "body": "Just use <code>onResume</code> as replacement for <code>setUserVisibleHint</code>. Cool. However, I feel there is 1 or 2 seconds delay for <code>onResume</code> to be called, after swiping the page. Is that normal?"}], "tags": [], "owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "is_accepted": false, "score": 4, "last_activity_date": 1557874717, "creation_date": 1557874717, "answer_id": 56139679, "question_id": 56137023, "link": "https://stackoverflow.com/questions/56137023/what-can-i-do-when-an-android-method-is-depreciated/56139679#56139679", "title": "What can I do when an Android method is depreciated?", "body": "<p>As per the <a href=\"https://developer.android.com/jetpack/androidx/releases/fragment#1.1.0-alpha07\" rel=\"nofollow noreferrer\">Fragment release notes</a>:</p>\n\n<blockquote>\n  <ul>\n  <li>You can now set a max Lifecycle state for a Fragment by calling <code>setMaxLifecycle()</code> on a FragmentTransaction. This replaces the now deprecated <code>setUserVisibleHint()</code>. <code>FragmentPagerAdapter</code> and <code>FragmentStatePagerAdapter</code> have a new constructor that allows you to switch to the new behavior. (<a href=\"https://issuetracker.google.com/issues/129780800\" rel=\"nofollow noreferrer\">b/129780800</a>)</li>\n  </ul>\n</blockquote>\n\n<p>Looking at the <code>FragmentPagerAdapter</code> (and the same applies to <code>FragmentStatePagerAdapter</code>), you'll note that the default constructor is <em>also</em> deprecated, replaced with a second constructor that takes an <code>int behavior</code> that can be one of two values:</p>\n\n<ol>\n<li><p>The deprecated <a href=\"https://developer.android.com/reference/androidx/fragment/app/FragmentPagerAdapter#BEHAVIOR_SET_USER_VISIBLE_HINT\" rel=\"nofollow noreferrer\"><code>BEHAVIOR_SET_USER_VISIBLE_HINT</code></a>, which is the old behavior where you get a callback to <code>setUserVisibleHint()</code> whenever the page changes.</p></li>\n<li><p>The new behavior, <a href=\"https://developer.android.com/reference/androidx/fragment/app/FragmentPagerAdapter#BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT\" rel=\"nofollow noreferrer\"><code>BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT</code></a> which only calls <code>onResume()</code> on the current Fragment - every other Fragment is only sent <code>onStart()</code>.</p></li>\n</ol>\n\n<p>Therefore if you switch to the new <code>BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT</code>, then you can move the logic you have in <code>setUserVisibleHint()</code> to <code>onResume()</code>:</p>\n\n<pre><code>override fun onResume() {\n    super.onResume()\n    getTask()\n}\n</code></pre>\n\n<p>If you continue to use the deprecated constructor for your adapter, then you would need to continue to use <code>setUserVisibleHint()</code> - you should change both in sync.</p>\n"}], "owner": {"reputation": 27, "user_id": 9911470, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fz-DSHmV8ck/AAAAAAAAAAI/AAAAAAAAJHY/F8ypd6YNkBE/photo.jpg?sz=128", "display_name": "Daniel Gustavo Leguizamon Rozo", "link": "https://stackoverflow.com/users/9911470/daniel-gustavo-leguizamon-rozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1122, "favorite_count": 0, "closed_date": 1557902320, "answer_count": 2, "score": 0, "last_activity_date": 1557896410, "creation_date": 1557860824, "last_edit_date": 1557896410, "question_id": 56137023, "link": "https://stackoverflow.com/questions/56137023/what-can-i-do-when-an-android-method-is-depreciated", "closed_reason": "Duplicate", "title": "What can I do when an Android method is depreciated?", "body": "<p>I am using the method in kotlin</p>\n\n<pre><code> override fun setUserVisibleHint (isVisibleToUser: Boolean) {\n    super.setUserVisibleHint (isVisibleToUser)\n    if (isVisibleToUser &amp;&amp; isResumed) {\n        getTask ()\n    }\n}\n</code></pre>\n\n<p>but it tells me that it is depreciated, depreciated in java.</p>\n\n<p>this line <strike>setUserVisibleHint</strike></p>\n\n<p>How can that warning be solved or replaced?</p>\n\n<p><a href=\"https://i.stack.imgur.com/poYT4.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["android", "kotlin", "retrofit2", "rx-java2", "observer-pattern"], "answers": [{"tags": [], "owner": {"reputation": 27113, "user_id": 1993204, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/n4qZa.jpg?s=128&g=1", "display_name": "Bartek Lipinski", "link": "https://stackoverflow.com/users/1993204/bartek-lipinski"}, "is_accepted": false, "score": 1, "last_activity_date": 1557859889, "last_edit_date": 1592644375, "creation_date": 1557859889, "answer_id": 56136786, "question_id": 56136490, "link": "https://stackoverflow.com/questions/56136490/how-to-replace-disposable-with-observable/56136786#56136786", "title": "How to replace Disposable with Observable", "body": "<h1>Observable</h1>\n<p>Check what is returned by all things in the chain <code>client.getAllArticles()</code>, <code>.subscribeOn(Schedulers.io())</code>, <code>.observeOn(AndroidSchedulers.mainThread())</code>. Every single of those three calls return an <code>Observable</code> (before or after some sort of transformation).</p>\n<p>The last one in the chain (the result of <code>.observeOn(AndroidSchedulers.mainThread())</code>) is the eventual <code>Observable</code> that is used by you.</p>\n<p><a href=\"https://i.stack.imgur.com/qf1oa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qf1oa.png\" alt=\"Observable\" /></a></p>\n<p><em>It's the thing that will be observed by the <code>Observer</code>.</em></p>\n<hr />\n<h1>Observer</h1>\n<p>From <a href=\"http://reactivex.io/documentation/observable.html\" rel=\"nofollow noreferrer\">RxJava docs</a>:</p>\n<blockquote>\n<p>The Subscribe method is how you connect an observer to an Observable. Your observer implements some subset of the following methods:</p>\n<p>onNext [...]</p>\n<p>onError [...]</p>\n<p>onCompleted [...]</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/XZKto.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XZKto.png\" alt=\"\" /></a></p>\n<hr />\n<h1>Question</h1>\n<blockquote>\n<p>Also, how can I change my code so I can use Observable or Flowable instead of Disposable</p>\n</blockquote>\n<p>Usually you would just expose an <code>Observable</code> and let the &quot;user&quot; of the Repository create an <code>Observer</code> and manage the <code>Disposable</code> (the hook for taking record of subscribed <code>Observers</code>). So something like this (not tested, writing off the top of my head):</p>\n<pre><code>fun loadJson() : Observable&lt;Article&gt; = client.getAllArticles().subscribeOn(Schedulers.io())\n</code></pre>\n<p>(<code>observeOn</code> is really for the <code>Observer</code>)</p>\n"}], "owner": {"reputation": 109, "user_id": 11452559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0a16e3bc054f9f90a40582d432cf5e?s=128&d=identicon&r=PG&f=1", "display_name": "Lauren", "link": "https://stackoverflow.com/users/11452559/lauren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557859889, "creation_date": 1557858576, "question_id": 56136490, "link": "https://stackoverflow.com/questions/56136490/how-to-replace-disposable-with-observable", "title": "How to replace Disposable with Observable", "body": "<p>I'm a newbie at RxJava.</p>\n\n<p>One of the first things I learned is that the Observer Pattern consists of two components(among others): <strong>Observables</strong> and <strong>Observers</strong> </p>\n\n<p>In the code below what is the Observable and what is the Observer?</p>\n\n<pre><code>class JsonRepository{\n\nprivate val client by lazy {\n    Retrofit.Builder()\n        .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n        .addConverterFactory(GsonConverterFactory.create())\n        .baseUrl(\"https://jsonplaceholder.typicode.com/\")\n        .build()\n        .create(JsonApi::class.java)\n}\n\nvar disposable: Disposable? = null\nvar allArticles: List&lt;Article&gt; = emptyList()\n\n\nfun loadJson(){\n    disposable = client.getAllArticles()\n        .subscribeOn(Schedulers.io())\n        .observeOn(AndroidSchedulers.mainThread())\n        .subscribe(\n            { result -&gt; allArticles = result },\n            { error -&gt; Log.e(\"ERROR\", error.message) }\n        )\n}\n\n}\n</code></pre>\n\n<p>Also, how can I change my code so I can use Observable or Flowable instead of Disposable</p>\n"}, {"tags": ["android", "kotlin", "transitiondrawable", "gradientdrawable"], "answers": [{"comments": [{"owner": {"reputation": 3029, "user_id": 4220994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b32f55cd8027464c404accbe200ba72?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4220994/joe"}, "edited": false, "score": 0, "creation_date": 1557883286, "post_id": 56139381, "comment_id": 98911556, "body": "Should your animateGradient function replace what I have in the <code>when</code> statement? Or does it go after? Can you provide usage for this?"}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "reply_to_user": {"reputation": 3029, "user_id": 4220994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b32f55cd8027464c404accbe200ba72?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4220994/joe"}, "edited": false, "score": 0, "creation_date": 1557916229, "post_id": 56139381, "comment_id": 98923856, "body": "@Joe you call it from each invididual <code>when</code> case instead of <code>gd.setColors(..)</code>, this creates and runs transition animation. You will need to provide current gradient colors as <code>from</code> argument and target colors as <code>to</code>."}, {"owner": {"reputation": 3029, "user_id": 4220994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b32f55cd8027464c404accbe200ba72?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4220994/joe"}, "edited": false, "score": 0, "creation_date": 1557932207, "post_id": 56139381, "comment_id": 98934012, "body": "I edited my question to show progress. Your solution is crashing. I don&#39;t understand why there are two array parameters. Shouldn&#39;t those be single colors to handle the from (color 1 of the gradient) &amp; to (color 2 of the gradient)?"}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "reply_to_user": {"reputation": 3029, "user_id": 4220994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b32f55cd8027464c404accbe200ba72?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4220994/joe"}, "edited": false, "score": 0, "creation_date": 1557933649, "post_id": 56139381, "comment_id": 98934891, "body": "@Joe modified the method to track current gradient color within it, this replaces <code>from</code> argument so you only need to provide new gradient colors."}, {"owner": {"reputation": 3029, "user_id": 4220994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b32f55cd8027464c404accbe200ba72?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4220994/joe"}, "edited": false, "score": 0, "creation_date": 1557936253, "post_id": 56139381, "comment_id": 98936406, "body": "After some trial and error, I got it to work! Thank you! The only thing that&#39;s not working is initializing currentGradient with the default colors. It looks like it doesn&#39;t want me using ContextCompat.getColor(this, R.color.dBlue), ContextCompat.getColor(this, R.color.lBlue). However, if I use Color.BLUE, Color.RED to initialize currentGradient, it works just fine. This issue is out of scope of my question, but do you know why it won&#39;t let me use ContextCompat ?"}, {"owner": {"reputation": 3029, "user_id": 4220994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b32f55cd8027464c404accbe200ba72?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4220994/joe"}, "edited": false, "score": 0, "creation_date": 1557937127, "post_id": 56139381, "comment_id": 98936817, "body": "Nevermind my last comment. I got it working. Just needed to initialize the array in onCreate(). Thanks again for all of your help bud :)"}], "tags": [], "owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "is_accepted": true, "score": 1, "last_activity_date": 1557933650, "last_edit_date": 1557933650, "creation_date": 1557872433, "answer_id": 56139381, "question_id": 56135231, "link": "https://stackoverflow.com/questions/56135231/transitioning-a-gradientdrawable/56139381#56139381", "title": "Transitioning a GradientDrawable", "body": "<p>I don't think gradient drawable has built in transition methods, but You can run your own value animator to perform color transition.</p>\n\n<pre><code>var anim : Animator? = null\n\nfun animateGradient(gd: GradientDrawable, from : IntArray, to: IntArray){\n    require(from.size == to.size)\n    anim?.cancel()\n    val arraySize = from.size\n    val props = Array&lt;PropertyValuesHolder&gt;(arraySize){\n        PropertyValuesHolder.ofObject(it.toString(), ArgbEvaluator(), from[it], to[it])\n    }\n    val anim = ValueAnimator.ofPropertyValuesHolder(*props)\n    anim.addUpdateListener {\n        gd.colors = IntArray(arraySize){i -&gt;\n            it.getAnimatedValue(i.toString()) as Int\n        }\n    }\n    anim.duration = 1500\n    anim.start()\n    this.anim = anim\n}\n</code></pre>\n\n<p><strong>Edit</strong>: modified method so it that tracks current color itself, reduced number of arguments.</p>\n\n<pre><code>var anim : Animator? = null\n// variable that tracks current color - must be initialized with default gradient colors\nvar currentGradient = intArrayOf(\n        ContextCompat.getColor(this, R.color.dBlue),\n        ContextCompat.getColor(this, R.color.lBlue)\n    )\n\nfun animateGradient(targetColors: IntArray){\n    val from = currentGradient\n    require(from.size == targetColors.size)\n    anim?.cancel()\n    val arraySize = from.size\n    val props = Array&lt;PropertyValuesHolder&gt;(arraySize){\n        PropertyValuesHolder.ofObject(it.toString(), ArgbEvaluator(), from[it], targetColors[it])\n    }\n    val anim = ValueAnimator.ofPropertyValuesHolder(*props)\n    anim.addUpdateListener {valueAnim -&gt;\n        IntArray(arraySize){i -&gt;\n            valueAnim.getAnimatedValue(i.toString()) as Int\n        }.let{\n            currentGradient = it\n            gd.colors = it\n        }\n    }\n    anim.duration = 1500\n    anim.start()\n    this.anim = anim\n}\n</code></pre>\n\n<p>Call site:</p>\n\n<pre><code>when(calories){\n    in 0..50 -&gt; animateGradient(intArrayOf(\n        ContextCompat.getColor(this, R.color.dBlue),\n        ContextCompat.getColor(this, R.color.lBlue)\n    ))\n    in 51..100 -&gt; animateGradient(intArrayOf(\n        ContextCompat.getColor(this, R.color.dRed),\n        ContextCompat.getColor(this, R.color.lRed)\n    ))\n    // etc...\n}\n</code></pre>\n"}], "owner": {"reputation": 3029, "user_id": 4220994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b32f55cd8027464c404accbe200ba72?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4220994/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 56139381, "answer_count": 1, "score": 0, "last_activity_date": 1557933650, "creation_date": 1557853129, "last_edit_date": 1557932095, "question_id": 56135231, "link": "https://stackoverflow.com/questions/56135231/transitioning-a-gradientdrawable", "title": "Transitioning a GradientDrawable", "body": "<p>I have a function that creates a gradient across the background of my <code>MainActivity</code>. The gradient is created programmatically as a <code>GradientDrawable</code>. Certain interactions in the App change the color of the gradient.</p>\n\n<p>The gradient and colors are properly shown, and they do change accordingly, however, I would like a transition effect on the color changes. Right now, the colors transition instantly with no crossfade.</p>\n\n<pre><code>fun createGradient() {\n    gd.shape = GradientDrawable.RECTANGLE\n    mainActivityID.background = gd\n    gd.gradientType = GradientDrawable.LINEAR_GRADIENT\n    gd.orientation = (GradientDrawable.Orientation.BL_TR)\n}\n</code></pre>\n\n<p>Based on interactions in the App, I use a <code>when</code> statement to change the colors of the <code>GradientDrawable</code></p>\n\n<pre><code>fun changeGradient(){\n\n    //val td = gd as TransitionDrawable\n    //td.isCrossFadeEnabled = true\n    //td.startTransition(1500)\n\n    when(calories){\n        in 0..50 -&gt; gd.colors = intArrayOf(\n            ContextCompat.getColor(this, R.color.dBlue),\n            ContextCompat.getColor(this, R.color.lBlue)\n        )\n        in 51..100 -&gt; gd.colors = intArrayOf(\n            ContextCompat.getColor(this, R.color.dRed),\n            ContextCompat.getColor(this, R.color.lRed)\n        )\n        // etc...\n    }\n}\n</code></pre>\n\n<p>I tried casting the GradientDrawable as a TransitionDrawable (as seen in the commented code above), but that crashes with: </p>\n\n<blockquote>\n  <p>java.lang.ClassCastException:\n  android.graphics.drawable.GradientDrawable cannot be cast to\n  android.graphics.drawable.TransitionDrawable</p>\n</blockquote>\n\n<p><strong>How do I add a 1500 millisecond transition between the GradientDrawable color changes?</strong></p>\n\n<p>Progress crashes with <code>java.lang.NegativeArraySizeException: -16777216</code></p>\n\n<pre><code>when(calories){\n    in 0..50 -&gt; animateGradient(gd, IntArray(Color.BLACK), IntArray(Color.CYAN))\n    in 51..100 -&gt; animateGradient(gd, IntArray(Color.RED), IntArray(Color.BLUE))\n    in 101..150 -&gt; animateGradient(gd, IntArray(Color.GREEN), IntArray(Color.YELLOW))\n    // etc... about 15 more statements.\n}\n</code></pre>\n"}, {"tags": ["android", "firebase", "mobile", "kotlin", "firebase-authentication"], "comments": [{"owner": {"reputation": 63626, "user_id": 7015400, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rhlKG.jpg?s=128&g=1", "display_name": "Peter Haddad", "link": "https://stackoverflow.com/users/7015400/peter-haddad"}, "edited": false, "score": 0, "creation_date": 1557854207, "post_id": 56135092, "comment_id": 98902023, "body": "Didnt you create the function <code>saveusertofirebasedatabase</code>?"}, {"owner": {"reputation": 145, "user_id": 11494331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03747fb09126fb845f4fee694c2f9f88?s=128&d=identicon&r=PG&f=1", "display_name": "oTwo", "link": "https://stackoverflow.com/users/11494331/otwo"}, "reply_to_user": {"reputation": 63626, "user_id": 7015400, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rhlKG.jpg?s=128&g=1", "display_name": "Peter Haddad", "link": "https://stackoverflow.com/users/7015400/peter-haddad"}, "edited": false, "score": 0, "creation_date": 1557855609, "post_id": 56135092, "comment_id": 98902642, "body": "Yes I did. My confusion is on the fact that why the uid when the user is recreated remain the same. I will edit my question since there is some confusion."}], "answers": [{"tags": [], "owner": {"reputation": 63626, "user_id": 7015400, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rhlKG.jpg?s=128&g=1", "display_name": "Peter Haddad", "link": "https://stackoverflow.com/users/7015400/peter-haddad"}, "is_accepted": true, "score": 0, "last_activity_date": 1557856736, "creation_date": 1557856736, "answer_id": 56136079, "question_id": 56135092, "link": "https://stackoverflow.com/questions/56135092/firebase-mobile-authentication-and-save-user-to-database/56136079#56136079", "title": "FIrebase mobile authentication and save user to database", "body": "<p>This your code:</p>\n\n<pre><code>private fun saveUserToFirebaseDatabase(){\nval uid = FirebaseAuth.getInstance().uid ?: \"\"\nval ref = FirebaseDatabase.getInstance().getReference(\"/users/$uid\")\nval user = User(uid, \"\",\"+91\"+MobileNumber.text.toString(), \"\")\nref.setValue(user)\n}\n\nclass User(val uid: String, val username: String, val mobile: String, val mail: String)\n</code></pre>\n\n<p>First, you retrieve the <code>userId</code>, then you add the <code>userId</code> under <code>users</code> in the database.</p>\n\n<p>After that you create an instance of class <code>User</code> and add the <code>user</code> to the database.</p>\n\n<p>This <code>userId</code> is the id of the currently logged in user. If a new authenticated user logs in then a new user will be added to the database.</p>\n\n<p>The <code>userId</code> is generated randomly it's creation has nothing to do with the email or Facebook or any other login type. </p>\n"}], "owner": {"reputation": 145, "user_id": 11494331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03747fb09126fb845f4fee694c2f9f88?s=128&d=identicon&r=PG&f=1", "display_name": "oTwo", "link": "https://stackoverflow.com/users/11494331/otwo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 56136079, "answer_count": 1, "score": 1, "last_activity_date": 1557927695, "creation_date": 1557852467, "last_edit_date": 1557927695, "question_id": 56135092, "link": "https://stackoverflow.com/questions/56135092/firebase-mobile-authentication-and-save-user-to-database", "title": "FIrebase mobile authentication and save user to database", "body": "<p>I am authenticating users through mobile number in Firebase. Currently I am in the test mode. My idea is that if the mobile number has not been used previously then a new user is created. Here I am using a function saveUserToFirebaseDatabase. I was of the idea that this function would verify whether the user already exists. But the way I have written it as of now it doesnot. Hence, when the user logs out and logs in, the values of the child, which I inserted somewhere else are lost. That is obviously because the function saveUserToFirebaseDatabase is recreating the user.</p>\n\n<p>Here I observe an interesting thing, which is that the uid that is created for the mobile number remains same for all login. This gets me further confused about the saveUserToFirebaseDatabase function. Here is my code for saving the user in the database.</p>\n\n<pre><code>private fun saveUserToFirebaseDatabase(){\n    val uid = FirebaseAuth.getInstance().uid ?: \"\"\n    val ref = FirebaseDatabase.getInstance().getReference(\"/users/$uid\")\n    val user = User(uid, \"\",\"+91\"+MobileNumber.text.toString(), \"\")\n    ref.setValue(user)\n}\n\nclass User(val uid: String, val username: String, val mobile: String, val mail: String)\n</code></pre>\n\n<p>The user authentication routine is as per the Firebase documentation and works smoothly. Can someone please explain how this function saveUserToFirebaseDatabase is working. Why does the uid always remain constant, although, the other childs username and mail get reset to \"\"</p>\n"}, {"tags": ["android", "kotlin", "rx-java", "reactivex"], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 7258255, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d17404439bd068ad062163de09699103?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Marques", "link": "https://stackoverflow.com/users/7258255/thomas-marques"}, "edited": false, "score": 0, "creation_date": 1557871957, "post_id": 56135291, "comment_id": 98909267, "body": "Exactly, I&#39;m using retrofit. I was running a call and waiting for a Flowable. <code>@GET(&quot;api&#47;web&#47;events&#47;{event_id}&#47;get-tickets&quot;)  fun getTickets(@Header(&quot;If-Modified-Since&quot;) date: String,                         @Path(&quot;event_id&quot;) eventId: String): Flowable&lt;List&lt;Ticket&gt;&gt;</code>"}], "tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": false, "score": 0, "last_activity_date": 1557853411, "creation_date": 1557853411, "answer_id": 56135291, "question_id": 56134673, "link": "https://stackoverflow.com/questions/56134673/how-to-perform-call-sequence-to-a-rest-api-in-android-app/56135291#56135291", "title": "How to perform call sequence to a REST API in Android App?", "body": "<p>I'm going to assume, that you're using Retrofit. If that's the case, then you could wrap your getTickets call in <code>Single&lt;Response&lt;SomeModel&gt;&gt;</code>. This way, on first map you can check the errorcode, something among the lines of:</p>\n\n<pre><code>...getTickets(id)\n  .map{ response -&gt; \n        when {\nresponse.isSuccessful &amp;&amp; response.body!=null -&gt; {\n                                         saveTickets(it)\n                                         it\n} \n!response.isSuccessful &amp;&amp; response.errorCode() == 304 -&gt; {\nfactory.retrieveCacheDataStore().getTickets(eventId)\n}\nelse -&gt; throw IOException()\n}\n}\n</code></pre>\n\n<p>This could of course be made pretty using standard/extension functions but wanted to keep it simple for readability purposes.</p>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 2784, "user_id": 4846736, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/EXXDZ.png?s=128&g=1", "display_name": "Lamour", "link": "https://stackoverflow.com/users/4846736/lamour"}, "is_accepted": false, "score": 0, "last_activity_date": 1557860958, "last_edit_date": 1557860958, "creation_date": 1557858951, "answer_id": 56136579, "question_id": 56134673, "link": "https://stackoverflow.com/questions/56134673/how-to-perform-call-sequence-to-a-rest-api-in-android-app/56136579#56136579", "title": "How to perform call sequence to a REST API in Android App?", "body": "<p>Most of my comments are my explanations. </p>\n\n<pre><code>data class Ticket(val id:Int) { \n     companion object { \n         fun toListFrom(jsonObject: JSONObject): TICKETS { \n             /**do your parsing of data transformation here */\n             return emptyList()\n         }\n     }\n}\n\ntypealias TICKETS = List&lt;Ticket&gt;\n\n\nclass ExampleViewModel(): ViewModel() {\n\n    private var error: BehaviorSubject&lt;Throwable&gt; = BehaviorSubject.create()\n    private var tickets: BehaviorSubject&lt;TICKETS&gt; = BehaviorSubject.create()\n\n    /**public interfaces that your activity or fragment talk to*/\n    fun error(): Observable&lt;Throwable&gt; = this.error \n    fun tickets(): Observable&lt;TICKETS&gt; = this.tickets\n\n    fun start() {\n\n        fetch(\"http://api.something.com/v1/tickets/\")\n                .subscribeOn(Schedulers.io())\n                .onErrorResumeNext { t: Throwable -&gt; \n                    if (t.message == \"304\") {\n                        get(3)\n                    } else {\n                        this.error.onNext(t)\n                        /** this makes the chain completed gracefuly without executing flatMap or any other operations*/\n                        Observable.empty()\n                    }\n                }\n                .flatMap(this::insertToRealm)\n                .subscribe(this.tickets)\n\n    }\n\n    private fun insertToRealm(tickets: TICKETS) : Observable&lt;TICKETS&gt; {\n        /**any logic here is mainly to help you save into Realm**/\n        /** I think realm has the option to ignore items that are already in the db*/\n        return Observable.empty()\n    }\n\n    private fun get(id: Int): Observable&lt;TICKETS&gt; {\n        /**any logic here is mainly to help you fetch from your cache**/\n        return Observable.empty()\n    }\n\n    private fun fetch(apiRoute: String): Observable&lt;TICKETS&gt; {\n        /**\n         * boilerplate code \n           wether you're using Retrofit or Okhttp, that's the logic you \n           should try to have \n         * */\n        val status: Int = 0\n        val rawResponse = \"\"\n        val error: Throwable? = null \n\n        val jsonResponse = JSONObject(rawResponse)\n        return Observable.defer {\n           if (status == 200) {\n               Observable.just(Ticket.toListFrom(jsonResponse))\n           }\n            else if (status == 304) {\n               Observable.error&lt;TICKETS&gt;(Throwable(\"304\"))          \n            }\n            else {\n                Observable.error&lt;TICKETS&gt;(error)\n            }\n        }\n    }\n\n    override fun onCleared() {\n        super.onCleared()\n        this.error = BehaviorSubject.create()\n        this.tickets = BehaviorSubject.create()\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 611, "user_id": 7258255, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d17404439bd068ad062163de09699103?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Marques", "link": "https://stackoverflow.com/users/7258255/thomas-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557860958, "creation_date": 1557850668, "question_id": 56134673, "link": "https://stackoverflow.com/questions/56134673/how-to-perform-call-sequence-to-a-rest-api-in-android-app", "title": "How to perform call sequence to a REST API in Android App?", "body": "<p>I'm having a hard time making a call to my api. I'm using Reactivex with kotlin and Flowables. My API returns a list of items if the date I passed by the \"If-Modified_since\" header is less than the last update. \nIf there is no update I get as an app return android app a 304 error.</p>\n\n<p>I need to do the following procedure.\n1-> I make a call to the api\n2-> If the call is successful, save the list in Realm and return to the viewmodel\n3-> If the error is 304, I perform a cache search (Realm) of the items\n4-> If it is another error, I return the error normally for the ViewModel</p>\n\n<p>Here is the code below, but I'm not sure if it's that way.</p>\n\n<pre><code>override fun getTickets(eventId: String): Flowable&lt;List&lt;Ticket&gt;&gt; {\n        return factory\n                .retrieveRemoteDataStore()\n                .getTickets(eventId)\n                .map {\n                    saveTickets(it)\n                    it\n                }.onErrorResumeNext { t: Throwable -&gt;\n                    if (t is HttpException &amp;&amp; t.response().code() == 304) {\n                        factory.retrieveCacheDataStore().getTickets(eventId)\n                    } else\n                        //Should return error\n                }\n</code></pre>\n\n<p>The question is, what is the best way to do this? </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["java", "android", "python", "sockets", "kotlin"], "comments": [{"owner": {"reputation": 1215, "user_id": 10007682, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQ0dG.png?s=128&g=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/10007682/dylan"}, "edited": false, "score": 0, "creation_date": 1557848159, "post_id": 56133981, "comment_id": 98899053, "body": "It doesnt matter what language is on the back-end, kotlin sockets will be able to connect to it."}, {"owner": {"reputation": 43, "user_id": 10125613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f2d7db683735f0eaf43e0db45cbbc2?s=128&d=identicon&r=PG&f=1", "display_name": "dmelton_", "link": "https://stackoverflow.com/users/10125613/dmelton"}, "reply_to_user": {"reputation": 1215, "user_id": 10007682, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQ0dG.png?s=128&g=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/10007682/dylan"}, "edited": false, "score": 0, "creation_date": 1557848594, "post_id": 56133981, "comment_id": 98899314, "body": "@Dylan That&#39;s true, but there isn&#39;t much information available about using sockets with Kotlin."}, {"owner": {"reputation": 1215, "user_id": 10007682, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQ0dG.png?s=128&g=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/10007682/dylan"}, "edited": false, "score": 0, "creation_date": 1557848747, "post_id": 56133981, "comment_id": 98899395, "body": "Take a look at this: <a href=\"https://github.com/antonyalkmim/CalculatorKT\" rel=\"nofollow noreferrer\">github.com/antonyalkmim/CalculatorKT</a>"}, {"owner": {"reputation": 1157, "user_id": 7894911, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zE7ZYx-bfsw/AAAAAAAAAAI/AAAAAAAAIas/HMikXw-ONKc/photo.jpg?sz=128", "display_name": "Yaswant Narayan", "link": "https://stackoverflow.com/users/7894911/yaswant-narayan"}, "edited": false, "score": 0, "creation_date": 1557903059, "post_id": 56133981, "comment_id": 98916505, "body": "I have used both the libraries and it works great  <a href=\"https://github.com/TooTallNate/Java-WebSocket\" rel=\"nofollow noreferrer\">github.com/TooTallNate/Java-WebSocket</a> <a href=\"https://github.com/gusavila92/java-android-websocket-client\" rel=\"nofollow noreferrer\">github.com/gusavila92/java-android-websocket-client</a>"}], "owner": {"reputation": 43, "user_id": 10125613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f2d7db683735f0eaf43e0db45cbbc2?s=128&d=identicon&r=PG&f=1", "display_name": "dmelton_", "link": "https://stackoverflow.com/users/10125613/dmelton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557847853, "creation_date": 1557847853, "question_id": 56133981, "link": "https://stackoverflow.com/questions/56133981/using-my-python-tcp-server-to-communicate-with-my-android-app", "title": "Using my Python TCP Server to Communicate with my Android App", "body": "<p>I'm trying to make an app that is being monitored by my Python server; the server can send requests to the app, and then the app would send a message back to the server saying if the request was accepted or denied. I do have to use a Python server and I would like my app to be in Kotlin. For example, the app will inform the server that bluetooth is on, and the server would send a request to turn it off, then the app would send a message back telling the server if the user said yes or no to the request.</p>\n\n<p>I have code for server and client using TCP sockets that I made last year. In this case, the client would be the Android app. </p>\n\n<p>Here is a very small code sample to show where I'm going:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#SERVER\nimport socket\n\nHOST = '0.0.0.0'\nPORT = 10000\nwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\n    s.bind((HOST, PORT))\n    s.listen()\n    print(\"main socket is listening...\")\n    connection, address = s.accept()\n    with connection:\n        print('Connected by', address,'\\n')\n        connection.sendall(b'Thank you for connecting!')\n\n#CLIENT\nimport socket\n\nHOST = ''  # The server's hostname or IP address\nPORT = 1000        # The port used by the server\n\nwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\n    s.connect((HOST, PORT))\n\n    # print thank you message\n    print(s.recv(1024).decode(encoding='utf-8'))\n</code></pre>\n\n<p>With that being said, would a be able to work with my Python TCP server, or should I go another direction that uses a Python back-end?</p>\n"}, {"tags": ["java", "spring", "kotlin", "spring-security", "x-forwarded-for"], "comments": [{"owner": {"reputation": 5265, "user_id": 6486622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b9237af0f1560b25956eab5056c2e3?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Zavedeev", "link": "https://stackoverflow.com/users/6486622/denis-zavedeev"}, "edited": false, "score": 0, "creation_date": 1557859209, "post_id": 56133593, "comment_id": 98904351, "body": "Are you using Tomcat?"}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 5265, "user_id": 6486622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b9237af0f1560b25956eab5056c2e3?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Zavedeev", "link": "https://stackoverflow.com/users/6486622/denis-zavedeev"}, "edited": false, "score": 0, "creation_date": 1557859446, "post_id": 56133593, "comment_id": 98904448, "body": "@caco3 the embedded one that comes with Spring Boot, yes."}], "answers": [{"tags": [], "owner": {"reputation": 5265, "user_id": 6486622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56b9237af0f1560b25956eab5056c2e3?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Zavedeev", "link": "https://stackoverflow.com/users/6486622/denis-zavedeev"}, "is_accepted": false, "score": 2, "last_activity_date": 1557862653, "last_edit_date": 1557862653, "creation_date": 1557861849, "answer_id": 56137281, "question_id": 56133593, "link": "https://stackoverflow.com/questions/56133593/associating-an-authenticationfailurebadcredentialsevent-with-the-remote-addres/56137281#56137281", "title": "Associating an `AuthenticationFailureBadCredentialsEvent` with the remote address in the presence of XFF headers", "body": "<p>From <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#appendix-proxy-server\" rel=\"nofollow noreferrer\">Spring Security#15.4 Proxy Server Configuration</a>:</p>\n\n<blockquote>\n  <p>When using a proxy server it is important to ensure that you have configured your application properly. For example, many applications will have a load balancer that responds to request for <code>https://example.com/</code> by forwarding the request to an application server at <code>https://192.168.1:8080</code> Without proper configuration, the application server will not know that the load balancer exists and treat the request as though <code>https://192.168.1:8080</code> was requested by the client.</p>\n  \n  <p>To fix this you can use RFC 7239 to specify that a load balancer is being used. To make the application aware of this, you need to either <strong>configure your application server aware of the <code>X-Forwarded</code> headers</strong>. For example Tomcat uses the <code>RemoteIpValve</code> and Jetty uses <code>ForwardedRequestCustomizer</code>. Alternatively, <strong>Spring 4.3+ users can leverage <code>ForwardedHeaderFilter</code>.</strong></p>\n</blockquote>\n\n<p>Neither Spring framework nor Spring Security itself do anything special about <code>X-Forwarded*</code> headers.</p>\n\n<p>So our options to apply such information are:</p>\n\n<ul>\n<li>exposing the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/filter/ForwardedHeaderFilter.html\" rel=\"nofollow noreferrer\"><code>ForwardedHeaderFilter</code></a> </li>\n<li>configuring the server</li>\n</ul>\n\n<p>Unfortunately <strong><code>ForwardedHeaderFilter</code> does not <a href=\"https://github.com/spring-projects/spring-framework/blob/e0654a5b3dcf55a7840cd29d25c55854a071202c/spring-web/src/main/java/org/springframework/web/filter/ForwardedHeaderFilter.java#L71\" rel=\"nofollow noreferrer\">inspect <code>X-Forwarded-For</code> header</a></strong> as of <code>5.1.7.RELEASE</code>. </p>\n\n<p>So the option left is to configure server. </p>\n\n<p>Since you're using tomcat you can supply a <code>server.tomcat.remote-ip-header</code> property to take the header into account.</p>\n\n<p><em>See also <a href=\"https://github.com/spring-projects/spring-boot/blob/v2.1.4.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/ServerProperties.java\" rel=\"nofollow noreferrer\"><code>ServerProperties</code></a></em></p>\n\n<p><strong>application.yml</strong>:</p>\n\n<pre><code>server:\n  tomcat:\n    remote-ip-header: X-Forwarded-For\n</code></pre>\n\n<p>then <a href=\"https://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr()\" rel=\"nofollow noreferrer\"><code>getRemoteAddr</code></a> will return the ip address present in <code>X-Forwarded-For</code> header which is used by <a href=\"https://github.com/spring-projects/spring-security/blob/e7f93f221d4b828d336627f5147a3edd02a8c28d/web/src/main/java/org/springframework/security/web/authentication/WebAuthenticationDetails.java#L50\" rel=\"nofollow noreferrer\"><code>WebAuthenticationDetails</code></a> itself</p>\n\n<p><strong><code>WebAuthenticationDetails.java</code></strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public WebAuthenticationDetails(HttpServletRequest request) {\n    this.remoteAddress = request.getRemoteAddr();\n\n    HttpSession session = request.getSession(false);\n    this.sessionId = (session != null) ? session.getId() : null;\n}\n</code></pre>\n\n<p>Here is a test a simple test:</p>\n\n<p><strong><code>IpController.kt</code></strong>:</p>\n\n<pre><code>@RestController\nclass IpController {\n    @GetMapping(\"/ip\")\n    fun getIp(request: HttpServletRequest) = mapOf(\"ip\" to request.remoteAddr)\n}\n</code></pre>\n\n<p><strong><code>IpControllerTest.kt</code></strong></p>\n\n<pre><code>@SpringBootTest(properties = [\"server.tomcat.remote-ip-header=X-Forwarded-For\"],\n        webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass IpControllerTest {\n    @Autowired\n    private lateinit var testRestTemplate: TestRestTemplate\n\n    @Test\n    fun `uses ip from x-forwarded-for`() {\n        val httpHeaders = HttpHeaders()\n        httpHeaders[\"X-Forwarded-For\"] = \"8.8.8.8\"\n        val httpEntity = HttpEntity&lt;Any&gt;(httpHeaders)\n        val map = testRestTemplate.exchange&lt;Map&lt;String, *&gt;&gt;(\"/ip\", HttpMethod.GET, httpEntity)\n                .body!!\n        assertEquals(\"8.8.8.8\", map[\"ip\"])\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557862653, "creation_date": 1557846580, "question_id": 56133593, "link": "https://stackoverflow.com/questions/56133593/associating-an-authenticationfailurebadcredentialsevent-with-the-remote-addres", "title": "Associating an `AuthenticationFailureBadCredentialsEvent` with the remote address in the presence of XFF headers", "body": "<p>So I wrote this ...</p>\n\n<pre><code>@Component\nclass AuthenticationFailureListener : ApplicationListener&lt;AuthenticationFailureBadCredentialsEvent&gt;{\n\n    private val bruteForceProtection : BruteForceProtection\n\n    @Inject\n    constructor(bruteForceProtection: BruteForceProtection){\n        this.bruteForceProtection = bruteForceProtection\n    }\n\n    override fun onApplicationEvent(event: AuthenticationFailureBadCredentialsEvent) {\n        val webDetails = event.authentication.details as WebAuthenticationDetails\n        val remoteAddress = webDetails.remoteAddress\n\n        bruteForceProtection.recordFailedAttempt(remoteAddress)\n    }\n}\n</code></pre>\n\n<p>Then realised I have no idea if Spring accounts for <code>X-Forwarded-For</code> headers when setting the remote address in the security context.</p>\n\n<p>Does it?</p>\n\n<p>Or how would I associate the <code>AuthenticationFailureBadCredentialsEvent</code> with the remote address it originated from?</p>\n"}, {"tags": ["java", "android", "xml", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "is_accepted": true, "score": 0, "last_activity_date": 1557852094, "last_edit_date": 1557852094, "creation_date": 1557846726, "answer_id": 56133655, "question_id": 56133573, "link": "https://stackoverflow.com/questions/56133573/custom-edittext/56133655#56133655", "title": "Custom EditText", "body": "<p>Try this</p>\n\n<pre><code>  &lt;android.support.design.widget.TextInputLayout\n                android:layout_marginTop=\"10dp\"\n                style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginBottom=\"8dp\"\n                android:minWidth=\"400dp\"&gt;\n            &lt;android.support.design.widget.TextInputEditText\n                    android:id=\"@+id/editTitle\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"wrap_content\"\n                    android:hint=\"@string/hint_title_required\"/&gt;\n        &lt;/android.support.design.widget.TextInputLayout&gt;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4765908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LrebK.jpg?s=128&g=1", "display_name": "Abayomi Akanji", "link": "https://stackoverflow.com/users/4765908/abayomi-akanji"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1557847638, "accepted_answer_id": 56133655, "answer_count": 1, "score": 0, "last_activity_date": 1557852094, "creation_date": 1557846506, "last_edit_date": 1557846689, "question_id": 56133573, "link": "https://stackoverflow.com/questions/56133573/custom-edittext", "closed_reason": "Duplicate", "title": "Custom EditText", "body": "<p>Is there any library or a means to implement this custom <code>editText</code>?<a href=\"https://i.stack.imgur.com/u9Qhm.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u9Qhm.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>This is what was achieved by wrapping a custom layout around the <code>editText</code> which is inside a <code>textInputLayout</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/lyLaO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lyLaO.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "android-adapter", "android-recyclerview"], "comments": [{"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1557846434, "post_id": 56133505, "comment_id": 98898090, "body": "From the code you posted it is not clear what <code>timetableAdapter</code> is. Post some more code to let us understand how and when it is created."}, {"owner": {"reputation": 85, "user_id": 5222859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zb6rd.jpg?s=128&g=1", "display_name": "Roger Nkosi", "link": "https://stackoverflow.com/users/5222859/roger-nkosi"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1557847048, "post_id": 56133505, "comment_id": 98898419, "body": "@gpunto please see edited."}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1557853419, "post_id": 56133505, "comment_id": 98901641, "body": "Where is <code>timetableAdapter</code> assigned? It is not in the code you posted"}, {"owner": {"reputation": 85, "user_id": 5222859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zb6rd.jpg?s=128&g=1", "display_name": "Roger Nkosi", "link": "https://stackoverflow.com/users/5222859/roger-nkosi"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1557904102, "post_id": 56133505, "comment_id": 98916991, "body": "@gpunto here     adapter = timetableAdapter"}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1557911007, "post_id": 56133505, "comment_id": 98920647, "body": "I meant where is <code>timetableAdapter = ...</code>? From the pieces of code you posted the flow is not clear. Can you post the activity/fragment where you are using <code>timetableAdapter</code>? The one that contains <code>timetableRecyclerView?.apply</code>"}, {"owner": {"reputation": 85, "user_id": 5222859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zb6rd.jpg?s=128&g=1", "display_name": "Roger Nkosi", "link": "https://stackoverflow.com/users/5222859/roger-nkosi"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1557919239, "post_id": 56133505, "comment_id": 98925564, "body": "here timetableAdapter = TimetableAdapter(timetableList, this)"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1557921629, "post_id": 56133505, "comment_id": 98926969, "body": "<a href=\"https://stackoverflow.com/questions/29141729/recyclerview-no-adapter-attached-skipping-layout\" title=\"recyclerview no adapter attached skipping layout\">stackoverflow.com/questions/29141729/&hellip;</a>"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 1, "creation_date": 1557922222, "post_id": 56133505, "comment_id": 98927353, "body": "Did you debug the application? Are <code>timetableRecyclerView</code> and <code>timetableAdapter</code> not null and adapter contains items?"}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "edited": false, "score": 1, "creation_date": 1557926641, "post_id": 56133505, "comment_id": 98930238, "body": "Are you sure that <code>timetableRecyclerView</code> is not null when you call <code>apply</code>?"}, {"owner": {"reputation": 85, "user_id": 5222859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zb6rd.jpg?s=128&g=1", "display_name": "Roger Nkosi", "link": "https://stackoverflow.com/users/5222859/roger-nkosi"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1557998897, "post_id": 56133505, "comment_id": 98957474, "body": "Hi @CoolMind the recyclerview was null as i was trying to use butterknife"}, {"owner": {"reputation": 85, "user_id": 5222859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zb6rd.jpg?s=128&g=1", "display_name": "Roger Nkosi", "link": "https://stackoverflow.com/users/5222859/roger-nkosi"}, "reply_to_user": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "edited": false, "score": 0, "creation_date": 1557998917, "post_id": 56133505, "comment_id": 98957493, "body": "Hi @lelloman the recyclerview was null as i was trying to use butterknife"}], "answers": [{"comments": [{"owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 1, "creation_date": 1557999478, "post_id": 56165214, "comment_id": 98957885, "body": "Stop using ButterKnife and use synthetic view imports <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/tutorials/android-plugin.html</a>"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "reply_to_user": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1558003342, "post_id": 56165214, "comment_id": 98959983, "body": "@ZUNJAE, agree."}], "tags": [], "owner": {"reputation": 85, "user_id": 5222859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zb6rd.jpg?s=128&g=1", "display_name": "Roger Nkosi", "link": "https://stackoverflow.com/users/5222859/roger-nkosi"}, "is_accepted": false, "score": 0, "last_activity_date": 1557998760, "creation_date": 1557998760, "answer_id": 56165214, "question_id": 56133505, "link": "https://stackoverflow.com/questions/56133505/kotlin-no-adapter-attached-skipping-layout/56165214#56165214", "title": "Kotlin: No adapter attached; skipping layout", "body": "<p>the Recyclerview was null because I was trying to use Butterknife, I have been doing Kotlin for a week now and it has not been easy. </p>\n"}], "owner": {"reputation": 85, "user_id": 5222859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zb6rd.jpg?s=128&g=1", "display_name": "Roger Nkosi", "link": "https://stackoverflow.com/users/5222859/roger-nkosi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557998760, "creation_date": 1557846274, "last_edit_date": 1557918244, "question_id": 56133505, "link": "https://stackoverflow.com/questions/56133505/kotlin-no-adapter-attached-skipping-layout", "title": "Kotlin: No adapter attached; skipping layout", "body": "<p>I have a recycler view and a custom adapter, I have the adapter attached but I get \"No adapter attached; skipping layout\"</p>\n\n<pre><code>    timetableRecyclerView?.apply {\n    layoutManager = LinearLayoutManager(getContext(), RecyclerView.VERTICAL, false)\n    // set the custom adapter to the RecyclerView\n    adapter = timetableAdapter\n    }\n</code></pre>\n\n<p>And here is my Time table adapter, I call the populate method on a call back on my activity which populates the data          </p>\n\n<pre><code> fun populate(timetable: Timetable) {\n        timetableList.add(timetable)\n        notifyDataSetChanged()\n    }\n\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        val row = LayoutInflater.from(parent.context).inflate(R.layout.timetable_row, parent, false)\n        return ViewHolder(row)\n    }\n\n    override fun onBindViewHolder(viewHolder: ViewHolder, position: Int) {\n        val (type, status, departure, arrival, airline, flight) = timetableList[position]\n\n\n\n        viewHolder.airline!!.text = airline.name\n\n        viewHolder.flightNumber!!.setText(flight.number)\n        viewHolder.status!!.text = status\n\n        when (status) {\n            \"active\" -&gt; {\n                viewHolder.status!!.text = StringUtils.capitalize(status)\n                viewHolder.flightDepartureStatus!!.setImageResource(R.drawable.green_dot)\n                return\n            }\n            \"landed\" -&gt; {\n                viewHolder.status!!.text = StringUtils.capitalize(status)\n                viewHolder.flightDepartureStatus!!.setImageResource(R.drawable.red_dot)\n                return\n            }\n            else -&gt; {\n                viewHolder.status!!.text = StringUtils.capitalize(status)\n                viewHolder.flightDepartureStatus!!.setImageResource(R.drawable.red_dot)\n                return\n            }\n        }\n\n    }\n       override fun getItemCount(): Int {\n        return timetableList.size\n    }\n\n\n  }\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "kotlin-interop", "kotlin-java-interop"], "comments": [{"owner": {"reputation": 2904, "user_id": 1159507, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e23948e15e918c710ec34483c65d1b93?s=128&d=identicon&r=PG", "display_name": "anber", "link": "https://stackoverflow.com/users/1159507/anber"}, "edited": false, "score": 1, "creation_date": 1557844140, "post_id": 56132749, "comment_id": 98896536, "body": "Look at <a href=\"https://stackoverflow.com/a/39806722/1159507\">stackoverflow.com/a/39806722/1159507</a>"}, {"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1557844491, "post_id": 56132749, "comment_id": 98896791, "body": "In general, on the JVM -- which both Java and Kotlin use -- you can&#39;t really detect anything about who is calling your method."}, {"owner": {"reputation": 3767, "user_id": 3109189, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/s3aPL.jpg?s=128&g=1", "display_name": "PLNech", "link": "https://stackoverflow.com/users/3109189/plnech"}, "reply_to_user": {"reputation": 2904, "user_id": 1159507, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e23948e15e918c710ec34483c65d1b93?s=128&d=identicon&r=PG", "display_name": "anber", "link": "https://stackoverflow.com/users/1159507/anber"}, "edited": false, "score": 0, "creation_date": 1557846930, "post_id": 56132749, "comment_id": 98898360, "body": "@anber: thanks, but this is about inspecting a given class to know if it is in Kotlin; I don&#39;t think having my library trigger reflection calls on each callers would be a good approach. Isn&#39;t there any metadata that I can find in the JVM context?"}, {"owner": {"reputation": 2904, "user_id": 1159507, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e23948e15e918c710ec34483c65d1b93?s=128&d=identicon&r=PG", "display_name": "anber", "link": "https://stackoverflow.com/users/1159507/anber"}, "edited": false, "score": 1, "creation_date": 1557899482, "post_id": 56132749, "comment_id": 98914964, "body": "I believe you can try to execute <code>Class.forName( &quot;kotlin.Metadata&quot; );</code> if it works than its Kotlin, if it failed with <code>ClassNotFoundException</code> than its Java"}], "answers": [{"tags": [], "owner": {"reputation": 585, "user_id": 8894193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agc2O.jpg?s=128&g=1", "display_name": "Said", "link": "https://stackoverflow.com/users/8894193/said"}, "is_accepted": false, "score": 1, "last_activity_date": 1557844067, "creation_date": 1557844067, "answer_id": 56132793, "question_id": 56132749, "link": "https://stackoverflow.com/questions/56132749/can-i-know-when-my-library-is-called-from-java-or-kotlin/56132793#56132793", "title": "Can I know when my library is called from Java or Kotlin?", "body": "<p>Short answer: NO.</p>\n\n<p>When your code is running, it's compiled in Java bytcode in both cases.</p>\n"}], "owner": {"reputation": 3767, "user_id": 3109189, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/s3aPL.jpg?s=128&g=1", "display_name": "PLNech", "link": "https://stackoverflow.com/users/3109189/plnech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "closed_date": 1557844188, "answer_count": 1, "score": 1, "last_activity_date": 1557846861, "creation_date": 1557843930, "last_edit_date": 1557846861, "question_id": 56132749, "link": "https://stackoverflow.com/questions/56132749/can-i-know-when-my-library-is-called-from-java-or-kotlin", "closed_reason": "Duplicate", "title": "Can I know when my library is called from Java or Kotlin?", "body": "<p>I'm developing a Kotlin library for Android. \nI want to provide a great developer experience for both Kotlin and Java developers, but because I don't have infinite resources I need to prioritize between those. </p>\n\n<p>The library is interacting with a server I control, so I can add metadata to network calls that would help me know the split of my users.<br>\n<strong>But is there a way I can know when my library is called from Java VS Kotlin?</strong></p>\n\n<p>I see in <a href=\"https://stackoverflow.com/a/39806722/1159507\">this answer</a> that there might be a way to inspect a given class, but as the library owner I don't think I can know which class is calling my own without using reflection which would add some runtime cost. Isn't there a way to get at runtime metadata from the JVM, that would indicate if the code was compiled from Kotlin (even at the cost of false-negatives, e.g. checking if <code>KAPT</code> was used at any point which would at least report some Kotlin users?)</p>\n"}, {"tags": ["android", "security", "kotlin", "android-keystore"], "comments": [{"owner": {"reputation": 562, "user_id": 2077582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7696f4e5f954935321518327f95306d1?s=128&d=identicon&r=PG", "display_name": "RCB", "link": "https://stackoverflow.com/users/2077582/rcb"}, "edited": false, "score": 0, "creation_date": 1617418259, "post_id": 56132679, "comment_id": 118304095, "body": "Did you ever figure out the answer to your problem? I&#39;m dealing with something similar to this now."}, {"owner": {"reputation": 620, "user_id": 3906919, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/611290901/picture?type=large", "display_name": "Mikkel Larsen", "link": "https://stackoverflow.com/users/3906919/mikkel-larsen"}, "reply_to_user": {"reputation": 562, "user_id": 2077582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7696f4e5f954935321518327f95306d1?s=128&d=identicon&r=PG", "display_name": "RCB", "link": "https://stackoverflow.com/users/2077582/rcb"}, "edited": false, "score": 0, "creation_date": 1617689447, "post_id": 56132679, "comment_id": 118366307, "body": "I did yes, but I figured it out my self. But it&#39;s so long ago and I&#39;m not working at that company anymore, so I can&#39;t remember how I solved it, sorry."}], "owner": {"reputation": 620, "user_id": 3906919, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/611290901/picture?type=large", "display_name": "Mikkel Larsen", "link": "https://stackoverflow.com/users/3906919/mikkel-larsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1498, "favorite_count": 3, "answer_count": 0, "score": 4, "last_activity_date": 1557843726, "creation_date": 1557843726, "question_id": 56132679, "link": "https://stackoverflow.com/questions/56132679/android-keystore-in-kotlin", "title": "Android Keystore in kotlin", "body": "<p>I'm working on an app that needs to be quite secure, so we want to use the Android Keystore to help make certain things, like accessTokens to the backend, safer and more secure.</p>\n\n<p>I've tried implementing some of it, and it seems like it works, but I worked mainly off of examples, primarily <a href=\"https://stackoverflow.com/questions/32298956/securely-storing-keys-in-android-keystore\">Securely Storing Keys in Android Keystore</a></p>\n\n<p>Here is some of my code: </p>\n\n<pre><code>object AndroidKeyStore {\nconst val ANDROID_KEY_STORE = \"AndroidKeyStore\"\nconst val AES_MODE = \"AES/GCM/NoPadding\"\nprivate var iv: ByteArray = byteArrayOf(55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44)\n\n//IS IT SAFE TO HAVE THIS HERE?\nconst val SECRET_ALIAS = \"TEST\"\n\nprivate fun generateSecretKey(keyAlias: String): SecretKey {\n    val keyGenerator = KeyGenerator.getInstance(KeyProperties.KEY_ALGORITHM_AES, ANDROID_KEY_STORE)\n    val spec = KeyGenParameterSpec.Builder(keyAlias, KeyProperties.PURPOSE_ENCRYPT or KeyProperties.PURPOSE_DECRYPT)\n            .setBlockModes(KeyProperties.BLOCK_MODE_GCM)\n            .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_NONE)\n            .setRandomizedEncryptionRequired(false)\n            .build()\n\n    keyGenerator.init(spec)\n    return keyGenerator.generateKey()\n}\n\nprivate fun getSecretKey(keyAlias: String): SecretKey {\n    val keyStore = KeyStore.getInstance(ANDROID_KEY_STORE).apply { load(null) }\n    if (keyStore.getEntry(keyAlias, null) != null) {\n        val secretKeyEntry = keyStore.getEntry(keyAlias, null) as KeyStore.SecretKeyEntry\n        return secretKeyEntry.secretKey ?: generateSecretKey(keyAlias)\n    }\n    return generateSecretKey(keyAlias)\n}\n\nfun encrypt(data: String): String {\n    val cipher = Cipher.getInstance(AES_MODE)\n    cipher.init(Cipher.ENCRYPT_MODE, getSecretKey(SECRET_ALIAS), GCMParameterSpec(128, iv))\n    iv = cipher.iv\n    val encodedBytes = cipher.doFinal(data.toByteArray())\n    return Base64.encodeToString(encodedBytes, Base64.NO_WRAP)\n}\n\nfun decrypt(encrypted: String): String {\n    val cipher = Cipher.getInstance(AES_MODE)\n    val spec = GCMParameterSpec(128, iv)\n    cipher.init(Cipher.DECRYPT_MODE, getSecretKey(SECRET_ALIAS), spec)\n    val encodedBytes = Base64.decode(encrypted, Base64.NO_WRAP)\n    val decoded = cipher.doFinal(encodedBytes)\n    return String(decoded, Charsets.UTF_8)\n}\n</code></pre>\n\n<p>}</p>\n\n<p>This is my keystore code, that seems like it encrypts/decrypts stuff okay. But I have a hard time understanding exactly what the Secret alias is and where to put it, safely.</p>\n\n<p>At the same time, I'm also using a secure preference store. So my idea was, to keep the accessToken in the secure preference store, but encrypt it with this keystore code.</p>\n\n<p>Here is the code for the Secure pref store.</p>\n\n<pre><code>object SecurePreferenceUtils {\n\nenum class SecurePreferenceKeys {\n    AccessToken, Test\n}\n\nfun putString(key: SecurePreferenceKeys, value: String) {\n    SecurePrefs.securePreferences.edit().putString(key.name, value).commit()\n}\n\nfun getString(key: SecurePreferenceKeys, defaultValue: String): String {\n    return SecurePrefs.securePreferences.getString(key.name, defaultValue) ?: \"\"\n}\n\nobject SecurePrefs {\nlateinit var securePreferences: SecurePreferences\n}\n</code></pre>\n\n<p>In the end, I would like to be able to do like this when I get the accessToken from the backend.</p>\n\n<pre><code>SecurePreferenceUtils.putString(SecurePreferenceUtils.SecurePreferenceKeys.AccessToken, AndroidKeyStore.encrypt(\"\"))\n\nval token = AndroidKeyStore.decrypt(SecurePreferenceUtils.getString(SecurePreferenceUtils.SecurePreferenceKeys.AccessToken, AndroidKeyStore.encrypt(\"\")))\n</code></pre>\n\n<p>Hopefully I make some sort of sense on where I want to go, I'm just not quite sure I'm on the right path here.</p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["android", "gradle", "kotlin", "annotation-processing", "kapt"], "comments": [{"owner": {"reputation": 1796, "user_id": 5788247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tU3fL.jpg?s=128&g=1", "display_name": "Shomu", "link": "https://stackoverflow.com/users/5788247/shomu"}, "edited": false, "score": 0, "creation_date": 1582009980, "post_id": 56132463, "comment_id": 106618236, "body": "<a href=\"https://stackoverflow.com/a/60275454/5788247\">I have to try this.</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1598, "user_id": 973379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000215477293/picture?type=large", "display_name": "Piotr Zawadzki", "link": "https://stackoverflow.com/users/973379/piotr-zawadzki"}, "is_accepted": false, "score": 9, "last_activity_date": 1557897459, "last_edit_date": 1557897459, "creation_date": 1557896641, "answer_id": 56142060, "question_id": 56132463, "link": "https://stackoverflow.com/questions/56132463/checking-if-kapt-uses-incremental-annotation-processing/56142060#56142060", "title": "Checking if kapt uses incremental annotation processing", "body": "<p>I was able to determine that by adding</p>\n\n<pre><code>kapt.verbose=true\n</code></pre>\n\n<p>in <code>gradle.properties</code> in root project.\nThis leads to the following being printed in the console when e.g. changing public methods:</p>\n\n<pre><code>Javac options: {}\n[incremental apt] Changed files: [/Users/me/workspace/my-project/core/common/build/tmp/kapt3/stubs/foo/bar/ChangedClassName.java]\n...\n[INFO] Need to discovery annotation processors in the AP classpath\n[INFO] Annotation processors: toothpick.compiler.factory.FactoryProcessor, toothpick.compiler.memberinjector.MemberInjectorProcessor\n[INFO] Processing java sources with annotation processors: /Users/me/workspace/my-project/core/common/build/tmp/kapt3/stubs/foo/bar/ChangedClassName.java\n[INFO] Annotation processing complete, errors: 0, warnings: 0\n[INFO] Annotation processor stats:\n[INFO] IncrementalProcessor: total: 61 ms, init: 1 ms, 3 round(s): 59 ms, 0 ms, 1 ms\n[INFO] IncrementalProcessor: total: 1 ms, init: 1 ms, 3 round(s): 0 ms, 0 ms, 0 ms\n</code></pre>\n\n<p>This is when incremental annotation processing was used.\nWhen doing a clean build this prints:</p>\n\n<pre><code>Javac options: {}\n[incremental apt] Changed files: []\n...\n[INFO] Need to discovery annotation processors in the AP classpath\n[INFO] Annotation processors: toothpick.compiler.factory.FactoryProcessor, toothpick.compiler.memberinjector.MemberInjectorProcessor\n[INFO] Processing java sources with annotation processors: [ALL THE  FILES IN THE MODULE ARE LISTED HERE]\n[INFO] Annotation processing complete, errors: 0, warnings: 0\n[INFO] Annotation processor stats:\n[INFO] IncrementalProcessor: total: 124 ms, init: 1 ms, 3 round(s): 122 ms, 1 ms, 0 ms\n[INFO] IncrementalProcessor: total: 1 ms, init: 0 ms, 3 round(s): 1 ms, 0 ms, 0 ms\n</code></pre>\n\n<p>Toothpick is a DI framework I'm using, which since 2.x supports incremental annotation processing.</p>\n\n<p>If there's an annotation processor which is not incremental this also prints e.g.:</p>\n\n<pre><code>[INFO] Incremental KAPT support is disabled. Processors that are not incremental: butterknife.compiler.ButterKnifeProcessor.\n</code></pre>\n"}], "owner": {"reputation": 1598, "user_id": 973379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000215477293/picture?type=large", "display_name": "Piotr Zawadzki", "link": "https://stackoverflow.com/users/973379/piotr-zawadzki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5976, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1565521427, "creation_date": 1557843080, "last_edit_date": 1565521427, "question_id": 56132463, "link": "https://stackoverflow.com/questions/56132463/checking-if-kapt-uses-incremental-annotation-processing", "title": "Checking if kapt uses incremental annotation processing", "body": "<p>In Kotlin 1.3.30 support for incremental annotation processing was added: <a href=\"https://blog.jetbrains.com/kotlin/2019/04/kotlin-1-3-30-released/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/kotlin/2019/04/kotlin-1-3-30-released/</a>\nAccording to the doc:</p>\n\n<blockquote>\n  <p>Note that in the current implementation, using any non-incremental\n  annotation processor or a change in dependency\u2019s ABI (so far,\n  including modifying internal declarations) will lead to\n  non-incremental annotation processing for a given module.</p>\n</blockquote>\n\n<p>I have a multi-module project with multiple annotation processors. Only some of them are incremental. There are modules which use only incremental annotation processors to the best of my knowledge at least.</p>\n\n<p>My question is:\nIs there a way to check if incremental annotation processing happened? E.g. are there any specific console logs in Gradle which indicate that? I would like to confirm that incremental annotation processing was in fact used.</p>\n"}, {"tags": ["android", "kotlin", "android-notifications"], "answers": [{"comments": [{"owner": {"reputation": 2753, "user_id": 10878733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pwhdv.jpg?s=128&g=1", "display_name": "Shubham Panchal", "link": "https://stackoverflow.com/users/10878733/shubham-panchal"}, "edited": false, "score": 0, "creation_date": 1557849441, "post_id": 56132505, "comment_id": 98899762, "body": "Thanks @ismail alaoui for the answer."}], "tags": [], "owner": {"reputation": 4910, "user_id": 4896784, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7D2Mdu6NAdk/AAAAAAAAAAI/AAAAAAAAAQg/OgEfBdpBgXg/photo.jpg?sz=128", "display_name": "ismail alaoui", "link": "https://stackoverflow.com/users/4896784/ismail-alaoui"}, "is_accepted": true, "score": 1, "last_activity_date": 1557843211, "creation_date": 1557843211, "answer_id": 56132505, "question_id": 56132227, "link": "https://stackoverflow.com/questions/56132227/modify-sound-of-incoming-notification-in-android/56132505#56132505", "title": "Modify sound of incoming Notification in Android", "body": "<pre><code>if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O)\n{\n  if (soundUri != null)\n  {\n    // Changing Default mode of notification\n    notificationBuilder.setDefaults(Notification.DEFAULT_VIBRATE)\n    // Creating an Audio Attribute\n    val audioAttributes = AudioAttributes.Builder()\n    .setContentType(AudioAttributes.CONTENT_TYPE_SONIFICATION)\n    .setUsage(AudioAttributes.USAGE_ALARM)\n    .build()\n    // Creating Channel\n    val notificationChannel = NotificationChannel(\"CH_ID\", \"Testing_Audio\", NotificationManager.IMPORTANCE_HIGH)\n    notificationChannel.setSound(soundUri, audioAttributes)\n    mNotificationManager.createNotificationChannel(notificationChannel)\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2753, "user_id": 10878733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pwhdv.jpg?s=128&g=1", "display_name": "Shubham Panchal", "link": "https://stackoverflow.com/users/10878733/shubham-panchal"}, "edited": false, "score": 0, "creation_date": 1557849247, "post_id": 56132818, "comment_id": 98899658, "body": "Thanks @r2rek. By the way I am testing it with Android Oreo 8.1"}], "tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": false, "score": 1, "last_activity_date": 1557844167, "creation_date": 1557844167, "answer_id": 56132818, "question_id": 56132227, "link": "https://stackoverflow.com/questions/56132227/modify-sound-of-incoming-notification-in-android/56132818#56132818", "title": "Modify sound of incoming Notification in Android", "body": "<p>To add some context to ismail alaoui's answer - what you did should probably work for pre-Oreo android devices, but for Oreo and above, you need to create a notification channel, to which the custom sound will be assigned. Refer to <a href=\"https://developer.android.com/guide/topics/ui/notifiers/notifications\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/ui/notifiers/notifications</a>.</p>\n\n<p>Please also remember, that user might change the sound of the notification channel at any moment :)</p>\n\n<p>So only question remaining - which Android version are you testing your solution on?</p>\n"}], "owner": {"reputation": 2753, "user_id": 10878733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pwhdv.jpg?s=128&g=1", "display_name": "Shubham Panchal", "link": "https://stackoverflow.com/users/10878733/shubham-panchal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 56132505, "answer_count": 2, "score": 0, "last_activity_date": 1557844167, "creation_date": 1557842318, "question_id": 56132227, "link": "https://stackoverflow.com/questions/56132227/modify-sound-of-incoming-notification-in-android", "title": "Modify sound of incoming Notification in Android", "body": "<p>I have set up a <code>NotificationListenerService</code> which listens for notifications. I need to modify the sound/alert tone of the notifications which is caught in the method below :</p>\n\n<pre><code>override fun onNotificationPosted(sbn: StatusBarNotification?) {\n    super.onNotificationPosted(sbn)\n    // Modify the tone here and notify ( the notification ) it again\n}\n</code></pre>\n\n<p>What I have tried so far ( does not play the sound ):</p>\n\n<pre><code>notification.notification.defaults = android.app.Notification.DEFAULT_VIBRATE\nnotification.notification.sound = Uri.parse(sharedPreferences.getString(getString( R.string.ringtone_key ) , Settings.System.DEFAULT_NOTIFICATION_URI.toString() ))\nmanager.notify( RECREATE_NOTIFICATION_ID , notification.notification )\n</code></pre>\n\n<p>My question goes here:</p>\n\n<blockquote>\n  <p>How can I modify the sound/alert tone of the <code>StatusBarNotification</code> caught in the above method and display it to the user? Do I need to repost/recreate it again?</p>\n</blockquote>\n"}, {"tags": ["android", "kotlin", "android-preferences"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11256065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d492e7350185dbc62d8814958ce9216?s=128&d=identicon&r=PG&f=1", "display_name": "TechPro", "link": "https://stackoverflow.com/users/11256065/techpro"}, "edited": false, "score": 0, "creation_date": 1558357774, "post_id": 56138886, "comment_id": 99063765, "body": "Thanks, it helped :)"}], "tags": [], "owner": {"reputation": 414, "user_id": 10776164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2eb84a806a62335ec24b843070ecced?s=128&d=identicon&r=PG&f=1", "display_name": "Louis", "link": "https://stackoverflow.com/users/10776164/louis"}, "is_accepted": true, "score": 0, "last_activity_date": 1557869438, "creation_date": 1557869438, "answer_id": 56138886, "question_id": 56132163, "link": "https://stackoverflow.com/questions/56132163/how-to-remove-default-title-and-summery-from-preference-layout/56138886#56138886", "title": "How to remove default title and summery from preference layout", "body": "<p>You need to set the <code>layoutResource</code> not the <code>widgetLayoutResource</code> - the widget layout resource is the part of the preference layout that contains a widget at the end, such as a switch or checkbox. In your case you want to replace the <em>entire</em> layout, so you need to change the layoutResource. I think just renaming <code>widgetLayoutResource</code> to <code>layoutResource</code> should work here.</p>\n"}], "owner": {"reputation": 3, "user_id": 11256065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d492e7350185dbc62d8814958ce9216?s=128&d=identicon&r=PG&f=1", "display_name": "TechPro", "link": "https://stackoverflow.com/users/11256065/techpro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 56138886, "answer_count": 1, "score": 0, "last_activity_date": 1557869438, "creation_date": 1557842108, "question_id": 56132163, "link": "https://stackoverflow.com/questions/56132163/how-to-remove-default-title-and-summery-from-preference-layout", "title": "How to remove default title and summery from preference layout", "body": "<p>I'm trying to create a custom preference settings (which will contain a title, summary and a progress bar which will indicate to user the syncing process).\nI have a problem to remove completely the original title and summery because it looks like there is indent in the layout (see attached picture for more details)  </p>\n\n<p>I have created a custom layout: </p>\n\n<p><strong>R.layout.manual_sync_layout</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:clickable=\"true\"\n        android:focusable=\"true\"\n        android:id=\"@+id/manual_sync_layout\"\n        android:background=\"?attr/selectableItemBackground\"&gt;\n\n\n    &lt;ImageView\n            android:id=\"@android:id/icon\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            android:visibility=\"gone\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:contentDescription=\"@null\"\n            android:layout_gravity=\"center\"/&gt;\n\n    &lt;TextView android:id=\"@android:id/title\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"wrap_content\"\n              app:layout_constraintStart_toStartOf=\"parent\"\n              app:layout_constraintTop_toTopOf=\"parent\"\n              android:textSize=\"16sp\"\n              android:padding=\"10dp\"\n              android:text=\"@string/manual_sync\"\n              android:textColor=\"@android:color/black\"/&gt;\n    &lt;TextView\n            app:layout_constraintTop_toBottomOf=\"@android:id/title\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            android:id=\"@android:id/summary\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_below=\"@android:id/title\"\n            android:layout_alignStart=\"@android:id/title\"\n            android:textAppearance=\"?android:attr/textAppearanceSmall\"\n            android:textColor=\"?android:attr/textColorSecondary\"\n            android:maxLines=\"4\"\n            android:paddingTop=\"5dp\"\n            android:paddingBottom=\"5dp\"\n            android:paddingLeft=\"10dp\"\n            android:paddingRight=\"10dp\"\n            android:text=\"@string/sync_manually_desc\"\n    /&gt;\n\n    &lt;ProgressBar\n            android:id=\"@+id/manual_sync_progress\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"0dp\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            android:indeterminate=\"false\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            style=\"?android:attr/progressBarStyleSmall\"\n            android:padding=\"10dp\"\n            android:visibility=\"gone\"/&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong>ManualSyncPreference</strong></p>\n\n<p>class ManualSyncPreference @JvmOverloads constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int = 0) :\n    Preference(context, attrs, defStyleAttr) {</p>\n\n<pre><code>init {\n    widgetLayoutResource = R.layout.manual_sync_layout\n}\n\noverride fun onBindViewHolder(holder: PreferenceViewHolder) {\n    super.onBindViewHolder(holder)\n    val manualSyncLayout = holder.findViewById(R.id.manual_sync_layout)\n    val syncProgress = holder.findViewById(R.id.manual_sync_progress)\n    manualSyncLayout.setOnClickListener {\n        syncProgress.visibility = if(syncProgress.visibility== View.VISIBLE) View.GONE else View.VISIBLE\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>preferences.xml</strong></p>\n\n<pre><code>&lt;PreferenceCategory\n        app:title=\"@string/sync_header\"&gt;\n\n    &lt;SwitchPreferenceCompat\n            app:key=\"sync\"\n            app:title=\"@string/sync_title\"/&gt;\n\n    &lt;SwitchPreferenceCompat\n            app:key=\"attachment\"\n            app:title=\"@string/attachment_title\"\n            app:summaryOn=\"@string/attachment_summary_on\"\n            app:summaryOff=\"@string/attachment_summary_off\"\n            app:dependency=\"sync\"/&gt;\n\n    &lt;com.example.myapplication.ManualSyncPreference\n            app:key=\"manual_key\"\n            app:title=\"\"\n            app:summary=\"\"/&gt;\n\n&lt;/PreferenceCategory&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/AqyKx.jpg\" rel=\"nofollow noreferrer\">there is a big margin in the last row</a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 581, "user_id": 9177766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVFHjniLCfo/AAAAAAAAAAI/AAAAAAAAADQ/krDE-b5fbKA/photo.jpg?sz=128", "display_name": "Romain Goutte-Fangeas", "link": "https://stackoverflow.com/users/9177766/romain-goutte-fangeas"}, "edited": false, "score": 0, "creation_date": 1557843216, "post_id": 56132138, "comment_id": 98895931, "body": "Every iteration you expose work as expected in my machine, what&#39;s the behavior of your callBgaEndpoint(bgaRequest) method ?"}, {"owner": {"reputation": 25736, "user_id": 6395627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dac5493d339ba8cb379f4efb2485d65?s=128&d=identicon&r=PG&f=1", "display_name": "Slaw", "link": "https://stackoverflow.com/users/6395627/slaw"}, "edited": false, "score": 2, "creation_date": 1557843802, "post_id": 56132138, "comment_id": 98896303, "body": "Nothing is obviously wrong with the code you&#39;ve shown us. If you&#39;re having issues, please <a href=\"https://stackoverflow.com/posts/56132138/edit\">edit</a> your question to add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 111, "user_id": 2747058, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/377c02f747757f7e54b8f54fed0ae59a?s=128&d=identicon&r=PG&f=1", "display_name": "user2747058", "link": "https://stackoverflow.com/users/2747058/user2747058"}, "reply_to_user": {"reputation": 581, "user_id": 9177766, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVFHjniLCfo/AAAAAAAAAAI/AAAAAAAAADQ/krDE-b5fbKA/photo.jpg?sz=128", "display_name": "Romain Goutte-Fangeas", "link": "https://stackoverflow.com/users/9177766/romain-goutte-fangeas"}, "edited": false, "score": 1, "creation_date": 1557844475, "post_id": 56132138, "comment_id": 98896780, "body": "Ok, I narrowed it down. For some reason Jackson is having trouble and each element in the list is actually a LinkedHashMap. I can probably fix it, Romain was right it was a problem with callBgaEndpoint. @RomainGoutte-Fangeas"}], "owner": {"reputation": 111, "user_id": 2747058, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/377c02f747757f7e54b8f54fed0ae59a?s=128&d=identicon&r=PG&f=1", "display_name": "user2747058", "link": "https://stackoverflow.com/users/2747058/user2747058"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557842039, "creation_date": 1557842039, "question_id": 56132138, "link": "https://stackoverflow.com/questions/56132138/iterate-list-of-data-classes-not-working-as-expected", "title": "iterate list of data classes not working as expected", "body": "<p>I have a list of data classes that I am trying to iterate over. \nHere is the data class and where it is created.</p>\n\n<pre><code>data class BgaResponse(val columnName: String, val restricted: Boolean, val predictionValue: Double)\n\nval bgaResponse: List&lt;BgaResponse&gt;? = callBgaEndpoint(bgaRequest)\n</code></pre>\n\n<p>printing bgaResponseshows this:</p>\n\n<pre><code>[{columnName=col1, restricted=false, predictionValue=0.9963}, {columnName=not_here, restricted=false, predictionValue=0.995941}]\n</code></pre>\n\n<p>I first tried using forEach:</p>\n\n<pre><code>bgaResponse?.forEach {\n            println(it)\n        }\n</code></pre>\n\n<p>this prints nothing. Next i tried accessing each element by index:</p>\n\n<pre><code>for(i in 0 until bgaResponse!!.size) {\n            println(bgaResponse[i])\n        }\n</code></pre>\n\n<p>this prints each element as expected:</p>\n\n<pre><code>{columnName=col1, restricted=false, predictionValue=0.9963}\n{columnName=not_here, restricted=false, predictionValue=0.995941}\n</code></pre>\n\n<p>I tried printing <code>bgaResponse[i].columnName</code> but nothing prints again. Now this isnt making any sense. </p>\n\n<p>Lastly I try:</p>\n\n<pre><code>for(i in 0 until bgaResponse!!.size) {\n            val x: BgaResponse= bgaResponse[i]\n        }\n</code></pre>\n\n<p>this should work, my IDE is telling me bgaResponse[i] is a BgaResponse. This throws back an error:</p>\n\n<p><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.package.something.placeholder.model.BgaResponse\n</code></p>\n"}, {"tags": ["android", "kotlin", "this"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 3, "creation_date": 1557840979, "post_id": 56131683, "comment_id": 98894544, "body": "Pretty much same as <code>MainActivity.this</code> in Java"}], "answers": [{"tags": [], "owner": {"reputation": 18780, "user_id": 5966775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d03a5259f8169269385188f7c5fb8ed?s=128&d=identicon&r=PG", "display_name": "DVarga", "link": "https://stackoverflow.com/users/5966775/dvarga"}, "is_accepted": true, "score": 12, "last_activity_date": 1557840892, "last_edit_date": 1557840892, "creation_date": 1557840716, "answer_id": 56131732, "question_id": 56131683, "link": "https://stackoverflow.com/questions/56131683/what-does-the-thisclassname-mean-in-kotlin/56131732#56131732", "title": "What does the `this@classname` mean in Kotlin?", "body": "<p>This is a <a href=\"https://kotlinlang.org/docs/reference/this-expressions.html\" rel=\"noreferrer\">qualified <code>this</code></a>. You can access <code>this</code> from an outer scope.</p>\n\n<p>As <code>this</code> can mean different things (part the referenced page):</p>\n\n<blockquote>\n  <p>To denote the current receiver, we use this expressions:</p>\n  \n  <ul>\n  <li>In a member of a class, this refers to the current object of that class.</li>\n  <li>In an extension function or a function literal with receiver this denotes the receiver parameter that is passed on the left-hand side of\n  a dot.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 858, "user_id": 10920285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fm2BK.jpg?s=128&g=1", "display_name": "Li Jin", "link": "https://stackoverflow.com/users/10920285/li-jin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1414, "favorite_count": 0, "accepted_answer_id": 56131732, "answer_count": 1, "score": 5, "last_activity_date": 1614503208, "creation_date": 1557840578, "last_edit_date": 1557848046, "question_id": 56131683, "link": "https://stackoverflow.com/questions/56131683/what-does-the-thisclassname-mean-in-kotlin", "title": "What does the `this@classname` mean in Kotlin?", "body": "<p>I am making a custom view for Android.\nI am going to clone the layout by calling clone (<code>this</code>), but it shows error, when I use clone (<code>this@mycustomclassname</code>), it works.</p>\n\n<p>It's still confused. Anyone knows the meaning of <code>this@classname</code> in kotlin?</p>\n"}, {"tags": ["kotlin", "floating-point"], "comments": [{"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 1, "creation_date": 1557847472, "post_id": 56130893, "comment_id": 98898665, "body": "&quot;Maintaining precision&quot; is almost nonsensical when it comes to floating-point numbers.  123.456F is <i>actually</i> represented as a number closer to 123.45600128173828.  (As usual, if you want to do something like this, you should <i>really, really</i> be using <code>BigDecimal</code>.)"}], "answers": [{"comments": [{"owner": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1578359298, "post_id": 56131035, "comment_id": 105405277, "body": "We have to convert to String first?"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 5, "last_activity_date": 1557838610, "creation_date": 1557838610, "answer_id": 56131035, "question_id": 56130893, "link": "https://stackoverflow.com/questions/56130893/kotlin-converting-float-to-double-while-maintaining-precision/56131035#56131035", "title": "Kotlin - Converting Float to Double while maintaining precision", "body": "<p>It's a big ugly, but you could convert your <code>Float</code> to a <code>String</code> and back out to a <code>Double</code>:</p>\n\n<pre><code>val myDouble: Double = 123.456f.toString().toDouble()\n// 123.456d\n</code></pre>\n\n<p>You could always encapsulate this in an extension function:</p>\n\n<pre><code>fun Float.toExactDouble(): Double = \n    this.toString().toDouble()\n\nval myDouble = 123.456f.toExactDouble()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 4, "last_activity_date": 1557848278, "creation_date": 1557848278, "answer_id": 56134099, "question_id": 56130893, "link": "https://stackoverflow.com/questions/56130893/kotlin-converting-float-to-double-while-maintaining-precision/56134099#56134099", "title": "Kotlin - Converting Float to Double while maintaining precision", "body": "<blockquote>\n  <p>In Kotlin 123.456 is a valid Double value</p>\n</blockquote>\n\n<p>Actually, that's not quite true.\u00a0 There's a Double value very <em>close</em> to 123.456, but it's not <em>exactly</em> 123.456.\u00a0 What you're seeing is the consequences of that.</p>\n\n<p>So you can't maintain precision, because you don't have that precision to start with!</p>\n\n<p>Short answer:</p>\n\n<p><strong>If you need exact values, don't use floating-point!</strong></p>\n\n<p>(In particular: <strong>Never store money values in floating-point!</strong>  See for example <a href=\"https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency?rq=1\">this</a> question.)</p>\n\n<p>The best alternative is usually <code>BigDecimal</code> which can store and calculate decimal fractions to an arbitrary precision.  They're less efficient, but Kotlin's operator overloading makes them painless to use (unlike Java!).</p>\n\n<p>Or if you're not going to be doing any calculations, you could store them as <code>String</code>s.</p>\n\n<p>Or if you'll only need a certain number of decimal places, you could scale them all up to <code>Int</code>s (or <code>Long</code>s).</p>\n\n<p>Technical explanation:</p>\n\n<p>Floats and Doubles use binary floating-point; they store an integer, and an integer power of 2 to multiple or divide it by.\u00a0 (For example, 3/4 would be stored as 3*2\u207b\u00b2.)\u00a0 This means they can store a wide range of binary fractions exactly.</p>\n\n<p>However, just as you can't store 1/3 as a decimal fraction (it's 0.3333333333\u2026, but any finite number of digits will only be an approximation), so you can't store 1/10 as a binary fraction (it's 0.000110011001100\u2026).\u00a0 This means that <strong>a binary floating-point number can't store most decimal numbers exactly</strong>.</p>\n\n<p>Instead, they store the nearest possible value to the number you want.\u00a0 And the routines which convert them to a String will try to undo that difference, by rounding appropriately.\u00a0 But that doesn't always give the result you expect.</p>\n\n<p>Floating-point numbers are great when you need a huge range of values (e.g. in scientific and technical use), but don't care about storing them exactly.</p>\n"}], "owner": {"reputation": 32231, "user_id": 1033686, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KsvGz.jpg?s=128&g=1", "display_name": "Matthew Layton", "link": "https://stackoverflow.com/users/1033686/matthew-layton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2343, "favorite_count": 0, "accepted_answer_id": 56131035, "answer_count": 2, "score": 5, "last_activity_date": 1557848278, "creation_date": 1557838109, "question_id": 56130893, "link": "https://stackoverflow.com/questions/56130893/kotlin-converting-float-to-double-while-maintaining-precision", "title": "Kotlin - Converting Float to Double while maintaining precision", "body": "<p>In Kotlin <code>123.456</code> is a valid <code>Double</code> value, however, <code>123.456F.toDouble()</code> results in <code>123.45600128173828</code> - presumably just the way precision is handled between the two.</p>\n\n<p>I want to be able to convert freely between the two, specifically for cases like this:</p>\n\n<pre><code>123.456F -&gt; 123.456 // Float to Double\n\n123.456 -&gt; 123.456F // Double to Float\n</code></pre>\n\n<p>How can I convert a float to a double in cases like this, and maintain precision?</p>\n"}, {"tags": ["android", "kotlin", "rx-java2", "rx-kotlin2"], "answers": [{"tags": [], "owner": {"reputation": 15573, "user_id": 397786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8550f0386287de4073e022c401b9d4aa?s=128&d=identicon&r=PG", "display_name": "Tassos Bassoukos", "link": "https://stackoverflow.com/users/397786/tassos-bassoukos"}, "is_accepted": false, "score": 0, "last_activity_date": 1557838668, "creation_date": 1557838668, "answer_id": 56131052, "question_id": 56130742, "link": "https://stackoverflow.com/questions/56130742/block-chain-in-rxkotlin-and-proceed/56131052#56131052", "title": "Block Chain in RxKotlin and Proceed", "body": "<p>Use <code>doOnNext</code> if you want to propagate each of the values, or <code>doOnComplete</code> when you want to do something at the end of the iteration.</p>\n"}, {"tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": false, "score": 0, "last_activity_date": 1557845923, "last_edit_date": 1557845923, "creation_date": 1557845535, "answer_id": 56133291, "question_id": 56130742, "link": "https://stackoverflow.com/questions/56130742/block-chain-in-rxkotlin-and-proceed/56133291#56133291", "title": "Block Chain in RxKotlin and Proceed", "body": "<p>What you could do is below:</p>\n\n<pre><code>Observable.fromIterable(listOf(\"A\", \"B\", \"C\", \"D\"))\n        .subscribeBy(\n            onNext = {\n                doSomeTask(it)\n            },\n            onComplete = {\n                doSomeOtherTask()\n            }\n        )\n</code></pre>\n\n<p>This way you'll achieve the expected result. Cheers!</p>\n"}], "owner": {"reputation": 760, "user_id": 9344496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31644b0ff01f07e53c043d1a2cd05774?s=128&d=identicon&r=PG&f=1", "display_name": "Stack", "link": "https://stackoverflow.com/users/9344496/stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1557845923, "creation_date": 1557837594, "last_edit_date": 1557838688, "question_id": 56130742, "link": "https://stackoverflow.com/questions/56130742/block-chain-in-rxkotlin-and-proceed", "title": "Block Chain in RxKotlin and Proceed", "body": "<p>I have a chaining operation in my application, Where i have a list of some data, i will iterate through the list with <code>iteratable observable</code> once the iteration completes, i will perform some other operation which does not depends on the previous list, so what i need is in between these two operation i need to block(or barrier) until the first completes and proceed with second one.</p>\n\n<p>Example</p>\n\n<pre><code>Observable.fromIterable(listOf(\"A\",\"B\",\"C\",\"D\"))\n          .map{\n            doSomeTask(it)\n          } \n   // I need a blocking here, once this iteration completes i will proceed with the below task, but i don't need of toList() to block since i don't want the data,       \n          .map{\n            doSomeOtherTask()\n          }\n</code></pre>\n\n<p>Can anyone help me out with this ?</p>\n"}, {"tags": ["android", "kotlin", "retrofit2", "coroutine"], "answers": [{"tags": [], "owner": {"reputation": 1493, "user_id": 7122274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whywW.png?s=128&g=1", "display_name": "r2rek", "link": "https://stackoverflow.com/users/7122274/r2rek"}, "is_accepted": false, "score": 1, "last_activity_date": 1557839515, "creation_date": 1557839515, "answer_id": 56131326, "question_id": 56130585, "link": "https://stackoverflow.com/questions/56130585/how-to-deal-with-exception-with-deferred-await-error-in-retrofit/56131326#56131326", "title": "How to deal with exception with Deferred await error in Retrofit", "body": "<p>Even though wrapping is the preferred method, I believe there is another way(I wouldn't use it personally, but might suit you)</p>\n\n<p>You could create an OkHttp interceptor, which would do the try-catching for every request, and that would return a response created by retrofit's static Response.error(someParams).</p>\n\n<p>You could refer to <a href=\"https://github.com/gildor/kotlin-coroutines-retrofit/issues/34\" rel=\"nofollow noreferrer\">https://github.com/gildor/kotlin-coroutines-retrofit/issues/34</a> for the construction, you'd basically have to only change the catch{} block.</p>\n\n<p>Hope this helps, GL!</p>\n"}], "owner": {"reputation": 1604, "user_id": 3610737, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/cc4072b364b97d5407c686f03104429b?s=128&d=identicon&r=PG", "display_name": "hosseinAmini", "link": "https://stackoverflow.com/users/3610737/hosseinamini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 719, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557844063, "creation_date": 1557837143, "last_edit_date": 1557844063, "question_id": 56130585, "link": "https://stackoverflow.com/questions/56130585/how-to-deal-with-exception-with-deferred-await-error-in-retrofit", "title": "How to deal with exception with Deferred await error in Retrofit", "body": "<p>Our application has many network requests and we are using Coroutines with Retrofit like this: </p>\n\n<pre><code>suspend fun fetchAccountInfo() {\n    val api = retrofit.create(MainActivityApi::class.java)\n    val versionResponse = api.getVersionAsync().await()\n    ...\n}\n</code></pre>\n\n<p>The problem is that when device is not connected to the internert, Retrofit will throw an exeption and the app will crash. I found <a href=\"https://github.com/JakeWharton/retrofit2-kotlin-coroutines-adapter/issues/3\" rel=\"nofollow noreferrer\">this link</a> that says, put await() into a try/catch like this:</p>\n\n<pre><code>suspend fun fetchAccountInfo() {\n    val api = retrofit.create(MainActivityApi::class.java)\n    try {\n        val versionResponse = api.getVersionAsync().await()\n    } catch(e: Exception) {\n      //\n    }\n    ...\n}\n</code></pre>\n\n<p>But our app has many network requests and this solution is not proper for us. How can I prevent app crashing without putting all await() calls into a try/catch? </p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "fragment"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1557838303, "post_id": 56130557, "comment_id": 98892863, "body": "Don&#39;t worry, <code>setUserVisibleHint</code> will be deprecated in the next AndroidX Fragment release."}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1557838413, "post_id": 56130557, "comment_id": 98892949, "body": "@EpicPandaForce why? What should we use instead of this ?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1557840055, "post_id": 56130557, "comment_id": 98893975, "body": "<code>FragmentTransaction.setMaxLifecycle</code>"}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1557894119, "post_id": 56130557, "comment_id": 98913400, "body": "@EpicPandaForce, how to use it? can you send to me code? i need your help"}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557837793, "post_id": 56130721, "comment_id": 98892517, "body": "thanks my friend, it&#39;s work to me. but why deprecated this  <code>setUserVisibleHint</code> ?"}, {"owner": {"reputation": 725, "user_id": 10706099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rR0Un.jpg?s=128&g=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10706099/mayur"}, "reply_to_user": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557838271, "post_id": 56130721, "comment_id": 98892842, "body": "NO...it&#39;s not deprecated. its still working.. welcome... happy coding..."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1557838385, "post_id": 56130721, "comment_id": 98892926, "body": "It will be deprecated quite soon, actually. The next AndroidX Fragment release deprecates <code>setUserVisibleHint</code>."}, {"owner": {"reputation": 1035, "user_id": 5156187, "user_type": "registered", "profile_image": "https://graph.facebook.com/881841408548334/picture?type=large", "display_name": "Yasiru Nayanajith", "link": "https://stackoverflow.com/users/5156187/yasiru-nayanajith"}, "edited": false, "score": 1, "creation_date": 1558165553, "post_id": 56130721, "comment_id": 99017606, "body": "Now its deprecated"}, {"owner": {"reputation": 4984, "user_id": 3035127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DnBDm.png?s=128&g=1", "display_name": "fattire", "link": "https://stackoverflow.com/users/3035127/fattire"}, "edited": false, "score": 4, "creation_date": 1558733211, "post_id": 56130721, "comment_id": 99211583, "body": "Why is this deprecated?!  I&#39;ve read the description of setMaxLifeCycle twice and still have no idea how it would replace setUserVisibleHint-- which I use to hide the soft keyboard and take other actions (trigger animations for example) in a ViewPager when a fragment comes fully into view."}], "tags": [], "owner": {"reputation": 725, "user_id": 10706099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rR0Un.jpg?s=128&g=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10706099/mayur"}, "is_accepted": true, "score": 4, "last_activity_date": 1573681616, "last_edit_date": 1573681616, "creation_date": 1557837543, "answer_id": 56130721, "question_id": 56130557, "link": "https://stackoverflow.com/questions/56130557/how-to-use-setuservisiblehint-in-fragment-on-android/56130721#56130721", "title": "How to use setUserVisibleHint in Fragment on Android", "body": "<p>Before you put this code you know about fragment life cycle</p>\n\n<pre><code> override fun setUserVisibleHint(isVisibleToUser: Boolean) {\n        super.setUserVisibleHint(isVisibleToUser)\n        if (isVisibleToUser) {\n           // post your code\n        }\n    }\n\n    override fun onStart() {\n        super.onStart()\n        userVisibleHint = true\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 4626586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f3fe8586da7d313d1cfd75e168375a?s=128&d=identicon&r=PG&f=1", "display_name": "Samset", "link": "https://stackoverflow.com/users/4626586/samset"}, "is_accepted": false, "score": -1, "last_activity_date": 1557837902, "creation_date": 1557837902, "answer_id": 56130827, "question_id": 56130557, "link": "https://stackoverflow.com/questions/56130557/how-to-use-setuservisiblehint-in-fragment-on-android/56130827#56130827", "title": "How to use setUserVisibleHint in Fragment on Android", "body": "<pre><code> @Override\npublic void setUserVisibleHint(boolean isVisibleToUser) {\n    super.setUserVisibleHint(isVisibleToUser);\n\n    if (isVisibleToUser){\n        if (NetworkUtils.isConnected(getActivity())) {\n            callYourApi();\n        } \n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3793, "user_id": 1023597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OIGyn.png?s=128&g=1", "display_name": "Vishal Pawar", "link": "https://stackoverflow.com/users/1023597/vishal-pawar"}, "is_accepted": false, "score": 0, "last_activity_date": 1557838760, "creation_date": 1557838760, "answer_id": 56131088, "question_id": 56130557, "link": "https://stackoverflow.com/questions/56130557/how-to-use-setuservisiblehint-in-fragment-on-android/56131088#56131088", "title": "How to use setUserVisibleHint in Fragment on Android", "body": "<p>Use BottomSheetBehavior <a href=\"https://developer.android.com/reference/android/support/design/widget/BottomSheetBehavior\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/support/design/widget/BottomSheetBehavior</a> for this type of implementation. You can user BottomSheetDialogFragment as well.  </p>\n\n<p>To set specific behavior use this code  e.g. </p>\n\n<pre><code>bottomSheetBehavior.setPeekHeight(300);\nbottomSheetBehavior.setState(BottomSheetBehavior.STATE_COLLAPSED);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 11547109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d90a2d1cc0adbfaa9903e5645111a1?s=128&d=identicon&r=PG&f=1", "display_name": "jeremybwoods", "link": "https://stackoverflow.com/users/11547109/jeremybwoods"}, "is_accepted": false, "score": 0, "last_activity_date": 1560580675, "creation_date": 1560580675, "answer_id": 56607989, "question_id": 56130557, "link": "https://stackoverflow.com/questions/56130557/how-to-use-setuservisiblehint-in-fragment-on-android/56607989#56607989", "title": "How to use setUserVisibleHint in Fragment on Android", "body": "<p>If you are using <a href=\"https://developer.android.com/guide/navigation\" rel=\"nofollow noreferrer\">Navigation</a>, this may not be the best way to achieve the behavior you desire. Navigation has an <a href=\"https://developer.android.com/reference/androidx/navigation/NavController.OnDestinationChangedListener.html\" rel=\"nofollow noreferrer\">OnDestinationChangedListener</a> Interface that receives a callback whenever <a href=\"https://developer.android.com/reference/androidx/navigation/NavController.html#getCurrentDestination()\" rel=\"nofollow noreferrer\">NavController.getCurrentDestination</a> is called.</p>\n\n<p>Luckily you're using Kotlin and in HomeActivity you may be able to get away with something like:</p>\n\n<pre><code>navController.addOnDestinationChangedListener { _, destination, _ -&gt;\n    Handler().postDelayed({ requireContext().toast(\"Show\") }, 500)\n}\n</code></pre>\n\n<p>And you should get the desired result.</p>\n\n<p>If you are new to Navigation I would recommend <a href=\"https://codelabs.developers.google.com/codelabs/android-navigation/index.html?index=..%2F..%2Findex#0\" rel=\"nofollow noreferrer\">this</a> codelab. It goes through some of the basics and can help get you started. For some of the more advanced concepts, you can checkout the <a href=\"https://github.com/jbw0033/android-architecture-components/tree/master/NavigationAdvancedSample\" rel=\"nofollow noreferrer\">NavigationAdvancedSample</a> on Github.</p>\n\n<p>If you would like to directly use Fragments anyway, it would probably be more reliable to use the lifecycle methods (onStart) over setUserVisibleHint().</p>\n"}, {"comments": [{"owner": {"reputation": 1288, "user_id": 5407056, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kdXIb.jpg?s=128&g=1", "display_name": "Latief Anwar", "link": "https://stackoverflow.com/users/5407056/latief-anwar"}, "edited": false, "score": 1, "creation_date": 1569127023, "post_id": 56942123, "comment_id": 102491689, "body": "how if applying in ViewPager2?"}, {"owner": {"reputation": 877, "user_id": 11110509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XutFY.jpg?s=128&g=1", "display_name": "DIRTY DAVE", "link": "https://stackoverflow.com/users/11110509/dirty-dave"}, "edited": false, "score": 1, "creation_date": 1577108131, "post_id": 56942123, "comment_id": 105093605, "body": "<code>but instead, onResume() cause now onResume() will be called only for the visible fragment</code> solved my problem thanks"}, {"owner": {"reputation": 2407, "user_id": 5339829, "user_type": "registered", "accept_rate": 27, "profile_image": "https://lh4.googleusercontent.com/-Gq5bRoltcyM/AAAAAAAAAAI/AAAAAAAABJA/57FhuHkoR3E/photo.jpg?sz=128", "display_name": "Aman Verma", "link": "https://stackoverflow.com/users/5339829/aman-verma"}, "edited": false, "score": 0, "creation_date": 1613570398, "post_id": 56942123, "comment_id": 117114874, "body": "What about normal onResume when i came back from background?"}], "tags": [], "owner": {"reputation": 911, "user_id": 9740092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rm8p3.jpg?s=128&g=1", "display_name": "Aleyam", "link": "https://stackoverflow.com/users/9740092/aleyam"}, "is_accepted": false, "score": 36, "last_activity_date": 1562617569, "creation_date": 1562617569, "answer_id": 56942123, "question_id": 56130557, "link": "https://stackoverflow.com/questions/56130557/how-to-use-setuservisiblehint-in-fragment-on-android/56942123#56942123", "title": "How to use setUserVisibleHint in Fragment on Android", "body": "<p>As setUserVisibleHint(boolean aBoolean) is now deprecated, for those who still want to know when a fragment is visible you can still use </p>\n\n<pre><code> public FragmentTransaction setMaxLifecycle(Fragment fragment, Lifecycle.State state)\n</code></pre>\n\n<p>either indirectly with a FragmentPagerAdapter (or FragmentStatePagerAdapter)\njust by using the new Constructor</p>\n\n<pre><code>MyFPagerAdapter(FragmentManager fm) {\n        super(fm ,FragmentStatePagerAdapter.BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT);\n       //...\n}\n</code></pre>\n\n<p>note that \nFragmentStatePagerAdapter.BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT allows the adapter to use setMaxLifecycle internally (through setPrimaryItem) instead of setUserVisibleHint.\nHence in your fragment's implementation you won't anymore need to use </p>\n\n<pre><code>setUserVisibleHint(boolean aBoolean)\n</code></pre>\n\n<p>but instead, onResume() cause now onResume() will be called only for the visible fragment. the rest ones will still be able to reach onCreateView().</p>\n\n<p>The direct way is by using setMaxLifeCycle with FragmentTransaction when adding or switching fragment, where then</p>\n\n<pre><code>setMaxLifecycle(fragment, Lifecycle.State.STARTED);\n</code></pre>\n\n<p>is equivalent</p>\n\n<pre><code>setUserVisibleHint(false);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>setMaxLifecycle(fragment, Lifecycle.State.RESUMED);\n</code></pre>\n\n<p>equivalent to</p>\n\n<pre><code>setUserVisibleHint(true);\n</code></pre>\n\n<p>then again listen with Fragment's onResume() callback</p>\n"}, {"comments": [{"owner": {"reputation": 3934, "user_id": 12505251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a749071dd8e85c97cdd58ad765fb5?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Gal", "link": "https://stackoverflow.com/users/12505251/martin-gal"}, "edited": false, "score": 0, "creation_date": 1590315682, "post_id": 61983994, "comment_id": 109629227, "body": "Please don&#39;t simply post code. Add some context to your answer."}], "tags": [], "owner": {"reputation": 1, "user_id": 8155939, "user_type": "registered", "profile_image": "https://graph.facebook.com/1346349848734965/picture?type=large", "display_name": "\u0411\u0430\u0445\u043e\u0434\u0443\u0440 \u0411\u041a", "link": "https://stackoverflow.com/users/8155939/%d0%91%d0%b0%d1%85%d0%be%d0%b4%d1%83%d1%80-%d0%91%d0%9a"}, "is_accepted": false, "score": 0, "last_activity_date": 1590312480, "creation_date": 1590312480, "answer_id": 61983994, "question_id": 56130557, "link": "https://stackoverflow.com/questions/56130557/how-to-use-setuservisiblehint-in-fragment-on-android/61983994#61983994", "title": "How to use setUserVisibleHint in Fragment on Android", "body": "<pre><code>override fun onPrimaryNavigationFragmentChanged(isPrimaryNavigationFragment: Boolean) {\n        super.onPrimaryNavigationFragmentChanged(isPrimaryNavigationFragment)\n        if (isPrimaryNavigationFragment) {\n            // Your fragment is shown\n        } else {\n            // Your fragment is hidden\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2203, "user_id": 7176189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R4gG9.png?s=128&g=1", "display_name": "jai khambhayta", "link": "https://stackoverflow.com/users/7176189/jai-khambhayta"}, "is_accepted": false, "score": 1, "last_activity_date": 1597322303, "creation_date": 1597322303, "answer_id": 63395330, "question_id": 56130557, "link": "https://stackoverflow.com/questions/56130557/how-to-use-setuservisiblehint-in-fragment-on-android/63395330#63395330", "title": "How to use setUserVisibleHint in Fragment on Android", "body": "<blockquote>\n<p>After AndroidX <strong>setUserVisibleHint</strong> is deprecated as a replacement\nwe can use the <strong>setMenuVisibility</strong> Method.</p>\n</blockquote>\n<pre><code>  override fun setMenuVisibility(menuVisible: Boolean) {\n        super.setMenuVisibility(menuVisible)\n  }\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11902, "favorite_count": 3, "accepted_answer_id": 56130721, "answer_count": 7, "score": 10, "last_activity_date": 1597322303, "creation_date": 1557837065, "question_id": 56130557, "link": "https://stackoverflow.com/questions/56130557/how-to-use-setuservisiblehint-in-fragment-on-android", "title": "How to use setUserVisibleHint in Fragment on Android", "body": "<p>In my application i have <code>BottomNavBar</code> and i want show <code>fragments</code> when click on items of this <code>BottomNavBar</code>! <br>\nFor set this <code>fragments</code> with <code>BottomNavBar</code> i used <a href=\"https://developer.android.com/guide/navigation/navigation-design-graph\" rel=\"noreferrer\"><code>NavigationGraph</code></a> component! </p>\n\n<p>I want use <strong><code>setUserVisibleHint</code></strong> method for one of this <code>fragment</code>, but when show this <code>fragment</code> not call <strong><code>setUserVisibleHint</code></strong> !</p>\n\n<p><strong>My Activity codes</strong> for set <code>fragments</code> to <code>BottomNavBar</code> items : </p>\n\n<pre><code>class HomeActivity : BaseActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    setupNavigation()\n\n    }\n\n        private fun setupNavigation() {\n        val navController = Navigation.findNavController(this, R.id.homePage_fragmentNavHost)\n        NavigationUI.setupWithNavController(homePage_bottomNavBar, navController)\n    }\n\n    override fun onSupportNavigateUp() = Navigation.findNavController(this, R.id.homePage_fragmentNavHost).navigateUp()\n}\n</code></pre>\n\n<p><strong>My Fragment codes :</strong> </p>\n\n<pre><code>class HomeDashboardFragment : Fragment(){\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n        // Inflate the layout for this fragment\n        return inflater.inflate(R.layout.fragment_home_dashboard, container, false)\n    }\n\n    override fun setUserVisibleHint(isVisibleToUser: Boolean) {\n        super.setUserVisibleHint(isVisibleToUser)\n        if (isVisibleToUser) {\n            Handler().postDelayed({ requireContext().toast(\"Show\") }, 500)\n        }\n    }\n}\n</code></pre>\n\n<p>Why not work <code>setUserVisibleHint</code> into <code>fragment</code> ?</p>\n"}, {"tags": ["firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 1467, "user_id": 6698642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd80a09064542c848ba86ff1d9e22025?s=128&d=identicon&r=PG&f=1", "display_name": "TheGamer007", "link": "https://stackoverflow.com/users/6698642/thegamer007"}, "edited": false, "score": 0, "creation_date": 1557835757, "post_id": 56129606, "comment_id": 98891248, "body": "Please format your code properly"}, {"owner": {"reputation": 15, "user_id": 10946201, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8lVvAB1v-A/AAAAAAAAAAI/AAAAAAAAA-0/WnFI2077EPQ/photo.jpg?sz=128", "display_name": "Anurag Joshi", "link": "https://stackoverflow.com/users/10946201/anurag-joshi"}, "reply_to_user": {"reputation": 1467, "user_id": 6698642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd80a09064542c848ba86ff1d9e22025?s=128&d=identicon&r=PG&f=1", "display_name": "TheGamer007", "link": "https://stackoverflow.com/users/6698642/thegamer007"}, "edited": false, "score": 0, "creation_date": 1557839095, "post_id": 56129606, "comment_id": 98893353, "body": "i had used a push for inserting googleRef.child(&quot;userID&quot;).push().setValue(userId)         googleRef.child(&quot;gname&quot;).push().setValue(userName)         googleRef.child(&quot;email&quot;).push().setValue(reEmail)         googleRef.child(&quot;photoUrl&quot;).push().setValue(userpicUrl)"}, {"owner": {"reputation": 15, "user_id": 10946201, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8lVvAB1v-A/AAAAAAAAAAI/AAAAAAAAA-0/WnFI2077EPQ/photo.jpg?sz=128", "display_name": "Anurag Joshi", "link": "https://stackoverflow.com/users/10946201/anurag-joshi"}, "reply_to_user": {"reputation": 1467, "user_id": 6698642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd80a09064542c848ba86ff1d9e22025?s=128&d=identicon&r=PG&f=1", "display_name": "TheGamer007", "link": "https://stackoverflow.com/users/6698642/thegamer007"}, "edited": false, "score": 0, "creation_date": 1557839298, "post_id": 56129606, "comment_id": 98893480, "body": "@TheGamer007 not allowing me to do so"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10946201, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8lVvAB1v-A/AAAAAAAAAAI/AAAAAAAAA-0/WnFI2077EPQ/photo.jpg?sz=128", "display_name": "Anurag Joshi", "link": "https://stackoverflow.com/users/10946201/anurag-joshi"}, "edited": false, "score": 0, "creation_date": 1557909071, "post_id": 56131813, "comment_id": 98919596, "body": "i restructured the database as provided by you now can u please give suggestion how can i check the email exist or not.. Thanks"}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "reply_to_user": {"reputation": 15, "user_id": 10946201, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8lVvAB1v-A/AAAAAAAAAAI/AAAAAAAAA-0/WnFI2077EPQ/photo.jpg?sz=128", "display_name": "Anurag Joshi", "link": "https://stackoverflow.com/users/10946201/anurag-joshi"}, "edited": false, "score": 0, "creation_date": 1557929141, "post_id": 56131813, "comment_id": 98931898, "body": "With these data structures yuor existing query should work. What does it print when you run the code on this structure?"}, {"owner": {"reputation": 15, "user_id": 10946201, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8lVvAB1v-A/AAAAAAAAAAI/AAAAAAAAA-0/WnFI2077EPQ/photo.jpg?sz=128", "display_name": "Anurag Joshi", "link": "https://stackoverflow.com/users/10946201/anurag-joshi"}, "edited": false, "score": 0, "creation_date": 1557946343, "post_id": 56131813, "comment_id": 98940926, "body": "Solved!!, Thanks a Lot!!"}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": true, "score": 0, "last_activity_date": 1557840958, "creation_date": 1557840958, "answer_id": 56131813, "question_id": 56129606, "link": "https://stackoverflow.com/questions/56129606/returing-always-false-if-email-exists-or-not/56131813#56131813", "title": "Returing always false if email exists or not", "body": "<p>If you add two users, the way you're adding code is going to result in a structure like this:</p>\n\n<pre><code>\"googleRef\": {\n  \"userID\": {\n    \"-Ldfs32189eqdqA1\": \"userID1\",\n    \"-Ldfs32189eqdqA5\": \"userID2\"\n  },\n  \"gname\": {\n    \"-Ldfs32189eqdqA2\": \"gname1\",\n    \"-Ldfs32189eqdqA6\": \"gname2\"\n  },\n  \"email\": {\n    \"-Ldfs32189eqdqA3\": \"email1\",\n    \"-Ldfs32189eqdqA7\": \"email2\"\n  },\n  \"photoUrl\": {\n    \"-Ldfs32189eqdqA4\": \"photoUrl1\",\n    \"-Ldfs32189eqdqA8\": \"photoUrl2\"\n  }\n}\n</code></pre>\n\n<p>So you have a separate generated push ID (the keys starting with a <code>-</code>) for each property of each user, which is highly uncommon.</p>\n\n<p>The more idiomatic form of storing user information is either this:</p>\n\n<pre><code>\"googleRef\": {\n  \"-Ldfs32189eqdqA1\": {\n    \"userID\": \"userID1\",\n    \"gname\": \"gname1\",\n    \"email\": \"email1\",\n    \"photoUrl\": \"photoUrl1\"\n  },\n  \"-Ldfs32189eqdqA5\": {\n    \"userID\": \"userID2\",\n    \"gname\": \"gname2\"\n    \"email\": \"email2\"\n    \"photoUrl\": \"photoUrl2\"\n  },\n}\n</code></pre>\n\n<p>Or (even better) this:</p>\n\n<pre><code>\"googleRef\": {\n  \"userID1\": {\n    \"gname\": \"gname1\",\n    \"email\": \"email1\",\n    \"photoUrl\": \"photoUrl1\"\n  },\n  \"userID2\": {\n    \"gname\": \"gname2\"\n    \"email\": \"email2\"\n    \"photoUrl\": \"photoUrl2\"\n  },\n}\n</code></pre>\n\n<p>The reasons these last two are more common is that they group the information for each user together, which makes it easier/possible to find information for each user. In both of these cases, you can find users with a specific email address with your query.</p>\n\n<p>The reason the last one is best, is because the information for each user is stored under the user's ID, which is already guaranteed to be unique. This structure makes looking up the user's information by their UID possible without needing a query.</p>\n\n<p>To write a structure like the last example, use:</p>\n\n<pre><code>Map&lt;String, Object&gt; values = new HashMap&lt;&gt;();\nvalues.put(\"gname\", userName)\nvalues.put(\"email\", reEmail)\nvalues.put(\"photoUrl\", userpicUrl)\ngoogleRef.child(userId).setValue(values)\n</code></pre>\n\n<p>A final note: you can't <strong>return</strong> whether the node exists or node, since the data is loaded from Firebase asynchronously. To learn more about what that means, and the common workaround (which is to define a callback interface), see <a href=\"https://stackoverflow.com/questions/50434836/getcontactsfromfirebase-method-return-an-empty-list/50435519#50435519\">getContactsFromFirebase() method return an empty list</a></p>\n"}], "owner": {"reputation": 15, "user_id": 10946201, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8lVvAB1v-A/AAAAAAAAAAI/AAAAAAAAA-0/WnFI2077EPQ/photo.jpg?sz=128", "display_name": "Anurag Joshi", "link": "https://stackoverflow.com/users/10946201/anurag-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 56131813, "answer_count": 1, "score": 1, "last_activity_date": 1557840958, "creation_date": 1557834028, "last_edit_date": 1557840268, "question_id": 56129606, "link": "https://stackoverflow.com/questions/56129606/returing-always-false-if-email-exists-or-not", "title": "Returing always false if email exists or not", "body": "<p>I am checking a  if a email is already registered  or not </p>\n\n<pre><code>query=googleRef.orderByChild(\"email\").equalTo(newEmail).addValueEventListener(object :ValueEventListener{\n  override fun onCancelled(p0: DatabaseError) {\n     println(p0.code)\n  }\n\n  override fun onDataChange(p0: DataSnapshot) {\n     if(p0.exists())\n     {\n         println(\"Yes user exists\")\n     }\n      else if(!p0.exists())\n\n     {\n         println(\"Users dont exists\")\n     }\n  }\n</code></pre>\n\n<p>Code from comments:</p>\n\n<p>I had used a push for inserting:</p>\n\n<pre><code>googleRef.child(\"userID\").push().setValue(userId)\ngoogleRef.child(\"gname\").push().setValue(userName)\ngoogleRef.child(\"email\").push().setValue(reEmail)\ngoogleRef.child(\"photoUrl\").push().setValue(userpicUrl)\n</code></pre>\n"}, {"tags": ["android", "function", "android-activity", "kotlin", "buttonclick"], "comments": [{"owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557834115, "post_id": 56129350, "comment_id": 98890347, "body": "<code>if (places.isEmpty())</code> -- actually you start an <code>Activity</code> only if the array IS empty which seems to contradict your stated requirement"}, {"owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "reply_to_user": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557834186, "post_id": 56129350, "comment_id": 98890386, "body": "Right, it was one of my attempts to solve the problem, updated the code."}, {"owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557834347, "post_id": 56129350, "comment_id": 98890471, "body": "please post the code for the <code>filterPlaces(...)</code> method"}, {"owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "reply_to_user": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557834469, "post_id": 56129350, "comment_id": 98890544, "body": "Posted the function."}, {"owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557834803, "post_id": 56129350, "comment_id": 98890734, "body": "it seems you run an asynchronous request, this is why the method itself returns instantly.  Your data is updated inside the success scope which begins here: <code>{ result -&gt; .... </code> so you might want to start your <code>Activity</code> in this scope as well, after all the data was added to the <code>places</code> array"}, {"owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "reply_to_user": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557834988, "post_id": 56129350, "comment_id": 98890848, "body": "OK, I&#39;m trying to do so as I said, it tells me this is not defined in this context and because of that the intent doesn&#39;t work."}, {"owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 1, "creation_date": 1557835106, "post_id": 56129350, "comment_id": 98890914, "body": "use <code>this@YourCurrentActivityName</code>, that&#39;s how you refer to an outer scope in Kotlin"}, {"owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "reply_to_user": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557835281, "post_id": 56129350, "comment_id": 98891009, "body": "tried <code>val i = Intent(this@MainActivity::class.java, RelevantPlaces::class.java)</code> and also tried <code>val i = Intent(this@MainActivity, RelevantPlaces::class.java)</code>, both doesn&#39;t work"}, {"owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "reply_to_user": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557835696, "post_id": 56129350, "comment_id": 98891218, "body": "Solved it, I accidentally placed the function outside the <code>MainActivity</code> class, so now I moved it in and it works"}, {"owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 1, "creation_date": 1557836015, "post_id": 56129350, "comment_id": 98891408, "body": "Glad I could help :) Please consider accepting the answer if it did solve your problem."}, {"owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "reply_to_user": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557836264, "post_id": 56129350, "comment_id": 98891577, "body": "It&#39;s not exactly what happen, I wrote what happen and how I fixed that, If you think you wrote that in more professional language I would love to mark it as an answer to my question."}], "answers": [{"tags": [], "owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "is_accepted": true, "score": 1, "last_activity_date": 1557835952, "creation_date": 1557835952, "answer_id": 56130193, "question_id": 56129350, "link": "https://stackoverflow.com/questions/56129350/kotlin-function-runs-after-next-lines-ended/56130193#56130193", "title": "Kotlin- Function runs after next lines ended", "body": "<p><em>What is happening?</em></p>\n\n<p>An asynchronous request is made in <code>filterPlaces</code>, this is why the method itself returns immediately and passes control to the next code block.</p>\n\n<p><em>How to fix this?</em></p>\n\n<p>Move your code starting another <code>Activity</code> into the scope of your success listener. A better approach is to place this code into a separate method and just call it as needed.</p>\n"}, {"comments": [{"owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557836401, "post_id": 56130252, "comment_id": 98891660, "body": "could you update the code in your question to reflect your latest working code?"}, {"owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "reply_to_user": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557836544, "post_id": 56130252, "comment_id": 98891765, "body": "I added the main activity class line"}, {"owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557837103, "post_id": 56130252, "comment_id": 98892086, "body": "so you are not starting the new <code>Activity</code> from the <code>onSuccess</code> scope? If not, chances are that you are getting some cached result after the initial request since Firebase APIs are indeed <a href=\"https://medium.com/google-developers/why-are-firebase-apis-asynchronous-callbacks-promises-tasks-e037a6654a93\" rel=\"nofollow noreferrer\">asynchronous</a>"}, {"owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "reply_to_user": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557837603, "post_id": 56130252, "comment_id": 98892400, "body": "If you say so I&#39;ll add the <code>function</code> to the <code>onSuccess</code> scope, updating the code now and deleting this answer"}, {"owner": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 1, "creation_date": 1557838047, "post_id": 56130252, "comment_id": 98892679, "body": "this looks fine to me"}, {"owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "reply_to_user": {"reputation": 10519, "user_id": 1199662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ihCLz.jpg?s=128&g=1", "display_name": "Droidman", "link": "https://stackoverflow.com/users/1199662/droidman"}, "edited": false, "score": 0, "creation_date": 1557838079, "post_id": 56130252, "comment_id": 98892696, "body": "Thank you for all of you help!"}], "tags": [], "owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "is_accepted": false, "score": 0, "last_activity_date": 1557836148, "creation_date": 1557836148, "answer_id": 56130252, "question_id": 56129350, "link": "https://stackoverflow.com/questions/56129350/kotlin-function-runs-after-next-lines-ended/56130252#56130252", "title": "Kotlin- Function runs after next lines ended", "body": "<p>Placed the <code>filterPlace</code> function outside the <code>Main Activity</code> class. Moved the function in the <code>Main Activity</code> class and it worked.</p>\n"}], "owner": {"reputation": 77, "user_id": 2998223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3800899a0ed1c4d2e3d732b56a306fae?s=128&d=identicon&r=PG&f=1", "display_name": "ofir2471", "link": "https://stackoverflow.com/users/2998223/ofir2471"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 56130193, "answer_count": 2, "score": 0, "last_activity_date": 1559044784, "creation_date": 1557833293, "last_edit_date": 1559044784, "question_id": 56129350, "link": "https://stackoverflow.com/questions/56129350/kotlin-function-runs-after-next-lines-ended", "title": "Kotlin- Function runs after next lines ended", "body": "<p>Updated- The code in the question works now</p>\n\n<p>I'm trying to run a function after clicking on a button. The function updates an array and I want to run the next lines (The next lines transfer me to another activity) if the array isn't empty. </p>\n\n<p>I tried to open the new activity within the <code>filterPlaces</code> function but with no success, <code>startActivity</code> and <code>Intent</code> don't work.</p>\n\n<p>This is the function that updates the array:</p>\n\n<pre><code>var places = ArrayList&lt;Place&gt;() //Global place array\nclass MainActivity : AppCompatActivity() {\n\n    fun filterPlaces(types: ArrayList&lt;String&gt;, foods: ArrayList&lt;String&gt;, maxPrice: Int, maxProximity: Int) {\n        var typesList = types\n        val foodList = foods\n        if (types.isEmpty()) {\n            typesList = arrayListOf(\"Restaurant\", \"Hangouts\")\n            if (foods.isEmpty()) {\n                foodList.add(\"Pizza\")\n            }\n        }\n        val db = FirebaseFirestore.getInstance()\n        db.collection(\"places\").get().addOnSuccessListener { result -&gt;\n            for (document in result) {\n                val typeMatches = document.data[\"Type\"].toString() in typesList\n                val foodMatches = document.data[\"Food\"].toString() in foodList\n                var price = 0\n                when (document.data[\"Price\"].toString()) {\n                    \"Very cheap\" -&gt; price = 0\n                    \"Cheap\" -&gt; price = 1\n                    \"Average\" -&gt; price = 2\n                    \"Far\" -&gt; price = 3\n                    \"Very far\" -&gt; price = 4\n                }\n                val priceMatches = price &lt;= maxPrice\n                var proximity = 0\n                when (document.data[\"Proximity\"].toString()) {\n                    \"Very close\" -&gt; proximity = 0\n                    \"Close\" -&gt; proximity = 1\n                    \"Far\" -&gt; proximity = 2\n                    \"Very far\" -&gt; proximity = 3\n                }\n                val proximityMatches = proximity &lt;= maxProximity\n                if (typeMatches and foodMatches and priceMatches and proximityMatches) {\n                    val place = Place(\n                        document.data[\"Place\"].toString(),\n                        document.data[\"Type\"].toString(),\n                        document.data[\"Food\"].toString(),\n                        document.data[\"Price\"].toString(),\n                        document.data[\"Proximity\"].toString()\n                    )\n                    places.add(place)\n                    Log.d(\"name\", \"Place added successfully\")\n                }\n            }\n\n            //Openning the results activity\n            if (places.isNotEmpty()) {\n                val i = Intent(this, RelevantPlaces::class.java)\n                val b = Bundle()\n                b.putParcelableArrayList(\"places\", places)\n                i.putExtra(\"bundle\", b)\n                startActivity(i)\n            }\n        }\n            .addOnFailureListener { exception -&gt;\n                Log.d(\"name\", \"Error getting documents.\")\n            }\n    }\n</code></pre>\n\n<p>This is the on click function:</p>\n\n<pre><code>fun onSortFilterClicked(view: View) {\n        if (places.isEmpty()) filterPlaces(types, foods, priceRange.progress, proximityRange.progress)\n    }\n</code></pre>\n\n<p>I want to run <code>filterPlaces</code> first, update the <code>places</code> array while I run it, and only than check if the array is still empty and if not open the new activity.\nWhat actually happens is that it calls the <code>filterPlaces</code> but doesn't do it, instead it checks the <code>places</code> array (The <code>if condition</code> in the code) and only than goes into <code>filterPlaces</code> and run what's in it, resulted in me need to press twice on the button and only than the array has values.\nI'm running this on Android Studio and I'm new at this Kotlin world and android developing in general.</p>\n\n<p>Is there a solution for this? Either open the activity within the function or make the function run first?</p>\n"}, {"tags": ["arrays", "kotlin"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1557832537, "post_id": 56129008, "comment_id": 98889444, "body": "besides <code>LongArray(0)</code>, there is also <code>emptyArray&lt;T&gt;()</code> available...."}], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 0, "last_activity_date": 1557832329, "creation_date": 1557832329, "answer_id": 56129087, "question_id": 56129008, "link": "https://stackoverflow.com/questions/56129008/can-i-make-a-completely-empty-longarray-in-kotlin-instead-of-one-filled-with-0/56129087#56129087", "title": "Can I make a completely empty LongArray in Kotlin instead of one filled with 0 (zeros)?", "body": "<p>An empty array is one without any elements.</p>\n\n<p>So to create one of size 0, you have to use <code>LongArray(0)</code>.</p>\n\n<p>You cannot remove elements from an array. If you want to do that, you need to use a <code>List</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 11399404, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213803742667683/picture?type=large", "display_name": "Damir Kurton Krancpiler", "link": "https://stackoverflow.com/users/11399404/damir-kurton-krancpiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 56129087, "answer_count": 1, "score": 1, "last_activity_date": 1557832368, "creation_date": 1557832034, "last_edit_date": 1557832368, "question_id": 56129008, "link": "https://stackoverflow.com/questions/56129008/can-i-make-a-completely-empty-longarray-in-kotlin-instead-of-one-filled-with-0", "title": "Can I make a completely empty LongArray in Kotlin instead of one filled with 0 (zeros)?", "body": "<p>I'm starting to learn programming through Kotlin, mostly doing tasks (katas) through codewars. I'm stuck at one task (<a href=\"https://www.codewars.com/kata/steps-in-primes/\" rel=\"nofollow noreferrer\">https://www.codewars.com/kata/steps-in-primes/</a>) where it requires me to, if there are no prime numbers in given interval with defined step, return an empty long array.</p>\n\n<p>I defined array as:</p>\n\n<pre><code>var result = LongArray(2)\n</code></pre>\n\n<p>I read somewhere (perhaps even on this site) that empty arrays are declared like that, but those 2 slots are instead filled with zeros. How can I \"erase\" those zeros to get a completely empty array?</p>\n"}, {"tags": ["gradle", "kotlin", "artifactory", "gradle-kotlin-dsl"], "answers": [{"comments": [{"owner": {"reputation": 997, "user_id": 80772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4aa48ff7c34520ffcc7fddea2bc3b91?s=128&d=identicon&r=PG", "display_name": "eel ghEEz", "link": "https://stackoverflow.com/users/80772/eel-gheez"}, "edited": false, "score": 0, "creation_date": 1592619230, "post_id": 56143472, "comment_id": 110498108, "body": "Is it just me that I don&#39;t see &quot;jfrog&quot; anywhere in the suggestions."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "reply_to_user": {"reputation": 997, "user_id": 80772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4aa48ff7c34520ffcc7fddea2bc3b91?s=128&d=identicon&r=PG", "display_name": "eel ghEEz", "link": "https://stackoverflow.com/users/80772/eel-gheez"}, "edited": false, "score": 0, "creation_date": 1601754017, "post_id": 56143472, "comment_id": 113505897, "body": "@eelghEEz Artifactory is made by JFrog. It doesn&#39;t just refer to OJO (oss.jfrog.org) which is itself an instance of JFrog&#39;s Artifactory product. The artifactory plugin works for any Artifactory instance."}], "tags": [], "owner": {"reputation": 166, "user_id": 11312329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pnOgJ.jpg?s=128&g=1", "display_name": "Vadim Pikha", "link": "https://stackoverflow.com/users/11312329/vadim-pikha"}, "is_accepted": true, "score": 10, "last_activity_date": 1557903997, "creation_date": 1557903997, "answer_id": 56143472, "question_id": 56128767, "link": "https://stackoverflow.com/questions/56128767/convert-to-gradle-kotlin-dsl-jfrog-artifactory-config/56143472#56143472", "title": "Convert to gradle-kotlin-dsl Jfrog.Artifactory config", "body": "<p>I solved it this way: </p>\n\n<pre><code>val sourcesJar by tasks.creating(Jar::class) {\n    dependsOn(JavaPlugin.CLASSES_TASK_NAME)\n    classifier = \"sources\"\n    from(sourceSets[\"main\"].allSource)\n}\n\npublishing {\n    publications {\n        create&lt;MavenPublication&gt;(\"mavenJava\") {\n            groupId = \"ua.tiras\"\n            artifactId = \"aloader-core\"\n            version = \"0.0.4\"\n\n            artifact(sourcesJar)\n            artifact(\"$buildDir/libs/${project.name}.jar\")\n\n            pom {\n                withXml {\n                    asNode().appendNode(\"dependencies\").let {\n                        for (dependency in configurations[\"api\"].dependencies) {\n                            it.appendNode(\"dependency\").apply {\n                                appendNode(\"groupId\", dependency.group)\n                                appendNode(\"artifactId\", dependency.name)\n                                appendNode(\"version\", dependency.version)\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\nartifactory {\n    setContextUrl(\"http://dev.tirascloud.com:8081/artifactory\")\n    publish(delegateClosureOf&lt;PublisherConfig&gt; {\n        repository(delegateClosureOf&lt;GroovyObject&gt; {\n            setProperty(\"repoKey\", \"gradle-dev-local\")\n            setProperty(\"username\", project.findProperty(\"artifactory_username\") ?: \"nouser\")\n            setProperty(\"password\", project.findProperty(\"artifactory_password\") ?: \"nopass\")\n        })\n        defaults(delegateClosureOf&lt;GroovyObject&gt; {\n            invokeMethod(\"publications\", \"mavenJava\")\n            setProperty(\"publishPom\", true)\n            setProperty(\"publishArtifacts\", true)\n        })\n    })\n    resolve(delegateClosureOf&lt;ResolverConfig&gt; {\n        setProperty(\"repoKey\", \"repo\")\n    })\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 11312329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pnOgJ.jpg?s=128&g=1", "display_name": "Vadim Pikha", "link": "https://stackoverflow.com/users/11312329/vadim-pikha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1760, "favorite_count": 1, "accepted_answer_id": 56143472, "answer_count": 1, "score": 2, "last_activity_date": 1557926192, "creation_date": 1557831124, "question_id": 56128767, "link": "https://stackoverflow.com/questions/56128767/convert-to-gradle-kotlin-dsl-jfrog-artifactory-config", "title": "Convert to gradle-kotlin-dsl Jfrog.Artifactory config", "body": "<p>I'm trying to migrate from groovy to gradle-kotlin dsl, but I'm new to it, so I dont know how to configure Jfrog Artifactory. Please help me with converting that part of code to gradle-kotlin dsl:</p>\n\n<pre><code>task sourceJar(type: Jar) {\n    from sourceSets.main.allJava\n}\n\nartifactory {\n    contextUrl = \"http://10.0.0.49:8081/artifactory\"\n    publish {\n        repository {\n            repoKey = 'gradle-dev-local'\n            username = artifactory_username\n            password = artifactory_password\n        }\n        defaults {\n            publications('mavenJava')\n            publishArtifacts = true\n            publishPom = true\n        }\n    }\n}\n\n\n\npublishing {\n    publications {\n        mavenJava(MavenPublication) {\n            groupId = \"ua.tiras.oloader\"\n            artifactId = 'core'\n            version = \"1.0.62\"\n            artifact(\"$buildDir/libs/${project.getName()}.jar\")\n            artifact sourceJar {\n                classifier \"sources\"\n            }\n            pom.withXml {\n                def dependenciesNode = asNode().appendNode('dependencies')\n                configurations.api.allDependencies.each { dependency -&gt;\n                    def dependencyNode = dependenciesNode.appendNode('dependency')\n                    dependencyNode.appendNode('groupId', dependency.group)\n                    dependencyNode.appendNode('artifactId', dependency.name)\n                    dependencyNode.appendNode('version', dependency.version)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-bundle"], "answers": [{"comments": [{"owner": {"reputation": 459, "user_id": 11234746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c24406e3aaf5f6bbbf9ddf010c211e3?s=128&d=identicon&r=PG&f=1", "display_name": "Noam Silverstein", "link": "https://stackoverflow.com/users/11234746/noam-silverstein"}, "edited": false, "score": 0, "creation_date": 1557829235, "post_id": 56128062, "comment_id": 98887654, "body": "Then I also have to modify <code>private lateinit var flag: MainFlag</code> to <code>private var flag : MainFlag? = null</code>"}], "tags": [], "owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "is_accepted": true, "score": 3, "last_activity_date": 1557828910, "creation_date": 1557828910, "answer_id": 56128062, "question_id": 56128034, "link": "https://stackoverflow.com/questions/56128034/is-a-non-null-object-from-intent-extras-nullable/56128062#56128062", "title": "Is a non-null object from intent?.extras? nullable?", "body": "<p>yes it can be <code>null</code>. You are getting the warning because you are down casting to a not nullable type</p>\n\n<pre><code>intent?.extras?.getSerializable(ARG_FLAG) as MainFlag\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>intent?.extras?.getSerializable(ARG_FLAG) as? MainFlag\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 5297799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FP1bK.jpg?s=128&g=1", "display_name": "Ronak Doshi", "link": "https://stackoverflow.com/users/5297799/ronak-doshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1557830023, "last_edit_date": 1557830023, "creation_date": 1557829306, "answer_id": 56128197, "question_id": 56128034, "link": "https://stackoverflow.com/questions/56128034/is-a-non-null-object-from-intent-extras-nullable/56128197#56128197", "title": "Is a non-null object from intent?.extras? nullable?", "body": "<p>First of all you have to declare the variable as</p>\n\n<pre><code>private lateinit var flag: MainFlag?\n</code></pre>\n\n<p>or</p>\n\n<pre><code>private var flag: MainFlag? = null\n</code></pre>\n\n<p>then you can set the value of <code>flag</code> like this</p>\n\n<pre><code>flag = intent?.extras?.getSerializable(ARG_FLAG) as? MainFlag\n</code></pre>\n\n<p>Now the flag variable is <code>nullable</code>. So you need to check for <code>nullable</code> everywhere in the code like this:</p>\n\n<pre><code>flag?.let{\n  //..\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 459, "user_id": 11234746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c24406e3aaf5f6bbbf9ddf010c211e3?s=128&d=identicon&r=PG&f=1", "display_name": "Noam Silverstein", "link": "https://stackoverflow.com/users/11234746/noam-silverstein"}, "edited": false, "score": 0, "creation_date": 1557831574, "post_id": 56128379, "comment_id": 98888937, "body": "lateinit modifier is not allowed on properties of nullable types"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 459, "user_id": 11234746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c24406e3aaf5f6bbbf9ddf010c211e3?s=128&d=identicon&r=PG&f=1", "display_name": "Noam Silverstein", "link": "https://stackoverflow.com/users/11234746/noam-silverstein"}, "edited": false, "score": 0, "creation_date": 1557831902, "post_id": 56128379, "comment_id": 98889115, "body": "yeah, sorry... just copy/pasted... but the solution is relatively easy... just use <code>private var flag : MainFlag? = null</code> then..."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 0, "last_activity_date": 1557831979, "last_edit_date": 1557831979, "creation_date": 1557829876, "answer_id": 56128379, "question_id": 56128034, "link": "https://stackoverflow.com/questions/56128034/is-a-non-null-object-from-intent-extras-nullable/56128379#56128379", "title": "Is a non-null object from intent?.extras? nullable?", "body": "<p>If you are sure that <code>intent?.extras?.getSerializable(ARG_FLAG)</code> will never be <code>null</code> (and also none of the intermediate objects: <code>intent</code> and <code>intent.extras</code>), then you can keep everything as is and just use <code>flag.let { ...</code> instead of <code>flag?.let { ...</code>.</p>\n\n<p>If there is a chance that any of those is <code>null</code>, then you have to use a <code>MainFlag?</code>-type for your flag, e.g.:</p>\n\n<pre><code>private var flag : MainFlag? = null // having null in place basically makes the lateinit meaningless and rightfully lateinit does not allow nullable types\n\nflag = intent?.extras?.getSerializable(ARG_FLAG) as? MainFlag\n</code></pre>\n\n<p>... or risk a <code>TypeCastException</code> when keeping <code>as MainFlag</code>.</p>\n\n<p>The reason why Android Studio complains about the unnecessary safe call, is, that you specified the type as non-nullable <code>MainFlag</code> (indirectly via your <code>as MainFlag</code>-cast). So if you access <code>flag</code> it must already be there and it must be not-null (you said it so). The code however will fail at the cast, if there was a <code>null</code>-value involved, i.e. the cast to the non-nullable type could not succeed.</p>\n"}], "owner": {"reputation": 459, "user_id": 11234746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c24406e3aaf5f6bbbf9ddf010c211e3?s=128&d=identicon&r=PG&f=1", "display_name": "Noam Silverstein", "link": "https://stackoverflow.com/users/11234746/noam-silverstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 56128062, "answer_count": 3, "score": 0, "last_activity_date": 1557831979, "creation_date": 1557828813, "question_id": 56128034, "link": "https://stackoverflow.com/questions/56128034/is-a-non-null-object-from-intent-extras-nullable", "title": "Is a non-null object from intent?.extras? nullable?", "body": "<p>Lets assume, there is a non-null enum <code>MainFlag</code> object ( like <code>enum class MainFlag { PARAM1, PARAM2 }</code>) in an Activity by <code>lateinit var</code>:</p>\n\n<pre><code>private lateinit var flag: MainFlag\n</code></pre>\n\n<p>Furtheron, I get that later in the <code>onCreate()</code> like:</p>\n\n<pre><code>flag = intent?.extras?.getSerializable(ARG_FLAG) as MainFlag\n</code></pre>\n\n<p>and I used to use this <code>flag</code> in that activity on several places with null-checks</p>\n\n<pre><code>flag?.let{\n  //..\n}\n</code></pre>\n\n<p>but then Android Studio complains: </p>\n\n<blockquote>\n  <p>Unnecessary safe call on a non-null receiver of type\n  MainActivity.Companion.MainFlag</p>\n</blockquote>\n\n<p><strong>I am not sure using it without null checks, because if <code>intent?.extras?</code> fails, flag will not be set, thus null?</strong></p>\n"}, {"tags": ["android", "android-intent", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 10, "last_activity_date": 1557832172, "creation_date": 1557832172, "answer_id": 56129044, "question_id": 56128031, "link": "https://stackoverflow.com/questions/56128031/unsafe-use-of-a-nullable-receiver-type-bundle-android-app-will-compile-with-war/56129044#56129044", "title": "Unsafe use of a nullable receiver type Bundle? android app will compile with warning but instantly crashes", "body": "<p>The <code>data.extras</code> might be null, therefore make sure to use it with <code>?.</code> and <code>as?</code>:</p>\n\n<pre><code>photoImageView.setImageBitmap(data?.extras?.get(\"data\") as? Bitmap)\n</code></pre>\n\n<p>All three make sure that if <code>data</code>, <code>data.extras</code> or <code>\"data\"</code> are null or not a <code>Bitmap</code>, the chain itself is null.</p>\n\n<p>The deprecated Gradle features are usually warnings about deprecated APIs. Just make sure to update all your plugins to the newest ones and don't update to Gradle 6 as long as you require plugins which don't adapt to the new API. But for now it's only warning you about relevant changes.</p>\n"}], "owner": {"reputation": 1053, "user_id": 1828140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c8405635fd5d25e0fc4572eab1af196?s=128&d=identicon&r=PG", "display_name": "pquery", "link": "https://stackoverflow.com/users/1828140/pquery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4911, "favorite_count": 0, "accepted_answer_id": 56129044, "answer_count": 1, "score": 6, "last_activity_date": 1557832172, "creation_date": 1557828801, "question_id": 56128031, "link": "https://stackoverflow.com/questions/56128031/unsafe-use-of-a-nullable-receiver-type-bundle-android-app-will-compile-with-war", "title": "Unsafe use of a nullable receiver type Bundle? android app will compile with warning but instantly crashes", "body": "<p>I am new to kotlin and android programming, and it seems like this language is moving rather quick without some backwads capabilities. </p>\n\n<p>Here are my two main functions in MainActivity.kt </p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    cameraButton.setOnClickListener {\n        val callCameraIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n        if(callCameraIntent.resolveActivity(packageManager) != null) {\n            startActivityForResult(callCameraIntent, CAMERA_REQUEST_CODE)\n        }\n    }\n\n    replaceFragment(ReportsFragment())\n    bottom_navigation.setOnNavigationItemSelectedListener(mOnNavigationItemSelectedListener)\n\n\n}\n\noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n\n    val dt: Intent? = data\n\n    when(requestCode) {\n        CAMERA_REQUEST_CODE -&gt; {\n            if(resultCode == Activity.RESULT_OK &amp;&amp; data != null) {\n            //if(data != null) {\n                //&amp;&amp; data != null){\n                photoImageView.setImageBitmap(data.extras.get(\"data\") as Bitmap)\n            }\n        }\n        else -&gt; {\n            Toast.makeText(this, \"Unrecognized request code\", Toast.LENGTH_SHORT).show()\n        }\n    }\n}\n</code></pre>\n\n<p>The error seems to come in the \"WHEN\" block of onActivityResult. </p>\n\n<p>I have wrapped the data (Intent being passed) in null checks, tried to declare it as a new value with a null check, but it constantly gets the same warning when compiling:</p>\n\n<p>Unsafe use of a nullable receiver of type Bundle?</p>\n\n<p>It also keeps saying this depreciated warning:\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.</p>\n\n<p>I have switched the gradle version to 5.1.1 and have the android Gradle plugin currently at 3.4.0 (could either of these be part of my issue) </p>\n"}, {"tags": ["java", "kotlin", "concurrency"], "comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 2, "creation_date": 1557829542, "post_id": 56127895, "comment_id": 98887805, "body": "Is this getting confused about the lock objects?  In the non-working Kotlin version, <code>@Synchronized</code> locks on the <code>MessageBox</code> instance, but it&#39;s <code>wait()</code>ing on and <code>notify()</code>ing the <code>lock</code> object instead.  This is unlike the Java version, which does everything on the <code>MessageBox</code> instances, and unlike the working Kotlin version, which does everything on the <code>lock</code> object.  (<code>@Synchronized</code> should work exactly as in Java: see <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-synchronized/\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-synchronize&zwnj;&#8203;d</a>)"}, {"owner": {"reputation": 2918, "user_id": 1939370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d0d5448fb6a6685837a16d7b9cff31cf?s=128&d=identicon&r=PG", "display_name": "shadox", "link": "https://stackoverflow.com/users/1939370/shadox"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1557836490, "post_id": 56127895, "comment_id": 98891718, "body": "@gidds so how do I <code>wait</code> and <code>notify</code> on <code>MessageBox</code> instead, in non-working case? I know that MessageBox does not inherit Object&#39;s <code>wait</code> and <code>notify</code> methods and even if I inherit directly from Object it does not work (I&#39;ve tried)."}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 2, "creation_date": 1557837602, "post_id": 56127895, "comment_id": 98892399, "body": "Kotlin&#39;s designers were probably trying to discourage using the low-level monitors at all, as they&#39;re fiddly and error-prone.  There are a couple of ideas in this answer: <a href=\"https://stackoverflow.com/a/44589962/10134209\">stackoverflow.com/a/44589962/10134209</a>.  But I&#39;d recommend seeing whether you can use a higher-level abstraction, such as a BlockingQueue, or the Executor framework, or kotlin.concurrent classes, or actors \u2014 many people have been down this road before!"}, {"owner": {"reputation": 2918, "user_id": 1939370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d0d5448fb6a6685837a16d7b9cff31cf?s=128&d=identicon&r=PG", "display_name": "shadox", "link": "https://stackoverflow.com/users/1939370/shadox"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1557849238, "post_id": 56127895, "comment_id": 98899648, "body": "I&#39;m aware of the alternative but it&#39;s not what I am after. I&#39;m trying to understand what is happening behind the scenes so I actually need to figure out how locking and synchronization works in <b>Kotlin</b>."}, {"owner": {"reputation": 2918, "user_id": 1939370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d0d5448fb6a6685837a16d7b9cff31cf?s=128&d=identicon&r=PG", "display_name": "shadox", "link": "https://stackoverflow.com/users/1939370/shadox"}, "reply_to_user": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1557925432, "post_id": 56127895, "comment_id": 98929440, "body": "@gidds, you were right and I figured out that I&#39;ve made few mistakes when extending <code>Object</code>. I&#39;ve posted my solution."}], "answers": [{"tags": [], "owner": {"reputation": 2918, "user_id": 1939370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d0d5448fb6a6685837a16d7b9cff31cf?s=128&d=identicon&r=PG", "display_name": "shadox", "link": "https://stackoverflow.com/users/1939370/shadox"}, "is_accepted": false, "score": 0, "last_activity_date": 1557924624, "creation_date": 1557924624, "answer_id": 56149793, "question_id": 56127895, "link": "https://stackoverflow.com/questions/56127895/kotlin-illegalmonitorstateexception-in-synchronized-method/56149793#56149793", "title": "Kotlin IllegalMonitorStateException in @Synchronized method", "body": "<p>It seems that indeed <code>@Synchronized</code> locks on <code>MessageBox</code> and it doesn't work only because in Kotlin everything extends <code>Any</code> instead of Java's <code>Object</code>. Although it is not recommended way of doing concurrent programming in <strong>Kotlin</strong>, the solution is to simply extend Object as shown below in <code>MessageBoxLock</code>:</p>\n\n<pre><code>package concurrency.producer_consumer.message_box\n\n@Suppress(\"PLATFORM_CLASS_MAPPED_TO_KOTLIN\")\nclass MessageBoxLock(var message: Long = 0): Object(), SynchronizedBox {\n\n    private var empty = true\n\n    @Synchronized\n    override fun syncIncrement() {\n        while (!empty) {\n            wait()\n        }\n\n        message++\n        empty = false\n        notifyAll()\n    }\n\n    @Synchronized\n    override fun readValue(): Long {\n\n        while (empty) {\n            wait()\n        }\n\n        empty = true\n        notifyAll()\n\n        return message\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1391, "user_id": 4308897, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X67wO4XjVAE/AAAAAAAAAAI/AAAAAAAAADw/NacwJv67gHI/photo.jpg?sz=128", "display_name": "Ercan", "link": "https://stackoverflow.com/users/4308897/ercan"}, "is_accepted": false, "score": 0, "last_activity_date": 1592812054, "creation_date": 1592812054, "answer_id": 62509684, "question_id": 56127895, "link": "https://stackoverflow.com/questions/56127895/kotlin-illegalmonitorstateexception-in-synchronized-method/62509684#62509684", "title": "Kotlin IllegalMonitorStateException in @Synchronized method", "body": "<p>I had similar problem, so instead of annotating with <strong>@Synchronized</strong> keyword, I have changed to <strong>synchronized call</strong> as shown below, and it worked for me.</p>\n<pre><code>private fun produce() = synchronized(lock){\n   ...\n}\n</code></pre>\n<p><strong>Kotlin</strong> code example to look through:</p>\n<pre><code>fun main() {\n    val producer = Producer()\n    producer.name = &quot;PRODUCER-THREAD&quot;\n    producer.start()\n    val consumer = Consumer(producer)\n    consumer.name = &quot;CONSUMER-THREAD&quot;\n    consumer.start()\n}\n\nclass Consumer(private val producer: Producer) : Thread() {\n    override fun run() {\n        try {\n            while (true) {\n                val data = producer.consume()\n                println(&quot;$data consumed by: ${currentThread().name}&quot;)\n            }\n        } catch (e: Exception) {\n            e.printStackTrace()\n        }\n    }\n}\n\nclass Producer : Thread() {\n    override fun run() {\n        try {\n            while (true) produce()\n        } catch (e: Exception) {\n            e.printStackTrace()\n        }\n    }\n\n    private fun produce() = synchronized(lock) {\n        while (messages.size == MAX_SIZE) lock.wait()\n\n        val data = LocalDateTime.now().toString()\n        messages.add(data)\n        println(&quot;Data produced&quot;)\n        lock.notify()\n    }\n\n    fun consume(): String = synchronized(lock) {\n        lock.notify()\n        while (messages.isEmpty()) lock.wait()\n\n        val data = messages[0]\n        println(&quot;Data consumed as: $data&quot;)\n        messages.remove(data)\n        return data\n    }\n\n    companion object {\n        const val MAX_SIZE = 3\n        val lock = Object()\n        val messages = arrayListOf&lt;String&gt;()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2918, "user_id": 1939370, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d0d5448fb6a6685837a16d7b9cff31cf?s=128&d=identicon&r=PG", "display_name": "shadox", "link": "https://stackoverflow.com/users/1939370/shadox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1592812054, "creation_date": 1557828385, "question_id": 56127895, "link": "https://stackoverflow.com/questions/56127895/kotlin-illegalmonitorstateexception-in-synchronized-method", "title": "Kotlin IllegalMonitorStateException in @Synchronized method", "body": "<p>I am trying to reproduce a old-school solution in Kotlin to classic Consumer-Producer problem with multiple threads and shared memory space. In <strong>Java</strong> I would use synchronized methods to access a shared space. In <strong>Kotlin</strong>, however, it seems that <code>@Synchronized</code> annotated method is throwing <code>IllegalMonitorStateException</code>. I was expecting that annotated methods should behave exactly as they do in <strong>Java</strong> but it seems that is not the case. I solved the problem with <code>synchronized(){}</code> function but I'm still puzzled that <code>@Synchronized</code> doesn't work. <strong>Why is that?</strong></p>\n\n<p>In the following code, Producer \"produces\" a new value by incrementing a counter (Long) inside <code>SynchronizedBox</code> and Consumer reads that value then prints it to console.</p>\n\n<p>Kotlin MessageBox that does <strong>not</strong> work</p>\n\n<pre><code>package concurrency.producer_consumer\n\nclass MessageBox(var message: Long = 0): SynchronizedBox {\n    private val lock = Object()\n    private var empty = true\n\n    @Synchronized\n    override fun syncIncrement() {\n        while (!empty) {\n            lock.wait()\n        }\n\n        message++\n        empty = false\n        lock.notifyAll()\n    }\n\n    @Synchronized\n    override fun readValue(): Long {\n          while (empty) {\n              lock.wait()\n          }\n\n          val readValue = message\n          empty = true\n          lock.notifyAll()\n\n          return readValue\n    }\n}\n</code></pre>\n\n<p>Java variant that works:</p>\n\n<pre><code>package concurrency.producer_consumer;\n\npublic class JBox implements SynchronizedBox {\n    private long value = 0;\n    private boolean empty = true;\n\n    @Override\n    public synchronized void syncIncrement() {\n        while (!empty) {\n            try {\n                wait();\n            } catch (InterruptedException e) {\n            }\n        }\n\n        value++;\n        empty = false;\n        notifyAll();\n    }\n\n    @Override\n    public synchronized long readValue() {\n        while (empty) {\n            try {\n                wait();\n            } catch (InterruptedException e) {}\n        }\n\n        empty = true;\n        return value;\n    }\n}\n</code></pre>\n\n<p>Kotlin version that actually works:</p>\n\n<pre><code>package concurrency.producer_consumer\n\nclass MessageBox(var message: Long = 0): SynchronizedBox {\n    private val lock = Object()\n    private var empty = true\n\n    override fun syncIncrement() {\n        synchronized(lock) {\n            while (!empty) {\n                lock.wait()\n            }\n\n            message++\n            empty = false\n            lock.notifyAll()\n        }\n    }\n\n    override fun readValue(): Long {\n        synchronized(lock) {\n            while (empty) {\n                lock.wait()\n            }\n\n            empty = true\n            lock.notifyAll()\n            return message\n        }\n    }\n}\n</code></pre>\n\n<p>Rest of the code:</p>\n\n<p><strong>Consumer</strong>:\n    package concurrency.producer_consumer</p>\n\n<pre><code>class Consumer(private val messageBox: SynchronizedBox): Runnable {\n\n    override fun run() {\n        println(\"consumer thread: ${Thread.currentThread().id}: started\")\n\n        while (true) {\n            println(\"consumer: ${messageBox.readValue()}\")\n            Thread.sleep(1_000)\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Producer</strong>:</p>\n\n<pre><code>class Producer(private val messageBox: SynchronizedBox): Runnable {\n\n    override fun run() {\n        println(\"producer thread: ${Thread.currentThread().id}: started\")\n\n        while (true) {\n            messageBox.syncIncrement()\n            Thread.sleep(1_000)\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Interface</strong></p>\n\n<pre><code>package concurrency.producer_consumer\n\ninterface SynchronizedBox {\n    fun syncIncrement()\n    fun readValue(): Long\n}\n</code></pre>\n\n<p><strong>Launcher</strong></p>\n\n<pre><code>package concurrency.producer_consumer\n\nfun main() {\n    val box: SynchronizedBox = MessageBox()\n    val producer1 = Producer(box)\n    val consumer = Consumer(box)\n\n    val threadP1 = Thread(producer1)\n    val threadC = Thread(consumer)\n\n    threadP1.start()\n    threadC.start()\n}\n</code></pre>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-viewmodel"], "comments": [{"owner": {"reputation": 831, "user_id": 9186913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Zy4cI0njmjQ/AAAAAAAAAAI/AAAAAAAAI14/mwCaW1WNM9E/photo.jpg?sz=128", "display_name": "raj kavadia", "link": "https://stackoverflow.com/users/9186913/raj-kavadia"}, "edited": false, "score": 0, "creation_date": 1557832394, "post_id": 56127631, "comment_id": 98889371, "body": "I think It will go like this <a href=\"https://stackoverflow.com/questions/9398057/android-move-a-view-on-touch-move-action-move\" title=\"android move a view on touch move action move\">stackoverflow.com/questions/9398057/&hellip;</a> it will make it draggable. Basically, it is working on touch listeners like actions."}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1558015948, "post_id": 56127631, "comment_id": 98967676, "body": "It sounds more like a use-case for a <code>RecyclerView</code>. So basically: One fragment. One view model. Several items which are not fragments."}, {"owner": {"reputation": 810, "user_id": 9266283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/788af174dcb871790dc21141a6490328?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/9266283/dinesh"}, "edited": false, "score": 0, "creation_date": 1558433302, "post_id": 56127631, "comment_id": 99090692, "body": "Since the data is the same, having one view model would suffice."}], "owner": {"reputation": 21637, "user_id": 25282, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/9hShk.jpg?s=128&g=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/25282/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1558013365, "creation_date": 1557827635, "last_edit_date": 1558013365, "question_id": 56127631, "link": "https://stackoverflow.com/questions/56127631/how-should-a-draggable-fragment-whose-job-it-is-to-display-content-of-an-object", "title": "How should a draggable fragment whose job it is to display content of an object be setup?", "body": "<p>I have an object <strong>A</strong> which contains a lot of data. It has a counter, a title, a color and a list of other objects. That content is supposed to be displayed in a fragment <strong>F</strong>.</p>\n\n<p>I want to be able to initiate multiple instances of <strong>F</strong> at the same time (my app is designed for tablets, so I have more space then on phones).</p>\n\n<p><strong>A</strong> is intended to be draggable by the user. </p>\n\n<p>What's the best way for me to structure my code? Should each fragment have it's own ViewModel?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 1299, "user_id": 7240806, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155499770477892/picture?type=large", "display_name": "Stephan Hogenboom", "link": "https://stackoverflow.com/users/7240806/stephan-hogenboom"}, "edited": false, "score": 2, "creation_date": 1557826131, "post_id": 56127094, "comment_id": 98885810, "body": "Can you post all your relevant code you have written so far?"}, {"owner": {"reputation": 1, "user_id": 11497386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6u8bp9XRwCY/AAAAAAAAAAI/AAAAAAAAAAc/ev3Ivk129Rg/photo.jpg?sz=128", "display_name": "Joe Mongol", "link": "https://stackoverflow.com/users/11497386/joe-mongol"}, "reply_to_user": {"reputation": 1299, "user_id": 7240806, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155499770477892/picture?type=large", "display_name": "Stephan Hogenboom", "link": "https://stackoverflow.com/users/7240806/stephan-hogenboom"}, "edited": false, "score": 0, "creation_date": 1558001238, "post_id": 56127094, "comment_id": 98958901, "body": "Firstly, Thanks to edit and I have written nothing yet. I just completed prototyping."}], "owner": {"reputation": 1, "user_id": 11497386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6u8bp9XRwCY/AAAAAAAAAAI/AAAAAAAAAAc/ev3Ivk129Rg/photo.jpg?sz=128", "display_name": "Joe Mongol", "link": "https://stackoverflow.com/users/11497386/joe-mongol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557831341, "creation_date": 1557826082, "last_edit_date": 1557831341, "question_id": 56127094, "link": "https://stackoverflow.com/questions/56127094/how-to-write-user-data-directly-into-ms-word-created-cv-template", "title": "How to write user data directly into MS Word created CV Template?", "body": "<p>I created CV Templates in MS Word.\nFed them into an Android App.\nIf a user selects a CV Template a Copy of it will be generated.\nThen User will enter data and it will directly fill the CV Template and positioned data according to template automatically.\nThe Problem is, How can User's entered data directly replace the CV Template's data and positioned accordingly.</p>\n"}, {"tags": ["class", "kotlin", "enums", "interface"], "answers": [{"comments": [{"owner": {"reputation": 1141, "user_id": 532054, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/798d6370021d2bbeae77a6f895074e03?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/532054/lorenzo"}, "edited": false, "score": 0, "creation_date": 1557828016, "post_id": 56127241, "comment_id": 98886941, "body": "Thanks for replying! It does compile when MyEnum is empty, but unfortunately does not when adding cases"}, {"owner": {"reputation": 1141, "user_id": 532054, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/798d6370021d2bbeae77a6f895074e03?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/532054/lorenzo"}, "edited": false, "score": 0, "creation_date": 1557915268, "post_id": 56127241, "comment_id": 98923246, "body": "I would have loved to avoid the valuesInternal() implementation but it does the job, thanks! :)"}, {"owner": {"reputation": 2377, "user_id": 1160959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2c84b77b3b8d07e85f5c7b9e3cdcaa?s=128&d=identicon&r=PG", "display_name": "asm0dey", "link": "https://stackoverflow.com/users/1160959/asm0dey"}, "reply_to_user": {"reputation": 1141, "user_id": 532054, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/798d6370021d2bbeae77a6f895074e03?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/532054/lorenzo"}, "edited": false, "score": 1, "creation_date": 1557924245, "post_id": 56127241, "comment_id": 98928627, "body": "@lorenzo to a pity you can&#39;t make values to be override method and that&#39;s why it won&#39;t work."}], "tags": [], "owner": {"reputation": 2377, "user_id": 1160959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2c84b77b3b8d07e85f5c7b9e3cdcaa?s=128&d=identicon&r=PG", "display_name": "asm0dey", "link": "https://stackoverflow.com/users/1160959/asm0dey"}, "is_accepted": true, "score": 5, "last_activity_date": 1557828338, "last_edit_date": 1557828338, "creation_date": 1557826517, "answer_id": 56127241, "question_id": 56126945, "link": "https://stackoverflow.com/questions/56126945/kotlin-define-interface-for-enum-class-values-method/56127241#56127241", "title": "Kotlin define interface for enum class values method", "body": "<p>You were really close to correct answer. You need to define generic interface and you enum should extend it typed with enum's class like this:</p>\n\n<pre><code>enum class MyEnum : EnumInterface&lt;MyEnum&gt; {\n    A,B,C;\n    override fun valuesInternal() = MyEnum.values()\n}\n\ninterface EnumInterface&lt;T&gt; {    \n    fun valuesInternal():Array&lt;T&gt;\n\n    fun doStuff() {\n        this.valuesInternal()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1141, "user_id": 532054, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/798d6370021d2bbeae77a6f895074e03?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/532054/lorenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "accepted_answer_id": 56127241, "answer_count": 1, "score": 3, "last_activity_date": 1557828338, "creation_date": 1557825692, "question_id": 56126945, "link": "https://stackoverflow.com/questions/56126945/kotlin-define-interface-for-enum-class-values-method", "title": "Kotlin define interface for enum class values method", "body": "<p>if I define an enum class, let's say:</p>\n\n<pre><code>enum class MyEnum { }\n</code></pre>\n\n<p>I can do the following as enum class all have a <code>values</code> method: </p>\n\n<pre><code>val values = MyEnum.values()\n</code></pre>\n\n<p>Now I want my enum to implement an interface and have access to the values() method:</p>\n\n<pre><code>enum class MyEnum : EnumInterface { }\n\ninterface EnumInterface {\n    fun values() : Array&lt;T&gt;\n\n    fun doStuff() {\n        this.values()\n    }\n\n}\n</code></pre>\n\n<p>This doesn't compile and I'm sure how to type the values method. Is it possible to define such interface? Thanks!</p>\n"}, {"tags": ["kotlin", "sonarqube", "jacoco"], "answers": [{"tags": [], "owner": {"reputation": 7743, "user_id": 244993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf0ce44e342943d56f115165b7d78bdd?s=128&d=identicon&r=PG", "display_name": "Godin", "link": "https://stackoverflow.com/users/244993/godin"}, "is_accepted": false, "score": 8, "last_activity_date": 1557851269, "creation_date": 1557851269, "answer_id": 56134830, "question_id": 56126285, "link": "https://stackoverflow.com/questions/56126285/issue-when-trying-to-import-jacoco-code-coverage-to-sonarqube-cannot-import-cov/56134830#56134830", "title": "Issue when trying to import Jacoco code coverage to SonarQube: Cannot import coverage information for file, coverage data is invalid", "body": "<p>Search in Google by keywords <code>sonarqube</code> <code>kotlin</code> <code>jacoco</code> and</p>\n\n<blockquote>\n  <p><code>is out of range in the file</code></p>\n</blockquote>\n\n<p>reveals following page <a href=\"https://community.sonarsource.com/t/sonar-kotlin-coverage-fails-due-to-line-is-out-of-range-errors/3201/18\" rel=\"noreferrer\">https://community.sonarsource.com/t/sonar-kotlin-coverage-fails-due-to-line-is-out-of-range-errors/3201/18</a> , which states that problem was fixed in JaCoCo version <code>0.8.3</code> And which contains link to page <a href=\"https://github.com/jacoco/jacoco/issues/763\" rel=\"noreferrer\">https://github.com/jacoco/jacoco/issues/763</a> , which in its turn contains quite expressive explanation of problem, including explanations of why it affects SonarQube.</p>\n\n<p>So make sure that you use JaCoCo version <code>0.8.3</code> or even better latest <code>0.8.4</code>.</p>\n"}], "owner": {"reputation": 1252, "user_id": 3886934, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/81c4c9b2643f28cb7887251cce6b73c6?s=128&d=identicon&r=PG&f=1", "display_name": "rerashhh", "link": "https://stackoverflow.com/users/3886934/rerashhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1365, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1557851269, "creation_date": 1557823267, "last_edit_date": 1557823585, "question_id": 56126285, "link": "https://stackoverflow.com/questions/56126285/issue-when-trying-to-import-jacoco-code-coverage-to-sonarqube-cannot-import-cov", "title": "Issue when trying to import Jacoco code coverage to SonarQube: Cannot import coverage information for file, coverage data is invalid", "body": "<p>I'm having some issues when trying to import Jacoco code coverage to SonarQube.</p>\n\n<p>I am using SonarQube with Jacoco for importing test coverage results (<a href=\"https://docs.sonarqube.org/display/PLUG/Java+Unit+Tests+and+Coverage+Results+Import\" rel=\"noreferrer\">https://docs.sonarqube.org/display/PLUG/Java+Unit+Tests+and+Coverage+Results+Import</a>). Everything has worked well until i have <strong>forEach</strong> block in some method.</p>\n\n<pre><code>ERROR: Cannot import coverage information for file, coverage data is invalid. \njava.lang.IllegalStateException: Line 29 is out of range in the file (lines: 28)\n</code></pre>\n\n<p>If I remove <strong>forEach</strong> file then test coverage is correctly generated, but with <strong>forEach</strong> I get 0% coverage.</p>\n\n<p>This happens only when i integrate it with sonarqube, if i run jacoco locally it works perfectly.</p>\n\n<p>We use SonarQube Scanner 3.3.0.1492, SonarQube server 7.5.0.</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 1742, "user_id": 2642024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ifi9n.jpg?s=128&g=1", "display_name": "finki", "link": "https://stackoverflow.com/users/2642024/finki"}, "edited": false, "score": 0, "creation_date": 1557823658, "post_id": 56126135, "comment_id": 98884509, "body": "Your application module is very, very, very small. Don&#39;t worry. What does App.getInstance() do? You are not supposed to get the current app instance like that. share the whole code if you want help"}, {"owner": {"reputation": 707, "user_id": 10742340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t545m.jpg?s=128&g=1", "display_name": "KirstenLy", "link": "https://stackoverflow.com/users/10742340/kirstenly"}, "reply_to_user": {"reputation": 1742, "user_id": 2642024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ifi9n.jpg?s=128&g=1", "display_name": "finki", "link": "https://stackoverflow.com/users/2642024/finki"}, "edited": false, "score": 0, "creation_date": 1557824594, "post_id": 56126135, "comment_id": 98884975, "body": "Ok, i extended my answer, added code on <code>App</code> class, extended MainActivity and added presenter. Another classes are completed. It&#39;s too large code, so i afraid nobody will read it, so i cut it. =)"}, {"owner": {"reputation": 1742, "user_id": 2642024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ifi9n.jpg?s=128&g=1", "display_name": "finki", "link": "https://stackoverflow.com/users/2642024/finki"}, "edited": false, "score": 0, "creation_date": 1557845250, "post_id": 56126135, "comment_id": 98897303, "body": "Add the stacktrace of the crash, we have no idea what the error is!"}], "answers": [{"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": false, "score": 0, "last_activity_date": 1557885260, "creation_date": 1557885260, "answer_id": 56140797, "question_id": 56126135, "link": "https://stackoverflow.com/questions/56126135/why-i-crushed-with-lateinit-property-injector-has-not-been-initialized/56140797#56140797", "title": "Why i crushed with &quot;lateinit property injector has not been initialized&quot;?", "body": "<pre><code>override fun onCreate() {\n    super.onCreate()\n    instance = this\n</code></pre>\n\n<p>And also you should replace the <code>getInstance()</code> with just <code>instance!!</code> because you should not try to create your own <code>App</code> instance.</p>\n"}], "owner": {"reputation": 707, "user_id": 10742340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t545m.jpg?s=128&g=1", "display_name": "KirstenLy", "link": "https://stackoverflow.com/users/10742340/kirstenly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557885260, "creation_date": 1557822749, "last_edit_date": 1557824285, "question_id": 56126135, "link": "https://stackoverflow.com/questions/56126135/why-i-crushed-with-lateinit-property-injector-has-not-been-initialized", "title": "Why i crushed with &quot;lateinit property injector has not been initialized&quot;?", "body": "<p>Learning Dagger 2, do it by Guide.</p>\n\n<p>I create <code>injector</code> on my App(extended Application):</p>\n\n<pre><code>class App : Application() {\n    lateinit var injector: ApplicationComponent\n\n    override fun onCreate() {\n        super.onCreate()\n\n        injector = DaggerApplicationComponent\n            .builder()\n            .applicationModule(ApplicationModule(getInstance()))\n            .build()\n\n        if (BuildConfig.DEBUG) {\n            Timber.plant(Timber.DebugTree())\n        }\n\n        JodaTimeAndroid.init(this)\n    }\n\n    companion object {\n\n        private var instance: App? = null\n\n        fun getInstance(): App {\n            if (instance == null) {\n                instance = App()\n            }\n            return instance as App\n        }\n    }\n}\n</code></pre>\n\n<p>After that, i write on Activity:</p>\n\n<pre><code>@Inject\nlateinit var mainPresenter: MainPresenter\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        sharedViewModel = ViewModelProviders.of(this).get(SharedViewModel::class.java)\n        App.getInstance().injector.inject(this)\n        mainPresenter.init(this)\n        mainPresenter.getData()\n    }\n</code></pre>\n\n<p>And crushed. What do i wrong?</p>\n\n<p>ApplicationComponent:</p>\n\n<pre><code>@Singleton\n@Component(modules = [ApplicationModule::class])\ninterface ApplicationComponent {\n\n    fun inject(mainActivity: MainActivity)\n\n    val db: TestDatabase\n}\n</code></pre>\n\n<p>My applicationModule is big, i want to do many things on one module while learning. Here it is:</p>\n\n<pre><code>@Module\nclass ApplicationModule(private val app: App) {\n\n    private var db: EmployeeDatabase = Room\n        .databaseBuilder(\n            app,\n            TestDatabase::class.java,\n            TestDatabase.DATABASE_NAME.plus(\".db\")\n        )\n        .fallbackToDestructiveMigration()\n        .allowMainThreadQueries()\n        .build()\n\n\n    @Provides\n    @Singleton\n    fun provideApplication(): App {\n        return app\n    }\n\n    @Provides\n    @Singleton\n    fun provideMainViewPresenter(): MainPresenter = MainPresenter(db)\n\n    @Singleton\n    @Provides\n    internal fun providesRoomDatabase(): EmployeeDatabase {\n        return db\n    }\n}\n</code></pre>\n\n<p>MainPresenter:</p>\n\n<pre><code>class MainPresenter @Inject constructor(private var db: TestDatabase) {\n\n    private var mainActivity: MainView? = null\n    private val apiService = ApiService.create()\n\n    fun init(mainView: MainView) {\n        mainActivity = mainView\n    }\n\n    fun getData() {\n        ...some database logic\n    }\n\n    fun onDestroy() {\n        mainActivity = null\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-adapter", "android-recyclerview"], "comments": [{"owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "edited": false, "score": 0, "creation_date": 1557823174, "post_id": 56125945, "comment_id": 98884273, "body": "You are attaching the wrong layoutmanager to another recyclerview. Use another layoutmanager"}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "reply_to_user": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "edited": false, "score": 0, "creation_date": 1557827015, "post_id": 56125945, "comment_id": 98886356, "body": "@sanjeev, i used GridLayoutManager , but again show me error!"}, {"owner": {"reputation": 419, "user_id": 4958351, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZxzO7OcPByw/AAAAAAAAAAI/AAAAAAAAAXw/9TL_toKfeOo/photo.jpg?sz=128", "display_name": "AIMIN PAN", "link": "https://stackoverflow.com/users/4958351/aimin-pan"}, "edited": false, "score": 0, "creation_date": 1557827156, "post_id": 56125945, "comment_id": 98886446, "body": "where is layoutManager used? it seems can be removed completely, Adapter should not keep a layout manager."}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "reply_to_user": {"reputation": 419, "user_id": 4958351, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZxzO7OcPByw/AAAAAAAAAAI/AAAAAAAAAXw/9TL_toKfeOo/photo.jpg?sz=128", "display_name": "AIMIN PAN", "link": "https://stackoverflow.com/users/4958351/aimin-pan"}, "edited": false, "score": 0, "creation_date": 1557827267, "post_id": 56125945, "comment_id": 98886509, "body": "@AIMINPAN, for adapter one, i initialize layout manager into fragment. and for fragment two i initialize layout manager into adapter one! can you help me?"}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557827641, "post_id": 56127552, "comment_id": 98886715, "body": "when use your above code again show me ForceClose error! but this code : <code>recyclerview.setLayoutManager(new LinearLayoutManager(MyActivity.this));</code> such as <code>layoutManager = object : LinearLayoutManager(context) {     override fun canScrollVertically(): Boolean {         return false     } }</code> ! this way slowly scroll items!"}, {"owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "reply_to_user": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557827755, "post_id": 56127552, "comment_id": 98886788, "body": "use <code>layoutManager</code> for one and <code>layoutManager1</code> for another!"}, {"owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "reply_to_user": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557827989, "post_id": 56127552, "comment_id": 98886920, "body": "<code>DashboardCardsOrderAdapter</code> is using the same <code>layoutManager</code>"}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557828398, "post_id": 56127552, "comment_id": 98887154, "body": "yes my friend i know this. but layoutManager write into fragment and layoutManager1 write into adapter!"}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557828693, "post_id": 56127552, "comment_id": 98887331, "body": "Please see my update post. into <code>activity</code> i have <code>DashboardCardsAdapter</code> and for this i set layout manager. and i used <code>DashboardListAdapter</code> into <code>DashboardCardsAdapter</code> and for new adapter i set layout manager into <code>DashboardCardsAdapter</code> !"}, {"owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "reply_to_user": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557829139, "post_id": 56127552, "comment_id": 98887594, "body": "What is <code>it</code> in <code>holder.orderList.initRecyclerView(it, adapter)</code>?"}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557829437, "post_id": 56127552, "comment_id": 98887747, "body": "In fact, it&#39;s the layer manager! i used it for nullPointerException! do you know how can i fix it?"}, {"owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "reply_to_user": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557830012, "post_id": 56127552, "comment_id": 98888041, "body": "This might be of some help to you! <a href=\"https://android.jlelse.eu/easily-adding-nested-recycler-view-in-android-a7e9f7f04047\" rel=\"nofollow noreferrer\">android.jlelse.eu/&hellip;</a>"}, {"owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "edited": false, "score": 0, "creation_date": 1557833488, "post_id": 56127552, "comment_id": 98889993, "body": "are you here my friend?"}], "tags": [], "owner": {"reputation": 1567, "user_id": 6514945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398d6be564abcee477d6d7244339c9f4?s=128&d=identicon&r=PG&f=1", "display_name": "sanjeev", "link": "https://stackoverflow.com/users/6514945/sanjeev"}, "is_accepted": true, "score": 0, "last_activity_date": 1557827415, "creation_date": 1557827415, "answer_id": 56127552, "question_id": 56125945, "link": "https://stackoverflow.com/questions/56125945/how-to-use-recyclerview-into-another-recyclerviews-adapter-in-android/56127552#56127552", "title": "How to use RecyclerView into another RecyclerView&#39;s adapter in Android?", "body": "<p>You have defined this:</p>\n\n<pre><code>private var layoutManager: LinearLayoutManager? = null\n</code></pre>\n\n<p>Define another one say, </p>\n\n<pre><code>private var layoutManager1: LinearLayoutManager? = null\n</code></pre>\n\n<p>Assign that to your second <code>RecyclerView</code> and run it. It should work.</p>\n\n<p>P.S: Not familiar with <code>Kotlin</code>, in Java we use </p>\n\n<p><code>recyclerview.setLayoutManager(new LinearLayoutManager(MyActivity.this));</code></p>\n"}], "owner": {"reputation": 219, "user_id": 11011419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce63c72f911e7187904df962263ba4c7?s=128&d=identicon&r=PG&f=1", "display_name": "KokoBand", "link": "https://stackoverflow.com/users/11011419/kokoband"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 56127552, "answer_count": 1, "score": 0, "last_activity_date": 1557828605, "creation_date": 1557822083, "last_edit_date": 1557828605, "question_id": 56125945, "link": "https://stackoverflow.com/questions/56125945/how-to-use-recyclerview-into-another-recyclerviews-adapter-in-android", "title": "How to use RecyclerView into another RecyclerView&#39;s adapter in Android?", "body": "<p>In my application i have one list and into this this i have another list!(I know this is bad idea for UI but i should develop this!)<br>\nFor show this lists i used <code>RecyclerView</code> and initialize other <code>RecyclerView</code> into previous <code>RecyclerView</code> <strong>adapter</strong>!<br></p>\n\n<p><strong>Activity codes:</strong></p>\n\n<pre><code>class DashboardCardsActivity : BaseActivity(), DashboardCardsContracts.View {\n\n    @NonNull\n    private lateinit var presenter: DashboardCardsPresenterImpl\n    private var context: Context = this\n    private lateinit var recyclerView: RecyclerView\n    private lateinit var adapter: DashboardCardsAdapter\n    private lateinit var layoutManager: LinearLayoutManager\n    private val modelList: MutableList&lt;UserPackageOrderResponse.Res.UserPackageOrder&gt; = mutableListOf()\n    private var isLoadingFlag = false\n    private var isHasLoadedAll = false\n    private var nextPage = 1\n    //Token\n    private var token = GoodPrefs.getInstance().getString(PrefsKey.USER_JWT_TOKEN.name, \"\")\n\n    override var layoutId: Int = R.layout.activity_dashboard_cards\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        //Initialize\n        context = this\n        presenter = DashboardCardsPresenterImpl(context, this)\n        layoutManager = LinearLayoutManager(context)\n        adapter = DashboardCardsAdapter(context, modelList)\n        //Init recyclerView\n        recyclerView = dashboardCards_pullList.recyclerView\n        recyclerView.initRecyclerView(layoutManager, adapter)\n        //Set image to loader\n        dashboardCards_pullList.setColorSchemeResources(R.color.colorAccent)\n        //Init toolbar\n        toolbarBase_toolbar.title = getString(R.string.basketCard)\n        toolbarBase_toolbar.setToolbarBackWithFinish(this)\n        //Call api\n        getLazyPullLoader()\n    }\n</code></pre>\n\n<p><strong>I write below codes :</strong> </p>\n\n<pre><code>class DashboardListAdapter constructor(\n    val context: Context, val model: MutableList&lt;UserPackageOrderResponse.Res.UserPackageOrder&gt;\n) : RecyclerView.Adapter&lt;DashboardCardsAdapter.ViewHolder&gt;() {\n\n    private var expansionlayout: ExpansionLayoutCollection = ExpansionLayoutCollection()\n    private lateinit var registerTimeUtil: TimeUtils\n    private var registerDateSplit: List&lt;String&gt; = emptyList()\n    private var registerDate: List&lt;String&gt; = emptyList()\n    private var orderState: String = \"\"\n    private var layoutManager: LinearLayoutManager? = null\n    private var adapter: DashboardCardsOrderAdapter\n    private val orderModelList: MutableList&lt;UserPackageOrderResponse.Res.UserPackageOrder.Order&gt; = mutableListOf()\n\n    init {\n        expansionlayout.openOnlyOne(true)\n        layoutManager = object : LinearLayoutManager(context) {\n            override fun canScrollVertically(): Boolean {\n                return false\n            }\n        }\n        adapter = DashboardCardsOrderAdapter(orderModelList)\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        val inflater = LayoutInflater.from(parent.context)\n        return ViewHolder(inflater.inflate(R.layout.row_dashboard_card_list, parent, false))\n    }\n\n    override fun getItemCount(): Int {\n        return model.size\n    }\n\n    @SuppressLint(\"SetTextI18n\")\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        expansionlayout.add(holder.getExpansions())\n        //header\n        holder.orderNumber.text = model[position].hashcode\n        holder.rowNumber.text = \"${position + 1}\"\n        //Set date\n        registerDateSplit = model[position].createdAt.split(\" \")\n        registerDate = registerDateSplit[0].split(\"-\")\n        registerTimeUtil = TimeUtils(registerDate[0].toInt(), registerDate[1].toInt(), registerDate[2].toInt())\n        holder.orderRegisterDate.text = registerTimeUtil.getIranianDate()\n        //Order state\n        orderState = model[position].status\n        holder.setViewWithState(orderState, context)\n        //Content prices\n        holder.finalPrice.text = \"${model[position].price.moneySeparating()} ${context.getString(R.string.toman)}\"\n        holder.paymentPrice.text = \"${model[position].price.moneySeparating()} ${context.getString(R.string.toman)}\"\n        holder.postPrice.text = \"${model[position].postFee.moneySeparating()} ${context.getString(R.string.toman)}\"\n        holder.discountPrice.text = \"${model[position].discount.moneySeparating()} ${context.getString(R.string.toman)}\"\n        //init order list\n        orderModelList.clear()\n        orderModelList.addAll(model[position].orders)\n        layoutManager?.let {\n            holder.orderList.initRecyclerView(it, adapter)\n        }\n    }\n}\n</code></pre>\n\n<p>But when running application show me <strong>ForceClose</strong> error and show me below message in <strong>logCat</strong> : </p>\n\n<pre><code>java.lang.IllegalArgumentException: LayoutManager com.app.android.ui.home.fragments.dashboard.activities.carts_list.DashboardCardsAdapter$1@d33c634 is already attached to a RecyclerView: androidx.recyclerview.widget.RecyclerView{5a76c5d VFED..... ......ID 0,0-682,178 #7f080089 app:id/dashboardCard_orderList}, adapter:com.app.android.ui.home.fragments.dashboard.activities.carts_list.DashboardCardsOrderAdapter@83ba9d2, layout:com.app.android.ui.home.fragments.dashboard.activities.carts_list.DashboardCardsAdapter$1@d33c634, context:com.app.android.ui.home.fragments.dashboard.activities.carts_list.DashboardCardsActivity@79c2f05\n        at androidx.recyclerview.widget.RecyclerView.setLayoutManager(RecyclerView.java:1340)\n        at com.app.android.utils.ExtensionsKt.initRecyclerView(Extensions.kt:74)\n        at com.app.android.ui.home.fragments.dashboard.activities.carts_list.DashboardCardsAdapter.onBindViewHolder(DashboardCardsAdapter.kt:77)\n        at com.app.android.ui.home.fragments.dashboard.activities.carts_list.DashboardCardsAdapter.onBindViewHolder(DashboardCardsAdapter.kt:22)\n        at androidx.recyclerview.widget.RecyclerView$Adapter.onBindViewHolder(RecyclerView.java:6781)\n        at androidx.recyclerview.widget.RecyclerView$Adapter.bindViewHolder(RecyclerView.java:6823)\n</code></pre>\n\n<p>But after change my code with below case not show me any error, but <strong>scrolling is very slowly and show lag</strong>!</p>\n\n<pre><code>//init order list\norderModelList.clear()\norderModelList.addAll(model[position].orders)\nlayoutManager = object : LinearLayoutManager(context) {\n    override fun canScrollVertically(): Boolean {\n        return false\n    }\n}\nlayoutManager?.let {\n    holder.orderList.initRecyclerView(it, adapter)\n}\n</code></pre>\n\n<p>I initialized <code>layoutManager</code> in <code>onBindView()</code>, then not show me error but show me many lag when scrolling on items!</p>\n\n<p>How can i fix this?</p>\n"}, {"tags": ["android", "performance", "kotlin", "android-memory"], "comments": [{"owner": {"reputation": 405, "user_id": 6376080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5e9YY.jpg?s=128&g=1", "display_name": "Nick Bapu", "link": "https://stackoverflow.com/users/6376080/nick-bapu"}, "edited": false, "score": 0, "creation_date": 1557820276, "post_id": 56125345, "comment_id": 98882838, "body": "Well if there is possible to using object is good then class in Kotlin! But don&#39;t ask this type of question in stack overflow like difference between and/or which is best!!"}, {"owner": {"reputation": 439, "user_id": 8487610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Al5yy.jpg?s=128&g=1", "display_name": "Darari Nur Amali", "link": "https://stackoverflow.com/users/8487610/darari-nur-amali"}, "reply_to_user": {"reputation": 405, "user_id": 6376080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5e9YY.jpg?s=128&g=1", "display_name": "Nick Bapu", "link": "https://stackoverflow.com/users/6376080/nick-bapu"}, "edited": false, "score": 0, "creation_date": 1557820685, "post_id": 56125345, "comment_id": 98883026, "body": "@NickBapu Well, where should I ask this type of question? I want to know about best practice for that, and I think this question can have a certain answer which referred from documentation or something I didn&#39;t know."}, {"owner": {"reputation": 405, "user_id": 6376080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5e9YY.jpg?s=128&g=1", "display_name": "Nick Bapu", "link": "https://stackoverflow.com/users/6376080/nick-bapu"}, "edited": false, "score": 0, "creation_date": 1557820863, "post_id": 56125345, "comment_id": 98883113, "body": "Ask this type of question in <a href=\"https://www.quora.com/\" rel=\"nofollow noreferrer\">Quora</a> or in other sites."}], "answers": [{"tags": [], "owner": {"reputation": 12288, "user_id": 5699956, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f8a27337886706b303e88cf00edb24e?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/5699956/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1557824909, "creation_date": 1557824909, "answer_id": 56126664, "question_id": 56125345, "link": "https://stackoverflow.com/questions/56125345/android-performance-comparison-object-vs-class-in-kotlin/56126664#56126664", "title": "Android Performance Comparison: Object vs Class in Kotlin", "body": "<blockquote>\n  <p>Does using Class can make memory used lower because it can be cleaned\n  using Garbage Collector? Or it doesn't?</p>\n</blockquote>\n\n<p>Objects are very similar to classes. If you just want some utility functions then it makes sense to use <code>object</code> or just top-level functions because <code>object</code> will be initialized only once while if you are using a <code>class</code>, whenever you want to use any function you will have to initialize it which is certainly not a good practice at all and bad for performance.</p>\n\n<p>To read more about the difference between these two, <a href=\"https://stackoverflow.com/a/47706264/5699956\">check this answer</a></p>\n"}], "owner": {"reputation": 439, "user_id": 8487610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Al5yy.jpg?s=128&g=1", "display_name": "Darari Nur Amali", "link": "https://stackoverflow.com/users/8487610/darari-nur-amali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1557824909, "creation_date": 1557819956, "question_id": 56125345, "link": "https://stackoverflow.com/questions/56125345/android-performance-comparison-object-vs-class-in-kotlin", "title": "Android Performance Comparison: Object vs Class in Kotlin", "body": "<p>I want to know the performance comparison when using function inside a Class and inside an Object in Kotlin. As far as I know, Object was singleton and Class wasn't. </p>\n\n<p><strong>For Example</strong></p>\n\n<pre><code>Object engine {\n   fun doSomethingOften(){\n   // Here the function which oftenly called\n   }\n\n   fun doSomethingRare(){\n   // Here the function which rarely called\n   }\n}\n</code></pre>\n\n<p><strong>VS</strong></p>\n\n<pre><code>Class engine {\n   fun doSomethingOften(){\n   // Here the function which oftenly called\n   }\n\n   fun doSomethingRare(){\n   // Here the function which rarely called\n   }\n}\n</code></pre>\n\n<p>Which was better in memory management?</p>\n\n<p>Does using Class can make memory used lower because it can be cleaned using Garbage Collector? Or it doesn't?</p>\n\n<p>Can someone help me about this?</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 69302, "user_id": 542270, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DJlop.jpg?s=128&g=1", "display_name": "Opal", "link": "https://stackoverflow.com/users/542270/opal"}, "edited": false, "score": 0, "creation_date": 1557814699, "post_id": 56123422, "comment_id": 98880116, "body": "Isn&#39;t it just the problem of dependencies between <code>compileTestKotlin</code> and <code>compileTestGroovy</code> tasks?"}, {"owner": {"reputation": 3602, "user_id": 20391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26a659183b1f5de95b06bf365bf9836b?s=128&d=identicon&r=PG", "display_name": "Pavel Bernshtam", "link": "https://stackoverflow.com/users/20391/pavel-bernshtam"}, "reply_to_user": {"reputation": 69302, "user_id": 542270, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DJlop.jpg?s=128&g=1", "display_name": "Opal", "link": "https://stackoverflow.com/users/542270/opal"}, "edited": false, "score": 0, "creation_date": 1557822079, "post_id": 56123422, "comment_id": 98883705, "body": "No, I see that compileTestKotlin  happens earlier than compileTestGroovy"}, {"owner": {"reputation": 3602, "user_id": 20391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26a659183b1f5de95b06bf365bf9836b?s=128&d=identicon&r=PG", "display_name": "Pavel Bernshtam", "link": "https://stackoverflow.com/users/20391/pavel-bernshtam"}, "reply_to_user": {"reputation": 69302, "user_id": 542270, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DJlop.jpg?s=128&g=1", "display_name": "Opal", "link": "https://stackoverflow.com/users/542270/opal"}, "edited": false, "score": 0, "creation_date": 1557822151, "post_id": 56123422, "comment_id": 98883736, "body": "&gt; Task :web:compileTestKotlin &gt; Task :web:compileTestJava NO-SOURCE &gt; Task :web:compileTestGroovy"}, {"owner": {"reputation": 69302, "user_id": 542270, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DJlop.jpg?s=128&g=1", "display_name": "Opal", "link": "https://stackoverflow.com/users/542270/opal"}, "edited": false, "score": 0, "creation_date": 1557822459, "post_id": 56123422, "comment_id": 98883898, "body": "Do you haven a SSCCE?"}], "answers": [{"tags": [], "owner": {"reputation": 3602, "user_id": 20391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26a659183b1f5de95b06bf365bf9836b?s=128&d=identicon&r=PG", "display_name": "Pavel Bernshtam", "link": "https://stackoverflow.com/users/20391/pavel-bernshtam"}, "is_accepted": true, "score": 2, "last_activity_date": 1557830077, "creation_date": 1557830077, "answer_id": 56128450, "question_id": 56123422, "link": "https://stackoverflow.com/questions/56123422/gradle-dependencies-between-test-directories/56128450#56128450", "title": "Gradle - Dependencies between test directories", "body": "<p>I solved it by adding </p>\n\n<pre><code> compileTestGroovy.classpath += files(compileTestKotlin.destinationDir)\n</code></pre>\n"}], "owner": {"reputation": 3602, "user_id": 20391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26a659183b1f5de95b06bf365bf9836b?s=128&d=identicon&r=PG", "display_name": "Pavel Bernshtam", "link": "https://stackoverflow.com/users/20391/pavel-bernshtam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "closed_date": 1598777282, "accepted_answer_id": 56128450, "answer_count": 1, "score": 1, "last_activity_date": 1598626877, "creation_date": 1557810929, "last_edit_date": 1557841411, "question_id": 56123422, "link": "https://stackoverflow.com/questions/56123422/gradle-dependencies-between-test-directories", "closed_reason": "Duplicate", "title": "Gradle - Dependencies between test directories", "body": "<p>I have test/groovy and test/kotlin in my gradle project</p>\n\n<p>How do I tell that in compilation and test running classes in test/groovy depend on classes in test/kotlin?</p>\n\n<p>Example project: \nbuild.gradle</p>\n\n<pre><code>plugins {\n    id 'groovy'\n    id 'java'\n    id 'org.jetbrains.kotlin.jvm' version '1.3.31'\n}\n\ngroup 'test'\nversion '1.0-SNAPSHOT'\n\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile 'org.codehaus.groovy:groovy-all:2.5.1'\n    testCompile group: 'org.spockframework', name: 'spock-core', version:     \"1.3-RC1-groovy-2.5\"\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk8\"\n    testCompile group: 'junit', name: 'junit', version: '4.12'\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n\n<p>Groovy class in src/test/groovy:</p>\n\n<pre><code>import spock.lang.Specification\n\nclass SomeSpec extends Specification {\n    def test1(){\n        when:\n        def c = new SomeClass()\n        then:\n        1 == 1\n    }\n}\n</code></pre>\n\n<p>Kotlin class in src/test/kotlin</p>\n\n<pre><code>class SomeClass {\n}\n</code></pre>\n\n<p>I see that kotlin compiled before Groovy, but still build fails:</p>\n\n<pre><code>&gt; Task :assemble UP-TO-DATE\n&gt; Task :compileTestKotlin UP-TO-DATE\n&gt; Task :compileTestJava NO-SOURCE\n\n&gt; Task :compileTestGroovy FAILED\nWARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by org.codehaus.groovy.vmplugin.v7.Java7$1     (file:/C:/Users/User/.gradle/caches/modules-2/files-    2.1/org.codehaus.groovy/groovy/2.5.4/86b94e2949bcff3a13b7ad200e4c5299b52ad994/groovy-2.5.4.jar) to constructor     java.lang.invoke.MethodHandles$Lookup(java.lang.Class,int)\nWARNING: Please consider reporting this to the maintainers of     org.codehaus.groovy.vmplugin.v7.Java7$1\nWARNING: Use --illegal-access=warn to enable warnings of further illegal         reflective access operations\nWARNING: All illegal access operations will be denied in a future release\n startup failed:\nC:\\work\\test-gradle\\src\\test\\groovy\\SomeSpec.groovy: 6: unable to resolve     class SomeClass \n @ line 6, column 17.\n           def c = new SomeClass()\n               ^\n\n1 error\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 2246, "user_id": 9038584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/POPil.jpg?s=128&g=1", "display_name": "Tenten Ponce", "link": "https://stackoverflow.com/users/9038584/tenten-ponce"}, "edited": false, "score": 0, "creation_date": 1557810139, "post_id": 56123205, "comment_id": 98878571, "body": "Other than performance, I guess nested recyclerview are not good in terms of UX, what you can do is redirect the comment to another dialog or activity, and render the comments recyclerview there."}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1557816381, "post_id": 56123205, "comment_id": 98880913, "body": "Have you tried anything?"}, {"owner": {"reputation": 157, "user_id": 6593123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243502142350516/picture?type=large", "display_name": "Jaylers", "link": "https://stackoverflow.com/users/6593123/jaylers"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1557853159, "post_id": 56123205, "comment_id": 98901521, "body": "@Piyush &quot;While I&#39;m using Nested RecyclerView it lags and slow if a lot of product, comment, order and reply to display&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 6593123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243502142350516/picture?type=large", "display_name": "Jaylers", "link": "https://stackoverflow.com/users/6593123/jaylers"}, "edited": false, "score": 1, "creation_date": 1557915033, "post_id": 56124978, "comment_id": 98923103, "body": "&quot;use paging inside all nested views&quot; best solution that I can do for now. I can&#39;t fight with the customer. They also ask me for the another way of handle list of data too. So. pagination is the answer. thank you."}], "tags": [], "owner": {"reputation": 775, "user_id": 5550768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t4f0T.jpg?s=128&g=1", "display_name": "Erythrozyt", "link": "https://stackoverflow.com/users/5550768/erythrozyt"}, "is_accepted": false, "score": 3, "last_activity_date": 1557818489, "creation_date": 1557818489, "answer_id": 56124978, "question_id": 56123205, "link": "https://stackoverflow.com/questions/56123205/is-there-another-solutions-instead-of-nested-recyclerview/56124978#56124978", "title": "Is there another solutions instead of nested Recyclerview", "body": "<p>Nested Recyclerviews are a bad practice in the material design or google app design guidelines. You will have trouble with a bad and wrong scroll behaviour, it is simply not possible to work with this fluently as a user. Also your views will not be recycled and if your content grows the app will act very slow! There are workarounds but it is all a bad practice and more a bad design. You should inform your customers because there are not aware of those design failures and the technical bottlenecks.</p>\n\n<p>A better way would be to enable to collapse the nested views. And just scroll the whole view or to use paging inside all nested views.</p>\n"}, {"tags": [], "owner": {"reputation": 3793, "user_id": 1023597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OIGyn.png?s=128&g=1", "display_name": "Vishal Pawar", "link": "https://stackoverflow.com/users/1023597/vishal-pawar"}, "is_accepted": false, "score": 0, "last_activity_date": 1557834595, "creation_date": 1557834595, "answer_id": 56129777, "question_id": 56123205, "link": "https://stackoverflow.com/questions/56123205/is-there-another-solutions-instead-of-nested-recyclerview/56129777#56129777", "title": "Is there another solutions instead of nested Recyclerview", "body": "<p>Use this cool library <a href=\"https://github.com/lisawray/groupie\" rel=\"nofollow noreferrer\">https://github.com/lisawray/groupie</a> you can find implementation details here <a href=\"https://medium.com/@pedrocarrillo/comments-in-a-recylcerview-e7537235cd33\" rel=\"nofollow noreferrer\">https://medium.com/@pedrocarrillo/comments-in-a-recylcerview-e7537235cd33</a></p>\n"}], "owner": {"reputation": 157, "user_id": 6593123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243502142350516/picture?type=large", "display_name": "Jaylers", "link": "https://stackoverflow.com/users/6593123/jaylers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1561107043, "creation_date": 1557809529, "last_edit_date": 1561107043, "question_id": 56123205, "link": "https://stackoverflow.com/questions/56123205/is-there-another-solutions-instead-of-nested-recyclerview", "title": "Is there another solutions instead of nested Recyclerview", "body": "<p>Now my code is about <code>Nested RecyclerView</code> for 3 layer example</p>\n\n<ul>\n<li><code>RecyclerView</code> of Product have</li>\n<li><code>RecyclerView</code> of comment and order inside and both also have</li>\n<li><code>RecyclerView</code> of reply|COMMENT in comment and order too.</li>\n</ul>\n\n<p>The customer wants this.</p>\n\n<p>Is there another solutions to handle this with good performance.</p>\n\n<p>While I'm using Nested <code>RecyclerView</code> it lags and slow if a lot of product, comment, order and reply to display</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1557839720, "post_id": 56122820, "comment_id": 98893763, "body": "I&#39;ll try it once I have a chance to translate it to Kotlin and get it to compile. Dropping your code (although I think you just copy-pasted Google&#39;s sample code that I have already seen dozens of times) in and commenting my code out, it errors out when I try to open the dialog. Just FYI when you posted this, it was 2am my time. You didn&#39;t need to follow up five hours later wondering if I&#39;d tried your code yet :) And now I have to take my kids to school, so give me some more time :) Thanks."}, {"owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1557839974, "post_id": 56122820, "comment_id": 98893924, "body": "OK Just saw the <code>android.R.layout.simple_dropdown_item_1line</code> part, which I know I&#39;d seen a bunch yesterday because all day yesterday for like five hours I just read sample code all over the internet puzzling why mine wasn&#39;t working. :P"}], "answers": [{"comments": [{"owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "edited": false, "score": 1, "creation_date": 1557838960, "post_id": 56125352, "comment_id": 98893266, "body": "When you register onItemClick it automatically becomes clickable=&quot;true&quot; so this isn&#39;t the right answer: <a href=\"https://developer.android.com/reference/android/widget/AutoCompleteTextView\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/widget/&hellip;</a>   I tried it anyway and the event still doesn&#39;t fire."}, {"owner": {"reputation": 474, "user_id": 2849550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTGh.jpg?s=128&g=1", "display_name": "kAvEh", "link": "https://stackoverflow.com/users/2849550/kaveh"}, "reply_to_user": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "edited": false, "score": 0, "creation_date": 1557899973, "post_id": 56125352, "comment_id": 98915155, "body": "you are right. check the edit and I think it will help you."}], "tags": [], "owner": {"reputation": 474, "user_id": 2849550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTGh.jpg?s=128&g=1", "display_name": "kAvEh", "link": "https://stackoverflow.com/users/2849550/kaveh"}, "is_accepted": false, "score": 0, "last_activity_date": 1557900217, "last_edit_date": 1557900217, "creation_date": 1557819976, "answer_id": 56125352, "question_id": 56122820, "link": "https://stackoverflow.com/questions/56122820/autocompletetextview-onitemclicklistener-not-firing/56125352#56125352", "title": "AutoCompleteTextView onItemClickListener not firing", "body": "<p>by default, android:clickable attribute value of TextView is false. you must make it clickable by putting this line in your xml:</p>\n\n<pre><code>android:clickable=\"true\"\n</code></pre>\n\n<p>Edit:\nas you can find the details in this <a href=\"https://stackoverflow.com/questions/11790573/onclick-event-is-not-triggering-android\">link</a></p>\n\n<p>listeners will call in down order. you can set the OnFocusChangeListener of your view.</p>\n"}, {"tags": [], "owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "is_accepted": true, "score": 0, "last_activity_date": 1557851665, "creation_date": 1557851665, "answer_id": 56134912, "question_id": 56122820, "link": "https://stackoverflow.com/questions/56122820/autocompletetextview-onitemclicklistener-not-firing/56134912#56134912", "title": "AutoCompleteTextView onItemClickListener not firing", "body": "<p>When you create the adapter, the layout you reference is supposed to be a layout for an individual autosuggest item, not the layout that contains the ACTV. </p>\n\n<p>So changing the line instantiating the adapter to:</p>\n\n<p><code>val adapter = ArrayAdapter&lt;String&gt;(context, android.R.layout.simple_dropdown_item_1line, liftChoices)</code></p>\n\n<p>fixes the issue. This uses a built-in Android sample dropdown layout template.</p>\n"}], "owner": {"reputation": 823, "user_id": 1713450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb4683615320a349adc8ac4f68faace0?s=128&d=identicon&r=PG", "display_name": "user1713450", "link": "https://stackoverflow.com/users/1713450/user1713450"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 0, "accepted_answer_id": 56134912, "answer_count": 2, "score": 0, "last_activity_date": 1557900217, "creation_date": 1557806438, "question_id": 56122820, "link": "https://stackoverflow.com/questions/56122820/autocompletetextview-onitemclicklistener-not-firing", "title": "AutoCompleteTextView onItemClickListener not firing", "body": "<p>I have an AutoCompleteTextView inside an AlertDialog (custom view). I have registered an onItemClick event.</p>\n\n<p>When I type into the input, a dropdown of choices does appear. However, when I click one of the items, the onItemClick event handler never fires.</p>\n\n<p>I want to know what's wrong with my code and why it won't fire the event handler.</p>\n\n<p>I've tried tracing through the AutoCompleteTextView code and can't find where the code that triggers the event handlers even exists. I have confirmed the handler <em>is</em> registered, though.</p>\n\n<p>I have looked at every example of ACTV I can find online. I have looked at so many SO posts about this and none have helped or been on point.</p>\n\n<pre><code>package com.foobar.weightlifting.ui\n\nimport android.app.AlertDialog\nimport android.app.Dialog\nimport android.os.Bundle\nimport android.util.Log\nimport android.view.View\nimport android.widget.AdapterView\nimport android.widget.ArrayAdapter\nimport android.widget.AutoCompleteTextView\nimport androidx.databinding.DataBindingUtil\nimport androidx.fragment.app.DialogFragment\nimport androidx.lifecycle.MutableLiveData\nimport com.foobar.weightlifting.R\nimport kotlinx.android.synthetic.main.lift_selector.*\n\nclass LiftDialog : DialogFragment(), AdapterView.OnItemSelectedListener, AdapterView.OnItemClickListener {\n    companion object {\n        private const val TAG = \"LiftDialog\"\n        private const val POSITIVE_LABEL = \"Select\"\n        private const val NEGATIVE_LABEL = \"Cancel\"\n    }\n    private val model = Model(MutableLiveData())\n    private lateinit var that: LiftDialog\n\n    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {\n        that = this\n        return activity?.let {\n            val inflater = requireActivity().layoutInflater\n            val binding : com.foobar.weightlifting.databinding.LiftSelectorBinding = DataBindingUtil.inflate(inflater, R.layout.lift_selector, null, false)\n            binding.model = model\n            val view = binding.root\n\n            // Setup autocomplete search bar\n            val liftChoices = resources.getStringArray(R.array.lift_list)\n            val adapter = ArrayAdapter&lt;String&gt;(context, R.layout.lift_selector, liftChoices)\n            val autocompleteView: AutoCompleteTextView = view.findViewById(R.id.lift_search_bar)\n            autocompleteView.setAdapter(adapter)\n//            autocompleteView.onItemSelectedListener = that\n//            autocompleteView.onItemClickListener = that\n\n            autocompleteView.setOnItemClickListener { parent, view, position, id -&gt;\n                Log.d(TAG, \"info: $position $id\")\n            }\n\n            val builder = AlertDialog.Builder(it)\n            builder.apply {\n                setTitle(\"Describe the lift\")\n                setView(view)\n                setPositiveButton(POSITIVE_LABEL) { dialog, which -&gt;\n                    Log.d(TAG, \"user pressed the $POSITIVE_LABEL button: $which ; model: ${model.searchText.value}\")\n                }\n                setNegativeButton(NEGATIVE_LABEL) { dialog, which -&gt;\n                    Log.d(TAG, \"user pressed the $NEGATIVE_LABEL button: $which\")\n                }\n            }\n            builder.create()\n        } ?: throw IllegalStateException(\"Blah\")\n    }\n\n    override fun onNothingSelected(parent: AdapterView&lt;*&gt;?) {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    override fun onItemSelected(parent: AdapterView&lt;*&gt;?, view: View?, position: Int, id: Long) {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    override fun onItemClick(parent: AdapterView&lt;*&gt;?, view: View?, position: Int, id: Long) {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    data class Model(val searchText: MutableLiveData&lt;String&gt;)\n}\n</code></pre>\n\n<p>and the layout XML file</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:tools=\"http://schemas.android.com/tools\"\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;data&gt;\n        &lt;variable name=\"model\"\n                  type=\"com.foobar.weightlifting.ui.LiftDialog.Model\"/&gt;\n    &lt;/data&gt;\n        &lt;AutoCompleteTextView android:layout_width=\"wrap_content\"\n                              android:id=\"@+id/lift_search_bar\"\n                              android:text=\"@={model.searchText}\"\n                              android:hint=\"@string/select_lift_hint\"\n                              android:dropDownWidth=\"match_parent\"\n                              android:layout_height=\"wrap_content\"/&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>If I put a breakpoint in <code>onItemClick</code> I expect it to break when I click on an item from the autocomplete dropdown. Instead, nothing happens but a lonely <code>D/EGL_emulation: eglMakeCurrent: 0xea5462e0: ver 3 0 (tinfo 0xcf6cc040)</code> logged.</p>\n\n<p>I've tried to trace through the AutoCompleteTextView code but I can't even find where the onItemClick event handler I've registered is ever called. I have confirmed that the event handler <em>is</em> registered with the AutoCompleteTextView instance, though.</p>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 1340, "user_id": 2809351, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1M4Lz.jpg?s=128&g=1", "display_name": "Lalit Jadav", "link": "https://stackoverflow.com/users/2809351/lalit-jadav"}, "edited": false, "score": 0, "creation_date": 1557807256, "post_id": 56122788, "comment_id": 98877938, "body": "You can go for Common ViewModel for all your fragment and activity"}, {"owner": {"reputation": 448, "user_id": 6007359, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CvkHP.jpg?s=128&g=1", "display_name": "Nabin Khatiwada", "link": "https://stackoverflow.com/users/6007359/nabin-khatiwada"}, "edited": false, "score": 0, "creation_date": 1557808422, "post_id": 56122788, "comment_id": 98878161, "body": "try using this library <a href=\"https://github.com/greenrobot/EventBus\" rel=\"nofollow noreferrer\">github.com/greenrobot/EventBus</a>. This may help you"}], "answers": [{"comments": [{"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1557813778, "post_id": 56122954, "comment_id": 98879745, "body": "This is a nice approach, but could you add some relevant code to the answer as well? Links might go away, code stays..."}, {"owner": {"reputation": 81, "user_id": 11094106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b051b8ce368fbdd140b2424d75b8104c?s=128&d=identicon&r=PG&f=1", "display_name": "Jainil Patel", "link": "https://stackoverflow.com/users/11094106/jainil-patel"}, "reply_to_user": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1557813991, "post_id": 56122954, "comment_id": 98879829, "body": "sure just give me some time :)"}, {"owner": {"reputation": 81, "user_id": 11094106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b051b8ce368fbdd140b2424d75b8104c?s=128&d=identicon&r=PG&f=1", "display_name": "Jainil Patel", "link": "https://stackoverflow.com/users/11094106/jainil-patel"}, "reply_to_user": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1557816551, "post_id": 56122954, "comment_id": 98880995, "body": "sorry for the inconvenience but for now here is the link to follow it step by step <a href=\"https://www.zoftino.com/passing-data-between-android-fragments-using-viewmodel\" rel=\"nofollow noreferrer\">link</a> Hi @tynn don&#39;t worry about the code to be removed it will be there :) at least for while"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1557818936, "post_id": 56122954, "comment_id": 98882164, "body": "It might, for sure. But it&#39;s about the quality of your answer. It&#39;s a good answer, when you find all you need directly there. Offsite resource might change any time, so it&#39;s discouraged to have answers which are hidden behind a link."}], "tags": [], "owner": {"reputation": 81, "user_id": 11094106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b051b8ce368fbdd140b2424d75b8104c?s=128&d=identicon&r=PG&f=1", "display_name": "Jainil Patel", "link": "https://stackoverflow.com/users/11094106/jainil-patel"}, "is_accepted": true, "score": 2, "last_activity_date": 1557997647, "last_edit_date": 1557997647, "creation_date": 1557807532, "answer_id": 56122954, "question_id": 56122788, "link": "https://stackoverflow.com/questions/56122788/how-to-communicate-from-activity-to-fragment/56122954#56122954", "title": "How to communicate from Activity to Fragment?", "body": "<p>You can try ViewModel to communicate between fragments and this is official android documentation.\nHere is the link you can read it. <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel.html#sharing\" rel=\"nofollow noreferrer\">Share data between fragments</a>\nAnd here is a blog to read about live data <a href=\"https://android.jlelse.eu/communicate-between-fragments-and-activity-using-livedata-631526d6357a\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p><strong>here is example</strong></p>\n\n<pre><code>public class SharedViewModel extends ViewModel {\n    private final MutableLiveData&lt;Item&gt; selected = new MutableLiveData&lt;Item&gt;();\n\n    public void select(Item item) {\n        selected.setValue(item);\n    }\n\n    public LiveData&lt;Item&gt; getSelected() {\n        return selected;\n    }\n}\n\npublic class MasterFragment extends Fragment {\n    private SharedViewModel model;\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);\n        itemSelector.setOnClickListener(item -&gt; {\n            model.select(item);\n        });\n    }\n}\n\npublic class DetailFragment extends Fragment {\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        SharedViewModel model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);\n        model.getSelected().observe(this, { item -&gt;\n           // Update the UI.\n        });\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 9429718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d17db04da1d475c6937303e498d878c2?s=128&d=identicon&r=PG&f=1", "display_name": "fishhau", "link": "https://stackoverflow.com/users/9429718/fishhau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "accepted_answer_id": 56122954, "answer_count": 1, "score": 0, "last_activity_date": 1557997647, "creation_date": 1557806058, "question_id": 56122788, "link": "https://stackoverflow.com/questions/56122788/how-to-communicate-from-activity-to-fragment", "title": "How to communicate from Activity to Fragment?", "body": "<p>I understand that using an <code>interface</code> is a common way to communicate from <code>Fragment</code> to <code>Activity</code>. However, what are the good practices for communicating from <code>Activity</code> to <code>Fragment</code>?</p>\n\n<p>In my project, my <code>Activity</code> hosts 3 <code>Fragments</code> using a <code>ViewPager</code>. My <code>Activity</code> currently listens from a backend server and I'd like to somehow notify my 3 <code>Fragments</code> whenever I get an update from the backend server. I tried implementing the <code>interface</code> approach but it already seems like a hassle as I'm already having difficulties getting references to my 3 Fragments in my Activity as the Fragments are created in a separate class which is a subclass of <code>FragmentPagerAdapter</code>. </p>\n\n<p>Is there a better / cleaner way than using <code>interace</code> for communicating from <code>Activity</code> to <code>Fragment</code>?</p>\n"}, {"tags": ["android", "kotlin", "android-gradle-plugin", "androidx"], "comments": [{"owner": {"reputation": 1041, "user_id": 4181904, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6rkytT4VZ9U/AAAAAAAAAAI/AAAAAAAAAAA/RWUAd2uco8M/photo.jpg?sz=128", "display_name": "Ranjan Kumar", "link": "https://stackoverflow.com/users/4181904/ranjan-kumar"}, "edited": false, "score": 0, "creation_date": 1557818018, "post_id": 56122382, "comment_id": 98881742, "body": "from command line run command &#39;gradlew assembleDebug&#39; and share the log."}, {"owner": {"reputation": 259, "user_id": 7511614, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-xOOzgY1CNL8/AAAAAAAAAAI/AAAAAAAAAHQ/301RWrmFI8w/photo.jpg?sz=128", "display_name": "nethra gowda", "link": "https://stackoverflow.com/users/7511614/nethra-gowda"}, "reply_to_user": {"reputation": 1041, "user_id": 4181904, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6rkytT4VZ9U/AAAAAAAAAAI/AAAAAAAAAAA/RWUAd2uco8M/photo.jpg?sz=128", "display_name": "Ranjan Kumar", "link": "https://stackoverflow.com/users/4181904/ranjan-kumar"}, "edited": false, "score": 0, "creation_date": 1557819031, "post_id": 56122382, "comment_id": 98882213, "body": "Thank you for the reply but the issue has been solved. @Dao classes were creating problem, I have resolved it."}], "owner": {"reputation": 259, "user_id": 7511614, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-xOOzgY1CNL8/AAAAAAAAAAI/AAAAAAAAAHQ/301RWrmFI8w/photo.jpg?sz=128", "display_name": "nethra gowda", "link": "https://stackoverflow.com/users/7511614/nethra-gowda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557802507, "creation_date": 1557802507, "question_id": 56122382, "link": "https://stackoverflow.com/questions/56122382/multiple-build-errors-after-migrating-to-androidx", "title": "Multiple Build errors after migrating to androidX", "body": "<p>I was getting error while creating Database in kotlin but then I ended up updating androidX dependencies but every time i get the following error.Also, I have two different modules with two gradle files.</p>\n\n<pre><code>    at org.gradle.initialization.DefaultGradleLauncher$ExecuteTasks.run(DefaultGradleLauncher.java:386)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:301)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:293)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:175)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.initialization.DefaultGradleLauncher.runTasks(DefaultGradleLauncher.java:247)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:159)\n    at org.gradle.initialization.DefaultGradleLauncher.executeTasks(DefaultGradleLauncher.java:134)\n    at org.gradle.internal.invocation.GradleBuildController$1.execute(GradleBuildController.java:58)\n    at org.gradle.internal.invocation.GradleBuildController$1.execute(GradleBuildController.java:55)\n    at org.gradle.internal.invocation.GradleBuildController$3.create(GradleBuildController.java:82)\n    at org.gradle.internal.invocation.GradleBuildController$3.create(GradleBuildController.java:75)\n    at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:183)\n    at org.gradle.internal.work.StopShieldingWorkerLeaseService.withLocks(StopShieldingWorkerLeaseService.java:40)\n    at org.gradle.internal.invocation.GradleBuildController.doBuild(GradleBuildController.java:75)\n    at org.gradle.internal.invocation.GradleBuildController.run(GradleBuildController.java:55)\n    at org.gradle.tooling.internal.provider.runner.ClientProvidedBuildActionRunner.run(ClientProvidedBuildActionRunner.java:55)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:58)\n    at org.gradle.tooling.internal.provider.ValidatingBuildActionRunner.run(ValidatingBuildActionRunner.java:32)\n    at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:39)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner$3.call(RunAsBuildOperationBuildActionRunner.java:49)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner$3.call(RunAsBuildOperationBuildActionRunner.java:44)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:315)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:305)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:175)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:101)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner.run(RunAsBuildOperationBuildActionRunner.java:44)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$1.transform(InProcessBuildActionExecuter.java:49)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$1.transform(InProcessBuildActionExecuter.java:46)\n    at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:78)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:46)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:31)\n    at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:42)\n    at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:28)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:78)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:52)\n    at org.gradle.tooling.internal.provider.SubscribableBuildActionExecuter.execute(SubscribableBuildActionExecuter.java:59)\n    at org.gradle.tooling.internal.provider.SubscribableBuildActionExecuter.execute(SubscribableBuildActionExecuter.java:36)\n    at org.gradle.tooling.internal.provider.SessionScopeBuildActionExecuter.execute(SessionScopeBuildActionExecuter.java:68)\n    at org.gradle.tooling.internal.provider.SessionScopeBuildActionExecuter.execute(SessionScopeBuildActionExecuter.java:38)\n    at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:37)\n    at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:26)\n    at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:43)\n    at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:29)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:60)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:32)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:55)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:41)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:48)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:32)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:62)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:81)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:kaptDebugKotlin'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:95)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:91)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:57)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:119)\n    at org.gradle.api.internal.tasks.execution.ResolvePreviousStateExecuter.execute(ResolvePreviousStateExecuter.java:43)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:93)\n    at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:45)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:94)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:56)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:55)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:67)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:49)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:315)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$CallableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:305)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:175)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:101)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.call(DelegatingBuildOperationExecutor.java:36)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:49)\n    at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:43)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:355)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:343)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:336)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:322)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker$1.execute(DefaultPlanExecutor.java:134)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker$1.execute(DefaultPlanExecutor.java:129)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:202)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:193)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:129)\n    ... 6 more\nCaused by: org.gradle.api.GradleException: Compilation error. See log for more details\n    at org.jetbrains.kotlin.gradle.tasks.TasksUtilsKt.throwGradleExceptionIfError(tasksUtils.kt:14)\n    at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.run(GradleKotlinCompilerWork.kt:129)\n    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runCompilerAsync(GradleKotlinCompilerRunner.kt:158)\n    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runCompilerAsync(GradleKotlinCompilerRunner.kt:153)\n    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runJvmCompilerAsync(GradleKotlinCompilerRunner.kt:92)\n    at org.jetbrains.kotlin.gradle.internal.KaptWithKotlincTask.compile(KaptWithKotlincTask.kt:98)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n    at org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:47)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:41)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:28)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$2.run(ExecuteActionsTaskExecuter.java:284)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:301)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:293)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:175)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:273)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:258)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.access$200(ExecuteActionsTaskExecuter.java:67)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.execute(ExecuteActionsTaskExecuter.java:145)\n    at org.gradle.internal.execution.impl.steps.ExecuteStep.execute(ExecuteStep.java:49)\n    at org.gradle.internal.execution.impl.steps.CancelExecutionStep.execute(CancelExecutionStep.java:34)\n    at org.gradle.internal.execution.impl.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:69)\n    at org.gradle.internal.execution.impl.steps.TimeoutStep.execute(TimeoutStep.java:49)\n    at org.gradle.internal.execution.impl.steps.CatchExceptionStep.execute(CatchExceptionStep.java:33)\n    at org.gradle.internal.execution.impl.steps.CreateOutputsStep.execute(CreateOutputsStep.java:50)\n    at org.gradle.internal.execution.impl.steps.SnapshotOutputStep.execute(SnapshotOutputStep.java:43)\n    at org.gradle.internal.execution.impl.steps.SnapshotOutputStep.execute(SnapshotOutputStep.java:29)\n    at org.gradle.internal.execution.impl.steps.CacheStep.executeWithoutCache(CacheStep.java:134)\n    at org.gradle.internal.execution.impl.steps.CacheStep.lambda$execute$3(CacheStep.java:83)\n    at java.util.Optional.orElseGet(Optional.java:267)\n    at org.gradle.internal.execution.impl.steps.CacheStep.execute(CacheStep.java:82)\n    at org.gradle.internal.execution.impl.steps.CacheStep.execute(CacheStep.java:36)\n    at org.gradle.internal.execution.impl.steps.PrepareCachingStep.execute(PrepareCachingStep.java:33)\n    at org.gradle.internal.execution.impl.steps.StoreSnapshotsStep.execute(StoreSnapshotsStep.java:38)\n    at org.gradle.internal.execution.impl.steps.StoreSnapshotsStep.execute(StoreSnapshotsStep.java:23)\n    at org.gradle.internal.execution.impl.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:96)\n    at org.gradle.internal.execution.impl.steps.SkipUpToDateStep.lambda$execute$0(SkipUpToDateStep.java:89)\n    at java.util.Optional.map(Optional.java:215)\n    at org.gradle.internal.execution.impl.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:52)\n    at org.gradle.internal.execution.impl.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:36)\n    at org.gradle.internal.execution.impl.DefaultWorkExecutor.execute(DefaultWorkExecutor.java:34)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:91)\n    ... 35 more\n</code></pre>\n\n<p>following is my build.gradle file</p>\n\n<pre><code>\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"myapp\"\n        minSdkVersion 21\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.0.2'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    implementation 'androidx.recyclerview:recyclerview:1.0.0'\n    implementation 'com.github.f0ris.sweetalert:library:1.5.1'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation \"androidx.lifecycle:lifecycle-extensions:2.0.0\"\n    kapt \"androidx.lifecycle:lifecycle-compiler:2.0.0\"\n    implementation \"androidx.room:room-runtime:2.0.0\"\n    kapt \"androidx.room:room-compiler:2.0.0\"\n\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test:runner:1.1.1'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0-beta-01'\n    implementation project(path: ':mySDK')\n}\n</code></pre>\n\n<p>following is gradle file for my second module</p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 28\n\n    defaultConfig {\n        minSdkVersion 21\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'com.android.volley:volley:1.1.1'\n    implementation 'androidx.appcompat:appcompat:1.0.2'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test:runner:1.2.0-beta-01'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0-beta-01'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation \"androidx.lifecycle:lifecycle-extensions:2.0.0\"\n    kapt \"androidx.lifecycle:lifecycle-compiler:2.0.0\"\n    implementation \"androidx.room:room-runtime:2.0.0\"\n    kapt \"androidx.room:room-compiler:2.0.0\"\n    implementation 'com.intentfilter:android-permissions:0.1.5'\n    implementation 'com.google.code.gson:gson:2.8.2'\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n}\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n\n<p>I have done all the necessary changes but not able to resolve this error. Any help would be great.\nThank you</p>\n"}, {"tags": ["generics", "kotlin", "collections"], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 3050843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YVnhd.png?s=128&g=1", "display_name": "Ofy", "link": "https://stackoverflow.com/users/3050843/ofy"}, "is_accepted": false, "score": 3, "last_activity_date": 1557805259, "creation_date": 1557805259, "answer_id": 56122693, "question_id": 56122317, "link": "https://stackoverflow.com/questions/56122317/whats-the-kotlin-generic-type-to-capture-a-mutablemap-and-a-mutablelist/56122693#56122693", "title": "What&#39;s the Kotlin generic type to capture a MutableMap and a MutableList?", "body": "<p>Why don't you just use the field <code>size</code> found both on <code>Collection&lt;out E&gt;</code> and <code>Map&lt;K, out V&gt;</code>?</p>\n\n<pre><code>public interface Collection&lt;out E&gt; : Iterable&lt;E&gt; {\n    // Query Operations\n    /**\n     * Returns the size of the collection.\n     */\n    public val size: Int\n\n    ...\n}\n</code></pre>\n\n<pre><code>public interface Map&lt;K, out V&gt; {\n    // Query Operations\n    /**\n     * Returns the number of key/value pairs in the map.\n     */\n    public val size: Int\n\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557805259, "creation_date": 1557801789, "question_id": 56122317, "link": "https://stackoverflow.com/questions/56122317/whats-the-kotlin-generic-type-to-capture-a-mutablemap-and-a-mutablelist", "title": "What&#39;s the Kotlin generic type to capture a MutableMap and a MutableList?", "body": "<p>I want to create a function that basically returns the size of a given collection.\nSpecifically, I want to make it generic enough that it can work with MutableMap and MutableList.  How do I accomplish this? </p>\n\n<p>I tried using <code>Collection&lt;Any&gt;</code> but it turns out <code>Map</code> isn't a subtype of <code>Collection</code>.</p>\n"}, {"tags": ["java", "android", "kotlin", "dynamic-feature"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10285860, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-V-B-csSaWcw/AAAAAAAAAAI/AAAAAAAAAKA/qtAB-CfmhAA/photo.jpg?sz=128", "display_name": "Rajdeep Roy Chowdhury", "link": "https://stackoverflow.com/users/10285860/rajdeep-roy-chowdhury"}, "is_accepted": false, "score": 0, "last_activity_date": 1617784877, "creation_date": 1617784877, "answer_id": 66982464, "question_id": 56122126, "link": "https://stackoverflow.com/questions/56122126/how-to-access-java-code-lib-from-dynamic-feature-module-in-base-module-in-androi/66982464#66982464", "title": "How to Access Java Code/Lib from Dynamic Feature Module in Base Module in Android?", "body": "<p>You can load java/kotlin class by</p>\n<pre><code>Class cls = Class.forname(&quot;com.example.package&quot;);\n</code></pre>\n<p>once you are done with the dynamic feature module installation.\nThen, you can instantiate using</p>\n<pre><code>Object obj = cls.newInstance();\n</code></pre>\n<p>Alternatively, you can have an abstract class of <code>com.example.package</code> class e.g. <code>ExampleAbstract</code>.</p>\n<p>The final code might look like</p>\n<pre><code>ExampleAbstract obj = cls.newInstance();\n</code></pre>\n"}], "owner": {"reputation": 1782, "user_id": 5750389, "user_type": "registered", "profile_image": "https://graph.facebook.com/908028102588999/picture?type=large", "display_name": "Elias Fazel", "link": "https://stackoverflow.com/users/5750389/elias-fazel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1617784877, "creation_date": 1557800109, "question_id": 56122126, "link": "https://stackoverflow.com/questions/56122126/how-to-access-java-code-lib-from-dynamic-feature-module-in-base-module-in-androi", "title": "How to Access Java Code/Lib from Dynamic Feature Module in Base Module in Android?", "body": "<p>In <a href=\"https://developer.android.com/guide/app-bundle/playcore#access_installed_modules\" rel=\"nofollow noreferrer\">Documentation</a> mentioned </p>\n\n<blockquote>\n  <p>Access code and resources from installed modules</p>\n</blockquote>\n\n<p>&amp; there is a function to load native library.</p>\n\n<pre><code>SplitInstallHelper.loadLibrary(newContext, \u201cmy-cpp-lib\u201d);\n</code></pre>\n\n<p>But How can I access Java/Kotlin Class Or Java Library from Installed Dynamic Feature Module?</p>\n\n<p>I have checked <a href=\"https://stackoverflow.com/questions/51528207/call-dynamic-feature-code-from-base-module\">Call dynamic feature code from base module</a> but there is no solution.</p>\n\n<p>Thanks In Advance\n\ud83d\udc4d</p>\n"}, {"tags": ["android", "kotlin", "localization", "locale", "android-6.0-marshmallow"], "answers": [{"comments": [{"owner": {"reputation": 284, "user_id": 9597039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bRkCI.jpg?s=128&g=1", "display_name": "Milos", "link": "https://stackoverflow.com/users/9597039/milos"}, "edited": false, "score": 1, "creation_date": 1557931818, "post_id": 56151412, "comment_id": 98933767, "body": "I tried renaming strings.xml resources to something without country tag which is the uppercase abbreviation and it works on the emulator as well on the physical device too. The only drawback, is that the renaming process must be done manually through the Project view hierarchy. Anyway, thanks for the suggestions, because now it&#39;s finally working."}], "tags": [], "owner": {"reputation": 2261, "user_id": 7327572, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/111afeb457014dbcc846245eec06e492?s=128&d=identicon&r=PG&f=1", "display_name": "FilipRistic", "link": "https://stackoverflow.com/users/7327572/filipristic"}, "is_accepted": true, "score": 5, "last_activity_date": 1557929447, "creation_date": 1557929447, "answer_id": 56151412, "question_id": 56121040, "link": "https://stackoverflow.com/questions/56121040/changing-application-language-localization-wont-apply-on-api-23-android/56151412#56151412", "title": "Changing application language (localization) wont apply on api 23 android", "body": "<p>This is probably happening because of the following:</p>\n\n<blockquote>\n  <p>Starting in Android 7.0 (API level 24), Android provides enhanced\n  support for multilingual users, allowing them to select multiple\n  locales in settings. Android provides this capability by greatly\n  expanding the number of locales supported and changing the way the\n  system resolves resources.</p>\n</blockquote>\n\n<p>You can read more about this <a href=\"https://developer.android.com/guide/topics/resources/multilingual-support\" rel=\"noreferrer\">here</a></p>\n\n<p>If you have your resources named xx_XX, try removing XX, this has worked for me on older versions. Otherwise specify fully qualified locale.</p>\n"}], "owner": {"reputation": 284, "user_id": 9597039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bRkCI.jpg?s=128&g=1", "display_name": "Milos", "link": "https://stackoverflow.com/users/9597039/milos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1358, "favorite_count": 0, "accepted_answer_id": 56151412, "answer_count": 1, "score": 4, "last_activity_date": 1557929447, "creation_date": 1557789706, "question_id": 56121040, "link": "https://stackoverflow.com/questions/56121040/changing-application-language-localization-wont-apply-on-api-23-android", "title": "Changing application language (localization) wont apply on api 23 android", "body": "<p>I am facing some problem with localization in the android application. </p>\n\n<p>Function for changing language work properly when i test it on <strong>api level 24</strong> and above, but when I change language on emulator <strong>api level 23</strong>, it just wont apply local changes. I read about this on many forums and i have tried almost every provided solution but it just wont work.</p>\n\n<p>Important thing is that animation of closing popup menu, which is listPreference, is slightly weird than for example closing animation on Android Nougat, so it already smells like some irregularity. </p>\n\n<p><strong>Important note</strong> is that i run application on my physical device which is api level 23 or Marshmallow and the problem is still there. </p>\n\n<p>In the following sections, i have provided some code which is important for this case, on the other hand i omitted some files like <strong>strings.xml</strong> and <strong>preferences.xml</strong> which is not necessary for this case. So main focus here is enabling possibility to change application languge. If any of you got a clue, what might be the problem i would ask him to share with us.  </p>\n\n<hr>\n\n<p><strong>Helper class for setting Locale</strong></p>\n\n<pre><code>package com.metropolitan.hangouter;\n\nimport android.annotation.TargetApi;\nimport android.content.Context;\nimport android.content.ContextWrapper;\nimport android.content.res.Configuration;\nimport android.os.Build;\n\nimport java.util.Locale;\n\npublic class MyContextWrapper extends ContextWrapper {\n\npublic MyContextWrapper(Context base) {\n    super(base);\n}\n\n@SuppressWarnings(\"deprecation\")\npublic static ContextWrapper wrap(Context context, String language) {\n    Configuration config = context.getResources().getConfiguration();\n    Locale sysLocale = null;\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n        sysLocale = getSystemLocale(config);\n    } else {\n        sysLocale = getSystemLocaleLegacy(config);\n    }\n    if (!language.equals(\"\") &amp;&amp; !sysLocale.getLanguage().equals(language)) {\n        Locale locale = new Locale(language);\n        Locale.setDefault(locale);\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n            setSystemLocale(config, locale);\n        } else {\n            setSystemLocaleLegacy(config, locale);\n        }\n\n    }\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {\n        context = context.createConfigurationContext(config);\n    } else {\n        context.getResources().updateConfiguration(config, context.getResources().getDisplayMetrics());\n    }\n    return new MyContextWrapper(context);\n}\n\n\n@SuppressWarnings(\"deprecation\")\npublic static Locale getSystemLocaleLegacy(Configuration config) {\n    return config.locale;\n}\n\n@TargetApi(Build.VERSION_CODES.N)\npublic static Locale getSystemLocale(Configuration config) {\n    return config.getLocales().get(0);\n}\n\n@SuppressWarnings(\"deprecation\")\npublic static void setSystemLocaleLegacy(Configuration config, Locale locale) {\n    config.locale = locale;\n}\n\n@TargetApi(Build.VERSION_CODES.N)\npublic static void setSystemLocale(Configuration config, Locale locale) {\n    config.setLocale(locale);\n}\n}\n</code></pre>\n\n<p>Then in my main activity among other methods, i call this one which is crucial for us. </p>\n\n<pre><code>override fun attachBaseContext(newBase: Context) {\n    preferences = PreferenceManager.getDefaultSharedPreferences(newBase)\n    vred = preferences.getString(\"languageKey\", \"no selection\")!!\n    val locale = Locale(vred)\n    super.attachBaseContext(MyContextWrapper.wrap(newBase, locale.language))\n}\n</code></pre>\n\n<p>This method is also called in the SettingsActivity which has the same functionality and that is attaching local configuration to baseContext, of course i need to refresh the activity because of changes that been made and i am handling that event. </p>\n\n<p>So this method is calling at the right place and at the right time. In other words, i am refreshing activities every time onPreferenceChange. My application is written in <strong>kotlin</strong> but this MyContextWrapper class is in <strong>java</strong>. So that's it for now, if someone need some more info, i will be very glad to provide it.  </p>\n"}, {"tags": ["android", "kotlin", "android-room", "android-livedata"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 6302468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IbRz.jpg?s=128&g=1", "display_name": "Muzzle", "link": "https://stackoverflow.com/users/6302468/muzzle"}, "edited": false, "score": 0, "creation_date": 1557857678, "post_id": 56120958, "comment_id": 98903654, "body": "Maybe I&#39;m not understanding but this gives the same result. The list is shuffled everytime the favourite button is pressed. I did have to make a few changes as LiveData doesn&#39;t expose setValue. I updated th OP with the switchMap implementation used."}, {"owner": {"reputation": 175, "user_id": 4856711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c95b301cb9a24500e2b91849736c0ad?s=128&d=identicon&r=PG", "display_name": "arkus", "link": "https://stackoverflow.com/users/4856711/arkus"}, "reply_to_user": {"reputation": 163, "user_id": 6302468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IbRz.jpg?s=128&g=1", "display_name": "Muzzle", "link": "https://stackoverflow.com/users/6302468/muzzle"}, "edited": false, "score": 0, "creation_date": 1558029219, "post_id": 56120958, "comment_id": 98974759, "body": "@Muzzle Oh, I misunderstood your problem, sorry about that. I thought you&#39;re trying just randomize the array."}], "tags": [], "owner": {"reputation": 175, "user_id": 4856711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c95b301cb9a24500e2b91849736c0ad?s=128&d=identicon&r=PG", "display_name": "arkus", "link": "https://stackoverflow.com/users/4856711/arkus"}, "is_accepted": false, "score": 1, "last_activity_date": 1557789830, "last_edit_date": 1557789830, "creation_date": 1557789084, "answer_id": 56120958, "question_id": 56120878, "link": "https://stackoverflow.com/questions/56120878/shuffle-livedatalistitem-from-room-database-on-app-open/56120958#56120958", "title": "Shuffle LiveData&lt;List&lt;Item&gt;&gt; from Room Database on App Open", "body": "<p>You should consider using <a href=\"https://developer.android.com/reference/android/arch/lifecycle/Transformations.html#switchmap\" rel=\"nofollow noreferrer\"><code>switchMap</code></a> transformation operator on <code>LiveData</code>.</p>\n\n<pre><code>return liveData.switchMap(list -&gt; {\n    var newLiveData = LiveData&lt;MutableList&lt;Item&gt;&gt;()\n    var newList = list.toMutableList()\n    Collections.shuffle(newList)\n    newLiveData.setValue(newList)\n    return newLiveData\n})\n</code></pre>\n\n<p>For creating new LiveData you can use <code>LiveData</code> constructor and <code>setValue(T value)</code> method.\nAs value you can set <code>Collections.shuffle(list)</code></p>\n\n<p>You could use it in your repository or in the view model.</p>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 6302468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IbRz.jpg?s=128&g=1", "display_name": "Muzzle", "link": "https://stackoverflow.com/users/6302468/muzzle"}, "edited": false, "score": 0, "creation_date": 1557921811, "post_id": 56142195, "comment_id": 98927092, "body": "This is the solution that worked. Much appreciated, thank you!"}], "tags": [], "owner": {"reputation": 2865, "user_id": 6587143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d937e3b76600ab1182224aec4710655?s=128&d=identicon&r=PG&f=1", "display_name": "Sanlok Lee", "link": "https://stackoverflow.com/users/6587143/sanlok-lee"}, "is_accepted": true, "score": 2, "last_activity_date": 1557897524, "creation_date": 1557897524, "answer_id": 56142195, "question_id": 56120878, "link": "https://stackoverflow.com/questions/56120878/shuffle-livedatalistitem-from-room-database-on-app-open/56142195#56142195", "title": "Shuffle LiveData&lt;List&lt;Item&gt;&gt; from Room Database on App Open", "body": "<p>Just use <code>.shuffled()</code> with seeded <code>Random</code> instance. The idea is to randomize the list, but the randomize in the same way, until the process dies and the user relaunches the app to generate a new seed.</p>\n\n<p>Repository</p>\n\n<pre><code>private val seed = System.currentTimeMillis()\nval mItemList: LiveData&lt;MutableList&lt;Item&gt;&gt; = Transformations.map(itemDoa.getAllItems()) {\n    it.shuffled(Random(seed))\n}\n</code></pre>\n\n<p>The seed must be consistent throughout the application's process. I think keeping the seed in the repository is pretty safe, assuming that your repository is implemented in a singleton pattern. If it is not the case, just find yourself a singleton object and cache the seed.</p>\n"}], "owner": {"reputation": 163, "user_id": 6302468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IbRz.jpg?s=128&g=1", "display_name": "Muzzle", "link": "https://stackoverflow.com/users/6302468/muzzle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 0, "accepted_answer_id": 56142195, "answer_count": 2, "score": 1, "last_activity_date": 1557897524, "creation_date": 1557788406, "last_edit_date": 1557857894, "question_id": 56120878, "link": "https://stackoverflow.com/questions/56120878/shuffle-livedatalistitem-from-room-database-on-app-open", "title": "Shuffle LiveData&lt;List&lt;Item&gt;&gt; from Room Database on App Open", "body": "<p>I have a RecyclerView which displays <code>LiveData&lt;List&lt;Item&gt;&gt;</code> returned from a Room Database. Everything works fine, however, the Item order needs to be randomized every time the app is open for a more dynamic feel.</p>\n\n<p>The Item's are displayed in <code>AllItemFragment</code>. When an item is clicked, it will be added to the users favourites. This will then add the Item to the <code>FavouriteFragment</code>.<br>\n<br/></p>\n\n<p>Ordering the <code>SQL query</code> by <code>RANDOM()</code> would be called every time the data is changed (i.e. when an item is clicked) and therefore wont work.</p>\n\n<p><code>List.shuffle</code> cannot be called on <code>LiveData</code> object for obvious reasons.<br>\n<br/></p>\n\n<p>Data is retrieved in the following format:</p>\n\n<p><code>DAO -&gt; Repository -&gt; SharedViewholder -&gt; Fragment -&gt; Adapter</code>\n<br/><br/></p>\n\n<p>DAO</p>\n\n<pre><code>@Query(\"SELECT * from items_table\")\nfun getAllItems(): LiveData&lt;MutableList&lt;Item&gt;&gt;\n</code></pre>\n\n<p><br/><br/>\nRepository</p>\n\n<pre><code>val mItemList: LiveData&lt;MutableList&lt;Item&gt;&gt; = itemDoa.getAllItems()\n</code></pre>\n\n<p><br/><br/>\nSharedViewHolder</p>\n\n<pre><code>init {\n        repository = ItemRepository(itemDao)\n        itemList = repository.mItemList\n}\n\nfun getItems(): LiveData&lt;MutableList&lt;Item&gt;&gt; {\n        return itemList\n}\n</code></pre>\n\n<p><br/><br/>\nFragment</p>\n\n<pre><code>override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n        mSharedViewModel = activity?.run {\n            ViewModelProviders.of(this).get(SharedViewModel::class.java)\n        } ?: throw Exception(\"Invalid Activity\")\n        mSharedViewModel.getItems().observe(viewLifecycleOwner, Observer { item -&gt;\n            // Update the UI\n            item.let { mAdapter.setItems(it!!) }\n        })\n}\n</code></pre>\n\n<p><br/><br/>\nAdapter</p>\n\n<pre><code>internal fun setItems(items: MutableList&lt;Item&gt;) {\n        val diffCallback = ItemDiffCallback(this.mItems, items)\n        val diffResult = DiffUtil.calculateDiff(diffCallback)\n        this.mItems.clear()\n        this.mItems.addAll(items)\n        diffResult.dispatchUpdatesTo(this)\n    }\n</code></pre>\n\n<p><br />\n<br />\n<strong>EDIT</strong>  </p>\n\n<p>Using <code>switchMap()</code> still shuffles the entire list when a user presses the favourite button</p>\n\n<pre><code>fun getItems(): LiveData&lt;MutableList&lt;Item&gt;&gt; {\n        return Transformations.switchMap(mItemList) { list -&gt;\n            val newLiveData = MutableLiveData&lt;MutableList&lt;Item&gt;&gt;()\n            val newList = list.toMutableList()\n            Collections.shuffle(newList)\n            newLiveData.setValue(newList)\n            return@switchMap newLiveData }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "androidx"], "answers": [{"tags": [], "owner": {"reputation": 947, "user_id": 3659213, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/a3d1e9819e9628ffa6c03e8da98c05eb?s=128&d=identicon&r=PG&f=1", "display_name": "Roudi", "link": "https://stackoverflow.com/users/3659213/roudi"}, "is_accepted": false, "score": 0, "last_activity_date": 1557788114, "creation_date": 1557788114, "answer_id": 56120839, "question_id": 56120725, "link": "https://stackoverflow.com/questions/56120725/problem-with-androidx-recycleview-recycleview-not-displaying/56120839#56120839", "title": "Problem with AndroidX RecycleView - recycleview not displaying", "body": "<p>The tag for a RecyclerView in android x <code>&lt;androidx.recyclerview.widget.RecyclerView</code></p>\n\n<p>Make sure that's what you're using in your XML. Sometimes even if it shows you the dark grey + class name in preview doesn't mean that it's broken, sometimes it's just as easy as File -> Invalidate caches and restart, clean project and try to run the app.</p>\n"}], "owner": {"reputation": 1, "user_id": 11495306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m5inj.png?s=128&g=1", "display_name": "Ren the Great", "link": "https://stackoverflow.com/users/11495306/ren-the-great"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1557788114, "creation_date": 1557787233, "question_id": 56120725, "link": "https://stackoverflow.com/questions/56120725/problem-with-androidx-recycleview-recycleview-not-displaying", "title": "Problem with AndroidX RecycleView - recycleview not displaying", "body": "<p>I'm android beginner currently exploring RecycleView. After I added recycleview dependency in the build.gradle I tried to add it to my layout, but my background is not white as it's supposed to be but kind of blackish, showing text in the middle of the screen that says - androidx.recyclview.widget.RecycleView. It's the same problem as the <a href=\"https://stackoverflow.com/questions/51687173/how-to-use-androidx-recyclerview-widget-recyclerview-with-toolslistitem\">How to use androidx.recyclerview.widget.RecyclerView with tools:listitem?</a>  and I followed instructions that were given there but nothing is happening. Does somebody know what seems to be the problem?</p>\n\n<p>My build.gradle file</p>\n\n<pre><code>import com.google.gms.googleservices.GoogleServicesPlugin\n\napply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"com.example.faks_app\"\n        minSdkVersion 25\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.0.2'\n    implementation 'androidx.core:core-ktx:1.0.2'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test:runner:1.1.1'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.1'\n    implementation 'com.google.firebase:firebase-core:16.0.9'\n    implementation 'com.google.firebase:firebase-firestore:19.0.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'androidx.recyclerview:recyclerview:1.0.0'\n}\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n"}, {"tags": ["android", "facebook", "kotlin", "facebook-login"], "answers": [{"tags": [], "owner": {"reputation": 68155, "user_id": 757508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbdf0220a07252e7fa441ca414bc612?s=128&d=identicon&r=PG", "display_name": "luschn", "link": "https://stackoverflow.com/users/757508/luschn"}, "is_accepted": true, "score": 33, "last_activity_date": 1557787525, "creation_date": 1557787525, "answer_id": 56120760, "question_id": 56120643, "link": "https://stackoverflow.com/questions/56120643/facebooks-setreadpermissions-on-login-button-deprecated-what-to-use-instead/56120760#56120760", "title": "Facebook&#39;s setReadPermissions() on Login Button deprecated - what to use instead?", "body": "<p><a href=\"https://developers.facebook.com/docs/reference/androidsdk/current/facebook/com/facebook/login/widget/loginbutton.html/\" rel=\"noreferrer\">https://developers.facebook.com/docs/reference/androidsdk/current/facebook/com/facebook/login/widget/loginbutton.html/</a></p>\n\n<blockquote>\n  <p>Deprecated.  use <strong>setPermissions</strong></p>\n</blockquote>\n\n<p>Direct Link: <a href=\"https://developers.facebook.com/docs/reference/androidsdk/current/facebook/com/facebook/login/widget/loginbutton.html/#setpermissions-javalangstring-\" rel=\"noreferrer\">https://developers.facebook.com/docs/reference/androidsdk/current/facebook/com/facebook/login/widget/loginbutton.html/#setpermissions-javalangstring-</a></p>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6609, "favorite_count": 1, "accepted_answer_id": 56120760, "answer_count": 1, "score": 16, "last_activity_date": 1557787525, "creation_date": 1557786593, "question_id": 56120643, "link": "https://stackoverflow.com/questions/56120643/facebooks-setreadpermissions-on-login-button-deprecated-what-to-use-instead", "title": "Facebook&#39;s setReadPermissions() on Login Button deprecated - what to use instead?", "body": "<p>Im following Facebook's login tutorial for Android SDK and it seems <code>login_button.setReadPermissions()</code> is now deprecated:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zvmPq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zvmPq.png\" alt=\"enter image description here\"></a></p>\n\n<p>What do I use as a replacement?</p>\n"}, {"tags": ["http", "servlets", "kotlin", "jetty", "httpresponse"], "comments": [{"owner": {"reputation": 1149, "user_id": 1815716, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9675409cde1b7bc0b4f4aa078b4a73e1?s=128&d=identicon&r=PG", "display_name": "prasad", "link": "https://stackoverflow.com/users/1815716/prasad"}, "edited": false, "score": 1, "creation_date": 1557797160, "post_id": 56120513, "comment_id": 98876068, "body": "can you try add header first then write the response at last ? may i am wrong but it&#39;s worth trying"}, {"owner": {"reputation": 1723, "user_id": 5038503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ddf41a6fcc766d0fc157499e7264b0ef?s=128&d=identicon&r=PG", "display_name": "Seth Painter", "link": "https://stackoverflow.com/users/5038503/seth-painter"}, "reply_to_user": {"reputation": 1149, "user_id": 1815716, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9675409cde1b7bc0b4f4aa078b4a73e1?s=128&d=identicon&r=PG", "display_name": "prasad", "link": "https://stackoverflow.com/users/1815716/prasad"}, "edited": false, "score": 0, "creation_date": 1557805613, "post_id": 56120513, "comment_id": 98877621, "body": "That&#39;s what I ended up doing. Wish I&#39;d seen your comment before."}], "answers": [{"tags": [], "owner": {"reputation": 1723, "user_id": 5038503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ddf41a6fcc766d0fc157499e7264b0ef?s=128&d=identicon&r=PG", "display_name": "Seth Painter", "link": "https://stackoverflow.com/users/5038503/seth-painter"}, "is_accepted": true, "score": 1, "last_activity_date": 1557797855, "creation_date": 1557797855, "answer_id": 56121888, "question_id": 56120513, "link": "https://stackoverflow.com/questions/56120513/include-text-header-in-image-http-response-jetty/56121888#56121888", "title": "Include text header in Image HTTP response Jetty", "body": "<p>It seems to work if I add the headers before I print the image into the stream.</p>\n\n<pre><code>override fun doPost(request: HttpServletRequest, response: HttpServletResponse) {\n    response.contentType = \"image/png\"\n    response.status = HttpServletResponse.SC_OK\n    val diff = ImgDiff.getDifference(\"img1\", \"img2\", tolerance)\n    response.addHeader(\"diff\", diff.toString())\n    ImageIO.write(ImageIO.read(File(\"diffedFile.png\")), \"PNG\", response.outputStream)\n}\n</code></pre>\n"}], "owner": {"reputation": 1723, "user_id": 5038503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ddf41a6fcc766d0fc157499e7264b0ef?s=128&d=identicon&r=PG", "display_name": "Seth Painter", "link": "https://stackoverflow.com/users/5038503/seth-painter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 56121888, "answer_count": 1, "score": 1, "last_activity_date": 1557797855, "creation_date": 1557785662, "question_id": 56120513, "link": "https://stackoverflow.com/questions/56120513/include-text-header-in-image-http-response-jetty", "title": "Include text header in Image HTTP response Jetty", "body": "<p>I'm building a simple server program that needs to return both an image and some text in the response, however, I'm having an issue with Jetty. The text should be included in headers of the HTTP response, but isn't.</p>\n\n<p>Here's the code to return the image:</p>\n\n<pre><code>override fun doPost(request: HttpServletRequest, response: HttpServletResponse) {\n    response.contentType = \"image/png\"\n    response.status = HttpServletResponse.SC_OK\n    val diff = ImgDiff.getDifference(\"img1\", \"img2\", tolerance)\n    //response.writer.println(diff.toString())\n    ImageIO.write(ImageIO.read(File(\"diffedFile.png\")), \"PNG\", response.outputStream)\n    response.addHeader(\"diff\", diff.toString())\n}\n</code></pre>\n\n<p>This works fine, however, the header doesn't contain diff. When I use comment out the ImageIO line and uncomment the one above it, the already commented out one, and change the content type to <code>text/plain</code> diff is included in the headers.</p>\n\n<p>The headers with the image:</p>\n\n<pre><code>Date: Mon, 13 May 2019 22:03:35 GMT\nContent-Type: image/png\nTransfer-Encoding: chunked\nServer: Jetty(9.4.18.v20190429)\n</code></pre>\n\n<p>The headers without the image (As described in the latter case)</p>\n\n<pre><code>Date: Mon, 13 May 2019 22:10:32 GMT\nContent-Type: text/plain;charset=iso-8859-1\ndiff: 62.62626262626263\nContent-Length: 19\nServer: Jetty(9.4.18.v20190429)\n</code></pre>\n\n<p>Am I doing something wrong with Jetty? Can HTTP response images not contain images? I realize I could just return a zip file containing the image and text but I think that's a bit much. Am I ignoring something fundamental to HTTP requests? Please let me know.</p>\n"}]