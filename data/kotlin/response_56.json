[{"tags": ["java", "intellij-idea", "gradle", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "edited": false, "score": 0, "creation_date": 1454542446, "post_id": 35179033, "comment_id": 58096758, "body": "I used the second suggestion. When I upgraded gradle&#39;s kotlin to match intellij, it complained that a few dependencies (Kotlin module for jackson) were on older ABI."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "edited": false, "score": 1, "creation_date": 1454557235, "post_id": 35179033, "comment_id": 58101141, "body": "There is a EAP build of that library @JasperBlues, and in the #eap channel on the Kotlin Slack chat are the specifics for the library release and temporary repo during the private EAP.    If you are in Slack, <a href=\"https://kotlinlang.slack.com/archives/eap/p1454443147000351\" rel=\"nofollow noreferrer\">kotlinlang.slack.com/archives/eap/p1454443147000351</a> if not add maven repo <code>http:&#47;&#47;dl.bintray.com&#47;jaysonminard&#47;kohesive</code> and use the jackson kotlin module that best matches <code>2.5.5-RC-1025</code>, <code>2.6.5-RC-1025</code> and <code>2.7.0-RC-1025</code>"}, {"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1454557837, "post_id": 35179033, "comment_id": 58101363, "body": "Thank you @JaysonMinard, I&#39;ll join the Slack channel. Would be happy to test EAP releases."}, {"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "edited": false, "score": 0, "creation_date": 1454557960, "post_id": 35179033, "comment_id": 58101401, "body": "Erm. . is that a community Slack channel? How to join?"}, {"owner": {"reputation": 6938, "user_id": 667810, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4197ff9557ceffd5662a7ae5e9dfc90?s=128&d=identicon&r=PG", "display_name": "rmtheis", "link": "https://stackoverflow.com/users/667810/rmtheis"}, "edited": false, "score": 0, "creation_date": 1509402555, "post_id": 35179033, "comment_id": 80997434, "body": "What does RC stand for?"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 5, "last_activity_date": 1454597561, "last_edit_date": 1454597561, "creation_date": 1454507778, "answer_id": 35179033, "question_id": 35178407, "link": "https://stackoverflow.com/questions/35178407/get-intellij-kotlin-plugin-and-gradle-to-match-up/35179033#35179033", "title": "Get IntelliJ Kotlin plugin and gradle to match up", "body": "<p>In short, Kotlin IDEA plugin RC (<code>1.0.0-rc-1007</code>, <code>1017</code>, <code>1025</code>) is incompatible with Beta libraries, and RC libraries builds are not on Maven Central yet.</p>\n\n<p>To use them, you have to add the EAP repository:</p>\n\n<pre><code>repositories {\n    // ...\n    maven { url 'https://dl.bintray.com/kotlin/kotlin-eap/' }\n}\n</code></pre>\n\n<p>to both <code>buildscript</code> and the project part.</p>\n\n<p>Also, your <code>kotlin_version</code> is incorrect, it shouldn't have <code>-IJ143-11</code> part. Use <code>1.0.0-rc-1025</code>.</p>\n\n<p>The other solution is to rollback Kotlin plugin to Beta version, which involves deleting it (<code>plugins</code> subfolder of IDEA installation, as it is preinstalled in EAP 16) and installing the Beta again from ZIP distribution.</p>\n\n<p>To learn more about EAP builds, please refer to <a href=\"https://discuss.kotlinlang.org/t/kotlin-early-access-preview-updated/1437\" rel=\"nofollow\">this topic</a>.</p>\n\n<p><hr></p>\n\n<h1>UPD:</h1>\n\n<p>The RC has been released along with the artifacts.</p>\n"}], "owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1163, "favorite_count": 0, "accepted_answer_id": 35179033, "answer_count": 1, "score": 2, "last_activity_date": 1454597561, "creation_date": 1454506098, "question_id": 35178407, "link": "https://stackoverflow.com/questions/35178407/get-intellij-kotlin-plugin-and-gradle-to-match-up", "title": "Get IntelliJ Kotlin plugin and gradle to match up", "body": "<p>I'm trying IntelliJ 16, early access version, but my project won't compile with: </p>\n\n<pre><code>Error:(16, 17) Kotlin: Unresolved reference: substring\n(note: this may be caused by the fact that some classes compiled with \nan incompatible version of Kotlin were found in the classpath. Such \nclasses cannot be loaded properly by this version of Kotlin compiler. \n</code></pre>\n\n<p>Presumably the Gradle and IntelliJ versions of Kotlin need to match up, but the installed Kotlin plugin is: <code>1.0.0-rc-1007-IJ143-11</code></p>\n\n<p>I don't see this in any public repository. The latest one I have declared in the gradle project is:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = ' 1.0.0-rc-1007-IJ143-11'\n</code></pre>\n\n<p>. . can IntelliJ 16 be used with Kotlin and Gradle? </p>\n"}, {"tags": ["java", "spring", "intellij-idea", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1454513549, "post_id": 35177535, "comment_id": 58079258, "body": "Show us the single web integration test please."}, {"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1454540180, "post_id": 35177535, "comment_id": 58095893, "body": "there you go @miensol, thanks"}, {"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1454542541, "post_id": 35177535, "comment_id": 58096799, "body": "thankfully it seems to work on IntelliJ 16 (EAP), which is good to go again, after solving this: <a href=\"http://stackoverflow.com/q/35178407/404201\">stackoverflow.com/q/35178407/404201</a>"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1454566731, "post_id": 35177535, "comment_id": 58104454, "body": "I suspect the problem you might be encountering is caused by differences in how gradle spring boot plugin and idea treat resources. You can verify that by checking if the single, now failing, test still fails after a Rebuild Project invoked inside Idea."}, {"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1454572177, "post_id": 35177535, "comment_id": 58107078, "body": "@miensol That certainly sounds plausible. I couldn&#39;t tell you with absolute certainty, because I went back to IntelliJ 15 (I&#39;ve been using the 16 EAP) to verify your suggestion, and it has stopped happening."}], "answers": [{"tags": [], "owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "is_accepted": true, "score": 1, "last_activity_date": 1470170568, "creation_date": 1470170568, "answer_id": 38730094, "question_id": 35177535, "link": "https://stackoverflow.com/questions/35177535/spring-boot-cant-run-single-test-in-intellij/38730094#38730094", "title": "Spring Boot can&#39;t run single test in IntelliJ", "body": "<p>This is a bug, logged in the <a href=\"https://youtrack.jetbrains.com/issue/KT-10814\" rel=\"nofollow\">IntelliJ/Kotlin tracker</a>, with a pending fix. </p>\n"}], "owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1909, "favorite_count": 0, "accepted_answer_id": 38730094, "answer_count": 1, "score": 7, "last_activity_date": 1470170568, "creation_date": 1454503677, "last_edit_date": 1454540145, "question_id": 35177535, "link": "https://stackoverflow.com/questions/35177535/spring-boot-cant-run-single-test-in-intellij", "title": "Spring Boot can&#39;t run single test in IntelliJ", "body": "<p>This started happening recently, but I'm not sure what changed to cause it. </p>\n\n<ul>\n<li>When I run all tests from IntelliJ, all is well. Also the gradle build is fine. </li>\n<li>When I run a single unit test, all is well. </li>\n<li>When I run a single web integration test, it fails because a config class has all null properties. </li>\n</ul>\n\n<p>The config class looks like (Kotlin): </p>\n\n<pre><code>@Component\n@ConfigurationProperties(prefix = \"api\")\npublic open class ApiConfigImpl : ApiConfig\n{ \n</code></pre>\n\n<p>A test looks like: </p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner::class)\n@ContextConfiguration(classes = arrayOf(ApplicationAssembly::class), loader = SpringApplicationContextLoader::class)\n@WebIntegrationTest\nopen class CandidateProfileControllerTest\n{\n\n    @Inject lateinit var profileRepo: CandidateProfileRepository\n    //etc a few more deps used to setup test data\n\n    @Test\n    open fun getById()\n    {\n        val greg = CandidateProfile(\"123\", \"12312\", \"Greg\", \"Jones\",   dateOfBirth = Date(), gender = Gender.MALE,\n            biography = \"ABC\", maxMatchableAge = null,   maxMatchableDistance = null)\n        profileRepo.save(greg)\n\n        val auth = given().header(\"content-type\", \"application/json\")\n            .body(testCredentials)\n            .post(\"/authorization/social\").peek().asString()\n        val accessToken: String = from(auth).get(\"accessToken\")\n\n        given().header(\"Access-Token\", accessToken).\n            header(\"API-Key\", testAPIKey()).\n            get(\"/profile/${greg.id}\").\n            peek().then().\n            body(\"stageName\", notNullValue())\n    }\n</code></pre>\n\n<p>I'm not sure what information I can add. Based on the limited information provided: </p>\n\n<ul>\n<li>Is this a known problem with a known solution? </li>\n</ul>\n"}, {"tags": ["intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 0, "creation_date": 1454472842, "post_id": 35168285, "comment_id": 58054862, "body": "by what process did you invalidate caches? i&#39;m intrigued! i have never done this and sounds mysterious. [ctrl-shift-A &quot;invalidate&quot;]==mind_blown!!!"}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "reply_to_user": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 0, "creation_date": 1454472996, "post_id": 35168285, "comment_id": 58054906, "body": "this is an action in idea - often helps solving problems - but not this one ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1454495613, "post_id": 35170452, "comment_id": 58066291, "body": "Spot on! Just to note to @ligi that 1025 is the latest EAP Kotlin build."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1454496541, "post_id": 35170452, "comment_id": 58066981, "body": "To update the plugin to a later EAP, the Tools -&gt; Kotlin -&gt; Configure Kotlin Plugin Updates needs to be set to EAP releases, otherwise you will be stuck at the installed version until the next public release.  Intellij IDEA 16 EAP seems to have updated to include Kotlin EAP silently."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 4, "last_activity_date": 1455603671, "last_edit_date": 1455603671, "creation_date": 1454482771, "answer_id": 35170452, "question_id": 35168285, "link": "https://stackoverflow.com/questions/35168285/the-binary-version-of-its-metadata-is-1-0-1-expected-version-is-1-1-0/35170452#35170452", "title": "The binary version of its metadata is 1.0.1, expected version is 1.1.0", "body": "<p>The problem seems to be mismatch between the kotlin library used in your project and the version of the plugin are not compatible. </p>\n\n<p>Check the Kotlin plugin version and you'll most likely see something similar to: </p>\n\n<blockquote>\n  <p>Version: 1.0.0-rc-1007-IJ143-11</p>\n</blockquote>\n\n<p>Then check the version of the Kotlin libraries by looking into <code>META-INF/build.txt</code> or <code>META-INF/MANIFEST.MF</code> and it'll most likely be other version like <code>1.0.0-beta-4589</code>.</p>\n\n<p>To resolve the problem update Kotlin libraries to version <code>1.0.0-rc-1007</code> which can be found in this maven repository: <a href=\"https://dl.bintray.com/kotlin/kotlin-eap\" rel=\"nofollow\">https://dl.bintray.com/kotlin/kotlin-eap</a>.</p>\n\n<p>Kotlin compiler marks each <code>.class</code> with <a href=\"https://github.com/JetBrains/kotlin/blob/master/core/runtime.jvm/src/kotlin/Metadata.kt\" rel=\"nofollow\"><code>@kotlin.Metadata</code></a> to indicate, among others:</p>\n\n<blockquote>\n  <p>The version of the bytecode interface (naming conventions, signatures) of the class file annotated with this annotation.</p>\n</blockquote>\n\n<p>That is how the compiler detected incompatibilities.</p>\n"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 935, "favorite_count": 0, "accepted_answer_id": 35170452, "answer_count": 1, "score": 4, "last_activity_date": 1455603671, "creation_date": 1454472147, "question_id": 35168285, "link": "https://stackoverflow.com/questions/35168285/the-binary-version-of-its-metadata-is-1-0-1-expected-version-is-1-1-0", "title": "The binary version of its metadata is 1.0.1, expected version is 1.1.0", "body": "<p>In intellij idea 16 EAP 144.3357.4 I have a pure Kotlin cmd project currently refusing to run with this error:</p>\n\n<pre><code>The binary version of its metadata is 1.0.1, expected version is 1.1.0 \n</code></pre>\n\n<p>The project runs on the command-line - I invalidated caches and restarted Idea - nothing helped. Anyone had the same problem and found a way to get it working?</p>\n"}, {"tags": ["java", "lambda", "kotlin"], "comments": [{"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "edited": false, "score": 3, "creation_date": 1454449813, "post_id": 35161913, "comment_id": 58047377, "body": "First off, the function you defined does not have the same name as the one you&#39;re calling (First vs FirstOrDefault)."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1454452279, "post_id": 35161913, "comment_id": 58048597, "body": "How are you compiling your Java project?"}, {"owner": {"reputation": 1492, "user_id": 1529758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8bbe326bfddbbb2b78912a023127a5df?s=128&d=identicon&r=PG", "display_name": "06needhamt", "link": "https://stackoverflow.com/users/1529758/06needhamt"}, "edited": false, "score": 0, "creation_date": 1454496249, "post_id": 35161913, "comment_id": 58066754, "body": "Using gradle and IntelliJ 15 and I fixed the typo"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 2, "creation_date": 1454501223, "post_id": 35161913, "comment_id": 58070177, "body": "Does your Java module include the Kotlin runtime in its dependencies? It needs to."}, {"owner": {"reputation": 1492, "user_id": 1529758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8bbe326bfddbbb2b78912a023127a5df?s=128&d=identicon&r=PG", "display_name": "06needhamt", "link": "https://stackoverflow.com/users/1529758/06needhamt"}, "edited": false, "score": 0, "creation_date": 1454509073, "post_id": 35161913, "comment_id": 58075867, "body": "Yes it does all three jars"}], "answers": [{"comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1454501194, "post_id": 35176389, "comment_id": 58070153, "body": "Sorry, this is not helpful. The <code>Function1</code> class is part of the Kotlin standard library, so neither of your suggestions is applicable."}, {"owner": {"reputation": 1492, "user_id": 1529758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8bbe326bfddbbb2b78912a023127a5df?s=128&d=identicon&r=PG", "display_name": "06needhamt", "link": "https://stackoverflow.com/users/1529758/06needhamt"}, "edited": false, "score": 0, "creation_date": 1454509051, "post_id": 35176389, "comment_id": 58075832, "body": "This is not the issue"}], "tags": [], "owner": {"reputation": 153, "user_id": 5826224, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-2fM-R7YD4Ns/AAAAAAAAAAI/AAAAAAAAABY/TkM3-g9hHqY/photo.jpg?sz=128", "display_name": "Adhish Lal", "link": "https://stackoverflow.com/users/5826224/adhish-lal"}, "is_accepted": false, "score": -6, "last_activity_date": 1454500579, "creation_date": 1454500579, "answer_id": 35176389, "question_id": 35161913, "link": "https://stackoverflow.com/questions/35161913/kotlin-cannot-access-kotlin-jvm-functions-function1-when-calling-kotlin-function/35176389#35176389", "title": "Kotlin cannot access kotlin.jvm.functions.Function1 when calling kotlin function with java lambda", "body": "<p>Method 1) Search for Function1 in your project file and rename it to First.</p>\n\n<p>Method 2) Search for Function1 in your project file and remove all its occurrences.</p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 7707781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ae4251b1ffd2a87120105cdf8e0c5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/7707781/tom"}, "edited": false, "score": 1, "creation_date": 1562552551, "post_id": 55742956, "comment_id": 100396666, "body": "I can&#39;t setting it .  I try to create one kotlin.kt file and then do follow IDE ,fix my problem.  [AndroidStudio3.4\uff0fkotlin1.3.41\uff0f2019-07-08 10:26:19]"}, {"owner": {"reputation": 3847, "user_id": 4399414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qcmua.jpg?s=128&g=1", "display_name": "Sdghasemi", "link": "https://stackoverflow.com/users/4399414/sdghasemi"}, "reply_to_user": {"reputation": 101, "user_id": 7707781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ae4251b1ffd2a87120105cdf8e0c5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/7707781/tom"}, "edited": false, "score": 0, "creation_date": 1562559593, "post_id": 55742956, "comment_id": 100397787, "body": "This useful when your project is based on java but you need to use a kotlin based and use its functions inside your java code."}], "tags": [], "owner": {"reputation": 3847, "user_id": 4399414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qcmua.jpg?s=128&g=1", "display_name": "Sdghasemi", "link": "https://stackoverflow.com/users/4399414/sdghasemi"}, "is_accepted": true, "score": 15, "last_activity_date": 1555579353, "creation_date": 1555579353, "answer_id": 55742956, "question_id": 35161913, "link": "https://stackoverflow.com/questions/35161913/kotlin-cannot-access-kotlin-jvm-functions-function1-when-calling-kotlin-function/55742956#55742956", "title": "Kotlin cannot access kotlin.jvm.functions.Function1 when calling kotlin function with java lambda", "body": "<p>My problem got fixed when I configured Kotlin compiler and runtime for my Java module with the latest stable version (currently 1.3.30)</p>\n\n<p>Just go to <strong>Tools > Kotlin > Configure Kotlin in Project > Android with Gradle</strong> and choose your Java module with <strong>Single module</strong> radio button selected then select your version and <strong>OK</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 1034, "user_id": 10976088, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9Hw2Eb3kxrU/AAAAAAAAAAI/AAAAAAAAAAw/8ZbjGpQKqcw/photo.jpg?sz=128", "display_name": "Ghasem Sadeghi", "link": "https://stackoverflow.com/users/10976088/ghasem-sadeghi"}, "is_accepted": false, "score": 5, "last_activity_date": 1575098787, "creation_date": 1575098787, "answer_id": 59114147, "question_id": 35161913, "link": "https://stackoverflow.com/questions/35161913/kotlin-cannot-access-kotlin-jvm-functions-function1-when-calling-kotlin-function/59114147#59114147", "title": "Kotlin cannot access kotlin.jvm.functions.Function1 when calling kotlin function with java lambda", "body": "<p><strong>Another Solution:</strong><br></p>\n\n<p>If you have several modules in your android project, please make sure you have added the below config to every module that uses the kotlin:<br></p>\n\n<p><strong>Step(1)- Project build.gradle:<br></strong></p>\n\n<pre><code>// Project build.gradle file.\nbuildscript {\n    ext.kotlin_version = '1.3.30'\n    ...\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\n</code></pre>\n\n<p><strong>Step(2)- Inside each module using kotlin:<br></strong></p>\n\n<pre><code>apply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-android'\n\n...\n\ndependencies {\n   implementation \"androidx.core:core-ktx:1.0.1\"\n   implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n}\n\n</code></pre>\n\n<p>Reference:\n<a href=\"https://developer.android.com/kotlin/add-kotlin\" rel=\"noreferrer\">Add Kotlin to an existing app</a></p>\n"}], "owner": {"reputation": 1492, "user_id": 1529758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8bbe326bfddbbb2b78912a023127a5df?s=128&d=identicon&r=PG", "display_name": "06needhamt", "link": "https://stackoverflow.com/users/1529758/06needhamt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8468, "favorite_count": 2, "accepted_answer_id": 55742956, "answer_count": 3, "score": 12, "last_activity_date": 1575098787, "creation_date": 1454440323, "last_edit_date": 1454496211, "question_id": 35161913, "link": "https://stackoverflow.com/questions/35161913/kotlin-cannot-access-kotlin-jvm-functions-function1-when-calling-kotlin-function", "title": "Kotlin cannot access kotlin.jvm.functions.Function1 when calling kotlin function with java lambda", "body": "<p>I am trying to call the following Kotlin function from Java </p>\n\n<pre><code>override fun First(list: LinqList&lt;ElementType&gt;, condition: (ElementType) -&gt; Boolean) : ElementType\n</code></pre>\n\n<p>like this</p>\n\n<pre><code>int first = list.First(list,(x) -&gt; x == 5);\n</code></pre>\n\n<p>but i get the following error </p>\n\n<pre><code>Error java: cannot access kotlin.jvm.functions.Function1\n  class file for kotlin.jvm.functions.Function1 not found\n</code></pre>\n\n<p>I have tried googling it but i can not find the answer anywhere </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["android", "module", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 4714896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/889156ae804cb1ded101f016ec48fbf0?s=128&d=identicon&r=PG&f=1", "display_name": "stphven", "link": "https://stackoverflow.com/users/4714896/stphven"}, "is_accepted": false, "score": 4, "last_activity_date": 1454479195, "creation_date": 1454479195, "answer_id": 35169563, "question_id": 35154402, "link": "https://stackoverflow.com/questions/35154402/unresolved-reference-to-debug-directory-in-kotlin-library-module/35169563#35169563", "title": "Unresolved reference to debug directory in kotlin library module", "body": "<p>I've determined that my issue is caused by this bug in the Android Gradle plugin: <a href=\"https://code.google.com/p/android/issues/detail?id=52962\" rel=\"nofollow\">https://code.google.com/p/android/issues/detail?id=52962</a></p>\n\n<p>From the documentation: \"By default a library only publishes its release variant.\" While this issue is public knowledge, I found it surprisingly difficult to identify - it's one of those \"you either know about it or you don't\" gotchas.</p>\n\n<p>Anyway, know that I know about it I've been able to resolve it. See the comments in the link for solutions.</p>\n"}, {"tags": [], "owner": {"reputation": 24386, "user_id": 1502079, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/i6NsY.jpg?s=128&g=1", "display_name": "vovahost", "link": "https://stackoverflow.com/users/1502079/vovahost"}, "is_accepted": false, "score": 0, "last_activity_date": 1516048561, "creation_date": 1516048561, "answer_id": 48270320, "question_id": 35154402, "link": "https://stackoverflow.com/questions/35154402/unresolved-reference-to-debug-directory-in-kotlin-library-module/48270320#48270320", "title": "Unresolved reference to debug directory in kotlin library module", "body": "<p>If you're having a problem with debugging Kotlin code check out my answer here <a href=\"https://stackoverflow.com/a/48270306/1502079\">https://stackoverflow.com/a/48270306/1502079</a>.</p>\n\n<p>In my case the issue was a caused by <strong>Instant run</strong>.</p>\n"}], "owner": {"reputation": 75, "user_id": 4714896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/889156ae804cb1ded101f016ec48fbf0?s=128&d=identicon&r=PG&f=1", "display_name": "stphven", "link": "https://stackoverflow.com/users/4714896/stphven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2590, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1516048561, "creation_date": 1454418474, "question_id": 35154402, "link": "https://stackoverflow.com/questions/35154402/unresolved-reference-to-debug-directory-in-kotlin-library-module", "title": "Unresolved reference to debug directory in kotlin library module", "body": "<p>I'm using Kotlin for the first time to develop an Android app. Currently I'm working on a library module (\"data\") inside my project, separate from the main app module:</p>\n\n<pre><code>&gt; [Root directory]\n    &gt; app\n        &gt; [...]\n    &gt; data\n        &gt; src\n            &gt; debug\n                &gt; kotlin \n                    &gt; com.domain.app\n                        &gt; [...]\n            &gt; main\n                &gt; kotlin \n                    &gt; com.domain.app\n                        &gt; [...]\n            &gt; release\n                &gt; kotlin \n                    &gt; com.domain.app\n                        &gt; [...]\n</code></pre>\n\n<p>I've come across a snag: whenever a file inside <em>data.src.main</em> references a file inside <em>data.src.debug</em>, the build process fails with the message \"Unresolved reference: [class name]\". However, it <strong>doesn't</strong> fail when I reference files inside <em>data.src.release</em>. In both cases I've triple checked the syntax, directories, and build variants.</p>\n\n<p>I haven't modified the debug or release build types inside my build.gradle files - I'm using whatever their default settings are. My source sets are:</p>\n\n<pre><code>android {\n  ...\n  sourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n    debug.java.srcDirs += 'src/debug/kotlin'\n    release.java.srcDirs += 'src/release/\n  }\n}\n</code></pre>\n\n<p>The module is using the '<em>com.android.library</em>' and '<em>kotlin-android</em>' plugins. All the files I've tested with so far have been Kotlin files, though I don't know if this is a Kotlin issue or something else. Kotlin has otherwise been behaving.</p>\n\n<p>I figured this <em>might</em> be caused by the default debug settings, but I also testing <em>app.src.main</em> referencing <em>app.src.debug</em>, and that works correctly despite using the same default settings.</p>\n"}, {"tags": ["javafx", "kotlin"], "comments": [{"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1454448720, "post_id": 35151707, "comment_id": 58046807, "body": "Your code is fine and worked as expected in my pc with my implementation of <code>UnborderedStage</code>. Check for exceptions and post the code of class <code>UnborderedStage</code>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1454474707, "post_id": 35151707, "comment_id": 58055452, "body": "Try to replace <code>?.</code> with an assertion: <code>actionByConfirm!!.invoke()</code>. Does it throw?"}], "owner": {"reputation": 2626, "user_id": 4495175, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/zycJD.jpg?s=128&g=1", "display_name": "Letfar", "link": "https://stackoverflow.com/users/4495175/letfar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1454411090, "creation_date": 1454411090, "question_id": 35151707, "link": "https://stackoverflow.com/questions/35151707/handy-confirm-javafx-dialog-in-kotlin", "title": "Handy confirm javafx dialog in kotlin", "body": "<p>I'm trying to write own confirm dialog, using JavaFX, that would call lambda expression when <em>okButton</em> is pressed.</p>\n\n<pre><code>ConfirmDialog.show(\"Delete selected items?\") {\n    // actions...\n}\n</code></pre>\n\n<p>The problem in this implementation is that <code>actionByConfirm</code> from <code>show()</code> function is never called. Please tell me, how to correct it?</p>\n\n<pre><code>object ConfirmDialog : UnborderedStage() {\n    override val pathToScene: String\n        get() = \"/module/main/confirm/confirm.fxml\"\n\n\n    val title: Label\n\n    val okButton: Button\n    val cancelButton: Button\n\n    var actionByConfirm: (() -&gt; Unit)? = null\n\n    init {\n        title = scene.lookup(\"#title\") as Label\n        okButton = scene.lookup(\"#buttonOk\") as Button\n        cancelButton = scene.lookup(\"#buttonCancel\") as Button\n\n        okButton.setOnMouseClicked {\n            actionByConfirm?.invoke()\n            hide()\n        }\n\n        cancelButton.setOnMouseClicked { hide() }\n    }\n\n    fun show(title: String, actionByConfirm: () -&gt; Unit) {\n        this.title.text = title\n        this.actionByConfirm = actionByConfirm\n        show()\n    }\n}\n</code></pre>\n\n<p>*UnborderedStage is the same Stage, but with <em>StageStyle.UNDECORATED</em> and <em>close</em> action by focuse out.</p>\n"}, {"tags": ["kotlin", "annotation-processing"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1454402731, "post_id": 35146413, "comment_id": 58016184, "body": "How exactly are you compiling your application?"}, {"owner": {"reputation": 7190, "user_id": 1584931, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/210b97cdd2f03f14ce874e23b7b52c73?s=128&d=identicon&r=PG", "display_name": "Bradley Campbell", "link": "https://stackoverflow.com/users/1584931/bradley-campbell"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1454406974, "post_id": 35146413, "comment_id": 58018958, "body": "Using the kotlin-android gradle plugin. Sorry, that&#39;s a pretty important detail."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1454435863, "post_id": 35146413, "comment_id": 58039358, "body": "Can you post a sample project that demonstrates the issue?"}, {"owner": {"reputation": 7190, "user_id": 1584931, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/210b97cdd2f03f14ce874e23b7b52c73?s=128&d=identicon&r=PG", "display_name": "Bradley Campbell", "link": "https://stackoverflow.com/users/1584931/bradley-campbell"}, "edited": false, "score": 1, "creation_date": 1454439790, "post_id": 35146413, "comment_id": 58041678, "body": "Yes. I just added a branch to my project with the broken code: <a href=\"https://github.com/grandstaish/paperparcel/tree/kotlin-extensions\" rel=\"nofollow noreferrer\">github.com/grandstaish/paperparcel/tree/kotlin-extensions</a>. Just open the source in Android Studio or Intellij and build the entire project. The kotlin-example app will fail to build."}, {"owner": {"reputation": 1611, "user_id": 1306579, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/7GIkj.png?s=128&g=1", "display_name": "wnc_21", "link": "https://stackoverflow.com/users/1306579/wnc-21"}, "edited": false, "score": 0, "creation_date": 1493370880, "post_id": 35146413, "comment_id": 74398809, "body": "Is there any similar issue in the KEEP/kotlin tracking system?"}], "answers": [{"tags": [], "owner": {"reputation": 373, "user_id": 2845248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2BKDg.jpg?s=128&g=1", "display_name": "Alexander Blinov", "link": "https://stackoverflow.com/users/2845248/alexander-blinov"}, "is_accepted": false, "score": 2, "last_activity_date": 1476609831, "creation_date": 1476609831, "answer_id": 40068774, "question_id": 35146413, "link": "https://stackoverflow.com/questions/35146413/how-to-generate-a-kotlin-file-from-an-annotation-processor/40068774#40068774", "title": "How to generate a kotlin file from an annotation processor?", "body": "<p>For kapt you can get source folder via. </p>\n\n<pre><code>Map&lt;String, String&gt; options = processingEnv.getOptions();\n                String generatedPath = options.get(\"kapt.kotlin.generated\");\n\nString path = generatedPath\n                    .replaceAll(\"(.*)tmp(/kapt/debug/)kotlinGenerated\",\n                            \"$1generated/source$2\");\n</code></pre>\n\n<p>Unfortunately it doesn't work for kapt2 (see issue <a href=\"https://youtrack.jetbrains.com/issue/KT-14070\" rel=\"nofollow\">KT-14070</a>)</p>\n\n<p>You also can create .kt files via resource writer</p>\n\n<pre><code>Writer w = processingEnv.getFiler().createResource(SOURCE_OUTPUT, \"package_name\", \"Sample.kt\")\n</code></pre>\n\n<p>But for now you need to invoke compiler twice cause compileDebugKotlin task runs before invoking javax annotation processor by compileDebugJavaWithJavac task)    </p>\n"}, {"tags": [], "owner": {"reputation": 5494, "user_id": 342947, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a737f13056e480e90f1b8bb943bc3cb1?s=128&d=identicon&r=PG", "display_name": "Fabian Zeindl", "link": "https://stackoverflow.com/users/342947/fabian-zeindl"}, "is_accepted": false, "score": 0, "last_activity_date": 1488962792, "creation_date": 1488962792, "answer_id": 42666694, "question_id": 35146413, "link": "https://stackoverflow.com/questions/35146413/how-to-generate-a-kotlin-file-from-an-annotation-processor/42666694#42666694", "title": "How to generate a kotlin file from an annotation processor?", "body": "<p>Output your files (with proper package names) into a directory like <code>src/build/generated-src/kotlin/your/package/File.kt</code></p>\n\n<p>and add this to your <code>build.gradle</code>: </p>\n\n<pre><code>sourceSets {\n    main.java.srcDirs += 'build/generated-src/kotlin'\n}\n</code></pre>\n"}], "owner": {"reputation": 7190, "user_id": 1584931, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/210b97cdd2f03f14ce874e23b7b52c73?s=128&d=identicon&r=PG", "display_name": "Bradley Campbell", "link": "https://stackoverflow.com/users/1584931/bradley-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1599, "favorite_count": 3, "answer_count": 2, "score": 19, "last_activity_date": 1488962792, "creation_date": 1454394032, "question_id": 35146413, "link": "https://stackoverflow.com/questions/35146413/how-to-generate-a-kotlin-file-from-an-annotation-processor", "title": "How to generate a kotlin file from an annotation processor?", "body": "<p>I have a java annotation processor which generates a bunch of java files during compilation. I'd like to make the generated classes nicer to use in kotlin by adding extension methods. I've been told on the kotlin forums that something I could try would be to write a kotlin file that contains my extension functions. I've tried this, I used the <code>Filer</code> object to create this file outputting it to the StandardLocations.SOURCE_OUTPUT directory. Intellij can see my generated class, and I can use the extension functions as intended, but the app won't compile because the compiler can't find the new kotlin file. Is there any way I can write a new kotlin file that'll get picked up by the kotlin compiler? </p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 0, "creation_date": 1454384247, "post_id": 35144319, "comment_id": 58009048, "body": "I really like the idea but it is very slow to generate and the resulting sequence can only be consumed once. The scala version can give me the 1000th prime in under a second so that would be what I&#39;d expect to achieve. +1 for the idea though"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 1, "creation_date": 1454420395, "post_id": 35144319, "comment_id": 58028318, "body": "@LionelPort agreed. I&#39;ve added a caching example that can be consumed more than once. It generated the first 1000 primes for me in ~50 milliseconds."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 3, "last_activity_date": 1454430614, "last_edit_date": 1454430614, "creation_date": 1454382264, "answer_id": 35144319, "question_id": 35142548, "link": "https://stackoverflow.com/questions/35142548/recursive-definition-of-infinite-sequence-in-kotlin/35144319#35144319", "title": "Recursive definition of infinite sequence in Kotlin", "body": "<p>You can place the <code>Sequence&lt;Int&gt;</code> concatenation inside of a <code>Sequence&lt;Sequence&lt;Int&gt;&gt;</code> generator and then flatten it to a <code>Sequence&lt;Int&gt;</code> again:</p>\n\n\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun primes(seq: Sequence&lt;Int&gt;): Sequence&lt;Int&gt; = sequence {\n    seq.take(1) + primes(seq.drop(1).filter { it % seq.first() != 0 })\n}.flatMap { it }\nval primes = primes(sequence(2) { it + 1 })\n</code></pre>\n\n<p>Output: <code>[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71]</code></p>\n\n<p>It seems a bit slow though. What you probably want is to cache each result in a list and build off of it instead of recalculating the primes recursively. e.g.:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun primes() = with(arrayListOf(2, 3)) {\n    asSequence() + sequence(last() + 2) { it + 2 }\n            .filter { all { prime -&gt; it % prime != 0 } }\n            .map { it.apply { add(it) } }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1454418627, "post_id": 35144849, "comment_id": 58027077, "body": "FYI: That solution doesn&#39;t currently work: <code>[2, 3, 4, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67]</code> is not <code>[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71]</code>."}, {"owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1454452514, "post_id": 35144849, "comment_id": 58048709, "body": "@mfulton26 Thanks, I see I missed filtering multiples of 2 by starting the sequence at 3. Updated with your fix."}], "tags": [], "owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "is_accepted": false, "score": 1, "last_activity_date": 1454452393, "last_edit_date": 1454452393, "creation_date": 1454385945, "answer_id": 35144849, "question_id": 35142548, "link": "https://stackoverflow.com/questions/35142548/recursive-definition-of-infinite-sequence-in-kotlin/35144849#35144849", "title": "Recursive definition of infinite sequence in Kotlin", "body": "<p>My current answer is not to use a recursive function. I can get still get an infinite sequence of primes by modelling the sequence as a pair of values with the first the prime number and the second the current filtered sequence. I then apply the map to only select the first element.</p>\n\n<pre><code>val primes = sequence(2 to sequence(3) {it + 2}) {\n    val currSeq = it.second\n    val nextPrime = currSeq.first()\n    nextPrime to currSeq.filter { it % nextPrime != 0}\n}.map {it.first}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1454453928, "post_id": 35164370, "comment_id": 58049314, "body": "Nice. I wonder why <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/kotlin.-sequence/plus.html\" rel=\"nofollow noreferrer\"><code>Sequence&lt;T&gt;.plus(Sequence&lt;T&gt;)</code></a> isn&#39;t lazy like you&#39;ve implemented <code>lazyPlus</code>..."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1454455249, "post_id": 35164370, "comment_id": 58049786, "body": "Well, <code>Sequence&lt;T&gt;.plus(...)</code> is just not lazy enough. :) Items of the resulting <code>Sequence&lt;T&gt;</code> are evaluated lazily, but the <code>Sequence&lt;T&gt;</code> object in right operand is evaluated eagerly, which we need to avoid here as it would lead to <code>StackOverflowError</code>."}, {"owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 0, "creation_date": 1454456420, "post_id": 35164370, "comment_id": 58050196, "body": "This is great as a common library function. It works fast for me. Are you able to explain the need to convert the sequence to an iterator and back again in the implementation of the primesFilter? It seems like a bit of a gotcha if you don&#39;t do it then I think the lazy evaluation doesn&#39;t work. Is there any possibility to not require this?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 0, "creation_date": 1454457039, "post_id": 35164370, "comment_id": 58050415, "body": "@LionelPort, also, I&#39;ve been playing around with sequences recently and you can see my related <a href=\"http://stackoverflow.com/questions/35114716/how-to-modify-a-prefix-of-a-kotlin-sequence-but-retain-the-tail\">question &amp; answer</a>. The <code>Iterator</code> trick is needed to pass the actual sequence&#39;s tail into the lazy right operand. It is achieved by passing around the <code>Iterator</code> instead of <code>Sequence</code>: that would create a new <code>Iterator</code> each time which in turn would start the sequence over."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 0, "creation_date": 1454457354, "post_id": 35164370, "comment_id": 58050524, "body": "@LionelPort UPD: however, I was able to rewrite it without the iterator (using <code>first()</code> and <code>drop(1)</code>), but it works drastically slower, here&#39;s the <a href=\"https://gist.github.com/h0tk3y/9192f6246b6c05ccd1b5\" rel=\"nofollow noreferrer\">gist</a>."}, {"owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 0, "creation_date": 1454459394, "post_id": 35164370, "comment_id": 58051181, "body": "@hotkey Accepting this as it gives a good general purpose utility method. I actually like your gist better and I might be doing it wrong but I&#39;m not seeing any performance difference in my simple tests."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 0, "creation_date": 1454459705, "post_id": 35164370, "comment_id": 58051271, "body": "@LionelPort, seems strange because for 1000 primes I have: version in answer - 0.1s, version in gist - 4.0s. Here&#39;s also a <a href=\"https://gist.github.com/h0tk3y/6dda2b292d8804d72967\" rel=\"nofollow noreferrer\">gist</a> with the iterator trick."}, {"owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 0, "creation_date": 1454462570, "post_id": 35164370, "comment_id": 58052002, "body": "@hotkey Yep, I had a problem with my test case. The iterator approach is significantly faster."}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1497096493, "post_id": 35164370, "comment_id": 75941760, "body": "Is there a way to speed up <code>primesFilter</code> using <code>tailrec</code>?"}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1497348056, "post_id": 35164370, "comment_id": 76028480, "body": "<a href=\"https://blog.jetbrains.com/kotlin/2015/09/whats-new-in-standard-library-m13-and-m14/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2015/09/&hellip;</a> - This blog post seems to indicate that the default plus operator on sequences (as defined in the stdlib) performs lazy concatenation. Was this feature changed?"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 7, "last_activity_date": 1454503376, "last_edit_date": 1454503376, "creation_date": 1454449496, "answer_id": 35164370, "question_id": 35142548, "link": "https://stackoverflow.com/questions/35142548/recursive-definition-of-infinite-sequence-in-kotlin/35164370#35164370", "title": "Recursive definition of infinite sequence in Kotlin", "body": "<p>The key point here is to implement a <code>Sequence</code> transformation so that its first item remains and the tail is <em>lazily</em> transformed from the original <code>Sequence</code> tail to something else. That is, the transformation is done only when the item is requested.</p>\n\n<p>First, let's implement lazy sequence concatenation, which behaves like simple concatenation but the right operand is evaluated lazily:</p>\n\n<pre><code>public infix fun &lt;T&gt; Sequence&lt;T&gt;.lazyPlus(otherGenerator: () -&gt; Sequence&lt;T&gt;) =\n        object : Sequence&lt;T&gt; {\n            private val thisIterator: Iterator&lt;T&gt; by lazy { this@lazyPlus.iterator() }\n            private val otherIterator: Iterator&lt;T&gt; by lazy { otherGenerator().iterator() }\n\n            override fun iterator() = object : Iterator&lt;T&gt; {\n                override fun next(): T =\n                        if (thisIterator.hasNext())\n                            thisIterator.next()\n                        else\n                            otherIterator.next()\n\n                override fun hasNext(): Boolean =\n                        thisIterator.hasNext() || otherIterator.hasNext()\n            }\n        }\n</code></pre>\n\n<p>Laziness of <code>otherIterator</code> does all the trick: <code>otherGenerator</code> will be called only when <code>otherIterator</code> is accessed, that is, when the first sequence finishes.</p>\n\n<p>Now, let's write a recursive variant of the sieve of Eratosthenes:</p>\n\n<pre><code>fun primesFilter(from: Sequence&lt;Int&gt;): Sequence&lt;Int&gt; = from.iterator().let {\n        val current = it.next()\n        sequenceOf(current) lazyPlus {\n            primesFilter(it.asSequence().filter { it % current != 0 })\n        }\n    }\n</code></pre>\n\n<p>Note that <code>lazyPlus</code> allowed us to lazily make another recursive call of <code>primesFilter</code> in the tail of the sequence.</p>\n\n<p>After that, the whole sequence of primes can be expressed as</p>\n\n<pre><code>fun primes(): Sequence&lt;Int&gt; {\n    fun primesFilter(from: Sequence&lt;Int&gt;): Sequence&lt;Int&gt; = from.iterator().let {\n        val current = it.next()\n        sequenceOf(current) lazyPlus {\n            primesFilter(it.asSequence().filter { it % current != 0 })\n        }\n    }\n    return primesFilter((2..Int.MAX_VALUE).asSequence())\n}\n</code></pre>\n\n<p><hr>\nThough this approach isn't very fast. Evaluation of 10,000 primes takes a few seconds, however, the 1000th prime is emitted in about 0.1 second.</p>\n"}], "owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1874, "favorite_count": 3, "accepted_answer_id": 35164370, "answer_count": 3, "score": 9, "last_activity_date": 1454503376, "creation_date": 1454370162, "question_id": 35142548, "link": "https://stackoverflow.com/questions/35142548/recursive-definition-of-infinite-sequence-in-kotlin", "title": "Recursive definition of infinite sequence in Kotlin", "body": "<p>I'm experimenting with the Kotlin sequences and particular the more complicated ones that are not simple calculations on the previous value. </p>\n\n<p>One example I'd like to define is a sequence of all prime numbers.</p>\n\n<p>An easy way to define the next prime is the next integer that is not divisible by any of the previous primes in the sequence.</p>\n\n<p>In Scala this can be translated to:</p>\n\n<pre><code>def primeStream(s: Stream[Int]): Stream[Int] = s.head #:: primeStream(s.tail filter(_ % s.head != 0))\nval primes = primeStream(Stream.from(2))\n\n// first 20 primes\nprimes.take(20).toList \n</code></pre>\n\n<p>I'm having trouble translating this to Kotlin. In scala it works because you can pass function that returns a sequence that will be lazily evaluated but I can't do the same in Kotlin.</p>\n\n<p>In Kotlin I tried</p>\n\n<pre><code>fun primes(seq: Sequence&lt;Int&gt;):Sequence&lt;Int&gt; = sequenceOf(seq.first()) + primes(seq.drop(1).filter {it % seq.first() != 0})\nval primes = primes(sequence(2) {it + 1})\n\nprimes.take(20).toList()\n</code></pre>\n\n<p>But that obviously doesn't work because the function is evaluated straight away and leads to an infinite recursion.</p>\n"}, {"tags": ["java", "kotlin", "try-with-resources"], "answers": [{"comments": [{"owner": {"reputation": 1434, "user_id": 191975, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a0e40ee4636d3ab6fe37f3bbc68d8a75?s=128&d=identicon&r=PG", "display_name": "orjan", "link": "https://stackoverflow.com/users/191975/orjan"}, "edited": false, "score": 0, "creation_date": 1460131618, "post_id": 35137606, "comment_id": 60615605, "body": "<i>As mfulton26 pointed out in his comment kotlin.Throwable doesn&#39;t contain addSuppressed(Throwable) method so we have to cast kotlin.Throwable to java.lang.Throwable to make the code work.</i> <a href=\"http://stackoverflow.com/a/36260918/191975\">stackoverflow.com/a/36260918/191975</a>"}, {"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 2, "creation_date": 1477695447, "post_id": 35137606, "comment_id": 67885782, "body": "i believe this works              @Suppress(&quot;PLATFORM_CLASS_MAPPED_TO_KOTLIN&quot;)             (e as java.lang.Throwable).addSuppressed(closeException)"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 22, "last_activity_date": 1454351531, "last_edit_date": 1454351531, "creation_date": 1454350919, "answer_id": 35137606, "question_id": 35136715, "link": "https://stackoverflow.com/questions/35136715/try-with-resources-use-extension-function-in-kotlin-does-not-always-work/35137606#35137606", "title": "try-with-resources: &quot;use&quot; extension function in Kotlin does not always work", "body": "<p>Kotlin targets Java 6 at the moment, so its standard library does not use the <code>AutoCloseable</code> interface. The <code>use</code> function only supports the Java 6 <code>Closeable</code> interface. See <a href=\"https://youtrack.jetbrains.com/issue/KT-5899\">the issue tracker</a> for reference.</p>\n\n<p>You can create a copy of the <code>use</code> function in your project and modify it to replace <code>Closeable</code> with <code>AutoCloseable</code>:</p>\n\n<pre><code>public inline fun &lt;T : AutoCloseable, R&gt; T.use(block: (T) -&gt; R): R {\n    var closed = false\n    try {\n        return block(this)\n    } catch (e: Exception) {\n        closed = true\n        try {\n            close()\n        } catch (closeException: Exception) {\n            e.addSuppressed(closeException)\n        }\n        throw e\n    } finally {\n        if (!closed) {\n            close()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1203, "user_id": 4342515, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_oRpj7EPDWQ/AAAAAAAAAAI/AAAAAAAAAGE/Ai1BO27JJIs/photo.jpg?sz=128", "display_name": "Mario", "link": "https://stackoverflow.com/users/4342515/mario"}, "is_accepted": false, "score": 1, "last_activity_date": 1459161144, "creation_date": 1459161144, "answer_id": 36260510, "question_id": 35136715, "link": "https://stackoverflow.com/questions/35136715/try-with-resources-use-extension-function-in-kotlin-does-not-always-work/36260510#36260510", "title": "try-with-resources: &quot;use&quot; extension function in Kotlin does not always work", "body": "<p>For classes that do not support the \"use\" function, I have done the next homemade try-with-resources:</p>\n\n<pre><code>inline fun &lt;T:AutoCloseable,R&gt; trywr(closeable: T, block: (T) -&gt; R): R {\n    try {\n        return block(closeable);\n    } finally {\n        closeable.close()\n    }\n}\n</code></pre>\n\n<p>Then you can use it the next way:</p>\n\n<pre><code>fun countEvents(sc: EventSearchCriteria?): Long {\n    return trywr(connection.prepareStatement(\"SELECT COUNT(*) FROM event\")) {\n        var rs = it.executeQuery()\n        rs.next()\n        rs.getLong(1)\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 507, "user_id": 5959593, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/78d489b31ec60519733298259e8c1dc7?s=128&d=identicon&r=PG&f=1", "display_name": "Minh Ngh\u0129a", "link": "https://stackoverflow.com/users/5959593/minh-ngh%c4%a9a"}, "edited": false, "score": 1, "creation_date": 1609525413, "post_id": 43269795, "comment_id": 115860148, "body": "<code>kotlin-stdlib-jre8</code> is now deprecated, replaced with <a href=\"https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-stdlib-jdk8\" rel=\"nofollow noreferrer\">kotlin-stdlib-jdk8</a>. Furthermore, <code>AutoCloseable</code> was introduced in Java 7, so a <code>jdk7</code> version is enough.  As per why these libraries must be included, Kotlin by default targets Java 6."}], "tags": [], "owner": {"reputation": 3629, "user_id": 2463695, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/hSucb.png?s=128&g=1", "display_name": "Quy Tang", "link": "https://stackoverflow.com/users/2463695/quy-tang"}, "is_accepted": false, "score": 9, "last_activity_date": 1501911419, "last_edit_date": 1501911419, "creation_date": 1491540144, "answer_id": 43269795, "question_id": 35136715, "link": "https://stackoverflow.com/questions/35136715/try-with-resources-use-extension-function-in-kotlin-does-not-always-work/43269795#43269795", "title": "try-with-resources: &quot;use&quot; extension function in Kotlin does not always work", "body": "<p>Kotlin 1.1+ has a standard library that targets Java 8 to support <code>Closeable resource</code> pattern - <a href=\"https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-stdlib-jre8/1.1.1\" rel=\"noreferrer\">kotlin-stdlib-jre8</a></p>\n\n<p><strong>Gradle</strong></p>\n\n<pre><code>compile \"org.jetbrains.kotlin:kotlin-stdlib:1.1.1\"\ncompile \"org.jetbrains.kotlin:kotlin-stdlib-jre8:1.1.1\"\n</code></pre>\n\n<p><strong>Maven</strong></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n    &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n    &lt;version&gt;1.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n    &lt;artifactId&gt;kotlin-stdlib-jre8&lt;/artifactId&gt;\n    &lt;version&gt;1.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>Sample</strong></p>\n\n<pre><code>val resource: AutoCloseable = getCloseableResource() \nresource.use { r -&gt; //play with r }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7991462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799c710615f378f82eccb755b8fc52a9?s=128&d=identicon&r=PG&f=1", "display_name": "Constantine", "link": "https://stackoverflow.com/users/7991462/constantine"}, "is_accepted": false, "score": 1, "last_activity_date": 1587035521, "creation_date": 1587035521, "answer_id": 61248798, "question_id": 35136715, "link": "https://stackoverflow.com/questions/35136715/try-with-resources-use-extension-function-in-kotlin-does-not-always-work/61248798#61248798", "title": "try-with-resources: &quot;use&quot; extension function in Kotlin does not always work", "body": "<p>Just make sure kotlin-stdlib-jdk7.jar in classpath, it's not added by default</p>\n"}], "owner": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5149, "favorite_count": 1, "accepted_answer_id": 35137606, "answer_count": 4, "score": 13, "last_activity_date": 1587035521, "creation_date": 1454347874, "last_edit_date": 1454351384, "question_id": 35136715, "link": "https://stackoverflow.com/questions/35136715/try-with-resources-use-extension-function-in-kotlin-does-not-always-work", "title": "try-with-resources: &quot;use&quot; extension function in Kotlin does not always work", "body": "<p>I had some trouble expressing the Java's <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html\" rel=\"noreferrer\">try-with-resources</a> construct in Kotlin. In my understanding, every expression that is an instance of <code>AutoClosable</code> should provide the <code>use</code> extension function.</p>\n\n<p>Here is a complete example:</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.FileReader;\n\nimport org.openrdf.query.TupleQuery;\nimport org.openrdf.query.TupleQueryResult;\n\npublic class Test {\n\n    static String foo(String path) throws Throwable {\n        try (BufferedReader r =\n           new BufferedReader(new FileReader(path))) {\n          return \"\";\n        }\n    }\n\n    static String bar(TupleQuery query) throws Throwable {\n        try (TupleQueryResult r = query.evaluate()) {\n          return \"\";\n        }\n    }\n}\n</code></pre>\n\n<p>The Java-to-Kotlin converter creates this output:</p>\n\n<pre><code>import java.io.BufferedReader\nimport java.io.FileReader\n\nimport org.openrdf.query.TupleQuery\nimport org.openrdf.query.TupleQueryResult\n\nobject Test {\n\n    @Throws(Throwable::class)\n    internal fun foo(path: String): String {\n        BufferedReader(FileReader(path)).use { r -&gt; return \"\" }\n    }\n\n    @Throws(Throwable::class)\n    internal fun bar(query: TupleQuery): String {\n        query.evaluate().use { r -&gt; return \"\" } // ERROR\n    }\n}\n</code></pre>\n\n<p><code>foo</code> works fine, but the code in <code>bar</code> does not compile: </p>\n\n<pre><code>Error:(16, 26) Kotlin: Unresolved reference.\nNone of the following candidates is applicable\nbecause of receiver type mismatch: \npublic inline fun &lt;T : java.io.Closeable, R&gt;\n???.use(block: (???) -&gt; ???): ??? defined in kotlin.io\n</code></pre>\n\n<p><code>query.evaluate()</code> is from <a href=\"http://rdf4j.org/\" rel=\"noreferrer\">Sesame</a> and implements <code>AutoClosable</code>. Is it a Kotlin bug, or is there a reason why it does not work?</p>\n\n<hr>\n\n<p>I am using IDEA 15.0.3 with Kotlin 1.0.0-beta-4584-IJ143-12 and the following <code>sasame-runtime</code> version:</p>\n\n<pre><code>&lt;groupId&gt;org.openrdf.sesame&lt;/groupId&gt;\n&lt;artifactId&gt;sesame-runtime&lt;/artifactId&gt;\n&lt;version&gt;4.0.2&lt;/version&gt;\n</code></pre>\n"}, {"tags": ["java", "intellij-idea", "gradle", "build", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 2186425, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/335dfaf7138c3f7ce5b148509c50ff1d?s=128&d=identicon&r=PG", "display_name": "user2186425", "link": "https://stackoverflow.com/users/2186425/user2186425"}, "edited": false, "score": 1, "creation_date": 1454397534, "post_id": 35134527, "comment_id": 58013566, "body": "Checked. It&#39;s not that."}], "tags": [], "owner": {"reputation": 71, "user_id": 1018365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea36a173911a394e8d76f532e0b9a10c?s=128&d=identicon&r=PG", "display_name": "kolakao", "link": "https://stackoverflow.com/users/1018365/kolakao"}, "is_accepted": false, "score": 1, "last_activity_date": 1454341470, "creation_date": 1454341470, "answer_id": 35134527, "question_id": 35134144, "link": "https://stackoverflow.com/questions/35134144/intellij-doesnt-build-classes/35134527#35134527", "title": "Intellij doesn&#39;t build classes", "body": "<p>Maybe by some mistake you have deleted the output path in module settings?\n<a href=\"https://www.jetbrains.com/idea/help/configuring-module-compiler-output.html\" rel=\"nofollow\">https://www.jetbrains.com/idea/help/configuring-module-compiler-output.html</a></p>\n"}], "owner": {"reputation": 385, "user_id": 2186425, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/335dfaf7138c3f7ce5b148509c50ff1d?s=128&d=identicon&r=PG", "display_name": "user2186425", "link": "https://stackoverflow.com/users/2186425/user2186425"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1454341470, "creation_date": 1454340225, "question_id": 35134144, "link": "https://stackoverflow.com/questions/35134144/intellij-doesnt-build-classes", "title": "Intellij doesn&#39;t build classes", "body": "<p>I've got multi-module project in gradle in Intellij.\nEverything was working fine long time but now for not apparent reason\nIntelliJ run configuration doesn't build classes.</p>\n\n<p>As always I create run configurations by ctrl+shift+F10, wchich by default add \"Make\" to Before launch, however it doesn't build because I get ClassNotFoundException on main class.</p>\n\n<p>I solved it temporarily by adding gradle task build to \"Before launch\", but it is irritating since I have to do it each time I create run configuration.</p>\n\n<p>Is there a way to fix it?</p>\n\n<p>PS. Tested on different versions 15.0.x - 16 EAP</p>\n"}, {"tags": ["kotlin", "quasar"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1454294025, "post_id": 35121958, "comment_id": 57964956, "body": "Do you have -javaagent?"}, {"owner": {"reputation": 362, "user_id": 784639, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/281d15a68a81877375ffd53f487c9ea2?s=128&d=identicon&r=PG", "display_name": "Hyperion", "link": "https://stackoverflow.com/users/784639/hyperion"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1454296120, "post_id": 35121958, "comment_id": 57965463, "body": "Yeah, we need agent or build task for instrumentation AFAIK. It runs about 3/5 times perfectly but 2/5 I&#39;m getting warning or quit unexpected"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1454300250, "post_id": 35121958, "comment_id": 57966362, "body": "I can suggest take a look at demo on github from webinar: <a href=\"http://blog.jetbrains.com/kotlin/2015/09/webinar-recording-quasar-efficient-and-elegant-fibers-channels-and-actors/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2015/09/&hellip;</a>"}, {"owner": {"reputation": 29817, "user_id": 462604, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7176c041527db5489a2181a0f87f57d9?s=128&d=identicon&r=PG", "display_name": "Jakob Bowyer", "link": "https://stackoverflow.com/users/462604/jakob-bowyer"}, "edited": false, "score": 0, "creation_date": 1454321728, "post_id": 35121958, "comment_id": 57975630, "body": "@Hyperion Your code runs just fine for me over about 20 runs."}, {"owner": {"reputation": 362, "user_id": 784639, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/281d15a68a81877375ffd53f487c9ea2?s=128&d=identicon&r=PG", "display_name": "Hyperion", "link": "https://stackoverflow.com/users/784639/hyperion"}, "reply_to_user": {"reputation": 29817, "user_id": 462604, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7176c041527db5489a2181a0f87f57d9?s=128&d=identicon&r=PG", "display_name": "Jakob Bowyer", "link": "https://stackoverflow.com/users/462604/jakob-bowyer"}, "edited": false, "score": 0, "creation_date": 1454324284, "post_id": 35121958, "comment_id": 57977332, "body": "@JakobBowyer change the line &quot;Math.random() &gt; 0.2&quot; to &quot;Math.random() &gt; 0&quot; please, it won&#39;t run forever and gives warning sometimes :/"}, {"owner": {"reputation": 29817, "user_id": 462604, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7176c041527db5489a2181a0f87f57d9?s=128&d=identicon&r=PG", "display_name": "Jakob Bowyer", "link": "https://stackoverflow.com/users/462604/jakob-bowyer"}, "edited": false, "score": 0, "creation_date": 1454333081, "post_id": 35121958, "comment_id": 57982934, "body": "@Hyperion Over 20 runs with that change I get no warnings."}, {"owner": {"reputation": 791, "user_id": 3756789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MZjcH.jpg?s=128&g=1", "display_name": "circlespainter", "link": "https://stackoverflow.com/users/3756789/circlespainter"}, "edited": false, "score": 0, "creation_date": 1454398689, "post_id": 35121958, "comment_id": 58014128, "body": "That warning should print a stack trace too. Can you add it?"}, {"owner": {"reputation": 362, "user_id": 784639, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/281d15a68a81877375ffd53f487c9ea2?s=128&d=identicon&r=PG", "display_name": "Hyperion", "link": "https://stackoverflow.com/users/784639/hyperion"}, "reply_to_user": {"reputation": 791, "user_id": 3756789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MZjcH.jpg?s=128&g=1", "display_name": "circlespainter", "link": "https://stackoverflow.com/users/3756789/circlespainter"}, "edited": false, "score": 0, "creation_date": 1454432387, "post_id": 35121958, "comment_id": 58037108, "body": "@circlespainter I edit my question"}], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 784639, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/281d15a68a81877375ffd53f487c9ea2?s=128&d=identicon&r=PG", "display_name": "Hyperion", "link": "https://stackoverflow.com/users/784639/hyperion"}, "edited": false, "score": 0, "creation_date": 1454594548, "post_id": 35194286, "comment_id": 58121748, "body": "Thx a lot! I join one of my actors and disable detectRunawayFibers"}], "tags": [], "owner": {"reputation": 791, "user_id": 3756789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MZjcH.jpg?s=128&g=1", "display_name": "circlespainter", "link": "https://stackoverflow.com/users/3756789/circlespainter"}, "is_accepted": true, "score": 1, "last_activity_date": 1454568436, "creation_date": 1454568436, "answer_id": 35194286, "question_id": 35121958, "link": "https://stackoverflow.com/questions/35121958/kotlin-quasar-fiber-warning-and-quitting/35194286#35194286", "title": "Kotlin / Quasar Fiber Warning and Quitting", "body": "<ol>\n<li>Since you're spawning actors but not joining them from the main thread, the latter could exit before the former finish executing. Have a look at <a href=\"http://docs.paralleluniverse.co/quasar/javadoc/co/paralleluniverse/actors/LocalActor.html\" rel=\"nofollow\">LocalActor.join</a>.</li>\n<li>If you join both actors your program will hang when one fails because the other one will be awaiting for a message forever. Send an exit message to the other actor when failing or use a receive with a timeout and exit if a timeout occurs.</li>\n<li>The warning is perfectly normal because the Quasar runtime and the JVM are still \"warming up\" while executing your program, so for example in your trace Quasar is performing one-time thread-blocking operations while verifying your suspendable annotations.\nHere instead I got it while printing on stdout (which is a thread-blocking operation) presumably because the JVM didn't have optimized that code path yet (probably it was still running it in interpreted mode). You can disable that warning if you want <a href=\"http://docs.paralleluniverse.co/quasar/#fibers\" rel=\"nofollow\">with the <code>co.paralleluniverse.fibers.detectRunawayFibers</code> system property</a>.</li>\n</ol>\n"}], "owner": {"reputation": 362, "user_id": 784639, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/281d15a68a81877375ffd53f487c9ea2?s=128&d=identicon&r=PG", "display_name": "Hyperion", "link": "https://stackoverflow.com/users/784639/hyperion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 1, "accepted_answer_id": 35194286, "answer_count": 1, "score": 1, "last_activity_date": 1454568436, "creation_date": 1454291820, "last_edit_date": 1454432363, "question_id": 35121958, "link": "https://stackoverflow.com/questions/35121958/kotlin-quasar-fiber-warning-and-quitting", "title": "Kotlin / Quasar Fiber Warning and Quitting", "body": "<p>I'm studying Kotlin and Quasar and I'm trying to make \"Boom\" game. I think my code is nice, but when I execute, it gives <code>is hogging the CPU or blocking a thread.</code> warning or just quit, sometimes.</p>\n\n<p>Am I did something wrong or not?</p>\n\n<p><a href=\"https://gist.github.com/anonymous/6a0a58fda2765d3cc4d5\" rel=\"nofollow\">gist</a></p>\n\n<p>Edit: <a href=\"https://gist.github.com/anonymous/7f1295315f71b900edcb\" rel=\"nofollow\">full output</a></p>\n"}, {"tags": ["properties", "static", "field", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1454298892, "post_id": 35118514, "comment_id": 57966095, "body": "although <code>const val</code> may have the effect you need, it&#39;s purpose is different (compiler time constants) and one should not use it for interop."}], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1454273135, "post_id": 35118979, "comment_id": 57959047, "body": "The question is rather about accessing parts of Kotlin <code>object</code> in Java, what do you mean by &#39;Kotlin way&#39; and why should the <code>C_ID</code> and <code>C_NAME</code> be accessible through array?"}, {"owner": {"reputation": 666, "user_id": 918051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/427af86728e2f09ce13e992ef62a17d0?s=128&d=identicon&r=PG", "display_name": "Ron", "link": "https://stackoverflow.com/users/918051/ron"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1454275218, "post_id": 35118979, "comment_id": 57959830, "body": "The op has a val &quot;all&quot; that has an arrayOf as getter. I decided to use that in my example code. I am not a kotlin expert, but this is how I would do it"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1454275859, "post_id": 35118979, "comment_id": 57960033, "body": "Sorry, didn&#39;t notice the <code>all</code> val. Though the question still seems to be more about Java interop."}], "tags": [], "owner": {"reputation": 666, "user_id": 918051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/427af86728e2f09ce13e992ef62a17d0?s=128&d=identicon&r=PG", "display_name": "Ron", "link": "https://stackoverflow.com/users/918051/ron"}, "is_accepted": false, "score": 1, "last_activity_date": 1454271521, "creation_date": 1454271521, "answer_id": 35118979, "question_id": 35118514, "link": "https://stackoverflow.com/questions/35118514/convert-static-variables-from-java-to-kotlin/35118979#35118979", "title": "Convert static variables from Java to Kotlin", "body": "<p>You should be able to access the values \"the kotlin way\":</p>\n\n<pre><code>object Foo {\nval C_ID = \"ID\"\nval C_NAME = \"NAME\"\nval VALUES = arrayOf(\"X\", \"Y\", \"Z\")\n\nval all: Array&lt;String&gt;\n    get() = arrayOf(C_ID, C_NAME)\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Foo.all.forEach { it-&gt;println(it) }\n}\n</code></pre>\n\n<p>With as result:</p>\n\n<pre><code>ID\nNAME\n\nProcess finished with exit code 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 38, "last_activity_date": 1493822686, "last_edit_date": 1493822686, "creation_date": 1454272054, "answer_id": 35119082, "question_id": 35118514, "link": "https://stackoverflow.com/questions/35118514/convert-static-variables-from-java-to-kotlin/35119082#35119082", "title": "Convert static variables from Java to Kotlin", "body": "<p>The current semantics come from <a href=\"http://blog.jetbrains.com/kotlin/2015/10/kotlin-1-0-beta-candidate-is-out/\" rel=\"noreferrer\">Kotlin Beta Candidate</a>:</p>\n\n<blockquote>\n  <h3>@JvmField and objects</h3>\n  \n  <p>We have made the strategy for generating pure fields (as opposed to <code>get</code>/<code>set</code> pairs) more predictable: from now on only properties annotated as <code>@JvmField</code>, <code>lateinit</code> or <code>const</code> are exposed as fields to Java clients. Older versions used heuristics and created static fields in objects unconditionally, which is against our initial design goal of having binary-compatibility-friendly APIs by default.</p>\n  \n  <p>Also, singleton instances are now accessible by the name <code>INSTANCE</code> (instead of <code>INSTANCE$</code>).</p>\n</blockquote>\n\n<p>According to this and to the <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#static-methods-and-fields\" rel=\"noreferrer\">reference</a>, there are three ways of working with properties of a Kotlin <code>object</code> from Java:</p>\n\n<ul>\n<li><p>Use <code>Foo.INSTANCE</code>.</p>\n\n<p>By default, properties of <code>object</code> won't be static fields for Java, but Java can access the properties through <code>Foo</code> object instance -- <code>Foo.INSTANCE</code>.</p>\n\n<p>So the expression will be <code>Foo.INSTANCE.getC_ID()</code>.</p></li>\n<li><p>Mark a property with <code>@JvmStatic</code> annotation:</p>\n\n<pre><code>object Foo {\n    @JvmStatic val C_ID = \"ID\"\n    //...\n}\n</code></pre>\n\n<p>This will generate static getter for <code>C_ID</code> instead of <code>Foo</code> instance getter which will be accessible as <code>Foo.getC_ID()</code>.</p></li>\n<li><p>Use <code>@JvmField</code> annotation on property declaration:</p>\n\n<pre><code>object Foo {\n    @JvmField val C_ID = \"ID\"\n    //...\n}\n</code></pre>\n\n<p>This will make Kotlin compiler generate a static field for Java instead of property.\nThen in Java you can access it as a static field: <code>Foo.C_ID</code>.</p>\n\n<p>But it won't work on properties without backing fields like <code>all</code> in your example.</p></li>\n</ul>\n\n<p>For primitives, as you stated, one can use <code>const</code> which will have the same effect as <code>@JvmField</code> in terms of visibility in Java.</p>\n\n<p>By the way, when it comes to methods, the situation is the same, and there is <code>@JvmStatic</code> annotation for them.</p>\n"}, {"tags": [], "owner": {"reputation": 1581, "user_id": 2087161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e5YGG.png?s=128&g=1", "display_name": "Felipe R. Saruhashi", "link": "https://stackoverflow.com/users/2087161/felipe-r-saruhashi"}, "is_accepted": false, "score": 7, "last_activity_date": 1496193121, "last_edit_date": 1496193121, "creation_date": 1480598662, "answer_id": 40911827, "question_id": 35118514, "link": "https://stackoverflow.com/questions/35118514/convert-static-variables-from-java-to-kotlin/40911827#40911827", "title": "Convert static variables from Java to Kotlin", "body": "<p>In your foo class you can put those properties and the method inside a companion object:</p>\n\n<pre><code>class Foo {\n\n  companion object {\n     val C_ID:String = \"ID\"\n     val C_NAME:String = \"NAME\"\n     @JvmField val VALUES = arrayOf(\"X\", \"Y\", \"Z\")\n\n     fun getAll():Array&lt;String&gt; {\n        return arrayOf(C_ID, C_NAME)\n     }\n  }\n}\n</code></pre>\n\n<p>Then you can call Foo.getAll(), and Foo.C_ID, Foo.C_NAME and Foo.VALUES.</p>\n"}, {"tags": [], "owner": {"reputation": 3118, "user_id": 7735032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iCbjS.jpg?s=128&g=1", "display_name": "Extremis II", "link": "https://stackoverflow.com/users/7735032/extremis-ii"}, "is_accepted": false, "score": 0, "last_activity_date": 1531056487, "creation_date": 1531056487, "answer_id": 51232473, "question_id": 35118514, "link": "https://stackoverflow.com/questions/35118514/convert-static-variables-from-java-to-kotlin/51232473#51232473", "title": "Convert static variables from Java to Kotlin", "body": "<p>it's better if you create new kotlin file just for constants.</p>\n\n<p>create <strong>Constants.kt</strong> file and paste below code.</p>\n\n<pre><code>object Constants {\nval C_ID = \"ID\"\nval C_NAME = \"NAME\"\nval VALUES = arrayOf(\"X\", \"Y\", \"Z\")\n\nval all: Array&lt;String&gt;\n    get() = arrayOf(C_ID, C_NAME)\n}\n</code></pre>\n\n<p>in your main activity you can access the constants by the constant name the android studio will automatically import the constants. here is my mainActivity:</p>\n\n<pre><code>import android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.util.Log\nimport com.example.architecturecompintro.Constants.C_ID\nimport com.example.architecturecompintro.Constants.C_NAME\nimport com.example.architecturecompintro.Constants.VALUES\nimport com.example.architecturecompintro.Constants.all\n\nclass MainActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    val TAG = \"info\"\n\n        Log.i(TAG, C_ID)\n        Log.i(TAG,C_NAME)\n\n        for(item in VALUES) {\n            Log.i(TAG,item)\n        }\n        val arrayItem = all\n\n        for(item in arrayItem) {\n            Log.i(TAG,item)\n        }\n    }\n}\n</code></pre>\n\n<p>I was able to get log output successfully </p>\n\n<p><a href=\"https://i.stack.imgur.com/pwDR5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pwDR5.png\" alt=\"logcat output\"></a></p>\n"}], "owner": {"reputation": 1345, "user_id": 1347005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vLycm.png?s=128&g=1", "display_name": "Jeff Campbell", "link": "https://stackoverflow.com/users/1347005/jeff-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21249, "favorite_count": 0, "accepted_answer_id": 35119082, "answer_count": 4, "score": 26, "last_activity_date": 1531056487, "creation_date": 1454269306, "last_edit_date": 1454315786, "question_id": 35118514, "link": "https://stackoverflow.com/questions/35118514/convert-static-variables-from-java-to-kotlin", "title": "Convert static variables from Java to Kotlin", "body": "<p>I'm trying to convert the following code to Kotlin AND still have one of the classes (Foo) used by Java.  What is the proper way of making this conversion?</p>\n\n<p>Original Java:</p>\n\n<pre><code>public class Foo {\n   public static final String C_ID = \"ID\";\n   public static final String C_NAME = \"NAME\";\n   public static final String[] VALUES = {\"X\", \"Y\", \"Z\"};\n\n   public static String[] getAll() {\n       return new String[] {C_ID, C_NAME};\n   }\n}\n\npublic class Bar {\n    public void doStuff() {\n        String var1 = Foo.C_ID;\n        String[] array1 = Foo.VALUES;\n        String[] array2 = Foo.getAll();\n    }\n}\n</code></pre>\n\n<p>Auto conversion fo Foo to Kotlin</p>\n\n<pre><code>object Foo {\n    val C_ID = \"ID\"\n    val C_NAME = \"NAME\"\n    val VALUES = arrayOf(\"X\", \"Y\", \"Z\")\n\n    val all: Array&lt;String&gt;\n        get() = arrayOf(C_ID, C_NAME)\n}\n</code></pre>\n\n<p>Problem:</p>\n\n<p>Bar class can no longer access C_ID or VALUES (error: \"private access\")</p>\n\n<p>if I put \"const\" in front of C_ID, it works... but I cannot do the same with VALUES (\"const\" can ONLY be used on primatives or String)</p>\n\n<p>Is there a different way I should be doing this (so both Java code and Kotlin code can access everything in Foo)?</p>\n"}, {"tags": ["android", "android-edittext", "kotlin"], "comments": [{"owner": {"reputation": 15222, "user_id": 3131147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HOOno.jpg?s=128&g=1", "display_name": "AdamMc331", "link": "https://stackoverflow.com/users/3131147/adammc331"}, "edited": false, "score": 0, "creation_date": 1454261786, "post_id": 35116905, "comment_id": 57954381, "body": "@LinX64 I will try to add more info for the non-Kotlin people in here haha."}, {"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 0, "creation_date": 1454263191, "post_id": 35116905, "comment_id": 57954933, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/26524048/upgrading-to-sdk-21-error-inflating-class-android-support-v7-internal-widget-a\" title=\"upgrading to sdk 21 error inflating class android support v7 internal widget a\">stackoverflow.com/questions/26524048/&hellip;</a>"}, {"owner": {"reputation": 15222, "user_id": 3131147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HOOno.jpg?s=128&g=1", "display_name": "AdamMc331", "link": "https://stackoverflow.com/users/3131147/adammc331"}, "reply_to_user": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 2, "creation_date": 1454263957, "post_id": 35116905, "comment_id": 57955273, "body": "@activedecay I looked at those answers and it&#39;s not <i>quite</i> the same issue, but I tried taking out my theme for the TextInputLayout and it appears I did do something incorrect in styles.xml. I will play with it to figure out what and let you know. Thanks!"}, {"owner": {"reputation": 221, "user_id": 2507678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMyXH.png?s=128&g=1", "display_name": "Matt Sams", "link": "https://stackoverflow.com/users/2507678/matt-sams"}, "edited": false, "score": 1, "creation_date": 1454340758, "post_id": 35116905, "comment_id": 57988492, "body": "It seems to be an issue with inflating the view in question, not Kotlin related. Particularly the crash happens when it tries to resolve some color attribute. Include this view&#39;s XML definition in your question."}, {"owner": {"reputation": 15222, "user_id": 3131147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HOOno.jpg?s=128&g=1", "display_name": "AdamMc331", "link": "https://stackoverflow.com/users/3131147/adammc331"}, "reply_to_user": {"reputation": 221, "user_id": 2507678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMyXH.png?s=128&g=1", "display_name": "Matt Sams", "link": "https://stackoverflow.com/users/2507678/matt-sams"}, "edited": false, "score": 0, "creation_date": 1454342033, "post_id": 35116905, "comment_id": 57989374, "body": "@deadpixelsociety Yeah, I realized that as well, I haven&#39;t had a moment yet to update the question accordingly. I will do soon and let you know once it&#39;s updated."}, {"owner": {"reputation": 564, "user_id": 535696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6aa0076278936d17c31a682731932ce7?s=128&d=identicon&r=PG", "display_name": "The LaPoubelle", "link": "https://stackoverflow.com/users/535696/the-lapoubelle"}, "edited": false, "score": 0, "creation_date": 1454370008, "post_id": 35116905, "comment_id": 58005330, "body": "Have you tried doing a clean build? I just tested this and it works for me. I would be surprised if this is a kotlin issue.   Also, there&#39;s a slim chance it could be caused by having a dependency issue where you have multiple versions of support libraries included."}], "owner": {"reputation": 15222, "user_id": 3131147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HOOno.jpg?s=128&g=1", "display_name": "AdamMc331", "link": "https://stackoverflow.com/users/3131147/adammc331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1059, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1454262696, "creation_date": 1454261414, "last_edit_date": 1454262696, "question_id": 35116905, "link": "https://stackoverflow.com/questions/35116905/unable-to-display-edittext-error-in-kotlin-code", "title": "Unable to display EditText error in Kotlin code", "body": "<p>I have switched my Android development over to Kotlin, but I am dealing with a crash that I can't figure out. I am used to, in <code>Java</code>, being able to display an error on an empty <code>EditText</code>:</p>\n\n<pre><code>if(mEmail.getText().toString().isEmpty()) {\n   mEmail.setError(\"Email cannot be blank.\");\n}\n</code></pre>\n\n<p>To the best of my knowledge, that could be translated to Kotlin as:</p>\n\n<pre><code>if(email.text.toString().isEmpty()) {\n   email.error = \"Email cannot be blank.\"\n}\n</code></pre>\n\n<p>However, that doesn't work, and I get the following stack trace:</p>\n\n<pre><code>Process: com.androidessence.capturethetag, PID: 4016\nandroid.view.InflateException: Binary XML file line #17: Error inflating class TextView\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:763)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:482)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:414)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:365)\n    at android.widget.Editor.showError(Editor.java:319)\n    at android.widget.Editor.setError(Editor.java:355)\n    at android.widget.TextView.setError(TextView.java:4648)\n    at android.widget.TextView.setError(TextView.java:4633)\n    at com.androidessence.capturethetag.activities.LoginActivity.validateInput(LoginActivity.kt:31)\n    at com.androidessence.capturethetag.activities.LoginActivity.access$validateInput(LoginActivity.kt:12)\n    at com.androidessence.capturethetag.activities.LoginActivity$onCreate$1.onClick(LoginActivity.kt:19)\n    at android.view.View.performClick(View.java:4780)\n    at android.view.View$PerformClick.run(View.java:19866)\n    at android.os.Handler.handleCallback(Handler.java:739)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:135)\n    at android.app.ActivityThread.main(ActivityThread.java:5254)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:372)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\n Caused by: java.lang.RuntimeException: Failed to resolve attribute at index 24\n    at android.content.res.TypedArray.getColor(TypedArray.java:401)\n    at android.widget.TextView.&lt;init&gt;(TextView.java:696)\n    at android.widget.TextView.&lt;init&gt;(TextView.java:632)\n    at android.support.v7.widget.AppCompatTextView.&lt;init&gt;(AppCompatTextView.java:60)\n    at android.support.v7.widget.AppCompatTextView.&lt;init&gt;(AppCompatTextView.java:56)\n    at android.support.v7.app.AppCompatViewInflater.createView(AppCompatViewInflater.java:92)\n    at android.support.v7.app.AppCompatDelegateImplV7.createView(AppCompatDelegateImplV7.java:938)\n    at android.support.v7.app.AppCompatDelegateImplV7.onCreateView(AppCompatDelegateImplV7.java:992)\n    at android.support.v4.view.LayoutInflaterCompatHC$FactoryWrapperHC.onCreateView(LayoutInflaterCompatHC.java:44)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:725)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:482)\u00a0\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:414)\u00a0\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:365)\u00a0\n    at android.widget.Editor.showError(Editor.java:319)\u00a0\n    at android.widget.Editor.setError(Editor.java:355)\u00a0\n    at android.widget.TextView.setError(TextView.java:4648)\u00a0\n    at android.widget.TextView.setError(TextView.java:4633)\u00a0\n    at com.androidessence.capturethetag.activities.LoginActivity.validateInput(LoginActivity.kt:31)\u00a0\n    at com.androidessence.capturethetag.activities.LoginActivity.access$validateInput(LoginActivity.kt:12)\u00a0\n    at com.androidessence.capturethetag.activities.LoginActivity$onCreate$1.onClick(LoginActivity.kt:19)\u00a0\n    at android.view.View.performClick(View.java:4780)\u00a0\n    at android.view.View$PerformClick.run(View.java:19866)\u00a0\n    at android.os.Handler.handleCallback(Handler.java:739)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:95)\u00a0\n    at android.os.Looper.loop(Looper.java:135)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:5254)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at java.lang.reflect.Method.invoke(Method.java:372)\u00a0\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\u00a0\n</code></pre>\n\n<p>Any ideas why this is crashing in Kotlin?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>For more information, you can see my <code>content_login.xml</code> file <a href=\"https://gist.github.com/AdamMc331/cfd52547a59c4be40b7e\" rel=\"nofollow\">here</a>. I've used Gist to save space.</p>\n\n<p>Also, I never call <code>findViewById();</code> on my <code>EditText</code> because the <code>Kotlin-Android Extension Plugin</code> can do it, as mentioned here: <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow\">https://kotlinlang.org/docs/tutorials/android-plugin.html</a></p>\n\n<p>I have no doubts that it's referencing the right <code>EditText</code>, because logging showed me that it was able to determine the <code>EditText</code> was empty, but is unable to set the error attribute.</p>\n"}, {"tags": ["iterator", "sequence", "kotlin", "tail"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 3, "last_activity_date": 1454250201, "last_edit_date": 1454250201, "creation_date": 1454249105, "answer_id": 35114717, "question_id": 35114716, "link": "https://stackoverflow.com/questions/35114716/how-to-modify-a-prefix-of-a-kotlin-sequence-but-retain-the-tail/35114717#35114717", "title": "How to modify a prefix of a Kotlin sequence but retain the tail?", "body": "<p>When a <code>Sequence&lt;T&gt;</code> is once-constrained, it means that it is not allowed to create more than one <code>Iterator</code> from it. Therefore the solution is to create one iterator and produce both the changed prefix and the remaining tail from it.</p>\n\n<p>The <code>Iterator&lt;T&gt;</code>'s <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/kotlin.-iterator/as-sequence.html\" rel=\"nofollow\"><code>asSequence()</code></a> method proves to be useful here as it creates a sequence backed by the iterator. What remains is just to concatenate the sequences.</p>\n\n<p>Here's how you do it for one change:</p>\n\n<pre><code>val seq = (1..10).asSequence().constrainOnce()\nval modified = seq.iterator().let { iter -&gt; \n    iter.asSequence().take(5).map { it * -1 } + iter.asSequence()\n}\n</code></pre>\n\n<p>Note that two sequences are created from the same iterator, but it's OK because</p>\n\n<ul>\n<li><code>Sequence</code>s are evaluated lazily</li>\n<li>The two sequences are used together and do not leak out</li>\n<li>Evaluation of the second sequence in concatenation will start after the first one finishes</li>\n</ul>\n\n<p>And here's how to generalize it to arbitrary number of sequence operators:</p>\n\n<pre><code>fun &lt;T&gt; Sequence&lt;T&gt;.changePrefixes(vararg operators: Sequence&lt;T&gt;.() -&gt; Sequence&lt;T&gt;)\n: Sequence&lt;T&gt; {\n    val i = iterator()\n    return operators.fold(emptySequence&lt;T&gt;()) { acc, it -&gt; acc + i.asSequence().it() } + \n            i.asSequence()\n}\n</code></pre>\n\n<p>This <code>fold</code> produces a chain of concatenated sequences provided by <code>operators</code> from the sequences backed by the iterator <code>i</code>, and then appends the unmodified tail to the <code>fold</code> result.</p>\n\n<p>The limitation of this implementation is that when an operator includes <code>takeWhille</code>, the rejected item will be dropped and won't be emitted into the next sequence.</p>\n"}], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 35114717, "answer_count": 1, "score": 3, "last_activity_date": 1454250201, "creation_date": 1454249105, "last_edit_date": 1610973576, "question_id": 35114716, "link": "https://stackoverflow.com/questions/35114716/how-to-modify-a-prefix-of-a-kotlin-sequence-but-retain-the-tail", "title": "How to modify a prefix of a Kotlin sequence but retain the tail?", "body": "<p>Kotlin provides <code>take</code> and <code>takeWhile</code> methods which let one to take first <code>n</code> items of a <code>Sequence&lt;T&gt;</code> and process them separately as another sequence, for example, <code>drop</code> some of them, <code>map</code> to other values etc.</p>\n<p>But when I use <code>take</code> and <code>takeWhile</code>, the tail of the sequence is dropped.</p>\n<p>Now, given a <em>once-constrained</em>  sequence, how do I transform its arbitrary prefix to another sequence retaining the tail if it remains?</p>\n<p>Example:</p>\n<pre><code>val seq = (1..10).asSequence().constrainOnce() \n// emits 1, 2, 3, 4, 5, 6, 7, 8, 9, 10\n\nval modified = seq.changePrefix { take(5).map { -1 * it } }\n// emits -1, -2, -3, -4, -5, 6, 7, 8, 9, 10\n</code></pre>\n<p>How do I do the same for more than one prefix?</p>\n<p>Example:</p>\n<pre><code>val seq = (1..10).asSequence().constrainOnce()\n\nval modified = seq.changePrefixes(\n        { take(3).map { it * -1 } },\n        { drop(1).take(3).map { it * 100 } },\n        { map { 0 } }\n)\n\n//emits -1, -2, -3, 500, 600, 700, 0, 0, 0\n</code></pre>\n<p><em>Note: the question is intentionally asked and <a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">answered by the author</a>.</em></p>\n"}, {"tags": ["initialization", "this", "lazy-evaluation", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1454340719, "post_id": 35100389, "comment_id": 57988462, "body": "You might be able to use a combination of <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#delegated-properties\" rel=\"nofollow noreferrer\">delegated properties</a>, <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"nofollow noreferrer\">late-initialized properties</a>, and/or <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#inline-functions\" rel=\"nofollow noreferrer\">inline functions</a> to generalize this. My attempt should (I think) work but there is a Kotlin compilation bug preventing it from doing so right now (see <a href=\"https://youtrack.jetbrains.com/issue/KT-10878\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-10878</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 509, "user_id": 2832996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46814cb72562ea0b2e5b9da4cad32ea6?s=128&d=identicon&r=PG", "display_name": "Aro", "link": "https://stackoverflow.com/users/2832996/aro"}, "is_accepted": false, "score": 0, "last_activity_date": 1498504931, "last_edit_date": 1498504931, "creation_date": 1498500021, "answer_id": 44765813, "question_id": 35100389, "link": "https://stackoverflow.com/questions/35100389/writing-a-kotlin-util-function-which-provides-self-reference-in-initializer/44765813#44765813", "title": "Writing a Kotlin util function which provides self-reference in initializer", "body": "<blockquote>\n  <p>is there a way to rewrite SelfReference so that initializer is passed an argument (or a receiver) instead of using self property? This question can be reformulated to: is there a way to pass a lazily evaluated receiver/argument to a function or achieve this semantics some way?</p>\n</blockquote>\n\n<p>I'm not sure I completely understand your use case but this may be what you're looking for:</p>\n\n<pre><code>fun initHolder(x: Int = 0, holderAction: Holder.() -&gt; Unit) : Holder {\n    var h: Holder? = null\n    h = Holder(x) { h!!.holderAction() }\n    return h\n}\n\nval h: Holder = initHolder(0) { x++ }\nh.action()\nh.action()\nprintln(h.x) // 2\n</code></pre>\n\n<p>This works because <code>holderAction</code> is a lambda with a receiver (<code>Holder.() -&gt; Unit</code>) giving the lambda access to the receiver's members.</p>\n\n<p>This is a general solution since you may not be able to change the signature of the respective <code>Holder</code> constructor. It may be worth noting this solution does not require the class to be open, otherwise a similar approach could be done with a subclass using a secondary constructor.</p>\n\n<p>I prefer this solution to creating a <code>SelfReference</code> class when there are only a few number of classes that need the change.</p>\n\n<p>You may want to check for <code>null</code> instead of using <code>!!</code> in order to throw a helpful error. If Holder calls <code>action</code> in it's constructor or init block, you'll get a null pointer exception.</p>\n"}, {"tags": [], "owner": {"reputation": 2805, "user_id": 7117454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaWD5.png?s=128&g=1", "display_name": "Raymond Arteaga", "link": "https://stackoverflow.com/users/7117454/raymond-arteaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1531244808, "last_edit_date": 1531244808, "creation_date": 1531205287, "answer_id": 51258785, "question_id": 35100389, "link": "https://stackoverflow.com/questions/35100389/writing-a-kotlin-util-function-which-provides-self-reference-in-initializer/51258785#51258785", "title": "Writing a Kotlin util function which provides self-reference in initializer", "body": "<p>I'm pretty sure you can achieve the same results in a more readable and clear way using something like this:</p>\n\n<pre><code>fun &lt;T&gt; selfReferenced(initializer: () -&gt; T) = initializer.invoke()\noperator fun&lt;T&gt; T.getValue(any: Any?, property: KProperty&lt;*&gt;) = this\n</code></pre>\n\n<p>and later use </p>\n\n<pre><code>val valueName: ValueType by selfReferenced{\n    //here you can create and use the valueName object\n}\n</code></pre>\n\n<p>Using as example your quoted question <a href=\"https://stackoverflow.com/a/35050722/2196460\">https://stackoverflow.com/a/35050722/2196460</a> you can do this:</p>\n\n<pre><code>val textToSpeech:TextToSpeech by selfReferenced {\nTextToSpeech(\n        App.instance,\n        TextToSpeech.OnInitListener { status -&gt;\n            if (status == TextToSpeech.SUCCESS) {\n                textToSpeech.setLanguage(Locale.UK)\n            }\n        })\n    }\n</code></pre>\n\n<p>Inside the selfReferenced block you can use the outer object with no restrictions. The only thing you should take care of, is declaring the type explicitly to avoid recursive type checking issues.</p>\n"}, {"tags": [], "owner": {"reputation": 2081, "user_id": 3294175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d6b46af0ce01b3934979d8d7631b43?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Martori", "link": "https://stackoverflow.com/users/3294175/eric-martori"}, "is_accepted": false, "score": 1, "last_activity_date": 1539550354, "creation_date": 1539550354, "answer_id": 52806994, "question_id": 35100389, "link": "https://stackoverflow.com/questions/35100389/writing-a-kotlin-util-function-which-provides-self-reference-in-initializer/52806994#52806994", "title": "Writing a Kotlin util function which provides self-reference in initializer", "body": "<p>The best I have managed to produce while still being completely generic is this:</p>\n\n<pre><code>class SelfReference&lt;T&gt;(val initializer: SelfReference&lt;T&gt;.() -&gt; T)  {\n    val self: T by lazy {\n        inner ?: throw IllegalStateException(\"Do not use `self` until initialized.\")\n    }\n\n    private val inner = initializer()\n    operator fun invoke(): T = self\n}\n</code></pre>\n\n<p>Adding the invoke operator lets you use it in the following way:</p>\n\n<pre><code>val h: Holder = selfReference { Holder(0) { this().x++ } }\n</code></pre>\n\n<p>This is the closest I got to make it look like something you would \"normally\" write.</p>\n\n<p>Sadly I think it is not possible to get completely rid of a explicit access to the element. Since to do that you would need a lambda parameter of type <code>T.() -&gt; T</code> but then you wouldn't be able to call that parameter without an instance of <code>T</code>and being T a generic there is no clean and safe way to acquire this instance.</p>\n\n<p>But maybe I'm wrong and this helps you think of a solution to the problem</p>\n"}], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2445, "favorite_count": 3, "answer_count": 3, "score": 11, "last_activity_date": 1539550354, "creation_date": 1454148241, "last_edit_date": 1495542393, "question_id": 35100389, "link": "https://stackoverflow.com/questions/35100389/writing-a-kotlin-util-function-which-provides-self-reference-in-initializer", "title": "Writing a Kotlin util function which provides self-reference in initializer", "body": "<p>I'm trying to generalize my hack from an answer to another <a href=\"https://stackoverflow.com/a/35050722/2196460\">question</a>. </p>\n\n<p>It should provide a way to reference a value which is not constructed yet inside its initializer (of course, not directly, but in lambdas and object expressions).</p>\n\n<p>What I have at the moment:</p>\n\n<pre><code>class SelfReference&lt;T&gt;(val initializer: SelfReference&lt;T&gt;.() -&gt; T) {\n    val self: T by lazy {\n        inner ?: throw IllegalStateException(\"Do not use `self` until initialized.\")\n    }\n\n    private val inner = initializer()\n}\n\nfun &lt;T&gt; selfReference(initializer: SelfReference&lt;T&gt;.() -&gt; T): T {\n    return SelfReference(initializer).self\n}\n</code></pre>\n\n<p>It works, see this example:</p>\n\n<pre><code>class Holder(var x: Int = 0,\n             val action: () -&gt; Unit)\n\nval h: Holder = selfReference { Holder(0) { self.x++ } }\nh.action()\nh.action()\nprintln(h.x) //2\n</code></pre>\n\n<p>But at this point the way in which <code>initializer</code> references the constructed value is <code>self</code> property.</p>\n\n<p>And my question is: is there a way to rewrite <code>SelfReference</code> so that <code>initializer</code> is passed an argument (or a receiver) instead of using <code>self</code> property? This question can be reformulated to: is there a way to pass a lazily evaluated receiver/argument to a function or achieve this semantics some way?</p>\n\n<p>What are the other ways to improve the code?\n<hr>\n<strong>UPD:</strong> One possible way is to pass a function that returns <code>self</code>, thus it would be used as <code>it()</code> inside the <code>initializer</code>. Still looking for other ones.</p>\n"}, {"tags": ["scala", "lambda", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 7, "last_activity_date": 1454069393, "creation_date": 1454069393, "answer_id": 35084258, "question_id": 35083457, "link": "https://stackoverflow.com/questions/35083457/function-type-with-receiver-in-scala/35084258#35084258", "title": "Function type with receiver in Scala", "body": "<p>There is no equivalent to this in Scala. You'd simply use a function which takes <code>HTML</code> as an argument (possibly as an implicit argument, but this isn't reflected in the type and unlikely in this case).</p>\n"}], "owner": {"reputation": 320, "user_id": 705626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22088ff63f8545dbec301278ff78bb03?s=128&d=identicon&r=PG", "display_name": "Sol", "link": "https://stackoverflow.com/users/705626/sol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 35084258, "answer_count": 1, "score": 7, "last_activity_date": 1454069393, "creation_date": 1454067047, "question_id": 35083457, "link": "https://stackoverflow.com/questions/35083457/function-type-with-receiver-in-scala", "title": "Function type with receiver in Scala", "body": "<p>I'm investigating this Kotlin example:</p>\n\n<pre><code>class HTML {\n    fun body() { ... }\n}\n\nfun html(init: HTML.() -&gt; Unit): HTML {\n  val html = HTML()  // create the receiver object\n  html.init()        // pass the receiver object to the lambda\n  return html\n}\n\n\nhtml {       // lambda with receiver begins here\n    body()   // calling a method on the receiver object\n}\n</code></pre>\n\n<p>I'm wonder how to write this code in scala? How to declare in scala function type with receiver?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 7368, "user_id": 4982088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wlrq2.png?s=128&g=1", "display_name": "Xorifelse", "link": "https://stackoverflow.com/users/4982088/xorifelse"}, "edited": false, "score": 0, "creation_date": 1454019140, "post_id": 35072874, "comment_id": 57869241, "body": "No effort in this question, whatsoever. Learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> a question on Stackoverflow."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1454023703, "post_id": 35072874, "comment_id": 57871260, "body": "Could not reproduce: I execute <code>val array = CharArray(5); val str = &quot;123&quot;; array[1] = str.get(1)</code> and get it work correctly. Please add details or examples."}, {"owner": {"reputation": 1, "user_id": 5854062, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-obg-JDKgDKs/AAAAAAAAAAI/AAAAAAAAAFA/9E7EJv_OWFY/photo.jpg?sz=128", "display_name": "\u0412\u0438\u043a\u0442\u043e\u0440 \u0413\u0440\u043e\u0442\u043e\u0432", "link": "https://stackoverflow.com/users/5854062/%d0%92%d0%b8%d0%ba%d1%82%d0%be%d1%80-%d0%93%d1%80%d0%be%d1%82%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1454053257, "post_id": 35072874, "comment_id": 57880415, "body": "Code:   var panCheckNumber= IntArray(9) ;  for (i in 1..9){panCheckNumber[i]=str.get(i) }  . I did mistake when use IntArray. Tnx."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1454054643, "post_id": 35072874, "comment_id": 57881102, "body": "A Char is not an Int in Kotlin"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1454149424, "post_id": 35072874, "comment_id": 57922103, "body": "@\u0412\u0438\u043a\u0442\u043e\u0440\u0413\u0440\u043e\u0442\u043e\u0432 your question is still cryptic and hard to understand. I suggest reformatting the code (see how it was done in the answer) and providing types and declarations for all variables. This is necessary for others to understand your question and profit from the answers."}], "answers": [{"tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": false, "score": 5, "last_activity_date": 1454059187, "creation_date": 1454059187, "answer_id": 35080824, "question_id": 35072874, "link": "https://stackoverflow.com/questions/35072874/how-to-work-fun-getindex-int-char/35080824#35080824", "title": "How to work fun&#160;get(index:&#160;Int):&#160;Char?", "body": "<p>In Java, you can store a <code>char</code> into an <code>int[]</code> without casting. In Kotlin, this is not possible, you will have to use the <code>toInt()</code> method:</p>\n\n<pre><code>val ints = IntArray(5)\nval str = \"123\"\nints[1] = str.get(1).toInt()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5854062, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-obg-JDKgDKs/AAAAAAAAAAI/AAAAAAAAAFA/9E7EJv_OWFY/photo.jpg?sz=128", "display_name": "\u0412\u0438\u043a\u0442\u043e\u0440 \u0413\u0440\u043e\u0442\u043e\u0432", "link": "https://stackoverflow.com/users/5854062/%d0%92%d0%b8%d0%ba%d1%82%d0%be%d1%80-%d0%93%d1%80%d0%be%d1%82%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "answer_count": 1, "score": -5, "last_activity_date": 1454059187, "creation_date": 1454018243, "question_id": 35072874, "link": "https://stackoverflow.com/questions/35072874/how-to-work-fun-getindex-int-char", "title": "How to work fun&#160;get(index:&#160;Int):&#160;Char?", "body": "<p>I don't understand how function work.\nI write array[1]=str.get(1), when str =\"123\".\nBut compilier write me about error on funtion get. \nWhat i do wrong?</p>\n"}]