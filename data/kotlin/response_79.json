[{"tags": ["kotlin", "jmockit"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1468405289, "post_id": 38346722, "comment_id": 64110610, "body": "Why don&#39;t you refactor your code so that it allows to pass whatever value you&#39;re accessing through <code>System.getProperty</code> through an explicit API?"}, {"owner": {"reputation": 15221, "user_id": 2326914, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5be766827c5f7d3c077e92f75b7f9104?s=128&d=identicon&r=PG", "display_name": "Rog&#233;rio", "link": "https://stackoverflow.com/users/2326914/rog%c3%a9rio"}, "edited": false, "score": 0, "creation_date": 1468428147, "post_id": 38346722, "comment_id": 64126941, "body": "In this case, there is nothing to mock: just call <code>System.setProperty(...)</code>."}, {"owner": {"reputation": 77900, "user_id": 238134, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d80ce5271185447eb06b360959acd71f?s=128&d=identicon&r=PG", "display_name": "deamon", "link": "https://stackoverflow.com/users/238134/deamon"}, "reply_to_user": {"reputation": 15221, "user_id": 2326914, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5be766827c5f7d3c077e92f75b7f9104?s=128&d=identicon&r=PG", "display_name": "Rog&#233;rio", "link": "https://stackoverflow.com/users/2326914/rog%c3%a9rio"}, "edited": false, "score": 0, "creation_date": 1468500503, "post_id": 38346722, "comment_id": 64159614, "body": "@Rog&#233;rio <code>System.setProperty</code> is not an option (acutally it is the current &quot;solution&quot;), because it interferes with other tests."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 475857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c31bc31c781899e015ab3dee3ead90e5?s=128&d=identicon&r=PG", "display_name": "Aleosha", "link": "https://stackoverflow.com/users/475857/aleosha"}, "is_accepted": true, "score": 4, "last_activity_date": 1468427786, "creation_date": 1468427786, "answer_id": 38357240, "question_id": 38346722, "link": "https://stackoverflow.com/questions/38346722/how-to-mock-static-methods-in-kotlin/38357240#38357240", "title": "How to mock static methods in Kotlin?", "body": "<p>You should mock System like this:</p>\n\n<pre><code>class MockSystem : MockUp&lt;System&gt;() {\n    @Mock\n    fun getProperty(name: String) = \"tagB\"\n}\n\n\nclass MockTest {\n\n    val m = MockSystem();\n\n    @Test fun test() {\n        Assert.assertEquals(System.getProperty(\"hello\"), \"tagB\")\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 77900, "user_id": 238134, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d80ce5271185447eb06b360959acd71f?s=128&d=identicon&r=PG", "display_name": "deamon", "link": "https://stackoverflow.com/users/238134/deamon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3373, "favorite_count": 1, "accepted_answer_id": 38357240, "answer_count": 1, "score": 5, "last_activity_date": 1468427786, "creation_date": 1468399376, "question_id": 38346722, "link": "https://stackoverflow.com/questions/38346722/how-to-mock-static-methods-in-kotlin", "title": "How to mock static methods in Kotlin?", "body": "<p>I'm trying to mock a static method with jMockit in Kotlin:</p>\n\n<pre><code>object: MockUp&lt;System&gt;() {\n  @Mock\n  fun getProperty(name: String) = \"tagB\"\n}\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<blockquote>\n  <p>Could not load Logmanager \"tagB\"\n  java.lang.ClassNotFoundException: tagB\n      at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n      at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n      at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n      at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n      at java.util.logging.LogManager$1.run(LogManager.java:195)\n      at java.util.logging.LogManager$1.run(LogManager.java:181)\n      at java.security.AccessController.doPrivileged(Native Method)\n      at java.util.logging.LogManager.(LogManager.java:181)\n      at java.util.logging.Logger.getPlatformLogger(Logger.java:572)\n      at java.util.logging.LoggingProxyImpl.getLogger(LoggingProxyImpl.java:41)\n      at sun.util.logging.LoggingSupport.getLogger(LoggingSupport.java:100)\n      at sun.util.logging.PlatformLogger$JavaLoggerProxy.(PlatformLogger.java:602)\n      at sun.util.logging.PlatformLogger$JavaLoggerProxy.(PlatformLogger.java:597)\n      at sun.util.logging.PlatformLogger.(PlatformLogger.java:239)\n      at sun.util.logging.PlatformLogger.getLogger(PlatformLogger.java:198)\n      at sun.util.locale.provider.LocaleServiceProviderPool.config(LocaleServiceProviderPool.java:142)\n      at sun.util.locale.provider.LocaleProviderAdapter.(LocaleProviderAdapter.java:165)\n      at java.text.DecimalFormatSymbols.getInstance(DecimalFormatSymbols.java:178)\n      at java.util.Formatter.getZero(Formatter.java:2283)\n      at java.util.Formatter.(Formatter.java:1892)\n      at java.util.Formatter.(Formatter.java:1914)\n      at java.lang.String.format(String.java:2940)\n      at org.junit.runner.Description.formatDisplayName(Description.java:114)\n      at org.junit.runner.Description.createTestDescription(Description.java:73)\n      at io.kotlintest.TestCase.getDescription(testcase.kt:45)\n      at io.kotlintest.TestBase.descriptionForSuite$kotlintest_main(TestBase.kt:153)\n      at io.kotlintest.TestBase.getDescription$kotlintest_main(TestBase.kt:39)\n      at io.kotlintest.KTestJUnitRunner.getDescription(KTestJUnitRunner.kt:11)\n      at com.intellij.junit4.JUnit4IdeaTestRunner.getDescription(JUnit4IdeaTestRunner.java:123)\n      at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:99)\n      at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:42)\n      at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:234)\n      at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:74)\n      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke(Method.java:498)\n      at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)\n  Logging configuration class \"tagB\" failed\n  java.lang.ClassNotFoundException: tagB\n  ...</p>\n</blockquote>\n\n<p>Other approaches with expectations blocks weren't successful, too.</p>\n\n<p>How can I mock a static method in Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1468420429, "post_id": 38338943, "comment_id": 64121553, "body": "I can&#39;t reproduce the bug. Can you provide some more details about where are <code>activity_layout</code> and <code>form_component_main</code> located? Maybe, these layouts are in different modules? Also it would be great if you could reproduce this behaviour in a small sample project."}, {"owner": {"reputation": 2988, "user_id": 1507512, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5EsQG.jpg?s=128&g=1", "display_name": "Massimo", "link": "https://stackoverflow.com/users/1507512/massimo"}, "edited": false, "score": 0, "creation_date": 1485187724, "post_id": 38338943, "comment_id": 70809270, "body": "I&#39;m experimenting the same problem. Did you solve it?"}, {"owner": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "edited": false, "score": 0, "creation_date": 1485187783, "post_id": 38338943, "comment_id": 70809314, "body": "No and I havent enountered it since."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "edited": false, "score": 0, "creation_date": 1468358310, "post_id": 38338993, "comment_id": 64092447, "body": "I could eventually do that, but I rather change as little code as possible, and not introduce another issues. I did not write the application, I am just maintaining it. I thing that having same ids in different layouts is should not cause problems."}, {"owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "reply_to_user": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "edited": false, "score": 0, "creation_date": 1468358510, "post_id": 38338993, "comment_id": 64092557, "body": "Is form_component_main ever shown on the activity that uses activity_layout?"}, {"owner": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "edited": false, "score": 0, "creation_date": 1468358669, "post_id": 38338993, "comment_id": 64092623, "body": "It&#39;s in a fragment that is deep down in the hierarchy. The framgnet is not inflated from the same layout.  Btw.. Calling findViewById() on the same place as error is thrown it correctly returns ScrollView"}, {"owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "reply_to_user": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "edited": false, "score": 0, "creation_date": 1468359057, "post_id": 38338993, "comment_id": 64092827, "body": "I&#39;m fairly new to synthetics. I&#39;m not sure how the generated R.java and synthetics interact. It might be worth searching for overflow_panel in your R.java (should be in app &gt; build &gt; generated &gt; source &gt; r &gt; ......). It may get multiple versions that findViewById can handle but synthetics can&#39;t."}, {"owner": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "edited": false, "score": 0, "creation_date": 1468359574, "post_id": 38338993, "comment_id": 64093034, "body": "This is only thing I found in  .....&gt;source&gt;r&gt;debug&gt;packageId&gt;R.java <code>public static final int overflow_panel=0x7f0b0085;</code>"}, {"owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "reply_to_user": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "edited": false, "score": 0, "creation_date": 1468360222, "post_id": 38338993, "comment_id": 64093312, "body": "So there must just be one id. This gives the possibility for conflict. The Android documentation says that there can be conflicts: <code>An ID need not be unique throughout the entire tree, but it should be unique within the part of the tree you are searching (which may often be the entire tree, so it&#39;s best to be completely unique when possible).</code> (from <a href=\"https://developer.android.com/guide/topics/ui/declaring-layout.html\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/ui/declaring-layout.html</a>) I&#39;m guessing it is a coincidence of how synthetics calculate what they are pointing at versus findViewByID that this error appears for one but not the other."}, {"owner": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "edited": false, "score": 0, "creation_date": 1468360762, "post_id": 38338993, "comment_id": 64093507, "body": "Yeah that could be it, I cant find the source code for Kotlin Android Extensions."}, {"owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "reply_to_user": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "edited": false, "score": 0, "creation_date": 1468361627, "post_id": 38338993, "comment_id": 64093862, "body": "It looks like it is handled by an IntelliJ extension: <a href=\"https://github.com/JetBrains/kotlin/tree/ee50aec7342ab375a105bb318e6501135e859028/plugins/android-extensions/android-extensions-compiler\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin/tree/&hellip;</a> It may be worth asking on the Kotlin forums."}, {"owner": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "edited": false, "score": 0, "creation_date": 1468362105, "post_id": 38338993, "comment_id": 64093994, "body": "It looks like it does some kind of caching AndroidExpressionCodegenExtension.kt#L367 but I hardly understand the code. In theory does it mean if kotlin synthetizer caches id from another layout, it could cause my issue."}], "tags": [], "owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "is_accepted": false, "score": 2, "last_activity_date": 1469191561, "last_edit_date": 1469191561, "creation_date": 1468358082, "answer_id": 38338993, "question_id": 38338943, "link": "https://stackoverflow.com/questions/38338943/kotlinx-injects-view-from-wrong-layout/38338993#38338993", "title": "Kotlinx injects view from wrong layout", "body": "<p>Why not give them different ids? </p>\n\n<pre><code>overflow_panel_scroll\noverflow_panel_frame\n</code></pre>\n\n<p>Or something more descriptive to what they actually do. </p>\n\n<p><strong>UPDATE:</strong> A little more explanation as this got down voted. IDs should be unique. </p>\n\n<p>The Android documentation says that there can be conflicts if IDs aren't unique: <code>An ID need not be unique throughout the entire tree, but it should be unique within the part of the tree you are searching (which may often be the entire tree, so it's best to be completely unique when possible).</code> (from <a href=\"http://developer.android.com/guide/topics/ui/declaring-layout.html\" rel=\"nofollow\">http://developer.android.com/guide/topics/ui/declaring-layout.html</a>) </p>\n\n<p>Kotlin synthetics are produced by an IntelliJ plugin. Without the IDs being unique, it seems that the plugin cannot currently correctly match the ID to the correct view. It may be expecting unique IDs. </p>\n"}], "owner": {"reputation": 25, "user_id": 6569676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PFjnCXckxKI/AAAAAAAAAAI/AAAAAAAAAGs/R0bW-hPhZDc/photo.jpg?sz=128", "display_name": "Melon Therapy", "link": "https://stackoverflow.com/users/6569676/melon-therapy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1469191561, "creation_date": 1468357836, "last_edit_date": 1468358691, "question_id": 38338943, "link": "https://stackoverflow.com/questions/38338943/kotlinx-injects-view-from-wrong-layout", "title": "Kotlinx injects view from wrong layout", "body": "<p>I have a piece of code that checks whether view is visible</p>\n\n<pre><code>import kotlinx.android.synthetic.main.activity_layout.*\n\nval isOverflowPanelShown: Boolean\n   get() = overflow_panel.visibility != View.GONE\n</code></pre>\n\n<p>previous code throws exception</p>\n\n<pre><code>java.lang.ClassCastException: android.widget.FrameLayout cannot be cast to android.widget.ScrollView\n    at com.company.app.Activity.isOverflowPanelShown(Activity.kt:362)\n</code></pre>\n\n<p>The view is instance of <code>ScrollView</code> class, however kotlin thinks its a <code>FrameLayout</code>. Calling findViewById() on the same place as error is thrown it correctly returns ScrollView. I found that in <strong>different layout</strong> in the application there is a <strong><code>FrameLayout</code> under same id</strong>.</p>\n\n<p>I am inflating following layout</p>\n\n<p><code>activity_layout</code></p>\n\n<pre><code>&lt;ScrollView\n    android:id=\"@+id/overflow_panel\"\n    android:layout_width=\"300dp\"\n    android:layout_height=\"wrap_content\"\n    /&gt;\n</code></pre>\n\n<p>In another layout that I use on entirely different place, there is a different view with the same id.</p>\n\n<p><code>form_component_main</code></p>\n\n<pre><code>&lt;FrameLayout\n    android:id=\"@+id/overflow_panel\" \n    android:layout_width=\"250dp\"\n    android:layout_height=\"wrap_content\"\n    /&gt;\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1308, "user_id": 1295419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/g5QXq.jpg?s=128&g=1", "display_name": "Sermilion", "link": "https://stackoverflow.com/users/1295419/sermilion"}, "edited": false, "score": 0, "creation_date": 1468325577, "post_id": 38328352, "comment_id": 64071461, "body": "So it is practically impossible to directly get to the property right? And I am safe to always keep them public? (I came from java where everything should be private) How about internal?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 1308, "user_id": 1295419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/g5QXq.jpg?s=128&g=1", "display_name": "Sermilion", "link": "https://stackoverflow.com/users/1295419/sermilion"}, "edited": false, "score": 0, "creation_date": 1468326331, "post_id": 38328352, "comment_id": 64071988, "body": "What do you mean by &quot;directly get to the property&quot;? A backing field of a property can only be accessed through reflection. <code>internal</code> visibility should be used if the property is only accessed from the same module."}, {"owner": {"reputation": 1308, "user_id": 1295419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/g5QXq.jpg?s=128&g=1", "display_name": "Sermilion", "link": "https://stackoverflow.com/users/1295419/sermilion"}, "edited": false, "score": 0, "creation_date": 1468326900, "post_id": 38328352, "comment_id": 64072465, "body": "I meant as in Java, if you make field public, you can access it without getter and setter, which is not good. But I got it now, thank you."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 7, "creation_date": 1468329631, "post_id": 38328352, "comment_id": 64074651, "body": "You should understand the difference between a field and a property. Basicly: Property = field + getter (+ setter, if mutable)."}, {"owner": {"reputation": 1150, "user_id": 2762452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JHX2L.jpg?s=128&g=1", "display_name": "Mauro Banze", "link": "https://stackoverflow.com/users/2762452/mauro-banze"}, "edited": false, "score": 0, "creation_date": 1559316320, "post_id": 38328352, "comment_id": 99394185, "body": "@yole this definition and explanation should be made available in the kotlin docs, as it&#39;s vital. The docs don&#39;t explain the idea behind this, which leaves you confused as to how things work and why. Please improve the docs"}, {"owner": {"reputation": 904, "user_id": 507563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc60a77f84badd72d4bde6c46cb9b71d?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/507563/scott"}, "edited": false, "score": 0, "creation_date": 1614284247, "post_id": 38328352, "comment_id": 117346431, "body": "The problem is that <i>everything</i> in Kotlin is a property; <code>var</code> and <code>val</code> are always properties. I agree that most getter/setter methods are public in most Java codebases, however in my experience most fields in a well designed architecture DO NOT correspond with properties and they are declared <code>private</code>. If <code>var</code> and <code>val</code> were exclusively a property construct separate from a field construct, I would agree with the public default decision, but this is not the case."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 10, "last_activity_date": 1468324905, "creation_date": 1468324905, "answer_id": 38328352, "question_id": 38327920, "link": "https://stackoverflow.com/questions/38327920/should-properties-of-class-in-kotlin-be-private-and-how-to-access-them/38328352#38328352", "title": "Should properties of class in Kotlin be private and how to access them?", "body": "<p>The whole idea of a property is that it encapsulates a field and its accessors in a single entity. If you need to be able to access and modify a property of a class from the outside, you should keep the property public. If you need to be able to read from the outside but not update it, you can define a public property with a private accessor.</p>\n\n<p>Changing a default accessor to a custom one will not affect the clients of your class, because under the hood the compiler will always generate accessor methods, and the clients of the class will use those methods and will not access the underlying field directly.</p>\n\n<p>You should never write explicit getter or mutator methods which are separate from the property accessors.</p>\n"}], "owner": {"reputation": 1308, "user_id": 1295419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/g5QXq.jpg?s=128&g=1", "display_name": "Sermilion", "link": "https://stackoverflow.com/users/1295419/sermilion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1533, "favorite_count": 0, "accepted_answer_id": 38328352, "answer_count": 1, "score": 3, "last_activity_date": 1468324905, "creation_date": 1468323690, "question_id": 38327920, "link": "https://stackoverflow.com/questions/38327920/should-properties-of-class-in-kotlin-be-private-and-how-to-access-them", "title": "Should properties of class in Kotlin be private and how to access them?", "body": "<p>Aloha! While reading Kotling Language Reference I noticed that the keyword \"private\" for properties of a class is never used (always default which is public). It also said that getters and setters are generated automatically.\nSo I created class and made its fields private. However, when I create object of the class, I cannot see the fields and no setters and getters are available, unless I write them myself.\nSo what's the rule here? Leave visibility modifier default (public) or make them private and provide mutator methods?\nThank you.</p>\n"}, {"tags": ["java", "spring", "spring-boot", "netty", "kotlin"], "comments": [{"owner": {"reputation": 1639, "user_id": 992706, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c4157893cac7f2758cdce7f48120828e?s=128&d=identicon&r=PG", "display_name": "Bharath", "link": "https://stackoverflow.com/users/992706/bharath"}, "edited": false, "score": 0, "creation_date": 1494920739, "post_id": 38319599, "comment_id": 75019200, "body": "did u figure out why MappingJackson2HttpMessageConverter is not parsing the json? im seeing the same error in java. if you look at the documentation for asyncresttemplate &quot;The AsyncRestTemplate exposes a synchronous RestTemplate via the getRestOperations() method and shares its error handler and message converters with that RestTemplate.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1473666714, "post_id": 39440992, "comment_id": 66213088, "body": "There are my playground <a href=\"https://github.com/IRus/kotlin-meetup/tree/stackoverflow/async-netty\" rel=\"nofollow noreferrer\">github.com/IRus/kotlin-meetup/tree/stackoverflow/async-netty</a>"}, {"owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "edited": false, "score": 0, "creation_date": 1473714020, "post_id": 39440992, "comment_id": 66238626, "body": "Very interesting! I followed the code step by step and I can see how it is properly converted using the Mapping Jackson Converter and then flushed downstream. I suppose this flushing is probably not working as expected because when I send the payload as a string and it uses the StringMessageConverter everything works just fine."}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 2, "last_activity_date": 1473630723, "creation_date": 1473630723, "answer_id": 39440992, "question_id": 38319599, "link": "https://stackoverflow.com/questions/38319599/spring-boot-with-asyncresttemplate-netty-client-fails/39440992#39440992", "title": "Spring Boot with AsyncRestTemplate Netty Client Fails", "body": "<p>Looks like there are problem in serialization on Client's side. Because this code works perfect:</p>\n\n<pre><code>restTemplate.exchange(\n        URI.create(\"http://localhost:8080/foo\"),\n        HttpMethod.PUT,\n        HttpEntity(\"\"\"{\"orderId\":\"1234\"}\"\"\", HttpHeaders().apply {\n            setContentType(MediaType.APPLICATION_JSON);\n        }),\n        Order::class.java\n).addCallback(object : ListenableFutureCallback&lt;ResponseEntity&lt;Order&gt;&gt; {\n    override fun onSuccess(result: ResponseEntity&lt;Order&gt;) {\n        println(\"Result: ${result.body}\")\n    }\n\n    override fun onFailure(ex: Throwable) {\n        ex.printStackTrace()\n        if (ex is HttpStatusCodeException) {\n            println(ex.responseBodyAsString)\n        }\n    }\n})\n</code></pre>\n\n<p>I need more precise look at restTemplate at his converters, but for now you can write this part this way:</p>\n\n<pre><code>val mapper = ObjectMapper()\n\nrestTemplate.exchange(\n        URI.create(\"http://localhost:8080/foo\"),\n        HttpMethod.PUT,\n        HttpEntity(mapper.writeValueAsString(Order(\"HELLO\")), HttpHeaders().apply {\n            setContentType(MediaType.APPLICATION_JSON);\n        }),\n        Order::class.java\n).addCallback(object : ListenableFutureCallback&lt;ResponseEntity&lt;Order&gt;&gt; {\n    override fun onSuccess(result: ResponseEntity&lt;Order&gt;) {\n        println(\"Result: ${result.body}\")\n    }\n\n    override fun onFailure(ex: Throwable) {\n        ex.printStackTrace()\n        if (ex is HttpStatusCodeException) {\n            println(ex.responseBodyAsString)\n        }\n    }\n})\n</code></pre>\n\n<p>As you see, i don't use KotlinModule and this code works perfectly, so obviously problem in cofiguration AsyncRestTemplate itself.</p>\n"}, {"tags": [], "owner": {"reputation": 1639, "user_id": 992706, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c4157893cac7f2758cdce7f48120828e?s=128&d=identicon&r=PG", "display_name": "Bharath", "link": "https://stackoverflow.com/users/992706/bharath"}, "is_accepted": false, "score": 1, "last_activity_date": 1494962186, "last_edit_date": 1494962186, "creation_date": 1494952982, "answer_id": 44007153, "question_id": 38319599, "link": "https://stackoverflow.com/questions/38319599/spring-boot-with-asyncresttemplate-netty-client-fails/44007153#44007153", "title": "Spring Boot with AsyncRestTemplate Netty Client Fails", "body": "<p>My 2 cents. This is surely not the solution. </p>\n\n<p>I configured the <code>asyncRestTemplate</code> with a <code>AsyncHttpClientRequestInterceptor</code> and it magically worked. No explanation, period! </p>\n\n<pre><code>public class AsyncClientLoggingInterceptor implements AsyncClientHttpRequestInterceptor {\n\n    @Override\n    public ListenableFuture&lt;ClientHttpResponse&gt; intercept(HttpRequest request, byte[] body, AsyncClientHttpRequestExecution execution) throws IOException {\n\n        return execution.executeAsync(request, body);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2249, "favorite_count": 2, "accepted_answer_id": 39440992, "answer_count": 2, "score": 7, "last_activity_date": 1494962186, "creation_date": 1468294402, "last_edit_date": 1592644375, "question_id": 38319599, "link": "https://stackoverflow.com/questions/38319599/spring-boot-with-asyncresttemplate-netty-client-fails", "title": "Spring Boot with AsyncRestTemplate Netty Client Fails", "body": "<p>I have a Spring Boot 1.3.6 application, built out of the box and using the embedded Tomcat server. The application has a single endpoint doing a very simple echo request.</p>\n<p>Later I defined a corresponding client invoking that simple endpoint using <code>AsyncRestTemplate</code>, however if my client uses the <code>Netty4ClientHttpRequestFactory</code> the request fails, otherwise it succeeds.</p>\n<p>My example below is in Kotlin, but it fails just the same in Java, so it does not have to do with the language I use to implement it.</p>\n<h3>The Server</h3>\n<pre><code>@SpringBootApplication\nopen class EchoApplication {\n\n    companion object {\n       @JvmStatic fun main(args: Array&lt;String&gt;) {\n          SpringApplication.run(EchoApplication::class.java, *args)\n       }\n    }\n\n    @Bean\n    open fun objectMapper(): ObjectMapper {\n        return ObjectMapper().apply {\n            dateFormat = SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ssXXX&quot;)\n            registerModule(KotlinModule())\n        }\n    }\n\n    @Bean\n    open fun customConverters(): HttpMessageConverters {\n        return HttpMessageConverters(listOf(MappingJackson2HttpMessageConverter(objectMapper())))\n    }\n}\n</code></pre>\n<p>My endpoint looks like this:</p>\n<pre><code>@RestController\nclass EchoController {\n\n    @RequestMapping(value=&quot;/foo&quot;, method = arrayOf(RequestMethod.PUT))\n    fun echo(@RequestBody order: Order): Order {\n        return order\n    }\n\n}\n</code></pre>\n<p>And the order data class is</p>\n<pre><code>data class Order(val orderId: String)\n</code></pre>\n<p>Note: Since I use Kotlin, I also added the <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow noreferrer\">Kotlin Jackson Module</a> to ensure proper constructor deserialization.</p>\n<h3>The Client</h3>\n<p>I then proceeded to create a client that invokes this endpoint.</p>\n<p>If I do something like the following in my client, it works perfectly and I get a successful echo response.</p>\n<pre><code>    val executor = TaskExecutorAdapter(Executors.newFixedThreadPool(2))\n    val restTemplate = AsyncRestTemplate(executor)\n    restTemplate.messageConverters = listOf(MappingJackson2HttpMessageConverter(mapper))\n\n    val promise = restTemplate.exchange(URI.create(&quot;http://localhost:8080/foo&quot;), HttpMethod.PUT, HttpEntity(Order(&quot;b1254&quot;), headers), Order::class.java)\n    promise.addCallback(object : ListenableFutureCallback&lt;ResponseEntity&lt;Order&gt;&gt; {\n        override fun onSuccess(result: ResponseEntity&lt;Order&gt;) {\n            println(result.body)\n        }\n\n        override fun onFailure(ex: Throwable) {\n            ex.printStackTrace()\n            if(ex is HttpStatusCodeException){\n                println(ex.responseBodyAsString)\n            }\n        }\n    })\n</code></pre>\n<p>As mentioned above, the code above runs perfectly and prints a successful echo response.</p>\n<h3>The Problem</h3>\n<p>But if I decide to use the Netty client, then I get 400 Bad Request reporting I did not pass the body:</p>\n<pre><code>val nettyFactory = Netty4ClientHttpRequestFactory()\nval restTemplate = AsyncRestTemplate(nettyFactory)\n</code></pre>\n<p>When I do this then I get a <code>HttpMessageNotReadableException</code> with a message saying &quot;Required request body is missing&quot;.</p>\n<p>I debugged the Spring Boot code and I see that when the <code>ServletInputStream</code> is read, it always return -1 as if it was empty.</p>\n<p>In my gradle I added <code>runtime('io.netty:netty-all:4.1.2.Final')</code>, so I am using what, as of today, is the latest version of Netty. This Netty version has worked just fine when interacting with endpoints in other projects that I have that use regular Spring (i.e. not Spring Boot).</p>\n<p>How come the <code>SimpleClientHttpRequestFactory</code> works fine, but the <code>Netty4ClientHttpRequestFactory</code> fails?</p>\n<p>I thought it might had to do with the embedded Tomcat server, however, if I package this application as war and deploy it in an existing Tomcat server (i.e. not using the embedded one), the problem persists. So, I'm guessing is something related to Spring/Spring Boot.</p>\n<p>Am I missing any configuration in my Spring Boot app? Any suggestions on how to make the Netty client work with Spring Boot?</p>\n"}, {"tags": ["gradle", "groovy", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1116, "user_id": 6452817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3d1bc268f49b2396c35faed4669de01?s=128&d=identicon&r=PG&f=1", "display_name": "Silverclaw", "link": "https://stackoverflow.com/users/6452817/silverclaw"}, "edited": false, "score": 1, "creation_date": 1468272076, "post_id": 38316399, "comment_id": 64049266, "body": "I wasn&#39;t even aware of Kotlin as a possible language, I will look into it and decide what I like better. Thanks. ;)"}, {"owner": {"reputation": 21384, "user_id": 402053, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3d73332968c0bf62e1ece7299deb8b37?s=128&d=identicon&r=PG", "display_name": "JBaruch", "link": "https://stackoverflow.com/users/402053/jbaruch"}, "reply_to_user": {"reputation": 1116, "user_id": 6452817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3d1bc268f49b2396c35faed4669de01?s=128&d=identicon&r=PG&f=1", "display_name": "Silverclaw", "link": "https://stackoverflow.com/users/6452817/silverclaw"}, "edited": false, "score": 2, "creation_date": 1468272123, "post_id": 38316399, "comment_id": 64049288, "body": "I am adding the link to the anouncement"}, {"owner": {"reputation": 11248, "user_id": 10508, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/701a6677ec8342043519e95a24fc3099?s=128&d=identicon&r=PG", "display_name": "David M. Karr", "link": "https://stackoverflow.com/users/10508/david-m-karr"}, "edited": false, "score": 3, "creation_date": 1468276930, "post_id": 38316399, "comment_id": 64050925, "body": "Probably a trivial distinction, but I would disagree with the statement that &quot;it&#39;s not Groovy&quot;.  You obviously can&#39;t run a Gradle build script with the raw Groovy interpreter, but note that there is no &quot;Gradle interpreter&quot;.  Running a Gradle build script involves setting up a context (probably somewhat complex context) and then running the build script with Groovy."}, {"owner": {"reputation": 21384, "user_id": 402053, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3d73332968c0bf62e1ece7299deb8b37?s=128&d=identicon&r=PG", "display_name": "JBaruch", "link": "https://stackoverflow.com/users/402053/jbaruch"}, "reply_to_user": {"reputation": 11248, "user_id": 10508, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/701a6677ec8342043519e95a24fc3099?s=128&d=identicon&r=PG", "display_name": "David M. Karr", "link": "https://stackoverflow.com/users/10508/david-m-karr"}, "edited": false, "score": 2, "creation_date": 1468342522, "post_id": 38316399, "comment_id": 64083992, "body": "@DavidM.Karr corrected the <b>not</b> Groovy part a bit based on your comment. Thanks."}], "tags": [], "owner": {"reputation": 21384, "user_id": 402053, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3d73332968c0bf62e1ece7299deb8b37?s=128&d=identicon&r=PG", "display_name": "JBaruch", "link": "https://stackoverflow.com/users/402053/jbaruch"}, "is_accepted": true, "score": 33, "last_activity_date": 1468371762, "last_edit_date": 1468371762, "creation_date": 1468271964, "answer_id": 38316399, "question_id": 38316107, "link": "https://stackoverflow.com/questions/38316107/is-groovy-knowledge-required-to-understand-gradle/38316399#38316399", "title": "Is Groovy knowledge required to understand Gradle?", "body": "<p>Gradle uses DSL (domain specific language) that is <em>currently</em> based on top of Groovy. That means, that you should be able to work with Gradle to some extend by learning the DSL only. It, of course, inherits some of the syntax from Groovy (like the parentheses etc) but the syntax pretty far away from a normal Groovy code.</p>\n\n<p>If you want to start writing your own closures, tasks and plugins then you need some Groovy skills, yes. <a href=\"http://amzn.to/29wtXk8\" rel=\"noreferrer\">Groovy in Action 2nd edition</a> is a great book, or if you are a Java developer, take a look at <a href=\"http://amzn.to/29CPjk8\" rel=\"noreferrer\">Making Java Groovy</a>. </p>\n\n<p>Saying that, please keep in mind that <a href=\"https://gradle.org/blog/kotlin-meets-gradle/\" rel=\"noreferrer\">Gradle Inc announced that they are going to support Kotlin as another language to base the DSL on</a>. It means that you will be able to write the \"custom\" parts of your build in Kotlin <em>or</em> Groovy. So, keep an eye on Kotlin as well, here's the best way to do it \u2013 <a href=\"http://amzn.to/29A73u8\" rel=\"noreferrer\">Kotlin in Action</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 8303, "user_id": 2986984, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45f2bc89b6610a463cde6865848a193d?s=128&d=identicon&r=PG", "display_name": "tkruse", "link": "https://stackoverflow.com/users/2986984/tkruse"}, "is_accepted": false, "score": 0, "last_activity_date": 1517211944, "creation_date": 1517211944, "answer_id": 48496581, "question_id": 38316107, "link": "https://stackoverflow.com/questions/38316107/is-groovy-knowledge-required-to-understand-gradle/48496581#48496581", "title": "Is Groovy knowledge required to understand Gradle?", "body": "<ul>\n<li><p>To just use Gradle, you can go without understanding Groovy.</p></li>\n<li><p>To understand how a Gradle file syntax works, you definitely need to understand Groovy. People generally struggle with Gradle when scripts become complex.</p></li>\n</ul>\n\n<p>Gradle uses mostly vanilla Groovy as it's language, but the documentation and most examples use a specific style, that is different from the most conventional style when writing other Groovy code.</p>\n\n<p>But except for a single compiler plugin (for turning some names without quotes into strings), all Gradle code is also valid Groovy code, and you could write any gradle file in the same style as you write any other Groovy file.</p>\n"}], "owner": {"reputation": 1116, "user_id": 6452817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3d1bc268f49b2396c35faed4669de01?s=128&d=identicon&r=PG&f=1", "display_name": "Silverclaw", "link": "https://stackoverflow.com/users/6452817/silverclaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2745, "favorite_count": 4, "accepted_answer_id": 38316399, "answer_count": 2, "score": 19, "last_activity_date": 1517211944, "creation_date": 1468270671, "last_edit_date": 1468272304, "question_id": 38316107, "link": "https://stackoverflow.com/questions/38316107/is-groovy-knowledge-required-to-understand-gradle", "title": "Is Groovy knowledge required to understand Gradle?", "body": "<p>So, I've been trying to avoid build tools for a while, but started to use Gradle for some time now. I'm able to use it for simple things like letting it download dependencies, like it's intended, but I've seen people use it to do really advanced staff like manage large projects with different modules, native dependencies, publish to Github when building, etc.</p>\n\n<p>I feel like I still need to copy-paste a lot when trying to do anything more complicated, because even after finding some documentation to read, I'm still not sure where language syntax like {, }, :, (, ), are meant to be used.</p>\n\n<p>So, my question is: Does it make sense to learn Groovy to understand Gradle better? Should reading the docs be enough? I'm not even asking because I would not be interested in Groovy, I'm just wondering how people got used to using Gradle and whether it makes sense to use it for more advanced tasks then fetching dependencies from repositories.</p>\n"}, {"tags": ["properties", "kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1468244743, "post_id": 38308231, "comment_id": 64033734, "body": "Does this actually compile (either of your snippets)? <code>time</code> field on a <code>Calendar</code> object is of type <code>int</code>, but looks like you&#39;re assigning a <code>Date</code> value to it. And then again you&#39;re returning <code>cal.time</code> as <code>Date</code>, while it&#39;s an <code>int</code>."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1468245373, "post_id": 38308231, "comment_id": 64034216, "body": "@MarcinKozi\u0144ski, both have no errors on my side, and <code>cal.time</code> is <code>java.util.Date</code>."}, {"owner": {"reputation": 8927, "user_id": 2767703, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nj9nV.png?s=128&g=1", "display_name": "Kevin van Mierlo", "link": "https://stackoverflow.com/users/2767703/kevin-van-mierlo"}, "reply_to_user": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1468245382, "post_id": 38308231, "comment_id": 64034223, "body": "@MarcinKozi\u0144ski Yes both compile, but the 2nd one can&#39;t be used on a <code>Date</code> object. <code>cal.time</code> returns a <code>Date</code>"}, {"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1468246459, "post_id": 38308231, "comment_id": 64035075, "body": "Yes, sorry, I just couldn&#39;t read documentation straight and got confused!"}], "answers": [{"comments": [{"owner": {"reputation": 8927, "user_id": 2767703, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nj9nV.png?s=128&g=1", "display_name": "Kevin van Mierlo", "link": "https://stackoverflow.com/users/2767703/kevin-van-mierlo"}, "edited": false, "score": 0, "creation_date": 1468245962, "post_id": 38308743, "comment_id": 64034673, "body": "The first option looks good enough to use, unfortunately I cannot get it to work. It has a receiver type mismatch. It also doesn&#39;t pop up in the auto completion. I&#39;m using the date in a function, so I&#39;m creating a var which is a date and try to call the extension function. Any clue what I&#39;m doing wrong?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 8927, "user_id": 2767703, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nj9nV.png?s=128&g=1", "display_name": "Kevin van Mierlo", "link": "https://stackoverflow.com/users/2767703/kevin-van-mierlo"}, "edited": false, "score": 0, "creation_date": 1468246104, "post_id": 38308743, "comment_id": 64034786, "body": "@KevinvanMierlo, did you change the extension signature to <code>fun &lt;T&gt; KMutableProperty1&lt;T, Date&gt;.addDays(...)</code>? Works fine for me, the call is <code>C::date.addDays(c, 123)</code>."}, {"owner": {"reputation": 8927, "user_id": 2767703, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nj9nV.png?s=128&g=1", "display_name": "Kevin van Mierlo", "link": "https://stackoverflow.com/users/2767703/kevin-van-mierlo"}, "edited": false, "score": 0, "creation_date": 1468246388, "post_id": 38308743, "comment_id": 64035020, "body": "Yeah I did change the signature. Did something else wrong, it&#39;s working now.  It&#39;s not ideal, but it&#39;s something. Thanks for the answer!"}, {"owner": {"reputation": 8927, "user_id": 2767703, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nj9nV.png?s=128&g=1", "display_name": "Kevin van Mierlo", "link": "https://stackoverflow.com/users/2767703/kevin-van-mierlo"}, "edited": false, "score": 0, "creation_date": 1468247498, "post_id": 38308743, "comment_id": 64035870, "body": "Thank you for all the information! Hope that the bound callable references are released soon. I&#39;ve accepted your answer because it answers my question. I also wanted to note the answer of @MarcinKozi\u0144ski because that answer fixed my issue."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1468246804, "last_edit_date": 1468246804, "creation_date": 1468245204, "answer_id": 38308743, "question_id": 38308231, "link": "https://stackoverflow.com/questions/38308231/kotlin-extension-function-on-mutable-property/38308743#38308743", "title": "Kotlin extension function on mutable property", "body": "<p>Unfortunately, you cannot define an extension on a member property and call it fluently in Kotlin 1.0.3.</p>\n\n<p>Your extension can be rewritten to work like this:</p>\n\n<pre><code>fun &lt;T&gt; KMutableProperty1&lt;T, Date&gt;.addDays(receiver: T, nrOfDays: Int) {\n    val cal = Calendar.getInstance()\n    cal.time = this.get(receiver)\n    cal.add(Calendar.DAY_OF_YEAR, nrOfDays)\n    this.set(receiver, cal.time)\n}\n</code></pre>\n\n<p>with the following usage:</p>\n\n<pre><code>class C(var date: Date) { ... }\nval c = C(someDate())\n\nC::date.addDays(c, 123)\n</code></pre>\n\n<p>With <a href=\"https://youtrack.jetbrains.com/issue/KT-6947\" rel=\"nofollow\">bound callable references (likely supported in Kotlin 1.1)</a> this will be possible with the following syntax:</p>\n\n<pre><code>c::date.addDays(123)\n</code></pre>\n\n<hr>\n\n<p>As @MarcinKozi\u0144ski suggests, you can also mutate your <code>Date</code> objects without reassigning the property:</p>\n\n<pre><code>fun Date.addDays(nrOfDays: Int) {\n    val cal = Calendar.getInstance()\n    cal.time = this\n    cal.add(Calendar.DAY_OF_YEAR, nrOfDays)\n    this.time = cal.timeInMillis\n}\n</code></pre>\n\n<p>with usage:</p>\n\n<pre><code>class C(var date: Date)\nval c = C(someDate())\n\nc.date.addDays(123)\n</code></pre>\n\n<p>With this solution, you have to control the references to the <code>Date</code> object which is mutated. This solution works good with mutable objects, though it is not suitable for a property storing immutable ones.</p>\n"}, {"comments": [{"owner": {"reputation": 8927, "user_id": 2767703, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nj9nV.png?s=128&g=1", "display_name": "Kevin van Mierlo", "link": "https://stackoverflow.com/users/2767703/kevin-van-mierlo"}, "edited": false, "score": 0, "creation_date": 1468246587, "post_id": 38309157, "comment_id": 64035185, "body": "I can&#39;t believe I haven&#39;t done this.. That would fix my entire issue, thanks!"}, {"owner": {"reputation": 8927, "user_id": 2767703, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nj9nV.png?s=128&g=1", "display_name": "Kevin van Mierlo", "link": "https://stackoverflow.com/users/2767703/kevin-van-mierlo"}, "edited": false, "score": 0, "creation_date": 1468246902, "post_id": 38309157, "comment_id": 64035438, "body": "While this fixes my issue, the answer from @hotkey answers my question. So I&#39;ll have to accept his answer as the right one. But thank you so much for this answer, this fixes a lot of issues I had."}], "tags": [], "owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "is_accepted": false, "score": 3, "last_activity_date": 1468246385, "creation_date": 1468246385, "answer_id": 38309157, "question_id": 38308231, "link": "https://stackoverflow.com/questions/38308231/kotlin-extension-function-on-mutable-property/38309157#38309157", "title": "Kotlin extension function on mutable property", "body": "<p>Instead of returning a new <code>Date</code> and trying to update your property, you can just mutate the <code>Date</code> that your property already holds:</p>\n\n<pre><code>fun Date.addDays(nrOfDays: Int) {\n    val cal = Calendar.getInstance()\n    cal.time = this\n    cal.add(Calendar.DAY_OF_YEAR, nrOfDays)\n    this.time = cal.timeInMillis\n}\n</code></pre>\n"}], "owner": {"reputation": 8927, "user_id": 2767703, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nj9nV.png?s=128&g=1", "display_name": "Kevin van Mierlo", "link": "https://stackoverflow.com/users/2767703/kevin-van-mierlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "accepted_answer_id": 38308743, "answer_count": 2, "score": 2, "last_activity_date": 1468246804, "creation_date": 1468243694, "last_edit_date": 1468245473, "question_id": 38308231, "link": "https://stackoverflow.com/questions/38308231/kotlin-extension-function-on-mutable-property", "title": "Kotlin extension function on mutable property", "body": "<p>I'm trying to set an extension function on a mutable property so I can reassign the property in the extension function. I wanted to know if it was possible.</p>\n\n<p>My goals is to make <code>Date</code> extensions for easy access. For example:</p>\n\n<pre><code>fun Date.addDays(nrOfDays: Int): Date {\n    val cal = Calendar.getInstance()\n    cal.time = this\n    cal.add(Calendar.DAY_OF_YEAR, nrOfDays)\n    return cal.time\n}\n</code></pre>\n\n<p>This function adds number of days to a date using a <code>Calendar</code> object. The problem is each time I have to return a new date which can be confusing to reassign each time you use this function.</p>\n\n<p>What I've tried:</p>\n\n<pre><code>fun KMutableProperty0&lt;Date&gt;.addDays(nrOfDays: Int) {\n    val cal = Calendar.getInstance()\n    cal.time = this.get()\n    cal.add(Calendar.DAY_OF_YEAR, nrOfDays)\n    this.set(cal.time)\n}\n</code></pre>\n\n<p>Unfortunately this can't be used on a <code>Date</code> object.</p>\n\n<p>Is it possible to do this?</p>\n"}, {"tags": ["generics", "kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1468241231, "post_id": 38299789, "comment_id": 64031156, "body": "It is strange, the first snippet works for me all right. Could you please provide a minimal self-contained example without external dependencies?"}, {"owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1468251939, "post_id": 38299789, "comment_id": 64038812, "body": "I&#39;m not sure I understand. I&#39;ve created a github repo to show the code at <a href=\"https://github.com/sepatel/kotlin-seed\" rel=\"nofollow noreferrer\">github.com/sepatel/kotlin-seed</a>. It is the entire project and hopefully will help describe the issue better?  The error it gives is a compile error on the use of the API saying &quot;e: Main.kt: (23, 9): Expected a value of type Any e: Main.kt: (23, 34): Type inference failed: Not enough information to infer parameter T in fun &lt;T&gt; Request.asData(type: KClass&lt;*&gt;): T&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "edited": false, "score": 1, "creation_date": 1468251702, "post_id": 38299875, "comment_id": 64038667, "body": "In order to inline you have to have all variables publicly available and in this case the mapper is privately defined in the library and so inline doesn&#39;t work. Plus I already tried to do it the way you mentioned by making the mapper public and making it reified and it still was not consumable as you described giving a compiler error of Any type expected."}, {"owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "edited": false, "score": 0, "creation_date": 1468252780, "post_id": 38299875, "comment_id": 64039363, "body": "Created a branch <a href=\"https://github.com/sepatel/kotlin-seed/tree/reified\" rel=\"nofollow noreferrer\">github.com/sepatel/kotlin-seed/tree/reified</a> to demonstrate that even as reified it doesn&#39;t work giving the &quot;Expected value to be of type Any&quot; error when used."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "edited": false, "score": 0, "creation_date": 1468270490, "post_id": 38299875, "comment_id": 64048521, "body": "@Ryba the <code>post(&quot;&#47;hello&quot;, {res,req-&gt; ...</code> lamba parameters must return <code>Any</code>. The assignment in Kotlin is not an expression, hence it has no value. You need to specify the return value."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 5, "last_activity_date": 1468270500, "last_edit_date": 1468270500, "creation_date": 1468215900, "answer_id": 38299875, "question_id": 38299789, "link": "https://stackoverflow.com/questions/38299789/in-kotlin-how-to-return-an-instance-defined-by-generic-class-parameter/38299875#38299875", "title": "In kotlin, how to return an instance defined by generic class parameter", "body": "<p>The more Kotlin idiomatic way would be to use <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow\">reified type parameters</a>:</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; Request.asDataBean(): T = mapper.readValue(this.body(), T::class.java)\n</code></pre>\n\n<p>Which can then be consumed as:</p>\n\n<pre><code>post(\"/hello\", { req, res -&gt;\n    val bean = req.bodyAs&lt;TestBean&gt;()\n    res.body(\"Ok\")\n})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "edited": false, "score": 0, "creation_date": 1468329079, "post_id": 38316027, "comment_id": 64074240, "body": "Thanks. I can&#39;t believe that I mis-interpreted the error message like that. After reading your reason I felt like a newbie. Thanks for the tip on reified, I never thought about that and that sounds like the best solution to the problem at hand."}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 5, "last_activity_date": 1468270350, "creation_date": 1468270350, "answer_id": 38316027, "question_id": 38299789, "link": "https://stackoverflow.com/questions/38299789/in-kotlin-how-to-return-an-instance-defined-by-generic-class-parameter/38316027#38316027", "title": "In kotlin, how to return an instance defined by generic class parameter", "body": "<p><code>post</code> function in your example requires <code>route: (Request, Response) -&gt; Any</code> parameter, that is a function, taking request and response and returning some non-null value.</p>\n\n<p>When you use a lambda expression as a <code>route</code>, its return type is inferred from the last expression of lambda's body, and since in Kotlin an assignment is not an expression, the following lambda doesn't have the return type at all:</p>\n\n<pre><code>{ req, res -&gt;\n    val bean = req.asDataBean(TestBean::class)\n}\n</code></pre>\n\n<p>To make it work just make <code>bean</code> the last expression </p>\n\n<pre><code>{ req, res -&gt;\n    val bean = req.asDataBean(TestBean::class)\n    bean\n}\n</code></pre>\n\n<p>or do not use the assignment at all:</p>\n\n<pre><code>{ req, res -&gt; req.asDataBean(TestBean::class) }\n</code></pre>\n\n<hr>\n\n<p>Note: I have used the following definition of <code>asDataBean</code> function:</p>\n\n<pre><code>fun &lt;T: Any&gt; Request.asDataBean(type: KClass&lt;T&gt;): T =\n    mapper.readValue(this.body(), type.java)\n</code></pre>\n\n<p>Also you could make a reified overload, which calls non-reified one, so that you don't have to expose all the internals:</p>\n\n<pre><code>inline fun &lt;reified T: Any&gt; Request.asDataBean(): T = \n    asDataBean(T::class)\n\nreq.asDataBean&lt;TestBean&gt;() // usage\n</code></pre>\n"}], "owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3764, "favorite_count": 1, "accepted_answer_id": 38316027, "answer_count": 2, "score": 6, "last_activity_date": 1468270500, "creation_date": 1468215407, "last_edit_date": 1468251812, "question_id": 38299789, "link": "https://stackoverflow.com/questions/38299789/in-kotlin-how-to-return-an-instance-defined-by-generic-class-parameter", "title": "In kotlin, how to return an instance defined by generic class parameter", "body": "<p>I'm trying to write a nice Kotlin wrapper for a web framework against kotlin 1.0.3. In that I am trying to mixin a function to the request to have it return a bean via a JSON transformation using jackson.</p>\n\n<p>So in my library I have the following</p>\n\n<pre><code>private val mapper: ObjectMapper = ObjectMapper().registerModule(KotlinModule())\nfun &lt;T : Any&gt; Request.asDataBean(type: KClass&lt;T&gt;): T = mapper.readValue(this.body(), type.java)\n</code></pre>\n\n<p>But when I goto use the code as such</p>\n\n<pre><code>post(\"/hello\", { req, res -&gt;\n    val bean = req.asDataBean(TestBean::class)\n})\n</code></pre>\n\n<p>It errors saying that the expected value of bean is Any. What I want is for my API to work as above where whatever the generic \"class\" definition that is passed into asDataBean method is the type of value that is returned back.</p>\n\n<p>I've also tried </p>\n\n<pre><code>fun &lt;T&gt; Request.asDataBean(type: KClass&lt;*&gt;): T = mapper.readValue(this.body(), type.java) as T\n</code></pre>\n\n<p>as well as changing the usage code to </p>\n\n<pre><code>val bean: TestBean = req.asDataBean(TestBean::class)\n</code></pre>\n\n<p>in hopes of making it work but they also give the exact same error when using the code.</p>\n\n<p>How do I get it to use the generic defined by the class type passed in as the parameter (very similar to how all the spring api's work in java)?</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 3, "last_activity_date": 1468214182, "creation_date": 1468214182, "answer_id": 38299583, "question_id": 38299468, "link": "https://stackoverflow.com/questions/38299468/create-a-generic-class-with-an-array-of-type-comparablet-in-kotlin/38299583#38299583", "title": "Create a generic class with an array of type Comparable&lt;T&gt; in kotlin?", "body": "<p>The error message while misleading does hint that it's about nullability constraints of your type arguments and parameters. Change the <code>GenericClass</code> constructor to allow for <code>null</code> inside <code>Array</code> like so:</p>\n\n<pre><code>class GenericClass&lt;T : Comparator&lt;T&gt;&gt; \n  protected constructor(size : Int, arrayFactory: (Int) -&gt; Array&lt;T?&gt;) {\n    companion object {\n        inline fun &lt;reified T : Comparator&lt;T&gt;&gt; invoke(size : Int)\n            = GenericClass(size, { size -&gt; arrayOfNulls&lt;T&gt;(size) })\n    }\n    val array = arrayFactory(size)\n}\n</code></pre>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/array-of-nulls.html\" rel=\"nofollow\"><code>arrayOfNulls</code></a> as the name suggest creates array of given <code>size</code> filled with <code>null</code>s. Hence if you wish to use it the <code>arrayFactory</code> needs to accept it. </p>\n"}], "owner": {"reputation": 5455, "user_id": 555493, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f71360d1b97bf28012fffa173ec0eb0?s=128&d=identicon&r=PG", "display_name": "U Avalos", "link": "https://stackoverflow.com/users/555493/u-avalos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 1, "accepted_answer_id": 38299583, "answer_count": 1, "score": 4, "last_activity_date": 1468214182, "creation_date": 1468213397, "last_edit_date": 1495540114, "question_id": 38299468, "link": "https://stackoverflow.com/questions/38299468/create-a-generic-class-with-an-array-of-type-comparablet-in-kotlin", "title": "Create a generic class with an array of type Comparable&lt;T&gt; in kotlin?", "body": "<p>Inspired by <a href=\"https://stackoverflow.com/questions/28548647/create-generic-2d-array-in-kotlin\">Create generic 2D array in Kotlin</a>, I have the following code that creates a generic class with an array of type T. However, once I add an upper bound, I get a compile error. Is there a way to do this?</p>\n\n<pre><code>//This code compiles:\nclass GenericClass&lt;T&gt; protected constructor(size : Int, arrayFactory: (Int) -&gt; Array&lt;T&gt;) {\n  companion object {\n    inline fun &lt;reified T&gt; invoke(size : Int)\n       = GenericClass(size, { size -&gt; arrayOfNulls&lt;T&gt;(size) })\n  }\n  val array = arrayFactory(size)\n}\n\n//Compile errors:\nclass GenericClass&lt;T : Comparator&lt;T&gt;&gt; protected constructor(size : Int, arrayFactory: (Int) -&gt; Array&lt;T&gt;) {\n  companion object {\n    inline fun &lt;reified T : Comparator&lt;T&gt;&gt; invoke(size : Int)\n       = GenericClass(size, { size -&gt; arrayOfNulls&lt;T&gt;(size) })\n  }\n  val array = arrayFactory(max)\n}\n</code></pre>\n\n<p>The compile errors are: </p>\n\n<ul>\n<li>Type parameter bound for T in constructor GenericClass>(size: Int, arrayFactory: (Int) -> Array) is not satisfied: inferred type T? is not a subtype of Comparator</li>\n</ul>\n"}, {"tags": ["dependency-injection", "kotlin", "dagger"], "answers": [{"comments": [{"owner": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "edited": false, "score": 0, "creation_date": 1468173627, "post_id": 38294816, "comment_id": 64006768, "body": "Thanks.  I could not understand what was going on. data is protected and muttable."}, {"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "reply_to_user": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "edited": false, "score": 0, "creation_date": 1468175552, "post_id": 38294816, "comment_id": 64007318, "body": "@StasShakirov the snippet you attached is decompiled from after you applied <code>lateinit</code>, correct? If you do the same to the code before <code>lateinit</code>, you should see this line instead <code>private Example.IData data;</code>. And since dagger doesn&#39;t use setters to populate <code>@Inject</code> fields, but rather tries to access the field directly, it throws the error in the original case. This visibility change is a side effect of <code>lateinit</code> (in addition to its main meaning in Kotlin) because this modifier was originally created for dependency injection support."}, {"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "reply_to_user": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "edited": false, "score": 0, "creation_date": 1468175607, "post_id": 38294816, "comment_id": 64007335, "body": "I was a little late to answer your comment :) Hopefully, it makes sense now."}, {"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1468191895, "post_id": 38294816, "comment_id": 64011339, "body": "Ha, interesting! I never knew that <code>lateinit</code> exposes the backing field. I would&#39;ve just moved <code>@Inject</code> to the setter of the property."}], "tags": [], "owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "is_accepted": true, "score": 7, "last_activity_date": 1468173000, "creation_date": 1468173000, "answer_id": 38294816, "question_id": 38294312, "link": "https://stackoverflow.com/questions/38294312/dagger-inject-interface-into-private-fields/38294816#38294816", "title": "Dagger inject interface into private fields", "body": "<p>From the error message, I think the problem is with this line:</p>\n\n<pre><code>@Inject var data: IData ? = null\n</code></pre>\n\n<p>The backing field for this property is <code>private</code>, and this is what the error says. Usually the <code>lateinit</code> keyword is used for such cases:</p>\n\n<pre><code>@Inject lateinit var data: IData\n</code></pre>\n\n<p><code>lateinit</code> is one of several modifiers that expose the backing field directly with the property's access level (<code>public</code> here), making it visible to Dagger-generated classes.</p>\n"}], "owner": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1445, "favorite_count": 0, "accepted_answer_id": 38294816, "answer_count": 1, "score": 3, "last_activity_date": 1588329960, "creation_date": 1468169807, "last_edit_date": 1588329960, "question_id": 38294312, "link": "https://stackoverflow.com/questions/38294312/dagger-inject-interface-into-private-fields", "title": "Dagger inject interface into private fields", "body": "<p>I want inject interface implementation in abstract class constructor and use it in child class.</p>\n\n<p>I have compile time errors:</p>\n\n<pre><code>Error:Gradle: Dagger does not support injection into private fields\nError:Gradle: Example.A cannot be provided without an @Provides-annotated method.\nError:Gradle: Example.B cannot be provided without an @Inject constructor or from an @Provides-annotated method.\nError:Gradle: Execution failed for task ':app:compileDemoDebugJavaWithJavac'.\n&gt; Compilation failed; see the compiler error output for details.\n</code></pre>\n\n<p>Example in kotlin.</p>\n\n<pre><code>   object Example {\n    interface IData {\n\n        fun foo() {\n        }\n    }\n\n    class Data : IData {\n\n    }\n\n    @Module\n    class DataModel {\n        @Provides\n        fun data(): IData = Data()\n    }\n\n    @Singleton\n    @Component(modules =\n    arrayOf(DataModel::class)\n    )\n    interface Injector {\n        fun inject(a: A)\n        fun inject(b: B)\n    }\n\n    val graph: Injector = DaggerInjector.builder().\n            dataModel(DataModel()).\n            build()\n\n    abstract class A {\n\n        @Inject var data: IData ? = null\n\n        public open fun setUp() {\n            graph.inject(this)\n        }\n    }\n\n    open class B : A() {\n\n        override fun setUp() {\n            super.setUp()\n            data!!.foo()\n        }\n    }\n\n    fun bar() {\n        val a = B()\n        a.setUp()\n    }\n}\n</code></pre>\n\n<p>versions:</p>\n\n<ul>\n<li>com.android.tools.build:gradle:2.1.2 </li>\n<li>ext.kotlin_version = '1.0.3'</li>\n<li>compile 'com.google.dagger:dagger:2.4' </li>\n<li>provided 'org.glassfish:javax.annotation:10.0-b28' </li>\n<li>kapt 'com.google.dagger:dagger-compiler:2.4'</li>\n</ul>\n\n<hr>\n\n<p>Here is case. Decompiled java</p>\n\n<pre><code>  public static class A {\n  @Inject\n  @Nullable\n  private Example.IData data;\n\n  @Nullable\n  protected final Example.IData getData() {\n     return this.data;\n  }\n\n  protected final void setData(@Nullable Example.IData &lt;set-?&gt;) {\n     this.data = &lt;set-?&gt;;\n  }\n\n  public void setUp() {\n     Example.INSTANCE.getGraph().inject(this);\n  }\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["android", "firebase-realtime-database", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 190, "user_id": 5072741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BE7zT.jpg?s=128&g=1", "display_name": "papageorgiouk", "link": "https://stackoverflow.com/users/5072741/papageorgiouk"}, "edited": false, "score": 6, "creation_date": 1487281148, "post_id": 38287834, "comment_id": 71726980, "body": "<code>val</code> is immutable. The deserializer won&#39;t be able to set the actual values, and you&#39;ll end up having a bunch of objects with the same (default) values."}], "tags": [], "owner": {"reputation": 14934, "user_id": 162410, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/97a472a751e503a7f8e5d88ba087a87c?s=128&d=identicon&r=PG", "display_name": "Cedric Beust", "link": "https://stackoverflow.com/users/162410/cedric-beust"}, "is_accepted": true, "score": 27, "last_activity_date": 1468114509, "creation_date": 1468114509, "answer_id": 38287834, "question_id": 38287811, "link": "https://stackoverflow.com/questions/38287811/empty-constructor-for-kotlin-object-to-use-firebase/38287834#38287834", "title": "Empty constructor for kotlin object to use Firebase", "body": "<p>Use default arguments:</p>\n\n<pre><code>class Video(var id: String = \"\", var url: String = \"\",\n    var owner: User = User(\"\", \"\", \"\"))\n</code></pre>\n\n<p>(also, consider using <code>val</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "edited": false, "score": 0, "creation_date": 1468155354, "post_id": 38288569, "comment_id": 64001387, "body": "but that dont create some inconsistency with nullable types and things become weird designed just bc of this requirement?"}, {"owner": {"reputation": 2867, "user_id": 1737244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e65da6a653107a0959472b01f5bcf661?s=128&d=identicon&r=PG", "display_name": "PaulNunezM", "link": "https://stackoverflow.com/users/1737244/paulnunezm"}, "reply_to_user": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "edited": false, "score": 0, "creation_date": 1468566257, "post_id": 38288569, "comment_id": 64188513, "body": "I&#39;m not sure about it,  you&#39;ll have to test. That requirement is said in the Firebase Documentation."}], "tags": [], "owner": {"reputation": 2867, "user_id": 1737244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e65da6a653107a0959472b01f5bcf661?s=128&d=identicon&r=PG", "display_name": "PaulNunezM", "link": "https://stackoverflow.com/users/1737244/paulnunezm"}, "is_accepted": false, "score": 0, "last_activity_date": 1468124660, "creation_date": 1468124660, "answer_id": 38288569, "question_id": 38287811, "link": "https://stackoverflow.com/questions/38287811/empty-constructor-for-kotlin-object-to-use-firebase/38288569#38288569", "title": "Empty constructor for kotlin object to use Firebase", "body": "<p>You need to add an empty constructor to the Video class. This is required to be able to use classes with Firebase.</p>\n"}, {"tags": [], "owner": {"reputation": 807, "user_id": 5449688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba8f158fc222ccb7a0fca0981059c3f?s=128&d=identicon&r=PG", "display_name": "shoheikawano", "link": "https://stackoverflow.com/users/5449688/shoheikawano"}, "is_accepted": false, "score": 5, "last_activity_date": 1506757736, "creation_date": 1506757736, "answer_id": 46500713, "question_id": 38287811, "link": "https://stackoverflow.com/questions/38287811/empty-constructor-for-kotlin-object-to-use-firebase/46500713#46500713", "title": "Empty constructor for kotlin object to use Firebase", "body": "<p>I have not tested if it works with Firebase, but according to the <a href=\"https://kotlinlang.org/docs/reference/classes.html#secondary-constructors\" rel=\"noreferrer\">kotlin documentation</a>, </p>\n\n<blockquote>\n  <p>NOTE: On the JVM, if all of the parameters of the primary constructor have default values, the compiler will generate an additional parameterless constructor which will use the default values. This makes it easier to use Kotlin with libraries such as Jackson or JPA that create class instances through parameterless constructors.</p>\n</blockquote>\n\n<p>So I suppose, by applying default values for all the constructor parameters will generate the parameterless constructor for you.</p>\n"}], "owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5372, "favorite_count": 0, "accepted_answer_id": 38287834, "answer_count": 3, "score": 8, "last_activity_date": 1506757736, "creation_date": 1468114228, "question_id": 38287811, "link": "https://stackoverflow.com/questions/38287811/empty-constructor-for-kotlin-object-to-use-firebase", "title": "Empty constructor for kotlin object to use Firebase", "body": "<p>I'm trying to save an object inside Firebase database from Kotlin,\nI dont feel right providing a default empty constructor and put values as <code>nullable</code>, having to change all my code bc of this.</p>\n\n<p>My class:</p>\n\n<pre><code>class Video(var id: String, var url: String, var owner: User) :  {\n    constructor() : this(\"\", \"\", User(\"\", \"\", \"\"))\n}\n</code></pre>\n\n<p>Firebase push:</p>\n\n<pre><code>FirebaseDatabase.getInstance().reference.child(\"public\").push().setValue(video)\n</code></pre>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>is missing a constructor with no arguments</p>\n</blockquote>\n\n<p>Is there a better solution for this? </p>\n"}, {"tags": ["android", "animation", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2354, "user_id": 1081896, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/73fd9757bddc793c9d95228c62b50aaa?s=128&d=identicon&r=PG", "display_name": "Gorets", "link": "https://stackoverflow.com/users/1081896/gorets"}, "is_accepted": true, "score": 0, "last_activity_date": 1468109321, "creation_date": 1468109321, "answer_id": 38287418, "question_id": 38286784, "link": "https://stackoverflow.com/questions/38286784/circular-animation-doesnt-play/38287418#38287418", "title": "Circular animation doesn&#39;t play", "body": "<p>so, answer is pretty simple. i had <code>false</code> insted of</p>\n\n<p>android:hardwareAccelerated=\"true\"</p>\n"}], "owner": {"reputation": 2354, "user_id": 1081896, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/73fd9757bddc793c9d95228c62b50aaa?s=128&d=identicon&r=PG", "display_name": "Gorets", "link": "https://stackoverflow.com/users/1081896/gorets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 38287418, "answer_count": 1, "score": 0, "last_activity_date": 1468109321, "creation_date": 1468102314, "last_edit_date": 1468103403, "question_id": 38286784, "link": "https://stackoverflow.com/questions/38286784/circular-animation-doesnt-play", "title": "Circular animation doesn&#39;t play", "body": "<p>I'm trying to run Circular reveal animation on my view. I've some experience with this on the other project, but now I can't launch this code.</p>\n\n<pre><code>private fun openRevealView() {\n\n    val animatedView = activity.findViewById(R.id.a_view);\n    animatedView.visibility = View.VISIBLE\n\n    var cx = (animatedView.getLeft() + animatedView.getRight()) / 2;\n    var cy = (animatedView.getTop() + animatedView.getBottom()) / 2;\n\n    val finalRadius = Math.max(animatedView.height, animatedView.width)\n    val anim = ViewAnimationUtils\n            .createCircularReveal(animatedView, cx, cy,\n                    0.toFloat(),\n                    finalRadius.toFloat())\n\n    Ln.i(\"Reveal animation params [\"\n            + animatedView.height\n            + \" \" + animatedView.width\n            + \", 0, \" + finalRadius + \"]\")\n    anim.start()\n}\n</code></pre>\n\n<p>Layout is:</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"&gt;\n\n        &lt;FrameLayout\n            android:id=\"@android:id/tabcontent\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dip\"\n            android:layout_weight=\"1\" /&gt;\n\n        &lt;android.support.v4.app.FragmentTabHost\n            android:id=\"@android:id/tabhost\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\" /&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;View\n        android:id=\"@+id/a_view\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:background=\"@color/app.red\"\n        android:visibility=\"invisible\" /&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>Log is:</p>\n\n<blockquote>\n  <p>Reveal animation params [153 114, 0, 1134]</p>\n</blockquote>\n\n<p>and everything looks good, but there is no animation, just simple Visible/Invisible actions. \nAlso I tried to add listener, so it worked well too.\nI've my other project with code like that and it works like sharm on the same phone.</p>\n\n<p>My android config is</p>\n\n<blockquote>\n  <p>compileSdkVersion 23 \n  buildToolsVersion \"23.0.1\"</p>\n</blockquote>\n\n<p>Thanks for any help.</p>\n\n<p>*It's Kotlin code. but it's not a problem, I couldn't start animation from any place of my project.</p>\n"}, {"tags": ["while-loop", "kotlin", "variable-initialization"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1467925807, "post_id": 38255195, "comment_id": 63931754, "body": "Does <code>Assertions.checkEnoughVertices</code> have a parameter named <code>verticesCount</code>?"}, {"owner": {"reputation": 292, "user_id": 3945245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SuHiF.png?s=128&g=1", "display_name": "Andrei K.", "link": "https://stackoverflow.com/users/3945245/andrei-k"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1467970512, "post_id": 38255195, "comment_id": 63946449, "body": "@marstran yes, it is the only parameter of this method"}], "answers": [{"comments": [{"owner": {"reputation": 292, "user_id": 3945245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SuHiF.png?s=128&g=1", "display_name": "Andrei K.", "link": "https://stackoverflow.com/users/3945245/andrei-k"}, "edited": false, "score": 0, "creation_date": 1467971060, "post_id": 38255610, "comment_id": 63946778, "body": "It&#39;s a quite complete and straightforward answer with a proposed solution. The described case is clear for me now."}, {"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1468101117, "post_id": 38255610, "comment_id": 63991653, "body": "How about a &quot;do while&quot; instead of an infinite loop that you then need to break out of?"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 4, "last_activity_date": 1467927018, "creation_date": 1467927018, "answer_id": 38255610, "question_id": 38255195, "link": "https://stackoverflow.com/questions/38255195/is-it-possible-to-init-a-variable-in-the-while-condition-body-for-kotlin/38255610#38255610", "title": "Is it possible to init a variable in the while condition body for Kotlin?", "body": "<p>The syntax you've used denotes a function call with <a href=\"https://kotlinlang.org/docs/reference/functions.html#named-arguments\" rel=\"nofollow\"><em>named arguments</em></a>, not the assignment of a local variable. So <code>verticesCount =</code> is just an explanation to the reader that the value which is being passed here to <code>checkEnoughVertices</code> corresponds to the parameter of that function named <code>verticesCount</code>. It has nothing to do with the local variable named <code>verticesCount</code> declared just above, so the compiler thinks you've still to initialize that variable.</p>\n\n<p>In Kotlin, the assignment to a variable (<code>a = b</code>) is <em>not</em> an expression, so it cannot be used as a value in other expressions. You have to split the assignment and the while-loop condition to achieve what you want. I'd do this with an infinite loop + a condition inside:</p>\n\n<pre><code>var verticesCount: Int\n\nwhile (true) {\n    verticesCount = consoleReader.readInt(...)\n    if (Assertions.checkEnoughVertices(verticesCount)) break\n\n    ...\n}\n\nval resultGraph = Graph(verticesCount)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 407, "user_id": 360293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/005411dbd57d31a08d785f01f34ca70f?s=128&d=identicon&r=PG", "display_name": "Alwyn Schoeman", "link": "https://stackoverflow.com/users/360293/alwyn-schoeman"}, "edited": false, "score": 0, "creation_date": 1612395660, "post_id": 53676476, "comment_id": 116757362, "body": "Thank you @zordid, really useful!"}], "tags": [], "owner": {"reputation": 10239, "user_id": 273456, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/elCxp.jpg?s=128&g=1", "display_name": "Zordid", "link": "https://stackoverflow.com/users/273456/zordid"}, "is_accepted": false, "score": 2, "last_activity_date": 1544214770, "creation_date": 1544214770, "answer_id": 53676476, "question_id": 38255195, "link": "https://stackoverflow.com/questions/38255195/is-it-possible-to-init-a-variable-in-the-while-condition-body-for-kotlin/53676476#53676476", "title": "Is it possible to init a variable in the while condition body for Kotlin?", "body": "<p>Well, technically it is possible to assign values to variables in the while condition - and anything else you might want to do there, too.\nThe magic comes from the <code>also</code> function:</p>\n\n<p>Try this: (excuse the completely useless thing this is doing...)</p>\n\n<pre><code>var i = 10\nvar doubleI: Int\nwhile ((i * 2).also { doubleI = it } &gt; 0) {\n    i--\n    println(doubleI)\n}\n</code></pre>\n\n<p>Any expression can be \"extended\" with \"something to do\" by calling <code>also</code> which takes the expression it is called upon as the <code>it</code> parameter and executes the given block. The value <code>also</code> returns is identical to its caller value.</p>\n\n<p>Here's a very good article to explain this and much more: <a href=\"https://medium.com/@elye.project/mastering-kotlin-standard-functions-run-with-let-also-and-apply-9cd334b0ef84\" rel=\"nofollow noreferrer\">https://medium.com/@elye.project/mastering-kotlin-standard-functions-run-with-let-also-and-apply-9cd334b0ef84</a></p>\n"}], "owner": {"reputation": 292, "user_id": 3945245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SuHiF.png?s=128&g=1", "display_name": "Andrei K.", "link": "https://stackoverflow.com/users/3945245/andrei-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1917, "favorite_count": 0, "accepted_answer_id": 38255610, "answer_count": 2, "score": 3, "last_activity_date": 1544214770, "creation_date": 1467925261, "question_id": 38255195, "link": "https://stackoverflow.com/questions/38255195/is-it-possible-to-init-a-variable-in-the-while-condition-body-for-kotlin", "title": "Is it possible to init a variable in the while condition body for Kotlin?", "body": "<p>In the code below:</p>\n\n<pre><code>    var verticesCount: Int // to read a vertices count for graph\n\n    // Reading until we get a valid vertices count.\n    while (!Assertions.checkEnoughVertices(\n            verticesCount = consoleReader.readInt(null, Localization.getLocStr(\"type_int_vertices_count\"))))\n        // The case when we don't have enough vertices.\n        println(String.format(Localization.getLocStr(\"no_enough_vertices_in_graph\"),\n                              Assertions.CONFIG_MIN_VERTICES_COUNT))\n\n    val resultGraph = Graph(verticesCount)\n</code></pre>\n\n<p>we are getting next error on the last line:</p>\n\n<pre><code>Error:(31, 33) Kotlin: Variable 'verticesCount' must be initialized\n</code></pre>\n\n<p><strong>Assertions.checkEnoughVertices</strong> accepts a safe type variable as an argument (verticesCount: Int), so it's impossible for verticesCount to be uninitialized or null here (and we're getting no corresponding errors on those lines). </p>\n\n<p>What's going on on the last line when already initialized variable becomes uninitialized again?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 10, "creation_date": 1467907131, "post_id": 38250022, "comment_id": 63921348, "body": "<a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/delegated-properties.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 83, "last_activity_date": 1580998936, "last_edit_date": 1580998936, "creation_date": 1467907399, "answer_id": 38250239, "question_id": 38250022, "link": "https://stackoverflow.com/questions/38250022/what-does-by-keyword-do-in-kotlin/38250239#38250239", "title": "What does &#39;by&#39; keyword do in Kotlin?", "body": "<p>In the <a href=\"https://kotlinlang.org/docs/reference\" rel=\"noreferrer\">Kotlin reference</a> you will find two uses for <code>by</code>, the first being <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"noreferrer\">Delegated Properties</a> which is the use you have above:</p>\n\n<blockquote>\n  <p>There are certain common kinds of properties, that, though we can implement them manually every time we need them, would be very nice to implement once and for all, and put into a library. Examples include lazy properties: the value gets computed only upon first access,\n  observable properties: listeners get notified about changes to this property,\n  storing properties in a map, not in separate field each.</p>\n</blockquote>\n\n<p>Here you delegate the getter/setter to another class that does the work and can contain common code.  As another example, some of the dependency injectors for Kotlin support this model by delegating the getter to receiving a value from a registry of instances managed by the dependency injection engine.</p>\n\n<p>And <a href=\"https://kotlinlang.org/docs/reference/delegation.html\" rel=\"noreferrer\">Interface/Class delegation</a> is the other use: </p>\n\n<blockquote>\n  <p>The Delegation pattern has proven to be a good alternative to implementation inheritance, and Kotlin supports it natively requiring zero boilerplate code. A class Derived can inherit from an interface Base and delegate all of its public methods to a specified object</p>\n</blockquote>\n\n<p>Here you can delegate an interface to another implementation so the implementing class only needs to override what it wants to change, while the rest of the methods delegate back to a fuller implementation.  </p>\n\n<p>A live example would be the <a href=\"https://github.com/kohesive/klutter/blob/master/core/src/main/kotlin/uy/klutter/core/collections/Immutable.kt\" rel=\"noreferrer\">Klutter Readonly/Immutable collections</a> where they really just delegate the specific collection interface to another class and then override anything that needs to be different in the readonly implementation.  Saving a lot of work not having to manually delegate all of the other methods.</p>\n\n<p><strong>Both of these are covered by the <a href=\"https://kotlinlang.org/docs/reference/\" rel=\"noreferrer\">Kotlin language reference</a></strong>, start there for base topics of the language.</p>\n"}, {"comments": [{"owner": {"reputation": 1943, "user_id": 1154390, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/432e442a9f1a89f13b008e8feb2100cb?s=128&d=identicon&r=PG", "display_name": "user1154390", "link": "https://stackoverflow.com/users/1154390/user1154390"}, "edited": false, "score": 0, "creation_date": 1616661759, "post_id": 57637851, "comment_id": 118074227, "body": "Your explanation is simple and to the point."}], "tags": [], "owner": {"reputation": 8515, "user_id": 1642126, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fcIzZ.jpg?s=128&g=1", "display_name": "daneejela", "link": "https://stackoverflow.com/users/1642126/daneejela"}, "is_accepted": false, "score": 109, "last_activity_date": 1595316307, "last_edit_date": 1595316307, "creation_date": 1566648899, "answer_id": 57637851, "question_id": 38250022, "link": "https://stackoverflow.com/questions/38250022/what-does-by-keyword-do-in-kotlin/57637851#57637851", "title": "What does &#39;by&#39; keyword do in Kotlin?", "body": "<p>In simple words, you can understand <code>by</code> keyword as <strong><em>provided by</em></strong>.</p>\n<p>From the perspective of property consumer, <code>val</code> is something that has getter (get) and <code>var</code> is something that has getter and setter (get, set). For each <code>var</code> property there is a default provider of get and set methods that we don't need to specify explicitly.</p>\n<p>But, when using <code>by</code> keyword, you are stating that this getter/getter&amp;setter is provided elsewhere (i.e. it's been delegated). It's <em>provided <strong>by</strong></em> the function that comes after <code>by</code>.</p>\n<p>So, instead of using this built-in get and set methods, you are delegating that job to some explicit function.</p>\n<p>One very common example is the <code>by lazy</code> for lazy loading properties.\nAlso, if you are using dependency injection library like Koin, you'll see many properties defined like this:</p>\n<pre><code>var myRepository: MyRepository by inject()  //inject is a function from Koin\n</code></pre>\n<p>In the class definition, it follows the same principle, it defines where some function is provided, but it can refer to any set of methods/properties, not just get and set.</p>\n<pre><code>class MyClass: SomeInterface by SomeImplementation, SomeOtherInterface\n</code></pre>\n<p>This code is saying:\n'I am class MyClass and I offer functions of interface SomeInterface which are provided by SomeImplementation.\nI'll implement SomeOtherInterface by myself (that's implicit, so no <code>by</code> there).'</p>\n"}, {"tags": [], "owner": {"reputation": 1342, "user_id": 12787936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lLB6q.jpg?s=128&g=1", "display_name": "alexrnov", "link": "https://stackoverflow.com/users/12787936/alexrnov"}, "is_accepted": false, "score": 11, "last_activity_date": 1612179056, "last_edit_date": 1612179056, "creation_date": 1585373941, "answer_id": 60897669, "question_id": 38250022, "link": "https://stackoverflow.com/questions/38250022/what-does-by-keyword-do-in-kotlin/60897669#60897669", "title": "What does &#39;by&#39; keyword do in Kotlin?", "body": "<p><strong>Delegation for property:</strong></p>\n<pre><code>import kotlin.reflect.KProperty\n\nclass Delegate {\n    // for get() method, ref - a reference to the object from \n    // which property is read. prop - property\n    operator fun getValue(ref: Any?, prop: KProperty&lt;*&gt;) = &quot;textA&quot;\n    // for set() method, 'v' stores the assigned value\n    operator fun setValue(ref: Any?, prop: KProperty&lt;*&gt;, v: String) {\n        println(&quot;value = $v&quot;)\n    }\n}\n\nobject SampleBy {\n    var s: String by Delegate() // delegation for property\n    @JvmStatic fun main(args: Array&lt;String&gt;) {\n        println(s)\n        s = &quot;textB&quot;\n    }\n}\n</code></pre>\n<p>Result:</p>\n<pre><code>textA\nvalue = textB\n</code></pre>\n<p><strong>Delegation for class:</strong></p>\n<pre><code>interface BaseInterface {\n    val value: String\n    fun f()\n}\n\nclass ClassA: BaseInterface {\n    override val value = &quot;property from ClassA&quot;\n    override fun f() { println(&quot;fun from ClassA&quot;) }\n}\n\n// The ClassB can implement the BaseInterface by delegating all public \n// members from the ClassA.\nclass ClassB(classA: BaseInterface): BaseInterface by classA {}\n\nobject SampleBy {\n    @JvmStatic fun main(args: Array&lt;String&gt;) {\n        val classB = ClassB(ClassA())\n        println(classB.value)\n        classB.f()\n    }\n}\n</code></pre>\n<p>Result:</p>\n<pre><code>property from ClassA\nfun from ClassA\n</code></pre>\n<p><strong>Delegation for parameters:</strong></p>\n<pre><code>// for val properties Map is used; for var MutableMap is used\nclass User(mapA: Map&lt;String, Any?&gt;, mapB: MutableMap&lt;String, Any?&gt;) {\n    val name: String by mapA\n    val age: Int by mapA\n    var address: String by mapB\n    var id: Long by mapB\n}\n\nobject SampleBy {\n    @JvmStatic fun main(args: Array&lt;String&gt;) {\n        val user = User(mapOf(&quot;name&quot; to &quot;John&quot;, &quot;age&quot; to 30),\n            mutableMapOf(&quot;address&quot; to &quot;city, street&quot;, &quot;id&quot; to 5000L))\n\n        println(&quot;name: ${user.name}; age: ${user.age}; &quot; +\n            &quot;address: ${user.address}; id: ${user.id}&quot;)\n    }\n}\n</code></pre>\n<p>Result:</p>\n<pre><code>name: John; age: 30; address: city, street; id: 5000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2980, "user_id": 1308990, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d5ce5e9d1fb73ae65f57e617269afa9c?s=128&d=identicon&r=PG", "display_name": "oiyio", "link": "https://stackoverflow.com/users/1308990/oiyio"}, "is_accepted": false, "score": 28, "last_activity_date": 1587055147, "creation_date": 1587055147, "answer_id": 61255411, "question_id": 38250022, "link": "https://stackoverflow.com/questions/38250022/what-does-by-keyword-do-in-kotlin/61255411#61255411", "title": "What does &#39;by&#39; keyword do in Kotlin?", "body": "<p><a href=\"https://i.stack.imgur.com/iI6hs.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/iI6hs.png\" alt=\"enter image description here\"></a></p>\n\n<p>The syntax is: </p>\n\n<pre><code>val/var &lt;property name&gt;: &lt;Type&gt; by &lt;expression&gt;. \n</code></pre>\n\n<p>The expression after by is the delegate</p>\n\n<p>if we try to access the value of property <strong>p</strong>, in other words, if we call <strong>get()</strong> method of property <strong>p</strong>, the <strong>getValue()</strong> method of <strong>Delegate</strong> instance is invoked.</p>\n\n<p>If we try to set the value of property <strong>p</strong>, in other words, if we call <strong>set()</strong> method of property <strong>p</strong>, the <strong>setValue()</strong> method of <strong>Delegate</strong> instance is invoked.</p>\n"}], "owner": {"reputation": 3288, "user_id": 5781737, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/86ad144d764093a50390bb9c6fe95b86?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5781737/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22323, "favorite_count": 19, "accepted_answer_id": 38250239, "answer_count": 4, "score": 103, "last_activity_date": 1612179056, "creation_date": 1467906764, "last_edit_date": 1554381656, "question_id": 38250022, "link": "https://stackoverflow.com/questions/38250022/what-does-by-keyword-do-in-kotlin", "title": "What does &#39;by&#39; keyword do in Kotlin?", "body": "<p>While developing for android I sometimes come across something that looks like this:</p>\n\n<pre><code>var someModel: someViewModel by notNullAndObservable { vm -&gt;\n  ...\n}\n</code></pre>\n\n<p>I don't understand what the significance of the <code>by</code> keyword is.</p>\n"}, {"tags": ["android", "kotlin", "extension-function"], "answers": [{"comments": [{"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "edited": false, "score": 1, "creation_date": 1467905971, "post_id": 38249659, "comment_id": 63920653, "body": "yes you right it is weird. This is not a real scenario, was just messing around with stuff. Thanks"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 5, "last_activity_date": 1467906088, "last_edit_date": 1467906088, "creation_date": 1467905747, "answer_id": 38249659, "question_id": 38249368, "link": "https://stackoverflow.com/questions/38249368/kotlin-extension-function/38249659#38249659", "title": "Kotlin Extension Function", "body": "<p>It seems a bit odd for a \"getter\" to modify state but you can use an <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extension-properties\" rel=\"nofollow\">extension property</a>:</p>\n\n<pre><code>val View.VISIBLE: Unit\n    get() {\n        visibility = View.VISIBLE\n    }\n</code></pre>\n\n<p>And you could also make it return the new visibility value or return itself so that you can potentially chain calls.</p>\n\n<pre><code>val View.VISIBLE: Int\n    get() {\n        visibility = View.VISIBLE\n        return visibility\n    }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>val View.VISIBLE: View\n    get() = apply { visibility = View.VISIBLE }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 2, "last_activity_date": 1467906444, "last_edit_date": 1467906444, "creation_date": 1467905885, "answer_id": 38249702, "question_id": 38249368, "link": "https://stackoverflow.com/questions/38249368/kotlin-extension-function/38249702#38249702", "title": "Kotlin Extension Function", "body": "<p>Yes, you can write an <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extension-properties\" rel=\"nofollow\">extension property</a> property with a getter like this: </p>\n\n<pre><code>val View.visible: View\n    get() = apply { visibility = View.VISIBLE }\n</code></pre>\n\n<p>With the usage:</p>\n\n<pre><code> myView.visible\n</code></pre>\n\n<p>However, keep in mind that properties with side effects in getters are generally discouraged (see also: <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#functions-vs-properties\" rel=\"nofollow\">Functions vs Properties</a>), and this behavior is rather confusing for a property.</p>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 38249659, "answer_count": 2, "score": 2, "last_activity_date": 1467906444, "creation_date": 1467904956, "question_id": 38249368, "link": "https://stackoverflow.com/questions/38249368/kotlin-extension-function", "title": "Kotlin Extension Function", "body": "<p>Considering this:</p>\n\n<pre><code>MyView.setVisibility(View.VISIBLE)\n</code></pre>\n\n<p>can be simplified to this:</p>\n\n<pre><code>inline fun View.setVisible() = apply { visibility = View.VISIBLE }\n\nMyView.setVisible()\n</code></pre>\n\n<p>Or this if you prefer:</p>\n\n<pre><code>inline infix fun View.vis(vis: Int) = apply { visibility = vis }\nMyView vis View.VISIBLE\n</code></pre>\n\n<p>Is there anyway of accomplish the same by doing this:</p>\n\n<pre><code>MyView.VISIBLE\n</code></pre>\n"}, {"tags": ["java", "kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 11092, "user_id": 982149, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LdDoZ.png?s=128&g=1", "display_name": "Fildor", "link": "https://stackoverflow.com/users/982149/fildor"}, "edited": false, "score": 2, "creation_date": 1467887417, "post_id": 38243085, "comment_id": 63907297, "body": "Just curious: Why would you want to do that? A write-only field?"}, {"owner": {"reputation": 1930, "user_id": 2352924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84e89eb0c5939967d83457244610074d?s=128&d=identicon&r=PG&f=1", "display_name": "Louis F.", "link": "https://stackoverflow.com/users/2352924/louis-f"}, "edited": false, "score": 0, "creation_date": 1467887582, "post_id": 38243085, "comment_id": 63907408, "body": "private get means using the property directly in the class, isn&#39;t it ?"}, {"owner": {"reputation": 64215, "user_id": 11238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BGDex.png?s=128&g=1", "display_name": "Randy Sugianto &#39;Yuku&#39;", "link": "https://stackoverflow.com/users/11238/randy-sugianto-yuku"}, "edited": false, "score": 0, "creation_date": 1467888197, "post_id": 38243085, "comment_id": 63907775, "body": "Yes. A write-only field. It is read from inside the class only."}, {"owner": {"reputation": 6342, "user_id": 26331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zJfV7.jpg?s=128&g=1", "display_name": "aaaidan", "link": "https://stackoverflow.com/users/26331/aaaidan"}, "edited": false, "score": 0, "creation_date": 1524445358, "post_id": 38243085, "comment_id": 86960177, "body": "This is a good question. I am curious though about the use case of a write-but-no-read field? I can&#39;t think of a reason you would <i>need</i> it not to be readable. Can you share your use case?"}, {"owner": {"reputation": 27486, "user_id": 1129332, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1", "display_name": "Ilya Gazman", "link": "https://stackoverflow.com/users/1129332/ilya-gazman"}, "reply_to_user": {"reputation": 6342, "user_id": 26331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zJfV7.jpg?s=128&g=1", "display_name": "aaaidan", "link": "https://stackoverflow.com/users/26331/aaaidan"}, "edited": false, "score": 0, "creation_date": 1616947962, "post_id": 38243085, "comment_id": 118156245, "body": "@aaaidan This would be a typical use case for a builder and command design patterns."}], "answers": [{"comments": [{"owner": {"reputation": 778, "user_id": 3357975, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/bfb85ee11ea2d3bba5a92135089db826?s=128&d=identicon&r=PG&f=1", "display_name": "IHC_Applroid", "link": "https://stackoverflow.com/users/3357975/ihc-applroid"}, "edited": false, "score": 2, "creation_date": 1502482751, "post_id": 38243739, "comment_id": 78245793, "body": "Just as a add-on if you plan to have Java use the code, the internal keyword eventually become public in Java world"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 26, "last_activity_date": 1467889415, "last_edit_date": 1467889415, "creation_date": 1467889038, "answer_id": 38243739, "question_id": 38243085, "link": "https://stackoverflow.com/questions/38243085/private-getter-and-public-setter-for-a-kotlin-property/38243739#38243739", "title": "Private getter and public setter for a Kotlin property", "body": "<p>In current Kotlin version (1.0.3) the only option is to have separate <em>setter</em> method like so:</p>\n\n<pre><code>class Test {\n    private var name: String = \"name\"\n\n    fun setName(name: String) {\n        this.name = name\n    }\n}\n</code></pre>\n\n<p>If you wish to restrict external libraries from accessing the getter you can use <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"noreferrer\"><code>internal</code></a> visibility modifier allowing you to still use property syntax within the library:</p>\n\n<pre><code>class Test {\n    internal var name: String = \"name\"\n    fun setName(name: String) { this.name = name }\n}\n\nfun usage(){\n    val t = Test()\n    t.name = \"New\"\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 0, "creation_date": 1600785109, "post_id": 38269180, "comment_id": 113193750, "body": "saying that _ in Kotlin to have a property with a setter that is more visible than the property_ is the same as saying that <i>the getter cannot have more visibility than the getter</i>?"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 44, "last_activity_date": 1467988201, "creation_date": 1467988201, "answer_id": 38269180, "question_id": 38243085, "link": "https://stackoverflow.com/questions/38243085/private-getter-and-public-setter-for-a-kotlin-property/38269180#38269180", "title": "Private getter and public setter for a Kotlin property", "body": "<p>It's impossible at the moment in Kotlin to have a property with a setter that is more visible than the property. There's a language design issue in the issue tracker on this, feel free to watch/vote for it or share your use cases: <a href=\"https://youtrack.jetbrains.com/issue/KT-3110\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-3110</a></p>\n"}, {"comments": [{"owner": {"reputation": 7660, "user_id": 168719, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/QWRhg.jpg?s=128&g=1", "display_name": "Konrad Morawski", "link": "https://stackoverflow.com/users/168719/konrad-morawski"}, "edited": false, "score": 0, "creation_date": 1554917345, "post_id": 54983086, "comment_id": 97929717, "body": "This is interesting and creative, but it feels wrong for being a hack. Fun to know you can do it, however I&#39;d recommend against introducing this trick to production code. Especially as it doesn&#39;t really beat a &quot;naive&quot; custom setter alternative in neither clarity nor conciseness."}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "reply_to_user": {"reputation": 7660, "user_id": 168719, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/QWRhg.jpg?s=128&g=1", "display_name": "Konrad Morawski", "link": "https://stackoverflow.com/users/168719/konrad-morawski"}, "edited": false, "score": 0, "creation_date": 1554925290, "post_id": 54983086, "comment_id": 97933388, "body": "I agree with clarity/conciseness at declaration site, as this is not a known approach. At call site however, the opposite could be true -- <code>getX&#47;setX</code> methods are more verbose and may raise the question &quot;why no property?&quot;, which is idiomatic in Kotlin. A nice but rather minor side effect: if Kotlin ever introduces write-only properties, the call site syntax would already be correct ;)"}], "tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": false, "score": 4, "last_activity_date": 1551701804, "creation_date": 1551701804, "answer_id": 54983086, "question_id": 38243085, "link": "https://stackoverflow.com/questions/38243085/private-getter-and-public-setter-for-a-kotlin-property/54983086#54983086", "title": "Private getter and public setter for a Kotlin property", "body": "<p>Write-only properties with compile-time errors <strong>can</strong> be achieved since Kotlin 1.0, using a workaround based on <code>@Deprecated</code>.</p>\n\n<h2>Implementation</h2>\n\n<p>Kotlin allows to mark functions deprecated with level <code>ERROR</code>, which leads to a compile-time error when called. Annotating the <code>get</code> accessor of a property as <em>error-deprecated</em>, combined with a backing field (so that private reads are still possible), achieves the desired behavior:</p>\n\n<pre><code>class WriteOnly {\n    private var backing: Int = 0\n\n    var property: Int\n        @Deprecated(\"Property can only be written.\", level = DeprecationLevel.ERROR)\n        get() = throw NotImplementedError()\n        set(value) { backing = value }\n\n    val exposed get() = backing // public API\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>val wo = WriteOnly()\nwo.property = 20         // write: OK\n\nval i: Int = wo.property // read: compile error\nval j: Int = wo.exposed  // read value through other property\n</code></pre>\n\n<p>The compile error is quite helpful, too:</p>\n\n<blockquote>\n  <p>Using 'getter for property: Int' is an error. Property can only be written.</p>\n</blockquote>\n\n<hr>\n\n<h2>Use cases</h2>\n\n<ol>\n<li><p>The main use case are obviously APIs that allow properties to be written, but not read:</p>\n\n<pre><code>user.password = \"secret\"\nval pw = user.password // forbidden\n</code></pre></li>\n<li><p>Another scenario is a property which modifies the internal state, but is not stored itself as a field. (Could be done more elegantly using different design).</p>\n\n<pre><code>body.thrust_force = velocity\nbody.gravity_force = Vector(0, 0, 9.8)\n// only total force accessible, component vectors are lost\nval f = body.forces\n</code></pre></li>\n<li><p>This pattern is also useful for DSLs of the following kind:</p>\n\n<pre><code>server {\n    port = 80\n    host = \"www.example.com\"\n}\n</code></pre>\n\n<p>In such cases, values are simply used as one-time settings, and the write-only mechanism described here can prevent accidentally reading a property (which might not be initialized yet).</p></li>\n</ol>\n\n<hr>\n\n<h2>Limitations</h2>\n\n<p>Since this feature was not designed for this use case, it comes with certain limitations:</p>\n\n<ul>\n<li><p>If accessed using a property reference, the compile-time error turns into a runtime error:</p>\n\n<pre><code>val ref = wo::property\nval x = ref.get() // throws NotImplementedError\n</code></pre></li>\n<li><p>The same is true for reflection.</p></li>\n<li><p>This functionality cannot be outsourced into a delegate, because an <em>error-deprecated</em> <code>getValue()</code> method cannot be used with <code>by</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 64215, "user_id": 11238, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BGDex.png?s=128&g=1", "display_name": "Randy Sugianto &#39;Yuku&#39;", "link": "https://stackoverflow.com/users/11238/randy-sugianto-yuku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15755, "favorite_count": 7, "accepted_answer_id": 38269180, "answer_count": 3, "score": 61, "last_activity_date": 1618996666, "creation_date": 1467887021, "question_id": 38243085, "link": "https://stackoverflow.com/questions/38243085/private-getter-and-public-setter-for-a-kotlin-property", "title": "Private getter and public setter for a Kotlin property", "body": "<p>How to make a property in Kotlin that has a private getter (or just do not have it) but has a public setter?</p>\n\n<pre><code>var status\nprivate get\n</code></pre>\n\n<p>doesn't work with an error: <code>Getter visibility must be the same as property visibility</code></p>\n\n<p>In my case, the reason is for Java interop: I want my Java code to be able to call <code>setStatus</code> but not <code>getStatus</code>.</p>\n"}, {"tags": ["java", "android", "gradle", "kotlin", "dex"], "comments": [{"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1468101362, "post_id": 38242731, "comment_id": 63991703, "body": "Did I get this right: problem is not Kotlin specific, it actually happens for any dependency you try to add?"}, {"owner": {"reputation": 1646, "user_id": 3563511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yKT7.jpg?s=128&g=1", "display_name": "thealeksandr", "link": "https://stackoverflow.com/users/3563511/thealeksandr"}, "reply_to_user": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1468135075, "post_id": 38242731, "comment_id": 63997040, "body": "I don&#39;t know. It&#39;s not like I add any dependency and it stops work. It&#39;s happened twice when I tried to add smack with jingle and now with kotlin. But It seems its happened not just because of dependency but also depends from lib if it possible. Multidex is on. And this problem not exist for android 5.0 and higher."}], "owner": {"reputation": 1646, "user_id": 3563511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yKT7.jpg?s=128&g=1", "display_name": "thealeksandr", "link": "https://stackoverflow.com/users/3563511/thealeksandr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1467885908, "creation_date": 1467885908, "question_id": 38242731, "link": "https://stackoverflow.com/questions/38242731/dexfile-not-contain-generated-classes-after-add-kotlin-configuration-on-android", "title": "DexFile not contain generated classes after add Kotlin configuration on Android 4.4", "body": "<p>I have some custom annotations with annotation processing to generate some new classes in my applications. Then I use DexFile to find all this files. </p>\n\n<pre><code>final String apkName = context.getPackageManager()\n                    .getApplicationInfo(context.getPackageName(), 0).sourceDir;\nfinal DexFile dexFile = new DexFile(apkName);\nfinal PathClassLoader classLoader = new PathClassLoader(\n                    apkName, Thread.currentThread().getContextClassLoader()); \nfinal Enumeration&lt;String&gt; entries = dexFile.entries();\n</code></pre>\n\n<p>Classes are generated with VelocityEngine from templates and annotated classes. \nThe problem is when I configured Kotlin in my project my generated classes not in DexFile anymore if I app run in android 4.4. On Android 6.0 everything works fine.<br>\nSame situation happened to me when I tried to add some additional dependency to project.<br>\nI use Android Studio 2.1.2 and cradle plugin 2.1.2.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "edited": false, "score": 0, "creation_date": 1467895813, "post_id": 38238814, "comment_id": 63912930, "body": "I understood my mistake now, it is what you&#39;ve said, I completely ignored the parameter of the function The idea behind the code is that the higher-order function is in a different class than the update results and I want to keep it that way. Thanks for the clarification!"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "edited": false, "score": 1, "creation_date": 1467906396, "post_id": 38238814, "comment_id": 63920917, "body": "Welcome! It looks like your are doing pretty advanced stuff without reading the docs. I recommend you read the documentation on the site from start to the middle at least. It is fairly short."}, {"owner": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "edited": false, "score": 1, "creation_date": 1467910535, "post_id": 38238814, "comment_id": 63923375, "body": "You&#39;re right, I&#39;ve got too excited about the language and wanted to start using its features asap, but I&#39;ll read it again as you adviced. Thanks again!"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "edited": false, "score": 0, "creation_date": 1467916032, "post_id": 38238814, "comment_id": 63926550, "body": "Also take a look at Kotlin Koans. They are 42 short kotlin coding tests that make sure you have got everything correctly"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1467873093, "creation_date": 1467873093, "answer_id": 38238814, "question_id": 38236785, "link": "https://stackoverflow.com/questions/38236785/how-kotlin-higher-order-functions-work/38238814#38238814", "title": "How Kotlin Higher-Order Functions work?", "body": "<p>Frankly speaking, I am not entirely sure what your code was to achieve, but let me clarify what your snippet is doing at least:</p>\n\n<pre><code>private fun updateSearchResults(results : List&lt;Game&gt;?):\n         (foo: List&lt;Game&gt;?) -&gt; Unit = { parameter: List&lt;Game&gt;? -&gt;\n\n    if (null != results &amp;&amp; results.size &gt; 0) {\n        // code\n        Unit\n    } else {\n        // code\n        Unit\n    }\n}\n</code></pre>\n\n<p>Here you have a function <code>updateSearchResults</code> which accepts a parameter <code>results</code> and returns a function of type <code>(foo: List&lt;Game&gt;?) -&gt; Unit</code>. Note that I renamed some things to avoid name clashes and clarify what is what. The naming <code>foo</code> hast no effect what so ever, I am not sure why you are allowed to write it. The returning lambda has one parameter <code>parameter</code> of type <code>List&lt;Game&gt;?</code>, which you completely ignore in your code. Over all, the result of the <code>if</code> depends exclusively on the parameter of <code>updateSearchResults</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "edited": false, "score": 0, "creation_date": 1467895933, "post_id": 38238818, "comment_id": 63913010, "body": "Thank you very much, as user @voddan pointed out and you fix in the answer above, I wasn&#39;t using the parameter at all. In the end I followed your adivice and made the functions regular ones and specified the lambda in the call. Can you please clarify me what exactly the &quot;it&quot; passed as parameter means?:"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "edited": false, "score": 1, "creation_date": 1467903676, "post_id": 38238818, "comment_id": 63919003, "body": "@EdgarDaSilvaFernandes <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">One other helpful convention is that if a function literal has only one parameter, its declaration may be omitted (along with the -&gt;), and its name will be <code>it</code></a>"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 2, "last_activity_date": 1467873112, "creation_date": 1467873112, "answer_id": 38238818, "question_id": 38236785, "link": "https://stackoverflow.com/questions/38236785/how-kotlin-higher-order-functions-work/38238818#38238818", "title": "How Kotlin Higher-Order Functions work?", "body": "<p>I think the confusion comes from parameter names, <code>results</code> in particular. To resolve that you can change the <code>updateSearchResults</code> to i.e.:</p>\n\n<pre><code>private fun updateSearchResults() : (List&lt;Game&gt;?) -&gt; Unit = { results -&gt;\n    if (null != results &amp;&amp; results.size &gt; 0) {\n        mLastMatchingQuery = query_container.text.toString()\n        hideNoResultsFoundMessage()\n        mGames = results\n        mAdapter!!.dataSet = results.toMutableList()\n    } else {\n        showNoResultsFoundMessage()\n    }\n}\n</code></pre>\n\n<p>However I do feel that it would easier to follow the code if you'd apply following changes:</p>\n\n<ul>\n<li><p>make <code>updateSearchResults</code> regular method:</p>\n\n<pre><code>private fun updateSearchResults (results : List&lt;Game&gt;?) {\n    if (null != results &amp;&amp; results.size &gt; 0) {\n        mLastMatchingQuery = query_container.text.toString()\n        hideNoResultsFoundMessage()\n        mGames = results\n        mAdapter!!.dataSet = results.toMutableList()\n    } else {\n        showNoResultsFoundMessage()\n    }\n}\n</code></pre></li>\n<li><p>change the <code>addOnSearchGameResultListener</code> invocation and pass a lambda</p>\n\n<pre><code>mGameService.addOnSearchGameResultListener(\n        this,\n        releaseThread(),\n        showNoResultsFoundMessage(),\n        { updateSearchResults(it) }\n)\n</code></pre></li>\n<li><p>apply similar changes to <code>releaseThread</code>, <code>showNoResultsFoundMessage</code></p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 0, "last_activity_date": 1467873471, "creation_date": 1467873471, "answer_id": 38238922, "question_id": 38236785, "link": "https://stackoverflow.com/questions/38236785/how-kotlin-higher-order-functions-work/38238922#38238922", "title": "How Kotlin Higher-Order Functions work?", "body": "<blockquote>\n  <p>I passed null to the func when I declared it ('cause I need to pass something at compilation time), however, the call made from inside addOnSearchGameResultListener() is not made passing the parameter from runtime</p>\n</blockquote>\n\n<p>There is no passing at runtime or compile time. If you use the function only once like <code>updateSearchResults(null)</code>, the <code>if</code> is always false, and the whole thing is equivalent to <code>{ showNoResultsFoundMessage() }</code></p>\n"}, {"tags": [], "owner": {"reputation": 20567, "user_id": 2091181, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LHqzp.png?s=128&g=1", "display_name": "Jorge Casariego", "link": "https://stackoverflow.com/users/2091181/jorge-casariego"}, "is_accepted": false, "score": 1, "last_activity_date": 1502983140, "creation_date": 1502983140, "answer_id": 45739040, "question_id": 38236785, "link": "https://stackoverflow.com/questions/38236785/how-kotlin-higher-order-functions-work/45739040#45739040", "title": "How Kotlin Higher-Order Functions work?", "body": "<p>There is an <a href=\"https://android.jlelse.eu/keddit-part-7-infinite-scroll-higher-order-functions-lambdas-3a11fbd5090e#2fd0\" rel=\"nofollow noreferrer\">excellent article</a> created by Juan Ignacio Saravia that talk about <strong>Higher-Order Functions</strong></p>\n\n<p>I'll try to summarize here:</p>\n\n<blockquote>\n  <p>A higher-order function is a function that takes functions as\n  parameters, or returns a function.</p>\n</blockquote>\n\n<p><strong>Pass a function as parameter</strong></p>\n\n<pre><code>fun logExecution(func: () -&gt; Unit) {\n    Log.d(\"tag\", \"before executing func\")\n    func()\n    Log.d(\"tag\", \"after executing func\")\n}\n</code></pre>\n\n<p>This function \u201clogExecution\u201d allows you to pass a function as parameter and log before and after the execution of this function.</p>\n\n<p><strong>func: ()-> Unit</strong></p>\n\n<p>Here <strong>\u201cfunc\u201d</strong> is the name of the parameter and <strong>\u201c() -> Unit\u201d</strong> is the \u201ctype\u201d of the parameter, in this case, we are saying that func will be a function that doesn\u2019t receive any parameter and doesn\u2019t return any value (remember that Unit works like void in Java).</p>\n\n<p>You can call this function by passing a lambda expression that must not receive or return any value, like in this way:</p>\n\n<pre><code>logExecution( { Log.d(\"tag\", \"I'm a function\") } )\n</code></pre>\n\n<p>but also Kotlin allows you to remove the parenthesis if there is only one function parameter or if the last parameter is a function:</p>\n\n<pre><code>logExecution { Log.d(\"tag\", \"I'm a function\") }\n</code></pre>\n\n<p><strong>Receive another parameter</strong></p>\n\n<p>We can change the logExecution signature to receive another parameter and then put the function parameter at the end like this:</p>\n\n<pre><code>// added tag parameter:\nfun logExecution(tag: String, func: () -&gt; Unit) { ... }\n// call in this way:\nlogExecution(\"tag\") { Log.d(\"tag\", \"I'm a function\") }\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>logExecution(\"tag\") {\n    Log.d(\"tag\", \"I'm a function\")\n}\n</code></pre>\n\n<p><strong>Make the function receive and return values</strong></p>\n\n<pre><code>fun logExecution(func: (String, String) -&gt; Int) {\n    val thisIsAnInt = func(\"Hello\", \"World\")\n}\n</code></pre>\n\n<p><strong>Async function example</strong></p>\n\n<p>This is a function that receives a function and execute it in another thread:</p>\n\n<pre><code>fun runAsync(func: () -&gt; Unit) {\n    Thread(Runnable { func() }).start()\n}\n</code></pre>\n\n<p>and we can execute a function outside of the Main UI Thread easily:</p>\n\n<pre><code>runAsync {\n    // i.e.: save something in the Database\n}\n</code></pre>\n\n<p>Maybe you want to run some specific code for Lollipop devices and instead of doing the regular if check, you can use this function:</p>\n\n<pre><code>fun isLollipopOrAbove(func: () -&gt; Unit) {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n        func()\n    }\n}\n</code></pre>\n\n<p>and use it in this way:</p>\n\n<pre><code>isLollipopOrAbove {\n    // run lollipop specific code safely\n}\n</code></pre>\n\n<p>I hope with this, it has become a little clearer about Higher-Order Functions</p>\n"}], "owner": {"reputation": 3471, "user_id": 2068693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Cu4rC.jpg?s=128&g=1", "display_name": "E. Fernandes", "link": "https://stackoverflow.com/users/2068693/e-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 1, "accepted_answer_id": 38238818, "answer_count": 4, "score": 6, "last_activity_date": 1502983140, "creation_date": 1467859011, "question_id": 38236785, "link": "https://stackoverflow.com/questions/38236785/how-kotlin-higher-order-functions-work", "title": "How Kotlin Higher-Order Functions work?", "body": "<p>I'm struggling a bit to understand Higher-Order Functions and how to pass functions as parameters to other functions using Kotlin. I have a basic example that I want to fufill:</p>\n\n<pre><code>fun addOnSearchGameResultListener(\n            activity: AppCompatActivity,\n            releaseThread: () -&gt; Unit,\n            showNoResultsFoundMessage: () -&gt; Unit,\n            updateSearchResults: (result: List&lt;Game&gt;) -&gt; Unit) {\n        var event0017Handler: TaskExecutor = object : TaskExecutor {\n            override fun executeOnSuccessTask(response: JSONObject) {\n                async() {\n                    uiThread {\n                        try {\n                            releaseThread()\n                            mLoaderManager.hideIndeterminateProgressBar(activity)\n                            val result = mJSONParser.getGamesByGameKey(response)\n                            Log.i(GameController::class.simpleName, \"response: ${result.toString()}\")\n                            updateSearchResults(result)\n                        } catch (e: JSONException) {\n                            showNoResultsFoundMessage()\n                        }\n                    }\n                }\n            }\n\n            override fun executeOnErrorTask(payload: JSONObject) {\n                releaseThread()\n                mNotificationManager.showErrorPopUp(activity, payload.getString(\"data\"))\n            }\n        }\n        NotificationCenter.RegistrationCenter.registerForEvent(EventCatalog.e0017, event0017Handler)\n    }\n</code></pre>\n\n<p>I'm calling the method above this way:</p>\n\n<pre><code>mGameService.addOnSearchGameResultListener(\n            this,\n            releaseThread(),\n            showNoResultsFoundMessage(),\n            updateSearchResults(null)\n    )\n</code></pre>\n\n<p>And <code>updateSearchResults(null)</code> is declared as:</p>\n\n<pre><code>private fun updateSearchResults (results : List&lt;Game&gt;?) : (results : List&lt;Game&gt;?) -&gt; Unit = {\n        if (null != results &amp;&amp; results.size &gt; 0) {\n            mLastMatchingQuery = query_container.text.toString()\n            hideNoResultsFoundMessage()\n            mGames = results\n            mAdapter!!.dataSet = results.toMutableList()\n        } else {\n            showNoResultsFoundMessage()\n        }\n    }\n</code></pre>\n\n<p>I know I passed null to the func when I declared it ('cause I need to pass something at compilation time), however, the call made from inside <code>addOnSearchGameResultListener()</code> is not made passing the parameter from runtime, I mean, in <code>addOnSearchGameResultListener()</code> I always get null for results. How exactly this works and what am I doing wrong?</p>\n"}]