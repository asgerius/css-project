[{"tags": ["arrays", "listview", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 452, "user_id": 8185908, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/WVOYZ.png?s=128&g=1", "display_name": "KarmaDeli", "link": "https://stackoverflow.com/users/8185908/karmadeli"}, "edited": false, "score": 0, "creation_date": 1510879427, "post_id": 47319507, "comment_id": 81635272, "body": "Thanks, @nPn it took some doing but I was able to tap into the listView and its datasource. After consulting about a dozen different sources, including the link you sent, I was able to hack together the code to get the job done!"}], "tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": false, "score": 0, "last_activity_date": 1510791807, "last_edit_date": 1510791807, "creation_date": 1510791433, "answer_id": 47319507, "question_id": 47319331, "link": "https://stackoverflow.com/questions/47319331/extract-text-value-from-an-object-to-set-the-text-in-a-listview/47319507#47319507", "title": "Extract text value from an object to set the text in a listView", "body": "<p>In Android you set an adapter on the list view and then add a setOnItemClickListener, which when called will be provided with the index of the item in the list.</p>\n\n<p>One the simplest adapters is an <a href=\"https://developer.android.com/reference/android/widget/ArrayAdapter.html\" rel=\"nofollow noreferrer\">ArrayAdapter</a>.</p>\n\n<p>Here is a <a href=\"https://www.raywenderlich.com/124438/android-listview-tutorial\" rel=\"nofollow noreferrer\">tutorial</a> from a familiar source.</p>\n\n<p>And here is a quick example from some existing code.</p>\n\n<p>in OnCreateView I get my list view.</p>\n\n<pre><code> override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n        // Inflate the layout for this fragment\n        val rootView = inflater!!.inflate(R.layout.fragment_target_selection, container, false)\n        targetList = rootView.findViewById(R.id.names_list) as ListView\n        return rootView\n    }\n</code></pre>\n\n<p>then in my onResume I receive an array of objects which I then use to create my adapter.</p>\n\n<pre><code>    disposables.add(telescopeInterface.namesListStream.subscribe {\n        println(\"here is the names list\")\n        namesList = it\n        namesListAdapter = ArrayAdapter(this.context, android.R.layout.simple_list_item_1, namesList?.names)\n        println(\"setting up list view with the updated list\")\n        setupListView()\n    })\n</code></pre>\n\n<p>then in the setupListView() I assign the adapter to the list view and add a listener.</p>\n\n<pre><code>   private fun setupListView() {\n        namesListAdapter?.let { targetList.adapter = it }\n        targetList.setOnItemClickListener { adapterView, view, i, l -&gt;\n            targetSelectionListenter?.targetSelected()\n            val entry = adapterView.getItemAtPosition(i)\n            println(\"item $entry\")\n            telescopeInterface.sendSelectedTarget(entry as DSOCatalogNameEntry)\n        }\n    }\n</code></pre>\n\n<p>The full object remains in the list, the adapter is just used to select what is displayed in the list view, then you get the index of the selection, which you then use to extract the full object from your source list.</p>\n"}], "owner": {"reputation": 452, "user_id": 8185908, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/WVOYZ.png?s=128&g=1", "display_name": "KarmaDeli", "link": "https://stackoverflow.com/users/8185908/karmadeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510791807, "creation_date": 1510790186, "question_id": 47319331, "link": "https://stackoverflow.com/questions/47319331/extract-text-value-from-an-object-to-set-the-text-in-a-listview", "title": "Extract text value from an object to set the text in a listView", "body": "<p>I'm trying set the text in my listView to the string value in my FavJokes class.</p>\n\n<pre><code>class FavJokes {\nvar index: Int? = null\nvar string: String? = null\n}\n</code></pre>\n\n<p>When ever a user favorites a joke, I create a FavObject instance and assign it values for the index(as the Jokes are stored in an array) and the string value of the joke.</p>\n\n<pre><code>val newFav = FavJokes()\nnewFav.index = primaFreeze!!\nnewFav.string = (\"${questionProvider.quesRegistry[primaFreeze!!]}... ${answerProvider.ansRegistry[primaFreeze!!]}\")\nfavorites.add(newFav)\n</code></pre>\n\n<p>When I try to use this array of FavJoke objects as the datasource for my listView what I see is my project id and \".FavJokes@ee8e3e\" show up on the listView itself.</p>\n\n<p>I don't think I should populate the listView with just the string value for the joke because for my setOnItemClick{} method, the view I segue to is going to need the index of the joke in order to populate the textView with the correct joke.</p>\n\n<p>I'm new to kotlin/Java started learning it about 3 days ago, but I do have some Swift experience. In Swift I could use an IndexPath object to get/set the values for my tableView. Is there such an object or a method that I can access and set the TextView.text values in Kotlin/Java?</p>\n"}, {"tags": ["kotlin", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 2077, "user_id": 6801380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DSxgS.png?s=128&g=1", "display_name": "Leonardo Deleon", "link": "https://stackoverflow.com/users/6801380/leonardo-deleon"}, "is_accepted": false, "score": 0, "last_activity_date": 1510788195, "creation_date": 1510788195, "answer_id": 47319018, "question_id": 47318772, "link": "https://stackoverflow.com/questions/47318772/single-zip-completing-before-onsuccess/47319018#47319018", "title": "Single.zip completing before onSuccess", "body": "<p>Apparently I forgot to <code>observeOn</code> the main thread</p>\n"}], "owner": {"reputation": 2077, "user_id": 6801380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DSxgS.png?s=128&g=1", "display_name": "Leonardo Deleon", "link": "https://stackoverflow.com/users/6801380/leonardo-deleon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510788195, "creation_date": 1510786861, "question_id": 47318772, "link": "https://stackoverflow.com/questions/47318772/single-zip-completing-before-onsuccess", "title": "Single.zip completing before onSuccess", "body": "<p>I want to combine the response of 2 singles in one object </p>\n\n<pre><code>override fun buildUseCase(params: Int): Single&lt;EventDetails&gt; {\n    return eventDetailsComponent.getEventDetails(params)\n        .zipWith(bookingComponent.getBookingPage(bookingParams), BiFunction { details, page -&gt;\n              return@BiFunction details.apply { booking_page = page } })\n}\n</code></pre>\n\n<p>But when I subscribe I'm not receiving onSuccess cause one of the singles completes before the other</p>\n\n<pre><code>fun loadEventDetails(id: Int) {\n usecase.execute(id)\n.doOnSubscribe(onSubscribe)\n.observeOn(SchedulerProvider.mainThread)\n.subscribeBy(onSuccess = { details -&gt; setValues(details) },onError = onError)\n.addTo(subscriptions)\n}\n</code></pre>\n\n<p>What should I do to combine those calls? or to receive onSuccess in the end? </p>\n"}, {"tags": ["kotlin", "observable", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 2, "last_activity_date": 1510785108, "creation_date": 1510785108, "answer_id": 47318451, "question_id": 47317995, "link": "https://stackoverflow.com/questions/47317995/how-do-i-refactor-a-view-to-allow-filtering-of-items-bound-to-an-observablearray/47318451#47318451", "title": "How do I refactor a view to allow filtering of items bound to an observableArrayList inside a tornadofx app", "body": "<p>You should use the <code>SortedFilteredList</code> which wraps an ObservableList and accepts a predicate which is used to discriminate the entries.</p>\n\n<p>There is an unfortunate coupling between your two views, so you should consider firing an event instead, but here is a working solution with minimal changes to your example. I did move the data to a model, and cleaned up the ui code, as well as got rid of the <code>singleAssign</code> statements and applied some best practices to the builders :)</p>\n\n<p>As you can see, the <code>SortedFilteredList</code> has a <code>filterWhen</code> function that will be called whenever the <code>textProperty()</code> of the textfield changes.</p>\n\n<pre><code>class HelloWorldApp : App(HelloWorld::class)\n\nclass HelloWorld : View() {\n    val requestView: RequestView by inject()\n\n    override val root = vbox {\n        add(requestView)\n        textfield {\n            promptText = \"Filter\"\n            requestView.data.filterWhen(textProperty()) { query, item -&gt;\n                item.contains(query, ignoreCase = true)\n            }\n        }\n    }\n}\n\nclass ItemsModel : ViewModel() {\n    val items = FXCollections.observableArrayList&lt;String&gt;()\n\n    fun addItem(item: String) = items.add(item)\n\n    init {\n        addItem(\"Hi there\")\n        addItem(\"Another one\")\n    }\n}\n\nclass RequestView() : View() {\n    val model: ItemsModel by inject()\n    val data = SortedFilteredList(model.items)\n\n    override val root = listview(data) {\n        cellFormat {\n            graphic = cache {\n                form {\n                    fieldset {\n                        label(it) {\n                            alignment = Pos.CENTER_LEFT\n                            style {\n                                fontSize = 15.px\n                                fontWeight = FontWeight.BOLD\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3801, "user_id": 105589, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/4f325e95feb5cc5077c8dbcdca22a373?s=128&d=identicon&r=PG", "display_name": "xrd", "link": "https://stackoverflow.com/users/105589/xrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 47318451, "answer_count": 1, "score": 2, "last_activity_date": 1510785108, "creation_date": 1510783149, "question_id": 47317995, "link": "https://stackoverflow.com/questions/47317995/how-do-i-refactor-a-view-to-allow-filtering-of-items-bound-to-an-observablearray", "title": "How do I refactor a view to allow filtering of items bound to an observableArrayList inside a tornadofx app", "body": "<p>I started with the gradle <code>hello-world</code> example found <a href=\"https://github.com:JetBrains/kotlin-examples.git\" rel=\"nofollow noreferrer\">https://github.com:JetBrains/kotlin-examples.git</a> and modified it to use TornadoFX.</p>\n\n<p>This is an app that displays a list of items. You can add to the list, and the <code>RequestView</code> will automatically display all the items.</p>\n\n<p>I have it working so that the items stored are bound to an <code>observableArrayList</code> but I now want to implement a filter using the <code>TextView</code> at the bottom. But, I'm struggling to understand whether this means I should create a new list which is managed internally in the <code>RequestView</code>, and filter from that, or how to do it. </p>\n\n<pre><code>package demo\n\nimport javafx.collections.FXCollections\nimport javafx.geometry.Pos\nimport javafx.scene.control.TextField\nimport javafx.scene.layout.VBox\nimport javafx.scene.text.FontWeight\nimport tornadofx.*\n\nclass helloWorldApp : App(HelloWorld::class) {\n}\n\nclass HelloWorld : View() {\n\n    override val root = VBox()\n\n    var requestView: RequestView by singleAssign()\n    var filterField: TextField by singleAssign()\n\n    init {\n        with(root) {\n            requestView = RequestView()\n            this += requestView\n            filterField = TextField()\n            this += filterField\n        }\n\n        requestView.items.add(\"Hi there\")\n        requestView.items.add(\"Another one\")\n\n    }\n\n}\n\nclass RequestView() : View() {\n    var items = FXCollections.observableArrayList&lt;String&gt;()\n\n    override val root = listview(items) {\n        cellFormat {\n            graphic = cache {\n                form {\n                    fieldset {\n                        label(it) {\n                            alignment = Pos.CENTER_LEFT\n                            style {\n                                fontSize = 15.px\n                                fontWeight = FontWeight.BOLD\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Here is the build.gradle file, just in case it is helpful.</p>\n\n<pre><code>buildscript {\n  ext.kotlin_version = '1.1.2'\n  repositories {\n    mavenCentral()\n  }\n  dependencies {\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n  }\n}\n\n\napply plugin: 'kotlin'\napply plugin: 'application'\n\nmainClassName = 'demo.helloWorldApp'\n\ndefaultTasks 'run'\n\nrepositories {\n  mavenCentral()\n}\n\ntasks.compileKotlin.kotlinOptions.jvmTarget = \"1.8\"\n\ndependencies {\n  compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n  testCompile 'junit:junit:4.11'\n  testCompile \"org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version\"\n  compile 'no.tornado:tornadofx:1.7.10'\n}\n\ntask wrapper(type: Wrapper) {\n  gradleVersion = \"2.7\"\n}\n</code></pre>\n"}, {"tags": ["android", "django-rest-framework", "kotlin", "android-volley"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1510777278, "post_id": 47316451, "comment_id": 81583962, "body": "500 means there&#39;s an internal server error. This isn&#39;t an Android issue, this is a server/website issue"}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "edited": false, "score": 0, "creation_date": 1510777310, "post_id": 47316451, "comment_id": 81583977, "body": "Error 500 is the Server error that means there is no problem with your code (there may be an error) but you have to check your server error cause before checking your app code! Show logs in your server!"}, {"owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "reply_to_user": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "edited": false, "score": 0, "creation_date": 1510844436, "post_id": 47316451, "comment_id": 81616691, "body": "@Xenolion I have only access to error and access logs. I&#39;m not getting any of that."}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "edited": false, "score": 0, "creation_date": 1510869478, "post_id": 47316451, "comment_id": 81631894, "body": "After a careful observation of the site above I have figured what might be the cause of the error above! Have you already solved it or should I still answer it!"}], "answers": [{"comments": [{"owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510931694, "post_id": 47340903, "comment_id": 81659866, "body": "Thanks for the answer,  but I&#39;m getting the same error."}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "reply_to_user": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510986353, "post_id": 47340903, "comment_id": 81679239, "body": "Okay but I have realised that even visiting the link using the browser it crashes leading to an exception so you have 500 code which is the server error. Please post using the browser first trying to debug and all will go well!"}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "reply_to_user": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510986437, "post_id": 47340903, "comment_id": 81679255, "body": "This is the error <code>During handling of the above exception (list assignment index out of range), another exception occurred:</code>"}, {"owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510996701, "post_id": 47340903, "comment_id": 81681610, "body": "Yeah, this error shows up when you put incorrect data. I shouldn&#39;t get this error because I use correct data."}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "reply_to_user": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510996797, "post_id": 47340903, "comment_id": 81681632, "body": "Can you share with me the correct data or is it classified?"}, {"owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510997735, "post_id": 47340903, "comment_id": 81681860, "body": "Sorry but I can&#39;t. This is data for my school."}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "reply_to_user": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510998370, "post_id": 47340903, "comment_id": 81682026, "body": "Okay then make some fake data (username and password) and allow me to debug for you!"}, {"owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510999110, "post_id": 47340903, "comment_id": 81682235, "body": "Done. First, you need to login to this url: <code>http:&#47;&#47;laude.ct8.pl&#47;api&#47;user&#47;login&#47;</code> with this data: username: <code>fakeUser</code> and password: <code>fakeUser</code>. Then you can go to this url: <code>http:&#47;&#47;laude.ct8.pl&#47;api&#47;user&#47;data&#47;aktualizacja&#47;</code> and use this data: username: <code>fake</code> password: <code>fakePassword</code>"}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "reply_to_user": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510999364, "post_id": 47340903, "comment_id": 81682308, "body": "Can I answer the question using java?"}, {"owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510999502, "post_id": 47340903, "comment_id": 81682352, "body": "Yeah, no problem."}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "reply_to_user": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1511001789, "post_id": 47340903, "comment_id": 81683024, "body": "Is the names <code>librus_user</code> and <code>librus_pswd</code> for password?? Thats what I see from the form! But we used <code>username</code> and <code>password</code> for it!"}, {"owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1511002167, "post_id": 47340903, "comment_id": 81683130, "body": "Yeah, I changed it yesterday. I will edit my code in my question."}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "reply_to_user": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1511009189, "post_id": 47340903, "comment_id": 81684954, "body": "I have finished the request the site needs a person to be logged in first before making the second request! So I am getting <code>AuthFailerError</code> I can not make both requests!"}, {"owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1511012104, "post_id": 47340903, "comment_id": 81685764, "body": "Yeah, I was getting the same error. Is it way to avoid it?"}, {"owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "reply_to_user": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1511041658, "post_id": 47340903, "comment_id": 81695448, "body": "Oooh your question becomes good now and you need to find a way to store a session using a cookie or something. I will show you the way here <a href=\"https://stackoverflow.com/questions/16680701/using-cookies-with-android-volley-library\" title=\"using cookies with android volley library\">stackoverflow.com/questions/16680701/&hellip;</a>"}, {"owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1511081636, "post_id": 47340903, "comment_id": 81702665, "body": "I added this code <code>CookieHandler.setDefault(CookieManager())</code> into my login actvity and I&#39;m still getting same error."}], "tags": [], "owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "is_accepted": false, "score": 0, "last_activity_date": 1510875044, "creation_date": 1510875044, "answer_id": 47340903, "question_id": 47316451, "link": "https://stackoverflow.com/questions/47316451/android-kotlin-volley-unexpected-response-code-500/47340903#47340903", "title": "Android Kotlin - Volley Unexpected response code 500", "body": "<p>The server error is caused by you making <code>JsonObjectRequest</code> and passing an <code>JsonObject</code> as a body of parameter while your server requires them as <code>Strings</code>(<em>I observed the link!</em>). The quick fix is to use <code>StringRequest</code> and pass your parameters as a String as ! Check the code below to get the idea!</p>\n\n<pre><code>private val UPDATE_URL = \"http://laude.ct8.pl/api/user/data/aktualizacja/\"\nprivate var volleyRequest: RequestQueue? = null\n\nvolleyRequest = Volley.newRequestQueue(this)\n\nprivate fun aktualizacja() {\n\n        val req = object : StringRequest(Request.Method.POST,\n                UPDATE_URL,\n                Response.Listener { response -&gt;\n                Toast.makeText(this, response, Toast.LENGTH_LONG).show()\n                val user = Intent(this, UserActivity::class.java)\n                startActivity(user)\n\n                }, Response.ErrorListener { e -&gt;\n\n               Toast.makeText(this, error.toString(), Toast.LENGTH_LONG).show()\n        }) {\n            public override fun getParams(): Map&lt;String, String&gt; {\n                val params = HashMap&lt;String, String&gt;()\n                params.put(\"username\", usernameEdit.text)\n                params.put(\"password\", passwordEdit.text)\n                return params\n            }\n        }\n        req.retryPolicy = DefaultRetryPolicy(60000, DefaultRetryPolicy.DEFAULT_MAX_RETRIES, DefaultRetryPolicy.DEFAULT_BACKOFF_MULT)\n\n    volleyRequest!!.add(req)\n\n}\n</code></pre>\n\n<p>You should also NOTE that the response is also a <code>String</code> so if you need it as a <code>JSONOject</code> convert it. </p>\n\n<p><em>Sorry if you may get any errors in the code! I wrote the code in Java and convert to Kotlin using Android Studio!! I hope you will get the general idea!</em></p>\n"}], "owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 897, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1511002198, "creation_date": 1510776855, "last_edit_date": 1511002198, "question_id": 47316451, "link": "https://stackoverflow.com/questions/47316451/android-kotlin-volley-unexpected-response-code-500", "title": "Android Kotlin - Volley Unexpected response code 500", "body": "<p>I made REST API with Django Rest Framework. Currently, I'm working on a mobile app for my site. When I do POST request (it's my second POST request in my app) I'm getting this error:</p>\n\n<blockquote>\n  <p>E/Volley: [385] BasicNetwork.performRequest: Unexpected response code 500 for <a href=\"http://laude.ct8.pl/api/user/data/aktualizacja/\" rel=\"nofollow noreferrer\">http://laude.ct8.pl/api/user/data/aktualizacja/</a></p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre><code>private val UPDATE_URL = \"http://laude.ct8.pl/api/user/data/aktualizacja/\"\nprivate var volleyRequest: RequestQueue? = null\nprivate val jsonObj = JSONObject()\n\nvolleyRequest = Volley.newRequestQueue(this)\n\nprivate fun aktualizacja() {\n\n        jsonObj.put(\"librus_user\", usernameEdit.text)\n        jsonObj.put(\"librus_pswd\", passwordEdit.text)\n\n        val req = JsonObjectRequest(Request.Method.POST, UPDATE_URL, jsonObj,\n                Response.Listener { response -&gt;\n                    Toast.makeText(this, response.toString(), Toast.LENGTH_LONG).show()\n                    val user = Intent(this, UserActivity::class.java)\n                    startActivity(user)\n                },\n                Response.ErrorListener { error -&gt;\n                    Toast.makeText(this, error.toString(), Toast.LENGTH_LONG).show()\n                })\n        req.retryPolicy = DefaultRetryPolicy(60000, DefaultRetryPolicy.DEFAULT_MAX_RETRIES, DefaultRetryPolicy.DEFAULT_BACKOFF_MULT)\n\n        volleyRequest!!.add(req)\n    }\n</code></pre>\n\n<p>When I use same data on my website I'm not getting any errors, I got it only on a mobile app. \nThanks for help !</p>\n"}, {"tags": ["android", "kotlin", "retrofit2", "moshi", "kotlin-reflect"], "comments": [{"owner": {"reputation": 7292, "user_id": 1696171, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRC6m.jpg?s=128&g=1", "display_name": "Eric Cochran", "link": "https://stackoverflow.com/users/1696171/eric-cochran"}, "edited": false, "score": 1, "creation_date": 1510821058, "post_id": 47316184, "comment_id": 81600254, "body": "Can you reliably reproduce this error? If so, can you deserialization a response directly (without Retrofit and all) with a test case and file an issue on Moshi?"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 1, "creation_date": 1510829109, "post_id": 47316184, "comment_id": 81605851, "body": "<code>KotlinReflectionInternalError</code> is, as may be deduced from the name and the description, a problem in the <code>kotlin-reflect</code> implementation. Please report this at <a href=\"http://kotl.in/issue\" rel=\"nofollow noreferrer\">kotl.in/issue</a>"}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "reply_to_user": {"reputation": 7292, "user_id": 1696171, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRC6m.jpg?s=128&g=1", "display_name": "Eric Cochran", "link": "https://stackoverflow.com/users/1696171/eric-cochran"}, "edited": false, "score": 0, "creation_date": 1510843850, "post_id": 47316184, "comment_id": 81616209, "body": "@EricCochran Yes, I get the same error when deserializing directly (see the update above). I posted an issue <a href=\"https://github.com/square/moshi/issues/394\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "reply_to_user": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 1, "creation_date": 1510844644, "post_id": 47316184, "comment_id": 81616862, "body": "@AlexanderUdalov I submitted an issue to YouTrack as well; <a href=\"https://youtrack.jetbrains.com/issue/KT-21295\" rel=\"nofollow noreferrer\">KT-21295</a>."}, {"owner": {"reputation": 7292, "user_id": 1696171, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRC6m.jpg?s=128&g=1", "display_name": "Eric Cochran", "link": "https://stackoverflow.com/users/1696171/eric-cochran"}, "edited": false, "score": 0, "creation_date": 1510959565, "post_id": 47316184, "comment_id": 81673958, "body": "@Bryan You can answer this now and accept your own answer. :) Hopefully, it will help any future ProGuard users searching."}], "owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1242, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510848425, "creation_date": 1510775818, "last_edit_date": 1510848425, "question_id": 47316184, "link": "https://stackoverflow.com/questions/47316184/kotlinreflectioninternalerror-data-class", "title": "KotlinReflectionInternalError Data Class", "body": "<p>I received the following error when attempting to use a data class as a result type in a Retrofit service.</p>\n\n<pre><code>11-15 11:35:38.345 14693-14693/com.example.app E/AndroidRuntime: FATAL EXCEPTION: main\n        Process: com.example.app, PID: 14693\n        kotlin.reflect.jvm.internal.KotlinReflectionInternalError: Incorrect resolution sequence for Java constructor public constructor AuthenticationResponse() defined in com.example.app.data.auth.AuthenticationResponse[JavaClassConstructorDescriptor@6d57dc3] (kotlin.reflect.jvm.internal.impl.load.java.structure.reflect.ReflectJavaClass: class com.example.app.data.auth.AuthenticationResponse)\n            at kotlin.reflect.jvm.internal.RuntimeTypeMapper.mapSignature(RuntimeTypeMapper.kt:202)\n            at kotlin.reflect.jvm.internal.KFunctionImpl.&lt;init&gt;(KFunctionImpl.kt:46)\n            at kotlin.reflect.jvm.internal.KClassImpl$Data$constructors$2.invoke(KClassImpl.kt:87)\n            at kotlin.reflect.jvm.internal.KClassImpl$Data$constructors$2.invoke(KClassImpl.kt:39)\n            at kotlin.reflect.jvm.internal.ReflectProperties$LazySoftVal.invoke(ReflectProperties.java:93)\n            at kotlin.reflect.jvm.internal.ReflectProperties$Val.getValue(ReflectProperties.java:32)\n            at kotlin.reflect.jvm.internal.KClassImpl$Data.getConstructors(Unknown Source:7)\n            at kotlin.reflect.jvm.internal.KClassImpl.getConstructors(KClassImpl.kt:192)\n            at kotlin.reflect.full.KClasses.getPrimaryConstructor(KClasses.kt:40)\n            at com.squareup.moshi.KotlinJsonAdapterFactory.create(KotlinJsonAdapter.kt:160)\n            at com.squareup.moshi.Moshi.adapter(Moshi.java:100)\n            at retrofit2.converter.moshi.MoshiConverterFactory.responseBodyConverter(MoshiConverterFactory.java:90)\n            at retrofit2.Retrofit.nextResponseBodyConverter(Retrofit.java:328)\n            at retrofit2.Retrofit.responseBodyConverter(Retrofit.java:311)\n            at retrofit2.ServiceMethod$Builder.createResponseConverter(ServiceMethod.java:735)\n            at retrofit2.ServiceMethod$Builder.build(ServiceMethod.java:168)\n            at retrofit2.Retrofit.loadServiceMethod(Retrofit.java:169)\n            at retrofit2.Retrofit$1.invoke(Retrofit.java:146)\n            at java.lang.reflect.Proxy.invoke(Proxy.java:913)\n            at $Proxy4.credentialsLogin(Unknown Source)\n            at com.example.app.data.rest.service.AuthenticationService$DefaultImpls.credentialsLogin$default(AuthenticationService.kt:37)\n            at com.example.app.ui.module.auth.AuthenticatorActivity.login(AuthenticatorActivity.kt:204)\n            at com.example.app.ui.module.auth.AuthenticatorActivity.access$login(AuthenticatorActivity.kt:37)\n            at com.example.app.ui.module.auth.AuthenticatorActivity$onCreate$4.onEditorAction(AuthenticatorActivity.kt:107)\n            at android.widget.TextView.onEditorAction(TextView.java:5909)\n            at com.android.internal.widget.EditableInputConnection.performEditorAction(EditableInputConnection.java:138)\n            at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:360)\n            at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:85)\n            at android.os.Handler.dispatchMessage(Handler.java:105)\n            at android.os.Looper.loop(Looper.java:164)\n            at android.app.ActivityThread.main(ActivityThread.java:6541)\n            at java.lang.reflect.Method.invoke(Native Method)\n            at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:767)\n</code></pre>\n\n<p>To be honest I'm not even sure what this error means and I haven't found many resources about it. The <a href=\"https://github.com/JetBrains/kotlin/blob/master/core/reflection.jvm/src/kotlin/reflect/jvm/internal/KotlinReflectionInternalError.kt\" rel=\"nofollow noreferrer\">class description</a> is fairly vague:</p>\n\n<blockquote>\n  <p>Signals that Kotlin reflection had reached an inconsistent state from\n  which it cannot recover.</p>\n</blockquote>\n\n<p>The only place that is using reflection is within Moshi, but I cannot figure out what is causing the issue.</p>\n\n<hr>\n\n<h3>Code</h3>\n\n<p>This is the data class:</p>\n\n<pre><code>data class AuthenticationResponse(\n    @Json(name = \"access_token) val accessToken: String,\n    @Json(name = \"refresh_token) val refreshToken: String,\n    @Json(name = \"user_id\") val userId: String,\n    val scope: String\n)\n</code></pre>\n\n<p>The <code>AuthenticationService</code>:</p>\n\n<pre><code>interface AuthenticationService {\n\n    @FormUrlEncoded\n    @POST(\"oauth/token\")\n    fun credentials(\n        @Field(\"username\") username: String,\n        @Field(\"password\") password: String,\n        @Field(\"scope\") scope: String,\n        @Field(\"grant_type\") grantType: String = \"password\"\n    ): Flowable&lt;AuthenticationResponse&gt;\n\n    @FormUrlEncoded\n    @POST(\"oauth/token\")\n    fun refreshToken(\n        @Field(\"refresh_token\") refreshToken: String,\n        @Field(\"scope\") scope: String,\n        @Field(\"grant_type\") grantType: String = \"refresh_token\"\n    ): Flowable&lt;AuthenticationResponse&gt;\n\n}\n</code></pre>\n\n<p>I am using Moshi as the JSON converter, and I have included the <code>KotlinJsonAdapterFactory</code> in the <code>Moshi.Builder</code>. </p>\n\n<hr>\n\n<h3>Update</h3>\n\n<p>I can reliably reproduce the error by attempting to create an <code>AuthenticationResponse</code> adapter using Moshi directly.</p>\n\n<pre><code>val moshi = Moshi.Builder().add(KotlinJsonAdapterFactory()).build()\nval json = \"{\\\"user_id\\\": 000000,\" +\n        \"\\\"access_token\\\": \\\"testAccessToken\\\",\" +\n        \"\\\"expires_in\\\": 3600,\" +\n        \"\\\"token_type\\\": \\\"Bearer\\\",\" +\n        \"\\\"refresh_token\\\": \\\"testRefreshToken\\\",\" +\n        \"\\\"scope\\\": \\\"test\\\"}\"\n\nval adapter = moshi.adapter&lt;AuthenticationResponse&gt;(AuthenticationResponse::class.java)\n\nval response = adapter.fromJson(json)\n\nTimber.d(\"response=$response\")\n</code></pre>\n\n<p>The code above fails with the same <code>KotlinReflectionInternalError</code> when attempting to create the <code>adapter</code> value.</p>\n"}, {"tags": ["spring-boot", "gradle", "junit", "kotlin", "junit5"], "answers": [{"comments": [{"owner": {"reputation": 120, "user_id": 8408533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rjcTy.png?s=128&g=1", "display_name": "hoos", "link": "https://stackoverflow.com/users/8408533/hoos"}, "edited": false, "score": 0, "creation_date": 1510778129, "post_id": 47316164, "comment_id": 81584406, "body": "Thank&#39;s, I was missing those dependencies. Unfortunately, I&#39;m now getting the following error: FAILURE: Build failed with an exception.    * What went wrong: Execution failed for task &#39;:spog-api:compileTestKotlin&#39;. Could not resolve all files for configuration &#39;:spog-api:testCompileClasspath&#39;.    &gt; Could not find com.github.sbrannen:spring-test-junit5:1.0.2.      Required by:          project :spog-api"}, {"owner": {"reputation": 34626, "user_id": 8200937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5h9EI.png?s=128&g=1", "display_name": "glytching", "link": "https://stackoverflow.com/users/8200937/glytching"}, "reply_to_user": {"reputation": 120, "user_id": 8408533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rjcTy.png?s=128&g=1", "display_name": "hoos", "link": "https://stackoverflow.com/users/8408533/hoos"}, "edited": false, "score": 0, "creation_date": 1510778566, "post_id": 47316164, "comment_id": 81584662, "body": "Isn&#39;t that message telling you that the spring-test-junit dependency is still missing? Or at least that it is not available on the testCompileClasspath? Perhaps you haven&#39;t correctly added it to build.gradle?"}, {"owner": {"reputation": 120, "user_id": 8408533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rjcTy.png?s=128&g=1", "display_name": "hoos", "link": "https://stackoverflow.com/users/8408533/hoos"}, "edited": false, "score": 0, "creation_date": 1510778810, "post_id": 47316164, "comment_id": 81584823, "body": "The author sbrannen mentions that his work &quot;has been incorporated into Spring Framework 5.0 in conjunction with SPR-13575.&quot; So I don&#39;t think I need the dependency for this prototype project. I&#39;ll have a look to see if I need the dependency for spring framework 5."}, {"owner": {"reputation": 120, "user_id": 8408533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rjcTy.png?s=128&g=1", "display_name": "hoos", "link": "https://stackoverflow.com/users/8408533/hoos"}, "edited": false, "score": 0, "creation_date": 1510779334, "post_id": 47316164, "comment_id": 81585114, "body": "After adding the sbrannen and jitpack dependencies I didn&#39;t see any message from Gradle to say it had downloaded the artefact. So yes, that would explain the error."}, {"owner": {"reputation": 23819, "user_id": 388980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64310de9c07f30458f9baae33d91ccdc?s=128&d=identicon&r=PG", "display_name": "Sam Brannen", "link": "https://stackoverflow.com/users/388980/sam-brannen"}, "edited": false, "score": 0, "creation_date": 1511195130, "post_id": 47316164, "comment_id": 81746281, "body": "If you are using <code>spring-test</code> from Spring Framework 5.x, you do <b>not</b> need the <code>spring-test-junit5</code> artifact (which is only for Spring Framework 4.3.x)."}], "tags": [], "owner": {"reputation": 34626, "user_id": 8200937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5h9EI.png?s=128&g=1", "display_name": "glytching", "link": "https://stackoverflow.com/users/8200937/glytching"}, "is_accepted": false, "score": 1, "last_activity_date": 1511252266, "last_edit_date": 1511252266, "creation_date": 1510775718, "answer_id": 47316164, "question_id": 47316002, "link": "https://stackoverflow.com/questions/47316002/unresolved-reference-springextension-using-extendwith-annotation/47316164#47316164", "title": "Unresolved reference: SpringExtension using @ExtendWith annotation", "body": "<p>I don't see the <code>spring-test-junit5</code> dependency declared anywhere in your <code>build.gradle</code>. According to the <a href=\"https://github.com/sbrannen/spring-test-junit5\" rel=\"nofollow noreferrer\">docs for the JUnit 5 Spring extension</a>:</p>\n\n<blockquote>\n  <p>If you'd like to build against a release tag for spring-test-junit5, you may be interested in using JitPack. For example, to build against the 1.0.2 tag, the following Maven coordinates will work.</p>\n</blockquote>\n\n<pre><code>Group ID: com.github.sbrannen\nArtifact ID: spring-test-junit5\nVersion: 1.0.2\n</code></pre>\n\n<blockquote>\n  <p>JitPack with Gradle</p>\n</blockquote>\n\n<pre><code>repositories {\n    mavenCentral()\n    maven { url 'https://jitpack.io' }\n}\n\n// ...\n\ndependencies {\n    // ...\n    testCompile('com.github.sbrannen:spring-test-junit5:1.0.2')\n    // ...\n}\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>Extracted from the comments below (provided by the author of the JUnit5 Spring Extension):</p>\n\n<blockquote>\n  <p>If you are using spring-test from Spring Framework 5.x, you do not need the spring-test-junit5 artifact (which is only for Spring Framework 4.3.x)</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 120, "user_id": 8408533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rjcTy.png?s=128&g=1", "display_name": "hoos", "link": "https://stackoverflow.com/users/8408533/hoos"}, "is_accepted": true, "score": 1, "last_activity_date": 1511060150, "last_edit_date": 1511060150, "creation_date": 1510782112, "answer_id": 47317757, "question_id": 47316002, "link": "https://stackoverflow.com/questions/47316002/unresolved-reference-springextension-using-extendwith-annotation/47317757#47317757", "title": "Unresolved reference: SpringExtension using @ExtendWith annotation", "body": "<p>I was missing the following dependency:</p>\n\n<pre><code>dependencies {\n    compile 'org.springframework:spring-context:5.0.1.RELEASE'\n}\n</code></pre>\n\n<p>Ultimately there were a lot of dependency mismatches due to my build.gradle. Make sure all spring modules are derived from the 5.0.1.RELEASE I found some from previous versions which caused different errors. I ended up defining my versions:</p>\n\n<pre><code>    ext {\n    antJunitVersion = '1.9.7'\n    assertjcoreVersion = '3.8.0'\n    apiguardianVersion = '1.0.0'\n    dokkaVersion = '0.9.15'\n    dockerVersion = '1.2'\n    h2Version = '1.4.196'\n    hibernateVersion = '5.2.12.Final'\n    jacksonVersion = '2.9.1'\n    junit4Version = '4.12'\n    junitVintageVersion = '4.12.2'\n    junitPlatformVersion = '1.0.2'\n    junitJupiterVersion = '5.0.2'\n    kotlinVersion = '1.1.60'\n    log4jVersion = '2.9.1'\n    springVersion = '5.0.1.RELEASE'\n    springBootVersion = '1.5.8.RELEASE'\n    slf4jVersion = '1.7.25'\n}\n</code></pre>\n\n<p>and then declared them as explicit dependencies </p>\n\n<pre><code>// Spring Dependencies\ncompile(\"org.springframework:spring-webmvc:${springVersion}\")\ncompile(\"org.springframework:spring-web:${springVersion}\")\ncompile(\"org.springframework:spring-aspects:${springVersion}\")\ncompile(\"org.springframework:spring-aop:${springVersion}\")\ncompile(\"org.springframework:spring-orm:${springVersion}\")\ncompile(\"org.springframework:spring-jdbc:${springVersion}\")\ncompile(\"org.springframework:spring-tx:${springVersion}\")\ncompile(\"org.springframework:spring-beans:${springVersion}\")\ncompile(\"org.springframework:spring-expression:${springVersion}\")\ncompile(\"org.springframework:spring-core:${springVersion}\")\ncompile(\"org.springframework:spring-context:${springVersion}\")\ncompile(\"org.springframework:spring-test:${springVersion}\")\ncompile(\"org.springframework.boot:spring-boot-starter-web:${springBootVersion}\") {\n    exclude module: \"spring-boot-starter-tomcat\"\n}\ncompile \"org.springframework.boot:spring-boot-starter-jetty:${springBootVersion}\"\ncompile \"org.springframework.boot:spring-boot-starter-actuator:${springBootVersion}\"\n</code></pre>\n"}], "owner": {"reputation": 120, "user_id": 8408533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rjcTy.png?s=128&g=1", "display_name": "hoos", "link": "https://stackoverflow.com/users/8408533/hoos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3154, "favorite_count": 0, "accepted_answer_id": 47317757, "answer_count": 2, "score": 0, "last_activity_date": 1511252266, "creation_date": 1510775141, "last_edit_date": 1510776378, "question_id": 47316002, "link": "https://stackoverflow.com/questions/47316002/unresolved-reference-springextension-using-extendwith-annotation", "title": "Unresolved reference: SpringExtension using @ExtendWith annotation", "body": "<p>I'm using trying to use Junit 5 within SpringBoot in order to take advantage of a number of new features that it provides. The basic setup works and I can use the new annotations such as <code>@BeforeAll</code> and <code>@AfterAll</code> however, I believe that because I cannot resolve the <code>@ExtendWith(SpringExtension::class)</code> I am not able to initialise my Test class to make use of injected resources. I have tried adding required dependencies to my <code>build.gradle</code> file but I assume I'm missing a key dependency:</p>\n\n<pre><code>buildscript {\n\next.dokka_version = '0.9.15'\next.dockerVersion = '1.2'\next.junit4Version = '4.12'\next.junitVintageVersion = '4.12.2'\next.junitPlatformVersion = '1.0.2'\next.junitJupiterVersion = '5.0.2'\next.kotlin_version = '1.1.60'\next.log4jVersion = '2.9.0'\next.springVersion = '1.5.8.RELEASE'\n\nrepositories {\n    mavenCentral()\n    jcenter()\n}\n\ndependencies {\n    // Needed for the 'kotlin' plugin\n    classpath(\"org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlin_version}\")\n    // Needed for the 'org.springframework.boot' plugin\n    classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springVersion}\")\n    // Needed for the 'kotlin-spring' plugin\n    classpath(\"org.jetbrains.kotlin:kotlin-allopen:${kotlin_version}\")\n    //Needed for 'docker' plugin\n    classpath(\"se.transmode.gradle:gradle-docker:${dockerVersion}\")\n    //Needed for 'dokka' plugin\n    classpath(\"org.jetbrains.dokka:dokka-gradle-plugin:${dokka_version}\")\n    // Needed for Junit 5\n    classpath(\"org.junit.platform:junit-platform-gradle-plugin:${junitPlatformVersion}\")\n}\n\n}\n\n// Allows us to compile Kotlin files\napply plugin: 'kotlin'\n// Does some extra work to set up Spring Boot.\n// Specifically this gives us the \"bootRun\" task we will be using\napply plugin: 'org.springframework.boot'\n// Allows for improved interoperability between Kotlin and Spring\napply plugin: 'kotlin-spring'\n// Allows us to create docker image\napply plugin: 'docker'\n//Allows us to create API documentation\napply plugin: 'org.jetbrains.dokka'\n\napply plugin: 'idea'\n\napply plugin: 'java'\n\napply plugin: 'org.junit.platform.gradle.plugin'\n\n\njunitPlatform {\n    // platformVersion '1.0.2'\n    filters {\n        engines {\n            // include 'junit-jupiter', 'junit-vintage'\n            // exclude 'custom-engine'\n        }\n        tags {\n            // include 'fast'\n            exclude 'slow'\n        }\n        // includeClassNamePattern '.*Test'\n    }\n    // enableStandardTestTask true\n    // reportsDir file('build/test-results/junit-platform') // this is the default\n    //logManager 'org.apache.logging.log4j.jul.LogManager'\n}\n\ntask buildDocker(type: Docker, dependsOn: [build, dokka]) {\n    applicationName = jar.baseName\n    dockerfile = file('Dockerfile')\n    doFirst {\n        copy {\n            from jar\n            into stageDir\n        }\n    }\n}\n\ndokka {\n    outputFormat = 'html'\n    outputDirectory = $buildDir / doc\n}\n\nrepositories {\n    mavenCentral()\n}\n\ncompileJava {\n    sourceCompatibility = 1.8\n    targetCompatibility = 1.8\n}\n\ncompileTestJava {\n    sourceCompatibility = 1.8\n    targetCompatibility = 1.8\n    options.compilerArgs += '-parameters'\n}\n\ndependencies {\n// JPA and H2\ncompile(\"org.springframework.boot:spring-boot-starter-data-jpa\")\ncompile(\"com.h2database:h2\")\n\ncompile \"org.hibernate:hibernate-entitymanager:5.2.10.Final\"\ncompile \"org.hibernate:hibernate-core:5.2.10.Final\"\n\ncompile \"org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlin_version\"\n\ncompile \"org.slf4j:slf4j-api:1.7.25\"\n\n// Kotlin Dependencies\ncompile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\ncompile \"org.jetbrains.kotlin:kotlin-reflect:$kotlin_version\"\ntestCompile \"org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version\"\n\ntestCompile \"org.springframework.boot:spring-boot-starter-test\"\n//testCompile \"org.springframework.boot:spring-boot-starter-test\" {\n//    exclude(module = \"junit\")\n//}\n// Mockito\n//testCompile \"org.mockito:mockito-core:2.11.0\"\n//testCompile \"com.nhaarman:mockito-kotlin-kt1.1:1.5.0\"\n\n//AssertJ\ntestCompile 'org.assertj:assertj-core:3.8.0'\n\n// JUnit Jupiter API and TestEngine implementation\ntestCompile(\"org.junit.jupiter:junit-jupiter-api:${junitJupiterVersion}\")\ntestCompile(\"org.junit.platform:juint-platform-runner:${junitPlatformVersion}\")\ntestRuntime(\"org.junit.jupiter:junit-jupiter-engine:${junitJupiterVersion}\")\n\n// Only needed to run tests in an (IntelliJ) IDE(A) that bundles an older version\ntestRuntime(\"org.junit.platform:junit-platform-launcher:${junitPlatformVersion}\")\n\n// If you also want to support JUnit 3 and JUnit 4 tests\n//testCompile (\"junit:junit:${junit4Version}\")\n//testRuntime (\"org.junit.vintage:junit-vintage-engine:${junitVintageVersion}\")\n\n// To avoid compiler warnings about @API annotations in JUnit code\ntestCompileOnly(\"org.apiguardian:apiguardian-api:1.0.0\")\n\n// Spring Dependencies\ncompile(\"org.springframework.boot:spring-boot-starter-web\") {\n    exclude module: \"spring-boot-starter-tomcat\"\n}\ncompile \"org.springframework.boot:spring-boot-starter-jetty\"\ncompile \"org.springframework.boot:spring-boot-starter-actuator\"\n\n// Jackson Dependencies\ncompile \"com.fasterxml.jackson.core:jackson-annotations\"\ncompile \"com.fasterxml.jackson.core:jackson-core\"\ncompile \"com.fasterxml.jackson.core:jackson-databind\"\nruntime \"com.fasterxml.jackson.datatype:jackson-datatype-jdk8\"\nruntime \"com.fasterxml.jackson.datatype:jackson-datatype-jsr310\"\nruntime \"com.fasterxml.jackson.module:jackson-module-kotlin\"\n}\n\nconfigurations.all {\n    exclude group: \"org.slf4j\", module: \"slf4j-log4j12\"\n    exclude group: \"log4j\", module: \"log4j\"\n}\n\ntask wrapper(type: Wrapper) {\n    gradleVersion = \"4.3\"\n}\n</code></pre>\n"}, {"tags": ["android", "broadcastreceiver", "kotlin", "alarmmanager"], "answers": [{"tags": [], "owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "is_accepted": true, "score": 2, "last_activity_date": 1510766341, "creation_date": 1510766341, "answer_id": 47313590, "question_id": 47313479, "link": "https://stackoverflow.com/questions/47313479/kotlin-alarmmanager-and-broadcastreceiver-not-working/47313590#47313590", "title": "Kotlin AlarmManager and BroadcastReceiver not working", "body": "<p>I just noticed that I was calling <code>getService()</code> on <code>PendingIntent</code> instead of <code>getBroadcast()</code></p>\n\n<p>After changing that, it works perfectly!</p>\n"}, {"tags": [], "owner": {"reputation": 756, "user_id": 859330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a3OUP.jpg?s=128&g=1", "display_name": "leeCoder", "link": "https://stackoverflow.com/users/859330/leecoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1590434776, "creation_date": 1590434776, "answer_id": 62009357, "question_id": 47313479, "link": "https://stackoverflow.com/questions/47313479/kotlin-alarmmanager-and-broadcastreceiver-not-working/62009357#62009357", "title": "Kotlin AlarmManager and BroadcastReceiver not working", "body": "<p>In addition to the preferred answer, I set the class of the intent before it worked. See the example below:</p>\n\n<pre><code>val intent = Intent()\nintent.action = LOCAL_NOTIFICATION\nintent.setClass(context, MyBroadCastReceiver::class.java) //this line\n</code></pre>\n\n<p>before passing the intent to the pendintIntent. \nhope it helps </p>\n"}], "owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2634, "favorite_count": 0, "accepted_answer_id": 47313590, "answer_count": 2, "score": 1, "last_activity_date": 1590434776, "creation_date": 1510766043, "question_id": 47313479, "link": "https://stackoverflow.com/questions/47313479/kotlin-alarmmanager-and-broadcastreceiver-not-working", "title": "Kotlin AlarmManager and BroadcastReceiver not working", "body": "<p>I'm trying to set an alarm with AlarmManager, but my BroadcastReceiver never gets called.  Here is my snippet.</p>\n\n<pre><code>    val receiver = object : BroadcastReceiver() {\n        override fun onReceive(context: Context, intent: Intent) {\n            //Never gets hit\n        }\n    }\n    context.registerReceiver(receiver, IntentFilter(LOCAL_NOTIFICATION))\n\n    val intent = Intent()\n    intent.action = LOCAL_NOTIFICATION\n\n    val alarmManager = context.getSystemService(ALARM_SERVICE) as? AlarmManager\n    val pendingIntent = PendingIntent.getService(context, 1, intent, PendingIntent.FLAG_UPDATE_CURRENT)\n\n    val calendar = Calendar.getInstance()\n\n    calendar.add(Calendar.SECOND, 10)\n\n    alarmManager?.set(AlarmManager.RTC_WAKEUP, calendar.timeInMillis, pendingIntent)\n</code></pre>\n\n<p>I've tried registering a broadcast receiver in AndroidManifest.xml but nothing seems to be working.</p>\n"}, {"tags": ["android", "android-viewpager", "kotlin", "android-pagetransformer"], "answers": [{"tags": [], "owner": {"reputation": 885, "user_id": 1201592, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4e0125ac022d4861c0e71e4e8701fff1?s=128&d=identicon&r=PG", "display_name": "Sami Issa", "link": "https://stackoverflow.com/users/1201592/sami-issa"}, "is_accepted": true, "score": 0, "last_activity_date": 1526029784, "last_edit_date": 1526029784, "creation_date": 1510904959, "answer_id": 47345677, "question_id": 47313159, "link": "https://stackoverflow.com/questions/47313159/custom-vertical-viewpager-not-work-with-onclick-listener-on-a-child-view/47345677#47345677", "title": "Custom vertical viewpager not work with onClick listener on a child view", "body": "<p>Finally I solved the problem. I was to add logic to onInterceptTouchEvent to release the onTouch event if user only tap the viewpager and not swapping. This is the final code:</p>\n\n<pre><code>class VerticalViewPager : ViewPager {\n\nvar originalPosY = 0\n\n@JvmOverloads\nconstructor(\n        context: Context,\n        attrs: AttributeSet? = null)\n        : super(context, attrs){\n    setPageTransformer(false, DefaultTransformer())\n}\n\nprivate fun swapTouchEvent(event: MotionEvent): MotionEvent {\n    val width = width.toFloat()\n    val height = height.toFloat()\n\n    val swappedX = event.y / height * width\n    val swappedY = event.x / width * height\n\n    event.setLocation(swappedX, swappedY)\n\n    return event\n}\n\noverride fun onInterceptTouchEvent(event: MotionEvent): Boolean {\n\n    var y : Int = event.rawY.toInt()\n\n    return when (event.action) {\n\n        MotionEvent.ACTION_DOWN -&gt; {\n            originalPosY = y\n            val intercept = super.onInterceptTouchEvent(swapTouchEvent(event))\n            swapTouchEvent(event)\n            false\n        }\n\n        MotionEvent.ACTION_MOVE -&gt; {\n\n            val intercept = super.onInterceptTouchEvent(swapTouchEvent(event))\n            val i = swapTouchEvent(event)\n            true\n\n        }\n\n        MotionEvent.ACTION_UP -&gt; {\n\n            if (Math.abs(originalPosY - y) &gt; 10) {\n                super.onInterceptTouchEvent(swapTouchEvent(event))\n                val i = swapTouchEvent(event)\n                true\n            }else\n                false\n        }\n\n        else -&gt; super.onInterceptTouchEvent(swapTouchEvent(event))\n\n    }\n}\n\noverride fun onTouchEvent(event: MotionEvent): Boolean = super.onTouchEvent(swapTouchEvent(event))\n}\n</code></pre>\n\n<p>The result is not all accurate that I want. If someone can improve it, it will be welcome </p>\n"}], "owner": {"reputation": 885, "user_id": 1201592, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4e0125ac022d4861c0e71e4e8701fff1?s=128&d=identicon&r=PG", "display_name": "Sami Issa", "link": "https://stackoverflow.com/users/1201592/sami-issa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 47345677, "answer_count": 1, "score": 0, "last_activity_date": 1526029784, "creation_date": 1510765049, "last_edit_date": 1526029766, "question_id": 47313159, "link": "https://stackoverflow.com/questions/47313159/custom-vertical-viewpager-not-work-with-onclick-listener-on-a-child-view", "title": "Custom vertical viewpager not work with onClick listener on a child view", "body": "<p>I have this custom ViewPager created from here (<a href=\"https://stackoverflow.com/questions/13477820/android-vertical-viewpager\">Android: Vertical ViewPager</a>):</p>\n\n<pre><code>class VerticalViewPager : ViewPager {\n\n@JvmOverloads\nconstructor(\n        context: Context,\n        attrs: AttributeSet? = null)\n        : super(context, attrs){\n    setPageTransformer(false, DefaultTransformer())\n    overScrollMode = OVER_SCROLL_NEVER\n}\n\noverride fun onInterceptTouchEvent(ev: MotionEvent): Boolean {\n    val intercepted = super.onInterceptTouchEvent(swapXY(ev))\n    swapXY(ev) // return touch coordinates to original reference frame for any child views\n    return intercepted\n}\n\noverride fun onTouchEvent(ev: MotionEvent?): Boolean {\n    return super.onTouchEvent(ev)\n}\n\n/**\n * Swaps the X and Y coordinates of your touch event.\n */\nprivate fun swapXY(ev: MotionEvent): MotionEvent {\n    val width = width.toFloat()\n    val height = height.toFloat()\n\n    val newX = ev.y / height * width\n    val newY = ev.x / width * height\n\n    ev.setLocation(newX, newY)\n\n    return ev\n}\n\nprivate class VerticalPageTransformer : ViewPager.PageTransformer{\n    override fun transformPage(view: View, position: Float) {\n        if (position &lt; -1) { // [-Infinity,-1)\n            // This page is way off-screen to the left.\n            view.alpha = 0f\n\n        } else if (position &lt;= 1) { // [-1,1]\n            view.alpha = 1f\n\n            // Counteract the default slide transition\n            view.translationX = view.getWidth() * -position\n\n            //set Y position to swipe in from top\n            val yPosition = position * view.getHeight()\n            view.translationY = yPosition\n\n        } else { // (1,+Infinity]\n            // This page is way off-screen to the right.\n            view.alpha = 0f\n        }\n    }\n\n}\n\n}\n</code></pre>\n\n<p>I use an adapter that loads an ImageView inside each page. This ImageView has a onClickListener.</p>\n\n<pre><code>open class VerticalViewPagerAdapter(var mContext: Context, val photos : RealmList&lt;ProfilePhoto&gt;?, onPhotoClick: OnPhotoClick?) : PagerAdapter() {\n\nvar mLayoutInflater : LayoutInflater? = null\nval onPhotoListener = onPhotoClick\n\ninit {\n    mLayoutInflater = mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n}\n\noverride fun getCount(): Int {\n    return photos?.size!!\n}\n\noverride fun isViewFromObject(view: View, `object`: Any): Boolean {\n    return view === `object` as FrameLayout\n}\n\noverride fun instantiateItem(container: ViewGroup, position: Int): Any {\n    val itemView = mLayoutInflater?.inflate(R.layout.view_image_profile_viewpager_item, container, false)\n\n    val imageView = itemView?.findViewById(R.id.profileImageItemIv) as ImageView\n\n    imageView.setOnClickListener{\n        onPhotoListener?.onPhotoClick(position)\n    }\n\n    imageView.loadUrlImage(photos!![position]?.photo)\n\n    container.addView(itemView)\n\n    return itemView\n}\n\noverride fun destroyItem(container: ViewGroup, position: Int, `object`: Any) {\n    container.removeView(`object` as FrameLayout)\n}\n}\n</code></pre>\n\n<p>The swipe on the custom viewpager doesn't work if the ImageView has this listener. If I remove the listener, works fine.</p>\n\n<p>Anybody know what can be the problem?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1510759615, "post_id": 47311135, "comment_id": 81573001, "body": "Cast the <code>getTag</code> result using <code>as ItemClickSupport?</code> instead?"}, {"owner": {"reputation": 4917, "user_id": 549978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QGiga.png?s=128&g=1", "display_name": "blizzard", "link": "https://stackoverflow.com/users/549978/blizzard"}, "edited": false, "score": 2, "creation_date": 1510759638, "post_id": 47311135, "comment_id": 81573020, "body": "You need to use <code>as?</code> instead of <code>as</code>. Using <code>as</code> results in force typecasting like <code>(ItemClickSupport)null</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1308, "user_id": 2581809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33afb2c1d879183a3b1e0f9418dd3195?s=128&d=identicon&r=PG", "display_name": "Ekeko", "link": "https://stackoverflow.com/users/2581809/ekeko"}, "is_accepted": true, "score": 1, "last_activity_date": 1510787987, "creation_date": 1510787987, "answer_id": 47318987, "question_id": 47311135, "link": "https://stackoverflow.com/questions/47311135/kotlin-typecastexception-on-view-gettag/47318987#47318987", "title": "Kotlin - TypeCastException on view.getTag()", "body": "<p>From the Kotlin reference (<a href=\"https://kotlinlang.org/docs/reference/typecasts.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/typecasts.html</a>):</p>\n\n<blockquote>\n  <p><strong>\"Unsafe\" cast operator</strong></p>\n  \n  <p>Usually, the cast operator throws an exception if the cast is not\n  possible. Thus, we call it unsafe. The unsafe cast in Kotlin is done\n  by the infix operator as (see operator precedence):</p>\n\n<pre><code>val x: String = y as String\n</code></pre>\n  \n  <p>Note that null cannot be cast to String as this type is not nullable,\n  i.e. if y is null, the code above throws an exception. In order to\n  match Java cast semantics we have to have nullable type at cast right\n  hand side, like:</p>\n\n<pre><code>val x: String? = y as String?\n</code></pre>\n</blockquote>\n\n<p>You can also use the so called \"Safe\" (nullable) cast operator which, as far as I know, is equivalent:</p>\n\n<pre><code>val x: String? = y as? String\n</code></pre>\n\n<p>So in your specific case:</p>\n\n<pre><code>var support: ItemClickSupport? = view.getTag(R.id.item_click_support) as ItemClickSupport?\n</code></pre>\n\n<p>or</p>\n\n<pre><code>var support: ItemClickSupport? = view.getTag(R.id.item_click_support) as? ItemClickSupport\n</code></pre>\n"}], "owner": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1182, "favorite_count": 0, "accepted_answer_id": 47318987, "answer_count": 1, "score": 0, "last_activity_date": 1510787987, "creation_date": 1510759390, "question_id": 47311135, "link": "https://stackoverflow.com/questions/47311135/kotlin-typecastexception-on-view-gettag", "title": "Kotlin - TypeCastException on view.getTag()", "body": "<p>I have got a class called ItemClickSupport that attaches an ItemClick to a RecyclerView:</p>\n\n<p>This is the init function:</p>\n\n<pre><code>init {\n        mRecyclerView.setTag(R.id.item_click_support, this)\n        mRecyclerView.addOnChildAttachStateChangeListener(mAttachListener)\n    }\n</code></pre>\n\n<p>and have a <code>companion object</code> to add it to the recyclerView:</p>\n\n<pre><code>companion object {\n\n        fun addTo(view: RecyclerView): ItemClickSupport {\n            var support: ItemClickSupport? = view.getTag(R.id.item_click_support) as ItemClickSupport\n            if (support == null) {\n                support = ItemClickSupport(view)\n            }\n            return support\n        }\n}\n</code></pre>\n\n<p>When I run my app and try to add the clickListener to the recyclerView, I get a </p>\n\n<blockquote>\n  <p>Caused by: kotlin.TypeCastException: null cannot be cast to non-null type com.dancam.subscriptions.Support.ItemClickSupport\n                        at com.dancam.subscriptions.Support.ItemClickSupport$Companion.addTo(ItemClickSupport.kt:80)\n                        at com.dancam.subscriptions.AddSubscription.AddSubscription.onCreate(AddSubscription.kt:79)</p>\n</blockquote>\n\n<p>with the first error pointing to this line in the <code>addTo</code> function:</p>\n\n<pre><code>var support: ItemClickSupport? = view.getTag(R.id.item_click_support) as ItemClickSupport\n</code></pre>\n\n<p>and the second one to this in my <code>main_activity</code>:</p>\n\n<pre><code>ItemClickSupport.addTo(recyclerView!!).setOnItemClickListener(\n                object: ItemClickSupport.OnItemClickListener {\n                    override fun onItemClicked(recyclerView: RecyclerView, position: Int, v: View ) {\n                        ...\n                    }\n                })\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["unit-testing", "kotlin", "rx-java", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 7666, "user_id": 1241193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0331e5e748a0ac3860b68f6cac130ef1?s=128&d=identicon&r=PG", "display_name": "Bob Dalgleish", "link": "https://stackoverflow.com/users/1241193/bob-dalgleish"}, "is_accepted": false, "score": 0, "last_activity_date": 1510765623, "creation_date": 1510765623, "answer_id": 47313344, "question_id": 47310876, "link": "https://stackoverflow.com/questions/47310876/how-to-write-proper-test-for-reactive-interface-repository-which-returns-observa/47313344#47313344", "title": "How to write proper test for reactive interface repository which returns Observable only when there is some event, how to mock triggering that event", "body": "<p>Create a <code>PublishSubject&lt;Location&gt;</code> variable. Create an anonymous sub-class of <code>RxLocationRepository</code>, where the <code>onLocationUpdate()</code> method returns the variable. Then emit values into the variable to provide new locations.</p>\n"}], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510765623, "creation_date": 1510758696, "last_edit_date": 1510759692, "question_id": 47310876, "link": "https://stackoverflow.com/questions/47310876/how-to-write-proper-test-for-reactive-interface-repository-which-returns-observa", "title": "How to write proper test for reactive interface repository which returns Observable only when there is some event, how to mock triggering that event", "body": "<p>I am trying to write proper test for my reactive repository, which just listen for location changes. I don't want to actually listen for location changes and just 'invoke' new location change multiple times with just created custom Location.</p>\n\n<p>Here is the repository and its function for gathering locations:</p>\n\n<pre><code>interface RxLocationRepository {\n\n@SuppressLint(\"MissingPermission\")\nfun onLocationUpdate(): Observable&lt;Location&gt;\n\nfun stopLocationUpdates()\n}\n</code></pre>\n\n<p>Here is the implementation of it, which actually DON'T MATTER because i don't want to listen for real location updates, but i want to show you that it is just reactive implementation for listen to LocationManager updates:</p>\n\n<pre><code>class LocationNativeRepository(\n    val locationManager: LocationManager,\n    val geoEventsDistanceMeters: Int,\n    val geoEventsIntervalSeconds: Int) : RxLocationRepository{\n\nvar locationToPopulate: Location = Location(LocationManager.GPS_PROVIDER)\nlateinit var mLocationCallbackNativeApi: LocationListener\nprivate val subject: BehaviorSubject&lt;Location&gt; = BehaviorSubject.createDefault(locationToPopulate)\nvar locationEmitter: Observable&lt;Location&gt; = subject.hide()\n\ninit {\n    configureNativeLocationEmitter()\n}\n\noverride fun onLocationUpdate(): Observable&lt;Location&gt; {\n    return locationEmitter\n}\n\n@SuppressLint(\"MissingPermission\")\noverride fun stopLocationUpdates() {\n    locationManager.removeUpdates(mLocationCallbackNativeApi)\n}\n\n\n@SuppressLint(\"MissingPermission\")\nprivate fun configureNativeLocationEmitter() {\n\n    mLocationCallbackNativeApi = object : LocationListener {\n\n        override fun onLocationChanged(location: Location) {\n            subject.onNext(location)\n        }\n\n        override fun onStatusChanged(provider: String, status: Int, extras: Bundle) {}\n\n        override fun onProviderEnabled(provider: String) {}\n\n        override fun onProviderDisabled(provider: String) {}\n\n    }\n\n    try {\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,\n                (geoEventsIntervalSeconds * 1000).toLong(),\n                geoEventsDistanceMeters.toFloat(),\n                mLocationCallbackNativeApi,\n                Looper.getMainLooper())\n    } catch (ignored: IllegalArgumentException) {\n        ignored.printStackTrace()\n    }\n\n    try {\n        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,\n                (geoEventsIntervalSeconds * 1000).toLong(),\n                geoEventsDistanceMeters.toFloat(),\n                mLocationCallbackNativeApi,\n                Looper.getMainLooper())\n    } catch (ignored: IllegalArgumentException) {\n        ignored.printStackTrace()\n    }\n }\n\n}\n</code></pre>\n\n<p>So how i can invoke this repository in my test to actually trigger the onLocationUpdate() method? So for example i will make it emit 3 times location like this:</p>\n\n<pre><code> val location = Location(\"test\").apply {\n        latitude = 1.234\n        longitude = 5.678\n        accuracy = 20f\n        time = Date().time\n    }\n</code></pre>\n"}, {"tags": ["android", "button", "kotlin", "android-constraintlayout"], "answers": [{"comments": [{"owner": {"reputation": 6407, "user_id": 1250929, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/89099b220ea58bae3f99779f7a8e33c9?s=128&d=identicon&r=PG", "display_name": "Kristy Welsh", "link": "https://stackoverflow.com/users/1250929/kristy-welsh"}, "edited": false, "score": 0, "creation_date": 1510760956, "post_id": 47311006, "comment_id": 81574104, "body": "Very nice.  I implemented and the two buttons are up against each other - what do I have to do to put a space between them?"}, {"owner": {"reputation": 2342, "user_id": 1911021, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f62c6f16ce364e68037229b11cebec7c?s=128&d=identicon&r=PG", "display_name": "Jorge E. Hern&#225;ndez", "link": "https://stackoverflow.com/users/1911021/jorge-e-hern%c3%a1ndez"}, "reply_to_user": {"reputation": 6407, "user_id": 1250929, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/89099b220ea58bae3f99779f7a8e33c9?s=128&d=identicon&r=PG", "display_name": "Kristy Welsh", "link": "https://stackoverflow.com/users/1250929/kristy-welsh"}, "edited": false, "score": 0, "creation_date": 1510766515, "post_id": 47311006, "comment_id": 81577991, "body": "@KristyWelsh, can you share an screenshot?"}, {"owner": {"reputation": 6407, "user_id": 1250929, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/89099b220ea58bae3f99779f7a8e33c9?s=128&d=identicon&r=PG", "display_name": "Kristy Welsh", "link": "https://stackoverflow.com/users/1250929/kristy-welsh"}, "edited": false, "score": 0, "creation_date": 1510768422, "post_id": 47311006, "comment_id": 81579080, "body": "added screen shot."}, {"owner": {"reputation": 2342, "user_id": 1911021, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f62c6f16ce364e68037229b11cebec7c?s=128&d=identicon&r=PG", "display_name": "Jorge E. Hern&#225;ndez", "link": "https://stackoverflow.com/users/1911021/jorge-e-hern%c3%a1ndez"}, "reply_to_user": {"reputation": 6407, "user_id": 1250929, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/89099b220ea58bae3f99779f7a8e33c9?s=128&d=identicon&r=PG", "display_name": "Kristy Welsh", "link": "https://stackoverflow.com/users/1250929/kristy-welsh"}, "edited": false, "score": 0, "creation_date": 1510770430, "post_id": 47311006, "comment_id": 81580199, "body": "Your style <code>R.style.NeutrifProText_BooleanButton</code> is maybe  applying some margins to your buttons. If that&#39;s not the case, then you could try by adding some margins, see the edited answer."}], "tags": [], "owner": {"reputation": 2342, "user_id": 1911021, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f62c6f16ce364e68037229b11cebec7c?s=128&d=identicon&r=PG", "display_name": "Jorge E. Hern&#225;ndez", "link": "https://stackoverflow.com/users/1911021/jorge-e-hern%c3%a1ndez"}, "is_accepted": true, "score": 4, "last_activity_date": 1510770689, "last_edit_date": 1510770689, "creation_date": 1510759020, "answer_id": 47311006, "question_id": 47310251, "link": "https://stackoverflow.com/questions/47310251/align-two-buttons-center-horizontally-programmatically-using-constraint-layout/47311006#47311006", "title": "Align two buttons center horizontally programmatically using constraint layout", "body": "<p>I created this layout XML:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/myConstraintLayout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;Button\n        android:id=\"@+id/button1\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Button 1\" /&gt;\n\n    &lt;Button\n        android:id=\"@+id/button2\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Button 2\" /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>As you can see, there are no constraints, this is for simplicity since you are creating the <code>Button</code>s programmatically.</p>\n\n<p>Now, in the <code>onCreate()</code> method (you can do it wherever you want), I do this:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    val constraintLayout = findViewById&lt;ConstraintLayout&gt;(R.id.myConstraintLayout)\n\n    val constraintSet = ConstraintSet()\n    constraintSet.clone(constraintLayout)\n    constraintSet.connect(R.id.button1, ConstraintSet.START, ConstraintSet.PARENT_ID, ConstraintSet.START)\n    constraintSet.connect(R.id.button1, ConstraintSet.END, R.id.button2, ConstraintSet.START)\n    constraintSet.setHorizontalChainStyle(R.id.button1, ConstraintSet.CHAIN_SPREAD)\n\n    constraintSet.connect(R.id.button2, ConstraintSet.END, ConstraintSet.PARENT_ID, ConstraintSet.END)\n    constraintSet.connect(R.id.button2, ConstraintSet.START, R.id.button1, ConstraintSet.END)\n    constraintSet.applyTo(constraintLayout)\n}\n</code></pre>\n\n<p>Note, this is the magic line:</p>\n\n<p><code>constraintSet.setHorizontalChainStyle(R.id.button1, ConstraintSet.CHAIN_SPREAD)</code></p>\n\n<p>So, your <code>ConstraintSet</code> code should look like this:</p>\n\n<pre><code>val clid = view?.task_constraint_layout?.id ?: 0\nval constraintSet = ConstraintSet()\nconstraintSet.clone(view?.task_constraint_layout)\nconstraintSet.connect(idYes, ConstraintSet.TOP, descid, ConstraintSet.BOTTOM, topMargin)\nconstraintSet.connect(idNo, ConstraintSet.TOP, descid, ConstraintSet.BOTTOM, topMargin)\n\nconstraintSet.connect(idYes, ConstraintSet.START, ConstraintSet.PARENT_ID, ConstraintSet.START, buttonSideMargin)\nconstraintSet.connect(idYes, ConstraintSet.END, idNo, ConstraintSet.START)\n// This line does the magic\nconstraintSet.setHorizontalChainStyle(idYes, ConstraintSet.CHAIN_SPREAD)\n\nconstraintSet.connect(idNo, ConstraintSet.START, idYes, ConstraintSet.END)\nconstraintSet.connect(idNo, ConstraintSet.END, ConstraintSet.PARENT_ID, ConstraintSet.END, buttonSideMargin)\nconstraintSet.applyTo(view?.task_constraint_layout)\n</code></pre>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>Verify your style <code>R.style.NeutrifProText_BooleanButton</code> is not applyng big margins to your buttons. Otherwise, if there is no space between your buttons, try to add some margins between them:</p>\n\n<pre><code>constraintSet.connect(idYes, ConstraintSet.START, ConstraintSet.PARENT_ID, ConstraintSet.START, buttonSideMargin)\nconstraintSet.connect(idYes, ConstraintSet.END, idNo, ConstraintSet.START, yourMarginValue /* Get it the same way you are getting buttonSideMargin */)\n// This line does the magic\nconstraintSet.setHorizontalChainStyle(idYes, ConstraintSet.CHAIN_SPREAD)\n\nconstraintSet.connect(idNo, ConstraintSet.START, idYes, ConstraintSet.END, yourMarginValue /* Get it the same way you are getting buttonSideMargin */)\nconstraintSet.connect(idNo, ConstraintSet.END, ConstraintSet.PARENT_ID, ConstraintSet.END, buttonSideMargin)\nconstraintSet.applyTo(view?.task_constraint_layout)\n</code></pre>\n\n<p>This is the final result of my example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/20VmJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/20VmJ.png\" alt=\"Constraint Layout Horizontal Chain Style\"></a></p>\n"}], "owner": {"reputation": 6407, "user_id": 1250929, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/89099b220ea58bae3f99779f7a8e33c9?s=128&d=identicon&r=PG", "display_name": "Kristy Welsh", "link": "https://stackoverflow.com/users/1250929/kristy-welsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2729, "favorite_count": 0, "accepted_answer_id": 47311006, "answer_count": 1, "score": 1, "last_activity_date": 1510781131, "creation_date": 1510756851, "last_edit_date": 1510781131, "question_id": 47310251, "link": "https://stackoverflow.com/questions/47310251/align-two-buttons-center-horizontally-programmatically-using-constraint-layout", "title": "Align two buttons center horizontally programmatically using constraint layout", "body": "<p>I'm trying to programmatically use constraint layout to center two buttons of equal size horizontally at the center of the screen.  Here's what I have so far: </p>\n\n<pre><code>    val view = super.onCreateView(inflater, container, savedInstanceState)\n\n\n    buttonTrue = Button(activity, null, 0, R.style.NeutrifProText_BooleanButton)\n    buttonTrue?.id = View.generateViewId()\n    buttonTrue?.text = task?.booleanTrueLabel() ?: getString(R.string.button_yes)\n    buttonTrue?.gravity = Gravity.CENTER_HORIZONTAL\n    buttonTrue?.setOnClickListener { listener?.onTaskContinue(getAnswer(true)) }\n\n    buttonFalse = Button(activity, null, 0, R.style.NeutrifProText_BooleanButton)\n    buttonFalse?.id = View.generateViewId()\n    buttonFalse?.text = task?.booleanFalseLabel() ?: getString(R.string.button_no)\n    buttonFalse?.gravity = Gravity.CENTER_HORIZONTAL\n    buttonFalse?.setOnClickListener { listener?.onTaskContinue(getAnswer(false)) }\n\n    buttonTrue?.layoutParams = ConstraintLayout.LayoutParams(0, ConstraintLayout.LayoutParams.WRAP_CONTENT)\n    buttonFalse?.layoutParams = ConstraintLayout.LayoutParams(0, ConstraintLayout.LayoutParams.WRAP_CONTENT)\n    view?.task_constraint_layout?.addView(buttonTrue)\n    view?.task_constraint_layout?.addView(buttonFalse)\n\n    val idYes = buttonTrue?.id ?: 0\n    val idNo = buttonFalse?.id ?: 0\n    val descid = view?.task_description?.id ?: 0\n\n    val clid = view?.task_constraint_layout?.id ?: 0\n    val constraintSet = ConstraintSet()\n    constraintSet.clone(view?.task_constraint_layout)\n    constraintSet.connect(idYes, ConstraintSet.TOP, descid, ConstraintSet.BOTTOM, topMargin)\n    constraintSet.connect(idNo, ConstraintSet.TOP, descid, ConstraintSet.BOTTOM, topMargin)\n\n    constraintSet.connect(idYes, ConstraintSet.START, clid, ConstraintSet.START, buttonSideMargin)\n\n    constraintSet.connect(idNo, ConstraintSet.START, idYes, ConstraintSet.END, buttonSideMargin)\n    constraintSet.connect(idNo, ConstraintSet.END, clid, ConstraintSet.END, buttonSideMargin)\n    constraintSet.applyTo(view?.task_constraint_layout)\n</code></pre>\n\n<p>This results in: </p>\n\n<p><a href=\"https://i.stack.imgur.com/pAsOR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pAsOR.png\" alt=\"layout\"></a></p>\n\n<p>How do I get the buttons to be spaced evenly?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-dynamic-links"], "comments": [{"owner": {"reputation": 58671, "user_id": 6509751, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/260caa996ae8ac9fcee35487aa8d7c81?s=128&d=identicon&r=PG&f=1", "display_name": "creativecreatorormaybenot", "link": "https://stackoverflow.com/users/6509751/creativecreatorormaybenot"}, "edited": false, "score": 0, "creation_date": 1510757684, "post_id": 47307983, "comment_id": 81571498, "body": "I think this might mean that it is in fact not available, have you contacted the Firebase support?"}, {"owner": {"reputation": 2171, "user_id": 2546685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dsn7k.png?s=128&g=1", "display_name": "Oleksiy Ivanov", "link": "https://stackoverflow.com/users/2546685/oleksiy-ivanov"}, "edited": false, "score": 0, "creation_date": 1510906555, "post_id": 47307983, "comment_id": 81643839, "body": "What device are you using? What is GMS Core version? Does device have Google Play services?"}, {"owner": {"reputation": 2171, "user_id": 2546685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dsn7k.png?s=128&g=1", "display_name": "Oleksiy Ivanov", "link": "https://stackoverflow.com/users/2546685/oleksiy-ivanov"}, "reply_to_user": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "edited": false, "score": 0, "creation_date": 1511199817, "post_id": 47307983, "comment_id": 81749096, "body": "@bugs  There is no questions in stackoverflow that mention &quot;DynamicLinks.API is not available on this device.&quot;. How the question you linked as original-duplicate will help people to fix this problem?"}, {"owner": {"reputation": 4346, "user_id": 6375113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JHg5K.jpg?s=128&g=1", "display_name": "Bugs", "link": "https://stackoverflow.com/users/6375113/bugs"}, "reply_to_user": {"reputation": 2171, "user_id": 2546685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dsn7k.png?s=128&g=1", "display_name": "Oleksiy Ivanov", "link": "https://stackoverflow.com/users/2546685/oleksiy-ivanov"}, "edited": false, "score": 0, "creation_date": 1511216722, "post_id": 47307983, "comment_id": 81758054, "body": "@oleksiy check the revisions."}, {"owner": {"reputation": 3208, "user_id": 449007, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/54a73ed602ae807913554ea6816d01c5?s=128&d=identicon&r=PG", "display_name": "yozhik", "link": "https://stackoverflow.com/users/449007/yozhik"}, "edited": false, "score": 1, "creation_date": 1535442381, "post_id": 47307983, "comment_id": 91055436, "body": "I have the same issue: 17: API: DynamicLinks.API is not available on this device. How did you solved it?"}], "owner": {"reputation": 61, "user_id": 5612652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hpKUk.png?s=128&g=1", "display_name": "Juangra13", "link": "https://stackoverflow.com/users/5612652/juangra13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1141, "favorite_count": 0, "closed_date": 1510770513, "answer_count": 0, "score": 5, "last_activity_date": 1510844451, "creation_date": 1510750449, "last_edit_date": 1510844451, "question_id": 47307983, "link": "https://stackoverflow.com/questions/47307983/dynamiclinks-api-is-not-available-on-this-device", "closed_reason": "Duplicate", "title": "DynamicLinks.API is not available on this device", "body": "<p>I have implemented Dynamics Links in my instant app, when click in link open the instant app but in to method getDynamicLink(intent) it shows me the following error:</p>\n\n<pre><code>com.google.android.gms.common.api.ApiException: 17: API: DynamicLinks.API is not available on this device.\n                                                        at com.google.android.gms.common.internal.zzb.zzz(Unknown Source)\n                                                        at com.google.android.gms.common.api.internal.zzg.zzu(Unknown Source)\n                                                        at com.google.android.gms.common.api.internal.zze.zzt(Unknown Source)\n                                                        at com.google.android.gms.common.api.internal.zzbr.zzx(Unknown Source)\n                                                        at com.google.android.gms.common.api.internal.zzbr.onConnectionFailed(Unknown Source)\n                                                        at com.google.android.gms.common.internal.zzad.onConnectionFailed(Unknown Source)\n                                                        at com.google.android.gms.common.internal.zzn.zzj(Unknown Source)\n                                                        at com.google.android.gms.common.internal.zze.zzv(Unknown Source)\n                                                        at com.google.android.gms.common.internal.zzi.zzakh(Unknown Source)\n                                                        at com.google.android.gms.common.internal.zzh.handleMessage(Unknown Source)\n                                                        at android.os.Handler.dispatchMessage(Handler.java:102)\n                                                        at android.os.Looper.loop(Looper.java:234)\n                                                        at android.os.HandlerThread.run(HandlerThread.java:61)\n</code></pre>\n\n<p>The code in my class is the following:</p>\n\n<pre><code>FirebaseDynamicLinks.getInstance()\n            .getDynamicLink(intent)\n            .addOnSuccessListener(this)\n            {\n                pendingDynamicLinkData -&gt;\n                // Get deep link from result (may be null if no link is found)\n                var deepLink: Uri? = null\n                if (pendingDynamicLinkData != null) {\n                    deepLink = pendingDynamicLinkData.link\n                }\n\n\n                showAlertDialog(deepLink.toString())\n                // Handle the deep link. For example, open the linked\n                // content, or apply promotional credit to the user's\n                // account.\n                // ...\n\n                // ...\n            }\n            .addOnFailureListener(this) { e -&gt; Log.w(\"FailureListener\", \"getDynamicLink:onFailure\", e) }\n</code></pre>\n\n<p>Please help me.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2041, "user_id": 2686502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef5ceabeb502f0e33b63ea337f618649?s=128&d=identicon&r=PG&f=1", "display_name": "jayeshsolanki93", "link": "https://stackoverflow.com/users/2686502/jayeshsolanki93"}, "edited": false, "score": 0, "creation_date": 1510750011, "post_id": 47307782, "comment_id": 81565817, "body": "Check this: <a href=\"https://android.jlelse.eu/this-simple-trick-will-have-you-creating-multiple-returns-in-kotlin-37b9fe2a2f9f\" rel=\"nofollow noreferrer\">This simple trick will have you creating multiple returns in Kotlin.</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1231, "user_id": 2143225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NJ614.jpg?s=128&g=1", "display_name": "Markus Penguin", "link": "https://stackoverflow.com/users/2143225/markus-penguin"}, "is_accepted": false, "score": 3, "last_activity_date": 1510750253, "creation_date": 1510750253, "answer_id": 47307908, "question_id": 47307782, "link": "https://stackoverflow.com/questions/47307782/how-to-return-multiple-values-from-a-function-in-kotlin-like-we-do-in-swift/47307908#47307908", "title": "How to return multiple values from a function in Kotlin like we do in Swift?", "body": "<p>According to the Kotlin documentation (<a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html#example-returning-two-values-from-a-function\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/multi-declarations.html#example-returning-two-values-from-a-function</a>) you can achieve it like that:</p>\n\n<pre><code>data class TimeData(val hour: Int, val minute: Int, val second: Int)\n\nfun getTime(): TimeData {\n    // do your calculations\n\n    return TimeData(hour, minute, second)\n}\n\n// Get the time.\nval (hour, minute, second) = getTime()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8585, "user_id": 948041, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/BRP6Q.jpg?s=128&g=1", "display_name": "Shruti", "link": "https://stackoverflow.com/users/948041/shruti"}, "is_accepted": false, "score": 0, "last_activity_date": 1510750271, "creation_date": 1510750271, "answer_id": 47307919, "question_id": 47307782, "link": "https://stackoverflow.com/questions/47307782/how-to-return-multiple-values-from-a-function-in-kotlin-like-we-do-in-swift/47307919#47307919", "title": "How to return multiple values from a function in Kotlin like we do in Swift?", "body": "<p>you can return multiple values like shown below </p>\n\n<pre><code>data class Result(val result: Int, val status: Status)\nfun function(...): Result {\n    // computations\n\n    return Result(result, status)\n}\n\n// Now, to use this function:\nval (result, status) = function(...)\n</code></pre>\n\n<p>see this <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"nofollow noreferrer\">documentation</a> </p>\n\n<p>for more example see this <a href=\"https://rosettacode.org/wiki/Return_multiple_values#Kotlin\" rel=\"nofollow noreferrer\">link</a></p>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 136, "last_activity_date": 1510750833, "creation_date": 1510750833, "answer_id": 47308092, "question_id": 47307782, "link": "https://stackoverflow.com/questions/47307782/how-to-return-multiple-values-from-a-function-in-kotlin-like-we-do-in-swift/47308092#47308092", "title": "How to return multiple values from a function in Kotlin like we do in Swift?", "body": "<p>You can't create arbitrary tuples in Kotlin, instead, you can use <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"noreferrer\">data classes</a>. One option is using the built in <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html\" rel=\"noreferrer\"><code>Pair</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-triple/index.html\" rel=\"noreferrer\"><code>Triple</code></a> classes that are generic and can hold two or three values, respectively. You can use these combined with <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"noreferrer\">destructuring declarations</a> like this:</p>\n\n<pre><code>fun getPair() = Pair(1, \"foo\")\n\nval (num, str) = getPair()\n</code></pre>\n\n<p>You can also destructure a <code>List</code> or <code>Array</code>, for up to the first <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/component5.html\" rel=\"noreferrer\">5 elements</a>:</p>\n\n<pre><code>fun getList() = listOf(1, 2, 3, 4, 5)\n\nval (a, b, c, d, e) = getList()\n</code></pre>\n\n<p>The most idiomatic way however would be to define your own data class, which allows you to return a meaningful type from your function:</p>\n\n<pre><code>data class Time(val hour: Int, val minute: Int, val second: Int)\n\nfun getTime(): Time {\n    ...\n    return Time(hour, minute, second)\n}\n\nval (hour, minute, second) = getTime()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": false, "score": 0, "last_activity_date": 1510753451, "creation_date": 1510753451, "answer_id": 47309019, "question_id": 47307782, "link": "https://stackoverflow.com/questions/47307782/how-to-return-multiple-values-from-a-function-in-kotlin-like-we-do-in-swift/47309019#47309019", "title": "How to return multiple values from a function in Kotlin like we do in Swift?", "body": "<p>There is no tuple in Kotlin. Alternatively, you can use <a href=\"https://kotlinlang.org/docs/reference/data-classes.html#data-classes\" rel=\"nofollow noreferrer\">data class</a> with <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html#destructuring-declarations\" rel=\"nofollow noreferrer\">destructuring declaration</a>.</p>\n\n<pre><code>data class Time(val hour: Int, val minute: Int, val second: Int)\n\nfunc getTime(): Time {\n    ...\n    return Time(hour, minute, second)\n}\n\n//Usage\nval time = getTime()\nprintln(\"${time.hour}:${time.minute}:${time.second}\")\n//Or\nval (hour, minute, second) = getTime()\nprintln(\"${hour}:${minute}:${second}\")\n</code></pre>\n\n<p>If you don't want to create data class for each specific case, you may create some generic data classes and use <code>typealias</code> for clarity.</p>\n\n<pre><code>data class Two&lt;A, B&gt;(val a: A, val b: B)\ndata class Three&lt;A, B, C&gt;(val a: A, val b: B, val c: C)\ndata class Four&lt;A, B, C, D&gt;(val a: A, val b: B, val c: C, val d: D)\n...\n\ntypealias Time = Three&lt;Int, Int, Int&gt;\n</code></pre>\n\n<p>But, obviously, the disadvantage is that you must make use of destructuring declaration in order to give it a proper property name.</p>\n\n<pre><code>val time = getTime()\nprintln(\"${time.a}:${time.b}:${time.c}\")\n\nval (hour, minute, second) = getTime()    //destructuring declaration\nprintln(\"${hour}:${minute}:${second}\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1308, "user_id": 2581809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33afb2c1d879183a3b1e0f9418dd3195?s=128&d=identicon&r=PG", "display_name": "Ekeko", "link": "https://stackoverflow.com/users/2581809/ekeko"}, "is_accepted": false, "score": 15, "last_activity_date": 1510790443, "creation_date": 1510790443, "answer_id": 47319368, "question_id": 47307782, "link": "https://stackoverflow.com/questions/47307782/how-to-return-multiple-values-from-a-function-in-kotlin-like-we-do-in-swift/47319368#47319368", "title": "How to return multiple values from a function in Kotlin like we do in Swift?", "body": "<p>It seems that you are aware of the obvious answer of creating a specific class to handle time. So I guess you are trying to avoid the small hassle of creating a class, or accessing each element of an array, etc. and are looking for the shortest solution in terms of extra code. I would suggest:</p>\n\n<pre><code>fun getTime(): Triple&lt;Int, Int, Int&gt; {\n    ...\n    return Triple( hour, minute, second)\n}\n</code></pre>\n\n<p>and use it with deconstruction:</p>\n\n<pre><code>var (a, b, c) = getTime()\n</code></pre>\n\n<p>If you need 4 or 5 return values (you cannot deconstruct more than 5), go with <code>Array</code>:</p>\n\n<pre><code>fun getTime(): Array&lt;Int&gt; {\n    ...\n    return arrayOf( hour, minute, second, milisec)\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>var (a, b, c, d) = getTime()\n</code></pre>\n\n<p>P.S.: you can use less variables than there are values when deconstructing, like <code>var (a, b) = getTime()</code> but you cannot use more or you'll get an <code>ArrayIndexOutOfBoundsException</code></p>\n"}, {"comments": [{"owner": {"reputation": 3278, "user_id": 3036320, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002410010067/picture?type=large", "display_name": "Ahamadullah Saikat", "link": "https://stackoverflow.com/users/3036320/ahamadullah-saikat"}, "edited": false, "score": 0, "creation_date": 1616242739, "post_id": 55454114, "comment_id": 117943711, "body": "Brilliant Solution."}], "tags": [], "owner": {"reputation": 555, "user_id": 1877019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GkI5H.jpg?s=128&g=1", "display_name": "Mahabub Karim", "link": "https://stackoverflow.com/users/1877019/mahabub-karim"}, "is_accepted": false, "score": 8, "last_activity_date": 1554118326, "creation_date": 1554118326, "answer_id": 55454114, "question_id": 47307782, "link": "https://stackoverflow.com/questions/47307782/how-to-return-multiple-values-from-a-function-in-kotlin-like-we-do-in-swift/55454114#55454114", "title": "How to return multiple values from a function in Kotlin like we do in Swift?", "body": "<p>While, generally, a function can return only a single value, in Kotlin, by leveraging the benefits of the Pair type and destructuring declarations, we can return two variables from a function. Consider the following example:</p>\n\n<pre><code>fun getUser():Pair&lt;Int,String&gt; {//(1) \n  return Pair(1,\"Rivu\") \n} \n\nfun main(args: Array&lt;String&gt;) { \n  val (userID,userName) = getUser()//(2) \n  println(\"User ID: $userID t User Name: $userName\") \n} \n</code></pre>\n\n<p>From: Functional Kotlin book</p>\n"}, {"tags": [], "owner": {"reputation": 1377, "user_id": 4997636, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0e510ee4fd34658df5624e5394b5bd87?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/4997636/jack"}, "is_accepted": false, "score": 2, "last_activity_date": 1573210866, "creation_date": 1573210866, "answer_id": 58765279, "question_id": 47307782, "link": "https://stackoverflow.com/questions/47307782/how-to-return-multiple-values-from-a-function-in-kotlin-like-we-do-in-swift/58765279#58765279", "title": "How to return multiple values from a function in Kotlin like we do in Swift?", "body": "<blockquote>\n  <p>Use Triple to return 3 values and Pair to return 2 values</p>\n</blockquote>\n\n<pre><code>class Book(val title: String, val author: String, val year: Int) {\n\n\nfun getTitleAuthor(): Pair&lt;String, String&gt; {\n    return (title to author)\n}\n\nfun getTitleAuthorYear(): Triple&lt;String, String, Int&gt; {\n    return Triple(title, author, year)\n}}\n</code></pre>\n"}], "owner": {"reputation": 1647, "user_id": 7676637, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b6c7df7d106931e84b857641ab1f70c5?s=128&d=identicon&r=PG&f=1", "display_name": "AwaisMajeed", "link": "https://stackoverflow.com/users/7676637/awaismajeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44100, "favorite_count": 9, "accepted_answer_id": 47308092, "answer_count": 7, "score": 76, "last_activity_date": 1617580687, "creation_date": 1510749906, "last_edit_date": 1596271042, "question_id": 47307782, "link": "https://stackoverflow.com/questions/47307782/how-to-return-multiple-values-from-a-function-in-kotlin-like-we-do-in-swift", "title": "How to return multiple values from a function in Kotlin like we do in Swift?", "body": "<p>How to return 3 separate data values of the same type (<code>Int</code>) from a function in Kotlin?</p>\n<p>I'm attempting to return the time of day, I need to return the Hour, Minute and Second as separate integers, but all in one go from the same function, is this possible?</p>\n<p>In swift we do it like following,</p>\n<pre><code>func getTime() -&gt; (Int, Int, Int) {\n    ...\n    return ( hour, minute, second)\n}\n</code></pre>\n<p>can we achieve this in Kotlin?</p>\n<p>P.S: I know I can use Array or Hashmap for this but I want to know if there exists something in Kotlin like it is in Swift.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1510746315, "post_id": 47306382, "comment_id": 81563315, "body": "Accessing non-final properties or calling non-final methods in constructors is generally a bad idea, both in Kotlin and Java. If you need certain values in your base class, you should try passing them up via constructor parameters."}, {"owner": {"reputation": 1453, "user_id": 2141659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfmvC.jpg?s=128&g=1", "display_name": "innov8", "link": "https://stackoverflow.com/users/2141659/innov8"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1510775967, "post_id": 47306382, "comment_id": 81583264, "body": "clearly on the &#39;is a bad idea&#39;...in fact you could say...&#39;will not work&#39; :) .   But i am looking at two aspects, one is the sub class is the use of the package, the package is the base class.   So the goal is to have all functionality possible in the base class and minimise code required in the sub class.  But you have given me the idea to test if accessing the delegated val as a parameter will force it to be initialised.  Messy but perhaps better than nothing"}], "owner": {"reputation": 1453, "user_id": 2141659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfmvC.jpg?s=128&g=1", "display_name": "innov8", "link": "https://stackoverflow.com/users/2141659/innov8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 535, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510745763, "creation_date": 1510745763, "question_id": 47306382, "link": "https://stackoverflow.com/questions/47306382/subclass-val-for-using-in-base-constructor", "title": "subclass val for using in base constructor", "body": "<p>I am producing a kotlin library which is an equivalent to an existing python library.  Producing an equivalent to code in another language can be a challenge.</p>\n\n<p>Specifically I have the case of a base class constructor method which makes use of a value which can be overridden in the base class.</p>\n\n<p>The challenge is that a val overridden in sub-class has not had the value applied prior to the base class constructor.  In python, some code in a sub class constructor can execute prior to calling the base class constructor, but in kotlin all code of the base class constructor executes first.</p>\n\n<p>But consider this kotlin code:</p>\n\n<pre><code>open class Base{\n    val simple = 3\n    open val open = 3\n    open val openGet = 3\n    open val getter get()= 3\n    open val getOpen get()= 3\n    open val getDelg by GetDelg(3)\n    init {\n        println(\"base simple $simple open $open openG $openGet \"+\n                \"getOpen $getOpen getter $getter \"+\n                \" getDelg $getDelg\")\n    }\n    //open fun add(a:Int,b:Int) = a + b\n}\n\nclass SubClass:Base(){\n    override val open = 4\n    override val openGet get()= 4\n    override val getter get() = 4\n    override val getOpen = 4\n    //override val getDelg by GetDelg(4)  //uncomment for null pointer\n    init {\n        println(\"sub simple $simple open $open openG $openGet \"+\n                \"getOpen $getOpen getter $getter \"+\n                \" getDelg $getDelg\")\n\n    }\n}\nclass GetDelg(val value:Int){\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): Int {\n        return value\n    }\n} \n</code></pre>\n\n<p>Open is 0 in the base class init because the code to set the value has not yet been run (not 3 as that is in super.open which is separate).</p>\n\n<p>openG, a value overridden by a get() method, perhaps unexpectedly returns the override value in both init() methods, so this is a possible approach for many cases, but not working in the specific case I am trying to solve.</p>\n\n<p>getOpen, a get() method in the base overridden by a simple initialisation, behaves as a simple initialised value overridden by a new initialise, which is to be unitialised in the base init() method</p>\n\n<p>getter() , a get() method overidden by another get() method returns the override value as does openG</p>\n\n<p>getDelg() actually generates a null pointer exception if called during  the base init() method, as the overridden value has not been calculated</p>\n\n<p>Note: I assume part of this behaviour is base on the fact that overridden properties are actually new distinct properties, so they do not inherit values from base class property which is still accessible via super..  This means, counter intuitively, that open in the base <code>init()</code> method, returns 0, while super.open in the subclass <code>init()</code> will return 3</p>\n\n<p>So the problem is, how can i override using a delegate, but still have the override delegate accessed in the base class init?</p>\n\n<p>My current thought is to move the value initialised in the base class to a lazy property, but I would like to have other ideas.</p>\n"}, {"tags": ["android", "android-viewpager", "kotlin"], "comments": [{"owner": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 1, "creation_date": 1510742115, "post_id": 47305113, "comment_id": 81560601, "body": "you need to create custom view page for that"}, {"owner": {"reputation": 225, "user_id": 7538260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78e0cdd81eab0cd227355c52fc6a57?s=128&d=identicon&r=PG&f=1", "display_name": "Kriti", "link": "https://stackoverflow.com/users/7538260/kriti"}, "reply_to_user": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 0, "creation_date": 1510742170, "post_id": 47305113, "comment_id": 81560636, "body": "you mean i cant use android.support.v4.view.ViewPager for this?"}, {"owner": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 2, "creation_date": 1510742185, "post_id": 47305113, "comment_id": 81560650, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9650265/how-do-disable-paging-by-swiping-with-finger-in-viewpager-but-still-be-able-to-s\">How do disable paging by swiping with finger in ViewPager but still be able to swipe programmatically?</a>"}, {"owner": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 0, "creation_date": 1510742209, "post_id": 47305113, "comment_id": 81560668, "body": "check this link <a href=\"https://stackoverflow.com/questions/9650265/how-do-disable-paging-by-swiping-with-finger-in-viewpager-but-still-be-able-to-s\" title=\"how do disable paging by swiping with finger in viewpager but still be able to s\">stackoverflow.com/questions/9650265/&hellip;</a>"}, {"owner": {"reputation": 225, "user_id": 7538260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78e0cdd81eab0cd227355c52fc6a57?s=128&d=identicon&r=PG&f=1", "display_name": "Kriti", "link": "https://stackoverflow.com/users/7538260/kriti"}, "reply_to_user": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 0, "creation_date": 1510742224, "post_id": 47305113, "comment_id": 81560677, "body": "No i dont want to do so in java.. i want help in Kotlin"}, {"owner": {"reputation": 225, "user_id": 7538260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78e0cdd81eab0cd227355c52fc6a57?s=128&d=identicon&r=PG&f=1", "display_name": "Kriti", "link": "https://stackoverflow.com/users/7538260/kriti"}, "reply_to_user": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 0, "creation_date": 1510742267, "post_id": 47305113, "comment_id": 81560704, "body": "please read question carefully."}, {"owner": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 0, "creation_date": 1510742268, "post_id": 47305113, "comment_id": 81560706, "body": "you have to create a custom view pager that extends   android.support.v4.view.ViewPager"}, {"owner": {"reputation": 225, "user_id": 7538260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78e0cdd81eab0cd227355c52fc6a57?s=128&d=identicon&r=PG&f=1", "display_name": "Kriti", "link": "https://stackoverflow.com/users/7538260/kriti"}, "reply_to_user": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 0, "creation_date": 1510742496, "post_id": 47305113, "comment_id": 81560849, "body": "I dont want solutions in java.. i Am asking how to do this in Kotlin."}, {"owner": {"reputation": 128827, "user_id": 653856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6qIEl.png?s=128&g=1", "display_name": "Raghunandan", "link": "https://stackoverflow.com/users/653856/raghunandan"}, "edited": false, "score": 1, "creation_date": 1510742686, "post_id": 47305113, "comment_id": 81560971, "body": "why can&#39;t you take the code in the links already commented by others and convert it to kotlin yourself"}, {"owner": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "reply_to_user": {"reputation": 128827, "user_id": 653856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6qIEl.png?s=128&g=1", "display_name": "Raghunandan", "link": "https://stackoverflow.com/users/653856/raghunandan"}, "edited": false, "score": 0, "creation_date": 1510742756, "post_id": 47305113, "comment_id": 81561027, "body": "@Raghunandan right"}, {"owner": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 0, "creation_date": 1510743471, "post_id": 47305113, "comment_id": 81561484, "body": "@Kriti check this ans <a href=\"https://stackoverflow.com/a/13392198/8112541\">stackoverflow.com/a/13392198/8112541</a>"}, {"owner": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "edited": false, "score": 0, "creation_date": 1510743497, "post_id": 47305113, "comment_id": 81561501, "body": "Whatever you can do in Java, you can also do in Kotlin. You call all the same classes and methods."}, {"owner": {"reputation": 225, "user_id": 7538260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78e0cdd81eab0cd227355c52fc6a57?s=128&d=identicon&r=PG&f=1", "display_name": "Kriti", "link": "https://stackoverflow.com/users/7538260/kriti"}, "reply_to_user": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 1, "creation_date": 1510743619, "post_id": 47305113, "comment_id": 81561615, "body": "@Prem thanks.. Custom View pager was all i need to create .. Same as in java.. Thanks!!"}, {"owner": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 0, "creation_date": 1510743890, "post_id": 47305113, "comment_id": 81561801, "body": "@Kriti happy to help you"}, {"owner": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 0, "creation_date": 1510744027, "post_id": 47305113, "comment_id": 81561876, "body": "@Kriti try this like this ans <a href=\"https://stackoverflow.com/a/13392198/8112541\">stackoverflow.com/a/13392198/8112541</a>   return true for ViewPager in kotlin i think it will work"}], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 8023278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nqm8d.jpg?s=128&g=1", "display_name": "Matt Smith", "link": "https://stackoverflow.com/users/8023278/matt-smith"}, "is_accepted": true, "score": 19, "last_activity_date": 1604355144, "last_edit_date": 1604355144, "creation_date": 1538007931, "answer_id": 52527724, "question_id": 47305113, "link": "https://stackoverflow.com/questions/47305113/disable-view-pager-swipe-of-viewpager-in-kotlin/52527724#52527724", "title": "Disable View Pager swipe of Viewpager in Kotlin", "body": "<p>I created a Kotlin version based on converting this answer from Java: <a href=\"https://stackoverflow.com/a/13437997/8023278\">https://stackoverflow.com/a/13437997/8023278</a></p>\n<p>There is no built in way to disable swiping between pages of a ViewPager, what's required is an extension of ViewPager that overrides onTouchEvent and onInterceptTouchEvent to prevent the swiping action. To make it more generalised we can add a method setSwipePagingEnabled to enable/disable swiping between pages.</p>\n<pre><code>class SwipeLockableViewPager(context: Context, attrs: AttributeSet): ViewPager(context, attrs) {\n    private var swipeEnabled = false\n\n    override fun onTouchEvent(event: MotionEvent): Boolean {\n        return when (swipeEnabled) {\n            true -&gt; super.onTouchEvent(event)\n            false -&gt; false\n        }\n    }\n\n    override fun onInterceptTouchEvent(event: MotionEvent): Boolean {\n        return when (swipeEnabled) {\n            true -&gt; super.onInterceptTouchEvent(event)\n            false -&gt; false\n        }\n    }\n\n    fun setSwipePagingEnabled(swipeEnabled: Boolean) {\n        this.swipeEnabled = swipeEnabled\n    }\n}\n</code></pre>\n<p>Then in our layout xml we use our new SwipeLockableViewPager instead of the standard ViewPager</p>\n<pre><code>&lt;mypackage.SwipeLockableViewPager \n        android:id=&quot;@+id/myViewPager&quot; \n        android:layout_height=&quot;match_parent&quot; \n        android:layout_width=&quot;match_parent&quot; /&gt;\n</code></pre>\n<p>Now in our activity/fragment we can call <code>myViewPager.setSwipePagingEnabled(false)</code> and users won't be able to swipe between pages</p>\n<hr />\n<p>UPDATE</p>\n<p>As of 2020 we now have <a href=\"https://developer.android.com/jetpack/androidx/releases/viewpager2\" rel=\"nofollow noreferrer\">ViewPager2</a>. If you <a href=\"https://developer.android.com/training/animation/vp2-migration\" rel=\"nofollow noreferrer\">migrate</a> to ViewPager2 there is a built in method to disable swiping: <code>myViewPager2.isUserInputEnabled = false</code></p>\n"}], "owner": {"reputation": 225, "user_id": 7538260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be78e0cdd81eab0cd227355c52fc6a57?s=128&d=identicon&r=PG&f=1", "display_name": "Kriti", "link": "https://stackoverflow.com/users/7538260/kriti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5437, "favorite_count": 2, "accepted_answer_id": 52527724, "answer_count": 1, "score": 2, "last_activity_date": 1604355144, "creation_date": 1510742082, "last_edit_date": 1510742395, "question_id": 47305113, "link": "https://stackoverflow.com/questions/47305113/disable-view-pager-swipe-of-viewpager-in-kotlin", "title": "Disable View Pager swipe of Viewpager in Kotlin", "body": "<p>I am new to Kotlin, I have View Pager in fragment and i have set pager adapter on it. everything is working fine but when i try to stop my view pager paging swipe in Kotlin and can't find any method to do so in Kotlin.\nI tried to find solution on stack but no luck. Although there are many in java but not for Kotlin.</p>\n\n<p>I have done this using Java as </p>\n\n<pre><code>viewPager.setPagingEnabled(false);\n</code></pre>\n\n<p>but whenever i try this in Kotlin i end up with error.\nAny help will be Appreciated.</p>\n"}, {"tags": ["enums", "kotlin"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1510739965, "post_id": 47304169, "comment_id": 81559217, "body": "&quot;I believe Kotlin enum is not good for this, since every enumeration is an object instance itself.&quot; Enums on the JVM are singleton instances, if you&#39;re worried about object creation, you only create one object instance for each value of the enum. Or did I misunderstand your point?"}, {"owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1510741511, "post_id": 47304169, "comment_id": 81560187, "body": "@zsmb13 Since I would use enums as index constants, there is no need to have singleton objects created. And there could be thousands of elements in the lists, so there could be thousands indexes. Seems like a needless overhead to have so many objects created."}], "answers": [{"comments": [{"owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "edited": false, "score": 1, "creation_date": 1510741400, "post_id": 47304292, "comment_id": 81560127, "body": "This does not answer my question. Also there is nothing wrong with the comma."}], "tags": [], "owner": {"reputation": 17, "user_id": 8944309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea6b4402dc6b0d5a861f3d1a9c3e720f?s=128&d=identicon&r=PG&f=1", "display_name": "zwerverpiraat", "link": "https://stackoverflow.com/users/8944309/zwerverpiraat"}, "is_accepted": false, "score": -1, "last_activity_date": 1510739872, "creation_date": 1510739872, "answer_id": 47304292, "question_id": 47304169, "link": "https://stackoverflow.com/questions/47304169/c-enum-equivalent-in-kotlin/47304292#47304292", "title": "C++ Enum equivalent in Kotlin", "body": "<p>You have a comma behind second =1,</p>\n\n<p>Remove that to this:</p>\n\n<pre><code>enum class Index\n{\n  first = 0,\n  second = 1\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "edited": false, "score": 0, "creation_date": 1510751859, "post_id": 47306251, "comment_id": 81567113, "body": "I am specifically looking for a solution that does not create objects for constants. I guess such a solution is not possible."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 2, "last_activity_date": 1510745948, "last_edit_date": 1510745948, "creation_date": 1510745333, "answer_id": 47306251, "question_id": 47304169, "link": "https://stackoverflow.com/questions/47304169/c-enum-equivalent-in-kotlin/47306251#47306251", "title": "C++ Enum equivalent in Kotlin", "body": "<p>How about defining an enum and also an extension to index lists of the desired type with the enum elements? This way, you can limit the indexing capabilities only to lists of <code>Foo</code> if you need it. Otherwise, make the extension generic. </p>\n\n<pre><code>enum class Index { FIRST, SECOND }   \noperator fun List&lt;Foo&gt;.get(index: Index) = get(index.ordinal)\n\n// Usage:\nval foo = listOfFoo[Index.FIRST]\n</code></pre>\n\n<p><sup>Use <code>import com.example.Index.*</code> to reference the elements it as just <code>FIRST</code> and <code>SECOND</code>.</sup></p>\n\n<p>Or define a non-operator function that does not get confused with the operator:</p>\n\n<pre><code>fun List&lt;Foo&gt;.getElement(index: Index) = get(index.ordinal)\n\n// Usage:\nval foo = listOfFoo.getElement(Index.FIRST)\n</code></pre>\n\n<p>However, I don't think there's currently a solution that would allow you to both have pseudonyms for integers that are typed differently, and avoid having the instances for them at runtime (well, maybe a custom source transformation at compile time would). The concept that is closest to allowing this is <a href=\"http://cr.openjdk.java.net/~jrose/values/values-0.html\" rel=\"nofollow noreferrer\">value types</a>, but it is currently supported by neither JVM nor Kotlin.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1510769691, "creation_date": 1510769691, "answer_id": 47314542, "question_id": 47304169, "link": "https://stackoverflow.com/questions/47304169/c-enum-equivalent-in-kotlin/47314542#47314542", "title": "C++ Enum equivalent in Kotlin", "body": "<p>Thousands of objects is really very little, but you could just use normal Kotlin enums and then use <a href=\"https://www.guardsquare.com/en/proguard\" rel=\"nofollow noreferrer\">Proguard</a> to optimize them out. It does so by default but you may need to be careful configuring it and don't forget to test the application thoroughly afterwards.</p>\n"}], "owner": {"reputation": 3664, "user_id": 1771055, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e72db016ef8a0d3cd83cf132964456c3?s=128&d=identicon&r=PG", "display_name": "rozina", "link": "https://stackoverflow.com/users/1771055/rozina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1510769691, "creation_date": 1510739484, "question_id": 47304169, "link": "https://stackoverflow.com/questions/47304169/c-enum-equivalent-in-kotlin", "title": "C++ Enum equivalent in Kotlin", "body": "<p>The problem I am trying to solve:</p>\n\n<p>I have a list of elements. The list can be large and there can be many of them. I would like to access them by index. For those indexes I would like to use words instead of numbers. I would also like this words to be strongly typed, so I cannot mix numbers with them. </p>\n\n<p>I believe Kotlin enum is not good for this, since every enumeration is an object instance itself. I can use Int constants, but then I lose the type safety.</p>\n\n<p>In c++ this problem is solved by an Enum. Enumerations can be casted to their underlying type (in compile time) to be used as indexes. At the same type the Enum is a type and if a function takes it as a parameter, the compiler won't allow passing integers in. The enumerations themselves are not objects themselves, so you can have as many as you like without any performance hit.</p>\n\n<p>C++ code example to show what I am looking for:</p>\n\n<pre><code>string someArray[] = {\"element 0\", \"element 1\"};\n\nenum class Index\n{\n    first = 0,\n    second = 1,\n};\n\nstring getElement(Index i)\n{\n    return someArray[(int)i];\n}\n\nvoid foo()\n{\n    auto element0 = getElement(Index::first);\n    auto element1 = getElement(1);  // compile time error - parameter type mismatch\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "submit", "searchview"], "answers": [{"comments": [{"owner": {"reputation": 279, "user_id": 8342586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/947245afb3cbba1061b3b8ee2b4ce1d8?s=128&d=identicon&r=PG&f=1", "display_name": "Bozzo", "link": "https://stackoverflow.com/users/8342586/bozzo"}, "edited": false, "score": 0, "creation_date": 1510817851, "post_id": 47311523, "comment_id": 81598647, "body": "Yep , i just edited it a bit , and it solved my problem , thank you :)"}], "tags": [], "owner": {"reputation": 1709, "user_id": 1294982, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb2a35340cf7b991a942773d3f5247c3?s=128&d=identicon&r=PG&f=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/1294982/maurice"}, "is_accepted": true, "score": 28, "last_activity_date": 1544190512, "last_edit_date": 1544190512, "creation_date": 1510760449, "answer_id": 47311523, "question_id": 47303819, "link": "https://stackoverflow.com/questions/47303819/kotlin-how-to-get-searchview-submit/47311523#47311523", "title": "Kotlin: how to get searchView submit", "body": "<p>Try doing this:</p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu): Boolean {\n    menuInflater.inflate(R.menu.main, menu)\n\n    val searchItem = menu.findItem(R.id.search_city)\n    searchView = searchItem.actionView as SearchView\n    searchView.setQueryHint(\"Search View Hint\")\n\n    searchView.setOnQueryTextListener(object : OnQueryTextListener {\n\n        override fun onQueryTextChange(newText: String): Boolean {\n            return false\n        }\n\n        override fun onQueryTextSubmit(query: String): Boolean {\n            // task HERE\n            return false\n        }\n\n    })\n\n    return true\n}\n</code></pre>\n\n<p>Response link: <a href=\"https://stackoverflow.com/questions/26306717/how-to-listen-to-keyboard-search-button-in-searchview\">Listen to keyboard event</a></p>\n"}], "owner": {"reputation": 279, "user_id": 8342586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/947245afb3cbba1061b3b8ee2b4ce1d8?s=128&d=identicon&r=PG&f=1", "display_name": "Bozzo", "link": "https://stackoverflow.com/users/8342586/bozzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14042, "favorite_count": 3, "accepted_answer_id": 47311523, "answer_count": 1, "score": 9, "last_activity_date": 1590686820, "creation_date": 1510738536, "last_edit_date": 1590686820, "question_id": 47303819, "link": "https://stackoverflow.com/questions/47303819/kotlin-how-to-get-searchview-submit", "title": "Kotlin: how to get searchView submit", "body": "<p>I have a <a href=\"https://developer.android.com/reference/android/widget/SearchView\" rel=\"nofollow noreferrer\">SearchView</a>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;SearchView\n    android:id=\"@+id/searchBar\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"match_parent\"\n    android:visibility=\"visible\"/&gt;\n</code></pre>\n\n<p>I want to add a custom action when the submit button is pressed.</p>\n\n<p>This is what I have so far:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>searchBar.setOnSearchClickListener {\n  //do some stuff\n}\n</code></pre>\n\n<p>All the information I found is old and not in kotlin.</p>\n\n<p>How can I get trigger an action when the search icon on the keyboard is tapped?</p>\n"}, {"tags": ["functional-programming", "kotlin", "rx-java", "rx-java2"], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1510739507, "creation_date": 1510737533, "last_edit_date": 1510739507, "question_id": 47303470, "link": "https://stackoverflow.com/questions/47303470/how-to-make-the-function-return-observable", "title": "How to make the function return Observable", "body": "<p>I am trying to make my code more Rx, so here is problem that i run into during refactor:</p>\n\n<p>I had previously function like this:</p>\n\n<pre><code>private fun startLocationUpdates() {\n    compositeDisposable.add(rxLocationRepository.onLocationUpdate()\n            .subscribe(Consumer { location -&gt;\n                appendGeoEvent(location)\n            }))\n\n    rxScheduleStopLocationUpdates()\n}\n</code></pre>\n\n<p>Which i turn this into something like this:</p>\n\n<pre><code>val locationUpdates = rxLocationRepository.onLocationUpdate()\n        .concatMap(appendGeoEvent()) \n        .doOnSubscribe(rxScheduleStopLocationUpdates()) \n        .publish()\n\n\nprivate fun startLocationUpdates() {compositeDisposable.add(locationUpdates.connect()) } \n</code></pre>\n\n<p>The problem is now with the appendGeoEvent to make work with my created locationUpdates ConnectableObservable.</p>\n\n<p>The appendGeoEvent looked like this(it was two connected functions)</p>\n\n<pre><code> fun appendGeoEvent(location: Location) {\n    val locationGeoEvent = LocationGeoEvent(\n            accuracy = location.accuracy.toDouble(),\n            latitude = location.latitude,\n            longitude = location.longitude,\n            timestampGeoEvent = location.time\n    )\n    appendGeoEvent(locationGeoEvent)\n}\n\nprivate fun appendGeoEvent(event: LocationGeoEvent) {\n    synchronized(mEventsMonitor) {\n        if (!normalSaveScheduled.get()) {\n            configureNormalSaveCompletable()\n        }\n        locationEvents.add(event)\n    }\n}\n</code></pre>\n\n<p>So now i need to make one function of this two that will return some Observable or Copmletable.\nAgain, how to make it have sense and work with this locationUpdates ConnectableObservable:</p>\n\n<pre><code>val locationUpdates = rxLocationRepository.onLocationUpdate()\n    .concatMap(appendGeoEvent()) \n    .doOnSubscribe(rxScheduleStopLocationUpdates()) \n    .publish()\n</code></pre>\n\n<p>The other part of code is this:</p>\n\n<p>1)The configureNormalSaveCompletable method:</p>\n\n<pre><code> fun configureNormalSaveCompletable() {\n    scheduleNormalSave.subscribe(Action { rxSaveEvents(locationEvents, false) })\n}\n</code></pre>\n\n<p>2) The scheduleNormalSave Completable(it schedules action of doing something in future and sets the boolean needed in rxSaveEvents method)</p>\n\n<pre><code>    val scheduleNormalSave = Completable.timer(locationEventsSaveThrottlingSeconds, TimeUnit.SECONDS).doOnSubscribe(Consumer { normalSaveScheduled.set(true) }).doOnComplete(Action { normalSaveScheduled.set(false) })\n</code></pre>\n\n<p>3) And here is the rxSaveEvents method:</p>\n\n<pre><code>    private fun rxSaveEvents(\n        events: List&lt;LocationEvent&gt;,\n        locationUpdatesAboutToStop: Boolean): Boolean {\n\n    synchronized(mEventsMonitor) {\n        if (events.isNotEmpty()) {\n            val locationEvents = LocationEvents()\n            segregateLocationEvents(events, locationEvents)\n            scoreReadings(locationEvents)\n            sendLocationEventsInternal(locationEvents, locationUpdatesAboutToStop)\n\n            Completable.fromCallable { updateLocationEventsToDb(locationEvents) }.subscribeOn(Schedulers.io()).subscribe()\n\n        }\n        if (locationUpdatesAboutToStop) {\n            stopLocationUpdates()\n\n            Completable.fromCallable { cleanAllReadingsData() }.subscribeOn(Schedulers.io()).subscribe()\n            Completable.fromCallable { removeExpiredData() }.subscribeOn(Schedulers.io()).subscribe()\n        }\n\n        locationEvents.clear()\n\n        return true\n    }\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>What i've tried so far is this:</p>\n\n<pre><code>//what should be in the method parameter and how to exctract this \n    fun apendGeoEvent(location: Location): Observable&lt;LocationGeoEvent&gt;? {\n    return Observable.just(location)\n            .flatMap { t: Location -&gt;  Observable.just(LocationGeoEvent(\n                accuracy = location.accuracy.toDouble(),\n                    latitude= location.latitude,\n                    longitude = location.longitude,\n                    timestampGeoEvent = location.time\n                )\n            )\n            }\n            .doOnNext{\n                if (!normalSaveScheduled.get()) {\n                    configureNormalSaveCompletable()\n                }\n                locationEvents.add(it)\n            }\n}\n</code></pre>\n\n<p>However i don't know how to take that Observable from the upstream to my appendGeoEvent method:</p>\n\n<pre><code>    val locationUpdates = rxLocationRepository.onLocationUpdate()\n        .concatMap(appendGeoEvent()) \n        .doOnSubscribe(rxScheduleStopLocationUpdates()) \n        .publish()\n</code></pre>\n"}, {"tags": ["lambda", "kotlin", "comparator"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1510737263, "post_id": 47303355, "comment_id": 81557565, "body": "Can you add the code of the <code>Comparator</code> interface?"}, {"owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 0, "creation_date": 1510737736, "post_id": 47303355, "comment_id": 81557827, "body": "What&#39;s the error?"}, {"owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 0, "creation_date": 1510737774, "post_id": 47303355, "comment_id": 81557852, "body": "I assume that you the <code>Comparator</code> interface is <code>java.util.Comparator</code>?"}, {"owner": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "edited": false, "score": 0, "creation_date": 1510737928, "post_id": 47303355, "comment_id": 81557930, "body": "Yes, it expects <code>java.util.Comparator</code>."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1510738261, "post_id": 47303355, "comment_id": 81558147, "body": "And what&#39;s the type of the instance that you&#39;re trying to call this on?"}, {"owner": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "edited": false, "score": 0, "creation_date": 1510738350, "post_id": 47303355, "comment_id": 81558211, "body": "<a href=\"https://github.com/ISchwarz23/SortableTableView#sortable-data\" rel=\"nofollow noreferrer\">github.com/ISchwarz23/SortableTableView#sortable-data</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "edited": false, "score": 0, "creation_date": 1510739346, "post_id": 47303837, "comment_id": 81558816, "body": "Some columns will be <code>Date</code>, so I can&#39;t use the first solution. The second solution gives me <code>java.lang.ClassCastException: cz.foobar.ClientsFragment$onViewCreated$1 cannot be cast to java.util.Comparator</code>"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "edited": false, "score": 1, "creation_date": 1510740075, "post_id": 47303837, "comment_id": 81559302, "body": "You&#39;re right, I can reproduce this issue as well. It&#39;s certainly interesting, I&#39;ll see if I can look into it later - it&#39;s a weird thing to get a runtime error about."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 1, "last_activity_date": 1510738594, "creation_date": 1510738594, "answer_id": 47303837, "question_id": 47303355, "link": "https://stackoverflow.com/questions/47303355/comparator-as-lambda/47303837#47303837", "title": "Comparator as lambda", "body": "<p>If you know for sure that your <code>SortableTableView</code>'s generic type parameter is <code>String</code>, you could cast it to a <code>SortableTableView&lt;String&gt;</code> and then make the call to it:</p>\n\n<pre><code>(tableView as SortableTableView&lt;String&gt;).setColumnComparator(1, { x, y -&gt;\n    x.compareTo(y)\n})\n</code></pre>\n\n<p>Alternatively, you could cast the parameters that the <code>Comparator</code> takes individually:</p>\n\n<pre><code>tableView.setColumnComparator(1, { x, y -&gt; \n    (x as String).compareTo(y as String) \n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1510769210, "last_edit_date": 1510769210, "creation_date": 1510768843, "answer_id": 47314320, "question_id": 47303355, "link": "https://stackoverflow.com/questions/47303355/comparator-as-lambda/47314320#47314320", "title": "Comparator as lambda", "body": "<p>If you look more carefully, you need to pass comparator which compares <em>complete</em> values, not values in the column. So let's say the type of data in your table is <code>Car</code> (so that you have a <code>SortableTableView&lt;Car&gt;</code>) and the first column contains model names. Then you'd write</p>\n\n<pre><code>setColumnComparator(0, { a, b -&gt; a.modelName.compareTo(b.modelName) }\n</code></pre>\n\n<p>Or better: </p>\n\n<pre><code>setColumnComparator(0, compareBy({ it.modelName })\n</code></pre>\n\n<p>(see <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.comparisons/compare-by.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.comparisons/compare-by.html</a>)</p>\n\n<p>From the signature IDEA shows, you might have a <code>SortableTableView&lt;Any&gt;</code> or a <code>SortableTableView&lt;*&gt;</code> instead. This really should be changed to a more specific type. But even without it, if you could have a <code>Car</code> or a <code>Book</code>:</p>\n\n<pre><code>compareBy({ (it as? Car)?.modelName }, { (it as? Book)?.title })\n</code></pre>\n"}], "owner": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 47314320, "answer_count": 2, "score": 4, "last_activity_date": 1510769210, "creation_date": 1510737136, "last_edit_date": 1510740162, "question_id": 47303355, "link": "https://stackoverflow.com/questions/47303355/comparator-as-lambda", "title": "Comparator as lambda", "body": "<p>I've the following method in <a href=\"https://github.com/ISchwarz23/SortableTableView#sortable-data\" rel=\"nofollow noreferrer\">Java library</a>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public void setColumnComparator(final int columnIndex, final Comparator&lt;T&gt; columnComparator)\n</code></pre>\n\n<p>Idea says it has the following prorotype:</p>\n\n<pre><code>setColumnComparator(columnIndex: Int, columnComparator: ((Any!, Any!) -&gt; Int)!)\n</code></pre>\n\n<p>How can I use it? I know it will be <code>String</code>, so I want something like this, but it doesn't compile.</p>\n\n<pre><code>setColumnComparator(0, Comparator&lt;String&gt; { a, b -&gt; a.compareTo(b) }\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin", "android-studio-3.0"], "comments": [{"owner": {"reputation": 2826, "user_id": 5180172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/CNwhO.jpg?s=128&g=1", "display_name": "Harish Mahajan", "link": "https://stackoverflow.com/users/5180172/harish-mahajan"}, "edited": false, "score": 0, "creation_date": 1511345609, "post_id": 47300679, "comment_id": 81818179, "body": "i am getting same error. did you get any solution?"}, {"owner": {"reputation": 5378, "user_id": 2202675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4473030cd8d97fda61e3f1f023a00a9d?s=128&d=identicon&r=PG", "display_name": "danny117", "link": "https://stackoverflow.com/users/2202675/danny117"}, "edited": false, "score": 0, "creation_date": 1523074722, "post_id": 47300679, "comment_id": 86420952, "body": "Came here looking for the answer and then actually found It turned out to be a simple find and replace."}], "answers": [{"comments": [{"owner": {"reputation": 186020, "user_id": 2016562, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2433495de6d2b99746f8e25344209fa7?s=128&d=identicon&r=PG", "display_name": "Gabriele Mariotti", "link": "https://stackoverflow.com/users/2016562/gabriele-mariotti"}, "edited": false, "score": 4, "creation_date": 1510728309, "post_id": 47300855, "comment_id": 81552776, "body": "compileOnly is not deprecated"}, {"owner": {"reputation": 2155, "user_id": 4201925, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-Cw6gTmQUnXk/AAAAAAAAAAI/AAAAAAAAAEc/vGwNsq3E5Aw/photo.jpg?sz=128", "display_name": "Valentin Baryshev", "link": "https://stackoverflow.com/users/4201925/valentin-baryshev"}, "edited": false, "score": 0, "creation_date": 1510730546, "post_id": 47300855, "comment_id": 81553856, "body": "replaced compileOnly with implementation and still receive this warning"}], "tags": [], "owner": {"reputation": 1743, "user_id": 6370015, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9435959218e88c7e313311a7441898f8?s=128&d=identicon&r=PG&f=1", "display_name": "Kishan Donga", "link": "https://stackoverflow.com/users/6370015/kishan-donga"}, "is_accepted": false, "score": 1, "last_activity_date": 1510727671, "creation_date": 1510727671, "answer_id": 47300855, "question_id": 47300679, "link": "https://stackoverflow.com/questions/47300679/configuration-compile-in-is-deprecated-but-all-configurations-are-implementa/47300855#47300855", "title": "Configuration &#39;compile&#39; in is deprecated, but all configurations are &#39;implementation&#39;", "body": "<p>I think you received warning because you use,</p>\n\n<pre><code>compileOnly \"org.glassfish:javax.annotation:10.0-b28\"\n</code></pre>\n\n<p>a better explanation is given here,</p>\n\n<p><a href=\"https://stackoverflow.com/questions/46556474/android-gradle-implementation-vs-compileonly-performance\">Android Gradle Implementation vs CompileOnly Performance</a></p>\n"}, {"comments": [{"owner": {"reputation": 1722, "user_id": 5394986, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10153375096063001/picture?type=large", "display_name": "Pablo Alfonso", "link": "https://stackoverflow.com/users/5394986/pablo-alfonso"}, "edited": false, "score": 0, "creation_date": 1522544616, "post_id": 47313865, "comment_id": 86195256, "body": "Is there any way to confirm that this plugin is generating the warning ?"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 5, "last_activity_date": 1510767247, "last_edit_date": 1592644375, "creation_date": 1510767247, "answer_id": 47313865, "question_id": 47300679, "link": "https://stackoverflow.com/questions/47300679/configuration-compile-in-is-deprecated-but-all-configurations-are-implementa/47313865#47313865", "title": "Configuration &#39;compile&#39; in is deprecated, but all configurations are &#39;implementation&#39;", "body": "<blockquote>\n<p>Are there any &quot;invisible&quot; dependencies in gradle?</p>\n</blockquote>\n<p>I don't know whether it's responsible for this problem, but plugins can add dependencies, and in particular <code>com.google.gms.google-services</code> <a href=\"https://developers.google.com/android/guides/google-services-plugin\" rel=\"noreferrer\">does</a>:</p>\n<blockquote>\n<p>The google-services plugin has two main functions: ...</p>\n<ol start=\"2\">\n<li>Add dependencies for basic libraries required for the services you have enabled.</li>\n</ol>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 966, "user_id": 8003636, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Pzg0Z.jpg?s=128&g=1", "display_name": "Rohit Sharma", "link": "https://stackoverflow.com/users/8003636/rohit-sharma"}, "is_accepted": false, "score": 13, "last_activity_date": 1521112327, "creation_date": 1521112327, "answer_id": 49297970, "question_id": 47300679, "link": "https://stackoverflow.com/questions/47300679/configuration-compile-in-is-deprecated-but-all-configurations-are-implementa/49297970#49297970", "title": "Configuration &#39;compile&#39; in is deprecated, but all configurations are &#39;implementation&#39;", "body": "<p>I found this working solution while compiling my code today. (When everything is <code>implementation</code> and nothing is <code>compile</code> in your <code>build.gradle</code>)</p>\n\n<p><strong>Errors:</strong></p>\n\n<pre><code> 1. Configuration 'compile' in project ':app' is deprecated \n 2. registerResGeneratingTask is deprecated, use registerGeneratedFolders (FileCollection)\n</code></pre>\n\n<p><strong>Solution:</strong></p>\n\n<p>I needed to update my <strong>Project: build.gradle</strong></p>\n\n<p>from </p>\n\n<pre><code>classpath 'com.google.gms:google-services:3.1.0'\n</code></pre>\n\n<p>to</p>\n\n<pre><code>classpath 'com.google.gms:google-services:3.2.0'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 178, "user_id": 3178496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FRkq.jpg?s=128&g=1", "display_name": "michael_demonio", "link": "https://stackoverflow.com/users/3178496/michael-demonio"}, "edited": false, "score": 0, "creation_date": 1611927262, "post_id": 49703779, "comment_id": 116613952, "body": "Thanks, indeed what I needed to do was to remove the &#39;compile&#39; statements and leave only the &#39;implementation&#39; ones as both compile/testCompile are deprecated"}], "tags": [], "owner": {"reputation": 5378, "user_id": 2202675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4473030cd8d97fda61e3f1f023a00a9d?s=128&d=identicon&r=PG", "display_name": "danny117", "link": "https://stackoverflow.com/users/2202675/danny117"}, "is_accepted": false, "score": 4, "last_activity_date": 1523075033, "last_edit_date": 1523075033, "creation_date": 1523074593, "answer_id": 49703779, "question_id": 47300679, "link": "https://stackoverflow.com/questions/47300679/configuration-compile-in-is-deprecated-but-all-configurations-are-implementa/49703779#49703779", "title": "Configuration &#39;compile&#39; in is deprecated, but all configurations are &#39;implementation&#39;", "body": "<p>replace in path  ctrl+shift+R  </p>\n\n<p>Select project\n<a href=\"https://i.stack.imgur.com/gG2FV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gG2FV.png\" alt=\"find replace snip\"></a></p>\n\n<p>type in \"provided\" replace with \"compileOnly\" or replace \"compile\" with \"implementation\"\nmake sure your only changing the gradle.build files \nIf you have some angst then just open the gradle.build files and edit them.</p>\n\n<p><a href=\"https://i.stack.imgur.com/nYAe5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nYAe5.png\" alt=\"gradle snip\"></a></p>\n"}], "owner": {"reputation": 2155, "user_id": 4201925, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-Cw6gTmQUnXk/AAAAAAAAAAI/AAAAAAAAAEc/vGwNsq3E5Aw/photo.jpg?sz=128", "display_name": "Valentin Baryshev", "link": "https://stackoverflow.com/users/4201925/valentin-baryshev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14065, "favorite_count": 0, "answer_count": 4, "score": 14, "last_activity_date": 1523075033, "creation_date": 1510726931, "question_id": 47300679, "link": "https://stackoverflow.com/questions/47300679/configuration-compile-in-is-deprecated-but-all-configurations-are-implementa", "title": "Configuration &#39;compile&#39; in is deprecated, but all configurations are &#39;implementation&#39;", "body": "<p>I receive following warning while executing gradle in android:</p>\n\n<pre><code>Configuration 'compile' in project ':app' is deprecated.\n</code></pre>\n\n<p>But all my dependencies included via implementation configuration. (And modules too)\nAre there any \"invisible\" dependencies in gradle?</p>\n\n<p>Here is my main build gradle file: <a href=\"https://pastebin.com/ZJe7zrwn\" rel=\"noreferrer\">https://pastebin.com/ZJe7zrwn</a></p>\n"}, {"tags": ["kotlin", "mockito"], "answers": [{"comments": [{"owner": {"reputation": 615, "user_id": 1869957, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aWO2N.jpg?s=128&g=1", "display_name": "Dinesh Singh", "link": "https://stackoverflow.com/users/1869957/dinesh-singh"}, "edited": false, "score": 3, "creation_date": 1535306453, "post_id": 47300730, "comment_id": 91008151, "body": "Getting NPE while running androidTest. In case of unit test it runs fine. Not sure, if I am the only one facing the problem"}], "tags": [], "owner": {"reputation": 2569, "user_id": 2853392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2j5ao.jpg?s=128&g=1", "display_name": "vishal jangid", "link": "https://stackoverflow.com/users/2853392/vishal-jangid"}, "is_accepted": true, "score": 2, "last_activity_date": 1510727169, "creation_date": 1510727169, "answer_id": 47300730, "question_id": 47300603, "link": "https://stackoverflow.com/questions/47300603/kotlin-mockito-getting-a-null/47300730#47300730", "title": "Kotlin + Mockito: getting a null", "body": "<p>This is basically casing the Null Object into the specific class object using Generic. The code as below, where we override any() to handle the issue accordingly.</p>\n\n<pre><code>private fun &lt;T&gt; any(): T {\nMockito.any&lt;T&gt;()\nreturn uninitialized()\n  }\nprivate fun &lt;T&gt; uninitialized(): T = null as T\n</code></pre>\n\n<p>For more detail you can check this <a href=\"https://medium.com/@elye.project/befriending-kotlin-and-mockito-1c2e7b0ef791\" rel=\"nofollow noreferrer\">https://medium.com/@elye.project/befriending-kotlin-and-mockito-1c2e7b0ef791</a> tutorial. </p>\n"}], "owner": {"reputation": 4449, "user_id": 1815311, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yKNzM.jpg?s=128&g=1", "display_name": "Lisa Anne", "link": "https://stackoverflow.com/users/1815311/lisa-anne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3004, "favorite_count": 0, "accepted_answer_id": 47300730, "answer_count": 1, "score": 2, "last_activity_date": 1510727169, "creation_date": 1510726608, "question_id": 47300603, "link": "https://stackoverflow.com/questions/47300603/kotlin-mockito-getting-a-null", "title": "Kotlin + Mockito: getting a null", "body": "<p>Please I am a bit confused, this test fails with <em>\"java.lang.IllegalStateException: notNull() must not be null\"</em>:</p>\n\n<pre><code>@Test\nfun when_resume_subscribe() {\n    // WHEN\n    presenter.onStart()\n    // THEN\n    verify&lt;Model&gt;(model).subscribe(notNull()) // &lt;---- fails here\n}\n</code></pre>\n\n<p>here is the method under test:</p>\n\n<pre><code>override fun onStart() {\n    model.subscribe(object : Observer&lt;Bar&gt; {\n        override fun onCompleted() {\n            view?.showProgress(false)\n        }\n//... more stuff...\n</code></pre>\n\n<p>Please what is happening?</p>\n"}, {"tags": ["android", "kotlin", "anko"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1510907820, "post_id": 47299006, "comment_id": 81644510, "body": "Just checking if I understood this correctly: you want to make anko ignore the value passed as <code>_id</code> when it is the primary key with auto increment?"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1510908197, "post_id": 47299006, "comment_id": 81644711, "body": "Yes! I want to make anko ignore the value passed as _id when it is the primary key with auto increment"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1510908686, "post_id": 47299006, "comment_id": 81644983, "body": "I have to place the _id property in the class <code>DBSetting(val mMutableMap: MutableMap&lt;String, Any?&gt;)...</code> because I need the value of _id when I get a record from table. But when I insert a new record into table, I hope that system can pass a  no-repeat value to _id field automatically when _id field is <code>INTEGER + PRIMARY_KEY+ AUTOINCREMENT</code>"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1510908958, "post_id": 47299006, "comment_id": 81645125, "body": "need to do some more research if that is the case. I&#39;ll update the answer when I find something"}, {"owner": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "edited": false, "score": 0, "creation_date": 1511019244, "post_id": 47299006, "comment_id": 81687893, "body": "Don&#39;t know about anko, but generally with sqlite: insert a <code>null</code> to those columns where you want to see a default value."}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "edited": false, "score": 0, "creation_date": 1511035433, "post_id": 47299006, "comment_id": 81693464, "body": "@laalto assuming the column is nullable. Auto increment ints can be automatically incrementented by not passing a value"}], "answers": [{"comments": [{"owner": {"reputation": 1919, "user_id": 3974530, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/wLlfc.jpg?s=128&g=1", "display_name": "InsaneCat", "link": "https://stackoverflow.com/users/3974530/insanecat"}, "edited": false, "score": 0, "creation_date": 1511172580, "post_id": 47346558, "comment_id": 81731820, "body": "Working fine @zoe"}], "tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": true, "score": 2, "last_activity_date": 1511019002, "last_edit_date": 1511019002, "creation_date": 1510908605, "answer_id": 47346558, "question_id": 47299006, "link": "https://stackoverflow.com/questions/47299006/why-cant-anko-ignore-the-passed-value-of-id-when-id-is-integer-primary-key/47346558#47346558", "title": "Why can&#39;t Anko ignore the passed value of _id when _id is INTEGER + PRIMARY_KEY+ AUTOINCREMENT?", "body": "<p>Anko, in your usage, is a wrapper for SQLite. SQL itself <a href=\"https://stackoverflow.com/questions/1884387/how-to-override-the-attribution-of-an-auto-incrementing-primary-key-when-inserti\">overrides auto increment when a custom value is passed</a>. If no value is passed -> Automatic value. Otherwise -> manual. It assumes it's unique because of <code>PRIMARY_KEY</code>, but that's a different problem.</p>\n\n<p>As far as I know, there is no integrated feature into Anko that allows for overriding this manually. Instead, the only thing you can do is not pass a value. Any SQL query that's wrong won't be caught by Anko itself, but by the raw SQL. It's SQL that throws any exceptions meaning Anko won't check for missing data.</p>\n\n<p>Simply, don't pass an ID. You can write a function that still takes in the ID but discards it if the row is set to PRIMARY_KEY and AUTO_INCREMENT.</p>\n\n<hr>\n\n<p>I have done more digging in the source code and there's no support for ignoring passed values if it's set to auto increment. </p>\n\n<p>This means the only way you can get it to actually automatically increment is by not passing any values. If you are using manual queries of any kind, you simply don't pass any value. So, don't give the database the ID. Because it's auto increment it'll automatically add it and that's on the base SQL level. </p>\n\n<p>Ank doesn't ignore it by default because it's essentially a wrapper for SQLite. Meaning it has to be able to be passed if the ID should be overridden (see the link in the second sentence of this answer). As such, Anko ignoring it would cause more problems than it'd do good. You have to make sure it isn't passed instead</p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 47346558, "answer_count": 1, "score": 0, "last_activity_date": 1511019002, "creation_date": 1510717483, "last_edit_date": 1510999312, "question_id": 47299006, "link": "https://stackoverflow.com/questions/47299006/why-cant-anko-ignore-the-passed-value-of-id-when-id-is-integer-primary-key", "title": "Why can&#39;t Anko ignore the passed value of _id when _id is INTEGER + PRIMARY_KEY+ AUTOINCREMENT?", "body": "<p>I have designed the _id field is <code>INTEGER + PRIMARY_KEY+ AUTOINCREMENT</code>, I use the code <code>SettingManage().addSetting(MSetting(10L,\"My Settings\",2000L,\"This is description!\"))</code> to insert a record to the table.</p>\n\n<p>I think Anko will ignore the passed value 10 of _id and pass a new value to _id  automatically, but in fact the value 10 of _id is inserted into the table. </p>\n\n<p>How can make Anko ignore the passed value of _id when _id is <code>INTEGER + PRIMARY_KEY+ AUTOINCREMENT</code> ?</p>\n\n<p><strong>Insert Data</strong></p>\n\n<pre><code>SettingManage().addSetting(MSetting(10L,\"My Settings\",2000L,\"This is description!\"))\n</code></pre>\n\n<p><strong>Design Table</strong></p>\n\n<pre><code>    class DBSettingHelper(mContext: Context = UIApp.instance) : ManagedSQLiteOpenHelper(\n            mContext,\n            DB_NAME,\n            null,\n            DB_VERSION) {\n\n        companion object {\n            val DB_NAME = \"setting.db\"\n            val DB_VERSION = 5\n            val instance by lazy { DBSettingHelper() }\n        }\n\n        override fun onCreate(db: SQLiteDatabase) {\n            db.createTable( DBSettingTable.TableNAME , true,\n                    DBSettingTable._ID to INTEGER + PRIMARY_KEY+ AUTOINCREMENT ,\n                    DBSettingTable.Name to TEXT,\n                    DBSettingTable.CreatedDate to INTEGER,\n                    DBSettingTable.Description to TEXT\n            )\n        }\n\n        override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {\n            db.dropTable(DBSettingTable.TableNAME, true)\n            onCreate(db)\n        }\n\n    }\n\n\n\n    class DBSetting(val mMutableMap: MutableMap&lt;String, Any?&gt;) {\n        var _id: Long by mMutableMap\n        var name: String by mMutableMap\n        var createdDate: Long by mMutableMap\n        var description: String by mMutableMap\n\n        constructor(_id: Long, name: String, createdDate: Long, description: String)\n                : this(HashMap()) {\n            this._id = _id\n            this.name = name\n            this.createdDate = createdDate\n            this.description=description\n        }\n    }\n\n\n    object DBSettingTable {\n        val TableNAME = \"SettingTable\"\n\n        val _ID = \"_id\"\n        val Name = \"name\"\n        val CreatedDate = \"createdDate\"\n        val Description=\"description\"\n    }\n\n\n   data class MSetting (\n        val _id: Long,  \n        val name: String,\n        val createdDate: Long,\n        val description: String\n   )\n</code></pre>\n\n<p><strong>Business Logic</strong></p>\n\n<pre><code>class SettingManage {\n    fun addSetting(mMSetting:MSetting){\n        DBSettingManage().addDBSetting(DbDataMapper().convertMSetting_To_DBSetting(mMSetting))\n    }\n}\n\nclass DBSettingManage(private val mDBSettingHelper: DBSettingHelper =DBSettingHelper.instance) {\n    fun addDBSetting(mDBSetting: DBSetting)=mDBSettingHelper.use{\n        insert(DBSettingTable.TableNAME,*mDBSetting.mMutableMap.toVarargArray())\n    }\n}\n\nclass DbDataMapper {\n    fun convertMSetting_To_DBSetting(mMSetting: MSetting) =with(mMSetting){\n        DBSetting(_id,name,createdDate,description)\n    }\n    fun convertDBSetting_To_MSetting(mDBSetting: DBSetting)=with(mDBSetting){\n        MSetting(_id,name,createdDate,description )\n    }\n}\n\n\nfun &lt;T : Any&gt; SelectQueryBuilder.parseList(parser: (Map&lt;String, Any?&gt;) -&gt; T): List&lt;T&gt; =\n        parseList(object : MapRowParser&lt;T&gt; {\n            override fun parseRow(columns: Map&lt;String, Any?&gt;): T = parser(columns)\n        })\n</code></pre>\n"}, {"tags": ["android", "android-edittext", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 867, "user_id": 3456751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ByOG3.jpg?s=128&g=1", "display_name": "eskimwier", "link": "https://stackoverflow.com/users/3456751/eskimwier"}, "edited": false, "score": 3, "creation_date": 1526695480, "post_id": 47298936, "comment_id": 87857482, "body": "Make sure to check whether the <code>action</code> is down or up so you don&#39;t get duplicates.  <code>if (keyCode == KeyEvent.KEYCODE_ENTER &amp;&amp; event.action == KeyEvent.ACTION_UP)</code>"}, {"owner": {"reputation": 1217, "user_id": 2972366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e0189818ee5082a29bfe11e0db4f0b72?s=128&d=identicon&r=PG&f=1", "display_name": "Shekh Shagar", "link": "https://stackoverflow.com/users/2972366/shekh-shagar"}, "reply_to_user": {"reputation": 867, "user_id": 3456751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ByOG3.jpg?s=128&g=1", "display_name": "eskimwier", "link": "https://stackoverflow.com/users/3456751/eskimwier"}, "edited": false, "score": 0, "creation_date": 1526960312, "post_id": 47298936, "comment_id": 87932086, "body": "Thanks for your feedback."}, {"owner": {"reputation": 190, "user_id": 5156056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUBy3.jpg?s=128&g=1", "display_name": "Pedro Antonio", "link": "https://stackoverflow.com/users/5156056/pedro-antonio"}, "edited": false, "score": 0, "creation_date": 1600702782, "post_id": 47298936, "comment_id": 113164011, "body": "i used return@OnKeyListener false to hide keyboard after perfoming actions"}], "tags": [], "owner": {"reputation": 1217, "user_id": 2972366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e0189818ee5082a29bfe11e0db4f0b72?s=128&d=identicon&r=PG&f=1", "display_name": "Shekh Shagar", "link": "https://stackoverflow.com/users/2972366/shekh-shagar"}, "is_accepted": true, "score": 50, "last_activity_date": 1530231913, "last_edit_date": 1530231913, "creation_date": 1510717037, "answer_id": 47298936, "question_id": 47298935, "link": "https://stackoverflow.com/questions/47298935/handling-enter-key-on-edittext-kotlin-android/47298936#47298936", "title": "Handling Enter Key on EditText (Kotlin, Android)", "body": "<p>Bellow is the simplest solution for above question</p>\n\n<pre><code>    editText.setOnKeyListener(View.OnKeyListener { v, keyCode, event -&gt;\n                if (keyCode == KeyEvent.KEYCODE_ENTER &amp;&amp; event.action == KeyEvent.ACTION_UP) {\n                    //Perform Code \n                    return@OnKeyListener true\n                }\n                false\n            })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 519, "user_id": 7839518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b148c4e97cd7cf211d4b0c417a0e436a?s=128&d=identicon&r=PG", "display_name": "Tonnie", "link": "https://stackoverflow.com/users/7839518/tonnie"}, "is_accepted": false, "score": 2, "last_activity_date": 1603178023, "creation_date": 1603178023, "answer_id": 64440225, "question_id": 47298935, "link": "https://stackoverflow.com/questions/47298935/handling-enter-key-on-edittext-kotlin-android/64440225#64440225", "title": "Handling Enter Key on EditText (Kotlin, Android)", "body": "<p>I used the <strong>when-expression</strong> to check if the enter-button was clicked</p>\n<pre><code>edittext.setOnKeyListener { v, keyCode, event -&gt;\n        \n        when {\n\n            //Check if it is the Enter-Key,      Check if the Enter Key was pressed down\n            ((keyCode == KeyEvent.KEYCODE_ENTER) &amp;&amp; (event.action == KeyEvent.ACTION_DOWN)) -&gt; {\n                \n                \n                //perform an action here e.g. a send message button click\n                sendButton.performClick()\n\n                //return true\n                return@setOnKeyListener true\n            }\n            else -&gt; false\n        }\n\n\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 551, "user_id": 6805392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VviGP.jpg?s=128&g=1", "display_name": "F.Mysir", "link": "https://stackoverflow.com/users/6805392/f-mysir"}, "is_accepted": false, "score": 1, "last_activity_date": 1610089687, "last_edit_date": 1610089687, "creation_date": 1607073382, "answer_id": 65140831, "question_id": 47298935, "link": "https://stackoverflow.com/questions/47298935/handling-enter-key-on-edittext-kotlin-android/65140831#65140831", "title": "Handling Enter Key on EditText (Kotlin, Android)", "body": "<p><strong>Step 1 [Important]</strong>\nSpecify in XML two attributes:</p>\n<ol>\n<li><code>android:imeOptions</code> in order to show the user the correct button to press</li>\n<li><code>android:inputType</code> in order to tell the user what text he has to input, numbers text etc</li>\n</ol>\n<p><strong>Step 2</strong> Add in your Kotlin file:</p>\n<pre><code>yourEditText.setOnEditorActionListener { _, keyCode, event -&gt;\n        if (((event?.action ?: -1) == KeyEvent.ACTION_DOWN)\n          || keyCode == EditorInfo.IME_PUT_THE_ACTION_YOU_HAVE_SET_UP_IN_STEP_1) {\n          \n             // Your code here\n\n            return@setOnEditorActionListener true\n        }\n        return@setOnEditorActionListener false\n}\n</code></pre>\n<p>This code handles both hardware and software <code>enter</code> key. The reason I choose <code>setOnEditorActionListener</code> is because it handles better this action. According to Docs:</p>\n<pre><code>   /**\n     * Set a special listener to be called when an action is performed\n     * on the text view.  This will be called when the enter key is pressed,\n     * or when an action supplied to the IME is selected by the user.  Setting\n     * this means that the normal hard key event will not insert a newline\n     * into the text view, even if it is multi-line; holding down the ALT\n     * modifier will, however, allow the user to insert a newline character.\n     */\n</code></pre>\n"}], "owner": {"reputation": 1217, "user_id": 2972366, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e0189818ee5082a29bfe11e0db4f0b72?s=128&d=identicon&r=PG&f=1", "display_name": "Shekh Shagar", "link": "https://stackoverflow.com/users/2972366/shekh-shagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15987, "favorite_count": 1, "accepted_answer_id": 47298936, "answer_count": 3, "score": 23, "last_activity_date": 1610089687, "creation_date": 1510717037, "question_id": 47298935, "link": "https://stackoverflow.com/questions/47298935/handling-enter-key-on-edittext-kotlin-android", "title": "Handling Enter Key on EditText (Kotlin, Android)", "body": "<p>How to handle Enter Key on EditText in Android Kotlin Language?</p>\n"}, {"tags": ["spring", "spring-boot", "dependency-injection", "kotlin"], "comments": [{"owner": {"reputation": 251344, "user_id": 438154, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/827d86026ddc062f449ccedece1c52da?s=128&d=identicon&r=PG&f=1", "display_name": "Sotirios Delimanolis", "link": "https://stackoverflow.com/users/438154/sotirios-delimanolis"}, "edited": false, "score": 1, "creation_date": 1510708617, "post_id": 47297844, "comment_id": 81547235, "body": "That&#39;s a handler method. It&#39;s invoked when you receive a request and Spring MVC determines that it&#39;s meant to be handled by that method. Spring MVC doesn&#39;t do any type of <code>@Autowired</code> injection. There are a number of supported parameter types (some with annotations) and those are documented in the spec."}, {"owner": {"reputation": 630, "user_id": 2856924, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2bcb2f9cb8aaf524a196638479d30050?s=128&d=identicon&r=PG&f=1", "display_name": "user2477", "link": "https://stackoverflow.com/users/2856924/user2477"}, "reply_to_user": {"reputation": 251344, "user_id": 438154, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/827d86026ddc062f449ccedece1c52da?s=128&d=identicon&r=PG&f=1", "display_name": "Sotirios Delimanolis", "link": "https://stackoverflow.com/users/438154/sotirios-delimanolis"}, "edited": false, "score": 0, "creation_date": 1510708992, "post_id": 47297844, "comment_id": 81547330, "body": "After reread the docs, i realize this is really a stupid question :(. @Autowired is meant to be used in field, constructor and setter method."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8942743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eeb95a7729c97a19d43ef949bd1905b?s=128&d=identicon&r=PG&f=1", "display_name": "nzcoffeem", "link": "https://stackoverflow.com/users/8942743/nzcoffeem"}, "is_accepted": false, "score": 0, "last_activity_date": 1510717649, "creation_date": 1510717649, "answer_id": 47299027, "question_id": 47297844, "link": "https://stackoverflow.com/questions/47297844/autowired-doesnt-work-in-method-parameter/47299027#47299027", "title": "@Autowired doesn&#39;t work in method parameter", "body": "<p>According to documentation:</p>\n\n<blockquote>\n  <p>Marks a constructor, field, setter method or config method as to be\n  autowired by Spring's dependency injection facilities.</p>\n</blockquote>\n\n<p>In your first example, Spring will not autowire anything.</p>\n"}], "owner": {"reputation": 630, "user_id": 2856924, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2bcb2f9cb8aaf524a196638479d30050?s=128&d=identicon&r=PG&f=1", "display_name": "user2477", "link": "https://stackoverflow.com/users/2856924/user2477"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1479, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1510717649, "creation_date": 1510708226, "question_id": 47297844, "link": "https://stackoverflow.com/questions/47297844/autowired-doesnt-work-in-method-parameter", "title": "@Autowired doesn&#39;t work in method parameter", "body": "<p>Here is my AppConfig:</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan\nclass AppConfig{\n    @Bean(\"myname\")\n    fun name(): Name = Name(\"Quang\")\n}\n</code></pre>\n\n<p>Data class:</p>\n\n<pre><code>data class Name(val value: String =\"\")\n</code></pre>\n\n<p>My Controller Class:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/\")\nclass Main{\n    @RequestMapping(\"/\")\n    @ResponseBody\n    fun index(@Autowired @Qualifier(\"myname\") name: Name): Name {\n        //this return \"\"\n        return name\n    }\n}\n</code></pre>\n\n<p>The result is \"\" instead of \"Quang\".\nBut now if I inject it from field like this, it works fine:</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/\")\nclass Main{\n    @Autowired(required = true)\n    @Qualifier(\"myname\")\n    lateinit var name:Name\n    @RequestMapping(\"/\")\n    @ResponseBody\n    fun index(): Name {\n        //this return \"Quang\" as expected\n        return name\n    }\n}\n</code></pre>\n\n<p>So can you explain why @Autowired doesn't works when I use it in method parameter </p>\n"}, {"tags": ["android", "kotlin", "anko"], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1510728575, "creation_date": 1510728575, "answer_id": 47301058, "question_id": 47297302, "link": "https://stackoverflow.com/questions/47297302/receiver-type-mismatch-with-anko-layouts/47301058#47301058", "title": "Receiver Type Mismatch with Anko Layouts", "body": "<blockquote>\n  <p>DSL works ok from the v7 AppCompatActivity</p>\n</blockquote>\n\n<p>And in the list of candidates in the screenshot you can see it's defined as an extension function on <code>Activity</code>, and an <code>AppCompatActivity</code> is an <code>Activity</code>. </p>\n\n<p>Your receiver (<code>this</code>) is the <code>HomeAdapter</code>, which doesn't extend <code>Activity</code>, <code>Context</code> or <code>ViewManager</code>. </p>\n\n<p>If you call <code>context.verticalLayout</code> it will compile, but I don't know whether the result is what you want.</p>\n"}], "owner": {"reputation": 2370, "user_id": 786691, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/6hxSw.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/786691/himanshu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 47301058, "answer_count": 1, "score": 0, "last_activity_date": 1510728575, "creation_date": 1510704179, "question_id": 47297302, "link": "https://stackoverflow.com/questions/47297302/receiver-type-mismatch-with-anko-layouts", "title": "Receiver Type Mismatch with Anko Layouts", "body": "<p>I am trying to create layouts with Anko DSL in my support v4 Fragment but the IDE shows receiver type mismatch. DSL works ok from the v7 AppCompatActivity. In trying to get this to work I have updated to Android Studio 3.0. I have also updated the dependencies in build.gradle's as some other threads suggested. </p>\n\n<p>Here are the dependencies in my app's build.gradle</p>\n\n<pre><code>dependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    compile 'com.android.support:appcompat-v7:25.4.0'\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n    compile 'com.android.support:design:25.4.0'\n    compile 'com.android.support:support-v4:25.4.0'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    compile \"org.jetbrains.anko:anko:$anko_version\"\n    compile \"org.jetbrains.anko:anko-appcompat-v7-commons:$anko_version\"\n    compile \"org.jetbrains.anko:anko-appcompat-v7:$anko_version\"\n    compile \"org.jetbrains.anko:anko-support-v4-commons:$anko_version\"\n    compile \"org.jetbrains.anko:anko-support-v4:$anko_version\"\n}\n</code></pre>\n\n<p>and the dependencies in project's build.gradle </p>\n\n<pre><code>dependencies {\n    classpath 'com.android.tools.build:gradle:3.0.0'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    classpath \"org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version\"\n}\n</code></pre>\n\n<p>I have also seen this Question <a href=\"https://stackoverflow.com/questions/44414041/receiver-type-mismatch-with-fragment-and-anko-toast\">&#39;receiver type mismatch&#39; with Fragment and Anko toast</a> </p>\n\n<p>But I am still stuck.</p>\n\n<p><a href=\"https://i.stack.imgur.com/J4rKq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J4rKq.png\" alt=\"Screenshot\"></a></p>\n"}, {"tags": ["kotlin", "kodein"], "answers": [{"tags": [], "owner": {"reputation": 7879, "user_id": 1269640, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/41b92fffd289939497f29809d146c59d?s=128&d=identicon&r=PG", "display_name": "Salomon BRYS", "link": "https://stackoverflow.com/users/1269640/salomon-brys"}, "is_accepted": true, "score": 2, "last_activity_date": 1510847297, "last_edit_date": 1510847297, "creation_date": 1510838341, "answer_id": 47330712, "question_id": 47297002, "link": "https://stackoverflow.com/questions/47297002/is-it-possible-to-bind-a-class-member-in-kodein/47330712#47330712", "title": "Is it possible to bind a class member in kodein?", "body": "<p>Very simple :</p>\n\n<pre><code>bind&lt;B&gt;() with provider { instance&lt;A&gt;().b }\n</code></pre>\n\n<p>The <code>provider</code> binding is the simplest one : it will call the provided function everytime.\nThe function itself runs inside a Kodein context, hence the use of the <code>instance</code> function.</p>\n"}], "owner": {"reputation": 396, "user_id": 5796683, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Um7-Xi4lh34/AAAAAAAAAAI/AAAAAAAAAEI/PTYWgfmjURI/photo.jpg?sz=128", "display_name": "Krystian Kaniowski", "link": "https://stackoverflow.com/users/5796683/krystian-kaniowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 47330712, "answer_count": 1, "score": 0, "last_activity_date": 1510847297, "creation_date": 1510702179, "question_id": 47297002, "link": "https://stackoverflow.com/questions/47297002/is-it-possible-to-bind-a-class-member-in-kodein", "title": "Is it possible to bind a class member in kodein?", "body": "<p>There is 2 classes:</p>\n\n<ul>\n<li>A - base class</li>\n<li>B - class of member of A</li>\n</ul>\n\n<p>with implementation something like this:</p>\n\n<pre><code>class A {\n   val b : B = B() \n}\n\nclass B\n</code></pre>\n\n<p><strong>Problem</strong></p>\n\n<p>Is it possible to create a binding for <code>b</code> to hide redundant info about <code>b</code> source in common classes?</p>\n\n<p>Kodein declaration:</p>\n\n<pre><code>override val kodein by Kodein.lazy {\n\n    bind&lt;A&gt;() with singleton { A() }\n    bind&lt;B&gt;() with \"a.b some impl???\"\n\n}\n</code></pre>\n\n<p>Usecase</p>\n\n<pre><code>class Usecase(kodein : Kodein){\n\n    val b : B = kodein.instance()\n\n}\n</code></pre>\n"}, {"tags": ["android", "unit-testing", "kotlin", "rx-java", "rx-java2"], "answers": [{"comments": [{"owner": {"reputation": 34840, "user_id": 53501, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8bdc16a462a5bb88c8986e7bd193078d?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/53501/rich"}, "edited": false, "score": 0, "creation_date": 1525292809, "post_id": 47301174, "comment_id": 87304224, "body": "Just googled this issue and got here.  Probably should have just asked it in Slack.  lol"}], "tags": [], "owner": {"reputation": 5351, "user_id": 620138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d02edc21d79a4015690af79f54678a?s=128&d=identicon&r=PG", "display_name": "Aaron He", "link": "https://stackoverflow.com/users/620138/aaron-he"}, "is_accepted": false, "score": 8, "last_activity_date": 1510729039, "creation_date": 1510729039, "answer_id": 47301174, "question_id": 47296993, "link": "https://stackoverflow.com/questions/47296993/unit-testing-rxjava-observables-that-have-a-delay/47301174#47301174", "title": "Unit testing Rxjava observables that have a delay", "body": "<p><a href=\"http://reactivex.io/RxJava/javadoc/io/reactivex/schedulers/TestScheduler.html\" rel=\"noreferrer\"><code>TestScheduler</code></a> is perfect for this. It has a handy method <code>advanceTimeBy(long, TimeUnit)</code> allows you to control the timing. And <code>Observable.delay</code> has an <a href=\"http://reactivex.io/RxJava/javadoc/io/reactivex/Observable.html#delay-long-java.util.concurrent.TimeUnit-io.reactivex.Scheduler-\" rel=\"noreferrer\">overload method</a> takes a <code>Scheduler</code>. </p>\n\n<p>So just use the default <code>Scheduler.computation()</code> in the <code>myObservable</code> function, and use <code>TestScheduler</code> for unit testing.</p>\n"}, {"tags": [], "owner": {"reputation": 16751, "user_id": 602094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/725306370a270aec71f052f366496ddb?s=128&d=identicon&r=PG", "display_name": "triad", "link": "https://stackoverflow.com/users/602094/triad"}, "is_accepted": true, "score": 38, "last_activity_date": 1510769466, "creation_date": 1510769466, "answer_id": 47314479, "question_id": 47296993, "link": "https://stackoverflow.com/questions/47296993/unit-testing-rxjava-observables-that-have-a-delay/47314479#47314479", "title": "Unit testing Rxjava observables that have a delay", "body": "<p>I was able to come up with a complete solution thanks to @aaron-he's answer.</p>\n\n<p>It uses a combination of <code>TestScheduler</code> to advance the time and also <code>RxJavaPlugins</code> to override the default scheduler with the testScheduler. This allowed testing the <code>myObservable()</code> function without modification or needing to pass in a <code>Scheduler</code>.</p>\n\n<pre><code>@Before\nfun setUp() = RxJavaPlugins.reset()\n\n@After\nfun tearDown() = RxJavaPlugins.reset()\n\n@Test\nfun testMyObservable() {\n    val testScheduler = TestScheduler()\n    RxJavaPlugins.setComputationSchedulerHandler { testScheduler }\n\n    val testObservable = myObservable().test()\n    myObservable.onNext(true)\n\n    testScheduler.advanceTimeBy(2, TimeUnit.SECONDS)\n    testObservable.assertEmpty()\n    testScheduler.advanceTimeBy(2, TimeUnit.SECONDS)\n    testObservable.assertValue(true)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8237, "user_id": 2425851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fFyvZ.png?s=128&g=1", "display_name": "NickUnuchek", "link": "https://stackoverflow.com/users/2425851/nickunuchek"}, "is_accepted": false, "score": 1, "last_activity_date": 1568971009, "creation_date": 1568971009, "answer_id": 58025404, "question_id": 47296993, "link": "https://stackoverflow.com/questions/47296993/unit-testing-rxjava-observables-that-have-a-delay/58025404#58025404", "title": "Unit testing Rxjava observables that have a delay", "body": "<p>Found some strange behaviour of <code>PublishSubject</code> it need some time for subscribe, for example the test is failed:</p>\n\n<pre><code>private val scheduler = TestScheduler()\n    @Test\n    fun publishSubjectFailedTest() {\n        val callback: DelayCallback = mock()\n\n        val myPublishSubject: PublishSubject&lt;Boolean&gt; = PublishSubject.create()\n        myPublishSubject\n            .delay(10, TimeUnit.SECONDS, scheduler)\n            .subscribeOn(scheduler)\n            .observeOn(scheduler)\n            .subscribe(\n                Consumer&lt;Boolean&gt; {\n                    callback.onCalldown()\n                },\n                Consumer&lt;Throwable&gt; {\n\n                },\n                Action {\n\n                }\n            )\n        myPublishSubject.onNext(true)\n        scheduler.advanceTimeBy(20, TimeUnit.SECONDS)\n        verify(callback, times(1)).onCalldown()\n    }\n\n</code></pre>\n\n<p>But if we add a time of <code>scheduler</code> before call <code>onNext</code>, for example <code>scheduler.advanceTimeBy(1, TimeUnit.NANOSECONDS)</code>\nthen the test will be success:</p>\n\n<pre><code> @Test\n    fun publishSubjectSuccessTest() {\n        val callback: DelayCallback = mock()\n\n        val myPublishSubject: PublishSubject&lt;Boolean&gt; = PublishSubject.create()\n        myPublishSubject\n            .delay(10, TimeUnit.SECONDS, scheduler)\n            .subscribeOn(scheduler)\n            .observeOn(scheduler)\n            .subscribe(\n                Consumer&lt;Boolean&gt; {\n                    callback.onCalldown()\n                },\n                Consumer&lt;Throwable&gt; {\n\n                },\n                Action {\n\n                }\n            )\n        scheduler.advanceTimeBy(1, TimeUnit.NANOSECONDS)//added time of scheduler\n        myPublishSubject.onNext(true)\n        scheduler.advanceTimeBy(20, TimeUnit.SECONDS)\n        verify(callback, times(1)).onCalldown()\n    }\n</code></pre>\n"}], "owner": {"reputation": 16751, "user_id": 602094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/725306370a270aec71f052f366496ddb?s=128&d=identicon&r=PG", "display_name": "triad", "link": "https://stackoverflow.com/users/602094/triad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7502, "favorite_count": 4, "accepted_answer_id": 47314479, "answer_count": 3, "score": 14, "last_activity_date": 1568971009, "creation_date": 1510702125, "question_id": 47296993, "link": "https://stackoverflow.com/questions/47296993/unit-testing-rxjava-observables-that-have-a-delay", "title": "Unit testing Rxjava observables that have a delay", "body": "<p>I want to be able to unit test an <code>Observable</code> that has a delayed emission, but without actually waiting for the delay time. Is there a way to do this? </p>\n\n<p>I'm currently using a CountDownHatch to delay the assert, and that works fine, but increases the test run time.</p>\n\n<p>Example:</p>\n\n<pre><code>val myObservable: PublishSubject&lt;Boolean&gt; = PublishSubject.create&lt;Boolean&gt;()\nfun myObservable(): Observable&lt;Boolean&gt; = myObservable.delay(3, TimeUnit.SECONDS)\n\n@Test\nfun testMyObservable() {\n    val testObservable = myObservable().test()\n    myObservable.onNext(true)\n\n    // val lock = CountDownLatch(1)\n    // lock.await(3100, TimeUnit.MILLISECONDS)\n    testObservable.assertValue(true)\n}\n</code></pre>\n"}, {"tags": ["arrays", "string", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 11435, "user_id": 6328256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyZe2.png?s=128&g=1", "display_name": "Sash Sinha", "link": "https://stackoverflow.com/users/6328256/sash-sinha"}, "is_accepted": false, "score": 1, "last_activity_date": 1510699228, "creation_date": 1510699228, "answer_id": 47296455, "question_id": 47296389, "link": "https://stackoverflow.com/questions/47296389/how-to-check-if-an-array-of-strings-is-sorted-in-alphabetical-order-or-not-using/47296455#47296455", "title": "How to check if an Array of strings is sorted in alphabetical order or not using Kotlin?", "body": "<p>Im sure you could do your desired task completely using a for-loop.</p>\n\n<p>However in Kotlin I personally think it would be more idiomatic to do something like this using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/until.html\" rel=\"nofollow noreferrer\"><strong>until</strong></a>:</p>\n\n<pre><code>fun isAlphabetical(stringsArray: Array&lt;String&gt;): Boolean {\n    if (stringsArray.size &lt; 2) return true\n    return (1 until stringsArray.size).none { stringsArray[it] &lt;= stringsArray[it - 1] }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val testCases = arrayOf(arrayOf(\"adam\", \"ben\", \"chloe\"), arrayOf(\"ben\", \"adam\", \"chloe\"))\n\n    for(testCase : Array&lt;String&gt; in testCases){\n        println(\"The strings are: ${testCase.joinToString()}\")\n        if (isAlphabetical(testCase)) {\n            println(\"Strings are in alphabetical order.\\n\")\n        } else {\n            println(\"Strings are not in alphabetical order.\\n\")        \n        }\n    }    \n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>The strings are: adam, ben, chloe\nStrings are in alphabetical order.\n\nThe strings are: ben, adam, chloe\nStrings are not in alphabetical order.\n</code></pre>\n\n<p>Basically you only compare each element of the array with the previous element (using <code>&lt;=</code>) if the length of the array is more than <code>1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 738, "user_id": 6476869, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XIl_sT2OCmY/AAAAAAAAAAI/AAAAAAAAAM4/V2GneAv-r-Q/photo.jpg?sz=128", "display_name": "Ashish Chaudhary", "link": "https://stackoverflow.com/users/6476869/ashish-chaudhary"}, "edited": false, "score": 0, "creation_date": 1515614546, "post_id": 47296632, "comment_id": 83371207, "body": "Better to stop when a violation is found. This works better in place of <code>.all</code> : <code>.none { (a, b) -&gt; a &gt; b }</code>"}, {"owner": {"reputation": 8455, "user_id": 1349366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1f9a569a1c0af19fbe093e2ed751a7?s=128&d=identicon&r=PG", "display_name": "Aivean", "link": "https://stackoverflow.com/users/1349366/aivean"}, "reply_to_user": {"reputation": 738, "user_id": 6476869, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XIl_sT2OCmY/AAAAAAAAAAI/AAAAAAAAAM4/V2GneAv-r-Q/photo.jpg?sz=128", "display_name": "Ashish Chaudhary", "link": "https://stackoverflow.com/users/6476869/ashish-chaudhary"}, "edited": false, "score": 0, "creation_date": 1515615252, "post_id": 47296632, "comment_id": 83371543, "body": "@AshishChaudhary it doesn&#39;t matter. These functions are symmetrical and both stop when first violation is found."}], "tags": [], "owner": {"reputation": 8455, "user_id": 1349366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1f9a569a1c0af19fbe093e2ed751a7?s=128&d=identicon&r=PG", "display_name": "Aivean", "link": "https://stackoverflow.com/users/1349366/aivean"}, "is_accepted": false, "score": 9, "last_activity_date": 1563210163, "last_edit_date": 1563210163, "creation_date": 1510700155, "answer_id": 47296632, "question_id": 47296389, "link": "https://stackoverflow.com/questions/47296389/how-to-check-if-an-array-of-strings-is-sorted-in-alphabetical-order-or-not-using/47296632#47296632", "title": "How to check if an Array of strings is sorted in alphabetical order or not using Kotlin?", "body": "<p><strong>UPD:</strong> Since Kotlin 1.2 the following is available:</p>\n\n<p>Most efficient variant, creates smallest amount of intermediate objects:</p>\n\n<pre><code>listOf(1, 2, 3).asSequence().zipWithNext { a, b -&gt; a &lt;= b }.all { it }\n</code></pre>\n\n<p>Slightly less efficient variant:</p>\n\n<pre><code>listOf(1, 2, 3).asSequence().windowed(2).all { (a, b) -&gt; a &lt;= b }\n</code></pre>\n\n<p>It's slightly less efficient, as it creates creates intermediate <code>List(a, b)</code> for every element of the original list.</p>\n\n<p>Both of these variants were listed in the answers below by @Billbucket and @AshishChaudhary.</p>\n\n<hr>\n\n<p><strong>Old answer, for previous versions of Kotlin:</strong></p>\n\n<p>Here is a one liner:</p>\n\n<pre><code>val a = listOf(\"a\", \"b\", \"c\")\na.zip(a.drop(1)).all { (a, b) -&gt; a &lt;= b }\n// true\n</code></pre>\n\n<p>Explanation:</p>\n\n<p><code>a.zip(a.drop(1))</code> returns pairs of neighbour elements. If in every pair first element is less or equal to the next, array is in order.</p>\n\n<p>If you want to improve performance, you can wrap your array in lazy sequence first. In this case array won't be copied:</p>\n\n<pre><code>a.asSequence().let { it.zip(it.drop(1)).all { (a, b) -&gt; a &lt; b }  }\n</code></pre>\n\n<p>The whole thing is <code>O(N)</code> (single pass through array), which is optimal for this task.</p>\n"}, {"tags": [], "owner": {"reputation": 1055, "user_id": 4431008, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fdcd2f6c77cd25aa0c827bd2340c3623?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Rubin", "link": "https://stackoverflow.com/users/4431008/julian-rubin"}, "is_accepted": false, "score": 0, "last_activity_date": 1510701167, "creation_date": 1510701167, "answer_id": 47296822, "question_id": 47296389, "link": "https://stackoverflow.com/questions/47296389/how-to-check-if-an-array-of-strings-is-sorted-in-alphabetical-order-or-not-using/47296822#47296822", "title": "How to check if an Array of strings is sorted in alphabetical order or not using Kotlin?", "body": "<p>Yet another solution :)</p>\n\n<pre><code>data class Result(val isInOrder: Boolean, val lastString: String) {\n    val toString = when {\n        isInOrder -&gt; \"Strings are in alphabetical order.\"\n        else -&gt; \"Strings are not in alphabetical order.\"\n    }\n}\n\nfun Array&lt;String&gt;.isInAlphabeticalOrder() =\n    this.fold(Result(true, \"\"), { acc, word -&gt; Result(acc.isInOrder &amp;&amp; acc.lastString &lt; word, word) })\n\nfun main(args: Array&lt;String&gt;) {\n    val test1 = arrayOf(\"adam\", \"ben\", \"chloe\")\n    val test2 = arrayOf(\"ben\", \"adam\", \"chloe\")\n    println(test1.isInAlphabeticalOrder().toString)\n    println(test2.isInAlphabeticalOrder().toString)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1308, "user_id": 2581809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33afb2c1d879183a3b1e0f9418dd3195?s=128&d=identicon&r=PG", "display_name": "Ekeko", "link": "https://stackoverflow.com/users/2581809/ekeko"}, "is_accepted": false, "score": 1, "last_activity_date": 1510792469, "creation_date": 1510792469, "answer_id": 47319656, "question_id": 47296389, "link": "https://stackoverflow.com/questions/47296389/how-to-check-if-an-array-of-strings-is-sorted-in-alphabetical-order-or-not-using/47319656#47319656", "title": "How to check if an Array of strings is sorted in alphabetical order or not using Kotlin?", "body": "<p>A very simple and easy way to accomplish it is by sorting and comparing the original list with the sorted one (two lists are equal when they have the exact same elements in the same order). Since you mentioned you are dealing with an array, you first need to convert it to a list. This solution is not the best in terms of performance (it's <code>O(n log n)</code> and converts the array twice to a list) but it's very readable:</p>\n\n<pre><code>val test = array.asList() == array.asList().sorted()\n</code></pre>\n\n<p>The full code for your question could be:</p>\n\n<pre><code>println(if (array.asList() == array.asList().sorted()) \"Strings are in alphabetical order.\" else \"Strings are not in alphabetical order.\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8455, "user_id": 1349366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1f9a569a1c0af19fbe093e2ed751a7?s=128&d=identicon&r=PG", "display_name": "Aivean", "link": "https://stackoverflow.com/users/1349366/aivean"}, "edited": false, "score": 0, "creation_date": 1515615455, "post_id": 48195143, "comment_id": 83371653, "body": "<code>windowed</code> is a good catch. But note, it is available only since Kotlin 1.2."}], "tags": [], "owner": {"reputation": 738, "user_id": 6476869, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XIl_sT2OCmY/AAAAAAAAAAI/AAAAAAAAAM4/V2GneAv-r-Q/photo.jpg?sz=128", "display_name": "Ashish Chaudhary", "link": "https://stackoverflow.com/users/6476869/ashish-chaudhary"}, "is_accepted": false, "score": 1, "last_activity_date": 1515614260, "creation_date": 1515614260, "answer_id": 48195143, "question_id": 47296389, "link": "https://stackoverflow.com/questions/47296389/how-to-check-if-an-array-of-strings-is-sorted-in-alphabetical-order-or-not-using/48195143#48195143", "title": "How to check if an Array of strings is sorted in alphabetical order or not using Kotlin?", "body": "<p>Another solution:</p>\n\n<pre><code>val list = listOf(\"a\", \"b\", \"c\")\nlist.windowed(2).none { (a, b) -&gt; a &gt; b }\n// true\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1517673004, "post_id": 48596792, "comment_id": 84194802, "body": "this makes a.zip(a.drop(1)) even nicer :)"}, {"owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "edited": false, "score": 4, "creation_date": 1547550638, "post_id": 48596792, "comment_id": 95222007, "body": "<code>array.zipWithNext().all { it.first &lt;= it.second }</code>"}], "tags": [], "owner": {"reputation": 98, "user_id": 2800211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc9f3e76decdf57436bd009811406850?s=128&d=identicon&r=PG&f=1", "display_name": "Billbucket", "link": "https://stackoverflow.com/users/2800211/billbucket"}, "is_accepted": false, "score": 5, "last_activity_date": 1517656899, "creation_date": 1517656899, "answer_id": 48596792, "question_id": 47296389, "link": "https://stackoverflow.com/questions/47296389/how-to-check-if-an-array-of-strings-is-sorted-in-alphabetical-order-or-not-using/48596792#48596792", "title": "How to check if an Array of strings is sorted in alphabetical order or not using Kotlin?", "body": "<p>you can use a simple one-liner:</p>\n\n<pre><code>array.zipWithNext { s1, s2 -&gt; s1 &lt;= s2 }.all { it }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2416, "user_id": 2627680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xRIPs.jpg?s=128&g=1", "display_name": "headsvk", "link": "https://stackoverflow.com/users/2627680/headsvk"}, "edited": false, "score": 1, "creation_date": 1616588314, "post_id": 61046799, "comment_id": 118048098, "body": "This answer has worse performance because <code>asSequence()</code> is not used so <code>zipWithNext()</code> goes through the whole collection and returns a list."}, {"owner": {"reputation": 717, "user_id": 4919972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rEvvh.jpg?s=128&g=1", "display_name": "Kirill Groshkov", "link": "https://stackoverflow.com/users/4919972/kirill-groshkov"}, "reply_to_user": {"reputation": 2416, "user_id": 2627680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xRIPs.jpg?s=128&g=1", "display_name": "headsvk", "link": "https://stackoverflow.com/users/2627680/headsvk"}, "edited": false, "score": 0, "creation_date": 1616685318, "post_id": 61046799, "comment_id": 118085833, "body": "Yes, you&#39;re right!"}], "tags": [], "owner": {"reputation": 717, "user_id": 4919972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rEvvh.jpg?s=128&g=1", "display_name": "Kirill Groshkov", "link": "https://stackoverflow.com/users/4919972/kirill-groshkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1586108570, "creation_date": 1586108570, "answer_id": 61046799, "question_id": 47296389, "link": "https://stackoverflow.com/questions/47296389/how-to-check-if-an-array-of-strings-is-sorted-in-alphabetical-order-or-not-using/61046799#61046799", "title": "How to check if an Array of strings is sorted in alphabetical order or not using Kotlin?", "body": "<p>In case you want to compare arbitrary <code>Comparable</code> list:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;T : Comparable&lt;T&gt;&gt; isCollectionSortedAsc(list: Collection&lt;T&gt;): Boolean {\n  return list.zipWithNext { a, b -&gt; a.compareTo(b) == -1 }.all { it }\n}\n</code></pre>\n\n<p>Based on the accepted answer above: <a href=\"https://stackoverflow.com/a/47296632/4919972\">https://stackoverflow.com/a/47296632/4919972</a></p>\n"}], "owner": {"reputation": 61, "user_id": 8941876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73049e0cb1bab90f761d691ba8ecfc42?s=128&d=identicon&r=PG&f=1", "display_name": "JoelArmstrong", "link": "https://stackoverflow.com/users/8941876/joelarmstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3026, "favorite_count": 1, "answer_count": 7, "score": 6, "last_activity_date": 1586108570, "creation_date": 1510698939, "last_edit_date": 1517670193, "question_id": 47296389, "link": "https://stackoverflow.com/questions/47296389/how-to-check-if-an-array-of-strings-is-sorted-in-alphabetical-order-or-not-using", "title": "How to check if an Array of strings is sorted in alphabetical order or not using Kotlin?", "body": "<p>I am given a list of strings and I need to see if they are in alphabetical order.</p>\n\n<p>I know I need to use a for loop and check the first character of each string but I don't know how to progress from there.</p>\n\n<pre><code>for (item in array)\n     println(item[0])\n</code></pre>\n\n<p>For example <code>[\"adam\", \"ben\", \"chloe\"]</code> should return <code>true</code>.</p>\n\n<p>And likewise for <code>[\"ben\", \"adam\", \"chloe\"]</code> should return <code>false</code>.</p>\n"}, {"tags": ["kotlin", "companion-object"], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 0, "last_activity_date": 1510700500, "creation_date": 1510700500, "answer_id": 47296694, "question_id": 47296133, "link": "https://stackoverflow.com/questions/47296133/kotlin-accessing-companion-object-members-in-derived-types/47296694#47296694", "title": "Kotlin - accessing companion object members in derived types", "body": "<p>A companion object is a static member of its surrounding class:</p>\n\n<pre><code>public class Foo {\n   public static final Foo.Companion Companion;\n\n   public static final class Companion {\n      public final void fez() {\n      }\n\n     //constructors\n   }\n}\n</code></pre>\n\n<p>The call to <code>fez()</code> is compiled to :</p>\n\n<pre><code>Foo.Companion.fez();\n</code></pre>\n\n<p>FYI: The shown Java code shows a representation of the bytecode generated by Kotlin.</p>\n\n<p>As a result, you cannot call <code>Bar.fez()</code> because the Companion object in <code>Bar</code> does not have that method.</p>\n"}], "owner": {"reputation": 32231, "user_id": 1033686, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/KsvGz.jpg?s=128&g=1", "display_name": "Matthew Layton", "link": "https://stackoverflow.com/users/1033686/matthew-layton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "closed_date": 1510837717, "accepted_answer_id": 47296694, "answer_count": 1, "score": 1, "last_activity_date": 1523020399, "creation_date": 1510697664, "last_edit_date": 1523020399, "question_id": 47296133, "link": "https://stackoverflow.com/questions/47296133/kotlin-accessing-companion-object-members-in-derived-types", "closed_reason": "Duplicate", "title": "Kotlin - accessing companion object members in derived types", "body": "<p>Given the following code:</p>\n\n<pre><code>open class Foo {\n    companion object {\n        fun fez() {}\n    }\n}\n\nclass Bar : Foo() {\n    companion object {\n        fun baz() { fez() }\n    }\n}\n</code></pre>\n\n<ul>\n<li><code>baz()</code> can call <code>fez()</code></li>\n<li>I can call <code>Foo.fez()</code></li>\n<li>I can call <code>Bar.baz()</code></li>\n<li><strong>But, I cannot call <code>Bar.fez()</code></strong></li>\n</ul>\n\n<p>How do I achieve the final behaviour?</p>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 1, "creation_date": 1510697471, "post_id": 47296088, "comment_id": 81543424, "body": "subscribe on another thread."}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 1, "creation_date": 1510699302, "post_id": 47296088, "comment_id": 81544229, "body": "<i>to make return type generic I am using observables</i> - that&#39;s not what observables are for"}, {"owner": {"reputation": 2380, "user_id": 4721831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815f4b0a811b7e1b6148a2d21cdfe196?s=128&d=identicon&r=PG&f=1", "display_name": "trocchietto", "link": "https://stackoverflow.com/users/4721831/trocchietto"}, "edited": false, "score": 0, "creation_date": 1529439898, "post_id": 47296088, "comment_id": 88871393, "body": "Please consider to accept the response if helped you."}], "answers": [{"comments": [{"owner": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "edited": false, "score": 1, "creation_date": 1510698147, "post_id": 47296136, "comment_id": 81543757, "body": "I have my api call as : @GET(&quot;/path/to/the/end/point&quot;) fun getDataFromAPI(@QueryMap paramenters: HashMap&lt;String,String&gt;): Observable&lt;ReturnType&gt;  Not getting call to enqueue ."}, {"owner": {"reputation": 2380, "user_id": 4721831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815f4b0a811b7e1b6148a2d21cdfe196?s=128&d=identicon&r=PG&f=1", "display_name": "trocchietto", "link": "https://stackoverflow.com/users/4721831/trocchietto"}, "reply_to_user": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "edited": false, "score": 0, "creation_date": 1510698457, "post_id": 47296136, "comment_id": 81543887, "body": "OK so you are using RXJava because you have  an <code>Observable</code>! when you getDataFromAPI add the two lines showed above <code>subscribeOn</code> and <code>ObserveOn</code>. It will work, if you have problems study the tutorial enclosed is great for learning purposes."}, {"owner": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "edited": false, "score": 0, "creation_date": 1510698600, "post_id": 47296136, "comment_id": 81543941, "body": "Thanks, Trocchietto!"}, {"owner": {"reputation": 2380, "user_id": 4721831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815f4b0a811b7e1b6148a2d21cdfe196?s=128&d=identicon&r=PG&f=1", "display_name": "trocchietto", "link": "https://stackoverflow.com/users/4721831/trocchietto"}, "reply_to_user": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "edited": false, "score": 0, "creation_date": 1510698652, "post_id": 47296136, "comment_id": 81543966, "body": "you are really welcome @s.thakur please consider also the link I edited at end, somebody had your same problem, read the post"}, {"owner": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "edited": false, "score": 0, "creation_date": 1510701735, "post_id": 47296136, "comment_id": 81545159, "body": "Which library version should I use to get &quot;import rx.android.schedulers.AndroidSchedulers&quot;.  I am using &quot;io.reactivex.rxjava2:rxjava:2.0.1&quot; (which doens&#39;t have rx.android)"}, {"owner": {"reputation": 2380, "user_id": 4721831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815f4b0a811b7e1b6148a2d21cdfe196?s=128&d=identicon&r=PG&f=1", "display_name": "trocchietto", "link": "https://stackoverflow.com/users/4721831/trocchietto"}, "reply_to_user": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "edited": false, "score": 0, "creation_date": 1510781530, "post_id": 47296136, "comment_id": 81586265, "body": "@s.thakur good question at the moment I am using these two    <code>implementation &#39;io.reactivex.rxjava2:rxjava:2.1.1&#39;</code> and to come back to your question this one <code>implementation &#39;io.reactivex.rxjava2:rxandroid:2.0.1&#39;</code> that will give you AndroidSchedulers  (please note that you could substitute implementation with compile if your version of AStudio is &lt; than 3.0"}], "tags": [], "owner": {"reputation": 2380, "user_id": 4721831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815f4b0a811b7e1b6148a2d21cdfe196?s=128&d=identicon&r=PG&f=1", "display_name": "trocchietto", "link": "https://stackoverflow.com/users/4721831/trocchietto"}, "is_accepted": true, "score": 9, "last_activity_date": 1510700102, "last_edit_date": 1510700102, "creation_date": 1510697680, "answer_id": 47296136, "question_id": 47296088, "link": "https://stackoverflow.com/questions/47296088/how-to-create-asynchronous-call-using-retrofit-and-observables-in-kotlin/47296136#47296136", "title": "How to create Asynchronous Call using Retrofit and Observables in Kotlin?", "body": "<p>Looks really easy to solve, <strong>two cases to consider.</strong> :1)If you are not using RXJava or 2) if you are using it</p>\n\n<blockquote>\n  <p><strong>1) If you are NOT using RXJava</strong> </p>\n</blockquote>\n\n<p>You should use the method <a href=\"https://square.github.io/retrofit/2.x/retrofit/retrofit2/Call.html#enqueue-retrofit2.Callback-\" rel=\"noreferrer\">enqueue</a> when you make the call. The error you get is because you are calling the response on the same Thread(the MainThread)</p>\n\n<p>Here is an example took from the web that uses Enqueue with Kotlin that possibly you can adapt to your case</p>\n\n<pre><code>override fun loadPokemonList(pokemonListListener: PokemonListListener) {\n\n\n    call = pokemonService.getPokedex();\n    call.enqueue(object : Callback&lt;PokeDex&gt; {\n        override fun onResponse(call: Call&lt;PokeDex&gt;?, response: Response&lt;PokeDex&gt;?) {\n\n            if (response != null &amp;&amp; response.isSuccessful) {\n                pokemonListListener.onSuccess(response.body())\n            } else {\n                pokemonListListener.onFailure(appContext.getString(R.string.error_fetching_data))\n            }\n\n\n        }\n\n        override fun onFailure(call: Call&lt;PokeDex&gt;?, t: Throwable?) {\n            pokemonListListener.onFailure(appContext.getString(R.string.error_fetching_data))\n        }\n    })\n\n\n }\n</code></pre>\n\n<blockquote>\n  <p><strong>2) If you are using RXJava</strong>(usually version 2, be aware you will find several tutorials for the first version online)</p>\n</blockquote>\n\n<p>But please consider that most of the developers today solve this asynchronous call using RXJava2 that is the second case I was mentioning at the beginning of he post. <strong>It will take you several hours to understand the basics</strong> of it but once you will do, you will have a great skill to bring with you and manage this kind of calls( even multiple ones) will be really simple. In fact RXJava allows you really easy to direct the operation in a concurrent Thread and observe the result on the Main Thread. Here a good tutorial that explains how to <a href=\"https://medium.com/3xplore/handling-api-calls-using-retrofit-2-and-rxjava-2-1871c891b6ae\" rel=\"noreferrer\">do that</a>\nwith the easy and well known pattern (see the notations)</p>\n\n<pre><code>Observable&lt;List&lt;TrendsResponse&gt;&gt;\n    .subscribeOn(Schedulers.io())//Run the call on another Thread\n    .observeOn(AndroidSchedulers.mainThread())//observe on the Main Thread\n    .subscribe();\n</code></pre>\n\n<p>Differently by what people new to RXJava think:\n <strong><em>on default RXJava does not call a concurrent Thread</em></strong>, is up to you to do that with the <code>subcribeOn</code> that does all the \"dirty\" work and then to observe the result on the Main Thread with <code>ObserveOn</code>.</p>\n\n<p>For principiants is easy to grasp that comparing both of them to the two famous methods of AsyncTask: <code>doInBackground</code> and <code>onPostExecute</code></p>\n\n<p>EDIT: Please look also this <a href=\"https://stackoverflow.com/questions/34349334/rxjava-and-retrofit2-networkonmainthreadexception\">post</a> if you or future users have problems.</p>\n"}, {"comments": [{"owner": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "edited": false, "score": 0, "creation_date": 1510705687, "post_id": 47296426, "comment_id": 81546446, "body": "I am getting error when trying to add AndroidSchedulers.mainThread() ? I am using io.reactivex.rxjava2:rxjava.2.x.x and io.reactivex.rxjava2:rxandroid:2.x.x."}, {"owner": {"reputation": 9470, "user_id": 925478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/51c385b62e5fca7e554d61641fc2b15b?s=128&d=identicon&r=PG", "display_name": "Myk Willis", "link": "https://stackoverflow.com/users/925478/myk-willis"}, "reply_to_user": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "edited": false, "score": 0, "creation_date": 1510715534, "post_id": 47296426, "comment_id": 81548876, "body": "@s.thakur Make sure you don&#39;t have another (1.x?) version of rxandroid included, and that the import is coming from <code>import io.reactivex.android.schedulers.AndroidSchedulers;</code>"}], "tags": [], "owner": {"reputation": 9470, "user_id": 925478, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/51c385b62e5fca7e554d61641fc2b15b?s=128&d=identicon&r=PG", "display_name": "Myk Willis", "link": "https://stackoverflow.com/users/925478/myk-willis"}, "is_accepted": false, "score": 1, "last_activity_date": 1510699096, "creation_date": 1510699096, "answer_id": 47296426, "question_id": 47296088, "link": "https://stackoverflow.com/questions/47296088/how-to-create-asynchronous-call-using-retrofit-and-observables-in-kotlin/47296426#47296426", "title": "How to create Asynchronous Call using Retrofit and Observables in Kotlin?", "body": "<p>With Retrofit/RxJava, the network call will be default be performed on the thread that subscribes to the Observable returned from the stub. On Android, we are normally executing on the \"main\" thread, and it is not permitted to access the network on this thread, hence the error.</p>\n\n<p>The solution is to tell RxJava to subscribe to the Observable on a different thread:</p>\n\n<pre><code>getDataFromAPI(/*...*/)\n  .subscribeOn(Schedulers.io())\n  .observerOn(AndroidSchedulers.mainThread())\n  .subscribe({ /* result available in `it` */ })\n</code></pre>\n\n<p><code>Schedulers.io()</code> is a reference to a scheduler that uses a set of threads specifically intended to be used for IO operations.</p>\n\n<p>The <code>.observeOn</code> allows you to handle the result safely back on the main thread.</p>\n"}], "owner": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4492, "favorite_count": 4, "accepted_answer_id": 47296136, "answer_count": 2, "score": 4, "last_activity_date": 1510700102, "creation_date": 1510697457, "last_edit_date": 1510699440, "question_id": 47296088, "link": "https://stackoverflow.com/questions/47296088/how-to-create-asynchronous-call-using-retrofit-and-observables-in-kotlin", "title": "How to create Asynchronous Call using Retrofit and Observables in Kotlin?", "body": "<p>I want to make API calls using Retrofit2 library, returns generic type observable. </p>\n\n<p>I am getting an error: android.os.NetworkOnMainThreadException, while making calls.</p>\n"}, {"tags": ["android-studio", "kotlin", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 0, "creation_date": 1510741793, "post_id": 47295930, "comment_id": 81560382, "body": "Thanks for the code The above code doesn&#39;t change the &quot;-&quot; to &quot;+&quot;. Instead it print another &quot;-&quot; Ex . Button clicked first time -&gt; -123        Button clicked second time -&gt; --123"}, {"owner": {"reputation": 136, "user_id": 6597900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WW8eySOdgJk/AAAAAAAAAAI/AAAAAAAAAHA/85tb2MNVyyA/photo.jpg?sz=128", "display_name": "Midosh Brown", "link": "https://stackoverflow.com/users/6597900/midosh-brown"}, "reply_to_user": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 0, "creation_date": 1510749421, "post_id": 47295930, "comment_id": 81565403, "body": "@user2468312 post your new edited code so i can debug it and see what you have changed"}, {"owner": {"reputation": 136, "user_id": 6597900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WW8eySOdgJk/AAAAAAAAAAI/AAAAAAAAAHA/85tb2MNVyyA/photo.jpg?sz=128", "display_name": "Midosh Brown", "link": "https://stackoverflow.com/users/6597900/midosh-brown"}, "reply_to_user": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 0, "creation_date": 1510755825, "post_id": 47295930, "comment_id": 81569961, "body": "@user2468312 I edit my answer after tested it and it should work now.you can always use the Math class to make your job easier like I did with &quot;Math.abs&quot;"}, {"owner": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 0, "creation_date": 1510756416, "post_id": 47295930, "comment_id": 81570480, "body": "Thanks of the Support. Its worked fine. Much appreciated"}], "tags": [], "owner": {"reputation": 136, "user_id": 6597900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WW8eySOdgJk/AAAAAAAAAAI/AAAAAAAAAHA/85tb2MNVyyA/photo.jpg?sz=128", "display_name": "Midosh Brown", "link": "https://stackoverflow.com/users/6597900/midosh-brown"}, "is_accepted": true, "score": 1, "last_activity_date": 1510755519, "last_edit_date": 1510755519, "creation_date": 1510696778, "answer_id": 47295930, "question_id": 47295703, "link": "https://stackoverflow.com/questions/47295703/how-to-add-functionality-to-a-butting-in-kotlin-android/47295930#47295930", "title": "How to add +/- functionality to a butting in kotlin android", "body": "<p><strong>Edit</strong>:</p>\n\n<pre><code>    var emptyText = true\n    var isMinusPrinted=false//add this line here\n    fun numberEvents(view: View) {\n    var checkButton:Boolean = false\n    if(emptyText){\n        viewResult.setText(\"\")\n    }\n    emptyText = false\n\n    var button = view as Button\n    var isClicked = viewResult.text.toString()\n    when (button.id) {\n        buttonOne.id -&gt; isClicked += \"1\"\n        buttonTwo.id -&gt; isClicked += \"2\"\n        buttonThree.id -&gt; isClicked += \"3\"\n        dotButton.id-&gt; isClicked+=\".\"\n        plusMinusBtn.id-&gt;{//add this block of code from here\n\n        var resultWithoutMinus=Math.abs(isClicked.toInt()) //ex: 123\n\n\n        if(!isMinusPrinted){\n\n            isClicked = \"-\" + resultWithoutMinus//this line for example give result like: -123\n            isMinusPrinted=true\n        }\n        else{\n            isClicked=resultWithoutMinus //result became : 123\n            isMinusPrinted=false\n        }\n\n}//to here\n\n    }\n\n    viewResult.setText(isClicked)\n     }\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 47295930, "answer_count": 1, "score": 1, "last_activity_date": 1510755519, "creation_date": 1510695737, "last_edit_date": 1510750749, "question_id": 47295703, "link": "https://stackoverflow.com/questions/47295703/how-to-add-functionality-to-a-butting-in-kotlin-android", "title": "How to add +/- functionality to a butting in kotlin android", "body": "<p>I need to add new button with functionality of +/-. If user clicks the button for the first time the value should return -> \"-\" (ex => -123), if the user clicks again value \"-\" should be removed (ex => 123). The functionality is similar as +/- button in the calculator.</p>\n\n<p>Here is my code</p>\n\n<p>Activity.kt file</p>\n\n<pre><code> package com.tripbegins.calculator\n import android.support.v7.app.AppCompatActivity\n import android.os.Bundle\n import android.view.View\n import android.widget.Button\n import com.tripbegins.calculator.R.id.*\n import kotlinx.android.synthetic.main.activity_main.*\n\n class MainActivity : AppCompatActivity() {\n\n override fun onCreate(savedInstanceState: Bundle?) {\nsuper.onCreate(savedInstanceState)\nsetContentView(R.layout.activity_main)\n}\n\nvar emptyText = true\nfun numberEvents(view: View) {\nvar checkButton:Boolean = false\nif(emptyText){\n    viewResult.setText(\"\")\n}\nemptyText = false\n\nvar button = view as Button\nvar isClicked = viewResult.text.toString()\nwhen (button.id) {\n    buttonOne.id -&gt; isClicked += \"1\"\n    buttonTwo.id -&gt; isClicked += \"2\"\n    buttonThree.id -&gt; isClicked += \"3\"\n    dotButton.id-&gt; isClicked+=\".\"\n}\n\nviewResult.setText(isClicked)\n }\n\nvar operation =\"+\"\nvar oldValues:String? = null\n\nfun mathOperation(view: View){\nvar mathButton = view as Button\nvar isClicked = viewResult.text.toString()\n\nwhen(mathButton.id){\n    plusButton.id-&gt; {\n        operation = \"+\"\n    }\n    minusButton.id-&gt;{\n        operation=\"-\"\n    }\n    mulButton.id-&gt;{\n        operation=\"*\"\n    }\n\n}\noldValues = viewResult.text.toString()\nemptyText = true\n }\n\n fun Calculate(view: View){\n\nvar newValues = viewResult.text.toString()\nvar calulateButton:Double? = null\nwhen(operation){\n    \"+\"-&gt; { calulateButton = oldValues!!.toDouble() + \nnewValues.toDouble() }\n    \"-\"-&gt; { calulateButton = oldValues!!.toDouble() - \nnewValues.toDouble() }\n    \"*\"-&gt; { calulateButton = oldValues!!.toDouble() * \nnewValues.toDouble() }\n\n}\nviewResult.setText(calulateButton.toString())\nemptyText=true\n }\n fun clearFunction(view: View){\nviewResult.setText(\"\")\n }\n }\n</code></pre>\n\n<p>activity.xml file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout \nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\"com.tripbegins.calculator.MainActivity\"&gt;\n\n&lt;EditText\nandroid:id=\"@+id/viewResult\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginTop=\"42dp\"\nandroid:ems=\"10\"\nandroid:gravity=\"bottom|right\"\nandroid:inputType=\"textPersonName\"\nandroid:text=\"0\"\napp:layout_constraintEnd_toEndOf=\"parent\"\napp:layout_constraintStart_toStartOf=\"parent\"\napp:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n&lt;Button\nandroid:id=\"@+id/buttonTwo\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginStart=\"16dp\"\nandroid:layout_marginTop=\"76dp\"\nandroid:onClick=\"numberEvents\"\nandroid:text=\"2\"\napp:layout_constraintStart_toEndOf=\"@+id/buttonOne\"\napp:layout_constraintTop_toBottomOf=\"@+id/viewResult\" /&gt;\n\n&lt;Button\nandroid:id=\"@+id/plusButton\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginStart=\"38dp\"\nandroid:onClick=\"mathOperation\"\nandroid:text=\"+\"\napp:layout_constraintBaseline_toBaselineOf=\"@+id/minusButton\"\napp:layout_constraintStart_toStartOf=\"parent\" /&gt;\n\n&lt;Button\nandroid:id=\"@+id/minusButton\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginStart=\"12dp\"\nandroid:layout_marginTop=\"33dp\"\nandroid:onClick=\"mathOperation\"\nandroid:text=\"-\"\napp:layout_constraintStart_toEndOf=\"@+id/plusButton\"\napp:layout_constraintTop_toBottomOf=\"@+id/buttonTwo\" /&gt;\n\n&lt;Button\nandroid:id=\"@+id/mulButton\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginStart=\"26dp\"\nandroid:onClick=\"mathOperation\"\nandroid:text=\"*\"\napp:layout_constraintBaseline_toBaselineOf=\"@+id/minusButton\"\napp:layout_constraintStart_toEndOf=\"@+id/minusButton\" /&gt;\n\n&lt;Button\nandroid:id=\"@+id/calButton\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginTop=\"44dp\"\nandroid:onClick=\"Calculate\"\nandroid:text=\"Calculate\"\napp:layout_constraintStart_toStartOf=\"@+id/minusButton\"\napp:layout_constraintTop_toBottomOf=\"@+id/minusButton\" /&gt;\n\n&lt;Button\nandroid:id=\"@+id/buttonThree\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginStart=\"26dp\"\nandroid:onClick=\"numberEvents\"\nandroid:text=\"3\"\napp:layout_constraintBaseline_toBaselineOf=\"@+id/buttonTwo\"\napp:layout_constraintStart_toEndOf=\"@+id/buttonTwo\" /&gt;\n\n&lt;Button\nandroid:id=\"@+id/buttonOne\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginStart=\"34dp\"\nandroid:onClick=\"numberEvents\"\nandroid:text=\"1\"\napp:layout_constraintBaseline_toBaselineOf=\"@+id/buttonTwo\"\napp:layout_constraintStart_toStartOf=\"parent\" /&gt;\n\n&lt;Button\nandroid:id=\"@+id/dotButton\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginEnd=\"22dp\"\nandroid:onClick=\"numberEvents\"\nandroid:text=\".\"\napp:layout_constraintBaseline_toBaselineOf=\"@+id/calButton\"\napp:layout_constraintEnd_toStartOf=\"@+id/calButton\" /&gt;\n\n&lt;Button\nandroid:id=\"@+id/clearButton\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginStart=\"11dp\"\nandroid:onClick=\"clearFunction\"\nandroid:text=\"Clear\"\napp:layout_constraintBaseline_toBaselineOf=\"@+id/calButton\"\napp:layout_constraintStart_toEndOf=\"@+id/calButton\" /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>Updated Activity.kt file\nI have updated the code for the =/-. Added the var outside the function</p>\n\n<pre><code>  var emptyText = true\n  var isMinusPrinted=false\n  fun numberEvents(view: View)\n\n**Current result**\n\nIf button clicked for the first time value =&gt; -123\nIf button clicked for the second time value =&gt; -123\nIf button clicked for the third time value =&gt; --123\n\n**Expected Result**\nIf button clicked for the first time value =&gt; -123\nIf button clicked for the second time value =&gt; 123\nIf button clicked for the third time value =&gt; -123\n</code></pre>\n\n<p><strong>Updated activity.kt file</strong></p>\n\n<pre><code>package com.tripbegins.calculator\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.View\nimport android.widget.Button\nimport com.tripbegins.calculator.R.id.*\nimport kotlinx.android.synthetic.main.activity_main.*\nimport kotlinx.android.synthetic.main.activity_main.view.*\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n\n    var emptyText = true\n    var isMinusPrinted=false\n    fun numberEvents(view: View) { \n        if(emptyText){\n            viewResult.setText(\"\")\n        }\n        emptyText = false\n        var button = view as Button\n        var plusMinusCheck =\"\"\n        var isClicked = viewResult.text.toString()\n\n        when (button.id) {\n\n\n            buttonOne.id -&gt; isClicked += \"1\"\n            buttonTwo.id -&gt; isClicked += \"2\"\n            buttonThree.id -&gt; isClicked += \"3\"\n\n            dotButton.id -&gt; {\n                isClicked += \".\"\n                dotButton.isClickable = false //**add this line here**\n            }\n            plusMinusBtn.id-&gt;{\n\n                var resultWithoutMinus=isClicked//ex: 123\n                if(!isMinusPrinted){\n\n                    isClicked = \"-\" + resultWithoutMinus//this line for \n    example give result like: -123\n                    isMinusPrinted=true\n                }\n                else{\n                    isClicked=resultWithoutMinus //result became : 123\n                    isMinusPrinted=false\n                }\n\n            }\n\n\n\n        }\n\n            viewResult.setText(isClicked)\n    }\n\n\n\n    var operation =\"+\"\n    var oldValues:String? = null\n\n    fun mathOperation(view: View){\n        var mathButton = view as Button\n        var isClicked = viewResult.text.toString()\n\n        when(mathButton.id){\n            plusButton.id-&gt; {\n                operation = \"+\"\n            }\n            minusButton.id-&gt;{\n                operation=\"-\"\n            }\n            mulButton.id-&gt;{\n                operation=\"*\"\n            }\n\n        }\n        oldValues = viewResult.text.toString()\n        emptyText = true\n        dotButton.isClickable=true//**add this line here**\n\n    }\n\n    fun Calculate(view: View){\n\n        var newValues = viewResult.text.toString()\n        var calulateButton:Double? = null\n\n        when(operation){\n            \"+\"-&gt; { calulateButton = oldValues!!.toDouble() + \nnewValues.toDouble() }\n            \"-\"-&gt; { calulateButton = oldValues!!.toDouble() - \nnewValues.toDouble() }\n            \"*\"-&gt; { calulateButton = oldValues!!.toDouble() * \nnewValues.toDouble() }\n\n        }\n        viewResult.setText(calulateButton.toString())\n        emptyText=true\n        dotButton.isClickable=true //**add this line here**\n    }\n    fun clearFunction(view: View){\n        viewResult.setText(\"\")\n        dotButton.isClickable=true //**add this line here**\n    }\n}\n</code></pre>\n\n<p><strong>Updated the xml file for the button -> +/-</strong></p>\n\n<pre><code>&lt;Button\nandroid:id=\"@+id/plusMinusBtn\"\nandroid:layout_width=\"wrap_content\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_marginBottom=\"52dp\"\nandroid:layout_marginStart=\"38dp\"\nandroid:onClick=\"numberEvents\"\nandroid:text=\"+/-\"\napp:layout_constraintBottom_toBottomOf=\"parent\"\napp:layout_constraintStart_toStartOf=\"parent\" /&gt;\n</code></pre>\n"}, {"tags": ["kotlin", "rx-java", "rx-kotlin", "rx-kotlin2", "rx-javafx"], "answers": [{"tags": [], "owner": {"reputation": 5903, "user_id": 2597143, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6c563c6b8247d907f6fad654da22218d?s=128&d=identicon&r=PG", "display_name": "ESala", "link": "https://stackoverflow.com/users/2597143/esala"}, "is_accepted": true, "score": 3, "last_activity_date": 1510691835, "last_edit_date": 1510691835, "creation_date": 1510691419, "answer_id": 47294652, "question_id": 47294290, "link": "https://stackoverflow.com/questions/47294290/rxjava-rxkotlin-split-stream-depending-on-subtype/47294652#47294652", "title": "RxJava/RxKotlin split stream depending on subtype", "body": "<p>You could use the <code>ofType</code> operator:</p>\n\n<blockquote>\n  <p>ofType(\u2009) \u2014 emit only those items from the source Observable that are of a particular class.</p>\n</blockquote>\n\n<p>Example:</p>\n\n<pre><code>val messages = file.readLines()\n    .toObservable()\n    .map { mapper.readValue(it, ResponseMessage::class.java) }\n    .share() // &lt;-- or other multicasting operator\n\nmessages\n    .ofType(MarketChangeMessage::class)\n    .subscribe()\n\nmessages\n    .ofType(Other::class)\n    .subscribe()\n</code></pre>\n"}], "owner": {"reputation": 5360, "user_id": 3139545, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c4a158119260b6a27a6bab276cac749?s=128&d=identicon&r=PG&f=1", "display_name": "user3139545", "link": "https://stackoverflow.com/users/3139545/user3139545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 47294652, "answer_count": 1, "score": 0, "last_activity_date": 1540387195, "creation_date": 1510689856, "last_edit_date": 1540387195, "question_id": 47294290, "link": "https://stackoverflow.com/questions/47294290/rxjava-rxkotlin-split-stream-depending-on-subtype", "title": "RxJava/RxKotlin split stream depending on subtype", "body": "<p>I have a stream of <code>ResponseMessage</code> which can be of different subtypes. I would like to split the stream into streams where I can handle each type in its own stream.</p>\n\n<p>My first try resulted in this which I can not see working out.</p>\n\n<pre><code>file.readLines()\n        .toObservable()\n        .map { mapper.readValue(it, ResponseMessage::class.java) }\n        .groupBy { when(it) {\n            is MarketChangeMessage -&gt; it::class\n            else -&gt; it::class\n        }}\n        .map { it.????? } //How can possible this work?\n</code></pre>\n\n<p>My question is now:\nWhat is the idiomatic way to divide a stream into streams on one specific sub type?</p>\n"}, {"tags": ["kotlin", "nullable"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1510689514, "post_id": 47294188, "comment_id": 81539321, "body": "If it&#39;s guaranteed to be non-null, then why not make it non-nullable?"}], "answers": [{"tags": [], "owner": {"reputation": 1614, "user_id": 3609514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/92C38.jpg?s=128&g=1", "display_name": "TheTechWolf", "link": "https://stackoverflow.com/users/3609514/thetechwolf"}, "is_accepted": true, "score": 2, "last_activity_date": 1516146512, "last_edit_date": 1516146512, "creation_date": 1510690414, "answer_id": 47294421, "question_id": 47294188, "link": "https://stackoverflow.com/questions/47294188/what-is-the-recommended-way-for-using-the-kotlin-double-bang-for-nullable-class/47294421#47294421", "title": "what is the recommended way for using the Kotlin double-bang for nullable class member", "body": "<p>If you are sure that variable will have not-null value, you should define it as not-nullable. </p>\n\n<p>After this, there are two ways to avoid compiler warning and in sight variable initialization:</p>\n\n<ol>\n<li>Usage of <strong>lateinit</strong> modifier</li>\n</ol>\n\n<blockquote>\n  <p>lateinit var nullableMember: OtherClass</p>\n</blockquote>\n\n<p>Please note if you try to access this variable before its initialization, exception will be thrown</p>\n\n<ol start=\"2\">\n<li>Usage of <strong>notNull()</strong> delegate</li>\n</ol>\n\n<blockquote>\n  <p>var nullableMember: OtherClass by Delegates.notNull()</p>\n</blockquote>\n\n<p>Differences between these two you can find <a href=\"https://stackoverflow.com/questions/44205389/difference-between-delegates-notnull-and-lateinit-kotlin/44207332#44207332\">here.</a></p>\n\n<p>If there is a need to set the value of this variable to null somewhere in the code, I am afraid that you'll have to use <strong>!!</strong> because there is no nicer way of doing this.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1510694077, "creation_date": 1510694077, "answer_id": 47295304, "question_id": 47294188, "link": "https://stackoverflow.com/questions/47294188/what-is-the-recommended-way-for-using-the-kotlin-double-bang-for-nullable-class/47295304#47295304", "title": "what is the recommended way for using the Kotlin double-bang for nullable class member", "body": "<blockquote>\n  <p>If the nullableMember is guaranteed to initialized in constructor</p>\n</blockquote>\n\n<p>In your case it isn't. It will be initialized if you call the secondary constructor, but you also have the primary, parameterless constructor which initializes it to <code>null</code>. </p>\n\n<p>And if it <em>is</em> guaranteed to be initialized to non-null in the constructor, then as Oliver's comment says, it shouldn't be nullable! And it should be <code>val</code> if it's only set in the constructor (including secondary ones) or <code>init</code> blocks.</p>\n\n<p>I.e. this class should be simplified to</p>\n\n<pre><code>class ClassWithNullableMemebr(val nullableMember: OtherClass) {\n    fun foo() {\n        nullableMember.doSomething()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "is_accepted": false, "score": 1, "last_activity_date": 1510694103, "creation_date": 1510694103, "answer_id": 47295314, "question_id": 47294188, "link": "https://stackoverflow.com/questions/47294188/what-is-the-recommended-way-for-using-the-kotlin-double-bang-for-nullable-class/47295314#47295314", "title": "what is the recommended way for using the Kotlin double-bang for nullable class member", "body": "<p>If it is guaranteed to be initialized on the constructor, then it doesn't need to be nullable at all.</p>\n\n<p>You can have:</p>\n\n<pre><code>class ClassWithMember(val member: OtherClass) {\n  fun foo() {\n      member.doSomething()\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 6667, "user_id": 2987953, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c2a6cba46cf5f4c9c7338f324a1d7732?s=128&d=identicon&r=PG&f=1", "display_name": "lannyf", "link": "https://stackoverflow.com/users/2987953/lannyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 0, "accepted_answer_id": 47294421, "answer_count": 3, "score": 0, "last_activity_date": 1516146512, "creation_date": 1510689416, "question_id": 47294188, "link": "https://stackoverflow.com/questions/47294188/what-is-the-recommended-way-for-using-the-kotlin-double-bang-for-nullable-class", "title": "what is the recommended way for using the Kotlin double-bang for nullable class member", "body": "<p>In kotlin if the variable is nullable the kotlin will ask for either using !! or check the null before using it. \nIn the case of having nullable class member, inside the class anywhere refereeing this member kotlin will warn for checking the nullable.</p>\n\n<pre><code>class ClassWithNullableMemebr {\n      Var nullableMember: OtherClass? = null;\n\n      constructor (obj: OtherClass) {\n          nullableMember = obj\n      }\n      fun foo() {\n          nullableMember!!.doSomething()\n      }\n      fun getTheOtherClassMember : OtherClass {\n          return nullableMember!!\n      }\n }\n</code></pre>\n\n<p>If the nullableMember is guaranteed to initialized in constructor, how to avoid the use of !!.</p>\n\n<p>In Java or other language they could check null once and throw if by design the member should never be null. Then inside the class the member will be just be referenced without worry. </p>\n\n<p>Someone suggested do </p>\n\n<pre><code>if (nullableMember != null) {\n    nullableMember!!.doSomething()\n}\n</code></pre>\n\n<p>This will still need the !! even after the check, and it makes the code looks not pretty.</p>\n\n<p>For this case really using ?. is not much different than using !! since the nullableMember is assigned in the constructor, and the function return it can not avoid the !!.</p>\n\n<p>I think if this nullableMember is guaranteed not null after instantiate the class the using !! shouldn't be considered to be bad coding style. And there is no other way to avoid it.</p>\n\n<p>Does anyone have suggestion to avoid the use of '!!' in the case like this?  </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1721, "user_id": 3796083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/533f65ff463f37e5540bac8059583a8c?s=128&d=identicon&r=PG", "display_name": "AndroidRuntimeException", "link": "https://stackoverflow.com/users/3796083/androidruntimeexception"}, "edited": false, "score": 0, "creation_date": 1510687545, "post_id": 47293680, "comment_id": 81538256, "body": "Have you added the permision to manifest? &lt;uses-permission android:name=&quot;android.permission.CALL_PHONE&quot; /&gt;"}, {"owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "reply_to_user": {"reputation": 1721, "user_id": 3796083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/533f65ff463f37e5540bac8059583a8c?s=128&d=identicon&r=PG", "display_name": "AndroidRuntimeException", "link": "https://stackoverflow.com/users/3796083/androidruntimeexception"}, "edited": false, "score": 0, "creation_date": 1510726653, "post_id": 47293680, "comment_id": 81552079, "body": "@AndroidRuntimeException you are correct, I missed it, can you post your comment as answer, so I accept it, thanks :)"}], "answers": [{"tags": [], "owner": {"reputation": 1721, "user_id": 3796083, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/533f65ff463f37e5540bac8059583a8c?s=128&d=identicon&r=PG", "display_name": "AndroidRuntimeException", "link": "https://stackoverflow.com/users/3796083/androidruntimeexception"}, "is_accepted": true, "score": 2, "last_activity_date": 1510750444, "creation_date": 1510750444, "answer_id": 47307979, "question_id": 47293680, "link": "https://stackoverflow.com/questions/47293680/run-time-permission-request-is-not-working/47307979#47307979", "title": "Run-time permission request is not working", "body": "<p>You need to add the permission to the manifest.xml too.</p>\n\n<pre><code> &lt;uses-permission android:name=\"android.permission.CALL_PHONE\" /&gt;\n</code></pre>\n"}], "owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 47307979, "answer_count": 1, "score": 0, "last_activity_date": 1510750444, "creation_date": 1510687267, "last_edit_date": 1510687363, "question_id": 47293680, "link": "https://stackoverflow.com/questions/47293680/run-time-permission-request-is-not-working", "title": "Run-time permission request is not working", "body": "<p>I'm trying my first Android app using Run time permission with Kotlin, based on my understanding of <a href=\"https://inthecheesefactory.com/blog/things-you-need-to-know-about-android-m-permission-developer-edition/en\" rel=\"nofollow noreferrer\">this example</a> but the permission request dialog never appears.</p>\n\n<p>Did I make any error in writing the Kotlin equivalent of the Java code in the mentioned reference example?</p>\n\n<p>The app assumes to call the pre-defined number upon clicking the button.</p>\n\n<p><code>string.xml</code>:</p>\n\n<pre><code>&lt;resources&gt;\n    &lt;string name=\"app_name\"&gt;Kotlin&lt;/string&gt;\n    &lt;string name=\"title_activity_display\"&gt;Call&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p><code>activity_main.xml</code></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.example.home.kotlin.MainActivity\"&gt;\n\n    &lt;Button\n        android:id=\"@+id/button\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Display\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p><code>MainActivity.kt</code>:</p>\n\n<pre><code>package com.example.home.kotlin\n\nimport android.Manifest\nimport android.app.AlertDialog\nimport android.content.DialogInterface\nimport android.content.Intent\nimport android.content.pm.PackageManager\nimport android.net.Uri\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.View\nimport android.widget.Button\nimport android.widget.Toast\n\nclass MainActivity : AppCompatActivity() {\n\n    private var mCall: Button? = null\n    private var callIntent: Intent? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        mCall = findViewById(R.id.button)\n\n        mCall!!.setOnClickListener { _: View -&gt;\n            callIntent = Intent(Intent.ACTION_CALL)\n            callIntent!!.data = Uri.parse(\"tel:0123456789\")\n\n            val hasCallPhone = checkSelfPermission(Manifest.permission.CALL_PHONE)\n            if (hasCallPhone != PackageManager.PERMISSION_GRANTED) {\n                if (!shouldShowRequestPermissionRationale(Manifest.permission.CALL_PHONE)) {\n                    showMessageOKCancel(\"You need to allow access to dialer\",\n                    DialogInterface.OnClickListener { _, _ -&gt;\n                        requestPermissions(arrayOf(Manifest.permission.CALL_PHONE),\n                                1)\n                    })\n                    return@setOnClickListener\n                }\n                requestPermissions(arrayOf(Manifest.permission.CALL_PHONE),\n                        1)\n                return@setOnClickListener\n            }\n        }\n    }\n\n    private fun showMessageOKCancel(message: String, okListener: DialogInterface.OnClickListener) {\n        AlertDialog.Builder(this@MainActivity)\n                .setMessage(message)\n                .setPositiveButton(\"OK\", okListener)\n                .setNegativeButton(\"Cancel\", null)\n                .create()\n                .show()\n    }\n\n    override fun onRequestPermissionsResult(requestCode: Int, permissions: Array&lt;String&gt;, grantResults: IntArray) {\n        when (requestCode) {\n            1 -&gt; if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                // Permission Granted\n                Toast.makeText(this@MainActivity, \"Permission Granted\", Toast.LENGTH_SHORT)\n                        .show()\n                startActivity(callIntent)\n                this.finish()\n            } else {\n                // Permission Denied\n                Toast.makeText(this@MainActivity, \"Permission Denied\", Toast.LENGTH_SHORT)\n                        .show()\n            }\n            else -&gt; super.onRequestPermissionsResult(requestCode, permissions, grantResults)\n        }\n    }\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/B2RZp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B2RZp.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/dwMiO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dwMiO.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "android-view"], "answers": [{"comments": [{"owner": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "edited": false, "score": 1, "creation_date": 1510689919, "post_id": 47293903, "comment_id": 81539527, "body": "Nice, simple and concise!"}, {"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "reply_to_user": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "edited": false, "score": 0, "creation_date": 1510694160, "post_id": 47293903, "comment_id": 81541756, "body": "@LouisCAD Thanks for the edits. I&#39;m not too familiar with Kotlin/Android."}], "tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": true, "score": 6, "last_activity_date": 1512959981, "last_edit_date": 1512959981, "creation_date": 1510688185, "answer_id": 47293903, "question_id": 47293269, "link": "https://stackoverflow.com/questions/47293269/text-blinking-in-android-with-most-concise-kotlin/47293903#47293903", "title": "Text blinking in Android, with most concise Kotlin", "body": "<p>For a bit of fun, you can define an extension function:</p>\n\n<pre><code>fun View.blink(\n    times: Int = Animation.INFINITE,\n    duration: Long = 50L,\n    offset: Long = 20L,\n    minAlpha: Float = 0.0f,\n    maxAlpha: Float = 1.0f,\n    repeatMode: Int = Animation.REVERSE\n) {\n    startAnimation(AlphaAnimation(minAlpha, maxAlpha).also {\n        it.duration = duration\n        it.startOffset = offset\n        it.repeatMode = repeatMode\n        it.repeatCount = times\n    })\n}\n</code></pre>\n\n<p>And use it like so (using the example in the question you linked):</p>\n\n<pre><code>myText.blink(3)  // Blink 3 times\nyourText.blink()  // Just keep blinking\n</code></pre>\n\n<p>Obviously you can change the parameters to suit your use case.</p>\n\n<p>To stop the animation if needed, call <code>clearAnimation()</code> on the blinking view (<code>yourText</code> for the example above).</p>\n"}], "owner": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 1, "accepted_answer_id": 47293903, "answer_count": 1, "score": 1, "last_activity_date": 1515361493, "creation_date": 1510685663, "last_edit_date": 1515361493, "question_id": 47293269, "link": "https://stackoverflow.com/questions/47293269/text-blinking-in-android-with-most-concise-kotlin", "title": "Text blinking in Android, with most concise Kotlin", "body": "<p>I need to make some text (currently in a <code>TextView</code>) blink for a few seconds. There's several answers on <a href=\"https://stackoverflow.com/a/11991435/4433326\">how to do it in java here</a>, but since Kotlin has some syntax/language features that java doesn't, I'm asking what is the most concise way you found to make text blink on Android using Kotlin.</p>\n\n<p>While I'm aiming at making a fading/smooth blink, I'm open to approaches that would make a non smooth blink too.</p>\n\n<p>Note that I'm also looking at lightweight code performance wise.</p>\n\n<p>Thanks for your answers!</p>\n"}, {"tags": ["java", "android", "kotlin", "dagger-2", "kapt"], "comments": [{"owner": {"reputation": 5247, "user_id": 2976366, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/598272362/picture?type=large", "display_name": "tim", "link": "https://stackoverflow.com/users/2976366/tim"}, "edited": false, "score": 0, "creation_date": 1510683402, "post_id": 47292611, "comment_id": 81535809, "body": "Didn&#39;t you forget the LoginModule() on your component? <code>appComponent.loginSubComponent().loginModule(LoginModule()).&zwnj;&#8203;inject(this)</code>"}, {"owner": {"reputation": 11, "user_id": 8940662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb7d2f491dc2f0b3b49631c890896c2?s=128&d=identicon&r=PG&f=1", "display_name": "unexpected_error", "link": "https://stackoverflow.com/users/8940662/unexpected-error"}, "reply_to_user": {"reputation": 5247, "user_id": 2976366, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/598272362/picture?type=large", "display_name": "tim", "link": "https://stackoverflow.com/users/2976366/tim"}, "edited": false, "score": 0, "creation_date": 1510685693, "post_id": 47292611, "comment_id": 81537272, "body": "I have tried also version like above but without any success... As far as I know dagger will create missing dependencies from LoginModule out of the box, so my version is also correct"}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1510686998, "post_id": 47292611, "comment_id": 81538004, "body": "Does <code>LoginPresenter</code> implement some interface?"}, {"owner": {"reputation": 11, "user_id": 8940662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb7d2f491dc2f0b3b49631c890896c2?s=128&d=identicon&r=PG&f=1", "display_name": "unexpected_error", "link": "https://stackoverflow.com/users/8940662/unexpected-error"}, "edited": false, "score": 0, "creation_date": 1510766130, "post_id": 47292611, "comment_id": 81577798, "body": "Yes, it extends base class that implements interface:  <code>class LoginPresenter(private var loginAccountUseCase: LoginAccountUseCase,                      private var loginAnonymousUseCase: LoginAnonymousUseCase) : BasePresenter&lt;LoginView&gt;() {}</code>      <code>open class BasePresenter&lt;V : View&gt; : Presenter&lt;V&gt;{}</code>"}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1510779620, "post_id": 47292611, "comment_id": 81585286, "body": "And you define in your module and inject in your activity the actual implementation? There is a common error when trying to inject the interface, but your code looks fine, unless you modified it for this question"}, {"owner": {"reputation": 11, "user_id": 8940662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb7d2f491dc2f0b3b49631c890896c2?s=128&d=identicon&r=PG&f=1", "display_name": "unexpected_error", "link": "https://stackoverflow.com/users/8940662/unexpected-error"}, "edited": false, "score": 0, "creation_date": 1510851461, "post_id": 47292611, "comment_id": 81621845, "body": "Yes, I am injecting actual implementation. I have modfied my comment because I had problems with code formating... I looks like this problem occured only on my side :/ Maybe kapt plugin has bug?"}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1535645345, "post_id": 47292611, "comment_id": 91153479, "body": "What is the solution?  I am facing the same error."}], "owner": {"reputation": 11, "user_id": 8940662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb7d2f491dc2f0b3b49631c890896c2?s=128&d=identicon&r=PG&f=1", "display_name": "unexpected_error", "link": "https://stackoverflow.com/users/8940662/unexpected-error"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 594, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1510683092, "creation_date": 1510683092, "question_id": 47292611, "link": "https://stackoverflow.com/questions/47292611/error-while-annotation-processing-with-kapt-and-dagger2", "title": "Error while annotation processing with Kapt and Dagger2", "body": "<p>I have spent some time with my error but without any positive result so I maybe someone can help. \nI have 3 modules in my project : app (android), data, domain - both pure kotlin. All DI is in app module.</p>\n\n<p>ApplicationComponent &amp; ApplicationModule:</p>\n\n<pre><code>@Singleton\n@Component(modules = arrayOf(ApplicationModule::class,\n        NavigatorModule::class,\n        RepositoryModule::class,\n        FirebaseModule::class,\n        SchedulerModule::class,\n        UseCaseModule::class))\ninterface ApplicationComponent {\n    fun injectApplication(application: Application)\n\n    fun loginSubComponent() : LoginSubComponent\n}\n\n@Module\nclass ApplicationModule(private val application: Application) {\n\n    @Provides\n    @Singleton\n    fun provideApplication() = application\n}\n\n@Module\nclass UseCaseModule {\n\n    @Provides\n    @Singleton\n    fun provideLoginAccountUseCase(scheduler: ComposeScheduler, repository: AccountRepository) = LoginAccountUseCase(scheduler, repository)\n\n    @Provides\n    @Singleton\n    fun provideLoginAnonymousUseCase(scheduler: ComposeScheduler, repository: AccountRepository) = LoginAnonymousUseCase(scheduler, repository)\n\n}\n</code></pre>\n\n<p>LoginSubComponent &amp; LoginModule:</p>\n\n<pre><code>@ActivityScope\n@Subcomponent(modules = arrayOf(LoginModule::class))\ninterface LoginSubComponent {\n    fun inject(activity: LoginActivity)\n}\n\n@Module\nclass LoginModule {\n\n    @Provides\n    @ActivityScope\n    fun provideLoginPresenter(loginAccountUseCase: LoginAccountUseCase, loginAnonymousUseCase: LoginAnonymousUseCase)\n            = LoginPresenter(loginAccountUseCase, loginAnonymousUseCase)\n}\n</code></pre>\n\n<p>and I am injecting it like below in LoginActivity:</p>\n\n<pre><code>@Inject\nlateinit var navigator: Navigator\n\n@Inject &lt;- This inject causes issue\nlateinit var presenter: LoginPresenter\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n super.onCreate(savedInstanceState)\n\n    appComponent.loginSubComponent().inject(this)\n    initView()\n    .....\n}\n</code></pre>\n\n<p>This configuration causes error:</p>\n\n<pre><code>/home/user/projects/xxx/app/build/tmp/kapt3/stubs/debug/xxx/presentation/di/component/ApplicationComponent.java:6: error: [xxx.presentation.di.component.LoginSubComponent.inject(xxx.presentation.login.LoginActivity)] xxx.presentation.login.LoginPresenter cannot be provided without an @Inject constructor or from an @Provides- or @Produces-annotated method.\ne: \n\ne: public abstract interface ApplicationComponent {\ne:                 ^\ne:       xxx.presentation.login.LoginPresenter is injected at\ne:           xxx.presentation.login.LoginActivity.presenter\ne:       xxx.presentation.login.LoginActivity is injected at\ne:           xxx.presentation.di.component.LoginSubComponent.inject(activity)\ne: java.lang.IllegalStateException: failed to analyze: org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Error while annotation processing\n    at org.jetbrains.kotlin.analyzer.AnalysisResult.throwIfError(AnalysisResult.kt:57)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:137)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:158)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:61)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:107)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:51)\n    at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:92)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$2.invoke(CompileServiceImpl.kt:386)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$2.invoke(CompileServiceImpl.kt:96)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:892)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:96)\n    at org.jetbrains.kotlin.daemon.common.DummyProfiler.withMeasure(PerfUtils.kt:137)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.checkedCompile(CompileServiceImpl.kt:919)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.doCompile(CompileServiceImpl.kt:891)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:385)\n    at sun.reflect.GeneratedMethodAccessor88.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:346)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Error while annotation processing\n    at org.jetbrains.kotlin.kapt3.AnnotationProcessingKt.doAnnotationProcessing(annotationProcessing.kt:90)\n    at org.jetbrains.kotlin.kapt3.AnnotationProcessingKt.doAnnotationProcessing$default(annotationProcessing.kt:42)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.runAnnotationProcessing(Kapt3Extension.kt:205)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:166)\n    at org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:82)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM$analyzeFilesWithJavaIntegration$2.invoke(TopDownAnalyzerFacadeForJVM.kt:96)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:106)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:83)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:376)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:67)\n    at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:96)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:367)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:132)\n    ... 29 more\n</code></pre>\n\n<p>I can not use DI now because of this error and I am almost sure that Java version should work fine with this configuration. Do you have any suggestions?</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 1210, "user_id": 4440076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgPxO.jpg?s=128&g=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/4440076/amit-kumar"}, "edited": false, "score": 4, "creation_date": 1510730059, "post_id": 47292341, "comment_id": 81553640, "body": "Same has happened to me. Running the command second time  just worked fine."}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "reply_to_user": {"reputation": 1210, "user_id": 4440076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgPxO.jpg?s=128&g=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/4440076/amit-kumar"}, "edited": false, "score": 0, "creation_date": 1510761510, "post_id": 47292341, "comment_id": 81574559, "body": "Yea - looks like a gradle bug then - think I will report it"}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "reply_to_user": {"reputation": 1210, "user_id": 4440076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgPxO.jpg?s=128&g=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/4440076/amit-kumar"}, "edited": false, "score": 0, "creation_date": 1510856650, "post_id": 47292341, "comment_id": 81625055, "body": "This seems to be the issue that is the root cause: <a href=\"https://youtrack.jetbrains.com/issue/KT-17601\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-17601</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16518, "user_id": 1515052, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/87d59872c339c0c66860831e77d764c0?s=128&d=identicon&r=PG", "display_name": "Simulant", "link": "https://stackoverflow.com/users/1515052/simulant"}, "is_accepted": false, "score": 5, "last_activity_date": 1573831861, "creation_date": 1573831861, "answer_id": 58880150, "question_id": 47292341, "link": "https://stackoverflow.com/questions/47292341/java-rmi-unmarshalexception-error-unmarshaling-return-header/58880150#58880150", "title": "java.rmi.UnmarshalException: Error unmarshaling return header;", "body": "<p>there seems to be a bug in the Kotlin compiler plugin for Gradle. Runnig it with the following additional options fixed it for me:</p>\n\n<pre><code>./gradlew build -Dkotlin.compiler.execution.strategy=in-process -Dkotlin.incremental=false\n</code></pre>\n"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7242, "favorite_count": 1, "answer_count": 1, "score": 10, "last_activity_date": 1573831872, "creation_date": 1510682242, "last_edit_date": 1573831872, "question_id": 47292341, "link": "https://stackoverflow.com/questions/47292341/java-rmi-unmarshalexception-error-unmarshaling-return-header", "title": "java.rmi.UnmarshalException: Error unmarshaling return header;", "body": "<p>Just got this as a error when running gradlew test:</p>\n\n<pre><code>e: java.rmi.UnmarshalException: Error unmarshaling return header; nested exception is: \n    java.io.EOFException\n    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:236)\n    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:161)\n    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:227)\n    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:179)\n    at com.sun.proxy.$Proxy112.clearJarCache(Unknown Source)\n    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemon(GradleKotlinCompilerRunner.kt:216)\n    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemonOrFallback(GradleKotlinCompilerRunner.kt:156)\n    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemonOrFallback(GradleKotlinCompilerRunner.kt:52)\n    at org.jetbrains.kotlin.compilerRunner.KotlinCompilerRunner.runCompiler(KotlinCompilerRunner.kt:127)\n    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runJvmCompiler(GradleKotlinCompilerRunner.kt:107)\n    at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:326)\n    at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:231)\n    at org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile.execute(Tasks.kt:203)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n    at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$IncrementalTaskAction.doExecute(DefaultTaskClassInfoStore.java:179)\n    at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:135)\n    at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:122)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:121)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:110)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:92)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:70)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:62)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:97)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:87)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.run(DefaultTaskGraphExecuter.java:248)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:241)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:230)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.processTask(DefaultTaskPlanExecutor.java:123)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.access$200(DefaultTaskPlanExecutor.java:79)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:104)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:98)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionPlan.execute(DefaultTaskExecutionPlan.java:625)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionPlan.executeWithTask(DefaultTaskExecutionPlan.java:580)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.run(DefaultTaskPlanExecutor.java:98)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.io.EOFException\n    at java.io.DataInputStream.readByte(DataInputStream.java:267)\n    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:222)\n    ... 58 more\n\n\ne: Compiler terminated with internal error\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':bip44:compileKotlin'.\n&gt; Internal compiler error. See log for more details\n</code></pre>\n\n<p>the second time it succeeded. </p>\n"}, {"tags": ["regex", "kotlin"], "comments": [{"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1510710545, "post_id": 47292112, "comment_id": 81547703, "body": "Use <code>matcher.matches()</code> instead of <code>matcher.find()</code> if you want the entire string to be matched"}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 3665983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6B0CY.jpg?s=128&g=1", "display_name": "Maicon Hellmann", "link": "https://stackoverflow.com/users/3665983/maicon-hellmann"}, "reply_to_user": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1510682575, "post_id": 47292136, "comment_id": 81535357, "body": "to indicate the end of the regex"}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1510710568, "post_id": 47292136, "comment_id": 81547711, "body": "You probably also want to add a <code>^</code> at the beginning of the regex"}], "tags": [], "owner": {"reputation": 409, "user_id": 3665983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6B0CY.jpg?s=128&g=1", "display_name": "Maicon Hellmann", "link": "https://stackoverflow.com/users/3665983/maicon-hellmann"}, "is_accepted": true, "score": 0, "last_activity_date": 1510682637, "last_edit_date": 1510682637, "creation_date": 1510681473, "answer_id": 47292136, "question_id": 47292112, "link": "https://stackoverflow.com/questions/47292112/error-on-cars-license-plate-regex-validation/47292136#47292136", "title": "Error on car&#39;s license plate regex validation", "body": "<p>You need to use the $ character at the end of regEx to indicate the end:</p>\n\n<pre><code>@Test\nfun testInvalid() {\n    val value = \"ABC12345\"\n    val pattern = Pattern.compile(\"[A-Z]{3}[0-9]{4}$\")\n    val matcher = pattern.matcher(value)\n\n    val found = matcher.find()\n\n    System.out.print(\"$value is valid: $found\")\n    Assert.assertFalse(found)\n}\n@Test\nfun testValid() {\n    val value = \"ABC1234\"\n    val pattern = Pattern.compile(\"[A-Z]{3}[0-9]{4}$\")\n    val matcher = pattern.matcher(value)\n\n    val found = matcher.find()\n\n    System.out.print(\"$value is valid: $found\")\n    Assert.assertTrue(found)\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5394911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204638463112587/picture?type=large", "display_name": "Kevin Eduard Piske", "link": "https://stackoverflow.com/users/5394911/kevin-eduard-piske"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 47292136, "answer_count": 1, "score": 1, "last_activity_date": 1510691406, "creation_date": 1510681402, "last_edit_date": 1510691406, "question_id": 47292112, "link": "https://stackoverflow.com/questions/47292112/error-on-cars-license-plate-regex-validation", "title": "Error on car&#39;s license plate regex validation", "body": "<p>I'm running the following test to validate a car's license plate. What am I doing wrong?</p>\n\n<p>testInvalid return <strong>error</strong></p>\n\n<p>testValid return <strong>success</strong></p>\n\n<pre><code>@Test\nfun testInvalid() {\n val value = \"ABC12345\"\n val pattern = Pattern.compile(\"[A-Z]{3}[0-9]{4}\")\n val matcher = pattern.matcher(value)\n\n val found = matcher.find()\n\n System.out.print(\"$value is valid: $found\")\n Assert.assertFalse(found)\n}\n\n@Test\nfun testValid() {\n val value = \"ABC1234\"\n val pattern = Pattern.compile(\"[A-Z]{3}[0-9]{4}\")\n val matcher = pattern.matcher(value)\n\n val found = matcher.find()\n\n System.out.print(\"$value is valid: $found\")\n Assert.assertTrue(found)\n}\n</code></pre>\n"}, {"tags": ["web-applications", "kotlin", "ktor"], "answers": [{"tags": [], "owner": {"reputation": 1378, "user_id": 5400641, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/00570bb707b63435b14c28d44d8feef3?s=128&d=identicon&r=PG&f=1", "display_name": "kurt", "link": "https://stackoverflow.com/users/5400641/kurt"}, "is_accepted": false, "score": 1, "last_activity_date": 1513594411, "creation_date": 1513594411, "answer_id": 47866922, "question_id": 47290924, "link": "https://stackoverflow.com/questions/47290924/controlling-cookie-lifecycle-in-ktor-0-9-0-servlet/47866922#47866922", "title": "Controlling cookie lifecycle in Ktor 0.9.0 servlet", "body": "<p>I think you could try to create your own custom SessionTransportCookie. </p>\n\n<p>If you see deeper in method <code>cookie&lt;MySession&gt;(sessionMarker)</code> you will find this code:</p>\n\n<pre><code>inline fun &lt;reified S : Any&gt; Sessions.Configuration.cookie(name: String, block: CookieSessionBuilder&lt;S&gt;.() -&gt; Unit): Unit = cookie(name, S::class, block)\n\ninline fun &lt;S : Any&gt; Sessions.Configuration.cookie(name: String, sessionType: KClass&lt;S&gt;, block: CookieSessionBuilder&lt;S&gt;.() -&gt; Unit) {\n    val builder = CookieSessionBuilder(sessionType).apply(block)\n    val transport = SessionTransportCookie(name, builder.cookie, builder.transformers)\n    val tracker = SessionTrackerByValue(sessionType, builder.serializer)\n    val provider = SessionProvider(name, sessionType, transport, tracker)\n    register(provider)\n}\n</code></pre>\n\n<p>Important line here is creating session transport cookie by line: <code>SessionTransportCookie(name, builder.cookie, builder.transformers)</code></p>\n\n<p>Lets look deeper in <code>SessionTransportCookie</code>:</p>\n\n<pre><code>class SessionTransportCookie(val name: String,\n                             val configuration: CookieConfiguration,\n                             val transformers: List&lt;SessionTransportTransformer&gt;\n) : SessionTransport {\n\n    override fun receive(call: ApplicationCall): String? {\n        return transformers.transformRead(call.request.cookies[name])\n    }\n\n    override fun send(call: ApplicationCall, value: String) {\n        val now = LocalDateTime.now()\n        val expires = now.plus(configuration.duration)\n        val maxAge = configuration.duration[ChronoUnit.SECONDS].toInt()\n        val cookie = Cookie(name,\n                transformers.transformWrite(value),\n                configuration.encoding,\n                maxAge,\n                expires,\n                configuration.domain,\n                configuration.path,\n                configuration.secure,\n                configuration.httpOnly,\n                configuration.extensions\n        )\n\n        call.response.cookies.append(cookie)\n    }\n\n    override fun clear(call: ApplicationCall) {\n        call.response.cookies.appendExpired(name)\n    }\n}\n\nclass CookieConfiguration {\n    var duration: TemporalAmount = Duration.ofDays(7)\n    var encoding: CookieEncoding = CookieEncoding.URI_ENCODING\n    var domain: String? = null\n    var path: String? = null\n    var secure: Boolean = false\n    var httpOnly: Boolean = false\n    val extensions: MutableMap&lt;String, String?&gt; = mutableMapOf()\n}\n</code></pre>\n\n<p>So, as you see, in this class you have all possibilities to customise your cookies <code>send/clear</code> logic. </p>\n"}], "owner": {"reputation": 313, "user_id": 188291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e74cfcc8ac58504f8e47fad5251690?s=128&d=identicon&r=PG", "display_name": "tweitzel", "link": "https://stackoverflow.com/users/188291/tweitzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1513594411, "creation_date": 1510677628, "question_id": 47290924, "link": "https://stackoverflow.com/questions/47290924/controlling-cookie-lifecycle-in-ktor-0-9-0-servlet", "title": "Controlling cookie lifecycle in Ktor 0.9.0 servlet", "body": "<p>I'm having problems deleting a cookie set by a Ktor 0.9.0 server side application. Maybe I don't know how to do it the right way, or there's an omission in the Ktor framework.</p>\n\n<p>Cookie creation and deletion is not the problem per se, but in order to delete a cookie I've to use the same path that is stored with the cookie on the client browser. Ktor let me control the path with cookie creation. Here's my configuration:</p>\n\n<pre><code>install(Sessions) {\n    cookie&lt;MySession&gt;(sessionMarker) {\n        cookie.duration = cookieDuration\n        cookie.path = \"/myWebapp\"\n        transform(SessionTransportTransformerMessageAuthentication(sessionKey))\n    }\n}\n</code></pre>\n\n<p>On the login page <code>/myWebapp/page/login</code>, I create the cookie that is then sent to the client and it travels back and forth for the rest of the requests sent to the web application:</p>\n\n<pre><code>call.sessions.set(MySession([some data class arguments]))\n</code></pre>\n\n<p>The cookie shows the path <code>/myWebapp</code> when inspected on the client. The default would be <code>/myWebapp/page</code> because that's the path of the login page, but the path is taken from the cookie configuration shown above. All is well until now.</p>\n\n<p>Eventually the user wants to log out via a POST request to the login page:</p>\n\n<pre><code>call.sessions.clear&lt;MySession&gt;()\n</code></pre>\n\n<p>The problem here is that I've not found a way of controlling the cookie's path. Because the login page <code>/myWebapp/page/login</code> is sending the expired cookie back to the client for another path (its own <code>/myWebapp/page</code>), the original cookie is not deleted (<code>/myWebapp/page</code> != <code>/myWebapp</code>).</p>\n\n<p>How can I control the cookie's path in Ktor 0.9.0 when trying to delete it?</p>\n\n<p>I know how to work around it: by creating the cookie with the same path from where I'll delete it. But that's not what I want (there're other paths within the web applications like <code>/myWebapp/others</code> were the cookie should be used). Having the ability to control the cookie's path during creation makes no sense then.</p>\n"}, {"tags": ["arrays", "kotlin", "primitive"], "answers": [{"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1510678640, "post_id": 47291077, "comment_id": 81533047, "body": "Because at that point I can pass the array itself, no need the reference"}, {"owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "reply_to_user": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1510678742, "post_id": 47291077, "comment_id": 81533115, "body": "You could pass Int directly in your first example as well, so I thought there&#39;s a reason you&#39;re passing KMutableProperty0&lt;Int&gt; instead."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 1, "creation_date": 1510678919, "post_id": 47291077, "comment_id": 81533217, "body": "No, because if <code>whatever()</code> would change its value, I couldn&#39;t see it anymore once <code>whatever()</code> has returned. Think about like <code>&amp;i</code> in c++"}], "tags": [], "owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "is_accepted": false, "score": 0, "last_activity_date": 1510678072, "creation_date": 1510678072, "answer_id": 47291077, "question_id": 47290633, "link": "https://stackoverflow.com/questions/47290633/is-it-possible-to-pass-the-reference-to-the-i-th-element-of-a-primitive-array/47291077#47291077", "title": "Is it possible to pass the reference to the i-th element of a primitive array?", "body": "<p>What about passing the reference to the <code>arr</code> property and the index?</p>\n\n<pre><code>fun whatever(arr: KMutableProperty0&lt;IntArray&gt;, index: Int)\n\nwhatever(::arr, i)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1510681574, "post_id": 47292079, "comment_id": 81534752, "body": "But why should it break the interop? Java does not support field references either (<code>::someField</code>), but Kotlin can wrap such into a <code>KProperty</code> and pass it to a Java method that accepts it. I believe, this is not the reason why this feature does not exist."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1510729663, "post_id": 47292079, "comment_id": 81553469, "body": "@hotkey, would it make sense open an issue on youtrack for a future potential implementation?"}, {"owner": {"reputation": 6188, "user_id": 172690, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3759fa3ad04a0fd20729382956f24a3?s=128&d=identicon&r=PG", "display_name": "Grzegorz Adam Hankiewicz", "link": "https://stackoverflow.com/users/172690/grzegorz-adam-hankiewicz"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1510745502, "post_id": 47292079, "comment_id": 81562805, "body": "@hotkey a KProperty is just a generic wrapper object you can create yourself too, see edit. My understanding of array references/pointers is much more lower level and efficient than that, you would need to change the jvm to implement them like in C languages."}], "tags": [], "owner": {"reputation": 6188, "user_id": 172690, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3759fa3ad04a0fd20729382956f24a3?s=128&d=identicon&r=PG", "display_name": "Grzegorz Adam Hankiewicz", "link": "https://stackoverflow.com/users/172690/grzegorz-adam-hankiewicz"}, "is_accepted": false, "score": 0, "last_activity_date": 1510745389, "last_edit_date": 1510745389, "creation_date": 1510681257, "answer_id": 47292079, "question_id": 47290633, "link": "https://stackoverflow.com/questions/47290633/is-it-possible-to-pass-the-reference-to-the-i-th-element-of-a-primitive-array/47292079#47292079", "title": "Is it possible to pass the reference to the i-th element of a primitive array?", "body": "<p>It is not possible, since Java doesn't allow pointer operations on arrays. Kotlin doing that (if possible at all at the bytecode level) would break interoperability.</p>\n\n<p><strong>EDIT</strong>: It seems you don't care about <em>true</em> array pointers, like in C, so you can create yourself wrappers similar to those <code>KMutableProperty</code>:</p>\n\n<pre><code>class IntArrayRef(val array: IntArray, val index: Int) {\n    fun get(): Int = array.get(index)\n    fun set(value: Int) { array[index] = value }\n}\n\nfun modify(value: IntArrayRef) {\n    value.set(4)\n}\n\nfun test() {\n    val s = \"abc\"\n    val arr = intArrayOf(1, 2, 3)\n    modify(IntArrayRef(arr, 1))\n}\n</code></pre>\n\n<p>My guess is you would need to create manually one wrapper for each native array type, since <a href=\"http://github.com/JetBrains/kotlin/blob/1.1.1/core/builtins/native/kotlin/Arrays.kt#L94\" rel=\"nofollow noreferrer\">they are exposed at the Kotlin level as non generic types</a>.</p>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1510745389, "creation_date": 1510676686, "question_id": 47290633, "link": "https://stackoverflow.com/questions/47290633/is-it-possible-to-pass-the-reference-to-the-i-th-element-of-a-primitive-array", "title": "Is it possible to pass the reference to the i-th element of a primitive array?", "body": "<p>Right now, somewhere in my code, I am passing a reference to a primitive, for example an <code>Int</code></p>\n\n<pre><code>val i = 0\n</code></pre>\n\n<p>to </p>\n\n<pre><code>fun whatever(i: KMutableProperty0&lt;Int&gt;)\n</code></pre>\n\n<p>as</p>\n\n<pre><code>whatever(::i)\n</code></pre>\n\n<p>to being able to get/set its value from within the function</p>\n\n<p>Everything worked great so far. </p>\n\n<p>I'd like now to do the same for an i-th element of a primitive array, such as an <code>IntArray</code></p>\n\n<pre><code>val arr = intArrayOf(1, 2, 3)\n\nwhatever(/* passing the reference to item 2 of arr*/)\n</code></pre>\n\n<p>Is it possible?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "edited": false, "score": 1, "creation_date": 1510673628, "post_id": 47289565, "comment_id": 81529608, "body": "<code>It does not actually call the .toShort() function</code> Be that as it may, seeing <code>4.toShort()</code> will get some time to get used to..."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "edited": false, "score": 2, "creation_date": 1510674239, "post_id": 47289565, "comment_id": 81530027, "body": "@gromit190, <code>4 as Short</code> will not work, see the Q&amp;A I referenced for explanation: <a href=\"https://stackoverflow.com/questions/45420806/are-kotlin-data-types-built-off-primitive-or-non-primitive-java-data-types\" title=\"are kotlin data types built off primitive or non primitive java data types\">stackoverflow.com/questions/45420806/&hellip;</a>"}, {"owner": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "edited": false, "score": 0, "creation_date": 1511173126, "post_id": 47289565, "comment_id": 81732184, "body": "(Removed my previous comment) yes, you&#39;re absolutely right. Thanks!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 8, "last_activity_date": 1510676073, "last_edit_date": 1510676073, "creation_date": 1510673526, "answer_id": 47289565, "question_id": 47289295, "link": "https://stackoverflow.com/questions/47289295/how-do-i-compare-a-short-with-an-int-in-kotlin/47289565#47289565", "title": "How do I compare a Short with an Int in Kotlin?", "body": "<p>Basically, the 'cleanest' way to compare it with a small constant is <code>myShort == 4.toShort()</code>. </p>\n\n<p>But if you want to compare a <code>Short</code> with a wider-type variable, convert <code>myShort</code> instead to avoid the overflow: <code>myShort.toInt() == someInt</code>. </p>\n\n<blockquote>\n  <p>looks weird, invoking a function on a primitive number</p>\n</blockquote>\n\n<p>But it does not actually call the functions, they are intrinsified and compiled to bytecode that operates the numbers in a way that is natural for JVM, for example, the bytecode for <code>myShort == 4.toShort()</code> is:</p>\n\n<pre><code>ILOAD 2      // loads myShort\nICONST_4     // pushes int constant 4\nI2S          // converts the int to short 4\nIF_ICMPNE L3 // compares the two shorts\n</code></pre>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/45420806/are-kotlin-data-types-built-off-primitive-or-non-primitive-java-data-types\">another Q&amp;A concerning numeric conversions</a>.</p>\n"}], "owner": {"reputation": 2883, "user_id": 2583765, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e54eb8bd99cabcd824ddb09367efb4d?s=128&d=identicon&r=PG&f=1", "display_name": "birgersp", "link": "https://stackoverflow.com/users/2583765/birgersp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2717, "favorite_count": 0, "accepted_answer_id": 47289565, "answer_count": 1, "score": 4, "last_activity_date": 1615441210, "creation_date": 1510672709, "last_edit_date": 1615441210, "question_id": 47289295, "link": "https://stackoverflow.com/questions/47289295/how-do-i-compare-a-short-with-an-int-in-kotlin", "title": "How do I compare a Short with an Int in Kotlin?", "body": "<p>I have a <code>Short</code> variable that I need to check the value of. But the compiler complains that <code>Operator '==' cannot be applied to 'Short' and 'Int'</code> when I do a simple equals check:</p>\n<pre><code>val myShort: Short = 4\nif (myShort == 4) // &lt;-- ERROR\n    println(&quot;all is well&quot;)\n</code></pre>\n<p>So what's the simplest, &quot;cleanest&quot; way to do this equals check?</p>\n<p>Here are some things I tried.</p>\n<p>The first one casts the 4 integer to a short (looks weird, invoking a function on a primitive number)</p>\n<pre><code>val myShort: Short = 4\nif (myShort == 4.toShort())\n    println(&quot;all is well&quot;)\n</code></pre>\n<p>The next one casts the short to an int (shouldn't be necessary, now I have two ints when I shouldn't really need any)</p>\n<pre><code>val myShort: Short = 4\nif (myShort.toInt() == 4)\n    println(&quot;all is well&quot;)\n</code></pre>\n"}, {"tags": ["java", "hibernate", "jpa", "kotlin"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3973283"}, "edited": false, "score": 0, "creation_date": 1510674771, "post_id": 47289052, "comment_id": 81530430, "body": "JPA has no such <code>@Formula</code>. Perhaps you get it from some other provider ..."}, {"owner": {"reputation": 8717, "user_id": 6413377, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/J4tD1.png?s=128&g=1", "display_name": "pirho", "link": "https://stackoverflow.com/users/6413377/pirho"}, "edited": false, "score": 1, "creation_date": 1510688060, "post_id": 47289052, "comment_id": 81538542, "body": "@BillyFrost Seems to be a hibernate stuff. Only sane link with fast Googling <a href=\"https://vladmihalcea.com/2016/11/17/how-to-map-calculated-properties-with-jpa-and-hibernate-formula-annotation/\" rel=\"nofollow noreferrer\">How to map calculated properties with JPA and Hibernate aFormula annotation</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7470, "user_id": 4371659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/94T6o.jpg?s=128&g=1", "display_name": "Tobias Liefke", "link": "https://stackoverflow.com/users/4371659/tobias-liefke"}, "is_accepted": false, "score": 0, "last_activity_date": 1510692408, "creation_date": 1510692408, "answer_id": 47294887, "question_id": 47289052, "link": "https://stackoverflow.com/questions/47289052/hibernate-calculated-collection-formula/47294887#47294887", "title": "Hibernate calculated collection @Formula", "body": "<p>From the JavaDoc for <code>@Formula</code>:</p>\n\n<blockquote>\n  <p>Defines a formula (derived value) which is a <strong>SQL fragment</strong> ...</p>\n</blockquote>\n\n<p>You have to think of the fragment you write as an replacement in the select statement:</p>\n\n<pre><code>SELECT (formulaValue) AS propertyName FROM ....\n</code></pre>\n\n<p>Everything you can write into <code>formulaValue</code> can be used in <code>@Formula</code>.</p>\n\n<p>Your example is not a valid SQL fragment and as you can see, it is not possible to return more than one value from a <code>@Formula</code>.</p>\n\n<p>But you could use <code>@Subselect</code> and a wrapper object instead:</p>\n\n<pre><code>@Entity\n@Subselect(\"SELECT name, age FROM Person p\")\npublic class PersonWrapper {\n\n  @Id\n  private String name;\n\n  private int age;\n\n}\n</code></pre>\n\n<p>(in Java, as I'm not aware of the correct syntax of Kotlin)</p>\n\n<p>If you really need the collection of these values in another entity, you need something to join on (which is missing in your example) and use that in an <code>@OneToMany</code> or <code>@ManyToMany</code>. Otherwise there is no use to have all these values in your entity, as all entities would have the same collection.</p>\n"}], "owner": {"reputation": 165, "user_id": 6460445, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pne7W.jpg?s=128&g=1", "display_name": "wookie", "link": "https://stackoverflow.com/users/6460445/wookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 927, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510694279, "creation_date": 1510672048, "last_edit_date": 1510694279, "question_id": 47289052, "link": "https://stackoverflow.com/questions/47289052/hibernate-calculated-collection-formula", "title": "Hibernate calculated collection @Formula", "body": "<p>is it possible to have and Entity with a field calculated using <code>Formula</code> when the field is a Collection (let's say it's a <code>Set</code>)?</p>\n\n<p>Here's the dummy example of what I'm trying to achive:</p>\n\n<pre><code>@Formula(value = \n    \"SELECT NEW com.example.entity.Person(p.name, p.age) FROM Person p\")\nlateinit var people :Set&lt;Person&gt;\n</code></pre>\n"}, {"tags": ["kotlin", "javafx-2", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 1, "last_activity_date": 1510673078, "creation_date": 1510673078, "answer_id": 47289425, "question_id": 47288872, "link": "https://stackoverflow.com/questions/47288872/tornadofx-which-performs-better-fxml-or-type-css/47289425#47289425", "title": "TornadoFx: Which performs better FXML or type-CSS", "body": "<p>Type safe CSS can be used with both FXML and type safe builders. You need to compare FXML with the type safe builders. The builders are both faster to execute and faster to write due to the lower noise level of the syntax. It's far more expressive and definitely the preferred way of writing TornadoFX Applications.</p>\n\n<p>That said, you won't notice a speed issue with either approach.</p>\n"}], "owner": {"reputation": 2012, "user_id": 3426524, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/BGH9k.jpg?s=128&g=1", "display_name": "Gaurav Sarma", "link": "https://stackoverflow.com/users/3426524/gaurav-sarma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 47289425, "answer_count": 1, "score": 1, "last_activity_date": 1510673078, "creation_date": 1510671533, "question_id": 47288872, "link": "https://stackoverflow.com/questions/47288872/tornadofx-which-performs-better-fxml-or-type-css", "title": "TornadoFx: Which performs better FXML or type-CSS", "body": "<p>I wanted to know if there is any performance benefit of using one over the other with TornadoFx ? </p>\n"}, {"tags": ["android", "sorting", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 242, "user_id": 6805851, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c9530b4d38d6da1218e530afb4cb2bb3?s=128&d=identicon&r=PG&f=1", "display_name": "T. Roman", "link": "https://stackoverflow.com/users/6805851/t-roman"}, "edited": false, "score": 0, "creation_date": 1510671215, "post_id": 47288606, "comment_id": 81527905, "body": "Thank man. This code give me filtered collection of map. But how i can use forEach - for all Maps. I mean forEach key in each map get value ?"}, {"owner": {"reputation": 421, "user_id": 1966794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LG9m1.jpg?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/1966794/casper"}, "edited": false, "score": 0, "creation_date": 1510672778, "post_id": 47288606, "comment_id": 81529050, "body": "You would need to <code>flatMap</code>the properties. So building on hotkey&#39;s answer it would look something like this: <code>properties     ?.filter {          it.isNotEmpty() &amp;&amp;          it.keys.all { key -&gt; key is String } &amp;&amp;          it.values.all { value -&gt; value is String }     } ?.flatMap { it.entries } ?.forEach { &#47;* do something *&#47; }</code>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1510681137, "last_edit_date": 1510681137, "creation_date": 1510670797, "answer_id": 47288606, "question_id": 47288403, "link": "https://stackoverflow.com/questions/47288403/kotlin-sort-maps-collection/47288606#47288606", "title": "Kotlin - Sort maps collection", "body": "<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/all.html\" rel=\"nofollow noreferrer\"><code>.all { ... }</code></a> to check that all <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/keys.html\" rel=\"nofollow noreferrer\"><code>.keys</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/values.html\" rel=\"nofollow noreferrer\"><code>.values</code></a> are Strings: </p>\n\n<pre><code>properties\n    ?.filter { \n        it.isNotEmpty() &amp;&amp; \n        it.keys.all { key -&gt; key is String } &amp;&amp; \n        it.values.all { value -&gt; value is String }\n    }\n    ?.forEach { /* do some stuff with it */ }\n</code></pre>\n\n<p>Note that you will still need an unchecked cast to operate on the filtered maps as <code>Map&lt;String, String&gt;</code>, because the compiler cannot infer the type from the keys and values check.</p>\n"}], "owner": {"reputation": 242, "user_id": 6805851, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c9530b4d38d6da1218e530afb4cb2bb3?s=128&d=identicon&r=PG&f=1", "display_name": "T. Roman", "link": "https://stackoverflow.com/users/6805851/t-roman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 1, "accepted_answer_id": 47288606, "answer_count": 1, "score": 2, "last_activity_date": 1580894570, "creation_date": 1510670244, "last_edit_date": 1580894570, "question_id": 47288403, "link": "https://stackoverflow.com/questions/47288403/kotlin-sort-maps-collection", "title": "Kotlin - Sort maps collection", "body": "<p>I have a function </p>\n\n<pre><code>fun init(properties: Collection&lt;Map&lt;Any, Any&gt;&gt;?) {\n    properties?.filter { it.isNotEmpty() }\n}\n</code></pre>\n\n<ol>\n<li>I need to filter out empty maps. </li>\n<li>I only need maps which have keys and values of type <code>String</code>. </li>\n<li>For the remaining maps, I want to iterate the keys to get the values.</li>\n</ol>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 16210, "user_id": 819340, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NJ0q8ZFwD6s/AAAAAAAAAAI/AAAAAAAAACI/Wy1G-7NtYCU/photo.jpg?sz=128", "display_name": "Paulo Mattos", "link": "https://stackoverflow.com/users/819340/paulo-mattos"}, "edited": false, "score": 1, "creation_date": 1510666536, "post_id": 47287017, "comment_id": 81524353, "body": "The <code>group</code> data is missing even from the <code>DataSnapshot</code>? Weird... are you sure that database screenshot is really reflecting your actual setup?"}, {"owner": {"reputation": 735, "user_id": 1084806, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uKhwC.jpg?s=128&g=1", "display_name": "SkyTreasure", "link": "https://stackoverflow.com/users/1084806/skytreasure"}, "reply_to_user": {"reputation": 16210, "user_id": 819340, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NJ0q8ZFwD6s/AAAAAAAAAAI/AAAAAAAAACI/Wy1G-7NtYCU/photo.jpg?sz=128", "display_name": "Paulo Mattos", "link": "https://stackoverflow.com/users/819340/paulo-mattos"}, "edited": false, "score": 0, "creation_date": 1510667294, "post_id": 47287017, "comment_id": 81524866, "body": "@PauloMattos Yes the firebase reference url - https://&lt;---&gt;/androidchat/users/uid-6 when opened in browser its redirecting properly to the exact place which has all data"}, {"owner": {"reputation": 63626, "user_id": 7015400, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rhlKG.jpg?s=128&g=1", "display_name": "Peter Haddad", "link": "https://stackoverflow.com/users/7015400/peter-haddad"}, "edited": false, "score": 0, "creation_date": 1510668096, "post_id": 47287017, "comment_id": 81525473, "body": "show the whole dataClass"}, {"owner": {"reputation": 16210, "user_id": 819340, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NJ0q8ZFwD6s/AAAAAAAAAAI/AAAAAAAAACI/Wy1G-7NtYCU/photo.jpg?sz=128", "display_name": "Paulo Mattos", "link": "https://stackoverflow.com/users/819340/paulo-mattos"}, "edited": false, "score": 1, "creation_date": 1510668180, "post_id": 47287017, "comment_id": 81525534, "body": "This might be client-side caching issue... was that <code>group</code> child created (very!) recently? If so, try temporarily disabling Firebase\u2019s client persistence behaviour and try again."}, {"owner": {"reputation": 735, "user_id": 1084806, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uKhwC.jpg?s=128&g=1", "display_name": "SkyTreasure", "link": "https://stackoverflow.com/users/1084806/skytreasure"}, "edited": false, "score": 0, "creation_date": 1510725137, "post_id": 47287017, "comment_id": 81551509, "body": "This is behaving weirdly! Yesterday night when i tried for the first time it worked, today morning back to the same problem!"}, {"owner": {"reputation": 735, "user_id": 1084806, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uKhwC.jpg?s=128&g=1", "display_name": "SkyTreasure", "link": "https://stackoverflow.com/users/1084806/skytreasure"}, "reply_to_user": {"reputation": 63626, "user_id": 7015400, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/rhlKG.jpg?s=128&g=1", "display_name": "Peter Haddad", "link": "https://stackoverflow.com/users/7015400/peter-haddad"}, "edited": false, "score": 0, "creation_date": 1510725237, "post_id": 47287017, "comment_id": 81551553, "body": "@PeterHaddad I have shared the dataclass above... I am querying for usermodel nothing else."}, {"owner": {"reputation": 842, "user_id": 2795025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b6f5019d4aea4aa2ac76c024ed3c2c?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Sachdeva", "link": "https://stackoverflow.com/users/2795025/deepak-sachdeva"}, "edited": false, "score": 0, "creation_date": 1522735705, "post_id": 47287017, "comment_id": 86253575, "body": "@SkyTreasure Have you got your answer?"}, {"owner": {"reputation": 842, "user_id": 2795025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b6f5019d4aea4aa2ac76c024ed3c2c?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Sachdeva", "link": "https://stackoverflow.com/users/2795025/deepak-sachdeva"}, "edited": false, "score": 0, "creation_date": 1522735737, "post_id": 47287017, "comment_id": 86253586, "body": "@SkyTreasure I have posted my answer. Try this, It may work for you."}], "answers": [{"tags": [], "owner": {"reputation": 842, "user_id": 2795025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28b6f5019d4aea4aa2ac76c024ed3c2c?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Sachdeva", "link": "https://stackoverflow.com/users/2795025/deepak-sachdeva"}, "is_accepted": false, "score": 0, "last_activity_date": 1522735670, "creation_date": 1522735670, "answer_id": 49623303, "question_id": 47287017, "link": "https://stackoverflow.com/questions/47287017/unable-to-retrieve-one-of-the-nested-data-from-firebase-realtime-database/49623303#49623303", "title": "Unable to retrieve one of the Nested data from Firebase Realtime Database", "body": "<p>I was also facing the same issue. But finally, I got the solution. I had the following format of data:</p>\n\n<pre><code>{\n\"name\":\"Deepak\",\n\"date\":\"03 April 2018\",\n\"match_number\":\"3\",\n\"team_name1\":\"Delhi\",\n\"team_name2\":\"Punjab\"\n}\n</code></pre>\n\n<p>I have <strong>removed underscore(_) from match_number, team_name1, and team_name2</strong> and used <strong>matchNumber, teamName1, and teamName2</strong>. Like below</p>\n\n<pre><code> {\n    \"name\":\"Deepak\",\n    \"date\":\"03 April 2018\",\n    \"matchNumber\":\"3\",\n    \"teamName1\":\"Delhi\",\n    \"teamName2\":\"Punjab\"\n    }\n</code></pre>\n\n<p>It works for me perfectly.Try this, maybe it works for you too.</p>\n"}], "owner": {"reputation": 735, "user_id": 1084806, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uKhwC.jpg?s=128&g=1", "display_name": "SkyTreasure", "link": "https://stackoverflow.com/users/1084806/skytreasure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522735670, "creation_date": 1510665949, "last_edit_date": 1510727777, "question_id": 47287017, "link": "https://stackoverflow.com/questions/47287017/unable-to-retrieve-one-of-the-nested-data-from-firebase-realtime-database", "title": "Unable to retrieve one of the Nested data from Firebase Realtime Database", "body": "<p>I have the following structure in firebase. </p>\n\n<p><a href=\"https://i.stack.imgur.com/zshMd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zshMd.png\" alt=\"enter image description here\"></a></p>\n\n<p>In order to retrieve the data i am using the following code-</p>\n\n<pre><code> mFirebaseDatabaseReference = FirebaseDatabase.getInstance().reference.child(\"androidchat\").child(\"users\").child(\"uid-6\")\n\nmFirebaseDatabaseReference?.addValueEventListener(object : ValueEventListener {\n    override fun onCancelled(p0: DatabaseError?) {\n        callback?.handleData(false, requestType)\n    }\n\n    override fun onDataChange(p0: DataSnapshot?) {\n        var userModel: UserModel? = p0?.getValue&lt;UserModel&gt;(UserModel::class.java)\n\n        }\n    }\n})\n</code></pre>\n\n<p>When onDataChange() is called p0 contains all other data except <strong>group</strong> data. </p>\n\n<p>Here's my dataclass UserModel-</p>\n\n<pre><code>data class UserModel(var uid: String? = null,\n                 var name: String? = null,\n                 var image_url: String? = null,\n                 var user_location: String? = null,\n                 var email: String? = null,\n                 var group: MutableMap&lt;String, Boolean&gt; = mutableMapOf(),\n                 var deviceIds : MutableMap&lt;String,String&gt; = mutableMapOf(),\n                 var online: Boolean? = null,\n                 var unread_group_count: Int? = null,\n                 var last_seen_online: String? = null,\n                 var last_seen_message_timestamp: String? = null,\n                 var admin: Boolean? = null,\n                 var delete_till: String? = null,\n                 var active: Boolean? = null)\n</code></pre>\n\n<p>Any idea why that data is not coming? here is the screen shot of the data , user has many groups but it shows 0 groups-\n<a href=\"https://i.stack.imgur.com/DbBw3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DbBw3.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the datasnapshot which i received-</p>\n\n<pre><code>DataSnapshot { key = uid-6, value = {deviceIds={cc2583f5a2c92eff=dafO8mlj7aa:APA91bETLdet4b-oUnyYAe-GU68BuI4Sw1iT0jGCkUZdjes-ybA_9ZgHtZO-AoApVXQL9NfatyCgSfPSO74fsCUMY-6AY_8826D5AROVkFlQSUs8VKO5_FswoQceTxZ }, last_seen_message_timestamp=1510664398869, name=Akash Nidhi, uid=uid-6, online=true, user_location=USA-OTHERS, image_url=https://s3.ap-south-1.amazonaws.com/employees/images/150528664259b8d9f29c385.jpeg} }\n</code></pre>\n\n<p>There's no group inside the datasnapshot!.</p>\n\n<p><strong>Update</strong> \nAdded this line mFirebaseDatabaseReference?.keepSynced(false). It worked few times yesterday and its not working now!</p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-authentication"], "comments": [{"owner": {"reputation": 15590, "user_id": 6478047, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Rd7gY.jpg?s=128&g=1", "display_name": "Manohar Reddy", "link": "https://stackoverflow.com/users/6478047/manohar-reddy"}, "edited": false, "score": 1, "creation_date": 1510662808, "post_id": 47285784, "comment_id": 81521721, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22262463/firebase-how-to-keep-an-android-user-logged-in\">Firebase: How to keep an Android user logged in?</a>"}, {"owner": {"reputation": 6208, "user_id": 2754146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QallG.png?s=128&g=1", "display_name": "Grimthorr", "link": "https://stackoverflow.com/users/2754146/grimthorr"}, "edited": false, "score": 0, "creation_date": 1542119751, "post_id": 47285784, "comment_id": 93448254, "body": "Please let me know if my answer can be improved. Or, if it helped you, feel free to <a href=\"https://meta.stackexchange.com/a/5235\">mark it as accepted</a>."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8938760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c295190b0636b1903caf8a5796e611?s=128&d=identicon&r=PG&f=1", "display_name": "JDOEs", "link": "https://stackoverflow.com/users/8938760/jdoes"}, "edited": false, "score": 0, "creation_date": 1510662882, "post_id": 47286015, "comment_id": 81521774, "body": "Thanks, going to try it out"}, {"owner": {"reputation": 41, "user_id": 8938760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c295190b0636b1903caf8a5796e611?s=128&d=identicon&r=PG&f=1", "display_name": "JDOEs", "link": "https://stackoverflow.com/users/8938760/jdoes"}, "edited": false, "score": 0, "creation_date": 1510663072, "post_id": 47286015, "comment_id": 81521912, "body": "How can I make sure the user is logged in?"}, {"owner": {"reputation": 41, "user_id": 8938760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c295190b0636b1903caf8a5796e611?s=128&d=identicon&r=PG&f=1", "display_name": "JDOEs", "link": "https://stackoverflow.com/users/8938760/jdoes"}, "edited": false, "score": 0, "creation_date": 1510663416, "post_id": 47286015, "comment_id": 81522127, "body": "Because I deleted all the users, and the code you gave me still takes me to the MainActivity. And there are no users so it is impossible to be logged in"}, {"owner": {"reputation": 6208, "user_id": 2754146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QallG.png?s=128&g=1", "display_name": "Grimthorr", "link": "https://stackoverflow.com/users/2754146/grimthorr"}, "reply_to_user": {"reputation": 41, "user_id": 8938760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c295190b0636b1903caf8a5796e611?s=128&d=identicon&r=PG&f=1", "display_name": "JDOEs", "link": "https://stackoverflow.com/users/8938760/jdoes"}, "edited": false, "score": 0, "creation_date": 1510663519, "post_id": 47286015, "comment_id": 81522191, "body": "Like I&#39;ve shown in my example: <code>auth.getCurrentUser()</code> will be <code>null</code> if the user is not logged in. If the user is logged in, the <code>auth.getCurrentUser()</code> will return a <code>FirebaseUser</code> object."}, {"owner": {"reputation": 6208, "user_id": 2754146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QallG.png?s=128&g=1", "display_name": "Grimthorr", "link": "https://stackoverflow.com/users/2754146/grimthorr"}, "reply_to_user": {"reputation": 41, "user_id": 8938760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c295190b0636b1903caf8a5796e611?s=128&d=identicon&r=PG&f=1", "display_name": "JDOEs", "link": "https://stackoverflow.com/users/8938760/jdoes"}, "edited": false, "score": 0, "creation_date": 1510663626, "post_id": 47286015, "comment_id": 81522260, "body": "No, you will still be logged in - <a href=\"https://stackoverflow.com/a/35961217/2754146\">even if the user is deleted, your app will still hold an authentication token</a>, so is technically still authenticated. To logout, clear the app data or use <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseAuth.html#signOut()\" rel=\"nofollow noreferrer\"><code>FirebaseAuth#signOut()</code></a>."}, {"owner": {"reputation": 6208, "user_id": 2754146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QallG.png?s=128&g=1", "display_name": "Grimthorr", "link": "https://stackoverflow.com/users/2754146/grimthorr"}, "reply_to_user": {"reputation": 41, "user_id": 8938760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c295190b0636b1903caf8a5796e611?s=128&d=identicon&r=PG&f=1", "display_name": "JDOEs", "link": "https://stackoverflow.com/users/8938760/jdoes"}, "edited": false, "score": 0, "creation_date": 1510663825, "post_id": 47286015, "comment_id": 81522416, "body": "You can clear app data on the Android device through: <code>Settings &gt; Applications &gt; Your App &gt; Clear Data</code>, or use <a href=\"https://stackoverflow.com/questions/10934304/clear-android-application-user-data\"><code>adb shell pm clear packageName</code></a> where <code>packageName</code> is the full package name of your app."}, {"owner": {"reputation": 41, "user_id": 8938760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c295190b0636b1903caf8a5796e611?s=128&d=identicon&r=PG&f=1", "display_name": "JDOEs", "link": "https://stackoverflow.com/users/8938760/jdoes"}, "edited": false, "score": 0, "creation_date": 1510663889, "post_id": 47286015, "comment_id": 81522457, "body": "Anyway apart from signet or that to check/incheck that token?"}, {"owner": {"reputation": 6208, "user_id": 2754146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QallG.png?s=128&g=1", "display_name": "Grimthorr", "link": "https://stackoverflow.com/users/2754146/grimthorr"}, "reply_to_user": {"reputation": 41, "user_id": 8938760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c295190b0636b1903caf8a5796e611?s=128&d=identicon&r=PG&f=1", "display_name": "JDOEs", "link": "https://stackoverflow.com/users/8938760/jdoes"}, "edited": false, "score": 0, "creation_date": 1510664318, "post_id": 47286015, "comment_id": 81522770, "body": "The only way to clear the authentication session (and logout the current user) is to clear the app data or call <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseAuth.html#signOut()\" rel=\"nofollow noreferrer\"><code>FirebaseAuth.getInstance().signOut()</code></a>."}, {"owner": {"reputation": 6208, "user_id": 2754146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QallG.png?s=128&g=1", "display_name": "Grimthorr", "link": "https://stackoverflow.com/users/2754146/grimthorr"}, "reply_to_user": {"reputation": 41, "user_id": 8938760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c295190b0636b1903caf8a5796e611?s=128&d=identicon&r=PG&f=1", "display_name": "JDOEs", "link": "https://stackoverflow.com/users/8938760/jdoes"}, "edited": false, "score": 0, "creation_date": 1510667845, "post_id": 47286015, "comment_id": 81525279, "body": "If this helped to answer your question, please consider <a href=\"https://meta.stackexchange.com/a/5235\">accepting it</a> using the tick under the upvote buttons."}], "tags": [], "owner": {"reputation": 6208, "user_id": 2754146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QallG.png?s=128&g=1", "display_name": "Grimthorr", "link": "https://stackoverflow.com/users/2754146/grimthorr"}, "is_accepted": false, "score": 9, "last_activity_date": 1572980023, "last_edit_date": 1572980023, "creation_date": 1510662777, "answer_id": 47286015, "question_id": 47285784, "link": "https://stackoverflow.com/questions/47285784/firebase-android-auto-login/47286015#47286015", "title": "Firebase Android Auto Login", "body": "<p>Firebase Authentication does automatically remember authentication state, so the user will still be authenticated when the app is restarted.</p>\n\n<p>However, if your <code>LoginActivity</code> is the launcher activity, you'll still land on this activity, so you'll need to check whether the user is authenticated in <code>onCreate()</code>, and then redirect them to your <code>MainActivity</code> if they are already logged in, something like:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_login);\n\n    auth = FirebaseAuth.getInstance();\n\n    if (auth.getCurrentUser() != null) {\n        // User is signed in (getCurrentUser() will be null if not signed in)\n        val intent = Intent(this, MainActivity::class.java);\n        startActivity(intent);\n        finish();\n    }\n}\n</code></pre>\n\n<p>This makes use of the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseAuth.html#getCurrentUser()\" rel=\"noreferrer\"><code>FirebaseAuth#getCurrentUser()</code></a> method that will return a <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseUser\" rel=\"noreferrer\"><code>FirebaseUser</code></a> object if the user is logged in, or <code>null</code> if they are not logged in.</p>\n\n<p>Alternatively, you could swap it around so that the <code>MainActivity</code> is the launcher activity and then only show your <code>LoginActivity</code> if the user is not logged in.</p>\n\n<p>....</p>\n"}, {"tags": [], "owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "is_accepted": false, "score": 0, "last_activity_date": 1596707334, "creation_date": 1596707334, "answer_id": 63280968, "question_id": 47285784, "link": "https://stackoverflow.com/questions/47285784/firebase-android-auto-login/63280968#63280968", "title": "Firebase Android Auto Login", "body": "<p>If anyone landing up here for achieving same thing using java then use following code</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    auth = FirebaseAuth.getInstance();\n\n    if (auth.getCurrentUser() != null) {\n        // User is signed in (getCurrentUser() will be null if not signed in)\n        Intent intent = Intent(this, MainActivity::class.java);\n        startActivity(intent);\n        finish();\n        // or do some other stuff that you want to do\n    }\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8938760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c295190b0636b1903caf8a5796e611?s=128&d=identicon&r=PG&f=1", "display_name": "JDOEs", "link": "https://stackoverflow.com/users/8938760/jdoes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10251, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1596707334, "creation_date": 1510662118, "last_edit_date": 1510667935, "question_id": 47285784, "link": "https://stackoverflow.com/questions/47285784/firebase-android-auto-login", "title": "Firebase Android Auto Login", "body": "<p>So I setup email/password register and login.</p>\n\n<p>That is working. I thought Firebase took care of this but apparently not.\nI want, after the user closes the app, to be logged in already next time they open the app.</p>\n\n<p>What is missing?</p>\n\n<pre><code>class LoginActivity : AppCompatActivity(){\n    lateinit var auth: FirebaseAuth\n    lateinit var user: FirebaseAuth\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_login)\n\n        auth = FirebaseAuth.getInstance()\n    }\n\n    fun loginLoginClicked(view: View) {\n        // Perform login\n\n        val email = loginEmailTxt.text.toString()\n        val password = loginPasswordTxt.text.toString()\n\n        auth.signInWithEmailAndPassword(email, password)\n                .addOnSuccessListener {\n                    finish()\n                }\n                .addOnFailureListener { exception -&gt;\n                    Log.e(\"Exception\", \"Could not sign in user - ${exception.localizedMessage}\")\n                }\n        val loginIntent = Intent(this, MainActivity::class.java)\n        startActivity(loginIntent)\n    }\n\n    fun loginCreateClicked(view: View) {\n        // segue to the create user activity\n\n        val createIntent = Intent(this, SignUpActivity::class.java)\n        startActivity(createIntent)\n    }}\n}\n</code></pre>\n"}, {"tags": ["android", "android-edittext", "kotlin", "kotlin-android-extensions"], "answers": [{"tags": [], "owner": {"reputation": 2916, "user_id": 2543013, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dc4d80d710ca9ca798bb374e0d1064fd?s=128&d=identicon&r=PG", "display_name": "kosas", "link": "https://stackoverflow.com/users/2543013/kosas"}, "is_accepted": false, "score": 2, "last_activity_date": 1511524084, "last_edit_date": 1511524084, "creation_date": 1510660890, "answer_id": 47285358, "question_id": 47285180, "link": "https://stackoverflow.com/questions/47285180/kotlin-dialogfragment-edittext-editable-always-null/47285358#47285358", "title": "Kotlin DialogFragment editText editable always null", "body": "<p>So finally I figure it out \u2014 on Dialog Fragment view will always be null, because its never created, but it's created and added to dialog view which means I need to call:</p>\n\n<pre><code>dialog.group_edit_text.text.toString()\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>view.group_edit_text.text.toString()\n</code></pre>\n"}], "owner": {"reputation": 2916, "user_id": 2543013, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dc4d80d710ca9ca798bb374e0d1064fd?s=128&d=identicon&r=PG", "display_name": "kosas", "link": "https://stackoverflow.com/users/2543013/kosas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511524084, "creation_date": 1510660408, "last_edit_date": 1511521029, "question_id": 47285180, "link": "https://stackoverflow.com/questions/47285180/kotlin-dialogfragment-edittext-editable-always-null", "title": "Kotlin DialogFragment editText editable always null", "body": "<p>So, I'm using Kotlin extensions which is straightforward, but I can't get string from edittext</p>\n\n<p>here is my code:</p>\n\n<pre><code>override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {\n\n    val v = activity.layoutInflater\n            .inflate(R.layout.dialog_group, null)\n\n    v.add_group_button.setOnClickListener(addListener)\n\n    return AlertDialog.Builder(activity)\n            .setView(v)\n            .create()\n}\n\nprivate var addListener: View.OnClickListener = View.OnClickListener {\n\n        val groupNameInput: String = view?.group_edit_text?.text.toString()\n\n    }\n</code></pre>\n\n<p>when I'm pressing add button <code>groupNameInput</code> always returns null why?</p>\n"}, {"tags": ["java", "gson", "kotlin", "json-deserialization"], "comments": [{"owner": {"reputation": 1454, "user_id": 2000099, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/24acb368d6f831aa7ea51c391f32c2af?s=128&d=identicon&r=PG", "display_name": "vmtrue", "link": "https://stackoverflow.com/users/2000099/vmtrue"}, "edited": false, "score": 0, "creation_date": 1510655767, "post_id": 47283216, "comment_id": 81517054, "body": "Have you tired <a href=\"https://github.com/SalomonBrys/Kotson\" rel=\"nofollow noreferrer\">github.com/SalomonBrys/Kotson</a>?"}, {"owner": {"reputation": 8875, "user_id": 3379437, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RPALD.png?s=128&g=1", "display_name": "Beloo", "link": "https://stackoverflow.com/users/3379437/beloo"}, "reply_to_user": {"reputation": 1454, "user_id": 2000099, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/24acb368d6f831aa7ea51c391f32c2af?s=128&d=identicon&r=PG", "display_name": "vmtrue", "link": "https://stackoverflow.com/users/2000099/vmtrue"}, "edited": false, "score": 0, "creation_date": 1510655876, "post_id": 47283216, "comment_id": 81517125, "body": "@fisher3421 No, i haven&#39;t. Does this library have a solution for this? And if possible i want to avoid additional dependency"}], "answers": [{"comments": [{"owner": {"reputation": 8875, "user_id": 3379437, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RPALD.png?s=128&g=1", "display_name": "Beloo", "link": "https://stackoverflow.com/users/3379437/beloo"}, "edited": false, "score": 0, "creation_date": 1510656390, "post_id": 47283411, "comment_id": 81517448, "body": "maybe this is the only way, but of course would be better to avoid additional annotation &amp; additional reflection in jsonDeserializers, because kotlin already has out of the box feature for nullable &amp; non-null fields. But i do not exclude that this is the only way"}, {"owner": {"reputation": 1077, "user_id": 4050911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LH5r7weipjc/AAAAAAAAAAI/AAAAAAAAAd4/Z07jjq6pTtM/photo.jpg?sz=128", "display_name": "osipxd", "link": "https://stackoverflow.com/users/4050911/osipxd"}, "reply_to_user": {"reputation": 8875, "user_id": 3379437, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RPALD.png?s=128&g=1", "display_name": "Beloo", "link": "https://stackoverflow.com/users/3379437/beloo"}, "edited": false, "score": 0, "creation_date": 1510657560, "post_id": 47283411, "comment_id": 81518195, "body": "@Beloo, Best way that I know - write something like this, but for Gson: <a href=\"https://github.com/square/moshi/blob/master/kotlin/src/main/java/com/squareup/moshi/KotlinJsonAdapter.kt\" rel=\"nofollow noreferrer\">github.com/square/moshi/blob/master/kotlin/src/main/java/com&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 1077, "user_id": 4050911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LH5r7weipjc/AAAAAAAAAAI/AAAAAAAAAd4/Z07jjq6pTtM/photo.jpg?sz=128", "display_name": "osipxd", "link": "https://stackoverflow.com/users/4050911/osipxd"}, "reply_to_user": {"reputation": 8875, "user_id": 3379437, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RPALD.png?s=128&g=1", "display_name": "Beloo", "link": "https://stackoverflow.com/users/3379437/beloo"}, "edited": false, "score": 0, "creation_date": 1564650407, "post_id": 47283411, "comment_id": 101103703, "body": "The old link is broken. Permalink here: <a href=\"https://github.com/square/moshi/blob/13a40edf5bb5779da81862d196df7ed4f944eea0/kotlin/reflect/src/main/java/com/squareup/moshi/kotlin/reflect/KotlinJsonAdapter.kt\" rel=\"nofollow noreferrer\">github.com/square/moshi/blob/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1077, "user_id": 4050911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LH5r7weipjc/AAAAAAAAAAI/AAAAAAAAAd4/Z07jjq6pTtM/photo.jpg?sz=128", "display_name": "osipxd", "link": "https://stackoverflow.com/users/4050911/osipxd"}, "is_accepted": true, "score": 2, "last_activity_date": 1510655514, "creation_date": 1510655514, "answer_id": 47283411, "question_id": 47283216, "link": "https://stackoverflow.com/questions/47283216/null-safe-network-response-using-gson-and-kotlin/47283411#47283411", "title": "Null-safe network response using Gson and Kotlin", "body": "<p>You can use custom <code>JsonDeserializer</code> that will validate fields annotated by something like <code>@RequiredField</code> and automatically throw exception if it is null.</p>\n\n<p>How to do it you can find here: <a href=\"https://stackoverflow.com/questions/21626690/gson-optional-and-required-fields\">Gson optional and required fields</a></p>\n"}], "owner": {"reputation": 8875, "user_id": 3379437, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RPALD.png?s=128&g=1", "display_name": "Beloo", "link": "https://stackoverflow.com/users/3379437/beloo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1924, "favorite_count": 1, "accepted_answer_id": 47283411, "answer_count": 1, "score": 2, "last_activity_date": 1510655514, "creation_date": 1510654961, "question_id": 47283216, "link": "https://stackoverflow.com/questions/47283216/null-safe-network-response-using-gson-and-kotlin", "title": "Null-safe network response using Gson and Kotlin", "body": "<p>Assuming you have such data-class pojo, which represents typical gson-based representation of response comes from server.</p>\n\n<pre><code>data class User(\n        @field:SerializedName(\"id\")\n        val id: String,\n        @field:SerializedName(\"name\")\n        val name: String,\n        @field:SerializedName(\"user_phone\")\n        val phone: String?)\n</code></pre>\n\n<p><strong>id</strong> and <strong>name</strong> fields are required, <strong>phone</strong> field is optional<br>\nSo the appropriate json this model is expecting, for example:</p>\n\n<pre><code>{\n   \"id\": \"someHash\",\n   \"name\": \"John Snow\"\n}\n</code></pre>\n\n<p>Sometimes server  can send json like: </p>\n\n<pre><code>{\n   \"id\": \"someHash\"      \n}\n</code></pre>\n\n<p>Unfortunately such json is parsed successfully without any error, because gson uses <em>unsafe reflection</em> and was written for java. So as a result there will be corrupted kotlin model with <strong>null</strong> stored in <strong>non-null</strong> field</p>\n\n<p>I want to provide validation for this model on the json-deserialization layer, because it is better to receive an error right there, not in any other part of application, which expects non-null field.<br>\nAnd i'm looking for any consize solution for this problem.    </p>\n\n<p>Of course you can provide some explicit validation function for each model like</p>\n\n<pre><code>fun User.validate() {\n    if (id == null) throw JsonParseException(\"'id' is null!\")\n    if (name == null) throw JsonParseException(\"'name' is null!\")\n}\n</code></pre>\n\n<p>and call it by hand in any place but it produces a lot boilerplate code, which we always try to avoid. And also ide warns this as it thinks unnecessary null checking</p>\n"}, {"tags": ["android", "kotlin", "mockito"], "answers": [{"tags": [], "owner": {"reputation": 16592, "user_id": 2462531, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oQIzz.jpg?s=128&g=1", "display_name": "Shailendra Madda", "link": "https://stackoverflow.com/users/2462531/shailendra-madda"}, "is_accepted": true, "score": 29, "last_activity_date": 1576658423, "last_edit_date": 1576658423, "creation_date": 1510652753, "answer_id": 47282382, "question_id": 47282198, "link": "https://stackoverflow.com/questions/47282198/how-to-set-up-mockito-for-kotlin-and-android/47282382#47282382", "title": "How to set up Mockito for Kotlin and Android", "body": "<p>You need to add the following dependencies in your app's build.gradle:</p>\n\n<pre><code>dependencies {\n    // ... more entries\n    testCompile 'junit:junit:4.12'\n\n    // required if you want to use Mockito for unit tests\n    testImplementation 'org.mockito:mockito-core:2.24.5'\n    // required if you want to use Mockito for Android tests\n    androidTestImplementation 'org.mockito:mockito-android:2.24.5'\n}\n</code></pre>\n\n<p>And click on sync </p>\n"}, {"tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": false, "score": 4, "last_activity_date": 1510652868, "creation_date": 1510652868, "answer_id": 47282421, "question_id": 47282198, "link": "https://stackoverflow.com/questions/47282198/how-to-set-up-mockito-for-kotlin-and-android/47282421#47282421", "title": "How to set up Mockito for Kotlin and Android", "body": "<p>You may need another dependency:</p>\n\n<pre><code>androidTestCompile 'org.mockito:mockito-android:2.12.0'\n</code></pre>\n\n<p>Alternatively, you can try manually importing the annotations:</p>\n\n<pre><code>import static org.mockito.Mockito.*;\n</code></pre>\n\n<p>It could be that it didn't import properly and that's why it showed as an unresolved reference. Auto-import has its flaws</p>\n"}, {"tags": [], "owner": {"reputation": 530, "user_id": 5339154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a265d60792b49725beeb3d4fa20154e?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Artamonov", "link": "https://stackoverflow.com/users/5339154/andrii-artamonov"}, "is_accepted": false, "score": 0, "last_activity_date": 1579872169, "creation_date": 1579872169, "answer_id": 59897326, "question_id": 47282198, "link": "https://stackoverflow.com/questions/47282198/how-to-set-up-mockito-for-kotlin-and-android/59897326#59897326", "title": "How to set up Mockito for Kotlin and Android", "body": "<p>I have faced an issue with <code>assembleDebugAndroidTest</code> which is related to <code>objenesis</code>. So, based on Shylendra's answer, you may want to replace</p>\n\n<pre><code>androidTestImplementation 'org.mockito:mockito-android:2.24.5'\n</code></pre>\n\n<p>with</p>\n\n<pre><code>androidTestImplementation(\"org.mockito:mockito-core:2.8.47\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 647, "user_id": 6193843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0420998b5ea04d752fe70cb3f82aa43d?s=128&d=identicon&r=PG&f=1", "display_name": "Link182", "link": "https://stackoverflow.com/users/6193843/link182"}, "is_accepted": false, "score": 0, "last_activity_date": 1601384265, "creation_date": 1601384265, "answer_id": 64120136, "question_id": 47282198, "link": "https://stackoverflow.com/questions/47282198/how-to-set-up-mockito-for-kotlin-and-android/64120136#64120136", "title": "How to set up Mockito for Kotlin and Android", "body": "<p>Very confortable library over mockito:</p>\n<pre><code>    testImplementation 'org.mockito:mockito-inline:2.21.0'\n    testImplementation('com.nhaarman.mockitokotlin2:mockito-kotlin:2.2.0') {\n        exclude group: 'org.jetbrains.kotlin'\n        exclude group: 'org.mockito'\n    }\n\n    // Also works like a charm with instrumentation tests\n    androidTestImplementation 'org.mockito:mockito-android:3.5.13'\n    androidTestImplementation('com.nhaarman.mockitokotlin2:mockito-kotlin:2.2.0') {\n        exclude group: 'org.jetbrains.kotlin'\n        exclude group: 'org.mockito'\n    }\n</code></pre>\n"}], "owner": {"reputation": 8470, "user_id": 682763, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/cc4ab410936026ce1b033d77cfca419e?s=128&d=identicon&r=PG", "display_name": "Expert wanna be", "link": "https://stackoverflow.com/users/682763/expert-wanna-be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5823, "favorite_count": 0, "accepted_answer_id": 47282382, "answer_count": 4, "score": 8, "last_activity_date": 1601384265, "creation_date": 1510652245, "question_id": 47282198, "link": "https://stackoverflow.com/questions/47282198/how-to-set-up-mockito-for-kotlin-and-android", "title": "How to set up Mockito for Kotlin and Android", "body": "<p>I want to use Mockito for unit testing, so I added the Mockito library into my gradle dependencies.</p>\n\n<pre><code>testImplementation 'junit:junit:4.12'\ntestCompile 'org.mockito:mockito-core:2.12.0' \n</code></pre>\n\n<p>But still, I can not use any Mockito annotations.</p>\n\n<p><strong>/androidTest/ExampleTest.kt</strong></p>\n\n<pre><code>@RunWith(MockitoJUnitRunner::class) // Unresolved reference MockitoJUnitRunner\n@Mock // Unresolved reference Mock\n</code></pre>\n\n<p>What I'm missing it?</p>\n"}, {"tags": ["android", "generics", "kotlin"], "comments": [{"owner": {"reputation": 1077, "user_id": 4050911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LH5r7weipjc/AAAAAAAAAAI/AAAAAAAAAd4/Z07jjq6pTtM/photo.jpg?sz=128", "display_name": "osipxd", "link": "https://stackoverflow.com/users/4050911/osipxd"}, "edited": false, "score": 0, "creation_date": 1510654012, "post_id": 47281812, "comment_id": 81515879, "body": "Can you show <code>onAttachView</code> method from presenter?"}], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 6418593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd98848567adccca550f6b6799307b7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Nik", "link": "https://stackoverflow.com/users/6418593/alex-nik"}, "edited": false, "score": 0, "creation_date": 1510840999, "post_id": 47327896, "comment_id": 81614061, "body": "I want to attach view in base presenter"}, {"owner": {"reputation": 2128, "user_id": 2496348, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f5b4247efe9f1acf137af74d02778ead?s=128&d=identicon&r=PG", "display_name": "Khairil Ushan", "link": "https://stackoverflow.com/users/2496348/khairil-ushan"}, "reply_to_user": {"reputation": 673, "user_id": 6418593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd98848567adccca550f6b6799307b7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Nik", "link": "https://stackoverflow.com/users/6418593/alex-nik"}, "edited": false, "score": 0, "creation_date": 1510862529, "post_id": 47327896, "comment_id": 81628318, "body": "sorry @AlexNik , i think i skip some points of your question. so i just edited my answer. i removed some parts, only include <code>attatchView</code> and <code>detachView</code> since I think these 2 methods that you&#39;re interested in the most."}, {"owner": {"reputation": 2128, "user_id": 2496348, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f5b4247efe9f1acf137af74d02778ead?s=128&d=identicon&r=PG", "display_name": "Khairil Ushan", "link": "https://stackoverflow.com/users/2496348/khairil-ushan"}, "reply_to_user": {"reputation": 673, "user_id": 6418593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd98848567adccca550f6b6799307b7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Nik", "link": "https://stackoverflow.com/users/6418593/alex-nik"}, "edited": false, "score": 0, "creation_date": 1511320013, "post_id": 47327896, "comment_id": 81807129, "body": "Hi @AlexNik just curious, is my updated answer help you? :D"}], "tags": [], "owner": {"reputation": 2128, "user_id": 2496348, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f5b4247efe9f1acf137af74d02778ead?s=128&d=identicon&r=PG", "display_name": "Khairil Ushan", "link": "https://stackoverflow.com/users/2496348/khairil-ushan"}, "is_accepted": false, "score": 3, "last_activity_date": 1510887802, "last_edit_date": 1510887802, "creation_date": 1510829938, "answer_id": 47327896, "question_id": 47281812, "link": "https://stackoverflow.com/questions/47281812/generic-types-and-polymorphism/47327896#47327896", "title": "Generic types and polymorphism", "body": "<p>Perhaps you can make it like this</p>\n\n<pre><code>interface IView\n\ninterface IPresenter {\n    fun attachView(v: IView)\n    fun detachView()\n}\n\nabstract class BasePresenter&lt;V :IView&gt; : IPresenter {\n    protected var view: V? = null\n\n    override fun attachView(v: IView) {\n        this.view = v as V\n    }\n\n    override fun detachView() {\n        view = null\n    }\n}\n\nabstract class BaseFragment&lt;P : IPresenter&gt; : Fragment(), IView {\n    protected lateinit var presenter: P\n\n    override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        presenter.attachView(this)\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        presenter.detachView()\n    }\n}\n\ninterface TestView : IView {\n    fun doSomething()\n}\n\ninterface TestPresenter : IPresenter {\n    fun doSomething()\n}\n\nclass TestPresenterImpl : BasePresenter&lt;TestView&gt;(), TestPresenter {\n    override fun doSomething() {\n    }\n}\n\nclass TestFragment : BaseFragment&lt;TestPresenter&gt;(), TestView {\n\n    override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        presenter = TestPresenterImpl()\n        presenter.doSomething()\n    }\n\n    override fun doSomething() {\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9906, "user_id": 336378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ee9272dbc4fd98a65807b5149559b1eb?s=128&d=identicon&r=PG", "display_name": "Alex AIT", "link": "https://stackoverflow.com/users/336378/alex-ait"}, "is_accepted": false, "score": 3, "last_activity_date": 1511386087, "last_edit_date": 1511386087, "creation_date": 1511384612, "answer_id": 47443849, "question_id": 47281812, "link": "https://stackoverflow.com/questions/47281812/generic-types-and-polymorphism/47443849#47443849", "title": "Generic types and polymorphism", "body": "<p>You could try this, then you can have the unchecked warning in Kotlin as well ;-)</p>\n\n<pre><code>    if (presenter != null) {\n        val p = presenter as BasePresenter&lt;BaseMvpView&gt;\n        p.onAttachView(this)\n    }\n</code></pre>\n\n<p>In your MainFragment</p>\n\n<pre><code>    syncLifeCycle(presenter as BasePresenter&lt;BaseMvpView&gt;)\n</code></pre>\n\n<p>Not sure if it works, just played around a bit in IntelliJ. But since generics are erased during compilation and casting a MainPresenter to BasePresenter should also be fine, there is a good chance it goes through.</p>\n"}, {"comments": [{"owner": {"reputation": 673, "user_id": 6418593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd98848567adccca550f6b6799307b7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Nik", "link": "https://stackoverflow.com/users/6418593/alex-nik"}, "edited": false, "score": 0, "creation_date": 1511428134, "post_id": 47444820, "comment_id": 81857704, "body": "In that case i can not call method syncLifeCycle(presenter) from MainFragment (generic type MainMvpView can not be cast to BaseMvpView)"}], "tags": [], "owner": {"reputation": 2018, "user_id": 5562711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmKEn.jpg?s=128&g=1", "display_name": "Omar El Halabi", "link": "https://stackoverflow.com/users/5562711/omar-el-halabi"}, "is_accepted": false, "score": 5, "last_activity_date": 1511389608, "creation_date": 1511389608, "answer_id": 47444820, "question_id": 47281812, "link": "https://stackoverflow.com/questions/47281812/generic-types-and-polymorphism/47444820#47444820", "title": "Generic types and polymorphism", "body": "<p>I think replacing the <a href=\"https://kotlinlang.org/docs/reference/generics.html#star-projections\" rel=\"noreferrer\" title=\"star-projection\">star-projection</a> with <code>BaseMvpView</code> would help</p>\n\n<pre><code>abstract class BaseFragmentKotlin : Fragment(), BaseMvpView {\n\n    private var presenter: BasePresenter&lt;BaseMvpView&gt;? = null\n\n    //...\n\n    override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        presenter?.onAttachView(this)\n    }\n\n//...\n}\n</code></pre>\n\n<p>The reason is that Kotlin distinguishes between <code>out</code> and <code>in</code> type parameters (also known as <strong>covariant</strong> and <strong>contravariant</strong> parameter types, respectively).</p>\n\n<p><code>in</code> type parameters state that the type parameter is to be <em>consumed</em> by the generic class, i.e. to be used as a parameter of a function, while <code>out</code> type parameters state that the generic class will <em>produce</em> a value of passed type \nparameter, i.e. to be used as a return type for some function. </p>\n\n<p>the <code>onAttachView(V mvpView)</code> takes a contravariant type parameter which implies that it is not allowed for <code>V</code> to be of any type (it has to be of type <code>BaseMvpView</code> or a subclass) since you are <em>consuming</em> that value. That is, if <code>V</code> was totally unknown, we cannot safely read the parameter since <code>V</code> is expected to be an instance of <code>BaseMvpView</code>. However, if it were the case that <code>onAttachView</code> is <em>producing</em> ,i.e. returning, <code>V</code> object then star-projection would work.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 673, "user_id": 6418593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd98848567adccca550f6b6799307b7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Nik", "link": "https://stackoverflow.com/users/6418593/alex-nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 1, "answer_count": 3, "score": 11, "last_activity_date": 1511389608, "creation_date": 1510651076, "last_edit_date": 1510835624, "question_id": 47281812, "link": "https://stackoverflow.com/questions/47281812/generic-types-and-polymorphism", "title": "Generic types and polymorphism", "body": "<p>I have <code>BaseFragment</code>:</p>\n\n<pre><code>    public abstract class BaseFragment extends Fragment implements BaseMvpView {\n\n        private BasePresenter presenter;\n\n        protected void syncLifeCycle(BasePresenter presenter) {\n            this.presenter = presenter;\n            this.presenter.onCreate();\n        }\n\n        @Override\n        public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\n            super.onViewCreated(view, savedInstanceState);\n\n            //noinspection unchecked\n            presenter.onAttachView(this); //it works with a warning\n        }\n\n        @Override\n        public void onResume() {\n            super.onResume();\n            presenter.onResume();\n        }\n\n        @Override\n        public void onPause() {\n            super.onPause();\n            presenter.onPause();\n        }\n\n        @Override\n        public void onDestroyView() {\n            super.onDestroyView();\n            presenter.onDetachView();\n        }\n\n        @Override\n        public void onDestroy() {\n            super.onDestroy();\n            presenter.onDestroy();\n        }\n\n        @Override\n        public void onActivityResult(int requestCode, int resultCode, Intent data) {\n            super.onActivityResult(requestCode, resultCode, data);\n            presenter.onActivityResult(requestCode, resultCode, data);\n    }\n}  \n</code></pre>\n\n<p>and many classes that extends it. For example <code>MainFragment</code>:</p>\n\n<pre><code>    public class MainFragment extends BaseFragment implements MainMvpView {\n\n        MainPresenter&lt;MainMvpView&gt; presenter;\n\n        @Override\n        public void onCreate(@Nullable Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            syncLifeCycle(presenter);\n            //presenter.onCreate();\n        }\n\n        @Override\n        public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\n            super.onViewCreated(view, savedInstanceState);\n            //presenter.onAttachView(this);\n        }\n\n        @Override\n        public void onResume() {\n            super.onResume();\n            //presenter.onResume();\n        }\n\n        @Override\n        public void onPause() {\n            super.onPause();\n            //presenter.onPause();\n        }\n\n        @Override\n        public void onDestroyView() {\n            super.onDestroyView();\n            //presenter.onDetachView();\n        }\n\n        @Override\n        public void onDestroy() {\n            super.onDestroy();\n            //presenter.onDestroy();\n        }\n\n        @Override\n        public void onActivityResult(int requestCode, int resultCode, Intent data) {\n            super.onActivityResult(requestCode, resultCode, data);\n            //presenter.onActivityResult(requestCode, resultCode, data);\n        }\n}   \n</code></pre>\n\n<p>I want to avoid repeating the life cycle synchronization code of each fragment and presenter. Therefore I want to implement this process in the <code>BaseFragment</code>. In Java this line <code>presenter.onAttachView(this);</code> works but with a warning \"Unchecked call <code>onAttachView(V)</code>\"(I can live with this). But <strong>Kotlin</strong> does not allow me to do this at all</p>\n\n<pre><code>abstract class BaseFragmentKotlin : Fragment(), BaseMvpView {\n\n    private var presenter: BasePresenter&lt;*&gt;? = null\n\n    //...\n\n    override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        presenter?.onAttachView(this) //Does not work. \"Out-projected type 'BasePresenter&lt;*&gt;?' prohibits the use of 'public abstract fun onAttachView(mvpView: V!): Unit defined in com.example.test.BasePresenter\"\n    }\n\n//...\n}\n</code></pre>\n\n<p>I really need advice on how to do this correctly.</p>\n\n<p><strong>Edited:</strong></p>\n\n<pre><code>    public class BasePresenterImpl&lt;V extends BaseMvpView&gt; implements BasePresenter&lt;V&gt; {\n\n        @Nullable\n        public V mvpView;\n\n        @Override\n        public void onCreate() {\n\n        }\n\n        @Override\n        public void onAttachView(V mvpView) {\n            this.mvpView = mvpView;\n        }\n\n        @Override\n        public void onResume() {\n\n        }\n\n        @Override\n        public void onPause() {\n\n        }\n\n        @Override\n        public void onDetachView() {\n        mvpView = null;\n        }\n\n        @Override\n        public void onDestroy() {\n\n        }\n\n        @Override\n        public void onActivityResult(int requestCode, int resultCode, Intent data) {\n\n        }\n}\n</code></pre>\n\n<p>Here is the whole test code <a href=\"https://github.com/AlexNikolaTest/Test/tree/master/app/src/main/java/com/example/mytest\" rel=\"noreferrer\">https://github.com/AlexNikolaTest/Test/tree/master/app/src/main/java/com/example/mytest</a></p>\n"}, {"tags": ["android", "delegates", "kotlin", "android-room"], "answers": [{"tags": [], "owner": {"reputation": 716, "user_id": 7656172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EGszH.jpg?s=128&g=1", "display_name": "Micha\u0142 Baran", "link": "https://stackoverflow.com/users/7656172/micha%c5%82-baran"}, "is_accepted": true, "score": 2, "last_activity_date": 1524781216, "creation_date": 1524781216, "answer_id": 50052640, "question_id": 47281640, "link": "https://stackoverflow.com/questions/47281640/kotlin-delegates-with-room-persistence-lib/50052640#50052640", "title": "Kotlin delegates with Room persistence lib", "body": "<p>Unfortunatelly, no - <a href=\"https://developer.android.com/training/data-storage/room/defining-data\" rel=\"nofollow noreferrer\">Room</a> by default creates a column for each field that's defined in the entity and when we use <code>delegate</code> we get generated code like this:</p>\n\n<pre><code>   @PrimaryKey(autoGenerate = true)\n   @NotNull\n   private final Identifier id$delegate = new Identifier();\n\n   public final long getId() {\n      return this.id$delegate.getValue(this, $$delegatedProperties[0]);\n   }\n\n   public final void setId(long var1) {\n      this.id$delegate.setValue(this, $$delegatedProperties[0], var1);\n   }\n</code></pre>\n\n<p>and that's why Room tries to create column for <code>Identifier id$delegate</code>.  </p>\n\n<p>However, if you just want to ensure <code>id</code> is not changed after object initialization you don't need delegate at all, simply mark variable as <code>final</code> and place it in constructor eg:</p>\n\n<pre><code>@Entity\ndata class Sample(\n    @PrimaryKey(autoGenerate = true)\n    val id: Long\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2825, "user_id": 1898527, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/qCDPj.png?s=128&g=1", "display_name": "narko", "link": "https://stackoverflow.com/users/1898527/narko"}, "is_accepted": false, "score": 0, "last_activity_date": 1564065115, "creation_date": 1564065115, "answer_id": 57204440, "question_id": 47281640, "link": "https://stackoverflow.com/questions/47281640/kotlin-delegates-with-room-persistence-lib/57204440#57204440", "title": "Kotlin delegates with Room persistence lib", "body": "<p>I had a similar issue with the following code:</p>\n\n<pre><code>data class ForecastItem(\nval city: String,\nval time: Long,\nval temp: Int,\nval tempMax: Int,\nval tempMin: Int,\nval icon: String\n) {\n    val formattedTime: String by lazy {\n        val date = Date(this.time * 1000L)\n        val dateFormat = SimpleDateFormat(\"E HH:mm\")\n        dateFormat.timeZone = TimeZone.getTimeZone(\"GMT+1\")\n        dateFormat.format(date)\n  }\n}\n</code></pre>\n\n<p>In this case, I got the same error you got because of the delegation with formattedTime:</p>\n\n<blockquote>\n  <p>Cannot figure out how to save this field into database. You can consider adding a type converter for it.</p>\n</blockquote>\n\n<p>In my case, I ended up replacing the delegate by a function. It is not the same, but it worked for me. I am not sure if this is actually the best way of designing the solution, but I hope it helps anyone with a similar problem.</p>\n\n<pre><code>fun getFormattedTime(): String {\n    val date = Date(this.time * 1000L)\n    val dateFormat = SimpleDateFormat(\"E HH:mm\")\n    dateFormat.timeZone = TimeZone.getTimeZone(\"GMT+1\")\n    return dateFormat.format(date)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 516, "user_id": 2340813, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/EbSuk.png?s=128&g=1", "display_name": "MikeOscarEcho", "link": "https://stackoverflow.com/users/2340813/mikeoscarecho"}, "edited": false, "score": 0, "creation_date": 1570046484, "post_id": 57762552, "comment_id": 102795102, "body": "Thanks, that worked. How did you figure out that you needed to use @delegate:Ignore instead of @Ignore?"}], "tags": [], "owner": {"reputation": 16930, "user_id": 1032613, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/h4jzP.jpg?s=128&g=1", "display_name": "user1032613", "link": "https://stackoverflow.com/users/1032613/user1032613"}, "is_accepted": false, "score": 17, "last_activity_date": 1586889394, "last_edit_date": 1586889394, "creation_date": 1567457275, "answer_id": 57762552, "question_id": 47281640, "link": "https://stackoverflow.com/questions/47281640/kotlin-delegates-with-room-persistence-lib/57762552#57762552", "title": "Kotlin delegates with Room persistence lib", "body": "<p><strong>Use <code>@delegate:Ignore</code>.</strong></p>\n\n<p>I had similar problem with my Entity Object and <code>... by lazy</code> properties.</p>\n\n<p>For example:</p>\n\n<pre><code>var name: String = \"Alice\"\n\nval greeting: String by lazy { \"Hi $name\" }\n</code></pre>\n\n<p>The issue here is Room \"cannot figure out how to save this field into database\". I tried to add \"@Ignore\" but got a lint message saying \"This annotation is not applicable to target 'member property with delegate'.\"</p>\n\n<p>Turns out, the correct annotation in this case is <code>@delegate:Ignore</code>.</p>\n\n<p><strong>Solution:</strong></p>\n\n<pre><code>var name: String = \"Alice\"\n\n@delegate:Ignore\nval greeting: String by lazy { \"Hi $name\" }\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 5609492, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02b2b4807a12c68276c1e2fcbb5abb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Schiller", "link": "https://stackoverflow.com/users/5609492/simon-schiller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "accepted_answer_id": 50052640, "answer_count": 3, "score": 5, "last_activity_date": 1586889394, "creation_date": 1510650594, "question_id": 47281640, "link": "https://stackoverflow.com/questions/47281640/kotlin-delegates-with-room-persistence-lib", "title": "Kotlin delegates with Room persistence lib", "body": "<p>I am currently developing a new android app using Kotlin. I tried implementing Room for data storage, but I didn't get it to work with Kotlin delegates.</p>\n\n<p>I created an <code>Identifier</code> delegate in order to ensure the id is not changed after initialization. The delegate looks like this:</p>\n\n<pre><code>class Identifier: ReadWriteProperty&lt;Any?, Long&gt; {\n\n    private var currentValue = -1L\n\n    override fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): Long {\n        if (currentValue == -1L) throw IllegalStateException(\"${property.name} is not initialized.\")\n        return currentValue\n    }\n\n    override fun setValue(thisRef: Any?, property KProperty&lt;*&gt;, value: Long) {\n        if (currentValue != -1L) throw IllegalStateException(\"${property.name} can not be changed.\")\n        currentValue = value\n    }\n}\n</code></pre>\n\n<p>My entity class looks like this:</p>\n\n<pre><code>@Entity\nclass Sample {\n\n    @delegate:PrimaryKey(autoGenerate = true)\n    var id by Identifier()\n}\n</code></pre>\n\n<p>When I try to start the app, kapt gives me the following error message:</p>\n\n<pre><code>Cannot figure out how to save this field into database. You can consider adding a type converter for it.\nprivate final com.myapp.persistence.delegates.Identifier id$delegate = null;\n</code></pre>\n\n<p>Can I somehow get this to work without writing a <code>TypeConverter</code> for every delegate?</p>\n"}, {"tags": ["android", "sqlite", "kotlin", "android-sqlite", "anko"], "comments": [{"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1510640089, "post_id": 47278729, "comment_id": 81508260, "body": "I&#39;ve never used the sqlite library of anko, but <i>&quot;standard&quot;</i> sqlite (I believe android did not use the linux library) will default the value of every <code>INTEGER PRIMARY KEY AUTOINCREMENT</code> to it&#39;s internal <code>rowid</code>, which is a unique and usually incrementing number for every row in the table"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1510646328, "post_id": 47278729, "comment_id": 81511224, "body": "Thanks! Do I need  to delete  <code>this._id = _id</code>   in the code  <code>constructor(_id: Long, name: String, createdDate: Long, description: String)             : this(HashMap()) {</code>"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531310840, "creation_date": 1510639516, "last_edit_date": 1531310840, "question_id": 47278729, "link": "https://stackoverflow.com/questions/47278729/how-to-design-a-sqlite-table-using-anko-in-kotin", "title": "How to design a SQLite table using Anko in Kotin?", "body": "<p>I design a very simple table using Anko in Kotlin, there is a primary key named _id in the table and I hope the _id is passed value automatically by SQLite system.\nI have read some sample code,but I don't know which one is correct, Method 1, Method 2 or Method 3?</p>\n\n<p>And more, when I insert a record, I don't think I need to pass a value to _id, but the _id property of MSetting and DBSetting must be passed value, so I have to initial it with <code>MSetting(10L,\"My Settings\",2000L,\"This is description!\")</code>\nI don't know how Anko handle the needless _id, and I'm very strange that the app don't crash when I execute <code>SettingManage().addSetting(MSetting(10L,\"My Settings\",2000L,\"This is description!\"))</code> repeatedly !</p>\n\n<p><strong>Method 1:</strong> <code>DBSettingTable._ID to INTEGER + PRIMARY_KEY+ UNIQUE,</code></p>\n\n<p><strong>Method 2:</strong> <code>DBSettingTable._ID to INTEGER + PRIMARY_KEY+ AUTOINCREMENT,</code></p>\n\n<p><strong>Method 3:</strong> <code>DBSettingTable._ID to INTEGER + PRIMARY_KEY,</code></p>\n\n<p><strong>Insert Data</strong></p>\n\n<pre><code>SettingManage().addSetting(MSetting(10L,\"My Settings\",2000L,\"This is description!\"))\n</code></pre>\n\n<p><strong>Design Table</strong></p>\n\n<pre><code>class DBSettingHelper(mContext: Context = UIApp.instance) : ManagedSQLiteOpenHelper(\n        mContext,\n        DB_NAME,\n        null,\n        DB_VERSION) {\n\n    companion object {\n        val DB_NAME = \"setting.db\"\n        val DB_VERSION = 5\n        val instance by lazy { DBSettingHelper() }\n    }\n\n    override fun onCreate(db: SQLiteDatabase) {\n        db.createTable( DBSettingTable.TableNAME , true,\n                DBSettingTable._ID to INTEGER + PRIMARY_KEY,\n                DBSettingTable.Name to TEXT,\n                DBSettingTable.CreatedDate to INTEGER,\n                DBSettingTable.Description to TEXT\n        )\n    }\n\n    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {\n        db.dropTable(DBSettingTable.TableNAME, true)\n        onCreate(db)\n    }\n\n}\n\n\n\nclass DBSetting(val mMutableMap: MutableMap&lt;String, Any?&gt;) {\n    var _id: Long by mMutableMap\n    var name: String by mMutableMap\n    var createdDate: Long by mMutableMap\n    var description: String by mMutableMap\n\n    constructor(_id: Long, name: String, createdDate: Long, description: String)\n            : this(HashMap()) {\n        this._id = _id\n        this.name = name\n        this.createdDate = createdDate\n        this.description=description\n    }\n}\n\n\nobject DBSettingTable {\n    val TableNAME = \"SettingTable\"\n\n    val _ID = \"_id\"\n    val Name = \"name\"\n    val CreatedDate = \"createdDate\"\n    val Description=\"description\"\n}\n</code></pre>\n\n<p><strong>Business Logic</strong></p>\n\n<pre><code>class SettingManage {\n    fun addSetting(mMSetting:MSetting){\n        DBSettingManage().addDBSetting(DbDataMapper().convertMSetting_To_DBSetting(mMSetting))\n    }\n}\n\nclass DBSettingManage(private val mDBSettingHelper: DBSettingHelper =DBSettingHelper.instance) {\n    fun addDBSetting(mDBSetting: DBSetting)=mDBSettingHelper.use{\n        insert(DBSettingTable.TableNAME,*mDBSetting.mMutableMap.toVarargArray())\n    }\n}\n\nclass DbDataMapper {\n    fun convertMSetting_To_DBSetting(mMSetting: MSetting) =with(mMSetting){\n        DBSetting(_id,name,createdDate,description)\n    }\n    fun convertDBSetting_To_MSetting(mDBSetting: DBSetting)=with(mDBSetting){\n        MSetting(_id,name,createdDate,description )\n    }\n}\n\n\nfun &lt;T : Any&gt; SelectQueryBuilder.parseList(parser: (Map&lt;String, Any?&gt;) -&gt; T): List&lt;T&gt; =\n        parseList(object : MapRowParser&lt;T&gt; {\n            override fun parseRow(columns: Map&lt;String, Any?&gt;): T = parser(columns)\n        })\n</code></pre>\n"}, {"tags": ["kotlin", "spark-java"], "comments": [{"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "edited": false, "score": 0, "creation_date": 1510631298, "post_id": 47277296, "comment_id": 81505654, "body": "What&#39;s the definition of <code>before</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 1, "creation_date": 1510646685, "post_id": 47278458, "comment_id": 81511394, "body": "Always use the second example when the last parameter of the function is a lambda type."}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1510647278, "post_id": 47278458, "comment_id": 81511678, "body": "@marstran Why? Afaik these are just syntax differences, each resulting in the same bytecode, so it&#39;s up to the developer&#39;s preference"}], "tags": [], "owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "is_accepted": true, "score": 3, "last_activity_date": 1510639822, "last_edit_date": 1510639822, "creation_date": 1510638178, "answer_id": 47278458, "question_id": 47277296, "link": "https://stackoverflow.com/questions/47277296/before-in-kotlin/47278458#47278458", "title": "before in Kotlin", "body": "<p>You can use the path <code>*</code> in Spark to match all paths, like this:</p>\n\n<pre><code>before(\"*\", { req, res -&gt;\n    logger.info(\"${req.requestMethod().toUpperCase()} ${req.fullUri()} by ${req.ip()} (${req.userAgent()})\")\n})\n\n// or:\n\nbefore(\"*\") { req, res -&gt; // ...\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 8933139, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208966591144357/picture?type=large", "display_name": "LPal", "link": "https://stackoverflow.com/users/8933139/lpal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 47278458, "answer_count": 1, "score": 1, "last_activity_date": 1510645697, "creation_date": 1510631069, "last_edit_date": 1510645697, "question_id": 47277296, "link": "https://stackoverflow.com/questions/47277296/before-in-kotlin", "title": "before in Kotlin", "body": "<p>I'm trying to set a before filter without a path to apply to all requests.  In kotlin I'm trying to write:</p>\n\n<pre><code>before { req, resp -&gt; \n    // check auth then redirect if not authorized... \n}\n</code></pre>\n\n<p>The compiler says: </p>\n\n<blockquote>\n  <p>Cannot infer type for this parameter (req &amp; resp).</p>\n</blockquote>\n\n<p>How should I set a before filter in Kotlin without a route? </p>\n"}, {"tags": ["lambda", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 10605, "user_id": 1949554, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d43d63dddaff1f4e278a9cdfdcf3b817?s=128&d=identicon&r=PG&f=1", "display_name": "FRR", "link": "https://stackoverflow.com/users/1949554/frr"}, "edited": false, "score": 0, "creation_date": 1510670056, "post_id": 47278646, "comment_id": 81526902, "body": "Thanks for such a clear explanation. I control the code and I expect to fixAUd to always be a lambda expression (or, in the worst case, null)"}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "reply_to_user": {"reputation": 10605, "user_id": 1949554, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d43d63dddaff1f4e278a9cdfdcf3b817?s=128&d=identicon&r=PG&f=1", "display_name": "FRR", "link": "https://stackoverflow.com/users/1949554/frr"}, "edited": false, "score": 0, "creation_date": 1510683735, "post_id": 47278646, "comment_id": 81536019, "body": "@feresr But if it&#39;s always a lambda or null, why do you need the cast after all?"}, {"owner": {"reputation": 10605, "user_id": 1949554, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d43d63dddaff1f4e278a9cdfdcf3b817?s=128&d=identicon&r=PG&f=1", "display_name": "FRR", "link": "https://stackoverflow.com/users/1949554/frr"}, "edited": false, "score": 0, "creation_date": 1510684910, "post_id": 47278646, "comment_id": 81536774, "body": "To be able to invoke it, I&#39;m implementing an interface and the parameter fixAUd is of type Any?, can&#39;t change that. All I can do is to make sure to always pass a lambda as a parameter."}], "tags": [], "owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "is_accepted": true, "score": 1, "last_activity_date": 1510639082, "creation_date": 1510639082, "answer_id": 47278646, "question_id": 47277179, "link": "https://stackoverflow.com/questions/47277179/unchecked-cast-when-casting-an-object-of-type-any-into-a-lambda-in-kotlin/47278646#47278646", "title": "Unchecked cast when casting an object of type Any? into a lambda in kotlin", "body": "<p>The JVM provides you only with the raw type at runtime, e.g. <code>java.lang.List</code> instead of <code>java.lang.List&lt;String&gt;</code>. This also applies to kotlin lambdas: When you write <code>(Any?) -&gt; Unit</code> in kotlin, it gets translated to the JVM type <code>kotlin.jvm.functions.Function1&lt;java.lang.Object, kotlin.Unit&gt;</code>.</p>\n\n<p>Now, you have an object of type <code>Any?</code>. You can write <code>Any? as? Function1&lt;*, *&gt;</code> without any problems. You can also use <code>as</code> instead of <code>as?</code>, but risk a <code>ClassCastException</code> to be thrown.</p>\n\n<p>But now comes the problem: The type <code>(Any?) -&gt; Unit</code> and <code>(Int) -&gt; String</code> are different types at compile time, but only because of their generic type arguments. At runtime, both are instances of <code>Function1</code>, which is why the compiler will issue a warning when you cast it to anything with generic arguments other than <code>*</code>.</p>\n\n<blockquote>\n  <p>Is it safe to ignore the warning?</p>\n</blockquote>\n\n<p>If you know what you are doing - Yes, it's just the limitation of the Java language. If you can rely on the type being what you expect it there is no error, however you will not get any exception if the generic arguments are different than what you expect.</p>\n\n<p>If you don't know what you are doing, e.g. getting the parameter from code that you can't control - take this warning serious.</p>\n"}], "owner": {"reputation": 10605, "user_id": 1949554, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d43d63dddaff1f4e278a9cdfdcf3b817?s=128&d=identicon&r=PG&f=1", "display_name": "FRR", "link": "https://stackoverflow.com/users/1949554/frr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2303, "favorite_count": 0, "accepted_answer_id": 47278646, "answer_count": 1, "score": 2, "last_activity_date": 1510639082, "creation_date": 1510630217, "question_id": 47277179, "link": "https://stackoverflow.com/questions/47277179/unchecked-cast-when-casting-an-object-of-type-any-into-a-lambda-in-kotlin", "title": "Unchecked cast when casting an object of type Any? into a lambda in kotlin", "body": "<p>My code works as intended but I am curious on why the following warning exists:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tc9jk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tc9jk.png\" alt=\"cast Any! to lambda\"></a></p>\n\n<p>Is it safe to ignore the warning?\nI know that Kotlin can't check erased types at runtime, but isn't Any the most generic (toplevel) object in Kotlin. </p>\n\n<p>What am I'm looking for is a way to check if an object is of type \"lambda\".\nBtw: Any? -> Any? does not get rid of the problem either.</p>\n"}, {"tags": ["enums", "kotlin"], "comments": [{"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1510645908, "post_id": 47276773, "comment_id": 81510991, "body": "I removed the misleading tag &quot;with-statement&quot;. In kotlin it is not a statement but a higher order function."}, {"owner": {"reputation": 645, "user_id": 8729476, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99fdf036168c3783ab6223843a6b9ceb?s=128&d=identicon&r=PG&f=1", "display_name": "sirksel", "link": "https://stackoverflow.com/users/8729476/sirksel"}, "reply_to_user": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1510689946, "post_id": 47276773, "comment_id": 81539546, "body": "It might have helped people find this question who (like me) were under the mistaken impression that Kotlin <i>has</i> a <code>with</code> statement, especially because search engines often de-prioritize prepositions like &quot;with&quot;.  Fine with the edit though."}], "answers": [{"comments": [{"owner": {"reputation": 645, "user_id": 8729476, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99fdf036168c3783ab6223843a6b9ceb?s=128&d=identicon&r=PG&f=1", "display_name": "sirksel", "link": "https://stackoverflow.com/users/8729476/sirksel"}, "edited": false, "score": 0, "creation_date": 1510644446, "post_id": 47277350, "comment_id": 81510218, "body": "Thanks -- with the mention of the companion class (reminiscent but not he same as Java static members), I figured it would work because the constants were members.  Is IGNORE_CASE within an enum more like a nested class than a property?  I&#39;m guessing then you&#39;re saying it&#39;s not possible to do what I&#39;m trying to do, because there&#39;s no language construct that would even allow me to write it?"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 645, "user_id": 8729476, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99fdf036168c3783ab6223843a6b9ceb?s=128&d=identicon&r=PG&f=1", "display_name": "sirksel", "link": "https://stackoverflow.com/users/8729476/sirksel"}, "edited": false, "score": 1, "creation_date": 1510646165, "post_id": 47277350, "comment_id": 81511127, "body": "@sirksel I think you&#39;re looking for the <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow noreferrer\"><code>when</code> expression</a> or you could just use the map and its <code>get</code> operator..."}, {"owner": {"reputation": 645, "user_id": 8729476, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99fdf036168c3783ab6223843a6b9ceb?s=128&d=identicon&r=PG&f=1", "display_name": "sirksel", "link": "https://stackoverflow.com/users/8729476/sirksel"}, "edited": false, "score": 0, "creation_date": 1511035091, "post_id": 47277350, "comment_id": 81693352, "body": "While this is helpful, I&#39;m still looking for a <b>general solution</b> , and not necessarily just for this mapping application.  Maybe <code>when</code> is the answer, but I&#39;m not really interested in switching functionality, just name shortening for a block.  If you&#39;re envisioning a way I could use <code>when</code> for that, could you propose a separate answer with a quick code example?  See the <b>edit</b> portion of my question above."}], "tags": [], "owner": {"reputation": 1427, "user_id": 4381423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5qHX.jpg?s=128&g=1", "display_name": "Mark Mucha", "link": "https://stackoverflow.com/users/4381423/mark-mucha"}, "is_accepted": false, "score": 4, "last_activity_date": 1510631528, "creation_date": 1510631528, "answer_id": 47277350, "question_id": 47276773, "link": "https://stackoverflow.com/questions/47276773/enums-and-with-in-kotlin/47277350#47277350", "title": "Enums and With in Kotlin", "body": "<p>The one-liner implementation of <code>with</code> is:</p>\n\n<pre><code>public inline fun &lt;T, R&gt; with(receiver: T, block: T.() -&gt; R): R = receiver.block()\n</code></pre>\n\n<p>The <code>T.()</code> is a <strong>function literal with a receiver</strong>, and the receiver is an object. You're passing a class.</p>\n\n<p>The documentation for Kotlin <strong>function literals with receiver</strong> can be found <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 645, "user_id": 8729476, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99fdf036168c3783ab6223843a6b9ceb?s=128&d=identicon&r=PG&f=1", "display_name": "sirksel", "link": "https://stackoverflow.com/users/8729476/sirksel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1511034829, "creation_date": 1510626866, "last_edit_date": 1511034829, "question_id": 47276773, "link": "https://stackoverflow.com/questions/47276773/enums-and-with-in-kotlin", "title": "Enums and With in Kotlin", "body": "<p>Either my syntax is wrong, or you can't use <code>with</code> to apply to <code>enum</code> constants.  IntelliJ says it's because <code>RegexOption</code> doesn't have a companion object, and that <code>RegexOption needs to be initialized here</code>.  I didn't think you could instantiate an enum.</p>\n\n<pre><code>// this works:\nval RX_OPTIONS = mapOf(\n  'c' to RegexOption.COMMENTS,\n  'd' to RegexOption.DOT_MATCHES_ALL,\n  'e' to RegexOption.CANON_EQ,\n  'i' to RegexOption.IGNORE_CASE,\n  'l' to RegexOption.LITERAL,\n  'm' to RegexOption.MULTILINE,\n  'u' to RegexOption.UNIX_LINES\n)\n\n// this doesn't work:\nval RX_OPTIONS2 = with(RegexOption) { mapOf(\n  'c' to COMMENTS,\n  'd' to DOT_MATCHES_ALL,\n  'e' to CANON_EQ,\n  'i' to IGNORE_CASE,\n  'l' to LITERAL,\n  'm' to MULTILINE,\n  'u' to UNIX_LINES\n) }\n</code></pre>\n\n<p>Why doesn't the second example work?  If they're not in the companion object, it doesn't seem like they'd be in an instance.  Does <code>with</code> have a counterpart that could work in this situation?  If not, is it easy to write one (since <code>with</code> is just a <a href=\"https://github.com/JetBrains/kotlin/blob/1.1.3/libraries/stdlib/src/kotlin/util/Standard.kt#L43\" rel=\"nofollow noreferrer\">one-liner</a>)?</p>\n\n<p><strong><em>EDIT (Refining the question):</em></strong></p>\n\n<p>In a block (not necessarily even this one) where I'm typing 20 references to the same long enum names like <strong><code>Class.Inner.VeryInner.YouGetTheIdea.SOMEOPTION</code></strong> is it possible to factor out all but the <code>SOMEOPTION</code> name using a with-statement-like construct <em>just</em> for a block -- even one that I must write myself as a higher order function?  I've considered <code>typealias</code>, but I really want this to apply only to the block.  <strong>The answer below tells me the <code>with</code> higher-order function doesn't work for this, but is there a way to do it?</strong>  </p>\n"}, {"tags": ["algorithm", "graph", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "is_accepted": false, "score": 2, "last_activity_date": 1510628003, "creation_date": 1510628003, "answer_id": 47276915, "question_id": 47276544, "link": "https://stackoverflow.com/questions/47276544/why-is-this-way-of-randomly-generating-a-graph-unfair/47276915#47276915", "title": "Why is this way of randomly generating a graph unfair?", "body": "<blockquote>\n  <p>What am I missing? And, is there a way to make this fair?</p>\n</blockquote>\n\n<p>What you are missing is that <strong>your algrothim</strong> is unfair.</p>\n\n<p>First, you need to know that software random number generator is not real random. It always make it seems to be fair, unlike real random.</p>\n\n<p>Then, consider the following</p>\n\n<pre><code>java.util.Collections.shuffle(pot)\n</code></pre>\n\n<p>give you 3 outcomes.</p>\n\n<pre><code>1, 2, 3\n1, 3, 2\n2, 1, 3\n2, 3, 1\n3, 1, 2\n3, 2, 1\n</code></pre>\n\n<p>If you remove your do-while condition and if condition, all of the outcome has similar count. </p>\n\n<p>However, you do-while condition prevents position = value. The possible outcomes are</p>\n\n<pre><code>2, 1, 3\n2, 3, 1\n3, 1, 2\n</code></pre>\n\n<p>Note that the distribution of the outcomes are <strong>NOT</strong> even. Consider the following:</p>\n\n<pre><code>When vertex == 1:\n    case pot[0] == 1:\n        reroll\n    case pot[0] == 2:\n        continue // 50%\n    case pot[0] == 3:\n        continue // 50%\n\nIf the result[0] == 2:\n    When vertex == 2:\n        case pot[0] == 1:\n            continue // 25%\n        case pot[0] == 3:\n            continue // 25%\n\nIf the result[0] == 3:\n    When vertex == 2:\n        case pot[0] == 1:\n            continue // 50%\n        case pot[0] == 2:\n            reroll\n\nResult:\n    2, 1, 3 (25%)\n    2, 3, 1 (25%)\n    3, 1, 2 (50%)\n</code></pre>\n\n<p>Then, the if-condition <strong>DISCARD</strong> <code>2, 1, 3</code> (Not rerolling which is different from while loop. It started from scratch again. The remaining outcomes are</p>\n\n<pre><code>    2, 3, 1 (25%)\n    3, 1, 2 (50%)\n</code></pre>\n\n<p><code>(3, 1, 2):(2, 3, 1)</code> is about 2:1 which matches your result.</p>\n\n<p><strong>Solution</strong></p>\n\n<pre><code>fun generateGraph(n: Int): Map&lt;Int, Int&gt; {\n    val vertices : List&lt;Int&gt; = (1..n).toList()\n    loop@ while (true) {\n        val pot = vertices.toMutableList()\n        val result = mutableMapOf&lt;Int, Int&gt;()\n        // No need to shuffle evey position\n        java.util.Collections.shuffle(pot)\n        for (vertex in 1..n) {\n            val value = pot[vertex-1]\n            // if position == value, always start from scratch\n            if (value == vertex)\n                continue@loop\n            result.put(vertex, value)\n        }\n        return result\n    }\n}\n</code></pre>\n\n<p>Also, you should improve you math on probability and statistics before you doubt the number distribution of a random number generator.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 8577405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5caba4c5c881e0cbe60d79847fb7058f?s=128&d=identicon&r=PG&f=1", "display_name": "Reveloper", "link": "https://stackoverflow.com/users/8577405/reveloper"}, "edited": false, "score": 0, "creation_date": 1510629341, "post_id": 47277006, "comment_id": 81505154, "body": "This is really cool.  It means that many &quot;pick a name out of a hat&quot; type games are unfair if you are naive about how you do it.  Imagine being at a  party, who would think to reset the whole hat if anyone ever pulls their own name?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 51, "user_id": 8577405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5caba4c5c881e0cbe60d79847fb7058f?s=128&d=identicon&r=PG&f=1", "display_name": "Reveloper", "link": "https://stackoverflow.com/users/8577405/reveloper"}, "edited": false, "score": 1, "creation_date": 1510629735, "post_id": 47277006, "comment_id": 81505253, "body": "@reveloper: what you are looking for is called a &quot;derangement&quot; --a permutation where no element matches itself-- and it is well-known that approximately 1/e of all permutations are derangements. I added a link which might be useful."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 5, "last_activity_date": 1510629471, "last_edit_date": 1510629471, "creation_date": 1510628708, "answer_id": 47277006, "question_id": 47276544, "link": "https://stackoverflow.com/questions/47276544/why-is-this-way-of-randomly-generating-a-graph-unfair/47277006#47277006", "title": "Why is this way of randomly generating a graph unfair?", "body": "<p>It's not difficult to see why that result occurs. Vertex 1 is matched with vertex 3 half the time. If that happens, the graph cannot be rejected because rejection only happens when the last remaining vertex is <code>n</code> (3 in this case) and that vertex has been used. So half the time you will get {(1,3), (2,1), (3,2)}.</p>\n\n<p>The other half of the time, vertex 1 will be matched with vertex 2, but then half of those cases (i.e \u00bc of the total) will be rejected after vertex 2 is matched with vertex 1. So {(1,2), (2,3), (3,1)} will be chosen a quarter of the time.</p>\n\n<p>In the remaining quarter, the whole procedure will be repeated, which means that {(1,3), (2,1), (3,2)} will continue to be chosen twice as often.</p>\n\n<p>One solution is to reject the entire graph as soon as you match a vertex with itself. In this case, there is no need to reshuffle before selecting; you only reshuffle if the graph is rejected. </p>\n\n<p>The general problem is that the case of matching a vertex with itself is not independent of all the other choices. So just reshuffling after certain matches and rejecting after other ones leads to a bias.</p>\n\n<p>Rejecting and restarting after any match might not be the most efficient solution, but it will work. One way to make the algorithm more efficient would be to shuffle incrementally, rather than doing the entire shuffle and then validating it. Another possibility is described in a paper referenced from <a href=\"https://math.stackexchange.com/questions/302057/generating-a-random-derangement\">this question on Mathematics Stack Exchange</a></p>\n"}], "owner": {"reputation": 51, "user_id": 8577405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5caba4c5c881e0cbe60d79847fb7058f?s=128&d=identicon&r=PG&f=1", "display_name": "Reveloper", "link": "https://stackoverflow.com/users/8577405/reveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "accepted_answer_id": 47277006, "answer_count": 2, "score": 2, "last_activity_date": 1510629471, "creation_date": 1510625166, "last_edit_date": 1510625562, "question_id": 47276544, "link": "https://stackoverflow.com/questions/47276544/why-is-this-way-of-randomly-generating-a-graph-unfair", "title": "Why is this way of randomly generating a graph unfair?", "body": "<p>My aim is to generate a directed graph of n vertices such that each vertex has an edge going out and an edge coming in.  I thought one way of doing this would be to put all the vertices in a pot and for the vertices to take turns shuffling it and pulling out entries -- so for example if vertex 1 pulls out vertex 3 then that means there will be an edge going from 1 to 3.  If a vertex pulls itself out of the pot, it just puts it back and reshuffles.  If at the end, the last vertex finds that the pot only contains itself, then we need to start over.  Here's my Kotlin code:</p>\n\n<pre><code>fun generateGraph(n: Int): Map&lt;Int, Int&gt; {\n    val vertices : List&lt;Int&gt; = (1..n).toList()\n    while (true) {\n        val pot = vertices.toMutableList()\n        val result = mutableMapOf&lt;Int, Int&gt;()\n        for (vertex in 1 until n) {\n            do {\n                java.util.Collections.shuffle(pot)\n            } while (pot[0] == vertex)\n            result.put(vertex, pot.removeAt(0))\n        }\n        if (pot[0] != n) {\n            result.put(n, pot.removeAt(0))\n            return result\n        }\n        else {\n            // The last vertex left in the pot is also the last one unassigned.  Try again...\n        }\n    }\n}\n</code></pre>\n\n<p>It seems to work.  However when testing I'm finding it comes out with some graphs more than others.  When n is 3 the only valid graphs are the cycles </p>\n\n<pre><code>{1=3, 2=1, 3=2}\n{1=2, 2=3, 3=1}\n</code></pre>\n\n<p>but I'm finding the first comes up twice as many times as the second:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {    \n    val n = 3\n    val patternCounts = mutableMapOf&lt;Map&lt;Int, Int&gt;, Int&gt;()\n    val trials = 10000\n    (1..trials).forEach({\n        val graph = generateGraph(n)\n        patternCounts[graph] = patternCounts.getOrDefault(graph, 0) + 1\n    })\n    println(patternCounts)\n}\n</code></pre>\n\n<p>A run of this just now printed</p>\n\n<pre><code>{{1=3, 2=1, 3=2}=6669, {1=2, 2=3, 3=1}=3331}\n</code></pre>\n\n<p>What am I missing?  And, is there a way to make this fair?</p>\n"}, {"tags": ["android", "kotlin", "dagger"], "comments": [{"owner": {"reputation": 421, "user_id": 5944246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-DO0YixdfiKk/AAAAAAAAAAI/AAAAAAAAABE/_wg2PUZWkuE/photo.jpg?sz=128", "display_name": "kiLLua", "link": "https://stackoverflow.com/users/5944246/killua"}, "edited": false, "score": 0, "creation_date": 1510618722, "post_id": 47275419, "comment_id": 81502526, "body": "have you double clicked the error? did it pointed you out on the line containing the error?"}, {"owner": {"reputation": 70, "user_id": 4595131, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-rG9POeYdtkY/AAAAAAAAAAI/AAAAAAAAAJc/4vr3on_Mgmc/photo.jpg?sz=128", "display_name": "Sneyder Angulo", "link": "https://stackoverflow.com/users/4595131/sneyder-angulo"}, "reply_to_user": {"reputation": 421, "user_id": 5944246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-DO0YixdfiKk/AAAAAAAAAAI/AAAAAAAAABE/_wg2PUZWkuE/photo.jpg?sz=128", "display_name": "kiLLua", "link": "https://stackoverflow.com/users/5944246/killua"}, "edited": false, "score": 0, "creation_date": 1510619041, "post_id": 47275419, "comment_id": 81502620, "body": "yes I double clicked the error but it did not show anything else"}, {"owner": {"reputation": 2143, "user_id": 2949834, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/LikXg.png?s=128&g=1", "display_name": "kimkevin", "link": "https://stackoverflow.com/users/2949834/kimkevin"}, "edited": false, "score": 0, "creation_date": 1510628148, "post_id": 47275419, "comment_id": 81504882, "body": "Does it work without screenSize?"}, {"owner": {"reputation": 1614, "user_id": 3609514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/92C38.jpg?s=128&g=1", "display_name": "TheTechWolf", "link": "https://stackoverflow.com/users/3609514/thetechwolf"}, "edited": false, "score": 0, "creation_date": 1510666220, "post_id": 47275419, "comment_id": 81524129, "body": "The probable cause of this error is that in one of your layout files you are using this <b>screenSize</b> value without annotating it with <b>&quot;@dimen/screenSize&quot;</b> or simply you don&#39;t have screenSize value in your dimen.xml file."}, {"owner": {"reputation": 452, "user_id": 5119341, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c2jABYz9ou4/AAAAAAAAAAI/AAAAAAAAAAA/irNaqKjkQDs/photo.jpg?sz=128", "display_name": "Bernardo Rocha", "link": "https://stackoverflow.com/users/5119341/bernardo-rocha"}, "edited": false, "score": 0, "creation_date": 1510675849, "post_id": 47275419, "comment_id": 81531202, "body": "Are you targeting an API greater than 13? Because screenSize is only available after API 13."}, {"owner": {"reputation": 70, "user_id": 4595131, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-rG9POeYdtkY/AAAAAAAAAAI/AAAAAAAAAJc/4vr3on_Mgmc/photo.jpg?sz=128", "display_name": "Sneyder Angulo", "link": "https://stackoverflow.com/users/4595131/sneyder-angulo"}, "edited": false, "score": 0, "creation_date": 1510771943, "post_id": 47275419, "comment_id": 81581050, "body": "I don&#39;t use screenSize at all anywhere and I&#39;m targeting api 14 or later"}, {"owner": {"reputation": 1532, "user_id": 6248208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lUNxv.jpg?s=128&g=1", "display_name": "Carlos Daniel", "link": "https://stackoverflow.com/users/6248208/carlos-daniel"}, "edited": false, "score": 0, "creation_date": 1510778751, "post_id": 47275419, "comment_id": 81584790, "body": "It seems that your error is not from kotlin neither dagger2. Maybe it&#39;s a misspelling in a resources file, isn&#39;t it?"}, {"owner": {"reputation": 70, "user_id": 4595131, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-rG9POeYdtkY/AAAAAAAAAAI/AAAAAAAAAJc/4vr3on_Mgmc/photo.jpg?sz=128", "display_name": "Sneyder Angulo", "link": "https://stackoverflow.com/users/4595131/sneyder-angulo"}, "edited": false, "score": 0, "creation_date": 1510800057, "post_id": 47275419, "comment_id": 81592413, "body": "not really, I guess it is more related to kapt3 and dagger I&#39;m trying everything to solve it"}], "owner": {"reputation": 70, "user_id": 4595131, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-rG9POeYdtkY/AAAAAAAAAAI/AAAAAAAAAJc/4vr3on_Mgmc/photo.jpg?sz=128", "display_name": "Sneyder Angulo", "link": "https://stackoverflow.com/users/4595131/sneyder-angulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 542, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1510772665, "creation_date": 1510616933, "last_edit_date": 1510772665, "question_id": 47275419, "link": "https://stackoverflow.com/questions/47275419/how-to-solve-kapterror-error-while-annotation-processing-in-android-studio-3-0", "title": "How to solve KaptError: Error while annotation processing in Android Studio 3.0?", "body": "<p>Hi guys I've had some issues implementing dependency injection through dagger2-android in kotlin and after solving all of them I have encountered this error building the app.</p>\n\n<p>I'm using Android Studio 3.0 and the project worked well before using dagger, how do you think I could solve this? or how could I get more info about the error? because only \"Error:screenSize\" does not mean a lot to me.</p>\n\n<p>Just in case here is the AndroidManifest</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n package=\"com.sneyder.rememberconcepts\"&gt;\n\n&lt;uses-feature\n   android:name=\"android.hardware.location\"\n   android:required=\"false\" /&gt;\n&lt;uses-feature\n   android:name=\"android.hardware.location.gps\"\n   android:required=\"false\" /&gt;\n&lt;uses-feature\n   android:name=\"android.hardware.location.network\"\n   android:required=\"false\" /&gt;\n&lt;uses-feature\n   android:name=\"android.hardware.telephony\"\n   android:required=\"false\" /&gt;\n\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.RECORD_AUDIO\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt; \n\n&lt;application\n    android:name=\".RememberConceptsApp\"\n    android:allowBackup=\"true\"\n    android:icon=\"@mipmap/ic_launcher\"\n    android:label=\"@string/app_name\"\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\n    android:supportsRtl=\"true\"\n    android:theme=\"@style/AppTheme\"&gt;\n&lt;activity\n    android:name=\".ui.main.MainActivity\"\n    android:theme=\"@style/AppTheme.NoActionBar\"&gt;\n  &lt;intent-filter&gt;\n    &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n    &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n  &lt;/intent-filter&gt;\n&lt;/activity&gt;\n&lt;activity\n    android:name=\"com.amazon.device.ads.AdActivity\"\n    android:configChanges=\"keyboardHidden|orientation|screenSize\" /&gt;\n\n&lt;activity android:name=\".ui.addcard.AddCardActivity\"/&gt;\n</code></pre>\n\n<p></p>\n\n<p></p>\n\n<p>and here is the error I'm getting</p>\n\n<p><a href=\"https://i.stack.imgur.com/j6MK1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j6MK1.png\" alt=\"Error message\"></a></p>\n\n<p>I have made some changes and now it seems clear that the real error is \"Error:org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Error while annotation processing\"  </p>\n\n<p>here is how my build.gradle looks like</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-kapt'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n  compileSdkVersion 27\n  defaultConfig {\n    applicationId \"com.sneyder.rememberconcepts\"\n    minSdkVersion 14\n    targetSdkVersion 27\n    versionCode 1\n    versionName \"1.0\"\n    testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    vectorDrawables.useSupportLibrary = true\n  }\n  buildTypes {\n    release {\n      minifyEnabled false\n      proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n  }\n}\n\n\n// Define versions in a single place\next {\n  // App dependencies\n  support_library_version = '27.0.0'\n  constrain_layout_version = '1.0.2'\n  dagger_version = '2.11'\n  retrofit2_version = '2.3.0'\n  gson_version = '2.8.0'\n  glide_version = '4.3.1'\n  rxandroid2_version = '2.0.1'\n  rxjava2_version = '2.1.3'\n  junit_version = '4.12'\n  mockito_version = '2.7.1'\n  espresso_version = \"3.0.1\"\n  architecture_components_version = \"1.0.+\"\n}\n\n\ndependencies {\n  implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n  // Kotlin\n  implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n\n  // Support library\n  implementation \"com.android.support:appcompat-v7:$support_library_version\"\n  implementation \"com.android.support:design:$support_library_version\"\n  implementation \"com.android.support:recyclerview-v7:$support_library_version\"\n  implementation \"com.android.support:cardview-v7:$support_library_version\"\n  implementation \"com.android.support.constraint:constraint-layout:$constrain_layout_version\"\n  implementation \"com.android.support:support-v4:$support_library_version\"\n  implementation \"com.android.support:support-vector-drawable:$support_library_version\"\n\n  // Amazon ads\n  implementation files('libs/amazon-ads-5.8.1.1.jar')\n\n  // Retrofit\n  implementation \"com.squareup.retrofit2:retrofit:$retrofit2_version\"\n  implementation \"com.squareup.retrofit2:converter-gson:$retrofit2_version\"\n  implementation \"com.squareup.retrofit2:adapter-rxjava2:$retrofit2_version\"\n\n  // Architecture components\n  implementation \"android.arch.lifecycle:runtime:$architecture_components_version\"\n  implementation \"android.arch.lifecycle:extensions:$architecture_components_version\"\n  implementation 'com.android.support.constraint:constraint-layout:1.0.2'\n  kapt \"android.arch.lifecycle:compiler:$architecture_components_version\"\n  implementation \"android.arch.persistence.room:runtime:$architecture_components_version\"\n  kapt \"android.arch.persistence.room:compiler:$architecture_components_version\"\n  implementation \"android.arch.persistence.room:rxjava2:$architecture_components_version\"\n\n  // Gson\n  implementation \"com.google.code.gson:gson:$gson_version\"\n\n  // rxJava2 and rxAndroid2\n  implementation \"io.reactivex.rxjava2:rxjava:$rxjava2_version\"\n  implementation \"io.reactivex.rxjava2:rxandroid:$rxandroid2_version\"\n\n  // Dagger Core\n  implementation \"com.google.dagger:dagger:$dagger_version\"\n  annotationProcessor \"com.google.dagger:dagger-compiler:$dagger_version\"\n  kapt \"com.google.dagger:dagger-compiler:$dagger_version\"\n\n  // Dagger Android\n  implementation \"com.google.dagger:dagger-android:$dagger_version\"\n  implementation \"com.google.dagger:dagger-android-support:$dagger_version\"\n  annotationProcessor \"com.google.dagger:dagger-android-processor:$dagger_version\"\n  kapt \"com.google.dagger:dagger-android-processor:$dagger_version\"\n\n  // Glide\n  implementation \"com.github.bumptech.glide:glide:$glide_version\"\n  annotationProcessor \"com.github.bumptech.glide:compiler:$glide_version\"\n\n  // Test dependencies\n  implementation \"com.android.support:support-v4:$support_library_version\"\n  testImplementation \"junit:junit:$junit_version\"\n  androidTestImplementation \"com.android.support.test:runner:1.0.1\"\n  androidTestImplementation \"com.android.support.test.espresso:espresso-core:3.0.1\"\n}\n</code></pre>\n"}, {"tags": ["generics", "lambda", "polymorphism", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 645, "user_id": 8729476, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99fdf036168c3783ab6223843a6b9ceb?s=128&d=identicon&r=PG&f=1", "display_name": "sirksel", "link": "https://stackoverflow.com/users/8729476/sirksel"}, "edited": false, "score": 0, "creation_date": 1510645109, "post_id": 47275855, "comment_id": 81510557, "body": "I tried your code, and then tried to eliminate None/null...  Can I <code>throw</code> instead of <code>Calc.None</code> to make the <code>object None</code> unnecessary?  It seemed to work, but will that cause problems with the typechecker down the line?  Is it unKotlinic to not have a None?  Thanks."}, {"owner": {"reputation": 5491, "user_id": 1439771, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/egtxg.png?s=128&g=1", "display_name": "SimY4", "link": "https://stackoverflow.com/users/1439771/simy4"}, "reply_to_user": {"reputation": 645, "user_id": 8729476, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99fdf036168c3783ab6223843a6b9ceb?s=128&d=identicon&r=PG&f=1", "display_name": "sirksel", "link": "https://stackoverflow.com/users/8729476/sirksel"}, "edited": false, "score": 1, "creation_date": 1510646197, "post_id": 47275855, "comment_id": 81511146, "body": "@sirksel I&#39;m not a big expert in Kotlin, but since this implementation don&#39;t have any restrictions on which type extension can be applied to, I&#39;d say it&#39;s better to fall back to default implementation rather than throw. But if you want to get rid of Default object you can probably just create a specialized extensions for String List and Sequence like you did in OP."}, {"owner": {"reputation": 645, "user_id": 8729476, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99fdf036168c3783ab6223843a6b9ceb?s=128&d=identicon&r=PG&f=1", "display_name": "sirksel", "link": "https://stackoverflow.com/users/8729476/sirksel"}, "edited": false, "score": 0, "creation_date": 1510649183, "post_id": 47275855, "comment_id": 81512650, "body": "Are you saying you&#39;d repeat the identical extension functions for <code>dbl</code> in each of String List and Sequence... as an alternative to all of your code?  Or are you saying that I&#39;d change the code you wrote by replacing just the overridden functions (or something else) with extensions?  I&#39;m still learning this... thanks."}, {"owner": {"reputation": 5491, "user_id": 1439771, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/egtxg.png?s=128&g=1", "display_name": "SimY4", "link": "https://stackoverflow.com/users/1439771/simy4"}, "reply_to_user": {"reputation": 645, "user_id": 8729476, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99fdf036168c3783ab6223843a6b9ceb?s=128&d=identicon&r=PG&f=1", "display_name": "sirksel", "link": "https://stackoverflow.com/users/8729476/sirksel"}, "edited": false, "score": 1, "creation_date": 1510649565, "post_id": 47275855, "comment_id": 81512869, "body": "@sirksel I&#39;ve updated my answer to illustrate what I mean. Cheers"}], "tags": [], "owner": {"reputation": 5491, "user_id": 1439771, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/egtxg.png?s=128&g=1", "display_name": "SimY4", "link": "https://stackoverflow.com/users/1439771/simy4"}, "is_accepted": true, "score": 2, "last_activity_date": 1510649516, "last_edit_date": 1510649516, "creation_date": 1510619971, "answer_id": 47275855, "question_id": 47275163, "link": "https://stackoverflow.com/questions/47275163/polymorphism-on-extension-functions-in-kotlin/47275855#47275855", "title": "Polymorphism on extension functions in Kotlin", "body": "<p>Here's a example with sealed classes and a single extension property to convert anything to something which can give you <code>len</code> or <code>double</code>. Not sure if it has better readability thogh.</p>\n\n<pre><code>val Any?.calc get() = when(this) {\n    is String -&gt; Calc.CalcString(this)\n    is List&lt;*&gt; -&gt; Calc.CalcList(this)\n    is Sequence&lt;*&gt; -&gt; Calc.CalcSequense(this)\n    else -&gt; Calc.None\n}\n\n/* or alternatively without default fallback */\n\nval String.calc get() = Calc.CalcString(this)\nval List&lt;*&gt;.calc get() = Calc.CalcList(this)\nval Sequence&lt;*&gt;.calc get() = Calc.CalcSequense(this)\n\n/* sealed extension classes */\n\nsealed class Calc {\n\n    abstract val len: Int?\n\n    val dbl: Int? by lazy(LazyThreadSafetyMode.NONE) { len?.let { it * 2 } }\n\n    class CalcString(val s: String): Calc() {\n        override val len: Int? get() = s.length\n    }\n\n    class CalcList&lt;out T&gt;(val l: List&lt;T&gt;): Calc() {\n        override val len: Int? get() = l.size\n    }\n\n    class CalcSequense&lt;out T&gt;(val s: Sequence&lt;T&gt;): Calc() {\n        override val len: Int? get() = s.count()\n    }\n\n    object None: Calc() {\n        override val len: Int? get() = null\n    }\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val s = \"abc\".calc\n    val l = listOf(5,6,7).calc\n    val q = (10..20 step 2).asSequence().calc\n\n    println(\"Lens:  ${s.dbl}, ${l.dbl}, ${q.dbl}\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "is_accepted": false, "score": 1, "last_activity_date": 1598560829, "last_edit_date": 1598560829, "creation_date": 1598550395, "answer_id": 63621569, "question_id": 47275163, "link": "https://stackoverflow.com/questions/47275163/polymorphism-on-extension-functions-in-kotlin/63621569#63621569", "title": "Polymorphism on extension functions in Kotlin", "body": "<p><a href=\"https://kotlinlang.org/docs/reference/extensions.html#extensions-are-resolved-statically\" rel=\"nofollow noreferrer\">Extensions are resolved statically</a>.</p>\n<blockquote>\n<p>This means that the extension function being called is determined by\nthe type of the expression on which the function is invoked, not by\nthe type of the result of evaluating that expression at runtime.</p>\n</blockquote>\n<p>I personally think this design decision limits the usability of extensions, since we can't invoke the function by subtype polymorphism. Currently, there is no other way than to use ad-hoc polymorphism by overloading extension functions and accept the intended receiver as a parameter, as shown in <a href=\"https://stackoverflow.com/a/47275855/839733\">this</a> answer. Then the JVM chooses the appropriate overloaded function to call at runtime based on the receiver argument type.</p>\n<p>There's another way to solve this problem, using type classes; instead of defining <code>len</code> on each type, you define an interface <code>Lengthy</code> that has method <code>length()</code>, define conversions for each specific type to <code>Lengthy</code>, and invoke <code>someLengthy.length()</code>. See <a href=\"https://medium.com/@sinisalouc/ad-hoc-polymorphism-and-type-classes-442ae22e5342\" rel=\"nofollow noreferrer\">this article</a> for details. However, the article uses Scala which supports implicit conversions, Kotlin doesn't, so the code won't be as succinct.</p>\n"}], "owner": {"reputation": 645, "user_id": 8729476, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99fdf036168c3783ab6223843a6b9ceb?s=128&d=identicon&r=PG&f=1", "display_name": "sirksel", "link": "https://stackoverflow.com/users/8729476/sirksel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "accepted_answer_id": 47275855, "answer_count": 2, "score": 3, "last_activity_date": 1598560829, "creation_date": 1510615259, "question_id": 47275163, "link": "https://stackoverflow.com/questions/47275163/polymorphism-on-extension-functions-in-kotlin", "title": "Polymorphism on extension functions in Kotlin", "body": "<p>I have a several <strong>classes I don't control</strong>, upon which I've already created several identically-named extension methods across several common \"attributes\".  The identically-named extension functions always return the same value type, though calculated in different ways for each type of receiver.  Here is a <strong>simplified</strong> example based on built-in types for just one attribute:</p>\n\n<pre><code>// **DOES NOT COMPILE**\n\n// three sample classes I don't control extended for .len\ninline val String.len get() = length\ninline val &lt;T&gt; List&lt;T&gt;.len get() = size\ninline val &lt;T&gt; Sequence&lt;T&gt;.len get() = count()\n\n// another class which needs to act on things with .len\nclass Calc&lt;T&gt;(val obj:T) {       // HERE IS THE PROBLEM...\n  val dbl get() = obj?.len * 2   // dummy property that doubles len\n  // ... and other methods that use .len and other parallel extensions \n}\n\nfun main(a:Array&lt;String&gt;) {\n  val s = \"abc\"\n  val l = listOf(5,6,7)\n  val q = (10..20 step 2).asSequence()\n  val cs = Calc(s)\n  val cl = Calc(l)\n  val cq = Calc(q)\n  println(\"Lens:  ${cs.dbl}, ${cl.dbl}, ${cq.dbl}\")\n}\n</code></pre>\n\n<p>Imagine several other \"common\" properties extended in the same manner as .len in some classes I don't control.  If I don't want to repeat myself in every class, <strong>how do I construct a properly typed class that can operate on .len (and other such properties) generically for these three classes?</strong></p>\n\n<p>I've researched the following but not found workable solutions yet:</p>\n\n<ul>\n<li>generics, in the example above, <em>but can't get the syntax right.</em></li>\n<li>sealed classes, <em>but I don't have control of these classes.</em></li>\n<li>union types, <em>which I've found aren't supported in Kotlin.</em></li>\n<li>wrapper\nclasses, <em>but couldn't get the syntax right.</em></li>\n<li>passing lambdas a la\n<a href=\"http://beust.com/weblog/2016/06/20/ad-hoc-polymorphism-in-kotlin/\" rel=\"nofollow noreferrer\">this blog explanation</a>, <em>but didn't get it right, and it seemed boptimalsu to pass multiple lambdas around for every method.</em></li>\n</ul>\n\n<p><strong>There must be a better way, right?</strong></p>\n"}, {"tags": ["kotlin", "android-studio-3.0", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 0, "creation_date": 1510654745, "post_id": 47272245, "comment_id": 81516378, "body": "Hello Sir, Thanks for the reply. Can you please help me, how i need to modify my coding to check the button is clicked or not."}], "answers": [{"comments": [{"owner": {"reputation": 136, "user_id": 6597900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WW8eySOdgJk/AAAAAAAAAAI/AAAAAAAAAHA/85tb2MNVyyA/photo.jpg?sz=128", "display_name": "Midosh Brown", "link": "https://stackoverflow.com/users/6597900/midosh-brown"}, "edited": false, "score": 0, "creation_date": 1510662507, "post_id": 47273928, "comment_id": 81521534, "body": "plz edit your question and add all the code in your activity to help you  modifying your code"}, {"owner": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 1, "creation_date": 1510671368, "post_id": 47273928, "comment_id": 81528032, "body": "Added all the code of xml and kotlin files. Please look into"}, {"owner": {"reputation": 136, "user_id": 6597900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WW8eySOdgJk/AAAAAAAAAAI/AAAAAAAAAHA/85tb2MNVyyA/photo.jpg?sz=128", "display_name": "Midosh Brown", "link": "https://stackoverflow.com/users/6597900/midosh-brown"}, "reply_to_user": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 0, "creation_date": 1510672999, "post_id": 47273928, "comment_id": 81529177, "body": "@user2468312 I edit my answer, check if it&#39;s working and tell me if there is an issue"}, {"owner": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 0, "creation_date": 1510689512, "post_id": 47273928, "comment_id": 81539319, "body": "Thank you for your support its worked fine. I have another query. If i have button , by clicking the button for the first instance i need to enter a value &quot;-&quot; and the second time i need to return a value = &quot;+&quot;. How i can do that."}, {"owner": {"reputation": 136, "user_id": 6597900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WW8eySOdgJk/AAAAAAAAAAI/AAAAAAAAAHA/85tb2MNVyyA/photo.jpg?sz=128", "display_name": "Midosh Brown", "link": "https://stackoverflow.com/users/6597900/midosh-brown"}, "reply_to_user": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 0, "creation_date": 1510689951, "post_id": 47273928, "comment_id": 81539549, "body": "@user2468312 glad that it works, can you plz explain more ,i don&#39;t get what you are trying to implement with the &quot;-&quot; and &quot;+&quot; !!!"}, {"owner": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 1, "creation_date": 1510691424, "post_id": 47273928, "comment_id": 81540295, "body": "Sure. I need to add new button with +/-. If user clicks the button for the first time the value should return -&gt; &quot;-&quot; (ex =&gt; -123), if the user clicks again value &quot;-&quot; should be removed (ex =&gt; 123). The functionality is similar as +/- button in the calculator."}, {"owner": {"reputation": 136, "user_id": 6597900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WW8eySOdgJk/AAAAAAAAAAI/AAAAAAAAAHA/85tb2MNVyyA/photo.jpg?sz=128", "display_name": "Midosh Brown", "link": "https://stackoverflow.com/users/6597900/midosh-brown"}, "reply_to_user": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 0, "creation_date": 1510693752, "post_id": 47273928, "comment_id": 81541545, "body": "@user2468312 can you plz turn what you want in this comment to a new question so i can post my answer because it involves many lines of code and don&#39;t forget to add your activity so no one will downvote your new question"}, {"owner": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 1, "creation_date": 1510695789, "post_id": 47273928, "comment_id": 81542598, "body": "Created a new question - Link - <a href=\"https://stackoverflow.com/questions/47295703/how-to-add-functionality-to-a-butting-in-kotlin-android\" title=\"how to add functionality to a butting in kotlin android\">stackoverflow.com/questions/47295703/&hellip;</a>"}, {"owner": {"reputation": 136, "user_id": 6597900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WW8eySOdgJk/AAAAAAAAAAI/AAAAAAAAAHA/85tb2MNVyyA/photo.jpg?sz=128", "display_name": "Midosh Brown", "link": "https://stackoverflow.com/users/6597900/midosh-brown"}, "reply_to_user": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "edited": false, "score": 0, "creation_date": 1510697346, "post_id": 47273928, "comment_id": 81543357, "body": "@user2468312 i posted my solution"}], "tags": [], "owner": {"reputation": 136, "user_id": 6597900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WW8eySOdgJk/AAAAAAAAAAI/AAAAAAAAAHA/85tb2MNVyyA/photo.jpg?sz=128", "display_name": "Midosh Brown", "link": "https://stackoverflow.com/users/6597900/midosh-brown"}, "is_accepted": true, "score": 7, "last_activity_date": 1510672858, "last_edit_date": 1510672858, "creation_date": 1510608824, "answer_id": 47273928, "question_id": 47272245, "link": "https://stackoverflow.com/questions/47272245/how-to-disable-dot-button-in-android-kotlin/47273928#47273928", "title": "How to disable dot button in android Kotlin", "body": "<p>so you want to disable the button that has the name <code>dotButton</code> after the user clicks it for the first time :</p>\n\n<p>to disable a button, use:</p>\n\n<pre><code>dotButton.isClickable=false\n</code></pre>\n\n<p>if you want the button to become clickable again(like when the user deletes the dot that he already pressed) you can use:</p>\n\n<pre><code>dotButton.isClickable=true\n</code></pre>\n\n<p><strong>Edit</strong>:\nmodify your activity code like that :</p>\n\n<pre><code>when (button.id) {\n        buttonOne.id -&gt; isClicked += \"1\"\n        buttonTwo.id -&gt; isClicked += \"2\"\n        buttonThree.id -&gt; isClicked += \"3\"\n        dotButton.id-&gt; {\n        isClicked+=\".\"\n        dotButton.isClickable=false//**add this line here**\n\n                       }\n    }\n\nfun clearFunction(view: View){\n    viewResult.setText(\"\")\n    dotButton.isClickable=true//**add this line here**\n}\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 2468312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f59295caeb2f27bbe0536ffc613820?s=128&d=identicon&r=PG", "display_name": "user2468312", "link": "https://stackoverflow.com/users/2468312/user2468312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10006, "favorite_count": 0, "accepted_answer_id": 47273928, "answer_count": 1, "score": 3, "last_activity_date": 1510672858, "creation_date": 1510602082, "last_edit_date": 1510671308, "question_id": 47272245, "link": "https://stackoverflow.com/questions/47272245/how-to-disable-dot-button-in-android-kotlin", "title": "How to disable dot button in android Kotlin", "body": "<p>I am new to Android Studio - Kotlin, I am building an app with numbers and math operators with decimal point(.dot button)In my math calculator app, if press the dot button, the button should be disabled or not entered for the second time.  I want to disable or stop printing dot button(.) if pressed more than once. </p>\n\n<p>Here is my code</p>\n\n<p>Acitivity.kt file</p>\n\n<pre><code>package com.tripbegins.calculator\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.View\nimport android.widget.Button\nimport com.tripbegins.calculator.R.id.*\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n}\n\nvar emptyText = true\nfun numberEvents(view: View) {\nvar checkButton:Boolean = false\n    if(emptyText){\n        viewResult.setText(\"\")\n    }\n    emptyText = false\n\n    var button = view as Button\n    var isClicked = viewResult.text.toString()\n    when (button.id) {\n        buttonOne.id -&gt; isClicked += \"1\"\n        buttonTwo.id -&gt; isClicked += \"2\"\n        buttonThree.id -&gt; isClicked += \"3\"\n        dotButton.id-&gt; isClicked+=\".\"\n    }\n\n    viewResult.setText(isClicked)\n}\n\nvar operation =\"+\"\nvar oldValues:String? = null\nfun mathOperation(view: View){\n    var mathButton = view as Button\n    var isClicked = viewResult.text.toString()\n\n    when(mathButton.id){\n        plusButton.id-&gt; {\n            operation = \"+\"\n        }\n        minusButton.id-&gt;{\n            operation=\"-\"\n        }\n        mulButton.id-&gt;{\n            operation=\"*\"\n        }\n\n    }\n    oldValues = viewResult.text.toString()\n    emptyText = true\n}\n\nfun Calculate(view: View){\n\n    var newValues = viewResult.text.toString()\n    var calulateButton:Double? = null\n    when(operation){\n        \"+\"-&gt; { calulateButton = oldValues!!.toDouble() + newValues.toDouble() }\n        \"-\"-&gt; { calulateButton = oldValues!!.toDouble() - newValues.toDouble() }\n        \"*\"-&gt; { calulateButton = oldValues!!.toDouble() * newValues.toDouble() }\n\n    }\n    viewResult.setText(calulateButton.toString())\n    emptyText=true\n}\nfun clearFunction(view: View){\n    viewResult.setText(\"\")\n}\n}\n</code></pre>\n\n<p>activity.xml file</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n &lt;android.support.constraint.ConstraintLayout \n xmlns:android=\"http://schemas.android.com/apk/res/android\"\n xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n xmlns:tools=\"http://schemas.android.com/tools\"\n android:layout_width=\"match_parent\"\n android:layout_height=\"match_parent\"\n tools:context=\"com.tripbegins.calculator.MainActivity\"&gt;\n\n&lt;EditText\n    android:id=\"@+id/viewResult\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginTop=\"42dp\"\n    android:ems=\"10\"\n    android:gravity=\"bottom|right\"\n    android:inputType=\"textPersonName\"\n    android:text=\"0\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/buttonTwo\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"16dp\"\n    android:layout_marginTop=\"76dp\"\n    android:onClick=\"numberEvents\"\n    android:text=\"2\"\n    app:layout_constraintStart_toEndOf=\"@+id/buttonOne\"\n    app:layout_constraintTop_toBottomOf=\"@+id/viewResult\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/plusButton\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"38dp\"\n    android:onClick=\"mathOperation\"\n    android:text=\"+\"\n    app:layout_constraintBaseline_toBaselineOf=\"@+id/minusButton\"\n    app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/minusButton\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"12dp\"\n    android:layout_marginTop=\"33dp\"\n    android:onClick=\"mathOperation\"\n    android:text=\"-\"\n    app:layout_constraintStart_toEndOf=\"@+id/plusButton\"\n    app:layout_constraintTop_toBottomOf=\"@+id/buttonTwo\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/mulButton\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"26dp\"\n    android:onClick=\"mathOperation\"\n    android:text=\"*\"\n    app:layout_constraintBaseline_toBaselineOf=\"@+id/minusButton\"\n    app:layout_constraintStart_toEndOf=\"@+id/minusButton\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/calButton\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginTop=\"44dp\"\n    android:onClick=\"Calculate\"\n    android:text=\"Calculate\"\n    app:layout_constraintStart_toStartOf=\"@+id/minusButton\"\n    app:layout_constraintTop_toBottomOf=\"@+id/minusButton\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/buttonThree\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"26dp\"\n    android:onClick=\"numberEvents\"\n    android:text=\"3\"\n    app:layout_constraintBaseline_toBaselineOf=\"@+id/buttonTwo\"\n    app:layout_constraintStart_toEndOf=\"@+id/buttonTwo\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/buttonOne\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"34dp\"\n    android:onClick=\"numberEvents\"\n    android:text=\"1\"\n    app:layout_constraintBaseline_toBaselineOf=\"@+id/buttonTwo\"\n    app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/dotButton\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginEnd=\"22dp\"\n    android:onClick=\"numberEvents\"\n    android:text=\".\"\n    app:layout_constraintBaseline_toBaselineOf=\"@+id/calButton\"\n    app:layout_constraintEnd_toStartOf=\"@+id/calButton\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/clearButton\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"11dp\"\n    android:onClick=\"clearFunction\"\n    android:text=\"Clear\"\n    app:layout_constraintBaseline_toBaselineOf=\"@+id/calButton\"\n    app:layout_constraintStart_toEndOf=\"@+id/calButton\" /&gt;\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>My expectation of the result</p>\n\n<p>Valid entry -> 3. (.dot button should not be entered for the second time)</p>\n\n<p>Invalid entry -> 3... (currently i can able to enter multiple .dot buttons)</p>\n\n<p>Dot button should not pressed twice. It should be active only once.</p>\n\n<p>Thanks\nMohammed</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-studio-3.1"], "comments": [{"owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 1, "creation_date": 1510600771, "post_id": 47270801, "comment_id": 81494656, "body": "Welcome to stackoverflow. Please show us a snippet with your code, expected result and error."}, {"owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "edited": false, "score": 0, "creation_date": 1510601789, "post_id": 47270801, "comment_id": 81495243, "body": "Please try to avoid referencing external sources and create a minimal verifiable example <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "answers": [{"comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1510605738, "post_id": 47272886, "comment_id": 81497391, "body": "Don&#39;t do this: <code>val toolbar: Toolbar = toolbar</code> There&#39;s no point, you can already access <code>toolbar</code>. As a bonus Kotlin extensions already include caching of found views."}, {"owner": {"reputation": 73, "user_id": 8849848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc1012b94194f5e666c901b1d728a19?s=128&d=identicon&r=PG&f=1", "display_name": "wolfgang", "link": "https://stackoverflow.com/users/8849848/wolfgang"}, "edited": false, "score": 0, "creation_date": 1510640327, "post_id": 47272886, "comment_id": 81508330, "body": "I changed @erafn line of val toolbar: Toolbar = view.findViewById(R.id.toolbar) as Toolbar  to this below and it is not showing any red underlines.   val toolbar: Toolbar = findViewById(R.id.toolbar) Also the first line in erafn answer worked perfectly."}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1510641090, "post_id": 47272886, "comment_id": 81508623, "body": "<code>val toolbar: Toolbar</code> will not work because Activity <i>instantiation</i> happens way before <code>onCreate</code>. Since there is no view hierarchy before you call <code>setContentView</code>, <code>toolbar</code> will be null. And because the variable it of type <code>Toolbar</code> (non-nullable) your app will crash on start with a <code>KotlinNullPointerException</code>."}, {"owner": {"reputation": 1, "user_id": 4153050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U0jgovjRh7M/AAAAAAAAAAI/AAAAAAAADsU/JGn3I2MsOuw/photo.jpg?sz=128", "display_name": "erafn", "link": "https://stackoverflow.com/users/4153050/erafn"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1510696401, "post_id": 47272886, "comment_id": 81542893, "body": "You&#39;re correct @Eugen Pechanec, That was a mistake and I&#39;ve removed it"}], "tags": [], "owner": {"reputation": 1, "user_id": 4153050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U0jgovjRh7M/AAAAAAAAAAI/AAAAAAAADsU/JGn3I2MsOuw/photo.jpg?sz=128", "display_name": "erafn", "link": "https://stackoverflow.com/users/4153050/erafn"}, "is_accepted": false, "score": 0, "last_activity_date": 1510696351, "last_edit_date": 1510696351, "creation_date": 1510604439, "answer_id": 47272886, "question_id": 47270801, "link": "https://stackoverflow.com/questions/47270801/issue-with-android-studio-and-main-activity-kt-expecting-member-declaration/47272886#47272886", "title": "Issue with Android Studio and Main Activity.kt expecting member declaration", "body": "<p>It seems you are declaring your <code>searchView</code> and <code>toolbar</code> variables using Java syntax, and not the Kotlin syntax, so the compiler does not understand what you are declaring.</p>\n\n<p>So change the declaration to: </p>\n\n<pre><code>var searchView: MaterialSearchView? = null\nval toolbar: Toolbar = view.findViewById(R.id.toolbar) as Toolbar \n</code></pre>\n\n<p>or if you are using Kotlin Android extensions you should be able to retrieve the toolbar like so (using the view id directly):</p>\n"}, {"tags": [], "owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "is_accepted": true, "score": 9, "last_activity_date": 1573203089, "last_edit_date": 1573203089, "creation_date": 1510642251, "answer_id": 47279368, "question_id": 47270801, "link": "https://stackoverflow.com/questions/47270801/issue-with-android-studio-and-main-activity-kt-expecting-member-declaration/47279368#47279368", "title": "Issue with Android Studio and Main Activity.kt expecting member declaration", "body": "<h3>1) Understand your language syntax</h3>\n\n<p>Your tutorial is in Java. You try to write in Kotlin. Java and Kotlin have different syntax and if you reproduce this tutorial word for word in Kotlin, it will fail.</p>\n\n<p>Follow the turorial and write your code in Java. Switch to Kotlin later when you're more confident with what you're doing. Focus on one thing at a time.</p>\n\n<h3>2) Find views at the right time</h3>\n\n<p>The <code>Activity</code> object is instatiated for you by the framework with a public empty constructor. At this time there are no views to be found. If you call <code>findViewById</code> any time before <code>setContentView</code> it will return <code>null</code> and crash if you try to assign it to a non-nullable variable.</p>\n\n<p>The above applies for both Java and Kotlin.</p>\n\n<p>For Java follow the tutorial. It should look something like this:</p>\n\n<pre><code>Toolbar toolbar; // Declare the variable here so it's accessible outside of onCreate.\n\n@Override\npublic void onCreate(@Nullable final Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main2); // Inflate view hierarchy.\n    toolbar = (Toolbar) view.findViewById(R.id.toolbar); // Find your views.\n    setSupportActionBar(toolbar);\n}\n</code></pre>\n\n<p>In Kotlin there are several options.</p>\n\n<p>You can use <code>lateinit</code> modifier which allows you to declare a non-nullable variable but assign it later in <code>onCreate</code>.</p>\n\n<pre><code>lateinit var toolbar: Toolbar\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main2)\n    toolbar = findViewById(R.id.toolbar) as Toolbar\n    setSupportActionBar(toolbar)\n}\n</code></pre>\n\n<p><s>\nOr you can use <code>lazy</code> delegate. The variable will be assigned when you first access it.</p>\n\n<pre><code>val toolbar: Toolbar by lazy(LayzThreadSafetyMode.NONE) {\n    toolbar = findViewById(R.id.toolbar) as Toolbar\n}\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main2)\n    setSupportActionBar(toolbar)\n}\n</code></pre>\n\n<p></s></p>\n\n<p>Don't use the delegate. It creates an unnecessary holder object for each <code>lazy</code>, that's wasteful.</p>\n\n<p>You can also use <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"noreferrer\">Kotlin Android Extensions</a> and just access <code>toolbar</code> directly because all of the heavy lifting is done for you.</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main2)\n    setSupportActionBar(toolbar)\n}\n</code></pre>\n\n<p>Alternatively you can use <a href=\"https://developer.android.com/topic/libraries/view-binding\" rel=\"noreferrer\">View Binding</a> available since Android Studio 3.6 Canary 11.</p>\n\n<pre><code>private lateinit var binding: ActivityMain2Binding\n\n@Override\nfun onCreate(savedInstanceState: Bundle) {\n    super.onCreate(savedInstanceState)\n    binding = ActivityMain2Binding.inflate(layoutInflater)\n    setContentView(binding.root)\n    setSupportActionBar(binding.toolbar)\n}\n</code></pre>\n\n<p>You get high performance of the first option and strong type safety on top.</p>\n"}, {"comments": [{"owner": {"reputation": 3017, "user_id": 2648551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWyXK.jpg?s=128&g=1", "display_name": "colidyre", "link": "https://stackoverflow.com/users/2648551/colidyre"}, "edited": false, "score": 1, "creation_date": 1535497082, "post_id": 52066915, "comment_id": 91084801, "body": "I do not think that this is an appropriate answer. Imho, it&#39;s obvious that OP has not a copy/paste-problem (and also an accepted answer with no copy/paste problems at all). This should be a comment instead of an answer."}, {"owner": {"reputation": 1141, "user_id": 9758208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Et4ua.jpg?s=128&g=1", "display_name": "Oya Canli", "link": "https://stackoverflow.com/users/9758208/oya-canli"}, "edited": false, "score": 0, "creation_date": 1565709953, "post_id": 52066915, "comment_id": 101433378, "body": "Thanks @ferreiraiso ! I would lose lots of time trying to understand the reason if I didn&#39;t see your answer."}, {"owner": {"reputation": 1329, "user_id": 643723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gUyVS.png?s=128&g=1", "display_name": "sobelito", "link": "https://stackoverflow.com/users/643723/sobelito"}, "edited": false, "score": 0, "creation_date": 1577811503, "post_id": 52066915, "comment_id": 105262359, "body": "fwiw, i had the same issue and this helped me, deleting some whitespace"}], "tags": [], "owner": {"reputation": 27, "user_id": 5654289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLlrP.png?s=128&g=1", "display_name": "ferreiraiso", "link": "https://stackoverflow.com/users/5654289/ferreiraiso"}, "is_accepted": false, "score": 0, "last_activity_date": 1535494549, "creation_date": 1535494549, "answer_id": 52066915, "question_id": 47270801, "link": "https://stackoverflow.com/questions/47270801/issue-with-android-studio-and-main-activity-kt-expecting-member-declaration/52066915#52066915", "title": "Issue with Android Studio and Main Activity.kt expecting member declaration", "body": "<p>In my case, the problem was a invisible char due copy and paste from .PDF</p>\n\n<p>Note that there are two chars between '{' and 'onClick' in the snippet below.</p>\n\n<pre><code>setOnClickListener { \u200bonClick(item) }\n</code></pre>\n\n<p>This is the cause of my nightmares.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14042386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u2ZQr.jpg?s=128&g=1", "display_name": "Amir Sharfu", "link": "https://stackoverflow.com/users/14042386/amir-sharfu"}, "is_accepted": false, "score": 0, "last_activity_date": 1599573279, "creation_date": 1599573279, "answer_id": 63795444, "question_id": 47270801, "link": "https://stackoverflow.com/questions/47270801/issue-with-android-studio-and-main-activity-kt-expecting-member-declaration/63795444#63795444", "title": "Issue with Android Studio and Main Activity.kt expecting member declaration", "body": "<p>The main problem is the syntax, Whenever upgrade 3 series to 4. Java syntax transform to Kotlin syntax.</p>\n<p><em><strong>Kotlin Syntax</strong></em>:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main2)\n   }\n   }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><em><strong>Java Syntax</strong></em>:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@Override\npublic void onCreate(@Nullable final Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main2); // Inflate view hierarchy.\n   }\n   }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>If you want to change Kotlin syntax to Java Syntax.</p>\n<p>Came back to mainActivity programming panel after that\n<strong>TOOLS -&gt; KOTLIN -&gt; Show KOTLIN Bytecodes</strong>\nThen Check on the <strong>JVM 8 target</strong> and <strong>Tick</strong>  that.</p>\n<p>After that <strong>invalid catch/Restart</strong></p>\n<p>Problem has been resolved.</p>\n"}], "owner": {"reputation": 73, "user_id": 8849848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc1012b94194f5e666c901b1d728a19?s=128&d=identicon&r=PG&f=1", "display_name": "wolfgang", "link": "https://stackoverflow.com/users/8849848/wolfgang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26597, "favorite_count": 2, "accepted_answer_id": 47279368, "answer_count": 4, "score": 4, "last_activity_date": 1599573279, "creation_date": 1510596499, "last_edit_date": 1522419329, "question_id": 47270801, "link": "https://stackoverflow.com/questions/47270801/issue-with-android-studio-and-main-activity-kt-expecting-member-declaration", "title": "Issue with Android Studio and Main Activity.kt expecting member declaration", "body": "<p>I have been trying to learn through following YouTube tutorials.  I am using Android Studio 3.1 Canary and I get to the same point in the tutorials and get stuck.  For instance if you go to this YouTube tutorial <a href=\"https://youtu.be/3RMboPhUbmg?t=210\" rel=\"noreferrer\">https://youtu.be/3RMboPhUbmg?t=210</a> at the 3:30 min mark. </p>\n\n<p>When they are inputting the MaterialSearchView searchView; it shows up for me with a red underline saying \"expecting member declaration\" and no matter how many searches I try I cannot find an answer.  What is the solution to this error? Thanks</p>\n\n<p>This is the code contained in the Main2Activity.kt. The result should be calling or knowing the toolbar and materialsearchview objects</p>\n\n<pre><code>import android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.support.v7.widget.Toolbar\nimport com.miguelcatalan.materialsearchview.MaterialSearchView\nimport kotlinx.android.synthetic.main.activity_main2.*\n\nclass Main2Activity : AppCompatActivity () {\n    **MaterialSearchView searchView;**  \"expecting member declaration error\"\n    **Toolbar  toolbar;** \"expecting member declaration error\"\n    Toolbar toolbar = (Toolbar) view.findViewById(R.id.toolbar);\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main2);\n        toolbar=(Toolbar()) findViewbyId(R.id.toolbar);\n        setSupportActionBar(toolbar);\n    }\n    *private void searchViewCode()\n    {\n        searchView=(MaterialSearchView)findViewById(R.id.search_view);\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "service", "kotlin", "android-8.0-oreo"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1510596124, "post_id": 47270691, "comment_id": 81492177, "body": "There really isn&#39;t a way to have a clean way for indefinitely running a background service. If you want to do continuous work, some part of your app has to be in the foreground."}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1510596271, "post_id": 47270691, "comment_id": 81492263, "body": "&quot;Can we create a permanent background service on android 8+ ?&quot; -- use a foreground service. That is still not &quot;permanent&quot;, but it is as permanent as it has ever been. &quot;I also don&#39;t want to annoy a user with a foreground service which permanently shows a notification in the status bar&quot; -- you do not have much of an option."}, {"owner": {"reputation": 1537, "user_id": 6685358, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/283db7fde047dcc22d47980741422192?s=128&d=identicon&r=PG&f=1", "display_name": "fameman", "link": "https://stackoverflow.com/users/6685358/fameman"}, "edited": false, "score": 0, "creation_date": 1510596350, "post_id": 47270691, "comment_id": 81492314, "body": "Oh. That&#39;s bad. I understand that permanent background services could be annoying to the user but there should really be a way for me to make a continuos keyword listener."}], "answers": [{"comments": [{"owner": {"reputation": 1537, "user_id": 6685358, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/283db7fde047dcc22d47980741422192?s=128&d=identicon&r=PG&f=1", "display_name": "fameman", "link": "https://stackoverflow.com/users/6685358/fameman"}, "edited": false, "score": 0, "creation_date": 1511991686, "post_id": 47273389, "comment_id": 82082341, "body": "OK. Thank you for your help."}], "tags": [], "owner": {"reputation": 1213, "user_id": 921834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ygjaF.png?s=128&g=1", "display_name": "andrei_zaitcev", "link": "https://stackoverflow.com/users/921834/andrei-zaitcev"}, "is_accepted": true, "score": 6, "last_activity_date": 1510606552, "creation_date": 1510606552, "answer_id": 47273389, "question_id": 47270691, "link": "https://stackoverflow.com/questions/47270691/permanent-services-on-android-oreo/47273389#47273389", "title": "Permanent services on android oreo", "body": "<p>Unfortunately, it's not possible to use a background service and don't show a foreground notification on Android 8.0 and higher.</p>\n\n<p>The only one way that it might work is if you stick your app to Google APIs such as <a href=\"https://developers.google.com/voice-actions/\" rel=\"noreferrer\">Voice Actions API</a>.</p>\n\n<p>As far as I know there is no a good work around and most apps like WhatsApp are still targetting Android API 24.</p>\n"}, {"comments": [{"owner": {"reputation": 1213, "user_id": 921834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ygjaF.png?s=128&g=1", "display_name": "andrei_zaitcev", "link": "https://stackoverflow.com/users/921834/andrei-zaitcev"}, "edited": false, "score": 1, "creation_date": 1532603841, "post_id": 50876480, "comment_id": 90042562, "body": "Android 8.1 and higher force a notification to be visible when a service calls <code>startForeground</code> no matter what importance it has."}, {"owner": {"reputation": 10019, "user_id": 660350, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2d1cafe4926d3ec6114d5895c6bfde09?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/660350/pascal"}, "reply_to_user": {"reputation": 1213, "user_id": 921834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ygjaF.png?s=128&g=1", "display_name": "andrei_zaitcev", "link": "https://stackoverflow.com/users/921834/andrei-zaitcev"}, "edited": false, "score": 0, "creation_date": 1532704389, "post_id": 50876480, "comment_id": 90088600, "body": "@andrei_zaitcev Well, not exactly. If the app that started the service is also itself running in foreground, then my trick works. But it&#39;s true that when this app goes in background, then the notification about the &#39;service started in foreground&#39; is then shown. Coming back to the app will hide it again. Weird, but that&#39;s what I do see on my 2 Andoird 8.1 devices."}], "tags": [], "owner": {"reputation": 10019, "user_id": 660350, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2d1cafe4926d3ec6114d5895c6bfde09?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/660350/pascal"}, "is_accepted": false, "score": 1, "last_activity_date": 1532694625, "last_edit_date": 1532694625, "creation_date": 1529068804, "answer_id": 50876480, "question_id": 47270691, "link": "https://stackoverflow.com/questions/47270691/permanent-services-on-android-oreo/50876480#50876480", "title": "Permanent services on android oreo", "body": "<p>For what is worth, I am sharing me experience on that:</p>\n\n<p>It's <strong><em>partially</em></strong> possible to use a background service and not showing a foreground notification on Android 8.0 just made some experiments and ended up with this:</p>\n\n<p>Just create a notification channel with <a href=\"https://developer.android.com/reference/android/app/NotificationManager.html#IMPORTANCE_NONE\" rel=\"nofollow noreferrer\">IMPORTANCE_NONE</a>, and <strong>the notification</strong> will still exist, but <strong>will not be displayed in status bar</strong>.</p>\n\n<p>Code excerpt: \n<br/></p>\n\n<pre><code>NotificationChannel channelService = new NotificationChannel(\n    YOUR_SERVICE_CHANNEL_ID,\n    YOUR_CHANNEL_HUMAN_READABLE_NAME,\n    NotificationManager.IMPORTANCE_NONE);\n\nchannelService.setSound(null, null); // let's be quiet : no sound\nchannelService.setLockscreenVisibility(Notification.VISIBILITY_SECRET); // not on lock screen\n\n// Register the channel with the system; you can't change the importance\n// or other notification behaviors after this\n// changes needs to uninstall app or clean app data, or rename channel id!\nnotificationManager.createNotificationChannel(channelService));\n</code></pre>\n\n<p><br/></p>\n\n<p>This way, the notification will not be displayed when your app is running in foreground.</p>\n\n<p><strong>Not a perfect solution:</strong></p>\n\n<p>When your app goes in background (i.e., you open another app), the \"Android system\" app displays a notification about \"(your) <em>app being running in the background</em>\".\nSo, this is not great, but, from my point of view, it's a bit better than before.</p>\n"}], "owner": {"reputation": 1537, "user_id": 6685358, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/283db7fde047dcc22d47980741422192?s=128&d=identicon&r=PG&f=1", "display_name": "fameman", "link": "https://stackoverflow.com/users/6685358/fameman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2161, "favorite_count": 1, "accepted_answer_id": 47273389, "answer_count": 2, "score": 4, "last_activity_date": 1532694625, "creation_date": 1510596027, "question_id": 47270691, "link": "https://stackoverflow.com/questions/47270691/permanent-services-on-android-oreo", "title": "Permanent services on android oreo", "body": "<p>Android 8's battery consumption improvements are nice to the user but I am a bit afraid if my service will work as expected.</p>\n\n<p>First of all: Thank you for any suggestions but I cannot just schedule my service. I want to make a <code>OK Google</code>-like keyword listener running in the background all the time. It will be based on the open source pocketsphinx-android library. I know that this will consume much battery power and I will inform the user about this.</p>\n\n<p>Can we create a permanent background service on android 8+ ? I need to target android 8 in gradle because I was expecting some bugs with older targets. I also don't want to annoy a user with a foreground service which permanently shows a notification in the status bar.</p>\n\n<p>[<a href=\"https://developer.android.com/about/versions/oreo/background.html]\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/oreo/background.html]</a> - Is there really no way of making permanent background services for my use-case (but preferably for all use-cases) possible?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1510590512, "post_id": 47269006, "comment_id": 81488787, "body": "The issue is not about a NPE. please read again @Carcigenicate"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1510592177, "post_id": 47269006, "comment_id": 81489949, "body": "<a href=\"https://github.com/JakeWharton/kotterknife/issues/50\" rel=\"nofollow noreferrer\">Similar issue raised on Github</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1510591056, "post_id": 47269210, "comment_id": 81489161, "body": "I am using Kotterknife, if I change it to var it gives an error"}, {"owner": {"reputation": 421, "user_id": 1966794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LG9m1.jpg?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/1966794/casper"}, "reply_to_user": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1510591832, "post_id": 47269210, "comment_id": 81489693, "body": "Ah, sorry.  I guess you can&#39;t add the listeners in <code>onCreate</code> as the buttons haven&#39;t been created then yet. Maybe you can add them to <code>onViewCreated</code>?  I&#39;m not too used to Fragments but <code>onResume</code> is only called when the Activity&#39;s <code>onResume</code> is called, which might be why they work the first time as that&#39;s when the Activity is created but not for other fragments being created in the same Activity which would not have <code>onResume</code> called?"}, {"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1510592391, "post_id": 47269210, "comment_id": 81490103, "body": "I did not move them to <code>onCreate()</code>, I did it to <code>onCreateView()</code>. I miss <code>@OnClick</code> for Kotlin but Jake says there is no plan to do it"}, {"owner": {"reputation": 421, "user_id": 1966794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LG9m1.jpg?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/1966794/casper"}, "reply_to_user": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1510592737, "post_id": 47269210, "comment_id": 81490327, "body": "Yeah, I meant to write <code>onCreateView</code>. Try moving the listeners to <code>onViewCreated</code> and see if that works."}, {"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1510595684, "post_id": 47269210, "comment_id": 81491917, "body": "So I switched to regular ButterKnife, and now it says the lateinit vars have not been initialized. I am trying to use them right after <code>ButterKnife.bind(this)</code> in MainActivity, is there a special method where I need to place that?"}], "tags": [], "owner": {"reputation": 421, "user_id": 1966794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LG9m1.jpg?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/1966794/casper"}, "is_accepted": false, "score": 0, "last_activity_date": 1510590955, "creation_date": 1510590955, "answer_id": 47269210, "question_id": 47269006, "link": "https://stackoverflow.com/questions/47269006/why-is-setting-onclicklistener-working-once/47269210#47269210", "title": "Why is setting onClickListener working once?", "body": "<p>You have to set your variables that are bound by ButterKnife as <code>lateinit var</code> instead of <code>val</code>. Try </p>\n\n<pre><code>@BindView(R.id.btn_sale)\nlateinit var title: Button\n\n@BindView(R.id.btn_visit)\nlateinit var title: Button\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "is_accepted": true, "score": 0, "last_activity_date": 1510598385, "creation_date": 1510598385, "answer_id": 47271319, "question_id": 47269006, "link": "https://stackoverflow.com/questions/47269006/why-is-setting-onclicklistener-working-once/47271319#47271319", "title": "Why is setting onClickListener working once?", "body": "<p>Solution: solved it by getting rid of <code>KotterKnife</code> and <code>ButterKnife</code> and use android's <code>findViewById</code>. I guess one of the advantages of the language and the framework's progress make some libraries obsolete or unnecessary.</p>\n"}], "owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 47271319, "answer_count": 2, "score": -2, "last_activity_date": 1510598385, "creation_date": 1510590308, "last_edit_date": 1510590717, "question_id": 47269006, "link": "https://stackoverflow.com/questions/47269006/why-is-setting-onclicklistener-working-once", "title": "Why is setting onClickListener working once?", "body": "<p>I want to migrate a very solid project structure that I use to Kotlin. I first tried the basics: Activities and Fragment transactions. It appears so easy and simple:</p>\n\n<pre><code>class MainActivity : AppCompatActivity(), SomeInterface {\n     override fun onCreate(savedInstanceState: Bundle?) {\n         setContentView(R.layout.activity_main)\n\n         val mainFragment = supportFragmentManager.findFragmentById(R.id.fragment_main) as MainActionsFragment?\n                    ?: MainActionsFragment.newInstance()\n         supportFragmentManager.inTransaction {\n              add(R.id.container_main, mainFragment)\n         }\n    }\n\n    private val anotherFragment by lazy {\n    supportFragmentManager.findFragmentById(R.id.another_fragment) as AnotherFragment?\n            ?: AnotherFragment.newInstance()\n    }\n\n    override fun myInterfaceMethod() {\n        replaceFragment(anotherFragment, R.id.container_main)\n    }\n}\n\nclass MainActionsFragment : Fragment() {\n    val btnSale: Button by bindView(R.id.btn_sale)\n    val btnVisit: Button by bindView(R.id.btn_visit)\n\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        return inflater!!.inflate(R.layout.fragment_main, container, false)\n    }\n\n    override fun onResume() {\n        super.onResume()\n\n        btnSale.setOnClickListener{ _ -&gt;\n            listener.requestAction(SaleType.SALE)\n        }\n\n        btnVisit.setOnClickListener{ _ -&gt;\n            listener.requestAction(SaleType.VISIT)\n        }\n    }\n}\n</code></pre>\n\n<p>Extensions.kt</p>\n\n<pre><code>fun AppCompatActivity.replaceFragment(fragment: Fragment, @IdRes frameId: Int) {\n    supportFragmentManager.inTransaction {\n        replace(frameId, fragment)\n                .addToBackStack(fragment.tag)\n    }\n}\n\ninline fun FragmentManager.inTransaction(func: FragmentTransaction.() -&gt; FragmentTransaction) {\n    beginTransaction()\n            .func()\n            .commit()\n}\n</code></pre>\n\n<p>Now, <code>MainActionsFragment</code> holds two buttons. Everything works as expected, the first click on either one takes me to the desired fragment. However, once I press the back button and I see my two buttons again, their click listener is gone. This is pretty much the standard way of doings things translated to Kotlin, nothing fancy besides its cool new features. I tried moving setting the onClickListeners to <code>onCreateView()</code> but it crashes:</p>\n\n<blockquote>\n  <p>Caused by: kotlin.KotlinNullPointerException\n                                                                                      at kotterknife.ButterKnifeKt$viewFinder$7.invoke(ButterKnife.kt:95)\n                                                                                      at kotterknife.ButterKnifeKt$viewFinder$7.invoke(ButterKnife.kt)\n                                                                                      at kotterknife.ButterKnifeKt$required$1.invoke(ButterKnife.kt:104)\n                                                                                      at kotterknife.ButterKnifeKt$required$1.invoke(ButterKnife.kt)\n                                                                                      at kotterknife.Lazy.getValue(ButterKnife.kt:125)</p>\n</blockquote>\n\n<p>So, in spite of Kotlin being so cool, I'm having trouble doing the basics and I'm getting disheartened to migrate. Am I really doing things so wrong? Or how come setting a simple click listener is so frustrating?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1510584959, "post_id": 47267159, "comment_id": 81485008, "body": "What have you got so far?"}, {"owner": {"reputation": 251, "user_id": 2227211, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/225cd2633e61abf0bdebb53b250182ec?s=128&d=identicon&r=PG", "display_name": "ozapa", "link": "https://stackoverflow.com/users/2227211/ozapa"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1510585602, "post_id": 47267159, "comment_id": 81485418, "body": "To tell you the truth I dont have a clue where to begin. I&#39;m stuck because I&#39;ve been using LINQ for a long time and I can&#39;t find anything similar here. It&#39;s like I miss SELECT keyword :) I tried with filtering (ClassAttendants.Filter) but it got me nowhere"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 2227211, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/225cd2633e61abf0bdebb53b250182ec?s=128&d=identicon&r=PG", "display_name": "ozapa", "link": "https://stackoverflow.com/users/2227211/ozapa"}, "edited": false, "score": 0, "creation_date": 1510587672, "post_id": 47267523, "comment_id": 81486870, "body": "Thanks, mapping seems promising."}], "tags": [], "owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "is_accepted": false, "score": 2, "last_activity_date": 1510585929, "creation_date": 1510585929, "answer_id": 47267523, "question_id": 47267159, "link": "https://stackoverflow.com/questions/47267159/kotlin-extract-list-of-parent-objects-of-items-in-collection/47267523#47267523", "title": "Kotlin - extract list of parent objects of items in Collection", "body": "<p>As I'm not one for giving complete solutions, I'll give you a bunch of building blocks that should probably be helpful.</p>\n\n<ol>\n<li><p>We can get the parent for a given element with <code>somePerson.father</code>.</p></li>\n<li><p>We can apply a function over all value elements in a map like this:</p>\n\n<pre><code>myMap.values.map { value -&gt; someFunction(value) }\n</code></pre></li>\n<li><p>We can filter out <code>null</code> values like this:</p>\n\n<pre><code>myCollection.filterNotNull()\n</code></pre></li>\n<li><p>A <code>Set</code> will automatically \"discard\" duplicate elements.  An alternative is something like this:</p>\n\n<pre><code>myCollection.distinct()\n</code></pre></li>\n</ol>\n\n<p>I'd strongly recommend going through the <a href=\"https://kotlinlang.org/docs/tutorials/koans.html\" rel=\"nofollow noreferrer\">Kotlin Koans</a>.  In particular, the \"Collections\" section touches on applying quasi-functional techniques to manipulate collections.</p>\n"}], "owner": {"reputation": 251, "user_id": 2227211, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/225cd2633e61abf0bdebb53b250182ec?s=128&d=identicon&r=PG", "display_name": "ozapa", "link": "https://stackoverflow.com/users/2227211/ozapa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1368, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510585929, "creation_date": 1510584778, "question_id": 47267159, "link": "https://stackoverflow.com/questions/47267159/kotlin-extract-list-of-parent-objects-of-items-in-collection", "title": "Kotlin - extract list of parent objects of items in Collection", "body": "<p>Is there a way in Kotlin to extract list of parent objects of items in Collection. \nFor instance if we have mutableMaps:</p>\n\n<pre><code>val AllPersons = mutableMapOf&lt;Long,Person&gt;() \nval ClassAttendants = mutableMapOf&lt;Long,Person&gt;()\n</code></pre>\n\n<p>where Person is:</p>\n\n<pre><code>data class Person( PID : Long\n    Name: String\n    Surname: String\n    Father: Person?)\n</code></pre>\n\n<p>Is there a way to select all (distinct) grandfathers from class attendants?</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "answers": [{"tags": [], "owner": {"reputation": 636, "user_id": 4434901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ac57cb2d0d5b2a95225a771dd99682a?s=128&d=identicon&r=PG&f=1", "display_name": "Brianvdb", "link": "https://stackoverflow.com/users/4434901/brianvdb"}, "is_accepted": false, "score": 0, "last_activity_date": 1510585885, "creation_date": 1510585885, "answer_id": 47267511, "question_id": 47267133, "link": "https://stackoverflow.com/questions/47267133/click-listener-in-viewholder-only-sometimes-responds/47267511#47267511", "title": "Click listener in ViewHolder only sometimes responds", "body": "<p>You must set the ClickListener in the bind method.</p>\n"}, {"tags": [], "owner": {"reputation": 1248, "user_id": 1767746, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/70a4b25e10b2c75555e22cf83d458677?s=128&d=identicon&r=PG&f=1", "display_name": "K Roobroeck", "link": "https://stackoverflow.com/users/1767746/k-roobroeck"}, "is_accepted": false, "score": 0, "last_activity_date": 1510647579, "creation_date": 1510647579, "answer_id": 47280778, "question_id": 47267133, "link": "https://stackoverflow.com/questions/47267133/click-listener-in-viewholder-only-sometimes-responds/47280778#47280778", "title": "Click listener in ViewHolder only sometimes responds", "body": "<p>Actually, the issue has to do with the use of synthetic kotlin extension on the view. If you use them on the variable view instead of itemView then the click gets eaten by the textview.</p>\n\n<pre><code>fun bind(item: AboutGeneralItemViewModel) {\n    this.item = item\n\n    itemView.general_list_item_title.text = item.value\n    itemView.setOnClickListener {\n        item?.method?.invoke()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1248, "user_id": 1767746, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/70a4b25e10b2c75555e22cf83d458677?s=128&d=identicon&r=PG&f=1", "display_name": "K Roobroeck", "link": "https://stackoverflow.com/users/1767746/k-roobroeck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510651013, "creation_date": 1510584717, "last_edit_date": 1510651013, "question_id": 47267133, "link": "https://stackoverflow.com/questions/47267133/click-listener-in-viewholder-only-sometimes-responds", "title": "Click listener in ViewHolder only sometimes responds", "body": "<p>I have the following piece of code. Below you can see my viewholder, adapter and my xml. The problem I'm encountering is that the click is sometimes not executed. Only when I'm also set clicklisteners in my viewholder on the textview and imageview than it works. Presumably the click gets eaten by the textview and imageview. Anybody have any idea why this behaviour occurs.</p>\n\n<pre><code>class GeneralListItemViewHolder(val view: View) : RecyclerView.ViewHolder(view) {\n\n   var item: GeneralItemViewModel? = null\n\n   init {\n       view.setOnClickListener {\n            item?.method?.invoke()\n       }\n   }\n\n   fun bind(item: GeneralItemViewModel) {\n      this.item = item\n      //Do some nice UI things\n   }\n}\n</code></pre>\n\n<p>My xml looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nstyle=\"@style/ListItem\"&gt;\n\n&lt;ImageView\n    android:id=\"@+id/general_list_item_icon\"\n    style=\"@style/ListItem.Icon\"\n    android:layout_alignParentStart=\"true\"\n    android:layout_centerVertical=\"true\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/general_list_item_title\"\n    style=\"@style/ListItem.Labels.Title\"\n    android:layout_centerVertical=\"true\"\n    android:layout_marginStart=\"@dimen/margin\"\n    android:layout_toEndOf=\"@id/general_list_item_icon\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>Furthermore my adapter code holds the following:</p>\n\n<pre><code>class GeneralItemAdapter(val items: List&lt;GeneralItemViewModel&gt;) : RecyclerView.Adapter&lt;GeneralListItemViewHolder&gt;() {\n\n   override fun onBindViewHolder(holder: GeneralListItemViewHolder, position: Int) {\n       return holder.bind(getItem(position))\n   }\n\n   override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): GeneralListItemViewHolder {\n       val view = parent.inflate(R.layout.general_list_item, false)\n       return GeneralListItemViewHolder(view)\n   }\n\n   override fun getItemCount(): Int {\n       return items.size\n   }\n\n   private fun getItem(position: Int): GeneralItemViewModel {\n       return items[position]\n   }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-android", "rx-java2", "android-room"], "comments": [{"owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "edited": false, "score": 0, "creation_date": 1510582508, "post_id": 47266180, "comment_id": 81483295, "body": "Just a suggestion, You should try using LiveData. It&#39;s similar to rx java but its lifecycle aware and the coolest thing is room supports it"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "reply_to_user": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "edited": false, "score": 0, "creation_date": 1510582583, "post_id": 47266180, "comment_id": 81483349, "body": "ok, thanks, I&#39;ll use it, but can u tell me what is happening here?"}], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1510605777, "post_id": 47266480, "comment_id": 81497410, "body": "@JemoMgebrishvili Of course, you can also do <code>defer</code> <i>inside</i> <code>getAllBooks()</code>."}], "tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 7, "last_activity_date": 1510582821, "creation_date": 1510582821, "answer_id": 47266480, "question_id": 47266180, "link": "https://stackoverflow.com/questions/47266180/rx-java2-schedulers-io-steel-invokes-method-from-mainthread/47266480#47266480", "title": "rx-java2 Schedulers.io() steel invokes method from mainThread", "body": "<p>This is a common misunderstanding with RxJava. <code>getAllBooks</code> executes its content before RxJava gets into the picture.</p>\n\n<pre><code>fun method() : Flowable&lt;String&gt; {\n   println(\"method()\")\n   return Flowable.just(\"hello\")\n}\n\nprintln(\"Preparing...\")\nval f = method();\nprintln(\"Subscribing...\")\nf.subscribe({ println(it) })\n</code></pre>\n\n<p>It will print</p>\n\n<pre><code>Preparing...\nmethod()\nSubscribing...\nhello\n</code></pre>\n\n<p>You have to wrap your action into a <code>Flowable</code> to make it happen when a subscription happens:</p>\n\n<pre><code>disposable.add(\n    Flowable.defer(() -&gt; presenter.getAllBooks())  // &lt;----------------------\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe({\n               println(it.size())\n            })\n)\n</code></pre>\n"}], "owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 47266480, "answer_count": 1, "score": 1, "last_activity_date": 1510582821, "creation_date": 1510581921, "last_edit_date": 1510582459, "question_id": 47266180, "link": "https://stackoverflow.com/questions/47266180/rx-java2-schedulers-io-steel-invokes-method-from-mainthread", "title": "rx-java2 Schedulers.io() steel invokes method from mainThread", "body": "<p>I'm trying to retrieve data from database using <strong>room</strong> with Rx way.\nThis is how I'm trying to do that</p>\n\n<pre><code>override fun onStart() {\n    super.onStart()\n    disposable.add(presenter.getAllBooks()\n              .subscribeOn(Schedulers.io())\n              .observeOn(AndroidSchedulers.mainThread())\n              .subscribe({\n                 println(it.size())\n              }))\n}\n</code></pre>\n\n<p>this is <code>getAllBooks()</code> method inside presenter</p>\n\n<pre><code>fun getAllBooks() : Flowable&lt;List&lt;Book&gt;&gt; {\n    val isMainThread = Looper.myLooper() == Looper.getMainLooper()\n    if (!isMainThread) {\n        updateBooks()\n        return db.bookDao().allBooks\n    }\n    return Flowable.empty()\n}\n</code></pre>\n\n<p>Here <code>isMainThread</code> variable is always <code>true</code>,\nI have also tried <code>observeOn(Shcedulers.io())</code>, but same problem.</p>\n"}, {"tags": ["android", "mvvm", "kotlin"], "comments": [{"owner": {"reputation": 4295, "user_id": 5125212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/meon0.png?s=128&g=1", "display_name": "Damia Fuentes", "link": "https://stackoverflow.com/users/5125212/damia-fuentes"}, "edited": false, "score": 1, "creation_date": 1512986518, "post_id": 47265685, "comment_id": 82460933, "body": "Anything found or concluded?"}, {"owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "reply_to_user": {"reputation": 4295, "user_id": 5125212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/meon0.png?s=128&g=1", "display_name": "Damia Fuentes", "link": "https://stackoverflow.com/users/5125212/damia-fuentes"}, "edited": false, "score": 1, "creation_date": 1513008296, "post_id": 47265685, "comment_id": 82474618, "body": "Nope, I am starting the service from a lifecycle aware component for now"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 7691395, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-abbI69xTTJg/AAAAAAAAAAI/AAAAAAAAACQ/MhgExKWJL60/photo.jpg?sz=128", "display_name": "Fernando Novoa Carbajal", "link": "https://stackoverflow.com/users/7691395/fernando-novoa-carbajal"}, "is_accepted": false, "score": 0, "last_activity_date": 1530929493, "creation_date": 1530929493, "answer_id": 51219370, "question_id": 47265685, "link": "https://stackoverflow.com/questions/47265685/what-is-the-right-place-to-start-a-service-in-mvvm-architecture-android/51219370#51219370", "title": "What is the right place to start a service in MVVM architecture Android", "body": "<p>As far as I know, Services are Android related so, they could be started from View (Activity/Fragment/Lifecycleowner).</p>\n"}, {"tags": [], "owner": {"reputation": 612, "user_id": 5493999, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/af1540ce6627c0231efcf14d8667e147?s=128&d=identicon&r=PG", "display_name": "Abdul Mateen", "link": "https://stackoverflow.com/users/5493999/abdul-mateen"}, "is_accepted": false, "score": 3, "last_activity_date": 1567075003, "creation_date": 1567075003, "answer_id": 57708337, "question_id": 47265685, "link": "https://stackoverflow.com/questions/47265685/what-is-the-right-place-to-start-a-service-in-mvvm-architecture-android/57708337#57708337", "title": "What is the right place to start a service in MVVM architecture Android", "body": "<p>In MVVM, ideally, the methods to start a service should be defined in <code>Repository</code> since it has the responsibility to interact with Data Source. <code>ViewModel</code> keeps an instance of <code>Repository</code> and is responsible for calling the <code>Repository</code> methods and updating its own <code>LiveData</code> which could be a member of <code>ViewModel</code>. <code>View</code> keeps an instance of <code>ViewModel</code> and it observes <code>LiveData</code> of <code>ViewModel</code> and makes changes to UI accordingly. Here is some pseudo-code to give you a better picture.</p>\n\n<pre><code>class SampleRepository {\n    fun getInstance(): SampleRepository {\n        // return instance of SampleRepository\n    }\n\n    fun getDataFromService(): LiveData&lt;Type&gt; {\n        // start some service and return LiveData\n    }\n}\n\nclass SampleViewModel {\n    private val sampleRepository = SampleRepository.getInstance()\n    private var sampleLiveData = MutableLiveData&lt;Type&gt;()\n\n    // getter for sampleLiveData\n    fun getSampleLiveData(): LiveData&lt;Type&gt; = sampleLiveData\n\n    fun startService() {\n        sampleLiveData.postValue(sampleRepository.getDataFromService())\n    }\n}\n\nclass SampleView {\n    private var sampleViewModel: SampleViewModel\n\n    // for activities, this SampleMethod is often their onCreate() method\n    fun SampleMethod() {\n        // instantiate sampleViewModel\n        sampleViewModel = ViewModelProviders.of(this).get(SampleViewModel::class.java)\n        // observe LiveData of sampleViewModel\n        sampleViewModel.getSampleLiveData().observe(viewLifecycleOwner, Observer&lt;Type&gt; { newData -&gt;\n            // update UI here using newData\n    }\n}\n\n</code></pre>\n"}], "owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2093, "favorite_count": 6, "answer_count": 2, "score": 12, "last_activity_date": 1567075003, "creation_date": 1510580397, "question_id": 47265685, "link": "https://stackoverflow.com/questions/47265685/what-is-the-right-place-to-start-a-service-in-mvvm-architecture-android", "title": "What is the right place to start a service in MVVM architecture Android", "body": "<p>I just started using <em>MVVM</em> architecture on Android. I have a service which basically fetches some data and updates the UI and this is what I understood from MVVM:</p>\n\n<ul>\n<li>Activity should not know anything about the data and should take care of the views</li>\n<li>ViewModels should not know about activity </li>\n<li>Repository is responsible for getting the data</li>\n</ul>\n\n<p>Now as ViewModels should not know anything about the activity and Activities should not do anything other than handling views, Can anyone please tell where should I start a service?</p>\n"}, {"tags": ["android", "arrays", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 160, "user_id": 3961662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1f9aa9b3acb8eb8d230294e3b7340a?s=128&d=identicon&r=PG", "display_name": "Quentin Menini", "link": "https://stackoverflow.com/users/3961662/quentin-menini"}, "is_accepted": false, "score": 2, "last_activity_date": 1510579398, "creation_date": 1510579398, "answer_id": 47265368, "question_id": 47265260, "link": "https://stackoverflow.com/questions/47265260/parse-2d-array-in-kotlin/47265368#47265368", "title": "Parse 2D Array in Kotlin", "body": "<p>You can iterate in the array like this :</p>\n\n<pre><code>for (strings in squareData) {\n    for (string in strings) {\n        Your code here\n    }\n}\n</code></pre>\n\n<p>The first for iterate through the first dimension so it has string arrays and the second one through the second dimension so it has the string values</p>\n"}, {"tags": [], "owner": {"reputation": 35470, "user_id": 6348498, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0zu4m.jpg?s=128&g=1", "display_name": "Gurwinder Singh", "link": "https://stackoverflow.com/users/6348498/gurwinder-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1510580017, "creation_date": 1510580017, "answer_id": 47265561, "question_id": 47265260, "link": "https://stackoverflow.com/questions/47265260/parse-2d-array-in-kotlin/47265561#47265561", "title": "Parse 2D Array in Kotlin", "body": "<p>You can use regular nested for loop.</p>\n\n<pre><code>for (arr in squareData) {\n    for (s in arr) {\n        println(s)\n    }\n}\n</code></pre>\n\n<p>You can iterate using <code>forEach</code>:</p>\n\n<pre><code>squareData.forEach { it.forEach(::println) }\n</code></pre>\n\n<p>or if you want index position as well, <code>forEachIndexed</code>:</p>\n\n<pre><code>squareData.forEachIndexed { i,it -&gt; println(i); it.forEach(::println) } \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8583580"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1754, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1515361704, "creation_date": 1510579048, "last_edit_date": 1515361704, "question_id": 47265260, "link": "https://stackoverflow.com/questions/47265260/parse-2d-array-in-kotlin", "title": "Parse 2D Array in Kotlin", "body": "<p>I have created a 2D array named squareData as shown below:</p>\n\n<pre><code> private lateinit var squareData: Array&lt;Array&lt;String&gt;&gt;\n\n squareData = Array(3, {Array(3, {\"\"})})\n</code></pre>\n\n<p>Also, I initialized this array with some random values. Now I want to fetch this values one by one. How can I do it using for or forEachIndexed loop?</p>\n"}, {"tags": ["kotlin", "casting", "warnings"], "comments": [{"owner": {"reputation": 851, "user_id": 4103578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mh0zo.png?s=128&g=1", "display_name": "Xavier Bouclet", "link": "https://stackoverflow.com/users/4103578/xavier-bouclet"}, "edited": false, "score": 1, "creation_date": 1510576877, "post_id": 47264517, "comment_id": 81479806, "body": "I guess the warning tells you to handle the cast of Any. With a third if. Consider using when."}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 13, "last_activity_date": 1510577196, "creation_date": 1510577196, "answer_id": 47264703, "question_id": 47264517, "link": "https://stackoverflow.com/questions/47264517/kotlin-warning-conditional-branch-result-of-type-is-implicity-cast-of-any/47264703#47264703", "title": "Kotlin warning: Conditional branch result of type ... is implicity cast of Any?", "body": "<p>The warning is telling you that you've returned different types in your branches, and that the variable you're assigning will be inferred to be their first common supertype, which in this case is <code>Any?</code>. This is not the way you usually use the <code>if-else</code> expression, you usually return the same type from both branches. The IDE is warning you because what you're doing is usually accidental.</p>\n\n<p>If you're going to check the type of the result later for the actual types you're using anyway, you're probably fine with your code.</p>\n\n<p>To remove the warning, you can either suppress the warning with a comment:</p>\n\n<pre><code>@Suppress(\"IMPLICIT_CAST_TO_ANY\")\nval chatObject = ...\n</code></pre>\n\n<p>Or explicitly state that the type that the <code>if-else</code> expression returns is unknown:</p>\n\n<pre><code>val chatObject: Any = ...\n</code></pre>\n"}], "owner": {"reputation": 754, "user_id": 5594467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dgjtd.jpg?s=128&g=1", "display_name": "Le\u015bniakiewicz", "link": "https://stackoverflow.com/users/5594467/le%c5%9bniakiewicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4060, "favorite_count": 0, "accepted_answer_id": 47264703, "answer_count": 1, "score": 11, "last_activity_date": 1553076105, "creation_date": 1510576552, "last_edit_date": 1553076105, "question_id": 47264517, "link": "https://stackoverflow.com/questions/47264517/kotlin-warning-conditional-branch-result-of-type-is-implicity-cast-of-any", "title": "Kotlin warning: Conditional branch result of type ... is implicity cast of Any?", "body": "<p>I have \"Conditional branch result of type ... is implicity cast of Any?\" warning when i try to do something like this:</p>\n\n<pre><code>objects?.forEach {\n\n     val gson = Gson()\n\n     val chatObject = if(it.type == CHAT_TEXT_TYPE) gson.fromJson(it.value, ChatText::class.java)  //WARNING\n                      else gson.fromJson(it.value, ChatProduct::class.java) //WARNING\n\n     //TEST\n     if(chatObject is ChatText) Log.e(\"ChatText: It works!\", chatObject.text)\n     if(chatObject is ChatProduct) Log.e(\"ChatProduct: It works!\", chatObject.name)\n}\n</code></pre>\n\n<p>But finally it works. Is anything wrong with my code? Is it any possibility to remove this warning?</p>\n\n<p>EDIT (as @Xavier Bouclet suggested - warning disappeared)</p>\n\n<pre><code>val chatObject = when (it.type)\n            {\n                CHAT_TEXT_TYPE -&gt;  gson.fromJson(it.value, ChatText::class.java)\n                CHAT_PRODUCT_TYPE -&gt; gson.fromJson(it.value, ChatProduct::class.java)\n                else -&gt; gson.fromJson(it.value, Any::class.java)\n            }\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1614, "user_id": 3609514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/92C38.jpg?s=128&g=1", "display_name": "TheTechWolf", "link": "https://stackoverflow.com/users/3609514/thetechwolf"}, "is_accepted": true, "score": 3, "last_activity_date": 1510606593, "last_edit_date": 1510606593, "creation_date": 1510605868, "answer_id": 47273237, "question_id": 47260998, "link": "https://stackoverflow.com/questions/47260998/why-do-i-get-the-error-java-lang-illegalstateexception-instance-not-initialized/47273237#47273237", "title": "Why do I get the error java.lang.IllegalStateException: instance not initialized?", "body": "<p><strong>onCreate</strong> function in UIApp class is never called and thus an instance of UIApp is never initialized. This is happening because you didn't add UIApp class to AndroidManifest and because of that your app did not realize that you have your custom Application class in a project.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"info.dodata.mirror\"&gt;\n\n    &lt;application\n        &lt;!--Add line bellow to your manifest file and app will work just fine--&gt;\n        android:name=\"ui.UIApp\"\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"&gt;\n\n\n        &lt;activity android:name=\"ui.UIMain\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2653, "favorite_count": 0, "accepted_answer_id": 47273237, "answer_count": 1, "score": -1, "last_activity_date": 1510606593, "creation_date": 1510565474, "last_edit_date": 1510571805, "question_id": 47260998, "link": "https://stackoverflow.com/questions/47260998/why-do-i-get-the-error-java-lang-illegalstateexception-instance-not-initialized", "title": "Why do I get the error java.lang.IllegalStateException: instance not initialized?", "body": "<p>I get the error </p>\n\n<blockquote>\n  <p>java.lang.IllegalStateException: instance not initialized</p>\n</blockquote>\n\n<p>you can test it at <a href=\"https://www.dropbox.com/s/gxeok1fyttsl54u/MyMirror.zip?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/gxeok1fyttsl54u/MyMirror.zip?dl=0</a></p>\n\n<p>It seems that the code <code>operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;)...</code> in UIApp causes the error.</p>\n\n<p>But the code is from a sample code, I hardly don't change, you can see source code at <a href=\"https://github.com/antoniolg/Kotlin-for-Android-Developers/blob/master/app/src/main/java/com/antonioleiva/weatherapp/ui/App.kt\" rel=\"nofollow noreferrer\">https://github.com/antoniolg/Kotlin-for-Android-Developers/blob/master/app/src/main/java/com/antonioleiva/weatherapp/ui/App.kt</a> </p>\n\n<p>and</p>\n\n<p><a href=\"https://github.com/antoniolg/Kotlin-for-Android-Developers/blob/master/app/src/main/java/com/antonioleiva/weatherapp/extensions/DelegatesExtensions.kt\" rel=\"nofollow noreferrer\">https://github.com/antoniolg/Kotlin-for-Android-Developers/blob/master/app/src/main/java/com/antonioleiva/weatherapp/extensions/DelegatesExtensions.kt</a></p>\n\n<p>Why?</p>\n\n<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{info.dodata.mirror/ui.UIMain}: java.lang.IllegalStateException: instance not initialized\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2107)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2132)\nat android.app.ActivityThread.access$700(ActivityThread.java:140)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1238)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:137)\nat android.app.ActivityThread.main(ActivityThread.java:4918)\nat java.lang.reflect.Method.invokeNative(Native Method)\nat java.lang.reflect.Method.invoke(Method.java:511)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)\nat dalvik.system.NativeStart.main(Native Method) Caused by: java.lang.IllegalStateException: instance not initialized\nat ui.UIApp$NotNullSingleValueVar.getValue(UIApp.kt:23)\nat ui.UIApp$Companion.getInstance(UIApp.kt)\nat dal.DBSettingHelper.&lt;init&gt;(DBSettingHelper.kt:9)\nat ui.UIMain.onCreate(UIMain.kt:14)\nat android.app.Activity.performCreate(Activity.java:5185)\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2071)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2132)?\nat android.app.ActivityThread.access$700(ActivityThread.java:140)?\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1238)?\nat android.os.Handler.dispatchMessage(Handler.java:99)?\nat android.os.Looper.loop(Looper.java:137)?\nat android.app.ActivityThread.main(ActivityThread.java:4918)?\nat java.lang.reflect.Method.invokeNative(Native Method)?\nat java.lang.reflect.Method.invoke(Method.java:511)?\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)?\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)?\nat dalvik.system.NativeStart.main(Native Method)?\n</code></pre>\n\n<p><strong>UIMain</strong></p>\n\n<pre><code>package ui\nimport android.os.Bundle\nimport android.support.v7.app.AppCompatActivity\nimport dal.DBSettingHelper\nimport info.dodata.mirror.R\n\n\nclass UIMain : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.layout_main)\n        var ss= DBSettingHelper();\n    }\n\n}\n</code></pre>\n\n<p><strong>DBSettingHelper</strong></p>\n\n<pre><code>package dal\n\nimport android.content.Context\nimport android.database.sqlite.SQLiteDatabase\nimport org.jetbrains.anko.db.*\nimport ui.UIApp\n\nobject DBSettingTable {\n    val TableNAME = \"SettingTable\"\n\n    val _ID = \"_id\"\n    val Name = \"name\"\n    val CreatedDate = \"createdDate\"\n    val Description=\"description\"\n}\n\n\nclass DBSettingHelper(mContext: Context = UIApp.instance) : ManagedSQLiteOpenHelper(\n        mContext,\n        DB_NAME,\n        null,\n        DB_VERSION) {\n\n    companion object {\n        val DB_NAME = \"setting.db\"\n        val DB_VERSION = 1\n        val instance by lazy { DBSettingHelper() }\n    }\n\n    override fun onCreate(db: SQLiteDatabase) {\n        db.createTable( DBSettingTable.TableNAME , true,\n                DBSettingTable._ID to INTEGER + PRIMARY_KEY,\n                DBSettingTable.Name to TEXT,\n                DBSettingTable.CreatedDate to INTEGER,\n                DBSettingTable.Description to TEXT\n        )\n    }\n\n    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {\n        db.dropTable(DBSettingTable.TableNAME, true)\n        onCreate(db)\n    }\n\n}\n</code></pre>\n\n<p><strong>UIApp</strong></p>\n\n<pre><code>package ui\n\nimport android.app.Application\nimport kotlin.reflect.KProperty\n\nclass UIApp : Application() {\n\n    companion object {\n        var instance: UIApp by NotNullSingleValueVar()\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        instance = this\n    }\n\n    class NotNullSingleValueVar&lt;T&gt; {\n\n        private var value: T? = null\n\n        operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T =\n                value ?: throw IllegalStateException(\"${property.name} not initialized\")\n\n        operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) {\n            this.value = if (this.value == null) value\n            else throw IllegalStateException(\"${property.name} already initialized\")\n        }\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 5780, "user_id": 7235049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ZgD2.jpg?s=128&g=1", "display_name": "tahsinRupam", "link": "https://stackoverflow.com/users/7235049/tahsinrupam"}, "edited": false, "score": 0, "creation_date": 1510561860, "post_id": 47259886, "comment_id": 81470566, "body": "Show the full code please."}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 5, "last_activity_date": 1510561996, "creation_date": 1510561996, "answer_id": 47259943, "question_id": 47259886, "link": "https://stackoverflow.com/questions/47259886/kotlin-android-studio-i-try-to-change-the-button-text-but-get-an-exepected-a-va/47259943#47259943", "title": "Kotlin android studio I try to change the button text but get an &quot;exepected a value of type boolean&quot; message", "body": "<p>The <a href=\"https://developer.android.com/reference/android/view/View.OnLongClickListener.html#onLongClick(android.view.View)\" rel=\"noreferrer\"><code>onLongClick</code></a> method in the <code>View.OnLongClickListener</code> interface that you're implementing here via SAM conversion returns a <code>boolean</code> value, signaling whether you've consumed the long click event.</p>\n\n<p>Therefore, you need to return a <code>Boolean</code> from your lambda in Kotlin, for example, like this (the last expression of a lambda is returned):</p>\n\n<pre><code>button11.setOnLongClickListener {\n    button11.text = \"\"\n    true\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 1, "creation_date": 1510565160, "post_id": 47260723, "comment_id": 81472589, "body": "The problem is that the lambda must return a boolean"}], "tags": [], "owner": {"reputation": 935, "user_id": 8822851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tmfBFb3Xhyg/AAAAAAAAAAI/AAAAAAAAAEY/srQLkMO4MnE/photo.jpg?sz=128", "display_name": "arjun shrestha", "link": "https://stackoverflow.com/users/8822851/arjun-shrestha"}, "is_accepted": false, "score": 3, "last_activity_date": 1510566108, "last_edit_date": 1510566108, "creation_date": 1510564705, "answer_id": 47260723, "question_id": 47259886, "link": "https://stackoverflow.com/questions/47259886/kotlin-android-studio-i-try-to-change-the-button-text-but-get-an-exepected-a-va/47260723#47260723", "title": "Kotlin android studio I try to change the button text but get an &quot;exepected a value of type boolean&quot; message", "body": "<p>Try using not null or safe :</p>\n\n<pre><code>button11?.setOnLongClickListener{\n    button?.text=\"\"\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 8053723, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tBZxTPUidQc/AAAAAAAAAAI/AAAAAAAAAEA/-nxDyjw2tzw/photo.jpg?sz=128", "display_name": "avrum", "link": "https://stackoverflow.com/users/8053723/avrum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4257, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1514667423, "creation_date": 1510561725, "last_edit_date": 1510565156, "question_id": 47259886, "link": "https://stackoverflow.com/questions/47259886/kotlin-android-studio-i-try-to-change-the-button-text-but-get-an-exepected-a-va", "title": "Kotlin android studio I try to change the button text but get an &quot;exepected a value of type boolean&quot; message", "body": "<p>Kotlin in Android Studio. I'm trying to change the button text but I'm getting an <strong>\"exepected a value of type boolean\"</strong> message. How can I fix this?</p>\n\n<pre><code>    button11.setOnLongClickListener{\n        button11.text = \"\"\n    }\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1510556013, "last_edit_date": 1592644375, "creation_date": 1510556013, "answer_id": 47258592, "question_id": 47258058, "link": "https://stackoverflow.com/questions/47258058/why-need-the-class-preferencet-be-wrapped-with-object/47258592#47258592", "title": "Why need the class Preference&lt;T&gt; be wrapped with object?", "body": "<blockquote>\n<p>I can use private var zipCode: Long by DelegatesExt.preference(this, ZIP_CODE, DEFAULT_ZIP) to invoke when I use Code A.</p>\n<p>I think Code B is more simple, I can use private val zipCode: Long by Preference(this, ZIP_CODE, DEFAULT_ZIP) to invoke when I use Code B</p>\n</blockquote>\n<p>In the first case you can also import <code>DelegatesExt.*</code> or <code>DelegatesExt.preference</code> instead of <code>DelegatesExt</code> and write <code>by preference</code>.</p>\n<blockquote>\n<p>Why need the class Preference be wrapped with object ?</p>\n</blockquote>\n<p>It doesn't <em>need</em> to be (and I wouldn't do it), that's just the author's preference.</p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 47258592, "answer_count": 1, "score": 0, "last_activity_date": 1510556013, "creation_date": 1510553394, "question_id": 47258058, "link": "https://stackoverflow.com/questions/47258058/why-need-the-class-preferencet-be-wrapped-with-object", "title": "Why need the class Preference&lt;T&gt; be wrapped with object?", "body": "<p>The following Code A is from <a href=\"https://github.com/antoniolg/Kotlin-for-Android-Developers/blob/master/app/src/main/java/com/antonioleiva/weatherapp/extensions/DelegatesExtensions.kt\" rel=\"nofollow noreferrer\">https://github.com/antoniolg/Kotlin-for-Android-Developers/blob/master/app/src/main/java/com/antonioleiva/weatherapp/extensions/DelegatesExtensions.kt</a></p>\n\n<p>I can use <code>private var zipCode: Long by DelegatesExt.preference(this, ZIP_CODE, DEFAULT_ZIP)</code> to invoke when I use Code A.</p>\n\n<p>I don't understand why the author wrap class Preference(...) with object DelegatesExt</p>\n\n<p>I think Code B is more simple, I can use <code>private val zipCode: Long by Preference(this, ZIP_CODE, DEFAULT_ZIP)</code> to invoke when I use Code B</p>\n\n<p>Why need the class Preference be wrapped with object ?</p>\n\n<p><strong>Code A</strong></p>\n\n<pre><code>object DelegatesExt {\n    fun &lt;T&gt; notNullSingleValue() = NotNullSingleValueVar&lt;T&gt;()\n    fun &lt;T&gt; preference(context: Context, name: String,\n            default: T) = Preference(context, name, default)\n}\n\nclass NotNullSingleValueVar&lt;T&gt; {\n\n    private var value: T? = null\n\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T =\n            value ?: throw IllegalStateException(\"${property.name} not initialized\")\n\n    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) {\n        this.value = if (this.value == null) value\n        else throw IllegalStateException(\"${property.name} already initialized\")\n    }\n}\n\nclass Preference&lt;T&gt;(private val context: Context, private val name: String,\n        private val default: T) {\n\n    private val prefs: SharedPreferences by lazy {\n        context.getSharedPreferences(\"default\", Context.MODE_PRIVATE)\n    }\n\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T = findPreference(name, default)\n\n    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) {\n        putPreference(name, value)\n    }\n\n    @Suppress(\"UNCHECKED_CAST\")\n    private fun findPreference(name: String, default: T): T = with(prefs) {\n        val res: Any = when (default) {\n            is Long -&gt; getLong(name, default)\n            is String -&gt; getString(name, default)\n            is Int -&gt; getInt(name, default)\n            is Boolean -&gt; getBoolean(name, default)\n            is Float -&gt; getFloat(name, default)\n            else -&gt; throw IllegalArgumentException(\"This type can be saved into Preferences\")\n        }\n\n        res as T\n    }\n\n    @SuppressLint(\"CommitPrefEdits\")\n    private fun putPreference(name: String, value: T) = with(prefs.edit()) {\n        when (value) {\n            is Long -&gt; putLong(name, value)\n            is String -&gt; putString(name, value)\n            is Int -&gt; putInt(name, value)\n            is Boolean -&gt; putBoolean(name, value)\n            is Float -&gt; putFloat(name, value)\n            else -&gt; throw IllegalArgumentException(\"This type can't be saved into Preferences\")\n        }.apply()\n    }\n}\n</code></pre>\n\n<p><strong>Code B</strong></p>\n\n<pre><code>class NotNullSingleValueVar&lt;T&gt; {\n\n    private var value: T? = null\n\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T =\n            value ?: throw IllegalStateException(\"${property.name} not initialized\")\n\n    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) {\n        this.value = if (this.value == null) value\n        else throw IllegalStateException(\"${property.name} already initialized\")\n    }\n}\n\nclass Preference&lt;T&gt;(private val context: Context, private val name: String,\n        private val default: T) {\n\n    private val prefs: SharedPreferences by lazy {\n        context.getSharedPreferences(\"default\", Context.MODE_PRIVATE)\n    }\n\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T = findPreference(name, default)\n\n    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) {\n        putPreference(name, value)\n    }\n\n    @Suppress(\"UNCHECKED_CAST\")\n    private fun findPreference(name: String, default: T): T = with(prefs) {\n        val res: Any = when (default) {\n            is Long -&gt; getLong(name, default)\n            is String -&gt; getString(name, default)\n            is Int -&gt; getInt(name, default)\n            is Boolean -&gt; getBoolean(name, default)\n            is Float -&gt; getFloat(name, default)\n            else -&gt; throw IllegalArgumentException(\"This type can be saved into Preferences\")\n        }\n\n        res as T\n    }\n\n    @SuppressLint(\"CommitPrefEdits\")\n    private fun putPreference(name: String, value: T) = with(prefs.edit()) {\n        when (value) {\n            is Long -&gt; putLong(name, value)\n            is String -&gt; putString(name, value)\n            is Int -&gt; putInt(name, value)\n            is Boolean -&gt; putBoolean(name, value)\n            is Float -&gt; putFloat(name, value)\n            else -&gt; throw IllegalArgumentException(\"This type can't be saved into Preferences\")\n        }.apply()\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 1348, "user_id": 6217595, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Xlsnf.jpg?s=128&g=1", "display_name": "zihadrizkyef", "link": "https://stackoverflow.com/users/6217595/zihadrizkyef"}, "edited": false, "score": 0, "creation_date": 1510545983, "post_id": 47256653, "comment_id": 81464766, "body": "just say what you want broh"}, {"owner": {"reputation": 1348, "user_id": 6217595, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Xlsnf.jpg?s=128&g=1", "display_name": "zihadrizkyef", "link": "https://stackoverflow.com/users/6217595/zihadrizkyef"}, "edited": false, "score": 0, "creation_date": 1510546092, "post_id": 47256653, "comment_id": 81464787, "body": "Don&#39;t just comparing java and kotlin. What you have to do is learn how to use kotlin..  If you want to learn about visibility in kotlin, then just do what document said. no need to compare it with the decompiled code"}, {"owner": {"reputation": 1348, "user_id": 6217595, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Xlsnf.jpg?s=128&g=1", "display_name": "zihadrizkyef", "link": "https://stackoverflow.com/users/6217595/zihadrizkyef"}, "edited": false, "score": 0, "creation_date": 1510546136, "post_id": 47256653, "comment_id": 81464796, "body": "as long as i use kotlin, i dont find anything wrong with the document. It&#39;s working as what the document said"}, {"owner": {"reputation": 55, "user_id": 8341463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/167df42aaebd2270b8dfa382958f7954?s=128&d=identicon&r=PG&f=1", "display_name": "steven chan", "link": "https://stackoverflow.com/users/8341463/steven-chan"}, "reply_to_user": {"reputation": 1348, "user_id": 6217595, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Xlsnf.jpg?s=128&g=1", "display_name": "zihadrizkyef", "link": "https://stackoverflow.com/users/6217595/zihadrizkyef"}, "edited": false, "score": 0, "creation_date": 1510546599, "post_id": 47256653, "comment_id": 81464883, "body": "@ zihadrizkyef  in Dagger2 i the property be injected must be private, but if i write var human : Human? = null it will fail to build. so  it confused me . otherwise, i won&#39;t compare java and kotlin in this way"}, {"owner": {"reputation": 55, "user_id": 8341463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/167df42aaebd2270b8dfa382958f7954?s=128&d=identicon&r=PG&f=1", "display_name": "steven chan", "link": "https://stackoverflow.com/users/8341463/steven-chan"}, "reply_to_user": {"reputation": 1348, "user_id": 6217595, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Xlsnf.jpg?s=128&g=1", "display_name": "zihadrizkyef", "link": "https://stackoverflow.com/users/6217595/zihadrizkyef"}, "edited": false, "score": 0, "creation_date": 1510546657, "post_id": 47256653, "comment_id": 81464898, "body": "the document say that is was public but actually it was private. it actually was wrong . right?"}, {"owner": {"reputation": 1348, "user_id": 6217595, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Xlsnf.jpg?s=128&g=1", "display_name": "zihadrizkyef", "link": "https://stackoverflow.com/users/6217595/zihadrizkyef"}, "edited": false, "score": 0, "creation_date": 1510547422, "post_id": 47256653, "comment_id": 81465056, "body": "Well sorry about that.. I think the problem is in your converter"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 8341463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/167df42aaebd2270b8dfa382958f7954?s=128&d=identicon&r=PG&f=1", "display_name": "steven chan", "link": "https://stackoverflow.com/users/8341463/steven-chan"}, "edited": false, "score": 0, "creation_date": 1510554555, "post_id": 47257666, "comment_id": 81467182, "body": "yes, you&#39;re right.  the field needs to be public, and <code>lateinit var human: Human</code> is fine . But <code>var human : Human? = null</code> is not fine"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 0, "last_activity_date": 1510551245, "creation_date": 1510551245, "answer_id": 47257666, "question_id": 47256653, "link": "https://stackoverflow.com/questions/47256653/what-did-is-difference-between-java-and-kotlin-about-visibility-modifiers/47257666#47257666", "title": "what did is difference between java and kotlin about visibility modifiers?", "body": "<blockquote>\n  <p>in Dagger2 i the property be injected must be private</p>\n</blockquote>\n\n<p>Are you sure? AFAIK the field needs to be <code>public</code>, and <code>lateinit var human: Human</code> should be fine.</p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 8341463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/167df42aaebd2270b8dfa382958f7954?s=128&d=identicon&r=PG&f=1", "display_name": "steven chan", "link": "https://stackoverflow.com/users/8341463/steven-chan"}, "is_accepted": true, "score": 0, "last_activity_date": 1510557979, "creation_date": 1510557979, "answer_id": 47259041, "question_id": 47256653, "link": "https://stackoverflow.com/questions/47256653/what-did-is-difference-between-java-and-kotlin-about-visibility-modifiers/47259041#47259041", "title": "what did is difference between java and kotlin about visibility modifiers?", "body": "<p>I slove my problem by myself. </p>\n\n<p>Actually , what kotlin's public mean is private + getter and setter , private is jsut private has no getter and setter.  The official document didn't explain that clearly.</p>\n\n<p>So , it add some explain at the chapter <code>Calling Kotlin from Java</code>  it means  if you want your properties is public , you can use \n<code>@JvmField</code> or \n<code>lateinit var</code></p>\n\n<p>It's my fault , i didn't  reading the document carefullly</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1510561565, "creation_date": 1510561565, "answer_id": 47259857, "question_id": 47256653, "link": "https://stackoverflow.com/questions/47256653/what-did-is-difference-between-java-and-kotlin-about-visibility-modifiers/47259857#47259857", "title": "what did is difference between java and kotlin about visibility modifiers?", "body": "<ol>\n<li><p>\"The default visibility is <code>public</code>\" just means that if you don't specify visibility, it's the same as specifying <code>public</code>.</p></li>\n<li><p>Property corresponds to getter and setter methods (<code>getHuman()</code> and <code>setHuman()</code>) in decompiled code, not really to the field <code>human</code>. </p></li>\n<li><p>The documentation talking about visibility <em>from Kotlin</em>, which isn't the same as visibility according to JVM (and can't be, because JVM doesn't have <code>internal</code> visibility). JVM visibility is just implementation details (so far as this documentation is concerned).</p></li>\n</ol>\n\n<p>From 2 and 3 together, the cited documentation says absolutely nothing about even existence of the backing field, never mind its visibility, which is what Dagger cares about. Instead, it's documented in <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html</a>:</p>\n\n<ol>\n<li><p>In the first section, \"Properties\":</p>\n\n<blockquote>\n  <p>A <strong>private</strong> field, with the same name as the property name (only for properties with backing fields).</p>\n</blockquote></li>\n<li><p>In \"Instance fields\":</p>\n\n<blockquote>\n  <p>If you need to expose a Kotlin property as a field in Java, you need to annotate it with the @JvmField annotation. <strong>The field will have the same visibility as the underlying property.</strong></p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Late-Initialized properties are also exposed as fields. The visibility of the field will be <strong>the same as the visibility of lateinit property setter</strong>.</p>\n</blockquote></li>\n</ol>\n"}], "owner": {"reputation": 55, "user_id": 8341463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/167df42aaebd2270b8dfa382958f7954?s=128&d=identicon&r=PG&f=1", "display_name": "steven chan", "link": "https://stackoverflow.com/users/8341463/steven-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 47259041, "answer_count": 3, "score": -3, "last_activity_date": 1521513262, "creation_date": 1510543460, "last_edit_date": 1521513262, "question_id": 47256653, "link": "https://stackoverflow.com/questions/47256653/what-did-is-difference-between-java-and-kotlin-about-visibility-modifiers", "title": "what did is difference between java and kotlin about visibility modifiers?", "body": "<p><a href=\"https://i.stack.imgur.com/QJEDP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QJEDP.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is what the official document says. But when I do something like this:</p>\n\n<pre><code>var human : Human? = null\n</code></pre>\n\n<p>and decompile it into java code, I find it actually was</p>\n\n<pre><code>@Nullable\nprivate Human human;\n</code></pre>\n\n<p>and it's no use to write this</p>\n\n<pre><code>public var human : Human? = null\n</code></pre>\n\n<p>but when I write this:</p>\n\n<pre><code>lateinit var human : Human\n</code></pre>\n\n<p>it become public this time</p>\n\n<pre><code>@NotNull\npublic Human human;\n</code></pre>\n\n<p>it was a big problem when I use <code>Dagger2</code></p>\n\n<p>in Dagger2  the property be injected must be public, but if i write <code>var human : Human? = null</code>\nit will fail to build.</p>\n"}, {"tags": ["functional-programming", "kotlin", "tail-recursion", "tail-call-optimization"], "comments": [{"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1510539156, "post_id": 47255833, "comment_id": 81463221, "body": "The accepted answer to the question you linked specifically lists the version where the + is outside as an example of a function that isn&#39;t tail recursive. Look at the version with the accumulator to see what a tail recursive version looks like."}, {"owner": {"reputation": 3, "user_id": 7394603, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RSsMBUfSZJQ/AAAAAAAAAAI/AAAAAAAAGcg/zTFcdB4lkO8/photo.jpg?sz=128", "display_name": "Gabryel Monteiro", "link": "https://stackoverflow.com/users/7394603/gabryel-monteiro"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1510547927, "post_id": 47255833, "comment_id": 81465152, "body": "@sepp2k Oh, sorry, I understood now my error. Strange, as it seems I alreasy saw some languages(probably haskell?) that had some addition on a return as tail call recusrions."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7394603, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RSsMBUfSZJQ/AAAAAAAAAAI/AAAAAAAAGcg/zTFcdB4lkO8/photo.jpg?sz=128", "display_name": "Gabryel Monteiro", "link": "https://stackoverflow.com/users/7394603/gabryel-monteiro"}, "edited": false, "score": 0, "creation_date": 1510548259, "post_id": 47255952, "comment_id": 81465239, "body": "Good explanation, now it makes a lot more sense to me. I just am a little confused, because I think I already saw functions on some language considering additions on return as tail calls. But I can be wrong too, as it is my first time using tail-call recursion."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 3, "user_id": 7394603, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RSsMBUfSZJQ/AAAAAAAAAAI/AAAAAAAAGcg/zTFcdB4lkO8/photo.jpg?sz=128", "display_name": "Gabryel Monteiro", "link": "https://stackoverflow.com/users/7394603/gabryel-monteiro"}, "edited": false, "score": 0, "creation_date": 1510562779, "post_id": 47255952, "comment_id": 81471068, "body": "&quot;I think I already saw functions on some language considering additions on return as tail calls.&quot; \u2013 Yes, the additions <i>are</i> the tail calls, that&#39;s precisely the problem! The tail call is to <code>+</code>, the recursive call is to <code>debuffPhase</code>, ergo, <code>debuffPhase</code> is recursive (because it calls itself), but not tail-recursive (because it doesn&#39;t tail call itself)."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1510537317, "last_edit_date": 1510537317, "creation_date": 1510537012, "answer_id": 47255952, "question_id": 47255833, "link": "https://stackoverflow.com/questions/47255833/tail-rec-kotlin-list/47255952#47255952", "title": "tail rec kotlin list", "body": "<p>None of your examples are tail-recursive.</p>\n\n<p>A tail call is the last call in a subroutine. A recursive call is a call of a subroutine to itself. A tail-recursive call is a tail call of a subroutine to itself.</p>\n\n<p>In all of your examples, the tail call is to <code>+</code>, not to the subroutine. So, all of those are recursive (because they call themselves), and all of those have tail calls (because every subroutine always has a \"last call\"), but none of them is tail-recursive (because the recursive call isn't the last call).</p>\n\n<p>Infix notation can sometimes obscure what the tail call is, it is easier to see when you write every operation in prefix form or as a method call:</p>\n\n<pre><code>return plus(turns, debuff(debuffsForNextThreshold()).debuffPhase())\n// or\nreturn turns.plus(debuff(debuffsForNextThreshold()).debuffPhase())\n</code></pre>\n\n<p>Now it becomes much easier to see that the call to <code>debuffPhase</code> is not in tail position, but rather it is the call to <code>plus</code> (i.e. <code>+</code>) which is in tail position. If Kotlin had general tail calls, then <em>that</em> call to <code>plus</code>  would indeed be eliminated, but AFAIK, Kotlin only has tail-recursion (like Scala), so it won't.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7394603, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RSsMBUfSZJQ/AAAAAAAAAAI/AAAAAAAAGcg/zTFcdB4lkO8/photo.jpg?sz=128", "display_name": "Gabryel Monteiro", "link": "https://stackoverflow.com/users/7394603/gabryel-monteiro"}, "edited": false, "score": 0, "creation_date": 1510547784, "post_id": 47256037, "comment_id": 81465113, "body": "Oh, thank you, I didn&#39;t know this CPS technique, it did help me quite a bit converting my answers. Although it seems I committed an error on conversion somewhere, it is closer now than before to being a true tail call function."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1510565527, "post_id": 47256037, "comment_id": 81472829, "body": "That&#39;s not CPS, if you look at the definition. That would be <code>fun &lt;T&gt; fac2(n: Int, k: Int =&gt; T)</code>, and you need CPS versions of <code>&lt;=</code>, <code>-1</code> and <code>*</code>."}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1510566243, "post_id": 47256037, "comment_id": 81473275, "body": "@AlexeyRomanov Ok yes, my terminology is wrong. This is just using an accumulator. A proper CPS transform would look like <code>fun fac2(n: Int, k: (Int) -&gt; Int = { it }): Int = if (n &lt;= 1) k(1) else fac2(n - 1) { k(n * it) }</code>."}], "tags": [], "owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "is_accepted": false, "score": 0, "last_activity_date": 1510537825, "creation_date": 1510537825, "answer_id": 47256037, "question_id": 47255833, "link": "https://stackoverflow.com/questions/47255833/tail-rec-kotlin-list/47256037#47256037", "title": "tail rec kotlin list", "body": "<p>Without giving away an answer to your puzzle, here's a non-tail-recursive function.</p>\n\n<pre><code>fun fac(n: Int): Int =\n    if (n &lt;= 1) 1 else n * fac(n - 1)\n</code></pre>\n\n<p>It is not tail recursive because the recursive call is not in a tail position, as noted by J\u00f6rg's answer.</p>\n\n<p>It can be transformed into a tail-recursive function using <a href=\"https://en.wikipedia.org/wiki/Continuation-passing_style#Tail_calls\" rel=\"nofollow noreferrer\">CPS</a>,</p>\n\n<pre><code>tailrec fun fac2(n: Int, k: Int = 1): Int =\n    if (n &lt;= 1) k else fac2(n - 1, n * k)\n</code></pre>\n\n<p>although a better interface would likely hide the continuation in a private helper function.</p>\n\n<pre><code>fun fac3(n: Int): Int {\n    tailrec fun fac_continue(n: Int, k: Int): Int =\n        if (n &lt;= 1) k else fac_continue(n - 1, n * k)\n    return fac_continue(n, 1)\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7394603, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RSsMBUfSZJQ/AAAAAAAAAAI/AAAAAAAAGcg/zTFcdB4lkO8/photo.jpg?sz=128", "display_name": "Gabryel Monteiro", "link": "https://stackoverflow.com/users/7394603/gabryel-monteiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 47255952, "answer_count": 2, "score": 0, "last_activity_date": 1510537825, "creation_date": 1510535858, "question_id": 47255833, "link": "https://stackoverflow.com/questions/47255833/tail-rec-kotlin-list", "title": "tail rec kotlin list", "body": "<p>I'm trying to do some operations that would cause a StackOverflow in Kotlin just now.</p>\n\n<p>Knowing that, I remembered that Kotlin has support for <code>tailrec</code> functions, so I tried to do:</p>\n\n<pre><code>private tailrec fun Turn.debuffPhase(): List&lt;Turn&gt; {\n    val turns = listOf(this)\n    if (facts.debuff == 0 || knight.damage == 0) {\n        return turns\n    }\n\n    // Recursively find all possible thresholds of debuffing\n    return turns + debuff(debuffsForNextThreshold()).debuffPhase()\n}\n</code></pre>\n\n<p>Upon my surprise that IDEA didn't recognize it as a <code>tailrec</code>, I tried to unmake it a extension function and make it a normal function:</p>\n\n<pre><code>private tailrec fun debuffPhase(turn: Turn): List&lt;Turn&gt; {\n    val turns = listOf(turn)\n    if (turn.facts.debuff == 0 || turn.knight.damage == 0) {\n        return turns\n    }\n\n    // Recursively find all possible thresholds of debuffing\n    val newTurn = turn.debuff(turn.debuffsForNextThreshold())\n    return turns + debuffPhase(newTurn)\n}\n</code></pre>\n\n<p>Even so it isn't accepted. The important isn't that the last function call is to the same function? I know that the <code>+</code> is a sign to the <code>List</code> <code>plus</code> function, but should it make a difference? All the examples I see on the internet for tail call for another languages allow those kind of <a href=\"https://stackoverflow.com/questions/33923/what-is-tail-recursion\">actions</a>.</p>\n\n<p>I tried to do that with <code>Int</code> too, that seemed to be something more commonly used than addition to lists, but had the same result:</p>\n\n<pre><code>private tailrec fun discoverBuffsNeeded(dragon: RPGChar): Int {\n    val buffedDragon = dragon.buff(buff)\n    if (dragon.turnsToKill(initKnight) &lt; 1 + buffedDragon.turnsToKill(initKnight)) {\n        return 0\n    }\n\n    return 1 + discoverBuffsNeeded(buffedDragon)\n}\n</code></pre>\n\n<p>Shouldn't all those implementations allow for tail call? I thought of some other ways to solve that(Like passing the list as a <code>MutableList</code> on the parameters too), but when possible I try to avoid sending collections to be changed inside the function and this seems a case that this should be possible.  </p>\n\n<p>PS: About the question program, I'm implementing a solution to this <a href=\"https://code.google.com/codejam/contest/5304486/dashboard#s=p2&amp;a=2\" rel=\"nofollow noreferrer\">problem</a>.</p>\n"}, {"tags": ["kotlin", "anko"], "answers": [{"tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": true, "score": 1, "last_activity_date": 1510572059, "creation_date": 1510572059, "answer_id": 47263124, "question_id": 47255468, "link": "https://stackoverflow.com/questions/47255468/why-is-createview-never-called/47263124#47263124", "title": "Why is createView never called?", "body": "<p>I found my problem,  it had to do with my subView being defined as a subclass of View/ViewGroup, but not really implementing any of the methods.</p>\n\n<p>As it turns out that was not really the right direction.  The solution is based on a comment on this <a href=\"https://github.com/Kotlin/anko/issues/267\" rel=\"nofollow noreferrer\">issue</a></p>\n\n<p>Here are some of the key parts of the solution,  I also created a <a href=\"https://gist.github.com/nPn-/e6145f830bcea70ad33d13d1e1edccb7\" rel=\"nofollow noreferrer\">Gist</a> with the full code.</p>\n\n<p>The extension function,  creates an instance of the \"SubView\" class and then calls the <code>createView()</code> method in the <code>ankoView()</code> method.  It also passes the created instance into the closure that is passed to the extension function, which is key as it allows access to the widgets contained within the view.</p>\n\n<pre><code>inline fun ViewManager.mainContentView(theme: Int = 0) = mainContentView(theme) {}\n\ninline fun ViewManager.mainContentView(theme: Int = 0, init: View.(mainContentView: MainContentView) -&gt; Unit): View {\n    val mainContentView = MainContentView()\n    return ankoView({ mainContentView.createView(AnkoContext.create(it)) }, theme, { init(mainContentView)} )\n}\n</code></pre>\n\n<p>The \"content view\" creates the layout and holds a reference to the widgets.</p>\n\n<pre><code>class MainContentView :  AnkoComponent&lt;Context&gt; {\n\n    lateinit var textBox: EditText\n    lateinit var button: Button\n    lateinit var clickCount: TextView\n\n    override fun createView(ui: AnkoContext&lt;Context&gt;) = with(ui) {\n        verticalLayout {\n            button = themedButton {\n                text = \"ok\"\n            }\n            textBox = themedEditText {\n                hint = \"hi\"\n            }\n            clickCount = themedTextView {\n                text = \"0\"\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>In the main view I have fields to refer to the widgets in the \"subView\" which I then initialize in the closure passed to the mainContentView instance.</p>\n\n<pre><code>lateinit var textBox: EditText\nlateinit var button: Button\nlateinit var clickCount: TextView\nprivate lateinit var mainMenu: Menu\nlateinit var settingItem: MenuItem\nlateinit var otherItem: MenuItem\nprivate lateinit var floatingActionButton: FloatingActionButton\n\n\noverride fun createView(ui: AnkoContext&lt;MainActivity&gt;) = with(ui) {\n    coordinatorLayout {\n        verticalLayout {\n            themedAppBarLayout {\n                themedToolbar(theme = R.style.Base_ThemeOverlay_AppCompat_Dark_ActionBar) {\n                    title = resources.getString(R.string.app_name)\n                    popupTheme = R.style.AppTheme\n                    mainMenu = menu\n                    settingItem = mainMenu.add(\"My Settings\")\n                    otherItem = mainMenu.add(\"My Other\")\n                }\n            }.lparams(width = matchParent, height = wrapContent)\n            mainContentView {\n                button = it.button\n                textBox = it.textBox\n                clickCount = it.clickCount\n            }.lparams(width = matchParent, height = wrapContent)\n        }.lparams(width = matchParent, height = wrapContent)\n        floatingActionButton = floatingActionButton {\n            imageResource = android.R.drawable.ic_dialog_email\n        }.lparams {\n            margin = dip(10)\n            gravity = Gravity.BOTTOM or Gravity.END\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 47263124, "answer_count": 1, "score": 0, "last_activity_date": 1510572059, "creation_date": 1510532131, "question_id": 47255468, "link": "https://stackoverflow.com/questions/47255468/why-is-createview-never-called", "title": "Why is createView never called?", "body": "<p>My ultimate goal is to be able move my content widgets into a custom view and instantiate that view in an Anko layout in my MainView.  I thought I had this working at one point, but I can't reproduce it.</p>\n\n<p>When I run with the following code, the content in the <code>createView</code> of the MainContextView is never displayed and I never see the message \"creating main context view\", but I <strong>do</strong> see the message \"main content view\".</p>\n\n<p>I start by creating a MainContextView</p>\n\n<pre><code>class MainContextView(context: Context) : ViewGroup(context), AnkoComponent&lt;Context&gt; {\n\n    lateinit var textBox: EditText\n    lateinit var button: Button\n    lateinit var clickCount: TextView\n\n    override fun createView(ui: AnkoContext&lt;Context&gt;) = with(ui) {\n        println(\"creating main context view\")\n        verticalLayout {\n            themedEditText {\n                hint = \"hi from main context\"\n            }\n            button = themedButton {\n                text = \"ok\"\n            }\n            textBox = themedEditText {\n                hint = \"hi\"\n            }\n            clickCount = themedTextView {\n               text = \"0\"\n            }\n        }\n    }\n\n    override fun onLayout(p0: Boolean, p1: Int, p2: Int, p3: Int, p4: Int) {\n        println(\"onLayout called\")\n    }\n\n}\n</code></pre>\n\n<p>and call it from my main view</p>\n\n<pre><code>class MainView : AnkoComponent&lt;MainActivity&gt; {\n\n    lateinit var mainCtx: MainContextView\n    lateinit var textBox: EditText\n    lateinit var button: Button\n    lateinit var clickCount: TextView\n    lateinit var mainMenu: Menu\n    lateinit var settingItem: MenuItem\n    lateinit var otherItem: MenuItem\n    lateinit var floatingActionButton: FloatingActionButton\n\n    override fun createView(ui: AnkoContext&lt;MainActivity&gt;) = with(ui) {\n        coordinatorLayout {\n            verticalLayout {\n                themedAppBarLayout {\n                    themedToolbar(theme = R.style.Base_ThemeOverlay_AppCompat_Dark_ActionBar) {\n                        title = resources.getString(R.string.app_name)\n                        popupTheme = R.style.AppTheme\n                        mainMenu = menu\n                        settingItem = mainMenu.add(\"My Settings\")\n                        otherItem = mainMenu.add(\"My Other\")\n                    }\n                }.lparams(width = matchParent, height = wrapContent)\n\n                // ************************************\n                // HERE IS THE CALL TO THE CONTEXT VIEW\n                mainCtx = mainContextView { println(\"main content view \") }\n               // *************************************\n\n            }.lparams(width = matchParent, height = wrapContent) {\n            }\n            floatingActionButton = floatingActionButton {\n                imageResource = android.R.drawable.ic_dialog_email\n            }.lparams {\n                margin = dip(10)\n                gravity = Gravity.BOTTOM or Gravity.END\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The MainView is called set as the content view from the  MainActivity</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    private lateinit var presenter: MainPresenter\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val mainView = MainView()\n        mainView.setContentView(this)\n        presenter = MainPresenter(mainView)\n\n    }\n\n}\n</code></pre>\n\n<p>And finally the ViewManger extensions</p>\n\n<pre><code>inline fun ViewManager.mainContextView(theme: Int = 0) = mainContextView(theme) {}\n\ninline fun ViewManager.mainContextView(theme: Int = 0, init: MainContextView.() -&gt; Unit): MainContextView {\n    return ankoView({ MainContextView(it) }, theme, init)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 2474, "user_id": 2408033, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/070f1a660aa2780e2be85075ca816656?s=128&d=identicon&r=PG", "display_name": "Ben987654", "link": "https://stackoverflow.com/users/2408033/ben987654"}, "is_accepted": false, "score": 0, "last_activity_date": 1510534051, "last_edit_date": 1592644375, "creation_date": 1510530405, "answer_id": 47255291, "question_id": 47254944, "link": "https://stackoverflow.com/questions/47254944/android-using-generics-to-have-1-rxjava-retrofit-call-returning-various-types/47255291#47255291", "title": "Android - Using generics to have 1 RxJava retrofit call returning various types using the same interface", "body": "<p>So I was able to come up with the below which is a lot better than what I had before.  I still can't figure out a way around the interface so there's a little duplication for each API in each xxxRepository class but a lot less.</p>\n<pre><code>interface QuadrigaService {\n    @GET(&quot;v2/ticker&quot;)\n    fun getCurrentTradingInfo(@Query(&quot;book&quot;) query: String): Observable&lt;CurrentTradingInfo&gt;\n}\n</code></pre>\n<hr />\n<pre><code>class QuadrigaRepository(private val service: QuadrigaService) : BaseExchangeRepository() {\n    override fun feedType(): String {\n        return CryptoPairs.QUADRIGA_BTC_CAD.exchange\n    }\n\n    override fun startFeed(tickers: List&lt;CryptoPairs&gt;, presenterCallback: NetworkCompletionCallback, networkDataUpdate: NetworkDataUpdate) {\n        clearDisposables()\n\n        tickers.forEach { ticker -&gt;\n            startFeed(service.getCurrentTradingInfo(ticker.ticker),\n                    ticker, presenterCallback, networkDataUpdate)\n        }\n    }\n}\n</code></pre>\n<hr />\n<p>And the base class using generics</p>\n<hr />\n<pre><code>abstract class BaseExchangeRepository : Exchange {\n\n    var disposables: CompositeDisposable = CompositeDisposable()\n\n    fun clearDisposables() {\n        if (disposables.size() != 0) {\n            disposables.clear()\n        }\n    }\n\n    fun &lt;T&gt; startFeed(observable: Observable&lt;T&gt;, ticker: CryptoPairs, presenterCallback: NetworkCompletionCallback, networkDataUpdate: NetworkDataUpdate) {\n        val disposable = observable.observeOn(AndroidSchedulers.mainThread())\n                .repeatWhen { result -&gt; result.delay(10, TimeUnit.SECONDS) }\n                .subscribeOn(Schedulers.io())\n                .subscribe({ result -&gt;\n                    result as NormalizedTickerData\n\n                    Log.d(&quot;Result&quot;, ticker.toString() + &quot;last price is ${result.lastPrice()}&quot;)\n\n                    val tradingInfo = TradingInfo(result.lastPrice(), result.timeStamp())\n                    networkDataUpdate.updateData(ticker, tradingInfo)\n                    presenterCallback.updateUi(ticker)\n\n                }, { error -&gt;\n                    error.printStackTrace()\n                })\n\n        disposables.add(disposable)\n    }\n\n    override fun stopFeed() {\n        disposables.clear()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15573, "user_id": 397786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8550f0386287de4073e022c401b9d4aa?s=128&d=identicon&r=PG", "display_name": "Tassos Bassoukos", "link": "https://stackoverflow.com/users/397786/tassos-bassoukos"}, "is_accepted": false, "score": 0, "last_activity_date": 1510692288, "creation_date": 1510692288, "answer_id": 47294859, "question_id": 47254944, "link": "https://stackoverflow.com/questions/47254944/android-using-generics-to-have-1-rxjava-retrofit-call-returning-various-types/47294859#47294859", "title": "Android - Using generics to have 1 RxJava retrofit call returning various types using the same interface", "body": "<p>I'd suggest using <code>compose()</code>:</p>\n\n<pre><code> val disposable = service.getCurrentTradingInfo(ticker.ticker)\n                         .compose(displayOnTicker(ticker))\n                         .subscribe();\n</code></pre>\n\n<p>Then just in your <code>displayOnTicker(Source)</code> (apologies for the Java-isms):</p>\n\n<pre><code> return source -&gt; source\n                .observeOn(AndroidSchedulers.mainThread())\n                .repeatWhen { result -&gt; result.delay(10, TimeUnit.SECONDS) }\n                .retryWhen { error -&gt; error.delay(10, TimeUnit.SECONDS) }\n                .subscribeOn(Schedulers.io())\n                .doOnNext({ result -&gt;\n                    val tradingInfo = TradingInfo(result.lastPrice(), result.timeStamp())\n                    networkDataUpdate.updateData(ticker, tradingInfo)\n                    callback.updateUi(ticker)\n                })\n                // add .doOnError / .onErrorResumeNext as desired\n                ;\n</code></pre>\n\n<p>This allows you to </p>\n\n<ul>\n<li>be completely independent from a class hierarchy</li>\n<li>reuse the same displayOnTicker in other location</li>\n<li>maybe place the displayOnTicker in a mixin?</li>\n</ul>\n"}], "owner": {"reputation": 2474, "user_id": 2408033, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/070f1a660aa2780e2be85075ca816656?s=128&d=identicon&r=PG", "display_name": "Ben987654", "link": "https://stackoverflow.com/users/2408033/ben987654"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1105, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510692288, "creation_date": 1510527429, "question_id": 47254944, "link": "https://stackoverflow.com/questions/47254944/android-using-generics-to-have-1-rxjava-retrofit-call-returning-various-types", "title": "Android - Using generics to have 1 RxJava retrofit call returning various types using the same interface", "body": "<p>I'm playing around with Generics for the first time to clean up some repeated code I have around retrofit calls.</p>\n\n<p>I was able to make a generic retrofit adapter, so my providers didn't have to each have a unique creator, which was really awesome and exciting.</p>\n\n<pre><code>private fun &lt;T&gt; create(service: Class&lt;T&gt;, baseUrl: String): T {\n        val retrofit = Retrofit.Builder()\n                .client(client)\n                .addConverterFactory(MoshiConverterFactory.create())\n                .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n                .baseUrl(baseUrl)\n                .build()\n\n        return retrofit.create(service)\n    }\n</code></pre>\n\n<p>Now I'm trying to do a generic network call, but I'm not able to figure it out, and wondering if it's even possible given how Retrofit works?</p>\n\n<p>I have 5 services like below right now, all hitting different APIs.  Each one has a different end point, but all accept 1 parameter and return their object which is slightly different for each API call.  </p>\n\n<pre><code>interface ServiceA {\n    @GET(\"v2/ticker\")\n    fun getCurrentTradingInfo(@Query(\"book\") orderBook: String): Observable&lt;CurrentTradingInfo&gt;\n}\n</code></pre>\n\n<hr>\n\n<p>All the response objects implement an interface to normalize the response data so I can display it later</p>\n\n<hr>\n\n<pre><code>data class CurrentTradingInfo(val mid: String,\n                              val bid: String,\n                              val ask: String,\n                              val last_price: String,\n                              val low: String,\n                              val high: String,\n                              val volume: String,\n                              val timestamp: String) : normalizedData {\n\n    override fun lastPrice(): String {\n        return last_price\n    }\n\n    override fun timeStamp(): String {\n        return timestamp\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Currently, I have a network call for each service like below</p>\n\n<pre><code> val disposable = service.getCurrentTradingInfo(ticker.ticker)\n                    .observeOn(AndroidSchedulers.mainThread())\n                    .repeatWhen { result -&gt; result.delay(10, TimeUnit.SECONDS) }\n                    .retryWhen { error -&gt; error.delay(10, TimeUnit.SECONDS) }\n                    .subscribeOn(Schedulers.io())\n                    .subscribe({ result -&gt;\n\n                        val tradingInfo = TradingInfo(result.lastPrice(), result.timeStamp())\n                        networkDataUpdate.updateData(ticker, tradingInfo)\n                        callback.updateUi(ticker)\n\n                    }, { error -&gt;\n                        error.printStackTrace()\n                    })\n</code></pre>\n\n<p>From my little knowledge of generics, it seems like I should be able to pass in a generic service and handle as many different API ends points using this one RxJava call?  I don't know how to access each services getCurrentTradingInfo method though, and from what I do read, I'm doubting if it's possible using retrofit interfaces? </p>\n\n<p>I'm not necessarily looking for a complete answer if it's possible (although an explanation would be nice) but I'm wondering if it's even possible to do in this specific scenario?  I don't want to keep wasting my time if it's not even possible.</p>\n"}, {"tags": ["android", "kotlin", "android-architecture-components", "android-livedata"], "answers": [{"comments": [{"owner": {"reputation": 2225, "user_id": 2517849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCGSi.jpg?s=128&g=1", "display_name": "Naveed", "link": "https://stackoverflow.com/users/2517849/naveed"}, "edited": false, "score": 0, "creation_date": 1510521275, "post_id": 47253805, "comment_id": 81458450, "body": "Can you provide a working example?  I have already tried the switchMap it needs to return live data however map satisfies my use case since I only need to transform the result to a string and not return as part of transformation."}, {"owner": {"reputation": 385, "user_id": 8171551, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yzkLPTU0gLY/AAAAAAAAAAI/AAAAAAAAbGk/oew5fgcyffY/photo.jpg?sz=128", "display_name": "imtoori", "link": "https://stackoverflow.com/users/8171551/imtoori"}, "reply_to_user": {"reputation": 2225, "user_id": 2517849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCGSi.jpg?s=128&g=1", "display_name": "Naveed", "link": "https://stackoverflow.com/users/2517849/naveed"}, "edited": false, "score": 1, "creation_date": 1510521406, "post_id": 47253805, "comment_id": 81458502, "body": "Ah, ok. But I don&#39;t understand why you return LiveData from repos if you don&#39;t use them directly as LiveData. I would return just a string and so the logic would be simpler in the ViewModel and you can just set the value in the ViewModel triggering the observer in the Activity/Fragment"}, {"owner": {"reputation": 2225, "user_id": 2517849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCGSi.jpg?s=128&g=1", "display_name": "Naveed", "link": "https://stackoverflow.com/users/2517849/naveed"}, "edited": false, "score": 0, "creation_date": 1510521585, "post_id": 47253805, "comment_id": 81458555, "body": "It is a specific use case.  Sometimes the data from repos doesn&#39;t directly map to you UI thats where I use the ViewModel to transform it so it matches the UI.  I&#39;m following the MVVM architecture as described here: <a href=\"https://proandroiddev.com/mvvm-architecture-viewmodel-and-livedata-part-1-604f50cda1\" rel=\"nofollow noreferrer\">proandroiddev.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 385, "user_id": 8171551, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yzkLPTU0gLY/AAAAAAAAAAI/AAAAAAAAbGk/oew5fgcyffY/photo.jpg?sz=128", "display_name": "imtoori", "link": "https://stackoverflow.com/users/8171551/imtoori"}, "is_accepted": false, "score": 0, "last_activity_date": 1510519769, "creation_date": 1510519769, "answer_id": 47253805, "question_id": 47253505, "link": "https://stackoverflow.com/questions/47253505/how-to-chain-transformations-in-android-when-using-live-data/47253805#47253805", "title": "How to chain transformations in Android when using live data?", "body": "<p>I would try using switchMap instead of map:</p>\n\n<blockquote>\n  <p>Similar to map(), applies a function to the value stored in the LiveData object and unwraps and dispatches the result downstream. The function passed to switchMap() must return a LiveData object.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 482, "user_id": 512011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0VOQ.png?s=128&g=1", "display_name": "netpork", "link": "https://stackoverflow.com/users/512011/netpork"}, "edited": false, "score": 3, "creation_date": 1533651145, "post_id": 47517158, "comment_id": 90418415, "body": "documentation link is broken"}], "tags": [], "owner": {"reputation": 155, "user_id": 5382205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33155529179b9cbfa4d65cd6110b8aad?s=128&d=identicon&r=PG", "display_name": "Ben Lewis", "link": "https://stackoverflow.com/users/5382205/ben-lewis"}, "is_accepted": false, "score": -1, "last_activity_date": 1511826883, "last_edit_date": 1511826883, "creation_date": 1511805819, "answer_id": 47517158, "question_id": 47253505, "link": "https://stackoverflow.com/questions/47253505/how-to-chain-transformations-in-android-when-using-live-data/47517158#47517158", "title": "How to chain transformations in Android when using live data?", "body": "<p>You can transform the data by using <code>switchmap</code>. Here's an example <a href=\"https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/ui/repo/RepoViewModel.java\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2961, "user_id": 4140069, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007399873093/picture?type=large", "display_name": "amlwin", "link": "https://stackoverflow.com/users/4140069/amlwin"}, "edited": false, "score": 1, "creation_date": 1532595819, "post_id": 47762647, "comment_id": 90037611, "body": "How can achieve apiRequest that is base on observing 2 variable (eg. userId and apiKey). However <code>Transformations.map</code> can handle only 1 variable. Please give me some suggestion, to crossover this situation"}], "tags": [], "owner": {"reputation": 2225, "user_id": 2517849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCGSi.jpg?s=128&g=1", "display_name": "Naveed", "link": "https://stackoverflow.com/users/2517849/naveed"}, "is_accepted": true, "score": 5, "last_activity_date": 1522166378, "last_edit_date": 1522166378, "creation_date": 1513032205, "answer_id": 47762647, "question_id": 47253505, "link": "https://stackoverflow.com/questions/47253505/how-to-chain-transformations-in-android-when-using-live-data/47762647#47762647", "title": "How to chain transformations in Android when using live data?", "body": "<p>I used <a href=\"https://developer.android.com/reference/android/arch/lifecycle/MediatorLiveData.html\" rel=\"nofollow noreferrer\">MediatorLiveData</a> to solve this problem.  </p>\n\n<p><a href=\"https://developer.android.com/reference/android/arch/lifecycle/MediatorLiveData.html\" rel=\"nofollow noreferrer\">MediatorLiveData</a> can observer other <code>LiveData</code> objects and react to them.</p>\n\n<p>Instead of observing either of the repositories.  I created <strong>myData</strong> (instance of MediatorLiveData) in my <code>ViewModel</code> class and have my view observe this object.  Then I add Repository A as the initial source and observe that and only add <strong>Repository B</strong> if the result of A requires it.  This allows me to keep the transformations associated with the live data of each of the repo and still process each result in the correct order.  See below for implementation:</p>\n\n<pre><code>internal val myData: MediatorLiveData&lt;String&gt; = MediatorLiveData()\n\nprivate val repoA: LiveData&lt;String&gt; = Transformations.map(\n        respositoryA.getData(), { data -&gt;\n    if (data.isValid) \"stringA\" else \"\"\n\n})\n\nprivate val repoB: LiveData&lt;String&gt; = Transformations.map(\n        repositoryB.getData(), { data -&gt; \"stringB\" \n})\n\nfun start() {\n    myData.addSource(repoA, {\n        if (it == \"stringA\") {\n            myData.value = it\n        } else {\n            myData.addSource(repoB, {\n                myData.value = it\n            })\n        }\n    })\n}\n</code></pre>\n\n<p><strong>Note</strong>: The solution does not cover the case where repoB might be added multiple times but it should be simple enough to handle.</p>\n"}, {"tags": [], "owner": {"reputation": 305, "user_id": 5437033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae8934ac0d0201fb7a2464c8756e521?s=128&d=identicon&r=PG&f=1", "display_name": "Chrispher", "link": "https://stackoverflow.com/users/5437033/chrispher"}, "is_accepted": false, "score": 7, "last_activity_date": 1539273400, "creation_date": 1539273400, "answer_id": 52764328, "question_id": 47253505, "link": "https://stackoverflow.com/questions/47253505/how-to-chain-transformations-in-android-when-using-live-data/52764328#52764328", "title": "How to chain transformations in Android when using live data?", "body": "<p>Your lambda sometimes returns the <code>String</code> <code>\"stringA\"</code>, and sometimes returns the <code>LiveData&lt;String&gt;</code> given by:</p>\n\n<pre><code>Transformations.map(repositoryB.getData(), {\n    result -&gt; result.toString()\n})\n</code></pre>\n\n<p>This means that your lambda doesn't make sense - it returns different things in different branches.</p>\n\n<p>As others have mentioned, you <em>could</em> write your own <code>MediatorLiveData</code> instead of using the one given by <code>Transformations</code>. However, I think it's easier to do the following:</p>\n\n<pre><code>internal val launchStatus: LiveData&lt;String&gt; = Transformations\n    .switchMap(respositoryA.getData(), { data -&gt;\n        if (data.isValid) {\n            MutableLiveData().apply { setValue(\"stringA\") }\n        } else {\n            Transformations.map(repositoryB.getData(), {\n                result -&gt; result.toString()\n            })\n        }\n    })\n</code></pre>\n\n<p>All I've done is made the first code branch also return a <code>LiveData&lt;String&gt;</code>, so now your lambda makes sense - it's a <code>(String) -&gt; LiveData&lt;String&gt;</code>. I had to make one other change: use <code>switchMap</code> instead of <code>map</code>. This is because <code>map</code> takes a lambda <code>(X) -&gt; Y</code>, but <code>switchMap</code> takes a lambda <code>(X) -&gt; LiveData&lt;Y&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 415, "user_id": 10597330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/089b876659dd95bc388de5e0a750435a?s=128&d=identicon&r=PG&f=1", "display_name": "GilbertS", "link": "https://stackoverflow.com/users/10597330/gilberts"}, "is_accepted": false, "score": 0, "last_activity_date": 1580413118, "creation_date": 1580413118, "answer_id": 59993351, "question_id": 47253505, "link": "https://stackoverflow.com/questions/47253505/how-to-chain-transformations-in-android-when-using-live-data/59993351#59993351", "title": "How to chain transformations in Android when using live data?", "body": "<p>You can nest transformations.</p>\n\n<pre><code>val finalLiveData = Transformations.switchMap(liveData1){\n      val search = it\n      Transformations.switchMap(liveData2) {\n         db(context).dao().all(search, it)\n     }\n}\n</code></pre>\n"}], "owner": {"reputation": 2225, "user_id": 2517849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCGSi.jpg?s=128&g=1", "display_name": "Naveed", "link": "https://stackoverflow.com/users/2517849/naveed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10684, "favorite_count": 2, "accepted_answer_id": 47762647, "answer_count": 5, "score": 15, "last_activity_date": 1580413118, "creation_date": 1510517895, "question_id": 47253505, "link": "https://stackoverflow.com/questions/47253505/how-to-chain-transformations-in-android-when-using-live-data", "title": "How to chain transformations in Android when using live data?", "body": "<p>Given the following setup:</p>\n\n<p>I have 2 repositories: <strong>Repository A</strong> and <strong>Repository B</strong> both of them return live data.</p>\n\n<p>I have a ViewModel that uses both of these repositories.</p>\n\n<p>I want to extract something from Repository A and depending on the result I want to grab something from Repository B and then transform the result before returning to UI.  </p>\n\n<p>For this I have been looking at the <a href=\"https://developer.android.com/topic/libraries/architecture/livedata.html#transform_livedata\" rel=\"noreferrer\">LiveData Transformation</a> classes.  The examples show a single transformation of the result however I want something along the lines of chaining two transformations. How can I accomplish this?</p>\n\n<p>I have tried setting something up like this but get a type mismatch on the second transformation block:</p>\n\n<pre><code>  internal val launchStatus: LiveData&lt;String&gt; = Transformations\n        .map(respositoryA.getData(), { data -&gt;\n            if (data.isValid){\n                \"stringA\"\n            } else {\n                //This gives a type mismatch for the entire block\n                Transformations.map(repositoryB.getData(), {\n                    result -&gt; result.toString()\n                })\n            }\n        })\n</code></pre>\n\n<p>(Also please let me know if there is an alternate/recommended approach for grabbing something for chaining these call i.e. grab something from A and then grab something from B depending on result of A and so on)</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1510513234, "post_id": 47252663, "comment_id": 81455563, "body": "And what if the class doesn&#39;t have a <code>pop1</code> member?  My suggestion would be to define an interface, and then have your (data) classes inherit from that."}, {"owner": {"reputation": 837, "user_id": 1217187, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/293e98728a644bc3b536d6873b7b5422?s=128&d=identicon&r=PG", "display_name": "Ricardo Garza V.", "link": "https://stackoverflow.com/users/1217187/ricardo-garza-v"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1510514604, "post_id": 47252663, "comment_id": 81456039, "body": "thats how I have it now, but the problem is the copy method having a method copy(pop1:Long) in the interface does not use the data class one"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1510514967, "post_id": 47252663, "comment_id": 81456173, "body": "You could just have a <a href=\"https://kotlinlang.org/docs/reference/sealed-classes.html\" rel=\"nofollow noreferrer\"><code>sealed class</code></a> or an interface and then use reflection with named arguments, although it probably would make sense to rethink your problem. This is an unusual use case."}], "answers": [{"comments": [{"owner": {"reputation": 2757, "user_id": 6237026, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/844pQ.jpg?s=128&g=1", "display_name": "Dina Bogdan", "link": "https://stackoverflow.com/users/6237026/dina-bogdan"}, "edited": false, "score": 0, "creation_date": 1578574057, "post_id": 47253248, "comment_id": 105487506, "body": "And how about the scenario when I have multiple and variant properties of some data classes? Is there a way to handle this scenario?"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 2, "last_activity_date": 1518298867, "last_edit_date": 1518298867, "creation_date": 1510516381, "answer_id": 47253248, "question_id": 47252663, "link": "https://stackoverflow.com/questions/47252663/kotlin-using-data-class-generics-type/47253248#47253248", "title": "kotlin using data class generics type", "body": "<p>You should consider using an interface for that particular problem. Just delegate to the data class <code>copy</code> in the implementation.</p>\n\n<pre><code>data class MyData(val pop1: Long, val pop2: String) : Pop1Data {\n    override fun copy(pop1: Long) {\n        copy(pop1 = pop)\n    }\n}\n\ninterface Pop1Data {\n    fun copy(pop1: Long)\n}\n\nclass MyGenericClass&lt;T : Pop1Data&gt;(private val o: T) {\n    // This is the important part\n    fun useCopy(value: Long) = o.copy(value)\n}\n</code></pre>\n"}], "owner": {"reputation": 837, "user_id": 1217187, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/293e98728a644bc3b536d6873b7b5422?s=128&d=identicon&r=PG", "display_name": "Ricardo Garza V.", "link": "https://stackoverflow.com/users/1217187/ricardo-garza-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3228, "favorite_count": 1, "accepted_answer_id": 47253248, "answer_count": 1, "score": 3, "last_activity_date": 1518298867, "creation_date": 1510513104, "question_id": 47252663, "link": "https://stackoverflow.com/questions/47252663/kotlin-using-data-class-generics-type", "title": "kotlin using data class generics type", "body": "<p>Hi there I have gone thru the kotlin documentation and haven't found anything. What I want to do is have a generic thar must be a data class, something like</p>\n\n<pre><code>data class MyData(val pop1:Long,val pop2:String,...)\n\nfun class MyGenericClass&lt;T : isDataClass&gt;(o : T){\n    // This is the important part\n    fun useCopy(value : Long) = t.copy(pop1 = value)\n}\n</code></pre>\n\n<p>What I really need to achieve is to be able to use the copy function of data classes in a generic way(pop1 will always be  a member of my data classes)</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 3, "last_activity_date": 1534534242, "last_edit_date": 1534534242, "creation_date": 1510506050, "answer_id": 47251449, "question_id": 47251361, "link": "https://stackoverflow.com/questions/47251361/using-generic-type-of-interface-in-method/47251449#47251449", "title": "Using generic type of interface in method", "body": "<p>If your interface only produces <code>T</code>, you can make this clear to the compiler by annotating it with <code>out</code>. In your example you also have methods that act as consumers of <code>T</code>, thus <code>out</code> does not work. Just remove the <code>out</code> keyword and all will work fine.</p>\n\n<p>This is a good reference:\n<a href=\"https://kotlinlang.org/docs/reference/generics.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/generics.html</a></p>\n"}], "owner": {"reputation": 13, "user_id": 8928677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d85ce219bd92bdb1157ab7730cb87947?s=128&d=identicon&r=PG&f=1", "display_name": "N.Rubinstein", "link": "https://stackoverflow.com/users/8928677/n-rubinstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 47251449, "answer_count": 1, "score": 1, "last_activity_date": 1534534242, "creation_date": 1510505502, "question_id": 47251361, "link": "https://stackoverflow.com/questions/47251361/using-generic-type-of-interface-in-method", "title": "Using generic type of interface in method", "body": "<p>I'm getting confused with generics in Kotlin. How can I use T type of Class  in function parameters (in addNewItem() and deleteItem())? I'm getting error \"Type parameter T is declared as 'out' but occurs in 'in' position kotlin\"</p>\n\n<pre><code>interface IStorageManager&lt;out T: IFileItem&gt; {\n\nfun getAllItems(): List&lt;T&gt;\n\nfun addNewItem(itemToAdd: T)\n\nfun deleteItem(itemToDelete: T)\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/oJ0pH.png\" rel=\"nofollow noreferrer\">screen</a></p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-support-library", "android-8.0-oreo"], "comments": [{"owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1510504348, "post_id": 47250787, "comment_id": 81452541, "body": "Sligthly related... non null inflater means fragmen with no ui but used as worker are not an alternative now?"}, {"owner": {"reputation": 58671, "user_id": 6509751, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/260caa996ae8ac9fcee35487aa8d7c81?s=128&d=identicon&r=PG&f=1", "display_name": "creativecreatorormaybenot", "link": "https://stackoverflow.com/users/6509751/creativecreatorormaybenot"}, "reply_to_user": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1510505531, "post_id": 47250787, "comment_id": 81452949, "body": "@cutiko I don&#39;t know what you mean."}], "answers": [{"comments": [{"owner": {"reputation": 58671, "user_id": 6509751, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/260caa996ae8ac9fcee35487aa8d7c81?s=128&d=identicon&r=PG&f=1", "display_name": "creativecreatorormaybenot", "link": "https://stackoverflow.com/users/6509751/creativecreatorormaybenot"}, "edited": false, "score": 9, "creation_date": 1510521459, "post_id": 47253335, "comment_id": 81458514, "body": "Thank you for you answer. It is very ugly for Kotlin because <code>getContext()</code> in my case will never be null, nor <code>getActivity()</code>. That means that I now need to assert <code>!!</code> behind them for every call, which is very annoying."}, {"owner": {"reputation": 959, "user_id": 2524470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/4YdWl.jpg?s=128&g=1", "display_name": "Fhl", "link": "https://stackoverflow.com/users/2524470/fhl"}, "edited": false, "score": 0, "creation_date": 1515155923, "post_id": 47253335, "comment_id": 83203317, "body": "Note that if the method can be called where activity/fragment is null, you might want to handle it differently than using the null assertion <code>!!</code>. Another approach is to use e.g. <code>activity?.let { &#47;* Do something*&#47; }</code>"}, {"owner": {"reputation": 3001, "user_id": 1635488, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7e0254593bdf3f2b0fb37a2a8850aa98?s=128&d=identicon&r=PG", "display_name": "android_dev", "link": "https://stackoverflow.com/users/1635488/android-dev"}, "edited": false, "score": 6, "creation_date": 1523657970, "post_id": 47253335, "comment_id": 86667367, "body": "starting from 27.1.0 you can use requireContext() and requireActivity()  methods"}, {"owner": {"reputation": 24386, "user_id": 1502079, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/i6NsY.jpg?s=128&g=1", "display_name": "vovahost", "link": "https://stackoverflow.com/users/1502079/vovahost"}, "reply_to_user": {"reputation": 959, "user_id": 2524470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/4YdWl.jpg?s=128&g=1", "display_name": "Fhl", "link": "https://stackoverflow.com/users/2524470/fhl"}, "edited": false, "score": 0, "creation_date": 1524037550, "post_id": 47253335, "comment_id": 86803364, "body": "@Fhl Instead of using <code>context!!</code> or <code>context?.let{}</code> you can use <code>(context ?: return)</code>."}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 2, "creation_date": 1529071086, "post_id": 47253335, "comment_id": 88756017, "body": "Tip: in some cases the Android Studio &#39;intuition&#39; (Alt + Enter) that offers to wrap in a <code>context?.let { ... }</code> or <code>activity?.let { ... }</code> call can be handy for quick refactoring."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 38, "last_activity_date": 1523684471, "last_edit_date": 1523684471, "creation_date": 1510516851, "answer_id": 47253335, "question_id": 47250787, "link": "https://stackoverflow.com/questions/47250787/android-support-library-27-fragment-update/47253335#47253335", "title": "Android support library 27, Fragment update?", "body": "<p>These were deliberate changes. Before this version of the support library, these classes had no nullability annotations, so from Kotlin, all these types were just <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#null-safety-and-platform-types\" rel=\"noreferrer\">platform types</a>. In 27, they added the necessary annotations, so now these types are definitely marked as either nullable or non-nullable in Kotlin - there's no need to guess whether they can be <code>null</code>.</p>\n\n<p>As for the specific methods you've mentioned: </p>\n\n<ul>\n<li>The <code>getActivity</code> and <code>getContext</code> methods return nullable types because when the <code>Fragment</code> is not attached to an <code>Activity</code>, these methods already returned <code>null</code>. There's no change in behaviour, it's just explicitly marked now, so you can safely handle it.</li>\n<li>The <code>inflater</code> parameter of the <code>onCreateView</code> method used to be a platform type, so it was up to you whether you marked it nullable or not. Since it will never be called with <code>null</code>, it has been explicitly annotated as <code>@NonNull</code>, so its type in Kotlin now is strictly <code>LayoutInflater</code> instead of the \"looser\" <code>LayoutInflater!</code> type.</li>\n</ul>\n\n<hr>\n\n<p>Edit: starting from support library 27.1.0, you can use the <a href=\"https://developer.android.com/reference/android/support/v4/app/Fragment.html#requireActivity()\" rel=\"noreferrer\"><code>requireActivity</code></a> and <a href=\"https://developer.android.com/reference/android/support/v4/app/Fragment.html#requireContext()\" rel=\"noreferrer\"><code>requireContext</code></a> methods, which return non-nullable types, with the caveat that they'll throw an <code>IllegalStateException</code> when the regular methods would return <code>null</code>.</p>\n"}], "owner": {"reputation": 58671, "user_id": 6509751, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/260caa996ae8ac9fcee35487aa8d7c81?s=128&d=identicon&r=PG&f=1", "display_name": "creativecreatorormaybenot", "link": "https://stackoverflow.com/users/6509751/creativecreatorormaybenot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5105, "favorite_count": 5, "accepted_answer_id": 47253335, "answer_count": 1, "score": 20, "last_activity_date": 1523684471, "creation_date": 1510502050, "last_edit_date": 1510504092, "question_id": 47250787, "link": "https://stackoverflow.com/questions/47250787/android-support-library-27-fragment-update", "title": "Android support library 27, Fragment update?", "body": "<p>Since I updated my project to SDK version 27 and gradle plugins for the support library to version <code>27.0.0</code> I needed to change my code.</p>\n\n<p>With <code>26.1.0</code> I can just use <code>getContext()</code> (with Kotlin <code>context</code>) in my <code>Fragment</code> (<code>android.support.v4.app</code>) and I have no nullability issues, but since I use Kotlin I have a problem with version <code>27.0.0</code>, all my <code>context</code> calls did not work anymore, I needed a safety operator, like <code>context!!</code>, but since I personally find it to be a hustle to do that every time I just made myself I workaround function</p>\n\n<pre><code>override fun getContext() = super.getContext()!!\n</code></pre>\n\n<p>Another thing that change (suddenly and that is why I am asking) are the methods <code>onCreateView()</code> and <code>onViewCreated()</code>. In <code>onCreateView</code> the inflater is not possibly null anymore, so I needed to change my function signature to properly override from <code>onCreateView(inflater: LayoutInflater?...)</code> to <code>onCreateView(inflater: LayoutInflater...)</code> and the same for the <code>createdView</code> parameter in <code>onViewCreated</code>.</p>\n\n<p>So now I was wondering why, especially the (for Kotlin) very ugly <code>getContext()</code> change was made and headed over to <a href=\"https://developer.android.com/sdk/support_api_diff/27.0.0/changes.html\" rel=\"noreferrer\">https://developer.android.com/sdk/support_api_diff/27.0.0/changes.html</a>.</p>\n\n<p>But wait, apparently they did not change it? So now my question is if I am doing something wrong or if they really changed it and if so I might ask them why?</p>\n\n<p>By the way, same applies for <code>getActivity()</code>, I think the <code>mHost == null</code> check was added and the <code>getActivity</code> method is even final, so I cannot use my workaround there, which makes it very very ugly. Actually in the source files the methods look like the same, but <code>26.1.0</code> has Kotlin return type <code>Context!</code> and <code>27.0.0</code> return type <code>Context?</code>.</p>\n"}, {"tags": ["kotlin", "timestamp"], "comments": [{"owner": {"reputation": 654, "user_id": 4673371, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-YETjGipG15o/AAAAAAAAAAI/AAAAAAAAABQ/HkiBnrifDwc/photo.jpg?sz=128", "display_name": "moath naji", "link": "https://stackoverflow.com/users/4673371/moath-naji"}, "edited": false, "score": 0, "creation_date": 1510499335, "post_id": 47250263, "comment_id": 81450821, "body": "sorry for that I&#39;ve remove the flag ."}, {"owner": {"reputation": 11571, "user_id": 1830228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8Yfo5.png?s=128&g=1", "display_name": "DolDurma", "link": "https://stackoverflow.com/users/1830228/doldurma"}, "reply_to_user": {"reputation": 654, "user_id": 4673371, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-YETjGipG15o/AAAAAAAAAAI/AAAAAAAAABQ/HkiBnrifDwc/photo.jpg?sz=128", "display_name": "moath naji", "link": "https://stackoverflow.com/users/4673371/moath-naji"}, "edited": false, "score": 0, "creation_date": 1510499452, "post_id": 47250263, "comment_id": 81450857, "body": "@moathnaji i&#39;m trying to convert timestamp not UTC"}, {"owner": {"reputation": 5062, "user_id": 1197251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f988c493109880ba789886bfe5c0514?s=128&d=identicon&r=PG", "display_name": "dominicoder", "link": "https://stackoverflow.com/users/1197251/dominicoder"}, "edited": false, "score": 0, "creation_date": 1510499732, "post_id": 47250263, "comment_id": 81450953, "body": "You should provide the Java code you would use that is &quot;very simple&quot; to make it easier for someone to show you the Kotlin equivalent."}, {"owner": {"reputation": 1180, "user_id": 4284508, "user_type": "registered", "profile_image": "https://graph.facebook.com/1429991429/picture?type=large", "display_name": "Luzo", "link": "https://stackoverflow.com/users/4284508/luzo"}, "edited": false, "score": 0, "creation_date": 1510500260, "post_id": 47250263, "comment_id": 81451119, "body": "Do you mean this? <a href=\"https://www.programiz.com/kotlin-programming/examples/current-date-time\" rel=\"nofollow noreferrer\">programiz.com/kotlin-programming/examples/current-date-time</a>"}, {"owner": {"reputation": 11571, "user_id": 1830228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8Yfo5.png?s=128&g=1", "display_name": "DolDurma", "link": "https://stackoverflow.com/users/1830228/doldurma"}, "reply_to_user": {"reputation": 1180, "user_id": 4284508, "user_type": "registered", "profile_image": "https://graph.facebook.com/1429991429/picture?type=large", "display_name": "Luzo", "link": "https://stackoverflow.com/users/4284508/luzo"}, "edited": false, "score": 0, "creation_date": 1510500564, "post_id": 47250263, "comment_id": 81451207, "body": "@Luzo convert for example convert <code>1510500494</code> as timestamp to for example: <code>2017-01-01</code>"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1510501557, "post_id": 47250263, "comment_id": 81451520, "body": "Write the very simple Java code, ask IntelliJ to convert it to Java for you? That said, it&#39;s a simple method call, so why would it be different in Kotlin?"}, {"owner": {"reputation": 11571, "user_id": 1830228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8Yfo5.png?s=128&g=1", "display_name": "DolDurma", "link": "https://stackoverflow.com/users/1830228/doldurma"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1510502314, "post_id": 47250263, "comment_id": 81451806, "body": "@JBNizet i&#39;m not familiar of kotlin, then i dont khow how can i use java in kotlin"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 2, "creation_date": 1510502413, "post_id": 47250263, "comment_id": 81451844, "body": "That&#39;s not what I&#39;m suggesting. I&#39;m just suggesting you  ask IntelliJ to convert the Java code to Kotlin. But if you&#39;re not familiar with Kotlin, why don&#39;t you become familiar with it before using Kotlin? And  you still haven&#39;t posted the very simple Java code."}, {"owner": {"reputation": 11571, "user_id": 1830228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8Yfo5.png?s=128&g=1", "display_name": "DolDurma", "link": "https://stackoverflow.com/users/1830228/doldurma"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1510502664, "post_id": 47250263, "comment_id": 81451946, "body": "@JBNizet i&#39;m customizing client of <code>Rocket.Chat</code> for android"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 2, "creation_date": 1510502919, "post_id": 47250263, "comment_id": 81452044, "body": "That is irrelevant. You still haven&#39;t posted the very simple Java code."}], "answers": [{"comments": [{"owner": {"reputation": 968, "user_id": 6553331, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1lWip.png?s=128&g=1", "display_name": "temp_", "link": "https://stackoverflow.com/users/6553331/temp"}, "edited": false, "score": 9, "creation_date": 1519321412, "post_id": 47261342, "comment_id": 84874613, "body": "val netDate = Date(s.toLong() * 1000)  worked for me."}, {"owner": {"reputation": 2677, "user_id": 3808183, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7a1088f9d9dc671b0e3d4d337a546913?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Guo", "link": "https://stackoverflow.com/users/3808183/jack-guo"}, "edited": false, "score": 0, "creation_date": 1532700820, "post_id": 47261342, "comment_id": 90086451, "body": "Is this to current locale?"}, {"owner": {"reputation": 2611, "user_id": 1816112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hf1DE.jpg?s=128&g=1", "display_name": "Sofien Rahmouni", "link": "https://stackoverflow.com/users/1816112/sofien-rahmouni"}, "reply_to_user": {"reputation": 968, "user_id": 6553331, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1lWip.png?s=128&g=1", "display_name": "temp_", "link": "https://stackoverflow.com/users/6553331/temp"}, "edited": false, "score": 0, "creation_date": 1602076759, "post_id": 47261342, "comment_id": 113605396, "body": "@temp_ your suggestion is correct because the TimeStamp is in Seconds and Date constructor accept in parameter  date on milliseconds"}, {"owner": {"reputation": 2611, "user_id": 1816112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hf1DE.jpg?s=128&g=1", "display_name": "Sofien Rahmouni", "link": "https://stackoverflow.com/users/1816112/sofien-rahmouni"}, "edited": false, "score": 0, "creation_date": 1602080491, "post_id": 47261342, "comment_id": 113607559, "body": "* @param   date   the milliseconds since January 1, 1970, 00:00:00 GMT."}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1609780906, "post_id": 47261342, "comment_id": 115923576, "body": "Why multiply by <code>*1000</code>?"}], "tags": [], "owner": {"reputation": 935, "user_id": 8822851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tmfBFb3Xhyg/AAAAAAAAAAI/AAAAAAAAAEY/srQLkMO4MnE/photo.jpg?sz=128", "display_name": "arjun shrestha", "link": "https://stackoverflow.com/users/8822851/arjun-shrestha"}, "is_accepted": false, "score": 24, "last_activity_date": 1602076596, "last_edit_date": 1602076596, "creation_date": 1510566513, "answer_id": 47261342, "question_id": 47250263, "link": "https://stackoverflow.com/questions/47250263/kotlin-convert-timestamp-to-datetime/47261342#47261342", "title": "Kotlin convert TimeStamp to DateTime", "body": "<pre><code>private fun getDateTime(s: String): String? {\n    try {\n        val sdf = SimpleDateFormat(&quot;MM/dd/yyyy&quot;)\n        val netDate = Date(Long.parseLong(s) * 1000)\n        return sdf.format(netDate)\n    } catch (e: Exception) {\n        return e.toString()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 666, "user_id": 4700998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-fUFx12mrumA/AAAAAAAAAAI/AAAAAAAAB_A/A34P5IU80uo/photo.jpg?sz=128", "display_name": "Javier Garc&#237;a Manzano", "link": "https://stackoverflow.com/users/4700998/javier-garc%c3%ada-manzano"}, "is_accepted": false, "score": 11, "last_activity_date": 1522354741, "creation_date": 1522354741, "answer_id": 49564364, "question_id": 47250263, "link": "https://stackoverflow.com/questions/47250263/kotlin-convert-timestamp-to-datetime/49564364#49564364", "title": "Kotlin convert TimeStamp to DateTime", "body": "<p>It's actually just like Java. Try this:</p>\n\n<pre><code>val stamp = Timestamp(System.currentTimeMillis())\nval date = Date(stamp.getTime())\nprintln(date)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 252, "user_id": 10087711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dVZmRJJMnlw/AAAAAAAAAAI/AAAAAAAAADE/UiKb0Oef9X8/photo.jpg?sz=128", "display_name": "Umesh Maharjan", "link": "https://stackoverflow.com/users/10087711/umesh-maharjan"}, "is_accepted": false, "score": 1, "last_activity_date": 1531890887, "creation_date": 1531890887, "answer_id": 51394043, "question_id": 47250263, "link": "https://stackoverflow.com/questions/47250263/kotlin-convert-timestamp-to-datetime/51394043#51394043", "title": "Kotlin convert TimeStamp to DateTime", "body": "<pre><code>  fun stringtoDate(dates: String): Date {\n        val sdf = SimpleDateFormat(\"EEE, MMM dd yyyy\",\n                Locale.ENGLISH)\n        var date: Date? = null\n        try {\n             date = sdf.parse(dates)\n            println(date)\n        } catch (e: ParseException) {\n            e.printStackTrace()\n        }\n        return date!!\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12808, "user_id": 1544790, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ALkTz.jpg?s=128&g=1", "display_name": "chancyWu", "link": "https://stackoverflow.com/users/1544790/chancywu"}, "edited": false, "score": 1, "creation_date": 1570515980, "post_id": 53283860, "comment_id": 102927841, "body": "require API level 26+"}, {"owner": {"reputation": 3008, "user_id": 265954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86bc783e1c8cbf3544083563987cef?s=128&d=identicon&r=PG", "display_name": "t0r0X", "link": "https://stackoverflow.com/users/265954/t0r0x"}, "reply_to_user": {"reputation": 12808, "user_id": 1544790, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ALkTz.jpg?s=128&g=1", "display_name": "chancyWu", "link": "https://stackoverflow.com/users/1544790/chancywu"}, "edited": false, "score": 3, "creation_date": 1570613621, "post_id": 53283860, "comment_id": 102964861, "body": "I suppose you mean <code>Android API 26</code>? I do not know about that, what I suggested is pure Kotlin &amp; Java."}, {"owner": {"reputation": 12808, "user_id": 1544790, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ALkTz.jpg?s=128&g=1", "display_name": "chancyWu", "link": "https://stackoverflow.com/users/1544790/chancywu"}, "edited": false, "score": 0, "creation_date": 1570614246, "post_id": 53283860, "comment_id": 102965221, "body": "Yes, in android, this api requires API 26."}], "tags": [], "owner": {"reputation": 3008, "user_id": 265954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86bc783e1c8cbf3544083563987cef?s=128&d=identicon&r=PG", "display_name": "t0r0X", "link": "https://stackoverflow.com/users/265954/t0r0x"}, "is_accepted": false, "score": 7, "last_activity_date": 1581468714, "last_edit_date": 1581468714, "creation_date": 1542121370, "answer_id": 53283860, "question_id": 47250263, "link": "https://stackoverflow.com/questions/47250263/kotlin-convert-timestamp-to-datetime/53283860#53283860", "title": "Kotlin convert TimeStamp to DateTime", "body": "<p>Although it's Kotlin, you still have to use the Java API. An example for Java 8+ APIs converting the value <code>1510500494</code> which you mentioned in the question comments:</p>\n\n<pre><code>import java.time.*\n\nval dt = Instant.ofEpochSecond(1510500494)\n                .atZone(ZoneId.systemDefault())\n                .toLocalDateTime()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 3507323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OXVc1.jpg?s=128&g=1", "display_name": "John Fraize", "link": "https://stackoverflow.com/users/3507323/john-fraize"}, "is_accepted": false, "score": 4, "last_activity_date": 1556913757, "creation_date": 1556913757, "answer_id": 55976410, "question_id": 47250263, "link": "https://stackoverflow.com/questions/47250263/kotlin-convert-timestamp-to-datetime/55976410#55976410", "title": "Kotlin convert TimeStamp to DateTime", "body": "<p>This worked for me - takes a Long</p>\n\n<pre><code>    import java.time.*\n\n    private fun getDateTimeFromEpocLongOfSeconds(epoc: Long): String? {\n        try {\n            val netDate = Date(epoc*1000)\n            return netDate.toString()\n        } catch (e: Exception) {\n            return e.toString()\n        }\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 459, "user_id": 11737287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reghE.png?s=128&g=1", "display_name": "thesamoanppprogrammer", "link": "https://stackoverflow.com/users/11737287/thesamoanppprogrammer"}, "is_accepted": false, "score": 1, "last_activity_date": 1580553529, "creation_date": 1580553529, "answer_id": 60016089, "question_id": 47250263, "link": "https://stackoverflow.com/questions/47250263/kotlin-convert-timestamp-to-datetime/60016089#60016089", "title": "Kotlin convert TimeStamp to DateTime", "body": "<p>If you're trying to convert timestamp from firebase.\nThis is what worked for me.</p>\n\n<pre><code>val timestamp = data[TIMESTAMP] as com.google.firebase.Timestamp\nval date = timestamp.toDate()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1936, "user_id": 8691696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZOlye.jpg?s=128&g=1", "display_name": "Anga", "link": "https://stackoverflow.com/users/8691696/anga"}, "is_accepted": false, "score": 1, "last_activity_date": 1581078485, "creation_date": 1581078485, "answer_id": 60113529, "question_id": 47250263, "link": "https://stackoverflow.com/questions/47250263/kotlin-convert-timestamp-to-datetime/60113529#60113529", "title": "Kotlin convert TimeStamp to DateTime", "body": "<p>Here is a solution in Kotlin </p>\n\n<pre><code>fun getShortDate(ts:Long?):String{\n    if(ts == null) return \"\"\n    //Get instance of calendar\n    val calendar = Calendar.getInstance(Locale.getDefault())\n    //get current date from ts\n    calendar.timeInMillis = ts\n    //return formatted date \n    return android.text.format.DateFormat.format(\"E, dd MMM yyyy\", calendar).toString()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1584425827, "post_id": 60716666, "comment_id": 107425437, "body": "I doubt that this helps, or even works at all. To convince me otherwise please explain how this works and why it solves the problem."}], "tags": [], "owner": {"reputation": 71, "user_id": 13074366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42892edbcbb3415e3929819eebe232b?s=128&d=identicon&r=PG", "display_name": "Sahil Gaikwad", "link": "https://stackoverflow.com/users/13074366/sahil-gaikwad"}, "is_accepted": false, "score": 6, "last_activity_date": 1584437897, "last_edit_date": 1584437897, "creation_date": 1584422790, "answer_id": 60716666, "question_id": 47250263, "link": "https://stackoverflow.com/questions/47250263/kotlin-convert-timestamp-to-datetime/60716666#60716666", "title": "Kotlin convert TimeStamp to DateTime", "body": "<pre><code>val sdf = SimpleDateFormat(\"dd/MM/yy hh:mm a\") \nval netDate = Date(item.timestamp) \nval date =sdf.format(netDate)\n\nLog.e(\"Tag\",\"Formatted Date\"+date)\n</code></pre>\n\n<p>\"sdf\" is variable \"SimpleDateFormat\" of  where we can set format of date as we want. </p>\n\n<p>\"netDate\" is variable of Date. In Date we can sending timestamp values and printing that Date by SimpleDateFormat by using sdf.format(netDate).   </p>\n"}, {"comments": [{"owner": {"reputation": 704, "user_id": 7451779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9312bc877dd61d3a3b15e25eea522b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Haider Malik", "link": "https://stackoverflow.com/users/7451779/haider-malik"}, "edited": false, "score": 0, "creation_date": 1606334512, "post_id": 61059689, "comment_id": 114936589, "body": "I was stuck for ages - the 1000L bit saved me. Thank you"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "reply_to_user": {"reputation": 704, "user_id": 7451779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9312bc877dd61d3a3b15e25eea522b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Haider Malik", "link": "https://stackoverflow.com/users/7451779/haider-malik"}, "edited": false, "score": 0, "creation_date": 1606336836, "post_id": 61059689, "comment_id": 114937487, "body": "@HaiderMalik, thank you! I also got different bugs when multiplied by 1000 and when forgot to divide Java date by 1000L when sent requests to a server."}], "tags": [], "owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "is_accepted": false, "score": 4, "last_activity_date": 1586175491, "creation_date": 1586175491, "answer_id": 61059689, "question_id": 47250263, "link": "https://stackoverflow.com/questions/47250263/kotlin-convert-timestamp-to-datetime/61059689#61059689", "title": "Kotlin convert TimeStamp to DateTime", "body": "<pre><code>class DateTest {\n\n    private val simpleDateFormat = SimpleDateFormat(\"dd MMMM yyyy, HH:mm:ss\", Locale.ENGLISH)\n\n    @Test\n    fun testDate() {\n        val time = 1560507488\n        println(getDateString(time)) // 14 June 2019, 13:18:08\n    }\n\n    private fun getDateString(time: Long) : String = simpleDateFormat.format(time * 1000L)\n\n    private fun getDateString(time: Int) : String = simpleDateFormat.format(time * 1000L)\n\n}\n</code></pre>\n\n<p>Notice that we multiply by <strong>1000L</strong>, not 1000. In case you have an integer number (1560507488) muliplied by 1000, you will get a wrong result: <em>17 January 1970, 17:25:59</em>.</p>\n"}], "owner": {"reputation": 11571, "user_id": 1830228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8Yfo5.png?s=128&g=1", "display_name": "DolDurma", "link": "https://stackoverflow.com/users/1830228/doldurma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43559, "favorite_count": 2, "answer_count": 9, "score": 30, "last_activity_date": 1602076596, "creation_date": 1510498885, "last_edit_date": 1586175740, "question_id": 47250263, "link": "https://stackoverflow.com/questions/47250263/kotlin-convert-timestamp-to-datetime", "title": "Kotlin convert TimeStamp to DateTime", "body": "<p>I'm trying to find out how I can convert <code>timestamp</code> to <code>datetime</code> in Kotlin, this is very simple in Java but I cant find any equivalent of it in Kotlin.</p>\n\n<p>For example: epoch timestamp (seconds since 1970-01-01) <code>1510500494</code> ==> DateTime object <code>2017-11-12 18:28:14</code>.</p>\n\n<p>Is there any solution for this in Kotlin or do I have to use Java syntax in Kotlin? Please give me a simple sample to show how I can resolve this problem. Thanks in advance.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36860468/how-to-convert-utc-date-to-locale-gmt-time-on-android\">this link</a> is not an answer to my question</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1510508732, "post_id": 47249408, "comment_id": 81454031, "body": "I cannot find doasync or uiThread in Kotlin Android Extensions, are you using an additional library?"}], "answers": [{"comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1510508107, "post_id": 47251602, "comment_id": 81453804, "body": "This doesn&#39;t answer the question."}], "tags": [], "owner": {"reputation": 69, "user_id": 5407716, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4FSf4WZWFvk/AAAAAAAAAAI/AAAAAAAAUes/EPOLkaxOjxo/photo.jpg?sz=128", "display_name": "Jacob Lewis", "link": "https://stackoverflow.com/users/5407716/jacob-lewis"}, "is_accepted": false, "score": -1, "last_activity_date": 1510507552, "last_edit_date": 1510507552, "creation_date": 1510506967, "answer_id": 47251602, "question_id": 47249408, "link": "https://stackoverflow.com/questions/47249408/doasync-kotlin-android-doesnt-work-well/47251602#47251602", "title": "doAsync Kotlin-android doesn&#39;t work well", "body": "<p>Consider using Kotlin's coroutines. Coroutines is a newer feature in Kotlin. It is still technically in it's experimental phase, but JetBrains has told us that it is very stable.\nRead more here: <a href=\"https://kotlinlang.org/docs/reference/coroutines.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/coroutines.html</a></p>\n\n<p>Here is some sample code:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) = runBlocking { // runBlocking is only needed here because I am calling join below\n    val job = launch(UI) { // The launch function allows you to execute suspended functions\n        val async1 = doSomethingAsync(250)\n        val async2 = doSomethingAsync(50)\n\n        println(async1.await() + async2.await()) // The code within launch will \n        // be paused here until both async1 and async2 have finished\n    }\n\n    job.join() // Just wait for the coroutines to finish before stopping the program\n}\n\n// Note: this is a suspended function (which means it can be \"paused\")\nsuspend fun doSomethingAsync(param1: Long) = async {\n    delay(param1) // pause this \"thread\" (not really a thread)\n    println(param1)\n    return@async param1 * 2 // return twice the input... just for fun\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5577387, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FVleAGrBcNs/AAAAAAAAAAI/AAAAAAAABxk/Pp9fGVsdwS0/photo.jpg?sz=128", "display_name": "santiihoyos", "link": "https://stackoverflow.com/users/5577387/santiihoyos"}, "edited": false, "score": 0, "creation_date": 1510520642, "post_id": 47252676, "comment_id": 81458230, "body": "No, my callback is a function that receives 2 objects result 1 and result2, the problem is the function callback sometimes receives the results empty, i check their content and is not empty."}], "tags": [], "owner": {"reputation": 23, "user_id": 5920898, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XQBq0IZegAA/AAAAAAAAAAI/AAAAAAAAAS4/li-Xha4fsSg/photo.jpg?sz=128", "display_name": "Naman Goyal", "link": "https://stackoverflow.com/users/5920898/naman-goyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1510513172, "creation_date": 1510513172, "answer_id": 47252676, "question_id": 47249408, "link": "https://stackoverflow.com/questions/47249408/doasync-kotlin-android-doesnt-work-well/47252676#47252676", "title": "doAsync Kotlin-android doesn&#39;t work well", "body": "<p>It may be because you've declared return type as <code>Unit?</code> but are returning two values. A quick fix would be to put <code>result1</code> and <code>result2</code> in an array.</p>\n"}], "owner": {"reputation": 21, "user_id": 5577387, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FVleAGrBcNs/AAAAAAAAAAI/AAAAAAAABxk/Pp9fGVsdwS0/photo.jpg?sz=128", "display_name": "santiihoyos", "link": "https://stackoverflow.com/users/5577387/santiihoyos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 820, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510520680, "creation_date": 1510493590, "last_edit_date": 1510520680, "question_id": 47249408, "link": "https://stackoverflow.com/questions/47249408/doasync-kotlin-android-doesnt-work-well", "title": "doAsync Kotlin-android doesn&#39;t work well", "body": "<p>I am using a callback function when async ends. but it doesn't work well :(</p>\n\n<p>my case:</p>\n\n<pre><code>fun function1(callback : (obj1: List&lt;ObjT1&gt;,obj2: List&lt;ObjT1&gt;)-&gt; Unit?){\n    doAsync {\n\n        //long task\n\n        uiThread { callback(result1, result2) }\n    }\n}\n</code></pre>\n\n<p>the callback is called but <code>result1</code> and <code>result2</code>(lists) are empty. I checked previous the content of the list.</p>\n\n<p>EDIT:\nPROBLEM: my callback is a function that receives 2 objects result 1 and result2, the problem is the function callback sometimes receives the results empty, i check their content and is not empty.</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 8777, "user_id": 3682067, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a881ab25f87a2f5f6a91d18a3277bb1?s=128&d=identicon&r=PG", "display_name": "Saeed Masoumi", "link": "https://stackoverflow.com/users/3682067/saeed-masoumi"}, "edited": false, "score": 0, "creation_date": 1510492073, "post_id": 47249096, "comment_id": 81448461, "body": "which version of Gradle did you use?"}, {"owner": {"reputation": 412, "user_id": 5699461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1atzB.png?s=128&g=1", "display_name": "MrPNG", "link": "https://stackoverflow.com/users/5699461/mrpng"}, "reply_to_user": {"reputation": 8777, "user_id": 3682067, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a881ab25f87a2f5f6a91d18a3277bb1?s=128&d=identicon&r=PG", "display_name": "Saeed Masoumi", "link": "https://stackoverflow.com/users/3682067/saeed-masoumi"}, "edited": false, "score": 0, "creation_date": 1510503679, "post_id": 47249096, "comment_id": 81452320, "body": "I used Gradle v4.2.1"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 6, "creation_date": 1510504238, "post_id": 47249096, "comment_id": 81452503, "body": "I don&#39;t think there is a special &quot;1.9&quot; mode at all. Leave <code>jvmTarget = &quot;1.8&quot;</code> and and it should work as-is."}], "answers": [{"comments": [{"owner": {"reputation": 1852, "user_id": 4681265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pmOC.png?s=128&g=1", "display_name": "adrhc", "link": "https://stackoverflow.com/users/4681265/adrhc"}, "edited": false, "score": 1, "creation_date": 1526764988, "post_id": 47952005, "comment_id": 87873856, "body": "At current date this answer seems correct; it would be nice an explanation for the down vote for others to understand too what\u2019s wrong about it."}, {"owner": {"reputation": 6835, "user_id": 6305235, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kEy0G.jpg?s=128&g=1", "display_name": "David Miguel", "link": "https://stackoverflow.com/users/6305235/david-miguel"}, "edited": false, "score": 1, "creation_date": 1578492625, "post_id": 47952005, "comment_id": 105456169, "body": "Kotlin now allow targeting Java versions from 6 to 12 <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html#attributes-specific-for-jvm\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7179, "user_id": 222163, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ldCVf.jpg?s=128&g=1", "display_name": "Paul D&#39;Ambra", "link": "https://stackoverflow.com/users/222163/paul-dambra"}, "is_accepted": true, "score": 12, "last_activity_date": 1540674437, "last_edit_date": 1540674437, "creation_date": 1514027808, "answer_id": 47952005, "question_id": 47249096, "link": "https://stackoverflow.com/questions/47249096/how-to-target-jvm-9-on-kotlin-with-gradle/47952005#47952005", "title": "How to target JVM 9 on Kotlin with Gradle?", "body": "<p>Kotlin currently only targets Java 6 and 8</p>\n\n<p>See the FAQs here <a href=\"https://kotlinlang.org/docs/reference/faq.html#does-kotlin-only-target-java-6\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/faq.html#does-kotlin-only-target-java-6</a></p>\n\n<p>Which at the moment says</p>\n\n<blockquote>\n  <p>Does Kotlin only target Java 6?\n  No. Kotlin lets you choose between generating Java 6 and Java 8 compatible bytecode. More optimal byte code may be generated for higher versions of the platform.</p>\n</blockquote>\n\n<hr>\n\n<p>edit:</p>\n\n<p>So... because it's the compatibility of the bytecode that kotlin is generating it doesn't mean that fixes the Java version you need to use.</p>\n\n<p>Here's a gradle file that let's you use Java 11 alongside kotlin generating Java 8 compatible bytecode</p>\n\n<pre><code>plugins {\n    id 'java'\n    id 'org.jetbrains.kotlin.jvm' version '1.2.71'\n}\n\ngroup 'com.dambra.paul.string-calculator'\nversion '0.0.0'\n\nsourceCompatibility = 11.0\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    testImplementation(\n            'org.junit.jupiter:junit-jupiter-api:5.1.0'\n    )\n    testRuntimeOnly(\n            'org.junit.jupiter:junit-jupiter-engine:5.1.0'\n    )\n    testCompile(\"org.assertj:assertj-core:3.11.1\")\n    testCompile 'org.junit.jupiter:junit-jupiter-params:5.1.0'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jdk8\"\n}\ncompileKotlin {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\ncompileTestKotlin {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\n</code></pre>\n\n<p>You can't \"target jvm 9\" with Kotlin. But you can write Kotlin alongside Java (9|10|11|etc)</p>\n"}, {"tags": [], "owner": {"reputation": 843, "user_id": 6480404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5adab07fa18df69f2a2038cf426b698?s=128&d=identicon&r=PG&f=1", "display_name": "3ygun", "link": "https://stackoverflow.com/users/6480404/3ygun"}, "is_accepted": false, "score": 5, "last_activity_date": 1569952352, "creation_date": 1569952352, "answer_id": 58189964, "question_id": 47249096, "link": "https://stackoverflow.com/questions/47249096/how-to-target-jvm-9-on-kotlin-with-gradle/58189964#58189964", "title": "How to target JVM 9 on Kotlin with Gradle?", "body": "<p>See the <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html#attributes-specific-for-jvm\" rel=\"noreferrer\">Kotlin \"Using Gradle\" reference \"Attributes specific for the JVM\"</a> for possible values of the attribute <code>jvmTarget</code>:</p>\n\n<blockquote>\n  <p>Name: <code>jvmTarget</code></p>\n  \n  <p>Description: Target version of the generated JVM bytecode (1.6, 1.8, 9, 10, 11 or 12), default is 1.6</p>\n  \n  <p>Possible values: \"1.6\", \"1.8\", \"9\", \"10\", \"11\", \"12\"</p>\n  \n  <p>Default value: \"1.6\"</p>\n  \n  <p><em>Copied 2019/10/01</em></p>\n</blockquote>\n"}], "owner": {"reputation": 412, "user_id": 5699461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1atzB.png?s=128&g=1", "display_name": "MrPNG", "link": "https://stackoverflow.com/users/5699461/mrpng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7057, "favorite_count": 2, "accepted_answer_id": 47952005, "answer_count": 2, "score": 15, "last_activity_date": 1569952352, "creation_date": 1510491717, "last_edit_date": 1510491783, "question_id": 47249096, "link": "https://stackoverflow.com/questions/47249096/how-to-target-jvm-9-on-kotlin-with-gradle", "title": "How to target JVM 9 on Kotlin with Gradle?", "body": "<p>Targeting JVM 1.8 on Kotlin with Gradle is as easy as</p>\n\n<pre><code>compileKotlin {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\n</code></pre>\n\n<p>But that doesn't work for Java 9 if I simply change the <code>jvmTarget</code> to <code>9</code> or <code>1.9</code>. How can I do it?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "edited": false, "score": 1, "creation_date": 1510490527, "post_id": 47248892, "comment_id": 81447970, "body": "They are compiled to the same bytecode, and are completely interoperable, so no worries, you can use them both in the same project"}, {"owner": {"reputation": 139, "user_id": 7429014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-UTpKe7L1a1w/AAAAAAAAAAI/AAAAAAAAABo/hOsrVb2TGmQ/photo.jpg?sz=128", "display_name": "Jasss", "link": "https://stackoverflow.com/users/7429014/jasss"}, "reply_to_user": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "edited": false, "score": 0, "creation_date": 1510490659, "post_id": 47248892, "comment_id": 81448013, "body": "thanks @Daniele any size issue"}, {"owner": {"reputation": 744, "user_id": 7529251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XGqQFqwGZr4/AAAAAAAAAAI/AAAAAAAAAkE/qCeum3WIHlY/photo.jpg?sz=128", "display_name": "Dexter", "link": "https://stackoverflow.com/users/7529251/dexter"}, "edited": false, "score": 0, "creation_date": 1510491143, "post_id": 47248892, "comment_id": 81448173, "body": "Kotlin works side by side with Java and C++ on Android, So you can use Kotlin and java in the same project and they will work together also you can Convert existing Java code to Kotlin code"}], "answers": [{"tags": [], "owner": {"reputation": 65664, "user_id": 3998402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1deae6b5ee0cdf29e9a4d9f219f547a?s=128&d=identicon&r=PG&f=1", "display_name": "humazed", "link": "https://stackoverflow.com/users/3998402/humazed"}, "is_accepted": false, "score": 2, "last_activity_date": 1510490765, "creation_date": 1510490765, "answer_id": 47248935, "question_id": 47248892, "link": "https://stackoverflow.com/questions/47248892/android-application-building-with-java-and-kotlin/47248935#47248935", "title": "Android application building with java and kotlin", "body": "<p>Kotlin and Java are 100% interoperable so you can create the new features in kotlin and they can coexist with the old java classes. </p>\n\n<blockquote>\n  <p>Kotlin is designed with Java Interoperability in mind. Existing Java\n  code can be called from Kotlin in a natural way, and Kotlin code can\n  be used from Java rather smoothly as well.</p>\n</blockquote>\n\n<p>see:\n<a href=\"https://kotlinlang.org/docs/reference/java-interop.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/java-interop.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 421, "user_id": 1966794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LG9m1.jpg?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/1966794/casper"}, "is_accepted": true, "score": 2, "last_activity_date": 1510492215, "creation_date": 1510492215, "answer_id": 47249165, "question_id": 47248892, "link": "https://stackoverflow.com/questions/47248892/android-application-building-with-java-and-kotlin/47249165#47249165", "title": "Android application building with java and kotlin", "body": "<p>Kotlin currently might be slightly slower for larger projects in terms of compilation, but probably not noticeable for smaller projects.</p>\n\n<p>You will also have to bundle the bundle the Kotlin runtime and standard library with your apk which increases the size by 885KB as of Kotlin 1.1.51 according to <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-android.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/tutorials/kotlin-android.html</a>. This can be mitigated using Proguard however.</p>\n"}], "owner": {"reputation": 139, "user_id": 7429014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-UTpKe7L1a1w/AAAAAAAAAAI/AAAAAAAAABo/hOsrVb2TGmQ/photo.jpg?sz=128", "display_name": "Jasss", "link": "https://stackoverflow.com/users/7429014/jasss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 1, "accepted_answer_id": 47249165, "answer_count": 2, "score": 1, "last_activity_date": 1510492215, "creation_date": 1510490418, "question_id": 47248892, "link": "https://stackoverflow.com/questions/47248892/android-application-building-with-java-and-kotlin", "title": "Android application building with java and kotlin", "body": "<p>I build an application with core java. and recently google announce primary language as kotlin. Is that good to create the newer feature with kotlin. \nAny diff with execution time or application size if I have some code in java and some code in kotlin. </p>\n\n<p>Many thanks </p>\n"}, {"tags": ["android", "android-studio", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 10947, "user_id": 4094260, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/A5fz9.jpg?s=128&g=1", "display_name": "Nongthonbam Tonthoi", "link": "https://stackoverflow.com/users/4094260/nongthonbam-tonthoi"}, "edited": false, "score": 0, "creation_date": 1510490387, "post_id": 47248840, "comment_id": 81447909, "body": "A fragment resides in an Activity so if you have the navigation drawer in the Activity it will be there in the Fragment also, considering that that Activity holds that Fragment"}, {"owner": {"reputation": 41, "user_id": 8555187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e927156d444c3ecb041eedd25c2e866?s=128&d=identicon&r=PG&f=1", "display_name": "RobotPT", "link": "https://stackoverflow.com/users/8555187/robotpt"}, "reply_to_user": {"reputation": 10947, "user_id": 4094260, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/A5fz9.jpg?s=128&g=1", "display_name": "Nongthonbam Tonthoi", "link": "https://stackoverflow.com/users/4094260/nongthonbam-tonthoi"}, "edited": false, "score": 0, "creation_date": 1510490687, "post_id": 47248840, "comment_id": 81448023, "body": "So i can add a new activity with navigation drawer and put them as a fragment?"}, {"owner": {"reputation": 10947, "user_id": 4094260, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/A5fz9.jpg?s=128&g=1", "display_name": "Nongthonbam Tonthoi", "link": "https://stackoverflow.com/users/4094260/nongthonbam-tonthoi"}, "edited": false, "score": 0, "creation_date": 1510490884, "post_id": 47248840, "comment_id": 81448093, "body": "Create an Activity with navigation drawer and add a Fragment to that Activity, it should work."}, {"owner": {"reputation": 41, "user_id": 8555187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e927156d444c3ecb041eedd25c2e866?s=128&d=identicon&r=PG&f=1", "display_name": "RobotPT", "link": "https://stackoverflow.com/users/8555187/robotpt"}, "reply_to_user": {"reputation": 10947, "user_id": 4094260, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/A5fz9.jpg?s=128&g=1", "display_name": "Nongthonbam Tonthoi", "link": "https://stackoverflow.com/users/4094260/nongthonbam-tonthoi"}, "edited": false, "score": 0, "creation_date": 1510491233, "post_id": 47248840, "comment_id": 81448204, "body": "class MainActivity : AppCompatActivity(), NavigationView.OnNavigationItemSelectedListener  &lt;---- is in this i have to add a fragment?"}, {"owner": {"reputation": 10947, "user_id": 4094260, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/A5fz9.jpg?s=128&g=1", "display_name": "Nongthonbam Tonthoi", "link": "https://stackoverflow.com/users/4094260/nongthonbam-tonthoi"}, "edited": false, "score": 0, "creation_date": 1510491659, "post_id": 47248840, "comment_id": 81448343, "body": "Does MainActivity contain the navigation drawer? if yes, yes"}, {"owner": {"reputation": 5062, "user_id": 1197251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f988c493109880ba789886bfe5c0514?s=128&d=identicon&r=PG", "display_name": "dominicoder", "link": "https://stackoverflow.com/users/1197251/dominicoder"}, "edited": false, "score": 0, "creation_date": 1510503856, "post_id": 47248840, "comment_id": 81452368, "body": "Your only question in your post is &quot;can anyone help?&quot;. You have not specified with what you need help: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 41, "user_id": 8555187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e927156d444c3ecb041eedd25c2e866?s=128&d=identicon&r=PG&f=1", "display_name": "RobotPT", "link": "https://stackoverflow.com/users/8555187/robotpt"}, "edited": false, "score": 0, "creation_date": 1510504002, "post_id": 47248840, "comment_id": 81452417, "body": "I want to do a fragment with navigation drawer and add that fragment to a few activities"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 8555187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e927156d444c3ecb041eedd25c2e866?s=128&d=identicon&r=PG&f=1", "display_name": "RobotPT", "link": "https://stackoverflow.com/users/8555187/robotpt"}, "is_accepted": false, "score": 0, "last_activity_date": 1510502055, "last_edit_date": 1510502055, "creation_date": 1510495218, "answer_id": 47249689, "question_id": 47248840, "link": "https://stackoverflow.com/questions/47248840/fragment-in-kotlin/47249689#47249689", "title": "Fragment in kotlin", "body": "<p>Is something like this? @NongthonbamTonthoi</p>\n\n<pre><code>class NavViewFragment : AppCompatActivity(), \nNavigationView.OnNavigationItemSelectedListener {\n\nfun AppCompatActivity.addFragment(fragment: Fragment, frameId: Int){\n    supportFragmentManager.inTransaction { add(frameId, fragment) }\n}\n\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_nav_view_fragment)\n    setSupportActionBar(toolbar)\n\n    nav_view.setNavigationItemSelectedListener(this)\n}\n\noverride fun onBackPressed() {\n    if (drawer_layout.isDrawerOpen(GravityCompat.START)) {\n        drawer_layout.closeDrawer(GravityCompat.START)\n    } else {\n        super.onBackPressed()\n    }\n}\n\noverride fun onCreateOptionsMenu(menu: Menu): Boolean {\n    // Inflate the menu; this adds items to the action bar if it is present.\n    menuInflater.inflate(R.menu.nav_view, menu)\n    return true\n}\n\noverride fun onOptionsItemSelected(item: MenuItem): Boolean {\n    // Handle action bar item clicks here. The action bar will\n    // automatically handle clicks on the Home/Up button, so long\n    // as you specify a parent activity in AndroidManifest.xml.\n    when (item.itemId) {\n        R.id.action_settings -&gt; return true\n        else -&gt; return super.onOptionsItemSelected(item)\n    }\n}\n\noverride fun onNavigationItemSelected(item: MenuItem): Boolean {\n    // Handle navigation view item clicks here.\n    when (item.itemId) {\n        R.id.home -&gt; {\n\n        }\n        R.id.subjects -&gt; {\n            val intent = Intent(this, SubjectsActivity::class.java)\n            startActivity(intent)\n        }\n\n        }\n    drawer_layout.closeDrawer(GravityCompat.START)\n    return true\n    }\ninline fun FragmentManager.inTransaction(func: FragmentTransaction.() -&gt; Unit) {\n    val fragmentTransaction = beginTransaction()\n    fragmentTransaction.func()\n    fragmentTransaction.commit()\n}\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 935, "user_id": 8822851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tmfBFb3Xhyg/AAAAAAAAAAI/AAAAAAAAAEY/srQLkMO4MnE/photo.jpg?sz=128", "display_name": "arjun shrestha", "link": "https://stackoverflow.com/users/8822851/arjun-shrestha"}, "is_accepted": false, "score": 1, "last_activity_date": 1518197653, "last_edit_date": 1518197653, "creation_date": 1510567220, "answer_id": 47261590, "question_id": 47248840, "link": "https://stackoverflow.com/questions/47248840/fragment-in-kotlin/47261590#47261590", "title": "Fragment in kotlin", "body": "<p>You can use this to replace your frame with HomeFragment() \nmainDisplayFrame should be replace by your FrameID</p>\n\n<pre><code>var fragmentTransaction = supportFragmentManager.beginTransaction()\nfragmentTransaction.replace(R.id.mainDisplayFrame,HomeFragment()).commit()\nmDrawerLayout!!.closeDrawers()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1834, "user_id": 3881947, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0lhYF.jpg?s=128&g=1", "display_name": "Deepshikha Puri", "link": "https://stackoverflow.com/users/3881947/deepshikha-puri"}, "is_accepted": false, "score": 1, "last_activity_date": 1517564662, "creation_date": 1517564662, "answer_id": 48579835, "question_id": 47248840, "link": "https://stackoverflow.com/questions/47248840/fragment-in-kotlin/48579835#48579835", "title": "Fragment in kotlin", "body": "<p>You can download the source link from here(<a href=\"http://deepshikhapuri.blogspot.in/2018/01/navigation-drawer-in-android-kotlin.html\" rel=\"nofollow noreferrer\">Navigation Drawer In Android Kotlin</a>)</p>\n\n<p><strong>MainActivity.kt:</strong></p>\n\n<pre><code>class MainActivity : AppCompatActivity(), View.OnClickListener {\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        init()\n    }\n\n    private fun init() {\n        tv_home.setText(\"Home Tab\")\n        tv_title.setText(\"Home\")\n        ll_about.setOnClickListener(this)\n        ll_home.setOnClickListener(this)\n        ll_bookmark.setOnClickListener(this)\n        ll_help.setOnClickListener(this)\n        rl_menu.setOnClickListener(this)\n        rl_header.setOnClickListener(this)\n\n        tv_link.setLinkTextColor(Color.parseColor(\"#000000\"));\n        Linkify.addLinks(tv_link, Linkify.ALL)\n\n    }\n\n    override fun onBackPressed() {\n        if (drawer_layout.isDrawerOpen(GravityCompat.START)) {\n            drawer_layout.closeDrawer(GravityCompat.START)\n        } else {\n            super.onBackPressed()\n        }\n    }\n\n\n    override fun onClick(p0: View?) {\n        when (p0?.id) {\n\n            R.id.ll_home -&gt; {\n                drawer_layout.closeDrawer(GravityCompat.START)\n                tv_home.setText(\"Home Tab\")\n                tv_title.setText(\"Home\")\n\n\n            }\n            R.id.ll_about -&gt; {\n\n                val browserIntent = Intent(Intent.ACTION_VIEW, Uri.parse(\"http://deepshikhapuri.blogspot.in/\"))\n                startActivity(browserIntent)\n\n            }\n\n            R.id.ll_help -&gt; {\n                drawer_layout.closeDrawer(GravityCompat.START)\n                tv_home.setText(\"Help Tab\")\n                tv_title.setText(\"Help\")\n\n            }\n\n            R.id.ll_bookmark -&gt; {\n                drawer_layout.closeDrawer(GravityCompat.START)\n                tv_home.setText(\"Bookmark Tab\")\n                tv_title.setText(\"Bookmark\")\n\n            }\n\n            R.id.rl_header -&gt; {\n            }\n\n            R.id.rl_menu -&gt; {\n                if (drawer_layout.isDrawerOpen(GravityCompat.START)) {\n                    drawer_layout.closeDrawer(GravityCompat.START)\n                } else {\n                    drawer_layout.openDrawer(GravityCompat.START)\n                }\n            }\n\n\n        }\n\n    }\n</code></pre>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 41, "user_id": 8555187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e927156d444c3ecb041eedd25c2e866?s=128&d=identicon&r=PG&f=1", "display_name": "RobotPT", "link": "https://stackoverflow.com/users/8555187/robotpt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3146, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1520174935, "creation_date": 1510490107, "question_id": 47248840, "link": "https://stackoverflow.com/questions/47248840/fragment-in-kotlin", "title": "Fragment in kotlin", "body": "<p>i'm stuck in my application because i have to do a fragment with the navigation drawer in kotlin.. can anyone help? I have search a lot of things in web but i didn't find anything yet...\nDown here is two items that i have do in main activity and i want  that is present in the fragment too.</p>\n\n<pre><code>override fun onNavigationItemSelected(item: MenuItem): Boolean {\n    // Handle navigation view item clicks here.\n    when (item.itemId) {\n        R.id.home -&gt; {\n\n        }\n        R.id.subjects -&gt; {\n            val intent = Intent(this, SubjectsActivity::class.java)\n            startActivity(intent)\n        }\n    }\n\n    drawer_layout.closeDrawer(GravityCompat.START)\n    return true\n}\n</code></pre>\n"}, {"tags": ["kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "edited": false, "score": 0, "creation_date": 1510489596, "post_id": 47248651, "comment_id": 81447620, "body": "Actually I saw <code>lateinit</code> before posting this question, but if I use &#39;lateinit&#39;, it seemed that I could no longer use field injection but had to use constructor injection, is that correct? The error message was <code>Coffee cannot be provided without an @Inject constructor or from an @Provides- or @Produces-annotated method.</code>. So, doesn&#39;t that make the answer to my question a &quot;no&quot;?"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "reply_to_user": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "edited": false, "score": 0, "creation_date": 1510491940, "post_id": 47248651, "comment_id": 81448427, "body": "@DamnVegetables Damn, I completely missed the question :D Check out the updated answer. <code>but if I use &#39;lateinit&#39;, it seemed that I could no longer use field injection but had to use constructor injection</code> Now I&#39;m not sure what you mean by <code>field injection</code>. Calling <code>MembersInjector</code> manually? That works with lateinit. lateinit=field as far as dagger is concerned."}, {"owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "edited": false, "score": 0, "creation_date": 1510493798, "post_id": 47248651, "comment_id": 81448994, "body": "Thank you. If you do not mind, where does <code>Arabica</code> came from? And the error message, <code>@Provides- or @Produces-annotated method</code>, does that mean a provide/produces for <code>CoffeeShop</code>? Because a provide method for <code>Coffee</code> already exists. (The full source is in the question I mentioned.)"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "reply_to_user": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "edited": false, "score": 0, "creation_date": 1510494450, "post_id": 47248651, "comment_id": 81449231, "body": "@DamnVegetables <code>Arabica</code> is a made up <a href=\"https://google.github.io/dagger/users-guide.html#qualifiers\" rel=\"nofollow noreferrer\">custom qualifier</a>. You probably won&#39;t need qualifiers just now. Focus on getting it to work. About the error: Dagger needs to inject <code>val coffee: Coffee</code> and  for that it needs to know where <code>Coffee</code> comes from. As the error hints there are two ways. The <a href=\"https://google.github.io/dagger/users-guide.html\" rel=\"nofollow noreferrer\">user guide</a> explains it best, I think."}], "tags": [], "owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "is_accepted": true, "score": 51, "last_activity_date": 1572801453, "last_edit_date": 1572801453, "creation_date": 1510488931, "answer_id": 47248651, "question_id": 47248478, "link": "https://stackoverflow.com/questions/47248478/can-i-use-dagger-2s-field-injection-in-kotlin/47248651#47248651", "title": "Can I use Dagger 2&#39;s field injection in Kotlin?", "body": "<blockquote>\n  <p>I think Kotlin may be translating [...] into Java code of [...]</p>\n</blockquote>\n\n<p>And you would be correct, that's exactly what happens.</p>\n\n<p>Typically in Kotlin you wouldn't write </p>\n\n<pre><code>@Inject var coffee: Coffee? = null\n</code></pre>\n\n<p>because when you're going to access coffee, it will never be null. In other words you will always inject the object before accessing it's fields. That makes the operators <code>!!</code> redundant and <code>?</code> unnecessary. Kotlin has <code>lateinit</code> property modifier to express this.</p>\n\n<pre><code>@Inject lateinit var coffee: Coffee\n</code></pre>\n\n<p>When you use <code>lateinit</code> the generated field has the same visibility as its getter and setter, in this case <code>public</code>. This makes it work with Dagger.</p>\n\n<p>You can see the result by viewing generated Kotlin bytecode.</p>\n\n<blockquote>\n  <p>Main menu > Tools > Kotlin > Show Kotlin Bytecode</p>\n</blockquote>\n\n<p>However, even better approach would be injecting the class constructor:</p>\n\n<pre><code>class CoffeeShop @Inject constructor(val coffee: Coffee) {\n    //...\n}\n</code></pre>\n\n<p>In this case <code>coffee</code> is not <code>var</code> and can't be reassigned.</p>\n\n<p>Injecting constructor is not an option when the instance is created for you by a framework, Android activity is a good example.</p>\n\n<hr>\n\n<p><strong>Note:</strong> When using qualifiers you have to specify <code>field</code> annotation target on them:</p>\n\n<pre><code>@Inject @field:Named(\"Arabica\") @field:Arabica\nlateinit var coffee: Coffee\n</code></pre>\n\n<p><strong>Edit:</strong> You don't need to add the <code>field</code> target when using <a href=\"https://github.com/google/dagger/releases/tag/dagger-2.25.2\" rel=\"noreferrer\">Dagger 2.25 or newer</a>.</p>\n\n<hr>\n\n<blockquote>\n  <p>Can I use field injection in Kotlin?</p>\n</blockquote>\n\n<p>Yes you can. As explained above, field injection is actually applied for <code>lateinit</code> properties.</p>\n\n<p>But you were probably interested in generating and injecting fields without getter/setter in Kotlin.</p>\n\n<pre><code>@JvmField @Inject\nvar coffee: Coffee? = null\n</code></pre>\n"}], "owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9457, "favorite_count": 2, "accepted_answer_id": 47248651, "answer_count": 1, "score": 25, "last_activity_date": 1572801453, "creation_date": 1510487581, "last_edit_date": 1542901124, "question_id": 47248478, "link": "https://stackoverflow.com/questions/47248478/can-i-use-dagger-2s-field-injection-in-kotlin", "title": "Can I use Dagger 2&#39;s field injection in Kotlin?", "body": "<p>I posted a question (<a href=\"https://stackoverflow.com/questions/47247696/dagger-2-does-not-generate-the-component-class-android-kotlin\">Dagger 2 does not generate the component class (Android, Kotlin)</a>), and after some experiments, it seems that the problem might be due to that Kotlin hides the field.</p>\n\n<pre><code>class CoffeeShop {\n    @Inject\n    var theCoffee: Coffee? = null\n}\n</code></pre>\n\n<p>The error message is,</p>\n\n<pre><code>:app:kaptDebugKotline: ...\\CoffeeShop.java:7:\nerror: Dagger does not support injection into private fields\ne:     private ....Coffee theCoffee;\n</code></pre>\n\n<p><code>theCoffee</code> was not private in my source code. But I think Kotlin may be translating</p>\n\n<pre><code>class CoffeeShop {\n    @Inject\n    var theCoffee: Coffee? = null\n}\n</code></pre>\n\n<p>into Java code of</p>\n\n<pre><code>class CoffeeShop {\n    @Inject\n    private Coffee theCoffee = null;\n    public Coffee getTheCoffee();\n    public void setTheCoffee();\n}\n</code></pre>\n\n<p>Can I use field injection in Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1510482360, "post_id": 47247696, "comment_id": 81445541, "body": "Does it compile / build?"}, {"owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "reply_to_user": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1510482409, "post_id": 47247696, "comment_id": 81445553, "body": "Yes. But after the build succeeded, when I type <code>DaggerMyComponent</code>, it fails to find that class."}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1510482684, "post_id": 47247696, "comment_id": 81445617, "body": "I doubt that it can build, because <code>Coffee</code> can&#39;t be provided to <code>CoffeeShop</code>, since you&#39;re not using constructor injection or providing it from a component. Also you should be using constructor injection instead of field injection with <code>CoffeeShop</code> since you can create it yourself. You should look for the errors, or verify that Dagger runs, but your gradle part looks good AFAICT"}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1510482858, "post_id": 47247696, "comment_id": 81445667, "body": "Yesterday someone asked a similar question where they also (mis)used field injection, see <a href=\"https://stackoverflow.com/q/47242150/1837367\">here</a>"}, {"owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "reply_to_user": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1510483334, "post_id": 47247696, "comment_id": 81445769, "body": "<code>TheCoffee</code> can be <code>null</code> so I think the class can be compiled without Dagger. The build succeeds and I can run the app. But I am not sure whether Dagger ran or not. Other than adding those in build.gradle, do I need to do something else? How to check if Dargger has run?"}, {"owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "reply_to_user": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1510486124, "post_id": 47247696, "comment_id": 81446568, "body": "I did something to the build.gradle and now build fails. The message was, <code>error: Dagger does not support injection into private fields. private Coffee TheCoffee;</code>. Kotlin properties are &#39;public&#39; by default, and explicitly adding &#39;public&#39; before <code>TheCoffee</code> made no difference.  I guess even though I wrote <code>TheCoffee</code> as <code>public</code>, Kotlin hides it and creates a getter/a setter. So, in Kotlin, I cannot use field injection?"}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1510488523, "post_id": 47247696, "comment_id": 81447269, "body": "Kotlin does support field injection. Please read the error carefully, read the full name of the class, and check there. Often you forget about some test or class in another package"}, {"owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "reply_to_user": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1510490310, "post_id": 47247696, "comment_id": 81447886, "body": "Thank you. I changed <code>TheCoffee</code> to a constructor injection and it now generated the component."}, {"owner": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1510544203, "post_id": 47247696, "comment_id": 81464357, "body": "Small note about field injection: you <i>can</i> inject into fields if you annotate them with the <code>@JvmField</code> annotation. It makes the field non-private so there should not be any problems with Dagger. Please also be sure the <code>@Inject</code> annotation you put on property is actually being put its backing field (you can write <code>@field:Inject</code> to specify the annotation target explicitly)."}], "owner": {"reputation": 7895, "user_id": 455796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9a0zB.jpg?s=128&g=1", "display_name": "Damn Vegetables", "link": "https://stackoverflow.com/users/455796/damn-vegetables"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1510482290, "creation_date": 1510482290, "question_id": 47247696, "link": "https://stackoverflow.com/questions/47247696/dagger-2-does-not-generate-the-component-class-android-kotlin", "title": "Dagger 2 does not generate the component class (Android, Kotlin)", "body": "<p>Basically, I wanted to test if <code>TheCoffee</code> was automatically \"injected\". But I could not find <code>DaggerMyComponent</code>. I think I must have done something wrong, but what?</p>\n\n<p>Under the MainActivity,</p>\n\n<pre><code>@Component(modules=arrayOf(MyModule::class))\n@Singleton\ninterface MyComponent\n{\n    fun inject(coffee: CoffeeShop)\n}\n\n@Module\nclass MyModule\n{\n    @Provides\n    @Singleton\n    @ForApplication\n    fun provideCoffee():Coffee\n    {\n        return Coffee(\"Bad coffee\");\n    }\n}\n\ndata class Coffee(var Name:String)\n\nclass CoffeeShop\n{\n    @Inject\n    var TheCoffee:Coffee? = null;\n}\n\n@Qualifier\n@Retention(AnnotationRetention.RUNTIME)\nannotation class ForApplication\n</code></pre>\n\n<p>build.gradle</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n...\nkapt {\n    generateStubs = true\n}\n....\ndependencies {\n    compile 'com.google.dagger:dagger-android:2.13'\n    kapt 'com.google.dagger:dagger-android-processor:2.13'\n    compileOnly 'com.google.dagger:dagger:2.13'\n    kapt 'com.google.dagger:dagger-compiler:2.13'\n</code></pre>\n"}, {"tags": ["java", "c++", "kotlin", "v8"], "comments": [{"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 1, "creation_date": 1510461346, "post_id": 47245056, "comment_id": 81441336, "body": "Did you print out the values on the C++ side as floats just to make sure it was passed correctly? How did you create the <code>Float32Array</code>? I have a feeling the issue here is actually <code>Endianness</code>."}, {"owner": {"reputation": 305, "user_id": 2624450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6022431ca898b0d69af10b84f9202f5?s=128&d=identicon&r=PG", "display_name": "michaeltheory", "link": "https://stackoverflow.com/users/2624450/michaeltheory"}, "reply_to_user": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1510465077, "post_id": 47245056, "comment_id": 81441999, "body": "The <code>Float32Array</code> was created in a <a href=\"https://github.com/eclipsesource/J2V8\" rel=\"nofollow noreferrer\">J2V8</a> context and the lib exposes the <code>.backingStore.</code> from my code above.  I&#39;ll try to convert them to floats!"}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1510476218, "post_id": 47245056, "comment_id": 81444159, "body": "It is definitely endianness. Test: <code>Float.intBitsToFloat(Integer.reverseBytes(Float.floatToIntBi&zwnj;&#8203;ts(1.1f))) == -428967904f</code>"}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1510483199, "post_id": 47245056, "comment_id": 81445739, "body": "where is <code>length</code> gotten/set?"}, {"owner": {"reputation": 305, "user_id": 2624450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6022431ca898b0d69af10b84f9202f5?s=128&d=identicon&r=PG", "display_name": "michaeltheory", "link": "https://stackoverflow.com/users/2624450/michaeltheory"}, "edited": false, "score": 0, "creation_date": 1510502355, "post_id": 47245056, "comment_id": 81451820, "body": "I&#39;m passing the length through the native JNI command <code>public void passBuffer(byte[] bytes) { PassBuffer(bytes, bytes.length); }</code> I did print that in C++ and it was correctly displaying as 12."}, {"owner": {"reputation": 305, "user_id": 2624450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6022431ca898b0d69af10b84f9202f5?s=128&d=identicon&r=PG", "display_name": "michaeltheory", "link": "https://stackoverflow.com/users/2624450/michaeltheory"}, "reply_to_user": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1510503415, "post_id": 47245056, "comment_id": 81452228, "body": "@Brandon The consensus is <code>Endianness</code> but somehow I&#39;m even more lost :) If I cast to float in C++ <code>float floatbuffer[3]; std::copy(buffer,buffer+jlength,floatbuffer); LOGV(&quot;Float: %f&quot;, floatbuffer[0]);</code> It outputs 63.0. Another suggestion I received was to use <code>byteBuffer.order(ByteOrder.nativeOrder())</code> but that didn&#39;t change anything."}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1510504392, "post_id": 47245056, "comment_id": 81452566, "body": "@michaeltheory; I&#39;m not familiar with V8 so I can&#39;t write an answer even though I know what the problem is. I have a feeling v8 or Javascript itself might be using Little Endian.. Java and the JVM for sure uses BigEndian when reading and writing.. Try <code>byteBuffer = byteBuffer.order(ByteOrder.LITTLE_ENDIAN).slice();</code> and see if it fixes it. Perhaps your system is Big-Endian so the nativeOrder was the same. You should print your nativeOrder and order the buffer accordingly."}, {"owner": {"reputation": 305, "user_id": 2624450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6022431ca898b0d69af10b84f9202f5?s=128&d=identicon&r=PG", "display_name": "michaeltheory", "link": "https://stackoverflow.com/users/2624450/michaeltheory"}, "edited": false, "score": 0, "creation_date": 1510506703, "post_id": 47245056, "comment_id": 81453334, "body": "Yep, you&#39;re right. Do you want to post a solution so I can mark it as answered? It was as simple as adding <code>byteBuffer.order(ByteOrder.LITTLE_ENDIAN)</code> before the <code>put</code>. I swear I tried that before, but <i>shrug</i>"}, {"owner": {"reputation": 255, "user_id": 1896312, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c8b6fae981a98ee10710712b821ff2d0?s=128&d=identicon&r=PG", "display_name": "narkis", "link": "https://stackoverflow.com/users/1896312/narkis"}, "edited": false, "score": 0, "creation_date": 1532453642, "post_id": 47245056, "comment_id": 89977888, "body": "I use Java.nio,Buffer all the time with c++ / NDK in android. I do not pass the buffer itself, just the memory address, which then is read with native access on either side. This is the most efficient data transfer of values, floats, doubles and anything else between the Java and C++"}], "owner": {"reputation": 305, "user_id": 2624450, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6022431ca898b0d69af10b84f9202f5?s=128&d=identicon&r=PG", "display_name": "michaeltheory", "link": "https://stackoverflow.com/users/2624450/michaeltheory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 690, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510455982, "creation_date": 1510455982, "question_id": 47245056, "link": "https://stackoverflow.com/questions/47245056/passing-bytebuffer-array-from-java-kotlin-to-c-v8-results-in-incorrect-data", "title": "Passing ByteBuffer array from Java/Kotlin to C++/V8 results in incorrect data", "body": "<p>I'm trying to pass <code>byte[]</code> data from Kotlin to C++ to be passed to JavaScript via V8 ArrayBuffer.</p>\n\n<p>In Kotlin:</p>\n\n<pre><code>val buffer = buffer.backingStore.asFloatBuffer()\nval byteBuffer = ByteBuffer.allocate(buffer.capacity() * 4)\nbyteBuffer.asFloatBuffer().put(buffer)\n</code></pre>\n\n<p>The above works as expected and prints properly. The array is <code>[1.1, 2.2, 3.3]</code>.</p>\n\n<p>So <code>byteBuffer.array()</code> is passed through JNI to C++ is received as a <code>jbyteArray</code>. Here's where things get weird.</p>\n\n<p>In C++, I try to convert it to <code>char</code> and pass it to a JavaScript function reference:</p>\n\n<pre><code>char* buffer = (char*) env-&gt;GetByteArrayElements(jbuffer, 0);\nLocal&lt;ArrayBuffer&gt; arrayBuffer = v8::ArrayBuffer::New(isolate_, length);\nmemcpy(arrayBuffer-&gt;GetContents().Data(), buffer, length);\n\nLocal&lt;Value&gt; argv[] = {\n     arrayBuffer\n};\n\nv8::Local&lt;v8::Context&gt; ctx = hce-&gt;context_.Get(hce-&gt;isolate_);\nv8::Function *fn = *(_bufferFn-&gt;Get(isolate_));\n</code></pre>\n\n<p>In JavaScript, I receive an ArrayBuffer with the correct length, but when I initialize a <code>Float32Array</code> from it, I get <code>[-428967904, -427919360, 4.175240064796526e-8]</code>.</p>\n\n<p>I'm deep down the rabbit hole, way over my head here!</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-location"], "answers": [{"tags": [], "owner": {"reputation": 2390, "user_id": 6121643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/exMvQ.jpg?s=128&g=1", "display_name": "Irony Stack", "link": "https://stackoverflow.com/users/6121643/irony-stack"}, "is_accepted": false, "score": 2, "last_activity_date": 1510470071, "last_edit_date": 1510470071, "creation_date": 1510469678, "answer_id": 47246284, "question_id": 47244248, "link": "https://stackoverflow.com/questions/47244248/how-do-i-define-a-textview-outside-of-the-activity-class/47246284#47246284", "title": "How do I define a textview outside of the activity class?", "body": "<p>change your this line </p>\n\n<pre><code>val v = LayoutInflater.from(context).inflate(R.layout.main, null)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>val v = LayoutInflater.from(applicationContext).inflate(R.layout.main, null)\n</code></pre>\n\n<p>and again \nchange your </p>\n\n<pre><code>MainActivity.findViewById(R.id.locTextView) as TextView\n</code></pre>\n\n<p>with </p>\n\n<pre><code> val locTextView =  findViewById&lt; TextView&gt;(R.id.locTextView)\n</code></pre>\n\n<p><strong>UPDATE</strong> </p>\n\n<p>If you would like to use <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow noreferrer\">Kotlin Android Extention</a> , then say goodbye to <code>findViewById()</code> </p>\n"}], "owner": {"reputation": 315, "user_id": 3153872, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2kS78.jpg?s=128&g=1", "display_name": "StealthDroid", "link": "https://stackoverflow.com/users/3153872/stealthdroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510470071, "creation_date": 1510446292, "question_id": 47244248, "link": "https://stackoverflow.com/questions/47244248/how-do-i-define-a-textview-outside-of-the-activity-class", "title": "How do I define a textview outside of the activity class?", "body": "<p>I have a location listener object, and I wanted to know how to define a TextView outside of the activity class. In <code>LayoutInflater.from(context).inflate(R.layout.main, null)</code> I get an unresolved reference for 'context' and 'main'. For\n<code>val locTextView = MainActivity.findViewById(R.id.locTextView) as TextView1</code> I get an unresolved reference for findViewById.</p>\n\n<pre><code>private val locationListener: LocationListener = object : LocationListener {\n    override fun onLocationChanged(location: Location) {\n        val v = LayoutInflater.from(context).inflate(R.layout.main, null)\n        val locTextView = MainActivity.findViewById(R.id.locTextView) as TextView\n        locTextView.setText(\"\" + location.longitude + \":\" + location.latitude);\n    }\n    override fun onStatusChanged(provider: String, status: Int, extras: Bundle) {}\n    override fun onProviderEnabled(provider: String) {}\n    override fun onProviderDisabled(provider: String) {}\n}\n</code></pre>\n"}, {"tags": ["intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 4658, "user_id": 9585, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/eb14ff08e2e970fb4e0b732a177e04fa?s=128&d=identicon&r=PG", "display_name": "keturn", "link": "https://stackoverflow.com/users/9585/keturn"}, "edited": false, "score": 0, "creation_date": 1510607083, "post_id": 47251163, "comment_id": 81498171, "body": "I&#39;ll keep this in mind, but it feels like a last resort. Creating a new project takes you totally outside the flow of the exercises. And the test harness that actually provides the data and invokes your code is usually invisible to the student, so you&#39;d have to peek under the hood to find that file or re-create it ..."}], "tags": [], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "is_accepted": false, "score": 2, "last_activity_date": 1510504135, "creation_date": 1510504135, "answer_id": 47251163, "question_id": 47242613, "link": "https://stackoverflow.com/questions/47242613/how-can-i-debug-my-kotlin-koan/47251163#47251163", "title": "How can I debug my kotlin koan?", "body": "<p>You can create a new Kotlin project and put your code inside it and then debug it like a Java project.</p>\n\n<p>You can set breakpoints, see the output, step in, step over, etc.</p>\n"}], "owner": {"reputation": 4658, "user_id": 9585, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/eb14ff08e2e970fb4e0b732a177e04fa?s=128&d=identicon&r=PG", "display_name": "keturn", "link": "https://stackoverflow.com/users/9585/keturn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510504135, "creation_date": 1510433138, "question_id": 47242613, "link": "https://stackoverflow.com/questions/47242613/how-can-i-debug-my-kotlin-koan", "title": "How can I debug my kotlin koan?", "body": "<p>I'm fiddling around a bit while working through the <a href=\"https://kotlinlang.org/docs/tutorials/edu-tools-learner.html\" rel=\"nofollow noreferrer\">Kotlin Koans in IDEA</a> and I'd like to debug my code.</p>\n\n<p>How do I run my koan task under the debugger?</p>\n\n<p>Failing that, where do I at least see the output of a <code>println</code> in my code?</p>\n"}, {"tags": ["spring", "kotlin", "project-reactor", "reactive"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5751666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67f304be6c4194771af0afcd391a0e0?s=128&d=identicon&r=PG&f=1", "display_name": "Arno", "link": "https://stackoverflow.com/users/5751666/arno"}, "is_accepted": false, "score": 2, "last_activity_date": 1513491111, "creation_date": 1513491111, "answer_id": 47852666, "question_id": 47242335, "link": "https://stackoverflow.com/questions/47242335/how-to-check-if-mono-is-empty/47852666#47852666", "title": "How to check if Mono is empty?", "body": "<p>Let me start by saying I am a newbie on reactive (java) and on this forum.\nI think you cannot really check in this code if a mono is empty because a mono represents code that will be executed later on, so in this code body you won't know yet if its is empty. Does that make sense?</p>\n\n<p>I just wrote something similar in Java which seems to work (but not 100% this is the best approach either):</p>\n\n<pre><code>    public Mono&lt;ServerResponse&gt; queryStore(ServerRequest request) { \n\n        Optional&lt;String&gt; postalCode = request.queryParam(\"postalCode\");                            \n\n        Mono&lt;ServerResponse&gt; badQuery = ServerResponse.badRequest().build();\n        Mono&lt;ServerResponse&gt; notFound = ServerResponse.notFound().build();\n\n        if (!postalCode.isPresent()) { return  badQuery; }\n\n        Flux&lt;Store&gt; stores = this.repository\n                .getNearByStores(postalCode.get(), 5);\n\n        return ServerResponse.ok().contentType(APPLICATION_JSON)\n                .body(stores, Store.class)\n                .switchIfEmpty(notFound);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 752, "user_id": 2807311, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a119a74f562342de51f83e959b1b5f24?s=128&d=identicon&r=PG&f=1", "display_name": "voliveira89", "link": "https://stackoverflow.com/users/2807311/voliveira89"}, "edited": false, "score": 0, "creation_date": 1517095543, "post_id": 48140016, "comment_id": 83956147, "body": "The first solution doesn&#39;t compile... Could you check it? Also, there is no badRequest method with a string parameter."}, {"owner": {"reputation": 8090, "user_id": 4891253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a7b6ff38e865dafa02259ed769eab4?s=128&d=identicon&r=PG", "display_name": "Oleh Dokuka", "link": "https://stackoverflow.com/users/4891253/oleh-dokuka"}, "reply_to_user": {"reputation": 752, "user_id": 2807311, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a119a74f562342de51f83e959b1b5f24?s=128&d=identicon&r=PG&f=1", "display_name": "voliveira89", "link": "https://stackoverflow.com/users/2807311/voliveira89"}, "edited": false, "score": 0, "creation_date": 1517124920, "post_id": 48140016, "comment_id": 83961047, "body": "@voliveira, Could you point me to which language this example has been written since I just tried to follow your code convention"}, {"owner": {"reputation": 8090, "user_id": 4891253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a7b6ff38e865dafa02259ed769eab4?s=128&d=identicon&r=PG", "display_name": "Oleh Dokuka", "link": "https://stackoverflow.com/users/4891253/oleh-dokuka"}, "reply_to_user": {"reputation": 752, "user_id": 2807311, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a119a74f562342de51f83e959b1b5f24?s=128&d=identicon&r=PG&f=1", "display_name": "voliveira89", "link": "https://stackoverflow.com/users/2807311/voliveira89"}, "edited": false, "score": 0, "creation_date": 1517176867, "post_id": 48140016, "comment_id": 83976724, "body": "@voliveira89 fixed"}, {"owner": {"reputation": 752, "user_id": 2807311, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a119a74f562342de51f83e959b1b5f24?s=128&d=identicon&r=PG&f=1", "display_name": "voliveira89", "link": "https://stackoverflow.com/users/2807311/voliveira89"}, "edited": false, "score": 0, "creation_date": 1517263032, "post_id": 48140016, "comment_id": 84016197, "body": "Doesn&#39;t compile also! The example you gave (that is totally equals to what I wrote in my code) makes sense, but intellij raise a error in the bracket that closes the function: &quot;A &#39;return&#39; expression required in a function with a block body (&#39;{...}&#39;)&quot;"}, {"owner": {"reputation": 8090, "user_id": 4891253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a7b6ff38e865dafa02259ed769eab4?s=128&d=identicon&r=PG", "display_name": "Oleh Dokuka", "link": "https://stackoverflow.com/users/4891253/oleh-dokuka"}, "reply_to_user": {"reputation": 752, "user_id": 2807311, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a119a74f562342de51f83e959b1b5f24?s=128&d=identicon&r=PG&f=1", "display_name": "voliveira89", "link": "https://stackoverflow.com/users/2807311/voliveira89"}, "edited": false, "score": 0, "creation_date": 1517299269, "post_id": 48140016, "comment_id": 84027391, "body": "could you please point me to the particular line in the code snippet above?"}, {"owner": {"reputation": 752, "user_id": 2807311, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a119a74f562342de51f83e959b1b5f24?s=128&d=identicon&r=PG&f=1", "display_name": "voliveira89", "link": "https://stackoverflow.com/users/2807311/voliveira89"}, "edited": false, "score": 0, "creation_date": 1517301640, "post_id": 48140016, "comment_id": 84028784, "body": "The last line of the first solution (the one that you edited)."}], "tags": [], "owner": {"reputation": 8090, "user_id": 4891253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a7b6ff38e865dafa02259ed769eab4?s=128&d=identicon&r=PG", "display_name": "Oleh Dokuka", "link": "https://stackoverflow.com/users/4891253/oleh-dokuka"}, "is_accepted": false, "score": 43, "last_activity_date": 1557074900, "last_edit_date": 1557074900, "creation_date": 1515347995, "answer_id": 48140016, "question_id": 47242335, "link": "https://stackoverflow.com/questions/47242335/how-to-check-if-mono-is-empty/48140016#48140016", "title": "How to check if Mono is empty?", "body": "<p>The techniques that allow checking whether <code>Flux</code>/<code>Mono</code> is empty</p>\n\n<p>Using operators <code>.switchIfEmpty</code>/<code>.defaultIfEmpty</code>/<code>Mono.repeatWhenEmpty</code></p>\n\n<p>Using mentioned operators you will be able to react to the case when Stream has been completed without emitting any elements. </p>\n\n<p>First of all, remember that operators such <code>.map</code>, <code>.flatMap</code>, <code>.filter</code> and many others will not be invoked at all if there no <code>onNext</code> has been invoked.\nThat means that in your case next code </p>\n\n<pre><code>transaction.flatMap {\n    val user = userRepository.findById(it.userId)\n    // If it's empty, return badRequest() \n} \n\nreturn transaction.flatMap { transactionRepository.save(it).then(created(URI.create(\"/transaction/\" + it.id)).build()) }\n</code></pre>\n\n<p><strong>will not be invoked at all, if <code>transaction</code> will be empty</strong>.</p>\n\n<p>In case if there is a requirement for handling cases when your flow is empty, you should consider operators like next in the following manner:  </p>\n\n<pre><code>transaction\n   .flatMap(it -&gt; {\n      val user = userRepository.findById(it.userId)\n   })\n   .swithIfEmpty(Flux.defer(() -&gt; Flux.just(badRequest())));\n</code></pre>\n\n<h1>Actual solution</h1>\n\n<p>Also, I have noted that you created two sub-flows from the main <code>transaction</code>. Actually, following code will not be executed at all:</p>\n\n<pre><code>transaction.flatMap {\n    val user = userRepository.findById(it.userId)\n    // If it's empty, return badRequest() \n}  \n</code></pre>\n\n<p>and will be only executed the last one, which is returned from the method. That happens because you ain't subscribed using operator <code>.subscribe(...)</code>.</p>\n\n<p>The second point, you can't subscribe to the same request body more the one time (kind of limitation for <code>WebClient</code>'s reponse). Thus you are required to share your request body in the next way, so completed example will be: </p>\n\n<pre><code>fun createTransaction(serverRequest: ServerRequest): Mono&lt;ServerResponse&gt; {\n    val transaction = serverRequest.body(BodyExtractors.toMono(Transaction::class.java)).cache()\n\n    transaction\n            .flatMap { userRepository.findById(it.userId) }\n            .flatMap { transaction.flatMap { transactionRepository.save(it) } }\n            .flatMap { ServerResponse.created(URI.create(\"/transaction/\" + it.id)).build() }\n            .switchIfEmpty(transaction.flatMap { ServerResponse.badRequest().syncBody(\"missed User for transaction \" + it.id) })\n}\n</code></pre>\n\n<p>Or more simple case without sharing transaction flow but using <code>Tuple</code>: </p>\n\n<pre><code>fun createTransaction(serverRequest: ServerRequest): Mono&lt;ServerResponse&gt; {\n    val emptyUser = !User()\n    val transaction = serverRequest.body&lt;Mono&lt;Transaction&gt;&gt;(BodyExtractors.toMono(Transaction::class.java))\n\n    transaction\n            .flatMap { t -&gt;\n                userRepository.findById(t.userId)\n                        .map { Tuples.of(t, it) }\n                        .defaultIfEmpty(Tuples.of(t, emptyUser))\n            }\n            .flatMap {\n                if (it.t2 != emptyUser) {\n                    transactionRepository.save(it.t1)\n                            .flatMap { ServerResponse.created(URI.create(\"/transaction/\" + it.id)).build() }\n                } else {\n                    ServerResponse.badRequest().syncBody(\"missed User for transaction \" + it.t1.id)\n                }\n            }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 13039120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfc42116975761baaaf5b4f31d883f5?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/13039120/anil"}, "is_accepted": false, "score": 0, "last_activity_date": 1588841371, "creation_date": 1588841371, "answer_id": 61653601, "question_id": 47242335, "link": "https://stackoverflow.com/questions/47242335/how-to-check-if-mono-is-empty/61653601#61653601", "title": "How to check if Mono is empty?", "body": "<p>We can use switchIfEmpty method for this </p>\n\n<p>Below example, I'm checking if the user exists with email if not then add it</p>\n\n<pre><code>userRepository.findByEmail(user.getEmail())\n                .switchIfEmpty(s -&gt; {\n                    user.setStatus(\"InActive\");\n                    String encodedPassword = DigestUtils.sha256Hex(user.getPassword());\n                    user.setPassword(encodedPassword);\n                    userRepository.save(user).subscribe();\n                    s.onComplete();\n                }).then(Mono.just(user));\n</code></pre>\n"}], "owner": {"reputation": 752, "user_id": 2807311, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a119a74f562342de51f83e959b1b5f24?s=128&d=identicon&r=PG&f=1", "display_name": "voliveira89", "link": "https://stackoverflow.com/users/2807311/voliveira89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51530, "favorite_count": 10, "answer_count": 3, "score": 37, "last_activity_date": 1588841371, "creation_date": 1510431168, "last_edit_date": 1553523982, "question_id": 47242335, "link": "https://stackoverflow.com/questions/47242335/how-to-check-if-mono-is-empty", "title": "How to check if Mono is empty?", "body": "<p>I'm developing a app with Spring Boot 2.0 and Kotlin using the WebFlux framework.</p>\n\n<p>I want to check if a user id exits before save a transaction. I'm stucked in a simple thing like validate if a Mono is empty. </p>\n\n<pre><code>fun createTransaction(serverRequest: ServerRequest) : Mono&lt;ServerResponse&gt; {\n    val transaction = serverRequest.body(BodyExtractors.toMono(Transaction::class.java))\n\n    transaction.flatMap {\n        val user = userRepository.findById(it.userId)\n        // If it's empty, return badRequest() \n    } \n\n    return transaction.flatMap { transactionRepository.save(it).then(created(URI.create(\"/transaction/\" + it.id)).build()) }\n}\n</code></pre>\n\n<p>It is possible to do what I want?</p>\n"}, {"tags": ["unit-testing", "junit", "kotlin", "mockito", "rx-java2"], "comments": [{"owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "edited": false, "score": 0, "creation_date": 1521279983, "post_id": 47241146, "comment_id": 85670768, "body": "I think <code>verify(o2, never()).reload()</code> is just a bad test for this scenario. For example, you could have an implementation <code>o1.updateUser(params).andThen((CompletableObserver cs) -&gt; o2.reload())</code> which would pass the test, but should not."}], "answers": [{"tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 3, "last_activity_date": 1510423727, "creation_date": 1510423727, "answer_id": 47241196, "question_id": 47241146, "link": "https://stackoverflow.com/questions/47241146/mockito-never-not-working-with-andthen-rxjava2/47241196#47241196", "title": "Mockito never() not working with andThen rxjava2", "body": "<p>What you wrote in the test is actually: </p>\n\n<pre><code>Completable c2 = o2.reload(); \no1.updateUser(params).andThen(c2);\n</code></pre>\n\n<p>What you probably wanted is:</p>\n\n<pre><code>o1.updateUser(params).andThen(Completable.defer(() -&gt; o2.reload()));\n</code></pre>\n\n<p>This way, <code>o2.reload()</code> gets only called if the execution of <code>andThen</code> completes normally and subscribes to the deferred <code>Completable</code>.</p>\n"}], "owner": {"reputation": 191, "user_id": 6752443, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154009305770805/picture?type=large", "display_name": "Kacper Roszczyna", "link": "https://stackoverflow.com/users/6752443/kacper-roszczyna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 1, "accepted_answer_id": 47241196, "answer_count": 1, "score": 2, "last_activity_date": 1510423727, "creation_date": 1510423443, "question_id": 47241146, "link": "https://stackoverflow.com/questions/47241146/mockito-never-not-working-with-andthen-rxjava2", "title": "Mockito never() not working with andThen rxjava2", "body": "<p>I am testing a fairly simple piece of code written in Kotlin:</p>\n\n<pre><code>o1.updateUser(params)\n     .andThen(o2.reload())\n</code></pre>\n\n<p>When updateUser fails I expect that reload will not be executed. But when testing with Mockito 2 and jUnit 5 there is an invocation of said mock.</p>\n\n<p>the mocking is done like that:</p>\n\n<pre><code>given(o1.updateUser(user)).willReturn(Completable.error(IllegalArgumentException())\ngiven(o2.reload()).willReturn(Completable.complete())\n</code></pre>\n\n<p>Now the problem is that the code behaves as expected, meaning that in this case o2 is never actually called, but while unit testing Mockito claims that there was an invocation of o1. </p>\n\n<p>Test assertion looks as follows:</p>\n\n<pre><code>verify(o2, never()).reload()\n</code></pre>\n\n<p>Did I do something wrong here? Is there a way around this? Am I understanding the operator somehow incorrectly? </p>\n"}, {"tags": ["android", "android-studio", "kotlin", "dagger-2", "dagger"], "answers": [{"comments": [{"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1510667557, "post_id": 47264445, "comment_id": 81525078, "body": "But how can i actually inject and get actual implementation of the RxRepository interface in my LocationManager in location_core? I was passing it to my constructor. Also, see my updated question. Actually,  it should be done only in those 3 modules, not in the 4th"}, {"owner": {"reputation": 4001, "user_id": 2711056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d97e42c16478ae2a756bd8a52a83fc7b?s=128&d=identicon&r=PG", "display_name": "MyDogTom", "link": "https://stackoverflow.com/users/2711056/mydogtom"}, "reply_to_user": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1510691205, "post_id": 47264445, "comment_id": 81540190, "body": "In that case use &quot;another approach&quot; that I described. Create to versions of <code>LocationComponent</code> each for different flavor (eg. build variant). One flavor depends on <code>location_gms</code>, another on <code>location_native</code>"}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1510743641, "post_id": 47264445, "comment_id": 81561632, "body": "I guess the better solution will be with your suggestion to use consumer_module actually, thanks"}], "tags": [], "owner": {"reputation": 4001, "user_id": 2711056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d97e42c16478ae2a756bd8a52a83fc7b?s=128&d=identicon&r=PG", "display_name": "MyDogTom", "link": "https://stackoverflow.com/users/2711056/mydogtom"}, "is_accepted": false, "score": 1, "last_activity_date": 1510576313, "creation_date": 1510576313, "answer_id": 47264445, "question_id": 47240813, "link": "https://stackoverflow.com/questions/47240813/how-to-have-implementation-of-interface-repository-in-other-project-module-in-an/47264445#47264445", "title": "How to have implementation of interface repository in other project module in AndroidStudio using Dagger2 and Kotlin", "body": "<blockquote>\n  <p>Of course i must point, that those 3 modules never be together i guess, it will be 2 modules in each build_variant i guess.</p>\n</blockquote>\n\n<p>That's the main point to pay attention. Your component definition shouldn't be inside <code>location_core</code>. Instead, it should be on \"consumer\" side. By consumer, I mean forth module that actually uses location. Let's call it <code>consumer_module</code>.</p>\n\n<p>How I would approach this task.</p>\n\n<ol>\n<li><p>Both <code>location_gms</code> and <code>location_native</code> should contain <code>LocationModule</code> with different implementation. Use the same package name for <code>LocationModule</code> in both modules.</p></li>\n<li><p><code>consumer_module</code> contains <code>LocationComponent</code>. Depending on build variant it will be resolved to <code>LocationModule</code> from <code>location_gms</code> or <code>location_native</code>.</p></li>\n</ol>\n\n<p>Another approach would be the same for <code>LocationModule</code>, but creating in <code>consumer_module</code> two <code>LocationComponent</code>. Each in different build variant. In that approach you don't have to keep same package name for <code>LocationModule</code>.</p>\n"}], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510659919, "creation_date": 1510421454, "last_edit_date": 1510659919, "question_id": 47240813, "link": "https://stackoverflow.com/questions/47240813/how-to-have-implementation-of-interface-repository-in-other-project-module-in-an", "title": "How to have implementation of interface repository in other project module in AndroidStudio using Dagger2 and Kotlin", "body": "<p>I want to be able to have 2 different reactive implementation of the interface that is getting user location in other project module in AndroidStudio.</p>\n\n<p>So to be specific it can be by using gms, or by just native android LocationManager.</p>\n\n<p>Here is my repository interface:</p>\n\n<pre><code>interface RxLocationRepository {\n\n@SuppressLint(\"MissingPermission\")\nfun onLocationUpdate(): Observable&lt;Location&gt;\n\nfun stopLocationUpdates()\n}\n</code></pre>\n\n<p>So for now, i implement this interface here, in class that is in the same project module in AndroidStudio:</p>\n\n<pre><code>class RxLocationRepositoryImpl(val reactiveLocationProvider: ReactiveLocationProvider,\n                           val reactiveLocationRequest: LocationRequest,\n                           val isUsingLocationNativeApi: Boolean,\n                           val locationManager: LocationManager,\n                           val geoEventsDistanceMeters: Int,\n                           val geoEventsIntervalSeconds: Int\n) : RxLocationRepository {\n\n\nvar locationToPopulate: Location = Location(LocationManager.GPS_PROVIDER)\nlateinit var mLocationCallbackNativeApi: LocationListener\nprivate val subject: BehaviorSubject&lt;Location&gt; = BehaviorSubject.createDefault(locationToPopulate)\nvar locationEmitter: Observable&lt;Location&gt; = subject.hide()\n\ninit {\n    configureEmitter()\n}\n\n@SuppressLint(\"MissingPermission\")\nprivate fun configureEmitter(){\n    if (!isUsingLocationNativeApi)\n      locationEmitter = reactiveLocationProvider.getUpdatedLocation(reactiveLocationRequest)\n    else{\n      configureNativeLocationEmitter()\n    }\n}\n\n@SuppressLint(\"MissingPermission\")\nprivate fun configureNativeLocationEmitter() {\n\n    mLocationCallbackNativeApi = object : LocationListener {\n\n        override fun onLocationChanged(location: Location) {\n            subject.onNext(location)\n        }\n\n        override fun onStatusChanged(provider: String, status: Int, extras: Bundle) {}\n\n        override fun onProviderEnabled(provider: String) {}\n\n        override fun onProviderDisabled(provider: String) {}\n\n    }\n\n    try {\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,\n                (geoEventsIntervalSeconds * 1000).toLong(),\n                geoEventsDistanceMeters.toFloat(),\n                mLocationCallbackNativeApi,\n                Looper.getMainLooper())\n    } catch (ignored: IllegalArgumentException) {\n        ignored.printStackTrace()\n    }\n\n    try {\n        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,\n                (geoEventsIntervalSeconds * 1000).toLong(),\n                geoEventsDistanceMeters.toFloat(),\n                mLocationCallbackNativeApi,\n                Looper.getMainLooper())\n    } catch (ignored: IllegalArgumentException) {\n        ignored.printStackTrace()\n    }\n}\n\n@SuppressLint(\"MissingPermission\")\noverride fun onLocationUpdate(): Observable&lt;Location&gt; {\n    return locationEmitter\n}\n\noverride fun stopLocationUpdates() {\n    if(isUsingLocationNativeApi)\n    locationManager.removeUpdates(mLocationCallbackNativeApi)\n  }\n}\n</code></pre>\n\n<p>So everything is fine, but now i want to have the gms implementation of this in different project module(so i don't need to have gms dependencies in the gradle) and also the native implementation to the other module in Android Studio.</p>\n\n<p>The final structure of the project in AndroidStudio will be like location_core, location_gms, location_native.</p>\n\n<p>The location_core must not be aware of location_gms and native, i guess in opposite to them - they will have the dependency to location_core.</p>\n\n<p>So now, i i have just location_core project module and a LocationClient class, which will provide the context:</p>\n\n<pre><code>class LocationClient @Inject constructor(val nexoLocationManager: NexoLocationManager){\ncompanion object {\n\n    private var locationClient: LocationClient? = null\n\n    fun obtainLocationClient(context: Context): LocationClient{\n        val result = locationClient ?:\n                DaggerLocationComponent\n                        .builder()\n                        .context(context)\n                        .build()\n                        .locationClient()\n\n        locationClient = result\n        return result\n    }\n  }\n}\n</code></pre>\n\n<p>It is using some Dagger Component, which provide him all the implementation of different objects.\nSo i want to move this LocationClient or make it abstract in location_core project module and move the implementation of it in each location_gms and location_native project module in AndroidStudio.</p>\n\n<p>So the LocationClient class in each of them will provide the different implementation of this RxRepository.\nFor now in each location_gms and location_native project module i have just implementation class which implements the repository rxLocationRepository(which i move from the implementation written above) on its own way.</p>\n\n<p>The problem is i don't know exactly how to manage all of this with Dagger.\nNow i am using Dagger like this in my location_core, here is the LocationComponent:</p>\n\n<pre><code>@Singleton\n@Component(modules = arrayOf(LocationModule::class))\ninterface LocationComponent{\nfun locationClient(): LocationClient\n\n@Component.Builder\ninterface Builder {\n    @BindsInstance\n    fun context(context: Context): Builder\n    fun build(): LocationComponent\n }\n\n}\n</code></pre>\n\n<p>and its module:</p>\n\n<pre><code>@Module\nclass LocationModule {\n\n//some stuff\n\n    @Provides\n@Singleton\nfun providesRxLocationRepository(\n                                 reactiveLocationProvider: ReactiveLocationProvider,\n                                 reactiveLocationRequest: LocationRequest,\n                                 @Named(\"CONFIG_LOCATION_USE_NATIVE_API\")isUsingLocationNativeApi: Boolean,\n                                 locationManager: LocationManager,\n                                 @Named(\"CONFIG_LOCATION_GEO_EVENTS_DISTANCE_METERS\")geoEventsDistanceMeters: Int,\n                                 @Named(\"CONFIG_LOCATION_GEO_EVENTS_INTERVAL_SECONDS\")geoEventsIntervalSeconds: Int\n): RxLocationRepository = RxLocationRepositoryImpl(\n        reactiveLocationProvider,\n        reactiveLocationRequest,\n        isUsingLocationNativeApi,\n        locationManager,\n        geoEventsDistanceMeters,\n        geoEventsIntervalSeconds)\n\n//some other stuff\n}\n</code></pre>\n\n<p>So how to write the actual LocationClient in each of the modules - location_gms and the location_native? How to provide the implementation of the rxLocationRepository which is in each of the location_gms and location_native project modules with Dagger, so that i can just use the interface RxLocationRepository in my location_core module and don't be bother of its implementation, because it will be in each project module?</p>\n\n<p>Of course i must point, that those 3 modules never be together i guess, it will be 2 modules in each build_variant i guess.\nSo i have to get rid of the google services dependency in location_core project module build.gradle.</p>\n\n<p><a href=\"https://i.stack.imgur.com/gMtdF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gMtdF.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>How i can actually don't have Dagger component in my location_core, in which i am using it in tests like:\n<code>\n val component = DaggerLocationTestInstrumentalComponent.builder().context(InstrumentationRegistry.getContext()).build()\n    val database = component.testDatabase()\n    val locationManager = component.locationClient().nexoLocationManager\n</code></p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510433218, "post_id": 47242532, "comment_id": 81435847, "body": "Thanks for answer, but how can I start new activity with this ?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "edited": false, "score": 0, "creation_date": 1510433384, "post_id": 47242532, "comment_id": 81435887, "body": "You can write any code inside the block where you handle the click of the navigation item - just write the code that starts the new <code>Activity</code> there. If you don&#39;t know how to do that, you should look at some beginner tutorials on Android first."}, {"owner": {"reputation": 1332, "user_id": 8310287, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/07715836fa324278e897e1646d7400f1?s=128&d=identicon&r=PG&f=1", "display_name": "King", "link": "https://stackoverflow.com/users/8310287/king"}, "edited": false, "score": 0, "creation_date": 1539036740, "post_id": 47242532, "comment_id": 92347706, "body": "hi, kindly checkout this question thanks in advance <a href=\"https://stackoverflow.com/questions/52710582/nav-header-main-not-displaying-textvalues-from-mainactivity-kt\" title=\"nav header main not displaying textvalues from mainactivity kt\">stackoverflow.com/questions/52710582/&hellip;</a>"}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 1, "creation_date": 1561059623, "post_id": 47242532, "comment_id": 99950936, "body": "This works but messes with the navigation controller if you are using one of those."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 18, "last_activity_date": 1510432445, "creation_date": 1510432445, "answer_id": 47242532, "question_id": 47240735, "link": "https://stackoverflow.com/questions/47240735/android-kotlin-cant-call-onnavigationitemselected-method/47242532#47242532", "title": "Android Kotlin - Can&#39;t call onNavigationItemSelected method", "body": "<p>You can give your <code>NavigationView</code> an ID in your layout file:</p>\n\n<pre><code>&lt;android.support.design.widget.NavigationView\n    android:id=\"@+id/navigationView\"\n    ... &gt;\n&lt;/android.support.design.widget.NavigationView&gt;\n</code></pre>\n\n<p>And then add a listener to it in your <code>UserActivity</code>:</p>\n\n<pre><code>navigationView.setNavigationItemSelectedListener {\n    when (it.itemId) {\n        R.id.nav_home -&gt; {\n            // handle click\n            true\n        }\n        else -&gt; false\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1391, "user_id": 4308897, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X67wO4XjVAE/AAAAAAAAAAI/AAAAAAAAADw/NacwJv67gHI/photo.jpg?sz=128", "display_name": "Ercan", "link": "https://stackoverflow.com/users/4308897/ercan"}, "is_accepted": false, "score": 1, "last_activity_date": 1568367833, "creation_date": 1568367833, "answer_id": 57921152, "question_id": 47240735, "link": "https://stackoverflow.com/questions/47240735/android-kotlin-cant-call-onnavigationitemselected-method/57921152#57921152", "title": "Android Kotlin - Can&#39;t call onNavigationItemSelected method", "body": "<p>@zsmb13 's code works but somehow messes with closing drawer.</p>\n\n<p>I edited code as below, and it works fine</p>\n\n<pre><code>    navigationView.setNavigationItemSelectedListener { menuItem -&gt;\n        when (menuItem.itemId) {\n            R.id.nav_gallery -&gt; {\n                handleGalleryOption()\n                if (drawer_layout.isDrawerOpen(GravityCompat.START)) {\n                    drawer_layout.closeDrawer(GravityCompat.START)\n                }\n                true\n            }\n            else -&gt; {\n                if (drawer_layout.isDrawerOpen(GravityCompat.START)) {\n                    drawer_layout.closeDrawer(GravityCompat.START)\n                }\n                false\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 595, "user_id": 8447389, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cfd0136eaadadee6140932e796939f69?s=128&d=identicon&r=PG&f=1", "display_name": "xaos_xv", "link": "https://stackoverflow.com/users/8447389/xaos-xv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6253, "favorite_count": 0, "accepted_answer_id": 47242532, "answer_count": 2, "score": 9, "last_activity_date": 1568367833, "creation_date": 1510421003, "question_id": 47240735, "link": "https://stackoverflow.com/questions/47240735/android-kotlin-cant-call-onnavigationitemselected-method", "title": "Android Kotlin - Can&#39;t call onNavigationItemSelected method", "body": "<p>I made drawer menu in Kotlin and I want to use this menu items. In java I was calling <code>onNavigationItemSelected</code> method but when I want to use it in Kotlin it doesn't appearing. Here is my code:</p>\n\n<pre><code>&lt;android.support.v4.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:id=\"@+id/drawerLayout\"\n    tools:context=\"com.example.zamknijryjx.liobrus.UserActivity\"&gt;\n\n    &lt;android.support.constraint.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/imie\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"8dp\"\n            android:layout_marginStart=\"8dp\"\n            android:layout_marginTop=\"40dp\"\n            android:text=\"Imie\"\n            android:textSize=\"50sp\"\n            android:textColor=\"@color/black\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n\n    &lt;android.support.design.widget.NavigationView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        app:menu=\"@menu/navigation_menu\"\n        android:layout_gravity=\"start\"\n        app:headerLayout=\"@layout/navigation_header\"&gt;\n    &lt;/android.support.design.widget.NavigationView&gt;\n\n&lt;/android.support.v4.widget.DrawerLayout&gt;\n</code></pre>\n\n<p>Here is <code>navigation_menu.xml</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;item android:id=\"@+id/nav_home\"\n        android:title=\"Home\"/&gt;\n\n    &lt;item android:id=\"@+id/nav_sprawdziany\"\n        android:title=\"Sprawdziany\"/&gt;\n    &lt;item android:id=\"@+id/nav_prace\"\n        android:title=\"Prace klasowe\"/&gt;\n\n&lt;/menu&gt;\n</code></pre>\n\n<p>And code in my Activity:</p>\n\n<pre><code>mToggle = ActionBarDrawerToggle(this, drawerLayout, R.string.open, R.string.close)\ndrawerLayout.addDrawerListener(mToggle!!)\nmToggle!!.syncState()\n\nsupportActionBar!!.setDisplayHomeAsUpEnabled(true)\n\noverride fun onOptionsItemSelected(item: MenuItem?): Boolean {\n\n    if (mToggle!!.onOptionsItemSelected(item)) {\n        return true\n    }\n\n    return super.onOptionsItemSelected(item)\n}\n</code></pre>\n\n<p>So I want to make something like this: When user click menu item with id for example <code>nav_home</code> it makes toast. Thanks a lot for help!</p>\n"}, {"tags": ["functional-programming", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 1, "last_activity_date": 1510418853, "creation_date": 1510418853, "answer_id": 47240360, "question_id": 47240309, "link": "https://stackoverflow.com/questions/47240309/how-to-extract-map-from-collection-of-objects-with-the-key-as-one-of-the-object/47240360#47240360", "title": "How to extract Map from collection of objects, with the key as one of the objects same field and value the actual objects", "body": "<p>Seems like you're just looking for the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/group-by.html\" rel=\"nofollow noreferrer\"><code>groupBy</code></a> method from the standard library:</p>\n\n<pre><code>rssiEvents.groupBy { it.identifier }\n</code></pre>\n"}], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 47240360, "answer_count": 1, "score": 1, "last_activity_date": 1510418853, "creation_date": 1510418580, "question_id": 47240309, "link": "https://stackoverflow.com/questions/47240309/how-to-extract-map-from-collection-of-objects-with-the-key-as-one-of-the-object", "title": "How to extract Map from collection of objects, with the key as one of the objects same field and value the actual objects", "body": "<p>I have a structure like this:</p>\n\n<pre><code>data class LocationRSSIEvent(\n    val idRSSIEvent: Long = 0,\n    val identifier: Identifier,\n    val rssi: Int,\n    val timestampRSSIEvent: Long) : LocationEvent()\n</code></pre>\n\n<p>I want to be able to use some function in Kotlin to get result like this:</p>\n\n<pre><code>fun getRSSIMultimap(rssiEvents: Collection&lt;LocationRSSIEvent&gt;): Map&lt;Identifier, List&lt;LocationRSSIEvent&gt;&gt;\n</code></pre>\n\n<p>So for example i have a list of LocationRSSIEvents, but each LocationRSSIEvent inside of it can contain different Identifier object. I want to be able to extract LocationRSSIEvents that have the same Identifier to the Map that will contain Identifier as a key of this map, and the list of those LocationRSSIEvents that have the same Identifier as a value.</p>\n\n<p>I hope everything is clear, is there a simple way to achive this?</p>\n"}, {"tags": ["android", "background", "kotlin", "transparent"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5874483, "user_type": "registered", "profile_image": "https://graph.facebook.com/1647833625469949/picture?type=large", "display_name": "Shehryar Afridi", "link": "https://stackoverflow.com/users/5874483/shehryar-afridi"}, "edited": false, "score": 0, "creation_date": 1510426463, "post_id": 47240917, "comment_id": 81433701, "body": "I tried  but its not working for me , showing white background each time . then i created java class in same project for testing purpose tranparent layout of java class is working properly ... its only not working in kt classes"}], "tags": [], "owner": {"reputation": 6459, "user_id": 1820644, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ca7cb3fa8045dcc37490bcb4cbb09cef?s=128&d=identicon&r=PG", "display_name": "kirtan403", "link": "https://stackoverflow.com/users/1820644/kirtan403"}, "is_accepted": false, "score": 0, "last_activity_date": 1510422006, "creation_date": 1510422006, "answer_id": 47240917, "question_id": 47239900, "link": "https://stackoverflow.com/questions/47239900/is-it-possible-to-make-background-of-activity-layout-transparent-in-kotlin-andro/47240917#47240917", "title": "Is it possible to make background of activity layout transparent in kotlin android", "body": "<p>This has nothing to do with <code>Kotlin</code>. Just add this line to your theme:</p>\n\n<pre><code>&lt;item name=\"android:windowBackground\"&gt;@android:color/transparent&lt;/item&gt;\n</code></pre>\n\n<p>For more details and other properties of your need, refer to <a href=\"https://stackoverflow.com/a/2700683/1820644\">this</a> answer.</p>\n"}], "owner": {"reputation": 1, "user_id": 5874483, "user_type": "registered", "profile_image": "https://graph.facebook.com/1647833625469949/picture?type=large", "display_name": "Shehryar Afridi", "link": "https://stackoverflow.com/users/5874483/shehryar-afridi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 740, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1510422085, "creation_date": 1510416090, "last_edit_date": 1510422085, "question_id": 47239900, "link": "https://stackoverflow.com/questions/47239900/is-it-possible-to-make-background-of-activity-layout-transparent-in-kotlin-andro", "title": "Is it possible to make background of activity layout transparent in kotlin android", "body": "<p>I downloaded code of github repo: <a href=\"https://github.com/SimpleMobileTools/Simple-Calendar\" rel=\"nofollow noreferrer\">https://github.com/SimpleMobileTools/Simple-Calendar</a> which is written in <code>kotlin</code> android, In that project my requirement is to make background of one of my activity transparent, but still I failed to achieve that.</p>\n"}, {"tags": ["css", "spring", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 8706, "user_id": 1030168, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/669173718862d56b867946d485f57a7e?s=128&d=identicon&r=PG", "display_name": "Robbo_UK", "link": "https://stackoverflow.com/users/1030168/robbo-uk"}, "edited": false, "score": 0, "creation_date": 1510415199, "post_id": 47239426, "comment_id": 81429660, "body": "have you tried static/css/profile.css"}, {"owner": {"reputation": 840, "user_id": 6540008, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/PDdoF.jpg?s=128&g=1", "display_name": "Ali Akbarpour", "link": "https://stackoverflow.com/users/6540008/ali-akbarpour"}, "edited": false, "score": 0, "creation_date": 1510415372, "post_id": 47239426, "comment_id": 81429721, "body": "please take a look to this link  <a href=\"https://stackoverflow.com/questions/29018892/how-add-static-web-content-in-spring-boot\" title=\"how add static web content in spring boot\">stackoverflow.com/questions/29018892/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 840, "user_id": 6540008, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/PDdoF.jpg?s=128&g=1", "display_name": "Ali Akbarpour", "link": "https://stackoverflow.com/users/6540008/ali-akbarpour"}, "is_accepted": false, "score": 0, "last_activity_date": 1518373542, "last_edit_date": 1518373542, "creation_date": 1510415669, "answer_id": 47239836, "question_id": 47239426, "link": "https://stackoverflow.com/questions/47239426/spring-boot-can-not-include-static-resource/47239836#47239836", "title": "Spring Boot - can not include static resource", "body": "<p>this is a good example if you are trying to start with static content with jsp pages.</p>\n\n<p>I hope this can help </p>\n\n<p><a href=\"https://www.mkyong.com/spring-boot/spring-boot-hello-world-example-jsp/\" rel=\"nofollow noreferrer\">spring-boot-hello-world-example-jsp</a></p>\n"}], "owner": {"reputation": 155, "user_id": 7184820, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80f03a632c534998829ea44b3197d195?s=128&d=identicon&r=PG&f=1", "display_name": "Danil", "link": "https://stackoverflow.com/users/7184820/danil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518373542, "creation_date": 1510413324, "question_id": 47239426, "link": "https://stackoverflow.com/questions/47239426/spring-boot-can-not-include-static-resource", "title": "Spring Boot - can not include static resource", "body": "<p>Directory structure</p>\n\n<p><a href=\"https://i.stack.imgur.com/FZTzE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FZTzE.png\" alt=\"enter image description here\"></a></p>\n\n<p>I try include css in profile.html </p>\n\n<pre><code>&lt;link th:href=\"@{css/profile.css}\" rel=\"stylesheet\" /&gt;\n</code></pre>\n\n<p>But this doesn't work</p>\n\n<p>My Application class</p>\n\n<pre><code>@SpringBootApplication\nclass Application\n\nfun main(args: Array&lt;String&gt;) {\n    SpringApplication.run(Application::class.java, *args)\n}\n</code></pre>\n\n<p>P.S. Sorry for my English</p>\n"}, {"tags": ["java", "android", "java-native-interface", "kotlin", "android-event"], "comments": [{"owner": {"reputation": 1267, "user_id": 7089630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f118b8ca8e1251fe9c81af2c52c04d9?s=128&d=identicon&r=PG&f=1", "display_name": "Peppermint Paddy", "link": "https://stackoverflow.com/users/7089630/peppermint-paddy"}, "edited": false, "score": 0, "creation_date": 1510406533, "post_id": 47237864, "comment_id": 81426669, "body": "Can&#39;t you expect the App developer to take care of that (signal)? Do you need to be informed when the application is destroyed or when a activity or background service on the App side is destroyed?"}], "answers": [{"comments": [{"owner": {"reputation": 2416, "user_id": 1007758, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/208fa8b23525defef40f19ea51230bef?s=128&d=identicon&r=PG", "display_name": "Jacob Krieg", "link": "https://stackoverflow.com/users/1007758/jacob-krieg"}, "edited": false, "score": 0, "creation_date": 1510404497, "post_id": 47237938, "comment_id": 81426076, "body": "Thank you very much for the answer. I cannot rely on the <code>Android Activity Life Cycle</code>, please check the question edits to see why."}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "reply_to_user": {"reputation": 2416, "user_id": 1007758, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/208fa8b23525defef40f19ea51230bef?s=128&d=identicon&r=PG", "display_name": "Jacob Krieg", "link": "https://stackoverflow.com/users/1007758/jacob-krieg"}, "edited": false, "score": 0, "creation_date": 1510409185, "post_id": 47237938, "comment_id": 81427516, "body": "I am not sure you are going to &quot;signal&quot;,  at least not in the public java/kotlin api.  I think you can still make this work thru the life cycle methods."}], "tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": false, "score": 2, "last_activity_date": 1510408934, "last_edit_date": 1510408934, "creation_date": 1510403735, "answer_id": 47237938, "question_id": 47237864, "link": "https://stackoverflow.com/questions/47237864/abouttoquit-signal-event-in-android/47237938#47237938", "title": "AboutToQuit signal/event in Android", "body": "<p>Take a look at the Android Activity Life Cycle <a href=\"https://developer.android.com/guide/components/activities/activity-lifecycle.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>The the way Android works is rather than receiving a signal you implement/override one or more of the lifecycle methods, which gets called at various phases.  For setting you might want to use <code>onPause()</code></p>\n\n<p>There are also Application level callbacks, and the ability to register your own callbacks, but these are all tied to the lifecycle.</p>\n\n<p>If your issue is that you just don't want the app developer to have to add code to a lifecycle method,  you always have the choice of subclassing and adding your own code before / after calling the super class method.</p>\n"}, {"tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": false, "score": 1, "last_activity_date": 1510620834, "last_edit_date": 1510620834, "creation_date": 1510616251, "answer_id": 47275312, "question_id": 47237864, "link": "https://stackoverflow.com/questions/47237864/abouttoquit-signal-event-in-android/47275312#47275312", "title": "AboutToQuit signal/event in Android", "body": "<p>I was just reading up on some of the latest developments (I have not been doing too much Android programing lately and wanted to learn more about the new recommended Architecture).</p>\n\n<p>When I read the following, I thought about this question from a few days ago.</p>\n\n<blockquote>\n  <p>Lifecycle-aware components perform actions in response to a change in\n  the lifecycle status of another component, such as activities and\n  fragments. These components help you produce better-organized, and\n  often lighter-weight code, that is easier to maintain.</p>\n  \n  <p>A common pattern is to implement the actions of the dependent\n  components in the lifecycle methods of activities and fragments.\n  However, this pattern leads to a poor organization of the code and to\n  the proliferation of errors. By using lifecycle-aware components, you\n  can move the code of dependent components out of the lifecycle methods\n  and into the components themselves.</p>\n</blockquote>\n\n<p>I think if some component in your library can implement the <a href=\"https://developer.android.com/reference/android/arch/lifecycle/LifecycleObserver.html\" rel=\"nofollow noreferrer\">LifeCycleObserver</a> interface,  you would not need to rely on the callbacks in the Activities, Fragments, etc, rather you could observe the changes in your own objects and react accordingly.</p>\n\n<p>For example if you create a class that implements the <a href=\"https://developer.android.com/reference/android/arch/lifecycle/LifecycleObserver.html\" rel=\"nofollow noreferrer\">LifecycleObserver</a> ,   such as this.</p>\n\n<pre><code>class LifeCycleMonitor(private val lifeCycleOwner: LifecycleOwner) : LifecycleObserver {\n\n    init {\n        lifeCycleOwner.lifecycle.addObserver(this)\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\n    fun onDestroyEvent() {\n        println(\"activity was destroyed\")\n    }\n}\n</code></pre>\n\n<p>and then instantiate the class in an object that is a <a href=\"https://developer.android.com/reference/android/arch/lifecycle/LifecycleOwner.html\" rel=\"nofollow noreferrer\">LifecycleOwner</a> (such as an Activity) the method annotated with the corresponding event will be called.</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    private val lifeCycleMonitor = LifeCycleMonitor(this)\n\n}\n</code></pre>\n\n<p><strong>Note there is also a</strong> <a href=\"https://developer.android.com/reference/android/arch/lifecycle/ProcessLifecycleOwner.html\" rel=\"nofollow noreferrer\">ProcessLifecycleOwner</a> which might be even closer to what you are looking for, as it covers the entire App, not just a given Activity or Fragment.</p>\n"}], "owner": {"reputation": 2416, "user_id": 1007758, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/208fa8b23525defef40f19ea51230bef?s=128&d=identicon&r=PG", "display_name": "Jacob Krieg", "link": "https://stackoverflow.com/users/1007758/jacob-krieg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1510620834, "creation_date": 1510403243, "last_edit_date": 1510405119, "question_id": 47237864, "link": "https://stackoverflow.com/questions/47237864/abouttoquit-signal-event-in-android", "title": "AboutToQuit signal/event in Android", "body": "<p>I'm new to <code>Java</code> and <code>Android</code> and I'm coming from a <code>Qt/C++</code> background. In <code>Qt</code> there is this <code>QCoreApplication</code> object that represents the whole application and when this object is destroyed, the application dies. In <code>Qt</code> there is this signal on <code>QCoreApplication</code> which is <code>QCoreApplication::aboutToQuit</code> which gets emitted when the application is in an imminent process of being closed. This is very handy when you want, e.g. save settings data to disk just before the application is closed.</p>\n\n<p>My question: Is there a similar <code>aboutToQuit</code>-like mechanism with which you could get notified when an Android application is imminently closing?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I would like to make some additions to my question after <em>nPn</em> answer. We cannot rely on the <a href=\"https://developer.android.com/guide/components/activities/activity-lifecycle.html\" rel=\"nofollow noreferrer\">Android Activity Life Cycle</a> as we need this information in a library/SDK we are developing. So we want to get notified when an application that is using our library/SDK is closing.</p>\n\n<p>We are developing an <code>SDK</code> for some clients to use in <code>Android</code> apps. Like this would not be enough, this <code>SDK</code> also uses a <em>native</em> <code>C++ SDK</code> in the background with which is linked with through a <code>JNI</code> interface.</p>\n\n<p>The end goal is to get notified in C++ that the application is being destroyed in Android. Having an event/signal in Android would be enough as we could forward the information to C++.</p>\n\n<p>So as a resume the layers are: Android App -> Custom Android SDK -> Native C++ SDK</p>\n\n<p><em>If there is something unclear, I will edit the question further</em></p>\n"}, {"tags": ["android", "mvvm", "architecture", "kotlin", "viewmodel"], "answers": [{"comments": [{"owner": {"reputation": 3552, "user_id": 3374428, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c379754f2f4fbc85f6b7474308033933?s=128&d=identicon&r=PG", "display_name": "Joaquim Ley", "link": "https://stackoverflow.com/users/3374428/joaquim-ley"}, "edited": false, "score": 0, "creation_date": 1510414691, "post_id": 47239320, "comment_id": 81429435, "body": "Thanks for your feedback but, you&#39;re not really answering the question, and yes I want to display both Buses and Stations (marked as favorites)."}], "tags": [], "owner": {"reputation": 6815, "user_id": 2448829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e2a54f9ea39954c147e56e9b5198b7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Conklin", "link": "https://stackoverflow.com/users/2448829/rob-conklin"}, "is_accepted": false, "score": 0, "last_activity_date": 1510412675, "creation_date": 1510412675, "answer_id": 47239320, "question_id": 47237634, "link": "https://stackoverflow.com/questions/47237634/clean-architecture-viewmodel-with-multiple-usecases-on-android/47239320#47239320", "title": "Clean Architecture: ViewModel with multiple UseCases on Android", "body": "<p>The whole point of a ViewModel is that it is a model of what the view is using.  It should be as close to that as possible.. Unless you are presenting stations and buses in the same view list (seems ugly), otherwise, they are separate views, and should get separate models.</p>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 5752112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e580e99107d4c70d0deb3f5cf2f47b2d?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Gon&#231;alves", "link": "https://stackoverflow.com/users/5752112/jo%c3%a3o-gon%c3%a7alves"}, "is_accepted": false, "score": 1, "last_activity_date": 1512045130, "creation_date": 1512045130, "answer_id": 47573583, "question_id": 47237634, "link": "https://stackoverflow.com/questions/47237634/clean-architecture-viewmodel-with-multiple-usecases-on-android/47573583#47573583", "title": "Clean Architecture: ViewModel with multiple UseCases on Android", "body": "<p>Ideally a ViewModel would only have the view state for its view. By using the MediatorLiveData you could aggregate all sources of state into one that represents the view state over time.</p>\n\n<p>What you can have is a data class that represents your ViewState that you construct on your view model and is your exposed LiveData</p>\n\n<p><code>data class FavouritesViewState(val favoriteStations: List&lt;Station&gt;, val favoritBuses: List&lt;Bus&gt;)</code></p>\n\n<p>However you know depend on the ViewModel to construct the final ViewState which kinda breaks the single responsibility principle and also makes you dependent of an Android framework. </p>\n\n<p>I would approach it using a composite UseCase that had both station and bus use cases and returns the composed data that you can then easily expose from the ViewModel.</p>\n"}], "owner": {"reputation": 3552, "user_id": 3374428, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c379754f2f4fbc85f6b7474308033933?s=128&d=identicon&r=PG", "display_name": "Joaquim Ley", "link": "https://stackoverflow.com/users/3374428/joaquim-ley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1324, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1512045130, "creation_date": 1510401470, "last_edit_date": 1510402753, "question_id": 47237634, "link": "https://stackoverflow.com/questions/47237634/clean-architecture-viewmodel-with-multiple-usecases-on-android", "title": "Clean Architecture: ViewModel with multiple UseCases on Android", "body": "<p>This is more of an Architecture question than a bug fixing one.</p>\n\n<p>Let's assume this app lets users mark a Bus and/or Bus Stations as a favourite. My question is, should I have a <code>ViewModel</code> with both UseCases or should I build a UseCase that encapsulates the current logic?</p>\n\n<p>Also for the question part, I'm not entirely sure the way I should expose the combined data to the UI layer (see <code>favouritesExposedLiveData</code>)</p>\n\n<p>Thanks in advance any feedback is welcome, here's my <code>ViewModel</code> you can assume each UseCase is passing the correct data from the data source(s).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>open class FavouritesViewModel @Inject internal constructor(\n            private val getFavouriteStationsUseCase: GetFavouriteStationsUseCase,\n            private val getFavouriteBusesUseCase: GetFavouriteBusesUseCase,\n            private val favouriteMapper: FavouriteMapper,\n            private val busMapper: BusMapper,\n            private val stationMapper: StationMapper) : ViewModel() {\n\n        private val favouriteBusesLiveData: MutableLiveData&lt;Resource&lt;List&lt;BusView&gt;&gt;&gt; = MutableLiveData()\n        private val favouriteStationsLiveData: MutableLiveData&lt;Resource&lt;List&lt;StationView&gt;&gt;&gt; = MutableLiveData()\n\n        private lateinit var favouritesMediatorLiveData: MediatorLiveData&lt;List&lt;FavouriteView&gt;&gt;\n        private lateinit var favouritesExposedLiveData: LiveData&lt;Resource&lt;List&lt;FavouriteView&gt;&gt;&gt;\n\n        init {\n            fetchFavourites()\n        }\n\n        override fun onCleared() {\n            getFavouriteStationsUseCase.dispose()\n            getFavouriteBusesUseCase.dispose()\n            super.onCleared()\n        }\n\n        fun getFavourites(): LiveData&lt;Resource&lt;List&lt;FavouriteView&gt;&gt;&gt; {\n            return favouritesExposedLiveData\n        }\n\n        private fun fetchFavourites() {\n            favouritesMediatorLiveData.addSource(favouriteStationsLiveData, { favouriteStationListResource -&gt;\n                if (favouriteStationListResource?.status == ResourceState.SUCCESS) {\n                    favouriteStationListResource.data?.map {\n                        favouriteMapper.mapFromView(it)\n                    }\n                }\n            })\n\n            favouritesMediatorLiveData.addSource(favouriteBusesLiveData, { favouriteBusesListResource -&gt;\n                if (favouriteBusesListResource?.status == ResourceState.SUCCESS) {\n                    favouriteBusesListResource.data?.map {\n                        favouriteMapper.mapFromView(it)\n                    }\n                }\n            })\n\n            getFavouriteStationsUseCase.execute(FavouriteStationsSubscriber())\n            getFavouriteBusesUseCase.execute(FavouriteBusesSubscriber())\n        }\n\n        inner class FavouriteStationsSubscriber : DisposableSubscriber&lt;List&lt;Station&gt;&gt;() {\n            override fun onComplete() {}\n\n            override fun onNext(t: List&lt;Station&gt;) {\n                favouriteStationsLiveData.postValue(Resource(ResourceState.SUCCESS, t.map { stationMapper.mapToView(it) }, null))\n            }\n\n            override fun onError(exception: Throwable) {\n                favouriteStationsLiveData.postValue(Resource(ResourceState.ERROR, null, exception.message))\n            }\n\n        }\n\n        inner class FavouriteBusesSubscriber : DisposableSubscriber&lt;List&lt;Bus&gt;&gt;() {\n            override fun onComplete() {}\n\n            override fun onNext(t: List&lt;Bus&gt;) {\n                favouriteBusesLiveData.postValue(Resource(ResourceState.SUCCESS, t.map { busMapper.mapToView(it) }, null))\n            }\n\n            override fun onError(exception: Throwable) {\n                favouriteBusesLiveData.postValue(Resource(ResourceState.ERROR, null, exception.message))\n            }\n\n        }\n    }\n</code></pre>\n\n<p><em>Note:</em> Currently the <code>MediatorLiveData</code> (<code>favouritesMediatorLiveData</code>)is not binding the data back to the <code>favouritesExposedLiveData</code> since at this time, I'm not sure this is the correct way to go ;).</p>\n"}, {"tags": ["android", "data-binding", "kotlin"], "comments": [{"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1510389014, "post_id": 47235917, "comment_id": 81422184, "body": "does it compile if you remove <code>android:text=&quot;@{textEditor.content}&quot;</code>?"}, {"owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1510389158, "post_id": 47235917, "comment_id": 81422211, "body": "Yea it compiles when I remove it"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1510389206, "post_id": 47235917, "comment_id": 81422229, "body": "ok, so whats in the logs? (<code>&quot;Internal compiler error. See log for more details&quot;</code>)"}, {"owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1510389354, "post_id": 47235917, "comment_id": 81422263, "body": "Opened Logcat but there is nothing specific to the error"}, {"owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1510389414, "post_id": 47235917, "comment_id": 81422284, "body": "where else do i view logs?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1510389596, "post_id": 47235917, "comment_id": 81422325, "body": "<code>logcat</code> shows your device/emulator logs - in your case your app does not compile, so it is not even launched - you need to open android studio logs"}, {"owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1510389946, "post_id": 47235917, "comment_id": 81422387, "body": "<code>java.lang.NoSuchMethodException: com.android.ide.common.blame.Message.&lt;init&gt;(com.android.ide.&zwnj;&#8203;common.blame.Message&zwnj;&#8203;$Kind, java.lang.String, java.lang.String, com.google.common.collect.ImmutableList)</code>"}, {"owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1510390299, "post_id": 47235917, "comment_id": 81422456, "body": "Also added the logs the question. Please check it out, it would be great if you could help me out with this"}], "answers": [{"tags": [], "owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "is_accepted": false, "score": 0, "last_activity_date": 1510397224, "creation_date": 1510397224, "answer_id": 47237049, "question_id": 47235917, "link": "https://stackoverflow.com/questions/47235917/android-kotlin-execution-failed-while-trying-to-use-databinding/47237049#47237049", "title": "Android: Kotlin execution failed while trying to use Databinding", "body": "<p>After hours of researching, I found out that the third party library I was using is the issue: <code>RichEditor</code>. It didn't support <code>android: text</code>.</p>\n"}], "owner": {"reputation": 2842, "user_id": 15206072, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUbp260KwC6mozrQ-XhmkbymN7qfMzKniFSEQb8A=k-s128", "display_name": "Sumanth Jois", "link": "https://stackoverflow.com/users/15206072/sumanth-jois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 788, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515941393, "creation_date": 1510388712, "last_edit_date": 1515941393, "question_id": 47235917, "link": "https://stackoverflow.com/questions/47235917/android-kotlin-execution-failed-while-trying-to-use-databinding", "title": "Android: Kotlin execution failed while trying to use Databinding", "body": "<p>I am trying to bind views using the <strong>new android Databinding Library</strong>. I tried running the app and got the following error:</p>\n\n<blockquote>\n  <p>Error:Execution failed for task ':app:kaptDebugKotlin'.\n  Internal compiler error. See log for more details</p>\n</blockquote>\n\n<p>Below is my <strong>MainActivity.kt</strong>:</p>\n\n<pre><code>import android.databinding.DataBindingUtil\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport app.android.androidtexteditor.databinding.ActivityMainBinding\nimport app.android.androidtexteditor.models.TextEditor\n\n\nclass MainActivity : AppCompatActivity() {\n\nlateinit var binding: ActivityMainBinding\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n    binding = DataBindingUtil.setContentView(this, R.layout.activity_main)\n\n    var textEditor = TextEditor(\"content\")\n    binding.textEditor = textEditor\n    binding.executePendingBindings()\n\n }\n}\n</code></pre>\n\n<p>Below is my <strong>TextEditor.kt</strong>:</p>\n\n<pre><code>class TextEditor(var content: String?)\n</code></pre>\n\n<p>Below is my <strong>activity_main.xml</strong>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    &gt;\n\n    &lt;data&gt;\n        &lt;variable\n            name=\"textEditor\"\n            type=\"app.android.androidtexteditor.models.TextEditor\"/&gt;\n    &lt;/data&gt;\n\n    &lt;android.support.constraint.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".MainActivity\"\n        &gt;\n            &lt;jp.wasabeef.richeditor.RichEditor\n                android:id=\"@+id/text_editor_content\"\n                android:text=\"@{textEditor.content}\"\n                android:layout_width=\"327dp\"\n                android:layout_height=\"478dp\"\n                android:layout_marginBottom=\"8dp\"\n                android:layout_marginEnd=\"8dp\"\n                android:layout_marginStart=\"8dp\"\n                android:layout_marginTop=\"8dp\"\n                android:padding=\"20dp\"\n                app:layout_constraintBottom_toBottomOf=\"parent\"\n                app:layout_constraintEnd_toEndOf=\"parent\"\n                app:layout_constraintStart_toStartOf=\"parent\"\n                app:layout_constraintTop_toTopOf=\"parent\"\n                /&gt;\n\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n\n&lt;/layout&gt;\n</code></pre>\n\n<p>NOTE: The app complies fine when <code>android:text=\"@{textEditor.content}\"</code> is removed from XML.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Below are the logs:</p>\n\n<blockquote>\n  <p>2017-11-11 14:13:24,608 [thread 118]   INFO -\n  s.plugins.gradle.GradleManager - Instructing gradle to use java from\n  /private/var/folders/tw/_9p_vd716zz1mr4lkp_69h880000gn/T/AppTranslocation/3BF8BBE1-C94A-4F85-9008-1FC1B3EE13FB/d/Android\n  Studio 3.1 Preview.app/Contents/jre/jdk/Contents/Home  2017-11-11\n  14:13:24,683 [thread 118]   INFO - oject.common.GradleInitScripts -\n  init script file sync.local.repo contents \"allprojects {\\n \n  buildscript {\\n    repositories {\\n      maven { url\n  '/private/var/folders/tw/_9p_vd716zz1mr4lkp_69h880000gn/T/AppTranslocation/3BF8BBE1-C94A-4F85-9008-1FC1B3EE13FB/d/Android\n  Studio 3.1 Preview.app/Contents/gradle/m2repository'}\\n    }\\n  }\\n \n  repositories {\\n      maven { url\n  '/private/var/folders/tw/_9p_vd716zz1mr4lkp_69h880000gn/T/AppTranslocation/3BF8BBE1-C94A-4F85-9008-1FC1B3EE13FB/d/Android\n  Studio 3.1 Preview.app/Contents/gradle/m2repository'}\\n  }\\n}\\n\" \n  2017-11-11 14:13:24,684 [thread 118]   INFO -\n  ild.invoker.GradleBuildInvoker - Build command line options:\n  [--configure-on-demand, -Pandroid.injected.invoked.from.ide=true,\n  --init-script, /private/var/folders/tw/_9p_vd716zz1mr4lkp_69h880000gn/T/sync.local.repo2551.gradle]\n  2017-11-11 1</p>\n  \n  <p>4:13:24,684 [thread 118]   INFO - xecution.GradleExecutionHelper -\n  Passing command-line args to Gradle Tooling API: --configure-on-demand\n  -Pandroid.injected.invoked.from.ide=true --init-script /private/var/folders/tw/_9p_vd716zz1mr4lkp_69h880000gn/T/sync.local.repo2551.gradle\n  2017-11-11 14:13:24,921 [thread 100]   INFO -\n  idea.project.IndexingSuspender - Indexing suspended (context: Gradle\n  Build)  2017-11-11 14:13:26,683 [thread 100]   INFO -\n  idea.project.IndexingSuspender - Indexing released (context: Gradle\n  Build)  2017-11-11 14:13:26,686 [thread 116]   INFO -\n  roid.sdk.MessageBuildingSdkLog -\n  com.android.ide.common.blame.Message.(com.android.ide.common.blame.Message$Kind,\n  java.lang.String, java.lang.String,\n  com.google.common.collect.ImmutableList) \n  java.lang.NoSuchMethodException:\n  com.android.ide.common.blame.Message.(com.android.ide.common.blame.Message$Kind,\n  java.lang.String, java.lang.String,\n  com.google.common.collect.ImmutableList)  at\n  java.lang.Class.getConstructor0(Class.java:3082)  at j</p>\n  \n  <p>ava.lang.Class.getConstructor(Class.java:1825)    at\n  org.jetbrains.kotlin.android.KotlinOutputParserHelper$simpleMessageConstructor$2.invoke(KotlinOutputParserHelper.kt:171)\n    at\n  org.jetbrains.kotlin.android.KotlinOutputParserHelper$simpleMessageConstructor$2.invoke(KotlinOutputParserHelper.kt:143)\n    at kotlin.SynchronizedLazyImpl.getValue(Lazy.kt:130)    at\n  org.jetbrains.kotlin.android.KotlinOutputParserHelper.getSimpleMessageConstructor(KotlinOutputParserHelper.kt)\n    at\n  org.jetbrains.kotlin.android.KotlinOutputParserHelper.createNewMessage(KotlinOutputParserHelper.kt:272)\n    at\n  org.jetbrains.kotlin.android.KotlinOutputParserHelper.createMessage(KotlinOutputParserHelper.kt:250)\n    at\n  org.jetbrains.kotlin.android.KotlinOutputParserHelper.createMessage$default(KotlinOutputParserHelper.kt:244)\n    at\n  org.jetbrains.kotlin.android.KotlinOutputParserHelperKt.parse(KotlinOutputParserHelper.kt:41)\n    at\n  org.jetbrains.kotlin.android.KotlinOutputParser.parse(KotlinOutputParser.java:28)\n    at\n  com.android.ide.common.blame.parser.ToolOutputParser.parseToolOutput(ToolOutputParser.java:86)\n    at\n  com.android.tools.idea.gradle.output.parser.BuildOutputParser.parseGradleOutput(BuildOutputParser.java:43)\n    at\n  com.android.tools.idea.gradle.project.build.invoker.GradleTasksExecutorImpl.lambda$collectMessages$5(GradleTasksExecutorImpl.java:487)\n    at\n  com.intellij.openapi.application.impl.ApplicationImpl$2.run(ApplicationImpl.java:334)\n    at\n  java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)     at\n  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745) 2017-11-11 14:13:26,687\n  [thread 116]   INFO - roid.sdk.MessageBuildingSdkLog - Exception from\n  KotlinOutputParser  2017-11-11 14:13:26,817 [e-1012-b01]   INFO -\n  ild.invoker.GradleBuildInvoker - Gradle build finished with 1 error(s)\n  in 2s 79ms  2017-11-11 14:13:26,868 [e-1012-b01]   INFO -\n  pl.ProjectRootManagerComponent - project roots have changed \n  2017-11-11 14:13:27,145 [thread 119]   INFO -\n  .diagnostic.PerformanceWatcher - Pushing properties took 1ms; general\n  responsiveness: ok; EDT responsiveness: ok  2017-11-11 14:13:27,184\n  [thread 119]   INFO - .diagnostic.PerformanceWatcher - Indexable file\n  iteration took 38ms; general responsiveness: ok; EDT responsiveness:\n  ok  2017-11-11 14:13:28,217 [J pool 1/4]   WARN -\n  hes.resolve.KotlinCacheService - Could not find correct module\n  information. Reason: Analyzing element of type class\n  com.android.tools.idea.databinding.LightGeneratedComponentClass with\n  no containing file Text: null  2017-11-11 14:13:28,217 [J pool 1/4]<br>\n  WARN - .resolve.jvm.JvmAnalyzerFacade - Java referenced null from\n  LibraryInfo(libraryName=com.android.databinding:library-1.3.1)\n  Referenced class was: JavaClassImpl: DATA binding component class<br>\n  2017-11-11 14:13:28,217 [J pool 1/4]   WARN -\n  hes.resolve.KotlinCacheService - Could not find correct module\n  information. Reason: Analyzing element of type class\n  com.android.tools.idea.databinding.LightGeneratedComponentClass with\n  no containing file Text: null  2017-11-11 14:13:28,217 [J pool 1/4]<br>\n  WARN - .resolve.jvm.JvmAnalyzerFacade - Java referenced null from\n  LibraryInfo(libraryName=com.android.databinding:library-1.3.1)\n  Referenced class was: JavaClassImpl: DATA binding component class</p>\n</blockquote>\n"}, {"tags": ["spring", "spring-mvc", "intellij-idea", "kotlin", "jetty"], "comments": [{"owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "edited": false, "score": 1, "creation_date": 1510395380, "post_id": 47235832, "comment_id": 81423732, "body": "Open browser&#39;s dev tools and track the URL that was used to send the request. Your form&#39;s <code>action</code> is <code>.&#47;submitted</code> which, probably, maps to <code>&#47;student&#47;form&#47;submitted</code>, while the mapping on Spring&#39;s side is <code>&#47;student&#47;submitted</code>. To mitigate similar problems in future try to use <code>c:url</code> or <code>spring:form</code> tags: they are context-aware. BTW, 404 is &quot;not found&quot;, not &quot;bad request&quot; that&#39;s very strange you get that error."}], "answers": [{"comments": [{"owner": {"reputation": 858, "user_id": 4384490, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5bb9221e46973b7af64381d3314e4067?s=128&d=identicon&r=PG&f=1", "display_name": "kumarmo2", "link": "https://stackoverflow.com/users/4384490/kumarmo2"}, "edited": false, "score": 0, "creation_date": 1510389177, "post_id": 47235923, "comment_id": 81422220, "body": "i tried this  but it is giving me a url like this <b><a href=\"http://localhost:8080/$%7BpageContext.request.contextPath%7D/submitted\" rel=\"nofollow noreferrer\">localhost:8080/$%7BpageContext.request.contextPath%7D/submit&zwnj;&#8203;ted</a></b> . Also the action i am giving currently is poinitng to the the correct url."}, {"owner": {"reputation": 858, "user_id": 4384490, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5bb9221e46973b7af64381d3314e4067?s=128&d=identicon&r=PG&f=1", "display_name": "kumarmo2", "link": "https://stackoverflow.com/users/4384490/kumarmo2"}, "edited": false, "score": 0, "creation_date": 1510389245, "post_id": 47235923, "comment_id": 81422236, "body": "Also i would like to add that its showing <b>404 Bad Request</b> and not **404 not found&quot; . maybe there is a difference between them ."}, {"owner": {"reputation": 2397, "user_id": 1446707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lPrgQ.jpg?s=128&g=1", "display_name": "Ali.Mojtehedy", "link": "https://stackoverflow.com/users/1446707/ali-mojtehedy"}, "reply_to_user": {"reputation": 858, "user_id": 4384490, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5bb9221e46973b7af64381d3314e4067?s=128&d=identicon&r=PG&f=1", "display_name": "kumarmo2", "link": "https://stackoverflow.com/users/4384490/kumarmo2"}, "edited": false, "score": 0, "creation_date": 1510394468, "post_id": 47235923, "comment_id": 81423474, "body": "Bad req happen in 3 case in spring : 1-server need some prop but there is not exist in back object 2-in case of type mismatching for example you are posting but server is defined to GET 3-type of data for example sending json but server consume or produce html"}], "tags": [], "owner": {"reputation": 2397, "user_id": 1446707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lPrgQ.jpg?s=128&g=1", "display_name": "Ali.Mojtehedy", "link": "https://stackoverflow.com/users/1446707/ali-mojtehedy"}, "is_accepted": false, "score": 0, "last_activity_date": 1510388752, "creation_date": 1510388752, "answer_id": 47235923, "question_id": 47235832, "link": "https://stackoverflow.com/questions/47235832/spring-mvc-error-404-bad-request-kotlin/47235923#47235923", "title": "Spring MVC Error 404 Bad Request Kotlin", "body": "<p>check your link 404 means not found ,it may cause by not pointing to root here <code>./submitted</code> , change to <code>${pageContext.request.contextPath}/foo</code> or configuration of WEB-INF location.</p>\n\n<pre><code> 4\u00d7\u00d7 Client Error\n    400 Bad Request\n    401 Unauthorized\n    402 Payment Required\n    403 Forbidden\n    404 Not Found\n    405 Method Not Allowed\n    406 Not Acceptable\n    407 Proxy Authentication Required\n    408 Request Timeout\n    409 Conflict\n    410 Gone\n    411 Length Required\n    412 Precondition Failed\n    413 Payload Too Large\n    414 Request-URI Too Long\n    415 Unsupported Media Type\n    416 Requested Range Not Satisfiable\n    417 Expectation Failed\n    418 I'm a teapot\n    421 Misdirected Request\n    422 Unprocessable Entity\n    423 Locked\n    424 Failed Dependency\n    426 Upgrade Required\n    428 Precondition Required\n    429 Too Many Requests\n    431 Request Header Fields Too Large\n    444 Connection Closed Without Response\n    451 Unavailable For Legal Reasons\n    499 Client Closed Request\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 858, "user_id": 4384490, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5bb9221e46973b7af64381d3314e4067?s=128&d=identicon&r=PG&f=1", "display_name": "kumarmo2", "link": "https://stackoverflow.com/users/4384490/kumarmo2"}, "is_accepted": false, "score": 0, "last_activity_date": 1510398649, "creation_date": 1510398649, "answer_id": 47237240, "question_id": 47235832, "link": "https://stackoverflow.com/questions/47235832/spring-mvc-error-404-bad-request-kotlin/47237240#47237240", "title": "Spring MVC Error 404 Bad Request Kotlin", "body": "<p>I found the mistake in my code and it was a small mistake but i was not aware of it because of my lack of knowledge in web domain.  </p>\n\n<blockquote>\n  <p>In form.jsp, in the form I was giving <strong>id</strong> attribute to all the input elements. I changes those to the <strong>name</strong> and it was working fine.</p>\n</blockquote>\n"}], "owner": {"reputation": 858, "user_id": 4384490, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/5bb9221e46973b7af64381d3314e4067?s=128&d=identicon&r=PG&f=1", "display_name": "kumarmo2", "link": "https://stackoverflow.com/users/4384490/kumarmo2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 400, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1510398649, "creation_date": 1510387870, "question_id": 47235832, "link": "https://stackoverflow.com/questions/47235832/spring-mvc-error-404-bad-request-kotlin", "title": "Spring MVC Error 404 Bad Request Kotlin", "body": "<blockquote>\n  <p>I am using <strong>Kotlin</strong> for developing <strong>Spring MVC</strong> Application.<br>\n  I have a simple form which when i submit, I am getting <strong>Error 404 bad Request</strong>. I am using <strong>Jetty server and Intellij Community Edition</strong>.I tried debugging but since i have never debugged a web application, it wasnt that helpful.</p>\n</blockquote>\n\n<p><strong>web.xml</strong></p>\n\n<pre><code>&lt;!DOCTYPE web-app PUBLIC\n \"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"\n \"http://java.sun.com/dtd/web-app_2_3.dtd\" &gt;\n\n&lt;web-app&gt;\n  &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;frontDispatcher&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n  &lt;/servlet&gt;\n\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;frontDispatcher&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/springkotlinmvc/*&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p><strong>frontDispatcher-servlet.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context = \"http://www.springframework.org/schema/context\"\n       xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans.xsd\n     http://www.springframework.org/schema/context\n   http://www.springframework.org/schema/context/spring-context-3.0.xsd\n   http://www.springframework.org/schema/mvc\n   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\"&gt;\n\n\n    &lt;context:annotation-config/&gt;\n    &lt;mvc:annotation-driven/&gt;\n    &lt;context:component-scan base-package=\"org.manya.kotlin\"/&gt;\n\n    &lt;bean id=\"viewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n        &lt;property name=\"prefix\" value=\"/WEB-INF/\"&gt;&lt;/property&gt;\n        &lt;property name=\"suffix\" value=\".jsp\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p><strong>DataClasses.kt</strong></p>\n\n<pre><code>package org.manya.kotlin\n\ndata class Address (val city : String, val state : String)\n\ndata class Student ( val name : String , val age : Int, val address : Address)\n</code></pre>\n\n<p><strong>StudentController.kt</strong></p>\n\n<pre><code>package org.manya.kotlin\n\nimport org.springframework.stereotype.Controller\nimport org.springframework.web.bind.annotation.*\nimport org.springframework.web.servlet.ModelAndView\n\n\n@Controller\n@RequestMapping(\"/student\")\nclass StudentController\n{\n    //@GetMapping(\"/student/form\")\n    @GetMapping(\"form\")\n    fun studentForm() : ModelAndView{\n        println(\"called from studentForm()\")\n        return ModelAndView(\"form\")\n    }\n\n    //@PostMapping(\"springkotlinmvc/student/submitted\")\n    //@RequestMapping(value = \"/student/submitted\" , method = arrayOf(RequestMethod.POST))\n    //@RequestMapping(\"/submitted\")\n    @PostMapping(\"/submitted\")\n    fun submitted(@ModelAttribute(\"student\") stud : Student) : ModelAndView {\n        println(\"called from submitted()\")\n        return ModelAndView(\"submitted\")\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Here the method studentForm() is perfectly getting mapped to the view(form.jsp) but the method submitted is not getting mapped.  </p>\n</blockquote>\n\n<p><strong>form.jsp</strong></p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%&gt;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n&lt;title&gt;Insert title here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form action=\"./submitted\" method=\"post\"&gt;\n        NAME : &lt;input id=\"name\"/&gt;\n        AGE : &lt;input id=\"age\"/&gt;\n        CITY : &lt;input id=\"address.city\"/&gt;\n        STATE : &lt;input id=\"address.state\"/&gt;\n        &lt;input type=\"submit\"/&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}]