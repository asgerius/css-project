[{"tags": ["mockito", "kotlin"], "comments": [{"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1482961376, "post_id": 41370007, "comment_id": 69941881, "body": "to be absolutely clear, the reason I&#39;m confused is <i>because I created a new variable I never used</i> - to solve the problem... and even more confusingly,  I then removed the left hand of the assignment and it still works!"}], "answers": [{"comments": [{"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1482961960, "post_id": 41370164, "comment_id": 69942149, "body": "p.s. changing it to <code>is</code> and assigning that to a variable doesn&#39;t work for me - but <code>as</code> is good enough"}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 4, "last_activity_date": 1482961630, "creation_date": 1482961630, "answer_id": 41370164, "question_id": 41370007, "link": "https://stackoverflow.com/questions/41370007/mocking-interfaces-with-kotlin-and-mockito/41370164#41370164", "title": "Mocking Interfaces with Kotlin and Mockito", "body": "<p>The return type of <code>mock(MyClass::class.java)</code> is <code>MyClass</code>. The returned object is also an instance of IMyInterface, since you asked that to Mockito, but the Kotlin compiler can't know that. </p>\n\n<p><code>mockObj as IMyInterface</code> tells the Kotlin compiler to cast mockObj to IMyInterface. Since the Kotlin compiler supports <a href=\"https://kotlinlang.org/docs/reference/typecasts.html\" rel=\"nofollow noreferrer\">smart casts</a>, it knows that, if this line doesn't throw any exception, then <code>mockObj</code> is an instance of IMyInterface. And it thus lets you call <code>someMethod()</code>, and inserts the necessary cast for you.</p>\n\n<p>You can replicate this with a simpler example:</p>\n\n<pre><code>val foo: Any = \"hello\"\nval bar = foo as String\nprintln(foo.length) // smart cast added here\n</code></pre>\n\n<p>You could also use the <code>is</code> operator to make the compiler insert a smart cast</p>\n\n<pre><code>val foo: Any = \"hello\"\nif (foo is String) {\n    println(foo.length) // smart cast added here\n}\n</code></pre>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1230, "favorite_count": 0, "accepted_answer_id": 41370164, "answer_count": 1, "score": 1, "last_activity_date": 1482961630, "creation_date": 1482960720, "last_edit_date": 1482961030, "question_id": 41370007, "link": "https://stackoverflow.com/questions/41370007/mocking-interfaces-with-kotlin-and-mockito", "title": "Mocking Interfaces with Kotlin and Mockito", "body": "<p>I don't really understand interface mocking in Kotlin. I'm not sure if this is Kotlin specific or applies to java also. So far I have only tried it in Kotlin.</p>\n\n<p>I have a mocked class with interfaces:</p>\n\n<pre><code>val mockObj = mock(MyClass::class.java, withSettings().extraInterfaces(IMyInterface::class.java)\n</code></pre>\n\n<p>now, this produces the following problem in IntelliJ:</p>\n\n<pre><code>`when`(mockObj.someMethod()).thenReturn(0.1)\n</code></pre>\n\n<p>the <code>someMethod()</code> will be <em>red</em> (I assume this depends on the color scheme, but you get the idea - a problem: <em>unresolved reference</em>)</p>\n\n<p>to solve this, I simply include this line before it:</p>\n\n<pre><code>val mockInterface = mockObj as IMyInterface\n</code></pre>\n\n<p>the mockInterface will be grey squigly underlined because it is <em>never used</em>. I still use <code>mockObj</code> for the <code>when</code></p>\n\n<p>however, this makes the <em>red</em> disappear</p>\n\n<p>I'm not sure why this works... can someone explain the theory?</p>\n\n<p>to get rid of the grey underline, I then remove <code>val mockInterface =</code></p>\n\n<p>so my magic line is reduced to <code>mockObj as IMyInterface</code></p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1482963042, "post_id": 41368844, "comment_id": 69942510, "body": "Why doesn&#39;t the Java code work in Kotlin as is? Does <code>initCipher</code> not return a <code>Boolean</code>?"}, {"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1482975001, "post_id": 41368844, "comment_id": 69945774, "body": "The problem is that Kotlin complains that mCipher may have changed between the null check and the access in initCipher."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1482998720, "post_id": 41368844, "comment_id": 69952588, "body": "It would be nice to see the signature of <code>initCipher</code>"}], "answers": [{"comments": [{"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "edited": false, "score": 1, "creation_date": 1482974947, "post_id": 41369720, "comment_id": 69945765, "body": "Cool, thanks - I missed that I could make use of the return of apply."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482998753, "post_id": 41369720, "comment_id": 69952606, "body": "It&#39;s better to use <code>let</code> in this situation."}], "tags": [], "owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "is_accepted": true, "score": 3, "last_activity_date": 1482959299, "creation_date": 1482959299, "answer_id": 41369720, "question_id": 41368844, "link": "https://stackoverflow.com/questions/41368844/null-check-in-if-conditions/41369720#41369720", "title": "Null check in if conditions", "body": "<p><code>?.</code> on a nullable receiver returns the result of the function if the receiver is not null, and null otherwise.</p>\n\n<p>Combining this with <code>.apply</code> we can write: </p>\n\n<p>[..] <code>&amp;&amp; mCipher?.apply { initCipher(this, DEFAULT_KEY_NAME) } != null</code></p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 0, "last_activity_date": 1482998678, "last_edit_date": 1482998678, "creation_date": 1482998246, "answer_id": 41375426, "question_id": 41368844, "link": "https://stackoverflow.com/questions/41368844/null-check-in-if-conditions/41375426#41375426", "title": "Null check in if conditions", "body": "<p>Wait, why can't you copy-paste the Java code to Kotlin? It will work as-is:</p>\n\n<pre><code>return mFingerprintManager.hasEnrolledFingerprints()\n       &amp;&amp; createKey(DEFAULT_KEY_NAME, true)\n       &amp;&amp; initCipher(mCipher, DEFAULT_KEY_NAME)\n</code></pre>\n\n<p>If <code>initCipher(...)</code> can handle <code>null</code> as its parameter, then you don't need to check <code>mCipher</code> before passing it to the method.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>It seems that you've converted  <code>initCipher</code> from Java to Kotlin, and now it can't accept <code>null</code> as its argument. Then, assuming you don't have a concurrent access to <code>mCipher</code>, add a null-assertion <code>!!</code> to the code:</p>\n\n<pre><code>return mFingerprintManager.hasEnrolledFingerprints()\n       &amp;&amp; createKey(DEFAULT_KEY_NAME, true)\n       &amp;&amp; initCipher(mCipher!!, DEFAULT_KEY_NAME)\n</code></pre>\n"}], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 41369720, "answer_count": 2, "score": 0, "last_activity_date": 1482998678, "creation_date": 1482954891, "question_id": 41368844, "link": "https://stackoverflow.com/questions/41368844/null-check-in-if-conditions", "title": "Null check in if conditions", "body": "<p>I have this code in Java</p>\n\n<pre><code>return mFingerprintManager.hasEnrolledFingerprints() &amp;&amp;\n       createKey(DEFAULT_KEY_NAME, true) &amp;&amp;\n       initCipher(mCipher, DEFAULT_KEY_NAME);\n</code></pre>\n\n<p>which I have converted to Kotlin as shown here</p>\n\n<pre><code>return mFingerprintManager.hasEnrolledFingerprints() &amp;&amp;\n        createKey(DEFAULT_KEY_NAME, true) &amp;&amp;\n        if (mCipher != null) {\n            mCipher?.apply { initCipher(this, DEFAULT_KEY_NAME) }\n            return true\n        } else {\n            return false\n        }\n</code></pre>\n\n<p>Is there a better way to write the Kotlin code so it is more concise? Variable mCipher is defined as </p>\n\n<pre><code>private var mCipher: Cipher? = null\n</code></pre>\n\n<p>at the class level.</p>\n"}, {"tags": ["android", "retrofit", "kotlin", "mockwebserver"], "comments": [{"owner": {"reputation": 2481, "user_id": 421467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wkFyw.jpg?s=128&g=1", "display_name": "Dr.jacky", "link": "https://stackoverflow.com/users/421467/dr-jacky"}, "edited": false, "score": 0, "creation_date": 1549222024, "post_id": 41366005, "comment_id": 95817045, "body": "Did you solve your problem?"}], "answers": [{"comments": [{"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "edited": false, "score": 0, "creation_date": 1483011113, "post_id": 41371544, "comment_id": 69959345, "body": "Thanks for the answer iagreen. I will try this."}, {"owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "edited": false, "score": 0, "creation_date": 1483026127, "post_id": 41371544, "comment_id": 69967632, "body": "I did exactly like you wrote, but still no luck."}], "tags": [], "owner": {"reputation": 28482, "user_id": 1904517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mn4kq.png?s=128&g=1", "display_name": "iagreen", "link": "https://stackoverflow.com/users/1904517/iagreen"}, "is_accepted": false, "score": 8, "last_activity_date": 1482970677, "creation_date": 1482970677, "answer_id": 41371544, "question_id": 41366005, "link": "https://stackoverflow.com/questions/41366005/how-to-make-mockwebserver-work/41371544#41371544", "title": "How to make MockWebServer work?", "body": "<p>There are a couple of things going on here.  First, <code>MockWebServer.url()</code> resolves the given url against the mock server's base url, it does not set the url.  If you want to set the url, you'll need to pass it to the <code>start()</code> method.  Generally, you configure your retrofit to call the server's endpoint -- </p>\n\n<pre><code>Retrofit retrofit = new Retrofit.Builder()\n    .baseUrl(server.url(\"/\"))\n    // Other builder methods.\n    .build();\n</code></pre>\n\n<p>Second, to get responses from the mock web server, you need to enqueue the expected responses as <a href=\"https://github.com/square/okhttp/blob/master/mockwebserver/src/main/java/okhttp3/mockwebserver/MockResponse.java\" rel=\"noreferrer\"><code>MockResponse</code></a>s. Otherwise it doesn't know what to send back.  Do something like the following before making your request -- </p>\n\n<pre><code>server.enqueue(new MockResponse().setBody(\"Success!\"));\n</code></pre>\n\n<p>You'll need to build your response to mirror the expected response.</p>\n\n<p>See the <a href=\"https://github.com/square/okhttp/blob/master/mockwebserver/README.md\" rel=\"noreferrer\">README</a> for some more examples.</p>\n"}], "owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5893, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1483030062, "creation_date": 1482942358, "last_edit_date": 1483030062, "question_id": 41366005, "link": "https://stackoverflow.com/questions/41366005/how-to-make-mockwebserver-work", "title": "How to make MockWebServer work?", "body": "<p>I am developing an app using the MVP architecture. I am trying to test the Interactors of my app using MockWebServer. Well, I have this test:</p>\n\n<pre><code>@RunWith(RobolectricTestRunner::class)\n@Config(constants = BuildConfig::class, manifest = \"src/main/AndroidManifest.xml\", packageName = \"br.com.simplepass.simplepassnew\", sdk = intArrayOf(23))\nclass LoginInteractorImplTest {\n\n    lateinit var mLoginInteractor : LoginInteractor\n    lateinit var mServer: MockWebServer\n\n\n    @Before\n    fun setUp(){\n        mLoginInteractor = LoginInteractorImpl()\n        mServer = MockWebServer()\n        mServer.start()\n    }\n\n    @Test\n    fun loginTest(){\n        mServer.url(\"http://192.168.0.10:8080/login\")\n\n        val testSubscriber = TestSubscriber.create&lt;User&gt;()\n\n        mLoginInteractor.login(\"31991889992\", \"lala\").subscribe(testSubscriber)\n        testSubscriber.assertNoErrors()\n//        testSubscriber.assertCompleted()\n    }\n\n    @After\n    fun tearDown(){\n        mServer.shutdown()\n    }\n}\n</code></pre>\n\n<p>But, when I uncomment the assertCompleted on the TestSubscriber, I always get assertionError... I know the TestSubscriber works, because I use it in other tests. </p>\n\n<p>Here is my ApiCall:</p>\n\n<pre><code>@GET(\"login\")\nfun login() : Observable&lt;User&gt;\n</code></pre>\n\n<p>My NetModule:</p>\n\n<pre><code>@Module\nclass NetModule(val mBaseUrl: String) {\n\n    @Provides\n    @Singleton\n    fun provideHttpCache(application: Application): Cache {\n        val cacheSize = 10 * 1024 * 1024\n        return Cache(application.cacheDir, cacheSize.toLong())\n\n    }\n\n    @Provides\n    @Singleton\n    fun provideOkhttpClient(cache: Cache) : OkHttpClient {\n        val client = OkHttpClient.Builder()\n\n        val interceptor = HttpLoggingInterceptor()\n        interceptor.level = HttpLoggingInterceptor.Level.BODY\n\n        client.addInterceptor(interceptor)\n        return client.cache(cache).build()\n    }\n\n    @Provides\n    @Singleton\n    fun provideRetrofit(okHttpClient: OkHttpClient): Retrofit {\n        return Retrofit.Builder()\n\n\n          .baseUrl(mBaseUrl)\n            .addConverterFactory(GsonConverterFactory.create())\n            .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n            .client(okHttpClient)\n            .build()\n    }\n}\n</code></pre>\n\n<p>And my base URL (There's no backend server... could be anything):</p>\n\n<pre><code>&lt;string name=\"api_base_url\"&gt;http://192.168.0.12:8080&lt;/string&gt;\n</code></pre>\n\n<p>So, What am I missing? This code should be working...</p>\n\n<p>Any help is welcome!</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>So, I changed the code to this:</p>\n\n<pre><code>mLoginInteractor = LoginInteractorImpl()\n        mServer = MockWebServer()\n\n        mServer.enqueue(MockResponse()\n                .setResponseCode(200)\n                .setBody(Gson().toJson(User(1, \"991889992\", \"Leandro\", \"123\"))))\n\n        mServer.start()\n\n        val client = OkHttpClient.Builder()\n        val cacheSize = 10 * 1024 * 1024\n\n        client.cache(Cache(application.cacheDir, cacheSize.toLong())).build()\n\n        mLoginInteractor.setRetrofit(Retrofit.Builder()\n                .baseUrl(mServer.url(\"/\"))\n                .addConverterFactory(GsonConverterFactory.create())\n                .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n.client(client.cache(Cache(application.cacheDir, cacheSize.toLong())).build())\n                .build())\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>val testSubscriber = TestSubscriber.create&lt;User&gt;()\n\n        mLoginInteractor.login(\"31991889992\", \"lala\").subscribe(testSubscriber)\n        testSubscriber.assertNoErrors()\n        testSubscriber.assertReceivedOnNext(listOf(User(1, \"991889992\", \"Leandro\", \"123\")))\n        testSubscriber.assertCompleted()\n</code></pre>\n\n<p>But I still get this error:</p>\n\n<pre><code>Number of items does not match. Provided: 1  Actual: 0.\nProvided values: [User(id=1, phoneNumber=991889992, name=Leandro, password=123)]\nActual values: []\n</code></pre>\n"}, {"tags": ["kotlin", "side-effects"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482942917, "post_id": 41358898, "comment_id": 69933648, "body": "Use <code>if</code>s, make your core clearer :D"}], "answers": [{"tags": [], "owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "is_accepted": true, "score": 5, "last_activity_date": 1484833998, "last_edit_date": 1484833998, "creation_date": 1482921891, "answer_id": 41360360, "question_id": 41358898, "link": "https://stackoverflow.com/questions/41358898/conditional-side-effects-and-optional-types-in-kotlin/41360360#41360360", "title": "Conditional side-effects and optional types in Kotlin", "body": "<p><strong>Update:</strong>\n<a href=\"https://kotlinlang.org/docs/reference/whatsnew11.html#takeif-and-also\" rel=\"nofollow noreferrer\">Kotlin 1.1</a> has a method called <code>takeIf</code>:</p>\n\n<pre><code>/**\n * Returns `this` value if it satisfies the given [predicate] or `null`, if it doesn't.\n */\n@kotlin.internal.InlineOnly\n@SinceKotlin(\"1.1\")\npublic inline fun &lt;T&gt; T.takeIf(predicate: (T) -&gt; Boolean): T? = if (predicate(this)) this else null\n</code></pre>\n\n<p>You can use it this way:</p>\n\n<pre><code>repository.findByUID(request.userId)?.takeIf { someCondition }?.let { service -&gt; }\n</code></pre>\n\n<hr>\n\n<p>Kotlin doesn't contain such method in the stdlib.</p>\n\n<p>However, You can define it:</p>\n\n<pre><code>inline fun &lt;K : Any&gt; K.ifPresent(condition: K.() -&gt; Boolean): K? = if (condition()) this else null\n</code></pre>\n\n<p>Using this method your example can be rewritten as:</p>\n\n<pre><code>fun handle(request: Request) {\n    repository.findByUID(request.userId)?.ifPresent { someCondition }?.let {\n        service.run(...)\n    }\n}\n</code></pre>\n\n<p>Another option may be to use the built in extensions for list (but there is an overhead of using lists):</p>\n\n<pre><code>listOf(repository.findByUID(userId)).filter { someCondition }.forEach { service.run(...) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "edited": false, "score": 0, "creation_date": 1482935692, "post_id": 41364143, "comment_id": 69929599, "body": "Ok, thanks. I hoped for the built-in solution but I guess I need to build it myself :)"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "edited": false, "score": 1, "creation_date": 1482935767, "post_id": 41364143, "comment_id": 69929644, "body": "You may be able to make it built-in: <a href=\"https://kotlinlang.org/contribute.html\" rel=\"nofollow noreferrer\">kotlinlang.org/contribute.html</a>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1482942850, "post_id": 41364143, "comment_id": 69933615, "body": "Ideologically Kotlin&#39;s <code>null</code> is very different from <code>Optinal</code>. It has  no business having <code>map</code> and <code>filter</code> IMO"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 5, "last_activity_date": 1521983670, "last_edit_date": 1521983670, "creation_date": 1482935628, "answer_id": 41364143, "question_id": 41358898, "link": "https://stackoverflow.com/questions/41358898/conditional-side-effects-and-optional-types-in-kotlin/41364143#41364143", "title": "Conditional side-effects and optional types in Kotlin", "body": "<p>Kotlin's <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#nullable-types-and-non-null-types\" rel=\"nofollow noreferrer\">nullable types</a> are very similar to Java's <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\">Optional</a> (which is very similar to Guava's <a href=\"https://google.github.io/guava/releases/20.0/api/docs/com/google/common/base/Optional.html\" rel=\"nofollow noreferrer\">Optional</a>).</p>\n\n<p>In Kotlin 1.1 you can use <code>takeIf</code> which \"is like <code>filter</code> for a single value\" (<a href=\"https://kotlinlang.org/docs/reference/whatsnew11.html#takeif-and-also\" rel=\"nofollow noreferrer\">takeIf() and also() - What's New in Kotlin 1.1 - Kotlin Programming Language</a>):</p>\n\n<pre><code>repository.findByUID(request.userId).takeIf { !someCondition }?.let { service.run(...) }\n</code></pre>\n\n<p>Kotlin 1.0 does not define <code>map</code>, <code>flatMap</code>, <code>filter</code>/<code>takeIf</code>, etc. for nullable types but you can easily define your own function. e.g.:</p>\n\n<pre><code>inline fun &lt;T&gt; filter(value: T?, predicate: (T) -&gt; Boolean): T? {\n    return if (value != null &amp;&amp; predicate(value)) value else null\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>filter(repository.findByUID(request.userId)) { !someCondition }?.let { service.run(...) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 1036577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a246cc5f7f99987d6a33947485e69b15?s=128&d=identicon&r=PG", "display_name": "Pawe\u0142 Barszcz", "link": "https://stackoverflow.com/users/1036577/pawe%c5%82-barszcz"}, "is_accepted": false, "score": 1, "last_activity_date": 1483026273, "last_edit_date": 1483026273, "creation_date": 1483000848, "answer_id": 41375970, "question_id": 41358898, "link": "https://stackoverflow.com/questions/41358898/conditional-side-effects-and-optional-types-in-kotlin/41375970#41375970", "title": "Conditional side-effects and optional types in Kotlin", "body": "<p>I would go without extra libs nor extension functions with this construct:</p>\n\n<pre><code>?.let { if (someCondition) null else it }\n</code></pre>\n\n<p>After aplying this construct on the code sample from the original question, it would look like:</p>\n\n<pre><code>fun handle(request: Request) {\n    repository.findByUID(request.userId)\n            ?.let { if (someCondition) null else it }\n            ?.let {\n                service.run {\n                    /* ... */\n                }\n            }\n}\n</code></pre>\n\n<p>Or at least it looks OK, compiles and have same types in my codebase after defining <code>Request</code>, <code>repository</code>, <code>findByUid</code> etc. :-)</p>\n"}], "owner": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1561, "favorite_count": 0, "accepted_answer_id": 41360360, "answer_count": 3, "score": 5, "last_activity_date": 1521983670, "creation_date": 1482916707, "last_edit_date": 1482917337, "question_id": 41358898, "link": "https://stackoverflow.com/questions/41358898/conditional-side-effects-and-optional-types-in-kotlin", "title": "Conditional side-effects and optional types in Kotlin", "body": "<p>I am trying to perform a simple side-effect in Kotlin:</p>\n\n<pre><code>fun handle(request: Request) {\n    repository.findByUID(request.userId)?.let {\n        if (someCondition) return\n\n        service.run(...)\n    }\n}\n</code></pre>\n\n<p>As you can see, the side-effect should be performed when the <em>repository</em> returns a non-null value and when <em>someCondition</em> is satisfied. </p>\n\n<p>Is there any Kotlin-way of doing this rather than using <em>if{}-return</em> constructs? </p>\n\n<p>In Java 8, it could be achieved by:</p>\n\n<pre><code>optional\n  .filter(...)\n  .ifPresent(...)  \n</code></pre>\n"}, {"tags": ["java", "jackson", "kotlin"], "owner": {"reputation": 6147, "user_id": 43836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cbfa20635c9269675d54547c080c9b64?s=128&d=identicon&r=PG", "display_name": "pondermatic", "link": "https://stackoverflow.com/users/43836/pondermatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1482924980, "creation_date": 1482863152, "last_edit_date": 1482924980, "question_id": 41350296, "link": "https://stackoverflow.com/questions/41350296/jackson-custom-serializer-delegating-to-jackson-to-serialize", "title": "Jackson Custom Serializer delegating to Jackson to serialize", "body": "<p>I have a custom serializer in which I change the value coming in to a different type. I don't know what that type will be and so would like to delegate to jackson to figure out how to serialize it (since jackson has all this functionality already). Is there some way I can do this within MySerializer? In other words, I don't want to have to do a big switch statement on the resulting value's type to determine which method of JsonGenerator to use. (The code is in Kotlin, btw)</p>\n\n<pre><code>class MySerializer() : JsonSerializer&lt;Any?&gt;() {\n    override fun serialize(value: Any?, gen: JsonGenerator?, serializers: SerializerProvider?) {\n        // Here I transform the value to another type and want to delegate to Jackson to determine how it should be serialized\n        val myNewVal = someFunction(value)\n// something like super.serialize(myNewVal)???\n\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "plugins", "kotlin"], "comments": [{"owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "edited": false, "score": 2, "creation_date": 1482876893, "post_id": 41349358, "comment_id": 69907600, "body": "Does your platform not create a separate classloaders for each plugin? For example, an IDEA, eclipse or NetBeans plugin can bundle its own Kotlin version without conflicting with the Kotlin versions of other plugins."}, {"owner": {"reputation": 335, "user_id": 6107387, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2e9aeea7dc3cebf0f7d143ae86ac608e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Woodworth", "link": "https://stackoverflow.com/users/6107387/ben-woodworth"}, "reply_to_user": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "edited": false, "score": 0, "creation_date": 1482930572, "post_id": 41349358, "comment_id": 69926762, "body": "That&#39;s something I hadn&#39;t thought of, and looking into it, it does appear that separate classloaders are used for each plugin. I&#39;ll have to do some testing to be sure, but thanks for the info!"}], "owner": {"reputation": 335, "user_id": 6107387, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2e9aeea7dc3cebf0f7d143ae86ac608e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Woodworth", "link": "https://stackoverflow.com/users/6107387/ben-woodworth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1570698201, "creation_date": 1482858999, "question_id": 41349358, "link": "https://stackoverflow.com/questions/41349358/avoid-kotlin-runtime-stdlib-conflict-with-other-plugins", "title": "Avoid Kotlin runtime/stdlib conflict with other plugins", "body": "<p>I'm developing a plugin for a platform written in Java. This requires me to bundle the Kotlin runtime and stdlib in my plugin's jar file, since the platform doesn't provide either.</p>\n\n<p>The problem I'm facing is a potential conflict with other plugins that might also have the Kotlin runtime and stdlib bundled, resulting in a conflict.</p>\n\n<p>One potential solution I thought of is bundling the runtime/stdlib under my own package, but I don't know if this is possible, or how I would go about doing it.</p>\n\n<p>I am using Gradle to compile the plugin, so any solution provided will have to work with that. Any help is appreciated.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1482856920, "post_id": 41348671, "comment_id": 69899382, "body": "&#39;it&#39;s incorrect&#39; - not really a precise description."}, {"owner": {"reputation": 971, "user_id": 5892317, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MrDgUVUsPmE/AAAAAAAAAAI/AAAAAAAABEE/-TMJPqjjrT8/photo.jpg?sz=128", "display_name": "Pavel Bredelev", "link": "https://stackoverflow.com/users/5892317/pavel-bredelev"}, "reply_to_user": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1482857036, "post_id": 41348671, "comment_id": 69899427, "body": "It says &quot;Unresolved reference: findByView&quot; and makes it red"}], "answers": [{"comments": [{"owner": {"reputation": 971, "user_id": 5892317, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MrDgUVUsPmE/AAAAAAAAAAI/AAAAAAAABEE/-TMJPqjjrT8/photo.jpg?sz=128", "display_name": "Pavel Bredelev", "link": "https://stackoverflow.com/users/5892317/pavel-bredelev"}, "edited": false, "score": 0, "creation_date": 1482858361, "post_id": 41349002, "comment_id": 69900054, "body": "I have just made as you said but now it throws a TypeCastException on <code>var login = linearLayout.findViewById(R.id.login) as EditText</code>"}, {"owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "reply_to_user": {"reputation": 971, "user_id": 5892317, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MrDgUVUsPmE/AAAAAAAAAAI/AAAAAAAABEE/-TMJPqjjrT8/photo.jpg?sz=128", "display_name": "Pavel Bredelev", "link": "https://stackoverflow.com/users/5892317/pavel-bredelev"}, "edited": false, "score": 1, "creation_date": 1482858723, "post_id": 41349002, "comment_id": 69900230, "body": "@\u041f\u0430\u0432\u0435\u043b\u0411\u0440\u0435\u0434\u0435\u043b\u0435\u0432 You should provide a. a full stracktrace and b. the XML layout you inflate for the dialog."}], "tags": [], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "is_accepted": false, "score": 0, "last_activity_date": 1482857405, "creation_date": 1482857405, "answer_id": 41349002, "question_id": 41348671, "link": "https://stackoverflow.com/questions/41348671/cant-initialize-the-button-in-dialog-in-kotlin/41349002#41349002", "title": "Can&#39;t initialize the button in dialog in Kotlin", "body": "<p>Whatever class you're in has no <code>findViewById</code> method.\nYou have to <code>findViewById</code> on the inflated layout, so: </p>\n\n<pre><code> var login = linearLayout.findViewById(R.id.login) as EditText\n</code></pre>\n\n<p>Also, I dont think you need to have the <code>?</code> on the dialog, it cannot be null. \nAlso, I would make your views <code>val</code>s instead of <code>var</code>s.</p>\n"}, {"tags": [], "owner": {"reputation": 250, "user_id": 1348172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/96a466c8413cb48e49b9a75d3d4f342e?s=128&d=identicon&r=PG", "display_name": "Anil Kanani", "link": "https://stackoverflow.com/users/1348172/anil-kanani"}, "is_accepted": false, "score": 2, "last_activity_date": 1500550895, "creation_date": 1500550895, "answer_id": 45213678, "question_id": 41348671, "link": "https://stackoverflow.com/questions/41348671/cant-initialize-the-button-in-dialog-in-kotlin/45213678#45213678", "title": "Can&#39;t initialize the button in dialog in Kotlin", "body": "<p>please find id by using</p>\n\n<pre><code>             var butAdd = linearlayout.findViewById&lt;Button&gt;(R.id.btn_add) as Button;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 5714583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvXHw.jpg?s=128&g=1", "display_name": "MehulGohil", "link": "https://stackoverflow.com/users/5714583/mehulgohil"}, "is_accepted": false, "score": 0, "last_activity_date": 1500554885, "creation_date": 1500554885, "answer_id": 45215236, "question_id": 41348671, "link": "https://stackoverflow.com/questions/41348671/cant-initialize-the-button-in-dialog-in-kotlin/45215236#45215236", "title": "Can&#39;t initialize the button in dialog in Kotlin", "body": "<p>import this line in your Activity</p>\n\n<pre><code>&lt;Button\n        android:id=\"@+id/btn_submit\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"submit\" /&gt;\n</code></pre>\n\n<p><strong>import this line in your Activity</strong></p>\n\n<p>// Using R.layout.activity_main from the main source set</p>\n\n<p>//activity_main is your layout file name </p>\n\n<p>import kotlinx.android.synthetic.main.activity_main.*</p>\n\n<pre><code> btn_submit.setOnClickListener {\n            Toast.makeText(this, \"hello\", Toast.LENGTH_LONG).show();\n        }\n</code></pre>\n\n<p>Its work for me.</p>\n"}], "owner": {"reputation": 971, "user_id": 5892317, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MrDgUVUsPmE/AAAAAAAAAAI/AAAAAAAABEE/-TMJPqjjrT8/photo.jpg?sz=128", "display_name": "Pavel Bredelev", "link": "https://stackoverflow.com/users/5892317/pavel-bredelev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3784, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1500564646, "creation_date": 1482855966, "last_edit_date": 1500564646, "question_id": 41348671, "link": "https://stackoverflow.com/questions/41348671/cant-initialize-the-button-in-dialog-in-kotlin", "title": "Can&#39;t initialize the button in dialog in Kotlin", "body": "<p>I'm having a Floating Action Button listener with <code>AlertDiaolog</code> inside. And I want to use my buttons from XML. And if I want to write an <code>onClickListener()</code> for them. </p>\n\n<p>So in Java I have to initialize it like:</p>\n\n<pre><code>butAdd = (Button)dialog.findViewById(R.id.btn_add)\nbutAdd.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        //Some code\n    }\n</code></pre>\n\n<p>But when I trying to use:</p>\n\n<pre><code>var butAdd = dialog?.findViewById(R.id.btn_add) as Button;\n</code></pre>\n\n<p>in Kotlin it's incorrect </p>\n\n<p>So any suggestions how to fix it? What'is wrong with listeners?</p>\n\n<p>Here is my code of Floating Action Button:</p>\n\n<pre><code>fab?.setOnClickListener {\n    diaolg = AlertDialog.Builder(this@Cards)\n    val linearlayout = getLayoutInflater().inflate(R.layout.add_password, null)\n    diaolg?.setView(linearlayout)\n    ?.setTitle(\"Add a new password\")\n    ?.setCancelable(true)\n\n    var login = findViewById(R.id.login) as EditText\n    var password = findViewById(R.id.password) as EditText\n    var title = findViewById(R.id.title) as EditText\n\n    var butAdd = diaolg?.findViewById(R.id.btn_add) as Button\n    var butCancel = diaolg?.findViewById(R.id.btn_cancel) as Button\n\n    butAdd.setOnClickListener(View.OnClickListener {\n        fun onClick(v:View){\n        }\n    })\n    butCancel.setOnClickListener(View.OnClickListener {\n        fun onClick(v:View){\n        }\n    })\n    diaolg?.create()\n    diaolg?.show()\n}\n</code></pre>\n"}, {"tags": ["javascript", "dependency-injection", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 7345280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3448e6862ee9a4a4dbe71e7771fa2d3d?s=128&d=identicon&r=PG&f=1", "display_name": "user7345280", "link": "https://stackoverflow.com/users/7345280/user7345280"}, "edited": false, "score": 0, "creation_date": 1482937596, "post_id": 41359944, "comment_id": 69930692, "body": "Thanks a lot for your elaborate answer, Alexey! You are completely right with your points about JS reflection. I wasn&#39;t aware of them until now. So I will follow your advice to use &quot;poor man&#39;s DI&quot; (or &quot;Pure DI&quot;) until somebody will perhaps provide a DI container based on your future compiler plugin. Good luck for your attempt to convince your team mates about your metaprogramming approach. And thanks for your work at JetBrains! After 20 years as a Java programmer, I now love programming  in Kotlin, and I wouldn&#39;t want to go back.."}], "tags": [], "owner": {"reputation": 2015, "user_id": 1109309, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f8a2b866ae0dc92a9e774d0094da8f4d?s=128&d=identicon&r=PG", "display_name": "Alexey Andreev", "link": "https://stackoverflow.com/users/1109309/alexey-andreev"}, "is_accepted": true, "score": 0, "last_activity_date": 1482920543, "creation_date": 1482920543, "answer_id": 41359944, "question_id": 41343736, "link": "https://stackoverflow.com/questions/41343736/how-to-use-dependency-injection-with-kotlin-targeting-javascript/41359944#41359944", "title": "How to use Dependency Injection with Kotlin targeting JavaScript?", "body": "<p>Supporting reflection in Kotlin to JavaScript compiler is a tricky thing. The worst thing is that you have to somehow store metadata in JS file, which makes JS file large, and unlike JAR, which can be as large as needed, it's very important to have small JS files. Also, you have to bundle code that unpacks this metadata and exposes reflection API, which makes generated JS code even larger.</p>\n\n<p>I'm not sure whether reflection will be ever implemented for JS compiler (or if it will, it likely won't be recommended way to implement things like DI). It definitely won't be available in 1.1. Instead, there might be another approach similar to GWT generators, where developer can write special compiler plugins and generate some code to support things like serialization, RPC, DI, etc. We are currently experimenting with JSON serialization, and we generate serializer during compile-time. If we get good results, we might open our compiler plugin API so that any user can implement similar things.</p>\n\n<p>Also, I have a spare-time project that has a similar goal and it implements its own <a href=\"https://github.com/konsoletyper/teavm/wiki/Metaprogramming\" rel=\"nofollow noreferrer\">metaprogramming API</a> which I use to implement <a href=\"https://github.com/konsoletyper/teavm-flavour/tree/master/json/src/main/java/org/teavm/flavour/json\" rel=\"nofollow noreferrer\">large subset of Jackson serializer</a> without any reflection, as well as <a href=\"https://github.com/konsoletyper/teavm-flavour/tree/master/rest/src/main/java/org/teavm/flavour/rest/impl\" rel=\"nofollow noreferrer\">JAX-RS client proxies</a>. However, I'm still failing to push remaining Kotlin team to adopt my ideas and design something similar for Kotlin compiler.</p>\n\n<p>Currently, you have nothing except using so-called \"poor man's DI\", since IoC is mostly design pattern, not a library. With Kotlin capabilities of creating DSL's I believe it's possible to create something nice.</p>\n"}], "owner": {"reputation": 83, "user_id": 7345280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3448e6862ee9a4a4dbe71e7771fa2d3d?s=128&d=identicon&r=PG&f=1", "display_name": "user7345280", "link": "https://stackoverflow.com/users/7345280/user7345280"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 2, "accepted_answer_id": 41359944, "answer_count": 1, "score": 5, "last_activity_date": 1482920543, "creation_date": 1482835840, "last_edit_date": 1482839491, "question_id": 41343736, "link": "https://stackoverflow.com/questions/41343736/how-to-use-dependency-injection-with-kotlin-targeting-javascript", "title": "How to use Dependency Injection with Kotlin targeting JavaScript?", "body": "<p>I'm currently evaluating to port a large Java/Swing application to Kotlin. The domain of the application is 2D graphics, graphs, graphical editing and simulation/animation. I want to rewrite the entire application core in Kotlin and to transpile it to Java byte code as well as to JavaScript. I'm currently able to write Kotlin drawing code that renders both in a Java window and in a HTML canvas, using some adapter and bridge classes. So far so good.</p>\n\n<p>Now I'm struggling with dependency injection, which I'm intensively using in my application. I want to inject dependencies in my Kotlin classes and still be able to transpile them to the JVM and to JavaScript, so I looked for DI frameworks for Kotlin. I found <a href=\"https://github.com/kohesive/injekt\" rel=\"noreferrer\">injekt</a> and <a href=\"https://github.com/SalomonBrys/Kodein\" rel=\"noreferrer\">kodein</a>, but it looks like they both rely on JDK classes, so they are not applicable for my JavaScript use case. I therefore started to develop my own pure Kotlin DI framework, which went well until I realized that the Kotlin transpiler for JavaScript doesn't yet support reflection, without which you can't do dependency injection.</p>\n\n<p>Does anybody know the plans of JetBrains to support reflection in their JavaScript transpiler in the near future? Or does anybody know another way of writing pure Kotlin code that uses dependency injection, and that can still be transpiled both to Java and to JavaScript? This issue might turn out as a Kotlin show-stopper for my project, since I'm not sure whether I want to go back to static configurable factories.</p>\n"}, {"tags": ["java", "spring", "spring-boot", "kotlin", "spring-aop"], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 2163130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe40d0cabe84052f9f66d05768b99e13?s=128&d=identicon&r=PG", "display_name": "Marvin", "link": "https://stackoverflow.com/users/2163130/marvin"}, "is_accepted": true, "score": 0, "last_activity_date": 1483572491, "creation_date": 1483572491, "answer_id": 41474959, "question_id": 41334909, "link": "https://stackoverflow.com/questions/41334909/spring-boot-kotlin-autoproxyregistrar-causes-nullpointer-exception/41474959#41474959", "title": "Spring Boot + Kotlin AutoProxyRegistrar causes Nullpointer Exception", "body": "<p>This was an actual bug which was fixed here <a href=\"https://jira.spring.io/browse/SPR-15055\" rel=\"nofollow noreferrer\">https://jira.spring.io/browse/SPR-15055</a></p>\n"}], "owner": {"reputation": 196, "user_id": 2163130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe40d0cabe84052f9f66d05768b99e13?s=128&d=identicon&r=PG", "display_name": "Marvin", "link": "https://stackoverflow.com/users/2163130/marvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 41474959, "answer_count": 1, "score": 0, "last_activity_date": 1483572491, "creation_date": 1482776489, "last_edit_date": 1482783916, "question_id": 41334909, "link": "https://stackoverflow.com/questions/41334909/spring-boot-kotlin-autoproxyregistrar-causes-nullpointer-exception", "title": "Spring Boot + Kotlin AutoProxyRegistrar causes Nullpointer Exception", "body": "<p>Hej everyone,\nI am trying to migrate a small spring boot project from java 8 to kotlin.\nI ran into an issue where i have the following configuration class </p>\n\n<pre><code>@EnableCaching\n@Configuration\nopen class CacheConfiguration : CachingConfigurer {\n\n    @Bean\n    override fun cacheManager(): CacheManager {\n        return ConcurrentMapCacheManager()\n    }\n\n    @Bean\n    override fun cacheResolver(): CacheResolver {\n        return SimpleCacheResolver(cacheManager())\n    }\n    /**\n     * Simple Key Generator\n\n     * @return not null\n     */\n    @Bean\n    override fun keyGenerator(): KeyGenerator {\n        return SimpleKeyGenerator()\n    }\n\n    @Bean\n    override fun errorHandler(): CacheErrorHandler {\n        return SimpleCacheErrorHandler()\n    }\n\n}\n</code></pre>\n\n<p>This is the actual class. This is literaly the first and only kotlin class in my project.\nStarting the project now with gradle bootRun results in a Nullpointer exception in </p>\n\n<pre><code>AutoProxyRegistrar.java#L63\n\n AnnotationAttributes candidate = AnnotationConfigUtils.attributesFor(importingClassMetadata, annoType);\n Object mode = candidate.get(\"mode\"); &lt;-- candidate is null\n</code></pre>\n\n<p>It tries to retrieve Annotation Attributes, which works well for the 2 Annotations i provided </p>\n\n<pre><code>@EnableCaching\n@Configuration\n</code></pre>\n\n<p>Though it seems that kotlin adds a new annotation called kotlin.Metadata\nwhich seemingly can not be processed. </p>\n\n<h2>build.gradle</h2>\n\n<pre><code>buildscript {\n    ext {\n        ext.kotlin_version = '1.0.5-2'\n        springBootVersion = '1.4.3.RELEASE'\n        asciiDoctorVersion = '1.5.2'\n        snippetsDir = file('build/generated-snippets')\n    }\n    repositories {\n        jcenter()\n        mavenCentral()\n        maven { url \"https://repo.spring.io/snapshot\" }\n        maven { url \"https://repo.spring.io/milestone\" }\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n        classpath(\"org.asciidoctor:asciidoctor-gradle-plugin:${asciiDoctorVersion}\")\n        classpath(\"org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlin_version}\")\n    }\n}\n\napply plugin: 'java'\napply plugin: 'spring-boot'\napply plugin: 'kotlin'\napply plugin: 'org.asciidoctor.convert'\n\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n\nrepositories {\n    jcenter()\n    mavenCentral()\n    maven { url \"https://repo.spring.io/snapshot\" }\n    maven { url \"https://repo.spring.io/milestone\" }\n}\n\ntask wrapper(type: Wrapper) {\n    gradleVersion = '2.14'\n}\n\ntest {\n    outputs.dir snippetsDir\n    testLogging {\n        events \"passed\", \"skipped\", \"failed\", \"standardError\"\n    }\n}\n\ntask stage {\n    dependsOn build\n}\n\nasciidoctor {\n    attributes 'snippets': snippetsDir\n    inputs.dir snippetsDir\n    dependsOn test\n}\n\n// Force ./gradlew cleanTest\nallprojects {\n    tasks.matching { task -&gt; task.name == \"test\" }.all {\n        outputs.upToDateWhen { false }\n    }\n}\n\ndependencies {\n    compile(group: 'org.springframework.boot', name: 'spring-boot-starter')\n    compile(group: 'org.springframework.boot', name: 'spring-boot-starter-web')\n    compile(group: 'org.springframework.boot', name: 'spring-boot-starter-data-jpa')\n    compile(group: 'org.springframework.boot', name: 'spring-boot-starter-actuator')\n    compile(group: 'org.springframework.boot', name: 'spring-boot-starter-security')\n    compile(group: 'org.springframework.security.oauth', name: 'spring-security-oauth2', version: '2.0.10.RELEASE')\n    compile(group: 'org.springframework.security', name: 'spring-security-jwt', version: '1.0.4.RELEASE')\n    compile(group: 'org.postgresql', name: 'postgresql', version: '9.4.1209.jre7')\n\n\n    testCompile(group: 'com.jayway.restassured', name: 'rest-assured', version: '2.9.0')\n    testCompile(group: 'org.springframework.boot', name: 'spring-boot-starter-test')\n}\n</code></pre>\n\n<h1>Reproducible Sample</h1>\n\n<p>I have created a small repository to reproduce this issue.\n<a href=\"https://github.com/spring-projects/spring-framework-issues/pull/145\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework-issues/pull/145</a>\nAnd This <a href=\"https://jira.spring.io/browse/SPR-15055\" rel=\"nofollow noreferrer\">https://jira.spring.io/browse/SPR-15055</a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 2, "creation_date": 1482776180, "post_id": 41334683, "comment_id": 69872219, "body": "If you create an interface <i>in Java</i> and <i>with one method</i> you can use the shortcut in Kotlin. That&#39;s it. <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/java-interop.html#sam-conversi&zwnj;&#8203;ons</a> If you define an interface <i>in Kotlin</i> you have to extend the interface. The shortest way is to define the interface in Java and move on."}], "answers": [{"tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 2, "last_activity_date": 1482777532, "last_edit_date": 1495540480, "creation_date": 1482777532, "answer_id": 41335063, "question_id": 41334683, "link": "https://stackoverflow.com/questions/41334683/kotlin-anonim-class-implement-interface/41335063#41335063", "title": "Kotlin anonim class implement interface", "body": "<p>please, don't use <code>IRunnable</code> such naming in kotlin.</p>\n\n<p>As in this question <a href=\"https://stackoverflow.com/questions/41180365/how-kotlin-makes-setonclicklistener-accept-functions-as-parameter\">How kotlin makes setOnClickListener accept functions as parameter</a> described, Kotlin do SAM only for Java interfaces. But, you can change Interface in favor of functional type, or implement interface, and use it as in following example:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    class Executor {\n        fun &lt;T&gt; execute(task: SimpleRunnable&lt;T&gt;): CompletableFuture&lt;T&gt; {\n            return CompletableFuture.supplyAsync {\n                task.doWork()\n            }\n        }\n    }\n\n    val executor = Executor()\n\n    executor.execute(SimpleRunnableImpl { \"42\" })\n\n    executor.execute(object : SimpleRunnable&lt;Long&gt; {\n        override fun doWork(): Long {\n            return 0L\n        }\n    })\n}\n\ninterface SimpleRunnable&lt;T&gt; {\n    fun doWork(): T\n}\n\nclass SimpleRunnableImpl&lt;T&gt;(val task: () -&gt; T) : SimpleRunnable&lt;T&gt; {\n    override fun doWork(): T = task()\n}\n</code></pre>\n"}], "owner": {"reputation": 1284, "user_id": 6233653, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3iNsk.jpg?s=128&g=1", "display_name": "Ant20", "link": "https://stackoverflow.com/users/6233653/ant20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2492, "favorite_count": 0, "closed_date": 1482827092, "answer_count": 1, "score": 1, "last_activity_date": 1482777532, "creation_date": 1482775068, "last_edit_date": 1482776880, "question_id": 41334683, "link": "https://stackoverflow.com/questions/41334683/kotlin-anonim-class-implement-interface", "closed_reason": "Duplicate", "title": "Kotlin anonim class implement interface", "body": "<p>My kotlin interface:</p>\n\n<pre><code>interface IRunnable&lt;T&gt; {\n    fun doWork(): T\n}\n</code></pre>\n\n<p>then i create anonymous class implemented my interface:</p>\n\n<pre><code>executor!!.execute(object : IRunnable&lt;Long&gt; {\n    override fun doWork(): Long {\n        return 0L\n    }\n})\n</code></pre>\n\n<p>if interface in java, code look like</p>\n\n<pre><code> executor!!.execute(IRunnable2 { return@IRunnable2 0L })\n</code></pre>\n\n<p>Any ideas, how to implement interface in kotlin like java?</p>\n"}, {"tags": ["javafx", "kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1482748309, "post_id": 41329674, "comment_id": 69862830, "body": "ah it was easy !! I was trying the same thing but was sending the expander object as a param in the fire event; and was always getting the same instance of it. Thanks :)"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "reply_to_user": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1482753834, "post_id": 41329674, "comment_id": 69864877, "body": "Great :) I will make sure to mention this usage pattern in the guide as well."}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 2, "last_activity_date": 1482747818, "last_edit_date": 1482747818, "creation_date": 1482747342, "answer_id": 41329674, "question_id": 41328853, "link": "https://stackoverflow.com/questions/41328853/tornadofx-eventbus-expand-table-row-using-tableview-object/41329674#41329674", "title": "tornadofx EventBus expand table row using tableview object", "body": "<p>The <code>rowExpander</code> builder returns the actual <code>ExpanderColumn</code> which is basically a normal <code>TableColumn</code>. Save a reference to the expander so that you can operate on it later:</p>\n\n<pre><code>val expander = rowExpander(true) { ... }\n</code></pre>\n\n<p>Directly below, you can now hide the expander column:</p>\n\n<pre><code>expander.isVisible = false\n</code></pre>\n\n<p>Now it's easy to toggle the expanded state of a specific row from the event subscriber as well:</p>\n\n<pre><code>subscribe&lt;ExpandDataEvent&gt; { event -&gt;\n    expander.toggleExpanded(event.index)\n    selectionModel.select(event.index)\n}\n</code></pre>\n\n<p>You might want to double check that you don't toggle the expander for the tableview that fired the event, so consider including the event source in your event and discriminate on that in the subscriber.</p>\n\n<p>I will investigate if we can add a visible boolean parameter to the rowExpander builder function so you don't need to call <code>isVisible</code> manually :)</p>\n"}], "owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 41329674, "answer_count": 1, "score": 0, "last_activity_date": 1482747818, "creation_date": 1482743403, "question_id": 41328853, "link": "https://stackoverflow.com/questions/41328853/tornadofx-eventbus-expand-table-row-using-tableview-object", "title": "tornadofx EventBus expand table row using tableview object", "body": "<p>Background:<br>\nSuppose I have <strong>multiple fragments of a single table in a view</strong>, each with a rowExpander.</p>\n\n<p>Expected Behaviour:<br>\n<strong>If in one table fragment I expand a row, other fragments same indexed row should get expanded.</strong> Same for collapse</p>\n\n<p>My Progress:<br>\nSample Fragment:</p>\n\n<pre><code>tableview(dataset) {\n                column(\"First Name\", Person::firstNameProperty)\n                column(\"Last Name\", Person::lastNameProperty)\n                rowExpander(true) {\n                    selectedData.item?.apply {\n                        fire(ExpandDataEvent(dataset.indexOf(this)))\n                    }\n                    column(\"Mobile Nos.\", Person::mobileNumProperty)\n                    column(\"Email Ids\", Person::emailIdProperty)\n                }\n                bindSelected(selectedData)\n                subscribe&lt;ExpandDataEvent&gt; { event -&gt;\n                    selectionModel.select(event.index)\n                }\n            }\n</code></pre>\n\n<p>Event Class:  </p>\n\n<pre><code>class ExpandDataEvent(val index: Int) : FXEvent()\n</code></pre>\n\n<p>What I understand from \"subscribe\" is that it gets called when an event is fired (currently I am firing the event whenever the user expands the row by either double-click/clicking the plus sign); and since the subscribe is placed inside tableview, it gets called for all the table fragments present (which is what I want). But in the subscribe method I am doing a selectionModel.select(event.index) which only selects the corresponding index row. I want to expand the row (preferably by using the selectionModel)</p>\n\n<p>Question 2:<br>\nIs it possible to remove the plus sign column? For rowExpand, if I have set expandOnDoubleClick to true, I dont want the plus sign column in my tableview.</p>\n"}, {"tags": ["lambda", "kotlin", "anonymous-function", "named-parameters", "named"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 11, "last_activity_date": 1482743015, "creation_date": 1482743015, "answer_id": 41328776, "question_id": 41328583, "link": "https://stackoverflow.com/questions/41328583/kotlin-what-are-named-lambda-arguments-used-for/41328776#41328776", "title": "Kotlin: What are named lambda arguments used for?", "body": "<p>Currently, no language feature uses these names, and, as far as I know, the only thing that does is the generation of lambda templates by the IDE plugin:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XJyvZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XJyvZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then <kbd>Tab</kbd> or <kbd>Enter</kbd>, and you will get the lambda with the parameter names declared in the <code>example</code> definition:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ccv1v.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ccv1v.png\" alt=\"enter image description here\"></a></p>\n\n<p>Also, see this issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-9016\" rel=\"noreferrer\">Make use of named higher order function parameters</a></p>\n"}], "owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 41328776, "answer_count": 1, "score": 10, "last_activity_date": 1482743015, "creation_date": 1482741769, "question_id": 41328583, "link": "https://stackoverflow.com/questions/41328583/kotlin-what-are-named-lambda-arguments-used-for", "title": "Kotlin: What are named lambda arguments used for?", "body": "<p>In Kotlin, it is possible to give lambda arguments names in their definition.</p>\n\n<pre><code>fun example(lambda: (a: Int, b: Int) -&gt; Int)\n</code></pre>\n\n<p>As you can see, <code>a</code> and <code>b</code> are named in the lambda. I thought this might be really useful information for an IDE, to generate lambdas with the parameter names filled-in.. but at least with IntelliJ the functionality either doesn't exist or works in a way I'm unaware.</p>\n\n<p>So, what are the uses of named lambda arguments? Do they change the compile output in some way? And are there any tricks you can use them for?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 2585, "user_id": 3863689, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/86f88788ae53fcea89a2447ef1c0031f?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpendra", "link": "https://stackoverflow.com/users/3863689/pushpendra"}, "edited": false, "score": 1, "creation_date": 1482733260, "post_id": 41327136, "comment_id": 69857889, "body": "you defined your RoomsFragment in your component?"}, {"owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "reply_to_user": {"reputation": 2585, "user_id": 3863689, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/86f88788ae53fcea89a2447ef1c0031f?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpendra", "link": "https://stackoverflow.com/users/3863689/pushpendra"}, "edited": false, "score": 0, "creation_date": 1482733319, "post_id": 41327136, "comment_id": 69857908, "body": "Yes, I did....."}, {"owner": {"reputation": 2585, "user_id": 3863689, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/86f88788ae53fcea89a2447ef1c0031f?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpendra", "link": "https://stackoverflow.com/users/3863689/pushpendra"}, "edited": false, "score": 1, "creation_date": 1482733525, "post_id": 41327136, "comment_id": 69857964, "body": "I hope this is not commented in your real code  App.getInstance().component.inject(this) in RoomsFragment.?"}, {"owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "reply_to_user": {"reputation": 2585, "user_id": 3863689, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/86f88788ae53fcea89a2447ef1c0031f?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpendra", "link": "https://stackoverflow.com/users/3863689/pushpendra"}, "edited": false, "score": 0, "creation_date": 1482733609, "post_id": 41327136, "comment_id": 69857982, "body": "I tried both way. But no luck."}, {"owner": {"reputation": 2585, "user_id": 3863689, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/86f88788ae53fcea89a2447ef1c0031f?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpendra", "link": "https://stackoverflow.com/users/3863689/pushpendra"}, "edited": false, "score": 0, "creation_date": 1482734100, "post_id": 41327136, "comment_id": 69858119, "body": "split the component and try."}, {"owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "reply_to_user": {"reputation": 2585, "user_id": 3863689, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/86f88788ae53fcea89a2447ef1c0031f?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpendra", "link": "https://stackoverflow.com/users/3863689/pushpendra"}, "edited": false, "score": 0, "creation_date": 1482734159, "post_id": 41327136, "comment_id": 69858135, "body": "Thanks @PushpendraChoudhary i did not create inject interface for RoomsFragment in AppComponent. App.getInstance().component.inject(this) was not throwing error because its superclass <code>BaseFragment</code>  was declared in AppComponent. Hope dagger2 team show do something for this because i have no idea whether sub-class has interface in AppComponent or not, until i manually check AppComponent."}, {"owner": {"reputation": 2585, "user_id": 3863689, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/86f88788ae53fcea89a2447ef1c0031f?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpendra", "link": "https://stackoverflow.com/users/3863689/pushpendra"}, "edited": false, "score": 0, "creation_date": 1482734310, "post_id": 41327136, "comment_id": 69858185, "body": "So basically my first comment was the answer  :P I wrote an answer please accept it."}, {"owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "reply_to_user": {"reputation": 2585, "user_id": 3863689, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/86f88788ae53fcea89a2447ef1c0031f?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpendra", "link": "https://stackoverflow.com/users/3863689/pushpendra"}, "edited": false, "score": 0, "creation_date": 1482734576, "post_id": 41327136, "comment_id": 69858271, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/131470/discussion-between-sai-kiran-and-pushpendra-choudhary\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2585, "user_id": 3863689, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/86f88788ae53fcea89a2447ef1c0031f?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpendra", "link": "https://stackoverflow.com/users/3863689/pushpendra"}, "is_accepted": true, "score": 1, "last_activity_date": 1482734424, "creation_date": 1482734424, "answer_id": 41327365, "question_id": 41327136, "link": "https://stackoverflow.com/questions/41327136/dagger-inject-on-superclass-and-sub-class/41327365#41327365", "title": "Dagger inject on superclass and sub-class", "body": "<p>Try this:   </p>\n\n<pre><code>@Singleton\n        @Component(modules = {AppModule.class, AdapterModule.class})\n        public interface ApplicationComponent {\n            void inject(ApiManager apiManager);\n            void inject(BaseFragment baseFragment);\n            void inject(RoomsFragment roomsFragment);\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3552, "user_id": 374537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G1C8u.jpg?s=128&g=1", "display_name": "gk5885", "link": "https://stackoverflow.com/users/374537/gk5885"}, "is_accepted": false, "score": 5, "last_activity_date": 1482865381, "creation_date": 1482865381, "answer_id": 41350741, "question_id": 41327136, "link": "https://stackoverflow.com/questions/41327136/dagger-inject-on-superclass-and-sub-class/41350741#41350741", "title": "Dagger inject on superclass and sub-class", "body": "<p>The documentation of <a href=\"https://google.github.io/dagger/api/latest/dagger/Component.html#members-injection-methods\" rel=\"noreferrer\">members injection methods</a> in the <code>@Component</code> documentation describes the relevant behavior.</p>\n\n<p>It looks like you are trying to inject members of <code>RoomsFragment</code>.  By adding a method that accepts <code>RoomsFragment</code>, you will inject the <code>@Inject</code> members of <code>RoomsFragment</code> and any supertype (in this case `BaseFragment).</p>\n\n<p>On the other hand, if you invoke a members injection method that accepts <code>BaseFragment</code>, you will inject the <code>@Inject</code> members of <code>BaseFragment</code>, but <strong>not</strong> any members of any subtype.  For that reason, it is almost never a good idea to define a members injection method for an abstract type.</p>\n\n<p>In the original question, this is complicated by the fact that all of the members injection methods are defined as overloads of each other.  This means that you will get different injection behavior for a given type depending on how the overload is resolved.  See <em>Effective Java 2: Item 41</em> for more background on why these overloads are error-prone.</p>\n\n<p>It is also worth noting that in the original code sample there is a members injection method for <code>ApiManager</code>, but that type is injected as an instance into <code>BaseFragment</code>.  Injecting members resolves dependencies transitively, so there is no need to define any method for <code>ApiManager</code> on the component.</p>\n\n<p>So, in order to inject all of the members of <code>RoomsFragment</code> (declared and inhertied), just define one members injection method for <code>RoomsFragment</code>:</p>\n\n<pre><code>@Singleton\n@Component(modules = {AppModule.class, AdapterModule.class})\npublic interface ApplicationComponent {\n  void inject(RoomsFragment roomsFragment);\n}\n</code></pre>\n"}], "owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1911, "favorite_count": 1, "accepted_answer_id": 41327365, "answer_count": 2, "score": 1, "last_activity_date": 1484097637, "creation_date": 1482733059, "last_edit_date": 1484097637, "question_id": 41327136, "link": "https://stackoverflow.com/questions/41327136/dagger-inject-on-superclass-and-sub-class", "title": "Dagger inject on superclass and sub-class", "body": "<p>BaseFragment class</p>\n\n<pre><code>open class BaseFragment : Fragment() {\n\n    @Inject lateinit var apiManager: ApiManager\n    @Inject lateinit var eventBus: EventBus\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        App.getInstance().component.inject(this)\n    }\n\n    override fun onStop() {\n        eventBus.unreg(this)\n        super.onStop()\n    }\n\n    override fun onStart() {\n        super.onStart()\n        eventBus.reg(this)\n    }\n}\n</code></pre>\n\n<p>RoomsFragment class</p>\n\n<pre><code>class RoomsFragment : BaseFragment() {\n\n    @Inject lateinit var roomAdapter: RoomsAdapter\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        App.getInstance().component.inject(this)\n    }\n\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        return inflater?.inflate(R.layout.fragment_rooms_fragment_new, container, false)\n    }\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n        recyclerView.adapter = roomAdapter //This line throws null or lateinit property roomAdapter has not been initialized\n    }\n}\n</code></pre>\n\n<p>AdapterModule class</p>\n\n<pre><code>@Module(includes = AppModule.class)\npublic class AdapterModule {\n\n    @Provides //App module has EventBus so i included it in Module\n    RoomsAdapter provideRoomsAdapter(EventBus eventBus) {\n        return new RoomsAdapter(eventBus);\n    }\n}\n</code></pre>\n\n<p>AppComonent class</p>\n\n<pre><code>@Singleton\n    @Component(modules = {AppModule.class, AdapterModule.class})\n    public interface ApplicationComponent {\n        void inject(ApiManager apiManager);\n        void inject(BaseFragment baseFragment);\n    }\n</code></pre>\n\n<p>As you can see i'm trying to Inject objects in both superclass and sub class, but it is not not working as expected. <code>BaseFragment</code> Injected objects work find but <code>RoomsFragment</code> Injection fail. Any solution ? </p>\n\n<p>Fix:\nI forgot to add interface for sub-class<code>RoomsFragment</code> in ApplicationComponent. Since its superclass <code>BaseFragment</code> interface was present it was not throwing any error at compile time.</p>\n\n<pre><code>@Singleton\n    @Component(modules = {AppModule.class, AdapterModule.class})\n    public interface ApplicationComponent {\n        void inject(RoomsFragment roomsFragment);\n        void inject(ApiManager apiManager);\n        void inject(BaseFragment baseFragment);\n    }\n</code></pre>\n"}, {"tags": ["android", "generics", "inheritance", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482729644, "post_id": 41317805, "comment_id": 69856986, "body": "Could you please be more specific what your are not satisfied about? I don&#39;t see where you  have to &quot;inspect instance type and cast into if we need exact model&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 1560, "user_id": 1274951, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RWChU.jpg?s=128&g=1", "display_name": "bajicdusko", "link": "https://stackoverflow.com/users/1274951/bajicdusko"}, "edited": false, "score": 0, "creation_date": 1482675877, "post_id": 41319829, "comment_id": 69847355, "body": "You&#39;re right. I was tired enough to not realize that with create method I have to define the type of returning provider. However, my initial idea was to have a generic interface. Provider to implement that interface and some static method where I can decide which provider to instantiate. My solution is in UPDATE 1 in edited question, but I&#39;m still not happy with it."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 1, "last_activity_date": 1482655859, "creation_date": 1482655859, "answer_id": 41319829, "question_id": 41317805, "link": "https://stackoverflow.com/questions/41317805/kotlin-generics-inheritance-type-mismatch/41319829#41319829", "title": "Kotlin generics inheritance - Type mismatch", "body": "<p>Your code is not consistent. </p>\n\n<p>In the function declaration you pledge to return <code>E</code>, which is a subtype of <code>BaseProvider&lt;T&gt;</code> and can be chosen by the user on the call site.</p>\n\n<p>But in the implementation you return <code>SomeChildProviderProvider</code>, which is of course a subtype of <code>BaseProvider&lt;T&gt;</code>, but still can be totally unrelated to <code>E</code> which was chosen by the user.</p>\n\n<p>An example:</p>\n\n<pre><code>class AnotherChildProvider : BaseProvider&lt;ChildRealmModel&gt;(context) {...}\n\nval x = BaseProvider.create&lt;ChildRealmModel, AnotherChildProvider&gt;(context)\n</code></pre>\n\n<p>What is the type of <code>x</code>? According to the function signature, it must be <code>AnotherChildProvider</code>. But inside the function you return <code>SomeChildProviderProvider</code>, which CAN NOT be casted to <code>AnotherChildProviderProvider</code>.</p>\n"}], "owner": {"reputation": 1560, "user_id": 1274951, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RWChU.jpg?s=128&g=1", "display_name": "bajicdusko", "link": "https://stackoverflow.com/users/1274951/bajicdusko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1792, "favorite_count": 0, "accepted_answer_id": 41319829, "answer_count": 1, "score": 1, "last_activity_date": 1482739759, "creation_date": 1482624670, "last_edit_date": 1482739759, "question_id": 41317805, "link": "https://stackoverflow.com/questions/41317805/kotlin-generics-inheritance-type-mismatch", "title": "Kotlin generics inheritance - Type mismatch", "body": "<p>I am trying to build a set of providers for realm objects. \nHere is an example structure I've tried to build:</p>\n\n<p>Interface:</p>\n\n<pre><code>interface IDataProvider&lt;out T : RealmObject&gt; {\n     fun getRealmObject(): T\n}\n</code></pre>\n\n<p>Base provider class with companion function for typed provider instantiation:</p>\n\n<pre><code>open abstract class BaseProvider&lt;out T : RealmObject&gt; constructor(protected val context: Context?) : IDataProvider&lt;T&gt; {\n\n     companion object {\n         fun &lt;T : RealmObject, E : BaseProvider&lt;T&gt;&gt; create(context: Context?): E {        \n        if (something) {\n            return SomeChildProviderProvider(context)\n        } else {\n            throw TypeNotSupportedException()\n        }\n      }\n    }\n }\n</code></pre>\n\n<p>And here is a child class:</p>\n\n<pre><code>class SomeChildProvider(context: Context?) : BaseProvider&lt;ChildRealmModel&gt;(context){\n    override fun getRealmObject(): ChildRealmModel {\n         throw UnsupportedOperationException(\"not implemented\")\n    }\n}\n</code></pre>\n\n<p>Problem I have is on the line</p>\n\n<pre><code>return SomeChildProviderProvider(context)\n</code></pre>\n\n<blockquote>\n  <p>Type mismatch.\n  Required: E.\n  Found: SomeChildProvider.</p>\n</blockquote>\n\n<p>I can't figure out why it does not see that E is actually SomeChildProvider.\nThank you.</p>\n\n<p>P.S. I know that I can cast it to E, but in my opinion, it should not be needed in this situation. Maybe I am missing something obvious here or probably lack of Kotlin knowledge.</p>\n\n<p><strong>UPDATE1:</strong>\nAfter the first answer, we have realized that code above does not make much sense since we have to define a type of returning provider and to pass it into create method. Initial idea was that create method returns some type which is BaseProvider subtype. Here are the changes I have made in order to support the initial idea:</p>\n\n<p>IDataProvider</p>\n\n<pre><code>interface IDataProvider {\n    fun execute(realm: Realm)\n    fun createModel(realm: Realm): RealmObject\n}\n</code></pre>\n\n<p>BaseProvider</p>\n\n<pre><code> open abstract class BaseProvider constructor(protected val context: Context?) : IDataProvider {\n\n    override fun execute(realm: Realm) {\n        realm.executeTransaction { r -&gt;\n            createModel(r)\n        }\n    }\n\n    companion object {\n        fun create(context: Context?): IDataProvider {\n            if (something) {\n                return ChildProvider(context)\n            } else {\n                throw TypeNotSupportedException()\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>ChildProvider</p>\n\n<pre><code>class ChildProvider(context: Context?) : BaseProvider(context) {\n    override fun createModel(realm: Realm): ChildRealmModel {\n        var realmObject = realm.createObject(ChildRealmModel ::class.java)\n        //object property initialization\n        return realmObject\n    }\n}\n</code></pre>\n\n<p>UI call</p>\n\n<pre><code>BaseProvider.create(context).execute(realm)\n</code></pre>\n\n<p>Although, createModel method returns RealmObject, it's instance will be of ChildRealmModel. What I don't like about it is that we have to inspect instance type and cast into if we need exact model somewhere else.</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin", "anko"], "comments": [{"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1482603072, "post_id": 41315703, "comment_id": 69834959, "body": "you know what? that is complete misunderstanding of logic behind recyclerView, adapter and ViewHolder. Adapter should bind data to views, but you are trying to put views to views. RTFM <a href=\"https://developer.android.com/reference/android/support/v7/widget/RecyclerView.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/support/v7/widget/&hellip;</a>"}, {"owner": {"reputation": 28036, "user_id": 4826457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXT0U.jpg?s=128&g=1", "display_name": "Suraj Rao", "link": "https://stackoverflow.com/users/4826457/suraj-rao"}, "edited": false, "score": 0, "creation_date": 1482603289, "post_id": 41315703, "comment_id": 69835015, "body": "how is images not being set when it is invisible to the user a problem? Actually that is why recyclerviews are used..check <a href=\"https://developer.android.com/training/material/lists-cards.html\" rel=\"nofollow noreferrer\">developer.android.com/training/material/lists-cards.html</a> . If you still dont need it then you should just use listview"}, {"owner": {"reputation": 367, "user_id": 2513269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/KdYxB.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/2513269/saurabh"}, "reply_to_user": {"reputation": 28036, "user_id": 4826457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXT0U.jpg?s=128&g=1", "display_name": "Suraj Rao", "link": "https://stackoverflow.com/users/4826457/suraj-rao"}, "edited": false, "score": 0, "creation_date": 1482604894, "post_id": 41315703, "comment_id": 69835435, "body": "@SurajRao The images are not being set even when it is visible to the user. For example, see the screenshot."}, {"owner": {"reputation": 367, "user_id": 2513269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/KdYxB.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/2513269/saurabh"}, "reply_to_user": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1482604906, "post_id": 41315703, "comment_id": 69835442, "body": "@ViktorYakunin I am not sure I understand where lies my mistake, can you please elaborate a bit more?"}, {"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1482619243, "post_id": 41315703, "comment_id": 69838457, "body": "Read the manual, it has example. Adapter is the pattern when you map two incompatible classes one with other, so you should map your data to the view in bindView method of adapter. It seems that your data is the URL of image, so you should provide arrayList of urls to adapter and in adapter in bindView you should load image from url to the imageView which will be in your ViewHolder"}, {"owner": {"reputation": 367, "user_id": 2513269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/KdYxB.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/2513269/saurabh"}, "edited": false, "score": 0, "creation_date": 1482653974, "post_id": 41315703, "comment_id": 69842839, "body": "Yes, you are absolutely correct. I was just testing how <code>RecyclerView</code> works using that, and was going to adopt what you said in my actual project."}], "answers": [{"tags": [], "owner": {"reputation": 367, "user_id": 2513269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/KdYxB.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/2513269/saurabh"}, "is_accepted": false, "score": 0, "last_activity_date": 1482654721, "creation_date": 1482654721, "answer_id": 41319746, "question_id": 41315703, "link": "https://stackoverflow.com/questions/41315703/recycleview-list-items-not-appearing/41319746#41319746", "title": "RecycleView list items not appearing", "body": "<p>It worked after I made the binding of data into a <strong>Synchronous</strong> request, and I moved the <code>ImageView</code> manipulation (changing <code>LayoutParams</code>) into the <code>onViewAttachedToWindow</code> overridden method of my adapter.</p>\n\n<p><code>onViewAttachedToWindow</code>:</p>\n\n<pre><code>override fun onViewAttachedToWindow(holder: RecyclerView.ViewHolder?) {\n    super.onViewAttachedToWindow(holder)\n    val t = holder?.itemView as ImageView\n    val dm = Point()\n    context.windowManager.defaultDisplay.getRealSize(dm)\n    val w = t.maxWidth\n    val h = t.maxHeight\n    val params = t.layoutParams\n    if (params != null) {\n        params.width = dm.x\n        params.height = (dm.x * (h.toDouble() / w.toDouble())).toInt()\n        t.layoutParams = params\n        t.requestLayout()\n    }\n}\n</code></pre>\n\n<p><code>onBindViewHolder</code>:</p>\n\n<pre><code>override fun onBindViewHolder(p: RecyclerView.ViewHolder, position: Int) {\n    val v = p.itemView as ImageView\n    Ion.with(v)\n            .load(imageList[position].toString())\n            .tryGet()\n}\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 2513269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/KdYxB.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/2513269/saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 641, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482654721, "creation_date": 1482602583, "last_edit_date": 1482603007, "question_id": 41315703, "link": "https://stackoverflow.com/questions/41315703/recycleview-list-items-not-appearing", "title": "RecycleView list items not appearing", "body": "<p>I've been trying to make <code>RecyclerView</code> work in my app where the list items are <code>ImageView</code>s, and the images get downloaded and put inside (asynchronously) in the <code>onBindViewHolder</code> method. I'm not facing any errors in my code, but for some reason</p>\n\n<blockquote>\n  <p>only the list items which will be visible (even partially) to the user\n  when the activity loads, have images loaded into them.</p>\n</blockquote>\n\n<p>Though I can't see the images, I observed that the height and width of these items have been allocated correctly. And since the images get downloaded first, and then the <code>ImageView</code>'s dimensions are determined I figure that the problem has got something to do with <code>RecyclerView</code> itself? If someone can shed some light on this, it would be great. Thanks.</p>\n\n<p>I would also like to add, that if the Activity is paused and then resumed (by clicking on the \"square\" navigation button and then resuming it), the images of all the list items load correctly.</p>\n\n<p>Pic #1\n<a href=\"https://i.stack.imgur.com/JSZ7c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JSZ7c.png\" alt=\"as you can see the gray portion where an image is supposed to be\"></a>\nPic #2\n<a href=\"https://i.stack.imgur.com/dKsMx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dKsMx.png\" alt=\"somewhat more convincing :)\"></a></p>\n\n<p>Here's my code:</p>\n\n<p><code>onCreate</code> method:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        recyclerView {\n            id = ViewID.ID_LIST\n        }\n\n        val imgList = ArrayList&lt;ImageView&gt;()\n        imgList.add(ImageView(ctx))\n        imgList.add(ImageView(ctx))\n        imgList.add(ImageView(ctx))\n        imgList.add(ImageView(ctx))\n        val lv = findViewById(ViewID.ID_LIST) as RecyclerView\n        lv.layoutManager = LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false)\n        lv.adapter = ImageRecyclerAdapter(ctx, imgList)\n\n}\n</code></pre>\n\n<p>The <code>RecyclerView.Adapter</code> class:</p>\n\n<pre><code>private class ImageRecyclerAdapter(val context: Context, val imageList: ArrayList&lt;ImageView&gt;) :\n            RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n\n        override fun onViewRecycled(holder: RecyclerView.ViewHolder?) {\n            super.onViewRecycled(holder)\n            if (holder != null) {\n                val v = holder.itemView as ImageView\n                v.setImageBitmap(null)\n            }\n        }\n\n        override fun onBindViewHolder(p: RecyclerView.ViewHolder, position: Int) {\n            val v = p.itemView as ImageView\n            Ion.with(v)\n                    .load(\"https://pbs.twimg.com/profile_images/616076655547682816/6gMRtQyY.jpg\")\n                    .setCallback({ exception, t -&gt;\n                        if (t != null) {\n                            val dm = Point()\n                            context.windowManager.defaultDisplay.getRealSize(dm)\n                            val w = t.maxWidth\n                            val h = t.maxHeight\n\n                            val params = t.layoutParams\n                            if (params != null) {\n                                params.width = dm.x\n                                params.height = (dm.x * (h.toDouble() / w.toDouble())).toInt()\n                                t.layoutParams = params\n                                t.requestLayout()\n                            }\n                        }\n                    })\n        }\n\n        override fun getItemCount(): Int {\n            return imageList.size\n        }\n\n        override fun onCreateViewHolder(parent: ViewGroup?, viewType: Int): RecyclerView.ViewHolder {\n            val v = ImageView(context)\n            return object : RecyclerView.ViewHolder(v) {}\n        }\n    }\n</code></pre>\n"}, {"tags": ["arrays", "list", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1482605565, "post_id": 41314484, "comment_id": 69835654, "body": "Why not <code>inline fun &lt;reified T&gt; toArray(list: List&lt;T&gt;)</code>? It saves you from the unchecked cast, and <code>T</code> can also be inferred from the argument type."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1482605719, "post_id": 41314484, "comment_id": 69835702, "body": "Uhm, and this would be completely equivalent to <code>.toTypedArray()</code>... :)"}, {"owner": {"reputation": 727, "user_id": 7108266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2123ca83dfca370821fbac4360a5a27?s=128&d=identicon&r=PG&f=1", "display_name": "mmorihiro", "link": "https://stackoverflow.com/users/7108266/mmorihiro"}, "edited": false, "score": 0, "creation_date": 1482626228, "post_id": 41314484, "comment_id": 69839503, "body": "I can&#39;t change the function&#39;s signature."}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 53, "last_activity_date": 1482592869, "creation_date": 1482592869, "answer_id": 41314484, "question_id": 41312629, "link": "https://stackoverflow.com/questions/41312629/how-to-convert-a-type-erased-list-to-an-array-in-kotlin/41314484#41314484", "title": "How to convert a type-erased list to an array in Kotlin?", "body": "<p>Problem here, is that you actually trying cast <code>Object[]</code> to <code>String[]</code> in terms of Java, or <code>Array&lt;Any&gt;</code> to <code>Array&lt;String&gt;</code> in terms of Kotlin, but this is different objects.</p>\n\n<p>So, this statement:</p>\n\n<pre><code>list.toTypedArray()\n</code></pre>\n\n<p>returns <code>Array&lt;Any?&gt;</code>, and then you trying to cast it to <code>Array&lt;String&gt;</code> and get <code>ClassCastException</code>. </p>\n\n<h3>How to fix?</h3>\n\n<p>I suggest pass type parameter itself, and cast <code>List</code>:</p>\n\n<pre><code>inline fun &lt;reified T&gt; toArray(list: List&lt;*&gt;): Array&lt;T&gt; {\n    return (list as List&lt;T&gt;).toTypedArray()\n}\n\ntoArray&lt;String&gt;(listOf(\"1\", \"2\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 8, "last_activity_date": 1585425163, "last_edit_date": 1585425163, "creation_date": 1482855919, "answer_id": 41348657, "question_id": 41312629, "link": "https://stackoverflow.com/questions/41312629/how-to-convert-a-type-erased-list-to-an-array-in-kotlin/41348657#41348657", "title": "How to convert a type-erased list to an array in Kotlin?", "body": "<p>To understand why this happens I recommend reading <a href=\"https://stackoverflow.com/q/36262305/3255152\">Difference between List and Array types in Kotlin</a> and <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=39\" rel=\"nofollow noreferrer\">Java Practices -> Prefer Collections over older classes</a>.</p>\n\n<p>In general I recommend using lists instead of arrays but if you want to convert a type-erased list to an array in Kotlin the easiest way to do so is first mapping to a typed list and then converting to a typed array:</p>\n\n<pre><code>list.map { it as String }.toTypedArray()\n</code></pre>\n\n<p>If you don't actually need an array but a typed list will do then you can simply map the type-erased list to a typed list:</p>\n\n<pre><code>list.map { it as String }\n</code></pre>\n\n<p>If you find yourself often converting a type-erased list to an array and performance matters then I recommend creating a map function optimized for doing this while avoiding an intermediary list:</p>\n\n<pre><code>inline fun &lt;T, reified R&gt; List&lt;T&gt;.mapToTypedArray(transform: (T) -&gt; R): Array&lt;R&gt; {\n    return when (this) {\n        is RandomAccess -&gt; Array(size) { index -&gt; transform(this[index]) }\n        else -&gt; with(iterator()) { Array(size) { transform(next()) } }\n    }\n}\n</code></pre>\n\n<p>You can then efficiently convert a <code>List&lt;*&gt;</code> to a typed array:</p>\n\n<pre><code>list.mapToTypedArray { it as String }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5781, "user_id": 845296, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1567763160/picture?type=large", "display_name": "epool", "link": "https://stackoverflow.com/users/845296/epool"}, "is_accepted": false, "score": 0, "last_activity_date": 1527225377, "creation_date": 1527225377, "answer_id": 50521954, "question_id": 41312629, "link": "https://stackoverflow.com/questions/41312629/how-to-convert-a-type-erased-list-to-an-array-in-kotlin/50521954#50521954", "title": "How to convert a type-erased list to an array in Kotlin?", "body": "<p>For some reason, I was getting an invalid argument number exception when I was trying to do this:</p>\n\n<pre><code>val argumentTypeMirrors = mutableListOf&lt;TypeMirror&gt;()\n... // add items to argumentTypeMirrors\nval array = argumentTypeMirrors.toTypedArray()\n</code></pre>\n\n<p>And I ended up doing it this way:</p>\n\n<pre><code>val argumentTypeMirrors = mutableListOf&lt;TypeMirror&gt;()\n... // add items to argumentTypeMirrors\nval array = Array(argumentTypeMirrors.size) {\n    argumentTypeMirrors[it]\n}\n</code></pre>\n\n<p>Then I was able to destruct my <code>array</code> with <code>*array</code> for passing it as a <code>varargs</code> parameter.</p>\n"}], "owner": {"reputation": 727, "user_id": 7108266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2123ca83dfca370821fbac4360a5a27?s=128&d=identicon&r=PG&f=1", "display_name": "mmorihiro", "link": "https://stackoverflow.com/users/7108266/mmorihiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33531, "favorite_count": 3, "accepted_answer_id": 41314484, "answer_count": 3, "score": 25, "last_activity_date": 1585425163, "creation_date": 1482576928, "question_id": 41312629, "link": "https://stackoverflow.com/questions/41312629/how-to-convert-a-type-erased-list-to-an-array-in-kotlin", "title": "How to convert a type-erased list to an array in Kotlin?", "body": "<p>A function <code>toArray</code> should convert type-erased list to <code>T</code> that is <code>Array&lt;String&gt;</code> now.</p>\n\n<pre><code>inline fun &lt;reified T&gt; toArray(list: List&lt;*&gt;): T {\n    return list.toTypedArray() as T\n}\n\ntoArray&lt;Array&lt;String&gt;&gt;(listOf(\"a\", \"b\", \"c\")) // should be arrayOf(\"a\", \"b\", \"c\")\n</code></pre>\n\n<p>However, <code>toArray</code> throws this error.</p>\n\n<blockquote>\n  <p>java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Ljava.lang.String;</p>\n</blockquote>\n\n<p>Do you have any ideas?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1482572959, "post_id": 41310592, "comment_id": 69827518, "body": "I think you shouldn&#39;t use <code>kotlin-kapt</code> explicitly. This is a wild guess though."}, {"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1482603311, "post_id": 41310592, "comment_id": 69835025, "body": "I don&#39;t know what you mean by that, but the info I found online for Dagger2 with Kotlin clearly indicates that the kapt processor needs to be used (<a href=\"https://blog.jetbrains.com/kotlin/2015/06/better-annotation-processing-supporting-stubs-in-kapt/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2015/06/&hellip;</a>)."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1482605771, "post_id": 41310592, "comment_id": 69835721, "body": "Try without it."}, {"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1482608442, "post_id": 41310592, "comment_id": 69836375, "body": "I have managed to build by converting my Dagger2 components and modules to Kotlin, and then going through all injectable classes and converting them to Kotlin as well. While this works, it can&#39;t be the right solution as the whole idea about Kotlin is interoperability, and having to convert everything right off the bat to Kotlin so just I can compile is not right. If I remove kapt I can&#39;t compile injectable Kotlin files."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1482611669, "post_id": 41310592, "comment_id": 69837075, "body": "My guess was wrong then, sorry. I figured the issue is with kapt2, but I guess not"}], "answers": [{"tags": [], "owner": {"reputation": 769, "user_id": 2793494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SZOih.jpg?s=128&g=1", "display_name": "Yurii Kyrylchuk", "link": "https://stackoverflow.com/users/2793494/yurii-kyrylchuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1483314761, "creation_date": 1483314761, "answer_id": 41420057, "question_id": 41310592, "link": "https://stackoverflow.com/questions/41310592/kotlin-and-dagger2/41420057#41420057", "title": "Kotlin and Dagger2", "body": "<p>Just remove</p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 6200125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dGoQ5.png?s=128&g=1", "display_name": "AyoGitNg", "link": "https://stackoverflow.com/users/6200125/ayogitng"}, "is_accepted": false, "score": 0, "last_activity_date": 1504531209, "creation_date": 1504531209, "answer_id": 46038006, "question_id": 41310592, "link": "https://stackoverflow.com/questions/41310592/kotlin-and-dagger2/46038006#46038006", "title": "Kotlin and Dagger2", "body": "<p>The Problem is your are using </p>\n\n<blockquote>\n  <p>DaggerObjectGraph</p>\n</blockquote>\n\n<p>which is no longer available in dagger2.</p>\n\n<p><a href=\"https://google.github.io/dagger//users-guide.html\" rel=\"nofollow noreferrer\">Here is the documentation for dagger 2</a>.</p>\n\n<p>This is a working version </p>\n\n<p>in your app level build.gradle add the following under the dependencies closure</p>\n\n<pre><code>    compile \"com.google.dagger:dagger:2.9\"\n    kapt \"com.google.dagger:dagger-compiler:2.9\"\n    provided 'javax.annotation:jsr250-api:1.0'\n</code></pre>\n\n<p>also add this to the same file</p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n</code></pre>\n\n<p>Then create the components and module classes and inject in whatever activity or fragment that you want.</p>\n\n<p>Here is a sample Component Class</p>\n\n<pre><code>@Singleton\n@Component(modules = arrayOf(AppModule::class, NetModule::class))\ninterface AppComponent {\n\n    fun gson() : Gson\n    fun retrofit(): Retrofit\n    fun okHttpClient(): OkHttpClient\n}\n</code></pre>\n\n<p>Here is a sample Module class</p>\n\n<pre><code>@Module\nclass AppModule(internal var mApplication: Application) {\n\n    @Provides\n    @Singleton\n    fun providesApplication(): Application {\n        return mApplication\n    }\n\n}\n</code></pre>\n\n<p>In my application class </p>\n\n<pre><code>class App : Application() {\n\ncompanion object {\n    @JvmStatic lateinit var component: AppComponent\n}\n\noverride fun onCreate() {\n    super.onCreate()\n\n    appComponent = DaggerAppComponent.builder()\n            .appModule(AppModule(this))\n            .netModule(NetModule(Constants.BASE_URL))\n            .build()\n\n}\n\n\n}\n</code></pre>\n\n<p>This is how dagger components are initialised in dagger 2. You can now create subcomponents for different activities or fragment and inject them.</p>\n"}], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1360, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1504531209, "creation_date": 1482557156, "last_edit_date": 1482557486, "question_id": 41310592, "link": "https://stackoverflow.com/questions/41310592/kotlin-and-dagger2", "title": "Kotlin and Dagger2", "body": "<p>I'm trying to add Kotlin to my project, but after enabling Kotlin I can't build as the Dagger2 classes no longer get generated. I tried a second project, and I have the same issue (it's actually worse, it complains about both Dagger2 and DataBinding).</p>\n\n<p>These are the changes I have done to enable Kotlin:</p>\n\n<p>Project build.gradle:</p>\n\n<pre><code>diff --git a/build.gradle b/build.gradle\nindex 486700c..91e4cda 100644\n--- a/build.gradle\n+++ b/build.gradle\n@@ -1,13 +1,15 @@\n // Top-level build file where you can add configuration options common to all sub-projects/modules.\n\n buildscript {\n+    ext.kotlin_version = '1.0.5-3'\n     repositories {\n         jcenter()\n     }\n     dependencies {\n-        classpath 'com.android.tools.build:gradle:2.3.0-alpha2'\n+        classpath 'com.android.tools.build:gradle:2.3.0-beta1'\n         classpath 'com.google.gms:google-services:3.0.0'\n         classpath 'com.neenbedankt.gradle.plugins:android-apt:1.8'\n+        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n         // NOTE: Do not place your application dependencies here; they belong\n         // in the individual module build.gradle files\n</code></pre>\n\n<p>App build.gradle:</p>\n\n<pre><code>diff --git a/app/build.gradle b/app/build.gradle\nindex 345dab0..e59f91c 100644\n--- a/app/build.gradle\n+++ b/app/build.gradle\n@@ -1,5 +1,6 @@\n apply plugin: 'com.android.application'\n-apply plugin: 'com.neenbedankt.android-apt'\n+apply plugin: 'kotlin-android'\n+apply plugin: 'kotlin-kapt'\n\n android {\n     compileSdkVersion 25\n@@ -39,6 +40,13 @@ android {\n         incremental true\n         javaMaxHeapSize \"5g\"\n     }\n+    sourceSets {\n+        main.java.srcDirs += 'src/main/kotlin'\n+    }\n+}\n+\n+kapt {\n+    generateStubs = true\n }\n\n dependencies {\n@@ -71,11 +79,15 @@ dependencies {\n     compile 'com.artemzin.rxjava:proguard-rules:1.2.1.0'\n\n     // Dagger 2\n-    apt 'com.google.dagger:dagger-compiler:2.7'\n-    testApt 'com.google.dagger:dagger-compiler:2.7'\n+    kapt 'com.google.dagger:dagger-compiler:2.7'\n+    //testApt 'com.google.dagger:dagger-compiler:2.7'\n     compile 'com.google.dagger:dagger:2.7'\n     provided 'javax.annotation:jsr250-api:1.0'\n+    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n }\n\n apply plugin: 'com.google.gms.google-services'\n+repositories {\n+    mavenCentral()\n+}\n</code></pre>\n\n<p>The error happens here:</p>\n\n<pre><code>sObjectGraph = DaggerObjectGraph\n    .builder()\n    .appModule(new AppModule(context.getApplicationContext()))\n    .build();\n</code></pre>\n\n<p>where DaggerObjectGraph is no longer defined.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "edited": false, "score": 0, "creation_date": 1482866640, "post_id": 41349433, "comment_id": 69903681, "body": "I agree that the 2nd option is really nice. Unfortunately, for me, I don&#39;t think it works nicely since I actually have a more complex data structure that just involves some things like <code>SneakyType</code>. The 1st option is what I ended up doing. Gave an up-vote for the good options. Not marking &quot;correct&quot; just yet in hopes that somebody comes up with a better idea. Thanks!"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 2, "last_activity_date": 1482875157, "last_edit_date": 1482875157, "creation_date": 1482859383, "answer_id": 41349433, "question_id": 41310221, "link": "https://stackoverflow.com/questions/41310221/kotlin-visibility-of-nested-members/41349433#41349433", "title": "Kotlin visibility of nested members", "body": "<p>I see two viable options:</p>\n\n<ol>\n<li><p>Use the <code>internal</code> <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"nofollow noreferrer\">visibility modifier</a>:</p>\n\n<pre><code>class Example private constructor(builder: Builder) {\n    private val doNotExposeThis: SneakyType\n\n    init {\n        doNotExposeThis = builder.doNotExposeThis\n    }\n\n    internal class SneakyType(x: String)\n\n    class Builder {\n        internal lateinit var doNotExposeThis: SneakyType\n\n        fun addFoo(something: String) {\n            doNotExposeThis = SneakyType(something)\n        }\n\n        fun build(): Example {\n            return Example(this)\n        }\n    }\n}\n</code></pre>\n\n<p>This will make <code>SneakyType</code> only visible within your Kotlin compilation module.</p></li>\n<li><p>Make <code>Example</code> independent of its builder (this is what I recommend):</p>\n\n<pre><code>class Example private constructor(private val doNotExposeThis: SneakyType) {\n    private class SneakyType(x: String)\n\n    class Builder {\n        private lateinit var doNotExposeThis: SneakyType\n\n        fun addFoo(something: String) {\n            doNotExposeThis = SneakyType(something)\n        }\n\n        fun build(): Example {\n            return Example(doNotExposeThis)\n        }\n    }\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1049, "favorite_count": 2, "accepted_answer_id": 41349433, "answer_count": 1, "score": 2, "last_activity_date": 1482875157, "creation_date": 1482552151, "last_edit_date": 1482858167, "question_id": 41310221, "link": "https://stackoverflow.com/questions/41310221/kotlin-visibility-of-nested-members", "title": "Kotlin visibility of nested members", "body": "<p>I have a class with a nested, private class. I have a <code>Builder</code>, standard Java builder pattern, that constructs instances of this class. I don't want anyone outside of my class to be able to see my hidden class.</p>\n\n<p>In Java I could do this:</p>\n\n<pre><code>public class Example {\n    private SneakyType doNotExposeThis;\n\n    private Example(Builder builder) {\n        // OK 'cause in Java you can access the private\n        // members of a nested class\n        doNotExposeThis = builder.doNotExposeThis;\n    }\n\n    private static class SneakyType {\n        SneakyType(String x) {\n            // stuff\n        }\n    }\n\n    public static class Builder {\n        private SneakyType doNotExposeThis;\n\n        public void addFoo(String something) {\n            doNotExposeThis = new SneakyType(something);\n        }\n\n        public Example build() { return new Example(this); }\n    }\n}\n</code></pre>\n\n<p>But I can't figure out how to do the same in Kotlin:</p>\n\n<pre><code>class Example(builder: Builder) {\n    private lateinit var doNotExposeThis: SneakyType\n\n    init {\n        doNotExposeThis = builder.doNotExposeThis\n    }\n\n    class Builder {\n        // If private or internal I can't access it in Example.init\n        // and if public it gets exposed. \n        val doNotExposeThis: SneakyType\n\n\n        fun addFoo(something: String) {\n            // actual construction is quite a bit more complex\n            doNotExposeThis = SneakyType(something)\n        }\n    }\n}\n</code></pre>\n\n<p>Note that for the sake of Java interop I want to keep my builder. I also want it because my object is complicated to construct and I want it to be immutable so I have a builder with lots of setters, adders, vals, etc. and then in <code>init</code> I construct a single immutable <code>Example</code>.</p>\n\n<p>The only alternatives I see are:</p>\n\n<ol>\n<li>Instead of have a <code>SneakyType</code> in my builder save all the info necessary to construct one and then construct it in <code>Example</code>. Works but adds a ton of complexity.</li>\n<li>Give up on <code>Example</code> being immutable and allow the builder to call into it to set up a <code>Sneaky</code></li>\n<li>Expose the <code>Sneaky</code></li>\n</ol>\n\n<p>Is there no way to mimic the Java version?</p>\n"}, {"tags": ["kotlin", "classcastexception"], "answers": [{"comments": [{"owner": {"reputation": 2283, "user_id": 5993278, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/aN3Pq.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5993278/alex"}, "edited": false, "score": 0, "creation_date": 1482570757, "post_id": 41309628, "comment_id": 69826994, "body": "sorry, i mean a little another problem. Actually, i wanted to get compiling but when it is running to get ClassCastException"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 2283, "user_id": 5993278, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/aN3Pq.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5993278/alex"}, "edited": false, "score": 0, "creation_date": 1482593353, "post_id": 41309628, "comment_id": 69832460, "body": "that&#39;s what I meant. It is not possible to get <code>ClassCastException</code> at runtime with those"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 5, "last_activity_date": 1482544038, "creation_date": 1482544038, "answer_id": 41309628, "question_id": 41307338, "link": "https://stackoverflow.com/questions/41307338/operator-as-and-classcastexception/41309628#41309628", "title": "Operator as and ClassCastException", "body": "<p>Both <code>(Animal) -&gt; Unit</code> and <code>(Cat) -&gt; Unit</code> types are represented by the same class <code>Function1&lt;P1, R&gt;</code>. Casting one to another will never result in a <code>ClassCastException</code> since they are the same at runtime.</p>\n"}], "owner": {"reputation": 2283, "user_id": 5993278, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/aN3Pq.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5993278/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571848577, "creation_date": 1482523911, "last_edit_date": 1571848577, "question_id": 41307338, "link": "https://stackoverflow.com/questions/41307338/operator-as-and-classcastexception", "title": "Operator as and ClassCastException", "body": "<p>Can I get <code>ClassCastException</code> when program is running using operator <code>as</code>, at the same time program should be compiled correctly. Maybe there is some trick with types.</p>\n\n<p>For example with simple type inheritance</p>\n\n<pre><code>((Animal) -&gt; Unit) --&gt; ((Cat) -&gt; Unit)\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482543854, "post_id": 41306403, "comment_id": 69822514, "body": "It is not clear what you want to achieve, particularly the meaning of <code>view</code> method. Could you write down at least the method signatures?"}, {"owner": {"reputation": 691, "user_id": 7139528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ac1707910f28b04551ed7ba6f1b645bc?s=128&d=identicon&r=PG&f=1", "display_name": "siur", "link": "https://stackoverflow.com/users/7139528/siur"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482544370, "post_id": 41306403, "comment_id": 69822582, "body": "@voddan In this case the view should probably be <i><b>show</b></i> . The type would be void, and the methods would be public. So the clock would set the hour, set the minute and show the time to the user."}], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 4394320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zQz6GfUap28/AAAAAAAAAAI/AAAAAAAAFwo/qEoa8Pe9RTI/photo.jpg?sz=128", "display_name": "timakden", "link": "https://stackoverflow.com/users/4394320/timakden"}, "is_accepted": false, "score": 2, "last_activity_date": 1482859386, "last_edit_date": 1482859386, "creation_date": 1482849162, "answer_id": 41347057, "question_id": 41306403, "link": "https://stackoverflow.com/questions/41306403/creating-a-digital-clock-class-using-kotlin/41347057#41347057", "title": "Creating a digital Clock Class using Kotlin", "body": "<p>You don't need explicitly declare setters and getters in Kotlin. You can use something like that:</p>\n\n<pre><code>class Clock(var hour: Int, var minute: Int) {\n    fun show() = println(\"$hour:$minute\")\n}\n</code></pre>\n\n<p>Or if you don't want to set <code>hour</code> and <code>minute</code> in constructor:</p>\n\n<pre><code>class Clock() {\n    var hour = 0\n    var minute = 0\n\n    fun show() = println(\"$hour:$minute\")\n}\n</code></pre>\n\n<p>For more information see this <a href=\"https://kotlinlang.org/docs/reference/classes.html\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 5603334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AXnzq9f-eCU/AAAAAAAAAAI/AAAAAAAAA84/-Y9IPweSbRw/photo.jpg?sz=128", "display_name": "Myeongin Woo", "link": "https://stackoverflow.com/users/5603334/myeongin-woo"}, "is_accepted": false, "score": 0, "last_activity_date": 1483339337, "creation_date": 1483339337, "answer_id": 41422401, "question_id": 41306403, "link": "https://stackoverflow.com/questions/41306403/creating-a-digital-clock-class-using-kotlin/41422401#41422401", "title": "Creating a digital Clock Class using Kotlin", "body": "<pre><code>data class Clock(var minute: Int, var hour: Int) {\n  fun show() = println(\"hour : $hour, minute : $minute\")\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>data class Clock(var minute: Int = 0, var hour: Int = 12) {\n  fun show() = println(\"hour : $hour, minute : $minute\")\n}\n</code></pre>\n\n<p>if use 'data class' you don't create getter, setter</p>\n\n<p><a href=\"http://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">http://kotlinlang.org/docs/reference/data-classes.html</a></p>\n"}], "owner": {"reputation": 691, "user_id": 7139528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ac1707910f28b04551ed7ba6f1b645bc?s=128&d=identicon&r=PG&f=1", "display_name": "siur", "link": "https://stackoverflow.com/users/7139528/siur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1483339337, "creation_date": 1482518488, "question_id": 41306403, "link": "https://stackoverflow.com/questions/41306403/creating-a-digital-clock-class-using-kotlin", "title": "Creating a digital Clock Class using Kotlin", "body": "<p>I am learning a new JVM language; Kotlin and I am attempting to create a <strong><em>digital clock</em></strong> class containing the <strong><em>Hour</em></strong> and <strong><em>Minute</em></strong> attributes with the <strong><em>sethour</em></strong>, <strong><em>setminute</em></strong> and <strong><em>view</em></strong> methods describing behaviour. </p>\n\n<p><strong><em>THIS is the code :</em></strong> </p>\n\n<pre><code>class clock (Hour: Int, Minute: Int)  {\n\n\n}\n</code></pre>\n\n<p>I am not sure how I would design the methods, if someone could assist me I would really appreciate that. </p>\n\n<p><strong><em>Cheers, \nAndre</em></strong></p>\n"}, {"tags": ["javafx", "kotlin", "tornadofx"], "comments": [{"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1482491077, "post_id": 41299769, "comment_id": 69802625, "body": "Just to be sure, you simply want the same selection in both tables when you hit the sync button?"}, {"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "reply_to_user": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1482491426, "post_id": 41299769, "comment_id": 69802819, "body": "Yes. Also the corresponding model would get updated"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1482491756, "post_id": 41299769, "comment_id": 69803016, "body": "OK. Quick note: You have injected the same model in both views and call <code>bindSelected</code> on both. Note that the <code>bindSelected</code> call should be called once, and not when you click an action. What is does is simply make sure that a table selection will update the model - not when you call bindSelection, but when the selection occurs. Not completely sure of your actual use case, but let me try to rewrite it a bit."}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1482491831, "post_id": 41299769, "comment_id": 69803056, "body": "One last thing - do you really want the change to only occur when you click the button, or should it happen automatically?"}, {"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "reply_to_user": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1482492178, "post_id": 41299769, "comment_id": 69803220, "body": "Well the use case is, I have two tables with same layout but different data. I want to compare that data (row by row) and select which is the correct one (by clicking the sync button. Note Sync button syncs the corresponding selected row). Since the layout is same, I had created one Person and PersonModel to map with the data"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1482492198, "post_id": 41299769, "comment_id": 69803235, "body": "Also, you don&#39;t have the same persons in the two tables, so selection would never match in the other table. Do you want to add the selected person to the other item on sync?"}, {"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "reply_to_user": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1482492448, "post_id": 41299769, "comment_id": 69803383, "body": "Yes on clicking of the Sync button, I want to push the selected row to the other table&#39;s corresponding row"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1482492497, "post_id": 41299769, "comment_id": 69803406, "body": "OK, and by corresponding row you mean the same rowIndex, unless the target row has fewer elements than the row index, then just append as the last item?"}, {"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "reply_to_user": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1482492684, "post_id": 41299769, "comment_id": 69803500, "body": "Yes, same row Index. For simplicity, the data size is same on both"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1482492790, "post_id": 41299769, "comment_id": 69803555, "body": "OK, answer coming up :)"}], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1482501402, "post_id": 41300901, "comment_id": 69807827, "body": "I am not able to build 1.5.9-SNAPSHOT. I tried this in my gradle.build: dependencies { compile group: &quot;no.tornado&quot;, name: &quot;tornadofx&quot;, version: &quot;1.5.9-SNAPSHOT&quot;, changing: true }"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "reply_to_user": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1482502432, "post_id": 41300901, "comment_id": 69808266, "body": "It is not in any public repo, so you would need to build it yourself by doing <code>git clone https:&#47;&#47;github.com&#47;edvin&#47;tornadofx &amp;&amp; mvn install</code>. I&#39;ll release later today if you don&#39;t want to bother with that :)"}, {"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1482515969, "post_id": 41300901, "comment_id": 69814587, "body": "Great!! Your well explained solution works as expected  :) I just had to do one tiny modification when we subscribe; i.e. adding items.removeAt(event.index) for the if (!items.contains(event.person)) to ensure the overriding behaviour. Thanks a ton !!"}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 2, "last_activity_date": 1482493568, "creation_date": 1482493568, "answer_id": 41300901, "question_id": 41299769, "link": "https://stackoverflow.com/questions/41299769/tornadofx-tableview-sync-two-tables/41300901#41300901", "title": "Tornadofx tableview sync two tables", "body": "<p>First we need to be able to identify a Person, so include equals/hashCode in the Person object:</p>\n\n<pre><code>class Person(firstName: String = \"\", lastName: String = \"\") {\n    val firstNameProperty = SimpleStringProperty(firstName)\n    var firstName by firstNameProperty\n    val lastNameProperty = SimpleStringProperty(lastName)\n    var lastName by lastNameProperty\n\n    override fun equals(other: Any?): Boolean {\n        if (this === other) return true\n        if (other?.javaClass != javaClass) return false\n\n        other as Person\n\n        if (firstName != other.firstName) return false\n        if (lastName != other.lastName) return false\n\n        return true\n    }\n\n    override fun hashCode(): Int {\n        var result = firstName.hashCode()\n        result = 31 * result + lastName.hashCode()\n        return result\n    }\n\n}\n</code></pre>\n\n<p>We want to fire an event when you click the Sync button, so we define an event that can contain both the selected person and the row index:</p>\n\n<pre><code>class SyncPersonEvent(val person: Person, val index: Int) : FXEvent()\n</code></pre>\n\n<p>You cannot inject the same PersonModel instance and use <code>bindSelected</code> in both views, since that will override each other. Also, <code>bindSelected</code> will react whenever the selection changes, not when you call <code>bindSelected</code> itself, so it doesn't belong in the button handler. We'll use a separate model for each view and bind towards the selection. Then we can easily know what person is selected when the button handler runs, and we don't need to hold on to an instance of the TableView. We'll also use the new root builder syntax to clean up everything. Here is the PersonList view:</p>\n\n<pre><code>class PersonList : View() {\n    val ctrl: PersonController by inject()\n    val selectedPerson = PersonModel()\n\n    override val root = vbox {\n        tableview(ctrl.persons) {\n            column(\"First Name\", Person::firstNameProperty)\n            column(\"Last Name\", Person::lastNameProperty)\n            columnResizePolicy = SmartResize.POLICY\n            bindSelected(selectedPerson)\n            subscribe&lt;SyncPersonEvent&gt; { event -&gt;\n                if (!items.contains(event.person)) {\n                    items.add(event.index, event.person)\n                }\n                if (selectedItem != event.person) {\n                    requestFocus()\n                    selectionModel.select(event.person)\n                }\n            }\n        }\n        hbox {\n            button(\"Sync\") {\n                setOnAction {\n                    selectedPerson.item?.apply {\n                        fire(SyncPersonEvent(this, ctrl.persons.indexOf(this)))\n                    }\n                }\n\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The <code>AnotherPersonList</code> view is identical except for the reference to <code>ctrl.newPersons</code> instead of <code>ctrl.persons</code> in two places. (You might use the same fragment and send in the list as a parameter so you don't need to duplicate all this code).</p>\n\n<p>The sync button now fires our event, provided that a person is selected at the time of the button click:</p>\n\n<pre><code>selectedPerson.item?.apply {\n    fire(SyncPersonEvent(this, ctrl.persons.indexOf(this)))\n}\n</code></pre>\n\n<p>Inside the TableView we now subscribe to the <code>SyncPersonEvent</code>:</p>\n\n<pre><code>subscribe&lt;SyncPersonEvent&gt; { event -&gt;\n    if (!items.contains(event.person)) {\n        items.add(event.index, event.person)\n    }\n    if (selectedItem != event.person) {\n        requestFocus()\n        selectionModel.select(event.person)\n    }\n}\n</code></pre>\n\n<p>The sync event is notified when the event fires. It first checks if the items of for the tableview contains this person, or adds it at the correct index if not. A real application should check that the index is within the bounds of the items list.</p>\n\n<p>Then it checks if this person is selected already and if not it will make the selection and also request focus to this table. The check is important so that the source table doesn't also request focus or perform the (redundant) selection.</p>\n\n<p>As noted, a good optimization would be to send in the items list as a parameter so that you don't need to duplicate the PersonList code.</p>\n\n<p>Also notice the use of the new builder syntax:</p>\n\n<pre><code>override val root = vbox {\n}\n</code></pre>\n\n<p>This is much neater than first declaring the root node as a <code>VBox()</code> and when building the rest of the UI in the <code>init</code> block.</p>\n\n<p>Hope this is what you're looking for :)</p>\n\n<p>Important: This solution requires TornadoFX 1.5.9. It will be released today :) You can build against 1.5.9-SNAPSHOT in the mean time if you like.</p>\n"}, {"comments": [{"owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1482518179, "post_id": 41303824, "comment_id": 69815506, "body": "Nice, just checked RxKotlinFx on github. Intriguing I must say as the very first demo itself is similar to what I am looking for. So I added the required dependencies and ran the above code; But the bindings don&#39;t work. Nothing happens when I click the &#39;SYNC&#39; button. No error. What did I miss?"}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "reply_to_user": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "edited": false, "score": 0, "creation_date": 1482702661, "post_id": 41303824, "comment_id": 69853159, "body": "Yeah i missed some of your requirements and we were discussing that in the <a href=\"https://kotlinlang.slack.com/messages\" rel=\"nofollow noreferrer\">Kotlin #tornadofx channel in Slack</a>. If I get a chance to look at your case later, I will. But if you want to give RxJavaFX/RxKotlinFX a look, you can <a href=\"https://www.gitbook.com/book/thomasnield/rxjavafx-guide/details\" rel=\"nofollow noreferrer\">check out the free eBook</a> that teaches RxJava with JavaFX/TornadoFX in detail. You might find it useful if you are building complex desktop applications."}], "tags": [], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "is_accepted": false, "score": 0, "last_activity_date": 1482505973, "creation_date": 1482505973, "answer_id": 41303824, "question_id": 41299769, "link": "https://stackoverflow.com/questions/41299769/tornadofx-tableview-sync-two-tables/41303824#41303824", "title": "Tornadofx tableview sync two tables", "body": "<p>Another option you have is RxJavaFX/RxKotlinFX. I have been <a href=\"https://thomasnield.gitbooks.io/rxjavafx-guide/content/\" rel=\"nofollow noreferrer\">writing a companion guide for these libraries just like the TornadoFX one</a>. </p>\n\n<p>When you have to deal with complex event streams and keeping UI components synchronized, reactive programming is effective for these situations. </p>\n\n<pre><code>package org.nield.demo.app\n\n\nimport javafx.beans.property.SimpleStringProperty\nimport javafx.collections.FXCollections\nimport javafx.collections.ObservableList\nimport rx.javafx.kt.actionEvents\nimport rx.javafx.kt.addTo\nimport rx.javafx.kt.onChangedObservable\nimport rx.javafx.sources.CompositeObservable\nimport rx.lang.kotlin.toObservable\nimport tornadofx.*\n\nclass MyApp: App(MainView::class)\n\nclass MainView : View() {\n    val personList: PersonList by inject()\n    val anotherPersonList: AnotherPersonList by inject()\n\n    override val root = hbox {\n        this += personList\n        this += anotherPersonList\n    }\n}\n\nclass PersonList : View() {\n\n    val ctrl: PersonController by inject()\n\n    override val root = vbox {\n        val table = tableview(ctrl.persons) {\n            column(\"First Name\", Person::firstNameProperty)\n            column(\"Last Name\", Person::lastNameProperty)\n\n            //broadcast selections\n            selectionModel.selectedIndices.onChangedObservable()\n                    .addTo(ctrl.selectedLeft)\n\n            columnResizePolicy = SmartResize.POLICY\n        }\n        button(\"SYNC\").actionEvents()\n                .flatMap {\n                    ctrl.selectedRight.toObservable()\n                            .take(1)\n                            .flatMap { it.toObservable() }\n                }.subscribe {\n                    table.selectionModel.select(it)\n                }\n    }\n}\n\nclass AnotherPersonList : View() {\n    val ctrl: PersonController by inject()\n\n    override val root = vbox {\n        val table = tableview(ctrl.newPersons) {\n            column(\"First Name\", Person::firstNameProperty)\n            column(\"Last Name\", Person::lastNameProperty)\n\n            //broadcast selections\n            selectionModel.selectedIndices.onChangedObservable()\n                    .addTo(ctrl.selectedRight)\n\n\n            columnResizePolicy = SmartResize.POLICY\n        }\n\n        button(\"SYNC\").actionEvents()\n                .flatMap {\n                    ctrl.selectedLeft.toObservable()\n                            .take(1)\n                            .flatMap { it.toObservable() }\n                }.subscribe {\n                    table.selectionModel.select(it)\n                }\n    }\n}\n\nclass Person(firstName: String = \"\", lastName: String = \"\") {\n    val firstNameProperty = SimpleStringProperty(firstName)\n    var firstName by firstNameProperty\n    val lastNameProperty = SimpleStringProperty(lastName)\n    var lastName by lastNameProperty\n}\n\nclass PersonController : Controller(){\n    val selectedLeft = CompositeObservable&lt;ObservableList&lt;Int&gt;&gt; { it.replay(1).autoConnect().apply { subscribe() } }\n    val selectedRight = CompositeObservable&lt;ObservableList&lt;Int&gt;&gt;  { it.replay(1).autoConnect().apply { subscribe() } }\n\n\n    val persons = FXCollections.observableArrayList&lt;Person&gt;()\n    val newPersons = FXCollections.observableArrayList&lt;Person&gt;()\n\n    init {\n\n        persons += Person(\"Dead\", \"Stark\")\n        persons += Person(\"Tyrion\", \"Lannister\")\n        persons += Person(\"Arya\", \"Stark\")\n        persons += Person(\"Daenerys\", \"Targaryen\")\n\n        newPersons += Person(\"Ned\", \"Stark\")\n        newPersons += Person(\"Tyrion\", \"Janitor\")\n        newPersons += Person(\"Arya\", \"Stark\")\n        newPersons += Person(\"Taenerys\", \"Dargaryen\")\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1104, "favorite_count": 0, "accepted_answer_id": 41300901, "answer_count": 2, "score": 3, "last_activity_date": 1482505973, "creation_date": 1482489344, "question_id": 41299769, "link": "https://stackoverflow.com/questions/41299769/tornadofx-tableview-sync-two-tables", "title": "Tornadofx tableview sync two tables", "body": "<p>Basic newbie question:</p>\n\n<p>I want to sync/bind two tables.<br>\nFor keeping the example simple, I have used two separate table views. This needs to be done using fragments and scope, which I thought would complicate the question as I am stuck at a basic problem.<br>\nBehaviour: On clicking the sync button of table 1 , I want <strong>table 1 selected data to override the corresponding table 2 data</strong>. and vice-versa</p>\n\n<p>Person Model:</p>\n\n<pre><code>class Person(firstName: String = \"\", lastName: String = \"\") {\n    val firstNameProperty = SimpleStringProperty(firstName)\n    var firstName by firstNameProperty\n    val lastNameProperty = SimpleStringProperty(lastName)\n    var lastName by lastNameProperty\n}\n\nclass PersonModel : ItemViewModel&lt;Person&gt;() {\n    val firstName = bind { item?.firstNameProperty }\n    val lastName = bind { item?.lastNameProperty }\n}\n</code></pre>\n\n<p>Person Controller (dummy data):</p>\n\n<pre><code>class PersonController : Controller(){\n    val persons = FXCollections.observableArrayList&lt;Person&gt;()\n    val newPersons = FXCollections.observableArrayList&lt;Person&gt;()\n    init {\n        persons += Person(\"Dead\", \"Stark\")\n        persons += Person(\"Tyrion\", \"Lannister\")\n        persons += Person(\"Arya\", \"Stark\")\n        persons += Person(\"Daenerys\", \"Targaryen\")\n\n        newPersons += Person(\"Ned\", \"Stark\")\n        newPersons += Person(\"Tyrion\", \"Janitor\")\n        newPersons += Person(\"Arya\", \"Stark\")\n        newPersons += Person(\"Taenerys\", \"Dargaryen\")\n    }\n}\n</code></pre>\n\n<p>Person List View:</p>\n\n<pre><code>class PersonList : View() {\n    val ctrl: PersonController by inject()\n    val model : PersonModel by inject()\n    var personTable : TableView&lt;Person&gt; by singleAssign()\n    override val root = VBox()\n    init {\n        with(root) {\n            tableview(ctrl.persons) {\n                personTable = this\n                column(\"First Name\", Person::firstNameProperty)\n                column(\"Last Name\", Person::lastNameProperty)\n                columnResizePolicy = SmartResize.POLICY\n            }\n            hbox {\n                button(\"Sync\") {\n                    setOnAction {\n                        personTable.bindSelected(model)\n                        //model.itemProperty.bind(personTable.selectionModel.selectedItemProperty())\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p>Another Person List View:</p>\n\n<pre><code>class AnotherPersonList : View() {\n    val model : PersonModel by inject()\n    val ctrl: PersonController by inject()\n    override val root = VBox()\n    var newPersonTable : TableView&lt;Person&gt; by singleAssign()\n    init {\n        with(root) {\n            tableview(ctrl.newPersons) {\n                newPersonTable = this\n                column(\"First Name\", Person::firstNameProperty)\n                column(\"Last Name\", Person::lastNameProperty)\n                columnResizePolicy = SmartResize.POLICY\n            }\n            hbox {\n                button(\"Sync\") {\n                    setOnAction {\n                        newPersonTable.bindSelected(model)\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/lrbkO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lrbkO.png\" alt=\"Sync Two Tables\"></a></p>\n"}, {"tags": ["java", "spring", "spring-mvc", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1482487252, "post_id": 41298289, "comment_id": 69800689, "body": "Have you tried changing val to var?"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1482487355, "post_id": 41298289, "comment_id": 69800744, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/37431817/null-pointer-exception-in-spring-proxy-class-and-kotlin\">Null Pointer Exception In Spring Proxy Class and Kotlin</a>"}, {"owner": {"reputation": 2585, "user_id": 3778451, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b89cb48ce2aa2ad9720be79b9583c05c?s=128&d=identicon&r=PG&f=1", "display_name": "Deutro", "link": "https://stackoverflow.com/users/3778451/deutro"}, "edited": false, "score": 0, "creation_date": 1482491704, "post_id": 41298289, "comment_id": 69802984, "body": "Yes I already tried both."}, {"owner": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "edited": false, "score": 0, "creation_date": 1482495135, "post_id": 41298289, "comment_id": 69804838, "body": "Try adding  @Autowired  before val and remove construtor. This works for me"}, {"owner": {"reputation": 16438, "user_id": 241986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/lFsRO.gif?s=128&g=1", "display_name": "Boris Treukhov", "link": "https://stackoverflow.com/users/241986/boris-treukhov"}, "edited": false, "score": 0, "creation_date": 1512427019, "post_id": 41298289, "comment_id": 82244908, "body": "Maybe you are using <code>GenericApplicationContext</code> instead of <code>AnnotationConfigApplicationContext</code>"}], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 1246717, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd2cd8bd48deeebdcd39746264c607f4?s=128&d=identicon&r=PG", "display_name": "jasperagrante", "link": "https://stackoverflow.com/users/1246717/jasperagrante"}, "edited": false, "score": 0, "creation_date": 1500149886, "post_id": 42034424, "comment_id": 77215602, "body": "Hi, is there a way to do this without getting a <code>No default constructor found</code> and also by not making the properties null-able? <b><i>(FYI Some of my parameters are repositories)</i></b>"}, {"owner": {"reputation": 314, "user_id": 1246717, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd2cd8bd48deeebdcd39746264c607f4?s=128&d=identicon&r=PG", "display_name": "jasperagrante", "link": "https://stackoverflow.com/users/1246717/jasperagrante"}, "edited": false, "score": 0, "creation_date": 1500189629, "post_id": 42034424, "comment_id": 77222271, "body": "I already solved my problem. For those who are getting the <code>No default constructor</code> or the @Autowired is already found. Make sure that your constructor doesn&#39;t have default values."}], "tags": [], "owner": {"reputation": 220, "user_id": 4177643, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SwN1B2Jq_G4/AAAAAAAAAAI/AAAAAAAAAHM/JrEWI05AL8s/photo.jpg?sz=128", "display_name": "David", "link": "https://stackoverflow.com/users/4177643/david"}, "is_accepted": false, "score": 4, "last_activity_date": 1497793076, "last_edit_date": 1497793076, "creation_date": 1486163189, "answer_id": 42034424, "question_id": 41298289, "link": "https://stackoverflow.com/questions/41298289/spring-boot-autowired-with-kotlin-in-service-is-always-null/42034424#42034424", "title": "Spring Boot @Autowired with Kotlin in @Service is always null", "body": "<p>Which Spring Boot version do you use? Since 1.4 Spring Boot is based on Spring Framework 4.3 and since then you should be able to use constructor injection without any <code>@Autowired</code> annotation at all. Have you tried that?</p>\n\n<p>It would look like this and works for me:</p>\n\n<pre><code>@Service\nclass UserServiceController(val dsl: DSLContext, val teamService: TeamService) {\n\n  // your class members\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5914, "user_id": 184998, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Ipbrc.jpg?s=128&g=1", "display_name": "Adrian Cox", "link": "https://stackoverflow.com/users/184998/adrian-cox"}, "edited": false, "score": 1, "creation_date": 1514994860, "post_id": 48080670, "comment_id": 83135675, "body": "Kotlin has a build plugin to open these classes: <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/compiler-plugins.html</a>"}, {"owner": {"reputation": 1246, "user_id": 1385652, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/36c394d66e9444796f59d490c7608e1a?s=128&d=identicon&r=PG", "display_name": "Hossein Nasr", "link": "https://stackoverflow.com/users/1385652/hossein-nasr"}, "edited": false, "score": 0, "creation_date": 1523370230, "post_id": 48080670, "comment_id": 86527154, "body": "Awsome!! it also fix bean injection issue!"}, {"owner": {"reputation": 461, "user_id": 4373456, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zQzJMjAhZQc/AAAAAAAAAAI/AAAAAAAAAUU/IIFDVtQSUwQ/photo.jpg?sz=128", "display_name": "Aekkawit Chanpen", "link": "https://stackoverflow.com/users/4373456/aekkawit-chanpen"}, "edited": false, "score": 0, "creation_date": 1570858131, "post_id": 48080670, "comment_id": 103056582, "body": "Add &quot;open&quot; before &quot;fun&quot; is really help. Thanks mate."}], "tags": [], "owner": {"reputation": 1229, "user_id": 4667294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hodhs.jpg?s=128&g=1", "display_name": "miran", "link": "https://stackoverflow.com/users/4667294/miran"}, "is_accepted": false, "score": 20, "last_activity_date": 1514994478, "creation_date": 1514994478, "answer_id": 48080670, "question_id": 41298289, "link": "https://stackoverflow.com/questions/41298289/spring-boot-autowired-with-kotlin-in-service-is-always-null/48080670#48080670", "title": "Spring Boot @Autowired with Kotlin in @Service is always null", "body": "<p>I just bumped into exactly same issue - injection worked well, but after adding @Transactional annotation all the autowired fields are null.</p>\n\n<p>My code:</p>\n\n<pre><code>@Service\n@Transactional  \nopen class MyDAO(val jdbcTemplate: JdbcTemplate) {\n\n   fun update(sql: String): Int {\n       return jdbcTemplate.update(sql)\n   }\n\n} \n</code></pre>\n\n<p>The problem here is that the methods are final by default in Kotlin, so Spring is unable to create proxy for the class:</p>\n\n<pre><code> o.s.aop.framework.CglibAopProxy: Unable to proxy method [public final int org.mycompany.MyDAO.update(...\n</code></pre>\n\n<p>\"Opening\" the method fixes the issue:</p>\n\n<p>Fixed code:</p>\n\n<pre><code>@Service\n@Transactional  \nopen class MyDAO(val jdbcTemplate: JdbcTemplate) {\n\n   open fun update(sql: String): Int {\n       return jdbcTemplate.update(sql)\n   }\n\n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1892, "user_id": 3061233, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/7tEB7.jpg?s=128&g=1", "display_name": "kris", "link": "https://stackoverflow.com/users/3061233/kris"}, "edited": false, "score": 0, "creation_date": 1612254743, "post_id": 61661207, "comment_id": 116702363, "body": "I dont understand.. Tried the exact same approach - but as soon as i add OPEN class - it fks up the dep. injection. val repository: Foo is NULL. And when i remove Open it doesnt let me apply transactional. SO Freaking angry"}], "tags": [], "owner": {"reputation": 71, "user_id": 2934857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/euEcP.png?s=128&g=1", "display_name": "Jhoan Manuel Mu&#241;oz Serrano", "link": "https://stackoverflow.com/users/2934857/jhoan-manuel-mu%c3%b1oz-serrano"}, "is_accepted": false, "score": 2, "last_activity_date": 1588864136, "creation_date": 1588864136, "answer_id": 61661207, "question_id": 41298289, "link": "https://stackoverflow.com/questions/41298289/spring-boot-autowired-with-kotlin-in-service-is-always-null/61661207#61661207", "title": "Spring Boot @Autowired with Kotlin in @Service is always null", "body": "<p>I faced the same problem working with Kotlin but the null instance was a JpaRepository. When I added the <code>@Transactional</code> annotation to a method inside a service, I got a message saying <code>Methods annotated with '@Transactional' must be overridable</code> so I went ahead and marked both, the class and the method as <code>open</code>. Easy, right?! Well, not quite.</p>\n\n<p>Although this compiles, I got the required repository as null at execution time. I was able to solve the problem in two ways:</p>\n\n<ol>\n<li>Mark the class and <strong>ALL of its methods</strong> as <code>open</code>:</li>\n</ol>\n\n<pre><code>open class FooService(private val barRepository: BarRepository) {\n    open fun aMethod(): Bar {\n        ...\n    }\n\n    @Transactional\n    open fun aTransactionalMethod(): Bar {\n        ...\n    }\n}\n</code></pre>\n\n<p>This works but having all the methods in a class marked with <code>open</code> might look a bit odd, so I tried something else.</p>\n\n<ol start=\"2\">\n<li>Declare an interface:</li>\n</ol>\n\n<pre><code>interface IFooService {\n    fun aMethod(): Bar\n\n    fun aTransactionalMethod(): Bar\n}\n\nopen class FooService(private val barRepository: BarRepository) : IFooService {\n    override fun aMethod(): Bar {\n        ...\n    }\n\n    @Transactional\n    override fun aTransactionalMethod(): Bar {\n        ...\n    }\n}\n</code></pre>\n\n<p>This way you can still use the annotation since all the methods will be overridable and you won't need to use <code>open</code> everywhere.</p>\n\n<p>Hope this helps =)</p>\n"}], "owner": {"reputation": 2585, "user_id": 3778451, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b89cb48ce2aa2ad9720be79b9583c05c?s=128&d=identicon&r=PG&f=1", "display_name": "Deutro", "link": "https://stackoverflow.com/users/3778451/deutro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8910, "favorite_count": 2, "answer_count": 3, "score": 19, "last_activity_date": 1588864136, "creation_date": 1482483815, "last_edit_date": 1497793054, "question_id": 41298289, "link": "https://stackoverflow.com/questions/41298289/spring-boot-autowired-with-kotlin-in-service-is-always-null", "title": "Spring Boot @Autowired with Kotlin in @Service is always null", "body": "<p>Currently I try to rewrite my Java Spring Boot Application with Kotlin. I encountered a problem that in all of my classes which are annotated with <code>@Service</code> the dependency injection is not working correctly (all instances are <code>null</code>). Here is an example:</p>\n\n<pre><code>@Service\n@Transactional\nopen class UserServiceController @Autowired constructor(val dsl: DSLContext, val teamService: TeamService) {\n  //dsl and teamService are null in all methods\n}\n</code></pre>\n\n<p>Doing the same in Java works without any problems:</p>\n\n<pre><code>@Service\n@Transactional\npublic class UserServiceController\n{\n    private DSLContext dsl;\n    private TeamService teamService;\n\n    @Autowired\n    public UserServiceController(DSLContext dsl,\n                             TeamService teamService)\n    {\n        this.dsl = dsl;\n        this.teamService = teamService;\n    }\n</code></pre>\n\n<p>If I annotate the component with <code>@Component</code> in Kotlin everything works fine:</p>\n\n<pre><code>@Component\nopen class UserServiceController @Autowired constructor(val dsl: DSLContext, val teamService: TeamService) {\n  //dsl and teamService are injected properly\n}\n</code></pre>\n\n<p>Google provided many different approaches for Kotlin and <code>@Autowired</code> which I tried but all resulted in the same <code>NullPointerException</code>\nI would like to know what the difference between Kotlin and Java is and how I can fix this?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3648, "user_id": 3951400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sQDAM.png?s=128&g=1", "display_name": "E. Sundin", "link": "https://stackoverflow.com/users/3951400/e-sundin"}, "edited": false, "score": 1, "creation_date": 1482449551, "post_id": 41293044, "comment_id": 69789074, "body": "Thanks for the answer and the info about Java vs Kotlin assignment expressions."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 15, "last_activity_date": 1482837899, "last_edit_date": 1495535435, "creation_date": 1482448664, "answer_id": 41293044, "question_id": 41292895, "link": "https://stackoverflow.com/questions/41292895/how-to-use-setter-like-obj-value-when-the-setter-has-return-value/41293044#41293044", "title": "How to use setter like obj.value = &quot;&quot; when the setter has return value?", "body": "<p>In Kotlin, assignments are not expressions. Assignment expressions have few real use cases and tend to worsen the code readability, not to mention the <code>if (a = b)</code> bugs, so they were left out of the language. You can find more comments from the Kotlin Team in <a href=\"https://discuss.kotlinlang.org/t/assignment-not-allow-in-while-expression/339\" rel=\"nofollow noreferrer\">this discussion</a>.</p>\n\n<p>It is actually impossible to get the value returned from a Java setter using the <code>property = value</code> syntax, and the workaround you described is the valid way to get that value.</p>\n\n<hr>\n\n<p>Kotlin property setters, in turn, cannot return a value, and, for example, a common Java idiom of returning <code>this</code> value for the calls chaining is expressed with Kotlin <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-literals-with-receiver\" rel=\"nofollow noreferrer\">functions with receiver</a>: </p>\n\n<pre><code>MyClass c = new MyClass()\n        .setFoo(x)\n        .setBar(y)\n        .setBaz(z);\n</code></pre>\n\n<p>Kotlin (using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\" rel=\"nofollow noreferrer\"><code>apply</code></a>):</p>\n\n<pre><code>val c = MyClass().apply {\n    foo = x\n    bar = y\n    baz = z\n}\n</code></pre>\n\n<hr>\n\n<p>See also: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/36879236/how-to-convert-java-assignment-expression-to-kotlin\">How to convert Java assignment expression to Kotlin</a></li>\n</ul>\n"}], "owner": {"reputation": 3648, "user_id": 3951400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sQDAM.png?s=128&g=1", "display_name": "E. Sundin", "link": "https://stackoverflow.com/users/3951400/e-sundin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 41293044, "answer_count": 1, "score": 6, "last_activity_date": 1482837899, "creation_date": 1482447859, "question_id": 41292895, "link": "https://stackoverflow.com/questions/41292895/how-to-use-setter-like-obj-value-when-the-setter-has-return-value", "title": "How to use setter like obj.value = &quot;&quot; when the setter has return value?", "body": "<p>I have an android EditText which I'm setting the text property on.</p>\n\n<p>Normally I'd use:</p>\n\n<pre><code>editText.text = \"Mars\"\n</code></pre>\n\n<p>But the setter returns a Editable so it seems Kotlin is trying to replace the returned Editable with a String which fails.</p>\n\n<p>So the <em>\"workaround\"</em> is:</p>\n\n<pre><code>editText.setText(\"Mars\")\n</code></pre>\n\n<p>Are there any prettier ways (instead of <code>setText()</code>) of setting the text when this type of setter is used?</p>\n"}, {"tags": ["java", "spring", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1065, "user_id": 2650694, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100004775443761/picture?type=large", "display_name": "Vincas Stonys", "link": "https://stackoverflow.com/users/2650694/vincas-stonys"}, "is_accepted": true, "score": 1, "last_activity_date": 1482435681, "creation_date": 1482435681, "answer_id": 41290574, "question_id": 41289827, "link": "https://stackoverflow.com/questions/41289827/spring-autowire-not-working-in-kotlin/41290574#41290574", "title": "Spring @Autowire not working in Kotlin", "body": "<p><code>&lt;context:component-scan base-package=\"app\"/&gt;</code></p>\n\n<p>was missing from bean declarations</p>\n"}], "owner": {"reputation": 1065, "user_id": 2650694, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100004775443761/picture?type=large", "display_name": "Vincas Stonys", "link": "https://stackoverflow.com/users/2650694/vincas-stonys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 0, "accepted_answer_id": 41290574, "answer_count": 1, "score": 1, "last_activity_date": 1482435681, "creation_date": 1482432317, "question_id": 41289827, "link": "https://stackoverflow.com/questions/41289827/spring-autowire-not-working-in-kotlin", "title": "Spring @Autowire not working in Kotlin", "body": "<p>For my university task I need to use various methods of injecting dependencies, I'm stuck on autowire using annotation, because it says that the dependency has not been initialized. My code:</p>\n\n<pre><code>class TeleporterDeliveryMethod: DeliveryMethod {\n    @Autowired\n    lateinit var teleporter: Teleporter\n\n    override fun deliver(pkg: Package): Int {\n        teleporter.teleport(pkg)\n        return 0\n    }\n}\n</code></pre>\n\n<p>Teleporter class:</p>\n\n<pre><code>class Teleporter3000 : Teleporter {\n    override fun teleport(pkg: Package) {\n        println(\"Teleporting package ${pkg.id}...\")\n    }\n}\n</code></pre>\n\n<p>I also have this defined in xml:</p>\n\n<pre><code>&lt;bean id=\"teleporterDeliveryMethod\" class=\"app.delivery.TeleporterDeliveryMethod\"/&gt;\n&lt;bean id=\"teleporter\" class=\"app.delivery.Teleporter3000\" scope=\"prototype\"/&gt;\n</code></pre>\n\n<p>Teleporter is an interface with one method <code>teleport(...)</code></p>\n\n<p>When this code is run, the compiles says: <code>Exception in thread \"main\" kotlin.UninitializedPropertyAccessException: lateinit property teleporter has not been initialized</code></p>\n\n<p>If I inject dependencies in xml manually, it works as expected:\n\n\n<pre><code>class=\"app.delivery.TeleporterDeliveryMethod\"&gt;\n    &lt;property name=\"teleporter\" ref=\"teleporter\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Even autowiring works in xml:</p>\n\n<pre><code>&lt;bean id=\"teleporterDeliveryMethod\" class=\"app.delivery.TeleporterDeliveryMethod\" autowire=\"byType\"/&gt;\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 16905, "user_id": 1266326, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dcbc6c3587f5c62e877500ac4061b8b1?s=128&d=identicon&r=PG&f=1", "display_name": "MLProgrammer-CiM", "link": "https://stackoverflow.com/users/1266326/mlprogrammer-cim"}, "edited": false, "score": 0, "creation_date": 1482430966, "post_id": 41289501, "comment_id": 69781337, "body": "Your input string is not a number"}, {"owner": {"reputation": 691, "user_id": 7139528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ac1707910f28b04551ed7ba6f1b645bc?s=128&d=identicon&r=PG&f=1", "display_name": "siur", "link": "https://stackoverflow.com/users/7139528/siur"}, "reply_to_user": {"reputation": 16905, "user_id": 1266326, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dcbc6c3587f5c62e877500ac4061b8b1?s=128&d=identicon&r=PG&f=1", "display_name": "MLProgrammer-CiM", "link": "https://stackoverflow.com/users/1266326/mlprogrammer-cim"}, "edited": false, "score": 0, "creation_date": 1482433459, "post_id": 41289501, "comment_id": 69782535, "body": "@MLProgrammer-CiM Ok. So that means that my input is read as a String and in this case I cannot add Strings? If so, how do I correct this ?"}, {"owner": {"reputation": 16905, "user_id": 1266326, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dcbc6c3587f5c62e877500ac4061b8b1?s=128&d=identicon&r=PG&f=1", "display_name": "MLProgrammer-CiM", "link": "https://stackoverflow.com/users/1266326/mlprogrammer-cim"}, "edited": false, "score": 0, "creation_date": 1482444121, "post_id": 41289501, "comment_id": 69787342, "body": "readLine()!!.split(&#39; &#39;) gives one additional value that&#39;s empty string, which cannot be parsed into a number and throws an exception."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1482481108, "post_id": 41289501, "comment_id": 69797675, "body": "using <code>split</code> to read consecutive was a bad idea"}], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 2, "last_activity_date": 1482594372, "last_edit_date": 1482594372, "creation_date": 1482435147, "answer_id": 41290457, "question_id": 41289501, "link": "https://stackoverflow.com/questions/41289501/why-can-i-not-add-two-numbers-in-kotlin-using-this-source-code/41290457#41290457", "title": "Why can I not add two numbers in Kotlin using this source code?", "body": "<p>From the thrown exception stack trace it does not look like you are inputting anything so <code>readLine()</code> returns the empty string which cannot be parsed as an int value.</p>\n\n<p>I recommend reading each int value separately while you troubleshoot:</p>\n\n<pre><code>fun readInt(message: Any?): Int {\n    print(message)\n    return readLine()!!.toInt()\n}\nval a = readInt(\"a = \")\nval u = readInt(\"u = \")\nprintln(\"a + u = ${a + u}\")\n</code></pre>\n\n<p>Or if you want to get fancy:</p>\n\n<pre><code>fun readInt(message: Any?): Int {\n    val promptSequence = generateSequence(\n            seedFunction = {\n                print(message)\n                readLine()\n            },\n            nextFunction = { invalidInput -&gt;\n                println(\"Input '$invalidInput' is not an int value. Try again.\")\n                print(message)\n                readLine()\n            }\n    )\n\n    return promptSequence.map(::Scanner).first(Scanner::hasNextInt).nextInt()\n}\n\nval a = readInt(\"a = \")\nval u = readInt(\"u = \")\nprintln(\"a + u = ${a + u}\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1501, "user_id": 4085968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19380a8f82f14c55448f252bf9746e3c?s=128&d=identicon&r=PG", "display_name": "Yogendra Mishra", "link": "https://stackoverflow.com/users/4085968/yogendra-mishra"}, "is_accepted": false, "score": 0, "last_activity_date": 1495828474, "last_edit_date": 1495828474, "creation_date": 1495826894, "answer_id": 44208910, "question_id": 41289501, "link": "https://stackoverflow.com/questions/41289501/why-can-i-not-add-two-numbers-in-kotlin-using-this-source-code/44208910#44208910", "title": "Why can I not add two numbers in Kotlin using this source code?", "body": "<pre><code>import java.util.Scanner\n\nfun main(vararg args: String) {  \n    val input = Scanner(System.`in`)  \n    val a = input.nextInt()  \n    val b = input.nextInt()  \n    println(a + b)\n}\n</code></pre>\n"}], "owner": {"reputation": 691, "user_id": 7139528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ac1707910f28b04551ed7ba6f1b645bc?s=128&d=identicon&r=PG&f=1", "display_name": "siur", "link": "https://stackoverflow.com/users/7139528/siur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2048, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1495828474, "creation_date": 1482430861, "last_edit_date": 1482431001, "question_id": 41289501, "link": "https://stackoverflow.com/questions/41289501/why-can-i-not-add-two-numbers-in-kotlin-using-this-source-code", "title": "Why can I not add two numbers in Kotlin using this source code?", "body": "<p>This is the code I have created to add two numbers: </p>\n\n<pre><code>import java.util.*\n\nfun main(args: Array&lt;String&gt;) {\n    val (a, u) = readLine()!!.split(' ').map(String::toInt)\n\n    println(add(a, u))\n}\n\nfun  add(a: Int, u: Int) = a + u\n</code></pre>\n\n<p>However I keep getting this error : </p>\n\n<pre><code>Exception in thread \"main\" java.lang.NumberFormatException: For input string: \"\"\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n    at java.lang.Integer.parseInt(Integer.java:592)\n    at java.lang.Integer.parseInt(Integer.java:615)\n    at Kotlin_learnKt.main(kotlin^learn.kt:6)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>I am not sure what I am doing wrong. I just want to be able to prompt the user to enter two numbers, have the code add them, then return the result. </p>\n"}, {"tags": ["input", "console", "stdin", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 691, "user_id": 7139528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ac1707910f28b04551ed7ba6f1b645bc?s=128&d=identicon&r=PG&f=1", "display_name": "siur", "link": "https://stackoverflow.com/users/7139528/siur"}, "edited": false, "score": 0, "creation_date": 1482411427, "post_id": 41283570, "comment_id": 69768931, "body": "Thank You. May I have the link to these ?"}, {"owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "reply_to_user": {"reputation": 691, "user_id": 7139528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ac1707910f28b04551ed7ba6f1b645bc?s=128&d=identicon&r=PG&f=1", "display_name": "siur", "link": "https://stackoverflow.com/users/7139528/siur"}, "edited": false, "score": 0, "creation_date": 1482412007, "post_id": 41283570, "comment_id": 69769307, "body": "@siur, <a href=\"https://discuss.kotlinlang.org/t/taking-inputs/152/2\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/taking-inputs/152/2</a>,  <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/read-line.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/read-line.htm&zwnj;&#8203;l</a>,  <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/io/Console.kt\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "reply_to_user": {"reputation": 691, "user_id": 7139528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ac1707910f28b04551ed7ba6f1b645bc?s=128&d=identicon&r=PG&f=1", "display_name": "siur", "link": "https://stackoverflow.com/users/7139528/siur"}, "edited": false, "score": 0, "creation_date": 1482412310, "post_id": 41283570, "comment_id": 69769519, "body": "Here is more real examples: <a href=\"http://codeforces.com/blog/entry/45454?#comment-300490\" rel=\"nofollow noreferrer\">codeforces.com/blog/entry/45454?#comment-300490</a>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1482412491, "post_id": 41283570, "comment_id": 69769630, "body": "The <code>Scanner</code> is the best one"}, {"owner": {"reputation": 3615, "user_id": 1366415, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/18hVz.gif?s=128&g=1", "display_name": "Simple Fellow", "link": "https://stackoverflow.com/users/1366415/simple-fellow"}, "edited": false, "score": 0, "creation_date": 1510843217, "post_id": 41283570, "comment_id": 81615752, "body": "Why have you used such complex examples? simple questions need simple answers.The question was to read from console only. what he mentioned as objective was supposed to be &quot;his objective&quot; not yours!"}, {"owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "reply_to_user": {"reputation": 3615, "user_id": 1366415, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/18hVz.gif?s=128&g=1", "display_name": "Simple Fellow", "link": "https://stackoverflow.com/users/1366415/simple-fellow"}, "edited": false, "score": 2, "creation_date": 1510847508, "post_id": 41283570, "comment_id": 81619031, "body": "@SimpleFellow, I&#39;ve used this slightly weak question to share several simple approaches with bonus extra knowledge benefittable for wider audience than just a single asker. I think it is what SO is all about. I&#39;ve seen here many popular very detailed answers so far, but the compaint for the quality with a downvote is a kind of novelty. ) Feel free to provide a simplier answer, or a better one, or both. )"}, {"owner": {"reputation": 5198, "user_id": 11377112, "user_type": "registered", "profile_image": "https://graph.facebook.com/158814934598574/picture?type=large", "display_name": "Animesh Sahu", "link": "https://stackoverflow.com/users/11377112/animesh-sahu"}, "edited": false, "score": 1, "creation_date": 1593668608, "post_id": 41283570, "comment_id": 110861769, "body": "If somebody want to use Kotlin for CP, the <code>System.`in`.bufferedReader().readLine()!!</code> is the fastest one. I had multiple test cases failed because of std-lib&#39;s <code>readLine()!!</code> is slow."}], "tags": [], "owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "is_accepted": false, "score": 109, "last_activity_date": 1592322184, "last_edit_date": 1592322184, "creation_date": 1482410991, "answer_id": 41283570, "question_id": 41283393, "link": "https://stackoverflow.com/questions/41283393/reading-console-input-in-kotlin/41283570#41283570", "title": "Reading console input in Kotlin", "body": "<p>Here are A+B examples in Kotlin reading from stdin:</p>\n\n<pre><code>fun main() {\n  val (a, b) = readLine()!!.split(' ')\n  println(a.toInt() + b.toInt())\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>fun main(vararg args: String) {\n  val (a, b) = readLine()!!.split(' ').map(String::toInt)\n  println(a + b)\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>fun readInts() = readLine()!!.split(' ').map { it.toInt() }\n\nfun main(vararg args: String) {\n  val (a, b) = readInts()\n  println(a + b)\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>import java.util.Scanner\n\nfun main() {\n  val input = Scanner(System.`in`)\n  val a = input.nextInt()\n  val b = input.nextInt()\n  println(a + b)\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>with(Scanner(System.`in`)) {\n    val a = nextInt()\n    val b = nextInt()\n    println(a + b)\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Competitive programming</strong></p>\n\n<p>Must-read intro: <a href=\"https://kotlinlang.org/docs/tutorials/competitive-programming.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/tutorials/competitive-programming.html</a> </p>\n\n<p>Must-watch Kotlin productivity videos: <a href=\"https://www.jetbrains.com/icpc/\" rel=\"noreferrer\">https://www.jetbrains.com/icpc/</a></p>\n\n<p>Here is an (inspired by the article) extended bunch of helper functions for reading all possible types, lists, arrays, 2d-arrays, etc:</p>\n\n<pre><code>private fun readln() = readLine()!!\nprivate fun readlnByte() = readln().toByte()\nprivate fun readlnShort() = readln().toShort()\nprivate fun readlnInt() = readln().toInt()\nprivate fun readlnLong() = readln().toLong()\nprivate fun readlnFloat() = readln().toFloat()\nprivate fun readlnDouble() = readln().toDouble()\nprivate fun readlnBigInt(radix: Int = 10) = readln().toBigInteger(radix)\nprivate fun readlnBigDecimal() = readln().toBigDecimal()\n\nprivate fun lineSequence(limit: Int = Int.MAX_VALUE) = generateSequence { readLine() }.constrainOnce().take(limit)\nprivate fun readlnStrings() = readln().split(' ')\nprivate fun readlnBytes() = readlnStrings().map { it.toByte() }\nprivate fun readlnShorts() = readlnStrings().map { it.toShort() }\nprivate fun readlnInts() = readlnStrings().map { it.toInt() }\nprivate fun readlnLongs() = readlnStrings().map { it.toLong() }\nprivate fun readlnFloats() = readlnStrings().map { it.toFloat() }\nprivate fun readlnDoubles() = readlnStrings().map { it.toDouble() }\n\nprivate fun readByteArray() = readlnStrings().run { ByteArray(size) { get(it).toByte() } }\nprivate fun readShortArray() = readlnStrings().run { ShortArray(size) { get(it).toShort() } }\nprivate fun readIntArray() = readlnStrings().run { IntArray(size) { get(it).toInt() } }\nprivate fun readLongArray() = readlnStrings().run { LongArray(size) { get(it).toLong() } }\nprivate fun readFloatArray() = readlnStrings().run { FloatArray(size) { get(it).toFloat() } }\nprivate fun readDoubleArray() = readlnStrings().run { DoubleArray(size) { get(it).toDouble() } }\n\nprivate fun readlnByteArray(n: Int) = ByteArray(n) { readlnByte() }\nprivate fun readlnShortArray(n: Int) = ShortArray(n) { readlnShort() }\nprivate fun readlnIntArray(n: Int) = IntArray(n) { readlnInt() }\nprivate fun readlnLongArray(n: Int) = LongArray(n) { readlnLong() }\nprivate fun readlnFloatArray(n: Int) = FloatArray(n) { readlnFloat() }\nprivate fun readlnDoubleArray(n: Int) = DoubleArray(n) { readlnDouble() }\n\nprivate fun readByteArray2d(rows: Int, cols: Int) = Array(rows) { readByteArray().also { require(it.size == cols) } }\nprivate fun readShortArray2d(rows: Int, cols: Int) = Array(rows) { readShortArray().also { require(it.size == cols) } }\nprivate fun readLongArray2d(rows: Int, cols: Int) = Array(rows) { readLongArray().also { require(it.size == cols) } }\nprivate fun readIntArray2d(rows: Int, cols: Int) = Array(rows) { readIntArray().also { require(it.size == cols) } }\nprivate fun readFloatArray2d(rows: Int, cols: Int) = Array(rows) { readFloatArray().also { require(it.size == cols) } }\nprivate fun readDoubleArray2d(rows: Int, cols: Int) = Array(rows) { readDoubleArray().also { require(it.size == cols) } }\n\nprivate fun isWhiteSpace(c: Char) = c in \" \\r\\n\\t\"\n\n// JVM-only targeting code follows next\n\n// readString() via sequence is still slightly faster than Scanner\nprivate fun readString() = generateSequence { System.`in`.read().toChar() }\n        .dropWhile { isWhiteSpace(it) }.takeWhile { !isWhiteSpace(it) }.joinToString(\"\")\nprivate fun readByte() = readString().toByte()\nprivate fun readShort() = readString().toShort()\nprivate fun readInt() = readString().toInt()\nprivate fun readLong() = readString().toLong()\nprivate fun readFloat() = readString().toFloat()\nprivate fun readDouble() = readString().toDouble()\nprivate fun readBigInt(radix: Int = 10) = readString().toBigInteger(radix)\nprivate fun readBigDecimal() = readString().toBigDecimal()\n\nprivate fun readBytes(n: Int) = generateSequence { readByte() }.take(n)\nprivate fun readShorts(n: Int) = generateSequence { readShort() }.take(n)\nprivate fun readInts(n: Int) = generateSequence { readInt() }.take(n)\nprivate fun readLongs(n: Int) = generateSequence { readLong() }.take(n)\nprivate fun readFloats(n: Int) = generateSequence { readFloat() }.take(n)\nprivate fun readDoubles(n: Int) = generateSequence { readDouble() }.take(n)\n</code></pre>\n\n<p>Beware that <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html\" rel=\"noreferrer\">Scanner</a> is <a href=\"https://stackoverflow.com/questions/21797573/why-is-scanner-slower-than-bufferedreader-when-reading-from-input/44531522#44531522\">somewhat slow</a>. This may be important in some cases like competitive programming where program's execution on large inputs could be made up to two times faster just by replacing <a href=\"http://codeforces.com/contest/816/submission/27887514\" rel=\"noreferrer\">Scanner</a> with plain <a href=\"http://codeforces.com/contest/816/submission/27887296\" rel=\"noreferrer\">readLine</a>. Even my suboptimal <code>readString()</code> implementation tokenizing via sequence is <a href=\"http://codeforces.com/contest/816/submission/54541150\" rel=\"noreferrer\">slightly faster</a>. It allows to read input tokens until any next whitespace unlike Kotlin's built-in <code>readLine()</code>.</p>\n\n<p>I <a href=\"https://www.reddit.com/r/Kotlin/comments/7hoytl/kotlin_team_ama_ask_us_anything/dqsphwr/\" rel=\"noreferrer\">hope</a> someday a concise, crossplatform, performant, universal for both console and files input parsing support would be introduced in Kotlin stdlib. Like <code>readInt</code>, <code>readLong</code>, etc global and <code>Reader</code> extension functions.\nThis would be very userful not only for competitive programming but also for learning Kotlin as first language. \nA concept of reading a number shouldn't require first explaining collections, lambdas and monads.</p>\n\n<hr>\n\n<p><strong>Bonus</strong></p>\n\n<p>Sometimes you start with console input/output but then need to switch to files.\nIt becomes too tedious to prepend every read or write call with file stream variable.</p>\n\n<p>Here is a peace of Kotlin magic that allows to just wrap unchanged console code with a couple of lines to force it read and write to files also ensuring they are closed properly:</p>\n\n<pre><code>fun &lt;T : Closeable, R&gt; T.useWith(block: T.() -&gt; R): R = use { with(it, block) }\n\nFile(\"a.in\").bufferedReader().useWith {\n    File(\"a.out\").printWriter().useWith {\n        val (a, b) = readLine()!!.split(' ').map(String::toInt)\n        println(a + b)\n    }\n}\n\nScanner(File(\"b.in\")).useWith {\n    PrintWriter(\"b.out\").useWith {\n        val a = nextInt()\n        val b = nextInt()\n        println(a + b)\n    }\n}\n</code></pre>\n\n<p>Wrapping lines can be quickly commented out when happens a need to switch back to console.</p>\n"}, {"tags": [], "owner": {"reputation": 253, "user_id": 5923085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMNwT.jpg?s=128&g=1", "display_name": "sohel yadav", "link": "https://stackoverflow.com/users/5923085/sohel-yadav"}, "is_accepted": false, "score": 7, "last_activity_date": 1577224088, "last_edit_date": 1577224088, "creation_date": 1501780528, "answer_id": 45490735, "question_id": 41283393, "link": "https://stackoverflow.com/questions/41283393/reading-console-input-in-kotlin/45490735#45490735", "title": "Reading console input in Kotlin", "body": "<p>Use readLine() to take input from user,\n  ATQ:</p>\n\n<pre><code>fun main(args:Array&lt;String&gt;){\n    print(\"Enter a number\")\n    var variableName:Int = readLine()!!.toInt()  // readLine() is used to accept the String value and \".toInt()\" will convert the string to  Int. \n    var result:Int= variableName*6\n    print(\"The output is:$result\") \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 7354723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46db0e34c2003d63da598e7a80b4e93f?s=128&d=identicon&r=PG&f=1", "display_name": "Bihy", "link": "https://stackoverflow.com/users/7354723/bihy"}, "is_accepted": false, "score": 2, "last_activity_date": 1509663386, "creation_date": 1509663386, "answer_id": 47085898, "question_id": 41283393, "link": "https://stackoverflow.com/questions/41283393/reading-console-input-in-kotlin/47085898#47085898", "title": "Reading console input in Kotlin", "body": "<pre><code>fun readInts(separator: Char = ' ') = \nreadLine()!!.split(separator).map(String::toInt)\nfun main(args: Array&lt;String&gt;) {\n    var A : List&lt;Int&gt; = readInts()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10456369, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dehh5FOlWHc/AAAAAAAAAAI/AAAAAAAAE3Y/B7R4HGeJ5l4/photo.jpg?sz=128", "display_name": "Brisin BKrishnan ", "link": "https://stackoverflow.com/users/10456369/brisin-bkrishnan"}, "is_accepted": false, "score": 2, "last_activity_date": 1538654133, "creation_date": 1538654133, "answer_id": 52646067, "question_id": 41283393, "link": "https://stackoverflow.com/questions/41283393/reading-console-input-in-kotlin/52646067#52646067", "title": "Reading console input in Kotlin", "body": "<p>By default readLine takes input as string\ntoInt can be used to convert it to integer </p>\n\n<pre><code>fun main(args:Array&lt;String&gt;){\n    var first: Int\n    var second: Int\n    println(\"Enter the first number\")\n    first = readLine()!!.toInt()\n    println(\"Enter the second number\")\n    second= readLine()!!.toInt()\n    println(\"The sum is ${first + second}\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1673, "user_id": 4825845, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y4L0vj6kHkU/AAAAAAAAAAI/AAAAAAAABP8/fT4bDUserqA/photo.jpg?sz=128", "display_name": "JuanMoreno", "link": "https://stackoverflow.com/users/4825845/juanmoreno"}, "is_accepted": false, "score": 3, "last_activity_date": 1577224062, "last_edit_date": 1577224062, "creation_date": 1555374259, "answer_id": 55698916, "question_id": 41283393, "link": "https://stackoverflow.com/questions/41283393/reading-console-input-in-kotlin/55698916#55698916", "title": "Reading console input in Kotlin", "body": "<p>There are multiple alternatives to handle Console I/O with Kotlin.</p>\n\n<p><strong>1. Using the Kotlin Standard Library</strong>: The Kotlin standard library provides us extensions to handling I/O based on the classes of the JDK.</p>\n\n<p>To print in the console we can use the <code>print</code> function. If we run the following snippet:</p>\n\n<pre><code>print(\"Hello from Kotlin\")\n</code></pre>\n\n<p>We\u2019ll see the following message displayed on our terminal:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Hello from Kotlin\n</code></pre>\n\n<p>Behind-the-scenes this function uses the Java <code>System.out.print</code> method. Also, the library offers us the <code>println</code> alternative function, witch adds the line separator at the end of the message.</p>\n\n<p>In order to read from the console, we can use <code>readLine</code> function:</p>\n\n<pre><code>val inputText = readLine()\n</code></pre>\n\n<p><strong>2. Using the Java Standard Library</strong>: Kotlin has great interoperability with Java. Thus, we can use the standard I/O classes from the JDK in our programs in case we need them.</p>\n\n<p><strong>2.1. Using the Scanner Class</strong>: Using the <code>Scanner</code> class is very straightforward; we only need to create an instance and use the <code>nextLine</code> method:</p>\n\n<pre><code>val scanner = Scanner(System.`in`)\n\nval readText = scanner.nextLine()\n</code></pre>\n\n<p>Note that we are escaping the in property with backticks because it\u2019s a keyword in Kotlin.</p>\n\n<p><strong>2.2. Using the BufferedReader Class</strong>: To use the <code>BufferedReader</code> class to read from the standard input stream, we first need to instantiate with <code>System.in</code>:</p>\n\n<pre><code>val reader = BufferedReader(InputStreamReader(System.`in`))\n</code></pre>\n\n<p>And then we can use its methods \u2014 for example, <code>readLine()</code>:</p>\n\n<pre><code>val readText = reader.readLine()\n</code></pre>\n\n<p><strong>2.3. Using the Console Class</strong>: Unlike the two previous classes, the <code>Console</code> class has additional methods for handling console I/O, like <code>readPassword</code> and <code>printf</code>.</p>\n\n<p>In order to use the <code>Console</code> class we need to get the instance from the <code>System</code> class:</p>\n\n<pre><code>val console = System.console()\n\nval readText = console.readLine()\n</code></pre>\n\n<p>Also, thanks to Kotlin\u2019s interoperability with Java, we can use additional Java libraries for handling I/O.</p>\n\n<p>In your case, after reading the input you can convert the <code>String</code> value to <code>Int</code> using the <code>toInt()</code> function.</p>\n"}], "owner": {"reputation": 691, "user_id": 7139528, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ac1707910f28b04551ed7ba6f1b645bc?s=128&d=identicon&r=PG&f=1", "display_name": "siur", "link": "https://stackoverflow.com/users/7139528/siur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57048, "favorite_count": 24, "answer_count": 5, "score": 53, "last_activity_date": 1592322184, "creation_date": 1482410361, "last_edit_date": 1497800192, "question_id": 41283393, "link": "https://stackoverflow.com/questions/41283393/reading-console-input-in-kotlin", "title": "Reading console input in Kotlin", "body": "<p>I am attempting to accept input from the console in Kotlin but it is difficult because I am not too sure about the syntax. </p>\n\n<p>I begin with the main </p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n\n}\n</code></pre>\n\n<p>WHAT should I enter after this? I am aware that the <code>println()</code> and <code>readline()</code> are involved but I do not know how to structure them. </p>\n\n<p>Objective: prompt user to enter a number, the number entered is multiplied by 6, program returns the result to the console display. </p>\n"}, {"tags": ["android", "unit-testing", "mockito", "kotlin"], "comments": [{"owner": {"reputation": 3678, "user_id": 3990222, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/xVAWT.jpg?s=128&g=1", "display_name": "Edson Menegatti", "link": "https://stackoverflow.com/users/3990222/edson-menegatti"}, "edited": false, "score": 1, "creation_date": 1482401449, "post_id": 41280457, "comment_id": 69762801, "body": "<a href=\"http://stackoverflow.com/questions/32827144/class-literal-syntax-for-parameterized-classes-in-kotlin\" title=\"class literal syntax for parameterized classes in kotlin\">stackoverflow.com/questions/32827144/&hellip;</a> has the answer to your question, I guess."}, {"owner": {"reputation": 610, "user_id": 4623824, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d00831d1fe891782e870c7c8cc3967ef?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Manuel Pineda Murcia", "link": "https://stackoverflow.com/users/4623824/victor-manuel-pineda-murcia"}, "reply_to_user": {"reputation": 3678, "user_id": 3990222, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/xVAWT.jpg?s=128&g=1", "display_name": "Edson Menegatti", "link": "https://stackoverflow.com/users/3990222/edson-menegatti"}, "edited": false, "score": 0, "creation_date": 1482413528, "post_id": 41280457, "comment_id": 69770322, "body": "Yes, a casting with  as (Action1&lt;T&gt;) maded it, thanks you!"}], "owner": {"reputation": 610, "user_id": 4623824, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d00831d1fe891782e870c7c8cc3967ef?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Manuel Pineda Murcia", "link": "https://stackoverflow.com/users/4623824/victor-manuel-pineda-murcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "closed_date": 1482413559, "answer_count": 0, "score": 2, "last_activity_date": 1482400969, "creation_date": 1482400969, "question_id": 41280457, "link": "https://stackoverflow.com/questions/41280457/generics-in-kotlin", "closed_reason": "Duplicate", "title": "Generics in Kotlin", "body": "<p>I have a problem translating this java method call to kotlin:</p>\n\n<pre><code>doCallRealMethod().when(useCase).execute(any(Action1.class));\n</code></pre>\n\n<p>Kotlin equivalent (created with the kotlin plugin automatically):                   </p>\n\n<pre><code>doCallRealMethod().`when`(useCase).execute(ArgumentMatchers.any(Action1&lt;*&gt;::class.java!!))\n</code></pre>\n\n<p>useCase variable is defined like: UseCase&lt;*></p>\n\n<p>The compile problem is on this part: Action1&lt;*>::class.java</p>\n\n<p>Compiler says: </p>\n\n<pre><code>\"Only classes are allowed on the left hand side of a class literal\"\n</code></pre>\n\n<p>So If I remove the &lt;*> part, then this not compile either:</p>\n\n<pre><code>doCallRealMethod().`when`(useCase).execute(ArgumentMatchers.any(Action1::class.java!!))\n</code></pre>\n\n<p>Compiler says then:</p>\n\n<pre><code>Out-projected type 'UseCase&lt;*&gt;!' prohibits the use of 'public open fun execute(onNextAction: Action1&lt;T!&gt;!): Unit defined in com.ubox.app.main.domain.UseCase'\n</code></pre>\n\n<p>If I change UseCase&lt;*> with UseCase&lt;T>, then the compiler complains again with the part Action1::class.java!!, and says:</p>\n\n<pre><code>Type inference failed. Expected type mismatch: inferred type is Action1&lt;*&gt;! but Action1&lt;T!&gt;! was expected\n</code></pre>\n\n<p>I'm completely stucked with this.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 2, "creation_date": 1482397745, "post_id": 41279312, "comment_id": 69760358, "body": "The use case is that you may want to use the backing field inside the custom getter. Not doing so makes the backing field useless. I think this should have given a compiler warning."}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1482398149, "post_id": 41279312, "comment_id": 69760620, "body": "@marstran yes I agree with the warning. It&#39;s an edge case, but one you can quickly run into, so I thought there might be more to it."}], "answers": [{"comments": [{"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1482485161, "post_id": 41286194, "comment_id": 69799567, "body": "Yes,I know that I should declare it <code>val</code>. I just thought it&#39;s a trap that especially beginners might easily run into, and therefore thought that there might be a good reason to allow it anyway."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 19, "last_activity_date": 1528510627, "last_edit_date": 1528510627, "creation_date": 1482419399, "answer_id": 41286194, "question_id": 41279312, "link": "https://stackoverflow.com/questions/41279312/kotlin-usefulness-of-computed-var-properties/41286194#41286194", "title": "Kotlin - Usefulness of &quot;computed&quot; var properties?", "body": "<p>A \"computed\" <em><code>var</code></em> property with an unused backing field should be a \"computed\" <em><code>val</code></em> property.</p>\n\n<p>If you are not going to use the backing field in your example then <code>Banana.color</code> shouldn't be a <code>var</code> but a <code>val</code>. e.g.:</p>\n\n<pre><code>class Banana {\n    var ripeness = 1\n\n    val color: String\n        get() = when {\n            ripeness &gt; 80 -&gt; \"brown\"\n            ripeness &gt; 50 -&gt; \"yellow\"\n            else -&gt; \"green\"\n        }\n}\n</code></pre>\n\n<p>On the other hand, if you actually wanted to make your \"computed\" property overridable in some cases then you would need to actually use the backing field. e.g.:</p>\n\n<pre><code>class Banana {\n    var ripeness = 1\n\n    var color: String = \"green\"\n        get() = when {\n            ripeness &gt; 80 -&gt; \"brown\"\n            ripeness &gt; 50 -&gt; \"yellow\"\n            else -&gt; field\n        }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1610819945, "post_id": 65723217, "comment_id": 116254666, "body": "well, <code>millis</code> a property of the object, <code>val</code> indicates that <i>users of the object</i> can&#39;t change it. but users should not expect that it doesn&#39;t change. however, in this particular case, a function would probably make more sense than a property, as the system millis are not a property of any object... except the system..."}, {"owner": {"reputation": 1, "user_id": 15006922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91954b77f8b767cc2ce3b48fb02ae00?s=128&d=identicon&r=PG&f=1", "display_name": "usrusr", "link": "https://stackoverflow.com/users/15006922/usrusr"}, "reply_to_user": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1610968343, "post_id": 65723217, "comment_id": 116291238, "body": "...and that can be very misleading, because  to the uninitiated, <code>val somthing:Int</code> certainly doesn&#39;t look like describing a <i>function return type</i>. The <code>get()</code> effectively becomes part of the type, but convention puts it on a separate line and there is zero indication on the first line that the type isn&#39;t completely specified yet. Definitely a &quot;beware of&quot; pitfall in my eyes. Tools like IntelliJ (they should know a thing or two about kotlin) present them all the same at the usage site (including the actual equivalent of a Java <code>final long something;</code>, a val defined in the default constructor)."}], "tags": [], "owner": {"reputation": 1, "user_id": 15006922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91954b77f8b767cc2ce3b48fb02ae00?s=128&d=identicon&r=PG&f=1", "display_name": "usrusr", "link": "https://stackoverflow.com/users/15006922/usrusr"}, "is_accepted": false, "score": 0, "last_activity_date": 1610642895, "creation_date": 1610642895, "answer_id": 65723217, "question_id": 41279312, "link": "https://stackoverflow.com/questions/41279312/kotlin-usefulness-of-computed-var-properties/65723217#65723217", "title": "Kotlin - Usefulness of &quot;computed&quot; var properties?", "body": "<p>Beware of val ... get(), the behavior migth be very surprising:</p>\n<pre><code>class Val {\n    val millis: Long = System.currentTimeMillis()\n}\nclass ValGet {\n    val millis: Long\n        get() = System.currentTimeMillis()\n}\n\nval v = Val()\nval g = ValGet()\nfor(i in 0..4) {\n    println(&quot;val:&quot; +  v.millis + &quot; valget:&quot;+g.millis)\n    Thread.sleep(7)\n}\n</code></pre>\n<p>What's the use of <code>val</code> if a <code>val x: Int</code> cannot be relied upon to be the same when referenced twice? Apparently it even works for overrides if the parent is sufficiently open, an <code>abstract val looksQuiteLikeImmutable : Int</code> can be very misleading. Feels like groovy all over again... (At least this is what I observe in 1.4.21)</p>\n"}], "owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6131, "favorite_count": 0, "accepted_answer_id": 41286194, "answer_count": 2, "score": 11, "last_activity_date": 1610642895, "creation_date": 1482397422, "last_edit_date": 1482402334, "question_id": 41279312, "link": "https://stackoverflow.com/questions/41279312/kotlin-usefulness-of-computed-var-properties", "title": "Kotlin - Usefulness of &quot;computed&quot; var properties?", "body": "<p>I noticed that when I have a <code>var</code> property with a custom <code>get</code>, that does not use the <code>field</code> identifier, a backing field is generated anyway. I checked the bytecode, and the documentation says so as well:</p>\n\n<blockquote>\n  <p>A backing field will be generated for a property if it uses the\n  default implementation of <strong>at least one of the accessors</strong>, or if a\n  custom accessor references it through the field identifier.<br>\n  (emphasis is mine)</p>\n</blockquote>\n\n<p>Consider a class like this. Since it's a <code>var</code> property, a default <code>set</code> (and therefore a backing field) will be generated:</p>\n\n<pre><code>class Banana {\n    var ripeness = 1\n\n    var color: String = \"green\"\n        get() = when {\n            ripeness &gt; 80 -&gt; \"brown\"\n            ripeness &gt; 50 -&gt; \"yellow\"\n            else -&gt; \"green\"\n        }\n}\n\nval b = Banana()\nb.color = \"blue\"\n\nprintln(b.color)\n</code></pre>\n\n<p>However, the <code>println</code> will always print \"green\", no matter what I set <code>color</code> to. The backing field will be set to \"blue\" anyway.<br>\nSince there is no way to access it outside the accessor methods (or via reflection) I really can't think of a reason for this.<br>\nAm I missing something here? Maybe a usecase or another way of accessing the backing field? Or is it just a bug (or a missing warning in IntelliJ)?</p>\n"}, {"tags": ["sed", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1945, "user_id": 690469, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9441d4312f3c707b67680be963bd68f0?s=128&d=identicon&r=PG", "display_name": "ZacAttack", "link": "https://stackoverflow.com/users/690469/zacattack"}, "edited": false, "score": 0, "creation_date": 1482426909, "post_id": 41286571, "comment_id": 69779259, "body": "Ah! I suspected it might be something of this nature.  Thanks!"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 7, "last_activity_date": 1482429005, "last_edit_date": 1482429005, "creation_date": 1482420571, "answer_id": 41286571, "question_id": 41278921, "link": "https://stackoverflow.com/questions/41278921/write-to-file-after-match-in-kotlin/41286571#41286571", "title": "Write to file after match in Kotlin", "body": "<p>GNU 'sed' does not insert/remove/update lines in files, it transforms an input stream and provides options for sending the output stream to <code>stdout</code>, to a file, or even to a temporary file which then overwrites the original file after the transformation is complete (this is the <code>--in-place</code> option).</p>\n\n<p>Here is some code that should get you started but note that there are lots of ways to buffer and read/write files, streams, etc.</p>\n\n<pre><code>val file = File(\"file.txt\")\nval tempFile = createTempFile()\nval regex = Regex(\"\"\"some line in file\"\"\")\ntempFile.printWriter().use { writer -&gt;\n    file.forEachLine { line -&gt;\n        writer.println(when {\n            regex.matches(line) -&gt; \"a some text I'd like to add after line\"\n            else -&gt; line\n        })\n    }\n}\ncheck(file.delete() &amp;&amp; tempFile.renameTo(file)) { \"failed to replace file\" }\n</code></pre>\n\n<p>See also <a href=\"https://www.gnu.org/software/sed/manual/sed.html\" rel=\"noreferrer\">sed, a stream editor</a> for more details on how it transforms text streams.</p>\n"}], "owner": {"reputation": 1945, "user_id": 690469, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9441d4312f3c707b67680be963bd68f0?s=128&d=identicon&r=PG", "display_name": "ZacAttack", "link": "https://stackoverflow.com/users/690469/zacattack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1460, "favorite_count": 0, "accepted_answer_id": 41286571, "answer_count": 1, "score": 7, "last_activity_date": 1557458837, "creation_date": 1482396027, "last_edit_date": 1482403182, "question_id": 41278921, "link": "https://stackoverflow.com/questions/41278921/write-to-file-after-match-in-kotlin", "title": "Write to file after match in Kotlin", "body": "<p>New to Kotlin, I'd like to insert a line in the file after a specific match in the file.  I know how to do this with sed like the following:</p>\n\n<pre><code>sed \"/some line in file/a some text I'd like to add after line\" file\n</code></pre>\n\n<p>But I'd like to understand how I'd go about this in Kotlin.  So far I've got got as far as the printWriter interface, but I don't see anything that clearly implies an offset or regex parameter.</p>\n\n<p>So far I've got:</p>\n\n<pre><code>File(\"file.txt\").printWriter(...)\n</code></pre>\n\n<p>Thanks!</p>\n"}]