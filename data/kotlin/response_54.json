[{"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453305107, "post_id": 34891431, "comment_id": 57545090, "body": "in the question you ask for a map of sets: <code>mapOf(&#39;bob&#39; to setOf(UGLY, FAT), ..</code>, but the code in your example produces a map of lists: <code>{1=[1, 3], 2=[2]}</code>. Which one did you mean? Please choose one and correct the other."}, {"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453311277, "post_id": 34891431, "comment_id": 57549444, "body": "the concept is what is important. please don&#39;t get hung up bob being fat and ugly because, although true, it&#39;s just an abstraction."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453347432, "post_id": 34891431, "comment_id": 57565027, "body": "it is always nice to be specific, you know. Please see the suggested edit"}, {"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453351411, "post_id": 34891431, "comment_id": 57566077, "body": "your edit goes against my intent. I want a set of results"}, {"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453351491, "post_id": 34891431, "comment_id": 57566097, "body": "am I to believe you assume that a square bracket means list? if that is the case, just print a set for yourself in kotlin and you&#39;ll see [...]"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453383291, "post_id": 34891431, "comment_id": 57583848, "body": "yep, my bad. Sorry for bothering you"}], "answers": [{"comments": [{"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 0, "creation_date": 1453311481, "post_id": 34891800, "comment_id": 57549572, "body": "I don&#39;t agree with the edit to remove result possibilities"}, {"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 0, "creation_date": 1453311556, "post_id": 34891800, "comment_id": 57549613, "body": "I would prefer to have the available options listed, as you had them previously. If you need me to edit my question to support a wider array possibilities, I will do it. I think it&#39;s important to be able to understand all the collections options you presented."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 0, "creation_date": 1453378734, "post_id": 34891800, "comment_id": 57580620, "body": "@activedecay That is fine if he gives his best answer first, then alternatives.  But not as an &quot;EDIT:&quot; trail that must be followed to understand the final answer -- that is less clear and is like reading only commit logs to understand the final code.  We don&#39;t need to see history in the answer itself, just the final answer since we can view edit history any time.  This was a simplified case and was a &quot;maybe&quot; thing, others are much worse."}, {"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 0, "creation_date": 1453395667, "post_id": 34891800, "comment_id": 57592730, "body": "I totally agree, and maybe my preference for wanting it to explain more was driven from my not understanding more about the kotlin standard library. But, I have since spent time reading your SO posts. Which I can happily report now that I feel much less confused. :)"}], "tags": [], "owner": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "is_accepted": true, "score": 13, "last_activity_date": 1453304955, "last_edit_date": 1453304955, "creation_date": 1453265347, "answer_id": 34891800, "question_id": 34891431, "link": "https://stackoverflow.com/questions/34891431/fold-pairs-into-map-of-set-create-map-entries-if-not-existing-already/34891800#34891800", "title": "fold pairs into map of set; create map entries if not existing already", "body": "<p>You can use <code>groupBy</code> and then a <code>mapValues</code> like this:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val pairs = listOf(Pair(\"bob\", \"UGLY\"), Pair(\"sue\", \"PETTY\"), Pair(\"bob\", \"FAT\"))\n    val result = pairs\n            .groupBy { it.first }\n            .mapValues { it.value.map { p -&gt; p.second }.toSet() }\n    println(result)\n}\n</code></pre>\n"}], "owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3554, "favorite_count": 1, "accepted_answer_id": 34891800, "answer_count": 1, "score": 8, "last_activity_date": 1453304955, "creation_date": 1453262971, "last_edit_date": 1453280120, "question_id": 34891431, "link": "https://stackoverflow.com/questions/34891431/fold-pairs-into-map-of-set-create-map-entries-if-not-existing-already", "title": "fold pairs into map of set; create map entries if not existing already", "body": "<p>using a list of pairs, want to transform them to a map of sets.</p>\n\n<p>input: list of pairs is like this</p>\n\n<pre><code>listOf(Pair('bob', UGLY), Pair('sue', PETTY), Pair('bob', FAT))\n</code></pre>\n\n<p>desired output is a map of set where the key is <code>first</code> of pair, and the set is the <code>second</code></p>\n\n<pre><code>mapOf('bob' to setOf(UGLY, FAT), 'sue' to setOf(PETTY))\n</code></pre>\n\n<p>I have tried this, but wow this is incredibly verbose. can this be reduced?</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    var m = HashMap&lt;Int, MutableSet&lt;Int&gt;&gt;()\n    listOf(1 to 1, 2 to 2, 1 to 3).map {\n        val set = m.getOrPut(it.first, { listOf&lt;Int&gt;().toMutableSet() })\n        set.add(it.second)\n        set\n    }\n    println (m)\n}\n-&gt; {1=[1, 3], 2=[2]}\n\n// yet another version, yields the correct result, but I feel a lack of clarity \n// that maybe I'm missing a library function that would suit the purpose.\nlistOf(1 to 1, 2 to 2, 1 to 3).fold(m, {\n    mapSet, pair -&gt;\n    val set = mapSet.getOrPut(pair.first, { listOf&lt;Int&gt;().toMutableSet() })\n    set.add(pair.second)\n    mapSet\n})\n-&gt; {1=[1, 3], 2=[2]}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1453296837, "post_id": 34889793, "comment_id": 57538991, "body": "<a href=\"http://stackoverflow.com/help/dont-ask\">stackoverflow.com/help/dont-ask</a>"}], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 3, "creation_date": 1453288427, "post_id": 34892816, "comment_id": 57533364, "body": "By the way, it makes sense to set up syntax highlighting in IDE so that it will  highlight class names in <i>slightly</i> different color. It will make distinguishing constructor calls even easier."}, {"owner": {"reputation": 12377, "user_id": 27194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/526161a664210d3946ca432ee787f2af?s=128&d=identicon&r=PG", "display_name": "Patrick from NDepend team", "link": "https://stackoverflow.com/users/27194/patrick-from-ndepend-team"}, "edited": false, "score": 0, "creation_date": 1612761295, "post_id": 34892816, "comment_id": 116857684, "body": "totally new to kotlin, I would have like a meaningful KT compiler error like &#39;Don&#39;t need the &#39;new&#39; keyword to create an instance through a constructor&#39; instead of &#39;Unresolve reference:new&#39;, would have saved me a while"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 23, "last_activity_date": 1453271281, "last_edit_date": 1453271281, "creation_date": 1453270595, "answer_id": 34892816, "question_id": 34889793, "link": "https://stackoverflow.com/questions/34889793/why-did-kotlin-drop-the-new-keyword/34892816#34892816", "title": "Why did kotlin drop the &quot;new&quot; keyword?", "body": "<p>The <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#naming-style\">Kotlin Coding Conventions</a> clearly state that:</p>\n\n<blockquote>\n  <ul>\n  <li>use of camelCase for names (and avoid underscore in names)</li>\n  <li>types start with upper case</li>\n  <li>methods and properties start with lower case</li>\n  </ul>\n</blockquote>\n\n<p>If you follow the above and <strong>treat <code>constructor</code> as regular function</strong> that can be called i.e. <code>val invoice = Invoice()</code> the <code>new</code> keyword becomes <strong>redundant</strong>. \nOnce you accommodate yourself with the convention it's clear what a code is doing. </p>\n\n<p>In fact even in Java code you'll have many <em>implicit</em> allocations that happen just beneath a method call like <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#singleton(T)\"><code>Collections.singleton(o)</code></a> or Guava's <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#newArrayList()\"><code>Lists.newArrayList()</code></a> so I don't think your argument about allocation visibility being better with the <code>new</code> keyword is fully valid. </p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 16, "last_activity_date": 1505855127, "last_edit_date": 1505855127, "creation_date": 1453271148, "answer_id": 34892932, "question_id": 34889793, "link": "https://stackoverflow.com/questions/34889793/why-did-kotlin-drop-the-new-keyword/34892932#34892932", "title": "Why did kotlin drop the &quot;new&quot; keyword?", "body": "<p>(IMO) It was done because there is NO real difference between functions and object construction, i.e. nothing prevents a function to allocate an object (and they often do). </p>\n\n<p>A good example is factory functions. These functions create new objects, but they are in no way class constructors.</p>\n\n<p>AFAIK, the <code>new</code> keyword was created because of a negative experience with C\\C++, where functions, returning new objects, have to be specially marked (by name conventions) in order not to forget to (manually) free the memory. In a auto-memory-managing language like Java\\Kotlin it is not a concern.</p>\n"}, {"comments": [{"owner": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "edited": false, "score": 0, "creation_date": 1453344309, "post_id": 34899904, "comment_id": 57564169, "body": "Scala has the <code>new</code> keyword. It is just that there are cases where you don&#39;t need to use it, like with case classes."}, {"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "reply_to_user": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "edited": false, "score": 0, "creation_date": 1453384236, "post_id": 34899904, "comment_id": 57584528, "body": "Oh, you&#39;re right. And, using companion objects, you can make the class invokable and have that redirect to the constructor, effectively eliminating the need for new. I&#39;d seen that in my brief look into Scala, and had forgotten that it&#39;s not the norm."}], "tags": [], "owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "is_accepted": false, "score": 4, "last_activity_date": 1453292363, "creation_date": 1453292363, "answer_id": 34899904, "question_id": 34889793, "link": "https://stackoverflow.com/questions/34889793/why-did-kotlin-drop-the-new-keyword/34899904#34899904", "title": "Why did kotlin drop the &quot;new&quot; keyword?", "body": "<p>Several other languages have no <code>new</code> keyword (Python, Scala, maybe Ceylon) and people who have switched to those languages never seem to miss it. I know I dont.</p>\n"}], "owner": {"reputation": 334, "user_id": 2922073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efa88ec66c70122344be8e0f364fc1ca?s=128&d=identicon&r=PG&f=1", "display_name": "user2922073", "link": "https://stackoverflow.com/users/2922073/user2922073"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7035, "favorite_count": 2, "closed_date": 1453317875, "accepted_answer_id": 34892816, "answer_count": 3, "score": 19, "last_activity_date": 1505855127, "creation_date": 1453252026, "question_id": 34889793, "link": "https://stackoverflow.com/questions/34889793/why-did-kotlin-drop-the-new-keyword", "closed_reason": "Opinion-based", "title": "Why did kotlin drop the &quot;new&quot; keyword?", "body": "<p>Why did kotlin drop the <strong>new</strong> keyword ? \nIt makes it harder to see the difference between a function call and an object allocation.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 6, "creation_date": 1453219824, "post_id": 34881180, "comment_id": 57501146, "body": "For eager evaluation there is an even shorter option: <code>(&#39;a&#39;..&#39;z&#39;) + (&#39;A&#39;..&#39;Z&#39;)</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1453220264, "post_id": 34881180, "comment_id": 57501429, "body": "added that in an edit.  Works if you happen to have the ranges on hand, such as literal ranges."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 25, "last_activity_date": 1453220942, "last_edit_date": 1453220942, "creation_date": 1453218784, "answer_id": 34881180, "question_id": 34881006, "link": "https://stackoverflow.com/questions/34881006/sparse-list-of-values-using-ranges/34881180#34881180", "title": "sparse list of values using ranges", "body": "<p>You can go slightly shorter for a list by using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-iterable/flatten.html\" rel=\"noreferrer\"><code>flatten()</code></a> instead of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-iterable/flat-map.html\" rel=\"noreferrer\"><code>flatMap()</code></a>:</p>\n\n\n\n<pre><code>listOf('a'..'z','A'..'Z').flatten()\n</code></pre>\n\n<p>or a shorter form (from @Ilya) is to use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-iterable/plus.html\" rel=\"noreferrer\"><code>plus()</code> <code>+</code> operator</a> of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-iterable/index.html\" rel=\"noreferrer\"><code>Iterable</code></a> (<em>an interface that ranges implement</em>).  Each <code>+</code> will make a copy of the list:</p>\n\n<pre><code>val validLetters = ('a'..'z') + ('A'..'Z')\nval someNumbers = (1..20) + (25..100)\n</code></pre>\n\n<p>or go more lazy as a <code>Sequence</code> (not sure it matters here at all to be lazier):</p>\n\n<pre><code>sequenceOf('a'..'z','A'..'Z').flatten()\n</code></pre>\n\n<h2>As Helper Functions</h2>\n\n<p>In Kotlin people typically create a helper function to wrap things like this up nicely; if you happen to re-use this code a lot:</p>\n\n<pre><code>// helper functions\nfun sparseListOf(vararg ranges: CharRange): List&lt;Char&gt; = ranges.flatMap { it }       \nfun sparseListOf(vararg ranges: IntRange): List&lt;Int&gt; = ranges.flatMap { it }\n</code></pre>\n\n<p>...and the usage for those helpers:</p>\n\n<pre><code>val validLetters = sparseListOf('a'..'z', 'A'..'Z')\nval someNumbers = spareListOf(1..20, 25..100)\n</code></pre>\n\n<p><strong><em>NOTE:</em></strong> <em>the helper functions use <code>flatMap()</code> since there is no <code>flatten()</code> method or extension for <code>Array&lt;out XYZ&gt;</code> which is the type received from the <code>vararg</code>.  The lambda is inlined so likely there is no real difference in performance.</em> </p>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1453220602, "post_id": 34881808, "comment_id": 57501656, "body": "If you have the ranges literally on hand, this is fine.  The <code>plus()</code> operator will make copies for each additional <code>+</code>.  @Ilya added this as a comment above already."}], "tags": [], "owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "is_accepted": false, "score": 2, "last_activity_date": 1453220488, "creation_date": 1453220488, "answer_id": 34881808, "question_id": 34881006, "link": "https://stackoverflow.com/questions/34881006/sparse-list-of-values-using-ranges/34881808#34881808", "title": "sparse list of values using ranges", "body": "<p>The <code>kotlin.Char.rangeTo</code> returns a <code>CharRange</code> that is an implementation of <code>CharProgression</code>. CharProgression is a subclass of <code>Iterable</code> and the plus operator is defined on iterables: <code>Iterable&lt;T&gt;.plus</code></p>\n\n<p>Yeilding a very simple looking and obvious</p>\n\n<pre><code>('a'..'z') + ('A'..'Z')\n</code></pre>\n"}], "owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6569, "favorite_count": 4, "accepted_answer_id": 34881180, "answer_count": 2, "score": 12, "last_activity_date": 1453220942, "creation_date": 1453218302, "question_id": 34881006, "link": "https://stackoverflow.com/questions/34881006/sparse-list-of-values-using-ranges", "title": "sparse list of values using ranges", "body": "<p>is there a more terse way of writing</p>\n\n<pre><code>listOf('a'..'z','A'..'Z').flatMap { it }\n</code></pre>\n\n<p>The idea here is to iterate over some values in a range, like the numbers from 1 through 100, skipping 21 through 24</p>\n\n<pre><code>listOf(1..20, 25..100).flatMap { it }\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 2, "creation_date": 1453185427, "post_id": 34867130, "comment_id": 57478636, "body": "Could you please post a sample that is causing trouble? I suspect it may be related to annotation processing so any additional information about libraries used (i.e. ButterKnife or Dagger) could come handy"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 2, "creation_date": 1453190816, "post_id": 34867130, "comment_id": 57481203, "body": "Which version of Kotlin are you using?"}, {"owner": {"reputation": 2097, "user_id": 437270, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/147e475f000342a37f4026fe9eb8dc46?s=128&d=identicon&r=PG", "display_name": "John D.", "link": "https://stackoverflow.com/users/437270/john-d"}, "edited": false, "score": 0, "creation_date": 1453227932, "post_id": 34867130, "comment_id": 57506302, "body": "According to Android Studio, I am using Version: 1.0.0-beta-4584-IJ141-13"}, {"owner": {"reputation": 6210, "user_id": 650288, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/J4Qag.jpg?s=128&g=1", "display_name": "bclymer", "link": "https://stackoverflow.com/users/650288/bclymer"}, "edited": false, "score": 1, "creation_date": 1453243767, "post_id": 34867130, "comment_id": 57515274, "body": "I only get this when using the <code>inner</code> modifier on a class. However, not using it is a rather large inconvenience. I hope you find a solution (I&#39;ll be looking too)."}, {"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 0, "creation_date": 1453428602, "post_id": 34867130, "comment_id": 57608039, "body": "have you considered the possibility you don&#39;t have proguard set up? &quot;RuntimeInvisibleParameterAnnotations Specifies the annotations that are visible at compile-time, for method parameters. Compilers and annotation processors may use these annotations.&quot; from <a href=\"http://proguard.sourceforge.net/manual/attributes.html\" rel=\"nofollow noreferrer\">proguard.sourceforge.net/manual/attributes.html</a>"}, {"owner": {"reputation": 2097, "user_id": 437270, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/147e475f000342a37f4026fe9eb8dc46?s=128&d=identicon&r=PG", "display_name": "John D.", "link": "https://stackoverflow.com/users/437270/john-d"}, "edited": false, "score": 0, "creation_date": 1453746037, "post_id": 34867130, "comment_id": 57726975, "body": "I never really resolved the problem at hand, but I got around it by making Baz a static inner class. I think ProGuard may have been causing the problem, but refactoring worked."}, {"owner": {"reputation": 769, "user_id": 805246, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6e8a7dbab8bec2252484c67e17d5446c?s=128&d=identicon&r=PG", "display_name": "FUJI Goro", "link": "https://stackoverflow.com/users/805246/fuji-goro"}, "edited": false, "score": 0, "creation_date": 1456837750, "post_id": 34867130, "comment_id": 59122137, "body": "I got the same problem while trying to convert Java project to Kotlin here: <a href=\"https://github.com/gfx/Android-Helium/pull/42\" rel=\"nofollow noreferrer\">github.com/gfx/Android-Helium/pull/42</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4621, "user_id": 3156226, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OvMfk.jpg?s=128&g=1", "display_name": "josedlujan", "link": "https://stackoverflow.com/users/3156226/josedlujan"}, "is_accepted": false, "score": 2, "last_activity_date": 1461628135, "creation_date": 1461628135, "answer_id": 36853062, "question_id": 34867130, "link": "https://stackoverflow.com/questions/34867130/kotlin-intermittent-bad-class-file-error/36853062#36853062", "title": "Kotlin - Intermittent &quot;bad class file&quot; error", "body": "<p>I have two options to help you.</p>\n\n<p>1- try upgrading proguard. Use <a href=\"http://proguard.sourceforge.net)\" rel=\"nofollow\">THIS</a></p>\n\n<p>2- Use Java 7, change your path.\nexport JAVA_HOME=<code>/usr/libexec/java_home -v 1.7</code></p>\n"}], "owner": {"reputation": 2097, "user_id": 437270, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/147e475f000342a37f4026fe9eb8dc46?s=128&d=identicon&r=PG", "display_name": "John D.", "link": "https://stackoverflow.com/users/437270/john-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 1, "answer_count": 1, "score": 19, "last_activity_date": 1461628135, "creation_date": 1453167349, "last_edit_date": 1453228322, "question_id": 34867130, "link": "https://stackoverflow.com/questions/34867130/kotlin-intermittent-bad-class-file-error", "title": "Kotlin - Intermittent &quot;bad class file&quot; error", "body": "<p>Starting today, when I attempt to build my Kotlin Android app, I am met with the following error in my Gradle build:</p>\n\n<pre><code>Error:cannot access Baz\nbad class file: /Users/me/projects/site/android/app/build/tmp/kapt/debug/classFileStubs/com/company/foo/Bar$Baz.class\nbad RuntimeInvisibleParameterAnnotations attribute: Baz(FragmentManager)\nPlease remove or make sure it appears in the correct subdirectory of the classpath.\n</code></pre>\n\n<p>It is pointing to an inner class Baz which extends android.support.v4.app.FragmentStatePagerAdapter. I am able to temporarily get around the error by commenting out the class, and any references to it in the outer class, and rebuilding. The error goes away, but obviously the class no longer exists so other things break at runtime. Then, if I uncomment it and build, it will work for a few builds. Then the error comes back. Rinse and repeat. I think closing the Genymotion emulator may trigger it.</p>\n\n<p>Anyone else run into this, or have any ideas?</p>\n\n<p>Here is the offending code:</p>\n\n<pre><code>class Bar : Fragment() {\n\n    @Inject\n    lateinit var api:ApiRequester\n    var data : ArrayList&lt;Data&gt; = ArrayList()\n\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        //[...] view creation code\n        //[...] data population code\n        viewPager.adapter = Baz(childFragmentManager)\n        //[...] more view creation code\n    }\n\n    inner class Baz(fm:FragmentManager) : FragmentStatePagerAdapter(fm) {\n        override fun getCount(): Int {\n            return data.count()\n        }\n\n        override fun getItem(position: Int): Fragment? {\n            var jf = FooFragment()\n            var bundle = Bundle()\n            bundle.putParcelable(\"data\", data[position])\n            jf.arguments = bundle\n            return jf\n        }\n    }\n</code></pre>\n\n<p>EDIT: Apologies, Baz extends FragmentStatePagerAdapter, not Fragment as I initially stated. I am using Dagger2, which could totally have an effect here.</p>\n"}, {"tags": ["kotlin", "default-arguments"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1453147246, "post_id": 34862949, "comment_id": 57465335, "body": "You should add your error message text to the question, because it is important and says exactly what the error is.  &quot;No value passed for parameter SECOND&quot;"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1453148265, "post_id": 34862949, "comment_id": 57465940, "body": "I added the error mesage in an edit.  And fixed indentation."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 3, "creation_date": 1453148298, "post_id": 34862949, "comment_id": 57465960, "body": "A side note for you learning Kotlin, use <code>val</code> unless you have an absolute need to use <code>var</code> for a specific case, it should no be the default.  <code>val</code> is your friend."}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 29, "last_activity_date": 1453148250, "last_edit_date": 1453148250, "creation_date": 1453146916, "answer_id": 34862984, "question_id": 34862949, "link": "https://stackoverflow.com/questions/34862949/kotlin-how-to-make-a-function-call-using-the-first-arguments-default-value-and/34862984#34862984", "title": "Kotlin: how to make a function call using the first argument&#39;s default value and passing a value for the second?", "body": "<p>This is an error because Kotlin does not know why you omitted a second parameter.  The <code>first</code> can be defaulted, but not <code>second</code>.  Therefore when you only passed in one argument it was for parameter <code>first</code>.  The error message says exactly what the problem is:</p>\n\n<blockquote>\n  <p>no value passed for parameter <strong>second</strong></p>\n</blockquote>\n\n<p>You must call using <a href=\"https://kotlinlang.org/docs/reference/functions.html#named-arguments\">named arguments</a> for anything after the first defaulted parameter that you want to leave blank.  For your case, this would be:</p>\n\n\n\n<pre><code>addTwo(second = 2) // first defaulted to 0\n</code></pre>\n\n<p>Had your defaulted parameters been in the other order, your call would be fine.</p>\n\n<pre><code>fun addTwo(first: Int, second: Int = 0): Int{\n    return first + second\n}\n\naddTow(2)  // no error, second defaulted to 0\n</code></pre>\n\n<p>Had your data types been different for the two parameters, you would have seen a different less clear error letting you know the type of the first parameter (<code>Int</code>) was expected, not the type of the second (<code>Date</code> in the following example):</p>\n\n<pre><code>fun something(first: Int = 0, second: Date): Date { ... }\n\nsomething(Date()) // ERROR: Type mismatch: inferred type is java.util.Date but kotlin.Int was expected\n</code></pre>\n\n<p><strong><em>Note:</em></strong> <em>You can run into the same issue with <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\"><code>vararg</code></a>:</em></p>\n\n<blockquote>\n  <p>Only one parameter may be marked as vararg. If a vararg parameter is not the last one in the list, values for the following parameters can be passed using the named argument syntax</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1453412282, "post_id": 34900123, "comment_id": 57602343, "body": "When you have a lot of default arguments you start to use named parameters a lot more and then the order stops mattering as much because you have to start using named arguments anyway to skip over some of the defaulted."}, {"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1453467092, "post_id": 34900123, "comment_id": 57625508, "body": "You don&#39;t necessarily want to force the users of your function to have to learn that much more of your api, and sometimes using named arguments ends up cluttering your code. Plus, forcing named arguments means you <i>definitely</i> can&#39;t refactor the names if others are using the function. There is a time and place for defaults and named arguments. Generally, it&#39;s safer to put the defaults at the end of the list. I know that <i>my</i> mind has an easier time wrapping around defaults at the end of a list, especially if they&#39;re used as flags."}], "tags": [], "owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "is_accepted": false, "score": 1, "last_activity_date": 1453292981, "creation_date": 1453292981, "answer_id": 34900123, "question_id": 34862949, "link": "https://stackoverflow.com/questions/34862949/kotlin-how-to-make-a-function-call-using-the-first-arguments-default-value-and/34900123#34900123", "title": "Kotlin: how to make a function call using the first argument&#39;s default value and passing a value for the second?", "body": "<p>Additional note: because of what you experienced, it is generally a best practice to make default arguments the last parameters in the list. Some languages even force this, such as Python (except that Python allows forced named arguments after defaults, since forcong you to call them by name is how you'd get around having parameters after default arguments anyway).</p>\n"}], "owner": {"reputation": 169, "user_id": 3818574, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f78d4858da6d32d2fadd3335edbd1f3?s=128&d=identicon&r=PG&f=1", "display_name": "hlupico", "link": "https://stackoverflow.com/users/3818574/hlupico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9669, "favorite_count": 2, "accepted_answer_id": 34862984, "answer_count": 2, "score": 10, "last_activity_date": 1517715763, "creation_date": 1453146769, "last_edit_date": 1517715763, "question_id": 34862949, "link": "https://stackoverflow.com/questions/34862949/kotlin-how-to-make-a-function-call-using-the-first-arguments-default-value-and", "title": "Kotlin: how to make a function call using the first argument&#39;s default value and passing a value for the second?", "body": "<p>I'd like to know how to call a function with default arguments when you want to specify the value of the second argument. In the simple example below I am showing that the addTwo() takes two arguments. The 'first' argument has a default value but the 'second does not. How would I call this function specifying that I want to use the default value for 'first' with the given value of 2 for 'second'?</p>\n\n<p>Calling addTwo(2) throws an error. </p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    var sum = addTwo(1,2)    // works fine\n    var nextSum = addTwo(2)  // ERROR: No value passed for parameter second \n}\n\nfun addTwo(first: Int = 0, second: Int): Int {\n    return first + second\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1453119741, "post_id": 34840821, "comment_id": 57448768, "body": "Almost the same code is present in this question:  <a href=\"http://stackoverflow.com/questions/34797366/in-kotlin-how-do-i-add-extension-methods-to-another-class-but-only-visible-in\" title=\"in kotlin how do i add extension methods to another class but only visible in\">stackoverflow.com/questions/34797366/&hellip;</a> and explained in the accepted answer <a href=\"http://stackoverflow.com/a/34797367/3679676\">stackoverflow.com/a/34797367/3679676</a> where the transaction itself wraps the code."}], "answers": [{"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1453106327, "post_id": 34840910, "comment_id": 57440555, "body": "It&#39;s even better to make the whole function an extension function."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 3, "last_activity_date": 1453122574, "last_edit_date": 1453122574, "creation_date": 1453049642, "answer_id": 34840910, "question_id": 34840821, "link": "https://stackoverflow.com/questions/34840821/getting-access-to-an-instance-in-a-wrapper-function/34840910#34840910", "title": "Getting access to an instance in a wrapper function", "body": "<p>The easy solution here is to make <code>code</code> a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-literals-with-receiver\" rel=\"nofollow\">function with receiver</a>:</p>\n\n<pre><code>fun wrapInTransaction(code: Realm.() -&gt; Unit) {\n    realmInstance.beginTransaction();\n    realmInstance.code()\n    realmInstance.commitTransaction();\n}\n</code></pre>\n\n<p>Inside a lambda which you pass as <code>code</code> you will be able to use <code>this</code> to reference the <code>RealmInstance</code> and to use its members directly as if inside a member function.</p>\n\n<p>Calling <code>realmInstance.code()</code> is just calling <code>code</code> with passing <code>realmInstance</code> as a receiver to it.</p>\n"}, {"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 1, "last_activity_date": 1453122600, "last_edit_date": 1495539892, "creation_date": 1453049660, "answer_id": 34840915, "question_id": 34840821, "link": "https://stackoverflow.com/questions/34840821/getting-access-to-an-instance-in-a-wrapper-function/34840915#34840915", "title": "Getting access to an instance in a wrapper function", "body": "<p>Change the <code>wrapInTransaction</code> function to accept an extensions method on <code>realmInstance</code> like so:</p>\n\n<pre><code>fun wrapInTransaction(code:Realm.() -&gt; Unit){\n    realmInstance.beginTransaction();\n    realmInstance.code()\n    realmInstance.commitTransaction();\n}\n</code></pre>\n\n<p>Then you can use it like:</p>\n\n<pre><code>wrapInTransaction {\n    println(\"realm instance is $this, instanceId: $instanceId\")\n}\n</code></pre>\n\n<p>Where for the sake of the example the <code>Realm</code> looks like:</p>\n\n<pre><code>class Realm {\n    val instanceId = 42\n    fun beginTransaction() {\n    }\n\n    fun commitTransaction() {\n    }\n}\n</code></pre>\n\n<p>The above technique is possible thanks to Kotlin's <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-literals-with-receiver\" rel=\"nofollow noreferrer\">Function Literals with Receiver</a> that make it possible to <em>set</em> the <code>this</code> instance (receiver) within lambda function body. It makes it easy to build type safe builders that reassemble ones from Groovy or Ruby.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/34797366/in-kotlin-how-do-i-add-extension-methods-to-another-class-but-only-visible-in\">This answer</a> provides more samples on the technique.</p>\n"}, {"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 2, "last_activity_date": 1453125867, "last_edit_date": 1453125867, "creation_date": 1453108172, "answer_id": 34850908, "question_id": 34840821, "link": "https://stackoverflow.com/questions/34840821/getting-access-to-an-instance-in-a-wrapper-function/34850908#34850908", "title": "Getting access to an instance in a wrapper function", "body": "<p>The other answers correctly demonstrate how to pass the <code>RealmInstance</code> object to the lambda. In addition, you can make the whole function an extension function which makes the call site a bit prettier:</p>\n\n<pre><code>fun Realm.wrapInTransaction(code: Realm.() -&gt; Unit) {\n    //this is implicit\n    beginTransaction();\n    code()\n    commitTransaction();\n}\n</code></pre>\n\n<p>The call site will look like this:</p>\n\n<pre><code>Realm.getInstance(this).wrapInTransaction {\n    createObject(User.class)\n}\n</code></pre>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 34850908, "answer_count": 3, "score": 3, "last_activity_date": 1453125867, "creation_date": 1453049169, "last_edit_date": 1453049702, "question_id": 34840821, "link": "https://stackoverflow.com/questions/34840821/getting-access-to-an-instance-in-a-wrapper-function", "title": "Getting access to an instance in a wrapper function", "body": "<p>In Kotlin I have this function to wrap a transaction:</p>\n\n<pre><code>fun wrapInTransaction(code: () -&gt; Unit) {\n        realmInstance.beginTransaction();\n        code.invoke()\n        realmInstance.commitTransaction();\n}\n</code></pre>\n\n<p>How can I get access to <code>realmInstance</code> in the invoked code?</p>\n"}, {"tags": ["android", "kotlin", "android-espresso"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 7, "last_activity_date": 1453033474, "creation_date": 1453033474, "answer_id": 34838267, "question_id": 34837363, "link": "https://stackoverflow.com/questions/34837363/could-not-launch-activity-in-espresso-test/34838267#34838267", "title": "&quot;Could not launch activity&quot; in espresso test", "body": "<p>You need to declare <code>Player</code> activity in <code>AndroidManifest.xml</code> like so:</p>\n\n<pre><code>&lt;activity\n    android:name=\".Player\"\n    android:theme=\"@style/AppTheme.NoActionBar\"&gt;\n&lt;/activity&gt;\n</code></pre>\n"}], "owner": {"reputation": 437, "user_id": 5725496, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/386fb553a85bbd158916b038438a3855?s=128&d=identicon&r=PG&f=1", "display_name": "pozklundw", "link": "https://stackoverflow.com/users/5725496/pozklundw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2725, "favorite_count": 0, "accepted_answer_id": 34838267, "answer_count": 1, "score": 1, "last_activity_date": 1453357273, "creation_date": 1453027049, "question_id": 34837363, "link": "https://stackoverflow.com/questions/34837363/could-not-launch-activity-in-espresso-test", "title": "&quot;Could not launch activity&quot; in espresso test", "body": "<p>Here is my <a href=\"https://github.com/roroco/ro-h/tree/could-not-launch-activity\" rel=\"nofollow\">full code</a>, when I test following code with \"Android Tests\", it raise error \"Could not launch activity\"</p>\n\n<pre><code>//TestPlayer.kt\npublic class PlayerTest : ActivityInstrumentationTestCase2&lt;Player&gt;(Player::class.java) {\n    override fun setUp() {\n        super.setUp()\n        getActivity()\n    }\n\n    fun testPlayer() {\n        onView(withId(R.id.player)).perform(doubleClick())\n    }\n}\n</code></pre>\n\n<p>I doesn't find any output in android monitor, how to debug it?</p>\n"}, {"tags": ["android", "android-layout", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453010119, "post_id": 34835239, "comment_id": 57412236, "body": "Did you checked this code to work in IDE? Did it work? Can&#39;t see a problem here. Please clarify what you are asking."}, {"owner": {"reputation": 437, "user_id": 5725496, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/386fb553a85bbd158916b038438a3855?s=128&d=identicon&r=PG&f=1", "display_name": "pozklundw", "link": "https://stackoverflow.com/users/5725496/pozklundw"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453010426, "post_id": 34835239, "comment_id": 57412276, "body": "@voddan, it&#39;s ok code, I just wanna know how to customize view listener"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1453010658, "post_id": 34835239, "comment_id": 57412313, "body": "Sorry, I still do not follow you. Could you please modify the question?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1453121927, "post_id": 34835239, "comment_id": 57450124, "body": "What are you trying to do?  What have you tried (code)?  What was wrong about the result that you want help with?  Did you receive a specific error?"}], "answers": [{"tags": [], "owner": {"reputation": 25774, "user_id": 885028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xJkDj.jpg?s=128&g=1", "display_name": "aga", "link": "https://stackoverflow.com/users/885028/aga"}, "is_accepted": true, "score": 2, "last_activity_date": 1453194536, "last_edit_date": 1495541716, "creation_date": 1453194536, "answer_id": 34872600, "question_id": 34835239, "link": "https://stackoverflow.com/questions/34835239/how-to-set-my-motion-listener-for-exist-view/34872600#34872600", "title": "How to set my motion listener for exist view", "body": "<blockquote>\n  <p>I hope it support following code:<br>\n  ...</p>\n</blockquote>\n\n<p>Most likely the syntax that you've shown here is inspired by <a href=\"https://github.com/Kotlin/anko\" rel=\"nofollow noreferrer\">Anko</a> library which has some extension functions allowing you to add the <code>View</code> listeners in this pretty fashion:  </p>\n\n<pre><code>button.onClick {\n    Toast.makeText(this, \"Hi there!\", Toast.LENGTH_SHORT);\n}\n</code></pre>\n\n<p>instead of wordy Java syntax:  </p>\n\n<pre><code>button.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        Toast.makeText(this, \"Hi there!\", Toast.LENGTH_LONG).show();\n    }\n});\n</code></pre>\n\n<p>Unfortunately, Anko doesn't have the <code>onDoubleClick</code> extension function (well, the <code>View</code> doesn't have the <code>setOnDoubleClickListener()</code> method, either). If you want to add double-click support to your views, you need to use <a href=\"https://stackoverflow.com/questions/13530937/how-to-listen-to-doubletap-on-a-view-in-android\">GestureDetectors</a>. And, if you wish to write this code with the help of extensions functions, like in Anko, documentation can be found <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 437, "user_id": 5725496, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/386fb553a85bbd158916b038438a3855?s=128&d=identicon&r=PG&f=1", "display_name": "pozklundw", "link": "https://stackoverflow.com/users/5725496/pozklundw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1453234967, "accepted_answer_id": 34872600, "answer_count": 1, "score": -3, "last_activity_date": 1453194536, "creation_date": 1453006386, "last_edit_date": 1453007976, "question_id": 34835239, "link": "https://stackoverflow.com/questions/34835239/how-to-set-my-motion-listener-for-exist-view", "closed_reason": "Needs details or clarity", "title": "How to set my motion listener for exist view", "body": "<p>for instance, add double tap listener for VideoView. I hope it support following code:</p>\n\n<pre><code>//Player.kt\nvar vv = findViewById(R.id.player) as VideoView\nvv.onDoubleClick {\n  // do something\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453010380, "post_id": 34834739, "comment_id": 57412270, "body": "Sorry, what is it <code>Head &lt; TagWithChildren</code> in your first code snippet? Could you please post the real declarations instead, because small details matter when talking about builders and scopes."}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453010549, "post_id": 34834739, "comment_id": 57412296, "body": "@voddan done...sorry about that, thought I was being generic when really I was just using Ruby subclassing syntax."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453010887, "post_id": 34834739, "comment_id": 57412353, "body": "are you sure this what you have in you code? I am surprised it works at all, frankly. <code>fun head(init: Head.() -&gt; Unit) = children.add(Head())</code> - you do not use <code>init</code> here"}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453011012, "post_id": 34834739, "comment_id": 57412370, "body": "I&#39;m leaving out a few of the less relevant details. I&#39;m just trying to see a way if I can opt out of the scope traversal that the Kotlin compiler does."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453011298, "post_id": 34834739, "comment_id": 57412404, "body": "As I said, details matter here, but that&#39;s up to you. As for now, you do not call the <code>init</code> methods anywhere, and i can&#39;t imagine it working without it. Maybe you meant <code>fun head(init: Head.() -&gt; Unit) = children.add(Head().init())</code>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453011346, "post_id": 34834739, "comment_id": 57412414, "body": "Please make sure you code does have the effects you are asking about"}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453011907, "post_id": 34834739, "comment_id": 57412507, "body": "I added a couple more details."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453012479, "post_id": 34834739, "comment_id": 57412583, "body": "what you mean a couple more? If you want help with your code, you would better post it as it is. I don&#39;t want to be rude, just station the fact"}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453012832, "post_id": 34834739, "comment_id": 57412640, "body": "The question is already too complex, and I&#39;ve provided more than enough details. The problem is, in this case, the <code>script</code> method always gets called on the <code>Html</code> instance (produced by the <code>html</code> closure), when I&#39;d like it to <i>only</i> look for the <code>script</code> method on the <code>Script</code> instance (provided by the first <code>script</code> closure) and subsequently fail. That makes sense, doesn&#39;t it?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453013066, "post_id": 34834739, "comment_id": 57412678, "body": "I confirm the shadowing does not work properly for that case, leaving methods of an outer scope inside an inner scope"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453013189, "post_id": 34834739, "comment_id": 57412704, "body": "Sorry, @max, I got frustrated by code not working after copy-pasting it in IDE. I apologise."}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1453014413, "post_id": 34834739, "comment_id": 57412884, "body": "That&#39;s alright; I should have started with actual code to begin with, since the details could be important (e.g. the exact method signature). Thanks for looking, @voddan."}], "answers": [{"comments": [{"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "edited": false, "score": 1, "creation_date": 1453049321, "post_id": 34835643, "comment_id": 57422398, "body": "Another alternative workaround is to call the <code>head</code> and <code>script</code> builder methods on a <i>particular object</i>, i.e. either <code>this.script</code>/<code>this.head</code> (if receiver isn&#39;t passed as an argument, using <code>apply</code>) or <code>tag.script</code>/<code>tag.head</code> (if receiver is passed as argument, using <code>let</code>). Still, cumbersome."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1459792687, "post_id": 34835643, "comment_id": 60435144, "body": "you can <code>deprecate</code> the <code>Tag.addChild</code> method so that IDE will cross out it and remove from the complition"}], "tags": [], "owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1453010818, "creation_date": 1453010818, "answer_id": 34835643, "question_id": 34834739, "link": "https://stackoverflow.com/questions/34834739/wrong-this-being-used-in-nested-closures/34835643#34835643", "title": "Wrong &quot;this&quot; being used in nested closures", "body": "<p>As a workaround, I can have it fail at runtime if I change the classes to look like this:</p>\n\n<pre><code>open class Tag {\n  operator fun String.unaryPlus()\n  // pulled up from TagWithChildren, call protected method\n  fun head(init: Head.() -&gt; Unit) = addChild(Head())\n  fun script(init: Script.() -&gt; Unit) = addChild(Head())\n\n  // throws in Tag\n  open protected fun addChild(t: Tag) = throw IllegalArgumentException()\n}\nclass TagWithChildren : Tag() {\n  // overridden to not throw in subclass\n  protected override fun addChild(t: Tag) = children.add(t)\n}\n</code></pre>\n\n<p>This way, <em>every</em> Tag has the builder methods (solving the scoping problem), but actually calling them may result in a runtime failure.</p>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1453022020, "post_id": 34836287, "comment_id": 57414398, "body": "so, is there a way to create type-safe builders? workaround?"}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "edited": false, "score": 1, "creation_date": 1453049133, "post_id": 34836287, "comment_id": 57422327, "body": "Thanks @yole. This does make sense -- it&#39;s the way people expect closures to work, and in the non-builder case is generally what people want. Heck, even I want it for variable access but not method access, which is admittedly a bit arbitrary. Thanks for the confirmation."}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "edited": false, "score": 1, "creation_date": 1453052253, "post_id": 34836287, "comment_id": 57423526, "body": "Incidentally this behavior is basically documented on this old article on <a href=\"https://jaxenter.com/type-safe-web-with-kotlin-106187.html\" rel=\"nofollow noreferrer\">Kara</a> I stumbled across, in the paragraph starting &quot;Last question&quot;."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 3, "last_activity_date": 1453017244, "creation_date": 1453017244, "answer_id": 34836287, "question_id": 34834739, "link": "https://stackoverflow.com/questions/34834739/wrong-this-being-used-in-nested-closures/34836287#34836287", "title": "Wrong &quot;this&quot; being used in nested closures", "body": "<p>The current behavior is intentional. Code in a lambda has access to receivers of all enclosing scopes. It is possible that a future version of Kotlin will add a modifier that will restrict a lambda with receiver to calling methods on that receiver only and not the enclosing scopes, but in the current version there's no way to change that behavior.</p>\n"}], "owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1480022029, "creation_date": 1453000562, "last_edit_date": 1480022029, "question_id": 34834739, "link": "https://stackoverflow.com/questions/34834739/wrong-this-being-used-in-nested-closures", "title": "Wrong &quot;this&quot; being used in nested closures", "body": "<p>I'm trying to keep this minimal, but let me know if I'm being too minimal.</p>\n\n<p>Suppose you have a class hierarchy like this, designed for generating HTML (inspired by the Kotlin tutorial; semi-pseudocode follows):</p>\n\n<pre><code>class Tag {\n  protected val children = arrayListOf&lt;Tag&gt;()\n  operator fun String.unaryPlus() = children.add(Text(this))\n}\nclass TagWithChildren : Tag() {\n  fun head(init: Head.() -&gt; Unit) = initializeTag(Head(), init)\n  fun script(init: Script.() -&gt; Unit) = initializeTag(Script(), init)\n  fun &lt;T : Tag&gt; initializeTag(tag: T, init: T.() -&gt; Unit): T {\n    tag.init()\n    children.add(tag)\n    return tag\n  }\n}\nclass Head : TagWithChildren()\nclass Script : Tag()\nclass Text(val str: Text) : Tag()\n</code></pre>\n\n<p>Notice that <code>Head</code> has <code>head</code> and <code>script</code> methods while <code>Script</code> doesn't.</p>\n\n<p>Now you can construct a template that looks like this:</p>\n\n<pre><code>head {\n    script {\n        +\"alert('hi');\"\n    }\n}\n</code></pre>\n\n<p>Which works great! However, if the block passed to <code>script</code> tries to call methods that aren't available on <code>Script</code>, <strong>it can call the method on Head instead</strong>. For example,</p>\n\n<pre><code>head {\n    script {\n        script {\n            +\"alert('hi');\"\n        }\n    }\n}\n</code></pre>\n\n<p>not only isn't a compile error, it's actually equivalent to</p>\n\n<pre><code>head {\n    script {\n    }\n    script {\n        +\"alert('hi');\"\n    }\n}\n</code></pre>\n\n<p>which is <em>super confusing</em>, from a template author's perspective.</p>\n\n<p>Is there any way to prevent method lookups from traveling up the scope like that? I <em>only</em> want it to look at the innermost scope.</p>\n\n<hr>\n\n<p>UPDATE 11/24/2016:\nKotlin 1.1-M03 has introduced scope control, which I believe solves exactly this problem. <a href=\"https://blog.jetbrains.com/kotlin/2016/11/kotlin-1-1-m03-is-here/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/kotlin/2016/11/kotlin-1-1-m03-is-here/</a></p>\n"}, {"tags": ["javafx", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "edited": false, "score": 4, "creation_date": 1452989971, "post_id": 34833438, "comment_id": 57408921, "body": "You can also just plop the <code>fun main()</code> bit directly in the top-level scope, too."}, {"owner": {"reputation": 345, "user_id": 2121116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db6d16a1462f9dcc3914ae445cba4629?s=128&d=identicon&r=PG", "display_name": "Elavrius", "link": "https://stackoverflow.com/users/2121116/elavrius"}, "edited": false, "score": 3, "creation_date": 1453019764, "post_id": 34833438, "comment_id": 57413893, "body": "It worked a little better, but still had: Exception in thread &quot;main&quot; java.lang.RuntimeException: Error: class TestKt$Companion is not a subclass of javafx.application.Application"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 1, "creation_date": 1453026082, "post_id": 34833438, "comment_id": 57415303, "body": "I think you should use this method of Application: <a href=\"http://docs.oracle.com/javafx/2/api/javafx/application/Application.html#launch(java.lang.Class,%20java.lang.String...)\" rel=\"nofollow noreferrer\">docs.oracle.com/javafx/2/api/javafx/application/&hellip;</a>. In Kotlin that would be <code>launch(TestKt::class.java)</code>"}, {"owner": {"reputation": 345, "user_id": 2121116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db6d16a1462f9dcc3914ae445cba4629?s=128&d=identicon&r=PG", "display_name": "Elavrius", "link": "https://stackoverflow.com/users/2121116/elavrius"}, "edited": false, "score": 1, "creation_date": 1453042873, "post_id": 34833438, "comment_id": 57420225, "body": "Now it worked, thank You) Can You please also update Your initial answer so it would be complete? \u0421\u043f\u0430\u0441\u0438\u0431\u043e)"}, {"owner": {"reputation": 1615, "user_id": 2884225, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Eaihe.png?s=128&g=1", "display_name": "Ryan Hilbert", "link": "https://stackoverflow.com/users/2884225/ryan-hilbert"}, "edited": false, "score": 4, "creation_date": 1467508805, "post_id": 34833438, "comment_id": 63759520, "body": "This works, but it does not pass the program arguments to the Application. I personally use <code>@JvmStatic fun main(vararg args:String){launch(Main::class.java,*args);}</code>"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "edited": false, "score": 0, "creation_date": 1510765850, "post_id": 34833438, "comment_id": 81577628, "body": "@Max Nope, that doesn&#39;t work since you can&#39;t call <code>launch()</code>"}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1510812486, "post_id": 34833438, "comment_id": 81596218, "body": "@m0skit0 uh, sure you can. I was proposing exactly what @jenglert ended up posting, except that I would import <code>Application.launch</code>."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "edited": false, "score": 0, "creation_date": 1510827826, "post_id": 34833438, "comment_id": 81604920, "body": "@Max Dude, I was just using <code>launch()</code> and <a href=\"https://ibb.co/bsuVcm\" rel=\"nofollow noreferrer\">you can&#39;t call it</a>, I had to resort to <code>Application.launch(MyApplication::class.java, *args)</code>."}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1510847528, "post_id": 34833438, "comment_id": 81619051, "body": "@m0skit0 Your FXMain method doesn&#39;t have a static <code>launch</code> method. All I&#39;m saying is, if you do what&#39;s shown in @jenglert&#39;s example, but also include <code>import javafx.application.Application.launch</code> at the top, then you can say <code>launch(MyApplication::class.java, *args)</code>."}, {"owner": {"reputation": 461, "user_id": 347119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cf06c617361061e29abfb4dd4b79f099?s=128&d=identicon&r=PG", "display_name": "Edison Spencer", "link": "https://stackoverflow.com/users/347119/edison-spencer"}, "edited": false, "score": 0, "creation_date": 1527338324, "post_id": 34833438, "comment_id": 88096873, "body": "Awesome, thanks. In my case I already had the code like yours, the only problem was what I was passing to the <code>launch</code> function."}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 59, "last_activity_date": 1453045669, "last_edit_date": 1453045669, "creation_date": 1452987905, "answer_id": 34833438, "question_id": 34833258, "link": "https://stackoverflow.com/questions/34833258/kotlin-basic-javafx-application/34833438#34833438", "title": "Kotlin. Basic JavaFX application", "body": "<p>The code samples you provided are not equivalent: an <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\"><code>object</code> declaration</a> in Kotlin is a singleton, so it only has one instance constructed by calling the private constructor when the class is initialized. JavaFX is trying to call the constructor of the class reflectively but fails because the constructor is private as it should be.</p>\n\n<p>What you may be looking instead is a simple class declaration, with the <code>main</code> in its <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\">companion object</a>. If no explicit constructors are declared, Kotlin, like Java, will generate a default one, allowing JavaFX to instantiate the application:</p>\n\n<pre><code>class Test : Application() {\n    override fun start(stage: Stage) {\n        ...\n    }\n\n    companion object {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            launch(Test::class.java)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1369, "user_id": 237814, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7bc35b1592590c427269979845602786?s=128&d=identicon&r=PG", "display_name": "jenglert", "link": "https://stackoverflow.com/users/237814/jenglert"}, "is_accepted": false, "score": 39, "last_activity_date": 1479331321, "creation_date": 1479331321, "answer_id": 40642578, "question_id": 34833258, "link": "https://stackoverflow.com/questions/34833258/kotlin-basic-javafx-application/40642578#40642578", "title": "Kotlin. Basic JavaFX application", "body": "<pre><code>class MyApplication : Application() {\n\n   override fun start(primaryStage: Stage) {\n\n   }\n}\n\nfun main(args: Array&lt;String&gt;) {\n   Application.launch(MyApplication::class.java, *args)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 471, "user_id": 4569103, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ALOsudoJ0Sk/AAAAAAAAAAI/AAAAAAAABtk/uZC9NPt4o1E/photo.jpg?sz=128", "display_name": "masoomyf", "link": "https://stackoverflow.com/users/4569103/masoomyf"}, "is_accepted": false, "score": 1, "last_activity_date": 1550344738, "creation_date": 1550344738, "answer_id": 54726767, "question_id": 34833258, "link": "https://stackoverflow.com/questions/34833258/kotlin-basic-javafx-application/54726767#54726767", "title": "Kotlin. Basic JavaFX application", "body": "<p>Here is simple method to perform launch of Java FX Application</p>\n\n<pre><code>class MyApplication: Application(){\n    override fun start(primaryStage: Stage?){\n        //You code here\n    }\n\n    companion object{\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;){\n            launch(MyApplication::class.java, *args)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 2121116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db6d16a1462f9dcc3914ae445cba4629?s=128&d=identicon&r=PG", "display_name": "Elavrius", "link": "https://stackoverflow.com/users/2121116/elavrius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16773, "favorite_count": 4, "accepted_answer_id": 34833438, "answer_count": 3, "score": 31, "last_activity_date": 1555473257, "creation_date": 1452986418, "question_id": 34833258, "link": "https://stackoverflow.com/questions/34833258/kotlin-basic-javafx-application", "title": "Kotlin. Basic JavaFX application", "body": "<p>Trying out Kotlin lang and I had an impression that it is compatible with Java and therefore with JavaFX and i tried following:</p>\n\n<pre><code>public object TestKt: Application() {\n\n    public override fun start(stage: Stage){\n        val pane= Pane()\n        val scene=Scene(pane,200.0,200.0)\n        stage.scene = scene\n        stage.show()\n\n    }\n    @JvmStatic public fun main(args: Array&lt;String&gt;){\n        launch()\n    }\n}\n</code></pre>\n\n<p>this is basically same as Java's</p>\n\n<pre><code>public class Test extends Application {\n    @Override\n    public void start(Stage stage)  {\n        Pane pane=new Pane();\n        Scene scene=new Scene(pane, 200,200);\n        stage.setScene(scene);\n        stage.show();\n    }\n    public static  void  main(String[] args){\n        launch();\n    }\n}\n</code></pre>\n\n<p>but Kotlin gives an error: Exception in thread \"main\" java.lang.RuntimeException: Unable to construct Application instance: class Test</p>\n"}, {"tags": ["kotlin", "vert.x"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1453120648, "post_id": 34829592, "comment_id": 57449325, "body": "This is for Vertx 2?  For Vertx 3 you wouldn&#39;t do such a thing."}, {"owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1453133945, "post_id": 34829592, "comment_id": 57457975, "body": "@JaysonMinard, I&#39;m pretty sure this is Vert.x 3: <a href=\"https://github.com/vert-x3/vertx-lang-groovy/blob/master/src/main/groovy/io/vertx/lang/groovy/GroovyVerticleFactory.groovy\" rel=\"nofollow noreferrer\">github.com/vert-x3/vertx-lang-groovy/blob/master/src/main/&hellip;</a>  I know you can use solely .class files and rely on normal Kotlin compilation, but it would be very flexible if you could drop plain .kotlin files and Vert.x would know how to run it. I&#39;m still new to the framework (just found it), so maybe I&#39;ll just end up using plain Vert.x libraries (and embedded Vert.x) and see how it goes."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1453142907, "post_id": 34829592, "comment_id": 57463069, "body": "I think this is an XY Problem (<a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">xyproblem.info</a>), so I provided an answer to what I think the answer would be if you had asked X instead of Y."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1453142938, "post_id": 34829592, "comment_id": 57463084, "body": "To take the &quot;easy path of deploying a Kotlin source file verticle&quot; you picked the hardest route possible."}], "answers": [{"comments": [{"owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "edited": false, "score": 0, "creation_date": 1453196743, "post_id": 34861248, "comment_id": 57484745, "body": "You&#39;re right. The documentation is kind of confusing (mixing the old ways with the new ones), but I guess this is a common problem of mature frameworks. I accepted your answer since it solves my particular problem."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 2, "last_activity_date": 1453142784, "last_edit_date": 1453142784, "creation_date": 1453140413, "answer_id": 34861248, "question_id": 34829592, "link": "https://stackoverflow.com/questions/34829592/how-to-compile-and-use-kotlin-code-in-runtime/34861248#34861248", "title": "How to compile and use Kotlin code in runtime?", "body": "<p>This feels like an <a href=\"http://xyproblem.info/\" rel=\"nofollow\">XY Problem</a>.  You want to know how to compile Kotlin on the fly so that you can more easily use Vert.x by running from Kotlin source files instead of compiled code.  But really the recommended path for Vert.x usage is to create a simple bit of code that deploys your verticle within <strong>compiled</strong> code.</p>\n\n<p>In the question, your link for language support says Vert.x 2 in the path \"vertx.io/<strong><em>vertx2</em></strong>/language_support.html\"; which is different than how it is now done in Vert.x 3. I think you are merging two thoughts into one. First that Vert.x 3 wants you to run Java/Kotlin files from source (<em>it doesn't really; that was a Vert.x 2 thing they moved away from for compiled languages</em>), and second that you need custom language support (<em>you don't</em>).</p>\n\n<p><strong>You should try to use Vert.x 3 by running compiled code.</strong>  To do so, build your classes and run your own <code>main()</code> that <a href=\"http://vertx.io/docs/vertx-core/java/#_deploying_verticles_programmatically\" rel=\"nofollow\">deploys a verticle programatically</a>. Your code would be simple as:</p>\n\n\n\n<pre><code>import io.vertx.core.Vertx\n\nfun main(args: Array&lt;String&gt;) {\n    val vertx = Vertx.vertx()\n    vertx.deployVerticle(SomeVerticleOfMine())\n}\n</code></pre>\n\n<p>Alternatively, the <a href=\"http://vertx.io/docs/vertx-core/java/#_running_verticles_from_the_command_line\" rel=\"nofollow\">docs for running and deploying from the command-line</a> say:</p>\n\n<blockquote>\n  <p>Vert.x will compile the Java source file on the fly before running it. This is really useful for quickly prototyping verticles and great for demos. No need to set-up a Maven or Gradle build first to get going!</p>\n</blockquote>\n\n<p>And really it is indeed just for prototyping and quick testing, and it isn't any faster than letting your IDE do the same and running from the compiled classes.  You also then have debugging features of the IDE which are infinitely valuable.</p>\n\n<p><strong>For a few helper libraries for using Kotlin with Vert.x</strong>, view these options:</p>\n\n<ul>\n<li><a href=\"https://github.com/kohesive/klutter/tree/master/vertx3\" rel=\"nofollow\">Vert.x 3 module for Klutter</a> - I am the author, one of my libraries</li>\n<li><a href=\"https://github.com/cy6erGn0m/vertx3-lang-kotlin\" rel=\"nofollow\">Vert.x 3 helpers for Kotlin</a>  - by Cy6erGn0m </li>\n<li><a href=\"https://github.com/kohesive/kovert\" rel=\"nofollow\">Kovert, a REST framework for Vert.x 3</a>  - I am the author, one of my libraries</li>\n<li><a href=\"https://github.com/aesteve/nubes\" rel=\"nofollow\">Vert.x nubes</a> - not Kotlin specific, but makes Vert.x-Web friendlier for JVM languages.</li>\n</ul>\n\n<p><strong>There is a <a href=\"https://github.com/kohesive/kovert/tree/master/vertx-example\" rel=\"nofollow\">full sample project of running Vert.x + Kovert</a></strong> (specifically start with the <a href=\"https://github.com/kohesive/kovert/blob/master/vertx-example/src/main/kotlin/uy/kohesive/kovert/vertx/sample/App.kt\" rel=\"nofollow\">App class</a>).  You can look at the code of Kovert to do your own similar work of starting and running Vert.x nicely, with Promises or however you wish.  The docs for Kovert have links to code for <a href=\"https://github.com/kohesive/kovert/blob/master/vertx-jdk8/src/main/kotlin/uy/kohesive/kovert/vertx/boot/KovertVertx.kt\" rel=\"nofollow\">starting Vertx</a> and also <a href=\"https://github.com/kohesive/kovert/blob/master/vertx-jdk8/src/main/kotlin/uy/kohesive/kovert/vertx/boot/KovertVerticle.kt\" rel=\"nofollow\">starting a Verticle to use Vert.x-Web</a>, so more sample code you can read.  But it helps to understand <a href=\"https://github.com/kohesive/injekt\" rel=\"nofollow\">Injekt</a> (light-weight dependency registry), <a href=\"http://kovenant.komponents.nl/\" rel=\"nofollow\">Kovenant</a> (promises library), and <a href=\"https://github.com/kohesive/klutter/tree/master/config-typesafe#injecting-configuration-into-objects\" rel=\"nofollow\">Klutter configuration injection</a> to understand the complete sample.  </p>\n\n<p><strong>Other quick note</strong>, Vert.x has codegen support for other languages, but since you can call all of the Java version directly, it does not need to support Kotlin either.</p>\n"}, {"tags": [], "owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "is_accepted": false, "score": 2, "last_activity_date": 1488481597, "creation_date": 1488481597, "answer_id": 42563870, "question_id": 34829592, "link": "https://stackoverflow.com/questions/34829592/how-to-compile-and-use-kotlin-code-in-runtime/42563870#42563870", "title": "How to compile and use Kotlin code in runtime?", "body": "<p>Kotlin 1.1 comes with <a href=\"http://kotlinlang.org/docs/reference/whatsnew11.html#javaxscript-support\" rel=\"nofollow noreferrer\">javax.script (JSR-223)</a> support, which means you can use it as scripting engine similarly to JavaScript with Nashorn.</p>\n"}], "owner": {"reputation": 2512, "user_id": 2992899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Mu5w6.jpg?s=128&g=1", "display_name": "Czyzby", "link": "https://stackoverflow.com/users/2992899/czyzby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3632, "favorite_count": 1, "accepted_answer_id": 34861248, "answer_count": 2, "score": 8, "last_activity_date": 1583305206, "creation_date": 1452963494, "last_edit_date": 1452964910, "question_id": 34829592, "link": "https://stackoverflow.com/questions/34829592/how-to-compile-and-use-kotlin-code-in-runtime", "title": "How to compile and use Kotlin code in runtime?", "body": "<p>I'm trying to create a Kotlin <a href=\"http://vertx.io/vertx2/language_support.html\" rel=\"noreferrer\">Vert.x</a> language support module and I need a way to compile Kotlin files and load the results with a <code>ClassLoader</code>. I've tried using <code>kotlin-compiler</code> library and found <code>K2JVMCompiler</code> class, but it seems to support only command-line-style arguments with its <code>exec</code> method. Is there a way to compile a Kotlin file in runtime (possibly without having to save and read <code>.class</code> files) and immediately load the generated classes? (Kind of like <a href=\"https://github.com/vert-x/mod-lang-groovy/blob/master/src/main/groovy/org/vertx/groovy/platform/impl/GroovyVerticleFactory.groovy#L141\" rel=\"noreferrer\">Groovy</a> does.) If not, do you have any useful compiler arguments suggestions or pretty much any advices?</p>\n"}, {"tags": ["android", "android-studio", "gradle", "android-gradle-plugin", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 348, "user_id": 1535656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda030061b86a2f8117895553aad30e0?s=128&d=identicon&r=PG", "display_name": "Joris Blaak", "link": "https://stackoverflow.com/users/1535656/joris-blaak"}, "edited": false, "score": 5, "creation_date": 1453367557, "post_id": 34828919, "comment_id": 57573030, "body": "You can now upgrade to kotlin version <code>1.0.0-beta-4589</code> which works with <code>2.0.0-alpha5</code> and <code>2.0.0-alpha6</code>"}], "tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": true, "score": 8, "last_activity_date": 1452959458, "creation_date": 1452959458, "answer_id": 34828919, "question_id": 34828632, "link": "https://stackoverflow.com/questions/34828632/kotlin-android-project-failed-to-sync-gradle-project/34828919#34828919", "title": "Kotlin Android Project failed to sync Gradle Project", "body": "<p>The kotlin gradle plugin is not compatible with the latest alpha plugin of android (<code>2.0.0-alpha6</code>) or <code>alpha5</code> for that matter.</p>\n\n<p>Until this is the case, you can use <code>2.0.0-alpha3</code> instead.</p>\n"}], "owner": {"reputation": 12820, "user_id": 1031556, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b46c5b92c22c681b79a1e91825ee757b?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/1031556/stephan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 0, "accepted_answer_id": 34828919, "answer_count": 1, "score": 3, "last_activity_date": 1452959458, "creation_date": 1452957749, "question_id": 34828632, "link": "https://stackoverflow.com/questions/34828632/kotlin-android-project-failed-to-sync-gradle-project", "title": "Kotlin Android Project failed to sync Gradle Project", "body": "<p>I created an Android project with the newest Android Studio version (v2 Preview 5) and converted it into a kotlin project. Now gradle is not able to sync and build the project, see the screenshot:\n<a href=\"https://i.stack.imgur.com/rnET5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rnET5.png\" alt=\"enter image description here\"></a></p>\n\n<p>I didn't do anything to any build file and I also deleted my entire gradle cache as well as restarting, killing daemons etc. I used the newest kotlin version <code>1.0.0-beta-4584</code></p>\n\n<p>As the error message suggest I guess the reason is the kotlin plugin, so does anyone know how to solve this problem?</p>\n"}, {"tags": ["reflection", "kotlin"], "comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1452943741, "post_id": 34824324, "comment_id": 57394611, "body": "Have you considered using function references instead of calling the functions by name?"}, {"owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "reply_to_user": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1452948239, "post_id": 34824324, "comment_id": 57395891, "body": "I&#39;d like to acquire the function reference dynamically."}], "answers": [{"comments": [{"owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1452957672, "post_id": 34826394, "comment_id": 57398865, "body": "I&#39;m accepting this answer as it appears to be correct, but I&#39;m currently getting an exception: <code>kotlin.reflect.KotlinReflectionInternalError: Call is not yet supported for this function</code>. Kotlin 1.0.0-beta-4584"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1452959475, "post_id": 34826394, "comment_id": 57399427, "body": "@AmirAbiri seems that you&#39;ve hit some rough edge in <code>kotlin.reflect</code>"}, {"owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1452960491, "post_id": 34826394, "comment_id": 57399747, "body": "Yes I&#39;ve generalised the case and submitting a BR."}, {"owner": {"reputation": 938, "user_id": 2272176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f93af3ad228d7af655b209ad94eebbc?s=128&d=identicon&r=PG", "display_name": "dant3", "link": "https://stackoverflow.com/users/2272176/dant3"}, "edited": false, "score": 0, "creation_date": 1493661226, "post_id": 34826394, "comment_id": 74491286, "body": "This answer is incorrect, since such files can have custom class name and not &quot;${fileName}Kt&quot;. There is a <code>@JvmName</code> specifically for that."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 14, "last_activity_date": 1452943612, "last_edit_date": 1495541397, "creation_date": 1452943612, "answer_id": 34826394, "question_id": 34824324, "link": "https://stackoverflow.com/questions/34824324/get-function-by-name-dynamically-in-kotlin/34826394#34826394", "title": "Get function by name dynamically in Kotlin", "body": "<p>The global functions such as <code>fun myFunc11() { ... }</code> defined in file named i.e. <code>Global.kt</code> are compiled to <code>static</code> methods on a class named <code>GlobalKt</code> as described in <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#package-level-functions\" rel=\"noreferrer\">the documentation</a>.</p>\n\n<p>To get a function reference by name you'll need to load the class that defines it. If you know the file name that defines the function reference you're trying to find you can do:</p>\n\n<pre><code>fun getFunctionFromFile(fileName: String, funcName: String): KFunction&lt;*&gt;? {\n    val selfRef = ::getFunctionFromFile\n    val currentClass = selfRef.javaMethod!!.declaringClass\n    val classDefiningFunctions = currentClass.classLoader.loadClass(\"${fileName}Kt\")\n    val javaMethod  = classDefiningFunctions.methods.find { it.name == funcName &amp;&amp; Modifier.isStatic(it.modifiers)}\n    return javaMethod?.kotlinFunction\n}\n</code></pre>\n\n<p>Then you can find and call function defined in <code>Global.kt</code> file:</p>\n\n<pre><code>fun myFunc11() { println(\"Very useful function 11\") }\n</code></pre>\n\n<p>like so:</p>\n\n<pre><code>val kFunction = getFunctionFromFile(\"Global\", \"myFunc11\")\nkFunction?.call()\n</code></pre>\n\n<p>However the above is pretty useless. A better solution would be to search through all classes available in classpath and suffixed with <code>Kt</code> to reach all <em>global</em> functions. However due to nature of jvm class loaders this is a bit more involved as described in <a href=\"https://stackoverflow.com/a/520339/155213\">this answer</a>.</p>\n"}], "owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8152, "favorite_count": 0, "accepted_answer_id": 34826394, "answer_count": 1, "score": 18, "last_activity_date": 1452961164, "creation_date": 1452926581, "last_edit_date": 1452961164, "question_id": 34824324, "link": "https://stackoverflow.com/questions/34824324/get-function-by-name-dynamically-in-kotlin", "title": "Get function by name dynamically in Kotlin", "body": "<p>How can I dynamically get a function by name in Kotlin ?</p>\n\n<p>i.e:</p>\n\n<pre><code>fun myFunc11() { println(\"Very useful function 11\") }\n\nval funcName = \"myFunc\" + 11\nval funcRef = getFunction(funcName)\n\nfuncRef()\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong> The accepted answer appears to be correct, however the code is currently hitting some bug in Kotlin. Bug report submitted: <a href=\"https://youtrack.jetbrains.com/issue/KT-10690\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-10690</a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1452943636, "post_id": 34819334, "comment_id": 57394591, "body": "You should never make a Fragment an inner class because it needs a zero-args constructor. More on that topic: <a href=\"http://stackoverflow.com/questions/15571010/fragment-inner-class-should-be-static\" title=\"fragment inner class should be static\">stackoverflow.com/questions/15571010/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2097, "user_id": 437270, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/147e475f000342a37f4026fe9eb8dc46?s=128&d=identicon&r=PG", "display_name": "John D.", "link": "https://stackoverflow.com/users/437270/john-d"}, "edited": false, "score": 0, "creation_date": 1452894793, "post_id": 34819544, "comment_id": 57383515, "body": "You know what, that all makes sense. After posting the question, I thought it might also be a Java limitation. I&#39;ll just have to find a different approach. Thanks!"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1452907330, "post_id": 34819544, "comment_id": 57387410, "body": "Think of it this way:  the inner class needs an owner, how would your static initializer know who the owner should be?  (the outer class)"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 15, "last_activity_date": 1452891208, "last_edit_date": 1495541738, "creation_date": 1452890639, "answer_id": 34819544, "question_id": 34819334, "link": "https://stackoverflow.com/questions/34819334/kotlin-factory-on-inner-nested-class/34819544#34819544", "title": "Kotlin Factory on Inner Nested Class", "body": "<p>You can have:</p>\n\n<pre><code>class OuterClass {\n    fun getItemFragment(position: Int): Fragment {\n        return InnerClass.Factory.newInstance(position)\n    }\n\n    class InnerClass : Fragment() {\n        companion object Factory {\n            fun newInstance(position: Int): InnerClass {\n                var ic: InnerClass = InnerClass()\n                return ic\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>However the following <strong>will not compile</strong> in Kotlin:</p>\n\n<pre><code>class Parent {\n    inner class Nested {\n        companion object Factory { \n        }\n    }\n}\n</code></pre>\n\n<p>For the same reasons the following <strong>will not compile</strong> in Java:</p>\n\n<pre><code>public class Parent {\n    public class Nested {\n        public static boolean create(){\n            return false;\n        }\n    }\n}\n</code></pre>\n\n<p>The culprit here is that nested <code>inner</code> classes in Kotlin, as well as nested non static classes in Java <strong>have an implicit reference to parent</strong> class instance. Since Kotlin aims to be highly interoperable with Java it follows the same rule. </p>\n\n<p>Please see following questions for more in-depth explanation:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1953530/why-does-java-prohibit-static-fields-in-inner-classes\">Why does Java prohibit static fields in inner classes?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/975134/why-cant-we-have-static-method-in-a-non-static-inner-class\">Why can't we have static method in a (non-static) inner class?\nup vote</a></li>\n</ul>\n"}], "owner": {"reputation": 2097, "user_id": 437270, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/147e475f000342a37f4026fe9eb8dc46?s=128&d=identicon&r=PG", "display_name": "John D.", "link": "https://stackoverflow.com/users/437270/john-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8847, "favorite_count": 1, "accepted_answer_id": 34819544, "answer_count": 1, "score": 5, "last_activity_date": 1452891208, "creation_date": 1452889628, "question_id": 34819334, "link": "https://stackoverflow.com/questions/34819334/kotlin-factory-on-inner-nested-class", "title": "Kotlin Factory on Inner Nested Class", "body": "<p>I am trying to create a nested inner class in Kotlin with a companion object factory method (the equivalent of a static factory method in Java). Here's a simplified version of my code.</p>\n\n<pre><code>class OuterClass {\n\n    var myData:List&lt;MyData&gt; = List&lt;&gt;() //gets populated elsewhere\n\n    fun getItemFragment(position:Int) : Fragment() {\n        return InnerClass.Factory.newInstance(position)\n    }\n\n    inner class InnerClass : Fragment() {\n\n        companion object Factory {\n\n            fun newInstance(position:Int) : InnerClass {\n                var ic : InnerClass = InnerClass()\n                var bundle:Bundle = Bundle()\n                bundle.putInt(\"index\", position)\n                ic.arguments = bundle\n                return ic\n            }\n\n        }\n\n        override fun onCreateView(inflater:LayoutInflater, container: ViewGroup, savedInstanceState:Bundle): View? {\n            //create and return view, omitted. Need access to myData\n    }\n}\n</code></pre>\n\n<p>The compilier highlights \"companion\", saying \"Modifier companion is not applicable inside inner class\" and it also highlights the InnerClass() call, saying \"Expression is inaccessible from a nested class Factory\", use \"inner\" keyword to make the class inner.</p>\n\n<p>How can I achieve what I'm trying to do here with the equivalent of a static factory method in Java?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 3, "last_activity_date": 1452889154, "creation_date": 1452889154, "answer_id": 34819211, "question_id": 34818501, "link": "https://stackoverflow.com/questions/34818501/android-4-x-verifyerror-caused-by-kotlin-method/34819211#34819211", "title": "Android 4.x VerifyError caused by Kotlin method", "body": "<p>Kotlin beta 4 is incompatible with Android Studio's Instant Run feature. You need to turn off Instant Run. The incompatibility will be resolved in the next update of Kotlin.</p>\n"}], "owner": {"reputation": 33, "user_id": 5796239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52264da4e17ffca4f29e9575a656e7c1?s=128&d=identicon&r=PG&f=1", "display_name": "kpob", "link": "https://stackoverflow.com/users/5796239/kpob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 34819211, "answer_count": 1, "score": 2, "last_activity_date": 1452889154, "creation_date": 1452886470, "question_id": 34818501, "link": "https://stackoverflow.com/questions/34818501/android-4-x-verifyerror-caused-by-kotlin-method", "title": "Android 4.x VerifyError caused by Kotlin method", "body": "<p>Recently I've started to play with Kotlin language and I try to run a very simple app. I have two files: MainActivity.kt and VersionSupport.kt with a few kotlin methods.</p>\n\n<p>I don't have any problems with the app on Nexus 5 (a real device and emulator) with Android 5.x and 6.0. Problems begin when I try to run the app on 4.x versions of the OS.</p>\n\n<p>In my MainActivity:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    textView.apply { text = \"Hello kotlin!\" }\n\n    supportsKitKat { longToast(\"kitKat\") }\n}\n</code></pre>\n\n<p>And here is the support methods implementation</p>\n\n<pre><code>public fun supportsKitKat(code: () -&gt; Unit) {\n    supportsVersion(code, Build.VERSION_CODES.KITKAT)\n}\n\nprivate fun supportsVersion(code: () -&gt; Unit, sdk: Int) {\n    if(Build.VERSION.SDK_INT &gt;= sdk) {\n        code.invoke();\n}\n</code></pre>\n\n<p>I use android studio 2.0 preview 3b and kotlin 1.0.0-beta-4583</p>\n\n<pre><code>FATAL EXCEPTION: main java.lang.VerifyError: pl/kpob/bootstrap/utils/VersionSupportKt\n     at pl.kpob.bootstrap.MainActivity.onCreate(MainActivity.kt:21)\n     at android.app.Activity.performCreate(Activity.java:5008)\n     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)\n     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)\n     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)\n     at android.app.ActivityThread.access$600(ActivityThread.java:130)\n     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)\n     at android.os.Handler.dispatchMessage(Handler.java:99)\n     at android.os.Looper.loop(Looper.java:137)\n     at android.app.ActivityThread.main(ActivityThread.java:4745)\n     at java.lang.reflect.Method.invokeNative(Native Method)\n     at java.lang.reflect.Method.invoke(Method.java:511)\n     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)\n     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\n     at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 8990, "user_id": 624814, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3a863d626cfeba2251bdf48ee8b38b7a?s=128&d=identicon&r=PG", "display_name": "SMBiggs", "link": "https://stackoverflow.com/users/624814/smbiggs"}, "edited": false, "score": 0, "creation_date": 1565908841, "post_id": 34803897, "comment_id": 101501858, "body": "After all this time, there&#39;s still no definitive simple list of &quot;character strings you should not use&quot; for kotlin.  Sheesh!"}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 3, "last_activity_date": 1452838213, "creation_date": 1452838213, "answer_id": 34805275, "question_id": 34803897, "link": "https://stackoverflow.com/questions/34803897/what-are-the-reserved-keywords-in-kotlin/34805275#34805275", "title": "What are the Reserved Keywords in Kotlin?", "body": "<p>There is a grammar reference <a href=\"https://kotlinlang.org/docs/reference/grammar.html\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/grammar.html</a></p>\n\n<p>So anything in double quotes is a keyword (like <code>\"class\"</code>) or an operator (like <code>\"%\"</code>). However many keywords are \"soft\" (like <code>\"file\"</code>), meaning that they depend on their syntactic position and still may be used as function names, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 2, "creation_date": 1495381316, "post_id": 34812556, "comment_id": 75217828, "body": "what is the difference between a keyword and a soft keyword?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 1, "creation_date": 1495395575, "post_id": 34812556, "comment_id": 75222350, "body": "@lmiguelvargasf A soft keyword is treated as a keyword only in certain context, and not anywhere else. For example, you can declare a <code>val override = 1</code>, but <code>override </code> is also treated as a a keyword when it is in front of <code>fun</code> in a function declaration."}, {"owner": {"reputation": 8990, "user_id": 624814, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3a863d626cfeba2251bdf48ee8b38b7a?s=128&d=identicon&r=PG", "display_name": "SMBiggs", "link": "https://stackoverflow.com/users/624814/smbiggs"}, "edited": false, "score": 0, "creation_date": 1595530808, "post_id": 34812556, "comment_id": 111515322, "body": "Thus you should NEVER use a &quot;soft&quot; keyword as an identifier because it&#39;s easy to change the context as code gets modified over time and people tend to forget these minute details.  Aaannnd therefore there&#39;s really no such thing as a &quot;soft&quot; keyword--they are just keywords.  And there&#39;s a LOT of &#39;em."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 15, "last_activity_date": 1502214102, "last_edit_date": 1502214102, "creation_date": 1452865818, "answer_id": 34812556, "question_id": 34803897, "link": "https://stackoverflow.com/questions/34803897/what-are-the-reserved-keywords-in-kotlin/34812556#34812556", "title": "What are the Reserved Keywords in Kotlin?", "body": "<p><strong>UPD:</strong> The keyword reference was added to the Kotlin docs: <a href=\"http://kotlinlang.org/docs/reference/keyword-reference.html\" rel=\"nofollow noreferrer\">(here)</a></p>\n\n<hr>\n\n<p>An auto-generated list of <em>hard</em> keywords for the current version can be found in Kotlin Github repo: <a href=\"https://github.com/JetBrains/kotlin/blob/master/core/descriptors/src/org/jetbrains/kotlin/renderer/KeywordStringsGenerated.java\" rel=\"nofollow noreferrer\">(here)</a></p>\n\n<p>There are more soft keywords, which behave like keywords in certain context, like <code>it</code>, <code>field</code>, <code>object</code>, access &amp; member modifiers.</p>\n\n<p>More about context in which soft keywords are treated as keywords can be found in the <a href=\"https://kotlinlang.org/docs/reference/grammar.html\" rel=\"nofollow noreferrer\">grammar reference</a>, along with the whole grammar, including hard keywords in their places.</p>\n"}, {"tags": [], "owner": {"reputation": 8990, "user_id": 624814, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3a863d626cfeba2251bdf48ee8b38b7a?s=128&d=identicon&r=PG", "display_name": "SMBiggs", "link": "https://stackoverflow.com/users/624814/smbiggs"}, "is_accepted": false, "score": 0, "last_activity_date": 1596213776, "creation_date": 1596213776, "answer_id": 63195905, "question_id": 34803897, "link": "https://stackoverflow.com/questions/34803897/what-are-the-reserved-keywords-in-kotlin/63195905#63195905", "title": "What are the Reserved Keywords in Kotlin?", "body": "<p>Quick def: Reserved words in programming languages (sometimes called keywords) are character strings that have special and specific uses only.  Compilers use these words as landmarks when parsing code.  Programmers should not name variables, functions, nor classes using these words.  Of course, using them in comments is perfectly fine.</p>\n<p>There are <strong>LOTS</strong> of keywords in Kotlin.  But there's no definitive number because:</p>\n<ol>\n<li>The definition of keywords (reserved words) in Kotlin is poorly\ndefined.</li>\n<li>Kotlin is so new, the number of keywords keeps changing (and not getting smaller!).</li>\n</ol>\n<p>The &quot;official&quot; keywords are generally divided up into categories: hard, soft, and operators.  Soft keywords are character strings that may be a keyword, depending on the context.  Any programmer with any experience will never take the risk of using a soft keyword for obvious reasons.  So at the time the number of keywords in Kotlin are</p>\n<p>31 (hard) + 48 (soft) + 41 (operators) = some number too big to keep track of</p>\n<p>Yup, that's 120 keywords.  Or 79 if you don't count operators.  By comparison, K&amp;R's C language has 28 keywords with 22 operators = 50.  And that's good enough to write Unix.</p>\n<p>And we haven't even started talking about <em>Annotations</em> (the sly way of slipping in lots and lots of keywords without really having to officially declare them)!  Like Kotlin's parent, Java, Kotlin uses Annotations liberally, and there is no limit to the number of them--you can even make your own!</p>\n<p>That said, a list of &quot;required&quot; annotations should be included as part of Kotlin's reserved words, but I'm feeling lazy.  Let's just say that there are about two dozen.  This brings our total of reserved words to... 144 (waaaaay more than I can keep track of).  Thanks kotlin, for simplifying my life!</p>\n"}], "owner": {"reputation": 371, "user_id": 4140467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc04dc9b703b06b95a820dccf1ae5676?s=128&d=identicon&r=PG&f=1", "display_name": "borrom", "link": "https://stackoverflow.com/users/4140467/borrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6105, "favorite_count": 2, "accepted_answer_id": 34812556, "answer_count": 3, "score": 12, "last_activity_date": 1596213776, "creation_date": 1452828276, "last_edit_date": 1452889668, "question_id": 34803897, "link": "https://stackoverflow.com/questions/34803897/what-are-the-reserved-keywords-in-kotlin", "title": "What are the Reserved Keywords in Kotlin?", "body": "<p>I've walked through <a href=\"https://kotlinlang.org/docs/reference\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference</a> but I could not find reserved keyword, used in Kotlin. How many keywords does Kotlin have?\nAs long as we know Java has its own keyword list like here: <a href=\"https://i.stack.imgur.com/U3mNp.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/U3mNp.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["dsl", "builder", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1452838721, "post_id": 34797366, "comment_id": 57353263, "body": "good question! But why 2 answers?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1452858451, "post_id": 34797366, "comment_id": 57362648, "body": "I wrote one, then I wrote another."}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 21, "last_activity_date": 1487076494, "last_edit_date": 1487076494, "creation_date": 1452797142, "answer_id": 34797367, "question_id": 34797366, "link": "https://stackoverflow.com/questions/34797366/in-kotlin-how-do-i-add-extension-methods-to-another-class-but-only-visible-in/34797367#34797367", "title": "In Kotlin, how do I add extension methods to another class, but only visible in a certain context?", "body": "<h2>The Basics:</h2>\n\n<p>In Kotlin, we tend to use lambdas passed into other classes to give them \"scope\" or to have behaviour that happens before and after the lambda is executed, including error handling.  Therefore you first need to change the code for <code>Transaction</code> to provide scope.   Here is a modified <code>Transaction</code> class:</p>\n\n\n\n<pre><code>class Transaction(withinTx: Transaction.() -&gt; Unit) {\n    init {\n        start()\n        try {\n            // now call the user code, scoped to this transaction class\n            this.withinTx()\n            commit()\n        }\n        catch (ex: Throwable) {\n            rollback()\n            throw ex\n        }\n\n    }\n    private fun Transaction.start() { ... }\n\n    fun Entity.save(tx: Transaction) { ... }\n    fun Entity.delete(tx: Transaction) { ... }\n\n    fun Transaction.save(entity: Entity) { entity.save(this) }\n    fun Transaction.delete(entity: Entity) { entity.delete(this) }\n\n    fun Transaction.commit() { ... }\n    fun Transaction.rollback() { ... }\n}\n</code></pre>\n\n<p>Here we have a transaction that when created, requires a lambda that does the processing within the transaction, if no exception is thrown it auto commits the transaction.  (The constructor of the <code>Transaction</code> class is acting like a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#higher-order-functions\" rel=\"noreferrer\">Higher-Order Function</a>)</p>\n\n<p>We have also moved the extension functions for <code>Entity</code> to be within <code>Transaction</code> so that these extension functions will not be seen nor callable without being in the context of this class.  This includes the methods of <code>commit()</code> and <code>rollback()</code> which can only be called now from within the class itself because they are now extension functions scoped within the class.  </p>\n\n<p>Since the lambda being received is an extension function to <code>Transaction</code> it operates in the context of that class, and therefore sees the extensions. (see: <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-literals-with-receiver\" rel=\"noreferrer\">Function Literals with Receiver</a>)</p>\n\n<p>This old code is now invalid, with the compiler giving us an error:</p>\n\n<pre><code>fun changePerson(person: Person) {\n    person.name = \"Fred\" \n    person.save() // ERROR: unresolved reference: save()\n}\n</code></pre>\n\n<p>And now you would write the code instead to exist within a <code>Transaction</code> block:</p>\n\n<pre><code>fun actsInMovie(actor: Person, film: Movie) {\n    Transaction {   // optional parenthesis omitted\n        if (actor.winsAwards()) {\n            film.addActor(actor)\n            save(film)\n        } else {\n            rollback()\n        }\n    }\n}\n</code></pre>\n\n<p>The lambda being passed in is inferred to be an extension function on <code>Transaction</code> since it has no formal declaration.</p>\n\n<p>To chain a bunch of these \"actions\" together within a transaction, just create a series of extension functions that can be used within a transaction, for example:</p>\n\n<pre><code>fun Transaction.actsInMovie(actor: Person, film: Movie) {\n    film.addActor(actor)\n    save(film)\n}\n</code></pre>\n\n<p>Create more like this, and then use them in the lambda passed to the Transaction...</p>\n\n<pre><code>Transaction { \n   actsInMovie(harrison, starWars)\n   actsInMovie(carrie, starWars)\n   directsMovie(abrams, starWars)\n   rateMovie(starWars, 5)\n}\n</code></pre>\n\n<p>Now back to the original question, we have the transaction methods and the entity methods only appearing at the correct moments in time.  And as a side effect of using lambdas or anonymous functions is that we end up exploring new ideas about how our code is composed.</p>\n"}, {"comments": [{"owner": {"reputation": 1542, "user_id": 175336, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/7fe68c9daffbca53269b76a381ecf1d0?s=128&d=identicon&r=PG", "display_name": "Bruno Santos", "link": "https://stackoverflow.com/users/175336/bruno-santos"}, "edited": false, "score": 0, "creation_date": 1452916486, "post_id": 34797391, "comment_id": 57389032, "body": "Sounds almost like a GoF State Pattern. :) Maybe you could extract a pattern out of this for Kotlin."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 1542, "user_id": 175336, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/7fe68c9daffbca53269b76a381ecf1d0?s=128&d=identicon&r=PG", "display_name": "Bruno Santos", "link": "https://stackoverflow.com/users/175336/bruno-santos"}, "edited": false, "score": 0, "creation_date": 1453078697, "post_id": 34797391, "comment_id": 57431978, "body": "Haven&#39;t heard GoF in a long time."}, {"owner": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "edited": false, "score": 0, "creation_date": 1502417863, "post_id": 34797391, "comment_id": 78211517, "body": "Old question, but great answer! I&#39;m trying to solve a problem and I&#39;ve figured it out with something like this solution. Is there any other examples/articles you know of? I just don&#39;t even know a name for this"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "edited": false, "score": 0, "creation_date": 1502882143, "post_id": 34797391, "comment_id": 78382073, "body": "@PrestonGarno You would want to look up DSL Builder articles and topics around Kotlin.  This is the area it most likely to discuss these topics."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 12, "last_activity_date": 1452859375, "last_edit_date": 1495535374, "creation_date": 1452797240, "answer_id": 34797391, "question_id": 34797366, "link": "https://stackoverflow.com/questions/34797366/in-kotlin-how-do-i-add-extension-methods-to-another-class-but-only-visible-in/34797391#34797391", "title": "In Kotlin, how do I add extension methods to another class, but only visible in a certain context?", "body": "<p>See the <a href=\"https://stackoverflow.com/a/34797367/3679676\">other answer</a> for the main topic and the basics, <em>here be deeper waters...</em></p>\n\n<h2>Related advanced topics:</h2>\n\n<p>We do not solve everything you might run into here.  It is easy to make some extension function appear in the context of another class.  But it isn't so easy to make this work for two things at the same time.  For example, if I wanted the <code>Movie</code> method <code>addActor()</code> to only appear while inside a <code>Transaction</code> block, it is more difficult.  The <code>addActor()</code> method cannot have two receivers at the same time.  So we either have a method that receives two parameters <code>Transaction.addActorToMovie(actor, movie)</code> or we need another plan.  </p>\n\n<p>One way to do this is to use intermediary objects by which we can extend the system.  Now, the following example may or may not be sensible, but it shows how to go this extra level of exposing functions only as desired.  Here is the code, where we change <code>Transaction</code> to implement an interface <code>Transactable</code> so that we can now <a href=\"https://kotlinlang.org/docs/reference/delegation.html\" rel=\"nofollow noreferrer\">delegate to the interface</a> whenever we want.  </p>\n\n<p>When we add new functionality we can create new implementations of <code>Transactable</code> that expose these functions and also holds temporary state.  Then a simple helper function can make it easy to access these hidden new classes.  All additions can be done without modifying the core original classes.</p>\n\n<p><strong>Core classes:</strong></p>\n\n\n\n<pre><code>interface Entity {}\n\ninterface Transactable {\n    fun Entity.save(tx: Transactable)\n    fun Entity.delete(tx: Transactable)\n\n    fun Transactable.commit()\n    fun Transactable.rollback()\n\n    fun Transactable.save(entity: Entity) { entity.save(this) }\n    fun Transactable.delete(entity: Entity) { entity.save(this) }\n}\n\n\nclass Transaction(withinTx: Transactable.() -&gt; Unit) : Transactable {\n    init {\n        start()\n        try {\n            withinTx()\n            commit()\n        } catch (ex: Throwable) {\n            rollback()\n            throw ex\n        }\n    }\n\n    private fun start() { ... }\n\n    override fun Entity.save(tx: Transactable) { ... }\n    override fun Entity.delete(tx: Transactable) { ... }\n\n    override fun Transactable.commit() { ... }\n    override fun Transactable.rollback() { ... }\n}\n\n\nclass Person : Entity { ... }\nclass Movie : Entity { ... }\n</code></pre>\n\n<p><strong>Later, we decide to add:</strong></p>\n\n<pre><code>class MovieTransactions(val movie: Movie, \n                        tx: Transactable, \n                        withTx: MovieTransactions.()-&gt;Unit): Transactable by tx {\n    init {\n        this.withTx()\n    }\n\n    fun swapActor(originalActor: Person, replacementActor: Person) {\n        // `this` is the transaction\n        // `movie` is the movie\n        movie.removeActor(originalActor)\n        movie.addActor(replacementActor)\n        save(movie)\n    }\n\n    // ...and other complex functions\n}\n\nfun Transactable.forMovie(movie: Movie, withTx: MovieTransactions.()-&gt;Unit) {\n    MovieTransactions(movie, this, withTx)\n}\n</code></pre>\n\n<p><strong>Now using the new functionality:</strong></p>\n\n<pre><code>fun castChanges(swaps: Pair&lt;Person, Person&gt;, film: Movie) {\n    Transaction {\n        forMovie(film) {\n            swaps.forEach { \n                // only available here inside forMovie() lambda\n                swapActor(it.first, it.second) \n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Or this whole thing could just have been a top level extension function on <code>Transactable</code> if you didn't mind it being at the top level, not in a class, and cluttering up the namespace of the package.  </p>\n\n<p>For other examples of using intermediary classes, see:</p>\n\n<ul>\n<li>in Klutter TypeSafe config module, an intermediary object is used to store the state of \"which property\" can be acted upon, so it can be passed around and also changes what other methods are available. <code>config.value(\"something\").asString()</code> (<a href=\"https://github.com/kohesive/klutter/blob/master/config-typesafe-jdk6/src/main/kotlin/uy/klutter/config/typesafe/TypesafeConfig_Ext.kt#L20\" rel=\"nofollow noreferrer\">code link</a>)</li>\n<li>in Klutter Netflix Graph module, an intermediary object is used to transition to another part of the DSL grammar <code>connect(node).edge(relation).to(otherNode)</code>.  (<a href=\"https://github.com/kohesive/klutter/blob/master/netflix-graph-jdk6/src/main/kotlin/uy/klutter/graph/netflix/internal/Building.kt#L103-L105\" rel=\"nofollow noreferrer\">code link</a>)  The <a href=\"https://github.com/kohesive/klutter/blob/master/netflix-graph-jdk6/src/test/kotlin/uy/klutter/graph/netflix/TestNetflixGraph.kt\" rel=\"nofollow noreferrer\">test cases</a> in the same module show more uses including how even operators such as <code>get()</code> and <code>invoke()</code> are available only in context.</li>\n</ul>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3727, "favorite_count": 9, "accepted_answer_id": 34797367, "answer_count": 2, "score": 23, "last_activity_date": 1504766069, "creation_date": 1452797142, "last_edit_date": 1610973576, "question_id": 34797366, "link": "https://stackoverflow.com/questions/34797366/in-kotlin-how-do-i-add-extension-methods-to-another-class-but-only-visible-in", "title": "In Kotlin, how do I add extension methods to another class, but only visible in a certain context?", "body": "<p>In Kotlin, I want to add extension methods to a class, for example to class <code>Entity</code>.  But I only want to see these extensions when <code>Entity</code> is within a transaction, otherwise hidden.  For example, if I define these classes and extensions:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>interface Entity {}\n\nfun Entity.save() {}\nfun Entity.delete() {}\n\nclass Transaction {\n    fun start() {}\n    fun commit() {}\n    fun rollback() {}\n}\n</code></pre>\n<p>I now can accidentally call <code>save()</code> and <code>delete()</code> at any time, but I only want them available after the <code>start()</code> of a transaction and no longer after <code>commit()</code> or <code>rollback()</code>?  Currently I can do this, which is wrong:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>someEntity.save()       // DO NOT WANT TO ALLOW HERE\nval tx = Transaction()\ntx.start()\nsomeEntity.save()       // YES, ALLOW\ntx.commit()\nsomeEntity.delete()     // DO NOT WANT TO ALLOW HERE\n</code></pre>\n<p>How do I make them appear and disappear in the correct context?</p>\n<p><strong>Note:</strong> <em>this question is intentionally written and answered by the author (<a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the idiomatic answers to commonly asked Kotlin topics are present in SO.  Also to clarify some really old answers written for alphas of Kotlin that are not accurate for current-day Kotlin.  Other answers are also welcome, there are many styles of how to answer this!</em></p>\n"}]