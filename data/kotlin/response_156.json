[{"tags": ["android", "asynchronous", "async-await", "kotlin", "coroutine"], "answers": [{"comments": [{"owner": {"reputation": 1517, "user_id": 5818559, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a8db40e9e89fa941f9fe9a12204e8016?s=128&d=identicon&r=PG&f=1", "display_name": "zasaz", "link": "https://stackoverflow.com/users/5818559/zasaz"}, "edited": false, "score": 0, "creation_date": 1515114059, "post_id": 48087538, "comment_id": 83187288, "body": "Perfect! Solution 1 is working!! Can you explain what is CommonPool? Also i&#39;ve made some solution that works but i don&#39;t know if it&#39;s correct, i&#39;ve added this code after adding the requestQueue:           requesQueue.addRequestFinishedListener&lt;Boolean&gt; {             cl.refresh()         }"}, {"owner": {"reputation": 481, "user_id": 5435312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HjWfX.jpg?s=128&g=1", "display_name": "garywzh", "link": "https://stackoverflow.com/users/5435312/garywzh"}, "reply_to_user": {"reputation": 1517, "user_id": 5818559, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a8db40e9e89fa941f9fe9a12204e8016?s=128&d=identicon&r=PG&f=1", "display_name": "zasaz", "link": "https://stackoverflow.com/users/5818559/zasaz"}, "edited": false, "score": 1, "creation_date": 1515119925, "post_id": 48087538, "comment_id": 83188651, "body": "It&#39;s like a threadpool, run the read() method on the background threadpool so it will not block your mainthread"}], "tags": [], "owner": {"reputation": 481, "user_id": 5435312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HjWfX.jpg?s=128&g=1", "display_name": "garywzh", "link": "https://stackoverflow.com/users/5435312/garywzh"}, "is_accepted": true, "score": 1, "last_activity_date": 1515029748, "creation_date": 1515029748, "answer_id": 48087538, "question_id": 48085829, "link": "https://stackoverflow.com/questions/48085829/coroutine-calling-api-android/48087538#48087538", "title": "Coroutine calling API Android", "body": "<p>Usually you shouldn't call a <code>async function</code></p>\n\n<pre><code>requesQueue.add&lt;String&gt;(stringRequest)\n</code></pre>\n\n<p>in the <code>async</code> coroutine builder</p>\n\n<pre><code>async {}\n</code></pre>\n\n<p>Sulution #1</p>\n\n<p>you can change your <code>read()</code> method to a synchronous request. \n<a href=\"https://stackoverflow.com/questions/16904741/can-i-do-a-synchronous-request-with-volley\">Can I do a synchronous request with volley?\n</a> \nand run it with <code>CommonPool</code></p>\n\n<pre><code>async(CommonPool) {\n    read()\n}\n</code></pre>\n\n<p>Solution #2</p>\n\n<p>wrap your async http call into a <code>suspend function</code></p>\n\n<p>I am NOT familiar with Volley, so maybe the code needs tweak</p>\n\n<pre><code>suspend fun read() {\n    return suspendCancellableCoroutine { continuation -&gt;\n\n        val stringRequest = object : StringRequest(Request.Method.POST, URL, Response.Listener&lt;String&gt; { s -&gt;\n            try {\n                val array = JSONArray(s)\n                for (i in 0..array.length() - 1) {\n                    val objectAccount = array.getJSONObject(i)\n                    val account = Account(\n                            objectAccount.getString(value),\n                            objectAccount.getString(value),\n                            objectAccount.getString(value))\n                    listAccount.add(account)\n                }\n            } catch (e: JSONException) {\n                e.printStackTrace()\n\n                // notice this\n                continuation.resumeWithException(e)\n            }\n            // notice this\n            continuation.resume()\n\n        }, Response.ErrorListener { error: VolleyError? -&gt;\n            Log.e(\"error\", \"error\")\n\n            // notice this\n            if (!continuation.isCancelled)\n                continuation.resumeWithException()\n\n        }) {\n            override fun getParams(): Map&lt;String, String&gt; {\n                val params = HashMap&lt;String, String&gt;()\n                params.put(\"password\", value)\n                params.put(\"idaccount\", value)\n                return params\n            }\n        }\n\n        val requesQueue = Volley.newRequestQueue(this)\n        requesQueue.add&lt;String&gt;(stringRequest)\n\n        continuation.invokeOnCompletion {\n            if (continuation.isCancelled)\n                try {\n                    cancel()\n                } catch (ex: Throwable) {\n                    //Ignore cancel exception\n                }\n        }\n    }\n}\n</code></pre>\n\n<p>and call it like this</p>\n\n<pre><code>suspend fun loadData(){\n\n    read()\n\n    val showScreen = async { refreshList() }\n    showScreen.join()\n    showScreen.await()\n}\n</code></pre>\n"}], "owner": {"reputation": 1517, "user_id": 5818559, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a8db40e9e89fa941f9fe9a12204e8016?s=128&d=identicon&r=PG&f=1", "display_name": "zasaz", "link": "https://stackoverflow.com/users/5818559/zasaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "accepted_answer_id": 48087538, "answer_count": 1, "score": 2, "last_activity_date": 1515029748, "creation_date": 1515017079, "question_id": 48085829, "link": "https://stackoverflow.com/questions/48085829/coroutine-calling-api-android", "title": "Coroutine calling API Android", "body": "<p>I have to call an API asynchronously. To do it i'm using a coroutine, but i have to wait until the API is called to load the data. The problem is the next:</p>\n\n<p>The await is not working as I want, it's not waiting until the API gives all the data.</p>\n\n<p>Is the await what I need? Here is the code:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_see)\n    launch { loaddata() }\n    /* some other code here*/\n}\n\nsuspend fun loadData(){\n    val readData = async { read() }\n    readData.join()\n    readData.await()\n    val showScreen = async { refreshList() }\n    showScreen.join()\n    showScreen.await()\n}\n\n\nfun read(){\n    val stringRequest = object : StringRequest(Request.Method.POST, URL, Response.Listener&lt;String&gt;{ s -&gt;\n        try {\n                val array = JSONArray(s)\n                for (i in 0..array.length() - 1) {\n                    val objectAccount = array.getJSONObject(i)\n                    val account = Account(\n                            objectAccount.getString(value),\n                            objectAccount.getString(value),\n                            objectAccount.getString(value))\n                    listAccount.add(account)\n                }\n        }catch (e: JSONException){\n            e.printStackTrace()\n        }\n    }, Response.ErrorListener { error: VolleyError? -&gt; Log.e(\"error\", \"error\")  }){\n        override fun getParams(): Map&lt;String, String&gt; {\n            val params = HashMap&lt;String, String&gt;()\n            params.put(\"password\", value)\n            params.put(\"idaccount\", value)\n            return params\n        }\n    }\n    val  requesQueue = Volley.newRequestQueue(this)\n    requesQueue.add&lt;String&gt;(stringRequest)\n}\n</code></pre>\n"}, {"tags": ["android", "android-recyclerview", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25774, "user_id": 885028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xJkDj.jpg?s=128&g=1", "display_name": "aga", "link": "https://stackoverflow.com/users/885028/aga"}, "is_accepted": true, "score": 1, "last_activity_date": 1515017474, "last_edit_date": 1515017474, "creation_date": 1515014003, "answer_id": 48085207, "question_id": 48084520, "link": "https://stackoverflow.com/questions/48084520/recyclerview-listener-gets-called-on-its-own/48085207#48085207", "title": "RecyclerView listener gets called on its own", "body": "<p>If you study the source code of the <code>CompoundButton</code> widget (which is the <code>Checkbox</code>'s superclass), you'll find out there is a method called <code>setChecked(boolean)</code> which calls the provided <code>CheckedChangeListener</code>. </p>\n\n<p>Now, the <code>setChecked()</code> is called by the <code>CompoundButton</code> itself at different times - when the widget's instance state is restored, inside the <code>onInitializeAccessibilityEventInternal()</code> method, in <code>CompoundButton</code>'s constructor, etc. </p>\n\n<p>So, that's why the listener is called even if you didn't tap the checkbox.</p>\n\n<p>Which options do you have?</p>\n\n<ol>\n<li>Use <code>OnClickListener</code> instead and check whether the checkbox is checked or not inside <code>onClick()</code> method.</li>\n<li>Use <code>CheckedChangedListener</code> and call the <code>checkbox.isPressed()</code> method inside the <code>onCheckedChanged()</code> method to find out whether it was user-initiated change or not.</li>\n<li>Write your own version of the <code>Checkbox</code> class (probably based on the one in Android SDK) which does not call this listener unless it's sure the change occurred after the user clicked the checkbox.</li>\n</ol>\n"}], "owner": {"reputation": 607, "user_id": 6638520, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/47a6e186c66377ff35beaf5640abc67b?s=128&d=identicon&r=PG&f=1", "display_name": "Esteban", "link": "https://stackoverflow.com/users/6638520/esteban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 48085207, "answer_count": 1, "score": 0, "last_activity_date": 1515017474, "creation_date": 1515010565, "last_edit_date": 1515010987, "question_id": 48084520, "link": "https://stackoverflow.com/questions/48084520/recyclerview-listener-gets-called-on-its-own", "title": "RecyclerView listener gets called on its own", "body": "<p>I am setting a listener to my <code>RecyclerView checkbox</code>. When the <code>checkbox</code> is clicked it should mark the item as favorite in the DB. But the listener gets called on its own even without clicking.</p>\n\n<p>Here's the <code>Recyclerview</code></p>\n\n<pre><code>    class KafanaAdapter(private val kafani: List&lt;Kafana&gt;, private val listener: OnItemClickListener) :\n        RecyclerView.Adapter&lt;KafanaAdapter.KafanaViewHolder&gt;() {\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): KafanaViewHolder {\n        val inflater = LayoutInflater.from(parent.context)\n        val binder = ItemKafanaBinding.inflate(inflater, parent, false)\n        return KafanaViewHolder(binder, listener)\n    }\n\n    override fun onBindViewHolder(holder: KafanaViewHolder, position: Int) {\n        holder.bind(kafani[holder.adapterPosition])\n    }\n\n    override fun getItemCount(): Int {\n        return kafani.size\n    }\n\n    class KafanaViewHolder constructor(private val binder: ItemKafanaBinding, private val listener: OnItemClickListener) : RecyclerView.ViewHolder(binder.root) {\n\n        fun bind(kafana: Kafana) {\n            binder.kafana = kafana\n            binder.tvKafanaTitle.text = kafana.name\n            binder.tvKafanaAddress.text = kafana.address\n            binder.ivCall.setOnClickListener { listener.onKafanaClicked(kafana) }\n            binder.checkBox.setOnCheckedChangeListener { _, isChecked -&gt;\n                kafana.isFavorite = isChecked\n                listener.onKafanaFavoriteClicked(kafana)\n            }\n        }\n    }\n\n    interface OnItemClickListener {\n        fun onKafanaClicked(kafana: Kafana)\n        fun onKafanaFavoriteClicked(kafana: Kafana)\n    }\n}\n</code></pre>\n\n<p>And here's the part of my <code>Fragment</code> where the interface is implemented:</p>\n\n<pre><code>override fun onKafanaFavoriteClicked(kafana: Kafana) {\n    doAsync {\n        if (kafana.isFavorite) mViewModel.setFavorite(kafana, 0) else mViewModel.setFavorite(kafana, 1)\n        uiThread {\n            toast(\"Favorite\")\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-android", "android-architecture-components", "android-architecture"], "comments": [{"owner": {"reputation": 2225, "user_id": 2517849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCGSi.jpg?s=128&g=1", "display_name": "Naveed", "link": "https://stackoverflow.com/users/2517849/naveed"}, "edited": false, "score": 0, "creation_date": 1515010533, "post_id": 48084383, "comment_id": 83143806, "body": "Are you attaching a lifecycle owner to your <code>loginResponse</code>?  Can you show the code from you <code>activity&#47;fragment</code> that invokes this call from your viewmodel?"}, {"owner": {"reputation": 1785, "user_id": 2362301, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/vQUlv.jpg?s=128&g=1", "display_name": "AmmY", "link": "https://stackoverflow.com/users/2362301/ammy"}, "reply_to_user": {"reputation": 2225, "user_id": 2517849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCGSi.jpg?s=128&g=1", "display_name": "Naveed", "link": "https://stackoverflow.com/users/2517849/naveed"}, "edited": false, "score": 0, "creation_date": 1515010696, "post_id": 48084383, "comment_id": 83143869, "body": "I am not using lifecycleOwner."}, {"owner": {"reputation": 1785, "user_id": 2362301, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/vQUlv.jpg?s=128&g=1", "display_name": "AmmY", "link": "https://stackoverflow.com/users/2362301/ammy"}, "reply_to_user": {"reputation": 2225, "user_id": 2517849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCGSi.jpg?s=128&g=1", "display_name": "Naveed", "link": "https://stackoverflow.com/users/2517849/naveed"}, "edited": false, "score": 0, "creation_date": 1515010758, "post_id": 48084383, "comment_id": 83143897, "body": "I am calling  mViewModel.callLoginApi(hash) from Activity. where hash is HashMap of data"}, {"owner": {"reputation": 1032, "user_id": 6937018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e65bf2597073b0926a1acf7e104d9fad?s=128&d=identicon&r=PG&f=1", "display_name": "Shahbaz Ahmed", "link": "https://stackoverflow.com/users/6937018/shahbaz-ahmed"}, "edited": false, "score": 2, "creation_date": 1515011610, "post_id": 48084383, "comment_id": 83144220, "body": "Are you observing the loginResponse in your LifecycleOwner class?"}, {"owner": {"reputation": 2225, "user_id": 2517849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCGSi.jpg?s=128&g=1", "display_name": "Naveed", "link": "https://stackoverflow.com/users/2517849/naveed"}, "edited": false, "score": 0, "creation_date": 1515016131, "post_id": 48084383, "comment_id": 83146149, "body": "@AmmY you need to observe <code>loginResponse</code> to  trigger it.  Live data requires a lifecycle owner which I&#39;m assuming in your case will be your activity."}, {"owner": {"reputation": 1785, "user_id": 2362301, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/vQUlv.jpg?s=128&g=1", "display_name": "AmmY", "link": "https://stackoverflow.com/users/2362301/ammy"}, "reply_to_user": {"reputation": 2225, "user_id": 2517849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCGSi.jpg?s=128&g=1", "display_name": "Naveed", "link": "https://stackoverflow.com/users/2517849/naveed"}, "edited": false, "score": 0, "creation_date": 1515045859, "post_id": 48084383, "comment_id": 83153531, "body": "@Naveed I didn&#39;t implement observe in my lifecycleOwner class."}], "answers": [{"comments": [{"owner": {"reputation": 1032, "user_id": 6937018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e65bf2597073b0926a1acf7e104d9fad?s=128&d=identicon&r=PG&f=1", "display_name": "Shahbaz Ahmed", "link": "https://stackoverflow.com/users/6937018/shahbaz-ahmed"}, "reply_to_user": {"reputation": 1785, "user_id": 2362301, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/vQUlv.jpg?s=128&g=1", "display_name": "AmmY", "link": "https://stackoverflow.com/users/2362301/ammy"}, "edited": false, "score": 0, "creation_date": 1515055436, "post_id": 48084860, "comment_id": 83157344, "body": "Glad I could help."}], "tags": [], "owner": {"reputation": 1032, "user_id": 6937018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e65bf2597073b0926a1acf7e104d9fad?s=128&d=identicon&r=PG&f=1", "display_name": "Shahbaz Ahmed", "link": "https://stackoverflow.com/users/6937018/shahbaz-ahmed"}, "is_accepted": true, "score": 6, "last_activity_date": 1608963870, "last_edit_date": 1608963870, "creation_date": 1515012283, "answer_id": 48084860, "question_id": 48084383, "link": "https://stackoverflow.com/questions/48084383/livedata-addsource-onchanged-event-not-calling-android/48084860#48084860", "title": "LiveData.addSource onChanged event not calling Android", "body": "<p>Check out the official docs for <code>addSource()</code> method <a href=\"https://developer.android.com/reference/androidx/lifecycle/MediatorLiveData#addSource(androidx.lifecycle.LiveData%3CS%3E,%20androidx.lifecycle.Observer%3C?%20super%20S%3E)\" rel=\"nofollow noreferrer\">MediatorLiveData reference docs</a>, its written</p>\n<blockquote>\n<p>onChanged callback will be called only when this MediatorLiveData is active.</p>\n</blockquote>\n<p>Please make sure that you are observing the <code>loginResponse</code> <code>LiveData</code> in your LifecycleOwner class appropriately.</p>\n"}], "owner": {"reputation": 1785, "user_id": 2362301, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/vQUlv.jpg?s=128&g=1", "display_name": "AmmY", "link": "https://stackoverflow.com/users/2362301/ammy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2786, "favorite_count": 0, "accepted_answer_id": 48084860, "answer_count": 1, "score": 2, "last_activity_date": 1608963870, "creation_date": 1515009841, "question_id": 48084383, "link": "https://stackoverflow.com/questions/48084383/livedata-addsource-onchanged-event-not-calling-android", "title": "LiveData.addSource onChanged event not calling Android", "body": "<p>I am working with Android Archi+Retrofit+RxAndroid in Kotlin. I need to update my Data object when get response from server. But livedata.addSource's onChanged is not calling. </p>\n\n<p>I am taking help from Git code:- <a href=\"https://github.com/shahbazahmed1269/AndroidGithubIssues\" rel=\"nofollow noreferrer\">https://github.com/shahbazahmed1269/AndroidGithubIssues</a></p>\n\n<p>Here is my code in Kotlin:- </p>\n\n<pre><code>class LoginRepository : BaseRepository() {\n\nfun callLoginApi(data: HashMap&lt;String, String&gt;): LiveData&lt;LoginResponse&gt; {\n\n    val liveData: MutableLiveData&lt;LoginResponse&gt; = MutableLiveData&lt;LoginResponse&gt;()\n\n//        val call = mApiService.getLoginUser(data)\n\n    mApiService.getLoginUser(data)\n            .subscribeOn(Schedulers.newThread())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(\n                    { user -&gt;\n                        liveData.value = user\n                        Log.e(\"response\", user.toString())\n                    },\n                    { error -&gt;\n                        liveData.value = LoginResponse(error = error.localizedMessage)\n                        Log.e(\"Error\", error.message)\n\n                    })\n    return liveData\n}\n}\n\n\nopen class LoginViewModel : ViewModel() {\nlateinit var loginResponse : MediatorLiveData&lt;LoginResponse&gt;\nlateinit var loginRepo:LoginRepository;\ninit {\n    loginResponse = MediatorLiveData&lt;LoginResponse&gt;()\n    loginRepo = LoginRepository()\n}\n\nfun callLoginApi(data: HashMap&lt;String, String&gt;) {\n//        val loginResponse  = MediatorLiveData&lt;LoginResponse&gt;()\n\n    loginResponse.addSource(\n            loginRepo.callLoginApi(data),\n            { loginResponse -&gt; Log.e(\"Response  model\",loginResponse.toString()) }\n    )\n}\n</code></pre>\n\n<p>}</p>\n\n<p>My Response from LoginRepository is printing but not from ViewModel class.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2225, "user_id": 3474528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bNcDK.png?s=128&g=1", "display_name": "Charles Durham", "link": "https://stackoverflow.com/users/3474528/charles-durham"}, "is_accepted": false, "score": 2, "last_activity_date": 1515005945, "creation_date": 1515005945, "answer_id": 48083524, "question_id": 48083501, "link": "https://stackoverflow.com/questions/48083501/outofmemory-exception-when-using-kotlin-class-java-canonicalname/48083524#48083524", "title": "OutOfMemory exception when using Kotlin ::class.java.canonicalName", "body": "<p>You're creating a new <code>KotlinFilePicker()</code> which has it's own TAG which creates a new <code>KotlinFilePicker()</code> ect.</p>\n\n<p>To fix it use <code>KotlinFilePicker::class.java.canonicalName</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 25774, "user_id": 885028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xJkDj.jpg?s=128&g=1", "display_name": "aga", "link": "https://stackoverflow.com/users/885028/aga"}, "is_accepted": true, "score": 3, "last_activity_date": 1515005953, "creation_date": 1515005953, "answer_id": 48083527, "question_id": 48083501, "link": "https://stackoverflow.com/questions/48083501/outofmemory-exception-when-using-kotlin-class-java-canonicalname/48083527#48083527", "title": "OutOfMemory exception when using Kotlin ::class.java.canonicalName", "body": "<p>Shouldn't it be </p>\n\n<pre><code>private val TAG = KotlinFilePicker::class.java.canonicalName\n</code></pre>\n\n<p>instead?</p>\n\n<p>Since your stacktrace states the following:  </p>\n\n<pre><code>Failed to allocate a 170 byte allocation with 68 free bytes and 68B until OOM\" (recursive case)\n</code></pre>\n\n<p>Which means we have an endless recursion here. Taking a closer look at the code, we see that you create an instance of a class, which tries to create the <code>TAG</code> property, which in turn creates another instance of <code>KotlinFilePicker</code>... until all memory exhausted.</p>\n"}], "owner": {"reputation": 7766, "user_id": 4517450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AFIyx.jpg?s=128&g=1", "display_name": "vikas kumar", "link": "https://stackoverflow.com/users/4517450/vikas-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 48083527, "answer_count": 2, "score": 0, "last_activity_date": 1515005953, "creation_date": 1515005775, "question_id": 48083501, "link": "https://stackoverflow.com/questions/48083501/outofmemory-exception-when-using-kotlin-class-java-canonicalname", "title": "OutOfMemory exception when using Kotlin ::class.java.canonicalName", "body": "<p>I'm getting Out Of Memory exception when running this line of code</p>\n\n<pre><code>private val TAG = KotlinFilePicker()::class.java.canonicalName\n</code></pre>\n\n<p>and when disabled it's working fine  </p>\n\n<pre><code>Throwing OutOfMemoryError \"Failed to allocate a 170 byte allocation with 68 free bytes and 68B until OOM\" (recursive case)\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art: \"main\" prio=5 tid=1 Runnable\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:   | group=\"main\" sCount=0 dsCount=0 obj=0x7581c250 self=0xb4f07800\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:   | sysTid=20584 nice=-11 cgrp=apps sched=0/0 handle=0xb6fd7ec8\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:   | state=R schedstat=( 0 0 0 ) utm=1394 stm=35 core=1 HZ=100\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:   | stack=0xbe57a000-0xbe57c000 stackSize=8MB\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:   | held mutexes= \"mutator lock\"(shared held)\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:     at android.support.v4.app.FragmentHostCallback.&lt;init&gt;(FragmentHostCallback.java:46)\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:     at android.support.v4.app.FragmentHostCallback.&lt;init&gt;(FragmentHostCallback.java:63)\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:     at android.support.v4.app.FragmentActivity$HostCallbacks.&lt;init&gt;(FragmentActivity.java:871)\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:     at android.support.v4.app.FragmentActivity.&lt;init&gt;(FragmentActivity.java:100)\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:     at android.support.v7.app.AppCompatActivity.&lt;init&gt;(AppCompatActivity.java:61)\n01-04 00:14:55.044 20584-20584/com.androidbuffer.kotlinfilepickersample E/art:     at com.androidbuffer.kotlinfilepicker.KotlinFilePicker.&lt;init&gt;(KotlinFilePicker.kt:19)\n01-04 00:14:55.044 20584-20584/com.android\n</code></pre>\n\n<p>can someone point out what's wrong doing this way </p>\n"}, {"tags": ["java", "android", "android-recyclerview", "android-viewpager", "kotlin"], "comments": [{"owner": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1515001942, "post_id": 48082501, "comment_id": 83139619, "body": "Instead of setting height as wrap_content to your image_view in  <code>fragment_carousel_video.xml</code> try to add some height first. Add check is it showing image now or not"}, {"owner": {"reputation": 790, "user_id": 4745989, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6643e04a849e22e6d40b92548559e07?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie Niekirk", "link": "https://stackoverflow.com/users/4745989/charlie-niekirk"}, "reply_to_user": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1515002068, "post_id": 48082501, "comment_id": 83139692, "body": "I&#39;m still just seeing the dots after adding 200dp of height.  Maybe the <code>ViewPager</code> itself is not being displayed?"}, {"owner": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1515002503, "post_id": 48082501, "comment_id": 83139905, "body": "Hey i have one question, in <code>PostsListAdapter.kt</code> at <code>getItem()</code> in both <code>media_types</code> you are showing <code>CarouselVideoFragment</code> why ?"}, {"owner": {"reputation": 790, "user_id": 4745989, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6643e04a849e22e6d40b92548559e07?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie Niekirk", "link": "https://stackoverflow.com/users/4745989/charlie-niekirk"}, "reply_to_user": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1515002714, "post_id": 48082501, "comment_id": 83140025, "body": "Thanks for pointing out, the problem still persists after fixing"}, {"owner": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1515003135, "post_id": 48082501, "comment_id": 83140239, "body": "Hey try to add some <code>height</code> to <code>carousel_viewpager</code>. And again a question why you are using a <code>tablayout</code> ?"}, {"owner": {"reputation": 790, "user_id": 4745989, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6643e04a849e22e6d40b92548559e07?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie Niekirk", "link": "https://stackoverflow.com/users/4745989/charlie-niekirk"}, "reply_to_user": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1515003209, "post_id": 48082501, "comment_id": 83140279, "body": "I&#39;m using it because I want to show how many images/videos there are in an album."}, {"owner": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "reply_to_user": {"reputation": 790, "user_id": 4745989, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6643e04a849e22e6d40b92548559e07?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie Niekirk", "link": "https://stackoverflow.com/users/4745989/charlie-niekirk"}, "edited": false, "score": 0, "creation_date": 1515003253, "post_id": 48082501, "comment_id": 83140300, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/162446/discussion-between-heisen-berg-and-charlie-niekirk\">continue this discussion in chat</a>."}], "owner": {"reputation": 790, "user_id": 4745989, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6643e04a849e22e6d40b92548559e07?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie Niekirk", "link": "https://stackoverflow.com/users/4745989/charlie-niekirk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515001499, "creation_date": 1515001499, "question_id": 48082501, "link": "https://stackoverflow.com/questions/48082501/viewpager-imageview-not-displaying-in-fragment", "title": "ViewPager ImageView not displaying in Fragment", "body": "<p>I have a <code>ViewPager</code> containing 3 Fragments, one of which called <code>PostsFragment</code> contains a <code>RecyclerView</code>.  The <code>RecyclerView</code> holds 3 different view types depending on the type of post, either a photo, a video or an Album.  An album can contain any number of photos and videos and the idea is to be able to swipe between them, but I am only seeing my <code>TabLayout</code> dots indicating how many photos/videos there are, not the images themselves.  </p>\n\n<p><strong>CarouselVideoFragment.kt</strong></p>\n\n<pre><code>class CarouselVideoFragment() : Fragment() {\n\ncompanion object Factory {\n    fun newInstance() : CarouselVideoFragment = CarouselVideoFragment()\n}\n\nlateinit var carouselMedia : InstagramCarouselMedia\nprivate val videoThumb : ImageView by bindView(R.id.carousel_photo)\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n\n    val bundle = arguments\n    carouselMedia = bundle?.get(\"media\") as InstagramCarouselMedia\n\n    return inflater.inflate(R.layout.fragment_carousel_video, container, false)\n\n}\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n\n    videoThumb.visibility = View.VISIBLE\n    Log.d(\"CAROUSEL\", \"URL: ${carouselMedia.image_versions2.candidates[0].url}\")\n    Picasso.with(context).load(carouselMedia.image_versions2.candidates[0].url).into(videoThumb)\n    videoThumb.setOnClickListener { _ -&gt;\n        val intent = Intent(Intent.ACTION_VIEW)\n        val data = Uri.parse(carouselMedia.video_versions[0].url)\n        intent.setDataAndType(data, \"video/*\")\n        ContextCompat.startActivity(context!!, intent, null)\n    }\n\n    super.onViewCreated(view, savedInstanceState)\n}\n}\n</code></pre>\n\n<p><strong>CarouselPhotoFragment.kt</strong></p>\n\n<pre><code>class CarouselPhotoFragment : Fragment() {\n\ncompanion object Factory {\n    fun newInstance() : CarouselPhotoFragment = CarouselPhotoFragment()\n}\n\nprivate val carouselPhoto : ImageView by bindView(R.id.carousel_photo)\nlateinit var carouselMedia : InstagramCarouselMedia\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n\n    val args = arguments\n    carouselMedia = args?.get(\"media\") as InstagramCarouselMedia\n\n    return inflater.inflate(R.layout.fragment_carousel_photo, container, false)\n\n}\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n\n    carouselPhoto.visibility = View.VISIBLE\n    Log.d(\"CAROUSEL\", \"URL: ${carouselMedia.image_versions2.candidates[0].url}\")\n    Picasso.with(context).load(carouselMedia.image_versions2.candidates[0].url).into(carouselPhoto)\n\n    super.onViewCreated(view, savedInstanceState)\n}\n}\n</code></pre>\n\n<p><strong>PostsListAdapter.kt</strong></p>\n\n<pre><code>class PostsListAdapter(private val postsFrag : PostsFragment,\n                     private val items : List&lt;InstagramTimelineFeedItem&gt;) : RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n\noverride fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n\n    when(holder.itemViewType) {\n        1 -&gt; {\n            val viewHolder = holder as ViewHolder\n\n            val item = items[position]\n\n            if(item.media_or_ad != null) {\n\n                viewHolder.username.text = item.media_or_ad.user.username\n                Picasso.with(postsFrag.activity).load(item.media_or_ad.user.profile_pic_url).noFade().into(viewHolder.profilePic)\n                Picasso.with(postsFrag.activity).load(item.media_or_ad.image_versions2.candidates[0].url).into(viewHolder.postImage)\n\n                if(item.media_or_ad.caption != null) {\n\n                    viewHolder.postCaption.text = item.media_or_ad.caption.get(\"text\") as String\n\n                }\n\n            }\n        }\n        2 -&gt; {\n            val viewHolder = holder as ViewHolderVideo\n\n            val item = items[position]\n\n            if(item.media_or_ad != null) {\n\n                viewHolder.username.text = item.media_or_ad.user.username\n                Picasso.with(postsFrag.activity).load(item.media_or_ad.user.profile_pic_url).noFade().into(viewHolder.profilePic)\n                Picasso.with(postsFrag.activity).load(item.media_or_ad.image_versions2.candidates[0].url).into(viewHolder.postVideoThumb)\n\n                viewHolder.postVideoThumb.setOnClickListener { _ -&gt;\n                    val intent = Intent(android.content.Intent.ACTION_VIEW)\n                    val data = Uri.parse(item.media_or_ad.video_versions[0].url)\n                    intent.setDataAndType(data, \"video/*\")\n                    startActivity(postsFrag.context!!, intent, null)\n                }\n\n                if(item.media_or_ad.caption != null) {\n\n                    viewHolder.postCaption.text = item.media_or_ad.caption.get(\"text\") as String\n\n                }\n\n            }\n        }\n        else -&gt; {\n            // Album type\n            val viewHolder = holder as ViewHolderCarousel\n            val item = items[position]\n\n            viewHolder.username.text = item.media_or_ad.user.username\n            Picasso.with(postsFrag.activity).load(item.media_or_ad.user.profile_pic_url).noFade().into(viewHolder.profilePic)\n\n            val adapter = CarouselAdapter(postsFrag.childFragmentManager, item.media_or_ad.carousel_media)\n            viewHolder.viewPager.adapter = adapter\n            viewHolder.tabs.setupWithViewPager(viewHolder.viewPager)\n\n            viewHolder.caption.text = item.media_or_ad.caption.get(\"text\").toString()\n        }\n    }\n\n}\n\noverride fun getItemViewType(position: Int): Int {\n    val item = items[position]\n    if(item.media_or_ad == null)\n        return 5\n    return item.media_or_ad.media_type\n}\n\noverride fun getItemCount(): Int {\n    return items.size\n}\n\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\n    when(viewType) {\n        1 -&gt; return ViewHolder(LayoutInflater.from(postsFrag.activity).inflate(R.layout.post_list_item, parent, false))\n        2 -&gt; return ViewHolderVideo(LayoutInflater.from(postsFrag.activity).inflate(R.layout.post_list_item_video, parent, false))\n        else -&gt; {\n            return ViewHolderCarousel(LayoutInflater.from(postsFrag.activity).inflate(R.layout.post_list_item_carousel, parent, false))\n        }\n    }\n}\n\ninner class CarouselAdapter(fm: FragmentManager,\n                      val carouselMedia : List&lt;InstagramCarouselMedia&gt;) : FragmentPagerAdapter(fm) {\n\n    override fun getCount(): Int {\n        return carouselMedia.size\n    }\n\n    override fun getItem(position: Int): Fragment {\n\n        Log.d(\"ADAPTER\", \"Type: ${carouselMedia[position].media_type}\")\n\n        if(carouselMedia[position].media_type == 1) {\n            val frag = CarouselVideoFragment.newInstance()\n            val args = Bundle()\n            args.putSerializable(\"media\", carouselMedia[position])\n            frag.arguments = args\n            return frag\n        } else if(carouselMedia[position].media_type == 2) {\n            val frag = CarouselVideoFragment.newInstance()\n            val args = Bundle()\n            args.putSerializable(\"media\", carouselMedia[position])\n            frag.arguments = args\n            return frag\n        }\n\n        return Fragment()\n\n    }\n}\n\nclass ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n\n    val profilePic : CircleImageView by bindView(R.id.profile_image)\n    val username : TextView by bindView(R.id.username)\n    val postImage : ImageView by bindView(R.id.post_image)\n    val postCaption : TextView by bindView(R.id.post_caption)\n\n}\n\nclass ViewHolderVideo(itemView: View) : RecyclerView.ViewHolder(itemView) {\n\n    val profilePic : CircleImageView by bindView(R.id.profile_image)\n    val username : TextView by bindView(R.id.username)\n    val postCaption : TextView by bindView(R.id.post_caption)\n    val postVideoThumb : ImageView by bindView(R.id.video_thumb)\n\n}\n\nclass ViewHolderCarousel(itemView : View) : RecyclerView.ViewHolder(itemView) {\n\n    val profilePic : CircleImageView by bindView(R.id.profile_image)\n    val username : TextView by bindView(R.id.username)\n    val viewPager : ViewPager by bindView(R.id.carousel_viewpager)\n    val tabs : TabLayout by bindView(R.id.carousel_tabs)\n    val caption : TextView by bindView(R.id.post_caption)\n\n}\n}\n</code></pre>\n\n<p><strong>post_list_item_carousel.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:orientation=\"vertical\"&gt;\n\n&lt;LinearLayout\n    android:id=\"@+id/header\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"horizontal\"\n    android:gravity=\"center_vertical\"\n    android:padding=\"12dp\"&gt;\n\n    &lt;de.hdodenhof.circleimageview.CircleImageView\n        android:id=\"@+id/profile_image\"\n        android:layout_width=\"50dp\"\n        android:layout_height=\"50dp\"\n        android:layout_gravity=\"center_vertical\"/&gt;\n\n    &lt;TextView\n        android:id=\"@+id/username\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:textSize=\"16sp\"\n        android:layout_marginStart=\"10dp\"\n        android:layout_gravity=\"center_vertical\"/&gt;\n\n&lt;/LinearLayout&gt;\n\n&lt;android.support.design.widget.TabLayout\n    android:id=\"@+id/carousel_tabs\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    app:tabGravity=\"center\"\n    app:tabIndicatorHeight=\"0dp\"\n    app:tabBackground=\"@drawable/tab_selector\"\n    android:layout_gravity=\"center_horizontal\" /&gt;\n\n&lt;android.support.v4.view.ViewPager\n    android:id=\"@+id/carousel_viewpager\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/post_caption\"\n    android:layout_width=\"320dp\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"center_horizontal\"\n    android:layout_marginTop=\"10dp\"\n    android:layout_marginBottom=\"10dp\"/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p><strong>fragment_carousel_video.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"&gt;\n\n&lt;ImageView\n    android:id=\"@+id/carousel_photo\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p><strong>fragment_carousel_photo.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"&gt;\n\n&lt;ImageView\n    android:id=\"@+id/carousel_photo\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_centerInParent=\"true\"/&gt;\n\n&lt;ImageView\n    android:src=\"@drawable/play_button\"\n    android:layout_width=\"55dp\"\n    android:layout_height=\"55dp\"\n    android:layout_centerInParent=\"true\"/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>What I have right now:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YQEVK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YQEVK.png\" alt=\"The 3 dots should have an image (inside a viewpager) above them\"></a></p>\n"}, {"tags": ["android", "dependency-injection", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 6, "creation_date": 1514999184, "post_id": 48081881, "comment_id": 83138179, "body": "<code>fun inject(any: Any)</code> You&#39;re going to have to be concrete. That&#39;s <code>fun inject(app: MyApplication)</code>."}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1515054325, "post_id": 48081881, "comment_id": 83156863, "body": "what if i want to inject other kotlin classes? i want to be able to inject any class in the project that needs dependency injection"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1515055114, "post_id": 48081881, "comment_id": 83157200, "body": "That&#39;s not how DI works. Philosophically it&#39;s about making concious decisions. Something along the lines of &quot;yes, I am aware that this component can inject into this class&quot;. Technically the component needs a list of classes it&#39;s going to inject. Those classes are definitely going to be end consumers such as activities or application, something that&#39;s created for you by Android, and you inject it after it&#39;s been created. Other than that you&#39;ll use @Inject annotated constructors. Follow the official user guide."}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1515059169, "post_id": 48081881, "comment_id": 83159401, "body": "So if I have created a class called Myclass I simply need to edit the component and add fun inject(myclass : Myclass )?"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 1, "creation_date": 1515060899, "post_id": 48081881, "comment_id": 83160436, "body": "You only need to manually inject classes where you yourself don&#39;t call a constructor, such as Activity. If you created a class called <code>Myclass</code> you&#39;d typically use constructor injection to inject its fields. Read here: <a href=\"https://google.github.io/dagger/users-guide\" rel=\"nofollow noreferrer\">google.github.io/dagger/users-guide</a> Then to obtain an instance you&#39;d 1) declare property <code>@Inject lateinit var myclass: MyClass</code> in an Activity or Application (or other class instantiated by Android) so it can be injected 2) again use constructor injection."}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1515167216, "post_id": 48081881, "comment_id": 83209987, "body": "Ok so i tried your suggestion and still it wont detect the sharedPreferences. i tried it on an activity instead of a Application class and no joy, it cant find sharedPreference. will update the question"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1515172933, "post_id": 48081881, "comment_id": 83213104, "body": "This looks very much correct... Try clean &amp; rebuild."}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1515404516, "post_id": 48081881, "comment_id": 83273311, "body": "i fixed it by adding the mainClass inject type on the other component i created. it seems you need to add it to each component i make if the activity uses MyClassA that inside uses MyClassB injection."}], "answers": [{"comments": [{"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1515281274, "post_id": 48127727, "comment_id": 83242962, "body": "Wow this is nice. I&#39;ll give this a proper look. One thing I hate about Dagger is that you can&#39;t create a base activity that does this injection and just extend it and all the inject modules and components defined in the base activity"}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1515405060, "post_id": 48127727, "comment_id": 83273619, "body": "So i just checked out your examples below and got a question. Do i need to create a ActivityModule for each activity i use? Seems more of a hassle then to simply add that activity as a new inject method in the component?  Is there a way to just use a base activity or class to do all the injections?"}, {"owner": {"reputation": 1267, "user_id": 6026222, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uvycL.jpg?s=128&g=1", "display_name": "aleksandrbel", "link": "https://stackoverflow.com/users/6026222/aleksandrbel"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1515410265, "post_id": 48127727, "comment_id": 83276579, "body": "Actually it is not such a big hassle with this kind of a solution. I also though like this when I only started with Dagger. But latter I came up with the conclusion that in every Module for each Activity you will need to specify different instances and for better use of Dagger it will be important to use Scopes for each function you provide in the graph. Here you can read about scopes: <a href=\"http://frogermcs.github.io/building-userscope-with-dagger2/\" rel=\"nofollow noreferrer\">frogermcs.github.io/building-userscope-with-dagger2</a>"}, {"owner": {"reputation": 1267, "user_id": 6026222, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uvycL.jpg?s=128&g=1", "display_name": "aleksandrbel", "link": "https://stackoverflow.com/users/6026222/aleksandrbel"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1515433602, "post_id": 48127727, "comment_id": 83289868, "body": "And actually there are also such classes DaggerApplication, DaggerAppCompatActivity, DaggerFragment and some others that simplifies the process of injection"}, {"owner": {"reputation": 1267, "user_id": 6026222, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uvycL.jpg?s=128&g=1", "display_name": "aleksandrbel", "link": "https://stackoverflow.com/users/6026222/aleksandrbel"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 1, "creation_date": 1515505287, "post_id": 48127727, "comment_id": 83318216, "body": "I have done a github project for better view. <a href=\"https://github.com/Belka1000867/Dagger2Kotlin\" rel=\"nofollow noreferrer\">github.com/Belka1000867/Dagger2Kotlin</a>"}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1515540102, "post_id": 48127727, "comment_id": 83336346, "body": "ahh thanks! i will check this out. You have been of great help!"}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 1, "creation_date": 1515600024, "post_id": 48127727, "comment_id": 83363042, "body": "After carefully analysing your code and applying the same workflow on my project, i get a IllegalStateException saying that one of my bindings is not resoved for BindingKey(my view callback presenter). i then tried to remove the scoped @Singleton i had on the binding in question from the  module and it then explains that i cannot reference a scoped binding from an unscoped subComponent"}, {"owner": {"reputation": 1267, "user_id": 6026222, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uvycL.jpg?s=128&g=1", "display_name": "aleksandrbel", "link": "https://stackoverflow.com/users/6026222/aleksandrbel"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 1, "creation_date": 1515657370, "post_id": 48127727, "comment_id": 83385252, "body": "If I understand correctly you had an @Singleton scope in the subcomponent, right? But singletons better to create in the Application module, so it will not be destroyed. And the scope can be only one for each component you provide. And about components there is a good article <a href=\"http://frogermcs.github.io/building-userscope-with-dagger2/\" rel=\"nofollow noreferrer\">frogermcs.github.io/building-userscope-with-dagger2</a> ."}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1515671770, "post_id": 48127727, "comment_id": 83393889, "body": "Yes that was issue. i changed the scope of the acitity layer modules and dependencies to a custom one. That did the trick"}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1516724399, "post_id": 48127727, "comment_id": 83801417, "body": "Update. so when i tried using a Fragment instead of an activity, this approach did not seem to inject the variables using same approach as doing it with activities using ActivityBindingModule"}, {"owner": {"reputation": 1267, "user_id": 6026222, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uvycL.jpg?s=128&g=1", "display_name": "aleksandrbel", "link": "https://stackoverflow.com/users/6026222/aleksandrbel"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1516781127, "post_id": 48127727, "comment_id": 83824620, "body": "Do you use DaggerSupportFragment as super class of your fragment? Also check in that project on github I am using injection for fragments."}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1559122703, "post_id": 48127727, "comment_id": 99318811, "body": "The problem and solution clearly indicates why Dagger is a piece of garbage that should never have been introduced into Android to start with. An overly complex piece of crap - and for what - unit testing?? lol. Just use a damn tool that mocks out classes when testing."}, {"owner": {"reputation": 791, "user_id": 3633680, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/fda27760a656e10425f8af068eb16fe0?s=128&d=identicon&r=PG", "display_name": "vidalbenjoe", "link": "https://stackoverflow.com/users/3633680/vidalbenjoe"}, "edited": false, "score": 0, "creation_date": 1594220609, "post_id": 48127727, "comment_id": 111051781, "body": "Works for me by simply adding   val appComponent = DaggerAppComponent.builder()             .application(this)             .build()         appComponent.inject(this)"}], "tags": [], "owner": {"reputation": 1267, "user_id": 6026222, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uvycL.jpg?s=128&g=1", "display_name": "aleksandrbel", "link": "https://stackoverflow.com/users/6026222/aleksandrbel"}, "is_accepted": true, "score": 12, "last_activity_date": 1515505403, "last_edit_date": 1515505403, "creation_date": 1515244627, "answer_id": 48127727, "question_id": 48081881, "link": "https://stackoverflow.com/questions/48081881/dagger-2-not-injecting-sharedpreference/48127727#48127727", "title": "Dagger 2 not injecting sharedPreference", "body": "<p>You have done it a little bit incorrect. First of all now there is dagger-android that helps with the problem of principle that solves the problem that components (such as Activities) should not know about how the injection happens.</p>\n\n<p>you can read it here: <a href=\"https://medium.com/@iammert/new-android-injector-with-dagger-2-part-1-8baa60152abe\" rel=\"noreferrer\">https://medium.com/@iammert/new-android-injector-with-dagger-2-part-1-8baa60152abe</a></p>\n\n<p>Just to be sure that dagger dependencies are in the Android project:</p>\n\n<pre><code>android {\n     kapt {\n        generateStubs = true\n    }\n}\n\ncompile \"com.google.dagger:dagger:2.13\"\ncompile \"com.google.dagger:dagger-android:2.13\"\ncompile \"com.google.dagger:dagger-android-support:2.13\"\nkapt \"com.google.dagger:dagger-compiler:2.13\"\nkapt \"com.google.dagger:dagger-android-processor:2.13\"\n</code></pre>\n\n<p>Your mistake is that you didn't tell to your graph that you want to make injections into the MainActivity. In the best way you should create <code>Subcomponent</code> for MainActivity, connect it with another Module for MainActivity that have injections that you want to inject into the MainActivity, set in your AppComponent the connection with Subcomponent and only than in MainAcitivy onCreate() method inject your dependency graph. But with dagger-android everything is easier.</p>\n\n<p>Here is the code: </p>\n\n<pre><code>@Singleton\n@Component(modules = [\n    AndroidSupportInjectionModule::class,\n    ActivityBindingModule::class,\n    AppModule::class\n])\ninterface AppComponent : AndroidInjector&lt;DaggerApplication&gt; {\n\n    fun inject(application: MyApplication)\n\n    override fun inject(instance: DaggerApplication)\n\n    @Component.Builder\n    interface Builder {\n        @BindsInstance fun application(application: MyApplication): Builder\n        fun build(): AppComponent\n    }\n}\n</code></pre>\n\n<p><strong>AndroidSupportInjectionModule.class</strong> : This goes from the dagger.android.support library. And it provides Android components (Activities/Fragments/Services/BroadcastReceiver/ContentProvider) with our module. </p>\n\n<p><strong>@Component.Builder</strong> in dagger2.10 provides us better way to create a builder of DaggerAppComponent.</p>\n\n<p><strong>@BindsInstance</strong> in the Builder will automatically create an instance of <code>MyApplication</code> so in <code>AppModule</code> we don't need to instantiate with MyApplication. It is already a dependency in the graph.</p>\n\n<p><strong>ActivityBindingModule.clas</strong> is our. I will tell about it later.</p>\n\n<p>You can read more about this part here: <a href=\"https://proandroiddev.com/dagger-2-component-builder-1f2b91237856\" rel=\"noreferrer\">https://proandroiddev.com/dagger-2-component-builder-1f2b91237856</a></p>\n\n<p>Next is AppModule.class : </p>\n\n<pre><code>@Module\nabstract class AppModule{\n\n    @Binds\n    abstract fun provideContext(application: MyApplication) : Context\n\n    @Module\n    companion object {\n\n        @JvmStatic\n        @Provides\n        fun provideSharedPreferences(context: Context): SharedPreferences =\n            context.getSharedPreferences(\"SharedPreferences\", Context.MODE_PRIVATE)\n    }\n}\n</code></pre>\n\n<p><strong>@Binds</strong> annotation replaces <code>@Provides</code> annotation and it just returns the value in the function parameter. As you see an instance of MyApplication is already in the graph and there is no need to inject MyApplication in the AppModule constructor.</p>\n\n<p>NOTE: function with @Binds annotation should be abstract, and if there are function with @Provides annotation they should be <code>static</code>. \nThe solution in Kotlin for static funcitons you can find here: <a href=\"https://github.com/google/dagger/issues/900\" rel=\"noreferrer\">https://github.com/google/dagger/issues/900</a></p>\n\n<p><strong>ActivityBindingModule.class:</strong> </p>\n\n<pre><code>@Module\nabstract class ActivityBindingModule {\n\n    @ContributesAndroidInjector(modules = [MainActivityModule::class])\n    internal abstract fun bindMainActivity(): MainActivity\n}\n</code></pre>\n\n<p>With the <strong>ActivityBindingModule</strong> class we just create separate Module that will create <strong>Subcomponents</strong> for Android components for us.</p>\n\n<p>More about ContributesAndroidInjector and Binds you can read here:\n<a href=\"https://proandroiddev.com/dagger-2-annotations-binds-contributesandroidinjector-a09e6a57758f\" rel=\"noreferrer\">https://proandroiddev.com/dagger-2-annotations-binds-contributesandroidinjector-a09e6a57758f</a></p>\n\n<p><strong>MainActivityModule.class:</strong></p>\n\n<pre><code>@Module\nabstract class MainActivityModule {\n\n    @Binds\n    internal abstract fun provideMainActivity(activity: MainActivity): MainActivity\n}\n</code></pre>\n\n<p><strong>MyApplication.class:</strong></p>\n\n<pre><code>class MyApplication: DaggerApplication(){\n\n    override fun applicationInjector(): AndroidInjector&lt;out DaggerApplication&gt; {\n        val appComponent = DaggerAppComponent.builder()\n            .application(this)\n            .build()\n        appComponent.inject(this)\n        return appComponent\n    }\n}\n</code></pre>\n\n<p>Do not forget insert Application in the Mainfest file.</p>\n\n<pre><code>&lt;application\n    android:name=\".MyApplication\"\n...\n&gt;\n    ...\n&lt;/application&gt;\n</code></pre>\n\n<p>For your Application class you need to implement DaggerApplication that implements HasActivityInjector/HasFragmentInjector/etc as well as call AndroidInjection.inject().</p>\n\n<p>About this you can read more here : <a href=\"https://google.github.io/dagger/android.html\" rel=\"noreferrer\">https://google.github.io/dagger/android.html</a></p>\n\n<p><strong>MainActivity.class:</strong></p>\n\n<pre><code>class MainActivity : DaggerAppCompatActivity() {\n\n    @Inject\n    lateinit var sharedPreferences: SharedPreferences\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        Log.d(\"TAAAAG\", sharedPreferences.toString())\n    }\n}\n</code></pre>\n\n<p>As you can see <code>MainActivity</code> now does not know how SharedPreferences are injected. Actually there is <code>AndroidInjection.inject(this);</code> in the DaggerAppCompatActivity. If you don't extend you class from this, than you need to specify it in onCreate method by yourself, otherwise no injections will be done.</p>\n\n<p><strong>EDIT:</strong> \nYou can check the code from GitHub: <a href=\"https://github.com/Belka1000867/Dagger2Kotlin\" rel=\"noreferrer\">https://github.com/Belka1000867/Dagger2Kotlin</a></p>\n"}], "owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3377, "favorite_count": 1, "accepted_answer_id": 48127727, "answer_count": 1, "score": 4, "last_activity_date": 1515505403, "creation_date": 1514998957, "last_edit_date": 1515167494, "question_id": 48081881, "link": "https://stackoverflow.com/questions/48081881/dagger-2-not-injecting-sharedpreference", "title": "Dagger 2 not injecting sharedPreference", "body": "<p>Hi i am new to dagger 2 and trying to inject an instance of sharedPreference inside my MyActivity class below:</p>\n\n<pre><code>class MyApplication : Application() {\n\n    companion object {\n        @JvmStatic lateinit var applicationComponent : ApplicationComponent\n    }\n\n\n\n    override fun onCreate() {\n        super.onCreate()\n        applicationComponent = DaggerApplicationComponent.builder().androidModule(AndroidModule(this)).build()\n\n    }\n}\n</code></pre>\n\n<p>Here is the component and modules</p>\n\n<pre><code>@Singleton\n@Component(modules = arrayOf(AndroidModule::class))\ninterface ApplicationComponent {\n    fun inject(mainActivity: MainActivity)\n}\n\n@Module\nclass AndroidModule (private val application: Application){ \n\n    @Provides\n    @Singleton\n    fun provideApplicationContext() : Context = application\n\n    @Provides\n    @Singleton\n    fun provideSharedPreference() : SharedPreferences = application.getSharedPreferences(\"shared pref\", Context.MODE_PRIVATE)\n\n}\n\n\nclass MainActivity: Activity{\n    @Inject\n    internal lateinit var sharedPreference: SharedPreferences\n\n    @Inject\n    internal lateinit var MainScreenPresenter: MainScreenContract.Presenter\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.main_Screen)\n        MyApplication.applicationComponent.inject(this)\n\n        sharedPreference.toString()\n\n        initiateViews()\n    }\n\n}\n</code></pre>\n\n<p>I get the error below:</p>\n\n<pre><code>Error:(7, 1) error: android.content.SharedPreferences cannot be provided without an @Provides- or @Produces-annotated method.\n</code></pre>\n"}, {"tags": ["kotlin", "mathematical-optimization", "linear-programming", "ojalgo"], "comments": [{"owner": {"reputation": 1045, "user_id": 4421592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaI2H.jpg?s=128&g=1", "display_name": "apete", "link": "https://stackoverflow.com/users/4421592/apete"}, "edited": false, "score": 0, "creation_date": 1515008523, "post_id": 48081172, "comment_id": 83142885, "body": "You may debug the MIP solver using something like this:  <code>model.options.debug(IntegerSolver.class);</code> and/or you may try some other solver. The free version of CPLEX handles up to 1000 variables. <a href=\"https://github.com/optimatika/ojAlgo-extensions/tree/master/ojAlgo-cplex\" rel=\"nofollow noreferrer\">github.com/optimatika/ojAlgo-extensions/tree/master/&hellip;</a>"}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "reply_to_user": {"reputation": 1045, "user_id": 4421592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaI2H.jpg?s=128&g=1", "display_name": "apete", "link": "https://stackoverflow.com/users/4421592/apete"}, "edited": false, "score": 0, "creation_date": 1515164496, "post_id": 48081172, "comment_id": 83208392, "body": "Okay thanks, I will try both of these out."}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "reply_to_user": {"reputation": 1045, "user_id": 4421592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaI2H.jpg?s=128&g=1", "display_name": "apete", "link": "https://stackoverflow.com/users/4421592/apete"}, "edited": false, "score": 0, "creation_date": 1515164717, "post_id": 48081172, "comment_id": 83208515, "body": "I&#39;m a bit surprised that I&#39;m already looking at commercial solvers for a <i>seemingly</i> small problem. Granted, I realize this problem may exceed a thousand variables."}, {"owner": {"reputation": 1045, "user_id": 4421592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaI2H.jpg?s=128&g=1", "display_name": "apete", "link": "https://stackoverflow.com/users/4421592/apete"}, "edited": false, "score": 0, "creation_date": 1515168203, "post_id": 48081172, "comment_id": 83210545, "body": "Construct a miniature instance of your problem (with all the relevant structural components) and see if ojAlgo can solve that. If it can&#39;t then try some other solver to verify that there is no problem with the model. Also note that there is a number of options that control the behaviour of the MIP solver. It is very much a possibility that the ojAlgo MIP solver actually found a solution (perhaps even &quot;the&quot; solution) but none of the stopping criteria are met."}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "reply_to_user": {"reputation": 1045, "user_id": 4421592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaI2H.jpg?s=128&g=1", "display_name": "apete", "link": "https://stackoverflow.com/users/4421592/apete"}, "edited": false, "score": 0, "creation_date": 1515456014, "post_id": 48081172, "comment_id": 83298985, "body": "I scaled the self-contained problem to 48000 &quot;slot&quot; binary variables, which is what I need. The contiguous logic is still causing massive slowdown for problems that grow larger than 500 binary variables. Is it possible I am pushing the limit of ojAlgo? I put the self-contained example in an update edit above."}, {"owner": {"reputation": 1045, "user_id": 4421592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaI2H.jpg?s=128&g=1", "display_name": "apete", "link": "https://stackoverflow.com/users/4421592/apete"}, "edited": false, "score": 0, "creation_date": 1515485025, "post_id": 48081172, "comment_id": 83306517, "body": "It is definitely possible that a MIP with 48k binary variables is too much for ojAlgo."}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "reply_to_user": {"reputation": 1045, "user_id": 4421592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaI2H.jpg?s=128&g=1", "display_name": "apete", "link": "https://stackoverflow.com/users/4421592/apete"}, "edited": false, "score": 0, "creation_date": 1515552912, "post_id": 48081172, "comment_id": 83339348, "body": "Sorry, 4800 not 48000. I got it working after I found a way to regionalize functions to prevent overlap. Runs in 30 seconds now! Quick question though. I tried calling <code>model.options.iterations_suffice = 0</code> but it still seemed to look for alternatives even though feasible solutions were found. Am I doing it right?"}, {"owner": {"reputation": 1045, "user_id": 4421592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaI2H.jpg?s=128&g=1", "display_name": "apete", "link": "https://stackoverflow.com/users/4421592/apete"}, "edited": false, "score": 0, "creation_date": 1515595708, "post_id": 48081172, "comment_id": 83359952, "body": "I normally use time_suffice/time_abort - that works, and it&#39;s more predictable than iterations_suffice/iterations_abort. Both alternatives should work. If you can confirm a problem then please report a bug."}], "answers": [{"comments": [{"owner": {"reputation": 1045, "user_id": 4421592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaI2H.jpg?s=128&g=1", "display_name": "apete", "link": "https://stackoverflow.com/users/4421592/apete"}, "edited": false, "score": 0, "creation_date": 1515752111, "post_id": 48179942, "comment_id": 83429483, "body": "There are some recent changes to ojAlgo that you may want to try. I believe some MIP:s are solved a bit faster now. Get the latest source code from GitHub and give it a try. Further you may benefit from writing a custom presolver that handles those blocks of binary variables. Not sure I understand them, but if 2 or more time slots in the same block are &quot;on&quot;, then time slots in-between them also needs to &quot;on&quot; , right? Ask about on the ojalgo-user mailing list if you&#39;re interested."}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "reply_to_user": {"reputation": 1045, "user_id": 4421592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaI2H.jpg?s=128&g=1", "display_name": "apete", "link": "https://stackoverflow.com/users/4421592/apete"}, "edited": false, "score": 0, "creation_date": 1515793513, "post_id": 48179942, "comment_id": 83451397, "body": "Okay cool, thanks. I&#39;ll play around with it this weekend and share how it goes."}], "tags": [], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "is_accepted": true, "score": 1, "last_activity_date": 1515555566, "creation_date": 1515555566, "answer_id": 48179942, "question_id": 48081172, "link": "https://stackoverflow.com/questions/48081172/ojalgo-optimization-issue-with-contiguous-block-logic/48179942#48179942", "title": "ojAlgo - Optimization issue with contiguous block logic?", "body": "<p>I figured it out. I'll update this answer later with the full mathematical modeling explanation. Essentially for each 15 minute block I queried for slot groups that include that block, and declared the sum of all of them must be no more than one. This ended up being acceptably efficient as it runs in 30-60 seconds. </p>\n\n<p>The code is here on GitHub, as well as below: \n<a href=\"https://github.com/thomasnield/optimized-scheduling-demo\" rel=\"nofollow noreferrer\">https://github.com/thomasnield/optimized-scheduling-demo</a></p>\n\n<pre><code>import org.ojalgo.optimisation.integer.IntegerSolver\nimport java.time.LocalDate\nimport java.time.LocalTime\nimport org.ojalgo.optimisation.ExpressionsBasedModel\nimport org.ojalgo.optimisation.Variable\nimport java.time.DayOfWeek\nimport java.time.LocalDateTime\nimport java.util.concurrent.atomic.AtomicInteger\n\n// Any Monday through Friday date range will work\nval operatingDates = LocalDate.of(2017,10,16)..LocalDate.of(2017,10,20)\nval operatingDay = LocalTime.of(8,0)..LocalTime.of(17,0)\n\n\nval breaks = listOf&lt;ClosedRange&lt;LocalTime&gt;&gt;(\n        LocalTime.of(11,30)..LocalTime.of(13,0)\n)\n\n\n// classes\nval scheduledClasses = listOf(\n        ScheduledClass(id=1, name=\"Psych 101\",hoursLength=1.0, repetitions=2),\n        ScheduledClass(id=2, name=\"English 101\", hoursLength=1.5, repetitions=3),\n        ScheduledClass(id=3, name=\"Math 300\", hoursLength=1.5, repetitions=2),\n        ScheduledClass(id=4, name=\"Psych 300\", hoursLength=3.0, repetitions=1),\n        ScheduledClass(id=5, name=\"Calculus I\", hoursLength=2.0, repetitions=2),\n        ScheduledClass(id=6, name=\"Linear Algebra I\", hoursLength=2.0, repetitions=3),\n        ScheduledClass(id=7, name=\"Sociology 101\", hoursLength=1.0, repetitions=2),\n        ScheduledClass(id=8, name=\"Biology 101\", hoursLength=1.0, repetitions=2)\n)\n\nfun main(args: Array&lt;String&gt;) {\n\n    println(\"Job started at ${LocalTime.now()}\")\n\n    applyConstraints()\n\n    model.countVariables().run { println(\"$this variables\") }\n\n    model.options.apply {\n        //debug(IntegerSolver::class.java)\n        iterations_suffice = 0\n    }\n\n    println(model.minimise())\n\n    ScheduledClass.all.forEach {\n        println(\"${it.name}- ${it.daysOfWeek.joinToString(\"/\")} ${it.start.toLocalTime()}-${it.end.toLocalTime()}\")\n    }\n\n    println(\"Job ended at ${LocalTime.now()}\")\n\n}\n\n\n\n// declare model\nval model = ExpressionsBasedModel()\n\nval funcId = AtomicInteger(0)\nval variableId = AtomicInteger(0)\nfun variable() = Variable(variableId.incrementAndGet().toString().let { \"Variable$it\" }).apply(model::addVariable)\nfun addExpression() = funcId.incrementAndGet().let { \"Func$it\"}.let { model.addExpression(it) }\n\n\n\ndata class Block(val dateTimeRange: ClosedRange&lt;LocalDateTime&gt;) {\n\n    val timeRange = dateTimeRange.let { it.start.toLocalTime()..it.endInclusive.toLocalTime() }\n\n    val available get() =  (breaks.all { timeRange.start !in it } &amp;&amp; timeRange.start in operatingDay)\n\n    //val cumulativeState = variable().apply { if (available) lower(0).upper(1) else level(0) }\n\n    val slots by lazy {\n        Slot.all.filter { it.block == this }\n    }\n\n    fun addConstraints() {\n        if (available) {\n            addExpression().lower(0).upper(1).apply {\n                ScheduledClass.all.asSequence().flatMap { it.anchorOverlapFor(this@Block) }\n                        .filter { it.block.available }\n                        .forEach {\n                            set(it.occupied, 1)\n                        }\n            }\n        } else {\n            ScheduledClass.all.asSequence().flatMap { it.anchorOverlapFor(this@Block) }\n                    .forEach {\n                        it.occupied.level(0)\n                    }\n        }\n    }\n\n    companion object {\n\n        // Operating blocks\n        val all by lazy {\n            generateSequence(operatingDates.start.atStartOfDay()) {\n                it.plusMinutes(15).takeIf { it.plusMinutes(15) &lt;= operatingDates.endInclusive.atTime(23,59) }\n            }.map { Block(it..it.plusMinutes(15)) }\n             .toList()\n        }\n\n        fun applyConstraints() {\n            all.forEach { it.addConstraints() }\n        }\n    }\n}\n\n\ndata class ScheduledClass(val id: Int,\n                          val name: String,\n                          val hoursLength: Double,\n                          val repetitions: Int,\n                          val repetitionGapDays: Int = 2) {\n\n    val repetitionGapSlots = repetitionGapDays * 24 * 4\n\n    val slotsNeeded = (hoursLength * 4).toInt()\n\n    val slots by lazy {\n        Slot.all.asSequence().filter { it.session == this }.toList()\n    }\n\n    val batches by lazy {\n        slots.rollingRecurrences(slotsNeeded = slotsNeeded, gapSize = repetitionGapSlots, recurrencesNeeded = repetitions)\n    }\n\n    fun anchorOverlapFor(block: Block) = batches.asSequence()\n            .filter { it.flatMap { it }.any { it.block == block } }\n            .map { it.first().first() }\n\n    val start get() = slots.asSequence().filter { it.occupied.value.toInt() == 1 }.map { it.block.dateTimeRange.start }.min()!!\n    val end get() = start.plusMinutes((hoursLength * 60.0).toLong())\n\n    val daysOfWeek get() = (0..(repetitions-1)).asSequence().map { start.dayOfWeek.plus(it.toLong() * repetitionGapDays) }.sorted()\n\n    fun addConstraints() {\n\n        //sum of all boolean states for this session must be 1\n        addExpression().level(1).apply {\n            slots.forEach {\n                set(it.occupied, 1)\n            }\n        }\n\n        //guide Mon/Wed/Fri for three repetitions\n        if (repetitions == 3) {\n            addExpression().level(1).apply {\n                slots.filter { it.block.dateTimeRange.start.dayOfWeek == DayOfWeek.MONDAY }\n                        .forEach {\n                            set(it.occupied, 1)\n                        }\n            }\n        }\n\n        //guide two repetitions to start on Mon, Tues, or Wed\n        if (repetitions == 2) {\n            addExpression().level(1).apply {\n                slots.filter { it.block.dateTimeRange.start.dayOfWeek in DayOfWeek.MONDAY..DayOfWeek.WEDNESDAY }.forEach {\n                    set(it.occupied, 1)\n                }\n            }\n        }\n    }\n\n    companion object {\n        val all by lazy { scheduledClasses }\n    }\n}\n\n\n\ndata class Slot(val block: Block, val session: ScheduledClass) {\n    val occupied = variable().apply { if (block.available) binary() else level(0) }\n\n    companion object {\n\n        val all by lazy {\n            Block.all.asSequence().flatMap { b -&gt;\n                ScheduledClass.all.asSequence().map { Slot(b,it) }\n            }.toList()\n        }\n    }\n}\n\n\nfun applyConstraints() {\n    Block.applyConstraints()\n    ScheduledClass.all.forEach { it.addConstraints() }\n}\n\nfun &lt;T&gt; List&lt;T&gt;.rollingBatches(batchSize: Int) = (0..size).asSequence().map { i -&gt;\n    subList(i, (i + batchSize).let { if (it &gt; size) size else it })\n}.filter { it.size == batchSize }\n\nfun &lt;T&gt; List&lt;T&gt;.rollingRecurrences(slotsNeeded: Int, gapSize: Int, recurrencesNeeded: Int) =\n        (0..size).asSequence().map { i -&gt;\n            (1..recurrencesNeeded).asSequence().map { (it - 1) * gapSize  }\n                    .filter { it + i &lt; size}\n                    .map { r -&gt;\n                        subList(i + r, (i + r + slotsNeeded).let { if (it &gt; size) size else it })\n                    }.filter { it.size == slotsNeeded }\n                    .toList()\n}.filter { it.size == recurrencesNeeded }\n</code></pre>\n"}], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 48179942, "answer_count": 1, "score": 1, "last_activity_date": 1515555566, "creation_date": 1514996311, "last_edit_date": 1515455884, "question_id": 48081172, "link": "https://stackoverflow.com/questions/48081172/ojalgo-optimization-issue-with-contiguous-block-logic", "title": "ojAlgo - Optimization issue with contiguous block logic?", "body": "<p>I am using ojAlgo to work through a classroom scheduling problem I'm doing as an exercise. The source code can be found here on GitHub in the <code>kotlin_solution</code> folder: </p>\n\n<p><a href=\"https://github.com/thomasnield/optimized-scheduling-demo\" rel=\"nofollow noreferrer\">https://github.com/thomasnield/optimized-scheduling-demo</a></p>\n\n<p>Everything was going fine until I started to implement contiguous block logic <a href=\"https://math.stackexchange.com/questions/2583825/integer-programming-making-schedule-blocks-contiguous\">which I've described over on Math Exchange</a>. Bascially, if a class session requires 4 blocks then those 4 blocks need to be together.</p>\n\n<p>For some reason, this modeling logic screeches to a halt when I implement the contiguous logic <a href=\"https://github.com/thomasnield/optimized-scheduling-demo/blob/master/kotlin_solution/src/main/kotlin/ScheduleEntities.kt#L125-L148\" rel=\"nofollow noreferrer\">in this part of the code</a>. It is churning infinitely. </p>\n\n<p>Here is the Kotlin code in it's entirety: </p>\n\n<pre><code>import org.ojalgo.optimisation.ExpressionsBasedModel\nimport org.ojalgo.optimisation.Variable\nimport java.time.DayOfWeek\nimport java.time.LocalDate\nimport java.time.LocalDateTime\nimport java.time.LocalTime\nimport java.util.concurrent.atomic.AtomicInteger\n\n// declare model\nval model = ExpressionsBasedModel()\n\nval funcId = AtomicInteger(0)\nval variableId = AtomicInteger(0)\nfun variable() = Variable(variableId.incrementAndGet().toString().let { \"Variable$it\" }).apply(model::addVariable)\nfun addExpression() = funcId.incrementAndGet().let { \"Func$it\"}.let { model.addExpression(it) }\n\n\n\n\n// Any Monday through Friday date range will work\nval operatingDates = LocalDate.of(2017,10,16)..LocalDate.of(2017,10,20)\nval operatingDay = LocalTime.of(8,0)..LocalTime.of(17,0)\n\n\nval breaks = listOf&lt;ClosedRange&lt;LocalTime&gt;&gt;(\n        //LocalTime.of(11,30)..LocalTime.of(13,0)\n)\n\n\n// classes\nval scheduledClasses = listOf(\n        ScheduledClass(id=1, name=\"Psych 101\", hoursLength=1.0, repetitions=2),\n        ScheduledClass(id=2, name=\"English 101\", hoursLength=1.5, repetitions=3),\n        ScheduledClass(id=3, name=\"Math 300\", hoursLength=1.5, repetitions=2),\n        ScheduledClass(id=4, name=\"Psych 300\", hoursLength=3.0, repetitions=1),\n        ScheduledClass(id=5, name=\"Calculus I\", hoursLength=2.0, repetitions=2),\n        ScheduledClass(id=6, name=\"Linear Algebra I\", hoursLength=2.0, repetitions=3),\n        ScheduledClass(id=7, name=\"Sociology 101\", hoursLength=1.0, repetitions=2),\n        ScheduledClass(id=8, name=\"Biology 101\", hoursLength=1.0, repetitions=2)\n)\n\nfun main(args: Array&lt;String&gt;) {\n\n\n    println(\"Job started at ${LocalTime.now()}\")\n\n    applyConstraints()\n\n    println(model.minimise())\n\n    Session.all.forEach {\n        println(\"${it.name}-${it.repetitionIndex}: ${it.start.dayOfWeek} ${it.start.toLocalTime()}-${it.end.toLocalTime()}\")\n    }\n\n    println(\"Job ended at ${LocalTime.now()}\")\n\n}\n\n\n\ndata class Block(val dateTimeRange: ClosedRange&lt;LocalDateTime&gt;) {\n\n    val timeRange = dateTimeRange.let { it.start.toLocalTime()..it.endInclusive.toLocalTime() }\n\n    fun addConstraints() {\n        val f = addExpression().upper(1)\n\n        OccupationState.all.filter { it.block == this }.forEach {\n            f.set(it.occupied, 1)\n        }\n    }\n    companion object {\n\n        // Operating blocks\n        val all by lazy {\n            generateSequence(operatingDates.start.atTime(operatingDay.start)) {\n                it.plusMinutes(15).takeIf { it.plusMinutes(15) &lt;= operatingDates.endInclusive.atTime(operatingDay.endInclusive) }\n            }.filter { it.toLocalTime() in operatingDay }\n                    .map { Block(it..it.plusMinutes(15)) }\n                    .toList()\n        }\n    }\n}\n\n\ndata class ScheduledClass(val id: Int,\n                          val name: String,\n                          val hoursLength: Double,\n                          val repetitions: Int) {\n\n    val sessions by lazy {\n        Session.all.filter { it.parentClass == this }\n    }\n\n    fun addConstraints() {\n\n        //guide 3 repetitions to be fixed on MONDAY, WEDNESDAY, FRIDAY\n        if (repetitions == 3) {\n            sessions.forEach { session -&gt;\n                val f = addExpression().level(session.blocksNeeded)\n\n                session.occupationStates.asSequence()\n                        .filter {\n                            it.block.dateTimeRange.start.dayOfWeek ==\n                                    when(session.repetitionIndex) {\n                                        1 -&gt; DayOfWeek.MONDAY\n                                        2 -&gt; DayOfWeek.WEDNESDAY\n                                        3 -&gt; DayOfWeek.FRIDAY\n                                        else -&gt; throw Exception(\"Must be 1/2/3\")\n                                    }\n                        }\n                        .forEach {\n                            f.set(it.occupied,1)\n                        }\n            }\n        }\n\n        //guide two repetitions to be 48 hours apart (in development)\n        if (repetitions == 2) {\n            val first = sessions.find { it.repetitionIndex == 1 }!!\n            val second = sessions.find { it.repetitionIndex == 2 }!!\n        }\n    }\n\n    companion object {\n        val all by lazy { scheduledClasses }\n    }\n}\n\n\ndata class Session(val id: Int,\n                   val name: String,\n                   val hoursLength: Double,\n                   val repetitionIndex: Int,\n                   val parentClass: ScheduledClass) {\n\n    val blocksNeeded = (hoursLength * 4).toInt()\n\n    val occupationStates by lazy {\n        OccupationState.all.asSequence().filter { it.session == this }.toList()\n    }\n\n    val start get() = occupationStates.asSequence().filter { it.occupied.value.toInt() == 1 }\n            .map { it.block.dateTimeRange.start }\n            .min()!!\n\n    val end get() = occupationStates.asSequence().filter { it.occupied.value.toInt() == 1 }\n            .map { it.block.dateTimeRange.endInclusive }\n            .max()!!\n\n    fun addConstraints() {\n\n        val f1 = addExpression().level(0)\n        //block out exceptions\n        occupationStates.asSequence()\n                .filter { os -&gt; breaks.any { os.block.timeRange.start in it } || os.block.timeRange.start !in operatingDay }\n                .forEach {\n                    // b = 0, where b is occupation state\n                    // this means it should never be occupied\n                    f1.set(it.occupied, 1)\n                }\n\n        //sum of all boolean states for this session must equal the # blocks needed\n        val f2 = addExpression().level(blocksNeeded)\n\n        occupationStates.forEach {\n            f2.set(it.occupied, 1)\n        }\n\n        //ensure all occupied blocks are consecutive\n        // PROBLEM, not finding a solution and stalling\n\n        /*\n        b1, b2, b3 .. bn = binary from each group\n\n        all binaries must sum to 1, indicating fully consecutive group exists\n        b1 + b2 + b3 + .. bn = 1\n         */\n        val consecutiveStateConstraint = addExpression().level(1)\n\n        (0..occupationStates.size).asSequence().map { i -&gt;\n            occupationStates.subList(i, (i + blocksNeeded).let { if (it &gt; occupationStates.size) occupationStates.size else it })\n        }.filter { it.size == blocksNeeded }\n                .forEach { grp -&gt;\n                    /*\n                    b = 1,0 binary for group\n                    n = blocks needed\n                    x1, x2, x3 .. xn = occupation states in group\n\n                    x1 + x2 + x3 .. + xn - bn &gt;= 0\n                     */\n                    val binaryForGroup = variable().binary()\n\n                    consecutiveStateConstraint.set(binaryForGroup, 1)\n\n                    addExpression().lower(0).apply {\n                        grp.forEach {\n                            set(it.occupied,1)\n                        }\n                        set(binaryForGroup, -1 * blocksNeeded)\n                    }\n                }\n\n    }\n\n    companion object {\n        val all by lazy {\n            ScheduledClass.all.asSequence().flatMap { sc -&gt;\n                (1..sc.repetitions).asSequence()\n                        .map { Session(sc.id, sc.name, sc.hoursLength, it, sc) }\n            }.toList()\n        }\n    }\n}\n\ndata class OccupationState(val block: Block, val session: Session) {\n    val occupied = variable().binary()\n\n    companion object {\n\n        val all by lazy {\n            Block.all.asSequence().flatMap { b -&gt;\n                Session.all.asSequence().map { OccupationState(b,it) }\n            }.toList()\n        }\n    }\n}\n\n\nfun applyConstraints() {\n    Session.all.forEach { it.addConstraints() }\n    ScheduledClass.all.forEach { it.addConstraints() }\n    Block.all.forEach { it.addConstraints() }\n}\n</code></pre>\n\n<p>** UPDATE ** </p>\n\n<p>I created a self-contained example that simplifies what I'm trying to do above. It seems the contiguous logic is indeed the problem, and the more \"slots\" the problem has the slower it performs. At 48000 variables, the contiguous logic seems to churn forever. </p>\n\n<pre><code>import org.ojalgo.optimisation.ExpressionsBasedModel\nimport org.ojalgo.optimisation.Variable\nimport org.ojalgo.optimisation.integer.IntegerSolver\nimport java.util.concurrent.ThreadLocalRandom\nimport java.util.concurrent.atomic.AtomicInteger\n\n// declare ojAlgo Model\nval model = ExpressionsBasedModel()\n\n// custom DSL for expression inputs, eliminate naming and adding\nval funcId = AtomicInteger(0)\nval variableId = AtomicInteger(0)\nfun variable() = Variable(variableId.incrementAndGet().toString().let { \"Variable$it\" }).apply(model::addVariable)\nfun addExpression() = funcId.incrementAndGet().let { \"Func$it\"}.let { model.addExpression(it) }\n\n\nval letterCount = 9\nval numberCount = 480\n\nval minContiguousBlocks = 4\nval maxContiguousBlocks = 4\n\nfun main(args: Array&lt;String&gt;) {\n\n    Letter.all.forEach { it.addConstraints() }\n    Number.all.forEach { it.addConstraints() }\n\n    model.countVariables().run { println(\"$this variables\") }\n\n    model.options.debug(IntegerSolver::class.java)\n\n    model.minimise().run(::println)\n\n    Letter.all.joinToString(prefix = \"\\t\", separator = \"\\t\").run(::println)\n    Letter.all.map { it.slotsNeeded }.joinToString(prefix = \"\\t\", separator = \"\\t\").run(::println)\n\n    Number.all.forEach { n -&gt;\n        Letter.all.asSequence().map { l -&gt; l.slots.first { it.number == n }.occupied.value.toInt() }\n                .joinToString(prefix = \"$n  \", separator = \"\\t\").run { println(this) }\n    }\n}\n\nclass Letter(val value: String, val slotsNeeded: Int = 1) {\n\n    val slots by lazy {\n        Slot.all.filter { it.letter == this }.sortedBy { it.number.value }\n    }\n\n    fun addConstraints() {\n\n        // Letter must be assigned once\n        addExpression().level(1).apply {\n            slots.forEach { set(it.occupied,  1) }\n        }\n\n        //handle recurrences\n        if (slotsNeeded &gt; 1) {\n            slots.rollingBatches(slotsNeeded).forEach { batch -&gt;\n\n                val first = batch.first()\n\n                addExpression().upper(0).apply {\n\n                    batch.asSequence().flatMap { it.number.slots.asSequence() }\n                            .forEach {\n                                set(it.occupied, 1)\n                            }\n\n                    set(first.number.cumulativeState, -1)\n                }\n            }\n        }\n\n        //prevent scheduling at end of window\n        // all slots must sum to 0 in region smaller than slots needed\n        addExpression().level(0).apply {\n            slots.takeLast(slotsNeeded - 1)\n                    .forEach {\n                        set(it.occupied, 1)\n                    }\n        }\n    }\n\n    override fun toString() = value\n\n    companion object {\n\n        val all = ('A'..'Z').asSequence()\n                .take(letterCount)\n                .map { it.toString() }\n                .map { Letter(it, ThreadLocalRandom.current().nextInt(minContiguousBlocks, maxContiguousBlocks + 1)) }\n                .toList()\n\n\n    }\n}\n\nclass Number(val value: Int)  {\n\n    val slots by lazy {\n        Slot.all.filter { it.number == this }\n    }\n\n    // b_x\n    val cumulativeState = variable().lower(0).upper(1)\n\n\n    fun addConstraints() {\n\n        // Number can only be assigned once\n        addExpression().upper(1).apply {\n            slots.forEach { set(it.occupied,  1) }\n        }\n\n    }\n\n    companion object {\n        val all = (1..numberCount).asSequence()\n                .map { Number(it) }\n                .toList()\n    }\n\n    override fun toString() = value.toString().let { if (it.length == 1) \"$it \" else it }\n}\n\ndata class Slot(val letter: Letter, val number: Number) {\n\n    val occupied = variable().binary()\n\n\n    companion object {\n        val all = Letter.all.asSequence().flatMap { letter -&gt;\n            Number.all.asSequence().map { number -&gt; Slot(letter, number) }\n        }.toList()\n    }\n    override fun toString() = \"$letter$number: ${occupied?.value?.toInt()}\"\n}\n\nfun &lt;T&gt; List&lt;T&gt;.rollingBatches(batchSize: Int) = (0..size).asSequence().map { i -&gt;\n    subList(i, (i + batchSize).let { if (it &gt; size) size else it })\n}.filter { it.size == batchSize }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-service", "alarmmanager", "android-doze"], "comments": [{"owner": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1514994719, "post_id": 48080609, "comment_id": 83135588, "body": "on what android version are you testing this?"}, {"owner": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "reply_to_user": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1514995423, "post_id": 48080609, "comment_id": 83135994, "body": "Android 7.1.1 (API 25) - Motorola Nexus 6 and Android 4.4.2 (API 19) - Asus Fonepad 7"}, {"owner": {"reputation": 5882, "user_id": 1370087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g3ak7.jpg?s=128&g=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/1370087/benjamin"}, "edited": false, "score": 1, "creation_date": 1514995503, "post_id": 48080609, "comment_id": 83136026, "body": "be aware that on Marshmallow and above you&#39;ve to deal with doze"}, {"owner": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1514998447, "post_id": 48080609, "comment_id": 83137778, "body": "how does &#39;cal.timeInMillis = time * 1000&#39; even compile?"}, {"owner": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "reply_to_user": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1515004135, "post_id": 48080609, "comment_id": 83140743, "body": "@A. Kuchinke, it&#39;s kotlin."}, {"owner": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1515004285, "post_id": 48080609, "comment_id": 83140831, "body": "@Touhid I know, i tested it in Kotlin and Android Studio complains about types. As the calendar expects a Long but the righthand side is Int"}, {"owner": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "edited": false, "score": 0, "creation_date": 1515004489, "post_id": 48080609, "comment_id": 83140934, "body": "Oh sorry, in my actual case, <code>time</code> is Long type."}, {"owner": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1515004633, "post_id": 48080609, "comment_id": 83141013, "body": "yeah now it makes sense, otherwise you would have gotten a Integer overflow, aside from the type mismatch"}], "answers": [{"comments": [{"owner": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "edited": false, "score": 0, "creation_date": 1515004385, "post_id": 48080974, "comment_id": 83140878, "body": "I can see <code>alarmManager.setAlarmClock()</code> is the major difference here. Can you elaborate it&#39;s purpose as I got alarm without using it previously? (I&#39;ll test your code soon)"}, {"owner": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "edited": false, "score": 0, "creation_date": 1515004948, "post_id": 48080974, "comment_id": 83141171, "body": "I&#39;ve found the cause as suggested to handle <code>Doze mode</code> by @Benjamin  here[<a href=\"https://developer.android.com/training/monitoring-device-state/doze-standby.html#restrictions]\" rel=\"nofollow noreferrer\">developer.android.com/training/monitoring-device-state/&zwnj;&#8203;&hellip;</a>: <code>Alarms set with\u00a0setAlarmClock()\u00a0continue to fire normally \u2014 the system exits Doze shortly before those alarms fire.</code> Thanks."}, {"owner": {"reputation": 1377, "user_id": 5349947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xe0hT.png?s=128&g=1", "display_name": "notTdar", "link": "https://stackoverflow.com/users/5349947/nottdar"}, "reply_to_user": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "edited": false, "score": 0, "creation_date": 1515044477, "post_id": 48080974, "comment_id": 83153074, "body": "again sorry for being late, set alarm clock is important for an exact time, as a reminder and it does not get affected by Doze but only available +21 device and you will see alarm symbol when you drag down status bar that&#39;s it"}, {"owner": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "edited": false, "score": 0, "creation_date": 1515050957, "post_id": 48080974, "comment_id": 83155424, "body": "the code has worked in android 6.0.1-API 23 (devices: One Plus 2 &amp; Xiaomi Redmi Note 3) &amp; hopefully may work in lower versions, but <b>NOT in 7.1.1-API 25</b> (Nexus 6).  I&#39;m now exploring <a href=\"https://github.com/commonsguy/cw-omnibus/tree/master/AlarmManager\" rel=\"nofollow noreferrer\">these sample codes</a> for any work-around, please inform me if anything comes to your mind."}, {"owner": {"reputation": 1377, "user_id": 5349947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xe0hT.png?s=128&g=1", "display_name": "notTdar", "link": "https://stackoverflow.com/users/5349947/nottdar"}, "reply_to_user": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "edited": false, "score": 0, "creation_date": 1515051798, "post_id": 48080974, "comment_id": 83155797, "body": "setExactAndAllowWhileIdle    ,this does job for nougat, check edited answer"}, {"owner": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "edited": false, "score": 0, "creation_date": 1515054249, "post_id": 48080974, "comment_id": 83156844, "body": "I already have tested <code>setExactAndAllowWhileIdle()</code>, but it&#39;s not working. Please review my updated code-segment."}, {"owner": {"reputation": 1377, "user_id": 5349947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xe0hT.png?s=128&g=1", "display_name": "notTdar", "link": "https://stackoverflow.com/users/5349947/nottdar"}, "reply_to_user": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "edited": false, "score": 0, "creation_date": 1515054929, "post_id": 48080974, "comment_id": 83157128, "body": "in my case, it  works fine, so for your case, either whitelist the app so that no doze effects or use a push msg (fb remote config) which rings instant.let me search and another thing, you are not trying to recurring alarms !"}], "tags": [], "owner": {"reputation": 1377, "user_id": 5349947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xe0hT.png?s=128&g=1", "display_name": "notTdar", "link": "https://stackoverflow.com/users/5349947/nottdar"}, "is_accepted": true, "score": 2, "last_activity_date": 1515051949, "last_edit_date": 1515051949, "creation_date": 1514995612, "answer_id": 48080974, "question_id": 48080609, "link": "https://stackoverflow.com/questions/48080609/android-alarm-not-set/48080974#48080974", "title": "Android Alarm Not Set", "body": "<p>Sorry I did not go through all your code as I was busy in another task, so here's my code used with Broadcast</p>\n\n<pre><code>Intent intent = new Intent(context, AlarmReceiver.class);\n    intent.setAction(UtilAlarmConstants.ALARM_ACTION);\npIBroadCast = PendingIntent.getBroadcast(context, ALARM_PI_REQ_CODE, intent, PendingIntent.FLAG_UPDATE_CURRENT);\n    alarmManager = (AlarmManager) context.getApplicationContext().getSystemService(Context.ALARM_SERVICE);\n\n    if (alarmManager != null) {\n\n   if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M)\n          alarmManager.setExactAndAllowWhileIdle(ALARM_TYPE, calendar.getTimeInMillis(),pendingIntent);\n\n        else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            AlarmManager.AlarmClockInfo alarmClockInfo\n                    = new AlarmManager.AlarmClockInfo(System.currentTimeMillis() + fireAT, null);\n            alarmManager.setAlarmClock(alarmClockInfo, pIBroadCast);\n        }\n        //setExact for 19\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n            alarmManager.setExact(AlarmManager.RTC_WAKEUP, fireAT, pIBroadCast);\n        } else {\n            alarmManager.set(AlarmManager.RTC_WAKEUP, fireAT, pIBroadCast);\n        }\n    }\n</code></pre>\n\n<p>and Broadcast</p>\n\n<pre><code>    if (intent != null &amp;&amp; intent.getAction() != null) {\n\n        if (intent.getAction().equalsIgnoreCase(UtilAlarmConstants.ALARM_ACTION)) {\n\n            setUpNotification(context, intent);}\n</code></pre>\n\n<p>sorry for not giving answer related to service as they are all same wacky dacky :)</p>\n"}], "owner": {"reputation": 620, "user_id": 1745218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ln9lD.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/1745218/touhid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "accepted_answer_id": 48080974, "answer_count": 1, "score": 1, "last_activity_date": 1515054172, "creation_date": 1514994204, "last_edit_date": 1515054172, "question_id": 48080609, "link": "https://stackoverflow.com/questions/48080609/android-alarm-not-set", "title": "Android Alarm Not Set", "body": "<p>I used to set alarms using the following code-segment in other projects as repeating and non-repeating, but it's now driving me crazy about what may the <em>silly</em> mistake be that I've made for not the alarm speaking to my current implementation :\\ :</p>\n\n<pre><code>private fun setAlarm(obj: MyObject, time: Long) {\n    val intent = Intent(applicationContext, MyAlarmIntentService::class.java)\n    intent.putExtra(C.KEY_ME, obj)\n\n    val pendingIntent = PendingIntent.getService(applicationContext, 43, intent, \n                                          PendingIntent.FLAG_UPDATE_CURRENT)\n\n    val context = this@MyActivity\n    val cal = Calendar.getInstance()\n    cal.timeInMillis = time * 1000   // time is in seconds\n    Log.d(\"setAlarm\", \"setting time -&gt; $time for obj = $obj\")\n    Log.d(\"setAlarm\", \"Set calendar: \" + cal.toString())\n\n    val alarmManager = getSystemService(Context.ALARM_SERVICE) as AlarmManager\n\n    @RequiresApi(Build.VERSION_CODES.LOLLIPOP)  // Overriding doze-mode\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n        val alarmClockInfo =\n                AlarmManager.AlarmClockInfo(cal.timeInMillis, null)\n        alarmManager.setAlarmClock(alarmClockInfo, pendingIntent)\n    }\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) // Overriding doze-mode\n        // Not-working in Nexus 6 - API 25 (7.1.1), but works in API 23 (6.0.1, tested in multiple devices)\n        alarmManager.setExactAndAllowWhileIdle(AlarmManager.RTC_WAKEUP, \n                    cal.timeInMillis, pendingIntent) \n    else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) // Works\n        alarmManager.setExact(AlarmManager.RTC_WAKEUP, cal.timeInMillis, pendingIntent)\n    else // works\n        alarmManager.set(AlarmManager.RTC_WAKEUP, cal.timeInMillis, pendingIntent)\n}\n</code></pre>\n\n<p>The IntentService class is as the following:</p>\n\n<pre><code>class MyAlarmIntentService : IntentService(\"Notification\") {\n\n  override fun onHandleIntent(intent: Intent?) {\n    val obj = intent?.getParcelableExtra&lt;MyObj&gt;(C.KEY_ME) ?: return\n    Lg.d(TAG, \"My alarm fired for - \\n\" + obj.toString())\n  }\n\n  companion object {\n    private val TAG = ContestAlarmIntentService::class.java.simpleName\n  }\n\n}\n</code></pre>\n\n<p>The service is declared in manifest as:</p>\n\n<pre><code>&lt;service android:name=\".services.MyAlarmIntentService\" /&gt;\n</code></pre>\n\n<p>The following is an example of the mentioned log inside <code>setAlarm()</code> method:</p>\n\n<pre><code>E/setAlarm: setting time -&gt; 1514993850 for obj = MyObj{...}\nE/setAlarm: Set calendar: java.util.GregorianCalendar[time=1514993850000,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=libcore.util.ZoneInfo[id=\"Asia/Dhaka\",mRawOffset=21600000,mEarliestRawOffset=23400000,mUseDst=false,mDstSavings=0,transitions=7],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2018,MONTH=0,WEEK_OF_YEAR=1,WEEK_OF_MONTH=1,DAY_OF_MONTH=3,DAY_OF_YEAR=3,DAY_OF_WEEK=4,DAY_OF_WEEK_IN_MONTH=1,AM_PM=1,HOUR=9,HOUR_OF_DAY=21,MINUTE=37,SECOND=30,MILLISECOND=0,ZONE_OFFSET=21600000,DST_OFFSET=0]\n</code></pre>\n\n<p>This used to be a straight-forward code to me, but which fundamental may I be missing for <strong>these 3 days'</strong> of test sessions?</p>\n"}, {"tags": ["java", "kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1514987867, "post_id": 48078681, "comment_id": 83131516, "body": "Sorry, I deleted my previous comment by mistake. I was asking if we need to create a different component for each differently scoped module. Thank you for your comment, I&#39;m going to apply your suggestions to my code"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1514988106, "post_id": 48078681, "comment_id": 83131642, "body": "I created the <code>NetworkComponent</code> and added it as a dependency to the <code>ApiComponent</code>, as you suggested, but I still get the very same issue. I also tried to remove the <code>includes = [NetworkModule::class]</code> from the <code>ApiModule</code>&#39;s <code>@Module</code> annotation, but in this case I get another error <code>okhttp3.OkHttpClient cannot be provided without an @Inject constructor or from an @Provides-annotated method</code> because the <code>ApiModule</code> cannot &quot;see&quot; the <code>OkHttpClient</code> provided by the <code>NetworkModule</code>"}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1514988195, "post_id": 48078681, "comment_id": 83131688, "body": "No worries. Yes, you should have at least one component for each scope (multiple components can have the same scope) (<a href=\"https://google.github.io/dagger/users-guide.html\" rel=\"nofollow noreferrer\">see Singletons and Scoped Bindings</a>). Another method for dealing with multiple scopes is to use <a href=\"https://google.github.io/dagger/subcomponents.html\" rel=\"nofollow noreferrer\">subcomponents</a>, though I don&#39;t have much experience with subcomponents."}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1514988430, "post_id": 48078681, "comment_id": 83131807, "body": "Hm, you would need to remove <code>includes = [NetworkModule::class]</code> from the <code>ApiModule</code>; but I&#39;m not sure why you&#39;re getting this new error. Are you trying to reference the <code>OkHttpClient</code> from somewhere other than the <code>ApiModule</code>? Try cleaning and rebuilding your project too."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1514988760, "post_id": 48078681, "comment_id": 83131975, "body": "I fixed by adding to the <code>NetworkComponent</code> the following method: <code>fun httpClient(): OkHttpClient</code>. In this way the <code>NetworkComponent</code> is able to provide the missing dependency"}], "tags": [], "owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "is_accepted": true, "score": 3, "last_activity_date": 1514987204, "creation_date": 1514987204, "answer_id": 48078681, "question_id": 48078519, "link": "https://stackoverflow.com/questions/48078519/dagger-2-component-with-differently-scoped-modules/48078681#48078681", "title": "Dagger 2 Component with differently scoped modules", "body": "<p>A single module cannot reference two scopes; which is what is happening when you include the <code>NetworkModule</code> in the <code>ApiModule</code> (<code>@Module(includes = [NetworkModule::class])</code>).</p>\n\n<p>However, a module can <em>depend</em> on a component that uses a different scope.</p>\n\n<pre><code>@Component(modules = [NetworkModule::class])\n@Singleton\ninterface NetworkComponent\n\n@Component(dependencies = [NetworkComponent::class], modules = [ApiModule::class])\ninterface ApiComponent {\n    fun inject(target: GithubRetriever)        \n}\n</code></pre>\n"}], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1996, "favorite_count": 1, "accepted_answer_id": 48078681, "answer_count": 1, "score": 3, "last_activity_date": 1514987204, "creation_date": 1514986521, "question_id": 48078519, "link": "https://stackoverflow.com/questions/48078519/dagger-2-component-with-differently-scoped-modules", "title": "Dagger 2 Component with differently scoped modules", "body": "<h1>Context</h1>\n\n<p>I have two Dagger 2 modules:</p>\n\n<ol>\n<li><code>NetworkModule</code>, with <code>@Singleton</code> scope, that provides an HTTP client;</li>\n<li><code>ApiModule</code>, with a custom <code>@UserScope</code> scope, that uses the HTTP client to create a consumer for Github's API.</li>\n</ol>\n\n<p>Then, I create a Dagger 2 component, to provide the Retrofit client.</p>\n\n<h3>NetworkModule.kt</h3>\n\n<pre><code>@Module\nclass NetworkModule {\n    @Provides\n    @Singleton\n    fun provideHttpClient(): OkHttpClient = OkHttpClient.Builder().build()\n}\n</code></pre>\n\n<h3>ApiModule.kt</h3>\n\n<pre><code>@Module(includes = [NetworkModule::class])\nclass ApiModule(private val user: String) {\n\n    @Provides\n    @UserScope\n    fun provideApi(httpClient: OkHttpClient): GithubApi = Retrofit.Builder()\n            .baseUrl(\"https://api.github.com/\")\n            .client(httpClient)\n            .build()\n            .create(GithubApi::class.java)\n}\n</code></pre>\n\n<h3>ApiComponent.kt</h3>\n\n<pre><code>@Component(modules = [ApiModule::class])\n@UserScope\ninterface ApiComponent {\n    fun inject(target: GithubRetriever)\n}\n</code></pre>\n\n<h1>Issue</h1>\n\n<p>When I try to build the application, if I add the <code>@UserScope</code> scope to the <code>ApiComponent</code> then I get the following error message:</p>\n\n<pre><code>e: ApiComponent.java:4: error: ApiComponent scoped with @UserScope may not reference bindings with different scopes:\ne: \ne: @dagger.Component(modules = {ApiModule.class})\ne: ^\ne:       @org.jetbrains.annotations.NotNull @Singleton @Provides okhttp3.OkHttpClient NetworkModule.provideHttpClient()\n</code></pre>\n\n<p>The same happens if I use <code>@Singleton</code> scope instead of <code>@UserScope</code>.</p>\n\n<p>How should I declare the <code>ApiComponent</code> in order to have a successful build?</p>\n"}, {"tags": ["android", "android-asynctask", "kotlin"], "comments": [{"owner": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "edited": false, "score": 0, "creation_date": 1514984621, "post_id": 48077940, "comment_id": 83129701, "body": "Do you want the check to server availability?"}, {"owner": {"reputation": 530, "user_id": 7121101, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7db8be22ef3acc64769580f1ca3f32f6?s=128&d=identicon&r=PG&f=1", "display_name": "Heero Yuy", "link": "https://stackoverflow.com/users/7121101/heero-yuy"}, "reply_to_user": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "edited": false, "score": 0, "creation_date": 1514984771, "post_id": 48077940, "comment_id": 83129775, "body": "yes, i want to check server availability"}, {"owner": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "edited": false, "score": 0, "creation_date": 1514985104, "post_id": 48077940, "comment_id": 83129971, "body": "Are you getting sucess response in the AyncTask?"}, {"owner": {"reputation": 11403, "user_id": 790464, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Gy1Rq.jpg?s=128&g=1", "display_name": "Ahmed Hegazy", "link": "https://stackoverflow.com/users/790464/ahmed-hegazy"}, "edited": false, "score": 1, "creation_date": 1514985148, "post_id": 48077940, "comment_id": 83130003, "body": "You can&#39;t return something from AsyncTask directly because it&#39;s asynchronous. You can make a callback and call it in <code>onPostExecute</code>"}, {"owner": {"reputation": 530, "user_id": 7121101, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7db8be22ef3acc64769580f1ca3f32f6?s=128&d=identicon&r=PG&f=1", "display_name": "Heero Yuy", "link": "https://stackoverflow.com/users/7121101/heero-yuy"}, "reply_to_user": {"reputation": 11403, "user_id": 790464, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Gy1Rq.jpg?s=128&g=1", "display_name": "Ahmed Hegazy", "link": "https://stackoverflow.com/users/790464/ahmed-hegazy"}, "edited": false, "score": 0, "creation_date": 1514985217, "post_id": 48077940, "comment_id": 83130045, "body": "@AhmedHegazy yes I agree, how can I do it with callback?"}, {"owner": {"reputation": 8058, "user_id": 8112541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SyzIV.jpg?s=128&g=1", "display_name": "Goku", "link": "https://stackoverflow.com/users/8112541/goku"}, "edited": false, "score": 0, "creation_date": 1514985359, "post_id": 48077940, "comment_id": 83130102, "body": "@HeeroYuy check this <a href=\"https://stackoverflow.com/questions/2837676/how-to-raise-a-toast-in-asynctask-i-am-prompted-to-used-the-looper\" title=\"how to raise a toast in asynctask i am prompted to used the looper\">stackoverflow.com/questions/2837676/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 7121101, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7db8be22ef3acc64769580f1ca3f32f6?s=128&d=identicon&r=PG&f=1", "display_name": "Heero Yuy", "link": "https://stackoverflow.com/users/7121101/heero-yuy"}, "edited": false, "score": 0, "creation_date": 1514985857, "post_id": 48078236, "comment_id": 83130381, "body": "I will know the status of the server in the onPostExecute, but in my function where it has this line  <code>NetworkConnectionInfo(context).execute()</code> I want to get the result if it&#39;s true or false because i want to use it.  the function is is  <code>if(isServerIsAvailable()){ &#47;&#47;do this}else{&#47;&#47;do this one}</code>"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 530, "user_id": 7121101, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7db8be22ef3acc64769580f1ca3f32f6?s=128&d=identicon&r=PG&f=1", "display_name": "Heero Yuy", "link": "https://stackoverflow.com/users/7121101/heero-yuy"}, "edited": false, "score": 1, "creation_date": 1514985972, "post_id": 48078236, "comment_id": 83130450, "body": "You cannot, because it runs on a different thread! Whatever code you want to run in the true branch, run it directly in onPostExecute!"}, {"owner": {"reputation": 530, "user_id": 7121101, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7db8be22ef3acc64769580f1ca3f32f6?s=128&d=identicon&r=PG&f=1", "display_name": "Heero Yuy", "link": "https://stackoverflow.com/users/7121101/heero-yuy"}, "edited": false, "score": 0, "creation_date": 1514986088, "post_id": 48078236, "comment_id": 83130522, "body": "hmm what I&#39;m trying to achieve is kinda difficult"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 530, "user_id": 7121101, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7db8be22ef3acc64769580f1ca3f32f6?s=128&d=identicon&r=PG&f=1", "display_name": "Heero Yuy", "link": "https://stackoverflow.com/users/7121101/heero-yuy"}, "edited": false, "score": 1, "creation_date": 1514986117, "post_id": 48078236, "comment_id": 83130539, "body": "I think you have to restructure your code, keeping the way threads work in mind."}, {"owner": {"reputation": 831, "user_id": 3423932, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003219973793/picture?type=large", "display_name": "muthuraj", "link": "https://stackoverflow.com/users/3423932/muthuraj"}, "edited": false, "score": 0, "creation_date": 1515002745, "post_id": 48078236, "comment_id": 83140042, "body": "You need to learn more about threads. Server availability check is done on background thread and main (UI) thread is not interrupted. You need to decide what to do while server checking is happening. Show a progressbar or show some text as toast, whatever. After network call is done, onPostExecute runs on main thread from where you can do the actual function you need to do using the server check result."}], "tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1514985577, "creation_date": 1514985577, "answer_id": 48078236, "question_id": 48077940, "link": "https://stackoverflow.com/questions/48077940/how-can-i-return-a-boolean-from-asynctask/48078236#48078236", "title": "How can I return a Boolean from AsyncTask?", "body": "<p>An <code>AsyncTask</code> does not have a return value, since it is asynchronous.</p>\n\n<p>You have to use the result (<code>success</code>) directly in the callback function <code>onPostExecute</code>. This is how <code>AsyncTask</code> is designed and supposed to be used.</p>\n\n<pre><code>override fun onPostExecute(success: Boolean) {\n   // call further functions depending on \"success\"\n   // Note: can access views since it runs on the UI thread\n}\n</code></pre>\n"}], "owner": {"reputation": 530, "user_id": 7121101, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7db8be22ef3acc64769580f1ca3f32f6?s=128&d=identicon&r=PG&f=1", "display_name": "Heero Yuy", "link": "https://stackoverflow.com/users/7121101/heero-yuy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514986233, "creation_date": 1514984449, "last_edit_date": 1514986233, "question_id": 48077940, "link": "https://stackoverflow.com/questions/48077940/how-can-i-return-a-boolean-from-asynctask", "title": "How can I return a Boolean from AsyncTask?", "body": "<p>I have a function that checks network connection then check server availability. If there's network connection it will next check server availability. Unfortunately, checking server availability is through <code>AsyncTask</code>.</p>\n\n<p>This is how I want to use the <code>AsyncTask</code>:</p>\n\n<pre><code>if(NetworkConnectionInfo(context).execute()) { \n    return true \n} else { \n   return false \n}\n</code></pre>\n\n<p>this is the <code>NetworkConnectionInfo</code> class</p>\n\n<pre><code>    class NetworkConnectionInfo : AsyncTask&lt;String, String, Boolean&gt; {\n\n    private var context: Context? = null\n\n    constructor(context:Context):super(){\n        this.context = context\n    }\n\n    override fun onPreExecute() {}\n\n    override fun doInBackground(vararg p0: String?): Boolean {\n        try {\n            val url = URL(\"http://www.example.com/\")\n            val urlc = url.openConnection() as HttpURLConnection\n            urlc.setRequestProperty(\"User-Agent\", \"test\")\n            urlc.setRequestProperty(\"Connection\", \"close\")\n            urlc.setConnectTimeout(1000) // mTimeout is in seconds\n            urlc.connect()\n\n            return urlc.getResponseCode() === 200\n\n        } catch (ex:Exception) {\n            ex.printStackTrace()\n        }\n        return false\n    }\n\n    override fun onProgressUpdate(vararg values: String?) {}\n\n    override fun onPostExecute(success: Boolean) {\n        if(!success) {\n            Toast.makeText(this.context,\"Error connecting server. Please try again later.\", Toast.LENGTH_LONG).show()\n        } else {\n            Toast.makeText(this.context,\"Server is available.\", Toast.LENGTH_LONG).show()\n        }\n    }\n}\n</code></pre>\n\n<p>I want to return <code>success</code> in <code>onPostExecute</code>. I don't know how to approach this.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 3314, "user_id": 3214889, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/StoMh.png?s=128&g=1", "display_name": "Krythic", "link": "https://stackoverflow.com/users/3214889/krythic"}, "edited": false, "score": 0, "creation_date": 1514975339, "post_id": 48075467, "comment_id": 83124631, "body": "Define &quot;better&quot; and &quot;right&quot;."}, {"owner": {"reputation": 769, "user_id": 3812372, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/724d0a55982518b0d5e5ac72fd758481?s=128&d=identicon&r=PG&f=1", "display_name": "vlatkozelka", "link": "https://stackoverflow.com/users/3812372/vlatkozelka"}, "reply_to_user": {"reputation": 3314, "user_id": 3214889, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/StoMh.png?s=128&g=1", "display_name": "Krythic", "link": "https://stackoverflow.com/users/3214889/krythic"}, "edited": false, "score": 1, "creation_date": 1514975437, "post_id": 48075467, "comment_id": 83124691, "body": "@Krythic My problem with kotlin is that you can do almost the same thing in multiple ways. Lateinit, by Delegate , etc ... What I&#39;m asking: Is the way I wrote the class wrong? It would probably work, but did I write a wall of code for something that Kotlin might do in much less?"}, {"owner": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1514976292, "post_id": 48075467, "comment_id": 83125127, "body": "kotlin have default getter and setter then what purpose you used constructor here?"}, {"owner": {"reputation": 769, "user_id": 3812372, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/724d0a55982518b0d5e5ac72fd758481?s=128&d=identicon&r=PG&f=1", "display_name": "vlatkozelka", "link": "https://stackoverflow.com/users/3812372/vlatkozelka"}, "reply_to_user": {"reputation": 10859, "user_id": 3710865, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oROuW.jpg?s=128&g=1", "display_name": "sasikumar", "link": "https://stackoverflow.com/users/3710865/sasikumar"}, "edited": false, "score": 0, "creation_date": 1514977642, "post_id": 48075467, "comment_id": 83125864, "body": "@sasikumar This is a refactor of old java code. My team is used to constructing this class in one line passing everything in a constructor, rather than constructing an empty class then use setters, and it makes sense in our app because all the data is available at time of constructing the class."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1514979681, "post_id": 48075467, "comment_id": 83126985, "body": "Observation: This data structure looks pretty big. Is all of this data required? If so, is there a way related fields can be grouped together into their own types? (e.g. combine <code>userKey</code> and <code>userName</code> into a single type)"}, {"owner": {"reputation": 769, "user_id": 3812372, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/724d0a55982518b0d5e5ac72fd758481?s=128&d=identicon&r=PG&f=1", "display_name": "vlatkozelka", "link": "https://stackoverflow.com/users/3812372/vlatkozelka"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 1, "creation_date": 1514994265, "post_id": 48075467, "comment_id": 83135324, "body": "@byxor totally right, but it&#39;s a project that&#39;s been made like that for a long time. And sometimes you have to stay conform with what your team is used to, and introduce subtle changes rather than changing everything."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1514994425, "post_id": 48075467, "comment_id": 83135432, "body": "@vlatkozelka Understood. I once made a pull request that fixed whitespace in ~30 files that many other developers depended on. Reviewers weren&#39;t so happy."}], "answers": [{"comments": [{"owner": {"reputation": 769, "user_id": 3812372, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/724d0a55982518b0d5e5ac72fd758481?s=128&d=identicon&r=PG&f=1", "display_name": "vlatkozelka", "link": "https://stackoverflow.com/users/3812372/vlatkozelka"}, "edited": false, "score": 0, "creation_date": 1514978567, "post_id": 48076198, "comment_id": 83126385, "body": "I still need to put to other methods in there, and I don&#39;t think this is just a data class. I suppose what I was missing is that I could&#39;ve declared the 2 optional vars in the primary constructor, instead of adding a secondary constructor just for those."}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 769, "user_id": 3812372, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/724d0a55982518b0d5e5ac72fd758481?s=128&d=identicon&r=PG&f=1", "display_name": "vlatkozelka", "link": "https://stackoverflow.com/users/3812372/vlatkozelka"}, "edited": false, "score": 1, "creation_date": 1514978750, "post_id": 48076198, "comment_id": 83126472, "body": "The <i>data class</i> will give you default implementations for comparison and to string conversion. Everything else you need to implement, you&#39;d just add within the body of the class."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 6, "last_activity_date": 1514977880, "creation_date": 1514977880, "answer_id": 48076198, "question_id": 48075467, "link": "https://stackoverflow.com/questions/48075467/whats-the-right-way-to-construct-a-class-in-kotlin/48076198#48076198", "title": "What&#39;s the right way to construct a class in Kotlin", "body": "<p>If the class is complete like this, you can make it a <em>data class</em> as well. Also <em>Kotlin</em> supports default values for properties, so you only need one constructor, the primary one. The following class <em>looks</em> nicer and is almost identical to what you defined.</p>\n\n<pre><code>data class Action(\n     val key: String,\n     val date: Date,\n     val stringValue: String,\n     val autoRecognitionStatus: MeasurementAutoRecognized,\n     val recognitionId: String,\n     val method: MeasurementMethod,\n     val userKey: String,\n     val userName: String,\n     val isInRange: Boolean,\n     var pictureUrl: String? = null,\n     var remotePictureUrl: String? = null\n)\n</code></pre>\n\n<p>If you need the secondary constructor for <em>Java</em>, you can annotate the given constructor with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-overloads/\" rel=\"noreferrer\"><code>@JvmOverloads</code></a>.</p>\n"}], "owner": {"reputation": 769, "user_id": 3812372, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/724d0a55982518b0d5e5ac72fd758481?s=128&d=identicon&r=PG&f=1", "display_name": "vlatkozelka", "link": "https://stackoverflow.com/users/3812372/vlatkozelka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 48076198, "answer_count": 1, "score": 0, "last_activity_date": 1514977880, "creation_date": 1514975002, "last_edit_date": 1514975544, "question_id": 48075467, "link": "https://stackoverflow.com/questions/48075467/whats-the-right-way-to-construct-a-class-in-kotlin", "title": "What&#39;s the right way to construct a class in Kotlin", "body": "<p>I have a class with a lot of non null fields,and nullable ones. If I declare them like </p>\n\n<pre><code>val key : String\n</code></pre>\n\n<p>the Kotlin compiler will of course give me an error telling me they need to be initialized, so I figured I should put the not nullable ones in a constructor, and add a secondary constructor for when I need the nullable fields initialized with non null values. This is to avoid calling a constructor and then setters, I'd then call one constructor instead. This is what it came out looking like</p>\n\n<pre><code>import utilities.Constants\nimport java.util.*\n\nclass Action(val key: String,\n        //val actionNode: ActionNode\n             val date: Date,\n             val stringValue: String,\n             val autoRecognitionStatus: Constants.MeasurementAutoRecognized,\n             val recognitionId: String,\n             val method: Constants.MeasurementMethod,\n             val userKey: String,\n             val userName: String,\n             val isInRange: Boolean) {\n\n\n    var pictureUrl: String? = null\n    var remotePictureUrl: String? = null\n\n\n\n    constructor(key: String,\n            // actionNode: ActionNode\n                date: Date,\n                stringValue: String,\n                autoRecognitionStatus: Constants.MeasurementAutoRecognized,\n                recognitionId: String,\n                method: Constants.MeasurementMethod,\n                userKey: String,\n                userName: String,\n                isInRange: Boolean,\n                pictureUrl: String?,\n                remotePictureUrl: String?)\n            : this(key,\n            // actionNode\n            date,\n            stringValue,\n            autoRecognitionStatus,\n            recognitionId,\n            method,\n            userKey,\n            userName,\n            isInRange) {\n        this.pictureUrl = pictureUrl\n        this.remotePictureUrl = remotePictureUrl\n\n    }\n\n}\n</code></pre>\n\n<p>My problem is that this code just looks horrible. I'm not saying that the looks is what matters the most, but I have a feeling this a wrong way to do it cause of that. Especially cause I'm having to re-write a ton of parameters when I need to delegate to the primary constructor</p>\n\n<p>Is there a better, or \"right\" way to do this?</p>\n\n<p>EDIT: What I'm asking: Did I write a lot of code for something that can be done a lot easier with Kotlin?</p>\n"}, {"tags": ["annotations", "kotlin", "static-methods"], "answers": [{"comments": [{"owner": {"reputation": 5881, "user_id": 2702368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Didw2.gif?s=128&g=1", "display_name": "metacubed", "link": "https://stackoverflow.com/users/2702368/metacubed"}, "edited": false, "score": 0, "creation_date": 1514975016, "post_id": 48075271, "comment_id": 83124470, "body": "I see what you mean. Unfortunately the annotation only has a  <code>@Target({ElementType.TYPE})</code>. I cannot change the annotation as it is owned by a separate team."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 5881, "user_id": 2702368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Didw2.gif?s=128&g=1", "display_name": "metacubed", "link": "https://stackoverflow.com/users/2702368/metacubed"}, "edited": false, "score": 0, "creation_date": 1514975292, "post_id": 48075271, "comment_id": 83124612, "body": "@metacubed You can still use it <code>@file:MyCustomAspect</code> if the annotation is defined in Java with <code>@Target({ElementType.TYPE})</code>"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 1, "last_activity_date": 1514975352, "last_edit_date": 1514975352, "creation_date": 1514974235, "answer_id": 48075271, "question_id": 48075178, "link": "https://stackoverflow.com/questions/48075178/annotations-on-file-classes/48075271#48075271", "title": "Annotations on file classes", "body": "<p>You can use <a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"nofollow noreferrer\"><code>AnnotationTarget.FILE</code></a> to allow for Kotlin defined annotation to target the <code>Kt</code> class generated from a <code>.kt</code> file. Java defined annotation with target <code>ElementType.TYPE</code> can also be used to target Kotlin file class:</p>\n\n<pre><code>@file:MyCustomAspect\n\npackage org.example\n\n@Target(AnnotationTarget.FILE)\nannotation class MyCustomAspect\n\nfun doStuff(){\n\n}\n</code></pre>\n"}], "owner": {"reputation": 5881, "user_id": 2702368, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Didw2.gif?s=128&g=1", "display_name": "metacubed", "link": "https://stackoverflow.com/users/2702368/metacubed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 734, "favorite_count": 0, "accepted_answer_id": 48075271, "answer_count": 1, "score": 1, "last_activity_date": 1514975352, "creation_date": 1514973950, "last_edit_date": 1514975196, "question_id": 48075178, "link": "https://stackoverflow.com/questions/48075178/annotations-on-file-classes", "title": "Annotations on file classes", "body": "<p>In my current code (Java), I'm doing some custom annotation processing using class-level Java annotations i.e. the annotations are <code>@java.lang.annotation.Target({ElementType.TYPE})</code>.</p>\n\n<p>The target classes contain only static utility methods, so I used file-scoped functions in Kotlin. How do I add these annotations to the generated <code>Kt</code> class?</p>\n\n<p>In Java:</p>\n\n<pre><code>// Utils.java\n\npackage com.example;\n\n@MyCustomAspect\npublic void Utils {\n\n    public static void doStuff() {\n        System.out.println(\"Hello\";\n    }\n}\n</code></pre>\n\n<p>Now in Kotlin:</p>\n\n<pre><code>// Utils.kt\n\npackage com.example;\n\n// ??? @MyCustomAspect ???\n\nfun doStuff() {\n    System.out.println(\"Hello\";\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1514963555, "post_id": 48072263, "comment_id": 83119103, "body": "See <a href=\"https://stackoverflow.com/a/28287492/1524450\">stackoverflow.com/a/28287492/1524450</a>  <code>event</code> should remain unchanged until you return from <code>onTouchEvent</code>, but after that all bets are off. Make a copy of the event if you need those values later on."}], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 2, "last_activity_date": 1514963638, "creation_date": 1514963638, "answer_id": 48072818, "question_id": 48072263, "link": "https://stackoverflow.com/questions/48072263/kotlin-runnable-in-a-thread-is-using-a-different-value-than-the-one-passed/48072818#48072818", "title": "Kotlin runnable in a thread is using a different value than the one passed", "body": "<p><a href=\"https://stackoverflow.com/questions/28286669/motionevent-changes-from-action-up-to-action-down\">Android framework may reuse instances of <code>MotionEvent</code> to avoid heap pollution and excessive garbage collection</a>. The <a href=\"https://developer.android.com/reference/android/view/MotionEvent.html\" rel=\"nofollow noreferrer\"><code>recycle</code></a> method in particular is used to mark the <code>event</code> as immediately available for reuse:</p>\n\n<blockquote>\n  <p>Recycle the MotionEvent, to be re-used by a later caller. After calling this function you must not ever touch the event again.</p>\n</blockquote>\n\n<p>Before your <code>Runnable</code> you've created has a chance to execute the <code>onTouchEvent</code> has already returned and thus Android has reused the <code>MotionEvent</code> instance. </p>\n\n<p>You can <a href=\"https://developer.android.com/reference/android/view/MotionEvent.html#obtain(android.view.MotionEvent)\" rel=\"nofollow noreferrer\"><code>obtain</code></a> your own copy for processing like so:</p>\n\n<pre><code>val myEvent = MotionEvent.obtain(event)\n// do some work\nmyEvent.recycle()\n</code></pre>\n\n<p>Your example would then look like:</p>\n\n<pre><code>val myEvent = MotionEvent.obtain(event)\nthread {\n    if(threadRunning) {\n        return@Runnable\n    }\n    threadRunning = true\n    consumeTouchEvent(myEvent)\n    myEvent.recycle()\n}\nreturn super.onTouchEvent(event)\n</code></pre>\n"}], "owner": {"reputation": 10162, "user_id": 430720, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/028694798d002eba1e272107640656ee?s=128&d=identicon&r=PG", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/430720/jaguar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 1, "accepted_answer_id": 48072818, "answer_count": 1, "score": 1, "last_activity_date": 1514963638, "creation_date": 1514960870, "question_id": 48072263, "link": "https://stackoverflow.com/questions/48072263/kotlin-runnable-in-a-thread-is-using-a-different-value-than-the-one-passed", "title": "Kotlin runnable in a thread is using a different value than the one passed", "body": "<p>I am trying to run a thread on Android, with the following code:</p>\n\n<pre><code>    override fun onTouchEvent(event: MotionEvent?): Boolean {\n        Log.d(\"CustomImage\", \" touched : ${event!!.x}, ${event.y}\")\n        Thread(Runnable {\n            if(threadRunning) {\n                return@Runnable\n            }\n            threadRunning = true\n            consumeTouchEvent(event)\n        }).start()\n\n\n        return super.onTouchEvent(event)\n    }\n\n    private fun consumeTouchEvent(event: MotionEvent) {\n        Log.d(\"CustomImage\", \" consumeTouchEvent x,y : ${event.x}, ${event.y}\")\n        Thread.sleep(1000)   //long running task\n        threadRunning = false\n    }\n</code></pre>\n\n<p>Here's the corresponding log after I touch the view:</p>\n\n<pre><code>01-03 00:17:05.654 8122-8122/me.exp D/CustomImage:  touched : 960.0, 299.0\n01-03 00:17:05.656 8122-8250/me.exp D/CustomImage:  consumeTouchEvent x,y : 960.0, 509.0\n</code></pre>\n\n<p>As evident, the 'Y' value for touch event is 299.0, but in consume method, it gets updated to 509. </p>\n\n<p>One possible explanation I could think was that multiple touch events are fired when I touch the screen and what's logged in <code>consumeTouchEvent()</code> is a later value - but in that case, <code>onTouchEvent()</code> should be logging all the touch values.</p>\n\n<p>This problem goes away if I run <code>consumeTouchEvent()</code> without spawning a new thread.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 0, "creation_date": 1514961503, "post_id": 48072086, "comment_id": 83118313, "body": "aswesome. although its ashame i have to write apply closure at all. there is already a setQuery(...) method auto generated so i was hoping i could get rid of writing setQuery(...)  altogether. your way i still have to declare it. but good answer."}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 2, "last_activity_date": 1515001472, "last_edit_date": 1515001472, "creation_date": 1514959895, "answer_id": 48072086, "question_id": 48071724, "link": "https://stackoverflow.com/questions/48071724/android-kotlin-how-to-make-java-builder-setter-methods/48072086#48072086", "title": "Android Kotlin - How to make java builder setter methods", "body": "<p>This is actually pretty easy with the use of <code>apply</code>, which does exactly what you need: take a block of action and return the instance afterwards:</p>\n\n<pre><code>fun setQuery(query: String) = apply {\n    this.query = query\n}\n\nfun setPageNum(pageNum: Int)  = apply {\n    this.pageNum = pageNum\n}\n</code></pre>\n\n<p>Also see this <a href=\"https://stackoverflow.com/a/47955167/8073652\">answer</a>.</p>\n"}], "owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 1, "accepted_answer_id": 48072086, "answer_count": 1, "score": 2, "last_activity_date": 1515001472, "creation_date": 1514957735, "last_edit_date": 1514961018, "question_id": 48071724, "link": "https://stackoverflow.com/questions/48071724/android-kotlin-how-to-make-java-builder-setter-methods", "title": "Android Kotlin - How to make java builder setter methods", "body": "<p>So I have already read <a href=\"https://stackoverflow.com/questions/36140791/how-to-implement-builder-pattern-in-kotlin\">this article</a> but i don't think its completely what i want.  I have an object that dagger is creating for me via constructor injection. </p>\n\n<p>Lets start off in java what it looks like:</p>\n\n<pre><code>    public class AlgoliaSearchUsecase extends BaseUseCase {\n\n\n    private final Index algoliaIndex;\n    private final SearchRepository searchRepository;\n\n    String query;\n    int pageNum;\n\n    @Inject\n    public AlgoliaSearchUsecase(Index algoliaIndex, SearchRepository searchRepository, LoginRepository loginRepository) {\n        super(loginRepository);\n        this.algoliaIndex = algoliaIndex;\n        this.searchRepository = searchRepository;\n    }\n\n    @Override\n    protected Observable&lt;AlgoliaSearchResultsModel&gt; buildUseCaseObservable() {\n        return searchRepository.fetchAlgoliaSearchResults(query,algoliaIndex,pageNum);\n    }\n\n//***THESE TWO SETTERS ARE KEY TO MY QUESTION **********\n    public AlgoliaSearchUsecase setQuery(String query) {\n        this.query = query;\n        return this;\n    }\n\n    public AlgoliaSearchUsecase setPageNum(int pageNum) {\n        this.pageNum = pageNum;\n        return this;\n    }\n}\n</code></pre>\n\n<p>notice that the two setter methods return the object itself. It makes it convenient to write code like this:</p>\n\n<pre><code>//dagger will build this for me\n@Inject AlgoliaSearchUsecase searchUseCase;\n</code></pre>\n\n<p>//... later on i can call its convenience methods like this:</p>\n\n<pre><code>searchUseCase\n                .setQuery(query)\n                .setPageNum(pageNum).\n                execute(new DefaultSubscriber(){/.../};\n</code></pre>\n\n<p>Now i've converted the class AlgoliaSearchUsecase into a Kotlin class like this:</p>\n\n<pre><code> class AlgoliaSearchUsecase @Inject\nconstructor(private val algoliaIndex: Index, private val searchRepository: SearchRepository, loginRepository: LoginRepository) : BaseUseCase(loginRepository) {\n\n    internal var query: String = \"\"\n    internal var pageNum: Int = 0\n\n    override fun buildUseCaseObservable(): Observable&lt;AlgoliaSearchResultsModel&gt;? {\n        return searchRepository.fetchAlgoliaSearchResults(query, algoliaIndex, pageNum)\n    }\n\n//i know i dont need these settings anymore but how can i still get the convence methods to return the object ?\n    fun setQuery(query: String): AlgoliaSearchUsecase {\n        this.query = query\n        return this\n    }\n\n    fun setPageNum(pageNum: Int): AlgoliaSearchUsecase {\n        this.pageNum = pageNum\n        return this\n    }\n}\n</code></pre>\n\n<p>do i still have to keep these setter methods if i want the convenience methods (i.e. builder methods)?  Remember dagger is creating this <code>AlgoliaSearchUsecase</code> for me by constructor injection so i dont have control of the constructor when im using it.  </p>\n\n<p>From the article provided it was mentioned i could do something like this:</p>\n\n<pre><code>val searchUseCase = AlgoliaSearchUsecase().apply{ query = \"Ford\"; pageNum = 2 }\n</code></pre>\n\n<p>but i am not in control of the constructor, dagger is. so i dont think i can do this. How can i still use the convenience methods in the setters like i did in java ?</p>\n"}, {"tags": ["spring", "model-view-controller", "kotlin", "thymeleaf"], "answers": [{"comments": [{"owner": {"reputation": 841, "user_id": 4119226, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/LceKu.png?s=128&g=1", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u0412\u0430\u0441\u0438\u043b\u044c\u0435\u0432", "link": "https://stackoverflow.com/users/4119226/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%92%d0%b0%d1%81%d0%b8%d0%bb%d1%8c%d0%b5%d0%b2"}, "edited": false, "score": 0, "creation_date": 1519627278, "post_id": 48073596, "comment_id": 84970398, "body": "Thanks! It should definitely be noted somewhere in documentation."}], "tags": [], "owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "is_accepted": true, "score": 5, "last_activity_date": 1514967510, "creation_date": 1514967510, "answer_id": 48073596, "question_id": 48068452, "link": "https://stackoverflow.com/questions/48068452/spring-mvc-thymeleaf-kotlin/48073596#48073596", "title": "Spring MVC Thymeleaf Kotlin", "body": "<p>The problem is you use <code>val</code> instead of <code>var</code> in your data class.</p>\n\n<p>And  Spring MVC Thymeleaf calls the no args constructor of your entity class(data classes always have one).\nAnd cannot set the fields because they are final.</p>\n\n<p>Just replacing <code>val</code> with <code>var</code> solves the problem.</p>\n"}], "owner": {"reputation": 305, "user_id": 7070600, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/--ClBhC86cmU/AAAAAAAAAAI/AAAAAAAAI2k/yo-B1bSFoL4/photo.jpg?sz=128", "display_name": "Norbert Nowak", "link": "https://stackoverflow.com/users/7070600/norbert-nowak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1524, "favorite_count": 0, "accepted_answer_id": 48073596, "answer_count": 1, "score": 3, "last_activity_date": 1514967510, "creation_date": 1514930586, "last_edit_date": 1514938594, "question_id": 48068452, "link": "https://stackoverflow.com/questions/48068452/spring-mvc-thymeleaf-kotlin", "title": "Spring MVC Thymeleaf Kotlin", "body": "<p>I'm trying to pass form to controller but object is empty (looks like gets values from default constructor instead of form). And dunno why <code>@Valid</code> doesn't work.</p>\n\n<p>Code:</p>\n\n<p><strong>Endpoint</strong> </p>\n\n<pre><code>    @PostMapping(\"/add\") \nfun addDevice(@Valid @ModelAttribute device: Device, model: ModelMap): ModelAndView {\n    deviceRepository.save(device)\n    return ModelAndView(\"redirect:/devices/all\", model)\n}\n</code></pre>\n\n<p><strong>Entity:</strong></p>\n\n<pre><code>@Entity\ndata class Device(\n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        val id: Int? = null,\n        @NotNull\n        val name: String? = \"\",\n        @Min(10)\n        @Max(30)\n        val price: Int? = null,\n        @Size(min = 8)\n        val secretPhrase: String? = \"\"\n) : Serializable\n</code></pre>\n\n<p><strong>Form</strong></p>\n\n<pre><code>&lt;h1&gt;Add Device&lt;/h1&gt;\n    &lt;!--/*@thymesVar id=\"device\" type=\"com.example.demo.Device\"*/--&gt;\n    &lt;form action=\"#\" th:action=\"@{/devices/add}\" th:object=\"${device}\" th:method=\"post\"&gt;\n        &lt;div class=\"col-md-12\"&gt;\n            &lt;label&gt;Name Cannot Be Null&lt;/label&gt;\n            &lt;input type=\"text\" minlength=\"1\" th:field=\"*{name}\"&gt;&lt;/input&gt;\n        &lt;/div&gt;\n        &lt;div class=\"col-md-12\"&gt;\n            &lt;label&gt;Secret Phrase Min Length 8&lt;/label&gt;\n            &lt;input type=\"password\" minlength=\"8\" th:field=\"*{secretPhrase}\"&gt;&lt;/input&gt;\n        &lt;/div&gt;\n        &lt;div class=\"col-md-12\"&gt;\n            &lt;label&gt;Price Between 10-30&lt;/label&gt;\n            &lt;input type=\"number\" min=\"10\" max=\"30\" th:field=\"*{price}\"&gt;&lt;/input&gt;\n        &lt;/div&gt;\n        &lt;div class=\"col-md-12\"&gt;\n            &lt;input type=\"submit\" value=\"Add\"&gt;&lt;/input&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 2, "creation_date": 1514923203, "post_id": 48066986, "comment_id": 83107453, "body": "I&#39;m guessing your async request callback is not yet reached when you already started the next activity. You should start it once the request has been completed, in other words, inside your <code>Response.Listener</code> block"}, {"owner": {"reputation": 23, "user_id": 3634549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff26625de91f82f3dafe06b0369f6fb?s=128&d=identicon&r=PG", "display_name": "bob3000", "link": "https://stackoverflow.com/users/3634549/bob3000"}, "reply_to_user": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1514923563, "post_id": 48066986, "comment_id": 83107604, "body": "That makes perfect sense! Thanks a lot!"}], "answers": [{"comments": [{"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1514959051, "post_id": 48067238, "comment_id": 83117422, "body": "@Mango You can only mark your own answer as accepted if the question is at least two days old, giving other people the chance to write a possibly better answer"}], "tags": [], "owner": {"reputation": 23, "user_id": 3634549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff26625de91f82f3dafe06b0369f6fb?s=128&d=identicon&r=PG", "display_name": "bob3000", "link": "https://stackoverflow.com/users/3634549/bob3000"}, "is_accepted": true, "score": 0, "last_activity_date": 1514923929, "creation_date": 1514923929, "answer_id": 48067238, "question_id": 48066986, "link": "https://stackoverflow.com/questions/48066986/modify-outer-class-through-anonymous-inner-object-in-kotlin/48067238#48067238", "title": "modify outer class through anonymous inner object in kotlin", "body": "<p>The question was answered in the comments. The HTTP request handn't returned yet when the <code>show()</code> method was called. I got confused by the debugger because it makes it look like it's already there.  </p>\n\n<p>Thanks @Chisko</p>\n"}], "owner": {"reputation": 23, "user_id": 3634549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff26625de91f82f3dafe06b0369f6fb?s=128&d=identicon&r=PG", "display_name": "bob3000", "link": "https://stackoverflow.com/users/3634549/bob3000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 48067238, "answer_count": 1, "score": 1, "last_activity_date": 1514923929, "creation_date": 1514922695, "question_id": 48066986, "link": "https://stackoverflow.com/questions/48066986/modify-outer-class-through-anonymous-inner-object-in-kotlin", "title": "modify outer class through anonymous inner object in kotlin", "body": "<p>I'm writing my first Android app in Kotlin.  </p>\n\n<p>What I'm trying to do is to issue an HTTP request (Volley) in order to fetch some data which shall be written into the object's properties.<br>\nThat works fine so far until the Volley response listener is left. Afterwards the properties are back to null.</p>\n\n<p>This is the caller:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val haiku = Haiku(applicationContext)\n        haiku.load() // populates 3 properties (author, body, title)\n        haiku.show() // author, body, title are back to null here\n    }\n}\n</code></pre>\n\n<p>The callee:</p>\n\n<pre><code>class Haiku(var context: Context? = null, var title: String? = null, var body: String? = null,\n        var author: String? = null) : Parcelable {  // parcelable implementaion left out here\n\n\n    fun load() {\n        val stringRequest = object : StringRequest(Request.Method.GET, EndPoints.URL_GET_HAIKU,\n            Response.Listener { response -&gt;\n                try {\n                    val json = JSONObject(response) // proper payload arrives\n                    val haiku = json[\"haiku\"] as JSONObject\n                    this@Haiku.title = haiku[\"title\"] as String // all properties look alright here\n                    this@Haiku.author = haiku[\"author\"] as String\n                    this@Haiku.body = haiku[\"body\"] as String\n                } catch (e: JSONException) {\n                    Toast.makeText(context, R.string.haiku_not_fetched,\n                            Toast.LENGTH_LONG).show()\n                }\n            },\n            Response.ErrorListener { error -&gt;\n                Toast.makeText(context, R.string.haiku_not_fetched,\n                        Toast.LENGTH_LONG).show()\n            }) {\n        }\n        VolleySingleton.instance?.addToRequestQueue(stringRequest)\n    }\n\n    fun show() {  // when called after the load method title, body, author are back to null\n        val intent = Intent(context, HaikuDisplayActivity::class.java)\n        intent.putExtra(EXTRA_HAIKU, this)\n        context!!.startActivity(intent)\n    }\n}\n</code></pre>\n\n<p>It's probably an issue with the object's scope but I wasn't able to figure out why the values arn't preserved. Thanks a lot for any kind for help!</p>\n"}, {"tags": ["kotlin", "kotlin-multiplatform"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3063682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4811c0456bc6f56007cee934e35268c1?s=128&d=identicon&r=PG&f=1", "display_name": "denniss17", "link": "https://stackoverflow.com/users/3063682/denniss17"}, "edited": false, "score": 0, "creation_date": 1515358891, "post_id": 48105851, "comment_id": 83260875, "body": "That is indeed what I resolved to in the end, and it fixes it. Thanks! Now lets hope that support is added soon :)"}, {"owner": {"reputation": 480, "user_id": 1155758, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e714c1e1c87e57338e363664a2853c1c?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/1155758/manish"}, "edited": false, "score": 0, "creation_date": 1546230018, "post_id": 48105851, "comment_id": 94804446, "body": "Anything similar for maven?"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 480, "user_id": 1155758, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e714c1e1c87e57338e363664a2853c1c?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/1155758/manish"}, "edited": false, "score": 0, "creation_date": 1546394700, "post_id": 48105851, "comment_id": 94837918, "body": "@Manish, multiplatform projects are not currently supported in Maven to start with, but if you&#39;re just looking for something like &quot;Delegate IDE build/run actions to maven&quot; it can be found in &quot;Build tools &gt; Maven &gt; Runner&quot; settings page in the recent versions of IDEA."}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 4, "last_activity_date": 1515114681, "creation_date": 1515114681, "answer_id": 48105851, "question_id": 48066754, "link": "https://stackoverflow.com/questions/48066754/kotlin-multiplatform-jvm-type-mismatch-in-intellij/48105851#48105851", "title": "Kotlin multiplatform JVM type mismatch in IntelliJ", "body": "<p>You need to delegate build/run actions to Gradle, since building multiplatform projects with IDEA is not supported at this moment.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fHF2n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fHF2n.png\" alt=\"Build &gt; Build Tools &gt; Gradle &gt; Runner\"></a></p>\n"}], "owner": {"reputation": 35, "user_id": 3063682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4811c0456bc6f56007cee934e35268c1?s=128&d=identicon&r=PG&f=1", "display_name": "denniss17", "link": "https://stackoverflow.com/users/3063682/denniss17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2309, "favorite_count": 0, "accepted_answer_id": 48105851, "answer_count": 1, "score": 2, "last_activity_date": 1549804309, "creation_date": 1514921592, "last_edit_date": 1549804309, "question_id": 48066754, "link": "https://stackoverflow.com/questions/48066754/kotlin-multiplatform-jvm-type-mismatch-in-intellij", "title": "Kotlin multiplatform JVM type mismatch in IntelliJ", "body": "<p>I have a project which contains the following modules:</p>\n\n<ul>\n<li>common</li>\n<li>common-js</li>\n<li>common-jvm</li>\n<li>backend</li>\n<li>web</li>\n</ul>\n\n<p>The idea is that I put my shared (kotlin) code (mainly models) in common, which can be used in both the kotlin driven backend and the javascript driven webapp using the recently introduced multiplatform support. To do this, I created a new multiplatform application in Intellij, and added the backend and web modules to it.</p>\n\n<p>An example class in the common module:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>data class Show(\n    val id: Long,\n    val type: ShowType,\n    val title: String,\n    var description: String? = null\n)\n</code></pre>\n\n<p>The backend is a simple spring boot application. It has a dependency on the common-jvm project:</p>\n\n<pre class=\"lang-gradle prettyprint-override\"><code>compile project(\":common-jvm\")\n</code></pre>\n\n<p>Now when I run <code>gradle bootRun</code>, the application starts and works fine. However, when I try to run the same application using IntelliJ, I get errors like:</p>\n\n<blockquote>\n  <p>Error:(68, 26) Kotlin: Type mismatch: inferred type is <code>kotlin.Long</code> but <code>java.lang.Long</code> was expected<br/>\n  Error:(68, 65) Kotlin: Type mismatch: inferred type is <code>kotlin.String!</code> but <code>java.lang.String</code> was expected</p>\n</blockquote>\n\n<p>On this line, I try to create an instance of the <code>Show</code> model using data from a json source:\n</p>\n\n<pre><code>val movie = Show(json.get(id).asLong(), ShowType.MOVIE, json.get(movieTitle).asText())\n</code></pre>\n\n<p>I am using Kotlin 1.2.10 and spring boot 1.5.9.RELEASE. </p>\n\n<p>Anybody who knows what causes this and how it can be solved? I tried putting <code>-Xmulti-platform</code> in the additional command line parameters in the project structures for the backend module, but this did not work either.</p>\n"}, {"tags": ["android", "kotlin", "tuples"], "comments": [{"owner": {"reputation": 1486, "user_id": 5923973, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-hWLYePDKLNk/AAAAAAAAAAI/AAAAAAAAAMs/p-uWhdoLCFY/photo.jpg?sz=128", "display_name": "Leandro Ocampo", "link": "https://stackoverflow.com/users/5923973/leandro-ocampo"}, "edited": false, "score": 2, "creation_date": 1514911342, "post_id": 48063269, "comment_id": 83102454, "body": "Are you sure it is a good idea to store fragments when using adapter? Maybe you should have a look at this: <a href=\"https://stackoverflow.com/questions/7951730/viewpager-and-fragments-whats-the-right-way-to-store-fragments-state\" title=\"viewpager and fragments whats the right way to store fragments state\">stackoverflow.com/questions/7951730/&hellip;</a>"}, {"owner": {"reputation": 1476, "user_id": 3710341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92019ee5ebb2b68bb97d2bd2547dd93f?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Chapagain", "link": "https://stackoverflow.com/users/3710341/sagar-chapagain"}, "reply_to_user": {"reputation": 1486, "user_id": 5923973, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-hWLYePDKLNk/AAAAAAAAAAI/AAAAAAAAAMs/p-uWhdoLCFY/photo.jpg?sz=128", "display_name": "Leandro Ocampo", "link": "https://stackoverflow.com/users/5923973/leandro-ocampo"}, "edited": false, "score": 0, "creation_date": 1514972020, "post_id": 48063269, "comment_id": 83122793, "body": "We need to define which fragments should be shown in viewpager, above implementation extending <code>FragmentPagerAdapter</code> will facilitate this and do other internal hard works itself. I think this is widely accepted implementation and is used by most people."}], "answers": [{"comments": [{"owner": {"reputation": 1476, "user_id": 3710341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92019ee5ebb2b68bb97d2bd2547dd93f?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Chapagain", "link": "https://stackoverflow.com/users/3710341/sagar-chapagain"}, "edited": false, "score": 0, "creation_date": 1514972828, "post_id": 48063358, "comment_id": 83123231, "body": "Since we have to use position(int value) which is used in override functions, so I am sticking with the list of Pair and follow your thought on micro-optimization :)"}], "tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1514982824, "last_edit_date": 1514982824, "creation_date": 1514905994, "answer_id": 48063358, "question_id": 48063269, "link": "https://stackoverflow.com/questions/48063269/performance-while-using-pair-in-kotlin-for-android/48063358#48063358", "title": "Performance while using Pair in Kotlin for Android", "body": "<p>Using a <code>Pair</code> clearly improves readability and maintainability, so go with that. </p>\n\n<p>But I would even go further an use a <code>Map</code> instead, if there wasn't the constraint that you need to access the elements via index (<code>getItem(position: Int)</code>).</p>\n\n<pre><code>private val fragmentToTitleMap = HashMap&lt;Fragment, String&gt;()\n</code></pre>\n\n<p>Add to it:</p>\n\n<pre><code>fragmentToTitleMap[someFragment] = \"someTitle\"\n</code></pre>\n\n<hr>\n\n<p>Don't think too much about micro-optimization. It should not make a noticeable difference in this case, since you won't have +100 Fragments.</p>\n"}], "owner": {"reputation": 1476, "user_id": 3710341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92019ee5ebb2b68bb97d2bd2547dd93f?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Chapagain", "link": "https://stackoverflow.com/users/3710341/sagar-chapagain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 914, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550393255, "creation_date": 1514905542, "last_edit_date": 1550393255, "question_id": 48063269, "link": "https://stackoverflow.com/questions/48063269/performance-while-using-pair-in-kotlin-for-android", "title": "Performance while using Pair in Kotlin for Android", "body": "<p>I have been using the following adapter class for <code>ViewPager</code>. It was converted to Kotlin from java.</p>\n\n<pre><code>class ViewPagerAdapter(manager: FragmentManager) : FragmentPagerAdapter(manager) {\n    private val mFragmentList = ArrayList&lt;Fragment&gt;()\n    private val mFragmentTitleList = ArrayList&lt;String&gt;()\n\n    override fun getItem(position: Int): Fragment {\n        return mFragmentList[position]\n    }\n\n    override fun getCount(): Int {\n        return mFragmentList.size\n    }\n\n    fun addFragment(fragment: Fragment, title: String) {\n        mFragmentList.add(fragment)\n        mFragmentTitleList.add(title)\n    }\n\n    override fun getPageTitle(position: Int): CharSequence? {\n        return mFragmentTitleList[position]\n    }\n}\n</code></pre>\n\n<p>To minimize number of lines I tried using Kotlin <strong><code>Pair</code></strong>. And convert the above implementation to the following. Now I am curious about the performance of this implementation using <code>Pair</code>. Could I get a logical explanation on this?</p>\n\n<pre><code>class ViewPagerAdapter(manager: FragmentManager) : FragmentPagerAdapter(manager) {\n    private val pairs = ArrayList&lt;Pair&lt;Fragment, String&gt;&gt;()\n    fun addFragment(fragment: Fragment, title: String) = pairs.add(Pair(fragment, title))\n    override fun getItem(position: Int): Fragment = pairs[position].first\n    override fun getCount(): Int = pairs.size\n    override fun getPageTitle(position: Int): CharSequence? = pairs[position].second\n}\n</code></pre>\n"}, {"tags": ["java", "lambda", "kotlin"], "comments": [{"owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "edited": false, "score": 0, "creation_date": 1514905744, "post_id": 48063196, "comment_id": 83099346, "body": "I tried this: <a href=\"https://gist.github.com/jrtapsell/b05f83754ade9089fa371373d437b4c7\" rel=\"nofollow noreferrer\">gist.github.com/jrtapsell/b05f83754ade9089fa371373d437b4c7</a> which seemed to work, could you see what the difference to your code is please"}, {"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "reply_to_user": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "edited": false, "score": 0, "creation_date": 1514905803, "post_id": 48063196, "comment_id": 83099387, "body": "oh well.. sorry forgot a relevant part.. updating now"}], "answers": [{"comments": [{"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514907476, "post_id": 48063526, "comment_id": 83100327, "body": "how to narrow down the type of <code>submissions</code> in the lambda block. If i specify it to <code>List&lt;Submission&gt;</code> like that <code>new Function2&lt;List&lt;Submission&gt;, Exception, Unit&gt;()</code> it says wrong 2nd argument type"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514907700, "post_id": 48063526, "comment_id": 83100434, "body": "There is no typesafe way to narrow the type of <code>submissions</code> <i>in the lambda block</i>.  It&#39;s type is determined by its declaration, and converting it to a narrower type requires a cast.  You could create a different object of suitable type, say by <code>new ArrayList&lt;Submission&gt;(submissions)</code>, but what I was suggesting was that you change the type of <code>submissions</code> in its declaration (if that&#39;s the alternative you select)."}, {"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514908254, "post_id": 48063526, "comment_id": 83100736, "body": "Mh okay, and why is it working like this with pure kotlin?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514908832, "post_id": 48063526, "comment_id": 83101069, "body": "@martynmlostekk, that would depend on the kotlin use that works for you, and possibly on some kotlin-specific semantics.  I cannot speak to the details as you have not presented the relevant working source.  That anyway would be a separate question."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1514906662, "creation_date": 1514906662, "answer_id": 48063526, "question_id": 48063196, "link": "https://stackoverflow.com/questions/48063196/kotlin-vs-java-calling-function-with-lambda-parameter/48063526#48063526", "title": "Kotlin vs. Java: Calling function with lambda parameter", "body": "<p>You have not disclosed the type of variable <code>submissions</code>, but the error message appears to indicate that it is <code>List&lt;? extends Submission&gt;</code>.  This is a different type from <code>List&lt;Submission&gt;</code>, and references of the former type are not assignable to variables of the latter type (though the other way around is ok).</p>\n\n<p>That presents at least two problems for you:</p>\n\n<ul>\n<li>the lambda itself is not type-correct where it invokes <code>updateSubmissions()</code>, and</li>\n<li>the lambda's type, which comprises its parameter types, is incompatible with the type of the second parameter of <code>loadSubmissions()</code>.</li>\n</ul>\n\n<p>To fix this, you need either to broaden the parameter types of those two methods or to narrow the type of variable <code>submissions</code>.</p>\n"}], "owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1720, "favorite_count": 0, "accepted_answer_id": 48063526, "answer_count": 1, "score": 1, "last_activity_date": 1514906662, "creation_date": 1514905222, "last_edit_date": 1514905936, "question_id": 48063196, "link": "https://stackoverflow.com/questions/48063196/kotlin-vs-java-calling-function-with-lambda-parameter", "title": "Kotlin vs. Java: Calling function with lambda parameter", "body": "<p>I am having this function defined in a kotlin file</p>\n\n<pre><code>fun loadSubmissions(projectId: Long?, completion: (List&lt;Submission&gt;, Exception) -&gt; Unit) { ... }\n</code></pre>\n\n<p>And want to call it from Java like this</p>\n\n<pre><code>loadSubmissions(project.getProjectId(), (submissions, e) -&gt;\n    {\n        updateSubmissions(submissions);\n        return null;\n    });\n</code></pre>\n\n<p>with </p>\n\n<pre><code>void updateSubmissions(List&lt;Submission&gt; submissionList)\n{ .. }\n</code></pre>\n\n<p>But it gives me </p>\n\n<pre><code>Error:(226, 35) error: incompatible types: List&lt;CAP#1&gt; cannot be \nconverted to List&lt;Submission&gt;\nwhere CAP#1 is a fresh type-variable:\nCAP#1 extends Submission from capture of ? extends Submission\n</code></pre>\n\n<p>As I realize the parameter of the lambda function seems to be <code>List&lt;CAP#&gt;</code> instead of the expected and defined <code>List&lt;Submission&gt;</code></p>\n\n<p>If i convert the class to java, i can easily call that function with the lambda callback.</p>\n\n<p><strong>What am I doing wrong</strong></p>\n"}, {"tags": ["android", "kotlin", "simpledateformat", "date-formatting", "android-date"], "comments": [{"owner": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1514904661, "post_id": 48063035, "comment_id": 83098832, "body": "It looks like <code>2017</code> in your image."}, {"owner": {"reputation": 314, "user_id": 1117834, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/5fdf053509c07900933bfdf324177446?s=128&d=identicon&r=PG&f=1", "display_name": "Alex2452", "link": "https://stackoverflow.com/users/1117834/alex2452"}, "edited": false, "score": 0, "creation_date": 1514904830, "post_id": 48063035, "comment_id": 83098920, "body": "Looks like your camera is saving file with wrong date, so is the image&#39;s metadata corrupted."}, {"owner": {"reputation": 5088, "user_id": 2077479, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/0Wh1v.png?s=128&g=1", "display_name": "Jongz Puangput", "link": "https://stackoverflow.com/users/2077479/jongz-puangput"}, "reply_to_user": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1514904863, "post_id": 48063035, "comment_id": 83098939, "body": "@Heisen-Berg it&#39;s 2017, but when I use SimpleDateFormat to format date result is 2016"}, {"owner": {"reputation": 5088, "user_id": 2077479, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/0Wh1v.png?s=128&g=1", "display_name": "Jongz Puangput", "link": "https://stackoverflow.com/users/2077479/jongz-puangput"}, "reply_to_user": {"reputation": 314, "user_id": 1117834, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/5fdf053509c07900933bfdf324177446?s=128&d=identicon&r=PG&f=1", "display_name": "Alex2452", "link": "https://stackoverflow.com/users/1117834/alex2452"}, "edited": false, "score": 0, "creation_date": 1514904947, "post_id": 48063035, "comment_id": 83098979, "body": "@Hubertoss is it related to camera file saving ??"}, {"owner": {"reputation": 314, "user_id": 1117834, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/5fdf053509c07900933bfdf324177446?s=128&d=identicon&r=PG&f=1", "display_name": "Alex2452", "link": "https://stackoverflow.com/users/1117834/alex2452"}, "edited": false, "score": 1, "creation_date": 1514905325, "post_id": 48063035, "comment_id": 83099142, "body": "Well, I spotted that the picture is saved with date of 2017/01/01 in the name, if they are saved externally then I would check it. Otherwise, if you save them yourself then it is you should change &quot;YYYY&quot; to &quot;yyyy&quot;. YYYY stands for WEEK_OF_YEAR in Java 8 and is synchronized with the week numbers."}, {"owner": {"reputation": 5088, "user_id": 2077479, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/0Wh1v.png?s=128&g=1", "display_name": "Jongz Puangput", "link": "https://stackoverflow.com/users/2077479/jongz-puangput"}, "reply_to_user": {"reputation": 314, "user_id": 1117834, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/5fdf053509c07900933bfdf324177446?s=128&d=identicon&r=PG&f=1", "display_name": "Alex2452", "link": "https://stackoverflow.com/users/1117834/alex2452"}, "edited": false, "score": 0, "creation_date": 1514905478, "post_id": 48063035, "comment_id": 83099219, "body": "@Hubertoss all this data fetch from system only no update, thank you anyway"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1514990431, "post_id": 48063035, "comment_id": 83132935, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/43933597/eee-mmm-dd-hhmmss-zzz-yyyy-date-format-to-java-sql-date\">&quot;EEE MMM dd HH:mm:ss ZZZ yyyy&quot; date format to java.sql.Date</a>"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1514990622, "post_id": 48063035, "comment_id": 83133060, "body": "As an aside consider throwing away the long outmoded and notoriously troublesome <code>SimpleDateFormat</code> and friends, and adding <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a> to your Android project in order to use <code>java.time</code>, the modern Java date and time API. It is so much nicer to work with."}], "answers": [{"comments": [{"owner": {"reputation": 5088, "user_id": 2077479, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/0Wh1v.png?s=128&g=1", "display_name": "Jongz Puangput", "link": "https://stackoverflow.com/users/2077479/jongz-puangput"}, "edited": false, "score": 3, "creation_date": 1514905077, "post_id": 48063136, "comment_id": 83099045, "body": "Solved, thank you, I will accept answer when it allow."}, {"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 5, "creation_date": 1514905621, "post_id": 48063136, "comment_id": 83099294, "body": "A bit of explanation: the first of january 2017 may have week number 52 of &quot;week&quot; year 2016; and the following Monday (generally) then is week 1 of (week and calendar) year 2017."}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": true, "score": 12, "last_activity_date": 1514904982, "creation_date": 1514904982, "answer_id": 48063136, "question_id": 48063035, "link": "https://stackoverflow.com/questions/48063035/simpledateformat-provide-wrong-year/48063136#48063136", "title": "SimpleDateFormat provide wrong year", "body": "<p>When using <code>SimpleDateFormat</code>, <code>YYYY</code> and <code>yyyy</code> have different meanings! You almost certainly want to use <code>yyyy</code> (actual year) instead of <code>YYYY</code> (week year).</p>\n"}], "owner": {"reputation": 5088, "user_id": 2077479, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/0Wh1v.png?s=128&g=1", "display_name": "Jongz Puangput", "link": "https://stackoverflow.com/users/2077479/jongz-puangput"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1249, "favorite_count": 0, "accepted_answer_id": 48063136, "answer_count": 1, "score": 1, "last_activity_date": 1514990700, "creation_date": 1514904548, "last_edit_date": 1514990700, "question_id": 48063035, "link": "https://stackoverflow.com/questions/48063035/simpledateformat-provide-wrong-year", "title": "SimpleDateFormat provide wrong year", "body": "<p>According to picture below, when I use <code>item.takendate</code> to <code>SimpleDateFormat</code> </p>\n\n<p>I got <strong>\"January 2016\"</strong> instead of <strong>\"January 2017\"</strong></p>\n\n<p>what happen here? please advice.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FRbji.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FRbji.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Edit</strong></p>\n\n<p>However, when I use cdate parse back to Date it value is changed from 1st January to 2nd January</p>\n\n<p><a href=\"https://i.stack.imgur.com/71myL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/71myL.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javafx", "kotlin", "tornadofx"], "comments": [{"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1514898485, "post_id": 48060473, "comment_id": 83095624, "body": "You don&#39;t need to declare the type as nullable even though the property can contain null. I suggest to simply change the type of the property and you should be good."}, {"owner": {"reputation": 1363, "user_id": 1640235, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Zmgq9.jpg?s=128&g=1", "display_name": "Aleksandar Stefanovi\u0107", "link": "https://stackoverflow.com/users/1640235/aleksandar-stefanovi%c4%87"}, "reply_to_user": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1514918196, "post_id": 48060473, "comment_id": 83105351, "body": "That worked! Can you post this as an answer, so I could accept it?"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1515007767, "post_id": 48060473, "comment_id": 83142544, "body": "Great! I&#39;ve added an answer :)"}], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 1, "last_activity_date": 1515007718, "creation_date": 1515007718, "answer_id": 48083929, "question_id": 48060473, "link": "https://stackoverflow.com/questions/48060473/in-tornadofx-how-can-i-select-a-deeply-nested-property-on-an-nullable-property/48083929#48083929", "title": "In TornadoFX, how can I select a deeply-nested property on an nullable property of an ItemViewModel?", "body": "<p>You don't need to declare the type as nullable even though the property can contain null. Simply change the type of the property and you should be good.</p>\n"}], "owner": {"reputation": 1363, "user_id": 1640235, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Zmgq9.jpg?s=128&g=1", "display_name": "Aleksandar Stefanovi\u0107", "link": "https://stackoverflow.com/users/1640235/aleksandar-stefanovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 48083929, "answer_count": 1, "score": 0, "last_activity_date": 1515007718, "creation_date": 1514893896, "question_id": 48060473, "link": "https://stackoverflow.com/questions/48060473/in-tornadofx-how-can-i-select-a-deeply-nested-property-on-an-nullable-property", "title": "In TornadoFX, how can I select a deeply-nested property on an nullable property of an ItemViewModel?", "body": "<p>TornadoFX has an <code>select</code> function that is used to access a property within a property. For example, the usage would be:</p>\n\n<pre><code>textfield(viewModel.customerProperty.select(Customer::nameProperty))\n</code></pre>\n\n<p>And that works fine, however, in case that the <code>customerProperty</code>'s value is nullable (<code>Customer?</code>), <code>select</code> doesn't work, because it expects non-null object to \"select\" from.</p>\n\n<p>In case that the <code>Property</code> has <code>nullable</code> value, how can <code>select</code> be used on it?</p>\n"}, {"tags": ["kotlin", "broadcastreceiver", "localbroadcastmanager"], "comments": [{"owner": {"reputation": 4862, "user_id": 4232337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nauo6.jpg?s=128&g=1", "display_name": "NSimon", "link": "https://stackoverflow.com/users/4232337/nsimon"}, "edited": false, "score": 0, "creation_date": 1514903970, "post_id": 48060226, "comment_id": 83098457, "body": "We can&#39;t see all of your code, but where do you change the values of &#39;userDataService.name&#39; and &#39;userDataService.email&#39;. Because from here, it seems you receive the broadcast fine, and update the UI with the same values all the time."}, {"owner": {"reputation": 210, "user_id": 6817533, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-AnfLxAv39gM/AAAAAAAAAAI/AAAAAAAAKEs/JRcVWQo8TAI/photo.jpg?sz=128", "display_name": "Nir Golan", "link": "https://stackoverflow.com/users/6817533/nir-golan"}, "reply_to_user": {"reputation": 4862, "user_id": 4232337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nauo6.jpg?s=128&g=1", "display_name": "NSimon", "link": "https://stackoverflow.com/users/4232337/nsimon"}, "edited": false, "score": 0, "creation_date": 1514907869, "post_id": 48060226, "comment_id": 83100499, "body": "I change the userDataService inside the createUserActivity. When the db reply that the user created OK its populate the userDataService. And as I said before when I log the parameters in the onRecive its OK."}], "answers": [{"comments": [{"owner": {"reputation": 210, "user_id": 6817533, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-AnfLxAv39gM/AAAAAAAAAAI/AAAAAAAAKEs/JRcVWQo8TAI/photo.jpg?sz=128", "display_name": "Nir Golan", "link": "https://stackoverflow.com/users/6817533/nir-golan"}, "edited": false, "score": 0, "creation_date": 1514897972, "post_id": 48061335, "comment_id": 83095391, "body": "just checked with Looper. the onRecieve runs on  the main thread."}, {"owner": {"reputation": 210, "user_id": 6817533, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-AnfLxAv39gM/AAAAAAAAAAI/AAAAAAAAKEs/JRcVWQo8TAI/photo.jpg?sz=128", "display_name": "Nir Golan", "link": "https://stackoverflow.com/users/6817533/nir-golan"}, "edited": false, "score": 0, "creation_date": 1514898812, "post_id": 48061335, "comment_id": 83095769, "body": "well, i dont really understand why so if any one can explain i will be greatfull but i have added these lines in the main activity onCreate:      userNameNavHeader.text = &quot;name&quot;     userEmailNavHeader.text = &quot;email&quot;     userImageNavHeader.setImageResource(R.mipmap.ic_launcher) and now the update goes well"}], "tags": [], "owner": {"reputation": 2773, "user_id": 3403069, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/yvxCD.png?s=128&g=1", "display_name": "JozeRi", "link": "https://stackoverflow.com/users/3403069/jozeri"}, "is_accepted": false, "score": 0, "last_activity_date": 1514897350, "creation_date": 1514897350, "answer_id": 48061335, "question_id": 48060226, "link": "https://stackoverflow.com/questions/48060226/local-broadcast-not-updating-ui/48061335#48061335", "title": "Local Broadcast not updating UI", "body": "<p>We can't see your entire code, but maybe you're not on the UI-Thread?</p>\n\n<p>you can update the UI only from the main thread, you can use logs or debug to see on which thread you are to test that theory, or simply wrap your code inside a runOnUiThread (which will require activity context)</p>\n\n<p>also, here's an interesting read on it if you feel like digging:\n<a href=\"https://medium.com/@yossisegev/understanding-activity-runonuithread-e102d388fe93\" rel=\"nofollow noreferrer\">Understanding Activity.runOnUiThread</a></p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 9947966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NtRGC.jpg?s=128&g=1", "display_name": "Vishal Joshi", "link": "https://stackoverflow.com/users/9947966/vishal-joshi"}, "is_accepted": false, "score": 1, "last_activity_date": 1550999026, "creation_date": 1550999026, "answer_id": 54850339, "question_id": 48060226, "link": "https://stackoverflow.com/questions/48060226/local-broadcast-not-updating-ui/54850339#54850339", "title": "Local Broadcast not updating UI", "body": "<p>You first need to obtain the reference to the nav_header_main layout first to be able to update the text-View and image-view in the nav_header_main. Instead of using the id of the elements directly you should use nav_header reference then id like this</p>\n\n<pre><code>private val userDataChangeReceiver = object: BroadcastReceiver() {\noverride fun onReceive(context: Context?, intent: Intent?) {\n\n    if(AuthService.isLoggedIn){\n        Log.d(\"qwe\", UserDataService.name)\n        Log.d(\"qwe\", UserDataService.email)\n        Log.d(\"qwe\", UserDataService.avatarName)\n        Log.d(\"qwe\", \"Made it inside the broadcast bro\")\n\n        Log.d(\"qwe\", \"Wrap\")\n\n\n        nav_drawer_header_include.userEmailNavHeader.text = UserDataService.email\n        nav_drawer_header_include.userNameNavHeader.text = UserDataService.name\n        userEmailNavHeader.text = UserDataService.email\n        val resourseid= resources.getIdentifier(UserDataService.avatarName,\"drawable\",packageName)\n        nav_drawer_header_include.userImageNavHeader.setImageResource(resourseid)\n        nav_drawer_header_include.loginBtnNavHeader.text=\"Logout\"\n\n\n\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>We should use Log most often, it helped me to get to the problem directly instead of wasting my time on perfectly fine working things.</p>\n\n<p>I too stumbled on this problem while doing the Android Kotlin course but after searching I found this is faced by many people they asked question on different platforms but no answer was provided. But after searching same terms \"UI elements not updating android\" found some stack overflow answers in java How to change text of a TextView in navigation drawer header?</p>\n\n<p>They all explained to first get reference then we can be able to update the View. Then I tried and fortunately it worked perfectly fine.</p>\n\n<p>PS: This is my first answer please don't mind the mistakes, I apologize.</p>\n"}], "owner": {"reputation": 210, "user_id": 6817533, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-AnfLxAv39gM/AAAAAAAAAAI/AAAAAAAAKEs/JRcVWQo8TAI/photo.jpg?sz=128", "display_name": "Nir Golan", "link": "https://stackoverflow.com/users/6817533/nir-golan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1550999026, "creation_date": 1514892846, "question_id": 48060226, "link": "https://stackoverflow.com/questions/48060226/local-broadcast-not-updating-ui", "title": "Local Broadcast not updating UI", "body": "<p>i have this code in my register user activity:</p>\n\n<pre><code>val userDataChange = Intent(BROADCAST_USER_DATA_CHANGE)\nuserDataChange.putExtra(\"aaa\", \"aaaaaaaa\")\nuserDataChange.putExtra(\"bbb\", 123)\nLocalBroadcastManager.getInstance(this).sendBroadcast(userDataChange)\n</code></pre>\n\n<p>and in the main activity the reciever:</p>\n\n<pre><code>LocalBroadcastManager.getInstance(this)\n.registerReceiver(userDataChangeReceiver, \nIntentFilter(BROADCAST_USER_DATA_CHANGE))\n</code></pre>\n\n<p>and the userDatachangeReceiver function:</p>\n\n<pre><code>private val userDataChangeReceiver = object: BroadcastReceiver() {\n    override fun onReceive(context: Context?, intent: Intent?) {\n        Log.d(\"aaa\", AuthService.isLoggedIn.toString())\n        userNameNavHeader.text = \"BBBBBBBBBBB\"\n        if (AuthService.isLoggedIn == true) {\n            userNameNavHeader.text = userDataService.name\n            userEmailNavHeader.text = userDataService.email\n            val resourceId = resources.getIdentifier(userDataService.avatarName, \"drawable\",\n                    packageName)\n            userImageNavHeader.setImageResource(resourceId)\n            userImageNavHeader.setBackgroundColor(userDataService.returnAvatarColor(userDataService.avatarColor))\n            loginButtonNavHeader.text = \"Logout\"\n        }\n    }\n}\n</code></pre>\n\n<p>the create user activity updates the userDataService just fine, when i log it i get the right parameters.\nthe AuthService.isLoggedIn returns true but the drawer UI does not gets updated\ni have tryed to put it int the onStart, onResume unregister on onPause but no luck, also when i try to access the bundle inside the intent i get null.\ni put it there just to see if its really getting thrugh\nany ideas?</p>\n"}, {"tags": ["android", "logging", "kotlin", "slf4j", "slf4j-api"], "answers": [{"comments": [{"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514892211, "post_id": 48060051, "comment_id": 83092420, "body": "that is what i already tried. But I would even like to kill the redundant call <code>Log.X(this, ...)</code>... thinking of inlining like in c/c++ . And in this case I want to stick to the SLF4J approach"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "reply_to_user": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514892537, "post_id": 48060051, "comment_id": 83092579, "body": "AspectJ can do this for you, but you will need to setup your application to support compile-time AspectJ Weaving. Personally I would rather use the boilerplate than go the AspectJ route. Here&#39;s a good introduction: <a href=\"https://blog.jayway.com/2015/09/03/aspectj-and-aop-the-black-magic-of-programming/\" rel=\"nofollow noreferrer\">blog.jayway.com/2015/09/03/&hellip;</a>"}, {"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514896141, "post_id": 48060051, "comment_id": 83094455, "body": "What are the reasons you wouldn&#39;t go with AspectJ?"}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "reply_to_user": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514896610, "post_id": 48060051, "comment_id": 83094701, "body": "It adds a lot of complexity to your build process (you&#39;ll need to add a precompile step that weaves in the Aspects and this might fail sometimes or certain aspects might not weave in due to misconfiguration), you need an IDE that supports AspectJ Weaving, otherwise you will just get red squiggles under everything and you&#39;ll need to learn a new &quot;language&quot; in order to write these aspects. Maybe try it out and see how much work it is to setup, it&#39;ll just be a once-off thing you have to write."}], "tags": [], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "is_accepted": false, "score": 0, "last_activity_date": 1514892109, "creation_date": 1514892109, "answer_id": 48060051, "question_id": 48059660, "link": "https://stackoverflow.com/questions/48059660/convenient-kotlin-loggerfactory-simplification/48060051#48060051", "title": "Convenient Kotlin LoggerFactory simplification", "body": "<p>if you don't like the boilerplate, you can always wrap the <code>log.info</code> with your own logger helper:</p>\n\n<pre><code>mylog.info(this, \"data that needs to be logged\")\n</code></pre>\n\n<p>Then in the background, have some sort of hashmap that keeps track of classes of the <code>this</code> param that can instantiate a logger for that class.</p>\n\n<p>Other options might be using AspectJ Weaving to weave a logger into each class, but this is overkill in my opinion.</p>\n"}, {"tags": [], "owner": {"reputation": 577, "user_id": 410579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb1e2716f8a9b4aff5bd3458962ae2a?s=128&d=identicon&r=PG", "display_name": "kocka", "link": "https://stackoverflow.com/users/410579/kocka"}, "is_accepted": false, "score": -2, "last_activity_date": 1514896074, "creation_date": 1514896074, "answer_id": 48061026, "question_id": 48059660, "link": "https://stackoverflow.com/questions/48059660/convenient-kotlin-loggerfactory-simplification/48061026#48061026", "title": "Convenient Kotlin LoggerFactory simplification", "body": "<p>I have defined a utility method for this</p>\n\n<pre><code>fun getLogger(cl: KClass&lt;*&gt;): Logger {\n    return LoggerFactory.getLogger(cl.java)!!\n}\n</code></pre>\n\n<p>and now in each class I can use the logger like this</p>\n\n<pre><code>companion object {\n    private val logger = getLogger(MyClass::class)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 1, "creation_date": 1514897640, "post_id": 48061378, "comment_id": 83095222, "body": "Ah interesting. Is this also possible with a lazy property to avoid the <code>getLogger</code> lookup each time?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514897783, "post_id": 48061378, "comment_id": 83095304, "body": "Unfortunately, you cannot access <code>this</code> in lazy. I will try to implement a quick alternative"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514898702, "post_id": 48061378, "comment_id": 83095724, "body": "Ok, here you go"}, {"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 1, "creation_date": 1514903447, "post_id": 48061378, "comment_id": 83098192, "body": "okay, this is brilliant. does this approach have any side effects / performance impact / memory footprint increase on classes which never use the logger? (because its an extension to all types)?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514904808, "post_id": 48061378, "comment_id": 83098908, "body": "No you can use it unhesitatingly:)"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 1, "creation_date": 1514976721, "post_id": 48061378, "comment_id": 83125374, "body": "I found a major bug in the lazy solution, since extensions are resolved statically, there was always the same logger used, i.e. not one logger per class. I&#39;ve removed the lazy stuff until I come up with a better solution."}, {"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1514977721, "post_id": 48061378, "comment_id": 83125900, "body": "thanks for letting me know. curious what you will come up with :)"}, {"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1515093322, "post_id": 48061378, "comment_id": 83179348, "body": "@s1m0w1 did you have the heureka moment alredy?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1515178152, "post_id": 48061378, "comment_id": 83215496, "body": "No I\u2019m sorry, could not find an alternative yet. I\u2019d be interested which solution you are using currently?"}, {"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "edited": false, "score": 0, "creation_date": 1515617234, "post_id": 48061378, "comment_id": 83372539, "body": "I am currently having one logger val per class/companion"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 3, "last_activity_date": 1514976639, "last_edit_date": 1514976639, "creation_date": 1514897543, "answer_id": 48061378, "question_id": 48059660, "link": "https://stackoverflow.com/questions/48059660/convenient-kotlin-loggerfactory-simplification/48061378#48061378", "title": "Convenient Kotlin LoggerFactory simplification", "body": "<p>You can define an extension property on every type:</p>\n\n<pre><code>val &lt;T : Any&gt; T.logger: Logger\n    get() = LoggerFactory.getLogger(this::class.java)\n</code></pre>\n\n<p>use it as follows:</p>\n\n<pre><code>class X {\n    init {\n        logger.debug(\"init\")\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": false, "score": 1, "last_activity_date": 1514899075, "creation_date": 1514899075, "answer_id": 48061770, "question_id": 48059660, "link": "https://stackoverflow.com/questions/48059660/convenient-kotlin-loggerfactory-simplification/48061770#48061770", "title": "Convenient Kotlin LoggerFactory simplification", "body": "<p>I define this function in my projects to make defining a logger easier for me. It takes advantage of Kotlin's reified types.</p>\n\n<pre><code>// Defined in Utilities.kt\ninline fun &lt;reified T:Any&gt; logFor() =\n    LoggerFactory.getLogger(T::class.java)\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>class MyClass {\n    private val log = logFor&lt;MyClass&gt;()\n    ...\n }\n</code></pre>\n\n<p>Or if you are creating a lot of them:</p>\n\n<pre><code>class MyClass {\n    companion object {\n        private val log = logFor&lt;MyClass&gt;()\n    }\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "is_accepted": true, "score": 1, "last_activity_date": 1514908620, "last_edit_date": 1514908620, "creation_date": 1514908209, "answer_id": 48063893, "question_id": 48059660, "link": "https://stackoverflow.com/questions/48059660/convenient-kotlin-loggerfactory-simplification/48063893#48063893", "title": "Convenient Kotlin LoggerFactory simplification", "body": "<p>Here's a simple example which returns a lazily-initialized logger from a bound callable reference or a standard property. I prefer calling from a callable reference because the <code>::</code> denotes reflection (related to logging).</p>\n\n<p>The class which provides the <code>Lazy&lt;Logger&gt;</code>:</p>\n\n<pre><code>class LoggingProvider&lt;T : Any&gt;(val clazz: KClass&lt;T&gt;) {\n\n  operator fun provideDelegate(inst: Any?, property: KProperty&lt;*&gt;) =\n      lazy { LoggerFactory.getLogger(clazz.java) }\n}\n</code></pre>\n\n<p>Inline functions to call them:</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; KCallable&lt;T&gt;.logger() = \n  LoggingProvider(T::class)\n\ninline fun &lt;reified T : Any&gt; T.logger() = \n  LoggingProvider(T::class)\n</code></pre>\n\n<p>Here's an example of using them. The <code>require</code> assertion in the initializer shows that the loggers share a reference:</p>\n\n<pre><code>class Foo {\n\n  val self: Foo = this\n\n  val logger by this.logger()\n  val callableLogger by this::self.logger()\n\n  init {\n    require(logger === callableLogger)\n  }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 785, "favorite_count": 1, "accepted_answer_id": 48063893, "answer_count": 5, "score": 7, "last_activity_date": 1514976639, "creation_date": 1514890495, "last_edit_date": 1514892147, "question_id": 48059660, "link": "https://stackoverflow.com/questions/48059660/convenient-kotlin-loggerfactory-simplification", "title": "Convenient Kotlin LoggerFactory simplification", "body": "<p>What is the most convenient way to use SLF4J or other logging approaches with kotlin?</p>\n\n<p>Usually the developer is busy with boilerplate code like</p>\n\n<pre><code>private val logger: Logger = LoggerFactory.getLogger(this::class.java)\n</code></pre>\n\n<p>in each and every class to get a proper logger?</p>\n\n<p><strong>What are the most convenient ways to unify/simplify this with Kotlin?</strong></p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "okhttp", "mockwebserver"], "comments": [{"owner": {"reputation": 1709, "user_id": 1294982, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb2a35340cf7b991a942773d3f5247c3?s=128&d=identicon&r=PG&f=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/1294982/maurice"}, "edited": false, "score": 0, "creation_date": 1514889213, "post_id": 48059340, "comment_id": 83090919, "body": "Also I look into this question: <a href=\"https://stackoverflow.com/questions/37965558/okhttp-mockwebserver-fails-to-accept-connections-when-restarted\" title=\"okhttp mockwebserver fails to accept connections when restarted\">stackoverflow.com/questions/37965558/&hellip;</a>. But it&#39;s not working for me. If you check the log file, the server has already his specific address for each test."}, {"owner": {"reputation": 5407, "user_id": 322111, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/spm02.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/322111/sam"}, "edited": false, "score": 0, "creation_date": 1554154886, "post_id": 48059340, "comment_id": 97640078, "body": "I&#39;m facing same issue any finding for this?"}, {"owner": {"reputation": 1709, "user_id": 1294982, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb2a35340cf7b991a942773d3f5247c3?s=128&d=identicon&r=PG&f=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/1294982/maurice"}, "reply_to_user": {"reputation": 5407, "user_id": 322111, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/spm02.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/322111/sam"}, "edited": false, "score": 0, "creation_date": 1554361714, "post_id": 48059340, "comment_id": 97724853, "body": "Yes I found the solution, but I will have to go back to an old code. I&#39;ll let you know."}, {"owner": {"reputation": 1709, "user_id": 1294982, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb2a35340cf7b991a942773d3f5247c3?s=128&d=identicon&r=PG&f=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/1294982/maurice"}, "reply_to_user": {"reputation": 5407, "user_id": 322111, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/spm02.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/322111/sam"}, "edited": false, "score": 1, "creation_date": 1554361977, "post_id": 48059340, "comment_id": 97724989, "body": "OK I found it, I changed my application implementation, by changing the utility class.  I put the constant into the ServiceGenerator, in my LoginService it&#39;s called like that: .baseUrl(ServiceGenerator.APP_BASE_URL) for Retrofit creation.  ServiceGenerator.APP_BASE_URL = server.url(&quot;/localhost/&quot;).toString()"}], "owner": {"reputation": 1709, "user_id": 1294982, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fb2a35340cf7b991a942773d3f5247c3?s=128&d=identicon&r=PG&f=1", "display_name": "Maurice", "link": "https://stackoverflow.com/users/1294982/maurice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3323, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1514889096, "creation_date": 1514889096, "question_id": 48059340, "link": "https://stackoverflow.com/questions/48059340/okhttp-mockwebserver-fails-to-accept-connections-on-new-instance", "title": "OkHttp MockWebServer fails to accept connections on new instance", "body": "<p>I'm using <a href=\"https://github.com/square/okhttp/tree/master/mockwebserver\" rel=\"nofollow noreferrer\">OkHttp MockWebServer</a> to mock the server responses.</p>\n\n<p>I have implemented two tests classes, the first one contains two tests and the second one, one test. The first class works fine, but for the second class, there is an error because the socket server is closed. </p>\n\n<p><strong>The first test class</strong></p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\nclass LoginActivityTest : TestCase() {\n\n    private lateinit var server: MockWebServer\n\n    @Before\n    override public fun setUp() {\n        super.setUp()\n        server = MockWebServer()\n        server.start()\n        ApplicationConstants.APP_BASE_URL = server.url(\"/localhost/\").toString()\n    }\n\n    @After\n    @Throws(Exception::class)\n    public override fun tearDown() {\n        server.shutdown()\n    }\n\n    @Test\n    fun successLogin() {\n        //given\n        server.enqueue(MockResponse()\n                .setResponseCode(200)\n                .setBody(\"{...}\")\n        )\n        //rest of the UI test class\n    }\n\n    @Test\n    fun testAuthenticationFailed() {\n        //given\n        server.enqueue(MockResponse()\n                .setResponseCode(403)\n                .setBody(\"{...}\")\n        )\n        //Rest of the UI test class\n\n    }\n\n}\n</code></pre>\n\n<p><strong>The log are correct for the two tests</strong></p>\n\n<pre><code>01-02 09:31:23.100 28693-28740/com.mycompany.app D/OkHttp: --&gt; POST http://localhost:39762/client/index.php/rest/login\n01-02 09:31:23.100 28693-28740/com.mycompany.app D/OkHttp: Content-Type: application/x-www-form-urlencoded\n01-02 09:31:23.101 28693-28740/com.mycompany.app D/OkHttp: Content-Length: 26\n01-02 09:31:23.102 28693-28740/com.mycompany.app D/OkHttp: login=admin&amp;password=admin\n01-02 09:31:23.103 28693-28740/com.mycompany.app D/OkHttp: --&gt; END POST (26-byte body)\n01-02 09:31:23.119 28693-28742/com.mycompany.app I/MockWebServer: MockWebServer[39762] received request: POST /client/index.php/rest/login HTTP/1.1 and responded: HTTP/1.1 200 OK\n01-02 09:31:23.121 28693-28740/com.mycompany.app D/OkHttp: &lt;-- 200 OK http://localhost:39762/client/index.php/rest/login (18ms)\n\n01-02 09:31:28.554 28693-28765/com.mycompany.app D/OkHttp: --&gt; POST http://localhost:52440/Unknown%20Client/index.php/rest/login\n01-02 09:31:28.554 28693-28765/com.mycompany.app D/OkHttp: Content-Type: application/x-www-form-urlencoded\n01-02 09:31:28.555 28693-28765/com.mycompany.app D/OkHttp: Content-Length: 34\n01-02 09:31:28.555 28693-28765/com.mycompany.app D/OkHttp: login=Wrong%20Login&amp;password=admin\n01-02 09:31:28.555 28693-28765/com.mycompany.app D/OkHttp: --&gt; END POST (34-byte body)\n01-02 09:31:28.571 28693-28767/com.mycompany.app I/MockWebServer: MockWebServer[52440] received request: POST /Unknown%20Client/index.php/rest/login HTTP/1.1 and responded: HTTP/1.1 403 Client Error\n01-02 09:31:28.571 28693-28765/com.mycompany.app D/OkHttp: &lt;-- 403 Client Error http://localhost:52440/Unknown%20Client/index.php/rest/login (15ms)\n01-02 09:31:28.571 28693-28765/com.mycompany.app D/OkHttp: Content-Length: 33\n01-02 09:31:28.571 28693-28765/com.mycompany.app D/OkHttp: {\"message\": \"Forbidden access!\"}\n01-02 09:31:28.571 28693-28765/com.mycompany.app D/OkHttp: &lt;-- END HTTP (33-byte body)\n01-02 09:31:28.574 28693-28693/com.mycompany.app E/LoginActivity: HTTP 403 Client Error\n</code></pre>\n\n<p><strong>The second class is not working and is called after the first class</strong></p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\nclass LoginServiceTest : TestCase() {\n    private lateinit var server: MockWebServer\n    private lateinit var loginService: LoginService\n\n    @Before\n    override public fun setUp() {\n        super.setUp()\n        server = MockWebServer()\n        server.start()\n        ApplicationConstants.APP_BASE_URL = server.url(\"/localhost/\").toString()\n        loginService = ServiceGenerator.createService(LoginService::class.java)\n    }\n\n    @After\n    @Throws(Exception::class)\n    public override fun tearDown() {\n        server.shutdown()\n    }\n\n    @Test\n    @Throws(Exception::class)\n    fun testSuccessResponse() {\n        //Given\n        server.enqueue(MockResponse()\n                .setResponseCode(200)\n                .setBody(\"{...}\")\n        )\n\n        loginService.login(\"login\", \"password\").subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(\n                        { _ -&gt;\n                            Assert.assertTrue(false)\n                        },\n                        { _ -&gt;\n                            Assert.assertTrue(false)\n                        }\n                )\n    }\n}\n</code></pre>\n\n<p><strong>The log file, reason socket closed</strong></p>\n\n<pre><code>01-02 09:31:29.919 28693-28776/com.mycompany.app I/MockWebServer: MockWebServer[59904] starting to accept connections\n01-02 09:31:29.924 28693-28765/com.mycompany.app D/OkHttp: --&gt; POST http://localhost:59904/client/index.php/rest/login\n01-02 09:31:29.924 28693-28765/com.mycompany.app D/OkHttp: Content-Type: application/x-www-form-urlencoded\n01-02 09:31:29.925 28693-28765/com.mycompany.app D/OkHttp: Content-Length: 24\n01-02 09:31:29.925 28693-28765/com.mycompany.app D/OkHttp: login=login&amp;password=password\n01-02 09:31:29.925 28693-28765/com.mycompany.app D/OkHttp: --&gt; END POST (24-byte body)\n01-02 09:31:29.929 28693-28776/com.mycompany.app I/MockWebServer: MockWebServer[59904] done accepting connections: Socket closed\n01-02 09:31:29.935 28693-28765/com.mycompany.app D/OkHttp: &lt;-- HTTP FAILED: java.io.IOException: unexpected end of stream on Connection{localhost:59904, proxy=DIRECT hostAddress=localhost/127.0.0.1:59904 cipherSuite=none protocol=http/1.1}\n01-02 09:31:29.935 28693-28779/com.mycompany.app I/MockWebServer: MockWebServer[59904] connection from localhost/127.0.0.1 failed: java.net.SocketException: Socket closed\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 577, "user_id": 410579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb1e2716f8a9b4aff5bd3458962ae2a?s=128&d=identicon&r=PG", "display_name": "kocka", "link": "https://stackoverflow.com/users/410579/kocka"}, "is_accepted": false, "score": 1, "last_activity_date": 1514886842, "creation_date": 1514886842, "answer_id": 48058766, "question_id": 48058650, "link": "https://stackoverflow.com/questions/48058650/how-to-use-bytearray-getorelse/48058766#48058766", "title": "How to use ByteArray.getOrElse", "body": "<p>The second argument is a function literal</p>\n\n<pre><code>myInt = dat.getOrElse(100, { /** what is there is no element 100*/ 0 })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": true, "score": 2, "last_activity_date": 1514886951, "creation_date": 1514886951, "answer_id": 48058789, "question_id": 48058650, "link": "https://stackoverflow.com/questions/48058650/how-to-use-bytearray-getorelse/48058789#48058789", "title": "How to use ByteArray.getOrElse", "body": "<p>The expected type of the second argument (<code>defaultValue</code>) is <code>(Int) -&gt; Byte</code> which is a lambda that takes an <code>Int</code> and returns a <code>Byte</code>.</p>\n\n<pre><code>myInt = dat.getOrElse(index = 100, defaultValue = { \n    i -&gt; \n    // use i to calcuate your Byte that should be returned...\n    // or return a fixed value\n    i * 1 // for example\n})\n</code></pre>\n\n<p>Signature of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/get-or-else.html\" rel=\"nofollow noreferrer\"><code>getOrElse</code></a>:</p>\n\n<pre><code>fun ByteArray.getOrElse(\n    index: Int, \n    defaultValue: (Int) -&gt; Byte\n): Byte\n</code></pre>\n"}], "owner": {"reputation": 2264, "user_id": 3004821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77519448e6002723a9345b54d76870c9?s=128&d=identicon&r=PG&f=1", "display_name": "fralbo", "link": "https://stackoverflow.com/users/3004821/fralbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 48058789, "answer_count": 2, "score": 0, "last_activity_date": 1514886951, "creation_date": 1514886320, "question_id": 48058650, "link": "https://stackoverflow.com/questions/48058650/how-to-use-bytearray-getorelse", "title": "How to use ByteArray.getOrElse", "body": "<p>I don't undertand how to specify the default value for `ByteArray.getOrElse() function.</p>\n\n<p>I tried: </p>\n\n<pre><code>myInt = dat.getOrElse(0, 0).toInt()\n</code></pre>\n\n<p>but compiler complains with the following error:</p>\n\n<pre><code>The integer literal does not conform to the expected type (Int) -&gt; Byte\n</code></pre>\n\n<p>How to specify the default value?</p>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1514933221, "post_id": 48057329, "comment_id": 83111445, "body": "I noticed that if you accidentally (or not) name a field with a trailing space it will be recognized as a different field. I double checked that it&#39;s not happening in this case"}, {"owner": {"reputation": 1039, "user_id": 3331710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ac11afd2d57b9cb28e2a15cdfaf5d3?s=128&d=identicon&r=PG&f=1", "display_name": "mark922", "link": "https://stackoverflow.com/users/3331710/mark922"}, "edited": false, "score": 0, "creation_date": 1515058742, "post_id": 48057329, "comment_id": 83159126, "body": "Can you verify this use case : If the value of price is 20(Integer) instead of 25.1(Double) then is it working or not ? It shouldn&#39;t be a problem but I just want to confirm it."}, {"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "reply_to_user": {"reputation": 1039, "user_id": 3331710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ac11afd2d57b9cb28e2a15cdfaf5d3?s=128&d=identicon&r=PG&f=1", "display_name": "mark922", "link": "https://stackoverflow.com/users/3331710/mark922"}, "edited": false, "score": 0, "creation_date": 1515085671, "post_id": 48057329, "comment_id": 83175481, "body": "@mark922 makes no difference if I store an integer or double"}, {"owner": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1515626194, "post_id": 48057329, "comment_id": 83376352, "body": "could you, just for the sake of having tried, use a Java class instead of Kotlin and try it with that?"}, {"owner": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1515626523, "post_id": 48057329, "comment_id": 83376461, "body": "also, what values do you get if you read the field manually like &#39;snapshot.child(&quot;price&quot;).getValue()&#39;?"}, {"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "reply_to_user": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1515626671, "post_id": 48057329, "comment_id": 83376493, "body": "@A.Kuchinke I have not. Though it&#39;s a possible solution, I would think of it as incomplete. Either that or we may have discovered a big bug on Firebase or Kotlin. The snapshot values reflect what is on the DB, the problem arises after serialization. I will try using a Java class."}, {"owner": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1515627223, "post_id": 48057329, "comment_id": 83376649, "body": "when testing with plain Java, make sure to try both double and Double (boxing), I doubt that it will make a difference, since auto boxing/unboxing is a thing, but you never know"}, {"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "edited": false, "score": 0, "creation_date": 1515701664, "post_id": 48057329, "comment_id": 83412040, "body": "So after creating the Java class alternative and refactoring adapters, viewholders and several references, I started getting weird exceptions and obfuscated class names. I was in a hurry trying to finish a feature so I had to stash all those changes and work with my original Kotlin class. As if it wasn&#39;t strange enough already, the Kotlin class started to work on both branches/variants once I checked-out the original commit I was working on. I also ran a diff between the &quot;failing&quot; changes and the current changes and there&#39;s nothing special or evidence that points to where the error was."}, {"owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "reply_to_user": {"reputation": 1484, "user_id": 9015942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9a76c3fcb8e3eb6514d68462067902?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian K", "link": "https://stackoverflow.com/users/9015942/adrian-k"}, "edited": false, "score": 0, "creation_date": 1515701726, "post_id": 48057329, "comment_id": 83412080, "body": "The Java class works as well now. @A.Kuchinke if you want to post your answer I will grant the bounty for your help."}], "owner": {"reputation": 2935, "user_id": 3808228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NyJ7J.jpg?s=128&g=1", "display_name": "Chisko", "link": "https://stackoverflow.com/users/3808228/chisko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 1, "answer_count": 0, "score": 7, "last_activity_date": 1515154096, "creation_date": 1514879030, "last_edit_date": 1515154096, "question_id": 48057329, "link": "https://stackoverflow.com/questions/48057329/inconsistency-getting-data-from-firebase-database-with-the-same-data-class", "title": "Inconsistency getting data from Firebase Database with the same data class", "body": "<p>On my Firebase realtime database I have two main branches for debug and release builds. The debug branch works fine but when the release branch is fetched, the <code>price</code> field always has a zero as value after being converted to either map or list below, while the other three fields reflect correct values from the DB. Please note that having the field as integer or with a decimal on the DB makes no difference. This is how my data looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1YCPL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1YCPL.png\" alt=\"Database preview\"></a></p>\n\n<p>This is my data class with the issue</p>\n\n<pre><code>data class JsonProducto(var id: String,\n                    var name: String,\n                    var description: String,\n                    var price: Double) : Parcelable {\n    constructor() : this(\n            \"id\",\n            \"name\",\n            \"desc\",\n            0.0\n    )\n\n    constructor(source: Parcel) : this(\n            source.readString(),\n            source.readString(),\n            source.readString(),\n            source.readDouble()\n     )\n\n     override fun describeContents() = 0\n\n     override fun writeToParcel(dest: Parcel, flags: Int) = with(dest) {\n        writeString(id)\n        writeString(name)\n        writeString(description)\n        writeDouble(price)\n    }\n\n    companion object {\n        @JvmField\n        val CREATOR: Parcelable.Creator&lt;JsonProducto&gt; = object : Parcelable.Creator&lt;JsonProducto&gt; {\n            override fun createFromParcel(source: Parcel): JsonProducto = JsonProducto(source)\n            override fun newArray(size: Int): Array&lt;JsonProducto?&gt; = arrayOfNulls(size)\n        }\n    }\n}\n</code></pre>\n\n<p>I've also tried two approaches to convert the data snapshot to my class, both with same results:</p>\n\n<p><strong>Serialization way number 1</strong></p>\n\n<pre><code>val mapper = object : GenericTypeIndicator&lt;HashMap&lt;String, JsonProducto&gt;&gt;() {}\nval list = arrayListOf&lt;JsonProducto&gt;()\nval map = dataSnapshot.getValue(mapper)\n\nmap?.forEach {\n      list.add(it.value)\n}\n</code></pre>\n\n<p><strong>Serialization way number 2</strong></p>\n\n<pre><code>val list: MutableList&lt;JsonProducto&gt; = mutableListOf() \n\ndataSnapshot.children.mapNotNullTo(list) { \n     it.getValue&lt;JsonProducto&gt;(JsonProducto::class.java) \n}\n</code></pre>\n\n<p>Any ideas of why this behavior is occurring? I appreciate your time.</p>\n\n<p><strong><em>EDIT:</em></strong></p>\n\n<p>Still trying to figure out what is going on here, I did some experiments and the results still shock me: I changed the DB field's name to <code>precio</code> in only one of the products on the working branch, and also renamed the data class member to that and now all the fields show zero except the one I renamed. However, the non-working branch still shows zeroes, no matter what. This is very weird.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 309, "user_id": 9140698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Sv6s.jpg?s=128&g=1", "display_name": "chandani c patel", "link": "https://stackoverflow.com/users/9140698/chandani-c-patel"}, "edited": false, "score": 0, "creation_date": 1514877564, "post_id": 48056994, "comment_id": 83086144, "body": "try using break@forEach"}, {"owner": {"reputation": 13035, "user_id": 305135, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/cf9b63f6e0e2d709993723d9b9be79cf?s=128&d=identicon&r=PG", "display_name": "AVEbrahimi", "link": "https://stackoverflow.com/users/305135/avebrahimi"}, "reply_to_user": {"reputation": 309, "user_id": 9140698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Sv6s.jpg?s=128&g=1", "display_name": "chandani c patel", "link": "https://stackoverflow.com/users/9140698/chandani-c-patel"}, "edited": false, "score": 0, "creation_date": 1514877622, "post_id": 48056994, "comment_id": 83086162, "body": "kotlin doesn&#39;t accept break@forEach, it says : Error:(785, 25) The label &#39;@forEach&#39; does not denote a loop"}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1514881008, "post_id": 48056994, "comment_id": 83087418, "body": "<code>forEach</code> is not a loop."}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1514903096, "post_id": 48056994, "comment_id": 83097985, "body": "Why would you use a return statement with a label? Using <code>return</code> returns from the method itself, it doesn&#39;t matter what label you have on it"}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1514960288, "post_id": 48056994, "comment_id": 83117854, "body": "when you return from a <code>forEach</code> function, this has the effect of continue inside a for loop, not break"}], "answers": [{"comments": [{"owner": {"reputation": 22313, "user_id": 1739882, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Li4nC.jpg?s=128&g=1", "display_name": "Chintan Soni", "link": "https://stackoverflow.com/users/1739882/chintan-soni"}, "edited": false, "score": 0, "creation_date": 1514879451, "post_id": 48057348, "comment_id": 83086865, "body": "Hahaha.. You n me found the solution at the same time. Anyways. Learnt something weired in Kotlin."}, {"owner": {"reputation": 365, "user_id": 3193413, "user_type": "registered", "profile_image": "https://graph.facebook.com/706684194/picture?type=large", "display_name": "user3193413", "link": "https://stackoverflow.com/users/3193413/user3193413"}, "edited": false, "score": 2, "creation_date": 1565955547, "post_id": 48057348, "comment_id": 101514373, "body": "You can use return@run you don&#39;t need to explicitly provide breaker@"}], "tags": [], "owner": {"reputation": 13035, "user_id": 305135, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/cf9b63f6e0e2d709993723d9b9be79cf?s=128&d=identicon&r=PG", "display_name": "AVEbrahimi", "link": "https://stackoverflow.com/users/305135/avebrahimi"}, "is_accepted": false, "score": 13, "last_activity_date": 1514960342, "last_edit_date": 1514960342, "creation_date": 1514879137, "answer_id": 48057348, "question_id": 48056994, "link": "https://stackoverflow.com/questions/48056994/return-doesnt-jump-out-of-foreach-in-kotlin/48057348#48057348", "title": "&#39;return&#39; doesn&#39;t jump out of forEach in Kotlin", "body": "<p>If you want to jump out of forEach, you should use a run block :</p>\n\n<pre><code>run breaker@ {\n    rendered_words.reversed().forEach  { rw -&gt;\n        if (rw.y - the_top &gt; 0 &amp;&amp; rw.y - the_top &lt; height) {\n            new_top = rw.y\n            return@breaker\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 4, "creation_date": 1514879678, "post_id": 48057388, "comment_id": 83086953, "body": "It doesn&#39;t need to use <code>let</code>, <code>.firstOrNull{}?.smoothScrollTo()</code> is fine."}], "tags": [], "owner": {"reputation": 577, "user_id": 410579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb1e2716f8a9b4aff5bd3458962ae2a?s=128&d=identicon&r=PG", "display_name": "kocka", "link": "https://stackoverflow.com/users/410579/kocka"}, "is_accepted": true, "score": 4, "last_activity_date": 1514879360, "creation_date": 1514879360, "answer_id": 48057388, "question_id": 48056994, "link": "https://stackoverflow.com/questions/48056994/return-doesnt-jump-out-of-foreach-in-kotlin/48057388#48057388", "title": "&#39;return&#39; doesn&#39;t jump out of forEach in Kotlin", "body": "<p>How about this approach?</p>\n\n<pre><code>rendered_words.reversed().firstOrNull { rw -&gt; rw.y - the_top &gt; 0 &amp;&amp; rw.y - the_top &lt; height }\n?.let { new_top = it }\nif(new_top != null) {\n     smoothScrollTo(Math.min(text_y - height, new_top))\n}\n</code></pre>\n\n<p>because what you seem to try to get here is the first item that matches your condition, and the first/firstOrNull is better there than the forEach</p>\n"}, {"tags": [], "owner": {"reputation": 373, "user_id": 982877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510609666d4d766c19c94c2a3fc46957?s=128&d=identicon&r=PG", "display_name": "Wulf", "link": "https://stackoverflow.com/users/982877/wulf"}, "is_accepted": false, "score": 0, "last_activity_date": 1519906307, "last_edit_date": 1519906307, "creation_date": 1519905717, "answer_id": 49049342, "question_id": 48056994, "link": "https://stackoverflow.com/questions/48056994/return-doesnt-jump-out-of-foreach-in-kotlin/49049342#49049342", "title": "&#39;return&#39; doesn&#39;t jump out of forEach in Kotlin", "body": "<p>My answer to this is using Kotlin's amazing extension mechanism which means you can add methods wherever you like:</p>\n\n<pre><code> /**\n * Iterate a list.\n * The consumer can break the iteration by returning\n * Control.BREAK\n * Returns &lt;tt&gt;true&lt;/tt&gt; if no break occured\n *\n */\nenum class Control { BREAK, CONTINUE }\nfun &lt;T&gt; List&lt;T&gt;.each(consumer : (T) -&gt; Control) : Boolean {\n    for( t in this) {\n        when(consumer(t)) {\n            Control.BREAK -&gt; return false\n        }\n    }\n    return true\n}\n</code></pre>\n\n<p>Now you can just do:</p>\n\n<pre><code> list.each {\n                if(...) {\n                    logger.debug { \"break\" }\n                    return@each Control.BREAK\n                } else {\n                    logger.debug { \"continue\" }\n                    return@each Control.CONTINUE\n                }\n\n}\n</code></pre>\n\n<p>I think extension methods are a very compelling feature in Kotlin that you'll have to deal with sooner or later anyways so you might as well use it to make your code more readable. </p>\n"}], "owner": {"reputation": 13035, "user_id": 305135, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/cf9b63f6e0e2d709993723d9b9be79cf?s=128&d=identicon&r=PG", "display_name": "AVEbrahimi", "link": "https://stackoverflow.com/users/305135/avebrahimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3372, "favorite_count": 1, "accepted_answer_id": 48057388, "answer_count": 3, "score": 5, "last_activity_date": 1519906307, "creation_date": 1514877401, "last_edit_date": 1514902631, "question_id": 48056994, "link": "https://stackoverflow.com/questions/48056994/return-doesnt-jump-out-of-foreach-in-kotlin", "title": "&#39;return&#39; doesn&#39;t jump out of forEach in Kotlin", "body": "<p>I have this Kotlin code, why <strong>return@forEach</strong> doesn't jump out of <strong>forEach</strong>? It continues the loop until it finishes, removing reversed() doesn't solve problem:</p>\n\n<pre><code>rendered_words.reversed().forEach  { rw -&gt;\n                    if (rw.y - the_top &gt; 0 &amp;&amp; rw.y - the_top &lt; height) {\n                        new_top = rw.y\n                        return@forEach\n                    }\n                }\n                smoothScrollTo(Math.min(text_y - height, new_top))\n</code></pre>\n\n<p>I tried replacing <strong>return@forEach</strong> with <strong>break@forEach</strong> but Kotlin compiler says : </p>\n\n<blockquote>\n  <p>Error:(785, 25) The label '@forEach' does not denote a loop</p>\n</blockquote>\n"}, {"tags": ["java", "android", "kotlin", "coding-style"], "comments": [{"owner": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 1, "creation_date": 1514873526, "post_id": 48056248, "comment_id": 83084810, "body": "Honestly, I never understood why people used an <code>m</code> prefix in Java. I never did that."}, {"owner": {"reputation": 577, "user_id": 410579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb1e2716f8a9b4aff5bd3458962ae2a?s=128&d=identicon&r=PG", "display_name": "kocka", "link": "https://stackoverflow.com/users/410579/kocka"}, "edited": false, "score": 0, "creation_date": 1514878602, "post_id": 48056248, "comment_id": 83086566, "body": "This practice is called Hungarian Notation. It does not seem to make much sense in a strongly typed language."}, {"owner": {"reputation": 2775, "user_id": 2102748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1adcb8ed924ecd1045fd6252a7df18?s=128&d=identicon&r=PG", "display_name": "milosmns", "link": "https://stackoverflow.com/users/2102748/milosmns"}, "edited": false, "score": 0, "creation_date": 1519568795, "post_id": 48056248, "comment_id": 84953928, "body": "It is very common in Android Java as the SDK guys introduced it as a guideline a while back."}, {"owner": {"reputation": 2775, "user_id": 2102748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1adcb8ed924ecd1045fd6252a7df18?s=128&d=identicon&r=PG", "display_name": "milosmns", "link": "https://stackoverflow.com/users/2102748/milosmns"}, "edited": false, "score": 0, "creation_date": 1519568911, "post_id": 48056248, "comment_id": 84953963, "body": "Also I voted this up as it&#39;s the first result on Google for Kotlin property naming. It does lead to the official docs eventually, so I&#39;d say it&#39;s a good question."}, {"owner": {"reputation": 738, "user_id": 11218205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea0f36074b704f686940881088809458?s=128&d=identicon&r=PG&f=1", "display_name": "Dr Phil", "link": "https://stackoverflow.com/users/11218205/dr-phil"}, "edited": false, "score": 0, "creation_date": 1559014024, "post_id": 48056248, "comment_id": 99275478, "body": "m is still better than underscore. But both are remnants of other ages and even languages."}], "answers": [{"tags": [], "owner": {"reputation": 7970, "user_id": 1542667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f9f47b7c64629cadb45754234bcc944?s=128&d=identicon&r=PG", "display_name": "Yuri Schimke", "link": "https://stackoverflow.com/users/1542667/yuri-schimke"}, "is_accepted": true, "score": 19, "last_activity_date": 1617700287, "last_edit_date": 1617700287, "creation_date": 1514873396, "answer_id": 48056288, "question_id": 48056248, "link": "https://stackoverflow.com/questions/48056248/using-m-prefix-for-variables-in-kotlin/48056288#48056288", "title": "Using &quot;m&quot; prefix for variables in Kotlin", "body": "<p>A good reference from Android</p>\n<p><a href=\"https://developer.android.com/kotlin/style-guide#naming_2\" rel=\"nofollow noreferrer\">https://developer.android.com/kotlin/style-guide#naming_2</a></p>\n<blockquote>\n<p>Special prefixes or suffixes, like those seen in the examples name_,\nmName, s_name, and kName, are not used except in the case of backing\nproperties (see \u201c<a href=\"https://developer.android.com/kotlin/style-guide#backing-properties\" rel=\"nofollow noreferrer\">Backing properties</a>\u201d).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "is_accepted": false, "score": 9, "last_activity_date": 1514873444, "creation_date": 1514873444, "answer_id": 48056303, "question_id": 48056248, "link": "https://stackoverflow.com/questions/48056248/using-m-prefix-for-variables-in-kotlin/48056303#48056303", "title": "Using &quot;m&quot; prefix for variables in Kotlin", "body": "<p>Per the <a href=\"https://android.github.io/kotlin-guides/style.html#naming-1\" rel=\"noreferrer\">Android Kotlin Style Guide</a>:</p>\n\n<blockquote>\n  <p>Special prefixes or suffixes, like those seen in the examples <code>name_</code>, <code>mName</code>, <code>s_name</code>, and <code>kName</code>, are not used except in the case of backing properties (see \u201c<a href=\"https://android.github.io/kotlin-guides/style.html#backing-properties\" rel=\"noreferrer\">Backing properties</a>\u201d).</p>\n</blockquote>\n\n<p>Therefore you should not use the \"m\" prefix for variables in Kotlin.</p>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 5, "last_activity_date": 1520232030, "last_edit_date": 1592644375, "creation_date": 1514879010, "answer_id": 48057325, "question_id": 48056248, "link": "https://stackoverflow.com/questions/48056248/using-m-prefix-for-variables-in-kotlin/48057325#48057325", "title": "Using &quot;m&quot; prefix for variables in Kotlin", "body": "<p>I actually don\u2019t think it\u2019s good practise to have prefixed variables in the public API, thus <code>foo.mName = &quot;Foo&quot;</code> would be undesirable. For <em>private</em> fields this would be acceptable though.</p>\n<p>The official <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html\" rel=\"nofollow noreferrer\">conventions</a> for the Kotlin language say:</p>\n<blockquote>\n<p><strong>Names for backing properties</strong></p>\n<p>If a class has two properties which are conceptually the same but one is part of a public API and another is an implementation detail, use an <strong>underscore</strong> as the prefix for the name of the private property:</p>\n</blockquote>\n<pre><code>class C {\n    private val _elementList = mutableListOf&lt;Element&gt;()\n\n    val elementList: List&lt;Element&gt;\n         get() = _elementList\n}\n</code></pre>\n"}], "owner": {"reputation": 4727, "user_id": 6696558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tA43f.jpg?s=128&g=1", "display_name": "Hugo Passos", "link": "https://stackoverflow.com/users/6696558/hugo-passos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5152, "favorite_count": 4, "accepted_answer_id": 48056288, "answer_count": 3, "score": 18, "last_activity_date": 1617700287, "creation_date": 1514873163, "last_edit_date": 1559007340, "question_id": 48056248, "link": "https://stackoverflow.com/questions/48056248/using-m-prefix-for-variables-in-kotlin", "title": "Using &quot;m&quot; prefix for variables in Kotlin", "body": "<p>Using \"m\" prefix for variable names became usual in programming, mainly in Android, but since Kotlin arrived, this minor thing bothers me a bit.</p>\n\n<p>Setting and getting variables with \"m\" prefix doesn't seem really nice, because in Java we create (and name) our setters and getters, so we can omit the \"m\", but this doesn't happen in Kotlin, unless we walk in the opposite of conventions and repeat Java's technique.</p>\n\n<p>Java:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Foo {\n    private String mName;\n\n    public void setName(String name) {\n        mName = name;\n    }\n\n    public String getName() {\n        return mName;\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        Foo foo = new Foo();\n        foo.setName(\"Foo\");\n    }\n}\n</code></pre>\n\n<p>Kotlin:</p>\n\n<pre><code>data class Foo(val mName: String)\n\nfun main(args: Array&lt;String&gt;) {\n    val foo = Foo()\n    foo.mName = \"Foo\"  // \"m\" prefix doesn't fit\n}\n</code></pre>\n\n<p>What should we do? Is there a new convention to follow?</p>\n"}, {"tags": ["android", "kotlin", "firebase-job-dispatcher"], "answers": [{"tags": [], "owner": {"reputation": 1302, "user_id": 420412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97dd48725d80ea0268e4011a520a89c7?s=128&d=identicon&r=PG", "display_name": "gildor", "link": "https://stackoverflow.com/users/420412/gildor"}, "is_accepted": true, "score": 5, "last_activity_date": 1515483862, "last_edit_date": 1515483862, "creation_date": 1514955708, "answer_id": 48071439, "question_id": 48056148, "link": "https://stackoverflow.com/questions/48056148/type-inference-failed-firebase-jobdispatcher/48071439#48071439", "title": "Type inference failed. Firebase JobDispatcher", "body": "<p>Are you sure that you extend proper JobService?\nFirebase provides <code>com.firebase.jobdispatcher.JobService</code> but Android after API level 21 provides <code>android.app.job.JobService</code> (Firebase is compat version of this API)</p>\n\n<p>Check your imports in LocationFirebaseJobService</p>\n"}], "owner": {"reputation": 164, "user_id": 6827568, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/klqFq.png?s=128&g=1", "display_name": "MS2099", "link": "https://stackoverflow.com/users/6827568/ms2099"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 1, "accepted_answer_id": 48071439, "answer_count": 1, "score": 1, "last_activity_date": 1552136584, "creation_date": 1514872373, "last_edit_date": 1552136584, "question_id": 48056148, "link": "https://stackoverflow.com/questions/48056148/type-inference-failed-firebase-jobdispatcher", "title": "Type inference failed. Firebase JobDispatcher", "body": "<p>I'm facing the following error on this line: <code>.setService(LocationFirebaseJobService::class.java)</code>:</p>\n\n<p>Type inference failed. Expected type mismatch: inferred type is <code>Class&lt;LocationFirebaseJobService&gt;</code> but <code>Class&lt;out JobService!&gt;</code> was expected</p>\n\n<p>Here is my code:</p>\n\n<pre><code>val dispatcher = FirebaseJobDispatcher(GooglePlayDriver(context))\n\n            val myJob = dispatcher.newJobBuilder()\n                    .setService(LocationFirebaseJobService::class.java)         \n                    .setTag(\"my-unique-tag\")                                    \n                    .build()\n</code></pre>\n\n<p>My LocationFirebaseJobService class:</p>\n\n<pre><code>class LocationFirebaseJobService: JobService() {\n\n    override fun onStartJob(p0: JobParameters?): Boolean {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    override fun onStopJob(p0: JobParameters?): Boolean {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-kotlin"], "comments": [{"owner": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "edited": false, "score": 0, "creation_date": 1514868676, "post_id": 48055716, "comment_id": 83083653, "body": "<code>its not working</code> what is the issue share your error log?"}, {"owner": {"reputation": 243, "user_id": 7251198, "user_type": "registered", "accept_rate": 35, "profile_image": "https://graph.facebook.com/1322361194472003/picture?type=large", "display_name": "Maklee Lee", "link": "https://stackoverflow.com/users/7251198/maklee-lee"}, "reply_to_user": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "edited": false, "score": 0, "creation_date": 1514868777, "post_id": 48055716, "comment_id": 83083676, "body": "its no Error is coming actually it display very short time and sudden hide @R2R"}, {"owner": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "edited": false, "score": 0, "creation_date": 1514868859, "post_id": 48055716, "comment_id": 83083690, "body": "yes because <code>getQrImageBitmap</code> and   <code>showDetail</code> executed means it will hide."}, {"owner": {"reputation": 243, "user_id": 7251198, "user_type": "registered", "accept_rate": 35, "profile_image": "https://graph.facebook.com/1322361194472003/picture?type=large", "display_name": "Maklee Lee", "link": "https://stackoverflow.com/users/7251198/maklee-lee"}, "reply_to_user": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "edited": false, "score": 0, "creation_date": 1514868935, "post_id": 48055716, "comment_id": 83083708, "body": "but that getQrImageBitmap , showDetail not completed that time i checked"}, {"owner": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "edited": false, "score": 0, "creation_date": 1514868963, "post_id": 48055716, "comment_id": 83083713, "body": "Can you share whole code"}, {"owner": {"reputation": 243, "user_id": 7251198, "user_type": "registered", "accept_rate": 35, "profile_image": "https://graph.facebook.com/1322361194472003/picture?type=large", "display_name": "Maklee Lee", "link": "https://stackoverflow.com/users/7251198/maklee-lee"}, "reply_to_user": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "edited": false, "score": 0, "creation_date": 1514869107, "post_id": 48055716, "comment_id": 83083744, "body": "<a href=\"https://paste.ofcode.org/QLD28YQZP4XYVXdSqRGjxR\" rel=\"nofollow noreferrer\">paste.ofcode.org/QLD28YQZP4XYVXdSqRGjxR</a>  this class is view <a href=\"https://paste.ofcode.org/39GmAvm5jK3UsT8kyAi9fzL\" rel=\"nofollow noreferrer\">paste.ofcode.org/39GmAvm5jK3UsT8kyAi9fzL</a> viewmode"}], "answers": [{"tags": [], "owner": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "is_accepted": false, "score": 0, "last_activity_date": 1514869603, "creation_date": 1514869603, "answer_id": 48055832, "question_id": 48055716, "link": "https://stackoverflow.com/questions/48055716/how-to-show-progress-dialog-and-dismiss-on-item-click/48055832#48055832", "title": "How to show Progress dialog and dismiss on Item click", "body": "<p>Add Prorgressbar inside <code>showDetail()</code> method</p>\n\n<pre><code>  fun showDetail(position: Int) {\n    SharedPreferenceUtils.setExchangePagePostion(this!!.activity!!, position)\n    binding?.textHeader?.text = exchangeData[position]\n    binding?.backButton?.visibility = View.VISIBLE\n    binding?.recyclerView?.visibility = View.GONE\n    binding?.barcode?.visibility = View.VISIBLE\n    binding?.header1?.setBackgroundResource(R.color.colorOrangeGray)\n    binding?.exchangeButton?.visibility = View.VISIBLE\n\n\n    binding.progressbar.visibility=View.GONE\n}\n</code></pre>\n"}], "owner": {"reputation": 243, "user_id": 7251198, "user_type": "registered", "accept_rate": 35, "profile_image": "https://graph.facebook.com/1322361194472003/picture?type=large", "display_name": "Maklee Lee", "link": "https://stackoverflow.com/users/7251198/maklee-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 713, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1514871879, "creation_date": 1514868556, "last_edit_date": 1514871342, "question_id": 48055716, "link": "https://stackoverflow.com/questions/48055716/how-to-show-progress-dialog-and-dismiss-on-item-click", "title": "How to show Progress dialog and dismiss on Item click", "body": "<pre><code> override fun itemclick(position: Int) {\n        binding.progressbar.visibility=View.VISIBLE\n        binding?.barcode?.setImageBitmap(exchngeViewModel.getQrImageBitmap(qrCodeData[position], this!!.activity!!))\n        showDetail(position)\n        binding.progressbar.visibility=View.GONE\n    }    \n\nfun getQrImageBitmap(data: String, context: Context): Bitmap? {\n        bitMap = AppUtils.TextToImageEncode(data, context, bus) \n        return this!!.bitMap\n    }\n</code></pre>\n\n<p>This is my code i want to display Progress <code>dialog</code> on item click it should dismiss till that time when  <code>getQrImageBitmap</code> and showDetail function  completed but i its not working please suggest me how to achieve this how to show and hide detail on item click.Thanks!! </p>\n"}, {"tags": ["android", "kotlin", "datetime-format"], "answers": [{"tags": [], "owner": {"reputation": 19955, "user_id": 101087, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/646f0fa3075659904242cf6f576ed2e9?s=128&d=identicon&r=PG", "display_name": "NineBerry", "link": "https://stackoverflow.com/users/101087/nineberry"}, "is_accepted": false, "score": 1, "last_activity_date": 1514867753, "creation_date": 1514867753, "answer_id": 48055625, "question_id": 48055606, "link": "https://stackoverflow.com/questions/48055606/kotlin-datetimeformat-returning-wrong-month/48055625#48055625", "title": "Kotlin DateTimeformat returning wrong month", "body": "<p>The month is 0-based, so 0 is January, 1 is February, and so on</p>\n"}, {"tags": [], "owner": {"reputation": 2774, "user_id": 3363228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f2654f48d91375a43fa07e9ea616354?s=128&d=identicon&r=PG&f=1", "display_name": "ubadub", "link": "https://stackoverflow.com/users/3363228/ubadub"}, "is_accepted": true, "score": 5, "last_activity_date": 1514867823, "creation_date": 1514867823, "answer_id": 48055633, "question_id": 48055606, "link": "https://stackoverflow.com/questions/48055606/kotlin-datetimeformat-returning-wrong-month/48055633#48055633", "title": "Kotlin DateTimeformat returning wrong month", "body": "<p>Months for the <code>Calendar</code> class in Java are 0-indexed.</p>\n\n<p><code>cal.set(2018, 0, 20)</code></p>\n\n<p>is what you what.</p>\n\n<p>However, this is why it's generally better to use the final int fields defined in the Calendar class, , rather than hardcoding the number. In this case, that's <code>JANUARY</code>. <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#JANUARY\" rel=\"noreferrer\">See here</a>.</p>\n\n<p>So that would give:</p>\n\n<p><code>cal.set(2018, Calendar.JANUARY, 20)</code></p>\n"}, {"tags": [], "owner": {"reputation": 3306, "user_id": 4229796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x9p0l.jpg?s=128&g=1", "display_name": "Dipali Shah", "link": "https://stackoverflow.com/users/4229796/dipali-shah"}, "is_accepted": false, "score": 1, "last_activity_date": 1514867918, "creation_date": 1514867918, "answer_id": 48055641, "question_id": 48055606, "link": "https://stackoverflow.com/questions/48055606/kotlin-datetimeformat-returning-wrong-month/48055641#48055641", "title": "Kotlin DateTimeformat returning wrong month", "body": "<blockquote>\n  <p>The first month of the year in the Gregorian and Julian calendars is\n  JANUARY which is 0; the last depends on the number of months in a\n  year.</p>\n</blockquote>\n\n<p>So, to set January </p>\n\n<pre><code>var cal = Calendar.getInstance()\ncal.timeZone = TimeZone.getTimeZone(\"America/New_York\")\ncal.set(2018, 0, 20) // set Month field to Zero\nval date: Date = cal.time\nprintln(date)  //This prints: Sat Jan 20 23:25:59 EST 2018\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3516, "user_id": 5110595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19aXD.jpg?s=128&g=1", "display_name": "Hemant Parmar", "link": "https://stackoverflow.com/users/5110595/hemant-parmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1514868067, "creation_date": 1514868067, "answer_id": 48055659, "question_id": 48055606, "link": "https://stackoverflow.com/questions/48055606/kotlin-datetimeformat-returning-wrong-month/48055659#48055659", "title": "Kotlin DateTimeformat returning wrong month", "body": "<p>Use <code>Calendar</code> for get months</p>\n\n<pre><code>Calendar calendar=Calendar.getInstance();\ncalendar.set(2018, Calendar.JANUARY, 20)//set date format\nval date: Date = calendar.time\nprintln(date)//print : 2018 Jan 20\n</code></pre>\n\n<p>Happy coding!!</p>\n"}, {"tags": [], "owner": {"reputation": 2808, "user_id": 5539082, "user_type": "registered", "profile_image": "https://graph.facebook.com/870880569673790/picture?type=large", "display_name": "ND1010_", "link": "https://stackoverflow.com/users/5539082/nd1010"}, "is_accepted": false, "score": 0, "last_activity_date": 1514868862, "last_edit_date": 1514868862, "creation_date": 1514868334, "answer_id": 48055691, "question_id": 48055606, "link": "https://stackoverflow.com/questions/48055606/kotlin-datetimeformat-returning-wrong-month/48055691#48055691", "title": "Kotlin DateTimeformat returning wrong month", "body": "<blockquote>\n  <p>Why am I getting Feb when month is set to 1 (January)?</p>\n</blockquote>\n\n<p>You are getting <strong>Feb</strong> because at index <code>1 = FEB</code></p>\n\n<p>In <code>cal.set(2018, month index, 20)</code> method the second parameter having MONTH index parameter are indexed as below :   </p>\n\n<pre><code>    0 = JAN\n\n    1 = FEB\n\n    2=MARCH\n\n    3=APRIL\n\n    4=MAY\n\n    5=JUNE\n\n    6=JULY\n\n    7=AUG\n\n    8=SEPT\n\n    9=OCT\n\n    10=NOV\n\n    11=DEC\n</code></pre>\n\n<p><strong>Answer :</strong> Use <code>Calendar.JANUARY</code> or <code>0</code> to solve your problem</p>\n\n<pre><code>var cal = Calendar.getInstance()\ncal.timeZone = TimeZone.getTimeZone(\"America/New_York\")\ncal.set(2018, 0, 20)\nval date: Date = cal.time\nprintln(date)  //This prints: Tue Jan 20 23:25:59 EST 2018\n</code></pre>\n"}], "owner": {"reputation": 2516, "user_id": 3890041, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/acb0375bb7d035f9b1cda3c0bd8eb36e?s=128&d=identicon&r=PG&f=1", "display_name": "FlatDog", "link": "https://stackoverflow.com/users/3890041/flatdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1205, "favorite_count": 0, "closed_date": 1514868773, "accepted_answer_id": 48055633, "answer_count": 5, "score": 2, "last_activity_date": 1514868862, "creation_date": 1514867566, "question_id": 48055606, "link": "https://stackoverflow.com/questions/48055606/kotlin-datetimeformat-returning-wrong-month", "closed_reason": "Duplicate", "title": "Kotlin DateTimeformat returning wrong month", "body": "<p>Simple code, but something is wrong! I'm new to Kotlin, trying to take a date string and convert it into Date() format. When I convert back it gives wrong month. Example:</p>\n\n<pre><code>var cal = Calendar.getInstance()\ncal.timeZone = TimeZone.getTimeZone(\"America/New_York\")\ncal.set(2018, 1, 20)\nval date: Date = cal.time\nprintln(date)  //This prints: Tue Feb 20 23:25:59 EST 2018\n</code></pre>\n\n<p>Why am I getting Feb when month is set to 1 (January)?</p>\n\n<p>Ultimately, I want to take a string in the format of \"MM/dd/yyyy\" and convert that to Date() format, but seem to be having trouble (need to support API 15), and using Calendar is my attempt to do this without the date formatters that need later APIs. Any ideas on a better way?</p>\n"}, {"tags": ["java", "caching", "kotlin", "microservices", "hazelcast"], "answers": [{"comments": [{"owner": {"reputation": 1771, "user_id": 1517126, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/x9eaH.png?s=128&g=1", "display_name": "R00We", "link": "https://stackoverflow.com/users/1517126/r00we"}, "edited": false, "score": 0, "creation_date": 1550651947, "post_id": 48059594, "comment_id": 96342641, "body": "Documentation about this decision <a href=\"https://docs.hazelcast.org/docs/latest/manual/html-single/#configuring-client-connection-retry\" rel=\"nofollow noreferrer\">docs.hazelcast.org/docs/latest/manual/html-single/&hellip;</a>"}], "tags": [], "owner": {"reputation": 871, "user_id": 3327350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AVCYL.jpg?s=128&g=1", "display_name": "Alparslan Avci", "link": "https://stackoverflow.com/users/3327350/alparslan-avci"}, "is_accepted": true, "score": 5, "last_activity_date": 1514890243, "creation_date": 1514890243, "answer_id": 48059594, "question_id": 48055121, "link": "https://stackoverflow.com/questions/48055121/how-to-reconnect-a-hazelcastclient-to-hazelcastserver-after-server-restart/48059594#48059594", "title": "How to reconnect a HazelcastClient to HazelcastServer after server restart", "body": "<p>The Connection Attempt Limit and Connection Attempt Period configuration elements help to configure clients' reconnection behaviour. The client will retry as many as <code>ClientNetworkConfig.connectionAttemptLimit</code> times to reconnect to the cluster. Connection Attempt Period is the duration in milliseconds between the connection attempts defined by <code>ClientNetworkConfig.connectionAttemptLimit</code>. Here is an example of how you configure them:</p>\n\n<pre><code>ClientConfig clientConfig = new ClientConfig();\nclientConfig.getNetworkConfig().setConnectionAttemptLimit(5);\nclientConfig.getNetworkConfig().setConnectionAttemptPeriod(5000);\n</code></pre>\n\n<p>Starting with Hazelcast 3.9, you can use configuration element <code>reconnect-mode</code> to configure how the client will reconnect to the cluster after a disconnection. It has three options (<code>OFF</code>, <code>ON</code> or <code>ASYNC</code>). The option <code>OFF</code> disables the reconnection. <code>ON</code> enables reconnection in a blocking manner where all the waiting invocations will be blocked until a cluster connection is established or failed. The option <code>ASYNC</code> enables reconnection in a non-blocking manner where all the waiting invocations will receive a <code>HazelcastClientOfflineException</code>. Its default value is <code>ON</code>. You can see a configuration example below:</p>\n\n<pre><code>ClientConfig clientConfig = new ClientConfig();\nclientConfig.getConnectionStrategyConfig()\n               .setReconnectMode(ClientConnectionStrategyConfig.ReconnectMode.ON);\n</code></pre>\n"}], "owner": {"reputation": 611, "user_id": 8049084, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lFpl6l2tRI0/AAAAAAAAAAI/AAAAAAAAAAA/nUibcAKchHE/photo.jpg?sz=128", "display_name": "Renato Garcia", "link": "https://stackoverflow.com/users/8049084/renato-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2959, "favorite_count": 0, "accepted_answer_id": 48059594, "answer_count": 1, "score": 2, "last_activity_date": 1515000840, "creation_date": 1514861978, "question_id": 48055121, "link": "https://stackoverflow.com/questions/48055121/how-to-reconnect-a-hazelcastclient-to-hazelcastserver-after-server-restart", "title": "How to reconnect a HazelcastClient to HazelcastServer after server restart", "body": "<p>I'm having a problem using the hazelcast in an architecture based on microservice and springboot.\nI keep one of the applications with being the application that will be the server of hazelcast and the others are clients of this.\nHowever if I have to update the application that is the hazelcast server, the clients applications of the cache overturn the connection to the server and when I up the new version of the server these client applications do not reconnect.\nIs there any off setting the hazelcastclient to be doing pooling on the server to try to reconnect as soon as it comes back?\nMy client is like below:</p>\n\n<pre>\n\n    @bean\n    open fun hazelcastInstance(): HazelcastInstance? {\n    return try {\n    val clientConfig = ClientConfig()\n    HazelcastClient.newHazelcastClient(clientConfig)\n    } catch (e: Exception) {\n    log.error(\"Could not connect to hazelcast server, server up without cache\")\n    null\n    }\n\n}\n</pre>\n\n<p>and I receive \"com.hazelcast.client.HazelcastClientNotActiveException: Client is shutdown\" if my server goes down.</p>\n\n<p>I'm grateful if you could help me</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1514849989, "post_id": 48054124, "comment_id": 83080604, "body": "Are you confused about <code>typealias</code>, or about <code>(Kitty) -&gt; Unit</code>?"}, {"owner": {"reputation": 5269, "user_id": 3268303, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8480b7d6292d1310066b690175c73c5b?s=128&d=identicon&r=PG&f=1", "display_name": "dazza5000", "link": "https://stackoverflow.com/users/3268303/dazza5000"}, "edited": false, "score": 0, "creation_date": 1514850476, "post_id": 48054124, "comment_id": 83080675, "body": "I think both - And I am also confused about the use of the invoke method on newKittiesReceived. It seems weird because we are passing in a typealias object and then calling invoke on the instance of that object."}, {"owner": {"reputation": 5269, "user_id": 3268303, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8480b7d6292d1310066b690175c73c5b?s=128&d=identicon&r=PG&f=1", "display_name": "dazza5000", "link": "https://stackoverflow.com/users/3268303/dazza5000"}, "edited": false, "score": 0, "creation_date": 1514850714, "post_id": 48054124, "comment_id": 83080715, "body": "I&#39;m wondering how invoke is typed to (Kitty) -&gt; Unit"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1514850967, "post_id": 48054124, "comment_id": 83080752, "body": "That is a function type (<a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/lambdas.html#function-types</a>)"}, {"owner": {"reputation": 5269, "user_id": 3268303, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8480b7d6292d1310066b690175c73c5b?s=128&d=identicon&r=PG&f=1", "display_name": "dazza5000", "link": "https://stackoverflow.com/users/3268303/dazza5000"}, "edited": false, "score": 0, "creation_date": 1514852141, "post_id": 48054124, "comment_id": 83080939, "body": "Okay - so we are defining a function type using a typealias keyword and then calling the &quot;invoke&quot; method on that function using the variable reference?"}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 1, "creation_date": 1514854580, "post_id": 48054124, "comment_id": 83081291, "body": "In Kotlin, lambda types have the format <code>Receiver.(Parameters) -&gt; Return</code>. If your lambda does not have a receiver (with appears as <code>this</code> inside the lambda), you can omit it. The <code>typealias</code> is then an alias for the lambda type <code>(Kitty) -&gt; Unit</code>. And as every other lambda type, you can call the <code>invoke</code> method on it - or even use the overloaded operator <code>()</code>"}, {"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1514873662, "post_id": 48054124, "comment_id": 83084837, "body": "You need a dictionary, not a tech advice. What does the word \u201calias\u201d mean to you?"}], "answers": [{"comments": [{"owner": {"reputation": 5269, "user_id": 3268303, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8480b7d6292d1310066b690175c73c5b?s=128&d=identicon&r=PG&f=1", "display_name": "dazza5000", "link": "https://stackoverflow.com/users/3268303/dazza5000"}, "edited": false, "score": 0, "creation_date": 1514900476, "post_id": 48054963, "comment_id": 83096591, "body": "I do not see much of this coming form the world of Android. Thank you for helping me understand."}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 2, "last_activity_date": 1514860443, "creation_date": 1514860443, "answer_id": 48054963, "question_id": 48054124, "link": "https://stackoverflow.com/questions/48054124/what-is-a-typealias-in-kotlin-and-how-is-it-being-used-in-this-implementation/48054963#48054963", "title": "What is a typealias in Kotlin and how is it being used in this implementation?", "body": "<p>It\u2019s often more readable to have dedicated names for function types, such as <code>(Kitty) -&gt; Unit</code>. In the end, a typealias simply gives us a way to define an alias for such a (e.g.) function type which can then be used throughout the code <em>instead</em> of that explicit type as a 1:1 replacement.</p>\n\n<p>In your example the function type <code>(Kitty) -&gt; Unit</code> is being aliased with <code>NewKittiesReceived</code>, which is an argument to the shown function <code>receiveNewKitties</code>. Every variable holding a function (<code>newKittiesReceived</code> in the example) can be invoked with <code>function.invoke(arguments...)</code> <strong>or</strong> simpler with <code>function(arguments)</code>. </p>\n\n<p>There\u2019s only a single situation in which the <code>typealias</code> is used actually: the definition of <code>newKittiesReceived: NewKittiesReceived</code> will be translated to <code>newKittiesReceived: (Kitty) -&gt; Unit</code>.</p>\n\n<p>The docs are found <a href=\"https://kotlinlang.org/docs/reference/type-aliases.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1514897795, "creation_date": 1514897795, "answer_id": 48061442, "question_id": 48054124, "link": "https://stackoverflow.com/questions/48054124/what-is-a-typealias-in-kotlin-and-how-is-it-being-used-in-this-implementation/48061442#48061442", "title": "What is a typealias in Kotlin and how is it being used in this implementation?", "body": "<p>This is what the <a href=\"https://kotlinlang.org/docs/reference/type-aliases.html\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n\n<blockquote>\n  <p>Type aliases provide alternative names for existing types. If the type\n  name is too long you can introduce a different shorter name and use\n  the new one instead.</p>\n</blockquote>\n\n<p>So, as you can see, typealises improve readability and shorten names that are to long.</p>\n"}], "owner": {"reputation": 5269, "user_id": 3268303, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8480b7d6292d1310066b690175c73c5b?s=128&d=identicon&r=PG&f=1", "display_name": "dazza5000", "link": "https://stackoverflow.com/users/3268303/dazza5000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1021, "favorite_count": 0, "accepted_answer_id": 48054963, "answer_count": 2, "score": -4, "last_activity_date": 1514897795, "creation_date": 1514849583, "last_edit_date": 1514854644, "question_id": 48054124, "link": "https://stackoverflow.com/questions/48054124/what-is-a-typealias-in-kotlin-and-how-is-it-being-used-in-this-implementation", "title": "What is a typealias in Kotlin and how is it being used in this implementation?", "body": "<p>I see there is a typealias keyword being used and then the invoke method is being called on that \"type\"</p>\n\n<p>Can someone please provide insight into what this is and how it is being used?</p>\n\n<pre><code>typealias NewKittiesReceived = (Kitty) -&gt; Unit\n\nclass KittyRepository {\n    private val timer = Timer()\n    private val random = Random()\n    private val period = TimeUnit.SECONDS.toMillis(1)\n\n    internal fun receiveNewKitties(newKittiesReceived: NewKittiesReceived) {\n        timer.schedule(object : TimerTask() {\n            override fun run() {\n                val nameRandom = random.nextInt(KittyNames.values().size)\n                val ageRandom = random.nextInt(5)\n\n                newKittiesReceived.invoke(Kitty(KittyNames.values()[nameRandom].name, ageRandom))\n            }\n        }, period, period)\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "delegates", "kotlin", "delegation"], "comments": [{"owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 0, "creation_date": 1514903463, "post_id": 48054110, "comment_id": 83098207, "body": "What is the use case for this?"}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "reply_to_user": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 0, "creation_date": 1514958736, "post_id": 48054110, "comment_id": 83117322, "body": "@Todd I&#39;m trying to have a global object that holds the configuration of my library as well as providing methods to modify it. I know there are different ways to accomplish this, but this seems like a convenient way to have properties and methods in one place without creating a wrapper class"}, {"owner": {"reputation": 6434, "user_id": 539599, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iB0U.jpg?s=128&g=1", "display_name": "Raphael", "link": "https://stackoverflow.com/users/539599/raphael"}, "edited": false, "score": 0, "creation_date": 1540227112, "post_id": 48054110, "comment_id": 92777560, "body": "It doesn&#39;t even work if passing a proper <code>object</code>! It seems the compiler really, really want to know statically what&#39;s going to happen. I think that makes sense, too; if you implemented the methods yourself, they wouldn&#39;t change at runtime (unless reflection), so in order to have similar guarantees, the compiler needs to fix the delegate."}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "reply_to_user": {"reputation": 6434, "user_id": 539599, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iB0U.jpg?s=128&g=1", "display_name": "Raphael", "link": "https://stackoverflow.com/users/539599/raphael"}, "edited": false, "score": 0, "creation_date": 1540291558, "post_id": 48054110, "comment_id": 92802277, "body": "@Raphael I don&#39;t see how that makes sense, as a manually implemented method can change bedaviour when the instance variables change. So why shouldn&#39;t that be the case for auto-generated methods as well?"}, {"owner": {"reputation": 6434, "user_id": 539599, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iB0U.jpg?s=128&g=1", "display_name": "Raphael", "link": "https://stackoverflow.com/users/539599/raphael"}, "edited": false, "score": 0, "creation_date": 1540295462, "post_id": 48054110, "comment_id": 92804638, "body": "@msrd0 A manually implemented method depends only on statically known declarations, and the compiler can reason about those (e.g. a <code>val</code> won&#39;t change). If you swap out the delegate -- potentially with a whole different class! -- what is <i>declared</i> as a <code>val</code> (in the delegate interface) suddenly changed. (Note how you could never ever delegate <code>val</code>s!) Therefore, if you allowed to swap out delegate objects, the compiler can rely on (far?) fewer things. Now, that doesn&#39;t imply one <i>couldn&#39;t</i> allow that; it&#39;s probably a trade-off."}, {"owner": {"reputation": 6434, "user_id": 539599, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iB0U.jpg?s=128&g=1", "display_name": "Raphael", "link": "https://stackoverflow.com/users/539599/raphael"}, "edited": false, "score": 0, "creation_date": 1540295543, "post_id": 48054110, "comment_id": 92804697, "body": "I think a discussion about design choices would be better off on <a href=\"https://discuss.kotlinlang.org/\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org</a>."}], "answers": [{"tags": [], "owner": {"reputation": 306, "user_id": 3871239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa5e08684f7757ba873b4b0c3973cea?s=128&d=identicon&r=PG", "display_name": "Nicol&#225;s Scarcella", "link": "https://stackoverflow.com/users/3871239/nicol%c3%a1s-scarcella"}, "is_accepted": false, "score": 1, "last_activity_date": 1525298902, "creation_date": 1525298902, "answer_id": 50144250, "question_id": 48054110, "link": "https://stackoverflow.com/questions/48054110/how-can-i-delegate-an-implementation-to-a-mutable-property-in-kotlin/50144250#50144250", "title": "How can I delegate an implementation to a mutable property in Kotlin?", "body": "<p>Sadly, as far as I know there is no way of changing the delegate by changing the original property content, <strong>but</strong> you might still be able to do something similar by working in an immutable way and copying the object:</p>\n\n<pre><code>interface MyInterface {\n  fun foo():Int\n}\n\ndata class MyClass(val delegate : MyInterface) : MyInterface by delegate\n\nobject ImplementationA: MyInterface { override fun foo() = 7 }\nobject ImplementationB: MyInterface { override fun foo() = 5 }\n\nval objA = MyClass(ImplementationA)\nprintln(objA.foo()) // returns 7\n\nval objB = objA.copy(ImplementationB)\nprintln(objB.foo()) // returns 5\nprintln(objA.foo()) // still 7\n</code></pre>\n\n<p>Hope this is still useful.</p>\n"}], "owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1525298902, "creation_date": 1514849388, "last_edit_date": 1514854387, "question_id": 48054110, "link": "https://stackoverflow.com/questions/48054110/how-can-i-delegate-an-implementation-to-a-mutable-property-in-kotlin", "title": "How can I delegate an implementation to a mutable property in Kotlin?", "body": "<p>As to my understanding, the idea of delegating an implementation in Kotlin is to avoid code that looks like this:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MyClass(val delegate : MyInterface) : MyInterface\n{\n    override fun myAbstractFun1() = delegate.myAbstractFun1()\n    override fun myAbstractFun2() = delegate.myAbstractFun2()\n    // ...\n}\n</code></pre>\n\n<p>Instead, we can write the following code which should do the same:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MyClass(val delegate : MyInterface) : MyInterface by delegate\n</code></pre>\n\n<p>Now, I'd like <code>delegate</code> to be a mutable variable, i.e. my code looks like this:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>var delegate : MyInterface = MyImplementation()\nobject MyObject : MyInterface by delegate\n</code></pre>\n\n<p>So if I'd delegated every abstract method to <code>delegate</code> by myself like in the first example, changing the value of <code>delegate</code> does change the behaviour of the methods. However, the above code compiles to this Java code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public final class MyObject implements MyInterface {\n    public static final MyObject INSTANCE;\n    // $FF: synthetic field\n    private final MyInterface $$delegate_0 = MyObjectKt.access$getDelegate$p();\n\n    @NotNull\n    public String myAbstractFun1() {\n        return this.$$delegate_0.myAbstractFun1();\n    }\n\n    @NotNull\n    public String myAbstractFun2() {\n        return this.$$delegate_0.myAbstractFun2();\n    }\n}\n</code></pre>\n\n<p>So obviously, instead of just using the <code>delegate</code> field, the Kotlin compiler decides to copy it when creating <code>MyObject</code> to a final field <code>$$delegate_0</code>, which is not modified when I change the value of <code>delegate</code></p>\n\n<p>Is there a better solution for doing this instead of delegating every method manually?</p>\n"}, {"tags": ["android", "kotlin", "viewpropertyanimator"], "owner": {"reputation": 166, "user_id": 8513267, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aCqIsULG6dw/AAAAAAAAAAI/AAAAAAAAAA8/CqkOXCyCaUQ/photo.jpg?sz=128", "display_name": "panda_eye", "link": "https://stackoverflow.com/users/8513267/panda-eye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1514834458, "creation_date": 1514834458, "question_id": 48052545, "link": "https://stackoverflow.com/questions/48052545/viewpropertyanimators-alpha-animation-does-not-work", "title": "ViewPropertyAnimator&#39;s alpha animation does not work", "body": "<p>I use ViewPropertyAnimator for creating alpha animations. Both withStartAction() and withEndAction() work great, alpha values changed, but they changed in no time, looks like there is no animation, just changing values. Where is a mistake?</p>\n\n<pre><code>private fun run(millisecondsPerPixel: Long) { //millisPerPixel=30\n    pixelsToCenter = (_endHeight - _startHeight - emptyPlaceOffset) / 2.toLong() // 15\n    val duration = millisecondsPerPixel * pixelsToCenter // 450\n    val animator = if (opening) mainLayout!!.animate() else secondaryLayout!!.animate()\n    animator.alpha(0.0F).setDuration(duration)\n            .withStartAction {\n                changing = true\n                val resize = if (opening) ResizeAnimation(this@CustomToolbar, height, _endHeight) else\n                    ResizeAnimation(this@CustomToolbar, height, _startHeight)\n                resize.duration = millisecondsPerPixel * (_endHeight - _startHeight)\n                startAnimation(resize) // this one works like a charm\n            }\n            .withEndAction {\n                val backAnimator = if (opening) {\n                    mainLayout!!.visibility = View.GONE\n                    secondaryLayout!!.animate()\n                } else {\n                    secondaryLayout!!.visibility = View.GONE\n                    mainLayout!!.animate()\n                }\n                backAnimator.alpha(1.0F).setDuration(duration)\n                        .setStartDelay(millisecondsPerPixel * emptyPlaceOffset)\n                        .withStartAction {\n                            if (opening) secondaryLayout!!.visibility = View.VISIBLE else mainLayout!!.visibility = View.VISIBLE\n                        }\n                        .withEndAction { changing = false }\n            }\n}\n</code></pre>\n"}, {"tags": ["intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 9070242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ca82e0b44926c2e76eed8b838c0aa19?s=128&d=identicon&r=PG&f=1", "display_name": "fin444", "link": "https://stackoverflow.com/users/9070242/fin444"}, "edited": false, "score": 0, "creation_date": 1514835236, "post_id": 48052492, "comment_id": 83077402, "body": "I&#39;ve been running from Intellij to produce my project, but I&#39;m trying to export it to run elsewhere. Where should I cd to before running this command?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 428, "user_id": 9070242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ca82e0b44926c2e76eed8b838c0aa19?s=128&d=identicon&r=PG&f=1", "display_name": "fin444", "link": "https://stackoverflow.com/users/9070242/fin444"}, "edited": false, "score": 0, "creation_date": 1514875911, "post_id": 48052492, "comment_id": 83085554, "body": "Use absolute paths instead of those qvasy jar names, so it wouldn&#39;t matter"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 428, "user_id": 9070242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ca82e0b44926c2e76eed8b838c0aa19?s=128&d=identicon&r=PG&f=1", "display_name": "fin444", "link": "https://stackoverflow.com/users/9070242/fin444"}, "edited": false, "score": 2, "creation_date": 1514876042, "post_id": 48052492, "comment_id": 83085588, "body": "A hint: when running a program in InteliJ, it prints the execution command at the top of the terminal. Copy-paste it, and it must work from the root of your project"}, {"owner": {"reputation": 428, "user_id": 9070242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ca82e0b44926c2e76eed8b838c0aa19?s=128&d=identicon&r=PG&f=1", "display_name": "fin444", "link": "https://stackoverflow.com/users/9070242/fin444"}, "edited": false, "score": 1, "creation_date": 1515029874, "post_id": 48052492, "comment_id": 83149974, "body": "I don&#39;t know what you mean by &quot;qvasy jar names&quot;, but I tried finding the execution command and got this: <a href=\"https://gist.github.com/fin444/ecd4302a17114407d49073c642d360e2\" rel=\"nofollow noreferrer\">gist.github.com/fin444/ecd4302a17114407d49073c642d360e2</a>. How do I know what is essential, and what is part of Intellij?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 428, "user_id": 9070242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ca82e0b44926c2e76eed8b838c0aa19?s=128&d=identicon&r=PG&f=1", "display_name": "fin444", "link": "https://stackoverflow.com/users/9070242/fin444"}, "edited": false, "score": 0, "creation_date": 1515055162, "post_id": 48052492, "comment_id": 83157222, "body": "Use the same class path as in that command and it should work"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 4, "last_activity_date": 1514833962, "creation_date": 1514833962, "answer_id": 48052492, "question_id": 48052427, "link": "https://stackoverflow.com/questions/48052427/java-lang-noclassdeffounderror-kotlin-jvm-internal-intrinsics/48052492#48052492", "title": "java.lang.NoClassDefFoundError: kotlin/jvm/internal/Intrinsics", "body": "<p>You need to add the kotlin stdlib to the classpath to to run it from the command line. </p>\n\n<p>Something like:</p>\n\n<pre><code>java --class-path tornadofx-1.7.11.jar stdlib.jar -jar myprogram.jar\n</code></pre>\n\n<p>Running it from InteliJ is simpler since it configures it on its own.</p>\n"}], "owner": {"reputation": 428, "user_id": 9070242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ca82e0b44926c2e76eed8b838c0aa19?s=128&d=identicon&r=PG&f=1", "display_name": "fin444", "link": "https://stackoverflow.com/users/9070242/fin444"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4952, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1514833962, "creation_date": 1514833253, "question_id": 48052427, "link": "https://stackoverflow.com/questions/48052427/java-lang-noclassdeffounderror-kotlin-jvm-internal-intrinsics", "title": "java.lang.NoClassDefFoundError: kotlin/jvm/internal/Intrinsics", "body": "<p>So I'm just exporting a basic program with one library <code>tornadofx-1.7.11.jar</code> plus the standard Kotlin library. I've exported it fully using <a href=\"http://karthicraghupathi.com/2016/07/10/creating-an-executable-jar-in-intellij-idea/\" rel=\"nofollow noreferrer\">this guide</a>. I tried running it in the command line, but received this error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: kotlin/jvm/internal/Intrinsics\nat main.app.AppKt.main(app.kt)\nCaused by: java.lang.ClassNotFoundException: kotlin.jvm.internal.Intrinsics\nat java.net.URLClassLoader.findClass(Unknown Source)\nat java.lang.ClassLoader.loadClass(Unknown Source)\nat sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\nat java.lang.ClassLoader.loadClass(Unknown Source)\n... 1 more\n</code></pre>\n\n<p>I've looked up my issue <a href=\"https://samebug.io/exceptions/574653/java.lang.NoClassDefFoundError/kotlinjvminternalintrinsics?soft=false\" rel=\"nofollow noreferrer\">here</a>, and it said that my error has to do with a broken class path. I have no idea what I'm doing with regards to class paths, but the guide mentioned earlier stated to just put the names of all jars. If you really want it, here's my class path: <code>tornadofx-1.7.11.jar</code>. Just that one line. I'm not sure if I should add more, but I did it like the example showed.  </p>\n\n<p>If needed, I'm running on Intellij IDEA version <code>2017.2.6.IC-172.4574.11</code>.</p>\n"}, {"tags": ["java", "android", "compilation", "kotlin", "dex"], "answers": [{"comments": [{"owner": {"reputation": 7061, "user_id": 4727432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca061f55238f6dba1e1815db6a48b1f6?s=128&d=identicon&r=PG", "display_name": "hluhovskyi", "link": "https://stackoverflow.com/users/4727432/hluhovskyi"}, "edited": false, "score": 0, "creation_date": 1514829702, "post_id": 48051751, "comment_id": 83075885, "body": "Great! Now it becomes clear for me. And also it greatly explains why lint warn about <code>inline</code> without lambda."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 4, "last_activity_date": 1514827688, "creation_date": 1514827688, "answer_id": 48051751, "question_id": 48051446, "link": "https://stackoverflow.com/questions/48051446/kotlin-inline-functions-and-android-methods-count/48051751#48051751", "title": "Kotlin inline functions and Android methods count", "body": "<p>Kotlin generates real methods even when they are marked <code>inline</code> for calling from java, so they are still reflected in the dex count.</p>\n\n<p>Where inlining helps is overhead-free lambdas. Normally every lambda is represented with at least a method (sometimes even a class) in each place of invocation. But inlined lambdas skip this overhead, thus not affecting the dex count.</p>\n\n<blockquote>\n  <p>Standard library is very small and many of its functions are inline-only</p>\n</blockquote>\n\n<p>The standard library uses a special trick (<code>@inlineOnly</code> annotation) for some methods to skip generating a method for an inline function (as I described above). But this annotation is internal in the <code>kotlin</code> package and cannot be used in normal code. </p>\n"}], "owner": {"reputation": 7061, "user_id": 4727432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca061f55238f6dba1e1815db6a48b1f6?s=128&d=identicon&r=PG", "display_name": "hluhovskyi", "link": "https://stackoverflow.com/users/4727432/hluhovskyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 48051751, "answer_count": 1, "score": 5, "last_activity_date": 1514827688, "creation_date": 1514825153, "question_id": 48051446, "link": "https://stackoverflow.com/questions/48051446/kotlin-inline-functions-and-android-methods-count", "title": "Kotlin inline functions and Android methods count", "body": "<p>I want to understand how inline functions impact <code>classes.dex</code> and count of methods at all. From my understanding inline function should have zero overhead over methods count. However APK analyzer gives me opposite result.\nI wrote small test to check this.</p>\n\n<p><code>InlineFunction.kt</code> file:</p>\n\n<pre><code>inline fun inlined(block: () -&gt; Unit) {\n    block()\n}\n</code></pre>\n\n<p>And <code>MainActivity.kt</code> file:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        inlined {\n            println(\"Inlined\")\n        }\n    }\n}\n</code></pre>\n\n<p>From perspective of generated code it looks pretty clear:</p>\n\n<pre><code>public final class MainActivity extends AppCompatActivity {\n    private HashMap _$_findViewCache;\n\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n       super.onCreate(savedInstanceState);\n       String var2 = \"Inlined\";\n       System.out.println(var2);\n   }\n</code></pre>\n\n<p>As we can see there is no call of additional method. But if I open apk with analyzer I can see that this method impacts defined and references methpds count.</p>\n\n<p><a href=\"https://i.stack.imgur.com/JQuBZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JQuBZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>On the other hand Kotlin stdlib impacts only referenced methods count and does not defined ones.</p>\n\n<p><a href=\"https://i.stack.imgur.com/SQhyF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SQhyF.png\" alt=\"enter image description here\"></a></p>\n\n<p>So what am I missing? I can't find how any good source about inlining methods in Android and how it is impact performance as well as I can't find any documentation how dex methods count is calculated. </p>\n\n<p>I found <a href=\"https://github.com/JakeWharton/dex-method-list\" rel=\"noreferrer\">Jake Wharton utility</a> but if it works correct than all methods from Kotlin library impacts methods count. And it also means that something wrong in this answer <a href=\"https://stackoverflow.com/a/39635849/4727432\">https://stackoverflow.com/a/39635849/4727432</a></p>\n\n<blockquote>\n  <p>...Standard library is very small and many of its functions are inline-only which mean they don't exist past compilation and just become inline code. Proguard can take care of a lot as well...</p>\n</blockquote>\n\n<p>So how does inline functions impact methods count? Any articles or posts which explain dex method counting process are welcome. </p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 6118, "user_id": 1039761, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/8l9ld.jpg?s=128&g=1", "display_name": "Udi Oshi", "link": "https://stackoverflow.com/users/1039761/udi-oshi"}, "edited": false, "score": 0, "creation_date": 1514823570, "post_id": 48051223, "comment_id": 83074252, "body": "thanks for the quick answer but I already tried and it gives me an  error while calling holder.onBind(dataList[position], presenter, position) in the onBindViewHolder. I&#39;m getting Out-projected type &#39;BaseSettingsViewHolder&lt;*&gt;&#39; prohibits the use of &#39;public abstract fun onBind(data: T, presenter: ISettingsPresenter, position: Int): Unit defined in BaseSettingsViewHolder&#39;"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 6118, "user_id": 1039761, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/8l9ld.jpg?s=128&g=1", "display_name": "Udi Oshi", "link": "https://stackoverflow.com/users/1039761/udi-oshi"}, "edited": false, "score": 0, "creation_date": 1514825905, "post_id": 48051223, "comment_id": 83074843, "body": "Can you provide some concrete type, then? <code>RecyclerView.Adapter&lt;BaseSettingsViewHolder&lt;SomeType&gt;&gt;</code>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 3, "last_activity_date": 1514823236, "creation_date": 1514823236, "answer_id": 48051223, "question_id": 48051190, "link": "https://stackoverflow.com/questions/48051190/kotlin-one-type-argument-expected-for-class-for-abstract-generic-view-holder/48051223#48051223", "title": "Kotlin One type argument expected for class for abstract generic view holder", "body": "<p>You should specify the type argument for the <code>BaseSettingsViewHolder</code> in the <code>RecyclerView.Adapter&lt;BaseSettingsViewHolder&gt;</code> type.</p>\n\n<p>Kotlin, unlike Java, does not have the raw types, so you cannot simply omit the type arguments.</p>\n\n<p>The closest concept to raw types is <a href=\"https://kotlinlang.org/docs/reference/generics.html#star-projections\" rel=\"nofollow noreferrer\">star-projected types</a>: use <code>BaseSettingsViewHolder&lt;*&gt;</code> in <code>RecyclerView.Adapter&lt;BaseSettingsViewHolder&lt;*&gt;&gt;</code>, this will mean that the type argument for <code>BaseSettingsViewHolder</code> is unknown.</p>\n"}, {"comments": [{"owner": {"reputation": 1223, "user_id": 4897420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10153375565148586/picture?type=large", "display_name": "Kaloglu", "link": "https://stackoverflow.com/users/4897420/kaloglu"}, "edited": false, "score": 0, "creation_date": 1515429058, "post_id": 48085246, "comment_id": 83287530, "body": "You must have TitleData extend from RecyclerView Adapter ViewHolder."}], "tags": [], "owner": {"reputation": 1223, "user_id": 4897420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10153375565148586/picture?type=large", "display_name": "Kaloglu", "link": "https://stackoverflow.com/users/4897420/kaloglu"}, "is_accepted": true, "score": 43, "last_activity_date": 1585325252, "last_edit_date": 1585325252, "creation_date": 1515014240, "answer_id": 48085246, "question_id": 48051190, "link": "https://stackoverflow.com/questions/48051190/kotlin-one-type-argument-expected-for-class-for-abstract-generic-view-holder/48085246#48085246", "title": "Kotlin One type argument expected for class for abstract generic view holder", "body": "<p>1- If you use always <strong>SettingTitleViewHolder</strong>;</p>\n\n<pre><code>RecyclerView.Adapter&lt;SettingTitleViewHolder&gt;\n</code></pre>\n\n<p>2- If you want to use any class which extended <strong>BaseSettingViewHolder</strong>;</p>\n\n<pre><code>RecyclerView.Adapter&lt;BaseSettingsViewHolder&lt;*&gt;&gt;\n</code></pre>\n\n<p>3- Use <strong>Any Object Type</strong></p>\n\n<pre><code>RecyclerView.Adapter&lt;BaseSettingsViewHolder&lt;Any&gt;&gt;\n</code></pre>\n\n<p>4- Use extended type parameter for adapter class</p>\n\n<pre><code>class SettingsMenuAdapter&lt;T&gt;:RecyclerView.Adapter&lt;T&gt; where : BaseSettingViewHolder&lt;*&gt;\n</code></pre>\n\n<p>5- Define out for abstract class type parameter.</p>\n\n<pre><code>abstract class BaseSettingsViewHolder&lt;out T&gt; RecyclerView.Adapter&lt;BaseSettingsViewHolder&lt;Any&gt;&gt;\n</code></pre>\n\n<p>7- Read that article =>\n<a href=\"https://kotlinlang.org/docs/reference/generics.html\" rel=\"noreferrer\">\"Generics in Kotlin\"</a> ;)</p>\n"}], "owner": {"reputation": 6118, "user_id": 1039761, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/8l9ld.jpg?s=128&g=1", "display_name": "Udi Oshi", "link": "https://stackoverflow.com/users/1039761/udi-oshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24406, "favorite_count": 4, "accepted_answer_id": 48085246, "answer_count": 2, "score": 26, "last_activity_date": 1585325252, "creation_date": 1514822975, "last_edit_date": 1535387282, "question_id": 48051190, "link": "https://stackoverflow.com/questions/48051190/kotlin-one-type-argument-expected-for-class-for-abstract-generic-view-holder", "title": "Kotlin One type argument expected for class for abstract generic view holder", "body": "<p>I'm trying to create a  RecyclerView.Adapter with the following:</p>\n\n<hr>\n\n<h2>View holders - Provided the abstract parent and one son</h2>\n\n<pre><code>abstract class BaseSettingsViewHolder&lt;T&gt;(var viewDataBinding : \nViewDataBinding) : RecyclerView.ViewHolder(viewDataBinding.root) {\n\n   abstract fun onBind(data: T, presenter: ISettingsPresenter, position: Int)\n}\n</code></pre>\n\n<hr>\n\n<pre><code>class SettingsTitleViewHolder(viewDataBinding: ViewDataBinding) : BaseSettingsViewHolder&lt;TitleData&gt;(viewDataBinding) {\n\n    override fun onBind(data: TitleData, presenter: ISettingsPresenter, position: Int) {\n        viewDataBinding.setVariable(BR.titleData, data)\n        viewDataBinding.setVariable(BR.itemPosition, position)\n        viewDataBinding.setVariable(BR.settingsPresenter, presenter)\n        viewDataBinding.executePendingBindings()\n    }\n\n}\n</code></pre>\n\n<p>And when trying to declare the adapter:</p>\n\n<pre><code>class SettingsAdapter(var context: Context, var presenter: ISettingsPresenter) : RecyclerView.Adapter&lt;BaseSettingsViewHolder&gt;() {\n</code></pre>\n\n<p>I'm getting \"One type argument expected for class\" compile error on the:</p>\n\n<pre><code>RecyclerView.Adapter&lt;BaseSettingsViewHolder&gt;\n</code></pre>\n\n<p>Appreciate the help!</p>\n"}, {"tags": ["java", "kotlin", "gson"], "comments": [{"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 0, "creation_date": 1514821845, "post_id": 48050862, "comment_id": 83073754, "body": "It&#39;s not actually using the type you pass it, this example is just getting lucky with Gson&#39;s defaults. Try it with: <code>val deser = Gson().fromJson&lt;LinkedList&lt;Serializable&gt;&gt;(ser);</code> for instance"}, {"owner": {"reputation": 402, "user_id": 8659898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5831f37460dfdcfbe6fa0a37d81cdfed?s=128&d=identicon&r=PG&f=1", "display_name": "CrazyApple", "link": "https://stackoverflow.com/users/8659898/crazyapple"}, "edited": false, "score": 0, "creation_date": 1514822472, "post_id": 48050862, "comment_id": 83073932, "body": "Isn&#39;t it the same question? <a href=\"https://stackoverflow.com/questions/48050487/how-to-register-an-instancecreator-with-gson-in-kotlin\" title=\"how to register an instancecreator with gson in kotlin\">stackoverflow.com/questions/48050487/&hellip;</a>"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1514822516, "post_id": 48050862, "comment_id": 83073943, "body": "Not at all. But this questions made me notice the problem"}], "answers": [{"tags": [], "owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "is_accepted": true, "score": 5, "last_activity_date": 1514823877, "creation_date": 1514823877, "answer_id": 48051296, "question_id": 48050862, "link": "https://stackoverflow.com/questions/48050862/kotlin-reified-type-parameter-makes-gson-fail/48051296#48051296", "title": "Kotlin: Reified type parameter makes Gson fail", "body": "<p>The version that uses <code>reified T</code> fails because it's trying to de-serialize \"1337\" as a <code>Serializable</code>, which is an interface, so it can not be instantiated, and by default there is no type adapter which can de-serialize into a <code>Serializable</code> (like there is for <code>List&lt;...&gt;</code>). The easiest way to fix this is to pass <code>List&lt;String&gt;</code> as a type argument.</p>\n\n<p>In the non-reified version there is no actual type information being passed to your extension function. You can verify this by printing the type you get from the token:</p>\n\n<pre><code>fun &lt;T&gt; Gson.fromJson(json: String): T {\n    val tt = object : TypeToken&lt;T&gt;() {}.type;\n    println(tt);\n    return fromJson(json, tt);\n}\n</code></pre>\n\n<p>In the none reified version that will just print <code>T</code> (i.e. no actual type information is available), but in the <code>reified</code> version it will print the actual type (+ any Kotlin declaration site variance modifiers, so <code>List&lt;String&gt;</code> becomes <code>List&lt;? extends String&gt;</code>). (I don't know why Gson silently ignores this error of missing type information).</p>\n\n<p>The reason the non <code>reified</code> version works is a coincidence. Since Gson's default type for de-serializing <code>[\"1337\"]</code> is <code>ArrayList&lt;String&gt;</code> and that is also what you get. It just happens to be assignable to a <code>List</code>, and since generics are erased there is no class cast exception for the mismatch between <code>String</code> and <code>Serializable</code> as the type argument. It works out in the end any ways since <code>String</code> implements <code>Serializable</code>.</p>\n\n<p>If you slightly modify the example, where a different cast happens, for instance by specifying a different kind of <code>List</code>, you run into trouble:</p>\n\n<pre><code>val deser = fromJson&lt;LinkedList&lt;Serializable&gt;&gt;(ser)\n</code></pre>\n\n<p>Throws a <code>java.lang.ClassCastException: java.util.ArrayList cannot be cast to java.util.LinkedList</code></p>\n\n<p>You need <code>reified T</code> to be able to pass on the type information, but it also means that a failure will happen earlier, and does not go unnoticed due to type erasure, like in the non-<code>reified</code> version.</p>\n"}, {"tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": false, "score": 1, "last_activity_date": 1514826692, "creation_date": 1514826692, "answer_id": 48051641, "question_id": 48050862, "link": "https://stackoverflow.com/questions/48050862/kotlin-reified-type-parameter-makes-gson-fail/48051641#48051641", "title": "Kotlin: Reified type parameter makes Gson fail", "body": "<p>As what @Jorn Vernee mentioned, <code>reified</code> is needed for serializing/deserializing the json. If <code>reified</code> is not added, it will be treated as <code>List&lt;Object&gt;</code> and the final deserialized object will have type <code>List&lt;LinkedTreeMap&gt;</code> and you will get <a href=\"https://stackoverflow.com/questions/32444863/google-gson-linkedtreemap-class-cast-to-myclass/32494079\">error</a> when you try to use those object as your interface.</p>\n\n<p>To serialize/deserialize interface, you need to register a custom adapter to add the type information of the implemented class. Here is a adapter class where I reference from this <a href=\"http://technology.finra.org/code/serialize-deserialize-interfaces-in-java.html\" rel=\"nofollow noreferrer\">site</a> and make some changes on it.</p>\n\n<pre><code>class InterfaceAdapter&lt;T : Serializable&gt; : JsonSerializer&lt;T&gt;, JsonDeserializer&lt;T&gt; {\n\n    companion object {\n        private val CLASSNAME = \"CLASSNAME\"\n        private val DATA = \"DATA\"\n    }\n\n    @Throws(JsonParseException::class)\n    override fun deserialize(jsonElement: JsonElement, type: Type, jsonDeserializationContext: JsonDeserializationContext): T {\n        val jsonObject = jsonElement.asJsonObject\n        val prim = jsonObject.get(CLASSNAME) as JsonPrimitive\n        val className = prim.asString\n        val klass = getObjectClass(className)\n        return jsonDeserializationContext.deserialize(jsonObject.get(DATA), klass)\n    }\n\n    override fun serialize(jsonElement: T, type: Type, jsonSerializationContext: JsonSerializationContext): JsonElement {\n        val jsonObject = JsonObject()\n        jsonObject.addProperty(CLASSNAME, jsonElement.javaClass.name)\n        jsonObject.add(DATA, jsonSerializationContext.serialize(jsonElement))\n        return jsonObject\n    }\n\n    private fun getObjectClass(className: String): Class&lt;*&gt; {\n        try {\n            return Class.forName(className)\n        } catch (e: ClassNotFoundException) {\n            throw JsonParseException(e.message)\n        }\n    }\n}\n</code></pre>\n\n<p>Register the adapter to the gson object and also provide the type information.</p>\n\n<pre><code>inline fun &lt;reified T&gt; Any.toJson(): String {\n    val builder = GsonBuilder()\n    builder.registerTypeAdapter(Serializable::class.java, InterfaceAdapter&lt;Serializable&gt;())\n    val gson = builder.create()\n    return gson.toJson(this, object : TypeToken&lt;T&gt;() {}.type)\n}\n\ninline fun &lt;reified T&gt; fromJson(json: String): T {\n    val builder = GsonBuilder()\n    builder.registerTypeAdapter(Serializable::class.java, InterfaceAdapter&lt;Serializable&gt;())\n    val gson = builder.create()\n    return gson.fromJson&lt;T&gt;(json, object : TypeToken&lt;T&gt;() {}.type)\n}\n</code></pre>\n\n<p>Example code:</p>\n\n<pre><code>data class User(val name: String) : Serializable\n\nval data = listOf(User(\"Sam\"))\nval ser = data.toJson&lt;List&lt;Serializable&gt;&gt;()\nval deser = fromJson&lt;List&lt;Serializable&gt;&gt;(ser)\n\nprintln(ser)\nprintln(deser.get(0)::class)\nprintln(deser.get(0))\n\n/* Output\n    [{\"CLASSNAME\":\"User\",\"DATA\":{\"name\":\"Sam\"}}]\n    class User\n    User(name=Sam)\n*/\n</code></pre>\n"}], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1556, "favorite_count": 0, "accepted_answer_id": 48051296, "answer_count": 2, "score": 2, "last_activity_date": 1514826692, "creation_date": 1514820444, "last_edit_date": 1514821532, "question_id": 48050862, "link": "https://stackoverflow.com/questions/48050862/kotlin-reified-type-parameter-makes-gson-fail", "title": "Kotlin: Reified type parameter makes Gson fail", "body": "<p>I've encountered a weird behavior using Gson deserializing within a function with <code>reified</code> type. It only happens when <code>interfaces</code> are involved in the type parameter.</p>\n\n<p>Take the following code:</p>\n\n<pre><code>val toBeSerialized = listOf(\"1337\")\nwith(Gson()) {\n    val ser = toJson(toBeSerialized)\n    val deser = fromJson&lt;List&lt;Serializable&gt;&gt;(ser)\n}\n</code></pre>\n\n<p>Line number 4 makes use of a custom extension function <code>Gson.fromJson(json: String): T</code>. </p>\n\n<p>It <strong>fails</strong> if <code>T</code> is defined as reified:</p>\n\n<pre><code>inline fun &lt;reified T&gt; Gson.fromJson(json: String): T = fromJson&lt;T&gt;(json, object : TypeToken&lt;T&gt;() {}.type)\n</code></pre>\n\n<p>And it <strong>works</strong> if it is defined as a normal type parameter:</p>\n\n<pre><code>fun &lt;T&gt; Gson.fromJson(json: String): T = fromJson&lt;T&gt;(json, object : TypeToken&lt;T&gt;() {}.type)\n</code></pre>\n\n<p>(Note that making <code>T</code> reified makes no sense here, just want to understand its impact in the special use case)</p>\n\n<p>The exception when using <code>reified</code> looks as follows:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.RuntimeException: Unable to invoke no-args constructor for ? extends java.io.Serializable. Registering an InstanceCreator with Gson for this type may fix this problem.\n    at com.google.gson.internal.ConstructorConstructor$14.construct(ConstructorConstructor.java:226)\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:210)\n    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:41)\n    at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:82)\n    at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:61)\n    at com.google.gson.Gson.fromJson(Gson.java:888)\n    at com.google.gson.Gson.fromJson(Gson.java:853)\n    at com.google.gson.Gson.fromJson(Gson.java:802)\n    at SoTestsKt.main(SoTests.kt:25)\nCaused by: java.lang.UnsupportedOperationException: Interface can't be instantiated! Interface name: java.io.Serializable\n    at com.google.gson.internal.UnsafeAllocator.assertInstantiable(UnsafeAllocator.java:117)\n    at com.google.gson.internal.UnsafeAllocator$1.newInstance(UnsafeAllocator.java:49)\n    at com.google.gson.internal.ConstructorConstructor$14.construct(ConstructorConstructor.java:223)\n    ... 8 more\n</code></pre>\n"}, {"tags": ["java", "json", "kotlin", "gson"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1514818144, "post_id": 48050487, "comment_id": 83072958, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18567719/gson-deserializing-nested-objects-with-instancecreator\">Gson deserializing nested objects with InstanceCreator</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1514863731, "post_id": 48051495, "comment_id": 83082840, "body": "Thanks! your code works well. And more, would you please see the Added section in the question?   After I use <code>val myGson = GsonBuilder().setPrettyPrinting().registerTypeAdapterFactory&zwnj;&#8203;(adapter).create()</code>, I can get the correct result when I use <code>open class DeviceDef</code> , why?"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 6, "last_activity_date": 1543414811, "last_edit_date": 1543414811, "creation_date": 1514825509, "answer_id": 48051495, "question_id": 48050487, "link": "https://stackoverflow.com/questions/48050487/how-to-register-an-instancecreator-with-gson-in-kotlin/48051495#48051495", "title": "How to register an InstanceCreator with Gson in Kotlin?", "body": "<p>Gson is having a hard time deserialising polymorphic objects as in your <code>MutableList&lt;DeviceDef&gt;</code>. Here's what you need to do:</p>\n\n<ol>\n<li><p>Add the <a href=\"https://github.com/google/gson/blob/master/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java\" rel=\"nofollow noreferrer\">RuntimeTypeAdapterFactory.java</a> to your project manually (does not seem to be <a href=\"https://github.com/google/gson/issues/1104\" rel=\"nofollow noreferrer\">part of gson library</a>). See also this <a href=\"https://stackoverflow.com/a/22081826/8073652\">answer</a>.</p></li>\n<li><p>Change your code to use the factory</p>\n\n<p>Create <code>Gson</code> instance: </p>\n\n<pre><code>val adapter = RuntimeTypeAdapterFactory\n        .of(DeviceDef::class.java)\n        .registerSubtype(BluetoothDef::class.java)\n        .registerSubtype(WiFiDef::class.java)\n\nval gson = GsonBuilder().setPrettyPrinting().registerTypeAdapterFactory(adapter).create()\n</code></pre></li>\n<li><p>register each of your subtypes in the factory and it will work as intended :)</p></li>\n</ol>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5331, "favorite_count": 2, "accepted_answer_id": 48051495, "answer_count": 1, "score": 6, "last_activity_date": 1543414811, "creation_date": 1514817052, "last_edit_date": 1514863635, "question_id": 48050487, "link": "https://stackoverflow.com/questions/48050487/how-to-register-an-instancecreator-with-gson-in-kotlin", "title": "How to register an InstanceCreator with Gson in Kotlin?", "body": "<p>I can use Code 1 to save <code>MutableList&lt;MDetail&gt;</code> to json string using Gson correctly,\nBut I get the error when I try to restore <code>MutableList&lt;MDetail&gt;</code> object from json string with Code 2.\nI have search some resources, it seems that I need to register an InstanceCreator.</p>\n\n<p>How can I write a register an <code>InstanceCreator</code> code with Kotlin? Thanks!</p>\n\n<p><strong>Error</strong></p>\n\n<pre><code>Caused by: java.lang.RuntimeException: Unable to invoke no-args constructor for interface model.DeviceDef. Registering an InstanceCreator with Gson for this type may fix this problem.\n</code></pre>\n\n<p><strong>Code 1</strong></p>\n\n<pre><code>private var listofMDetail: MutableList&lt;MDetail&gt;?=null\nmJson = Gson().toJson(listofMDetail) //Save\n</code></pre>\n\n<p><strong>Code 2</strong></p>\n\n<pre><code>var mJson: String by PreferenceTool(this, getString(R.string.SavedJsonName) , \"\")\nvar aMListDetail= Gson().fromJson&lt;MutableList&lt;MDetail&gt;&gt;(mJson)\n\ninline fun &lt;reified T&gt; Gson.fromJson(json: String) = this.fromJson&lt;T&gt;(json, object: TypeToken&lt;T&gt;() {}.type)\n</code></pre>\n\n<p><strong>My Class</strong></p>\n\n<pre><code>interface DeviceDef\n\ndata class BluetoothDef(val status:Boolean=false):  DeviceDef\ndata class WiFiDef(val name:String, val status:Boolean=false) : DeviceDef\n\ndata class MDetail(val _id: Long, val deviceList: MutableList&lt;DeviceDef&gt;)\n{\n    inline fun &lt;reified T&gt; getDevice(): T {\n        return deviceList.filterIsInstance(T::class.java).first()\n    }\n}\n</code></pre>\n\n<p><strong>Added</strong></p>\n\n<p>After I use <code>val myGson = GsonBuilder().setPrettyPrinting().registerTypeAdapterFactory(adapter).create()</code>, I can get the correct result when I use <code>open class DeviceDef</code> , why?</p>\n\n<pre><code>open class DeviceDef\n\ndata class BluetoothDef(val status:Boolean=false):  DeviceDef()\ndata class WiFiDef(val name:String, val status:Boolean=false) : DeviceDef()\n\nval adapter = RuntimeTypeAdapterFactory\n        .of(DeviceDef::class.java)\n        .registerSubtype(BluetoothDef::class.java)\n        .registerSubtype(WiFiDef::class.java)\n\n\ndata class MDetail(val _id: Long, val deviceList: MutableList&lt;DeviceDef&gt;)\n{\n    inline fun &lt;reified T&gt; getDevice(): T {\n        return deviceList.filterIsInstance(T::class.java).first()\n    }\n}\n\nval myGson = GsonBuilder().setPrettyPrinting().registerTypeAdapterFactory(adapter).create()\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 16009, "user_id": 1407656, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aFPUN.png?s=128&g=1", "display_name": "toniedzwiedz", "link": "https://stackoverflow.com/users/1407656/toniedzwiedz"}, "edited": false, "score": 0, "creation_date": 1514816289, "post_id": 48050380, "comment_id": 83072514, "body": "How does it crash? Do you see a stack trace?"}, {"owner": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1514816466, "post_id": 48050380, "comment_id": 83072555, "body": "Provide your logcat."}, {"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514816499, "post_id": 48050380, "comment_id": 83072559, "body": "maybe, i have update question with error log"}, {"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514816575, "post_id": 48050380, "comment_id": 83072579, "body": "is that ok? Or something else"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1514817914, "post_id": 48050380, "comment_id": 83072902, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/39849984/what-is-a-numberformatexception-and-how-can-i-fix-it\">What is a NumberFormatException and how can I fix it?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514817218, "post_id": 48050490, "comment_id": 83072733, "body": "still crashes is there any way ?"}, {"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514817391, "post_id": 48050490, "comment_id": 83072766, "body": "so How to fix?  What should i do now?"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514817499, "post_id": 48050490, "comment_id": 83072795, "body": "@ApurvAjayKumarA2K I&#39;ve edited the condition for checking. It should be comparing the content of the <code>EditText</code> instead of the <code>EditText</code> itself."}, {"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514817588, "post_id": 48050490, "comment_id": 83072815, "body": "It crashes after updating code i need a better solution"}, {"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514817790, "post_id": 48050490, "comment_id": 83072871, "body": "Thank you for your help i have fixed it"}, {"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514818579, "post_id": 48050490, "comment_id": 83073047, "body": "hey is there any When i can do with multiple string to check"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514819256, "post_id": 48050490, "comment_id": 83073204, "body": "What do you mean by checking multiple string?"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514820509, "post_id": 48050490, "comment_id": 83073446, "body": "@ApurvAjayKumarA2K I&#39;ve update the answer for an alternative way to do it."}], "tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": true, "score": 1, "last_activity_date": 1514820485, "last_edit_date": 1514820485, "creation_date": 1514817060, "answer_id": 48050490, "question_id": 48050380, "link": "https://stackoverflow.com/questions/48050380/how-to-check-that-string-is-not-equal-to-a-string-then-it-will-work-otherwise-no/48050490#48050490", "title": "How to check that string is not equal to a string then it will work otherwise no? in kotlin", "body": "<p>The problem is in this part of your code:</p>\n\n<pre><code>!((distance.equals(\".\")) &amp;&amp; (initalVelocity.equals(\".\")) &amp;&amp; (time.equals(\".\")))\n</code></pre>\n\n<p>It will be true if any of the string doesn't equal to <code>\".\"</code>. Also, you are comparing the <code>EditText</code> instance instead of the content of it. The condition of your if case should be:</p>\n\n<pre><code>if(distance.text.toString().length &gt; 0 &amp;&amp; \n        initalVelocity.text.toString().length &gt; 0 &amp;&amp;\n        time.text.toString().length &gt; 0 &amp;&amp;\n        !(distance.text.toString().equals(\".\") || initalVelocity.text.toString().equals(\".\") || time.text.toString().equals(\".\")))\n</code></pre>\n\n<p>Here is an alternative way to approach the same result:</p>\n\n<pre><code>val s = try { distance.text.toString().toDouble() } catch(e: Exception) { null }\nval u = try { initalVelocity.text.toString().toDouble() } catch(e: Exception) { null }\nval t = try { time.text.toString().toDouble() } catch(e: Exception) { null }\nif (s != null &amp;&amp; u != null &amp;&amp; t != null) {\n    val a = (((2* s))-(2*(u*t)))/(t*t)\n    answer.setText(\"answer $a m/(s)^2\")\n} else {\n    toast(\"Are u nuts !!!!\")\n}\n</code></pre>\n\n<p>I use <code>try-catch</code> instead of <code>if-else</code> because calling <code>toDouble</code> of <code>\"\"</code> and <code>\".\"</code> will both throw <code>NumberFormatException</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 16009, "user_id": 1407656, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aFPUN.png?s=128&g=1", "display_name": "toniedzwiedz", "link": "https://stackoverflow.com/users/1407656/toniedzwiedz"}, "is_accepted": false, "score": 1, "last_activity_date": 1514817517, "creation_date": 1514817517, "answer_id": 48050547, "question_id": 48050380, "link": "https://stackoverflow.com/questions/48050380/how-to-check-that-string-is-not-equal-to-a-string-then-it-will-work-otherwise-no/48050547#48050547", "title": "How to check that string is not equal to a string then it will work otherwise no? in kotlin", "body": "<p>Your code is failing because you're trying to convert the string <code>\".\"</code> to a number. <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/to-double.html\" rel=\"nofollow noreferrer\"><code>toDouble</code></a> (from <code>kotlin-stdlib</code>) will throw a <code>NumberFormatException</code> if the string you're trying to convert is not a valid representation of a number.</p>\n\n<p>The documentation does not specify what the format is so let's dig a little deeper. Judging by <a href=\"https://github.com/JetBrains/kotlin/blob/1.2.0/libraries/stdlib/src/kotlin/text/StringNumberConversions.kt#L157\" rel=\"nofollow noreferrer\">the source code</a>, this uses <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Double.html#parseDouble-java.lang.String-\" rel=\"nofollow noreferrer\"><code>Double#parseDouble(String)</code></a> internally. This, in turn, uses <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Double.html#valueOf-java.lang.String-\" rel=\"nofollow noreferrer\"><code>Double#valueOf(String)</code></a>. If you're treating user input as Double values, have a look at the Javadoc and see what the method does and when. <code>\".\"</code> might not be the only input you allow that may cause the exception to be thrown. Depending on how complex the cases you need to support in your project are, you may also need to get acquainted with <a href=\"https://docs.oracle.com/javase/9/docs/api/java/text/NumberFormat.html\" rel=\"nofollow noreferrer\"><code>NumberFormat</code></a></p>\n\n<p>That said, you need to change your conditional logic to make sure <code>\".\"</code> (or other non-numeric strings) don't get converted to <code>Double</code> or, alternatively, catch the <code>NumberFormatException</code> after it's thrown and handle it in a user-friendly way.</p>\n"}], "owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1452, "favorite_count": 0, "accepted_answer_id": 48050490, "answer_count": 2, "score": 0, "last_activity_date": 1514820485, "creation_date": 1514816161, "last_edit_date": 1514816639, "question_id": 48050380, "link": "https://stackoverflow.com/questions/48050380/how-to-check-that-string-is-not-equal-to-a-string-then-it-will-work-otherwise-no", "title": "How to check that string is not equal to a string then it will work otherwise no? in kotlin", "body": "<p>I have a problem to share with you guys a I am trying to check if a string is not equal to nothing and it should be \".\" value a string if it pass it will do certain line code if not it simply print something but the problem is when i try to put value \".\" it crashes. So is there any way to fix this?</p>\n\n<p>Here is my kotlin main activity file :</p>\n\n<pre><code>calculate.setOnClickListener {\n\n        if(((distance.text.toString().length &gt;0) &amp;&amp;\n                (initalVelocity.text.toString().length&gt;0) &amp;&amp;\n                (time.text.toString().length &gt; 0)\n                ) &amp;&amp; (!((distance.equals(\".\")) &amp;&amp;\n                (initalVelocity.equals(\".\")) &amp;&amp;\n                (time.equals(\".\"))))) {\n            val s = distance.text.toString().toDouble()\n            val u = initalVelocity.text.toString().toDouble()\n            val t = time.text.toString().toDouble()\n            val a = (((2* s))-(2*(u*t)))/(t*t)\n            answer.setText(\"answer $a m/(s)^2\")\n        } else {\n            toast(\"Are u nuts !!!!\")\n        }\n</code></pre>\n\n<p>LOG:</p>\n\n<pre><code> FATAL EXCEPTION: main\nProcess: com.a3.apurv.physicscalculator, PID: 16094\njava.lang.NumberFormatException: For input string: \".\"\n    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:2043)\n    at sun.misc.FloatingDecimal.parseDouble(FloatingDecimal.java:110)\n    at java.lang.Double.parseDouble(Double.java:539)\n    at com.a3.apurv.physicscalculator.AccelerationIVActivity$onCreate$2.onClick(AccelerationIVActivity.kt:31)\n    at android.view.View.performClick(View.java:6294)\n    at android.view.View$PerformClick.run(View.java:24770)\n    at android.os.Handler.handleCallback(Handler.java:790)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loop(Looper.java:164)\n    at android.app.ActivityThread.main(ActivityThread.java:6494)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 4936, "user_id": 7408927, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3014b6a57c88143a2a0784fb9c2708e8?s=128&d=identicon&r=PG&f=1", "display_name": "Sevastyan Savanyuk", "link": "https://stackoverflow.com/users/7408927/sevastyan-savanyuk"}, "edited": false, "score": 1, "creation_date": 1514812190, "post_id": 48049615, "comment_id": 83071531, "body": "Thanks. Your first sentence allowed me to re-read and re-think how Android Data Binding deals with <code>Observable</code> objects. I was missing an important piece in understanding the framework. And regarding my question, no, it is not possible. One should always provide an <code>Observable</code> for things to work. Or, to wrap the <code>translation</code> into <code>ObservableField&lt;&gt;</code>, but this will be stupid, cause <code>traslation</code> is already the property of <code>Observable</code> and Data Binding can deal with the changes itself, if the getter is properly annotated."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 1, "last_activity_date": 1514810219, "last_edit_date": 1514810219, "creation_date": 1514809353, "answer_id": 48049615, "question_id": 48049536, "link": "https://stackoverflow.com/questions/48049536/referencing-properties-of-observable-class-in-android-data-binding-layout/48049615#48049615", "title": "Referencing properties of Observable class in Android Data Binding layout", "body": "<p>The <code>Localization</code> extends <code>BaseObservable</code> while <code>Function1</code> is not observable at all. So using the <code>Localization</code> gives you an interface for observing the changes to the properties.</p>\n\n<p>If you bind the <code>translation</code>, it's a simple field that gets set. If you want to update it, you'd have to call <code>setTranslation()</code> again.</p>\n"}], "owner": {"reputation": 4936, "user_id": 7408927, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3014b6a57c88143a2a0784fb9c2708e8?s=128&d=identicon&r=PG&f=1", "display_name": "Sevastyan Savanyuk", "link": "https://stackoverflow.com/users/7408927/sevastyan-savanyuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 48049615, "answer_count": 1, "score": 1, "last_activity_date": 1514810219, "creation_date": 1514808650, "question_id": 48049536, "link": "https://stackoverflow.com/questions/48049536/referencing-properties-of-observable-class-in-android-data-binding-layout", "title": "Referencing properties of Observable class in Android Data Binding layout", "body": "<p>What is the type of the <code>Observable</code> class property which getter is annotated as <code>@Bindable</code> in the Android Data Binding framework?</p>\n\n<p>For example, let the <code>Observable</code> class be defined as follows:</p>\n\n<pre><code>class Localization() : BaseObservable() {\n\n    var translation: (key: String) -&gt; String by Delegates.observable(defaultTranslation) { _, _, _ -&gt;\n        notifyPropertyChanged(BR.translation)\n    }\n        @Bindable get\n}\n</code></pre>\n\n<p>The layout XML will be then something like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;data&gt;\n\n        &lt;variable\n            name=\"translation\"\n            type=\"WHAT IS THE TYPE OF TRANSLATION?\" /&gt;\n\n    &lt;/data&gt;\n\n    &lt;FrameLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n\n        &lt;TextView\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@{translation.invoke(stringKey)}\" /&gt;\n\n    &lt;/FrameLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>The question is, what to put in the <code>type</code> attribute of <code>variable</code> \"translation\".</p>\n\n<p>I've tried:</p>\n\n<pre><code>type=\"kotlin.jvm.functions.Function1&amp;lt;String, String&amp;gt;\"\n</code></pre>\n\n<p>It compiles, but the <code>TextView</code> is not updated when translation property changes.</p>\n\n<p>I can achieve the desired behavior by introducing <code>localization</code> variable in the layout XML and then calling <code>localization.translation.invoke()</code> in the binding expression. I am just not comfortable with this and want to know if I can reference <code>translation</code> directly.</p>\n"}, {"tags": ["android", "gradle", "kotlin", "android-glide"], "comments": [{"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1514798182, "post_id": 48048455, "comment_id": 83068384, "body": "try this <code>compile &#39;com.github.bumptech.glide:glide:4.4.0&#39;</code>"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1514799046, "post_id": 48048455, "comment_id": 83068562, "body": "did you loading a GIF in imagview"}, {"owner": {"reputation": 688, "user_id": 5777510, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/YNZVK.jpg?s=128&g=1", "display_name": "Haileapp", "link": "https://stackoverflow.com/users/5777510/haileapp"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1514799166, "post_id": 48048455, "comment_id": 83068595, "body": "@Nilu,no I want to load a jpg image from the drawables folder"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1514799235, "post_id": 48048455, "comment_id": 83068610, "body": "is your <code>a12</code> is image or gif"}, {"owner": {"reputation": 688, "user_id": 5777510, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/YNZVK.jpg?s=128&g=1", "display_name": "Haileapp", "link": "https://stackoverflow.com/users/5777510/haileapp"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1514799418, "post_id": 48048455, "comment_id": 83068644, "body": "a12 is a jpg image"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1514799463, "post_id": 48048455, "comment_id": 83068653, "body": "check this <a href=\"https://stackoverflow.com/a/31929251/7666442\">stackoverflow.com/a/31929251/7666442</a>"}], "answers": [{"comments": [{"owner": {"reputation": 688, "user_id": 5777510, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/YNZVK.jpg?s=128&g=1", "display_name": "Haileapp", "link": "https://stackoverflow.com/users/5777510/haileapp"}, "edited": false, "score": 0, "creation_date": 1514798369, "post_id": 48048467, "comment_id": 83068425, "body": "It is still failed...error is thrown like this when i implement your code ...Error:Module &#39;com.github.bumptech.glide:glide:4.4.0&#39; depends on one or more Android Libraries but is a jar"}], "tags": [], "owner": {"reputation": 2495, "user_id": 5602752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed91e85aade6947e1106da60a14073f?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/5602752/munir"}, "is_accepted": false, "score": -1, "last_activity_date": 1549298099, "last_edit_date": 1549298099, "creation_date": 1514798273, "answer_id": 48048467, "question_id": 48048455, "link": "https://stackoverflow.com/questions/48048455/glide-library-java-lang-noclassdeffounderror/48048467#48048467", "title": "Glide Library java.lang.NoClassDefFoundError", "body": "<p>Try to change</p>\n\n<pre><code>com.github.bumptech.glide:glide:4.4.0@aar\n</code></pre>\n\n<p>to</p>\n\n<pre><code>com.github.bumptech.glide:glide:4.4.0\n</code></pre>\n\n<p>For more information, refer to this <a href=\"https://github.com/bumptech/glide\" rel=\"nofollow noreferrer\">https://github.com/bumptech/glide</a></p>\n"}, {"tags": [], "owner": {"reputation": 2060, "user_id": 5380981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SGQhd.jpg?s=128&g=1", "display_name": "PRATEEK BHARDWAJ", "link": "https://stackoverflow.com/users/5380981/prateek-bhardwaj"}, "is_accepted": false, "score": -1, "last_activity_date": 1514798913, "creation_date": 1514798913, "answer_id": 48048521, "question_id": 48048455, "link": "https://stackoverflow.com/questions/48048455/glide-library-java-lang-noclassdeffounderror/48048521#48048521", "title": "Glide Library java.lang.NoClassDefFoundError", "body": "<pre><code>Glide.with(this).load(getImage(R.drawable.a12)).into(myImageView);\n\npublic int getImage(String imageName) {\n\n    int drawableResourceId = this.getResources().getIdentifier(imageName, \"drawable\", this.getPackageName());\n\n    return drawableResourceId;\n}\n</code></pre>\n\n<p>It will work for you. </p>\n"}, {"tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 1, "last_activity_date": 1549298392, "creation_date": 1549298392, "answer_id": 54520568, "question_id": 48048455, "link": "https://stackoverflow.com/questions/48048455/glide-library-java-lang-noclassdeffounderror/54520568#54520568", "title": "Glide Library java.lang.NoClassDefFoundError", "body": "<p>try to set the dependency <a href=\"https://docs.gradle.org/current/userguide/managing_transitive_dependencies.html\" rel=\"nofollow noreferrer\">transitive</a>:</p>\n\n<pre><code>implementaion (\"com.bumptech.glide:glide:4.4.0@aar\") {\n    transitive = true\n}\n</code></pre>\n"}], "owner": {"reputation": 688, "user_id": 5777510, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/YNZVK.jpg?s=128&g=1", "display_name": "Haileapp", "link": "https://stackoverflow.com/users/5777510/haileapp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 937, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1549298392, "creation_date": 1514798085, "last_edit_date": 1514799248, "question_id": 48048455, "link": "https://stackoverflow.com/questions/48048455/glide-library-java-lang-noclassdeffounderror", "title": "Glide Library java.lang.NoClassDefFoundError", "body": "<p>I am working on Glide Library to Load images from the drawable resource file but i encountered NoClassDefFoundError.I've tried so many ways here in stack but i failed to solve the problem.The activity i implemented is Fragment.Here is the Code...</p>\n\n<pre><code>class F12 : Fragment() {\noverride fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n\n     val myImageViewLayout : View = inflater!!.inflate(R.layout.f12, container, false)\n      val imageView = myImageViewLayout.findViewById&lt;ImageView&gt;(R.id.preview12)\n\n    Glide\n            .with(context)\n            .load(R.drawable.a12)\n            .into(imageView)\n\n    return myImageViewLayout\n\n}\n override fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n    val shareButton =view!!.findViewById&lt;Button&gt;(R.id.b12)\n    val wallButton = view.findViewById&lt;Button&gt;(R.id.wb12)\n    val adRequest = AdRequest.Builder().build()\n\n    shareButton.setOnClickListener {\n\n        val shareIntent = Intent()\n        shareIntent.action = Intent.ACTION_SEND\n        shareIntent.putExtra(Intent.EXTRA_TEXT, \"\u12a8\u1218\u1238 \u134d\u1245\u122b\u127d\u1295 \u12f0\u122b\u2026\u12c8\u12f0\u128b\u120b \u12a0\u1295\u1218\u120d\u1230\u12c9 \u1290\u1308\u122d \u1206\u1290\u1265\u1295\u2026.\u1240\u120d\u12f3\u127d\u1295 \u12e8\u121d\u122d \u1232\u1206\u1295\u1363\u1245\u12e0\u1275 \u12eb\u120d\u1290\u12c9  \u12a5\u12c9\u1295 \u1232\u1206\u1295 \u1232\u1328\u120b\u120d\u121d \u12a0\u12e8\u1290\u12c9\")\n        shareIntent.type = \"text/plain\"\n        startActivity(Intent.createChooser(shareIntent, \"\u123c\u122d \u12eb\u12f5\u122d\u1309...\"))\n  }\n   }\n</code></pre>\n\n<p>and here is the gradle.app module..</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\nandroid \n  {\ncompileSdkVersion 26\nbuildToolsVersion \"26.0.3\"\ndefaultConfig {\n   applicationId \"com.afc.amhariclovequotes\"\n   minSdkVersion 14\n   targetSdkVersion 26\n   versionCode 1\n   versionName \"1.0\"\n   multiDexEnabled true\n }\nbuildTypes {\n    release {\n        minifyEnabled true\n        shrinkResources true\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n dexOptions {      \n    javaMaxHeapSize \"4g\"\n}\n }\n dependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\ncompile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\ncompile 'com.android.support:appcompat-v7:26.0.0'\ncompile 'com.android.support:mediarouter-v7:26.0.0'\ncompile 'com.android.support:design:26.0.0'\ncompile 'com.google.firebase:firebase-ads:11.6.0'\ncompile 'com.google.firebase:firebase-crash:11.6.0'\ncompile 'com.google.firebase:firebase-core:11.6.0'\ncompile 'com.google.firebase:firebase-messaging:11.6.0'\ncompile 'com.android.support:multidex:1.0.1'\ncompile 'com.android.support.constraint:constraint-layout:1.0.1'\ncompile 'com.github.bumptech.glide:glide:4.4.0@aar'\nkapt 'com.github.bumptech.glide:compiler:4.4.0'\ntestCompile 'junit:junit:4.12'    \n }\n repositories {\n mavenCentral()\n }\n apply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p>Here is the Android Monitor Complains about the code...</p>\n\n<pre><code>FATAL EXCEPTION: main\nProcess: com.afc_quotes.first_amharic_love_quotes, PID: 24273\njava.lang.NoClassDefFoundError: com.bumptech.glide.load.resource.gif.GifBitmapProvider\nat com.bumptech.glide.load.resource.gif.ByteBufferGifDecoder.&lt;init&gt;(ByteBufferGifDecoder.java:68)\nat com.bumptech.glide.load.resource.gif.ByteBufferGifDecoder.&lt;init&gt;(ByteBufferGifDecoder.java:54)\nat com.bumptech.glide.Glide.&lt;init&gt;(Glide.java:327)\nat com.bumptech.glide.GlideBuilder.build(GlideBuilder.java:445)\nat com.bumptech.glide.Glide.initializeGlide(Glide.java:257)\nat com.bumptech.glide.Glide.initializeGlide(Glide.java:212)\nat com.bumptech.glide.Glide.checkAndInitializeGlide(Glide.java:176)\nat com.bumptech.glide.Glide.get(Glide.java:160)\nat com.bumptech.glide.Glide.getRetriever(Glide.java:612)\nat com.bumptech.glide.Glide.with(Glide.java:638)\n**at com.afc.amhariclovequotes.F12.onCreateView(F12.kt:50)**\nat android.support.v4.app.Fragment.performCreateView(Fragment.java:2337)\nat android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1419)\nat android.support.v4.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManager.java:1740)\nat android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1809)\nat android.support.v4.app.BackStackRecord.executeOps(BackStackRecord.java:799)\nat android.support.v4.app.FragmentManagerImpl.executeOps(FragmentManager.java:2580)\nat android.support.v4.app.FragmentManagerImpl.executeOpsTogether(FragmentManager.java:2367)\nat android.support.v4.app.FragmentManagerImpl.removeRedundantOperationsAndExecute(FragmentManager.java:2322)\nat android.support.v4.app.FragmentManagerImpl.execSingleAction(FragmentManager.java:2199)\nat android.support.v4.app.BackStackRecord.commitNowAllowingStateLoss(BackStackRecord.java:651)\nat android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:145)\nat android.support.v4.view.ViewPager.populate(ViewPager.java:1236)\nat android.support.v4.view.ViewPager.populate(ViewPager.java:1084)\nat android.support.v4.view.ViewPager$3.run(ViewPager.java:267)\nat android.view.Choreographer$CallbackRecord.run(Choreographer.java:858)\nat android.view.Choreographer.doCallbacks(Choreographer.java:670)\nat android.view.Choreographer.doFrame(Choreographer.java:603)\nat android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:844)\nat android.os.Handler.handleCallback(Handler.java:746)\nat android.os.Handler.dispatchMessage(Handler.java:95)\nat android.os.Looper.loop(Looper.java:148)\nat android.app.ActivityThread.main(ActivityThread.java:5443)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:728)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)\n</code></pre>\n"}, {"tags": ["kotlin", "apache-kafka-streams"], "answers": [{"comments": [{"owner": {"reputation": 1474, "user_id": 2794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2tHkr.jpg?s=128&g=1", "display_name": "gavrie", "link": "https://stackoverflow.com/users/2794/gavrie"}, "edited": false, "score": 0, "creation_date": 1514806171, "post_id": 48048516, "comment_id": 83070070, "body": "Thanks a lot, that was exactly what I needed!"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 3, "last_activity_date": 1514798836, "creation_date": 1514798836, "answer_id": 48048516, "question_id": 48047992, "link": "https://stackoverflow.com/questions/48047992/calling-a-generic-java-varargs-method-from-kotlin/48048516#48048516", "title": "Calling a generic Java varargs method from Kotlin", "body": "<p>Unfortunately <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\">SAM conversion</a> is not supported for variable length arguments. You can work around it though by converting the <code>(K, V) -&gt; Boolean</code> to <code>Predicate&lt;K,V&gt;</code> yourself like so:</p>\n\n<pre><code>fun &lt;K, V&gt; KStream&lt;K, V&gt;.kbranch(vararg predicates: (K, V) -&gt; Boolean): Array&lt;KStream&lt;K, V&gt;&gt; {\n    val arguments = predicates.map { Predicate { key: K, value: V -&gt; it(key, value) } }\n    return this.branch(*arguments.toTypedArray())\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1223, "user_id": 4897420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10153375565148586/picture?type=large", "display_name": "Kaloglu", "link": "https://stackoverflow.com/users/4897420/kaloglu"}, "is_accepted": false, "score": 0, "last_activity_date": 1515015726, "creation_date": 1515015726, "answer_id": 48085527, "question_id": 48047992, "link": "https://stackoverflow.com/questions/48047992/calling-a-generic-java-varargs-method-from-kotlin/48085527#48085527", "title": "Calling a generic Java varargs method from Kotlin", "body": "<p>Actually you can define like this.</p>\n\n<pre><code>fun &lt;in K, in V&gt; KStream&lt;K, V&gt;.kbranch(vararg predicates: out Predicate&lt;K, V&gt;):\n    Array&lt;KStream&lt;K, V&gt;&gt; = this.branch(*predicates)\n</code></pre>\n"}], "owner": {"reputation": 1474, "user_id": 2794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2tHkr.jpg?s=128&g=1", "display_name": "gavrie", "link": "https://stackoverflow.com/users/2794/gavrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 48048516, "answer_count": 2, "score": 2, "last_activity_date": 1515015726, "creation_date": 1514792806, "question_id": 48047992, "link": "https://stackoverflow.com/questions/48047992/calling-a-generic-java-varargs-method-from-kotlin", "title": "Calling a generic Java varargs method from Kotlin", "body": "<p>I am trying to call the following Java method from Kotlin:</p>\n\n<pre><code>KStream&lt;K, V&gt;[] branch(final Predicate&lt;? super K, ? super V&gt;... predicates);\n</code></pre>\n\n<p>This method is part of the <a href=\"https://kafka.apache.org/10/documentation/streams/developer-guide/dsl-api.html\" rel=\"nofollow noreferrer\">Kafka Streams API</a>.</p>\n\n<p>The way I tried to call it, following <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"nofollow noreferrer\">the Kotlin docs</a>, was by defining an extension method:</p>\n\n<pre><code>fun &lt;K, V&gt; KStream&lt;K, V&gt;.kbranch(vararg predicates: (K, V) -&gt; Boolean):\n    Array&lt;KStream&lt;K, V&gt;&gt; = this.branch(*predicates)\n</code></pre>\n\n<p>The problem is that it doesn't compile. I get the following error:</p>\n\n<pre><code>Type mismatch: inferred type is Array&lt;out (K, V) -&gt; Boolean&gt; \nbut Array&lt;(out) Predicate&lt;in K!, in V!&gt;!&gt;! was expected\n</code></pre>\n\n<p>The similar <code>KStream#filter</code> method, which accepts a single <code>Predicate</code> as an argument, can be called without any issue when passing a Kotlin lambda with the same signature of <code>(K, V) -&gt; Boolean</code>.</p>\n\n<p>Any ideas? I have seen <a href=\"https://stackoverflow.com/questions/36626152/call-java-varargs-method-from-kotlin\">this similar question</a>, but something here seems subtly different and I can't pinpoint it.</p>\n"}, {"tags": ["android", "kotlin", "calculator"], "comments": [{"owner": {"reputation": 1016, "user_id": 8143436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HoM18.jpg?s=128&g=1", "display_name": "Mahesh Vayak", "link": "https://stackoverflow.com/users/8143436/mahesh-vayak"}, "edited": false, "score": 0, "creation_date": 1514782764, "post_id": 48047249, "comment_id": 83066061, "body": "First of all check EditText empty or not?"}, {"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "reply_to_user": {"reputation": 1016, "user_id": 8143436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HoM18.jpg?s=128&g=1", "display_name": "Mahesh Vayak", "link": "https://stackoverflow.com/users/8143436/mahesh-vayak"}, "edited": false, "score": 0, "creation_date": 1514782831, "post_id": 48047249, "comment_id": 83066068, "body": "tell me how to do that , i am new in these skill"}], "answers": [{"comments": [{"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514783275, "post_id": 48047278, "comment_id": 83066131, "body": "tried button button can&#39;t help it still crashes, if you can make a code with my buttons"}, {"owner": {"reputation": 2808, "user_id": 5539082, "user_type": "registered", "profile_image": "https://graph.facebook.com/870880569673790/picture?type=large", "display_name": "ND1010_", "link": "https://stackoverflow.com/users/5539082/nd1010"}, "reply_to_user": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514783397, "post_id": 48047278, "comment_id": 83066141, "body": "@ApurvAjayKumarA2 try with R2R answer"}, {"owner": {"reputation": 2808, "user_id": 5539082, "user_type": "registered", "profile_image": "https://graph.facebook.com/870880569673790/picture?type=large", "display_name": "ND1010_", "link": "https://stackoverflow.com/users/5539082/nd1010"}, "reply_to_user": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514783538, "post_id": 48047278, "comment_id": 83066158, "body": "why down vote ? can you have any query please comment"}, {"owner": {"reputation": 2808, "user_id": 5539082, "user_type": "registered", "profile_image": "https://graph.facebook.com/870880569673790/picture?type=large", "display_name": "ND1010_", "link": "https://stackoverflow.com/users/5539082/nd1010"}, "reply_to_user": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514783574, "post_id": 48047278, "comment_id": 83066161, "body": "@ApurvAjayKumarA2K any crash load you have please post in question"}, {"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514783823, "post_id": 48047278, "comment_id": 83066196, "body": "I want the it prevent from crash but  it errror in trim()"}, {"owner": {"reputation": 2808, "user_id": 5539082, "user_type": "registered", "profile_image": "https://graph.facebook.com/870880569673790/picture?type=large", "display_name": "ND1010_", "link": "https://stackoverflow.com/users/5539082/nd1010"}, "reply_to_user": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514783913, "post_id": 48047278, "comment_id": 83066211, "body": "@ApurvAjayKumarA2K getting Run time error ? if yes than please post crash LOG"}, {"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514784426, "post_id": 48047278, "comment_id": 83066288, "body": "i have not made a log tag so that i can&#39;t sent you can see thois scrennshot <a href=\"https://i.stack.imgur.com/DmhKl.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/DmhKl.png</a>"}, {"owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514784600, "post_id": 48047278, "comment_id": 83066313, "body": "it say to create extension function Double.trim with i press alt + enter to fix red underline error in trim()"}, {"owner": {"reputation": 2808, "user_id": 5539082, "user_type": "registered", "profile_image": "https://graph.facebook.com/870880569673790/picture?type=large", "display_name": "ND1010_", "link": "https://stackoverflow.com/users/5539082/nd1010"}, "reply_to_user": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "edited": false, "score": 0, "creation_date": 1514785646, "post_id": 48047278, "comment_id": 83066470, "body": "@ApurvAjayKumarA2K have you tried using  with my answer?"}], "tags": [], "owner": {"reputation": 2808, "user_id": 5539082, "user_type": "registered", "profile_image": "https://graph.facebook.com/870880569673790/picture?type=large", "display_name": "ND1010_", "link": "https://stackoverflow.com/users/5539082/nd1010"}, "is_accepted": false, "score": 1, "last_activity_date": 1514784885, "last_edit_date": 1514784885, "creation_date": 1514783066, "answer_id": 48047278, "question_id": 48047249, "link": "https://stackoverflow.com/questions/48047249/is-there-any-way-on-stop-crashing-in-empty-decimal-value-in-edittext-in-kotlin/48047278#48047278", "title": "Is there any way on stop crashing in empty Decimal value in EditText in kotlin?", "body": "<p>Firstly on button click you have to check the EditText having any value or not if not don't calculate </p>\n\n<p><strong>here is example</strong> </p>\n\n<pre><code>btn.setOnClickListener{\n        //read value from `EditText` to a String variable\n        val s = distance.text.toString().trim().toDouble()\n        val u = initalVelocity.text.toString().trim().toDouble()\n        val t = time.text.toString().trim().toDouble()\n\n        //check if the `EditText` have values or not\n        if(s &gt; 0 &amp;&amp; u  &gt; 0 &amp;&amp; t &gt; 0) {\n            //calculate\n            val a = (((2* s))-(2*(u*t)))/(t*t)\n           answer.setText(\"answer $a m/(s)^2\")\n\n        }else{\n            Toast.makeText(applicationContext, \"Please value! \", Toast.LENGTH_SHORT).show()\n        }\n    } \n</code></pre>\n\n<p>You can find more clear solution form <strong><a href=\"https://stackoverflow.com/questions/19519468/how-to-convert-string-to-long-in-kotlin\">here</a></strong> and <strong><a href=\"https://www.programiz.com/kotlin-programming/type-conversion\" rel=\"nofollow noreferrer\">type-conversion-kitlin</a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 3285, "user_id": 3505534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Etrmc.jpg?s=128&g=1", "display_name": "Ramesh sambu", "link": "https://stackoverflow.com/users/3505534/ramesh-sambu"}, "is_accepted": true, "score": 0, "last_activity_date": 1514785916, "last_edit_date": 1514785916, "creation_date": 1514783159, "answer_id": 48047281, "question_id": 48047249, "link": "https://stackoverflow.com/questions/48047249/is-there-any-way-on-stop-crashing-in-empty-decimal-value-in-edittext-in-kotlin/48047281#48047281", "title": "Is there any way on stop crashing in empty Decimal value in EditText in kotlin?", "body": "<p><strong>Try this</strong> </p>\n\n<pre><code>calculate.setOnClickListener {\n\nif((distance.text.toString().lenght&gt;0) &amp;&amp; \n(initalVelocity.text.toString().lenght&gt;0) &amp;&amp; \n (time.text.toString().lenght&gt;0)) {\n        val s = distance.text.toString().toDouble()\n        val u = initalVelocity.text.toString().toDouble()\n        val t = time.text.toString().toDouble()\n        val a = (((2* s))-(2*(u*t)))/(t*t)\n        answer.setText(\"answer $a m/(s)^2\")\n\n    }else{\n    //String null\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 785, "user_id": 8656729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6-GY6Cg_ISg/AAAAAAAAAAI/AAAAAAAAD6Y/iEpN7IuGVlQ/photo.jpg?sz=128", "display_name": "a2krocks", "link": "https://stackoverflow.com/users/8656729/a2krocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 48047281, "answer_count": 2, "score": 0, "last_activity_date": 1514797831, "creation_date": 1514782667, "last_edit_date": 1514797831, "question_id": 48047249, "link": "https://stackoverflow.com/questions/48047249/is-there-any-way-on-stop-crashing-in-empty-decimal-value-in-edittext-in-kotlin", "title": "Is there any way on stop crashing in empty Decimal value in EditText in kotlin?", "body": "<p>I need a help in my app when we put an empty value. When i try to calculate is there any way to prevent crash if there is no value.\nJust i need that when i press calculate button it set text to \"Put a value \" in Answers </p>\n\n<p>When I try to convert string to DecimalorNull type is just get error in calculation and prevent from it building </p>\n\n<p>here is my layout xml </p>\n\n<pre><code>&lt;EditText\n    android:id=\"@+id/distance\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:ems=\"10\"\n    android:hint=\"@string/distance\"\n    android:inputType=\"number|numberDecimal|numberSigned\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.094\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.034\" /&gt;\n\n&lt;EditText\n    android:id=\"@+id/initalVelocity\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:ems=\"10\"\n    android:hint=\"@string/initialVelocity\"\n    android:inputType=\"number|numberDecimal|numberSigned\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.094\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.133\" /&gt;\n\n&lt;EditText\n    android:id=\"@+id/time\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:ems=\"10\"\n    android:hint=\"@string/time\"\n    android:inputType=\"number|numberDecimal|numberSigned\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.094\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.232\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/answer\"\n    android:layout_width=\"219dp\"\n    android:layout_height=\"37dp\"\n    android:text=\"@string/answer\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.096\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.35\" /&gt;\n\n&lt;Button\n    android:id=\"@+id/calculate\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"@string/calculate\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.462\" /&gt;\n</code></pre>\n\n<p>Here is mine main activity kt file :</p>\n\n<pre><code>calculate.setOnClickListener {\n        val s = distance.text.toString().toDouble()\n        val u = initalVelocity.text.toString().toDouble()\n        val t = time.text.toString().toDouble()\n\n        val a = (((2* s))-(2*(u*t)))/(t*t)\n\n            answer.setText(\"answer $a m/(s)^2\")\n\n    }\n</code></pre>\n\n<p>Image</p>\n\n<p><a href=\"https://i.stack.imgur.com/DmhKl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DmhKl.png\" alt=\"![enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/gFom6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gFom6.png\" alt=\"https://i.stack.imgur.com/gFom6.png\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/QJZFf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QJZFf.png\" alt=\"https://i.stack.imgur.com/QJZFf.png\"></a></p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "edited": false, "score": 0, "creation_date": 1514777281, "post_id": 48046600, "comment_id": 83065482, "body": "This is syntactically incorrect (you are missing the quotes on UiScheduler), but regardless, this is for a <code>@Named</code> annotation, I am currently using qualifiers. The same solution does not apply, or at least not in the same way as far as I can tell. Is there a variant of this <code>@field</code> fix for dependencies using <code>@Qualifier</code>?"}, {"owner": {"reputation": 481, "user_id": 5435312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HjWfX.jpg?s=128&g=1", "display_name": "garywzh", "link": "https://stackoverflow.com/users/5435312/garywzh"}, "reply_to_user": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "edited": false, "score": 0, "creation_date": 1514782720, "post_id": 48046600, "comment_id": 83066057, "body": "I don&#39;t know. Maybe you can give &quot;@Named&quot; a try."}, {"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "edited": false, "score": 0, "creation_date": 1514830808, "post_id": 48046600, "comment_id": 83076183, "body": "Thanks, but the question is specific to qualifiers."}], "tags": [], "owner": {"reputation": 481, "user_id": 5435312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HjWfX.jpg?s=128&g=1", "display_name": "garywzh", "link": "https://stackoverflow.com/users/5435312/garywzh"}, "is_accepted": false, "score": 2, "last_activity_date": 1514782649, "last_edit_date": 1514782649, "creation_date": 1514769077, "answer_id": 48046600, "question_id": 48046309, "link": "https://stackoverflow.com/questions/48046309/dagger2-and-qualifiers-in-dependent-components/48046600#48046600", "title": "Dagger2 and qualifiers in dependent components", "body": "<p>Try <code>@Named</code> annotition</p>\n\n<pre><code>@Inject @field:Named(\"UiScheduler\") lateinit var uiScheduler: Scheduler\n</code></pre>\n\n<p>check out <a href=\"https://github.com/google/dagger/issues/761#issuecomment-305520688\" rel=\"nofollow noreferrer\">this issue</a></p>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 9101749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UOrg3.png?s=128&g=1", "display_name": "Mumi", "link": "https://stackoverflow.com/users/9101749/mumi"}, "is_accepted": true, "score": 4, "last_activity_date": 1514878771, "creation_date": 1514878771, "answer_id": 48057282, "question_id": 48046309, "link": "https://stackoverflow.com/questions/48046309/dagger2-and-qualifiers-in-dependent-components/48057282#48057282", "title": "Dagger2 and qualifiers in dependent components", "body": "<p>Using @field:UiScheduler in class EditEntryFragment</p>\n"}], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1032, "favorite_count": 1, "accepted_answer_id": 48057282, "answer_count": 2, "score": 2, "last_activity_date": 1514878771, "creation_date": 1514763526, "last_edit_date": 1514768504, "question_id": 48046309, "link": "https://stackoverflow.com/questions/48046309/dagger2-and-qualifiers-in-dependent-components", "title": "Dagger2 and qualifiers in dependent components", "body": "<p>I have an app component and a dependent component. The app component declares explicit dependencies, and the dependent component can inject those. However, when I have a dependency that I have to disambiguate with a @Qualifier, the dependent component is not able to inject that dependency.</p>\n\n<p>This is the app component</p>\n\n<pre><code>@Component(modules = [AppModule::class, SchedulersModule::class, StorageModule::class])\n\n@ApplicationScope\ninterface AppComponent {\n    fun inject(app: Application)\n    /* other stuff omitted for brevity */\n    val bitmapCache: BitmapCache        \n    @UiScheduler fun uiScheduler(): Scheduler\n}\n</code></pre>\n\n<p>This is the scheduler module:</p>\n\n<pre><code>@Module\nclass SchedulersModule {\n    @ApplicationScope\n    @Provides\n    @IoScheduler\n    fun provideIoScheduler(): Scheduler = Schedulers.io()\n\n    @ApplicationScope\n    @Provides\n    @UiScheduler\n    fun provideMainThreadScheduler(): Scheduler = AndroidSchedulers.mainThread()\n}\n</code></pre>\n\n<p>This is the qualifier:</p>\n\n<pre><code>@Qualifier\n@Retention(AnnotationRetention.RUNTIME)\nannotation class UiScheduler\n</code></pre>\n\n<p>And this is the dependent component:</p>\n\n<pre><code>@Component(\n        dependencies = [AppComponent::class],\n        modules = [EditEntryActivityModule::class, ViewModelModule::class]\n)\n\n@ActivityScope\ninterface EditEntryActivityComponent {\n    fun inject(editEntryActivity: EditEntryActivity)\n    fun inject(editEntryFragment: EditEntryFragment)\n}\n</code></pre>\n\n<p>This is how the scheduler is injected in the fragment:</p>\n\n<pre><code>class EditEntryFragment : Fragment() {\n    @Inject @UiScheduler lateinit var uiScheduler: Scheduler\n    /* other stuff */\n}\n</code></pre>\n\n<p>So why can the dependent component inject the bitmap cache, declared in the parent component, but not the UI scheduler? This is the error I get:</p>\n\n<pre><code>error: io.reactivex.Scheduler cannot be provided without an @Provides- or @Produces-annotated method.\n  io.reactivex.Scheduler is injected at\n      com.test.edit.EditEntryFragment.uiScheduler\n  com.test.edit.EditEntryFragment is injected at\n      com.test.edit.EditEntryActivityComponent.inject(arg0)\n1 error\n</code></pre>\n"}, {"tags": ["spring-boot", "kotlin", "project-reactor", "spring-webflux", "reactor-netty"], "answers": [{"tags": [], "owner": {"reputation": 421, "user_id": 7910403, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j0Mm_g9edb4/AAAAAAAAAAI/AAAAAAAABtw/YZMFB-_YHXI/photo.jpg?sz=128", "display_name": "Juan Medina", "link": "https://stackoverflow.com/users/7910403/juan-medina"}, "is_accepted": false, "score": 0, "last_activity_date": 1558007533, "last_edit_date": 1558007533, "creation_date": 1514807931, "answer_id": 48049467, "question_id": 48046238, "link": "https://stackoverflow.com/questions/48046238/spring-webflux-only-one-connection-receive-subscriber-allowed/48049467#48049467", "title": "Spring WebFlux: Only one connection receive subscriber allowed", "body": "<p>I've done a very similar example here:</p>\n\n<p>This router will get a geolocation from name and the with another service extract the sunrise and sunset time:</p>\n\n<p>I've use the <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#and-org.reactivestreams.Publisher-\" rel=\"nofollow noreferrer\">and</a> method from Mono.</p>\n\n<pre><code>internal fun buildResponse(address: Mono&lt;String&gt;) =\n        address.transform(geoLocationService::fromAddress).and(this::sunriseSunset, ::LocationResponse)\n\ninternal fun sunriseSunset(geographicCoordinates: GeographicCoordinates) =\n        geographicCoordinates.toMono().transform(sunriseSunsetService::fromGeographicCoordinates)\n</code></pre>\n\n<p>More details of this <a href=\"https://github.com/LearningByExample/KotlinReactiveMS/blob/master/src/main/kotlin/org/learning/by/example/reactive/kotlin/microservices/KotlinReactiveMS/handlers/ApiHandler.kt\" rel=\"nofollow noreferrer\">example</a></p>\n"}, {"comments": [{"owner": {"reputation": 8876, "user_id": 1360074, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/09a48f839376790891c0955e5b9c074d?s=128&d=identicon&r=PG", "display_name": "Nikolay Kuznetsov", "link": "https://stackoverflow.com/users/1360074/nikolay-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1514903329, "post_id": 48057404, "comment_id": 83098130, "body": "Hey Oleg. I think issue is rather in geo Mono dependency on item Mono. Upon subscription geo generates second subscription to item. And it is prohibited by rx-netty."}, {"owner": {"reputation": 8876, "user_id": 1360074, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/09a48f839376790891c0955e5b9c074d?s=128&d=identicon&r=PG", "display_name": "Nikolay Kuznetsov", "link": "https://stackoverflow.com/users/1360074/nikolay-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1514924028, "post_id": 48057404, "comment_id": 83107809, "body": "There is <code>share</code> operator in my version of Reactor. <code>cache</code> does not help"}, {"owner": {"reputation": 8090, "user_id": 4891253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a7b6ff38e865dafa02259ed769eab4?s=128&d=identicon&r=PG", "display_name": "Oleh Dokuka", "link": "https://stackoverflow.com/users/4891253/oleh-dokuka"}, "reply_to_user": {"reputation": 8876, "user_id": 1360074, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/09a48f839376790891c0955e5b9c074d?s=128&d=identicon&r=PG", "display_name": "Nikolay Kuznetsov", "link": "https://stackoverflow.com/users/1360074/nikolay-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1514963506, "post_id": 48057404, "comment_id": 83119083, "body": "So, did some of the proposed technique help to solve your problem?"}, {"owner": {"reputation": 8090, "user_id": 4891253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a7b6ff38e865dafa02259ed769eab4?s=128&d=identicon&r=PG", "display_name": "Oleh Dokuka", "link": "https://stackoverflow.com/users/4891253/oleh-dokuka"}, "reply_to_user": {"reputation": 8876, "user_id": 1360074, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/09a48f839376790891c0955e5b9c074d?s=128&d=identicon&r=PG", "display_name": "Nikolay Kuznetsov", "link": "https://stackoverflow.com/users/1360074/nikolay-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1514963705, "post_id": 48057404, "comment_id": 83119157, "body": "BTW, from your stack I don&#39;t see any code related to <code>ConferenceService</code>, but the error stack is directly related to this part of the code"}, {"owner": {"reputation": 8876, "user_id": 1360074, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/09a48f839376790891c0955e5b9c074d?s=128&d=identicon&r=PG", "display_name": "Nikolay Kuznetsov", "link": "https://stackoverflow.com/users/1360074/nikolay-kuznetsov"}, "edited": false, "score": 0, "creation_date": 1515182244, "post_id": 48057404, "comment_id": 83217388, "body": "I have applied <code>cache</code> operator to most top item, then it works okay."}, {"owner": {"reputation": 23425, "user_id": 509967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3365b9293640542789b8a3e4a009356d?s=128&d=identicon&r=PG", "display_name": "Bobbake4", "link": "https://stackoverflow.com/users/509967/bobbake4"}, "edited": false, "score": 0, "creation_date": 1558454650, "post_id": 48057404, "comment_id": 99103329, "body": "@OlehDokuka This <code>share</code> operator doesn&#39;t seem to be available in newer Reactor releases and the <code>cache</code> operator is still throwing the same error. Was this functionality removed in later releases? If so, is there a new work around to allow this? Related question I had posted that is slightly different but results in the same error <a href=\"https://stackoverflow.com/questions/56238895/webflux-call-bodytomono-twice-throws-illegalstateexception\" title=\"webflux call bodytomono twice throws illegalstateexception\">stackoverflow.com/questions/56238895/&hellip;</a>"}, {"owner": {"reputation": 8090, "user_id": 4891253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a7b6ff38e865dafa02259ed769eab4?s=128&d=identicon&r=PG", "display_name": "Oleh Dokuka", "link": "https://stackoverflow.com/users/4891253/oleh-dokuka"}, "reply_to_user": {"reputation": 23425, "user_id": 509967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3365b9293640542789b8a3e4a009356d?s=128&d=identicon&r=PG", "display_name": "Bobbake4", "link": "https://stackoverflow.com/users/509967/bobbake4"}, "edited": false, "score": 0, "creation_date": 1558466234, "post_id": 48057404, "comment_id": 99108554, "body": "@Bobbake4 can you please share a sample of code in your question. I will do my best help you."}], "tags": [], "owner": {"reputation": 8090, "user_id": 4891253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a7b6ff38e865dafa02259ed769eab4?s=128&d=identicon&r=PG", "display_name": "Oleh Dokuka", "link": "https://stackoverflow.com/users/4891253/oleh-dokuka"}, "is_accepted": true, "score": 14, "last_activity_date": 1514879430, "creation_date": 1514879430, "answer_id": 48057404, "question_id": 48046238, "link": "https://stackoverflow.com/questions/48046238/spring-webflux-only-one-connection-receive-subscriber-allowed/48057404#48057404", "title": "Spring WebFlux: Only one connection receive subscriber allowed", "body": "<h3><code>WebClient.exchange()</code> result stream is unicast</h3>\n\n<p>The problem here is in fact that <code>WebClient</code> allows only one subscriber per connection. If you try to subscribe to the same <strong><em>exchanged</em></strong> connection twice - you will get <code>java.lang.IllegalStateException: Only one connection receive subscriber allowed.</code></p>\n\n<p>Despite the fact that I don't see where you have tried to reuse the same connection twice, I believe that you may solve that problem by using next combination of operators: </p>\n\n<pre><code>class GeoService() {\n   val client = WebClient.create(\"https://maps.googleapis.com/maps/api/geocode/\")\n\n   fun resolveGeoFromCity(city: String): Mono&lt;Geo&gt; {\n       return client.get()\n            .uri(\"json?address=$city&amp;key=$API_KEY&amp;language=en\")\n            .exchange()\n            .flatMap { it.bodyToMono(String::class.java) }\n            .map { parse(it) }\n            .share();\n   }\n   ...\n}\n</code></pre>\n\n<p>in that example, flow is configured to multicasts (shares) the original source as long as there is at least one <code>Subscriber</code> will be subscribed. \nIn case if you need that all subscribers receive the same date you may replace <code>.share</code> with <code>.cache</code> operator.</p>\n\n<p>Also, there is an alternative to above technique. You may replace mentioned operator with a processor and get the same sharing possibility: </p>\n\n<pre><code>class GeoService() {\n\n   val client = WebClient.create(\"https://maps.googleapis.com/maps/api/geocode/\")\n\n   fun resolveGeoFromCity(city: String): Mono&lt;Geo&gt; {\n       return client.get()\n            .uri(\"json?address=$city&amp;key=$API_KEY&amp;language=en\")\n            .exchange()\n            .flatMap { it.bodyToMono(String::class.java) }\n            .map { parse(it) }\n            .subscribeWith(DirectProcessor.create());\n   }\n   ...\n}\n</code></pre>\n\n<p>In that case, you subscribing and running consumption of source's data exactly right after calling <code>subscribeWith</code>, so, potentially, in that case, you may lose some part of data, etc.</p>\n\n<h3>Why with <code>Mono.just(..)</code> everything works fine?</h3>\n\n<p>First of all <code>.just</code> is a cold operator, it allows as many as possible subscribers which receive the same data at any point in time. That is why when you tried to consume the same chunk of data from the connection twice, you did not get any exceptions.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11259022, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZM8YphtHKzI/AAAAAAAAAAI/AAAAAAAAB-c/B1DzXmRP4e4/photo.jpg?sz=128", "display_name": "Vitaliy Tsimbaluk", "link": "https://stackoverflow.com/users/11259022/vitaliy-tsimbaluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1553587342, "creation_date": 1553587342, "answer_id": 55352328, "question_id": 48046238, "link": "https://stackoverflow.com/questions/48046238/spring-webflux-only-one-connection-receive-subscriber-allowed/55352328#55352328", "title": "Spring WebFlux: Only one connection receive subscriber allowed", "body": "<p>I had a similar issue. The fix was to specify this dependency:</p>\n\n<p>org.springframework:spring-webflux:5.1.4.RELEASE</p>\n\n<p>As I used spring-boot it deploys the previous version of it. Unfortunately, the link to this issue is not existing now.</p>\n\n<p>So now my gradle looks like this:</p>\n\n<pre><code>compile('org.springframework.boot:spring-boot-starter-data-mongodb-reactive')\ncompile('org.springframework.boot:spring-boot-starter-webflux')\n// Next 2 dependencies are temporally here until the one above does not resolves next to at least 5.1.4 - where \n// webflux issue is resolved:\n// https://github.com/rstoyanchev/spr-issue-migration-test-2/issues/17323\ncompile('org.springframework:spring-webflux:5.1.4.RELEASE')\ncompile('org.springframework:spring-web:5.1.4.RELEASE')\n</code></pre>\n"}], "owner": {"reputation": 8876, "user_id": 1360074, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/09a48f839376790891c0955e5b9c074d?s=128&d=identicon&r=PG", "display_name": "Nikolay Kuznetsov", "link": "https://stackoverflow.com/users/1360074/nikolay-kuznetsov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14118, "favorite_count": 0, "accepted_answer_id": 48057404, "answer_count": 3, "score": 8, "last_activity_date": 1558007533, "creation_date": 1514762464, "question_id": 48046238, "link": "https://stackoverflow.com/questions/48046238/spring-webflux-only-one-connection-receive-subscriber-allowed", "title": "Spring WebFlux: Only one connection receive subscriber allowed", "body": "<p>I am writing a simple app with Spring 5 Webflux and Kotlin. I am trying to implement PUT endpoint in a following way:</p>\n\n<pre><code>PUT(\"/confs/{id}\", {\n    val id = it.pathVariable(\"id\")\n    ServerResponse.ok().body(service.save(it.bodyToMono(Item::class.java)), Item::class.java)\n})\n</code></pre>\n\n<p>The trick on save is that I try to read a city name from item, resolve geo coordinates, overwrite them in original item and then save to Mongo using Spring Data Mongo Reactive repo.</p>\n\n<pre><code>fun save(item: Mono&lt;Item&gt;): Mono&lt;Item&gt; {\n    val geo = item.flatMap {\n            val city = it.location?.city ?: \"Somewhere\"\n            geoService.resolveGeoFromCity(city)\n    }\n\n    val zipped = item.zipWith(geo)\n        .map {\n            it.t1.location?.geo = it.t2\n            it.t1\n        }\n\n    return repo.saveAll(zipped)\n        .toMono()\n}\n</code></pre>\n\n<p>Code to resolve geo coordinates is here:</p>\n\n<pre><code>@Service\nclass GeoService() {\n\n    val client = WebClient.create(\"https://maps.googleapis.com/maps/api/geocode/\")\n\n    fun resolveGeoFromCity(city: String): Mono&lt;Geo&gt; {\n        return client.get()\n                .uri(\"json?address=$city&amp;key=$API_KEY&amp;language=en\")\n                .exchange()\n                .flatMap { it.bodyToMono(String::class.java) }\n                .map { parse(it) }\n    }\n\n    private fun parse(response: String): Geo {\n        val locationMap = JsonPath.read&lt;Map&lt;String, Double&gt;&gt;(response, \"$.results[0].geometry.location\")\n        return Geo(locationMap[\"lat\"] ?: 0.0, locationMap[\"lng\"] ?: 0.0)\n    }\n\n}\n</code></pre>\n\n<p>The problem is that if make a PUT request I got following stacktrace. I have tried to stub Mono with <code>val geo = Mono.just(Geo(0.0, 0.0))</code> (without using WebClient) and then it works fine.</p>\n\n<p>How to fix it without sacrifying functionality?)</p>\n\n<pre><code>    2018-01-01 01:41:00.595 ERROR 15120 --- [ctor-http-nio-4] .a.w.r.e.DefaultErrorWebExceptionHandler : Failed to handle request [PUT http://localhost:8097/confs/5a49675c910d123b1057207a]\n\n    java.lang.IllegalStateException: Only one connection receive subscriber allowed.\n        at reactor.ipc.netty.channel.FluxReceive.startReceiver(FluxReceive.java:276) ~[reactor-netty-0.7.2.RELEASE.jar:0.7.2.RELEASE]\n        at reactor.ipc.netty.channel.FluxReceive.subscribe(FluxReceive.java:124) ~[reactor-netty-0.7.2.RELEASE.jar:0.7.2.RELEASE]\n        at reactor.core.publisher.FluxMap.subscribe(FluxMap.java:62) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.FluxOnAssembly.subscribe(FluxOnAssembly.java:252) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.ipc.netty.ByteBufFlux.subscribe(ByteBufFlux.java:242) ~[reactor-netty-0.7.2.RELEASE.jar:0.7.2.RELEASE]\n        at reactor.core.publisher.FluxPeek.subscribe(FluxPeek.java:83) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.FluxOnAssembly.subscribe(FluxOnAssembly.java:252) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.ipc.netty.ByteBufFlux.subscribe(ByteBufFlux.java:242) ~[reactor-netty-0.7.2.RELEASE.jar:0.7.2.RELEASE]\n        at reactor.core.publisher.FluxMap.subscribe(FluxMap.java:62) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.FluxOnAssembly.subscribe(FluxOnAssembly.java:252) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.FluxFlatMap.subscribe(FluxFlatMap.java:97) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.FluxOnAssembly.subscribe(FluxOnAssembly.java:252) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.FluxDoFinallyFuseable.subscribe(FluxDoFinallyFuseable.java:48) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.FluxOnAssembly.subscribe(FluxOnAssembly.java:252) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.FluxMapFuseable.subscribe(FluxMapFuseable.java:63) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.FluxOnAssembly.subscribe(FluxOnAssembly.java:252) ~\n[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoPeekTerminal.subscribe(MonoPeekTerminal.java:61) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:76) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoPeekFuseable.subscribe(MonoPeekFuseable.java:74) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:76) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:76) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:76) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:76) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnErrorResume.subscribe(MonoOnErrorResume.java:44) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:76) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnErrorResume.subscribe(MonoOnErrorResume.java:44) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:76) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnErrorResume.subscribe(MonoOnErrorResume.java:44) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:76) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:3008) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.drain(MonoIgnoreThen.java:167) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:56) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:76) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnErrorResume.subscribe(MonoOnErrorResume.java:44) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:71) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoPeekTerminal.subscribe(MonoPeekTerminal.java:61) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.core.publisher.MonoOnAssembly.subscribe(MonoOnAssembly.java:76) ~[reactor-core-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n        at reactor.ipc.netty.channel.ChannelOperations.applyHandler(ChannelOperations.java:383) ~[reactor-netty-0.7.2.RELEASE.jar:0.7.2.RELEASE]\n        at reactor.ipc.netty.http.server.HttpServerOperations.onHandlerStart(HttpServerOperations.java:359) ~[reactor-netty-0.7.2.RELEASE.jar:0.7.2.RELEASE]\n        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:163) ~[netty-common-4.1.17.Final.jar:4.1.17.Final]\n        at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java) ~[netty-common-4.1.17.Final.jar:4.1.17.Final]\n        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403) ~[netty-common-4.1.17.Final.jar:4.1.17.Final]\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463) ~[netty-transport-4.1.17.Final.jar:4.1.17.Final]\n        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[netty-common-4.1.17.Final.jar:4.1.17.Final]\n        at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_112]\n        Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \n    Assembly trace from producer [reactor.core.publisher.FluxMap] :\n        reactor.core.publisher.Flux.map(Flux.java:4855)\n        reactor.ipc.netty.ByteBufFlux.fromInbound(ByteBufFlux.java:68)\n        reactor.ipc.netty.NettyInbound.receive(NettyInbound.java:90)\n        org.springframework.http.server.reactive.ReactorServerHttpRequest.getBody(ReactorServerHttpRequest.java:148)\n        org.springframework.http.codec.DecoderHttpMessageReader.readMono(DecoderHttpMessageReader.java:93)\n        org.springframework.http.codec.DecoderHttpMessageReader.readMono(DecoderHttpMessageReader.java:123)\n        org.springframework.web.reactive.function.BodyExtractors.lambda$null$0(BodyExtractors.java:101)\n        java.util.Optional.map(Optional.java:215)\n        org.springframework.web.reactive.function.BodyExtractors.readWithMessageReaders(BodyExtractors.java:256)\n        org.springframework.web.reactive.function.BodyExtractors.lambda$toMono$2(BodyExtractors.java:96)\n        org.springframework.web.reactive.function.server.DefaultServerRequest.body(DefaultServerRequest.java:126)\n        org.springframework.web.reactive.function.server.DefaultServerRequest.body(DefaultServerRequest.java:120)\n        org.springframework.web.reactive.function.server.DefaultServerRequest.bodyToMono(DefaultServerRequest.java:145)\n        com.example.confs.web.ConferenceRouter$routes$1$2.invoke(ConferenceRouter.kt:31)\n        com.example.confs.web.ConferenceRouter$routes$1$2.invoke(ConferenceRouter.kt:16)\n        org.springframework.web.reactive.function.server.RouterFunctionDsl$PUT$1.handle(RouterFunctionDsl.kt:200)\n        org.springframework.web.reactive.function.server.support.HandlerFunctionAdapter.handle(HandlerFunctionAdapter.java:61)\n        org.springframework.web.reactive.DispatcherHandler.invokeHandler(DispatcherHandler.java:168)\n        org.springframework.web.reactive.DispatcherHandler.lambda$handle$1(DispatcherHandler.java:160)\n        reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:118)\n        reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:67)\n        reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:76)\n        reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.innerNext(FluxConcatMap.java:271)\n        reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:803)\n        reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:115)\n        reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:67)\n        reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:67)\n        reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:67)\n        reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:67)\n        reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:1649)\n        reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:1463)\n        reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:1337)\n        reactor.core.publisher.MonoJust.subscribe(MonoJust.java:54)\n        reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\n        reactor.core.publisher.Mono.subscribe(Mono.java:3008)\n        reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:75)\n        reactor.core.publisher.Operators.complete(Operators.java:125)\n        reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:45)\n        reactor.core.publisher.MonoSwitchIfEmpty.subscribe(MonoSwitchIfEmpty.java:44)\n        reactor.core.publisher.MonoSwitchIfEmpty.subscribe(MonoSwitchIfEmpty.java:44)\n        reactor.core.publisher.MonoSwitchIfEmpty.subscribe(MonoSwitchIfEmpty.java:44)\n        reactor.core.publisher.MonoSwitchIfEmpty.subscribe(MonoSwitchIfEmpty.java:44)\n        reactor.core.publisher.MonoMapFuseable.subscribe(MonoMapFuseable.java:59)\n        reactor.core.publisher.Mono.subscribe(Mono.java:3008)\n        reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.drain(FluxConcatMap.java:418)\n        reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.onSubscribe(FluxConcatMap.java:210)\n        reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:128)\n        reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:61)\n        reactor.core.publisher.FluxConcatMap.subscribe(FluxConcatMap.java:121)\n        reactor.core.publisher.MonoNext.subscribe(MonoNext.java:40)\n        reactor.core.publisher.MonoSwitchIfEmpty.subscribe(MonoSwitchIfEmpty.java:44)\n        reactor.core.publisher.MonoFlatMap.subscribe(MonoFlatMap.java:60)\n        reactor.core.publisher.MonoFlatMap.subscribe(MonoFlatMap.java:60)\n        reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\n        reactor.core.publisher.MonoPeekTerminal.subscribe(MonoPeekTerminal.java:61)\n        reactor.core.publisher.MonoPeekFuseable.subscribe(MonoPeekFuseable.java:74)\n        reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\n        reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\n        reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\n        reactor.core.publisher.MonoOnErrorResume.subscribe(MonoOnErrorResume.java:44)\n        reactor.core.publisher.MonoOnErrorResume.subscribe(MonoOnErrorResume.java:44)\n        reactor.core.publisher.MonoOnErrorResume.subscribe(MonoOnErrorResume.java:44)\n        reactor.core.publisher.Mono.subscribe(Mono.java:3008)\n        reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.drain(MonoIgnoreThen.java:167)\n        reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:56)\n        reactor.core.publisher.MonoOnErrorResume.subscribe(MonoOnErrorResume.java:44)\n        reactor.core.publisher.MonoPeekTerminal.subscribe(MonoPeekTerminal.java:61)\n        reactor.ipc.netty.channel.ChannelOperations.applyHandler(ChannelOperations.java:383)\n        reactor.ipc.netty.http.server.HttpServerOperations.onHandlerStart(HttpServerOperations.java:359)\n        io.netty.util.concurrent.AbstractEventExecutor.safeExecute$$$capture(AbstractEventExecutor.java:163)\n        io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:403)\n        io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:463)\n        io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)\n    Error has been observed by the following operator(s):\n        |_  Flux.map(ByteBufFlux.java:68)\n        |_  Flux.doOnNext(ByteBufFlux.java:230)\n        |_  Flux.map(ReactorServerHttpRequest.java:148)\n        |_  Flux.flatMap(AbstractJackson2Decoder.java:95)\n        |_  Flux.doFinally(AbstractJackson2Decoder.java:95)\n        |_  Flux.map(AbstractJackson2Decoder.java:117)\n        |_  Flux.singleOrEmpty(AbstractJackson2Decoder.java:87)\n        |_  Operators.error(FluxReceive.java:276)\n        |_  Mono.onErrorMap(DefaultServerRequest.java:146)\n        |_  Mono.map(ConferenceService.kt:27)\n        |_  Mono.map(ConferenceService.kt:32)\n        |_  Mono.zipWith(ConferenceService.kt:47)\n        |_  Mono.map(ConferenceService.kt:48)\n        |_  Flux.flatMap(SimpleReactiveMongoRepository.java:318)\n        |_  MonoExtensionsKt.toMono(ConferenceService.kt:55)\n        |_  Mono.map(ConferenceService.kt:56)\n        |_  Flux.map(AbstractJackson2Encoder.java:99)\n        |_  Mono.flatMap(DispatcherHandler.java:177)\n        |_  Mono.onErrorResume(DispatcherHandler.java:177)\n        |_  Mono.flatMap(DispatcherHandler.java:161)\n        |_  Mono.defer(DefaultWebFilterChain.java:71)\n        |_  Mono.doOnSuccess(MetricsWebFilter.java:59)\n        |_  Mono.doOnError(MetricsWebFilter.java:60)\n        |_  Mono.compose(MetricsWebFilter.java:54)\n        |_  Mono.defer(DefaultWebFilterChain.java:71)\n        |_  Mono.defer(DefaultWebFilterChain.java:71)\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 4, "creation_date": 1514799206, "post_id": 48045901, "comment_id": 83068604, "body": "Calling an overridable method from a constructor is bad practice (Java or Kotlin doesn&#39;t matter: the same is true for both), precisely because of this: subclasses can access to not-initialized state. Use an init() method, and use a factory function/method to create your objects, that calls the constructor, then calls init(). And please, please, respect the naming conventions."}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1514812585, "post_id": 48045901, "comment_id": 83071620, "body": "Factory methods aren&#39;t going to work. Each non-abstract class would need one and in that call init, so it defeats the purpose."}, {"owner": {"reputation": 768, "user_id": 882813, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e49c05b5c0bf93ef572175bcae5c84e8?s=128&d=identicon&r=PG", "display_name": "user882813", "link": "https://stackoverflow.com/users/882813/user882813"}, "edited": false, "score": 0, "creation_date": 1514944588, "post_id": 48045901, "comment_id": 83114205, "body": "@Zoe Just tried your java example and they expose exactly the same behavior as a kotlin code. <code>getUniforms()</code> prints <code>0</code> and after class construction field has value <code>404</code>. Why do you expect kotlin should behave in a different way?"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 768, "user_id": 882813, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e49c05b5c0bf93ef572175bcae5c84e8?s=128&d=identicon&r=PG", "display_name": "user882813", "link": "https://stackoverflow.com/users/882813/user882813"}, "edited": false, "score": 0, "creation_date": 1514964202, "post_id": 48045901, "comment_id": 83119375, "body": "@user882813 updated the code. Java vars don&#39;t need to be initialized, and the problem only appears to occur when the vars are initialized. Kotlin requires vars to be initialized, and since I can&#39;t use lateinit with primitives, I have to define a value (which appears to be causing problems in both languages, but it can be avoided in Java)"}], "answers": [{"tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": true, "score": 1, "last_activity_date": 1522668356, "creation_date": 1522668356, "answer_id": 49610387, "question_id": 48045901, "link": "https://stackoverflow.com/questions/48045901/variables-not-initialized-properly-when-initializing-it-in-an-overriden-abstract/49610387#49610387", "title": "Variables not initialized properly when initializing it in an overriden abstract function called from constructor or init block", "body": "<p>Note: The absolutely best idea is to avoid declaring objects/primitives in abstract functions called from the abstract class' constructor method, but there are cases where it's useful. Avoid it if possible.</p>\n\n<hr>\n\n<p>The only workaround I found for this is using <code>by lazy</code>, since there are primitives involved and I can convert assignment to work in the blocks.</p>\n\n<p><code>lateinit</code> would have made it slightly easier, so creating object wrappers could of course be an option, but using <code>by lazy</code> works in my case.</p>\n\n<p>Anyways, what's happening here is that the value assigned to the int in the constructor is later overridden by the fixed value. Pseudocode:</p>\n\n<pre><code>var x /* = 0 */\nconstructor() : super.constructor()//x is not initialized yet\nsuper.constructor(){\n    overridden function();\n}\nabstract function()\noverridden function() {\n    x = 4;\n}\n// The assignment if `= 0` takes place after the construction of the parent, setting x to 0 and overriding the value in the constructor\n</code></pre>\n\n<p>With lateinit, the problem is removed:</p>\n\n<pre><code>lateinit var x: Integer//x exists, but doesn't get a value. It's assigned later\nconstructor() : super.constructor()\nsuper.constructor(){\n    overridden function()\n}\nabstract function()\noverridden function(){\n    x = Integer(4);//using an object here since Kotlin doesn't support lateinit with primtives\n}\n//x, being lateinit and now initialized, doesn't get re-initialized by the declaration. x = 4 instead of 0, as in the first example\n</code></pre>\n\n<p>When I wrote the question, I thought Java worked differently. This was because I didn't initialize the variables there either (effectively, making them lateinit). When the class then is fully initialized, <code>int x;</code> doesn't get assigned a value. If it was declared as <code>int x = 1234;</code>, the same problem in Java occurs as here. </p>\n\n<p>Now, the problem goes back to lateinit and primitives; primitives cannot be lateinit. A fairly basic solution is using a data class:</p>\n\n<pre><code>data class IntWrapper(var value: Int)\n</code></pre>\n\n<p>Since the value of data classes can be unpacked:</p>\n\n<pre><code>var (value) = intWrapperInstance//doing \"var value = ...\" sets value to the intWrapperInstance. With the parenthesis it works the same way as unpacking the values of a pair or triple, just with a single value.\n</code></pre>\n\n<p>Now, since there's an instance with an object (not a primitive), lateinit can be used. However, this isn't particularly efficient since it involves another object being created.</p>\n\n<p>The only remaining option: <code>by lazy</code>. </p>\n\n<p>Wherever it's possible to create initialization as a function, this is the best option. The code in the question was a simplified version of OpenGL shaders (more specifically, the locations for uniforms). Meaning this particular code is fairly easy to convert to a <code>by lazy</code> block:</p>\n\n<pre><code>val projectionMatrixLocation by lazy{\n    glGetUniformLocation(program, \"projectionMatrix\")\n}\n</code></pre>\n\n<p>Depending on the case though, this might not be feasible. Especially since <code>by lazy</code> requires a <code>val</code>, which means it isn't possible to change it afterwards. This depends on the usage though, since it isn't a problem if it isn't going to change. </p>\n"}], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3673, "favorite_count": 0, "protected_date": 1525190780, "accepted_answer_id": 49610387, "answer_count": 1, "score": 1, "last_activity_date": 1525190741, "creation_date": 1514757245, "last_edit_date": 1514964058, "question_id": 48045901, "link": "https://stackoverflow.com/questions/48045901/variables-not-initialized-properly-when-initializing-it-in-an-overriden-abstract", "title": "Variables not initialized properly when initializing it in an overriden abstract function called from constructor or init block", "body": "<p>I hit a problem with some Kotlin code and I found out it was related to calling a method that assigns some variables from an init block (or a secondary constructor for that matter, either reproduces the problem).</p>\n\n<p>MCVE:</p>\n\n<pre><code>abstract class Shader(/*Input arguments omitted for the sake of an MCVE*/){\n\n    init{\n        //Shader loading and attaching, not relevant\n        bindAttribs()//One of the abstract methods. In my actual program, this uses OpenGL to bind attributes\n        //GLSL program validation\n        getUniforms()//Same as the previous one: abstract method using GL calls to get uniforms. This gets locations so an integer is set (the problem)\n\n    }\n    abstract fun getUniforms();//This is the one causing problems\n    abstract fun bindAttribs();//This would to if primitives or non-lateinit vars are set\n}\n\nabstract class BoilerplateShader() : Shader(){\n    var loc_projectionMatrix: Int = 404//404 is an initial value. This can be anything though\n    var loc_transformationMatrix: Int = 404\n    var loc_viewMatrix: Int = 404\n\n    override fun getUniforms(){\n        //These would be grabbed by using glGetUniformLocations, but it's reproducable with static values as well\n        loc_projectionMatrix = 0\n        loc_transformationMatrix = 1\n        loc_viewMatrix = 2\n        println(loc_projectionMatrix.toString() + \", \" + loc_transformationMatrix + \", \" + loc_viewMatrix)\n    }\n\n    //debug method, only used to show the values\n    fun dump(){\n        println(loc_projectionMatrix.toString() + \", \" + loc_transformationMatrix + \", \" + loc_viewMatrix)\n    }\n\n}\n\nclass TextureShader() : BoilerplateShader(){\n\n    override fun bindAttribs() {\n        //This doesn't cause a problem even though it's called from the init block, as nothing is assigned\n        //bindAttrib(0, \"a_position\");\n        //bindAttrib(1, \"a_texCoord0\");\n    }\n}\n\n//Other repetitive shaders, omitted for brevity\n</code></pre>\n\n<p>Then doing:</p>\n\n<pre><code>val tx = TextureShader()\ntx.dump()\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>0, 1, 2\n404, 404, 404\n</code></pre>\n\n<p>The print statements are called in order from getUniforms to the dump call at the end. It's assigned fine in the <code>getUniforms</code> method, but when calling them just a few milliseconds later, they're suddenly set to the default value of (in this case) 404. This value can be anything though, but I use 404 because that's a value I know I won't use for testing in this particular MCVE. </p>\n\n<p>I'm using a system that relies heavily on abstract classes, but calling some of these methods (<code>getUniforms</code> is extremely important) is a must. If I add an init block in either <code>BoilerplateShader</code> or <code>TextureShader</code> with a call to <code>getUniforms</code>, it works fine. Doing a workaround with an init function (not an init block) called after object creation:</p>\n\n<pre><code>fun init(){\n    bindAttribs();\n    getUniforms();\n}\n</code></pre>\n\n<p>works fine. But that would involve the created instance manually calls it:</p>\n\n<pre><code>val ts = TexturedShader();\nts.init();\nts.dump()\n</code></pre>\n\n<p>which isn't an option. Writing the code that causes problems in Kotlin in Java works like expected (considerably shortened code, but still reproducable):</p>\n\n<pre><code>abstract class Shader{\n    public Shader(){\n        getUniforms();\n    }\n\n     public abstract void getUniforms();\n}\n\nabstract class BoilerplateShader extends Shader{\n    int loc_projectionMatrix;//When this is initialized, it produces the same issue as Kotlin. But Java doesn't require the vars to be initialized when they're declared globally, so it doesn't cause a problem\n    public void getUniforms(){\n        loc_projectionMatrix = 1;\n        System.out.println(loc_projectionMatrix);\n    }\n    //and a dump method or any kind of basic print statement to print it after object creation\n}\n\nclass TextureShader extends BoilerplateShader {\n    public TextureShader(){\n        super();\n    }\n}\n</code></pre>\n\n<p>and printing the value of the variable after initialization of both the variable and the class prints 0, as expected.</p>\n\n<p>Trying to reproduce the same thing with an object produces the same result as with numbers <strong>when the var isn't lateinit</strong>. So this:</p>\n\n<pre><code>var test: String = \"\"\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>0, 1, 2, test\n404, 404, 404, \n</code></pre>\n\n<p>The last line is exactly as printed: the value if <code>test</code> is set to an empty String by default, so it shows up as empty.</p>\n\n<p>But if the var is declared as a <code>lateinit var</code>:</p>\n\n<pre><code>lateinit var test: String\n</code></pre>\n\n<p>it prints:</p>\n\n<pre><code>0, 1, 2, test\n404, 404, 404, test\n</code></pre>\n\n<p>I <a href=\"https://stackoverflow.com/questions/44381791/lateinit-modifier-is-not-allowed-on-primitive-type-properties-in-kotlin\">can't declare primitives with lateinit</a>. And since it's called outside a constructor, it either needs to be initialized or be declared as <code>lateinit</code>.</p>\n\n<p>So, is it possible to initialize primitives from an overridden abstract method without creating a function to call it?</p>\n\n<hr>\n\n<h1>Edit:</h1>\n\n<p>A comment suggested a factory method, but that's not going to work because of the abstraction. Since the attempted goal is to call the methods from the base class (<code>Shader</code>), and since abstract classes can't be initialized, factory methods won't work without creating a manual implementation in each class, which is overkill. And if the constructor is private to get it to work (avoid initialization outside factory methods), extending won't work (<code>&lt;init&gt; is private in Shader</code>).</p>\n\n<p>So the constructors are forced to be public (whether the Shader class has a primary or secondary constructor, the child classes have to have a primary to initialize it) meaning the shaders can be created while bypassing the factory method. And, abstraction causes problems again, the factory method (having to be abstract) would be manually implemented in each child class, once again resulting in initialization and manually calling the <code>init()</code> method.</p>\n\n<p>The question is still whether or not it's possible to make sure the non-lateinit and primitives are initialized when calling an abstract method from the constructor. Creating factory methods would be a perfect solution had there not been abstraction involved.</p>\n"}, {"tags": ["lambda", "kotlin"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1514757833, "post_id": 48045884, "comment_id": 83063114, "body": "I don&#39;t know if you&#39;re going to get better than accepting a collection of some sort."}], "answers": [{"comments": [{"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 9, "creation_date": 1521917776, "post_id": 48045963, "comment_id": 85939729, "body": "This restriction doesn&#39;t make sense to me. I understand that in the function body, the vararg-parameter is visible as an array, but that&#39;s the same behavior in Java as well. What does that have to do with not allowing vararg in lambdas?"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 13, "last_activity_date": 1514761858, "last_edit_date": 1514761858, "creation_date": 1514757983, "answer_id": 48045963, "question_id": 48045884, "link": "https://stackoverflow.com/questions/48045884/vararg-parameter-in-a-kotlin-lambda/48045963#48045963", "title": "vararg parameter in a Kotlin lambda", "body": "<p>I'm afraid this is not possible. The following demonstrates the type of a function with <code>vararg</code>. A <code>vararg</code> parameter is represented by an <code>Array</code>: </p>\n\n<pre><code>fun withVarargs(vararg x: String) = Unit\n\nval f: KFunction1&lt;Array&lt;out String&gt;, Unit&gt; = ::withVarargs\n</code></pre>\n\n<p>This behavior is also suggested in the <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Inside a function a vararg-parameter of type <code>T</code> is visible as an array of <code>T</code>, i.e. the ts variable in the example above has type <code>Array&lt;out T&gt;</code>.</p>\n</blockquote>\n\n<p>So you had to use an <code>Array&lt;String&gt;</code> in your example. Instead of writing your function as a lambda, you may use an ordinary function that allows to use <code>vararg</code> and make the call look as desired:</p>\n\n<pre><code>fun f(vararg strings: String) = strings.forEach(::println)\n\nf(\"a\",\"b\",\"c\")\n</code></pre>\n"}], "owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6885, "favorite_count": 5, "accepted_answer_id": 48045963, "answer_count": 1, "score": 22, "last_activity_date": 1602588542, "creation_date": 1514757036, "last_edit_date": 1602588542, "question_id": 48045884, "link": "https://stackoverflow.com/questions/48045884/vararg-parameter-in-a-kotlin-lambda", "title": "vararg parameter in a Kotlin lambda", "body": "<p>I'd like to define a function <code>f()</code> as follows (just an example) :</p>\n<pre><code>val f: (vararg strings: String) -&gt; Unit = { for (str in it) println(str) }\n</code></pre>\n<p>so that I could invoke it with <code>f(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)</code>. For the above definition of <code>f()</code> I get the compilation error, pointing at the <code>vararg</code> modifier (Kotlin v. 1.3.60 ) :</p>\n<pre><code>Unsupported [modifier on parameter in function type]\n</code></pre>\n<p>How can I define a lambda that accepts a <code>vararg</code> parameter ?</p>\n"}, {"tags": ["java", "android", "exception", "kotlin", "try-catch"], "comments": [{"owner": {"reputation": 251, "user_id": 5258801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a620080d2c729b24ad0559f4126ad22e?s=128&d=identicon&r=PG&f=1", "display_name": "AguThadeus", "link": "https://stackoverflow.com/users/5258801/aguthadeus"}, "edited": false, "score": 0, "creation_date": 1514752701, "post_id": 48045400, "comment_id": 83062216, "body": "There is no need to use try-catch in methodC to throw exception, if you want to your function to throw an Exception annotate it first then throw your Exception inside it, if another function calls that function it has to either handle that exception or throw it, for your case since the Exception is generated in <code>methodC()</code> and propagated up to <code>methodA</code> then both <code>methodC()</code> and <code>methodB()</code> have to be annotated  to throw your desired Exception, throw your exception in <code>methodC()</code> it will propagate through <code>methodB()</code> thereafter use try-catch in <code>methodA()</code> to handle the exception"}], "answers": [{"tags": [], "owner": {"reputation": 229, "user_id": 8316964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/932ee797557660a97d4ebae517bd5613?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Meister", "link": "https://stackoverflow.com/users/8316964/jack-meister"}, "is_accepted": true, "score": 1, "last_activity_date": 1514773112, "creation_date": 1514773112, "answer_id": 48046805, "question_id": 48045400, "link": "https://stackoverflow.com/questions/48045400/android-handle-exception-to-update-ui/48046805#48046805", "title": "android - Handle exception to update UI", "body": "<p>Your code should work (if you use your second version of <code>methodA()</code>). But why are you catching the exception in <code>methodC()</code>, only to throw a new copy of it? Instead, consider the following:</p>\n\n<pre><code>fun methodA() {\n    try {\n        methodB()\n    } catch (e: IOException) {\n        // error flow\n    }\n}\n\n@Throws(IOException::class)\nfun methodB() {\n    methodC()\n}\n\n@Throws(IOException::class)\nfun methodC() {\n    // do something that can throw exception\n}\n</code></pre>\n\n<p>The <code>IOException</code> propagates upward to <code>methodA()</code>, where you can handle it.</p>\n\n<p>You could also consider catching the exception deeper in the call stack:</p>\n\n<pre><code>fun methodA() {\n    val err = methodB()\n    if (err) {\n        // error flow\n    } else {\n        // normal flow\n    }\n}\n\nfun methodB(): Boolean {\n    return methodC()\n}\n\nfun methodC(): Boolean {\n    return try {\n        // do something that can throw exception\n        false\n    } catch (e: IOException) {\n        true\n    }\n}\n</code></pre>\n\n<p>Now, which of these two approaches should you use? It depends on your actual code. <a href=\"https://stackoverflow.com/questions/2972307/when-to-return-bool-throw-an-exception-and-which-exception-to-throw\">Here</a> is a discussion.</p>\n\n<p>(One other problem with the code that you gave is that <code>methodB()</code> is superfluous. But I'll assume that it does something interesting in your actual program.)</p>\n"}], "owner": {"reputation": 1776, "user_id": 9011723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20385cc990720ff64499b9de3b52fc70?s=128&d=identicon&r=PG&f=1", "display_name": "Jo&#227;o Ghignatti", "link": "https://stackoverflow.com/users/9011723/jo%c3%a3o-ghignatti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 48046805, "answer_count": 1, "score": 1, "last_activity_date": 1514773112, "creation_date": 1514751141, "question_id": 48045400, "link": "https://stackoverflow.com/questions/48045400/android-handle-exception-to-update-ui", "title": "android - Handle exception to update UI", "body": "<p>In my application I'd like to:</p>\n\n<ul>\n<li>Have a method A inside a Fragment</li>\n<li>From within method A, call a method B that is annotated with `@Throws(IOException::class)`</li>\n<li>From within method B, call a method C that has a `try catch` and at the `catch` it `throw IOException(e)`\n<li>Receive error inside method A and do stuff with info</li>\n</ul>\n\n<p>So far I have:</p>\n\n<pre><code>fun methodA() {\n    methodB()\n    //Get exception and do stuff\n}\n\n@Throws(IOException::class)  \nfun methodB() {\n    methodC()\n}  \n\nfun methodC() {\n    try {\n        //Something that can throw exception\n    } catch (e: IOException) {\n        throw IOException(e)\n    }\n}\n</code></pre>\n\n<p>Is that the right way or a excepted way? But still, how do I get that a exception was thrown inside method A? I was thinking of something like:</p>\n\n<pre><code>fun methodA() {\n    try {\n        methodB()\n    } catch (e: IOException) {\n        //received exception thrown by method C and do stuff\n    }\n}\n</code></pre>\n\n<p>Will I be able to achieve what I want with that? If not, can you help me?<br>\nThanks</p>\n"}, {"tags": ["jvm", "kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 0, "creation_date": 1514836595, "post_id": 48045372, "comment_id": 83077767, "body": "I don&#39;t know if you saw it, but your same question on the Kotlin Slack eventually got answered: this is a bug, and you should file it in YouTrack. Just passing this along in case you didn&#39;t see it, l had nothing to do with the answer."}, {"owner": {"reputation": 1509, "user_id": 43046, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49696504a1bf5d049faf2cf2da32e57b?s=128&d=identicon&r=PG", "display_name": "andresp", "link": "https://stackoverflow.com/users/43046/andresp"}, "reply_to_user": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 2, "creation_date": 1514842037, "post_id": 48045372, "comment_id": 83078960, "body": "I reported it: <a href=\"https://youtrack.jetbrains.com/issue/KT-22081\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-22081</a>"}, {"owner": {"reputation": 1509, "user_id": 43046, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49696504a1bf5d049faf2cf2da32e57b?s=128&d=identicon&r=PG", "display_name": "andresp", "link": "https://stackoverflow.com/users/43046/andresp"}, "reply_to_user": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 1, "creation_date": 1535375397, "post_id": 48045372, "comment_id": 91030661, "body": "I tested this with Kotlin 1.2.61 and it now works properly. It has reportedly been fixed in 1.2.40."}], "owner": {"reputation": 1509, "user_id": 43046, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/49696504a1bf5d049faf2cf2da32e57b?s=128&d=identicon&r=PG", "display_name": "andresp", "link": "https://stackoverflow.com/users/43046/andresp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 560, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1514750768, "creation_date": 1514750768, "question_id": 48045372, "link": "https://stackoverflow.com/questions/48045372/bad-type-on-operand-stack-with-kotlin-coroutines", "title": "Bad type on operand stack with Kotlin coroutines", "body": "<p>This code compiles successfully with Kotlin 1.2.10, but when I run it it produces a <code>java.lang.VerifyError: Bad type on operand stack</code>. If I remove the <code>Test</code> class and extract the functions out, it works as expected. Why is that?</p>\n\n<pre><code>import kotlinx.coroutines.experimental.delay\nimport kotlinx.coroutines.experimental.launch\nimport kotlinx.coroutines.experimental.runBlocking\nimport java.util.*\nimport kotlin.concurrent.schedule\n\nclass Test {\n    fun scheduleTimeout() {\n        Timer(true).schedule(300) {\n            launch {\n                runSuspended(\"hello\")\n            }\n        }\n    }\n\n    suspend fun runSuspended(txt: String) = println(txt)\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Test().scheduleTimeout()\n    runBlocking {\n        delay(10000)\n    }\n}\n</code></pre>\n\n<p>Full Exception:</p>\n\n<pre><code>Exception in thread \"Timer-0\" java.lang.VerifyError: Bad type on operand stack\nException Details:\n  Location:\n    Test$scheduleTimeout$$inlined$schedule$1$lambda$1.create(Lkotlinx/coroutines/experimental/CoroutineScope;Lkotlin/coroutines/experimental/Continuation;)Lkotlin/coroutines/experimental/Continuation; @18: invokespecial\n  Reason:\n    Type 'Test$scheduleTimeout$$inlined$schedule$1$lambda$1' (current frame, stack[3]) is not assignable to 'Test$scheduleTimeout$$inlined$schedule$1'\n  Current Frame:\n    bci: @18\n    flags: { }\n    locals: { 'Test$scheduleTimeout$$inlined$schedule$1$lambda$1', 'kotlinx/coroutines/experimental/CoroutineScope', 'kotlin/coroutines/experimental/Continuation' }\n    stack: { uninitialized 12, uninitialized 12, 'kotlin/coroutines/experimental/Continuation', 'Test$scheduleTimeout$$inlined$schedule$1$lambda$1' }\n  Bytecode:\n    0x0000000: 2b12 64b8 006a 2c12 6cb8 006a bb00 0259\n    0x0000010: 2c2a b700 6e4e 2d2b b500 3d2d 3a04 1904\n    0x0000020: b0                                     \n\n    at Test$scheduleTimeout$$inlined$schedule$1.run(Timer.kt:145)\n    at java.util.TimerThread.mainLoop(Timer.java:555)\n    at java.util.TimerThread.run(Timer.java:505)\n</code></pre>\n"}, {"tags": ["java", "scope", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 3, "last_activity_date": 1514739663, "creation_date": 1514739663, "answer_id": 48044334, "question_id": 48044302, "link": "https://stackoverflow.com/questions/48044302/why-doesnt-the-kotlin-print-statement-require-scope-clarification/48044334#48044334", "title": "Why doesn&#39;t the Kotlin print statement require scope clarification?", "body": "<p>Kotlin supports <a href=\"https://kotlinlang.org/docs/reference/functions.html#function-scope\" rel=\"nofollow noreferrer\">top level functions</a>, and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/println.html\" rel=\"nofollow noreferrer\"><code>println</code></a> is simply declared as one, you can see its source <a href=\"https://github.com/JetBrains/kotlin/blob/1.2.0/libraries/stdlib/src/kotlin/io/Console.kt#L71\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>These can be used without any qualifiers if the package they're in is imported, and the basic Kotlin packages are <a href=\"https://kotlinlang.org/docs/reference/packages.html#default-imports\" rel=\"nofollow noreferrer\">imported by default</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 118092, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": false, "score": 4, "last_activity_date": 1514749198, "last_edit_date": 1514749198, "creation_date": 1514739673, "answer_id": 48044335, "question_id": 48044302, "link": "https://stackoverflow.com/questions/48044302/why-doesnt-the-kotlin-print-statement-require-scope-clarification/48044335#48044335", "title": "Why doesn&#39;t the Kotlin print statement require scope clarification?", "body": "<p>A number of packages are imported by default in every Kotlin file. See <a href=\"https://kotlinlang.org/docs/reference/packages.html#default-imports\" rel=\"nofollow noreferrer\">Default Imports</a> in the Reference manual for a list of these packages.</p>\n\n<p>One of them is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/index.html\" rel=\"nofollow noreferrer\"><code>kotlin.io.*</code></a> which contains the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/println.html\" rel=\"nofollow noreferrer\"><code>println</code></a> function. Note that <code>*</code> imports all accessible contents. <code>public</code>, the default <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html#visibility-modifiers\" rel=\"nofollow noreferrer\">visibility modifier</a> for top level elements, is included with that import.</p>\n\n<p>You can corroborate this by either using the Kotlin REPL and entering:</p>\n\n<pre><code>&gt;&gt;&gt; kotlin.io.println(\"Hello\")\n</code></pre>\n\n<p>or putting it in a <code>.kts</code> file and executing it with <code>kotlinc -script filename</code>.</p>\n\n<p>Other functions, classes et cetera from the list of default imports can also be used in a similar way. </p>\n"}], "owner": {"reputation": 1433, "user_id": 3813188, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bassinator", "link": "https://stackoverflow.com/users/3813188/bassinator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "accepted_answer_id": 48044334, "answer_count": 2, "score": 2, "last_activity_date": 1514749272, "creation_date": 1514739457, "last_edit_date": 1514749272, "question_id": 48044302, "link": "https://stackoverflow.com/questions/48044302/why-doesnt-the-kotlin-print-statement-require-scope-clarification", "title": "Why doesn&#39;t the Kotlin print statement require scope clarification?", "body": "<p>This might be a stupid question, but I'm brand new to Kotlin.</p>\n\n<p>In Java, the typical print statement is:</p>\n\n<pre><code>System.out.println(\"Goodbye cruel world!\");\n</code></pre>\n\n<p>However, in Kotlin, we can just write:</p>\n\n<pre><code>println(\"Kotlin is weird but good\")\n</code></pre>\n\n<p>How does Kotlin get around the scope clarification here? It's not like <code>println</code> is a language construct in Kotlin (or is it?). Am I missing something obvious here? Is there some kind of implicit import statement happening here?</p>\n\n<p>Note that <code>println</code> is just an example here; there are many other similar instances in Kotlin.</p>\n"}, {"tags": ["maven", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 2886, "user_id": 2960034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2155e960e7c2119d24d00cffcfa03368?s=128&d=identicon&r=PG&f=1", "display_name": "y.bedrov", "link": "https://stackoverflow.com/users/2960034/y-bedrov"}, "edited": false, "score": 0, "creation_date": 1515161262, "post_id": 48044120, "comment_id": 83206394, "body": "Annotation processor is started on compile/build. Have you tried to run build after changing file? Does it work this way?"}, {"owner": {"reputation": 1661, "user_id": 1767722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uu0Mt.jpg?s=128&g=1", "display_name": "gclaussn", "link": "https://stackoverflow.com/users/1767722/gclaussn"}, "reply_to_user": {"reputation": 2886, "user_id": 2960034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2155e960e7c2119d24d00cffcfa03368?s=128&d=identicon&r=PG&f=1", "display_name": "y.bedrov", "link": "https://stackoverflow.com/users/2960034/y-bedrov"}, "edited": false, "score": 0, "creation_date": 1515165857, "post_id": 48044120, "comment_id": 83209140, "body": "When I delete the whole target folder or just META-INF folder under target/classes, a &quot;Build Module&quot; or &quot;Maven -&gt; Generate Sources and Update Folders&quot; works sometimes, but not reliable. If the generated file under META-INF already exists and I perform one of those actions, the file is not regenerated."}], "owner": {"reputation": 1661, "user_id": 1767722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uu0Mt.jpg?s=128&g=1", "display_name": "gclaussn", "link": "https://stackoverflow.com/users/1767722/gclaussn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 486, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1514816077, "creation_date": 1514737938, "last_edit_date": 1514816077, "question_id": 48044120, "link": "https://stackoverflow.com/questions/48044120/make-intellij-ide-run-the-kotlin-java-annotation-processing-when-changing-kotlin", "title": "Make Intellij IDE run the Kotlin/Java annotation processing when changing Kotlin source files", "body": "<p>Recently I have started using Kotlin v1.2 with Intellij IDEA v2017.3.</p>\n\n<p>I implemented an annotation processor in Kotlin, which writes a resource file under META-INF, when a class is annotated with the supported annotation type.</p>\n\n<p>I can see that the annotation processor is working with another Maven project, which is using the implementation as a dependency. If I run <code>mvn clean compile</code>, the file under META-INF is generated correctly in <strong>target/classes/META-INF</strong>.</p>\n\n<p>My problem is that Intellij does not start the annotation processor when a source file is changed. For example, if I rename the annotated Kotlin class. The resource file is not regenerated or updated. (I haven't seen the annotation processor working yet from Intellij...)</p>\n\n<p>I also enabled annotation processing and configured \"obtain processors from project classpath\" within the IDE like described <a href=\"https://www.jetbrains.com/help/idea/configuring-annotation-processing.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I imported the project as a Maven project here is my pom.xml - like I said: It is working when building with Maven:</p>\n\n<pre><code> &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n          xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n   &lt;groupId&gt;org.example&lt;/groupId&gt;\n   &lt;artifactId&gt;usage&lt;/artifactId&gt;\n   &lt;version&gt;1&lt;/version&gt;\n\n   &lt;properties&gt;\n     &lt;kotlin.version&gt;1.2.0&lt;/kotlin.version&gt;\n   &lt;/properties&gt;\n\n   &lt;build&gt;\n     &lt;sourceDirectory&gt;${project.basedir}/src/main/kotlin&lt;/sourceDirectory&gt;\n     &lt;testSourceDirectory&gt;${project.basedir}/src/test/kotlin&lt;/testSourceDirectory&gt;\n\n     &lt;plugins&gt;\n       &lt;plugin&gt;\n         &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n         &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n         &lt;version&gt;${kotlin.version}&lt;/version&gt;\n         &lt;configuration&gt;\n           &lt;jvmTarget&gt;1.8&lt;/jvmTarget&gt;\n         &lt;/configuration&gt;\n         &lt;executions&gt;\n           &lt;execution&gt;\n             &lt;id&gt;kapt&lt;/id&gt;\n             &lt;phase&gt;generate-sources&lt;/phase&gt;\n             &lt;goals&gt;\n               &lt;goal&gt;kapt&lt;/goal&gt;\n             &lt;/goals&gt;\n             &lt;configuration&gt;\n               &lt;sourceDirs&gt;\n                 &lt;sourceDir&gt;src/main/kotlin&lt;/sourceDir&gt;\n               &lt;/sourceDirs&gt;\n               &lt;annotationProcessors&gt;\n                 &lt;annotationProcessor&gt;org.example.MyProcessor&lt;/annotationProcessor&gt;\n               &lt;/annotationProcessors&gt;\n             &lt;/configuration&gt;\n           &lt;/execution&gt;\n           &lt;execution&gt;\n             &lt;id&gt;compile&lt;/id&gt;\n             &lt;phase&gt;compile&lt;/phase&gt;\n             &lt;goals&gt;\n               &lt;goal&gt;compile&lt;/goal&gt;\n             &lt;/goals&gt;\n           &lt;/execution&gt;\n           &lt;execution&gt;\n             &lt;id&gt;test-compile&lt;/id&gt;\n             &lt;phase&gt;test-compile&lt;/phase&gt;\n             &lt;goals&gt;\n               &lt;goal&gt;test-compile&lt;/goal&gt;\n             &lt;/goals&gt;\n           &lt;/execution&gt;\n         &lt;/executions&gt;\n       &lt;/plugin&gt;\n     &lt;/plugins&gt;\n   &lt;/build&gt;\n\n   &lt;dependencies&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n       &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n       &lt;version&gt;${kotlin.version}&lt;/version&gt;\n     &lt;/dependency&gt;\n\n     &lt;!-- Dependency containing the annotation processor --&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;org.example&lt;/groupId&gt;\n       &lt;artifactId&gt;processor&lt;/artifactId&gt;\n       &lt;version&gt;1&lt;/version&gt;\n     &lt;/dependency&gt;\n\n     &lt;!-- Test --&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;junit&lt;/groupId&gt;\n       &lt;artifactId&gt;junit&lt;/artifactId&gt;\n       &lt;version&gt;4.12&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n     &lt;/dependency&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n       &lt;artifactId&gt;kotlin-test&lt;/artifactId&gt;\n       &lt;version&gt;${kotlin.version}&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n     &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n &lt;/project&gt;\n</code></pre>\n"}, {"tags": ["android", "android-intent", "kotlin", "android-package-managers", "android-static-shortcuts"], "answers": [{"comments": [{"owner": {"reputation": 58, "user_id": 6460744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d485b71e5e9761dc0453d4b6067e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Marincic", "link": "https://stackoverflow.com/users/6460744/ivan-marincic"}, "edited": false, "score": 0, "creation_date": 1514736876, "post_id": 48043928, "comment_id": 83058926, "body": "Thank you very much"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 1, "last_activity_date": 1514736161, "creation_date": 1514736161, "answer_id": 48043928, "question_id": 48043640, "link": "https://stackoverflow.com/questions/48043640/android-start-static-app-shortcut/48043928#48043928", "title": "Android start static app shortcut", "body": "<p>Here's the code to list all available shortcuts and then launch whatever the first shortcut is (just as an example):</p>\n\n<pre><code>val launcherApps = context.getSystemService(Context.LAUNCHER_APPS_SERVICE) as LauncherApps\n\nval shortcutQuery = LauncherApps.ShortcutQuery()\n// Set these flags to match your use case, for static shortcuts only,\n// use FLAG_MATCH_MANIFEST on its own.\nshortcutQuery.setQueryFlags(LauncherApps.ShortcutQuery.FLAG_MATCH_DYNAMIC\n        or LauncherApps.ShortcutQuery.FLAG_MATCH_MANIFEST\n        or LauncherApps.ShortcutQuery.FLAG_MATCH_PINNED)\nshortcutQuery.setPackage(packageName)\n\nval shortcuts = try {\n    launcherApps.getShortcuts(shortcutQuery, Process.myUserHandle())\n} catch (e: SecurityException) {\n    // This exception will be thrown if your app is not the default launcher\n    Collections.emptyList&lt;ShortcutInfo&gt;()\n}\n\n// Lists all shortcuts from the query\nshortcuts.forEach {\n    Log.d(TAG, \"Shortcut found ${it.`package`}, ${it.id}\")\n}\n\n// Starts the first shortcut, as an example (this of course is not safe like this, \n// it will crash if the list is empty, etc).\nval shortcut = shortcuts[0]\nlauncherApps.startShortcut(shortcut.`package`, shortcut.id, null, null, Process.myUserHandle())\n</code></pre>\n\n<p>This code assumes that you have a variable named <code>context</code> of type <a href=\"https://developer.android.com/reference/android/content/Context.html\" rel=\"nofollow noreferrer\"><code>Context</code></a> and a variable named <code>packageName</code> of type <code>String</code> from somewhere.</p>\n\n<hr>\n\n<p>Credits: This is all based on Quan Vu's work on this topic, his article <a href=\"https://android.jlelse.eu/nhandling-shortcuts-when-building-an-android-launcher-5908d0bb50d2\" rel=\"nofollow noreferrer\">here</a> and the corresponding repository <a href=\"https://github.com/nongdenchet/Shortcuts\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 58, "user_id": 6460744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04d485b71e5e9761dc0453d4b6067e3f?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Marincic", "link": "https://stackoverflow.com/users/6460744/ivan-marincic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "accepted_answer_id": 48043928, "answer_count": 1, "score": 0, "last_activity_date": 1514736161, "creation_date": 1514733737, "question_id": 48043640, "link": "https://stackoverflow.com/questions/48043640/android-start-static-app-shortcut", "title": "Android start static app shortcut", "body": "<p>Past few days I have been trying to figure out how to start app shortcuts added in Android API 25 and I have been somewhat successful. Starting some shortcuts like Google Play Music's work without problem I'm guessing because these shortcuts are starting activities with <em>action.MAIN</em> and <em>category.LAUNCHER</em> or exported, but other activities throw <em>\"java.lang.SecurityException: Permission Denial: starting Intent\"</em> which seems reasonable as well. This seems dooable since apps like Pixel Launcher, Sesame Shortcuts etc. can do this, there must be some special intent flag or something. I even tried catching shortcut intent inside my app and replicating it but no success</p>\n\n<p>Here is example of how I do this for Google Chrome's \"New Tab\" shortcut:</p>\n\n<pre><code>val componentName = ComponentName(\"com.android.chrome\", \"org.chromium.chrome.browser.LauncherShortcutActivity\")\nval intent = Intent(action)\nintent.component = componentName\nintent.addFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT or Intent.FLAG_ACTIVITY_CLEAR_TASK or Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_TASK_ON_HOME)\nstartActivity(intent)\n</code></pre>\n\n<p>I got these values from activityInfo metaData which can be fetched with <em>PackageManager</em></p>\n"}, {"tags": ["http", "kotlin", "ktor"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 4819099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UKrZi.jpg?s=128&g=1", "display_name": "Aharon Levine", "link": "https://stackoverflow.com/users/4819099/aharon-levine"}, "is_accepted": false, "score": 2, "last_activity_date": 1514728748, "creation_date": 1514728748, "answer_id": 48043066, "question_id": 48040613, "link": "https://stackoverflow.com/questions/48040613/testing-post-requests-in-ktor/48043066#48043066", "title": "Testing Post requests in Ktor", "body": "<p>Ok dumb mistake, I'll post it here in case this saves somebody else from wasting time ;)\nThe unit test was actually catching a real problem (thats what they're for I guess)\nIn my routing I was using:</p>\n\n<pre><code>install(Routing) {\n        post(\"/api/v2/processing\") {\n            val params = call.parameters\n            ...\n        }\n}\n</code></pre>\n\n<p>However that only works for 'get' params. Post params need:</p>\n\n<pre><code>install(Routing) {\n        post(\"/api/v2/processing\") {\n            val params = call.receive&lt;ValuesMap&gt;()\n            ...\n        }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1515416869, "creation_date": 1515416869, "answer_id": 48150958, "question_id": 48040613, "link": "https://stackoverflow.com/questions/48040613/testing-post-requests-in-ktor/48150958#48150958", "title": "Testing Post requests in Ktor", "body": "<p>call.parameters also works for post routes. </p>\n\n<pre><code>get(\"api/{country}\") {\n    val country = call.parameters[\"country\"]!!\n    ...\n}\n</code></pre>\n\n<p>This will give you whatever is passed in the uri after api. </p>\n\n<p>call.receive is for the body of a request. </p>\n"}, {"tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 1, "last_activity_date": 1561976199, "creation_date": 1561976199, "answer_id": 56833888, "question_id": 48040613, "link": "https://stackoverflow.com/questions/48040613/testing-post-requests-in-ktor/56833888#56833888", "title": "Testing Post requests in Ktor", "body": "<p>For those reading it nowadays, back in 2018 <code>receiveParameters()</code> method was added for such cases. You can use it as:</p>\n\n<pre><code>install(Routing) {\n        post(\"/api/v2/processing\") {\n            val params = call.receiveParameters()\n            println(params[\"param1\"]) // Prints cool7\n            ...\n        }\n}\n</code></pre>\n\n<p>Also it's worth noting that request construction in the example could be further improved nowadays:</p>\n\n<pre><code>// Use provided consts, not strings\naddHeader(HttpHeaders.ContentType, ContentType.Application.FormUrlEncoded.toString())\n// Convenient method instead of constructing string requests \nsetBody(listOf(\"param1\" to \"cool7\", \"param2\" to \"awesome4\").formUrlEncode())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 819, "user_id": 7355232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BIr7J.jpg?s=128&g=1", "display_name": "jpthesolver2", "link": "https://stackoverflow.com/users/7355232/jpthesolver2"}, "is_accepted": false, "score": 0, "last_activity_date": 1602118301, "creation_date": 1602118301, "answer_id": 64254278, "question_id": 48040613, "link": "https://stackoverflow.com/questions/48040613/testing-post-requests-in-ktor/64254278#64254278", "title": "Testing Post requests in Ktor", "body": "<p>For those using the alternate <code>.apply</code> to verify results, you can prepend the body before the test call</p>\n<pre><code>withTestApplication({ module(testing = true) }) {\n            handleRequest(HttpMethod.Post, &quot;/&quot;){\n                setBody(...)\n            }.apply {\n                assertEquals(HttpStatusCode.OK, response.status())\n                assertEquals(&quot;HELLO WORLD!&quot;, response.content)\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 4819099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UKrZi.jpg?s=128&g=1", "display_name": "Aharon Levine", "link": "https://stackoverflow.com/users/4819099/aharon-levine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2891, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1602118301, "creation_date": 1514703299, "question_id": 48040613, "link": "https://stackoverflow.com/questions/48040613/testing-post-requests-in-ktor", "title": "Testing Post requests in Ktor", "body": "<p>Ktor (kotlin web framework) has an awesome testable mode where http requests can be wrapped in unit tests. They give a nice example of how to test a GET endpoint <a href=\"https://github.com/ktorio/ktor/blob/master/ktor-samples/ktor-samples-testable/test/io/ktor/samples/testable/tests/ApplicationTest.kt\" rel=\"nofollow noreferrer\">here</a>,\nhowever I'm having trouble with an http POST. </p>\n\n<p>I tried this but the post params don't seem to be added to the request:</p>\n\n<pre><code>    @Test\nfun testSomePostThing() = withTestApplication(Application::myModule) {\n    with(handleRequest(HttpMethod.Post, \"/api/v2/processing\") {\n        addHeader(\"content-type\", \"application/x-www-form-urlencoded\")\n        addHeader(\"Accept\", \"application/json\")\n        body = \"param1=cool7&amp;param2=awesome4\"\n    }) {\n        assertEquals(HttpStatusCode.OK, response.status())\n        val resp = mapper.readValue&lt;TriggerResponse&gt;(response.content ?: \"\")\n        assertEquals(TriggerResponse(\"cool7\", \"awesome4\", true), resp)\n    }\n}\n</code></pre>\n\n<p>Anyone have any ideas?</p>\n"}, {"tags": ["java", "android", "kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 286, "user_id": 4312282, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9994fe4053b571ff50516bac9582e6f3?s=128&d=identicon&r=PG&f=1", "display_name": "mangkool", "link": "https://stackoverflow.com/users/4312282/mangkool"}, "edited": false, "score": 0, "creation_date": 1579337881, "post_id": 48041605, "comment_id": 105738968, "body": "also note that the annotation should be in that order: MustBeDocumented, Scope &amp; Retention(AnnotationRetention.RUNTIME) other than that order the scoping won&#39;t work"}], "tags": [], "owner": {"reputation": 2041, "user_id": 2686502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef5ceabeb502f0e33b63ea337f618649?s=128&d=identicon&r=PG&f=1", "display_name": "jayeshsolanki93", "link": "https://stackoverflow.com/users/2686502/jayeshsolanki93"}, "is_accepted": true, "score": 34, "last_activity_date": 1514715103, "creation_date": 1514715103, "answer_id": 48041605, "question_id": 48040243, "link": "https://stackoverflow.com/questions/48040243/create-custom-dagger-2-scope-with-kotlin/48041605#48041605", "title": "Create Custom Dagger 2 Scope with Kotlin", "body": "<p>The <code>Retention</code> annotation class which you might have used is from the Kotlin's library (from the package <code>kotlin.annotation</code>).</p>\n\n<p>It expects a property of the enum type <code>AnnotationRetention</code>. So, you can do something like this:</p>\n\n<pre><code>@MustBeDocumented\n@Scope\n@Retention(AnnotationRetention.RUNTIME)\nannotation class CustomScope\n</code></pre>\n\n<p>Btw, if you look at the <code>Annotations.kt</code> file, you will see that that the <code>Retention</code> annotation will take the default property <code>AnnotationRetention.RUNTIME</code> when you don't pass anything to it.</p>\n\n<p>So, just <code>@Retention</code> annotation will do too.</p>\n"}], "owner": {"reputation": 413, "user_id": 4904299, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/041449e7de6fde29b6f978f7c149f68d?s=128&d=identicon&r=PG", "display_name": "Abba", "link": "https://stackoverflow.com/users/4904299/abba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3613, "favorite_count": 1, "accepted_answer_id": 48041605, "answer_count": 1, "score": 12, "last_activity_date": 1514715103, "creation_date": 1514697810, "question_id": 48040243, "link": "https://stackoverflow.com/questions/48040243/create-custom-dagger-2-scope-with-kotlin", "title": "Create Custom Dagger 2 Scope with Kotlin", "body": "<p>I'm trying to convert a Java code into Kotlin for custom dagger scope creation.</p>\n\n<p>Here is Java code:</p>\n\n<pre><code>@Documented\n@Scope\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface CustomScope {\n}\n</code></pre>\n\n<p>Once converted into kotlin here is the result </p>\n\n<pre><code>@Scope\n@Documented\n@Retention(RetentionPolicy.RUNTIME) annotation class CustomScope \n</code></pre>\n\n<p>I have a type mismatch with <code>@Retention(RetentionPolicy.RUNTIME)</code>.I have the following error message :Required Type is AnnotationRetention but RetentionPolicy type was found.</p>\n\n<p>Also @interface seems to have been replaced.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1514725538, "post_id": 48039855, "comment_id": 83056008, "body": "IMO the second version is substantially less explicit about its intent.  It&#39;s broadly equivalent to the frowned-upon <code>cond ? whatever : methodWithSideEffects();</code> pattern in Java."}, {"owner": {"reputation": 2004, "user_id": 53923, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c611f709789bc1cb2b3b37a0ff72f4c3?s=128&d=identicon&r=PG", "display_name": "hudsonb", "link": "https://stackoverflow.com/users/53923/hudsonb"}, "edited": false, "score": 1, "creation_date": 1514820475, "post_id": 48039855, "comment_id": 83073438, "body": "I&#39;d use <code>bar?.let { }</code> over <code>bar ?: run { }</code>"}, {"owner": {"reputation": 577, "user_id": 410579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb1e2716f8a9b4aff5bd3458962ae2a?s=128&d=identicon&r=PG", "display_name": "kocka", "link": "https://stackoverflow.com/users/410579/kocka"}, "edited": false, "score": 0, "creation_date": 1514821711, "post_id": 48039855, "comment_id": 83073716, "body": "You can do the second, but other than adding some cool cowboy-style to your code, does it have any advantage?"}, {"owner": {"reputation": 21, "user_id": 8453594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a02a28b6c03dbfcc55413a4c0fbdd8?s=128&d=identicon&r=PG&f=1", "display_name": "umbum", "link": "https://stackoverflow.com/users/8453594/umbum"}, "reply_to_user": {"reputation": 2004, "user_id": 53923, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c611f709789bc1cb2b3b37a0ff72f4c3?s=128&d=identicon&r=PG", "display_name": "hudsonb", "link": "https://stackoverflow.com/users/53923/hudsonb"}, "edited": false, "score": 0, "creation_date": 1514856109, "post_id": 48039855, "comment_id": 83081517, "body": "@hudsonb Thanks for comment. But I don&#39;t think <code>bar?.let { }</code> is equivalent to <code>bar ?: run { }</code>. the former wouldn&#39;t be executed <code>if (bar == null)</code>."}, {"owner": {"reputation": 21, "user_id": 8453594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a02a28b6c03dbfcc55413a4c0fbdd8?s=128&d=identicon&r=PG&f=1", "display_name": "umbum", "link": "https://stackoverflow.com/users/8453594/umbum"}, "reply_to_user": {"reputation": 577, "user_id": 410579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb1e2716f8a9b4aff5bd3458962ae2a?s=128&d=identicon&r=PG", "display_name": "kocka", "link": "https://stackoverflow.com/users/410579/kocka"}, "edited": false, "score": 0, "creation_date": 1514856487, "post_id": 48039855, "comment_id": 83081579, "body": "@kocka thx. I saw the first doesn&#39;t work with mutating property but the second do. I want to know that is really true. That is why I ask this question."}], "answers": [{"tags": [], "owner": {"reputation": 2004, "user_id": 53923, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c611f709789bc1cb2b3b37a0ff72f4c3?s=128&d=identicon&r=PG", "display_name": "hudsonb", "link": "https://stackoverflow.com/users/53923/hudsonb"}, "is_accepted": true, "score": 0, "last_activity_date": 1514994096, "last_edit_date": 1514994096, "creation_date": 1514993553, "answer_id": 48080437, "question_id": 48039855, "link": "https://stackoverflow.com/questions/48039855/kotlin-if-bar-null-vs-bar-run/48080437#48080437", "title": "kotlin if (bar == null) vs. bar ?: run", "body": "<blockquote>\n  <p>which one is best practice?</p>\n</blockquote>\n\n<p>As pointed out by Oliver, the intent is most clear when using <code>if(bar == null)</code>. This is also the approach used in official Kotlin documentation under <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#checking-for-null-in-conditions\" rel=\"nofollow noreferrer\">Checking for null conditions</a>.</p>\n\n<p>Though I don't suggest it in this case, Kotlin allows you to do neat things like this:</p>\n\n<pre><code>inline fun whenNull(input: Any?, block: () -&gt; Unit) {\n    if(input == null) block()\n}\n</code></pre>\n\n<p>Which would allow you to rewrite <code>if(bar == null)</code> as:</p>\n\n<pre><code>whenNull(bar) {\n    // Do something\n}\n</code></pre>\n\n<blockquote>\n  <p>what is mutating property?</p>\n</blockquote>\n\n<p>It's a variable whose value can be changed. Basically, the variable is declared using <code>var</code> and not <code>val</code>.</p>\n\n<blockquote>\n  <p>first one dosen't work with mutating property?</p>\n</blockquote>\n\n<p>This isn't really relevant to your example because you are checking <code>if(bar == null)</code>.</p>\n\n<p>What you are referring to is relevant if you were checking <code>if(bar != null)</code>. In this case, if <code>bar</code> is a <code>var</code>, Kotlin can't smart cast it a non-null type since within the body of the <code>if</code> the value of <code>bar</code> could change at any time. This means within the body of the <code>if</code> you'd have to make safe calls on <code>bar</code> (<code>?.</code>), or use <code>!!</code>.</p>\n\n<p>You can work around this by doing the following:</p>\n\n<pre><code>val b = bar\nif(b != null)\n{\n  // b has been smart cast to a non-null type\n}\n</code></pre>\n\n<p>Kotlin is able to smart cast <code>b</code> to a non-null type within the body of the <code>if</code> because it is non-mutable (<code>val</code>).</p>\n\n<p>Alternatively, you can use a safe call and <code>let</code>, which calls the specified function/block with <code>this</code> value as its argument and returns its result. Given the safe call, <code>this</code> is of course non-null.</p>\n\n<pre><code>bar?.let {\n   // this is bar (non-null)\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8453594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a02a28b6c03dbfcc55413a4c0fbdd8?s=128&d=identicon&r=PG&f=1", "display_name": "umbum", "link": "https://stackoverflow.com/users/8453594/umbum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1514994447, "accepted_answer_id": 48080437, "answer_count": 1, "score": -2, "last_activity_date": 1514994096, "creation_date": 1514692598, "question_id": 48039855, "link": "https://stackoverflow.com/questions/48039855/kotlin-if-bar-null-vs-bar-run", "closed_reason": "Needs details or clarity", "title": "kotlin if (bar == null) vs. bar ?: run", "body": "<p>Here is sample</p>\n\n<pre><code>if (bar == null) {\n    // do something\n}\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>bar ?: run {\n    // do something. \n}\n</code></pre>\n\n<ol>\n<li>which one is best practice?  </li>\n<li>what is mutating property?  </li>\n<li>first one dosen't work with mutating property?  </li>\n</ol>\n"}, {"tags": ["android", "android-intent", "kotlin", "android-sharing"], "answers": [{"tags": [], "owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "is_accepted": false, "score": 1, "last_activity_date": 1514690083, "creation_date": 1514690083, "answer_id": 48039671, "question_id": 48039651, "link": "https://stackoverflow.com/questions/48039651/whats-app-multiline-text-share-intent/48039671#48039671", "title": "What&#39;s App multiline text share intent", "body": "<p>The reason that only the last line appears is that a single intent can only have one value for a key.  So each time you call putExtra(EXTRA_TEXT,foo), you're overwriting the previous one.  If you want to send multiple lines, send it as a single string with '\\n' characters.</p>\n\n<p>As for sending html-  you'd need to tell it that you're sending html.  You're telling it you're sending plain text.  Change the mime type to text/html if you're sending html.  (Note:  I have no idea if whatsapp supports html or not, but that's the way you'd send html to any app that does support it).</p>\n"}, {"comments": [{"owner": {"reputation": 2765, "user_id": 8893667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7a4429c16c124e321b31d72f41764131?s=128&d=identicon&r=PG&f=1", "display_name": "Kotlinboy", "link": "https://stackoverflow.com/users/8893667/kotlinboy"}, "edited": false, "score": 0, "creation_date": 1514692395, "post_id": 48039695, "comment_id": 83050098, "body": "Thanks! This works. I decided I will ask the HTML part in a separate question."}], "tags": [], "owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "is_accepted": true, "score": 4, "last_activity_date": 1514690235, "creation_date": 1514690235, "answer_id": 48039695, "question_id": 48039651, "link": "https://stackoverflow.com/questions/48039651/whats-app-multiline-text-share-intent/48039695#48039695", "title": "What&#39;s App multiline text share intent", "body": "<p>When you call <code>putExtra(key, value)</code>, any value previous put under the same <code>key</code> gets wiped out. Try putting a single string that contains all the text you want:</p>\n\n<pre><code>sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT,\n    \"Found this cool deal! Check it out.\\n\" +\n    TITLE + \"\\n\" +\n    \"MRP : $PRICE\\n\" +\n    \"DEAL PRICE : $DEAL_PRICE\");\n</code></pre>\n\n<p>As for the HTML content, you'll need to show us the code you used. However, you probably don't want to use <code>fromHtml()</code>; that converts HTML to styled text, which I suspect is not what WhatsApp expects to receive. Try just sending the raw HTML with the correct MIME type.</p>\n"}, {"tags": [], "owner": {"reputation": 1057, "user_id": 6682721, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1258515337506411/picture?type=large", "display_name": "Tony Merritt", "link": "https://stackoverflow.com/users/6682721/tony-merritt"}, "is_accepted": false, "score": 0, "last_activity_date": 1547498308, "creation_date": 1547498308, "answer_id": 54188835, "question_id": 48039651, "link": "https://stackoverflow.com/questions/48039651/whats-app-multiline-text-share-intent/54188835#54188835", "title": "What&#39;s App multiline text share intent", "body": "<p>In Kotlin you can use tripple quote martks for multilined text, I'm not sure if you can in Java.</p>\n\n<pre><code>val moreStuff = \"Text or Numbers or arrays\"\n var myText = \"\"\"\n              line 1 of the text\n\n              line 2 of the text\n              $moreStuff\n              \"\"\"\n</code></pre>\n\n<p>It will format it the way you type it </p>\n\n<pre><code>var myText = \"\"\"\n    Found this cool deal! Check it out.\n    $TITLE\n     MRP : $PRICE\n     DEAL PRICE : $DEAL_PRICE)\"\"\"\n</code></pre>\n"}], "owner": {"reputation": 2765, "user_id": 8893667, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7a4429c16c124e321b31d72f41764131?s=128&d=identicon&r=PG&f=1", "display_name": "Kotlinboy", "link": "https://stackoverflow.com/users/8893667/kotlinboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1032, "favorite_count": 0, "accepted_answer_id": 48039695, "answer_count": 3, "score": 1, "last_activity_date": 1547498308, "creation_date": 1514689760, "last_edit_date": 1514692322, "question_id": 48039651, "link": "https://stackoverflow.com/questions/48039651/whats-app-multiline-text-share-intent", "title": "What&#39;s App multiline text share intent", "body": "<p>I tried to share a multi-line text using the following code, but only the last line appears.\n<code>\n val sharingIntent = Intent(Intent.ACTION_SEND)\n            sharingIntent.setType(\"text/plain\")\n            sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, \"Found this cool deal! Check it out.\")\n            sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, TITLE)\n            sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, \"MRP : $PRICE\")\n            sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, \"Deal Price : $DEAL_PRICE\")\n            startActivity(Intent.createChooser(sharingIntent, \"Share using\"))\n</code></p>\n"}, {"tags": ["libgdx", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "is_accepted": true, "score": 0, "last_activity_date": 1514700604, "creation_date": 1514700604, "answer_id": 48040441, "question_id": 48039139, "link": "https://stackoverflow.com/questions/48039139/libgdx-with-kotlin-error-org-jetbrains-kotlin-kapt-idea-kaptmodelbuilderservice/48040441#48040441", "title": "libGDX with Kotlin error &quot;org.jetbrains.kotlin.kapt.idea.KaptModelBuilderService&quot;", "body": "<p>Error due to Version mismatch between <code>Kotlin plugin</code> and <code>Gradle</code>.</p>\n\n<p>Here is the similar <a href=\"https://youtrack.jetbrains.com/issue/KT-20967\" rel=\"nofollow noreferrer\">issue</a> tracked at JetBrains issue tracker, also there is <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000666624-Cannot-sync-Gradle-Kotlin-project-with-2017-3-Public-Preview\" rel=\"nofollow noreferrer\">post</a> for the same issue.</p>\n\n<hr>\n\n<p>Try to disable Kotlin plugin and update to latest version.</p>\n\n<p>I've no issue while using Kotlin in Android Studio 3.0.1.</p>\n\n<p>I'm using :</p>\n\n<ul>\n<li>Gradle version <code>3.3</code></li>\n<li>Kotlin plugin version <code>1.2.10-release-studio3.0-1</code></li>\n<li>Kotlin version <code>1.2.10</code></li>\n<li>Android-gradle-plugin version <code>2.3.3</code></li>\n<li>LibGDX <code>1.9.8</code></li>\n</ul>\n"}], "owner": {"reputation": 85, "user_id": 6288630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d212e704fcbbcde80538a2a505c2502c?s=128&d=identicon&r=PG&f=1", "display_name": "MikakoTabe", "link": "https://stackoverflow.com/users/6288630/mikakotabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 48040441, "answer_count": 1, "score": 1, "last_activity_date": 1514700604, "creation_date": 1514682065, "question_id": 48039139, "link": "https://stackoverflow.com/questions/48039139/libgdx-with-kotlin-error-org-jetbrains-kotlin-kapt-idea-kaptmodelbuilderservice", "title": "libGDX with Kotlin error &quot;org.jetbrains.kotlin.kapt.idea.KaptModelBuilderService&quot;", "body": "<p>I'm trying to create libGDX with Kotlin option. After creating a project with libGDX, opening it with Android Studio. IDE give the error below:</p>\n\n<blockquote>\n  <p>Error:Could not initialize class \n  org.jetbrains.kotlin.kapt.idea.KaptModelBuilderService</p>\n</blockquote>\n\n<p>What wrong with my project? Thanks in advance.</p>\n"}, {"tags": ["android", "kotlin", "settings", "preferences"], "comments": [{"owner": {"reputation": 3043, "user_id": 5885018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RSTgu.jpg?s=128&g=1", "display_name": "statosdotcom", "link": "https://stackoverflow.com/users/5885018/statosdotcom"}, "edited": false, "score": 0, "creation_date": 1514677893, "post_id": 48038790, "comment_id": 83048053, "body": "Excuse me, what do you mean by &quot;there is no option available&quot;? You have to modify your manifest and include this definition, no?"}, {"owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "reply_to_user": {"reputation": 3043, "user_id": 5885018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RSTgu.jpg?s=128&g=1", "display_name": "statosdotcom", "link": "https://stackoverflow.com/users/5885018/statosdotcom"}, "edited": false, "score": 0, "creation_date": 1514728052, "post_id": 48038790, "comment_id": 83056680, "body": "I mean Android Studio does not give me the option to select <code>SettingsActivity</code> (possibly because it is no Activity actually)"}], "answers": [{"comments": [{"owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 0, "creation_date": 1514728013, "post_id": 48038935, "comment_id": 83056666, "body": "Thanks for your answer - but let me ask that  question: How do I even use a <code>DialogPreference</code> if it is not an <code>Activity</code>?"}, {"owner": {"reputation": 854, "user_id": 7569106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e05efcb296537d131800e9d7b31191?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Embaby", "link": "https://stackoverflow.com/users/7569106/mohamed-embaby"}, "reply_to_user": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 1, "creation_date": 1514729077, "post_id": 48038935, "comment_id": 83056907, "body": "make a custom you extends DialogPreference to a new class only and use this class in ur xml preference layout.. this is a good tutorial to do it  [link][<a href=\"http://mysoftdevs.blogspot.com.eg/2011/12/android-how-to-create-dialogpreference.html]\" rel=\"nofollow noreferrer\">mysoftdevs.blogspot.com.eg/2011/12/&hellip;</a>"}, {"owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 0, "creation_date": 1514730433, "post_id": 48038935, "comment_id": 83057280, "body": "But what do I do with my <code>preference.xml</code> now? How can I use / display it?"}, {"owner": {"reputation": 854, "user_id": 7569106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e05efcb296537d131800e9d7b31191?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Embaby", "link": "https://stackoverflow.com/users/7569106/mohamed-embaby"}, "reply_to_user": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 0, "creation_date": 1514730615, "post_id": 48038935, "comment_id": 83057332, "body": "* <a href=\"http://mysoftdevs.blogspot.com.eg/2011/12/android-how-to-create-dialogpreference.html\" rel=\"nofollow noreferrer\">mysoftdevs.blogspot.com.eg/2011/12/&hellip;</a>"}, {"owner": {"reputation": 854, "user_id": 7569106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e05efcb296537d131800e9d7b31191?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Embaby", "link": "https://stackoverflow.com/users/7569106/mohamed-embaby"}, "reply_to_user": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 0, "creation_date": 1514730618, "post_id": 48038935, "comment_id": 83057334, "body": "&lt;com.example.CustomDialogClass android:summary=&quot;pin dialog summary&quot; android:title=&quot;pin dialog title&quot; /&gt;"}, {"owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 0, "creation_date": 1514730754, "post_id": 48038935, "comment_id": 83057374, "body": "But how is this <code>preference.xml</code> displayed? I don&#39;t have an Activity at the moment which shows this <code>.xml</code>! If I click on <code>Settings</code> in my app I want to see my custom DialogPreference - how do I do that?"}, {"owner": {"reputation": 854, "user_id": 7569106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e05efcb296537d131800e9d7b31191?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Embaby", "link": "https://stackoverflow.com/users/7569106/mohamed-embaby"}, "reply_to_user": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 0, "creation_date": 1514731371, "post_id": 48038935, "comment_id": 83057546, "body": "extends PreferenceFragment and then add addPreferencesFromResource(R.xml.preference); in onCreate"}, {"owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 0, "creation_date": 1514732125, "post_id": 48038935, "comment_id": 83057719, "body": "So I have to create a new Activity?"}, {"owner": {"reputation": 854, "user_id": 7569106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e05efcb296537d131800e9d7b31191?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Embaby", "link": "https://stackoverflow.com/users/7569106/mohamed-embaby"}, "reply_to_user": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 1, "creation_date": 1514732569, "post_id": 48038935, "comment_id": 83057838, "body": "<code>PreferenceFragment</code> is not a sublcass of <code>Activity</code> and not treated as activity, so make class extends <code>PreferenceFragment</code> and add the <code>preference.xml</code> in <code>onCreate</code> .... make another new class the extends <code>DialogPreference</code> and use this class in  <code>preference.xml</code>"}], "tags": [], "owner": {"reputation": 854, "user_id": 7569106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e05efcb296537d131800e9d7b31191?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Embaby", "link": "https://stackoverflow.com/users/7569106/mohamed-embaby"}, "is_accepted": false, "score": 1, "last_activity_date": 1514678986, "creation_date": 1514678986, "answer_id": 48038935, "question_id": 48038790, "link": "https://stackoverflow.com/questions/48038790/android-how-to-launch-custom-dialogpreference-from-mainactivity/48038935#48038935", "title": "Android - How to launch custom DialogPreference from MainActivity?", "body": "<p>Your <code>SettingsActivity</code> extendes <code>DialogPreference</code>. <code>DialogPreference</code> is not recognized as activity and can't be used or defined in manifest as activity because it's not subclasses of the <code>Activity</code> class\nYou can use <code>Activity</code> - <code>AppCompatActivity</code> -<code>ActionBarActivity</code> - <code>FragmentActivity</code> or any subclass of <code>Activity.class</code></p>\n"}], "owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1514678986, "creation_date": 1514676949, "question_id": 48038790, "link": "https://stackoverflow.com/questions/48038790/android-how-to-launch-custom-dialogpreference-from-mainactivity", "title": "Android - How to launch custom DialogPreference from MainActivity?", "body": "<p>I would like to use a <code>DialogPreference</code> as my Settings Menu (the three dots at the upper right at the screen of an App). This is my current approach:</p>\n\n<pre><code>class SettingsActivity : DialogPreference{\n    constructor(context : Context, attrs : AttributeSet) : super(context,attrs){\n        isPersistent = false\n    }\n    override fun onBindDialogView(view: View?) {\n        super.onBindDialogView(view)\n        (context as Activity).fragmentManager.findFragmentById(R.xml.preferences)\n    }\n    override fun onDialogClosed(positiveResult: Boolean) {\n        super.onDialogClosed(positiveResult)\n    }\n}\n</code></pre>\n\n<p>I am actually quite confused now, because I read some tutorials about how to create these settings menus. My first approach was a <code>PreferenceActivity</code> which uses a <code>PreferenceFragment</code>:</p>\n\n<pre><code>class SettingsFragment : PreferenceFragment {\n    constructor() : super()\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        addPreferencesFromResource(R.xml.preferences)\n    }\n}\n</code></pre>\n\n<p>I don't know - do I have to use this in the case of a DialogPreference too? My <code>preferences.xml</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;PreferenceScreen\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;com.test.view.DialogExPreference\n        android:title=\"Title\"\n        android:dialogMessage=\"Dialog Message\"\n        android:negativeButtonText=\"test\"/&gt;\n&lt;/PreferenceScreen&gt;\n</code></pre>\n\n<p>I try to start my custom DialogPreference like this:</p>\n\n<pre><code>override fun onOptionsItemSelected(item: MenuItem): Boolean {\n    return when (item.itemId) {\n        R.id.action_settings -&gt; {\n            var i = Intent(this,SettingsActivity::class.java)\n            startActivity(i)\n            return true\n        }\n        else -&gt; super.onOptionsItemSelected(item)\n    }\n}\n</code></pre>\n\n<p>But I get this error:</p>\n\n<pre><code>android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.standardbenutzer.integrate/com.example.standardbenutzer.integrate.SettingsActivity}; have you declared this activity in your AndroidManifest.xml?\n</code></pre>\n\n<p>But if I try to add it to my <code>AndroidManifest.xml</code> - there is no option available for <code>android:name=\".SettingsActivity\"</code> - why is that?</p>\n"}, {"tags": ["android", "arrays", "arraylist", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1514673387, "post_id": 48038298, "comment_id": 83047227, "body": "MutableList is not an ArrayList, so you can&#39;t initialize something declared as a MutableList as an ArrayList"}, {"owner": {"reputation": 3, "user_id": 9157108, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9YRT4Uf4NsU/AAAAAAAAAAI/AAAAAAAAFYU/ZWXJZ9Z4Qvc/photo.jpg?sz=128", "display_name": "Bram", "link": "https://stackoverflow.com/users/9157108/bram"}, "edited": false, "score": 1, "creation_date": 1514674284, "post_id": 48038298, "comment_id": 83047402, "body": "Ok thanks a lot for the quick responds!! This helps me understand it much better, thanks!"}, {"owner": {"reputation": 1371, "user_id": 7263373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a7d9040d19161c5bc3e85fc9cc61935?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Bhatia", "link": "https://stackoverflow.com/users/7263373/rohan-bhatia"}, "reply_to_user": {"reputation": 3, "user_id": 9157108, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9YRT4Uf4NsU/AAAAAAAAAAI/AAAAAAAAFYU/ZWXJZ9Z4Qvc/photo.jpg?sz=128", "display_name": "Bram", "link": "https://stackoverflow.com/users/9157108/bram"}, "edited": false, "score": 0, "creation_date": 1514711277, "post_id": 48038298, "comment_id": 83052910, "body": "@Bram Mark an answer as accepted if it solves your problem."}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 2, "last_activity_date": 1514673811, "last_edit_date": 1514673811, "creation_date": 1514671707, "answer_id": 48038298, "question_id": 48038222, "link": "https://stackoverflow.com/questions/48038222/i-cant-initialize-my-array-mutablelist-within-a-class-in-android/48038298#48038298", "title": "I can&#39;t initialize my array (MutableList) within a class in Android", "body": "<p>First of all, you could make use of standard lib functions for creating your lists. The following is type safe whereas yours isn\u2019t because the <code>ArrayList</code> did not specify its type parameter.</p>\n\n<pre><code>val tafels: MutableList&lt;MutableList&lt;Int&gt;&gt; = mutableListOf(mutableListOf(2, 2, 4))\n</code></pre>\n\n<p>You're trying to invoke code, here adding an element to list, in the class body. This does not work. Wrap it into an <code>init</code> block or add it to the property declaration:</p>\n\n<pre><code>class TafelsSommen() {\n    val tafels: MutableList&lt;MutableList&lt;Int&gt;&gt; = mutableListOf(mutableListOf())\n\n    init {\n        tafels.add(mutableListOf(2, 2, 4))\n    }\n}\n</code></pre>\n\n<p>Again, <a href=\"https://kotlinlang.org/docs/reference/classes.html#class-members\" rel=\"nofollow noreferrer\">here\u2019s</a> how a class can be structured:</p>\n\n<p>\u201cClasses can contain\u201d:</p>\n\n<ul>\n<li>Constructors and initializer blocks</li>\n<li>Functions</li>\n<li>Properties</li>\n<li>Nested and Inner Classes</li>\n<li>Object Declarations</li>\n</ul>\n\n<p>No statement like yours allowed.</p>\n"}], "owner": {"reputation": 3, "user_id": 9157108, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9YRT4Uf4NsU/AAAAAAAAAAI/AAAAAAAAFYU/ZWXJZ9Z4Qvc/photo.jpg?sz=128", "display_name": "Bram", "link": "https://stackoverflow.com/users/9157108/bram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "accepted_answer_id": 48038298, "answer_count": 1, "score": 0, "last_activity_date": 1514674561, "creation_date": 1514671035, "last_edit_date": 1514674561, "question_id": 48038222, "link": "https://stackoverflow.com/questions/48038222/i-cant-initialize-my-array-mutablelist-within-a-class-in-android", "title": "I can&#39;t initialize my array (MutableList) within a class in Android", "body": "<p>I just started with Kotlin and Android studio.  When in the <code>MainActivity.kt</code> I do the following ...</p>\n\n<pre><code>var tafels: MutableList&lt;MutableList&lt;Int&gt;&gt; = java.util.ArrayList()\ntafels.add(mutableListOf&lt;Int&gt;(2, 2, 4))\n</code></pre>\n\n<p>... everything works fine. I can add elements to this <code>ArrayList</code>, as shown.</p>\n\n<p>When I try to do the same in a new file, in a class I created, however, the code assist doesn't recognise <code>tafel</code> when I type it in, and therefore no suggestions come after I type <code>tafels</code>:</p>\n\n<pre><code>class TafelsSommen(){\n\n    var tafels: MutableList&lt;MutableList&lt;Int&gt;&gt; = java.util.ArrayList()            \n    tafels.add(mutableListOf&lt;Int&gt;(2, 2, 4))\n}\n</code></pre>\n\n<p>Why can't I add elements to <code>tafels</code> inside class <code>TafelsSommen</code>?</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 1, "creation_date": 1514663550, "post_id": 48037330, "comment_id": 83044879, "body": "How are those programs equivalent? The first class is a generic class having a generic member, the second is just a generic class."}, {"owner": {"reputation": 123, "user_id": 6999715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f68ce656854024ee602518010db6d8c?s=128&d=identicon&r=PG", "display_name": "Hi Lo", "link": "https://stackoverflow.com/users/6999715/hi-lo"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1514663723, "post_id": 48037330, "comment_id": 83044928, "body": "They both try to place an invariant property as an argument to a method. They may not be precisely the same but the kotlin code highlights placing a string into an invariant method. Java flags this as a compile type error (expecting int), Kotlin allows it to compile."}], "answers": [{"comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 1, "creation_date": 1514663951, "post_id": 48037373, "comment_id": 83044994, "body": "Exactly. Shadowing is exactly the behavior one would expect."}], "tags": [], "owner": {"reputation": 20994, "user_id": 2170192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JsKlq.png?s=128&g=1", "display_name": "Alex Shesterov", "link": "https://stackoverflow.com/users/2170192/alex-shesterov"}, "is_accepted": true, "score": 5, "last_activity_date": 1514663784, "creation_date": 1514663784, "answer_id": 48037373, "question_id": 48037330, "link": "https://stackoverflow.com/questions/48037330/kotlin-class-type-parameter-mismatch-undetected/48037373#48037373", "title": "Kotlin class type parameter: Mismatch undetected", "body": "<p>These code snippets are <em>not equivalent</em>, since the Java snippet uses the type parameter of its class instead of declaring its own. </p>\n\n<p>A comparable Java method declaration would be like this (note the additional <code>&lt;T&gt;</code> on the method itself):  </p>\n\n<pre><code>&lt;T&gt; void x(T y) {}\n</code></pre>\n\n<p>And with this change, the Java class would compile just like the Kotlin variant. </p>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 2, "last_activity_date": 1514665863, "creation_date": 1514665863, "answer_id": 48037632, "question_id": 48037330, "link": "https://stackoverflow.com/questions/48037330/kotlin-class-type-parameter-mismatch-undetected/48037632#48037632", "title": "Kotlin class type parameter: Mismatch undetected", "body": "<p>First of all, your <code>main</code> signature is wrong, you should use <code>Array&lt;String&gt;</code> instead of <code>Array&lt;Integer&gt;</code>.</p>\n\n<p>Your class has a type parameter <code>T</code>, which is completely unused. The embedded function <code>x</code> also has a type parameter <code>T</code>, which is independent of the class type parameter. You can change the function signature as follows:</p>\n\n<pre><code>class Inva&lt;T&gt;{\n    fun x(y:T) {}\n}\n</code></pre>\n\n<p>Now your call will fail as expected: <em>Type mismatch</em>.</p>\n"}], "owner": {"reputation": 123, "user_id": 6999715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f68ce656854024ee602518010db6d8c?s=128&d=identicon&r=PG", "display_name": "Hi Lo", "link": "https://stackoverflow.com/users/6999715/hi-lo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 48037373, "answer_count": 2, "score": 1, "last_activity_date": 1514665938, "creation_date": 1514663350, "last_edit_date": 1514665938, "question_id": 48037330, "link": "https://stackoverflow.com/questions/48037330/kotlin-class-type-parameter-mismatch-undetected", "title": "Kotlin class type parameter: Mismatch undetected", "body": "<p><strong>Kotlin Code:</strong></p>\n\n<pre><code>class Inva&lt;T&gt;{\n    fun &lt;T&gt; x(y:T) {}\n}\n\nfun main(args: Array&lt;Integer&gt;) {\n    var inva = Inva&lt;Int&gt;()\n    inva.x(\u201c123\u201d)\n}\n</code></pre>\n\n<p><strong>Java Equivalent:</strong></p>\n\n<pre><code>public class Vab&lt;T&gt; {\n\n    void x(T y) {}\n\n    public static void main(String[] args) {\n\n       Vab&lt;Integer&gt; vab = new Vab&lt;Integer&gt;();\n\n       vab.x(\"123\");\n\n   }\n}\n</code></pre>\n\n<p>Why does the Kotlin code allow the invariant, whereas the Java code is flagged correctly as invalid?</p>\n"}, {"tags": ["android", "kotlin", "android-instrumentation"], "comments": [{"owner": {"reputation": 4749, "user_id": 1267425, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2dc2a52d38ee8c184deeceaadf9ed6ba?s=128&d=identicon&r=PG", "display_name": "Rafael Toledo", "link": "https://stackoverflow.com/users/1267425/rafael-toledo"}, "edited": false, "score": 0, "creation_date": 1514663563, "post_id": 48036982, "comment_id": 83044881, "body": "Check the device Logcat and post it here too. Usually this happens because of crashes on the test runner itself."}, {"owner": {"reputation": 1312, "user_id": 1224482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/w6Ifd.png?s=128&g=1", "display_name": "Oussaki", "link": "https://stackoverflow.com/users/1224482/oussaki"}, "reply_to_user": {"reputation": 4749, "user_id": 1267425, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2dc2a52d38ee8c184deeceaadf9ed6ba?s=128&d=identicon&r=PG", "display_name": "Rafael Toledo", "link": "https://stackoverflow.com/users/1267425/rafael-toledo"}, "edited": false, "score": 0, "creation_date": 1514664516, "post_id": 48036982, "comment_id": 83045137, "body": "This error is not related to the device or any crash it&#39;s something related to Kotlin and  AndroidTests, there is no Log"}], "answers": [{"tags": [], "owner": {"reputation": 359, "user_id": 9194489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49276866069cf6135a18ed8e7a1287a7?s=128&d=identicon&r=PG&f=1", "display_name": "Mateo", "link": "https://stackoverflow.com/users/9194489/mateo"}, "is_accepted": false, "score": 3, "last_activity_date": 1515523191, "creation_date": 1515523191, "answer_id": 48174689, "question_id": 48036982, "link": "https://stackoverflow.com/questions/48036982/failing-to-run-instrumented-tests-on-a-new-android-kotlin-project/48174689#48174689", "title": "Failing to run Instrumented tests on a new Android Kotlin project", "body": "<p>This is a known issue: <a href=\"https://issuetracker.google.com/issues/38452937\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/38452937</a> which hopefully will be fixed in the next release. </p>\n\n<p>For the time being you can manually go to 'Edit Configurations' and add the configuration for the specific class/method you want to run under 'Android Instrumented Tests'. </p>\n\n<p>You could also try the latest canary build: <a href=\"https://developer.android.com/studio/preview/index.html\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/preview/index.html</a> but personally I've had trouble getting it to work with my project.  </p>\n"}], "owner": {"reputation": 1312, "user_id": 1224482, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/w6Ifd.png?s=128&g=1", "display_name": "Oussaki", "link": "https://stackoverflow.com/users/1224482/oussaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1515523191, "creation_date": 1514660384, "last_edit_date": 1514664605, "question_id": 48036982, "link": "https://stackoverflow.com/questions/48036982/failing-to-run-instrumented-tests-on-a-new-android-kotlin-project", "title": "Failing to run Instrumented tests on a new Android Kotlin project", "body": "<p>I just created a new android application with <code>Kotlin</code> Support. </p>\n\n<p>When I've tried to run the default instrumented tests it does not run and shows me this message:</p>\n\n<pre><code>Class not found: \"oussaki.com.pos.ExampleInstrumentedTest\"Empty test suite.\n</code></pre>\n\n<p>This the Instrumented test class that I'm trying to run:</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class) \nclass ExampleInstrumentedTest {\n    @Test\n    fun useAppContext() {\n        // Context of the app under test.\n        val appContext = InstrumentationRegistry.getTargetContext()\n        assertEquals(\"oussaki.com.pos\", appContext.packageName)\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/pbONO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pbONO.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1514658982, "post_id": 48036767, "comment_id": 83043644, "body": "This doesn&#39;t answer the question, though.  Does one need a JDK to do Kotlin development?"}, {"owner": {"reputation": 1366, "user_id": 1147141, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0869f216c4bae930c93e7b568984ed01?s=128&d=identicon&r=PG", "display_name": "efekctive", "link": "https://stackoverflow.com/users/1147141/efekctive"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1514659135, "post_id": 48036767, "comment_id": 83043681, "body": "I don&#39;t see how you can debug without a jvm. But the op can try :-}"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1514659165, "post_id": 48036767, "comment_id": 83043687, "body": "But the question is about a JDK, not a JVM."}, {"owner": {"reputation": 1366, "user_id": 1147141, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0869f216c4bae930c93e7b568984ed01?s=128&d=identicon&r=PG", "display_name": "efekctive", "link": "https://stackoverflow.com/users/1147141/efekctive"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1514659232, "post_id": 48036767, "comment_id": 83043706, "body": "Please explain how you can debug without the idk debuger."}], "tags": [], "owner": {"reputation": 1366, "user_id": 1147141, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0869f216c4bae930c93e7b568984ed01?s=128&d=identicon&r=PG", "display_name": "efekctive", "link": "https://stackoverflow.com/users/1147141/efekctive"}, "is_accepted": false, "score": -3, "last_activity_date": 1514658702, "creation_date": 1514658702, "answer_id": 48036767, "question_id": 48036758, "link": "https://stackoverflow.com/questions/48036758/is-the-jdk-required-for-kotlin/48036767#48036767", "title": "Is the JDK required for Kotlin?", "body": "<p>Kotlin compiles to jvm bytecode. It NEEDS a jvm. It can be used in place of Java the language </p>\n"}, {"comments": [{"owner": {"reputation": 263, "user_id": 5544127, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d27da4e2ff20ca65aad5d3e87721468e?s=128&d=identicon&r=PG&f=1", "display_name": "kcire_eae", "link": "https://stackoverflow.com/users/5544127/kcire-eae"}, "edited": false, "score": 1, "creation_date": 1514743972, "post_id": 48036888, "comment_id": 83060536, "body": "i need an explications more detailed, please."}, {"owner": {"reputation": 123, "user_id": 10025507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee48a5bf92d097582ec23475e71f1cf0?s=128&d=identicon&r=PG&f=1", "display_name": "admin", "link": "https://stackoverflow.com/users/10025507/admin"}, "edited": false, "score": 1, "creation_date": 1570687701, "post_id": 48036888, "comment_id": 102992889, "body": "<a href=\"https://www.lexico.com/en/definition/explication\" rel=\"nofollow noreferrer\">explications</a> is a real word"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 10, "last_activity_date": 1514659726, "creation_date": 1514659726, "answer_id": 48036888, "question_id": 48036758, "link": "https://stackoverflow.com/questions/48036758/is-the-jdk-required-for-kotlin/48036888#48036888", "title": "Is the JDK required for Kotlin?", "body": "<p>Yes, the JDK is required for Kotlin development on the JVM.</p>\n\n<blockquote>\n  <p>Kotlin works with JDK 1.6+. </p>\n</blockquote>\n\n<p>From the <a href=\"https://kotlinlang.org/docs/tutorials/getting-started.html\" rel=\"noreferrer\">Getting Started</a> guide.</p>\n"}, {"comments": [{"owner": {"reputation": 567, "user_id": 3287514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8x4Et.jpg?s=128&g=1", "display_name": "OzzyTheGiant", "link": "https://stackoverflow.com/users/3287514/ozzythegiant"}, "edited": false, "score": 1, "creation_date": 1562165534, "post_id": 48037300, "comment_id": 100294305, "body": "Or more broadly, Kotlin was added to the list of languages that are supported to use the JVM, along with Groovy, Scala, and Clojure. Kotlin just happens to have first class support in Android"}], "tags": [], "owner": {"reputation": 4554, "user_id": 5670752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3TSWf.jpg?s=128&g=1", "display_name": "Taslim Oseni", "link": "https://stackoverflow.com/users/5670752/taslim-oseni"}, "is_accepted": false, "score": 2, "last_activity_date": 1514735815, "last_edit_date": 1514735815, "creation_date": 1514663114, "answer_id": 48037300, "question_id": 48036758, "link": "https://stackoverflow.com/questions/48036758/is-the-jdk-required-for-kotlin/48037300#48037300", "title": "Is the JDK required for Kotlin?", "body": "<p>Yes! Kotlin 1.1.2 (and above) require JDK.</p>\n\n<p>Also, very importantly, <strong>Kotlin wasn't supported so as to \"replace\" Java</strong>. This is another very common erroneous notion. Kotlin was merely added to the list of languages supported for writing Android apps.</p>\n\n<p>You can check out the link below to get a feel of the language's history:\n<a href=\"https://en.wikipedia.org/wiki/Kotlin_(programming_language)\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Kotlin_(programming_language)</a></p>\n"}, {"tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": false, "score": 4, "last_activity_date": 1557265949, "last_edit_date": 1557265949, "creation_date": 1526487322, "answer_id": 50375637, "question_id": 48036758, "link": "https://stackoverflow.com/questions/48036758/is-the-jdk-required-for-kotlin/50375637#50375637", "title": "Is the JDK required for Kotlin?", "body": "<p>As already mentioned, Kotlin JVM requires the JVM to work. Kotlin compiles to JVM bytecode, which means it has the same requirements as Java (runtime and development kit). This is also why Kotlin has Java interop. Additionally, this is the one you're most likely to find yourself using with Android. </p>\n\n<p>However, there is <a href=\"https://github.com/JetBrains/kotlin-native/\" rel=\"nofollow noreferrer\">Kotlin Native</a>. The SDK itself is slightly different from Kotlin JVM, and it's still a WIP, but it compiles without the need for JVM. Specifically, it compiles to a native target using LLVM. This version of Kotlin supports C interop.</p>\n\n<p>Kotlin Native also opens the door for <a href=\"https://kotlinlang.org/docs/reference/multiplatform.html\" rel=\"nofollow noreferrer\">Kotlin Multiplatform</a>, which compiles to whatever you want (mobile targets, desktop targets, and it packs it all into one, and includes interop with the native programming language). <strong>NOTE:</strong> I'm not sure what Kotlin Native with Multiplatform compiles to. Some demo projects use Kotlin JVM in the Android module, which suggests it doesn't use NDK-style native code. Multiplatforms, like Native, is experimental. I also haven't touched Multiplatform much, but it appears to be using a combination of declared functions and platform-declared functions. I'm not sure how interop works here (in terms of languages - not module interop). </p>\n\n<p>Multiplatform doesn't require Native though, but it enables significantly more platforms. If you're using a cross-platform Java library (for an instance LibGDX), or otherwise build on modules with a core and platforms, you can use Multiplatform here too. However, note that this likely requires the JDK, although it does depend on your project.</p>\n\n<p>In addition to these, there's also <a href=\"https://kotlinlang.org/docs/reference/js-overview.html\" rel=\"nofollow noreferrer\">Kotlin.JS</a>, which as the name suggests, compiles to JavaScript. Unlike Kotlin JVM, it naturally doesn't require the JVM. However, it instead requires the JavaScript-related APIs. And as you'd expect, Kotlin.JS supports JavaScript interop. </p>\n\n<p><strong>TL;DR:</strong></p>\n\n<p>The JDK isn't always required. Kotlin Native and Kotlin JS do not require the JDK, because the targets they compile to isn't on the JVM. </p>\n"}], "owner": {"reputation": 263, "user_id": 5544127, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d27da4e2ff20ca65aad5d3e87721468e?s=128&d=identicon&r=PG&f=1", "display_name": "kcire_eae", "link": "https://stackoverflow.com/users/5544127/kcire-eae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10497, "favorite_count": 1, "answer_count": 4, "score": 6, "last_activity_date": 1557265949, "creation_date": 1514658614, "last_edit_date": 1526487387, "question_id": 48036758, "link": "https://stackoverflow.com/questions/48036758/is-the-jdk-required-for-kotlin", "title": "Is the JDK required for Kotlin?", "body": "<p>I have not used Android for a long time but now I find a new term, Kotlin, so my doubt is, JDK is required for Kotlin?</p>\n\n<p>If Kotlin will replace to Java, so the JDK it is not necessary because according to me JDK is for develop on Java, is correct?</p>\n\n<p>If it is correct then I have other doubt (this already it's old) why JDK is used for Android if this already include an Android SDK?</p>\n\n<p>P. D.\nI am going crazy, I need a single explanation.</p>\n"}, {"tags": ["android", "android-gradle-plugin", "kotlin", "objectbox"], "answers": [{"comments": [{"owner": {"reputation": 212, "user_id": 1781950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IzCk0.jpg?s=128&g=1", "display_name": "fahrizal89", "link": "https://stackoverflow.com/users/1781950/fahrizal89"}, "edited": false, "score": 0, "creation_date": 1557099766, "post_id": 48147607, "comment_id": 98641595, "body": "Great! Just add @Entity at your model. It will automatically generate MyObjectBox"}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1571695368, "post_id": 48147607, "comment_id": 103319079, "body": "That works, but is such an obtuse implementation/logic for a library to force upon developers....."}], "tags": [], "owner": {"reputation": 559, "user_id": 9187282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb0d1567c04d9165050afe5286964a8?s=128&d=identicon&r=PG&f=1", "display_name": "Uwe - ObjectBox", "link": "https://stackoverflow.com/users/9187282/uwe-objectbox"}, "is_accepted": false, "score": 1, "last_activity_date": 1515404508, "creation_date": 1515404508, "answer_id": 48147607, "question_id": 48036505, "link": "https://stackoverflow.com/questions/48036505/myobjectbox-is-not-generated-in-kotlin-objectbox-library/48147607#48147607", "title": "MyObjectBox is not generated in kotlin (objectbox library)", "body": "<p>Your <a href=\"http://objectbox.io/documentation/introduction/\" rel=\"nofollow noreferrer\">setup</a> looks good. Note that you do not need to add the <code>objectbox-android</code>, <code>objectbox-kotlin</code> or <code>objectbox-processor</code> dependencies. The plugin will do it for you.</p>\n\n<p>Do you have at least one <a href=\"http://objectbox.io/documentation/entity-annotations/\" rel=\"nofollow noreferrer\">@Entity class</a> defined? For example:</p>\n\n<pre><code>@Entity\npublic class User { \n    @Id\n    private long id;\n\n    private String name;\n}\n</code></pre>\n\n<p>Then <strong>Build > Make project</strong>. The annotation processor should pick up the entity and generate your MyObjectBox class.</p>\n"}, {"comments": [{"owner": {"reputation": 7024, "user_id": 859359, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/C7Wgr.png?s=128&g=1", "display_name": "Nestor", "link": "https://stackoverflow.com/users/859359/nestor"}, "edited": false, "score": 3, "creation_date": 1562451791, "post_id": 54124181, "comment_id": 100378767, "body": "The key is the <code>apply plugin: &#39;kotlin-kapt&#39;</code> call as it generates the required assets."}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 1, "creation_date": 1571695326, "post_id": 54124181, "comment_id": 103319067, "body": "Reordering plugin declarations in gradle makes no sense."}], "tags": [], "owner": {"reputation": 259, "user_id": 8273184, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--kVrfflMg0E/AAAAAAAAAAI/AAAAAAAAAHY/gtoT_rSQiVk/photo.jpg?sz=128", "display_name": "Mojtaba Razaghi", "link": "https://stackoverflow.com/users/8273184/mojtaba-razaghi"}, "is_accepted": false, "score": 6, "last_activity_date": 1571752696, "last_edit_date": 1571752696, "creation_date": 1547107271, "answer_id": 54124181, "question_id": 48036505, "link": "https://stackoverflow.com/questions/48036505/myobjectbox-is-not-generated-in-kotlin-objectbox-library/54124181#54124181", "title": "MyObjectBox is not generated in kotlin (objectbox library)", "body": "<p>I think I finally found the solution: the important part is that you have to write the <code>objectbox-gradle-plugin</code>, above the <code>kotlin-gradle-plugin</code> in your project-level gradle file, the code looks like this :</p>\n\n<pre><code>classpath 'com.android.tools.build:gradle:3.2.1'\nclasspath \"io.objectbox:objectbox-gradle-plugin:$objectboxVersion\"\nclasspath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n</code></pre>\n\n<p>After that, add the following lines under the other <code>apply plugin:...</code> in app-level gradle</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\napply plugin: 'io.objectbox'\n</code></pre>\n\n<p><strong>Most Importantly</strong>, you have to make at least one <code>@Entity</code> class and rebuild the project, and <code>MyObjectBox</code> will appear.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10737323, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UEFDQITI7NA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gfzyfrz13Qjf-5f_MNyolCKhlLYg/mo/photo.jpg?sz=128", "display_name": "Deman Lu", "link": "https://stackoverflow.com/users/10737323/deman-lu"}, "is_accepted": false, "score": 0, "last_activity_date": 1552986516, "last_edit_date": 1552986516, "creation_date": 1552983724, "answer_id": 55236356, "question_id": 48036505, "link": "https://stackoverflow.com/questions/48036505/myobjectbox-is-not-generated-in-kotlin-objectbox-library/55236356#55236356", "title": "MyObjectBox is not generated in kotlin (objectbox library)", "body": "<p>I meet with the same question. My config is same with you.</p>\n\n<p>Finally I found the reason. </p>\n\n<pre><code>@Entity\ndata class Person @JvmOverloads constructor(@Id var id:Long,\n                                            var name:String,\n                                            var age:Int,\n                                            var high:Int)\n</code></pre>\n\n<p>Like this. You must define one bean first. Thus <code>MyObjectBox</code> will generate.</p>\n"}], "owner": {"reputation": 1220, "user_id": 5935559, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/aGsWk.jpg?s=128&g=1", "display_name": "Shudipto Trafder", "link": "https://stackoverflow.com/users/5935559/shudipto-trafder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1735, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1571752696, "creation_date": 1514656773, "question_id": 48036505, "link": "https://stackoverflow.com/questions/48036505/myobjectbox-is-not-generated-in-kotlin-objectbox-library", "title": "MyObjectBox is not generated in kotlin (objectbox library)", "body": "<p>I am trying to use Object Library.</p>\n\n<p>I read the official documentation and follow the instructions. But still, it not working. </p>\n\n<p>The problem is when I try to initialize boxStore object I don't find MyObjectBox class.</p>\n\n<pre><code>val boxStore = MyObjectBox.builder().androidContext(this).build()\n</code></pre>\n\n<p>Here is my app module.\nbuild.gradle (app module)</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n\napply plugin: 'io.objectbox'\n\nandroid {\n    compileSdkVersion 26\n    defaultConfig {\n        ....\n    }\n    buildTypes {\n        release {\n           ....\n        }    \n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/java'\n    }\n}\n\nkapt {\n    generateStubs = true\n\n    arguments {\n        arg(\"objectbox.debug\", true)\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n\n    ... other dependencies\n\n    //object box\n    implementation \"io.objectbox:objectbox-android:$objectboxVersion\"\n    // some useful Kotlin extension functions\n    implementation \"io.objectbox:objectbox-kotlin:$objectboxVersion\"\n    kapt \"io.objectbox:objectbox-processor:$objectboxVersion\"\n\n}\n</code></pre>\n\n<p>And Here is my project module:\nbuild.gradle (project)</p>\n\n<pre><code>buildscript {\next.kotlin_version = '1.2.10'\n//all version\next.support_version = '26.1.0'\next.objectboxVersion = '1.3.3'\n\nrepositories {\n    google()\n    jcenter()\n    maven { url \"http://objectbox.net/beta-repo/\" }\n}\ndependencies {\n    classpath 'com.android.tools.build:gradle:3.0.1'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n\n    //object box\n    classpath \"io.objectbox:objectbox-gradle-plugin:$objectboxVersion\"\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n        maven { url 'https://maven.google.com' }\n        maven { url \"http://objectbox.net/beta-repo/\" }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>I am searching for the possible solution in several projects. I also follow the official demo app. But still, it not working for me?</p>\n\n<p>Can anyone help me to fix this?</p>\n"}, {"tags": ["android", "database", "orm", "kotlin", "activeandroid"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1514656629, "post_id": 48036419, "comment_id": 83042980, "body": "Did you look at the stacktrace? Could you post it?"}], "owner": {"reputation": 127, "user_id": 7219129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8a857448f0aba983d9c41e3d62d0ad29?s=128&d=identicon&r=PG&f=1", "display_name": "Majid ahmadi", "link": "https://stackoverflow.com/users/7219129/majid-ahmadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 523, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518809243, "creation_date": 1514656149, "last_edit_date": 1518809243, "question_id": 48036419, "link": "https://stackoverflow.com/questions/48036419/how-can-i-use-orm-database-active-android-by-kotlin-on-android-studio", "title": "How can I use ORM database &quot;Active Android&quot; by Kotlin on Android Studio?", "body": "<p>I try to use <strong>Active Android</strong> (ORM DataBase) in My <strong>Kotlin</strong> Project</p>\n\n<p>But when I save the EditText input , my program always crashes!</p>\n\n<p>All program codes are available in <a href=\"https://gitlab.com/Majidahmadi/MLife\" rel=\"nofollow noreferrer\" title=\"MLife Project\">Gitlab.com</a></p>\n\n<ul>\n<li>Where is the problem with my codes?</li>\n<li>and if you know the sources of education in this regard, tell me to\ncome</li>\n</ul>\n\n<hr>\n\n<p><strong><em>MainActivity.kt</em></strong></p>\n\n<pre><code>...\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val btnMainSubmit: Button = findViewById(R.id.btn_main_submit)\n        val btnMainCancel: Button = findViewById(R.id.btn_main_cancel)\n        val edtMainType: EditText = findViewById(R.id.edt_main_type)\n        val edtMainName: EditText = findViewById(R.id.edt_main_name)\n        val edtMainInfo: EditText = findViewById(R.id.edt_main_info)\n        val txvMainShow: TextView = findViewById(R.id.txv_main_show)\n\n        btnMainSubmit.setOnClickListener{\n            var name:String = edtMainName.text.toString()\n            var type:String = edtMainType.text.toString()\n            var info:String = edtMainInfo.text.toString()\n            val model:ModelRequest = ModelRequest()\n            model.adItems(type,name,info)\n            model.save()\n        }\n\n        btnMainCancel.setOnClickListener{\n            var model:ModelRequest = ModelRequest.random\n            txvMainShow.text = model.mainName + \" - \" + model.mainInfo + \" - \" + model.mainType\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong><em>AppController.kt</em></strong></p>\n\n<pre><code>...\nopen class DatabaseTestCase : Application() {\n    val DB_NAME = \"test.db\"\n\n    fun setUp() {\n        val configuration = Configuration.Builder(getContext())\n                .setDatabaseName(DB_NAME)?\n                .setDatabaseVersion(1)?\n                .create()\n        ActiveAndroid.initialize(configuration)\n    }\n    fun tearDown() {\n        getContext()?.deleteDatabase(DB_NAME)\n        ActiveAndroid.dispose()\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong><em>ModelRequest.kt</em></strong></p>\n\n<pre><code>@Table(name = \"model_request\")\nopen class ModelRequest : Model {\n    @Column(name = \"main_type\") var mainType: String? = null\n    @Column(name = \"main_name\") var mainName: String? = null\n    @Column(name = \"main_info\") var mainInfo: String? = null\n\n    val all: List&lt;ModelRequest&gt; get() = getMany(ModelRequest::class.java, \"name\")\n\n    constructor() : super() {}\n\n    constructor(main_type: String, main_name: String, main_info: String) {\n        this.mainType = main_type\n        this.mainName = main_name\n        this.mainInfo = main_info\n    }\n\n    companion object {\n        val random: ModelRequestget() = Select().from(ModelRequest::class.java).executeSingle()\n        val mainName: String\n            get() {\n                val ModelRequest = Select().from(ModelRequest::class.java).executeSingle&lt;ModelRequest&gt;()\n                return ir.devapp.mlife.model.ModelRequest.mainName\n            }\n        val driverInfo: ModelRequest\n            get() = Select().from(ModelRequest::class.java).executeSingle()\n    }\n\n    fun adItems(main_type: String, main_name: String, main_info: String){\n        this.mainType = main_type\n        this.mainName = main_name\n        this.mainInfo = main_info\n    }\n}\n</code></pre>\n\n<h2>Update :</h2>\n\n<p><a href=\"https://i.stack.imgur.com/XpBHW.png\" rel=\"nofollow noreferrer\">This is my StackTrace (LogCat in Android Studio 3.0.1):</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/s8Jur.jpg\" rel=\"nofollow noreferrer\">And the code above points to this line of the program</a></p>\n"}, {"tags": ["reflection", "kotlin"], "comments": [{"owner": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "edited": false, "score": 0, "creation_date": 1514647166, "post_id": 48035181, "comment_id": 83040358, "body": "Did you mean <code>dataStore: KotlinEntityDataStore&lt;T&gt;</code>? I don&#39;t understand why there is a generic type argument for <code>Persistable</code> then a explicit <code>Persistable</code> argument"}, {"owner": {"reputation": 322, "user_id": 4214173, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/e6186849fa903475fdfca205612d767e?s=128&d=identicon&r=PG&f=1", "display_name": "bajky", "link": "https://stackoverflow.com/users/4214173/bajky"}, "reply_to_user": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "edited": false, "score": 0, "creation_date": 1514647272, "post_id": 48035181, "comment_id": 83040373, "body": "KotlinEntityDataStore&lt;Persistable&gt; is only parameter of constructor. I need to get Kclass from T parameter :)"}, {"owner": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "edited": false, "score": 0, "creation_date": 1514647510, "post_id": 48035181, "comment_id": 83040431, "body": "No, due to JVM type erasure unless you are able to reference a non-null instance of <code>T</code>, it is impossible to do solely from the class signature. An option around this is to make the constructor private and put an inline function (in companion object) with a reified <code>T</code> argument which returns an instance of <code>AbstractDao&lt;T&gt;</code>. Does that make sense?"}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 1, "last_activity_date": 1514658872, "last_edit_date": 1514658872, "creation_date": 1514648677, "answer_id": 48035385, "question_id": 48035181, "link": "https://stackoverflow.com/questions/48035181/kotlin-superclass-kclass/48035385#48035385", "title": "Kotlin superClass Kclass", "body": "<p>This cannot be done due to <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">type erasure</a>. But you could provide a factory method with <code>reified type</code> that delegates to a constructor accepting the <code>KClass</code>. Here's a simplified example:</p>\n\n<pre><code>class WithReifiedType&lt;T&gt; constructor(val kc: KClass&lt;*&gt;) {\n    companion object {\n        inline fun &lt;reified T&gt; getInstance(): WithReifiedType&lt;T&gt; {\n            println(\"Here's your KClass: ${T::class}\")\n            return WithReifiedType(T::class)\n        }\n    }\n}\n\n//called like this\nWithReifiedType.getInstance&lt;String&gt;()\n</code></pre>\n\n<p>It's also acceptable to create a top-level function (as an alternative to companion-embedded factory) looking like a constructor on the caller site.</p>\n\n<pre><code>inline fun &lt;reified T&gt; WithReifiedType(): WithReifiedType&lt;T&gt; {\n    println(\"Here's your KClass: ${T::class}\")\n    return WithReifiedType(T::class)\n}\n\n//called like this\nWithReifiedType&lt;String&gt;()\n</code></pre>\n"}], "owner": {"reputation": 322, "user_id": 4214173, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/e6186849fa903475fdfca205612d767e?s=128&d=identicon&r=PG&f=1", "display_name": "bajky", "link": "https://stackoverflow.com/users/4214173/bajky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1514658872, "creation_date": 1514646980, "last_edit_date": 1514648385, "question_id": 48035181, "link": "https://stackoverflow.com/questions/48035181/kotlin-superclass-kclass", "title": "Kotlin superClass Kclass", "body": "<p>I have definiction of the function</p>\n\n<pre><code>abstract class AbstractDao&lt;T&gt;(private val dataStore: KotlinEntityDataStore&lt;Persistable&gt;): Dao&lt;T&gt; where T: Persistable \n</code></pre>\n\n<p>and I need to get <code>KClass</code> from type <code>T</code>. It is possible in Kotlin ?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1514644542, "post_id": 48034775, "comment_id": 83039719, "body": "We could equally turn the headline question around - why <i>should</i> Kotlin have a  List(...) creation method?  What do you mean by &quot;uniform&quot;?  Note also that there is more than one creation method - listOf, mutableListOf, etc."}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1514648230, "post_id": 48034775, "comment_id": 83040611, "body": "An <a href=\"https://stackoverflow.com/a/34752211/8343333\">answer</a> from another post explains why it is not a good practice to have a factory function name same as the class&#39;s one. In case of interface or abstract class, it is better to have consistent naming style of factory function for class, interface and abstract class."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 2, "creation_date": 1514658555, "post_id": 48034775, "comment_id": 83043525, "body": "@BakaWaii Except, as the question mentions, there <i>is</i> a factory function with the same name in the Kotlin library."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1174868"}, "edited": false, "score": 0, "creation_date": 1536281277, "post_id": 48035025, "comment_id": 91377091, "body": "You&#39;ve explained how but you have not explained why. This isn&#39;t just a random choice. Kotlin promotes distinguishing between mutable and immutable collections as a feature. They want the idea of what is mutable to be obvious in all cases. As an example this is why parameters are immutable.  <a href=\"https://kotlinlang.org/docs/reference/collections.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/collections.html</a>"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1536306817, "post_id": 48035025, "comment_id": 91384184, "body": "No this is totally unrelated to this question imho"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 12, "last_activity_date": 1519654665, "last_edit_date": 1519654665, "creation_date": 1514645601, "answer_id": 48035025, "question_id": 48034775, "link": "https://stackoverflow.com/questions/48034775/why-doesnt-kotlin-use-list-as-a-factory-for-lists-and-a-similar-conventi/48035025#48035025", "title": "Why doesn&#39;t Kotlin use `List(...)` as a factory for lists and a similar convention for all abstract collections?", "body": "<blockquote>\n  <p>why did the Kotlin collection library designers choose not to follow a uniform convention for collection factories </p>\n</blockquote>\n\n<p>There's a \"uniform convention\": Use the Kotlin standard library functions <code>listOf</code>, <code>arrayOf</code>, <code>mapOf</code> etc., as stated in the <a href=\"https://kotlinlang.org/docs/reference/collections.html\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Kotlin does not have dedicated syntax constructs for creating lists or sets. <strong>Use methods from the standard library</strong>, such as <code>listOf()</code>, <code>mutableListOf()</code>, <code>setOf()</code>, <code>mutableSetOf()</code></p>\n</blockquote>\n\n<p>I\u2019m not sure why the Scala approach would actually be any better. If you like to have those constructor-like functions anyway, it's not a big deal to create them:</p>\n\n<pre><code>fun &lt;T&gt; List&lt;T&gt;(vararg e: T) = listOf(e)\n\n//use it\nval l = List(1, 2, 3, 4)\n</code></pre>\n"}], "owner": {"reputation": 492, "user_id": 445619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da1a7f4de639a182de82b0593250f8fe?s=128&d=identicon&r=PG", "display_name": "pvillela", "link": "https://stackoverflow.com/users/445619/pvillela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 48035025, "answer_count": 1, "score": 4, "last_activity_date": 1519654665, "creation_date": 1514643563, "question_id": 48034775, "link": "https://stackoverflow.com/questions/48034775/why-doesnt-kotlin-use-list-as-a-factory-for-lists-and-a-similar-conventi", "title": "Why doesn&#39;t Kotlin use `List(...)` as a factory for lists and a similar convention for all abstract collections?", "body": "<p>In Scala, there is a convenient convention of providing collection factory methods through companion objects, using the companion object's <code>apply</code> method.  So, if I want to create a list with the elements 1, 2, and 3, I just use <code>List(1, 2, 3)</code>.  The pattern is consistent across all collection types.</p>\n\n<p>In Kotlin, if I write <code>List(1, 2, 3)</code> I get a compilation error.  To create a list with 1, 2, and 3, one has to use <code>listOf(1, 2, 3)</code>.  <code>List</code> is an interface, so it has no constructor, obviously.  There could have been a companion object but there isn't one.  There is a <code>List</code> function, though with a different signature than what one would expect coming from Scala (<code>public inline fun &lt;T&gt; List(size: Int, init: (index: Int) -&gt; T): List&lt;T&gt;</code>).</p>\n\n<p>So, why did the Kotlin collection library designers choose not to follow a uniform convention for collection factories similar to the one in Scala?</p>\n"}, {"tags": ["java", "scala", "jvm", "kotlin", "jvm-languages"], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 3, "creation_date": 1514641472, "post_id": 48034269, "comment_id": 83038900, "body": "<code>uses callbacks and a state machine</code> - a minor correction: in the compiled code there are no callbacks since the FSM acts like them"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": false, "score": 23, "last_activity_date": 1514639699, "creation_date": 1514639699, "answer_id": 48034269, "question_id": 48033944, "link": "https://stackoverflow.com/questions/48033944/how-are-coroutines-implemented-in-jvm-langs-without-jvm-support/48034269#48034269", "title": "How are coroutines implemented in JVM langs without JVM support?", "body": "<p>From the <a href=\"https://kotlinlang.org/docs/reference/coroutines.html\" rel=\"noreferrer\">Kotlin Documentation on Coroutines</a> (emphasis mine):</p>\n\n<blockquote>\n  <p>Coroutines simplify asynchronous programming by putting the complications into libraries. The logic of the program can be expressed sequentially in a coroutine, and the underlying library will figure out the asynchrony for us. <strong>The library can wrap relevant parts of the user code into callbacks, subscribe to relevant events, schedule execution on different threads</strong> (or even different machines!), and the code remains as simple as if it was sequentially executed.</p>\n</blockquote>\n\n<p>Long story short, they are compiled down to code that uses callbacks and a state machine to handle suspending and resuming. </p>\n\n<p>Roman Elizarov, the project lead, gave two fantastic talks at KotlinConf 2017 on this subject. One is an <a href=\"https://www.youtube.com/watch?v=_hfBv0a09Jc\" rel=\"noreferrer\">Introduction to Coroutines</a>, the second is a <a href=\"https://www.youtube.com/watch?v=YrrUCSi72E8\" rel=\"noreferrer\">Deep Dive on Coroutines</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 21832, "user_id": 882051, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f76d986b54e90fa6c431160e9a0796cd?s=128&d=identicon&r=PG", "display_name": "hmakholm left over Monica", "link": "https://stackoverflow.com/users/882051/hmakholm-left-over-monica"}, "edited": false, "score": 0, "creation_date": 1514683767, "post_id": 48034409, "comment_id": 83048895, "body": "From an ideal point of view, CPS does the trick, but it tends to produce code where <i>no call ever returns</i>, which leads to a quick stack overflow unless the JVM does tail call optimization. Optimizing tail calls is allowed by the JVM spec, but many implementations won&#39;t do it, or at least won&#39;t do it by default, preferring instead to keep enough information to be able to equip new Throwables with stack traces that match the naive execution model (presumably) expected by the programmer."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1514732612, "post_id": 48034409, "comment_id": 83057850, "body": "I think the only one in widespread use that performs (but does not guarantee) TCO is J9, although Avian probably does as well."}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 4, "last_activity_date": 1514642505, "last_edit_date": 1514642505, "creation_date": 1514640861, "answer_id": 48034409, "question_id": 48033944, "link": "https://stackoverflow.com/questions/48033944/how-are-coroutines-implemented-in-jvm-langs-without-jvm-support/48034409#48034409", "title": "How are coroutines implemented in JVM langs without JVM support?", "body": "<p><strong>Coroutines</strong> <em>do not rely on features of the operating system or the JVM</em>. Instead, coroutines and <code>suspend</code> functions are transformed by the compiler producing a state machine capable of handling suspensions in general and passing around suspending coroutines keeping their state. This is enabled by <strong>Continuations</strong>, which are <em>added as a parameter to each and every suspending function</em> by the compiler; this technique is called \u201c<a href=\"https://en.m.wikipedia.org/wiki/Continuation-passing_style\" rel=\"nofollow noreferrer\"><strong>Continuation-passing style</strong></a>\u201d(CPS).</p>\n\n<p>One example can be observed in the transformation of <code>suspend</code> functions:</p>\n\n<pre><code>suspend fun &lt;T&gt; CompletableFuture&lt;T&gt;.await(): T\n</code></pre>\n\n<p>The following shows its signature after CPS transformation:</p>\n\n<pre><code>fun &lt;T&gt; CompletableFuture&lt;T&gt;.await(continuation: Continuation&lt;T&gt;): Any?\n</code></pre>\n\n<p>If you want to know the hard details, you need to read this <a href=\"https://github.com/Kotlin/kotlin-coroutines/blob/master/kotlin-coroutines-informal.md#implementation-details\" rel=\"nofollow noreferrer\">explanation</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1514925401, "post_id": 48034412, "comment_id": 83108438, "body": "well if they do implement them on top of <code>Exception</code>s - no one will use them, implementing your control flow on top of those (at least in java - even with empty stacktraces) would be costly. and second you are only partially right about <code>lambdas</code>, they do have a bytecode instruction that lets the runtime decide what those implementations will be - not the compiler (<code>invokedynamic</code>)."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1514932183, "post_id": 48034412, "comment_id": 83111099, "body": "<code>invokedynamic</code> and the whole <code>LambdametaFactory</code> machinery are an implementation detail. Java lambdas predate JSR292, and they were originally implemented without it. JSR292 allows a more efficient and more compact implementation, but it is not required. In particular, the Retrolambda project provides a standards-compliant implementation of Java 8 lambdas and Method References on a Java 7, 6, or 5 JVM, the latter two of which don&#39;t have <code>invokedynamic</code>. <code>invokedynamic</code> is orthogonal to lambdas, its purpose is to speed up virtual dispatch with arbitrary semantics, in particular, semantics \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1514932364, "post_id": 48034412, "comment_id": 83111160, "body": "\u2026 that don&#39;t match <code>invokevirtual</code>. It is basically a user-programmable version of <code>invokevirtual</code> that exposes all the clever optimizations tricks the JVM does for <code>invokevirtual</code> to the programmer, so that <i>every</i> virtual dispatch can benefit those optimizations, not just virtual dispatch that happens to look like Java. E.g. duck typing or multiple inheritance."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 42, "last_activity_date": 1514739423, "last_edit_date": 1514739423, "creation_date": 1514640871, "answer_id": 48034412, "question_id": 48033944, "link": "https://stackoverflow.com/questions/48033944/how-are-coroutines-implemented-in-jvm-langs-without-jvm-support/48034412#48034412", "title": "How are coroutines implemented in JVM langs without JVM support?", "body": "<p><strong>tl;dr</strong> Summary:</p>\n\n<blockquote>\n  <p>Particularly this proposal says that to implement this feature in the language the additional JVM support will be required.</p>\n</blockquote>\n\n<p>When they say \"required\", they mean \"required in order to be implemented in such a way that it is both performant and interoperable between languages\".</p>\n\n<blockquote>\n  <p>So how this feature is implemented without additional support </p>\n</blockquote>\n\n<p>There are many ways, the most easy to understand how it can possibly work (but not necessarily easiest to implement) is to implement your own VM with your own semantics on top of the JVM. (Note that is <em>not</em> how it is actually done, this is only an intuition as to <em>why</em> it can be done.)</p>\n\n<blockquote>\n  <p>and can it be implemented efficiently without it ?</p>\n</blockquote>\n\n<p>Not really.</p>\n\n<p><strong>Slightly longer explanation</strong>:</p>\n\n<p>Note that one goal of Project Loom is to introduce this abstraction <em>purely</em> as a library. This has three advantages:</p>\n\n<ul>\n<li>It is much easier to introduce a new library than it is to change the Java programming language.</li>\n<li>Libraries can immediately be used by programs written in every single language on the JVM, whereas a Java language feature can only be used by Java programs.</li>\n<li>A library with the same API that does not use the new JVM features can be implemented, which will allow you to write code that runs on older JVMs with a simple re-compile (albeit with less performance).</li>\n</ul>\n\n<p>However, implementing it as a library precludes clever compiler tricks turning co-routines into something else, because <em>there is no compiler involved</em>. Without clever compiler tricks, getting good performance is much harder, ergo, the \"requirement\" for JVM support.</p>\n\n<p><strong>Longer explanation</strong>:</p>\n\n<p>In general, all of the usual \"powerful\" control structures are equivalent in a computational sense and can be implemented using each other.</p>\n\n<p>The most well-known of those \"powerful\" universal control-flow structures is the venerable <code>GOTO</code>, another one are Continuations. Then, there are Threads and Coroutines, and one that people don't often think about, but that is also equivalent to <code>GOTO</code>: Exceptions.</p>\n\n<p>A different possibility is a re-ified call stack, so that the call-stack is accessible as an object to the programmer and can be modified and re-written. (Many Smalltalk dialects do this, for example, and it is also kind-of like how this is done in C and assembly.)</p>\n\n<p>As long as you have <em>one</em> of those, you can have <em>all</em> of those, by just implementing one on top of the other.</p>\n\n<p>The JVM has two of those: Exceptions and <code>GOTO</code>, but the <code>GOTO</code> in the JVM is <em>not</em> universal, it is extremely limited: it only works <em>inside</em> a single method. (It is essentially intended only for loops.) So, that leaves us with Exceptions.</p>\n\n<p>So, that is one possible answer to your question: you can implement co-routines on top of Exceptions.</p>\n\n<p>Another possibility is to not use the JVM's control-flow <em>at all</em> and implement your own stack.</p>\n\n<p>However, that is typically not the path that is actually taken when implementing co-routines on the JVM. Most likely, someone who implements co-routines would choose to use Trampolines and partially re-ify the execution context as an object. That is, for example, how Generators are implemented in C\u266f on the CLI (not the JVM, but the challenges are similar). Generators (which are basically restricted semi-co-routines) in C\u266f are implemented by lifting the local variables of the method into fields of a context object and splitting the method into multiple methods on that object at each <code>yield</code> statement, converting them into a state machine, and carefully threading all state changes through the fields on the context object. And before <code>async</code>/<code>await</code> came along as a language feature, a clever programmer implemented asynchronous programming using the same machinery as well.</p>\n\n<p><strong>HOWEVER</strong>, and that is what the article you pointed to most likely referred to: all that machinery is costly. If you implement your own stack or lift the execution context into a separate object, or compile all your methods into one <em>giant</em> method and use <code>GOTO</code> everywhere (which isn't even possible because of the size limit on methods), or use Exceptions as control-flow, at least one of these two things will be true:</p>\n\n<ul>\n<li>Your calling conventions become incompatible with the JVM stack layout that other languages expect, i.e. you lose <em>interoperability</em>.</li>\n<li>The JIT compiler has no idea what the hell your code is doing, and is presented with byte code patterns, execution flow patterns, and usage patterns (e.g. throwing and catching <em>ginormous</em> amounts of exceptions) it doesn't expect and doesn't know how to optimize, i.e. you lose <em>performance</em>.</li>\n</ul>\n\n<p>Rich Hickey (the designer of Clojure) once said in a talk: \"Tail Calls, Performance, Interop. Pick Two.\" I generalized this to what I call <em>Hickey's Maxim</em>: \"Advanced Control-Flow, Performance, Interop. Pick Two.\"</p>\n\n<p>In fact, it is generally hard to achieve even <em>one of</em> interop or performance.</p>\n\n<p>Also, your compiler will become more complex.</p>\n\n<p>All of this goes away, when the construct is available natively in the JVM. Imagine, for example, if the JVM didn't have Threads. Then, every language implementation would create its own Threading library, which is hard, complex, slow, and doesn't interoperate with any <em>other</em> language implementation's Threading library.</p>\n\n<p>A recent, and real-world, example are lambdas: many language implementations on the JVM had lambdas, e.g. Scala. Then Java added lambdas as well, but because the JVM doesn't support lambdas, they must be <em>encoded</em> somehow, and the encoding that Oracle chose was different from the one Scala had chosen before, which meant that you couldn't pass a Java lambda to a Scala method expecting a Scala <code>Function</code>. The solution in this case was that the Scala developers completely re-wrote their encoding of lambdas to be compatible with the encoding Oracle had chosen. This actually broke backwards-compatibility in some places.</p>\n"}, {"tags": [], "owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "is_accepted": false, "score": 2, "last_activity_date": 1536310967, "last_edit_date": 1536310967, "creation_date": 1535148257, "answer_id": 52012249, "question_id": 48033944, "link": "https://stackoverflow.com/questions/48033944/how-are-coroutines-implemented-in-jvm-langs-without-jvm-support/52012249#52012249", "title": "How are coroutines implemented in JVM langs without JVM support?", "body": "<p>The <a href=\"http://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html\" rel=\"nofollow noreferrer\">Project Loom</a> was preceded by the <a href=\"http://www.paralleluniverse.co/quasar/\" rel=\"nofollow noreferrer\">Quasar</a> library by the same author.</p>\n\n<p>Here is a quote from it's <a href=\"http://docs.paralleluniverse.co/quasar/#internals\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Internally, a fiber is a continuation which is then scheduled in a\n  scheduler. A continuation captures the instantaneous state of a\n  computation, and allows it to be suspended and then resumed at a later\n  time from the point where it was suspended. Quasar creates\n  continuations by instrumenting (at the bytecode level) suspendable\n  methods. For scheduling, Quasar uses ForkJoinPool, which is a very\n  efficient, work-stealing, multi-threaded scheduler.</p>\n  \n  <p>Whenever a class is loaded, Quasar\u2019s instrumentation module (usually\n  run as a Java agent) scans it for suspendable methods. Every\n  suspendable method f is then instrumented in the following way: It is\n  scanned for calls to other suspendable methods. For every call to a\n  suspendable method g, some code is inserted before (and after) the\n  call to g that saves (and restores) the state of a local variables to\n  the fiber\u2019s stack (a fiber manages its own stack), and records the\n  fact that this (i.e. the call to g) is a possible suspension point. At\n  the end of this \u201csuspendable function chain\u201d, we\u2019ll find a call to\n  Fiber.park. park suspends the fiber by throwing a SuspendExecution\n  exception (which the instrumentation prevents you from catching, even\n  if your method contains a catch(Throwable t) block).</p>\n  \n  <p>If g indeed blocks, the SuspendExecution exception will be caught by\n  the Fiber class. When the fiber is awakened (with unpark), method f\n  will be called, and then the execution record will show that we\u2019re\n  blocked at the call to g, so we\u2019ll immediately jump to the line in f\n  where g is called, and call it. Finally, we\u2019ll reach the actual\n  suspension point (the call to park), where we\u2019ll resume execution\n  immediately following the call. When g returns, the code inserted in f\n  will restore f\u2019s local variables from the fiber stack.</p>\n  \n  <p>This process sounds complicated, but its incurs a performance overhead\n  of no more than 3%-5%.</p>\n</blockquote>\n\n<p>It seems that almost all pure java <a href=\"https://stackoverflow.com/questions/1456083/continuations-in-java\">continuation</a> <a href=\"https://stackoverflow.com/questions/2846428/available-coroutine-libraries-in-java\">libraries</a> used similar bytecode instrumentation approach to capture and restore local variables on the stack frames.</p>\n\n<p>Only Kotlin and Scala compilers were brave enough to implement <a href=\"https://discuss.kotlinlang.org/t/how-much-of-a-leaky-abstraction-coroutines-are/2370\" rel=\"nofollow noreferrer\">more detached</a> and potentially more performant approach with <a href=\"https://github.com/Kotlin/kotlin-coroutines/blob/master/kotlin-coroutines-informal.md#continuation-passing-style\" rel=\"nofollow noreferrer\">CPS transformations</a> to state machines mentioned in some other answers here.</p>\n"}], "owner": {"reputation": 3458, "user_id": 3424394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/w0AH1.jpg?s=128&g=1", "display_name": "marknorkin", "link": "https://stackoverflow.com/users/3424394/marknorkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3205, "favorite_count": 14, "accepted_answer_id": 48034412, "answer_count": 4, "score": 52, "last_activity_date": 1536310967, "creation_date": 1514636821, "last_edit_date": 1514647835, "question_id": 48033944, "link": "https://stackoverflow.com/questions/48033944/how-are-coroutines-implemented-in-jvm-langs-without-jvm-support", "title": "How are coroutines implemented in JVM langs without JVM support?", "body": "<p>This question came up after reading the <a href=\"http://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html\" rel=\"noreferrer\">Loom proposal</a>, which describes an approach of implementing coroutines in the Java programming language.</p>\n\n<p>Particularly this proposal says that to implement this feature in the language, additional JVM support will be required.</p>\n\n<p>As I understand it there are already several languages on the JVM that have coroutines as part of their feature set such as Kotlin and Scala.</p>\n\n<p>So how is this feature implemented without additional support and can it be implemented efficiently without it?</p>\n"}, {"tags": ["android", "android-studio", "intellij-idea", "kotlin", "nullable"], "comments": [{"owner": {"reputation": 2886, "user_id": 2960034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2155e960e7c2119d24d00cffcfa03368?s=128&d=identicon&r=PG&f=1", "display_name": "y.bedrov", "link": "https://stackoverflow.com/users/2960034/y-bedrov"}, "edited": false, "score": 0, "creation_date": 1515075931, "post_id": 48033208, "comment_id": 83169548, "body": "Have you checked this article about adding annotations: <a href=\"https://developer.android.com/studio/write/annotations.html\" rel=\"nofollow noreferrer\">developer.android.com/studio/write/annotations.html</a> ? Also please check inspection settings in &quot;Settings | Editor | Inspections - Java - Probable Bugs - Constant conditions and exceptions&quot; and &quot;Settings | Editor | Inspections - Java - Probable Bugs - @NotNull/@Nullable problems&quot;"}, {"owner": {"reputation": 18638, "user_id": 981715, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6d6386f73f30139271b8f38facf57776?s=128&d=identicon&r=PG", "display_name": "Eugen Martynov", "link": "https://stackoverflow.com/users/981715/eugen-martynov"}, "reply_to_user": {"reputation": 2886, "user_id": 2960034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2155e960e7c2119d24d00cffcfa03368?s=128&d=identicon&r=PG&f=1", "display_name": "y.bedrov", "link": "https://stackoverflow.com/users/2960034/y-bedrov"}, "edited": false, "score": 0, "creation_date": 1515083682, "post_id": 48033208, "comment_id": 83174269, "body": "Checked that I see it, check that it looks like expected. But two my cases are still same"}], "answers": [{"comments": [{"owner": {"reputation": 4001, "user_id": 2711056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d97e42c16478ae2a756bd8a52a83fc7b?s=128&d=identicon&r=PG", "display_name": "MyDogTom", "link": "https://stackoverflow.com/users/2711056/mydogtom"}, "edited": false, "score": 0, "creation_date": 1514668921, "post_id": 48036688, "comment_id": 83046249, "body": "That option is present in IDEA 2017.3.2, but is absent in AS 3.1 canary 6 :("}, {"owner": {"reputation": 18638, "user_id": 981715, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6d6386f73f30139271b8f38facf57776?s=128&d=identicon&r=PG", "display_name": "Eugen Martynov", "link": "https://stackoverflow.com/users/981715/eugen-martynov"}, "edited": false, "score": 0, "creation_date": 1514839313, "post_id": 48036688, "comment_id": 83078356, "body": "I see it in the IDEA but not in AS. However, looks like it is ignored when I try to generate method that implements Kotlin abstract class method"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1514658100, "creation_date": 1514658100, "answer_id": 48036688, "question_id": 48033208, "link": "https://stackoverflow.com/questions/48033208/various-questions-nonnull-notnull-and-parametersarenonnullbydefault/48036688#48036688", "title": "Various questions @NonNull, @NotNull and @ParametersAreNonnullByDefault", "body": "<p>Which annotations to use for null/not-null is set under Configure annotations... in the Compiler page of the Settings/Preferences dialog. Select the one you want and press the checkmark button. See <a href=\"https://www.jetbrains.com/help/idea/nullable-notnull-configuration-dialog.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/nullable-notnull-configuration-dialog.html</a> for documentation.</p>\n\n<p>I can't test right now whether IDEA/AS use the default annotations from there when overriding a method which already uses another, but if they don't you'll need to file a ticket.</p>\n"}], "owner": {"reputation": 18638, "user_id": 981715, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6d6386f73f30139271b8f38facf57776?s=128&d=identicon&r=PG", "display_name": "Eugen Martynov", "link": "https://stackoverflow.com/users/981715/eugen-martynov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1514658100, "creation_date": 1514631031, "last_edit_date": 1514631348, "question_id": 48033208, "link": "https://stackoverflow.com/questions/48033208/various-questions-nonnull-notnull-and-parametersarenonnullbydefault", "title": "Various questions @NonNull, @NotNull and @ParametersAreNonnullByDefault", "body": "<p>I'm an Android dev who is using AndroidStudio or IntelliJ IDEA.</p>\n\n<p>I tend to trust my IDE and I'm annoyed with next facts:</p>\n\n<ol>\n<li>In android project when IDE autogenerates a method in java that extends Kotlin class then both IDE uses <code>@NotNull</code> instead of <code>@NonNull</code>, is there setting for this? This</li>\n<li>We have <code>@ParametersAreNonnullByDefault</code> but when I override the method from the point 1 and I don't put any annotation IDE warns me, but why?</li>\n</ol>\n\n<p>Am I wrong in my assumptions?\nAre there solutions?</p>\n"}, {"tags": ["java", "generics", "kotlin", "type-erasure", "visitor"], "answers": [{"comments": [{"owner": {"reputation": 15065, "user_id": 723090, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ML1tj.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/723090/mark"}, "edited": false, "score": 1, "creation_date": 1514636850, "post_id": 48033654, "comment_id": 83037816, "body": "That makes sense, thanks! Somehow I didn&#39;t recognize the <code>[L</code>, or I might have realized the cast failed because it&#39;s an array..."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 15065, "user_id": 723090, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ML1tj.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/723090/mark"}, "edited": false, "score": 0, "creation_date": 1514636892, "post_id": 48033654, "comment_id": 83037829, "body": "It&#39;s an easy thing to miss, happens to me all the time :)"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 1, "last_activity_date": 1514634549, "creation_date": 1514634549, "answer_id": 48033654, "question_id": 48033144, "link": "https://stackoverflow.com/questions/48033144/java-kotlin-cast-exception-for-visitor-pattern-with-generic-return-type/48033654#48033654", "title": "Java/Kotlin cast exception for visitor pattern with generic return type", "body": "<p>I'm pretty sure this is a duplicate of this question: <a href=\"https://stackoverflow.com/a/9058259/4465208\">https://stackoverflow.com/a/9058259/4465208</a></p>\n\n<p>However, to provide a specific solution, you could replace the <code>vararg</code> argument with a <code>List&lt;T&gt;</code> instead, which will work just fine:</p>\n\n<pre><code>class Split(val left: TreeElem, val right: TreeElem) : TreeElem {\n    override fun &lt;T&gt; accept(visitor: TreeVisitor&lt;T&gt;): T {\n        return visitor.combine(listOf(\n                visitor.visit(this),\n                left.accept(visitor),\n                right.accept(visitor)))\n    }\n}\n\ninterface TreeVisitor&lt;T&gt; {\n    fun combine(inputs: List&lt;T&gt;): T\n    // ...\n}\n\nclass Printer : TreeVisitor&lt;CharSequence&gt; {\n    override fun combine(inputs: List&lt;CharSequence&gt;): CharSequence {\n        return inputs.joinToString(\" \")\n    }\n    // ...\n}\n</code></pre>\n\n<p>Not as pretty, but it plays nice with generics.</p>\n"}], "owner": {"reputation": 15065, "user_id": 723090, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ML1tj.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/723090/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "closed_date": 1514636982, "accepted_answer_id": 48033654, "answer_count": 1, "score": 1, "last_activity_date": 1514634549, "creation_date": 1514630476, "last_edit_date": 1514631244, "question_id": 48033144, "link": "https://stackoverflow.com/questions/48033144/java-kotlin-cast-exception-for-visitor-pattern-with-generic-return-type", "closed_reason": "Duplicate", "title": "Java/Kotlin cast exception for visitor pattern with generic return type", "body": "<p>I'm trying to use something like the visitor pattern, <a href=\"https://stackoverflow.com/q/29593091/723090\">but</a> with return values.</p>\n\n<p>However, although there are no explicit casts, I'm getting a ClassCastException:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Ljava.lang.CharSequence;\n    at Printer.combine(...)\n    at Split.accept(...)\n    at MWEKt.main(...)\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>interface TreeElem {\n    fun &lt;T&gt; accept(visitor: TreeVisitor&lt;T&gt;): T\n}\n\nclass Leaf: TreeElem {\n    override fun &lt;T&gt; accept(visitor: TreeVisitor&lt;T&gt;): T {\n        return visitor.visit(this)\n    }\n}\n\nclass Split(val left: TreeElem, val right: TreeElem): TreeElem {\n    override fun &lt;T&gt; accept(visitor: TreeVisitor&lt;T&gt;): T {\n        return visitor.combine(  // this causes cast error\n            visitor.visit(this),\n            left.accept(visitor),\n            right.accept(visitor))\n    }\n}\n\ninterface TreeVisitor&lt;T&gt; {\n    // multiple implementations with different T in future (only one in this example)\n    fun visit(tree: Leaf): T\n    fun visit(tree: Split): T\n    fun combine(vararg inputs: T): T\n}\n\nclass Printer: TreeVisitor&lt;CharSequence&gt; {\n    override fun combine(vararg inputs: CharSequence): CharSequence { // error here\n        return inputs.joinToString(\" \")\n    }\n    override fun visit(tree: Leaf): CharSequence { return \"leaf\" }\n    override fun visit(tree: Split): CharSequence { return \"split\" }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val tree = Split(Leaf(), Leaf())\n    val printer = Printer()\n    println(tree.accept(printer))\n}\n</code></pre>\n\n<p>I don't know what the problem is. Am I trying to do something impossible, or am I failing to express it correctly, or is type erasure making something that should be possible impossible?</p>\n\n<p>My thoughts so far:</p>\n\n<ol>\n<li><code>Printer.combine</code> expects <code>CharSequence</code>s;</li>\n<li>I'm calling a generic overload of <code>TreeElem.accept</code> that returns <code>CharSequence</code></li>\n<li>The compiler probably inserts a cast into the JVM code (type erasure?)</li>\n<li>But the runtime types are compatible, so the cast should work</li>\n</ol>\n\n<p>Since the last point is in conflict with realist, I'm probably understanding something incorrectly.</p>\n\n<p>EDIT: I've translated the MWE to Java to see if it's a Kotlin issue and to attract an answer:</p>\n\n<p></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>interface TreeElem {\n    &lt;T&gt; T accept(TreeVisitor&lt;T&gt; visitor);\n}\n\nclass Leaf implements TreeElem {\n    public &lt;T&gt; T accept(TreeVisitor&lt;T&gt; visitor) {\n        return visitor.visit(this);\n    }\n}\n\nclass Split implements TreeElem {\n    private TreeElem left;\n    private TreeElem right;\n    Split(TreeElem left, TreeElem right) {\n        this.left = left;\n        this.right = right;\n    }\n    public &lt;T&gt; T accept(TreeVisitor&lt;T&gt; visitor) {\n        return visitor.combine(\n            visitor.visit(this),\n            left.accept(visitor),\n            right.accept(visitor));\n    }\n}\n\ninterface TreeVisitor&lt;T&gt; {\n    T visit(Leaf tree);\n    T visit(Split tree);\n    T combine(T... inputs);\n}\n\nclass Printer implements TreeVisitor&lt;CharSequence&gt; {\n    public CharSequence combine(CharSequence... inputs) {\n        StringBuilder text = new StringBuilder();\n        for (CharSequence input : inputs) {\n            text.append(input);\n        }\n        return text;\n    }\n    public CharSequence visit(Leaf tree) { return \"leaf\"; }\n    public CharSequence visit(Split tree) { return \"split\"; }\n}\n\npublic class MWEjava {\n    public static void main(String[] args) {\n        TreeElem tree = new Split(new Leaf(), new Leaf());\n        Printer printer = new Printer();\n        System.out.println(tree.accept(printer));\n    }\n}\n</code></pre>\n\n\n\n<p>The error is the same for the Java case.</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 81986, "user_id": 15880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7618ff7a4952a494b8f41bd0df646790?s=128&d=identicon&r=PG", "display_name": "Powerlord", "link": "https://stackoverflow.com/users/15880/powerlord"}, "edited": false, "score": 1, "creation_date": 1514630429, "post_id": 48032892, "comment_id": 83036319, "body": "Techically doing that is Java <i>also</i> hides the member of the super type, Java&#39;s compiler just doesn&#39;t error out you when that happens... but it probably tosses a warning at you."}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1514634414, "post_id": 48032892, "comment_id": 83037219, "body": "<a href=\"https://kotlinlang.org/docs/reference/classes.html#overriding-methods\" rel=\"nofollow noreferrer\">Unlike Java</a>, Kotlin requires explicit annotations for overridable members and for overrides."}], "answers": [{"comments": [{"owner": {"reputation": 4205, "user_id": 2622118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/425bb7d5bd7c5370ba53200dc40f11de?s=128&d=identicon&r=PG", "display_name": "mallaudin", "link": "https://stackoverflow.com/users/2622118/mallaudin"}, "edited": false, "score": 0, "creation_date": 1514630171, "post_id": 48032980, "comment_id": 83036264, "body": "I know it will work like this. But why the above code gives error?"}, {"owner": {"reputation": 21213, "user_id": 2826147, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gbeN1.jpg?s=128&g=1", "display_name": "Amit Vaghela", "link": "https://stackoverflow.com/users/2826147/amit-vaghela"}, "reply_to_user": {"reputation": 4205, "user_id": 2622118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/425bb7d5bd7c5370ba53200dc40f11de?s=128&d=identicon&r=PG", "display_name": "mallaudin", "link": "https://stackoverflow.com/users/2622118/mallaudin"}, "edited": false, "score": 0, "creation_date": 1514630462, "post_id": 48032980, "comment_id": 83036329, "body": "it doest override member of parent and you need to override because you are extening parent class so it show this error"}, {"owner": {"reputation": 21213, "user_id": 2826147, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gbeN1.jpg?s=128&g=1", "display_name": "Amit Vaghela", "link": "https://stackoverflow.com/users/2826147/amit-vaghela"}, "reply_to_user": {"reputation": 4205, "user_id": 2622118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/425bb7d5bd7c5370ba53200dc40f11de?s=128&d=identicon&r=PG", "display_name": "mallaudin", "link": "https://stackoverflow.com/users/2622118/mallaudin"}, "edited": false, "score": 0, "creation_date": 1514630557, "post_id": 48032980, "comment_id": 83036348, "body": "@mallaudin The initial error is because a data class can&#39;t have parameters in its primary constructor other than val or var properties. Removing the data keyword lifts this restriction."}, {"owner": {"reputation": 21213, "user_id": 2826147, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gbeN1.jpg?s=128&g=1", "display_name": "Amit Vaghela", "link": "https://stackoverflow.com/users/2826147/amit-vaghela"}, "reply_to_user": {"reputation": 4205, "user_id": 2622118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/425bb7d5bd7c5370ba53200dc40f11de?s=128&d=identicon&r=PG", "display_name": "mallaudin", "link": "https://stackoverflow.com/users/2622118/mallaudin"}, "edited": false, "score": 0, "creation_date": 1514630572, "post_id": 48032980, "comment_id": 83036353, "body": "@mallaudin please check <a href=\"https://stackoverflow.com/a/44129826/2826147\">stackoverflow.com/a/44129826/2826147</a> and <a href=\"https://stackoverflow.com/questions/44419997/extending-data-class-from-a-sealed-class-in-kotlin\" title=\"extending data class from a sealed class in kotlin\">stackoverflow.com/questions/44419997/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21213, "user_id": 2826147, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gbeN1.jpg?s=128&g=1", "display_name": "Amit Vaghela", "link": "https://stackoverflow.com/users/2826147/amit-vaghela"}, "is_accepted": false, "score": 1, "last_activity_date": 1514636081, "last_edit_date": 1514636081, "creation_date": 1514629216, "answer_id": 48032980, "question_id": 48032892, "link": "https://stackoverflow.com/questions/48032892/declaring-same-property-in-child-class-as-in-parent/48032980#48032980", "title": "Declaring same property in Child class as in Parent", "body": "<p>Change it like,</p>\n\n<pre><code>open class ClassParent(name: String) {\n\n}\n</code></pre>\n\n<hr>\n\n<pre><code>class ClassChild(name: String) : ClassParent(name) {\n\n}\n</code></pre>\n\n<p>you can use init block, <a href=\"https://stackoverflow.com/questions/36254340/kotlin-constructor-with-super-class\">check details</a></p>\n"}, {"comments": [{"owner": {"reputation": 4205, "user_id": 2622118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/425bb7d5bd7c5370ba53200dc40f11de?s=128&d=identicon&r=PG", "display_name": "mallaudin", "link": "https://stackoverflow.com/users/2622118/mallaudin"}, "edited": false, "score": 0, "creation_date": 1514630545, "post_id": 48033127, "comment_id": 83036343, "body": "With override it says name property is final in User class"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 4205, "user_id": 2622118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/425bb7d5bd7c5370ba53200dc40f11de?s=128&d=identicon&r=PG", "display_name": "mallaudin", "link": "https://stackoverflow.com/users/2622118/mallaudin"}, "edited": false, "score": 0, "creation_date": 1514631663, "post_id": 48033127, "comment_id": 83036581, "body": "Ohh right. You need to make the <code>name</code> open as well."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 1, "last_activity_date": 1514631646, "last_edit_date": 1514631646, "creation_date": 1514630332, "answer_id": 48033127, "question_id": 48032892, "link": "https://stackoverflow.com/questions/48032892/declaring-same-property-in-child-class-as-in-parent/48033127#48033127", "title": "Declaring same property in Child class as in Parent", "body": "<p>The issue is, that you're hiding the implementation of the original property. But there's one possibility to do so anyhow:</p>\n\n<pre><code>open class User(protected open var name: String)\n\nclass TwitterUser(override var name: String) : User(name)\n</code></pre>\n\n<p>You just have to consider, that this mainly changes the implementation of the property. You will not be able to access <code>User.name</code> or <code>TwitterUser.name</code> separately. It's just the same.</p>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 1, "last_activity_date": 1514655710, "last_edit_date": 1514655710, "creation_date": 1514644417, "answer_id": 48034881, "question_id": 48032892, "link": "https://stackoverflow.com/questions/48032892/declaring-same-property-in-child-class-as-in-parent/48034881#48034881", "title": "Declaring same property in Child class as in Parent", "body": "<p>If your superclass already has a <code>name</code> property, any subclass will have it automatically, too. Why would you then define it again in that child? It's better to simply define it as a parameter of the constructor without making it another property:</p>\n\n<pre><code>open class User(protected var name: String)\n//name is not a val/val! simply passed to the constructor as an argument\nclass TwitterUser(name: String) : User(name)\n</code></pre>\n\n<p>Otherwise, if you really need to override that property, make it open in the parent and override in the child:</p>\n\n<pre><code>open class User(protected open var name: String)\nclass TwitterUser(override var name: String) : User(name) \n</code></pre>\n"}], "owner": {"reputation": 4205, "user_id": 2622118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/425bb7d5bd7c5370ba53200dc40f11de?s=128&d=identicon&r=PG", "display_name": "mallaudin", "link": "https://stackoverflow.com/users/2622118/mallaudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1026, "favorite_count": 0, "accepted_answer_id": 48033127, "answer_count": 3, "score": 1, "last_activity_date": 1514655710, "creation_date": 1514628485, "question_id": 48032892, "link": "https://stackoverflow.com/questions/48032892/declaring-same-property-in-child-class-as-in-parent", "title": "Declaring same property in Child class as in Parent", "body": "<p>I have stared Kotlin recently and have experience in Java. In Java, we can declare the field with same name as it is in parent. When I do same in <code>Kotlin</code> it gives error <code>name hides member of Super type User</code>. What am I missing here?</p>\n\n<p>Kotlin</p>\n\n<pre><code>open class User(protected var name: String)\n\nclass TwitterUser(var name: String) : User(name)\n</code></pre>\n\n<p>Same concept for Java</p>\n\n<pre><code>public class A {\n    protected String name;\n}\n\npublic class B extends A {\n    String name;\n}\n</code></pre>\n"}, {"tags": ["kotlin", "gson"], "comments": [{"owner": {"reputation": 422, "user_id": 8012913, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yJrFbolckJ0/AAAAAAAAAAI/AAAAAAAAEgE/4ddZGkvK-T4/photo.jpg?sz=128", "display_name": "nivesh shastri", "link": "https://stackoverflow.com/users/8012913/nivesh-shastri"}, "edited": false, "score": 0, "creation_date": 1514620121, "post_id": 48031869, "comment_id": 83034146, "body": "Hello @Kankana, your model class does not looks proper. Use gson converter or pojo generator for create model class."}, {"owner": {"reputation": 221, "user_id": 4693278, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/PRYJb.jpg?s=128&g=1", "display_name": "Avinash Kumar", "link": "https://stackoverflow.com/users/4693278/avinash-kumar"}, "edited": false, "score": 0, "creation_date": 1514660647, "post_id": 48031869, "comment_id": 83044055, "body": "Look at your JSON <code>payback_schedule</code> is an array not an object. It will help you <a href=\"https://stackoverflow.com/a/45605731/4693278\">stackoverflow.com/a/45605731/4693278</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5062, "user_id": 1197251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f988c493109880ba789886bfe5c0514?s=128&d=identicon&r=PG", "display_name": "dominicoder", "link": "https://stackoverflow.com/users/1197251/dominicoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1514619551, "creation_date": 1514619551, "answer_id": 48031996, "question_id": 48031869, "link": "https://stackoverflow.com/questions/48031869/gson-throwing-expected-begin-object-but-was-begin-array/48031996#48031996", "title": "GSON throwing Expected BEGIN_OBJECT but was BEGIN_ARRAY", "body": "<p>Your model object does not match your Json.</p>\n\n<p>You are trying to parse a JsonObject <code>PaymentScheduleModel</code> which has sub object \"payback_schedule\" of type <code>PaymentSchedule</code> but you have a JsonObject which has a sub object \"data\" which is what has the sub object \"payback_schedule\". So really, you want to parse the \"data\" block.</p>\n\n<p>You have two options:</p>\n\n<p>1: Create another model that wraps the data block and parse that:</p>\n\n<pre><code>data class PaymentScheduleData(@SerializedName(\"data\") val payback_schedule_model: PaymentScheduleModel)\n\noverride fun onSuccess(str_SUCCESS: String) {\n    val paymentScheduleData = Gson().fromJson&lt;PaymentScheduleData&gt;(str_SUCCESS, PaymentScheduleData::class.java)\n    // Now use paymentScheduleData.payback_schedule_model\n}\n</code></pre>\n\n<p>2: Pull out the data portion first, then parse:</p>\n\n<pre><code>override fun onSuccess(str_SUCCESS: String) {\n    // Get the root JsonObject\n    val jsonObject = Gson().fromJson&lt;JsonObject&gt;(str_SUCCESS, JsonObject::class.java)\n\n    // Get the \"data\" block that matches the model and parse that\n    val paymentScheduleModel = Gson().fromJson&lt;PaymentScheduleModel&gt;(jsonObject.getAsJsonObject(\"data\"), PaymentScheduleModel::class.java)\n}\n</code></pre>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": false, "score": 0, "last_activity_date": 1514624358, "last_edit_date": 1514624358, "creation_date": 1514623936, "answer_id": 48032380, "question_id": 48031869, "link": "https://stackoverflow.com/questions/48031869/gson-throwing-expected-begin-object-but-was-begin-array/48032380#48032380", "title": "GSON throwing Expected BEGIN_OBJECT but was BEGIN_ARRAY", "body": "<p>The error is telling you that <code>payback_schedule</code> is holding an array instead of object. So, <code>payback_schedule</code> should be <code>Array&lt;PaymentSchedule&gt;</code> instead of <code>PaymentSchedule</code>.</p>\n\n<pre><code>data class PaymentScheduleModel(@SerializedName(\"payback_schedule\") val payback_schedule: Array&lt;PaymentSchedule&gt;)\n</code></pre>\n\n<p>PS. You are suggested to implement your own <code>equals()</code> and <code>hashCode()</code> function if your data class contains <code>Array</code> because the default implementation of <code>Array</code>'s <code>equals()</code> function compares the <a href=\"https://kotlinlang.org/docs/reference/equality.html#referential-equality\" rel=\"nofollow noreferrer\">referential equality</a>. Suggested reading: <a href=\"https://stackoverflow.com/questions/37524422/equals-method-for-data-class-in-kotlin\">Equals method for data class in kotlin</a></p>\n"}], "owner": {"reputation": 35, "user_id": 6760088, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/63d7870a722616dcb94ca1c9303f3733?s=128&d=identicon&r=PG&f=1", "display_name": "A B", "link": "https://stackoverflow.com/users/6760088/a-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1134, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1514624358, "creation_date": 1514618432, "question_id": 48031869, "link": "https://stackoverflow.com/questions/48031869/gson-throwing-expected-begin-object-but-was-begin-array", "title": "GSON throwing Expected BEGIN_OBJECT but was BEGIN_ARRAY", "body": "<p>Facing this problem past few days.Does any guys check this issue? Any help would be greatly appreciated.How can I solved this problem?</p>\n\n<blockquote>\n  <p>GSON throwing Expected BEGIN_OBJECT but was BEGIN_ARRAY</p>\n</blockquote>\n\n<p>Problem coming from</p>\n\n<pre><code> override fun onSuccess(str_SUCCESS: String)\n    {\n        System.out.println(\"JSON_IS\"+str_SUCCESS)\n\n       val paymentScheduleModel = Gson().fromJson&lt;PaymentScheduleModel&gt;(str_SUCCESS, PaymentScheduleModel::class.java) // Problem here\n\n    }\n</code></pre>\n\n<p><strong>Json Response is</strong> </p>\n\n<pre><code>{\n  \"status\": {\n    \"statusCode\": 10016,\n    \"isSuccess\": true,\n    \"message\": \"Success\"\n  },\n  \"data\": {\n    \"payback_schedule\": [\n      {\n        \"id\": 2,\n        \"paid_amount\": \"INR NaN\",\n        \"paidStatus\": \"Upcoming Payback\",\n        \"paid_status\": \"P\",\n        \"s_date\": \"05/01/2018 12:31:10\",\n        \"e_date\": \"11/01/2018 12:31:10\",\n        \"current_balance\": \"INR 399\",\n        \"payanytime_button_status\": \"active\",\n        \"btnColor\": \"red\",\n        \"btnHexColor\": \"#D2322D\"\n      },\n      {\n        \"id\": 3,\n        \"paid_amount\": \"INR NaN\",\n        \"paidStatus\": \"Upcoming Payback\",\n        \"paid_status\": \"P\",\n        \"s_date\": \"12/01/2018 12:31:10\",\n        \"e_date\": \"18/01/2018 12:31:10\",\n        \"current_balance\": \"INR 399\",\n        \"payanytime_button_status\": \"active\",\n        \"btnColor\": \"red\",\n        \"btnHexColor\": \"#D2322D\"\n      }\n    ]\n  }\n}\n</code></pre>\n\n<p><strong>PaymentScheduleModel</strong></p>\n\n<pre><code>data class PaymentScheduleModel(@SerializedName(\"payback_schedule\") val payback_schedule: PaymentSchedule)\n\ndata class PaymentSchedule\n\n                      (@SerializedName(\"id\") val id: Int,\n                       @SerializedName(\"paid_amount\") val paid_amount:String,\n                       @SerializedName(\"paidStatus\") val paidStatus:String,\n                       @SerializedName(\"paid_status\") val paid_status:String,\n                       @SerializedName(\"s_date\") val s_date:String,\n                       @SerializedName(\"e_date\") val e_date:String,\n                       @SerializedName(\"current_balance\") val current_balance:String,\n                       @SerializedName(\"payanytime_button_status\") val payanytime_button_status:String,\n                       @SerializedName(\"btnColor\") val btnColor:String,\n                       @SerializedName(\"btnHexColor\") val btnHexColor:String)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 3405, "user_id": 7034183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YcIEw.jpg?s=128&g=1", "display_name": "Remario", "link": "https://stackoverflow.com/users/7034183/remario"}, "edited": false, "score": 0, "creation_date": 1514610352, "post_id": 48031107, "comment_id": 83032448, "body": "could you explain your intended logic flow?"}, {"owner": {"reputation": 6223, "user_id": 5962715, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tCJbg.gif?s=128&g=1", "display_name": "Kiran Benny Joseph", "link": "https://stackoverflow.com/users/5962715/kiran-benny-joseph"}, "reply_to_user": {"reputation": 3405, "user_id": 7034183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YcIEw.jpg?s=128&g=1", "display_name": "Remario", "link": "https://stackoverflow.com/users/7034183/remario"}, "edited": false, "score": 0, "creation_date": 1514610584, "post_id": 48031107, "comment_id": 83032494, "body": "I set adapter in oncreatevew of my fragment. I am also calling network function in that method. The response is getting on the fragment"}, {"owner": {"reputation": 3405, "user_id": 7034183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YcIEw.jpg?s=128&g=1", "display_name": "Remario", "link": "https://stackoverflow.com/users/7034183/remario"}, "edited": false, "score": 0, "creation_date": 1514610826, "post_id": 48031107, "comment_id": 83032533, "body": "the endpoint your hitting did you debug it, to validate the backened actually sending back data"}, {"owner": {"reputation": 6223, "user_id": 5962715, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tCJbg.gif?s=128&g=1", "display_name": "Kiran Benny Joseph", "link": "https://stackoverflow.com/users/5962715/kiran-benny-joseph"}, "reply_to_user": {"reputation": 3405, "user_id": 7034183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YcIEw.jpg?s=128&g=1", "display_name": "Remario", "link": "https://stackoverflow.com/users/7034183/remario"}, "edited": false, "score": 0, "creation_date": 1514611082, "post_id": 48031107, "comment_id": 83032580, "body": "@Remario yea... I debugged it"}, {"owner": {"reputation": 3405, "user_id": 7034183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YcIEw.jpg?s=128&g=1", "display_name": "Remario", "link": "https://stackoverflow.com/users/7034183/remario"}, "edited": false, "score": 0, "creation_date": 1514611107, "post_id": 48031107, "comment_id": 83032585, "body": "results, on the server side, ok?"}, {"owner": {"reputation": 6223, "user_id": 5962715, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tCJbg.gif?s=128&g=1", "display_name": "Kiran Benny Joseph", "link": "https://stackoverflow.com/users/5962715/kiran-benny-joseph"}, "reply_to_user": {"reputation": 3405, "user_id": 7034183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YcIEw.jpg?s=128&g=1", "display_name": "Remario", "link": "https://stackoverflow.com/users/7034183/remario"}, "edited": false, "score": 0, "creation_date": 1514611262, "post_id": 48031107, "comment_id": 83032621, "body": "There is no connection between serverside and code with adapter @Remario"}], "answers": [{"tags": [], "owner": {"reputation": 6223, "user_id": 5962715, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tCJbg.gif?s=128&g=1", "display_name": "Kiran Benny Joseph", "link": "https://stackoverflow.com/users/5962715/kiran-benny-joseph"}, "is_accepted": false, "score": 0, "last_activity_date": 1514613849, "creation_date": 1514613849, "answer_id": 48031464, "question_id": 48031107, "link": "https://stackoverflow.com/questions/48031107/variable-value-gets-null-in-retrofit/48031464#48031464", "title": "variable value gets null in retrofit", "body": "<p>Last I found it</p>\n\n<p>Actually I am calling <code>MyTransactionFragment()::onResponse</code> in subscriber. which means I am putting the result on the new instance of <code>MyTransactionFragment</code>. So I changed this to </p>\n\n<pre><code>disposable.add(mApiSocket!!.transaction(\"\"+page+1)\n                            .subscribeOn(Schedulers.newThread())\n                            .observeOn(AndroidSchedulers.mainThread())\n                            .subscribe(::onResponse,::onError))\n</code></pre>\n"}], "owner": {"reputation": 6223, "user_id": 5962715, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/tCJbg.gif?s=128&g=1", "display_name": "Kiran Benny Joseph", "link": "https://stackoverflow.com/users/5962715/kiran-benny-joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514613849, "creation_date": 1514609885, "question_id": 48031107, "link": "https://stackoverflow.com/questions/48031107/variable-value-gets-null-in-retrofit", "title": "variable value gets null in retrofit", "body": "<p>I have a fragment which has an adapter. I am using retrofit to fetch data from web</p>\n\n<p>my frangment</p>\n\n<pre><code>class MyTransactionFragment : Fragment() {\n    val disposable = CompositeDisposable()\n    var transactionDetailList:ArrayList&lt;TransactionData&gt;? = null\n    private var mApiSocket: ApiSocket? = null\n    private var mRecyclerView:RecyclerView? = null\n    var adapter:TransactionAdapter? = null\n    companion object {\n        val TAG = ItemFragment::class.java.simpleName!!\n        fun newInstance(transactionPojo: TransactionPojo): MyTransactionFragment {\n            val fragment = MyTransactionFragment()\n            val args = Bundle()\n            args.putSerializable(Constants.TRANSACTIONS, transactionPojo)\n            fragment.arguments = args\n            return fragment\n        }\n    }\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n        val view = inflater.inflate(R.layout.fragment_my_transaction, container, false)\n        mApiSocket = Utils().getApiSocket(activity!!)\n        val layoutManager = LinearLayoutManager(activity, LinearLayoutManager.VERTICAL, false)\n        view.mRecyclerViewTransaction.layoutManager = layoutManager\n        view.mRecyclerViewTransaction.setHasFixedSize(true)\n        if (arguments!=null &amp;&amp; arguments!!.getSerializable(Constants.TRANSACTIONS) != null){\n            val transactionPojo = arguments!!.getSerializable(Constants.TRANSACTIONS) as TransactionPojo\n            transactionDetailList = ArrayList(transactionPojo.transactions.data)\n            adapter = TransactionAdapter(transactionDetailList, activity!!,disposable)\n            view.mRecyclerViewTransaction.adapter = adapter\n            mRecyclerView = view.mRecyclerViewTransaction\n            val scrollListener = object : EndlessRecyclerViewScrollListener(layoutManager) {\n                override fun onLoadMore(page: Int, totalItemsCount: Int, view: RecyclerView) {\n                    disposable.add(mApiSocket!!.transaction(\"\"+page+1)\n                            .subscribeOn(Schedulers.newThread())\n                            .observeOn(AndroidSchedulers.mainThread())\n                            .subscribe(MyTransactionFragment()::onResponse,MyTransactionFragment()::onError))\n                }\n            }\n            view.mRecyclerViewTransaction.addOnScrollListener(scrollListener)\n        }\n        return view\n    }\n\n    private fun onResponse(transactionPojo: TransactionPojo){\n        transactionDetailList = ArrayList(transactionPojo.transactions.data)\n        adapter!!.addData(transactionDetailList)  //here adapter variable gets null Why\n    }\n\n    fun onError(e: Throwable) {\n        Log.e(\"TransactionFragment\", e.toString())\n        if (e is NoNetWorkException) {\n            Utils().showSnackBar(activity!!, \"No Network connection\")\n        } else\n            Utils().showSnackBar(activity!!, \"Something went wrong please try again later\")\n        Utils().hideProgress()\n    }\n\n    override fun onDetach() {\n        super.onDetach()\n        disposable.dispose()\n    }\n\n}\n</code></pre>\n\n<p><strong>In this adapter variable in the onResponse getting null Why?</strong></p>\n"}, {"tags": ["java", "jvm", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 953, "user_id": 4070660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c16ef6b3d189409dad1c7f5622ade04c?s=128&d=identicon&r=PG&f=1", "display_name": "K.H.", "link": "https://stackoverflow.com/users/4070660/k-h"}, "edited": false, "score": 0, "creation_date": 1514630688, "post_id": 48033131, "comment_id": 83036385, "body": "Yeah, was thinking the same. But wanna make sure there isn&#39;t anything I am missing first."}, {"owner": {"reputation": 14731, "user_id": 13365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG", "display_name": "neu242", "link": "https://stackoverflow.com/users/13365/neu242"}, "reply_to_user": {"reputation": 953, "user_id": 4070660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c16ef6b3d189409dad1c7f5622ade04c?s=128&d=identicon&r=PG&f=1", "display_name": "K.H.", "link": "https://stackoverflow.com/users/4070660/k-h"}, "edited": false, "score": 0, "creation_date": 1556177970, "post_id": 48033131, "comment_id": 98350654, "body": "Did you find or create such a plugin @K.H. ?"}], "tags": [], "owner": {"reputation": 5628, "user_id": 1340183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd31e838b01c32ffe216b6d3163289f1?s=128&d=identicon&r=PG", "display_name": "evanchooly", "link": "https://stackoverflow.com/users/1340183/evanchooly"}, "is_accepted": false, "score": 1, "last_activity_date": 1514630400, "creation_date": 1514630400, "answer_id": 48033131, "question_id": 48029417, "link": "https://stackoverflow.com/questions/48029417/apply-jvmstatic-and-jvmfield-automatically-to-all-files-in-kotlin/48033131#48033131", "title": "Apply @JvmStatic and @JvmField automatically to all files in Kotlin", "body": "<p>Depending on how much work you want to put in to it, you could probably modify the allopen plugin (or write your own):  <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/compiler-plugins.html</a></p>\n"}], "owner": {"reputation": 953, "user_id": 4070660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c16ef6b3d189409dad1c7f5622ade04c?s=128&d=identicon&r=PG&f=1", "display_name": "K.H.", "link": "https://stackoverflow.com/users/4070660/k-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1514630400, "creation_date": 1514589075, "question_id": 48029417, "link": "https://stackoverflow.com/questions/48029417/apply-jvmstatic-and-jvmfield-automatically-to-all-files-in-kotlin", "title": "Apply @JvmStatic and @JvmField automatically to all files in Kotlin", "body": "<p>I was wondering if this could be somehow done using compiler parameters or a plugin. I have existing java module that I converted to kotlin, but it has a bunch of static methods/fields. At some point I wanna refactor that, but now my (java) consumer of this library doesn't work unless I manually add missing <code>@JvmStatic/@JvmField</code> annotations to companion object fields and methods.\nIs there any way to do this automatically?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["java", "android", "kotlin", "mockito", "rx-java"], "answers": [{"tags": [], "owner": {"reputation": 2662, "user_id": 2707179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUNvp.jpg?s=128&g=1", "display_name": "michalbrz", "link": "https://stackoverflow.com/users/2707179/michalbrz"}, "is_accepted": true, "score": 2, "last_activity_date": 1514589469, "creation_date": 1514589469, "answer_id": 48029453, "question_id": 48029041, "link": "https://stackoverflow.com/questions/48029041/refactor-code-to-not-throw-mockitos-unnecessarystubbingexception/48029453#48029453", "title": "Refactor code to not throw Mockito&#39;s UnnecessaryStubbingException", "body": "<p><code>UnnecessaryStubbingException</code> means you are stubbing something, but not really using it. And that's correct, in your case <code>interactor.getContact</code> should be never called in test - this is desired behaviour. So there is no point in stubbing it.</p>\n\n<p>The simplest solution would be to remove unnecessary variable <code>var find = false</code> and stubbing - substitute them with assertion at the end of your test:</p>\n\n<pre><code>verify(interactor, never()).getContact(any())\n</code></pre>\n\n<p>This is equivalent to your current solution but more straightforward than using helper variables.</p>\n"}], "owner": {"reputation": 2577, "user_id": 3451639, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/fGkB6.jpg?s=128&g=1", "display_name": "Aleksander Mielczarek", "link": "https://stackoverflow.com/users/3451639/aleksander-mielczarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1535, "favorite_count": 0, "accepted_answer_id": 48029453, "answer_count": 1, "score": 0, "last_activity_date": 1514589469, "creation_date": 1514586058, "question_id": 48029041, "link": "https://stackoverflow.com/questions/48029041/refactor-code-to-not-throw-mockitos-unnecessarystubbingexception", "title": "Refactor code to not throw Mockito&#39;s UnnecessaryStubbingException", "body": "<p>I have a simple view with button that starts <code>Intent.ACTION_PICK</code> for result and than displays chosen contact on screen. To do that following steps must be taken:</p>\n\n<ul>\n<li>check if <code>android.permission.READ_CONTACTS</code> is granted</li>\n<li>open contact activity</li>\n<li>select contact and go back to app</li>\n<li>check for <code>android.permission.READ_CONTACTS</code> again</li>\n<li>find contact by given uri</li>\n<li>show contact on screen</li>\n</ul>\n\n<p>I want to test scenario when one open contacts than revokes permission and goes back to app with selected contact. Expected result is not to call method that find contacts by its uri. </p>\n\n<p>Unfortunately current implementation throws:</p>\n\n<blockquote>\n  <p>org.mockito.exceptions.misusing.UnnecessaryStubbingException:</p>\n</blockquote>\n\n<p>for:</p>\n\n<pre><code>whenever(interactor.getContact(any())).thenReturn(Maybe.just(Contact()).doOnSuccess { find = true })\n</code></pre>\n\n<p>I know that I can replace <code>StrictStubs</code> with <code>Silent</code> but I'm looking for better solution with refactoring current code.</p>\n\n<p><strong>All necessary class and test:</strong></p>\n\n<pre><code>class Contact\n\ninterface View {\n\n    val contactClicks: Observable&lt;Any&gt;\n\n    fun setContact(contact: Contact)\n}\n\ninterface Interactor {\n\n    fun getContact(uri: String): Maybe&lt;Contact&gt;\n}\n\ninterface Router {\n\n    fun goToContacts(): Maybe&lt;String&gt;\n}\n\ninterface Permissioner {\n\n    fun requestReadContacts(): Single&lt;Boolean&gt;\n}\n\nclass Presenter(\n        private val view: View,\n        private val interactor: Interactor,\n        private val router: Router,\n        private val permissioner: Permissioner\n) {\n\n    private val disposables: CompositeDisposable = CompositeDisposable()\n\n    fun bindView() {\n        view.contactClicks\n                .flatMapSingle { permissioner.requestReadContacts() } //ask first time before opening contacts\n                .filter { it }\n                .flatMapMaybe { router.goToContacts() }\n                .flatMapMaybe {\n                    permissioner.requestReadContacts() //ask second time before using ContentResolver\n                            .filter { granted -&gt; granted }\n                            .flatMap { _ -&gt; interactor.getContact(it) }\n                }\n                .subscribeBy { view.setContact(it) }\n                .addTo(disposables)\n    }\n}\n\n@RunWith(MockitoJUnitRunner.StrictStubs::class)\nclass PresenterTest {\n\n    @Mock\n    lateinit var view: View\n\n    @Mock\n    lateinit var router: Router\n\n    @Mock\n    lateinit var permissioner: Permissioner\n\n    @Mock\n    lateinit var interactor: Interactor\n\n    @InjectMocks\n    lateinit var presenter: Presenter\n\n    private val contactClickSubject = PublishSubject.create&lt;Any&gt;()\n\n    @Before\n    fun setUp() {\n        whenever(view.contactClicks).thenReturn(contactClickSubject)\n    }\n\n    @Test\n    fun shouldNotFindContactWhenReturnedWithUriAndPermissionNotGrantedSecondTime() {\n        var firstTimeAsk = true\n        whenever(permissioner.requestReadContacts()).thenReturn(Single.fromCallable {\n            if (firstTimeAsk) {\n                firstTimeAsk = false\n                return@fromCallable true\n            } else {\n                return@fromCallable false\n            }\n        })\n        whenever(router.goToContacts()).thenReturn(Maybe.just(\"contact\"))\n        var find = false\n        whenever(interactor.getContact(any())).thenReturn(Maybe.just(Contact()).doOnSuccess { find = true })\n\n        presenter.bindView()\n        contactClickSubject.onNext(Any())\n\n        assertFalse(find)\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 3123, "user_id": 2424415, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/573bc7d4a25d71a48f0e0aa9e5667ce7?s=128&d=identicon&r=PG", "display_name": "elmorabea", "link": "https://stackoverflow.com/users/2424415/elmorabea"}, "edited": false, "score": 0, "creation_date": 1514598162, "post_id": 48029030, "comment_id": 83030552, "body": "Are you sure that NotificationPublisher is a valid BroadcastReceiver that is correctly defined in your manifest?"}], "answers": [{"comments": [{"owner": {"reputation": 720, "user_id": 5987537, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wzxo5dwGTEI/AAAAAAAAAAI/AAAAAAAAACk/7b9PzcA2R3M/photo.jpg?sz=128", "display_name": "Cristofer", "link": "https://stackoverflow.com/users/5987537/cristofer"}, "edited": false, "score": 0, "creation_date": 1610996660, "post_id": 48031190, "comment_id": 116304187, "body": "Volveremos a usar tu comment. Revivi&#243; el issue"}], "tags": [], "owner": {"reputation": 2565, "user_id": 3116787, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/9d64h.jpg?s=128&g=1", "display_name": "Jorge Gil", "link": "https://stackoverflow.com/users/3116787/jorge-gil"}, "is_accepted": true, "score": 2, "last_activity_date": 1514610913, "creation_date": 1514610913, "answer_id": 48031190, "question_id": 48029030, "link": "https://stackoverflow.com/questions/48029030/pendingintent-getbroadcast-always-returns-null-with-flag-update-current/48031190#48031190", "title": "PendingIntent.getBroadcast() always returns null with FLAG_UPDATE_CURRENT", "body": "<p>Apparently <code>PendingIntent.getBroadcast()</code> can return null without any warnings or errors if something isn't right with intent you pass into it.</p>\n\n<p>In my case, the notificationIntent had a <code>Notification</code> in it where the drawable used in <code>.setLargeIcon(drawable)</code> wasn't sized correctly or avalaible for all of the screen densities. Adding it to the mdpi, hdpi, xhdpi, etc folders solved it for me.</p>\n"}], "owner": {"reputation": 2565, "user_id": 3116787, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/9d64h.jpg?s=128&g=1", "display_name": "Jorge Gil", "link": "https://stackoverflow.com/users/3116787/jorge-gil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 48031190, "answer_count": 1, "score": 0, "last_activity_date": 1514610913, "creation_date": 1514585973, "question_id": 48029030, "link": "https://stackoverflow.com/questions/48029030/pendingintent-getbroadcast-always-returns-null-with-flag-update-current", "title": "PendingIntent.getBroadcast() always returns null with FLAG_UPDATE_CURRENT", "body": "<p>I'm trying to create a <code>PendingIntent</code> using <code>PendindIntent.getBroadcast()</code> but it always returns null despite the docs cleary stating:    </p>\n\n<blockquote>\n  <p>@return Returns an existing or new PendingIntent matching the given\n  parameters.  May return null only if {@link #FLAG_NO_CREATE} has been supplied. </p>\n</blockquote>\n\n<p>I'm not using FLAG_NO_CREATE so it should never return null.</p>\n\n<pre><code>private fun createAlertPendingIntent(\n  context: Context,\n  notification: Notification,\n  intentId: Int) : PendingIntent {\n    val notificationIntent = Intent(context, NotificationPublisher::class.java)\n    notificationIntent.putExtra(KEY_NOTIFICATION, notification)\n\n    val pi = PendingIntent.getBroadcast(\n        context,\n        intentId,\n        notificationIntent,\n        PendingIntent.FLAG_UPDATE_CURRENT)\n\n    return pi  // IS NULL\n}  \n</code></pre>\n"}, {"tags": ["hibernate", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 254, "user_id": 487672, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/37be1338f7ff8fbbe27ec40204c9c1d2?s=128&d=identicon&r=PG", "display_name": "Solci", "link": "https://stackoverflow.com/users/487672/solci"}, "is_accepted": false, "score": 0, "last_activity_date": 1552673540, "creation_date": 1552673540, "answer_id": 55188532, "question_id": 48027924, "link": "https://stackoverflow.com/questions/48027924/kotlin-hibernate-onetoone-fetchtype-lazy-immediately-running-all-queries/55188532#55188532", "title": "Kotlin Hibernate OneToOne fetchtype.LAZY immediately running all queries", "body": "<p>I faced this problem today and after a lot of research and tests (Hibernate compile time instrumentation) the solution I found was:</p>\n\n<ul>\n<li>Add <code>optional = false</code> to my <code>OneToOne</code></li>\n<li>Add <code>@LazyToOne(LazyToOneOption.PROXY)</code> to my attribute</li>\n<li>Make the child class <code>open</code> and all attributes of child also <code>open</code></li>\n</ul>\n\n<p>After these steps hibernate stopped fetching automatically.</p>\n"}], "owner": {"reputation": 4093, "user_id": 5039579, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh4.googleusercontent.com/-F6fcCsWUR08/AAAAAAAAAAI/AAAAAAAAAMA/NVI0gCvjXIg/photo.jpg?sz=128", "display_name": "Johan Vergeer", "link": "https://stackoverflow.com/users/5039579/johan-vergeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1552673540, "creation_date": 1514578149, "question_id": 48027924, "link": "https://stackoverflow.com/questions/48027924/kotlin-hibernate-onetoone-fetchtype-lazy-immediately-running-all-queries", "title": "Kotlin Hibernate OneToOne fetchtype.LAZY immediately running all queries", "body": "<p>I'm working on a training where the trainer is using Java, and I'm using Kotlin. Until now we had the same results everywhere but here I can't get it to work. </p>\n\n<p>There are 2 entity classes:</p>\n\n<pre><code>@Entity\ndata class Student(\n        @Id\n        @GeneratedValue\n        var id: Long = 0,\n\n        @Column(nullable = false)\n        var name: String = \"\",\n\n        @OneToOne()\n        var passport: Passport? = null\n)\n\n@Entity\ndata class Passport(\n        @Id\n        @GeneratedValue\n        var id: Long = 0,\n\n        @Column(nullable = false)\n        var number: String = \"\"\n)\n</code></pre>\n\n<p>And in a test class I use the entity manager to do a query. </p>\n\n<pre><code>@RunWith(SpringRunner::class)\n@SpringBootTest\nclass StudentRepositoryTest {\n    val logger = LoggerFactory.getLogger(this.javaClass)\n\n    @Autowired\n    lateinit var studentRepository: StudentRepository\n\n    @Autowired\n    lateinit var entityManager: EntityManager\n\n    @Test\n    fun retrieveStudentAndPasswordDetails() {\n        val student: Student? = entityManager.find(Student::class.java, 20001L)\n\n        logger.info(\"Student -&gt; $student\")\n        logger.info(\"Passport -&gt; `${student?.passport}\")\n    }\n}\n</code></pre>\n\n<p>When I run the test this way the output is as expected</p>\n\n<pre><code>Hibernate: \n    select\n        student0_.id as id1_3_0_,\n        student0_.name as name2_3_0_,\n        student0_.passport_id as passport3_3_0_,\n        passport1_.id as id1_1_1_,\n        passport1_.number as number2_1_1_ \n    from\n        student student0_ \n    left outer join\n        passport passport1_ \n            on student0_.passport_id=passport1_.id \n    where\n        student0_.id=?\n2017-12-29 20:51:04.258 TRACE 17233 --- [           main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20001]\n2017-12-29 20:51:04.263 TRACE 17233 --- [           main] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([id1_1_1_] : [BIGINT]) - [40001]\n2017-12-29 20:51:04.265 TRACE 17233 --- [           main] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([name2_3_0_] : [VARCHAR]) - [Ranga]\n2017-12-29 20:51:04.266 TRACE 17233 --- [           main] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([passport3_3_0_] : [BIGINT]) - [40001]\n2017-12-29 20:51:04.267 TRACE 17233 --- [           main] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([number2_1_1_] : [VARCHAR]) - [E123456]\n2017-12-29 20:51:04.269  INFO 17233 --- [           main] i.StatisticalLoggingSessionEventListener : Session Metrics {\n    19949 nanoseconds spent acquiring 1 JDBC connections;\n    0 nanoseconds spent releasing 0 JDBC connections;\n    1097216 nanoseconds spent preparing 1 JDBC statements;\n    227119 nanoseconds spent executing 1 JDBC statements;\n    0 nanoseconds spent executing 0 JDBC batches;\n    0 nanoseconds spent performing 0 L2C puts;\n    0 nanoseconds spent performing 0 L2C hits;\n    0 nanoseconds spent performing 0 L2C misses;\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\n}\n2017-12-29 20:51:04.269  INFO 17233 --- [           main] c.i.j.h.j.r.StudentRepositoryTest        : Student -&gt; Student(id=20001, name=Ranga, passport=Passport(id=40001, number=E123456))\n2017-12-29 20:51:04.269  INFO 17233 --- [           main] c.i.j.h.j.r.StudentRepositoryTest        : Passport -&gt; `Passport(id=40001, number=E123456)\n</code></pre>\n\n<p>This looks really nice. A query is called with a join, and both log outputs are displayed. </p>\n\n<h1>Using <code>FetchType.LAZY</code></h1>\n\n<p>Here I add <code>FetchType.LAZY</code> to the <code>OneToOne</code> annotation which should make retrieval of the passport data wait until it is actually required. </p>\n\n<pre><code>@Entity\ndata class Student(\n        @Id\n        @GeneratedValue\n        var id: Long = 0,\n\n        @Column(nullable = false)\n        var name: String = \"\",\n\n        @OneToOne(fetch = FetchType.LAZY)\n        var passport: Passport? = null\n)\n</code></pre>\n\n<p>This is where I see some unexpected behaviour.</p>\n\n<p>What I would expect is to see the query to retrieve student data, then log output for student data. Next query to retrieve passport data and lastly the log for passport data.</p>\n\n<p>When lazy loading would have been ignored completely then I would have expected to still see the join, but instead there are 2 separate queries, which seems to make things worse then without lazy loading. </p>\n\n<pre><code>Hibernate: \n    select\n        student0_.id as id1_3_0_,\n        student0_.name as name2_3_0_,\n        student0_.passport_id as passport3_3_0_ \n    from\n        student student0_ \n    where\n        student0_.id=?\n2017-12-29 21:03:53.401 TRACE 17380 --- [           main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [20001]\n2017-12-29 21:03:53.411 TRACE 17380 --- [           main] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([name2_3_0_] : [VARCHAR]) - [Ranga]\n2017-12-29 21:03:53.412 TRACE 17380 --- [           main] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([passport3_3_0_] : [BIGINT]) - [40001]\nHibernate: \n    select\n        passport0_.id as id1_1_0_,\n        passport0_.number as number2_1_0_ \n    from\n        passport passport0_ \n    where\n        passport0_.id=?\n2017-12-29 21:03:53.413 TRACE 17380 --- [           main] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [40001]\n2017-12-29 21:03:53.415 TRACE 17380 --- [           main] o.h.type.descriptor.sql.BasicExtractor   : extracted value ([number2_1_0_] : [VARCHAR]) - [E123456]\n2017-12-29 21:03:53.427  INFO 17380 --- [           main] i.StatisticalLoggingSessionEventListener : Session Metrics {\n    33422 nanoseconds spent acquiring 1 JDBC connections;\n    0 nanoseconds spent releasing 0 JDBC connections;\n    569626 nanoseconds spent preparing 2 JDBC statements;\n    1612599 nanoseconds spent executing 2 JDBC statements;\n    0 nanoseconds spent executing 0 JDBC batches;\n    0 nanoseconds spent performing 0 L2C puts;\n    0 nanoseconds spent performing 0 L2C hits;\n    0 nanoseconds spent performing 0 L2C misses;\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\n}\n2017-12-29 21:03:53.427  INFO 17380 --- [           main] c.i.j.h.j.r.StudentRepositoryTest        : Student -&gt; Student(id=20001, name=Ranga, passport=Passport(id=40001, number=E123456))\n2017-12-29 21:03:53.427  INFO 17380 --- [           main] c.i.j.h.j.r.StudentRepositoryTest        : Passport -&gt; `Passport(id=40001, number=E123456)\n</code></pre>\n\n<h2>@Transactional annotation</h2>\n\n<p>Something else: when the trainer is running the tests without <code>@Transacional</code> on the on the test method, an exception is thrown.<br>\nIn my case, it makes no difference whether I use this annotation or not. </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1514577910, "post_id": 48027856, "comment_id": 83025592, "body": "Add your logo inside collapsing toolbar, so when you scroll up it hides with the toolbar."}, {"owner": {"reputation": 1, "user_id": 9154236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TJUiU1fWKTI/AAAAAAAAAAI/AAAAAAAAAU8/N-5uFV25fJ4/photo.jpg?sz=128", "display_name": "Jos&#233; Giovanny Sol&#237;s Ni&#241;o", "link": "https://stackoverflow.com/users/9154236/jos%c3%a9-giovanny-sol%c3%ads-ni%c3%b1o"}, "reply_to_user": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1514578079, "post_id": 48027856, "comment_id": 83025643, "body": "thank you for answering me but I need the logo to be on top of the bar and not disappear"}, {"owner": {"reputation": 2579, "user_id": 8533971, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1410029569091812/picture?type=large", "display_name": "Aditya S.", "link": "https://stackoverflow.com/users/8533971/aditya-s"}, "edited": false, "score": 0, "creation_date": 1514578167, "post_id": 48027856, "comment_id": 83025677, "body": "Then simply try to place your toolbar below your logo."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9154236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TJUiU1fWKTI/AAAAAAAAAAI/AAAAAAAAAU8/N-5uFV25fJ4/photo.jpg?sz=128", "display_name": "Jos&#233; Giovanny Sol&#237;s Ni&#241;o", "link": "https://stackoverflow.com/users/9154236/jos%c3%a9-giovanny-sol%c3%ads-ni%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1514579424, "post_id": 48027922, "comment_id": 83026133, "body": "thanks for answering but when I put it as you indicate, the logo disappears"}, {"owner": {"reputation": 247, "user_id": 9093967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aesa2.png?s=128&g=1", "display_name": "Yuliwee", "link": "https://stackoverflow.com/users/9093967/yuliwee"}, "reply_to_user": {"reputation": 1, "user_id": 9154236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TJUiU1fWKTI/AAAAAAAAAAI/AAAAAAAAAU8/N-5uFV25fJ4/photo.jpg?sz=128", "display_name": "Jos&#233; Giovanny Sol&#237;s Ni&#241;o", "link": "https://stackoverflow.com/users/9154236/jos%c3%a9-giovanny-sol%c3%ads-ni%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1514581083, "post_id": 48027922, "comment_id": 83026711, "body": "I updated my answer. Does it help to put it inside the LinearLayout?"}, {"owner": {"reputation": 1, "user_id": 9154236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TJUiU1fWKTI/AAAAAAAAAAI/AAAAAAAAAU8/N-5uFV25fJ4/photo.jpg?sz=128", "display_name": "Jos&#233; Giovanny Sol&#237;s Ni&#241;o", "link": "https://stackoverflow.com/users/9154236/jos%c3%a9-giovanny-sol%c3%ads-ni%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1514581991, "post_id": 48027922, "comment_id": 83026973, "body": "similarly it hides behind the bar :("}], "tags": [], "owner": {"reputation": 247, "user_id": 9093967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aesa2.png?s=128&g=1", "display_name": "Yuliwee", "link": "https://stackoverflow.com/users/9093967/yuliwee"}, "is_accepted": false, "score": 0, "last_activity_date": 1514581063, "last_edit_date": 1514581063, "creation_date": 1514578146, "answer_id": 48027922, "question_id": 48027856, "link": "https://stackoverflow.com/questions/48027856/how-to-keep-the-logo-above-the-collapsing-toolbar/48027922#48027922", "title": "How to keep the logo above the collapsing toolbar", "body": "<p>Try to place ImageView inside your CollapsingToolbarLayout like this:</p>\n\n<pre><code>&lt;android.support.design.widget.CoordinatorLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"false\"&gt;\n\n    &lt;android.support.v7.widget.RecyclerView\n        android:id=\"@+id/recyclerView_main\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_marginLeft=\"12dp\"\n        android:layout_marginRight=\"12dp\"\n        android:layout_marginBottom=\"56dp\"\n        app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" /&gt;\n\n    &lt;android.support.design.widget.AppBarLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"120dp\"&gt;\n\n        &lt;android.support.design.widget.CollapsingToolbarLayout\n            android:id=\"@+id/collapsing_toolbar\"\n            style=\"@style/Widget.QueComer.CollapsingToolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:layout_scrollFlags=\"scroll|exitUntilCollapsed|snap\"&gt;\n\n            &lt;LinearLayout\n                style=\"@style/Widget.QueComer.CollapsingToolbarContent\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                app:layout_collapseMode=\"parallax\"\n                app:layout_collapseParallaxMultiplier=\"0.65\"&gt;\n\n            &lt;ImageView\n            android:id=\"@+id/header_logo\"\n            android:layout_width=\"100dp\"\n            android:layout_height=\"100dp\"\n            android:layout_gravity=\"center\"\n            android:layout_marginBottom=\"8dp\"\n            android:layout_marginEnd=\"8dp\"\n            android:layout_marginStart=\"8dp\"\n            android:layout_marginTop=\"8dp\"\n            android:contentDescription=\"@string/app_name\"\n            android:cropToPadding=\"false\"\n            android:scaleType=\"fitCenter\"\n            android:src=\"@mipmap/ic_logo\"\n            app:layout_collapseMode=\"parallax\"\n            app:layout_collapseParallaxMultiplier=\"0.3\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:srcCompat=\"@mipmap/ic_logo\" /&gt;\n\n            &lt;/LinearLayout&gt;\n\n            &lt;!-- Wrap this view: --&gt;\n            &lt;android.support.v7.widget.Toolbar\n                android:id=\"@+id/app_bar\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"?attr/actionBarSize\"\n                app:layout_collapseMode=\"pin\" /&gt;\n\n        &lt;/android.support.design.widget.CollapsingToolbarLayout&gt;\n\n    &lt;/android.support.design.widget.AppBarLayout&gt;\n\n    &lt;android.support.design.widget.BottomNavigationView\n        android:id=\"@+id/bottom_navigation\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"bottom\"\n        android:background=\"#ffffff\"\n        android:theme=\"@style/ThemeOverlay.QueComer.BottomNavigation\"\n        app:menu=\"@menu/menu_quecomer\"&gt;\n\n    &lt;/android.support.design.widget.BottomNavigationView&gt;\n\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9154236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TJUiU1fWKTI/AAAAAAAAAAI/AAAAAAAAAU8/N-5uFV25fJ4/photo.jpg?sz=128", "display_name": "Jos&#233; Giovanny Sol&#237;s Ni&#241;o", "link": "https://stackoverflow.com/users/9154236/jos%c3%a9-giovanny-sol%c3%ads-ni%c3%b1o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514581063, "creation_date": 1514577739, "last_edit_date": 1514579343, "question_id": 48027856, "link": "https://stackoverflow.com/questions/48027856/how-to-keep-the-logo-above-the-collapsing-toolbar", "title": "How to keep the logo above the collapsing toolbar", "body": "<p>I'm programming in kotlin, I have problems with the collapsing toolbar, my main view is the following </p>\n\n<p><a href=\"https://i.stack.imgur.com/xSC9E.jpg\" rel=\"nofollow noreferrer\">Main View</a></p>\n\n<p>When scrolling my logo appears behind the collapsing toolbar, as it appears in the following image </p>\n\n<p><a href=\"https://i.stack.imgur.com/HK5XT.jpg\" rel=\"nofollow noreferrer\">When Scrolling</a></p>\n\n<pre><code>&lt;android.support.design.widget.CoordinatorLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"false\"&gt;\n\n    &lt;android.support.v7.widget.RecyclerView\n        android:id=\"@+id/recyclerView_main\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_marginLeft=\"12dp\"\n        android:layout_marginRight=\"12dp\"\n        android:layout_marginBottom=\"56dp\"\n        app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" /&gt;\n\n    &lt;android.support.design.widget.AppBarLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"120dp\"&gt;\n\n        &lt;android.support.design.widget.CollapsingToolbarLayout\n            android:id=\"@+id/collapsing_toolbar\"\n            style=\"@style/Widget.QueComer.CollapsingToolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:layout_scrollFlags=\"scroll|exitUntilCollapsed|snap\"&gt;\n\n            &lt;LinearLayout\n                style=\"@style/Widget.QueComer.CollapsingToolbarContent\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                app:layout_collapseMode=\"parallax\"\n                app:layout_collapseParallaxMultiplier=\"0.65\"&gt;\n            &lt;/LinearLayout&gt;\n\n\n            &lt;!-- Wrap this view: --&gt;\n            &lt;android.support.v7.widget.Toolbar\n                android:id=\"@+id/app_bar\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"?attr/actionBarSize\"\n                app:layout_collapseMode=\"pin\" /&gt;\n\n        &lt;/android.support.design.widget.CollapsingToolbarLayout&gt;\n\n    &lt;/android.support.design.widget.AppBarLayout&gt;\n\n    &lt;android.support.constraint.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n\n        &lt;ImageView\n            android:id=\"@+id/header_logo\"\n            android:layout_width=\"100dp\"\n            android:layout_height=\"100dp\"\n            android:layout_gravity=\"center\"\n            android:layout_marginBottom=\"8dp\"\n            android:layout_marginEnd=\"8dp\"\n            android:layout_marginStart=\"8dp\"\n            android:layout_marginTop=\"8dp\"\n            android:contentDescription=\"@string/app_name\"\n            android:cropToPadding=\"false\"\n            android:scaleType=\"fitCenter\"\n            android:src=\"@mipmap/ic_logo\"\n            app:layout_collapseMode=\"parallax\"\n            app:layout_collapseParallaxMultiplier=\"0.3\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:srcCompat=\"@mipmap/ic_logo\" /&gt;\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n\n    &lt;android.support.design.widget.BottomNavigationView\n        android:id=\"@+id/bottom_navigation\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"bottom\"\n        android:background=\"#ffffff\"\n        android:theme=\"@style/ThemeOverlay.QueComer.BottomNavigation\"\n        app:menu=\"@menu/menu_quecomer\"&gt;\n\n    &lt;/android.support.design.widget.BottomNavigationView&gt;\n\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p>I need the logo to be in front of the bar, as the following image shows</p>\n\n<p><a href=\"https://i.stack.imgur.com/7o12d.jpg\" rel=\"nofollow noreferrer\">result Image</a></p>\n\n<p>The result image is edited with photoshop</p>\n"}, {"tags": ["android", "jenkins", "gradle", "kotlin", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 417236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1322e69e3cd83dfc8607b84f0d5f4082?s=128&d=identicon&r=PG", "display_name": "Yanislav Mihaylov", "link": "https://stackoverflow.com/users/417236/yanislav-mihaylov"}, "edited": false, "score": 0, "creation_date": 1532422650, "post_id": 48029795, "comment_id": 89957313, "body": "Hi Charles-Eugene, is there any update on this issue and what is the ticket number?"}], "tags": [], "owner": {"reputation": 1002, "user_id": 2956628, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f134ecd3b7194eea8cee0ef509df9bc8?s=128&d=identicon&r=PG", "display_name": "Charles-Eugene Loubao", "link": "https://stackoverflow.com/users/2956628/charles-eugene-loubao"}, "is_accepted": false, "score": 6, "last_activity_date": 1514636536, "last_edit_date": 1514636536, "creation_date": 1514593335, "answer_id": 48029795, "question_id": 48027421, "link": "https://stackoverflow.com/questions/48027421/gradle-build-works-on-local-machine-but-fails-on-jenkins-ci-server/48029795#48029795", "title": "Gradle build works on local machine but fails on Jenkins CI Server?", "body": "<p>I finally figured out what the problem was. During the Dexing phase, the D8 dex compiler is being used . </p>\n\n<pre><code>:app:transformClassesWithDexBuilderForDebug\nD8 is used to build dex.\n:app:transformDexArchiveWithDexMergerForDebug FAILED\nD8 is used to merge dex.\njava.lang.IllegalArgumentException: java.lang.IllegalArgumentException\n</code></pre>\n\n<p>I decided to experiment and disable D8 by adding this line to my <code>gradle.properties</code> as described <a href=\"https://android-developers.googleblog.com/2017/08/next-generation-dex-compiler-now-in.html\" rel=\"noreferrer\">here</a></p>\n\n<pre><code>android.enableD8=false\n</code></pre>\n\n<p>This resolved my problem. For some reason D8 did not work on the server but did on my local machine. I will file a bug report to the Android Studio Tools Team</p>\n"}], "owner": {"reputation": 1002, "user_id": 2956628, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f134ecd3b7194eea8cee0ef509df9bc8?s=128&d=identicon&r=PG", "display_name": "Charles-Eugene Loubao", "link": "https://stackoverflow.com/users/2956628/charles-eugene-loubao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1564, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1514636536, "creation_date": 1514575399, "last_edit_date": 1514578723, "question_id": 48027421, "link": "https://stackoverflow.com/questions/48027421/gradle-build-works-on-local-machine-but-fails-on-jenkins-ci-server", "title": "Gradle build works on local machine but fails on Jenkins CI Server?", "body": "<p>I have setup Jenkins on my Digital Ocean server (3 GB Memory / 20 GB Disk / Ubuntu 16.04.3 x64) </p>\n\n<p>I installed the Android SDK in /opt/android-sdk and fixed the permission to let the Jenkins user have RW access.</p>\n\n<p>The project compiles on my local machine but for some reason fails on the remote server. I know the setup is fine because I created a dummy android project and it compiles fine on that server but my actual project does not.</p>\n\n<p>A summary of my exception with lots of details is available here : <a href=\"https://scans.gradle.com/s/owahozyrl4qwg\" rel=\"nofollow noreferrer\">https://scans.gradle.com/s/owahozyrl4qwg</a></p>\n\n<p>The exception</p>\n\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:transformDexArchiveWithDexMergerForDebug'.\n&gt; com.android.build.api.transform.TransformException: java.lang.IllegalArgumentException: java.lang.IllegalArgumentException\n\n* Try:\nRun with --info or --debug option to get more log output.\n\n* Exception is:\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:transformDexArchiveWithDexMergerForDebug'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:100)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:70)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:63)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:88)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.run(DefaultTaskGraphExecuter.java:248)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:197)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:107)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:241)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:230)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.processTask(DefaultTaskPlanExecutor.java:124)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.access$200(DefaultTaskPlanExecutor.java:80)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:105)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:99)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionPlan.execute(DefaultTaskExecutionPlan.java:625)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionPlan.executeWithTask(DefaultTaskExecutionPlan.java:580)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.run(DefaultTaskPlanExecutor.java:99)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:60)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:128)\n    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\n    at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\n    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:46)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\n    at org.gradle.initialization.DefaultGradleLauncher$ExecuteTasks.run(DefaultGradleLauncher.java:311)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:197)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:107)\n    at org.gradle.initialization.DefaultGradleLauncher.runTasks(DefaultGradleLauncher.java:202)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:132)\n    at org.gradle.initialization.DefaultGradleLauncher.executeTasks(DefaultGradleLauncher.java:107)\n    at org.gradle.internal.invocation.GradleBuildController$1.call(GradleBuildController.java:78)\n    at org.gradle.internal.invocation.GradleBuildController$1.call(GradleBuildController.java:75)\n    at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:152)\n    at org.gradle.internal.invocation.GradleBuildController.doBuild(GradleBuildController.java:100)\n    at org.gradle.internal.invocation.GradleBuildController.run(GradleBuildController.java:75)\n    at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:28)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.tooling.internal.provider.ValidatingBuildActionRunner.run(ValidatingBuildActionRunner.java:32)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner$1.run(RunAsBuildOperationBuildActionRunner.java:43)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:197)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:107)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionRunner.run(RunAsBuildOperationBuildActionRunner.java:40)\n    at org.gradle.tooling.internal.provider.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:51)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:45)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:29)\n    at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:39)\n    at org.gradle.launcher.exec.BuildTreeScopeBuildActionExecuter.execute(BuildTreeScopeBuildActionExecuter.java:25)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:71)\n    at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:45)\n    at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:51)\n    at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:32)\n    at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:36)\n    at org.gradle.tooling.internal.provider.GradleThreadBuildActionExecuter.execute(GradleThreadBuildActionExecuter.java:25)\n    at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:43)\n    at org.gradle.tooling.internal.provider.ParallelismConfigurationBuildActionExecuter.execute(ParallelismConfigurationBuildActionExecuter.java:29)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:64)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:29)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:55)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:42)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:58)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:33)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:62)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:82)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\nCaused by: java.lang.RuntimeException: com.android.build.api.transform.TransformException: java.lang.IllegalArgumentException: java.lang.IllegalArgumentException\n    at com.android.builder.profile.Recorder$Block.handleException(Recorder.java:55)\n    at com.android.builder.profile.ThreadRecorder.record(ThreadRecorder.java:104)\n    at com.android.build.gradle.internal.pipeline.TransformTask.transform(TransformTask.java:213)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n    at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$IncrementalTaskAction.doExecute(DefaultTaskClassInfoStore.java:173)\n    at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:134)\n    at org.gradle.api.internal.project.taskfactory.DefaultTaskClassInfoStore$StandardTaskAction.execute(DefaultTaskClassInfoStore.java:121)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:122)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:197)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:107)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:111)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:92)\n    ... 101 more\nCaused by: com.android.build.api.transform.TransformException: java.lang.IllegalArgumentException: java.lang.IllegalArgumentException\n    at com.android.build.gradle.internal.transforms.DexMergerTransform.transform(DexMergerTransform.java:229)\n    at com.android.build.gradle.internal.pipeline.TransformTask$2.call(TransformTask.java:222)\n    at com.android.build.gradle.internal.pipeline.TransformTask$2.call(TransformTask.java:218)\n    at com.android.builder.profile.ThreadRecorder.record(ThreadRecorder.java:102)\n    ... 113 more\nCaused by: java.lang.IllegalArgumentException: java.lang.IllegalArgumentException\n    at com.google.common.collect.ImmutableList.forEach(ImmutableList.java:397)\n    at com.android.build.gradle.internal.transforms.DexMergerTransform.transform(DexMergerTransform.java:225)\n    ... 116 more\nCaused by: java.lang.IllegalArgumentException\n    at com.android.tools.r8.utils.ThreadUtils.getExecutorService(ThreadUtils.java:39)\n    at com.android.tools.r8.utils.ThreadUtils.getExecutorService(ThreadUtils.java:48)\n    at com.android.tools.r8.D8.runForTesting(D8.java:143)\n    at com.android.tools.r8.D8.run(D8.java:70)\n    at com.android.builder.dexing.D8DexArchiveMerger.mergeDexArchives(D8DexArchiveMerger.java:80)\n    at com.android.build.gradle.internal.transforms.DexMergerTransformCallable.call(DexMergerTransformCallable.java:97)\n    at com.android.build.gradle.internal.transforms.DexMergerTransformCallable.call(DexMergerTransformCallable.java:35)\n</code></pre>\n\n<p>ROOT/build.gradle:</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nbuildscript {\n    apply from: \"libraryVersions.gradle\"\n\n    ext.kotlin_version = '1.2.10'\n    repositories {\n    google()\n    jcenter()\n    }\n    dependencies {\n    classpath 'com.android.tools.build:gradle:3.1.0-alpha06'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    classpath \"io.realm:realm-gradle-plugin:${realmVersion}\"\n\n    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n    google()\n    jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>ROOT/app/build.gradle</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\napply plugin: 'kotlin-kapt'\n\napply plugin: 'realm-android'\n\n\nandroid {\n    dataBinding {\n    enabled true\n    }\n    compileSdkVersion 26\n    defaultConfig {\n    applicationId \"app.cloubao.expenses\"\n    minSdkVersion 19\n    targetSdkVersion 26\n    versionCode 1\n    versionName \"1.0\"\n    testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:26.1.0'\n    implementation 'com.android.support:recyclerview-v7:26.1.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'\n    implementation 'com.android.support:design:26.1.0'\n    implementation 'com.android.support:support-v4:26.1.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.1'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'\n\n    implementation \"android.arch.lifecycle:runtime:1.0.3\"\n    implementation \"android.arch.lifecycle:extensions:1.0.0\"\n\n    kapt \"com.android.databinding:compiler:3.1.0-alpha06\"\n\n    implementation 'net.danlew:android.joda:2.9.9.1'\n\n\n}\n</code></pre>\n\n<p>gradle-wrapper.properties</p>\n\n<pre><code>#Sat Dec 09 11:52:12 EST 2017\ndistributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-4.4-rc-3-all.zip\n</code></pre>\n"}, {"tags": ["kotlin", "rx-java", "rx-android"], "comments": [{"owner": {"reputation": 771, "user_id": 2056507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/219495fc4a1c75c27711864d5f14287a?s=128&d=identicon&r=PG", "display_name": "George Madrid", "link": "https://stackoverflow.com/users/2056507/george-madrid"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1514566137, "post_id": 48025671, "comment_id": 83020953, "body": "rxjava&#39;s BiFunction, not the Java BiFunction."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1514566198, "post_id": 48025671, "comment_id": 83020984, "body": "Ah, right, ok.."}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 9, "last_activity_date": 1514565934, "creation_date": 1514565934, "answer_id": 48025693, "question_id": 48025671, "link": "https://stackoverflow.com/questions/48025671/kotlin-bifunction-with-nullable-return-value-fails-to-compile/48025693#48025693", "title": "Kotlin: BiFunction with nullable return value fails to compile", "body": "<p>The <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/functions/BiFunction.html#apply-T1-T2-\" rel=\"noreferrer\"><code>apply</code></a> method in the <code>BiFunction</code> class has a <code>@NonNull</code> annotation on its return value (as well as on its parameters). Apparently you can't override this by providing a nullable type as the type argument.</p>\n\n<p>You probably shouldn't either: RxJava 2 streams can't have <code>null</code> elements in them (see <a href=\"https://github.com/ReactiveX/RxJava/wiki/What&#39;s-different-in-2.0#nulls\" rel=\"noreferrer\">here</a>).</p>\n"}], "owner": {"reputation": 771, "user_id": 2056507, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/219495fc4a1c75c27711864d5f14287a?s=128&d=identicon&r=PG", "display_name": "George Madrid", "link": "https://stackoverflow.com/users/2056507/george-madrid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4017, "favorite_count": 0, "accepted_answer_id": 48025693, "answer_count": 1, "score": 4, "last_activity_date": 1514565934, "creation_date": 1514565750, "question_id": 48025671, "link": "https://stackoverflow.com/questions/48025671/kotlin-bifunction-with-nullable-return-value-fails-to-compile", "title": "Kotlin: BiFunction with nullable return value fails to compile", "body": "<p>This (greatly simplified) code fails to compile for me. Not sure why. The return type is <code>Entry?</code> and <code>null</code> seems like a valid value to me. </p>\n\n<pre><code>val foo = BiFunction&lt;Int, List&lt;Entry&gt;, Entry?&gt; { foo:Int, bar:List&lt;Entry&gt; -&gt;\n    null\n}\n</code></pre>\n\n<p>The error message is <code>Null can not be a value of a non-null type Entry</code></p>\n\n<p>Can anyone tell me what I'm missing?</p>\n\n<p>I am using:</p>\n\n<pre><code>ext.kotlin_version = '1.2.10'\ncompile \"io.reactivex.rxjava2:rxjava:2.1.8\"\ncompile 'io.reactivex.rxjava2:rxandroid:2.0.1'\n</code></pre>\n\n<p>I welcome any suggestions. Happy New Year!</p>\n"}, {"tags": ["java", "floating-point", "kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 3, "creation_date": 1514560536, "post_id": 48024473, "comment_id": 83018532, "body": "Can you construct a <a href=\"https://stackoverflow.com/help/mcve\">test case</a>?"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1514602806, "post_id": 48024473, "comment_id": 83031240, "body": "Since value is <code>Float</code> you need to use range constructed from floats to be precise: <code>value in 0F..100F</code>"}], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 3, "last_activity_date": 1514567500, "last_edit_date": 1514567500, "creation_date": 1514564021, "answer_id": 48025303, "question_id": 48024473, "link": "https://stackoverflow.com/questions/48024473/require-fails-with-floating-point-numbers/48025303#48025303", "title": "Require fails with floating point numbers", "body": "<p>There is a <code>currentProgressPercentage</code> for which you should get this exception: <a href=\"https://en.wikipedia.org/wiki/NaN\" rel=\"nofollow noreferrer\"><code>NaN</code></a> (it isn't actually a single value, but this doesn't matter here). Both comparisons will be false, and <code>(float) (100.0 * currentProgressPercentage)</code> will return a <code>NaN</code> which isn't in range <code>0..100</code>. A <code>NaN</code> can be produced, e.g., by calculating <code>0.0/0.0</code>.</p>\n"}], "owner": {"reputation": 8351, "user_id": 1817031, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/MnimI.png?s=128&g=1", "display_name": "Steve M", "link": "https://stackoverflow.com/users/1817031/steve-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 48025303, "answer_count": 1, "score": 2, "last_activity_date": 1514567500, "creation_date": 1514559630, "last_edit_date": 1514560175, "question_id": 48024473, "link": "https://stackoverflow.com/questions/48024473/require-fails-with-floating-point-numbers", "title": "Require fails with floating point numbers", "body": "<pre><code>private void waveformProgress(double currentProgressPercentage) {\n   if (currentProgressPercentage &lt; 0.0f) currentProgressPercentage = 0.0f;\n   if (currentProgressPercentage &gt; 1.0f) currentProgressPercentage = 1.0f;\n   waveView.setProgress((float) (100.0 * currentProgressPercentage));\n   ..\n }\n</code></pre>\n\n<p>I have rare crash reports on the setProgress line, in the call to a kotlin setter:</p>\n\n<pre><code>var progress: Float = 0F\n        set(value) {\n            require(value in 0..100) { \"Progress must be in 0..100\" }\n...\n        }\n</code></pre>\n\n<p>I know about floating point equality and all, but how is it possible that the require fails here? How would I correct it? I suppose it's possible Crashlytics is reporting new version number when the crash happened in old version that didn't ensure the number was between 1..100.</p>\n"}, {"tags": ["variables", "kotlin", "var"], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 5107650, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-lbN_XIRKpTE/AAAAAAAAAAI/AAAAAAAAF3M/T-QEtSUx1i0/photo.jpg?sz=128", "display_name": "Rafel C.F", "link": "https://stackoverflow.com/users/5107650/rafel-c-f"}, "edited": false, "score": 0, "creation_date": 1514576090, "post_id": 48024211, "comment_id": 83024850, "body": "yes, with this I can insert a string to the const val COD_INFO: String = &quot;hello&quot; but not the variable mparam"}], "tags": [], "owner": {"reputation": 14074, "user_id": 1348215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/iEZX8.jpg?s=128&g=1", "display_name": "Egor Neliuba", "link": "https://stackoverflow.com/users/1348215/egor-neliuba"}, "is_accepted": false, "score": 1, "last_activity_date": 1514558262, "creation_date": 1514558262, "answer_id": 48024211, "question_id": 48024043, "link": "https://stackoverflow.com/questions/48024043/variable-with-kotlin-for-url/48024211#48024211", "title": "Variable with kotlin for URL", "body": "<p>You can only pass constants to annotation parameters. If <code>ConfigAmaters.DATA_ACTA</code> is not a constant then you cannot use it inside as an annotation parameter.</p>\n\n<p>If it is actually a <code>val DATA_ACTA: String</code> that is inside an <code>object</code> then you can make it a constant by adding <code>const</code>:</p>\n\n<pre><code>object ConfigAmaters {\n    const val DATA_ACTA: String = \"...\"\n}\n</code></pre>\n\n<p>In this case the compiler shouldn't complain anymore.</p>\n"}, {"comments": [{"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "edited": false, "score": 0, "creation_date": 1514668055, "post_id": 48024260, "comment_id": 83046008, "body": "Java has the same requirement ."}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": false, "score": 2, "last_activity_date": 1514558530, "creation_date": 1514558530, "answer_id": 48024260, "question_id": 48024043, "link": "https://stackoverflow.com/questions/48024043/variable-with-kotlin-for-url/48024260#48024260", "title": "Variable with kotlin for URL", "body": "<blockquote>\n  <p>An annotation parameter must be a compile-time constant</p>\n</blockquote>\n\n<p>This is telling you that the compiler needs to know the value you are using in the annotation at compile time. Since you are getting that variable's value dynamically (<code>var mparam = intent.getStringExtra(\"param\")</code>) it can't compile the value into the bytecode it's trying to build for you.</p>\n\n<p>You will have to find a way to make the value used by <code>@GET</code> a compile-time constant, or use another method for doing whatever functionality it is intended to provide.</p>\n"}], "owner": {"reputation": 179, "user_id": 5107650, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-lbN_XIRKpTE/AAAAAAAAAAI/AAAAAAAAF3M/T-QEtSUx1i0/photo.jpg?sz=128", "display_name": "Rafel C.F", "link": "https://stackoverflow.com/users/5107650/rafel-c-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1514558586, "creation_date": 1514557410, "last_edit_date": 1514558586, "question_id": 48024043, "link": "https://stackoverflow.com/questions/48024043/variable-with-kotlin-for-url", "title": "Variable with kotlin for URL", "body": "<p>I'm trying to complete an URL by means of variables but when I pass it and add it to the url I want to connect to, it gives me an error</p>\n\n<pre><code>    override fun onCreate\nvar mparam = intent.getStringExtra(\"param\")\n\n\n interface ApiActaPartido {\n             @GET(\"My_url\"+$mparam)\n             fun getActaPartido(): Call&lt;ActaPartidoList&gt;\n\n        }\n</code></pre>\n\n<blockquote>\n  <p>Error:(84, 77) Expecting an element Error:(84, 14) An annotation parameter must be a compile-time constant</p>\n</blockquote>\n\n<p>Help please.</p>\n"}, {"tags": ["jvm", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 4, "last_activity_date": 1514560258, "last_edit_date": 1514560258, "creation_date": 1514557873, "answer_id": 48024143, "question_id": 48023674, "link": "https://stackoverflow.com/questions/48023674/why-can-t-we-override-a-val-property-as-a-var-with-a-get-without-initialising-it/48024143#48024143", "title": "Why can\u2019t we override a val property as a var with a get without initialising it?", "body": "<p>You cannot define a <code>var</code> property without both accessors (<code>get</code> and <code>set</code>) defined in some way. </p>\n\n<p>When you put an initializer (<code>var x: Int = ...</code>), a backing field is generated and a default setter that sets the backing field. An alternative to the initializer is providing a custom setter:</p>\n\n<pre><code>override var x: Int\n    get() = super.x * (super.x * 10)\n    set(value) { super.x = sqrt(value / 10.0).roundToInt() }\n</code></pre>\n\n<p>See: <a href=\"https://kotlinlang.org/docs/reference/properties.html#properties-and-fields\" rel=\"nofollow noreferrer\">Properties and Fields</a> in the language reference</p>\n"}, {"comments": [{"owner": {"reputation": 164, "user_id": 7801553, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Jelfy.jpg?s=128&g=1", "display_name": "Deepak", "link": "https://stackoverflow.com/users/7801553/deepak"}, "edited": false, "score": 1, "creation_date": 1514562647, "post_id": 48024222, "comment_id": 83019418, "body": "Thanks. Well if I do <code>field = value </code> or meddle with <code>x</code> in the <code>set()</code> it ends up in a StackOverflowError any idea why?"}, {"owner": {"reputation": 1371, "user_id": 7263373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a7d9040d19161c5bc3e85fc9cc61935?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Bhatia", "link": "https://stackoverflow.com/users/7263373/rohan-bhatia"}, "reply_to_user": {"reputation": 164, "user_id": 7801553, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Jelfy.jpg?s=128&g=1", "display_name": "Deepak", "link": "https://stackoverflow.com/users/7801553/deepak"}, "edited": false, "score": 1, "creation_date": 1514563051, "post_id": 48024222, "comment_id": 83019591, "body": "<code>field = value</code> should cause no problem. A possible way to get a StackOverflowError is assigning to <code>x</code> in the setter. For e.g.  <code>x = 0</code> in <code>set(value)</code> will itself recursively call the setter of <code>x</code> with <code>value = 0</code> and this will end up in an infinite recursion."}, {"owner": {"reputation": 164, "user_id": 7801553, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Jelfy.jpg?s=128&g=1", "display_name": "Deepak", "link": "https://stackoverflow.com/users/7801553/deepak"}, "edited": false, "score": 1, "creation_date": 1514563365, "post_id": 48024222, "comment_id": 83019727, "body": "Okay. <code>field = value</code> doesn&#39;t work as the compiler throws an error as <code>Property should be initialised</code>"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1514563524, "post_id": 48024222, "comment_id": 83019790, "body": "<code>field = value</code> is what you get by default, so you get the same error."}, {"owner": {"reputation": 1371, "user_id": 7263373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a7d9040d19161c5bc3e85fc9cc61935?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Bhatia", "link": "https://stackoverflow.com/users/7263373/rohan-bhatia"}, "edited": false, "score": 1, "creation_date": 1514563557, "post_id": 48024222, "comment_id": 83019804, "body": "Exactly, if you use a backing field, you have to initialize the property whether or not it&#39;s immutable."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 164, "user_id": 7801553, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Jelfy.jpg?s=128&g=1", "display_name": "Deepak", "link": "https://stackoverflow.com/users/7801553/deepak"}, "edited": false, "score": 0, "creation_date": 1514563558, "post_id": 48024222, "comment_id": 83019805, "body": "@Deepak, <code>field = value</code> requires the property to have a backing field, so you should have an initializer for that field as well (<code>var x: Int = ...</code>)."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 164, "user_id": 7801553, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Jelfy.jpg?s=128&g=1", "display_name": "Deepak", "link": "https://stackoverflow.com/users/7801553/deepak"}, "edited": false, "score": 0, "creation_date": 1514563613, "post_id": 48024222, "comment_id": 83019832, "body": "@Deepak, to simply forward the setter call to the super class implementation, use <code>super.x</code> (<code>set(value) { super.x = ... }</code>)"}, {"owner": {"reputation": 1371, "user_id": 7263373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a7d9040d19161c5bc3e85fc9cc61935?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Bhatia", "link": "https://stackoverflow.com/users/7263373/rohan-bhatia"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1514570178, "post_id": 48024222, "comment_id": 83022637, "body": "@hotkey <code>super.x</code> is actually immutable."}], "tags": [], "owner": {"reputation": 1371, "user_id": 7263373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3a7d9040d19161c5bc3e85fc9cc61935?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Bhatia", "link": "https://stackoverflow.com/users/7263373/rohan-bhatia"}, "is_accepted": true, "score": 3, "last_activity_date": 1514558314, "creation_date": 1514558314, "answer_id": 48024222, "question_id": 48023674, "link": "https://stackoverflow.com/questions/48023674/why-can-t-we-override-a-val-property-as-a-var-with-a-get-without-initialising-it/48024222#48024222", "title": "Why can\u2019t we override a val property as a var with a get without initialising it?", "body": "<p>This behavior is due to the concept of <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-fields\" rel=\"nofollow noreferrer\">backing fields</a> in Kotlin. As written in the doc - </p>\n\n<blockquote>\n  <p>A backing field will be generated for a property if it uses the default implementation of at least one of the accessors, or if a custom accessor references it through the field identifier.</p>\n</blockquote>\n\n<p>Since the overridden property <code>x</code> is now a var, it has a default implementation of the setter like below.</p>\n\n<pre><code>override var x: Int = super.x * 10 \n        get() {\n            return super.x * (super.x * 10)\n        }\n        set(value) {\n            field = value\n        }\n</code></pre>\n\n<p>Therefore when declaring a var, you must initialize the backing field with some value as there is no concept of default values in Kotlin(For e.g. uninitialized Java objects take a null value).</p>\n\n<p>Another solution is to use a custom setter like this - </p>\n\n<pre><code>override var x: Int // Now you can leave it uninitialized\n            get() {\n                return super.x * (super.x * 10)\n            }\n            set(value) {\n                // Nothing happens\n            }\n</code></pre>\n"}], "owner": {"reputation": 164, "user_id": 7801553, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Jelfy.jpg?s=128&g=1", "display_name": "Deepak", "link": "https://stackoverflow.com/users/7801553/deepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 48024222, "answer_count": 2, "score": 3, "last_activity_date": 1514560258, "creation_date": 1514555694, "question_id": 48023674, "link": "https://stackoverflow.com/questions/48023674/why-can-t-we-override-a-val-property-as-a-var-with-a-get-without-initialising-it", "title": "Why can\u2019t we override a val property as a var with a get without initialising it?", "body": "<p>I have just started to Learn Kotlin. I wonder why we are not able to use a <code>get()</code> method on a overridden val property as a var without initialising it. But when overridden as a <code>val</code> it works without initialisation.</p>\n\n<pre><code>open class Foo {\n    val y = 21\n    open val x: Int\n        get() {\n            return 10 * y\n        }\n}\nclass Bar : Foo() {\n    override var x: Int = super.x * 10 //If overridden as val works without initialisation\n        get() {\n            return super.x * (super.x * 10)\n        }\n}\nfun main(args: Array&lt;String&gt;) {\n    val bar: Bar = Bar()\n    println(\"${bar.x}\")\n}\n</code></pre>\n\n<p>If I don't initialise <code>x</code> in <code>Bar</code> class it gives a compiler error <code>Property must be initialised</code>. But when I print <code>bar.x</code> it prints the value calculated from the overridden getter but not from the initialised one.</p>\n"}, {"tags": ["kotlin", "kotlinc"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1514557479, "post_id": 48022906, "comment_id": 83017173, "body": "<a href=\"https://discuss.kotlinlang.org/t/how-to-run-kotlin-1-1-4-eap-repl/3808/2\" rel=\"nofollow noreferrer\">This might be related</a>, I&#39;m not sure"}, {"owner": {"reputation": 63, "user_id": 6280969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89d1893b3a749d22b23c807890aa8a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Daud Oladipo", "link": "https://stackoverflow.com/users/6280969/daud-oladipo"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1514645361, "post_id": 48022906, "comment_id": 83039915, "body": "Thanks for the response, but the compiler version is 1.2.10.(your link version is 1.1.4) downloaded from the link provided by the above doc page"}, {"owner": {"reputation": 577, "user_id": 410579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb1e2716f8a9b4aff5bd3458962ae2a?s=128&d=identicon&r=PG", "display_name": "kocka", "link": "https://stackoverflow.com/users/410579/kocka"}, "edited": false, "score": 0, "creation_date": 1514658533, "post_id": 48022906, "comment_id": 83043518, "body": "why do you kotlinc? why not just gradle or maven?"}, {"owner": {"reputation": 63, "user_id": 6280969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89d1893b3a749d22b23c807890aa8a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Daud Oladipo", "link": "https://stackoverflow.com/users/6280969/daud-oladipo"}, "edited": false, "score": 0, "creation_date": 1515070102, "post_id": 48022906, "comment_id": 83165902, "body": "@knock I wanted to compile the basic code from the doc page, do I need gradle or maven to do that (and will gradle or maven work without the kotlinc command working)"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3258608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934d91da5a21d39844eea7907835f64a?s=128&d=identicon&r=PG&f=1", "display_name": "user3258608", "link": "https://stackoverflow.com/users/3258608/user3258608"}, "is_accepted": false, "score": 0, "last_activity_date": 1527739201, "creation_date": 1527739201, "answer_id": 50616446, "question_id": 48022906, "link": "https://stackoverflow.com/questions/48022906/kotlinc-command-line-error/50616446#50616446", "title": "Kotlinc command line error", "body": "<p>The manifest file for hello.jar does not point to main() anymore. I've been asking about this for awhile -- it may have been broken since Kotlin 1.1. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14730879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RZlxsddj1GA/AAAAAAAAAAI/AAAAAAAAAkI/AMZuuckZr3bFryDKSo61doo5CY4CF2WzbQ/s96-c/photo.jpg?sz=128", "display_name": "\u041a\u0438\u0440\u0438\u043b\u043b \u041e\u0441\u0430\u0434\u0447\u0438\u0439", "link": "https://stackoverflow.com/users/14730879/%d0%9a%d0%b8%d1%80%d0%b8%d0%bb%d0%bb-%d0%9e%d1%81%d0%b0%d0%b4%d1%87%d0%b8%d0%b9"}, "is_accepted": false, "score": 0, "last_activity_date": 1606675001, "creation_date": 1606675001, "answer_id": 65063716, "question_id": 48022906, "link": "https://stackoverflow.com/questions/48022906/kotlinc-command-line-error/65063716#65063716", "title": "Kotlinc command line error", "body": "<p>its because spaces in path to kotlinc. Need to convert path from D:/Program Files to D:/.</p>\n"}], "owner": {"reputation": 63, "user_id": 6280969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89d1893b3a749d22b23c807890aa8a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Daud Oladipo", "link": "https://stackoverflow.com/users/6280969/daud-oladipo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2482, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1606675001, "creation_date": 1514551870, "last_edit_date": 1514635305, "question_id": 48022906, "link": "https://stackoverflow.com/questions/48022906/kotlinc-command-line-error", "title": "Kotlinc command line error", "body": "<p>I follow this (<a href=\"https://kotlinlang.org/docs/tutorials/command-line.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/tutorials/command-line.html</a>) instruction. I set the environment variable (windows 7) to bin directory run \"kotlinc\" at the command line i get the following error (I even navigate to the bin directory from the command prompt)</p>\n\n<blockquote>\n  <p>Error: Could not find or load main class org.jetbrains.kotlin.preloading.Preloader</p>\n</blockquote>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1514548515, "post_id": 48022211, "comment_id": 83013468, "body": "Why would you do that? If you need to process annotations, then you can instead <a href=\"https://kotlinlang.org/docs/reference/kapt.html\" rel=\"nofollow noreferrer\">use kapt</a>, which processes them in both Java and Kotlin at once. Otherwise, I see no good reason to do that, because the Kotlin compiler can read the Java sources and does not require Java to be compiled at that moment. On contrary, since the Java compiler does not understand Kotlin sources, it&#39;s necessary to compile Kotlin classes before Java to be able to call Kotlin from Java."}, {"owner": {"reputation": 16944, "user_id": 1433665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb67872e230b18666cedb94bd572809f?s=128&d=identicon&r=PG", "display_name": "TheKojuEffect", "link": "https://stackoverflow.com/users/1433665/thekojueffect"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1514952903, "post_id": 48022211, "comment_id": 83115768, "body": "@hotkey \tI am trying to compile java, scala and kotlin together such that kotlin -&gt; scala -&gt; java. I tried the solution described in discuss.gradle.org/t/kotlin-groovy-and-java-compilation/1490&zwnj;&#8203;\u200c\u200b3/\u2026 but scala compilation wouldn&#39;t pick up java sources."}], "answers": [{"comments": [{"owner": {"reputation": 16944, "user_id": 1433665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb67872e230b18666cedb94bd572809f?s=128&d=identicon&r=PG", "display_name": "TheKojuEffect", "link": "https://stackoverflow.com/users/1433665/thekojueffect"}, "edited": false, "score": 0, "creation_date": 1552061797, "post_id": 55048650, "comment_id": 96881620, "body": "Yup, I ended up building multi-module project as well to resolve this issue."}], "tags": [], "owner": {"reputation": 1450, "user_id": 3745422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1746658c4978166acc9dc1d50747cae7?s=128&d=identicon&r=PG", "display_name": "Pietro Martinelli", "link": "https://stackoverflow.com/users/3745422/pietro-martinelli"}, "is_accepted": false, "score": 5, "last_activity_date": 1552134481, "last_edit_date": 1552134481, "creation_date": 1551976355, "answer_id": 55048650, "question_id": 48022211, "link": "https://stackoverflow.com/questions/48022211/how-to-make-compilekotlin-dependson-compilejava-in-gradle/55048650#55048650", "title": "How to make compileKotlin dependsOn compileJava in gradle", "body": "<p>I faced the same problem in a <em>spike test</em> with gradle, Java, Kotlin, Scala and Groovy all together - not a real scenario, I recognize it!, but  noticed that (by default, i.e. without any explicit configuration)</p>\n\n<ol>\n<li>compileJava dependsOn compileKotlin</li>\n<li>compileScala dependsOn compileJava</li>\n<li>compileGroovy dependsOn compileJava</li>\n</ol>\n\n<p>This limits my choices about the order which I can build my sources in: Java compilation can't happen before Kotlin compilation, as you told, and by converse Groovy and Scala compilation can't happen before Java compilation (which was my initial goal).</p>\n\n<p><strong>My idea</strong> is that the simplest wat to get the desired result is to split my source code into four different projects, <strong>setting up a multi-module project</strong>: this way I can move the problem from defining task dependencies (which as seen I can't control) to defining module dependencies (which I can control very simple through plan dependency management using something like <code>compile project(':my-dependend-on-project')</code> in my <em>dependant</em> project's <code>build.gradle</code>).</p>\n\n<p>This is a very old question, so I suppose you already found a solution; anyway, I'm interested in your opinion about my conclusions about this topic.</p>\n"}], "owner": {"reputation": 16944, "user_id": 1433665, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb67872e230b18666cedb94bd572809f?s=128&d=identicon&r=PG", "display_name": "TheKojuEffect", "link": "https://stackoverflow.com/users/1433665/thekojueffect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1831, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1552134481, "creation_date": 1514548330, "question_id": 48022211, "link": "https://stackoverflow.com/questions/48022211/how-to-make-compilekotlin-dependson-compilejava-in-gradle", "title": "How to make compileKotlin dependsOn compileJava in gradle", "body": "<p>While using kotlin with gradle, <code>compileKotlin</code> executes before <code>compileJava</code>. I need to execute <code>compileJava</code> before <code>compileKotlin</code>. I tried <code>compileKotlin.dependsOn(compileJava)</code> but it gives the Circular dependency build failure.</p>\n\n<p><a href=\"https://i.stack.imgur.com/xQQv8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xQQv8.png\" alt=\"Circular dependency build failure\"></a></p>\n\n<p>I also tried </p>\n\n<p><code>compileJava.dependsOn = compileJava.taskDependencies.values - compileKotlin</code></p>\n\n<p>But, it still executes <code>compileKotlin</code> before <code>compileJava</code>.</p>\n\n<p><strong>How can I execute <code>compileJava</code> before <code>compileKotlin</code>?</strong></p>\n"}, {"tags": ["android", "android-studio", "android-gradle-plugin", "kotlin", "kapt"], "comments": [{"owner": {"reputation": 122, "user_id": 2969593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IH81q.jpg?s=128&g=1", "display_name": "Kenny Li", "link": "https://stackoverflow.com/users/2969593/kenny-li"}, "edited": false, "score": 0, "creation_date": 1514578118, "post_id": 48021855, "comment_id": 83025662, "body": "Here are a few things I noticed that may or may not be related to your gradle issue:  1. Move <code>apply plugin: &#39;kotlin-android-extensions&#39;</code> to the top of your app gradle 2. You have two copies of <code>compile &#39;com.android.support:appcompat-v7:25.3.1&#39;</code> 3. <code>compile &#39;com.daimajia.slider:library:1.1.5@aar&#39;</code> I&#39;m not sure if you want the <code>@aar</code> in the version 4. I think you want <code>compile &#39;com.android.databinding:compiler:2.3.0&#39;</code> and <code>compile com.google.dagger:dagger-compiler:2.7</code>"}], "answers": [{"comments": [{"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "edited": false, "score": 0, "creation_date": 1514550925, "post_id": 48022439, "comment_id": 83014533, "body": "I add this in the app gradle file after the kapt block, as you said, but I still have the same error:  [kapt] An exception occured: org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Ecveption while annotation processing"}, {"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "edited": false, "score": 1, "creation_date": 1514553623, "post_id": 48022439, "comment_id": 83015602, "body": "Thanks, it seems to work, I now have some new compilations errors, I am fixing that and I will tell if it does work or not"}, {"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "edited": false, "score": 0, "creation_date": 1514558108, "post_id": 48022439, "comment_id": 83017417, "body": "Okay, it is taking more time than expected, I now have an &quot;cannot access NonExistentClass&quot; error. Thanks for the advices given so far, I will keep you in touch."}, {"owner": {"reputation": 4902, "user_id": 6683139, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EOrQR.jpg?s=128&g=1", "display_name": "Ege Kuzubasioglu", "link": "https://stackoverflow.com/users/6683139/ege-kuzubasioglu"}, "reply_to_user": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "edited": false, "score": 0, "creation_date": 1514562688, "post_id": 48022439, "comment_id": 83019436, "body": "well I&#39;d suggest commenting out any kap dependencies at this point <a href=\"https://youtrack.jetbrains.com/issue/KT-10352\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-10352</a>"}], "tags": [], "owner": {"reputation": 4902, "user_id": 6683139, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EOrQR.jpg?s=128&g=1", "display_name": "Ege Kuzubasioglu", "link": "https://stackoverflow.com/users/6683139/ege-kuzubasioglu"}, "is_accepted": false, "score": 0, "last_activity_date": 1514552979, "last_edit_date": 1514552979, "creation_date": 1514549542, "answer_id": 48022439, "question_id": 48021855, "link": "https://stackoverflow.com/questions/48021855/kapt-exception-when-creating-xml-file/48022439#48022439", "title": "Kapt exception when creating XML file", "body": "<pre><code>sourceSets {\n  main.java.srcDirs += [file(\"$buildDir/generated/source/kapt/main\")]\n}\n</code></pre>\n\n<p>can you add this source set and try again? Kapt stubs compiler allows \"generated\" sources to be referenced from Kotlin otherwise the compiler will not be able to reference the missing sources.</p>\n\n<p>edit: add this after</p>\n\n<pre><code>kapt {\n  generateStubs = true\n}\n</code></pre>\n\n<p>update:</p>\n\n<p>try deleting <code>apply-plugin:'kotlin-kapt'</code></p>\n\n<p>and changing</p>\n\n<pre><code>kapt {\n    generateStubs = true\n    javacOptions {\n        option(\"-Xmaxerrs\", 500)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "is_accepted": false, "score": 0, "last_activity_date": 1514998202, "creation_date": 1514998202, "answer_id": 48081683, "question_id": 48021855, "link": "https://stackoverflow.com/questions/48021855/kapt-exception-when-creating-xml-file/48081683#48081683", "title": "Kapt exception when creating XML file", "body": "<p>Well,</p>\n\n<p>After a lot of kapt exceptions and coming back to previous commits to avoir them, I think I found out some of the reasons one can have this error.</p>\n\n<ul>\n<li>You are using variables in your XML file that does not exists in your relative Kotlin file (thanks Copy/Paste)</li>\n<li>You forgot to close one of your tags</li>\n</ul>\n\n<p>These answers are coming from my experience, I put them here in case of someone more newbie than me (hard to be) get this error, but I am sure there are more rational answers to that.</p>\n\n<p>Thanks Ege for your kind help.</p>\n"}], "owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 579, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1514998202, "creation_date": 1514546598, "question_id": 48021855, "link": "https://stackoverflow.com/questions/48021855/kapt-exception-when-creating-xml-file", "title": "Kapt exception when creating XML file", "body": "<p>I am working in Kotlin on Android Studio.</p>\n\n<p>The project compile and works perfectly, but then when I try to create a new XML file, I keep getting a kapt exception \"Exception while annotation processing\".</p>\n\n<p>I try to create XML file by right click on res folder -> New -> Layout Resource File, and I also tried with right click on res folder -> New -> XML -> Layout XML File.</p>\n\n<p>Here is my full project gradle :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    ext.kotlin_version = '1.1.2-5'\r\n    repositories {\r\n        jcenter()\r\n        google()\r\n    }\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:3.0.1'\r\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        jcenter()\r\n        google()\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>And here is my full app gradle :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>apply plugin: 'com.android.application'\r\napply plugin: 'kotlin-android'\r\napply plugin: 'kotlin-kapt'\r\n\r\nandroid {\r\n    compileSdkVersion 27\r\n    buildToolsVersion '26.0.2'\r\n    defaultConfig {\r\n        applicationId \"com.discodery.android.discoderyapp\"\r\n        minSdkVersion 16\r\n        targetSdkVersion 27\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\r\n        vectorDrawables.useSupportLibrary = true\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\r\n        }\r\n        buildTypes.each {\r\n            it.buildConfigField 'Integer', 'RESTAURANT_ID', '1'\r\n        }\r\n    }\r\n    /*\r\n    productFlavors {\r\n        dev {\r\n\r\n        }\r\n        prod {\r\n\r\n        }\r\n    }*/\r\n    dataBinding {\r\n        enabled = true\r\n    }\r\n}\r\n\r\nkapt {\r\n    generateStubs = true\r\n}\r\n\r\ndependencies {\r\n    compile fileTree(dir: 'libs', include: ['*.jar'])\r\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\r\n        exclude group: 'com.android.support', module: 'support-annotations'\r\n    })\r\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\r\n\r\n    //Permissions\r\n\r\n    compile 'com.android.support:appcompat-v7:25.3.1'\r\n    compile 'com.android.support:appcompat-v7:25.3.1'\r\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\r\n    compile 'io.reactivex:rxandroid:1.2.1'\r\n    compile 'io.reactivex:rxjava:1.1.6'\r\n    compile 'com.hwangjr.rxbus:rxbus:1.0.5'\r\n    compile 'org.parceler:parceler-api:1.1.6'\r\n    compile 'com.squareup.retrofit2:retrofit:2.1.0'\r\n    compile 'com.squareup.retrofit2:converter-gson:2.1.0'\r\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.1.0'\r\n    compile 'com.squareup.okhttp3:okhttp:3.4.1'\r\n    compile 'com.squareup.okhttp3:logging-interceptor:3.4.1'\r\n    compile 'com.squareup.okhttp3:okhttp-urlconnection:3.4.1'\r\n    compile 'com.android.support:design:25.3.1'\r\n    compile 'com.android.support:support-v4:25.3.1'\r\n    compile 'com.android.support:cardview-v7:25.3.1'\r\n    compile 'com.android.support:recyclerview-v7:25.3.1'\r\n    compile 'com.google.dagger:dagger:2.7'\r\n    compile 'com.facebook.fresco:fresco:1.0.0'\r\n    compile 'com.squareup.picasso:picasso:2.3.2'\r\n    compile 'com.nineoldandroids:library:2.4.0'\r\n    compile 'com.daimajia.slider:library:1.1.5@aar'\r\n    compile 'com.karumi:dexter:2.3.1'\r\n    testCompile 'junit:junit:4.12'\r\n    kapt 'com.android.databinding:compiler:2.3.0'\r\n    kapt 'org.parceler:parceler:1.1.6'\r\n    kapt 'com.google.dagger:dagger-compiler:2.7'\r\n}\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\napply plugin: 'kotlin-android-extensions'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I tried my best and I searched on the Internet to solve this error.\nSo my question is :\nHow can I create a XML file safely, without getting this error ?\nOr, if that is not possible, how can I solved this Kapt exception ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "kotlin", "android-coordinatorlayout", "coordinator-layout"], "answers": [{"comments": [{"owner": {"reputation": 4964, "user_id": 3891376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y4V8u.png?s=128&g=1", "display_name": "Andrey Danilov", "link": "https://stackoverflow.com/users/3891376/andrey-danilov"}, "edited": false, "score": 0, "creation_date": 1514547592, "post_id": 48022013, "comment_id": 83013071, "body": "usually I use ItemTouchHelper, but wanted to check how it works with CoordinatorLayout. Will try to use parent views for it."}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 4964, "user_id": 3891376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y4V8u.png?s=128&g=1", "display_name": "Andrey Danilov", "link": "https://stackoverflow.com/users/3891376/andrey-danilov"}, "edited": false, "score": 0, "creation_date": 1514547740, "post_id": 48022013, "comment_id": 83013120, "body": "Then try it with the <code>nameTextView</code> view directly. It should have the <code>swipe</code> behavior then, I think. And it should have the correct <code>LayoutParams</code>."}, {"owner": {"reputation": 4964, "user_id": 3891376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y4V8u.png?s=128&g=1", "display_name": "Andrey Danilov", "link": "https://stackoverflow.com/users/3891376/andrey-danilov"}, "edited": false, "score": 0, "creation_date": 1514548076, "post_id": 48022013, "comment_id": 83013262, "body": "I just wrapped with additional layout. And that works, thank you"}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 2, "last_activity_date": 1514547396, "creation_date": 1514547396, "answer_id": 48022013, "question_id": 48021406, "link": "https://stackoverflow.com/questions/48021406/unable-to-get-coordinatorlayout-layoutparams-in-recyclerview/48022013#48022013", "title": "Unable to get CoordinatorLayout LayoutParams in RecyclerView", "body": "<p>The <code>coordinatorLayout</code> is a direct child of the <code>RecyclerView</code> and thus has <code>LayoutParams</code> appropriate for this relation. The children of the <code>CoordinatorLayout</code> will most likely have <code>CoordinatorLayout.LayoutParams</code>.</p>\n\n<p>But you don't need a <code>CoordinatorLayout</code> to implement a swipe to delete action with a <code>RecyclerView</code>. It's supported directly with <a href=\"https://developer.android.com/reference/android/support/v7/widget/helper/ItemTouchHelper.html\" rel=\"nofollow noreferrer\"><code>ItemTouchHelper</code></a> and the <a href=\"https://developer.android.com/reference/android/support/v7/widget/helper/ItemTouchHelper.Callback.html#onSwiped(android.support.v7.widget.RecyclerView.ViewHolder,%20int)\" rel=\"nofollow noreferrer\"><code>ItemTouchHelper.Callback.onSwiped()</code></a> callback.</p>\n"}, {"tags": [], "owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "is_accepted": false, "score": 1, "last_activity_date": 1514547416, "creation_date": 1514547416, "answer_id": 48022017, "question_id": 48021406, "link": "https://stackoverflow.com/questions/48021406/unable-to-get-coordinatorlayout-layoutparams-in-recyclerview/48022017#48022017", "title": "Unable to get CoordinatorLayout LayoutParams in RecyclerView", "body": "<p>Layout params of a given view are meant to be used by the containing layout, i.e. the parent <code>ViewGroup</code>. So, as your <code>CoordinatorLayout</code> is inside the <code>RecyclerView</code>, it is <code>RecyclerView.LayoutParams</code>.</p>\n\n<p>The view having <code>CoordinatorLayout.LayoutParams</code> is <code>@id/simpleModelName</code>, which will be laid out by the <code>CoordinatorLayout</code>.</p>\n\n<p>Hope this clarifies it.</p>\n"}], "owner": {"reputation": 4964, "user_id": 3891376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y4V8u.png?s=128&g=1", "display_name": "Andrey Danilov", "link": "https://stackoverflow.com/users/3891376/andrey-danilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "accepted_answer_id": 48022013, "answer_count": 2, "score": 0, "last_activity_date": 1514547416, "creation_date": 1514544627, "question_id": 48021406, "link": "https://stackoverflow.com/questions/48021406/unable-to-get-coordinatorlayout-layoutparams-in-recyclerview", "title": "Unable to get CoordinatorLayout LayoutParams in RecyclerView", "body": "<p>I want to implement swipe to delete using <code>CoordinatorLayout</code>, so I created simple xml for each item of <code>RecyclerView</code></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.design.widget.CoordinatorLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\" android:layout_width=\"match_parent\"\n    android:id=\"@+id/coordinatorLayout\"\n    android:layout_height=\"wrap_content\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/simpleModelName\"\n        android:layout_width=\"wrap_content\"\n        android:textSize=\"16sp\"\n        android:padding=\"10dp\"\n        android:layout_height=\"wrap_content\" /&gt;\n\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p>And simple Adapter</p>\n\n<pre><code>open class SwipeableAdapter(val list:ArrayList&lt;SimpleModel&gt;) : RecyclerView.Adapter&lt;SwipeableAdapter.ViewHolder&gt;() {\n    inner class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {\n        var nameTextView: TextView\n        var coordinatorLayout: CoordinatorLayout\n\n        init {\n            nameTextView = view.findViewById(R.id.simpleModelName)\n            coordinatorLayout = view.findViewById(R.id.coordinatorLayout)\n        }\n    }\n\n    override fun onCreateViewHolder(viewGroup: ViewGroup, i: Int): SwipeableAdapter.ViewHolder {\n        val view = LayoutInflater.from(viewGroup.context).inflate(R.layout.item_simple_model, viewGroup, false)\n        return ViewHolder(view)\n    }\n\n    override fun onBindViewHolder(viewHolder: SwipeableAdapter.ViewHolder, position: Int) {\n        viewHolder.nameTextView.text = list[position].name\n\n        var swipe = SwipeDismissBehavior&lt;View&gt;()\n        swipe.setSwipeDirection(SwipeDismissBehavior.SWIPE_DIRECTION_END_TO_START)\n        swipe.setListener(object : SwipeDismissBehavior.OnDismissListener {\n            override fun onDismiss(view: View?) {\n            }\n\n            override fun onDragStateChanged(state: Int) {\n            }\n        })\n\n        Log.e(\"onBindViewHolder\",\"layout \"+viewHolder.coordinatorLayout.javaClass.toString())\n        Log.e(\"onBindViewHolder\",\"layout \"+viewHolder.coordinatorLayout.layoutParams.javaClass.toString())\n        val coordinatorLayoutParams = viewHolder.coordinatorLayout.layoutParams as CoordinatorLayout.LayoutParams\n        coordinatorLayoutParams.behavior = swipe\n\n    }\n\n    override fun getItemCount(): Int {\n        return list.size\n    }\n}\n</code></pre>\n\n<p>The problem is with this line:</p>\n\n<pre><code>    val coordinatorLayoutParams = viewHolder.coordinatorLayout.layoutParams as CoordinatorLayout.LayoutParams\n</code></pre>\n\n<p>I got crash with stacktrace:</p>\n\n<pre><code>java.lang.ClassCastException: android.support.v7.widget.RecyclerView$LayoutParams cannot be cast to android.support.design.widget.CoordinatorLayout$LayoutParams\n at app.deadmc.swipeablelayout.SwipeableAdapter.onBindViewHolder(SwipeableAdapter.kt:43)\n at app.deadmc.swipeablelayout.SwipeableAdapter.onBindViewHolder(SwipeableAdapter.kt:12)\n at android.support.v7.widget.RecyclerView$Adapter.onBindViewHolder(RecyclerView.java:6508)\n at android.support.v7.widget.RecyclerView$Adapter.bindViewHolder(RecyclerView.java:6541)\n at android.support.v7.widget.RecyclerView$Recycler.tryBindViewHolderByDeadline(RecyclerView.java:5484)\n at android.support.v7.widget.RecyclerView$Recycler.tryGetViewHolderForPositionByDeadline(RecyclerView.java:5750)\n at android.support.v7.widget.RecyclerView$Recycler.getViewForPosition(RecyclerView.java:5589)\n at android.support.v7.widget.RecyclerView$Recycler.getViewForPosition(RecyclerView.java:5585)\n at android.support.v7.widget.LinearLayoutManager$LayoutState.next(LinearLayoutManager.java:2231)\n at android.support.v7.widget.LinearLayoutManager.layoutChunk(LinearLayoutManager.java:1558)\n at android.support.v7.widget.LinearLayoutManager.fill(LinearLayoutManager.java:1518)\n at android.support.v7.widget.LinearLayoutManager.onLayoutChildren(LinearLayoutManager.java:610)\n at android.support.v7.widget.RecyclerView.dispatchLayoutStep2(RecyclerView.java:3719)\n at android.support.v7.widget.RecyclerView.onMeasure(RecyclerView.java:3135)\n at android.view.View.measure(View.java:19861)\n at android.support.constraint.ConstraintLayout.internalMeasureChildren(ConstraintLayout.java:934)\n at android.support.constraint.ConstraintLayout.onMeasure(ConstraintLayout.java:973)\n</code></pre>\n\n<p>Okay, started to check whats the problem,logged it, and found, that</p>\n\n<pre><code>        Log.e(\"tag\",\"layout \"+viewHolder.coordinatorLayout.javaClass.toString())\n        Log.e(\"tag\",\"layout \"+viewHolder.coordinatorLayout.layoutParams.javaClass.toString())\n</code></pre>\n\n<p>Shows</p>\n\n<pre><code>12-29 13:46:16.310 19129-19129/? E/tag: layout class android.support.design.widget.CoordinatorLayout\n12-29 13:46:16.310 19129-19129/? E/tag: layout class android.support.v7.widget.RecyclerView$LayoutParams\n</code></pre>\n\n<p>The questions are:</p>\n\n<p>What am I doing wrong?\nWhy <code>CoordinatorLayout</code> gives me <code>RecyclerView$LayoutParams</code>?</p>\n"}, {"tags": ["exception", "reflection", "lambda", "kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1514543762, "post_id": 48021156, "comment_id": 83011396, "body": "<code>I can&#39;t reproduce it in my environment</code> - how come?"}, {"owner": {"reputation": 368, "user_id": 4767232, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Vy24UwKaoxs/AAAAAAAAAAI/AAAAAAAACw0/os013N5WA8o/photo.jpg?sz=128", "display_name": "Alexander Ukhov", "link": "https://stackoverflow.com/users/4767232/alexander-ukhov"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1514560968, "post_id": 48021156, "comment_id": 83018727, "body": "Via crash reports."}, {"owner": {"reputation": 61, "user_id": 10879695, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Oob0DA2fFRE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbE9jtPSqdo6waOlqDPH9eog8X6Yg/mo/photo.jpg?sz=128", "display_name": "Chidinma Ekenne", "link": "https://stackoverflow.com/users/10879695/chidinma-ekenne"}, "edited": false, "score": 0, "creation_date": 1548414107, "post_id": 48021156, "comment_id": 95551387, "body": "I believe this error shows when android device is below 6.0. had the same issue App worked on device 6.0 and above but not in 5.0. i believe its a bug from Kotlin"}, {"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 0, "creation_date": 1564153193, "post_id": 48021156, "comment_id": 100949624, "body": "<a href=\"https://youtrack.jetbrains.com/issue/KT-19186\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-19186</a>"}], "answers": [{"comments": [{"owner": {"reputation": 368, "user_id": 4767232, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Vy24UwKaoxs/AAAAAAAAAAI/AAAAAAAACw0/os013N5WA8o/photo.jpg?sz=128", "display_name": "Alexander Ukhov", "link": "https://stackoverflow.com/users/4767232/alexander-ukhov"}, "edited": false, "score": 0, "creation_date": 1514544305, "post_id": 48021277, "comment_id": 83011655, "body": "What&#39;s your environment? It works well on mine <code>Kotlin version 1.1.51 (JRE 1.8.0_144-b01)</code>"}, {"owner": {"reputation": 368, "user_id": 4767232, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Vy24UwKaoxs/AAAAAAAAAAI/AAAAAAAACw0/os013N5WA8o/photo.jpg?sz=128", "display_name": "Alexander Ukhov", "link": "https://stackoverflow.com/users/4767232/alexander-ukhov"}, "edited": false, "score": 0, "creation_date": 1514548374, "post_id": 48021277, "comment_id": 83013395, "body": "Yeah. And <code>System.getProperty(&quot;java.version&quot;)</code> returns <code>1.8.0_45</code>. So it seems not a problem of Java version."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1514544039, "creation_date": 1514544039, "answer_id": 48021277, "question_id": 48021156, "link": "https://stackoverflow.com/questions/48021156/kotlin-android-kotlinreflectioninternalerror-in-data-class-with-a-lambda/48021277#48021277", "title": "Kotlin/Android \u2013 KotlinReflectionInternalError in Data Class with a lambda", "body": "<p>It looks like a bug in Kotlin lambdas.</p>\n\n<p>This code is enough to reproduce the exception:</p>\n\n<pre><code> ({i: Int -&gt; true}).toString()\n</code></pre>\n\n<p>I advice you post an issue on youtrack.jetbrains.com/issues/KT and see what the team says about it.</p>\n"}], "owner": {"reputation": 368, "user_id": 4767232, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Vy24UwKaoxs/AAAAAAAAAAI/AAAAAAAACw0/os013N5WA8o/photo.jpg?sz=128", "display_name": "Alexander Ukhov", "link": "https://stackoverflow.com/users/4767232/alexander-ukhov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1548414107, "creation_date": 1514543398, "last_edit_date": 1514544133, "question_id": 48021156, "link": "https://stackoverflow.com/questions/48021156/kotlin-android-kotlinreflectioninternalerror-in-data-class-with-a-lambda", "title": "Kotlin/Android \u2013 KotlinReflectionInternalError in Data Class with a lambda", "body": "<blockquote>\n  <p>kotlin.reflect.jvm.internal.KotlinReflectionInternalError:\n  Introspecting local functions, lambdas, anonymous functions and local\n  variables is not yet fully supported in Kotlin reflection</p>\n</blockquote>\n\n<p>This exception comes from <code>toString()</code> of a data class.</p>\n\n<p>The data class contains a lambda.</p>\n\n<p>I can't reproduce it in my environment.</p>\n\n<p>Do I need to override <code>toString()</code> to exclude the lambda? Or lambdas are not allowed in data classes at all?</p>\n\n<pre><code>data class PersistJob(\n        private val id: Int,\n        private val delay: Long = 10_000L,\n        private val maxDelay: Long = 60_000L,\n        private val iteration: Int = 0,\n        private val block: suspend (Int) -&gt; Boolean) {\n\n    fun getDelay() = minOf(delay, maxDelay)\n    fun withDelayIncreased() = copy(\n            delay = minOf(delay * 2, maxDelay),\n            iteration = iteration + 1)\n\n    suspend fun execute() = block(iteration)\n}\n</code></pre>\n\n<p>Line producing the error:</p>\n\n<pre><code>val job: PersistJob = ...\nlog.debug(\"start job id($id): $job\")`// job.toString()\n</code></pre>\n\n<p>Stack trace:</p>\n\n<pre><code>at kotlin.reflect.jvm.internal.EmptyContainerForLocal.fail(SourceFile:41)\nat kotlin.reflect.jvm.internal.EmptyContainerForLocal.getFunctions(SourceFile:37)\nat kotlin.reflect.jvm.internal.KDeclarationContainerImpl.findFunctionDescriptor(SourceFile:145)\nat kotlin.reflect.jvm.internal.KFunctionImpl$descriptor$2.invoke(SourceFile:54)\nat kotlin.reflect.jvm.internal.KFunctionImpl$descriptor$2.invoke(SourceFile:34)\nat kotlin.reflect.jvm.internal.ReflectProperties$LazySoftVal.invoke(SourceFile:93)\nat kotlin.reflect.jvm.internal.ReflectProperties$Val.getValue(SourceFile:32)\nat kotlin.reflect.jvm.internal.KFunctionImpl.getDescriptor(SourceFile)\nat kotlin.reflect.jvm.internal.ReflectionFactoryImpl.renderLambdaToString(SourceFile:59)\nat kotlin.jvm.internal.Reflection.renderLambdaToString(SourceFile:80)\nat kotlin.jvm.internal.Lambda.toString(SourceFile:22)\nat java.lang.String.valueOf(String.java:2683)\nat java.lang.StringBuilder.append(StringBuilder.java:129)\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "text-to-speech"], "comments": [{"owner": {"reputation": 10242, "user_id": 908821, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2c4a1ce95e4e53e7f4a556810232e0e3?s=128&d=identicon&r=PG", "display_name": "Angel Koh", "link": "https://stackoverflow.com/users/908821/angel-koh"}, "edited": false, "score": 1, "creation_date": 1514532738, "post_id": 48018878, "comment_id": 83007163, "body": "what  locale  did you use for the TTS ? you can try different en locales like (UK, AU, etc)."}, {"owner": {"reputation": 2475, "user_id": 5151608, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh4.googleusercontent.com/-oYW8BasOUmM/AAAAAAAAAAI/AAAAAAAAAM0/iz3B5oRB6Hs/photo.jpg?sz=128", "display_name": "noobEinstien", "link": "https://stackoverflow.com/users/5151608/noobeinstien"}, "reply_to_user": {"reputation": 10242, "user_id": 908821, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2c4a1ce95e4e53e7f4a556810232e0e3?s=128&d=identicon&r=PG", "display_name": "Angel Koh", "link": "https://stackoverflow.com/users/908821/angel-koh"}, "edited": false, "score": 0, "creation_date": 1514535271, "post_id": 48018878, "comment_id": 83007979, "body": "@AngelKoh  I tried Locale.Us and Locale.UK . And It does nothing for me"}, {"owner": {"reputation": 10242, "user_id": 908821, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2c4a1ce95e4e53e7f4a556810232e0e3?s=128&d=identicon&r=PG", "display_name": "Angel Koh", "link": "https://stackoverflow.com/users/908821/angel-koh"}, "edited": false, "score": 0, "creation_date": 1514535421, "post_id": 48018878, "comment_id": 83008024, "body": "you have to use  en_UK, en_AU, en_IN, etc. (note that you should check if the phone has that locale country or not also) refer to <a href=\"https://stackoverflow.com/questions/4872702/get-available-locales-for-text-to-speech-tts\" title=\"get available locales for text to speech tts\">stackoverflow.com/questions/4872702/&hellip;</a>."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1514553486, "post_id": 48018878, "comment_id": 83015555, "body": "<i>c/zee</i> would be correct for a US locale."}], "owner": {"reputation": 2475, "user_id": 5151608, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh4.googleusercontent.com/-oYW8BasOUmM/AAAAAAAAAAI/AAAAAAAAAM0/iz3B5oRB6Hs/photo.jpg?sz=128", "display_name": "noobEinstien", "link": "https://stackoverflow.com/users/5151608/noobeinstien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1514531402, "creation_date": 1514531402, "question_id": 48018878, "link": "https://stackoverflow.com/questions/48018878/android-tts-pronouns-a-and-z-wrong", "title": "Android TTS pronouns A and Z wrong", "body": "<p>I am creating an app that will randomly generate character using ascii numbers and pronounce it with help of android TTS. </p>\n\n<p>But When the character <em>A</em> and <em>Z</em> have some problems. A spell as <em>I</em> and Z as <em>c</em>.</p>\n\n<pre><code>  var ascInt: Int = randomAscii\n  ascInt = ascInt.plus(97)\n  val ascChar: Char = ascInt.toChar()\n  s = ascChar.toString()\n</code></pre>\n\n<ol>\n<li>I put <em>.(dot)</em> but not solved the problem. </li>\n</ol>\n\n<p>Am I missing something?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 309, "user_id": 9140698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Sv6s.jpg?s=128&g=1", "display_name": "chandani c patel", "link": "https://stackoverflow.com/users/9140698/chandani-c-patel"}, "edited": false, "score": 2, "creation_date": 1514527238, "post_id": 48018091, "comment_id": 83005198, "body": "just put return word before when keyword and try"}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "reply_to_user": {"reputation": 309, "user_id": 9140698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Sv6s.jpg?s=128&g=1", "display_name": "chandani c patel", "link": "https://stackoverflow.com/users/9140698/chandani-c-patel"}, "edited": false, "score": 2, "creation_date": 1514527399, "post_id": 48018091, "comment_id": 83005250, "body": "@chandanicshekhat You&#39;ll still have to remove the <code>return</code> statements of the <code>when</code> block body to make use of that return"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1514542515, "post_id": 48018091, "comment_id": 83010842, "body": "A general tip: put your mouse on the problematic code and hit Alt-Enter. AS should be able to fix warnings like that by itself"}], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 2553961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c6079c6a0d390d0b92c6778083ee43?s=128&d=identicon&r=PG", "display_name": "Saif C", "link": "https://stackoverflow.com/users/2553961/saif-c"}, "is_accepted": false, "score": 6, "last_activity_date": 1514529665, "last_edit_date": 1514529665, "creation_date": 1514527242, "answer_id": 48018134, "question_id": 48018091, "link": "https://stackoverflow.com/questions/48018091/kotlin-return-can-be-lifted-out-of-when/48018134#48018134", "title": "Kotlin: Return can be lifted out of &#39;when&#39;", "body": "<p>Your <code>when</code> is correct, however Kotlin has the ability to lift the return out of the 'when' if you are returning in every case, thus it becomes :</p>\n\n<pre><code>override fun getItemViewType(position: Int): Int {\n    return when (position) {\n        0 -&gt; ItemViewType.TITLE.type\n        1 -&gt; ItemViewType.SUBTITLE.type\n        2 -&gt; ItemViewType.ITEM.type\n        else -&gt; -1\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "is_accepted": false, "score": 2, "last_activity_date": 1514527309, "creation_date": 1514527309, "answer_id": 48018142, "question_id": 48018091, "link": "https://stackoverflow.com/questions/48018091/kotlin-return-can-be-lifted-out-of-when/48018142#48018142", "title": "Kotlin: Return can be lifted out of &#39;when&#39;", "body": "<p>In Kotlin, several statements, including <code>if</code>, <code>when</code> and <code>try</code>, can return a value. So in your case, you can refactor the statement to have the <code>when</code> statement return the actual value, which you can then return from the function.</p>\n\n<p>So, you can simplify your method to the following:</p>\n\n<pre><code>override fun getItemViewType(position: Int): Int = when (position) {\n    0 -&gt; ItemViewType.TITLE.type\n    1 -&gt; ItemViewType.SUBTITLE.type\n    2 -&gt; ItemViewType.ITEM.type\n    else -&gt; -1\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 599, "user_id": 2795666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xUtnX.jpg?s=128&g=1", "display_name": "Jorge Ram&#237;rez", "link": "https://stackoverflow.com/users/2795666/jorge-ram%c3%adrez"}, "edited": false, "score": 0, "creation_date": 1543941388, "post_id": 48018240, "comment_id": 94095606, "body": "Related: if statement can also be used as an expression: so you can return  if(a&gt;b) a else b  Came to this answer getting the same warning message from an if statement"}, {"owner": {"reputation": 1217, "user_id": 5225435, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/iaj9R.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5225435/tom"}, "edited": false, "score": 3, "creation_date": 1547727938, "post_id": 48018240, "comment_id": 95296366, "body": "As a Kotlin beginner, this just strikes me as very elegant in comparison to Java"}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 1217, "user_id": 5225435, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/iaj9R.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5225435/tom"}, "edited": false, "score": 0, "creation_date": 1578694311, "post_id": 48018240, "comment_id": 105535924, "body": "@Tom Welcome to Kotlin! You&#39;ll find that to be a common theme"}, {"owner": {"reputation": 1217, "user_id": 5225435, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/iaj9R.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5225435/tom"}, "edited": false, "score": 0, "creation_date": 1578918150, "post_id": 48018240, "comment_id": 105583818, "body": "Yes. It&#39;s interesting how Kotlin and ES6 Javascript resemble each other too"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 67, "last_activity_date": 1560764657, "last_edit_date": 1560764657, "creation_date": 1514528020, "answer_id": 48018240, "question_id": 48018091, "link": "https://stackoverflow.com/questions/48018091/kotlin-return-can-be-lifted-out-of-when/48018240#48018240", "title": "Kotlin: Return can be lifted out of &#39;when&#39;", "body": "<p>You\u2019re using <code>when</code> like a simple Java <code>switch</code> statement, which is okay but not very idiomatic and can be improved. You can refactor your code in two steps: </p>\n\n<ol>\n<li><p>Kotlin's <code>when</code> can be used as an expression, it <a href=\"https://kotlinlang.org/docs/reference/control-flow.html\" rel=\"noreferrer\">returns a value if you wish</a>:</p>\n\n<pre><code>override fun getItemViewType(position: Int): Int {\n    return when (position) {\n        0 -&gt; ItemViewType.TITLE.type\n        1 -&gt; ItemViewType.SUBTITLE.type\n        2 -&gt; ItemViewType.ITEM.type\n        else -&gt; -1\n     }\n}\n</code></pre></li>\n<li><p>The function body, now consisting of a single statement, can be changed into an <a href=\"https://kotlinlang.org/docs/reference/functions.html#single-expression-functions\" rel=\"noreferrer\">expression body</a>:</p>\n\n<pre><code>override fun getItemViewType(position: Int) = when (position) {\n     0 -&gt; ItemViewType.TITLE.type\n     1 -&gt; ItemViewType.SUBTITLE.type\n     2 -&gt; ItemViewType.ITEM.type\n     else -&gt; -1\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 2164, "user_id": 4006222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uat4p.png?s=128&g=1", "display_name": "Seop Yoon", "link": "https://stackoverflow.com/users/4006222/seop-yoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13447, "favorite_count": 5, "accepted_answer_id": 48018240, "answer_count": 3, "score": 34, "last_activity_date": 1560764657, "creation_date": 1514526970, "last_edit_date": 1551031405, "question_id": 48018091, "link": "https://stackoverflow.com/questions/48018091/kotlin-return-can-be-lifted-out-of-when", "title": "Kotlin: Return can be lifted out of &#39;when&#39;", "body": "<p>The alternative to <code>switch</code> in Kotlin is <code>when</code>.  So, inside a recycler view adapter, when I am returning view type, I use <code>when</code>:</p>\n\n<pre><code>override fun getItemViewType(position: Int): Int {\n    when (position) {\n        0 -&gt; return ItemViewType.TITLE.type\n        1 -&gt; return ItemViewType.SUBTITLE.type\n        2 -&gt; return ItemViewType.ITEM.type\n        else -&gt; return -1\n    }\n}\n</code></pre>\n\n<p>But, the above statement sends our warning message <code>Return can be lifted out of 'when'</code>.  </p>\n\n<p>Does anyone know what may be the correct way of using <code>when</code>? And what should be done to fix the above case?  </p>\n"}, {"tags": ["android", "kotlin", "custom-font", "typeface"], "comments": [{"owner": {"reputation": 2007, "user_id": 4473501, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zFn5zx1D_Uk/AAAAAAAAAAI/AAAAAAAAABs/mYSopRt1388/photo.jpg?sz=128", "display_name": "Nikhil Borad", "link": "https://stackoverflow.com/users/4473501/nikhil-borad"}, "edited": false, "score": 1, "creation_date": 1514523242, "post_id": 48017554, "comment_id": 83004214, "body": "yea i got this many time ago.. solution is that download same font with other resource and check..problem is in font."}], "answers": [{"comments": [{"owner": {"reputation": 2007, "user_id": 4473501, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zFn5zx1D_Uk/AAAAAAAAAAI/AAAAAAAAABs/mYSopRt1388/photo.jpg?sz=128", "display_name": "Nikhil Borad", "link": "https://stackoverflow.com/users/4473501/nikhil-borad"}, "edited": false, "score": 0, "creation_date": 1514523844, "post_id": 48017624, "comment_id": 83004334, "body": "or some other external library u can use <a href=\"https://github.com/SenhLinsh/NoPaddingTextView\" rel=\"nofollow noreferrer\">github.com/SenhLinsh/NoPaddingTextView</a>"}, {"owner": {"reputation": 148157, "user_id": 35364, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f11512869fe2f8d87a2f2b687b76686c?s=128&d=identicon&r=PG", "display_name": "hasen", "link": "https://stackoverflow.com/users/35364/hasen"}, "edited": false, "score": 0, "creation_date": 1514524418, "post_id": 48017624, "comment_id": 83004471, "body": "Marked. BTW don&#39;t worry I&#39;m not new. I tried to mark as correct but it told me I had to wait. I don&#39;t know when but it seemed they added a 15 minute timer or something. (so I had to do something else to pass time and then I forgot :))"}], "tags": [], "owner": {"reputation": 2007, "user_id": 4473501, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zFn5zx1D_Uk/AAAAAAAAAAI/AAAAAAAAABs/mYSopRt1388/photo.jpg?sz=128", "display_name": "Nikhil Borad", "link": "https://stackoverflow.com/users/4473501/nikhil-borad"}, "is_accepted": true, "score": 5, "last_activity_date": 1514523750, "creation_date": 1514523750, "answer_id": 48017624, "question_id": 48017554, "link": "https://stackoverflow.com/questions/48017554/android-vertical-space-around-text-with-custom-typeface/48017624#48017624", "title": "Android: vertical space around text with custom typeface", "body": "<p>try with this in xml</p>\n\n<pre><code>android:includeFontPadding=\"false\"\nandroid:lineSpacingExtra=\"0dp\"\n</code></pre>\n\n<p>includeFontPadding removes the padding reserved for accents and lineSpacingExtra removes the space between two lines of text.</p>\n\n<p>Hope it helps..</p>\n"}], "owner": {"reputation": 148157, "user_id": 35364, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f11512869fe2f8d87a2f2b687b76686c?s=128&d=identicon&r=PG", "display_name": "hasen", "link": "https://stackoverflow.com/users/35364/hasen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 0, "accepted_answer_id": 48017624, "answer_count": 1, "score": 2, "last_activity_date": 1514523750, "creation_date": 1514523096, "question_id": 48017554, "link": "https://stackoverflow.com/questions/48017554/android-vertical-space-around-text-with-custom-typeface", "title": "Android: vertical space around text with custom typeface", "body": "<p>I downloaded some fonts from the Noto font family, put them in the assets folder, and loaded them into a <code>Typeface</code> object, and then I programmatically set the typeface on a <code>TextView</code>, but when I do that there's some extra vertical padding above and below the text. It's as if the text height or line height was changed.</p>\n\n<p>Note that I'm using Kotlin/Anko, so the syntax might look weird compared to regular Java/XML:</p>\n\n<pre><code>textView {\n    text = someSpannableString\n    padding = dip(10)\n    isSelectable = true\n    typeface = someTypefaceInstance\n}\n</code></pre>\n\n<p>I tried to do this:</p>\n\n<pre><code>setLineSpacing(0f, 1f)\n</code></pre>\n\n<p>But it did not change anything.</p>\n\n<p>For what it's worth, the particular typeface here is \"NotoSerifCJKjp-Regular.otf\"</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 2, "creation_date": 1514527126, "post_id": 48014795, "comment_id": 83005155, "body": "Btw there is absolutely no point for providing the <code>getAge()</code> and <code>getName()</code> functions - kotlin automatically creates getters for all variables (apart from those annotated with <code>@JvmField</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": false, "score": 3, "last_activity_date": 1517430575, "last_edit_date": 1517430575, "creation_date": 1514498167, "answer_id": 48014861, "question_id": 48014795, "link": "https://stackoverflow.com/questions/48014795/how-to-set-the-value-of-property-in-kotlin/48014861#48014861", "title": "How to set the value of property in Kotlin", "body": "<p><code>someProperty</code> has a private setter. You can't set it outside the class when the setter is private</p>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 8, "last_activity_date": 1514545803, "last_edit_date": 1514545803, "creation_date": 1514498567, "answer_id": 48014922, "question_id": 48014795, "link": "https://stackoverflow.com/questions/48014795/how-to-set-the-value-of-property-in-kotlin/48014922#48014922", "title": "How to set the value of property in Kotlin", "body": "<p>First, the <code>private</code> modifier is your problem.</p>\n\n<p>Change </p>\n\n<pre><code>private set(value){field = value}\n</code></pre>\n\n<p>To </p>\n\n<pre><code>set(value){field = value}\n//public by default\n</code></pre>\n\n<p>Otherwise you can\u2019t use the setter outside the class. Read <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html#classes-and-interfaces\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<blockquote>\n  <p>For members declared inside a class:\n  <strong>private</strong> means visible inside this class only (including all its members);</p>\n</blockquote>\n\n<p>Second, you\u2019re misunderstanding something:</p>\n\n<pre><code> var kon = person.someProperty\n kon = \"manulilated\" \n</code></pre>\n\n<p>In these lines you\u2019re not changing the property in the object. After creating the variable <code>kon</code>, being a <code>String</code> pointing to <code>someProperty</code>, you reassign that local variable to something else. This reassignment is <em>unequal to changing</em> the value of <code>person.someProperty</code>! It has totally no effect in the object.</p>\n"}], "owner": {"reputation": 3033, "user_id": 3339394, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ciehO.jpg?s=128&g=1", "display_name": "The_Martian", "link": "https://stackoverflow.com/users/3339394/the-martian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6377, "favorite_count": 0, "accepted_answer_id": 48014922, "answer_count": 2, "score": 3, "last_activity_date": 1517430575, "creation_date": 1514497784, "question_id": 48014795, "link": "https://stackoverflow.com/questions/48014795/how-to-set-the-value-of-property-in-kotlin", "title": "How to set the value of property in Kotlin", "body": "<p>I have tried to set a property value as in the following snippet.This <a href=\"https://stackoverflow.com/questions/44515031/is-kotlin-pass-by-value-or-pass-by-reference\">SO question</a> is not answering the question. </p>\n\n<pre><code>var person = Person(\"john\", 24)\n        //sample_text.text = person.getName() + person.getAge()\n        var kon = person.someProperty\n        person.someProperty = \"crap\" //this doesn't allow me to set value\n        kon = \"manulilated\"  //this allows me to set the value\n        sample_text.text = kon\n\nclass Person(val n: String, val a: Int){\n    var pname: String = n\n    var page: Int = a\n\n    var someProperty: String = \"defaultValue\"\n        get() = field.capitalize()\n        private set(value){field = value}\n    fun Init(nm: String, ag: Int){\n        pname = nm\n        page = ag\n    }\n\n    fun getAge(): Int{\n        return page\n    }\n\n    fun getName(): String{\n        return pname\n    }\n}\n</code></pre>\n\n<p>Why was I able to set the value of the Person class on the second line but not the first line?</p>\n"}, {"tags": ["java", "sorting", "kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1514494758, "post_id": 48014242, "comment_id": 82997499, "body": "If you&#39;re using a <a href=\"https://www.jetbrains.com/idea/\" rel=\"nofollow noreferrer\">good IDE</a>, the auto-complete feature will give you suggestions for possible methods you can call on <code>statues</code>."}, {"owner": {"reputation": 1308, "user_id": 2581809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33afb2c1d879183a3b1e0f9418dd3195?s=128&d=identicon&r=PG", "display_name": "Ekeko", "link": "https://stackoverflow.com/users/2581809/ekeko"}, "edited": false, "score": 1, "creation_date": 1514499255, "post_id": 48014242, "comment_id": 82999064, "body": "Not an answer to your question but you may like to know that you can write: var statues: MutableList&lt;Int&gt; = mutableListOf&lt;Int&gt;(1, 3, 2)"}], "answers": [{"comments": [{"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 3, "creation_date": 1514528614, "post_id": 48014335, "comment_id": 83005588, "body": "everything correct - but <code>val sortedArray = statues.sorted()</code> is a lot more convenient than calling <code>.toMutableList().sort()</code>"}], "tags": [], "owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "is_accepted": false, "score": 3, "last_activity_date": 1514661000, "last_edit_date": 1514661000, "creation_date": 1514494828, "answer_id": 48014335, "question_id": 48014242, "link": "https://stackoverflow.com/questions/48014242/how-to-sort-kotlin-mutablelistint/48014335#48014335", "title": "How to sort Kotlin MutableList&lt;Int&gt;", "body": "<p>Since it's mutable data structure you can sort in place with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sort.html\" rel=\"nofollow noreferrer\">sort()</a></p>\n\n<blockquote>\n  <p><code>fun &lt;T : Comparable&lt;T&gt;&gt; MutableList&lt;T&gt;.sort() (source)</code></p>\n  \n  <p>Sorts elements in the list in-place according to their natural sort\n  order.</p>\n</blockquote>\n\n<pre><code>  val sortedArray = statues\n  sortedArray.sort()\n</code></pre>\n\n<p>But I guess you probably intend to make a copy of the list since you are declaring two variables. In that case:</p>\n\n<pre><code> val sortedArray = statues.sorted()\n</code></pre>\n\n<p>By the way that is a list, not an array.</p>\n\n<p>A couple of tips: a rule of thumb in programming is favoring immutability, in this case using <code>val</code> instead of <code>var</code> if possible. Also you don't need to indicate the type twice in the declaration. This suffices:</p>\n\n<pre><code>val statues: MutableList&lt;Int&gt; =  mutableListOf()\n</code></pre>\n"}], "owner": {"reputation": 580, "user_id": 6828297, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/377736de6834ba5a1fe4c2685ff1dcf5?s=128&d=identicon&r=PG&f=1", "display_name": "C Williams", "link": "https://stackoverflow.com/users/6828297/c-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1514661000, "creation_date": 1514494374, "last_edit_date": 1514494449, "question_id": 48014242, "link": "https://stackoverflow.com/questions/48014242/how-to-sort-kotlin-mutablelistint", "title": "How to sort Kotlin MutableList&lt;Int&gt;", "body": "<p>I am coming from a Java background, I have a simple array:</p>\n\n<pre><code>var statues: MutableList&lt;Int&gt; =  mutableListOf&lt;Int&gt;() \nstatues.add(1)\nstatues.add(3)\nstatues.add(2)\nvar sortedArray: MutableList&lt;Int&gt; =  mutableListOf&lt;Int&gt;()\nsortedArray = statues.sortedArray()\n</code></pre>\n\n<p>How do I sort this simple array and store in the variable sortedArray?</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "is_accepted": false, "score": 0, "last_activity_date": 1514494344, "creation_date": 1514494344, "answer_id": 48014231, "question_id": 48013933, "link": "https://stackoverflow.com/questions/48013933/pulling-data-from-an-api-with-okhttp-gson/48014231#48014231", "title": "Pulling data from an API with okHTTP &amp; GSON", "body": "<p>okHttp is a low level library. In order to consume JSON based APIs, <a href=\"https://square.github.io/retrofit/\" rel=\"nofollow noreferrer\">Retrofit</a> is a much more suitable library, as it already have converters that use libraries like GSON or Moshi to do all the heavy lifting for you.</p>\n"}, {"comments": [{"owner": {"reputation": 138, "user_id": 7280906, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c92a11856d250bbfec28725168a0db30?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Peragine", "link": "https://stackoverflow.com/users/7280906/chris-peragine"}, "edited": false, "score": 0, "creation_date": 1514497745, "post_id": 48014290, "comment_id": 82998542, "body": "Ah! got it, I had to name the cardFeed val Basic to match the top level in the JSON object, ty so much!"}], "tags": [], "owner": {"reputation": 1235, "user_id": 9119277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2gW1.jpg?s=128&g=1", "display_name": "Napster", "link": "https://stackoverflow.com/users/9119277/napster"}, "is_accepted": true, "score": 1, "last_activity_date": 1514494625, "creation_date": 1514494625, "answer_id": 48014290, "question_id": 48013933, "link": "https://stackoverflow.com/questions/48013933/pulling-data-from-an-api-with-okhttp-gson/48014290#48014290", "title": "Pulling data from an API with okHTTP &amp; GSON", "body": "<p>According to your class structure, the JSON object that you should get from the API should be </p>\n\n<pre><code>{  \n   \"cards\":[  \n      {  \n         \"cardId\":\"&lt;cardID&gt;\",\n         \"name\":\"&lt;name&gt;\",\n         \"flavor\":\"&lt;flavor&gt;\"\n      },\n      {  \n         \"cardId\":\"&lt;cardID&gt;\",\n         \"name\":\"&lt;name&gt;\",\n         \"flavor\":\"&lt;flavor&gt;\"\n      }\n   ]\n}\n</code></pre>\n\n<p>with the correct keys because when you use <code>gson.fromJson(body, CardFeed::class.java)</code>, it looks for the variable names in the class assigned (CardFeed.java). If you don't have the correct keys (\"cards\", \"cardId\", \"name\", \"flavor\"), gson would return null for the values</p>\n"}], "owner": {"reputation": 138, "user_id": 7280906, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c92a11856d250bbfec28725168a0db30?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Peragine", "link": "https://stackoverflow.com/users/7280906/chris-peragine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3242, "favorite_count": 0, "accepted_answer_id": 48014290, "answer_count": 2, "score": 0, "last_activity_date": 1514494625, "creation_date": 1514492817, "last_edit_date": 1514493443, "question_id": 48013933, "link": "https://stackoverflow.com/questions/48013933/pulling-data-from-an-api-with-okhttp-gson", "title": "Pulling data from an API with okHTTP &amp; GSON", "body": "<p>New to using API's (and kotlin for that matter) and I'm having some trouble figuring out how to pull data from an API into model objects and was hoping someone could point me in the right direction. Sample code below.</p>\n\n<pre><code>    val request = Request.Builder().header(\"X-Mashape-Key\", keyVal).url(url).build()\n    //make request client\n    val client = OkHttpClient()\n    //create request\n    client.newCall(request).enqueue(object: Callback {\n        override fun onResponse(call: Call?, response: Response?) {\n            //grab as string, works fine\n            val body = response?.body()?.string()\n            //make my builder, works fine\n            val gson = GsonBuilder().create()\n                // to pass type of class to kotlin ::\n            val cardFeed = gson.fromJson(body, CardFeed::class.java)\n\n        }\n\n        override fun onFailure(call: Call?, e: IOException?) {\n            println(\"Failed to execute request\")\n        }\n    })\n}\n</code></pre>\n\n<p>All of that seems to work as intended in debug, I get the string, and can see it but using the following it still dumps a null into the cardFeed/cards object. </p>\n\n<pre><code>class CardFeed(val cards: List&lt;Card&gt;)\nclass Card(val cardId: String, val name: String, val text: String, val flavor: String)\n</code></pre>\n\n<p>The body string I'm getting from the API reads as follows</p>\n\n<p>body: \"{Basic\":[{\"key\":\"value\", etc</p>\n\n<p>I'm assuming the [ is what's tripping me up, but not sure how to correct it.</p>\n\n<p>Any ideas or nudges in the correct direction would be greatly appreciated and thanks ahead of time.</p>\n"}, {"tags": ["java", "mongodb", "kotlin", "spring-data", "spring-data-mongodb"], "answers": [{"tags": [], "owner": {"reputation": 742, "user_id": 2706190, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/cO4py.gif?s=128&g=1", "display_name": "Bullet-tooth", "link": "https://stackoverflow.com/users/2706190/bullet-tooth"}, "is_accepted": false, "score": 0, "last_activity_date": 1514899849, "creation_date": 1514899849, "answer_id": 48061944, "question_id": 48011419, "link": "https://stackoverflow.com/questions/48011419/spring-data-mongodb-and-collections-schema-design/48061944#48061944", "title": "Spring data mongodb and collections schema design", "body": "<p>Finally I found solution. Here is my data classes:</p>\n\n<pre><code>@Document\ndata class User(\n        @Indexed\n        val name: String,\n        @Id\n        val id: String? = null\n)\n@Document\ndata class Wallet(\n        @DBRef\n        val user: User,\n        val balances: List&lt;Balance&gt;,\n        @Id\n        val id: String? = null\n)\ndata class Balance(val currency: String, val balance: BigDecimal)\n</code></pre>\n\n<p><code>@DBRef</code> annotation saves the reference to <code>ObjectId</code> in users collection. Here is an example of <code>Wallet</code> entity inside Mongo database:</p>\n\n<pre><code>&gt; db.wallet.findOne()\n{\n    \"_id\" : ObjectId(\"5a48cd1898318630f692508a\"),\n    \"user\" : DBRef(\"user\", ObjectId(\"5a48cd1898318630f6925089\")),\n    \"balances\" : [\n        {\n            \"currency\" : \"USD\",\n            \"balance\" : \"100\"\n        },\n        {\n            \"currency\" : \"EUR\",\n            \"balance\" : \"200\"\n        }\n    ],\n    \"_class\" : \"com.example.model.Wallet\"\n}\n</code></pre>\n"}], "owner": {"reputation": 742, "user_id": 2706190, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/cO4py.gif?s=128&g=1", "display_name": "Bullet-tooth", "link": "https://stackoverflow.com/users/2706190/bullet-tooth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1498, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1514899849, "creation_date": 1514480507, "last_edit_date": 1514482452, "question_id": 48011419, "link": "https://stackoverflow.com/questions/48011419/spring-data-mongodb-and-collections-schema-design", "title": "Spring data mongodb and collections schema design", "body": "<p>Friends, I have a question how to organize and annotate my Entities and spring data configuration for different relations?<br>\nI have User, Wallet and Balance entities with relations:  </p>\n\n<ul>\n<li>One to One: user &lt;-> wallet  </li>\n<li>One to many: wallet &lt;-> Balances  </li>\n</ul>\n\n<p>And I would like to have next schema inside mongodb:  </p>\n\n<pre><code>&gt; db.users.findOne()\n{\n    _id : ObjectID('UUUU'),\n    name : 'Jason Statham'\n}\n\n&gt; db.wallets.findOne()\n{\n    _id : ObjectID('WWWW'),\n    user : ObjectID('UUUU')\n    balances : [\n     { currency: 'USD', balance: 100},\n     { currency: 'EUR', balance: 530.50 }\n    ]\n}\n</code></pre>\n\n<ul>\n<li>Wallet should contain reference to User by ObjectID and User is stored on separate collection</li>\n<li>Wallet should contain balances as embedded entities</li>\n</ul>\n\n<p>Entities:</p>\n\n<pre><code>data class User(val id: String, val name: String)\ndata class Wallet(val id: String, val user: User, val balances: List&lt;Balance&gt;)\ndata class Balance(val currency: String, val balance: BigDecimal)\n</code></pre>\n\n<p>My Stack is:  </p>\n\n<ul>\n<li>Kotlin</li>\n<li>Spring Boot</li>\n<li>spring-boot-starter-data-mongodb-reactive</li>\n</ul>\n\n<p>My expectations are:</p>\n\n<ul>\n<li>I'll be able to fetch <code>Wallet</code> by <code>UserId</code> declaring function: <code>fun getWalletByUserId(userId : String): Mono&lt;Wallet&gt;</code> at <code>ReactiveMongoRepository</code>   </li>\n<li><code>Id</code> will be assigned automatically when saving entities</li>\n<li><code>Wallet</code> will contain <code>ObjectID</code> reference to <code>User</code>  </li>\n<li><code>Wallet</code> will contain <code>Balance</code> embedded collection  </li>\n</ul>\n"}, {"tags": ["android", "import", "kotlin", "libraries"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 5, "creation_date": 1514470815, "post_id": 48009104, "comment_id": 82986423, "body": "<code>sun.*</code> are internal packages. Don&#39;t use them. And AFAIK, they are not included in the Android SDK"}, {"owner": {"reputation": 495, "user_id": 3158589, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/178c5d03980a8918cbc229ad90a241bb?s=128&d=identicon&r=PG&f=1", "display_name": "MisterNowhere", "link": "https://stackoverflow.com/users/3158589/misternowhere"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1514471108, "post_id": 48009104, "comment_id": 82986536, "body": "So, can I just remove the line? @Zoe"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 2, "creation_date": 1514471136, "post_id": 48009104, "comment_id": 82986555, "body": "If you don&#39;t use it, yes. If you for whatever reason use MessageUtils.where, don&#39;t use it."}, {"owner": {"reputation": 495, "user_id": 3158589, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/178c5d03980a8918cbc229ad90a241bb?s=128&d=identicon&r=PG&f=1", "display_name": "MisterNowhere", "link": "https://stackoverflow.com/users/3158589/misternowhere"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1514471967, "post_id": 48009104, "comment_id": 82987019, "body": "&#246;kay man.. thank u a l&#246;t. I rem&#246;ved it.. it w&#246;rks.. thank U :D"}], "owner": {"reputation": 495, "user_id": 3158589, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/178c5d03980a8918cbc229ad90a241bb?s=128&d=identicon&r=PG&f=1", "display_name": "MisterNowhere", "link": "https://stackoverflow.com/users/3158589/misternowhere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1514470610, "creation_date": 1514470610, "question_id": 48009104, "link": "https://stackoverflow.com/questions/48009104/unresolved-reference-sun-misc-messageutils-where", "title": "Unresolved reference: sun.misc.MessageUtils.where", "body": "<p>I suddenly got this problem.. </p>\n\n<p>I have searched, but no results.</p>\n\n<p>any suggestions?  </p>\n\n<p>Thank u guys. \n<a href=\"https://i.stack.imgur.com/hJVxc.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hJVxc.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "android-fragments", "android-recyclerview", "kotlin", "android-lifecycle"], "answers": [{"tags": [], "owner": {"reputation": 2662, "user_id": 2707179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUNvp.jpg?s=128&g=1", "display_name": "michalbrz", "link": "https://stackoverflow.com/users/2707179/michalbrz"}, "is_accepted": true, "score": 2, "last_activity_date": 1514477954, "creation_date": 1514477954, "answer_id": 48010833, "question_id": 48008288, "link": "https://stackoverflow.com/questions/48008288/changing-list-on-fragment-is-changing-in-other-fragments/48010833#48010833", "title": "Changing list on fragment is changing in other fragments", "body": "<p>You are sharing one list between two fragments, which is not a good idea.\nKotlin favors immutability and in it should be the default way of doing things, unless you have very good reason.</p>\n\n<p>Two fragments are sharing list reference and that's why when one of it changes it, those changes are reflected in the other fragment.</p>\n\n<p>What you should do is instead of </p>\n\n<pre><code>fun setPages(pages: List&lt;Page&gt;) {\n    val iterator = (pages as ArrayList&lt;Page&gt;).iterator()\n    while (iterator.hasNext()) if (iterator.next().thumbnail == null) iterator.remove()\n    if (pages.isNotEmpty()) recycler_view.adapter = PagesAdapter(this, pages)\n}\n</code></pre>\n\n<p>you should write:</p>\n\n<pre><code>fun setPages(pages: List&lt;Page&gt;) {\n    val pagesWithThumbnails = pages.filter { it.thumbnail != null }\n    if (pagesWithThumbnails.isNotEmpty()) recycler_view.adapter = PagesAdapter(this, pagesWithThumbnails)\n}\n</code></pre>\n\n<p>There you don't modify original list while having more readable and error-proof code.</p>\n"}], "owner": {"reputation": 738, "user_id": 5503898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/95c4825378d97ab1d08f897764190365?s=128&d=identicon&r=PG&f=1", "display_name": "Ravers", "link": "https://stackoverflow.com/users/5503898/ravers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 48010833, "answer_count": 1, "score": 1, "last_activity_date": 1514477954, "creation_date": 1514467296, "question_id": 48008288, "link": "https://stackoverflow.com/questions/48008288/changing-list-on-fragment-is-changing-in-other-fragments", "title": "Changing list on fragment is changing in other fragments", "body": "<p>I have a TabLayout/ViewPager with two fragments in my activity. The tabs are created and then I request some information. When I get this information, I update the RecyclerView of each tab.</p>\n\n<p><strong>Main Activity</strong></p>\n\n<pre><code>private fun setViews() {\n    val adapter = TabsAdapter(supportFragmentManager)\n    adapter.addFragment(NewsFragment(), getString(R.string.dossier_activity_news))\n    adapter.addFragment(PhotosFragment(), resources.getString(R.string.dossier_activity_photos))\n\n    view_pager.adapter = adapter\n    tab_layout.setupWithViewPager(view_pager)\n\n    // request info\n}\n\nfun setPages(pages: List&lt;Page&gt;) {\n    // got info\n\n    ((view_pager.adapter as TabsAdapter).getItem(0) as NewsFragment).setPages(pages)\n    ((view_pager.adapter as TabsAdapter).getItem(1) as PhotosFragment).setPages(pages)\n}\n</code></pre>\n\n<p>The problem is: In the second tab(<strong>PhotosFragment</strong>), I want for remove all pages that does not contain a photo/thumbnail.</p>\n\n<p><strong>NewsFragment</strong></p>\n\n<pre><code>fun setPages(pages: List&lt;Page&gt;) {\n    if (pages.isNotEmpty()) recycler_view.adapter = PagesAdapter(this, pages)\n}\n</code></pre>\n\n<p><strong>PhotosFragment</strong></p>\n\n<pre><code>fun setPages(pages: List&lt;Page&gt;) {\n    val iterator = (pages as ArrayList&lt;Page&gt;).iterator()\n    while (iterator.hasNext()) if (iterator.next().thumbnail == null) iterator.remove()\n    if (pages.isNotEmpty()) recycler_view.adapter = PagesAdapter(this, pages)\n}\n</code></pre>\n\n<p>When I create this iterator on the second tab, all the pages on the first fragment are also updated to no photos/thumbnails pages. Each fragment has is own life cycle and by changing the content of one fragment it should not update the other right?</p>\n\n<p>Could this be because of my <strong>PagesAdapter</strong> extend RecyclerView?</p>\n\n<p><strong>PagesAdapter</strong></p>\n\n<pre><code>class PagesAdapter(private var fragment: Fragment, private var pages: List&lt;Page&gt;): RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n\n    override fun onCreateViewHolder(parent: ViewGroup, type: Int): RecyclerView.ViewHolder {\n        return when (type) {\n            0 -&gt; HeaderViewHolder(LayoutInflater.from(parent.context).inflate(R.layout.article_header_item, parent, false))\n            else -&gt; ArticleViewHolder(LayoutInflater.from(parent.context).inflate(R.layout.article_item, parent, false))\n        }\n    }\n\n    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n        val type = getItemViewType(position)\n        when (type) {\n            0 -&gt; setHeader(holder as PagesAdapter.HeaderViewHolder, position)\n            else -&gt; setArticle(holder as PagesAdapter.ArticleViewHolder, position)\n        }\n    }\n\n    inner class HeaderViewHolder internal constructor(view: View) : RecyclerView.ViewHolder(view) {\n        val layout: RelativeLayout = view.article_header_layout\n        val image: ImageView = view.article_header_image\n        val title: AOTextView = view.title_header_text\n        val date: AOTextView = view.date_header_text\n    }\n\n    inner class ArticleViewHolder internal constructor(view: View) : RecyclerView.ViewHolder(view) {\n        val layout: RelativeLayout = view.article_layout\n        val image: ImageView = view.article_image\n        val strapline: AOTextView = view.strapline_text\n        val title: AOTextView = view.title_text\n        val date: AOTextView = view.date_text\n    }\n}\n</code></pre>\n\n<p>Both fragments have the same pages list, but I want the second fragment to filter this list to show only pages with photos/thumbnails. By filtering the list in the second fragment, the first one shows the same filtered list. Should I aproach this differently? Or is some bug in my code?</p>\n"}, {"tags": ["java", "android", "parameters", "kotlin", "parameter-passing"], "comments": [{"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1514466819, "post_id": 48008103, "comment_id": 82984453, "body": "If you open that base class containing <code>query</code>, AS should provide an option to &quot;download sources&quot;"}, {"owner": {"reputation": 1861, "user_id": 7804719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/P3Meo.jpg?s=128&g=1", "display_name": "Jaydip Kalkani", "link": "https://stackoverflow.com/users/7804719/jaydip-kalkani"}, "reply_to_user": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 1, "creation_date": 1514466993, "post_id": 48008103, "comment_id": 82984554, "body": "every time i have to open base class for watching parameters. is there any better way? when i open base class AS is not providing me option to &quot;download sources&quot;. it just open base class. @s1m0nw1"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1514467102, "post_id": 48008103, "comment_id": 82984614, "body": "Maybe this helps then: <a href=\"https://stackoverflow.com/questions/21221679/android-studio-how-to-attach-android-sdk-sources\" title=\"android studio how to attach android sdk sources\">stackoverflow.com/questions/21221679/&hellip;</a>"}], "owner": {"reputation": 1861, "user_id": 7804719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/P3Meo.jpg?s=128&g=1", "display_name": "Jaydip Kalkani", "link": "https://stackoverflow.com/users/7804719/jaydip-kalkani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 453, "favorite_count": 2, "closed_date": 1540813821, "answer_count": 0, "score": 5, "last_activity_date": 1538723625, "creation_date": 1514466547, "last_edit_date": 1520768123, "question_id": 48008103, "link": "https://stackoverflow.com/questions/48008103/inappropriate-names-of-parameter-in-implemented-overrided-methods", "closed_reason": "Duplicate", "title": "InAppropriate names of parameter in implemented/overrided methods", "body": "<p>I am using android studio 3.0.1 and i am developing android application using kotlin. so, i have configured kotlin in my project. After configuring kotlin when i override any methods, i am getting the parameter names as p0, p1, p2, etc as below.</p>\n\n<pre><code>override fun query(p0: Uri?, p1: Array&lt;out String&gt;?, p2: String?, p3: Array&lt;out String&gt;?, p4: String?): Cursor {\n    ...\n}\n</code></pre>\n\n<p>Instead of these names i want appropriate names of parameters like projection, selection, selectionArgs, etc as below.</p>\n\n<pre><code>public Cursor query(@NonNull Uri uri, @Nullable String[] projection, @Nullable String selection, @Nullable String[] selectionArgs, @Nullable String sortOrder) {\n    ...\n}\n</code></pre>\n\n<p>when i was using java it was working fine but when i started using kotlin this problem occures. This parameter names are confusing. so, i want to get names like i get in java code. Is there any way to do this?</p>\n"}, {"tags": ["android", "firebase", "arraylist", "firebase-realtime-database", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 7877554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13fce9ef1e32ae69db78e3c7c0a72641?s=128&d=identicon&r=PG&f=1", "display_name": "Kashif Minhaj", "link": "https://stackoverflow.com/users/7877554/kashif-minhaj"}, "edited": false, "score": 0, "creation_date": 1514526214, "post_id": 48014594, "comment_id": 83004909, "body": "Thanks. I will go with Firebase ui. Btw, I thought items in lists appended at the end (based on timestamp) hence the code in onChildAdded. Thanks for the correction."}, {"owner": {"reputation": 3492, "user_id": 4548500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/682a8ee4855d2f4617199afbd9fd23cf?s=128&d=identicon&r=PG", "display_name": "SUPERCILEX", "link": "https://stackoverflow.com/users/4548500/supercilex"}, "reply_to_user": {"reputation": 83, "user_id": 7877554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13fce9ef1e32ae69db78e3c7c0a72641?s=128&d=identicon&r=PG&f=1", "display_name": "Kashif Minhaj", "link": "https://stackoverflow.com/users/7877554/kashif-minhaj"}, "edited": false, "score": 1, "creation_date": 1514528484, "post_id": 48014594, "comment_id": 83005543, "body": "Well, it is true that the <code>push()</code> method creates keys based off of a timestamp and that the default query order is alphabetical, but let&#39;s say you want to get the most upvoted posts or something. You&#39;d write <code>query.orderByChild(&quot;votes&quot;)</code> and then children could be added anywhere regardless of their keys. I&#39;m just saving you from future pain. \ud83d\ude09"}], "tags": [], "owner": {"reputation": 3492, "user_id": 4548500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/682a8ee4855d2f4617199afbd9fd23cf?s=128&d=identicon&r=PG", "display_name": "SUPERCILEX", "link": "https://stackoverflow.com/users/4548500/supercilex"}, "is_accepted": true, "score": 1, "last_activity_date": 1514496441, "creation_date": 1514496441, "answer_id": 48014594, "question_id": 48007595, "link": "https://stackoverflow.com/questions/48007595/how-to-update-an-element-in-arraylist-without-knowing-index-in-android-with-fire/48014594#48014594", "title": "How to update an element in ArrayList without knowing index in Android with Firebase Realtime Database?", "body": "<p>I would by far recommend that you use <a href=\"https://github.com/firebase/FirebaseUI-Android/blob/master/database/README.md#using-the-firebaserecycleradapter\" rel=\"nofollow noreferrer\">FirebaseUI</a> which is built exactly for your use case.</p>\n\n<p>However, if you'd really like to go solo, then no, the only way to get the index of an updated child is by finding it in your existing data. Here's an example from FirebaseUI's internals:</p>\n\n<pre><code>private int getIndexForKey(String key) {\n    int index = 0;\n    for (DataSnapshot snapshot : mSnapshots) {\n        if (snapshot.getKey().equals(key)) {\n            return index;\n        } else {\n            index++;\n        }\n    }\n    throw new IllegalArgumentException(\"Key not found\");\n}\n</code></pre>\n\n<p>Here's how FUI <a href=\"https://github.com/firebase/FirebaseUI-Android/blob/6fb7ac3e5267319dff526a63d37ba6c3722e637f/database/src/main/java/com/firebase/ui/database/FirebaseArray.java#L64-L100\" rel=\"nofollow noreferrer\">uses <code>getIndexForKey(String)</code></a>.</p>\n\n<p>Iterating through the list works just fine in terms of performance as long as you aren't downloading ridiculously large lists. Otherwise, you can use a <code>Map&lt;String, Integer&gt;</code> and see the attempt for FUI <a href=\"https://github.com/firebase/FirebaseUI-Android/pull/481\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>PS: your <code>onChildAdded</code> code is wrong for inserts (items will always be added at the end even if they are in the middle). See how <a href=\"https://github.com/firebase/FirebaseUI-Android/blob/6fb7ac3e5267319dff526a63d37ba6c3722e637f/database/src/main/java/com/firebase/ui/database/FirebaseArray.java#L64-L73\" rel=\"nofollow noreferrer\">FUI does this</a>.</p>\n"}], "owner": {"reputation": 83, "user_id": 7877554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13fce9ef1e32ae69db78e3c7c0a72641?s=128&d=identicon&r=PG&f=1", "display_name": "Kashif Minhaj", "link": "https://stackoverflow.com/users/7877554/kashif-minhaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1395, "favorite_count": 0, "accepted_answer_id": 48014594, "answer_count": 1, "score": 2, "last_activity_date": 1514496441, "creation_date": 1514464322, "last_edit_date": 1514474291, "question_id": 48007595, "link": "https://stackoverflow.com/questions/48007595/how-to-update-an-element-in-arraylist-without-knowing-index-in-android-with-fire", "title": "How to update an element in ArrayList without knowing index in Android with Firebase Realtime Database?", "body": "<p>I have  a simple RecyclerView with CardView as list items. Each item of the list retrieved from Firebase Realtime databse and stored to <code>noteList</code>. Firebase sdk provides callbacks for onChildAdded, onChildChanged and few others. Now I have designed the Adapter for recycler view to take in an ArrayList. I use the callbacks to add or remove items to the <code>noteList</code> whenever the data in Realtime database changes. The <code>onChildChanged</code> method is called whenever a value of particular item changes. I want to reflect this change in <code>noteList</code> and notify the adapter of the same.\nOfcourse, we can naively search for each element in the List matching the changed element's key and update it. But can this be done in a better/efficient way?</p>\n\n<pre><code>class NoteListAdapter(var data: MutableList&lt;Note&gt;, val onItemClick: (Note) -&gt; Unit) : RecyclerView.Adapter&lt;NoteListAdapter.ViewHolder&gt;() {\n    override fun onBindViewHolder(holder: ViewHolder?, position: Int) {\n        holder!!.bindNoteItem(data[position])\n    }\n\n    override fun getItemCount(): Int = data.size\n\n    override fun onCreateViewHolder(parent: ViewGroup?, viewType: Int): ViewHolder {\n        val v = LayoutInflater.from(parent?.context)\n                .inflate(R.layout.card_note, parent, false)\n        return ViewHolder(v, onItemClick)\n    }\n\n    class ViewHolder(v: View, val onItemClick: (Note) -&gt; Unit): RecyclerView.ViewHolder(v) {\n        fun bindNoteItem(note: Note) {\n            ...\n        }\n    }\n}\n</code></pre>\n\n<p><strong>HomeActivity.kt</strong></p>\n\n<pre><code>class HomeActivity : AppCompatActivity() {\n    lateinit var mDb: DatabaseReference\n    val noteList: MutableList&lt;Note&gt; = ArrayList()\n    lateinit var adapter: NoteListAdapter\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_home)\n\n        addNoteFAB.setOnClickListener { addNote() }\n        mDb = FirebaseDatabase.getInstance().reference\n\n        adapter = NoteListAdapter(noteList, this::editNote)\n        noteListRecycler.layoutManager = LinearLayoutManager(this)\n        noteListRecycler.adapter = adapter\n\n        loadNotes()\n    }\n\n    fun addNote() {\n        val intent = Intent(this, EditNoteActivity::class.java)\n        intent.putExtra(EditNoteActivity.EXTRA_NOTE, Note())\n        startActivity(intent)\n    }\n\n    fun loadNotes() {\n        val path = \"users/\" + FirebaseAuth.getInstance().currentUser?.uid + \"/notes\"\n        mDb.child(path ).addChildListener({\n// onChildAdded\n            dataSnapshot, prevChildName -&gt;\n            val note = dataSnapshot?.getValue(Note::class.java)!!\n            note.id = dataSnapshot.key\n            noteList += note\n            adapter.notifyDataSetChanged()\n        }, {\n// onChildRemoved\n            dataSnapshot -&gt;\n            noteList.remove(dataSnapshot?.getValue(Note::class.java))\n            adapter.notifyDataSetChanged()\n        }, {\n// onChildChanged, TODO: update the change in elements value in noteList\n            dataSnapshot, s -&gt;\n\n        })\n\n    }\n\n    fun editNote(note: Note) {\n        val i = Intent(this, EditNoteActivity::class.java)\n        i.putExtra(EditNoteActivity.EXTRA_NOTE, note)\n        startActivity(i)\n    }\n}\n</code></pre>\n\n<p>PS: addChildListener is an extension function. (check comments in code for the name of callbacks)</p>\n\n<p>Since <code>dataSnapshot</code> can only tell us the key and value that was changed (as far as I know from the docs), how will I update <code>noteList</code> without knowing the index of the changed element? Or is there really a way to get the index?</p>\n"}]