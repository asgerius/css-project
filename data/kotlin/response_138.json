[{"tags": ["android", "nullpointerexception", "kotlin"], "comments": [{"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "edited": false, "score": 0, "creation_date": 1504157936, "post_id": 45971191, "comment_id": 78906596, "body": "Can you show how you call the <code>fun insert(uri: Uri, contentValues: ContentValues?): Uri?</code> method?"}, {"owner": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "reply_to_user": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "edited": false, "score": 0, "creation_date": 1504197652, "post_id": 45971191, "comment_id": 78932730, "body": "That method is a required override and its not used anywhere else in my app."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504140682, "post_id": 45971465, "comment_id": 78902250, "body": "Thank you. I tried your suggestion and it had no effect.  Still allows me to add an ingredient with no name."}, {"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "reply_to_user": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504143408, "post_id": 45971465, "comment_id": 78902826, "body": "It might be that values is never null at all. you can check if empty by using <code>.isEmpty()</code> Please check edit"}, {"owner": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504145112, "post_id": 45971465, "comment_id": 78903209, "body": "You may be right. I&#39;ll try that and check back shortly."}, {"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "reply_to_user": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504145536, "post_id": 45971465, "comment_id": 78903310, "body": "Does <code>getAsString()</code> returns a <code>String?</code> or a <code>String</code>? You might need to consider for nulls if it returns <code>String?</code> Extend the if condition to cater both <code>empty</code> and <code>null</code>."}, {"owner": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504152462, "post_id": 45971465, "comment_id": 78904907, "body": "Strange. .isEmpty isn&#39;t working either.  I think values is defined in another activity which is why its not working here.  I might just scrap the name check completely and try adding TextChanged listeners to my EditText boxes and add field check logic in one of the override methods.  The whole point is to ensure that users cannot leave the name field blank prior to updating or adding an ingredient in my app so that might be the ticket."}, {"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "reply_to_user": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504153750, "post_id": 45971465, "comment_id": 78905301, "body": "That is strange, can you post your code so we can help you trace it?"}], "tags": [], "owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "is_accepted": false, "score": 0, "last_activity_date": 1504144489, "last_edit_date": 1504144489, "creation_date": 1504138492, "answer_id": 45971465, "question_id": 45971191, "link": "https://stackoverflow.com/questions/45971191/android-check-for-not-null-isnt-working-as-expected/45971465#45971465", "title": "Android - Check for Not Null Isn&#39;t Working As Expected", "body": "<p>You can omit the if statement and do this instead</p>\n\n<pre><code>values?.getAsString(IngredientEntry.COLUMN_INGREDIENT_NAME) ?: throw IllegalArgumentException(\"Ingredient requires a name\")\n</code></pre>\n\n<p>Your elvis operator is not working because your if statement never return a null, its either the string or an NPE.</p>\n\n<p>You can actually make your code better by using let block. something like this.</p>\n\n<pre><code>values?.let{\n    //logic here that uses value, refer to value as it\n} ?: IllegalArgumentException()\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<pre><code>values?.let{\n    if(it.getAsString(IngredientEntry.COLUMN_INGREDIENT_NAME).isEmpty()) throw IllegalArgumentException()\n    else // do your logic\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504233363, "creation_date": 1504136278, "last_edit_date": 1504233363, "question_id": 45971191, "link": "https://stackoverflow.com/questions/45971191/android-check-for-not-null-isnt-working-as-expected", "title": "Android - Check for Not Null Isn&#39;t Working As Expected", "body": "<p>I've run into an odd issue where my check for not Null isn't working. I'm trying to check if values is empty and if so pop a warning that says \"Ingredient requires a name\"  I don't know why but I cant seem to figure this out which should be fairly simple. </p>\n\n<p>I'm still new to Kotlin so I suspect my Java to Kotlin thought process is flawed here.</p>\n\n<p>Any help and advice would be much appreciated!  </p>\n\n<p>The portion I'm having trouble with:</p>\n\n<pre><code>// Check that the name is not null\n    (if (values != null) values else throw KotlinNullPointerException()).getAsString(IngredientEntry.COLUMN_INGREDIENT_NAME) ?: throw IllegalArgumentException(\"Ingredient requires a name\")\n</code></pre>\n\n<p>The complete class. I tend to comment the crap out of everything so hopefully it makes sense:</p>\n\n<pre><code>import android.content.ContentProvider\nimport android.content.ContentUris\nimport android.content.ContentValues\nimport android.content.UriMatcher\nimport android.database.Cursor\nimport android.database.sqlite.SQLiteDatabase\nimport android.net.Uri\nimport android.util.Log\nimport \nimport kotlin.properties.Delegates\n\nclass DbContentProvider : ContentProvider() {\n\n// Database helper object\nprivate var mDbHelper: DbHelper by Delegates.notNull()\n\n\n// Order the of ingredients in the list view\nprivate val ingredientSortBy = IngredientEntry.COLUMN_INGREDIENT_NAME\n\noverride fun onCreate(): Boolean {\n    mDbHelper = DbHelper(context)\n    return true\n}\n\noverride fun query(uri: Uri, projection: Array&lt;String&gt;?, selection: String?, selectionArgs: Array&lt;String&gt;?,\n                   sortOrder: String?): Cursor? {\n\n    // Get readable database\n    val database: SQLiteDatabase = mDbHelper.readableDatabase\n\n    // This cursor will hold the result of the query\n    val cursor: Cursor\n\n    // Figure out if the URI matcher can match the URI to a specific code\n    val match = sUriMatcher.match(uri)\n    when (match) {\n        INGREDIENTS -&gt;\n            // For the INGREDIENTS code, query the ingredients table directly with the given\n            // projection, selection, selection arguments, and sort order. The cursor\n            // could contain multiple rows of the ingredients table.\n            // Query is uri, projection, selection, selectionArgs, sortOrder and orderBy\n            cursor = database.query(IngredientEntry.TABLE_NAME, projection, selection, selectionArgs, null, null, ingredientSortBy)\n        INGREDIENTS_ID -&gt; {\n            // For the INGREDIENTS_ID code, extract out the ID from the URI.\n            // For an example URI such as \"content://com.example.android.ingredients/ingredients/3\",\n            // the selection will be \"_id=?\" and the selection argument will be a\n            // String array containing the actual ID of 3 in this case.\n            //\n            // For every \"?\" in the selection, we need to have an element in the selection\n            // arguments that will fill in the \"?\". Since we have 1 question mark in the\n            // selection, we have 1 String in the selection arguments' String array.\n            val mSelection = IngredientEntry._ID + \"=?\"\n            val mSelectionArgs = arrayOf(ContentUris.parseId(uri).toString())\n\n            // This will perform a query on the ingredients table where the _id equals 3 to return a\n            // Cursor containing that row of the table.\n            // Query is uri, projection, selection, selectionArgs, sortOrder and orderBy\n            cursor = database.query(IngredientEntry.TABLE_NAME, projection, mSelection, mSelectionArgs, null, null, ingredientSortBy)\n        }\n        else -&gt; throw IllegalArgumentException(\"Cannot query unknown URI \" + uri)\n    }\n\n    // Set notification URI on the Cursor,\n    // so we know what content URI the Cursor was created for.\n    // If the data at this URI changes, then we know we need to update the Cursor.\n    cursor.setNotificationUri(context.contentResolver, uri)\n\n    // Return the cursor\n    return cursor\n}\n\noverride fun insert(uri: Uri, contentValues: ContentValues?): Uri? {\n    val match = sUriMatcher.match(uri)\n    when (match) {\n        INGREDIENTS -&gt; return insertIngredient(uri, contentValues)\n        else -&gt; throw IllegalArgumentException(\"Insertion is not supported for \" + uri)\n    }\n}\n\n/**\n * Insert an ingredient into the database with the given content values. Return the new content URI\n * for that specific row in the database.\n */\nprivate fun insertIngredient(uri: Uri, contentValues: ContentValues?): Uri? {\n    // Check that the name is not null or empty\n    val ingredientName = contentValues?.getAsString(IngredientEntry.COLUMN_INGREDIENT_NAME)\n    if (ingredientName == null || ingredientName.isEmpty()) {\n        throw IllegalArgumentException(\"Ingredient requires valid category\")\n    }\n\n    // Check that the category is valid\n    val category = contentValues.getAsInteger(IngredientEntry.COLUMN_INGREDIENT_CATEGORY)\n    if (category == null || !IngredientEntry.isValidCategory(category)) {\n        throw IllegalArgumentException(\"Ingredient requires valid category\")\n    }\n\n    // Check that the measurement is valid\n    val measurement = contentValues.getAsInteger(IngredientEntry.COLUMN_INGREDIENT_MEASUREMENT)\n    if (measurement == null || !IngredientEntry.isValidMeasurement(measurement)) {\n        throw IllegalArgumentException(\"Ingredient requires valid measurement\")\n    }\n\n    // No need to check the description, any value is valid (including null).\n\n    // Get writable database\n    val database = mDbHelper.writableDatabase\n\n    // Insert the new ingredient with the given values\n    val id = database.insert(IngredientEntry.TABLE_NAME, null, contentValues)\n    // If the ID is -1, then the insertion failed. Log an error and return null.\n    if (id == (-1).toLong()) {\n        Log.e(LOG_TAG, \"Failed to insert row for \" + uri)\n        return null\n    }\n\n    // Notify all listeners that the data has changed for the ingredient content URI\n    context.contentResolver.notifyChange(uri, null)\n\n    // Return the new URI with the ID (of the newly inserted row) appended at the end\n    return ContentUris.withAppendedId(uri, id)\n}\n\noverride fun update(uri: Uri, contentValues: ContentValues?, selection: String?,\n                    selectionArgs: Array&lt;String&gt;?): Int {\n\n    val match = sUriMatcher.match(uri)\n    return when (match) {\n        INGREDIENTS -&gt; updateIngredient(uri, contentValues, selection, selectionArgs)\n        INGREDIENTS_ID -&gt; {\n            // For the INGREDIENTS_ID code, extract out the ID from the URI,\n            // so we know which row to update. Selection will be \"_id=?\" and selection\n            // arguments will be a String array containing the actual ID.\n            val mSelection = IngredientEntry._ID + \"=?\"\n            val mSelectionArgs = arrayOf(ContentUris.parseId(uri).toString())\n            updateIngredient(uri, contentValues, mSelection, mSelectionArgs)\n        }\n        else -&gt; throw IllegalArgumentException(\"Update is not supported for \" + uri)\n    }\n}\n\n/**\n * Update ingredients in the database with the given content contentValues. Apply the changes to the rows\n * specified in the selection and selection arguments (which could be 0 or 1 or more ingredients).\n * Return the number of rows that were successfully updated.\n */\nprivate fun updateIngredient(uri: Uri, contentValues: ContentValues?, selection: String?, selectionArgs: Array&lt;String&gt;?): Int {\n    // If the {@link IngredientEntry#COLUMN_INGREDIENT_NAME} key is present,\n    // check that the name value is not null.\n    if ((if (contentValues != null) contentValues else throw KotlinNullPointerException()).containsKey(IngredientEntry.COLUMN_INGREDIENT_NAME)) {\n        contentValues.getAsString(IngredientEntry.COLUMN_INGREDIENT_NAME) ?: throw IllegalArgumentException(\"Ingredient requires a name\")\n    }\n\n    // If the {@link IngredientEntry#COLUMN_INGREDIENT_CATEGORY} key is present,\n    // check that the category value is valid.\n    if (contentValues.containsKey(IngredientEntry.COLUMN_INGREDIENT_CATEGORY)) {\n        val category = contentValues.getAsInteger(IngredientEntry.COLUMN_INGREDIENT_CATEGORY)\n        if (category == null || !IngredientEntry.isValidCategory(category)) {\n            throw IllegalArgumentException(\"Ingredient requires valid category\")\n        }\n    }\n\n    // If the {@link IngredientEntry#COLUMN_INGREDIENT_MEASUREMENT} key is present,\n    // check that the measurement value is valid.\n    if (contentValues.containsKey(IngredientEntry.COLUMN_INGREDIENT_MEASUREMENT)) {\n        val measurement = contentValues.getAsInteger(IngredientEntry.COLUMN_INGREDIENT_MEASUREMENT)\n        if (measurement == null || !IngredientEntry.isValidMeasurement(measurement)) {\n            throw IllegalArgumentException(\"Ingredient requires valid measurement\")\n        }\n    }\n\n    // No need to check the description, any value is valid (including null).\n\n    // If there are no contentValues to update, then don't try to update the database\n    if (contentValues.size() == 0) {\n        return 0\n    }\n\n    // Otherwise, get writable database to update the data\n    val database = mDbHelper.writableDatabase\n\n    // Perform the update on the database and get the number of rows affected\n    val rowsUpdated = database.update(IngredientEntry.TABLE_NAME, contentValues, selection, selectionArgs)\n\n    // If 1 or more rows were updated, then notify all listeners that the data at the\n    // given URI has changed\n    if (rowsUpdated != 0) {\n        context.contentResolver.notifyChange(uri, null)\n    }\n\n    // Return the number of rows updated\n    return rowsUpdated\n}\n\noverride fun delete(uri: Uri, selection: String?, selectionArgs: Array&lt;String&gt;?): Int {\n\n    // Get writable database\n    val database = mDbHelper.writableDatabase\n\n    // Track the number of rows that were deleted\n    val rowsDeleted: Int\n\n    val match = sUriMatcher.match(uri)\n    rowsDeleted = when (match) {\n        INGREDIENTS -&gt;\n            // Delete all rows that match the selection and selection args\n            database.delete(IngredientEntry.TABLE_NAME, selection, selectionArgs)\n        INGREDIENTS_ID -&gt; {\n            // Delete a single row given by the ID in the URI\n            val mSelection = IngredientEntry._ID + \"=?\"\n            val mSelectionArgs = arrayOf(ContentUris.parseId(uri).toString())\n            database.delete(IngredientEntry.TABLE_NAME, mSelection, mSelectionArgs)\n        }\n        else -&gt; throw IllegalArgumentException(\"Deletion is not supported for \" + uri)\n    }\n\n    // If 1 or more rows were deleted, then notify all listeners that the data at the\n    // given URI has changed\n    if (rowsDeleted != 0) {\n        context.contentResolver.notifyChange(uri, null)\n    }\n\n    // Return the number of rows deleted\n    return rowsDeleted\n}\n\noverride fun getType(uri: Uri): String? {\n    val match = sUriMatcher.match(uri)\n    return when (match) {\n        INGREDIENTS -&gt; IngredientEntry.CONTENT_LIST_TYPE\n        INGREDIENTS_ID -&gt; IngredientEntry.CONTENT_ITEM_TYPE\n        else -&gt; throw IllegalStateException(\"Unknown URI $uri with match $match\")\n    }\n}\n\ncompanion object {\n\n    /** Tag for the log messages  */\n    val LOG_TAG: String? = ContentProvider::class.java.simpleName\n\n    /** URI matcher code for the content URI for the ingredients table  */\n    private val INGREDIENTS = 100\n\n    /** URI matcher code for the content URI for a single ingredient in the ingredients table  */\n    private val INGREDIENTS_ID = 101\n\n    /**\n     * UriMatcher object to match a content URI to a corresponding code.\n     * The input passed into the constructor represents the code to return for the root URI.\n     * It's common to use NO_MATCH as the input for this case.\n     */\n    private val sUriMatcher = UriMatcher(UriMatcher.NO_MATCH)\n\n    // Static initializer. This is run the first time anything is called from this class.\n    init {\n        // The calls to addURI() go here, for all of the content URI patterns that the provider\n        // should recognize. All paths added to the UriMatcher have a corresponding code to return\n        // when a match is found.\n\n        // The content URI of the form \"content://com.example.android.ingredients/ingredients\" will map to the\n        // integer code {@link #INGREDIENTS}. This URI is used to provide access to MULTIPLE rows\n        // of the ingredients table.\n        sUriMatcher.addURI(DbContract.CONTENT_AUTHORITY, DbContract.PATH_INGREDIENTS, INGREDIENTS)\n\n        // The content URI of the form \"content://com.example.android.ingredients/ingredients/#\" will map to the\n        // integer code {@link #INGREDIENTS_ID}. This URI is used to provide access to ONE single row\n        // of the ingredients table.\n        //\n        // In this case, the \"#\" wildcard is used where \"#\" can be substituted for an integer.\n        // For example, \"content://com.example.android.ingredients/ingredients/3\" matches, but\n        // \"content://com.example.android.ingredients/ingredients\" (without a number at the end) doesn't match.\n        sUriMatcher.addURI(DbContract.CONTENT_AUTHORITY, DbContract.PATH_INGREDIENTS + \"/#\", INGREDIENTS_ID)\n    }\n}\n}\n</code></pre>\n\n<p>I updated my method and now it catches null or empty. However, it will obviously crash my app if someone leaves the name field blank. Any ideas on how I can let the user know that the name field must be populated, not crash my app and stop the ingredient from being created?  Thanks!</p>\n\n<pre><code>// Check that the name is not null or empty\n    val ingredientName = contentValues?.getAsString(IngredientEntry.COLUMN_INGREDIENT_NAME)\n    if (ingredientName == null || ingredientName.isEmpty()) {\n        throw IllegalArgumentException(\"Ingredient requires valid category\")\n    }\n</code></pre>\n\n<p>Another version I made catches the exception and doesnt crash the app but still allows for the user to create an ingredient without a name.  Bah!</p>\n\n<pre><code>// Check that the name EditText field is not null or empty\n    val ingredientName = contentValues?.getAsString(IngredientEntry.COLUMN_INGREDIENT_NAME)\n    if (ingredientName == null || ingredientName.isEmpty()) {\n        try {\n            throw Exception (\"Ingredient requires a name\")\n        } catch (exception: Exception) {\n            System.out.println(exception)\n        }\n    }\n</code></pre>\n"}, {"tags": ["properties", "delegates", "kotlin", "lazy-evaluation", "thread-local"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 9, "last_activity_date": 1504179442, "last_edit_date": 1504179442, "creation_date": 1504134510, "answer_id": 45970990, "question_id": 45970738, "link": "https://stackoverflow.com/questions/45970738/kotlin-delegate-property-by-lazy-that-is-thread-local/45970990#45970990", "title": "Kotlin delegate property by lazy that is thread local", "body": "<p>The <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#delegated-properties\" rel=\"noreferrer\">Kotlin delegates</a> are easy to extend with your own implementation.</p>\n\n<ul>\n<li><p>You can make your delegate maintain a <code>ThreadLocal&lt;T&gt;</code> with <code>initialValue</code> calculated by the function that is passed:</p>\n\n<pre><code>class ThreadLocalLazy&lt;T&gt;(val provider: () -&gt; T) :ReadOnlyProperty&lt;Any?, T&gt; {\n    private val threadLocal = object : ThreadLocal&lt;T&gt;() {\n        override fun initialValue(): T = provider()\n    }\n\n    override fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T =\n        threadLocal.get()\n}\n</code></pre></li>\n<li><p>Or maintain a <code>Lazy&lt;T&gt;</code> per thread with <code>ThreadLocal&lt;Lazy&lt;T&gt;&gt;</code>, so that your delegate can implement <code>Lazy&lt;T&gt;</code> by itself:</p>\n\n<pre><code>class ThreadLocalLazy&lt;T&gt;(val provider: () -&gt; T) : Lazy&lt;T&gt; {\n    private val threadLocal = object : ThreadLocal&lt;Lazy&lt;T&gt;&gt;() {\n        override fun initialValue(): Lazy&lt;T&gt; = \n            lazy(LazyThreadSafetyMode.NONE, provider)\n    }\n\n    override val value get() = threadLocal.get().value\n    override fun isInitialized() = threadLocal.get().isInitialized()\n}\n</code></pre></li>\n</ul>\n\n<p>Here's a convenience function to create instances of the delegate:</p>\n\n<pre><code>fun &lt;T&gt; threadLocalLazy(provider: () -&gt; T) = ThreadLocalLazy(provider)\n</code></pre>\n\n<p>Then just delegate a property to <code>threadLocalLazy { ... }</code>. Usage example:</p>\n\n<pre><code>class Example {\n    val threadId by threadLocalLazy { Thread.currentThread().id }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val example = Example()\n    repeat(3) {\n        thread {\n            println(example.threadId) // should print three different numbers\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1953, "user_id": 2713242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/deb19bb8408191bc86c90b4ade6ffacd?s=128&d=identicon&r=PG", "display_name": "ersin-ertan", "link": "https://stackoverflow.com/users/2713242/ersin-ertan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 45970990, "answer_count": 1, "score": 5, "last_activity_date": 1504179442, "creation_date": 1504132797, "question_id": 45970738, "link": "https://stackoverflow.com/questions/45970738/kotlin-delegate-property-by-lazy-that-is-thread-local", "title": "Kotlin delegate property by lazy that is thread local", "body": "<p>Is there a simple way get a delegated property <code>by lazy</code>'s value computed per thread like <code>ThreadLocal</code>? </p>\n\n<p><code>LazyThreadSafetyMode</code> controls concurrent initialization, with <code>.NONE</code> coming close to the desired functionality by allowing multiple threads to receive different values, but has subsequent post initialization calls  referencing the same object, returning the same singular value regardless of thread, with some cases returning <code>null</code>. </p>\n\n<p>Regardless of concurrent initialization, or late initialization, the property would cache a unique value per thread. </p>\n"}, {"tags": ["nullpointerexception", "kotlin"], "comments": [{"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 0, "creation_date": 1504135848, "post_id": 45969989, "comment_id": 78901393, "body": "To read the map value, you should probably use the array annotation instead: parentIdGroupedByCode[it.id]"}, {"owner": {"reputation": 2052, "user_id": 150566, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/45bebec8b1581ef6b27dc6783ad3bb96?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/150566/mike"}, "reply_to_user": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 0, "creation_date": 1504140886, "post_id": 45969989, "comment_id": 78902288, "body": "I updated the map to access it like you said thanks, but it&#39;s still nullable"}], "answers": [{"comments": [{"owner": {"reputation": 2052, "user_id": 150566, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/45bebec8b1581ef6b27dc6783ad3bb96?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/150566/mike"}, "edited": false, "score": 1, "creation_date": 1504142816, "post_id": 45971622, "comment_id": 78902708, "body": "I wasn&#39;t aware of mapNotNull. But what is return@mapNotNull null. When I tried your code it worked, but when I tried with mine I had to add it to my returned object because there was a cast error that I don&#39;t know where it came.  return@mapNotNull CSProductDao.ProductVisibility(parentId, userGroupIds, b2bGroupIds, b2bDescHide) I couldn&#39;t find the doc on @mapNotNull, my googling is getting poor :("}, {"owner": {"reputation": 2052, "user_id": 150566, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/45bebec8b1581ef6b27dc6783ad3bb96?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/150566/mike"}, "edited": false, "score": 3, "creation_date": 1504143959, "post_id": 45971622, "comment_id": 78902957, "body": "I found my answer. It&#39;s a return label, it makes sense : <a href=\"https://kotlinlang.org/docs/reference/returns.html#return-at-labels\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/returns.html#return-at-labels</a>"}], "tags": [], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "is_accepted": true, "score": 7, "last_activity_date": 1504162998, "last_edit_date": 1504162998, "creation_date": 1504140371, "answer_id": 45971622, "question_id": 45969989, "link": "https://stackoverflow.com/questions/45969989/check-for-null-in-map-function-in-kotlin/45971622#45971622", "title": "Check for null in map function in Kotlin", "body": "<p>Use <code>mapNotNull()</code> to avoid the <code>filter()</code>s and do everything in the <code>mapNotNull()</code> block, then the automatic typecast to <code>non-null</code> type works. \nExample: </p>\n\n<pre><code>fun f() {\n\n   val list = listOf&lt;MyClass&gt;()\n\n   val v = list.mapNotNull {\n       if (it.type == null) return@mapNotNull null\n       val type = productTypeFromCode(it.type)\n       if (type == null) return@mapNotNull null\n       else MyClass2(type) // type is automatically casted to type!! here\n   }\n\n\n}\n\nfun productTypeFromCode(code: String): String? {\n    return null\n}\n\n\nclass MyClass(val type: String?, val id: String)\n\nclass MyClass2(val type: String)\n</code></pre>\n"}], "owner": {"reputation": 2052, "user_id": 150566, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/45bebec8b1581ef6b27dc6783ad3bb96?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/150566/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3238, "favorite_count": 1, "accepted_answer_id": 45971622, "answer_count": 1, "score": 5, "last_activity_date": 1504162998, "creation_date": 1504128631, "last_edit_date": 1504140836, "question_id": 45969989, "link": "https://stackoverflow.com/questions/45969989/check-for-null-in-map-function-in-kotlin", "title": "Check for null in map function in Kotlin", "body": "<p>I'm new to Kotlin and I want to map an object (ProductVisibility) base on another one (fmpProduct). Some object can't be converted so I need to skip them on some condition.</p>\n\n<p>I wanted to know if there's a better way to do this than what I did with the filter and the \"!!\" I feel that it's hacked. Am I missing something ?</p>\n\n<pre><code>val newCSProductVisibility = fmpProducts\n            .filter { parentIdGroupedByCode.containsKey(it.id) }\n            .filter { ProductType.fromCode(it.type) != null } //voir si on accumule les erreus dans une variable \u00e0 montrer\n            .map {\n                val type = ProductType.fromCode(it.type)!! //Null already filtered\n                val userGroupIds = type.productAvailabilityUserGroup.map { it.id }.joinToString(\",\")\n                val b2bGroupIds = type.b2bUserGroup.map { it.id }.joinToString { \",\" }\n                val b2bDescHide = !type.b2bUserGroup.isEmpty() \n                val parentId = parentIdGroupedByCode[it.id]!! //Null already filtered\n\n                CSProductDao.ProductVisibility(parentId, userGroupIds, b2bGroupIds, b2bDescHide)\n            }\n</code></pre>\n\n<p>edit: updated the map access like comment suggested</p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": true, "score": 3, "last_activity_date": 1504123284, "last_edit_date": 1504123284, "creation_date": 1504122982, "answer_id": 45968728, "question_id": 45968366, "link": "https://stackoverflow.com/questions/45968366/how-to-inject-itemviewmodel-in-tornadofx/45968728#45968728", "title": "How to inject ItemViewModel in tornadoFx", "body": "<p>You need to use <code>:</code>, not <code>=</code>.</p>\n\n<pre><code>val model: PersonModel by inject()\n</code></pre>\n\n<hr>\n\n<p>The reason for the error is that, when the compiler sees <code>val model = PersonModel</code>, it assumes you're trying to assign the companion object of the <code>PersonModel</code> class to <code>model</code>, but there isn't one, so it gives you the most helpful message it can, not realizing you made a simple syntax mistake.</p>\n"}], "owner": {"reputation": 768, "user_id": 1569489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fd2f3ec77bf997f99321f9732db306b0?s=128&d=identicon&r=PG", "display_name": "Adi", "link": "https://stackoverflow.com/users/1569489/adi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 45968728, "answer_count": 1, "score": 1, "last_activity_date": 1504128476, "creation_date": 1504121394, "last_edit_date": 1504128476, "question_id": 45968366, "link": "https://stackoverflow.com/questions/45968366/how-to-inject-itemviewmodel-in-tornadofx", "title": "How to inject ItemViewModel in tornadoFx", "body": "<p>I am trying to add model to view by injection</p>\n\n<pre><code>val model = PersonModel by inject()\n</code></pre>\n\n<p>but error:</p>\n\n<blockquote>\n  <p>'PersonModel' does not have a companion object.</p>\n</blockquote>\n\n<p>What am i doing wrong ?</p>\n"}, {"tags": ["java", "android", "calendar", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 977, "user_id": 1041722, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/OXuJe.jpg?s=128&g=1", "display_name": "Saskia", "link": "https://stackoverflow.com/users/1041722/saskia"}, "is_accepted": true, "score": 0, "last_activity_date": 1523293673, "creation_date": 1523293673, "answer_id": 49738139, "question_id": 45967254, "link": "https://stackoverflow.com/questions/45967254/android-java-kotlin-calendar-special-appear/49738139#49738139", "title": "Android : Java/Kotlin Calendar special appear", "body": "<p>You probably don't need it anymore, but here you go with the code a little bit more kotliny/functional:</p>\n\n<p>I replaced all the vars with vals and got rid of all null assignments. The crucial function you needed is the groupBy call on the list of items.</p>\n\n<pre><code>import java.util.Calendar\nimport java.text.SimpleDateFormat\n\ndata class Item(\n        val month: String,\n        val number: String,\n        val nameDay: String\n) {\n    val printDay = \"$nameDay $number\"\n}\n\nfun main(args: Array&lt;String&gt;) {\n\n    val cal: Calendar = Calendar.getInstance()\n\n    val maxDays: Int = cal.getActualMaximum(Calendar.DAY_OF_MONTH)\n    val sdfDay: SimpleDateFormat = SimpleDateFormat(\"dd\")\n    val sdfNamDay: SimpleDateFormat = SimpleDateFormat(\"E\")\n    val sdfMonth: SimpleDateFormat = SimpleDateFormat(\"MMM\")\n\n    val items = (0..45).map {\n        val item = Item(\n                sdfMonth.format(cal.time),\n                sdfDay.format(cal.time),\n                sdfNamDay.format(cal.time)\n        )\n        cal.add(Calendar.DATE, 1)\n        item\n    }.groupBy {\n        it.month\n    }.entries.fold(\"\", { acc, item -&gt;\n        acc + item.key + \": \" + item.value.map { it.printDay }.joinToString(\" / \") + \"\\n\"\n    })\n\n    println(items)\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4450367, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ab7304ed6e4dd86f42055a4a7786db0c?s=128&d=identicon&r=PG&f=1", "display_name": "Abdu Hawi", "link": "https://stackoverflow.com/users/4450367/abdu-hawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 0, "accepted_answer_id": 49738139, "answer_count": 1, "score": 0, "last_activity_date": 1523293673, "creation_date": 1504117061, "question_id": 45967254, "link": "https://stackoverflow.com/questions/45967254/android-java-kotlin-calendar-special-appear", "title": "Android : Java/Kotlin Calendar special appear", "body": "<p>I work in Calendar appears in ListView\nI have a refrence class for elements </p>\n\n<pre><code>internal class MyItem {\nvar name: String? = null\nvar number: String? = null\nvar nameDay:String? = null\n</code></pre>\n\n<p>}</p>\n\n<p>In MainActivity i make ArrayList to save elements and get instance from calendar</p>\n\n<pre><code>private var arrayList: ArrayList&lt;MyItem&gt;? = null\nprivate var cal:Calendar= Calendar.getInstance()\n</code></pre>\n\n<p>and function call from onCreate to filled ArrayList like this </p>\n\n<pre><code>private fun loaddata() {\n</code></pre>\n\n<p>varible brings us exactly the number of days of the month </p>\n\n<pre><code>var maxDays:Int = cal.getActualMaximum(Calendar.DAY_OF_MONTH)\n</code></pre>\n\n<p>varible brings us a complete date</p>\n\n<pre><code>var today:Int = cal.get(Calendar.DATE)\n</code></pre>\n\n<p>some of FormatSimpleDate</p>\n\n<pre><code>var sdfDay:SimpleDateFormat = SimpleDateFormat(\"dd\")\nvar sdfNamDay:SimpleDateFormat = SimpleDateFormat(\"E\")\nvar sdfMonth:SimpleDateFormat = SimpleDateFormat(\"MMM\")\n</code></pre>\n\n<p>then i make loop for 45 days</p>\n\n<pre><code>for( i in 0.. 45){\n        val myItem = MyItem()\n\n        myItem.name = sdfMonth.format(cal.time)\n        myItem.number = sdfDay.format(cal.time)\n        myItem.nameDay = sdfNamDay.format(cal.time)\n        cal.add(Calendar.DATE,1)\n        arrayList!!.add(myItem)\n    }\n</code></pre>\n\n<p>The out put similar that</p>\n\n<pre><code>AUG Wed 30 / AUG Thu 31 / Sep Fri 01 / Sep Sat 02 / ... / Sep Sat 30 / Oct Sun 01 / Oct Mon 02 / etc\n</code></pre>\n\n<p>the function works perfectly without any error\nBut i want to appears to me on the first row month-day\nin second row start to show just day until month change\nif month change to next \nshow in row month and day \nin next row show day only\nLike this </p>\n\n<pre><code>AUG Wed 30 / Thu 31 / Sep Fri 01 / Sat 02 / ... / Sat 30 / Oct Sun 01 / Mon 02 / etc\n</code></pre>\n\n<p>i make more than one if statement<br>\nbut not make good </p>\n\n<p>Can any body help me please</p>\n"}, {"tags": ["android", "android-asynctask", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 783, "user_id": 4081756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40c70b015c558d62b32386325129cad0?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Stillitano", "link": "https://stackoverflow.com/users/4081756/brandon-stillitano"}, "edited": false, "score": 2, "creation_date": 1550573491, "post_id": 45966510, "comment_id": 96309237, "body": "Legend! Cheers mate!"}, {"owner": {"reputation": 625, "user_id": 7668336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b9792920c51ecc5f2e60350d4e44c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinu Nicolae", "link": "https://stackoverflow.com/users/7668336/dinu-nicolae"}, "edited": false, "score": 0, "creation_date": 1594306998, "post_id": 45966510, "comment_id": 111086194, "body": "is there a difference between:  recommendationsData {     doSomethingWith(it) }  and  recommendationsData(callback = {it     doSmth(it) })"}], "tags": [], "owner": {"reputation": 4233, "user_id": 6510523, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d58ISqzIb4k/AAAAAAAAAAI/AAAAAAAADFo/4rh4L8K0zS0/photo.jpg?sz=128", "display_name": "Brett Beatty", "link": "https://stackoverflow.com/users/6510523/brett-beatty"}, "is_accepted": true, "score": 35, "last_activity_date": 1504114308, "creation_date": 1504114308, "answer_id": 45966510, "question_id": 45966061, "link": "https://stackoverflow.com/questions/45966061/completion-handler-android-kotlin/45966510#45966510", "title": "Completion Handler Android Kotlin", "body": "<p>In this case the syntax is similar to swift:</p>\n\n<pre><code>fun recommendationsData(callback: (String) -&gt; Unit) {\n</code></pre>\n\n<p>Then in your function you have a function called <code>callback</code> that you can call with the result (change <code>String</code> to whatever you're returning).</p>\n\n<p>Then change your function invocation from <code>recommendationsData()</code> to either <code>recommendationsData(doSomething)</code> or</p>\n\n<pre><code>recommendationsData {\n    doSomethingWith(it) // or you can get named argument\n    // do some more stuff\n}\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 8539285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98a894666b58e8646de5c97828658ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Cristian Tabuyo", "link": "https://stackoverflow.com/users/8539285/cristian-tabuyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7425, "favorite_count": 0, "accepted_answer_id": 45966510, "answer_count": 1, "score": 15, "last_activity_date": 1504114308, "creation_date": 1504112620, "last_edit_date": 1504113367, "question_id": 45966061, "link": "https://stackoverflow.com/questions/45966061/completion-handler-android-kotlin", "title": "Completion Handler Android Kotlin", "body": "<p>I\u00b4m sorry if this question has been asked previously, I really couldn\u00b4t find anything not even simillar! I\u00b4m as well sorry if the question is dumb, I\u00b4m an iOS Developer and I\u00b4m a bit lost here in Android...</p>\n\n<p>So I\u00b4m using Fuel Library(<a href=\"https://github.com/kittinunf/Fuel\" rel=\"noreferrer\">https://github.com/kittinunf/Fuel</a>) to GET JSON data from an API... In Swift there\u00b4s something called completion handler that whenever the function finished, it will return it and immediately run the code inside it. This is an example of it in Swift:</p>\n\n<pre><code>func hardProcessingWithString(input: String, completion: (result: String) -&gt; Void) {\n    ...\n    completion(\"we finished!\")\n}\n</code></pre>\n\n<p>What I need is to do something similar with this following function that I have in Kotlin. </p>\n\n<pre><code>fun recomendationsData() {\n\n    Fuel.get(\"https://rss.itunes.apple.com/api/v1/us/apple-music/hot-tracks/10/explicit.json\").response { request, response, result -&gt;\n                    println(request)\n                    println(response)\n                    val (bytes, error) = result\n                    if (bytes != null) {\n                        val str = String(bytes)\n                        val obj = JSONObject(str)\n                        val resultsP = obj.getJSONObject(\"feed\")\n                        val results = resultsP.getJSONArray(\"results\")\n\n                        for (i in 0..(results.length() - 1)) {\n                            val o = results.getJSONObject(i)\n                            trackName1.add(o.getString(\"name\"))\n                            trackArtist1.add(o.getString(\"artistName\"))\n                            trackImage1.add(o.getString(\"artworkUrl100\"))\n                        }\n\n\n                    }\n                }\n}\n</code></pre>\n\n<p>I\u00b4ve read about something called \"callback\" but I really don\u00b4t understand how it works, nor how to implement it(The task must be done Asynchronously).</p>\n\n<p>Thank you very much again!</p>\n\n<p>Regards</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 2, "last_activity_date": 1504112152, "creation_date": 1504112152, "answer_id": 45965940, "question_id": 45965480, "link": "https://stackoverflow.com/questions/45965480/using-receivers-infix-function-in-lambda-for-a-dsl/45965940#45965940", "title": "Using receiver&#39;s infix function in lambda (for a DSL)", "body": "<p>You cannot achieve this syntax, because Kotlin only supports <code>infix</code> function calls where the receiver is explicitly specified: <code>this myReceiversInfixFunc \"someString\"</code>.</p>\n\n<p>There's a (quite old) language feature request for this syntax: <a href=\"https://youtrack.jetbrains.com/issue/KT-1292\" rel=\"nofollow noreferrer\">KT-1292</a>.</p>\n"}], "owner": {"reputation": 40475, "user_id": 343568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6178689a51408a46d118830bab53151?s=128&d=identicon&r=PG", "display_name": "nicholas.hauschild", "link": "https://stackoverflow.com/users/343568/nicholas-hauschild"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 45965940, "answer_count": 1, "score": 3, "last_activity_date": 1504112352, "creation_date": 1504110379, "question_id": 45965480, "link": "https://stackoverflow.com/questions/45965480/using-receivers-infix-function-in-lambda-for-a-dsl", "title": "Using receiver&#39;s infix function in lambda (for a DSL)", "body": "<p>I'm working on creating a DSL using Kotlin, and I was hoping to utilize a receiver object with an infix function to get that groovy DSL feeling.  I will start with an example of the syntax I am after:</p>\n\n<blockquote>\n  <p>myDslFunction { myReceiversInfixFunc \"some string\" }</p>\n</blockquote>\n\n<p>My plan for achieving this was this code:</p>\n\n<pre><code>fun myDslFunction(builderFunction: MyReceiverObject.() -&gt; Unit) {\n    val receiver = MyReceiverObject()\n    builderFunction(receiver)\n    // do something with receiver\n}\n\nclass MyReceiverObject {\n    infix fun myReceiversInfixFunc(someString: String) {\n        // do something with someString\n    }\n}\n</code></pre>\n\n<p>The function and class snippets above compiles fine, but the DSL syntax listed above doesn't.  Here are some test functions I wrote to test the compilation:</p>\n\n<pre><code>fun test() {\n    // desired syntax\n    myDslFunction {\n        myReceiversInfixFunc \"some string\" // doesn't compile\n    }\n\n    // not-desired syntax that compiles and works...\n    myDslFunction { \n        this myReceiversInfixFunc \"some string\" // does compile\n    }\n}\n</code></pre>\n\n<p>The key difference here is the addition of the <code>this</code> keyword to setup the infix notation, but I would suggest that is undesired, and defeats the purpose of using the receiver object.</p>\n\n<p>Is there something obvious I am missing here?  Can I achieve my desired syntax?  I wouldn't be surprised if I am overlooking a Kotlin convention to assist with doing this...</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1504104099, "post_id": 45963313, "comment_id": 78885416, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32935470/how-to-convert-list-to-map-in-kotlin\">How to convert List to Map in Kotlin?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "edited": false, "score": 0, "creation_date": 1504105089, "post_id": 45963652, "comment_id": 78886182, "body": "Good, I just needed to change <code>values.toList()</code> on penultimate line."}, {"owner": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "edited": false, "score": 0, "creation_date": 1504105410, "post_id": 45963652, "comment_id": 78886464, "body": "Or probably even better: <code>values.asIterable()</code>"}, {"owner": {"reputation": 412, "user_id": 1641633, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/92529b857e660c3a98909372c3b3676c?s=128&d=identicon&r=PG", "display_name": "tausif", "link": "https://stackoverflow.com/users/1641633/tausif"}, "edited": false, "score": 1, "creation_date": 1574245700, "post_id": 45963652, "comment_id": 104160274, "body": "if key collisions happen, only the last added value is retained."}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": true, "score": 38, "last_activity_date": 1504104822, "creation_date": 1504104822, "answer_id": 45963652, "question_id": 45963313, "link": "https://stackoverflow.com/questions/45963313/how-do-i-create-a-map-from-2-arrays/45963652#45963652", "title": "How do I create a map from 2 arrays?", "body": "<p>You can zip together the arrays to get a list of pairs (<code>List&lt;Pair&lt;String, Int&gt;&gt;</code>), and then use <code>toMap</code> to get your map.</p>\n\n<p>Like this:</p>\n\n<pre><code>val keys = arrayOf(\"butter\", \"milk\", \"apples\")\nval values = arrayOf(5, 10, 42)\n\nval map: Map&lt;String, Int&gt; = \n             keys.zip(values) // Gives you [(\"butter\", 5), (\"milk\", 10), (\"apples\", 42)]\n                 .toMap()     // This is an extension function on Iterable&lt;Pair&lt;K, V&gt;&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7233910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8753d686303ef0d7eebc9e5f1e9ea06?s=128&d=identicon&r=PG&f=1", "display_name": "ItzikH", "link": "https://stackoverflow.com/users/7233910/itzikh"}, "is_accepted": false, "score": 1, "last_activity_date": 1596323641, "last_edit_date": 1596323641, "creation_date": 1596301889, "answer_id": 63207942, "question_id": 45963313, "link": "https://stackoverflow.com/questions/45963313/how-do-i-create-a-map-from-2-arrays/63207942#63207942", "title": "How do I create a map from 2 arrays?", "body": "<p>According to kotlin\n<a href=\"https://kotlinlang.org/docs/reference/constructing-collections.html\" rel=\"nofollow noreferrer\"> Constructing Collections</a>\n-&gt; creating a short-living Pair object, is not recommended only if performance isn't critical and to quote: &quot;To avoid excessive memory usage, use alternative ways. For example, you can create a mutable map and populate it using the write operations. The apply() function can help to keep the initialization fluent here.&quot;</p>\n<p> since I'm not much of an expert I run on to these code and maybe this should work better?:</p>\n<pre><code>    val numbersMap = mutableMapOf&lt;String,Int&gt;()\n        .apply{ for (i in 1.. 5)  this[&quot;key$i&quot;] = i }\n    println(numbersMap)\n\n    //result = {key1=1, key2=2, key3=3, key4=4}\n</code></pre>\n<p>or to adjust it to question above - something like this:</p>\n<pre><code>    val keys = arrayOf(&quot;butter&quot;, &quot;milk&quot;, &quot;apples&quot;)\n    val values = arrayOf(5, 10, 42)\n    val mapNumber = mutableMapOf&lt;String, Int&gt;()\n            .apply { for (i in keys.indices) this[keys[i]] = values[i] }\n    println(mapNumber)\n</code></pre>\n"}], "owner": {"reputation": 4468, "user_id": 946409, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/UTLAM.jpg?s=128&g=1", "display_name": "Pitel", "link": "https://stackoverflow.com/users/946409/pitel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6766, "favorite_count": 3, "accepted_answer_id": 45963652, "answer_count": 2, "score": 20, "last_activity_date": 1596323641, "creation_date": 1504103927, "last_edit_date": 1580829894, "question_id": 45963313, "link": "https://stackoverflow.com/questions/45963313/how-do-i-create-a-map-from-2-arrays", "title": "How do I create a map from 2 arrays?", "body": "<p>I have a string array and an integer array. How do I create a map using the first as keys and the second as values?</p>\n\n<pre><code>val keys = arrayOf(\"butter\", \"milk\", \"apples\")\nval values = arrayOf(5, 10, 42)\nval map: Map&lt;String, Int&gt; = ???\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/32935470/how-to-convert-list-to-map-in-kotlin\">How to convert List to Map in Kotlin?</a> doesn't solve this problem; I have 2 arrays and want a single map.</p>\n"}, {"tags": ["java-8", "kotlin"], "comments": [{"owner": {"reputation": 929, "user_id": 7855177, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-avNsBxd4mKE/AAAAAAAAAAI/AAAAAAAAABQ/dSTXwqwzagQ/photo.jpg?sz=128", "display_name": "Piwo", "link": "https://stackoverflow.com/users/7855177/piwo"}, "edited": false, "score": 0, "creation_date": 1504095824, "post_id": 45960175, "comment_id": 78878669, "body": "For me this code sample works... which version of kotlin are you using and what is the proprietary code you are providing?"}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1504095905, "post_id": 45960175, "comment_id": 78878740, "body": "You aren&#39;t getting any output ? you should replace Error with Throwable to catch Exceptions too"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "edited": false, "score": 0, "creation_date": 1504095953, "post_id": 45960175, "comment_id": 78878794, "body": "<code>Kotlin 1.1.2</code> and sorry I could not provide the Proprietary code as the code is <b>Proprietary</b>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "reply_to_user": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1504096126, "post_id": 45960175, "comment_id": 78878930, "body": "No @crgarridos <b>sometimes</b> is important to note here.The same code is working at one point of time without error and goes blank the next time!!!"}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1504096256, "post_id": 45960175, "comment_id": 78879036, "body": "try to explain what are you doing in that code. The snippet is right. Launching another thread maybe ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "edited": false, "score": 0, "creation_date": 1504096545, "post_id": 45960175, "comment_id": 78879257, "body": "I have edited the question @crgarridos.Please have a look at it"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "edited": false, "score": 0, "creation_date": 1504098275, "post_id": 45961087, "comment_id": 78880632, "body": "Thanks a lot @crgarridos for the answer and giving your precious time for it but <b>why sometimes it gives the correct output, debugger works fine and sometimes the code executes too?</b>"}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1504098475, "post_id": 45961087, "comment_id": 78880808, "body": "Just guessing, it can variate for your code, as you have a thread pool, the execution is asynchronous. And then you can have exception in one or another thread &quot;randomly&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "edited": false, "score": 0, "creation_date": 1504098612, "post_id": 45961087, "comment_id": 78880935, "body": "Maybe! but thanks again for giving your precious time and +1 for that!!!!I will surely mention when I will get the correct fix"}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1504098745, "post_id": 45961087, "comment_id": 78881045, "body": "You&#39;re welcome, sorry for not be more clean but without the code is difficult to see the problem. I think you have somethings the output, but not all the code was well executed"}], "tags": [], "owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "is_accepted": false, "score": 2, "last_activity_date": 1504097824, "creation_date": 1504097824, "answer_id": 45961087, "question_id": 45960175, "link": "https://stackoverflow.com/questions/45960175/function-showing-mysterious-behaviors/45961087#45961087", "title": "Function showing mysterious behaviors", "body": "<p>try/catch will only work on the current thread. In your snippet, if some exception ocourrs in another thread, the try/catch won't work</p>\n\n<p>For example: </p>\n\n<pre><code>try {\n    println(\"Hola mundo 1!\")\n    println(5 / 0)\n} catch (ex: Throwable) {\n    println(\"Oups! $ex\")// will be printed\n}\n\ntry {\n    Thread {\n        println(\"Hola mundo 2!\")\n        println(5 / 0)\n    }.start()\n} catch (ex: Throwable) {\n    println(\"Oups! $ex\")// won't be printed\n}\n\nprintln(\"Hola mundo 3!\")//The exception thrown in the external thread don't kill the current thread\n</code></pre>\n\n<p>For the debugging issues take a look to  <a href=\"https://stackoverflow.com/questions/29245411/android-studio-threaded-debugging\">Android Studio threaded debugging</a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "edited": false, "score": 0, "creation_date": 1504161583, "post_id": 45974627, "comment_id": 78908179, "body": "Thanks Sir!! The first bold line doesn&#39;t worked but the last line i.e updating to the latest version i.e. <code>1.1.3</code> fixes the issue.Thank you so much"}], "tags": [], "owner": {"reputation": 44, "user_id": 7616277, "user_type": "registered", "profile_image": "https://graph.facebook.com/1345239692186637/picture?type=large", "display_name": "Amul Mittal", "link": "https://stackoverflow.com/users/7616277/amul-mittal"}, "is_accepted": true, "score": 0, "last_activity_date": 1504161256, "last_edit_date": 1504161256, "creation_date": 1504160826, "answer_id": 45974627, "question_id": 45960175, "link": "https://stackoverflow.com/questions/45960175/function-showing-mysterious-behaviors/45974627#45974627", "title": "Function showing mysterious behaviors", "body": "<p>I am not sure if it sorts out the problem but it's just worth a try since all your efforts went in vein(and also because there is no error in your syntax).\nI guess if debugger stops on wrong line(or sometimes doesn't work), it usually means that\n <strong>something broken in the code cache</strong> .</p>\n\n<blockquote>\n  <p><strong>Try invalidating Idea cache and restarting if you are using Idea of course.</strong></p>\n</blockquote>\n\n<p>And before doing that</p>\n\n<blockquote>\n  <p><strong>I would also recommend to update Kotlin with the latest version.</strong></p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 45974627, "answer_count": 2, "score": 0, "last_activity_date": 1504161256, "creation_date": 1504095338, "last_edit_date": 1504096444, "question_id": 45960175, "link": "https://stackoverflow.com/questions/45960175/function-showing-mysterious-behaviors", "title": "Function showing mysterious behaviors", "body": "<p>I am developing an android application with <code>kotlin</code> assistance but the question is based on pure <code>kotlin</code> fundamentals. Below is the function which is showing some unusual behavior:  </p>\n\n<pre><code>fun CatchThat(funct: () -&gt; Unit){\ntry {\n    funct()\n}catch (ex: Error){\n    ex.printStackTrace()\n}\n}\n</code></pre>\n\n<p>When I use it in my code</p>\n\n<pre><code>CatchThat {\n// Proprietary Code goes in here\n}\n</code></pre>\n\n<ul>\n<li><strong>Debugger does not work properly(sometimes)</strong></li>\n<li><strong>The proprietary code does not execute at all(sometimes)</strong></li>\n</ul>\n\n<p>Why is that behavior encountered or am I getting some concepts wrong(maybe <code>lambdas</code>). Any help or suggestions are heartily welcomed.(I am a tyro in <code>kotlin</code>)</p>\n\n<p><strong>EDIT</strong> The thing that I am doing in <strong>Proprietary code</strong>.\nI am trying to invoke a <code>Thread Pool</code> that is in turn calling a web activity. This is the best and all I could explain about it. I am sorry for that.</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 6617, "user_id": 4951663, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y4L2S.png?s=128&g=1", "display_name": "Mohit Suthar", "link": "https://stackoverflow.com/users/4951663/mohit-suthar"}, "edited": false, "score": 0, "creation_date": 1504092641, "post_id": 45958744, "comment_id": 78876326, "body": "In which browser having new window functionality?"}, {"owner": {"reputation": 5192, "user_id": 3084205, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qaFQu.jpg?s=128&g=1", "display_name": "Stanislav Bondar", "link": "https://stackoverflow.com/users/3084205/stanislav-bondar"}, "edited": false, "score": 0, "creation_date": 1504092713, "post_id": 45958744, "comment_id": 78876387, "body": "You can&#39;t get new instance of browser and launch new window. If you need totally new window use your&#39;s activity with kind of pdf reader"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "reply_to_user": {"reputation": 6617, "user_id": 4951663, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y4L2S.png?s=128&g=1", "display_name": "Mohit Suthar", "link": "https://stackoverflow.com/users/4951663/mohit-suthar"}, "edited": false, "score": 0, "creation_date": 1504092903, "post_id": 45958744, "comment_id": 78876531, "body": "Sir(@Mohit Suthar) what does that mean?"}, {"owner": {"reputation": 6617, "user_id": 4951663, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y4L2S.png?s=128&g=1", "display_name": "Mohit Suthar", "link": "https://stackoverflow.com/users/4951663/mohit-suthar"}, "edited": false, "score": 0, "creation_date": 1504093023, "post_id": 45958744, "comment_id": 78876617, "body": "Means, I think default crome brouser not having a new window functionality, you can open new tab instead"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "edited": false, "score": 0, "creation_date": 1504093063, "post_id": 45958744, "comment_id": 78876640, "body": "Sir(Stanislav Bondar) but I think that I used this functionality many times but not in kotlin!!! Sir I want that if the browser is opened already then this link should open in new Window and it is possible across many platforms.Isn&#39;t it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "reply_to_user": {"reputation": 6617, "user_id": 4951663, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y4L2S.png?s=128&g=1", "display_name": "Mohit Suthar", "link": "https://stackoverflow.com/users/4951663/mohit-suthar"}, "edited": false, "score": 0, "creation_date": 1504093325, "post_id": 45958744, "comment_id": 78876799, "body": "Sir(@Mohit Suthar) lets consider that the user has made Chrome his default browser then it can be done?"}, {"owner": {"reputation": 6617, "user_id": 4951663, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y4L2S.png?s=128&g=1", "display_name": "Mohit Suthar", "link": "https://stackoverflow.com/users/4951663/mohit-suthar"}, "edited": false, "score": 0, "creation_date": 1504093403, "post_id": 45958744, "comment_id": 78876851, "body": "You can open a new tab not new window"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "edited": false, "score": 0, "creation_date": 1504093569, "post_id": 45959036, "comment_id": 78876965, "body": "Thanks a lot for your precious time Sir but I have worked that out already!!!Also I think I need to dig deeper myself and get it done."}, {"owner": {"reputation": 352, "user_id": 3900915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/40119d0808d7fe0da10f76691496f432?s=128&d=identicon&r=PG&f=1", "display_name": "muad-dweeb", "link": "https://stackoverflow.com/users/3900915/muad-dweeb"}, "edited": false, "score": 0, "creation_date": 1605046602, "post_id": 45959036, "comment_id": 114532286, "body": "I don&#39;t understand this answer, because I don&#39;t understand where it goes in the code, or when and where to reference this function once it&#39;s defined."}], "tags": [], "owner": {"reputation": 6617, "user_id": 4951663, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y4L2S.png?s=128&g=1", "display_name": "Mohit Suthar", "link": "https://stackoverflow.com/users/4951663/mohit-suthar"}, "is_accepted": false, "score": 12, "last_activity_date": 1542000465, "last_edit_date": 1542000465, "creation_date": 1504092021, "answer_id": 45959036, "question_id": 45958744, "link": "https://stackoverflow.com/questions/45958744/in-kotlin-how-do-i-open-a-link-in-new-window/45959036#45959036", "title": "In Kotlin how do I open a link in new Window", "body": "<p>You can try this one, might be helpful, open new <strong>tab</strong> of web browser like</p>\n\n<pre><code>fun openNewTabWindow(urls: String, context : Context) {\n    val uris = Uri.parse(urls)\n    val intents = Intent(Intent.ACTION_VIEW, uris)\n    val b = Bundle()\n    b.putBoolean(\"new_window\", true)\n    intents.putExtras(b)\n    context.startActivity(intents)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 8268774, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nvUZGIvv-2k/AAAAAAAAAAI/AAAAAAAAAB4/Lucr39fKaas/photo.jpg?sz=128", "display_name": "Vikash Bijarniya", "link": "https://stackoverflow.com/users/8268774/vikash-bijarniya"}, "is_accepted": false, "score": 0, "last_activity_date": 1542004002, "creation_date": 1542004002, "answer_id": 53256893, "question_id": 45958744, "link": "https://stackoverflow.com/questions/45958744/in-kotlin-how-do-i-open-a-link-in-new-window/53256893#53256893", "title": "In Kotlin how do I open a link in new Window", "body": "<p>You may use chrome custom tabs instead\nTo use it you need to add below dependency to your gradle </p>\n\n<blockquote>\n<pre><code>compile 'com.android.support:customtabs:23.1.1'\n</code></pre>\n</blockquote>\n\n<p>Now use below code to open the url </p>\n\n<pre><code> CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder();\n        builder.enableUrlBarHiding();\n        builder.setShowTitle(true);\n        builder.setToolbarColor(Color.TRANSPARENT);\n        CustomTabsIntent customTabsIntent = builder.build();\n        customTabsIntent.launchUrl(getActivity(), Uri.parse(url));\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10743, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1542004002, "creation_date": 1504091079, "last_edit_date": 1504093246, "question_id": 45958744, "link": "https://stackoverflow.com/questions/45958744/in-kotlin-how-do-i-open-a-link-in-new-window", "title": "In Kotlin how do I open a link in new Window", "body": "<p>I am a tyro in <code>Kotlin</code> but I have a good Knowledge of <code>Android</code> and <code>Core java</code>. I am stuck on one condition while developing an android app via the <code>Kotlin</code> assistance.</p>\n\n<p>I want that when user clicks a link present on the <code>pdf</code> document; the link should be opened on a browser (<strong>and if browser is opened then the link should open on the <em>new window</em> not new tab of the same window</strong> ).</p>\n\n<p>I have achieved much of my objective but I didn't found out <strong>how to open a link in the new Window if the browser is open already?</strong></p>\n\n<p>I have tried the code below(when the link on the <code>pdf</code> is clicked then it redirects to the below function call):</p>\n\n<pre><code>fun web_page_open(urls: String) { // for more than one url\n    val uris = Uri.parse(urls)\n    val intents = Intent(Intent.ACTION_VIEW, uris)\n    startActivity(intents)\n} \n</code></pre>\n\n<p>I have tried my level-best to explain my problem and also searched a lot(on <code>github</code> as well) but all my efforts went in vein. </p>\n\n<p>Any help is warmly welcomed.</p>\n\n<p><strong>EDIT</strong>: Let's consider an instance if the user has already opened the default browser (say ABZfox) then when the link inside the <code>pdf</code>(or a doc) is clicked then the new Window of <strong>ABZfox</strong> opens instead of the same window in which the user was previously working. I'm sure the question makes some sense now!!!  </p>\n"}, {"tags": ["android", "location", "kotlin"], "comments": [{"owner": {"reputation": 5192, "user_id": 3084205, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/qaFQu.jpg?s=128&g=1", "display_name": "Stanislav Bondar", "link": "https://stackoverflow.com/users/3084205/stanislav-bondar"}, "edited": false, "score": 0, "creation_date": 1504090537, "post_id": 45958226, "comment_id": 78874776, "body": "It returns zero or null?"}, {"owner": {"reputation": 4863, "user_id": 135837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fecdd006a77e35d21c83c4503dae1339?s=128&d=identicon&r=PG", "display_name": "Josef Adamcik", "link": "https://stackoverflow.com/users/135837/josef-adamcik"}, "edited": false, "score": 0, "creation_date": 1504091472, "post_id": 45958226, "comment_id": 78875424, "body": "Have your application obtained required permissions for location? Do you test on device or emulator? Is gps active on on the device?"}], "answers": [{"comments": [{"owner": {"reputation": 1256, "user_id": 3692788, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/KbpJg.png?s=128&g=1", "display_name": "JCarlosR", "link": "https://stackoverflow.com/users/3692788/jcarlosr"}, "edited": false, "score": 4, "creation_date": 1576346480, "post_id": 45960371, "comment_id": 104873247, "body": "For newer Android versions it&#39;s important to ask for the permissions, showing an explanation when needed. I had to do this for Camera, Storage and now Location, so I created an extension function, that could be helpful for someone else: <a href=\"https://github.com/JCarlosR/Redemnorte/blob/80e82dd9795e945ca093d08a9194656971f07485/app/src/main/java/com/youtube/sorcjc/redemnorte/util/ActivityExtensions.kt#L8\" rel=\"nofollow noreferrer\">github.com/JCarlosR/Redemnorte/blob/&hellip;</a>"}], "tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": true, "score": 27, "last_activity_date": 1575790744, "last_edit_date": 1575790744, "creation_date": 1504095900, "answer_id": 45960371, "question_id": 45958226, "link": "https://stackoverflow.com/questions/45958226/get-location-android-kotlin/45960371#45960371", "title": "Get location android Kotlin", "body": "<p>When <code>GetUserLocation</code> returns, <code>locationManager</code> goes out of scope and presumably is destroyed, preventing <code>onLocationChanged</code> from being called and providing updates.</p>\n\n<p>Also, you've defined <code>mylocation</code> inside of <code>GetUserLocation</code> so it also goes out of scope and further kills any chance or your getting an update.</p>\n\n<p>You have not shown where and how the outer <code>mylocation</code> is declared (outside of <code>GetUserLocation</code>), but how ever it is declared, it is being shadowed by the one inside of <code>GetUserLocation</code>.  So you aren't getting much.</p>\n\n<p>Here is an example of how you might do it.  (The variable <code>thetext</code> is defined within the layout xml and accessed with Kotlin extensions.)</p>\n\n<pre><code>// in the android manifest\n&lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/&gt;\n// allow these through Appliation Manager if necessary\n\n// inside a basic activity\nprivate var locationManager : LocationManager? = null\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    setSupportActionBar(toolbar)\n\n    // Create persistent LocationManager reference\n    locationManager = getSystemService(LOCATION_SERVICE) as LocationManager?\n\n    fab.setOnClickListener { view -&gt;\n        try {\n            // Request location updates\n            locationManager?.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0L, 0f, locationListener)\n        } catch(ex: SecurityException) {\n            Log.d(\"myTag\", \"Security Exception, no location available\")\n        }\n    }\n}\n\n//define the listener\nprivate val locationListener: LocationListener = object : LocationListener {\n    override fun onLocationChanged(location: Location) {\n        thetext.text = (\"\" + location.longitude + \":\" + location.latitude)\n    }\n    override fun onStatusChanged(provider: String, status: Int, extras: Bundle) {}\n    override fun onProviderEnabled(provider: String) {}\n    override fun onProviderDisabled(provider: String) {}\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2574, "user_id": 1261547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LNyRQ.jpg?s=128&g=1", "display_name": "Lilo", "link": "https://stackoverflow.com/users/1261547/lilo"}, "edited": false, "score": 0, "creation_date": 1617690154, "post_id": 50227115, "comment_id": 118366564, "body": "was looking for this for days ! Thanks a lot !"}], "tags": [], "owner": {"reputation": 443, "user_id": 6017633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d262397ac8f1a85d27df907b4c48dfde?s=128&d=identicon&r=PG&f=1", "display_name": "user6017633", "link": "https://stackoverflow.com/users/6017633/user6017633"}, "is_accepted": false, "score": 5, "last_activity_date": 1525760752, "last_edit_date": 1525760752, "creation_date": 1525760439, "answer_id": 50227115, "question_id": 45958226, "link": "https://stackoverflow.com/questions/45958226/get-location-android-kotlin/50227115#50227115", "title": "Get location android Kotlin", "body": "<p>I would like to help someone who is trying to get location from scratch.\nHere is the reference: <a href=\"https://demonuts.com/current-location-kotlin/\" rel=\"nofollow noreferrer\"><strong>Kotlin Get Current Location</strong></a></p>\n\n<p>Code will first check whether location is on or off in device and then will fetch latitude and longitudes and will update it constantly.</p>\n\n<p>In build.gradle(Module:app) file put this</p>\n\n<pre><code>compile 'com.google.android.gms:play-services:11.8.0'\n</code></pre>\n\n<p>activity_main.xml code</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_marginTop=\"10dp\"\n    android:layout_marginLeft=\"10dp\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/latitude\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentLeft=\"true\"\n        android:layout_alignParentTop=\"true\"\n        android:text=\"Latitude:\"\n        android:textSize=\"18sp\" /&gt;\n    &lt;TextView\n        android:id=\"@+id/latitude_textview\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignBaseline=\"@+id/latitude\"\n        android:layout_marginLeft=\"10dp\"\n        android:layout_toRightOf=\"@+id/latitude\"\n        android:textSize=\"16sp\" /&gt;\n    &lt;TextView\n        android:id=\"@+id/longitude\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentLeft=\"true\"\n        android:layout_alignParentTop=\"true\"\n        android:text=\"Longitude:\"\n        android:layout_marginTop=\"24dp\"\n        android:textSize=\"18sp\" /&gt;\n    &lt;TextView\n        android:id=\"@+id/longitude_textview\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignBaseline=\"@+id/longitude\"\n        android:layout_marginLeft=\"10dp\"\n        android:layout_toRightOf=\"@+id/longitude\"\n        android:textSize=\"16sp\"/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>MainActivity.kt</p>\n\n<pre><code>import android.Manifest\nimport android.annotation.SuppressLint\nimport android.content.Context\nimport android.content.Intent\nimport android.content.pm.PackageManager\nimport android.location.Location\nimport android.location.LocationManager\nimport android.provider.Settings\nimport android.support.v4.app.ActivityCompat\nimport android.support.v7.app.AlertDialog\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.util.Log\nimport android.widget.TextView\nimport android.widget.Toast\nimport com.google.android.gms.common.ConnectionResult\nimport com.google.android.gms.common.api.GoogleApiClient\nimport com.google.android.gms.location.LocationRequest\nimport com.google.android.gms.location.LocationServices\nimport com.google.android.gms.maps.model.LatLng\n\nclass MainActivity : AppCompatActivity(), GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener, com.google.android.gms.location.LocationListener {\n\n    private var mLatitudeTextView: TextView? = null\n    private var mLongitudeTextView: TextView? = null\n    private var mGoogleApiClient: GoogleApiClient? = null\n    private var mLocation: Location? = null\n    private var mLocationManager: LocationManager? = null\n\n    private var mLocationRequest: LocationRequest? = null\n    private val listener: com.google.android.gms.location.LocationListener? = null\n    private val UPDATE_INTERVAL = (2 * 1000).toLong()  /* 10 secs */\n    private val FASTEST_INTERVAL: Long = 2000 /* 2 sec */\n\n    private var locationManager: LocationManager? = null\n\n    private val isLocationEnabled: Boolean\n        get() {\n            locationManager = getSystemService(Context.LOCATION_SERVICE) as LocationManager\n            return locationManager!!.isProviderEnabled(LocationManager.GPS_PROVIDER) || locationManager!!.isProviderEnabled(LocationManager.NETWORK_PROVIDER)\n        }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        mLatitudeTextView = findViewById(R.id.latitude_textview) as TextView\n        mLongitudeTextView = findViewById(R.id.longitude_textview) as TextView\n\n        mGoogleApiClient = GoogleApiClient.Builder(this)\n                .addConnectionCallbacks(this)\n                .addOnConnectionFailedListener(this)\n                .addApi(LocationServices.API)\n                .build()\n\n        mLocationManager = this.getSystemService(Context.LOCATION_SERVICE) as LocationManager\n\n        Log.d(\"gggg\",\"uooo\");\n        checkLocation() //check whether location service is enable or not in your  phone\n    }\n\n    @SuppressLint(\"MissingPermission\")\n    override fun onConnected(p0: Bundle?) {\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            // TODO: Consider calling\n            //    ActivityCompat#requestPermissions\n            // here to request the missing permissions, and then overriding\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n            //                                          int[] grantResults)\n            // to handle the case where the user grants the permission. See the documentation\n            // for ActivityCompat#requestPermissions for more details.\n            return\n        }\n\n        startLocationUpdates()\n\n        mLocation = LocationServices.FusedLocationApi.getLastLocation(mGoogleApiClient)\n\n        if (mLocation == null) {\n            startLocationUpdates()\n        }\n        if (mLocation != null) {\n\n            // mLatitudeTextView.setText(String.valueOf(mLocation.getLatitude()));\n            //mLongitudeTextView.setText(String.valueOf(mLocation.getLongitude()));\n        } else {\n            Toast.makeText(this, \"Location not Detected\", Toast.LENGTH_SHORT).show()\n        }\n    }\n\n    override fun onConnectionSuspended(i: Int) {\n        Log.i(TAG, \"Connection Suspended\")\n        mGoogleApiClient!!.connect()\n    }\n\n    override fun onConnectionFailed(connectionResult: ConnectionResult) {\n        Log.i(TAG, \"Connection failed. Error: \" + connectionResult.getErrorCode())\n    }\n\n    override fun onStart() {\n        super.onStart()\n        if (mGoogleApiClient != null) {\n            mGoogleApiClient!!.connect()\n        }\n    }\n\n    override fun onStop() {\n        super.onStop()\n        if (mGoogleApiClient!!.isConnected()) {\n            mGoogleApiClient!!.disconnect()\n        }\n    }\n\n    @SuppressLint(\"MissingPermission\")\n    protected fun startLocationUpdates() {\n        // Create the location request\n        mLocationRequest = LocationRequest.create()\n                .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY)\n                .setInterval(UPDATE_INTERVAL)\n                .setFastestInterval(FASTEST_INTERVAL)\n        // Request location updates\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            // TODO: Consider calling\n            //    ActivityCompat#requestPermissions\n            // here to request the missing permissions, and then overriding\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n            //                                          int[] grantResults)\n            // to handle the case where the user grants the permission. See the documentation\n            // for ActivityCompat#requestPermissions for more details.\n            return\n        }\n        LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient,\n                mLocationRequest, this)\n        Log.d(\"reque\", \"---&gt;&gt;&gt;&gt;\")\n    }\n\n    override fun onLocationChanged(location: Location) {\n\n        val msg = \"Updated Location: \" +\n                java.lang.Double.toString(location.latitude) + \",\" +\n                java.lang.Double.toString(location.longitude)\n        mLatitudeTextView!!.text = location.latitude.toString()\n        mLongitudeTextView!!.text = location.longitude.toString()\n        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show()\n        // You can now create a LatLng Object for use with maps\n        val latLng = LatLng(location.latitude, location.longitude)\n    }\n\n    private fun checkLocation(): Boolean {\n        if (!isLocationEnabled)\n            showAlert()\n        return isLocationEnabled\n    }\n\n    private fun showAlert() {\n        val dialog = AlertDialog.Builder(this)\n        dialog.setTitle(\"Enable Location\")\n                .setMessage(\"Your Locations Settings is set to 'Off'.\\nPlease Enable Location to \" + \"use this app\")\n                .setPositiveButton(\"Location Settings\") { paramDialogInterface, paramInt -&gt;\n                    val myIntent = Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS)\n                    startActivity(myIntent)\n                }\n                .setNegativeButton(\"Cancel\") { paramDialogInterface, paramInt -&gt; }\n        dialog.show()\n    }\n\n    companion object {\n\n        private val TAG = \"MainActivity\"\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 563, "user_id": 6721828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqZn9.jpg?s=128&g=1", "display_name": "Edgar Khimich", "link": "https://stackoverflow.com/users/6721828/edgar-khimich"}, "edited": false, "score": 1, "creation_date": 1555001111, "post_id": 51408612, "comment_id": 97966110, "body": "on some devices when you switch the location OFF and then turn it back ON - the lastLocation will be null"}, {"owner": {"reputation": 2194, "user_id": 1146089, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/1XtJn.png?s=128&g=1", "display_name": "Giuseppe Garassino", "link": "https://stackoverflow.com/users/1146089/giuseppe-garassino"}, "edited": false, "score": 0, "creation_date": 1618586485, "post_id": 51408612, "comment_id": 118654826, "body": "this is always null if google maps or other apps that get location do not update fusedLocationClient.lastLocation"}], "tags": [], "owner": {"reputation": 101, "user_id": 8197058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0fU44.jpg?s=128&g=1", "display_name": "Daniel Miranda", "link": "https://stackoverflow.com/users/8197058/daniel-miranda"}, "is_accepted": false, "score": 9, "last_activity_date": 1531938010, "creation_date": 1531938010, "answer_id": 51408612, "question_id": 45958226, "link": "https://stackoverflow.com/questions/45958226/get-location-android-kotlin/51408612#51408612", "title": "Get location android Kotlin", "body": "<p>I know it's late, but now Google has made it simpler to use. In the developer site, it says that you need to create a Client:</p>\n\n<pre><code>private lateinit var fusedLocationClient: FusedLocationProviderClient\n</code></pre>\n\n<p>Then onCreate get the provider:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    // ...\n    fusedLocationClient = LocationServices.getFusedLocationProviderClient(this)\n}\n</code></pre>\n\n<p>And finally, to get your last location just call:</p>\n\n<pre><code>//Don't forget to ask for permissions for ACCESS_COARSE_LOCATION \n//and ACCESS_FINE_LOCATION\n@SuppressLint(\"MissingPermission\")\nprivate fun obtieneLocalizacion(){\n    fusedLocationClient.lastLocation\n            .addOnSuccessListener { location: Location? -&gt;\n                latitude =  location?.latitude\n                longitude = location?.longitude\n            }\n}\n</code></pre>\n\n<p>*Tested with this implementation for location (Setup in your app gradle file)</p>\n\n<pre><code>implementation 'com.google.android.gms:play-services-location:15.0.1'\n</code></pre>\n\n<p>For more info, check this link:</p>\n\n<p><a href=\"https://developer.android.com/training/location/retrieve-current\" rel=\"noreferrer\">Obtain last location</a></p>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 7505665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73e1d9b5f71e8025c370118cc475e6a?s=128&d=identicon&r=PG&f=1", "display_name": "ShadeToD", "link": "https://stackoverflow.com/users/7505665/shadetod"}, "edited": false, "score": 0, "creation_date": 1566923736, "post_id": 57467427, "comment_id": 101804698, "body": "perfect answer! I would suggest using &quot;locationResult.lastLocation&quot; instead of getting value from 0th index."}, {"owner": {"reputation": 1741, "user_id": 2445763, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/vps5R.png?s=128&g=1", "display_name": "lasec0203", "link": "https://stackoverflow.com/users/2445763/lasec0203"}, "edited": false, "score": 0, "creation_date": 1567423386, "post_id": 57467427, "comment_id": 101948535, "body": "don&#39;t forget to add logic for requesting <a href=\"https://developer.android.com/training/permissions/requesting#perm-request\" rel=\"nofollow noreferrer\">Location permissions</a>, or else you will need to remember to do it manually via app setting"}, {"owner": {"reputation": 2015, "user_id": 5902175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db9432d4d3c0a232a4c28009534c1829?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Sharma", "link": "https://stackoverflow.com/users/5902175/mayank-sharma"}, "reply_to_user": {"reputation": 1741, "user_id": 2445763, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/vps5R.png?s=128&g=1", "display_name": "lasec0203", "link": "https://stackoverflow.com/users/2445763/lasec0203"}, "edited": false, "score": 0, "creation_date": 1567517643, "post_id": 57467427, "comment_id": 101980728, "body": "@lasec0203 yes run time permission are mandatory on 6.0(+) android marshmallow. I will add a note on my answer. Thank you very much for point out"}], "tags": [], "owner": {"reputation": 2015, "user_id": 5902175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db9432d4d3c0a232a4c28009534c1829?s=128&d=identicon&r=PG&f=1", "display_name": "Mayank Sharma", "link": "https://stackoverflow.com/users/5902175/mayank-sharma"}, "is_accepted": false, "score": 29, "last_activity_date": 1566981567, "last_edit_date": 1566981567, "creation_date": 1565639371, "answer_id": 57467427, "question_id": 45958226, "link": "https://stackoverflow.com/questions/45958226/get-location-android-kotlin/57467427#57467427", "title": "Get location android Kotlin", "body": "<p>In 2019 Best Offical Solution in Kotlin</p>\n\n<p>Google API Client/FusedLocationApi are deprecated and Location Manager is not useful at all.\n<strong>So Google prefer Fused Location Provider Using the Google Play services location APIs\n\"FusedLocationProviderClient\"</strong> is used to get location and its better way for battery saving and accuracy </p>\n\n<p>Here is sample code in kotlin to get the last known location /one-time location( equivalent to the current location)</p>\n\n<pre><code> // declare a global variable of FusedLocationProviderClient\n    private lateinit var fusedLocationClient: FusedLocationProviderClient\n\n// in onCreate() initialize FusedLocationProviderClient\n    fusedLocationClient = LocationServices.getFusedLocationProviderClient(context!!)\n\n /**\n     * call this method for receive location\n     * get location and give callback when successfully retrieve\n     * function itself check location permission before access related methods\n     *\n     */\n    fun getLastKnownLocation() {\n            fusedLocationClient.lastLocation\n                .addOnSuccessListener { location-&gt;\n                    if (location != null) {\n                       // use your location object\n                        // get latitude , longitude and other info from this\n                    }\n\n                }\n\n    }\n</code></pre>\n\n<hr>\n\n<p><strong>If your app can continuously track the location then you have to receive Receive location updates</strong></p>\n\n<p>Check the sample for that in kotlin</p>\n\n<pre><code>// declare a global variable FusedLocationProviderClient\n        private lateinit var fusedLocationClient: FusedLocationProviderClient\n\n    // in onCreate() initialize FusedLocationProviderClient\n        fusedLocationClient = LocationServices.getFusedLocationProviderClient(context!!)\n\n\n      // globally declare LocationRequest\n        private lateinit var locationRequest: LocationRequest\n\n        // globally declare LocationCallback    \n        private lateinit var locationCallback: LocationCallback\n\n\n        /**\n         * call this method in onCreate\n         * onLocationResult call when location is changed \n         */\n        private fun getLocationUpdates()\n        {\n\n                fusedLocationClient = LocationServices.getFusedLocationProviderClient(context!!)\n                locationRequest = LocationRequest()\n                locationRequest.interval = 50000\n                locationRequest.fastestInterval = 50000\n                locationRequest.smallestDisplacement = 170f // 170 m = 0.1 mile\n                locationRequest.priority = LocationRequest.PRIORITY_HIGH_ACCURACY //set according to your app function\n                locationCallback = object : LocationCallback() {\n                    override fun onLocationResult(locationResult: LocationResult?) {\n                        locationResult ?: return\n\n                        if (locationResult.locations.isNotEmpty()) {\n                            // get latest location \n                            val location =\n                                locationResult.lastLocation\n                            // use your location object\n                            // get latitude , longitude and other info from this\n                        }\n\n\n                    }\n                }\n        }\n\n        //start location updates\n        private fun startLocationUpdates() {\n            fusedLocationClient.requestLocationUpdates(\n                locationRequest,\n                locationCallback,\n                null /* Looper */\n            )\n        }\n\n        // stop location updates\n        private fun stopLocationUpdates() {\n            fusedLocationClient.removeLocationUpdates(locationCallback)\n        }\n\n        // stop receiving location update when activity not visible/foreground\n        override fun onPause() {\n            super.onPause()\n            stopLocationUpdates()\n        }\n\n        // start receiving location update when activity  visible/foreground\n        override fun onResume() {\n            super.onResume()\n            startLocationUpdates()\n        }\n</code></pre>\n\n<p>Make sure you take care about Mainfaist permission and runtime permission for location </p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/&gt;\n</code></pre>\n\n<p>and for Gradle add this</p>\n\n<pre><code>implementation 'com.google.android.gms:play-services-location:17.0.0'\n</code></pre>\n\n<p>For more details follow these official documents </p>\n\n<p><a href=\"https://developer.android.com/training/location/retrieve-current\" rel=\"noreferrer\">https://developer.android.com/training/location/retrieve-current</a></p>\n\n<p><a href=\"https://developer.android.com/training/location/receive-location-updates\" rel=\"noreferrer\">https://developer.android.com/training/location/receive-location-updates</a></p>\n\n<p><a href=\"https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderClient\" rel=\"noreferrer\">https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderClient</a></p>\n"}, {"tags": [], "owner": {"reputation": 1153, "user_id": 11369023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFtbF.png?s=128&g=1", "display_name": "Aftab Alam", "link": "https://stackoverflow.com/users/11369023/aftab-alam"}, "is_accepted": false, "score": 10, "last_activity_date": 1579619646, "creation_date": 1579619646, "answer_id": 59844068, "question_id": 45958226, "link": "https://stackoverflow.com/questions/45958226/get-location-android-kotlin/59844068#59844068", "title": "Get location android Kotlin", "body": "<p><strong>Get location with address in android kotlin</strong></p>\n\n<blockquote>\n  <p>Add this line in dependencies</p>\n</blockquote>\n\n<pre><code>implementation 'com.google.android.gms:play-services-location:17.0.0'\n</code></pre>\n\n<blockquote>\n  <p>Add this in AndroidManifest</p>\n</blockquote>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /&gt;\n</code></pre>\n\n<blockquote>\n  <p>Copy this below code in your class</p>\n</blockquote>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\nprivate lateinit var fusedLocationClient: FusedLocationProviderClient\nprivate lateinit var locationRequest: LocationRequest\nprivate lateinit var locationCallback: LocationCallback\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_splash)\n    /*Check location*/\n    checkLocation()\n}\n\nprivate fun checkLocation(){\n    val manager = getSystemService(Context.LOCATION_SERVICE) as LocationManager\n    if (!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {\n        showAlertLocation()\n    }\n    fusedLocationClient = LocationServices.getFusedLocationProviderClient(this)\n    getLocationUpdates()\n}\n\nprivate fun showAlertLocation() {\n    val dialog = AlertDialog.Builder(this)\n    dialog.setMessage(\"Your location settings is set to Off, Please enable location to use this application\")\n    dialog.setPositiveButton(\"Settings\") { _, _ -&gt;\n        val myIntent = Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS)\n        startActivity(myIntent)\n    }\n    dialog.setNegativeButton(\"Cancel\") { _, _ -&gt;\n        finish()\n    }\n    dialog.setCancelable(false)\n    dialog.show()\n}\n\nprivate fun getLocationUpdates() {\n    fusedLocationClient = LocationServices.getFusedLocationProviderClient(this)\n    locationRequest = LocationRequest()\n    locationRequest.interval = 50000\n    locationRequest.fastestInterval = 50000\n    locationRequest.smallestDisplacement = 170f //170 m = 0.1 mile\n    locationRequest.priority = LocationRequest.PRIORITY_HIGH_ACCURACY //according to your app\n    locationCallback = object : LocationCallback() {\n        override fun onLocationResult(locationResult: LocationResult?) {\n            locationResult ?: return\n            if (locationResult.locations.isNotEmpty()) {\n                /*val location = locationResult.lastLocation\n                Log.e(\"location\", location.toString())*/\n                val addresses: List&lt;Address&gt;?\n                val geoCoder = Geocoder(applicationContext, Locale.getDefault())\n                addresses = geoCoder.getFromLocation(\n                    locationResult.lastLocation.latitude,\n                    locationResult.lastLocation.longitude,\n                    1\n                )\n                if (addresses != null &amp;&amp; addresses.isNotEmpty()) {\n                    val address: String = addresses[0].getAddressLine(0)\n                    val city: String = addresses[0].locality\n                    val state: String = addresses[0].adminArea\n                    val country: String = addresses[0].countryName\n                    val postalCode: String = addresses[0].postalCode\n                    val knownName: String = addresses[0].featureName\n                    Log.e(\"location\", \"$address $city $state $postalCode $country $knownName\")\n                }\n            }\n        }\n    }\n}\n\n// Start location updates\nprivate fun startLocationUpdates() {\n    fusedLocationClient.requestLocationUpdates(\n        locationRequest,\n        locationCallback,\n        null /* Looper */\n    )\n}\n\n// Stop location updates\nprivate fun stopLocationUpdates() {\n    fusedLocationClient.removeLocationUpdates(locationCallback)\n}\n\n// Stop receiving location update when activity not visible/foreground\noverride fun onPause() {\n    super.onPause()\n    stopLocationUpdates()\n}\n\n// Start receiving location update when activity  visible/foreground\noverride fun onResume() {\n    super.onResume()\n    startLocationUpdates()\n}}\n</code></pre>\n\n<blockquote>\n  <p>Run your code and check the log, Happy Coding</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 10624990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3048ca73c4943c134bbf8f6f41f95b6?s=128&d=identicon&r=PG&f=1", "display_name": "RanaUmer", "link": "https://stackoverflow.com/users/10624990/ranaumer"}, "is_accepted": false, "score": 4, "last_activity_date": 1585561705, "creation_date": 1585561705, "answer_id": 60927918, "question_id": 45958226, "link": "https://stackoverflow.com/questions/45958226/get-location-android-kotlin/60927918#60927918", "title": "Get location android Kotlin", "body": "<p>I read many of answers but question is get only last known location.\nWith receiver it continuously send latitude and longitude \nI have solution for this in kotlin..\nGive permissions </p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /&gt;\n\n\n\n\n    public fun getLastKnownLocation(context: Context) {\n        val locationManager: LocationManager = context.getSystemService(Context.LOCATION_SERVICE) as LocationManager\n        val providers: List&lt;String&gt; = locationManager.getProviders(true)\n        var location: Location? = null\n        for (i in providers.size - 1 downTo 0) {\n            location= locationManager.getLastKnownLocation(providers[i])\n            if (location != null)\n                break\n        }\n        val gps = DoubleArray(2)\n        if (location != null) {\n            gps[0] = location.getLatitude()\n            gps[1] = location.getLongitude()\n            Log.e(\"gpsLat\",gps[0].toString())\n            Log.e(\"gpsLong\",gps[1].toString())\n\n        }\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 8490394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-qI0I_4I7dfA/AAAAAAAAAAI/AAAAAAAAABE/JVtDvcx-vX8/photo.jpg?sz=128", "display_name": "Nour Medhat", "link": "https://stackoverflow.com/users/8490394/nour-medhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62696, "favorite_count": 13, "accepted_answer_id": 45960371, "answer_count": 6, "score": 23, "last_activity_date": 1585561705, "creation_date": 1504089551, "last_edit_date": 1504095575, "question_id": 45958226, "link": "https://stackoverflow.com/questions/45958226/get-location-android-kotlin", "title": "Get location android Kotlin", "body": "<p>I recently added get location function. When I try to show longitude and latitude, it returns zero.</p>\n\n<p>This my LocationListener class:</p>\n\n<pre><code>inner class MylocationListener: LocationListener {\n    constructor():super(){\n        mylocation= Location(\"me\")\n        mylocation!!.longitude\n        mylocation!!.latitude\n    }\n\n    override fun onLocationChanged(location: Location?) {\n        mylocation=location\n    }\n\n    override fun onStatusChanged(p0: String?, p1: Int, p2: Bundle?) {}\n\n    override fun onProviderEnabled(p0: String?) {}\n\n    override fun onProviderDisabled(p0: String?) {}\n}\n</code></pre>\n\n<p>And this my GetUserLocation function:</p>\n\n<pre><code>fun GetUserLocation(){\n    var mylocation= MylocationListener()\n    var locationManager=getSystemService(Context.LOCATION_SERVICE) as LocationManager\n    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0.1f,mylocation)\n}\n</code></pre>\n\n<p>And this my function to return my longitude and latitude:</p>\n\n<pre><code>fun getLoction (view: View){\n    prgDialog!!.show();\n\n    GetUserLocation()\n\n    button.setTextColor(getResources().getColor(R.color.green));\n    textView.text = mylocation!!.latitude.toFloat().toString()\n    Toast.makeText(this, mylocation!!.latitude.toFloat().toString(), Toast.LENGTH_LONG).show()\n    Toast.makeText(this, mylocation!!.longitude.toFloat().toString(), Toast.LENGTH_LONG).show()\n\n    prgDialog!!.hide()\n} \n</code></pre>\n"}, {"tags": ["android", "database", "kotlin"], "comments": [{"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 1, "creation_date": 1504087593, "post_id": 45956906, "comment_id": 78872751, "body": "You really need to read this first <a href=\"https://developer.android.com/topic/libraries/architecture/room.html\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/architecture/room.html</a>&zwnj;&#8203;."}, {"owner": {"reputation": 21, "user_id": 5960113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3defa9f6844f77f3dd4feb32693ce4bc?s=128&d=identicon&r=PG", "display_name": "Yuval", "link": "https://stackoverflow.com/users/5960113/yuval"}, "reply_to_user": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1504099244, "post_id": 45956906, "comment_id": 78881493, "body": "chandil, I do know how to use room and I&#39;ve read this article several times."}, {"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1504100791, "post_id": 45956906, "comment_id": 78882762, "body": "In that case you should have not created function body and should have given return type in create function. Do read it carefully and you will have your solution."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5960113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3defa9f6844f77f3dd4feb32693ce4bc?s=128&d=identicon&r=PG", "display_name": "Yuval", "link": "https://stackoverflow.com/users/5960113/yuval"}, "edited": false, "score": 1, "creation_date": 1504099017, "post_id": 45957718, "comment_id": 78881274, "body": "Hi Xavier,  SHIFT_TABLE is a variable in a different file (const val SHIFT_TABLE = &quot;Shift&quot; ). And in general I do know how to use room(I&#39;ve build different app with it). Maybe the way to go is to use another method. I was just hoping for a more &quot;elegant&quot; way to do it."}, {"owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "reply_to_user": {"reputation": 21, "user_id": 5960113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3defa9f6844f77f3dd4feb32693ce4bc?s=128&d=identicon&r=PG", "display_name": "Yuval", "link": "https://stackoverflow.com/users/5960113/yuval"}, "edited": false, "score": 0, "creation_date": 1504099777, "post_id": 45957718, "comment_id": 78881940, "body": "About SHIFT_TABLE, my fault, I&#39;ve mixed up Kotlin and Java. About you knowing Room, please take no offence, I&#39;ve just tried to make the answer as broad as possible, as can be useful to other developers."}, {"owner": {"reputation": 21, "user_id": 5960113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3defa9f6844f77f3dd4feb32693ce4bc?s=128&d=identicon&r=PG", "display_name": "Yuval", "link": "https://stackoverflow.com/users/5960113/yuval"}, "edited": false, "score": 1, "creation_date": 1504099948, "post_id": 45957718, "comment_id": 78882062, "body": "None taken :)  ."}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 1, "creation_date": 1504100065, "post_id": 45957718, "comment_id": 78882146, "body": "... and <code>create(...) : List&lt;Shift&gt;</code>, right?  But it might be implicit, not sure what Room does with Kotlin"}], "tags": [], "owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "is_accepted": false, "score": 0, "last_activity_date": 1504100284, "last_edit_date": 1504100284, "creation_date": 1504088089, "answer_id": 45957718, "question_id": 45956906, "link": "https://stackoverflow.com/questions/45956906/room-dao-conditions/45957718#45957718", "title": "Room Dao conditions", "body": "<p>There are a few things that need to be corrected in order to make it work.</p>\n\n<p>First of all, Room doesn't expect the method to have a body, but just a signature. Room will implement the method for you. I guess the empty body method in Kotlin acts like a default implementation, so it will not be used.</p>\n\n<p>Also, I haven't seen any example with complex parameters like yours, all the examples match a method argument with a parameter in the <a href=\"https://developer.android.com/reference/android/arch/persistence/room/Query.html\" rel=\"nofollow noreferrer\">@Query</a>, not a field inside the argument.</p>\n\n<p>So, what you're trying to implement should be (notice that I've fixed an unbalanced parenthesis):</p>\n\n<pre><code>@Dao\ninterface MyDao {\n    @Query(\"SELECT * FROM $SHIFT_TABLE  WHERE \" +\n           \"($SHIFT_START_DATE BETWEEN :startDateTime AND :endDateTime) OR \" +\n           \"($SHIFT_END_DATE BETWEEN :startDateTime AND :endDateTime) OR \" +\n           \"(($SHIFT_START_DATE &lt;= :startDateTime) AND ($SHIFT_END_DATE &gt;= :endDateTime))\")\n    fun create(startDateTime: String, endDateTime: String): List&lt;ShiftModel&gt;\n}\n</code></pre>\n\n<p>Notice that probably the argument types I've used may be wrong (adjust it to the type defined in your <code>Shift</code> type.</p>\n\n<p>For additional information see <a href=\"https://developer.android.com/topic/libraries/architecture/room.html\" rel=\"nofollow noreferrer\">Room Persistence Library</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 5960113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3defa9f6844f77f3dd4feb32693ce4bc?s=128&d=identicon&r=PG", "display_name": "Yuval", "link": "https://stackoverflow.com/users/5960113/yuval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 767, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504101283, "creation_date": 1504085844, "last_edit_date": 1504101283, "question_id": 45956906, "link": "https://stackoverflow.com/questions/45956906/room-dao-conditions", "title": "Room Dao conditions", "body": "<p>I am refactoring an old app and trying to change the queries to room is kind of straight forward for simple queries, but now I need a method to return a string according to the query result and I cannot figure out how to accomplish it?</p>\n\n<pre><code>@Query(\"SELECT * FROM $SHIFT_TABLE  WHERE ($SHIFT_START_DATE BETWEEN :arg0.startDateTime  AND :arg0.endDateTime ) OR  $SHIFT_END_DATE  BETWEEN :arg0.startDateTime  AND :arg0.endDateTime )\" +\n        \" OR (($SHIFT_START_DATE  &lt;= :arg0.startDateTime) AND ($SHIFT_END_DATE  &gt;= :arg0.endDateTime  ))\")\nfun create(shift: Shift) {\n    //there is a shift at that time return shift_overlapping_with_other_shift\n    //shift is shorter that 1 minute return shifts_shorter_than_one_minute_are_not_recorded\n    //else enter the shift and return shift_was_enterd\n}\n</code></pre>\n\n<p>edit: this is what I was end up doing, if someone know a better way I will be happy to know</p>\n\n<pre><code>    @Query(\"SELECT * FROM $SHIFT_TABLE  WHERE ($SHIFT_START_DATE BETWEEN :arg0.startDateTime  AND :arg0.endDateTime ) OR  $SHIFT_END_DATE  BETWEEN :arg0.startDateTime  AND :arg0.endDateTime )\" +\n        \" OR (($SHIFT_START_DATE  &lt;= :arg0.startDateTime) AND ($SHIFT_END_DATE  &gt;= :arg0.endDateTime  ))\")\nfun getShiftAtDate(shift: Shift):List&lt;Shift&gt;\n\n@Insert\nfun insertShift(shift: Shift)\n\nfun create(shift: Shift):String {\n    //shift is shorter that 1 minute return\n    if (shift.totalTime == 0) {//shift is shorter that 1 minute\n         return MyApp.instance.resources.getString(R.string.shifts_shorter_than_one_minute_are_not_recorded)\n    }\n    //there is a shift at that time\n    if (!getShiftAtDate(shift).isEmpty()){\n        return MyApp.instance.resources.getString(R.string.shift_overlapping_with_other_shift)\n    }\n    //else enter the shift\n    insertShift(shift)\n    return MyApp.instance.resources.getString(R.string.shift_was_enterd)\n}\n</code></pre>\n"}, {"tags": ["android", "ide", "kotlin"], "comments": [{"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 1, "creation_date": 1504086976, "post_id": 45956709, "comment_id": 78872377, "body": "You extension function shoud receive contextText as parameter if you are not declaring it as local (I see you don&#39;t, because the private keyword). And thend the statement must be called as <code>theTextView.setVisibleText(theText)</code>"}, {"owner": {"reputation": 7773, "user_id": 1025935, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/NPYjX.jpg?s=128&g=1", "display_name": "UmAnusorn", "link": "https://stackoverflow.com/users/1025935/umanusorn"}, "reply_to_user": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1504087215, "post_id": 45956709, "comment_id": 78872528, "body": "Good point, thanks. However, I declared it as local."}], "answers": [{"tags": [], "owner": {"reputation": 2796, "user_id": 200841, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b3fcce8448e3ceef9419ac86f6bb3fcb?s=128&d=identicon&r=PG", "display_name": "Gregor Petrin", "link": "https://stackoverflow.com/users/200841/gregor-petrin"}, "is_accepted": false, "score": 1, "last_activity_date": 1504086596, "creation_date": 1504086596, "answer_id": 45957156, "question_id": 45956709, "link": "https://stackoverflow.com/questions/45956709/how-to-group-the-duplicated-statement-in-apply-in-kotlin/45957156#45957156", "title": "How to group the duplicated statement in .apply in Kotlin?", "body": "<p>An extension function seems like the best choice. If you make the function return <code>this</code> you can use it without apply.</p>\n\n<p>Your other choice would be to create an ordinary function and pass it into <code>also</code> using method references, e.g. </p>\n\n<pre><code>fun setVisibleText(view: View) {  }\ntitleTextView.also(this::setVisibleText) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "is_accepted": false, "score": 1, "last_activity_date": 1504088859, "creation_date": 1504088859, "answer_id": 45957975, "question_id": 45956709, "link": "https://stackoverflow.com/questions/45956709/how-to-group-the-duplicated-statement-in-apply-in-kotlin/45957975#45957975", "title": "How to group the duplicated statement in .apply in Kotlin?", "body": "<p>the cleanest for me is to declare an extension function as: </p>\n\n<pre><code>fun TextView.setVisibleWithText(text: String?){\n  text ?: return\n  visibility = View.VISIBLE\n  setText(text)\n}\n</code></pre>\n\n<p>then calling it as:</p>\n\n<pre><code>myTextView?.setVisibleWithText(myText)\n</code></pre>\n\n<p>Anyway,remember that an extension functions it just an static util function.\nThis function below: </p>\n\n<pre><code>fun TextView.setVisibleWithText(text: String){\n  visibility = View.VISIBLE\n  setText(text)\n}\n</code></pre>\n\n<p>Will become something like this in java:</p>\n\n<pre><code>class TextViewKt {\n  public static function setVisibleWithText(@NotNull TextView receiver, @NotNull String text){\n    receiver.visibility = View.VISIBLE\n    receiver.setText(text)\n  }\n}\n</code></pre>\n\n<p>And after you can call it as:  </p>\n\n<pre><code>theText?.let { theTextView?.setVisibleWithText(it) }\n</code></pre>\n\n<p>You can always declare a normal funtion as:</p>\n\n<pre><code>  fun setVisibleWithText(textView: TextView, text: String){\n      textView.visibility = View.VISIBLE\n      textView.text = text\n  }\n</code></pre>\n\n<p>or if you want to make the check inside:</p>\n\n<pre><code>  /***\n  * It makes the textview visible if text is not null (it will stay visible if it was visible before)\n  **/\n  fun setVisibleWithText(textView: TextView, text: String?){\n      text ?: return\n      textView.visibility = View.VISIBLE\n      textView.text = text\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7773, "user_id": 1025935, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/NPYjX.jpg?s=128&g=1", "display_name": "UmAnusorn", "link": "https://stackoverflow.com/users/1025935/umanusorn"}, "edited": false, "score": 0, "creation_date": 1504149422, "post_id": 45957998, "comment_id": 78904174, "body": "Why do you use CharSequence instead of String ?"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 7773, "user_id": 1025935, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/NPYjX.jpg?s=128&g=1", "display_name": "UmAnusorn", "link": "https://stackoverflow.com/users/1025935/umanusorn"}, "edited": false, "score": 1, "creation_date": 1504149770, "post_id": 45957998, "comment_id": 78904259, "body": "@umitems Because the type of <code>TextView</code>&#39;s <code>text</code> is <code>CharSequence</code>. With <code>CharSequence</code>, you can use <a href=\"https://developer.android.com/reference/android/text/SpannableString.html\" rel=\"nofollow noreferrer\"><code>SpannableString</code></a> to build some styled text."}], "tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": true, "score": 2, "last_activity_date": 1504167920, "last_edit_date": 1504167920, "creation_date": 1504088911, "answer_id": 45957998, "question_id": 45956709, "link": "https://stackoverflow.com/questions/45956709/how-to-group-the-duplicated-statement-in-apply-in-kotlin/45957998#45957998", "title": "How to group the duplicated statement in .apply in Kotlin?", "body": "<p>I would write the extension function like this:</p>\n\n<pre><code>fun TextView.setVisibleIfTextNotNull(text: CharSequence?) = text?.let {\n    visibility = View.VISIBLE\n    this.text = it\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>contentTextView?.setVisibleIfTextNotNull(contentText)\ntitleTextView?.setVisibleIfTextNotNull(titleText)\n</code></pre>\n\n<p>You can either make it as an nested function or private extension function as you like. The name of the function may not be clear enough to clarify what the function does, you may think of a better one.</p>\n"}], "owner": {"reputation": 7773, "user_id": 1025935, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/NPYjX.jpg?s=128&g=1", "display_name": "UmAnusorn", "link": "https://stackoverflow.com/users/1025935/umanusorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 45957998, "answer_count": 3, "score": 2, "last_activity_date": 1504167920, "creation_date": 1504085278, "last_edit_date": 1504149549, "question_id": 45956709, "link": "https://stackoverflow.com/questions/45956709/how-to-group-the-duplicated-statement-in-apply-in-kotlin", "title": "How to group the duplicated statement in .apply in Kotlin?", "body": "<p>Here is my code. As you can see the body of apply is exactly the same. Is there a better than use extension function?</p>\n\n<pre><code>contentText?.let { \n    contentTextView?.apply { \n        visibility = View.VISIBLE\n        text = contentText\n    }\n}\n\ntitleText?.let {\n    titleTextView?.apply {\n        visibility = View.VISIBLE\n        text = titleText\n    }\n}\n</code></pre>\n\n<p>Here is my function</p>\n\n<pre><code>private fun setTextAndVisiblity(textView: TextView?, newText: String?): TextView? {\n    return textView?.apply {\n        visibility = View.VISIBLE\n        text = newText\n    }\n}\n</code></pre>\n\n<p>This is my code when apply function</p>\n\n<pre><code>contentText?.let {\n    setVisibleText(contentTextView, it)\n}\n\ntitleText?.let {\n    setVisibleText(titleTextView, it)\n}\n</code></pre>\n"}, {"tags": ["parsing", "kotlin", "code-analysis"], "comments": [{"owner": {"reputation": 2131, "user_id": 4629808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b1p71.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4629808/thomas"}, "edited": false, "score": 0, "creation_date": 1504873254, "post_id": 45956449, "comment_id": 79194868, "body": "Every Tool/IDE has a &quot;find in path&quot; function. Or is this something that needs to be generated automatically?"}, {"owner": {"reputation": 2453, "user_id": 2560685, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SIRC8.png?s=128&g=1", "display_name": "sab", "link": "https://stackoverflow.com/users/2560685/sab"}, "reply_to_user": {"reputation": 2131, "user_id": 4629808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b1p71.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4629808/thomas"}, "edited": false, "score": 0, "creation_date": 1504908428, "post_id": 45956449, "comment_id": 79212908, "body": "@thomas-kle&#223;en What do you mean? I&#39;m developping a code analyse plugin, I need something more powerfull than a simple character search. Please tell-me than you&#39;re not the one who low-vote me !"}, {"owner": {"reputation": 2131, "user_id": 4629808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b1p71.jpg?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4629808/thomas"}, "edited": false, "score": 0, "creation_date": 1504985132, "post_id": 45956449, "comment_id": 79230825, "body": "No. It wasn&#39;t me. I just asked what usecase you have in mind."}, {"owner": {"reputation": 1191, "user_id": 547546, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4bb62fbc38c7277e51e440a3529c2336?s=128&d=identicon&r=PG", "display_name": "Chad Retz", "link": "https://stackoverflow.com/users/547546/chad-retz"}, "edited": false, "score": 0, "creation_date": 1543439243, "post_id": 45956449, "comment_id": 93924971, "body": "I have a project that wraps the official Kotlin parser at <a href=\"https://github.com/cretz/kastree\" rel=\"nofollow noreferrer\">github.com/cretz/kastree</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15065, "user_id": 723090, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ML1tj.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/723090/mark"}, "edited": false, "score": 0, "creation_date": 1517000747, "post_id": 46116449, "comment_id": 83932768, "body": "Except if it&#39;s in a string. Both seems pretty common in English."}], "tags": [], "owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "is_accepted": false, "score": 1, "last_activity_date": 1504873288, "creation_date": 1504873288, "answer_id": 46116449, "question_id": 45956449, "link": "https://stackoverflow.com/questions/45956449/how-to-parse-kotlin-code/46116449#46116449", "title": "how to parse kotlin code?", "body": "<p>You would need to either find a Kotlin parser, or write your own. </p>\n\n<p>For this subset of parsing you may be able to cheat, as <code>data</code> is a keyword, so if you see data with non letters each side you know it is the keyword. </p>\n\n<p>For <code>?</code>, it depends which meaning you want, the elvis one can be detected by the dot else try the nullable meaning if the <code>?</code> is next to a letter.</p>\n"}, {"comments": [{"owner": {"reputation": 2453, "user_id": 2560685, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SIRC8.png?s=128&g=1", "display_name": "sab", "link": "https://stackoverflow.com/users/2560685/sab"}, "edited": false, "score": 0, "creation_date": 1511784924, "post_id": 47506340, "comment_id": 81977120, "body": "Yep, I use a similar stuff to developp a lib who do it: <a href=\"https://github.com/sarahBuisson/kotlin-parser\" rel=\"nofollow noreferrer\">github.com/sarahBuisson/kotlin-parser</a>"}], "tags": [], "owner": {"reputation": 907, "user_id": 1959527, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/54ba2874a54df9cd0406aefd079e238f?s=128&d=identicon&r=PG", "display_name": "singularity", "link": "https://stackoverflow.com/users/1959527/singularity"}, "is_accepted": false, "score": 0, "last_activity_date": 1511770232, "creation_date": 1511770232, "answer_id": 47506340, "question_id": 45956449, "link": "https://stackoverflow.com/questions/45956449/how-to-parse-kotlin-code/47506340#47506340", "title": "how to parse kotlin code?", "body": "<p>See this [0] Kotlin code parsing related discussion. They talk about using antlr v4 grammar to parse the Kotlin code.</p>\n\n<p>[0] <a href=\"https://discuss.kotlinlang.org/t/kotlin-parser/1728\" rel=\"nofollow noreferrer\">https://discuss.kotlinlang.org/t/kotlin-parser/1728</a></p>\n"}, {"tags": [], "owner": {"reputation": 2453, "user_id": 2560685, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SIRC8.png?s=128&g=1", "display_name": "sab", "link": "https://stackoverflow.com/users/2560685/sab"}, "is_accepted": true, "score": 8, "last_activity_date": 1511784991, "creation_date": 1511784991, "answer_id": 47510805, "question_id": 45956449, "link": "https://stackoverflow.com/questions/45956449/how-to-parse-kotlin-code/47510805#47510805", "title": "how to parse kotlin code?", "body": "<p>I use antlr4 to do it. And I create an open source lib:\n<a href=\"https://github.com/sarahBuisson/kotlin-parser\" rel=\"noreferrer\">https://github.com/sarahBuisson/kotlin-parser</a></p>\n\n<pre><code>&lt;dependency\n   &lt;groupId&gt;com.github.sarahbuisson&lt;/groupId&gt;\n   &lt;artifactId&gt;kotlin-parser&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 2228895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a93b6ab1892c8eceb5209c7ade491a?s=128&d=identicon&r=PG", "display_name": "user2228895", "link": "https://stackoverflow.com/users/2228895/user2228895"}, "is_accepted": false, "score": 0, "last_activity_date": 1585728493, "creation_date": 1585728493, "answer_id": 60966226, "question_id": 45956449, "link": "https://stackoverflow.com/questions/45956449/how-to-parse-kotlin-code/60966226#60966226", "title": "how to parse kotlin code?", "body": "<p>I have not yet written a Kotlin language grammar for it.</p>\n\n<p>But I have implemented a parser in Kotlin, id that is any use.</p>\n\n<p>It is Kotlin common code, so should work for any target platform.</p>\n\n<p>There is an article about it here, and the code is on github.</p>\n\n<p><a href=\"https://medium.com/@dr.david.h.akehurst/agl-your-dsl-in-the-web-c9f54595691b\" rel=\"nofollow noreferrer\">https://medium.com/@dr.david.h.akehurst/agl-your-dsl-in-the-web-c9f54595691b</a></p>\n"}, {"tags": [], "owner": {"reputation": 372, "user_id": 1832387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adefcd858b7b0bb4d3ac4ac07c6dcb53?s=128&d=identicon&r=PG", "display_name": "Anton Yuriev", "link": "https://stackoverflow.com/users/1832387/anton-yuriev"}, "is_accepted": false, "score": 0, "last_activity_date": 1618239754, "creation_date": 1618239754, "answer_id": 67060788, "question_id": 45956449, "link": "https://stackoverflow.com/questions/45956449/how-to-parse-kotlin-code/67060788#67060788", "title": "how to parse kotlin code?", "body": "<p>You can try Kastree -- simple library to manipulate Kotlin source code as a set of AST objects.</p>\n<p><a href=\"https://github.com/cretz/kastree\" rel=\"nofollow noreferrer\">https://github.com/cretz/kastree</a></p>\n"}], "owner": {"reputation": 2453, "user_id": 2560685, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SIRC8.png?s=128&g=1", "display_name": "sab", "link": "https://stackoverflow.com/users/2560685/sab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2811, "favorite_count": 3, "accepted_answer_id": 47510805, "answer_count": 5, "score": 7, "last_activity_date": 1618239754, "creation_date": 1504084496, "last_edit_date": 1504873054, "question_id": 45956449, "link": "https://stackoverflow.com/questions/45956449/how-to-parse-kotlin-code", "title": "how to parse kotlin code?", "body": "<p>I need to analyse kotlin files code, to detect the keyword \"data\" and \"?\".</p>\n\n<p>The issue is I don't find any libs like JavaParser.\nI don't need powerfull tools, just something who return me the number of the lines.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 2051551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b781a590a39a7fb9292cf20c9eaa290?s=128&d=identicon&r=PG", "display_name": "user2051551", "link": "https://stackoverflow.com/users/2051551/user2051551"}, "edited": false, "score": 0, "creation_date": 1504089147, "post_id": 45955107, "comment_id": 78873787, "body": "You state &quot;kotlin-stdlib-jre7 is perfectly fine&quot;, the answer above states &quot;kotlin-stdlib-jre7 is not supposed&quot;. Actually I&#39;m looking some reference to explain the rule when to use kotlin-stdlib or kotlin-stdlib-jre7"}, {"owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "reply_to_user": {"reputation": 123, "user_id": 2051551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b781a590a39a7fb9292cf20c9eaa290?s=128&d=identicon&r=PG", "display_name": "user2051551", "link": "https://stackoverflow.com/users/2051551/user2051551"}, "edited": false, "score": 0, "creation_date": 1504096194, "post_id": 45955107, "comment_id": 78878983, "body": "I&#39;m using <code>kotlin-stdlib-jre7</code> in my projects, that&#39;s why I can confirm it works. That being said, I don&#39;t know why the answer you linked is saying that Android doesn&#39;t support Java 7. As I stated in my answer, there is even partial support for Java 8 in beta (through &quot;desugar&quot; process, which translates Java 8 language features to Java 7). Also, here you have another SO question saying that it&#39;s supported: [<a href=\"https://stackoverflow.com/questions/20480090/does-android-support-jdk-6-or-7](Does\" title=\"does android support jdk 6 or 7%5d(Does\">stackoverflow.com/questions/20480090/&hellip;</a> Android support JDK 6 or 7). Hope this makes things more clear."}, {"owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "reply_to_user": {"reputation": 123, "user_id": 2051551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b781a590a39a7fb9292cf20c9eaa290?s=128&d=identicon&r=PG", "display_name": "user2051551", "link": "https://stackoverflow.com/users/2051551/user2051551"}, "edited": false, "score": 0, "creation_date": 1504096543, "post_id": 45955107, "comment_id": 78879254, "body": "Updated the answer with the reason about why <code>jre7</code>."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1504144052, "post_id": 45955107, "comment_id": 78902977, "body": "<code>kotlin-stdlib</code> was not <i>split</i> in 1.1. These <code>kotlin-stdlib-jre7</code> and <code>-jre8</code> are additional artifacts which contain new API."}, {"owner": {"reputation": 123, "user_id": 2051551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b781a590a39a7fb9292cf20c9eaa290?s=128&d=identicon&r=PG", "display_name": "user2051551", "link": "https://stackoverflow.com/users/2051551/user2051551"}, "edited": false, "score": 1, "creation_date": 1504164470, "post_id": 45955107, "comment_id": 78909805, "body": "Kotlin Language Documentation snippet above is not Android specific. Docs are general for all Kotlin supported platforms. AFAIU kotlin-stdlib-jre7/kotlin-stdlib-jre8 are right choice when you are targeting JDK 7 or JDK 8. I&#39;m targeting Java 6. <code>If you&#39;re targeting JDK 7 or JDK 8, you can use extended versions of the Kotlin standard library which contain additional extension functions for APIs added in new JDK versions. Instead of kotlin-stdlib , use one of the following dependencies</code>"}, {"owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "edited": false, "score": 0, "creation_date": 1504166783, "post_id": 45955107, "comment_id": 78911262, "body": "Ok, I assumed Android as you where talking about Android Studio. But fair enough, if you&#39;re targeting Java 6, then agree, the right library is <code>kotlin-stdlib</code>, not the <code>-jre*</code> ones. I&#39;ve also updated my answer with all the discussion and additional notes on why I use Java 7."}, {"owner": {"reputation": 123, "user_id": 2051551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b781a590a39a7fb9292cf20c9eaa290?s=128&d=identicon&r=PG", "display_name": "user2051551", "link": "https://stackoverflow.com/users/2051551/user2051551"}, "edited": false, "score": 1, "creation_date": 1504171342, "post_id": 45955107, "comment_id": 78914321, "body": "Yes, we are talking about Android and project minSdkVersion is 21. I&#39;m targeting Java 6 in term of Kotlin. Project settings: Kotlin compiler targets JVM version 1.6. I assume this means that compiler will produce Java 6 bytecode and Java 7 libraries are not applicable in this case. Really thanks for your help. I might be not smart enough to understand. I will accept your answer if will not get alternative explanations."}, {"owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "edited": false, "score": 0, "creation_date": 1504172116, "post_id": 45955107, "comment_id": 78914874, "body": "Basically that should be it. The topic is tricky because Dalvik/ART are not JVM, but use different bytecode, which doesn&#39;t always match 100% with JVM capabilities for a given Java level. So, given you&#39;re targeting API 21, you could target both Java 7 and Java 6, including <code>try-with-resources</code>. And thanks, really enjoyed the discussion."}, {"owner": {"reputation": 123, "user_id": 2051551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b781a590a39a7fb9292cf20c9eaa290?s=128&d=identicon&r=PG", "display_name": "user2051551", "link": "https://stackoverflow.com/users/2051551/user2051551"}, "edited": false, "score": 0, "creation_date": 1504177388, "post_id": 45955107, "comment_id": 78918533, "body": "1. Kotlin compiler suggests only 2 target JVMs (1.6 or 1.8). There is no 1.7 option. 2. I thought Android Studio facility to use Java 7/8 language features and project result bytecode version are different stories."}, {"owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "edited": false, "score": 0, "creation_date": 1504180579, "post_id": 45955107, "comment_id": 78920834, "body": "Yes, I was speaking about using <code>kotlin-stdlib-jre7</code> here. And, about bytecode, I cannot say exactly how it&#39;s transformed from Java .class bytecode (which is stack-based VM) to DEX bytecode (register-based VM), but I know that it&#39;s not a 100% 1:1 match."}], "tags": [], "owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "is_accepted": true, "score": 6, "last_activity_date": 1504166620, "last_edit_date": 1504166620, "creation_date": 1504080368, "answer_id": 45955107, "question_id": 45954974, "link": "https://stackoverflow.com/questions/45954974/why-kotlin-plugin-adds-kotlin-stdlib-jre7-not-kotlin-stdlib-reference-for-andr/45955107#45955107", "title": "Why Kotlin plugin adds kotlin-stdlib-jre7 (not kotlin-stdlib) reference for Android project", "body": "<p>Android supports Java 7 for some years already. In fact, partial support for Java 8 is on the way, at the beginning by means of <a href=\"https://developer.android.com/guide/platform/j8-jack.html\" rel=\"noreferrer\">Jack toolchain</a> and currently by means of <a href=\"https://android-developers.googleblog.com/2017/03/future-of-java-8-language-feature.html\" rel=\"noreferrer\">desugaring in the default toolchain</a>.</p>\n\n<p>So, <code>kotlin-stdlib-jre7</code> is perfectly fine.</p>\n\n<p>As you can see in <a href=\"https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/42853438#42853438\">this answer</a>, <code>kotlin-stdlib</code> got two additional extension libraries <code>kotlin-stdlib-jre7</code> and <code>kotlin-stdlib-jre8</code> in 1.1. This libraries add specific features for Java 7 and Java 8, and include <code>kotlin-stdlib</code> as a transitive dependency. See also the <a href=\"https://kotlinlang.org/docs/reference/whatsnew11.html#java-8-standard-library-support\" rel=\"noreferrer\">Kotlin 1.1 release notes</a>:</p>\n\n<blockquote>\n  <p>Java 8 standard library support</p>\n  \n  <p>There are now separate versions of the standard library supporting the new JDK APIs added in Java 7 and 8. If you need access to the new APIs, use kotlin-stdlib-jre7 and kotlin-stdlib-jre8 maven artifacts instead of the standard kotlin-stdlib. These artifacts are tiny extensions on top of kotlin-stdlib and they bring it to your project as a transitive dependency.</p>\n</blockquote>\n\n<p>Kotlin plugin in current versions of Android Studio add <code>kotlin-stdlib-jre7</code> as a dependency when configuring Kotlin in the project, as Android Studio and build tools support Java 7 in a backward compatible way since <a href=\"https://sites.google.com/a/android.com/tools/recent/androidstudio032released\" rel=\"noreferrer\">Android Studio 0.3.2, released in October 2013</a>. See also <a href=\"https://stackoverflow.com/questions/20480090/does-android-support-jdk-6-or-7/22303654#22303654\">Does Android support JDK 6 or 7</a>. Specifically, release notes state:</p>\n\n<blockquote>\n  <p>The main feature in this release is support for Android KitKat:</p>\n  \n  <p>Support for language features like the diamond operator, multi-catch, try-with-resources, strings in switches, etc.\n  When creating a new project, you can specify a source language level:</p>\n</blockquote>\n\n<p>And:</p>\n\n<blockquote>\n  <p>Note that you can use all these language features not just with Android KitKat, but with older versions of Android too! There is one exception to that: try-with-resources, which will require minSdkVersion 19.</p>\n</blockquote>\n"}], "owner": {"reputation": 123, "user_id": 2051551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b781a590a39a7fb9292cf20c9eaa290?s=128&d=identicon&r=PG", "display_name": "user2051551", "link": "https://stackoverflow.com/users/2051551/user2051551"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6099, "favorite_count": 1, "accepted_answer_id": 45955107, "answer_count": 1, "score": 7, "last_activity_date": 1504166620, "creation_date": 1504079902, "question_id": 45954974, "link": "https://stackoverflow.com/questions/45954974/why-kotlin-plugin-adds-kotlin-stdlib-jre7-not-kotlin-stdlib-reference-for-andr", "title": "Why Kotlin plugin adds kotlin-stdlib-jre7 (not kotlin-stdlib) reference for Android project", "body": "<p>Android Studio 2.3.3; Kotlin Plugin: 1.1.4; Kotlin Compiler: Kotlin to JVM: 1.6. </p>\n\n<p>Android Studio > New Project > Configure Kotlin in Project action adds\nreference for kotlin-stdlib-jre7 to gradle file. \nI would expect kotlin-stdlib as we Kotlin target JVM is 1.6.</p>\n\n<p>Have not found good explanation. \nE.g. <a href=\"https://stackoverflow.com/a/43944280/2051551\" title=\"this answer\">this answer</a> states that </p>\n\n<blockquote>\n  <p>The kotlin-stdlib-jre7 artifact is not supposed to work on Android, which currently supports only Java 6 platform. When targeting Android, you should use kotlin-stdlib, which is built for JRE 6</p>\n</blockquote>\n"}, {"tags": ["kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 1, "creation_date": 1504077229, "post_id": 45954030, "comment_id": 78866141, "body": "Isn&#39;t the swift code equivalent to putting <code>class Jazz</code> and <code>fun Jazz.swing() {}</code> within the same Kotlin file?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1504077688, "post_id": 45954030, "comment_id": 78866427, "body": "Why would you use an extension and don&#39;t just add the function as an ordinary one inside the class?"}, {"owner": {"reputation": 4768, "user_id": 3499145, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a8d7962edff6c2ce861f42324cc1616?s=128&d=identicon&r=PG&f=1", "display_name": "Algar", "link": "https://stackoverflow.com/users/3499145/algar"}, "reply_to_user": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1504077984, "post_id": 45954030, "comment_id": 78866602, "body": "@BakaWaii Yes, apparently it is :). I swear that I&#39;ve tried that before with no luck :P."}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1504078205, "post_id": 45954030, "comment_id": 78866737, "body": "You may also put what you&#39;ve tried in the question next time and show what is the error you get. So that, you may find your answer while you are typing your question :)"}, {"owner": {"reputation": 4768, "user_id": 3499145, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a8d7962edff6c2ce861f42324cc1616?s=128&d=identicon&r=PG&f=1", "display_name": "Algar", "link": "https://stackoverflow.com/users/3499145/algar"}, "reply_to_user": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1504078280, "post_id": 45954030, "comment_id": 78866774, "body": "@s1m0nw1 It has mainly to do with code clarity. You &quot;always&quot; wan&#39;t to separate chunks of functions/code that has to do with a specific task. Remember that this can be multiple extensions on the same class.  A small gain can also be if you have a set of private functions - then you can make the extension private and that is more clear than having lots of individually private methods in the class..  And at least in Swift, with Structs, you have a thing with default constructors that you avoid with extensions. Not sure if the same goes for Kotlin."}, {"owner": {"reputation": 4768, "user_id": 3499145, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a8d7962edff6c2ce861f42324cc1616?s=128&d=identicon&r=PG&f=1", "display_name": "Algar", "link": "https://stackoverflow.com/users/3499145/algar"}, "reply_to_user": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1504078325, "post_id": 45954030, "comment_id": 78866802, "body": "@BakaWaii That&#39;s a perfectly valid comment :)."}], "answers": [{"comments": [{"owner": {"reputation": 4768, "user_id": 3499145, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a8d7962edff6c2ce861f42324cc1616?s=128&d=identicon&r=PG&f=1", "display_name": "Algar", "link": "https://stackoverflow.com/users/3499145/algar"}, "edited": false, "score": 0, "creation_date": 1504078468, "post_id": 45954173, "comment_id": 78866884, "body": "Thanks! I&#39;m still missing an <code>extension</code> keyword though. Maybe in the bright Kotlin-future."}], "tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": true, "score": 2, "last_activity_date": 1504077594, "last_edit_date": 1504077594, "creation_date": 1504077067, "answer_id": 45954173, "question_id": 45954030, "link": "https://stackoverflow.com/questions/45954030/how-to-place-a-kotlin-extension-in-a-class-file/45954173#45954173", "title": "How to place a Kotlin extension in a class file?", "body": "<p>You can place the extension function inside or outside the class:</p>\n\n<p>Outside:</p>\n\n<pre><code>class Jazz { ... }\n\nfun Jazz.bar() {\n    println(\"hello\")\n}\n</code></pre>\n\n<p>Inside (in the <code>companion object</code>):</p>\n\n<pre><code>import YOUR_PACKAGE.Jazz.Companion.bar\n\nfun main(args: Array&lt;String&gt;) {\n    Jazz().bar()\n}\n\nclass Jazz {\n    companion object {\n        fun Jazz.bar() {\n            println(\"hello\")\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4768, "user_id": 3499145, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a8d7962edff6c2ce861f42324cc1616?s=128&d=identicon&r=PG&f=1", "display_name": "Algar", "link": "https://stackoverflow.com/users/3499145/algar"}, "edited": false, "score": 1, "creation_date": 1504077852, "post_id": 45954208, "comment_id": 78866525, "body": "Hahaha, I could have sworn I&#39;ve tried that... Damn, this got embarrassing quickly :). Thanks for the answer, but I&#39;ve accepted @guenhter&#39;s since that was more detailed."}, {"owner": {"reputation": 8935, "user_id": 7637657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QJPu.jpg?s=128&g=1", "display_name": "Alexander Romanov", "link": "https://stackoverflow.com/users/7637657/alexander-romanov"}, "reply_to_user": {"reputation": 4768, "user_id": 3499145, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a8d7962edff6c2ce861f42324cc1616?s=128&d=identicon&r=PG&f=1", "display_name": "Algar", "link": "https://stackoverflow.com/users/3499145/algar"}, "edited": false, "score": 0, "creation_date": 1504078648, "post_id": 45954208, "comment_id": 78866980, "body": "And he was first as well :)"}], "tags": [], "owner": {"reputation": 8935, "user_id": 7637657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QJPu.jpg?s=128&g=1", "display_name": "Alexander Romanov", "link": "https://stackoverflow.com/users/7637657/alexander-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1504077196, "creation_date": 1504077196, "answer_id": 45954208, "question_id": 45954030, "link": "https://stackoverflow.com/questions/45954030/how-to-place-a-kotlin-extension-in-a-class-file/45954208#45954208", "title": "How to place a Kotlin extension in a class file?", "body": "<p>It's not very different from <strong>Swift</strong>: </p>\n\n<pre><code>class Jazz {\n    val a = \"Jazz\"\n}\n\nfun Jazz.swing() = a\n\n////////////\n\nfun main(args: Array&lt;String&gt;) {\n    print(Jazz().swing()) // &gt;&gt;&gt; Jazz\n}\n</code></pre>\n"}], "owner": {"reputation": 4768, "user_id": 3499145, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a8d7962edff6c2ce861f42324cc1616?s=128&d=identicon&r=PG&f=1", "display_name": "Algar", "link": "https://stackoverflow.com/users/3499145/algar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 45954173, "answer_count": 2, "score": 2, "last_activity_date": 1504144630, "creation_date": 1504076630, "last_edit_date": 1504144630, "question_id": 45954030, "link": "https://stackoverflow.com/questions/45954030/how-to-place-a-kotlin-extension-in-a-class-file", "title": "How to place a Kotlin extension in a class file?", "body": "<p>Maybe this question is answered in the <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">official doc</a>, but I'm not seeing it...</p>\n\n<p>In Swift we are used to write something like </p>\n\n<pre><code>class Jazz {\n...\n}\n\nextension Jazz {\n    func swing() {\n    ...\n    }\n}\n</code></pre>\n\n<p>and place that whole code snippet in a single file, say <code>Jazz.swift</code>.</p>\n\n<p>We don't seem to be able to do the corresponding thing in Kotlin? I'm always finding my selfe writing e.g. one <code>Jazz.kt</code> and one <code>JazzExtensions.kt</code>, which simply isn't always the clearest way of structuring the code.</p>\n\n<p>Any input on this is appreciated.</p>\n"}, {"tags": ["spring", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 1, "creation_date": 1504079588, "post_id": 45953118, "comment_id": 78867568, "body": "This is fine the way it is. Spring uses JavaBean binding, so you need getters/setters. <code>ConfigurationProperties</code> is for typesafe configuration, it&#39;s not a <code>data</code> class."}, {"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "edited": false, "score": 1, "creation_date": 1504100353, "post_id": 45953118, "comment_id": 78882410, "body": "See <a href=\"https://github.com/spring-projects/spring-boot/issues/8762\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/8762</a> which is dicussing about supporting properly immutable data classes for <code>@ConfigurationProperties</code>."}, {"owner": {"reputation": 13314, "user_id": 1760984, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IcBXx.jpg?s=128&g=1", "display_name": "aldok", "link": "https://stackoverflow.com/users/1760984/aldok"}, "edited": false, "score": 0, "creation_date": 1609756988, "post_id": 45953118, "comment_id": 115912734, "body": "(2021) This blog post has a complete guide for using ConfigurationProperties in Kotlin: <a href=\"https://towardsdatascience.com/a-guide-to-use-spring-boots-configurationproperties-annotation-in-kotlin-s-dataclass-1341c63110f4\" rel=\"nofollow noreferrer\">towardsdatascience.com/&hellip;</a>  I&#39;ve tested it in the latest Spring Boot (2.4.1).  Basically, you need to add ConstructorBinding annotation to the data class. And add ConfigurationPropertiesScan annotation to the Application class"}], "answers": [{"comments": [{"owner": {"reputation": 5641, "user_id": 1726507, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/7b7cd4fbecd030677b7c29c99d29d1ca?s=128&d=identicon&r=PG", "display_name": "Sonique", "link": "https://stackoverflow.com/users/1726507/sonique"}, "edited": false, "score": 5, "creation_date": 1504075696, "post_id": 45953331, "comment_id": 78865300, "body": "Thanks, for you comment. I know about <code>@Value</code> annotation, but I do not consider this way, because it produces a lot of  boilerplate code, <code>@ConfigurationProperties</code> definitely better."}, {"owner": {"reputation": 2120, "user_id": 3407594, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cu8a9.jpg?s=128&g=1", "display_name": "Bu\u011fra Ekuklu", "link": "https://stackoverflow.com/users/3407594/bu%c4%9fra-ekuklu"}, "edited": false, "score": 0, "creation_date": 1545050217, "post_id": 45953331, "comment_id": 94478905, "body": "This is just a workaround. <code>@Value</code> indeed should not be used as a replacement for <code>@ConfigurationProperties</code>, since it causes boilerplate code. The way something works ought not to be a right solution."}], "tags": [], "owner": {"reputation": 55186, "user_id": 301607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1a7b23a820171d3370a308139556e29?s=128&d=identicon&r=PG", "display_name": "StanislavL", "link": "https://stackoverflow.com/users/301607/stanislavl"}, "is_accepted": false, "score": 4, "last_activity_date": 1504074249, "creation_date": 1504074249, "answer_id": 45953331, "question_id": 45953118, "link": "https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties/45953331#45953331", "title": "Kotlin &amp; Spring Boot @ConfigurationProperties", "body": "<pre><code>@Value(\"\\${some.property.key:}\")\nlateinit var foo:String\n</code></pre>\n\n<p>could be used this way</p>\n"}, {"comments": [{"owner": {"reputation": 186, "user_id": 5656325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3785ffc6e4d2e4f1673214cfc799afb?s=128&d=identicon&r=PG&f=1", "display_name": "fspasovski", "link": "https://stackoverflow.com/users/5656325/fspasovski"}, "edited": false, "score": 2, "creation_date": 1577974330, "post_id": 45954478, "comment_id": 105297260, "body": "Can you give an example on how the application.properties file should look like for the given code sample? I am having a similar scenario where i am not sure how to pass values to constructors with more than one parameter."}, {"owner": {"reputation": 155, "user_id": 7205901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614015339702632785bd52037986dfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver Eisenbarth", "link": "https://stackoverflow.com/users/7205901/oliver-eisenbarth"}, "edited": false, "score": 0, "creation_date": 1618828333, "post_id": 45954478, "comment_id": 118711948, "body": "From <a href=\"https://spring.io/guides/tutorials/spring-boot-kotlin/\" rel=\"nofollow noreferrer\">spring.io/guides/tutorials/spring-boot-kotlin</a>:  <code>example.kotlin.myService.apiToken=YourToken</code> <code>example.kotlin.myService.uri=YourUri</code>"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 20, "last_activity_date": 1576500921, "last_edit_date": 1576500921, "creation_date": 1504078150, "answer_id": 45954478, "question_id": 45953118, "link": "https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties/45954478#45954478", "title": "Kotlin &amp; Spring Boot @ConfigurationProperties", "body": "<p><strong>Update: As of Spring Boot 2.2.0, you can use data classes as follows:</strong></p>\n\n<pre><code>@ConstructorBinding\n@ConfigurationProperties(\"example.kotlin\")\ndata class KotlinExampleProperties(\n        val name: String,\n        val description: String,\n        val myService: MyService) {\n\n    data class MyService(\n            val apiToken: String,\n            val uri: URI\n    )\n}\n</code></pre>\n\n<p>For further reference, see the <a href=\"https://docs.spring.io/spring-boot/docs/2.2.1.RELEASE/reference/html/spring-boot-features.html#boot-features-kotlin-configuration-properties\" rel=\"noreferrer\">official documentation</a>. </p>\n\n<hr>\n\n<p><strong>Obsolete as of Spring Boot 2.2.0, Issue closed</strong></p>\n\n<p>As stated in the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties\" rel=\"noreferrer\">docs</a>: A \"<strong>Java Bean</strong>\u201c has to be provided in order to use <code>ConfigurationProperties</code>. This means your properties need to have getters and setters, thus <code>val</code> is not possible at the moment.</p>\n\n<blockquote>\n  <p>Getters and setters are usually mandatory, since binding is via standard Java Beans property descriptors, just like in Spring MVC. There are cases where a setter may be omitted [...]</p>\n</blockquote>\n\n<p>This has been resolved for Spring Boot 2.2.0, which is supposed to be released soon:\n<a href=\"https://github.com/spring-projects/spring-boot/issues/8762\" rel=\"noreferrer\">https://github.com/spring-projects/spring-boot/issues/8762</a></p>\n"}, {"comments": [{"owner": {"reputation": 13468, "user_id": 635887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a54e77591e1f9a75d3be9a195db45f?s=128&d=identicon&r=PG", "display_name": "Ray Hunter", "link": "https://stackoverflow.com/users/635887/ray-hunter"}, "edited": false, "score": 0, "creation_date": 1528855729, "post_id": 50377412, "comment_id": 88660851, "body": "This did not work for me. I also added the annotation <code>@EnableConfigurationProperties</code>, but still no success."}], "tags": [], "owner": {"reputation": 41, "user_id": 3071832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b32bedc9301682bb31be43414e5d820?s=128&d=identicon&r=PG&f=1", "display_name": "Qutory", "link": "https://stackoverflow.com/users/3071832/qutory"}, "is_accepted": false, "score": 0, "last_activity_date": 1526493922, "creation_date": 1526493922, "answer_id": 50377412, "question_id": 45953118, "link": "https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties/50377412#50377412", "title": "Kotlin &amp; Spring Boot @ConfigurationProperties", "body": "<p>This is how I did it:</p>\n\n<p>application.properties</p>\n\n<pre><code>my.prefix.myValue=1\n</code></pre>\n\n<p>MyProperties.kt</p>\n\n<pre><code>import org.springframework.boot.context.properties.ConfigurationProperties\nimport org.springframework.stereotype.Component\n\n@Component\n@ConfigurationProperties(prefix = \"my.prefix\")\nclass MyProperties\n{\n    private var myValue = 0\n    fun getMyValue(): Int {\n        return myValue;\n    }\n\n    fun setMyValue(value: Int){\n        myValue = value\n    }\n}\n</code></pre>\n\n<p>MyService.kt</p>\n\n<pre><code>@Component\nclass MyService(val myProperties: MyProperties) {\n    fun doIt() {\n        System.console().printf(myProperties.getMyValue().toString())\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2379, "user_id": 519035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f372079010c5f7b9728c0e5c5635f9c7?s=128&d=identicon&r=PG&f=1", "display_name": "AbstractVoid", "link": "https://stackoverflow.com/users/519035/abstractvoid"}, "edited": false, "score": 2, "creation_date": 1544711042, "post_id": 50828463, "comment_id": 94379566, "body": "After some research this seems like the most reasonable option. It avoids having repetition with a bit dirty @Value annotation, and will also ensure that configuration is set in properties file (if related config entry is missing, exception will be thrown that the value is not initialized)."}, {"owner": {"reputation": 58529, "user_id": 60518, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c5060835472688a132ffeb67a05803c1?s=128&d=identicon&r=PG", "display_name": "Tim B&#252;the", "link": "https://stackoverflow.com/users/60518/tim-b%c3%bcthe"}, "edited": false, "score": 10, "creation_date": 1548234680, "post_id": 50828463, "comment_id": 95465879, "body": "What about primitive types, since <code>lateinit</code> is not allowed for them?"}, {"owner": {"reputation": 2933, "user_id": 504060, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e24394b30584fff8f4968c3713c68fbc?s=128&d=identicon&r=PG", "display_name": "kiltek", "link": "https://stackoverflow.com/users/504060/kiltek"}, "edited": false, "score": 1, "creation_date": 1565787968, "post_id": 50828463, "comment_id": 101460269, "body": "How to access these properties from other Spring <code>@Service</code> or other <code>@Component</code> classes?"}, {"owner": {"reputation": 13468, "user_id": 635887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a54e77591e1f9a75d3be9a195db45f?s=128&d=identicon&r=PG", "display_name": "Ray Hunter", "link": "https://stackoverflow.com/users/635887/ray-hunter"}, "reply_to_user": {"reputation": 2933, "user_id": 504060, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e24394b30584fff8f4968c3713c68fbc?s=128&d=identicon&r=PG", "display_name": "kiltek", "link": "https://stackoverflow.com/users/504060/kiltek"}, "edited": false, "score": 0, "creation_date": 1565793938, "post_id": 50828463, "comment_id": 101463719, "body": "@kiltek you can take the configuration bean that is created and use that bean in other components and services."}, {"owner": {"reputation": 3592, "user_id": 3094805, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/6f9729dacae0e6942713e6e84cf8a4db?s=128&d=identicon&r=PG&f=1", "display_name": "PaulNUK", "link": "https://stackoverflow.com/users/3094805/paulnuk"}, "edited": false, "score": 1, "creation_date": 1591702967, "post_id": 50828463, "comment_id": 110150083, "body": "What happens if any of the late init properties here aren&#39;t present in the environment - do you get a runtime null pointer exception ?"}, {"owner": {"reputation": 13468, "user_id": 635887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a54e77591e1f9a75d3be9a195db45f?s=128&d=identicon&r=PG", "display_name": "Ray Hunter", "link": "https://stackoverflow.com/users/635887/ray-hunter"}, "reply_to_user": {"reputation": 3592, "user_id": 3094805, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/6f9729dacae0e6942713e6e84cf8a4db?s=128&d=identicon&r=PG&f=1", "display_name": "PaulNUK", "link": "https://stackoverflow.com/users/3094805/paulnuk"}, "edited": false, "score": 0, "creation_date": 1591803046, "post_id": 50828463, "comment_id": 110196697, "body": "@PaulNUK you will get an kotlin.UninitializedPropertyAccessException if you try and access the variable without initializing it."}], "tags": [], "owner": {"reputation": 13468, "user_id": 635887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a54e77591e1f9a75d3be9a195db45f?s=128&d=identicon&r=PG", "display_name": "Ray Hunter", "link": "https://stackoverflow.com/users/635887/ray-hunter"}, "is_accepted": false, "score": 51, "last_activity_date": 1528858519, "creation_date": 1528858519, "answer_id": 50828463, "question_id": 45953118, "link": "https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties/50828463#50828463", "title": "Kotlin &amp; Spring Boot @ConfigurationProperties", "body": "<p>Here is how I have it working with my application.yml file.</p>\n\n<pre><code>myconfig:\n  my-host: ssl://example.com\n  my-port: 23894\n  my-user: user\n  my-pass: pass\n</code></pre>\n\n<p>Here is the kotlin file:</p>\n\n<pre><code>@Configuration\n@ConfigurationProperties(prefix = \"myconfig\")\nclass MqttProperties {\n    lateinit var myHost: String\n    lateinit var myPort: String\n    lateinit var myUser: String\n    lateinit var myPass: String    \n}\n</code></pre>\n\n<p>This worked great for me.</p>\n"}, {"comments": [{"owner": {"reputation": 293, "user_id": 695181, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8uruB.jpg?s=128&g=1", "display_name": "Matt Kerr", "link": "https://stackoverflow.com/users/695181/matt-kerr"}, "edited": false, "score": 0, "creation_date": 1574187619, "post_id": 56689880, "comment_id": 104139457, "body": "in version 1.3.50+, you no longer need both kapt and compile"}], "tags": [], "owner": {"reputation": 755, "user_id": 6316307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc9a2ba5a2d7e6eb019d92cd08f0fa4?s=128&d=identicon&r=PG&f=1", "display_name": "EJJ", "link": "https://stackoverflow.com/users/6316307/ejj"}, "is_accepted": false, "score": 1, "last_activity_date": 1561046473, "creation_date": 1561046473, "answer_id": 56689880, "question_id": 45953118, "link": "https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties/56689880#56689880", "title": "Kotlin &amp; Spring Boot @ConfigurationProperties", "body": "<p>application.properties</p>\n\n<pre><code>metro.metro2.url= ######\n</code></pre>\n\n<p>Metro2Config.kt</p>\n\n<pre><code>@Component\n@ConfigurationProperties(prefix = \"metro\")\ndata class Metro2PropertyConfiguration(\n\n        val metro2: Metro2 = Metro2()\n)\n\ndata class Metro2(\n    var url: String ?= null\n)\n</code></pre>\n\n<p>build.gradle</p>\n\n<pre><code>Plugins:\nid 'org.jetbrains.kotlin.kapt' version '1.2.31'\n\n// kapt dependencies required for IntelliJ auto complete of kotlin config properties class\n    kapt \"org.springframework.boot:spring-boot-configuration-processor\"\n    compile \"org.springframework.boot:spring-boot-configuration-processor\"\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 293, "user_id": 695181, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8uruB.jpg?s=128&g=1", "display_name": "Matt Kerr", "link": "https://stackoverflow.com/users/695181/matt-kerr"}, "edited": false, "score": 4, "creation_date": 1574187511, "post_id": 58596161, "comment_id": 104139402, "body": "It&#39;s my understanding that kapt has replaced annotationProcessor. You would use Kotlin 1.3.50+ and <code>plugins { ... kotlin(&quot;kapt&quot;) }</code> and <code>kapt(...)</code> to wrap the dependency string instead of <code>annotationProcessor(...)</code>"}], "tags": [], "owner": {"reputation": 1149, "user_id": 9834603, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aqJmC30usX4/AAAAAAAAAAI/AAAAAAAACdE/ih05zPS4W5o/photo.jpg?sz=128", "display_name": "Dmitry Kaltovich", "link": "https://stackoverflow.com/users/9834603/dmitry-kaltovich"}, "is_accepted": true, "score": 38, "last_activity_date": 1572286199, "last_edit_date": 1572286199, "creation_date": 1572285829, "answer_id": 58596161, "question_id": 45953118, "link": "https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties/58596161#58596161", "title": "Kotlin &amp; Spring Boot @ConfigurationProperties", "body": "<p>With new <strong>Spring Boot 2.2</strong> you can do like so:</p>\n\n<pre><code>@ConstructorBinding\n@ConfigurationProperties(prefix = \"swagger\")\ndata class SwaggerProp(\n    val title: String, val description: String, val version: String\n)\n</code></pre>\n\n<p>And don't forget to include this in your dependencies in <code>build.gradle.kts</code>:</p>\n\n<pre><code>dependencies {\n  annotationProcessor(\"org.springframework.boot:spring-boot-configuration-processor\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 12900361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B3Ivd.jpg?s=128&g=1", "display_name": "mleister", "link": "https://stackoverflow.com/users/12900361/mleister"}, "is_accepted": false, "score": 2, "last_activity_date": 1594913580, "creation_date": 1594913580, "answer_id": 62938216, "question_id": 45953118, "link": "https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties/62938216#62938216", "title": "Kotlin &amp; Spring Boot @ConfigurationProperties", "body": "<pre class=\"lang-kotlin prettyprint-override\"><code>@ConstructorBinding\n@ConfigurationProperties(prefix = &quot;your.prefix&quot;)\ndata class AppProperties (\n    val invoiceBaseDir: String,\n    val invoiceOutputFolderPdf: String,\n    val staticFileFolder: String\n)\n</code></pre>\n<p>Don't forget to add <code>@ConfigurationPropertiesScan</code></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@ConfigurationPropertiesScan\nclass Application\n\nfun main(args: Array&lt;String&gt;) {\n    runApplication&lt;Application&gt;(*args)\n}\n</code></pre>\n<p>And finally the application.properties file:</p>\n<pre><code>your.prefix.invoiceBaseDir=D:/brot-files\nyour.prefix.invoiceOutputFolderPdf=invoices-pdf\nyour.prefix.staticFileFolder=static-resources\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1614894800, "last_edit_date": 1614894800, "creation_date": 1614894073, "answer_id": 66483459, "question_id": 45953118, "link": "https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties/66483459#66483459", "title": "Kotlin &amp; Spring Boot @ConfigurationProperties", "body": "<p>In addition to what's already been said, note that <code>val</code> and <code>@ConstructorBinding</code> has some limitations. You cannot alias one variable to another. Let's say you're running in Kubernetes and want to capture the hostname, which is given by the env var <code>HOSTNAME</code>. The easiest way to do this is to apply <code>@Value(&quot;\\${HOSTNAME}:)&quot;</code> to a property, but it only works for a mutable property and without constructor binding.</p>\n<p>See <a href=\"https://stackoverflow.com/q/66483609/839733\">@ConstructorBinding with immutable properties don&#39;t work with @Value in Spring Boot Kotlin @ConfigurationProperties</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 4606396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc1c5adee88f5c036b3389f83cf9e7f3?s=128&d=identicon&r=PG&f=1", "display_name": "VlasovArtem", "link": "https://stackoverflow.com/users/4606396/vlasovartem"}, "is_accepted": false, "score": 1, "last_activity_date": 1616954198, "creation_date": 1616954198, "answer_id": 66844484, "question_id": 45953118, "link": "https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties/66844484#66844484", "title": "Kotlin &amp; Spring Boot @ConfigurationProperties", "body": "<p>On Spring Boot 2.4.3 with Kotlin 1.4.3 the next approach is no longer working (maybe because of a bug):</p>\n<pre><code>import org.springframework.boot.autoconfigure.SpringBootApplication\nimport org.springframework.boot.context.properties.EnableConfigurationProperties\n\n@SpringBootApplication\n@EnableConfigurationProperties(TestProperties::class)\nclass Application\n\nfun main(args: Array&lt;String&gt;) {\n    runApplication&lt;Application&gt;(*args)\n}\n</code></pre>\n<pre><code>import org.springframework.boot.context.properties.ConfigurationProperties\nimport org.springframework.boot.context.properties.ConstructorBinding\n\n@ConfigurationProperties(prefix = &quot;test&quot;)\n@ConstructorBinding\ndata class TestProperties(\n    val value: String\n)\n</code></pre>\n<p>The code above starts working after implying one of the next two approaches:</p>\n<ol>\n<li>Add dependency</li>\n</ol>\n<pre><code>implementation(&quot;org.jetbrains.kotlin:kotlin-reflect&quot;)\n</code></pre>\n<ol start=\"2\">\n<li>Update Properties class</li>\n</ol>\n<pre><code>import org.springframework.boot.context.properties.ConfigurationProperties\nimport org.springframework.boot.context.properties.ConstructorBinding\n\n@ConfigurationProperties(prefix = &quot;test&quot;)\ndata class TestProperties @ConstructorBinding constructor(\n    val value: String\n)\n</code></pre>\n<p>The problem happens at the line org/springframework/boot/context/properties/ConfigurationPropertiesBindConstructorProvider.java#68</p>\n"}], "owner": {"reputation": 5641, "user_id": 1726507, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/7b7cd4fbecd030677b7c29c99d29d1ca?s=128&d=identicon&r=PG", "display_name": "Sonique", "link": "https://stackoverflow.com/users/1726507/sonique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31090, "favorite_count": 4, "accepted_answer_id": 58596161, "answer_count": 9, "score": 54, "last_activity_date": 1616954198, "creation_date": 1504073371, "last_edit_date": 1504095438, "question_id": 45953118, "link": "https://stackoverflow.com/questions/45953118/kotlin-spring-boot-configurationproperties", "title": "Kotlin &amp; Spring Boot @ConfigurationProperties", "body": "<p>How to properly initialize ConfigurationProperties in <strong>Spring Boot</strong> with <strong>Kotlin</strong>?</p>\n\n<p><em>Currently</em> I do like in the example below:</p>\n\n<pre><code> @ConfigurationProperties(\"app\")\n class Config {\n     var foo: String? = null\n }\n</code></pre>\n\n<p>But it looks pretty ugly and actually <code>foo</code> is not a <code>var</code>iable, foo is <strong>constant</strong> <code>val</code>ue and <em>should be initialized during startup and will not change in the future</em>. </p>\n"}, {"tags": ["android", "android-fragments", "navigation", "kotlin", "navigation-drawer"], "answers": [{"comments": [{"owner": {"reputation": 5865, "user_id": 3676184, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e3d0f66167a77f42ccbc191a91f163fd?s=128&d=identicon&r=PG&f=1", "display_name": "Pavya", "link": "https://stackoverflow.com/users/3676184/pavya"}, "reply_to_user": {"reputation": 208, "user_id": 6343980, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8e628831fb03516265f1894dbe9ff758?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Parmar", "link": "https://stackoverflow.com/users/6343980/megha-parmar"}, "edited": false, "score": 0, "creation_date": 1504074351, "post_id": 45953095, "comment_id": 78864518, "body": "remove onCreateOptionsMenu from MainActivity and add into fragment.. create separate menu files"}, {"owner": {"reputation": 208, "user_id": 6343980, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8e628831fb03516265f1894dbe9ff758?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Parmar", "link": "https://stackoverflow.com/users/6343980/megha-parmar"}, "edited": false, "score": 0, "creation_date": 1504078151, "post_id": 45953095, "comment_id": 78866706, "body": "This work fine with simple viewpager tab fragment. I have created separete onCreateOptionsmenu in fragment. But now problem i m getting with Navigation Drawer fragment files. When i come from navigation drawer fragment files back to my tab fragment then there visibilty also gone. How do i handle with Navigation drawer fragment files too also."}, {"owner": {"reputation": 5865, "user_id": 3676184, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e3d0f66167a77f42ccbc191a91f163fd?s=128&d=identicon&r=PG&f=1", "display_name": "Pavya", "link": "https://stackoverflow.com/users/3676184/pavya"}, "reply_to_user": {"reputation": 208, "user_id": 6343980, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8e628831fb03516265f1894dbe9ff758?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Parmar", "link": "https://stackoverflow.com/users/6343980/megha-parmar"}, "edited": false, "score": 0, "creation_date": 1504080530, "post_id": 45953095, "comment_id": 78868162, "body": "try with separete onCreateOptionsmenu  for navigation fragment"}, {"owner": {"reputation": 208, "user_id": 6343980, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8e628831fb03516265f1894dbe9ff758?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Parmar", "link": "https://stackoverflow.com/users/6343980/megha-parmar"}, "edited": false, "score": 0, "creation_date": 1504091994, "post_id": 45953095, "comment_id": 78875805, "body": "I have created separate menu also for navigation drawer but its not working"}, {"owner": {"reputation": 5865, "user_id": 3676184, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e3d0f66167a77f42ccbc191a91f163fd?s=128&d=identicon&r=PG&f=1", "display_name": "Pavya", "link": "https://stackoverflow.com/users/3676184/pavya"}, "reply_to_user": {"reputation": 208, "user_id": 6343980, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8e628831fb03516265f1894dbe9ff758?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Parmar", "link": "https://stackoverflow.com/users/6343980/megha-parmar"}, "edited": false, "score": 0, "creation_date": 1504092114, "post_id": 45953095, "comment_id": 78875898, "body": "have you added onCreate in navigation fragment ?"}, {"owner": {"reputation": 208, "user_id": 6343980, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8e628831fb03516265f1894dbe9ff758?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Parmar", "link": "https://stackoverflow.com/users/6343980/megha-parmar"}, "edited": false, "score": 0, "creation_date": 1504092910, "post_id": 45953095, "comment_id": 78876538, "body": "yes, i have created OnCreate in fragment and then set sethasoptionmenu(true)"}, {"owner": {"reputation": 5865, "user_id": 3676184, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e3d0f66167a77f42ccbc191a91f163fd?s=128&d=identicon&r=PG&f=1", "display_name": "Pavya", "link": "https://stackoverflow.com/users/3676184/pavya"}, "reply_to_user": {"reputation": 208, "user_id": 6343980, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8e628831fb03516265f1894dbe9ff758?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Parmar", "link": "https://stackoverflow.com/users/6343980/megha-parmar"}, "edited": false, "score": 0, "creation_date": 1504093936, "post_id": 45953095, "comment_id": 78877209, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/153240/discussion-between-pavya-and-megha-parmar\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 5865, "user_id": 3676184, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e3d0f66167a77f42ccbc191a91f163fd?s=128&d=identicon&r=PG&f=1", "display_name": "Pavya", "link": "https://stackoverflow.com/users/3676184/pavya"}, "is_accepted": false, "score": 0, "last_activity_date": 1504073267, "creation_date": 1504073267, "answer_id": 45953095, "question_id": 45952953, "link": "https://stackoverflow.com/questions/45952953/unable-to-add-and-remove-menu-option-from-fragment-and-navigation-drawer/45953095#45953095", "title": "Unable to add and remove menu option from fragment and navigation drawer", "body": "<p>first override onCreate Method</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setHasOptionsMenu(true)\n    }\n</code></pre>\n\n<p>And then inflate menu in your fragment</p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu?, inflater: MenuInflater?) {\n        super.onCreateOptionsMenu(menu, inflater)\n        menu!!.clear()\n        inflater!!.inflate(R.menu.main, menu)\n    }\n</code></pre>\n"}], "owner": {"reputation": 208, "user_id": 6343980, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8e628831fb03516265f1894dbe9ff758?s=128&d=identicon&r=PG&f=1", "display_name": "Megha Parmar", "link": "https://stackoverflow.com/users/6343980/megha-parmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 905, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504082754, "creation_date": 1504072723, "last_edit_date": 1504082754, "question_id": 45952953, "link": "https://stackoverflow.com/questions/45952953/unable-to-add-and-remove-menu-option-from-fragment-and-navigation-drawer", "title": "Unable to add and remove menu option from fragment and navigation drawer", "body": "<p>I am getting an issue of hiding and adding the menu item in fragment and navigation drawer as I in my application I have logout and adding contact menu and I want to set logout option in all but don't need an adding contact button in all screen. As my application contains four view pager tab fragment and navigation drawer. I have added my menu through menu XML file. \nAnd I want my logout option in all fragment in navigation drawer but adding contact in only on my first tab fragment.</p>\n\n<p>Here is code of Main  Activity:</p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu): Boolean {\nval menuInflater = menuInflater.inflate(R.menu.main, menu)\nval menuLogout = menu.findItem(R.id.logout)\nval menuadd = menu.findItem(R.id.iadd_contact)\n\nreturn super.onCreateOptionsMenu(menu)\n}\n\noverride fun onOptionsItemSelected(item: android.view.MenuItem): Boolean {\nwhen (item.itemId) {\n    R.id.logout -&gt; {\n\n                postLogout(path, params) { response -&gt;\n                }\n            }\n\n\n        return true\n\n    R.id.iadd_contact -&gt; {\n        val intent = Intent(Intent.ACTION_INSERT)\n        intent.setType(ContactsContract.Contacts.CONTENT_TYPE)\n\n        startActivity(intent)\n        return true\n    }\n}\nreturn super.onOptionsItemSelected(item)\n}\n</code></pre>\n\n<p>What is going with that when I move from fragment A to Fragment B i want only logout button enable and add contact disable and then when I again go revert back from Fragment B to Fragment A my add contact menu also get disable but that I want to be in Fragment A only and same as it happens when I open my navigation drawer </p>\n\n<p>And in fragment I have set my code like this:</p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu?, inflater: MenuInflater?) {\nsuper.onCreateOptionsMenu(menu, inflater)\n\nmenu!!.removeItem(R.id.iadd_contact)\n}\n</code></pre>\n\n<p>and it oncreateview:</p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n// TODO Auto-generated method stub\nsetHasOptionsMenu(false)\nrootv = inflater!!.inflate(R.layout.edit_profile, container, false)\nactivity.invalidateOptionsMenu()\nreturn rootv\n}\n</code></pre>\n\n<p>Simply I just want my  <code>R.id.iadd_contact</code> in my first tab fragment to enable and in all other fragment disable so due to fragment back stack or moving again from another fragment to my first tab fragment my add  <code>R.id.iadd_contact</code> get also removed.</p>\n"}, {"tags": ["kotlin", "corda"], "comments": [{"owner": {"reputation": 23867, "user_id": 4620025, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hKFnG.jpg?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4620025/joel"}, "edited": false, "score": 0, "creation_date": 1504082078, "post_id": 45952587, "comment_id": 78869063, "body": "This should be fine. I suspect your issue lies elsewhere. Can you post the rest of the flow?"}, {"owner": {"reputation": 2562, "user_id": 2310673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9c52e255299dc548825c41aebcf3fbc?s=128&d=identicon&r=PG", "display_name": "bakriOnFire", "link": "https://stackoverflow.com/users/2310673/bakrionfire"}, "reply_to_user": {"reputation": 23867, "user_id": 4620025, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hKFnG.jpg?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4620025/joel"}, "edited": false, "score": 0, "creation_date": 1504089329, "post_id": 45952587, "comment_id": 78873907, "body": "updated the code of whole flow.."}, {"owner": {"reputation": 23867, "user_id": 4620025, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hKFnG.jpg?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4620025/joel"}, "edited": false, "score": 0, "creation_date": 1504091843, "post_id": 45952587, "comment_id": 78875707, "body": "Thanks - can you also add the full stack trace? Since I don&#39;t see anything untoward above, I&#39;m guessing the issue might be in the contract code (which ` CollectSignaturesFlow` will invoke). As Stefano says, check if you&#39;re making a call to <code>single</code> on the outputs in your contract(s)."}], "answers": [{"comments": [{"owner": {"reputation": 2562, "user_id": 2310673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9c52e255299dc548825c41aebcf3fbc?s=128&d=identicon&r=PG", "display_name": "bakriOnFire", "link": "https://stackoverflow.com/users/2310673/bakrionfire"}, "edited": false, "score": 0, "creation_date": 1504094075, "post_id": 45958563, "comment_id": 78877336, "body": "yes i had used val out = tx.outputsOfType&lt;IouState&gt;().single()             &quot;The sender and the recipient cannot be the same entity.&quot; using (out.party1!= out.party2)..how do i change it..get(0) and get (1) throws an exception.."}, {"owner": {"reputation": 685, "user_id": 8344252, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QmV0W.jpg?s=128&g=1", "display_name": "Stefano.Maffullo", "link": "https://stackoverflow.com/users/8344252/stefano-maffullo"}, "reply_to_user": {"reputation": 2562, "user_id": 2310673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9c52e255299dc548825c41aebcf3fbc?s=128&d=identicon&r=PG", "display_name": "bakriOnFire", "link": "https://stackoverflow.com/users/2310673/bakrionfire"}, "edited": false, "score": 0, "creation_date": 1504105346, "post_id": 45958563, "comment_id": 78886404, "body": "You can&#39;t use .single() and then create two outputs of type IouState, first thing first you have to choose if you can output multiple IOUState or only one IOUState"}, {"owner": {"reputation": 23867, "user_id": 4620025, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hKFnG.jpg?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4620025/joel"}, "edited": false, "score": 0, "creation_date": 1504178873, "post_id": 45958563, "comment_id": 78919604, "body": "<code>get(0)</code> shouldn&#39;t throw an exception. What exception are you seeing bakriOnFire?"}, {"owner": {"reputation": 685, "user_id": 8344252, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QmV0W.jpg?s=128&g=1", "display_name": "Stefano.Maffullo", "link": "https://stackoverflow.com/users/8344252/stefano-maffullo"}, "reply_to_user": {"reputation": 2562, "user_id": 2310673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9c52e255299dc548825c41aebcf3fbc?s=128&d=identicon&r=PG", "display_name": "bakriOnFire", "link": "https://stackoverflow.com/users/2310673/bakrionfire"}, "edited": false, "score": 0, "creation_date": 1504180898, "post_id": 45958563, "comment_id": 78921029, "body": "@bakriOnFire you have to perform a check for a single input, then cast to single. If you don&#39;t understand you can pm me"}], "tags": [], "owner": {"reputation": 685, "user_id": 8344252, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QmV0W.jpg?s=128&g=1", "display_name": "Stefano.Maffullo", "link": "https://stackoverflow.com/users/8344252/stefano-maffullo"}, "is_accepted": true, "score": 4, "last_activity_date": 1504090455, "creation_date": 1504090455, "answer_id": 45958563, "question_id": 45952587, "link": "https://stackoverflow.com/questions/45952587/corda-adding-muliple-output-states-in-a-single-transaction/45958563#45958563", "title": "Corda: Adding muliple output states in a single transaction", "body": "<p>Probably you used a .single() cast in one of your contracts that is now throwing an exception </p>\n"}], "owner": {"reputation": 2562, "user_id": 2310673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9c52e255299dc548825c41aebcf3fbc?s=128&d=identicon&r=PG", "display_name": "bakriOnFire", "link": "https://stackoverflow.com/users/2310673/bakrionfire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 45958563, "answer_count": 1, "score": 2, "last_activity_date": 1504095490, "creation_date": 1504071124, "last_edit_date": 1504095490, "question_id": 45952587, "link": "https://stackoverflow.com/questions/45952587/corda-adding-muliple-output-states-in-a-single-transaction", "title": "Corda: Adding muliple output states in a single transaction", "body": "<p>In our use case we have to add two output states with different contracts to a transaction. I tried to add multiple states to transaction in <code>withItems</code>. I call this flow from an RPC but it throws an exception as <code>java.lang.IllegalArgumentException: List has more than one element.</code> while signing the transaction.</p>\n\n<p>This is how I am adding multiple output states:-</p>\n\n<pre><code>val outputstate1 = IouState1(dataModel1, me, otherParty)\nval outputstate2 = IouState2(dataModel2, me, otherParty)\nval cmd1 = Command(IouContract1.Commands.Create(), state1.participants.map { it.owningKey })\nval cmd2 = Command(IouContract2.Commands.Initiated(), state2.participants.map { it.owningKey })\nval txBuilder = TransactionBuilder(TransactionType.General, notary).withItems(state1, state2, cmd1, cmd2)\nprogressTracker.currentStep = VERIFYING_TRANSACTION\n\n// Verifying the transaction.\ntxBuilder.toWireTransaction().toLedgerTransaction(serviceHub).verify()\n\nprogressTracker.currentStep = SIGNING_TRANSACTION\n// Signing the transaction.\nval partSignedTx = serviceHub.signInitialTransaction(txBuilder)\n\nprogressTracker.currentStep = GATHERING_SIGS\n// Send the state to the counterparty, and receive it back with their signature.\nval fullySignedTx = subFlow(CollectSignaturesFlow(partSignedTx, GATHERING_SIGS.childProgressTracker()))\n\n// Finalising the transaction.\nprogressTracker.currentStep = FINALISING_TRANSACTION\n// Notarise and record the transaction in both parties' vaults.\nreturn subFlow(FinalityFlow(fullySignedTx, FINALISING_TRANSACTION.childProgressTracker())).single()\n</code></pre>\n\n<p>Stack trace:-</p>\n\n<pre><code>net.corda.core.flows.FlowException: java.lang.IllegalArgumentException: List has more than one element.\n    at net.corda.core.flows.SignTransactionFlow.call(CollectSignaturesFlow.kt:202) ~[corda-core-0.14.0.jar:?]\n    at net.corda.core.flows.SignTransactionFlow.call(CollectSignaturesFlow.kt:175) ~[corda-core-0.14.0.jar:?]\n    at net.corda.core.flows.FlowLogic.subFlow(FlowLogic.kt:166) ~[corda-core-0.14.0.jar:?]\n    at com.dwlabcorda.salescontract.LOCReceiverFlow.call(LOCContractFlow.kt:107) ~[tradefinancecorda-0.1.jar:?]\n    at com.dwlabcorda.salescontract.LOCReceiverFlow.call(LOCContractFlow.kt:95) ~[tradefinancecorda-0.1.jar:?]\n    at net.corda.node.services.statemachine.FlowStateMachineImpl.run(FlowStateMachineImpl.kt:101) [corda-node-0.14.0.jar:?]\n    at net.corda.node.services.statemachine.FlowStateMachineImpl.run(FlowStateMachineImpl.kt:33) [corda-node-0.14.0.jar:?]\n    at co.paralleluniverse.fibers.Fiber.run1(Fiber.java:1067) [quasar-core-0.7.6-jdk8.jar:0.7.6]\n    at co.paralleluniverse.fibers.Fiber.exec(Fiber.java:767) [quasar-core-0.7.6-jdk8.jar:0.7.6]\n    at co.paralleluniverse.fibers.RunnableFiberTask.doExec(RunnableFiberTask.java:100) [quasar-core-0.7.6-jdk8.jar:0.7.6]\n    at co.paralleluniverse.fibers.RunnableFiberTask.run(RunnableFiberTask.java:91) [quasar-core-0.7.6-jdk8.jar:0.7.6]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_144]\n    at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_144]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(Unknown Source) [?:1.8.0_144]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) [?:1.8.0_144]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [?:1.8.0_144]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [?:1.8.0_144]\n    at net.corda.node.utilities.AffinityExecutor$ServiceAffinityExecutor$1$thread$1.run(AffinityExecutor.kt:69) [corda-node-0.14.0.jar:?]\nCaused by: java.lang.IllegalArgumentException: List has more than one element.\n    at kotlin.collections.CollectionsKt___CollectionsKt.single(_Collections.kt:471) ~[kotlin-stdlib-1.1.1.jar:1.1.1]\n    at com.dwlabcorda.salescontract.LOCReceiverFlow$call$signTransactionFlow$1.checkTransaction(LOCContractFlow.kt:100) ~[tradefinancecorda-0.1.jar:?]\n    at net.corda.core.flows.SignTransactionFlow.call(CollectSignaturesFlow.kt:199) ~[corda-core-0.14.0.jar:?]\n    ... 17 more\n</code></pre>\n"}, {"tags": ["android", "android-recyclerview", "kotlin", "adapter", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1504069107, "post_id": 45951792, "comment_id": 78862533, "body": "<code>findViewById</code> finds already created view. So that means you are reusing it. There is no performance issue that your are talking about."}], "answers": [{"comments": [{"owner": {"reputation": 2311, "user_id": 133309, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4afb5408b11fd0e816ed66538ffc9263?s=128&d=identicon&r=PG", "display_name": "Frank Harper", "link": "https://stackoverflow.com/users/133309/frank-harper"}, "edited": false, "score": 0, "creation_date": 1537305785, "post_id": 45953667, "comment_id": 91734636, "body": "If you add a line of code for each View, you might as well not use Kotlin Android extensions. If you wrap findViewById() in an extension function it will be type safe as well. <code>val title = itemView.find&lt;TextView&gt;(R.id.title)</code>"}, {"owner": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "reply_to_user": {"reputation": 2311, "user_id": 133309, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4afb5408b11fd0e816ed66538ffc9263?s=128&d=identicon&r=PG", "display_name": "Frank Harper", "link": "https://stackoverflow.com/users/133309/frank-harper"}, "edited": false, "score": 0, "creation_date": 1538934944, "post_id": 45953667, "comment_id": 92309502, "body": "@FrankHarper if <code>R.id.title</code> is not pointing to a TextView, let say pointed to ImageView. <code>itemView.find&lt;TextView&gt;(R.id.title)</code> will still compile and will cause run-time crash while using Kotlin Android extensions will throw error at compile time."}], "tags": [], "owner": {"reputation": 953, "user_id": 6763724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KasE6zPK7mA/AAAAAAAAAAI/AAAAAAAAABQ/r3oBivz_Atg/photo.jpg?sz=128", "display_name": "Gary LO", "link": "https://stackoverflow.com/users/6763724/gary-lo"}, "is_accepted": false, "score": 12, "last_activity_date": 1504075328, "creation_date": 1504075328, "answer_id": 45953667, "question_id": 45951792, "link": "https://stackoverflow.com/questions/45951792/kotlin-android-extensions-in-viewholder/45953667#45953667", "title": "kotlin-android-extensions in ViewHolder", "body": "<p>From my understanding, kotlin-android-extensions is just a statically imported extension(generated codes) to replace View.findViewById.</p>\n\n<p>I would recommend you to store the references in your view holder. </p>\n\n<pre><code>class MyViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n   val title: TextView = itemView.title\n   val desc: TextView = itemView.desc\n\n   fun bindata(text: SingleText){\n       title.text = text.title\n       desc.text = text.desc\n   }\n}\n</code></pre>\n\n<p>One of the benefits of this approach is any type mismatch will be discovered in compile time!</p>\n"}, {"tags": [], "owner": {"reputation": 11733, "user_id": 4586742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRXQc.jpg?s=128&g=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4586742/bob"}, "is_accepted": true, "score": 31, "last_activity_date": 1504097921, "last_edit_date": 1504097921, "creation_date": 1504097606, "answer_id": 45961003, "question_id": 45951792, "link": "https://stackoverflow.com/questions/45951792/kotlin-android-extensions-in-viewholder/45961003#45961003", "title": "kotlin-android-extensions in ViewHolder", "body": "<p>View caching in a <code>ViewHolder</code> or any custom class is possible only from <a href=\"https://blog.jetbrains.com/kotlin/2017/08/kotlin-1-1-4-is-out/\" rel=\"noreferrer\">Kotlin 1.1.4</a> and it's currently in the experimental stage.</p>\n\n<ol>\n<li>Update your Kotlin version in your root level build.gradle file</li>\n</ol>\n\n<p><code>classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.1.4-3\"</code></p>\n\n<ol start=\"2\">\n<li>Add these lines in your app <code>build.gradle</code>:</li>\n</ol>\n\n<p><code>androidExtensions {\n    experimental = true\n}</code></p>\n\n<ol start=\"3\">\n<li><p>Inherit your <code>ViewHolder</code> class from <code>LayoutContainer</code>. <code>LayoutContainer</code> is an interface available in <code>kotlinx.android.extensions</code> package. </p></li>\n<li><p>Add the below imports, where <code>view_item</code> is the layout name. </p></li>\n</ol>\n\n<p><code>import kotlinx.android.synthetic.main.view_item.*\nimport kotlinx.android.synthetic.main.view_item.view.*</code></p>\n\n<p>The entire <code>ViewHolder</code> class looks like:</p>\n\n<pre><code>class ViewHolder(override val containerView: View) : RecyclerView.ViewHolder(containerView),\n        LayoutContainer {\n\n    fun bind(title: String) {\n        itemTitle.text = \"Hello Kotlin!\" // itemTitle is the id of the TextView in the layout \n    }\n}\n</code></pre>\n\n<p>The decompiled Java code shows that this class uses cache for the Views:</p>\n\n<pre><code>    public final void bind(@NotNull String title) {\n          Intrinsics.checkParameterIsNotNull(title, \"title\");\n          ((TextView)this._$_findCachedViewById(id.itemTitle)).setText((CharSequence)\"Hello Kotlin!\");\n    }\n</code></pre>\n\n<p>Further readings: <a href=\"https://github.com/Kotlin/KEEP/blob/master/proposals/android-extensions-entity-caching.md\" rel=\"noreferrer\">KEEP proposal</a>, <a href=\"https://antonioleiva.com/kotlin-android-extensions/\" rel=\"noreferrer\">an awesome tutorial</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 199, "user_id": 9832581, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "abhilasha Yadav", "link": "https://stackoverflow.com/users/9832581/abhilasha-yadav"}, "is_accepted": false, "score": -1, "last_activity_date": 1527061010, "last_edit_date": 1527061010, "creation_date": 1527060652, "answer_id": 50482368, "question_id": 45951792, "link": "https://stackoverflow.com/questions/45951792/kotlin-android-extensions-in-viewholder/50482368#50482368", "title": "kotlin-android-extensions in ViewHolder", "body": "<p>In your project gradle:-</p>\n\n<pre><code> buildscript {\n        ext.kotlin_version = '1.2.41'\n\n        repositories {\n            google()\n            jcenter()\n        }\n</code></pre>\n\n<p>and in your app gradle:</p>\n\n<pre><code>apply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {}\ndependencies {\n  compile \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n</code></pre>\n\n<p>After these you can use in you activity :</p>\n\n<pre><code>import kotlinx.android.synthetic.main.unit_preferences_activity.*\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>  private fun setClickListener() {\n            rlCaloriesBurnt.setOnClickListener{\n                launchActivity(CaloriesBurntPrefreenceUnit::class.java)\n            }\n\n            rlDistanceTravelled.setOnClickListener{\n\n           tvDistanceUnit.text=resources.getString(R.string.km)\n\n                launchActivity(DistanceTravelledUnit::class.java)\n            }\n\n            rlWaterConsumption.setOnClickListener{\n                launchActivity(WaterPreferenceUnit::class.java)\n            }\n            backArrow.setOnClickListener{\n                finish()\n            }\n\n        }\n</code></pre>\n"}], "owner": {"reputation": 626, "user_id": 6596737, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/qmdFm.jpg?s=128&g=1", "display_name": "Werb", "link": "https://stackoverflow.com/users/6596737/werb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9039, "favorite_count": 3, "accepted_answer_id": 45961003, "answer_count": 3, "score": 15, "last_activity_date": 1527061010, "creation_date": 1504066327, "question_id": 45951792, "link": "https://stackoverflow.com/questions/45951792/kotlin-android-extensions-in-viewholder", "title": "kotlin-android-extensions in ViewHolder", "body": "<pre><code>class MyViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n\n       fun bindata(text: SingleText){\n            itemView.title.text = text.title\n            itemView.desc.text = text.desc\n       }\n}\n</code></pre>\n\n<p>like this code, Kotlin has any cache in android-extensions?</p>\n\n<p>when i decompile kotlin bytecode </p>\n\n<pre><code>public final void bindata(@NotNull SingleText text) {\n\n  Intrinsics.checkParameterIsNotNull(text, \"text\");\n  ((AppCompatTextView)this.itemView.findViewById(id.title)).setText((CharSequence)text.getTitle());\n  ((AppCompatTextView)this.itemView.findViewById(id.desc)).setText((CharSequence)text.getDesc());\n\n}\n</code></pre>\n\n<p>it means when i called binData in Adapter.onBindViewHolder(), it will called findViewById each time</p>\n\n<p>This significantly increases the loss of performance\uff0cand It does not achieve the purpose of layout reuse</p>\n\n<p>Kotlin has any cache logic in android-extensions with ViewHolder?</p>\n"}, {"tags": ["android", "kotlin", "android-notifications", "android-8.0-oreo"], "answers": [{"tags": [], "owner": {"reputation": 1849, "user_id": 7679573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czZkd.jpg?s=128&g=1", "display_name": "A. Shevchuk", "link": "https://stackoverflow.com/users/7679573/a-shevchuk"}, "is_accepted": true, "score": 0, "last_activity_date": 1504072250, "creation_date": 1504072250, "answer_id": 45952827, "question_id": 45951121, "link": "https://stackoverflow.com/questions/45951121/direct-reply-notification-starts-an-activity/45952827#45952827", "title": "Direct reply notification starts an activity", "body": "<p>You are using <code>PendingIntent.getActivity</code> which means you want to handle result from your operation on activity. It's logical that this activity need to start before proceeding. \nFrom documentation of <code>getActivity</code>:</p>\n\n<blockquote>\n  <p>Retrieve a PendingIntent that will start a new activity, like calling\n  Context.startActivity(Intent). Note that the activity will be started\n  outside of the context of an existing activity, so you must use the\n  Intent.FLAG_ACTIVITY_NEW_TASK launch flag in the Intent.</p>\n</blockquote>\n\n<p>You need to use <code>PendingIntent.getBroadcast</code>.</p>\n\n<p>For more information look <a href=\"https://developer.android.com/reference/android/app/PendingIntent.html#getActivity(android.content.Context,%20int,%20android.content.Intent,%20int)\" rel=\"nofollow noreferrer\">here </a></p>\n"}], "owner": {"reputation": 229, "user_id": 8310147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-wdmdy8VSsDQ/AAAAAAAAAAI/AAAAAAAAIaU/SNPkxadIBRs/photo.jpg?sz=128", "display_name": "Burak Taban", "link": "https://stackoverflow.com/users/8310147/burak-taban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 45952827, "answer_count": 1, "score": 1, "last_activity_date": 1504072250, "creation_date": 1504061379, "last_edit_date": 1504062544, "question_id": 45951121, "link": "https://stackoverflow.com/questions/45951121/direct-reply-notification-starts-an-activity", "title": "Direct reply notification starts an activity", "body": "<p>I am trying to get the text typed on the direct reply. I can get the text but when click the send text button, it opens the activity that intent shows.</p>\n\n<pre><code>val resultIntent = Intent(this, MessagesActivity::class.java)\nval stackBuilder = TaskStackBuilder.create(this)\n\nstackBuilder.addNextIntent(resultIntent)\n\nval resultPendingIntent = PendingIntent.getActivity(\n        this,\n        0,\n        resultIntent,\n        PendingIntent.FLAG_UPDATE_CURRENT\n)\n</code></pre>\n\n<p>And here's Notification Builder</p>\n\n<pre><code>val mBuilder = Notification.Builder(this, id)\n    .setContentTitle(data[\"title\"])\n    .setContentText(data[\"body\"])\n    .setLargeIcon(image)\n    .addAction(action)\n    .setSmallIcon(R.drawable.logo)\n    .setAutoCancel(true)\n</code></pre>\n\n<p>I don't want it to open the activity. Also I tried to use a intent service, it does not work. </p>\n"}, {"tags": ["java", "android", "kotlin", "android-geofence"], "answers": [{"comments": [{"owner": {"reputation": 1397, "user_id": 1216265, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/4B7JY.jpg?s=128&g=1", "display_name": "Ahmed S. Durrani", "link": "https://stackoverflow.com/users/1216265/ahmed-s-durrani"}, "edited": false, "score": 0, "creation_date": 1504121926, "post_id": 45950746, "comment_id": 78896080, "body": "Worked! Although I tried it but couldnt test it properly."}], "tags": [], "owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "is_accepted": true, "score": 1, "last_activity_date": 1504058660, "last_edit_date": 1504058660, "creation_date": 1504058283, "answer_id": 45950746, "question_id": 45950530, "link": "https://stackoverflow.com/questions/45950530/geofence-not-working-in-kotlin/45950746#45950746", "title": "Geofence not working in Kotlin", "body": "<p>I think your problem is the when clause in <code>onHandleIntent</code></p>\n\n<p>You essentially have</p>\n\n<pre><code>when (x) {\n        A or B -&gt; { ... }\n        C -&gt; { ... }\n        else -&gt; { ... }\n}\n</code></pre>\n\n<p>I think <code>Geofence.GEOFENCE_TRANSITION_ENTER</code> etc are <code>Int</code> types so you're ending up calling \"bitwise or\" on them using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/or.html\" rel=\"nofollow noreferrer\"><code>infix fun or(other: Int): Int (source)</code></a>.</p>\n\n<p>I think what you really want is:</p>\n\n<pre><code>when (x) {\n        A, B -&gt; { ... }\n        C -&gt; { ... }\n        else -&gt; { ... }\n}\n</code></pre>\n"}], "owner": {"reputation": 1397, "user_id": 1216265, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/4B7JY.jpg?s=128&g=1", "display_name": "Ahmed S. Durrani", "link": "https://stackoverflow.com/users/1216265/ahmed-s-durrani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 1, "accepted_answer_id": 45950746, "answer_count": 1, "score": 1, "last_activity_date": 1504058660, "creation_date": 1504056375, "question_id": 45950530, "link": "https://stackoverflow.com/questions/45950530/geofence-not-working-in-kotlin", "title": "Geofence not working in Kotlin", "body": "<p>Geofence not working in Kotlin, though same code is working in Java. I am newbie to Kotlin hence not able to understand the issue. \nActually I am calling <code>MainGeofence.kt</code> service class from an activity <code>MainActivity</code> following is the code</p>\n\n<p><strong>MainGeofence.kt</strong></p>\n\n<pre><code> public class MainGeofence : IntentService(\"MyService\"), LocationListener {\n\n    internal var mGeofencePendingIntent: PendingIntent? = null\n    private var mGeofenceList: ArrayList&lt;Geofence&gt;? = null\n    private var mGoogleApiClient: GoogleApiClient? = null\n    val TAG = \"Activity\"\n    internal lateinit var mLocationRequest: LocationRequest\n    internal var currentLatitude = &lt;&lt;lat value\n    internal var currentLongitude = &lt;&lt;long value\n\n    override fun onCreate() {\n        super.onCreate()\n    }\n\n    override fun onHandleIntent(p0: Intent?) {\n        mGeofenceList = ArrayList&lt;Geofence&gt;()\n\n        if (GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(this)\n                == ConnectionResult.SUCCESS) {\n            initGoogleAPIClient()\n\n            createGeofences(currentLatitude, currentLongitude)\n        } else {\n            Log.e(TAG, \"Your Device doesn't support Google Play Services.\")\n        }\n\n        mLocationRequest = LocationRequest.create()\n                .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY)\n                .setInterval(1 * 1000)\n                .setFastestInterval(1 * 1000)\n    }\n\n    public fun initGoogleAPIClient(): Unit {\n        mGoogleApiClient = GoogleApiClient.Builder(this)\n                .addApi(API)\n                .addConnectionCallbacks(connectionAddListener)\n                .addOnConnectionFailedListener(connectionFailedListener)\n                .build()\n        mGoogleApiClient?.connect()\n    }\n\n    private val connectionAddListener = object : GoogleApiClient.ConnectionCallbacks {\n        @SuppressLint(\"MissingPermission\")\n        override fun onConnected(bundle: Bundle?) {\n            Log.i(TAG, \"onConnected\")\n\n            @SuppressLint(\"MissingPermission\")\n            val location = FusedLocationApi.getLastLocation(mGoogleApiClient)\n\n            if (location == null) {\n                FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, this@MainGeofence)\n            } else {\n                //If everything went fine lets get latitude and longitude\n                currentLatitude = location.latitude\n                currentLongitude = location.longitude\n\n                Log.i(TAG, currentLatitude.toString() + \" WORKS \" + currentLongitude)\n\n                //createGeofences(currentLatitude, currentLongitude);\n                //registerGeofences(mGeofenceList);\n            }\n\n            try {\n                GeofencingApi.addGeofences(\n                        mGoogleApiClient,\n                        getGeofencingRequest(),\n                        getGeofencePendingIntent()\n                ).setResultCallback(ResultCallback&lt;Status&gt; { status -&gt;\n                    if (status.isSuccess) {\n                        Log.i(TAG, \"Saving Geofence\")\n\n                    } else {\n                        Log.e(TAG, \"Registering geofence failed: \" + status.statusMessage +\n                                \" : \" + status.statusCode)\n                    }\n                })\n\n            } catch (securityException: SecurityException) {\n                // Catch exception generated if the app does not use ACCESS_FINE_LOCATION permission.\n                Log.e(TAG, \"Error\")\n            }\n\n        }\n\n        override fun onConnectionSuspended(i: Int) {\n\n            Log.e(TAG, \"onConnectionSuspended\")\n\n        }\n    }\n\n    /**\n     * Create a Geofence list\n     */\n    fun createGeofences(latitude: Double, longitude: Double) {\n        val id = UUID.randomUUID().toString()\n        println(\"latnlon \" + latitude + \" \" + longitude)\n        val fence = Geofence.Builder()\n                .setRequestId(id)\n                .setTransitionTypes(Geofence.GEOFENCE_TRANSITION_ENTER or Geofence.GEOFENCE_TRANSITION_EXIT)\n                .setCircularRegion(latitude, longitude, 50f)\n                .setExpirationDuration(Geofence.NEVER_EXPIRE)\n                .build()\n        mGeofenceList?.add(fence)\n    }\n\n    private fun getGeofencingRequest(): GeofencingRequest {\n        val builder = GeofencingRequest.Builder()\n        builder.setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER)\n        builder.addGeofences(mGeofenceList)\n        return builder.build()\n    }\n\n    private fun getGeofencePendingIntent(): PendingIntent {\n        // Reuse the PendingIntent if we already have it.\n        if (mGeofencePendingIntent != null) {\n            return mGeofencePendingIntent!!\n        }\n        val intent = Intent(this, GeofenceIntentService::class.java)\n        // We use FLAG_UPDATE_CURRENT so that we get the same pending intent back when\n        // calling addGeofences() and removeGeofences().\n        return PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT)\n    }\n\n    private val connectionFailedListener = GoogleApiClient.OnConnectionFailedListener { Log.e(TAG, \"onConnectionFailed\") }\n\n    override fun onLocationChanged(location: Location?) {\n\n        if (location != null) {\n            currentLatitude = location.latitude\n            currentLongitude = location.longitude\n            Log.i(TAG, \"onLocationChanged\")\n        }\n    }\n\n}\n</code></pre>\n\n<p><strong>MainActivity.kt</strong></p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        dummyBtn = findViewById(R.id.dummyBtn)\n        dummyTv = findViewById(R.id.dummyTv)\n\n        dummyBtn.setOnClickListener(View.OnClickListener {\n            //            startLocationUpdates()\n            startService(Intent(this, MainGeofence::class.java))\n              ...\n        })\n              ....\n    }\n</code></pre>\n\n<p>and <strong>GeofenceIntentService.kt</strong></p>\n\n<pre><code>public class GeofenceIntentService : IntentService(\"GeofenceIntentService\") {\n\n    private final var TAG: String = \"Geofence\"\n\n    override fun onHandleIntent(intent: Intent?) {\n        Log.i(TAG, \"onHandleIntent\")\n        val geofencingEvent = fromIntent(intent)\n        if (geofencingEvent.hasError()) {\n            Log.e(TAG, \"Goefencing Error \" + geofencingEvent.errorCode)\n            return\n        }\n        //Create AudioManager object to change phone profile\n        var am: AudioManager = getSystemService(Context.AUDIO_SERVICE) as AudioManager\n        // Get the transition type.\n        val geofenceTransition = geofencingEvent.geofenceTransition\n        Log.i(TAG, \"geofenceTransition = \" + geofenceTransition + \" Enter : \" +\n                Geofence.GEOFENCE_TRANSITION_ENTER + \"Exit : \" + Geofence.GEOFENCE_TRANSITION_EXIT)\n        when (geofenceTransition) {\n\n            Geofence.GEOFENCE_TRANSITION_ENTER or Geofence.GEOFENCE_TRANSITION_DWELL -&gt; {\n                showNotification(\"Entered\", \"Entered the Location\")\n                am.setRingerMode(AudioManager.RINGER_MODE_VIBRATE) //put ringer to vibration\n            }\n            Geofence.GEOFENCE_TRANSITION_EXIT -&gt; {\n                showNotification(\"Exited\", \"Exited the Location\")\n                am.setRingerMode(AudioManager.RINGER_MODE_NORMAL) //put ringer to normal\n            }\n            else -&gt; {\n                println(\"oh cow's eye! something bad happened!\")\n                Log.e(TAG, \"Error \")\n            }\n        }\n\n    }\n\n    fun showNotification(text: String, bigText: String) {\n\n        // 1. Create a NotificationManager\n        val notificationManager = this.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n\n        // 2. Create a PendingIntent for AllGeofencesActivity\n        val intent = Intent(this, MainActivity::class.java)\n        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP or Intent.FLAG_ACTIVITY_CLEAR_TOP)\n        val pendingNotificationIntent = PendingIntent.getActivity(this, 0,\n                intent, PendingIntent.FLAG_UPDATE_CURRENT)\n\n        // 3. Create and send a notification\n        val notification = NotificationCompat.Builder(this)\n                .setSmallIcon(R.mipmap.ic_launcher)\n                .setContentTitle(\"Title\")\n                .setContentText(text)\n                .setContentIntent(pendingNotificationIntent)\n                .setStyle(NotificationCompat.BigTextStyle().bigText(bigText))\n                .setPriority(NotificationCompat.PRIORITY_HIGH)\n                .setAutoCancel(true)\n                .build()\n        notificationManager.notify(0, notification)\n    }\n\n}\n</code></pre>\n\n<p>Geofence points seldom fires and that too only <code>Exit</code> one. But code works perfect in Java. Is this problem of language or implementation?\nHelp is greatly appreciated!</p>\n"}, {"tags": ["generics", "kotlin", "kotlin-reified-type-parameters"], "comments": [{"owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "edited": false, "score": 5, "creation_date": 1504049692, "post_id": 45949584, "comment_id": 78858165, "body": "Generic type parameters are erased at runtime, read about type erasure if you haven&#39;t already. Reified type parameters on inline functions not only inline the method body, but also the <b>generic type parameter</b> allowing you do to things like T::class.java (which you can&#39;t do with normal generic types). Putting as a comment because I don&#39;t have time to flesh out a full answer right now.."}, {"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 1, "creation_date": 1504056900, "post_id": 45949584, "comment_id": 78859890, "body": "It allows to get access to the concrete generic type of a function without relying on reflection and without having to pass the type as argument."}], "answers": [{"comments": [{"owner": {"reputation": 3229, "user_id": 2489327, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e07089b141dd0d9ee102a3b153bbb280?s=128&d=identicon&r=PG", "display_name": "hl3mukkel", "link": "https://stackoverflow.com/users/2489327/hl3mukkel"}, "edited": false, "score": 10, "creation_date": 1504210833, "post_id": 45952201, "comment_id": 78939101, "body": "Thanks for your comprehensive response! That actually makes sense. Just one thing I&#39;m wondering, why is reified needed if the function is being inlined anyway? It would leave the type erasure and inline the function anyway? This seems kind of a waste to me, if you inline the function you might aswell inline the type being used or am I seeing something wrong here?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 3229, "user_id": 2489327, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e07089b141dd0d9ee102a3b153bbb280?s=128&d=identicon&r=PG", "display_name": "hl3mukkel", "link": "https://stackoverflow.com/users/2489327/hl3mukkel"}, "edited": false, "score": 11, "creation_date": 1504213527, "post_id": 45952201, "comment_id": 78940276, "body": "Thanks for your feedback, actually I forget to mention something which might give you the answer: a normal inline function can be called from <i>Java</i> but one with a reified type parameter can&#39;t! I think this is a reason why not every type parameter of an inline function is automatically made reified."}, {"owner": {"reputation": 968, "user_id": 5511947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDYhnOYieM0/AAAAAAAAAAI/AAAAAAAAC7M/UTSsQXWNTj4/photo.jpg?sz=128", "display_name": "Vairavan", "link": "https://stackoverflow.com/users/5511947/vairavan"}, "edited": false, "score": 1, "creation_date": 1538056747, "post_id": 45952201, "comment_id": 92017001, "body": "What if the function is a mix of reified and non-reified parameters? That makes it not eligible to be called from Java anyways, why not reify all type parameters automatically? Why does kotlin need to have reified specified for all type parameters explicitly?"}, {"owner": {"reputation": 164, "user_id": 2211805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b3ef9341d9368e08e1f20556b801964?s=128&d=identicon&r=PG", "display_name": "seven", "link": "https://stackoverflow.com/users/2211805/seven"}, "edited": false, "score": 2, "creation_date": 1544780734, "post_id": 45952201, "comment_id": 94405399, "body": "what if upper callers in the stack need not json.toKotlinObject&lt;MyJsonType&gt;(), but json.toKotlinObject&lt;T&gt;() for different objects?"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 484, "last_activity_date": 1604058348, "last_edit_date": 1604058348, "creation_date": 1504068981, "answer_id": 45952201, "question_id": 45949584, "link": "https://stackoverflow.com/questions/45949584/how-does-the-reified-keyword-in-kotlin-work/45952201#45952201", "title": "How does the reified keyword in Kotlin work?", "body": "<h2>TL;DR: What is <code>reified</code> good for</h2>\n<pre><code>fun &lt;T&gt; myGenericFun(c: Class&lt;T&gt;) \n</code></pre>\n<p>In the body of a generic function like <code>myGenericFun</code>, you can't access the type <code>T</code> because it's <strong>only available at compile time</strong> but <a href=\"https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens\"><strong>erased</strong></a> at runtime. Therefore, if you want to use the generic type as a normal class in the function body you need to <em>explicitly pass the class as a parameter</em> as shown in <code>myGenericFun</code>.</p>\n<p>If you create an <code>inline</code> function with a <strong>reified</strong> <code>T</code>, the type of <code>T</code> can be accessed even at runtime, and thus you do not need to pass the <code>Class&lt;T&gt;</code> additionally. You can work with <code>T</code> as if it was a normal class - e.g. you might want to check whether a variable is an <em>instance of</em> <code>T</code>, which you can easily do then: <code>myVar is T</code>.</p>\n<p>Such an <code>inline</code> function with <code>reified</code> type <code>T</code> looks as follows:</p>\n<pre><code>inline fun &lt;reified T&gt; myGenericFun()\n</code></pre>\n<hr />\n<h2>How <code>reified</code> works</h2>\n<p>You can only use <code>reified</code> in combination with an <code>inline</code> function. By doing so, you instruct the compiler to copy the function's bytecode to every spot the function is invoked from (the compiler &quot;inlines&quot; the function). When you call an <code>inline</code> function with <code>reified</code> type, the compiler has to be able to know the actual type passed as a type argument so that it can modify the generated bytecode to use the corresponding class directly. Therefore a call like <code>myVar is T</code> becomes <code>myVar is String</code> in the bytecode (if the type argument is <code>String</code>).</p>\n<hr />\n<h2>Example</h2>\n<p>Let's have a look at an example that shows how helpful <code>reified</code> can be.\nWe want to create an extension function for <code>String</code> called <code>toKotlinObject</code> that tries to convert a JSON string to a plain Kotlin object with a type specified by the function's generic type <code>T</code>. We can use <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"noreferrer\"><code>com.fasterxml.jackson.module.kotlin</code></a> for this and the first approach is the following:</p>\n<p><strong>a) First approach without reified type</strong></p>\n<pre><code>fun &lt;T&gt; String.toKotlinObject(): T {\n      val mapper = jacksonObjectMapper()\n                                                        //does not compile!\n      return mapper.readValue(this, T::class.java)\n}\n</code></pre>\n<p>The <code>readValue</code> method takes a type that it is supposed to parse the <code>JsonObject</code> to. If we try to get the <code>Class</code> of the type parameter <code>T</code>, the compiler complains: <strong>&quot;Cannot use 'T' as reified type parameter. Use a class instead.&quot;</strong></p>\n<p><strong>b) Workaround with explicit <code>Class</code> parameter</strong></p>\n<pre><code>fun &lt;T: Any&gt; String.toKotlinObject(c: KClass&lt;T&gt;): T {\n    val mapper = jacksonObjectMapper()\n    return mapper.readValue(this, c.java)\n}\n</code></pre>\n<p>As a workaround, the <code>Class</code> of <code>T</code> can be made a method parameter, which then  used as an argument to <code>readValue</code>. This works and is a common pattern in generic Java code. It can be called as follows:</p>\n<pre><code>data class MyJsonType(val name: String)\n\nval json = &quot;&quot;&quot;{&quot;name&quot;:&quot;example&quot;}&quot;&quot;&quot;\njson.toKotlinObject(MyJsonType::class)\n</code></pre>\n<p><strong>c) The Kotlin way: <code>reified</code></strong></p>\n<p>Using an <code>inline</code> function with <code>reified</code> type parameter <code>T</code> makes it possible to implement the function differently:</p>\n<pre><code>inline fun &lt;reified T: Any&gt; String.toKotlinObject(): T {\n    val mapper = jacksonObjectMapper()\n    return mapper.readValue(this, T::class.java)\n}\n</code></pre>\n<p>There\u2019s no need to take the <code>Class</code> of <code>T</code> additionally, <code>T</code> can be used as if it was an ordinary class. For the client the code looks like this:</p>\n<pre><code>json.toKotlinObject&lt;MyJsonType&gt;()\n</code></pre>\n<h3>Important Note: Working with Java</h3>\n<p>An inlined function with <code>reified</code> type is <strong>not callable from Java</strong> code.</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 7460214, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/95ba227d4ceb48e47ab43ea02f0b788f?s=128&d=identicon&r=PG&f=1", "display_name": "Aury0n", "link": "https://stackoverflow.com/users/7460214/aury0n"}, "is_accepted": false, "score": 5, "last_activity_date": 1603772774, "last_edit_date": 1603772774, "creation_date": 1586962915, "answer_id": 61232002, "question_id": 45949584, "link": "https://stackoverflow.com/questions/45949584/how-does-the-reified-keyword-in-kotlin-work/61232002#61232002", "title": "How does the reified keyword in Kotlin work?", "body": "<p>SIMPLE</p>\n<p>*reified is to give permission to use at compilation time(to access T inside de function)</p>\n<p>eg:</p>\n<pre><code> inline fun &lt;reified T:Any&gt;  String.convertToObject(): T{\n\n    val gson = Gson()\n\n    return gson.fromJson(this,T::class.java)\n\n}\n</code></pre>\n<p>using like:</p>\n<pre><code>val jsonStringResponse = &quot;{&quot;name&quot;:&quot;bruno&quot; , &quot;age&quot;:&quot;14&quot; , &quot;world&quot;:&quot;mars&quot;}&quot;\nval userObject = jsonStringResponse.convertToObject&lt;User&gt;()\n  println(userObject.name)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15831, "user_id": 5925259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/89crf.jpg?s=128&g=1", "display_name": "Yogesh Umesh Vaity", "link": "https://stackoverflow.com/users/5925259/yogesh-umesh-vaity"}, "is_accepted": false, "score": 2, "last_activity_date": 1618786728, "last_edit_date": 1618786728, "creation_date": 1616682818, "answer_id": 66801688, "question_id": 45949584, "link": "https://stackoverflow.com/questions/45949584/how-does-the-reified-keyword-in-kotlin-work/66801688#66801688", "title": "How does the reified keyword in Kotlin work?", "body": "<h2>Understanding <code>reified</code> types</h2>\n<p><strong>Generics</strong></p>\n<p>While using generics in Kotlin, we can perform operations on a value of any type <code>T</code>:</p>\n<pre><code>fun &lt;T&gt; doSomething(value: T) {\n    println(&quot;Doing something with value: $value&quot;)                 // OK\n}\n</code></pre>\n<p>Here we are implicitly calling the <code>toString()</code> function of the <code>value</code> and that works.</p>\n<p>But we can't perform any operations on the type <code>T</code> directly:</p>\n<pre><code>fun &lt;T&gt; doSomething(value: T) {\n    println(&quot;Doing something with type: ${T::class.simpleName}&quot;)  // Error\n}\n</code></pre>\n<p>Let's understand the reason for this error.</p>\n<p><strong>Type erasure</strong></p>\n<p>In the code above, the compiler gives an error: <code>Cannot use 'T' as reified type parameter. Use a class instead.</code> This happens because at compile time, the compiler removes the type argument from the function call.</p>\n<p>For example, if you call the function as:</p>\n<pre><code>doSomething&lt;String&gt;(&quot;Some String&quot;)\n</code></pre>\n<p>The compiler removes the type argument part <code>&lt;String&gt;</code> and all that's left at the runtime is:</p>\n<pre><code>doSomething(&quot;Some String&quot;)\n</code></pre>\n<p>This is called <em>type erasure</em>. So, at runtime (inside the function definition), we cannot possibly know exactly which type the <code>T</code> stands for.</p>\n<p><strong>Java solution</strong></p>\n<p>The solution to this type erasure problem in Java was to pass an additional argument specifying the type with the <code>Class</code> (in Java) or <code>KClass</code> (in Kotlin):</p>\n<pre><code>fun &lt;T: Any&gt; doSomething(value: T, type: KClass&lt;T&gt;) {\n    println(&quot;Doing something with type: ${type.simpleName}&quot;)       // OK\n}\n</code></pre>\n<p>This way our code is not affected by type erasure. But this solution is verbose and not very elegant since we have to declare it as well as call it with an additional argument. Also, specifying the type bound <code>Any</code> is mandatory.</p>\n<p><strong>Type reification</strong></p>\n<p>The best solution to the problem above is type reification in Kotlin. The <code>reified</code> modifier before the type parameter enables the type information to be retained at runtime:</p>\n<pre><code>inline fun &lt;reified T&gt; doSomething(value: T) {\n    println(&quot;Doing something with type: ${T::class.simpleName}&quot;)    // OK\n}\n</code></pre>\n<p>In the code above, thanks to the <code>reified</code> type parameter, we no longer get the error while performing an operation on type <code>T</code>. Let's see how <code>inline</code> functions make this magic possible.</p>\n<p><strong><code>inline</code> functions</strong></p>\n<p>When we mark a function as <code>inline</code>, the compiler copies the actual body of that <code>inline</code> function wherever that function is called. Since we marked our <code>doSomething()</code> function as an <code>inline</code>, the following code:</p>\n<pre><code>fun main() {\n    doSomething&lt;String&gt;(&quot;Some String&quot;)\n}\n</code></pre>\n<p>gets compiled to:</p>\n<pre><code>fun main() {\n    println(&quot;Doing something with type: ${String::class.simpleName}&quot;)\n}\n</code></pre>\n<p>So, the two code snippets shown above are equivalent.</p>\n<p>While copying the body of an <code>inline</code> function, the compiler also replaces the type parameter <code>T</code> with the actual type argument that is specified or inferred in the function call. For example, notice how the type parameter <code>T</code> is replaced with the actual type argument <code>String</code>.</p>\n<hr />\n<h2>Type checking and type casting of <code>reified</code> types</h2>\n<p>The main objective of a <code>reified</code> type parameter is to know the exact type that the type parameter <code>T</code> represents at runtime.</p>\n<p>Let's say we have a list of different types of fruits:</p>\n<pre><code>val fruits = listOf(Apple(), Orange(), Banana(), Orange())\n</code></pre>\n<p>And we want to filter all the <code>Orange</code> types in a separate list like following:</p>\n<pre><code>val oranges = listOf(Orange(), Orange())\n</code></pre>\n<p><strong>Without <code>reified</code></strong></p>\n<p>For filtering the fruit types, we may write an extension function on <code>List&lt;Any&gt;</code> like following:</p>\n<pre><code>fun &lt;T&gt; List&lt;Any&gt;.filterFruit(): List&lt;T&gt; {\n    return this.filter { it is T }.map { it as T }          // Error and Warning\n}\n</code></pre>\n<p>In this code, first we filter the types and only take the element if its type matches the given type argument. Then we cast each element to the given type argument and <code>return</code> the <code>List</code>. But there are two problems.</p>\n<p><strong>Type checking</strong></p>\n<p>While type checking <code>it is T</code>, we are introduced to another error by the compiler: <code>Cannot check for instance of erased type: T</code>. This is another kind of error you may come across due to type erasure.</p>\n<p><strong>Type casting</strong></p>\n<p>While type casting <code>it as T</code>, we are also given a warning: <code>Unchecked cast: Any to T</code>. The compiler cannot confirm the type due to type erasure.</p>\n<p><strong><code>reified</code> types to the rescue</strong></p>\n<p>We can easily overcome these two problems by marking the function as <code>inline</code> and making the type parameter <code>reified</code> as explained earlier:</p>\n<pre><code>inline fun &lt;reified T&gt; List&lt;Any&gt;.filterFruit(): List&lt;T&gt; {\n    return this.filter { it is T }.map { it as T }\n}\n</code></pre>\n<p>And then call it like following:</p>\n<pre><code>val oranges = fruits.filterFruit&lt;Orange&gt;()\n</code></pre>\n<p>I showed this function for easier demonstration. For the purpose of filtering the types in collections, there is already a standard library function <code>filterIsInstance()</code>. This function has used the <code>inline</code> and <code>reified</code> modifiers in the similar manner. You can simply call it as following:</p>\n<pre><code>val oranges = fruits.filterIsInstance&lt;Orange&gt;()\n</code></pre>\n<hr />\n<h2>Passing <code>reified</code> parameter as an argument</h2>\n<p>The <code>reified</code> modifier makes it possible for a function to pass the type parameter as a type argument to another function that has <code>reified</code> modifier:</p>\n<pre><code>inline fun &lt;reified T&gt; doSomething() {\n    // Passing T as an argument to another function\n    doSomethingElse&lt;T&gt;()\n}\n\ninline fun &lt;reified T&gt; doSomethingElse() { }\n</code></pre>\n<hr />\n<h2>Getting the generic type of the <code>reified</code> type</h2>\n<p>Sometimes a type argument can be a generic type. For example, <code>List&lt;String&gt;</code> in the function call <code>doSomething&lt;List&lt;String&gt;&gt;()</code>. It's possible to know this entire type, thanks to reification:</p>\n<pre><code>inline fun &lt;reified T&gt; getGenericType() {\n    val type: KType = typeOf&lt;T&gt;()\n    println(type)\n}\n</code></pre>\n<p>Here the <code>typeOf()</code> is a standard library function. The <code>println()</code> function above will print <code>kotlin.collections.List&lt;kotlin.String&gt;</code>, if you call the function as <code>getGenericType&lt;List&lt;String&gt;&gt;()</code>. The <code>KType</code> includes <code>KClass</code>, type argument information and nullability information. Once you know the <code>KType</code>, you can perform reflection on it.</p>\n<hr />\n<h2>Java interoperability</h2>\n<p>The <code>inline</code> functions declared without <code>reified</code> type parameters can be called from Java as regular Java functions. But the ones declared with the <code>reified</code> type parameters are not callable from Java.</p>\n<p>Even if you call it using the reflection like following:</p>\n<pre><code>Method method = YourFilenameKt.class.getDeclaredMethod(&quot;doSomething&quot;, Object.class);\nmethod.invoke(&quot;hello&quot;, Object.class);\n</code></pre>\n<p>You get the <code>UnsupportedOperationException: This function has a reified type parameter and thus can only be inlined at compilation time, not called directly.</code></p>\n<hr />\n<h2>Conclusion</h2>\n<p>In many cases, the <code>reified</code> types help us get rid of the following errors and warnings:</p>\n<ol>\n<li><code>Error: Cannot use 'T' as reified type parameter. Use a class instead.</code></li>\n<li><code>Error: Cannot check for instance of erased type: T</code></li>\n<li><code>Warning: Unchecked cast: SomeType to T</code></li>\n</ol>\n<hr />\n<p>That's it! Hope that helps understand the essence of <code>reified</code> types.</p>\n"}], "owner": {"reputation": 3229, "user_id": 2489327, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e07089b141dd0d9ee102a3b153bbb280?s=128&d=identicon&r=PG", "display_name": "hl3mukkel", "link": "https://stackoverflow.com/users/2489327/hl3mukkel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41280, "favorite_count": 61, "accepted_answer_id": 45952201, "answer_count": 3, "score": 199, "last_activity_date": 1618786728, "creation_date": 1504048274, "last_edit_date": 1517256405, "question_id": 45949584, "link": "https://stackoverflow.com/questions/45949584/how-does-the-reified-keyword-in-kotlin-work", "title": "How does the reified keyword in Kotlin work?", "body": "<p>I'm trying to understand the purpose of the <code>reified</code> keyword, apparently <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html\" rel=\"noreferrer\">it's allowing us to do reflection on generics</a>.</p>\n\n<p>However, when I leave it out it works just as fine. Anyone care to explain when this makes an actual <strong>difference</strong>?</p>\n"}, {"tags": ["java", "eclipse", "eclipse-plugin", "kotlin"], "comments": [{"owner": {"reputation": 17233, "user_id": 27905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f54c977d97a90429c73f3323dc59532a?s=128&d=identicon&r=PG&f=1", "display_name": "nitind", "link": "https://stackoverflow.com/users/27905/nitind"}, "edited": false, "score": 1, "creation_date": 1504049901, "post_id": 45949337, "comment_id": 78858213, "body": "Shouldn&#39;t it be in your pom.xml?"}, {"owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "reply_to_user": {"reputation": 17233, "user_id": 27905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f54c977d97a90429c73f3323dc59532a?s=128&d=identicon&r=PG&f=1", "display_name": "nitind", "link": "https://stackoverflow.com/users/27905/nitind"}, "edited": false, "score": 0, "creation_date": 1504051821, "post_id": 45949337, "comment_id": 78858741, "body": "@nitind do you mean the kotlin runtime as a dependency?"}, {"owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "reply_to_user": {"reputation": 17233, "user_id": 27905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f54c977d97a90429c73f3323dc59532a?s=128&d=identicon&r=PG&f=1", "display_name": "nitind", "link": "https://stackoverflow.com/users/27905/nitind"}, "edited": false, "score": 0, "creation_date": 1504052312, "post_id": 45949337, "comment_id": 78858862, "body": "I just tried adding it as a dependency and it worked indeed. It threw me off that eclipse doesn&#39;t need it for compilation as the library is added when adding the kotlin nature to the project"}], "answers": [{"tags": [], "owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "is_accepted": true, "score": 1, "last_activity_date": 1504152500, "creation_date": 1504152500, "answer_id": 45973092, "question_id": 45949337, "link": "https://stackoverflow.com/questions/45949337/executing-java-and-kotlin-program-with-the-kotlin-runtime-library-in-the-classpa/45973092#45973092", "title": "Executing Java and Kotlin program with the Kotlin runtime library in the classpath", "body": "<p>As I mentioned in the comment above, the fact that one doesn't need to add anything in Maven to have eclipse compile the Kotlin classes but needs the maven dependency to run it, confused me.</p>\n\n<p>In order to run a Maven project with a Kotlin nature, containing Java and Kotlin code in Eclipse + Kotlin plugin, it is necessary to add the runtime as a dependency in the pom.xml.</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-runtime&lt;/artifactId&gt;\n        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Incidentally it is also advisable to add the standard library since, in all likelyhood, classes from it will be needed by the code.</p>\n\n<p>The second part is finding out the right version of Kotlin to use, which has to be the same used by the plugin.</p>\n\n<p>For that, we can check the plugin version</p>\n\n<p><a href=\"https://i.stack.imgur.com/CpMaa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CpMaa.png\" alt=\"enter image description here\"></a></p>\n\n<p>The version of the compiler is already there (1.1.1 in this case), but we can also ensure this by going to the public <a href=\"https://github.com/JetBrains/kotlin-eclipse/tree/master\" rel=\"nofollow noreferrer\">Kotlin plugin source code repository</a>. </p>\n\n<p>In github select the correct branch. Probably \"master\" if the plugin is up to date. And check the Kotlin version in the pom.xml.</p>\n\n<p>If that version is not in the maven central it will be necessary to add the pertinent repository both under the <code>repositories</code> and <code>pluginRepositories</code> sections in the pom.xml.</p>\n\n<p>Don't remove the Kotlin library from the libraries tab in the classpath section of the project properties dialog (it's what appears in the image in my question above)</p>\n"}], "owner": {"reputation": 1802, "user_id": 1045902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cae064ef599158ab518d569351fcb650?s=128&d=identicon&r=PG", "display_name": "DPM", "link": "https://stackoverflow.com/users/1045902/dpm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1099, "favorite_count": 0, "accepted_answer_id": 45973092, "answer_count": 1, "score": 1, "last_activity_date": 1504152500, "creation_date": 1504046683, "question_id": 45949337, "link": "https://stackoverflow.com/questions/45949337/executing-java-and-kotlin-program-with-the-kotlin-runtime-library-in-the-classpa", "title": "Executing Java and Kotlin program with the Kotlin runtime library in the classpath", "body": "<p>I created a mixed project Java+Kotlin in eclipse oxygen. I added the kotlin plugin to eclipse and added kotlin nature to the project. No problem compiling or building with maven.</p>\n\n<p>When I executed the project I got an exception because the kotlin runtime jar is not there. No problem again, I added the jar manually in the run configuration like so:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EByeR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EByeR.png\" alt=\"enter image description here\"></a></p>\n\n<p>But this is a hack. </p>\n\n<p>Can anybody tell me the most elegant way to tell eclipse to add the same runtime used by the eclipse kotlin plugin when I execute the program so that said runtime jar will stay in sync if I ever update the plugin.</p>\n\n<p>If it helps, this is what the library looks like in the project's build path:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2SNyQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2SNyQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>It seems simple enough but I can't figure the right way to do it...</p>\n"}, {"tags": ["android", "kotlin", "observable", "rx-java2"], "comments": [{"owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "edited": false, "score": 0, "creation_date": 1504038300, "post_id": 45947748, "comment_id": 78854012, "body": "Have you synced gradle after adding the dependency?"}, {"owner": {"reputation": 5325, "user_id": 4507386, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-SB4-Yo98rrM/AAAAAAAAAAI/AAAAAAAAAB4/QEKmkZwFw7E/photo.jpg?sz=128", "display_name": "Toni Joe", "link": "https://stackoverflow.com/users/4507386/toni-joe"}, "reply_to_user": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "edited": false, "score": 0, "creation_date": 1504038426, "post_id": 45947748, "comment_id": 78854085, "body": "Of course I did"}, {"owner": {"reputation": 2507, "user_id": 2057291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kobsi.jpg?s=128&g=1", "display_name": "Tomasz Dzieniak", "link": "https://stackoverflow.com/users/2057291/tomasz-dzieniak"}, "edited": false, "score": 0, "creation_date": 1504043523, "post_id": 45947748, "comment_id": 78856375, "body": "It his case you can use operator .fromArray() or .just()."}], "answers": [{"comments": [{"owner": {"reputation": 5325, "user_id": 4507386, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-SB4-Yo98rrM/AAAAAAAAAAI/AAAAAAAAAB4/QEKmkZwFw7E/photo.jpg?sz=128", "display_name": "Toni Joe", "link": "https://stackoverflow.com/users/4507386/toni-joe"}, "edited": false, "score": 0, "creation_date": 1504038681, "post_id": 45947836, "comment_id": 78854206, "body": "Really? I didn&#39;t know that. Thanks"}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 4, "last_activity_date": 1504038526, "creation_date": 1504038526, "answer_id": 45947836, "question_id": 45947748, "link": "https://stackoverflow.com/questions/45947748/cannot-call-from-operator-on-observable-in-kotlin-android/45947836#45947836", "title": "Cannot call from() operator on Observable in Kotlin Android", "body": "<p><code>from</code> was removed in RxJava2 because it had a lot of overloads which might make it not behave as you would expect. It has been split into specific methods like <code>fromArray</code> or <code>fromIterable</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "is_accepted": false, "score": 1, "last_activity_date": 1504043337, "creation_date": 1504043337, "answer_id": 45948817, "question_id": 45947748, "link": "https://stackoverflow.com/questions/45947748/cannot-call-from-operator-on-observable-in-kotlin-android/45948817#45948817", "title": "Cannot call from() operator on Observable in Kotlin Android", "body": "<p>Besides <code>from*</code> methods there are also extension functions for lists/arrays in rx-kotlin, so you might call for example <code>listOf(...).toObservable()</code></p>\n"}], "owner": {"reputation": 5325, "user_id": 4507386, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh3.googleusercontent.com/-SB4-Yo98rrM/AAAAAAAAAAI/AAAAAAAAAB4/QEKmkZwFw7E/photo.jpg?sz=128", "display_name": "Toni Joe", "link": "https://stackoverflow.com/users/4507386/toni-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "accepted_answer_id": 45947836, "answer_count": 2, "score": 1, "last_activity_date": 1504043337, "creation_date": 1504038062, "question_id": 45947748, "link": "https://stackoverflow.com/questions/45947748/cannot-call-from-operator-on-observable-in-kotlin-android", "title": "Cannot call from() operator on Observable in Kotlin Android", "body": "<p>I'm trying to learn RxJava2 for Android using kotlin and I'm following an <a href=\"https://code.tutsplus.com/tutorials/getting-started-with-reactivex-on-android--cms-24387\" rel=\"nofollow noreferrer\">this</a> good online tutorial. First I added this two lines the gradle.build file:</p>\n\n<pre><code>compile 'io.reactivex.rxjava2:rxandroid:2.0.1'\ncompile 'io.reactivex.rxjava2:rxjava:2.1.3'\n</code></pre>\n\n<p>The I tried to implement the Observable pattern with this code:</p>\n\n<pre><code>import io.reactivex.Observable\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val observable = Observable.from(arrayOf(1, 2, 3, 4, 5, 6))\n\n    }\n}\n</code></pre>\n\n<p>This is supposed to work easily, but I cannot call from() operator on the Observable (Unresolved reference: from). So basically I'am stuck before I even started. Does any one have any idea what i did wrong?</p>\n"}, {"tags": ["python", "kotlin"], "comments": [{"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1504064120, "post_id": 45947017, "comment_id": 78861322, "body": "What&#39;s wrong with <code>list.slice(2..4).joinToString(&quot;,&quot;)</code>?"}, {"owner": {"reputation": 1404, "user_id": 564553, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cca53f9b89c73e85539a7f599585c789?s=128&d=identicon&r=PG", "display_name": "BPS", "link": "https://stackoverflow.com/users/564553/bps"}, "reply_to_user": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1504098979, "post_id": 45947017, "comment_id": 78881246, "body": "Nothing wrong with it.  Just doesn&#39;t solve the problem.  For one thing, I want to be able to mutate the list as shown above."}], "answers": [{"comments": [{"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 5, "creation_date": 1504037422, "post_id": 45947018, "comment_id": 78853583, "body": "You&#39;re answering your own question?"}, {"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "reply_to_user": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 6, "creation_date": 1504045729, "post_id": 45947018, "comment_id": 78857105, "body": "@s1m0nw1 It is fine to answer your own question, see: <a href=\"https://stackoverflow.com/help/self-answer\">Can I answer my own question?</a>"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1504073583, "post_id": 45947018, "comment_id": 78864120, "body": "Absolutely it is! But the answer came in just a few seconds after the question, like it was prepared or something."}, {"owner": {"reputation": 1404, "user_id": 564553, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cca53f9b89c73e85539a7f599585c789?s=128&d=identicon&r=PG", "display_name": "BPS", "link": "https://stackoverflow.com/users/564553/bps"}, "edited": false, "score": 0, "creation_date": 1504098887, "post_id": 45947018, "comment_id": 78881165, "body": "It was prepared.  Part of the community process.  Sharing solutions.  Cheers!"}, {"owner": {"reputation": 1404, "user_id": 564553, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cca53f9b89c73e85539a7f599585c789?s=128&d=identicon&r=PG", "display_name": "BPS", "link": "https://stackoverflow.com/users/564553/bps"}, "edited": false, "score": 1, "creation_date": 1504099081, "post_id": 45947018, "comment_id": 78881339, "body": "Yes! Stack Exchange has always explicitly encouraged users to answer their own questions. If you have a question that you already know the answer to, and you would like to document that knowledge in public so that others (including yourself) can find it later, it&#39;s perfectly okay to ask and answer your own question on a Stack Exchange site.  To encourage people to do this, there is a checkbox at the bottom of the page every time you ask a question."}, {"owner": {"reputation": 4233, "user_id": 6510523, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d58ISqzIb4k/AAAAAAAAAAI/AAAAAAAADFo/4rh4L8K0zS0/photo.jpg?sz=128", "display_name": "Brett Beatty", "link": "https://stackoverflow.com/users/6510523/brett-beatty"}, "edited": false, "score": 1, "creation_date": 1504114539, "post_id": 45947018, "comment_id": 78892079, "body": "It&#39;s just a little weird that you address yourself in second person, such as &quot;The following code will solve the problem you provide.&quot;"}, {"owner": {"reputation": 7301, "user_id": 1812633, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TrUYx.jpg?s=128&g=1", "display_name": "Sourabh", "link": "https://stackoverflow.com/users/1812633/sourabh"}, "edited": false, "score": 1, "creation_date": 1504117656, "post_id": 45947018, "comment_id": 78893822, "body": "I think it&#39;s better this way. The answer follows how most answers are worded so gives a sense of familiarity to the reader, instead of &quot;I solved it like by doing blah blah...&quot;"}], "tags": [], "owner": {"reputation": 1404, "user_id": 564553, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cca53f9b89c73e85539a7f599585c789?s=128&d=identicon&r=PG", "display_name": "BPS", "link": "https://stackoverflow.com/users/564553/bps"}, "is_accepted": true, "score": 4, "last_activity_date": 1504054617, "last_edit_date": 1504054617, "creation_date": 1504035111, "answer_id": 45947018, "question_id": 45947017, "link": "https://stackoverflow.com/questions/45947017/how-can-i-get-pythons-slice-operator-in-kotlin/45947018#45947018", "title": "How can I get Python&#39;s slice operator in Kotlin", "body": "<p>This can be accomplished using extension functions and operator overloading.  The following code will solve the problem you provide.  With some adjustment, it would handle all the other options that Python provides as well.</p>\n\n<pre><code>operator fun &lt;T : Any&gt; Iterable&lt;T&gt;.get(start: Int, end: Int, step: Int = 1): Iterable&lt;T&gt; {\n    check(start &lt; end)\n    check(step &gt; 0)\n    val iterator = iterator()\n    var s = 0\n    return generateSequence {\n        while (s &lt; start &amp;&amp; iterator.hasNext()) {\n            iterator.next()\n            s++\n        }\n        if (iterator.hasNext()) {\n            if (s &lt; end) {\n                val value = iterator.next()\n                repeat(step - 1) { s++; if (iterator.hasNext()) iterator.next() }\n                s++\n                value\n            } else {\n                null\n            }\n        } else {\n            null\n        }\n    }.asIterable&lt;T&gt;()\n}\n\noperator fun &lt;T : Any&gt; MutableList&lt;T&gt;.set(start: Int, end: Int, step: Int = 1, newElts: Iterable&lt;T&gt;) {\n    check(start &lt; end)\n    check(step &gt; 0)\n    val iterator = iterator()\n    val newIterator = newElts.iterator()\n    var s = 0\n    while (s &lt; start &amp;&amp; iterator.hasNext()) {\n        iterator.next()\n        s++\n    }\n    while (iterator.hasNext()) {\n        if (s &lt; end) {\n            if (newIterator.hasNext()) {\n                this[s] = newIterator.next()\n                iterator.next()\n                repeat(step - 1) {\n                    s++;\n                    if (iterator.hasNext())\n                        iterator.next()\n                    else\n                        return\n                }\n                s++\n            } else\n                return\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"https://www.reddit.com/user/gladed\" rel=\"nofollow noreferrer\">gladed</a> on <a href=\"https://www.reddit.com/r/Kotlin/comments/6wtuoe/pythons_slice_operator_in_kotlin/dmawuug/\" rel=\"nofollow noreferrer\">reddit</a> came up with another solution that doesn't use Python's syntax but I quite like.</p>\n\n<pre><code>operator fun &lt;T: Any&gt; Iterable&lt;T&gt;.get(range: IntProgression) = asSequence().run {\n    range.mapNotNull { index -&gt; elementAtOrNull(index) }\n}\n\noperator fun &lt;T: Any&gt; MutableList&lt;T&gt;.set(range: ClosedRange&lt;Int&gt;, from: Iterable&lt;T&gt;) {\n    for (i in range.start..minOf(range.endInclusive, size - 1)) removeAt(range.start)\n    addAll(range.start, from.toList())\n}\n\n@Test\nfun slice() {\n    val list = mutableListOf(5, 6, 7, 8, 9, 10)\n    assertEquals(listOf(7, 8, 9), list[2..4])\n    assertEquals(listOf(10, 8), list[5 downTo 2 step 2])\n\n    list[2..4] = listOf(77)\n    assertEquals(listOf(5, 6, 77, 10), list)\n\n    list[0..10] = listOf(1, 2, 3)\n    assertEquals(listOf(1, 2, 3), list)\n}\n</code></pre>\n"}], "owner": {"reputation": 1404, "user_id": 564553, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cca53f9b89c73e85539a7f599585c789?s=128&d=identicon&r=PG", "display_name": "BPS", "link": "https://stackoverflow.com/users/564553/bps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 2, "accepted_answer_id": 45947018, "answer_count": 1, "score": 4, "last_activity_date": 1504054617, "creation_date": 1504035111, "question_id": 45947017, "link": "https://stackoverflow.com/questions/45947017/how-can-i-get-pythons-slice-operator-in-kotlin", "title": "How can I get Python&#39;s slice operator in Kotlin", "body": "<p>Python has a slice operator and I want it in Kotlin.</p>\n\n<p>I want the following code in Kotlin</p>\n\n<pre><code>val list = listOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\nprintln(\n        list[5]\n)\nprintln(\n        list[2, 5].joinToString()\n)\nprintln(\n        list[2, 10, 2].joinToString()\n)\nval mutableList = mutableListOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\nmutableList[2, 10, 2] = listOf(1, 2, 3, 4)\nprintln(\n        mutableList.joinToString()\n)\n</code></pre>\n\n<p>to output the following:</p>\n\n<pre><code>6\n3, 4, 5\n3, 5, 7, 9\n1, 2, 1, 4, 2, 6, 3, 8, 4, 10\n</code></pre>\n\n<p>But it doesn't work!</p>\n"}, {"tags": ["boolean", "kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1504033862, "post_id": 45946573, "comment_id": 78851779, "body": "In what Situation do you need this?"}, {"owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "reply_to_user": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 1, "creation_date": 1504033890, "post_id": 45946573, "comment_id": 78851792, "body": "to make the code more readable."}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 5, "creation_date": 1504033928, "post_id": 45946573, "comment_id": 78851810, "body": "It can&#39;t be more readable than myBool = false"}, {"owner": {"reputation": 17217, "user_id": 1240320, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3ff7ec4e8d7aebe239763aa235cd6d14?s=128&d=identicon&r=PG", "display_name": "Pixel Elephant", "link": "https://stackoverflow.com/users/1240320/pixel-elephant"}, "edited": false, "score": 1, "creation_date": 1504033962, "post_id": 45946573, "comment_id": 78851824, "body": "Generally you would be making the code less readable by not following the usual conventions. Either way it doesn&#39;t matter since you can&#39;t ever change the value of <code>this</code>, extension function or not."}, {"owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "edited": false, "score": 0, "creation_date": 1504034221, "post_id": 45946573, "comment_id": 78851960, "body": "compare to <code>!someBoolean</code>, <code>someBoolean.not()</code> looks readable right. That the way I tried this. But now I underStood the concept."}, {"owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "edited": false, "score": 1, "creation_date": 1504034267, "post_id": 45946573, "comment_id": 78851982, "body": "To add, if you could redefine this you could use that to make a constructor possibly return not an instance of the class it is the constructor for, which would really confuse code (in plain Java if you could do that you could even make a constructor which returns null, which would really break a lot of normally safe assumptions)"}, {"owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "edited": false, "score": 0, "creation_date": 1504034345, "post_id": 45946573, "comment_id": 78852024, "body": "that makes sense. Thank you"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1504063361, "post_id": 45946573, "comment_id": 78861166, "body": "Related: <a href=\"https://stackoverflow.com/questions/7979623/why-is-assignment-to-this-not-allowed-in-java\" title=\"why is assignment to this not allowed in java\">stackoverflow.com/questions/7979623/&hellip;</a>"}, {"owner": {"reputation": 2798, "user_id": 2192483, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/dv9nY.jpg?s=128&g=1", "display_name": "Luc-Olivier", "link": "https://stackoverflow.com/users/2192483/luc-olivier"}, "edited": false, "score": 0, "creation_date": 1563639951, "post_id": 45946573, "comment_id": 100769875, "body": "Hey guys, Bhuvanesh asked something that is totally feasible in C#, Swift..."}], "answers": [{"tags": [], "owner": {"reputation": 2105, "user_id": 1631664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691b56d8d43fec81f05431e857164424?s=128&d=identicon&r=PG", "display_name": "JK Ly", "link": "https://stackoverflow.com/users/1631664/jk-ly"}, "is_accepted": false, "score": 1, "last_activity_date": 1504034046, "creation_date": 1504034046, "answer_id": 45946740, "question_id": 45946573, "link": "https://stackoverflow.com/questions/45946573/boolean-extension-function/45946740#45946740", "title": "Boolean extension function", "body": "<p>The reason you can't do this is that you cannot reassign the receiver in an extension function.</p>\n\n<p>It's not possible to change the value of the Boolean because it is immutable.</p>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 3, "last_activity_date": 1504073440, "last_edit_date": 1504073440, "creation_date": 1504034156, "answer_id": 45946760, "question_id": 45946573, "link": "https://stackoverflow.com/questions/45946573/boolean-extension-function/45946760#45946760", "title": "Boolean extension function", "body": "<p>Sorry but this does not make sense. Just use <code>myBool=false</code>, it's what anyone understands and cannot get any more readable. \nAlso <code>Boolean</code> is <strong>immutable</strong> and what you're trying isn't possible anyways.</p>\n\n<p>We have to be careful <strong>not to overuse extensions.</strong> It's one of the greatest features Kotlin (and others) offers, but in certain examples, e.g. trying to change the way a dead simple <code>Boolean</code> is being assigned, it's getting dangerous IMHO (luckily it's not possible).</p>\n"}, {"tags": [], "owner": {"reputation": 5658, "user_id": 8041461, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-nR0Gs4YyO0M/AAAAAAAAAAI/AAAAAAAAAKk/ld4ET5Sgzvw/photo.jpg?sz=128", "display_name": "jrtapsell", "link": "https://stackoverflow.com/users/8041461/jrtapsell"}, "is_accepted": true, "score": 6, "last_activity_date": 1504034626, "creation_date": 1504034626, "answer_id": 45946891, "question_id": 45946573, "link": "https://stackoverflow.com/questions/45946573/boolean-extension-function/45946891#45946891", "title": "Boolean extension function", "body": "<p>You cannot change the value of this, this would break a lot of assumptions, even if you could you would not be able to change the value, as Booleans are immutable.</p>\n\n<p>More generally, there is a fine line between simplifying code, and making it more complex, and in this case that would complicate it. I would agree that adding <code>String.splitByDot()</code> may make sense, but replacing idiomatic code tends to just make the code more complex, as you start to wonder why the code had to be replaced.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 2869133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1027581449/picture?type=large", "display_name": "Wayne VanWeerthuizen", "link": "https://stackoverflow.com/users/2869133/wayne-vanweerthuizen"}, "is_accepted": false, "score": 3, "last_activity_date": 1529969005, "creation_date": 1529969005, "answer_id": 51032975, "question_id": 45946573, "link": "https://stackoverflow.com/questions/45946573/boolean-extension-function/51032975#51032975", "title": "Boolean extension function", "body": "<p>Here is an extension method that works in C# 7.2 or later:</p>\n\n<pre><code>public static class Extensions\n{\n    public static bool Toggle(ref this bool b) =&gt; b = !b;\n}\n</code></pre>\n\n<p>Then elsewhere, something like this will work: </p>\n\n<pre><code>bool     b1 = true; // Works for primitive bool type.\nBoolean  b2 = true; // Works for Boolean object, too.\nb1.Toggle(); \nb2.Toggle();\n</code></pre>\n\n<p>The only benefit I see to using an extension method is to shorten lines with long bool expressions, such as replacing:</p>\n\n<pre><code>this.SomeObjectWithALongName.SomeVerboselyNamedProperty\n   = !this.SomeObjectWithALongName.SomeVerboselyNamedProperty\n</code></pre>\n\n<p>with</p>\n\n<pre><code>this.SomeObjectWithALongName.SomeVerboselyNamedProperty.Toggle();\n</code></pre>\n\n<p>I don't know what drawbacks this extension method may have.</p>\n"}, {"tags": [], "owner": {"reputation": 2798, "user_id": 2192483, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/dv9nY.jpg?s=128&g=1", "display_name": "Luc-Olivier", "link": "https://stackoverflow.com/users/2192483/luc-olivier"}, "is_accepted": false, "score": 0, "last_activity_date": 1563640908, "creation_date": 1563640908, "answer_id": 57126713, "question_id": 45946573, "link": "https://stackoverflow.com/questions/45946573/boolean-extension-function/57126713#57126713", "title": "Boolean extension function", "body": "<p>The reason you can do this comes to a lack of implementation of Kotlin extension probably due to the fact Extension in Kotlin are resolved Statically (even probably really static).\nSo 'this' in a static context doesn't make sense.</p>\n"}], "owner": {"reputation": 11295, "user_id": 5558150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k9GtP.jpg?s=128&g=1", "display_name": "Bhuvanesh BS", "link": "https://stackoverflow.com/users/5558150/bhuvanesh-bs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1501, "favorite_count": 0, "accepted_answer_id": 45946891, "answer_count": 5, "score": 6, "last_activity_date": 1563640908, "creation_date": 1504033385, "last_edit_date": 1504033727, "question_id": 45946573, "link": "https://stackoverflow.com/questions/45946573/boolean-extension-function", "title": "Boolean extension function", "body": "<p>When I try to create <strong>Extension Function</strong> to set Boolean true or false like the below.</p>\n\n<pre><code>Boolean.setTrue(){\n this = true\n}\n\nBoolean.setFalse(){\n this = false\n}\n</code></pre>\n\n<p>It says <strong>variable expected</strong>. How to achieve this.</p>\n"}, {"tags": ["async-await", "android-service", "kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 0, "creation_date": 1504093563, "post_id": 45945567, "comment_id": 78876957, "body": "Can you, please, clarify what is the type of <code>job1</code>, <code>job2</code>, etc variables and what exactly <code>sync()</code> function on them is doing?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1505282886, "post_id": 45945567, "comment_id": 79342085, "body": "Did you solve the problem?"}, {"owner": {"reputation": 953, "user_id": 7074708, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1163cb93f5145045e1a64109699fa9f5?s=128&d=identicon&r=PG&f=1", "display_name": "julioribeiro", "link": "https://stackoverflow.com/users/7074708/julioribeiro"}, "edited": false, "score": 0, "creation_date": 1505821380, "post_id": 45945567, "comment_id": 79561250, "body": "Yeah, kinda. I still used coroutines, because I ended up not needed to await for every result. So it worked great. But the major problem is that every job that I listed is a retrofit call, which is a asynchronous call, but I wanted to wait for every call  to end, that&#39;s why I thought async await could provide me a solution."}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 7, "last_activity_date": 1580738065, "last_edit_date": 1580738065, "creation_date": 1504034312, "answer_id": 45946804, "question_id": 45945567, "link": "https://stackoverflow.com/questions/45945567/kotlin-coroutines-in-a-android-service/45946804#45946804", "title": "Kotlin Coroutines in a Android Service", "body": "<p>If you have to execute them <em>one after the other</em> and, like you say, they <em>depend</em> on each other, it's <strong>not a valid use case for concurrent execution</strong> like you're doing with Coroutines here.\nJust do it sequentially, then.</p>\n\n<p>In your example, you're dispatching all tasks at once and wait for their completion. It's totally random which one will be executed first.</p>\n\n<p>It would work if, for example Job1, Job2 and Job3, <em>were independent of each other</em> and could <em>run in parallel.</em> Then you'd dispatch each of them to a Coroutine and in the end wait for each to complete. You would <em>not care about the execution order</em>. </p>\n\n<p>These ideas are independent of coroutines and are valid for every concurrent programming style.</p>\n"}, {"comments": [{"owner": {"reputation": 3828, "user_id": 1495686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQMVJ.png?s=128&g=1", "display_name": "Bohsen", "link": "https://stackoverflow.com/users/1495686/bohsen"}, "edited": false, "score": 0, "creation_date": 1515661495, "post_id": 48203166, "comment_id": 83387268, "body": "the coroutineContext just uses the same context as its parent coroutine context which in this case is the same."}], "tags": [], "owner": {"reputation": 3828, "user_id": 1495686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQMVJ.png?s=128&g=1", "display_name": "Bohsen", "link": "https://stackoverflow.com/users/1495686/bohsen"}, "is_accepted": false, "score": 1, "last_activity_date": 1515663780, "last_edit_date": 1515663780, "creation_date": 1515661368, "answer_id": 48203166, "question_id": 45945567, "link": "https://stackoverflow.com/questions/45945567/kotlin-coroutines-in-a-android-service/48203166#48203166", "title": "Kotlin Coroutines in a Android Service", "body": "<p>You could add laziness to every <code>sync()</code>.</p>\n\n<p>Just change the implementation to this:</p>\n\n<pre><code>fun syncData() = async(CommonPool){\n        try{\n            val sync1 = async(coroutineContext, start = CoroutineStart.LAZY){\n                job1.sync()\n            }\n\n            val sync2 = async(coroutineContext, start = CoroutineStart.LAZY){\n                job2.sync()\n            }\n\n\n            val sync3 = async(coroutineContext, start = CoroutineStart.LAZY){\n                job3.sync()\n            }\n\n            val sync4 = async(coroutineContext, start = CoroutineStart.LAZY){\n                job4.sync()\n            }\n            job1.await()\n            job2.await()\n            job3.await()\n            job4.await()\n        }catch (e: Exception){\n        }finally {\n            stopSelf()\n        }\n    }\n</code></pre>\n\n<p>Each job will not execute before the job before it has executed.</p>\n\n<p>Take a look at the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#lazily-started-async\" rel=\"nofollow noreferrer\">coroutines guide</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 3485324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56e6d8b16a77b46876869d6fb80783f?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey", "link": "https://stackoverflow.com/users/3485324/geoffrey"}, "edited": false, "score": 0, "creation_date": 1556377800, "post_id": 55679664, "comment_id": 98422466, "body": "I&#39;d also launch coroutine with <code>launch(Dispatchers.IO+job)</code>"}, {"owner": {"reputation": 1171, "user_id": 6121671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oEYZX.jpg?s=128&g=1", "display_name": "GV_FiQst", "link": "https://stackoverflow.com/users/6121671/gv-fiqst"}, "reply_to_user": {"reputation": 81, "user_id": 3485324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56e6d8b16a77b46876869d6fb80783f?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey", "link": "https://stackoverflow.com/users/3485324/geoffrey"}, "edited": false, "score": 0, "creation_date": 1556727932, "post_id": 55679664, "comment_id": 98531840, "body": "@Geoffrey It&#39;s the same as I did. But instead of IO you should use MainThread if you want to pass data to view and avoid <code>ViewRoot$CalledFromWrongThreadException</code>"}, {"owner": {"reputation": 81, "user_id": 3485324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56e6d8b16a77b46876869d6fb80783f?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffrey", "link": "https://stackoverflow.com/users/3485324/geoffrey"}, "edited": false, "score": 1, "creation_date": 1556805746, "post_id": 55679664, "comment_id": 98560246, "body": "In this case, <code>makeRetrofitCallX()</code> functions have to dispatch."}], "tags": [], "owner": {"reputation": 1171, "user_id": 6121671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oEYZX.jpg?s=128&g=1", "display_name": "GV_FiQst", "link": "https://stackoverflow.com/users/6121671/gv-fiqst"}, "is_accepted": false, "score": 6, "last_activity_date": 1580196403, "last_edit_date": 1580196403, "creation_date": 1555273085, "answer_id": 55679664, "question_id": 45945567, "link": "https://stackoverflow.com/questions/45945567/kotlin-coroutines-in-a-android-service/55679664#55679664", "title": "Kotlin Coroutines in a Android Service", "body": "<p>Agree with <a href=\"https://stackoverflow.com/users/8073652/s1m0nw1\">@s1m0nw1</a> and his <a href=\"https://stackoverflow.com/a/45946804/6121671\">answer</a></p>\n\n<p>It's a way too hard to approach. All you need is as easy as this:</p>\n\n<pre><code>val job = SupervisorJob()\n\nfun syncData() = launch(job) {\n    try { \n        val result1 = makeRetrofitCall1()\n        val result2 = makeRetrofitCall2(result1)\n        ...\n        val resultN = makeRetrofitCallN(resultNMinusOne)\n    } catch(e: Exception) {\n        // handle exception\n    } finally {\n        stopSelf()\n    }\n}\n\noverride fun onDestroy() {\n    super.onDestroy()\n    job.cancel()\n}\n\n</code></pre>\n\n<p>Here <code>makeRetrofitCall</code> means a direct API call as <code>retrofitClient.getData()</code> where <code>retrofitClient</code> is</p>\n\n<pre><code>interface RetrofitClient {\n\n    @GET(\"endpoint\")\n    suspend fun getData(): MyCustomResult\n}\n</code></pre>\n"}], "owner": {"reputation": 953, "user_id": 7074708, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1163cb93f5145045e1a64109699fa9f5?s=128&d=identicon&r=PG&f=1", "display_name": "julioribeiro", "link": "https://stackoverflow.com/users/7074708/julioribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7784, "favorite_count": 1, "answer_count": 3, "score": 13, "last_activity_date": 1580738065, "creation_date": 1504029494, "question_id": 45945567, "link": "https://stackoverflow.com/questions/45945567/kotlin-coroutines-in-a-android-service", "title": "Kotlin Coroutines in a Android Service", "body": "<p>I have a android service which starts and syncs different types of data with the server when it's online.\nI'm new to Kotlin coroutines and I'm trying to accomplish the following:</p>\n\n<pre><code>fun syncData{\n//Job1 make retrofit call to server\n//Job2 make retrofit call to server after job1 is done.\n//Job3 make retrofit call to server after job 2 is done and so on. \n//After all jobs are done I'll stop service.\n}\n</code></pre>\n\n<p>I'm following this post: \n<a href=\"https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android\">Kotlin Coroutines the right way in Android</a></p>\n\n<p>Which brought me this solution:</p>\n\n<pre><code>fun syncData() = async(CommonPool){\n    try{\n\n        val sync1 = async(CommonPool){\n            job1.sync()\n        }\n\n        val sync2 = async(CommonPool){\n            job2.sync()\n        }\n\n\n        val sync3 = async(CommonPool){\n            job3.sync()\n        }\n\n        val sync4 = async(CommonPool){\n            job4.sync()\n        }\n        job1.await()\n        job2.await()\n        job3.await()\n        job4.await()\n    }catch (e: Exception){\n    }finally {\n        stopSelf()\n    }\n}\n</code></pre>\n\n<p>But when I get retrofit's log on logcat every call is mixed. Calls from job3 comes before job1, and so on.\nHow can I execute then in a pipeline ?I'm kinda lost in kotlin's coroutines so I don't know exactly to implement this.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 3, "creation_date": 1504026282, "post_id": 45944650, "comment_id": 78847703, "body": "What does &quot;open an URL in private windows with Java?&quot; mean?"}, {"owner": {"reputation": 363, "user_id": 4669892, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/--1vbamf063E/AAAAAAAAAAI/AAAAAAAAA1U/zNU8fLIbn9s/photo.jpg?sz=128", "display_name": "Andrei Paciurca", "link": "https://stackoverflow.com/users/4669892/andrei-paciurca"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1504026553, "post_id": 45944650, "comment_id": 78847847, "body": "When someone tap a button I want to open an URL link in Chrome (or the default browser) in an Ingonito Mode/Private Window"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7571182"}, "edited": false, "score": 0, "creation_date": 1504026670, "post_id": 45944650, "comment_id": 78847913, "body": "Please attach the code which you tried"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1504026679, "post_id": 45944650, "comment_id": 78847919, "body": "There are many Web browsers for Android, including several &quot;default&quot; browsers. None have to offer any form of incognito or private browsing capability. None have to expose that capability to third-party apps."}, {"owner": {"reputation": 363, "user_id": 4669892, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/--1vbamf063E/AAAAAAAAAAI/AAAAAAAAA1U/zNU8fLIbn9s/photo.jpg?sz=128", "display_name": "Andrei Paciurca", "link": "https://stackoverflow.com/users/4669892/andrei-paciurca"}, "edited": false, "score": 0, "creation_date": 1504026992, "post_id": 45944650, "comment_id": 78848056, "body": "<a href=\"http://imgur.com/a/9DD9j\" rel=\"nofollow noreferrer\">imgur.com/a/9DD9j</a>"}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "is_accepted": true, "score": 0, "last_activity_date": 1504027258, "creation_date": 1504027258, "answer_id": 45944902, "question_id": 45944650, "link": "https://stackoverflow.com/questions/45944650/is-there-a-way-to-open-an-url-in-private-window-ingognito-window-with-java/45944902#45944902", "title": "Is there a way to open an URL in Private Window/Ingognito Window with Java?", "body": "<p>This link might be helpful to you</p>\n\n<p><a href=\"https://stackoverflow.com/questions/37696033/how-to-open-a-web-page-in-google-chrome-incognito-from-android-app\">How to open a web page in Google chrome incognito from android app</a></p>\n\n<p>\" \"Open new incognito tab\" is currently limited to Chrome or first parties. \"</p>\n"}], "owner": {"reputation": 363, "user_id": 4669892, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/--1vbamf063E/AAAAAAAAAAI/AAAAAAAAA1U/zNU8fLIbn9s/photo.jpg?sz=128", "display_name": "Andrei Paciurca", "link": "https://stackoverflow.com/users/4669892/andrei-paciurca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1354, "favorite_count": 0, "accepted_answer_id": 45944902, "answer_count": 1, "score": 3, "last_activity_date": 1504027258, "creation_date": 1504026209, "last_edit_date": 1504026890, "question_id": 45944650, "link": "https://stackoverflow.com/questions/45944650/is-there-a-way-to-open-an-url-in-private-window-ingognito-window-with-java", "title": "Is there a way to open an URL in Private Window/Ingognito Window with Java?", "body": "<p>I'm completely new in Java/Kotlin development (I try to learn both: basics and structure in Java, then I apply it to Kotlin). </p>\n\n<p>I want to create an Android app in Android Studio 3.0 and I couldn't find an answer to my question.</p>\n\n<p>Kotlin:</p>\n\n<p>I have a button called button1.</p>\n\n<pre><code>button1.setOnClickListener {\n            web_page(\"http://google.com\")\n    }\n</code></pre>\n\n<p>And this function: </p>\n\n<pre><code>fun web_page(url: String) {\n        val uri = Uri.parse(url)\n        val intent = Intent(Intent.ACTION_VIEW, uri)\n        startActivity(intent)\n    }\n</code></pre>\n\n<p>It works. But I want the link to open in an ingognito windows.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": true, "score": 3, "last_activity_date": 1504027535, "last_edit_date": 1504027535, "creation_date": 1504026060, "answer_id": 45944622, "question_id": 45944480, "link": "https://stackoverflow.com/questions/45944480/sealed-class-generics-in-kotlin-not-related-to-inner-classes/45944622#45944622", "title": "Sealed class generics in kotlin not related to inner classes", "body": "<p>Your <code>Success</code> class isn't related to your <code>ApiResponse</code> class in any way other than being scoped inside of it. If you want the <code>Success</code> to be an <code>ApiResponse</code>, you should do something like this, which will also relate the generic types:</p>\n\n<pre><code>sealed class ApiResponse&lt;T&gt; {\n    class Success&lt;T&gt;(body: T) : ApiResponse&lt;T&gt;()  // Success extends ApiResponse\n}\n</code></pre>\n\n<p>Note that they only have to be in the same file, not necessarily nested (since Kotlin 1.1), so the following will also work:</p>\n\n<pre><code>sealed class ApiResponse&lt;T&gt;\n\nclass Success&lt;T&gt;(body: T) : ApiResponse&lt;T&gt;()  // Success extends ApiResponse\n</code></pre>\n"}], "owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 907, "favorite_count": 0, "accepted_answer_id": 45944622, "answer_count": 1, "score": 2, "last_activity_date": 1504027535, "creation_date": 1504025549, "question_id": 45944480, "link": "https://stackoverflow.com/questions/45944480/sealed-class-generics-in-kotlin-not-related-to-inner-classes", "title": "Sealed class generics in kotlin not related to inner classes", "body": "<p>I want to have an <code>ApiResponse</code> with some generic type to know what type will contain in case of success, something like:;</p>\n\n<p>I mean, what I pretend is:</p>\n\n<pre><code>sealed class ApiResponse&lt;T&gt; {\n  class Success&lt;T&gt;(body: T)\n}\n\nfun getUsers(): ApiResponse&lt;List&lt;User&gt;&gt;\n</code></pre>\n\n<p>And then when I call <code>getUsers</code> I know that it may contain a <code>ApiResponse.Success&lt;List&lt;User&gt;&gt;</code>.</p>\n\n<p><strong>But</strong> <code>T</code> from <code>ApiResponse&lt;T&gt;</code> is not related to <code>Success&lt;T&gt;</code> since I can write it like:</p>\n\n<pre><code>sealed class ApiResponse&lt;NotUsed&gt; {\n  class Success&lt;T&gt;(body: T)\n}\n</code></pre>\n\n<p>And then I create a function that returns an <code>ApiResponse</code> like:</p>\n\n<pre><code>fun getUsers(): ApiResponse\n</code></pre>\n\n<p>I dont know which kind of object that response may contain if it was a success.</p>\n\n<p>How can I do it?</p>\n"}, {"tags": ["android", "jsoup", "kotlin"], "comments": [{"owner": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "edited": false, "score": 0, "creation_date": 1504023156, "post_id": 45943772, "comment_id": 78845942, "body": "Please add the logcat"}, {"owner": {"reputation": 11, "user_id": 8461773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/839a47d410406e9aa7a4ad2a3f6096cc?s=128&d=identicon&r=PG&f=1", "display_name": "Salman Daryanavard", "link": "https://stackoverflow.com/users/8461773/salman-daryanavard"}, "reply_to_user": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "edited": false, "score": 0, "creation_date": 1504023803, "post_id": 45943772, "comment_id": 78846360, "body": "post edited and logcat added"}, {"owner": {"reputation": 34447, "user_id": 4936904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh6MN.jpg?s=128&g=1", "display_name": "Pavneet_Singh", "link": "https://stackoverflow.com/users/4936904/pavneet-singh"}, "edited": false, "score": 2, "creation_date": 1504023955, "post_id": 45943772, "comment_id": 78846446, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6343166/how-do-i-fix-android-os-networkonmainthreadexception\">How do I fix android.os.NetworkOnMainThreadException?</a>"}, {"owner": {"reputation": 807, "user_id": 7441041, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affe7ad37b72e7a3e6ff2a51ddb0dd1b?s=128&d=identicon&r=PG&f=1", "display_name": "lampenlampen", "link": "https://stackoverflow.com/users/7441041/lampenlampen"}, "reply_to_user": {"reputation": 34447, "user_id": 4936904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh6MN.jpg?s=128&g=1", "display_name": "Pavneet_Singh", "link": "https://stackoverflow.com/users/4936904/pavneet-singh"}, "edited": false, "score": 0, "creation_date": 1504024322, "post_id": 45943772, "comment_id": 78846667, "body": "You are not allowed by android to do network operation on the main-Thread. See @Pavneet_Singh answer for a solution."}, {"owner": {"reputation": 11, "user_id": 8461773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/839a47d410406e9aa7a4ad2a3f6096cc?s=128&d=identicon&r=PG&f=1", "display_name": "Salman Daryanavard", "link": "https://stackoverflow.com/users/8461773/salman-daryanavard"}, "edited": false, "score": 0, "creation_date": 1504024623, "post_id": 45943772, "comment_id": 78846848, "body": "When I Add libraries with file &gt; project Structure &gt; Dependencies, libraries don&#39;t Work for me (Always), I don&#39;t know why"}], "answers": [{"tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": false, "score": 0, "last_activity_date": 1504071939, "creation_date": 1504071939, "answer_id": 45952757, "question_id": 45943772, "link": "https://stackoverflow.com/questions/45943772/unfortunately-app-name-has-stopped-because-of-jsoup-library/45952757#45952757", "title": "Unfortunately &#39;app name&#39; has stopped Because of Jsoup library", "body": "<p>See post <a href=\"https://stackoverflow.com/questions/6343166/how-do-i-fix-android-os-networkonmainthreadexception\">How do I fix android.os.NetworkOnMainThreadException?</a> </p>\n\n<p>It is explained there, that you are not allowed to perform network operations on the main thread and it seems that you perform that line</p>\n\n<pre><code> val dockhalij = Jsoup.connect(\"http://khalikmusic.org\").get()\n</code></pre>\n\n<p>on the main thread.</p>\n"}, {"tags": [], "owner": {"reputation": 1269, "user_id": 7413137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vHtao.jpg?s=128&g=1", "display_name": "Shaifali Rajput", "link": "https://stackoverflow.com/users/7413137/shaifali-rajput"}, "is_accepted": false, "score": 3, "last_activity_date": 1504677588, "last_edit_date": 1504677588, "creation_date": 1504072349, "answer_id": 45952850, "question_id": 45943772, "link": "https://stackoverflow.com/questions/45943772/unfortunately-app-name-has-stopped-because-of-jsoup-library/45952850#45952850", "title": "Unfortunately &#39;app name&#39; has stopped Because of Jsoup library", "body": "<p>This is because you are performing network operation on main thread,\ntry this:</p>\n\n<pre><code>Thread threadJSoup = new Thread(new Runnable() {\n    @Override\n    public void run() {\n        try {\n          val dockhalij = Jsoup.connect(\"http://khalikmusic.org\").get();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n});\n\nthreadJSoup.start(); \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8461773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/839a47d410406e9aa7a4ad2a3f6096cc?s=128&d=identicon&r=PG&f=1", "display_name": "Salman Daryanavard", "link": "https://stackoverflow.com/users/8461773/salman-daryanavard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1504677588, "creation_date": 1504023060, "last_edit_date": 1504024369, "question_id": 45943772, "link": "https://stackoverflow.com/questions/45943772/unfortunately-app-name-has-stopped-because-of-jsoup-library", "title": "Unfortunately &#39;app name&#39; has stopped Because of Jsoup library", "body": "<p>I added Jsoup library from : File > Project Structure > Dependencies\nWhen I wrote This Code :</p>\n\n<pre><code>    val dockhalij = Jsoup.connect(\"http://khalikmusic.org\").get()\n</code></pre>\n\n<p>my application will compile correctly but when I test it on my device (Galaxy Grand Duos), will be close and show be message Unfortunately 'app name' has stopped.</p>\n\n<p>Without this line My application works correctly but I can't use Jsoup Library.</p>\n\n<p>logcat : </p>\n\n<pre><code>08-29 18:09:39.188 31871-31871/? E/AndroidRuntime: FATAL EXCEPTION: main\n                                               java.lang.RuntimeException: Unable to start activity ComponentInfo{ir.bostanu.jelvilmusic/ir.bostanu.jelvilmusic.MainActivity}: android.os.NetworkOnMainThreadException\n                                                   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2245)\n                                                   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2299)\n                                                   at android.app.ActivityThread.access$700(ActivityThread.java:150)\n                                                   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1280)\n                                                   at android.os.Handler.dispatchMessage(Handler.java:99)\n                                                   at android.os.Looper.loop(Looper.java:137)\n                                                   at android.app.ActivityThread.main(ActivityThread.java:5283)\n                                                   at java.lang.reflect.Method.invokeNative(Native Method)\n                                                   at java.lang.reflect.Method.invoke(Method.java:511)\n                                                   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1102)\n                                                   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:869)\n                                                   at dalvik.system.NativeStart.main(Native Method)\n                                                Caused by: android.os.NetworkOnMainThreadException\n                                                   at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1128)\n                                                   at java.net.InetAddress.lookupHostByName(InetAddress.java:385)\n                                                   at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)\n                                                   at java.net.InetAddress.getAllByName(InetAddress.java:214)\n                                                   at libcore.net.http.HttpConnection.&lt;init&gt;(HttpConnection.java:70)\n                                                   at libcore.net.http.HttpConnection.&lt;init&gt;(HttpConnection.java:50)\n                                                   at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)\n                                                   at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)\n                                                   at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)\n                                                   at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)\n                                                   at libcore.net.http.HttpEngine.connect(HttpEngine.java:311)\n                                                   at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)\n                                                   at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)\n                                                   at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:81)\n                                                   at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:652)\n                                                   at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:629)\n                                                   at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:261)\n                                                   at org.jsoup.helper.HttpConnection.get(HttpConnection.java:250)\n                                                   at ir.bostanu.jelvilmusic.MainActivity.onCreate(MainActivity.kt:49)\n                                                   at android.app.Activity.performCreate(Activity.java:5283)\n                                                   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1097)\n                                                   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2209)\n                                                   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2299)\u00a0\n                                                   at android.app.ActivityThread.access$700(ActivityThread.java:150)\u00a0\n                                                   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1280)\u00a0\n                                                   at android.os.Handler.dispatchMessage(Handler.java:99)\u00a0\n                                                   at android.os.Looper.loop(Looper.java:137)\u00a0\n                                                   at android.app.ActivityThread.main(ActivityThread.java:5283)\u00a0\n                                                   at java.lang.reflect.Method.invokeNative(Native Method)\u00a0\n                                                   at java.lang.reflect.Method.invoke(Method.java:511)\u00a0\n                                                   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1102)\u00a0\n                                                   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:869)\u00a0\n                                                   at dalvik.system.NativeStart.main(Native Method)\u00a0\n</code></pre>\n\n<p>When I Add libraries with file > project Structure > Dependencies, libraries don't Work for me (Always), I don't know why</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "navigation-drawer"], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 6844962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/39df24035200417a2cb109f082c77635?s=128&d=identicon&r=PG&f=1", "display_name": "Feelfree", "link": "https://stackoverflow.com/users/6844962/feelfree"}, "is_accepted": false, "score": 0, "last_activity_date": 1504029224, "creation_date": 1504029224, "answer_id": 45945487, "question_id": 45939560, "link": "https://stackoverflow.com/questions/45939560/set-fragments-overflow-icon-to-default/45945487#45945487", "title": "Set Fragment&#39;s overflow icon to default", "body": "<p>Ok, I finally figured it out. Its a bit hacky way to do it, but works great. Code is in Kotlin but its just a simple call with cast.</p>\n\n<p>In your main <code>Activity</code>, when creating toolbar call\n<code>toolbar.tag = toolbar.overflowIcon</code> \nAnd in fragment where you want to restore your original overflow icon just do (On navigation activity's toolbar):\n<code>toolbar.overflowIcon = toolbar.tag as Drawable</code></p>\n"}], "owner": {"reputation": 80, "user_id": 6844962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/39df24035200417a2cb109f082c77635?s=128&d=identicon&r=PG&f=1", "display_name": "Feelfree", "link": "https://stackoverflow.com/users/6844962/feelfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504029224, "creation_date": 1504010781, "last_edit_date": 1504028908, "question_id": 45939560, "link": "https://stackoverflow.com/questions/45939560/set-fragments-overflow-icon-to-default", "title": "Set Fragment&#39;s overflow icon to default", "body": "<p>In my app, I have an activity implementing <code>NavigationDrawer</code>, <code>Toolbar</code> and two Fragments. In first Fragment I'm setting custom overflow icon, but in second fragment, I want to use system's default overflow icon and I don't want to use pre-downloaded drawable.\nShould I create separate toolbars in each fragment and set them via <code>setSupportActionbar</code>, or is there a way to retrieve system's overflow icon?</p>\n"}, {"tags": ["spring", "spring-boot", "kotlin", "spring-webflux"], "comments": [{"owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 0, "creation_date": 1504072340, "post_id": 45935931, "comment_id": 78863628, "body": "Have you just tried it out, e.g. by putting this bean definition into a controller (which is discovered by spring boot)?"}, {"owner": {"reputation": 1642, "user_id": 3415077, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/89dc320cc357248f2882bb715c05a1f3?s=128&d=identicon&r=PG&f=1", "display_name": "Juergen Zimmermann", "link": "https://stackoverflow.com/users/3415077/juergen-zimmermann"}, "reply_to_user": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 1, "creation_date": 1504084274, "post_id": 45935931, "comment_id": 78870430, "body": "Yes, I tried a <code>@Configuration</code> class with an <code>@Bean</code> method returning the result of <code>beans {...}</code>. Then I got the exception <code>&quot;... No qualifying bean of type &#39;...&#39; available ...&quot;</code> when I remove <code>@Service</code> and declare the service class inside the <code>beans {...}</code> lambda above."}], "answers": [{"comments": [{"owner": {"reputation": 1026, "user_id": 207371, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/69d8b493312a1ed70943abf6cc2dcf72?s=128&d=identicon&r=PG", "display_name": "Pedro Felix", "link": "https://stackoverflow.com/users/207371/pedro-felix"}, "edited": false, "score": 0, "creation_date": 1520108567, "post_id": 46033685, "comment_id": 85183142, "body": "Two questions regarding your answer:  * This initialisation will be picked up by the test setup with using a <code>SpringRunner</code> with JUnit, right? * Is there any other way of having this behaviour without having to create <code>properties</code> files, including this initialisation being picked up on tests?  Thanks!"}, {"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "reply_to_user": {"reputation": 1026, "user_id": 207371, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/69d8b493312a1ed70943abf6cc2dcf72?s=128&d=identicon&r=PG", "display_name": "Pedro Felix", "link": "https://stackoverflow.com/users/207371/pedro-felix"}, "edited": false, "score": 0, "creation_date": 1520842283, "post_id": 46033685, "comment_id": 85464525, "body": "Yes and not yet."}, {"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "reply_to_user": {"reputation": 1026, "user_id": 207371, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/69d8b493312a1ed70943abf6cc2dcf72?s=128&d=identicon&r=PG", "display_name": "Pedro Felix", "link": "https://stackoverflow.com/users/207371/pedro-felix"}, "edited": false, "score": 1, "creation_date": 1549531268, "post_id": 46033685, "comment_id": 95937735, "body": "Side note: we are currently exploring full functional bean definition for Boot with Java or Kotlin DSL in <a href=\"https://github.com/spring-projects/spring-fu\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-fu</a> incubator project."}, {"owner": {"reputation": 5021, "user_id": 4470135, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oXA6y.jpg?s=128&g=1", "display_name": "yuranos", "link": "https://stackoverflow.com/users/4470135/yuranos"}, "edited": false, "score": 0, "creation_date": 1554123525, "post_id": 46033685, "comment_id": 97624629, "body": "What if I want to override a bean? I added allow-bean-definition-overriding: true and am trying to declare a test bean via @Bean but it seems to be ignored. I have tried an exact same setup(basically, just copy pasted) on a project withotu bean DSL and it worked."}, {"owner": {"reputation": 1428, "user_id": 222116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J5QMC.jpg?s=128&g=1", "display_name": "R&#252;diger Schulz", "link": "https://stackoverflow.com/users/222116/r%c3%bcdiger-schulz"}, "edited": false, "score": 0, "creation_date": 1586715908, "post_id": 46033685, "comment_id": 108224905, "body": "Declaring the initializer like that will disable all other ones provided by spring boot, won&#39;t it?"}, {"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "edited": false, "score": 0, "creation_date": 1587047093, "post_id": 46033685, "comment_id": 108360122, "body": "Is that what your tests seems to indicate?"}], "tags": [], "owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "is_accepted": true, "score": 25, "last_activity_date": 1504796509, "last_edit_date": 1504796509, "creation_date": 1504515803, "answer_id": 46033685, "question_id": 45935931, "link": "https://stackoverflow.com/questions/45935931/how-to-use-functional-bean-definition-kotlin-dsl-with-spring-boot-and-spring-w/46033685#46033685", "title": "How to use &quot;Functional bean definition Kotlin DSL&quot; with Spring Boot and Spring WebFlux?", "body": "<p>Spring Boot is based on Java Config, but should allow experimental support of user-defined <a href=\"https://docs.spring.io/spring-framework/docs/5.0.0.BUILD-SNAPSHOT/spring-framework-reference/kotlin.html#functional-bean-declaration-dsl\" rel=\"noreferrer\">functional bean declaration DSL</a> via <code>ApplicationContextInitializer</code> support as described <a href=\"https://stackoverflow.com/questions/35217354/how-to-add-custom-applicationcontextinitializer-to-a-spring-boot-application\">here</a>.</p>\n\n<p>In practice, you should be able to declare your beans for example in a <code>Beans.kt</code> file containing a <code>beans()</code> function.</p>\n\n<pre><code>fun beans() = beans {\n    // Define your bean with Kotlin DSL here\n}\n</code></pre>\n\n<p>Then in order to make it taken in account by Boot when running <code>main()</code> and tests, create an <code>ApplicationContextInitializer</code> class as following:</p>\n\n<pre><code>class BeansInitializer : ApplicationContextInitializer&lt;GenericApplicationContext&gt; {\n\n    override fun initialize(context: GenericApplicationContext) =\n        beans().initialize(context)\n\n}\n</code></pre>\n\n<p>And ultimately, declare this initializer in your <code>application.properties</code> file:</p>\n\n<pre><code>context.initializer.classes=com.example.BeansInitializer  \n</code></pre>\n\n<p>You will find a full example <a href=\"https://github.com/sdeleuze/spring-kotlin-functional/tree/boot\" rel=\"noreferrer\">here</a> and can also follow <a href=\"https://github.com/spring-projects/spring-boot/issues/8115\" rel=\"noreferrer\">this issue</a> about dedicated Spring Boot support for functional bean registration.</p>\n"}, {"comments": [{"owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "edited": false, "score": 3, "creation_date": 1559290967, "post_id": 51466348, "comment_id": 99381572, "body": "The drawback of that approach is that the initializer won&#39;t be taken in account for tests."}], "tags": [], "owner": {"reputation": 3827, "user_id": 6161898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285e6736495b1ff1b2b1579451693ecd?s=128&d=identicon&r=PG&f=1", "display_name": "fg78nc", "link": "https://stackoverflow.com/users/6161898/fg78nc"}, "is_accepted": false, "score": 4, "last_activity_date": 1559290931, "last_edit_date": 1559290931, "creation_date": 1532271555, "answer_id": 51466348, "question_id": 45935931, "link": "https://stackoverflow.com/questions/45935931/how-to-use-functional-bean-definition-kotlin-dsl-with-spring-boot-and-spring-w/51466348#51466348", "title": "How to use &quot;Functional bean definition Kotlin DSL&quot; with Spring Boot and Spring WebFlux?", "body": "<p>Another way to do it in Spring Boot would be :</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    runApplication&lt;DemoApplication&gt;(*args) {\n        addInitializers(\n                beans {\n                    // Define your bean with Kotlin DSL here\n                }\n        )\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1424, "user_id": 1243350, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VL6by.jpg?s=128&g=1", "display_name": "Ugur Artun", "link": "https://stackoverflow.com/users/1243350/ugur-artun"}, "is_accepted": false, "score": 2, "last_activity_date": 1571727950, "creation_date": 1571727950, "answer_id": 58498777, "question_id": 45935931, "link": "https://stackoverflow.com/questions/45935931/how-to-use-functional-bean-definition-kotlin-dsl-with-spring-boot-and-spring-w/58498777#58498777", "title": "How to use &quot;Functional bean definition Kotlin DSL&quot; with Spring Boot and Spring WebFlux?", "body": "<p>You can define your beans in *Config.kt file and implement initalize method of <strong>ApplicationContextInitializer</strong> interface.</p>\n\n<pre><code>override fun initialize(applicationContext: GenericApplicationContext) {\n    ....\n}\n</code></pre>\n\n<p>Some bean definition here.</p>\n\n<pre><code>bean&lt;XServiceImpl&gt;(\"xService\")\n\nbean(\"beanName\") {\n        BeanConstructor(ref(\"refBeanName\"))\n}\n</code></pre>\n"}], "owner": {"reputation": 1642, "user_id": 3415077, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/89dc320cc357248f2882bb715c05a1f3?s=128&d=identicon&r=PG&f=1", "display_name": "Juergen Zimmermann", "link": "https://stackoverflow.com/users/3415077/juergen-zimmermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8144, "favorite_count": 5, "accepted_answer_id": 46033685, "answer_count": 3, "score": 14, "last_activity_date": 1571727950, "creation_date": 1504000308, "last_edit_date": 1504003867, "question_id": 45935931, "link": "https://stackoverflow.com/questions/45935931/how-to-use-functional-bean-definition-kotlin-dsl-with-spring-boot-and-spring-w", "title": "How to use &quot;Functional bean definition Kotlin DSL&quot; with Spring Boot and Spring WebFlux?", "body": "<p>At <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-context/src/main/kotlin/org/springframework/context/support/BeanDefinitionDsl.kt\" rel=\"noreferrer\">https://github.com/spring-projects/spring-framework/blob/master/spring-context/src/main/kotlin/org/springframework/context/support/BeanDefinitionDsl.kt</a> the comment shows how to define Spring Beans via the new \"Functional bean definition Kotlin DSL\". I also found <a href=\"https://github.com/sdeleuze/spring-kotlin-functional\" rel=\"noreferrer\">https://github.com/sdeleuze/spring-kotlin-functional</a>. However, this example uses just <em>plain</em> Spring and not Spring <em>Boot</em>. Any hint how to use the DSL together with Spring <em>Boot</em> is appreciated.</p>\n"}, {"tags": ["android", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1504000533, "post_id": 45935788, "comment_id": 78829898, "body": "can you post signature of <code>getId()</code> method along with imports?"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1504000798, "post_id": 45935788, "comment_id": 78830092, "body": "@chandil03 I&#39;ve added requested information. There are no imports relevant to these methods. All imports are from internal libraries for ORM and java.util. We have no other implementation of <code>Long</code>."}, {"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1504002807, "post_id": 45935788, "comment_id": 78831446, "body": "I used your three lines, it is working fine. I did not override getId as i did not know which interface you are using. If you let me know the interface that you are implementing then i might be able to help."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1504002913, "post_id": 45935788, "comment_id": 78831520, "body": "@chandil03 Yeah it worked fine for me until yesterday, so it must be definitely something in my build messing it. I don&#39;t think the interface is related at all. It&#39;s just a simple interface with that method getId(), nothing more."}, {"owner": {"reputation": 1289, "user_id": 6686126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dIaui.jpg?s=128&g=1", "display_name": "galcyurio", "link": "https://stackoverflow.com/users/6686126/galcyurio"}, "edited": false, "score": 2, "creation_date": 1556070803, "post_id": 45935788, "comment_id": 98308672, "body": "Also upgrading kotlin from 1.3.20 to 1.3.30 causes this issue. See <a href=\"https://youtrack.jetbrains.com/issue/KT-31027\" rel=\"nofollow noreferrer\">this</a>."}], "answers": [{"comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1504001407, "post_id": 45936282, "comment_id": 78830478, "body": "Sorry, I don&#39;t understand how this explains anything about my error."}, {"owner": {"reputation": 8935, "user_id": 7637657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QJPu.jpg?s=128&g=1", "display_name": "Alexander Romanov", "link": "https://stackoverflow.com/users/7637657/alexander-romanov"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1504002514, "post_id": 45936282, "comment_id": 78831256, "body": "Most probably you&#39;re trying to run Java 8 compiled code on JVM that does not support 1.8 features."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1504002686, "post_id": 45936282, "comment_id": 78831370, "body": "Definitely not, this is Android and it is always set to Java 6. In any case I checked again the Java version target and it is 6. Also I&#39;m not calling that new static method, note it has a parameter."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1504003033, "post_id": 45936282, "comment_id": 78831601, "body": "But it is definitely something broken in my build, some Kotlin versions or something, thanks for putting me on that way!"}, {"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1504005490, "post_id": 45936282, "comment_id": 78833197, "body": "@m0skit0 may be your java 6 is having this issue as it is too old. try switching to 7 or 8."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1504005559, "post_id": 45936282, "comment_id": 78833254, "body": "Android is Java 6 only :)"}], "tags": [], "owner": {"reputation": 8935, "user_id": 7637657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QJPu.jpg?s=128&g=1", "display_name": "Alexander Romanov", "link": "https://stackoverflow.com/users/7637657/alexander-romanov"}, "is_accepted": false, "score": 3, "last_activity_date": 1504001184, "creation_date": 1504001184, "answer_id": 45936282, "question_id": 45935788, "link": "https://stackoverflow.com/questions/45935788/nosuchmethoderror-java-lang-long-hashcode/45936282#45936282", "title": "NoSuchMethodError: java.lang.Long.hashCode", "body": "<p>I'm not sure about how to solve your problem, but I'll try to explain why are you getting this exception. </p>\n\n<p>In <strong>Java 8</strong> a new <em><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html#hashCode-long-\" rel=\"nofollow noreferrer\">static method</a></em> was added to a <code>Long</code> class: </p>\n\n<pre><code>public static int hashCode(long value)\n</code></pre>\n\n<p>And since then <code>hashCode()</code> method looks like this:</p>\n\n<pre><code>public int hashCode() {\n    return hashCode(this.value); // call Long.hashCode() static method\n}\n</code></pre>\n\n<p>So it seems that you have some issues with <strong>Java</strong> version.</p>\n"}, {"comments": [{"owner": {"reputation": 1903, "user_id": 417006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4981cdace7bd78353de53b964c60c296?s=128&d=identicon&r=PG", "display_name": "St&#233;phane P&#233;chard", "link": "https://stackoverflow.com/users/417006/st%c3%a9phane-p%c3%a9chard"}, "edited": false, "score": 7, "creation_date": 1522414370, "post_id": 45939508, "comment_id": 86156992, "body": "Be careful if you override such settings into your build.gradle file: <code>compileKotlin { kotlinOptions { jvmTarget = &quot;1.6&quot; } }</code>"}, {"owner": {"reputation": 1019, "user_id": 2860391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/012dccf5619014e779a73586edff782b?s=128&d=identicon&r=PG&f=1", "display_name": "Abdul Rehman Yawar Khan", "link": "https://stackoverflow.com/users/2860391/abdul-rehman-yawar-khan"}, "edited": false, "score": 1, "creation_date": 1540844528, "post_id": 45939508, "comment_id": 93006016, "body": "@m0skit0  I am facing the same issue and I don&#39;t want to downgrade to JVM 1.6. Can you tell how to fix this issue for JVM 1.8 and API level less than 24"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 1019, "user_id": 2860391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/012dccf5619014e779a73586edff782b?s=128&d=identicon&r=PG&f=1", "display_name": "Abdul Rehman Yawar Khan", "link": "https://stackoverflow.com/users/2860391/abdul-rehman-yawar-khan"}, "edited": false, "score": 0, "creation_date": 1540892068, "post_id": 45939508, "comment_id": 93020898, "body": "@AbdulRehmanYawarKhan I&#39;m same as you, using JVM 1.8 and API &lt; 24, did you read answer?"}, {"owner": {"reputation": 1225, "user_id": 4438470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfUMz.png?s=128&g=1", "display_name": "Vitor Hugo Schwaab", "link": "https://stackoverflow.com/users/4438470/vitor-hugo-schwaab"}, "reply_to_user": {"reputation": 1903, "user_id": 417006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4981cdace7bd78353de53b964c60c296?s=128&d=identicon&r=PG", "display_name": "St&#233;phane P&#233;chard", "link": "https://stackoverflow.com/users/417006/st%c3%a9phane-p%c3%a9chard"}, "edited": false, "score": 1, "creation_date": 1549384961, "post_id": 45939508, "comment_id": 95879512, "body": "@St&#233;phaneP&#233;chard I&#39;m in love with you."}, {"owner": {"reputation": 13997, "user_id": 507313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8b097f0a88ab346a912b74fda4c57cf?s=128&d=identicon&r=PG", "display_name": "StuStirling", "link": "https://stackoverflow.com/users/507313/stustirling"}, "reply_to_user": {"reputation": 1019, "user_id": 2860391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/012dccf5619014e779a73586edff782b?s=128&d=identicon&r=PG&f=1", "display_name": "Abdul Rehman Yawar Khan", "link": "https://stackoverflow.com/users/2860391/abdul-rehman-yawar-khan"}, "edited": false, "score": 1, "creation_date": 1551953492, "post_id": 45939508, "comment_id": 96833188, "body": "How is this not more of an issue for people? I ,like @AbdulRehmanYawarKhan, do not want to downgrade to 1.6 if it can be helped."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 13997, "user_id": 507313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8b097f0a88ab346a912b74fda4c57cf?s=128&d=identicon&r=PG", "display_name": "StuStirling", "link": "https://stackoverflow.com/users/507313/stustirling"}, "edited": false, "score": 2, "creation_date": 1551953556, "post_id": 45939508, "comment_id": 96833240, "body": "@StuStirling It&#39;s pretty simple: you can&#39;t use target 1.8 if your min SDK is less than 24. Devices with API &lt; 24 do not support 1.8 features."}], "tags": [], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "is_accepted": true, "score": 19, "last_activity_date": 1504013181, "last_edit_date": 1504013181, "creation_date": 1504010623, "answer_id": 45939508, "question_id": 45935788, "link": "https://stackoverflow.com/questions/45935788/nosuchmethoderror-java-lang-long-hashcode/45939508#45939508", "title": "NoSuchMethodError: java.lang.Long.hashCode", "body": "<p>After checking the compiled <code>AbstractORM</code> class I found the problem: newer Kotlin versions generate a different code for that line</p>\n\n<pre><code>getId().hashCode()\n</code></pre>\n\n<p>Kotlin 1.1.2 generates the following code:</p>\n\n<pre><code>Long.valueOf(this.getId()).hashCode()\n</code></pre>\n\n<p>while newer versions of Kotlin generate this other code:</p>\n\n<pre><code>Long.hashCode(this.getId())\n</code></pre>\n\n<p>The problem is that this static method <code>Long.hashCode(long)</code> in Android is only available since API 24 (Android 7.0), while I'm testing on an Android device that has version 4.1 (API 16).</p>\n\n<p><strike>\nI'm temporarily fixing by calculating the hash code manually although I've opened an issue <a href=\"https://youtrack.jetbrains.com/issue/KT-19968\" rel=\"noreferrer\">here</a>.</p>\n\n<pre><code>override fun hashCode() = (getId() xor getId().ushr(32)).toInt()\n</code></pre>\n\n<p></strike></p>\n\n<p>As commented on the <a href=\"https://youtrack.jetbrains.com/issue/KT-19968\" rel=\"noreferrer\">issue</a>, switching to Java 1.6 target for the Kotlin compiler generates the old compatible code.</p>\n\n<p><a href=\"https://i.stack.imgur.com/23cVZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/23cVZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>PS: I'm not 100% sure about those Kotlin versions, please take with a grain of salt.</p>\n"}, {"comments": [{"owner": {"reputation": 826, "user_id": 5142776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/AZ6X1.jpg?s=128&g=1", "display_name": "Ahmed na", "link": "https://stackoverflow.com/users/5142776/ahmed-na"}, "edited": false, "score": 0, "creation_date": 1555387800, "post_id": 53188192, "comment_id": 98082374, "body": "much better solution from just dropping support to old APIs"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1555508523, "post_id": 53188192, "comment_id": 98136795, "body": "If you have Kotlin to compile to 1.6 you don&#39;t need this."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 826, "user_id": 5142776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/AZ6X1.jpg?s=128&g=1", "display_name": "Ahmed na", "link": "https://stackoverflow.com/users/5142776/ahmed-na"}, "edited": false, "score": 0, "creation_date": 1555622713, "post_id": 53188192, "comment_id": 98184184, "body": "@Ahmedna What do you mean &quot;just dropping support to old APIs&quot;?"}, {"owner": {"reputation": 826, "user_id": 5142776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/AZ6X1.jpg?s=128&g=1", "display_name": "Ahmed na", "link": "https://stackoverflow.com/users/5142776/ahmed-na"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 1, "creation_date": 1555642493, "post_id": 53188192, "comment_id": 98187994, "body": "@m0skit0 with kotlin v 1.3.30 launched last week , while having 1.6 any device with api &lt; 24 this error is thrown  , grater APIs are working fine    So i just need to avoid using these methods"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 826, "user_id": 5142776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/AZ6X1.jpg?s=128&g=1", "display_name": "Ahmed na", "link": "https://stackoverflow.com/users/5142776/ahmed-na"}, "edited": false, "score": 0, "creation_date": 1555664773, "post_id": 53188192, "comment_id": 98193692, "body": "@Ahmedna Did you read my answer? You just have to set the Kotlin compiler to generate 1.6 compatible code. Doesn&#39;t matter which API or Kotlin version."}, {"owner": {"reputation": 826, "user_id": 5142776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/AZ6X1.jpg?s=128&g=1", "display_name": "Ahmed na", "link": "https://stackoverflow.com/users/5142776/ahmed-na"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 1, "creation_date": 1555687471, "post_id": 53188192, "comment_id": 98202687, "body": "@m0skit0 I&#39;ve set complier to 1.6 everything was good until last week , I updated to kotlin 1.3.30 , all users with api &lt; 24 started to crashed , I debugged with 1.6 and older version of kotlin all api were working , then with kotlin 1.3.30 all APIs pre 24 crashed"}, {"owner": {"reputation": 2029, "user_id": 6552016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf30872c5ab2ff01a02ea2da74830232?s=128&d=identicon&r=PG&f=1", "display_name": "Rub&#233;n Viguera", "link": "https://stackoverflow.com/users/6552016/rub%c3%a9n-viguera"}, "edited": false, "score": 0, "creation_date": 1568363668, "post_id": 53188192, "comment_id": 102257939, "body": "Targetting JVM to v1.6 is not mandatory. Anyway, thank you, it works."}], "tags": [], "owner": {"reputation": 61, "user_id": 3008360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3OkA.jpg?s=128&g=1", "display_name": "marcinP", "link": "https://stackoverflow.com/users/3008360/marcinp"}, "is_accepted": false, "score": 5, "last_activity_date": 1541588511, "creation_date": 1541588511, "answer_id": 53188192, "question_id": 45935788, "link": "https://stackoverflow.com/questions/45935788/nosuchmethoderror-java-lang-long-hashcode/53188192#53188192", "title": "NoSuchMethodError: java.lang.Long.hashCode", "body": "<p>Overriding the <code>hashCode()</code> function, as m0skit0 suggested, worked for me. I implemented this:</p>\n\n<pre><code>override fun hashCode() : Int = id.toString().hashCode()\n</code></pre>\n\n<p>My Kotlin compiler setting in AndroidStudio is :</p>\n\n<ul>\n<li>incremental compilation enabled</li>\n<li>target JVM ver. 1.6</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1589290345, "post_id": 61747638, "comment_id": 109229761, "body": "If  you want to upgrade to Java 8, yes, this is valid solution."}], "tags": [], "owner": {"reputation": 651, "user_id": 4414208, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba49c295fe93fd2f72b774d5fb62646f?s=128&d=identicon&r=PG", "display_name": "Carter Chen", "link": "https://stackoverflow.com/users/4414208/carter-chen"}, "is_accepted": false, "score": 3, "last_activity_date": 1589273857, "creation_date": 1589273857, "answer_id": 61747638, "question_id": 45935788, "link": "https://stackoverflow.com/questions/45935788/nosuchmethoderror-java-lang-long-hashcode/61747638#61747638", "title": "NoSuchMethodError: java.lang.Long.hashCode", "body": "<p>I've encountered the same issue and the solution for me is to assign both <code>compileOptions</code> and <code>kotlinOptions</code> in build.gradle to version <strong>1.8</strong></p>\n\n<pre><code>android {\n  ...\n  // Configure only for each module that uses Java 8\n  // language features (either in its source code or\n  // through dependencies).\n  compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n  }\n  // For Kotlin projects\n  kotlinOptions {\n    jvmTarget = \"1.8\"\n  }\n}\n</code></pre>\n\n<p>Referenced from <a href=\"https://developer.android.com/studio/write/java8-support\" rel=\"nofollow noreferrer\">Use Java 8 language features</a> of Android Developers official website.</p>\n"}], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4217, "favorite_count": 4, "accepted_answer_id": 45939508, "answer_count": 4, "score": 22, "last_activity_date": 1589273857, "creation_date": 1503999858, "last_edit_date": 1504000677, "question_id": 45935788, "link": "https://stackoverflow.com/questions/45935788/nosuchmethoderror-java-lang-long-hashcode", "title": "NoSuchMethodError: java.lang.Long.hashCode", "body": "<p>I have the following override of method on <code>hashCode</code> in <code>AbstractORM</code> class:</p>\n\n<pre><code>var _id = Random().nextLong()\n\noverride fun getId() = _id // AbstractORM class implements an interface that defines this method getId()\n\noverride fun hashCode() = getId().hashCode()\n</code></pre>\n\n<p>which suddenly started to throw the following exception:</p>\n\n<pre><code>FATAL EXCEPTION: main\njava.lang.NoSuchMethodError: java.lang.Long.hashCode\n   at com.company.ormlite.AbstractORM.hashCode(AbstractORM.kt:271)\n   at java.util.HashMap.put(HashMap.java:390)\n   at java.util.HashSet.add(HashSet.java:95)\n   at kotlin.collections.ArraysKt___ArraysKt.toCollection(_Arrays.kt:6518)\n   at kotlin.collections.ArraysKt___ArraysKt.toSet(_Arrays.kt:6853)\n   at kotlin.collections.SetsKt__SetsKt.setOf(Sets.kt:32)\n   at com.company.android.tna.orm.DataManager.getTables(DataManager.kt:16)\n   at com.company.android.tna.orm.DataManager.getTables(DataManager.kt:10)\n   at com.company.android.core.utils.AbstractDataManager.create(AbstractDataManager.kt:25)\n   at com.company.android.core.utils.AbstractDataManager.start(AbstractDataManager.kt:44)\n   at com.company.android.core.utils.AbstractZKApplication.onCreate(AbstractZKApplication.kt:54)\n   at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:999)\n   at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4151)\n   at android.app.ActivityThread.access$1300(ActivityThread.java:130)\n   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)\n   at android.os.Handler.dispatchMessage(Handler.java:99)\n   at android.os.Looper.loop(Looper.java:137)\n   at android.app.ActivityThread.main(ActivityThread.java:4745)\n   at java.lang.reflect.Method.invokeNative(Native Method)\n   at java.lang.reflect.Method.invoke(Method.java:511)\n   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)\n   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\n   at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>This has me dumbfounded for several reasons:</p>\n\n<ul>\n<li>All classes in Java and Kotlin have <code>hashCode</code> method since it is inherited from <code>Object</code> or <code>Any</code>.</li>\n<li>How can it not find a method that is on the Android SDK itself? If the SDK is not present, how is it running at all?</li>\n<li>When inspecting that line of code in IntelliJ IDEA, it sends me to <code>kotlin.Any.hashCode</code>, not to <code>java.lang.Long.hashcode</code>.</li>\n</ul>\n\n<p>Any insights would be greatly appreciated, thanks in advance.</p>\n"}, {"tags": ["java", "android", "sqlite", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1503999534, "post_id": 45934565, "comment_id": 78829216, "body": "post your ListView adapter also."}, {"owner": {"reputation": 203, "user_id": 8529708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f797f0154fa1b5ee6bef6cd97ab2b7?s=128&d=identicon&r=PG&f=1", "display_name": "masc", "link": "https://stackoverflow.com/users/8529708/masc"}, "reply_to_user": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1503999853, "post_id": 45934565, "comment_id": 78829417, "body": "Done, what&#39;s the problem in your opinion?"}, {"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1504000409, "post_id": 45934565, "comment_id": 78829787, "body": "<code>getItemAtPosition()</code> method returns string that is the problem. Can you post same thing in Java also to understand it better?"}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "reply_to_user": {"reputation": 203, "user_id": 8529708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f797f0154fa1b5ee6bef6cd97ab2b7?s=128&d=identicon&r=PG&f=1", "display_name": "masc", "link": "https://stackoverflow.com/users/8529708/masc"}, "edited": false, "score": 0, "creation_date": 1504001393, "post_id": 45935989, "comment_id": 78830471, "body": "No problem, masc"}], "tags": [], "owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "is_accepted": true, "score": 0, "last_activity_date": 1504000463, "creation_date": 1504000463, "answer_id": 45935989, "question_id": 45934565, "link": "https://stackoverflow.com/questions/45934565/kotlin-android-database-cannot-cast-java-lang-string-to-android-database-cursor/45935989#45935989", "title": "Kotlin android database: cannot cast java.lang.String to android.database.Cursor", "body": "<p>Your <code>fun getAllTitles(): ArrayList&lt;String&gt;</code> it should be <code>fun getAllTitles(): ArrayList&lt;Cursor&gt;</code> if you want <code>getItemAtPosition()</code> to return a <code>Cursor</code></p>\n"}], "owner": {"reputation": 203, "user_id": 8529708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f797f0154fa1b5ee6bef6cd97ab2b7?s=128&d=identicon&r=PG&f=1", "display_name": "masc", "link": "https://stackoverflow.com/users/8529708/masc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 45935989, "answer_count": 1, "score": 0, "last_activity_date": 1504000463, "creation_date": 1503996440, "last_edit_date": 1503999811, "question_id": 45934565, "link": "https://stackoverflow.com/questions/45934565/kotlin-android-database-cannot-cast-java-lang-string-to-android-database-cursor", "title": "Kotlin android database: cannot cast java.lang.String to android.database.Cursor", "body": "<p>I'm developing a simple note app in Kotlin for Android which uses a simple sqlite database.\nI have already written it in java, but now I have some problems in Kotlin, in particular with a single line of code.<br><br>\nThis is the <strong>working</strong> java code by which I take the note ID when I click on it on the listview.</p>\n\n<pre><code>itemCursor = (Cursor) activity.listView.getItemAtPosition(position);\nnoteID = itemCursor.getInt(itemCursor.getColumnIndex(DBHelper.NOTES_COLUMN_ID));\nitemCursor = helper.getNote(noteID);\n</code></pre>\n\n<p>Then this should be the Kotlin code:</p>\n\n<pre><code>var itemCursor: Cursor = activity.listView.getItemAtPosition(position) as Cursor  **(error here on this line, look below for it)**\nvar noteID: Int = itemCursor.getInt(itemCursor.getColumnIndex(COLUMN_ID))\nitemCursor = helper.getNote(noteID)\n</code></pre>\n\n<blockquote>\n  <p>java.lang.ClassCastException: java.lang.String cannot be cast to\n  android.database.Cursor</p>\n</blockquote>\n\n<p>ListView adapter:</p>\n\n<pre><code>list_titles = helper.getAllTitles()\nlv_adapter = ArrayAdapter(activity, android.R.layout.simple_list_item_1, list_titles)\nv.listview.adapter = lv_adapter\n</code></pre>\n\n<p>getAllTitles fun:</p>\n\n<pre><code>fun getAllTitles(): ArrayList&lt;String&gt; {\n\n    val db = this.readableDatabase\n    var titles = ArrayList&lt;String&gt;()\n\n    db.select(TABLE_NAME).parseList(object : MapRowParser&lt;List&lt;String&gt;&gt; {\n\n        override fun parseRow(columns: Map&lt;String, Any?&gt;): ArrayList&lt;String&gt; {\n\n\n            val obj = columns.getValue(COLUMN_OBJ).toString()\n\n            titles.add(obj)\n\n            return titles\n        }\n    })\n\n\n    return titles\n\n}\n</code></pre>\n\n<p>I do not understand why in Kotlin it gives me this ClassCastException error since in Java is all smooth.</p>\n"}, {"tags": ["kotlin", "spring-webflux"], "answers": [{"tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": true, "score": 1, "last_activity_date": 1503994866, "last_edit_date": 1503994866, "creation_date": 1503993594, "answer_id": 45933702, "question_id": 45933475, "link": "https://stackoverflow.com/questions/45933475/spring-webflux-and-kotlin-support-how-to-do-integration-tests/45933702#45933702", "title": "Spring WebFlux and Kotlin Support: How to do Integration Tests?", "body": "<p>Have a look at <a href=\"https://github.com/sdeleuze/spring-kotlin-functional/blob/master/src/test/kotlin/functional/IntegrationTests.kt\" rel=\"nofollow noreferrer\">https://github.com/sdeleuze/spring-kotlin-functional/blob/master/src/test/kotlin/functional/IntegrationTests.kt</a></p>\n\n<p>The code of the tutorial is contained there. To cut it short: The <code>Application</code> is a class of your project, but just checkout the project <a href=\"https://github.com/sdeleuze/spring-kotlin-functional\" rel=\"nofollow noreferrer\">https://github.com/sdeleuze/spring-kotlin-functional</a></p>\n"}], "owner": {"reputation": 1642, "user_id": 3415077, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/89dc320cc357248f2882bb715c05a1f3?s=128&d=identicon&r=PG&f=1", "display_name": "Juergen Zimmermann", "link": "https://stackoverflow.com/users/3415077/juergen-zimmermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 45933702, "answer_count": 1, "score": 0, "last_activity_date": 1503994866, "creation_date": 1503992811, "question_id": 45933475, "link": "https://stackoverflow.com/questions/45933475/spring-webflux-and-kotlin-support-how-to-do-integration-tests", "title": "Spring WebFlux and Kotlin Support: How to do Integration Tests?", "body": "<p><a href=\"https://docs.spring.io/spring-framework/docs/5.0.0.BUILD-SNAPSHOT/spring-framework-reference/kotlin.html#easy-testing-kotlin-and-junit-5\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/5.0.0.BUILD-SNAPSHOT/spring-framework-reference/kotlin.html#easy-testing-kotlin-and-junit-5</a> shows a code sample for an integration test. However I do not understand this line:</p>\n\n<pre><code>val application = Application(8181)\n</code></pre>\n\n<p><code>8181</code> should be the port number. But where does <code>Application</code> come from? Is this the application class of a <em>Spring Boot</em> app?</p>\n"}, {"tags": ["android", "android-fragments", "tabs", "cursor", "kotlin"], "comments": [{"owner": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504024548, "post_id": 45933113, "comment_id": 78846805, "body": "I also notice that when I close the app and reopen the listview items on tab 1 vanish. I&#39;m doing something very wrong in regards to lifecycle but I cant seem to figure out what."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504026533, "post_id": 45933341, "comment_id": 78847837, "body": "Thanks for the advice.  Can you please elaborate on what you had in mind using notifyDataSetChanged()?"}], "tags": [], "owner": {"reputation": 553, "user_id": 1151701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8293573a315ac185e6375c501ad53baf?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Mehrpour", "link": "https://stackoverflow.com/users/1151701/ali-mehrpour"}, "is_accepted": false, "score": 0, "last_activity_date": 1503992333, "creation_date": 1503992333, "answer_id": 45933341, "question_id": 45933113, "link": "https://stackoverflow.com/questions/45933113/android-tab-3-is-clearing-the-list-view-from-tab-1/45933341#45933341", "title": "Android - Tab #3 is clearing the list view from Tab #1.", "body": "<p>In ViewPager, always current, left, and right pages (fragment) are live. whenever you click on Tab 3, the fragment in Tab 1 will be destroyed! When you back to Tab 1, the fragment in Tab 1 will be created again.</p>\n\n<p>Also, i'm not seeing \"notifyDataSetChanged()\" been called in IngredientsFragment's onViewCreated() fragment. I mean you should load data again from CursorAdapter.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504023920, "post_id": 45933354, "comment_id": 78846423, "body": "Thank you.  This solved the immediate problem but I feel like I&#39;m still not doing something correctly or as efficiently as I should be.  For example, I&#39;ve setup tabs before using an ArrayAdapter and listview and never ran into this issue or had to add the code you mentioned for each tab to load normally."}, {"owner": {"reputation": 6617, "user_id": 4951663, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y4L2S.png?s=128&g=1", "display_name": "Mohit Suthar", "link": "https://stackoverflow.com/users/4951663/mohit-suthar"}, "reply_to_user": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504067077, "post_id": 45933354, "comment_id": 78862016, "body": "i dint get it, have you facing some issue?"}], "tags": [], "owner": {"reputation": 6617, "user_id": 4951663, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y4L2S.png?s=128&g=1", "display_name": "Mohit Suthar", "link": "https://stackoverflow.com/users/4951663/mohit-suthar"}, "is_accepted": true, "score": 1, "last_activity_date": 1503992370, "creation_date": 1503992370, "answer_id": 45933354, "question_id": 45933113, "link": "https://stackoverflow.com/questions/45933113/android-tab-3-is-clearing-the-list-view-from-tab-1/45933354#45933354", "title": "Android - Tab #3 is clearing the list view from Tab #1.", "body": "<p>I think it's the default functionality of a <strong>view-pager</strong> that at that time of set Adapter view-pager load <strong>Two Fragments</strong>, when you move fragment 1 to 3 then it will release fragment 1 and wise versa,</p>\n\n<p>if you want to load all of the fragment at the first time than <strong>write</strong> one line after <strong>setAdapter</strong></p>\n\n<pre><code>view_pager_container.setOffscreenPageLimit(3);\n</code></pre>\n\n<p><strong>setOffscreenPageLimit()</strong> this method load all your three fragments at that time or never initialized again.</p>\n\n<p>Might be helpfull.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "edited": false, "score": 0, "creation_date": 1504023751, "post_id": 45933578, "comment_id": 78846327, "body": "How would you suggest I refine the getItem() function?  Each fragment will be very different for each tab.  I&#39;m very new to fragments."}], "tags": [], "owner": {"reputation": 535, "user_id": 3729805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5475b39d5a83a665169c59cd774a9b03?s=128&d=identicon&r=PG", "display_name": "Ben.Slama.Jihed", "link": "https://stackoverflow.com/users/3729805/ben-slama-jihed"}, "is_accepted": false, "score": 0, "last_activity_date": 1503993197, "creation_date": 1503993197, "answer_id": 45933578, "question_id": 45933113, "link": "https://stackoverflow.com/questions/45933113/android-tab-3-is-clearing-the-list-view-from-tab-1/45933578#45933578", "title": "Android - Tab #3 is clearing the list view from Tab #1.", "body": "<p>I advise against loading all at the same time for performance reasons, but if you want to do it I advise you to redefine the getItem() function on  your FragmentStatePagerAdapter</p>\n"}, {"tags": [], "owner": {"reputation": 4203, "user_id": 1339473, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/ToWE6.jpg?s=128&g=1", "display_name": "QuokMoon", "link": "https://stackoverflow.com/users/1339473/quokmoon"}, "is_accepted": false, "score": 1, "last_activity_date": 1503993552, "creation_date": 1503993552, "answer_id": 45933689, "question_id": 45933113, "link": "https://stackoverflow.com/questions/45933113/android-tab-3-is-clearing-the-list-view-from-tab-1/45933689#45933689", "title": "Android - Tab #3 is clearing the list view from Tab #1.", "body": "<p>As interpret your code not added limit of page that should load either side of current page.</p>\n\n<p><a href=\"https://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit(int)\" rel=\"nofollow noreferrer\">setOffscreenPageLimit(int)</a></p>\n\n<p>You can try this two solution:</p>\n\n<ol>\n<li>Just increaments value to 2(i.e setOffscreenPageLimit(2))</li>\n<li>Add code of list manipulation which set adapter in <a href=\"https://developer.android.com/reference/android/support/v4/app/Fragment.html#setUserVisibleHint(boolean)\" rel=\"nofollow noreferrer\">setUserVisibleHint</a> method.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 535, "user_id": 3729805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5475b39d5a83a665169c59cd774a9b03?s=128&d=identicon&r=PG", "display_name": "Ben.Slama.Jihed", "link": "https://stackoverflow.com/users/3729805/ben-slama-jihed"}, "is_accepted": false, "score": 0, "last_activity_date": 1508149337, "creation_date": 1508149337, "answer_id": 46768017, "question_id": 45933113, "link": "https://stackoverflow.com/questions/45933113/android-tab-3-is-clearing-the-list-view-from-tab-1/46768017#46768017", "title": "Android - Tab #3 is clearing the list view from Tab #1.", "body": "<p>Sorry i post  this sample on java  but  when copy-paste that on Android Studio this  will be automatically translate on Kotlin language : </p>\n\n<pre><code>private class MyDataViewPagerAdapter extends FragmentStatePagerAdapter {\n\nprivate MyDataViewPagerAdapter(FragmentManager fm) {\n  super(fm);\n}\n\n@Override\npublic Fragment getItem(int position) {\n  switch (position) {\n    case PAGE_ONE:\n      return FragmentOne.newInstance();\n    case PAGE_TWO:\n      return FragmentTwo.newInstance();\n    case PAGE_Three:\n    default:\n      return FragmentThree.newInstance();\n  }\n}\n\n@Override\npublic CharSequence getPageTitle(int position) {\n  switch (position) {\n    case PAGE_ONE:\n      return \"PAGE_ONE\";\n    case PAGE_TWO:\n      return \"PAGE_ONE\";\n    case PAGE_Three:\n    default:\n      return \"PAGE_ONE\";\n  }\n}\n\n@Override\npublic int getCount() {\n  return TOTAL_PAGE_COUNT;\n}\n\n\n }\n</code></pre>\n\n<p>inside your  activity : </p>\n\n<p>use that to  link TabLyout and View  pager : </p>\n\n<pre><code> // set adapter\nmPager.setAdapter(mPagerAdapter);\ntabs.setupWithViewPager(mPager);\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8401134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L_Z_b8mxt8A/AAAAAAAAAAI/AAAAAAAAAFs/TvGnEa1pQCU/photo.jpg?sz=128", "display_name": "Dallas", "link": "https://stackoverflow.com/users/8401134/dallas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 45933354, "answer_count": 5, "score": 0, "last_activity_date": 1508149337, "creation_date": 1503991502, "question_id": 45933113, "link": "https://stackoverflow.com/questions/45933113/android-tab-3-is-clearing-the-list-view-from-tab-1", "title": "Android - Tab #3 is clearing the list view from Tab #1.", "body": "<p>I have a really odd issue that isn't generating any errors so its extremely hard to troubleshoot (at least for me).  </p>\n\n<p>My app has 3 tabs.  Tab 1 has a list view inside a fragment and the other two tabs are basically empty placeholder fragments. When I click on Tab 1 and then Tab 2, then back to Tab 1, my list view remains as expected.  However if I click on Tab 3 then click on Tab 1, my list view disappears. I see no difference between Tab 2 and Tab 3 that would cause this.  </p>\n\n<p>I've added the related code from my app.  Please let me know if more is needed.</p>\n\n<p>Any help and advice would be much appreciated!  </p>\n\n<p>My Main Activity:</p>\n\n<pre><code>var mCursorAdapter: DbCursorAdapter? = null\n\n\nclass CatalogActivity : AppCompatActivity(), LoaderManager.LoaderCallbacks&lt;Cursor&gt; {\n\n\nprivate lateinit var mFragmentPagerAdapter: FragmentPagerAdapter\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_catalog)\n\n    setSupportActionBar(toolbar)\n\n    // Create the adapter that will return a fragment for each of the three\n    // primary sections of the activity.\n    mFragmentPagerAdapter = FragmentPagerAdapter(supportFragmentManager)\n\n    // Set up the ViewPager with the sections adapter.\n    view_pager_container.adapter = mFragmentPagerAdapter\n\n    view_pager_container.addOnPageChangeListener(TabLayout.TabLayoutOnPageChangeListener(tabs))\n    tabs.addOnTabSelectedListener(TabLayout.ViewPagerOnTabSelectedListener(view_pager_container))\n\n    // Setup FAB to open EditorActivity\n    fab_button.setOnClickListener {\n        val intent = Intent(this@CatalogActivity, EditorActivity::class.java)\n        startActivity(intent)\n    }\n\n\n    // Kick off the loader\n    loaderManager.initLoader(INGREDIENT_LOADER, null, this)\n}\n\n/**\n * Helper method to insert hardcoded ingredient data into the database. For debugging purposes only.\n */\nprivate fun insertIngredient() {\n    // Create a ContentValues object where column names are the keys,\n    // and Rittenhouse Rye Whiskey attributes are the values.\n    val values = ContentValues()\n    values.put(IngredientEntry.COLUMN_INGREDIENT_NAME, \"Rittenhouse Rye\")\n    values.put(IngredientEntry.COLUMN_INGREDIENT_DESCRIPTION, \"Earthly with a sweet finish.\")\n    values.put(IngredientEntry.COLUMN_INGREDIENT_CATEGORY, IngredientEntry.CATEGORY_WHISKEY)\n    values.put(IngredientEntry.COLUMN_INGREDIENT_WEIGHT, 1)\n\n    // Insert a new row for Rittenhouse Rye Whiskey into the provider using the ContentResolver.\n    // Use the {@link IngredientEntry#CONTENT_URI} to indicate that we want to insert\n    // into the ingredients database table.\n    // Receive the new content URI that will allow us to access Rittenhouse's data in the future.\n    contentResolver.insert(IngredientEntry.CONTENT_URI, values)\n}\n\n/**\n * Helper method to delete all ingredients in the database.\n */\nprivate fun deleteAllIngredients() {\n    val rowsDeleted = contentResolver.delete(IngredientEntry.CONTENT_URI, null, null)\n    Log.v(\"CatalogActivity\", rowsDeleted.toString() + \" rows deleted from ingredient database\")\n}\n\noverride fun onCreateOptionsMenu(menu: Menu): Boolean {\n    // Inflate the menu options from the res/menu/menu_catalog.xml file.\n    // This adds menu items to the app bar.\n    menuInflater.inflate(R.menu.menu_catalog, menu)\n    return true\n}\n\noverride fun onOptionsItemSelected(item: MenuItem): Boolean {\n    // User clicked on a menu option in the app bar overflow menu\n    when (item.itemId) {\n    // Respond to a click on the \"Insert dummy data\" menu option\n        R.id.action_insert_dummy_data -&gt; {\n            insertIngredient()\n            return true\n        }\n    // Respond to a click on the \"Delete all entries\" menu option\n        R.id.action_delete_all_entries -&gt; {\n            deleteAllIngredients()\n            return true\n        }\n    }\n    return super.onOptionsItemSelected(item)\n}\n\n\noverride fun onCreateLoader(i: Int, bundle: Bundle?): Loader&lt;Cursor&gt; {\n    // Define a projection that specifies the columns from the table we care about.\n    val projection = arrayOf(IngredientEntry._ID, IngredientEntry.COLUMN_INGREDIENT_NAME, IngredientEntry.COLUMN_INGREDIENT_DESCRIPTION)\n\n    // This loader will execute the DbContentProvider's query method on a background thread\n    return CursorLoader(this, // Parent activity context\n            IngredientEntry.CONTENT_URI, // Provider content URI to query\n            projection, null, null, null)// Columns to include in the resulting Cursor\n    // No selection clause\n    // No selection arguments\n    // Default sort order\n}\n\noverride fun onLoadFinished(loader: Loader&lt;Cursor&gt;, data: Cursor) {\n    // Update {@link DbCursorAdapter} with this new cursor containing updated ingredients data\n    mCursorAdapter?.swapCursor(data)\n}\n\noverride fun onLoaderReset(loader: Loader&lt;Cursor&gt;) {\n    // Callback called when the data needs to be deleted\n    mCursorAdapter?.swapCursor(null)\n}\n\ncompanion object {\n\n    /** Identifier for the ingredients data loader  */\n    private val INGREDIENT_LOADER = 0\n}\n}\n</code></pre>\n\n<p>My Ingredient Fragment:</p>\n\n<pre><code>class IngredientsFragment : Fragment() {\n\n\noverride fun onAttach(context: Context?) {\n    super.onAttach(context)\n}\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n\n}\n\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n    return inflater.inflate(R.layout.fragment_ingredient, container, false)\n}\n\noverride fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n\n    // Set empty view on the ListView, so that it only shows when the ingredient_list_view has 0 items.\n    ingredient_list_view.emptyView = empty_view\n\n    // Setup an Adapter to create a ingredient_list_view item for each row of ingredient data in the Cursor.\n    // There is no ingredient data yet (until the loader finishes) so pass in null for the Cursor.\n    mCursorAdapter = DbCursorAdapter(context, null)\n    ingredient_list_view.adapter = mCursorAdapter\n\n    // Setup the item click listener\n    ingredient_list_view.onItemClickListener = AdapterView.OnItemClickListener { _: AdapterView&lt;*&gt;?, _: View?, _: Int, id: Long -&gt;\n        // Create new intent to go to {@link EditorActivity}\n        val intent = Intent(context, EditorActivity::class.java)\n\n        // Form the content URI that represents the specific ingredient that was clicked on,\n        // by appending the \"id\" (passed as input to this method) onto the\n        // {@link IngredientEntry#CONTENT_URI}.\n        // For example, the URI would be \"content://onCreateDesigns.com.CraftCocktailRecipes.ingredients/ingredients/2\"\n        // if the ingredient with ID 2 was clicked on.\n        val currentUri = ContentUris.withAppendedId(DbContract.IngredientEntry.CONTENT_URI, id)\n\n        // Set the URI on the data field of the intent\n        intent.data = currentUri\n\n        // Launch the {@link EditorActivity} to display the data for the current ingredient.\n        startActivity(intent)\n    }\n}\n\n\noverride fun onDetach() {\n    super.onDetach()\n}\n\n\noverride fun onActivityCreated(savedInstanceState: Bundle?) {\n    super.onActivityCreated(savedInstanceState)\n}\n}\n</code></pre>\n\n<p>My Adapter:</p>\n\n<pre><code>class FragmentPagerAdapter(fm: FragmentManager) : SmartFragmentStatePagerAdapter(fm) {\n\noverride fun getItem(position: Int): Fragment {\n    return when (position) {\n        0 -&gt; IngredientsFragment()\n        1 -&gt; RecipesFragment()\n        else -&gt; FavoritesFragment()\n\n    }\n}\n\noverride fun getCount(): Int {\n    // Show 3 total pages.\n    return 3\n}\n}\n</code></pre>\n\n<p>My Ingredient Fragment:</p>\n\n<pre><code>&lt;RelativeLayout\nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\"onCreateDesigns.com.CraftCocktailRecipes.IngredientsFragment\"&gt;\n\n&lt;ListView\n    android:id=\"@+id/ingredient_list_view\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"/&gt;\n\n&lt;!-- Empty view for ingredient_list_view list --&gt;\n&lt;RelativeLayout\n    android:id=\"@+id/empty_view\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_centerInParent=\"true\"&gt;\n\n    &lt;ImageView\n        android:id=\"@+id/empty_shelter_image\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerHorizontal=\"true\"\n        android:src=\"@drawable/ic_empty_shelter\"\n        android:contentDescription=\"@string/empty_shelter\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/empty_title_text\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_below=\"@+id/empty_shelter_image\"\n        android:layout_centerHorizontal=\"true\"\n        android:fontFamily=\"sans-serif-medium\"\n        android:paddingTop=\"16dp\"\n        android:text=\"@string/empty_view_title_text\"\n        android:textAppearance=\"?android:textAppearanceMedium\"/&gt;\n\n    &lt;TextView\n        android:id=\"@+id/empty_subtitle_text\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_below=\"@+id/empty_title_text\"\n        android:layout_centerHorizontal=\"true\"\n        android:fontFamily=\"sans-serif\"\n        android:paddingTop=\"8dp\"\n        android:text=\"@string/empty_view_subtitle_text_ingredients\"\n        android:textAppearance=\"?android:textAppearanceSmall\"\n        android:textColor=\"#A2AAB0\"/&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["java", "string", "kotlin", "interpolation"], "comments": [{"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 2, "creation_date": 1503986812, "post_id": 45931727, "comment_id": 78821606, "body": "Who said decompiled code = byte code?"}, {"owner": {"reputation": 595, "user_id": 3501944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6fd0518034a1d6d2c1fb32f34ecea97?s=128&d=identicon&r=PG&f=1", "display_name": "user218046", "link": "https://stackoverflow.com/users/3501944/user218046"}, "reply_to_user": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1503986962, "post_id": 45931727, "comment_id": 78821678, "body": "@AbhijitSarkar So, I&#39;ve been wrong. In bytecode it might be one string but when I decompile it, it is plus sign? Oh, O.K. Maybe that&#39;s how it is."}, {"owner": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "edited": false, "score": 0, "creation_date": 1575482152, "post_id": 45931727, "comment_id": 104584987, "body": "Note that the Java compiler compiles string concatenation (with plus signs) into bytecode that uses StringBuilder. So that makes this question moot."}], "answers": [{"tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": true, "score": 14, "last_activity_date": 1503986937, "creation_date": 1503986937, "answer_id": 45931797, "question_id": 45931727, "link": "https://stackoverflow.com/questions/45931727/why-is-kotlins-string-interpolation-concatenating-strings-in-java/45931797#45931797", "title": "Why is Kotlin&#39;s string interpolation concatenating strings in Java?", "body": "<p>The answer is easy: It doesn't </p>\n\n<p>I guess your decompiler is quite sophisticated and also translates the <code>StringBuilder</code>-append operations to the good old <code>+</code> concationation.</p>\n\n<p>So if you have a look at the bytecode you see that <code>StringBuilder</code> is used.</p>\n\n<pre><code>public main(java.lang.String[] arg0) { //([Ljava/lang/String;)V\n     &lt;localVar:index=3 , name=mySuperString , desc=Ljava/lang/String;, sig=null, start=L1, end=L2&gt;\n     &lt;localVar:index=2 , name=age , desc=I, sig=null, start=L3, end=L2&gt;\n     &lt;localVar:index=0 , name=this , desc=Lorg/guenhter/springboot/kt/RandomReceivingController;, sig=null, start=L4, end=L2&gt;\n     &lt;localVar:index=1 , name=args , desc=[Ljava/lang/String;, sig=null, start=L4, end=L2&gt;\n\n     L4 {\n         aload1\n         ldc \"args\" (java.lang.String)\n         invokestatic kotlin/jvm/internal/Intrinsics checkParameterIsNotNull((Ljava/lang/Object;Ljava/lang/String;)V);\n     }\n     L5 {\n         bipush 24\n         istore2\n     }\n     L3 {\n         new java/lang/StringBuilder\n         dup\n         invokespecial java/lang/StringBuilder &lt;init&gt;(()V);\n         ldc \"Dato is \" (java.lang.String)\n         invokevirtual java/lang/StringBuilder append((Ljava/lang/String;)Ljava/lang/StringBuilder;);\n         iload2\n         invokevirtual java/lang/StringBuilder append((I)Ljava/lang/StringBuilder;);\n         ldc \" years old!\" (java.lang.String)\n         invokevirtual java/lang/StringBuilder append((Ljava/lang/String;)Ljava/lang/StringBuilder;);\n         invokevirtual java/lang/StringBuilder toString(()Ljava/lang/String;);\n         astore3\n     }\n     L1 {\n         getstatic java/lang/System.out:java.io.PrintStream\n         aload3\n         invokevirtual java/io/PrintStream println((Ljava/lang/Object;)V);\n     }\n     L6 {\n         return\n     }\n     L2 {\n     }\n }\n</code></pre>\n"}], "owner": {"reputation": 595, "user_id": 3501944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6fd0518034a1d6d2c1fb32f34ecea97?s=128&d=identicon&r=PG&f=1", "display_name": "user218046", "link": "https://stackoverflow.com/users/3501944/user218046"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2545, "favorite_count": 1, "accepted_answer_id": 45931797, "answer_count": 1, "score": 8, "last_activity_date": 1503986937, "creation_date": 1503986631, "question_id": 45931727, "link": "https://stackoverflow.com/questions/45931727/why-is-kotlins-string-interpolation-concatenating-strings-in-java", "title": "Why is Kotlin&#39;s string interpolation concatenating strings in Java?", "body": "<p>So, basically I've wondered how would Kotlin's string interpolation look in Java (decompiled bytecode). At first I've thought it would use StringBuffer (or StringBuilder), or String.format(), but it seems that it does concatenation. Is it really optimal to do so and what about the String Pool?</p>\n\n<p>Here is my Kotlin code:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n\n    val age : Int = 24\n    var mySuperString : String = \"Dato is ${age} years old!\"\n\n    println(mySuperString)\n}\n</code></pre>\n\n<p>And here is the Java code which I've decompiled form *.class file:</p>\n\n<pre><code>import java.io.PrintStream;\nimport kotlin.Metadata;\nimport kotlin.jvm.internal.Intrinsics;\nimport org.jetbrains.annotations.NotNull;\n\n@Metadata(mv={1, 1, 6}, bv={1, 0, 1}, k=2, d1={\"\\000\\024\\n\\000\\n\\002\\020\\002\\n\\000\\n\\002\\020\\021\\n\\002\\020\\016\\n\\002\\b\\002\\032\\031\\020\\000\\032\\0020\\0012\\f\\020\\002\\032\\b\\022\\004\\022\\0020\\0040\\003\ufffd\\006\\002\\020\\005\ufffd\\006\\006\"}, d2={\"main\", \"\", \"args\", \"\", \"\", \"([Ljava/lang/String;)V\", \"KotlinProject\"})\npublic final class MainKt\n{\n  public static final void main(@NotNull String[] args)\n  {\n    Intrinsics.checkParameterIsNotNull(args, \"args\");int age = 24;\n    String mySuperString = \"Dato is \" + age + \" years old!\";\n\n    System.out.println(mySuperString);\n  }\n}\n</code></pre>\n\n<p>Even when the string is huge and values are a lot, it still uses the plus signs!</p>\n\n<p>Is this the fastest way or why are they doing this?</p>\n"}, {"tags": ["android", "kotlin", "rx-java2"], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "edited": false, "score": 0, "creation_date": 1504003551, "post_id": 45936517, "comment_id": 78831908, "body": "thanks @chandil03. Yeah, I know that idea of publish. But take a look at this <a href=\"http://jakewharton.com/the-state-of-managing-state-with-rxjava/\" rel=\"nofollow noreferrer\">link</a> on slide 180. Why need to publish before calling <code>Observable.merge()</code>"}, {"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "reply_to_user": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "edited": false, "score": 0, "creation_date": 1504004912, "post_id": 45936517, "comment_id": 78832788, "body": "@NovoDimaporo please check edits and let me know, if you have any doubt."}, {"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "edited": false, "score": 0, "creation_date": 1504008837, "post_id": 45936517, "comment_id": 78835552, "body": "Well if you could see the whole code, there is only 1 subscription that happen, there is no further subsription. And as you could see its use inside an observableTransformer, the published observable is not actually shown outside except on the &#39;Observable.merge()&#39;, so whats the use of it?"}, {"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "reply_to_user": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "edited": false, "score": 0, "creation_date": 1504009147, "post_id": 45936517, "comment_id": 78835748, "body": "@NovoDimaporo why are you taking simple case? Simple case most often does not depicts the real use case. What if you need to use two subscriber. And what if you want your observer to emit items after a set of operations using <code>connect()</code> operator. If you do not have any of the use case described , then yes there is no use of <code>publish</code> operator here."}, {"owner": {"reputation": 1372, "user_id": 3861273, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c11bdd0e1caaf2490931fd7137e32ba?s=128&d=identicon&r=PG&f=1", "display_name": "HiddenDroid", "link": "https://stackoverflow.com/users/3861273/hiddendroid"}, "edited": false, "score": 0, "creation_date": 1579784614, "post_id": 45936517, "comment_id": 105887671, "body": "@chandil03 What &quot;Hohenheim&quot; is talking about is the publish operator which takes a function as a parameter (this returns an Observable and not a ConnectableObservable) and not the publish() operator with no parameters."}], "tags": [], "owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "is_accepted": false, "score": 2, "last_activity_date": 1504004874, "last_edit_date": 1504004874, "creation_date": 1504001844, "answer_id": 45936517, "question_id": 45930560, "link": "https://stackoverflow.com/questions/45930560/rxjava2-publish/45936517#45936517", "title": "RxJava2 Publish", "body": "<p><code>publish</code> operator converts your Observable to <code>Connectable Observable</code>.</p>\n\n<p>Lets see what does <code>Connectable Observable</code> mean: Suppose you want to subscribe an observable multiple time and want to serve same items to each subscriber. You need to use <code>Connectable Observable</code>. </p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>var period = TimeSpan.FromSeconds(1);\nvar observable = Observable.Interval(period).Publish();\nobservable.Connect();\nobservable.Subscribe(i =&gt; Console.WriteLine(\"first subscription : {0}\", i));\nThread.Sleep(period);\nobservable.Subscribe(i =&gt; Console.WriteLine(\"second subscription : {0}\", i));\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>first subscription : 0 \nfirst subscription : 1 \nsecond subscription : 1 \nfirst subscription : 2 \nsecond subscription : 2\n</code></pre>\n\n<p>In this case, we are quick enough to subscribe before the first item is published, but only on the first subscription. The second subscription subscribes late and misses the first publication.</p>\n\n<p>We could move the invocation of the Connect() method until after all subscriptions have been made. That way, even with the call to Thread.Sleep we will not really subscribe to the underlying until after both subscriptions are made. This would be done as follows:</p>\n\n<pre><code>var period = TimeSpan.FromSeconds(1);\nvar observable = Observable.Interval(period).Publish();\nobservable.Subscribe(i =&gt; Console.WriteLine(\"first subscription : {0}\", i));\nThread.Sleep(period);\nobservable.Subscribe(i =&gt; Console.WriteLine(\"second subscription : {0}\", i));\nobservable.Connect();\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>first subscription : 0 \nsecond subscription : 0 \nfirst subscription : 1 \nsecond subscription : 1 \nfirst subscription : 2 \nsecond subscription : 2 \n</code></pre>\n\n<p>So using Completable Observable, we have a way to control when to let Observable emit items.</p>\n\n<p>Example taken from : <a href=\"http://www.introtorx.com/Content/v1.0.10621.0/14_HotAndColdObservables.html#PublishAndConnect\" rel=\"nofollow noreferrer\">http://www.introtorx.com/Content/v1.0.10621.0/14_HotAndColdObservables.html#PublishAndConnect</a></p>\n\n<p><strong>EDIT</strong>\nAccording to 180th slide in <a href=\"http://jakewharton.com/the-state-of-managing-state-with-rxjava/\" rel=\"nofollow noreferrer\">this link</a>:</p>\n\n<p>Another nature of publish is that if any observer start observing after 10 seconds of observable started emitting items, observer gets only items those were emitted after 10 seconds(at the time of subscription) not all the items. So in sides, as i could understood that publish is being used for UI events. And it totally makes sense that any observer should only receive those events that has been performed after it has subscribed NOT all the events happened before. </p>\n\n<p>Hope it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "edited": false, "score": 4, "creation_date": 1504090014, "post_id": 45958009, "comment_id": 78874346, "body": "Ive been using this from Jake Wharton speech &quot;managing states&quot;, I dont know what it does until now. Thats so concise and clear, thank you so much."}], "tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 24, "last_activity_date": 1504090516, "last_edit_date": 1504090516, "creation_date": 1504088943, "answer_id": 45958009, "question_id": 45930560, "link": "https://stackoverflow.com/questions/45930560/rxjava2-publish/45958009#45958009", "title": "RxJava2 Publish", "body": "<p>The difference is that the top transformer will subscribe to the upstream twice for a single subscription from the downstream, duplicating any side effects of the upstream which is usually not wanted:</p>\n\n<pre><code>Observable&lt;Object&gt; mixedSource = Observable.&lt;Object&gt;just(\"a\", 1, \"b\", 2, \"c\", 3)\n      .doOnSubscribe(s -&gt; System.out.println(\"Subscribed!\"));\n\n\nmixedSource.compose(f -&gt;\n   Observable.merge(\n      f.ofType(Integer.class).compose(g -&gt; g.map(v -&gt; v + 1)),\n      f.ofType(String.class).compose(g -&gt; g.map(v -&gt; v.toUpperCase()))\n   )\n)\n.subscribe(System.out::println);\n</code></pre>\n\n<p>will print</p>\n\n<pre><code>Subscribed!\n2\n3\n4\nSubscribed!\nA\nB\nC\n</code></pre>\n\n<p>The side-effect represented here is the printout <code>Subscribed!</code> Depending on the actual work in a real source, that could mean sending an email twice, retrieving the rows of a table twice. With this particular example, you can see that even if the source values are interleaved in their type, the output contains them separately.</p>\n\n<p>In contrast, <code>publish(Function)</code> will establish one subscription to the source per one end subscriber, thus any side-effects at the source only happen once.</p>\n\n<pre><code>mixedSource.publish(f -&gt;\n   Observable.merge(\n      f.ofType(Integer.class).compose(g -&gt; g.map(v -&gt; v + 1)),\n      f.ofType(String.class).compose(g -&gt; g.map(v -&gt; v.toUpperCase()))\n   )\n)\n.subscribe(System.out::println);\n</code></pre>\n\n<p>which prints</p>\n\n<pre><code>Subscribed!\nA\n2\nB\n3\nC\n4\n</code></pre>\n\n<p>because the source is subscribed once and each item is multicast to the two \"arms\" of the <code>.ofType().compose()</code>.</p>\n"}], "owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2108, "favorite_count": 3, "accepted_answer_id": 45958009, "answer_count": 2, "score": 8, "last_activity_date": 1504090516, "creation_date": 1503979937, "last_edit_date": 1504084683, "question_id": 45930560, "link": "https://stackoverflow.com/questions/45930560/rxjava2-publish", "title": "RxJava2 Publish", "body": "<p>What is the difference between</p>\n\n<pre><code>ObservableTransformer {\n    Observable.merge(\n        it.ofType(x).compose(transformerherex),\n        it.ofType(y).compose(transformerherey)\n    )\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>ObservableTransformer {\n    it.publish{ shared -&gt;\n        Observable.merge(\n            shared.ofType(x).compose(transformerherex),\n            shared.ofType(y).compose(transformerherey)\n        )\n    }\n}\n</code></pre>\n\n<p>when I run my code using this two, I got the same results. What does publish do here.</p>\n"}, {"tags": ["javascript", "compilation", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 403, "user_id": 4083820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b5a9a5f9469a566fe4a0574ef86101?s=128&d=identicon&r=PG&f=1", "display_name": "C.A.B.", "link": "https://stackoverflow.com/users/4083820/c-a-b"}, "is_accepted": false, "score": 3, "last_activity_date": 1503974599, "creation_date": 1503974599, "answer_id": 45929944, "question_id": 45929705, "link": "https://stackoverflow.com/questions/45929705/how-to-call-javascript-function-from-kotlin-code/45929944#45929944", "title": "How to call Javascript function from Kotlin code?", "body": "<p>I found that latest way to declare Javascript function in Kotlin is:</p>\n\n<pre><code>external fun encodeURIComponent(str: String): String\n</code></pre>\n\n<p>Once added it to the Kotlin class everything get compiled without a problem.</p>\n"}], "owner": {"reputation": 403, "user_id": 4083820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b5a9a5f9469a566fe4a0574ef86101?s=128&d=identicon&r=PG&f=1", "display_name": "C.A.B.", "link": "https://stackoverflow.com/users/4083820/c-a-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1503974599, "creation_date": 1503972726, "question_id": 45929705, "link": "https://stackoverflow.com/questions/45929705/how-to-call-javascript-function-from-kotlin-code", "title": "How to call Javascript function from Kotlin code?", "body": "<p>I am trying to compile Kotlin code as Javascript. In my code I need to encode string as URI. My 2 variants are both fail compilation:</p>\n\n<pre><code>class PlaceholderJS(prefix: String, placeholder: String?): Placeholder(prefix, placeholder) {\noverride fun encode(str: String): String {\n    return encodeURIComponent(str)\n}\n</code></pre>\n\n<p>In this code compiler cannot find function encodeURIComponent(str), which according to <a href=\"https://www.w3schools.com/jsref/jsref_encodeuricomponent.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/jsref/jsref_encodeuricomponent.asp</a> is supported by all browsers.</p>\n\n<p>Alternative:</p>\n\n<pre><code>class PlaceholderJS(prefix: String, placeholder: String?): Placeholder(prefix, placeholder) {\noverride fun encode(str: String): String {\n    return URLEncoder.encode(str, Charsets.UTF_8.name())\n} \n</code></pre>\n\n<p>cannot find Java class URLEncoder (imported in the file as in Java). This works when compiled for JVM, but not JS.</p>\n\n<p>Also I have Kotlin module marked with:</p>\n\n<pre><code>compileKotlin2Js.kotlinOptions.moduleKind = \"umd\"\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1503972791, "post_id": 45929687, "comment_id": 78818005, "body": "I think you want <code>replaceAll</code>?"}, {"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 0, "creation_date": 1503972834, "post_id": 45929687, "comment_id": 78818023, "body": "<code>String.replace</code> searches for a literal string, while <code>String.replaceAll</code> searches for a regular expression."}, {"owner": {"reputation": 148157, "user_id": 35364, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f11512869fe2f8d87a2f2b687b76686c?s=128&d=identicon&r=PG", "display_name": "hasen", "link": "https://stackoverflow.com/users/35364/hasen"}, "edited": false, "score": 0, "creation_date": 1503972895, "post_id": 45929687, "comment_id": 78818033, "body": "You have to create a regex object. Otherwise you&#39;re just replacing occurrences of the literal string <code>[^A-Za-z0-9 ]</code> which is obviously not in your input."}, {"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 6, "creation_date": 1503973449, "post_id": 45929687, "comment_id": 78818167, "body": "Although my suggestion (<code>replaceAll</code>) would work in Java, Kotlin has its own <code>String</code> class, which does not contain a definition for <code>replaceAll</code>. So please disregard my suggestion."}], "answers": [{"comments": [{"owner": {"reputation": 10715, "user_id": 1245894, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/72520e15af979287dc0e5ef6cac10267?s=128&d=identicon&r=PG&f=1", "display_name": "Distwo", "link": "https://stackoverflow.com/users/1245894/distwo"}, "edited": false, "score": 7, "creation_date": 1503973389, "post_id": 45929744, "comment_id": 78818153, "body": "Going with <code>val answer = answerEditText.text.toString().replace(&quot;[^A-Za-z0-9 ]&quot;.toRegex(), &quot;&quot;).toLowerCase()</code>"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1525946416, "post_id": 45929744, "comment_id": 87557803, "body": "Alternatively <code>(?i)[^\\\\w\\\\d ]</code> - case insensitive checks using \\w and \\d instead of manually typing the matches"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "reply_to_user": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1532535676, "post_id": 45929744, "comment_id": 90015984, "body": "@AbhijitSarkar, Swift also has extension functions. :)"}, {"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "reply_to_user": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1532538203, "post_id": 45929744, "comment_id": 90017222, "body": "@CoolMind Many languages do. My comment was with regards to the answer above, not in general applicable to all the languages that exist."}], "tags": [], "owner": {"reputation": 148157, "user_id": 35364, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f11512869fe2f8d87a2f2b687b76686c?s=128&d=identicon&r=PG", "display_name": "hasen", "link": "https://stackoverflow.com/users/35364/hasen"}, "is_accepted": true, "score": 74, "last_activity_date": 1503973172, "last_edit_date": 1503973172, "creation_date": 1503973111, "answer_id": 45929744, "question_id": 45929687, "link": "https://stackoverflow.com/questions/45929687/kotlin-remove-all-non-alphanumeric-characters/45929744#45929744", "title": "Kotlin Remove all non alphanumeric characters", "body": "<p>You need to create a regex object</p>\n\n<pre><code>var answer = \"Test. ,replace\"\nprintln(answer)\nanswer = answer.replace(\"[^A-Za-z0-9 ]\", \"\") // doesn't work\nprintln(answer)\nval re = Regex(\"[^A-Za-z0-9 ]\")\nanswer = re.replace(answer, \"\") // works\nprintln(answer)\n</code></pre>\n\n<p>Try it online: <a href=\"https://try.kotlinlang.org/#/UserProjects/ttqm0r6lisi743f2dltveid1u9/2olerk6jvb10l03q6bkk1lapjn\" rel=\"noreferrer\">https://try.kotlinlang.org/#/UserProjects/ttqm0r6lisi743f2dltveid1u9/2olerk6jvb10l03q6bkk1lapjn</a></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 10525395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xpgJDEdKINo/AAAAAAAAAAI/AAAAAAAAB1A/i4Fr-gQiWiA/photo.jpg?sz=128", "display_name": "Sergey Motyrev", "link": "https://stackoverflow.com/users/10525395/sergey-motyrev"}, "is_accepted": false, "score": 1, "last_activity_date": 1554405250, "last_edit_date": 1554405250, "creation_date": 1554404324, "answer_id": 55523178, "question_id": 45929687, "link": "https://stackoverflow.com/questions/45929687/kotlin-remove-all-non-alphanumeric-characters/55523178#55523178", "title": "Kotlin Remove all non alphanumeric characters", "body": "<p>You can try without regex, for example:</p>\n\n<pre><code>val ranges = ('0'..'9') + ('a'..'z') + ('A'..'Z')\nval escaped = \"1! at __ 2? at 345..0986 ZOk\".filter { it in ranges }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5236, "user_id": 692167, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/414107f42456622acd7bb1d083f0b074?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/692167/tom"}, "edited": false, "score": 1, "creation_date": 1560813198, "post_id": 55874470, "comment_id": 99850656, "body": "I&#39;d be interested in seeing what the performance of this was once reduced to bytecode"}, {"owner": {"reputation": 148157, "user_id": 35364, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f11512869fe2f8d87a2f2b687b76686c?s=128&d=identicon&r=PG", "display_name": "hasen", "link": "https://stackoverflow.com/users/35364/hasen"}, "edited": false, "score": 0, "creation_date": 1595989393, "post_id": 55874470, "comment_id": 111662098, "body": "This seems wasteful as it creates two temporary arrays, and doesn&#39;t really increase maintainability in any real sense. It just &quot;feels&quot; nice because it&#39;s &quot;functional&quot;."}], "tags": [], "owner": {"reputation": 141, "user_id": 8776943, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o9hx6zOkVpg/AAAAAAAAAAI/AAAAAAAAqTg/bHkIS_CzVIs/photo.jpg?sz=128", "display_name": "Kyle Luce", "link": "https://stackoverflow.com/users/8776943/kyle-luce"}, "is_accepted": false, "score": 14, "last_activity_date": 1556310059, "creation_date": 1556310059, "answer_id": 55874470, "question_id": 45929687, "link": "https://stackoverflow.com/questions/45929687/kotlin-remove-all-non-alphanumeric-characters/55874470#55874470", "title": "Kotlin Remove all non alphanumeric characters", "body": "<p>I find this to be much more succinct and maintainable.  Could be that the previous answers were made before these extensions were added?</p>\n\n<pre><code>val alphaNumericString = someString.toCharArray()\n   .filter { it.isLetterOrDigit() }\n   .joinToString(separator = \"\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1019, "user_id": 4780746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lkniZ.png?s=128&g=1", "display_name": "Mad Scientist Moses", "link": "https://stackoverflow.com/users/4780746/mad-scientist-moses"}, "is_accepted": false, "score": 39, "last_activity_date": 1564690251, "creation_date": 1564690251, "answer_id": 57316352, "question_id": 45929687, "link": "https://stackoverflow.com/questions/45929687/kotlin-remove-all-non-alphanumeric-characters/57316352#57316352", "title": "Kotlin Remove all non alphanumeric characters", "body": "<p>The standard library of Kotlin is beautiful like this.  Just use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/filter.html\" rel=\"noreferrer\">String.filter</a> combined with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/is-letter-or-digit.html\" rel=\"noreferrer\">Char.isLetterOrDigit</a>, like this:</p>\n\n<pre><code>val stringToFilter = \"A1.2-b3_4C\"\nval stringWithOnlyDigits = stringToFilter.filter { it.isLetterOrDigit() }\nprintln(stringWithOnlyDigits) //Prints out \"A12b34C\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1350, "user_id": 10445540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca713c1a1ae615695267f4e23b8d5f5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Botnev", "link": "https://stackoverflow.com/users/10445540/artem-botnev"}, "is_accepted": false, "score": 5, "last_activity_date": 1568121672, "creation_date": 1568121672, "answer_id": 57871762, "question_id": 45929687, "link": "https://stackoverflow.com/questions/45929687/kotlin-remove-all-non-alphanumeric-characters/57871762#57871762", "title": "Kotlin Remove all non alphanumeric characters", "body": "<p>I think it's easiest way:</p>\n\n<pre><code>fun String.toNumericString() = this.filter { it.isDigit() }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2213, "user_id": 1490636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMa7z.jpg?s=128&g=1", "display_name": "Maksim Kostromin", "link": "https://stackoverflow.com/users/1490636/maksim-kostromin"}, "is_accepted": false, "score": 2, "last_activity_date": 1571493106, "last_edit_date": 1571493106, "creation_date": 1571492788, "answer_id": 58464337, "question_id": 45929687, "link": "https://stackoverflow.com/questions/45929687/kotlin-remove-all-non-alphanumeric-characters/58464337#58464337", "title": "Kotlin Remove all non alphanumeric characters", "body": "<p>Kotlin thinks you substituting string, but not regex, so you should help a little bit to choose right method signature with regex as a first argument. </p>\n\n<p>Use Regex type explicitly instead of string:</p>\n\n<pre><code>\"[^A-Za-z0-9 ]\".toRegex()\n</code></pre>\n\n<p>or tell that you are passing named regex parameter:</p>\n\n<pre><code>answer.replace(regex = \"[^A-Za-z0-9 ]\", \"\")\n</code></pre>\n\n<p>and in this case kotlin wont compile unless you pass real regex, not string</p>\n"}, {"comments": [{"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1602495232, "post_id": 58618573, "comment_id": 113728399, "body": "For digits-only, is this better, perhaps: <code>&quot;[^0-9+]&quot;.toRegex()</code> ? They are the same in terms of what they do, though, right?"}], "tags": [], "owner": {"reputation": 9976, "user_id": 1369016, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DkJLX.png?s=128&g=1", "display_name": "Bitcoin Cash - ADA enthusiast", "link": "https://stackoverflow.com/users/1369016/bitcoin-cash-ada-enthusiast"}, "is_accepted": false, "score": 3, "last_activity_date": 1572408014, "creation_date": 1572408014, "answer_id": 58618573, "question_id": 45929687, "link": "https://stackoverflow.com/questions/45929687/kotlin-remove-all-non-alphanumeric-characters/58618573#58618573", "title": "Kotlin Remove all non alphanumeric characters", "body": "<pre><code>fun String.digitsOnly(): String{\n    val regex = Regex(\"[^0-9]\")\n    return regex.replace(this, \"\")\n}\nfun String.alphaNumericOnly(): String{\n    val regex = Regex(\"[^A-Za-z0-9 ]\")\n    return regex.replace(this, \"\")\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>val alphaNumeric = \"my string #$\".alphaNumericOnly()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2892, "user_id": 391691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCKhh.jpg?s=128&g=1", "display_name": "Simson", "link": "https://stackoverflow.com/users/391691/simson"}, "edited": false, "score": 1, "creation_date": 1573567853, "post_id": 58818597, "comment_id": 103917860, "body": "The question was about  <i>I am trying to remove all non alphanumeric characters from a string.</i> This regexp does something different"}, {"owner": {"reputation": 3130, "user_id": 1352919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N4fsQ.jpg?s=128&g=1", "display_name": "Faakhir", "link": "https://stackoverflow.com/users/1352919/faakhir"}, "reply_to_user": {"reputation": 2892, "user_id": 391691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCKhh.jpg?s=128&g=1", "display_name": "Simson", "link": "https://stackoverflow.com/users/391691/simson"}, "edited": false, "score": 1, "creation_date": 1573622062, "post_id": 58818597, "comment_id": 103937052, "body": "Please check my edited answer, but I am not sure how are you considering some special characters like &#224; &#223;? In my answer it will remove them too... thanks"}, {"owner": {"reputation": 2892, "user_id": 391691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCKhh.jpg?s=128&g=1", "display_name": "Simson", "link": "https://stackoverflow.com/users/391691/simson"}, "edited": false, "score": 2, "creation_date": 1573625663, "post_id": 58818597, "comment_id": 103938018, "body": "Better! I added a line about <code>toRegx()</code> as a intro"}], "tags": [], "owner": {"reputation": 3130, "user_id": 1352919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N4fsQ.jpg?s=128&g=1", "display_name": "Faakhir", "link": "https://stackoverflow.com/users/1352919/faakhir"}, "is_accepted": false, "score": 8, "last_activity_date": 1573625618, "last_edit_date": 1573625618, "creation_date": 1573561074, "answer_id": 58818597, "question_id": 45929687, "link": "https://stackoverflow.com/questions/45929687/kotlin-remove-all-non-alphanumeric-characters/58818597#58818597", "title": "Kotlin Remove all non alphanumeric characters", "body": "<p>You need to create a regex, this can be done by <code>str.toRegex()</code> before calling <code>replace</code></p>\n\n<pre><code>val string = \"AsAABa3a35e8tfyz.a6ax7xe\"\nstring = string.replace((\"[^\\\\d.]\").toRegex(), \"\")\n</code></pre>\n\n<p>result: 3358.67</p>\n\n<p>In case you need to handle words W and spaces</p>\n\n<pre><code>var string = \"Test in@@ #Kot$#lin   FaaFS@@#$%^&amp;Stra\u00dfeFe.__525448==\"\n    string = string.replace((\"[^\\\\w\\\\d ]\").toRegex(), \"\")\n    println(string)\n</code></pre>\n\n<p>result: Test in Kotlin   FaaFSStraeFe__525448</p>\n"}], "owner": {"reputation": 10715, "user_id": 1245894, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/72520e15af979287dc0e5ef6cac10267?s=128&d=identicon&r=PG&f=1", "display_name": "Distwo", "link": "https://stackoverflow.com/users/1245894/distwo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31619, "favorite_count": 3, "accepted_answer_id": 45929744, "answer_count": 8, "score": 46, "last_activity_date": 1573625618, "creation_date": 1503972556, "question_id": 45929687, "link": "https://stackoverflow.com/questions/45929687/kotlin-remove-all-non-alphanumeric-characters", "title": "Kotlin Remove all non alphanumeric characters", "body": "<p>I am trying to remove all non alphanumeric characters from a string.</p>\n\n<p>I tried using <code>replace()</code> with a regex as followed:</p>\n\n<pre><code>var answer = answerEditText.text.toString()\nLog.d(\"debug\", answer)\nanswer = answer.replace(\"[^A-Za-z0-9 ]\", \"\").toLowerCase()\nLog.d(\"debug\", answer)\n</code></pre>\n\n<blockquote>\n  <p>D/debug: Test. ,replace</p>\n  \n  <p>D/debug: test. ,replace</p>\n</blockquote>\n\n<p>Why are the punctuation characters still present? How to get only the alphanumeric characters?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8529952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688069d9c15de408573f860fa8aba?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Vincent", "link": "https://stackoverflow.com/users/8529952/z-vincent"}, "edited": false, "score": 0, "creation_date": 1503977580, "post_id": 45929897, "comment_id": 78819024, "body": "Thank you anyway.I had tried,but got the same result."}, {"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "reply_to_user": {"reputation": 43, "user_id": 8529952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688069d9c15de408573f860fa8aba?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Vincent", "link": "https://stackoverflow.com/users/8529952/z-vincent"}, "edited": false, "score": 0, "creation_date": 1503978387, "post_id": 45929897, "comment_id": 78819174, "body": "Can you update your code in your question with the exact copy/paste of the code you now have?"}, {"owner": {"reputation": 43, "user_id": 8529952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688069d9c15de408573f860fa8aba?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Vincent", "link": "https://stackoverflow.com/users/8529952/z-vincent"}, "edited": false, "score": 0, "creation_date": 1503978756, "post_id": 45929897, "comment_id": 78819270, "body": "year,I just change &#39;bottomNavigationView.setOnNavigationItemReselectedListener&#39; into &#39;bottomNavigationView.setOnNavigationItemReselectedListener&#39;&zwnj;&#8203;,"}, {"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "reply_to_user": {"reputation": 43, "user_id": 8529952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688069d9c15de408573f860fa8aba?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Vincent", "link": "https://stackoverflow.com/users/8529952/z-vincent"}, "edited": false, "score": 0, "creation_date": 1503978808, "post_id": 45929897, "comment_id": 78819287, "body": "Well, you should have edited your question, not added it as a comment. And you&#39;re still using the ReselectedListener, not the SelectedListener."}, {"owner": {"reputation": 43, "user_id": 8529952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688069d9c15de408573f860fa8aba?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Vincent", "link": "https://stackoverflow.com/users/8529952/z-vincent"}, "edited": false, "score": 0, "creation_date": 1503978974, "post_id": 45929897, "comment_id": 78819333, "body": "Sorry,It&#39;s my first time to post a question here,so I don&#39;t to know  how to format my code, Thank you ."}], "tags": [], "owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "is_accepted": true, "score": 2, "last_activity_date": 1503974256, "creation_date": 1503974256, "answer_id": 45929897, "question_id": 45929479, "link": "https://stackoverflow.com/questions/45929479/bottomnavigationview-link-to-viewpager-when-i-set-listener-to-bottomnavigationv/45929897#45929897", "title": "BottomNavigationView link to ViewPager, when i set Listener to bottomNavigationView ,I have to click twice to perform what i do", "body": "<p>You're using <a href=\"https://developer.android.com/reference/android/support/design/widget/BottomNavigationView.html#setOnNavigationItemReselectedListener(android.support.design.widget.BottomNavigationView.OnNavigationItemReselectedListener)\" rel=\"nofollow noreferrer\"><code>setOnNavigationItemReselectedListener()</code></a> which is only triggered when a tab is <strong>reselected</strong>, not the proper <a href=\"https://developer.android.com/reference/android/support/design/widget/BottomNavigationView.html#setOnNavigationItemSelectedListener(android.support.design.widget.BottomNavigationView.OnNavigationItemSelectedListener)\" rel=\"nofollow noreferrer\"><code>setOnNavigationItemSelectedListener()</code></a> method which is called when a tab is first selected.</p>\n"}, {"tags": [], "owner": {"reputation": 889, "user_id": 6587502, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/EkudP.jpg?s=128&g=1", "display_name": "Ashutosh Sagar", "link": "https://stackoverflow.com/users/6587502/ashutosh-sagar"}, "is_accepted": false, "score": -1, "last_activity_date": 1503979511, "creation_date": 1503979511, "answer_id": 45930515, "question_id": 45929479, "link": "https://stackoverflow.com/questions/45929479/bottomnavigationview-link-to-viewpager-when-i-set-listener-to-bottomnavigationv/45930515#45930515", "title": "BottomNavigationView link to ViewPager, when i set Listener to bottomNavigationView ,I have to click twice to perform what i do", "body": "<p>Try this </p>\n\n<p><code>tabLayout.setupWithViewPager(viewPager);</code></p>\n\n<p>this will automatically sync both <code>ViewPager</code> and <code>TabLayout</code></p>\n"}], "owner": {"reputation": 43, "user_id": 8529952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688069d9c15de408573f860fa8aba?s=128&d=identicon&r=PG&f=1", "display_name": "Z.Vincent", "link": "https://stackoverflow.com/users/8529952/z-vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 45929897, "answer_count": 2, "score": 1, "last_activity_date": 1503985238, "creation_date": 1503970708, "last_edit_date": 1503985238, "question_id": 45929479, "link": "https://stackoverflow.com/questions/45929479/bottomnavigationview-link-to-viewpager-when-i-set-listener-to-bottomnavigationv", "title": "BottomNavigationView link to ViewPager, when i set Listener to bottomNavigationView ,I have to click twice to perform what i do", "body": "<p>here is my code:</p>\n\n<pre><code>  class MainActivity : BaseActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    BottomNavigationViewHelper1.disableShiftMode(bottomNavigationView)\n\n    bottomNavigationView.setOnNavigationItemSelectedListener {\n        item: MenuItem -&gt;\n        when (item.itemId) {\n            R.id.item_home -&gt; {\n                Log.e(\"Vincent\", \"++++++++++\")\n                viewpager.setCurrentItem(0, true)\n                return@setOnNavigationItemSelectedListener true\n            }\n            R.id.item_finance -&gt; {\n                viewpager.setCurrentItem(1, true)\n                return@setOnNavigationItemSelectedListener true\n            }\n            R.id.item_event -&gt; {\n                viewpager.setCurrentItem(2, true)\n                return@setOnNavigationItemSelectedListener true\n            }\n            R.id.item_mine -&gt; {\n                viewpager.setCurrentItem(3, true)\n                return@setOnNavigationItemSelectedListener true\n            }\n        }\n        true\n    }\n    viewpager.adapter = PagerAdapter(supportFragmentManager)\n}\n</code></pre>\n\n<p>} </p>\n\n<p>Only when I click the same tab twice , then viewpager.setCurrentItem() will perform.  But when I  use Java instead of kotlin to perform the same code ,I can get what i want.Could anybody help me?</p>\n"}, {"tags": ["android", "xml", "android-recyclerview", "kotlin", "grid-layout"], "comments": [{"owner": {"reputation": 2399, "user_id": 6838146, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VE5iL.jpg?s=128&g=1", "display_name": "Lokesh Desai", "link": "https://stackoverflow.com/users/6838146/lokesh-desai"}, "edited": false, "score": 0, "creation_date": 1536898132, "post_id": 45927061, "comment_id": 91596603, "body": "Please check Recyclerview with Gridlayoutmanager for this <a href=\"https://www.android4dev.com/how-to-integrate-recyclerview-with-gridlayoutmanager-android/\" rel=\"nofollow noreferrer\">android4dev.com/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2918, "user_id": 984724, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T2JaK.png?s=128&g=1", "display_name": "Dave Thomas", "link": "https://stackoverflow.com/users/984724/dave-thomas"}, "is_accepted": true, "score": 14, "last_activity_date": 1503953764, "creation_date": 1503953764, "answer_id": 45927243, "question_id": 45927061, "link": "https://stackoverflow.com/questions/45927061/gridlayout-in-kotlin/45927243#45927243", "title": "GridLayout in Kotlin?", "body": "<p>Use a <a href=\"https://developer.android.com/reference/android/support/v7/widget/GridLayoutManager.html\" rel=\"noreferrer\">GridLayoutManager</a> instead.</p>\n\n<p>Replace:</p>\n\n<pre><code>recyclerView.layoutManager = LinearLayoutManager(context, LinearLayoutManager.VERTICAL, false)\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>recyclerView.layoutManager = GridLayoutManager(context, 2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 1558843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5994beb1b0d95b1c0e4b600504109e?s=128&d=identicon&r=PG", "display_name": "morenoadan22", "link": "https://stackoverflow.com/users/1558843/morenoadan22"}, "is_accepted": false, "score": 1, "last_activity_date": 1503953774, "creation_date": 1503953774, "answer_id": 45927246, "question_id": 45927061, "link": "https://stackoverflow.com/questions/45927061/gridlayout-in-kotlin/45927246#45927246", "title": "GridLayout in Kotlin?", "body": "<p>Replace your <code>recyclerview.layoutManager</code> from <code>LinearLayoutManager</code> to a <code>GridLayoutManger</code> <a href=\"https://developer.android.com/reference/android/support/v7/widget/GridLayoutManager.html\" rel=\"nofollow noreferrer\">GridLayoutManager doc</a></p>\n"}], "owner": {"reputation": 1485, "user_id": 2593123, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/YsoM9.png?s=128&g=1", "display_name": "arcade16", "link": "https://stackoverflow.com/users/2593123/arcade16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9665, "favorite_count": 0, "accepted_answer_id": 45927243, "answer_count": 2, "score": 5, "last_activity_date": 1503953774, "creation_date": 1503952942, "question_id": 45927061, "link": "https://stackoverflow.com/questions/45927061/gridlayout-in-kotlin", "title": "GridLayout in Kotlin?", "body": "<p>I am trying to get a 2x6 (WxH) GridLayout in my Kotlin Android application. I have my xml and fragment / adapter set up for a RecyclerView but am a bit at a loss for as how to apply a GridLayout to this.</p>\n\n<p>How can I get my items (listview_row_enrollments.xml) to show in a grid instead of just a horizontal list?</p>\n\n<p>EnrollmentFragment.kt</p>\n\n<pre><code>class EnrollmentsFragment : Fragment() {\n\n    // TODO: Rename and change types of parameters\n    private var mParam1: String? = null\n    private var mParam2: String? = null\n\n    private var mListener: OnFragmentInteractionListener? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        if (arguments != null) {\n            mParam1 = arguments.getString(ARG_PARAM1)\n            mParam2 = arguments.getString(ARG_PARAM2)\n        }\n    }\n\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n        // Inflate the layout for this fragment\n        var view = inflater!!.inflate(R.layout.fragment_enrollments, container, false)\n        loadView(view)\n        return view\n    }\n\n    fun loadView(view: View) {\n        var recyclerView: RecyclerView = view.findViewById&lt;RecyclerView&gt;(R.id.recyclerView) as RecyclerView\n        recyclerView.layoutManager = LinearLayoutManager(context, LinearLayoutManager.VERTICAL, false)\n        recyclerView.setHasFixedSize(true)\n        recyclerView.adapter = EnrollmentsAdapter()\n    }\n\n//    override fun onAttach(context: Context?) {\n//        super.onAttach(context)\n//        if (context is OnFragmentInteractionListener) {\n//            mListener = context\n//        } else {\n//            throw RuntimeException(context!!.toString() + \" must implement OnFragmentInteractionListener\")\n//        }\n//    }\n\n    override fun onDetach() {\n        super.onDetach()\n        mListener = null\n    }\n\n    interface OnFragmentInteractionListener {\n        // TODO: Update argument type and name\n        fun onFragmentInteraction(uri: Uri)\n    }\n\n    companion object {\n\n        private val ARG_PARAM1 = \"param1\"\n        private val ARG_PARAM2 = \"param2\"\n\n        fun newInstance(): EnrollmentsFragment {\n            val fragment = EnrollmentsFragment()\n            val args = Bundle()\n            fragment.arguments = args\n            return fragment\n        }\n    }\n}// Required empty public constructor\n</code></pre>\n\n<p>EnrollmentsAdapter.kt:</p>\n\n<pre><code>class EnrollmentsAdapter : RecyclerView.Adapter&lt;EnrollmentsAdapter.EnrollmentsViewHolder&gt;() {\n    private val items: List&lt;String&gt;\n\n    init {\n        this.items = Arrays.asList(\"Breaches\", \"Data Leaks\", \"Hacker Chatter\", \"Services Monitored\", \"xxx\", \"xxx\")\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): EnrollmentsViewHolder {\n        val view = LayoutInflater.from(parent.context).inflate(R.layout.listview_row_enrollments, parent, false)\n\n//        view.titleTextView.typeface = Typeface.createFromAsset(view.context.assets, \"fonts/Montserrat-Regular.ttf\")\n//        view.countTextView.typeface = Typeface.createFromAsset(view.context.assets, \"fonts/Montserrat-Regular.ttf\")\n//        view.subtextTextView.typeface = Typeface.createFromAsset(view.context.assets, \"fonts/Montserrat-Regular.ttf\")\n//        view.updatedTextView.typeface = Typeface.createFromAsset(view.context.assets, \"fonts/Montserrat-Light.ttf\")\n\n        return EnrollmentsViewHolder(view)\n    }\n\n    override fun onBindViewHolder(holder: EnrollmentsViewHolder, position: Int) {\n        holder.bind(getItem(position))\n    }\n\n    override fun getItemCount(): Int {\n        return 6\n    }\n\n    fun getItem(position: Int): String {\n        return items[position]\n    }\n\n    class EnrollmentsViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n\n        fun bind(value: String) {\n//            itemView.titleTextView.text = value\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>FragmentEnrollments.xml:</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"xxx.xxx.EnrollmentsFragment\"&gt;\n\n    &lt;android.support.v7.widget.RecyclerView\n        android:id=\"@+id/recyclerView\"\n        android:background=\"@color/kLightGray\"\n        android:paddingTop=\"8dp\"\n        android:clipToPadding=\"false\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>listview_row_enrollments.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"horizontal\"\n    android:padding=\"5dp\"\n    android:layout_width=\"150dp\"\n    android:layout_height=\"150dp\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/info_text\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:gravity=\"center\"\n        android:background=\"@color/colorAccent\"/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>What my view looks like now:\n<a href=\"https://i.stack.imgur.com/RxthM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/RxthM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "sharedpreferences", "kotlin", "persistence", "mutable"], "answers": [{"comments": [{"owner": {"reputation": 556, "user_id": 7480923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fcb1aa2b43bf2bb7d943fd1b62664c7?s=128&d=identicon&r=PG", "display_name": "Julian Torregrosa", "link": "https://stackoverflow.com/users/7480923/julian-torregrosa"}, "edited": false, "score": 0, "creation_date": 1504040333, "post_id": 45928230, "comment_id": 78855012, "body": "Thanks I thought about that solition but I needed something local"}], "tags": [], "owner": {"reputation": 337, "user_id": 3567101, "user_type": "registered", "profile_image": "https://graph.facebook.com/717094896/picture?type=large", "display_name": "HyunJin", "link": "https://stackoverflow.com/users/3567101/hyunjin"}, "is_accepted": false, "score": 2, "last_activity_date": 1503959696, "creation_date": 1503959696, "answer_id": 45928230, "question_id": 45927013, "link": "https://stackoverflow.com/questions/45927013/kotlin-persist-mutablelist-on-sharedpreferences/45928230#45928230", "title": "Kotlin - Persist MutableList on SharedPreferences", "body": "<p>You can also use Firebase too for data persistence, you can use SharedPreferences, but personally I find it more easy and comfortable using Firebase.\nI will leave a link here so you can take a look at disk persistence behavior of <a href=\"https://firebase.google.com/docs/database/android/offline-capabilities\" rel=\"nofollow noreferrer\">Firebase</a>. <br/>\nHope this helps you!</p>\n"}, {"tags": [], "owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "is_accepted": false, "score": 0, "last_activity_date": 1504001777, "creation_date": 1504001777, "answer_id": 45936502, "question_id": 45927013, "link": "https://stackoverflow.com/questions/45927013/kotlin-persist-mutablelist-on-sharedpreferences/45936502#45936502", "title": "Kotlin - Persist MutableList on SharedPreferences", "body": "<p>Shared Preferences are mostly used in storing data like settings or configs, it's not meant for storing large data though it can do it as long as you implement <code>Parcable</code>. If you think your data contained in your <code>MutableList</code> is large, best way is to make a database.</p>\n"}, {"comments": [{"owner": {"reputation": 556, "user_id": 7480923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fcb1aa2b43bf2bb7d943fd1b62664c7?s=128&d=identicon&r=PG", "display_name": "Julian Torregrosa", "link": "https://stackoverflow.com/users/7480923/julian-torregrosa"}, "edited": false, "score": 0, "creation_date": 1504040417, "post_id": 45936827, "comment_id": 78855053, "body": "Thanks I&#39;ll try to"}], "tags": [], "owner": {"reputation": 357, "user_id": 4026441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/37IQa.jpg?s=128&g=1", "display_name": "Norris Boateng", "link": "https://stackoverflow.com/users/4026441/norris-boateng"}, "is_accepted": false, "score": 1, "last_activity_date": 1504002726, "creation_date": 1504002726, "answer_id": 45936827, "question_id": 45927013, "link": "https://stackoverflow.com/questions/45927013/kotlin-persist-mutablelist-on-sharedpreferences/45936827#45936827", "title": "Kotlin - Persist MutableList on SharedPreferences", "body": "<p>For lists it think using sqlite will provide you with better control of your data.\nCheck out <a href=\"https://github.com/Kotlin/anko/wiki/Anko-SQLite\" rel=\"nofollow noreferrer\">anko's sqlite wiki</a> for more info.</p>\n"}, {"comments": [{"owner": {"reputation": 556, "user_id": 7480923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fcb1aa2b43bf2bb7d943fd1b62664c7?s=128&d=identicon&r=PG", "display_name": "Julian Torregrosa", "link": "https://stackoverflow.com/users/7480923/julian-torregrosa"}, "edited": false, "score": 0, "creation_date": 1504040396, "post_id": 45937739, "comment_id": 78855041, "body": "In that case is it better not to use a Data Class, am I right?"}, {"owner": {"reputation": 106, "user_id": 8491266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TcEVL.jpg?s=128&g=1", "display_name": "Marcel Skotnicki", "link": "https://stackoverflow.com/users/8491266/marcel-skotnicki"}, "reply_to_user": {"reputation": 556, "user_id": 7480923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fcb1aa2b43bf2bb7d943fd1b62664c7?s=128&d=identicon&r=PG", "display_name": "Julian Torregrosa", "link": "https://stackoverflow.com/users/7480923/julian-torregrosa"}, "edited": false, "score": 0, "creation_date": 1504096876, "post_id": 45937739, "comment_id": 78879506, "body": "well, you can use <code>data class</code> in kotlin with default values, but i find it good practice to keep it this way. it is more readable."}], "tags": [], "owner": {"reputation": 106, "user_id": 8491266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TcEVL.jpg?s=128&g=1", "display_name": "Marcel Skotnicki", "link": "https://stackoverflow.com/users/8491266/marcel-skotnicki"}, "is_accepted": true, "score": 3, "last_activity_date": 1504005349, "creation_date": 1504005349, "answer_id": 45937739, "question_id": 45927013, "link": "https://stackoverflow.com/questions/45927013/kotlin-persist-mutablelist-on-sharedpreferences/45937739#45937739", "title": "Kotlin - Persist MutableList on SharedPreferences", "body": "<p>It is very easy to persist any data within SharedPreferences. All you need to do is get <strong>Gson</strong> <code>implementation 'com.squareup.retrofit2:converter-gson:2.3.0'</code> and then create class you would like to persist like this:</p>\n\n<pre><code>class UserProfile {\n\n    @SerializedName(\"name\") var name: String = \"\"\n    @SerializedName(\"email\") var email: String = \"\"\n    @SerializedName(\"age\") var age: Int = 10\n\n}\n</code></pre>\n\n<p>and finally in your SharedPreferences</p>\n\n<pre><code>fun saveUserProfile(userProfile: UserProfile?) {\n            val serializedUser = gson.toJson(userProfile)\n            sharedPreferences.edit().putString(USER_PROFILE, serializedUser).apply()\n        }\n\n\nfun readUserProfile(): UserProfile? {\n            val serializedUser = sharedPreferences.getString(USER_PROFILE, null)\n            return gson.fromJson(serializedUser, UserProfile::class.java)\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 3645102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2372b65c43c4ea40a13a1ce2e28db65?s=128&d=identicon&r=PG&f=1", "display_name": "goofy", "link": "https://stackoverflow.com/users/3645102/goofy"}, "is_accepted": false, "score": 0, "last_activity_date": 1584952721, "last_edit_date": 1584952721, "creation_date": 1584690473, "answer_id": 60770324, "question_id": 45927013, "link": "https://stackoverflow.com/questions/45927013/kotlin-persist-mutablelist-on-sharedpreferences/60770324#60770324", "title": "Kotlin - Persist MutableList on SharedPreferences", "body": "<p>Feel free to use this <strong>Kotlin</strong> extension functions to store and edit your list to SharedPreferences. I think they are realy useful.</p>\n\n<pre><code>inline fun &lt;reified T&gt; SharedPreferences.addItemToList(spListKey: String, item: T) {\n    val savedList = getList&lt;T&gt;(spListKey).toMutableList()\n    savedList.add(item)\n    val listJson = Gson().toJson(savedList)\n    edit { putString(spListKey, listJson) }\n}\n\ninline fun &lt;reified T&gt; SharedPreferences.removeItemFromList(spListKey: String, item: T) {\n    val savedList = getList&lt;T&gt;(spListKey).toMutableList()\n    savedList.remove(item)\n    val listJson = Gson().toJson(savedList)\n    edit {\n        putString(spListKey, listJson)\n    }\n}\n\nfun &lt;T&gt; SharedPreferences.putList(spListKey: String, list: List&lt;T&gt;) {\n    val listJson = Gson().toJson(list)\n    edit {\n        putString(spListKey, listJson)\n    }\n}\n\ninline fun &lt;reified T&gt; SharedPreferences.getList(spListKey: String): List&lt;T&gt; {\n    val listJson = getString(spListKey, \"\")\n    if (!listJson.isNullOrBlank()) {\n        val type = object : TypeToken&lt;List&lt;T&gt;&gt;() {}.type\n        return Gson().fromJson(listJson, type)\n    }\n    return listOf()\n}\n</code></pre>\n"}], "owner": {"reputation": 556, "user_id": 7480923, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fcb1aa2b43bf2bb7d943fd1b62664c7?s=128&d=identicon&r=PG", "display_name": "Julian Torregrosa", "link": "https://stackoverflow.com/users/7480923/julian-torregrosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1691, "favorite_count": 0, "accepted_answer_id": 45937739, "answer_count": 5, "score": 1, "last_activity_date": 1584952721, "creation_date": 1503952731, "question_id": 45927013, "link": "https://stackoverflow.com/questions/45927013/kotlin-persist-mutablelist-on-sharedpreferences", "title": "Kotlin - Persist MutableList on SharedPreferences", "body": "<p>I've been playing around with Kotlin for Android. I have a mutable list which is a list of objects. Now I want to persist them, but I don't know what's the best way to do it. I think it can be done with SharedPreferences but I don't know how to parse the objects to a plain format or something. The objects are actually coming from a data class, maybe that can be useful.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["android", "android-intent", "android-activity", "kotlin", "textview"], "comments": [{"owner": {"reputation": 3235, "user_id": 3741698, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/acd33beb17170fd7aa9f26bfe3f5bd91?s=128&d=identicon&r=PG", "display_name": "David Hackro", "link": "https://stackoverflow.com/users/3741698/david-hackro"}, "edited": false, "score": 0, "creation_date": 1503951870, "post_id": 45926560, "comment_id": 78812283, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45157567/how-to-pass-the-values-from-activity-to-another-activity-in-kotlin\">How to pass the values from activity to another activity in kotlin</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8451922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e99d912bacb641010d17e06380b6635?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8451922/john"}, "edited": false, "score": 0, "creation_date": 1503957642, "post_id": 45926804, "comment_id": 78814541, "body": "I&#39;ll try that tonight. I&#39;ll let you know how it goes. Thanks!"}], "tags": [], "owner": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "is_accepted": false, "score": 2, "last_activity_date": 1503951687, "creation_date": 1503951687, "answer_id": 45926804, "question_id": 45926560, "link": "https://stackoverflow.com/questions/45926560/sending-a-pre-calculated-result-from-one-kotlin-activity-to-a-textview-in-anothe/45926804#45926804", "title": "Sending a pre calculated result from one Kotlin activity to a textview in another", "body": "<p>I'm not a Kotlin developer, but I think it does starts Activity trough startActivity, and before starting it, you can add your value into the intent with setIntegerExtra(A_KEY, value) (or any other extra) then in the second activity you get with:</p>\n\n<pre><code>int a = getIntent().getIntegerExtra(A_KEY)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8451922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e99d912bacb641010d17e06380b6635?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8451922/john"}, "edited": false, "score": 0, "creation_date": 1504021732, "post_id": 45936265, "comment_id": 78844983, "body": "Let me add more context:I have a variable calculation that I want to send to the second activity. However, I do not know how to make that appear inside of a text view. What you described to me above works, but how would I make the 0.0 appear in a text view. Would I used the syntax below?                                var totalDisplay: Double = resultsBox.display.toDouble()"}, {"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "reply_to_user": {"reputation": 1, "user_id": 8451922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e99d912bacb641010d17e06380b6635?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8451922/john"}, "edited": false, "score": 0, "creation_date": 1504022628, "post_id": 45936265, "comment_id": 78845611, "body": "You can call the view inside your second activity&#39;s oncreate then call setText. <code>secondActivityTextView.setText(&quot;base on 15%... $total&quot;)</code>. is that what you mean?"}, {"owner": {"reputation": 1, "user_id": 8451922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e99d912bacb641010d17e06380b6635?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8451922/john"}, "edited": false, "score": 0, "creation_date": 1504023519, "post_id": 45936265, "comment_id": 78846177, "body": "Yes. That is exactly what I am trying to do. My second activity is called &quot;resultScreen&quot;. The textView has an ID of &quot;resultBox&quot;. So according to the syntax above, I should write &quot;resultbox.setText(&quot;based on 15%......$total&quot;)?"}, {"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "reply_to_user": {"reputation": 1, "user_id": 8451922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e99d912bacb641010d17e06380b6635?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8451922/john"}, "edited": false, "score": 0, "creation_date": 1504024659, "post_id": 45936265, "comment_id": 78846877, "body": "if your not using kotlin-extension then you should get your TextView using <code>findViewById()</code> then cast it as textview like this, <code>val mTextview = findViewById(R.id.resultBox) as TextView</code> then you can call <code>mTextView.setText(&quot;base$total&quot;)</code>"}, {"owner": {"reputation": 1, "user_id": 8451922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e99d912bacb641010d17e06380b6635?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8451922/john"}, "edited": false, "score": 0, "creation_date": 1504024853, "post_id": 45936265, "comment_id": 78846990, "body": "The cast your mentioning is not working. I am using kotlin on the Android Studio 3 beta. It already has the kotlin extension built in. When I type in your suggestion, I get errors."}, {"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "reply_to_user": {"reputation": 1, "user_id": 8451922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e99d912bacb641010d17e06380b6635?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8451922/john"}, "edited": false, "score": 0, "creation_date": 1504025077, "post_id": 45936265, "comment_id": 78847116, "body": "you cant send the variable, you can send the value of the variable, thats what my answer is doing, put your variable in that <code>theValueTotal</code> in you first activity and get it using <code>getDoubleExtra()</code> in the second activity. I hope it helps."}, {"owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "reply_to_user": {"reputation": 1, "user_id": 8451922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e99d912bacb641010d17e06380b6635?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8451922/john"}, "edited": false, "score": 0, "creation_date": 1504025342, "post_id": 45936265, "comment_id": 78847250, "body": "okay so you can do <code>resultBox.text = &quot;base... $total&quot;</code> assuming you assign your <code>getDoubleExtra()</code> in varialble <code>total</code>"}, {"owner": {"reputation": 1, "user_id": 8451922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e99d912bacb641010d17e06380b6635?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8451922/john"}, "edited": false, "score": 0, "creation_date": 1504026406, "post_id": 45936265, "comment_id": 78847774, "body": "Now it makes sense. All I have to do is get the value to return from the function it is being calculated in. Thanks!"}], "tags": [], "owner": {"reputation": 325, "user_id": 8465878, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/98faaee144e57e489c0522b4fd9855f7?s=128&d=identicon&r=PG&f=1", "display_name": "Hohenheim", "link": "https://stackoverflow.com/users/8465878/hohenheim"}, "is_accepted": false, "score": 1, "last_activity_date": 1504001134, "creation_date": 1504001134, "answer_id": 45936265, "question_id": 45926560, "link": "https://stackoverflow.com/questions/45926560/sending-a-pre-calculated-result-from-one-kotlin-activity-to-a-textview-in-anothe/45936265#45936265", "title": "Sending a pre calculated result from one Kotlin activity to a textview in another", "body": "<p>I want to translate Marcos' answer in kotlin. </p>\n\n<p>Before starting the second activity, put the value in the intent like this;</p>\n\n<pre><code>val intent = Intent(this, SecondActivity::class.java)\nintent.putExtra(\"total\", theValueTotal)\nstartActivity(intent)\n</code></pre>\n\n<p>then in your second activity you can get the value using this;</p>\n\n<pre><code>val total = intent.getDoubleExtra(\"total\", 0.0)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8451922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e99d912bacb641010d17e06380b6635?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8451922/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1504001134, "creation_date": 1503950631, "last_edit_date": 1503950862, "question_id": 45926560, "link": "https://stackoverflow.com/questions/45926560/sending-a-pre-calculated-result-from-one-kotlin-activity-to-a-textview-in-anothe", "title": "Sending a pre calculated result from one Kotlin activity to a textview in another", "body": "<p>I currently have a calculation being done in my main activity. The calculation is done in function below. The result displays in a text box on the same screen. </p>\n\n<pre><code>ShowNumber.setText(buClickValue)\n\n Bill = buClickValue\n\n  fun buCalculateEvent(view: View) {\n       var Total = \"%.2f\".format(Bill.toDouble() * .15)\n\n      ShowNumber.setText(\"Based on a 15% tip, you would be \" + ( Bill.toDouble() + Total.toDouble()))\n     }\n</code></pre>\n\n<p>My issue is trying to get the setText message to appear in another activity. I know how to access the activity via the click of a button. I also know how to generate a toast message in another activity. How can I send information to a textview  in another activity?</p>\n\n<p>Thanks in Advance. </p>\n"}, {"tags": ["android", "kotlin", "android-jobscheduler"], "answers": [{"comments": [{"owner": {"reputation": 2318, "user_id": 5349476, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/958fb5d069d762c8d8f6b43a4fca1dfc?s=128&d=identicon&r=PG&f=1", "display_name": "John M.", "link": "https://stackoverflow.com/users/5349476/john-m"}, "edited": false, "score": 0, "creation_date": 1528305683, "post_id": 45925876, "comment_id": 88460447, "body": "If the app is whitelisted (ignores battery optimisation), does <code>getMinPeriodMillis()</code> still return 15mins?"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "reply_to_user": {"reputation": 2318, "user_id": 5349476, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/958fb5d069d762c8d8f6b43a4fca1dfc?s=128&d=identicon&r=PG&f=1", "display_name": "John M.", "link": "https://stackoverflow.com/users/5349476/john-m"}, "edited": false, "score": 0, "creation_date": 1528323111, "post_id": 45925876, "comment_id": 88468365, "body": "@JohnM.: I have not tried that. If I were a betting man, I would say &quot;yes&quot;, as that is most likely hardcoded per Android OS version."}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 6, "last_activity_date": 1503947547, "creation_date": 1503947547, "answer_id": 45925876, "question_id": 45925663, "link": "https://stackoverflow.com/questions/45925663/job-scheduler-interval-gets-called-way-too-infrequent/45925876#45925876", "title": "Job Scheduler interval gets called way too infrequent", "body": "<p>The <code>JobScheduler</code> minimum period is 15 minutes on newer versions of Android. <a href=\"https://developer.android.com/reference/android/app/job/JobInfo.html#getMinPeriodMillis()\" rel=\"noreferrer\">See <code>getMinPeriodMillis()</code></a>.</p>\n\n<p>In terms of your \"use case\", doing anything every minute is horrible for battery life. Users have complained <strong>very loudly</strong> about this, and so Google continues to take steps to prevent apps from doing this. For example, Doze mode and app standby on Android 6.0+ will cause your jobs to run very infrequently, on the order of once an hour or less.</p>\n"}], "owner": {"reputation": 929, "user_id": 7855177, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-avNsBxd4mKE/AAAAAAAAAAI/AAAAAAAAABQ/dSTXwqwzagQ/photo.jpg?sz=128", "display_name": "Piwo", "link": "https://stackoverflow.com/users/7855177/piwo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "accepted_answer_id": 45925876, "answer_count": 1, "score": 1, "last_activity_date": 1503947547, "creation_date": 1503946662, "question_id": 45925663, "link": "https://stackoverflow.com/questions/45925663/job-scheduler-interval-gets-called-way-too-infrequent", "title": "Job Scheduler interval gets called way too infrequent", "body": "<p>My App schedules a JobScheduler with a periodic interval of 60 seconds:</p>\n\n<pre><code>val service = ComponentName(packageName, MonitorService::class.java.name)\nval job = JobInfo.Builder(JOB_ID, service)\n            .setPeriodic(interval) // interval is 60*1000\n            .setPersisted(true)\n            .setRequiresCharging(false)\n            .build()\njobScheduler.schedule(job)\n</code></pre>\n\n<p>I am aware of the fact, that the Android OS optimizes the job scheduler, therefor it will never be scheduled exactly, but with like 2~3 minutes later. I verify this behaviour on my own device (HTC One M8 with Android 6.0).</p>\n\n<p>On many (various) other devices that interval is <strong>much</strong> more infrequent (like once/twice per hour only).</p>\n\n<p>How can I fix that? Is the Job Scheduler maybe not the correct API for my use case?</p>\n"}, {"tags": ["testing", "kotlin", "delegated-properties"], "answers": [{"comments": [{"owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "edited": false, "score": 0, "creation_date": 1503945062, "post_id": 45925271, "comment_id": 78809216, "body": "There are actual delegate providers but I hoped not to have to use them since it just adds &quot;unnecessary&quot; complexity."}], "tags": [], "owner": {"reputation": 6094, "user_id": 5132804, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ueFFV.jpg?s=128&g=1", "display_name": "Pelocho", "link": "https://stackoverflow.com/users/5132804/pelocho"}, "is_accepted": true, "score": 0, "last_activity_date": 1503944911, "creation_date": 1503944911, "answer_id": 45925271, "question_id": 45925080, "link": "https://stackoverflow.com/questions/45925080/how-do-i-test-generators-for-delegated-properties/45925271#45925271", "title": "How do I test generators for delegated properties?", "body": "<p>You need a new object created whenever you \"call\" the <code>get</code> method. So how to test it? With a <strong>provider</strong></p>\n\n<p>A <code>Provider&lt;T&gt;</code> is just an object that provides you new instances of a concrete class. Its signature is something like this:</p>\n\n<pre><code>interface Provider&lt;T&gt; {\n    fun get() : T\n}\n</code></pre>\n\n<p>So you need to inject a new <code>Provider&lt;T&gt;</code> into your <code>BaseClass</code>:</p>\n\n<pre><code>abstract class BaseClass(\n        private val implementation1Provider : Provider&lt;YourInterface&gt;,\n        private val implementation2Provider : Provider&lt;YourInterface&gt;) {\n    protected val delegated1 get() = implementation1Provider.get()\n    protected val delegated2 get() = implementation2Provider.get()\n    ...\n}\n</code></pre>\n\n<p>Now you can inject your custom providers in the test and assert that they have been called:</p>\n\n<pre><code>@Test\nfun `delegated1 should always return a new instance`() {\n    val implementation1Provider = ...\n    val target = Example(implementation1Provider, ...)\n\n    val first = target.field1\n\n    // assert that implementation1Provider.get() has been called\n}\n</code></pre>\n"}], "owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 45925271, "answer_count": 1, "score": 0, "last_activity_date": 1503944911, "creation_date": 1503944001, "question_id": 45925080, "link": "https://stackoverflow.com/questions/45925080/how-do-i-test-generators-for-delegated-properties", "title": "How do I test generators for delegated properties?", "body": "<p>In my current project there is a class that will later on be implemented by many others. This class provides some generators for delegated properties.</p>\n\n<pre><code>abstract class BaseClass {\n    protected val delegated1 get() = new Delegated1Impl()\n    protected val delegated2 get() = new Delegated2Impl()\n    ...\n}\n</code></pre>\n\n<p>This base class can be used this way:</p>\n\n<pre><code>class Example : BaseClass() {\n    var field1 by delegated1\n    var field2 by delegated2\n}\n</code></pre>\n\n<p>Now I want to test these delegated generators. Some of them contain logic which  I want to test, but for now I only want to know that everytime they are called they return a new instance. </p>\n\n<p>Now my question is: how can I test these generators? <br>\nThe generators are not visible outside of extending classes so I cannot simply create an instance of it and call these methods. </p>\n\n<pre><code>@Test\nfun `delegated1 should always return a new instance`() {\n    val target = object: BaseClass()\n\n    val first = target.delegated1    // This does not work since it is protected\n    val second = target.delegated1\n\n    assertTrue(first !== second)\n}\n</code></pre>\n"}, {"tags": ["spring", "mongodb", "kotlin", "spring-data-mongodb", "spring-webflux"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1503941797, "post_id": 45924505, "comment_id": 78807537, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/27296533/spring-custom-query-with-pageable\">Spring Custom Query with pageable</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5819, "user_id": 1422818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeacd6c45e867cb36eb05c9daa5cc2de?s=128&d=identicon&r=PG", "display_name": "Christoph Strobl", "link": "https://stackoverflow.com/users/1422818/christoph-strobl"}, "is_accepted": true, "score": 11, "last_activity_date": 1503988320, "creation_date": 1503988320, "answer_id": 45932202, "question_id": 45924505, "link": "https://stackoverflow.com/questions/45924505/is-there-any-way-to-implement-pagination-in-spring-webflux-and-spring-data-react/45932202#45932202", "title": "Is there any way to implement pagination in spring webflux and spring data reactive", "body": "<p>The reactive support in Spring Data does not provide means of a <code>Page</code> return type. Still, the <code>Pageable</code> parameter is supported in method signatures passing on <code>limit</code> and <code>offset</code> to the drivers and therefore the store itself, returning a <code>Flux&lt;T&gt;</code> that emits the range requested.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Flux&lt;Person&gt; findByFirstname(String firstname, Pageable pageable);\n</code></pre>\n\n<p>For more information please have a look at the current <a href=\"https://docs.spring.io/spring-data/mongodb/docs/2.0.0.RC2/reference/html/#mongo.reactive.repositories.usage\" rel=\"noreferrer\">Reference Documentation for 2.0.RC2</a> and the <a href=\"https://github.com/spring-projects/spring-data-examples/tree/master/mongodb/reactive\" rel=\"noreferrer\">Spring Data Examples</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1085, "user_id": 1646298, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f4cbd3b26e9904b80405f7b2f27db2c9?s=128&d=identicon&r=PG", "display_name": "ZZ 5", "link": "https://stackoverflow.com/users/1646298/zz-5"}, "edited": false, "score": 1, "creation_date": 1542754768, "post_id": 48078520, "comment_id": 93681018, "body": "Won&#39;t this consume more resources (mem and CPU) than <code>Mono&lt;Page&lt;T&gt;&gt;</code>?"}, {"owner": {"reputation": 415, "user_id": 2068867, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9cf085378ed9cc2350f171a1bd254371?s=128&d=identicon&r=PG", "display_name": "Mavo", "link": "https://stackoverflow.com/users/2068867/mavo"}, "edited": false, "score": 3, "creation_date": 1544802128, "post_id": 48078520, "comment_id": 94417045, "body": "This would be really inefficient on large collections with thousands+ documents. It&#39;s better to do the filtering on DB side then load all records and filter them in code."}, {"owner": {"reputation": 3944, "user_id": 893898, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cbb75897ee67011990d4706fad19e38b?s=128&d=identicon&r=PG", "display_name": "Hantsy", "link": "https://stackoverflow.com/users/893898/hantsy"}, "reply_to_user": {"reputation": 415, "user_id": 2068867, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9cf085378ed9cc2350f171a1bd254371?s=128&d=identicon&r=PG", "display_name": "Mavo", "link": "https://stackoverflow.com/users/2068867/mavo"}, "edited": false, "score": 0, "creation_date": 1552617889, "post_id": 48078520, "comment_id": 97088400, "body": "@Mavo I do not think there is a performance problem if the db driver fully implements ReactiveStrreams, it should delegate these operations to underlay db directly."}, {"owner": {"reputation": 76, "user_id": 2787390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834f44358e76d05f682a0f99e23ea775?s=128&d=identicon&r=PG&f=1", "display_name": "OCPi", "link": "https://stackoverflow.com/users/2787390/ocpi"}, "edited": false, "score": 0, "creation_date": 1570110633, "post_id": 48078520, "comment_id": 102816973, "body": "I&#39;ve tested both options, Flux filtering is MUCH slower than running the query properly on MongoDB."}, {"owner": {"reputation": 3944, "user_id": 893898, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cbb75897ee67011990d4706fad19e38b?s=128&d=identicon&r=PG", "display_name": "Hantsy", "link": "https://stackoverflow.com/users/893898/hantsy"}, "reply_to_user": {"reputation": 76, "user_id": 2787390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/834f44358e76d05f682a0f99e23ea775?s=128&d=identicon&r=PG&f=1", "display_name": "OCPi", "link": "https://stackoverflow.com/users/2787390/ocpi"}, "edited": false, "score": 1, "creation_date": 1570191997, "post_id": 48078520, "comment_id": 102845683, "body": "@OCPi I think you are right, the operation could iterate the result one by one and return what you want on the DB side. I think it is a little like returning a Stream result in JPA, where it will use JDBC cursor to iterate in data in DB. It should <b>never</b> load all data in memory and filter them."}], "tags": [], "owner": {"reputation": 3944, "user_id": 893898, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cbb75897ee67011990d4706fad19e38b?s=128&d=identicon&r=PG", "display_name": "Hantsy", "link": "https://stackoverflow.com/users/893898/hantsy"}, "is_accepted": false, "score": 6, "last_activity_date": 1599885028, "last_edit_date": 1599885028, "creation_date": 1514986522, "answer_id": 48078520, "question_id": 45924505, "link": "https://stackoverflow.com/questions/45924505/is-there-any-way-to-implement-pagination-in-spring-webflux-and-spring-data-react/48078520#48078520", "title": "Is there any way to implement pagination in spring webflux and spring data reactive", "body": "<p><strong>Flux</strong> provides <code>skip</code> and <code>take</code> methods to get pagination support, <del>and you also can use <code>filter</code> and <code>sort</code> to filter and sort the result.</del> <strong>The filter and sort below is not a good example, but use <code>skip</code> and <code>Pageable</code> as 2nd parameter are no different.</strong></p>\n<p>The following codes work for me.</p>\n<pre><code>@GetMapping(&quot;&quot;)\npublic Flux&lt;Post&gt; all(\n//@RequestParam(value = &quot;q&quot;, required = false) String q,\n                      @RequestParam(value = &quot;page&quot;, defaultValue = &quot;0&quot;) long page,\n                      @RequestParam(value = &quot;size&quot;, defaultValue = &quot;10&quot;) long size) {\n    return this.postRepository.findAll()\n        //.filter(p -&gt; Optional.ofNullable(q).map(key -&gt; p.getTitle().contains(key) || p.getContent().contains(key)).orElse(true))//(replace this with query parameters)\n        .sort(comparing(Post::getCreatedDate).reversed())\n        .skip(page * size).take(size);\n}\n</code></pre>\n<p><strong>Update</strong>: The underlay drivers should be responsible for handling the result in the <strong>reactivestreams</strong> way.</p>\n<p>And as you see in the answer from Christoph, if using a <code>findByXXX</code> method, Spring Data Mongo Reactive provides a variant to accept a <code>pageable</code> argument, but the <code>findAll</code>(reactive version) <strong>does not include such a variant</strong>, you have to do <code>skip</code> in the later operations if you really need the <strong>pagination</strong> feature. When switching to <code>Flux</code> instead of List, imagine the data in Flux as living water in the rivers or oil in the pipes, or the tweets in twitter.com.</p>\n<p>I have tried to compare the queries using <code>Pageale</code> and not in the following case.</p>\n<pre class=\"lang-java prettyprint-override\"><code>this.postRepository.findByTitleContains(&quot;title&quot;)\n                .skip(0)\n                .limitRequest(10)\n                .sort((o1, o2) -&gt; o1.getTitle().compareTo(o2.getTitle()))\n\n\nthis.postRepository.findByTitleContains(&quot;title&quot;, PageRequest.of(0, 10, Sort.by(Sort.Direction.ASC, &quot;title&quot;)))\n\n</code></pre>\n<p>When enabling logging for <code>logging.level.org.springframework.data.mongodb.core.ReactiveMongoTemplate=DEBUG</code> and found they print the same log for queries.</p>\n<pre class=\"lang-sh prettyprint-override\"><code> find using query: { &quot;title&quot; : { &quot;$regularExpression&quot; : { &quot;pattern&quot; : &quot;.*title.*&quot;, &quot;options&quot; : &quot;&quot;}}} fields: Document{{title=1}} for class: class com.example.demo.Post in collection: post\n\n//other logging...\n\n find using query: { &quot;title&quot; : { &quot;$regularExpression&quot; : { &quot;pattern&quot; : &quot;.*title.*&quot;, &quot;options&quot; : &quot;&quot;}}} fields: Document{{title=1}} for class: class com.example.demo.Post in collection: post\n</code></pre>\n<p>Keep in mind, all these operations should be <strong>delegated</strong> to the underlay drivers(if it has implemented the reactive streams spec) and performed on the DB side, <strong>NOT</strong> in the memory of your application side.</p>\n<p>Check the <a href=\"https://github.com/hantsy/spring-reactive-sample/blob/master/boot-data-mongo/src/test/java/com/example/demo/PostRepositoryPageableTest.java\" rel=\"nofollow noreferrer\">example codes</a>.</p>\n<p><em>The early sample code I provided above maybe is not a good sample of <code>filter</code> and <code>sort</code> operations(MongoDB itself provides great <code>regularexpression</code> operations for it). But pagination in the reactive variant is not a good match with the concept in the reactive stream spec. When embracing Spring reactive stack, most of the time, we just move our work to a new collection of APIs. In my opinion, the realtime update and elastic response scene could better match <strong>Reactive</strong>, eg. using it with SSE, Websocket, RSocket, <code>application/stream+json</code>(missing in the new Spring docs) protocols, etc</em></p>\n"}], "owner": {"reputation": 379, "user_id": 4784025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/291947249a324d10ba6c21b63a85994c?s=128&d=identicon&r=PG&f=1", "display_name": "Loniks", "link": "https://stackoverflow.com/users/4784025/loniks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9704, "favorite_count": 4, "accepted_answer_id": 45932202, "answer_count": 2, "score": 8, "last_activity_date": 1599885028, "creation_date": 1503941637, "last_edit_date": 1503943284, "question_id": 45924505, "link": "https://stackoverflow.com/questions/45924505/is-there-any-way-to-implement-pagination-in-spring-webflux-and-spring-data-react", "title": "Is there any way to implement pagination in spring webflux and spring data reactive", "body": "<p>I'm trying to understand reactive part of spring 5. I have created simple rest endpoint for finding all entities using spring <code>web-flux</code> and spring data reactive (mongo) but don't see any way how to implement pagination.</p>\n\n<p>Here is my simple example in Kotlin:</p>\n\n<pre><code>@GetMapping(\"/posts/\")\nfun getAllPosts() = postRepository.findAll()\n</code></pre>\n\n<p><strong>Does it mean that reactive endpoint does not require pagination?</strong> Is some way to implement pagination from server side using this stack?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 965, "user_id": 244745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd366d70e95e894b42c0d86a94e08ff8?s=128&d=identicon&r=PG", "display_name": "cwbowron", "link": "https://stackoverflow.com/users/244745/cwbowron"}, "edited": false, "score": 0, "creation_date": 1503936056, "post_id": 45922778, "comment_id": 78804745, "body": "Did you remember to put <code>HyperFlashActivity</code> in the <code>AndroidManifest.xml</code>?"}, {"owner": {"reputation": 965, "user_id": 244745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd366d70e95e894b42c0d86a94e08ff8?s=128&d=identicon&r=PG", "display_name": "cwbowron", "link": "https://stackoverflow.com/users/244745/cwbowron"}, "edited": false, "score": 0, "creation_date": 1503936251, "post_id": 45922778, "comment_id": 78804847, "body": "And add  <code>android:name=&quot;android.support.multidex.MultiDexApplication&quot;</code> to manifest as well?"}, {"owner": {"reputation": 299, "user_id": 4200345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FD57A.jpg?s=128&g=1", "display_name": "Michael Scott", "link": "https://stackoverflow.com/users/4200345/michael-scott"}, "reply_to_user": {"reputation": 965, "user_id": 244745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd366d70e95e894b42c0d86a94e08ff8?s=128&d=identicon&r=PG", "display_name": "cwbowron", "link": "https://stackoverflow.com/users/244745/cwbowron"}, "edited": false, "score": 0, "creation_date": 1503938650, "post_id": 45922778, "comment_id": 78806052, "body": "Hyperflash activity is definitely declared ijn the manifest. We use       MultiDex.install(this) in the application.attachBaseContext"}], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 4200345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FD57A.jpg?s=128&g=1", "display_name": "Michael Scott", "link": "https://stackoverflow.com/users/4200345/michael-scott"}, "edited": false, "score": 0, "creation_date": 1504016844, "post_id": 45927486, "comment_id": 78841609, "body": "Yes, this solves the problem (along with the attendant upgrade to gradle/gradle wrapper 4.4)"}], "tags": [], "owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "is_accepted": true, "score": 2, "last_activity_date": 1503957647, "last_edit_date": 1592644375, "creation_date": 1503954904, "answer_id": 45927486, "question_id": 45922778, "link": "https://stackoverflow.com/questions/45922778/kotlin-activity-not-included-in-apk/45927486#45927486", "title": "Kotlin Activity not included in APK", "body": "<p>I once had the same issue<sup>1</sup> and basically the fix was to instead of Android Studio 2.x download the <a href=\"https://developer.android.com/studio/preview/features/index.html#kotlin_language\" rel=\"nofollow noreferrer\">Android Studio 3.0 Beta</a>. This should fix your problem even if the code highlighting does work when using the 2.x version.</p>\n<p>When you look at the New Features tab you can see that it <a href=\"https://developer.android.com/studio/preview/features/index.html#kotlin_language\" rel=\"nofollow noreferrer\">features support for Kotlin language</a> which <em>kind of</em> suggests it was lacking before (I think in this case it was just built into Android Studio and enhanced specifically for Android Studio's requirements (such as including the class to the dex file)).</p>\n<p><sup>1</sup>: with the exception of multidex as I didn't need it</p>\n"}], "owner": {"reputation": 299, "user_id": 4200345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FD57A.jpg?s=128&g=1", "display_name": "Michael Scott", "link": "https://stackoverflow.com/users/4200345/michael-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "accepted_answer_id": 45927486, "answer_count": 1, "score": 0, "last_activity_date": 1503957647, "creation_date": 1503935073, "last_edit_date": 1503935772, "question_id": 45922778, "link": "https://stackoverflow.com/questions/45922778/kotlin-activity-not-included-in-apk", "title": "Kotlin Activity not included in APK", "body": "<p>Am introducing my first Kotlin code (a new activity) into an established Android app.  Using Android Studio 2.3.3, Gradle 3.3. I am able to build and run the app but at the point of launching the new Kotlin activity, app crashes with a class not found exception. Analyzing the APK indicates the Kotlin class has not been included in the dex (and its multi-dex, have checked both dex files).</p>\n\n<p>build.gradle (project)</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.1.4'\n    repositories {\n        jcenter()\n        maven { url 'https://maven.fabric.io/public' }\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.3'\n        classpath 'com.google.gms:google-services:3.0.0'\n\n        classpath 'com.github.triplet.gradle:play-publisher:1.1.4'\n        classpath 'com.neenbedankt.gradle.plugins:android-apt:1.8'\n\n        classpath 'io.fabric.tools:gradle:1.+'\n        classpath 'me.tatarka:gradle-retrolambda:3.2.5'\n        classpath 'com.getkeepsafe.dexcount:dexcount-gradle-plugin:0.2.1'\n\n        // For automated ui testing\n        classpath 'com.stanfy.spoon:spoon-gradle-plugin:1.2.2'\n\n        // For Amazon Device Farm\n        classpath 'com.amazonaws:aws-devicefarm-gradle-plugin:1.2'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\nallprojects {\n    repositories {\n        maven { url \"https://oss.sonatype.org/content/repositories/snapshots/\" }\n        jcenter()\n        maven { url 'http://dl.bintray.com/optimizely/optimizely' }\n        maven { url \"https://jitpack.io\" }\n        maven { url \"http://salesforce-marketingcloud.github.io/JB4A-SDK-Android/repository\" }\n        flatDir {\n            dirs 'libs'\n        }\n    }\n}\n</code></pre>\n\n<p>build.gradle (app module)</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'io.fabric'\napply plugin: 'me.tatarka.retrolambda'\napply plugin: 'jacoco'\napply plugin: 'spoon'\nrepositories {\n    mavenCentral()\n    maven { url 'https://maven.fabric.io/public' }\n    maven { url 'http://salesforce-marketingcloud.github.io/JB4A-SDK-Android/repository' }\n    maven { url \"https://maven.google.com\" }\n    maven { url \"http://maven.tealiumiq.com/android/releases/\" }\n}\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion '25.0.0'\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n\n    defaultConfig {\n        targetSdkVersion 25\n\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n\n        // Enabling multidex support. :(\n        multiDexEnabled true\n\n    }\n\n    dexOptions {\n        javaMaxHeapSize \"8g\"\n        dexInProcess true // the magic line\n    }\n\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n        compileOptions.incremental = false\n    }\n}\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n\n    //include our modules\n    compile project(':core')\n    compile project(':data')\n\n    //android\n    final APP_COMPAT_VERSION = '25.4.0'\n    compile \"com.android.support:appcompat-v7:$APP_COMPAT_VERSION\"\n    compile \"com.android.support:recyclerview-v7:$APP_COMPAT_VERSION\"\n    compile \"com.android.support:design:$APP_COMPAT_VERSION\"\n    compile \"com.android.support:multidex:1.0.0\"\n    compile \"com.android.support:cardview-v7:$APP_COMPAT_VERSION\"\n\n    // google\n    final PLAY_SERVICES_VERSION = '10.2.4'\n    compile \"com.google.android.gms:play-services-wallet:$PLAY_SERVICES_VERSION\"\n    compile \"com.google.android.gms:play-services-location:$PLAY_SERVICES_VERSION\"\n    compile \"com.google.android.gms:play-services-gcm:$PLAY_SERVICES_VERSION\"\n    compile \"com.google.android.gms:play-services-plus:$PLAY_SERVICES_VERSION\"\n    compile \"com.google.android.gms:play-services-identity:$PLAY_SERVICES_VERSION\"\n    compile \"com.google.android.gms:play-services-analytics:$PLAY_SERVICES_VERSION\"\n    compile \"com.google.android.gms:play-services-auth:$PLAY_SERVICES_VERSION\"\n    compile \"com.google.android.gms:play-services-maps:$PLAY_SERVICES_VERSION\"\n\n    compile \"org.jetbrains.kotlin:kotlin-stdlib\"\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n\n\n    androidTestCompile jUnit\n\n    // Unit tests dependencies\n    testCompile jUnit\n    testCompile \"org.hamcrest:hamcrest-core:$HAMCREST_VERSION\"\n    testCompile \"org.hamcrest:hamcrest-library:$HAMCREST_VERSION\"\n    testCompile \"org.hamcrest:hamcrest-integration:$HAMCREST_VERSION\"\n    testCompile 'org.robolectric:robolectric:3.1'\n    testCompile 'org.mockito:mockito-core:1.+'\n    testCompile 'com.google.guava:guava:19.0'\n    testCompile(\"com.android.support:support-v4:$APP_COMPAT_VERSION\") {\n        exclude module: 'support-annotations'\n    }\n    testCompile('org.powermock:powermock-api-mockito:1.6.4') {\n        exclude module: 'objenesis'\n    }\n    testCompile('org.powermock:powermock-module-junit4:1.6.4') {\n        exclude module: 'objenesis'\n    }\n    testCompile 'io.reactivex:rxandroid:1.0.1'\n    testCompile 'io.reactivex:rxjava:1.1.0'\n\n    // Espresso\n    androidTestCompile('com.android.support.test:runner:0.5') {\n        exclude module: 'support-annotations'\n    }\n    androidTestCompile('com.android.support.test:rules:0.5') {\n        exclude module: 'support-annotations'\n    }\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2') {\n        exclude module: 'support-annotations'\n    }\n    androidTestCompile('com.android.support.test.espresso:espresso-intents:2.2.2') {\n        exclude module: 'support-annotations'\n    }\n    androidTestCompile('com.android.support.test.espresso:espresso-web:2.2.2') {\n        exclude module: 'support-annotations'\n    }\n    androidTestCompile('com.android.support.test.espresso:espresso-contrib:2.2.2') {\n        exclude module: 'support-annotations'\n        exclude module: 'recyclerview-v7'\n        exclude module: 'appcompat-v7'\n        exclude module: 'design'\n        exclude module: 'support-v4'\n    }\n\n    // allows java 8 compile\n    compile 'com.annimon:stream:1.1.2'\n\n    uitestCompile 'com.android.support.test.uiautomator:uiautomator-v18:2.1.2'\n    developmentCompile 'com.android.support.test.uiautomator:uiautomator-v18:2.1.2'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n}\n</code></pre>\n\n<p>and the activity, which is very simple:</p>\n\n<pre><code>class HyperFlashActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n         super.onCreate(savedInstanceState)\n         setContentView(hyperflash_activity_layout)\n    }\n}\n</code></pre>\n\n<p>and the launching code:</p>\n\n<pre><code>public static void launchHyperflashActivity(Activity launchingActivity) {\n    Intent intent = new Intent(launchingActivity, HyperFlashActivity.class);\n    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n    launchingActivity.startActivity(intent);\n    launchingActivity.overridePendingTransition(R.anim.slide_in_right, R.anim.slide_out_left);\n}\n</code></pre>\n"}, {"tags": ["java", "android", "maps", "kotlin"], "owner": {"reputation": 13, "user_id": 7792827, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sX-PWeCVGsw/AAAAAAAAAAI/AAAAAAAABGI/630VvSNmQVM/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u043e\u043b\u0430\u0439 \u0412\u0435\u0442\u0443\u0448\u043a\u043e", "link": "https://stackoverflow.com/users/7792827/%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0%d0%b9-%d0%92%d0%b5%d1%82%d1%83%d1%88%d0%ba%d0%be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1503932406, "creation_date": 1503932406, "question_id": 45921976, "link": "https://stackoverflow.com/questions/45921976/empty-tiles-color-mapview-on-android", "title": "Empty tiles color MapView on Android", "body": "<p>How to change empty tiles background color while map data loading? By default it's grey and I can't find way to change this tiles background, and with dark map style it's look weird</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 1381, "user_id": 2466041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8d302fd50e6050570b1a8dec9c2cdfc?s=128&d=identicon&r=PG", "display_name": "ViramP", "link": "https://stackoverflow.com/users/2466041/viramp"}, "edited": false, "score": 0, "creation_date": 1503929111, "post_id": 45920750, "comment_id": 78800448, "body": "You can use this reference link : <a href=\"https://beginnersbook.com/2013/12/java-arraylist-of-object-sort-example-comparable-and-comparator/\" rel=\"nofollow noreferrer\">beginnersbook.com/2013/12/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2239, "user_id": 2999943, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/6e48c63a01d7d4b3dcb352875bdf84c6?s=128&d=identicon&r=PG&f=1", "display_name": "user2999943", "link": "https://stackoverflow.com/users/2999943/user2999943"}, "edited": false, "score": 0, "creation_date": 1503929500, "post_id": 45920891, "comment_id": 78800719, "body": "Great answer. Thanks!"}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 6, "creation_date": 1503953689, "post_id": 45920891, "comment_id": 78813095, "body": "FYI <code>places.sortedWith(compareBy(String.CASE_INSENSITIVE_ORDER) { it.name })</code> works the same and is how a final lambda parameter is usually written. <code>places.sortedWith(compareBy(String.CASE_INSENSITIVE_ORDER, Place::name))</code> could also be written."}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1536694713, "post_id": 45920891, "comment_id": 91514301, "body": "How to do this case insensitive order for two fields? So e.g first for it.name and then it.last name?"}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "reply_to_user": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 0, "creation_date": 1536694817, "post_id": 45920891, "comment_id": 91514355, "body": "@ephemient How to do this case insensitive order for two fields? So e.g first for it.name and then  it.last name?"}, {"owner": {"reputation": 2405, "user_id": 346912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c0946fdf28e7126132cdbe315055bd?s=128&d=identicon&r=PG", "display_name": "Scott Newson", "link": "https://stackoverflow.com/users/346912/scott-newson"}, "reply_to_user": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1548254247, "post_id": 45920891, "comment_id": 95477226, "body": "@K.Os looks like compareBy can take a varargs of lambdas, see this answer: <a href=\"https://stackoverflow.com/a/37259451/346912\">stackoverflow.com/a/37259451/346912</a>"}, {"owner": {"reputation": 370, "user_id": 4826571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cjiht.png?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/4826571/ivan"}, "edited": false, "score": 0, "creation_date": 1582697357, "post_id": 45920891, "comment_id": 106862151, "body": "&quot;Note that this Comparator does not take locale into account, and will result in an unsatisfactory ordering for certain locales.&quot; - from method description. <code>toLowerCase()</code> lets you pass in a Locale."}], "tags": [], "owner": {"reputation": 2405, "user_id": 346912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c0946fdf28e7126132cdbe315055bd?s=128&d=identicon&r=PG", "display_name": "Scott Newson", "link": "https://stackoverflow.com/users/346912/scott-newson"}, "is_accepted": true, "score": 49, "last_activity_date": 1503928989, "creation_date": 1503928989, "answer_id": 45920891, "question_id": 45920750, "link": "https://stackoverflow.com/questions/45920750/how-to-sort-objects-list-in-case-insensitive-order/45920891#45920891", "title": "How to sort objects list in case insensitive order?", "body": "<p>It looks like compareBy might be able to take a Comparator as an argument, see the documentation here: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.comparisons/compare-by.html\" rel=\"noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.comparisons/compare-by.html</a></p>\n\n<p>Try:</p>\n\n<pre><code>places.sortedWith(compareBy(String.CASE_INSENSITIVE_ORDER, { it.name }))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1536694893, "post_id": 50530036, "comment_id": 91514391, "body": "How to do this case insensitive order for two fields? So e.g first for it.name and then it.last name?"}], "tags": [], "owner": {"reputation": 13421, "user_id": 2298241, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/kWH39.jpg?s=128&g=1", "display_name": "Ivo Stoyanov", "link": "https://stackoverflow.com/users/2298241/ivo-stoyanov"}, "is_accepted": false, "score": 12, "last_activity_date": 1527254699, "last_edit_date": 1527254699, "creation_date": 1527253816, "answer_id": 50530036, "question_id": 45920750, "link": "https://stackoverflow.com/questions/45920750/how-to-sort-objects-list-in-case-insensitive-order/50530036#50530036", "title": "How to sort objects list in case insensitive order?", "body": "<p>Sort Ascending - case insensitive:</p>\n\n<pre><code>myList.sortedBy { it.name?.toLowerCase() }\n</code></pre>\n\n<p>Sort Descending - case insensitive:</p>\n\n<pre><code>myList.sortedByDescending { it.name?.toLowerCase() }\n</code></pre>\n"}], "owner": {"reputation": 2239, "user_id": 2999943, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/6e48c63a01d7d4b3dcb352875bdf84c6?s=128&d=identicon&r=PG&f=1", "display_name": "user2999943", "link": "https://stackoverflow.com/users/2999943/user2999943"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11134, "favorite_count": 2, "accepted_answer_id": 45920891, "answer_count": 2, "score": 28, "last_activity_date": 1527850346, "creation_date": 1503928535, "last_edit_date": 1503929578, "question_id": 45920750, "link": "https://stackoverflow.com/questions/45920750/how-to-sort-objects-list-in-case-insensitive-order", "title": "How to sort objects list in case insensitive order?", "body": "<p>Let's say I have a list of Strings in Kotlin:  <code>stringList: MutableList&lt;String&gt;</code></p>\n\n<p>Then it is is easy to sort such list in case insensitive order by doing this: </p>\n\n<pre><code>stringList.sortWith(String.CASE_INSENSITIVE_ORDER)\n</code></pre>\n\n<p>But how would I sort a list of objects in case insensitive order? For example: <code>places: MutableList&lt;Place&gt;</code> </p>\n\n<p>Where <code>Place</code> is a simple class with 2 fields - <code>name: String</code> and <code>id: Int</code>, and I would like to sort these Places by the <code>name</code> field. </p>\n\n<p>I tried to do something like this: <code>places.sortedWith(compareBy { it.name })</code> but this solution doesn't take letter case into account.</p>\n"}, {"tags": ["java", "android", "gridview", "kotlin"], "comments": [{"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 3, "creation_date": 1503928021, "post_id": 45920520, "comment_id": 78799649, "body": "Related: <a href=\"https://stackoverflow.com/questions/45703751/how-to-set-layout-params-on-an-imageview-inside-gridview-in-android\" title=\"how to set layout params on an imageview inside gridview in android\">stackoverflow.com/questions/45703751/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4964, "user_id": 3891376, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/y4V8u.png?s=128&g=1", "display_name": "Andrey Danilov", "link": "https://stackoverflow.com/users/3891376/andrey-danilov"}, "is_accepted": false, "score": 4, "last_activity_date": 1503929787, "creation_date": 1503929787, "answer_id": 45921149, "question_id": 45920520, "link": "https://stackoverflow.com/questions/45920520/gridview-layoutparams-doesnt-exist-in-kotlin/45921149#45921149", "title": "GridView.LayoutParams doesn&#39;t exist in Kotlin?", "body": "<p><code>GridView</code> doesnt have inner class <code>LayoutParams</code>, it uses <code>AbsListView.LayoutParams</code></p>\n\n<p>so just change code to</p>\n\n<pre><code>imageView.layoutParams = AbsListView.LayoutParams(85,85)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1533, "user_id": 1350902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSSXZ.jpg?s=128&g=1", "display_name": "dipdipdip", "link": "https://stackoverflow.com/users/1350902/dipdipdip"}, "is_accepted": true, "score": 8, "last_activity_date": 1503929954, "creation_date": 1503929954, "answer_id": 45921209, "question_id": 45920520, "link": "https://stackoverflow.com/questions/45920520/gridview-layoutparams-doesnt-exist-in-kotlin/45921209#45921209", "title": "GridView.LayoutParams doesn&#39;t exist in Kotlin?", "body": "<p>Try one of the following:</p>\n\n<pre><code>imageView.setLayoutParams(AbsListView.LayoutParams(85, 85))\nimageView.setLayoutParams(GridView@AbsListView.LayoutParams(85, 85))\n</code></pre>\n\n<p>Since GridView doesn't have it's own implementation of LayoutParams you have to choose an implementation of its superclass <code>AbsListView</code>. You can decide if you want to add the <code>GridView@</code> prefix.</p>\n"}], "owner": {"reputation": 734, "user_id": 6514270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97e2a509de8c25e864803c1d95d71fd9?s=128&d=identicon&r=PG&f=1", "display_name": "Amiraslan", "link": "https://stackoverflow.com/users/6514270/amiraslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1305, "favorite_count": 1, "accepted_answer_id": 45921209, "answer_count": 2, "score": 7, "last_activity_date": 1503970617, "creation_date": 1503927787, "last_edit_date": 1592644375, "question_id": 45920520, "link": "https://stackoverflow.com/questions/45920520/gridview-layoutparams-doesnt-exist-in-kotlin", "title": "GridView.LayoutParams doesn&#39;t exist in Kotlin?", "body": "<p>I want to use <code>GridView</code> and according to the <a href=\"https://developer.android.com/guide/topics/ui/layout/gridview.html\" rel=\"noreferrer\">documentation</a>, in adapter I can use this line in adapter:</p>\n<pre><code> imageView.setLayoutParams(new GridView.LayoutParams(85, 85));\n</code></pre>\n<p>Well, converting it to Kotlin, it says:</p>\n<p><a href=\"https://i.stack.imgur.com/npCab.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/npCab.png\" alt=\"enter image description here\" /></a></p>\n<p>It works in Java, but not in Kotlin.</p>\n<p>So, why is that? And how can I use <code>GridView.LayoutParams</code> in Kotlin?</p>\n"}, {"tags": ["java", "kotlin", "rx-java", "observable", "reactive-programming"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 1, "creation_date": 1503924761, "post_id": 45919269, "comment_id": 78797417, "body": "Ok. Where did you get stuck when you tried to implement this?"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 1, "creation_date": 1503926303, "post_id": 45919269, "comment_id": 78798435, "body": "Detecting an observable is not emitting requires a timeout at least. Also what should happen to events of ob2 while ob1 is emitting? What is the original requirement you want to solve by this switching fashion?"}, {"owner": {"reputation": 3424, "user_id": 856588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg8G7.jpg?s=128&g=1", "display_name": "Maxim Volgin", "link": "https://stackoverflow.com/users/856588/maxim-volgin"}, "edited": false, "score": 0, "creation_date": 1503987014, "post_id": 45919269, "comment_id": 78821703, "body": "Not sure what the original requirement is, perhaps just .merge() both and then .debounce(); it can happen though that ob1 events will be skipped sometimes, not sure whether it is critical to preserve them all."}, {"owner": {"reputation": 365, "user_id": 3900210, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c2ea656f87f465289d7fb2e3abd952f?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/3900210/sagar"}, "edited": false, "score": 0, "creation_date": 1503991000, "post_id": 45919269, "comment_id": 78823925, "body": "Got the answer did debounce on first then takeuntil on the second with a repeat on it then merged both."}], "owner": {"reputation": 365, "user_id": 3900210, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c2ea656f87f465289d7fb2e3abd952f?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/3900210/sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503923943, "creation_date": 1503923943, "question_id": 45919269, "link": "https://stackoverflow.com/questions/45919269/switching-observables", "title": "Switching Observables", "body": "<p>I have two observables <code>ob1</code> and <code>ob2</code>. Now I have to switch between <code>ob1</code> and <code>ob2</code> based on the condition that I should switch to <code>ob2</code> when <code>ob1</code> is not emitting and switch back to <code>ob1</code> when it starts emitting.</p>\n"}, {"tags": ["android", "android-asynctask", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 5891737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c98c8879cd4e9f2916101876948393f?s=128&d=identicon&r=PG&f=1", "display_name": "Ikun", "link": "https://stackoverflow.com/users/5891737/ikun"}, "edited": false, "score": 0, "creation_date": 1503919558, "post_id": 45917309, "comment_id": 78794060, "body": "Thank you for the answer."}], "tags": [], "owner": {"reputation": 929, "user_id": 7855177, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-avNsBxd4mKE/AAAAAAAAAAI/AAAAAAAAABQ/dSTXwqwzagQ/photo.jpg?sz=128", "display_name": "Piwo", "link": "https://stackoverflow.com/users/7855177/piwo"}, "is_accepted": false, "score": 2, "last_activity_date": 1539617645, "last_edit_date": 1539617645, "creation_date": 1503917564, "answer_id": 45917309, "question_id": 45917160, "link": "https://stackoverflow.com/questions/45917160/kotlin-error-while-referencing-activity-from-inner-class/45917309#45917309", "title": "Kotlin error while referencing Activity from Inner Class", "body": "<p>The class MyTask must be defined as an inner class:</p>\n\n<pre><code>inner class MyTask(\n    private var mContext: Context?,\n    val pbMigrating: ProgressBar\n) : AsyncTask&lt;Void, Int, Void&gt;()\n{\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 5891737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c98c8879cd4e9f2916101876948393f?s=128&d=identicon&r=PG&f=1", "display_name": "Ikun", "link": "https://stackoverflow.com/users/5891737/ikun"}, "edited": false, "score": 0, "creation_date": 1503919342, "post_id": 45917323, "comment_id": 78793948, "body": "Thank you for the answer. I was trying out Kotlin for the first time so did not know about this."}], "tags": [], "owner": {"reputation": 2569, "user_id": 2853392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2j5ao.jpg?s=128&g=1", "display_name": "vishal jangid", "link": "https://stackoverflow.com/users/2853392/vishal-jangid"}, "is_accepted": true, "score": 7, "last_activity_date": 1539616092, "last_edit_date": 1539616092, "creation_date": 1503917636, "answer_id": 45917323, "question_id": 45917160, "link": "https://stackoverflow.com/questions/45917160/kotlin-error-while-referencing-activity-from-inner-class/45917323#45917323", "title": "Kotlin error while referencing Activity from Inner Class", "body": "<p>You have to make class as inner  </p>\n\n<pre><code>class MyActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n    }\n\n    override fun onResume() {\n        super.onResume()\n    } inner class MyTask(private var mContext: Context?, val pbMigrating: ProgressBar) : AsyncTask&lt;Void, Int, Void&gt;() {\n\n        private var size: Long = 0\n\n        override fun onPreExecute() {\n            super.onPreExecute()\n        }\n\n        override fun doInBackground(vararg params: Void?): Void? {\n            return null\n        }\n\n        override fun onProgressUpdate(vararg values: Int?) {\n            super.onProgressUpdate(*values)\n            pbMigrating.progress = values[0] as Int\n        }\n\n        override fun onPostExecute(result: Void?) {\n            super.onPostExecute(result)\n            this@MyActivity //&lt;- Cannot Resolve error here\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 5891737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c98c8879cd4e9f2916101876948393f?s=128&d=identicon&r=PG&f=1", "display_name": "Ikun", "link": "https://stackoverflow.com/users/5891737/ikun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 1, "accepted_answer_id": 45917323, "answer_count": 2, "score": 6, "last_activity_date": 1539617645, "creation_date": 1503917040, "question_id": 45917160, "link": "https://stackoverflow.com/questions/45917160/kotlin-error-while-referencing-activity-from-inner-class", "title": "Kotlin error while referencing Activity from Inner Class", "body": "<p>I have an AsyncTask as an inner class inside my Activity written in Kotlin. Now, I tried to access the Activity from my AsyncTask's onPostExecute using <code>this@MyActivity</code> but Android Studio reports it as Unresolved Reference error. But this is the most common method suggested online for referencing the OuterClass from an InnerClass. The code is as follows: </p>\n\n<pre><code>class MyActivity : AbstractAppPauseActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n}\n\noverride fun onResume() {\n    super.onResume()\n}\n\nclass MyTask(private var mContext: Context?, val pbMigrating: ProgressBar) :AsyncTask&lt;Void, Int, Void&gt;() {\n\n\n    private var size: Long = 0\n\n    override fun onPreExecute() {\n        super.onPreExecute()\n        ...\n\n    }\n\n    override fun doInBackground(vararg params: Void?): Void? {\n        ...\n        return null\n    }\n\n    override fun onProgressUpdate(vararg values: Int?) {\n        super.onProgressUpdate(*values)\n        pbMigrating.progress = values[0] as Int\n\n    }\n\n    override fun onPostExecute(result: Void?) {\n        super.onPostExecute(result)\n        this@MyActivity //&lt;- Cannot Resolve error here \n    }\n\n\n}\n\n}\n</code></pre>\n"}, {"tags": ["android", "listview", "arraylist", "kotlin", "adapter"], "comments": [{"owner": {"reputation": 1258, "user_id": 4853459, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3976b992524ef2d76c8d2fa2d285f892?s=128&d=identicon&r=PG&f=1", "display_name": "D.J", "link": "https://stackoverflow.com/users/4853459/d-j"}, "edited": false, "score": 0, "creation_date": 1503917081, "post_id": 45917026, "comment_id": 78792622, "body": "implament Parceble in mo3dInfo class and pass list in bundle or intent."}, {"owner": {"reputation": 417, "user_id": 8490394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-qI0I_4I7dfA/AAAAAAAAAAI/AAAAAAAAABE/JVtDvcx-vX8/photo.jpg?sz=128", "display_name": "Nour Medhat", "link": "https://stackoverflow.com/users/8490394/nour-medhat"}, "reply_to_user": {"reputation": 1258, "user_id": 4853459, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3976b992524ef2d76c8d2fa2d285f892?s=128&d=identicon&r=PG&f=1", "display_name": "D.J", "link": "https://stackoverflow.com/users/4853459/d-j"}, "edited": false, "score": 0, "creation_date": 1503917693, "post_id": 45917026, "comment_id": 78793029, "body": "how can i do it ?"}, {"owner": {"reputation": 1065, "user_id": 4198076, "user_type": "registered", "accept_rate": 19, "profile_image": "https://graph.facebook.com/100002648168525/picture?type=large", "display_name": "Dharma Sai Seerapu", "link": "https://stackoverflow.com/users/4198076/dharma-sai-seerapu"}, "edited": false, "score": 0, "creation_date": 1503917824, "post_id": 45917026, "comment_id": 78793103, "body": "add EventBus() to send the list. Ref : <a href=\"https://github.com/greenrobot/EventBus\" rel=\"nofollow noreferrer\">github.com/greenrobot/EventBus</a>"}, {"owner": {"reputation": 453, "user_id": 5783417, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jYFcint7c0k/AAAAAAAAAAI/AAAAAAAABNU/erUqqab5w-Y/photo.jpg?sz=128", "display_name": "Atul Vasudev A", "link": "https://stackoverflow.com/users/5783417/atul-vasudev-a"}, "edited": false, "score": 0, "creation_date": 1503918165, "post_id": 45917026, "comment_id": 78793313, "body": "&quot;public static&quot; methods of an activity can be called from another activity. This is how I do in java, I am not familiar with kotlin, but it will be similar."}, {"owner": {"reputation": 133, "user_id": 6894274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24889681abe58e452cb33ba59c358dc1?s=128&d=identicon&r=PG&f=1", "display_name": "PCGALI ANDROID", "link": "https://stackoverflow.com/users/6894274/pcgali-android"}, "edited": false, "score": 0, "creation_date": 1503920907, "post_id": 45917026, "comment_id": 78794908, "body": "use Global class for array declaration, after that you can use from any where in application"}], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 8490394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-qI0I_4I7dfA/AAAAAAAAAAI/AAAAAAAAABE/JVtDvcx-vX8/photo.jpg?sz=128", "display_name": "Nour Medhat", "link": "https://stackoverflow.com/users/8490394/nour-medhat"}, "edited": false, "score": 0, "creation_date": 1503922362, "post_id": 45917652, "comment_id": 78795860, "body": "please i want it in Kotlin not java"}], "tags": [], "owner": {"reputation": 550, "user_id": 6831099, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-TECav3BxPeY/AAAAAAAAAAI/AAAAAAAAABU/6DTsNsEkflY/photo.jpg?sz=128", "display_name": "Ahsan Saeed", "link": "https://stackoverflow.com/users/6831099/ahsan-saeed"}, "is_accepted": false, "score": 0, "last_activity_date": 1503918815, "creation_date": 1503918815, "answer_id": 45917652, "question_id": 45917026, "link": "https://stackoverflow.com/questions/45917026/adding-data-to-arraylist-from-another-activity/45917652#45917652", "title": "Adding data to arrayList from another activity", "body": "<p>You can send from activity like this</p>\n\n<pre><code> List&lt; mo3dInfo &gt; l = new ArrayList&lt;&gt;();\n            Type listOfTestObject = new TypeToken&lt;List&lt;mo3dInfo&gt;&gt;() {\n            }.getType();\nString s = new Gson().toJson(l,listOfObjects);\nIntent intent = new Intent(context,activity);\nintent.putExtra(\"data\",s);\nstartActivity(intent);\n</code></pre>\n\n<p>And you can receive data like this</p>\n\n<pre><code>Type type=new TypeToken&lt;List&lt;mo3dInfo&gt;&gt;(){}.getType();\n            List&lt;mo3dInfo&gt; list=new Gson().fromJson(getintent.getStringExtra(\"data\"),type));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 417, "user_id": 8490394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-qI0I_4I7dfA/AAAAAAAAAAI/AAAAAAAAABE/JVtDvcx-vX8/photo.jpg?sz=128", "display_name": "Nour Medhat", "link": "https://stackoverflow.com/users/8490394/nour-medhat"}, "edited": false, "score": 0, "creation_date": 1503922531, "post_id": 45917947, "comment_id": 78795970, "body": "@Parcelize class mo3dInfo():Parceable{} when i add this line i got an error"}, {"owner": {"reputation": 577, "user_id": 5691049, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CqR16z9lkl4/AAAAAAAAAAI/AAAAAAAAAK4/zHFoWJFlE3g/photo.jpg?sz=128", "display_name": "Pravin Londhe", "link": "https://stackoverflow.com/users/5691049/pravin-londhe"}, "reply_to_user": {"reputation": 417, "user_id": 8490394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-qI0I_4I7dfA/AAAAAAAAAAI/AAAAAAAAABE/JVtDvcx-vX8/photo.jpg?sz=128", "display_name": "Nour Medhat", "link": "https://stackoverflow.com/users/8490394/nour-medhat"}, "edited": false, "score": 0, "creation_date": 1503924080, "post_id": 45917947, "comment_id": 78796948, "body": "What error you get? If you not enabled android extensions 1.1.4 then put androidExtensions{     experimental = true } in your app level build.gradle and kotlin version should be 1.1.4"}, {"owner": {"reputation": 417, "user_id": 8490394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-qI0I_4I7dfA/AAAAAAAAAAI/AAAAAAAAABE/JVtDvcx-vX8/photo.jpg?sz=128", "display_name": "Nour Medhat", "link": "https://stackoverflow.com/users/8490394/nour-medhat"}, "edited": false, "score": 0, "creation_date": 1503924123, "post_id": 45917947, "comment_id": 78796980, "body": "how can i enabled it ?"}, {"owner": {"reputation": 577, "user_id": 5691049, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CqR16z9lkl4/AAAAAAAAAAI/AAAAAAAAAK4/zHFoWJFlE3g/photo.jpg?sz=128", "display_name": "Pravin Londhe", "link": "https://stackoverflow.com/users/5691049/pravin-londhe"}, "reply_to_user": {"reputation": 417, "user_id": 8490394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-qI0I_4I7dfA/AAAAAAAAAAI/AAAAAAAAABE/JVtDvcx-vX8/photo.jpg?sz=128", "display_name": "Nour Medhat", "link": "https://stackoverflow.com/users/8490394/nour-medhat"}, "edited": false, "score": 0, "creation_date": 1503924165, "post_id": 45917947, "comment_id": 78797009, "body": "put androidExtensions{ experimental = true } in your app level build.gradle refer <a href=\"https://blog.jetbrains.com/kotlin/2017/08/kotlin-1-1-4-is-out/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2017/08/kotlin-1-1-4-is-out</a>"}, {"owner": {"reputation": 577, "user_id": 5691049, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CqR16z9lkl4/AAAAAAAAAAI/AAAAAAAAAK4/zHFoWJFlE3g/photo.jpg?sz=128", "display_name": "Pravin Londhe", "link": "https://stackoverflow.com/users/5691049/pravin-londhe"}, "reply_to_user": {"reputation": 417, "user_id": 8490394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-qI0I_4I7dfA/AAAAAAAAAAI/AAAAAAAAABE/JVtDvcx-vX8/photo.jpg?sz=128", "display_name": "Nour Medhat", "link": "https://stackoverflow.com/users/8490394/nour-medhat"}, "edited": false, "score": 0, "creation_date": 1504834705, "post_id": 45917947, "comment_id": 79177604, "body": "@NourMedhat i just updated my answer .check that work for you.You can also refer the same type of question answered by me <a href=\"https://stackoverflow.com/questions/46093364/android-kotlin-create-class-implement-parcelable-give-an-error-in-override-of/46097159#46097159\" title=\"android kotlin create class implement parcelable give an error in override of\">stackoverflow.com/questions/46093364/&hellip;</a>"}], "tags": [], "owner": {"reputation": 577, "user_id": 5691049, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CqR16z9lkl4/AAAAAAAAAAI/AAAAAAAAAK4/zHFoWJFlE3g/photo.jpg?sz=128", "display_name": "Pravin Londhe", "link": "https://stackoverflow.com/users/5691049/pravin-londhe"}, "is_accepted": false, "score": 0, "last_activity_date": 1504834555, "last_edit_date": 1504834555, "creation_date": 1503919815, "answer_id": 45917947, "question_id": 45917026, "link": "https://stackoverflow.com/questions/45917026/adding-data-to-arraylist-from-another-activity/45917947#45917947", "title": "Adding data to arrayList from another activity", "body": "<p>Using Parcelable from Kotlin 1.1.4 </p>\n\n<p>Use @Parcelize annotation in your mo3dInfo class extending from Parcelable</p>\n\n<pre><code>@Parcelize\nclass mo3dInfo():Parceable\n</code></pre>\n\n<p><strong>NOTE</strong> : The studio gives you error.but you can ignore this error; the lint checks haven\u2019t yet been updated to understand @Parcelize. The corresponding YouTrack issue is here:</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/KT-19300\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-19300</a></p>\n\n<p>and then pass the object of array of mo3dInfo in Intent like</p>\n\n<pre><code>intent.putExtra(key,arrayOfmo3dInfo)\n</code></pre>\n\n<p>then to parse this object in your listView activity</p>\n\n<pre><code> var array: ArrayList&lt;mo3dInfo&gt; = intent.getParcelableExtra(key)\n</code></pre>\n\n<p>More info refer <a href=\"https://github.com/Kotlin/KEEP/blob/master/proposals/extensions/android-parcelable.md\" rel=\"nofollow noreferrer\">Kotlin parcelable</a></p>\n"}], "owner": {"reputation": 417, "user_id": 8490394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-qI0I_4I7dfA/AAAAAAAAAAI/AAAAAAAAABE/JVtDvcx-vX8/photo.jpg?sz=128", "display_name": "Nour Medhat", "link": "https://stackoverflow.com/users/8490394/nour-medhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 967, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1504834555, "creation_date": 1503916533, "last_edit_date": 1503917720, "question_id": 45917026, "link": "https://stackoverflow.com/questions/45917026/adding-data-to-arraylist-from-another-activity", "title": "Adding data to arrayList from another activity", "body": "<p>I have an activity for creating new item for listView. On click Save button of this activity , I want to add date to arrayList.  This arrayList is in another activity and this activity has a listView and its adapter gets items from arrayList </p>\n\n<p>This is my adapter :</p>\n\n<pre><code> inner class mo3d1Adapter : BaseAdapter {\n    override fun getItemId(p0: Int): Long {\n        return p0.toLong()\n    }\n\n    override fun getCount(): Int {\n        return listOfmo3d.size\n    }\n\n    var listOfmo3d = ArrayList&lt;mo3dInfo&gt;()\n    var context: Context? = null\n\n    constructor(context: Context, listOfmo3d: ArrayList&lt;mo3dInfo&gt;) : super() {\n        this.listOfmo3d = listOfmo3d\n        this.context = context\n    }\n\n    override fun getView(p0: Int, p1: View?, p2: ViewGroup?): View {\n\n\n        val mo3d = listOfmo3d[p0]\n\n        var inflatormo3d = context!!.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n        var myViewmo3d = inflatormo3d.inflate(R.layout.item_mo3d, null)\n\n\n\n\n            myViewmo3d.setOnClickListener() {\n\n                Toast.makeText(context, \" click\" , Toast.LENGTH_SHORT).show()\n                var intent = Intent(context, mo3dDetails::class.java)\n                startActivity(intent)\n            }\n        myViewmo3d.meeting_time_mo3d.text = mo3d.time.toString()\n\n        myViewmo3d.meeting_name_mo3d.text = mo3d.name.toString()\n     //   myViewmo3d .meeting_time.text = mo3d .time.toString()\n\n        myViewmo3d.meeting_date_mo3d.text = mo3d.date.toString()\n            //   myViewmo3d.attendance_number_.text = mo3d.n2.toString()!!\n\n\n            return myViewmo3d\n\n\n    }\n\n    override fun getItem(p0: Int): Any {\n        return  listOfmo3d[p0]\n\n    }\n\n\n}\n</code></pre>\n\n<p>This is my arrayList : </p>\n\n<pre><code>  var listOfmo3d = ArrayList&lt;mo3dInfo&gt;()\n</code></pre>\n\n<p>This is on click save button function :</p>\n\n<pre><code>fun SaveAction(view: View) {\n    var i = MainMo3d()\n\n    i.listOfmo3d.add(mo3dInfo(\"f\", \"test\", \"test\"))\n}\n</code></pre>\n\n<p>How can I pass data from activity to another activity and add it to arrayList ?  </p>\n"}, {"tags": ["android", "kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 2837, "user_id": 3677030, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/423439711c29bc18bf8db2799f1600f6?s=128&d=identicon&r=PG", "display_name": "Mohammed Rampurawala", "link": "https://stackoverflow.com/users/3677030/mohammed-rampurawala"}, "edited": false, "score": 0, "creation_date": 1503911974, "post_id": 45915647, "comment_id": 78789600, "body": "Please post your loop code."}, {"owner": {"reputation": 1935, "user_id": 859688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba3953f6a6a459dcd4810a228ef4000?s=128&d=identicon&r=PG", "display_name": "hrach", "link": "https://stackoverflow.com/users/859688/hrach"}, "reply_to_user": {"reputation": 2837, "user_id": 3677030, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/423439711c29bc18bf8db2799f1600f6?s=128&d=identicon&r=PG", "display_name": "Mohammed Rampurawala", "link": "https://stackoverflow.com/users/3677030/mohammed-rampurawala"}, "edited": false, "score": 0, "creation_date": 1503912178, "post_id": 45915647, "comment_id": 78789726, "body": "I&#39;m not sure what do you mean by that. Do you mean a code with cycle/loop that was written in Kotlin?"}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1503912822, "post_id": 45915647, "comment_id": 78790069, "body": "First, pull the app.  Once you solve the crashes, then release to production.  Second.  reproduce the error preferably in debug, but use logcat and other tools with a production build (in house).  If it happens 100%, then I don&#39;t understand what you mean by &quot;no idea how to ... replicate&quot;"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 0, "creation_date": 1503912879, "post_id": 45915647, "comment_id": 78790114, "body": "Do you use proguard or something similar? It looks as if superinterfaces of lambdas were erased by a post-processing tool"}], "answers": [{"comments": [{"owner": {"reputation": 1935, "user_id": 859688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba3953f6a6a459dcd4810a228ef4000?s=128&d=identicon&r=PG", "display_name": "hrach", "link": "https://stackoverflow.com/users/859688/hrach"}, "edited": false, "score": 0, "creation_date": 1503916293, "post_id": 45916184, "comment_id": 78792177, "body": "Thanks! Will try 0.18 :-)"}], "tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": true, "score": 1, "last_activity_date": 1503913819, "creation_date": 1503913819, "answer_id": 45916184, "question_id": 45915647, "link": "https://stackoverflow.com/questions/45915647/kotlin-arrayindexoutofboundsexception-during-converting-dispatchtask-to-string/45916184#45916184", "title": "Kotlin: ArrayIndexOutOfBoundsException during converting DispatchTask to string", "body": "<p>That is a bug in Kotlin reflection. Meanwhile, I'd suggest to upgrade to the latest version of <code>kotlinx.coroutines</code> library (you can find what is the latest version <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/README.md\" rel=\"nofollow noreferrer\">here</a>). Since version 0.17 <code>DispatchTask.toString</code> does not try to covert lambda to string anymore. It's <code>toString</code> implementation is actually more useful now and has more relevant information for debugging purposes.</p>\n"}], "owner": {"reputation": 1935, "user_id": 859688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba3953f6a6a459dcd4810a228ef4000?s=128&d=identicon&r=PG", "display_name": "hrach", "link": "https://stackoverflow.com/users/859688/hrach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 980, "favorite_count": 0, "accepted_answer_id": 45916184, "answer_count": 1, "score": 0, "last_activity_date": 1503916270, "creation_date": 1503911885, "last_edit_date": 1503916270, "question_id": 45915647, "link": "https://stackoverflow.com/questions/45915647/kotlin-arrayindexoutofboundsexception-during-converting-dispatchtask-to-string", "title": "Kotlin: ArrayIndexOutOfBoundsException during converting DispatchTask to string", "body": "<p>We have released our first Kotlin pieces into production and we are getting crashes with this stacktrace:</p>\n\n<pre><code>Fatal Exception: java.lang.ArrayIndexOutOfBoundsException: length=0; index=0\n       at kotlin.jvm.internal.ReflectionFactory.renderLambdaToString(ReflectionFactory.java:47)\n       at kotlin.jvm.internal.Reflection.renderLambdaToString(Reflection.java:80)\n       at kotlin.jvm.internal.Lambda.toString(Lambda.kt:22)\n       at java.lang.StringBuilder.append(StringBuilder.java:202)\n       at kotlinx.coroutines.experimental.DispatchedContinuation.toString(CoroutineDispatcher.kt:192)\n       at java.lang.StringBuilder.append(StringBuilder.java:202)\n       at kotlinx.coroutines.experimental.DispatchTask.toString(CoroutineDispatcher.kt:124)\n       at java.lang.StringBuilder.append(StringBuilder.java:202)\n       at android.os.Looper.loop(Looper.java:160)\n       at android.app.ActivityThread.main(ActivityThread.java:5637)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at java.lang.reflect.Method.invoke(Method.java:372)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:960)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:755)\n</code></pre>\n\n<p>Google show us this is happening in 100 % on Android 5. Crashlytics/Fabric shows also two crashes from Android 4.4. No crashes from newer Android versions.</p>\n\n<p>I have no idea how to prevent this crash or how to replicate it.</p>\n\n<p>Current version:</p>\n\n<ul>\n<li>org.jetbrains.kotlinx:kotlinx-coroutines-core:0.16</li>\n</ul>\n"}, {"tags": ["java", "kotlin", "rx-java", "observable", "reactive-programming"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 1, "creation_date": 1503905463, "post_id": 45913587, "comment_id": 78786161, "body": "You can&#39;t, that requires a custom operator."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1503908279, "post_id": 45913587, "comment_id": 78787623, "body": "Have you tried <a href=\"http://reactivex.io/documentation/operators/merge.html\" rel=\"nofollow noreferrer\">merging</a> source observable with <a href=\"http://reactivex.io/documentation/operators/interval.html\" rel=\"nofollow noreferrer\">interval</a> of default values?"}], "owner": {"reputation": 365, "user_id": 3900210, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c2ea656f87f465289d7fb2e3abd952f?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/3900210/sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1503904437, "creation_date": 1503904437, "question_id": 45913587, "link": "https://stackoverflow.com/questions/45913587/rxjava-default-value-for-throttlefirst", "title": "RxJava Default value for throttleFirst", "body": "<p>How to provide a default value for <code>throttleFirst</code> when the source observable doesn't emit anything in the given timespan?</p>\n\n<pre><code>ob1.throttleFirst(1, TimeUnit.SECONDS)\n</code></pre>\n\n<p>I have tried <code>defaultIfEmpty()</code> but I doesn't seem to work.</p>\n"}, {"tags": ["android", "sqlite", "kotlin", "anko"], "comments": [{"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 1, "creation_date": 1503901474, "post_id": 45912680, "comment_id": 78784251, "body": "<a href=\"https://github.com/Kotlin/anko/wiki/Anko-SQLite\" rel=\"nofollow noreferrer\">Anko SQLite</a>, like the <a href=\"https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html\" rel=\"nofollow noreferrer\">SQLiteDatabase</a> it builds upon, does not natively support joins. However, Anko doesn&#39;t provide a <code>rawQuery()</code> mechanism, so you can&#39;t even build it yourself..."}, {"owner": {"reputation": 1679, "user_id": 5536006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-w_ThV1XwSRk/AAAAAAAAAAI/AAAAAAAAADA/UlccMsLP3uY/photo.jpg?sz=128", "display_name": "FranzHuber23", "link": "https://stackoverflow.com/users/5536006/franzhuber23"}, "reply_to_user": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 1, "creation_date": 1526059425, "post_id": 45912680, "comment_id": 87611559, "body": "@ephemient: This is not true. Anko-SQLite supports native queries!!! See my example here: <a href=\"https://github.com/Kotlin/anko/issues/622#issuecomment-388428071\" rel=\"nofollow noreferrer\">github.com/Kotlin/anko/issues/622#issuecomment-388428071</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3069, "user_id": 4613320, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/STVAg.jpg?s=128&g=1", "display_name": "Malik Motani", "link": "https://stackoverflow.com/users/4613320/malik-motani"}, "edited": false, "score": 0, "creation_date": 1515482605, "post_id": 48163129, "comment_id": 83305457, "body": "Thanks for your efforts, but I have shifted my database to Room."}, {"owner": {"reputation": 532, "user_id": 1532987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyRl5.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1532987/ali"}, "reply_to_user": {"reputation": 3069, "user_id": 4613320, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/STVAg.jpg?s=128&g=1", "display_name": "Malik Motani", "link": "https://stackoverflow.com/users/4613320/malik-motani"}, "edited": false, "score": 0, "creation_date": 1515570195, "post_id": 48163129, "comment_id": 83344503, "body": "your welcome, don&#39;t worry , it may be useful for somebody else yet :)"}, {"owner": {"reputation": 1679, "user_id": 5536006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-w_ThV1XwSRk/AAAAAAAAAAI/AAAAAAAAADA/UlccMsLP3uY/photo.jpg?sz=128", "display_name": "FranzHuber23", "link": "https://stackoverflow.com/users/5536006/franzhuber23"}, "edited": false, "score": 0, "creation_date": 1526059761, "post_id": 48163129, "comment_id": 87611709, "body": "This did not work for me. I&#39;ve added another answer how it worked for me using native / raw queries from the SQLiteDatabase class directly."}], "tags": [], "owner": {"reputation": 532, "user_id": 1532987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyRl5.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1532987/ali"}, "is_accepted": false, "score": 3, "last_activity_date": 1515482456, "creation_date": 1515482456, "answer_id": 48163129, "question_id": 45912680, "link": "https://stackoverflow.com/questions/45912680/select-data-from-two-tables-in-kotlin-anko/48163129#48163129", "title": "Select data from two tables in Kotlin Anko", "body": "<p>it's late but can be useful for someone like myself</p>\n\n<p>the answer in short is ,Yes</p>\n\n<p>you should create a data class including join column data variables like this:</p>\n\n<pre><code>data class joinTable(val id: Int, val title: String, val name:String) \n</code></pre>\n\n<p>and use inner join in select command</p>\n\n<pre><code>database.use {\n            select(\"table1 inner join table2\",\n                    \"id,title,name\").exec { parseList&lt;joinTable&gt;(classParser()) }\n        }\n</code></pre>\n\n<p>that's it</p>\n"}, {"tags": [], "owner": {"reputation": 1679, "user_id": 5536006, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-w_ThV1XwSRk/AAAAAAAAAAI/AAAAAAAAADA/UlccMsLP3uY/photo.jpg?sz=128", "display_name": "FranzHuber23", "link": "https://stackoverflow.com/users/5536006/franzhuber23"}, "is_accepted": false, "score": 0, "last_activity_date": 1526060042, "last_edit_date": 1526060042, "creation_date": 1526059704, "answer_id": 50297372, "question_id": 45912680, "link": "https://stackoverflow.com/questions/45912680/select-data-from-two-tables-in-kotlin-anko/50297372#50297372", "title": "Select data from two tables in Kotlin Anko", "body": "<p>I'm posting my answer for another problem (See <a href=\"https://github.com/Kotlin/anko/issues/622\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/anko/issues/622</a>) here, too. I was trying to do a query in Anko SQLite that uses an inner join on two times the same table (e.g. SELECT ... FuelData AS FuelData1 INNER JOIN FuelData AS FuelData2 ON FuelData1.Id = FuelData2.Id).</p>\n\n<p>I added a data class:</p>\n\n<pre><code>class FuelData2(\n        val id : Int,\n        val currentDate: String,\n        val litersPer100Km: Double\n)\n</code></pre>\n\n<p>and added the logic to my activity class:</p>\n\n<pre><code>private fun readFuelData2(): ArrayList&lt;FuelData2&gt; {\n    val resultList = ArrayList&lt;FuelData2&gt;()\n    val query = \"SELECT FuelData1.Id, FuelData2.CurrentDate,\" +\n            \" (FuelData2.Fueled / (FuelData2.Mileage - FuelData1.Mileage) * 100) AS LitersPer100Km\" +\n            \" FROM FuelData AS FuelData1\" +\n            \" INNER JOIN FuelData AS FuelData2\" +\n            \" ON FuelData1.Id = (FuelData2.Id - 1);\"\n    database.use {\n        val cursor = database.writableDatabase.rawQuery(query, null)\n        while (cursor.moveToNext()) {\n            val fuelData = FuelData2(id = cursor.getInt(0),currentDate = cursor.getString(1),\n                    litersPer100Km = cursor.getDouble(2))\n            resultList.add(fuelData)\n        }\n    }\n    return resultList\n}\n</code></pre>\n\n<p>The query I wanted to do is: </p>\n\n<pre><code>SELECT FuelData1.Id, FuelData2.CurrentDate,\n(FuelData2.Fueled / (FuelData2.Mileage - FuelData1.Mileage) * 100) AS LitersPer100Km\nFROM FuelData AS FuelData1\nINNER JOIN FuelData AS FuelData2\nON FuelData1.Id = (FuelData2.Id - 1);\n</code></pre>\n\n<p>I've created another issue for Anko to add one example to the documentation as it's really confusing: <a href=\"https://github.com/Kotlin/anko/issues/623\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/anko/issues/623</a></p>\n"}], "owner": {"reputation": 3069, "user_id": 4613320, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/STVAg.jpg?s=128&g=1", "display_name": "Malik Motani", "link": "https://stackoverflow.com/users/4613320/malik-motani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2184, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1526060042, "creation_date": 1503900717, "question_id": 45912680, "link": "https://stackoverflow.com/questions/45912680/select-data-from-two-tables-in-kotlin-anko", "title": "Select data from two tables in Kotlin Anko", "body": "<p>In my database, there are two tables,</p>\n\n<blockquote>\n  <p>1) Task : (id (INTEGER + PRIMARY_KEY), title, description, timestamp, category_id(Foreign key of Category -> id ))</p>\n  \n  <p>2) Category : (id (INTEGER + PRIMARY_KEY), name)</p>\n</blockquote>\n\n<p>To select data from a table Anko is providing a method like :</p>\n\n<pre><code>var mDatabase: DatabaseManager = DatabaseManager.getInstance(activity)\nvar mResult: List&lt;TaskModel&gt; = ArrayList()\nmDatabase.use {\n    mResult = select(TABLE_TASK).parseList(classParser())\n}\n</code></pre>\n\n<p>What I want is to <strong>show list of task with its category name</strong> \nI have checked all the tutorials and stack links but didn't get any way to achieve this.</p>\n\n<p><strong>Is there any way to select data from two tables in Kotlin Anko?</strong></p>\n\n<p>Thanks is Advance!</p>\n"}, {"tags": ["android", "singleton", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 2080, "user_id": 4877269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99109eb655f35d1a427876b48b123a29?s=128&d=identicon&r=PG", "display_name": "Alex Peters", "link": "https://stackoverflow.com/users/4877269/alex-peters"}, "edited": false, "score": 0, "creation_date": 1510790541, "post_id": 45912619, "comment_id": 81589935, "body": "Could you please clarify why you state that invoking <code>Room.databaseBuilder()</code> is \u201cexpensive?\u201d  This call is designed to take place on the UI thread, so my expectation is that it should be very lightweight."}, {"owner": {"reputation": 5814, "user_id": 428173, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/VlGA5.jpg?s=128&g=1", "display_name": "Martin Melka", "link": "https://stackoverflow.com/users/428173/martin-melka"}, "edited": false, "score": 0, "creation_date": 1560525393, "post_id": 45912619, "comment_id": 99777915, "body": "Note: If your app runs in a single process, you should follow the singleton design pattern when instantiating an AppDatabase object. Each RoomDatabase instance is fairly expensive, and you rarely need access to multiple instances within a single process. | Source: <a href=\"https://developer.android.com/training/data-storage/room/index.html\" rel=\"nofollow noreferrer\">developer.android.com/training/data-storage/room/index.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 1, "creation_date": 1503944759, "post_id": 45912620, "comment_id": 78809082, "body": "Be careful to pass the application Context to Room like in the example in my article."}, {"owner": {"reputation": 65664, "user_id": 3998402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1deae6b5ee0cdf29e9a4d9f219f547a?s=128&d=identicon&r=PG&f=1", "display_name": "humazed", "link": "https://stackoverflow.com/users/3998402/humazed"}, "reply_to_user": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 0, "creation_date": 1504082219, "post_id": 45912620, "comment_id": 78869152, "body": "why I should be careful!"}, {"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 1, "creation_date": 1504090838, "post_id": 45912620, "comment_id": 78874990, "body": "The documentation of databaseBuilder says: &quot;Context: The context for the database. This is usually the Application context.&quot; I would rather follow the samples and pass the applicationContext to avoid trouble or memory leaks."}, {"owner": {"reputation": 65664, "user_id": 3998402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1deae6b5ee0cdf29e9a4d9f219f547a?s=128&d=identicon&r=PG&f=1", "display_name": "humazed", "link": "https://stackoverflow.com/users/3998402/humazed"}, "reply_to_user": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 0, "creation_date": 1504098176, "post_id": 45912620, "comment_id": 78880542, "body": "Okay, I miss understand you at the first time, I thought you are recommending to be careful when using application-context, and you are right using activity context with leads to memory leaks.  as we always would have a static reference to the activity."}], "tags": [], "owner": {"reputation": 65664, "user_id": 3998402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1deae6b5ee0cdf29e9a4d9f219f547a?s=128&d=identicon&r=PG&f=1", "display_name": "humazed", "link": "https://stackoverflow.com/users/3998402/humazed"}, "is_accepted": true, "score": 13, "last_activity_date": 1617811425, "last_edit_date": 1617811425, "creation_date": 1503900419, "answer_id": 45912620, "question_id": 45912619, "link": "https://stackoverflow.com/questions/45912619/using-room-as-singleton-in-kotlin/45912620#45912620", "title": "Using room as singleton in kotlin", "body": "<p>After some research, I found that I have two options.</p>\n<ol>\n<li><a href=\"https://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"nofollow noreferrer\">Double-checked locking</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiom#Example_Java_Implementation\" rel=\"nofollow noreferrer\">Initialization-on-demand holder idiom</a></li>\n</ol>\n<p>I considered implementing one of them, but this didn't felt right for Kotlin - too much boilerplate code.</p>\n<hr />\n<p>After more research, I stumbled upon <a href=\"https://medium.com/@BladeCoder/kotlin-singletons-with-argument-194ef06edd9e\" rel=\"nofollow noreferrer\">this great article</a> which provides an excellent solution, which uses Double-checked locking but in an elegant way.</p>\n<pre><code>companion object : SingletonHolder&lt;AppDatabase, Context&gt;({\n       Room.databaseBuilder(it.applicationContext, AppDatabase::class.java, &quot;train.db&quot;).build()\n})\n</code></pre>\n<p>From the article:</p>\n<blockquote>\n<p>A reusable Kotlin implementation:</p>\n<p>We can encapsulate the logic to\nlazily create and initialize a singleton with argument inside a\n<code>SingletonHolder</code> class. In order to make that logic thread-safe, we\nneed to implement a synchronized algorithm and the most efficient\none\u200a\u2014\u200awhich is also the hardest to get right\u200a\u2014\u200ais the double-checked\nlocking algorithm.</p>\n</blockquote>\n<pre><code>open class SingletonHolder&lt;T, A&gt;(creator: (A) -&gt; T) {\n    private var creator: ((A) -&gt; T)? = creator\n    @Volatile private var instance: T? = null\n\n    fun getInstance(arg: A): T {\n        val i = instance\n        if (i != null) {\n            return i\n        }\n\n        return synchronized(this) {\n            val i2 = instance\n            if (i2 != null) {\n                i2\n            } else {\n                val created = creator!!(arg)\n                instance = created\n                creator = null\n                created\n            }\n        }\n    }\n}\n</code></pre>\n<hr />\n<p><strong>Extra:</strong>\nif you want Singleton with two arguments</p>\n<pre><code>open class SingletonHolder2&lt;out T, in A, in B&gt;(creator: (A, B) -&gt; T) {\n    private var creator: ((A, B) -&gt; T)? = creator\n    @Volatile private var instance: T? = null\n\n    fun getInstance(arg0: A, arg1: B): T {\n        val i = instance\n        if (i != null) return i\n\n        return synchronized(this) {\n            val i2 = instance\n            if (i2 != null) {\n                i2\n            } else {\n                val created = creator!!(arg0, arg1)\n                instance = created\n                creator = null\n                created\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 1, "creation_date": 1503943300, "post_id": 45913452, "comment_id": 78808317, "body": "The first solution keeps a permanent static reference to the Context in the companion object, which is not ideal because it may create memory leaks. Context should only be used during initialization, then cleared.  The second solution is dangerous: you should never cast getApplicationContext() to your application class, because in some cases it may not return your application instance. More info: <a href=\"https://stackoverflow.com/questions/5018545/getapplication-vs-getapplicationcontext\" title=\"getapplication vs getapplicationcontext\">stackoverflow.com/questions/5018545/&hellip;</a>"}], "tags": [], "owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "is_accepted": false, "score": 1, "last_activity_date": 1504021590, "last_edit_date": 1504021590, "creation_date": 1503903930, "answer_id": 45913452, "question_id": 45912619, "link": "https://stackoverflow.com/questions/45912619/using-room-as-singleton-in-kotlin/45913452#45913452", "title": "Using room as singleton in kotlin", "body": "<p>You could make use of the Kotlin standard library's</p>\n\n<pre>fun &lt;T&gt; <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/lazy.html\" rel=\"nofollow noreferrer\">lazy</a>(<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-lazy-thread-safety-mode/index.html\" rel=\"nofollow noreferrer\">LazyThreadSafetyMode</a>.SYNCHRONIZED, initializer: () -> T): <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-lazy/index.html\" rel=\"nofollow noreferrer\">Lazy</a>&lt;T&gt;</pre>\n\n<pre><code>companion object {\n    private lateinit var context: Context\n    private val database: AppDatabase by lazy(LazyThreadSafetyMode.SYNCHRONIZED) {\n        Room.databaseBuilder(context, AppDatabase::class.java, \"trains.db\").build()\n    }\n    fun getDatabase(context: Context): AppDatabase {\n        this.context = context.applicationContext\n        return database\n    }\n}\n</code></pre>\n\n<p>Personally though, I would normally add ApplicationContext-dependent singletons inside the Application, e.g.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- AndroidManifest.xml --&gt;\n&lt;manifest&gt;\n  &lt;application android:name=\"MyApplication\"&gt;\n...\n</code></pre>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MyApplication : Application() {\n    val database: AppDatabase by lazy {\n        Room.databaseBuilder(this, AppDatabase::class.java, \"train.db\").build()\n    }\n}\n</code></pre>\n\n<p>You can even define an extension method for easy access as <code>context.database</code>.</p>\n\n<pre><code>val Context.database\n    get() =\n        generateSequence(applicationContext) {\n       (it as? ContextWrapper)?.baseContext\n       }.filterIsInstance&lt;MyApplication&gt;().first().database\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2092, "user_id": 2692747, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/62644b8949879b83c9f4ad00c4a929d9?s=128&d=identicon&r=PG&f=1", "display_name": "gderaco", "link": "https://stackoverflow.com/users/2692747/gderaco"}, "edited": false, "score": 2, "creation_date": 1525296688, "post_id": 47270223, "comment_id": 87305906, "body": "why are you using m prefix? it&#39;s obsolete."}, {"owner": {"reputation": 2571, "user_id": 3734457, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de6e5134d8a12fdcbd9cd3b204d70203?s=128&d=identicon&r=PG", "display_name": "Jan Slominski", "link": "https://stackoverflow.com/users/3734457/jan-slominski"}, "reply_to_user": {"reputation": 2092, "user_id": 2692747, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/62644b8949879b83c9f4ad00c4a929d9?s=128&d=identicon&r=PG&f=1", "display_name": "gderaco", "link": "https://stackoverflow.com/users/2692747/gderaco"}, "edited": false, "score": 0, "creation_date": 1525297140, "post_id": 47270223, "comment_id": 87306106, "body": "@gderaco because I like it. It\u2019s not obsolete. It\u2019s just a coding style convention."}, {"owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1556105203, "post_id": 47270223, "comment_id": 98322543, "body": "Thank you. Hopefully we can build a community together where people use up-to-date standards. I&#39;m still new to Kotlin so if I made any mistakes then edit again."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1556181663, "post_id": 47270223, "comment_id": 98352558, "body": "<code>mPrefixes</code> <i>are</i> discouraged in Kotlin. See <a href=\"https://stackoverflow.com/a/48056303/2413303\">stackoverflow.com/a/48056303/2413303</a>"}], "tags": [], "owner": {"reputation": 2571, "user_id": 3734457, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de6e5134d8a12fdcbd9cd3b204d70203?s=128&d=identicon&r=PG", "display_name": "Jan Slominski", "link": "https://stackoverflow.com/users/3734457/jan-slominski"}, "is_accepted": false, "score": 5, "last_activity_date": 1556181616, "last_edit_date": 1556181616, "creation_date": 1510594406, "answer_id": 47270223, "question_id": 45912619, "link": "https://stackoverflow.com/questions/45912619/using-room-as-singleton-in-kotlin/47270223#47270223", "title": "Using room as singleton in kotlin", "body": "<p>In this particular case I would resort to using <a href=\"https://github.com/google/dagger\" rel=\"nofollow noreferrer\">Dagger 2</a>, or some other dependency injection library like <a href=\"https://github.com/Ekito/koin\" rel=\"nofollow noreferrer\">Koin</a> or <a href=\"https://github.com/stephanenicolas/toothpick\" rel=\"nofollow noreferrer\">Toothpick</a>. All three libraries allow to provide dependancies as singletons.</p>\n\n<p>Here's the code for Dagger 2 module:</p>\n\n<pre><code>@Module\nclass AppModule constructor(private val context: Context) {\n    @Provides\n    @Singleton\n    fun providesDatabase(): AppDatabase {\n        return Room.databaseBuilder(\n                context,\n                AppDatabase::class.java,\n                \"train.db\")\n                .build()\n    }\n}\n</code></pre>\n\n<p>AppComponent:</p>\n\n<pre><code>@Singleton\n@Component(modules = arrayOf(\n        AppModule::class\n))\ninterface AppComponent {\n    fun inject(viewModel: YourViewModel)\n    fun inject(repository: YourRepository)\n}\n</code></pre>\n\n<p>Application class to provide injection:</p>\n\n<pre><code>class App : Application() {\n    companion object {\n        private lateinit var appComponent: AppComponent\n        val component: AppComponent get() = appComponent\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        initializeDagger()\n    }\n\n    private fun initializeDagger() {\n        component = DaggerAppComponent.builder()\n                .appModule(AppModule(this))\n                .build()\n    }\n}\n</code></pre>\n\n<p>And then inject your database as singleton to wherever you need it (for example in your app's <a href=\"https://medium.com/corebuild-software/android-repository-pattern-using-rx-room-bac6c65d7385\" rel=\"nofollow noreferrer\">repository</a>):</p>\n\n<pre><code>@Inject lateinit var appDatabase: AppDatabase\n\ninit {\n    App.component.inject(this)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9842356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xqNppFbY5_Q/AAAAAAAAAAI/AAAAAAAAAIk/hm4hj-y7zsw/photo.jpg?sz=128", "display_name": "Rahul Kumar", "link": "https://stackoverflow.com/users/9842356/rahul-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1527181951, "creation_date": 1527181951, "answer_id": 50514786, "question_id": 45912619, "link": "https://stackoverflow.com/questions/45912619/using-room-as-singleton-in-kotlin/50514786#50514786", "title": "Using room as singleton in kotlin", "body": "<p>Here's how i figured out...</p>\n\n<pre><code>@Database(entities = [MyEntity::class], version = dbVersion, exportSchema = true)\nabstract class AppDB : RoomDatabase() {\n\n// First create a companion object with getInstance method\n    companion object {\n        fun getInstance(context: Context): AppDB = \n    Room.databaseBuilder(context.applicationContext, AppDB::class.java, dbName).build()\n    }\n\n    abstract fun getMyEntityDao(): MyEntityDao\n}\n\n// This is the Singleton class that holds the AppDB instance \n// which make the AppDB singleton indirectly\n// Get the AppDB instance via AppDBProvider through out the app\nobject AppDBProvider {\n\nprivate var AppDB: AppDB? = null\n\n    fun getInstance(context: Context): AppDB {\n        if (appDB == null) {\n            appDB = AppDB.getInstance(context)\n        }\n       return appDB!!\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4994, "user_id": 1718042, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/A0fvm.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/1718042/max"}, "is_accepted": false, "score": -1, "last_activity_date": 1529825936, "creation_date": 1529825936, "answer_id": 51007875, "question_id": 45912619, "link": "https://stackoverflow.com/questions/45912619/using-room-as-singleton-in-kotlin/51007875#51007875", "title": "Using room as singleton in kotlin", "body": "<p>singleton in kotlin is real easy just do this </p>\n\n<pre><code>companion object {\n    @JvmStatic\n    val DATABASE_NAME = \"DataBase\"\n\n    @JvmField\n    val database = Room.databaseBuilder(App.context(), DataBase::class.java, DataBase.DATABASE_NAME).build()\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 505, "user_id": 11374024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf442005d32852a3d1f38758f7530c79?s=128&d=identicon&r=PG&f=1", "display_name": "Chinthaka Fernando", "link": "https://stackoverflow.com/users/11374024/chinthaka-fernando"}, "is_accepted": false, "score": 0, "last_activity_date": 1618916213, "last_edit_date": 1618916213, "creation_date": 1618915727, "answer_id": 67177417, "question_id": 45912619, "link": "https://stackoverflow.com/questions/45912619/using-room-as-singleton-in-kotlin/67177417#67177417", "title": "Using room as singleton in kotlin", "body": "<p>Used <strong>@Volatile</strong> for thread safety.</p>\n<pre><code>public abstract class AppDatabase : RoomDatabase() {\n\n   abstract fun trainDao(): trainDao\n\n   companion object {\n        @Volatile\n        private var INSTANCE: AppDatabase? = null\n\n        fun getDatabase(context: Context): Db = INSTANCE ?: synchronized(this){\n            val instance = Room.databaseBuilder(\n            context.applicationContext,\n            AppDatabase ::class.java,\n            &quot;train-db&quot;\n          ).build()\n          INSTANCE = instance\n          instance\n        }\n   }\n}\n</code></pre>\n<p>taken from : <a href=\"https://developer.android.com/codelabs/android-room-with-a-view-kotlin#7\" rel=\"nofollow noreferrer\">https://developer.android.com/codelabs/android-room-with-a-view-kotlin#7</a></p>\n"}], "owner": {"reputation": 65664, "user_id": 3998402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1deae6b5ee0cdf29e9a4d9f219f547a?s=128&d=identicon&r=PG&f=1", "display_name": "humazed", "link": "https://stackoverflow.com/users/3998402/humazed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10484, "favorite_count": 9, "accepted_answer_id": 45912620, "answer_count": 6, "score": 13, "last_activity_date": 1618916213, "creation_date": 1503900419, "last_edit_date": 1503901592, "question_id": 45912619, "link": "https://stackoverflow.com/questions/45912619/using-room-as-singleton-in-kotlin", "title": "Using room as singleton in kotlin", "body": "<p>I'm trying to use Room as singleton so I didn't have to invoke <code>Room.databaseBuilder()</code> -which is expensive- more than once.</p>\n\n<pre><code>@Database(entities = arrayOf(\n        Price::class,\n        StationOrder::class,\n        TicketPrice::class,\n        Train::class,\n        TrainCategory::class\n), version = 2)\n@TypeConverters(Converters::class)\nabstract class AppDatabase : RoomDatabase() {\n\n    abstract fun dao(): TrainDao\n\ncompanion object {\n        fun createDatabase(context: Context): AppDatabase\n                = Room.databaseBuilder(context, AppDatabase::class.java, \"trains.db\").build()\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Note:</p>\n\n<ol>\n<li>Can't use Object because Room requires using <code>abstract class</code>.</li>\n<li>singleton must be thread safe because multiple threads might access it at the same time.</li>\n<li>must be able to take <code>Context</code> as an argument.</li>\n</ol>\n\n<hr>\n\n<p>I have looked at all similar StackOverflow questions and none of them satisfy my requirements</p>\n\n<p><a href=\"https://stackoverflow.com/questions/33128024/singleton-with-argument-in-kotlin\">Singleton with argument in Kotlin</a> <strong>isn't thread-safe</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/35634803/kotlin-best-way-to-convert-singleton-databasecontroller-in-android\">Kotlin - Best way to convert Singleton DatabaseController in Android</a> <strong>isn't thread-safe</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/35587652/kotlin-thread-save-native-lazy-singleton-with-parameter\">Kotlin thread save native lazy singleton with parameter</a> <strong>uses object</strong></p>\n"}, {"tags": ["java", "android", "dialog", "kotlin", "listener"], "comments": [{"owner": {"reputation": 58671, "user_id": 6509751, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/260caa996ae8ac9fcee35487aa8d7c81?s=128&d=identicon&r=PG&f=1", "display_name": "creativecreatorormaybenot", "link": "https://stackoverflow.com/users/6509751/creativecreatorormaybenot"}, "edited": false, "score": 0, "creation_date": 1503881829, "post_id": 45910200, "comment_id": 78779945, "body": "what about not allowing dismiss instead of reopening it? you can use show() I bet"}], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 7964702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KT2X9.jpg?s=128&g=1", "display_name": "Hiosdra", "link": "https://stackoverflow.com/users/7964702/hiosdra"}, "edited": false, "score": 0, "creation_date": 1503952807, "post_id": 45913883, "comment_id": 78812685, "body": "that crash app and in stacktrace, there is message saying that this view has already been shown"}], "tags": [], "owner": {"reputation": 929, "user_id": 7855177, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-avNsBxd4mKE/AAAAAAAAAAI/AAAAAAAAABQ/dSTXwqwzagQ/photo.jpg?sz=128", "display_name": "Piwo", "link": "https://stackoverflow.com/users/7855177/piwo"}, "is_accepted": false, "score": 1, "last_activity_date": 1503905571, "creation_date": 1503905571, "answer_id": 45913883, "question_id": 45910200, "link": "https://stackoverflow.com/questions/45910200/re-showing-dialog-after-dissmiss/45913883#45913883", "title": "Re-showing dialog after dissmiss", "body": "<p>The easiest way would be probably to recall the function displaying the dialog, like this:</p>\n\n<pre><code>    fun showDialog() {\n        val alertDialog = AlertDialog.Builder(this)\n        alertDialog.setMessage(getString(R.string.alert_dialog_main_activity))\n        val editText = EditText(this)\n        editText.inputType = InputType.TYPE_CLASS_PHONE\n        alertDialog.run {\n            setView(editText)\n            setOnDismissListener {\n                 showDialog() // recall the function\n            }\n            setPositiveButton(\"Done\", { dialogInterface, i -&gt; {\n                    toast(editText.text.toString())\n                    PreferenceManager.getDefaultSharedPreferences(applicationContext).edit().putInt(\"phoneNumber\", editText.text.toString().toInt()).commit()\n                    }\n                })\n            show()\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "is_accepted": true, "score": 0, "last_activity_date": 1504108422, "creation_date": 1504108422, "answer_id": 45964873, "question_id": 45910200, "link": "https://stackoverflow.com/questions/45910200/re-showing-dialog-after-dissmiss/45964873#45964873", "title": "Re-showing dialog after dissmiss", "body": "<p>Try with this : </p>\n\n<pre><code>AlertDialog.Builder(this).apply {\n    setMessage(getString(R.string.alert_dialog_main_activity))\n    setView(editText)\n    setOnDismissListener {\n        if(/*TODO validate phone number*/)\n        (it as AlertDialog).show()\n    }\n    setPositiveButton(\"Done\", { dialogInterface, i -&gt;\n        toast(editText.text.toString())\n        PreferenceManager.getDefaultSharedPreferences(applicationContext).edit().putInt(\"phoneNumber\", editText.text.toString().toInt()).commit()\n\n    })\n    show()\n}\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 7964702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KT2X9.jpg?s=128&g=1", "display_name": "Hiosdra", "link": "https://stackoverflow.com/users/7964702/hiosdra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 45964873, "answer_count": 2, "score": 0, "last_activity_date": 1504108422, "creation_date": 1503876557, "question_id": 45910200, "link": "https://stackoverflow.com/questions/45910200/re-showing-dialog-after-dissmiss", "title": "Re-showing dialog after dissmiss", "body": "<p>how to re-show the same dialog after every dismiss?\nMy code(in Kotlin):</p>\n\n<pre><code>val alertDialog = AlertDialog.Builder(this)\nalertDialog.setMessage(getString(R.string.alert_dialog_main_activity))\nval editText = EditText(this)\neditText.inputType = InputType.TYPE_CLASS_PHONE\nalertDialog.run {\n    setView(editText)\n    setOnDismissListener { TODO( \"Re-show dialog\" }\n    setPositiveButton(\"Done\", { dialogInterface, i -&gt;\n        run {\n            toast(editText.text.toString())\n            PreferenceManager.getDefaultSharedPreferences(applicationContext).edit().putInt(\"phoneNumber\", editText.text.toString().toInt()).commit()\n            }\n        })\n    show()\n}\n</code></pre>\n\n<p>Answers could be in Java too.</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-custom-view"], "comments": [{"owner": {"reputation": 9320, "user_id": 7045114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9OfXY.jpg?s=128&g=1", "display_name": "Maksim Ostrovidov", "link": "https://stackoverflow.com/users/7045114/maksim-ostrovidov"}, "edited": false, "score": 0, "creation_date": 1503896776, "post_id": 45909039, "comment_id": 78782723, "body": "What&#39;s the behavior on a stable AS release?"}, {"owner": {"reputation": 1411, "user_id": 3236455, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3e9c648b24d09ddde9c8a5bd8c671305?s=128&d=identicon&r=PG", "display_name": "der_Fidelis", "link": "https://stackoverflow.com/users/3236455/der-fidelis"}, "reply_to_user": {"reputation": 9320, "user_id": 7045114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9OfXY.jpg?s=128&g=1", "display_name": "Maksim Ostrovidov", "link": "https://stackoverflow.com/users/7045114/maksim-ostrovidov"}, "edited": false, "score": 0, "creation_date": 1503896825, "post_id": 45909039, "comment_id": 78782741, "body": "@MaximOstrovidov I will look and let you know"}, {"owner": {"reputation": 945, "user_id": 4733231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tq8s2.jpg?s=128&g=1", "display_name": "egorikem", "link": "https://stackoverflow.com/users/4733231/egorikem"}, "edited": false, "score": 0, "creation_date": 1503902616, "post_id": 45909039, "comment_id": 78784711, "body": "Code seems fine. It might just be some lags by AS. Try &quot;clean -&gt; rebuild&quot; or invalidate caches."}, {"owner": {"reputation": 1411, "user_id": 3236455, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3e9c648b24d09ddde9c8a5bd8c671305?s=128&d=identicon&r=PG", "display_name": "der_Fidelis", "link": "https://stackoverflow.com/users/3236455/der-fidelis"}, "reply_to_user": {"reputation": 945, "user_id": 4733231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tq8s2.jpg?s=128&g=1", "display_name": "egorikem", "link": "https://stackoverflow.com/users/4733231/egorikem"}, "edited": false, "score": 0, "creation_date": 1503902666, "post_id": 45909039, "comment_id": 78784735, "body": "@GeorgySavatkov I&#39;ve done both"}], "answers": [{"tags": [], "owner": {"reputation": 1411, "user_id": 3236455, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3e9c648b24d09ddde9c8a5bd8c671305?s=128&d=identicon&r=PG", "display_name": "der_Fidelis", "link": "https://stackoverflow.com/users/3236455/der-fidelis"}, "is_accepted": false, "score": 1, "last_activity_date": 1503951817, "creation_date": 1503951817, "answer_id": 45926833, "question_id": 45909039, "link": "https://stackoverflow.com/questions/45909039/the-following-classes-could-not-be-found-with-custom-kotlin-view-in-layout/45926833#45926833", "title": "&quot;The following classes could not be found&quot; with custom Kotlin view in layout", "body": "<p>Confirmed bug <a href=\"https://issuetracker.google.com/issues/62255811\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/62255811</a>. Fix should appear in the next release of Android Studio.</p>\n"}], "owner": {"reputation": 1411, "user_id": 3236455, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3e9c648b24d09ddde9c8a5bd8c671305?s=128&d=identicon&r=PG", "display_name": "der_Fidelis", "link": "https://stackoverflow.com/users/3236455/der-fidelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1567755048, "creation_date": 1503865659, "last_edit_date": 1503866001, "question_id": 45909039, "link": "https://stackoverflow.com/questions/45909039/the-following-classes-could-not-be-found-with-custom-kotlin-view-in-layout", "title": "&quot;The following classes could not be found&quot; with custom Kotlin view in layout", "body": "<p>I'm running into a problem including a custom Kotlin view in an XML layout file. Here's the code:</p>\n\n<pre><code>class CustomView: RelativeLayout {\n\n    /**\n     * Programmatic constructor\n     */\n    constructor(aVariable: Boolean, context: Context): super(context) { ... }\n\n    /**\n     * XML constructor\n     */\n    @JvmOverloads\n    constructor(context: Context, attributeSet: AttributeSet? = null, defStyle: Int = 0): super(context, attributeSet, defStyle) { ... }\n\n}\n</code></pre>\n\n<p>and the <strong>XML</strong>:</p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;android.support.v7.widget.RecyclerView\n        android:id=\"@+id/recyclerView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\" /&gt;\n\n    &lt;com.turingtechnologies.materialscrollbar.CustomView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_alignParentRight=\"true\"\n        android:layout_alignParentEnd=\"true\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>Then the layout previewer complains:</p>\n\n<p>\"Missing classes-</p>\n\n<p><em>The following classes could not be found:</em>\n<code>com.turingtechnologies.materialscrollbar.CustomView</code> (Fix Build Path, Edit XML, Create Class)\"</p>\n\n<p>Note: This is AS 3.0 beta 3</p>\n"}, {"tags": ["android", "kotlin", "rx-java2", "android-room"], "answers": [{"comments": [{"owner": {"reputation": 7301, "user_id": 1812633, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TrUYx.jpg?s=128&g=1", "display_name": "Sourabh", "link": "https://stackoverflow.com/users/1812633/sourabh"}, "edited": false, "score": 0, "creation_date": 1504003610, "post_id": 45923184, "comment_id": 78831952, "body": "So, do you recommend using <code>Single.zip(room.dao().get().firstOrError(), ...).toFlowable()</code> or is there a better way?"}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "reply_to_user": {"reputation": 7301, "user_id": 1812633, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TrUYx.jpg?s=128&g=1", "display_name": "Sourabh", "link": "https://stackoverflow.com/users/1812633/sourabh"}, "edited": false, "score": 0, "creation_date": 1504006485, "post_id": 45923184, "comment_id": 78833872, "body": "Rather <code>.flatMapSingle { Flowable.zip(...).firstOrError() }</code> seems to fit the problem better"}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 0, "last_activity_date": 1503936484, "creation_date": 1503936484, "answer_id": 45923184, "question_id": 45908578, "link": "https://stackoverflow.com/questions/45908578/change-flowablelistobj1-to-flowablelistobj2-in-room/45923184#45923184", "title": "Change Flowable&lt;List&lt;Obj1&gt;&gt; to Flowable&lt;List&lt;Obj2&gt;&gt; in room", "body": "<blockquote>\n  <p>Flowable.fromIterable gives finite number or items and then ends.</p>\n</blockquote>\n\n<p>But the <code>Flowable.zip</code> inside of the <code>flatmap</code> will not end, since Room's DAO objects emit the current value AND all future updates, so the <code>database.*()</code> calls that are zipped together are not finite. If you add a <code>.first()</code> call to the inner <code>Flowable.zip</code> the second version should work as well.</p>\n"}], "owner": {"reputation": 7301, "user_id": 1812633, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TrUYx.jpg?s=128&g=1", "display_name": "Sourabh", "link": "https://stackoverflow.com/users/1812633/sourabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "accepted_answer_id": 45923184, "answer_count": 1, "score": 3, "last_activity_date": 1503936484, "creation_date": 1503862260, "question_id": 45908578, "link": "https://stackoverflow.com/questions/45908578/change-flowablelistobj1-to-flowablelistobj2-in-room", "title": "Change Flowable&lt;List&lt;Obj1&gt;&gt; to Flowable&lt;List&lt;Obj2&gt;&gt; in room", "body": "<p>How can I read a flowable list of values from room and convert it to another object which is a combination of more values from room</p>\n\n<pre><code>database.leadsDao().getLeads(leadState.name)\n    .flatMap {\n        val len = it.size.toLong()\n        Flowable.fromIterable(it)\n            .flatMap {\n                Flowable.zip(\n                        database.orderDao().getById(it.orderId),\n                        database.orderMedicineDao().getByOrderId(it.orderId),\n                        database.patientDao().getById(it.patientId),\n                        Function3&lt;Order, List&lt;OrderMedicine&gt;, Patient, LeadDetail&gt;\n                        { order, orderMedicines, patient -&gt; LeadDetail.from(it, patient, order, orderMedicines) })\n            }\n            .take(len)\n            .toList()\n            .toFlowable()\n    }\n</code></pre>\n\n<p>The code above works but I don't like the <code>take(len)</code> part. And without it, the stream never calls onNext of the subscriber. The stream keeps waiting for more items, which shouldn't happen since Flowable.fromIterable gives finite number or items and then ends. I.e., the code below <strong>doesn't work</strong></p>\n\n<pre><code>database.leadsDao().getLeads(leadState.name)\n    .flatMap {\n        Flowable.fromIterable(it)\n            .flatMap {\n                Flowable.zip(\n                        database.orderDao().getById(it.orderId),\n                        database.orderMedicineDao().getByOrderId(it.orderId),\n                        database.patientDao().getById(it.patientId),\n                        Function3&lt;Order, List&lt;OrderMedicine&gt;, Patient, LeadDetail&gt;\n                        { order, orderMedicines, patient -&gt; LeadDetail.from(it, patient, order, orderMedicines) })\n            }\n            .toList()\n            .toFlowable()\n    }\n</code></pre>\n"}, {"tags": ["google-app-engine", "spring-boot", "spring-security", "kotlin", "spring-oauth2"], "comments": [{"owner": {"reputation": 682, "user_id": 3916526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec6fad8baf725bd8699434af86841c4c?s=128&d=identicon&r=PG", "display_name": "Yannick MG", "link": "https://stackoverflow.com/users/3916526/yannick-mg"}, "edited": false, "score": 0, "creation_date": 1506368728, "post_id": 45908462, "comment_id": 79783863, "body": "According to <a href=\"https://stackoverflow.com/questions/46276365/spring-boot-app-works-locally-but-not-when-deployed-to-appengine\">this similar question</a> they were able to fix this error by removing  @EnableOAuth2Sso."}, {"owner": {"reputation": 6972, "user_id": 738710, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ca1feddf2040d79ad8ec24d3f0a623c1?s=128&d=identicon&r=PG", "display_name": "Les Vogel - Google DevRel", "link": "https://stackoverflow.com/users/738710/les-vogel-google-devrel"}, "edited": false, "score": 0, "creation_date": 1510278537, "post_id": 45908462, "comment_id": 81378468, "body": "Is this on Standard or Flexible?"}, {"owner": {"reputation": 6972, "user_id": 738710, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ca1feddf2040d79ad8ec24d3f0a623c1?s=128&d=identicon&r=PG", "display_name": "Les Vogel - Google DevRel", "link": "https://stackoverflow.com/users/738710/les-vogel-google-devrel"}, "edited": false, "score": 0, "creation_date": 1510358813, "post_id": 45908462, "comment_id": 81416626, "body": "I haven&#39;t yet replicated your issue, but I just noticed that the privacy policy no longer appears to be optional in the Credentials Oauth Consent screen."}, {"owner": {"reputation": 3145, "user_id": 3425744, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1192a0ea645623baafabe93da6ca038?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Betous", "link": "https://stackoverflow.com/users/3425744/thomas-betous"}, "reply_to_user": {"reputation": 6972, "user_id": 738710, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ca1feddf2040d79ad8ec24d3f0a623c1?s=128&d=identicon&r=PG", "display_name": "Les Vogel - Google DevRel", "link": "https://stackoverflow.com/users/738710/les-vogel-google-devrel"}, "edited": false, "score": 0, "creation_date": 1510562211, "post_id": 45908462, "comment_id": 81470746, "body": "Hi @LesVogel-GoogleDevRel ! It is standard."}], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 1233286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/918385b77df621f5fbda88d3a551a793?s=128&d=identicon&r=PG", "display_name": "Grant Timmerman", "link": "https://stackoverflow.com/users/1233286/grant-timmerman"}, "is_accepted": false, "score": 0, "last_activity_date": 1560553180, "creation_date": 1560553180, "answer_id": 56605978, "question_id": 45908462, "link": "https://stackoverflow.com/questions/45908462/badcredentialsexception-could-not-obtain-access-token-with-spring-boot-security/56605978#56605978", "title": "BadCredentialsException: Could not obtain access token with spring boot security Oauth2 on GAE", "body": "<p>It's hard to find the right answer as the full stack trace is not printed out.</p>\n\n<p>Looking at the stack trace, a few key errors state:</p>\n\n<pre><code>[INFO] org.springframework.security.authentication.BadCredentialsException: Could not obtain access token\n...\n[INFO] Caused by: org.springframework.security.oauth2.client.resource.OAuth2AccessDeniedException: Access token denied.\n\n</code></pre>\n\n<p>This indicates that the OAuth Client for your application is not properly authenticated or that the credentials you are using are not valid.</p>\n\n<p>Rather than setting your own Access Token and User Auth URIs, I recommend using the Google Java API Client which will handle this for you:</p>\n\n<p><a href=\"https://github.com/googleapis/google-api-java-client\" rel=\"nofollow noreferrer\">https://github.com/googleapis/google-api-java-client</a></p>\n\n<p>We have some G Suite samples that show OAuth flows here:\n<a href=\"https://github.com/gsuitedevs/java-samples\" rel=\"nofollow noreferrer\">https://github.com/gsuitedevs/java-samples</a></p>\n\n<p>Perhaps this answer may be useful too:\n<a href=\"https://stackoverflow.com/questions/7130648/get-user-info-via-google-api\">Get user info via Google API</a></p>\n"}], "owner": {"reputation": 3145, "user_id": 3425744, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1192a0ea645623baafabe93da6ca038?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Betous", "link": "https://stackoverflow.com/users/3425744/thomas-betous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1387, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560553180, "creation_date": 1503861302, "question_id": 45908462, "link": "https://stackoverflow.com/questions/45908462/badcredentialsexception-could-not-obtain-access-token-with-spring-boot-security", "title": "BadCredentialsException: Could not obtain access token with spring boot security Oauth2 on GAE", "body": "<p>I am currently developping a small web application with spring boot. I would like to use google oauth2 to login my user. All worked like a charm in localhost on my computer but when I deploy my app in GAE I get an error. </p>\n\n<p>Here is the error stack I got from dev server on GAE. I guess the error is the same in production mode.</p>\n\n<pre><code>[INFO] 2017-08-27 17:02:31.290 DEBUG 630 --- [tp1134612201-18] g.c.AuthorizationCodeAccessTokenProvider : Retrieving token from https://www.googleapis.com/oauth2/v4/token\n[INFO] 2017-08-27 17:02:31.565 DEBUG 630 --- [tp1134612201-18] o.s.web.client.RestTemplate              : Created POST request for \"https://www.googleapis.com/oauth2/v4/token\"\n[INFO] 2017-08-27 17:02:31.566 DEBUG 630 --- [tp1134612201-18] g.c.AuthorizationCodeAccessTokenProvider : Encoding and sending form: {grant_type=[authorization_code], code=[4/PmvPPmFGQF0PamafaItFDiqKT_RwZN4RkdoydpxOTD4], redirect_uri=[https://127.0.0.1:8080/login], client_id=[XXX], client_secret=[YYY]}\n[INFO] 2017-08-27 17:02:32.905 DEBUG 630 --- [tp1134612201-18] o.s.web.client.RestTemplate              : POST request for \"https://www.googleapis.com/oauth2/v4/token\" resulted in 400 (OK); invoking error handler\n[INFO] 2017-08-27 17:02:33.343 DEBUG 630 --- [tp1134612201-18] o.s.b.f.s.DefaultListableBeanFactory     : Returning cached instance of singleton bean 'delegatingApplicationListener'\n[INFO] 2017-08-27 17:02:33.381 DEBUG 630 --- [tp1134612201-18] uth2ClientAuthenticationProcessingFilter : Authentication request failed: org.springframework.security.authentication.BadCredentialsException: Could not obtain access token\n[INFO]\n[INFO] org.springframework.security.authentication.BadCredentialsException: Could not obtain access token\n[INFO]  at org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter.attemptAuthentication(OAuth2ClientAuthenticationProcessingFilter.java:107)\n[INFO]  at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)\n[INFO]  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n[INFO]  at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\n[INFO]  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n[INFO]  at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:100)\n[INFO]  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n[INFO]  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n[INFO]  at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64)\n[INFO]  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n[INFO]  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n[INFO]  at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\n[INFO]  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n[INFO]  at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\n[INFO]  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n[INFO]  at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\n[INFO]  at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\n[INFO]  at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\n[INFO]  at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\n[INFO]  at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262)\n[INFO]  at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1759)\n[INFO]  at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\n[INFO]  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n[INFO]  at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1759)\n[INFO]  at org.springframework.security.oauth2.client.filter.OAuth2ClientContextFilter.doFilter(OAuth2ClientContextFilter.java:60)\n[INFO]  at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1759)\n[INFO]  at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:105)\n[INFO]  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n[INFO]  at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1759)\n[INFO]  at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)\n[INFO]  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n[INFO]  at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1759)\n[INFO]  at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\n[INFO]  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n[INFO]  at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1759)\n[INFO]  at org.springframework.boot.web.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:115)\n[INFO]  at org.springframework.boot.web.support.ErrorPageFilter.access$000(ErrorPageFilter.java:59)\n[INFO]  at org.springframework.boot.web.support.ErrorPageFilter$1.doFilterInternal(ErrorPageFilter.java:90)\n[INFO]  at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n[INFO]  at org.springframework.boot.web.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:108)\n[INFO]  at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1759)\n[INFO]  at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:582)\n[INFO]  at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)\n[INFO]  at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:524)\n[INFO]  at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)\n[INFO]  at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)\n[INFO]  at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)\n[INFO]  at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)\n[INFO]  at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)\n[INFO]  at com.google.appengine.tools.development.jetty9.DevAppEngineWebAppContext.doScope(DevAppEngineWebAppContext.java:94)\n[INFO]  at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n[INFO]  at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\n[INFO]  at com.google.appengine.tools.development.jetty9.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:597)\n[INFO]  at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\n[INFO]  at org.eclipse.jetty.server.Server.handle(Server.java:534)\n[INFO]  at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\n[INFO]  at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\n[INFO]  at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:283)\n[INFO]  at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:108)\n[INFO]  at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n[INFO]  at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n[INFO]  at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n[INFO]  at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n[INFO]  at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n[INFO]  at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n[INFO]  at java.lang.Thread.run(Thread.java:748)\n[INFO] Caused by: org.springframework.security.oauth2.client.resource.OAuth2AccessDeniedException: Access token denied.\n[INFO]  at org.springframework.security.oauth2.client.token.OAuth2AccessTokenSupport.retrieveToken(OAuth2AccessTokenSupport.java:142)\n[INFO]  at org.springframework.security.oauth2.client.token.grant.code.AuthorizationCodeAccessTokenProvider.obtainAccessToken(AuthorizationCodeAccessTokenProvider.java:209)\n[INFO]  at org.springframework.security.oauth2.client.OAuth2RestTemplate.acquireAccessToken(OAuth2RestTemplate.java:221)\n[INFO]  at org.springframework.security.oauth2.client.OAuth2RestTemplate.getAccessToken(OAuth2RestTemplate.java:173)\n[INFO]  at org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter.attemptAuthentication(OAuth2ClientAuthenticationProcessingFilter.java:105)\n[INFO]  ... 65 common frames omitted\n[INFO] Caused by: org.springframework.security.oauth2.common.exceptions.RedirectMismatchException: Bad Request\n[INFO]  at org.springframework.security.oauth2.common.exceptions.OAuth2ExceptionJackson2Deserializer.deserialize(OAuth2ExceptionJackson2Deserializer.java:103)\n[INFO]  at org.springframework.security.oauth2.common.exceptions.OAuth2ExceptionJackson2Deserializer.deserialize(OAuth2ExceptionJackson2Deserializer.java:33)\n[INFO]  at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3798)\n[INFO]  at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2922)\n[INFO]  at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237)\n[INFO]  at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readInternal(AbstractJackson2HttpMessageConverter.java:217)\n[INFO]  at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:193)\n[INFO]  at org.springframework.security.oauth2.client.token.OAuth2AccessTokenSupport$AccessTokenErrorHandler.handleError(OAuth2AccessTokenSupport.java:235)\n[INFO]  at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:700)\n[INFO]  at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:653)\n[INFO]  at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:621)\n[INFO]  at org.springframework.security.oauth2.client.token.OAuth2AccessTokenSupport.retrieveToken(OAuth2AccessTokenSupport.java:137)\n[INFO]  ... 69 common frames omitted\n</code></pre>\n\n<p>Here is my configuration :</p>\n\n<p>application.yml :</p>\n\n<pre><code>security:\n  oauth2:\n    client:\n      clientId: XXXXX\n      clientSecret: XXXXX\n      accessTokenUri: https://www.googleapis.com/oauth2/v4/token\n      userAuthorizationUri: https://accounts.google.com/o/oauth2/v2/auth\n      clientAuthenticationScheme: form\n      scope:\n        - openid\n        - email\n        - profile\n    resource:\n      userInfoUri: https://www.googleapis.com/oauth2/v3/userinfo\n      preferTokenInfo: true\n</code></pre>\n\n<p>Spring Security configuration :</p>\n\n<pre><code>@Configuration\n@EnableOAuth2Sso\n@EnableWebSecurity\nclass WebSecurityConfig : WebSecurityConfigurerAdapter() {\n    @Throws(Exception::class)\n    override fun configure(http: HttpSecurity) {\n        http\n                .authorizeRequests()\n                    .antMatchers(\"/\", \"/home\", \"/webjars/**\", \"/count\", \"/login\")\n                    .permitAll()\n                .anyRequest()\n                    .authenticated()\n                .and()\n                    .formLogin()\n                    .loginPage(\"/login\")\n                    .permitAll()\n                .and()\n                    .logout()\n                    .logoutUrl(\"/logout\")\n                    .logoutSuccessUrl(\"/\")\n                    .permitAll()\n    }\n}\n</code></pre>\n\n<p>MVC controller :</p>\n\n<pre><code>@Configuration\nclass MvcConfiguration : WebMvcConfigurerAdapter() {\n\n    override fun addViewControllers(registry: ViewControllerRegistry?) {\n        super.addViewControllers(registry)\n        registry?.addViewController(\"/home\")?.setViewName(\"home\");\n        registry?.addViewController(\"/\")?.setViewName(\"home\");\n        registry?.addViewController(\"/hello\")?.setViewName(\"hello\");\n    }\n\n}\n</code></pre>\n\n<p>The redirection page I set in my google api console is : <code>https://my-awesome-app.appspot.com/login</code>. All worked when I was testing on <a href=\"http://localhost:8080\" rel=\"nofollow noreferrer\">http://localhost:8080</a>. There is maybe something with ssl ?</p>\n\n<p>By the way, I am using kotlin. But it is very similar to Java</p>\n\n<p>Can anyone help me ?</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 9497, "user_id": 2735286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87ddd81aa1b12c27aecdab22da387f5c?s=128&d=identicon&r=PG&f=1", "display_name": "gil.fernandes", "link": "https://stackoverflow.com/users/2735286/gil-fernandes"}, "edited": false, "score": 0, "creation_date": 1503861982, "post_id": 45908388, "comment_id": 78775740, "body": "Yep, the &quot;better solution&quot; is the way to go."}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 9497, "user_id": 2735286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87ddd81aa1b12c27aecdab22da387f5c?s=128&d=identicon&r=PG&f=1", "display_name": "gil.fernandes", "link": "https://stackoverflow.com/users/2735286/gil-fernandes"}, "edited": false, "score": 0, "creation_date": 1503862745, "post_id": 45908388, "comment_id": 78775916, "body": "Yes it is. But I wanted to give you a solution for your casting problem too."}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 1, "last_activity_date": 1503862274, "last_edit_date": 1503862274, "creation_date": 1503860773, "answer_id": 45908388, "question_id": 45908324, "link": "https://stackoverflow.com/questions/45908324/kotlin-gettng-rid-of-unchecked-casts-for-comparable/45908388#45908388", "title": "Kotlin: gettng rid of Unchecked casts for Comparable", "body": "<h2>Solution to your Problem, but too complex</h2>\n\n<p>This solves your problem:</p>\n\n<pre><code>inline fun &lt;reified T&gt; less(c1: Comparable&lt;T&gt;, c2: Comparable&lt;T&gt;) =\n   if (c2 is T) {\n       c1 &lt; c2\n   } else {\n       throw IllegalStateException() // whatever\n   }\n</code></pre>\n\n<p>The cast is not necessary if you first check its type <code>T</code>. This is possible if <code>T</code> is made <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">reified</a>, i.e. you can access it at runtime (by default generic types are not available at runtime). This again is only possible if your <code>method</code> is <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html\" rel=\"nofollow noreferrer\"><code>inline</code></a>.\nNote that accessing <code>c2</code> after the type check is possible <em>without explicit casting</em> because the compiler already knows you're doing safe stuff, this is called <a href=\"https://kotlinlang.org/docs/reference/typecasts.html\" rel=\"nofollow noreferrer\">\"<strong>Smart Cast</strong>\"</a>.</p>\n\n<p>This implementation is not 100% correct in terms of error handling as you can see - but that's up to you ;-)</p>\n\n<p>BUT: Do not do it like this.</p>\n\n<h2>Better Solution</h2>\n\n<p>I'd suggest you get rid of handling <code>Comparable</code> in your implementation, so that the <code>sort</code> method rather looks like this:</p>\n\n<pre><code> fun &lt;T: Comparable&lt;T&gt;&gt; sort(a: Array&lt;T&gt;)\n</code></pre>\n\n<p>This ensures only <code>T</code>'s can be sorted that implement <code>Comparable</code>, which is expressed with <code>:</code> (upper bound) in the generic type. Then your <code>less</code> method looks like: </p>\n\n<pre><code>private fun &lt;T : Comparable&lt;T&gt;&gt; less(comparable: T, comparable1: T): Boolean {\n    return comparable &lt; comparable1\n}\n</code></pre>\n\n<p>No cast necessary :-)</p>\n\n<p>(Same applies to <code>exchange</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 2, "last_activity_date": 1503861498, "creation_date": 1503861498, "answer_id": 45908484, "question_id": 45908324, "link": "https://stackoverflow.com/questions/45908324/kotlin-gettng-rid-of-unchecked-casts-for-comparable/45908484#45908484", "title": "Kotlin: gettng rid of Unchecked casts for Comparable", "body": "<p>You should use a bound <code>&lt;T : Comparable&lt;T&gt;&gt;</code> on <code>sort</code> and <code>less</code>.</p>\n\n<pre><code>fun &lt;T : Comparable&lt;T&gt;&gt; sort(arr: Array&lt;T&gt;) = ...\nfun &lt;T : Comparable&lt;T&gt;&gt; less(l: T, r: T) = ...\n</code></pre>\n\n<p>There's no reason to resort to reified types when it works just fine without.</p>\n\n<p>Also, the parameter to <code>sort</code> <em>should not be</em> <code>Array&lt;Comparable&lt;T&gt;&gt;</code>. Arrays in Kotlin are <em>invariant</em>: if <code>A extends B</code>, <code>Array&lt;A&gt;</code> is not a subtype of <code>Array&lt;B&gt;</code>. This is unlike Java, where arrays are covariant and <code>String[]</code> is a subtype of <code>Object[]</code>. Invariance is the correct way. If you defined sort as it is now, you would not be able to write</p>\n\n<pre><code>val arr: Array&lt;String&gt; = ...\nsort(arr);\n</code></pre>\n\n<p>because <code>sort</code> wants an <code>Array&lt;Comparable&lt;String&gt;&gt;</code> but <code>arr</code> is an <code>Array&lt;String&gt;</code>.</p>\n\n<p>Also, there's no reason to place the extra bound on <code>exchange</code></p>\n\n<pre><code>fun &lt;T&gt; exchange(arr: Array&lt;T&gt;, i: Int, j: Int) = ...\n</code></pre>\n"}], "owner": {"reputation": 9497, "user_id": 2735286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87ddd81aa1b12c27aecdab22da387f5c?s=128&d=identicon&r=PG&f=1", "display_name": "gil.fernandes", "link": "https://stackoverflow.com/users/2735286/gil-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "accepted_answer_id": 45908484, "answer_count": 2, "score": 1, "last_activity_date": 1503862894, "creation_date": 1503860226, "last_edit_date": 1503862894, "question_id": 45908324, "link": "https://stackoverflow.com/questions/45908324/kotlin-gettng-rid-of-unchecked-casts-for-comparable", "title": "Kotlin: gettng rid of Unchecked casts for Comparable", "body": "<p>I have just implemented selection sort to get acquainted with Kotlin and bumped into an unchecked cast which I am finding difficult to get rid of. The implementation is based on the <code>kotlin.Comparable</code> interface:</p>\n\n<pre><code>object SelectionSort {\n\n    fun &lt;T&gt; sort(a: Array&lt;Comparable&lt;T&gt;&gt;) {\n        val N = a.size\n        for(i in 0..N - 2) {\n            var min = i\n            for(j in i + 1..N - 1) {\n                if(less(a[j], a[min])) {\n                    min = j\n                }\n            }\n            exchange(a, i, min)\n        }\n    }\n\n    private fun &lt;T&gt; exchange(a: Array&lt;Comparable&lt;T&gt;&gt;, i: Int, min: Int) {\n        val temp = a[i]\n        a[i] = a[min]\n        a[min] = temp\n    }\n\n    private fun &lt;T&gt; less(comparable: Comparable&lt;T&gt;, comparable1: Comparable&lt;T&gt;): Boolean {\n        return comparable &lt; (comparable1 as T) // Here is the unchecked cast\n    }\n}\n</code></pre>\n\n<p>The exact message is \"<em>Unchecked cast: <code>Comparable&lt;T&gt;</code> to <code>T</code></em>\".</p>\n\n<p>My preference is to use the <code>kotlin.Comparable</code> interface as the main argument of the <code>sort</code> method as well of the helper methods. But how is it possible to compare a generic comparable to another one in a clean way? \nIf this is not possible, what would be a clean alternative to implement something like selection sort using interfaces?</p>\n\n<p>Based on this <a href=\"https://stackoverflow.com/a/45908484/2735286\">answer</a>, I have re-written my selection sort implementation:</p>\n\n<pre><code>object SelectionSort {\n\n    fun &lt;T : Comparable&lt;T&gt;&gt; sort(a: Array&lt;T&gt;) {\n        val N = a.size\n        for (i in 0..N - 2) {\n            var min = i\n            for (j in i + 1..N - 1) {\n                if (less(a[j], a[min])) {\n                    min = j\n                }\n            }\n            exchange(a, i, min)\n        }\n    }\n\n    fun &lt;T&gt; exchange(a: Array&lt;T&gt;, i: Int, min: Int) {\n        val temp = a[i]\n        a[i] = a[min]\n        a[min] = temp\n    }\n\n    fun &lt;T : Comparable&lt;T&gt;&gt; less(c1: T, c2: T) =\n            c1 &lt; c2\n}\n</code></pre>\n\n<p>This implementation has now no warnings.</p>\n"}, {"tags": ["java", "maven", "gradle", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 565, "user_id": 3257988, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f664fe43b529736d7eb7906f52fb4179?s=128&d=identicon&r=PG&f=1", "display_name": "Looki", "link": "https://stackoverflow.com/users/3257988/looki"}, "edited": false, "score": 0, "creation_date": 1503922403, "post_id": 45912327, "comment_id": 78795888, "body": "Thank you, that makes sense"}], "tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": true, "score": 1, "last_activity_date": 1503898732, "creation_date": 1503898732, "answer_id": 45912327, "question_id": 45908076, "link": "https://stackoverflow.com/questions/45908076/gradle-wont-import-a-bintray-dependency-but-doesnt-throw-any-error/45912327#45912327", "title": "Gradle won&#39;t import a bintray dependency, but doesn&#39;t throw any error", "body": "<p>The dependency you've added is just the parent-pom which doesn't have any jar's in the repo. Here is the list of the <code>squash</code> projects (<a href=\"http://dl.bintray.com/kotlin/squash/org/jetbrains/squash/\" rel=\"nofollow noreferrer\">http://dl.bintray.com/kotlin/squash/org/jetbrains/squash/</a>):</p>\n\n<ul>\n<li><code>squash-core</code></li>\n<li><code>squash-graph</code></li>\n<li><code>squash-h2</code></li>\n<li><code>squash-jdbc</code></li>\n<li><code>squash-postgres</code></li>\n<li><code>squash-sqlite</code></li>\n</ul>\n\n<p>I guess you want to import the <code>squash-core</code> so change</p>\n\n<pre><code>compile 'org.jetbrains.squash:squash:0.2.2'\n</code></pre>\n\n<p>to </p>\n\n<pre><code>compile 'org.jetbrains.squash:squash-core:0.2.2'\n</code></pre>\n"}], "owner": {"reputation": 565, "user_id": 3257988, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f664fe43b529736d7eb7906f52fb4179?s=128&d=identicon&r=PG&f=1", "display_name": "Looki", "link": "https://stackoverflow.com/users/3257988/looki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 45912327, "answer_count": 1, "score": 0, "last_activity_date": 1503898732, "creation_date": 1503858585, "question_id": 45908076, "link": "https://stackoverflow.com/questions/45908076/gradle-wont-import-a-bintray-dependency-but-doesnt-throw-any-error", "title": "Gradle won&#39;t import a bintray dependency, but doesn&#39;t throw any error", "body": "<p>I'm creating a project which uses the <a href=\"https://github.com/orangy/squash\" rel=\"nofollow noreferrer\">Squash</a> SQL Library for Kotlin. I've added the dependency to my <code>build.gradle</code> file. When running the update it just finishes without outputting any errors. But the library is not getting imported in my project and doesn't appear at all.</p>\n\n<p>The dependencies shown in IntelliJ:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4fhGL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4fhGL.png\" alt=\"enter image description here\"></a></p>\n\n<p>My <code>build.gradle</code> file:</p>\n\n<pre><code>//Kotlin Stuff, nothing changed here\n\nrepositories {\n    mavenCentral()\n    maven {\n        url  \"http://dl.bintray.com/kotlin/squash\"\n    }\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlin_version\"\n    testCompile group: 'junit', name: 'junit', version: '4.12'\n    compile 'org.jetbrains.squash:squash:0.2.2'\n}\n\n//Kotlin Stuff\n</code></pre>\n"}, {"tags": ["kotlin", "web-frameworks", "ktor"], "answers": [{"tags": [], "owner": {"reputation": 10942, "user_id": 18575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/318654a786700455b96049d8ac9beb11?s=128&d=identicon&r=PG", "display_name": "Ilya Ryzhenkov", "link": "https://stackoverflow.com/users/18575/ilya-ryzhenkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1503913485, "creation_date": 1503913485, "answer_id": 45916074, "question_id": 45907278, "link": "https://stackoverflow.com/questions/45907278/kotlin-ktor-cant-get-post-data-with-location-data-class/45916074#45916074", "title": "Kotlin Ktor can&#39;t get post data with location data class", "body": "<p>That was an unfortunate consequence of treating all parameters (query and post) in the same way. This was fixed and post parameters should now be received explicitly. It makes sense, because location is a round trip entity, like you can handle it and you can generate an URL from it, which should hit the same handler. With POST parameters it is impossible.</p>\n\n<p>For now you need to <code>call.receive&lt;ValuesMap&gt;()</code> and get post parameters manually from the map. Typed bindings are in the works. </p>\n\n<p>You can track progress here: <a href=\"https://github.com/Kotlin/ktor/issues/190\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/ktor/issues/190</a></p>\n"}], "owner": {"reputation": 323, "user_id": 1994161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d6c1140e9e268e51b04020a8bae4ce?s=128&d=identicon&r=PG&f=1", "display_name": "\u5e55\u961c\u5c71\u9053\u53cb", "link": "https://stackoverflow.com/users/1994161/%e5%b9%95%e9%98%9c%e5%b1%b1%e9%81%93%e5%8f%8b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2777, "favorite_count": 0, "accepted_answer_id": 45916074, "answer_count": 1, "score": 0, "last_activity_date": 1503913485, "creation_date": 1503853075, "last_edit_date": 1503912912, "question_id": 45907278, "link": "https://stackoverflow.com/questions/45907278/kotlin-ktor-cant-get-post-data-with-location-data-class", "title": "Kotlin Ktor can&#39;t get post data with location data class", "body": "<p>This is my code:</p>\n\n<pre><code>package com.example.ktordemo\n\nimport org.jetbrains.ktor.application.Application\nimport org.jetbrains.ktor.application.install\nimport org.jetbrains.ktor.application.log\nimport org.jetbrains.ktor.auth.UserHashedTableAuth\nimport org.jetbrains.ktor.features.CallLogging\nimport org.jetbrains.ktor.features.ConditionalHeaders\nimport org.jetbrains.ktor.features.DefaultHeaders\nimport org.jetbrains.ktor.features.PartialContentSupport\nimport org.jetbrains.ktor.locations.*\nimport org.jetbrains.ktor.response.*\nimport org.jetbrains.ktor.routing.*\nimport org.jetbrains.ktor.util.decodeBase64\nimport org.slf4j.Logger\n\n@location(\"/login\")\ndata class Login(val userId: String = \"\", val password: String = \"\", val error: String = \"\")\n\n@location(\"/userTable\") class SimpleUserTable\n\nval hashedUserTable = UserHashedTableAuth(table = mapOf(\n        \"test\" to decodeBase64(\"VltM4nfheqcJSyH887H+4NEOm2tDuKCl83p5axYXlF0=\")\n))\n\n\nfun Application.basicAuth() {\n    install(DefaultHeaders)\n    install(CallLogging)\n    install(ConditionalHeaders)\n    install(PartialContentSupport)\n    install(Locations)\n    install(Routing) {\n        manual(log)\n    }\n}\n\nfun Route.manual(log: Logger) {\n    post&lt;Login&gt; {\n        log.info(it.toString())\n        call.respond(it.userId) // get nothing\n    }\n    get { login: Login -&gt;\n        call.respond(\"login page\")\n    }\n}\n</code></pre>\n\n<p>i use insomnia test the request, this is result:</p>\n\n<pre><code>&gt; POST /login HTTP/1.1\n&gt; Host: localhost:8080\n&gt; User-Agent: insomnia/5.6.3\n&gt; Accept: */*\n&gt; Accept-Encoding: deflate, gzip\n&gt; Content-Type: application/x-www-form-urlencoded\n&gt; Content-Length: 33\n| userId=username&amp;password=password\n\n\n&lt; HTTP/1.1 200 OK\n&lt; Date: Sun, 27 Aug 2017 16:52:20 GMT\n&lt; Server: ktor-core/0.4.0 ktor-core/0.4.0\n&lt; Content-Type: text/plain; charset=UTF-8\n&lt; Content-Length: 0\n</code></pre>\n\n<p>Anyone can help me?</p>\n"}, {"tags": ["java", "android", "realm", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1499, "user_id": 3937903, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/H73KC.jpg?s=128&g=1", "display_name": "oziomajnr", "link": "https://stackoverflow.com/users/3937903/oziomajnr"}, "is_accepted": false, "score": 0, "last_activity_date": 1503848121, "creation_date": 1503848121, "answer_id": 45906618, "question_id": 45906537, "link": "https://stackoverflow.com/questions/45906537/writing-realm-daos-with-closed-transactions/45906618#45906618", "title": "Writing Realm Daos with closed transactions", "body": "<p>What I do is that I get the instance of my realm object in my activity  and pass it to the dao class to make the query. Them close the instance after my activity stops and it works great, my dao methods are not static though so I need and instance of the dao and pass the realm object as a constructor parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": false, "score": 0, "last_activity_date": 1503870893, "last_edit_date": 1503870893, "creation_date": 1503848990, "answer_id": 45906739, "question_id": 45906537, "link": "https://stackoverflow.com/questions/45906537/writing-realm-daos-with-closed-transactions/45906739#45906739", "title": "Writing Realm Daos with closed transactions", "body": "<p>Yep, you need to close the Realm instances, but you might want to <a href=\"https://realm.io/docs/java/latest/#controlling-the-lifecycle-of-realm-instances\" rel=\"nofollow noreferrer\">read the documentation on best practices regarding opening and closing them</a>  - specifically that you should use <code>onCreate/onDestroy</code> for Activity/main thread and you should use a <code>try(Realm realm = Realm.getDefaultInstance()) {</code> block for background thread, and any method that needs to use Realm should have it passed as method argument.</p>\n\n<pre><code>public static RealmAuthToken getAuthToken(Realm realm) {\n    return realm.where(RealmAuthToken.class).findFirst();\n}\n</code></pre>\n"}], "owner": {"reputation": 1183, "user_id": 6521806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10abc63921011dbabcb351ef3dc4814?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelThePotato", "link": "https://stackoverflow.com/users/6521806/michaelthepotato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503870893, "creation_date": 1503847587, "question_id": 45906537, "link": "https://stackoverflow.com/questions/45906537/writing-realm-daos-with-closed-transactions", "title": "Writing Realm Daos with closed transactions", "body": "<p>We've started integrating Realm into our android project, and have encountered a small problem.\nWe've re-written our Daos with Realm, like this for example:</p>\n\n<pre><code>public class RealmAuthDao {\n\n    public static RealmAuthToken getAuthToken() {\n        Realm realm = RealmFactory.getAuthInstance();\n        RealmAuthToken token = realm.where(RealmAuthToken.class).findFirst();\n\n        return token;\n}\n</code></pre>\n\n<p>but every few minutes got the the following exception -</p>\n\n<p>\"Unrecoverable error. Too many open files in io_realm_internal_SharedGroup.cpp\"</p>\n\n<p>We've realized that we need to close every realm instance we've opened throughout the application, so we tried this:</p>\n\n<pre><code>public class RealmAuthDao {\n\n    public static RealmAuthToken getAuthToken() {\n        Realm realm = RealmFactory.getAuthInstance();\n        RealmAuthToken token = realm.where(RealmAuthToken.class).findFirst();\n        realm.close // close the instance we were using\n\n        return token;\n}\n</code></pre>\n\n<p>However, when we did that, whenever we tried to access the members or properties of the objects we queried, it became invalid and the following exception was thrown:</p>\n\n<p>\u201cThis Realm instance has already been closed, making it unusable.\u201d</p>\n\n<p>Is there a proper way to implement a Dao with realm? Or should we just query from a realm instance directly each time?</p>\n"}, {"tags": ["spring", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 1, "creation_date": 1503845082, "post_id": 45905785, "comment_id": 78770682, "body": "Where are you accessing <code>environment</code>?"}, {"owner": {"reputation": 3145, "user_id": 3425744, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1192a0ea645623baafabe93da6ca038?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Betous", "link": "https://stackoverflow.com/users/3425744/thomas-betous"}, "reply_to_user": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1503847177, "post_id": 45905785, "comment_id": 78771316, "body": "In the methode do stuff. I put [...] because it can be anything. I have replaced [...] with [HERE FUNCTION CODE USING environment VARIABLE]. I could be <code>environment.getProperty(&quot;my.property&quot;)</code>"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1503852870, "post_id": 45905785, "comment_id": 78772951, "body": "Ok that seems all right... @Autowired probably does not make a difference?"}, {"owner": {"reputation": 3145, "user_id": 3425744, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1192a0ea645623baafabe93da6ca038?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Betous", "link": "https://stackoverflow.com/users/3425744/thomas-betous"}, "reply_to_user": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1503860506, "post_id": 45905785, "comment_id": 78775352, "body": "No, it does not make a difference :/"}], "answers": [{"tags": [], "owner": {"reputation": 632, "user_id": 1499171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mARXO.jpg?s=128&g=1", "display_name": "jivimberg", "link": "https://stackoverflow.com/users/1499171/jivimberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1525137232, "creation_date": 1525137232, "answer_id": 50110216, "question_id": 45905785, "link": "https://stackoverflow.com/questions/45905785/spring-kotlin-what-is-the-difference-between-constructor-and-lateinit-inject/50110216#50110216", "title": "Spring &amp; kotlin : What is the difference between constructor and lateinit injection?", "body": "<p>I tested this with the following versions:</p>\n\n<pre><code>kotlinVersion = '1.2.20'\nspringBootVersion = '2.0.1.RELEASE'\n</code></pre>\n\n<p>And <code>lateinit var</code> injection seems to be working fine in my case.</p>\n\n<p>Here's an example project for your reference: <a href=\"https://github.com/jivimberg/lateinit\" rel=\"nofollow noreferrer\">https://github.com/jivimberg/lateinit</a></p>\n"}, {"tags": [], "owner": {"reputation": 147, "user_id": 7796141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbef172498e4178b1d9bb35fee987ee6?s=128&d=identicon&r=PG&f=1", "display_name": "geliba187", "link": "https://stackoverflow.com/users/7796141/geliba187"}, "is_accepted": false, "score": 0, "last_activity_date": 1541638379, "creation_date": 1541638379, "answer_id": 53200088, "question_id": 45905785, "link": "https://stackoverflow.com/questions/45905785/spring-kotlin-what-is-the-difference-between-constructor-and-lateinit-inject/53200088#53200088", "title": "Spring &amp; kotlin : What is the difference between constructor and lateinit injection?", "body": "<p>I suspect that you are referencing the <code>environment</code> variable before it's even been initialized, that's why the exception.</p>\n\n<p>It worked after the change. It was because the <code>environment</code> variable was initialized in the primary constructor. You may wonder how it worked without annotation. According to this <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/languages.html#kotlin\" rel=\"nofollow noreferrer\">doc</a></p>\n\n<blockquote>\n  <p>As of Spring Framework 4.3, classes with a single constructor have their parameters automatically autowired, that\u2019s why there is no need for an explicit @Autowired constructor in the example shown above.</p>\n</blockquote>\n"}], "owner": {"reputation": 3145, "user_id": 3425744, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1192a0ea645623baafabe93da6ca038?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Betous", "link": "https://stackoverflow.com/users/3425744/thomas-betous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 631, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1541638379, "creation_date": 1503842430, "last_edit_date": 1503847232, "question_id": 45905785, "link": "https://stackoverflow.com/questions/45905785/spring-kotlin-what-is-the-difference-between-constructor-and-lateinit-inject", "title": "Spring &amp; kotlin : What is the difference between constructor and lateinit injection?", "body": "<p>I had a problem with my application using spring an kotlin. At the beginning I had one controller and one service like this :</p>\n\n<p>Here is the service :</p>\n\n<pre><code>@Service\nclass StuffService {\n\n    @Inject\n    lateinit var environment : Environment\n\n    fun doStuff() = [HERE FUNCTION CODE USING environment VARIABLE]\n\n}\n</code></pre>\n\n<p>Here is the controller :</p>\n\n<pre><code>@RestController\nclass StuffController {\n\n    @Inject\n    lateinit var stuffService : StuffService\n\n    @RequestMapping(\"/doStuff\")\n    fun doStuff() = stuffService.doStuff()\n\n}\n</code></pre>\n\n<p>Unfortunately this give me this error when I start springboot :</p>\n\n<pre><code>kotlin.UninitializedPropertyAccessException: lateinit property environment has not been initialized\n</code></pre>\n\n<p>So I tried to inject via constructor :</p>\n\n<pre><code>@Service\nclass StuffService(val environment : Environment) {...}\n\n@RestController\nclass StuffController(val stuffService: StuffService) {...}\n</code></pre>\n\n<p>With tha code it works ! I have no error.</p>\n\n<p>I wonder what is the difference. I do not understand what happened. Can anyone help me to understand ?</p>\n"}, {"tags": ["android", "algorithm", "sorting", "kotlin", "comparable"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1503843530, "post_id": 45903816, "comment_id": 78770183, "body": "Why doesn&#39;t <code>sortedWith</code> solve this case?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 2, "creation_date": 1503845667, "post_id": 45903816, "comment_id": 78770852, "body": "You should make your question clearer: What kind of data structure do you have, do you want to have this one sorted always, i.e. whenever a new element is added it&#39;s supposed to be sorted in at the appropriate position or do you want to have a function which sorts on demand? What data structure do you need then?"}, {"owner": {"reputation": 106, "user_id": 8491266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TcEVL.jpg?s=128&g=1", "display_name": "Marcel Skotnicki", "link": "https://stackoverflow.com/users/8491266/marcel-skotnicki"}, "edited": false, "score": 0, "creation_date": 1503910882, "post_id": 45903816, "comment_id": 78788970, "body": "yes, i wasn&#39;t specific about this. i wanted kotlin to showoff with case like this and converting array to map and then back to array is just not desired solution. i thought about some tricks like parallel sorting or even in place with some extra predicates, but you are right tho, we can sort it by converting list to map and then back again. i marked your answer correct."}], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 8491266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TcEVL.jpg?s=128&g=1", "display_name": "Marcel Skotnicki", "link": "https://stackoverflow.com/users/8491266/marcel-skotnicki"}, "edited": false, "score": 0, "creation_date": 1503843940, "post_id": 45903959, "comment_id": 78770312, "body": "thank you for your answer. I know about <code>groupBy{}</code>, but it results with a map instead of list as you wrote yourself. It changes structure of keeping <code>players</code> and in my case it is a deal breaker."}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 1, "creation_date": 1503855444, "post_id": 45903959, "comment_id": 78773823, "body": "maps are easily converted to lists using <code>toList()</code> ... this should be marked the correct answer, or the OP should clarify the desired result"}, {"owner": {"reputation": 106, "user_id": 8491266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TcEVL.jpg?s=128&g=1", "display_name": "Marcel Skotnicki", "link": "https://stackoverflow.com/users/8491266/marcel-skotnicki"}, "edited": false, "score": 0, "creation_date": 1503910534, "post_id": 45903959, "comment_id": 78788789, "body": "well it is not desired to sort an array through converting it to map and then back to array, but i wasn&#39;t specific about this, so i mark this answer correct"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 3, "last_activity_date": 1503842996, "last_edit_date": 1503842996, "creation_date": 1503829622, "answer_id": 45903959, "question_id": 45903816, "link": "https://stackoverflow.com/questions/45903816/kotlin-sort-array-by-value-in-range/45903959#45903959", "title": "Kotlin sort array by value in range", "body": "<p>You could first sort by <code>position</code> and <code>time</code> and then group by <code>time</code> with standard Kotlin functionality.</p>\n\n<h2>Example</h2>\n\n<pre><code>data class Player(val position: Int, val time: Float)\n\nval p1 = Player(1, 10f)\nval plys = arrayOf(p1, p1.copy(position = 3),\n        p1.copy(time = 0f), p1.copy(time = 20f),\n        p1.copy(position = 2), p1.copy(position = 2, time = 20f))\n\nval groupBy = plys.sortedWith(compareBy(Player::position, Player::time))\n                  .groupBy { it.position }\n</code></pre>\n\n<h2>Description</h2>\n\n<ol>\n<li>sort the <code>Array</code> by the <code>Player</code>'s <code>position</code> and <code>time</code> with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-with.html\" rel=\"nofollow noreferrer\"><code>sortedWith</code></a> + <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.comparisons/compare-by.html\" rel=\"nofollow noreferrer\"><code>compareBy</code></a> </li>\n<li>group it by the <code>Player</code>'s <code>position</code></li>\n</ol>\n\n<h2>Result</h2>\n\n<p>The result is a <code>Map&lt;Int,List&lt;Player&gt;</code>, which in the example looks like this:</p>\n\n<pre><code>    {\n     1=[Player(position=1, time=0.0), Player(position=1, time=10.0), Player(position=1, time=20.0)], \n     2=[Player(position=2, time=10.0), Player(position=2, time=20.0)],\n     3=[Player(position=3, time=10.0)]\n    }\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 8491266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TcEVL.jpg?s=128&g=1", "display_name": "Marcel Skotnicki", "link": "https://stackoverflow.com/users/8491266/marcel-skotnicki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1378, "favorite_count": 1, "accepted_answer_id": 45903959, "answer_count": 1, "score": 2, "last_activity_date": 1503842996, "creation_date": 1503828473, "last_edit_date": 1503828846, "question_id": 45903816, "link": "https://stackoverflow.com/questions/45903816/kotlin-sort-array-by-value-in-range", "title": "Kotlin sort array by value in range", "body": "<p>Let's have a <code>class Player(val position: Int, val time: Float)</code> and we want to sort an array or list of <code>players</code> by <code>position</code>. If some of these <code>players</code> have the same <code>position</code> after first sorting, we want to sort them by <code>time</code> in groups. By group I mean set of <code>players</code> with the same position.</p>\n\n<p>I know about</p>\n\n<p><code>list.sortedWith(compareBy&lt;Foo&gt; { it.a }.thenByDescending { it.b }.thenBy { it.c })</code></p>\n\n<p>But of course it does not solve this case. </p>\n\n<p>Is there any smart way in Kotlin to achieve this simple task? We can sort it manually by checking positions and swapping items, but I wonder if Kotlin has something to say in this case.</p>\n"}, {"tags": ["spring", "spring-boot", "kotlin", "spring-webflux", "project-reactor"], "answers": [{"comments": [{"owner": {"reputation": 1642, "user_id": 3415077, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/89dc320cc357248f2882bb715c05a1f3?s=128&d=identicon&r=PG&f=1", "display_name": "Juergen Zimmermann", "link": "https://stackoverflow.com/users/3415077/juergen-zimmermann"}, "edited": false, "score": 0, "creation_date": 1503922494, "post_id": 45914542, "comment_id": 78795944, "body": "the modified variant doesn&#39;t work either. <code>customerFlux.collectList()</code> is resulting in a Mono which contains an empty list when the originating Flux is empty. Therefore, the Mono is not empty (because it contains an empty list) and ok() is invoked."}, {"owner": {"reputation": 1642, "user_id": 3415077, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/89dc320cc357248f2882bb715c05a1f3?s=128&d=identicon&r=PG&f=1", "display_name": "Juergen Zimmermann", "link": "https://stackoverflow.com/users/3415077/juergen-zimmermann"}, "edited": false, "score": 1, "creation_date": 1503923059, "post_id": 45914542, "comment_id": 78796294, "body": "Solution found. Inside <code>flatMap()</code> an if-statement is required: <code>if (l.isEmpty()) notFound()... else ok()...</code> Then <code>switchIfEmpty(...)</code> is obsolete here."}, {"owner": {"reputation": 1571, "user_id": 4187837, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/797990d500303b57e9f9042f73ded007?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/4187837/gavin"}, "edited": false, "score": 0, "creation_date": 1611917383, "post_id": 45914542, "comment_id": 116609685, "body": "Is this still the best way to return a 404 on an empty <code>Flux</code>?"}], "tags": [], "owner": {"reputation": 46241, "user_id": 22982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d1d5b668ad4b1fccb1a80e6789d11b5?s=128&d=identicon&r=PG", "display_name": "Brian Clozel", "link": "https://stackoverflow.com/users/22982/brian-clozel"}, "is_accepted": true, "score": 26, "last_activity_date": 1503929719, "last_edit_date": 1503929719, "creation_date": 1503908223, "answer_id": 45914542, "question_id": 45903813, "link": "https://stackoverflow.com/questions/45903813/webflux-functional-how-to-detect-an-empty-flux-and-return-404/45914542#45914542", "title": "WebFlux functional: How to detect an empty Flux and return 404?", "body": "<p>From a <code>Mono</code>:</p>\n\n<pre><code>return customerMono\n           .flatMap(c -&gt; ok().body(BodyInserters.fromObject(c)))\n           .switchIfEmpty(notFound().build());\n</code></pre>\n\n<p>From a <code>Flux</code>:</p>\n\n<pre><code>return customerFlux\n           .collectList()\n           .flatMap(l -&gt; {\n               if(l.isEmpty()) {\n                 return notFound().build();\n\n               }\n               else {\n                 return ok().body(BodyInserters.fromObject(l)));\n               }\n           });\n</code></pre>\n\n<p>Note that <code>collectList</code> buffers data in memory, so this might not be the best choice for big lists. There might be a better way to solve this.</p>\n"}, {"tags": [], "owner": {"reputation": 1024, "user_id": 1809445, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2c6ddeb0f06c048c1c8790e29dc1867b?s=128&d=identicon&r=PG", "display_name": "zennon", "link": "https://stackoverflow.com/users/1809445/zennon"}, "is_accepted": false, "score": 6, "last_activity_date": 1515768069, "last_edit_date": 1515768069, "creation_date": 1515702053, "answer_id": 48215210, "question_id": 45903813, "link": "https://stackoverflow.com/questions/45903813/webflux-functional-how-to-detect-an-empty-flux-and-return-404/48215210#48215210", "title": "WebFlux functional: How to detect an empty Flux and return 404?", "body": "<p>In addition to the solution of Brian, if you are not want to do an empty check of the list all the time,  you could create a extension function: </p>\n\n<pre><code>fun &lt;R&gt; Flux&lt;R&gt;.collectListOrEmpty(): Mono&lt;List&lt;R&gt;&gt; = this.collectList().flatMap {\n        val result = if (it.isEmpty()) {\n            Mono.empty()\n        } else {\n            Mono.just(it)\n        }\n        result\n    }\n</code></pre>\n\n<p>And call it like you do it for the Mono: </p>\n\n<pre><code>return customerFlux().collectListOrEmpty()\n                     .switchIfEmpty(notFound().build())\n                     .flatMap(c -&gt; ok().body(BodyInserters.fromObject(c)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 205, "user_id": 7816353, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S3tHJJ35of8/AAAAAAAAAAI/AAAAAAAAAm0/us_9hLFEMvc/photo.jpg?sz=128", "display_name": "ayush prashar", "link": "https://stackoverflow.com/users/7816353/ayush-prashar"}, "is_accepted": false, "score": 5, "last_activity_date": 1556107247, "creation_date": 1556107247, "answer_id": 55829591, "question_id": 45903813, "link": "https://stackoverflow.com/questions/45903813/webflux-functional-how-to-detect-an-empty-flux-and-return-404/55829591#55829591", "title": "WebFlux functional: How to detect an empty Flux and return 404?", "body": "<p>I'm not sure why no one is talking about using the hasElements() function of Flux.java which would return a Mono.</p>\n"}, {"tags": [], "owner": {"reputation": 1110, "user_id": 5462308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eedfd34b3c625afebe2a18fbf3f028ca?s=128&d=identicon&r=PG", "display_name": "RJ.Hwang", "link": "https://stackoverflow.com/users/5462308/rj-hwang"}, "is_accepted": false, "score": 8, "last_activity_date": 1557021891, "creation_date": 1557021891, "answer_id": 55988267, "question_id": 45903813, "link": "https://stackoverflow.com/questions/45903813/webflux-functional-how-to-detect-an-empty-flux-and-return-404/55988267#55988267", "title": "WebFlux functional: How to detect an empty Flux and return 404?", "body": "<p>Use <code>Flux.hasElements() : Mono&lt;Boolean&gt;</code> function: </p>\n\n<pre><code>return customerFlux.hasElements()\n                   .flatMap {\n                     if (it) ok().body(customerFlux)\n                     else noContent().build()\n                   }\n</code></pre>\n"}], "owner": {"reputation": 1642, "user_id": 3415077, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/89dc320cc357248f2882bb715c05a1f3?s=128&d=identicon&r=PG&f=1", "display_name": "Juergen Zimmermann", "link": "https://stackoverflow.com/users/3415077/juergen-zimmermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23736, "favorite_count": 5, "accepted_answer_id": 45914542, "answer_count": 4, "score": 10, "last_activity_date": 1569582277, "creation_date": 1503828413, "last_edit_date": 1569582277, "question_id": 45903813, "link": "https://stackoverflow.com/questions/45903813/webflux-functional-how-to-detect-an-empty-flux-and-return-404", "title": "WebFlux functional: How to detect an empty Flux and return 404?", "body": "<p>I'm having the following simplified handler function (Spring WebFlux and the functional API using Kotlin). However, I need a hint how to detect an empty Flux and then use noContent() for 404, when the Flux is empty.</p>\n\n<pre><code>fun findByLastname(request: ServerRequest): Mono&lt;ServerResponse&gt; {\n    val lastnameOpt = request.queryParam(\"lastname\")\n    val customerFlux = if (lastnameOpt.isPresent) {\n        service.findByLastname(lastnameOpt.get())\n    } else {\n        service.findAll()\n    }\n    // How can I detect an empty Flux and then invoke noContent() ?\n    return ok().body(customerFlux, Customer::class.java)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dagger"], "comments": [{"owner": {"reputation": 1156, "user_id": 1649917, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98f36daa955c06085670a76a55a246a6?s=128&d=identicon&r=PG&f=1", "display_name": "nmu", "link": "https://stackoverflow.com/users/1649917/nmu"}, "edited": false, "score": 0, "creation_date": 1520102020, "post_id": 45902830, "comment_id": 85180953, "body": "The way I ended up getting around this was reading this article <a href=\"https://blog.davidmedenjak.com/android/2017/11/11/dagger-rules-engagement.html\" rel=\"nofollow noreferrer\">blog.davidmedenjak.com/android/2017/11/11/&hellip;</a> and abandoning the assumption that I couldn&#39;t constructor inject the adapter. Of course I could but - like the article said - I was copying and pasting code that I didn&#39;t know the function of. After I added a public variable to the adapter that held the items, I could stop passing them through the constructor and then inject the needed dependencies without any fuss. This, however, also means having to inject the adapter into the view model."}], "answers": [{"comments": [{"owner": {"reputation": 1156, "user_id": 1649917, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98f36daa955c06085670a76a55a246a6?s=128&d=identicon&r=PG&f=1", "display_name": "nmu", "link": "https://stackoverflow.com/users/1649917/nmu"}, "edited": false, "score": 0, "creation_date": 1503906080, "post_id": 45913318, "comment_id": 78786507, "body": "Yes I meant passing the data to the constructor of my adapter, just like you are. <code>class Adapter(private val data: List&lt;Data&gt;) : RecyclerView.Adapter { &#47;&#47;... }</code> So I can&#39;t <code>@Inject</code> that because I&#39;m not injecting the <code>List&lt;Data&gt;</code>. And yeah I&#39;m using MVVM, so that&#39;s the whole reason I want to inject my dependencies."}, {"owner": {"reputation": 7289, "user_id": 3736955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1647d5d7348d070ae95df49253385ee1?s=128&d=identicon&r=PG", "display_name": "Jemshit Iskenderov", "link": "https://stackoverflow.com/users/3736955/jemshit-iskenderov"}, "edited": false, "score": 3, "creation_date": 1510661644, "post_id": 45913318, "comment_id": 81520985, "body": "this is not answer to the question"}], "tags": [], "owner": {"reputation": 945, "user_id": 4733231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tq8s2.jpg?s=128&g=1", "display_name": "egorikem", "link": "https://stackoverflow.com/users/4733231/egorikem"}, "is_accepted": false, "score": 0, "last_activity_date": 1503903464, "creation_date": 1503903464, "answer_id": 45913318, "question_id": 45902830, "link": "https://stackoverflow.com/questions/45902830/is-it-possible-to-field-inject-a-recycler-view-adapter-with-dagger-2-11/45913318#45913318", "title": "Is it possible to field inject a Recycler View adapter with Dagger 2.11", "body": "<p>It is a matter of taste (and more flawless code design), but I do not think that you are doing this the right way.</p>\n\n<p>What do you mean by \"since i'm passing in the data to my recyclerview through the constructor\"? You assign data to Adapter, not the recyclerview itself.</p>\n\n<p>If you don't want to (but probably should) use MVP approach, goal of loading data from somewhere and then displaying it with RCV would look something like this:</p>\n\n<pre><code>class TestFragment : Fragment() {\n\n   val recyclerView: RecyclerView by bind(R.id.recyclerview) // Custom view binding but whatever\n   val adapter: TestAdapter? = null\n\n   override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n       val view = inflater!!.inflate(R.layout.test, container, false)\n\n       // Initialize\n       recyclerView.layoutManager = LinearLayoutManager(context, LinearLayoutManager.HORIZONTAL, false)\n       adapter = TestAdapter(mutableListOf())\n       recyclerView.adapter = adapter\n\n       // Add data\n       adapter.addItem(MyClass(\"Hey it's working\"))\n\n      return view\n   }\n}\n</code></pre>\n\n<p>As for android dagger, I don't actually find it any more useful than regular dagger. It makes things even more complicated. </p>\n\n<p>I strongly do advise to use MVP for android. Here's a sample of mine, which eliminates any need to an activity / component to inject any dependencies at all, feel free to have a look <a href=\"https://github.com/egorikem/Kotlin-Dagger2-MVP-RxJava\" rel=\"nofollow noreferrer\">MVP sample</a> </p>\n"}], "owner": {"reputation": 1156, "user_id": 1649917, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/98f36daa955c06085670a76a55a246a6?s=128&d=identicon&r=PG&f=1", "display_name": "nmu", "link": "https://stackoverflow.com/users/1649917/nmu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 893, "favorite_count": 3, "answer_count": 1, "score": 2, "last_activity_date": 1503903464, "creation_date": 1503820507, "last_edit_date": 1503839721, "question_id": 45902830, "link": "https://stackoverflow.com/questions/45902830/is-it-possible-to-field-inject-a-recycler-view-adapter-with-dagger-2-11", "title": "Is it possible to field inject a Recycler View adapter with Dagger 2.11", "body": "<p>I've been using the new <code>dagger.android</code> injection functions and so far I've really been enjoying them. </p>\n\n<p>However, I've run into this tiny issue whereby it seems impossible to field inject an adapter or basically any non-activity class i'm using. </p>\n\n<p>I know that it would be easier to <code>@Inject</code> the constructor but since i'm passing in the data to my recyclerview through the constructor, this isn't an option for me. </p>\n\n<p>This means that I have to call the component to inject my class. </p>\n\n<p>With an <code>AppComponent</code> class that looks like this: </p>\n\n<pre><code>interface AppComponent : AndroidInjector&lt;App&gt; {\n\n    @Component.Builder\n    abstract class Builder {\n        abstract fun networkModule(networkModule: NetworkModule): Builder\n    }\n\n    fun inject(someClass SomeClass)\n\n}\n</code></pre>\n\n<p>The generated <code>DaggerAppComponent</code> doesn't recognise a <code>.inject()</code> method after saying <code>DaggerAppComponent.builder().build()</code> </p>\n\n<p>I'm obviously misunderstanding something about Dagger because this seems like the canonical way of injecting a class.</p>\n\n<p>I suspect it's because I'm extending from <code>AndroidInjector</code> but if this is the case how would I inject a non-activity class. Because even if I made a <code>@Subcomponent</code> for just that class, it would still need to be called from <code>DaggerAppComponent</code></p>\n"}, {"tags": ["java", "android", "kotlin", "rx-java", "rx-android"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 3661843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4aefad742bbd55f1bd7808c2845e8437?s=128&d=identicon&r=PG&f=1", "display_name": "dabu", "link": "https://stackoverflow.com/users/3661843/dabu"}, "edited": false, "score": 0, "creation_date": 1503837651, "post_id": 45903435, "comment_id": 78768564, "body": "Thank you for help. You&#39;re of course right and I appreciate that but I&#39;ve marked @andrei_zaitcev response as accepted because it made me understand the problem more clearly. I hope it&#39;s ok! Cheers!"}, {"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "reply_to_user": {"reputation": 145, "user_id": 3661843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4aefad742bbd55f1bd7808c2845e8437?s=128&d=identicon&r=PG&f=1", "display_name": "dabu", "link": "https://stackoverflow.com/users/3661843/dabu"}, "edited": false, "score": 0, "creation_date": 1503859471, "post_id": 45903435, "comment_id": 78775030, "body": "@dabu you&#39;re free to accept whatever answer you prefer; thanks for your comment."}], "tags": [], "owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "is_accepted": false, "score": 1, "last_activity_date": 1503825347, "creation_date": 1503825347, "answer_id": 45903435, "question_id": 45902362, "link": "https://stackoverflow.com/questions/45902362/fetching-data-from-local-and-remote-simultaneously-using-rxjava/45903435#45903435", "title": "Fetching data from local and remote simultaneously using RxJava", "body": "<p><code>onErrorResumeNext</code> is what you're looking for. <code>doOnError</code> invokes a side-effecting action, doesn't replace the original <code>Observable</code> with another one.</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 3661843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4aefad742bbd55f1bd7808c2845e8437?s=128&d=identicon&r=PG&f=1", "display_name": "dabu", "link": "https://stackoverflow.com/users/3661843/dabu"}, "edited": false, "score": 0, "creation_date": 1503828984, "post_id": 45903458, "comment_id": 78766351, "body": "Thank you for your well put answer. I&#39;m not yet sure about the syntax of this onErrorResumeNext call, so maybe you could help me with it. Using your code with a specified throwable (so t: Throwable -&gt; {...}) I get error that return is not allowed there.    Is there an additional method that could let me save things invoking a function that also returns an Observable?"}, {"owner": {"reputation": 1213, "user_id": 921834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ygjaF.png?s=128&g=1", "display_name": "andrei_zaitcev", "link": "https://stackoverflow.com/users/921834/andrei-zaitcev"}, "reply_to_user": {"reputation": 145, "user_id": 3661843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4aefad742bbd55f1bd7808c2845e8437?s=128&d=identicon&r=PG&f=1", "display_name": "dabu", "link": "https://stackoverflow.com/users/3661843/dabu"}, "edited": false, "score": 1, "creation_date": 1503829302, "post_id": 45903458, "comment_id": 78766416, "body": "@dabu have you changed a return type of your local and remote repository? Make sure it&#39;s Single. If it doesn&#39;t help then if it&#39;s possible to create a GitHub gist for instance? So I can take a look."}, {"owner": {"reputation": 145, "user_id": 3661843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4aefad742bbd55f1bd7808c2845e8437?s=128&d=identicon&r=PG&f=1", "display_name": "dabu", "link": "https://stackoverflow.com/users/3661843/dabu"}, "edited": false, "score": 0, "creation_date": 1503837517, "post_id": 45903458, "comment_id": 78768521, "body": "Thank you for your help. I&#39;ve actually managed to get the desired behaviour, however I&#39;m not yet sure why it works. Here&#39;s the gist with the code: <a href=\"https://gist.github.com/rafal-adamek/0d8d0a17272d9d2eb730b1eac4d3c872\" rel=\"nofollow noreferrer\">gist.github.com/rafal-adamek/0d8d0a17272d9d2eb730b1eac4d3c87&zwnj;&#8203;2</a> I needed to add an annotation and subscribe to saving. Of course it&#39;s not yet complete (I will implement some error checking) but it works. Will need to educate myself more with Rx to fully understand this code but if I&#39;d appreciate any tips"}, {"owner": {"reputation": 1213, "user_id": 921834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ygjaF.png?s=128&g=1", "display_name": "andrei_zaitcev", "link": "https://stackoverflow.com/users/921834/andrei-zaitcev"}, "reply_to_user": {"reputation": 145, "user_id": 3661843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4aefad742bbd55f1bd7808c2845e8437?s=128&d=identicon&r=PG&f=1", "display_name": "dabu", "link": "https://stackoverflow.com/users/3661843/dabu"}, "edited": false, "score": 1, "creation_date": 1503908753, "post_id": 45903458, "comment_id": 78787849, "body": "@dabu my bad. I forgot about that Kotlin behaviour. Take a look at <a href=\"https://kotlinlang.org/docs/reference/returns.html#return-at-labels\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/returns.html#return-at-labels</a> and <a href=\"https://stackoverflow.com/a/40166597/921834\">stackoverflow.com/a/40166597/921834</a>."}], "tags": [], "owner": {"reputation": 1213, "user_id": 921834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ygjaF.png?s=128&g=1", "display_name": "andrei_zaitcev", "link": "https://stackoverflow.com/users/921834/andrei-zaitcev"}, "is_accepted": true, "score": 4, "last_activity_date": 1531424265, "last_edit_date": 1531424265, "creation_date": 1503825520, "answer_id": 45903458, "question_id": 45902362, "link": "https://stackoverflow.com/questions/45902362/fetching-data-from-local-and-remote-simultaneously-using-rxjava/45903458#45903458", "title": "Fetching data from local and remote simultaneously using RxJava", "body": "<p>You need to use one of <a href=\"http://reactivex.io/RxJava/javadoc/io/reactivex/Single.html#onErrorResumeNext-io.reactivex.functions.Function-\" rel=\"nofollow noreferrer\">onErrorResumeNext</a> methods. I would also suggest to change your stream type from <code>Observable</code> to <code>Single</code> as nature of your data seems like <em>Get data once or throw error</em>. It's just a good API design.</p>\n\n<p>In your particular case I would implement the repository this way:</p>\n\n<pre><code>class RepositoryImpl @Inject constructor(private val localRepository: Repository, private val remoteRepository: Repository) : Repository {\n    override fun getData(): Single&lt;Data&gt; = remoteRepository.getData()\n        .onErrorResumeNext { throwable -&gt;\n            if (throwable is IOException) {\n                return localRepository.getData()\n            }\n            return Single.error(throwable)\n        }\n}\n</code></pre>\n\n<p>You might ask why only catch <code>IOException</code>? I usually handle only this exception to not miss anything critical but only unimportant network errors. If you will catch every exception you might miss, for example, a <code>NullPointerException</code>.</p>\n"}], "owner": {"reputation": 145, "user_id": 3661843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4aefad742bbd55f1bd7808c2845e8437?s=128&d=identicon&r=PG&f=1", "display_name": "dabu", "link": "https://stackoverflow.com/users/3661843/dabu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1591, "favorite_count": 0, "accepted_answer_id": 45903458, "answer_count": 2, "score": 3, "last_activity_date": 1531424265, "creation_date": 1503816331, "last_edit_date": 1503905767, "question_id": 45902362, "link": "https://stackoverflow.com/questions/45902362/fetching-data-from-local-and-remote-simultaneously-using-rxjava", "title": "Fetching data from local and remote simultaneously using RxJava", "body": "<p>So I'm a beginner with RxJava but here's what I want to accomplish:</p>\n\n<p>MainViewModel talks to the Repository. Repository has both LocalDataStore (that talks with the database) and RemoteDataStore (Retrofit) Both are different implementations of interface DataStore).</p>\n\n<p>What I want to achieve is have a single call fetchData from the Repository that returns an Observable but:</p>\n\n<ul>\n<li>it takes it from the RemoteDataStore at first</li>\n<li>after fetching every single thing (onNext()), it inserts it into the database</li>\n<li>if it fails, it returns results from the LocalDataStore.</li>\n</ul>\n\n<p>However, I don't know how to implement this logic. Subscription happens on the ViewModel's end, but I cannot really change the observable to LocalDataStore from Repository end (?). Upserting data into the database also returns an Observable (Single to be precise) and for it to work it needs a subscription.</p>\n\n<p>Could someone explain it to me or point me in a good direction?</p>\n\n<p>My code (problem in repository comments):</p>\n\n<p>Remote data store</p>\n\n<pre><code> override fun getData(): Observable&lt;SomeData&gt; = api\n    .getData(token)\n    .flatMapIterable { x -&gt; x }\n</code></pre>\n\n<p>Local data store</p>\n\n<pre><code>override fun saveData(data: SomeData): Single&lt;SomeData&gt; {\n    return database.upsert(data)\n}\n</code></pre>\n\n<p>Repository</p>\n\n<pre><code> fun getData(): Observable&lt;SomeData&gt; {\n\n    return\n    remoteDataStore.getData()\n            .doOnError {\n                localDataStore.getData() //? this will invoke but nothing happens because I'm not subscribed to it\n            }\n            .doOnNext {\n                saveData(it) //The same as before, nothing will happen\n            }\n}\n</code></pre>\n\n<p>ViewModel</p>\n\n<pre><code>override fun fetchData() {\nrepository.getData()\n        .observeOn(androidScheduler)\n        .subscribeOn(threadScheduler)\n        .subscribe(\n                { data: SomeData -&gt;\n                    dataList.add(data)\n                },\n                { throwable: Throwable? -&gt;\n                    handleError(throwable)\n                },\n                {\n                    //send data to view\n                },\n                { disposable: Disposable -&gt;\n                    compositeDisposable.add(disposable)\n                }\n        )\n}\n</code></pre>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["spring-security", "kotlin", "spring-webflux"], "comments": [{"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1503826374, "post_id": 45901531, "comment_id": 78765679, "body": "Your problem is the destructuring declaration right? Can you please provide a complete code example? I don&#39;t see an error there"}, {"owner": {"reputation": 3944, "user_id": 893898, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cbb75897ee67011990d4706fad19e38b?s=128&d=identicon&r=PG", "display_name": "Hantsy", "link": "https://stackoverflow.com/users/893898/hantsy"}, "reply_to_user": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1503840125, "post_id": 45901531, "comment_id": 78769181, "body": "@s1m0nw1 Updated and added the current User class link."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8589667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1397b5fa2e6f0e2e908cd67aac1e7a86?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri Lee", "link": "https://stackoverflow.com/users/8589667/yuri-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1512791731, "last_edit_date": 1512791731, "creation_date": 1505123346, "answer_id": 46152728, "question_id": 45901531, "link": "https://stackoverflow.com/questions/45901531/how-to-create-a-data-class-implements-spring-secuirty-specific-userdetails/46152728#46152728", "title": "How to create a data class implements Spring Secuirty specific UserDetails", "body": "<pre><code>data class User(\n        // inherits from UserDetails\n        private val username: String,\n        private val password: String,\n        private val isEnabled: Boolean, //Disabled account can not log in\n        private val isCredentialsNonExpired: Boolean, //credential can be expired,eg. Change the password every three months\n        private val isAccountNonExpired: Boolean, //eg. Demo account\uff08guest\uff09 can only be online  24 hours\n        private val isAccountNonLocked: Boolean, //eg. Users who malicious attack system,lock their account for one year\n        private val authorities: Set&lt;GrantedAuthority&gt;, \n\n        // inherits from Tree.If the user is not a tree structure, can be ignored\n        val id: Long,\n        val parentId: Long? = null, \n        val lft: Int? = null, // preorder tree traversal algorithm\n        val rgt: Int? = null, // preorder tree traversal algorithm\n        val depth: Int? = null, // or levels\n        val isLeaf: Boolean? = null, \n        val teamTotal: Int? = null, // The number of all subordinates\n        val childrenTotal: Int? = null, //The number of all directly under the subordinate\n\n        //Custom attributes\n        val tenantId: Long, //We are the platform + tenant model\n        val role: Set&lt;Role&gt;, // TENANT, SUBACCOUNT, DEFAULT_GROUP, MEMBER, GUEST\n        val platform: Platform, // PC, IOS, ANDROID, WAP, INTERNAL\n        val deviceToken: String? = null, //or machine code\n        val ip: InetAddress //Inet4Address or Inet6Address\n) : UserDetails, Tree(id, parentId) {\n    override fun getUsername(): String = username\n    override fun getPassword(): String = password\n    override fun isEnabled(): Boolean = isEnabled\n    override fun isCredentialsNonExpired(): Boolean = isCredentialsNonExpired\n    override fun isAccountNonExpired(): Boolean = isAccountNonExpired\n    override fun isAccountNonLocked(): Boolean = isAccountNonLocked\n    override fun getAuthorities(): Set&lt;out GrantedAuthority&gt; = authorities\n}\n</code></pre>\n"}], "owner": {"reputation": 3944, "user_id": 893898, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cbb75897ee67011990d4706fad19e38b?s=128&d=identicon&r=PG", "display_name": "Hantsy", "link": "https://stackoverflow.com/users/893898/hantsy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1765, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512791731, "creation_date": 1503805804, "last_edit_date": 1503839936, "question_id": 45901531, "link": "https://stackoverflow.com/questions/45901531/how-to-create-a-data-class-implements-spring-secuirty-specific-userdetails", "title": "How to create a data class implements Spring Secuirty specific UserDetails", "body": "<p>I am trying to migrate some <code>spring-webflux</code> sample codes to kotlin.</p>\n\n<p>Currently I want to convert my <a href=\"https://github.com/hantsy/spring-reactive-sample/tree/master/security-data-mongo\" rel=\"nofollow noreferrer\">Spring Data Mongo</a> sample to kotlin. There is a <code>User</code>, the original Data Mongo version looks:</p>\n\n<pre><code>@Data\n@ToString\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Document\nclass User implements UserDetails {\n\n    @Id\n    private String id;\n    private String username;\n    private String password;\n\n    @Builder.Default()\n    private boolean active = true;\n\n    @Builder.Default()\n    private List&lt;String&gt; roles = new ArrayList&lt;&gt;();\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return AuthorityUtils.createAuthorityList(roles.toArray(new String[roles.size()]));\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return active;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return active;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return active;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return active;\n    }\n\n}\n</code></pre>\n\n<p>The <code>UserDetails</code> interface includes some getXXX and isXXX methods, how to add <code>override</code> to the <code>username</code> and <code>password</code> proerpties in kotlin?</p>\n\n<p>BTW: Currently I removed <code>UserDetails</code> in the kotlin version, <a href=\"https://github.com/hantsy/spring-reactive-sample/blob/master/kotlin-gradle/src/main/kotlin/com/example/demo/User.kt\" rel=\"nofollow noreferrer\">check here</a>:</p>\n\n<pre><code>@Document\ndata class User(\n        @Id var id: String? = null,\n        var username: String? = null,\n        var password: String? = null,\n        var active: Boolean = true,\n        var roles: List&lt;String&gt; = ArrayList()\n)\n</code></pre>\n\n<p><strong>UPDATE</strong>:<del>How to add the <code>UserDetails</code> interface to it?</del>, <a href=\"https://stackoverflow.com/questions/32970923/resolving-accidental-override-errors-in-kotlin?rq=1\">this question is helpful</a>.</p>\n\n<p>The new problem is when use destruction, it does not work. </p>\n\n<pre><code>(id, username, password, active, roles) = &lt;a user&gt;\n</code></pre>\n\n<p>The <code>User</code> is located <a href=\"https://github.com/hantsy/spring-reactive-sample/blob/master/kotlin-gradle/src/main/kotlin/com/example/demo/User.kt\" rel=\"nofollow noreferrer\">https://github.com/hantsy/spring-reactive-sample/blob/master/kotlin-gradle/src/main/kotlin/com/example/demo/User.kt</a> . Currently I commented out the version implemented <code>UserDetails</code>. If I use the commented codes(User:UserDetails), the <code>desstruction</code> codes in <code>Beans.kt</code> will report errors in IDE. The errors occur on <code>username</code> and <code>password</code>: <strong>destructing declaration initializer of type User! must have a component2 function</strong>.</p>\n"}, {"tags": ["android", "fragment", "kotlin"], "comments": [{"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1503814113, "post_id": 45901287, "comment_id": 78762936, "body": "Probably wrong layout file is used. Check out this line: <code>setContentView(R.layout.fragment_schedule)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 1824898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2590cf264facfb642d166ab19bcf9035?s=128&d=identicon&r=PG", "display_name": "\u041a\u043b\u0430\u0443\u0441 \u0428\u0432\u0430\u0440\u0446", "link": "https://stackoverflow.com/users/1824898/%d0%9a%d0%bb%d0%b0%d1%83%d1%81-%d0%a8%d0%b2%d0%b0%d1%80%d1%86"}, "is_accepted": false, "score": 0, "last_activity_date": 1503822211, "last_edit_date": 1503822211, "creation_date": 1503821880, "answer_id": 45902980, "question_id": 45901287, "link": "https://stackoverflow.com/questions/45901287/kotlin-typecastexception-null-cannot-be-cast-to-non-null-type-android-support-v/45902980#45902980", "title": "kotlin.TypeCastException: null cannot be cast to non-null type android.support.v7.widget.Toolbar", "body": "<p>Your layout apparently has no toolbar component with id <code>R.id.toolbar</code>, that's why <code>findViewById(...)</code> returns <code>null</code> that can't be cast to <code>Toolbar</code>.</p>\n\n<p>Null-safety is important built in part of <code>Kotlin</code>. It helps you to reveal most of NPEs on the early stages of development. Read <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">more about null safety</a> on official <code>Kotlin</code> site.</p>\n\n<h3>If presence of toolbar component is essential, then never make <code>val toolbar</code> variable nullable.</h3>\n\n<p>In this case your current code is correct, don't change it. Instead correct your layout/wrong toolbar id problem.</p>\n\n<p><code>var toolbar: Toolbar? = null</code> defines nullable variable of type <code>Toolbar</code> and no exception will be risen if there will be no toolbar component in your activity layout, <em>but if you expect to really have this component, you will get other exceptions later or even unpredictable behaviour of your program that will surprise you or app users</em>.</p>\n\n<h3>On the other hand you should make null-safety checks while using nullable variables</h3>\n\n<p>In that case your code should be slightly changed. Important part:</p>\n\n<pre><code>val toolbar = findViewById(R.id.toolbar) as Toolbar?\n</code></pre>\n\n<p><code>?</code> means that if <code>findViewById</code> returns <code>null</code>, then this <code>null</code> would be assigned to <code>val toolbar</code> instead of rising <code>kotlin.TypeCastException: null cannot be cast to non-null type android.support.v7.widget.Toolbar</code> exception</p>\n\n<p>Full code block example:</p>\n\n<pre><code> val toolbar = findViewById(R.id.toolbar) as Toolbar? // toolbar now is nullable \n\n if(toolbar != null) {\n // kotlin smart cast of toolbar as not nullable value\n        setSupportActionBar(toolbar) // setup toolbar\n        toolbar.setNavigationIcon(R.drawable.ic_map)\n\n        val drawer = findViewById(R.id.drawer_layout) as DrawerLayout\n        val toggle = ActionBarDrawerToggle(\n                this, drawer, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close)\n        drawer.addDrawerListener(toggle) // navigation drawer\n        toggle.syncState()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5436, "user_id": 3161139, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/EePWR.jpg?s=128&g=1", "display_name": "Antonin GAVREL", "link": "https://stackoverflow.com/users/3161139/antonin-gavrel"}, "is_accepted": false, "score": 1, "last_activity_date": 1553873959, "creation_date": 1553873959, "answer_id": 55420911, "question_id": 45901287, "link": "https://stackoverflow.com/questions/45901287/kotlin-typecastexception-null-cannot-be-cast-to-non-null-type-android-support-v/55420911#55420911", "title": "kotlin.TypeCastException: null cannot be cast to non-null type android.support.v7.widget.Toolbar", "body": "<p>Also another reason could be that you had put setContentView below the item that caused this exception. At least it is how I fixed it on my side.</p>\n"}, {"tags": [], "owner": {"reputation": 3711, "user_id": 1102799, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wskWo.jpg?s=128&g=1", "display_name": "Rethinavel", "link": "https://stackoverflow.com/users/1102799/rethinavel"}, "is_accepted": false, "score": 1, "last_activity_date": 1588953621, "creation_date": 1588953621, "answer_id": 61683139, "question_id": 45901287, "link": "https://stackoverflow.com/questions/45901287/kotlin-typecastexception-null-cannot-be-cast-to-non-null-type-android-support-v/61683139#61683139", "title": "kotlin.TypeCastException: null cannot be cast to non-null type android.support.v7.widget.Toolbar", "body": "<p>Sanislondra figured out that the reason why I was getting this exception because the <code>navigation graphs id</code> in the xml should match the <code>id</code> of the <code>menu items</code> in the bottom navigation menu xml.</p>\n"}], "owner": {"reputation": 93, "user_id": 8495570, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48b362ff085fd6d163b3c4c9fdf72a37?s=128&d=identicon&r=PG&f=1", "display_name": "Desmond A", "link": "https://stackoverflow.com/users/8495570/desmond-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9427, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1588953621, "creation_date": 1503802023, "last_edit_date": 1503860915, "question_id": 45901287, "link": "https://stackoverflow.com/questions/45901287/kotlin-typecastexception-null-cannot-be-cast-to-non-null-type-android-support-v", "title": "kotlin.TypeCastException: null cannot be cast to non-null type android.support.v7.widget.Toolbar", "body": "<p>I'm new to <code>Android</code> here. What can be the situation for my problem? I'm trying to present my fragment to the <code>MainActivity</code>. Any suggestions will help. Thanks</p>\n\n<p>Main Activity Class...</p>\n\n<pre><code>class NavigationActivity : AppCompatActivity(), NavigationView.OnNavigationItemSelectedListener {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.fragment_schedule)\n\n        val toolbar = findViewById(R.id.toolbar) as Toolbar\n        setSupportActionBar(toolbar) // setup toolbar\n        toolbar.setNavigationIcon(R.drawable.ic_map)\n\n        val drawer = findViewById(R.id.drawer_layout) as DrawerLayout\n        val toggle = ActionBarDrawerToggle(\n                this, drawer, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close)\n        drawer.addDrawerListener(toggle) // navigation drawer\n        toggle.syncState()\n\n        val navigationView = findViewById(R.id.nav_view) as NavigationView\n        navigationView.setNavigationItemSelectedListener(this) //setup navigation view\n\n}\n</code></pre>\n\n<p>My Fragment Class..</p>\n\n<pre><code> class fragment_schedule : Fragment() {\n override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n   // Inflate the layout for this fragment\n   return inflater!!.inflate(R.layout.fragment_schedule, container, false)\n}\n</code></pre>\n"}, {"tags": ["error-handling", "while-loop", "kotlin", "reset"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7618722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019e1b2785047b5d98e5377dc94dbe8f?s=128&d=identicon&r=PG&f=1", "display_name": "Migaloco", "link": "https://stackoverflow.com/users/7618722/migaloco"}, "edited": false, "score": 1, "creation_date": 1503860157, "post_id": 45901262, "comment_id": 78775229, "body": "My bad, still new to this but i hope that I&#39;ve given you all the information you need now"}], "tags": [], "owner": {"reputation": 25945, "user_id": 743464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3a21f6147bcc6bd9d997d5cc5b5f87c?s=128&d=identicon&r=PG", "display_name": "Andy Ray", "link": "https://stackoverflow.com/users/743464/andy-ray"}, "is_accepted": true, "score": 3, "last_activity_date": 1503801609, "creation_date": 1503801609, "answer_id": 45901262, "question_id": 45901207, "link": "https://stackoverflow.com/questions/45901207/kotlin-problems-with-while/45901262#45901262", "title": "Kotlin - Problems with while()", "body": "<p>Read the error. You're trying to read the character of a string at an index that doesn't exist with this statement:</p>\n\n<pre><code>input.get(op - 1)\n</code></pre>\n\n<p>You need to check what <code>op</code> is first to make sure it is found. <code>indexOfAny</code> returns <code>-1</code> if not found in the string. Because we can't see what <code>charay</code> is, we can't help you further.</p>\n"}], "owner": {"reputation": 31, "user_id": 7618722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019e1b2785047b5d98e5377dc94dbe8f?s=128&d=identicon&r=PG&f=1", "display_name": "Migaloco", "link": "https://stackoverflow.com/users/7618722/migaloco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 45901262, "answer_count": 1, "score": 0, "last_activity_date": 1504453808, "creation_date": 1503800805, "last_edit_date": 1504453808, "question_id": 45901207, "link": "https://stackoverflow.com/questions/45901207/kotlin-problems-with-while", "title": "Kotlin - Problems with while()", "body": "<p>I was making a calculator in Kotlin and I'm having trouble solving an issue that I'm having with <code>while()</code>.On this particular part of the code, I'm trying to find the first operator in the equation, but I need to exclude the ones that indicate whether a number is negative <code>-</code> (or positive <code>+</code>, optional), which need to be indicated between parentheses like so: <code>(-5)</code> </p>\n\n<pre><code>var charay = charArrayOf('+', '-', '*', '/')\n\nvar op = 0\n\nvar reference = 0\n\nvar bol = false\n\nwhile( bol == false &amp;&amp; op != -1){\n\n    println(op)\n    println(bol)\n    println(bol == false &amp;&amp; op != -1)\n\n    op = input.indexOfAny(charay, reference)\n\n    if (!input.get(op - 1).equals('(')){\n\n        bol = true\n\n    }else{\n\n        reference = op + 1\n    }\n\n    println(op)\n    println(bol)\n    println(bol == false &amp;&amp; op != -1)\n}\n</code></pre>\n\n<p>To test a normal equation I entered the equation <code>4+4</code> and the console looks like this:</p>\n\n<pre><code>0\nfalse\ntrue\n1\ntrue\nfalse\n0\nfalse\ntrue\nException in thread \"main\" java.lang.StringIndexOutOfBoundsException: \nString index out of range: -2\n    at java.lang.String.charAt(String.java:658)\n    at CalculatorKt.CalculateValue(Calculator.kt:67)\n    at CalculatorKt.CalculateValue(Calculator.kt:108)\n    at CalculatorKt.main(Calculator.kt:119)\n</code></pre>\n\n<p>Like I suspected, for some reason, the variables reset at the end of the <code>while()</code>, which is the reason why it never leaves said <code>while()</code>. Can anyone tell me why?</p>\n"}, {"tags": ["android-recyclerview", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2273, "user_id": 4407321, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/KHKUZ.png?s=128&g=1", "display_name": "Allan W", "link": "https://stackoverflow.com/users/4407321/allan-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1503776000, "creation_date": 1503776000, "answer_id": 45898993, "question_id": 45898853, "link": "https://stackoverflow.com/questions/45898853/i-need-a-way-to-dynamically-programmatically-change-the-background-for-a-imagev/45898993#45898993", "title": "I need a way to dynamically, programmatically change the background for a ImageView in a Recycler View", "body": "<p>What is stopping you from calling it again? Or is your question how to avoid manually specifying the drawables for every image?</p>\n\n<p>In this case, you'll typically add the image setting logic to an Adapter, and pass a list of all the image drawable resources for it to load. If you'd like to avoid creating a list of all the resources, you may consider avoiding proguard and searching the resources by name to match all drawables starting with \"flag_\". In that case, you'd be naming all of your flags like <code>flag_usa</code>, <code>flag_china</code> etc.</p>\n\n<p>A relevant response for getting drawables resources by name can be found <a href=\"https://stackoverflow.com/questions/16369814/how-to-access-the-drawable-resources-by-name-in-android\">here</a></p>\n"}], "owner": {"reputation": 21, "user_id": 7466817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097839ab5e980618cecc96f09198db0d?s=128&d=identicon&r=PG&f=1", "display_name": "L. McQuerrey", "link": "https://stackoverflow.com/users/7466817/l-mcquerrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548154865, "creation_date": 1503774906, "last_edit_date": 1548154865, "question_id": 45898853, "link": "https://stackoverflow.com/questions/45898853/i-need-a-way-to-dynamically-programmatically-change-the-background-for-a-imagev", "title": "I need a way to dynamically, programmatically change the background for a ImageView in a Recycler View", "body": "<p>I have a set of 200+ flag images. I want to dynamically select an flag image to match a country in a RecyclerView.</p>\n\n<p>This code allows me to select a flag:</p>\n\n<pre><code>p0?.imageViewFlag?.setBackgroundResource(R.drawable.china)\n</code></pre>\n\n<p>How can I programmatically change the image reference?</p>\n"}, {"tags": ["android", "generics", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 3, "last_activity_date": 1503773452, "creation_date": 1503773452, "answer_id": 45898657, "question_id": 45898609, "link": "https://stackoverflow.com/questions/45898609/kotlin-abstract-function-with-generic-return-type/45898657#45898657", "title": "Kotlin - abstract function with generic return type", "body": "<p>What you're doing cannot be correct, because it would allow the following code:</p>\n\n<pre><code>val test: Test&lt;Int&gt; = B().getText()\n</code></pre>\n\n<p><code>B().getText()</code> tries to return <code>Test1()</code>, which is <code>Test&lt;String&gt;</code>. But because the return type can be anything, its valid. This breaks the type system.</p>\n"}, {"tags": [], "owner": {"reputation": 2273, "user_id": 4407321, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/KHKUZ.png?s=128&g=1", "display_name": "Allan W", "link": "https://stackoverflow.com/users/4407321/allan-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1503773943, "creation_date": 1503773943, "answer_id": 45898719, "question_id": 45898609, "link": "https://stackoverflow.com/questions/45898609/kotlin-abstract-function-with-generic-return-type/45898719#45898719", "title": "Kotlin - abstract function with generic return type", "body": "<p>You likely want to enforce the type from the class rather than the method, due to Kiskae's example.</p>\n\n<p>For example:</p>\n\n<pre><code>abstract class A&lt;T&gt; {\n    abstract fun getText() : Test&lt;T&gt;\n}\n</code></pre>\n\n<p>can be extended using</p>\n\n<pre><code>class B : A&lt;String&gt;() ...\n</code></pre>\n\n<p>which will match the type for <code>Test1</code></p>\n"}, {"tags": [], "owner": {"reputation": 788, "user_id": 739583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c99d60babc5a2d53bb0ab2978e9b336?s=128&d=identicon&r=PG", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/739583/nicolas"}, "is_accepted": true, "score": 3, "last_activity_date": 1503776872, "last_edit_date": 1503776872, "creation_date": 1503774391, "answer_id": 45898772, "question_id": 45898609, "link": "https://stackoverflow.com/questions/45898609/kotlin-abstract-function-with-generic-return-type/45898772#45898772", "title": "Kotlin - abstract function with generic return type", "body": "<p>This is the answer you're looking for:</p>\n\n<pre><code>abstract class A&lt;T&gt; {\n    abstract fun getText() : Test&lt;T&gt;\n}\n\nclass B : A&lt;String&gt;() {\n    override fun getText(): Test&lt;String&gt; = Test1()\n}\n\nclass C : A&lt;Int&gt;() {\n    override fun getText(): Test&lt;Int&gt; = Test2()\n}\n\nclass Test1 : Test&lt;String&gt;()\nclass Test2 : Test&lt;Int&gt;()\nopen class Test&lt;T&gt;\n</code></pre>\n\n<p>You just need to move parameter <code>T</code> from the method signature to the class.</p>\n\n<p>Bonus: I updated the above snippet to more idiomatic Kotlin</p>\n"}], "owner": {"reputation": 16326, "user_id": 883033, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/lkrDS.jpg?s=128&g=1", "display_name": "Chandra Sekhar", "link": "https://stackoverflow.com/users/883033/chandra-sekhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2242, "favorite_count": 1, "accepted_answer_id": 45898772, "answer_count": 3, "score": 1, "last_activity_date": 1503776872, "creation_date": 1503773135, "question_id": 45898609, "link": "https://stackoverflow.com/questions/45898609/kotlin-abstract-function-with-generic-return-type", "title": "Kotlin - abstract function with generic return type", "body": "<p>I am new to Kotlin and really worried whether I am writing proper syntax or not. I have a super class and I want to write a generic abstract function as below.</p>\n\n<pre><code>abstract class A {\n    abstract fun &lt;T&gt; getText() : Test&lt;T&gt;\n}\n\nclass B : A() {\n    override fun &lt;T&gt; getText(): Test&lt;T&gt; {\n        return Test1() // Error - Required Test&lt;T&gt;, found Test1\n    }\n}\n\nclass C : A() {\n    override fun &lt;T&gt; getText(): Test&lt;T&gt; {\n        return Test2() // Error - Required Test&lt;T&gt;, found Test2\n    }\n}\n\nclass Test1 : Test&lt;String&gt;() {\n\n}\n\nclass Test2 : Test&lt;Int&gt;() {\n\n}\n</code></pre>\n\n<p>Can I solve this kind of problem with some sort of proper syntax. I guess I am doing some mistake? Can anybody please help?</p>\n"}, {"tags": ["java", "spring-data", "kotlin", "jsonpath"], "comments": [{"owner": {"reputation": 20034, "user_id": 5380322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-6cs1r0Ov08I/AAAAAAAAAAI/AAAAAAAACBI/rQyZyFwtZmE/photo.jpg?sz=128", "display_name": "Cepr0", "link": "https://stackoverflow.com/users/5380322/cepr0"}, "edited": false, "score": 0, "creation_date": 1503851730, "post_id": 45898121, "comment_id": 78772604, "body": "Why do you need <code>id</code>? If you handle &#39;POST /items&#39; request - then you <b>insert</b> new <code>@RequestBody Item item</code> without <code>id</code> to the DB. If you handle, for example, &#39;PUT /items/{id}&#39; request - then you <b>update</b> existing item that is retrieved from DB with help of <code>@PathVariable(&quot;id&quot;) Item storedItem</code> annotation..."}, {"owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "reply_to_user": {"reputation": 20034, "user_id": 5380322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-6cs1r0Ov08I/AAAAAAAAAAI/AAAAAAAACBI/rQyZyFwtZmE/photo.jpg?sz=128", "display_name": "Cepr0", "link": "https://stackoverflow.com/users/5380322/cepr0"}, "edited": false, "score": 0, "creation_date": 1503854806, "post_id": 45898121, "comment_id": 78773602, "body": "Yes, that is true for the <code>id</code>, I admit my example was bad in that sense. But say that specifying the name is optional, defaulting to an autogenerated name or you can optionally specify an owner, whatever it may be."}, {"owner": {"reputation": 20034, "user_id": 5380322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-6cs1r0Ov08I/AAAAAAAAAAI/AAAAAAAACBI/rQyZyFwtZmE/photo.jpg?sz=128", "display_name": "Cepr0", "link": "https://stackoverflow.com/users/5380322/cepr0"}, "edited": false, "score": 0, "creation_date": 1503855440, "post_id": 45898121, "comment_id": 78773818, "body": "Payload (request body) should be immutable IMO. I think that  autogenerated values are not part of input data..."}, {"owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "reply_to_user": {"reputation": 20034, "user_id": 5380322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-6cs1r0Ov08I/AAAAAAAAAAI/AAAAAAAACBI/rQyZyFwtZmE/photo.jpg?sz=128", "display_name": "Cepr0", "link": "https://stackoverflow.com/users/5380322/cepr0"}, "edited": false, "score": 0, "creation_date": 1503855881, "post_id": 45898121, "comment_id": 78773963, "body": "Yes, it is immutable. But user of the API can choose not to specify a name. Is that not reasonable?"}, {"owner": {"reputation": 20034, "user_id": 5380322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-6cs1r0Ov08I/AAAAAAAAAAI/AAAAAAAACBI/rQyZyFwtZmE/photo.jpg?sz=128", "display_name": "Cepr0", "link": "https://stackoverflow.com/users/5380322/cepr0"}, "edited": false, "score": 0, "creation_date": 1503856208, "post_id": 45898121, "comment_id": 78774077, "body": "reasonable, but in this case you are in charge what to do next - you analyze the input data and make a decision (but not the data do it for you). IMO..."}, {"owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "reply_to_user": {"reputation": 20034, "user_id": 5380322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-6cs1r0Ov08I/AAAAAAAAAAI/AAAAAAAACBI/rQyZyFwtZmE/photo.jpg?sz=128", "display_name": "Cepr0", "link": "https://stackoverflow.com/users/5380322/cepr0"}, "edited": false, "score": 0, "creation_date": 1503856349, "post_id": 45898121, "comment_id": 78774125, "body": "So you think the API user should always have to explicitly state all fields in the input data and then if they do not want a specific field use <code>null</code>?"}, {"owner": {"reputation": 20034, "user_id": 5380322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-6cs1r0Ov08I/AAAAAAAAAAI/AAAAAAAACBI/rQyZyFwtZmE/photo.jpg?sz=128", "display_name": "Cepr0", "link": "https://stackoverflow.com/users/5380322/cepr0"}, "edited": false, "score": 0, "creation_date": 1503856539, "post_id": 45898121, "comment_id": 78774192, "body": "I think if you get <code>null</code> in the input data (at the back-end) then you have to process it, not the data."}, {"owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "reply_to_user": {"reputation": 20034, "user_id": 5380322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-6cs1r0Ov08I/AAAAAAAAAAI/AAAAAAAACBI/rQyZyFwtZmE/photo.jpg?sz=128", "display_name": "Cepr0", "link": "https://stackoverflow.com/users/5380322/cepr0"}, "edited": false, "score": 0, "creation_date": 1503856960, "post_id": 45898121, "comment_id": 78774316, "body": "I am not sure I follow you. I am trying to design the interface to use as my <code>@RequestBody</code>. If I put the <code>name</code> in that interface, the user of the API <i>must</i> specify that field in the body, or accessing <code>name</code> in the controller method will throw an exception. I am trying to find a way to check whether or not <code>name</code> was specified, without just catching that exception. Using the exception seems like a &quot;wrong&quot; way to do it to me. Maybe that&#39;s where I am wrong though."}, {"owner": {"reputation": 20034, "user_id": 5380322, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-6cs1r0Ov08I/AAAAAAAAAAI/AAAAAAAACBI/rQyZyFwtZmE/photo.jpg?sz=128", "display_name": "Cepr0", "link": "https://stackoverflow.com/users/5380322/cepr0"}, "edited": false, "score": 0, "creation_date": 1503857367, "post_id": 45898121, "comment_id": 78774428, "body": "Maybe I didn&#39;t correct understand you..."}], "answers": [{"tags": [], "owner": {"reputation": 71192, "user_id": 18122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/q5nPT.jpg?s=128&g=1", "display_name": "Oliver Drotbohm", "link": "https://stackoverflow.com/users/18122/oliver-drotbohm"}, "is_accepted": true, "score": 1, "last_activity_date": 1503869486, "creation_date": 1503869486, "answer_id": 45909550, "question_id": 45898121, "link": "https://stackoverflow.com/questions/45898121/default-values-with-projectedpayload-projectingjackson2httpmessageconverter/45909550#45909550", "title": "Default values with @ProjectedPayload / ProjectingJackson2HttpMessageConverter", "body": "<p>That's a bug and has been fixed with <a href=\"https://jira.spring.io/browse/DATACMNS-1145\" rel=\"nofollow noreferrer\">DATACMNS-1145</a>. Will be released with Ingalls SR7 and transitively with Boot 1.5.7.</p>\n"}], "owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 45909550, "answer_count": 1, "score": 2, "last_activity_date": 1503869486, "creation_date": 1503769455, "question_id": 45898121, "link": "https://stackoverflow.com/questions/45898121/default-values-with-projectedpayload-projectingjackson2httpmessageconverter", "title": "Default values with @ProjectedPayload / ProjectingJackson2HttpMessageConverter", "body": "<p>I am using <code>@ProjectedPayload</code> on an interface to bind a JSON request body to a proxied instance of my interface.\nMy interface is as follows (in Kotlin, the <code>val</code> just translates to a Java getter):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ProjectedPayload\ninterface ImportServer {\n\n    val id: UUID?\n    val name: String?\n\n}\n</code></pre>\n\n<p>Now, the <code>id</code> here is completely optional, but there is no way for me to specify that, at least as far as I can tell. If I try to access the <code>id</code> property without it being present in the request body I will receive an exception from JsonPath: <code>com.jayway.jsonpath.PathNotFoundException: No results for path: $['id']</code>. If I could configure JsonPath I could use <code>Option.DEFAULT_PATH_LEAF_TO_NULL</code> and I'd get <code>null</code> for elements that are not present. But there is no way for me to get at the JsonPath configuration, it happens locked away inside <code>JsonProjectingMethodInterceptorFactory</code>.</p>\n\n<p>Is there a way for me to specify a default here? Or is there a way for me to detect if the <code>id</code> is present without accessing the <code>id</code> property in the first place? </p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1503765734, "post_id": 45897269, "comment_id": 78754052, "body": "Disregard my last comment, I misinterpreted the post. What you want is currently not possible, check the duplicate"}, {"owner": {"reputation": 23, "user_id": 8520920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88fb4832627d71196381caf07c292d1c?s=128&d=identicon&r=PG", "display_name": "Daniil Polyakov", "link": "https://stackoverflow.com/users/8520920/daniil-polyakov"}, "reply_to_user": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1503766236, "post_id": 45897269, "comment_id": 78754198, "body": "Thanks for your answer @VinceEmigh. Looks like according to that post + documentation, the correct way is to use backing field and restrict modification of the list, but the alternative is to use a suggested &quot;hack&quot;."}, {"owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1503766461, "post_id": 45897269, "comment_id": 78754279, "body": "I don&#39;t think a backing property would work here, as the &quot;wrapper&quot; property would still fall victim to the same issue (you could have the <code>get</code> throw an exception, but it&#39;ll still exist in your code&#39;s API). IMO, you should stick with your <code>update</code> behavioral method, possibly make it a bit more descriptive. Then again, I&#39;ve never been a fan of getter/setter - it&#39;s &quot;low level&quot; in my eyes, treating objects like data structures rather than behavioral objects that represent real-world objects, and doesn&#39;t describe the actual behavior being performed (<i>why</i> is it being &quot;set&quot;?)."}], "owner": {"reputation": 23, "user_id": 8520920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88fb4832627d71196381caf07c292d1c?s=128&d=identicon&r=PG", "display_name": "Daniil Polyakov", "link": "https://stackoverflow.com/users/8520920/daniil-polyakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "closed_date": 1503766300, "answer_count": 0, "score": 2, "last_activity_date": 1503766378, "creation_date": 1503763306, "last_edit_date": 1503765243, "question_id": 45897269, "link": "https://stackoverflow.com/questions/45897269/whats-the-correct-way-to-organize-a-set-only-property-in-kotlin", "closed_reason": "Duplicate", "title": "What&#39;s the correct way to organize a set-only property in Kotlin?", "body": "<p>I'm new in Kotlin, but I have a lot of experience with Java.</p>\n\n<p>Little background of the question... I have a class with a MutableList property there.</p>\n\n<pre><code>    class ModesAdapter(val modes : MutableList&lt;Mode&gt; = mutableListOf()) : RecyclerView.Adapter&lt;ModeViewHolder&gt;()\n</code></pre>\n\n<p>And I want to be able to set this propery, but to forbid (or restrict) a get operation. In Java it would be like:</p>\n\n<pre><code>class ModesAdapter extends RecyclerView.Adapter&lt;ModeViewHolder&gt;{\n\n   private final List&lt;Mode&gt; modes;   \n\n   public ModesAdapter() {\n      modes = new ArrayList&lt;Mode&gt;();\n   }   \n\n   public ModesAdapter(List&lt;Mode&gt; modes) {\n      this.modes = modes;\n   }\n\n   public void updateModes(List&lt;Mode&gt; modes) {\n      this.modes.clear();\n      this.modes.addAll(modes);\n      notifyDatasetChanged();\n   }\n}\n</code></pre>\n\n<hr>\n\n<p>For Kotlin I have two possible options.</p>\n\n<p><strong>Option #1.</strong> Use Kotlin provided get/set methods + backing property. In this case I need to override a get method to return immutable list. </p>\n\n<pre><code>class ModesAdapter(modes : MutableList&lt;Mode&gt; = mutableListOf()) : RecyclerView.Adapter&lt;ModeViewHolder&gt;(){\n\n    private val _modes : MutableList&lt;Mode&gt; = modes\n\n    var modes : List&lt;Mode&gt;\n        get() = _modes.toList()\n        set(value) {\n            _modes.clear()\n            _modes.addAll(value)\n            notifyDataSetChanged()\n        }\n}\n</code></pre>\n\n<p>Ideally, I have to remove <code>get</code> at all or make it private, but I cannot do this because of visibility of <code>var modes</code>. To update modes now I just need to:</p>\n\n<pre><code>val modesAdapter = ModesAdapter()\nmodesAdapter.modes = mutableListOf&lt;Mode&gt;(Mode(\"Mode 1\"))\n</code></pre>\n\n<p><strong>Option #2.</strong> Just throw away all Kotlin's stuff and use \"Java approach\".</p>\n\n<pre><code>class ModesAdapter(private val modes : MutableList&lt;Mode&gt; = mutableListOf()) : RecyclerView.Adapter&lt;ModeViewHolder&gt;(){\n\n    fun updateModes(modes : List&lt;Mode&gt;) {\n        this.modes.clear()\n        this.modes.addAll(modes)\n        notifyDataSetChanged()\n    }\n</code></pre>\n\n<p>To access modes in this case I need to:</p>\n\n<pre><code>val modesAdapter = ModesAdapter()\nmodesAdapter.updateModes(mutableListOf&lt;Mode&gt;(Mode(\"Mode 1\")))\n</code></pre>\n\n<p>Maybe the second approach is cleaner and has less lines of code, but the first one looks more \"Kotlin-style\": we have a property and separate setter/getter for it.</p>\n\n<p>So what's the correct way to achieve the behavior described above from the <strong>ideological</strong> point of view in Kotlin? May be you can suggest your own correct option (it would be nice, by the way).</p>\n"}, {"tags": ["kotlin", "rx-java2", "android-room"], "answers": [{"comments": [{"owner": {"reputation": 15222, "user_id": 3131147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HOOno.jpg?s=128&g=1", "display_name": "AdamMc331", "link": "https://stackoverflow.com/users/3131147/adammc331"}, "edited": false, "score": 0, "creation_date": 1503762931, "post_id": 45897180, "comment_id": 78753212, "body": "Tried this, but it just hangs for a long time as if it couldn&#39;t return anything. That doesn&#39;t make sense though, because I just inserted something and verified that it worked."}, {"owner": {"reputation": 15222, "user_id": 3131147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HOOno.jpg?s=128&g=1", "display_name": "AdamMc331", "link": "https://stackoverflow.com/users/3131147/adammc331"}, "edited": false, "score": 0, "creation_date": 1503763180, "post_id": 45897180, "comment_id": 78753289, "body": "I&#39;ve also ran the app and verified this works by adding an account and seeing it displayed on the screen, but it&#39;s only when I&#39;m trying to test a flowable that I&#39;m having issues. I admittedly don&#39;t have a lot of experience with testing RxJAva."}], "tags": [], "owner": {"reputation": 3179, "user_id": 3681727, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4525638046f10c862c7912c1c9eabb69?s=128&d=identicon&r=PG&f=1", "display_name": "Tunji_D", "link": "https://stackoverflow.com/users/3681727/tunji-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1503762665, "creation_date": 1503762665, "answer_id": 45897180, "question_id": 45897104, "link": "https://stackoverflow.com/questions/45897104/test-rxjava2-flowable-query-room/45897180#45897180", "title": "Test RxJava2 Flowable Query Room", "body": "<p>Try using the <code>testObserver.awaitTerminalEvent()</code> before running your assertions.</p>\n"}, {"tags": [], "owner": {"reputation": 15222, "user_id": 3131147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HOOno.jpg?s=128&g=1", "display_name": "AdamMc331", "link": "https://stackoverflow.com/users/3131147/adammc331"}, "is_accepted": true, "score": 24, "last_activity_date": 1503983048, "creation_date": 1503983048, "answer_id": 45931034, "question_id": 45897104, "link": "https://stackoverflow.com/questions/45897104/test-rxjava2-flowable-query-room/45931034#45931034", "title": "Test RxJava2 Flowable Query Room", "body": "<p>As part of my search to answer this, I commented on a <a href=\"https://medium.com/google-developers/room-rxjava-acb0cd4f3757\" rel=\"noreferrer\">Medium post by Florina Muntenescu</a> and she <a href=\"https://medium.com/@florina.muntenescu/check-the-tests-here-and-make-sure-youre-using-the-instanttaskexecutorrule-for-your-test-f756ecb8c9e7\" rel=\"noreferrer\">responded</a> with the answer.</p>\n\n<p>I needed to include the <a href=\"https://developer.android.com/reference/android/arch/core/executor/testing/InstantTaskExecutorRule.html\" rel=\"noreferrer\"><code>InstantTaskExecutorRule</code></a> in my test class. This replaces the background task executor with one that runs everything synchronously. In order to use this, I added the following line to my module's build.gradle file, note that while I had to exclude certain modules (I got a support lib discrepancy between app and test app) you may not:</p>\n\n<pre><code>androidTestCompile (\"android.arch.core:core-testing:$roomLibraryVersion\") {\n    exclude module: 'support-compat'\n    exclude module: 'support-annotations'\n    exclude module: 'support-core-utils'\n}\n</code></pre>\n\n<p>Now, with that added, my test class looks like this:</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\nclass CCDatabaseTest {\n    // ...\n\n    @JvmField @Rule val instantTaskExecutorRule = InstantTaskExecutorRule()\n    @JvmField @Rule val mainActivity = ActivityTestRule&lt;MainActivity&gt;(MainActivity::class.java)\n\n    @Before\n    fun setUp() {\n        val context = mainActivity.activity\n        database = Room.inMemoryDatabaseBuilder(context, CCDatabase::class.java).allowMainThreadQueries().build()\n        accountDao = database.accountDao()\n    }\n\n    // ...\n\n    @Test\n    fun testWriteReadAccount() {\n        val testAccount = Account(TEST_ACCOUNT_NAME, TEST_ACCOUNT_BALANCE)\n\n        val ids = accountDao.insert(listOf(testAccount))\n        assertEquals(1, ids.size)\n\n        accountDao.getAll()\n                .test()\n                .assertValue(listOf(testAccount))\n    }\n\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 15222, "user_id": 3131147, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/HOOno.jpg?s=128&g=1", "display_name": "AdamMc331", "link": "https://stackoverflow.com/users/3131147/adammc331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2438, "favorite_count": 1, "accepted_answer_id": 45931034, "answer_count": 2, "score": 8, "last_activity_date": 1503983048, "creation_date": 1503762121, "last_edit_date": 1503763438, "question_id": 45897104, "link": "https://stackoverflow.com/questions/45897104/test-rxjava2-flowable-query-room", "title": "Test RxJava2 Flowable Query Room", "body": "<p>I've been trying to write unit tests for my Room database, which I've done in the past when I have queries return a list and I create a database that allows main thread queries, but now that I'm trying to test with RxJava values I have no luck.</p>\n\n<p>Here is my DAO code:</p>\n\n<pre><code>@Dao\ninterface AccountDAO {\n    @Query(\"SELECT * FROM account\")\n    fun getAll(): Flowable&lt;List&lt;Account&gt;&gt;\n\n    @Insert\n    fun insert(accounts: List&lt;Account&gt;): List&lt;Long&gt;\n\n    //...\n}\n</code></pre>\n\n<p>And here is my database testing code, where I've tried a few things to get it to pass:</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\nclass CCDatabaseTest {\n    //...\n\n    @JvmField @Rule val mainActivity = ActivityTestRule&lt;MainActivity&gt;(MainActivity::class.java)\n\n    @Before\n    fun setUp() {\n        val context = mainActivity.activity\n        database = Room.inMemoryDatabaseBuilder(context, CCDatabase::class.java).allowMainThreadQueries().build()\n        accountDao = database.accountDao()\n        transactionDao = database.transactionDao()\n    }\n\n    //...\n\n    @Test\n    fun testWriteReadAccount() {\n        val testAccount = Account(TEST_ACCOUNT_NAME, TEST_ACCOUNT_BALANCE)\n\n        val ids = accountDao.insert(listOf(testAccount))\n        assertEquals(1, ids.size)\n\n        val accountsFlowable = accountDao.getAll()\n        val testSubscriber = TestSubscriber&lt;List&lt;Account&gt;&gt;()\n        accountsFlowable.subscribe(testSubscriber)\n\n        testSubscriber.assertNoErrors()\n        // Fails: testSubscriber.assertValueCount(1)\n        // Fails: testSubscriber.assertValue(listOf(testAccount))\n        // Fails: testSubscriber.assertResult(listOf(testAccount))\n    }\n\n    //...\n}\n</code></pre>\n\n<p>If anyone would actually like to see or test run the code, please check out the app-refresh module of this repository: <a href=\"https://github.com/adammc331/cashcaretaker\" rel=\"noreferrer\">https://github.com/adammc331/cashcaretaker</a></p>\n\n<p>DAO: <a href=\"https://github.com/AdamMc331/CashCaretaker/blob/develop/app-refresh/src/main/java/com/adammcneilly/cashcaretaker/daos/AccountDAO.kt\" rel=\"noreferrer\">https://github.com/AdamMc331/CashCaretaker/blob/develop/app-refresh/src/main/java/com/adammcneilly/cashcaretaker/daos/AccountDAO.kt</a></p>\n\n<p>Test class: <a href=\"https://github.com/AdamMc331/CashCaretaker/blob/develop/app-refresh/src/androidTest/java/com/adammcneilly/cashcaretaker/data/CCDatabaseTest.kt\" rel=\"noreferrer\">https://github.com/AdamMc331/CashCaretaker/blob/develop/app-refresh/src/androidTest/java/com/adammcneilly/cashcaretaker/data/CCDatabaseTest.kt</a></p>\n"}, {"tags": ["testing", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 1824898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2590cf264facfb642d166ab19bcf9035?s=128&d=identicon&r=PG", "display_name": "\u041a\u043b\u0430\u0443\u0441 \u0428\u0432\u0430\u0440\u0446", "link": "https://stackoverflow.com/users/1824898/%d0%9a%d0%bb%d0%b0%d1%83%d1%81-%d0%a8%d0%b2%d0%b0%d1%80%d1%86"}, "is_accepted": false, "score": 0, "last_activity_date": 1503813988, "creation_date": 1503813988, "answer_id": 45902153, "question_id": 45896425, "link": "https://stackoverflow.com/questions/45896425/kotlintest-interceptor-and-lateinit-vars/45902153#45902153", "title": "Kotlintest interceptor and lateinit vars", "body": "<p>You should not access <code>lateinit vars</code> before they were initialized. </p>\n\n<p>The problem is that you are accessing your <code>lateinit var</code>s inside <code>init {}</code> block, which is default constructor and it is called before <code>interceptTestCase()</code>.</p>\n\n<p>The easiest way here is just to make <code>mockDocument</code> and <code>mockProperty</code> nullable. </p>\n\n<pre><code>var mockDocument: ElasticsearchDocument? = null\nvar mockProperty: KProperty&lt;*&gt;? = null\n</code></pre>\n\n<p>and if you want you test to crash if these fields were not initialized add <code>!!</code> modifier:</p>\n\n<pre><code>init {\n    \"ElasticsearchFields\" should {\n        \"behave like normal var properties\" {\n            val target = ElasticsearchFieldImpl&lt;Any&gt;()\n            // Here the exception is thrown\n            target.getValue(mockDocument!!, mockProperty!!) shouldBe null\n\n            val testValue = Gen.string().generate()\n            target.setValue(mockDocument!!, mockProperty!!, testValue)\n            target.getValue(mockDocument!!, mockProperty!!) shouldBe testValue\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2662, "user_id": 2707179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUNvp.jpg?s=128&g=1", "display_name": "michalbrz", "link": "https://stackoverflow.com/users/2707179/michalbrz"}, "is_accepted": true, "score": 2, "last_activity_date": 1514481449, "creation_date": 1514481449, "answer_id": 48011637, "question_id": 45896425, "link": "https://stackoverflow.com/questions/45896425/kotlintest-interceptor-and-lateinit-vars/48011637#48011637", "title": "Kotlintest interceptor and lateinit vars", "body": "<p>\u041a\u043b\u0430\u0443\u0441 \u0428\u0432\u0430\u0440\u0446's answer is incorrect. This is not how kotlintest works - <strong>in <code>init</code> lambdas are only created, not run.</strong> So you are not accessing your <code>lateinit var</code>s in <code>init</code> block. They just never have any value assigned.</p>\n\n<p>This doesn't work because of bug in kotlintest, described (and actually almost resolved) here: <a href=\"https://github.com/kotlintest/kotlintest/issues/174\" rel=\"nofollow noreferrer\">https://github.com/kotlintest/kotlintest/issues/174</a></p>\n\n<p>In short - <code>interceptTestCase</code> is called on different instance of class than real tests. So it has no influence on your tests at all. </p>\n\n<p>Workaround is to override property:\n<code>override val oneInstancePerTest = false</code></p>\n\n<p>Then there is only one instance and <code>interceptTestCase</code> works correctly, but you have to remember - <strong>there is only one instance for all tests</strong>.</p>\n\n<p>Kotlintest 3.0 will be free of this bug. (But possibly might have one instance for all tests by default.)</p>\n"}], "owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 48011637, "answer_count": 2, "score": 3, "last_activity_date": 1514481449, "creation_date": 1503757525, "question_id": 45896425, "link": "https://stackoverflow.com/questions/45896425/kotlintest-interceptor-and-lateinit-vars", "title": "Kotlintest interceptor and lateinit vars", "body": "<p>I have some testcases that share a common setup. They all need two fields which can be initialized in the same way. So I thought I can extract them into <code>lateinit var</code> fields and create them in an test-case-interceptor. <br>\nBut when I try to access them in my testcases they always throw an exception because they are not initialized. <br>\nIs there a way to create the fields before every testcase?</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>class ElasticsearchFieldImplTest : WordSpec() {\n\n    // These 2 are needed for every test\n    lateinit var mockDocument: ElasticsearchDocument\n    lateinit var mockProperty: KProperty&lt;*&gt;\n\n    override fun interceptTestCase(context: TestCaseContext, test: () -&gt; Unit) {\n        // Before Each\n        mockDocument = mock()\n        mockProperty = mock {\n            on {name} doReturn Gen.string().generate()\n        }\n\n        // Execute Test\n        test()\n\n        // After Each\n    }\n\n    init {\n        \"ElasticsearchFields\" should {\n            \"behave like normal var properties\" {\n                val target = ElasticsearchFieldImpl&lt;Any&gt;()\n                // Here the exception is thrown\n                target.getValue(mockDocument, mockProperty) shouldBe null\n\n                val testValue = Gen.string().generate()\n                target.setValue(mockDocument, mockProperty, testValue)\n                target.getValue(mockDocument, mockProperty) shouldBe testValue\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>When I step through it with a debugger and set a breakpoint in the <code>interceptTestCase</code> methods I see that it is executed before the test and that the properties are initialized. Then I step forward to the test and in it the properties are not initialized anymore.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1503756697, "post_id": 45896252, "comment_id": 78751420, "body": "Kotlin <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines.experimental/-continuation/index.html#continuation\" rel=\"nofollow noreferrer\">Continuation</a>  is just an interface that doesn&#39;t provide thread safe access, but you can implements your own <code>Continuation</code>s to make it thread-safely. see here: <a href=\"https://hyp.is/xSxsoopoEeegKEsi2kQGmg/github.com/Kotlin/kotlin-coroutines/blob/master/kotlin-coroutines-informal.md\" rel=\"nofollow noreferrer\">hyp.is/xSxsoopoEeegKEsi2kQGmg/github.com/Kotlin/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8520666"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1503757481, "post_id": 45896252, "comment_id": 78751661, "body": "Thanks! I&#39;ll read about it."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1503757738, "post_id": 45896252, "comment_id": 78751735, "body": "Not at all. if you open the link with chrome you will found I have highlighted the part what you care about."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8520666"}, "edited": false, "score": 1, "creation_date": 1503757315, "post_id": 45896290, "comment_id": 78751607, "body": "I see, that&#39;s the hint I need at least. Thanks! I&#39;ve read your page <a href=\"https://medium.com/@s1m0nw1/approaching-kotlin-coroutines-an-extensive-feature-concurrent-programming-in-kotlin-eaaa19b003d2\" rel=\"nofollow noreferrer\">medium.com/@s1m0nw1/&hellip;</a>"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1503757361, "post_id": 45896290, "comment_id": 78751628, "body": "Then you should know already :) there&#39;s a whole section on shared state"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 9, "last_activity_date": 1541433425, "last_edit_date": 1541433425, "creation_date": 1503756563, "answer_id": 45896290, "question_id": 45896252, "link": "https://stackoverflow.com/questions/45896252/kotlin-coroutines-do-we-need-to-synchronize-shared-state/45896290#45896290", "title": "Kotlin Coroutines: Do we need to synchronize shared state?", "body": "<p>Coroutines bring a concurrent programming model that may result in simultaneously executed code. Just as you know it from thread-based libraries, you have to care about synchronization as noted in the docs:</p>\n\n<blockquote>\n  <p>Coroutines can be executed concurrently using a multi-threaded dispatcher like the Dispatchers.Default. It presents all the usual concurrency problems. The main problem being synchronization of access to shared mutable state. Some solutions to this problem in the land of coroutines are similar to the solutions in the multi-threaded world, but others are unique.</p>\n</blockquote>\n\n<p>With Kotlin <strong>Coroutines</strong> you can make use of acquainted strategies like using <em>thread-safe data structures</em>, <em>confining</em> execution to a single thread or using <em>locks</em> (e.g. Mutex).</p>\n\n<p>Besides the common patterns, Kotlin coroutines encourage us to use a \"<strong>share by communication</strong>\" style. Concretely, an \"actor\" can be shared between coroutines. They can be used by coroutines, which may send/take messages to/from it. Also have a look at <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#channels\" rel=\"nofollow noreferrer\">Channels</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8520666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3060, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1541433425, "creation_date": 1503756262, "last_edit_date": 1503834781, "question_id": 45896252, "link": "https://stackoverflow.com/questions/45896252/kotlin-coroutines-do-we-need-to-synchronize-shared-state", "title": "Kotlin Coroutines: Do we need to synchronize shared state?", "body": "<p>From the official guide and samples from web, I didn't see any mentions of <strong>locking</strong> or <strong>synchronization</strong>, or how safe is modifying a shared variable in multiple <code>launch</code> or <code>async</code> calls.</p>\n"}, {"tags": ["java", "android", "kotlin", "rx-java", "rx-android"], "comments": [{"owner": {"reputation": 127, "user_id": 5806377, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mYtmYtbUafM/AAAAAAAAAAI/AAAAAAAABeE/kiAUqE7gRZw/photo.jpg?sz=128", "display_name": "vijay surya", "link": "https://stackoverflow.com/users/5806377/vijay-surya"}, "edited": false, "score": 0, "creation_date": 1503752305, "post_id": 45895623, "comment_id": 78750057, "body": "holder.deleteCartIcon!!.setOnClickListener {             v -&gt;             Log.e(&quot;clicked&quot;,&quot;clicked&quot;)         }   another onclick method is above"}], "answers": [{"tags": [], "owner": {"reputation": 3424, "user_id": 856588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kg8G7.jpg?s=128&g=1", "display_name": "Maxim Volgin", "link": "https://stackoverflow.com/users/856588/maxim-volgin"}, "is_accepted": false, "score": 0, "last_activity_date": 1503760425, "creation_date": 1503760425, "answer_id": 45896858, "question_id": 45895623, "link": "https://stackoverflow.com/questions/45895623/rx-java-android-how-to-i-achieve-this-toast-on-every-click-using-debounce-operat/45896858#45896858", "title": "RX java/Android how to i achieve This toast on every click using debounce operator", "body": "<p>You have to apply \".subscribeOn(AndroidSchedulers.mainThread())\" to all RxBinding events, such as \"RxView.clicks()\"</p>\n"}, {"tags": [], "owner": {"reputation": 2732, "user_id": 2441420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WA58o.jpg?s=128&g=1", "display_name": "lustig", "link": "https://stackoverflow.com/users/2441420/lustig"}, "is_accepted": false, "score": 1, "last_activity_date": 1503766835, "creation_date": 1503766835, "answer_id": 45897740, "question_id": 45895623, "link": "https://stackoverflow.com/questions/45895623/rx-java-android-how-to-i-achieve-this-toast-on-every-click-using-debounce-operat/45897740#45897740", "title": "RX java/Android how to i achieve This toast on every click using debounce operator", "body": "<p>There are multiple ways to do what you're asking. I've included the simplest below, but will need to think more about potential side effects from using doOnNext.</p>\n\n<p><a href=\"https://github.com/lustigdev/StackOverflowProblems/blob/stackoverflow/toast-every-debounce-api-call/app/src/main/java/com/example/michaellustig/dynamicnetworkrequests/MainActivity.java\" rel=\"nofollow noreferrer\">The code for this example lives on Github here if you're interested in running the app.</a> Just realized the package name is wrong, but the example will run just fine. </p>\n\n<p>The most relevant code to the example is below. The key is that you'll need to debounce <em>after</em> you show the Toast rather than before.</p>\n\n<pre><code>RxView.clicks(image1)\n            .doOnNext(imageClickedEvent -&gt; {\n                // Show toast every time onNext is called (this will also log to LogCat)\n                showToast();\n            })\n            .debounce(1000, TimeUnit.MILLISECONDS)\n            .subscribe(clickEvent -&gt; {\n                makeApiCall();\n            });\n</code></pre>\n\n<blockquote>\n  <p>I tried to have a separate onclick method for Image View but during debugging I found that the control is never coming to onclick method this is my another onclick method</p>\n</blockquote>\n\n<p>I believe this is the case because RxClicks sets a listener on the ImageView, and that occurs <strong>after</strong> the framework sets the onClick listener and you can only have one <code>OnClickListener</code> on a <code>View</code> if I recall correctly. So what's happening is the <code>RxView.clicks(imageView)</code> is receiving the click event rather than the method you created separately.  </p>\n"}], "owner": {"reputation": 127, "user_id": 5806377, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mYtmYtbUafM/AAAAAAAAAAI/AAAAAAAABeE/kiAUqE7gRZw/photo.jpg?sz=128", "display_name": "vijay surya", "link": "https://stackoverflow.com/users/5806377/vijay-surya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1503766835, "creation_date": 1503752253, "last_edit_date": 1503754713, "question_id": 45895623, "link": "https://stackoverflow.com/questions/45895623/rx-java-android-how-to-i-achieve-this-toast-on-every-click-using-debounce-operat", "title": "RX java/Android how to i achieve This toast on every click using debounce operator", "body": "<p>I have this ImageView which on clicked should Show toast and also making api on click of the image View, so I decided to use Debounce operator in Rx\nbut now thost is not visible on every click. below is the code</p>\n\n<pre><code>cartSubscriptionDecrement = RxView.clicks(holder.databinding\n            .cartQuantityLayout.ivDecreaseQuantity)\n            .debounce(1000, TimeUnit.MILLISECONDS)\n            .subscribe { next -&gt;\n   cartQuantityEvent.onCartQuantityDecremented(cartSubscriptionDecrement!!)\n            }\n</code></pre>\n\n<p>I need to show toast on every single click of imageView.</p>\n\n<p>I tried to have a separate onclick method for Image View but during debugging I found that  the control is never coming to onclick method this is my another onclick method </p>\n\n<p>How do I achieve this toast on every click while not making an api call in every click (make use of Debounce operator).</p>\n"}, {"tags": ["java", "kotlin", "retrofit"], "comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 1, "creation_date": 1503750784, "post_id": 45895357, "comment_id": 78749628, "body": "it is a mapped type for Kotlin."}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1503750816, "post_id": 45895357, "comment_id": 78749639, "body": "Yes, because <code>kotlin.Number</code> is mapped to <code>java.lang.Number</code>"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1503760815, "post_id": 45895357, "comment_id": 78752571, "body": "Seems that you have faced this bug: <a href=\"https://youtrack.jetbrains.com/issue/KT-16087\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-16087</a>"}, {"owner": {"reputation": 1044, "user_id": 4469745, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ae66806e9a5fc63482f58779c34d0f69?s=128&d=identicon&r=PG&f=1", "display_name": "xiang", "link": "https://stackoverflow.com/users/4469745/xiang"}, "edited": false, "score": 1, "creation_date": 1503794468, "post_id": 45895357, "comment_id": 78760528, "body": "I think of an old Chinese saying:&quot;Straight hooks,salty bait&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 5, "last_activity_date": 1503842001, "last_edit_date": 1503842001, "creation_date": 1503750862, "answer_id": 45895428, "question_id": 45895357, "link": "https://stackoverflow.com/questions/45895357/why-atomicinteger-is-abstract-in-kotlin-it-works-fine-in-java/45895428#45895428", "title": "Why AtomicInteger is abstract in Kotlin? (it works fine in Java)", "body": "<p><code>AtomicInteger</code> extends <code>java.lang.Number</code>, but in Kotlin this type is <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#mapped-types\" rel=\"nofollow noreferrer\">mapped</a> to <code>kotlin.Number</code>.</p>\n\n<p>In <code>kotlin.Number</code> these abstract methods are defined (which you can see in its <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-number/index.html\" rel=\"nofollow noreferrer\">API</a>):</p>\n\n<p><code>toByte</code>, <code>toInt</code>, <code>toChar</code> etc.</p>\n\n<p>If you debug this line of code: <code>AtomicInteger(2).toByte()</code> you can see, that the method <code>java.lang.Number::byteValue</code> is used, this is done by using certain compiler techniques. </p>\n"}], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2154, "favorite_count": 0, "accepted_answer_id": 45895428, "answer_count": 1, "score": 7, "last_activity_date": 1503842001, "creation_date": 1503750446, "question_id": 45895357, "link": "https://stackoverflow.com/questions/45895357/why-atomicinteger-is-abstract-in-kotlin-it-works-fine-in-java", "title": "Why AtomicInteger is abstract in Kotlin? (it works fine in Java)", "body": "<p>I was trying to make something similar to <a href=\"https://github.com/square/retrofit/blob/master/retrofit-adapters/rxjava/src/main/java/retrofit2/adapter/rxjava/CallArbiter.java\" rel=\"noreferrer\">this</a>(actually you don't need to read the link to understand this question, it's just for reference), and I write this:</p>\n\n<pre><code>class CallArbiter: AtomicInteger { // error\n  constructor(initialValue: Int) : super(initialValue)\n  constructor() : super()\n}\n</code></pre>\n\n<p>The compiler says:</p>\n\n<blockquote>\n  <p>Error:(8, 1) Kotlin: Class 'CallArbiter' must be declared abstract or implement abstract base class member public abstract fun toByte(): Byte defined in java.util.concurrent.atomic.AtomicInteger</p>\n</blockquote>\n\n<p>I can't figure out why it requires me to implement those methods. I didn't  see them in the <code>AtomicInteger</code> class. Everything is fine in Java.</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": true, "score": 2, "last_activity_date": 1503752221, "last_edit_date": 1503752221, "creation_date": 1503751058, "answer_id": 45895447, "question_id": 45895222, "link": "https://stackoverflow.com/questions/45895222/error-when-creating-object-implements-interface-the-class-doesnt-have-a-constr/45895447#45895447", "title": "Error when creating object implements interface: The class doesn&#39;t have a constructor", "body": "<p>When you create an object which implements an interface, curly braces <code>()</code> is not needed, since interface does not have a constructor. On the other hand, when you create an object which extends a class, curly braces is needed. For example:</p>\n\n<pre><code>interface MyListener {\n    fun success()\n}\n\nabstract class MyAbstractClass {\n    abstract fun fail()\n}\n\n//Create an object which extends MyAbstractClass and implements MyListener\nval impl = object: MyAbstractClass(), MyListener {\n    override fun success() { TODO() }\n    override fun fail() { TODO() }\n}\n</code></pre>\n\n<p>So, you need to remove the curly braces for <code>Response.Listener</code> and <code>Response.ErrorListener</code>:</p>\n\n<pre><code>val stringRequest = StringRequest(Request.Method.GET, url,\n        object: Response.Listener&lt;String&gt; {\n            override fun onResponse(response:String) {\n                // Display the first 500 characters of the response string.\n                textView.setText(\"Response is: \" + response.substring(0, 500))\n            }\n        }, object: Response.ErrorListener {\n            override fun onErrorResponse(error:VolleyError) {\n                textView.setText(\"That didn't work!\")\n            }\n        })\n</code></pre>\n\n<p>Since <code>Response.Listener</code> and <code>Response.ErrorListener</code> is <a href=\"https://stackoverflow.com/questions/17913409/what-is-a-sam-type-in-java\">SAM type</a> defined in Java and Kotlin supports <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\">SAM conversions</a>, you may simplify the code in this way:</p>\n\n<pre><code>val stringRequest = StringRequest(Request.Method.GET, url,\n        Response.Listener&lt;String&gt; {\n            response -&gt;\n                // Display the first 500 characters of the response string.\n                textView.setText(\"Response is: \" + response.substring(0, 500))\n        }, Response.ErrorListener {\n            error -&gt;\n                textView.setText(\"That didn't work!\")\n        })\n\n//Or even\nval stringRequest = StringRequest(Request.Method.GET, url,\n        Response.Listener&lt;String&gt; {\n            // Display the first 500 characters of the response string.\n            textView.setText(\"Response is: \" + it.substring(0, 500))\n        }, Response.ErrorListener {\n            textView.setText(\"That didn't work!\")\n        })\n</code></pre>\n\n<p><sub>Notes: SAM conversion is not supported for interfaces defined in Kotlin at this moment.</sub></p>\n"}], "owner": {"reputation": 178, "user_id": 7866322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/akLNK.jpg?s=128&g=1", "display_name": "Ali Barani", "link": "https://stackoverflow.com/users/7866322/ali-barani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1474, "favorite_count": 1, "accepted_answer_id": 45895447, "answer_count": 1, "score": 0, "last_activity_date": 1503759633, "creation_date": 1503749588, "last_edit_date": 1503759633, "question_id": 45895222, "link": "https://stackoverflow.com/questions/45895222/error-when-creating-object-implements-interface-the-class-doesnt-have-a-constr", "title": "Error when creating object implements interface: The class doesn&#39;t have a constructor", "body": "<p>I just tried today to develop a new app in Kotlin about grabbing data from any website using Volley. I encounter a problem when creating an <code>StringRequest</code> instance and I don't know how to solve it.</p>\n\n<p>I get this error when creating object <code>Response.Listener&lt;String&gt;</code> and <code>Response.ErrorListener</code>:</p>\n\n<blockquote>\n  <p>The class doesn't have a constructor</p>\n</blockquote>\n\n<p>The code is below:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        Btn.setOnClickListener {\n            val queue = Volley.newRequestQueue(this)\n            val url = \"http://www.google.com\"\n            val stringRequest = StringRequest(Request.Method.GET, url,\n                    object:Response.Listener&lt;String&gt;() {\n                        override  fun onResponse(response:String) {\n                            // Display the first 500 characters of the response string.\n                            textView.setText(\"Response is: \" + response.substring(0, 500))\n                        }\n                    }, object:Response.ErrorListener() {\n                        override fun onErrorResponse(error:VolleyError) {\n                            textView.setText(\"That didn't work!\")\n                        }\n                    })\n            queue.add(stringRequest)\n        }\n    }\n}\n</code></pre>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["java", "json", "gson", "kotlin", "dto"], "answers": [{"tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": true, "score": 3, "last_activity_date": 1503744628, "creation_date": 1503744628, "answer_id": 45894557, "question_id": 45894396, "link": "https://stackoverflow.com/questions/45894396/serializing-with-gson-and-back-does-not-work-with-generic-types/45894557#45894557", "title": "serializing with gson and back does not work with generic types", "body": "<p>It is due to <a href=\"http://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">type erasure</a> of <a href=\"https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens\">generics</a>. You need to use <a href=\"https://google.github.io/gson/apidocs/com/google/gson/reflect/TypeToken.html\" rel=\"nofollow noreferrer\"><code>TokenType</code></a> to retrieve the type information at runtime.</p>\n\n<pre><code>val fromJson = gson1.fromJson&lt;WrapperDto&lt;Person&gt;&gt;(toJson, object: TypeToken&lt;WrapperDto&lt;Person&gt;&gt;() {}.type)\n</code></pre>\n\n<p>You may also create an extension function like this:</p>\n\n<pre><code>inline fun &lt;reified T&gt; fromJson(json: String): T = Gson().fromJson&lt;T&gt;(json, object: TypeToken&lt;T&gt;() {}.type)\n</code></pre>\n\n<p>So, you can call <code>fromJson</code> this way:</p>\n\n<pre><code>val fromJson = fromJson&lt;WrapperDto&lt;Person&gt;&gt;(toJson)\n//Or\nval fromJson: WrapperDto&lt;Person&gt; = fromJson(toJson)    //Type inferred\n</code></pre>\n"}], "owner": {"reputation": 684, "user_id": 2376747, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/QxDra.png?s=128&g=1", "display_name": "richard", "link": "https://stackoverflow.com/users/2376747/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 45894557, "answer_count": 1, "score": 2, "last_activity_date": 1503744628, "creation_date": 1503743363, "question_id": 45894396, "link": "https://stackoverflow.com/questions/45894396/serializing-with-gson-and-back-does-not-work-with-generic-types", "title": "serializing with gson and back does not work with generic types", "body": "<p>i am programming a kotlin websocket and want to send dtos transformed to json with gson. so i wrote a kind of wrapper dto that contains the real dto and some additional information about the dto, like the type of it. this is my wrapper dto</p>\n\n<pre><code>class WrapperDto &lt;T : AbstractDto&gt; {\n    var type = \"\"\n    var action = \"\"\n    var dto : T = AbstractDto() as T\n}\n</code></pre>\n\n<p>and this is one of the dtos that it can contain:</p>\n\n<pre><code>class Person : AbstractDto() {\n    var firstName = \"\"\n    var familyName = \"\"\n}\n</code></pre>\n\n<p>here for test reasons i try to tansform it to json and back again:</p>\n\n<pre><code>    val wrapperDto2 = WrapperDto&lt;Person&gt;()\n    wrapperDto2.type = Person::class.simpleName!!;\n    wrapperDto2.action = \"add\"\n    val person = Person()\n    person.firstName = \"Richard\"\n    person.familyName = \"Lederer\"\n    wrapperDto2.dto = person;\n\n    val gson1 = Gson()\n    val toJson = gson1.toJson(wrapperDto2)\n    println(\"to json: \"  + toJson)\n    val fromJson = gson1.fromJson(toJson, wrapperDto2::class.java)\n    println(\"from json: \" + fromJson)\n</code></pre>\n\n<p>the last println is never called and i get following error message:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Can not set at.richardlederer.contactmanager.dto.AbstractDto field at.richardlederer.contactmanager.dto.WrapperDto.dto to com.google.gson.internal.LinkedTreeMap\nat sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:167)\nat sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:171)\nat sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:81)\n</code></pre>\n\n<p>how can i solve this problem? </p>\n"}, {"tags": ["android", "button", "background", "kotlin"], "comments": [{"owner": {"reputation": 2385, "user_id": 3553815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RnOiZ.png?s=128&g=1", "display_name": "MHP", "link": "https://stackoverflow.com/users/3553815/mhp"}, "edited": false, "score": 0, "creation_date": 1503736617, "post_id": 45893416, "comment_id": 78746096, "body": "use bm.setBackgroundColor(R.color.green), in that case you should pass drawable"}], "answers": [{"tags": [], "owner": {"reputation": 11733, "user_id": 4586742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRXQc.jpg?s=128&g=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4586742/bob"}, "is_accepted": true, "score": 17, "last_activity_date": 1503742783, "creation_date": 1503742783, "answer_id": 45894324, "question_id": 45893416, "link": "https://stackoverflow.com/questions/45893416/i-want-to-change-background-after-clicking-button-in-android-with-kotlin/45894324#45894324", "title": "i want to change background after clicking Button in android with kotlin", "body": "<p><code>background</code> requires a <code>Drawable</code>, but you are passing a color resource.</p>\n\n<ol>\n<li>You can use <code>setBackgroundColor</code> to set a color resource:</li>\n</ol>\n\n<p><code>bm.setBackgroundColor(R.color.green)</code></p>\n\n<ol start=\"2\">\n<li><code>setBackgroundResource</code> can be used to set a drawable resource:</li>\n</ol>\n\n<p><code>bm.setBackgroundResource(R.drawable.green_resource)</code></p>\n\n<ol start=\"3\">\n<li><code>background</code> property can be used to set a drawable:</li>\n</ol>\n\n<p><code>bm.background = ContextCompat.getDrawable(context, R.drawable.green_resource)</code></p>\n"}, {"comments": [{"owner": {"reputation": 2014, "user_id": 6110783, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/hh5pY.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6110783/ben"}, "edited": false, "score": 0, "creation_date": 1614018600, "post_id": 51720985, "comment_id": 117250668, "body": "If &#39;context&#39; does not work for you, try &#39;this&#39; instead"}], "tags": [], "owner": {"reputation": 131, "user_id": 7792735, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eqLIYG6tU6Q/AAAAAAAAAAI/AAAAAAAAAvA/IZNHoW51-4U/photo.jpg?sz=128", "display_name": "Patrick Herbeuval", "link": "https://stackoverflow.com/users/7792735/patrick-herbeuval"}, "is_accepted": false, "score": 13, "last_activity_date": 1533626231, "creation_date": 1533626231, "answer_id": 51720985, "question_id": 45893416, "link": "https://stackoverflow.com/questions/45893416/i-want-to-change-background-after-clicking-button-in-android-with-kotlin/51720985#51720985", "title": "i want to change background after clicking Button in android with kotlin", "body": "<p>The current accepted answer is wrong for setBackgroundColor(). In the given example, you set the color to the resource id, but you must pass the color directly. </p>\n\n<p>This won't fail because both values are int, but you'll get weird colors.</p>\n\n<p>Instead of that, you should retrieve first the color from the resource, then set it as background. Example :</p>\n\n<pre><code>val colorValue = ContextCompat.getColor(context, R.color.green)\nbm.setBackgroundColor(colorValue)\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 8490394, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-qI0I_4I7dfA/AAAAAAAAAAI/AAAAAAAAABE/JVtDvcx-vX8/photo.jpg?sz=128", "display_name": "Nour Medhat", "link": "https://stackoverflow.com/users/8490394/nour-medhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24283, "favorite_count": 2, "accepted_answer_id": 45894324, "answer_count": 2, "score": 6, "last_activity_date": 1581761512, "creation_date": 1503735520, "last_edit_date": 1503742782, "question_id": 45893416, "link": "https://stackoverflow.com/questions/45893416/i-want-to-change-background-after-clicking-button-in-android-with-kotlin", "title": "i want to change background after clicking Button in android with kotlin", "body": "<p>I want to change background after clicking Button</p>\n\n<pre><code>   var bm : Button = messeg\n    bm . setOnClickListener {\n        bm . background = R.color.green\n    }\n</code></pre>\n\n<p>Error Log:</p>\n\n<blockquote>\n  <p>Error:(35, 31) Type mismatch: inferred type is Int but Drawable! was\n  expected Error:Execution failed for task ':app:compileDebugKotlin'.</p>\n  \n  <blockquote>\n    <p>Compilation error. See log for more details</p>\n  </blockquote>\n</blockquote>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 433, "user_id": 6364580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57baf85b3c67c3aac1a50dd7978a16fb?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Kutzler", "link": "https://stackoverflow.com/users/6364580/tony-kutzler"}, "edited": false, "score": 0, "creation_date": 1503723388, "post_id": 45891407, "comment_id": 78743274, "body": "What is the api level of the device?"}, {"owner": {"reputation": 313, "user_id": 5893006, "user_type": "registered", "profile_image": "https://graph.facebook.com/173248923046752/picture?type=large", "display_name": "Mohamed Nagy Mostafa", "link": "https://stackoverflow.com/users/5893006/mohamed-nagy-mostafa"}, "reply_to_user": {"reputation": 433, "user_id": 6364580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57baf85b3c67c3aac1a50dd7978a16fb?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Kutzler", "link": "https://stackoverflow.com/users/6364580/tony-kutzler"}, "edited": false, "score": 0, "creation_date": 1503738055, "post_id": 45891407, "comment_id": 78746402, "body": "@TonyKutzler min api 21"}, {"owner": {"reputation": 433, "user_id": 6364580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57baf85b3c67c3aac1a50dd7978a16fb?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Kutzler", "link": "https://stackoverflow.com/users/6364580/tony-kutzler"}, "edited": false, "score": 0, "creation_date": 1503748238, "post_id": 45891407, "comment_id": 78748935, "body": "I mean what is it on the device/emulator your testing with?"}, {"owner": {"reputation": 313, "user_id": 5893006, "user_type": "registered", "profile_image": "https://graph.facebook.com/173248923046752/picture?type=large", "display_name": "Mohamed Nagy Mostafa", "link": "https://stackoverflow.com/users/5893006/mohamed-nagy-mostafa"}, "reply_to_user": {"reputation": 433, "user_id": 6364580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57baf85b3c67c3aac1a50dd7978a16fb?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Kutzler", "link": "https://stackoverflow.com/users/6364580/tony-kutzler"}, "edited": false, "score": 0, "creation_date": 1503753993, "post_id": 45891407, "comment_id": 78750584, "body": "api ( 21-22-23)"}], "owner": {"reputation": 313, "user_id": 5893006, "user_type": "registered", "profile_image": "https://graph.facebook.com/173248923046752/picture?type=large", "display_name": "Mohamed Nagy Mostafa", "link": "https://stackoverflow.com/users/5893006/mohamed-nagy-mostafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1503774280, "creation_date": 1503714757, "last_edit_date": 1503774280, "question_id": 45891407, "link": "https://stackoverflow.com/questions/45891407/android-network-configuration", "title": "Android network configuration", "body": "<p>I am trying to set my network configuration. The problem is that after I set the properties of configuration and call <code>addNetwork()</code> method, the return value (configuration id) is <code>-1</code>. I do not know what's wrong with my code. I have used the same code in another project and it works correctly.</p>\n\n<p>These are the permissions I used:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.CHANGE_WIFI_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.CHANGE_NETWORK_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n\n<p>the full code</p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    val wifiManager = activity.getSystemService(Context.WIFI_SERVICE) as WifiManager\n    val networkAccessPoint = NetworkAccessPoint.getInstance(wifiManager)\n\n    networkAccessPoint.generateConfigurationAccessPoint()\n\n    return inflater!!.inflate(R.layout.fragment_main, container, false);\n}\n</code></pre>\n\n<p>NetwockAccessPoint class</p>\n\n<pre><code>public void generateConfigurationAccessPoint(){\n\n    WifiConfiguration wifiConfiguration = getWifiConfiguration();\n    String SSID = getSSID();\n    wifiConfiguration.SSID = String.format(\"\\\"%s\\\"\", SSID);\n    wifiConfiguration.preSharedKey = \"\\\"password\\\"\";\n    wifiConfiguration.status = WifiConfiguration.Status.ENABLED;\n    wifiConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);\n    wifiConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);\n    wifiConfiguration.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);\n    wifiConfiguration.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);\n    wifiConfiguration.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);\n    wifiConfiguration.allowedProtocols.set(WifiConfiguration.Protocol.RSN);\n\n    int networkConfigurationId = mWifiManager.addNetwork(wifiConfiguration);\n\n    mWifiManager.enableNetwork(networkConfigurationId, true);\n    setWifiConfiguration(wifiConfiguration);\n    setWifiAPEnabled(wifiConfiguration, true);\n}\n</code></pre>\n\n<p>The code doesn't throw any exceptions.</p>\n\n<p><strong>SOLVED</strong></p>\n\n<p>I got the error what i did ... i wanted to create access point with hotspot so that i do not need <code>addNetwork() enableNetwork() setConfiguration()</code>  .... and i had got value -1 wifi was off\n(As i mentioned before i wanted AP for hotspot).</p>\n"}, {"tags": ["java", "android-studio", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 2391, "user_id": 2525454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/384a7ef8f20025698e83b44c60025733?s=128&d=identicon&r=PG", "display_name": "BamaPookie", "link": "https://stackoverflow.com/users/2525454/bamapookie"}, "edited": false, "score": 0, "creation_date": 1503720019, "post_id": 45891317, "comment_id": 78742775, "body": "Not sure if this is it or not, but you have the wrong directory marked as the Java Source.  Note the blue &#39;src&#39; directory in your screenshot.  The java directory two levels down should be your java source.  This can be edited in the project settings or by right clicking the src directory and unmarking it as source, then repeating for the java directory."}, {"owner": {"reputation": 1861, "user_id": 571227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oFDE2.png?s=128&g=1", "display_name": "haxpor", "link": "https://stackoverflow.com/users/571227/haxpor"}, "reply_to_user": {"reputation": 2391, "user_id": 2525454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/384a7ef8f20025698e83b44c60025733?s=128&d=identicon&r=PG", "display_name": "BamaPookie", "link": "https://stackoverflow.com/users/2525454/bamapookie"}, "edited": false, "score": 0, "creation_date": 1503720387, "post_id": 45891317, "comment_id": 78742818, "body": "Thanks. I tried as you said, still the same. I tried marking the directory that hold <code>Main.kt</code> file as source root, then run again, still didn&#39;t fix. Also tried creating <code>src&#47;main&#47;java</code> directory then mark it as source root, still didn&#39;t fix. Both produce the same error."}, {"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 1, "creation_date": 1503750390, "post_id": 45891317, "comment_id": 78749506, "body": "Maybe it is not a problem of your config, but AndroidStudio problem. I reproduce your error in AndroidStudio, but when import the same project into Intellij idea the app runs normally."}, {"owner": {"reputation": 1861, "user_id": 571227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oFDE2.png?s=128&g=1", "display_name": "haxpor", "link": "https://stackoverflow.com/users/571227/haxpor"}, "reply_to_user": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "edited": false, "score": 1, "creation_date": 1503750795, "post_id": 45891317, "comment_id": 78749633, "body": "@aristotll thanks for testing it out! Appreciate it. I might try to report a bug (not sure I should or not) if I cannot find a way."}, {"owner": {"reputation": 510, "user_id": 932181, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c7d79a63b65878a1ef82a8781af93e27?s=128&d=identicon&r=PG", "display_name": "Tony", "link": "https://stackoverflow.com/users/932181/tony"}, "edited": false, "score": 0, "creation_date": 1516964802, "post_id": 45891317, "comment_id": 83913065, "body": "I have the same problem.The problem is that, the kotlin source code are build into build/classes/kotlin directory. but when you click run, it will find the class in build/classes/java directory."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 4972103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZTQca.jpg?s=128&g=1", "display_name": "seekting zhang", "link": "https://stackoverflow.com/users/4972103/seekting-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1539941397, "last_edit_date": 1539941397, "creation_date": 1526543335, "answer_id": 50386047, "question_id": 45891317, "link": "https://stackoverflow.com/questions/45891317/classnotfoundexception-error-for-kotlin-non-android-project-on-android-studio/50386047#50386047", "title": "ClassNotFoundException error for Kotlin (non-android) project on Android Studio", "body": "<p>I also met this problem and solved it.</p>\n\n<p>Add <code>runtimeClasspath files(\"build/classes/kotlin/main\")</code> in build.gradle</p>\n\n<pre><code>dependencies {\n    // This dependency is found on compile classpath of this component and consumers.\n    compile 'com.google.guava:guava:23.0'\n\n    // Use JUnit test framework\n    testCompile 'junit:junit:4.12'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version\"\n    compile group: 'dom4j', name: 'dom4j', version: '1.6.1'\n    runtimeClasspath files(\"build/classes/kotlin/main\")\n}\n</code></pre>\n\n<p>because Android Studio doesn't find classes in <code>build/classes/kotlin/main</code>. Add <code>runtimeClasspath</code> and it works!</p>\n"}], "owner": {"reputation": 1861, "user_id": 571227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oFDE2.png?s=128&g=1", "display_name": "haxpor", "link": "https://stackoverflow.com/users/571227/haxpor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4286, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1539941397, "creation_date": 1503713597, "last_edit_date": 1503753821, "question_id": 45891317, "link": "https://stackoverflow.com/questions/45891317/classnotfoundexception-error-for-kotlin-non-android-project-on-android-studio", "title": "ClassNotFoundException error for Kotlin (non-android) project on Android Studio", "body": "<p>I attempted to create a normal Kotlin project (non-android, just desktop/command line project) with Android Studio 2.3.3.</p>\n\n<p>I followed the steps as laid out <a href=\"https://stackoverflow.com/a/29267962/571227\">here</a> but with different <code>build.gradle</code> content whose content I shared <a href=\"https://gist.github.com/haxpor/0a5dbb0d793015a1ab2a9c5cc4db2dd1\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Actually that content of <code>build.gradle</code> I copied from <code>build.gradle</code> file after generating a new project with IntelliJ Community Edition (2017.2).</p>\n\n<p>Then I create a configuration to be able to run it on desktop with proper set up like Main Class, Working directory, and Use classpath of module. You can see in the image below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HsHPS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HsHPS.png\" alt=\"enter image description here\"></a></p>\n\n<p>and following is the project file structure I have</p>\n\n<p><a href=\"https://i.stack.imgur.com/sB1pO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sB1pO.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then I sync the project, it succeeds. But error kicks in when I try to <strong>Run</strong> the project. I got the following error.</p>\n\n<pre><code>    \"/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/bin/java\" -Didea.launcher.port=7534 \"-Didea.launcher.bin.path=/Applications/Android Studio.app/Contents/bin\" -Dfile.encoding=UTF-8 -classpath \"/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/charsets.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/ext/cldrdata.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/ext/jaccess.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/ext/localedata.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/ext/nashorn.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/ext/sunec.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/jce.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/jsse.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/management-agent.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/resources.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/rt.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/lib/dt.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/lib/jconsole.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/lib/sa-jdi.jar:/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/lib/tools.jar:/Users/haxpor/.gradle/caches/modules-2/files-2.1/org.jetbrains/annotations/13.0/919f0dfe192fb4e063e7dacadee7f8bb9a2672a9/annotations-13.0.jar:/Users/haxpor/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jre7/1.1.4-2/272a21c30432c943d618008fbbd34762eb0d6c8a/kotlin-stdlib-jre7-1.1.4-2.jar:/Users/haxpor/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib/1.1.4-2/fec983b2608a8a91a1b87dba18d247d692cf6b51/kotlin-stdlib-1.1.4-2.jar:/Users/haxpor/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jre8/1.1.4-2/168cc3f45c307edda6c867dd0635a7d451257551/kotlin-stdlib-jre8-1.1.4-2.jar:/Applications/Android Studio.app/Contents/lib/idea_rt.jar\" com.intellij.rt.execution.application.AppMain io.wasin.testjavaapp.Main\nException in thread \"main\" java.lang.ClassNotFoundException: io.wasin.testjavaapp.Main\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:264)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:123)\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>I saw the classpath parameter as supplied in above <code>/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/bin/java</code> has no related directory to my project. I don't know how to add classpath directory via gradle despite I set up it in configurations already.</p>\n\n<p>How can I solve this problem?</p>\n\n<p><strong>Update</strong>:</p>\n\n<p>The following is my <code>Main.kt</code> code. It's just for testing purpose. So just printing something out.</p>\n\n<pre><code>package io.wasin.testjavaapp\n\nobject Main {\n    @JvmStatic fun main(arg: Array&lt;String&gt;) {\n        println(\"Hello world\")\n    }\n}\n</code></pre>\n\n<p>Also I updated <code>build.gradle</code> for Kotlin version to match the version of Kotlin plugin on Android Studio. It's now <code>ext.kotlin_version = '1.1.4-2'</code>. Although still doesn't solve the problem.</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>I checked inside <code>build</code> directory at the same level of <code>src</code> directory. There are no <code>.class</code> or <code>intermediates</code> files generated/built over there, only <code>kotlin-build/caches/version.txt</code> and that's it. No other files. So the problem might be due to the source files are not compiled at all?</p>\n\n<p><strong>Update 3</strong></p>\n\n<p>I tried creating a new module to see if it's the root cause or not. Also created <code>assets</code> folder just to act as Working Directory, rearranged source folder again to be as following.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aTT0x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aTT0x.png\" alt=\"enter image description here\"></a></p>\n\n<p>We now have 2 modules.</p>\n\n<ol>\n<li><code>testJavaApp</code> - root one</li>\n<li><code>desktop</code> - consists of <code>Main.kt</code> and used as desktop executable</li>\n</ol>\n\n<p><code>testJavaApp</code> has the following code for <code>build.gradle</code></p>\n\n<pre><code>group 'io.wasin'\nversion '1.0-SNAPSHOT'\n\n// Top-level build file where you can add configuration options common to \nall sub-projects/modules.\nbuildscript {\n    ext.kotlin_version = '1.1.4-2'\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.3'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>also <code>desktop</code> module has following code for <code>build.gradle</code></p>\n\n<pre><code>apply plugin: 'kotlin'\n\nsourceSets.main.java.srcDirs = [ \"src/\" ]\nproject.ext.mainClassName = \"io.wasin.testjavaapp.Main\"\nproject.ext.assetsDir = new File(\"../assets\");\n\ndependencies {\n    testCompile group: 'junit', name: 'junit', version: '4.12'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\nrepositories {\n    mavenCentral()\n}\n\ntask run(dependsOn: classes, type: JavaExec) {\n    main = project.mainClassName\n    classpath = sourceSets.main.runtimeClasspath\n    standardInput = System.in\n    workingDir = project.assetsDir\n    ignoreExitValue = true\n}\n</code></pre>\n\n<p>Unfortunately, it still <strong>didn't</strong> work and it's the same error that shown up.</p>\n\n<p><strong>Update 4</strong></p>\n\n<p>@aristotll provided info in a comment that he tested with Android Studio and faced the same problem, but <strong>not</strong> with IntelliJ. He said it might be Android Studio bug. So I guess, I would try a few more times then decide whether it's solid enough to report as a bug. Thanks for taking time to testing out.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2918, "user_id": 984724, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T2JaK.png?s=128&g=1", "display_name": "Dave Thomas", "link": "https://stackoverflow.com/users/984724/dave-thomas"}, "edited": false, "score": 0, "creation_date": 1503709582, "post_id": 45891025, "comment_id": 78741533, "body": "Thanks! ;) You got it! Turns out I was using BigDecimal wrong as well. I updated my question so BigDecimal was used correctly. But left incorrectness of original question. You can edit your answer to reflect so people don&#39;t copy broken code.  The <code>setScale</code> function actually returns a new BigDecimal at the asked scale.   <code>toDouble</code> was the key! You&#39;re the boss."}, {"owner": {"reputation": 2918, "user_id": 984724, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T2JaK.png?s=128&g=1", "display_name": "Dave Thomas", "link": "https://stackoverflow.com/users/984724/dave-thomas"}, "edited": false, "score": 0, "creation_date": 1503959156, "post_id": 45891025, "comment_id": 78814962, "body": "What is your opinion on editing your answer to reflect the correct use of the method. As is that method will not round because d.setScale does not mutate the original object."}, {"owner": {"reputation": 2918, "user_id": 984724, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T2JaK.png?s=128&g=1", "display_name": "Dave Thomas", "link": "https://stackoverflow.com/users/984724/dave-thomas"}, "edited": false, "score": 0, "creation_date": 1503959370, "post_id": 45891025, "comment_id": 78815011, "body": "I did try to put an edit through but was rejected by the community: <a href=\"https://stackoverflow.com/review/suggested-edits/17149135\">stackoverflow.com/review/suggested-edits/17149135</a>   Don&#39;t mind re-accepting this answer if I can get a good reason why not. Or more in my favor of my opinion, if the incorrect parts of the code not related to the question are changed."}, {"owner": {"reputation": 2899, "user_id": 2539472, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0475d27157bbb03085abda1ac6446b53?s=128&d=identicon&r=PG", "display_name": "homerman", "link": "https://stackoverflow.com/users/2539472/homerman"}, "reply_to_user": {"reputation": 2918, "user_id": 984724, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T2JaK.png?s=128&g=1", "display_name": "Dave Thomas", "link": "https://stackoverflow.com/users/984724/dave-thomas"}, "edited": false, "score": 1, "creation_date": 1503971629, "post_id": 45891025, "comment_id": 78817771, "body": "@DaveThomas agreed. updated. (also, good eye on the previous mis-use <code>setScale</code>)"}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 2, "creation_date": 1511747042, "post_id": 45891025, "comment_id": 81961643, "body": "This is not applicable to Kotlin/JS"}], "tags": [], "owner": {"reputation": 2899, "user_id": 2539472, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0475d27157bbb03085abda1ac6446b53?s=128&d=identicon&r=PG", "display_name": "homerman", "link": "https://stackoverflow.com/users/2539472/homerman"}, "is_accepted": true, "score": 18, "last_activity_date": 1503971566, "last_edit_date": 1503971566, "creation_date": 1503709338, "answer_id": 45891025, "question_id": 45890984, "link": "https://stackoverflow.com/questions/45890984/bigdecimal-doublevalue-does-not-exist/45891025#45891025", "title": "BigDecimal.doubleValue does not exist?", "body": "<p>can you not use <code>toDouble()</code> instead, ie:</p>\n\n<pre><code>fun Double.roundTo2DecimalPlaces() =\n    BigDecimal(this).setScale(2, BigDecimal.ROUND_HALF_UP).toDouble()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1536, "user_id": 113012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ba5ae7f8877bdd8be04b09c7840ade4?s=128&d=identicon&r=PG", "display_name": "Simon Featherstone", "link": "https://stackoverflow.com/users/113012/simon-featherstone"}, "is_accepted": false, "score": 1, "last_activity_date": 1518536466, "creation_date": 1518536466, "answer_id": 48770444, "question_id": 45890984, "link": "https://stackoverflow.com/questions/45890984/bigdecimal-doublevalue-does-not-exist/48770444#48770444", "title": "BigDecimal.doubleValue does not exist?", "body": "<p>I found this question looking how to replace Javascript `<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed\" rel=\"nofollow noreferrer\">toFixed(n)</a>'</p>\n\n<pre><code>fun Double.toFixed(s : Int): Double {\n    if (s==0) return round(this)\n    val power = (10.0).pow(s)\n    return round(this * power)/power\n}\n</code></pre>\n\n<p>This method is x20 faster than converting to a <code>BigDecimal</code> but suffers from floating point inaccuracy in extreme examples. </p>\n\n<pre><code>Assert.assertEquals(4238764872.745398676, 4238764872.745398675983467.toFixed(9), 0.00000000001)\n</code></pre>\n\n<p>fails for the above, but succeeds for the accepted answer (changing the scale to a parameter) </p>\n"}], "owner": {"reputation": 2918, "user_id": 984724, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T2JaK.png?s=128&g=1", "display_name": "Dave Thomas", "link": "https://stackoverflow.com/users/984724/dave-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4742, "favorite_count": 0, "accepted_answer_id": 45891025, "answer_count": 2, "score": 10, "last_activity_date": 1526693410, "creation_date": 1503708811, "last_edit_date": 1526686280, "question_id": 45890984, "link": "https://stackoverflow.com/questions/45890984/bigdecimal-doublevalue-does-not-exist", "title": "BigDecimal.doubleValue does not exist?", "body": "<p>I am trying to find a simple way to round a double to two decimal places. I am using a BigDecimal to do the trick but noticed that the function <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#doubleValue--\" rel=\"noreferrer\"><code>doubleValue</code></a> of the java.math.BigDecimal class does not exist.</p>\n\n<p>The following function: </p>\n\n<pre><code>fun Double.roundTo2DecimalPlaces() =\n    BigDecimal(this).setScale(2, BigDecimal.ROUND_HALF_UP).doubleValue()    \n</code></pre>\n\n<p>Is giving me this compile error:</p>\n\n<pre><code>:compileKotlin\nUsing kotlin incremental compilation\nw: The '-d' option with a directory destination is ignored because '-module' is specified\ne: -{FilePathAndNameWereHere}-: (20, 14): Unresolved reference: doubleValue\n:compileKotlin FAILED\n</code></pre>\n\n<p>Kotlin version is 1.1.1</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 887, "user_id": 4428658, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/596cf8b62050334aa029d06d0d8948df?s=128&d=identicon&r=PG&f=1", "display_name": "UncleBob", "link": "https://stackoverflow.com/users/4428658/unclebob"}, "edited": false, "score": 0, "creation_date": 1580462044, "post_id": 45888449, "comment_id": 106112846, "body": "This works, but fold is less efficient than reduce. Use fold if a) your starting value is not contained in the collection, or b) the operation involves a type transformation (i.e. the output of the fold is of a different type than the generic type of the collection)."}], "tags": [], "owner": {"reputation": 3827, "user_id": 743716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Okvki.png?s=128&g=1", "display_name": "Rafal G.", "link": "https://stackoverflow.com/users/743716/rafal-g"}, "is_accepted": false, "score": 4, "last_activity_date": 1503690889, "last_edit_date": 1503690889, "creation_date": 1503690264, "answer_id": 45888449, "question_id": 45888370, "link": "https://stackoverflow.com/questions/45888370/product-of-a-list-or-array-in-kotlin/45888449#45888449", "title": "Product of a List or Array in Kotlin", "body": "<p>Use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/fold.html\" rel=\"nofollow noreferrer\"><code>fold</code></a> function</p>\n\n<pre><code>val total = listOf(1, 2, 3, 4, 5).fold(1, { total, next -&gt; total * next })\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1503690937, "post_id": 45888466, "comment_id": 78736626, "body": "Kotlin&#39;s code is almost identical to Python&#39;s. Why am I not surprised?"}, {"owner": {"reputation": 11733, "user_id": 4586742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRXQc.jpg?s=128&g=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4586742/bob"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1503691483, "post_id": 45888466, "comment_id": 78736823, "body": "I suppose <code>reduce</code> (or <code>filter</code>, <code>map</code>, <code>fold</code>) are standard names in functional programming <a href=\"https://martinfowler.com/articles/collection-pipeline/reduce.html\" rel=\"nofollow noreferrer\">collection pipelines</a>. And all the languages (python, kotlin, clojure...) use the same names and patterns, which of course is good to avoid confusions."}, {"owner": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "edited": false, "score": 0, "creation_date": 1585109933, "post_id": 45888466, "comment_id": 107646686, "body": "Late answer, but I feel reduce is a better candidate for this since we don&#39;t want a default value or seed value to begin with."}], "tags": [], "owner": {"reputation": 11733, "user_id": 4586742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRXQc.jpg?s=128&g=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4586742/bob"}, "is_accepted": true, "score": 16, "last_activity_date": 1503690339, "creation_date": 1503690339, "answer_id": 45888466, "question_id": 45888370, "link": "https://stackoverflow.com/questions/45888370/product-of-a-list-or-array-in-kotlin/45888466#45888466", "title": "Product of a List or Array in Kotlin", "body": "<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/reduce.html\" rel=\"noreferrer\"><code>reduce</code></a> in Kotlin.</p>\n\n<p>From the doc:</p>\n\n<blockquote>\n  <p>Accumulates value starting with the first element and applying\n  operation from left to right to current accumulator value and each\n  element.</p>\n</blockquote>\n\n<pre><code>val list = listOf&lt;Int&gt;(1, 2, 3, 4, 5, 6)\n\nval array = intArrayOf(1, 2, 3, 4, 5, 6)\n\nlist.reduce { acc, i -&gt;  acc * i }  // returns 720\n\narray.reduce { acc, i -&gt; acc * i }  // returns 720\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 3567101, "user_type": "registered", "profile_image": "https://graph.facebook.com/717094896/picture?type=large", "display_name": "HyunJin", "link": "https://stackoverflow.com/users/3567101/hyunjin"}, "is_accepted": false, "score": 2, "last_activity_date": 1503958872, "creation_date": 1503958872, "answer_id": 45928115, "question_id": 45888370, "link": "https://stackoverflow.com/questions/45888370/product-of-a-list-or-array-in-kotlin/45928115#45928115", "title": "Product of a List or Array in Kotlin", "body": "<p>Hope this helps:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;){\n   val array = intArrayOf(1, 2, 3, 4, 5, 6)\n   val product = array.fold(1){acc, i -&gt; acc * i}\n   println(\"The result is: $product\")\n}\n</code></pre>\n\n<p>This will output the product of the array.</p>\n"}, {"tags": [], "owner": {"reputation": 1982, "user_id": 1041282, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d3f79892438a80372f016d63c8fac39f?s=128&d=identicon&r=PG", "display_name": "uzilan", "link": "https://stackoverflow.com/users/1041282/uzilan"}, "is_accepted": false, "score": 9, "last_activity_date": 1529179347, "creation_date": 1529179347, "answer_id": 50891338, "question_id": 45888370, "link": "https://stackoverflow.com/questions/45888370/product-of-a-list-or-array-in-kotlin/50891338#50891338", "title": "Product of a List or Array in Kotlin", "body": "<p>An even simpler solution might be: <code>(1..6).reduce(Int::times)</code></p>\n"}], "owner": {"reputation": 1165, "user_id": 7355128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JoNgX.png?s=128&g=1", "display_name": "Andre Breton", "link": "https://stackoverflow.com/users/7355128/andre-breton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3449, "favorite_count": 0, "accepted_answer_id": 45888466, "answer_count": 4, "score": 8, "last_activity_date": 1529179347, "creation_date": 1503689853, "last_edit_date": 1503691024, "question_id": 45888370, "link": "https://stackoverflow.com/questions/45888370/product-of-a-list-or-array-in-kotlin", "title": "Product of a List or Array in Kotlin", "body": "<p>I'm trying to find a way to get the product of a List or Array without using  \"repeat\" or any loop on Kotlin but after some research I couldn't find anything similar.</p>\n\n<p>Something like this in Python would be:</p>\n\n<pre><code>&gt;&gt;&gt; reduce(lambda x, y: x*y, [1,2,3,4,5,6])\noutput: 720\n</code></pre>\n"}, {"tags": ["java", "android", "jvm", "kotlin", "kotlinc"], "answers": [{"comments": [{"owner": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "edited": false, "score": 0, "creation_date": 1504525571, "post_id": 46018040, "comment_id": 79032756, "body": "Is there any way to use the JSR 223 API to do this? I&#39;m not too familiar with it"}, {"owner": {"reputation": 1904, "user_id": 1545952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMD46.jpg?s=128&g=1", "display_name": "Xvolks", "link": "https://stackoverflow.com/users/1545952/xvolks"}, "reply_to_user": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "edited": false, "score": 0, "creation_date": 1504525851, "post_id": 46018040, "comment_id": 79032913, "body": "JSR 223 will just let you add scripting ability to your application, it will be easier to tune your application, but it won&#39;t help you with RAM drives or compiling in RAM."}, {"owner": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "edited": false, "score": 0, "creation_date": 1504526257, "post_id": 46018040, "comment_id": 79033181, "body": "Thats&#39;s what the REPL runs with, no? Possible to use that to define each type that I compile one by one and then just test that way? I&#39;ve been through the kotlin source but I can&#39;t really figure out how to run the REPL programatically"}, {"owner": {"reputation": 1904, "user_id": 1545952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMD46.jpg?s=128&g=1", "display_name": "Xvolks", "link": "https://stackoverflow.com/users/1545952/xvolks"}, "reply_to_user": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "edited": false, "score": 0, "creation_date": 1504526538, "post_id": 46018040, "comment_id": 79033332, "body": "IMHO: The REPL is the command line utility. One the other hands the JSR 233 allows you to run pre-written scripts inside your application without the REPL. I&#39;ve already used it to run Beanshell and Jython scripts inside applications, this helps creating user defined behaviors for example."}, {"owner": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "edited": false, "score": 0, "creation_date": 1504527111, "post_id": 46018040, "comment_id": 79033648, "body": "regardless of 223 I thing that figuring out the REPL could be much easier than manual compile &amp; classloading. I&#39;ll be testing with strings at the very least but that&#39;s not hard since I still have the classes in IR. Couldn&#39;t find anything about it anywhere though so it might take some work"}], "tags": [], "owner": {"reputation": 1904, "user_id": 1545952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMD46.jpg?s=128&g=1", "display_name": "Xvolks", "link": "https://stackoverflow.com/users/1545952/xvolks"}, "is_accepted": false, "score": 0, "last_activity_date": 1504385192, "creation_date": 1504385192, "answer_id": 46018040, "question_id": 45888068, "link": "https://stackoverflow.com/questions/45888068/how-do-i-run-tests-compiling-a-kotlin-file-in-memory-and-check-the-result/46018040#46018040", "title": "How do I run tests compiling a kotlin file in memory and check the result?", "body": "<p>Reading the source of the <code>K2JVMCompiler</code> class, it seems that the compiler only supports compilation for files. Digging deeper, it seems overcomplicated to fake the entries of <code>org.jetbrains.kotlin.codegen.KotlinCodegenFacade</code> static method <code>compileCorrectFiles</code>.</p>\n\n<p>Your best guess it to use a file system to do this. A temporary RAM disk may suit your needs. (This is built-in macOS <a href=\"https://www.tekrevue.com/tip/how-to-create-a-4gbs-ram-disk-in-mac-os-x/\" rel=\"nofollow noreferrer\">for example</a>)</p>\n"}, {"comments": [{"owner": {"reputation": 13177, "user_id": 411965, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/UVUN2.jpg?s=128&g=1", "display_name": "oshai", "link": "https://stackoverflow.com/users/411965/oshai"}, "edited": false, "score": 0, "creation_date": 1540164595, "post_id": 46266592, "comment_id": 92750953, "body": "I tried the code but 3 things I am missing: <code>MockClasswriter</code>,<code>codegenOutputFile</code> and <code>compileOutputDir</code>"}], "tags": [], "owner": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "is_accepted": true, "score": 5, "last_activity_date": 1505667605, "creation_date": 1505667605, "answer_id": 46266592, "question_id": 45888068, "link": "https://stackoverflow.com/questions/45888068/how-do-i-run-tests-compiling-a-kotlin-file-in-memory-and-check-the-result/46266592#46266592", "title": "How do I run tests compiling a kotlin file in memory and check the result?", "body": "<p>I found the easiest way to do it is to use something like the code in the original question and use <code>java.io.tmpdir</code>. Here's a re-usable solution:</p>\n\n<p>Add the kotlin compiler as a test dependency:</p>\n\n<pre><code>testCompile group: 'org.jetbrains.kotlin', name: 'kotlin-compiler', version: \"$kotlin_version\"\n</code></pre>\n\n<p>Wrapper for the compiler:</p>\n\n<pre><code>object JvmCompile {\n\n  fun exe(input: File, output: File): Boolean = K2JVMCompiler().run {\n    val args = K2JVMCompilerArguments().apply {\n      freeArgs = listOf(input.absolutePath)\n      loadBuiltInsFromDependencies = true\n      destination = output.absolutePath\n      classpath = System.getProperty(\"java.class.path\")\n          .split(System.getProperty(\"path.separator\"))\n          .filter {\n            it.asFile().exists() &amp;&amp; it.asFile().canRead()\n          }.joinToString(\":\")\n      noStdlib = true\n      noReflect = true\n      skipRuntimeVersionCheck = true\n      reportPerf = true\n    }\n    output.deleteOnExit()\n    execImpl(\n        PrintingMessageCollector(\n            System.out,\n            MessageRenderer.WITHOUT_PATHS, true),\n        Services.EMPTY,\n        args)\n  }.code == 0\n\n}\n</code></pre>\n\n<p>Classloader for creating objects from the compiled classes:</p>\n\n<pre><code>class Initializer(private val root: File) {\n\n  val loader = URLClassLoader(\n      listOf(root.toURI().toURL()).toTypedArray(),\n      this::class.java.classLoader)\n\n  @Suppress(\"UNCHECKED_CAST\") \n  inline fun &lt;reified T&gt; loadCompiledObject(clazzName: String): T? \n      = loader.loadClass(clazzName).kotlin.objectInstance as T\n\n  @Suppress(\"UNCHECKED_CAST\") \n  inline fun &lt;reified T&gt; createInstance(clazzName: String): T? \n      = loader.loadClass(clazzName).kotlin.createInstance() as T\n\n}\n</code></pre>\n\n<p>Example test case:</p>\n\n<p>First make a kotlin source file</p>\n\n<pre><code>MockClasswriter(\"\"\"\n    |\n    |package com.test\n    |\n    |class Example : Consumer&lt;String&gt; {\n    |  override fun accept(value: String) {\n    |    println(\"found: '$\\value'\")\n    |  }\n    |}\n    \"\"\".trimMargin(\"|\"))\n    .writeToFile(codegenOutputFile)\n</code></pre>\n\n<p>Make sure it compiles:</p>\n\n<pre><code>assertTrue(JvmCompile.exe(codegenOutputFile, compileOutputDir))\n</code></pre>\n\n<p>Load the class as interface instance</p>\n\n<pre><code>Initializer(compileOutputDir)\n      .createInstance&lt;Consumer&lt;String&gt;&gt;(\"com.test.Example\")\n      ?.accept(\"Hello, world!\")\n</code></pre>\n\n<p>The output will be as expected: <code>found: 'Hello, world!'</code></p>\n"}], "owner": {"reputation": 1085, "user_id": 4012979, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/---qkN46xdTA/AAAAAAAAAAI/AAAAAAAAAeI/x3SUiBz1BPQ/photo.jpg?sz=128", "display_name": "Preston Garno", "link": "https://stackoverflow.com/users/4012979/preston-garno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1498, "favorite_count": 2, "accepted_answer_id": 46266592, "answer_count": 2, "score": 10, "last_activity_date": 1505667605, "creation_date": 1503688327, "question_id": 45888068, "link": "https://stackoverflow.com/questions/45888068/how-do-i-run-tests-compiling-a-kotlin-file-in-memory-and-check-the-result", "title": "How do I run tests compiling a kotlin file in memory and check the result?", "body": "<p>So far I have </p>\n\n<pre><code>import org.jetbrains.kotlin.cli.jvm.K2JVMCompiler\n\n  MyProjectCompiler.initialize(\"SampleKtFileOutput\")\n    .packageName(\"com.test.sample\")\n    .compile(File(someFile.path))\n    .result { ktSource: String -&gt; K2JVMCompiler()\n       .exec(System.out, /** arguments here?*/) }\n</code></pre>\n\n<p>This manually starts the compiler, but I would like to compile the resulting String from the first compiler (<code>MyProjectCompiler</code> which generates kotlin source) in-memory and check the result without writing to a file. </p>\n\n<p>I would like to include everything on the current classpath if possible.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 7, "creation_date": 1503671849, "post_id": 45883784, "comment_id": 78726373, "body": "Or even just <code>it.myField to it.myOtherField</code>."}, {"owner": {"reputation": 2346, "user_id": 2329708, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5Du22.jpg?s=128&g=1", "display_name": "Nate Jenson", "link": "https://stackoverflow.com/users/2329708/nate-jenson"}, "edited": false, "score": 0, "creation_date": 1503671927, "post_id": 45883784, "comment_id": 78726428, "body": "Thanks, but how about if I need to compare four, five, or more properties?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 14, "creation_date": 1503672689, "post_id": 45883784, "comment_id": 78726951, "body": "And to compare more values, you can use <code>.distinctBy { listOf(...) }</code>"}, {"owner": {"reputation": 7061, "user_id": 4727432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca061f55238f6dba1e1815db6a48b1f6?s=128&d=identicon&r=PG", "display_name": "hluhovskyi", "link": "https://stackoverflow.com/users/4727432/hluhovskyi"}, "edited": false, "score": 2, "creation_date": 1503674217, "post_id": 45883784, "comment_id": 78727864, "body": "There is also another non-idiomatic way - override <code>equals</code> and <code>hashCode</code> and compare only few fields which are needed to determine duplicate and then use simple <code>distinct()</code>"}, {"owner": {"reputation": 723, "user_id": 2201814, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/nD1Hs.jpg?s=128&g=1", "display_name": "MHSFisher", "link": "https://stackoverflow.com/users/2201814/mhsfisher"}, "edited": false, "score": 0, "creation_date": 1546256466, "post_id": 45883784, "comment_id": 94811302, "body": "is there any &quot;in place&quot; idea for <code>MutableList</code> to distinct by ?"}], "tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": true, "score": 55, "last_activity_date": 1503671696, "creation_date": 1503671696, "answer_id": 45883784, "question_id": 45883719, "link": "https://stackoverflow.com/questions/45883719/how-can-i-remove-duplicate-objects-with-distinctby-from-a-list-in-kotlin/45883784#45883784", "title": "How can I remove duplicate objects with distinctBy from a list in Kotlin?", "body": "<p>You can create a pair:</p>\n\n<pre><code>myObjectList.distinctBy { Pair(it.myField, it.myOtherField) }\n</code></pre>\n\n<p>The <code>distinctBy</code> will use equality of <code>Pair</code> to determine uniqueness.</p>\n"}, {"tags": [], "owner": {"reputation": 11733, "user_id": 4586742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRXQc.jpg?s=128&g=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4586742/bob"}, "is_accepted": false, "score": 13, "last_activity_date": 1503673626, "last_edit_date": 1503673626, "creation_date": 1503673017, "answer_id": 45884217, "question_id": 45883719, "link": "https://stackoverflow.com/questions/45883719/how-can-i-remove-duplicate-objects-with-distinctby-from-a-list-in-kotlin/45884217#45884217", "title": "How can I remove duplicate objects with distinctBy from a list in Kotlin?", "body": "<p>If you look at the implementation of the <code>distinctBy</code>, it just adds the value you pass in the lambda to a <code>Set</code>. And if the <code>Set</code> did not already contain the specified element, it adds the respective item of the original <code>List</code> to the new <code>List</code> and that new <code>List</code> is being returned as the result of <code>distinctBy</code>.</p>\n\n<pre><code>public inline fun &lt;T, K&gt; Iterable&lt;T&gt;.distinctBy(selector: (T) -&gt; K): List&lt;T&gt; {\n    val set = HashSet&lt;K&gt;()\n    val list = ArrayList&lt;T&gt;()\n    for (e in this) {\n        val key = selector(e)\n        if (set.add(key))\n            list.add(e)\n    }\n    return list\n}\n</code></pre>\n\n<p>So you can pass a composite object that holds the properties that you require to find the uniqueness.</p>\n\n<pre><code>data class Selector(val property1: String, val property2: String, ...)\n</code></pre>\n\n<p>And pass that <code>Selector</code> object inside the lambda:</p>\n\n<pre><code>myObjectList.distinctBy { Selector(it.property1, it.property2, ...) }\n</code></pre>\n"}], "owner": {"reputation": 2346, "user_id": 2329708, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5Du22.jpg?s=128&g=1", "display_name": "Nate Jenson", "link": "https://stackoverflow.com/users/2329708/nate-jenson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21378, "favorite_count": 3, "accepted_answer_id": 45883784, "answer_count": 2, "score": 30, "last_activity_date": 1503673626, "creation_date": 1503671494, "last_edit_date": 1503672034, "question_id": 45883719, "link": "https://stackoverflow.com/questions/45883719/how-can-i-remove-duplicate-objects-with-distinctby-from-a-list-in-kotlin", "title": "How can I remove duplicate objects with distinctBy from a list in Kotlin?", "body": "<p>How can I use <code>distinctBy</code> on a list of custom objects to strip out the duplicates? I want to determine \"uniqueness\" by multiple properties of the object, but not all of them.</p>\n\n<p>I was hoping something like this would work, but no luck: </p>\n\n<p><code>val uniqueObjects = myObjectList.distinctBy { it.myField, it.myOtherField }</code></p>\n\n<p>Edit: I'm curious how to use <code>distinctBy</code> with any number of properties, not just two like in my example above.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1503668976, "post_id": 45882797, "comment_id": 78724311, "body": "Well, what are you trying to achieve? You can just use <code>override var nickName: String = &quot;hello&quot;</code> is you don&#39;t want to implement a getter and a setter. And if you want, then just add an implementation for these getters and setters."}, {"owner": {"reputation": 3597, "user_id": 7946807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UkEte.png?s=128&g=1", "display_name": "Schidu Luca", "link": "https://stackoverflow.com/users/7946807/schidu-luca"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1503669142, "post_id": 45882797, "comment_id": 78724454, "body": "the problem is I don&#39;t know how to add implementation. For example the <code>value</code> in set method, where should I store it ? in the <code>nickName</code> variable ? I tried it but get kind of <code>recursive</code> call"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 2, "creation_date": 1503669185, "post_id": 45882797, "comment_id": 78724484, "body": "Then just use the simple form I gave you in my previous comment. getters and setters are useful if you want to store the value elsewhere. Or if you want side-effects."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 2, "creation_date": 1503669531, "post_id": 45882797, "comment_id": 78724719, "body": "@SchiduLuca You can use <code>field</code> to store it in the backing field of the property. Like <code>set(value) { field = value }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": true, "score": 12, "last_activity_date": 1503673272, "last_edit_date": 1503673272, "creation_date": 1503672057, "answer_id": 45883906, "question_id": 45882797, "link": "https://stackoverflow.com/questions/45882797/implementing-properties-declared-in-interfaces-in-kotlin/45883906#45883906", "title": "Implementing properties declared in interfaces in Kotlin", "body": "<p>Properties must be initialized in Kotlin. When you declare the property in the constructor, it gets initialized with whatever you pass in. If you declare it in the body, you need to define it yourself, either with a default value, or parsed from other properties.</p>\n\n<p>Some examples:</p>\n\n<pre><code>class Button : User {\n    override var nickname = \"Fred\"\n}\n\nclass Button(val firstName: String, val lastName: String) : User {\n    override var nickname = \"${firstname[0]}$lastname\"\n}\n</code></pre>\n\n<p>The code generated by IDEA is useful if you want a non-default getter and/or setter, or if you want a property without a backing field (it's getter and setter calculate on the fly when accessed).</p>\n\n<p>More examples:</p>\n\n<pre><code>class Button : User {\n    override var nickname = \"Fred\"\n        get() = if (field.isEmpty()) \"N/A\" else field\n        set(value) {\n            // No Tommy\n            field = if (value == \"Tommy\") \"\" else value\n        }\n}\n\nclass Button(val number: Int) : User {\n    var id = \"$number\"\n        private set\n    override var nickname: String\n        get() {\n            val parts = id.split('-')\n            return if (parts.size &gt; 1) parts[0] else \"\"\n        }\n        set(value) {\n            field = if (value.isEmpty()) \"$number\" else \"$value-$number\"\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 3597, "user_id": 7946807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UkEte.png?s=128&g=1", "display_name": "Schidu Luca", "link": "https://stackoverflow.com/users/7946807/schidu-luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11908, "favorite_count": 0, "accepted_answer_id": 45883906, "answer_count": 1, "score": 5, "last_activity_date": 1503673272, "creation_date": 1503668603, "last_edit_date": 1503668913, "question_id": 45882797, "link": "https://stackoverflow.com/questions/45882797/implementing-properties-declared-in-interfaces-in-kotlin", "title": "Implementing properties declared in interfaces in Kotlin", "body": "<p>I'm new to <code>Kotlin</code>, so I have this interface.</p>\n\n<pre><code>interface User {\n    var nickName : String\n}\n</code></pre>\n\n<p>Now I want to create a class <code>PrivateUser</code> that implements this interface. I have also to implement the abstract member <code>nickName</code>.</p>\n\n<p>Via constructor it's very simple </p>\n\n<pre><code>class PrivateUser(override var nickName: String) : User\n</code></pre>\n\n<p>However when I try to implement member inside the class <code>Idea</code> generates me this code </p>\n\n<pre><code>class Button: User {\n\noverride var nickName: String\n    get() = TODO(\"not implemented\")\n    set(value) {}\n}\n</code></pre>\n\n<p>It's confusing to me how to implement it further.</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "onbackpressed"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "edited": false, "score": 0, "creation_date": 1503662476, "post_id": 45880841, "comment_id": 78720120, "body": "This is not working. as it giving again an option of back exit from aplication"}], "tags": [], "owner": {"reputation": 2101, "user_id": 1632490, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/f76106b3ddf4c1457a52af0787916c34?s=128&d=identicon&r=PG", "display_name": "AndiM", "link": "https://stackoverflow.com/users/1632490/andim"}, "is_accepted": false, "score": 0, "last_activity_date": 1503662083, "creation_date": 1503662083, "answer_id": 45880841, "question_id": 45880745, "link": "https://stackoverflow.com/questions/45880745/fragment-back-stack-from-second-fragment-to-first-fragment/45880841#45880841", "title": "Fragment Back stack from second fragment to first fragment", "body": "<p>Add your fragment to backstack and then in your onBackPressed method do something like this:</p>\n\n<pre><code>@Override \npublic void onBackPressed() { \n    if (getSupportFragmentManager().getBackStackEntryCount() &gt; 0) {\n        getSupportFragmentManager().popBackStack(); \n    } else { \n        this.finish(); \n    }\n}\n</code></pre>\n\n<p>For more information see <a href=\"https://stackoverflow.com/questions/27717127/how-to-handle-backpress-with-fragment/27717201#27717201\">this</a></p>\n\n<p>Hope this is what you are looking for and it helps you.</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "edited": false, "score": 0, "creation_date": 1503663484, "post_id": 45881140, "comment_id": 78720793, "body": "@J Ramesh i have used your solution but still not working it again exiting from apllication"}], "tags": [], "owner": {"reputation": 538, "user_id": 3824099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba28bd6b02be9350b717348abb98ee3c?s=128&d=identicon&r=PG&f=1", "display_name": "J Ramesh", "link": "https://stackoverflow.com/users/3824099/j-ramesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1503663069, "creation_date": 1503663069, "answer_id": 45881140, "question_id": 45880745, "link": "https://stackoverflow.com/questions/45880745/fragment-back-stack-from-second-fragment-to-first-fragment/45881140#45881140", "title": "Fragment Back stack from second fragment to first fragment", "body": "<p>Try this (Instead of \"replace\" use \"add\")</p>\n\n<pre><code>fragmentTransaction = fragmentManager!!.beginTransaction()\nfragmentTransaction.add(R.id.frame_container, paypal)\nfragmentTransaction.addToBackStack(null)\nfragmentTransaction.commit()\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@Override \npublic void onBackPressed() { \n    if (getSupportFragmentManager().getBackStackEntryCount() &gt; 0) {\n        getSupportFragmentManager().popBackStack(); \n    } else { \n        this.finish(); \n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "edited": false, "score": 0, "creation_date": 1503665311, "post_id": 45881366, "comment_id": 78721943, "body": "My fragment is nested fragment and i have written my code in third fragment and want to back press to second fragment. but dont know any how it going to first fragment back event listener."}, {"owner": {"reputation": 201, "user_id": 8290769, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lk47zuqOAsI/AAAAAAAAAAI/AAAAAAAAANs/MlEiXxe6uMc/photo.jpg?sz=128", "display_name": "Jigish", "link": "https://stackoverflow.com/users/8290769/jigish"}, "reply_to_user": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "edited": false, "score": 0, "creation_date": 1503686569, "post_id": 45881366, "comment_id": 78734707, "body": "in your main activity set OnBackPressed method and when you replace the fragment that time  FragmentManager ff=getFragmentManager(); ff.beginTransaction().replace(R.id.main_content,new your fragment name()).addToBackStack(null).commit();"}, {"owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "edited": false, "score": 0, "creation_date": 1503728318, "post_id": 45881366, "comment_id": 78744184, "body": "I am agree with ur answer but what is the situation that on my main activity i have written code of Double back pressed event that is code of exit from application. and my main activity contains four Viewpager tab fragment. and  my first tab fragment opens another fragment that is about nested fragment."}, {"owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "edited": false, "score": 0, "creation_date": 1503728402, "post_id": 45881366, "comment_id": 78744200, "body": "so actually what i want that i want back from my nested fragment to my first tab fragment. but what my nested fragment doing it calling main activity double pressed exit code"}, {"owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "edited": false, "score": 0, "creation_date": 1503728884, "post_id": 45881366, "comment_id": 78744291, "body": "I have edit or posted my Double back press code above in my code. Please let me know if there is any solution for this problem"}, {"owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "edited": false, "score": 1, "creation_date": 1503733817, "post_id": 45881366, "comment_id": 78745450, "body": "I solved this issue by referring this link <a href=\"https://tausiq.wordpress.com/2014/06/06/android-multiple-fragments-stack-in-each-viewpager-tab/\" rel=\"nofollow noreferrer\">tausiq.wordpress.com/2014/06/06/&hellip;</a>"}], "tags": [], "owner": {"reputation": 201, "user_id": 8290769, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lk47zuqOAsI/AAAAAAAAAAI/AAAAAAAAANs/MlEiXxe6uMc/photo.jpg?sz=128", "display_name": "Jigish", "link": "https://stackoverflow.com/users/8290769/jigish"}, "is_accepted": false, "score": 0, "last_activity_date": 1503664395, "last_edit_date": 1503664395, "creation_date": 1503663836, "answer_id": 45881366, "question_id": 45880745, "link": "https://stackoverflow.com/questions/45880745/fragment-back-stack-from-second-fragment-to-first-fragment/45881366#45881366", "title": "Fragment Back stack from second fragment to first fragment", "body": "<p>if fragment within fragment back use this code onbackpreesed method</p>\n\n<pre><code> @Override\npublic void onBackPressed() {\n    DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);\n    if(getFragmentManager().getBackStackEntryCount() == 1) {\n        new AlertDialog.Builder(this)\n                .setIcon(android.R.drawable.ic_dialog_alert)\n                .setTitle(\"Check out\")\n                .setMessage(\"want to do check out?\")\n                .setPositiveButton(\"Yes\", new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n                        closeApp();\n                    }\n                })\n                .setNegativeButton(\"No\",null)\n                .show();\n\n    }\n    else {\n        super.onBackPressed();\n    }\n}\n</code></pre>\n\n<p>each fragment store in a stack</p>\n\n<pre><code> FragmentManager ff=getFragmentManager();\nff.beginTransaction().replace(R.id.main_content,new home()).addToBackStack(null).commit();\n</code></pre>\n\n<p>it's work in my project</p>\n"}, {"tags": [], "owner": {"reputation": 296, "user_id": 8362967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2XjC9.png?s=128&g=1", "display_name": "LEGEND MORTAL", "link": "https://stackoverflow.com/users/8362967/legend-mortal"}, "is_accepted": false, "score": 0, "last_activity_date": 1514833905, "last_edit_date": 1514833905, "creation_date": 1513039510, "answer_id": 47763728, "question_id": 45880745, "link": "https://stackoverflow.com/questions/45880745/fragment-back-stack-from-second-fragment-to-first-fragment/47763728#47763728", "title": "Fragment Back stack from second fragment to first fragment", "body": "<p>I used this in Activity</p>\n\n<p>Step 1:</p>\n\n<p>Created a global variable for boolean</p>\n\n<pre><code>private boolean doubleBackToExitPressedOnce = false;\n</code></pre>\n\n<p>Step 2: </p>\n\n<p>Then in onBackPress() method of activity </p>\n\n<p>i did this</p>\n\n<pre><code>@Override\npublic void onBackPressed() {\n    if (mViewPager.getCurrentItem() &gt; 0) {\n        //if any tab selected instead of tab 1\n        mDoubleBackToExitPressedOnce = false;\n    } else if (mViewPager.getCurrentItem() == 0) {\n        //if tab 1 selected\n        mDoubleBackToExitPressedOnce = true;\n        if (mDoubleBackToExitPressedOnce)\n            super.onBackPressed();\n    }\n    mViewPager.setCurrentItem(0);//go to tab 1\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 8397347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e3f274c8d0a78462a3f37a7b1ecd6b17?s=128&d=identicon&r=PG&f=1", "display_name": "Jyoti ", "link": "https://stackoverflow.com/users/8397347/jyoti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2462, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1514833905, "creation_date": 1503661763, "last_edit_date": 1503728821, "question_id": 45880745, "link": "https://stackoverflow.com/questions/45880745/fragment-back-stack-from-second-fragment-to-first-fragment", "title": "Fragment Back stack from second fragment to first fragment", "body": "<p>I have viewpager tab fragment and from one tabb fragment on button click it open another fragment and another second fragment i want to add event of backpress as i am doing backpress it exiting application as i have written code of Double back press exit code in my root fragment and i dont want this code to call in my another second fragment as i want simply one step back to my previous fragment\nAs here is the code</p>\n\n<pre><code> R.id.Recharge -&gt; {\n\n            val pl = Payment_History()\n\n            fragmentTransaction = fragmentManager!!.beginTransaction()\n            fragmentTransaction.replace(R.id.frame_container, paypal)\n            fragmentTransaction.addToBackStack(null)\n            fragmentTransaction.commit()\n\n\n        }\n</code></pre>\n\n<p>In Payment history i am calling on Back press override function</p>\n\n<pre><code>override fun onBackPressed(): Boolean {\n    super.onBackPressed()\n}\n</code></pre>\n\n<p>and on clicking on Paymenthistory it called exit code from application. i want that it back to previous fragment. As I have written this fragment code but not working.\nAny one have idea how to back second nested fragment to previous fragment.</p>\n\n<p>My OnBackPress code in my MainActivity</p>\n\n<pre><code>    override fun onBackPressed() {\n    // TODO Auto-generated method stub\n    try {\n    if (getFragmentManager().getBackStackEntryCount() == 0) {\n\n        if (doubleBackToExitPressedOnce) {\n\n            //super.onBackPressed();\n            val startMain = Intent(Intent.ACTION_MAIN)\n            startMain.addCategory(Intent.CATEGORY_HOME)\n            startMain.flags = Intent.FLAG_ACTIVITY_NEW_TASK\n            pref!!.setLoggedIn(true)\n            startMain.flags = Intent.FLAG_ACTIVITY_CLEAR_TASK\n            startMain.flags = Intent.FLAG_ACTIVITY_CLEAR_TOP\n            startActivity(startMain)\n            return\n        }\n\n        this.doubleBackToExitPressedOnce = true\n        Toast.makeText(this, \"Please click again to exit\", Toast.LENGTH_SHORT).show()\n\n        Handler().postDelayed({ doubleBackToExitPressedOnce = false }, 2000)\n    }\n\n        }catch (e:Exception){\n        println(\"homemessage\"+ e.message)\n    }\n}\n</code></pre>\n"}, {"tags": ["spring", "kotlin", "yaml"], "comments": [{"owner": {"reputation": 185, "user_id": 6498724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8NkC.png?s=128&g=1", "display_name": "Forest10", "link": "https://stackoverflow.com/users/6498724/forest10"}, "edited": false, "score": 0, "creation_date": 1547784578, "post_id": 45880494, "comment_id": 95319519, "body": "just take a look at this answer here:<a href=\"https://stackoverflow.com/questions/21271468/spring-propertysource-using-yaml/54247009#54247009\">https://stackoverflow.com/questions/21271468/spring-pro&zwnj;&#8203;pertysource-using-ya&zwnj;&#8203;ml/54247009#54247009</a> .it`s easy to use."}], "answers": [{"comments": [{"owner": {"reputation": 2380, "user_id": 2248405, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a421f00153b682b6bf85ed19c160de42?s=128&d=identicon&r=PG", "display_name": "robie2011", "link": "https://stackoverflow.com/users/2248405/robie2011"}, "edited": false, "score": 0, "creation_date": 1503901681, "post_id": 45882088, "comment_id": 78784337, "body": "I can&#39;t explain why but I was able to load YAML with PropertySource. Things may have changed with the newst spring version. Because I was able to load Strings but no list. Anyway, I also have tried with mutableList and it didn&#39;t work.  But using immutable list YAML List comma separated (/init, /home) worked"}], "tags": [], "owner": {"reputation": 23530, "user_id": 347964, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/bE90m.png?s=128&g=1", "display_name": "flyx", "link": "https://stackoverflow.com/users/347964/flyx"}, "is_accepted": false, "score": 0, "last_activity_date": 1503666136, "last_edit_date": 1592644375, "creation_date": 1503666136, "answer_id": 45882088, "question_id": 45880494, "link": "https://stackoverflow.com/questions/45880494/configurationproperties-loading-list-from-yml/45882088#45882088", "title": "ConfigurationProperties loading list from YML", "body": "<p>Well, according to <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-yaml\" rel=\"nofollow noreferrer\">the docs</a>, your YAML file will be rewritten into a property file. The first YAML file becomes:</p>\n<pre><code>angular=/init, /home\nvalue=Hello World\n</code></pre>\n<p>While the second one becomes:</p>\n<pre><code>angular[0]=init\nangular[1]=home\nvalue=Hello World\n</code></pre>\n<p>These are obviously two very different things and therefore behave differently.</p>\n<p>Moreover, later in the docs, it is stated that YAML does not even work with <code>@PropertySource</code>:</p>\n<blockquote>\n<h3>24.6.4 YAML shortcomings</h3>\n<p>YAML files can\u2019t be loaded via the <code>@PropertySource</code> annotation. So in the case that you need to load values that way, you need to use a properties file.</p>\n</blockquote>\n<p>That makes me kind of wonder why the first case works for you at all.</p>\n<p>The docs say this about the generated <code>\u2026[index]</code> properties:</p>\n<blockquote>\n<p>To bind to properties like that using the Spring <code>DataBinder</code> utilities (which is what <code>@ConfigurationProperties</code> does) you need to have a property in the target bean of type <code>java.util.List</code> (or <code>Set</code>) and you either need to provide a setter, or initialize it with a mutable value, e.g. this will bind to the properties above</p>\n</blockquote>\n<p>So, let's have a look at Kotlin docs: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/list-of.html\" rel=\"nofollow noreferrer\"><code>listOf</code></a> <em>returns a new read-only list of given elements</em>. So the list is not mutable as required by the docs, which I assume is why it doesn't work. Try using a mutable list (since I have never used Kotlin, I cannot give you working code). Also try to declare it as <code>java.util.List</code> if that's possible in Kotlin.</p>\n"}, {"comments": [{"owner": {"reputation": 1442, "user_id": 10668441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39143925c232ecb3db9db32d9d25289b?s=128&d=identicon&r=PG&f=1", "display_name": "pcoates", "link": "https://stackoverflow.com/users/10668441/pcoates"}, "edited": false, "score": 0, "creation_date": 1544457306, "post_id": 45882447, "comment_id": 94272845, "body": "If you need to get properties for a specific profile, the third parameter in YamlPropertySourceLoader.load() is the profile name. Although, YamlPropertySourceLoader.load() has changed to return a list rather than a single propertysource, so you need to find the one in the list that matches your profile. Here&#39;s more info <a href=\"https://stackoverflow.com/a/53697551/10668441\">stackoverflow.com/a/53697551/10668441</a>"}], "tags": [], "owner": {"reputation": 1378, "user_id": 5400641, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/00570bb707b63435b14c28d44d8feef3?s=128&d=identicon&r=PG&f=1", "display_name": "kurt", "link": "https://stackoverflow.com/users/5400641/kurt"}, "is_accepted": true, "score": 7, "last_activity_date": 1503667979, "last_edit_date": 1503667979, "creation_date": 1503667320, "answer_id": 45882447, "question_id": 45880494, "link": "https://stackoverflow.com/questions/45880494/configurationproperties-loading-list-from-yml/45882447#45882447", "title": "ConfigurationProperties loading list from YML", "body": "<p>As @flyx say, <code>@PropetySource</code> not worked with yaml files. But in spring you may override almost everything :) </p>\n\n<p><code>PropertySource</code> has additional parameter: factory. It's possible to create your own PropertySourceFactory base on DefaultPropertySourceFactory </p>\n\n<pre><code>open class YamlPropertyLoaderFactory : DefaultPropertySourceFactory() {\n    override fun createPropertySource(name: String?, resource: EncodedResource?): org.springframework.core.env.PropertySource&lt;*&gt; {\n        if (resource == null)\n            return super.createPropertySource(name, resource)\n\n        return YamlPropertySourceLoader().load(resource.resource.filename, resource.resource, null)\n    }\n}\n</code></pre>\n\n<p>And when use this factory in propertysource annotation:</p>\n\n<pre><code>@PropertySource(\"classpath:/routing.yml\", factory = YamlPropertyLoaderFactory::class)\n</code></pre>\n\n<p>Last that you need is to initialized variable angular with mutableList</p>\n\n<p>Full code sample:</p>\n\n<pre><code>@Component\n@PropertySource(\"classpath:/routing.yml\", factory = YamlPropertyLoaderFactory::class)\n@ConfigurationProperties\nopen class RoutingProperties {\n    var angular = mutableListOf(\"nothing\")\n    var value: String = \"\"\n\n\n    override fun toString(): String {\n        return \"RoutingProperties(angular=$angular, value='$value')\"\n    }\n}\n\nopen class YamlPropertyLoaderFactory : DefaultPropertySourceFactory() {\n    override fun createPropertySource(name: String?, resource: EncodedResource?): org.springframework.core.env.PropertySource&lt;*&gt; {\n        if (resource == null)\n            return super.createPropertySource(name, resource)\n\n        return YamlPropertySourceLoader().load(resource.resource.filename, resource.resource, null)\n    }\n}\n\n@SpringBootApplication\n@EnableAutoConfiguration(exclude = arrayOf(DataSourceAutoConfiguration::class))\nopen class Application {\n    companion object {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            val context = SpringApplication.run(Application::class.java, *args)\n\n            val bean = context.getBean(RoutingProperties::class.java)\n\n            println(bean)\n        }\n    }\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1860, "user_id": 3882025, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6dfe675ebeabc547b717b3792831785b?s=128&d=identicon&r=PG&f=1", "display_name": "glace", "link": "https://stackoverflow.com/users/3882025/glace"}, "is_accepted": false, "score": 1, "last_activity_date": 1590557937, "creation_date": 1590557937, "answer_id": 62036156, "question_id": 45880494, "link": "https://stackoverflow.com/questions/45880494/configurationproperties-loading-list-from-yml/62036156#62036156", "title": "ConfigurationProperties loading list from YML", "body": "<p>Kinda old post, i know. But i am at the very same topic right now.</p>\n\n<p>As of now, it seems that PropertySource does indeed work with yaml Files. Given the restriction that it only allows for primitive types (it seems) and it cant handle nested elements. I'm probably gonna dig a bit deeper and update my answer accordingly, but as of now, the accepted answer seems like a functioning workaround.</p>\n"}], "owner": {"reputation": 2380, "user_id": 2248405, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a421f00153b682b6bf85ed19c160de42?s=128&d=identicon&r=PG", "display_name": "robie2011", "link": "https://stackoverflow.com/users/2248405/robie2011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6616, "favorite_count": 2, "accepted_answer_id": 45882447, "answer_count": 3, "score": 7, "last_activity_date": 1590557937, "creation_date": 1503660938, "question_id": 45880494, "link": "https://stackoverflow.com/questions/45880494/configurationproperties-loading-list-from-yml", "title": "ConfigurationProperties loading list from YML", "body": "<p>I'm trying to load Configuration from YML. I can load value and I can also load list if these are comma seperated values. But i can't load a typical YML List. </p>\n\n<p><strong>Configuration Class</strong></p>\n\n<pre><code>@Component\n@PropertySource(\"classpath:routing.yml\")\n@ConfigurationProperties\nclass RoutingProperties(){\n    var angular = listOf(\"nothing\")\n    var value: String = \"\"\n}\n</code></pre>\n\n<p><strong>Working routing.yml</strong></p>\n\n<pre><code>angular: /init, /home\nvalue: Hello World\n</code></pre>\n\n<p><strong>Not Working routing.yml</strong></p>\n\n<pre><code>angular:\n    - init\n    - home\n\nvalue: Hello World\n</code></pre>\n\n<p>Why can't i load the second version of yml / do I have a syntaxt error?</p>\n\n<p>ENV: Kotlin, Spring 2.0.0.M3</p>\n"}, {"tags": ["java", "android", "enums", "kotlin", "subclass"], "comments": [{"owner": {"reputation": 505, "user_id": 1098179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04c673d585ad5375c48a77fe523902c?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1098179/brian"}, "edited": false, "score": 1, "creation_date": 1503659691, "post_id": 45880003, "comment_id": 78718571, "body": "Did you check your imports? it sounds like the conversion drops some imports, that is probably why using the full reference works"}, {"owner": {"reputation": 3767, "user_id": 3109189, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/s3aPL.jpg?s=128&g=1", "display_name": "PLNech", "link": "https://stackoverflow.com/users/3109189/plnech"}, "reply_to_user": {"reputation": 505, "user_id": 1098179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04c673d585ad5375c48a77fe523902c?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1098179/brian"}, "edited": false, "score": 0, "creation_date": 1503660681, "post_id": 45880003, "comment_id": 78719107, "body": "@Brian: I&#39;m still importing the subclass (on which references work fine like <code>AIConfiguration.RecognitionEngine.System</code>), however I cannot do <code>Subclass.SUPER_CLASS_ENUM</code> anymore. Is this a specificity of the Kotlin language, not forwarding enum references to subclasses?"}, {"owner": {"reputation": 505, "user_id": 1098179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04c673d585ad5375c48a77fe523902c?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1098179/brian"}, "edited": false, "score": 2, "creation_date": 1503661562, "post_id": 45880003, "comment_id": 78719576, "body": "Kotlin does not have a concept of static classes, it creates companion objects to the class to allow the fields to be accessed. The companion object is enclosed in the class, i will need to verify why the companion object is being passed in. The problem may simply be the use of the ambiguous file name: as you can see code works when you use the full file reference"}], "answers": [{"tags": [], "owner": {"reputation": 20424, "user_id": 445715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3824489df267d3bf86bbc678b9745ac4?s=128&d=identicon&r=PG", "display_name": "Andrey Breslav", "link": "https://stackoverflow.com/users/445715/andrey-breslav"}, "is_accepted": false, "score": 2, "last_activity_date": 1535962012, "creation_date": 1535962012, "answer_id": 52145592, "question_id": 45880003, "link": "https://stackoverflow.com/questions/45880003/why-cant-i-access-a-superclass-enum-in-kotlin/52145592#52145592", "title": "Why can&#39;t I access a superclass&#39; enum in Kotlin?", "body": "<p>The visibility rules in Kotlin are different from those in Java. Kotlin classes do not \"inherit\" static nested classes from supertypes, because the rules get too complicated when companion objects come into play. We are trying to keep the rules as simple as possible, and normally there's no issue accessing a nested class through a supertype name, but in your case the short names of the subclass and superclass clash. This is not typical, so you have the options you listed in the question: a fully-qualified name or a rename on import.</p>\n"}], "owner": {"reputation": 3767, "user_id": 3109189, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/s3aPL.jpg?s=128&g=1", "display_name": "PLNech", "link": "https://stackoverflow.com/users/3109189/plnech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1535962012, "creation_date": 1503659268, "last_edit_date": 1592644375, "question_id": 45880003, "link": "https://stackoverflow.com/questions/45880003/why-cant-i-access-a-superclass-enum-in-kotlin", "title": "Why can&#39;t I access a superclass&#39; enum in Kotlin?", "body": "<p>I am converting a Java Android project to Kotlin.</p>\n<p>I am using <a href=\"https://github.com/api-ai/apiai-android-client\" rel=\"nofollow noreferrer\">API.AI's client</a>, which has two <code>AIConfiguration</code> classes:</p>\n<p><em>Superclass</em></p>\n<pre><code>package ai.api;\npublic class AIConfiguration implements Cloneable {\n     public static enum SupportedLanguages {\n         English(&quot;en&quot;),\n         //...\n     }\n         //...\n}\n</code></pre>\n<p><em>Subclass</em></p>\n<pre><code>package ai.api.android;\npublic class AIConfiguration extends ai.api.AIConfiguration {\n    public enum RecognitionEngine {\n    //...\n}\n</code></pre>\n<p>In my Java code, I was creating an instance of the subclass, as recommended in the api guide:</p>\n<pre><code>final AIConfiguration config = new AIConfiguration(&quot;TOKEN&quot;,\n        AIConfiguration.SupportedLanguages.English,\n        AIConfiguration.RecognitionEngine.System);\n</code></pre>\n<p>Once converted to Kotlin, it looks like this:</p>\n<pre><code>val config = AIConfiguration(&quot;TOKEN&quot;,\n        AIConfiguration.SupportedLanguages.English,\n        AIConfiguration.RecognitionEngine.System)\n</code></pre>\n<p>...which causes an <strong><code>Unresolved reference: SupportedLanguages</code></strong>.</p>\n<ul>\n<li>I can update the reference to <code>ai.api.AIConfiguration.SupportedLanguages.English</code>, which compiles successfully.</li>\n<li>I could import the superclass with <code>import ai.api.AIConfiguration as SuperAIConfiguration</code> and use <code>SuperAIConfiguration.SupportedLanguages</code>, but I would rather reference the enum directly on the subclass.</li>\n</ul>\n<p>I don't get it: <strong>why is this reference valid in Java but not in Kotlin?</strong></p>\n"}, {"tags": ["android", "kotlin", "osmdroid"], "answers": [{"tags": [], "owner": {"reputation": 2932, "user_id": 1203182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9739a1753ea9cea0819df2724beed2fa?s=128&d=identicon&r=PG&f=1", "display_name": "spy", "link": "https://stackoverflow.com/users/1203182/spy"}, "is_accepted": true, "score": 1, "last_activity_date": 1503785375, "creation_date": 1503785375, "answer_id": 45900060, "question_id": 45879313, "link": "https://stackoverflow.com/questions/45879313/osmdroid-osmdroid-bonuspack-how-to-use-cachemanager/45900060#45900060", "title": "Osmdroid &amp; Osmdroid bonuspack how to use CacheManager", "body": "<p>You shouldn't have to do anything, it's automatic. The cache manager basically hooks into the MapView's <code>IFileSystemCache</code> provider, which by default is the sqlite database. However keep the following in mind.</p>\n\n<ul>\n<li>Unless you change the default map provider instance, the cache is always hit first. If a needed tile is expired, it will attempt to redownload.</li>\n<li>Tile expiration times are set the server and can vary per tile, significantly</li>\n<li>It's possible to extend the expiration time and/or override the expiration time stamp using osmdroid's <code>Configuration</code> class structure</li>\n<li>It's also possible to create a permanent tile archive on device using the cache manager. There are legal, terms of service, moral and potential ethical issues with this. Make sure you read the file print for the tiles sources you make available to your users.</li>\n</ul>\n\n<p>Also, be advised that the cache manager is now located in the osmdroid-android library due to a partial merge with history with osmbonuspack. See the <a href=\"https://github.com/osmdroid/osmdroid/wiki/Changelog\" rel=\"nofollow noreferrer\">change log</a> and <a href=\"https://github.com/osmdroid/osmdroid/wiki/Upgrade-Guide\" rel=\"nofollow noreferrer\">upgrade guide</a> for more information</p>\n"}], "owner": {"reputation": 9, "user_id": 4235445, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ktlhMx_vreo/AAAAAAAAAAI/AAAAAAAAAZk/aExxl4X1nJQ/photo.jpg?sz=128", "display_name": "zaheer uddin", "link": "https://stackoverflow.com/users/4235445/zaheer-uddin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 45900060, "answer_count": 1, "score": 0, "last_activity_date": 1503785375, "creation_date": 1503656551, "question_id": 45879313, "link": "https://stackoverflow.com/questions/45879313/osmdroid-osmdroid-bonuspack-how-to-use-cachemanager", "title": "Osmdroid &amp; Osmdroid bonuspack how to use CacheManager", "body": "<pre><code> val cm= CacheManager(map)\n    val  mt=MapTile(map.getZoomLevel(),map.scrollX,map.scrollY);\n    //(cm.loadTile(TileSourceFactory.MAPNIK,mt)) \n     cm.downloadAreaAsync(this,bb,map.minZoomLevel,map.maxZoomLevel);\n</code></pre>\n\n<p>So that's how I download OSM loaded map! now i want that next time when the application opened it'll  direct load the map from local already cached source rather than going to online/network request.</p>\n"}, {"tags": ["android", "kotlin", "idioms"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1503649375, "post_id": 45877140, "comment_id": 78712789, "body": "IMO I would really think that simply <code>with(argument.mutableProperty) { if (this != null) a(this) else b() }</code> is concise enough (or the equivalent with <code>let</code>.) Usually this shouldn&#39;t be much of a concern and this is still quite short."}, {"owner": {"reputation": 4056, "user_id": 635075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KsEUG.jpg?s=128&g=1", "display_name": "Rob Pridham", "link": "https://stackoverflow.com/users/635075/rob-pridham"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1503649583, "post_id": 45877140, "comment_id": 78712902, "body": "Looks good to me, thanks! I suggest you add it as an answer - at the very least, it&#39;s another way of achieving it."}], "answers": [{"tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 29, "last_activity_date": 1588536756, "last_edit_date": 1588536756, "creation_date": 1503649836, "answer_id": 45877344, "question_id": 45877140, "link": "https://stackoverflow.com/questions/45877140/kotlin-and-idiomatic-way-to-write-if-not-null-else-based-around-mutable-v/45877344#45877344", "title": "Kotlin and idiomatic way to write, &#39;if not null, else...&#39; based around mutable value", "body": "<p>I don't believe there is a really \"short\" way to achieve it, however you can simply use a conditional within <code>with</code> or <code>let</code>:</p>\n\n<pre><code>with(mutableVar) { if (this != null) doSomething(this) else doOtherThing() }\nmutableVar.let { if (it != null) doSomething(it) else doOtherThing() }\n</code></pre>\n\n<p>In fact, \"capturing\" a mutable value is one of the main use cases of <code>let</code>.</p>\n\n<p>This is equivalent to your <code>when</code> statement.</p>\n\n<p>There is always the option you described, assigning it to a variable:</p>\n\n<pre><code>val immutable = mutableVar\n\nif (immutable != null) {\n    doSomething(immutable)\n} else {\n    doOtherThing()\n}\n</code></pre>\n\n<p>which is always a nice fallback in case e.g. things get too verbose.</p>\n\n<p>There probably isn't really a very <em>nice</em> way to achieve this because only the <em>last</em> lambda argument is allowed to be put outside the <code>()</code>, so specifying two wouldn't really fit the syntax of all of the other standard functions.</p>\n\n<p>You <em>could</em> write one if you don't mind that (or if you'll be passing method references instead):</p>\n\n<pre><code>inline fun &lt;T : Any, R&gt; T?.ifNotNullOrElse(ifNotNullPath: (T) -&gt; R, elsePath: () -&gt; R)\n        = let { if(it == null) elsePath() else ifNotNullPath(it) }\n\n...\n\nval a: Int? = null\na.ifNotNullOrElse({ println(\"not null\") }, { println(\"null\") })\n</code></pre>\n\n<hr>\n\n<p>Note that I would personally <em>not</em> do this, because none of these custom constructs are very pleasant to read. IMO: stick with <code>let</code>/<code>run</code> and fall back to <code>if</code>-<code>else</code> when necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 4056, "user_id": 635075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KsEUG.jpg?s=128&g=1", "display_name": "Rob Pridham", "link": "https://stackoverflow.com/users/635075/rob-pridham"}, "edited": false, "score": 2, "creation_date": 1503655114, "post_id": 45878199, "comment_id": 78716053, "body": "The disadvantage of this seems to be the limitation to a single method call on the RHS, as opposed to a block of code. Am I missing any trick on that count?"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 4056, "user_id": 635075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KsEUG.jpg?s=128&g=1", "display_name": "Rob Pridham", "link": "https://stackoverflow.com/users/635075/rob-pridham"}, "edited": false, "score": 1, "creation_date": 1503655859, "post_id": 45878199, "comment_id": 78716494, "body": "@RobPridham I guess you could technically use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run.html\" rel=\"nofollow noreferrer\"><code>run</code></a> and use a lambda there instead, but that&#39;s a stretch"}, {"owner": {"reputation": 11733, "user_id": 4586742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRXQc.jpg?s=128&g=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4586742/bob"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1503656140, "post_id": 45878199, "comment_id": 78716616, "body": "Yes. As @1blustone has mentioned, <code>run</code> or <code>let</code> can be used. Or you can just write a function block and invoke it by calling <code>.invoke()</code> or put <code>()</code> after the closing lambda, but this function won&#39;t be inlined."}, {"owner": {"reputation": 1207, "user_id": 1694086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff04fa446931b33ce77aae38c7c9ce7?s=128&d=identicon&r=PG", "display_name": "franta kocourek", "link": "https://stackoverflow.com/users/1694086/franta-kocourek"}, "edited": false, "score": 2, "creation_date": 1531422575, "post_id": 45878199, "comment_id": 89602472, "body": "I do not understand why this answer has so many upvotes. You are suggesting something and in the very next section you are proving your suggestion to be wrong. Read the doc one more time -&gt; if the <code>mutableProperty</code> is not null it jumps into <code>doSomething(it)</code> and if this method returns <code>null</code>, then elvis operator executes <code>doOtherThing()</code>."}, {"owner": {"reputation": 1298, "user_id": 1755086, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fdb973fc216aeeb6d9c7cd98c4fa059b?s=128&d=identicon&r=PG", "display_name": "protossor", "link": "https://stackoverflow.com/users/1755086/protossor"}, "edited": false, "score": 1, "creation_date": 1548985970, "post_id": 45878199, "comment_id": 95751328, "body": "You can use <code>also</code> in place of <code>let</code> to avoid the null problem."}, {"owner": {"reputation": 1800, "user_id": 37370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4aa184d0463590af1e79c3edf6d46873?s=128&d=identicon&r=PG&f=1", "display_name": "RichieHH", "link": "https://stackoverflow.com/users/37370/richiehh"}, "edited": false, "score": 3, "creation_date": 1561003416, "post_id": 45878199, "comment_id": 99923958, "body": "Blimey. What a convoluted mess."}], "tags": [], "owner": {"reputation": 11733, "user_id": 4586742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRXQc.jpg?s=128&g=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4586742/bob"}, "is_accepted": false, "score": 62, "last_activity_date": 1555676318, "last_edit_date": 1555676318, "creation_date": 1503652658, "answer_id": 45878199, "question_id": 45877140, "link": "https://stackoverflow.com/questions/45877140/kotlin-and-idiomatic-way-to-write-if-not-null-else-based-around-mutable-v/45878199#45878199", "title": "Kotlin and idiomatic way to write, &#39;if not null, else...&#39; based around mutable value", "body": "<p><strong>Update:</strong></p>\n\n<p>As mentioned by franta on the comments, if the method <code>doSomething()</code> returns null, then the code on the right side of the elvis operator will be executed, which might not be the desired case for most. But at the same time, in this case, it is very likely that the <code>doSomething()</code> method will only do something and not return anything.</p>\n\n<p>And an alternative: as protossor has mentioned on the comments, <code>also</code> can be used rather than <code>let</code>, because <code>also</code> returns <code>this</code> object instead of the result of the function block.</p>\n\n<pre><code>mutableProperty?.also { doSomething(it) } ?: doOtherThing()\n</code></pre>\n\n<p><strong>Original answer:</strong></p>\n\n<p>I would use <code>let</code> with <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#elvis-operator\" rel=\"noreferrer\">Elvis operator</a>.</p>\n\n<pre><code>mutableProperty?.let { doSomething(it) } ?: doOtherThing()\n</code></pre>\n\n<p>From the doc:</p>\n\n<blockquote>\n  <p>If the expression to the left of ?: is not null, the elvis operator\n  returns it, otherwise it returns the expression to the right. Note\n  that the right-hand side expression is evaluated only if the left-hand\n  side is null.</p>\n</blockquote>\n\n<p>For a block of code after the right-hand side expression:</p>\n\n<pre><code>   mutableProperty?.let {\n            doSomething(it)\n        } ?: run {\n            doOtherThing()\n            doOtherThing()\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3402, "user_id": 4689024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHNaO.jpg?s=128&g=1", "display_name": "zyc zyc", "link": "https://stackoverflow.com/users/4689024/zyc-zyc"}, "is_accepted": false, "score": 3, "last_activity_date": 1510648506, "creation_date": 1510648506, "answer_id": 47281045, "question_id": 45877140, "link": "https://stackoverflow.com/questions/45877140/kotlin-and-idiomatic-way-to-write-if-not-null-else-based-around-mutable-v/47281045#47281045", "title": "Kotlin and idiomatic way to write, &#39;if not null, else...&#39; based around mutable value", "body": "<p>add custom inline function as below:</p>\n\n<pre><code>inline fun &lt;T&gt; T?.whenNull(block: T?.() -&gt; Unit): T? {\n    if (this == null) block()\n    return this@whenNull\n}\n\ninline fun &lt;T&gt; T?.whenNonNull(block: T.() -&gt; Unit): T? {\n    this?.block()\n    return this@whenNonNull\n}\n</code></pre>\n\n<p>then you can write code like this:</p>\n\n<pre><code>var nullableVariable :Any? = null\nnullableVariable.whenNonNull {\n    doSomething(nullableVariable)\n}.whenNull {\n    doOtherThing()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "is_accepted": false, "score": 0, "last_activity_date": 1532112612, "creation_date": 1532112612, "answer_id": 51448747, "question_id": 45877140, "link": "https://stackoverflow.com/questions/45877140/kotlin-and-idiomatic-way-to-write-if-not-null-else-based-around-mutable-v/51448747#51448747", "title": "Kotlin and idiomatic way to write, &#39;if not null, else...&#39; based around mutable value", "body": "<p>i usually write it like this:</p>\n\n<pre><code>  takeIf{somecondition}?.also{put somecondition is met code}?:run{put your else code here}\n</code></pre>\n\n<p>note the question mark after takeIf is a MUST.  you can use also or apply keyword.  </p>\n"}, {"tags": [], "owner": {"reputation": 1029, "user_id": 3855470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1de9920967f586ccc74032b15b6193?s=128&d=identicon&r=PG&f=1", "display_name": "sunilson", "link": "https://stackoverflow.com/users/3855470/sunilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1556800300, "creation_date": 1556800300, "answer_id": 55952532, "question_id": 45877140, "link": "https://stackoverflow.com/questions/45877140/kotlin-and-idiomatic-way-to-write-if-not-null-else-based-around-mutable-v/55952532#55952532", "title": "Kotlin and idiomatic way to write, &#39;if not null, else...&#39; based around mutable value", "body": "<p>You could also do something like this:</p>\n\n<pre><code>class If&lt;T&gt;(val any: T?, private val i: (T) -&gt; Unit) {\n    infix fun Else(e: () -&gt; Unit) {\n        if (any == null) e()\n        else i(any)\n    }\n}\n</code></pre>\n\n<p>You can then use it like this:</p>\n\n<pre><code>If(nullableString) {\n   //Use string\n} Else {\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1582, "user_id": 3917943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02a49efb020fbd54a04e980faeaf053?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias Henze", "link": "https://stackoverflow.com/users/3917943/mathias-henze"}, "edited": false, "score": 0, "creation_date": 1619081426, "post_id": 66119241, "comment_id": 118798524, "body": "this might work in some circumstances, but be a problem, if e.g. doSomething() returns a value. in this case it would also call doOtherThing(), if doSomething() returns null"}], "tags": [], "owner": {"reputation": 9348, "user_id": 16206, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/63cb55b3966a6c3bfe829c00b74a4e4b?s=128&d=identicon&r=PG", "display_name": "borjab", "link": "https://stackoverflow.com/users/16206/borjab"}, "is_accepted": false, "score": 1, "last_activity_date": 1612874629, "creation_date": 1612874629, "answer_id": 66119241, "question_id": 45877140, "link": "https://stackoverflow.com/questions/45877140/kotlin-and-idiomatic-way-to-write-if-not-null-else-based-around-mutable-v/66119241#66119241", "title": "Kotlin and idiomatic way to write, &#39;if not null, else...&#39; based around mutable value", "body": "<p>What about:</p>\n<pre><code>argument.mutableProperty\n  ?.let { doSomething(it) } \n  ?: doOtherThing()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1582, "user_id": 3917943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a02a49efb020fbd54a04e980faeaf053?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias Henze", "link": "https://stackoverflow.com/users/3917943/mathias-henze"}, "is_accepted": false, "score": 0, "last_activity_date": 1619081632, "creation_date": 1619081632, "answer_id": 67209956, "question_id": 45877140, "link": "https://stackoverflow.com/questions/45877140/kotlin-and-idiomatic-way-to-write-if-not-null-else-based-around-mutable-v/67209956#67209956", "title": "Kotlin and idiomatic way to write, &#39;if not null, else...&#39; based around mutable value", "body": "<p>I usually just do:</p>\n<pre><code>when(val it=argument.mutableProperty) {\n    null -&gt; doOtherThing()\n    else -&gt; doSomething(it)\n}\n</code></pre>\n"}], "owner": {"reputation": 4056, "user_id": 635075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KsEUG.jpg?s=128&g=1", "display_name": "Rob Pridham", "link": "https://stackoverflow.com/users/635075/rob-pridham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31589, "favorite_count": 8, "accepted_answer_id": 45877344, "answer_count": 7, "score": 50, "last_activity_date": 1619081632, "creation_date": 1503649055, "question_id": 45877140, "link": "https://stackoverflow.com/questions/45877140/kotlin-and-idiomatic-way-to-write-if-not-null-else-based-around-mutable-v", "title": "Kotlin and idiomatic way to write, &#39;if not null, else...&#39; based around mutable value", "body": "<p>Suppose we have this code:</p>\n\n<pre><code>class QuickExample {\n\n    fun function(argument: SomeOtherClass) {\n        if (argument.mutableProperty != null ) {\n            doSomething(argument.mutableProperty)\n        } else {\n            doOtherThing()\n        }\n    }\n\n    fun doSomething(argument: Object) {}\n\n    fun doOtherThing() {}\n}\n\nclass SomeOtherClass {\n    var mutableProperty: Object? = null\n}\n</code></pre>\n\n<p>Unlike in Java, where you could be left alone to worry about null dereferencing at runtime, this doesn't compile - quite rightly. Of course, <code>mutableProperty</code> may no longer be null once within the 'if'.</p>\n\n<p>My question is what's the best way to handle this?</p>\n\n<p>A few options are apparent. Without using any new Kotlin language features, the simplest way is obviously to copy the value to a method-scope one that won't subsequently change.</p>\n\n<p>There's this:</p>\n\n<pre><code>fun function(argument: SomeOtherClass) {\n    argument.mutableProperty?.let {\n        doSomething(it)\n        return\n    }\n    doOtherThing()\n}\n</code></pre>\n\n<p>This has the obvious disadvantage that you need to return early or otherwise avoid executing the subsequent code - OK in certain, small contexts, but has a smell to it.</p>\n\n<p>Then there's this possibility:</p>\n\n<pre><code>fun function(argument: SomeOtherClass) {\n    argument.mutableProperty.let {\n        when {\n            it != null -&gt; {\n                doSomething(it)\n            }\n            else -&gt; {\n                doOtherThing()\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>but whilst it has greater clarity of purpose, arguably it's more unwieldy and verbose than the Java-style way of dealing with this.</p>\n\n<p>Am I missing anything, and is there a preferred idiom with which to achieve this?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25612, "user_id": 423105, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ced7f76fd1b5573ce3bdce2f3392df04?s=128&d=identicon&r=PG", "display_name": "LarsH", "link": "https://stackoverflow.com/users/423105/larsh"}, "edited": false, "score": 2, "creation_date": 1589836500, "post_id": 45875491, "comment_id": 109447089, "body": "Existing answers have already told what a receiver is, but it may be helpful to understand where the word comes from: in message-passing object-oriented languages like Smalltalk, method calls are conceived of as messages passed to an object. The object on which the method is called is the &quot;receiver&quot; of the message."}], "answers": [{"comments": [{"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1503731371, "post_id": 45875492, "comment_id": 78744807, "body": "Question: I read <code>(Foo).() -&gt; Unit</code> as a function that takes a <code>Foo</code> as a receiver and no parameter. If that&#39;s true, how come you&#39;re invoking it with an argument <code>Foo()</code>?"}, {"owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "reply_to_user": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 1, "creation_date": 1503793651, "post_id": 45875492, "comment_id": 78760423, "body": "@AbhijitSarkar Function types with a receiver have their parameter list prefixed with the receiver. This should be in the main body of the post, editing in.."}, {"owner": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "edited": false, "score": 0, "creation_date": 1509898847, "post_id": 45875492, "comment_id": 81197550, "body": "You can also have multiple receivers when you define extension inside class"}, {"owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "reply_to_user": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "edited": false, "score": 0, "creation_date": 1510010634, "post_id": 45875492, "comment_id": 81245294, "body": "@Panel You raise a valid point, but if somebody comes for this post to understand what a receiver is, the <a href=\"https://kotlinlang.org/docs/reference/extensions.html#declaring-extensions-as-members\" rel=\"nofollow noreferrer\">static/virtual dispatch differences</a> might be a too high bar...heck, even trips me up sometimes."}, {"owner": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "edited": false, "score": 1, "creation_date": 1512839204, "post_id": 45875492, "comment_id": 82422452, "body": "Here is details explanation of different kind of receivers. <a href=\"https://blog.kotlin-academy.com/programmer-dictionary-receiver-b085b1620890\" rel=\"nofollow noreferrer\">blog.kotlin-academy.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "is_accepted": true, "score": 127, "last_activity_date": 1522870474, "last_edit_date": 1592644375, "creation_date": 1503642125, "answer_id": 45875492, "question_id": 45875491, "link": "https://stackoverflow.com/questions/45875491/what-is-a-receiver-in-kotlin/45875492#45875492", "title": "What is a &quot;receiver&quot; in Kotlin?", "body": "<p>It is true that there appears to be little existing documentation for the concept of receivers (only a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-literals-with-receiver\" rel=\"noreferrer\">small side note related to extension functions</a>), which is surprising given:</p>\n<ul>\n<li>their existence springing out of <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"noreferrer\">extension functions</a>;</li>\n<li>their role in <a href=\"https://kotlinlang.org/docs/reference/type-safe-builders.html\" rel=\"noreferrer\">building a DSL</a> using said extension functions;</li>\n<li>the existance of a standard library <strong>function</strong> <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/with.html\" rel=\"noreferrer\"><code>with</code></a>, which given no knowledge of receivers might look like a <em>keyword</em>;</li>\n<li>a completely <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\" rel=\"noreferrer\">seperate syntax for function types</a>.</li>\n</ul>\n<p>All these topics have documentation, but nothing goes in-depth on receivers.</p>\n<hr />\n<p>First:</p>\n<h1>What's a receiver?</h1>\n<p>Any block of code in Kotlin may have a (or even multiple) types as a <strong>receiver</strong>, making functions and properties of the receiver available in that block of code without qualifiying it.</p>\n<p>Imagine a block of code like this:</p>\n<pre><code>{ toLong() }\n</code></pre>\n<p>Doesn't make much sense, right? In fact, assigning this to a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\" rel=\"noreferrer\">function type</a> of <code>(Int) -&gt; Long</code> - where <code>Int</code> is the (only) parameter, and the return type is <code>Long</code> - would rightfully result in a compilation error. You can fix this by simply qualifying the function call with the implicit single parameter <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#it-implicit-name-of-a-single-parameter\" rel=\"noreferrer\"><code>it</code></a>. However, for DSL building, this will cause a bunch of issues:</p>\n<ul>\n<li>Nested blocks of DSL will have their upper layers shadowed:<br />\n<code>html { it.body { // how to access extensions of html here? } ... }</code><br />\nThis may not cause issues for a HTML DSL, but may for other use cases.</li>\n<li>It can litter the code with <code>it</code> calls, especially for lambdas that use their parameter (soon to be receiver) a lot.</li>\n</ul>\n<p>This is where <strong>receivers</strong> come into play.</p>\n<p>By assigning this block of code to a function type that has <code>Int</code> as a <strong>receiver</strong> (not as a parameter!), the code suddenly compiles:</p>\n<pre><code>val intToLong: Int.() -&gt; Long = { toLong() }\n</code></pre>\n<p>Whats going on here?</p>\n<hr />\n<h3>A little sidenote</h3>\n<p>This topic assumes familarity with <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\" rel=\"noreferrer\">function types</a>, but a little side note for receivers is needed.</p>\n<p>Function types can also have <em>one</em> receiver, by prefixing it with the type and a dot. Examples:</p>\n<pre><code>Int.() -&gt; Long  // taking an integer as receiver producing a long\nString.(Long) -&gt; String // taking a string as receiver and long as parameter producing a string\nGUI.() -&gt; Unit // taking an GUI and producing nothing\n</code></pre>\n<p>Such function types have their parameter list prefixed with the receiver type.</p>\n<hr />\n<h1>Resolving code with receivers</h1>\n<p>It is actually incredibly easy to understand how blocks of code with receivers are handled:</p>\n<p><strong>Imagine that, similiar to extension functions, the block of code is evaluated inside the class of the receiver type. <a href=\"https://kotlinlang.org/docs/reference/this-expressions.html\" rel=\"noreferrer\">this</a> effectively becomes amended by the receiver type.</strong></p>\n<p>For our earlier example, <code>val intToLong: Int.() -&gt; Long = { toLong() } </code>, it effectively results in the block of code being evaluated in a different context, as if it was placed in a function inside <code>Int</code>. Here's a different example using handcrafted types that showcases this better:</p>\n<pre><code>class Bar\n\nclass Foo {\n    fun transformToBar(): Bar = TODO()\n}\n\nval myBlockOfCodeWithReceiverFoo: (Foo).() -&gt; Bar = { transformToBar() }\n</code></pre>\n<p>effectively becomes (in the mind, not code wise - you cannot actually extend classes on the JVM):</p>\n<pre><code>class Bar \n\nclass Foo {\n    fun transformToBar(): Bar = TODO()\n\n    fun myBlockOfCode(): Bar { return transformToBar() }\n}\n\nval myBlockOfCodeWithReceiverFoo: (Foo) -&gt; Bar = { it.myBlockOfCode() }\n</code></pre>\n<p>Notice how inside of a class, we don't need to use <code>this</code> to access <code>transformToBar</code> - the same thing happens in a block with a receiver.</p>\n<p>It just so happens that the documentation on <a href=\"https://kotlinlang.org/docs/reference/this-expressions.html\" rel=\"noreferrer\">this</a> also explains how to use an outermost receiver if the current block of code has two receivers, via a <a href=\"https://kotlinlang.org/docs/reference/this-expressions.html#qualified\" rel=\"noreferrer\">qualified this</a>.</p>\n<hr />\n<h1>Wait, multiple receivers?</h1>\n<p>Yes. A block of code can have <em>multiple</em> receivers, but this currently has no  expression in the type system. The only way to archieve this is via multiple <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"noreferrer\">higher-order functions</a> that take a single receiver function type. Example:</p>\n<pre><code>class Foo\nclass Bar\n\nfun Foo.functionInFoo(): Unit = TODO()\nfun Bar.functionInBar(): Unit = TODO()\n\ninline fun higherOrderFunctionTakingFoo(body: (Foo).() -&gt; Unit) = body(Foo())\ninline fun higherOrderFunctionTakingBar(body: (Bar).() -&gt; Unit) = body(Bar())\n\nfun example() {\n    higherOrderFunctionTakingFoo {\n        higherOrderFunctionTakingBar {\n            functionInFoo()\n            functionInBar()\n        }\n    }\n}\n</code></pre>\n<p>Do note that if this feature of the Kotlin language seems inappropriate for your DSL, <a href=\"https://kotlinlang.org/docs/reference/type-safe-builders.html#scope-control-dslmarker-since-11\" rel=\"noreferrer\">@DslMarker</a> is your friend!</p>\n<hr />\n<h1>Conclusion</h1>\n<p>Why does all of this matter? With this knowledge:</p>\n<ul>\n<li>you now understand why you can write <code>toLong()</code> in an extension function on a number, instead of having to reference the number somehow. <a href=\"https://stackoverflow.com/a/35321347/7079453\">Maybe your extension function shouldn't be an extension?</a></li>\n<li>You can build a DSL for your favorite markup language, maybe help parsing the one or other (<a href=\"https://stackoverflow.com/a/1732454/7079453\">who needs regular expressions?</a>!).</li>\n<li>You understand why <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/with.html\" rel=\"noreferrer\"><code>with</code></a>, a standard library <strong>function</strong> and not a keyword, exists - the act of amending the scope of a block of code to save on redudant typing is so common, the language designers put it right in the standard library.</li>\n<li>(maybe) you learned a bit about function types on the offshoot.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1630, "user_id": 3256989, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/1RHkQ.jpg?s=128&g=1", "display_name": "ultraon", "link": "https://stackoverflow.com/users/3256989/ultraon"}, "edited": false, "score": 2, "creation_date": 1535564433, "post_id": 47622578, "comment_id": 91116845, "body": "In this case we can make different type of calls: greet(&quot;my text&quot;) which has the same effect with &quot;my text&quot;.greet()"}, {"owner": {"reputation": 25612, "user_id": 423105, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ced7f76fd1b5573ce3bdce2f3392df04?s=128&d=identicon&r=PG", "display_name": "LarsH", "link": "https://stackoverflow.com/users/423105/larsh"}, "edited": false, "score": 0, "creation_date": 1589837995, "post_id": 47622578, "comment_id": 109447697, "body": "I don&#39;t get it. <code>greet</code> is defined as a method that has a <code>String</code> receiver but no parameters. So I understand how we can call <code>&quot;Fitzgerald&quot;.greet()</code>, but how can we call <code>greet(&quot;Fitzgerald&quot;)</code>?"}, {"owner": {"reputation": 25612, "user_id": 423105, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ced7f76fd1b5573ce3bdce2f3392df04?s=128&d=identicon&r=PG", "display_name": "LarsH", "link": "https://stackoverflow.com/users/423105/larsh"}, "edited": false, "score": 0, "creation_date": 1589838053, "post_id": 47622578, "comment_id": 109447732, "body": "(FYI the link to the Simon Wirtz article is broken.)"}], "tags": [], "owner": {"reputation": 2306, "user_id": 5875726, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q61wv.jpg?s=128&g=1", "display_name": "wooldridgetm", "link": "https://stackoverflow.com/users/5875726/wooldridgetm"}, "is_accepted": false, "score": 14, "last_activity_date": 1522090882, "last_edit_date": 1522090882, "creation_date": 1512330565, "answer_id": 47622578, "question_id": 45875491, "link": "https://stackoverflow.com/questions/45875491/what-is-a-receiver-in-kotlin/47622578#47622578", "title": "What is a &quot;receiver&quot; in Kotlin?", "body": "<pre><code>var greet: String.() -&gt; Unit = { println(\"Hello $this\") }\n</code></pre>\n\n<p>this defines a variable of <em>type</em> <code>String.() -&gt; Unit</code>, which tells you</p>\n\n<ul>\n<li><strong><code>String</code></strong> is the <strong>receiver</strong> </li>\n<li><code>() -&gt; Unit</code> is the function type</li>\n</ul>\n\n<p>Like <a href=\"https://stackoverflow.com/users/7079453/f-george\">F. George</a> mentioned above, all methods of this receiver can be called in the method body. </p>\n\n<p>So, in our example, <code>this</code> is used to print the <code>String</code>. The function can be invoked by writing...</p>\n\n<pre><code>greet(\"Fitzgerald\") // result is \"Hello Fitzgerald\"\n</code></pre>\n\n<p><sub>the above code snippet was taken from <a href=\"https://blog.simon-wirtz.de/function-literals-with-receiver-quick-introduction/\" rel=\"noreferrer\">Kotlin Function Literals with Receiver \u2013 Quick Introduction</a> by Simon Wirtz.</sub></p>\n"}, {"comments": [{"owner": {"reputation": 5596, "user_id": 7365866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iNhGH.png?s=128&g=1", "display_name": "Ben Butterworth", "link": "https://stackoverflow.com/users/7365866/ben-butterworth"}, "edited": false, "score": 0, "creation_date": 1598176823, "post_id": 48248399, "comment_id": 112367259, "body": "As this may be the first time you see this syntax, the <code>{...}</code> in <code>apply{...}</code> is just the lambda function as argument to <code>apply</code>. The lambda is a <i>trailing lambda</i>, where it doesn&#39;t have to be in the apply parentheses. It could actually be apply({...}), which would be less confusing for me when first learning this. <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#passing-a-lambda-to-the-last-parameter\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 14, "last_activity_date": 1598178124, "last_edit_date": 1598178124, "creation_date": 1515923542, "answer_id": 48248399, "question_id": 45875491, "link": "https://stackoverflow.com/questions/45875491/what-is-a-receiver-in-kotlin/48248399#48248399", "title": "What is a &quot;receiver&quot; in Kotlin?", "body": "<h3><a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-literals-with-receiver\" rel=\"nofollow noreferrer\">Function Literals/Lambda with Receiver</a></h3>\n<p>Kotlin supports the concept of \u201cfunction literals with receivers\u201d. It enables the access on visible methods and properties of a <strong>receiver</strong> of a lambda in its body <em>without any additional qualifiers</em>. This is very <strong>similar to extension functions</strong> in which it\u2019s also possible to access visible members of the receiver object inside the extension.</p>\n<p>A simple example, also one of the greatest functions in the Kotlin standard library, is <code>apply</code>:</p>\n<pre><code>public inline fun &lt;T&gt; T.apply(block: T.() -&gt; Unit): T { block(); return this }\n</code></pre>\n<p>As you can see, such a function literal with receiver is taken as the argument <code>block</code> here. This block is simply executed and the receiver (which is an instance of <code>T</code>) is returned. In action this looks as follows:</p>\n<pre><code>val foo: Bar = Bar().apply {\n    color = RED\n    text = &quot;Foo&quot;\n}\n</code></pre>\n<p>We instantiate an object of <code>Bar</code> and call <code>apply</code> on it. The instance of <code>Bar</code> becomes the \u201creceiver\u201d. The <code>block</code>, passed as an argument in <code>{}</code>(lambda expression) does not need to use additional qualifiers to access and modify the shown visible properties <code>color</code> and <code>text</code>.</p>\n<p>The concept of lambdas with receiver is also the most important feature for writing DSLs with Kotlin.</p>\n"}, {"comments": [{"owner": {"reputation": 649, "user_id": 11764886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ecb317dd7f3f9dff08a257b3b48a83d?s=128&d=identicon&r=PG&f=1", "display_name": "Waldmann", "link": "https://stackoverflow.com/users/11764886/waldmann"}, "edited": false, "score": 1, "creation_date": 1600237263, "post_id": 55553940, "comment_id": 113019988, "body": "the only adequate answer"}], "tags": [], "owner": {"reputation": 2415, "user_id": 1476829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5df0807d13026226a2a0bb51d62f3fe8?s=128&d=identicon&r=PG", "display_name": "GraSim", "link": "https://stackoverflow.com/users/1476829/grasim"}, "is_accepted": false, "score": 10, "last_activity_date": 1569713168, "last_edit_date": 1569713168, "creation_date": 1554589093, "answer_id": 55553940, "question_id": 45875491, "link": "https://stackoverflow.com/questions/45875491/what-is-a-receiver-in-kotlin/55553940#55553940", "title": "What is a &quot;receiver&quot; in Kotlin?", "body": "<p>Simply put ( without any extra words or complications) , the \"Receiver\" is the type being extended in the extension function or the class name.  Using the examples given in answers above </p>\n\n<pre><code> fun Foo.functionInFoo(): Unit = TODO()\n</code></pre>\n\n<p>Type \"Foo\" is the \"Receiver\"</p>\n\n<pre><code> var greet: String.() -&gt; Unit = { println(\"Hello $this\") }\n</code></pre>\n\n<p>Type \"String\" is the \"Receiver\"</p>\n\n<p>Additional tip: Look out for the Class before the fullstop(.) in the \"fun\" (function) declaration</p>\n\n<pre><code>fun receiver_class.function_name() {\n   //...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4653, "user_id": 914587, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/WNFJV.png?s=128&g=1", "display_name": "Lou Morda", "link": "https://stackoverflow.com/users/914587/lou-morda"}, "is_accepted": false, "score": 1, "last_activity_date": 1599871203, "creation_date": 1599871203, "answer_id": 63855814, "question_id": 45875491, "link": "https://stackoverflow.com/questions/45875491/what-is-a-receiver-in-kotlin/63855814#63855814", "title": "What is a &quot;receiver&quot; in Kotlin?", "body": "<p>Typically in Java or Kotlin you have methods or functions with input parameters of type T. In Kotlin you can also have extension functions that receive a value of type T.</p>\n<p>If you have a function that accepts a String parameter for example:</p>\n<pre><code>fun hasWhitespace(line: String): Boolean {\n    for (ch in line) if (ch.isWhitespace()) return true\n    return false\n}\n</code></pre>\n<p>converting the parameter to a receiver (which you can do automatically with IntelliJ):</p>\n<pre><code>fun String.hasWhitespace(): Boolean {\n    for (ch in this) if (ch.isWhitespace()) return true\n    return false\n}\n</code></pre>\n<p>we now have an extension function that receives a String and we can access the value with <code>this</code></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5930157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2dbac6ec448fbfbfa4de90ae7d6e4e?s=128&d=identicon&r=PG&f=1", "display_name": "douglas mbogz", "link": "https://stackoverflow.com/users/5930157/douglas-mbogz"}, "is_accepted": false, "score": 1, "last_activity_date": 1603142860, "last_edit_date": 1603142860, "creation_date": 1603142448, "answer_id": 64435236, "question_id": 45875491, "link": "https://stackoverflow.com/questions/45875491/what-is-a-receiver-in-kotlin/64435236#64435236", "title": "What is a &quot;receiver&quot; in Kotlin?", "body": "<p>The object instance before the . is the receiver. This is in essence the &quot;Scope&quot; you will define this lambda within. This is all you need to know, really, because the functions and properties(varibles, companions e.t.c) you will be using in the lambda will be those provided within this scope.</p>\n<pre><code>        class Music(){\n    \n        var track:String=&quot;&quot;\n    \n        fun printTrack():Unit{\n            println(track)\n        }\n    }\n    \n    //Music class is the receiver of this function, in other words, the lambda can be piled after a Music class just like its extension function Since Music is an instance, refer to it by 'this', refer to lambda parameters by 'it', like always\n    val track_name:Music.(String)-&gt;Unit={track=it;printTrack()}\n/*Create an Instance of Music and immediately call its function received by the name 'track_name', and exclusively available to instances of this class*/\nMusic().track_name(&quot;Still Breathing&quot;)\n\n//Output\nStill Breathing\n</code></pre>\n<p>You define this variable with and all the parameters and return types it will have but among all the constructs defined, only the object instance can call the var, just like it would an extension function and supply to it its constructs, hence &quot;receiving&quot; it.\nA receiver would hence be loosely defined as an object for which an extension function is defined using the idiomatic style of lambdas.</p>\n"}, {"tags": [], "owner": {"reputation": 9738, "user_id": 4858777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R121o.png?s=128&g=1", "display_name": "Valeriy Katkov", "link": "https://stackoverflow.com/users/4858777/valeriy-katkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1611847346, "creation_date": 1611847346, "answer_id": 65940080, "question_id": 45875491, "link": "https://stackoverflow.com/questions/45875491/what-is-a-receiver-in-kotlin/65940080#65940080", "title": "What is a &quot;receiver&quot; in Kotlin?", "body": "<p>Simply put:</p>\n<ul>\n<li>the <strong>receiver type</strong> is the type an <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extension-functions\" rel=\"nofollow noreferrer\">extension function</a> extends</li>\n<li>the <strong>receiver object</strong> is the object an extension function is called on; the <code>this</code> keyword inside the function body corresponds to the receiver object</li>\n</ul>\n<p>An extension function example:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// `Int` is the receiver type\n// `this` is the receiver object\nfun Int.squareDouble() = toLong() * this\n\n// a receiver object `8` of type `Int` is passed to the `square` function\nval result = 8.square()\n</code></pre>\n<p>A <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-literals-with-receiver\" rel=\"nofollow noreferrer\">function literal</a> example, which is pretty much the same:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// `Int` is the receiver type\n// `this` is the receiver object\nval square: Int.() -&gt; Long = { toLong() * this }\n\n// a receiver object `8` of type `Int` is passed to the `square` function\nval result1 = 8.square()\nval result2 = square(8) // this call is equal to the previous one\n</code></pre>\n"}], "owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15531, "favorite_count": 39, "accepted_answer_id": 45875492, "answer_count": 7, "score": 83, "last_activity_date": 1611847346, "creation_date": 1503642125, "last_edit_date": 1503670434, "question_id": 45875491, "link": "https://stackoverflow.com/questions/45875491/what-is-a-receiver-in-kotlin", "title": "What is a &quot;receiver&quot; in Kotlin?", "body": "<p>How is it related to extension functions? Why is <code>with</code> <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/with.html\" rel=\"noreferrer\">a function</a>, not a keyword?</p>\n\n<p>There appears to be no explicit documentation for this topic, only the assumption of knowledge in reference to <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"noreferrer\">extensions</a>.</p>\n"}]