[{"tags": ["java", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "is_accepted": true, "score": 3, "last_activity_date": 1491410656, "last_edit_date": 1491410656, "creation_date": 1491408471, "answer_id": 43236366, "question_id": 43235423, "link": "https://stackoverflow.com/questions/43235423/converted-java-class-file-to-kotlin-makes-compilation-error/43236366#43236366", "title": "Converted java class file to kotlin makes compilation error", "body": "<p>You have two issues with your code, as far as I can tell.</p>\n\n<p>First is that Kotlin doesn't allow using lambdas to implement Kotlin functional interfaces, so your lambda isn't going to work (it does allow implementing Java functional interfaces, because Java doesn't have proper function types). So to call the code unchanged, you want to use object notation instead:</p>\n\n<pre><code>request.enqueue(CallbackWrapper&lt;RegisterResponse&gt;(object : CallbackWrapper.Wrapper&lt;RegisterResponse&gt; {\n        override fun onResult(throwable: Throwable?, response: Response&lt;RegisterResponse&gt;?) {\n            response?.let { callBack.onResponse(response.body() ?: RegisterResponse()) }\n            throwable?.let { callBack.onFailure(throwable.message!!) }\n        }\n    }))\n</code></pre>\n\n<p>You can declare your <code>CallbackWrapper</code> class differently if you prefer using lambdas:</p>\n\n<pre><code>typealias Wrapper&lt;T&gt; = (t: Throwable?, response: Response&lt;T&gt;?) -&gt; Unit\nclass OtherCallbackWrapper&lt;T&gt;(val wrapper: Wrapper&lt;T&gt;) : Callback&lt;T&gt; {\n    override fun onFailure(call: Call&lt;T&gt;, t: Throwable) = wrapper.invoke(t, null)\n    override fun onResponse(call: Call&lt;T&gt;, response: Response&lt;T&gt;) = wrapper.invoke(null, response)\n}\n</code></pre>\n\n<p>So that's the <code>but CallbackWrapper.Wrapper&lt;RegisterResponse&gt; was expected\n</code> part taken care of.</p>\n\n<p>This still won't work, though, which brings us to the reason the first half of the error message is <code>inferred type is (???, ???) -&gt; [ERROR :&lt;ERROR FUNCTION RETURN TYPE&gt;]</code>. That's basically type inference failing. The calls to <code>callBack</code> don't quite seem to match the <code>CallBack</code> interface implied by CallbackWrapper, which I expect might have something to do with it.</p>\n\n<p>EDIT:</p>\n\n<p>Added an answer to your Retrofit question with a more concise solution.</p>\n"}], "owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "accepted_answer_id": 43236366, "answer_count": 1, "score": 3, "last_activity_date": 1495229180, "creation_date": 1491405724, "question_id": 43235423, "link": "https://stackoverflow.com/questions/43235423/converted-java-class-file-to-kotlin-makes-compilation-error", "title": "Converted java class file to kotlin makes compilation error", "body": "<p>I have a java class file which works fine, but if I convert it to Kotlin it makes some problem. Here is a Java version </p>\n\n<pre><code> public class CallbackWrapper&lt;T&gt; implements Callback&lt;T&gt; {\n   private Wrapper&lt;T&gt; wrapper;\n\n   public CallbackWrapper(Wrapper&lt;T&gt; wrapper) {\n      this.wrapper = wrapper;\n   }\n\n   public void onFailure(Call&lt;T&gt; call, Throwable t) {\n      wrapper.onResult(t, null);\n   }\n\n   public void onResponse(Call&lt;T&gt; call, Response&lt;T&gt; response) {\n      wrapper.onResult(null, response);\n   }\n\n   public interface Wrapper&lt;T&gt; {\n      void onResult(@Nullable Throwable t, @Nullable Response&lt;T&gt; response);\n   }\n}\n</code></pre>\n\n<p>And this is how I'm using this class without any problem...</p>\n\n<pre><code>request.enqueue(CallbackWrapper&lt;RegisterResponse&gt; { throwable, response -&gt;\n     response?.let { callBack.onResponse(response.body() ?: RegisterResponse()) }\n     throwable?.let { callBack.onFailed(throwable.message!!) }\n })\n</code></pre>\n\n<p>And here is Kotlin version after converting</p>\n\n<pre><code>class CallbackWrapper&lt;T&gt;(private val wrapper: CallbackWrapper.Wrapper&lt;T&gt;) : Callback&lt;T&gt; {\n\n    override fun onFailure(call: Call&lt;T&gt;, t: Throwable) {\n        wrapper.onResult(t, null)\n    }\n\n    override fun onResponse(call: Call&lt;T&gt;, response: Response&lt;T&gt;) {\n        wrapper.onResult(null, response)\n    }\n\n    interface Wrapper&lt;T&gt; {\n        fun onResult(t: Throwable?, response: Response&lt;T&gt;?)\n    }\n}\n</code></pre>\n\n<p>The problem is that after converting it to Kotlin, code block where I'm using this class were not working. I don't understand what is the difference between them.</p>\n\n<p>Here is compile error log</p>\n\n<pre><code>Error:(17, 63) Type mismatch: inferred type is (???, ???) -&gt; [ERROR :&lt;ERROR FUNCTION RETURN TYPE&gt;] but CallbackWrapper.Wrapper&lt;RegisterResponse&gt; was expected\nError:(17, 65) Cannot infer a type for this parameter. Please specify it explicitly.\nError:(17, 76) Cannot infer a type for this parameter. Please specify it explicitly.\n</code></pre>\n"}, {"tags": ["android-studio", "intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "edited": false, "score": 0, "creation_date": 1491420367, "post_id": 43234587, "comment_id": 73550031, "body": "In looking for usage examples - touring the kotlin-runtime library suggest that files that implement a single class only are rather rare.  Many implement a sequence of functions, and others a sequence of interfaces.  One in particular - text/regex/Regex.xt - has a variety of functions, interfaces, and one public class.   I find that rather refreshing compared to hopping around while browsing code to mentally hook up chains of interfaces and classes.   To me this suggests that Kotlin invites a more logical grouping of functionality in a single file - nice compared to Java."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 9, "last_activity_date": 1491403659, "creation_date": 1491403659, "answer_id": 43234587, "question_id": 43234310, "link": "https://stackoverflow.com/questions/43234310/intellij-and-android-studio-icons-for-kotlin-files/43234587#43234587", "title": "IntelliJ and Android Studio icons for Kotlin files", "body": "<p>Your analysis is correct. If a file defines only a single class, then the Project view node shows that class, instead of the file as a whole. If there are multiple declarations in the file, then the Project view node shows a file icon.</p>\n\n<p>The class icon looks the way it does for consistency with Java class icons in mixed-language projects.</p>\n"}], "owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1619, "favorite_count": 1, "accepted_answer_id": 43234587, "answer_count": 1, "score": 6, "last_activity_date": 1491403659, "creation_date": 1491402986, "question_id": 43234310, "link": "https://stackoverflow.com/questions/43234310/intellij-and-android-studio-icons-for-kotlin-files", "title": "IntelliJ and Android Studio icons for Kotlin files", "body": "<p>I have been tinkering trying to understand what IntelliJ (and Android Studio) are doing to my Kotlin file icons.  In the picture you can see that Kotlin files come with two different icons - either a rectangle with a small \"K\" or a circled C with a small \"K\" (circled in red in the picture).   The rectangle version also includes a useful \".kt\" suffix.</p>\n\n<p>After some tinkering with this black box of a problem - it appears that if the kotlin file <em>just</em> declares a class matching the file name then it gets a \"circled C\" icon.   But if it does anything that is un-Java-like - such as declaring a variable outside the class (e.g. <code>val foo = 42</code>) - then the icon is shifted to the rectangle with the \"K\".  The icon documentation <a href=\"http://www.jetbrains.com/help/idea/2017.1/file-types-recognized-by-intellij-idea.html\" rel=\"noreferrer\">here</a> suggests that IntelliJ thinks the rectangle with the \"K\" is a \"Kotlin file\" whereas the circled C is a \"Kotlin class\".</p>\n\n<p>Does anybody know if there is a deeper meaning to this?   I think I will include a <code>val</code> declaration outside the class just to get my Kotlin file icon symbols all to match.   Then they will also have the handy \".kt\" extension to clearly indicate that they are Kotlin files.</p>\n\n<p>For example - here is code that will change your icon to a rectangle with a \"K\" in file Foo.kt:</p>\n\n<pre><code>val bar = 42;\nclass Foo {}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/CTvCP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/CTvCP.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "firebase", "admob", "kotlin"], "comments": [{"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1491404386, "post_id": 43234075, "comment_id": 73539896, "body": "please show your code ?"}, {"owner": {"reputation": 63, "user_id": 4154321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3746208117061518d29a97b6683dca?s=128&d=identicon&r=PG", "display_name": "Basix", "link": "https://stackoverflow.com/users/4154321/basix"}, "reply_to_user": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1491404947, "post_id": 43234075, "comment_id": 73540328, "body": "@AbhishekAryan Edited, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "reply_to_user": {"reputation": 63, "user_id": 4154321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3746208117061518d29a97b6683dca?s=128&d=identicon&r=PG", "display_name": "Basix", "link": "https://stackoverflow.com/users/4154321/basix"}, "edited": false, "score": 0, "creation_date": 1491406007, "post_id": 43235436, "comment_id": 73541067, "body": "can you post your layout.xml ?"}, {"owner": {"reputation": 63, "user_id": 4154321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3746208117061518d29a97b6683dca?s=128&d=identicon&r=PG", "display_name": "Basix", "link": "https://stackoverflow.com/users/4154321/basix"}, "edited": false, "score": 0, "creation_date": 1491410888, "post_id": 43235436, "comment_id": 73544367, "body": "@AbhisekAryan I posted :)"}, {"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "reply_to_user": {"reputation": 63, "user_id": 4154321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3746208117061518d29a97b6683dca?s=128&d=identicon&r=PG", "display_name": "Basix", "link": "https://stackoverflow.com/users/4154321/basix"}, "edited": false, "score": 0, "creation_date": 1491414435, "post_id": 43235436, "comment_id": 73546545, "body": "check your dependency may be you have version mismatch such as x-ad.jar is dependent jar of x-base.jar ,both are different version."}], "tags": [], "owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1491405756, "creation_date": 1491405756, "answer_id": 43235436, "question_id": 43234075, "link": "https://stackoverflow.com/questions/43234075/firebase-admob-throws-incompatibleclasschangeerror/43235436#43235436", "title": "Firebase AdMob throws IncompatibleClassChangeError", "body": "<p>If adView is id of <code>AdView</code> in your activity_main.xml</p>\n\n<p>Then you can use in this way :</p>\n\n<pre><code>private AdView mAdView;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    setContentView(R.layout.activity_main);  //layout having AdView\n    mAdView = (AdView) findViewById(R.id.adView);\n\n    AdRequest.Builder builder =new AdRequest.Builder();\n    builder.addTestDevice(AdRequest.DEVICE_ID_EMULATOR);\n    AdRequest adRequest = builder.build();\n    mAdView.loadAd(adRequest);\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9163, "user_id": 1108397, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/XChaT.png?s=128&g=1", "display_name": "rupps", "link": "https://stackoverflow.com/users/1108397/rupps"}, "edited": false, "score": 1, "creation_date": 1495143330, "post_id": 44029985, "comment_id": 75141228, "body": "oh god! that was it"}], "tags": [], "owner": {"reputation": 63, "user_id": 4154321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3746208117061518d29a97b6683dca?s=128&d=identicon&r=PG", "display_name": "Basix", "link": "https://stackoverflow.com/users/4154321/basix"}, "is_accepted": true, "score": 1, "last_activity_date": 1495037539, "creation_date": 1495037539, "answer_id": 44029985, "question_id": 43234075, "link": "https://stackoverflow.com/questions/43234075/firebase-admob-throws-incompatibleclasschangeerror/44029985#44029985", "title": "Firebase AdMob throws IncompatibleClassChangeError", "body": "<p>It was a version problem. Make sure you have the same version of <code>firebase-core</code> and <code>firebase-ads</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 4154321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3746208117061518d29a97b6683dca?s=128&d=identicon&r=PG", "display_name": "Basix", "link": "https://stackoverflow.com/users/4154321/basix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 44029985, "answer_count": 2, "score": 1, "last_activity_date": 1495037539, "creation_date": 1491402436, "last_edit_date": 1491409412, "question_id": 43234075, "link": "https://stackoverflow.com/questions/43234075/firebase-admob-throws-incompatibleclasschangeerror", "title": "Firebase AdMob throws IncompatibleClassChangeError", "body": "<pre><code>java.lang.IncompatibleClassChangeError: Superclass com.google.android.gms.dynamic.zzg of com.google.android.gms.internal.zzdx is declared final (declaration of 'com.google.android.gms.internal.zzdx' appears in /data/app/io.github.basixkor.scipnet-1/split_lib_dependencies_apk.apk:classes12.dex)\n    at com.google.android.gms.internal.zzeh.zzeO(Unknown Source)\n    at com.google.android.gms.internal.zzey.&lt;clinit&gt;(Unknown Source)\n    at com.google.android.gms.ads.AdRequest.&lt;clinit&gt;(Unknown Source)\n    at com.google.android.gms.ads.AdRequest$Builder.&lt;init&gt;(Unknown Source)\n</code></pre>\n\n<p>This is a stack trace thrown by calling a <code>AdRequest</code>. I tried clean, and rebuild but it still not working.</p>\n\n<pre><code>find&lt;AdView&gt;(R.id.adView).loadAd(AdRequest.Builder().addTestDevice(AdRequest.DEVICE_ID_EMULATOR).build())\n</code></pre>\n\n<p>This code is a kotlin code for load a ad.</p>\n\n<pre><code>&lt;com.google.android.gms.ads.AdView\n    android:id=\"@+id/adView\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_centerHorizontal=\"true\"\n    android:layout_alignParentBottom=\"true\"\n    ads:adSize=\"BANNER\"\n    ads:adUnitId=\"@string/banner_ad_unit_id\" /&gt;\n</code></pre>\n\n<p>And this is a layout.\nHow do I solve this error?</p>\n"}, {"tags": ["android", "retrofit", "kotlin", "higher-order-functions"], "comments": [{"owner": {"reputation": 1007, "user_id": 4090338, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/TksWZ.jpg?s=128&g=1", "display_name": "David Kasabji", "link": "https://stackoverflow.com/users/4090338/david-kasabji"}, "edited": false, "score": 0, "creation_date": 1491400052, "post_id": 43233025, "comment_id": 73536147, "body": "Are you using RetroLambda plugin?"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "reply_to_user": {"reputation": 1007, "user_id": 4090338, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/TksWZ.jpg?s=128&g=1", "display_name": "David Kasabji", "link": "https://stackoverflow.com/users/4090338/david-kasabji"}, "edited": false, "score": 0, "creation_date": 1491400101, "post_id": 43233025, "comment_id": 73536188, "body": "Nope, I&#39;m using Kotlin"}, {"owner": {"reputation": 1007, "user_id": 4090338, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/TksWZ.jpg?s=128&g=1", "display_name": "David Kasabji", "link": "https://stackoverflow.com/users/4090338/david-kasabji"}, "edited": false, "score": 0, "creation_date": 1491400487, "post_id": 43233025, "comment_id": 73536543, "body": "I think with Kotlin you can still use Lambda expressions. Please check, I think that is what you seek."}, {"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "reply_to_user": {"reputation": 1007, "user_id": 4090338, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/TksWZ.jpg?s=128&g=1", "display_name": "David Kasabji", "link": "https://stackoverflow.com/users/4090338/david-kasabji"}, "edited": false, "score": 5, "creation_date": 1491400706, "post_id": 43233025, "comment_id": 73536698, "body": "@DavidK the whole point is that <code>Callback</code> is not a functional interface, so it cannot be expressed as a lambda."}], "answers": [{"comments": [{"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1491402892, "post_id": 43233493, "comment_id": 73538596, "body": "Nice solution, also add &lt;T&gt; to the Wrapper inside the constructor for explicitly return type"}, {"owner": {"reputation": 1272, "user_id": 7849868, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Vc1rsnMNuKA/AAAAAAAAAAI/AAAAAAAAABQ/H706nOLCtSE/photo.jpg?sz=128", "display_name": "Shujat Munawar", "link": "https://stackoverflow.com/users/7849868/shujat-munawar"}, "edited": false, "score": 0, "creation_date": 1549406792, "post_id": 43233493, "comment_id": 95889391, "body": "Thank you so much  Perfect answer for both Java and Kotlin"}], "tags": [], "owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "is_accepted": false, "score": 6, "last_activity_date": 1530804435, "last_edit_date": 1530804435, "creation_date": 1491401011, "answer_id": 43233493, "question_id": 43233025, "link": "https://stackoverflow.com/questions/43233025/use-retrofit-methods-more-expressive-way/43233493#43233493", "title": "Use Retrofit methods more expressive way", "body": "<p>What you can do is this (this is Java as I don't know much Kotlin, but that should be pretty similar):</p>\n\n<pre><code>public class CallbackWrapper&lt;T&gt; implements Callback&lt;T&gt; {\n    private Wrapper&lt;T&gt; wrapper;\n\n    public CallbackWrapper(Wrapper&lt;T&gt; wrapper) {\n        this.wrapper = wrapper;\n    }\n\n    public void onFailure(Call&lt;T&gt; call, Throwable t) {\n        wrapper.onResult(t, null);\n    }\n\n    public void onResponse(Call&lt;T&gt; call, Response&lt;T&gt; response) {\n        wrapper.onResult(null, response);\n    }\n\n    public static interface Wrapper&lt;T&gt; {\n        void onResult(Throwable t, Response&lt;T&gt; response);\n    }\n}\n</code></pre>\n\n<p>Which you can use as:</p>\n\n<pre><code>call.enqueue(new CallbackWrapper((throwable, reponse) - &gt; {...}));\n</code></pre>\n\n<p><strong>update solution for kotlin:</strong></p>\n\n<p>Based on <a href=\"http://quest.sitehome.info/converted-java-class-file-to-kotlin-makes-compilation-error/\" rel=\"nofollow noreferrer\">this</a>, the <code>CallBackWrapper</code> looks like this:</p>\n\n<pre><code>typealias wrapper&lt;T&gt; = (t: Throwable?, response: Response&lt;T&gt;?) -&gt; Unit\n\nclass CallbackWrapper&lt;T&gt;(val wrapper: wrapper&lt;T&gt;) : Callback&lt;T&gt; {\n   override fun onFailure(call: Call&lt;T&gt;?, t: Throwable?) = wrapper.invoke(t,null)\n   override fun onResponse(call: Call&lt;T&gt;?, response: Response&lt;T&gt;?) = wrapper.invoke(null, response)\n}\n</code></pre>\n\n<p>and use it the same as Java.</p>\n"}, {"comments": [{"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1491461600, "post_id": 43237094, "comment_id": 73564848, "body": "Very nice solution"}, {"owner": {"reputation": 3963, "user_id": 3979479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7e93379146d6dc695cb880c34f3879a?s=128&d=identicon&r=PG&f=1", "display_name": "mbo", "link": "https://stackoverflow.com/users/3979479/mbo"}, "edited": false, "score": 1, "creation_date": 1515510533, "post_id": 43237094, "comment_id": 83321622, "body": "In your second version of the callback, could the <code>?</code> removed at the end of <code>fun &lt;T&gt; callback2(success: (Response&lt;T&gt;) -&gt; Unit, failure: (t: Throwable) -&gt; Unit): Callback&lt;T&gt;? {</code>? Or can the callback be null? I&#39;m getting a warning there &quot;Expected type does not accept nulls in Java, but the value may be null in Kotlin&quot;"}, {"owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "edited": false, "score": 0, "creation_date": 1515594674, "post_id": 43237094, "comment_id": 83359208, "body": "That&#39;s what you get for writing code without testing it. Updated the answer."}], "tags": [], "owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "is_accepted": false, "score": 16, "last_activity_date": 1529410591, "last_edit_date": 1529410591, "creation_date": 1491410827, "answer_id": 43237094, "question_id": 43233025, "link": "https://stackoverflow.com/questions/43233025/use-retrofit-methods-more-expressive-way/43237094#43237094", "title": "Use Retrofit methods more expressive way", "body": "<p>Given the following function:</p>\n\n<pre><code>fun &lt;T&gt; callback(fn: (Throwable?, Response&lt;T&gt;?) -&gt; Unit): Callback&lt;T&gt; {\n    return object : Callback&lt;T&gt; {\n        override fun onResponse(call: Call&lt;T&gt;, response: retrofit2.Response&lt;T&gt;) = fn(null, response)\n        override fun onFailure(call: Call&lt;T&gt;, t: Throwable) = fn(t, null)\n    }\n}\n</code></pre>\n\n<p>You can use this with Retrofit like this:</p>\n\n<pre><code>request.enqueue(callback({ throwable, response -&gt;\n response?.let { callBack.onResponse(response.body() ?: RegisterResponse()) }\n throwable?.let { callBack.onFailed(throwable.message!!) })\n</code></pre>\n\n<p>Alternately, you can define this other version of callback:</p>\n\n<pre><code>fun &lt;T&gt; callback2(success: ((Response&lt;T&gt;) -&gt; Unit)?, failure: ((t: Throwable) -&gt; Unit)? = null): Callback&lt;T&gt; {\n    return object : Callback&lt;T&gt; {\n        override fun onResponse(call: Call&lt;T&gt;, response: retrofit2.Response&lt;T&gt;) { success?.invoke(response) }\n        override fun onFailure(call: Call&lt;T&gt;, t: Throwable) { failure?.invoke(t) }\n    }\n}\n</code></pre>\n\n<p><br>\nwhich can be used like this:</p>\n\n<pre><code>request.enqueue(callback2(\n                { r -&gt; callBack.onResponse(r.body()) },\n                { t -&gt; callBack.onFailed(t.message) }))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1577, "user_id": 4233180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FXCjt68DFoA/AAAAAAAAAAI/AAAAAAAAACs/hqpMFb_4--c/photo.jpg?sz=128", "display_name": "Supriya", "link": "https://stackoverflow.com/users/4233180/supriya"}, "is_accepted": false, "score": 5, "last_activity_date": 1523859024, "creation_date": 1523859024, "answer_id": 49850595, "question_id": 43233025, "link": "https://stackoverflow.com/questions/43233025/use-retrofit-methods-more-expressive-way/49850595#49850595", "title": "Use Retrofit methods more expressive way", "body": "<p>I used an extension function on <code>Call</code> to write an expressive and generic <code>enqueue</code> method.</p>\n\n<pre><code>fun&lt;T&gt; Call&lt;T&gt;.onEnqueue(actOnSuccess: (Response&lt;T&gt;) -&gt; Unit, actOnFailure: (t: Throwable?) -&gt; Unit)   {\n    this.enqueue(object: Callback&lt;T&gt;    {\n        override fun onFailure(call: Call&lt;T&gt;?, t: Throwable?) {\n            actOnFailure(t)\n        }\n\n        override fun onResponse(call: Call&lt;T&gt;?, response: Response&lt;T&gt;) {\n            actOnSuccess(response)\n        }\n    })\n}\n</code></pre>\n\n<p>This can then be used as:</p>\n\n<pre><code>request.onEnqueue    {\n    actOnSuccess = {\n        doOnSuccess()\n    }\n    actOnFailure = {\n        doOnFailure()\n    }\n}\n</code></pre>\n\n<p>Within the actOnSuccess and actOnFailure blocks of code, <strong><code>it</code></strong> shall refer to the <code>Response</code> and <code>Throwable</code> objects respectively, and can be leveraged accordingly. For example, within the actOnFailure code block - </p>\n\n<pre><code>actOnFailure = {\n        doOnFailure()\n        //it.message //'it' refers to the Throwable object.\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7509616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63245ef9477888f839d48a9ba7fa600c?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh", "link": "https://stackoverflow.com/users/7509616/ashutosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1540068055, "creation_date": 1540068055, "answer_id": 52909938, "question_id": 43233025, "link": "https://stackoverflow.com/questions/43233025/use-retrofit-methods-more-expressive-way/52909938#52909938", "title": "Use Retrofit methods more expressive way", "body": "<p>You can create an extension function like this</p>\n\n<pre><code>inline fun &lt;T&gt; Call&lt;T&gt;.addEnqueue(\n    crossinline onSuccess: (response: Response&lt;T&gt;) -&gt; Unit = { response: Response&lt;T&gt; -&gt; },\n    crossinline onFail: (t: Throwable) -&gt; Unit = { throwable: Throwable -&gt;}\n):Callback&lt;T&gt; {\n    val callback = object : Callback&lt;T&gt; {\n        override fun onFailure(call: Call&lt;T&gt;, t: Throwable) {\n            onFail(t)\n        }\n\n        override fun onResponse(call: Call&lt;T&gt;, response: Response&lt;T&gt;) {\n            onSuccess(response)\n        }\n    }\n    enqueue(callback)\n    return callback\n}\n</code></pre>\n\n<p>and use it like this in your activity or fragment</p>\n\n<pre><code> service?.fetchUser()?.addEnqueue(\n            onSuccess = {\n                doOnSuccess(it)\n            },\n            onFail = {\n                doOnFail(it)\n            }\n    )    \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5791, "user_id": 3262021, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/qu2VW.png?s=128&g=1", "display_name": "JavierSegoviaCordoba", "link": "https://stackoverflow.com/users/3262021/javiersegoviacordoba"}, "edited": false, "score": 0, "creation_date": 1543617507, "post_id": 53073258, "comment_id": 93997549, "body": "Is there a way to do this with any interface?"}], "tags": [], "owner": {"reputation": 908, "user_id": 5724394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L1uQL.jpg?s=128&g=1", "display_name": "codegames", "link": "https://stackoverflow.com/users/5724394/codegames"}, "is_accepted": true, "score": 36, "last_activity_date": 1540935482, "creation_date": 1540935482, "answer_id": 53073258, "question_id": 43233025, "link": "https://stackoverflow.com/questions/43233025/use-retrofit-methods-more-expressive-way/53073258#53073258", "title": "Use Retrofit methods more expressive way", "body": "<p>this is how i do it with extension function and a class</p>\n\n<pre><code>fun&lt;T&gt; Call&lt;T&gt;.enqueue(callback: CallBackKt&lt;T&gt;.() -&gt; Unit) {\n    val callBackKt = CallBackKt&lt;T&gt;()\n    callback.invoke(callBackKt)\n    this.enqueue(callBackKt)\n}\n\nclass CallBackKt&lt;T&gt;: Callback&lt;T&gt; {\n\n    var onResponse: ((Response&lt;T&gt;) -&gt; Unit)? = null\n    var onFailure: ((t: Throwable?) -&gt; Unit)? = null\n\n    override fun onFailure(call: Call&lt;T&gt;, t: Throwable) {\n        onFailure?.invoke(t)\n    }\n\n    override fun onResponse(call: Call&lt;T&gt;, response: Response&lt;T&gt;) {\n        onResponse?.invoke(response)\n    }\n\n}\n</code></pre>\n\n<p>then you can use it like this</p>\n\n<pre><code>request.enqueue {\n\n    onResponse = {\n        // do\n    }\n\n    onFailure = {\n        // do\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18156, "favorite_count": 12, "accepted_answer_id": 53073258, "answer_count": 5, "score": 36, "last_activity_date": 1545521648, "creation_date": 1491399830, "last_edit_date": 1545521648, "question_id": 43233025, "link": "https://stackoverflow.com/questions/43233025/use-retrofit-methods-more-expressive-way", "title": "Use Retrofit methods more expressive way", "body": "<p>I want to make <code>void enqueue(Callback&lt;T&gt; callback);</code> method invocation code block more expressive, Here is what I have an usually </p>\n\n<pre><code>request.enqueue(object : Callback&lt;MyModel&gt; {\n      override fun onFailure(call: Call&lt;MyModel&gt;?, t: Throwable?) {\n           //\n      }\n\n      override fun onResponse(call: Call&lt;MyModel&gt;?, response: Response&lt;MyModel&gt;?) {\n           //\n      }\n })\n</code></pre>\n\n<p>And what I want and mean is that, to change this code blocks more cleaner way and remove those <strong>override, object, Callback</strong> keywords and do something like that: </p>\n\n<p><code>request.enqueue({throwable, response -&gt; })</code></p>\n\n<p>I think it could be improved somehow using extensions and higher-order functions. Does anyone know how it can be done? </p>\n"}, {"tags": ["android", "testing", "gradle", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1491400586, "post_id": 43232200, "comment_id": 73536608, "body": "This was precisely my issue, I can&#39;t believe I couldn&#39;t find it through Google. I upgraded to the EAP, works like a charm. Thank you!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1491397693, "creation_date": 1491397693, "answer_id": 43232200, "question_id": 43231899, "link": "https://stackoverflow.com/questions/43231899/instrumented-tests-cant-run-in-android-library-modules-that-have-kotlin-files/43232200#43232200", "title": "Instrumented tests can&#39;t run in Android library modules that have Kotlin files", "body": "<p>It is a <a href=\"https://youtrack.jetbrains.com/issue/KT-16854\" rel=\"nofollow noreferrer\">known issue</a> of Kotlin Gradle plugin 1.1.1. It was not present in version 1.1.0, and it has already been fixed for <a href=\"https://discuss.kotlinlang.org/t/kotlin-1-1-2-eap/2457\" rel=\"nofollow noreferrer\">1.1.2 EAP</a>, please try one of these versions.</p>\n"}], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 43232200, "answer_count": 1, "score": 1, "last_activity_date": 1491397693, "creation_date": 1491396980, "question_id": 43231899, "link": "https://stackoverflow.com/questions/43231899/instrumented-tests-cant-run-in-android-library-modules-that-have-kotlin-files", "title": "Instrumented tests can&#39;t run in Android library modules that have Kotlin files", "body": "<p>It's basically in the title, I can't run any instrumented tests in Android library modules that contain Kotlin classes. This is regardless of whether the tests depend on the Kotlin classes.</p>\n\n<p>Here are the simplest steps I could reproduce this issue with:</p>\n\n<ol>\n<li>Create a new Android library project with default settings\n\n<ul>\n<li>Just to check, run example instrumented test, runs fine</li>\n<li>Add a Kotlin class</li>\n<li>Run example instrumented test, still runs fine</li>\n</ul></li>\n<li>Add a new Android library module with all default settings again</li>\n<li>Run example instrumented test, works fine</li>\n<li>Add a Kotlin file, only containing a <code>class Something</code></li>\n<li><p>Attempt to run instrumented test again,  now the build fails with the following message:</p>\n\n<p><code>Error:Execution failed for task ':mylibrary:transformClassesWithDexForDebugAndroidTest'.</code></p>\n\n<p><code>&gt; com.android.build.api.transform.TransformException: com.android.ide.common.process.ProcessException: java.util.concurrent.ExecutionException: com.android.dex.DexException: Multiple dex files define Lco/zsmb/example/mylibrary/Something;</code></p></li>\n</ol>\n"}, {"tags": ["android", "kotlin", "bdd"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 2, "creation_date": 1491389392, "post_id": 43225380, "comment_id": 73527748, "body": "Probably more on-topic at <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a>."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1491389481, "post_id": 43225380, "comment_id": 73527824, "body": "Also, you might want to check out Jake Wharton on the &quot;Robot pattern&quot;: <a href=\"https://realm.io/news/kau-jake-wharton-testing-robots/\" rel=\"nofollow noreferrer\">realm.io/news/kau-jake-wharton-testing-robots</a>."}, {"owner": {"reputation": 2697, "user_id": 925164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cd3a8e1171e914d489afb4a47c07985?s=128&d=identicon&r=PG", "display_name": "Gorcyn", "link": "https://stackoverflow.com/users/925164/gorcyn"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1491396752, "post_id": 43225380, "comment_id": 73533344, "body": "Thanks @nhaarman I missed that. But, his <i>one case</i> approach bugs me. Writing the same test twice for different data set can lead to an (unintentional) alteration of one test but the other. This would make the tests irrelevants so the app not robust."}], "owner": {"reputation": 2697, "user_id": 925164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cd3a8e1171e914d489afb4a47c07985?s=128&d=identicon&r=PG", "display_name": "Gorcyn", "link": "https://stackoverflow.com/users/925164/gorcyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 520, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491395559, "creation_date": 1491379586, "question_id": 43225380, "link": "https://stackoverflow.com/questions/43225380/bdd-on-android-with-kotlin", "title": "BDD on Android with Kotlin", "body": "<p>I am considering an approach fo BDD tests on Android.</p>\n\n<p>The sample app \u2014 a simple messenger \u2014 has been made in Kotlin, so will be the tests.</p>\n\n<p>I ended up with something like this :</p>\n\n<pre><code>class IGotYourMessage : Scenario&lt;LoginActivity&gt;(LoginActivity::class.java, {\n\n    Given()\n        .iAmOnLoginScreen()\n    .When()\n        .iLogin()\n    .Then()\n        .iSeeContactsList()\n        .iSeeAContact()\n    .When()\n        .iSelectAContact()\n    .Then()\n        .iSeeMessagesList()\n        .iSeeAMessage()\n    .With(hashMapOf(\n        \"email\" to \"john@doe.com\",\n        \"password\" to \"foo\",\n        \"contactFirstName\" to \"Jane\",\n        \"contactLastName\" to \"Doe\",\n        \"messageText\" to \"Hello John!\"\n    ))\n    .With(hashMapOf(\n        \"email\" to \"jane@doe.com\",\n        \"password\" to \"bar\",\n        \"contactFirstName\" to \"John\",\n        \"contactLastName\" to \"Doe\",\n        \"messageText\" to \"Hello John!\"\n    ))\n})\n</code></pre>\n\n<p>I ended up with this assessment :</p>\n\n<ul>\n<li>The Given is a start state</li>\n<li>The When is an action</li>\n<li>The Then is an end state</li>\n<li>The Then is also a start state for the next action</li>\n</ul>\n\n<p>So I can Given -> When -> Then -> When -> Then.</p>\n\n<hr>\n\n<p>Each <code>With</code> is a test case providing its own data.</p>\n\n<p>Each \"step\" is an extension on the <code>Given</code>, <code>When</code> or <code>Then</code> classes as in:</p>\n\n<pre><code>fun Then.iSeeAContact() {\n    add({\n        (it[\"contactFirstName\"] as String).canSee()\n        (it[\"contactLastName\"] as String).canSee()\n    })\n    return this\n}\n</code></pre>\n\n<p>The <code>canSee</code> method is an extension on <code>String</code>, using <a href=\"https://developer.android.com/training/testing/ui-testing/espresso-testing.html\" rel=\"nofollow noreferrer\">Espresso</a>:</p>\n\n<pre><code>fun String.canSee(): String {\n    onView(withText(this)).check(matches(isDisplayed()))\n    return this\n}\n</code></pre>\n\n<p>So! I am here to get feedback, criticism and/or suggestions.</p>\n\n<p><em>I do not really know if it the place for this kind of question (is it one?).</em></p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 288, "user_id": 1785345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e16f5b4b838c81171e201dc723605ca6?s=128&d=identicon&r=PG", "display_name": "funglejunk", "link": "https://stackoverflow.com/users/1785345/funglejunk"}, "edited": false, "score": 20, "creation_date": 1491378735, "post_id": 43220140, "comment_id": 73520153, "body": "Using the property itself in the setter will result in an endless recursion since assigning some value to the property will always call the setter."}, {"owner": {"reputation": 2732, "user_id": 3009822, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HslzA.jpg?s=128&g=1", "display_name": "Yudhistira Arya", "link": "https://stackoverflow.com/users/3009822/yudhistira-arya"}, "reply_to_user": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "edited": false, "score": 1, "creation_date": 1491378983, "post_id": 43220140, "comment_id": 73520316, "body": "@Strelok my bad.... I was assuming that <code>this.counter = value</code> is the same with the Java equivalent when reading Kotlin&#39;s docs."}, {"owner": {"reputation": 1521, "user_id": 1920735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a204e27d4733ea1c191caf0dd837e0a?s=128&d=identicon&r=PG&f=1", "display_name": "avinash", "link": "https://stackoverflow.com/users/1920735/avinash"}, "edited": false, "score": 5, "creation_date": 1525070491, "post_id": 43220140, "comment_id": 87206439, "body": "This <a href=\"https://blog.kotlin-academy.com/kotlin-programmer-dictionary-field-vs-property-30ab7ef70531\" rel=\"nofollow noreferrer\">article</a> is for  Field vs Property."}], "answers": [{"comments": [{"owner": {"reputation": 2732, "user_id": 3009822, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HslzA.jpg?s=128&g=1", "display_name": "Yudhistira Arya", "link": "https://stackoverflow.com/users/3009822/yudhistira-arya"}, "edited": false, "score": 0, "creation_date": 1491378892, "post_id": 43220314, "comment_id": 73520255, "body": "Thanks for the answer! My bad... I was assuming that <code>this.counter = value</code> is the same with java equivalent."}, {"owner": {"reputation": 1869, "user_id": 1033591, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/c28sO.jpg?s=128&g=1", "display_name": "Alston", "link": "https://stackoverflow.com/users/1033591/alston"}, "edited": false, "score": 0, "creation_date": 1572183900, "post_id": 43220314, "comment_id": 103474539, "body": "Anywhere documented? Thanks:)"}, {"owner": {"reputation": 960, "user_id": 4457630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9KTaN.jpg?s=128&g=1", "display_name": "Yamashiro Rion", "link": "https://stackoverflow.com/users/4457630/yamashiro-rion"}, "reply_to_user": {"reputation": 1869, "user_id": 1033591, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/c28sO.jpg?s=128&g=1", "display_name": "Alston", "link": "https://stackoverflow.com/users/1033591/alston"}, "edited": false, "score": 0, "creation_date": 1577725725, "post_id": 43220314, "comment_id": 105238431, "body": "@Alston, here is the documentation: <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-fields\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/properties.html#backing-fields</a>"}, {"owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "edited": false, "score": 1, "creation_date": 1589351740, "post_id": 43220314, "comment_id": 109255478, "body": "A lot of fuzzy explanations. Why can&#39;t we just plainly say, that a <code>field</code> is more like a pointer or a reference to an existing member variable.  Since the <code>get&#47;set</code> immediately followes <code>counter</code> therefore, the <code>field</code> keyword is a reference to <code>counter</code>.  Right?"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "reply_to_user": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "edited": false, "score": 0, "creation_date": 1589426578, "post_id": 43220314, "comment_id": 109291813, "body": "@typelogic this answer is most tailored for programmers with Java/JS backgrounds (back then there is no Kotlin/Native), not C/C++. What you find fuzzy is bread and butter for some other people."}], "tags": [], "owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "is_accepted": true, "score": 89, "last_activity_date": 1527232742, "last_edit_date": 1527232742, "creation_date": 1491355719, "answer_id": 43220314, "question_id": 43220140, "link": "https://stackoverflow.com/questions/43220140/whats-kotlin-backing-field-for/43220314#43220314", "title": "What&#39;s Kotlin Backing Field For?", "body": "<p>Because, say if you don't have <code>field</code> keyword, you won't be able to actually set/get the value in the <code>get()</code> or <code>set(value)</code>. It enables you to access the backing field in the custom accessors.</p>\n\n<p>This is the equivalent Java code of your sample:</p>\n\n<pre><code>class Sample {\n    private int counter = 0;\n    public void setCounter(int value) {\n        if (value &gt;= 0) setCounter(value);\n    }\n    public int getCounter() {\n        return counter;\n    }\n}\n</code></pre>\n\n<p>Apparently this is not good, as the setter is just an infinte recursion into itself, never changing anything. Remember in kotlin whenever you write <code>foo.bar = value</code> it will be translated into a setter call instead of a <code>PUTFIELD</code>.</p>\n\n<hr>\n\n<p>EDIT: Java has <em>fields</em> while Kotlin has <em>properties</em>, which is a rather higher level concept than fields. </p>\n\n<p>There are two types of properties: one with a backing field, one without. </p>\n\n<p>A property with a backing field will store the value in the form of a field. That field makes storing value in memory possible. An example of such property is the <code>first</code> and <code>second</code> properties of <code>Pair</code>. That property will change the in-memory representation of <code>Pair</code>.</p>\n\n<p>A property without a backing field will have to store their value in other ways than directly storing it in memory. It must be computed from other properties, or, the object itself. An example of such property is the <code>indices</code> extension property of <code>List</code>, which is not backed by a field, but a computed result based on <code>size</code> property. So it won't change the in-memory representation of <code>List</code> (which it can't do at all because Java is statically typed).</p>\n"}, {"comments": [{"owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "edited": false, "score": 0, "creation_date": 1589351267, "post_id": 43220329, "comment_id": 109255311, "body": "Sorry, but your explanation contains the term that needs to be explained. And then, you first cited a Java scenario and then suddenly without warning you switch lains to an actual Kotlin statement. The Kotlin need for the keyword <code>field</code> is not in <b>C#</b> so we need a better explanation than the one you cited here."}], "tags": [], "owner": {"reputation": 1427, "user_id": 4381423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5qHX.jpg?s=128&g=1", "display_name": "Mark Mucha", "link": "https://stackoverflow.com/users/4381423/mark-mucha"}, "is_accepted": false, "score": 9, "last_activity_date": 1491355811, "creation_date": 1491355811, "answer_id": 43220329, "question_id": 43220140, "link": "https://stackoverflow.com/questions/43220140/whats-kotlin-backing-field-for/43220329#43220329", "title": "What&#39;s Kotlin Backing Field For?", "body": "<p>Backing fields are good for running validation or triggering events on state change. Think of the times you've added code to a Java setter/getter. Backing fields would be useful in similar scenarios. You would use backing fields when you needed to control or have visibility over setters/getters.</p>\n\n<p>When assigning the field with the field name itself, you're actually invoking the setter (i.e. <code>set(value)</code>). In the example you have, <code>this.counter = value</code> would recurse into set(value) until we overflow our stack. Using <code>field</code> bypasses the setter (or getter) code.</p>\n"}, {"comments": [{"owner": {"reputation": 766, "user_id": 8878425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LbbLI.jpg?s=128&g=1", "display_name": "Sonu Sanjeev", "link": "https://stackoverflow.com/users/8878425/sonu-sanjeev"}, "edited": false, "score": 4, "creation_date": 1571319883, "post_id": 48275122, "comment_id": 103208664, "body": "Good explanation. Thank you"}, {"owner": {"reputation": 960, "user_id": 4457630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9KTaN.jpg?s=128&g=1", "display_name": "Yamashiro Rion", "link": "https://stackoverflow.com/users/4457630/yamashiro-rion"}, "edited": false, "score": 2, "creation_date": 1577726486, "post_id": 48275122, "comment_id": 105238719, "body": "Really, thanks for the explanation. I&#39;ve come to Kotlin from Java, too, and the concept of <i>properties</i> is new to me. But I&#39;ve understood it, thanks to you and guides. :)"}, {"owner": {"reputation": 543, "user_id": 7095029, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe39a0d8b09a65cae1fece82a612be02?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea", "link": "https://stackoverflow.com/users/7095029/andrea"}, "edited": false, "score": 1, "creation_date": 1588011338, "post_id": 48275122, "comment_id": 108730288, "body": "God may bless you."}, {"owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "edited": false, "score": 1, "creation_date": 1589351570, "post_id": 48275122, "comment_id": 109255415, "body": "I like this answer it is honestly cited the facts. I&#39;m still in doubt, because <b>C#</b> has no need for <code>field</code> keyword is it possible that a language improvement of Kotlin will remove this weird <code>field</code> keyword and avoid the helpless souls from falling into the abyss of infinite recursion?"}], "tags": [], "owner": {"reputation": 6039, "user_id": 1237141, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1f27666c428da16a4c03f7460d21a86b?s=128&d=identicon&r=PG", "display_name": "thedarkpassenger", "link": "https://stackoverflow.com/users/1237141/thedarkpassenger"}, "is_accepted": false, "score": 36, "last_activity_date": 1516083774, "last_edit_date": 1516083774, "creation_date": 1516083456, "answer_id": 48275122, "question_id": 43220140, "link": "https://stackoverflow.com/questions/43220140/whats-kotlin-backing-field-for/48275122#48275122", "title": "What&#39;s Kotlin Backing Field For?", "body": "<p>Initially, I too had a tough time understanding this concept. So let me explain it to you with the help of an example.</p>\n\n<p>Consider this Kotlin class</p>\n\n<pre><code>class DummyClass {\n    var size = 0;\n    var isEmpty\n        get() = size == 0\n        set(value) {\n            size = size * 2\n        }\n}\n</code></pre>\n\n<p>Now when we look at the code, we can see that it has 2 properties i.e - <code>size</code> (with default accessors) and <code>isEmpty</code>(with custom accessors). But it has only 1 field i.e. <code>size</code>. To understand that it has only 1 field, let us see the Java equivalent of this class.</p>\n\n<p>Go to Tools -> Kotlin -> Show Kotlin ByteCode in Android Studio. Click on Decompile. </p>\n\n<pre><code>   public final class DummyClass {\n   private int size;\n\n   public final int getSize() {\n      return this.size;\n   }\n\n   public final void setSize(int var1) {\n      this.size = var1;\n   }\n\n   public final boolean isEmpty() {\n      return this.size == 0;\n   }\n\n   public final void setEmpty(boolean value) {\n      this.size *= 2;\n   }\n}\n</code></pre>\n\n<p>Clearly we can see that the java class has only getter and setter functions for <code>isEmpty</code>, and there is no field declared for it. Similarly in Kotlin, there is no backing field for property <code>isEmpty</code>, since the property doesn't depend on that field at all. Thus no backing field.</p>\n\n<hr>\n\n<p>Now let us remove the custom getter and setter of <code>isEmpty</code> property.</p>\n\n<pre><code>class DummyClass {\n    var size = 0;\n    var isEmpty = false\n}\n</code></pre>\n\n<p>And the Java equivalent of the above class is </p>\n\n<pre><code>public final class DummyClass {\n   private int size;\n   private boolean isEmpty;\n\n   public final int getSize() {\n      return this.size;\n   }\n\n   public final void setSize(int var1) {\n      this.size = var1;\n   }\n\n   public final boolean isEmpty() {\n      return this.isEmpty;\n   }\n\n   public final void setEmpty(boolean var1) {\n      this.isEmpty = var1;\n   }\n}\n</code></pre>\n\n<p>Here we see both the fields <code>size</code> and <code>isEmpty</code>. <code>isEmpty</code> is a backing field because the getter and setter for <code>isEmpty</code> property depend upon it.</p>\n"}, {"tags": [], "owner": {"reputation": 132, "user_id": 7155725, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aGTbZDHIvfs/AAAAAAAAAAI/AAAAAAAAABk/_m_8fMhQta4/photo.jpg?sz=128", "display_name": "Freddie", "link": "https://stackoverflow.com/users/7155725/freddie"}, "is_accepted": false, "score": 2, "last_activity_date": 1567264127, "creation_date": 1567264127, "answer_id": 57739161, "question_id": 43220140, "link": "https://stackoverflow.com/questions/43220140/whats-kotlin-backing-field-for/57739161#57739161", "title": "What&#39;s Kotlin Backing Field For?", "body": "<p>My understanding is using <strong>field</strong> identifier as a reference to the property's value in <strong>get</strong> or <strong>set</strong>, when you want to change or use the property's value in <strong>get</strong> or <strong>set</strong>.</p>\n\n<p>For example:</p>\n\n<pre><code>class A{\n    var a:Int=1\n        get(){return field * 2}    // Similiar to Java: public int geta(){return this.a * 2}\n        set(value) {field = value + 1}\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>var t = A()\nprintln(t.a)    // OUTPUT: 2, equal to Java code: println(t.a * 2)\nt.a = 2         // The real action is similar to Java code: t.a = t.a +1\nprintln(t.a)    // OUTPUT: 6, equal to Java code: println(t.a * 2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "is_accepted": false, "score": 1, "last_activity_date": 1589352721, "creation_date": 1589352721, "answer_id": 61768125, "question_id": 43220140, "link": "https://stackoverflow.com/questions/43220140/whats-kotlin-backing-field-for/61768125#61768125", "title": "What&#39;s Kotlin Backing Field For?", "body": "<p>The terminology <code>backing field</code> is filled with mystery. The keyword used is <code>field</code>. The <code>get/set</code> methods, follows immediately next to the member variable that is about to be <em>get</em> or <em>set</em> through this door protective methods mechanism. The <code>field</code> keyword just refers to the member variable that is to be <em>set</em> or <em>get</em>. At present Kotlin, you cannot refer to the member variable directly inside the <em>get</em> or <em>set</em> protective door methods because it will unfortunately result to infinite recursion because it will re-invoke the <em>get</em> or <em>set</em> and thus leds the runtime down into the deep abyss. </p>\n\n<p>In <strong>C#</strong> though, you can directly reference the member variable inside the getter/setter methods. I am citing this comparison to present the idea that this <code>field</code> keyword is how the present Kotlin is implementing it but I do hope it will be removed in later versions and allow us to directly reference the member variable directly without resulting to infinite recursion.</p>\n"}], "owner": {"reputation": 2732, "user_id": 3009822, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HslzA.jpg?s=128&g=1", "display_name": "Yudhistira Arya", "link": "https://stackoverflow.com/users/3009822/yudhistira-arya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14930, "favorite_count": 29, "accepted_answer_id": 43220314, "answer_count": 5, "score": 100, "last_activity_date": 1595672784, "creation_date": 1491354137, "last_edit_date": 1595672784, "question_id": 43220140, "link": "https://stackoverflow.com/questions/43220140/whats-kotlin-backing-field-for", "title": "What&#39;s Kotlin Backing Field For?", "body": "<p>As a Java developer, the concept of a backing field is a bit foreign to me. Given:</p>\n<pre><code>class Sample {\n    var counter = 0 // the initializer value is written directly to the backing field\n    set(value) {\n        if (value &gt;= 0) field = value\n    }\n}\n</code></pre>\n<p>What's this backing field good for? <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"noreferrer\">Kotlin docs</a> said:</p>\n<blockquote>\n<p><em>Classes in Kotlin cannot have fields. However, sometimes it is necessary to have a backing field when using custom accessors</em>.</p>\n</blockquote>\n<p>Why? What's the difference with using the properties name itself inside the setter, eg.*</p>\n<pre><code>class Sample {        \n    var counter = 0\n    set(value) {\n        if (value &gt;= 0) this.counter = value // or just counter = value?\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 907, "user_id": 997912, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/YB0AA.jpg?s=128&g=1", "display_name": "lopushen", "link": "https://stackoverflow.com/users/997912/lopushen"}, "edited": false, "score": 0, "creation_date": 1491343845, "post_id": 43218001, "comment_id": 73508316, "body": "Got it, the return type of infix function was not clear for me, assumed that is a String (the same as the receiver). So, this is where Unit comes from. Thanks!"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 5, "last_activity_date": 1491341278, "creation_date": 1491341278, "answer_id": 43218001, "question_id": 43217825, "link": "https://stackoverflow.com/questions/43217825/simple-kotlin-example-prints-kotlin-unit-when-printing-infix-function-outcome/43218001#43218001", "title": "Simple kotlin example prints kotlin.Unit when printing infix function outcome", "body": "<p>You have two print statements in your program. The one inside the <code>x_x</code> function prints the \"Hello world\" string, and the one in <code>main</code> prints the return value of the <code>x_x</code> function. The function doesn't have any <code>return</code> statements or a declared return type, so Kotlin infers <code>Unit</code> as its return type. The <code>Unit</code> type has a single value, <code>kotlin.Unit</code>, which is what your program prints.</p>\n"}], "owner": {"reputation": 907, "user_id": 997912, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/YB0AA.jpg?s=128&g=1", "display_name": "lopushen", "link": "https://stackoverflow.com/users/997912/lopushen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2082, "favorite_count": 1, "accepted_answer_id": 43218001, "answer_count": 1, "score": 3, "last_activity_date": 1491341278, "creation_date": 1491340451, "question_id": 43217825, "link": "https://stackoverflow.com/questions/43217825/simple-kotlin-example-prints-kotlin-unit-when-printing-infix-function-outcome", "title": "Simple kotlin example prints kotlin.Unit when printing infix function outcome", "body": "<p>I have the following really simple kotlin code to demo infix function\n    package com.lopushen.demo.presentation</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    print(\"Hello \" x_x \"world\")\n}\n\n\ninfix fun String.x_x(s: String) {\n    println(\"$this x_x $s x_x\")\n}\n</code></pre>\n\n<p>And the expected outcome is </p>\n\n<pre><code>Hello  x_x world x_x\nProcess finished with exit code 0\n</code></pre>\n\n<p>Actual outcome below, what causes the program to print kotlin.Unit?</p>\n\n<pre><code> Hello  x_x world x_x\n kotlin.Unit\n Process finished with exit code 0\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "android-wake-lock"], "comments": [{"owner": {"reputation": 17925, "user_id": 1631967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q2szT.jpg?s=128&g=1", "display_name": "aminography", "link": "https://stackoverflow.com/users/1631967/aminography"}, "edited": false, "score": 0, "creation_date": 1543179394, "post_id": 43206734, "comment_id": 93814362, "body": "AFAIK, it seems that Google provides no api to access the <code>Hall Effect Sensor</code>."}, {"owner": {"reputation": 369, "user_id": 10005752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3KPdH.png?s=128&g=1", "display_name": "khalid3e", "link": "https://stackoverflow.com/users/10005752/khalid3e"}, "edited": false, "score": 0, "creation_date": 1543251013, "post_id": 43206734, "comment_id": 93840946, "body": "I use this for keeping screen on <code>getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SC&zwnj;&#8203;REEN_ON)</code>"}, {"owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1543314429, "post_id": 43206734, "comment_id": 93864324, "body": "Is this problem only with your app? As you are trying to use this sensor"}, {"owner": {"reputation": 37399, "user_id": 906362, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/677b4a116774ecdee4b161903bdcfb28?s=128&d=identicon&r=PG", "display_name": "Budius", "link": "https://stackoverflow.com/users/906362/budius"}, "reply_to_user": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1543322684, "post_id": 43206734, "comment_id": 93869100, "body": "@m__ I&#39;m not trying to use the Hall Effect Sensor, we&#39;re using the normal <code>Sensor.TYPE_MAGNETIC_FIELD</code> to detect the user physically &quot;tap&quot; the phone on the hardware that the company sells (it&#39;s a door controller, that u can tap to open the door, so it contains a few magnets inside), but because of this other sensor that turns off the screen sometimes a tap on the door controller turns off the screen."}, {"owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1543324035, "post_id": 43206734, "comment_id": 93869869, "body": "ok. I understand that keepScreenOn is also not working as the effect of this other sensor is same as manually pressing the screenlock button."}], "answers": [{"comments": [{"owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1543678349, "post_id": 53500786, "comment_id": 94008968, "body": "I hope this helps as it is applicable to all devices. Rooted as well as non-rooted. You need to add 10-20 extra lines of code to your app. And I hope this will improve experience of your users."}, {"owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1543686468, "post_id": 53500786, "comment_id": 94011270, "body": "Demo - <a href=\"https://play.google.com/store/apps/details?id=com.mayank.pdfviewer\" rel=\"nofollow noreferrer\">play.google.com/store/apps/details?id=com.mayank.pdfviewer</a>  It turn on screen only once as the context is different and turning on screen might not be desirable in this case."}, {"owner": {"reputation": 37399, "user_id": 906362, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/677b4a116774ecdee4b161903bdcfb28?s=128&d=identicon&r=PG", "display_name": "Budius", "link": "https://stackoverflow.com/users/906362/budius"}, "edited": false, "score": 0, "creation_date": 1543950763, "post_id": 53500786, "comment_id": 94100135, "body": "Hi m_ I&#39;m on purpose just let the bounty run and get auto-awarded for you with half the bounty because it&#39;s a somewhat viable workaround and I really appreciate the effort, but it&#39;s something that won&#39;t work on my specific case. I really needed the disable, and from what I could see from @Kousic answer is not possible is the real answer. My case is that we develop an SDK that other developers will use on their app, so all those &quot;hack&quot; on registering broadcast with the activity lifecycle is not an option."}, {"owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "reply_to_user": {"reputation": 37399, "user_id": 906362, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/677b4a116774ecdee4b161903bdcfb28?s=128&d=identicon&r=PG", "display_name": "Budius", "link": "https://stackoverflow.com/users/906362/budius"}, "edited": false, "score": 0, "creation_date": 1543955786, "post_id": 53500786, "comment_id": 94102394, "body": "Thanks for that. But are you able to manipulate the kernel without rooting the device???"}, {"owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "reply_to_user": {"reputation": 37399, "user_id": 906362, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/677b4a116774ecdee4b161903bdcfb28?s=128&d=identicon&r=PG", "display_name": "Budius", "link": "https://stackoverflow.com/users/906362/budius"}, "edited": false, "score": 0, "creation_date": 1543955930, "post_id": 53500786, "comment_id": 94102471, "body": "I am not that familiar with development of ask but just curious."}, {"owner": {"reputation": 2771, "user_id": 6045409, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e1127001433f2ab5bbab9523853e3e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Tokenyet", "link": "https://stackoverflow.com/users/6045409/tokenyet"}, "edited": false, "score": 0, "creation_date": 1562175710, "post_id": 53500786, "comment_id": 100299402, "body": "I&#39;m not sure If this slove the <b>smart cover</b> issue, but I noticed that If you use <code>SYSTEM_ALERT_WINDOW</code>, you might need to add <code>WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY</code> to your flag (<a href=\"https://developer.android.com/reference/android/Manifest.permission\" rel=\"nofollow noreferrer\">source</a>)."}], "tags": [], "owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "is_accepted": false, "score": 3, "last_activity_date": 1543644015, "last_edit_date": 1592644375, "creation_date": 1543325192, "answer_id": 53500786, "question_id": 43206734, "link": "https://stackoverflow.com/questions/43206734/programmatically-disable-the-screen-on-off-magnetic-sensor-on-android/53500786#53500786", "title": "Programmatically disable the screen on/off magnetic sensor on Android", "body": "<p>The keepScreenOn = true in manifest also doesn't work here as the action of hall effect sensor is same as pressing power button.</p>\n<p>Here, I offer a work-around that I have tested. In this approach you display your activity regardless of hall-effect sensor locking the device and turning of the display.</p>\n<p><strong>Before beginning the unlocking action</strong></p>\n<pre><code>getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON |\n            WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD |\n            WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |\n            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);\n</code></pre>\n<p>credits for above code - <a href=\"https://stackoverflow.com/a/45951927/9640177\">https://stackoverflow.com/a/45951927/9640177</a></p>\n<p>Also make sure to add Permissions</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\n</code></pre>\n<p>Setting these flags will make sure that your window will be visible above lockscreen.</p>\n<p>Now, listen for ACTION_SCREEN_OFF intent. To do this add a broadcast receiver that listens for this intent broadcasted by the system. You need to register the receiver locally. (stackoverflow.com/a/9478013/9640177)\n<strong>in manifest</strong></p>\n<pre><code>    &lt;receiver android:name=&quot;.receiver&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.SCREEN_OFF&quot;/&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n</code></pre>\n<p><strong>Receiver class</strong></p>\n<pre><code>public class receiver extends BroadcastReceiver {\n  MyActivity activity;\n  receiver(MyActivity activity){\n    this.activity = activity;\n  }\n  @Override\n  public void onReceive(final Context context, Intent intent) {\n    activity.turnOnScreen();\n  }\n}\n</code></pre>\n<p><strong>Inside activity</strong></p>\n<pre><code> // register receiver\n ...\n IntentFilter screenStateFilter = new IntentFilter();\n    screenStateFilter.addAction(Intent.ACTION_SCREEN_OFF);\n    receiver r = new receiver(MyActivity.this);\n    registerReceiver(r, screenStateFilter);\n ...\n// function to turn on display\npublic void turnOnScreen(){\n    PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);\n    PowerManager.WakeLock wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, &quot;my:Tag&quot;);\n    wakeLock.acquire();\n    wakeLock.release();\n}\n</code></pre>\n<p>credit - <a href=\"https://stackoverflow.com/a/44706632/9640177\">https://stackoverflow.com/a/44706632/9640177</a>\nThis will turn the display on.</p>\n<p><strong>Don't forget to remove these flags after your activity has done the job and does not require to be in forefront.</strong></p>\n<pre><code>getWindow().removeFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON |\n            WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD |\n            WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED |\n            WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);\n</code></pre>\n<p>This will make your window disappear from lock-screen and make the application function normally.</p>\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1543648383, "post_id": 53568372, "comment_id": 94002423, "body": "I think it is like &quot;plucking off the eye if the eye has cataract.&quot; why don&#39;t cure it."}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "reply_to_user": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1543648465, "post_id": 53568372, "comment_id": 94002440, "body": "@m__ it depends, if we are talking about one single eye - or about many eyes. filing a bug against the vendor&#39;s ROM might be the best solution, in case they would agree."}, {"owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1543648557, "post_id": 53568372, "comment_id": 94002455, "body": "well you might prefer that. please try my answer. It bypasses the issue. Screen may be locked but the application doesn&#39;t suffer because of screen-locking."}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "reply_to_user": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1543648803, "post_id": 53568372, "comment_id": 94002502, "body": "@m__ could imagine that to be working - nevertheless it&#39;s an overkill of a workaround, for a missing driver feature which might be high in demand. that&#39;s why I think one could convince the driver&#39;s vendor. <a href=\"https://source.android.com/setup/contribute/report-bugs\" rel=\"nofollow noreferrer\">source.android.com/setup/contribute/report-bugs</a>"}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 0, "last_activity_date": 1543649225, "last_edit_date": 1543649225, "creation_date": 1543645933, "answer_id": 53568372, "question_id": 43206734, "link": "https://stackoverflow.com/questions/43206734/programmatically-disable-the-screen-on-off-magnetic-sensor-on-android/53568372#53568372", "title": "Programmatically disable the screen on/off magnetic sensor on Android", "body": "<p>the most pragmatic solution to the problem might be ...</p>\n\n<p>to disable the smart cover feature physically rather than by software.</p>\n\n<p>eg. take a razorblade and tweezers and then remove the magnet.</p>\n\n<p>... or simply get another cover without a magnet.</p>\n\n<p>alternatively, <a href=\"https://source.android.com/setup/contribute/report-bugs\" rel=\"nofollow noreferrer\">file a bug</a> against <code>drivers/input/lid.c</code>.</p>\n"}], "owner": {"reputation": 37399, "user_id": 906362, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/677b4a116774ecdee4b161903bdcfb28?s=128&d=identicon&r=PG", "display_name": "Budius", "link": "https://stackoverflow.com/users/906362/budius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2826, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1612069457, "creation_date": 1491307437, "last_edit_date": 1612069457, "question_id": 43206734, "link": "https://stackoverflow.com/questions/43206734/programmatically-disable-the-screen-on-off-magnetic-sensor-on-android", "title": "Programmatically disable the screen on/off magnetic sensor on Android", "body": "<p>Several Android devices famously the Nexus series have a magnetic sensor that is NOT the <code>android.hardware.Sensor.TYPE_MAGNETIC_FIELD</code> used exclusively to turn the screen ON/OFF automatically using phone cases that have a small magnet inside them.</p>\n\n<p>On my application, I'm using magnet detection using <code>android.hardware.Sensor.TYPE_MAGNETIC_FIELD</code> and the <code>SensorManager</code> to detect user touches the phone in a case with some magnets inside.</p>\n\n<p>The code works without issues, the problem is that it's extremely easy on those devices to accidentally trigger the screen ON/OFF sensor thou, turning off the screen.</p>\n\n<p>I've tried:</p>\n\n<ul>\n<li><code>android:keepScreenOn=\"true\"</code> on the XML</li>\n<li>using the permission <code>android.permission.WAKE_LOCK</code> and acquiring a wake-lock via <code>PowerManager</code>.</li>\n</ul>\n\n<p>Both without success.</p>\n\n<p>Is there a way to temporarily disable this sensor while my activity is resumed?</p>\n"}, {"tags": ["java", "spring-boot", "amazon-ec2", "http-headers", "kotlin"], "comments": [{"owner": {"reputation": 3403, "user_id": 766328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bfb353a72b42d878a3917316c31a68a3?s=128&d=identicon&r=PG", "display_name": "Trein", "link": "https://stackoverflow.com/users/766328/trein"}, "edited": false, "score": 0, "creation_date": 1491396971, "post_id": 43202919, "comment_id": 73533546, "body": "I&#39;m wondering if your request is actually hitting the <code>download</code> method. What is the HTTP code you get back from server when performing calling your prod host?"}, {"owner": {"reputation": 132, "user_id": 701189, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ba6fe7f4abfffb01b9d6938da91fb5de?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Cojocaru", "link": "https://stackoverflow.com/users/701189/alexandru-cojocaru"}, "reply_to_user": {"reputation": 3403, "user_id": 766328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bfb353a72b42d878a3917316c31a68a3?s=128&d=identicon&r=PG", "display_name": "Trein", "link": "https://stackoverflow.com/users/766328/trein"}, "edited": false, "score": 0, "creation_date": 1491397734, "post_id": 43202919, "comment_id": 73534162, "body": "@Trein The status code is 200 both for staging and production. How could my request not reach the <code>download</code> method? I am getting back the file contents in the response body."}, {"owner": {"reputation": 3403, "user_id": 766328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bfb353a72b42d878a3917316c31a68a3?s=128&d=identicon&r=PG", "display_name": "Trein", "link": "https://stackoverflow.com/users/766328/trein"}, "edited": false, "score": 0, "creation_date": 1491398146, "post_id": 43202919, "comment_id": 73534514, "body": "You&#39;re right. I missed the part where you said the response body comes back with file contents. Is there any environment variable being set differently in one of the two environments? Spring Boot has several built-in levers and switches that can be causing staging/prod differences."}, {"owner": {"reputation": 132, "user_id": 701189, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ba6fe7f4abfffb01b9d6938da91fb5de?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Cojocaru", "link": "https://stackoverflow.com/users/701189/alexandru-cojocaru"}, "reply_to_user": {"reputation": 3403, "user_id": 766328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bfb353a72b42d878a3917316c31a68a3?s=128&d=identicon&r=PG", "display_name": "Trein", "link": "https://stackoverflow.com/users/766328/trein"}, "edited": false, "score": 0, "creation_date": 1491412654, "post_id": 43202919, "comment_id": 73545381, "body": "@Trein The only Spring-related configuration difference between the two environments are the DB config properties (spring.datasource.url, username and password). I am using default values for the rest on both environments."}], "answers": [{"tags": [], "owner": {"reputation": 132, "user_id": 701189, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ba6fe7f4abfffb01b9d6938da91fb5de?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Cojocaru", "link": "https://stackoverflow.com/users/701189/alexandru-cojocaru"}, "is_accepted": true, "score": 0, "last_activity_date": 1492199463, "creation_date": 1492199463, "answer_id": 43418309, "question_id": 43202919, "link": "https://stackoverflow.com/questions/43202919/http-headers-not-returned-on-ec2/43418309#43418309", "title": "HTTP headers not returned on EC2", "body": "<p>The issue was fixed by first writing the response headers and then the response body:</p>\n\n<pre><code>@PostMapping(\"/download\")\nopen fun download(@RequestBody request: DownloadRequest, servletResponse: HttpServletResponse) {\n    val file = getByteArray(request.fileId)\n    servletResponse.contentType = MediaType.APPLICATION_OCTET_STREAM_VALUE\n    servletResponse.setHeader(HttpHeaders.CONTENT_DISPOSITION, \"attachment; filename=\\\"${request.fileId}.zip\\\"\")\n    servletResponse.outputStream.write(file)\n}\n</code></pre>\n\n<p>If you start writing the body first, the headers might not be properly set. I am still not sure why this was reproducing only on the production machine.</p>\n"}], "owner": {"reputation": 132, "user_id": 701189, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ba6fe7f4abfffb01b9d6938da91fb5de?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Cojocaru", "link": "https://stackoverflow.com/users/701189/alexandru-cojocaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 43418309, "answer_count": 1, "score": 0, "last_activity_date": 1492199463, "creation_date": 1491297184, "question_id": 43202919, "link": "https://stackoverflow.com/questions/43202919/http-headers-not-returned-on-ec2", "title": "HTTP headers not returned on EC2", "body": "<p>I have a Spring Boot application deployed on 2 EC2 instances (staging and production environments). I have an endpoint that is used for downloading a file. It looks like this (the app is written in Kotlin):</p>\n\n<pre><code>@PostMapping(\"/download\")\nopen fun download(@RequestBody request: DownloadRequest, servletResponse: HttpServletResponse) {\n    val file = getByteArray(request.fileId)\n    servletResponse.outputStream.write(file)\n    servletResponse.contentType = MediaType.APPLICATION_OCTET_STREAM_VALUE\n    servletResponse.setHeader(HttpHeaders.CONTENT_DISPOSITION, \"attachment; filename=\\\"${request.fileId}.zip\\\"\")\n}\n</code></pre>\n\n<p>When I execute a download request on the staging machine everything is fine. I get back the file and the response has the headers set. These are the headers that I can see in Postman:</p>\n\n<pre><code>Cache-Control \u2192no-cache, no-store, max-age=0, must-revalidate\nConnection \u2192keep-alive\nContent-Disposition \u2192attachment; filename=\"345412.zip\"\nContent-Length \u219211756\nContent-Type \u2192application/octet-stream\nDate \u2192Tue, 04 Apr 2017 09:04:19 GMT\nExpires \u21920\nPragma \u2192no-cache\nX-Application-Context \u2192application:8081\nX-Content-Type-Options \u2192nosniff\nX-Frame-Options \u2192DENY\nX-XSS-Protection \u21921; mode=block\n</code></pre>\n\n<p>When I do the same request on production, the response body contains the file content, but the 2 headers that I set manually, \"Content-Type\" and \"Content-Disposition\", are missing:</p>\n\n<pre><code>Cache-Control \u2192no-cache, no-store, max-age=0, must-revalidate\nConnection \u2192keep-alive\nContent-Length \u219256665\nDate \u2192Tue, 04 Apr 2017 09:06:45 GMT\nExpires \u21920\nPragma \u2192no-cache\nX-Application-Context \u2192application:8081\nX-Content-Type-Options \u2192nosniff\nX-Frame-Options \u2192DENY\nX-XSS-Protection \u21921; mode=block\n</code></pre>\n\n<p>Both machines have the exact same JAR deployed in a Docker container. Both calls are done directly against the EC2 instances, using their private IPs, so no ELB is involved. The configuration of the 2 instances is identical, with no differences that I could find in the AWS Console.</p>\n\n<p>Do you know what might cause this? Is there a setting in EC2 that can prevent some HTTP headers for being sent back in responses? I cannot find any reason for why the headers are sent back in one case and not in the other.</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 28516, "user_id": 3669624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/afiTv.jpg?s=128&g=1", "display_name": "c\u043d\u015ddk", "link": "https://stackoverflow.com/users/3669624/c%d0%bd%c5%9ddk"}, "edited": false, "score": 0, "creation_date": 1491292282, "post_id": 43201257, "comment_id": 73474356, "body": "It&#39;s <code>implementing</code> an interface method and not overriding it !"}, {"owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "edited": false, "score": 0, "creation_date": 1535108170, "post_id": 43201257, "comment_id": 90954946, "body": "Related: <a href=\"https://stackoverflow.com/questions/47362581/can-i-omit-the-interface-methods-i-do-not-use-in-kotlin\">Can I omit the interface methods I do not use in Kotlin?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11190, "user_id": 1388116, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/t4eGE.jpg?s=128&g=1", "display_name": "dumazy", "link": "https://stackoverflow.com/users/1388116/dumazy"}, "edited": false, "score": 0, "creation_date": 1491294847, "post_id": 43202038, "comment_id": 73475985, "body": "Thanks, I&#39;ll leave this open for now, in case other people would provide a different answer or workaround. But for now, this seems to be the way to go"}, {"owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 3, "creation_date": 1491294868, "post_id": 43202038, "comment_id": 73475999, "body": "There&#39;s <a href=\"https://developer.android.com/reference/android/animation/AnimatorListenerAdapter.html\" rel=\"nofollow noreferrer\"><code>AnimationListenerAdapter</code></a> which allows to do what OP asks for."}, {"owner": {"reputation": 11190, "user_id": 1388116, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/t4eGE.jpg?s=128&g=1", "display_name": "dumazy", "link": "https://stackoverflow.com/users/1388116/dumazy"}, "reply_to_user": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 0, "creation_date": 1491295259, "post_id": 43202038, "comment_id": 73476246, "body": "@azizbekian Thanks for this, this is something I&#39;ll be able to use, but this was just an example. I was looking for a general answer"}, {"owner": {"reputation": 3509, "user_id": 7470253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de5e0a1bb750b2968ca1655e76895079?s=128&d=identicon&r=PG&f=1", "display_name": "M. Prokhorov", "link": "https://stackoverflow.com/users/7470253/m-prokhorov"}, "reply_to_user": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 1, "creation_date": 1491297111, "post_id": 43202038, "comment_id": 73477486, "body": "@azizbekian, <code>Adapter</code> is a class though, while <code>AnimationListener</code> is supposed to be an interface. Approach with specialized interfaces in Java ecosystem is more preferrable, I feel, as that creates <code>FunctionalInterface</code>s - valid targets for lambda generation."}], "tags": [], "owner": {"reputation": 3509, "user_id": 7470253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de5e0a1bb750b2968ca1655e76895079?s=128&d=identicon&r=PG&f=1", "display_name": "M. Prokhorov", "link": "https://stackoverflow.com/users/7470253/m-prokhorov"}, "is_accepted": true, "score": 9, "last_activity_date": 1491294637, "creation_date": 1491294637, "answer_id": 43202038, "question_id": 43201257, "link": "https://stackoverflow.com/questions/43201257/implement-only-one-method-from-interface-in-anonymous-class/43202038#43202038", "title": "Implement only one method from interface in anonymous class", "body": "<p>I don't expect there's anything in Kotlin different to Java in this respect. You can, however, create your own interfaces that have default no-op implementation of methods you don't need :</p>\n\n<pre><code>interface AnimationEndListener : AnimationListener {\n  fun onAnimationStart() {}\n  fun onAnimationRepeat() {}\n}\n</code></pre>\n\n<p>Then actual concrete implementation will extend <code>AnimationEndListener</code> and override only what's needed.</p>\n"}], "owner": {"reputation": 11190, "user_id": 1388116, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/t4eGE.jpg?s=128&g=1", "display_name": "dumazy", "link": "https://stackoverflow.com/users/1388116/dumazy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2291, "favorite_count": 0, "closed_date": 1535629577, "accepted_answer_id": 43202038, "answer_count": 1, "score": 6, "last_activity_date": 1491294637, "creation_date": 1491292085, "last_edit_date": 1491292401, "question_id": 43201257, "link": "https://stackoverflow.com/questions/43201257/implement-only-one-method-from-interface-in-anonymous-class", "closed_reason": "Duplicate", "title": "Implement only one method from interface in anonymous class", "body": "<p>Is it possible in Kotlin to create an anonymous class implementing a certain interface and only implement the functions you'll need? For example I want to create a class implementing <code>AnimationListener</code> which has 3 methods:</p>\n\n<ul>\n<li>onAnimationStart</li>\n<li>onAnimationEnd</li>\n<li>onAnimationRepeat</li>\n</ul>\n\n<p>If I only want to use the <code>onAnimationEnd</code> callback, can I just do something like this?</p>\n\n<pre><code>object : AnimationListener {\n    override fun onAnimationEnd() {\n        //my implementation\n    }\n}\n</code></pre>\n\n<p>The way I've done this in Java was by creating a class which implemented the interface, just create anonymous class of that class and override the methods I need.\nI was hoping Kotlin has a better, less verbose, approach on this.</p>\n"}, {"tags": ["android-studio", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "edited": false, "score": 2, "creation_date": 1491277709, "post_id": 43197527, "comment_id": 73467870, "body": "Would be a cool feature, handy for groovy too. Something you can bring up with the existing Alt+Insert menu. Lodge a request at <a href=\"https://youtrack.jetbrains.com\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 185, "user_id": 7707670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ef27221968ec2bae5cddfaead150331?s=128&d=identicon&r=PG&f=1", "display_name": "HamidReza Heydari", "link": "https://stackoverflow.com/users/7707670/hamidreza-heydari"}, "is_accepted": false, "score": 1, "last_activity_date": 1491282897, "creation_date": 1491282897, "answer_id": 43198778, "question_id": 43197527, "link": "https://stackoverflow.com/questions/43197527/is-there-a-way-to-auto-fill-arguments-names/43198778#43198778", "title": "Is there a way to auto-fill arguments names?", "body": "<p>you can use Live template:</p>\n\n<p>setting <strong>></strong> Editor <strong>></strong> Live Templates</p>\n\n<p>choice code group and add by Green Plus <strong>1.live Template</strong></p>\n\n<p>now you need fill items</p>\n\n<p><strong>Abbreviation</strong> is name for call template code.</p>\n\n<p>in template type your code like it:</p>\n\n<pre><code>    val user = User(\n            id = $arg1$,\n            name = $arg2$,\n            age = $arg3$\n    )\n</code></pre>\n\n<p>$arg1$ means where you can type new and jump by Tab</p>\n\n<p>in code when you type Abbreviation name of your code, can selected and Code Generate there</p>\n\n<p>GoodLuck</p>\n"}, {"comments": [{"owner": {"reputation": 1799, "user_id": 3379766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0yc0p.jpg?s=128&g=1", "display_name": "Gobe", "link": "https://stackoverflow.com/users/3379766/gobe"}, "edited": false, "score": 1, "creation_date": 1532897581, "post_id": 43203323, "comment_id": 90134351, "body": "The experimental feature worked quite well with Java for method calls but not for constructors. However, the OP has a Kotlin tag, and I didn&#39;t see any difference with this plugin."}], "tags": [], "owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "is_accepted": false, "score": 2, "last_activity_date": 1491298212, "creation_date": 1491298212, "answer_id": 43203323, "question_id": 43197527, "link": "https://stackoverflow.com/questions/43197527/is-there-a-way-to-auto-fill-arguments-names/43203323#43203323", "title": "Is there a way to auto-fill arguments names?", "body": "<p>See the following requests:</p>\n\n<ul>\n<li><a href=\"https://youtrack.jetbrains.com/issue/IDEABKL-6690\" rel=\"nofollow noreferrer\">IDEABKL-6690</a> Automatic code completion when choosing a signature</li>\n<li><a href=\"https://youtrack.jetbrains.com/issue/IDEABKL-5496\" rel=\"nofollow noreferrer\">IDEABKL-5496</a> Auto-filling the actual Java call arguments</li>\n</ul>\n\n<p>There is an experimental feature you can enable by adding <code>java.completion.argument.live.template=true</code> into Help | Edit Custom Properties.</p>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 2, "last_activity_date": 1491315261, "last_edit_date": 1491315261, "creation_date": 1491313083, "answer_id": 43208900, "question_id": 43197527, "link": "https://stackoverflow.com/questions/43197527/is-there-a-way-to-auto-fill-arguments-names/43208900#43208900", "title": "Is there a way to auto-fill arguments names?", "body": "<p>Though this is not actually generating the whole call template with all the parameter names, it might be helpful anyway. </p>\n\n<p>Kotlin IDEA plugin 1.1.1 suggests the parameter names in auto completion as you start typing them. For the <code>User</code> constructor from the example, start typing:</p>\n\n<pre><code>val u = User(i\n              ^\n</code></pre>\n\n<p>There should be a suggestion <code>id =</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GL6I2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GL6I2.png\" alt=\"enter image description here\"></a></p>\n\n<p>It is inserted if you press <kbd>Enter</kbd> or <kbd>Tab</kbd>. Then you can continue with the other arguments:</p>\n\n<pre><code>val u = User(id = \"123\", n\n                          ^\n</code></pre>\n\n<p>Here, <code>name =</code> should appear in suggestions, and so on.</p>\n\n<p>Also, the parameters info popup should help you with it:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fPPdp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fPPdp.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 7558, "user_id": 966104, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ff370f6bd04596d5928ef29e33b25864?s=128&d=identicon&r=PG", "display_name": "Yona Appletree", "link": "https://stackoverflow.com/users/966104/yona-appletree"}, "edited": false, "score": 1, "creation_date": 1570653397, "post_id": 55580415, "comment_id": 102984943, "body": "This is a great plugin, but it would be awesome if it put the editable boxes around the values so you could tab through them easily."}], "tags": [], "owner": {"reputation": 850, "user_id": 2305802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70f9f493e1c91b711c2082e5573b9ef0?s=128&d=identicon&r=PG", "display_name": "douglas.iacovelli", "link": "https://stackoverflow.com/users/2305802/douglas-iacovelli"}, "is_accepted": true, "score": 15, "last_activity_date": 1554751297, "creation_date": 1554751297, "answer_id": 55580415, "question_id": 43197527, "link": "https://stackoverflow.com/questions/43197527/is-there-a-way-to-auto-fill-arguments-names/55580415#55580415", "title": "Is there a way to auto-fill arguments names?", "body": "<p>There's a great plugin for that: <a href=\"https://plugins.jetbrains.com/plugin/10942-kotlin-fill-class\" rel=\"noreferrer\">https://plugins.jetbrains.com/plugin/10942-kotlin-fill-class</a></p>\n\n<p>It autofills the constructor with some default parameters so you can override the ones you want ;)</p>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 3712186, "user_type": "registered", "profile_image": "https://graph.facebook.com/590518216/picture?type=large", "display_name": "JPhi Denis", "link": "https://stackoverflow.com/users/3712186/jphi-denis"}, "is_accepted": false, "score": 1, "last_activity_date": 1588767905, "creation_date": 1588767905, "answer_id": 61635178, "question_id": 43197527, "link": "https://stackoverflow.com/questions/43197527/is-there-a-way-to-auto-fill-arguments-names/61635178#61635178", "title": "Is there a way to auto-fill arguments names?", "body": "<p>If you already added all the params values in the constructor, Android studio will help you to do that.\nJust click on the Object, in your case on <code>User</code>, then click on option + enter (on mac) and you will have <code>add names to call arguments</code>. </p>\n"}], "owner": {"reputation": 9320, "user_id": 7045114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9OfXY.jpg?s=128&g=1", "display_name": "Maksim Ostrovidov", "link": "https://stackoverflow.com/users/7045114/maksim-ostrovidov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5052, "favorite_count": 3, "accepted_answer_id": 55580415, "answer_count": 5, "score": 24, "last_activity_date": 1588767905, "creation_date": 1491274842, "question_id": 43197527, "link": "https://stackoverflow.com/questions/43197527/is-there-a-way-to-auto-fill-arguments-names", "title": "Is there a way to auto-fill arguments names?", "body": "<p>When I instantiate classes (or call methods) with a large number of parameters I'm always using named arguments. But it's tiring to type each argument name every time:</p>\n\n<pre><code>data class User(val id: String, \n                val name: String,\n                val age: Int)\n\nval user = User(id = \"1\", name = \"John\", age = 99)\n</code></pre>\n\n<p>Can IDEA pre-fill parameters like this?</p>\n\n<pre><code>val user = User(\n    id = ,\n    name = ,\n    age = \n)\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1491301375, "post_id": 43193357, "comment_id": 73480554, "body": "Wow, all this not to write<code>equals</code>?"}, {"owner": {"reputation": 15831, "user_id": 5925259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/89crf.jpg?s=128&g=1", "display_name": "Yogesh Umesh Vaity", "link": "https://stackoverflow.com/users/5925259/yogesh-umesh-vaity"}, "edited": false, "score": 0, "creation_date": 1606406024, "post_id": 43193357, "comment_id": 114959522, "body": "For those wondering about skipping <code>val</code> in <code>val id: Long</code>, you can&#39;t do that because the data class primary constructor must have only <code>val</code> or <code>var</code> parameters."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 7, "last_activity_date": 1491278011, "last_edit_date": 1495535449, "creation_date": 1491249969, "answer_id": 43193357, "question_id": 43192582, "link": "https://stackoverflow.com/questions/43192582/compare-data-class-in-kotlin-without-id/43193357#43193357", "title": "Compare data class in Kotlin without ID", "body": "<p>A data class generates the <code>equals</code> function (<code>compare</code> is not generated) based on the properties that are declared in the primary constructor, so if you want it not to compare the IDs, you'll have to move the <code>ID</code> property out of the primary constructor.</p>\n\n<p>The obvious part is that you have to move the property to the body of the class, but then you'll also have to make it a <code>var</code> since it won't be initialized in the primary constructor (you can't have it be a <code>val</code> and initialize it to a default value in the <code>init</code> block, because then you can't assign to it in the secondary constructor).</p>\n\n<p>An example of how you can do this:</p>\n\n<pre><code>data class User(val id: Long, val name: String)\n\ndata class ModifiedUser(val name: String) {\n\n    var id: Long = 0\n\n    constructor(id: Long, name: String) : this(name) {\n        this.id = id\n    }\n\n}\n\nval u1 = User(1, \"John\")\nval u2 = User(2, \"John\")\n\nprintln(u1 == u2) // false\n\nval m1 = ModifiedUser(1, \"Sally\")\nval m2 = ModifiedUser(2, \"Sally\")\n\nprintln(m1 == m2) // true\n</code></pre>\n\n<p>It's up to you to decide which way suits you better, but maybe it's easiest to just override <code>equals</code> (<a href=\"https://stackoverflow.com/q/27581/7079453\">and by implication, <code>hashCode</code></a>) to get the desired result, at least it contains the code related to this in just once place, while the above solution can complicate your class quite a bit.</p>\n"}, {"comments": [{"owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "edited": false, "score": 1, "creation_date": 1491313152, "post_id": 43208671, "comment_id": 73489272, "body": "This looks like exactly what I was looking for. I can implement such compare method in data class itself in 1 line. Thanks."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 5, "last_activity_date": 1491312509, "creation_date": 1491312509, "answer_id": 43208671, "question_id": 43192582, "link": "https://stackoverflow.com/questions/43192582/compare-data-class-in-kotlin-without-id/43208671#43208671", "title": "Compare data class in Kotlin without ID", "body": "<p>You can use the <a href=\"https://kotlinlang.org/docs/reference/data-classes.html#copying\" rel=\"noreferrer\"><code>copy()</code> function</a> on one of your data class instances to create a copy of it \"altering <em>some</em> of its properties\". e.g.:</p>\n\n<pre><code>data class User(val id: Long, val name: String)\n\nval a = User(1, \"John\")\nval b = User(2, \"John\")\n\nprintln(a == b) // false\nprintln(a.copy(id = b.id) == b) // true\n</code></pre>\n\n<p>Creating a copy of one of your data class instances and altering the id to be the same as the other instance you want to compare against allows to effectively ignore that property.</p>\n\n<p>You could also copy both data class instances and set <code>id</code> to some common value but if you are only doing one-off comparisons then this would be an unnecessary call to <code>copy()</code>.</p>\n"}], "owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5185, "favorite_count": 0, "accepted_answer_id": 43208671, "answer_count": 2, "score": 3, "last_activity_date": 1491312509, "creation_date": 1491246945, "last_edit_date": 1491248937, "question_id": 43192582, "link": "https://stackoverflow.com/questions/43192582/compare-data-class-in-kotlin-without-id", "title": "Compare data class in Kotlin without ID", "body": "<p>I have a data class in Kotlin, which has number of properties, one of which is <code>ID</code>. But when I actually use <code>compare</code> function in code, I would like to exclude this <code>ID</code> property when comparing. Is there any way to do that except manually boilerplating <code>compare</code> function?</p>\n"}, {"tags": ["kotlin", "suppress-warnings"], "comments": [{"owner": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "edited": false, "score": 0, "creation_date": 1491289475, "post_id": 43192281, "comment_id": 73472727, "body": "You could add <code>data</code> modifier to avoid warnings"}], "answers": [{"comments": [{"owner": {"reputation": 124764, "user_id": 90848, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tK3A3.jpg?s=128&g=1", "display_name": "Laurence Gonsalves", "link": "https://stackoverflow.com/users/90848/laurence-gonsalves"}, "edited": false, "score": 0, "creation_date": 1516310818, "post_id": 43192848, "comment_id": 83646900, "body": "Pressing Alt+Enter on an unused <i>property</i> (as in the question) rather than an unused <i>parameter</i> (as in this answer), I do not see any option to suppress the warning."}, {"owner": {"reputation": 1455, "user_id": 969478, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mLNKv.jpg?s=128&g=1", "display_name": "Giszmo", "link": "https://stackoverflow.com/users/969478/giszmo"}, "edited": false, "score": 0, "creation_date": 1522797534, "post_id": 43192848, "comment_id": 86288510, "body": "For me, property works perfectly. The syntax I would never have come up with on my own, without me IDE though: <code>@file:Suppress(&quot;unused&quot;)</code>"}, {"owner": {"reputation": 1858, "user_id": 5097539, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1fa1dff17a3586fbbe5903c75e4a0491?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Bacon", "link": "https://stackoverflow.com/users/5097539/francis-bacon"}, "edited": false, "score": 0, "creation_date": 1564567083, "post_id": 43192848, "comment_id": 101070847, "body": "I am using Android Studio, and it works for me perfectly"}, {"owner": {"reputation": 353, "user_id": 7819350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94c398c0a8aafabe3d0578ce83991f24?s=128&d=identicon&r=PG&f=1", "display_name": "Chanh", "link": "https://stackoverflow.com/users/7819350/chanh"}, "edited": false, "score": 1, "creation_date": 1575343459, "post_id": 43192848, "comment_id": 104524924, "body": "to me there&#39;s no option to press Alt + Enter, but I can add it manually and it loses this annoying warning"}], "tags": [], "owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "is_accepted": true, "score": 51, "last_activity_date": 1491247964, "creation_date": 1491247964, "answer_id": 43192848, "question_id": 43192281, "link": "https://stackoverflow.com/questions/43192281/kotlin-suppress-unused-property/43192848#43192848", "title": "Kotlin: Suppress unused Property?", "body": "<p>Use <code>@Suppress(\"unused\")</code> in order to suppress unused warning.</p>\n\n<p>For those cases you can use the IDE. press <code>alt+enter</code>:\n<a href=\"https://i.stack.imgur.com/yiZ0o.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/yiZ0o.png\" alt=\"IDE unused suppress\"></a></p>\n"}], "owner": {"reputation": 1441, "user_id": 3239558, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100002152175824/picture?type=large", "display_name": "user3239558", "link": "https://stackoverflow.com/users/3239558/user3239558"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11145, "favorite_count": 3, "accepted_answer_id": 43192848, "answer_count": 1, "score": 23, "last_activity_date": 1491247964, "creation_date": 1491245910, "question_id": 43192281, "link": "https://stackoverflow.com/questions/43192281/kotlin-suppress-unused-property", "title": "Kotlin: Suppress unused Property?", "body": "<p>My source code is as follows:</p>\n\n<p>There are warnings : Property '****' is never used.</p>\n\n<p>I added \"@Suppress(\"UNUSED_PARAMETER\")\",  \"@Suppress(\"UNUSED_PROPERTY_GETTER\")\", \"@Suppress(\"UNUSED_PROPERTY_SETTER\")\",<br>\nhowever, none of them work.</p>\n\n<p>How can I suppress this warning?</p>\n\n<p><a href=\"https://i.stack.imgur.com/hU8X9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hU8X9.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 0, "creation_date": 1491235141, "post_id": 43184854, "comment_id": 73451525, "body": "Are you targeting JVM or js? On JVM there are some reflection magic besides the kotlin refied types, but on  js backend all you can rely on is refied type."}], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1491242260, "post_id": 43185509, "comment_id": 73455501, "body": "Your runnable demo is missing &quot;: Any&quot; on &quot;reified T&quot;."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 8, "last_activity_date": 1491235179, "last_edit_date": 1495535447, "creation_date": 1491224951, "answer_id": 43185509, "question_id": 43184854, "link": "https://stackoverflow.com/questions/43184854/how-to-get-generic-param-class-in-kotlin/43185509#43185509", "title": "How to get generic param class in Kotlin?", "body": "<p>You can use <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\"><code>inline</code> functions with <code>reified</code> type parameters</a> to do that: </p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; classOfList(list: List&lt;T&gt;) = T::class\n</code></pre>\n\n<p><sup><a href=\"https://try.kotlinlang.org/#/UserProjects/sr2un7scl9ftr2qo1ltv5pvf1i/i4evl2l8b9fe7hlftev47sq7p8\" rel=\"nofollow noreferrer\">(runnable demo, including how to check the type in a <code>when</code> statement)</a></sup></p>\n\n<p>This solution is limited to the cases where the actual type argument for <code>T</code> is known at compile time, because <code>inline</code> functions are transformed at compile time, and the compiler substitutes their <code>reified</code> type parameters with the real type at each call site.</p>\n\n<p>On JVM, the type arguments of generic classes are erased at runtime, and there is basically no way to retrieve them from an arbitrary <code>List&lt;T&gt;</code> (e.g. a list passed into a non-inline function as <code>List&lt;T&gt;</code> -- <code>T</code> is not known at compile-time for each call and is erased at runtime)</p>\n\n<p>If you need more control over the reified type parameter inside the function, you might find <a href=\"https://stackoverflow.com/questions/36253310/how-to-get-actual-type-arguments-of-a-reified-generic-parameter-in-kotlin\">this Q&amp;A</a> useful.</p>\n"}, {"tags": [], "owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "is_accepted": true, "score": 12, "last_activity_date": 1491225230, "creation_date": 1491225230, "answer_id": 43185626, "question_id": 43184854, "link": "https://stackoverflow.com/questions/43184854/how-to-get-generic-param-class-in-kotlin/43185626#43185626", "title": "How to get generic param class in Kotlin?", "body": "<p>Kotlin generics share Java's characteristic of being erased at compile time, so, at run time, those lists no longer carry the necessary information to do what you're asking. The exception to this is if you write an inline function, using reified types. For example this would work:</p>\n\n<pre><code>inline fun &lt;reified T&gt; handleList(l: List&lt;T&gt;) {\n    when (T::class) {\n        Int::class -&gt; handleInt(l)\n        Double::class -&gt; handleDouble(l)\n        String::class -&gt; handleString(l)\n    }\n}\n\nfun main() {\n    handleList(mutableListOf(1,2,3))\n}\n</code></pre>\n\n<p>Inline functions get expanded at every call site, though, and mess with your stack traces, so you should use them sparingly.</p>\n\n<p>Depending on what you're trying to achieve, though, there's some alternatives. You can achieve something similar at the element level with sealed classes:</p>\n\n<pre><code>sealed class ElementType {\n    class DoubleElement(val x: Double) : ElementType()\n    class StringElement(val s: String) : ElementType()\n    class IntElement(val i: Int) : ElementType()\n}\n\nfun handleList(l: List&lt;ElementType&gt;) {\n    l.forEach {\n        when (it) {\n            is ElementType.DoubleElement -&gt; handleDouble(it.x)\n            is ElementType.StringElement -&gt; handleString(it.s)\n            is ElementType.IntElement -&gt; handleInt(it.i)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1367, "user_id": 1213842, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ed40a78c26ec75251186545d79ccdcaf?s=128&d=identicon&r=PG", "display_name": "pawelo", "link": "https://stackoverflow.com/users/1213842/pawelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10275, "favorite_count": 2, "accepted_answer_id": 43185626, "answer_count": 2, "score": 9, "last_activity_date": 1491235179, "creation_date": 1491222966, "question_id": 43184854, "link": "https://stackoverflow.com/questions/43184854/how-to-get-generic-param-class-in-kotlin", "title": "How to get generic param class in Kotlin?", "body": "<p>I need to be able to tell the generic type of kotlin collection at runtime. How can I do it?</p>\n\n<pre><code>val list1 = listOf(\"my\", \"list\")\nval list2 = listOf(1, 2, 3)\nval list3 = listOf&lt;Double&gt;()\n\n/* ... */\n\nwhen(list.genericType()) {\n    is String -&gt; handleString(list)\n    is Int -&gt; handleInt(list)\n    is Double -&gt; handleDouble(list)\n}\n</code></pre>\n"}, {"tags": ["function", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 2882634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jbZId.jpg?s=128&g=1", "display_name": "RandomStudent", "link": "https://stackoverflow.com/users/2882634/randomstudent"}, "edited": false, "score": 0, "creation_date": 1491223829, "post_id": 43184205, "comment_id": 73443132, "body": "Thanks! That works. Seems like I need to know much more about Kotlin. And also sorry for missing that to compose f, f needs to be a-&gt;a."}, {"owner": {"reputation": 407, "user_id": 2882634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jbZId.jpg?s=128&g=1", "display_name": "RandomStudent", "link": "https://stackoverflow.com/users/2882634/randomstudent"}, "edited": false, "score": 0, "creation_date": 1491223889, "post_id": 43184205, "comment_id": 73443181, "body": "Just for curiosity, what does that error mean (references to variables aren&#39;t supported yet)?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 407, "user_id": 2882634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jbZId.jpg?s=128&g=1", "display_name": "RandomStudent", "link": "https://stackoverflow.com/users/2882634/randomstudent"}, "edited": false, "score": 1, "creation_date": 1491224164, "post_id": 43184205, "comment_id": 73443372, "body": "@Koyomi-chan, if it was supported, <code>::f</code> would mean a callable reference to the parameter <code>f</code> of the function -- an object containing some information about that parameter and providing a way to get its value. There are already <a href=\"http://kotlinlang.org/docs/reference/reflection.html#function-references\" rel=\"nofollow noreferrer\">function references</a> and <a href=\"https://gist.github.com/udalov/f86fbea722a53730f3f5777d871ab8ba\" rel=\"nofollow noreferrer\">bound callable references</a> in Kotlin, both using <code>::</code>. But local variable and parameter references are not supported for now."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 3, "last_activity_date": 1491238625, "last_edit_date": 1491238625, "creation_date": 1491221077, "answer_id": 43184205, "question_id": 43184115, "link": "https://stackoverflow.com/questions/43184115/kleisli-exponentiation-in-kotlin/43184205#43184205", "title": "Kleisli exponentiation in Kotlin", "body": "<p>Use just <code>f</code> instead of <code>::f</code>, it is already a functional value (i.e. a <strong>parameter</strong>, a variable or a property of a functional type), so you don't need to make a callable reference of it.</p>\n\n<pre><code> ... else { it -&gt; f(kleisli(n - 1, f)(it)) }\n</code></pre>\n\n<p>Also, your example seems to have a type mismatch: <code>kleisli(n - 1, f)</code> returns a function of type <code>(A) -&gt; B</code>, which is called on <code>it</code> of type <code>A</code>, returning a result of type <code>B</code>. Then the result is passed to <code>f</code>, but <code>f</code> can only receive <code>A</code>. To fix that, you can remove type parameter <code>B</code> and leave only <code>A</code>:</p>\n\n<pre><code>fun &lt;A&gt; kleisli(n: Int, f: (A) -&gt; A) : (A) -&gt; A = \n    if (n == 1) \n        f else \n        { it -&gt; f(kleisli(n - 1, f)(it)) }\n</code></pre>\n\n<p><sup><a href=\"https://try.kotlinlang.org/#/UserProjects/v5bmdlkaua21kke0ckml0shsc9/cdalk9l0etud7ohnud8g8ish4a\" rel=\"nofollow noreferrer\">(runnable demo of this code)</a></sup></p>\n\n<hr>\n\n<p>Also, this code demonstrates the intention perfectly well in functional style, but it might result into redundant objects allocation and undesired call stack growth. It can, however, be rewritten into imperative style, which will work more efficiently:</p>\n\n<pre><code>fun &lt;T&gt; iterativeKleisli(n: Int, f: (T) -&gt; T) : (T) -&gt; T = { x -&gt; \n    var result = x\n    for (i in 1..n)\n        result = f(result)\n    result\n}\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 2882634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jbZId.jpg?s=128&g=1", "display_name": "RandomStudent", "link": "https://stackoverflow.com/users/2882634/randomstudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 43184205, "answer_count": 1, "score": 3, "last_activity_date": 1491238625, "creation_date": 1491220828, "last_edit_date": 1491233118, "question_id": 43184115, "link": "https://stackoverflow.com/questions/43184115/kleisli-exponentiation-in-kotlin", "title": "Kleisli exponentiation in Kotlin", "body": "<p>I tried to write the Kleisli exponentiation in Kotlin:</p>\n\n<pre><code>fun &lt;A,B&gt; kleisli(n: Int, f: (A) -&gt; B): (A) -&gt; B = if (n == 1) f else { it -&gt; f(kleisli(n-1, ::f)(it)) }\n</code></pre>\n\n<p>that just composes <code>f</code>, <code>n</code> times (please do not put <code>n = 0</code> in my code).</p>\n\n<p>Kotlin (1.0.6) complains <code>error: unsupported [References to variables aren't supported yet]</code> pointing at the <code>::f</code>.</p>\n\n<p>Am I doing something wrong?</p>\n"}, {"tags": ["kotlin", "kotlin-android-extensions"], "answers": [{"tags": [], "owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "is_accepted": false, "score": 5, "last_activity_date": 1491216109, "creation_date": 1491216109, "answer_id": 43182481, "question_id": 43182333, "link": "https://stackoverflow.com/questions/43182333/what-is-the-difference-between-arraylistof-and-mutablelistof-which-one-is-bett/43182481#43182481", "title": "What is the difference between arrayListOf and mutableListOf , which one is better?", "body": "<p>Either is fine, the only difference between calling the two is expressing your intent.</p>\n\n<p><code>ArrayList</code> is a concrete implementation of <code>MutableList</code>, and <code>mutableListOf</code>, as of Kotlin 1.1, also returns an <code>ArrayList</code>.</p>\n\n<p>Do you know you specifically want an ArrayList because you have made the conscious decision that this is the right choice for your application? You probably want <code>arrayListOf</code> (or a direct call to the <code>ArrayList</code> constructor, if that interface works better for you).</p>\n\n<p>Do you just want a MutableList of some sort, and are fine with getting whatever the implementation defines as the right choice? Just use <code>mutableListOf</code> instead. </p>\n"}], "owner": {"reputation": 1151, "user_id": 1271129, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/935196032c400a6cba126078b215bd1c?s=128&d=identicon&r=PG", "display_name": "shekar", "link": "https://stackoverflow.com/users/1271129/shekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2987, "favorite_count": 0, "closed_date": 1491241858, "answer_count": 1, "score": 4, "last_activity_date": 1491216109, "creation_date": 1491215673, "question_id": 43182333, "link": "https://stackoverflow.com/questions/43182333/what-is-the-difference-between-arraylistof-and-mutablelistof-which-one-is-bett", "closed_reason": "Duplicate", "title": "What is the difference between arrayListOf and mutableListOf , which one is better?", "body": "<p>I am trying to use collections in Kotlin and got confused between arrayListOf and mutableListOf, which one should we use and why?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "edited": false, "score": 0, "creation_date": 1491207927, "post_id": 43179738, "comment_id": 73432538, "body": "Almost perfect. But now I have a problem with the 3rd case, scince I&#39;m not assigning anything, it says &#39;Type mismatch. Required: Fragment, Found: Unit&quot;"}, {"owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "reply_to_user": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "edited": false, "score": 0, "creation_date": 1491208046, "post_id": 43179738, "comment_id": 73432600, "body": "Then you have to make the variable nullable like this: <code>val fragment: Fragment? = ...</code> and end the 3rd block with the line <code>null</code>."}, {"owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "edited": false, "score": 0, "creation_date": 1491208432, "post_id": 43179738, "comment_id": 73432804, "body": "Well, null types are exactly what I was trying to avoid. Thanks anyway."}], "tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": true, "score": 6, "last_activity_date": 1511119019, "last_edit_date": 1511119019, "creation_date": 1491207595, "answer_id": 43179738, "question_id": 43179526, "link": "https://stackoverflow.com/questions/43179526/local-late-initialization-in-kotlin/43179738#43179738", "title": "Local late initialization in Kotlin", "body": "<p><code>when</code> is an expression, so </p>\n\n<pre><code>val fragment: Fragment = when (itemID) {\n    R.id.nav_schedule -&gt; ScheduleFragment()\n    R.id.nav_coursework -&gt; CourseworkFragment()\n    ...\n    else -&gt; throw IllegalArgumentException()\n}\n</code></pre>\n\n<p>will work for this use case. </p>\n\n<p>There is no <code>lateinit</code> equivalent for local variables. Other language constructs like <code>try</code> or <code>if</code> are expressions as well, so this is never needed.</p>\n\n<hr>\n\n<p><strong>Update 2017-11-19</strong></p>\n\n<p>Kotlin 1.2 supports <code>lateinit</code> for local variables, so</p>\n\n<pre><code>lateinit val fragment: Fragment\n</code></pre>\n\n<p>works starting with Kotlin 1.2.</p>\n"}], "owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "accepted_answer_id": 43179738, "answer_count": 1, "score": 3, "last_activity_date": 1511119019, "creation_date": 1491206781, "question_id": 43179526, "link": "https://stackoverflow.com/questions/43179526/local-late-initialization-in-kotlin", "title": "Local late initialization in Kotlin", "body": "<p>How can I late-initialize a variable in a funtion, since <code>lateinit</code> is not allowed for local variables? Otherwise, what is the good pattern for this case:</p>\n\n<pre><code>private fun displaySelectedScreen(itemID: Int) {\n    //creating fragment object\n    val fragment: Fragment\n    //initializing the fragment object which is selected\n    when (itemID) {\n        R.id.nav_schedule -&gt; fragment = ScheduleFragment()\n        R.id.nav_coursework -&gt; fragment = CourseworkFragment()\n        R.id.nav_settings -&gt; {\n            val i = Intent(this, SettingsActivity::class.java)\n            startActivity(i)\n        }\n        else -&gt; throw IllegalArgumentException()\n    }\n    //replacing the fragment, if not Settings Activity\n    if (itemID != R.id.nav_settings) {\n        val ft = supportFragmentManager.beginTransaction()\n        ft.replace(R.id.content_frame, fragment)// Error: Variable 'fragment' must be initialized\n        ft.commit()\n    }\n    drawerLayout.closeDrawer(GravityCompat.START)\n}\n</code></pre>\n"}, {"tags": ["kotlin", "companion-object"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1491210880, "post_id": 43179402, "comment_id": 73434213, "body": "Is <code>doStuff</code> defined on the top level or inside the class that owns the companion object?"}], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 4084690, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-DAYELvJvxZs/AAAAAAAAAAI/AAAAAAAAG8o/fu-jDfqpIbM/photo.jpg?sz=128", "display_name": "alessandro gaboardi", "link": "https://stackoverflow.com/users/4084690/alessandro-gaboardi"}, "edited": false, "score": 0, "creation_date": 1491212430, "post_id": 43180801, "comment_id": 73435280, "body": "Thank you, so if i want to access it in a static way i could put doStuff() inside the companion object. But that would make it public right?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 498, "user_id": 4084690, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-DAYELvJvxZs/AAAAAAAAAAI/AAAAAAAAG8o/fu-jDfqpIbM/photo.jpg?sz=128", "display_name": "alessandro gaboardi", "link": "https://stackoverflow.com/users/4084690/alessandro-gaboardi"}, "edited": false, "score": 1, "creation_date": 1491213694, "post_id": 43180801, "comment_id": 73436119, "body": "Yes, you can do that. All members in Kotlin are public by default, regardless of whether you define them in a class or in a companion object. If you don&#39;t want it to be public, just add a <code>private</code> modifier."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 32, "last_activity_date": 1491211024, "creation_date": 1491211024, "answer_id": 43180801, "question_id": 43179402, "link": "https://stackoverflow.com/questions/43179402/access-methods-outside-companion-object-kotlin/43180801#43180801", "title": "Access methods outside companion object - Kotlin", "body": "<p><code>doStuff()</code> is an instance method of a class; calling it requires a class instance. Members of a companion object, just like static methods in Java, do not have a class instance in scope. Therefore, to call an instance method from a companion object method, you need to provide an instance explicitly:</p>\n\n<pre><code>class A {\n    fun doStuff() = true\n\n    companion object {\n        fun stuffDone(a: A) = a.doStuff() \n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 454, "user_id": 3410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NRX1V.jpg?s=128&g=1", "display_name": "K Pradeep Kumar Reddy", "link": "https://stackoverflow.com/users/3410835/k-pradeep-kumar-reddy"}, "edited": false, "score": 0, "creation_date": 1600345506, "post_id": 60805456, "comment_id": 113062485, "body": "Is this the recommended way of accessing ??"}], "tags": [], "owner": {"reputation": 5944, "user_id": 7232295, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/cXzw4.jpg?s=128&g=1", "display_name": "Uddhav Gautam", "link": "https://stackoverflow.com/users/7232295/uddhav-gautam"}, "is_accepted": false, "score": 1, "last_activity_date": 1584918939, "last_edit_date": 1584918939, "creation_date": 1584914398, "answer_id": 60805456, "question_id": 43179402, "link": "https://stackoverflow.com/questions/43179402/access-methods-outside-companion-object-kotlin/60805456#60805456", "title": "Access methods outside companion object - Kotlin", "body": "<p>You can also call functions that are outside of companion object block.</p>\n\n<pre><code>class A {\n    fun doStuff() = true\n\n    companion object {\n        val a = A()\n        fun stuffDone() = a.doStuff() \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 498, "user_id": 4084690, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-DAYELvJvxZs/AAAAAAAAAAI/AAAAAAAAG8o/fu-jDfqpIbM/photo.jpg?sz=128", "display_name": "alessandro gaboardi", "link": "https://stackoverflow.com/users/4084690/alessandro-gaboardi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13381, "favorite_count": 2, "accepted_answer_id": 43180801, "answer_count": 2, "score": 14, "last_activity_date": 1584918939, "creation_date": 1491206361, "last_edit_date": 1491219641, "question_id": 43179402, "link": "https://stackoverflow.com/questions/43179402/access-methods-outside-companion-object-kotlin", "title": "Access methods outside companion object - Kotlin", "body": "<p>I'm pretty new to kotlin and I was wondering if it's possible, and if it's against best practice to access methods and variables that are outside a companion object, from within the companion object.</p>\n\n<p>For example</p>\n\n<pre><code>class A {\n    fun doStuff(): Boolean = return true\n\n    companion object{\n        public fun stuffDone(): Boolean = return doStuff()\n    }\n}\n</code></pre>\n\n<p>or something like that</p>\n\n<p>Thank you</p>\n"}, {"tags": ["list", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 43, "creation_date": 1491334026, "post_id": 43173751, "comment_id": 73503446, "body": "Additionally, since <code>index</code> is unused, you could omit it: <code>val list = MutableList(n) { v }</code>"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 121, "last_activity_date": 1601416861, "last_edit_date": 1601416861, "creation_date": 1491168657, "answer_id": 43173751, "question_id": 43172947, "link": "https://stackoverflow.com/questions/43172947/kotlin-creating-a-mutable-list-with-repeating-elements/43173751#43173751", "title": "Kotlin - creating a mutable list with repeating elements", "body": "<p>Use:</p>\n<pre><code>val list = MutableList(n) {index -&gt; v}\n</code></pre>\n<p>or, since <code>index</code> is unused, you could omit it:</p>\n<pre><code>val list = MutableList(n) { v }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1591668184, "post_id": 55662800, "comment_id": 110136404, "body": "Be careful with using this if <code>v</code> is a mutable sequence because the generated <code>list</code> will still have a reference to <code>v</code>, so if somewhere else one does <code>v[1] = 3</code>, the contents of <code>list</code> will also change."}], "tags": [], "owner": {"reputation": 356, "user_id": 2705737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcce0c51352910d14e004f9da8f6edaa?s=128&d=identicon&r=PG&f=1", "display_name": "Alpha Ho", "link": "https://stackoverflow.com/users/2705737/alpha-ho"}, "is_accepted": false, "score": 19, "last_activity_date": 1555137730, "creation_date": 1555137730, "answer_id": 55662800, "question_id": 43172947, "link": "https://stackoverflow.com/questions/43172947/kotlin-creating-a-mutable-list-with-repeating-elements/55662800#55662800", "title": "Kotlin - creating a mutable list with repeating elements", "body": "<p>another way may be:</p>\n\n<pre><code>val list = generateSequence { v }.take(4).toMutableList()\n</code></pre>\n\n<p>This style is compatible with both MutableList and (Read Only) List</p>\n"}, {"tags": [], "owner": {"reputation": 2902, "user_id": 1421435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/o99uu.jpg?s=128&g=1", "display_name": "Shivanand Darur", "link": "https://stackoverflow.com/users/1421435/shivanand-darur"}, "is_accepted": false, "score": 4, "last_activity_date": 1579541677, "creation_date": 1579541677, "answer_id": 59828353, "question_id": 43172947, "link": "https://stackoverflow.com/questions/43172947/kotlin-creating-a-mutable-list-with-repeating-elements/59828353#59828353", "title": "Kotlin - creating a mutable list with repeating elements", "body": "<p>If you want different objects you can use <code>repeat</code>. \nFor example,</p>\n\n<pre><code> val list = mutableListOf&lt;String&gt;().apply {\n   repeat(2){ this.add(index = it-1, element = \"YourObject($it)\") }\n }\n</code></pre>\n\n<p>Replace String with your object. Replace 2 with number of elements you want.</p>\n"}], "owner": {"reputation": 6535, "user_id": 804138, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/813bef5c16481022c426d80bd65e331c?s=128&d=identicon&r=PG", "display_name": "Basel Shishani", "link": "https://stackoverflow.com/users/804138/basel-shishani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14417, "favorite_count": 7, "accepted_answer_id": 43173751, "answer_count": 3, "score": 63, "last_activity_date": 1601416861, "creation_date": 1491163330, "question_id": 43172947, "link": "https://stackoverflow.com/questions/43172947/kotlin-creating-a-mutable-list-with-repeating-elements", "title": "Kotlin - creating a mutable list with repeating elements", "body": "<p>What would be an idiomatic way to create a mutable list of a given length <code>n</code> with repeating elements of value <code>v</code> (e.g <code>listOf(4,4,4,4,4)</code>) as an expression.</p>\n\n<p>I'm doing <code>val list = listOf((0..n-1)).flatten().map{v}</code> but it can only create an immutable list.</p>\n"}, {"tags": ["intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1496922363, "post_id": 43172301, "comment_id": 75866707, "body": "&quot;<i>Was this an April&#39;s fool&#39;s joke from JetBrains?</i>&quot; isn&#39;t an important part of asking the question."}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 5660200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a053aa187ae95a70bb030ff97abdd0ed?s=128&d=identicon&r=PG", "display_name": "Ilya Chernikov", "link": "https://stackoverflow.com/users/5660200/ilya-chernikov"}, "is_accepted": true, "score": 5, "last_activity_date": 1491209203, "creation_date": 1491209203, "answer_id": 43180166, "question_id": 43172301, "link": "https://stackoverflow.com/questions/43172301/idea-illegalstateexception-service-is-dying-when-running-junit-test-with-kotlin/43180166#43180166", "title": "IDEA IllegalStateException: Service is dying when running JUnit test with Kotlin", "body": "<p>It is the known problem - race condition on the parallel compilation start. Usually repeating the build solves it. Here is the relevant <a href=\"https://youtrack.jetbrains.com/issue/KT-15562\" rel=\"noreferrer\">issue KT-15562</a> in the YouTrack. The problem is supposed to be finally fixed in Kotlin 1.1.2 release.</p>\n"}], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 821, "favorite_count": 2, "accepted_answer_id": 43180166, "answer_count": 1, "score": 2, "last_activity_date": 1496958422, "creation_date": 1491159595, "last_edit_date": 1496958422, "question_id": 43172301, "link": "https://stackoverflow.com/questions/43172301/idea-illegalstateexception-service-is-dying-when-running-junit-test-with-kotlin", "title": "IDEA IllegalStateException: Service is dying when running JUnit test with Kotlin", "body": "<p>Yesterday I was working on my codebase and I was running my unit tests against my code when suddenly I saw this in the IDEA log:</p>\n\n<blockquote>\n  <p>Error:Kotlin: [Internal Error] java.lang.IllegalStateException:\n  Service is dying\n      at org.jetbrains.kotlin.daemon.common.CompileService$CallResult$Dying.get(CompileService.kt:60)\n      at org.jetbrains.kotlin.daemon.common.CompileService$CallResult$Dying.get(CompileService.kt:59)\n      at org.jetbrains.kotlin.compilerRunner.JpsKotlinCompilerRunner.compileWithDaemon(JpsKotlinCompilerRunner.kt:127)\n      at org.jetbrains.kotlin.compilerRunner.JpsKotlinCompilerRunner.compileWithDaemonOrFallback(JpsKotlinCompilerRunner.kt:100)\n      at org.jetbrains.kotlin.compilerRunner.JpsKotlinCompilerRunner.compileWithDaemonOrFallback(JpsKotlinCompilerRunner.kt:35)\n      at org.jetbrains.kotlin.compilerRunner.KotlinCompilerRunner.runCompiler(KotlinCompilerRunner.kt:115)\n      at org.jetbrains.kotlin.compilerRunner.JpsKotlinCompilerRunner.runK2JvmCompiler(JpsKotlinCompilerRunner.kt:65)\n      at org.jetbrains.kotlin.jps.build.KotlinBuilder.compileToJvm(KotlinBuilder.kt:740)\n      at org.jetbrains.kotlin.jps.build.KotlinBuilder.doCompileModuleChunk(KotlinBuilder.kt:458)\n      at org.jetbrains.kotlin.jps.build.KotlinBuilder.doBuild(KotlinBuilder.kt:264)\n      at org.jetbrains.kotlin.jps.build.KotlinBuilder.build(KotlinBuilder.kt:181)\n      at org.jetbrains.jps.incremental.IncProjectBuilder.runModuleLevelBuilders(IncProjectBuilder.java:1282)\n      at org.jetbrains.jps.incremental.IncProjectBuilder.runBuildersForChunk(IncProjectBuilder.java:956)\n      at org.jetbrains.jps.incremental.IncProjectBuilder.buildTargetsChunk(IncProjectBuilder.java:1028)\n      at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunkIfAffected(IncProjectBuilder.java:915)\n      at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunks(IncProjectBuilder.java:741)\n      at org.jetbrains.jps.incremental.IncProjectBuilder.runBuild(IncProjectBuilder.java:387)\n      at org.jetbrains.jps.incremental.IncProjectBuilder.build(IncProjectBuilder.java:195)\n      at org.jetbrains.jps.cmdline.BuildRunner.runBuild(BuildRunner.java:138)\n      at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:295)\n      at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:125)\n      at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler$1.run(BuildMain.java:238)\n      at org.jetbrains.jps.service.impl.SharedThreadPoolImpl$1.run(SharedThreadPoolImpl.java:44)\n      at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n      at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n      at java.lang.Thread.run(Thread.java:745)</p>\n</blockquote>\n\n<p><strong>Was this an April's fool's joke from JetBrains?</strong></p>\n\n<p>I've never seen this before. <code>killall java</code> and an IDEA restart solved the problem and I was not able to reproduce this. Is this something which is documented (I did not found any hits on google) or just a one-off glitch in IDEA when compiling Kotlin code? <strong>What does this error mean?</strong></p>\n\n<p><em>Note that</em> the unit test I ran was a simple exploratory test and I think it is irrelevant here:</p>\n\n<pre><code>internal fun fetchAsListWithSiblings(): List&lt;Message&lt;T&gt;&gt; {\n    val first = this\n    var currentMsg = first\n    val result = mutableListOf(currentMsg)\n    while(currentMsg.next.isPresent) {\n        val next = currentMsg.next.get()\n        currentMsg = next\n        result.add(next)\n    }\n    return result\n}\n\n\n@Test\nfun shouldFetchSiblingsWhenFetchSiblingsIsCalledWithMultipleSiblings() {\n    val expected = listOf(\"foo\", \"bar\", \"baz\")\n    val messages = Message.createMultiple(expected)\n\n    assertThat(messages.fetchAsListWithSiblings().map { it.payload }).isEqualTo(expected)\n}\n</code></pre>\n"}, {"tags": ["spring", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "edited": false, "score": 0, "creation_date": 1491289884, "post_id": 43170391, "comment_id": 73472976, "body": "There is default constructor if you are using no-args plugin, but problem is that is could be accessed only through reflection, since it generated in compile time."}, {"owner": {"reputation": 1571, "user_id": 4187837, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/797990d500303b57e9f9042f73ded007?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/4187837/gavin"}, "edited": false, "score": 0, "creation_date": 1563792320, "post_id": 43170391, "comment_id": 100803666, "body": "I think the <code>no-args</code> only works on classes marked with a subset of annotations, you should be able to configure your own annotations for the plugin."}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 335390, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e963145f060e9a1e452f51b4b4a282e2?s=128&d=identicon&r=PG", "display_name": "Bill_BsB", "link": "https://stackoverflow.com/users/335390/bill-bsb"}, "edited": false, "score": 0, "creation_date": 1506421415, "post_id": 45261233, "comment_id": 79804862, "body": "Is it possible to change the default behavior of IntelliJ to run unit tests via gradle? Thanks!"}], "tags": [], "owner": {"reputation": 2194, "user_id": 418783, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/81715cfbfeeef91939db3a590da4657f?s=128&d=identicon&r=PG", "display_name": "Kongress", "link": "https://stackoverflow.com/users/418783/kongress"}, "is_accepted": false, "score": 3, "last_activity_date": 1500780562, "creation_date": 1500780562, "answer_id": 45261233, "question_id": 43170391, "link": "https://stackoverflow.com/questions/43170391/no-default-constructor-for-jpa-entity-with-kotlin-even-with-noarg-plugin/45261233#45261233", "title": "no default constructor for JPA entity with Kotlin even with noarg plugin", "body": "<p>Have you tried running your Maven <code>compile</code> goal before running your test? I've found that Intellij's default configurations for Kotlin run/test don't fire Maven plugins and therefore don't apply the no-arg plugin.</p>\n\n<p>Try running your <code>compile</code> goal and then running your test again.</p>\n"}, {"tags": [], "owner": {"reputation": 2380, "user_id": 2248405, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a421f00153b682b6bf85ed19c160de42?s=128&d=identicon&r=PG", "display_name": "robie2011", "link": "https://stackoverflow.com/users/2248405/robie2011"}, "is_accepted": false, "score": 1, "last_activity_date": 1512129475, "creation_date": 1512129475, "answer_id": 47592902, "question_id": 43170391, "link": "https://stackoverflow.com/questions/43170391/no-default-constructor-for-jpa-entity-with-kotlin-even-with-noarg-plugin/47592902#47592902", "title": "no default constructor for JPA entity with Kotlin even with noarg plugin", "body": "<p>I had similar issue with intellij/gradle/kotlin. </p>\n\n<p>In my case I always started the webapplication by calling the main method through intellij editor Run-Icon. I don't know what excatly is going wrong but somehow the build process wasn't finished correctly. </p>\n\n<p>In contrast, If I started the webapplication from console by calling <code>./gradlew bootRun</code> everything worked fine!</p>\n"}, {"comments": [{"owner": {"reputation": 1571, "user_id": 4187837, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/797990d500303b57e9f9042f73ded007?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/4187837/gavin"}, "edited": false, "score": 0, "creation_date": 1563792385, "post_id": 47928671, "comment_id": 100803705, "body": "I think you could also select <code>classes</code> or <code>testClasses</code>.  This is what the micronaut framework suggests you do as part of setting to develop using it."}], "tags": [], "owner": {"reputation": 5443, "user_id": 1097800, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x0q4w.jpg?s=128&g=1", "display_name": "LynAs", "link": "https://stackoverflow.com/users/1097800/lynas"}, "is_accepted": false, "score": 3, "last_activity_date": 1513872460, "creation_date": 1513872460, "answer_id": 47928671, "question_id": 43170391, "link": "https://stackoverflow.com/questions/43170391/no-default-constructor-for-jpa-entity-with-kotlin-even-with-noarg-plugin/47928671#47928671", "title": "no default constructor for JPA entity with Kotlin even with noarg plugin", "body": "<p>I had the same problem. I was using gradle build btw.</p>\n\n<p>What worked for me was, Instead of running default run config that intellij provides I created a new run config of type gradle</p>\n\n<p>On the <code>Gradle project</code> selected my project and\non <code>Tasks</code> selected <code>bootRun</code></p>\n\n<p>And then ran my project and it worked for me</p>\n\n<p><a href=\"https://i.stack.imgur.com/gOD8c.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gOD8c.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 632, "user_id": 1499171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mARXO.jpg?s=128&g=1", "display_name": "jivimberg", "link": "https://stackoverflow.com/users/1499171/jivimberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1517014171, "creation_date": 1517014171, "answer_id": 48471535, "question_id": 43170391, "link": "https://stackoverflow.com/questions/43170391/no-default-constructor-for-jpa-entity-with-kotlin-even-with-noarg-plugin/48471535#48471535", "title": "no default constructor for JPA entity with Kotlin even with noarg plugin", "body": "<p>This was an Intellij bug and has been fixed in the following versions:</p>\n\n<ul>\n<li>IDEA 171.2455 + Kotlin plugin 1.1.0-dev-6111.</li>\n<li>IDEA 171.2272.14 (EAP) + Kotlin plugin 1.1.0-beta-17.</li>\n</ul>\n\n<p>Details here: <a href=\"https://youtrack.jetbrains.com/issue/KT-15686\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-15686</a></p>\n"}, {"tags": [], "owner": {"reputation": 24386, "user_id": 1502079, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/i6NsY.jpg?s=128&g=1", "display_name": "vovahost", "link": "https://stackoverflow.com/users/1502079/vovahost"}, "is_accepted": false, "score": 3, "last_activity_date": 1553055596, "creation_date": 1553055596, "answer_id": 55253549, "question_id": 43170391, "link": "https://stackoverflow.com/questions/43170391/no-default-constructor-for-jpa-entity-with-kotlin-even-with-noarg-plugin/55253549#55253549", "title": "no default constructor for JPA entity with Kotlin even with noarg plugin", "body": "<p>Finally after a few attempts found how to fix it:</p>\n\n<ul>\n<li>Open Run/Debug Configurations window <em>(Run > Edit Configurations)</em></li>\n<li>Select your existing Spring boot run configuration</li>\n<li><p>Add the following presets in Program arguments field: </p>\n\n<p><code>-Xplugin=$KOTLIN_HOME/lib/noarg-compiler-plugin.jar -P plugin:org.jetbrains.kotlin.noarg:preset=jpa</code></p></li>\n<li>Click ok to save configuration</li>\n<li>Stop and Run project again</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/qob9R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qob9R.png\" alt=\"Run configuration screenshot\"></a></p>\n\n<p>Useful link: <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html#jpa-support\" rel=\"nofollow noreferrer\">No-arg compiler plugin info</a></p>\n"}, {"tags": [], "owner": {"reputation": 1193, "user_id": 9698467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HWMy7a1rTHU/AAAAAAAAAAI/AAAAAAAAAGo/1VCmolljn88/photo.jpg?sz=128", "display_name": "Stefan Zhelyazkov", "link": "https://stackoverflow.com/users/9698467/stefan-zhelyazkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1606683527, "creation_date": 1606683527, "answer_id": 65065106, "question_id": 43170391, "link": "https://stackoverflow.com/questions/43170391/no-default-constructor-for-jpa-entity-with-kotlin-even-with-noarg-plugin/65065106#65065106", "title": "no default constructor for JPA entity with Kotlin even with noarg plugin", "body": "<p>I was getting the same error until I noticed @LynAs's comment; then I remembered that there is a setting in IntelliJ that determines how to build and run your project. It is under <code>Settings -&gt; Build, Execution, Deployment -&gt; Gradle -&gt; Build and run using</code>. Pick <code>Gradle (Default)</code> because if you pick <code>IntelliJ IDEA</code> your builds might not run fine. There is a message above that line that says:</p>\n<blockquote>\n<p>In a pure Java/Kotlin project, building and running by means of the IDE might be faster, thanks to optimizations. <strong>Note, that the IDE doesn't support all Gradle plugins and the project might not be built correctly with some of them.</strong></p>\n</blockquote>\n<p>Therefore, it is preferable to use the Gradle build tool instead of IntelliJ's build tool.</p>\n<p><a href=\"https://i.stack.imgur.com/fzxtS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fzxtS.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 1050, "user_id": 1183729, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/upztT.jpg?s=128&g=1", "display_name": "greengold", "link": "https://stackoverflow.com/users/1183729/greengold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4621, "favorite_count": 1, "answer_count": 6, "score": 11, "last_activity_date": 1606683527, "creation_date": 1491148690, "last_edit_date": 1511085782, "question_id": 43170391, "link": "https://stackoverflow.com/questions/43170391/no-default-constructor-for-jpa-entity-with-kotlin-even-with-noarg-plugin", "title": "no default constructor for JPA entity with Kotlin even with noarg plugin", "body": "<p>I have read that you need the <em>kotlin-maven-noarg</em> compiler plugin for entity classes in order for it to generate default-parameter less cosntructor.</p>\n\n<p>But the application does not start with the following error:</p>\n\n<blockquote>\n  <p>No default constructor for entity</p>\n</blockquote>\n\n<p>Can you tell me what am I doing wrong?</p>\n\n<p>pom.xml:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    {...}\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n\n        &lt;testSourceDirectory&gt;src/test/java&lt;/testSourceDirectory&gt;\n        &lt;testResources&gt;\n            &lt;testResource&gt;\n                &lt;directory&gt;src/test/resources&lt;/directory&gt;\n            &lt;/testResource&gt;\n        &lt;/testResources&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;test-compile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;test-compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;testCompile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;testCompile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\n\n                &lt;configuration&gt;\n                    &lt;compilerPlugins&gt;\n                        &lt;plugin&gt;jpa&lt;/plugin&gt;\n                    &lt;/compilerPlugins&gt;\n\n                    &lt;pluginOptions&gt;\n                        &lt;option&gt;jpa:annotation=javax.persistence.Entity&lt;/option&gt;\n                    &lt;/pluginOptions&gt;\n                &lt;/configuration&gt;\n\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                        &lt;artifactId&gt;kotlin-maven-noarg&lt;/artifactId&gt;\n                        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;properties&gt;\n        {...}\n        &lt;junit.version&gt;4.12&lt;/junit.version&gt;\n        &lt;kotlin.version&gt;1.1.0&lt;/kotlin.version&gt;\n    &lt;/properties&gt;\n\n        {...}\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-test&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-reflect&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>test class:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner::class)\n@ContextConfiguration(classes = arrayOf(VedicaConfig::class))\nclass InitStructures {\n    private var vedicaDBInit: VedicaDBInit? = null\n\n    @Before\n    fun init() {\n        vedicaDBInit = VedicaDBInit()\n    }\n\n    @Test\n    fun initClientFolders() {\n    }\n}\n</code></pre>\n\n<p>I'm using Intellij IDEA with Kotlin 1.1.0, so for deployment I just click debug/run with Tomcat run configuration selected and for running test I just right click on the test class and also click run/debug.</p>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1491147732, "post_id": 43168584, "comment_id": 73414130, "body": "You do not show how <code>Vector3d</code> supports <code>*</code> and <code>+</code> operations. You definitely need a common parent class/interface or you&#39;re stuck with unbound generics."}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 6387045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sLuyy.png?s=128&g=1", "display_name": "0liCom", "link": "https://stackoverflow.com/users/6387045/0licom"}, "is_accepted": false, "score": 0, "last_activity_date": 1491153544, "last_edit_date": 1491153544, "creation_date": 1491147432, "answer_id": 43170187, "question_id": 43168584, "link": "https://stackoverflow.com/questions/43168584/kotlin-generic-to-different-types/43170187#43170187", "title": "kotlin: Generic to different types", "body": "<p>In fact, you technically can create a class using generics, but the class won't know how to multiplicate T with T, as it is a sub-class of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/\" rel=\"nofollow noreferrer\"><code>Any</code></a>, and <code>Any</code> doesn't support this operater. Through <a href=\"http://kotlinlang.org/docs/reference/typecasts.html#smart-casts\" rel=\"nofollow noreferrer\">smart-casts</a> you could evaluate, what kind of T is given:</p>\n\n<pre><code>class Linear&lt;T&gt;(val a: T, val b: T) {\n    fun eval(c: T): Any {\n        when {\n            a is Double -&gt; return a * c as Double + b as Double\n            a is Double -&gt; return a * c as Vector3d + b as Vector3d\n            else -&gt; return Unit\n        }\n}\n</code></pre>\n\n<p>See <a href=\"http://kotlinlang.org/docs/reference/generics.html\" rel=\"nofollow noreferrer\">generics</a> on Kotlin-docs for more information.</p>\n\n<p>I wouldn't consider this good practice, as the method doesn't have a clear (and type-save) return type and is very inflexible, but at least it provides type-safety for your arguments.</p>\n\n<p>Another alternative would be to use <code>Number</code> (or <code>Double</code>) as a super-class for <code>Vector3d</code> and implement the methods as length. This also wouldn't be that much of a good practice, but at least you could use <code>&lt;Number&gt;</code> as generics.</p>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 1, "last_activity_date": 1491253579, "creation_date": 1491253579, "answer_id": 43194267, "question_id": 43168584, "link": "https://stackoverflow.com/questions/43168584/kotlin-generic-to-different-types/43194267#43194267", "title": "kotlin: Generic to different types", "body": "<p>You can introduce a level of indirection by defining an interface/class that has two implementations/subclasses: one for primitive doubles and one for your <code>Vector3d</code>. However you may find the overhead undesirable. e.g.:</p>\n\n<pre><code>interface Arithmetical&lt;A : Arithmetical&lt;A&gt;&gt; {\n    operator fun plus(other: A): A\n    operator fun minus(other: A): A\n    operator fun times(other: A): A\n    operator fun div(other: A): A\n}\n\nclass Linear&lt;A : Arithmetical&lt;A&gt;&gt;(val a: A, val b: A) {\n    fun eval(`in`: A): A {\n        return a * `in` + b\n    }\n}\n\nclass ArithmeticalDouble(val value: Double) : Arithmetical&lt;ArithmeticalDouble&gt; {\n    override fun plus(other: ArithmeticalDouble) = ArithmeticalDouble(value + other.value)\n    override fun minus(other: ArithmeticalDouble) = ArithmeticalDouble(value - other.value)\n    override fun times(other: ArithmeticalDouble) = ArithmeticalDouble(value * other.value)\n    override fun div(other: ArithmeticalDouble) = ArithmeticalDouble(value / other.value)\n}\n\nclass Vector3d(val a1: Double, val a2: Double, val a3: Double) : Arithmetical&lt;Vector3d&gt; {\n    override fun plus(other: Vector3d): Vector3d = TODO()\n    override fun minus(other: Vector3d): Vector3d = TODO()\n    override fun times(other: Vector3d): Vector3d = TODO()\n    override fun div(other: Vector3d): Vector3d = TODO()\n}\n</code></pre>\n\n<p>This makes more overheard for working with primitive doubles as now you have to wrap and unwrap them but it does allow you to use generics for defining <code>Linear</code>.</p>\n"}], "owner": {"reputation": 741, "user_id": 3569471, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9139a126d3b268b1c52c5cc438a57f85?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3569471/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1491253579, "creation_date": 1491137733, "question_id": 43168584, "link": "https://stackoverflow.com/questions/43168584/kotlin-generic-to-different-types", "title": "kotlin: Generic to different types", "body": "<p>I need linear functions like this: </p>\n\n<pre><code>class Linear(val a : Double, val b : Double) {\n    fun eval(in : Double) {\n        return a*in + b\n    }\n}\n</code></pre>\n\n<p>Then, I need the same thing for vectors. </p>\n\n<pre><code>class Vector3d(val a1 : Double, val a2 : Double, val a3 : Double) {\n    // use operator overloading https://kotlinlang.org/docs/reference/operator-overloading.html to make +, -, /, *, etc. possible for vectors\n}\n\nclass Linear(val a : Vector3d, val b : Vector3d) {\n    fun eval(in : Vector3d) {\n        return a*in + b\n    }\n}\n</code></pre>\n\n<p>As you can see, the two Linear classes are identical (except for argument types). Now, I can not make the class generic, as Double and Vector3d do not have a common superclass. </p>\n\n<p>If I want to write Linear just once, my only option is my own Double-type, which than has a common interface with Vector3d. However, this means I can not use 0 in the source code any longer, but I have to use MyDouble(0) everywhere. I could overload the constructor of Linear to accept Doubles, and create the MyDouble objects internally, however, I would need to do this for every single method in my API. </p>\n\n<p>Is there a better solution? </p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1214, "user_id": 6095439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb0a801257ee75e0987200564b0ea798?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/6095439/john"}, "is_accepted": true, "score": 6, "last_activity_date": 1491124831, "last_edit_date": 1491124831, "creation_date": 1491124051, "answer_id": 43166588, "question_id": 43166375, "link": "https://stackoverflow.com/questions/43166375/kotlin-anonymous-function-use-case/43166588#43166588", "title": "Kotlin anonymous function use case?", "body": "<p>The use case is that sometimes we may wish to be explicit about the return type. In those cases, we can use so called an anonymous function. Example:</p>\n\n<pre><code>fun(a: String, b: String): String = a + b\n</code></pre>\n\n<p>Or better return control like:</p>\n\n<pre><code>fun(): Int {\n    try {\n        // some code\n        return result\n    } catch (e: SomeException) {\n        // handler\n        return badResult\n        }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 0, "creation_date": 1515193816, "post_id": 43166666, "comment_id": 83221895, "body": "<code>get(&quot;&#47;&quot;) { req, res -&gt; if (sth) return@get; dosth() }</code> works just fine"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1491124640, "creation_date": 1491124640, "answer_id": 43166666, "question_id": 43166375, "link": "https://stackoverflow.com/questions/43166375/kotlin-anonymous-function-use-case/43166666#43166666", "title": "Kotlin anonymous function use case?", "body": "<p>Anonymous functions (a.k.a function expressions) are very handy when you have to pass a huge lambda with complex logic and want early returns to work. For example if you write a dispatcher in <a href=\"http://sparkjava.com/\" rel=\"nofollow noreferrer\">spark-java</a>:</p>\n\n<pre><code>get(\"/\", fun(request, response) {\n    // Your web page here\n    // You can use `return` to interrupt the handler \n})\n</code></pre>\n"}], "owner": {"reputation": 2732, "user_id": 3009822, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HslzA.jpg?s=128&g=1", "display_name": "Yudhistira Arya", "link": "https://stackoverflow.com/users/3009822/yudhistira-arya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1597, "favorite_count": 0, "accepted_answer_id": 43166588, "answer_count": 2, "score": 4, "last_activity_date": 1491124831, "creation_date": 1491122641, "question_id": 43166375, "link": "https://stackoverflow.com/questions/43166375/kotlin-anonymous-function-use-case", "title": "Kotlin anonymous function use case?", "body": "<p>Based on my understanding, anonymous function in Kotlin allow you to specify return type. In addition to that, return statement inside anonymous will exit only the function block, while in lambda it will exit the enclosing function.</p>\n\n<p>Still, I can't imagine what would be the real world use case of anonymous function in Kotlin that lambda syntax cannot provide?</p>\n\n<p><a href=\"http://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">Kotlin Higher Order Function and Lambda</a></p>\n"}, {"tags": ["jvm", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1491215006, "post_id": 43168426, "comment_id": 73436932, "body": "Wow, you seem to be right on the money! I changed the function as described and now it runs just fine! I filed a bug with JetBrains: <a href=\"https://youtrack.jetbrains.com/issue/KT-17210\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-17210</a>"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "reply_to_user": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1491234941, "post_id": 43168426, "comment_id": 73451383, "body": "It will be useful if you also submitted the deassembled bytecode to JetBrains. You can get these info by using javap, a java bytecode deassembler shipped in JDK distributions. (To be frank I should be able to do this, but I don&#39;t know how to make javap work with only method bytecode, which is included in the exception message, instead of the full classfile)"}], "tags": [], "owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "is_accepted": false, "score": 1, "last_activity_date": 1491136827, "creation_date": 1491136827, "answer_id": 43168426, "question_id": 43164689, "link": "https://stackoverflow.com/questions/43164689/very-mysterious-runtime-error-bad-type-operand-on-stack/43168426#43168426", "title": "Very mysterious runtime error: Bad type operand on stack", "body": "<p>Since I don't have the bytecode to study, all of the below explaination are built on one assumption: the Kotlin has smart cast wrong once again.</p>\n\n<h2>tl;dr  JVM verify the whole class instead of just the proportion used.</h2>\n\n<p>The situation happens in the below steps:</p>\n\n<ol>\n<li>Test ran. Junit found tests and tried to invoke <code>org.bh.tools.base.math.NumberConversionKtTest::Number_float32Value</code> reflection. This triggered the loading, linking and initialization of class <code>NumberConversionKtTest</code>. Everything is good.</li>\n<li>This method invoked <code>org.bh.tools.base.math.NumberConversionKtTestKt.assertNumbersClose</code>, which is inside a class not yet loaded (note the trialing <code>Kt</code> which the previous class does not has). JVM found, loaded, linked and initialized it. </li>\n<li>The <code>assertNumbersClose</code> is now being executed, i.e. a new frame is created and pushed into the stack. After executing some of bytecode, the program flow moved to line 488, and found a method invocation instruction, which asks the JVM to execute a method lying in the class <code>org.bh.tools.base.strings.TestUtils</code>. This class hadn't yet beening loaded, so the JVM started loading a new class.</li>\n<li>JVM loads that class, and, during <a href=\"http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.4.1\" rel=\"nofollow noreferrer\">verifying</a>, it found the method <code>concat</code>, not the one used in <code>assertNumbersClose</code>, is not good. It stops verifying with a <code>VerifyError</code>. Because the method <code>differingCharacters</code> hadn't yet been executed, i.e. no new frame was created and pushed into the stack, it's not on the stacktrace, so you see <code>org.bh.tools.base.math.NumberConversionKtTestKt.assertNumbersClose</code> on the top.</li>\n</ol>\n\n<hr>\n\n<h2>Posible workaround</h2>\n\n<p>You need to fix the <code>concat</code> method's bytecode, somehow. You have these following wrokaround.</p>\n\n<ol>\n<li>Try upgrade kotlin compiler. I recall some smartcast related issues being fixed in the kotlin 1.1.</li>\n<li><p>Since this error is kotlin compiler failing to emit a CHECKCAST for smartcasts, you may trying adding a manual cast, like this:</p>\n\n<pre><code>fun concat(lhs: Any, rhs: CharSequence): CharSequence {\n    if (lhs is String) {\n        val s: String = lhs as String\n        return s.plus(rhs)\n    } else if (lhs is StringBuilder) {\n        val sb: StringBuilder= lhs as StringBuilder\n        return sb.append(rhs)\n    } else {\n        return StringBuilder().append(lhs).append(rhs)\n    }\n}\n</code></pre>\n\n<p>This <strong>sometimes</strong> works for <strong>some</strong> people.</p></li>\n<li><p>If all of these don't work, Switch to plain Java and place <code>concat</code> in another class. This fixes most, if not all, kotlin issues.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "is_accepted": true, "score": 1, "last_activity_date": 1511747650, "last_edit_date": 1511747650, "creation_date": 1492217787, "answer_id": 43421072, "question_id": 43164689, "link": "https://stackoverflow.com/questions/43164689/very-mysterious-runtime-error-bad-type-operand-on-stack/43421072#43421072", "title": "Very mysterious runtime error: Bad type operand on stack", "body": "<p>According to <a href=\"https://youtrack.jetbrains.com/issue/KT-17210#comment=27-2099281\" rel=\"nofollow noreferrer\">Dmitry Petrov</a> and <a href=\"https://youtrack.jetbrains.com/issue/KT-17210#comment=27-2099291\" rel=\"nofollow noreferrer\">Alexander Chernikov</a>, this is a compiler bug in Kotlin 1.1.1, which has been fixed in the 1.1.2 release.</p>\n"}], "owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 43421072, "answer_count": 2, "score": 2, "last_activity_date": 1511747650, "creation_date": 1491107941, "last_edit_date": 1491215075, "question_id": 43164689, "link": "https://stackoverflow.com/questions/43164689/very-mysterious-runtime-error-bad-type-operand-on-stack", "title": "Very mysterious runtime error: Bad type operand on stack", "body": "<p>I get this very mysterious error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.VerifyError: Bad type on operand stack\nException Details:\n  Location:\n    org/bh/tools/base/strings/TestUtils.concat(Ljava/lang/Object;Ljava/lang/CharSequence;)Ljava/lang/CharSequence; @28: invokevirtual\n  Reason:\n    Type 'java/lang/Object' (current frame, stack[1]) is not assignable to 'java/lang/String'\n  Current Frame:\n    bci: @28\n    flags: { }\n    locals: { 'java/lang/Object', 'java/lang/CharSequence' }\n    stack: { 'java/lang/StringBuilder', 'java/lang/Object' }\n  Bytecode:\n    0x0000000: 2a12 59b8 0012 2b12 43b8 0012 2ac1 005b\n    0x0000010: 9900 1a2a bb00 1659 b700 1a5f b600 512b\n    0x0000020: b600 5eb6 0052 c000 23b0 2ac1 0016 9900\n    0x0000030: 152a c000 162b b600 5e59 1260 b800 63c0\n    0x0000040: 0023 b0bb 0016 59b7 001a 2ab6 0047 2bb6\n    0x0000050: 005e 5912 65b8 0063 c000 23b0          \n  Stackmap Table:\n    same_frame(@42)\n    same_frame(@67)\n\n\n    at org.bh.tools.base.math.NumberConversionKtTestKt.assertNumbersClose(NumberConversionKtTest.kt:488)\n    at org.bh.tools.base.math.NumberConversionKtTest.Number_float32Value(NumberConversionKtTest.kt:47)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.junit.runners.Suite.runChild(Suite.java:128)\n    at org.junit.runners.Suite.runChild(Suite.java:27)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:58)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:237)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n</code></pre>\n\n<p>At this line:\n<a href=\"https://github.com/BlueHuskyStudios/Blue-Base/blob/ea415b702b87b7a33d90bc13221f44205c38e9f1/JVM/test/org/bh/tools/base/math/NumberConversionKtTest.kt#L488\" rel=\"nofollow noreferrer\">https://github.com/BlueHuskyStudios/Blue-Base/blob/ea415b702b87b7a33d90bc13221f44205c38e9f1/JVM/test/org/bh/tools/base/math/NumberConversionKtTest.kt#L488</a></p>\n\n<p>I think it involves this function:\n<a href=\"https://github.com/BlueHuskyStudios/Blue-Base/blob/ea415b702b87b7a33d90bc13221f44205c38e9f1/JVM/src/org/bh/tools/base/strings/String%20Utils.kt#L121-L154\" rel=\"nofollow noreferrer\">https://github.com/BlueHuskyStudios/Blue-Base/blob/ea415b702b87b7a33d90bc13221f44205c38e9f1/JVM/src/org/bh/tools/base/strings/String%20Utils.kt#L121-L154</a></p>\n\n<p>but I can't possibly understand what's going wrong. It seems to indicate that I'm calling a concatenate method on an <code>Object</code> and a <code>CharSequence</code> within the <code>TestUtils</code> class (which I don't think is touched when I run <a href=\"https://github.com/BlueHuskyStudios/Blue-Base/blob/ea415b702b87b7a33d90bc13221f44205c38e9f1/JVM/test/org/bh/tools/base/math/NumberConversionKtTest.kt#L42-L52\" rel=\"nofollow noreferrer\">the test that triggers this</a>), but sounds mighty close to <a href=\"https://github.com/BlueHuskyStudios/Blue-Base/blob/ea415b702b87b7a33d90bc13221f44205c38e9f1/JVM/src/org/bh/tools/base/strings/String%20Utils.kt#L64-L76\" rel=\"nofollow noreferrer\">another function I wrote</a> which wasn't used here.</p>\n\n<p><strong>Something's going on that I cannot get my head around. Does anyone have any ideas?</strong></p>\n\n<hr>\n\n<h2>Companion JetBrains bug: <a href=\"https://youtrack.jetbrains.com/issue/KT-17210\" rel=\"nofollow noreferrer\">KT-17210</a></h2>\n"}, {"tags": ["multithreading", "kotlin", "coroutine"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1491125523, "post_id": 43163874, "comment_id": 73407635, "body": "From the code in the question it is kinda hard to understand what was your goal. Please clarify what external function returns what."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1491125576, "post_id": 43163874, "comment_id": 73407653, "body": "In this scenario one needs to know what API calls return promises and of what types. Please add this info to the question"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1491132734, "post_id": 43163874, "comment_id": 73409638, "body": "@voddan My goal is to wait for data from a non-blocking source to be ready and process it (the actual source is user input but I think this is irrelevant because it could be different non-blocking sources). The non-blocking source calls <code>onReceive()</code> when data is ready to be processed. Data type is irrelevant, you can consider it any type that suits you best (in my actual code the data type is a custom class)."}, {"owner": {"reputation": 12389, "user_id": 1206301, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/NMBDq.jpg?s=128&g=1", "display_name": "Alexei Kaigorodov", "link": "https://stackoverflow.com/users/1206301/alexei-kaigorodov"}, "edited": false, "score": 1, "creation_date": 1491132909, "post_id": 43163874, "comment_id": 73409688, "body": "do not use CountDownLatch. Use ArrayBlockingQueue instead. Let onReceive() call queue.put(); and processData() call queue.take() instead of getData()."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 12389, "user_id": 1206301, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/NMBDq.jpg?s=128&g=1", "display_name": "Alexei Kaigorodov", "link": "https://stackoverflow.com/users/1206301/alexei-kaigorodov"}, "edited": false, "score": 0, "creation_date": 1491133196, "post_id": 43163874, "comment_id": 73409769, "body": "@AlexeiKaigorodov Nice point, will do. Still I do not understand in what scenario should I use coroutines."}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 1, "creation_date": 1498465652, "post_id": 43163874, "comment_id": 76492031, "body": "The correct answer depends on how you initiate the asynchronous operation that will later invoke your <code>onReceive</code> callback and whether you are expecting callback to be invoked just once or multiple times. Please, clarify your question to get the right answer."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 0, "creation_date": 1498467739, "post_id": 43163874, "comment_id": 76493126, "body": "@RomanElizarov I simply use <code>thread {}</code>. It is expected to be called multiple times."}, {"owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 1, "creation_date": 1498474212, "post_id": 43163874, "comment_id": 76496608, "body": "So if it is expected to be called multiple times, then how your original code with <code>CountDownLatch</code> is supposed to work? E.g., think what happens when <code>onReceive</code> is invoked for the second time, while <code>getData</code> has completed its first line (with <code>await</code>) but has not executed its second line yet. I&#39;m just trying to figure what you are trying to achieve, which is absolutely not clear from your original code."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "edited": false, "score": 0, "creation_date": 1576143685, "post_id": 43163874, "comment_id": 104806076, "body": "@RomanElizarov Yes, you&#39;re correct, the code is flawed indeed."}], "answers": [{"tags": [], "owner": {"reputation": 12389, "user_id": 1206301, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/NMBDq.jpg?s=128&g=1", "display_name": "Alexei Kaigorodov", "link": "https://stackoverflow.com/users/1206301/alexei-kaigorodov"}, "is_accepted": true, "score": 1, "last_activity_date": 1491134517, "creation_date": 1491134517, "answer_id": 43168080, "question_id": 43163874, "link": "https://stackoverflow.com/questions/43163874/kotlin-blocking-coroutines-with-non-blocking-i-o/43168080#43168080", "title": "Kotlin: Blocking coroutines with non-blocking I/O", "body": "<p>you did not said if data received in <code>onReceive()</code> can be processed in parallel. This is the main question. If yes, you can just do it in <code>onReceive()</code>. If this is not allowed, let each call to <code>onReceive()</code> start a task on <code>CommonPool</code>, without any coroutines. If they should be processed sequentially, then simplest way is to start a thread with a loop inside:</p>\n\n<pre><code>fun onReceive(data: Any) {\n   queue.put(data);\n}\n\n ....\n\n// loop in a thread\nwhile(true) {\n   data = queue.take();\n   processData(data);\n}\n</code></pre>\n\n<p>Again, coroutines are not needed.</p>\n\n<p>Generally, coroutines are syntactic sugar to represent an asynchronous program as if it is synchronous. I do not think your program as a case to use coroutines.</p>\n"}, {"tags": [], "owner": {"reputation": 363, "user_id": 2348202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vQY96.png?s=128&g=1", "display_name": "jairobjunior", "link": "https://stackoverflow.com/users/2348202/jairobjunior"}, "is_accepted": false, "score": 0, "last_activity_date": 1576531015, "last_edit_date": 1576531015, "creation_date": 1576127189, "answer_id": 59298035, "question_id": 43163874, "link": "https://stackoverflow.com/questions/43163874/kotlin-blocking-coroutines-with-non-blocking-i-o/59298035#59298035", "title": "Kotlin: Blocking coroutines with non-blocking I/O", "body": "<p>There is a very common pattern using <code>CountDownLatch</code> when developing with Android, sometimes you want to make an async implementation to be sync when dealing with <code>BroadcastReceivers</code> and <code>CountDownLatch</code> is pretty handy.</p>\n\n<pre><code>private suspend fun yourSuspendMethod() {\n    val job = GlobalScope.async {    \n        val latch = CountDownLatch(1)\n\n        val watcher = object : BroadcastReceiver() {\n\n            override fun onReceive(context: Context?, intent: Intent?) {\n                if // your logic\n                    latch.countDown()\n            }\n        }\n\n        try {\n            mContext?.registerReceiver(watcher, IntentFilter(...))\n\n            //call a method that will trigger the broadcast receiver\n\n            if (!latch.await(5, TimeUnit.SECONDS)) {\n                throw Exception(\"Failed .... on latch's timeout\")\n            }\n        } finally {\n            mContext?.unregisterReceiver(watcher)\n        }\n    }\n\n    job.await()\n}\n</code></pre>\n\n<p>There is one very important thing in here, DO NOT change the context of the CoroutineScope, otherwise they will be running in a completely different place, by doing the way I left above it becomes a child of the scope/context.</p>\n\n<p>[EDIT]\nI decided to put more thoughts into this problem to avoid using <code>CountDownLatch</code>. The problem of the latch is that when you call <code>latch.await</code> it will stop the current thread, so if this is coming from a Main thread, the Main will wait and it will timeout because it didn't give a chance for the receiver to be called. A way to solve this is by using the example that I used above.</p>\n\n<p>One thing I forgot on the example above is that if you want to unit test and synchronize the context of the caller you will need to inject the context. If you decide to do that your implementation will become a bit more complex and you will not be using the full power of the coroutine, because you will be creating extra threads.</p>\n\n<p>So, the solution would be using a combination of <code>withTimeout</code> + <code>suspendCancellableCoroutine</code>, you can use this extension:</p>\n\n<pre><code>suspend inline fun &lt;T&gt; suspendCoroutineWithTimeout(\n    timeout: Long,\n    crossinline block: (Continuation&lt;T&gt;) -&gt; Unit\n) = withTimeout(timeout) {\n    suspendCancellableCoroutine(block = block)\n}\n</code></pre>\n\n<p>and your method would look like this:</p>\n\n<pre><code>private suspend fun yourSuspendMethod() {\n    var watcher: BroadcastReceiver? = null\n\n    try {\n        suspendCoroutineWithTimeout&lt;Boolean&gt;(TimeUnit.SECONDS.toMillis(5)) {\n            watcher = object : BroadcastReceiver() {\n\n                override fun onReceive(context: Context?, intent: Intent?) {\n                    if // your logic\n                        it.resume(true)\n                }\n            }\n\n            context?.registerReceiver(watcher, IntentFilter(...))\n            //call a method that will trigger the broadcast receiver\n        }\n    } finally {\n        context?.unregisterReceiver(watcher)\n    }\n}\n</code></pre>\n\n<p>That would be it. Now coroutine would do its magic without stoping the caller thread and when the job gets canceled the timeout will also cancel.</p>\n"}], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3169, "favorite_count": 0, "accepted_answer_id": 43168080, "answer_count": 2, "score": 1, "last_activity_date": 1576531015, "creation_date": 1491098519, "question_id": 43163874, "link": "https://stackoverflow.com/questions/43163874/kotlin-blocking-coroutines-with-non-blocking-i-o", "title": "Kotlin: Blocking coroutines with non-blocking I/O", "body": "<p>I'm trying to use Kotlin coroutines to handle a non-blocking I/O. Scenario is as follows:</p>\n\n<ol>\n<li>Receive data from an asynchronous callback running on thread 1.</li>\n<li>Wait for this data in thread 2 then consume it.</li>\n</ol>\n\n<p>My current code looks like this (simplified for sake of brevity):</p>\n\n<pre><code>private var latch = CountDownLatch(1)\nprivate var data: Any? = null\n\n// Async callback from non-blocking I/O\nfun onReceive(data: Any) {\n    currentData = data\n    latch.countDown()\n}\n\n// Wait and consume data\nfun getData(): Any? {\n    latch.await()\n    latch = CountDownLatch(1)\n    return currentData\n}\n\nfun processData() {\n    launch(CommonPool) {\n        while (true) {\n            val data = getData()\n            // Consume data                \n        }\n    }\n}\n</code></pre>\n\n<p>From what I understand, Kotlin coroutines should be able to help me to get rid of CountDownLatch. After reading <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md\" rel=\"nofollow noreferrer\">this (awesome) guide</a>, all I could come up with is something like this:</p>\n\n<pre><code>// Wait and consume data\nfun getData() = async(CommonPool) {\n    latch.await()\n    latch = CountDownLatch(1)\n    currentData\n}\n\nfun processData() {\n    launch(CommonPool) {\n        while (true) {\n            runBlocking {\n                val data = getData().await()\n                // Consume data                \n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I also tried with <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#pipelines\" rel=\"nofollow noreferrer\">Pipelines</a>, with similar results. I'm obviously not understanding how to use these features.</p>\n"}, {"tags": ["gradle", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "edited": false, "score": 1, "creation_date": 1491658254, "post_id": 43181120, "comment_id": 73656211, "body": "So assuming that a package <code>&quot;com.vladsch.flexmark:flexmark-all:0.18.5&quot;</code> is specified as a dependency in <code>build.gradle</code>, what should the cp argument be?  Trying <code>build&#47;classes&#47;main</code> and <code>~&#47;.gradle</code> does not work."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "edited": false, "score": 0, "creation_date": 1491661527, "post_id": 43181120, "comment_id": 73657257, "body": "You should specify the exact path to this jar file. You can find the jar in the ~/.gradle directory."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 3, "last_activity_date": 1491211998, "creation_date": 1491211998, "answer_id": 43181120, "question_id": 43162505, "link": "https://stackoverflow.com/questions/43162505/importing-jars-in-kotlin-repl/43181120#43181120", "title": "Importing jars in kotlin REPL", "body": "<p>As of Kotlin 1.1.1, there is no support to do this automatically. You need to pass the classpath to the <code>kotlinc</code> command manually:</p>\n\n<pre><code> kotlinc -cp build/classes/main\n</code></pre>\n"}], "owner": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1177, "favorite_count": 0, "accepted_answer_id": 43181120, "answer_count": 1, "score": 3, "last_activity_date": 1491211998, "creation_date": 1491084339, "question_id": 43162505, "link": "https://stackoverflow.com/questions/43162505/importing-jars-in-kotlin-repl", "title": "Importing jars in kotlin REPL", "body": "<p>In a project managed by gradle, how to import an installed package in kotlin REPL ?</p>\n\n<pre><code>Welcome to Kotlin version 1.0.3 (JRE 1.8.0_05-b13)\nType :help for help, :quit for quit\n&gt;&gt;&gt; import com.vladsch.flexmark.*\nerror: unresolved reference: vladsch\nimport com.vladsch.flexmark.*\n           ^\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "is_accepted": true, "score": 22, "last_activity_date": 1491062296, "creation_date": 1491062296, "answer_id": 43158972, "question_id": 43158856, "link": "https://stackoverflow.com/questions/43158856/why-does-kotlin-have-componentn-functions-in-data-class-if-they-already-have-ge/43158972#43158972", "title": "Why does kotlin have componentN functions in data class, if they already have getters and setters?", "body": "<p>Kotlin supports the following syntax via <code>componentN</code> functions:</p>\n\n<pre><code>val (name, age) = person \n</code></pre>\n\n<p>This syntax is called a <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"noreferrer\">destructuring declaration</a>. A destructuring declaration creates multiple variables at once. We have declared two new variables: name and age.</p>\n\n<p>A destructuring declaration is compiled down to the following code:</p>\n\n<pre><code>val name = person.component1()\nval age = person.component2()\n</code></pre>\n\n<blockquote>\n  <p>the component1() and component2() functions are another example of the\n  principle of conventions widely used in Kotlin (see operators like +\n  and *, for-loops etc.). Anything can be on the right-hand side of a\n  destructuring declaration, as long as the required number of component\n  functions can be called on it. And, of course, there can be\n  component3() and component4() and so on.</p>\n  \n  <p>Note that the componentN() functions need to be marked with the\n  operator keyword to allow using them in a destructuring declaration.</p>\n</blockquote>\n"}], "owner": {"reputation": 907, "user_id": 997912, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/YB0AA.jpg?s=128&g=1", "display_name": "lopushen", "link": "https://stackoverflow.com/users/997912/lopushen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2017, "favorite_count": 1, "accepted_answer_id": 43158972, "answer_count": 1, "score": 10, "last_activity_date": 1491062296, "creation_date": 1491061670, "last_edit_date": 1491062244, "question_id": 43158856, "link": "https://stackoverflow.com/questions/43158856/why-does-kotlin-have-componentn-functions-in-data-class-if-they-already-have-ge", "title": "Why does kotlin have componentN functions in data class, if they already have getters and setters?", "body": "<p>There is a data class in kotlin, e.g.</p>\n\n<pre><code>@Entity\ndata class Record(\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    val id: Long? = null,\n    @Column(nullable = false, name = \"name\")\n    var name: String? = null\n)\n</code></pre>\n\n<p>And I can call component1 and component2 functions to access the properties. However, as I declare the property var, I have getter and setter, and if I declare property val I have the getter. Are componentN functions are redundant in this case, and why do we need them, because getters seem to be much more self-explanatory?</p>\n"}, {"tags": ["android", "kotlin", "companion-object"], "comments": [{"owner": {"reputation": 8276, "user_id": 3827276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gWiXC.png?s=128&g=1", "display_name": "Maciej Ciemi\u0119ga", "link": "https://stackoverflow.com/users/3827276/maciej-ciemi%c4%99ga"}, "edited": false, "score": 1, "creation_date": 1491032113, "post_id": 43154058, "comment_id": 73384505, "body": "You should use <code>Intent(context, DummyActivity::class.java)</code> instead"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1491032125, "post_id": 43154058, "comment_id": 73384509, "body": "Unrelated: Activity already has a <code>onNewIntent</code> method, maybe you&#39;d like to rename your factory method to something simple and understandable at first glance like <code>createIntent</code>. (It&#39;s not a callback, it doesn&#39;t start with <code>on</code>.) Save your future self some time."}], "answers": [{"comments": [{"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1491507740, "post_id": 43158903, "comment_id": 73597202, "body": "What is @JvmStatic in this case?  And thank you for this answer!"}, {"owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "reply_to_user": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1491543944, "post_id": 43158903, "comment_id": 73609350, "body": "Just copied the question&#39;s code. In short, <code>@jvmStatic</code> tells the compiler to make this method static in the JVM platform."}, {"owner": {"reputation": 1645, "user_id": 1061644, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b7ef62396909e73a3316fe4aafb98e5d?s=128&d=identicon&r=PG", "display_name": "Ryhan", "link": "https://stackoverflow.com/users/1061644/ryhan"}, "edited": false, "score": 0, "creation_date": 1505509871, "post_id": 43158903, "comment_id": 79459256, "body": "if @jvmstatic is being used, why is it inside the companion object, isn&#39;t the above code saying <code>onNewIntent()</code> is a static method of Dummy&#39;s internal companion&#39;s object rather than a static method of <code>Dummy</code>"}], "tags": [], "owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "is_accepted": true, "score": 13, "last_activity_date": 1491061949, "creation_date": 1491061949, "answer_id": 43158903, "question_id": 43154058, "link": "https://stackoverflow.com/questions/43154058/companion-objects-does-android-want-to-register-them-as-activities/43158903#43158903", "title": "Companion objects - does Android want to register them as activities (?)", "body": "<p><code>DummyActivity.javaClass</code> refers to <code>DummyActivity.Companion</code> and not to <code>DummyActivity</code>. In fact, it is even a warning:</p>\n\n<blockquote>\n  <p>The resulting type of this <code>javaClass</code> call is\n  <code>Class&lt;Dummy.Companion&gt;</code> and not <code>Class&lt;Dummy&gt;</code>. Please use more clear\n  <code>::class.java</code> syntax to avoid confusion.</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/muDY3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/muDY3.png\" alt=\"Warning\"></a></p>\n\n<p>Instead, you should use <code>DummyActivity::class.java</code>,</p>\n"}], "owner": {"reputation": 205, "user_id": 5010978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf382f9e81ba403a0f3256596315be4f?s=128&d=identicon&r=PG&f=1", "display_name": "AndrzejZ", "link": "https://stackoverflow.com/users/5010978/andrzejz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3447, "favorite_count": 2, "accepted_answer_id": 43158903, "answer_count": 1, "score": 8, "last_activity_date": 1491061949, "creation_date": 1491031590, "question_id": 43154058, "link": "https://stackoverflow.com/questions/43154058/companion-objects-does-android-want-to-register-them-as-activities", "title": "Companion objects - does Android want to register them as activities (?)", "body": "<p>I have an Activity</p>\n\n<pre><code>class DummyActivity : Activity() {\n\n    companion object {\n        @JvmStatic fun onNewIntent(context: Context): Intent {\n            val intent = Intent(context, DummyActivity.javaClass)\n            return intent\n        }\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n}\n</code></pre>\n\n<p>It is declared in the Manifest as follows:</p>\n\n<pre><code>    &lt;activity android:name=\".DummyActivity\"/&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p>When I try to launch it, I get:</p>\n\n<blockquote>\n  <p>Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class > {com.example.andrzejzuzak.visiondummyapp/com.example.andrzejzuzak.visiondummyapp.DummyActivity$Companion}; have you declared this activity in your AndroidManifest.xml?\n                                                                                               at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1794)\n                                                                                               at android.app.Instrumentation.execStartActivity(Instrumentation.java:1512)\n                                                                                               at android.app.Activity.startActivityForResult(Activity.java:3930)\n                                                                                               at android.support.v4.app.BaseFragmentActivityJB.startActivityForResult(BaseFragmentActivityJB.java:50)\n                                                                                               at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:79)\n                                                                                               at android.app.Activity.startActivityForResult(Activity.java:3890)\n                                                                                               at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:859)\n                                                                                               at android.app.Activity.startActivity(Activity.java:4213)\n                                                                                               at android.app.Activity.startActivity(Activity.java:4181)\n                                                                                               at com.example.andrzejzuzak.visiondummyapp.MainActivity.onActivityResult(MainActivity.kt:85)\n                                                                                               at android.app.Activity.dispatchActivityResult(Activity.java:6456)\n                                                                                               at android.app.ActivityThread.deliverResults(ActivityThread.java:3695)\n                                                                                               at android.app.ActivityThread.handleSendResult(ActivityThread.java:3742)\u00a0\n                                                                                               at android.app.ActivityThread.-wrap16(ActivityThread.java)\u00a0\n                                                                                               at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1393)\u00a0\n                                                                                               at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n                                                                                               at android.os.Looper.loop(Looper.java:148)\u00a0\n                                                                                               at android.app.ActivityThread.main(ActivityThread.java:5417)\u00a0\n                                                                                               at java.lang.reflect.Method.invoke(Native Method)</p>\n</blockquote>\n\n<p>What bothers me is this line:</p>\n\n<blockquote>\n  <p>Unable to find explicit activity class {com.example.andrzejzuzak.visiondummyapp/com.example.andrzejzuzak.visiondummyapp.DummyActivity$Companion</p>\n</blockquote>\n\n<p>Does it actually mean that I have to register the Companion object somewhere?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 13314, "user_id": 1760984, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IcBXx.jpg?s=128&g=1", "display_name": "aldok", "link": "https://stackoverflow.com/users/1760984/aldok"}, "edited": false, "score": 1, "creation_date": 1491027103, "post_id": 43153421, "comment_id": 73383354, "body": "Thread has a setName method, you might want to try that one"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "reply_to_user": {"reputation": 13314, "user_id": 1760984, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IcBXx.jpg?s=128&g=1", "display_name": "aldok", "link": "https://stackoverflow.com/users/1760984/aldok"}, "edited": false, "score": 0, "creation_date": 1491027186, "post_id": 43153421, "comment_id": 73383368, "body": "@aldok how can I access the thread from within this code? so that I can call setname?"}], "answers": [{"comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1491032393, "post_id": 43153869, "comment_id": 73384568, "body": "<code>you can&#39;t use Thread&#39;s constructor that receives Runnable</code> Why is it?"}, {"owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 2, "creation_date": 1491059382, "post_id": 43153869, "comment_id": 73391830, "body": "Since the lambda represent the <code>Runnable</code> instance and not the <code>Thread</code> instance. Therefore, you can&#39;t set the thread&#39;s name inside it because from the language point of view, there is no thread but <code>Runnable</code>."}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1491106274, "post_id": 43153869, "comment_id": 73403664, "body": "I&#39;m a bit confused now, I like the acepted (other answer) for my code it is the easiest.. however my code&#39;s a bit of a mes now so I can&#39;t run it to test if it worked - are you guys saying it won&#39;t work?"}, {"owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "edited": false, "score": 0, "creation_date": 1491125382, "post_id": 43153869, "comment_id": 73407606, "body": "The other answer uses another constructor of both <code>Runnable</code> and name <code>String</code> so it works."}], "tags": [], "owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "is_accepted": true, "score": 8, "last_activity_date": 1491030224, "creation_date": 1491030224, "answer_id": 43153869, "question_id": 43153421, "link": "https://stackoverflow.com/questions/43153421/how-to-name-a-thread/43153869#43153869", "title": "How to name a thread?", "body": "<p>You can create a named thread using the <code>thread</code> function from <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.concurrent/thread.html\" rel=\"noreferrer\">stdlib</a>:</p>\n\n<pre><code>fun thread(\n    start: Boolean = true, \n    isDaemon: Boolean = false, \n    contextClassLoader: ClassLoader? = null, \n    name: String? = null, \n    priority: Int = -1, \n    block: () -&gt; Unit\n): Thread\n</code></pre>\n\n<p>Just change your code:</p>\n\n<pre><code>override val t: Thread = thread(name = \"transmitter thread\") {\n        try {\n            transmit()\n        } catch (e: Exception) {\n            println(\"Transmitter throws exception: $e\")\n        }\n    }\n</code></pre>\n\n<p>In order to set the thread's name from within the thread, you can't use <code>Thread</code>'s constructor that receives <code>Runnable</code>. You need to subclass the <code>Thread</code> class using the object expression:</p>\n\n<pre><code>val thread = object : Thread() {\n  override fun run() {\n       name = \"thread with random name: ${Math.random()}\"\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 6454574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1AYXr.png?s=128&g=1", "display_name": "MinteZ", "link": "https://stackoverflow.com/users/6454574/mintez"}, "is_accepted": false, "score": 2, "last_activity_date": 1491030343, "creation_date": 1491030343, "answer_id": 43153883, "question_id": 43153421, "link": "https://stackoverflow.com/questions/43153421/how-to-name-a-thread/43153883#43153883", "title": "How to name a thread?", "body": "<p>You can use Thread's constructor, although due to how its arguments are ordered, you'll have to do this:</p>\n\n<pre><code>override val t: Thread = Thread({\n    try {\n        transmit()\n    } catch (e: Exception) {\n        println(\"Transmitter throws exception: $e\")\n    }}, \"Your name here\")\n}\n</code></pre>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 43153869, "answer_count": 2, "score": 2, "last_activity_date": 1491030343, "creation_date": 1491026769, "question_id": 43153421, "link": "https://stackoverflow.com/questions/43153421/how-to-name-a-thread", "title": "How to name a thread?", "body": "<p>How can I name this <code>Thread</code>?</p>\n\n<pre><code>    override val t: Thread = Thread {\n        try {\n            transmit()\n        } catch (e: Exception) {\n            println(\"Transmitter throws exception: $e\")\n        }\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview", "kotlin-extension"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 2, "last_activity_date": 1491027119, "creation_date": 1491027119, "answer_id": 43153456, "question_id": 43152625, "link": "https://stackoverflow.com/questions/43152625/generics-for-recyclerview-adapter-android/43153456#43153456", "title": "Generics for RecyclerView.Adapter Android", "body": "<p>There are a couple ways to do this.</p>\n\n<ol>\n<li><p>You can mark the <code>ViewHolder</code> parameter with <code>out</code> variance. This way your function isn't generic, so you won't have access to the exact type of the <code>ViewHolder</code> in it.</p>\n\n<pre><code>fun RecyclerView.Adapter&lt;out RecyclerView.ViewHolder&gt;.notifyAdapter() {  ...  }\n</code></pre></li>\n<li><p>Alternatively, you can have a generic type parameter for the function that's bound to be a subclass of <code>ViewHolder</code>. This way you can use <code>T</code> inside the function, for example, you could create a <code>listOf&lt;T&gt;()</code> if you wanted to.</p>\n\n<pre><code>fun &lt;T : RecyclerView.ViewHolder&gt; RecyclerView.Adapter&lt;T&gt;.notifyAdapter() {  ...  }\n</code></pre></li>\n<li><p>Finally, you could also use star projection, which I believe in this case will give you the exact same result as the first solution, since the type argument of the <code>Adapter</code> class has an upper bound of <code>ViewHolder</code>.</p>\n\n<pre><code>fun RecyclerView.Adapter&lt;*&gt;.notifyAdapter() {  ...  }\n</code></pre></li>\n</ol>\n\n<p>You can read in more detail about variance and projections in the offical documentation <a href=\"http://kotlinlang.org/docs/reference/generics.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 1, "accepted_answer_id": 43153456, "answer_count": 1, "score": 1, "last_activity_date": 1491032957, "creation_date": 1491018629, "last_edit_date": 1491032957, "question_id": 43152625, "link": "https://stackoverflow.com/questions/43152625/generics-for-recyclerview-adapter-android", "title": "Generics for RecyclerView.Adapter Android", "body": "<p>I am trying to use a common extension function for all <code>RecyclerView.Adapter</code> in my app so I created an ext fun called notifyAdapter, But it is not working as expected.</p>\n\n<pre><code>fun &lt;T&gt; RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;.notifyAdapter() {\n    updateAll()\n    notifyDataSetChanged()\n}\n</code></pre>\n\n<p>When i use</p>\n\n<p><code>offlineListAdapter.notifyAdapter()</code> or <code>onlineListAdapter.notifyAdapter()</code></p>\n\n<p>it throws</p>\n\n<blockquote>\n  <p>Cannot be applied to receiver OfflineListAdapter</p>\n</blockquote>\n\n<p>OfflineListAdapter.kt</p>\n\n<pre><code>    class OfflineListAdapter : RecyclerView.Adapter&lt;OfflineListAdapter.OfflineListHolder&gt;() {\n\n      class OfflineListHolder(view: View) : RecyclerView.ViewHolder(view) {\n\n      }\n    }\n</code></pre>\n\n<p>How can I create a common extension function for all <code>RecyclerView.Adapter</code> using Generics.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "kapt"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1491211193, "post_id": 43151536, "comment_id": 73434425, "body": "Please show how exactly you&#39;re configuring annotation processors in your build.gradle."}, {"owner": {"reputation": 107, "user_id": 3521125, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e86703d2a84ffcb3048c52cf3a3d0712?s=128&d=identicon&r=PG&f=1", "display_name": "Tiero", "link": "https://stackoverflow.com/users/3521125/tiero"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1491304284, "post_id": 43151536, "comment_id": 73482538, "body": "@yole I was mixing <code>annotationProcessor</code>s for my AutoValue Java code and <code>kapt</code> for e.g. PaperParcel library. Once I migrated my models to Kotlin and removed AutoValue (so now only <code>kapt</code> is used) the problem disappeared."}], "owner": {"reputation": 107, "user_id": 3521125, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e86703d2a84ffcb3048c52cf3a3d0712?s=128&d=identicon&r=PG&f=1", "display_name": "Tiero", "link": "https://stackoverflow.com/users/3521125/tiero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491007304, "creation_date": 1491007304, "question_id": 43151536, "link": "https://stackoverflow.com/questions/43151536/kotlin-noclassdeffounderror-android-studio-shows-classes-that-shouldnt-be-th", "title": "Kotlin: NoClassDefFoundError - Android Studio shows classes that shouldn&#39;t be there", "body": "<p>I just updated my small Android project to Kotlin. And as a result I replaced <code>annotationProcessor</code> with <code>kapt</code> everywhere it was used in my <code>build.gradle</code> file. My problem is that although I don't use Guava Android Studio is allowing me to e.g. import <code>com.google.common.base.Preconditions</code> and use it, but when it comes to launching the app <code>NoClassDefFoundError</code> is thrown.</p>\n\n<p>So I assume that Guava isn't compiled with my project () and that's why I am getting this error. But then why Android Studio allowing me to use it?</p>\n"}, {"tags": ["operator-overloading", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 2, "creation_date": 1490997701, "post_id": 43150289, "comment_id": 73377681, "body": "The reason for this is that, if an extension had a higher precedence than a member function, the result of a function call could be indeterminate and could change by simply including another library in your project without you being aware (assuming the extension was in scope or imported)."}, {"owner": {"reputation": 1512, "user_id": 5132301, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GUE3k.jpg?s=128&g=1", "display_name": "Sero", "link": "https://stackoverflow.com/users/5132301/sero"}, "edited": false, "score": 0, "creation_date": 1491000630, "post_id": 43150289, "comment_id": 73378474, "body": "Does this mean that it is impossible to effectively overload the invoke function? Because every time the member function takes precedence. And because there is no way to define a class of a function type in kotlin then implement operator overloading as a member function of a function."}, {"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "reply_to_user": {"reputation": 1512, "user_id": 5132301, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GUE3k.jpg?s=128&g=1", "display_name": "Sero", "link": "https://stackoverflow.com/users/5132301/sero"}, "edited": false, "score": 1, "creation_date": 1491010060, "post_id": 43150289, "comment_id": 73380425, "body": "For functional types yes, but any class that has an open invoke function can be overridden. The point of functional types is to accept anything that matches the signature. As with anything else, if you want specific functionality, you create a class with that functionality."}], "tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": false, "score": 4, "last_activity_date": 1490997874, "last_edit_date": 1490997874, "creation_date": 1490997543, "answer_id": 43150289, "question_id": 43149909, "link": "https://stackoverflow.com/questions/43149909/kotlin-functions-invoke-operator-overloading/43150289#43150289", "title": "Kotlin - Function&#39;s Invoke Operator Overloading", "body": "<p>Your issue has to to with resolution precedence. <a href=\"http://kotlinlang.org/docs/reference/extensions.html#extensions-are-resolved-statically\" rel=\"nofollow noreferrer\">According to the Kotlin docs</a>:</p>\n\n<blockquote>\n  <p>If a class has a member function, and an extension function is defined which has the same receiver type, the same name and is applicable to given arguments, the <strong>member always wins</strong>.</p>\n</blockquote>\n\n<p>So your <code>operator fun ((Boolean, Boolean, Boolean) -&gt; Boolean).invoke(...)</code> extension function is never called because the member <code>invoke</code> takes precedence.</p>\n\n<p><strong>Another Answer</strong></p>\n\n<p>It is indeed operator overloading, but through an extension. Again, since <code>(Boolean, Boolean, Boolean) -&gt; Boolean</code> already has a <code>fun invoke(Boolean, Boolean, Boolean): Boolean</code> defined, your extension loses.</p>\n"}, {"tags": [], "owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "is_accepted": true, "score": 12, "last_activity_date": 1542042724, "last_edit_date": 1542042724, "creation_date": 1491008877, "answer_id": 43151677, "question_id": 43149909, "link": "https://stackoverflow.com/questions/43149909/kotlin-functions-invoke-operator-overloading/43151677#43151677", "title": "Kotlin - Function&#39;s Invoke Operator Overloading", "body": "<p>As said in another answer, invoke is defined on the function object itself, so you can't override it with an extension method.</p>\n\n<p>I think the deeper problem here, though, is a slight misunderstanding of the purpose of this feature. Let's look at <code>plus</code> for the <code>+</code> operator instead.</p>\n\n<p>I think you'll agree that attempting to define <code>operator fun Int.plus(b: Int): Int { /* ... */}</code> makes no sense, because overriding the default <code>+</code> operator for ints is a pretty dangerous thing to do, yes?</p>\n\n<p>However, if you define a complex number class:</p>\n\n<pre><code>data class Complex(real: Double, img: Double)\n</code></pre>\n\n<p>Then it's perfectly reasonable to define this to sum complex numbers:</p>\n\n<pre><code>operator fun Complex.plus(other: Complex): Complex {\n  val real = this.real + other.real\n  val img  = this.img + other.img\n  return Complex(real, img)\n}\n</code></pre>\n\n<p>So, same thing with <code>invoke</code> and <code>()</code>: The meaning of <code>()</code> is that it's whatever is analogous to invoking a function for your type, and overriding <code>invoke</code> on something that's already a function is just asking for trouble. What you want to use it for instead is to provide function-like syntax for your own objects.</p>\n\n<p>For example, imagine you define an interface like so:</p>\n\n<pre><code>interface MyCallback {\n  fun call(ctx: MyContext)\n}\n</code></pre>\n\n<p>Which you use the usual way:</p>\n\n<pre><code>callback.call(ctx)\n</code></pre>\n\n<p>But with an implementation of the <code>invoke</code> operator overload, you get to use it as a function:</p>\n\n<pre><code>operator fun MyCallback.invoke(ctx: Context) = this.call(ctx)\n\n/* Elsewhere... */\ncallback(ctx)\n</code></pre>\n\n<p>Hope that clarifies how you use <code>invoke</code>/<code>()</code></p>\n"}], "owner": {"reputation": 1512, "user_id": 5132301, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GUE3k.jpg?s=128&g=1", "display_name": "Sero", "link": "https://stackoverflow.com/users/5132301/sero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5988, "favorite_count": 1, "accepted_answer_id": 43151677, "answer_count": 2, "score": 3, "last_activity_date": 1542042724, "creation_date": 1490995608, "last_edit_date": 1490996897, "question_id": 43149909, "link": "https://stackoverflow.com/questions/43149909/kotlin-functions-invoke-operator-overloading", "title": "Kotlin - Function&#39;s Invoke Operator Overloading", "body": "<p>I am currently studying <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"nofollow noreferrer\">Kotlin - Operator Overloading</a> <br>\nI am trying to understand (with an example) how does operator overloading work for a function's <code>invoke()</code> function</p>\n\n<p><strong>The pre-test</strong></p>\n\n<ul>\n<li><p><a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">Kotlin's Extension Functions</a></p>\n\n<pre><code>fun exampleOfExtensionFunction() {\n    fun Int.randomize(): Int {\n        return Random(this.toLong()).nextInt()\n    }\n\n    val randomizedFive = 5.randomize()\n    println(\"$randomizedFive\")\n}\n</code></pre>\n\n<p>Prints :</p>\n\n<blockquote>\n  <p>-1157408321</p>\n</blockquote></li>\n<li><p><a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\" rel=\"nofollow noreferrer\">In Kotlin, functions can be declared as variables with types</a></p>\n\n<pre><code>fun exampleOfFunctionType() {\n    val printNumber: (number: Int) -&gt; Unit\n    printNumber = { number -&gt;\n        println(\"[$number = ${number.toString(16).toUpperCase()} = ${number.toString(2)}]\")\n    }\n\n    printNumber(1023)\n}\n</code></pre>\n\n<p>Prints :</p>\n\n<blockquote>\n  <p>[1023 = 3FF = 1111111111]</p>\n</blockquote></li>\n<li><p><a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#operator-overloading\" rel=\"nofollow noreferrer\">Kotlin allows operator overloading with both extension and member functions</a></p>\n\n<pre><code>fun exampleOfOperatorOverloadingUsingExtensionFunction() {\n    class MyType() {\n        val strings: ArrayList&lt;String&gt; = ArrayList&lt;String&gt;()\n        override fun toString(): String {\n            val joiner: StringJoiner = StringJoiner(\" , \", \"{ \", \" }\")\n            for (string in strings) {\n                joiner.add(\"\\\"$string\\\"\")\n            }\n            return joiner.toString()\n        }\n    }\n\n    operator fun MyType.contains(stringToCheck: String): Boolean {\n        for (stringElement in strings) {\n            if (stringElement == stringToCheck) return true\n        }\n        return false\n    }\n\n    val myType = MyType()\n    myType.strings.add(\"one\")\n    myType.strings.add(\"two\")\n    myType.strings.add(\"three\")\n    println(\"$myType\")\n    println(\"(myType.contains(\\\"four\\\")) = ${myType.contains(\"four\")} , (\\\"three\\\" in myType) = ${\"three\" in myType}\")\n}\n</code></pre>\n\n<p>Prints :</p>\n\n<blockquote>\n  <p>{ \"one\" , \"two\" , \"three\" }<br>\n  (myType.contains(\"four\")) = false , (\"three\" in myType) = true</p>\n</blockquote></li>\n</ul>\n\n<p><strong>Test Attempt</strong><br>\nBased on the above. I tried to create an example of a function's <code>invoke()</code> operator overloading using the type <code>(Boolean, Boolean, Boolean) -&gt; Boolean</code> as a receiver type for an extension function <code>invoke(flag1: Boolean, flag2: Boolean, flag3: Boolean)</code>. This however did not work as expected.</p>\n\n<pre><code>    fun attemptFunctionInvokeOperatorOverloading() {\n        operator fun ((Boolean, Boolean, Boolean) -&gt; Boolean).invoke(flag1: Boolean, flag2: Boolean, flag3: Boolean): Boolean {\n            println(\"Overloaded invoke operator\")\n            return flag1 &amp;&amp; flag2 &amp;&amp; flag3\n        }\n\n        var func1: ((Boolean, Boolean, Boolean) -&gt; Boolean) = { flag1, flag2, flag3 -&gt;\n            println(\"func1 body\")\n            flag1 &amp;&amp; flag2 &amp;&amp; flag3\n        }\n\n        fun func2(flag1: Boolean, flag2: Boolean, flag3: Boolean): Boolean {\n            println(\"func2 body\")\n            return flag1 &amp;&amp; flag2 &amp;&amp; flag3\n        }\n\n        func1(true, true, false)\n        func2(true, true, true)\n    }\n</code></pre>\n\n<p>Prints :</p>\n\n<blockquote>\n  <p>func1 body<br>\n  func2 body</p>\n</blockquote>\n\n<p>Expected :</p>\n\n<blockquote>\n  <p>Overloaded invoke operator<br>\n  Overloaded invoke operator</p>\n</blockquote>\n\n<p><strong>Another question</strong> :<br>\nWhat exactly is this? (If it isn't operator overloading)</p>\n\n<pre><code>        operator fun ((Boolean, Boolean, Boolean) -&gt; Boolean).invoke(flag1: Boolean, flag2: Boolean, flag3: Boolean): Boolean {\n            println(\"Overloaded invoke operator\")\n            return flag1 &amp;&amp; flag2 &amp;&amp; flag3\n        }\n</code></pre>\n"}, {"tags": ["logging", "kotlin", "kotlin-logging"], "comments": [{"owner": {"reputation": 13177, "user_id": 411965, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/UVUN2.jpg?s=128&g=1", "display_name": "oshai", "link": "https://stackoverflow.com/users/411965/oshai"}, "edited": false, "score": 0, "creation_date": 1491029848, "post_id": 43146977, "comment_id": 73383949, "body": "Setting log level is done per implementation. Kotlin-logging and slf4j are just facades for the underlying logging lib (log4j etc&#39;). Which one do you use?"}], "answers": [{"comments": [{"owner": {"reputation": 4230, "user_id": 1804317, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/84f00e56b203aec51a3104f1ed30c3da?s=128&d=identicon&r=PG", "display_name": "Jakob Abfalter", "link": "https://stackoverflow.com/users/1804317/jakob-abfalter"}, "edited": false, "score": 0, "creation_date": 1490993191, "post_id": 43147548, "comment_id": 73376099, "body": "I&#39;m not necessarily looking for a way to do this at runtime. Buildtime would be good enough for this project."}, {"owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "reply_to_user": {"reputation": 4230, "user_id": 1804317, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/84f00e56b203aec51a3104f1ed30c3da?s=128&d=identicon&r=PG", "display_name": "Jakob Abfalter", "link": "https://stackoverflow.com/users/1804317/jakob-abfalter"}, "edited": false, "score": 0, "creation_date": 1491029644, "post_id": 43147548, "comment_id": 73383891, "body": "Hi, I&#39;ve read again the question and now I hopes it really answers the question."}], "tags": [], "owner": {"reputation": 4319, "user_id": 4874829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cfECAGc8huU/AAAAAAAAAAI/AAAAAAAAAJk/Pebw5H-quLo/photo.jpg?sz=128", "display_name": "Yoav Sternberg", "link": "https://stackoverflow.com/users/4874829/yoav-sternberg"}, "is_accepted": true, "score": 11, "last_activity_date": 1491029623, "last_edit_date": 1495539998, "creation_date": 1490985570, "answer_id": 43147548, "question_id": 43146977, "link": "https://stackoverflow.com/questions/43146977/how-to-configure-kotlin-logging-logger/43147548#43147548", "title": "how to configure kotlin-logging logger", "body": "<blockquote>\n  <p>We do not have a way to change log level from slf4j api and we need to rely on implementation</p>\n</blockquote>\n\n<p>By looking at the <a href=\"https://github.com/qos-ch/slf4j/blob/master/slf4j-api/src/main/java/org/slf4j/Logger.java\" rel=\"noreferrer\"><code>Logger</code></a> interface of <code>slf4j</code>, you can see that it has <code>isLevelEnabled()</code> for all the levels, but not a setter. Therefore, setting the level is implementation specific and it is based on the underlying logging platform you use.</p>\n\n<hr>\n\n<p>From your question it looks like you use <code>slf4j SimpleLogger</code> as the layer behind <code>slf4j</code>. For <code>SimpleLogger</code>, you can only change the log level through properties like you've already done.\nSee <a href=\"https://stackoverflow.com/questions/14544991/how-to-configure-slf4j-simple\">this question</a> for more information.</p>\n\n<pre><code>System.setProperty(org.slf4j.impl.SimpleLogger.DEFAULT_LOG_LEVEL_KEY, \"TRACE\");\n</code></pre>\n\n<blockquote>\n  <p>Please note that once the logger is created the log level can't be changed. If you need to dynamically change the logging level you might want to use log4j with SLF4J.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 180788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec35883254018d08d64566f2ccaa006d?s=128&d=identicon&r=PG", "display_name": "jensck", "link": "https://stackoverflow.com/users/180788/jensck"}, "is_accepted": false, "score": 1, "last_activity_date": 1516918138, "creation_date": 1516918138, "answer_id": 48452700, "question_id": 43146977, "link": "https://stackoverflow.com/questions/43146977/how-to-configure-kotlin-logging-logger/48452700#48452700", "title": "how to configure kotlin-logging logger", "body": "<p>If you're using using <code>kotlin-logging</code> on Android, the easy answer is: just use <a href=\"https://github.com/mvysny/slf4j-handroid\" rel=\"nofollow noreferrer\">slf4j-handroid</a>.</p>\n\n<p>It's a simple fork of the (recently deprecated!) <code>slf4j-android</code>, but which doesn't inherit <em>delightful</em> behaviors like requiring system properties to be set <em>just so you can see your debug logs.</em></p>\n"}, {"tags": [], "owner": {"reputation": 9549, "user_id": 317522, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/y7DXx.jpg?s=128&g=1", "display_name": "Paulo Merson", "link": "https://stackoverflow.com/users/317522/paulo-merson"}, "is_accepted": false, "score": 3, "last_activity_date": 1588012150, "creation_date": 1588012150, "answer_id": 61465856, "question_id": 43146977, "link": "https://stackoverflow.com/questions/43146977/how-to-configure-kotlin-logging-logger/61465856#61465856", "title": "how to configure kotlin-logging logger", "body": "<p><em>I'm using kotlin-logging in a <strong>Spring Boot</strong> application.</em></p>\n\n<h2>What worked</h2>\n\n<p>Run application with </p>\n\n<pre><code>-Dlogging.level.com.mydomain.myapp=DEBUG\n</code></pre>\n\n<p>(Replace <code>com.mydomain.myapp</code> with the desired package namespace or <code>root</code> for all.)</p>\n\n<p>Alternatively you can add the property to an <em>application properties</em> file </p>\n\n<pre><code>logging.level.com.mydomain.myapp = DEBUG\n</code></pre>\n\n<h2>What didn't work</h2>\n\n<ul>\n<li><code>-Dorg.slf4j.simpleLogger.defaultLogLevel=DEBUG</code></li>\n<li><code>-Dorg.slf4j.simplelogger.defaultlog=DEBUG</code></li>\n<li><code>--debug</code> (as one of the program options)</li>\n</ul>\n"}], "owner": {"reputation": 4230, "user_id": 1804317, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/84f00e56b203aec51a3104f1ed30c3da?s=128&d=identicon&r=PG", "display_name": "Jakob Abfalter", "link": "https://stackoverflow.com/users/1804317/jakob-abfalter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6070, "favorite_count": 5, "accepted_answer_id": 43147548, "answer_count": 3, "score": 15, "last_activity_date": 1588012150, "creation_date": 1490983296, "question_id": 43146977, "link": "https://stackoverflow.com/questions/43146977/how-to-configure-kotlin-logging-logger", "title": "how to configure kotlin-logging logger", "body": "<p>For logging purposes in my Kotlin project I am using <a href=\"https://github.com/MicroUtils/kotlin-logging\" rel=\"noreferrer\">kotlin-logging</a> which is really nice to use however I am missing a very central point: How can I configure the log level of the logger?</p>\n\n<p>Per default it is set to info and I would like to set it to debug. As there is nothing about that on the Github page nor is there any method to set the level programmatically I had a look into slf4j as kotlin-logging is a wrapper around that. </p>\n\n<p>Apparently I have to set a System Property like this:</p>\n\n<pre><code>-Dorg.slf4j.simpleLogger.defaultLogLevel=DEBUG\n</code></pre>\n\n<p>However I have no idea how to do this in Kotlin.</p>\n\n<p>Anyone can help me out?</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 0, "creation_date": 1490969553, "post_id": 43141740, "comment_id": 73362830, "body": "What annotation processor do you use?"}, {"owner": {"reputation": 1188, "user_id": 1725411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/84f44276a823d933ee56bba3c6f5e738?s=128&d=identicon&r=PG", "display_name": "Borja", "link": "https://stackoverflow.com/users/1725411/borja"}, "reply_to_user": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 0, "creation_date": 1490970029, "post_id": 43141740, "comment_id": 73363228, "body": "I use kapt. I have the following lines in my build.gradle.        kapt &quot;com.google.dagger:dagger-compiler:$dagger_version&quot; kapt {     generateStubs = true }"}, {"owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 0, "creation_date": 1490970149, "post_id": 43141740, "comment_id": 73363320, "body": "Compare java generated classes and kotlin generated classes, see the diff. Obviously generated class misses @Produces."}, {"owner": {"reputation": 1188, "user_id": 1725411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/84f44276a823d933ee56bba3c6f5e738?s=128&d=identicon&r=PG", "display_name": "Borja", "link": "https://stackoverflow.com/users/1725411/borja"}, "reply_to_user": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "edited": false, "score": 2, "creation_date": 1490970359, "post_id": 43141740, "comment_id": 73363492, "body": "No, the problem is that kapt fails into the translation and adds &lt;? extends Foo&gt; and dagger does not know how to manage that. I&#39;m trying to have this module in java as a workarround."}], "answers": [{"comments": [{"owner": {"reputation": 1188, "user_id": 1725411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/84f44276a823d933ee56bba3c6f5e738?s=128&d=identicon&r=PG", "display_name": "Borja", "link": "https://stackoverflow.com/users/1725411/borja"}, "edited": false, "score": 4, "creation_date": 1491211178, "post_id": 43149382, "comment_id": 73434420, "body": "MutableSet&lt;&gt; could also be used"}, {"owner": {"reputation": 1384, "user_id": 858448, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a5e40090f95e9e86021c2f3f7d7b9ab2?s=128&d=identicon&r=PG", "display_name": "Ghedeon", "link": "https://stackoverflow.com/users/858448/ghedeon"}, "edited": false, "score": 18, "creation_date": 1520865377, "post_id": 43149382, "comment_id": 85478933, "body": "Jesus Christ, 2 wasted days! Why it&#39;s so painful... Thank you! If anyone like me is struggling with multibinding <code>Map</code> it&#39;s pretty much the same trick. Ex: <code>class MviViewModelFactory @Inject constructor(private val providers: Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;) : ViewModelProvider.Factory {</code>"}, {"owner": {"reputation": 1630, "user_id": 3256989, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/1RHkQ.jpg?s=128&g=1", "display_name": "ultraon", "link": "https://stackoverflow.com/users/3256989/ultraon"}, "edited": false, "score": 1, "creation_date": 1572968898, "post_id": 43149382, "comment_id": 103722992, "body": "Thank you for the answer, I would make some important addition, if you use a specific Qualifier, you have to put &quot;field&quot; in the annotation: &quot;@field:MyQualifier&quot;. You don&#39;t need to do it if you use Dagger 2.25.2 version and above, AFAIK."}], "tags": [], "owner": {"reputation": 966, "user_id": 2160476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d4dc8e6f0f779904e925873eea65fe?s=128&d=identicon&r=PG", "display_name": "Aleksandr", "link": "https://stackoverflow.com/users/2160476/aleksandr"}, "is_accepted": true, "score": 91, "last_activity_date": 1490993006, "creation_date": 1490993006, "answer_id": 43149382, "question_id": 43141740, "link": "https://stackoverflow.com/questions/43141740/dagger-2-multibindings-with-kotlin/43149382#43149382", "title": "Dagger 2 multibindings with Kotlin", "body": "<p>As it described in the Kotlin <a href=\"http://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#variant-generics\" rel=\"noreferrer\">reference</a></p>\n\n<blockquote>\n  <p>To make Kotlin APIs work in Java we generate <code>Box&lt;Super&gt;</code> as \n  <code>Box&lt;? extends Super&gt;</code> for covariantly defined <code>Box</code> (or <code>Foo&lt;? super Bar&gt;</code> for\n  contravariantly defined Foo) when it appears as a parameter.</p>\n</blockquote>\n\n<p>You can use <code>@JvmSuppressWildcards</code> for avoiding it, just as following:</p>\n\n<pre><code>@Inject lateinit var foo: Set&lt;@JvmSuppressWildcards Foo&gt;\n</code></pre>\n"}], "owner": {"reputation": 1188, "user_id": 1725411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/84f44276a823d933ee56bba3c6f5e738?s=128&d=identicon&r=PG", "display_name": "Borja", "link": "https://stackoverflow.com/users/1725411/borja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5094, "favorite_count": 6, "accepted_answer_id": 43149382, "answer_count": 1, "score": 39, "last_activity_date": 1490993006, "creation_date": 1490966243, "question_id": 43141740, "link": "https://stackoverflow.com/questions/43141740/dagger-2-multibindings-with-kotlin", "title": "Dagger 2 multibindings with Kotlin", "body": "<p>I have the following snippet in my dagger 2 module</p>\n\n<pre><code>@Singleton\n@Provides\n@ElementsIntoSet\nfun providesQueries(foo: Foo): Set&lt;Foo&gt;{\n    val queries = LinkedHashSet&lt;Foo&gt;()\n    queries.add(foo)\n    return queries\n}\n</code></pre>\n\n<p>I try to inject into in this way</p>\n\n<pre><code>@Inject lateinit var foo: Set&lt;Foo&gt;\n</code></pre>\n\n<p>But dagger shows an error which says that Dagger cannot provides java.util.Set without @Provides or @Produces method.</p>\n\n<p>I did the same in java and it worked. Does somebody know why is it failing?</p>\n"}, {"tags": ["android", "timer", "rx-java", "kotlin"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 2, "creation_date": 1490964849, "post_id": 43141083, "comment_id": 73359418, "body": "See the <a href=\"http://reactivex.io/RxJava/1.x/javadoc/rx/Observable.html#timer(long,%20java.util.concurrent.TimeUnit,%20rx.Scheduler)\" rel=\"nofollow noreferrer\">javadoc</a>. It is firing exactly once and you need <code>interval</code>."}, {"owner": {"reputation": 363, "user_id": 1920068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02a1b2f0cb96b815c50e3bd164f1e592?s=128&d=identicon&r=PG", "display_name": "Antonio Ribeiro", "link": "https://stackoverflow.com/users/1920068/antonio-ribeiro"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1490965159, "post_id": 43141083, "comment_id": 73359653, "body": "damn it, I guess I did confuse the operators. You are correct! I&#39;ll try it when I arrive home, but you should probably write as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 1824898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2590cf264facfb642d166ab19bcf9035?s=128&d=identicon&r=PG", "display_name": "\u041a\u043b\u0430\u0443\u0441 \u0428\u0432\u0430\u0440\u0446", "link": "https://stackoverflow.com/users/1824898/%d0%9a%d0%bb%d0%b0%d1%83%d1%81-%d0%a8%d0%b2%d0%b0%d1%80%d1%86"}, "is_accepted": true, "score": 4, "last_activity_date": 1503991844, "creation_date": 1503991844, "answer_id": 45933208, "question_id": 43141083, "link": "https://stackoverflow.com/questions/43141083/rxjava2-timer-and-combinelatest/45933208#45933208", "title": "RxJava2 timer and combineLatest", "body": "<p>That works as designed. <code>Observable.timer</code> schedules some task for single delayed execution. <strong>If you want something to be executed periodically try <code>interval</code> instead of <code>timer</code>.</strong> </p>\n\n<pre><code>Observable.interval(0,5, TimeUnit.SECONDS);\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 1920068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02a1b2f0cb96b815c50e3bd164f1e592?s=128&d=identicon&r=PG", "display_name": "Antonio Ribeiro", "link": "https://stackoverflow.com/users/1920068/antonio-ribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1628, "favorite_count": 0, "accepted_answer_id": 45933208, "answer_count": 1, "score": 4, "last_activity_date": 1503991844, "creation_date": 1490964463, "question_id": 43141083, "link": "https://stackoverflow.com/questions/43141083/rxjava2-timer-and-combinelatest", "title": "RxJava2 timer and combineLatest", "body": "<p>kind of new to RxJava2\nI'm having problems with <code>timer</code> and <code>combineLatest</code> e.g.:</p>\n\n<pre><code>Observable.combineLatest(\n  Observable.timer(5, TimeUnit.SECONDS).map { TimedData(it) },\n  locationDataSource.listen(),\n  sensorDataSource.listen().\n  Function3 { timedData, location, sensorEvent -&gt; Combined(timedData, location, sensorEvent) }\n).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe {\n  Log.d(TAG, \"Timer -&gt; \" + it.timedData)\n}\n</code></pre>\n\n<p>What's happening is that  <code>timedData</code> is only being update once, then it never fires again, all the other observables are begin updated.\nI've found <a href=\"https://github.com/ReactiveX/RxJava/issues/1717\" rel=\"nofollow noreferrer\">https://github.com/ReactiveX/RxJava/issues/1717</a>  but it's from 2014, so I would think it's already solved.</p>\n\n<p>Is this still happening because of BackPressure?</p>\n"}, {"tags": ["generics", "types", "nested", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "is_accepted": true, "score": 2, "last_activity_date": 1490949534, "creation_date": 1490949534, "answer_id": 43136207, "question_id": 43134156, "link": "https://stackoverflow.com/questions/43134156/accessing-type-parameters-of-outer-type/43136207#43136207", "title": "Accessing type parameters of outer type", "body": "<p>No, you can't. An interface can't be a non-static inner class, which is a platform constrain that can't be overcame by Kotlin. \nI know it would be pretty useful to constrain how the companion object should be, but this haven't been considered yet. I don't know if JetBrains will ever take this suggestion seriously.</p>\n\n<p>In your attempt, those two interfaces are NOT related at all, except that you can find <code>KClass&lt;Compaion&gt;</code> in <code>JsonRepresentable::class.nestedClasses</code>. The relationship between these interfaces can be compared to the relationship between a Java static inner class and its declaring class.</p>\n"}], "owner": {"reputation": 6434, "user_id": 539599, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iB0U.jpg?s=128&g=1", "display_name": "Raphael", "link": "https://stackoverflow.com/users/539599/raphael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 43136207, "answer_count": 1, "score": 0, "last_activity_date": 1490949534, "creation_date": 1490942720, "question_id": 43134156, "link": "https://stackoverflow.com/questions/43134156/accessing-type-parameters-of-outer-type", "title": "Accessing type parameters of outer type", "body": "<p>In Kotlin, we can define nested interfaces. If the outer interface is generic (here just to simulate a proper <code>Self</code> meta-type, but one can imagine other uses), can I refer to its type parameter from the inner type?</p>\n\n<p>That is, I want to achieve (an equivalent of) this:</p>\n\n<pre><code>interface JsonRepresentable&lt;Self: JsonRepresentable&lt;Self&gt;&gt; {\n    fun toJson(): String\n\n    interface Companion {\n        operator fun invoke(json:String): Self?\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "async-await", "kotlin", "coroutine"], "comments": [{"owner": {"reputation": 1412, "user_id": 6346531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75aa9d2cb0f4e6bdf16e80bb06d5f8f1?s=128&d=identicon&r=PG", "display_name": "aksh1618", "link": "https://stackoverflow.com/users/6346531/aksh1618"}, "edited": false, "score": 5, "creation_date": 1551638215, "post_id": 43132080, "comment_id": 96703918, "body": "<b>Note: Most of the answers are invalid with the changes in API in the stable release of coroutines.</b>"}], "answers": [{"tags": [], "owner": {"reputation": 2043, "user_id": 954811, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CjTYs.jpg?s=128&g=1", "display_name": "Steffen", "link": "https://stackoverflow.com/users/954811/steffen"}, "is_accepted": false, "score": 8, "last_activity_date": 1490950455, "creation_date": 1490950455, "answer_id": 43136461, "question_id": 43132080, "link": "https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android/43136461#43136461", "title": "Kotlin Coroutines the right way in Android", "body": "<p>I think you can get rid of <code>runOnUiThread { ... }</code> by using <code>UI</code> context for Android applications instead of <code>CommonPool</code>.</p>\n\n<p>The <code>UI</code> context is provided by the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/ui/kotlinx-coroutines-android\" rel=\"noreferrer\">kotlinx-coroutines-android</a> module.</p>\n"}, {"comments": [{"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 14, "creation_date": 1503098453, "post_id": 43151714, "comment_id": 78490869, "body": "Be aware that this basically does the same thing as a non-static AsyncTask, with the same potential issues. You can &quot;fire&quot; it but not &quot;forget&quot; it because it interacts with your Activity at the end. I would recommend that you start the coroutine in onStart() and cancel it in onStop(), to avoid performing work when the Activity is not visible and prevent updating views after the Activity is destroyed. Another solution would be to move the coroutine to a Loader or to a ViewModel (from the Architecture components)."}, {"owner": {"reputation": 1839, "user_id": 882912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0ee650f3ddaf676349ef9de068ad52?s=128&d=identicon&r=PG", "display_name": "KTCO", "link": "https://stackoverflow.com/users/882912/ktco"}, "reply_to_user": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 0, "creation_date": 1503101922, "post_id": 43151714, "comment_id": 78491467, "body": "That is a very good point regarding potential life-cycle issues. I agree that all coroutines (jobs) should be added to a collection of some type, so proper clean-up can be done in onStop(). I also use this &quot;fire-and-forget&quot; approach in response to user actions (button clicks). Thank you for your comment and recommendations."}, {"owner": {"reputation": 1764, "user_id": 4548520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5a177d9d1652832f694552623905abbb?s=128&d=identicon&r=PG&f=1", "display_name": "user25", "link": "https://stackoverflow.com/users/4548520/user25"}, "edited": false, "score": 0, "creation_date": 1546355972, "post_id": 43151714, "comment_id": 94830427, "body": "Yes, it&#39;s not good for Android apps. Try <a href=\"https://proandroiddev.com/android-coroutine-recipes-33467a4302e9\" rel=\"nofollow noreferrer\">proandroiddev.com/android-coroutine-recipes-33467a4302e9</a>"}], "tags": [], "owner": {"reputation": 1839, "user_id": 882912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0ee650f3ddaf676349ef9de068ad52?s=128&d=identicon&r=PG", "display_name": "KTCO", "link": "https://stackoverflow.com/users/882912/ktco"}, "is_accepted": true, "score": 43, "last_activity_date": 1492568296, "last_edit_date": 1492568296, "creation_date": 1491009188, "answer_id": 43151714, "question_id": 43132080, "link": "https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android/43151714#43151714", "title": "Kotlin Coroutines the right way in Android", "body": "<p>After struggling with this question for days, I think the most simple and clear async-await pattern for Android activities using Kotlin is:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    //...\n    loadDataAsync(); //\"Fire-and-forget\"\n}\n\nfun loadDataAsync() = async(UI) {\n    try {\n        //Turn on busy indicator.\n        val job = async(CommonPool) {\n           //We're on a background thread here.\n           //Execute blocking calls, such as retrofit call.execute().body() + caching.\n        }\n        job.await();\n        //We're back on the main thread here.\n        //Update UI controls such as RecyclerView adapter data.\n    } \n    catch (e: Exception) {\n    }\n    finally {\n        //Turn off busy indicator.\n    }\n}\n</code></pre>\n\n<p>The only Gradle dependencies for coroutines are: <code>kotlin-stdlib-jre7</code>, <code>kotlinx-coroutines-android</code>.</p>\n\n<p><strong>Note:</strong> Use <code>job.await()</code> instead of <code>job.join()</code> because <code>await()</code> rethrows exceptions, but <code>join()</code> does not. If you use <code>join()</code> you will need to check <code>job.isCompletedExceptionally</code> after the job completes.</p>\n\n<p>To start <em>concurrent</em> retrofit calls, you can do this:</p>\n\n<pre><code>val jobA = async(CommonPool) { /* Blocking call A */ };\nval jobB = async(CommonPool) { /* Blocking call B */ };\njobA.await();\njobB.await();\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>val jobs = arrayListOf&lt;Deferred&lt;Unit&gt;&gt;();\njobs += async(CommonPool) { /* Blocking call A */ };\njobs += async(CommonPool) { /* Blocking call B */ };\njobs.forEach { it.await(); };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 994, "user_id": 5148779, "user_type": "registered", "profile_image": "https://graph.facebook.com/862827860474068/picture?type=large", "display_name": "Felipe Belluco", "link": "https://stackoverflow.com/users/5148779/felipe-belluco"}, "edited": false, "score": 1, "creation_date": 1539900042, "post_id": 43266899, "comment_id": 92679790, "body": "I couldn&#39;t find the method withContext, where&#39;s is it from? My kotlin version is 1.2.71"}], "tags": [], "owner": {"reputation": 31, "user_id": 7686403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/439eaba8bb4f13ea72237db21edf5e4f?s=128&d=identicon&r=PG&f=1", "display_name": "David Olmos", "link": "https://stackoverflow.com/users/7686403/david-olmos"}, "is_accepted": false, "score": 3, "last_activity_date": 1514495684, "last_edit_date": 1514495684, "creation_date": 1491518500, "answer_id": 43266899, "question_id": 43132080, "link": "https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android/43266899#43266899", "title": "Kotlin Coroutines the right way in Android", "body": "<p>Like sdeff said, if you use the UI context, the code inside that coroutine will run on UI thread by default. And, if you need to run an instruction on another thread you can use <code>run(CommonPool) {}</code></p>\n\n<p>Furthermore, if you don't need to return nothing from the method, you can use the function <code>launch(UI)</code> instead of <code>async(UI)</code> (the former will return a <code>Job</code> and the latter a <code>Deferred&lt;Unit&gt;</code>).</p>\n\n<p>An example could be:</p>\n\n<pre><code>fun loadListOfMediaInAsync() = launch(UI) {\n    try {\n        withContext(CommonPool) { //The coroutine is suspended until run() ends\n            adapter.listOfMediaItems.addAll(resources.getAllTracks()) \n        }\n        adapter.notifyDataSetChanged()\n    } catch(e: Exception) {\n        e.printStackTrace()\n    } catch(o: OutOfMemoryError) {\n        o.printStackTrace()\n    } finally {\n        progress.dismiss()\n    }\n}\n</code></pre>\n\n<p>If you need more help I recommend you to read the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md\" rel=\"nofollow noreferrer\">main guide of kotlinx.coroutines</a> and, in addition, the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md\" rel=\"nofollow noreferrer\">guide of coroutines + UI</a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5307594"}, "edited": false, "score": 0, "creation_date": 1517576356, "post_id": 47555497, "comment_id": 84162813, "body": "Can I get the progress of the async task somehow?"}, {"owner": {"reputation": 7708, "user_id": 2065587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sU05y.jpg?s=128&g=1", "display_name": "mmBs", "link": "https://stackoverflow.com/users/2065587/mmbs"}, "edited": false, "score": 1, "creation_date": 1542986200, "post_id": 47555497, "comment_id": 93770975, "body": "This answer adds additional dependency - anko, which is currently in ver. <code>0.10.8</code>. I believe <a href=\"https://github.com/Kotlin/kotlinx.coroutines\" rel=\"nofollow noreferrer\">kotlinx.coroutines</a> are more than enough to achieve this, what OP asked. Especially in version <code>1.0.1</code>."}, {"owner": {"reputation": 484, "user_id": 4041955, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001049037804/picture?type=large", "display_name": "Sumit Kumar", "link": "https://stackoverflow.com/users/4041955/sumit-kumar"}, "edited": false, "score": 0, "creation_date": 1577544864, "post_id": 47555497, "comment_id": 105195686, "body": "Can we use Anko Async in ViewModel. Or it can only be used in activity or fragment."}], "tags": [], "owner": {"reputation": 1211, "user_id": 5928940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb38bce9f53c4b3c1dd047689715f45?s=128&d=identicon&r=PG&f=1", "display_name": "Suraj Nair", "link": "https://stackoverflow.com/users/5928940/suraj-nair"}, "is_accepted": false, "score": 6, "last_activity_date": 1581884661, "last_edit_date": 1581884661, "creation_date": 1511966816, "answer_id": 47555497, "question_id": 43132080, "link": "https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android/47555497#47555497", "title": "Kotlin Coroutines the right way in Android", "body": "<p>We also have another option. if we use <a href=\"https://github.com/Kotlin/anko\" rel=\"nofollow noreferrer\">Anko</a> library , then it looks like this </p>\n\n<pre><code>doAsync { \n\n    // Call all operation  related to network or other ui blocking operations here.\n    uiThread { \n        // perform all ui related operation here    \n    }\n}\n</code></pre>\n\n<p>Add  dependency for Anko in your app gradle like this. </p>\n\n<pre><code>implementation \"org.jetbrains.anko:anko:0.10.5\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19038, "user_id": 1056263, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/56d515afd6a1001e8264df0d96c7a80e?s=128&d=identicon&r=PG", "display_name": "Dmytro Danylyk", "link": "https://stackoverflow.com/users/1056263/dmytro-danylyk"}, "is_accepted": false, "score": 40, "last_activity_date": 1513768278, "creation_date": 1513768278, "answer_id": 47904679, "question_id": 43132080, "link": "https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android/47904679#47904679", "title": "Kotlin Coroutines the right way in Android", "body": "<p><strong>How to launch a coroutine</strong></p>\n\n<p>In the <code>kotlinx.coroutines</code> library you can start new coroutine using either <code>launch</code> or <code>async</code> function.</p>\n\n<p>Conceptually, <code>async</code> is just like <code>launch</code>. It starts a separate coroutine which is a light-weight thread that works concurrently with all the other coroutines. </p>\n\n<p>The difference is that launch returns a <code>Job</code> and does not carry any resulting value, while <code>async</code> returns a <code>Deferred</code> - a light-weight non-blocking future that represents a promise to provide a result later. You can use <code>.await()</code> on a deferred value to get its eventual result, but <code>Deferred</code> is also a <code>Job</code>, so you can cancel it if needed.</p>\n\n<p><strong>Coroutine context</strong></p>\n\n<p>In Android we usually use two context:</p>\n\n<ul>\n<li><code>uiContext</code> to dispatch execution onto the Android main <code>UI</code> thread <em>(for the parent coroutine)</em>.</li>\n<li><code>bgContext</code> to dispatch execution in background thread <em>(for the child coroutines)</em>.</li>\n</ul>\n\n<p>Example</p>\n\n<pre><code>//dispatches execution onto the Android main UI thread\nprivate val uiContext: CoroutineContext = UI\n\n//represents a common pool of shared threads as the coroutine dispatcher\nprivate val bgContext: CoroutineContext = CommonPool\n</code></pre>\n\n<p>In following example we are going to use <code>CommonPool</code> for <code>bgContext</code> which limit the number of threads running in parallel to the value of <code>Runtime.getRuntime.availableProcessors()-1</code>. So if the coroutine task is scheduled, but all cores are occupied, it will be queued.</p>\n\n<p>You may want to consider using <code>newFixedThreadPoolContext</code> or your own implementation of cached thread pool.</p>\n\n<p><strong>launch + async (execute task)</strong></p>\n\n<pre><code>private fun loadData() = launch(uiContext) {\n    view.showLoading() // ui thread\n\n    val task = async(bgContext) { dataProvider.loadData(\"Task\") }\n    val result = task.await() // non ui thread, suspend until finished\n\n    view.showData(result) // ui thread\n}\n</code></pre>\n\n<p><strong>launch + async + async (execute two tasks sequentially)</strong></p>\n\n<p>Note: task1 and task2 are executed sequentially.</p>\n\n<pre><code>private fun loadData() = launch(uiContext) {\n    view.showLoading() // ui thread\n\n    // non ui thread, suspend until task is finished\n    val result1 = async(bgContext) { dataProvider.loadData(\"Task 1\") }.await()\n\n    // non ui thread, suspend until task is finished\n    val result2 = async(bgContext) { dataProvider.loadData(\"Task 2\") }.await()\n\n    val result = \"$result1 $result2\" // ui thread\n\n    view.showData(result) // ui thread\n}\n</code></pre>\n\n<p><strong>launch + async + async (execute two tasks parallel)</strong></p>\n\n<p>Note: task1 and task2 are executed in parallel.</p>\n\n<pre><code>private fun loadData() = launch(uiContext) {\n    view.showLoading() // ui thread\n\n    val task1 = async(bgContext) { dataProvider.loadData(\"Task 1\") }\n    val task2 = async(bgContext) { dataProvider.loadData(\"Task 2\") }\n\n    val result = \"${task1.await()} ${task2.await()}\" // non ui thread, suspend until finished\n\n    view.showData(result) // ui thread\n}\n</code></pre>\n\n<p><strong>How to cancel a coroutine</strong></p>\n\n<p>The function <code>loadData</code> returns a <code>Job</code> object which may be cancelled. When the parent coroutine is cancelled, all its children are recursively cancelled, too.</p>\n\n<p>If the <code>stopPresenting</code> function was called while <code>dataProvider.loadData</code> was still in progress, the function <code>view.showData</code> will never be called.</p>\n\n<pre><code>var job: Job? = null\n\nfun startPresenting() {\n    job = loadData()\n}\n\nfun stopPresenting() {\n    job?.cancel()\n}\n\nprivate fun loadData() = launch(uiContext) {\n    view.showLoading() // ui thread\n\n    val task = async(bgContext) { dataProvider.loadData(\"Task\") }\n    val result = task.await() // non ui thread, suspend until finished\n\n    view.showData(result) // ui thread\n}\n</code></pre>\n\n<hr>\n\n<p>The complete answer is available in my article <a href=\"https://proandroiddev.com/android-coroutine-recipes-33467a4302e9\" rel=\"noreferrer\">Android Coroutine Recipes</a></p>\n"}, {"comments": [{"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1609640349, "post_id": 48783841, "comment_id": 115885054, "body": "How can I cancel the task like on AsyncTask, with the ability to choose if it&#39;s cancelling the task nicely, or with thread-interruption: <code>https:&#47;&#47;developer.android.com&#47;reference&#47;android&#47;os&#47;AsyncTask&zwnj;&#8203;#cancel(boolean)</code> , and how can I check inside that it was cancelled, to stop doing what it does?"}], "tags": [], "owner": {"reputation": 467, "user_id": 7895689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f49961eade8f1798abc2937af33dc95?s=128&d=identicon&r=PG&f=1", "display_name": "Rocky", "link": "https://stackoverflow.com/users/7895689/rocky"}, "is_accepted": false, "score": 3, "last_activity_date": 1518601088, "creation_date": 1518601088, "answer_id": 48783841, "question_id": 43132080, "link": "https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android/48783841#48783841", "title": "Kotlin Coroutines the right way in Android", "body": "<p>If you want to return some thing from background thread use async</p>\n\n<pre><code>launch(UI) {\n   val result = async(CommonPool) {\n      //do long running operation   \n   }.await()\n   //do stuff on UI thread\n   view.setText(result)\n}\n</code></pre>\n\n<p>If background thread is not returning anything </p>\n\n<pre><code>launch(UI) {\n   launch(CommonPool) {\n      //do long running operation   \n   }.await()\n   //do stuff on UI thread\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 131, "user_id": 2862942, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f21ec70b510a418c73b125ca57cfd98f?s=128&d=identicon&r=PG&f=1", "display_name": "clementiano", "link": "https://stackoverflow.com/users/2862942/clementiano"}, "edited": false, "score": 0, "creation_date": 1560463567, "post_id": 49608946, "comment_id": 99755882, "body": "This has been deprecated, can you help with the working one"}, {"owner": {"reputation": 1333, "user_id": 5890321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08b0ac8116e1de42e5733c6c67c92a2?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Argo", "link": "https://stackoverflow.com/users/5890321/kenneth-argo"}, "edited": false, "score": 0, "creation_date": 1603562908, "post_id": 49608946, "comment_id": 114079426, "body": "See: <a href=\"https://github.com/Kotlin/kotlinx.coroutines\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines</a>  implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.9&quot; implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.9&quot;"}], "tags": [], "owner": {"reputation": 12288, "user_id": 5699956, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f8a27337886706b303e88cf00edb24e?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/5699956/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1522662470, "creation_date": 1522662470, "answer_id": 49608946, "question_id": 43132080, "link": "https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android/49608946#49608946", "title": "Kotlin Coroutines the right way in Android", "body": "<p>All the above answers are right, but I was having a hard time finding the right import for the <code>UI</code> from <code>kotlinx.coroutines</code>, it was conflicting with <code>UI</code> from <code>Anko</code>.\nIts</p>\n\n<pre><code>import kotlinx.coroutines.experimental.android.UI\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25953, "user_id": 6599590, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/qLSDJ.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/6599590/andy"}, "is_accepted": false, "score": 1, "last_activity_date": 1557065502, "last_edit_date": 1557065502, "creation_date": 1557063158, "answer_id": 55992475, "question_id": 43132080, "link": "https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android/55992475#55992475", "title": "Kotlin Coroutines the right way in Android", "body": "<p>Here's the right way to use Kotlin Coroutines. Coroutine scope simply suspends the current coroutine until all child coroutines have finished their execution. This example explicitly shows us how <strong><code>child coroutine</code></strong> works within <strong><code>parent coroutine</code></strong>. </p>\n\n<p>An example with explanations:</p>\n\n<pre><code>fun main() = blockingMethod {                    // coroutine scope         \n\n    launch { \n        delay(2000L)                             // suspends the current coroutine for 2 seconds\n        println(\"Tasks from some blockingMethod\")\n    }\n\n    coroutineScope {                             // creates a new coroutine scope \n\n        launch {\n            delay(3000L)                         // suspends this coroutine for 3 seconds\n            println(\"Task from nested launch\")\n        }\n\n        delay(1000L)\n        println(\"Task from coroutine scope\")     // this line will be printed before nested launch\n    } \n\n    println(\"Coroutine scope is over\")           // but this line isn't printed until nested launch completes\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1189, "user_id": 4723178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f8rtm.jpg?s=128&g=1", "display_name": "Muhammad Maqsood", "link": "https://stackoverflow.com/users/4723178/muhammad-maqsood"}, "is_accepted": false, "score": 0, "last_activity_date": 1592074655, "creation_date": 1592074655, "answer_id": 62364338, "question_id": 43132080, "link": "https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android/62364338#62364338", "title": "Kotlin Coroutines the right way in Android", "body": "<p>Please find attached the implementation for a remote API call with Kotlin Coroutines &amp; Retrofit library.</p>\n\n<pre><code>import android.view.View\nimport android.util.Log\nimport androidx.lifecycle.MutableLiveData\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.viewModelScope\nimport com.test.nyt_most_viewed.NYTApp\nimport com.test.nyt_most_viewed.data.local.PreferenceHelper\nimport com.test.nyt_most_viewed.data.model.NytAPI\nimport com.test.nyt_most_viewed.data.model.response.reviews.ResultsItem\nimport kotlinx.coroutines.*\nimport javax.inject.Inject\n\nclass MoviesReviewViewModel @Inject constructor(\nprivate val nytAPI: NytAPI,\nprivate val nytApp: NYTApp,\nappPreference: PreferenceHelper\n) : ViewModel() {\n\nval moviesReviewsResponse: MutableLiveData&lt;List&lt;ResultsItem&gt;&gt; = MutableLiveData()\n\nval message: MutableLiveData&lt;String&gt; = MutableLiveData()\nval loaderProgressVisibility: MutableLiveData&lt;Int&gt; = MutableLiveData()\n\nval coroutineJobs = mutableListOf&lt;Job&gt;()\n\noverride fun onCleared() {\n    super.onCleared()\n    coroutineJobs.forEach {\n        it.cancel()\n    }\n}\n\n// You will call this method from your activity/Fragment\nfun getMoviesReviewWithCoroutine() {\n\n    viewModelScope.launch(Dispatchers.Main + handler) {\n\n        // Update your UI\n        showLoadingUI()\n\n        val deferredResult = async(Dispatchers.IO) {\n            return@async nytAPI.getMoviesReviewWithCoroutine(\"full-time\")\n        }\n\n        val moviesReviewsResponse = deferredResult.await()\n        this@MoviesReviewViewModel.moviesReviewsResponse.value = moviesReviewsResponse.results\n\n        // Update your UI\n        resetLoadingUI()\n\n    }\n}\n\nval handler = CoroutineExceptionHandler { _, exception -&gt;\n    onMoviesReviewFailure(exception)\n}\n\n/*Handle failure case*/\nprivate fun onMoviesReviewFailure(throwable: Throwable) {\n    resetLoadingUI()\n    Log.d(\"MOVIES-REVIEWS-ERROR\", throwable.toString())\n}\n\nprivate fun showLoadingUI() {\n    setLoaderVisibility(View.VISIBLE)\n    setMessage(STATES.INITIALIZED)\n}\n\nprivate fun resetLoadingUI() {\n    setMessage(STATES.DONE)\n    setLoaderVisibility(View.GONE)\n}\n\nprivate fun setMessage(states: STATES) {\n    message.value = states.name\n}\n\nprivate fun setLoaderVisibility(visibility: Int) {\n    loaderProgressVisibility.value = visibility\n}\n\nenum class STATES {\n\n    INITIALIZED,\n    DONE\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36072, "favorite_count": 28, "accepted_answer_id": 43151714, "answer_count": 9, "score": 47, "last_activity_date": 1592074655, "creation_date": 1490932019, "last_edit_date": 1491014346, "question_id": 43132080, "link": "https://stackoverflow.com/questions/43132080/kotlin-coroutines-the-right-way-in-android", "title": "Kotlin Coroutines the right way in Android", "body": "<p>I'm trying to update a list inside the adapter using async, I can see there is too much boilerplate. </p>\n\n<p>Is it the right way to use Kotlin Coroutines?</p>\n\n<p>can this be optimized more?</p>\n\n<pre><code>fun loadListOfMediaInAsync() = async(CommonPool) {\n        try {\n            //Long running task \n            adapter.listOfMediaItems.addAll(resources.getAllTracks())\n            runOnUiThread {\n                adapter.notifyDataSetChanged()\n                progress.dismiss()\n            }\n        } catch (e: Exception) {\n            e.printStackTrace()\n            runOnUiThread {progress.dismiss()}\n        } catch (o: OutOfMemoryError) {\n            o.printStackTrace()\n            runOnUiThread {progress.dismiss()}\n        }\n    }\n</code></pre>\n"}, {"tags": ["json", "jackson", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "edited": false, "score": 0, "creation_date": 1490933438, "post_id": 43132243, "comment_id": 73342512, "body": "I also just noticed the <code>POSITIONS</code> variable, which OP didn&#39;t call out in the original question. That can probably also be extracted out as a parameter to the function call: <code>getArrayOf&lt;PositionJson&gt;(POSITIONS)</code>"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1490934415, "post_id": 43132243, "comment_id": 73342788, "body": "yes <code>POSITIONS</code> is just a url fragment, it can be easily made into a parameter"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1490949784, "post_id": 43132243, "comment_id": 73349746, "body": "I&#39;ve seem to have run into a snag with this line <code>object: TypeReference&lt;MessageJson&lt;Array&lt;T&gt;&gt;&gt;() {</code> - it produces a type conversion exception (<code>java.lang.Object cannot be cast....</code> ) - if I replace <code>T</code> on this line with, e.g. <code>PositionJson</code> then it works - what should I do? I mean the other <code>T</code>s in the code are ok, only this one is a problem"}, {"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "reply_to_user": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1490965346, "post_id": 43132243, "comment_id": 73359804, "body": "@ycomp What common class do your <code>*Json</code> objects derive from? Alternatively, what class does the compiler complain that it can&#39;t cast to? Let&#39;s say that the class name is <code>JsonBase</code> -- change your generic signature to require that <code>T</code> is a subclass of <code>JsonBase</code>: <code>inline fun &lt;reified T: JsonBase&gt; getArrayOf()</code>"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1490968791, "post_id": 43132243, "comment_id": 73362324, "body": "that&#39;s the thing... they extend only Object/Any (I mean there is nothing specified in the class definition). It complains about casting to Object <code>java.lang.Object cannot be cast....</code> - and I guess this doesn&#39;t matter but they are Kotlin classes - not java classes"}, {"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "reply_to_user": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1490973364, "post_id": 43132243, "comment_id": 73365688, "body": "@ycomp You&#39;re eliding part of the compiler output. What is the rest of it?"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1491004820, "post_id": 43132243, "comment_id": 73379422, "body": "<code>java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [Laccount.(morepackages).PositionJson;</code>and it goes on just to indicate that it happens on the line where I query the property <code>val p=positions</code> . My code was a bit more complicated than that originally, but I added this line just to verify that it actually is from only calling the getter. <code>Position Json</code> is defined as <code>class PositionJson {...various Long, String?, Double? var fields...}</code>"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1491005292, "post_id": 43132243, "comment_id": 73379528, "body": "<a href=\"https://fasterxml.github.io/jackson-core/javadoc/2.0.0/com/fasterxml/jackson/core/type/TypeReference.html\" rel=\"nofollow noreferrer\">TypeReference (Jackson-core 2.0.0 API)</a> is from the Jackson library"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1491005913, "post_id": 43132243, "comment_id": 73379684, "body": "basically the <code>messageJson.data</code> contains an array of <code>Object</code> (when using &lt;T&gt;) but array of <code>PositionJson</code> if I switch that single <code>TypeReference</code> line &lt;T&gt; reference to a &lt;PositionJson&gt;) ... I&#39;m not really good with this more advanced generics stuff, which is why I asked the question - but, my guess is that we want <code>message.data</code> to be an array of &lt;PositionJson&gt; ?"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1491006243, "post_id": 43132243, "comment_id": 73379757, "body": "The exception is thrown on <code>return messageJSon.data</code>"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1491106351, "post_id": 43132243, "comment_id": 73403675, "body": "i&#39;m thinking the answer might lie somewhere <a href=\"https://stackoverflow.com/questions/34716697/how-do-i-deserialize-json-into-a-listsometype-with-kotlin-jackson\">here</a> or <a href=\"https://stackoverflow.com/questions/33368328/how-to-use-jackson-to-deserialize-to-kotlin-collections\">there</a>"}, {"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "reply_to_user": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1491231972, "post_id": 43132243, "comment_id": 73449352, "body": "@ycomp I don&#39;t immediately see what would cause that compile time error and it&#39;s difficult for me to recreate it. You might want to ask in a new question to get more visibility."}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1491232308, "post_id": 43132243, "comment_id": 73449585, "body": "Yes i was thinking to do that, just need to figure out how to phrase it.its runtime error, compiles fine.the problem is with Jackson and kotlin I think."}], "tags": [], "owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "is_accepted": false, "score": 2, "last_activity_date": 1490932969, "creation_date": 1490932969, "answer_id": 43132243, "question_id": 43131803, "link": "https://stackoverflow.com/questions/43131803/can-i-pass-type-information-to-simplify-this-somehow/43132243#43132243", "title": "Can I pass type information to simplify this somehow?", "body": "<p>You can do what you want with generics. However, to use generics we first need to extract that giant block of code into a method:</p>\n\n<pre><code>val positions: Array&lt;PositionJson&gt;? get() = getPositions()\n\nfun getPositions(): Array&lt;PositionJson&gt;? {\n    ...\n}\n</code></pre>\n\n<p>We haven't solved the problem, but now we're in a position to be able to solve it by making <code>getPositions</code> generic (note that I also rename the function):</p>\n\n<pre><code>val positions: Array&lt;PositionJson&gt; get() = getArrayOf&lt;PositionJson&gt;()\n// thanks to type inference I can omit the type on getArrayOf if desired:\nval positions: Array&lt;PositionJson&gt; get() = getArrayOf()\n\nfun &lt;T&gt; getArrayOf(): Array&lt;T&gt;? {\n    val service = constructServiceURL(POSITIONS, null, true)\n    try {\n        val messageJson = mapper.readValue&lt;MessageJson&lt;Array&lt;T&gt;&gt;&gt;(\n                callURL(service),\n                object: TypeReference&lt;MessageJson&lt;Array&lt;T&gt;&gt;&gt;() {\n\n                })\n\n        val error = messageJson.error\n        if (error != null) throw AccountsAPIException(error.errorCode, error.description)\n        return messageJson.data\n    } catch (e: Exception) {\n        throw AccountsAPIException(e)\n    }\n}\n</code></pre>\n\n<p>Perfect! Except this won't compile thanks to type erasure. But we can fix this too by making the function <code>inline</code> and making the type parameter <code>reified</code>:</p>\n\n<pre><code>inline fun &lt;reified T: Any&gt; getArrayOf(): Array&lt;T&gt;? {\n    ...\n}\n</code></pre>\n\n<p>And that should do it. Now you can reuse this function as needed:</p>\n\n<pre><code>val positions: Array&lt;PositionJson&gt;? get() = getArrayOf()\nval persons: Array&lt;PersonJson&gt;? get() = getArrayOf()\nval bananas: Array&lt;BananaJson&gt;? get() = getArrayOf()\n\ninline fun &lt;reified T: Any&gt; getArrayOf(): Array&lt;T&gt;? {\n    val service = constructServiceURL(POSITIONS, null, true)\n    try {\n        val messageJson = mapper.readValue&lt;MessageJson&lt;Array&lt;T&gt;&gt;&gt;(\n                callURL(service),\n                object: TypeReference&lt;MessageJson&lt;Array&lt;T&gt;&gt;&gt;() {\n\n                })\n\n        val error = messageJson.error\n        if (error != null) throw AccountsAPIException(error.errorCode, error.description)\n        return messageJson.data\n    } catch (e: Exception) {\n        throw AccountsAPIException(e)\n    }\n}\n</code></pre>\n\n<p>One last thing: note that in all my examples I used property getters (<code>get() = ...</code>) as in your original code. However, I strongly suspect that you do NOT want to use a getter. Getters will be called every time someone accesses your property, which in this case means that every time someone reads the <code>positions</code> property you'll be calling <code>constructServiceURL</code> and making the service call, etc. If you want that code to only happen once then you should just call <code>getArrayOf()</code> once and assign the result to your property:</p>\n\n<pre><code>val positions: Array&lt;PositionJson&gt;? = getArrayOf()\n// this syntax would also work:\nval positions = getArrayOf&lt;PositionJson&gt;()\n</code></pre>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491107247, "creation_date": 1490930203, "last_edit_date": 1491107247, "question_id": 43131803, "link": "https://stackoverflow.com/questions/43131803/can-i-pass-type-information-to-simplify-this-somehow", "title": "Can I pass type information to simplify this somehow?", "body": "<p>I have a lot of code like this, it is all the same except for the type <code>PositionJson</code>, it could be <code>AnotherJson</code> or <code>FooJson</code> or <code>BarJson</code></p>\n\n<p>Is there some way I can exctract all this code into one function that I can somehow pass into it the type? So that I don't have several of these big blocks of almost identical code littering my class?</p>\n\n<p>I'm not sure if this is possible or not, just thought I'd ask because it would be nice to do... </p>\n\n<pre><code>    /**\n     * @return the _open_ [PositionJson]s\n     */\n    val positions: Array&lt;PositionJson&gt;?\n        @Throws(AccountsAPIException::class)\n        get() {\n            val service = constructServiceURL(POSITIONS, null, true)\n            try {\n                val messageJson = mapper.readValue&lt;MessageJson&lt;Array&lt;PositionJson&gt;&gt;&gt;(\n                        callURL(service),\n                        object: TypeReference&lt;MessageJson&lt;Array&lt;PositionJson&gt;&gt;&gt;() {\n\n                        })\n\n                val error = messageJson.error\n                if (error != null) throw AccountsAPIException(error.errorCode, error.description)\n                return messageJson.data\n            } catch (e: Exception) {\n                throw AccountsAPIException(e)\n            }\n        }\n</code></pre>\n"}, {"tags": ["lambda", "exception-handling", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1490882982, "post_id": 43120148, "comment_id": 73319776, "body": "How can I check the exception type in there?"}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "reply_to_user": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1490883304, "post_id": 43120148, "comment_id": 73320027, "body": "@elect try <code>java.isInstance(e)</code> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#isInstance-java.lang.Object-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/lang/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": true, "score": 4, "last_activity_date": 1490882438, "creation_date": 1490882438, "answer_id": 43120148, "question_id": 43119875, "link": "https://stackoverflow.com/questions/43119875/is-it-possible-to-have-function-extensions-on-lambdas/43120148#43120148", "title": "Is it possible to have function extensions on lambdas?", "body": "<p>There are no problems with declaring extension functions on lambdas.</p>\n\n<pre><code>infix fun (()-&gt;Unit).shallThrow(java: Class&lt;out Throwable&gt;) {\n    // do whatever you need                 ^ you mean this, didn't you?\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>{} shallThrow RuntimeException::class.java\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "is_accepted": false, "score": 3, "last_activity_date": 1490885492, "creation_date": 1490885492, "answer_id": 43121319, "question_id": 43119875, "link": "https://stackoverflow.com/questions/43119875/is-it-possible-to-have-function-extensions-on-lambdas/43121319#43121319", "title": "Is it possible to have function extensions on lambdas?", "body": "<p>Not a straight answer to your question (receiver methods on lambdas), but there's an alternative implementation you could use:</p>\n\n<pre><code>inline fun &lt;reified T: Throwable&gt; assertThrows(fn: (() -&gt; Unit)) {\n    try {\n        fn()\n    } catch (e: Throwable) {\n        if (e is T) {\n            return\n        } else {\n            fail(\"Expected ${T::class} but caught ${e::class}\")\n        }\n    }\n    fail(\"Expected ${T::class} but caught nothing.\")\n}\n</code></pre>\n\n<p>Which you can use as <code>assertThrows&lt;MyException&gt; { doStuff(); }</code></p>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 43120148, "answer_count": 2, "score": 2, "last_activity_date": 1490885492, "creation_date": 1490881832, "question_id": 43119875, "link": "https://stackoverflow.com/questions/43119875/is-it-possible-to-have-function-extensions-on-lambdas", "title": "Is it possible to have function extensions on lambdas?", "body": "<p>I'd like to check if some code throws a determined exception.</p>\n\n<p>In particular, for my case, I'd like to write like:</p>\n\n<p><code>{shaderCodeOf(gl, this::class.java, data + \"$FRAGMENT_FAIL.frag\")} shallThrow GLException::java.class</code></p>\n\n<p>I tried to write </p>\n\n<p><code>infix fun (() -&gt; Unit).shallThrow(java: Class&lt;*&gt;)</code></p>\n\n<p>but I didn't have much success..</p>\n\n<p>any idea, guys?</p>\n"}, {"tags": ["kotlin", "rpc"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 3, "last_activity_date": 1490892844, "creation_date": 1490892844, "answer_id": 43123972, "question_id": 43118892, "link": "https://stackoverflow.com/questions/43118892/how-to-do-typesafe-remote-procedure-call-rpc-in-kotlin/43123972#43123972", "title": "How to do typesafe remote procedure call (RPC) in Kotlin?", "body": "<p>At this time Kotlin provides no functionality for this, but it's on our medium-term roadmap (after 1.2).</p>\n"}], "owner": {"reputation": 3897, "user_id": 1351319, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ce42732ebb48b66719bccc64b1efb5a5?s=128&d=identicon&r=PG&f=1", "display_name": "Yaroslav", "link": "https://stackoverflow.com/users/1351319/yaroslav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 884, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1490892844, "creation_date": 1490879421, "question_id": 43118892, "link": "https://stackoverflow.com/questions/43118892/how-to-do-typesafe-remote-procedure-call-rpc-in-kotlin", "title": "How to do typesafe remote procedure call (RPC) in Kotlin?", "body": "<p>When developing both the frontend and backend in Kotlin it's just weird that we have to bother with rest json apis to connect them.\nIdeal would be the ability to define an interface</p>\n\n<pre><code>interface Api {\n    fun sum(x: Int, y: Int): Int\n}\n</code></pre>\n\n<p>Implement it on the server side.</p>\n\n<p>And on the client side be able to call it as easy as</p>\n\n<pre><code>val api = RPCMagic&lt;Api&gt;\nval result: Future&lt;Int&gt; = api.sum(2, 2)\n</code></pre>\n\n<p>Much like scala <a href=\"https://github.com/lihaoyi/autowire\" rel=\"noreferrer\">autowire</a> library does.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 9, "creation_date": 1498216870, "post_id": 43114367, "comment_id": 76422424, "body": "Neither <code>mutableListOf</code> nor <code>ArrayList</code> are keywords in Kotlin"}], "answers": [{"comments": [{"owner": {"reputation": 4394, "user_id": 534238, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/nZVSf.jpg?s=128&g=1", "display_name": "Mike Williamson", "link": "https://stackoverflow.com/users/534238/mike-williamson"}, "edited": false, "score": 2, "creation_date": 1541697508, "post_id": 43114496, "comment_id": 93313603, "body": "And I would put &quot;convenience&quot; in quotes.  Until MutableList <i>actually</i> has a different implementation, providing a core object that does the same thing as another core object is confusing, and not at all a convenience.  :("}, {"owner": {"reputation": 11526, "user_id": 235671, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/xKXSM.png?s=128&g=1", "display_name": "t3chb0t", "link": "https://stackoverflow.com/users/235671/t3chb0t"}, "reply_to_user": {"reputation": 4394, "user_id": 534238, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/nZVSf.jpg?s=128&g=1", "display_name": "Mike Williamson", "link": "https://stackoverflow.com/users/534238/mike-williamson"}, "edited": false, "score": 1, "creation_date": 1609954773, "post_id": 43114496, "comment_id": 115984319, "body": "@MikeWilliamson since array-list is one of the most confusing things is Java, to me it&#39;s either an array or a list but both? My head explodes. I find the mutable-list is a perfect name for the weirdly named type."}], "tags": [], "owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "is_accepted": false, "score": 8, "last_activity_date": 1490867958, "creation_date": 1490867958, "answer_id": 43114496, "question_id": 43114367, "link": "https://stackoverflow.com/questions/43114367/difference-between-arrayliststring-and-mutablelistofstring-in-kotlin/43114496#43114496", "title": "Difference between ArrayList&lt;String&gt;() and mutableListOf&lt;String&gt;() in Kotlin", "body": "<p>As you can see in <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/collections/Collections.kt#L96\" rel=\"noreferrer\">sources</a>:</p>\n\n<pre><code>public inline fun &lt;T&gt; mutableListOf(): MutableList&lt;T&gt; = ArrayList()\n</code></pre>\n\n<p>So, there is no difference, just a convenience method.</p>\n"}, {"comments": [{"owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "edited": false, "score": 2, "creation_date": 1490868237, "post_id": 43114524, "comment_id": 73308797, "body": "So there is no difference."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "edited": false, "score": 4, "creation_date": 1490868313, "post_id": 43114524, "comment_id": 73308858, "body": "<code>a</code> and <code>b</code> have different declared type - so there&#39;s a difference at compile time."}, {"owner": {"reputation": 5291, "user_id": 5279156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vHs51.jpg?s=128&g=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5279156/vlad"}, "edited": false, "score": 0, "creation_date": 1573966656, "post_id": 43114524, "comment_id": 104059669, "body": "It can be inlined as <code>val b = arrayListOf&lt;String&gt;()</code>"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 27, "last_activity_date": 1578787624, "last_edit_date": 1578787624, "creation_date": 1490868013, "answer_id": 43114524, "question_id": 43114367, "link": "https://stackoverflow.com/questions/43114367/difference-between-arrayliststring-and-mutablelistofstring-in-kotlin/43114524#43114524", "title": "Difference between ArrayList&lt;String&gt;() and mutableListOf&lt;String&gt;() in Kotlin", "body": "<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/mutable-list-of.html\" rel=\"noreferrer\"><code>mutableListOf&lt;T&gt;()</code></a> is an inline function invocation that returns a \n <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/\" rel=\"noreferrer\"><code>MutableList&lt;T&gt;</code></a>. As of today, <code>mutableListOf</code> does return an instance of <code>ArrayList</code>.</p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-array-list/\" rel=\"noreferrer\"><code>ArrayList&lt;String&gt;()</code></a> is a constructor invocation and cannot be inlined.</p>\n\n<p>In other words, given:</p>\n\n<pre><code> val a = mutableListOf&lt;String&gt;()\n val b = ArrayList&lt;String&gt;()\n</code></pre>\n\n<ul>\n<li><code>a</code> is of type <code>MutableList&lt;String&gt;</code></li>\n<li><code>b</code> is of type <code>ArrayList&lt;String&gt;</code></li>\n</ul>\n\n<p>At runtime, both <code>a</code> and <code>b</code> will hold an instance of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-array-list/\" rel=\"noreferrer\"><code>ArrayList</code></a>.</p>\n\n<p>Note that inlining is particularly useful when combined with <a href=\"http://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"noreferrer\">type reification</a>, which justifies the existence of <code>listOf</code>, <code>mutableListOf</code> and the like.</p>\n"}, {"tags": [], "owner": {"reputation": 3397, "user_id": 574826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvb1q.jpg?s=128&g=1", "display_name": "pdpi", "link": "https://stackoverflow.com/users/574826/pdpi"}, "is_accepted": true, "score": 155, "last_activity_date": 1531830698, "last_edit_date": 1531830698, "creation_date": 1490872416, "answer_id": 43116238, "question_id": 43114367, "link": "https://stackoverflow.com/questions/43114367/difference-between-arrayliststring-and-mutablelistofstring-in-kotlin/43116238#43116238", "title": "Difference between ArrayList&lt;String&gt;() and mutableListOf&lt;String&gt;() in Kotlin", "body": "<p>The only difference between the two is communicating your intent.</p>\n\n<p>When you write <code>val a = mutableListOf()</code>, you're saying \"I want a mutable list, and I don't particularly care about the implementation\". When you write, instead, <code>val a = ArrayList()</code>, you're saying \"I specifically want an <code>ArrayList</code>\".</p>\n\n<p>In practice, in the current implementation of Kotlin compiling to the JVM, calling <code>mutableListOf</code> will produce an <code>ArrayList</code>, and there's no difference in behaviour: once the list is built, everything will behave the same.</p>\n\n<p>Now, let's say that a future version of Kotlin changes <code>mutableListOf</code> to return a different type of list.</p>\n\n<p>Likelier than not, the Kotlin team would only make that change if they figure the new implementation works better for most use cases. <code>mutableListOf</code> would then have you using that new list implementation transparently, and you'd get that better behaviour for free. Go with <code>mutableListOf</code> if that sounds like your case.</p>\n\n<p>On the other hand, maybe you spent a bunch of time thinking about your problem, and figured that <code>ArrayList</code> <em>really</em> is the best fit for your problem, and you don't want to risk getting moved to something sub-optimal. Then you probably want to either use <code>ArrayList</code> directly, or use the <code>arrayListOf</code> factory function (an <code>ArrayList</code>-specific analogue to <code>mutableListOf</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14279253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ac91319402348248fcaaa1a55cacce?s=128&d=identicon&r=PG&f=1", "display_name": "user14279253", "link": "https://stackoverflow.com/users/14279253/user14279253"}, "is_accepted": false, "score": 1, "last_activity_date": 1617344749, "creation_date": 1617344749, "answer_id": 66915258, "question_id": 43114367, "link": "https://stackoverflow.com/questions/43114367/difference-between-arrayliststring-and-mutablelistofstring-in-kotlin/66915258#66915258", "title": "Difference between ArrayList&lt;String&gt;() and mutableListOf&lt;String&gt;() in Kotlin", "body": "<p>Under the covers, both mutableListOf() and arrayListOf() create an instance of ArrayList. ArrayList is a class that happens to implement the MutableList interface.</p>\n<p>The only difference is that arrayListOf() returns the ArrayList as an actual ArrayList. mutableListOf() returns a MutableList, so the actual ArrayList is &quot;disguised&quot; as just the parts that are described by the MutableList interface.</p>\n<p>The difference, in practice, is that ArrayList has a few methods that are not part of the MutableList interface (trimToSize and ensureCapacity).</p>\n<p>The difference, philosophically, is that the MutableList only cares about the behaviour of the object being returned. It just returns &quot;something that acts like a MutableList&quot;. The ArrayList cares about the &quot;structure&quot; of the object. It allows you to directly manipulate the memory allocated by the object (trimToSize).</p>\n<p>The rule of thumb is that you should prefer the interface version of things (mutableListOf()) unless you actually have a reason to care about the exact details of the underlying structure.</p>\n<p>Or, in other words, if you don't know which one you want, choose mutableListOf first.</p>\n"}], "owner": {"reputation": 12577, "user_id": 2102794, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/BrKf5.jpg?s=128&g=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/2102794/sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38530, "favorite_count": 13, "accepted_answer_id": 43116238, "answer_count": 4, "score": 115, "last_activity_date": 1617344749, "creation_date": 1490867657, "question_id": 43114367, "link": "https://stackoverflow.com/questions/43114367/difference-between-arrayliststring-and-mutablelistofstring-in-kotlin", "title": "Difference between ArrayList&lt;String&gt;() and mutableListOf&lt;String&gt;() in Kotlin", "body": "<pre><code>private val repositories = mutableListOf&lt;String&gt;()\n\nprivate val repositories = ArrayList&lt;String&gt;()\n</code></pre>\n\n<p>Both are mutable list, then what is the point of two keywords <code>mutableListOf</code> or <code>ArrayList</code>?</p>\n\n<p>or is there any major difference? </p>\n"}, {"tags": ["lambda", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3737, "user_id": 3286569, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/1E9y6.jpg?s=128&g=1", "display_name": "JDurstberger", "link": "https://stackoverflow.com/users/3286569/jdurstberger"}, "edited": false, "score": 0, "creation_date": 1490865643, "post_id": 43113495, "comment_id": 73306851, "body": "I swear, I have read this page in the docs 20 times, but somehow my brain always skipped that part. Thank you!"}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 1, "creation_date": 1490865683, "post_id": 43113495, "comment_id": 73306876, "body": "<i>What&#39;s not clear from the documentation is that the parameter must be a lambda literal.</i> <b>Not really, since it says</b> <i>... is a function, and you&#39;re passing a lambda expression as the corresponding argument,...</i>"}, {"owner": {"reputation": 3737, "user_id": 3286569, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/1E9y6.jpg?s=128&g=1", "display_name": "JDurstberger", "link": "https://stackoverflow.com/users/3286569/jdurstberger"}, "edited": false, "score": 0, "creation_date": 1490865842, "post_id": 43113495, "comment_id": 73306986, "body": "I think this is a good approach, as the expression in <code>{ }</code> looks more natural than just a <code>transform</code> jammed to the end of the call"}, {"owner": {"reputation": 505, "user_id": 7809145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8b4831fc604f6362cc4cc253ccdf4065?s=128&d=identicon&r=PG&f=1", "display_name": "krupal.agile", "link": "https://stackoverflow.com/users/7809145/krupal-agile"}, "edited": false, "score": 7, "creation_date": 1529909390, "post_id": 43113495, "comment_id": 89027885, "body": "What is the reasoning behind this convention?"}, {"owner": {"reputation": 1881, "user_id": 8050896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zaFB3.gif?s=128&g=1", "display_name": "P Fuster", "link": "https://stackoverflow.com/users/8050896/p-fuster"}, "reply_to_user": {"reputation": 505, "user_id": 7809145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8b4831fc604f6362cc4cc253ccdf4065?s=128&d=identicon&r=PG&f=1", "display_name": "krupal.agile", "link": "https://stackoverflow.com/users/7809145/krupal-agile"}, "edited": false, "score": 0, "creation_date": 1537445065, "post_id": 43113495, "comment_id": 91792214, "body": "@krupal.agile random preferences? I do like it though."}, {"owner": {"reputation": 1499, "user_id": 3937903, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/H73KC.jpg?s=128&g=1", "display_name": "oziomajnr", "link": "https://stackoverflow.com/users/3937903/oziomajnr"}, "edited": false, "score": 3, "creation_date": 1538675836, "post_id": 43113495, "comment_id": 92237200, "body": "why does the android studio IDE want you to do it so bad?"}, {"owner": {"reputation": 2460, "user_id": 826946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b05cb424fb4335612425cb31fb3f2a85?s=128&d=identicon&r=PG", "display_name": "Andy Weinstein", "link": "https://stackoverflow.com/users/826946/andy-weinstein"}, "reply_to_user": {"reputation": 505, "user_id": 7809145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8b4831fc604f6362cc4cc253ccdf4065?s=128&d=identicon&r=PG&f=1", "display_name": "krupal.agile", "link": "https://stackoverflow.com/users/7809145/krupal-agile"}, "edited": false, "score": 0, "creation_date": 1578400113, "post_id": 43113495, "comment_id": 105418833, "body": "@krupal.agile I agree that it&#39;s a little weird, but seemingly it&#39;s a common coding practice to put a lambda as the last argument (either for a callback or a utility function used by the called function) and it really does make the code look cleaner without those }) instances, and in case of callbacks it captures the intended code flow well (in its own way)."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 27, "last_activity_date": 1490865771, "last_edit_date": 1490865771, "creation_date": 1490865492, "answer_id": 43113495, "question_id": 43113430, "link": "https://stackoverflow.com/questions/43113430/how-is-putting-the-lambda-expression-after-the-parameters-on-a-mapto-call-legal/43113495#43113495", "title": "How is putting the lambda expression after the parameters on a mapTo call legal syntax?", "body": "<p>As stated in <a href=\"http://kotlinlang.org/docs/reference/lambdas.html#higher-order-functions\" rel=\"noreferrer\">the documentation</a>: </p>\n\n<blockquote>\n  <p>In Kotlin, there is a convention that if the last parameter to a\n  function is a function, and you're passing <strong>a lambda expression</strong> as the\n  corresponding argument, you can specify it outside of parentheses:</p>\n\n<pre><code>lock (lock) {\n    sharedResource.operation()\n}\n</code></pre>\n  \n  <p>Another example of a higher-order function would be map():</p>\n\n<pre><code>fun &lt;T, R&gt; List&lt;T&gt;.map(transform: (T) -&gt; R): List&lt;R&gt; {\n    val result = arrayListOf&lt;R&gt;()\n    for (item in this)\n        result.add(transform(item))\n    return result\n}\n</code></pre>\n  \n  <p>This function can be called as follows:</p>\n\n<pre><code>val doubled = ints.map { it -&gt; it * 2 }\n</code></pre>\n  \n  <p>Note that the parentheses in a call can be omitted entirely if the\n  lambda is the only argument to that call.</p>\n</blockquote>\n\n<p>The documentation states clearly that for the above to work the last argument must be lambda expression and not a variable of matching type.</p>\n"}], "owner": {"reputation": 3737, "user_id": 3286569, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/1E9y6.jpg?s=128&g=1", "display_name": "JDurstberger", "link": "https://stackoverflow.com/users/3286569/jdurstberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4709, "favorite_count": 4, "accepted_answer_id": 43113495, "answer_count": 1, "score": 21, "last_activity_date": 1490865771, "creation_date": 1490865342, "question_id": 43113430, "link": "https://stackoverflow.com/questions/43113430/how-is-putting-the-lambda-expression-after-the-parameters-on-a-mapto-call-legal", "title": "How is putting the lambda expression after the parameters on a mapTo call legal syntax?", "body": "<p>I found a piece of code I do not understand. </p>\n\n<p>I am transforming a <code>JSONArray</code> into a <code>List</code>.<br>\nKotlin provides the function <code>mapTo</code> in it's <code>stdlib</code>(<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map-to.html\" rel=\"noreferrer\">link</a>)</p>\n\n<blockquote>\n  <p><strong>mapTo</strong></p>\n\n<pre><code>inline fun &lt;T, R, C : MutableCollection&lt;in R&gt;&gt; Iterable&lt;T&gt;.mapTo(\n    destination: C, \n    transform: (T) -&gt; R\n): C (source)\n</code></pre>\n  \n  <p>Applies the given transform function to each element of the original collection and appends the results to the given destination.</p>\n</blockquote>\n\n<p>This functions has 2 parameters and can be used like this (as expected):</p>\n\n<pre><code>(0..jsonArray.length() - 1).mapTo(targetList, {it -&gt; jsonArray[it].toString()})\n</code></pre>\n\n<p>But apparently this is also valid syntax (not expected):</p>\n\n<pre><code>(0..jsonArray.length()-1).mapTo(targetList) {it -&gt; jsonArray[it].toString()}\n</code></pre>\n\n<p>As you can see, the function parameters end after <code>outputList</code> and the lambda expression is just put at the end of the function call.</p>\n\n<hr>\n\n<p>Furthermore this is legal (as expected):</p>\n\n<pre><code>val transformation = {it : Int -&gt; jsonArray[it].toString()}\n(0..jsonArray.length()-1).mapTo(targetList, transformation)\n</code></pre>\n\n<p>but this is not (???):</p>\n\n<pre><code>val transformation = {it : Int -&gt; jsonArray[it].toString()}\n(0..jsonArray.length()-1).mapTo(targetList) transformation\n</code></pre>\n"}, {"tags": ["android", "android-recyclerview", "android-animation", "kotlin", "facebook-messenger"], "comments": [{"owner": {"reputation": 23840, "user_id": 2738565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITCwF.jpg?s=128&g=1", "display_name": "Haresh Chhelana", "link": "https://stackoverflow.com/users/2738565/haresh-chhelana"}, "edited": false, "score": 0, "creation_date": 1490863580, "post_id": 43112739, "comment_id": 73305441, "body": "Can you please post code for visible and gone ?"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "reply_to_user": {"reputation": 23840, "user_id": 2738565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITCwF.jpg?s=128&g=1", "display_name": "Haresh Chhelana", "link": "https://stackoverflow.com/users/2738565/haresh-chhelana"}, "edited": false, "score": 0, "creation_date": 1490863621, "post_id": 43112739, "comment_id": 73305465, "body": "It&#39;s just calling method setVisibility(GONE) or VISIBLE"}, {"owner": {"reputation": 23840, "user_id": 2738565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITCwF.jpg?s=128&g=1", "display_name": "Haresh Chhelana", "link": "https://stackoverflow.com/users/2738565/haresh-chhelana"}, "edited": false, "score": 0, "creation_date": 1490863697, "post_id": 43112739, "comment_id": 73305520, "body": "Yes but need code to check how you handle it for each item in adapter."}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "reply_to_user": {"reputation": 23840, "user_id": 2738565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITCwF.jpg?s=128&g=1", "display_name": "Haresh Chhelana", "link": "https://stackoverflow.com/users/2738565/haresh-chhelana"}, "edited": false, "score": 0, "creation_date": 1490863704, "post_id": 43112739, "comment_id": 73305524, "body": "view.setVisibility(view.getVisibility() == View.VISIBLE ? GONE : VISIBLE)"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "reply_to_user": {"reputation": 23840, "user_id": 2738565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITCwF.jpg?s=128&g=1", "display_name": "Haresh Chhelana", "link": "https://stackoverflow.com/users/2738565/haresh-chhelana"}, "edited": false, "score": 0, "creation_date": 1490863764, "post_id": 43112739, "comment_id": 73305570, "body": "My list item is custom view and click listener is inside"}, {"owner": {"reputation": 2635, "user_id": 2917564, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2cd0716a73616056c16134893f51a635?s=128&d=identicon&r=PG", "display_name": "jobbert", "link": "https://stackoverflow.com/users/2917564/jobbert"}, "reply_to_user": {"reputation": 23840, "user_id": 2738565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITCwF.jpg?s=128&g=1", "display_name": "Haresh Chhelana", "link": "https://stackoverflow.com/users/2738565/haresh-chhelana"}, "edited": false, "score": 2, "creation_date": 1490863870, "post_id": 43112739, "comment_id": 73305648, "body": "Please post more code as @Haresh Chhedelana mentioned, I&#39;ve had the same issue but it had to do with the RecyclerView."}, {"owner": {"reputation": 23840, "user_id": 2738565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITCwF.jpg?s=128&g=1", "display_name": "Haresh Chhelana", "link": "https://stackoverflow.com/users/2738565/haresh-chhelana"}, "edited": false, "score": 0, "creation_date": 1490864360, "post_id": 43112739, "comment_id": 73305969, "body": "@JemoMgebrishvili Have you develop this on native ?"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1490864437, "post_id": 43112739, "comment_id": 73306006, "body": "Used language is Kotlin"}, {"owner": {"reputation": 23840, "user_id": 2738565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITCwF.jpg?s=128&g=1", "display_name": "Haresh Chhelana", "link": "https://stackoverflow.com/users/2738565/haresh-chhelana"}, "edited": false, "score": 0, "creation_date": 1490864479, "post_id": 43112739, "comment_id": 73306034, "body": "@JemoMgebrishvili Okay is there any reason to use RelativeLayout as parent?"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1490864660, "post_id": 43112739, "comment_id": 73306172, "body": "yes I need message_wrapper_layout_id to be changed its alignment programatically"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1490864714, "post_id": 43112739, "comment_id": 73306217, "body": "But if the problem is inside RelativeLayout I can ignore that alignment"}, {"owner": {"reputation": 23840, "user_id": 2738565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITCwF.jpg?s=128&g=1", "display_name": "Haresh Chhelana", "link": "https://stackoverflow.com/users/2738565/haresh-chhelana"}, "edited": false, "score": 0, "creation_date": 1490864755, "post_id": 43112739, "comment_id": 73306245, "body": "I think LinearLayout is okay for your current requirement as currently you have provide gone view ref to message_wrapper_layout_id."}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "reply_to_user": {"reputation": 23840, "user_id": 2738565, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ITCwF.jpg?s=128&g=1", "display_name": "Haresh Chhelana", "link": "https://stackoverflow.com/users/2738565/haresh-chhelana"}, "edited": false, "score": 0, "creation_date": 1490864866, "post_id": 43112739, "comment_id": 73306316, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/139474/discussion-between-jemo-mgebrishvili-and-haresh-chhelana\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1490898341, "creation_date": 1490898341, "answer_id": 43125668, "question_id": 43112739, "link": "https://stackoverflow.com/questions/43112739/facebook-messenger-chat-item-animation-on-click/43125668#43125668", "title": "Facebook messenger chat item animation on click", "body": "<p>Remove the animateLayoutChanges from your layout and then use the TransitionManager from the support library:</p>\n\n<pre><code>fun setUPViewModelData(message: MessageModel) {\n     itemView?.setOnClickListener {\n         TransitionManager.beginDelayedTransition(recyclerView)\n         dateTextView.visibility = if (dateTextView.visibility == View.VISIBLE) View.GONE else View.VISIBLE\n         delivered_status_txt_id.visibility = dateTextView.visibility\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 932, "favorite_count": 1, "accepted_answer_id": 43125668, "answer_count": 1, "score": 2, "last_activity_date": 1490898341, "creation_date": 1490863466, "last_edit_date": 1490880355, "question_id": 43112739, "link": "https://stackoverflow.com/questions/43112739/facebook-messenger-chat-item-animation-on-click", "title": "Facebook messenger chat item animation on click", "body": "<p>I'm trying to make my list item to be animated after onClick(),Like Facebook messenger. I tried to do this with <strong>animateLayoutChanges=true</strong> in my list item layout and also my recyclerView's parent layout, but it is not smooth and have some problem, after first click when I want to show hidden fields (<strong>setVisibility(VISIBLE</strong>)) , it works not bad, but setVisibility(GONE) works not properly, this is what it looks like<br>\n<a href=\"https://i.stack.imgur.com/Xorgp.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xorgp.gif\" alt=\"enter image description here\"></a></p>\n\n<p><strong>And what I'm trying to achieve is this</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/EUdyV.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EUdyV.gif\" alt=\"enter image description here\"></a></p>\n\n<p>Any advice how to do that?\nthis is My custom view</p>\n\n<pre><code>class MessageItemView : RelativeLayout {\n\n  constructor(context: Context) : super(context)\n  constructor(context: Context, attributeSet: AttributeSet) : super(context, attributeSet)\n\n  private var messageTextView: TextView\n  private var dateTextView: TextView\n  private var itemView: View? = null\n  init {\n      itemView =  LayoutInflater.from(context)?.inflate(R.layout.live_chat_list_item, this)\n      messageTextView = itemView?.findViewById(R.id.live_chat_msg_text_id) as TextView\n      dateTextView = itemView?.findViewById(R.id.message_received_date_txt_id) as TextView\n  }\n\n fun setUPViewModelData(message: MessageModel) {\n     itemView?.setOnClickListener {\n         dateTextView.visibility = if (dateTextView.visibility == View.VISIBLE) View.GONE else View.VISIBLE\n         delivered_status_txt_id.visibility = dateTextView.visibility\n  }\n}\n</code></pre>\n\n<p>And this is xml of this view</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:animateLayoutChanges=\"true\"\n    android:orientation=\"vertical\"&gt;\n\n&lt;TextView\n    android:id=\"@+id/message_received_date_txt_id\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_centerHorizontal=\"true\"\n    android:visibility=\"gone\" /&gt;\n\n&lt;LinearLayout\n    android:id=\"@+id/message_wrapper_layout_id\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_below=\"@id/message_received_date_txt_id\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/live_chat_msg_text_id\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"/&gt;\n\n&lt;/LinearLayout&gt;\n\n&lt;TextView\n    android:id=\"@+id/delivered_status_txt_id\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_below=\"@id/message_wrapper_layout_id\"\n    android:visibility=\"gone\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>I don't understand what's wrong in my layout hierarchy or what would be good architecture and also interested in Fb's messenger chat item layout hierarchy... Any eideas?</p>\n"}]