[{"tags": ["android", "firebase", "kotlin", "firebase-storage"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1552521217, "post_id": 55152867, "comment_id": 97046073, "body": "FYI you can format code by selecting the entire text of it and using the {} button to automatically indent the whole thing."}, {"owner": {"reputation": 843, "user_id": 2693053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/79eb869b3455a36965ee7b1a55ef2692?s=128&d=identicon&r=PG&f=1", "display_name": "Niellles", "link": "https://stackoverflow.com/users/2693053/niellles"}, "edited": false, "score": 0, "creation_date": 1552521951, "post_id": 55152867, "comment_id": 97046260, "body": "What is the expected behaviour/the thing that you&#39;d like to achieve? How are the results that you&#39;re getting different from the goal?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1552551347, "post_id": 55152867, "comment_id": 97054632, "body": "What is happening when you get to the Firebase section? Please responde with @"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 11151858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1752458748184544/picture?type=large", "display_name": "Ruchit Patel", "link": "https://stackoverflow.com/users/11151858/ruchit-patel"}, "edited": false, "score": 0, "creation_date": 1552540078, "post_id": 55155315, "comment_id": 97050362, "body": "@Sheraj please mark my answer as correct if it helped"}], "tags": [], "owner": {"reputation": 49, "user_id": 11151858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1752458748184544/picture?type=large", "display_name": "Ruchit Patel", "link": "https://stackoverflow.com/users/11151858/ruchit-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1552540026, "creation_date": 1552540026, "answer_id": 55155315, "question_id": 55152867, "link": "https://stackoverflow.com/questions/55152867/how-to-upload-image-to-firebase-using-kotlin/55155315#55155315", "title": "How to upload image to Firebase using kotlin", "body": "<p>Try using this code for example to refer :</p>\n\n<pre><code>private fun getFileExtension(uri: Uri?): String? {\n        val cR = activity!!.contentResolver\n        val mime = MimeTypeMap.getSingleton()\n        return mime.getExtensionFromMimeType(cR.getType(uri!!))\n    }\n\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n        if (requestCode == PICK_IMAGE &amp;&amp; resultCode == Activity.RESULT_OK) {\n            val selectedfile = data!!.data //The uri with the location of the file\n            val fname = getFileName(selectedfile)\n            val file = FileUtils.getFile(activity, selectedfile)\n\n            val storage = FirebaseStorage.getInstance()\n            val storageRef = storage.reference\n            val progressDialog = ProgressDialog(getContext())\n            progressDialog.setTitle(\"Uploading\")\n            progressDialog.show()\n            val fileReference = mStorageRef!!.child(System.currentTimeMillis().toString()\n                    + \".\" + getFileExtension(selectedfile))\n\n            var bitmap: Bitmap? = null\n            try {\n                bitmap = MediaStore.Images.Media.getBitmap(activity!!.contentResolver, selectedfile)\n            } catch (e: IOException) {\n                e.printStackTrace()\n            }\n\n            val baos = ByteArrayOutputStream()\n            bitmap!!.compress(Bitmap.CompressFormat.JPEG, 20, baos)\n            val dat = baos.toByteArray()\n            val uploadTask = fileReference.putBytes(dat)\n\n            uploadTask.addOnFailureListener { exception -&gt; Log.i(\"whatTheFuck:\", exception.toString()) }.addOnSuccessListener {\n                // taskSnapshot.getMetadata() contains file metadata such as size, content-type, and download URL.\n                progressDialog.dismiss()\n                Toasty.success(getContext()!!, \"Image Uploaded\", Toast.LENGTH_LONG, true).show()\n                uploadTask.continueWithTask { task -&gt;\n                    if (!task.isSuccessful) {\n                    }\n\n                    fileReference.downloadUrl\n                }.addOnCompleteListener { task -&gt;\n                    if (task.isSuccessful) {\n                        val downloadUri = task.result\n\n                        //DatabaseReference ref = FirebaseDatabase.getInstance().getReference().child(\"users\").child(mAu.getInstance().getCurrentUser().getUid());\n                        val url = downloadUri!!.toString()\n                        Log.i(\"seeThisUri\", downloadUri.toString())// This is the one you should store\n                        db!!.collection(s!!).document(docname!!)\n                                .update(\n                                        \"imageurl\", url\n                                )\n\n                        //   Upload upload = new Upload(editTextName.getText().toString().trim(),\n\n                        // Toast.makeText(getContext(),url,Toast.LENGTH_LONG).show();\n                        //  String uploadId = ref.push().getKey();\n                        //ref.child(uploadId).setValue(upload);\n\n\n                    } else {\n                        Toasty.info(getContext()!!, \"Image Not Selected\", Toast.LENGTH_LONG, true).show()\n                    }\n                }\n            }.addOnProgressListener { taskSnapshot -&gt;\n                val progress = 100.0 * taskSnapshot.bytesTransferred / taskSnapshot.totalByteCount\n                progressDialog.setMessage(\"Uploaded \" + progress.toInt() + \"%...\")\n            }\n\n\n        } else if (requestCode == REQUEST_CAMERA &amp;&amp; resultCode == Activity.RESULT_OK) {\n            val extras = data!!.extras\n            val selectedfile = extras!!.get(\"data\") as Bitmap\n            val imageuri = getImageUri(activity!!, selectedfile)\n            val fname = getFileName(imageuri)\n            val file = FileUtils.getFile(activity, imageuri)\n            val storage = FirebaseStorage.getInstance()\n            val storageRef = storage.reference\n            val progressDialog = ProgressDialog(getContext())\n            progressDialog.setTitle(\"Uploading\")\n            progressDialog.show()\n            val fileReference = mStorageRef!!.child(System.currentTimeMillis().toString()\n                    + \".\" + getFileExtension(imageuri))\n\n            var bitmap: Bitmap? = null\n            try {\n                bitmap = MediaStore.Images.Media.getBitmap(activity!!.contentResolver, imageuri)\n            } catch (e: IOException) {\n                e.printStackTrace()\n            }\n\n            val baos = ByteArrayOutputStream()\n            bitmap!!.compress(Bitmap.CompressFormat.JPEG, 20, baos)\n            val dat = baos.toByteArray()\n            val uploadTask = fileReference.putBytes(dat)\n\n            uploadTask.addOnFailureListener { exception -&gt; Log.i(\"whatTheFuck:\", exception.toString()) }.addOnSuccessListener {\n                // taskSnapshot.getMetadata() contains file metadata such as size, content-type, and download URL.\n                progressDialog.dismiss()\n                Toasty.success(getContext()!!, \"Image Uploaded\", Toast.LENGTH_LONG, true).show()\n                uploadTask.continueWithTask { task -&gt;\n                    if (!task.isSuccessful) {\n                    }\n\n                    fileReference.downloadUrl\n                }.addOnCompleteListener { task -&gt;\n                    if (task.isSuccessful) {\n                        val downloadUri = task.result\n\n                        //DatabaseReference ref = FirebaseDatabase.getInstance().getReference().child(\"users\").child(mAu.getInstance().getCurrentUser().getUid());\n                        val url = downloadUri!!.toString()\n                        Log.i(\"seeThisUri\", downloadUri.toString())// This is the one you should store\n                        db!!.collection(s!!).document(docname!!)\n                                .update(\n                                        \"imageurl\", url\n                                )\n\n                        //   Upload upload = new Upload(editTextName.getText().toString().trim(),\n\n                        // Toast.makeText(getContext(),url,Toast.LENGTH_LONG).show();\n                        //  String uploadId = ref.push().getKey();\n                        //ref.child(uploadId).setValue(upload);\n\n\n                    } else {\n                        Toasty.info(getContext()!!, \"Image Not Selected\", Toast.LENGTH_LONG, true).show()\n                    }\n                }\n            }.addOnProgressListener { taskSnapshot -&gt;\n                val progress = 100.0 * taskSnapshot.bytesTransferred / taskSnapshot.totalByteCount\n                progressDialog.setMessage(\"Uploaded \" + progress.toInt() + \"%...\")\n            }\n\n\n        }\n    }\n\n    private fun getImageUri(context: Context, inImage: Bitmap): Uri {\n        val bytes = ByteArrayOutputStream()\n        inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes)\n        val path = MediaStore.Images.Media.insertImage(context.contentResolver, inImage, \"Title\", null)\n        return Uri.parse(path)\n    }\n\n    fun getFileName(uri: Uri?): String {\n        var result: String? = null\n        if (uri!!.scheme == \"content\") {\n            val cursor = activity!!.contentResolver.query(uri, null, null, null, null)\n            try {\n                if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n                    result = cursor.getString(cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME))\n                }\n            } finally {\n                cursor!!.close()\n            }\n        }\n        if (result == null) {\n            result = uri.path\n            val cut = result!!.lastIndexOf('/')\n            if (cut != -1) {\n                result = result.substring(cut + 1)\n            }\n        }\n        return result\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 10591056, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bNmO7Mmw9aM/AAAAAAAAAAI/AAAAAAAAAAo/PitACaeoM2Y/photo.jpg?sz=128", "display_name": "Ali Shahzil", "link": "https://stackoverflow.com/users/10591056/ali-shahzil"}, "is_accepted": false, "score": 0, "last_activity_date": 1568538013, "creation_date": 1568538013, "answer_id": 57942613, "question_id": 55152867, "link": "https://stackoverflow.com/questions/55152867/how-to-upload-image-to-firebase-using-kotlin/57942613#57942613", "title": "How to upload image to Firebase using kotlin", "body": "<p>To get image URi first create a gobal vairable for uri such as \" var selectedphotouri:Uri?=null\" and then write this under the on fun onActivityResult as show below in my code \"  selectedphotouri=data.data\" and in uploadimageto firebase write below code</p>\n\n<pre><code>var selectedphotouri:Uri?=null // Golobal variable\n selectedphotouri=data.data   // write this in fun onActivityResult\n  // write this in uploadimagefirebase function\n   ref.putFile(selectimageuri!!).addOnCanceledListener {\n         Log.d(\"main\",\"Your photo is uploaded successfully\")\n         Toast.makeText(this,\"upload image to firebase\",Toast.LENGTH_LONG).show()\n\n     }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8338411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a823786f9d6f2ba66443e7e708b66fde?s=128&d=identicon&r=PG&f=1", "display_name": "Paulous ", "link": "https://stackoverflow.com/users/8338411/paulous"}, "is_accepted": false, "score": 0, "last_activity_date": 1612641709, "creation_date": 1612641709, "answer_id": 66081351, "question_id": 55152867, "link": "https://stackoverflow.com/questions/55152867/how-to-upload-image-to-firebase-using-kotlin/66081351#66081351", "title": "How to upload image to Firebase using kotlin", "body": "<p>This worked for me.</p>\n<pre><code>  private fun addToStorage(){\n    // get current user\n    val user = auth.currentUser?.uid\n    val ref = storage.reference.child(user.toString()).child(uri.lastPathSegment.toString())\n\n    val uploadTask = ref.putFile(uri)\n    val urlTask = uploadTask.continueWithTask { task -&gt;\n        if (!task.isSuccessful) {\n            task.exception?.let {\n                throw it\n            }\n        }\n        ref.downloadUrl\n    }.addOnCompleteListener { task -&gt;\n        if (task.isSuccessful) {\n            val downloadUri = task.result\n            Log.d(TAG, downloadUri.toString())\n            // assign the link to companion object\n            DOWNLOAD = downloadUri.toString()\n            // load the firestore adding method\n            addToFireStore()\n        } else {\n            // Handle failures\n            // ...\n        }\n    }\n\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10924759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FolOZnBB1XM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY5hbQRnImKyTJKBlra4d8_8YBXrQ/mo/photo.jpg?sz=128", "display_name": "Sheraj", "link": "https://stackoverflow.com/users/10924759/sheraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3719, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1612641709, "creation_date": 1552521154, "last_edit_date": 1552521184, "question_id": 55152867, "link": "https://stackoverflow.com/questions/55152867/how-to-upload-image-to-firebase-using-kotlin", "title": "How to upload image to Firebase using kotlin", "body": "<p>This is what I have to far. I'm confused about getting instance and getting a reference for my picture in the URI format.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>class MainActivity : AppCompatActivity(), View.OnClickListener {\n\n    private val CAMERA_REQUEST_CODE = 12345\n    private val REQUEST_GALLERY_CAMERA = 54654\n    companion object {\n        val TAG = \"RegisterActivity\"\n    }\n    val storage = FirebaseStorage.getInstance()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        scnbtn.setOnClickListener(this)\n    }\n\n\n    override fun onClick(v: View?) {\n        when (v) {\n            scnbtn -&gt; {\n                if (Build.VERSION.SDK_INT &gt;= 23) {\n                    if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED || ContextCompat.checkSelfPermission(this, android.Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\n                        ActivityCompat.requestPermissions(\n                            this,\n                            arrayOf(android.Manifest.permission.CAMERA, android.Manifest.permission.WRITE_EXTERNAL_STORAGE), REQUEST_GALLERY_CAMERA)\n                    } else {\n                        openCamera()\n                    }\n                } else {\n                    openCamera()\n                }\n            }\n        }\n    }\n\n    private fun openCamera() {\n        val intent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n        if (intent.resolveActivity(packageManager) != null)\n            startActivityForResult(intent, CAMERA_REQUEST_CODE)\n    }\n\n    override fun onRequestPermissionsResult(requestCode: Int, permissions: Array&lt;String&gt;, grantResults: IntArray) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults)\n        if (requestCode == REQUEST_GALLERY_CAMERA) {\n            if (grantResults[0] == PackageManager.PERMISSION_GRANTED &amp;&amp; grantResults[1] == PackageManager.PERMISSION_GRANTED) {\n                openCamera()\n                Log.d(TAG, \"Button Pressed\")\n            } else {\n                Toast.makeText(this@MainActivity, \"Fail\", Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n\n    var selectedPhotoUri: Uri? = null\n\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n        if (resultCode == Activity.RESULT_OK) {\n            when (requestCode) {\n                CAMERA_REQUEST_CODE -&gt; {\n\n                    val extras = data?.getExtras()\n                    val imageBitmap = extras?.get(\"data\") as Bitmap\n                    imagecap.setImageBitmap(imageBitmap)\n                    val bytes = baos.toByteArray()\n\n                    //FIREBASE\n\n\n\n                    uploadImageToFirebaseStorage()\n\n                    }\n\n                }\n            }\n        }\n\n    private fun uploadImageToFirebaseStorage() {\n\n        if (imagecap == null) return\n\n        val filename = \"images/\" + UUID.randomUUID().toString()\n        val ref = storage.getReference(filename)\n\n        ref.putFile(imagecap!!)\n            .addOnSuccessListener {\n                Log.d(TAG, \"Successfully uploaded image: ${it.metadata?.path}\")\n\n                ref.downloadUrl.addOnSuccessListener {\n                    Log.d(TAG, \"File Location: $it\")\n\n                }\n            }\n            .addOnFailureListener {\n                 Log.d(TAG, \"Failed to upload image to storage: ${it.message}\")\n            }\n    }\n\n}\n</code></pre>\n\n<p>Code works fine until it gets to firebase section. I cannot get the uploading to work. How does it know where the firebase storage is??</p>\n"}, {"tags": ["kotlin", "range"], "comments": [{"owner": {"reputation": 627, "user_id": 8422138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/637153fad19c67e37fc28c1cb797bc0b?s=128&d=identicon&r=PG", "display_name": "Eddiel Lopez", "link": "https://stackoverflow.com/users/8422138/eddiel-lopez"}, "edited": false, "score": 0, "creation_date": 1552524347, "post_id": 55152683, "comment_id": 97046845, "body": "You don&#39;t need the map if already have the array of colors, just shuffle them: <code>kotlin val shuffledColorsList = arrayOf(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;yellow&quot;, &quot;purple&quot;, &quot;orange&quot;,         &quot;white&quot;, &quot;black&quot;)         .toList()         .shuffled() </code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11199830, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7ZcfpFhrYDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6nbnYPwwPkZv2gN-vYqsDunFsbQ/mo/photo.jpg?sz=128", "display_name": "Joe Spencer", "link": "https://stackoverflow.com/users/11199830/joe-spencer"}, "edited": false, "score": 0, "creation_date": 1552526719, "post_id": 55153399, "comment_id": 97047453, "body": "I am required to use range and mapping, I know it&#39;s not the most effective."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 3, "user_id": 11199830, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7ZcfpFhrYDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6nbnYPwwPkZv2gN-vYqsDunFsbQ/mo/photo.jpg?sz=128", "display_name": "Joe Spencer", "link": "https://stackoverflow.com/users/11199830/joe-spencer"}, "edited": false, "score": 0, "creation_date": 1552526833, "post_id": 55153399, "comment_id": 97047480, "body": "I&#39;m curious, where does this constraint come from? Is it a homework or assignment of some sort?"}, {"owner": {"reputation": 3, "user_id": 11199830, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7ZcfpFhrYDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6nbnYPwwPkZv2gN-vYqsDunFsbQ/mo/photo.jpg?sz=128", "display_name": "Joe Spencer", "link": "https://stackoverflow.com/users/11199830/joe-spencer"}, "edited": false, "score": 0, "creation_date": 1552527196, "post_id": 55153399, "comment_id": 97047573, "body": "You got me, indeed it is a homework assignment, I&#39;ve done some previous tasks with ranging and mapping I just can&#39;t get this to work like I want it to"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 3, "user_id": 11199830, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7ZcfpFhrYDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6nbnYPwwPkZv2gN-vYqsDunFsbQ/mo/photo.jpg?sz=128", "display_name": "Joe Spencer", "link": "https://stackoverflow.com/users/11199830/joe-spencer"}, "edited": false, "score": 0, "creation_date": 1552527516, "post_id": 55153399, "comment_id": 97047641, "body": "For future reference please read the StackOverflow community policy about asking homework questions here: <a href=\"https://meta.stackoverflow.com/a/334823\">meta.stackoverflow.com/a/334823</a>"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 0, "last_activity_date": 1552527208, "last_edit_date": 1552527208, "creation_date": 1552525279, "answer_id": 55153399, "question_id": 55152683, "link": "https://stackoverflow.com/questions/55152683/kotlin-using-map-and-reduce-generate-a-random-list-of-colours/55153399#55153399", "title": "Kotlin: Using map and reduce, generate a random list of colours", "body": "<p>Instead of the 'range + map' approach you can use the function <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list.html\" rel=\"nofollow noreferrer\"><code>List</code></a> that takes the number of elements in list and the element initializer function:</p>\n\n<pre><code>val c = arrayOf(\"red\", \"blue\", \"green\", \"yellow\", \"purple\", \"orange\",\n\"white\", \"black\")\n\n// create a list of 50 elements initializing each to a random element of 'c' array \nval random50 = List(50) { c.random() }\n\n// print results\nrandom50.forEach { println(it) }\n</code></pre>\n\n<p>If you still prefer range and map, the equivalent would be to create a range of 50 elements, e.g. <code>1..50</code> and then call <code>map</code> on that range:</p>\n\n<pre><code>(1..50).map { c.random() }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11199830, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7ZcfpFhrYDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6nbnYPwwPkZv2gN-vYqsDunFsbQ/mo/photo.jpg?sz=128", "display_name": "Joe Spencer", "link": "https://stackoverflow.com/users/11199830/joe-spencer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 55153399, "answer_count": 1, "score": 0, "last_activity_date": 1552527208, "creation_date": 1552519754, "question_id": 55152683, "link": "https://stackoverflow.com/questions/55152683/kotlin-using-map-and-reduce-generate-a-random-list-of-colours", "title": "Kotlin: Using map and reduce, generate a random list of colours", "body": "<p>I've been given</p>\n\n<pre><code>val c = arrayOf(\"red\", \"blue\", \"green\", \"yellow\", \"purple\", \"orange\",\n\"white\", \"black\")\n</code></pre>\n\n<p>and need to generate and print a list of 50 random colours, using range and map. \nAnd I want to use map to translate numbers to the colours and print the result.\nCould I get some help on this? </p>\n"}, {"tags": ["java", "android", "generics", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4041, "user_id": 2023697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mo57V.jpg?s=128&g=1", "display_name": "Liem Vo", "link": "https://stackoverflow.com/users/2023697/liem-vo"}, "is_accepted": false, "score": 1, "last_activity_date": 1552518486, "creation_date": 1552518486, "answer_id": 55152496, "question_id": 55152187, "link": "https://stackoverflow.com/questions/55152187/how-to-instantiate-base-class-with-different-generic-types/55152496#55152496", "title": "How to instantiate base class with different generic types?", "body": "<p>They are the same JVM signature. You can define an abstract class (<code>AbstractTrackInfoDTO</code>) that is the parent of <code>TrackInfoDTO</code> and <code>GroupTrackInfoDTO</code> then declare the constructor as below:</p>\n\n<pre><code>constructor(operation: BizOperation&lt;AbstractTrackInfoDTO&gt;,  mCallback: BizTaskCallback&lt;TrackSettings&gt;) : super(operation) {\n    this.mCallback = mCallback\n}\n</code></pre>\n"}], "owner": {"reputation": 749, "user_id": 2790016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7c732b2e41421012ba51b6707713a620?s=128&d=identicon&r=PG&f=1", "display_name": "Beto", "link": "https://stackoverflow.com/users/2790016/beto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552518486, "creation_date": 1552516563, "question_id": 55152187, "link": "https://stackoverflow.com/questions/55152187/how-to-instantiate-base-class-with-different-generic-types", "title": "How to instantiate base class with different generic types?", "body": "<p>I am trying to create a 2nd constructor and call the parent class with a different generic type based on the constructor invocation. \n1 type is GroupTrackInfoDTO and the other one is TrackInfoDTO but I keep getting a compiling error </p>\n\n<blockquote>\n  <p>Platform declaration clash: The following declarations have the same\n  JVM signature</p>\n</blockquote>\n\n<p>My code: </p>\n\n<pre><code>class GetSettingsTask\n: BizOperationTask {\n\nprivate var mCallback: BizTaskCallback&lt;TrackSettings&gt;? = null\n\nconstructor(operation: BizOperation&lt;GroupTrackInfoDTO&gt;,  mCallback: BizTaskCallback&lt;TrackSettings&gt;) : super(operation) {\n    this.mCallback = mCallback\n}\n\n\nconstructor(o: BizOperation&lt;TrackInfoDTO&gt;, mCallback: BizTaskCallback&lt;TrackSettings&gt;) : super(o) {\n    this.mCallback = mCallback\n}\n</code></pre>\n\n<p>if I add a dummy parameter to one of the constructors it worked but no idea why</p>\n\n<pre><code>constructor(o: BizOperation&lt;TrackInfoDTO&gt;, mCallback: BizTaskCallback&lt;TrackSettings&gt;, i: Int = 0) : super(o) {\n        this.mCallback = mCallback\n    }\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 10605, "user_id": 1949554, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d43d63dddaff1f4e278a9cdfdcf3b817?s=128&d=identicon&r=PG&f=1", "display_name": "FRR", "link": "https://stackoverflow.com/users/1949554/frr"}, "edited": false, "score": 0, "creation_date": 1552518237, "post_id": 55152263, "comment_id": 97045301, "body": "Thanks, It&#39;s definitely better than this <code>val deferred = with(service) { getFoo() }</code>, I don&#39;t like the idea of having to pass around the scope all the time but I&#39;ll stick to it if I can&#39;t find a better way."}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 1, "last_activity_date": 1552517115, "creation_date": 1552517115, "answer_id": 55152263, "question_id": 55152122, "link": "https://stackoverflow.com/questions/55152122/coroutinescope-extension-function-in-a-different-class/55152263#55152263", "title": "CoroutineScope extension function in a different class", "body": "<p>Why not make <code>getFoo</code> a normal function and pass in the scope:</p>\n\n<pre><code>fun getFoo(scope: CoroutineScope) = scope.async {\n    //work }\n}\n\nlaunch {\n    service.getFoo(this)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10605, "user_id": 1949554, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d43d63dddaff1f4e278a9cdfdcf3b817?s=128&d=identicon&r=PG&f=1", "display_name": "FRR", "link": "https://stackoverflow.com/users/1949554/frr"}, "edited": false, "score": 0, "creation_date": 1552545197, "post_id": 55155871, "comment_id": 97052032, "body": "Thanks, I like this approach, it has some benefits: 1. It leaves it up to the caller decide to suspend and not run this work asynchronously for whatever reason 2. The <code>async</code> and <code>await</code> keywords are in the same parent coroutine and the fact that <code>service.getFoo</code> returns a deferred doesn&#39;t come as a surprise 3. My method signatures are not polluted with coroutine-specific objects"}], "tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": true, "score": 1, "last_activity_date": 1552543209, "creation_date": 1552543209, "answer_id": 55155871, "question_id": 55152122, "link": "https://stackoverflow.com/questions/55152122/coroutinescope-extension-function-in-a-different-class/55155871#55155871", "title": "CoroutineScope extension function in a different class", "body": "<p>As far as I understand your intent is to let the service specify the scheduler. Why not split the specification of the scheduler and the decision to run asynchronously? </p>\n\n<p>Let the service function be suspendable and use <code>withContext</code> to specify the scheduler.\nAnd let the caller decide, if the function should run asynchronously.</p>\n\n<pre><code>class MyService {\n    suspend fun getFoo() = withContext(Dispatchers.IO) {\n        //work \n    }\n}\n\nabstract class MyProgram(val service: MyService) : CoroutineScope {\n\n    fun main() {\n        launch {\n            val deferred = async { service.getFoo() }\n\n            //some work\n\n            deferred.await()\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 10605, "user_id": 1949554, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d43d63dddaff1f4e278a9cdfdcf3b817?s=128&d=identicon&r=PG&f=1", "display_name": "FRR", "link": "https://stackoverflow.com/users/1949554/frr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 55155871, "answer_count": 2, "score": 1, "last_activity_date": 1587391779, "creation_date": 1552516177, "last_edit_date": 1587391779, "question_id": 55152122, "link": "https://stackoverflow.com/questions/55152122/coroutinescope-extension-function-in-a-different-class", "title": "CoroutineScope extension function in a different class", "body": "<p>I'm trying to use an extension function to <code>CoroutineScope</code> to launch some asynchronous work.\nI'm not sure how to call this method from my main class, see below:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MyService {\n   fun CoroutineScope.getFoo() = async(IO|Single|Default) { ... }\n}\n\nclass MyProgram(val service : MyService) : CoroutineScope {\n   fun main() {\n      launch {\n         // Doesn't work, unresloved `service.getFoo`.\n         val deferred = service.getFoo() getFoo\n\n         // Works, but looks a bit odd IMO.\n         val deferred = with(service) { getFoo() }\n\n         deferred.await()\n      }  \n   }\n}\n</code></pre>\n\n<p>I know I could just move the <code>async {}</code> keyword to my main method, but in this way, the caller would have to decide the scheduler.\nThe service knows the nature of its work (IO/Computation bound single-threaded?, etc) and I think it should be the one deciding the scheduler.</p>\n"}, {"tags": ["java", "spring", "spring-boot", "kotlin", "netty"], "answers": [{"comments": [{"owner": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "edited": false, "score": 0, "creation_date": 1552572783, "post_id": 55151302, "comment_id": 97068545, "body": "This is what I have tried, and unfortunately it never goes into their. It looks like I don&#39;t have <code>ResponseEntityExceptionHandler</code> because our version isn&#39;t that up-to-date. However, I&#39;ve added the rest of the exception handler logic and it never gets called. Our <code>WebExceptionHandler</code> for handling sending the error response (which works properly), but something else is doing the logging, which is what I&#39;m trying to intercept."}, {"owner": {"reputation": 21, "user_id": 9882384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/532015781a857127c861f6238d22573d?s=128&d=identicon&r=PG&f=1", "display_name": "yogananda", "link": "https://stackoverflow.com/users/9882384/yogananda"}, "reply_to_user": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "edited": false, "score": 0, "creation_date": 1552574298, "post_id": 55151302, "comment_id": 97069721, "body": "@samanime will it be possible to share your ExceptionHandler implementation, so that i can try to reproduce it or better understand what you are trying to do."}, {"owner": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "edited": false, "score": 0, "creation_date": 1552574959, "post_id": 55151302, "comment_id": 97070225, "body": "I updated my question with what should be a minimal implementation of the relevant bits we have. Please let me know if you need any more. Thanks."}, {"owner": {"reputation": 21, "user_id": 9882384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/532015781a857127c861f6238d22573d?s=128&d=identicon&r=PG&f=1", "display_name": "yogananda", "link": "https://stackoverflow.com/users/9882384/yogananda"}, "reply_to_user": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "edited": false, "score": 0, "creation_date": 1552625678, "post_id": 55151302, "comment_id": 97090121, "body": "I assume you wired MyExceptionHandler class to spring config. if not can you try adding @Component to MyExceptionHandler class, i think it&#39;s not wired correctly."}], "tags": [], "owner": {"reputation": 21, "user_id": 9882384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/532015781a857127c861f6238d22573d?s=128&d=identicon&r=PG&f=1", "display_name": "yogananda", "link": "https://stackoverflow.com/users/9882384/yogananda"}, "is_accepted": false, "score": 2, "last_activity_date": 1552513681, "last_edit_date": 1552513681, "creation_date": 1552511606, "answer_id": 55151302, "question_id": 55150880, "link": "https://stackoverflow.com/questions/55150880/changing-error-logging-in-spring-boot-netty/55151302#55151302", "title": "Changing error logging in Spring Boot/Netty", "body": "<p>More information on how you are implementing your Exception Handler would be helpful.\nhere's a simple implementation which i follow to convert the exceptions and log them.</p>\n\n<pre><code> @ControllerAdvice \npublic class DefaultExceptionHandler extends ResponseEntityExceptionHandler {\n    private static final Logger LOG = LoggerFactory.getLogger(DefaultExceptionHandler.class);\n    private static String ERROR = \"ERROR\";\n\n    @ExceptionHandler(Exception.class)\n    ResponseEntity&lt;Map&lt;String, Map&lt;String, String&gt;&gt;&gt; exception(Exception e) {\n        Map&lt;String,Map&lt;String,String&gt;&gt; map = new HashMap&lt;&gt;(1);\n        Map&lt;String,String&gt; m = new HashMap&lt;&gt;(1);\n        m.put(\"message\",e.getMessage());\n        map.put(ERROR, m);\n        LOG.info(\"some error \" + e);\n        return new ResponseEntity&lt;&gt;(map, HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n\n}\n</code></pre>\n\n<p>Also don't forget to create a bean or add you ExceptionHandler class to the spring config.</p>\n\n<pre><code>@Bean\npublic DefaultExceptionHandler defaultExceptionHandler(){\n    return new DefaultExceptionHandler();\n}\n</code></pre>\n"}], "owner": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552574921, "creation_date": 1552509694, "last_edit_date": 1552574921, "question_id": 55150880, "link": "https://stackoverflow.com/questions/55150880/changing-error-logging-in-spring-boot-netty", "title": "Changing error logging in Spring Boot/Netty", "body": "<p>I have a Spring Boot application that is running Netty for a REST API.</p>\n\n<p>I have a WebExceptionHandler to handle exceptions that may occur, which is working. It builds appropriate responses and sends them.</p>\n\n<p>The problem is, it also still logs the exception as an error. I want to change this to log it as an info instead (because we have tracking and alerts that operate differently based on info or error). It even logs things like 404's as errors.</p>\n\n<p>It seems like <a href=\"https://www.baeldung.com/netty-exception-handling\" rel=\"nofollow noreferrer\"><code>exceptionCaught</code> in a <code>ChannelInboundHandler</code></a> would help, but <code>exceptionCaught</code> is deprecated. I can't find anything that doesn't use this method, and I can't find anything referring to what (if anything) has replaced it).</p>\n\n<p>I also tried using an <code>@ControllerAdvice</code> or <code>@RestControllerAdvice</code> with an <code>@ExceptionHandler</code>, but that is never called.</p>\n\n<p>What is the correct way to intercept and handle the logging of the exception?</p>\n\n<hr>\n\n<p>A minimal example implementation of our current set-up looks like this:</p>\n\n<pre><code>@RestController\nclass MyController {\n  @RequestMapping(method = [GET], value = [\"endpoint\"], produces = [APPLICATION_JSON_VALUE])\n  fun myEndpoint(): Mono&lt;MyResponse&gt; = createResponse()\n}\n\n@Component\n@Order(Ordered.HIGHEST_PRECEDENCE)\nclass MyWebExceptionHandler : WebExceptionHandler {\n  // This does get called and sends the appropriate response back, but an error is logged somewhere outside of our code.\n  override fun handle(exchange: ServerWebExchange, ex: Throwable): Mono&lt;Void&gt; = \n    createErrorResponse();\n}\n\n// Tried using both, or just one at a time, no difference.\n// It does get created.\n@ControllerAdvice\n@RestControllerAdvice\nclass MyExceptionHandler {\n  // Never called\n  @ExceptionHandler(Exception::class)\n  fun handle(ex: Exception) {\n    log.error(ex.message)\n  }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "decompiling"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552511865, "post_id": 55150497, "comment_id": 97042994, "body": "Why, what&#39;s wrong with it?"}, {"owner": {"reputation": 2156, "user_id": 6820170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d2af840ea3d5ac271ed2ee2552be340f?s=128&d=identicon&r=PG&f=1", "display_name": "Tord Larsen", "link": "https://stackoverflow.com/users/6820170/tord-larsen"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552512202, "post_id": 55150497, "comment_id": 97043153, "body": "The requestBodyConverter and responseBodyConverter has many arguments that never gets used"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552515166, "post_id": 55150497, "comment_id": 97044347, "body": "And... why is that a problem? Surely they <i>could</i> be used, but <i>aren&#39;t</i> in <i>this particular case</i>."}, {"owner": {"reputation": 2156, "user_id": 6820170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d2af840ea3d5ac271ed2ee2552be340f?s=128&d=identicon&r=PG&f=1", "display_name": "Tord Larsen", "link": "https://stackoverflow.com/users/6820170/tord-larsen"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552518179, "post_id": 55150497, "comment_id": 97045285, "body": "So you mean like that that programmers for this app has created a method that leads to nowhere like the <code>requestBodyConverter</code>"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1552526003, "post_id": 55150497, "comment_id": 97047271, "body": "This is a <code>Converter.Factory</code> for Retrofit. <code>requestBodyConverter</code> and <code>responseBodyConverter</code> are used by Retrofit, the method signatures also come from Retrofit. Clearly, if you want to understand what these method arguments are for, you should read the documentation for Retrofit, specifically <a href=\"https://square.github.io/retrofit/2.x/retrofit/retrofit2/Converter.Factory.html#requestBodyConverter-java.lang.reflect.Type-java.lang.annotation.Annotation:A-java.lang.annotation.Annotation:A-retrofit2.Retrofit-\" rel=\"nofollow noreferrer\">square.github.io/retrofit/2.x/retrofit/retrofit2/&hellip;</a>"}, {"owner": {"reputation": 2156, "user_id": 6820170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d2af840ea3d5ac271ed2ee2552be340f?s=128&d=identicon&r=PG&f=1", "display_name": "Tord Larsen", "link": "https://stackoverflow.com/users/6820170/tord-larsen"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1552559057, "post_id": 55150497, "comment_id": 97059215, "body": "Thanks I understand now"}], "owner": {"reputation": 2156, "user_id": 6820170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d2af840ea3d5ac271ed2ee2552be340f?s=128&d=identicon&r=PG&f=1", "display_name": "Tord Larsen", "link": "https://stackoverflow.com/users/6820170/tord-larsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552508977, "creation_date": 1552508100, "last_edit_date": 1552508977, "question_id": 55150497, "link": "https://stackoverflow.com/questions/55150497/how-to-interpretate-this-kotlin-to-java-decompile-mech", "title": "How to interpretate this Kotlin to java decompile mech", "body": "<p>I decompile an Android apk (Kotlin code)trying to understand the code and came across this: </p>\n\n<pre><code>public final class RetrofitJSONArrayConverter extends Factory {\n    public static final Companion Companion = new Companion();\n    private static final MediaType MEDIA_TYPE = MediaType.parse(\"application/json; charset=UTF-8\");\n\n    @Metadata(bv = {1, 0, 3}, d1 = {\"\\u0000\\u0012\\n\\u0002\\u0018\\u0002\\n\\u0002\\u0010\\u0000\\n\\u0002\\b\\u0002\\n\\u0002\\u0018\\u0002\\n\\u0000\\b\\u0003\\u0018\\u00002\\u00020\\u0001B\\u0007\\b\\u0002\u00a2\\u0006\\u0002\\u0010\\u0002R\\u0010\\u0010\\u0003\\u001a\\u0004\\u0018\\u00010\\u0004X\\u0004\u00a2\\u0006\\u0002\\n\\u0000\u00a8\\u0006\\u0005\"}, d2 = {\"Lio/voiapp/voi/util/RetrofitJSONArrayConverter$Companion;\", \"\", \"()V\", \"MEDIA_TYPE\", \"Lokhttp3/MediaType;\", \"app_release\"}, k = 1, mv = {1, 1, 13})\n    /* compiled from: RetrofitJSONArrayConverter.kt */\n    public static final class Companion {\n        private Companion() {\n        }\n    }\n\n    @Nullable\n    public Converter&lt;ResponseBody, ?&gt; responseBodyConverter(@NotNull Type type, @NotNull Annotation[] annotationArr, @NotNull Retrofit retrofit) {\n        Intrinsics.checkParameterIsNotNull(type, \"type\");\n        Intrinsics.checkParameterIsNotNull(annotationArr, \"annotations\");\n        Intrinsics.checkParameterIsNotNull(retrofit, \"retrofit\");\n        return Intrinsics.areEqual((Object) JSONArray.class, (Object) type) != null ? (Converter) RetrofitJSONArrayConverter$responseBodyConverter$1.INSTANCE : null;\n    }\n\n    @Nullable\n    public Converter&lt;?, RequestBody&gt; requestBodyConverter(@NotNull Type type, @NotNull Annotation[] annotationArr, @NotNull Annotation[] annotationArr2, @NotNull Retrofit retrofit) {\n        Intrinsics.checkParameterIsNotNull(type, \"type\");\n        Intrinsics.checkParameterIsNotNull(annotationArr, \"parameterAnnotations\");\n        Intrinsics.checkParameterIsNotNull(annotationArr2, \"methodAnnotations\");\n        Intrinsics.checkParameterIsNotNull(retrofit, \"retrofit\");\n        return Intrinsics.areEqual((Object) JSONArray.class, (Object) type) != null ? (Converter) RetrofitJSONArrayConverter$requestBodyConverter$1.INSTANCE : null;\n    }\n}\n</code></pre>\n\n<p>I know that Kotlin code can be badly misinterpreted by the java decompiler \nbut how can the decompiler  miss all this method arguments</p>\n\n<p>Any thought on this?</p>\n"}, {"tags": ["android", "inheritance", "kotlin", "multiple-inheritance", "preferencefragment"], "answers": [{"tags": [], "owner": {"reputation": 1759, "user_id": 974184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2f97a8d3cae8511952cb3eda041027?s=128&d=identicon&r=PG", "display_name": "Rodrigo Queiroz", "link": "https://stackoverflow.com/users/974184/rodrigo-queiroz"}, "is_accepted": false, "score": 1, "last_activity_date": 1552509276, "creation_date": 1552509276, "answer_id": 55150781, "question_id": 55149798, "link": "https://stackoverflow.com/questions/55149798/kotlin-java-inheritance-and-interfaces/55150781#55150781", "title": "Kotlin/Java inheritance and interfaces", "body": "<p>You will probably have to create another <code>abstract class BasePreference() : PreferenceFragmentCompat() {}</code> and re-implement or replicate what you have currently at <code>BaseFragment</code> for the FragNav Library.</p>\n\n<p>Since <code>PreferenceFragmentCompat</code> require you to override <code>override fun onCreatePreferences(bundle: Bundle, s: String)</code> and <code>addPreferencesFromResource(R.xml.app_preferences)</code> you can not disable the preference for other purposes.</p>\n"}], "owner": {"reputation": 650, "user_id": 5076153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ced3aecfb433928ab4ae9a73365be71e?s=128&d=identicon&r=PG&f=1", "display_name": "Barcode", "link": "https://stackoverflow.com/users/5076153/barcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552509276, "creation_date": 1552505107, "question_id": 55149798, "link": "https://stackoverflow.com/questions/55149798/kotlin-java-inheritance-and-interfaces", "title": "Kotlin/Java inheritance and interfaces", "body": "<p><strong>Situation:</strong> So i'm building an app using <a href=\"https://github.com/ncapdevi/FragNav\" rel=\"nofollow noreferrer\">ncapdevi's FragNav Library</a> to help me navigate my fragments.</p>\n\n<p>I have have a MainActivity which hosts my three fragments. These three fragments extend <code>BaseFragment()</code> (following FragNav app example), which extends <code>Fragment()</code>. One of my fragments i want to be a settings page, and i found a tutorial <a href=\"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-1-5959aa49337c\" rel=\"nofollow noreferrer\">online here</a> that shows how to make a settings page using <code>PreferenceFragmentCompat</code>.</p>\n\n<p><strong>Problem:</strong>  The tutorial's fragment extends <code>PreferenceFragmentCompat</code>. Mine extends <code>BaseFragment</code>. I'm not really sure how to go about with this, since i know you can only inherit one class in Java/Kotlin.</p>\n\n<p>I did see suggestions about using <em>Interfaces</em>, but could maybe someone kind of point me in the correct direction.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["android", "kotlin", "solid-principles", "extension-function"], "answers": [{"tags": [], "owner": {"reputation": 1359, "user_id": 3320996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xPy4Q.jpg?s=128&g=1", "display_name": "matwr", "link": "https://stackoverflow.com/users/3320996/matwr"}, "is_accepted": false, "score": 3, "last_activity_date": 1552504091, "creation_date": 1552504091, "answer_id": 55149544, "question_id": 55149091, "link": "https://stackoverflow.com/questions/55149091/open-close-principle-and-extension-functions/55149544#55149544", "title": "Open Close Principle and Extension Functions", "body": "<p>The extenstion function is designed for situations where you want to add a function to a built-in or third-party class. You cannot do this by default because built-in functions are not modifiable.</p>\n\n<p>An example implementation to add a toUnsigned method to the built-in Byte class:</p>\n\n<pre><code>fun Byte.toUnsigned(): Int {\n    return if (this &lt; 0) this + 256 else this.toInt()\n}\n</code></pre>\n\n<p>As Byte is a built-in class you cannot modify it directly. However, you can define an extension function as per above code. You can then call the extension function in the following way:</p>\n\n<pre><code>val x: Byte = -1\nprintln(x.toUnsigned()) // Prints 255\n</code></pre>\n\n<p>Keep in mind that this is just syntactic sugar - you're not actually modifying the class or its instances. Therefore, you have to import an extension function/property wherever you want to use it (since it isn't carried along with the instances of the class).</p>\n\n<p>Source : <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-for-py/extension-functionsproperties.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/tutorials/kotlin-for-py/extension-functionsproperties.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 553, "user_id": 1445986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b4d1041fb9cb5fb2ccf2caaf977567e?s=128&d=identicon&r=PG", "display_name": "ComDubh", "link": "https://stackoverflow.com/users/1445986/comdubh"}, "is_accepted": false, "score": 1, "last_activity_date": 1552574928, "creation_date": 1552574928, "answer_id": 55165512, "question_id": 55149091, "link": "https://stackoverflow.com/questions/55149091/open-close-principle-and-extension-functions/55165512#55165512", "title": "Open Close Principle and Extension Functions", "body": "<p>'Extension' in the context of the Open Closed Principle usually does not mean inheritance, it means somehow extending the class with new functionality. 'Modification' does refer to changing the code of the class, as you say.</p>\n\n<p>The extension facility of Kotlin allows you to add a method to a class without editing the code of the class. This is perfectly in keeping with the Open Closed Principle -- the class is extended with new functionality without the class itself being changed.</p>\n"}], "owner": {"reputation": 774, "user_id": 1407378, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/z5qek.jpg?s=128&g=1", "display_name": "Mehroze Yaqoob", "link": "https://stackoverflow.com/users/1407378/mehroze-yaqoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1552574928, "creation_date": 1552502251, "last_edit_date": 1552540388, "question_id": 55149091, "link": "https://stackoverflow.com/questions/55149091/open-close-principle-and-extension-functions", "title": "Open Close Principle and Extension Functions", "body": "<p>I have learned that Open Close Principle is allowing extension to classes and restricting from modification. So in Kotlin, when we use extension function</p>\n\n<ol>\n<li>Are we extending a class</li>\n<li>Or are we modifying a class</li>\n<li>Can extension functions in kotlin be an example for Open/Close Principle?</li>\n</ol>\n\n<p>I assume extension means to apply inheritance and modification means to add or change code of existing class.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["kotlin", "project-reactor"], "answers": [{"comments": [{"owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 0, "creation_date": 1553091294, "post_id": 55157466, "comment_id": 97257032, "body": "only problem with this is that items are duplicated by number of transformations which is not what I want"}, {"owner": {"reputation": 2791, "user_id": 10264430, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fVM079FxbRU/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOJgGDzWg7VbWvkkZrCf661zLrdpA/mo/photo.jpg?sz=128", "display_name": "Alexander Pankin", "link": "https://stackoverflow.com/users/10264430/alexander-pankin"}, "reply_to_user": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 0, "creation_date": 1553092659, "post_id": 55157466, "comment_id": 97258015, "body": "Do you want to chain transformations for each item?"}, {"owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 0, "creation_date": 1553092728, "post_id": 55157466, "comment_id": 97258088, "body": "exactly, I want to apply all transformations to each item so (eg. one item and ten transformations should produce one item but with ten transformations applied)"}, {"owner": {"reputation": 2791, "user_id": 10264430, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fVM079FxbRU/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOJgGDzWg7VbWvkkZrCf661zLrdpA/mo/photo.jpg?sz=128", "display_name": "Alexander Pankin", "link": "https://stackoverflow.com/users/10264430/alexander-pankin"}, "reply_to_user": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 0, "creation_date": 1553092995, "post_id": 55157466, "comment_id": 97258308, "body": "And what about sequence of transformations? Does it matter?"}, {"owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 0, "creation_date": 1553093156, "post_id": 55157466, "comment_id": 97258445, "body": "you mean if the order of sequence matters? No, it does not matter, only requirement is to apply each transformation on item"}, {"owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 0, "creation_date": 1553093471, "post_id": 55157466, "comment_id": 97258674, "body": "so in case you provided it should be <code>((10 * 8) - 3), ((20 * 8) -3)</code>"}, {"owner": {"reputation": 2791, "user_id": 10264430, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fVM079FxbRU/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOJgGDzWg7VbWvkkZrCf661zLrdpA/mo/photo.jpg?sz=128", "display_name": "Alexander Pankin", "link": "https://stackoverflow.com/users/10264430/alexander-pankin"}, "reply_to_user": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 1, "creation_date": 1553094490, "post_id": 55157466, "comment_id": 97259435, "body": "I have edited the answer. But I&#39;m afraid that the order of transformations could play important role in the real system. So maybe, it would be better to have list of transformations"}], "tags": [], "owner": {"reputation": 2791, "user_id": 10264430, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fVM079FxbRU/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOJgGDzWg7VbWvkkZrCf661zLrdpA/mo/photo.jpg?sz=128", "display_name": "Alexander Pankin", "link": "https://stackoverflow.com/users/10264430/alexander-pankin"}, "is_accepted": true, "score": 3, "last_activity_date": 1553094302, "last_edit_date": 1553094302, "creation_date": 1552550239, "answer_id": 55157466, "question_id": 55148685, "link": "https://stackoverflow.com/questions/55148685/reactor-apply-flux-to-each-emission-of-other-flux/55157466#55157466", "title": "Reactor apply Flux to each emission of other Flux?", "body": "<p>You could use <code>java.util.function.UnaryOperator</code> instead of <code>Transformation</code> class.\nHope this Java example could help you:</p>\n\n<pre><code>@Test\npublic void test() {\n    Flux&lt;Item&gt; items = Flux.just(new Item(10), new Item(20));\n    Flux&lt;UnaryOperator&lt;Item&gt;&gt; transformations = Flux.just(\n            item -&gt; new Item(item.value * 8),\n            item -&gt; new Item(item.value - 3));\n\n    Flux&lt;Item&gt; transformed = items.flatMap(item -&gt; transformations\n            .collectList()\n            .map(unaryOperators -&gt; transformFunction(unaryOperators)\n                    .apply(item)));\n\n    System.out.println(transformed.collectList().block());\n}\n\nFunction&lt;Item, Item&gt; transformFunction(List&lt;UnaryOperator&lt;Item&gt;&gt; itemUnaryOperators) {\n    Function&lt;Item, Item&gt; transformFunction = UnaryOperator.identity();\n    for (UnaryOperator&lt;Item&gt; itemUnaryOperator : itemUnaryOperators) {\n        transformFunction = transformFunction.andThen(itemUnaryOperator);\n    }\n    return transformFunction;\n}\n</code></pre>\n"}], "owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 55157466, "answer_count": 1, "score": 0, "last_activity_date": 1553094302, "creation_date": 1552500713, "question_id": 55148685, "link": "https://stackoverflow.com/questions/55148685/reactor-apply-flux-to-each-emission-of-other-flux", "title": "Reactor apply Flux to each emission of other Flux?", "body": "<p>I have two <code>Flux</code> objects eg.:</p>\n\n<p><code>Flux&lt;Item&gt;</code> and <code>Flux&lt;Transformation&gt;</code></p>\n\n<pre><code>data class Item(val value: Int)\n\ndata class Transformation(val type: String, val value: Int)\n</code></pre>\n\n<p>I would like to apply all transformations to each item - something like:</p>\n\n<pre><code>var item = Item(15)\n\nval transformations = listOf(Transformation(type = \"MULTIPLY\", value = 8), ...)\n\ntransformations.forEach {\n  if (it.type == \"MULTIPLY\") {\n    item = Item(item.value * it.value) \n  }\n}\n</code></pre>\n\n<p>but when having <code>Flux</code>'es of <code>Item</code> and <code>Transformation</code> </p>\n"}, {"tags": ["kotlin", "properties", "getter-setter", "generated-code"], "answers": [{"tags": [], "owner": {"reputation": 502, "user_id": 6157844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JZyUx.jpg?s=128&g=1", "display_name": "functionaldude", "link": "https://stackoverflow.com/users/6157844/functionaldude"}, "is_accepted": true, "score": 1, "last_activity_date": 1552556057, "last_edit_date": 1552556057, "creation_date": 1552500493, "answer_id": 55148615, "question_id": 55148260, "link": "https://stackoverflow.com/questions/55148260/generated-setter-clashes-with-an-interface-method/55148615#55148615", "title": "Generated setter clashes with an interface method", "body": "<p>You can create a property without a backing field, and then override your abstract function like this:</p>\n\n<pre><code>class Foo : IFoo {\n  private var hiddenSelected = false\n\n  val selected get() = hiddenSelected\n\n  override fun setSelected(isActive: Boolean) {\n    hiddenSelected = isActive\n  }\n}\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>After sleeping on it, I think this solution is not so good at all because of 2 reasons:</p>\n\n<ol>\n<li>It introduces a new field (<code>hiddenSelected</code>) which is not necessary</li>\n<li>You cannot do assignments to that field using the standard Kotlin ways (<code>=</code> operator)</li>\n</ol>\n\n<p>I think the best solution would be this:</p>\n\n<pre><code>class Foo : IFoo {\n  @set:JvmName(\"setSelected0\")\n  var selected: Boolean = false\n    set(value) { setSelected(value) }\n\n  override fun setSelected(isActive: Boolean) {\n    // Possibly some other stuff\n    println(\"Now i'm using my own setter!\")\n    selected = isActive\n  }\n}\n</code></pre>\n\n<p>Using the annotation <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-name/index.html\" rel=\"nofollow noreferrer\">@JvmName</a> you can tell the compiler how to name that specific function. Kotlin automatically creates a getter and setter for every property, so you need to use the <code>set:</code> modifier to annotate the setter of that property and not the property itself.</p>\n\n<p>Also it is very important that you implement a custom setter for that property so you can <strong>safely</strong> write this:</p>\n\n<pre><code>Foo().selected = true // This also prints \"Now i'm using my own setter!\"\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>Foo().setSelected(true)\n</code></pre>\n\n<p>Your setter can possibly do some other stuff (like printing that log), which can have side effects, so you need to make sure that you call the right setter. This can be sometimes a bit tricky since Kotlin always creates a setter for every mutable variable (<code>var</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 502, "user_id": 6157844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JZyUx.jpg?s=128&g=1", "display_name": "functionaldude", "link": "https://stackoverflow.com/users/6157844/functionaldude"}, "edited": false, "score": 0, "creation_date": 1552516152, "post_id": 55151252, "comment_id": 97044679, "body": "The problem I see here is that there are now 2 separate setters for the same <code>var</code> which can have different implementations."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 502, "user_id": 6157844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JZyUx.jpg?s=128&g=1", "display_name": "functionaldude", "link": "https://stackoverflow.com/users/6157844/functionaldude"}, "edited": false, "score": 1, "creation_date": 1552537191, "post_id": 55151252, "comment_id": 97049726, "body": "You could make the setter private, but then Kotlin clients have to call <code>setSelected</code> instead of <code>selected =</code>. Or mark <code>setSelected</code> deprecated so it&#39;s only used through the interface, but that&#39;s bad for Java clients, if you have any."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1552511360, "creation_date": 1552511360, "answer_id": 55151252, "question_id": 55148260, "link": "https://stackoverflow.com/questions/55148260/generated-setter-clashes-with-an-interface-method/55151252#55151252", "title": "Generated setter clashes with an interface method", "body": "<p>You can <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#handling-signature-clashes-with-jvmname\" rel=\"nofollow noreferrer\">use <code>@JvmName</code> to rename the generated setter</a>:</p>\n\n<pre><code>private class Foo : IFoo {\n    @set:JvmName(\"setSelected0\")\n    var selected = false\n\n    override fun setSelected(isActive: Boolean) {\n        selected = isActive\n    }\n}\n</code></pre>\n\n<p>Use from Kotlin remains the same.</p>\n"}], "owner": {"reputation": 3767, "user_id": 3109189, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/s3aPL.jpg?s=128&g=1", "display_name": "PLNech", "link": "https://stackoverflow.com/users/3109189/plnech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 55148615, "answer_count": 2, "score": 3, "last_activity_date": 1552556057, "creation_date": 1552499214, "question_id": 55148260, "link": "https://stackoverflow.com/questions/55148260/generated-setter-clashes-with-an-interface-method", "title": "Generated setter clashes with an interface method", "body": "<p>I am writing a class implementing an interface that exposes a <code>setSelected</code> method. This class will have a <code>selected</code> property:</p>\n\n<pre><code>private class Foo : IFoo {\n        var selected = false\n\n        override fun setSelected(isActive: Boolean) {\n            selected = isActive\n        }\n\n    }\n</code></pre>\n\n<p>However the compiler complains, as Kotlin generates a setter for <code>selected</code>, that the two methods clash:</p>\n\n<pre><code>Error:(14, 9) Kotlin: [com.bar.jvmTest] Platform declaration clash: The following declarations have the same JVM signature (setSelected(Z)V):\n    fun &lt;set-selected&gt;(&lt;set-?&gt;: Boolean): Unit defined in foo.bar.baz.Foo\n    fun setSelected(isActive: Boolean): Unit defined in foo.bar.baz.Foo\nError:(24, 9) Kotlin: [com.bar.jvmTest] Platform declaration clash: The following declarations have the same JVM signature (setSelected(Z)V):\n    fun &lt;set-selected&gt;(&lt;set-?&gt;: Boolean): Unit defined in foo.bar.baz.Foo\n    fun setSelected(isActive: Boolean): Unit defined in foo.bar.baz.Foo\n</code></pre>\n\n<hr>\n\n<p>\n<li>I'd love to remove the custom method to leverage the setter, but then it is not marked <code>override</code> and so my class does not fully implement the interface:</p>\n\n<pre><code>Error:(11, 13) Kotlin: [com.bar.jvmTest] Class 'Foo' is not abstract and does not implement abstract member public abstract fun setSelected(isActive: Boolean): Unit defined in bar.baz\n</code></pre>\n\n<p><li> I know I can rename <code>selected</code> to e.g. <code>dataSelected</code> so that the generated setter doesn't clash with the method, but there should be a way to keep this simple property name <em>and</em> implement the interface as expected. \n</li></p>\n\n<h3>Is there a way to ask the Kotlin compiler to not generate a setter for this property, or to have it marked as <code>override</code>?</h3>\n"}, {"tags": ["java", "spring", "spring-boot", "spring-mvc", "kotlin"], "comments": [{"owner": {"reputation": 22888, "user_id": 7606764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff66904cb49ba020965898e8dd6b9d1?s=128&d=identicon&r=PG&f=1", "display_name": "Andronicus", "link": "https://stackoverflow.com/users/7606764/andronicus"}, "edited": false, "score": 0, "creation_date": 1552497124, "post_id": 55147599, "comment_id": 97035729, "body": "Maybe this would be of some help: <a href=\"https://stackoverflow.com/questions/12710307/spring-mvc-request-mapping-can-this-be-dynamic-configurable\" title=\"spring mvc request mapping can this be dynamic configurable\">stackoverflow.com/questions/12710307/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 168, "user_id": 699605, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/933982b9547f6b2c66d966eb2c38c1ad?s=128&d=identicon&r=PG", "display_name": "A Baldino", "link": "https://stackoverflow.com/users/699605/a-baldino"}, "is_accepted": false, "score": 0, "last_activity_date": 1552500468, "last_edit_date": 1552500468, "creation_date": 1552497842, "answer_id": 55147872, "question_id": 55147599, "link": "https://stackoverflow.com/questions/55147599/how-to-get-path-inside-getmapping-from-other-service/55147872#55147872", "title": "How to get path inside @GetMapping from other service", "body": "<p>You can get the path information from HttpServletRequest object. Please check this:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/37710557/how-to-get-request-url-in-spring-boot-restcontroller\">How to get request URL in Spring Boot RestController</a></p>\n\n<p>If you are not getting exact path, check this for different approaches to get paths:<br>\n<a href=\"https://stackoverflow.com/questions/4931323/whats-the-difference-between-getrequesturi-and-getpathinfo-methods-in-httpservl\">What&#39;s the difference between getRequestURI and getPathInfo methods in HttpServletRequest?</a></p>\n"}, {"tags": [], "owner": {"reputation": 1272, "user_id": 2911348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PoQXe.jpg?s=128&g=1", "display_name": "Prateek Jain", "link": "https://stackoverflow.com/users/2911348/prateek-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1552498285, "creation_date": 1552498285, "answer_id": 55147998, "question_id": 55147599, "link": "https://stackoverflow.com/questions/55147599/how-to-get-path-inside-getmapping-from-other-service/55147998#55147998", "title": "How to get path inside @GetMapping from other service", "body": "<p>you can get the request bound to the current thread by <code>RequestContextHolder</code>.</p>\n\n<p><code>((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest()</code></p>\n\n<p>The above code will get the <code>HttpServletRequest</code> and then you can use <code>[HttpServletRequest#getPathInfo()][1]</code> to get the <code>path</code> of the URL</p>\n"}, {"tags": [], "owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1552499559, "creation_date": 1552499559, "answer_id": 55148350, "question_id": 55147599, "link": "https://stackoverflow.com/questions/55147599/how-to-get-path-inside-getmapping-from-other-service/55148350#55148350", "title": "How to get path inside @GetMapping from other service", "body": "<p>Spring has support for doing just this task. In your controller method, pass a parameter of type <code>UriComponentsBuilder</code>. This builder will have all the information about the current request routing (hostname, port, path, etc.). You can then use <code>MvcUriComponentsBuilder</code> to have Spring construct the link that you need (Java, but it should be equivalent in Kotlin):</p>\n\n<pre><code>MvcUriComponentsBuilder.relativeTo(builderParameter)\n    .fromMethod(Handler.class, \"method\")\n</code></pre>\n"}], "owner": {"reputation": 895, "user_id": 10082337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L0iDy.jpg?s=128&g=1", "display_name": "grolegor", "link": "https://stackoverflow.com/users/10082337/grolegor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1596, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1552500468, "creation_date": 1552496881, "question_id": 55147599, "link": "https://stackoverflow.com/questions/55147599/how-to-get-path-inside-getmapping-from-other-service", "title": "How to get path inside @GetMapping from other service", "body": "<p>I have a rest controller with @GetMapping annotation for mapping HTTP requests onto specific handler methods:</p>\n\n<pre><code>@RestController\nclass Handler(){\n    @GetMapping(path = [\"method\"])\n    fun handlerMethod(){\n        //...\n    }\n}\n</code></pre>\n\n<p>Also I have email service where I need to send some email with link to my endpoint (in that case <a href=\"http://host/method\" rel=\"nofollow noreferrer\">http://host/method</a>)</p>\n\n<pre><code>@Service\nclass EmailService(val config: Config){\n\n    fun sendEmail(){\n        // send \"config.baseUrl/${getMethodPath()}\"\n    }\n\n    fun getMethodPath(){\n        //todo\n    }\n}\n</code></pre>\n\n<p>Here I get base url from configuration (<a href=\"http://host\" rel=\"nofollow noreferrer\">http://host</a>). Is there any way to get path attribute in EmailService from Handler's @GetMapping for build link to my service?</p>\n"}, {"tags": ["kotlin", "syntax"], "answers": [{"tags": [], "owner": {"reputation": 502, "user_id": 6157844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JZyUx.jpg?s=128&g=1", "display_name": "functionaldude", "link": "https://stackoverflow.com/users/6157844/functionaldude"}, "is_accepted": true, "score": 2, "last_activity_date": 1552496498, "last_edit_date": 1552496498, "creation_date": 1552495804, "answer_id": 55147237, "question_id": 55146877, "link": "https://stackoverflow.com/questions/55146877/avoiding-unit-parameter-declaration-when-implementing-generic-interface/55147237#55147237", "title": "Avoiding Unit parameter declaration when implementing generic interface", "body": "<p>Assuming your interface looks like this:</p>\n\n<pre><code>interface Handler&lt;T&gt; {\n  fun handle(item: T)\n}\n</code></pre>\n\n<p>You could wrap it in another interface like this:</p>\n\n<pre><code>interface TypelessHandler : Handler&lt;Unit&gt; {\n  fun handle()\n\n  override fun handle(item: Unit) {\n    handle()\n  }\n}\n</code></pre>\n\n<p>Then use it like this:</p>\n\n<pre><code>class FooHandler: TypelessHandler {\n  override fun handle() {\n    //whatever\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 55147237, "answer_count": 1, "score": 0, "last_activity_date": 1552496498, "creation_date": 1552494761, "last_edit_date": 1552496470, "question_id": 55146877, "link": "https://stackoverflow.com/questions/55146877/avoiding-unit-parameter-declaration-when-implementing-generic-interface", "title": "Avoiding Unit parameter declaration when implementing generic interface", "body": "<p>I have an interface <code>Handler&lt;T&gt;</code> with one method <code>handle(item: T)</code>  and some classes implementing it:</p>\n\n<pre><code>class FooHandler : Handler&lt;String&gt;\nclass BarHandler : Handler&lt;Int&gt;\nclass BazHandler : Handler&lt;Unit&gt;\n</code></pre>\n\n<p>In the last one, <code>handle</code> implementation looks like this:</p>\n\n<pre><code>override fun handle(nothing: Unit) {\n  //whatever\n}\n</code></pre>\n\n<p>I find it quite ugly. It would be great Kotlin allow to avoid parameter declaration when it is of type <code>Unit</code>, like:</p>\n\n<pre><code>override fun handle() {\n  //whatever\n}\n</code></pre>\n\n<p>But it's not supported so far. Does Kotlin have something to deal with this situation? </p>\n"}, {"tags": ["function", "lambda", "kotlin"], "comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 3, "creation_date": 1552494738, "post_id": 55146481, "comment_id": 97034303, "body": "Duplicate of <a href=\"https://stackoverflow.com/questions/55132231/kotlin-lambdas-range-map-filter-and-reduce-fold\" title=\"kotlin lambdas range map filter and reduce fold\">stackoverflow.com/questions/55132231/&hellip;</a> ?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8838416, "user_type": "registered", "profile_image": "https://graph.facebook.com/141300206618311/picture?type=large", "display_name": "Jack", "link": "https://stackoverflow.com/users/8838416/jack"}, "edited": false, "score": 0, "creation_date": 1552498575, "post_id": 55146920, "comment_id": 97036554, "body": "Worked perfectly. Thank you"}], "tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": true, "score": 3, "last_activity_date": 1552512049, "last_edit_date": 1552512049, "creation_date": 1552494869, "answer_id": 55146920, "question_id": 55146481, "link": "https://stackoverflow.com/questions/55146481/kotlin-using-lambda-functions-range-map-filter-reduce-fold-to-find-the-sum/55146920#55146920", "title": "Kotlin - using Lambda functions range, map, filter, reduce/fold to find the sum of all numbers between 1-1000 that are divisible by 3 or 5", "body": "<p>Talking about \"numbers from <em>x</em> to <em>y</em>\" makes me think of the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/-int-range/index.html\" rel=\"nofollow noreferrer\"><code>IntRange</code></a> class. You can use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/range-to.html\" rel=\"nofollow noreferrer\"><code>rangeTo()</code></a> function to generate your <code>IntRange</code> in a nicely-readable fashion, or you can use the <code>(x..y)</code> syntax to do it if you prefer.</p>\n\n<p>Talking about only those that are \"divisible by 3 or 5\" makes me think of the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter.html\" rel=\"nofollow noreferrer\"><code>filter()</code></a> function that accepts a predicate.</p>\n\n<p>Talking about the sum of these numbers makes me think of the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sum.html\" rel=\"nofollow noreferrer\"><code>sum()</code></a> function.</p>\n\n<p>Put it all together and you get:</p>\n\n<pre><code>val sum = 1.rangeTo(1000)\n    .filter { it % 3 == 0 || it % 5 == 0 }\n    .sum()\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8838416, "user_type": "registered", "profile_image": "https://graph.facebook.com/141300206618311/picture?type=large", "display_name": "Jack", "link": "https://stackoverflow.com/users/8838416/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 55146920, "answer_count": 1, "score": -1, "last_activity_date": 1552512049, "creation_date": 1552493515, "question_id": 55146481, "link": "https://stackoverflow.com/questions/55146481/kotlin-using-lambda-functions-range-map-filter-reduce-fold-to-find-the-sum", "title": "Kotlin - using Lambda functions range, map, filter, reduce/fold to find the sum of all numbers between 1-1000 that are divisible by 3 or 5", "body": "<p>I am trying to use Lambda functions to find the sum of numbers between 1-1000 that are divisible by 3 or 5. I have to complete the task in Kotlin. </p>\n\n<p>So far all I have is:</p>\n\n<pre><code>fun divisibleByThreeOrFive () { \n}\n</code></pre>\n\n<p>So any help would be greatly appreciated. </p>\n"}, {"tags": ["android", "kotlin", "android-room", "android-architecture-components"], "answers": [{"comments": [{"owner": {"reputation": 2261, "user_id": 4672107, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jWMdh.jpg?s=128&g=1", "display_name": "Carson Holzheimer", "link": "https://stackoverflow.com/users/4672107/carson-holzheimer"}, "edited": false, "score": 0, "creation_date": 1559107414, "post_id": 55146758, "comment_id": 99311391, "body": "<code>subscribeOn(db.queryExecutor)</code> gives me a compile error. Did you set a specific executor in your database setup or something?"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "reply_to_user": {"reputation": 2261, "user_id": 4672107, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jWMdh.jpg?s=128&g=1", "display_name": "Carson Holzheimer", "link": "https://stackoverflow.com/users/4672107/carson-holzheimer"}, "edited": false, "score": 0, "creation_date": 1559110621, "post_id": 55146758, "comment_id": 99312579, "body": "Do you mind quoting the error so I have an idea what&#39;s happening? There&#39;s a <code>RoomDatabase.getQueryExecutor()</code> method. <code>Did you set a specific executor in your database setup or something?</code> I didn&#39;t but if I did I wouldn&#39;t want to track it manually. That&#39;s why I ask my database to give me its query executor. The default is <code>ArchTaskExecutor.getIOThreadExecutor()</code> but I don&#39;t care - I ask the database for the correct answer."}, {"owner": {"reputation": 2261, "user_id": 4672107, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jWMdh.jpg?s=128&g=1", "display_name": "Carson Holzheimer", "link": "https://stackoverflow.com/users/4672107/carson-holzheimer"}, "edited": false, "score": 0, "creation_date": 1559464797, "post_id": 55146758, "comment_id": 99423494, "body": "It was a type mismatch. Expected Scheduler, got Executor. What is the advantage of specifying an executor? This is the only place I&#39;ve seen it"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "reply_to_user": {"reputation": 2261, "user_id": 4672107, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jWMdh.jpg?s=128&g=1", "display_name": "Carson Holzheimer", "link": "https://stackoverflow.com/users/4672107/carson-holzheimer"}, "edited": false, "score": 1, "creation_date": 1559465145, "post_id": 55146758, "comment_id": 99423558, "body": "You&#39;re right, my mistake, just fixed it. You may need to specify custom DB executor for unit testing, I think that&#39;s the main point why the API is there."}], "tags": [], "owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "is_accepted": false, "score": 3, "last_activity_date": 1566557731, "last_edit_date": 1566557731, "creation_date": 1552494353, "answer_id": 55146758, "question_id": 55146430, "link": "https://stackoverflow.com/questions/55146430/how-return-completable-on-room-transaction-android/55146758#55146758", "title": "How return completable on room transaction Android", "body": "<h3>Since Room 2.1.0</h3>\n\n<blockquote>\n  <p><strong>Additional Async Support:</strong> DAO methods annotated with <code>@Insert</code>, <code>@Delete</code> or <code>@Update</code>, along with <code>@Query</code> containing <code>INSERT</code>, <code>DELETE</code> or <code>UPDATE</code> statements, now support Rx return types <code>Completable</code>, <code>Single</code>, <code>Maybe</code>, and Guava's return type <code>ListenableFuture</code>, and they can also be suspend functions.</p>\n</blockquote>\n\n<p>Source: <a href=\"https://developer.android.com/jetpack/androidx/releases/room#2.1.0\" rel=\"nofollow noreferrer\">https://developer.android.com/jetpack/androidx/releases/room#2.1.0</a></p>\n\n<h3>Older versions</h3>\n\n<p>Change the interface to an abstract class. You'll have to prefix all methods without implementation with <code>abstract</code>. Then:</p>\n\n<pre><code>abstract class ConfigDao(private val db: MyDatabase) {\n\n    private val scheduler = Schedulers.from(db.queryExecutor)\n\n    // Make sure the method is open so Room can generate the transaction handling code.\n    @Transaction\n    open fun updateConfigTransaction(configSelected: Config){\n        // ...\n    }\n\n    fun updateConfigTransactionAsync(configSelected: config): Completable {\n        return Completable\n            .fromAction { updateConfigTransaction(config) }\n            .subscribeOn(scheduler)\n    }\n}\n</code></pre>\n\n<p><code>subscribeOn(db.queryExecutor)</code> makes sure the query runs on the same thread as all other DAO methods returning RxJava types. Replace <code>MyDatabase</code> constructor parameter with whatever your database class is.</p>\n"}], "owner": {"reputation": 598, "user_id": 4775484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YVy05.jpg?s=128&g=1", "display_name": "Gustavo Mora", "link": "https://stackoverflow.com/users/4775484/gustavo-mora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2478, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1566557731, "creation_date": 1552493379, "question_id": 55146430, "link": "https://stackoverflow.com/questions/55146430/how-return-completable-on-room-transaction-android", "title": "How return completable on room transaction Android", "body": "<p>I need your help please.</p>\n\n<p>I have dao interface that save some configurations:</p>\n\n<pre><code>@Dao interface ConfigDao {\n    @Insert(onConflict = OnConflictStrategy.REPLACE)\n    fun insert(config: Config)\n\n    @Update(onConflict = OnConflictStrategy.REPLACE)\n    fun update(config: Config)\n\n    @Query(\"select * from T_CONFIG where isSelected = :isSelected\")\n    fun getConfig(isSelected: Boolean): Single&lt;Config&gt;\n\n    @Query(\"select * from t_config\")\n    fun getConfigAll(): LiveData&lt;MutableList&lt;Config&gt;&gt;\n\n    @Query(\"update T_CONFIG set isSelected = :isSelected where idEnvironment = :id\")\n    fun updateConfigById(id: String, isSelected: Boolean):Completable\n\n    @Transaction\n    fun updateConfigTransaction(configSelected: Config){\n\n        if (configSelected.idEnvironment == Environtment.Type.PRD.toString()){\n            updateConfigById(Environtment.Type.PRD.toString(), false)\n            updateConfigById(Environtment.Type.DEV.toString(), true)\n        }else{\n            updateConfigById(Environtment.Type.PRD.toString(), true)\n            updateConfigById(Environtment.Type.DEV.toString(), false)\n        }\n    }\n}\n</code></pre>\n\n<p>I need to know when the transaction is complete with success or error.\nI tried to implement <code>Completable</code> from <code>io.reactivex</code> but it's not possible.</p>\n"}, {"tags": ["android", "kotlin", "crud"], "comments": [{"owner": {"reputation": 996, "user_id": 6168272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7020a2ed126c086e244188a91ba972?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjan", "link": "https://stackoverflow.com/users/6168272/ranjan"}, "edited": false, "score": 0, "creation_date": 1552493205, "post_id": 55146074, "comment_id": 97033338, "body": "You can do the deletion in MainActivity, not a problem. A better approach would be to use the MVVM pattern. The mistake I did as a beginner was to start adding a lot of functionality in MainActivity and at the end of it all my MainActivity was over 1900 lines, it runs smoothly but just not maintainable."}, {"owner": {"reputation": 361, "user_id": 1777805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdaf9de2700bb00bef887556c62c38c3?s=128&d=identicon&r=PG", "display_name": "gtbono", "link": "https://stackoverflow.com/users/1777805/gtbono"}, "reply_to_user": {"reputation": 996, "user_id": 6168272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7020a2ed126c086e244188a91ba972?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjan", "link": "https://stackoverflow.com/users/6168272/ranjan"}, "edited": false, "score": 0, "creation_date": 1552495810, "post_id": 55146074, "comment_id": 97034921, "body": "@Ranjan Thanks! I will look into that, but the thing I&#39;m most worried about is poluting my MainActivity with two AsyncTask inner classes (for the Read and Delete crud tasks) because I&#39;m using Room, they should be in the MainActivity too, right?"}, {"owner": {"reputation": 996, "user_id": 6168272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7020a2ed126c086e244188a91ba972?s=128&d=identicon&r=PG&f=1", "display_name": "Ranjan", "link": "https://stackoverflow.com/users/6168272/ranjan"}, "edited": false, "score": 0, "creation_date": 1552532732, "post_id": 55146074, "comment_id": 97048752, "body": "No, make a repository/view Model class and do the dB operations there. Room supports live data so that changes can be observed and you can perform your task in separate class and still update your UI without much trouble."}], "owner": {"reputation": 361, "user_id": 1777805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdaf9de2700bb00bef887556c62c38c3?s=128&d=identicon&r=PG", "display_name": "gtbono", "link": "https://stackoverflow.com/users/1777805/gtbono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552492323, "creation_date": 1552492323, "question_id": 55146074, "link": "https://stackoverflow.com/questions/55146074/how-to-better-design-the-delete-operation-in-an-android-crud", "title": "How to better design the delete operation in an Android CRUD", "body": "<p>I am having some questions about how to better design a crud application (specifically the delete operation) on a basic Android CRUD app</p>\n\n<p>The workflow that I'm using is a RecyclerView in my MainActivity, and when I click a fab, I go to a new activity and handle the Add operation there. The same goes for the Edit operation, when I click an item in the list it goes to a new activity and I handle the deletion there.</p>\n\n<p>The problem with the delete operation is that I want to implement a long item click, open a popup and do the deletion. I don't need a new activity.</p>\n\n<p>So, is it better to create a new Acitivity to handle the deletion, don't display any layout, and redirect back to the MainActivity after? Or should I put the deletion logic on the MainActivity inside a onClickListener? I'm really confused on how to do this in a clean way</p>\n"}, {"tags": ["android", "mvvm", "kotlin", "android-room", "coroutine"], "comments": [{"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 1, "creation_date": 1552493108, "post_id": 55145822, "comment_id": 97033267, "body": "<code>runBlocking</code> blocks the current thread, are you sure you want to use it?"}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "reply_to_user": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 0, "creation_date": 1552493300, "post_id": 55145822, "comment_id": 97033409, "body": "how else do I call withContext and get a response cant use launch as it returns a job?"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 1, "creation_date": 1552494590, "post_id": 55145822, "comment_id": 97034205, "body": "<code>launch</code> is used to start a non-blocking coroutine. You can create a function that wraps <code>launch</code> call and returns <code>Unit</code> if you don&#39;t want your function returns <code>Job</code>."}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "reply_to_user": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 0, "creation_date": 1552494714, "post_id": 55145822, "comment_id": 97034291, "body": "Ok but what if I want to return Int?"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 1, "creation_date": 1552495424, "post_id": 55145822, "comment_id": 97034703, "body": "Using coroutines you can&#39;t return a value without blocking a thread. If you have <code>MutableLiveData</code> object in <code>ViewModel</code> you can use it to update UI: <code>launch { liveData.value = wordRepository.deleteAllLogsOlderThan(XDays)}</code>"}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "reply_to_user": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 0, "creation_date": 1552500248, "post_id": 55145822, "comment_id": 97037407, "body": "Ok so the solution is to change the WordViewModel to be suspending and work up the chain so that the object that calls this function runs in its own custom scope or GlobalScope as the response is not needed outside the function call.  as I am calling it from the Application main."}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "reply_to_user": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 0, "creation_date": 1552500485, "post_id": 55145822, "comment_id": 97037525, "body": "So the repo has this  <code>@WorkerThread override suspend fun deleteAllLogsOlderThan(XDays: Int): Int = wordDao.deleteAll()</code>  The wordViewModel has <code>suspend fun deleteAllLogsOlderThan(XDays:Int): Int = wordRepository.deleteAllLogsOlderThan(XDays)</code>  and then the Log Object calls this <code>suspend fun purgeOldLogsGreaterThan(XDays: Int): Int {         return wordViewModel.deleteAllLogsOlderThan(XDays) }</code>  and then called from the application <code>GlobalScope.launch {           Log.i(&quot;Log&quot;, &quot;Purging ${LogA.purgeOldLogsGreaterThan(xDays)} logs which where older than $xDays old&quot;)             }</code>"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 1, "creation_date": 1552501355, "post_id": 55145822, "comment_id": 97037989, "body": "I prefer launching a coroutine in <code>ViewModel</code> or <code>Presenter</code>, using a local scope. So that a coroutine is started in <code>WordViewModel</code>&#39;s <code>deleteAllLogsOlderThanA</code> function"}, {"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "reply_to_user": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 0, "creation_date": 1552501483, "post_id": 55145822, "comment_id": 97038056, "body": "Right, but in this case, the call to the database is completely self-contained not needing to access the ViewModel or anything.  Basically a Run and Forget."}], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "edited": false, "score": 0, "creation_date": 1552510819, "post_id": 55150981, "comment_id": 97042556, "body": "Thank you :) I was thinking Version A but my main reason was your C only so the other reasons are very helpful.  I will definitely check out the 2 google sample projects."}, {"owner": {"reputation": 762, "user_id": 9163128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhkjI.png?s=128&g=1", "display_name": "Viktor Vostrikov", "link": "https://stackoverflow.com/users/9163128/viktor-vostrikov"}, "edited": false, "score": 0, "creation_date": 1559116303, "post_id": 55150981, "comment_id": 99315253, "body": "Where should I create a Coroutine Job then? in viewmodel or in repository? When should i clear in order to prevent memory leaks?"}, {"owner": {"reputation": 2865, "user_id": 6587143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d937e3b76600ab1182224aec4710655?s=128&d=identicon&r=PG&f=1", "display_name": "Sanlok Lee", "link": "https://stackoverflow.com/users/6587143/sanlok-lee"}, "edited": false, "score": 0, "creation_date": 1559155173, "post_id": 55150981, "comment_id": 99336425, "body": "If you are using Android <code>ViewModel</code>, you can create jobs in viewmodel and clear jobs in <a href=\"https://developer.android.com/reference/android/arch/lifecycle/ViewModel#oncleared\" rel=\"nofollow noreferrer\">ViewModel#onCleared</a>"}, {"owner": {"reputation": 6601, "user_id": 2075875, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e0b3e3d0b29b541cd13a60a9236f02ac?s=128&d=identicon&r=PG", "display_name": "Malachiasz", "link": "https://stackoverflow.com/users/2075875/malachiasz"}, "edited": false, "score": 0, "creation_date": 1573217835, "post_id": 55150981, "comment_id": 103819728, "body": "To the (A): Version B assumes that that the repository is on the running thread, but Version A assumes that it&#39;s on a worker thread. Which is worse?"}, {"owner": {"reputation": 2865, "user_id": 6587143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d937e3b76600ab1182224aec4710655?s=128&d=identicon&r=PG&f=1", "display_name": "Sanlok Lee", "link": "https://stackoverflow.com/users/6587143/sanlok-lee"}, "reply_to_user": {"reputation": 6601, "user_id": 2075875, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e0b3e3d0b29b541cd13a60a9236f02ac?s=128&d=identicon&r=PG", "display_name": "Malachiasz", "link": "https://stackoverflow.com/users/2075875/malachiasz"}, "edited": false, "score": 0, "creation_date": 1573237489, "post_id": 55150981, "comment_id": 103829849, "body": "@Malachiasz In version A, ViewModel does not know that repository runs on a worker thread. You could copy-paste ViewModels of Version B to Version A and it may still work. The reverse will likely fail."}, {"owner": {"reputation": 6601, "user_id": 2075875, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e0b3e3d0b29b541cd13a60a9236f02ac?s=128&d=identicon&r=PG", "display_name": "Malachiasz", "link": "https://stackoverflow.com/users/2075875/malachiasz"}, "edited": false, "score": 0, "creation_date": 1573317646, "post_id": 55150981, "comment_id": 103846547, "body": "I take your argument. Switched dispatcher somewhere at the beginning of the call chain doesn&#39;t assure that it&#39;s not switched again somewhere deeper. In other words the langue does not provide a possibility for the caller to bind called method to a given dispatcher. Except by a fragile custom."}, {"owner": {"reputation": 145, "user_id": 4821933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4b3d968b191495c904febb3f915786b?s=128&d=identicon&r=PG&f=1", "display_name": "G_comp", "link": "https://stackoverflow.com/users/4821933/g-comp"}, "edited": false, "score": 0, "creation_date": 1574109202, "post_id": 55150981, "comment_id": 104106331, "body": "What about the pagination library? Is it possible to execute the network call inside the repository and use it in the data source?"}, {"owner": {"reputation": 2865, "user_id": 6587143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d937e3b76600ab1182224aec4710655?s=128&d=identicon&r=PG&f=1", "display_name": "Sanlok Lee", "link": "https://stackoverflow.com/users/6587143/sanlok-lee"}, "edited": false, "score": 0, "creation_date": 1574286750, "post_id": 55150981, "comment_id": 104182959, "body": "I cannot think of any reason that would make it not possible."}], "tags": [], "owner": {"reputation": 2865, "user_id": 6587143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d937e3b76600ab1182224aec4710655?s=128&d=identicon&r=PG&f=1", "display_name": "Sanlok Lee", "link": "https://stackoverflow.com/users/6587143/sanlok-lee"}, "is_accepted": true, "score": 4, "last_activity_date": 1552510130, "creation_date": 1552510130, "answer_id": 55150981, "question_id": 55145822, "link": "https://stackoverflow.com/questions/55145822/which-is-better-to-put-the-coroutine-call-in-the-repository-or-the-viewmodel/55150981#55150981", "title": "Which is better to put the Coroutine call in the Repository or the ViewModel?", "body": "<p>I think either way is fine honestly but if I have to choose I prefer keeping thread related code in the repository layer. (<em>Version A</em> in the example)</p>\n\n<p>My justification:</p>\n\n<p>(A) View Models should not assume how Repositories internally work. <em>Version B</em> implies that the View Model assumes that the Repository will run on the calling thread.</p>\n\n<p>(B) Also, the repository should not depend on other components to use a specific thread to call its method. The repository should be complete by itself.</p>\n\n<p>(C) To avoid code duplication. Having multiple View models calling one repository method is a very common situation. <em>Version A</em> wins in this case because you only need <code>Corountine</code> in one place, the repository.</p>\n\n<p><br></p>\n\n<p>I suggest looking at some of the Google Samples to see where they like to handle <code>Coroutine</code> and data access threading codes.</p>\n\n<ol>\n<li><p><a href=\"https://github.com/googlesamples/android-sunflower/blob/master/app/src/main/java/com/google/samples/apps/sunflower/data/GardenPlantingRepository.kt\" rel=\"nofollow noreferrer\">Sunflower</a> uses <code>Coroutine</code> code in their repository. This is probably particularly useful for you because it includes examples of fire-and-forget type of requests.</p></li>\n<li><p><a href=\"https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/RepoRepository.kt\" rel=\"nofollow noreferrer\">GitHubBrowserRepo</a> does not use <code>Coroutine</code> but the repository keeps reference to the <code>Executor</code> instances that are used when accessing the data.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 6601, "user_id": 2075875, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e0b3e3d0b29b541cd13a60a9236f02ac?s=128&d=identicon&r=PG", "display_name": "Malachiasz", "link": "https://stackoverflow.com/users/2075875/malachiasz"}, "is_accepted": false, "score": 0, "last_activity_date": 1573221987, "creation_date": 1573221987, "answer_id": 58768106, "question_id": 55145822, "link": "https://stackoverflow.com/questions/55145822/which-is-better-to-put-the-coroutine-call-in-the-repository-or-the-viewmodel/58768106#58768106", "title": "Which is better to put the Coroutine call in the Repository or the ViewModel?", "body": "<p>The question is where to specify that repository jobs should run on IO threads pools: </p>\n\n<ul>\n<li>A) In Repository </li>\n<li>B) In ViewModel</li>\n</ul>\n\n<p>Frankly I am not sure which way is better. </p>\n\n<p>B) Having it in ViewModel means more transparency of what runs on which thread. This is also the way I mostly worked with RxJava. As a negative your ViewModel will be cluttered with thread switching (withContext()), while it's actually obvious that all repository job should run on the background thread. So is this extra information any useful?</p>\n\n<p>A) Having it in Repository means more flexibility regarding thread switching in repository and cleaner code in ViewModel. Code will be less explicit from ViewModel point of view about threads. As a negative all repository methods will need to be suspended, so thus usable only from coroutines.</p>\n"}], "owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1540, "favorite_count": 1, "accepted_answer_id": 55150981, "answer_count": 2, "score": 10, "last_activity_date": 1573221987, "creation_date": 1552491590, "question_id": 55145822, "link": "https://stackoverflow.com/questions/55145822/which-is-better-to-put-the-coroutine-call-in-the-repository-or-the-viewmodel", "title": "Which is better to put the Coroutine call in the Repository or the ViewModel?", "body": "<p>Just wondering others opinion I have 2 ways I can go about doing something and was curious which is better (and hopefully why you think so)</p>\n\n<p>I have 2 files WordRepository and WordViewModel.  I can either do the coroutines in the Repo or in the ViewModel both ways work, but hoping someone can give me a clue as to why I would do the coroutines in one or the other and vice versa.</p>\n\n<p>Version A.(Where the coroutine is in the Repo)</p>\n\n<pre><code>WordRepo:\n\nclass WordRepository(private val wordDao: WordDao): WordRepo {\n\n    @WorkerThread\n    override suspend fun deleteAllLogsOlderThan(XDays: Int): Int = withContext(IO) {\n        return@withContext wordDao.deleteAll()\n    }\n\n}\n\nWordViewModel:\n\nclass WordViewModel(private val wordRepository: WordRepo) : ViewModel() {\n\n    fun deleteAllLogsOlderThanA(XDays:Int): Int = runBlocking {\n        wordRepository.deleteAllLogsOlderThan(XDays)\n    }\n\n}\n</code></pre>\n\n<p>Version B.(Where the coroutine is in the ViewModel)</p>\n\n<pre><code>Word Repo:\nclass WordRepository(private val wordDao: WordDao): WordRepo {\n\n    @WorkerThread\n    override suspend fun deleteAllLogsOlderThan(XDays: Int): Int = wordDao.deleteAll()\n\n}\n\nWordViewModel:\nclass WordViewModel(private val wordRepository: WordRepo) : ViewModel() {\n\n    fun deleteAllLogsOlderThanA(XDays:Int): Int = runBlocking {\n            withContext(IO) {\n                wordRepository.deleteAllLogsOlderThan(XDays)\n            }\n        }\n\n}\n</code></pre>\n"}, {"tags": ["android", "canvas", "kotlin", "syntax", "spinner"], "comments": [{"owner": {"reputation": 1602, "user_id": 4745241, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/xoL2Z.jpg?s=128&g=1", "display_name": "Ernest Zamelczyk", "link": "https://stackoverflow.com/users/4745241/ernest-zamelczyk"}, "edited": false, "score": 1, "creation_date": 1552491698, "post_id": 55145689, "comment_id": 97032223, "body": "Is anything selected in the spinner at the time of execution of the drawing code? Maybe you just need to move it into the onSelectionChange listener?"}, {"owner": {"reputation": 129, "user_id": 9114046, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tnMVxZ4ULQw/AAAAAAAAAAI/AAAAAAAAEEA/ZpifFN9091o/photo.jpg?sz=128", "display_name": "David Wenzel", "link": "https://stackoverflow.com/users/9114046/david-wenzel"}, "reply_to_user": {"reputation": 1602, "user_id": 4745241, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/xoL2Z.jpg?s=128&g=1", "display_name": "Ernest Zamelczyk", "link": "https://stackoverflow.com/users/4745241/ernest-zamelczyk"}, "edited": false, "score": 0, "creation_date": 1552493704, "post_id": 55145689, "comment_id": 97033669, "body": "Thank&#39;s, it worked."}, {"owner": {"reputation": 1602, "user_id": 4745241, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/xoL2Z.jpg?s=128&g=1", "display_name": "Ernest Zamelczyk", "link": "https://stackoverflow.com/users/4745241/ernest-zamelczyk"}, "edited": false, "score": 0, "creation_date": 1552549623, "post_id": 55145689, "comment_id": 97053788, "body": "I&#39;ve added my comment as an answer. Please mark it as resolved so the question doesn&#39;t stand unanswered."}], "answers": [{"tags": [], "owner": {"reputation": 1602, "user_id": 4745241, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/xoL2Z.jpg?s=128&g=1", "display_name": "Ernest Zamelczyk", "link": "https://stackoverflow.com/users/4745241/ernest-zamelczyk"}, "is_accepted": true, "score": 1, "last_activity_date": 1552549596, "creation_date": 1552549596, "answer_id": 55157322, "question_id": 55145689, "link": "https://stackoverflow.com/questions/55145689/canvas-doesnt-draw-anything-kotlin/55157322#55157322", "title": "Canvas doesn&#39;t draw anything? Kotlin", "body": "<p>Is anything selected in the spinner at the time of execution of the drawing code? Maybe you just need to move it into the <code>onSelectionChange</code> listener?</p>\n"}], "owner": {"reputation": 129, "user_id": 9114046, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tnMVxZ4ULQw/AAAAAAAAAAI/AAAAAAAAEEA/ZpifFN9091o/photo.jpg?sz=128", "display_name": "David Wenzel", "link": "https://stackoverflow.com/users/9114046/david-wenzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 55157322, "answer_count": 1, "score": 0, "last_activity_date": 1599163919, "creation_date": 1552491226, "last_edit_date": 1599163919, "question_id": 55145689, "link": "https://stackoverflow.com/questions/55145689/canvas-doesnt-draw-anything-kotlin", "title": "Canvas doesn&#39;t draw anything? Kotlin", "body": "<p>When I write this code it doesn't work:</p>\n<pre><code> if(shapeSpinner?.selectedItemPosition == 0){\n            canvas.drawCircle((0..dimensionX).random().toFloat(), (0..dimensionY).random().toFloat(), (0..dimensionX).random().toFloat(), paint)\n }\n if(shapeSpinner?.selectedItemPosition == 1){\n            canvas.drawRect((0..dimensionX).random().toFloat(), (0..dimensionY).random().toFloat(), (0..dimensionX).random().toFloat(), (0..dimensionY).random().toFloat(), paint)\n }\n</code></pre>\n<p>But when I write this code it works:</p>\n<pre><code> canvas.drawCircle((0..dimensionX).random().toFloat(), (0..dimensionY).random().toFloat(), (0..dimensionX).random().toFloat(), paint)\n</code></pre>\n<p>But I want the user to be able to choose which shape they want to draw.\nWhy doesn't the first code work?</p>\n"}, {"tags": ["java", "amazon-web-services", "kotlin", "aws-lambda", "reflections"], "comments": [{"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1552490426, "post_id": 55145288, "comment_id": 97031354, "body": "You may debug what classloader is there when running under AWS Lambda environment. It might be something that is not supported by Guava, so you do not see your classes at all"}, {"owner": {"reputation": 304, "user_id": 1744885, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/12aae4eb7fe2d8018810077ce01eba6c?s=128&d=identicon&r=PG", "display_name": "Oreex0", "link": "https://stackoverflow.com/users/1744885/oreex0"}, "reply_to_user": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1552490799, "post_id": 55145288, "comment_id": 97031646, "body": "Hmm might be something there, i should check how AWS Corretto-8 handles Reflections"}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 1744885, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/12aae4eb7fe2d8018810077ce01eba6c?s=128&d=identicon&r=PG", "display_name": "Oreex0", "link": "https://stackoverflow.com/users/1744885/oreex0"}, "edited": false, "score": 0, "creation_date": 1552492657, "post_id": 55145638, "comment_id": 97032934, "body": "Thanks!  used one of my own methods that has been used and took that classloader and it works!"}], "tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1552491081, "creation_date": 1552491081, "answer_id": 55145638, "question_id": 55145288, "link": "https://stackoverflow.com/questions/55145288/aws-lambda-and-java-reflections-guava/55145638#55145638", "title": "AWS Lambda and Java Reflections (Guava)", "body": "<p>One more case. You have the</p>\n\n<pre><code>val cl = ClassLoader.getSystemClassLoader()\n</code></pre>\n\n<p>the line in the code. It means it takes the system classloader to scan for classes.</p>\n\n<p>Try using </p>\n\n<pre><code>class SomeClassFromYouCodeNotALibrary\nval cl = SomeClassFromYouCodeNotALibrary::class.java.classLoader\n</code></pre>\n\n<p>That one will work stable, independent from the number of classloaders, that are used in the application. AWS Lambda runtime may have specific classloaders, for example.</p>\n\n<p>If it does not work, try logging the classloader type and classpath, e.g. <code>println(cl)</code> and <code>println((cl as? URLClassLoader).getURLs().joinToString(\", \"))</code></p>\n"}], "owner": {"reputation": 304, "user_id": 1744885, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/12aae4eb7fe2d8018810077ce01eba6c?s=128&d=identicon&r=PG", "display_name": "Oreex0", "link": "https://stackoverflow.com/users/1744885/oreex0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 55145638, "answer_count": 1, "score": 2, "last_activity_date": 1552491081, "creation_date": 1552490083, "question_id": 55145288, "link": "https://stackoverflow.com/questions/55145288/aws-lambda-and-java-reflections-guava", "title": "AWS Lambda and Java Reflections (Guava)", "body": "<p>I am trying to run <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a> reflections in my AWS Lambda function but it seems to not work in production..</p>\n\n<p>The Code i am trying to run is supposed to create a <code>Map&lt;String, Class&gt;</code> with class name and class. </p>\n\n<p>Code: </p>\n\n<pre><code>val converterClassMap by lazy {\nval cl = ClassLoader.getSystemClassLoader()\nClassPath.from(cl).getTopLevelClasses(\"converters\").asSequence().mapNotNull { it.load().kotlin }\n        .filter { it.simpleName?.endsWith(\"Converter\") == true }\n        .associateBy( { it.simpleName }, { it } )\n}\n</code></pre>\n\n<p>Running this code locally works perfectly, but running it in production on a lambda return an error where the map is empty.<br>\n<code>Key PaginationConverter is missing in the map.: java.util.NoSuchElementException</code>  </p>\n\n<p>Has anyone else run into this problem?</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1552489101, "post_id": 55144723, "comment_id": 97030379, "body": "Works in Gradle 5.2.1 and IntelliJ IDEA 2019.1 BETA with Kotlin 1.3.21. The <code>include</code> function should resolve to the <code>CopySpec</code> interface, that is implemented by the <code>ShadowJar</code> class.  you may also check if you do not miss a closing bracket from a junit task definition block"}, {"owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "reply_to_user": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1552490012, "post_id": 55144723, "comment_id": 97031059, "body": "After upgrade to Gradle 5.2.1 - now I get error:  Cannot choose between com.vaadin:vaadin-bom:13.0.1 variant compile and com.vaadin:vaadin-bom:13.0.1 variant enforced-platform-compile because they provide the same capability: com.vaadin:vaadin-bom:13.0.1 . I updated my post"}, {"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1552490242, "post_id": 55144723, "comment_id": 97031210, "body": "Try killing all Gradle processes and doing a clean start. Does it work from the console?"}, {"owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "reply_to_user": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1552491124, "post_id": 55144723, "comment_id": 97031864, "body": "I delete folder &quot;build&quot; and then: gradlew clean assemble. But I get same error: Cannot choose between com.vaadin:vaadin-bom:13.0.1 variant compile and com.vaadin:vaadin-bom:13.0.1 ..."}], "owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552489979, "creation_date": 1552488473, "last_edit_date": 1552489979, "question_id": 55144723, "link": "https://stackoverflow.com/questions/55144723/gradle-kotlin-script-include-none-of-the-following-functions-can-be-called", "title": "Gradle Kotlin script: &quot;Include&quot; - None of the following functions can be called with the arguments supplied", "body": "<p>IntelIJ IDEA 2018.3 \nGradle 5.1.</p>\n\n<p>In my Kotlin script</p>\n\n<p>build.gradle.kts</p>\n\n<pre><code>build.gradle.kts\n\n\nplugins {\n    kotlin(\"jvm\") version \"1.3.20\"\n    id(\"com.github.johnrengelman.shadow\") version \"4.0.3\"\n    id(\"com.devsoap.vaadin-flow\") version \"1.0\"\n    id(\"org.gretty\") version \"2.3.1\"\n}\n\nval kotlinVersion = \"1.3.20\" //by extra(\"1.3.20\")\nval jettyVersion = \"9.4.14.v20181114\"\nval vaadinVersion = \"12.0.4\"\n\ndependencies {\n    //  Plugins\n    implementation(kotlin(\"stdlib-jdk8\"))\n    implementation(\"com.github.jengelman.gradle.plugins:shadow:4.0.3\")\n    //\n    implementation(\"org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion\")\n    //  Vaadin\n    implementation(\"com.vaadin:vaadin-bom:$vaadinVersion\")\n    implementation(\"com.vaadin:vaadin-core:$vaadinVersion\")\n}\n\nval shadowJar by tasks.getting(ShadowJar::class) {\n    manifest.attributes[\"Main-Class\"] = \"com.myproject.Main\" \n\n    mergeServiceFiles()\n\n    include(\"frontend/*/*.*\") // error here\n}\n</code></pre>\n\n<p>But I get error in IntelIJ IDEA:</p>\n\n<p><a href=\"https://i.stack.imgur.com/j2V9A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j2V9A.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["spring-boot", "kotlin", "spring-data-jpa"], "answers": [{"tags": [], "owner": {"reputation": 914, "user_id": 1855579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c12dae444eb9f0100b4ea20ee2cf3ed3?s=128&d=identicon&r=PG", "display_name": "Vlad Dinulescu", "link": "https://stackoverflow.com/users/1855579/vlad-dinulescu"}, "is_accepted": true, "score": 1, "last_activity_date": 1552488668, "creation_date": 1552488668, "answer_id": 55144796, "question_id": 55144609, "link": "https://stackoverflow.com/questions/55144609/how-to-make-jparepository-only-save-the-ids-that-do-not-yet-exist/55144796#55144796", "title": "How to make JpaRepository only save the IDs that do not yet exist?", "body": "<p>If you put the above loop within a @Transactional method, you should have only 1 transaction - with lots of INSERT-s and SELECT-s, of course, but 1 transaction. This would relieve the burden on the DB. </p>\n\n<p>Also, save() is the proper method to call in this case. There's also a method called saveAndFlush() which is the opposite of what you want.</p>\n\n<p>You could also limit the number of SELECTs by doing repo.findAllById() instead of lots of findById().</p>\n"}], "owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 55144796, "answer_count": 1, "score": 0, "last_activity_date": 1552488668, "creation_date": 1552488159, "question_id": 55144609, "link": "https://stackoverflow.com/questions/55144609/how-to-make-jparepository-only-save-the-ids-that-do-not-yet-exist", "title": "How to make JpaRepository only save the IDs that do not yet exist?", "body": "<p>Given a table:</p>\n\n<pre><code>CREATE TABLE mytable (\n    some_id      BIGINT PRIMARY KEY NOT NULL,\n    timestamp    TIMESTAMP WITH TIME ZONE NOT NULL\n);\n</code></pre>\n\n<p>An entity:</p>\n\n<pre><code>@Entity\n@Table(name = \"mytable\")\nclass Thing(\n        @Id\n        var some_id: Long,\n        var timestamp = ZonedDateTime.now()\n)\n</code></pre>\n\n<p>A repository:</p>\n\n<pre><code>interface MyRepo : JpaRepository&lt;Thing, Long&gt;\n</code></pre>\n\n<p>And this loop:</p>\n\n<pre><code>val myRepo: MyRepo\n\nwhile (True) {\n    val some_id: Long = ComesFromSomewhere()\n    if (myRepo.findById(some_id) == null) {\n        myRepo.save(Thing(some_id))\n    }\n}\n</code></pre>\n\n<p>The intention is to only store a timestamp for an ID the first time this ID occurs.</p>\n\n<p>The code above works, but results in over 100 <code>save</code> transactions per second in my use case, which puts heavy load on the DB. So I'd like to optimize, accumulate a batch of <code>Thing</code>s and then use something like <code>saveAll</code> to have everything in one transaction.</p>\n\n<p>Just using <code>saveAll</code> however would also overwrite the timestamps of the IDs already present in the table, which is not intended.</p>\n\n<p>How can this be solved, ideally without too much low-level code?</p>\n"}, {"tags": ["java", "kotlin", "lambda", "java-8", "java-stream"], "comments": [{"owner": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 0, "creation_date": 1552485841, "post_id": 55143744, "comment_id": 97027873, "body": "I am <i>really</i> confused what you are trying to achive with those two pieces of code. Please elaborate with sample input, expected and actual output. Also read how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 13, "user_id": 7327019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a961d39ef675bcfa6e1a37f53e87478f?s=128&d=identicon&r=PG&f=1", "display_name": "user7327019", "link": "https://stackoverflow.com/users/7327019/user7327019"}, "reply_to_user": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 0, "creation_date": 1552486528, "post_id": 55143744, "comment_id": 97028421, "body": "There is a list of colors, blue red green yellow black, and a list of numbers, 1-30, with values between 0 and 4. First piece of code works in kotlin, assigning a color corresponding to the number value, and outputting the number of times each color occurs. Now I need to convert it into Java 8. The expected output is as I posted above, and the actual output is nothing, as nothing prints."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7327019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a961d39ef675bcfa6e1a37f53e87478f?s=128&d=identicon&r=PG&f=1", "display_name": "user7327019", "link": "https://stackoverflow.com/users/7327019/user7327019"}, "edited": false, "score": 0, "creation_date": 1552486385, "post_id": 55143794, "comment_id": 97028306, "body": "Hi thank you for the reply, however I get a &quot;cannot resolve method sum()&quot; just on the last line, any idea why?"}, {"owner": {"reputation": 46273, "user_id": 574479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/79f682361ccbe900f8846a1098d13921?s=128&d=identicon&r=PG", "display_name": "biziclop", "link": "https://stackoverflow.com/users/574479/biziclop"}, "edited": false, "score": 0, "creation_date": 1552486424, "post_id": 55143794, "comment_id": 97028329, "body": "Or to be more idiomatic, you can simply do <code>.filter(c -&gt; c == cols).count();</code>."}, {"owner": {"reputation": 22888, "user_id": 7606764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff66904cb49ba020965898e8dd6b9d1?s=128&d=identicon&r=PG&f=1", "display_name": "Andronicus", "link": "https://stackoverflow.com/users/7606764/andronicus"}, "edited": false, "score": 0, "creation_date": 1552486540, "post_id": 55143794, "comment_id": 97028430, "body": "Yes, that&#39;s much better, I&#39;ve changed it, thank you;)"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1552494963, "post_id": 55143794, "comment_id": 97034418, "body": "<code>==</code> may need to be <code>equals</code> (depends on <code>c</code>&#39;s type)."}], "tags": [], "owner": {"reputation": 22888, "user_id": 7606764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff66904cb49ba020965898e8dd6b9d1?s=128&d=identicon&r=PG&f=1", "display_name": "Andronicus", "link": "https://stackoverflow.com/users/7606764/andronicus"}, "is_accepted": true, "score": 2, "last_activity_date": 1552495078, "last_edit_date": 1552495078, "creation_date": 1552485838, "answer_id": 55143794, "question_id": 55143744, "link": "https://stackoverflow.com/questions/55143744/converting-kotlin-lambda-expression-to-java/55143794#55143794", "title": "Converting Kotlin Lambda Expression to Java", "body": "<p>Kotlin's <code>count</code> takes a lambda returning boolean as a parameter and counts only elements, that fulfill the predicate. You need to sum the occurrences (filter idea comes from @biziclop, thank you):</p>\n\n<pre><code>colors.stream().forEach(cols -&gt;\n        System.out.println(cols + \" count: \" + numbers2\n                        .mapToObj(i -&gt; colors[i])\n                        .filter(c -&gt; c.equals(cols))\n                        .count()\n                ));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "is_accepted": false, "score": 2, "last_activity_date": 1552486228, "creation_date": 1552486228, "answer_id": 55143904, "question_id": 55143744, "link": "https://stackoverflow.com/questions/55143744/converting-kotlin-lambda-expression-to-java/55143904#55143904", "title": "Converting Kotlin Lambda Expression to Java", "body": "<p>You possibly need the count <code>groupingBy</code> color as:</p>\n\n<pre><code>List&lt;String&gt; input = new ArrayList&lt;&gt;(); // initialised with colors\n\nMap&lt;String, Long&gt; colorCount = input.stream()\n                   .collect(Collectors.groupingBy(i -&gt; i, Collectors.counting()));\n\ncolorCount.forEach((k,v) -&gt; System.out.println(k + \" count: \" + v));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9498, "user_id": 5176992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uER9z.png?s=128&g=1", "display_name": "Eritrean", "link": "https://stackoverflow.com/users/5176992/eritrean"}, "is_accepted": false, "score": 0, "last_activity_date": 1552487472, "creation_date": 1552487472, "answer_id": 55144354, "question_id": 55143744, "link": "https://stackoverflow.com/questions/55143744/converting-kotlin-lambda-expression-to-java/55144354#55144354", "title": "Converting Kotlin Lambda Expression to Java", "body": "<p>I assume you have something like this:</p>\n\n<pre><code>List&lt;String&gt; colors   = Arrays.asList(\"blue\",\"red\", \"green\", \"yellow\", \"black\");\nList&lt;Integer&gt; numbers = Arrays.asList(1,3,0,0,2,3,1,4,0,2,4,3,3,3,2,0);\n</code></pre>\n\n<p>the values in the numbers list corresponding to the indices in the colors list. If that is the case then do something like what @Naman already suggested:</p>\n\n<pre><code>Map&lt;String, Long&gt; colorCount = numbers.stream()\n               .collect(Collectors.groupingBy(i -&gt; colors.get(i), Collectors.counting()));\n\ncolorCount.forEach((k,v) -&gt; System.out.println(k + \" count: \" + v));\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7327019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a961d39ef675bcfa6e1a37f53e87478f?s=128&d=identicon&r=PG&f=1", "display_name": "user7327019", "link": "https://stackoverflow.com/users/7327019/user7327019"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 55143794, "answer_count": 3, "score": -2, "last_activity_date": 1562874246, "creation_date": 1552485691, "last_edit_date": 1562874246, "question_id": 55143744, "link": "https://stackoverflow.com/questions/55143744/converting-kotlin-lambda-expression-to-java", "title": "Converting Kotlin Lambda Expression to Java", "body": "<p>I need to convert the following to Java 8, however I am unsure of the syntax required. </p>\n\n<pre><code>val iterator = color.toList().iterator()\niterator.forEach { cols-&gt;\n\n    println(\"$cols count: \" + \n            (numbers\n            .map{a -&gt; colors[a]}                                           \n            .count{it == (cols)})\n)\n}\n</code></pre>\n\n<p>There are 30 numbers from 1-5, corresponding to a Array of strings (colors, in a List arraylist)</p>\n\n<p>I must count the occurences of each color, for example </p>\n\n<pre><code>green count:9\n\nred count:3\n</code></pre>\n\n<p>This is what I've got so far</p>\n\n<pre><code>    List&lt;String&gt; colors = new ArrayList&lt;&gt;();\n    //list filled\n\n    colors.stream().forEach(cols -&gt;\n            System.out.println(cols + \" count: \" + numbers2\n                            .mapToObj(i -&gt; colorsarray[i])\n                            .count()\n                    ));\n</code></pre>\n\n<p>However it does not print anything. colorsarray[] is a normal String array with the same values as the ArrayList, but I made the arraylist as I didnt know how to do lambda operations with a normal array. </p>\n"}, {"tags": ["kotlin", "entity", "android-room", "dto", "conventions"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 8526518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bfad362140b492dc16248ff13c039b1?s=128&d=identicon&r=PG&f=1", "display_name": "Adama Traore", "link": "https://stackoverflow.com/users/8526518/adama-traore"}, "is_accepted": false, "score": 0, "last_activity_date": 1616618468, "creation_date": 1616618468, "answer_id": 66789052, "question_id": 55143486, "link": "https://stackoverflow.com/questions/55143486/android-kotlin-room-entity-data-class-should-be-var-val-or-dont-care/66789052#66789052", "title": "Android Kotlin Room Entity data class should be var, val or don&#39;t care?", "body": "<p>a bit late but maybe some are looking for an answer. To make it short : it doesn't matter.\nwhen specify parameters val is used to create getters only, var creates both getters and setters for properties.</p>\n"}], "owner": {"reputation": 115, "user_id": 10263845, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--_FoYt2bfAc/AAAAAAAAAAI/AAAAAAAADdg/gfkmQlrv7Gs/photo.jpg?sz=128", "display_name": "MrGyovka", "link": "https://stackoverflow.com/users/10263845/mrgyovka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1616618468, "creation_date": 1552484962, "last_edit_date": 1559891873, "question_id": 55143486, "link": "https://stackoverflow.com/questions/55143486/android-kotlin-room-entity-data-class-should-be-var-val-or-dont-care", "title": "Android Kotlin Room Entity data class should be var, val or don&#39;t care?", "body": "<p>I am trying to be conventional, that is why I am refactoring some Kotlin codes in an Android project last few days. \nI looked at many Room entity data class example, but still not get the best practice of use of val/var in the context of Room. \nI suspect that the suitable way should be val since it is at the persistence layer and DTO (Data Transfer Objects) should be created about these entities which can be modified.\nCan someone please assure or deny this hypothesis!?</p>\n"}, {"tags": ["gradle", "kotlin", "shadowjar"], "answers": [{"tags": [], "owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "is_accepted": true, "score": 2, "last_activity_date": 1552483808, "last_edit_date": 1592644375, "creation_date": 1552483808, "answer_id": 55143073, "question_id": 55142586, "link": "https://stackoverflow.com/questions/55142586/not-work-include-in-kotlin-script-unexpected-tokens-use-to-separate-ex/55143073#55143073", "title": "Not work &quot;include&quot; in Kotlin script: ^ Unexpected tokens (use &#39;;&#39; to separate expressions on the same line)", "body": "<p>Need to use double quotes for strings and (...) around function arguments. It is the first 2 things mentioned in the docs for converting Groovy build scripts to Kotlin. <a href=\"https://guides.gradle.org/migrating-build-logic-from-groovy-to-kotlin/#prepare_your_groovy_scripts\" rel=\"nofollow noreferrer\">https://guides.gradle.org/migrating-build-logic-from-groovy-to-kotlin/#prepare_your_groovy_scripts</a></p>\n<blockquote>\n<p><em>Prepare your Groovy scripts</em></p>\n<p>Some simple Kotlin and Groovy language differences can make converting scripts tedious:</p>\n<ul>\n<li><p>Groovy strings can be quoted with single quotes 'string' or double quotes &quot;string&quot; whereas Kotlin requires double quotes &quot;string&quot;.</p>\n</li>\n<li><p>Groovy allows to omit parentheses when invoking functions whereas Kotlin always requires the parentheses.</p>\n</li>\n</ul>\n</blockquote>\n"}], "owner": {"reputation": 8644, "user_id": 6813231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/gy8Sg.jpg?s=128&g=1", "display_name": "a_subscriber", "link": "https://stackoverflow.com/users/6813231/a-subscriber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2008, "favorite_count": 0, "accepted_answer_id": 55143073, "answer_count": 1, "score": 0, "last_activity_date": 1552483808, "creation_date": 1552482291, "last_edit_date": 1552482648, "question_id": 55142586, "link": "https://stackoverflow.com/questions/55142586/not-work-include-in-kotlin-script-unexpected-tokens-use-to-separate-ex", "title": "Not work &quot;include&quot; in Kotlin script: ^ Unexpected tokens (use &#39;;&#39; to separate expressions on the same line)", "body": "<p>In my <strong>build.gradle.kts</strong>:</p>\n\n<pre><code>   val shadowJar by tasks.getting(ShadowJar::class) {\n    include '*.properties'\n}\n</code></pre>\n\n<p>But I get error:</p>\n\n<pre><code>Script compilation errors:\n\n  Line 93:     include '*.properties'\n                       ^ Unexpected tokens (use ';' to separate expressions on the same line)\n\n  Line 93:     include '*.properties'\n               ^ Function invocation 'include(...)' expected\n\n2 errors\nOpen File\n</code></pre>\n"}, {"tags": ["android", "generics", "kotlin", "interface", "fragment"], "answers": [{"tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": false, "score": 4, "last_activity_date": 1552480442, "creation_date": 1552480442, "answer_id": 55142069, "question_id": 55141835, "link": "https://stackoverflow.com/questions/55141835/kotlin-casting-an-object-to-generic-class/55142069#55142069", "title": "Kotlin : Casting an object to Generic class", "body": "<p>Kotlin, Java and JVM do have types erasure when Generics are implemented. Generics are not visible at the bytecode level. It means, you cannot use type parameters, e.g. <code>T</code>, directly in the function code. </p>\n\n<p>Kotlin adds support for <code>reified</code> generics, which helps here. You may declare the function like</p>\n\n<pre><code>inline fun &lt;reified T&gt; getIt() : T {\n  ...\n}\n</code></pre>\n\n<p>With the help of <code>reified</code> and <code>inline</code> it will be possible to cast to <code>T</code> and return it.\n<a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters</a></p>\n\n<p>The second alternative is to follow a Java practice - add the <code>Class&lt;T&gt;</code> parameter to the function and use <code>Class#cast</code> to cast to <code>T</code> instead. </p>\n\n<p>You may combine the <code>reified inline</code> function with the approach like:</p>\n\n<pre><code>inline fun &lt;reified T&gt; getIt() = getIt(T::class.java)\n</code></pre>\n"}], "owner": {"reputation": 2445, "user_id": 2389923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9332842a945234c71e89f9b9780447?s=128&d=identicon&r=PG", "display_name": "beigirad", "link": "https://stackoverflow.com/users/2389923/beigirad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1987, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1552480999, "creation_date": 1552479824, "last_edit_date": 1552480999, "question_id": 55141835, "link": "https://stackoverflow.com/questions/55141835/kotlin-casting-an-object-to-generic-class", "title": "Kotlin : Casting an object to Generic class", "body": "<p>How get the type of a Generic class and cast an object to it?</p>\n\n<p>I want to use this function to pass an Interface class:</p>\n\n<pre><code>protected fun &lt;T&gt; getInteraction(): T {\n        return when {\n            context is T -&gt; context\n            parentFragment is T -&gt; parentFragment as T\n            else -&gt; throw IllegalArgumentException(\"not implemented interaction\")\n        }\n    }\n</code></pre>\n\n<p>and use it like:</p>\n\n<pre><code> private var interaction: ISigninInteraction? = null\n\n override fun onAttach(context: Context?) {\n        super.onAttach(context)\n        interaction = getInteraction&lt;ISigninInteraction&gt;()\n\n }\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 1, "creation_date": 1552481609, "post_id": 55141675, "comment_id": 97024923, "body": "Is it because if you define <code>item</code> in the lambda you&#39;re telling the compiler that the lambda has only one parameter, so it can infer which overload you mean? If you don&#39;t specify a lambda parameter it can&#39;t do that so can&#39;t choose which overload you mean?"}, {"owner": {"reputation": 65664, "user_id": 3998402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1deae6b5ee0cdf29e9a4d9f219f547a?s=128&d=identicon&r=PG&f=1", "display_name": "humazed", "link": "https://stackoverflow.com/users/3998402/humazed"}, "reply_to_user": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 0, "creation_date": 1552489629, "post_id": 55141675, "comment_id": 97030787, "body": "why it&#39;s different from <code>setOnClickListener {view-&gt; }</code> and <code>setOnClickListener { }</code> both work. but in my case <code>onItemClick { item-&gt; }</code> only work"}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 1, "creation_date": 1552496821, "post_id": 55141675, "comment_id": 97035547, "body": "Does <code>setOnClickListener</code> have multiple overloads like yours, each receiving a lambda, where the only difference is the signature of the lambda?  (Forgive my ignorance: I don&#39;t code on Android, just server-side Kotlin.)"}, {"owner": {"reputation": 65664, "user_id": 3998402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1deae6b5ee0cdf29e9a4d9f219f547a?s=128&d=identicon&r=PG&f=1", "display_name": "humazed", "link": "https://stackoverflow.com/users/3998402/humazed"}, "reply_to_user": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 0, "creation_date": 1552508131, "post_id": 55141675, "comment_id": 97041330, "body": "No, <code>setOnClickListener</code> doesn&#39;t have overloads, is there somewhere in the docs that mention that having multiple overloads prevent the type inference. because I guess it&#39;s reasonable to guess that when not explicitly defining the parameter the compiler will pick the overload with the single parameter especially when I don&#39;t have an overload with no parameters."}, {"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 1, "creation_date": 1552551776, "post_id": 55141675, "comment_id": 97054831, "body": "Cool, so that explains why <code>setOnClickListener</code> works and yours doesn&#39;t. As to your question about why the single-parameter overload isn&#39;t inferred: no, I&#39;ve not seen anywhere in the docs that explicitly states this. Maybe if someone else does they can post a link here. As you say, I can see how it would make sense for the compiler to infer it, but can also see arguments for this being slightly unintuitive, which is maybe why JetBrains didn&#39;t implement it that way."}], "owner": {"reputation": 65664, "user_id": 3998402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1deae6b5ee0cdf29e9a4d9f219f547a?s=128&d=identicon&r=PG&f=1", "display_name": "humazed", "link": "https://stackoverflow.com/users/3998402/humazed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1050, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552479647, "creation_date": 1552479303, "last_edit_date": 1552479647, "question_id": 55141675, "link": "https://stackoverflow.com/questions/55141675/cannot-choose-among-the-following-candidates-without-completing-type-inference", "title": "Cannot choose among the following candidates without completing type inference", "body": "<p>I have these three helper extensions: </p>\n\n<pre><code>fun &lt;T, K : BaseViewHolder&gt; BaseQuickAdapter&lt;T, K&gt;.onItemClick(\n        onItemClick: (adapter: BaseQuickAdapter&lt;*, *&gt;, position: Int, item: T) -&gt; Unit\n): BaseQuickAdapter&lt;T, K&gt; {\n    setOnItemClickListener { adapter, _, position -&gt;\n        onItemClick(adapter, position, data[position])\n    }\n    return this\n}\n\nfun &lt;T, K : BaseViewHolder&gt; BaseQuickAdapter&lt;T, K&gt;.onItemClick(\n        onItemClick: (position: Int, item: T) -&gt; Unit\n): BaseQuickAdapter&lt;T, K&gt; =\n        onItemClick { _, position, item -&gt; onItemClick(position, item) }\n\nfun &lt;T, K : BaseViewHolder&gt; BaseQuickAdapter&lt;T, K&gt;.onItemClick(\n        onItemClick: (item: T) -&gt; Unit\n): BaseQuickAdapter&lt;T, K&gt; =\n        onItemClick { _, item -&gt; onItemClick(item) }\n</code></pre>\n\n<p>every <code>onItemClick</code> function takes one argument less that the previous one</p>\n\n<p>when I call:</p>\n\n<pre><code>onItemClick { item -&gt;  \n}\n</code></pre>\n\n<p>everything works fine as expected and the last method is called.</p>\n\n<p>but when I remove the explicit <code>item</code> ad try to use <code>it</code> </p>\n\n<pre><code>onItemClick {\n    it.doStuff()\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>Cannot choose among the following candidates without completing type inference:\npublic fun &lt;T, K : BaseViewHolder&gt; BaseQuickAdapter&lt;T#1 (type parameter of humazed.github.com.kotlinandroidutils.simpleAdapter), KBaseViewHolder&gt;.onItemClick(onItemClick: (adapter: BaseQuickAdapter&lt;*, *&gt;, position: Int, item: T#1) \u2192 Unit): BaseQuickAdapter&lt;T#1, KBaseViewHolder&gt; defined in humazed.github.com.kotlinandroidutils\npublic fun &lt;T, K : BaseViewHolder&gt; BaseQuickAdapter&lt;T#1, KBaseViewHolder&gt;.onItemClick(onItemClick: (item: T#1) \u2192 Unit): BaseQuickAdapter&lt;T#1, KBaseViewHolder&gt; defined in humazed.github.com.kotlinandroidutils\npublic fun &lt;T, K : BaseViewHolder&gt; BaseQuickAdapter&lt;T#1, KBaseViewHolder&gt;.onItemClick(onItemClick: (position: Int, item: T#1) \u2192 Unit): BaseQuickAdapter&lt;T#1, KBaseViewHolder&gt; defined in humazed.github.com.kotlinandroidutils\n</code></pre>\n\n<p>the full <a href=\"https://github.com/humazed/KotlinAndroidUtils/blob/03aea7aaa420af0cc2fc9bf924951e9fbb5ba3de/kotlin-android-utils/src/main/java/humazed/github/com/kotlinandroidutils/BaseRecyclerViewAdapterHelperUtils.kt#L33\" rel=\"nofollow noreferrer\">code on GitHub</a></p>\n\n<p>I'm aware there are similar questions on SOF but they are not the same as mine and the answers don't apply here.</p>\n"}, {"tags": ["javafx", "kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 5, "last_activity_date": 1552480475, "creation_date": 1552480475, "answer_id": 55142073, "question_id": 55141548, "link": "https://stackoverflow.com/questions/55141548/format-text-of-label/55142073#55142073", "title": "format text of Label", "body": "<p>You could create a stringbinding which holds the value you want to display in the label and then bind the label's value property to that:</p>\n\n<pre><code>val prop = SimpleIntegerProperty(1)\nval propDesc = prop.stringBinding { \"%+d\".format(it) }\n</code></pre>\n\n<p>Now you can do:</p>\n\n<pre><code>label(propDesc)\n</code></pre>\n\n<p>The label will update whenever the property changes value.</p>\n\n<p>You can of course also inline it:</p>\n\n<pre><code>label(prop.stringBinding { \"%+d\".format(it) })\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 8886087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f67351afebf42a46899145a557f7795?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/8886087/pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 55142073, "answer_count": 1, "score": 3, "last_activity_date": 1578253706, "creation_date": 1552478853, "last_edit_date": 1578253706, "question_id": 55141548, "link": "https://stackoverflow.com/questions/55141548/format-text-of-label", "title": "format text of Label", "body": "<p>I have a label in a view that is controlled by a integer property, when the value is negative it displays with a minus sign, when the value is positive it does not. However, I would like the Label to display \"+5\", \"-3\" ...</p>\n\n<p>take the following code as an example</p>\n\n<pre><code>import javafx.beans.property.SimpleIntegerProperty\nimport tornadofx.*\n\nclass MyView : View() {\n\n   val negProp = SimpleIntegerProperty(-3) // this prop is in a ItemViewModel\n   val posProp = SimpleIntegerProperty(+4) // this prop is in a ItemViewModel\n\n    override val root = hbox {\n        label(negProp)      // shows - 3\n        label(posProp)      // shows 4\n    }\n}\n</code></pre>\n\n<p>Is there a way I can format the text once the property changes ? \nThank you.</p>\n"}, {"tags": ["android", "kotlin", "parse-platform"], "answers": [{"tags": [], "owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "is_accepted": true, "score": 0, "last_activity_date": 1552486955, "creation_date": 1552486955, "answer_id": 55144160, "question_id": 55141525, "link": "https://stackoverflow.com/questions/55141525/error-after-parse-query-from-local-datastore/55144160#55144160", "title": "Error after Parse query from local datastore", "body": "<p>Your cast is invalid because types are not convertible: <code>objectList</code> is of type <code>AbstractList</code> and that cannot be hard casted to <code>ArrayList</code> like that.</p>\n\n<p>Instead, use <code>Arrays.asList(objectList)</code>, I think it has its own implementation and translates the abstract list.</p>\n"}], "owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 55144160, "answer_count": 1, "score": 0, "last_activity_date": 1552486955, "creation_date": 1552478774, "question_id": 55141525, "link": "https://stackoverflow.com/questions/55141525/error-after-parse-query-from-local-datastore", "title": "Error after Parse query from local datastore", "body": "<p>I'm using Parse.com library and I want to query from local datastore if user lost access to internet (query on pinned items from previous app usage). Problem is that if use offline query it will not return <code>List&lt;Object&gt;</code> but weird <code>AbstractList</code> and I don't know how to convert it to ArrayList. </p>\n\n<p>Anyone had this issue?</p>\n\n<p>API call:</p>\n\n<pre><code>fun getFilteredObjects(c: Context, searchQuery: String?, filteredObjectsCallback: (ArrayList&lt;ParseObject&gt;?, ParseException?) -&gt; Unit){\n            val q = ParseQuery.getQuery&lt;ParseObject&gt;(OBJECT_CLASS)\n            if (!isOnline(c)) q.fromLocalDatastore()\n\n            if (searchQuery.isNullOrEmpty()){\n                q.limit = 10\n            } else {\n                q.whereMatches(OBJECT_NAME, searchQuery, \"i\")\n            }\n\n            q.findInBackground { objectList, err -&gt;\n                filteredObjectsCallback(objectList as ArrayList&lt;ParseObject&gt;?, err)\n            }\n        }\n</code></pre>\n\n<p>Error line: <code>filteredObjectsCallback(objectList as ArrayList&lt;ParseObject&gt;?, err)</code></p>\n\n<p>Error:</p>\n\n<pre><code>java.lang.ClassCastException: java.util.AbstractList$SubAbstractListRandomAccess cannot be cast to java.util.ArrayList\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2085, "user_id": 7434090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aEvdO.jpg?s=128&g=1", "display_name": "Gavin Wright", "link": "https://stackoverflow.com/users/7434090/gavin-wright"}, "is_accepted": true, "score": 0, "last_activity_date": 1552480214, "creation_date": 1552480214, "answer_id": 55141974, "question_id": 55141423, "link": "https://stackoverflow.com/questions/55141423/how-to-ignore-single-touch-action-before-two-fingers-touch-in-android-custom-vie/55141974#55141974", "title": "How to ignore single touch action before two fingers touch in android custom view?", "body": "<p>To my mind, the problem is that both fingers aren't likely to touch the screen at the same time when performing a two-finger gesture. But you still want single-finger actions to be displayed right away, so you can't wait to render the single-finger action or else the user will perceive lag. So, what I might try is to render the single-finger action immediately, and then if a second finger is detected within a certain timeframe AND the first finger hasn't moved beyond a certain distance, you undo the single-finger action and instead interpret it as a two-finger action.</p>\n"}], "owner": {"reputation": 15, "user_id": 9277500, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kW8smvDoHus/AAAAAAAAAAI/AAAAAAAAAG8/drUruSBaMXE/photo.jpg?sz=128", "display_name": "hotMule", "link": "https://stackoverflow.com/users/9277500/hotmule"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 55141974, "answer_count": 1, "score": 1, "last_activity_date": 1552485065, "creation_date": 1552478430, "last_edit_date": 1552485065, "question_id": 55141423, "link": "https://stackoverflow.com/questions/55141423/how-to-ignore-single-touch-action-before-two-fingers-touch-in-android-custom-vie", "title": "How to ignore single touch action before two fingers touch in android custom view?", "body": "<p>I need scaling feature in my painting app, so I use ScaleGestureDetector, but when I perform two fingers touch action to zoom - before it triggers single touch action and draws something on Canvas, how can I check, that canvas is zooming now and ignore single touch action? </p>\n\n<pre><code>override fun onTouchEvent(event: MotionEvent): Boolean {\n    scaleDetector.onTouchEvent(event)\n    event.transform(touchMatrix)\n\n    val x = event.x\n    val y = event.y\n\n    when (event.action and MotionEvent.ACTION_MASK) {\n        MotionEvent.ACTION_DOWN -&gt; {\n            presenter.onPlotClick(x, y)\n        }\n        MotionEvent.ACTION_POINTER_DOWN -&gt; {\n\n        }\n        MotionEvent.ACTION_MOVE -&gt; {\n            presenter.onFingerMoveOnPlot(x, y)\n        }\n        MotionEvent.ACTION_POINTER_UP -&gt; {\n\n        }\n        MotionEvent.ACTION_UP -&gt; {\n            presenter.onFingerUpFromPlot()\n        }\n    }\n\n    invalidate()\n    return true\n}\n</code></pre>\n"}, {"tags": ["spring", "kotlin", "jaxb", "netty", "spring-webflux"], "comments": [{"owner": {"reputation": 10749, "user_id": 294657, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bf6a123b877d32265e37c0fb592d5965?s=128&d=identicon&r=PG", "display_name": "kaqqao", "link": "https://stackoverflow.com/users/294657/kaqqao"}, "edited": false, "score": 0, "creation_date": 1552481098, "post_id": 55140490, "comment_id": 97024603, "body": "Strange question. If parsing is slow - it&#39;s slow, what does it matter what kind of application (reactive or not) it is?"}, {"owner": {"reputation": 361, "user_id": 6644514, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/145ba1562b220984be8e2ce467340e33?s=128&d=identicon&r=PG&f=1", "display_name": "Damian U", "link": "https://stackoverflow.com/users/6644514/damian-u"}, "reply_to_user": {"reputation": 10749, "user_id": 294657, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bf6a123b877d32265e37c0fb592d5965?s=128&d=identicon&r=PG", "display_name": "kaqqao", "link": "https://stackoverflow.com/users/294657/kaqqao"}, "edited": false, "score": 0, "creation_date": 1552482306, "post_id": 55140490, "comment_id": 97025352, "body": "I don&#39;t know... I thought maybe JAXBContext blocks threads (maybe is synchronized somewhere)."}, {"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "edited": false, "score": 2, "creation_date": 1552484169, "post_id": 55140490, "comment_id": 97026685, "body": "None jaxb implementations I know of offer non-blocking parsing. So the parser will always block. You may want to consider looking at non blocking XML parsers such as aalto: <a href=\"https://github.com/FasterXML/aalto-xml/blob/master/README.md\" rel=\"nofollow noreferrer\">github.com/FasterXML/aalto-xml/blob/master/README.md</a>"}, {"owner": {"reputation": 361, "user_id": 6644514, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/145ba1562b220984be8e2ce467340e33?s=128&d=identicon&r=PG&f=1", "display_name": "Damian U", "link": "https://stackoverflow.com/users/6644514/damian-u"}, "edited": false, "score": 0, "creation_date": 1552485694, "post_id": 55140490, "comment_id": 97027773, "body": "Looks good but does can it be used as JAXB implementation?"}, {"owner": {"reputation": 476, "user_id": 7005973, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b037d5c109d7d4cd2eb9168022b6d275?s=128&d=identicon&r=PG&f=1", "display_name": "akreddy.21", "link": "https://stackoverflow.com/users/7005973/akreddy-21"}, "edited": false, "score": 0, "creation_date": 1554123897, "post_id": 55140490, "comment_id": 97624843, "body": "@DamianU look at docs <a href=\"https://projectreactor.io/docs/core/release/reference/index.html#faq.wrap-blocking\" rel=\"nofollow noreferrer\">projectreactor.io/docs/core/release/reference/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 6644514, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/145ba1562b220984be8e2ce467340e33?s=128&d=identicon&r=PG&f=1", "display_name": "Damian U", "link": "https://stackoverflow.com/users/6644514/damian-u"}, "edited": false, "score": 0, "creation_date": 1552484078, "post_id": 55142837, "comment_id": 97026612, "body": "I have one IO operation (I read xml document from http via WebClient) but this operation works well. Is non blocking and other threads doesn&#39;t wait when is completed."}], "tags": [], "owner": {"reputation": 10749, "user_id": 294657, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bf6a123b877d32265e37c0fb592d5965?s=128&d=identicon&r=PG", "display_name": "kaqqao", "link": "https://stackoverflow.com/users/294657/kaqqao"}, "is_accepted": false, "score": 1, "last_activity_date": 1552485013, "last_edit_date": 1552485013, "creation_date": 1552483095, "answer_id": 55142837, "question_id": 55140490, "link": "https://stackoverflow.com/questions/55140490/webflux-does-jaxb-can-affect-to-performance-of-reactive-application/55142837#55142837", "title": "Webflux - does jaxb can affect to performance of reactive application?", "body": "<p>What your application is doing <em>sounds</em> mostly IO-bound, as it parses (relatively big) documents that it reads from the request. Reading the stream is likely slow (depends on the network as well) and parsing XML is not the fastest thing either (I don't know what else you need to do to prepare the response).</p>\n\n<p>While you <em>could</em> offload both of these tasks to a different thread-pool:</p>\n\n<ol>\n<li>Don't block the client thread while reading the request (easily doable by using e.g. <code>Mono&lt;RequestBody&gt;</code> in Spring, instead of <code>RequestBody</code>)</li>\n<li>Use a non-blocking parser as <a href=\"https://stackoverflow.com/questions/55140490/webflux-does-jaxb-can-affect-to-performance-of-reactive-application/55142837#comment97026685_55140490\">@Strelok helpfully commented</a></li>\n</ol>\n\n<p>unless your app is also doing something else in the meantime (that's where the other things you do come into the picture), you're not really benefitting from the reactive architecture. This is generally true for all IO-bound apps. Reactive architecture doesn't jive with mostly-IO tasks very well.</p>\n\n<p>Of course, everything I said is mostly conjecture, as I haven't seen any of your code nor have any insight into your app. But these are some general guidelines. It is impossible to give a more accurate answer without knowing <em>exactly</em> what is going on inside your app, and what are the <em>actual</em> numbers. Even then, it could be rather involving. (Btw, this is likely why someone (not me) voted to close your question)</p>\n"}], "owner": {"reputation": 361, "user_id": 6644514, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/145ba1562b220984be8e2ce467340e33?s=128&d=identicon&r=PG&f=1", "display_name": "Damian U", "link": "https://stackoverflow.com/users/6644514/damian-u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552485013, "creation_date": 1552475398, "last_edit_date": 1552478280, "question_id": 55140490, "link": "https://stackoverflow.com/questions/55140490/webflux-does-jaxb-can-affect-to-performance-of-reactive-application", "title": "Webflux - does jaxb can affect to performance of reactive application?", "body": "<p>I have webflux application which mainly parse xml and returns json response. Max xml size which app handles is about 9MB, just like json response.</p>\n\n<p>Problem is that my application throughput is only 16TPS.</p>\n\n<p>I spent a few days on debugging my application to discover what is wrong and I think JAXB is a bottleneck.</p>\n\n<p>I've tried few JAXB improvements like unmarshal from byteInputStream instead of StringReader etc.</p>\n\n<p>So, my question is, does jaxb isn't adapted to reactive applications?</p>\n"}, {"tags": ["kotlin", "arrow-kt"], "answers": [{"comments": [{"owner": {"reputation": 12902, "user_id": 207716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5db2fd504687aeda73c3561a83b43ac?s=128&d=identicon&r=PG", "display_name": "jk.", "link": "https://stackoverflow.com/users/207716/jk"}, "edited": false, "score": 1, "creation_date": 1552497955, "post_id": 55147593, "comment_id": 97036236, "body": "is it just me or is calling a filter function mapNotNull not deeply confusing?"}, {"owner": {"reputation": 12909, "user_id": 458365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aEkXV.jpg?s=128&g=1", "display_name": "pablisco", "link": "https://stackoverflow.com/users/458365/pablisco"}, "reply_to_user": {"reputation": 12902, "user_id": 207716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5db2fd504687aeda73c3561a83b43ac?s=128&d=identicon&r=PG", "display_name": "jk.", "link": "https://stackoverflow.com/users/207716/jk"}, "edited": false, "score": 0, "creation_date": 1552499330, "post_id": 55147593, "comment_id": 97036945, "body": "@jk It&#39;s not a <code>filter</code> function, it&#39;s short for <code>map().filterNotNull()</code>. Similar to having <code>flatMap()</code> being short for <code>map().flatten()</code> (I guess that one is strange since the order of names changes)"}, {"owner": {"reputation": 6251, "user_id": 1087479, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fd0121a27aac567a20015792fb7cd705?s=128&d=identicon&r=PG", "display_name": "sschrass", "link": "https://stackoverflow.com/users/1087479/sschrass"}, "edited": false, "score": 0, "creation_date": 1552557004, "post_id": 55147593, "comment_id": 97057903, "body": "Thanks a lot! I am not quite happy with this, but it does the trick."}, {"owner": {"reputation": 6251, "user_id": 1087479, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fd0121a27aac567a20015792fb7cd705?s=128&d=identicon&r=PG", "display_name": "sschrass", "link": "https://stackoverflow.com/users/1087479/sschrass"}, "edited": false, "score": 1, "creation_date": 1552557513, "post_id": 55147593, "comment_id": 97058228, "body": "I mean I have Option or Either to not introduce <code>null</code> but this forces me to do so, at least in a narrow scope."}, {"owner": {"reputation": 12909, "user_id": 458365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aEkXV.jpg?s=128&g=1", "display_name": "pablisco", "link": "https://stackoverflow.com/users/458365/pablisco"}, "reply_to_user": {"reputation": 6251, "user_id": 1087479, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fd0121a27aac567a20015792fb7cd705?s=128&d=identicon&r=PG", "display_name": "sschrass", "link": "https://stackoverflow.com/users/1087479/sschrass"}, "edited": false, "score": 0, "creation_date": 1552563091, "post_id": 55147593, "comment_id": 97061792, "body": "@sschrass I&#39;ve added an example without <code>null</code>"}, {"owner": {"reputation": 6251, "user_id": 1087479, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fd0121a27aac567a20015792fb7cd705?s=128&d=identicon&r=PG", "display_name": "sschrass", "link": "https://stackoverflow.com/users/1087479/sschrass"}, "edited": false, "score": 0, "creation_date": 1552897982, "post_id": 55147593, "comment_id": 97169711, "body": "Cool, because it looks more idiomatic, This is what I tried with .filter { it is Either.Right}."}], "tags": [], "owner": {"reputation": 12909, "user_id": 458365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aEkXV.jpg?s=128&g=1", "display_name": "pablisco", "link": "https://stackoverflow.com/users/458365/pablisco"}, "is_accepted": true, "score": 7, "last_activity_date": 1552604812, "last_edit_date": 1552604812, "creation_date": 1552496874, "answer_id": 55147593, "question_id": 55140343, "link": "https://stackoverflow.com/questions/55140343/how-to-typesafe-reduce-a-collection-of-either-to-only-right/55147593#55147593", "title": "How to typesafe reduce a Collection of Either to only Right", "body": "<p>You can map the set like this for right:</p>\n\n<pre><code>val successes = originalSet.mapNotNull { it.orNull() }.toSet()\n</code></pre>\n\n<p>or if you want the lefts:</p>\n\n<pre><code>val failures = originalSet.mapNotNull { it.swap().orNull() }.toSet()\n</code></pre>\n\n<p>The final <code>toSet()</code> is optional if you want to keep it as a <code>Set</code> as <code>mapNotNull</code> is an extension function on <code>Iterable</code> and always returns a <code>List</code></p>\n\n<p>PS: No stupid questions :)</p>\n\n<p><strong>Update:</strong>\nIt can be done avoiding <code>nullables</code>:</p>\n\n<pre><code>val successes = originalSet\n  .map { it.toOption() }\n  .filter { it is Some }\n  .toSet()\n</code></pre>\n\n<p>We could potentially add <code>Iterable&lt;Option&lt;A&gt;&gt;.filterSome</code> and <code>Iterable&lt;Either&lt;A, B&gt;.mapAsOptions</code> functions. </p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>That last example returns a <code>Set&lt;Option&lt;Success&gt;&gt;</code>. If you want to unwrap the results without using <code>null</code> then one thing you can try is to fold the <code>Set</code>:</p>\n\n<pre><code>val successes = originalSet\n  .fold(emptySet&lt;Success&gt;()) { acc, item -&gt; \n    item.fold({ acc }, { acc + it })\n  }\n</code></pre>\n\n<p>This last option (unintended pun) doesn't require the use of <code>Option</code>.</p>\n"}], "owner": {"reputation": 6251, "user_id": 1087479, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fd0121a27aac567a20015792fb7cd705?s=128&d=identicon&r=PG", "display_name": "sschrass", "link": "https://stackoverflow.com/users/1087479/sschrass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 55147593, "answer_count": 1, "score": 6, "last_activity_date": 1552604812, "creation_date": 1552474956, "last_edit_date": 1552557071, "question_id": 55140343, "link": "https://stackoverflow.com/questions/55140343/how-to-typesafe-reduce-a-collection-of-either-to-only-right", "title": "How to typesafe reduce a Collection of Either to only Right", "body": "<p>Maybe a stupid question but I just don't get it.</p>\n\n<p>I have a <code>Set&lt;Either&lt;Failure, Success&gt;&gt;</code> and want to output a <code>Set&lt;Success&gt;</code> with Arrow-kt. </p>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 528, "user_id": 1552960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0b8658a9c8761c7cfad055caed0c0a?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1552960/brandon"}, "edited": false, "score": 0, "creation_date": 1552473553, "post_id": 55139220, "comment_id": 97019889, "body": "Could you please post your whole class so we can see the code :)"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552482935, "post_id": 55139220, "comment_id": 97025824, "body": "What is <code>onRelease()</code>?"}, {"owner": {"reputation": 816, "user_id": 7790894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/64dbd258a08b9a0bd7e5512820a987bd?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7790894/john"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552527415, "post_id": 55139220, "comment_id": 97047618, "body": "@EpicPandaForce let&#39;s say it is custom method."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552527552, "post_id": 55139220, "comment_id": 97047645, "body": "Okay, then your custom method code is bugged. :P"}, {"owner": {"reputation": 816, "user_id": 7790894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/64dbd258a08b9a0bd7e5512820a987bd?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7790894/john"}, "edited": false, "score": 0, "creation_date": 1552529810, "post_id": 55139220, "comment_id": 97048144, "body": "I thinks so. I am looking into checking it."}], "answers": [{"tags": [], "owner": {"reputation": 621, "user_id": 6875716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqr0O.jpg?s=128&g=1", "display_name": "Tariqul Islam", "link": "https://stackoverflow.com/users/6875716/tariqul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1552479988, "creation_date": 1552479988, "answer_id": 55141888, "question_id": 55139220, "link": "https://stackoverflow.com/questions/55139220/in-my-fragment-onbackpressed-is-called-before-oncreateview-is-called/55141888#55141888", "title": "In my Fragment, onBackPressed is called before onCreateView is called", "body": "<p>Please initialize view or other property in <strong>Fragment</strong> <code>onViewCreated()</code>. Thats means your view is ready</p>\n"}], "owner": {"reputation": 816, "user_id": 7790894, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/64dbd258a08b9a0bd7e5512820a987bd?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7790894/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552479988, "creation_date": 1552471784, "question_id": 55139220, "link": "https://stackoverflow.com/questions/55139220/in-my-fragment-onbackpressed-is-called-before-oncreateview-is-called", "title": "In my Fragment, onBackPressed is called before onCreateView is called", "body": "<p>I run Random test(Monkey test) and it found a crash regarding <strong>kotlin.UninitializedPropertyAccessException</strong>.</p>\n\n<p>I have <code>lateinit var videoEditorView</code> in my <strong>Fragment</strong> and it is initialized in <strong>onCreateView()</strong>.</p>\n\n<p>My <code>onBackPressed()</code> calls <code>onRelease()</code>.</p>\n\n<p>In my <code>onRelease()</code>:</p>\n\n<pre><code>override fun onRelease() {\n    super.onRelease(){\n    videoEditorView.release()\n}\n</code></pre>\n\n<p>Problem is, sometimes, onBackPressed seems called before onCreateView()</p>\n\n<p>Is it occasionally happening? If so, is there any way to avoid this by adding unit-test or prevention code.</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 20365, "user_id": 1759845, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/RUTxR.jpg?s=128&g=1", "display_name": "BackSlash", "link": "https://stackoverflow.com/users/1759845/backslash"}, "edited": false, "score": 3, "creation_date": 1552469126, "post_id": 55138242, "comment_id": 97017002, "body": "It goes from top to bottom in a tree-ish way. Everything in the outer scope is available to inner scopes (hence <code>returnTwo</code> is available inside <code>main</code>), everything declared before a statement is available to that statement in the same scope. The first assertion is true  for classes/methods, not for conditional blocks/loops."}, {"owner": {"reputation": 68611, "user_id": 53897, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG", "display_name": "Thorbj&#248;rn Ravn Andersen", "link": "https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"}, "edited": false, "score": 2, "creation_date": 1552469698, "post_id": 55138242, "comment_id": 97017373, "body": "Note that the jvm is not the compiler as such."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1552470045, "post_id": 55138242, "comment_id": 97017600, "body": "The compiler doesn&#39;t find objects at all, let alone in a file. It compiles source code. In this case the Kotlin compller has failed to find a forward reference in one case but has succeeded in another., which suggests a compiler bug, or possibly that the Kotlin  language is under-specified. The Java compller doesn&#39;t have this limitation."}, {"owner": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1552470466, "post_id": 55138242, "comment_id": 97017891, "body": "@user207421 what limitation are you referring to? Java doesn&#39;t &quot;find&quot; local variables that haven&#39;t been declared yet either."}, {"owner": {"reputation": 2159, "user_id": 6183182, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh6.googleusercontent.com/-XSZxct_alBc/AAAAAAAAAAI/AAAAAAAAAgw/l470-GF6nW0/photo.jpg?sz=128", "display_name": "swayamraina", "link": "https://stackoverflow.com/users/6183182/swayamraina"}, "edited": false, "score": 0, "creation_date": 1552470847, "post_id": 55138242, "comment_id": 97018160, "body": "ideone.com/QAzr6z - this throws a compiler error"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "reply_to_user": {"reputation": 20365, "user_id": 1759845, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/RUTxR.jpg?s=128&g=1", "display_name": "BackSlash", "link": "https://stackoverflow.com/users/1759845/backslash"}, "edited": false, "score": 0, "creation_date": 1552473077, "post_id": 55138242, "comment_id": 97019564, "body": "Thanks. @BackSlash is there a page/keyword i can search to read more about this?"}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 2, "creation_date": 1552470243, "post_id": 55138490, "comment_id": 97017751, "body": "Java does not compile top to bottom or line by line. It is capable of handling forward references and indeed rather complex declaration graphs."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1552470861, "post_id": 55138490, "comment_id": 97018169, "body": "It <i>prints</i> a compiler error, in this specific case, but declaring a member class or function or variable after its first use does not, which is a counterexample to your assertion, which is therefore false."}, {"owner": {"reputation": 2159, "user_id": 6183182, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh6.googleusercontent.com/-XSZxct_alBc/AAAAAAAAAAI/AAAAAAAAAgw/l470-GF6nW0/photo.jpg?sz=128", "display_name": "swayamraina", "link": "https://stackoverflow.com/users/6183182/swayamraina"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1552471019, "post_id": 55138490, "comment_id": 97018276, "body": "Yes. JAVA creates this graph for methods and not for variables. I am only referencing to varaibles here i.e. why the comparison to javascript and its feature &#39;variable-hoisting&#39;"}, {"owner": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1552471191, "post_id": 55138490, "comment_id": 97018372, "body": "Just to clarify the terminology used here: by &quot;variables&quot; swayamraina means local variables while @user207421 means fields. Hence the apparent disagreement, but you are talking about two different things and you are both right given your individual meanings."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1552473612, "post_id": 55138490, "comment_id": 97019924, "body": "You also appear to be wrong about Kotlin. Otherwise how did the OP&#39;s function call compile? You cannot possibly create a graph by going line by line. Obviously there is a special-case rule for local variables."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "edited": false, "score": 0, "creation_date": 1552473675, "post_id": 55138490, "comment_id": 97019966, "body": "@DodgyCodeException Obviously <i>not</i>. He is making a very specific claim about line by line compilation that is self-evidently untrue."}, {"owner": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1552473868, "post_id": 55138490, "comment_id": 97020083, "body": "@user207421 he said &quot;line by line <b>in a method scope</b>&quot; which is kind of true. (It&#39;s not strictly line by line, since lines and spaces and form feeds and all other whitespace are all treated exactly the same by the Java compiler; nothing special about lines. Maybe he meant statement by statement.) Outside of a method scope, it&#39;s not line by line, but he never said it was."}, {"owner": {"reputation": 2159, "user_id": 6183182, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh6.googleusercontent.com/-XSZxct_alBc/AAAAAAAAAAI/AAAAAAAAAgw/l470-GF6nW0/photo.jpg?sz=128", "display_name": "swayamraina", "link": "https://stackoverflow.com/users/6183182/swayamraina"}, "edited": false, "score": 0, "creation_date": 1552474260, "post_id": 55138490, "comment_id": 97020337, "body": "so, by line-by-line is something to do with human readability. for a machine, line-by-line would mean statement-by-statement i.e. for java it would be any delimiter it uses to skip to a new-line."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "edited": false, "score": 0, "creation_date": 1552474784, "post_id": 55138490, "comment_id": 97020639, "body": "@DodgyCodeException That isn&#39;t true either, otherwise no forward references would work, and they do; and there is certainly no &#39;line by line&#39; about it. There is no evidence here of any understanding of how compilers really work."}, {"owner": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "edited": false, "score": 1, "creation_date": 1552474794, "post_id": 55138490, "comment_id": 97020645, "body": "@swayamraina No, it would be the semicolon. You don&#39;t even have to put any kind of space after a statement. E.g. the single line <code>int a=1;int b=c;int c=2;</code> would fail because c is not visible in the declaration of b."}], "tags": [], "owner": {"reputation": 2159, "user_id": 6183182, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh6.googleusercontent.com/-XSZxct_alBc/AAAAAAAAAAI/AAAAAAAAAgw/l470-GF6nW0/photo.jpg?sz=128", "display_name": "swayamraina", "link": "https://stackoverflow.com/users/6183182/swayamraina"}, "is_accepted": false, "score": 0, "last_activity_date": 1552473657, "last_edit_date": 1552473657, "creation_date": 1552469698, "answer_id": 55138490, "question_id": 55138242, "link": "https://stackoverflow.com/questions/55138242/how-the-kotlin-compiler-finds-objects-in-a-file/55138490#55138490", "title": "How the Kotlin compiler finds objects in a file", "body": "<p>Language like Java go from top to bottom i.e. line-by-line in a method scope. <br>\nThe Java compiler actually goes line-by-line converting the source code you have written in a specific method to an intermediate form called <strong>byte-code</strong> which the JVM uses to interpret and run on machines. \n<br><br>\nNote that JAVA also creates a graph to resolve forward-dependency, like to check whether the output of a function call in variable assignment is correct or not or does it requires to an up-casting etc.</p>\n\n<p>Whereas languages like Javascript have a concept called 'variable hoisting', where all the variables declared are automatically brought at top for rest of the functions to consume.</p>\n"}, {"tags": [], "owner": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "is_accepted": false, "score": 0, "last_activity_date": 1552474628, "creation_date": 1552474628, "answer_id": 55140227, "question_id": 55138242, "link": "https://stackoverflow.com/questions/55138242/how-the-kotlin-compiler-finds-objects-in-a-file/55140227#55140227", "title": "How the Kotlin compiler finds objects in a file", "body": "<p>The scope of variables and methods is mandated by <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-6.html#jls-6.3\" rel=\"nofollow noreferrer\">section 6.3 of the Java Language Specification</a>. A Java compiler must comply with those rules, irrespective of how it is implemented. It doesn't matter if it scans the file top-down, bottom-up or sideways as long as it complies with the spec in regards to the scoping rules.</p>\n\n<p>In the code sample you gave in your question, Kotlin scoping rules are very similar to those of Java; i.e. local variables are visible <em>after</em> declaration, and functions in global scope are visible everywhere.</p>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1552474628, "creation_date": 1552468960, "last_edit_date": 1552470406, "question_id": 55138242, "link": "https://stackoverflow.com/questions/55138242/how-the-kotlin-compiler-finds-objects-in-a-file", "title": "How the Kotlin compiler finds objects in a file", "body": "<p>Is JVM unable to detect variables (in the same scope) below a variable?</p>\n\n<p>I.e., they can only detect variables declared before that variable.</p>\n\n<p>I'm just trying to gain an understanding of how the compiler finds objects in a file (and it's limitations):</p>\n\n<p><strong>kotlin code</strong></p>\n\n<pre><code>fun main(args : Array&lt;String&gt;) {\n    var first: Int = second + 2 // Unresolved Reference: Second \n    var second: Int = 1\n    var third: Int = 1 + returnTwo() // works fine\n}\nfun returnTwo(): Int = 2\n</code></pre>\n\n<p>So the compiler moves from top to bottom - however it can retrieve a function object from anywhere?</p>\n"}, {"tags": ["java", "android", "kotlin", "sip"], "comments": [{"owner": {"reputation": 681, "user_id": 8567819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b326de80a72c51bb487de5b758dfe6b?s=128&d=identicon&r=PG&f=1", "display_name": "Bucq", "link": "https://stackoverflow.com/users/8567819/bucq"}, "edited": false, "score": 0, "creation_date": 1552468366, "post_id": 55137895, "comment_id": 97016508, "body": "It might be the codecs supplied in the SDP offer/answer don&#39;t match with the codecs supported by the app. Please provide the SDP offer and answer and a list of codecs the app supports."}, {"owner": {"reputation": 935, "user_id": 6255841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1bqZ.jpg?s=128&g=1", "display_name": "Nabin", "link": "https://stackoverflow.com/users/6255841/nabin"}, "reply_to_user": {"reputation": 681, "user_id": 8567819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b326de80a72c51bb487de5b758dfe6b?s=128&d=identicon&r=PG&f=1", "display_name": "Bucq", "link": "https://stackoverflow.com/users/8567819/bucq"}, "edited": false, "score": 0, "creation_date": 1552469094, "post_id": 55137895, "comment_id": 97016985, "body": "Thanks for quick response. But do we need to provide modified codecs?."}, {"owner": {"reputation": 681, "user_id": 8567819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b326de80a72c51bb487de5b758dfe6b?s=128&d=identicon&r=PG&f=1", "display_name": "Bucq", "link": "https://stackoverflow.com/users/8567819/bucq"}, "edited": false, "score": 0, "creation_date": 1552469536, "post_id": 55137895, "comment_id": 97017253, "body": "I don&#39;t know what you mean with modified codecs. Each party should specify in the SDP body it sends a list of codecs it supports. The list in the SDP answer must be a subset of the list in the SDP offer. See RFC 4317 for some examples. If you provide your SDP offer and answer in the description other people can help you find any problems."}], "answers": [{"comments": [{"owner": {"reputation": 935, "user_id": 6255841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1bqZ.jpg?s=128&g=1", "display_name": "Nabin", "link": "https://stackoverflow.com/users/6255841/nabin"}, "edited": false, "score": 0, "creation_date": 1552620932, "post_id": 55170318, "comment_id": 97089113, "body": "It only gives issue while calling from Linphone app, it&#39;s might be due to some extra settings included on Linphone app. But on except Linphone app, other apps from play store working fine."}, {"owner": {"reputation": 494, "user_id": 406607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e17f39e0d861cbfeb452da0fac2f79?s=128&d=identicon&r=PG", "display_name": "Viriatvs", "link": "https://stackoverflow.com/users/406607/viriatvs"}, "reply_to_user": {"reputation": 935, "user_id": 6255841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1bqZ.jpg?s=128&g=1", "display_name": "Nabin", "link": "https://stackoverflow.com/users/6255841/nabin"}, "edited": false, "score": 1, "creation_date": 1552657622, "post_id": 55170318, "comment_id": 97105957, "body": "According to Linphone&#39;s site: <a href=\"https://www.linphone.org/technical-corner/linphone\" rel=\"nofollow noreferrer\">linphone.org/technical-corner/linphone</a> they support PCMA and PCMU (g711), so it should be possible to enable those codecs so that it would become compatible with your app"}], "tags": [], "owner": {"reputation": 494, "user_id": 406607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e17f39e0d861cbfeb452da0fac2f79?s=128&d=identicon&r=PG", "display_name": "Viriatvs", "link": "https://stackoverflow.com/users/406607/viriatvs"}, "is_accepted": false, "score": 0, "last_activity_date": 1552657451, "last_edit_date": 1552657451, "creation_date": 1552590602, "answer_id": 55170318, "question_id": 55137895, "link": "https://stackoverflow.com/questions/55137895/android-sip-audio-call-reject-sdp-no-suitable-codecs/55170318#55170318", "title": "Android SIP Audio Call Reject SDP: no suitable codecs", "body": "<p>There isnt a single codec in common between your app and the other app you are trying to connect.</p>\n\n<p>Codecs on your app: GSM-EFR  AMR, GSM, PCMU, PCMA</p>\n\n<p>Codecs on the other app: opus, speex (wide and narrowband), G729</p>\n\n<p>Your app has to have ate least one of the other apps' codecs</p>\n"}], "owner": {"reputation": 935, "user_id": 6255841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1bqZ.jpg?s=128&g=1", "display_name": "Nabin", "link": "https://stackoverflow.com/users/6255841/nabin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1591785799, "creation_date": 1552467784, "last_edit_date": 1591785799, "question_id": 55137895, "link": "https://stackoverflow.com/questions/55137895/android-sip-audio-call-reject-sdp-no-suitable-codecs", "title": "Android SIP Audio Call Reject SDP: no suitable codecs", "body": "<p>What is Reject SDP: no suitable codecs?</p>\n\n<p>This error has occurred while <strong>accepting</strong> incoming <strong>SIP</strong> audio call.\nIt's working fine If I call between my same two apps but not in between my app and other already developed apps.</p>\n\n<p>my same apps provide:</p>\n\n<pre><code>v=0\no=- 1552476987912 1552476987915 IN IP4 91.121.209.194\ns=-\nc=IN IP4 91.121.209.194\nt=0 0\na=nortpproxy:yes\nm=audio 49896 RTP/AVP 96 97 3 0 8 127\na=rtpmap:96 GSM-EFR/8000\na=rtpmap:97 AMR/8000\na=rtpmap:3 GSM/8000\na=rtpmap:0 PCMU/8000\na=rtpmap:8 PCMA/8000\na=rtpmap:127 telephone-event/8000\na=fmtp:127 0-15\n</code></pre>\n\n<p>others apps provide:</p>\n\n<pre><code>v=0\no=nks2_7 3358 1070 IN IP4 54.37.202.229\ns=Talk\nc=IN IP4 54.37.202.229\nt=0 0\na=ice-pwd:93b332893d9688f0426a432d\na=ice-ufrag:6a48740a\na=rtcp-xr:rcvr-rtt=all:10000 stat-summary=loss,dup,jitt,TTL voip-    metrics\na=nortpproxy:yes\nm=audio 57322 RTP/AVPF 96 97 98 0 8 18 101 99 100\nc=IN IP4 54.37.202.229\na=rtpmap:96 opus/48000/2\na=fmtp:96 useinbandfec=1\na=rtpmap:97 speex/16000\na=fmtp:97 vbr=on\na=rtpmap:98 speex/8000\na=fmtp:98 vbr=on\na=fmtp:18 annexb=yes\na=rtpmap:101 telephone-event/48000\na=rtpmap:99 telephone-event/16000\na=rtpmap:100 telephone-event/8000\na=candidate:1 1 UDP 2130706303 192.168.1.7 7076 typ host\na=candidate:1 2 UDP 2130706302 192.168.1.7 7077 typ host\na=candidate:2 1 UDP 1694498687 202.166.217.114 7076 typ srflx raddr                         192.168.1.7 rport 7076\na=candidate:2 2 UDP 1694498686 202.166.217.114 7077 typ srflx raddr 192.168.1.7 rport 7077\na=rtcp-fb:* trr-int 1000\na=rtcp-fb:* ccm tmmbr\na=candidate:66e88eef705b5c6c 1 UDP 16777215 54.37.202.229 57322 typ relay raddr 202.166.217.114 rport 7076\na=candidate:66e88eef705b5c6c 2 UDP 16777214 54.37.202.229 57323 typ relay raddr 202.166.217.114 rport 7077\na=nortpproxy:yes\n</code></pre>\n\n<p>Can somebody help me with that?</p>\n"}, {"tags": ["android", "kotlin", "retrofit", "okhttp"], "comments": [{"owner": {"reputation": 2655, "user_id": 4649110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpll5.jpg?s=128&g=1", "display_name": "Basi", "link": "https://stackoverflow.com/users/4649110/basi"}, "edited": false, "score": 1, "creation_date": 1552468115, "post_id": 55137887, "comment_id": 97016371, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22450036/refreshing-oauth-token-using-retrofit-without-modifying-all-calls\">Refreshing OAuth token using Retrofit without modifying all calls</a>"}], "answers": [{"comments": [{"owner": {"reputation": 563, "user_id": 4329781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d8de523f2be4dd638512684d841d63b0?s=128&d=identicon&r=PG&f=1", "display_name": "StuartDTO", "link": "https://stackoverflow.com/users/4329781/stuartdto"}, "edited": false, "score": 0, "creation_date": 1552468955, "post_id": 55138205, "comment_id": 97016904, "body": "How do I recall the previous call?"}, {"owner": {"reputation": 252, "user_id": 10087711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dVZmRJJMnlw/AAAAAAAAAAI/AAAAAAAAADE/UiKb0Oef9X8/photo.jpg?sz=128", "display_name": "Umesh Maharjan", "link": "https://stackoverflow.com/users/10087711/umesh-maharjan"}, "reply_to_user": {"reputation": 563, "user_id": 4329781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d8de523f2be4dd638512684d841d63b0?s=128&d=identicon&r=PG&f=1", "display_name": "StuartDTO", "link": "https://stackoverflow.com/users/4329781/stuartdto"}, "edited": false, "score": 0, "creation_date": 1552469113, "post_id": 55138205, "comment_id": 97016995, "body": "if (request.method() == &quot;POST&quot;) {                                 retryRequest=request.newBuilder()                                         .url(request.url())                                         .post(retryOriginaResponseBody)                                          .build()                             } else {                                 retryRequest=request.newBuilder()                                         .url(newRetryHttpUrl)                                          .build()                             } (it will auto call the previous call)"}], "tags": [], "owner": {"reputation": 252, "user_id": 10087711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dVZmRJJMnlw/AAAAAAAAAAI/AAAAAAAAADE/UiKb0Oef9X8/photo.jpg?sz=128", "display_name": "Umesh Maharjan", "link": "https://stackoverflow.com/users/10087711/umesh-maharjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1552468980, "last_edit_date": 1552468980, "creation_date": 1552468862, "answer_id": 55138205, "question_id": 55137887, "link": "https://stackoverflow.com/questions/55137887/how-to-create-an-interceptor-for-errors-to-make-another-call/55138205#55138205", "title": "How to create an interceptor for errors to make another call?", "body": "<pre><code>class Inceptor : Interceptor {\n    internal var token: String?=null\n    @Throws(IOException::class)\n    override fun intercept(chain: Interceptor.Chain): Response {\n\n        var request=chain.request()\n        request=request.newBuilder().build()\n\n        val response=chain.proceed(request)\n\n\n                if (response.code() == HttpURLConnection.HTTP_UNAUTHORIZED) {\n                    // get a new token (I use a synchronous Retrofit call)\n\n                        val requestBody=FormBody.Builder()\n                                .add(\"UserName\", \u201cabcd\")\n                                .add(\"Password\", \u201c*****\")\n\n                                .build()\n                        val newRequest=request.newBuilder()\n                                .url(\"Put your url\")\n                                .post(requestBody)\n                                .build()\n                        val tokenRefreshResponse=chain.proceed(newRequest)\n                        val newRetryHttpUrl=request.url()\n                        if (tokenRefreshResponse.code() == HttpURLConnection.HTTP_OK) {\n                            val retryOriginaResponseBody: RequestBody\n\n                            val builder=FormBody.Builder()\n                            retryOriginaResponseBody=builder.build()\n                            val retryRequest: Request\n                            if (request.method() == \"POST\") {\n                                retryRequest=request.newBuilder()\n                                        .url(request.url())\n                                        .post(retryOriginaResponseBody)\n\n                                        .build()\n                            } else {\n                                retryRequest=request.newBuilder()\n                                        .url(newRetryHttpUrl)\n\n                                        .build()\n                            }\n                            val retryResponse=chain.proceed(retryRequest)\n                            return retryResponse\n                        } else {\n                            return tokenRefreshResponse\n                        }\n\n                    }\n\n\n\n        }\n        return response\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 563, "user_id": 4329781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d8de523f2be4dd638512684d841d63b0?s=128&d=identicon&r=PG&f=1", "display_name": "StuartDTO", "link": "https://stackoverflow.com/users/4329781/stuartdto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552469689, "creation_date": 1552467761, "last_edit_date": 1552469689, "question_id": 55137887, "link": "https://stackoverflow.com/questions/55137887/how-to-create-an-interceptor-for-errors-to-make-another-call", "title": "How to create an interceptor for errors to make another call?", "body": "<p>I'm getting a 401, because token has expired, so I need to renew the token with another call and then do the call again, is there an easy way instead of doing : </p>\n\n<pre><code>disposable = loginService.login(\n                UserToLoginRequest(\n                    input_email_login.text.toString(),\n                    input_password_login.text.toString(),\n                    generateRandomDeviceInfo()\n                )\n            )\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(\n                    { result -&gt;\n                        //It works\n                    },\n                    { error -&gt; if(error.code == 401) renewAccessToken() }\n                )\n</code></pre>\n\n<p>The thing is that I want to do something like this guy : <a href=\"https://stackoverflow.com/questions/22450036/refreshing-oauth-token-using-retrofit-without-modifying-all-calls\">Refreshing Oath token</a>, but if it's possible to call again the same endpoint with the same parameters.</p>\n\n<h2>Example</h2>\n\n<p><code>getApple(1)</code> &lt;-- return info of apple id 1</p>\n\n<p>The result is 401 &lt;-- can't do the call without refreshing the accessToken    <code>refreshAccessToken()</code> </p>\n\n<p>Automatically call <code>getApple(1)</code> without disturbing the user</p>\n"}, {"tags": ["java", "android", "kotlin", "arcore"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5076059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRFjo.jpg?s=128&g=1", "display_name": "Pedro Sim&#227;o", "link": "https://stackoverflow.com/users/5076059/pedro-sim%c3%a3o"}, "is_accepted": false, "score": 1, "last_activity_date": 1552471878, "creation_date": 1552471878, "answer_id": 55139266, "question_id": 55137244, "link": "https://stackoverflow.com/questions/55137244/arcore-success-floor-find/55139266#55139266", "title": "ArCore success floor find", "body": "<p>There is a sample of that in <a href=\"https://github.com/google-ar/sceneform-android-sdk/blob/master/samples/solarsystem/app/src/main/java/com/google/ar/sceneform/samples/solarsystem/SolarActivity.java\" rel=\"nofollow noreferrer\">Solar System ARCore Sample</a> from Google.</p>\n\n<pre><code>arSceneView\n    .getScene()\n    .addOnUpdateListener(\n        frameTime -&gt; {\n          for (Plane plane : frame.getUpdatedTrackables(Plane.class)) {\n            if (plane.getTrackingState() == TrackingState.TRACKING) {\n              // Plane detected\n            }\n          }\n        });\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 9535858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1692146914156865/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/9535858/tobias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552471878, "creation_date": 1552465357, "last_edit_date": 1552470863, "question_id": 55137244, "link": "https://stackoverflow.com/questions/55137244/arcore-success-floor-find", "title": "ArCore success floor find", "body": "<p>Is there a method, which is performed after a floor is found in ArCore? I tried to look for a solution, but I did not have success. I am looking for something like .\nI need to diplay fbx, exactly when surface is detected .\nedit: i will be thankful also for condition, which i can checkt that with.</p>\n\n<blockquote>\n  <p>onSurfaceDetection()</p>\n</blockquote>\n"}, {"tags": ["android", "c", "kotlin", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 0, "creation_date": 1552467095, "post_id": 55137467, "comment_id": 97015749, "body": "thanks for the answer. I have an access to all the native code. So I have compiled my native libraries for all platforms. I have checked that all .so files are present in every abi library. So we can be sure that all libs are compiled. May be the problem is the Android App bundle compilation? This issue is happening only on some ammount of x64 devices. On most of x64 devices everything is running okay. May be this be a problem of a specific device? At the current moment I have about 200 crashes per 10000 updates"}, {"owner": {"reputation": 14396, "user_id": 1395437, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0afd3049729ecebbf134e297e278e0c1?s=128&d=identicon&r=PG", "display_name": "Daniel Zolnai", "link": "https://stackoverflow.com/users/1395437/daniel-zolnai"}, "reply_to_user": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 1, "creation_date": 1552469618, "post_id": 55137467, "comment_id": 97017312, "body": "Have you checked the .so files in the split release apks? Perhaps it could have been ignored during the release build process. It might also be false reporting, see this similar question: <a href=\"https://stackoverflow.com/questions/52595535/using-an-app-bundle-i-get-unsatisfiedlinkerror-for-1-of-users\" title=\"using an app bundle i get unsatisfiedlinkerror for 1 of users\">stackoverflow.com/questions/52595535/&hellip;</a>"}, {"owner": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 0, "creation_date": 1552471439, "post_id": 55137467, "comment_id": 97018544, "body": "I&#39;ll try to take a look at my bundle to check if all native libs are there. I haven&#39;t done this already. And I am also wondering - my be some users are able to install the bundle without Google Play. May be they are fetching apks from rooted phone and then published them somewhere and other people who are trying to install these cracked apks are running this issue?"}, {"owner": {"reputation": 14396, "user_id": 1395437, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0afd3049729ecebbf134e297e278e0c1?s=128&d=identicon&r=PG", "display_name": "Daniel Zolnai", "link": "https://stackoverflow.com/users/1395437/daniel-zolnai"}, "reply_to_user": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 1, "creation_date": 1552474636, "post_id": 55137467, "comment_id": 97020556, "body": "That might be it. In Google Play crash statistics you can filter on install source (Google Play or Other), that would filter this issue out."}, {"owner": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 0, "creation_date": 1552475667, "post_id": 55137467, "comment_id": 97021138, "body": "I was hoping that this issue was running on installation not from GP. But nope. All the issues have come form the apps installed via GooglePlay"}, {"owner": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 1, "creation_date": 1552475765, "post_id": 55137467, "comment_id": 97021195, "body": "I am missing this line in my build.gradle ndk.abiFilters = &#39;armeabi-v7a&#39; &#39;arm64-v8a&#39; &#39;x86&#39; &#39;x86_64&#39;. May be the problem is in that I don&#39;t have this line in build.gradle?"}, {"owner": {"reputation": 14396, "user_id": 1395437, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0afd3049729ecebbf134e297e278e0c1?s=128&d=identicon&r=PG", "display_name": "Daniel Zolnai", "link": "https://stackoverflow.com/users/1395437/daniel-zolnai"}, "reply_to_user": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 0, "creation_date": 1552481809, "post_id": 55137467, "comment_id": 97025047, "body": "It just reduces the amount of splits, since there exist no mips, and armeabi devices anymore. It is a good way to reduce the amount of apks, or save space if you build a single one. Did you check the split apks, if they contain the correct ABI .so files?"}, {"owner": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 0, "creation_date": 1552483774, "post_id": 55137467, "comment_id": 97026395, "body": "How can I fetch splitted apks from the bundle?"}, {"owner": {"reputation": 14396, "user_id": 1395437, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0afd3049729ecebbf134e297e278e0c1?s=128&d=identicon&r=PG", "display_name": "Daniel Zolnai", "link": "https://stackoverflow.com/users/1395437/daniel-zolnai"}, "reply_to_user": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 1, "creation_date": 1552487209, "post_id": 55137467, "comment_id": 97028961, "body": "Have a look at bundletool from this medium post: <a href=\"https://medium.com/google-developer-experts/explor\" rel=\"nofollow noreferrer\">medium.com/google-developer-experts/explor</a>\u2026"}, {"owner": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 1, "creation_date": 1552488124, "post_id": 55137467, "comment_id": 97029658, "body": "Ok. Thanks. I&#39;ll check and later write about my success"}, {"owner": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 0, "creation_date": 1552548643, "post_id": 55137467, "comment_id": 97053349, "body": "I&#39;ve checked my bundle - all libs are there. May be the problem is in that Android OS is looking for the so in the wrong folder -/lib/arm64? Why I does not looking for it in the arm64-v8a?"}, {"owner": {"reputation": 14396, "user_id": 1395437, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0afd3049729ecebbf134e297e278e0c1?s=128&d=identicon&r=PG", "display_name": "Daniel Zolnai", "link": "https://stackoverflow.com/users/1395437/daniel-zolnai"}, "reply_to_user": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "edited": false, "score": 1, "creation_date": 1552560157, "post_id": 55137467, "comment_id": 97059911, "body": "/lib/arm64 looks right, something else might be the issue. I&#39;m out of ideas, if I were you, I would try to buy or borrow a device which it crashes on, and observe the behavior with a debugger (or check the filesystem with root)"}, {"owner": {"reputation": 216, "user_id": 999716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iGbfi.jpg?s=128&g=1", "display_name": "JHawkZZ", "link": "https://stackoverflow.com/users/999716/jhawkzz"}, "edited": false, "score": 0, "creation_date": 1582345598, "post_id": 55137467, "comment_id": 106755423, "body": "Thanks for the thorough answer! This fixed the sporadic crashes I was seeing on various devices."}], "tags": [], "owner": {"reputation": 14396, "user_id": 1395437, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0afd3049729ecebbf134e297e278e0c1?s=128&d=identicon&r=PG", "display_name": "Daniel Zolnai", "link": "https://stackoverflow.com/users/1395437/daniel-zolnai"}, "is_accepted": false, "score": 8, "last_activity_date": 1552466241, "creation_date": 1552466241, "answer_id": 55137467, "question_id": 55136767, "link": "https://stackoverflow.com/questions/55136767/android-native-library-so-unsatisfied-link-error/55137467#55137467", "title": "Android native library (.so) - unsatisfied link error", "body": "<p>Your problem is not with the library code, but with the .so files themselves.\nAndroid devices have a primary ABI, the instruction set supported by the processor.\nFor example, some devices with 64-bit processors use the ABI <code>arm64-v8a</code>.</p>\n\n<p>However, a lot of libraries and apps don't support 64-bit processors yet. So usually, the newer processors also support a secondary ABI, which is a more common one. <code>arm64-v8a</code> processors usually support <code>armeabi-v7a</code> too, for example.</p>\n\n<p>When the app starts, it starts looking for the native libraries in the directories. First it checks in the primary ABI directory, <code>arm64-v8a</code> in this example. If the .so files are not there, it checks in the secondary ABI directory (<code>armeabi-v7a</code>). If still not found, you will get the error you described.</p>\n\n<p>In your case, you have the files, as you said, so that's not the problem.</p>\n\n<p>One big problem with this selection is, that it always sticks to the primary ABI, if the directory exists. This can lead to crashes if not all libraries supply all .so files for all ABIs. This is described <a href=\"https://developer.android.com/ndk/guides/abis.html#aen\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Here's an example: you include 2 libraries in your app:\n1. VideoPlayerLibrary, which has .so files for all ABIs\n2. GifLibrary, which has .so files only for <code>armeabi</code> and <code>armeabi-v7a</code>.</p>\n\n<p>Now if you start the app on an <code>arm64-v8a</code> device, it will stick to it's primary ABI, because it has found files there (the .so files of VideoPlayerLibrary). But at the moment you want to play gifs, it will try to load the .so files from the <code>arm64-v8a</code> directory, but it will not find them there and it will crash as in your post with a link error.</p>\n\n<p><strong>So what can you do?</strong></p>\n\n<p>You have 2 options:</p>\n\n<ol>\n<li>If it is your own library which has the missing .so files, compile it for all ABIs. \nIf it is not your own, check if there's a newer version which has fixed this issue.</li>\n<li>Exclude the incomplete ABIs from the app. This way the newer processors will use the secondary ABI for running the app. This will result in worse performance of course, but it will not crash.\nFrom my experience, the most important ABI is <code>armeabi-v7a</code>, this should be supported by probably all Android devices.</li>\n</ol>\n"}], "owner": {"reputation": 891, "user_id": 1885632, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6541bdccc20a7b3abb93ad88312e606f?s=128&d=identicon&r=PG", "display_name": "bukka.wh", "link": "https://stackoverflow.com/users/1885632/bukka-wh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2130, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552466241, "creation_date": 1552463356, "question_id": 55136767, "link": "https://stackoverflow.com/questions/55136767/android-native-library-so-unsatisfied-link-error", "title": "Android native library (.so) - unsatisfied link error", "body": "<p>I have recently created and published an Android App bundle with compiled native libraries for all processors architectures. On most of devices everything is running ok. But on some of devices I can see this error in Crashlytics console\n<strong>Fatal Exception: java.lang.UnsatisfiedLinkError\ndalvik.system.PathClassLoader[DexPathList[[zip file \"/system/framework/org.apache.http.legacy.boot.jar\", zip file \"/data/app/com.someapp-wAu5DoLmLvM_RVnbU1qsCg==/base.apk\"],nativeLibraryDirectories=[/data/app/com.someapp-wAu5DoLmLvM_RVnbU1qsCg==/lib/arm64, /system/lib64]]] couldn't find \"somemylib.so\"</strong></p>\n\n<p>I am wondering - why this may happen. I have libs for x64 processors. This is happening only on some devices - but this crash is the most often in Crashlytics. \nAll my libs are stored inside jniLibs directory\nTHese are some pieces from my build.gradle</p>\n\n<pre><code>bundle {\n    density {\n        // Different APKs are generated for devices with different screen densities; true by default.\n        enableSplit false\n    }\n    abi {\n        // Different APKs are generated for devices with different CPU architectures; true by default.\n        enableSplit true\n    }\n    language {\n        // This is disabled so that the App Bundle does NOT split the APK for each language.\n        // We're gonna use the same APK for all languages.\n        enableSplit false\n    }\n}\nsplits {\n    abi {\n        enable true\n        reset()\n        include 'armeabi', 'mips', 'x86', 'armeabi-v7a', 'arm64-v8a', \n 'mips64', 'x86_64'\n    }\n}\nsourceSets {\n\n    main {\n        jniLibs.srcDirs = ['jniLibs']\n    }\n}\n</code></pre>\n\n<p>I have a service class inside my app which is trying to load native library when someone is starting it. My be sometimes this \"start\" call to service is executing before the OS can detect the native libs in my app? But I don't think that this is so.\nCan you help me please</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2730, "user_id": 5794116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0uJx.jpg?s=128&g=1", "display_name": "Umar Ata", "link": "https://stackoverflow.com/users/5794116/umar-ata"}, "edited": false, "score": 0, "creation_date": 1601992840, "post_id": 55136388, "comment_id": 113574361, "body": "removing companion object and creation a class and initialising in init or constructor fixed the problem, it seems like companion object not supported in kotlin 1.4.10 or 1.4.0"}], "tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1552461575, "creation_date": 1552461575, "answer_id": 55136388, "question_id": 55136106, "link": "https://stackoverflow.com/questions/55136106/calling-class-in-swift-from-kotlin-native-framework/55136388#55136388", "title": "Calling class in swift from kotlin/native framework", "body": "<p>Kotlin/Native has different threading model. The idea is that an instance of an object has to be frozen to be accessed from all threads. There is <code>.freeze()</code> extension method for that. </p>\n\n<p>By default, <code>object Smth</code> are also frozen. In the code sniper you have mutable fields in companion object. </p>\n\n<p>A possible workaround could be to replace companion object with an ordinary class, that you create explicitly </p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/native/concurrency.html#concurrency-in-kotlinnative\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/native/concurrency.html#concurrency-in-kotlinnative</a></p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/native/immutability.html#immutability-in-kotlinnative\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/native/immutability.html#immutability-in-kotlinnative</a></p>\n"}], "owner": {"reputation": 145, "user_id": 11099470, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214120889081635/picture?type=large", "display_name": "Cheeseburger", "link": "https://stackoverflow.com/users/11099470/cheeseburger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 0, "accepted_answer_id": 55136388, "answer_count": 1, "score": 2, "last_activity_date": 1552461575, "creation_date": 1552460380, "question_id": 55136106, "link": "https://stackoverflow.com/questions/55136106/calling-class-in-swift-from-kotlin-native-framework", "title": "Calling class in swift from kotlin/native framework", "body": "<p>I followed the tutorial: <a href=\"https://kotlinlang.org/docs/tutorials/native/mpp-ios-android.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/tutorials/native/mpp-ios-android.html</a> and successfully export a jar file for Android and a framework for iOS. After I want to implement something more complex. I uses Android Studio Kotlin with the codes below:</p>\n\n<p>Model.kt:</p>\n\n<pre><code>package org.kotlin.mpp.mobile.BusinessLogic\n\nabstract class Model{\n\nvar _id:Long = 0\n\nabstract fun PolymorphismTest()\n}\n</code></pre>\n\n<p>Sales.kt:</p>\n\n<pre><code>package org.kotlin.mpp.mobile.BusinessLogic\n\nclass Sales : Model() {\n\ninit {\n    this._id = _counter\n    _counter++\n\n}\ncompanion object {\n\n    private var _counter: Long = 0\n\n}\n\nfun get_counter(): Long {\n    return _counter\n}\n\nprivate val _salesItems:MutableList&lt;SalesItem&gt; = ArrayList()\n\nfun SalesItems(): MutableList&lt;SalesItem&gt; {\n    return _salesItems\n}\n\nfun TotalAmount():Double\n{\n    var totalAmount:Double = 0.0\n    for(aSalesItem in _salesItems)\n    {\n        totalAmount += aSalesItem.SubTotal()\n    }\n\n    return totalAmount\n}\n\nfun AddSalesItem(salesItem: SalesItem)\n{\n    this._salesItems.add(salesItem)\n}\n\nfun AddSalesItem(itemName:String, itemCode:String, quantity:Double, amount:Double )\n{\n    val aSalesItem = SalesItem()\n    aSalesItem._itemCode = itemCode\n    aSalesItem._itemName = itemName\n    aSalesItem._quantity = quantity\n    aSalesItem._amount = amount\n    this.AddSalesItem(aSalesItem)\n}\n\nfun ToString(): String {\n    return \"Sales: $this._id\"\n}\n\n\noverride fun PolymorphismTest() {\n    println(\"This is method from Sales\")\n}\n\n}\n</code></pre>\n\n<p>SalesItem.kt:</p>\n\n<pre><code>package org.kotlin.mpp.mobile.BusinessLogic\n\nclass SalesItem : Model() {\n\ninit {\n    this._id = _counter\n    _counter++\n}\ncompanion object {\n\n    private var _counter: Long = 0\n}\n\nfun get_counter(): Long {\n    return _counter\n}\n\nvar _sales: Sales? = null\n\nvar _amount:Double = 0.toDouble()\nvar _quantity:Double = 0.toDouble()\n\nfun SubTotal(): Double {\n    return _amount * _quantity\n}\n\nvar _itemName:String? = null\nvar _itemCode:String? = null\n\n\nfun Sales():Sales?{\n    return _sales\n}\n\nfun SalesItem(sales:Sales)\n{\n    _sales = sales\n    this._id = _counter\n    _counter++\n}\n\nfun ToString(): String {\n    return \"Sales: $this._id\"\n}\n\noverride fun PolymorphismTest() {\n    println(\"This is method from SalesItem\")\n}\n}\n</code></pre>\n\n<p>I export these codes into a framework then imported into Xcode and using Swift to call</p>\n\n<p>ViewController.swift</p>\n\n<pre><code>import UIKit\nimport SharedCode\nclass ViewController: UIViewController{\n\noverride func viewDidLoad(){\n     super.viewDidLoad()\n\n     print(\"Creating Sales Object\")\n     let sales = Sales() //error here\n\n   }\n }\n</code></pre>\n\n<p>After that I met the errors of </p>\n\n<blockquote>\n  <p>Instances of kotlin.Error, kotlin.RuntimeException and subclasses aren't propagated from Kotlin to Objective-C/Swift.\n  Other exceptions can be propagated as NSError if method has or inherits @Throws annotation.\n  Uncaught Kotlin exception: kotlin.native.concurrent.InvalidMutabilityException: mutation attempt of frozen org.kotlin.mpp.mobile.BusinessLogic.Sales.Companion@228b588\n          at 0   SharedCode                          </p>\n</blockquote>\n"}, {"tags": ["android", "kotlin", "junit"], "answers": [{"tags": [], "owner": {"reputation": 1015, "user_id": 7295690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-beFwWgRNS10/AAAAAAAAAAI/AAAAAAAACCk/f9qAvYC2W7o/photo.jpg?sz=128", "display_name": "seyed Jafari", "link": "https://stackoverflow.com/users/7295690/seyed-jafari"}, "is_accepted": true, "score": 0, "last_activity_date": 1552457609, "creation_date": 1552457609, "answer_id": 55135505, "question_id": 55135379, "link": "https://stackoverflow.com/questions/55135379/rxjava-2-on-error-is-not-called-while-unit-testing/55135505#55135505", "title": "Rxjava 2 on error is not called while unit testing", "body": "<p>your actually creating two <code>API</code> here.</p>\n\n<p>every time <code>fetchFilms()</code> on presenter gets called a new API is created. you can not mock the <code>API</code> in this way. </p>\n\n<p>best guess to fix it is to pass <code>API</code> object as a method parameter to <code>fetchFilms()</code> in the presenter. this way you can decide to provide a real <code>API</code> or a mock one</p>\n"}, {"comments": [{"owner": {"reputation": 3188, "user_id": 7372771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sESuU.png?s=128&g=1", "display_name": "akshay_shahane", "link": "https://stackoverflow.com/users/7372771/akshay-shahane"}, "edited": false, "score": 0, "creation_date": 1552482915, "post_id": 55137804, "comment_id": 97025807, "body": "onerror is not getting called , for success test is working fine"}, {"owner": {"reputation": 3188, "user_id": 7372771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sESuU.png?s=128&g=1", "display_name": "akshay_shahane", "link": "https://stackoverflow.com/users/7372771/akshay-shahane"}, "edited": false, "score": 0, "creation_date": 1552483608, "post_id": 55137804, "comment_id": 97026281, "body": "i get this &quot;Wanted but not invoked:&quot; error for verify(filmsView).showError(&quot;t&quot;)"}, {"owner": {"reputation": 3188, "user_id": 7372771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sESuU.png?s=128&g=1", "display_name": "akshay_shahane", "link": "https://stackoverflow.com/users/7372771/akshay-shahane"}, "edited": false, "score": 0, "creation_date": 1552483794, "post_id": 55137804, "comment_id": 97026406, "body": "like this     @Before     fun setup() {          RxAndroidPlugins.setInitMainThreadSchedulerHandler { scheduler -&gt; Schedulers.trampoline() }         RxJavaPlugins.setIoSchedulerHandler { t -&gt; Schedulers.trampoline() }"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 3188, "user_id": 7372771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sESuU.png?s=128&g=1", "display_name": "akshay_shahane", "link": "https://stackoverflow.com/users/7372771/akshay-shahane"}, "edited": false, "score": 0, "creation_date": 1552484180, "post_id": 55137804, "comment_id": 97026695, "body": "It looks like <code>filmsPresenter</code> has properties <code>io</code> and <code>main</code>. Could you add how you initialize it? Depending on it, it might not even be necessary to setup the plugins..."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 2, "last_activity_date": 1552483610, "last_edit_date": 1552483610, "creation_date": 1552467457, "answer_id": 55137804, "question_id": 55135379, "link": "https://stackoverflow.com/questions/55135379/rxjava-2-on-error-is-not-called-while-unit-testing/55137804#55137804", "title": "Rxjava 2 on error is not called while unit testing", "body": "<p>It seems like you're running your code asynchonously in tests as well.</p>\n\n<p>You'd have to <em>synchronise</em> the schedulers you use before.</p>\n\n<pre><code>@Before\nfun setupSchedulers() {\n    RxAndroidPlugins.setMainThreadSchedulerHandler { Schedulers.trampoline() }\n    RxJavaPlugins.setIoSchedulerHandler { Schedulers.trampoline() }\n}\n\n@Test\nfun  fetchInvalidDataShouldThrowError() {\n    `when`(api.fetchFilms()).thenReturn(Observable.error(IOException(\"t\")))\n    filmsPresenter.fetchFilms()\n\n    verify(filmsView).showLoader(true)\n    verify(filmsView).showError(\"t\")\n    verify(filmsView).showLoader(false)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3188, "user_id": 7372771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sESuU.png?s=128&g=1", "display_name": "akshay_shahane", "link": "https://stackoverflow.com/users/7372771/akshay-shahane"}, "is_accepted": false, "score": 0, "last_activity_date": 1552558918, "creation_date": 1552558918, "answer_id": 55160053, "question_id": 55135379, "link": "https://stackoverflow.com/questions/55135379/rxjava-2-on-error-is-not-called-while-unit-testing/55160053#55160053", "title": "Rxjava 2 on error is not called while unit testing", "body": "<p>I had pass repo to Presenter to have same instance API .</p>\n\n<blockquote>\n  <p>here are some changes i have to make</p>\n</blockquote>\n\n<pre><code>class RepoTest(val api : API) {\n    fun filmm() : Observable&lt;Response&gt; {\n        return api.fetchFilms()\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>presenter</p>\n</blockquote>\n\n<pre><code>class FlimsPresenter(private val view: GetFlimsContract.View,  repo: RepoTest) : GetFlimsContract.Presenter\n</code></pre>\n\n<blockquote>\n  <p>method</p>\n</blockquote>\n\n<pre><code> override fun fetchFilms() {\n        view.showLoader(true)\n        disposable = repot.filmm()\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribeWith(object : DisposableObserver&lt;Response&gt;() {\n                    override fun onComplete() {\n                    }\n\n                    override fun onNext(t: Response) {\n                        println(t)\n                        view.setAdapter(t?.results as List&lt;ResultsItem&gt;)\n                        if (t?.results.isEmpty()) view.showEmptyView(true)\n                        else view.showEmptyView(false)\n                        view.showLoader(false)\n                    }\n\n                    override fun onError(e: Throwable) {\n                        e.printStackTrace()\n                        view.showLoader(false)\n                        view.showError(e.message.toString())\n                    }\n\n                })\n\n\n    }\n</code></pre>\n\n<blockquote>\n  <p>Finally test</p>\n</blockquote>\n\n<pre><code>class TestSample {\n    @Mock\n    private lateinit var filmsPresenter: GetFlimsContract.Presenter\n\n\n    @Mock\n    private lateinit var filmsView: GetFlimsContract.View\n\n\n    private lateinit var api: API\n    @Mock\n    private lateinit var disposable: Disposable\n    @Mock\n    lateinit var repoTest: RepoTest\n\n    @Before\n    fun setup() {\n        RxAndroidPlugins.setMainThreadSchedulerHandler { scheduler -&gt; Schedulers.trampoline() }\n        RxAndroidPlugins.setInitMainThreadSchedulerHandler { scheduler -&gt; Schedulers.trampoline() }\n        RxJavaPlugins.setIoSchedulerHandler { t -&gt; Schedulers.trampoline() }\n        MockitoAnnotations.initMocks(this)\n\n        repoTest = Mockito.mock(RepoTest::class.java)\n\n        filmsView = Mockito.mock(GetFlimsContract.View ::class.java)\n\n        filmsPresenter = FlimsPresenter(filmsView,repoTest )\n    }\n\n\n    @Test\n    fun `should lod item into views`() {\n\n        Mockito.`when`(repoTest.filmm()).thenReturn(Observable.just(Response(\"\",\"\",7, listOf(ResultsItem()))))\n        filmsPresenter.fetchFilms()\n\n        Mockito.verify(filmsView).showLoader(true)\n        Mockito.verify(filmsView).setAdapter(anyList())\n        Mockito.verify(filmsView).showLoader(false)\n    }\n\n\n    @Test\n    fun `should show error if network call fails`(){\n\n        Mockito.`when`(repoTest.filmm()).thenReturn(Observable.error(Exception(\"t\")))\n        filmsPresenter.fetchFilms()\n        Mockito.verify(filmsView).showLoader(true)\n        Mockito.verify(filmsView).showError(\"t\")\n        Mockito.verify(filmsView).showLoader(false)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3188, "user_id": 7372771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sESuU.png?s=128&g=1", "display_name": "akshay_shahane", "link": "https://stackoverflow.com/users/7372771/akshay-shahane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1214, "favorite_count": 0, "accepted_answer_id": 55135505, "answer_count": 3, "score": 0, "last_activity_date": 1552558918, "creation_date": 1552456933, "question_id": 55135379, "link": "https://stackoverflow.com/questions/55135379/rxjava-2-on-error-is-not-called-while-unit-testing", "title": "Rxjava 2 on error is not called while unit testing", "body": "<p>Rxjava 2 on error is not called while unit testing . I am using kotlin with rxJava 2 .</p>\n\n<blockquote>\n  <p>method</p>\n</blockquote>\n\n<pre><code>  @SuppressLint(\"CheckResult\")\n    override fun fetchFilms() {\n        view.showLoader(true)\n        disposable = getRetrofitInstance(false).create(API::class.java)\n                .fetchFilms()\n                .subscribeOn(io)\n                .observeOn(main)\n                .subscribeWith(object : DisposableObserver&lt;Response&gt;() {\n                    override fun onComplete() {\n                    }\n\n                    override fun onNext(t: Response) {\n                        println(t)\n                        view.setAdapter(t?.results as List&lt;ResultsItem&gt;)\n                        view.showLoader(false)\n                    }\n\n                    override fun onError(e: Throwable) {\n                        e.printStackTrace()\n                        view.showLoader(false)\n                        view.showError(e.message.toString())                    }\n\n                })\n\n\n    }\n</code></pre>\n\n<blockquote>\n  <p>Test</p>\n</blockquote>\n\n<pre><code>@Test\n    fun  fetchInvalidDataShouldThrowError(){\n\n        `when`(api.fetchFilms()).thenReturn(Observable.error(IOException()))\n   filmsPresenter.fetchFilms()\n        val subscriber = TestSubscriber&lt;Response&gt;()\n\n        subscriber.awaitTerminalEvent(5,TimeUnit.SECONDS)\n\n        verify(filmsView, times(1)).showLoader(true)\n        verify(filmsView).showError(\"t\")\n        verify(filmsView).showLoader(false)\n\n\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-testing", "mockk"], "comments": [{"owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 0, "creation_date": 1552449144, "post_id": 55133803, "comment_id": 97009105, "body": "You&#39;ve got a test that successfully creates an instance of <code>Bitmap</code> and passes. Why do you want to mock it in a different method in the same test file?"}, {"owner": {"reputation": 1761, "user_id": 1229936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6112c497dd338e57c9da26405e98e1d7?s=128&d=identicon&r=PG", "display_name": "JHowzer", "link": "https://stackoverflow.com/users/1229936/jhowzer"}, "reply_to_user": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 0, "creation_date": 1552449501, "post_id": 55133803, "comment_id": 97009172, "body": "Good question. This example is a simplified version of something that I encountered when running multiple test files. The origin of problem started when test class A had a mockk of a Bitmap and test class B did something similar to what&#39;s in the example and I run A&#39;s tests and B&#39;s tests as a group. I mainly just put it into a single test class to make the example more simple and I stripped out a bunch of other code to isolate it to what was triggering the issue."}, {"owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "edited": false, "score": 0, "creation_date": 1552449891, "post_id": 55133803, "comment_id": 97009275, "body": "Got it. I&#39;d recommend against mocking things like Bitmaps: it&#39;s a final class hence mockk has to perform weird bytecode manipulations to mock it. Just create test instances the way you already do."}, {"owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "edited": false, "score": 0, "creation_date": 1552457641, "post_id": 55133803, "comment_id": 97011491, "body": "<code>unmockkAll</code> should have been returned it to the original state. Also <code>unmockkObject</code> is suitable to revert <code>mockk</code>. If it is not working please submit an issue with detailed description to <a href=\"http://github.com/mockk/issues\" rel=\"nofollow noreferrer\">github.com/mockk/issues</a>"}, {"owner": {"reputation": 1761, "user_id": 1229936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6112c497dd338e57c9da26405e98e1d7?s=128&d=identicon&r=PG", "display_name": "JHowzer", "link": "https://stackoverflow.com/users/1229936/jhowzer"}, "edited": false, "score": 0, "creation_date": 1552492986, "post_id": 55133803, "comment_id": 97033183, "body": "For anyone who happens to be interested... <a href=\"https://github.com/mockk/mockk/issues/270\" rel=\"nofollow noreferrer\">github.com/mockk/mockk/issues/270</a>"}], "owner": {"reputation": 1761, "user_id": 1229936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6112c497dd338e57c9da26405e98e1d7?s=128&d=identicon&r=PG", "display_name": "JHowzer", "link": "https://stackoverflow.com/users/1229936/jhowzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552450604, "creation_date": 1552446941, "last_edit_date": 1552450604, "question_id": 55133803, "link": "https://stackoverflow.com/questions/55133803/how-to-mock-a-bitmap-using-mockk-without-it-affecting-bitmap-compress-in-future", "title": "How to mock a Bitmap using mockk without it affecting bitmap.compress in future tests", "body": "<p>How do I <a href=\"https://mockk.io/\" rel=\"nofollow noreferrer\">mockk</a> a Bitmap without it breaking Bitmaps in future tests? Let's take the following simplified example...</p>\n\n<pre><code>class FileHelper @Inject constructor(private val application: Application) {\n    fun saveBitmapToTempDirectory(bitmap: Bitmap, filename: String, format: Bitmap.CompressFormat): File {\n        val tempDirectory = File(application.cacheDir, \"images\").apply { mkdirs() }\n        val file = File(tempDirectory, \"$filename.${format.name.toLowerCase()}\")\n        FileOutputStream(file).use { outStream -&gt;\n            bitmap.compress(format, 100, outStream)\n        }\n        return file\n    }\n}\n</code></pre>\n\n<p>Let's say may test class is as follows...</p>\n\n<pre><code>@RunWith(AndroidJUnit4::class)\nclass FileHelperTest {\n\n    @Test\n    fun otherTest(){\n//        When I uncomment the next line, I get NoSuchMethodException: checkRecycled in testSaveBitmapToTempDirectoryWithSuccess()\n//        val mockBitmap: Bitmap = mockk()\n//        Do stuff using a mockBitmap\n\n//        The following block also causes the same issue (even with a real decoded Bitmap).\n//        mockkStatic(BitmapFactory::class)\n//        every {\n//            BitmapFactory.decodeStream(mockInputStream)\n//        } returns realDecodedBitmap\n//        unmockkStatic(BitmapFactory::class)\n\n//        None of the following work:\n//        unmockkAll()\n//        clearAllMocks()\n//        unmockkStatic(Bitmap::class)\n//        clearMocks(mockBitmap)\n//        clearStaticMockk(Bitmap::class)\n    }\n\n    @Test\n    fun testSaveBitmapToTempDirectoryWithSuccess() {\n        val application = InstrumentationRegistry.getInstrumentation().targetContext.applicationContext as Application\n        val file = FileHelper(application).saveBitmapToTempDirectory(\n            BitmapFactory.decodeResource(application.resources, R.drawable.mypic),\n            \"bitmap\",\n            Bitmap.CompressFormat.PNG\n        )\n        assertTrue(file.absolutePath.endsWith(\"bitmap.png\"))\n    }\n}\n</code></pre>\n\n<p><code>testSaveBitmapToTempDirectoryWithSuccess()</code> passes if I run it alone. If I include the line that mockks a Bitmap (<code>val mockBitmap: Bitmap = mockk()</code>), then <code>testSaveBitmapToTempDirectoryWithSuccess()</code> fails when I run all the tests together. <code>bitmap.compress()</code> throws <code>NoSuchMethodException: checkRecycled</code></p>\n\n<p>Similarly, if another test class mockks a Bitmap and is run as a group with this test class, then <code>testSaveBitmapToTempDirectoryWithSuccess()</code> fails for the same reason.</p>\n\n<p>How do I address this situation? In some tests, I'd like to have a mock Bitmap. In other tests, I'd like to compress a real one.</p>\n"}, {"tags": ["android", "android-intent", "kotlin"], "comments": [{"owner": {"reputation": 691, "user_id": 3800242, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/pK31D.jpg?s=128&g=1", "display_name": "Naveen Niraula", "link": "https://stackoverflow.com/users/3800242/naveen-niraula"}, "edited": false, "score": 0, "creation_date": 1552445444, "post_id": 55133551, "comment_id": 97008344, "body": "the first answer here might help you: <a href=\"https://stackoverflow.com/questions/10407159/how-to-manage-startactivityforresult-on-android\" title=\"how to manage startactivityforresult on android\">stackoverflow.com/questions/10407159/&hellip;</a>"}, {"owner": {"reputation": 4041, "user_id": 2023697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mo57V.jpg?s=128&g=1", "display_name": "Liem Vo", "link": "https://stackoverflow.com/users/2023697/liem-vo"}, "edited": false, "score": 0, "creation_date": 1552445460, "post_id": 55133551, "comment_id": 97008349, "body": "Please refer from Android developer website <a href=\"https://developer.android.com/training/basics/intents/result\" rel=\"nofollow noreferrer\">developer.android.com/training/basics/intents/result</a> that has the details guideline"}, {"owner": {"reputation": 1096, "user_id": 4477125, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JYZmH.jpg?s=128&g=1", "display_name": "Lorence Hernandez", "link": "https://stackoverflow.com/users/4477125/lorence-hernandez"}, "edited": false, "score": 1, "creation_date": 1552446015, "post_id": 55133551, "comment_id": 97008463, "body": "you guys misunderstood the question, the OP doesnt want to pass data to the activtiy that opened the ChildActivity, instead he wants to pass data to the MasterActivity which the ChildActivtiy is inheriting from."}, {"owner": {"reputation": 749, "user_id": 8837516, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OxmIM.png?s=128&g=1", "display_name": "Adil", "link": "https://stackoverflow.com/users/8837516/adil"}, "edited": false, "score": 0, "creation_date": 1552451155, "post_id": 55133551, "comment_id": 97009593, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/920306/sending-data-back-to-the-main-activity-in-android\">Sending data back to the Main Activity in Android</a>"}, {"owner": {"reputation": 765, "user_id": 8371844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRAal.jpg?s=128&g=1", "display_name": "mtotowamkwe", "link": "https://stackoverflow.com/users/8371844/mtotowamkwe"}, "edited": false, "score": 0, "creation_date": 1552515117, "post_id": 55133551, "comment_id": 97044322, "body": "Are you using fragments? If so just use fragment arguments."}], "answers": [{"comments": [{"owner": {"reputation": 2103, "user_id": 2822178, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b005b2fba855ceaf611e1b83b24ad4a1?s=128&d=identicon&r=PG&f=1", "display_name": "User3", "link": "https://stackoverflow.com/users/2822178/user3"}, "edited": false, "score": 0, "creation_date": 1552447461, "post_id": 55133761, "comment_id": 97008745, "body": "Can you provide a concrete example? Currently I am not launching an intent to master Activity I am launching an intent to ChildActivity and I further want to pass it to MasterActivity"}, {"owner": {"reputation": 2103, "user_id": 2822178, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b005b2fba855ceaf611e1b83b24ad4a1?s=128&d=identicon&r=PG&f=1", "display_name": "User3", "link": "https://stackoverflow.com/users/2822178/user3"}, "edited": false, "score": 0, "creation_date": 1552447547, "post_id": 55133761, "comment_id": 97008756, "body": "As you see, <code>origUrl = intent.getStringExtra(EXTRA_URL)</code> in <code>onCreate</code> of <code>MasterActivity</code> is giving me an exception"}, {"owner": {"reputation": 1096, "user_id": 4477125, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JYZmH.jpg?s=128&g=1", "display_name": "Lorence Hernandez", "link": "https://stackoverflow.com/users/4477125/lorence-hernandez"}, "reply_to_user": {"reputation": 2103, "user_id": 2822178, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b005b2fba855ceaf611e1b83b24ad4a1?s=128&d=identicon&r=PG&f=1", "display_name": "User3", "link": "https://stackoverflow.com/users/2822178/user3"}, "edited": false, "score": 0, "creation_date": 1552448106, "post_id": 55133761, "comment_id": 97008874, "body": "Yes you are launching ChildActivity but MasterActivity will have access to your bundle since its also a child of Activity, you might want to read about inheritance. anw can you post the exception here?"}], "tags": [], "owner": {"reputation": 1096, "user_id": 4477125, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JYZmH.jpg?s=128&g=1", "display_name": "Lorence Hernandez", "link": "https://stackoverflow.com/users/4477125/lorence-hernandez"}, "is_accepted": false, "score": 1, "last_activity_date": 1552446559, "creation_date": 1552446559, "answer_id": 55133761, "question_id": 55133551, "link": "https://stackoverflow.com/questions/55133551/how-to-pass-data-as-intent-from-child-activity-to-parent-activity/55133761#55133761", "title": "How to pass data as intent from child activity to parent activity", "body": "<p>You could do this by getting your intent data directly from the <code>MasterActivity#onCreate</code></p>\n\n<p>You might also want to change the tag to kotlin instead of java.</p>\n"}], "owner": {"reputation": 2103, "user_id": 2822178, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b005b2fba855ceaf611e1b83b24ad4a1?s=128&d=identicon&r=PG&f=1", "display_name": "User3", "link": "https://stackoverflow.com/users/2822178/user3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552537578, "creation_date": 1552444985, "last_edit_date": 1552537578, "question_id": 55133551, "link": "https://stackoverflow.com/questions/55133551/how-to-pass-data-as-intent-from-child-activity-to-parent-activity", "title": "How to pass data as intent from child activity to parent activity", "body": "<p>I have an Activity -> MasterActivity and one more Activity ChildActivity which extends from Master Activity </p>\n\n<p>Now the author of Master activity is expecting some values to come with the intent and parses these in the onCreate of Master activity: </p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_view)\n        origUrl = intent.getStringExtra(EXTRA_URL)\n        if (origUrl == null) throw RuntimeException(\"did you forget to put extras?\")\n}\n</code></pre>\n\n<p>And I start the intent to my ChildActivity like: </p>\n\n<pre><code> context?.startActivity(Intent(context, TerminationWebview::class.java).apply {\n                putExtra(ChildActivity.EXTRA_URL, it)\n</code></pre>\n\n<p>Now the question is how do I pass this data to parent? So that parent can parse it in onCreate? </p>\n\n<p>This question does not deal with returning data from an activity, it deals with passing the data to parent activity through intent and hence is not . a duplicate </p>\n"}, {"tags": ["android", "kotlin", "android-gradle-plugin"], "answers": [{"tags": [], "owner": {"reputation": 1503, "user_id": 1904778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/f4qlM.jpg?s=128&g=1", "display_name": "Nithinjith", "link": "https://stackoverflow.com/users/1904778/nithinjith"}, "is_accepted": true, "score": 0, "last_activity_date": 1552979234, "creation_date": 1552979234, "answer_id": 55235340, "question_id": 55133302, "link": "https://stackoverflow.com/questions/55133302/classwithinstantrundebug-error-in-android-app/55235340#55235340", "title": "ClassWithInstantRunDebug error in Android App", "body": "<p>Finally, After three days of continues search, I have found one solution for this issue.</p>\n\n<p>If we import an existing Android application to new Android studio(3.3.2), after migration it will automatically enable the instant run.</p>\n\n<p>So we should disable the complete instant run option from the below path</p>\n\n<p>Go to <strong>Settings-> Build, Execution, Deployment-> Instant Run</strong></p>\n\n<p>Remove Enable instant run check. Invalidate and restart the application. Done!!!</p>\n\n<p><a href=\"https://i.stack.imgur.com/UXHqc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UXHqc.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1503, "user_id": 1904778, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/f4qlM.jpg?s=128&g=1", "display_name": "Nithinjith", "link": "https://stackoverflow.com/users/1904778/nithinjith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 55235340, "answer_count": 1, "score": 0, "last_activity_date": 1552979234, "creation_date": 1552442806, "last_edit_date": 1552456914, "question_id": 55133302, "link": "https://stackoverflow.com/questions/55133302/classwithinstantrundebug-error-in-android-app", "title": "ClassWithInstantRunDebug error in Android App", "body": "<p>I have recently change the OS from Linux to Windows and create a studio environment with the existing Android SDK used in Linux. But I am getting the below error continuously.</p>\n\n<p>I have tried the below solution, But didn't work</p>\n\n<ol>\n<li><p><strong>File -> Invalidate Cache and restart</strong></p></li>\n<li><p><strong>removed .gradle and .idea folder from Project and rebuild.</strong></p></li>\n</ol>\n\n<p><strong>The error log is attaching with this</strong> </p>\n\n<p>java.lang.RuntimeException: com.android.build.api.transform.TransformException: </p>\n\n<pre><code>java.lang.NullPointerException\n    at com.android.builder.profile.Recorder$Block.handleException(Recorder.java:55)\n    at com.android.builder.profile.ThreadRecorder.record(ThreadRecorder.java:104)\n    at com.android.build.gradle.internal.pipeline.TransformTask.transform(TransformTask.java:230)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n    at org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:50)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:131)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:120)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:99)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:101)\n    at org.gradle.api.internal.tasks.execution.FinalizeInputFilePropertiesTaskExecuter.execute(FinalizeInputFilePropertiesTaskExecuter.java:44)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:91)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:62)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.run(EventFiringTaskExecuter.java:51)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:46)\n    at org.gradle.execution.taskgraph.LocalTaskInfoExecutor.execute(LocalTaskInfoExecutor.java:42)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:277)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:262)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:135)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:130)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.execute(DefaultTaskPlanExecutor.java:200)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.executeWithWork(DefaultTaskPlanExecutor.java:191)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.run(DefaultTaskPlanExecutor.java:130)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: com.android.build.api.transform.TransformException: java.lang.NullPointerException\n    at com.android.build.gradle.internal.transforms.InstantRunTransform.doTransform(InstantRunTransform.java:320)\n    at com.android.build.gradle.internal.transforms.InstantRunTransform.transform(InstantRunTransform.java:186)\n    at com.android.build.gradle.internal.pipeline.TransformTask$2.call(TransformTask.java:239)\n    at com.android.build.gradle.internal.pipeline.TransformTask$2.call(TransformTask.java:235)\n    at com.android.builder.profile.ThreadRecorder.record(ThreadRecorder.java:102)\n    ... 51 more\nCaused by: java.lang.NullPointerException\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at java.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:598)\n    at java.util.concurrent.ForkJoinTask.reportException(ForkJoinTask.java:677)\n    at java.util.concurrent.ForkJoinTask.join(ForkJoinTask.java:720)\n    at com.android.ide.common.internal.WaitableExecutor.waitForTasksWithQuickFail(WaitableExecutor.java:146)\n    at com.android.build.gradle.internal.transforms.InstantRunTransform.doTransform(InstantRunTransform.java:315)\n    ... 55 more\nCaused by: java.lang.NullPointerException\n    at com.android.build.gradle.internal.incremental.ConstructorBuilder.build(ConstructorBuilder.java:175)\n    at com.android.build.gradle.internal.incremental.IncrementalSupportVisitor.visitMethod(IncrementalSupportVisitor.java:223)\n    at org.objectweb.asm.ClassVisitor.visitMethod(ClassVisitor.java:327)\n    at org.objectweb.asm.commons.SerialVersionUIDAdder.visitMethod(SerialVersionUIDAdder.java:255)\n    at org.objectweb.asm.tree.MethodNode.accept(MethodNode.java:724)\n    at org.objectweb.asm.tree.ClassNode.accept(ClassNode.java:452)\n    at com.android.build.gradle.internal.incremental.IncrementalVisitor.instrumentClass(IncrementalVisitor.java:365)\n    at com.android.build.gradle.internal.transforms.InstantRunTransform.transformToClasses2Format(InstantRunTransform.java:414)\n    at com.android.build.gradle.internal.transforms.InstantRunTransform.lambda$doTransform$4(InstantRunTransform.java:276)\n    at com.android.build.gradle.internal.transforms.InstantRunTransform.lambda$null$5(InstantRunTransform.java:305)\n    at java.util.concurrent.ForkJoinTask$AdaptedCallable.exec(ForkJoinTask.java:1424)\n    at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)\n    at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)\n    at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)\n    at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:157)\n</code></pre>\n\n<p><strong>My Gradle File</strong></p>\n\n<pre><code> apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"com.ephone.ephone\"\n        minSdkVersion 21\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n        buildConfigField(\"String\", \"\", \"\\\"http://test.com\\\"\")\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility = \"1.8\"\n        targetCompatibility = \"1.8\"\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n    androidExtensions {\n        experimental = true\n    }\n    productFlavors {\n    }\n}\n\ndependencies {\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.0.0-beta01'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.2'\n    implementation 'com.google.android.material:material:1.0.0-beta01'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0-beta01'\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.0.0-beta01'\n    implementation 'com.github.bumptech.glide:glide:4.8.0'\n    implementation 'androidx.cardview:cardview:1.0.0-beta01'\n    implementation 'androidx.recyclerview:recyclerview:1.0.0-beta01'\n    implementation 'com.squareup.retrofit2:retrofit:2.5.0'\n    implementation 'com.squareup.retrofit2:adapter-rxjava2:2.5.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.5.0'\n    implementation 'io.reactivex.rxjava2:rxandroid:2.0.1'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test:runner:1.1.0-alpha4'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-alpha4'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.8.0'\n    implementation 'com.github.d-max:spots-dialog:0.4@aar'\n    implementation 'com.afollestad.material-dialogs:core:2.0.3'\n    implementation 'com.google.android.material:material:1.0.0'\n    implementation 'com.afollestad:viewpagerdots:1.0.0'\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "location", "mapbox"], "comments": [{"owner": {"reputation": 1096, "user_id": 4477125, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JYZmH.jpg?s=128&g=1", "display_name": "Lorence Hernandez", "link": "https://stackoverflow.com/users/4477125/lorence-hernandez"}, "edited": false, "score": 0, "creation_date": 1552441462, "post_id": 55133135, "comment_id": 97007595, "body": "<a href=\"https://docs.mapbox.com/android/api/map-sdk/5.1.2/com/mapbox/mapboxsdk/maps/MapboxMap.OnMyLocationChangeListener.html\" rel=\"nofollow noreferrer\">docs.mapbox.com/android/api/map-sdk/5.1.2/com/mapbox/mapboxs&zwnj;&#8203;dk/&hellip;</a>"}, {"owner": {"reputation": 509, "user_id": 9126211, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Py5mrU5iIw/AAAAAAAAAAI/AAAAAAAAAAc/3z-dXlc3dr0/photo.jpg?sz=128", "display_name": "\u0141ukasz Paczos", "link": "https://stackoverflow.com/users/9126211/%c5%81ukasz-paczos"}, "reply_to_user": {"reputation": 1096, "user_id": 4477125, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JYZmH.jpg?s=128&g=1", "display_name": "Lorence Hernandez", "link": "https://stackoverflow.com/users/4477125/lorence-hernandez"}, "edited": false, "score": 1, "creation_date": 1552469157, "post_id": 55133135, "comment_id": 97017022, "body": "What @LorenceHernandez has linked is a tiny bit outdated, you can check out <a href=\"https://docs.mapbox.com/android/core/overview/#requesting-location-updates\" rel=\"nofollow noreferrer\">docs.mapbox.com/android/core/overview/&hellip;</a> instead. The core library linked above is already a part of the Mapbox Maps SDK for Android. You can also read more about the <code>LocationComponent</code> in <a href=\"https://docs.mapbox.com/android/maps/overview/location-component/\" rel=\"nofollow noreferrer\">docs.mapbox.com/android/maps/overview/location-component</a>"}, {"owner": {"reputation": 796, "user_id": 1002156, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/928036c0533483fb57dbfbbcd82a30e7?s=128&d=identicon&r=PG", "display_name": "Arildo Junior", "link": "https://stackoverflow.com/users/1002156/arildo-junior"}, "reply_to_user": {"reputation": 509, "user_id": 9126211, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Py5mrU5iIw/AAAAAAAAAAI/AAAAAAAAAAc/3z-dXlc3dr0/photo.jpg?sz=128", "display_name": "\u0141ukasz Paczos", "link": "https://stackoverflow.com/users/9126211/%c5%81ukasz-paczos"}, "edited": false, "score": 0, "creation_date": 1552612751, "post_id": 55133135, "comment_id": 97087363, "body": "thanks @\u0141ukaszPaczos, I&#39;ve found the solution"}], "answers": [{"tags": [], "owner": {"reputation": 796, "user_id": 1002156, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/928036c0533483fb57dbfbbcd82a30e7?s=128&d=identicon&r=PG", "display_name": "Arildo Junior", "link": "https://stackoverflow.com/users/1002156/arildo-junior"}, "is_accepted": false, "score": 1, "last_activity_date": 1552612818, "creation_date": 1552612818, "answer_id": 55174269, "question_id": 55133135, "link": "https://stackoverflow.com/questions/55133135/callback-of-locationchanged-in-mapbox-android/55174269#55174269", "title": "Callback of locationChanged in Mapbox Android", "body": "<p>It worked checking the link Lukasz Paczos mentioned.\n<a href=\"https://docs.mapbox.com/android/core/overview/#requesting-location-updates\" rel=\"nofollow noreferrer\">https://docs.mapbox.com/android/core/overview/#requesting-location-updates</a></p>\n"}], "owner": {"reputation": 796, "user_id": 1002156, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/928036c0533483fb57dbfbbcd82a30e7?s=128&d=identicon&r=PG", "display_name": "Arildo Junior", "link": "https://stackoverflow.com/users/1002156/arildo-junior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1552612818, "creation_date": 1552441338, "question_id": 55133135, "link": "https://stackoverflow.com/questions/55133135/callback-of-locationchanged-in-mapbox-android", "title": "Callback of locationChanged in Mapbox Android", "body": "<p>How to implement the callback for locationChanged in Mapbox Android for Kotlin?\nI want to perform some operations on every location update of the user.</p>\n\n<p>I couldn't find anything in docs. Probably, it's really simple.</p>\n\n<p>Thank you,</p>\n"}, {"tags": ["android", "kotlin", "apk"], "answers": [{"comments": [{"owner": {"reputation": 2276, "user_id": 3175580, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bbfe30c791549584b87aa50bdcaf8b08?s=128&d=identicon&r=PG&f=1", "display_name": "androidguy", "link": "https://stackoverflow.com/users/3175580/androidguy"}, "edited": false, "score": 0, "creation_date": 1560015182, "post_id": 55132794, "comment_id": 99604505, "body": "Using kotlin 1.3 my metadata&#39;s are at /kotlin/*/.kotlin_metadata, for axample collections, coroutines, reflect, etc"}], "tags": [], "owner": {"reputation": 1041, "user_id": 4181904, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6rkytT4VZ9U/AAAAAAAAAAI/AAAAAAAAAAA/RWUAd2uco8M/photo.jpg?sz=128", "display_name": "Ranjan Kumar", "link": "https://stackoverflow.com/users/4181904/ranjan-kumar"}, "is_accepted": false, "score": 2, "last_activity_date": 1552442010, "last_edit_date": 1552442010, "creation_date": 1552438401, "answer_id": 55132794, "question_id": 55132717, "link": "https://stackoverflow.com/questions/55132717/how-to-remove-kotlin-metadata-in-apk/55132794#55132794", "title": "How to remove .kotlin_metadata in apk", "body": "<p>Add the following line in your <code>build.gradle</code> file.</p>\n\n<pre><code>packagingOptions {\n        exclude '/kotlin_metadata/**'\n\n    }\n</code></pre>\n\n<p><a href=\"https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.PackagingOptions.html\" rel=\"nofollow noreferrer\">https://google.github.io/android-gradle-dsl/current/com.android.build.gradle.internal.dsl.PackagingOptions.html</a></p>\n"}], "owner": {"reputation": 43, "user_id": 6071056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15039476d6cddce5e080b05b6f0e1a43?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/6071056/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552442010, "creation_date": 1552437700, "question_id": 55132717, "link": "https://stackoverflow.com/questions/55132717/how-to-remove-kotlin-metadata-in-apk", "title": "How to remove .kotlin_metadata in apk", "body": "<p>When I build android application with kotlin, apk size is increased.</p>\n\n<p>Inside the apk, many .kotlin_metadata files in both kotlin/ kotlinx/ folders.</p>\n\n<p>Is there any way to remove them from my apk?</p>\n"}, {"tags": ["android", "lambda", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 737, "user_id": 10715642, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QRLDtnm1-IE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ipSlUb1x7ARbIjnOaLC_Y9VX2jNQ/mo/photo.jpg?sz=128", "display_name": "Damon Baker", "link": "https://stackoverflow.com/users/10715642/damon-baker"}, "is_accepted": true, "score": 5, "last_activity_date": 1552441797, "creation_date": 1552441797, "answer_id": 55133189, "question_id": 55132535, "link": "https://stackoverflow.com/questions/55132535/iterating-over-list-with-lambda-foreach-kotlin/55133189#55133189", "title": "Iterating over list with lambda forEach Kotlin", "body": "<p>Add a named parameter to your forEach loop. The implicit name \"it\" is getting shadowed by the count function.</p>\n\n<pre><code>val iterator = colours.toList().iterator()\n\niterator.forEach { colour -&gt;\n\n    println(\"$colour count: \" + (numbers\n        .map{a -&gt; colours[a]}\n        .count{it == (\"$colour\")}))\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": false, "score": 2, "last_activity_date": 1552449554, "creation_date": 1552449554, "answer_id": 55134173, "question_id": 55132535, "link": "https://stackoverflow.com/questions/55132535/iterating-over-list-with-lambda-foreach-kotlin/55134173#55134173", "title": "Iterating over list with lambda forEach Kotlin", "body": "<p>You don't really need to do a nested iteration here. Currently you're operating at O(n^2) since you have to traverse the list once for every element. Since you know you're working with a small number of potential values, you could instead just group them by value and then map the values to the size of the resulting lists, i.e.</p>\n\n<pre><code>val colourNames = listOf(\"red\", \"green\", \"blue\", \"yellow\", \"orange\", \"indigo\", \"violet\", \"black\")\n\n// Generates 30 random numbers between 0 and 8 (exclusive)\nval randomColours = (0 until 30).map { (0 until colourNames.size).random() }\n\nval result = randomColours\n  .groupBy { color -&gt; colourNames[color] } // outputs a Map&lt;String, List&lt;Int&gt;&gt;\n  .mapValues { (color, colorCountList) -&gt; colorCountList.size } // Map&lt;String, Int&gt;\n\nprintln(result) // {yellow=4, orange=4, red=5, indigo=3, blue=8, green=2, violet=2, black=2}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7327019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a961d39ef675bcfa6e1a37f53e87478f?s=128&d=identicon&r=PG&f=1", "display_name": "user7327019", "link": "https://stackoverflow.com/users/7327019/user7327019"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4264, "favorite_count": 0, "accepted_answer_id": 55133189, "answer_count": 2, "score": 1, "last_activity_date": 1552449554, "creation_date": 1552436047, "last_edit_date": 1552442979, "question_id": 55132535, "link": "https://stackoverflow.com/questions/55132535/iterating-over-list-with-lambda-foreach-kotlin", "title": "Iterating over list with lambda forEach Kotlin", "body": "<p>I have a list of 30 random numbers that correspond to 1 of 8 colours, and I need to iterate over the 8 colors(or 30 numbers) and find the number of times each colour occurs. I need to do this using lambdas and functional programming, so no traditional for loops. </p>\n\n<pre><code>val iterator = colours.toList().iterator()\n\niterator.forEach{\n\n    println(\"$it count: \" + (numbers\n            .map{a -&gt; colours[a]}\n            .count{it == (\"$it\")}))\n}\n</code></pre>\n\n<p>The problem currently is my output for count is just 50, not the specific number of times a colour occurs. </p>\n\n<p>If I do it like this:</p>\n\n<pre><code>println(\"Red count:\" +    (numbers\n        .map{a -&gt; colours[a]}\n        .count{it ==  (\"red\")}))\n</code></pre>\n\n<p>it outputs the correct number, but not with the loop.</p>\n\n<p>What it ouputs:</p>\n\n<pre><code>green count: 50 \n\nred count: 50\n</code></pre>\n\n<p>what it should output (for example)</p>\n\n<pre><code>green count:9\n\nred count:3\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["android", "kotlin", "retrofit", "repeat"], "comments": [{"owner": {"reputation": 99, "user_id": 1041911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS0jr.jpg?s=128&g=1", "display_name": "Pamela Hill", "link": "https://stackoverflow.com/users/1041911/pamela-hill"}, "edited": false, "score": 0, "creation_date": 1552468917, "post_id": 55132234, "comment_id": 97016876, "body": "You could use the launch coroutine builder, with fetchCarData in a loop with a check on whether the button has been pressed, with a delay(1000) after every fetchCarData call?"}], "answers": [{"tags": [], "owner": {"reputation": 252, "user_id": 10087711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dVZmRJJMnlw/AAAAAAAAAAI/AAAAAAAAADE/UiKb0Oef9X8/photo.jpg?sz=128", "display_name": "Umesh Maharjan", "link": "https://stackoverflow.com/users/10087711/umesh-maharjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1552470073, "creation_date": 1552470073, "answer_id": 55138624, "question_id": 55132234, "link": "https://stackoverflow.com/questions/55132234/repeat-function-to-call-data-from-server-every-second/55138624#55138624", "title": "Repeat function to call data from server every second", "body": "<pre><code>var timer=Timer()\n    private fun callfunctioneverysecond() {\n\n        val minTask=object : TimerTask() {\n            override fun run() {\n                //call function here\n            }\n        }\n        timer=Timer()\n        timer.schedule(minTask, 0L, 1000 * 1)\n        // timer.cancel()//call timer.cancel when click End button\n    }\n</code></pre>\n"}], "owner": {"reputation": 414, "user_id": 11087216, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QfCCZHRqUcM/AAAAAAAAAAI/AAAAAAAAACo/b9jrw08KaX4/photo.jpg?sz=128", "display_name": "Strohhut", "link": "https://stackoverflow.com/users/11087216/strohhut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552470073, "creation_date": 1552433797, "question_id": 55132234, "link": "https://stackoverflow.com/questions/55132234/repeat-function-to-call-data-from-server-every-second", "title": "Repeat function to call data from server every second", "body": "<p>So if I press the Start button I want to repeat the function \"fetchCarData()\" every Second till I press the End Button. What's the best way to achieve this, is there any fancy Kotlin way of implementing such a thing? </p>\n\n<pre><code>class CarDataSourceImpl(private val carDataService: CarDataService) : CarDataSource {\n\n//Live Data List that can be accessed only by this class\nprivate val _loadedCarData = MutableLiveData&lt;CarResponse&gt;()\n\n//actual Live Data List observed by the Views\noverride val loadedCarData: LiveData&lt;CarResponse&gt;\n    get() = _loadedCarData\n\n//Fetch new Data and notify Observers via Live Data\noverride suspend fun fetchCarData() {\n    try {\n        val fetchedCarData = carDataService\n            .getData()\n            .await()\n        _loadedCarData.postValue(fetchedCarData)\n    } catch (e: NoConnectivityException) {\n        Log.e(\"Connectivity\", \"No Connection\", e)\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["lambda", "kotlin", "range"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1552526193, "post_id": 55132231, "comment_id": 97047326, "body": "Could you show what have you tried so far, and what have you stumble at?"}], "answers": [{"tags": [], "owner": {"reputation": 2273, "user_id": 7661119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nkofM.jpg?s=128&g=1", "display_name": "Ervin Szilagyi", "link": "https://stackoverflow.com/users/7661119/ervin-szilagyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1552435027, "creation_date": 1552435027, "answer_id": 55132408, "question_id": 55132231, "link": "https://stackoverflow.com/questions/55132231/kotlin-lambdas-range-map-filter-and-reduce-fold/55132408#55132408", "title": "Kotlin: Lambdas, range, map, filter and reduce/fold", "body": "<p>We can do the following:</p>\n\n<pre><code>println((1..1000).filter{ it % 3 == 0 || it % 5 == 0 }.reduce{sum, element -&gt; sum + element})\n</code></pre>\n\n<p>Instead of reduce we could use <code>sum</code> as well which would look like this:</p>\n\n<pre><code>println((1..1000).filter{ it % 3 == 0 || it % 5 == 0 }.sum())\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9046825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0db4e1dfd388d058a04691cd66ae4dc3?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Spencer", "link": "https://stackoverflow.com/users/9046825/joe-spencer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1552435027, "creation_date": 1552433755, "question_id": 55132231, "link": "https://stackoverflow.com/questions/55132231/kotlin-lambdas-range-map-filter-and-reduce-fold", "title": "Kotlin: Lambdas, range, map, filter and reduce/fold", "body": "<p>Using the functions such as lambdas, range, map, filter and reduce/fold, calculate the sum of numbers between 1 and 1000 which are divisible by 5 or 3 and print the result.</p>\n"}, {"tags": ["android", "kotlin", "dependency-injection", "retrofit2", "dagger-2"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552482840, "post_id": 55131682, "comment_id": 97025750, "body": "Well I guess you could technically use <code>LifecycleOwner</code> o-o"}, {"owner": {"reputation": 401, "user_id": 10778725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91a11510a77e8ebeb72867ee941142eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/10778725/jos%c3%a9-nobre"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552484938, "post_id": 55131682, "comment_id": 97027239, "body": "Can you post an example above? @EpicPandaForce"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552491327, "post_id": 55131682, "comment_id": 97031998, "body": "Honestly, personally I just wouldn&#39;t have these extension functions at all. You might want to encapsulate the logic of calling to the API in a separate class, for example a ViewModel (in AAC)."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11193980, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mAc0sg8MDj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYTVIQIMiFxxsJnZu-KnurNmx_6Q/mo/photo.jpg?sz=128", "display_name": "Patrik Figura", "link": "https://stackoverflow.com/users/11193980/patrik-figura"}, "reply_to_user": {"reputation": 401, "user_id": 10778725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91a11510a77e8ebeb72867ee941142eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/10778725/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1552432323, "post_id": 55131949, "comment_id": 97005585, "body": "@Jos&#233; Nobre yeah let&#39;s do it."}, {"owner": {"reputation": 401, "user_id": 10778725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91a11510a77e8ebeb72867ee941142eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/10778725/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1552432405, "post_id": 55131949, "comment_id": 97005603, "body": "shared the rest of my code in the question. My callApi() is getting an error of the method cannot be applied to Any"}, {"owner": {"reputation": 31, "user_id": 11193980, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mAc0sg8MDj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYTVIQIMiFxxsJnZu-KnurNmx_6Q/mo/photo.jpg?sz=128", "display_name": "Patrik Figura", "link": "https://stackoverflow.com/users/11193980/patrik-figura"}, "reply_to_user": {"reputation": 401, "user_id": 10778725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91a11510a77e8ebeb72867ee941142eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/10778725/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1552432675, "post_id": 55131949, "comment_id": 97005660, "body": "@Jos&#233;Nobre check it now, if this doesn&#39;t help post error"}, {"owner": {"reputation": 31, "user_id": 11193980, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mAc0sg8MDj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYTVIQIMiFxxsJnZu-KnurNmx_6Q/mo/photo.jpg?sz=128", "display_name": "Patrik Figura", "link": "https://stackoverflow.com/users/11193980/patrik-figura"}, "reply_to_user": {"reputation": 401, "user_id": 10778725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91a11510a77e8ebeb72867ee941142eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/10778725/jos%c3%a9-nobre"}, "edited": false, "score": 0, "creation_date": 1552433187, "post_id": 55131949, "comment_id": 97005788, "body": "I change callApi() method name to performCall()"}, {"owner": {"reputation": 3230, "user_id": 6071729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YpjDR.jpg?s=128&g=1", "display_name": "A Farmanbar", "link": "https://stackoverflow.com/users/6071729/a-farmanbar"}, "edited": false, "score": 0, "creation_date": 1552434739, "post_id": 55131949, "comment_id": 97006201, "body": "it looks wrong but i don&#39;t know why it had up vote .because, fragment is sub-activity and would 2 condition be true.but i am not sure."}, {"owner": {"reputation": 31, "user_id": 11193980, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mAc0sg8MDj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYTVIQIMiFxxsJnZu-KnurNmx_6Q/mo/photo.jpg?sz=128", "display_name": "Patrik Figura", "link": "https://stackoverflow.com/users/11193980/patrik-figura"}, "reply_to_user": {"reputation": 3230, "user_id": 6071729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YpjDR.jpg?s=128&g=1", "display_name": "A Farmanbar", "link": "https://stackoverflow.com/users/6071729/a-farmanbar"}, "edited": false, "score": 0, "creation_date": 1552490954, "post_id": 55131949, "comment_id": 97031753, "body": "@Mr.AF &quot;...because, fragment is sub-activity...&quot; what are you talking about? No fragment doesn&#39;t extend from activity"}], "tags": [], "owner": {"reputation": 31, "user_id": 11193980, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mAc0sg8MDj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYTVIQIMiFxxsJnZu-KnurNmx_6Q/mo/photo.jpg?sz=128", "display_name": "Patrik Figura", "link": "https://stackoverflow.com/users/11193980/patrik-figura"}, "is_accepted": false, "score": 2, "last_activity_date": 1552432658, "last_edit_date": 1552432658, "creation_date": 1552431804, "answer_id": 55131949, "question_id": 55131682, "link": "https://stackoverflow.com/questions/55131682/how-to-call-static-methods-in-fragment-and-activities/55131949#55131949", "title": "How to call static methods in fragment and activities?", "body": "<p>I think you shouldn't go this way as this one differentiates between Activity and Fragment - they both are very different.</p>\n\n<p>This is way to go but I wouldn't do that:</p>\n\n<pre><code>fun &lt;T&gt; Any.callAPI(call: Call&lt;T&gt;?, listener: BaseFragment.OnFragmentInteractionListener, onSucceed: (T?) -&gt; Unit) {\n    when(this){\n       is BaseFragment -&gt; performCall(call, listener, onSucceed, {})\n       is BaseActivity -&gt; performCall(call, onSucceed, {})\n    }\n}\n\n\nfun &lt;T&gt; BaseActivity.performCall(call: Call&lt;T&gt;?, onSucceed: (T?) -&gt; Unit, onError: (errorCode: String) -&gt; Unit) {\n    NetworkManager.instance.performCall(call,\n        object : NetworkManager.OnRequestCallback&lt;T&gt; {\n            override fun onSuccess(body: T?) {\n                onSucceed(body)\n            }\n\n            override fun onError(errorCode: String?) {}\n\n            override fun onTwoFactorRequired() {\n                onAuthenticationNeeded()\n            }\n        }) { onAppUpdateNeeded() }\n}\n\nfun &lt;T&gt; BaseFragment.performCall(call: Call&lt;T&gt;?, onSucceed: (T?) -&gt; Unit, onError: (errorCode: String) -&gt; Unit) {\n        NetworkManager.instance.performCall(call,\n            object : NetworkManager.OnRequestCallback&lt;T&gt; {\n                override fun onSuccess(body: T?) {\n                    onSucceed(body)\n                }\n\n                override fun onError(errorCode: String?) {}\n\n                override fun onTwoFactorRequired() {\n                    onAuthenticationNeeded()\n                }\n            }) { onAppUpdateNeeded() }\n    }\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 10778725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91a11510a77e8ebeb72867ee941142eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/10778725/jos%c3%a9-nobre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552436478, "creation_date": 1552430344, "last_edit_date": 1552433694, "question_id": 55131682, "link": "https://stackoverflow.com/questions/55131682/how-to-call-static-methods-in-fragment-and-activities", "title": "How to call static methods in fragment and activities?", "body": "<p>I have an <strong>api method</strong> call that is called either in <strong>activities</strong> our <strong>fragment</strong>, the problem is that I need to have two equal methods with only the type(<strong>BaseActivity</strong> our <strong>BaseFragment</strong>) changing like this:</p>\n\n<pre><code>fun &lt;T&gt; BaseActivity.callAPI(call: Call&lt;T&gt;?, onSucceed: (T?) -&gt; Unit) {\n    callAPI(call, onSucceed, {})\n}\n\nfun &lt;T&gt; BaseFragment.callAPI(call: Call&lt;T&gt;?, listener: BaseFragment.OnFragmentInteractionListener, onSucceed: (T?) -&gt; Unit) {\n    callAPI(call, listener, onSucceed, {})\n}\n</code></pre>\n\n<p>Is there a way to only have one <strong>method</strong> that does not include passing a parameter if its a fragment our an activity</p>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-authentication"], "answers": [{"comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1552429891, "post_id": 55131517, "comment_id": 97004858, "body": "Instead of posting an answer which merely links to another answer, please instead <a href=\"https://stackoverflow.com/help/privileges/flag-posts\">flag the question</a> as a duplicate."}], "tags": [], "owner": {"reputation": 285, "user_id": 7195804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aoJkY.jpg?s=128&g=1", "display_name": "Kuba Paw\u0142owski", "link": "https://stackoverflow.com/users/7195804/kuba-paw%c5%82owski"}, "is_accepted": false, "score": 0, "last_activity_date": 1552429411, "creation_date": 1552429411, "answer_id": 55131517, "question_id": 55131404, "link": "https://stackoverflow.com/questions/55131404/kotlin-android-studio-app-crashing-on-register-when-e-mail-address-is-badly-fo/55131517#55131517", "title": "Kotlin/Android Studio - App crashing on register when e-mail address is badly formatted", "body": "<p>Validate if email string is a valid email before sending it, for instance using <a href=\"https://stackoverflow.com/questions/6119722/how-to-check-edittexts-text-is-email-address-or-not/6119777#6119777\">this method</a></p>\n"}], "owner": {"reputation": 39, "user_id": 11193816, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fNY569lWSN4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re2CzMQPx9PzBoyQV35tN-Cu3cHdw/mo/photo.jpg?sz=128", "display_name": "Oliver Smith", "link": "https://stackoverflow.com/users/11193816/oliver-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "closed_date": 1552459084, "answer_count": 1, "score": 1, "last_activity_date": 1561643315, "creation_date": 1552428653, "last_edit_date": 1561643315, "question_id": 55131404, "link": "https://stackoverflow.com/questions/55131404/kotlin-android-studio-app-crashing-on-register-when-e-mail-address-is-badly-fo", "closed_reason": "Duplicate", "title": "Kotlin/Android Studio - App crashing on register when e-mail address is badly formatted", "body": "<p>Sorry - I'm very new to Kotlin and Android sdk, but I'm hoping that means this will be an easy question to solve!</p>\n\n<p>When using the register page for my app, the app crashes every time I try to register using an invalid e-mail address (For example: \"test\"), I have already created an .addOnFailureListener (visible at the bottom of my code below) - but I still receive an error saying \"the email address is badly formatted\". My app seems to crash before my \"Toast.makeText\" has a chance to address the problem to the user. Is there a way I can stop the register completely if the email address is not a valid one? Or is there another way I can get around this issue? </p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    register_button_register.setOnClickListener {\n        performRegister()\n    }\n\n    already_have_account_text_view.setOnClickListener {\n        Log.d(\"MainActivity\", \"Try to show login activity\")\n\n        val intent = Intent(this, LoginActivity::class.java)\n        startActivity(intent)\n    }\n\n}\n\nprivate fun performRegister() {\n    val email = email_edittext_register.text.toString()\n    val password = password_edittext_register.text.toString()\n\n    if (email.isEmpty() || password.isEmpty()) {\n        Toast.makeText(this, \"Please enter your email and password\", Toast.LENGTH_SHORT).show()\n        return\n    }\n\n    Log.d(\"MainActivity\", \"Email is: \" + email)\n    Log.d(\"MainActivity\", \"Password: $password\")\n\n    FirebaseAuth.getInstance().createUserWithEmailAndPassword(email, password)\n        .addOnCompleteListener {\n            if (it.isSuccessful) return@addOnCompleteListener\n\n            Log.d(\"Main\", \"Successfully created user with uid: ${it.result.user.uid}\")\n        }\n        .addOnFailureListener{\n            Log.d(\"Main\", \"Failed to create user: ${it.message}\")\n            Toast.makeText(this, \"Please enter a valid email and password\", Toast.LENGTH_SHORT).show()\n        }\n\n}\n</code></pre>\n\n<p>this is the error message I'm facing:</p>\n\n<pre><code>2019-03-12 22:04:48.112 29082-29082/com.example.messenger E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.messenger, PID: 29082\n    com.google.android.gms.tasks.RuntimeExecutionException: com.google.firebase.auth.FirebaseAuthInvalidCredentialsException: The email address is badly formatted.\n        at com.google.android.gms.tasks.zzu.getResult(Unknown Source:21)\n        at com.example.messenger.MainActivity$performRegister$1.onComplete(MainActivity.kt:51)\n        at com.google.android.gms.tasks.zzj.run(Unknown Source:23)\n        at android.os.Handler.handleCallback(Handler.java:873)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:193)\n        at android.app.ActivityThread.main(ActivityThread.java:6669)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n     Caused by: com.google.firebase.auth.FirebaseAuthInvalidCredentialsException: The email address is badly formatted.\n        at com.google.firebase.auth.api.internal.zzce.zzb(Unknown Source:223)\n        at com.google.firebase.auth.api.internal.zzbb.zza(Unknown Source:42)\n        at com.google.firebase.auth.api.internal.zzcy.zzc(Unknown Source:11)\n        at com.google.firebase.auth.api.internal.zzdb.onFailure(Unknown Source:35)\n        at com.google.firebase.auth.api.internal.zzci.dispatchTransaction(Unknown Source:83)\n        at com.google.android.gms.internal.firebase_auth.zzb.onTransact(Unknown Source:22)\n        at android.os.Binder.execTransact(Binder.java:731)\n\n2019-03-12 22:04:48.114 1882-2869/? W/ActivityManager:   Force finishing activity com.example.messenger/.MainActivity\n\n2019-03-12 22:04:48.149 1882-1955/? W/InputDispatcher: channel '37860b6 com.example.messenger/com.example.messenger.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x9\n\n2019-03-12 22:04:48.149 1882-1955/? E/InputDispatcher: channel '37860b6 com.example.messenger/com.example.messenger.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!\n\n2019-03-12 22:04:48.154 1882-4213/? I/WindowManager: WIN DEATH: Window{37860b6 u0 com.example.messenger/com.example.messenger.MainActivity}\n\n2019-03-12 22:04:48.154 1882-4213/? W/InputDispatcher: Attempted to unregister already unregistered input channel '37860b6 com.example.messenger/com.example.messenger.MainActivity (server)'\n\n2019-03-12 22:04:48.160 1723-1747/? W/SurfaceFlinger: Attempting to set client state on removed layer: com.example.messenger/com.example.messenger.MainActivity#0\n\n2019-03-12 22:04:48.160 1723-1747/? W/SurfaceFlinger: Attempting to destroy on removed layer: com.example.messenger/com.example.messenger.MainActivity#0\n\n2019-03-12 22:04:48.164 1723-1776/? W/SurfaceFlinger: Attempting to destroy on removed layer: AppWindowToken{4e2ac9 token=Token{5d60ad0 ActivityRecord{626da93 u0 com.example.messenger/.MainActivity t37}}}#0\n\n2019-03-12 22:04:49.332 27898-27898/? I/Choreographer: Skipped 34 frames!  The application may be doing too much work on its main thread.\n\n2019-03-12 22:04:49.426 1882-1936/? I/Choreographer: Skipped 39 frames!  The application may be doing too much work on its main thread.\n\n2019-03-12 22:04:49.426 2609-2609/? I/Choreographer: Skipped 41 frames!  The application may be doing too much work on its main thread.\n\n2019-03-12 22:04:49.439 2021-2021/? I/Choreographer: Skipped 55 frames!  The application may be doing too much work on its main thread.\n</code></pre>\n\n<p>Can anyone make sense of this? Sorry I know that error is a long one, but maybe it means something to someone out there.</p>\n"}, {"tags": ["kotlin", "forkjoinpool", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "edited": false, "score": 0, "creation_date": 1552430878, "post_id": 55131440, "comment_id": 97005146, "body": "Thanks for the response. Work stealing helps if the server is under low load. For the sake of simplicity say we have only a single CPU/core/hyper-thread. Request 1 comes in and needs a DB lookup so we do that in a suspend function. Then request 2 comes in and also needs a DB lookup, then request 3, etc. Assuming all lookups take the same amount of time db lookup for 1 finished before 2, before 3, etc. but if I was busy handling a new request while several DB results finished I could end up handle the DB results in <i>reverse</i> order, first helping user 3, then 2, then 1 which seem wrong."}, {"owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "edited": false, "score": 0, "creation_date": 1552430888, "post_id": 55131440, "comment_id": 97005150, "body": "&quot;This mode may be more appropriate than default locally stack-based mode in applications in which worker threads only process event-style asynchronous tasks&quot; - isn&#39;t that exactly the case here? That is, isn&#39;t it telling me <i>not</i> to use the defaults?"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "edited": false, "score": 0, "creation_date": 1552432314, "post_id": 55131440, "comment_id": 97005581, "body": "&quot;Work stealing helps if the server is under low load&quot; - this is simply incorrect. Workstealing helps when you have many small tasks. In case of Kotlin, every block between two suspending functions is considered a task. You&#39;re correct that coroutines may finish in different order than they were originally submitted. There&#39;s nothing wrong with it."}, {"owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "edited": false, "score": 0, "creation_date": 1552432994, "post_id": 55131440, "comment_id": 97005730, "body": "If I understanding correctly, work stealing helps when you have many small tasks <b>and</b> there&#39;s a free thread to steal work. But if all threads stay busy they won&#39;t steal work - they&#39;ll each continue to work on their own queues in LIFO order, right? For simplicity say I have 1 thread in CommonPool (1 CPU) and I never suspend. I have an HTTP server that enqueues each HTTP request as a coroutine. So request 1 comes in and I start working on it. While I&#39;m doing that requests 2 - 100 come in. When I&#39;m done with 1 I&#39;ll pick the next task from the ForkJoinPool task queue which would be request 100."}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "edited": false, "score": 0, "creation_date": 1552466993, "post_id": 55131440, "comment_id": 97015693, "body": "With single thread, after you complete task 1, you&#39;ll start with task 2. You don&#39;t steal work from yourself. BTW, I would suggest you to start a discussion on <a href=\"https://discuss.kotlinlang.org\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org</a> - it&#39;s better suited for theoretical discussions, and some Kotlin authors also answer there often."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 0, "last_activity_date": 1552428874, "creation_date": 1552428874, "answer_id": 55131440, "question_id": 55131122, "link": "https://stackoverflow.com/questions/55131122/forkjoinpool-and-kotlin-coroutines/55131440#55131440", "title": "ForkJoinPool and Kotlin Coroutines", "body": "<p>This shouldn't be a concern, because <code>ForkJoinPool</code> is not really LIFO.</p>\n\n<p>That is, it's LIFO for a single thread in the pool, but that's where things become interesting with \"work stealing part\". Task queue for each thread is double linked. So, what is LIFO for one thread is FIFO for another thread that became free.</p>\n\n<p>In general, ForkJoinPool is a great solution for small tasks, and usually your coroutines are considered small, if you use suspending functions wisely.</p>\n\n<p>Also, you can read more about <code>asyncMode</code> in documentation, as it's not that \"async\": <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html</a></p>\n\n<blockquote>\n  <p>asyncMode - if true, establishes local first-in-first-out scheduling\n  mode for forked tasks that are never joined. This mode may be more\n  appropriate than default locally stack-based mode in applications in\n  which worker threads only process event-style asynchronous tasks. For\n  default value, use false.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "is_accepted": true, "score": 2, "last_activity_date": 1552851723, "creation_date": 1552851723, "answer_id": 55211162, "question_id": 55131122, "link": "https://stackoverflow.com/questions/55131122/forkjoinpool-and-kotlin-coroutines/55211162#55211162", "title": "ForkJoinPool and Kotlin Coroutines", "body": "<p>Per <a href=\"https://discuss.kotlinlang.org/t/commonpool-default-for-coroutines/11965\" rel=\"nofollow noreferrer\">discussion</a> on Kotlin Discuss CommonPool is no longer the default and they now default to a \"mostly fair\" scheduler. Details in the linked discussion.</p>\n"}], "owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 1, "accepted_answer_id": 55211162, "answer_count": 2, "score": 2, "last_activity_date": 1552851723, "creation_date": 1552427198, "question_id": 55131122, "link": "https://stackoverflow.com/questions/55131122/forkjoinpool-and-kotlin-coroutines", "title": "ForkJoinPool and Kotlin Coroutines", "body": "<p>As I understand it, by default, if you start a Kotlin Coroutine via <code>launch</code> or <code>async</code> it'll launch in <code>CommonPool</code> (or if you use <code>GlobalScope</code>). And <code>CommonPool</code> is a <code>ForkJoinPool</code> and that, by default, is in non-async mode so it executes tasks in LIFO order. That seems like a very bad choice for something like asynchronous web server applications where we'd want fair scheduling: we don't want the poor sucker who hit our web server first to wait for all calls that came later.</p>\n\n<p>However, Kotlin coroutines add an additional wrinkle here in that there's some bit of code from the Kotlin standard library that will arrange to have those coroutines executed (some variation of the standard asyc select/epoll loop as I understand it). So maybe the LIFO thing isn't a concern?</p>\n\n<p>I could certainly run some experiments and/or step into the code in a debugger to see how this works but I suspect other's have the same question and I bet somebody \"just knows\" the answer...</p>\n"}, {"tags": ["android", "kotlin", "android-view", "radio-group", "programmatically"], "comments": [{"owner": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1552427529, "post_id": 55130993, "comment_id": 97003963, "body": "Generate id out of for loop and assign to a variable and give ids like <code>generatedId + index</code> in the loop. Then you can get buttons with the same logic."}, {"owner": {"reputation": 650, "user_id": 5076153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ced3aecfb433928ab4ae9a73365be71e?s=128&d=identicon&r=PG&f=1", "display_name": "Barcode", "link": "https://stackoverflow.com/users/5076153/barcode"}, "reply_to_user": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1552428352, "post_id": 55130993, "comment_id": 97004279, "body": "@underoid <code>generateViewId</code> produces an <code>Int</code> tho, so adding the index, wouldn&#39;t really make sense no?"}, {"owner": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1552428483, "post_id": 55130993, "comment_id": 97004336, "body": "I mean index of your for loop which is also an Int would make sense I think."}, {"owner": {"reputation": 650, "user_id": 5076153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ced3aecfb433928ab4ae9a73365be71e?s=128&d=identicon&r=PG&f=1", "display_name": "Barcode", "link": "https://stackoverflow.com/users/5076153/barcode"}, "reply_to_user": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1552429079, "post_id": 55130993, "comment_id": 97004564, "body": "@underoid so for example <code>generateViewId</code> generates an int id of <code>10</code>, and index is <code>1</code>, so the id will be <code>11</code>?"}, {"owner": {"reputation": 650, "user_id": 5076153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ced3aecfb433928ab4ae9a73365be71e?s=128&d=identicon&r=PG&f=1", "display_name": "Barcode", "link": "https://stackoverflow.com/users/5076153/barcode"}, "reply_to_user": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1552429218, "post_id": 55130993, "comment_id": 97004618, "body": "@underoid oh ok i see, i think i get what you mean now, i&#39;ll ge tit a try"}, {"owner": {"reputation": 650, "user_id": 5076153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ced3aecfb433928ab4ae9a73365be71e?s=128&d=identicon&r=PG&f=1", "display_name": "Barcode", "link": "https://stackoverflow.com/users/5076153/barcode"}, "reply_to_user": {"reputation": 369, "user_id": 10610726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cafc69550256823872e26986bfa833cb?s=128&d=identicon&r=PG&f=1", "display_name": "underoid", "link": "https://stackoverflow.com/users/10610726/underoid"}, "edited": false, "score": 0, "creation_date": 1552430823, "post_id": 55130993, "comment_id": 97005123, "body": "@underoid i can&#39;t seem to get the buttons after adding the radio button to the <code>radiogrp</code> view. I&#39;ve tried <code>val card1 = dialog.findViewById&lt;RadioButton&gt;(viewId+index)</code> (the id&#39;s are the same, i did a <code>Log.d</code> to check"}], "answers": [{"tags": [], "owner": {"reputation": 1759, "user_id": 974184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2f97a8d3cae8511952cb3eda041027?s=128&d=identicon&r=PG", "display_name": "Rodrigo Queiroz", "link": "https://stackoverflow.com/users/974184/rodrigo-queiroz"}, "is_accepted": true, "score": 1, "last_activity_date": 1552431601, "last_edit_date": 1552431601, "creation_date": 1552431018, "answer_id": 55131804, "question_id": 55130993, "link": "https://stackoverflow.com/questions/55130993/how-to-call-a-view-that-had-its-id-set-with-view-generateviewid/55131804#55131804", "title": "how to call a view that had it&#39;s id set with View.generateViewId()", "body": "<p>can you not use View tags for some sort of unique identifier?</p>\n\n<p>E.g:</p>\n\n<pre><code>val rd = RadioGroup(context)\nval records = listOf(\n    \"a\" to \"some record\",\n    \"b\" to \"some record\",\n    \"c\" to \"some record\"\n)\nfor (record in records) {\n    val btn = RadioButton(context)\n    btn.tag = record.first\n    btn.id = View.generateViewId()\n    rd.addView(btn)\n}\nradio_group.addView(rd)\nrd.setOnCheckedChangeListener { _, checkedId -&gt;\n    val btn = radio_group.findViewById&lt;RadioButton&gt;(checkedId)\n    println(btn.tag)\n}\n</code></pre>\n\n<p>So you can do <code>val btn = radio_group.findViewWithTag&lt;RadioButton&gt;(\"a\")</code> if needed be.</p>\n"}], "owner": {"reputation": 650, "user_id": 5076153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ced3aecfb433928ab4ae9a73365be71e?s=128&d=identicon&r=PG&f=1", "display_name": "Barcode", "link": "https://stackoverflow.com/users/5076153/barcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 55131804, "answer_count": 1, "score": 0, "last_activity_date": 1552431935, "creation_date": 1552426573, "question_id": 55130993, "link": "https://stackoverflow.com/questions/55130993/how-to-call-a-view-that-had-its-id-set-with-view-generateviewid", "title": "how to call a view that had it&#39;s id set with View.generateViewId()", "body": "<p>i have a method called <code>addRadioButtons</code> that queries my database for the user's credits cards, and then display in as <code>radiobuttons</code> in a <code>radiogroup</code> in a <code>Dialog</code>. I save the <code>radiobutton</code>, and the <code>dataSnapshot</code> as a pair in a <code>HashMap</code>.</p>\n\n<p>Now my problem is, when a user checks a radiobutton, i have no idea how to check if it's been checked because i dont know the <code>id</code>.</p>\n\n<p><strong>addRadioButtons()</strong></p>\n\n<pre><code>if(dataSnapshot.exists()){\n    val ll = RadioGroup(context)\n    for (source: DataSnapshot in dataSnapshot.children) {\n        val last4 = source.child(\"last4\").value.toString()\n        val brand = source.child(\"brand\").value.toString()\n\n        val rdbtn = RadioButton(context)\n        rdbtn.id = View.generateViewId()\n\n        val textStr = \"$brand ************$last4\"\n        rdbtn.text = textStr\n        ll.addView(rdbtn)\n        radioButtonMap.put(rdbtn, source)\n   }\n   radiogrp.addView(ll)\n}\n</code></pre>\n\n<p><strong>openDialog()</strong></p>\n\n<pre><code>private fun openDialog() {\n    val dialog = Dialog(this.context!!)\n\n    dialog.setContentView(R.layout.stripe_layout)\n    val lp : WindowManager.LayoutParams = WindowManager.LayoutParams().apply {\n        copyFrom(dialog.window?.attributes)\n        width = WindowManager.LayoutParams.MATCH_PARENT\n        height = WindowManager.LayoutParams.WRAP_CONTENT\n    }\n\n    radiogrp = dialog.findViewById&lt;View&gt;(R.id.radio_group) as RadioGroup\n    addRadioButtons()\n    //HOW DO I USE THIS?!?\n    //radiogrp.setOnCheckedChangeListener\n</code></pre>\n"}, {"tags": ["unit-testing", "mvvm", "kotlin", "android-room"], "answers": [{"tags": [], "owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "is_accepted": true, "score": 0, "last_activity_date": 1552446076, "creation_date": 1552446076, "answer_id": 55133685, "question_id": 55130732, "link": "https://stackoverflow.com/questions/55130732/error-in-multiple-unit-test-being-tested-at-once/55133685#55133685", "title": "Error in multiple Unit Test being tested at once", "body": "<p>Ok So I came across this blog post</p>\n\n<p><a href=\"https://artemzin.com/blog/how-to-mock-dependencies-in-unit-integration-and-functional-tests-dagger-robolectric-instrumentation/\" rel=\"nofollow noreferrer\">https://artemzin.com/blog/how-to-mock-dependencies-in-unit-integration-and-functional-tests-dagger-robolectric-instrumentation/</a></p>\n\n<p>and in the comments, there is this comment by Krzysiek Bielicki </p>\n\n<p>You can just create Application class prefixed with 'Test'. Robolectric will automatically use it as Application for all tests.</p>\n\n<p>So I tried that created class TestWordApplication added everything that was in WordApplication (but excluded the call to initializationLogging() and now all the test pass as its no longer trying to access and purge the actual database.</p>\n\n<p>I found this also on the Robolectric website confirming \n<a href=\"http://robolectric.org/custom-test-runner/\" rel=\"nofollow noreferrer\">http://robolectric.org/custom-test-runner/</a></p>\n\n<p>Thanks.  and a very special thank you to Krzysiek Bielicki (whomever you are) as you just made my night :)</p>\n"}], "owner": {"reputation": 487, "user_id": 10497708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/goG0z.jpg?s=128&g=1", "display_name": "Crash1hd", "link": "https://stackoverflow.com/users/10497708/crash1hd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 55133685, "answer_count": 1, "score": 0, "last_activity_date": 1552446076, "creation_date": 1552425192, "question_id": 55130732, "link": "https://stackoverflow.com/questions/55130732/error-in-multiple-unit-test-being-tested-at-once", "title": "Error in multiple Unit Test being tested at once", "body": "<p>In the following project</p>\n\n<p><a href=\"https://github.com/Crash1hd/MultipleTestTesting\" rel=\"nofollow noreferrer\">https://github.com/Crash1hd/MultipleTestTesting</a></p>\n\n<p>I am getting the following error</p>\n\n<pre><code>java.lang.IllegalStateException: Illegal connection pointer 1. Current pointers for thread Thread[DefaultDispatcher-worker-1 @coroutine#3,5,SDK 28] []\n\n    at org.robolectric.shadows.ShadowSQLiteConnection$Connections.getConnection(ShadowSQLiteConnection.java:367)\n    at org.robolectric.shadows.ShadowSQLiteConnection$Connections.prepareStatement(ShadowSQLiteConnection.java:416)\n    at org.robolectric.shadows.ShadowSQLiteConnection.nativePrepareStatement(ShadowSQLiteConnection.java:89)\n    at android.database.sqlite.SQLiteConnection.nativePrepareStatement(SQLiteConnection.java)\n    at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:903)\n    at android.database.sqlite.SQLiteConnection.execute(SQLiteConnection.java:562)\n    at android.database.sqlite.SQLiteSession.beginTransactionUnchecked(SQLiteSession.java:323)\n    at android.database.sqlite.SQLiteSession.beginTransaction(SQLiteSession.java:298)\n    at android.database.sqlite.SQLiteDatabase.beginTransaction(SQLiteDatabase.java:549)\n    at android.database.sqlite.SQLiteDatabase.beginTransaction(SQLiteDatabase.java:460)\n    at androidx.sqlite.db.framework.FrameworkSQLiteDatabase.beginTransaction(FrameworkSQLiteDatabase.java:69)\n    at androidx.room.RoomDatabase.beginTransaction(RoomDatabase.java:277)\n    at com.mycomp.roomwordsample.data.db.WordDao_Impl.deleteAll(WordDao_Impl.java:81)\n    at com.mycomp.roomwordsample.data.db.WordRepository$deleteAllLogsOlderThan$2.invokeSuspend(WordRepository.kt:28)\n    at |b|b|b(Coroutine boundary.|b(|b)\n    at com.mycomp.roomwordsample.ui.WordViewModel$deleteAllLogsOlderThanA$1.invokeSuspend(WordViewModel.kt:36)\nCaused by: java.lang.IllegalStateException: Illegal connection pointer 1. Current pointers for thread Thread[DefaultDispatcher-worker-1 @coroutine#3,5,SDK 28] []\n    at org.robolectric.shadows.ShadowSQLiteConnection$Connections.getConnection(ShadowSQLiteConnection.java:367)\n    at org.robolectric.shadows.ShadowSQLiteConnection$Connections.prepareStatement(ShadowSQLiteConnection.java:416)\n    at org.robolectric.shadows.ShadowSQLiteConnection.nativePrepareStatement(ShadowSQLiteConnection.java:89)\n    at android.database.sqlite.SQLiteConnection.nativePrepareStatement(SQLiteConnection.java)\n    at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:903)\n    at android.database.sqlite.SQLiteConnection.execute(SQLiteConnection.java:562)\n    at android.database.sqlite.SQLiteSession.beginTransactionUnchecked(SQLiteSession.java:323)\n    at android.database.sqlite.SQLiteSession.beginTransaction(SQLiteSession.java:298)\n    at android.database.sqlite.SQLiteDatabase.beginTransaction(SQLiteDatabase.java:549)\n    at android.database.sqlite.SQLiteDatabase.beginTransaction(SQLiteDatabase.java:460)\n    at androidx.sqlite.db.framework.FrameworkSQLiteDatabase.beginTransaction(FrameworkSQLiteDatabase.java:69)\n    at androidx.room.RoomDatabase.beginTransaction(RoomDatabase.java:277)\n    at com.mycomp.roomwordsample.data.db.WordDao_Impl.deleteAll(WordDao_Impl.java:81)\n    at com.mycomp.roomwordsample.data.db.WordRepository$deleteAllLogsOlderThan$2.invokeSuspend(WordRepository.kt:28)\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:32)\n    at kotlinx.coroutines.DispatchedTask.run(Dispatched.kt:233)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:594)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler.access$runSafely(CoroutineScheduler.kt:60)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:742)\n</code></pre>\n\n<p>When I run this set of tests\n<a href=\"https://github.com/Crash1hd/MultipleTestTesting/blob/master/app/src/test/java/com/mycomp/roomwordsample/WordDaoTestA.kt\" rel=\"nofollow noreferrer\">https://github.com/Crash1hd/MultipleTestTesting/blob/master/app/src/test/java/com/mycomp/roomwordsample/WordDaoTestA.kt</a></p>\n\n<p>It seems to have to do with the function that I am calling in initializationLogging in WordApplication\n<a href=\"https://github.com/Crash1hd/MultipleTestTesting/blob/master/app/src/main/java/com/mycomp/roomwordsample/WordApplication.kt\" rel=\"nofollow noreferrer\">https://github.com/Crash1hd/MultipleTestTesting/blob/master/app/src/main/java/com/mycomp/roomwordsample/WordApplication.kt</a></p>\n\n<p>Commenting out LogA.purgeOldLogsGreaterThan(7) this line all the tests pass.</p>\n\n<p>I am at a loss as to why it is failing? each test is exactly the same and they all work (just not all at once).</p>\n\n<p>I am wondering if it has to do with how I am calling the WordViewModel in application...</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3768, "user_id": 848025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OMtFu.jpg?s=128&g=1", "display_name": "Matej", "link": "https://stackoverflow.com/users/848025/matej"}, "edited": false, "score": 0, "creation_date": 1552425672, "post_id": 55130723, "comment_id": 97003210, "body": "Hey thanks, I get the idea behind properties in Kotlin. The question however is related to properties defined in interface. You can&#39;t define Java Beans in interfaces in Java.  So the question is more related to -&gt; is this feature of Kotlin considered a good coding practice?"}, {"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "reply_to_user": {"reputation": 3768, "user_id": 848025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OMtFu.jpg?s=128&g=1", "display_name": "Matej", "link": "https://stackoverflow.com/users/848025/matej"}, "edited": false, "score": 1, "creation_date": 1552425791, "post_id": 55130723, "comment_id": 97003260, "body": "Property in the interface is equivalent to getter (and probably setter) methods. It makes sense to have them there to make your code shorted and easier to read"}, {"owner": {"reputation": 99, "user_id": 1041911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS0jr.jpg?s=128&g=1", "display_name": "Pamela Hill", "link": "https://stackoverflow.com/users/1041911/pamela-hill"}, "edited": false, "score": 1, "creation_date": 1552469369, "post_id": 55130723, "comment_id": 97017148, "body": "Something that wasn&#39;t mentioned is that properties on interfaces can&#39;t have backing data, so it&#39;s always derived from something already on the interface. So, a property could be a computation that&#39;s a bit more convenient to something already on the interface. For example, say you have a Number interface, we could add a property isPrime perhaps?"}], "tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1552425835, "last_edit_date": 1552425835, "creation_date": 1552425137, "answer_id": 55130723, "question_id": 55130505, "link": "https://stackoverflow.com/questions/55130505/should-i-use-properties-in-interface-in-kotlin/55130723#55130723", "title": "Should I use properties in interface in Kotlin?", "body": "<p>Properties in Kotlin are a shorthand to Java Beans naming convention, a read-only property is the same as a getter, a writeable property is a pair of getter and setter. You may use properties for Java getters and settings on Kotlin too. Same applies both to classes and interfaces.</p>\n\n<p>Properties have shorted syntax and improve readability</p>\n\n<p>Delegated properties in Kotlin helps to build come up with short and powerful code, e.g. <code>val lazyCompoutedVariable by lazy { computeIt() }</code></p>\n\n<p>Properties are likely to be cheap to call, the same code style is used, for example in C#</p>\n\n<p>You may find more information on that in the documentation \n<a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/properties.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1552461563, "creation_date": 1552461563, "answer_id": 55136385, "question_id": 55130505, "link": "https://stackoverflow.com/questions/55130505/should-i-use-properties-in-interface-in-kotlin/55136385#55136385", "title": "Should I use properties in interface in Kotlin?", "body": "<p>They are used in the standard library, e.g. <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-char-sequence/length.html\" rel=\"nofollow noreferrer\"><code>CharSequence#length</code></a>, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-collection/size.html\" rel=\"nofollow noreferrer\"><code>Collection#size</code></a> are just the first ones I've thought of. If the alternative is forcing them to be <code>getLength()</code>/<code>getSize()</code>, this seems obviously bad. </p>\n\n<p>Do you remove <code>String#length</code>? Do you implement <code>length</code> for every implementation of <code>CharSequence</code> separately? Do you make <code>length</code> an extension property</p>\n\n<pre><code>val CharSequence.length get() = this.getLength()\n</code></pre>\n\n<p>? Only the last one seems remotely acceptable. </p>\n\n<p>Or you can just have <code>val length</code> in <code>CharSequence</code> and no problems :)</p>\n"}], "owner": {"reputation": 3768, "user_id": 848025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OMtFu.jpg?s=128&g=1", "display_name": "Matej", "link": "https://stackoverflow.com/users/848025/matej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 55130723, "answer_count": 2, "score": 0, "last_activity_date": 1552461563, "creation_date": 1552424091, "question_id": 55130505, "link": "https://stackoverflow.com/questions/55130505/should-i-use-properties-in-interface-in-kotlin", "title": "Should I use properties in interface in Kotlin?", "body": "<p>I'm learning Kotlin and coming from Java world I find idea of properties in interfaces quite peculiar.</p>\n\n<ul>\n<li>What's the general consensus on properties in interfaces? </li>\n<li>Is it considered a good practice to have them?</li>\n</ul>\n\n<p>I've seen few discussions on the related topic but for C# but none on Kotlin.</p>\n"}, {"tags": ["android", "sqlite", "kotlin"], "comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1552423875, "post_id": 55130205, "comment_id": 97002475, "body": "Hi, this is not your typical forum, so questions like &quot;hey guys, anybody see this happen before?&quot; won&#39;t be accepted well. We want to help you but this is all information we get from you. Where&#39;s the stacktrace? What&#39;s <code>this</code>? What have you tried so far? What&#39;s the fully qualified class name for <code>SQLiteException</code>? Everything is important and can help figuring out what&#39;s wrong. <code>there was no suitable answer for my case</code> So what is your case?"}, {"owner": {"reputation": 825, "user_id": 7906057, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100004916147744/picture?type=large", "display_name": "Mark Delphi", "link": "https://stackoverflow.com/users/7906057/mark-delphi"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1552424595, "post_id": 55130205, "comment_id": 97002778, "body": "Sorry for the less information, I updated my question and added some details."}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1552426890, "post_id": 55130205, "comment_id": 97003700, "body": "It would be best if you answered all the questions instead of picking just one. For example, what have you tried so far? <code>I tried to search for this problem on Google</code> That&#39;s good, put a list of links in your questions so we know what we&#39;re not supposed to send you, because you already tried. I found <a href=\"https://stackoverflow.com/questions/46916210\">this</a>. Can you debug and check what&#39;s <code>Activity.getResource().getConfiguration().locale</code>? Try searching for <code>&quot;nativeRegisterLocalizedCollators&quot; &quot;not an error&quot;</code>."}, {"owner": {"reputation": 825, "user_id": 7906057, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100004916147744/picture?type=large", "display_name": "Mark Delphi", "link": "https://stackoverflow.com/users/7906057/mark-delphi"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1552492370, "post_id": 55130205, "comment_id": 97032712, "body": "Hello Eugen, thank you very much for your tipp. I am sorry that my question was not too clear for you. But nevertheless, I could fix the problem. Please find the solution I provide as the answer of this question."}], "answers": [{"comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1552492573, "post_id": 55146039, "comment_id": 97032864, "body": "One more thing, could you explain how do you call <code>getLang()</code> so <code>writableDatabase</code> returns correctly?"}, {"owner": {"reputation": 825, "user_id": 7906057, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100004916147744/picture?type=large", "display_name": "Mark Delphi", "link": "https://stackoverflow.com/users/7906057/mark-delphi"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1552495906, "post_id": 55146039, "comment_id": 97034985, "body": "I call it in my <code>LanguageSettings</code> class when I need to get persisted data from <code>PreferenceManager</code> like this <code>setLocale(context, getPersistedData(context, getLang()))</code>. However, I am not sure, how it impacts  <code>writableDatabase</code> and what has it with this to do."}], "tags": [], "owner": {"reputation": 825, "user_id": 7906057, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100004916147744/picture?type=large", "display_name": "Mark Delphi", "link": "https://stackoverflow.com/users/7906057/mark-delphi"}, "is_accepted": true, "score": 1, "last_activity_date": 1608164212, "last_edit_date": 1608164212, "creation_date": 1552492223, "answer_id": 55146039, "question_id": 55130205, "link": "https://stackoverflow.com/questions/55130205/unable-to-resume-activity-with-android-database-sqlite-sqliteexception-not-an-e/55146039#55146039", "title": "Unable to resume activity with android.database.sqlite.SQLiteException: not an error (code 0). How do I fix it?", "body": "<p>I found the problem. Thanks to Eugen Pechanec (answer above), I was able to detect the problem in Locale settings. My application includes Russian, English and German languages and if device language is Russian, then the <code>Locale.getDefault().language</code> delivers in Lollipop and Marshmallow (may be in other versions also) the value &quot;\u0440\u0443\u0441\u0441\u043a\u0438\u0439&quot; which cannot be used for the class <code>Locale()</code> and as a result, the <code>private var db: SQLiteDatabase = this.writableDatabase</code> crashed. To avoid this value, I implemented the following function in my LanguageSettings class:</p>\n<pre><code>private fun getLang(): String? {\n    return if (Locale.getDefault().language == &quot;\u0440\u0443\u0441\u0441\u043a\u0438\u0439&quot;)\n        &quot;ru&quot;\n    else\n        Locale.getDefault().language\n}\n</code></pre>\n<p>That's all! It helped to avoid the unresolved value. Also, <a href=\"https://stackoverflow.com/questions/46916210/cannot-get-writable-database-sqliteexception-not-an-error-code-0\">this question</a> contains a similar case, although it did not help me to fix my problem.</p>\n"}], "owner": {"reputation": 825, "user_id": 7906057, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/100004916147744/picture?type=large", "display_name": "Mark Delphi", "link": "https://stackoverflow.com/users/7906057/mark-delphi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 55146039, "answer_count": 1, "score": 0, "last_activity_date": 1608164212, "creation_date": 1552422766, "last_edit_date": 1608164113, "question_id": 55130205, "link": "https://stackoverflow.com/questions/55130205/unable-to-resume-activity-with-android-database-sqlite-sqliteexception-not-an-e", "title": "Unable to resume activity with android.database.sqlite.SQLiteException: not an error (code 0). How do I fix it?", "body": "<p>I have the following problem which occurs on devices with Android Version 5 and 6, but other Android versions do not report such problem. The problem indicates to this line:</p>\n<pre><code>private var db: SQLiteDatabase = this.writableDatabase\n</code></pre>\n<p>However, recently it worked well for all versions and there was no problem. Now it just throws an <code>SQLiteException: not an error (code 0)</code>. I tried to search for this problem on Google, but there was no suitable answer for my case. Nevertheless, I tried to apply found answers like adding <code>READ</code> and <code>WRITE</code> permissions in <code>AndroidManifest.xml</code>. C</p>\n<p>I cannot find out why it stopped working for Android 5 and 6.</p>\n<p>Here is the Stack trace:</p>\n<pre><code>03-12 23:56:41.542 13600-13600/com.easyapps.cryptnote E/CrashlyticsCore: Failed to execute task.\n    java.util.concurrent.TimeoutException\n        at java.util.concurrent.FutureTask.get(FutureTask.java:176)\n        at com.crashlytics.android.core.CrashlyticsBackgroundWorker.submitAndWait(CrashlyticsBackgroundWorker.java:41)\n        at com.crashlytics.android.core.CrashlyticsController.handleUncaughtException(CrashlyticsController.java:321)\n        at com.crashlytics.android.core.CrashlyticsController$6.onUncaughtException(CrashlyticsController.java:301)\n        at com.crashlytics.android.core.CrashlyticsUncaughtExceptionHandler.uncaughtException(CrashlyticsUncaughtExceptionHandler.java:42)\n        at java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:693)\n        at java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:690)\n03-12 23:56:41.543 13600-13600/com.easyapps.cryptnote E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.easyapps.cryptnote, PID: 13600\n    java.lang.RuntimeException: Unable to resume activity {com.easyapps.cryptnote/com.easyapps.cryptnote.MainActivity}: android.database.sqlite.SQLiteException: not an error (code 0)\n        at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3028)\n        at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3063)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2418)\n        at android.app.ActivityThread.access$800(ActivityThread.java:155)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1317)\n        at android.os.Handler.dispatchMessage(Handler.java:102)\n        at android.os.Looper.loop(Looper.java:135)\n        at android.app.ActivityThread.main(ActivityThread.java:5343)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:372)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:905)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:700)\n     Caused by: android.database.sqlite.SQLiteException: not an error (code 0)\n        at android.database.sqlite.SQLiteConnection.nativeRegisterLocalizedCollators(Native Method)\n        at android.database.sqlite.SQLiteConnection.setLocaleFromConfiguration(SQLiteConnection.java:361)\n        at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:218)\n        at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)\n        at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)\n        at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)\n        at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)\n        at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:806)\n        at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:791)\n        at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)\n        at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:1287)\n        at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:268)\n        at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:223)\n        at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:163)\n        at com.easyapps.cryptnote.ListDatabase.&lt;init&gt;(ListDatabase.kt:26)\n        at com.easyapps.cryptnote.MainActivity.updateNotes(MainActivity.kt:584)\n        at com.easyapps.cryptnote.MainActivity.onResume(MainActivity.kt:123)\n        at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1280)\n        at android.app.Activity.performResume(Activity.java:6096)\n        at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3011)\n        at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3063)\u00a0\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2418)\u00a0\n        at android.app.ActivityThread.access$800(ActivityThread.java:155)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1317)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n        at android.os.Looper.loop(Looper.java:135)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:5343)\u00a0\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\n        at java.lang.reflect.Method.invoke(Method.java:372)\u00a0\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:905)\u00a0\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:700)\u00a0\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "answers": [{"tags": [], "owner": {"reputation": 1522, "user_id": 6907055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0055675e50553e91d6ef292f7a5a21e4?s=128&d=identicon&r=PG&f=1", "display_name": "CampbellMG", "link": "https://stackoverflow.com/users/6907055/campbellmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1552430776, "creation_date": 1552430776, "answer_id": 55131753, "question_id": 55130196, "link": "https://stackoverflow.com/questions/55130196/sectionedrecyclerviewadapter-in-kotlin/55131753#55131753", "title": "SectionedRecyclerViewAdapter in kotlin", "body": "<p>You are trying to access a class property as a function</p>\n\n<p>In Java you would set the adapter with:</p>\n\n<pre><code>recyclerView.setAdapter(sectionAdapter)\n</code></pre>\n\n<p>In Kotlin this looks like: </p>\n\n<pre><code>recyclerView.adapter = sectionAdapter\n</code></pre>\n\n<p>Have a look <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"nofollow noreferrer\">here</a> for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11193980, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mAc0sg8MDj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYTVIQIMiFxxsJnZu-KnurNmx_6Q/mo/photo.jpg?sz=128", "display_name": "Patrik Figura", "link": "https://stackoverflow.com/users/11193980/patrik-figura"}, "is_accepted": false, "score": 1, "last_activity_date": 1552431410, "creation_date": 1552431410, "answer_id": 55131877, "question_id": 55130196, "link": "https://stackoverflow.com/questions/55130196/sectionedrecyclerviewadapter-in-kotlin/55131877#55131877", "title": "SectionedRecyclerViewAdapter in kotlin", "body": "<pre><code>class FoodListAdapter(val itemList): StatelessSection(SectionParameters.builder()\n    .itemResourceId(R.layout.content_food_list)\n    .headerResourceId(R.layout.header_food_list)\n    .build()) {\n\n    override fun getContentItemsTotal(): Int {\n        return itemList.size\n    }\n\n    override fun onBindItemViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n        val itemHolder = holder as MyItemViewHolder\n        itemHolder.tvItem.setText(itemList[position])\n    }\n\n    override fun getItemViewHolder(view: View?): RecyclerView.ViewHolder {\n        return MyItemViewHolder(view!!)\n    }\n}\n\nclass MyItemViewHolder(itemView: View): RecyclerView.ViewHolder(itemView) {\n    internal val tvItem: TextView =itemView.findViewById(R.id.txtItem)\n}\n</code></pre>\n\n<p>And for your activity you don't need context variable Activity extends Context</p>\n\n<pre><code>class FoodActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_food_list)\n\n    val sectionAdapter = SectionedRecyclerViewAdapter()\n\n        val itemList = arrayListOf&lt;Int&gt;(1, 2, 3 ,4)\n        sectionAdapter.addSection(FoodListAdapter(itemList))\n\n        val recyclerView:RecyclerView = findViewById(R.id.foodList)\n        recyclerView.layoutManager = LinearLayoutManager(context)\n        recyclerView.adapter = sectionAdapter\n    }\n}\n</code></pre>\n\n<p>as @CampbellMG mentioned you need to either use <code>recyclerView.adapter = sectionAdapter</code> or <code>recyclerView.setAdapter(sectionAdapter)</code></p>\n\n<p><code>recyclerView.adapter=sectionAdapter</code> is more idiomatic</p>\n"}], "owner": {"reputation": 393, "user_id": 7625533, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHjdqUUBKM0/AAAAAAAAAAI/AAAAAAAAABM/ZFvamrKQ_I8/photo.jpg?sz=128", "display_name": "Best  Best", "link": "https://stackoverflow.com/users/7625533/best-best"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1552431410, "creation_date": 1552422719, "question_id": 55130196, "link": "https://stackoverflow.com/questions/55130196/sectionedrecyclerviewadapter-in-kotlin", "title": "SectionedRecyclerViewAdapter in kotlin", "body": "<p>Anyone can refactor java code to kotlin code ?</p>\n\n<p>this is my code</p>\n\n<p>FoodListAdapter.kt</p>\n\n<pre><code>class FoodListAdapter: StatelessSection(SectionParameters.builder()\n    .itemResourceId(R.layout.content_food_list)\n    .headerResourceId(R.layout.header_food_list)\n    .build()) {\n\n    val itemList = arrayListOf&lt;Int&gt;(1, 2, 3 ,4)\n\n    override fun getContentItemsTotal(): Int {\n        return itemList.size\n    }\n\n    override fun onBindItemViewHolder(holder: RecyclerView.ViewHolder?, position: Int) {\n        val itemHolder = holder as MyItemViewHolder\n\n        // bind your view here\n        itemHolder.tvItem.setText(itemList[position])\n    }\n\n    override fun getItemViewHolder(view: View?): RecyclerView.ViewHolder {\n        return MyItemViewHolder(view!!)\n    }\n}\n\nclass MyItemViewHolder(itemView: View): RecyclerView.ViewHolder(itemView) {\n    lateinit var tvItem: TextView\n    init {\n        tvItem = itemView.findViewById(R.id.txtItem) as TextView\n    }\n}\n</code></pre>\n\n<p>FoodListActivity.kt</p>\n\n<pre><code>class FoodActivity : AppCompatActivity() {\n\nprivate var context: Context? = null\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_food_list)\n\n    context = this\n    val sectionAdapter = SectionedRecyclerViewAdapter()\n\n// Add your Sections\n        sectionAdapter.addSection(FoodListAdapter())\n\n// Set up your RecyclerView with the SectionedRecyclerViewAdapter\n        val recyclerView = findViewById(R.id.foodList) as RecyclerView\n        recyclerView.setLayoutManager(LinearLayoutManager(context))\n        recyclerView.adapter(sectionAdapter)\n    }\n}\n</code></pre>\n\n<p>I got a problem is \n\"Expression 'adapter' of type 'RecyclerView.Adapter&lt;(raw) RecyclerView.ViewHolder!>?' cannot be invoked as a function. The function 'invoke()' is not found\"\nafter recyclerView.adapter(sectionAdapter) \nSomeone please guide me to fix this.\nsorry i not good at english</p>\n"}, {"tags": ["kotlin", "yield", "kotlin-android-extensions", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 727390, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/mATny.jpg?s=128&g=1", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/727390/ahmed"}, "edited": false, "score": 0, "creation_date": 1553483639, "post_id": 55130592, "comment_id": 97387165, "body": "Would it be correct to say its no different then calling the method again? i.e. foreach(....) { fibonacci(10) } in Java?"}, {"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "reply_to_user": {"reputation": 2210, "user_id": 727390, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/mATny.jpg?s=128&g=1", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/727390/ahmed"}, "edited": false, "score": 0, "creation_date": 1553505844, "post_id": 55130592, "comment_id": 97394291, "body": "Yes, the <code>.forEach{..}</code> is inline function, at the Java bytecode level it will be similar to Java&#39;s foreach"}], "tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": false, "score": 6, "last_activity_date": 1552424507, "creation_date": 1552424507, "answer_id": 55130592, "question_id": 55129988, "link": "https://stackoverflow.com/questions/55129988/understanding-kotlins-yield-function/55130592#55130592", "title": "Understanding Kotlin&#39;s yield function", "body": "<p>Let's consider an example, where you are able to generate the next element of the sequence, but you do not see an easy way to implement a Java iterator. </p>\n\n<pre><code>\nfun fibonacci() = sequence {\n  var a_0 = 1\n  var a_1 = 1\n\n  // this sequence is infinite\n  while(true) {\n    val a_n = a_0 + a_1\n    a_0 = a_1\n    a_1 = a_n\n\n    //this is a suspend function call\n    yield(a_0)\n  }\n}\n</code></pre>\n\n<p>The example uses the <code>yield</code> function to return the next element of the sequence. The function is an example of a <code>suspend</code> function in Kotlin. The call to the function suspends the execution of the <code>sequence{..}</code> block, so the call stack is free. </p>\n\n<p>Let's say we do the following</p>\n\n<pre><code>fibonacci().take(10).forEach{ \n   println(it) \n}\n</code></pre>\n\n<p>Every iteration of the <code>forEach</code> loop will resume the <code>sequence{..}</code> block from the previous <code>yield</code> function call and let it run to the next <code>yield</code> function call. The execution flow will mix the <code>forEach</code> loop iterations with the <code>sequence{..}</code> block evaluation. You may try writing the same as Java <code>Iterator</code> to feel what Kotlin compiler does behind the scenes.</p>\n\n<p><code>suspend</code> functions in Kotlin are done minimalistic on the language and the standard library side, the rest can be implemented in libraries. I recommend checking the <code>kotlinx.coroutines</code> library for more insides, examples, and documentation\n<a href=\"https://github.com/Kotlin/kotlinx.coroutines\" rel=\"noreferrer\">https://github.com/Kotlin/kotlinx.coroutines</a></p>\n"}, {"comments": [{"owner": {"reputation": 13606, "user_id": 527702, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/LrH0d.jpg?s=128&g=1", "display_name": "hippietrail", "link": "https://stackoverflow.com/users/527702/hippietrail"}, "edited": false, "score": 0, "creation_date": 1567761084, "post_id": 55130630, "comment_id": 102068398, "body": "So is it to do with coroutines or not?"}, {"owner": {"reputation": 59, "user_id": 11714718, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KtrBXH5MuNs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdW7iGTUyd2plJ8adG-cDTDi0xv6A/photo.jpg?sz=128", "display_name": "Robin Schwendele", "link": "https://stackoverflow.com/users/11714718/robin-schwendele"}, "edited": false, "score": 0, "creation_date": 1576514360, "post_id": 55130630, "comment_id": 104915532, "body": "I think you should increment your count for each call."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 25, "last_activity_date": 1588584541, "last_edit_date": 1588584541, "creation_date": 1552424688, "answer_id": 55130630, "question_id": 55129988, "link": "https://stackoverflow.com/questions/55129988/understanding-kotlins-yield-function/55130630#55130630", "title": "Understanding Kotlin&#39;s yield function", "body": "<p>You can think of <code>yield()</code> as \"return, and next time start from where you stopped\":</p>\n\n<pre><code>val sequence = sequence {\n    val start = 0\n    yield(start) // first return\n    yieldAll(1..5 step 2) // if called again, will start from here\n    yieldAll(generateSequence(8) { it * 3 }) // if called more that six times, start from here\n}\n</code></pre>\n\n<p>It creates state machine and stuff, but you can translate it to something like that in Java:</p>\n\n<pre><code>class Seq {\n    private AtomicInteger count = new AtomicInteger(0);\n    private int state = 0;\n\n    public int nextValue() {\n        if (count.get() == 0) {\n           return state;\n        }\n        else if (count.get() &gt;= 1 &amp;&amp; count.get() &lt;= 5) {\n           state += 2;\n           return state;\n        }\n        else {\n           state *= 3;\n           return state;\n        }\n    }\n}\n</code></pre>\n\n<p>In Java class we maintain explicit state by having two variables: <code>count</code> and <code>state</code>. Combination of <code>sequence</code> and <code>yield</code> allow this state to be maintained implicitly.</p>\n\n<p>Note that <code>yield()</code> is a suspending function, so it may be invoked only from another <code>suspend</code> function or from within a coroutine.</p>\n"}], "owner": {"reputation": 2210, "user_id": 727390, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/mATny.jpg?s=128&g=1", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/727390/ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7176, "favorite_count": 4, "answer_count": 2, "score": 28, "last_activity_date": 1588584541, "creation_date": 1552421748, "last_edit_date": 1584877591, "question_id": 55129988, "link": "https://stackoverflow.com/questions/55129988/understanding-kotlins-yield-function", "title": "Understanding Kotlin&#39;s yield function", "body": "<p>I don't see a very clear definition of the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/-sequence-scope/yield.html\" rel=\"noreferrer\"><code>yield</code></a> function in Kotlin. </p>\n\n<p>Example in the link above doesn't mention much but the following,</p>\n\n<pre><code>val sequence = sequence {\n    val start = 0\n    // yielding a single value\n    yield(start)\n    // yielding an iterable\n    yieldAll(1..5 step 2)\n    // yielding an infinite sequence\n    yieldAll(generateSequence(8) { it * 3 })\n}\n\nprintln(sequence.take(7).toList()) // [0, 1, 3, 5, 8, 24, 72]\n</code></pre>\n\n<p>But the above example doesn't point out the significance of yield. </p>\n\n<ul>\n<li>What does it mean that it is a suspending function?</li>\n<li>In what scenarios can it be advantageous? </li>\n</ul>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1552420912, "post_id": 55129468, "comment_id": 97001135, "body": "See also this question: <a href=\"https://stackoverflow.com/q/32830904\">stackoverflow.com/q/32830904</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3122, "user_id": 5529263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e629acbc6aea3d6a8980721336438fc4?s=128&d=identicon&r=PG", "display_name": "Boken", "link": "https://stackoverflow.com/users/5529263/boken"}, "is_accepted": false, "score": 0, "last_activity_date": 1552420435, "creation_date": 1552420435, "answer_id": 55129685, "question_id": 55129468, "link": "https://stackoverflow.com/questions/55129468/how-to-simplify-this-kotlin-code-if-it-needs-both-boolean-and-nullable-checking/55129685#55129685", "title": "How to simplify this kotlin code if it needs both boolean and nullable checking?", "body": "<p>Can be simplified as:</p>\n\n<pre><code>val result = dataConfig.urlIsabled in listOf(false, null)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "is_accepted": false, "score": 1, "last_activity_date": 1552420623, "creation_date": 1552420623, "answer_id": 55129734, "question_id": 55129468, "link": "https://stackoverflow.com/questions/55129468/how-to-simplify-this-kotlin-code-if-it-needs-both-boolean-and-nullable-checking/55129734#55129734", "title": "How to simplify this kotlin code if it needs both boolean and nullable checking?", "body": "<p>You try to return <code>true</code> if <code>dataConfig.urlIsDisabled</code> is <code>null</code> or <code>false</code>.</p>\n\n<p>Just invert the logic and return <code>false</code> if value is equal to <code>true</code>:</p>\n\n<p><code>val result = !(dataConfig.urlIsabled == true)</code></p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 4, "last_activity_date": 1552420852, "creation_date": 1552420852, "answer_id": 55129795, "question_id": 55129468, "link": "https://stackoverflow.com/questions/55129468/how-to-simplify-this-kotlin-code-if-it-needs-both-boolean-and-nullable-checking/55129795#55129795", "title": "How to simplify this kotlin code if it needs both boolean and nullable checking?", "body": "<p>Plot a simple truth table:</p>\n\n<pre><code>| dataConfig.urlIsabled | result |\n|-----------------------|--------|\n|        null           |  true  |\n|        true           |  false |\n|        false          |  true  |\n|-----------------------|--------|\n</code></pre>\n\n<p>So the result is <code>true</code> in all cases except when <code>urlIsabled</code> equals <code>true</code>. Thus it can be expressed as:</p>\n\n<pre><code>val result = dataConfig.urlIsabled != true\n</code></pre>\n"}], "owner": {"reputation": 6667, "user_id": 2987953, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c2a6cba46cf5f4c9c7338f324a1d7732?s=128&d=identicon&r=PG&f=1", "display_name": "lannyf", "link": "https://stackoverflow.com/users/2987953/lannyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 55129795, "answer_count": 3, "score": 1, "last_activity_date": 1552420852, "creation_date": 1552419523, "question_id": 55129468, "link": "https://stackoverflow.com/questions/55129468/how-to-simplify-this-kotlin-code-if-it-needs-both-boolean-and-nullable-checking", "title": "How to simplify this kotlin code if it needs both boolean and nullable checking?", "body": "<p>A <code>dataConfig</code> object has a nullable Boolean field <code>urlIsabled</code>, and would like to return based on whether the <code>dataConfig.urlIsabled</code> == null or the negative of the the <code>dataConfig.urlIsabled</code> </p>\n\n<pre><code>val result = if (dataConfig.urlIsabled != null) (dataConfig.urlIsabled != true) else true)\n</code></pre>\n\n<p>could it be simplified?</p>\n"}, {"tags": ["kotlin", "functional-programming", "io-monad", "arrow-kt"], "answers": [{"tags": [], "owner": {"reputation": 1893, "user_id": 571787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ff564544d0c3b13a07bcaced0a9ec8d?s=128&d=identicon&r=PG", "display_name": "BobG", "link": "https://stackoverflow.com/users/571787/bobg"}, "is_accepted": false, "score": 1, "last_activity_date": 1566921079, "creation_date": 1566921079, "answer_id": 57678322, "question_id": 55128770, "link": "https://stackoverflow.com/questions/55128770/kotlin-arrow-io-transactions-with-io-bracketcase/57678322#57678322", "title": "Kotlin &amp; Arrow.io: Transactions with IO.bracketCase", "body": "<p>I think you have everything right except the test code - maybe the mocks are not working correctly with <code>IO</code>.  For example, the following test code works as expected using your Transaction definitions in the first snippet:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;): Unit {\n    val transactor = object: Transaction {\n        override fun commit(): IO&lt;Unit&gt; = IO { println(\"Commit\"); }\n        override fun rollback(): IO&lt;Unit&gt; = IO { println(\"Rollback\"); }\n    }\n\n    val txProvider = object: TransactionProvider {\n        override fun startTransaction(): IO&lt;Transaction&gt; = IO.just(transactor)\n    }\n\n    val actionThrow = IO { println(\"Throwing\"); throw IllegalArgumentException(\"Exception!\") }\n    val actionSuccess = IO { println(\"Returning value\"); 2 }\n\n    val resultThrow = txProvider.runInTransaction(actionThrow).attempt().unsafeRunSync()\n    println(resultThrow)\n    val resultSuccess = txProvider.runInTransaction(actionSuccess).attempt().unsafeRunSync()\n    println(resultSuccess)\n}\n</code></pre>\n\n<p>and the output I get is as follows:</p>\n\n<pre><code>Throwing\nRollback\nLeft(a=java.lang.IllegalArgumentException: Exception!)\nReturning value\nCommit\nRight(b=2)\n</code></pre>\n\n<p>which is exactly what I would expect using <code>#bracketCase</code>.  (This is using Arrow 0.10.0-SNAPSHOT.)</p>\n"}], "owner": {"reputation": 21, "user_id": 11193030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a792228eab100375a4081315240c0f1f?s=128&d=identicon&r=PG&f=1", "display_name": "Jascha", "link": "https://stackoverflow.com/users/11193030/jascha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1566921079, "creation_date": 1552416711, "last_edit_date": 1552472321, "question_id": 55128770, "link": "https://stackoverflow.com/questions/55128770/kotlin-arrow-io-transactions-with-io-bracketcase", "title": "Kotlin &amp; Arrow.io: Transactions with IO.bracketCase", "body": "<p>I am currently playing with Arrow.io in Kotlin and I would love to use the library (together with Spring Boot) in a project at work. One problem I don't quite know how to solve correctly is transaction management. <code>IO&lt;A&gt;.bracketCase(...)</code> seems to me to be the correct tool for the job. Here is the approach I'm currently working on:</p>\n\n<pre><code>interface TransactionProvider {\n    fun startTransaction(): IO&lt;Transaction&gt;\n}\n\ninterface Transaction {\n    fun commit(): IO&lt;Unit&gt;\n    fun rollback(): IO&lt;Unit&gt;\n}\n\nfun &lt;A&gt; TransactionProvider.runInTransaction(action: IO&lt;A&gt;): IO&lt;A&gt; =\n    startTransaction()\n        .bracketCase(::releaseTransaction) { action }\n\nfun releaseTransaction(t: Transaction, exitCase: ExitCase&lt;Throwable&gt;): IO&lt;Unit&gt; =\n    when (exitCase) {\n        is ExitCase.Completed -&gt; t.commit()\n        else -&gt; t.rollback()\n    }\n</code></pre>\n\n<p>Sadly, it doesn't work as I expect it to: when an exception is thrown during execution of <code>action</code>, I would expect a rollback. But this is not the case (the following test fails for instance):</p>\n\n<pre><code>@Test\ninternal fun `transaction rolls back on failure`() {\n\n    val transaction: Transaction =\n        mock {\n            on { commit() } doReturn IO.unit\n            on { rollback() } doReturn IO.unit\n        }\n\n    val transactionProvider: TransactionProvider =\n        mock{\n            on { startTransaction() } doReturn IO.just(transaction)\n        }\n\n    val exception = IllegalArgumentException(\"Here I am!\")\n    val action = IO{ throw exception }\n\n\n    val result: Either&lt;Throwable, Unit&gt; =\n        transactionProvider\n            .runInTransaction(action)\n            .attempt()\n            .unsafeRunSync()\n\n    assertThat(result).isEqualTo(exception.left())\n\n    verify(transaction, never()).commit()\n    verify(transaction, times(1)).rollback()\n}\n</code></pre>\n\n<p>I played around with this a lot now and no matter how I arrange my types and where I place the <code>action</code> in question - I never get <code>bracketCase</code> to roll back my transactions. What am I doing wrong? Is there a better approach to do this? I would prefer a typesafe way without using <code>unsafeRun</code> if that is at all possible.</p>\n"}, {"tags": ["gradle", "plugins", "kotlin", "build.gradle", "gradle-plugin"], "owner": {"reputation": 559, "user_id": 1916413, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b96269945e9426825bdbba067eb3eaed?s=128&d=identicon&r=PG", "display_name": "Danilo Pianini", "link": "https://stackoverflow.com/users/1916413/danilo-pianini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1552415283, "creation_date": 1552415283, "question_id": 55128413, "link": "https://stackoverflow.com/questions/55128413/write-a-gradle-plugin-that-reacts-to-multiple-plugins", "title": "Write a Gradle Plugin that reacts to multiple plugins", "body": "<p>I am trying to write a new Gradle plugin which requires the application of two plugins: either <code>java</code> or <code>java-library</code>, or <code>maven-publish</code>. I am writing the plugin in Kotlin.</p>\n\n<p>I can easily, following the <a href=\"https://web.archive.org/web/20190312175905/https://guides.gradle.org/implementing-gradle-plugins/\" rel=\"nofollow noreferrer\">Gradle guide</a>, make the plugin react to a single plugin application:</p>\n\n<pre><code>project.plugins.withType(MavenPublishPlugin::class.java) {\n    // My stuff\n}\n</code></pre>\n\n<p>But I can't do the same for requiring two plugin applications:</p>\n\n<pre><code>project.plugins.withType(JavaPlugin::class.java) {\n    project.plugins.withType(MavenPublishPlugin::class.java) {\n        // My stuff\n    }\n}\n</code></pre>\n\n<p>In the second case, launching with:</p>\n\n<h2>Case 1: as expected</h2>\n\n<pre><code>plugins {\n    id(\"java\")\n    id(\"maven-publish\")\n    id(\"org.danilopianini.publish-on-central\")\n}\n</code></pre>\n\n<p>runs the plugin as expected</p>\n\n<h2>Case 2: non applied, as expected</h2>\n\n<p>using:</p>\n\n<pre><code>plugins {\n    id(\"java\")\n    id(\"org.danilopianini.publish-on-central\")\n}\n</code></pre>\n\n<p>does not apply the plugin, as expected</p>\n\n<h2>Case 3: applied, it should have not been</h2>\n\n<p>but, finally:</p>\n\n<pre><code>plugins {\n    id(\"maven-publish\")\n    id(\"org.danilopianini.publish-on-central\")\n}\n</code></pre>\n\n<p>tries to apply the plugin and fails with:</p>\n\n<pre><code>FAILURE: Build failed with an exception.\n\n* Where:\nBuild file '/tmp/junit876726632157783854/build.gradle.kts' line: 1\n\n* What went wrong:\nAn exception occurred applying plugin request [id: 'org.danilopianini.publish-on-central']\n&gt; Failed to apply plugin [id 'org.danilopianini.publish-on-central']\n   &gt; SoftwareComponentInternal with name 'java' not found.\n\n* Try:\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Exception is:\norg.gradle.api.plugins.InvalidPluginException: An exception occurred applying plugin request [id: 'org.danilopianini.publish-on-central']\n[cut]\nCaused by: org.gradle.api.internal.plugins.PluginApplicationException: Failed to apply plugin [id 'org.danilopianini.publish-on-central']\n    ... 128 more\nCaused by: org.gradle.api.UnknownDomainObjectException: SoftwareComponentInternal with name 'java' not found.\n    at org.gradle.api.internal.DefaultNamedDomainObjectCollection.createNotFoundException(DefaultNamedDomainObjectCollection.java:489)\n    at org.gradle.api.internal.DefaultNamedDomainObjectCollection.getByName(DefaultNamedDomainObjectCollection.java:323)\n\n</code></pre>\n\n<p>Which looks to me as an attempt to apply the plugin regardless the fact that the Java plugin was not applied.</p>\n\n<p>Do you know any way to configure a plugin to react to multiple plugin applications?</p>\n"}, {"tags": ["android", "listview", "kotlin", "onclicklistener"], "answers": [{"tags": [], "owner": {"reputation": 1690, "user_id": 473902, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bf781028e9a8edc6873f6ddd22264509?s=128&d=identicon&r=PG", "display_name": "Ge3ng", "link": "https://stackoverflow.com/users/473902/ge3ng"}, "is_accepted": true, "score": 8, "last_activity_date": 1552414433, "creation_date": 1552414433, "answer_id": 55128189, "question_id": 55128123, "link": "https://stackoverflow.com/questions/55128123/kotlin-setonclicklistener-for-a-listview/55128189#55128189", "title": "Kotlin setOnClickListener for a ListView", "body": "<p>You have to handle all the parameters for <a href=\"https://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html\" rel=\"noreferrer\">AdapterView.OnItemClickListener</a></p>\n\n<p>Your listener should look like this:</p>\n\n<pre><code>listView.setOnItemClickListener { parent, view, position, id -&gt; \n    val element = adapter.getItemAtPosition(position) // The item that was clicked\n    val intent = Intent(this, BookDetailActivity::class.java)\n    startActivity(intent)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 745, "user_id": 5293867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZYLGf.png?s=128&g=1", "display_name": "Koushik Mondal", "link": "https://stackoverflow.com/users/5293867/koushik-mondal"}, "is_accepted": false, "score": 3, "last_activity_date": 1552414777, "creation_date": 1552414777, "answer_id": 55128284, "question_id": 55128123, "link": "https://stackoverflow.com/questions/55128123/kotlin-setonclicklistener-for-a-listview/55128284#55128284", "title": "Kotlin setOnClickListener for a ListView", "body": "<p>Try this solution for listview item click listener.     </p>\n\n<pre><code>listView.setOnItemClickListener = AdapterView.OnItemClickListener {parent,view, position, id -&gt;\n          // Get the selected item text from ListView\n          val selectedItem = parent.getItemAtPosition(position) as String\n\n          val intent = Intent(this, BookDetailActivity::class.java)\n          startActivity(intent)\n    }\n</code></pre>\n"}], "owner": {"reputation": 1384, "user_id": 7175708, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/QJYJM.png?s=128&g=1", "display_name": "Lechucico", "link": "https://stackoverflow.com/users/7175708/lechucico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9903, "favorite_count": 0, "accepted_answer_id": 55128189, "answer_count": 2, "score": 1, "last_activity_date": 1552414777, "creation_date": 1552414181, "question_id": 55128123, "link": "https://stackoverflow.com/questions/55128123/kotlin-setonclicklistener-for-a-listview", "title": "Kotlin setOnClickListener for a ListView", "body": "<p>I have the following code:</p>\n\n<pre><code>class BookListActivity : AppCompatActivity()\n{\n\n    var array = arrayOf(\"Item 1\", \"Item 2\", \"Item 3\", \"Item 4\", \"Item 5\", \"Item 6\", \"Item 7\", \"Item 8\", \"Item 9\", \"Item 10\", \"Item 11\")\n\n    override fun onCreate(savedInstanceState: Bundle?)\n    {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.book_list)\n\n        val adapter = ArrayAdapter(this, R.layout.book_list_item, R.id.book_title, array)\n        val listView : ListView = findViewById(R.id.book_list)\n        listView.adapter = adapter    \n    }\n}\n</code></pre>\n\n<p>I need to add a click listener for each element on the listView. </p>\n\n<p>I've tried the following but doesn't work:</p>\n\n<pre><code>listView.setOnItemClickListener\n{\n    val intent = Intent(this, BookDetailActivity::class.java)\n    startActivity(intent)\n}\n</code></pre>\n\n<p>Also I need to know what ListView element I've clicked. How can I do this?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 4, "last_activity_date": 1552414024, "creation_date": 1552414024, "answer_id": 55128083, "question_id": 55127838, "link": "https://stackoverflow.com/questions/55127838/is-there-any-way-to-change-a-kotlin-when-statement-so-that-it-includes-an-enum-m/55128083#55128083", "title": "Is there any way to change a Kotlin when statement so that it includes an enum more efficiently?", "body": "<p>You can do this, you just need to import the specific enum values directly:</p>\n\n<pre><code>import com.example.UnixFileType.D\nimport com.example.UnixFileType.HYPHEN_MINUS\nimport com.example.UnixFileType.L\n\nval objectType = when (directoryType) {\n    D -&gt; \"d\"\n    HYPHEN_MINUS -&gt; \"-\"\n    L -&gt; \"l\"\n}\n</code></pre>\n\n<p>Or with a star import:</p>\n\n<pre><code>import com.example.UnixFileType.*\n\nval objectType = when (directoryType) {\n    D -&gt; \"d\"\n    HYPHEN_MINUS -&gt; \"-\"\n    L -&gt; \"l\"\n}\n</code></pre>\n\n<hr>\n\n<p>Hint: You can convert the more verbose version by placing your cursor on one of the <code>UnixFileType</code>'s and choosing the <em>Import members from <code>com.example.UnixFileType</code></em> intention action.</p>\n"}], "owner": {"reputation": 411, "user_id": 7087480, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/Won8h.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7087480/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 55128083, "answer_count": 1, "score": 0, "last_activity_date": 1552414024, "creation_date": 1552413215, "question_id": 55127838, "link": "https://stackoverflow.com/questions/55127838/is-there-any-way-to-change-a-kotlin-when-statement-so-that-it-includes-an-enum-m", "title": "Is there any way to change a Kotlin when statement so that it includes an enum more efficiently?", "body": "<p>Is there any way to change a Kotlin when statement so that it includes an enum more efficiently?</p>\n\n<p>For example:</p>\n\n<pre><code>val objectType = when (directoryType) {\n    UnixFileType.D -&gt; \"d\"\n    UnixFileType.HYPHEN_MINUS -&gt; \"-\"\n    UnixFileType.L -&gt; \"l\"\n}\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>val objectType = when (directoryType.UnixFileType) {\n   D -&gt; \"d\"\n   HYPHEN_MINUS -&gt; \"-\"\n   L -&gt; \"l\"\n}\n</code></pre>\n\n<p>I have done some digging and haven't found a working solution. Does anybody know if I'm just messing something up or if it's a work in progress or just something they don't be adding?</p>\n"}, {"tags": ["android", "kotlin", "bluetooth"], "answers": [{"comments": [{"owner": {"reputation": 2323, "user_id": 5184092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TRnWc.jpg?s=128&g=1", "display_name": "luckyging3r", "link": "https://stackoverflow.com/users/5184092/luckyging3r"}, "edited": false, "score": 0, "creation_date": 1552415776, "post_id": 55128198, "comment_id": 96998604, "body": "ahh.. I think that&#39;s making sense. I&#39;m like a super newb to Kotlin and am trying to learn. What would that code or process of putting the code withing the lazy{} be called? Is that Delegation or related to the delegation pattern or is that just a different way to initialize? That seems to be somewhat common in Kotlin. Thanks again!"}, {"owner": {"reputation": 2323, "user_id": 5184092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TRnWc.jpg?s=128&g=1", "display_name": "luckyging3r", "link": "https://stackoverflow.com/users/5184092/luckyging3r"}, "edited": false, "score": 0, "creation_date": 1552416129, "post_id": 55128198, "comment_id": 96998793, "body": "<a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/delegated-properties.html</a> under Lazy"}, {"owner": {"reputation": 353, "user_id": 3942417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/96yvT.jpg?s=128&g=1", "display_name": "Harshith Shetty", "link": "https://stackoverflow.com/users/3942417/harshith-shetty"}, "reply_to_user": {"reputation": 2323, "user_id": 5184092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TRnWc.jpg?s=128&g=1", "display_name": "luckyging3r", "link": "https://stackoverflow.com/users/5184092/luckyging3r"}, "edited": false, "score": 0, "creation_date": 1552417143, "post_id": 55128198, "comment_id": 96999295, "body": "Glad to help :) Kotlin is an amazing language, you are gonna have a lot of fun using it!"}], "tags": [], "owner": {"reputation": 353, "user_id": 3942417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/96yvT.jpg?s=128&g=1", "display_name": "Harshith Shetty", "link": "https://stackoverflow.com/users/3942417/harshith-shetty"}, "is_accepted": true, "score": 2, "last_activity_date": 1552414474, "creation_date": 1552414474, "answer_id": 55128198, "question_id": 55127541, "link": "https://stackoverflow.com/questions/55127541/kotlin-delegation/55128198#55128198", "title": "Kotlin Delegation", "body": "<p>In the code snippet what basically happens is when the variable is called/used, the block of code in lazy{} gets executed and whatever result is in the last code gets stored in the variable.</p>\n\n<p>So when the bluetoothAdapter is gonna be used like bluetoothAdapter.something(),\nthe very first time the bluetoothAdapter will be called, the lazy block will be executed and the result </p>\n\n<pre><code> val bluetoothManager = getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager\n ---&gt; bluetoothManager.adapter\n</code></pre>\n\n<p>Will be stored in the bluetoothAdapter variable and the block will be executed only once when it is first called.</p>\n\n<p>It in simple terms is like calling</p>\n\n<pre><code>fun initializeAdapter():BluetoothManager? {\n       val bluetoothManager = getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager\n       return bluetoothManager.adapter\n}\n</code></pre>\n\n<p>before using the bluetoothAdapter variable.</p>\n"}], "owner": {"reputation": 2323, "user_id": 5184092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TRnWc.jpg?s=128&g=1", "display_name": "luckyging3r", "link": "https://stackoverflow.com/users/5184092/luckyging3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 55128198, "answer_count": 1, "score": 0, "last_activity_date": 1552414474, "creation_date": 1552412142, "question_id": 55127541, "link": "https://stackoverflow.com/questions/55127541/kotlin-delegation", "title": "Kotlin Delegation", "body": "<p>I am failing to understand how Kotlin Delegation works when it comes to enabling bluetooth on android.</p>\n\n<p>I've come across this reference documentation on the Kotlin website but something seems to be going over my head.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/delegation.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/delegation.html</a></p>\n\n<pre><code>interface Base {\n    fun print()\n}\n\nclass BaseImpl(val x: Int) : Base {\n    override fun print() { print(x) }\n}\n\nclass Derived(b: Base) : Base by b\n\nfun main() {\n    val b = BaseImpl(10)\n    Derived(b).print()\n}\n</code></pre>\n\n<blockquote>\n  <p>The <code>by</code>-clause in the supertype list for <code>Derived</code> indicates that <code>b</code> will be stored internally in objects of <code>Derived</code> and the compiler will generate all the methods of <code>Base</code> that forward to <code>b</code>.</p>\n</blockquote>\n\n<p>Basically, I understand the <code>BaseImpl</code> class inherits from <code>Base</code> and so when we declare <code>val b = BaseImpl(10)</code> everything works as if it were Java but once we introduce this <code>Derived</code> class I get confused as to what directive <code>: Base by b</code> is trying to achieve. </p>\n\n<p>Are we only looking to implement the methods we want and overriding all the others?</p>\n\n<p>I think I am getting lost in the abstracts of it all. So when I am looking to enable Bluetooth I'm not really sure what is going on here.</p>\n\n<pre><code>private val bluetoothAdapter: BluetoothAdapter? by \n                                 lazy(LazyThreadSafetyMode.NONE) {\n    val bluetoothManager = \n        getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager\n    bluetoothManager.adapter\n}\n</code></pre>\n\n<p>I hope I'm not asking too many questions or even too broad of a question but when we are declaring <code>bluetoothAdapter</code> when does it get initialized? Does is it get initialized right there or just when we use it? And does it get initialized with what's in between the <code>{}</code>s? Thus <code>bluetoothManager</code> is only within scope on <code>bluetoothAdapter</code>s initialization?</p>\n\n<p>Please, forgive my ignorance.. It's a real struggle. Thanks!</p>\n"}, {"tags": ["arrays", "oop", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "is_accepted": false, "score": 2, "last_activity_date": 1552416897, "last_edit_date": 1552416897, "creation_date": 1552411028, "answer_id": 55127240, "question_id": 55126925, "link": "https://stackoverflow.com/questions/55126925/multidimensional-array-of-objects-in-kotlin/55127240#55127240", "title": "Multidimensional array of Objects in Kotlin", "body": "<p>Not sure if this is what you want, but imagine that <code>Obstacle</code> is a custom class with a field <code>num</code> as below</p>\n\n<pre><code>data class Obstacle(var num: Int){}\n</code></pre>\n\n<p>A 2D array of the <code>Obstacle</code> object would be as below:</p>\n\n<pre><code>val array: Array&lt;Obstacle?&gt; = arrayOf(Obstacle(123), Obstacle(234))\nval arrayOfArray: Array&lt;Array&lt;Obstacle?&gt;&gt; = arrayOf(array)\nprintln(arrayOfArray[0][0]) // would print Obstacle(num=123)\nprintln(arrayOfArray[0][1]) // would print Obstacle(num=234)\n</code></pre>\n\n<p>So you should be declaring your 2D array as below</p>\n\n<pre><code>val arrayOfArray: Array&lt;Array&lt;Obstacle?&gt;&gt; = arrayOf()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "is_accepted": true, "score": 3, "last_activity_date": 1552411042, "creation_date": 1552411042, "answer_id": 55127245, "question_id": 55126925, "link": "https://stackoverflow.com/questions/55126925/multidimensional-array-of-objects-in-kotlin/55127245#55127245", "title": "Multidimensional array of Objects in Kotlin", "body": "<p>You can use <code>private var arrayMap: Array&lt;Array&lt;Obstacle?&gt;&gt; = arrayOf()</code>. Just wrap with as much <code>Array&lt;&gt;</code> as you need.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1552454476, "creation_date": 1552454476, "answer_id": 55134907, "question_id": 55126925, "link": "https://stackoverflow.com/questions/55126925/multidimensional-array-of-objects-in-kotlin/55134907#55134907", "title": "Multidimensional array of Objects in Kotlin", "body": "<p>Your code will compile as is. The problem is just that array size can't be changed and <code>arrayOf&lt;Array&lt;Obstacle?&gt;&gt;()</code> creates an empty array, so <code>array_map[1][2] = Obstacle()</code> fails at runtime. (Unless you do <code>array_map = ...</code> somewhere between them. Note that you should prefer <code>val arrayMap</code>, which can't be reassigned, unless you have a specific reason to use <code>var</code>.)</p>\n\n<p>If you want your array to start with nulls, there is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/array-of-nulls.html\" rel=\"nofollow noreferrer\"><code>arrayOfNulls</code></a> in the standard library, but it only creates a single-dimensional array, and what you really need is an array of arrays of nulls. You can write a helper function:</p>\n\n<pre><code>inline fun &lt;reified T&gt; matrixOfNulls(n: Int, m: Int) = Array(n) { arrayOfNulls&lt;T&gt;(m) }\n\nprivate val arrayMap = matrixOfNulls&lt;Obstacle&gt;(5, 5) // example arguments\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "is_accepted": false, "score": 0, "last_activity_date": 1563589187, "creation_date": 1563589187, "answer_id": 57121328, "question_id": 55126925, "link": "https://stackoverflow.com/questions/55126925/multidimensional-array-of-objects-in-kotlin/57121328#57121328", "title": "Multidimensional array of Objects in Kotlin", "body": "<p>The approach I always use for this case is:</p>\n\n<pre><code>arr2D = Array(sizeA) { Array(sizeB) { content } } \n</code></pre>\n\n<p>Note I replaced the sizes by fields names to illustrate that each number/field represents the width and height length of each dimension of the 2D array.</p>\n\n<p>Also, <code>content</code> should be replaced by the main content you want to fill in each coordinate, in your case seems you aims to setup with <code>Obstacle()</code> instances. If you want fill this content in other moment put <code>null</code> or a quick <code>Any()</code> reference.</p>\n\n<p>In this last case, after creating that you can simply perform to set the itens:</p>\n\n<pre><code>arr2D[1][2] = Obstacle() \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 1438846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808d8cf925a5320c06f7aa68b68743bf?s=128&d=identicon&r=PG&f=1", "display_name": "MaxVar", "link": "https://stackoverflow.com/users/1438846/maxvar"}, "edited": false, "score": 1, "creation_date": 1578727994, "post_id": 58624804, "comment_id": 105540774, "body": "honestly, this clarifies so much that this snippet should go directly to kotlinlang.org/docs ))"}], "tags": [], "owner": {"reputation": 156, "user_id": 644799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CVbMH.jpg?s=128&g=1", "display_name": "Victor Alonso Barberan", "link": "https://stackoverflow.com/users/644799/victor-alonso-barberan"}, "is_accepted": false, "score": 7, "last_activity_date": 1572436465, "creation_date": 1572436465, "answer_id": 58624804, "question_id": 55126925, "link": "https://stackoverflow.com/questions/55126925/multidimensional-array-of-objects-in-kotlin/58624804#58624804", "title": "Multidimensional array of Objects in Kotlin", "body": "<p>In case you need the index of each element in the constructor of the elements of the array:</p>\n\n<p>Declaration:</p>\n\n<pre><code>var matrix: Array&lt;Array&lt;Obstacle?&gt;&gt;\n</code></pre>\n\n<p>Instantiation and initialization:</p>\n\n<pre><code>matrix = Array(numRows) { row -&gt;\n            Array(numCols) { col -&gt;\n                Obstacle(row, col)\n            }\n         }\n</code></pre>\n"}], "owner": {"reputation": 358, "user_id": 4618105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NS5wg.jpg?s=128&g=1", "display_name": "Carlos V&#225;zquez", "link": "https://stackoverflow.com/users/4618105/carlos-v%c3%a1zquez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3955, "favorite_count": 1, "accepted_answer_id": 55127245, "answer_count": 5, "score": 5, "last_activity_date": 1572436465, "creation_date": 1552409963, "question_id": 55126925, "link": "https://stackoverflow.com/questions/55126925/multidimensional-array-of-objects-in-kotlin", "title": "Multidimensional array of Objects in Kotlin", "body": "<p>I'm new in Kotlin, and I want to create a multi dimensional array of a custom class, with <code>null</code> permitted. Something like that</p>\n\n<pre><code>private var array_map = arrayOf&lt;Array&lt;Obstacle?&gt;&gt;()\n\n...\n\narray_map[1][2] = Obstacle()\n</code></pre>\n\n<p>How can I do it? Thank you!</p>\n"}, {"tags": ["android", "kotlin", "viewmodel", "android-lifecycle", "android-livedata"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1552410152, "post_id": 55126545, "comment_id": 96995538, "body": "Personally I think (and this is just an opinion, but) the name &quot;UseCase&quot; for api fetch tasks is quite unfortunate. Yes, I know it comes from the <a href=\"https://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/\" rel=\"nofollow noreferrer\">Android Clean Architecture document from 2014</a>,  but on the other hand if you think about the UML UseCase Diagram, then fetching data is not user interaction, not a feature, it&#39;s just an implementation detail. I prefer to call them &quot;RemoteTask&quot;. Once you know it&#39;s just a &quot;task&quot; and not what the user cares about, then you can figure out what to do with it, and when it should run"}], "answers": [{"tags": [], "owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "is_accepted": false, "score": 0, "last_activity_date": 1552409505, "creation_date": 1552409505, "answer_id": 55126783, "question_id": 55126545, "link": "https://stackoverflow.com/questions/55126545/viewmodel-with-several-livedata-and-usecases/55126783#55126783", "title": "ViewModel with several LiveData and UseCases", "body": "<p>A combined model can be used instead of three different <code>models</code> and <code>liveData</code> like this :-</p>\n\n<pre><code>class CombinedModel( var map : MutableLiveData&lt;java.util.LinkedHashMap&lt;String, Book?&gt;, var books : MutableList&lt;BookList&gt;, var infos = MutableList&lt;BookInfo&gt; )\n</code></pre>\n\n<p>And the livedata can be like :-</p>\n\n<pre><code>var response: MutableLiveData&lt;CombinedModel&gt;\n</code></pre>\n\n<p><em>Hence only one <code>Observer</code> logic can take care of all three data</em> in the activity</p>\n"}], "owner": {"reputation": 165, "user_id": 9795442, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007427564985/picture?type=large", "display_name": "Atalyk", "link": "https://stackoverflow.com/users/9795442/atalyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 3, "answer_count": 1, "score": 1, "last_activity_date": 1552409677, "creation_date": 1552408658, "last_edit_date": 1552409677, "question_id": 55126545, "link": "https://stackoverflow.com/questions/55126545/viewmodel-with-several-livedata-and-usecases", "title": "ViewModel with several LiveData and UseCases", "body": "<p>I am currently experimenting with making a viewmodel for Fragment. My approach is to use exactly one viewmodel for one fragment. I have several use cases for different scenarios ex. to fetch books, to get info about a book. All these use cases happens in one Fragment. Now I made a ViewModel with 3 UseCases independent from each other and 3 corresponding LiveDatas. </p>\n\n<p>I am wondering if it is a good practice. Any suggestions?</p>\n\n<pre><code>class GetBooksViewModel\n@Inject constructor(private val getBooksUseCase: GetBooksUseCase,\nprivate val getBooksListsUseCase: GetBooksListsUseCase,\nprivate val getInfoByBookUseCase: GetInfoByBookUseCase) :\n    BaseViewModel() {\n\nvar books: MutableLiveData&lt;java.util.LinkedHashMap&lt;String, Book?&gt;&gt; = MutableLiveData()\nvar bookLists: MutableLiveData&lt;List&lt;BookList&gt;&gt; = MutableLiveData()\nvar infos: MutableLiveData&lt;List&lt;BookInfo&gt;&gt; = MutableLiveData()\n\n//methods for fetching data will be below\n\nfun getBooks() =\ngetChannelsUseCase() {\n  it.either(::handleFailure, ::handleGetBooksUseCase)\n}\n\nprivate fun handleGetBooksUseCase(response: \n java.util.LinkedHashMap&lt;String, Channel?&gt;) {\nthis.books.value = response\n}  \n</code></pre>\n\n<p>inside Fragment</p>\n\n<pre><code>getBooksViewModel = viewModel(viewModelFactory) {\n  observe(books, ::getBooks)\n  observe(booksLists, ::getBooksLists)\n  observe(bookInfos, ::doSomethingWithInfos)\n  failure(failure, ::handleFailure)\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "android-livedata"], "comments": [{"owner": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "edited": false, "score": 0, "creation_date": 1552406497, "post_id": 55125739, "comment_id": 96993273, "body": "You can use extension methods from Java. They&#39;re just static methods with the first Parameter being the receiver. I&#39;m not sure if they restricted this somehow in the case of live data, but might be worth a shot"}, {"owner": {"reputation": 429, "user_id": 6743102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3132616331344b85019b5edece3a2e01?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Sims", "link": "https://stackoverflow.com/users/6743102/daniel-sims"}, "reply_to_user": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "edited": false, "score": 0, "creation_date": 1552406556, "post_id": 55125739, "comment_id": 96993318, "body": "Yeah I&#39;ve been playing around with it, but can&#39;t seem to get anything to work the way I want sadly."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552407939, "post_id": 55125739, "comment_id": 96994217, "body": "You shouldn&#39;t remove ALL observers, you should only remove the <code>observer</code> you gave the method."}, {"owner": {"reputation": 429, "user_id": 6743102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3132616331344b85019b5edece3a2e01?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Sims", "link": "https://stackoverflow.com/users/6743102/daniel-sims"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552408551, "post_id": 55125739, "comment_id": 96994596, "body": "@EpicPandaForce Updated to only remove the individual observer, what&#39;s your thoughts on observe(owner, o) vs observeForever(o)"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1552408809, "post_id": 55125739, "comment_id": 96994776, "body": "That it depends on what you are doing. Although the <i>intended</i> way of doing things is to only receive events after <code>onStart</code>, and before <code>onStop</code>. I&#39;ve used observeForever inside ViewModel, but I should have used Transformations.switchMap (which internally uses observeForever/removeObserver)."}, {"owner": {"reputation": 429, "user_id": 6743102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3132616331344b85019b5edece3a2e01?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Sims", "link": "https://stackoverflow.com/users/6743102/daniel-sims"}, "edited": false, "score": 0, "creation_date": 1552409535, "post_id": 55125739, "comment_id": 96995186, "body": "Hmm, i&#39;ve updated it to be observeForever"}], "answers": [{"comments": [{"owner": {"reputation": 1690, "user_id": 473902, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bf781028e9a8edc6873f6ddd22264509?s=128&d=identicon&r=PG", "display_name": "Ge3ng", "link": "https://stackoverflow.com/users/473902/ge3ng"}, "edited": false, "score": 0, "creation_date": 1552407070, "post_id": 55125983, "comment_id": 96993648, "body": "I would recommend moving the removeObserver above the <code>observer.onChange</code> since you could get another item through the LiveData before you remove it."}, {"owner": {"reputation": 429, "user_id": 6743102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3132616331344b85019b5edece3a2e01?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Sims", "link": "https://stackoverflow.com/users/6743102/daniel-sims"}, "edited": false, "score": 0, "creation_date": 1552407487, "post_id": 55125983, "comment_id": 96993912, "body": "I&#39;ve modified this code a bit to make it compile and it works just fine, thanks! I&#39;ll edit my answer to show the correct code."}, {"owner": {"reputation": 567, "user_id": 9464051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OHLnK.jpg?s=128&g=1", "display_name": "deluxe1", "link": "https://stackoverflow.com/users/9464051/deluxe1"}, "reply_to_user": {"reputation": 1690, "user_id": 473902, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bf781028e9a8edc6873f6ddd22264509?s=128&d=identicon&r=PG", "display_name": "Ge3ng", "link": "https://stackoverflow.com/users/473902/ge3ng"}, "edited": false, "score": 0, "creation_date": 1552412434, "post_id": 55125983, "comment_id": 96996852, "body": "@Ge3ng has a valid point, you can make the switch to avoid receiving multiple items. Glad I could help, you are welcome :)"}], "tags": [], "owner": {"reputation": 567, "user_id": 9464051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OHLnK.jpg?s=128&g=1", "display_name": "deluxe1", "link": "https://stackoverflow.com/users/9464051/deluxe1"}, "is_accepted": true, "score": 3, "last_activity_date": 1612449037, "last_edit_date": 1612449037, "creation_date": 1552406797, "answer_id": 55125983, "question_id": 55125739, "link": "https://stackoverflow.com/questions/55125739/java-extension-methods-for-livedata/55125983#55125983", "title": "Java extension methods for LiveData", "body": "<p>Every Kotlin extension function is resolved statically, which means that you can do the same in Java by using static functions. It is not as readable or as intuitive as the extension functions, but it does the same job.</p>\n<p>Create a util class with a static method:</p>\n<pre><code>public class LiveDataUtils {\n\npublic static &lt;T&gt; void observeOnce(LiveData&lt;T&gt; liveData, Observer&lt;T&gt; observer) {\n    liveData.observeForever(new Observer&lt;T&gt;() {\n        @Override\n        public void onChanged(T t) {\n            liveData.removeObserver(this);\n            observer.onChanged(t);\n        }\n    });\n   }\n}\n</code></pre>\n<p>I haven't tested the code, so it might have some errors. The point was to show you how you can replace extension functions in Java.</p>\n<p>EDIT: Updated according to follow up by @Marek Potkan, since this is the accepted answer. As I mentioned, I haven't tested the code and I provided a wrong reference by mistake.</p>\n"}, {"tags": [], "owner": {"reputation": 380, "user_id": 5500106, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UD4R0VYbbdo/AAAAAAAAAAI/AAAAAAAAABs/BfKdBHanQCk/photo.jpg?sz=128", "display_name": "Marek Potkan", "link": "https://stackoverflow.com/users/5500106/marek-potkan"}, "is_accepted": false, "score": 2, "last_activity_date": 1602754030, "last_edit_date": 1602754030, "creation_date": 1602706305, "answer_id": 64360825, "question_id": 55125739, "link": "https://stackoverflow.com/questions/55125739/java-extension-methods-for-livedata/64360825#64360825", "title": "Java extension methods for LiveData", "body": "<p>@deluxe1 answer wouldn't work. It is removing <code>observer</code> called <code>observer</code>, but that's not the one which is used in the <code>observeForever</code> method. Expanded version should be used instead of the lambda function here:</p>\n<pre><code>public static &lt;T&gt; void observeOnce(LiveData&lt;T&gt; liveData, Observer&lt;T&gt; observer) {\n    liveData.observeForever(new Observer&lt;T&gt;() {\n        @Override\n        public void onChanged(T t) {\n            liveData.removeObserver(this);\n            observer.onChanged(t);\n        }\n    });\n}\n</code></pre>\n<p>I have tested both approaches.</p>\n"}], "owner": {"reputation": 429, "user_id": 6743102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3132616331344b85019b5edece3a2e01?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Sims", "link": "https://stackoverflow.com/users/6743102/daniel-sims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 0, "accepted_answer_id": 55125983, "answer_count": 2, "score": 2, "last_activity_date": 1612449037, "creation_date": 1552406039, "last_edit_date": 1552469670, "question_id": 55125739, "link": "https://stackoverflow.com/questions/55125739/java-extension-methods-for-livedata", "title": "Java extension methods for LiveData", "body": "<p>In Kotlin there's an extension method observeOnce (<a href=\"https://code.luasoftware.com/tutorials/android/android-livedata-observe-once-only-kotlin/\" rel=\"nofollow noreferrer\">https://code.luasoftware.com/tutorials/android/android-livedata-observe-once-only-kotlin/</a>) which is the behaviour I'm looking to replicate in Java. It's to my understanding from googling that you can't use Kotlin extension methods in java (may be wrong), so I've got two options of using SingleEventLiveData which I've implemented and am not keen on, and removing my observer once used;</p>\n\n<pre><code>final LiveData&lt;List&lt;String&gt;&gt; stringsLiveData = mViewModel.getStrings();\n\nstringsliveData.observe(getViewLifecycleOwner(), strings -&gt; {\n    // Do stuff with data here\n    stringsLiveData.removeObservers(getViewLifecycleOwner());\n});\n</code></pre>\n\n<p>Is there an equivilant method that can be used as the link above so;</p>\n\n<pre><code>mViewModel.getStrings().observeOnce(getViewLifecycleOwner(), strings -&gt; {\n    //Do stuff here\n});\n</code></pre>\n\n<p><strong>Edit</strong>: As per the accepted answer below (modified to compile) I've got;</p>\n\n<pre><code>class LiveDataUtils {\n    public static &lt;T&gt; void observeOnce(LiveData&lt;T&gt; liveData, Observer&lt;T&gt; observer) {\n        liveData.observeForever(o -&gt; {\n            liveData.removeObserver(observer);\n            observer.onChanged(o);\n        });\n    }\n}\n</code></pre>\n\n<p>and a simple usage of this;</p>\n\n<pre><code>LiveDataUtils.observeOnce(\n    mViewModel.getStrings(),\n    strings -&gt; {\n        // Do some work here\n    }\n);\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 783, "user_id": 7926992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d75ae3a81a8720e3289f2c1537d2029d?s=128&d=identicon&r=PG&f=1", "display_name": "abhinandan sharma", "link": "https://stackoverflow.com/users/7926992/abhinandan-sharma"}, "edited": false, "score": 0, "creation_date": 1552410230, "post_id": 55125651, "comment_id": 96995584, "body": "i think this problem may be related to runtime permissions .you can try this  (<a href=\"https://stackoverflow.com/questions/3574644/how-can-i-find-the-latitude-and-longitude-from-address\" title=\"how can i find the latitude and longitude from address\">stackoverflow.com/questions/3574644/&hellip;</a>)"}, {"owner": {"reputation": 1, "user_id": 5641522, "user_type": "registered", "profile_image": "https://graph.facebook.com/1039262219428700/picture?type=large", "display_name": "Nidhal Cherni", "link": "https://stackoverflow.com/users/5641522/nidhal-cherni"}, "edited": false, "score": 0, "creation_date": 1552411107, "post_id": 55125651, "comment_id": 96996088, "body": "duplicated <a href=\"https://stackoverflow.com/questions/3574644/how-can-i-find-the-latitude-and-longitude-from-address\" title=\"how can i find the latitude and longitude from address\">stackoverflow.com/questions/3574644/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 1895025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jkwXD.jpg?s=128&g=1", "display_name": "benju", "link": "https://stackoverflow.com/users/1895025/benju"}, "is_accepted": false, "score": 0, "last_activity_date": 1552410243, "creation_date": 1552410243, "answer_id": 55127029, "question_id": 55125651, "link": "https://stackoverflow.com/questions/55125651/how-to-convert-keyword-into-latitude-longitude-google-maps-android/55127029#55127029", "title": "How to convert keyword into Latitude Longitude Google Maps [Android]", "body": "<p>Well first it's Eiffel Tower, not Paris Tower, I think you must submit an precise address, also make sure you have integrated the geocoding api library</p>\n"}], "owner": {"reputation": 107, "user_id": 7056990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8y8a.jpg?s=128&g=1", "display_name": "yoppie97", "link": "https://stackoverflow.com/users/7056990/yoppie97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552410243, "creation_date": 1552405798, "question_id": 55125651, "link": "https://stackoverflow.com/questions/55125651/how-to-convert-keyword-into-latitude-longitude-google-maps-android", "title": "How to convert keyword into Latitude Longitude Google Maps [Android]", "body": "<p>From backend, I get field address \"Paris Tower\". And I wan to show maps with marker(at Paris Tower). So, I need LatLng for show maps. I've tried using GeoCoder, but it's always null. </p>\n\n<pre><code>fun location(address: String) {\nvar addressList: List&lt;Address&gt; = listOf()\nval geoCoder = Geocoder(this)\ntry {\n  addressList = geoCoder.getFromLocationName(\"Candi Prambanan\", 1)\n} catch (e: IOException) {\n  e.printStackTrace()\n}\nLog.d(\"Test addressList\", addressList.toString())\nif (addressList.isNotEmpty()) {\n  val addressLoc = addressList[0]\n  val latLng = LatLng(addressLoc.latitude, addressLoc.longitude)\n  this.lat = addressLoc.latitude.toString()\n  this.long = addressLoc.longitude.toString()\n}\n</code></pre>\n\n<p>}</p>\n\n<p>How should I do?</p>\n"}, {"tags": ["kotlin", "android-recyclerview", "scroll", "carousel"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10617954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rn7uw.png?s=128&g=1", "display_name": "Valentin Nasraty", "link": "https://stackoverflow.com/users/10617954/valentin-nasraty"}, "edited": false, "score": 0, "creation_date": 1552410183, "post_id": 55124953, "comment_id": 96995555, "body": "Thanks, but not sure you understand the problem. How can I set the Y Pivot to the recyclerview bottom with a SnapHelper ?"}, {"owner": {"reputation": 362, "user_id": 9271818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12e109d836ad6f268ee12f0ba2e4022?s=128&d=identicon&r=PG&f=1", "display_name": "Benoit TH", "link": "https://stackoverflow.com/users/9271818/benoit-th"}, "reply_to_user": {"reputation": 23, "user_id": 10617954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rn7uw.png?s=128&g=1", "display_name": "Valentin Nasraty", "link": "https://stackoverflow.com/users/10617954/valentin-nasraty"}, "edited": false, "score": 0, "creation_date": 1552410640, "post_id": 55124953, "comment_id": 96995833, "body": "Pivot is a value between 0 and 1, 0 being top and 1 being bottom so you should just have to set the pivot to 1 on your RecyclerView"}, {"owner": {"reputation": 23, "user_id": 10617954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rn7uw.png?s=128&g=1", "display_name": "Valentin Nasraty", "link": "https://stackoverflow.com/users/10617954/valentin-nasraty"}, "edited": false, "score": 0, "creation_date": 1552411572, "post_id": 55124953, "comment_id": 96996351, "body": "I tried to set the pivot (0 or 1) in the recyclerview and in the layoutManager, but it didn&#39;t work. The only way to get the pivot fixed to the bottom is <code>child.pivotY = (getDecoratedBottom(child) * 1f)</code> in the layoutManager. But I got a weird result. The space between images is not the same on the left and right side"}], "tags": [], "owner": {"reputation": 362, "user_id": 9271818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12e109d836ad6f268ee12f0ba2e4022?s=128&d=identicon&r=PG&f=1", "display_name": "Benoit TH", "link": "https://stackoverflow.com/users/9271818/benoit-th"}, "is_accepted": false, "score": 0, "last_activity_date": 1552403812, "creation_date": 1552403812, "answer_id": 55124953, "question_id": 55124812, "link": "https://stackoverflow.com/questions/55124812/how-to-fix-y-axis-for-carousel-effect-with-recyclerview/55124953#55124953", "title": "How to fix Y-Axis for carousel effect with RecyclerView", "body": "<p>You shouldn't have to do this manually, there's a <code>SnaperHelper</code> class you can use\nJust do it like so:</p>\n\n<pre><code>val snapHelper = new PagerSnapHelper();\nsnapHelper.attachToRecyclerView(recyclerView);\n</code></pre>\n\n<p>More info here\n<a href=\"https://stackoverflow.com/questions/29134094/recyclerview-horizontal-scroll-snap-in-center\">RecyclerView horizontal scroll snap in center</a></p>\n\n<p>and here <a href=\"https://blog.mindorks.com/using-snaphelper-in-recyclerview-fc616b6833e8\" rel=\"nofollow noreferrer\">https://blog.mindorks.com/using-snaphelper-in-recyclerview-fc616b6833e8</a></p>\n"}], "owner": {"reputation": 23, "user_id": 10617954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rn7uw.png?s=128&g=1", "display_name": "Valentin Nasraty", "link": "https://stackoverflow.com/users/10617954/valentin-nasraty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552403812, "creation_date": 1552403396, "question_id": 55124812, "link": "https://stackoverflow.com/questions/55124812/how-to-fix-y-axis-for-carousel-effect-with-recyclerview", "title": "How to fix Y-Axis for carousel effect with RecyclerView", "body": "<p>I got a recyclerview. I want to implement a carousel effect with fixed Y-Axis like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HrKTE.png\" rel=\"nofollow noreferrer\">Good Carousel effect</a></p>\n\n<p>I wrote a custom LinearLayoutManager to be able to modify the recyclerview scrolling behaviour.</p>\n\n<p>I try to get an horizontal scroll with Y-Axis fixed to the bottom of the view and X-Axis to the center of the view.</p>\n\n<pre><code>private val mShrinkAmount = 0.30f\nprivate val mShrinkDistance = 1f\n\noverride fun onLayoutChildren(recycler: RecyclerView.Recycler?, state: RecyclerView.State?) {\n    super.onLayoutChildren(recycler, state)\n    scrollHorizontallyBy(0, recycler, state)\n}\n\noverride fun scrollHorizontallyBy(dx: Int, recycler: RecyclerView.Recycler?, state: RecyclerView.State?): Int {\n    val scrolled = super.scrollHorizontallyBy(dx, recycler, state)\n    val scalePoint = (width / 2f)\n    val d0 = 0f\n    val d1 = (mShrinkDistance * scalePoint)\n    val s0 = 1f\n    val s1 = (1f - mShrinkAmount)\n\n    for (index in 0..(childCount - 1)) {\n        val child = getChildAt(index)\n        val childMidPoint = ((getDecoratedLeft(child!!) + getDecoratedRight(child)) / 2f)\n        val d = Math.min(d1, Math.abs(scalePoint - childMidPoint))\n        val scale = (s0 + (s1 - s0) * (d - d0) / (d1 - d0))\n\n        child.scaleX = scale\n        child.scaleY = scale\n        child.pivotY = (getDecoratedBottom(child) * 1f)\n    }\n    return scrolled\n}\n</code></pre>\n\n<p>I set the value of pivotY to the bottom of the view here</p>\n\n<pre><code>child.pivotY = (getDecoratedBottom(child) * 1f)\n</code></pre>\n\n<p>But the result is not clean as you can see here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/R2IrO.gif\" rel=\"nofollow noreferrer\">Bad Carousel effect</a></p>\n\n<p>The bottom of the views are not aligned and I got different padding on the right and left side when scrolling.</p>\n\n<p>What did I miss?</p>\n"}, {"tags": ["java", "android", "kotlin", "alarmmanager"], "comments": [{"owner": {"reputation": 1665, "user_id": 1101963, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/84c24dec7be50840b7aeaac32358e189?s=128&d=identicon&r=PG", "display_name": "Yuriy Kulikov", "link": "https://stackoverflow.com/users/1101963/yuriy-kulikov"}, "edited": false, "score": 0, "creation_date": 1563113933, "post_id": 55124734, "comment_id": 100585556, "body": "Have you been able to solve this issue? Google Clock now works property on Android 9 on Samsung. My app still has the same issue as yours."}, {"owner": {"reputation": 280, "user_id": 3100979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRubv.jpg?s=128&g=1", "display_name": "Glimpse", "link": "https://stackoverflow.com/users/3100979/glimpse"}, "reply_to_user": {"reputation": 1665, "user_id": 1101963, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/84c24dec7be50840b7aeaac32358e189?s=128&d=identicon&r=PG", "display_name": "Yuriy Kulikov", "link": "https://stackoverflow.com/users/1101963/yuriy-kulikov"}, "edited": false, "score": 0, "creation_date": 1564247057, "post_id": 55124734, "comment_id": 100971049, "body": "hi @YuriyKulikov, I am still facing the same issue. This is also happening on S10+"}, {"owner": {"reputation": 1665, "user_id": 1101963, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/84c24dec7be50840b7aeaac32358e189?s=128&d=identicon&r=PG", "display_name": "Yuriy Kulikov", "link": "https://stackoverflow.com/users/1101963/yuriy-kulikov"}, "edited": false, "score": 0, "creation_date": 1564254876, "post_id": 55124734, "comment_id": 100972998, "body": "do you have a devices on which this can be reproduced? I have a few ideas what can Samsung be expecting to be put into the intents."}, {"owner": {"reputation": 280, "user_id": 3100979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRubv.jpg?s=128&g=1", "display_name": "Glimpse", "link": "https://stackoverflow.com/users/3100979/glimpse"}, "reply_to_user": {"reputation": 1665, "user_id": 1101963, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/84c24dec7be50840b7aeaac32358e189?s=128&d=identicon&r=PG", "display_name": "Yuriy Kulikov", "link": "https://stackoverflow.com/users/1101963/yuriy-kulikov"}, "edited": false, "score": 0, "creation_date": 1564341457, "post_id": 55124734, "comment_id": 100989077, "body": "Hi @YuriyKulikov ,  I am currently using Samsung S10+ which has the same behavior as mentioned in the problem above (related to Samsung S8)"}, {"owner": {"reputation": 501, "user_id": 1608385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a998a71d44b0e9a99b9ca0231cc0d1?s=128&d=identicon&r=PG", "display_name": "user1608385", "link": "https://stackoverflow.com/users/1608385/user1608385"}, "edited": false, "score": 0, "creation_date": 1564597497, "post_id": 55124734, "comment_id": 101087799, "body": "I&#39;m seeing the same issue on a Galaxy S9 running Pie.  I&#39;m guessing that Samsung did this intentionally to combat problems with background services arising from Android Doze that force some apps to use setAlarmClock(AlarmManager.AlarmClockInfo info, PendingIntent operation) to reliably run operations at a fixed interval, even if the phone goes into doze. Now they can do so without showing an annoying alarm icon in the status bar."}, {"owner": {"reputation": 2566, "user_id": 2836371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEHqf.png?s=128&g=1", "display_name": "Maksim Ivanov", "link": "https://stackoverflow.com/users/2836371/maksim-ivanov"}, "edited": false, "score": 0, "creation_date": 1581628553, "post_id": 55124734, "comment_id": 106510842, "body": "@Glimpse, did you ever get to the bottom of this?"}], "answers": [{"comments": [{"owner": {"reputation": 280, "user_id": 3100979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRubv.jpg?s=128&g=1", "display_name": "Glimpse", "link": "https://stackoverflow.com/users/3100979/glimpse"}, "edited": false, "score": 0, "creation_date": 1552415885, "post_id": 55127293, "comment_id": 96998659, "body": "I am not sure you got it right, or you are just trying to gain some reputation giving random comments. Read my question once again and pay attention to the details."}, {"owner": {"reputation": 783, "user_id": 7926992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d75ae3a81a8720e3289f2c1537d2029d?s=128&d=identicon&r=PG&f=1", "display_name": "abhinandan sharma", "link": "https://stackoverflow.com/users/7926992/abhinandan-sharma"}, "reply_to_user": {"reputation": 280, "user_id": 3100979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRubv.jpg?s=128&g=1", "display_name": "Glimpse", "link": "https://stackoverflow.com/users/3100979/glimpse"}, "edited": false, "score": 0, "creation_date": 1552416240, "post_id": 55127293, "comment_id": 96998850, "body": "i am also working on some projects and facing the same issue on android pie devices.I hoped it might help you."}], "tags": [], "owner": {"reputation": 783, "user_id": 7926992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d75ae3a81a8720e3289f2c1537d2029d?s=128&d=identicon&r=PG&f=1", "display_name": "abhinandan sharma", "link": "https://stackoverflow.com/users/7926992/abhinandan-sharma"}, "is_accepted": false, "score": -2, "last_activity_date": 1552411193, "creation_date": 1552411193, "answer_id": 55127293, "question_id": 55124734, "link": "https://stackoverflow.com/questions/55124734/alarmmanager-setalarmclock-not-showing-alarm-in-top-right-corner-on-android-pi/55127293#55127293", "title": "AlarmManager.setAlarmClock() not showing alarm in top right corner on Android Pie", "body": "<p>In android Pie restrictions are introduced on the apps running in background.\n<br/>\n This is due to new features introduced to improve device power management.\n<br/></p>\n\n<p>These features are explained in android developer documents in detail.<br/>\nYou can check details in this <a href=\"https://developer.android.com/about/versions/pie/power\" rel=\"nofollow noreferrer\">Link</a>.\n<br/>\nHope it helps you !</p>\n"}], "owner": {"reputation": 280, "user_id": 3100979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/BRubv.jpg?s=128&g=1", "display_name": "Glimpse", "link": "https://stackoverflow.com/users/3100979/glimpse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1553872669, "creation_date": 1552403152, "last_edit_date": 1552404909, "question_id": 55124734, "link": "https://stackoverflow.com/questions/55124734/alarmmanager-setalarmclock-not-showing-alarm-in-top-right-corner-on-android-pi", "title": "AlarmManager.setAlarmClock() not showing alarm in top right corner on Android Pie", "body": "<p>I am having an alarm app that sets alarm using following code for devices on Marshmallow and higher:</p>\n\n<pre><code>val alarmIntent: PendingIntent = Intent(context, AlarmReceiver::class.java).let { intent -&gt;\n    intent.putExtra(Const.EXTRA_ALARM_ID, alarm.alarmId)\n    PendingIntent.getBroadcast(context, \n                               alarm.calculateBroadcastId(dayOfWeek),\n                               intent, \n                               PendingIntent.FLAG_UPDATE_CURRENT)\n}\n\nalarmManager.setAlarmClock(\n            AlarmManager.AlarmClockInfo(calendar.timeInMillis, alarmIntent),\n            preAlarmIntent)\n</code></pre>\n\n<p>It <strong>works as expected</strong> and shows alarm icon in top right corner (see attachment) on all devices <strong>except</strong> those devices running <strong>Android Pie</strong>.</p>\n\n<p>UPDATE:\nNot on all devices running Android Pie, just Samsung (S8) so far.</p>\n\n<p>Is there any additional code that I should add into the pending intent or somewhere in order to show this icon?</p>\n\n<p>Photo of the device running Android Oreo (OS 8.1) and showing alarm icon as expected:\n<a href=\"https://i.stack.imgur.com/LEh8v.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LEh8v.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 185247, "user_id": 135589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbd98f264c64096af168747c3ae71a7d?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/135589/jesper"}, "edited": false, "score": 0, "creation_date": 1552403876, "post_id": 55124478, "comment_id": 96991423, "body": "Templates in C++ are not the same thing and don&#39;t work the same way as generics in Kotlin or Java."}, {"owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1552404581, "post_id": 55124478, "comment_id": 96991917, "body": "@TimCastelijns With <code>where</code> with multiple constraints does the opposite of what I like to achieve. It &quot;and&quot; combines the single constraints. But I&#39;d like to &quot;or&quot; combine them. :)"}, {"owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "reply_to_user": {"reputation": 185247, "user_id": 135589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dbd98f264c64096af168747c3ae71a7d?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/135589/jesper"}, "edited": false, "score": 0, "creation_date": 1552404614, "post_id": 55124478, "comment_id": 96991930, "body": "@Jesper Thanks, I know. The C++ example was just for clarification."}], "answers": [{"comments": [{"owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "edited": false, "score": 0, "creation_date": 1552404697, "post_id": 55124917, "comment_id": 96991978, "body": "C++ is also statically typed and object oriented. ;) Thanks, your idea works, but again introduces too much duplication for my taste."}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "edited": false, "score": 0, "creation_date": 1552405693, "post_id": 55124917, "comment_id": 96992688, "body": "True. I wanted to go into that direction <a href=\"https://stackoverflow.com/questions/36347/what-are-the-differences-between-generic-types-in-c-and-java\" title=\"what are the differences between generic types in c and java\">stackoverflow.com/questions/36347/&hellip;</a>, but might have missed the actually relevant property which makes the difference. In <i>Java</i> and therefore <i>Kotlin</i> it&#39;s just not possible - sadly."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 2, "last_activity_date": 1552403707, "creation_date": 1552403707, "answer_id": 55124917, "question_id": 55124478, "link": "https://stackoverflow.com/questions/55124478/generic-constraint-as-type-list-or-compile-time-duck-typing/55124917#55124917", "title": "Generic constraint as type list? Or compile-time duck typing?", "body": "<p><em>Kotlin</em> like <em>Java</em> is a statically typed, object oriented language. Therefore you'd have to provide an common supertype declaring the properties <code>x</code> and <code>y</code>.</p>\n\n<p>As this is not the case you cannot achieve duck typing as you like. <code>THING</code> has a supertype of <code>Any?</code> and therefore <code>x</code> and <code>y</code> are not accessible.</p>\n\n<p>You could work around your issue by using a wrapper or delegate:</p>\n\n<pre><code>sealed class Thing\u00a0{\n    abstract val x: Int\n    abstract val y: Int\n}\nclass ASimilar(\n    delegate: orig.OneThing\n): Thing() {\n    override val x get() = delegate.x\n    override val y get() = delegate.y\n}\nclass ASimilarThing(\n    delegate: orig.ASimilarThing\n): Thing() {\n    override val x get() = delegate.x\n    override val y get() = delegate.y\n}\n\n\nfun process(thing: Thing) {\n    println(thing.x)\n    println(thing.y)\n}\n</code></pre>\n"}], "owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 55124917, "answer_count": 1, "score": 0, "last_activity_date": 1552403707, "creation_date": 1552402490, "question_id": 55124478, "link": "https://stackoverflow.com/questions/55124478/generic-constraint-as-type-list-or-compile-time-duck-typing", "title": "Generic constraint as type list? Or compile-time duck typing?", "body": "<p>The following minimal example shows my problem quite well, I hope:</p>\n\n<pre><code>data class OneThing(val x: Int, val y: Int, val foo: String)\ndata class ASimilarThing(val x: Int, val y: Int, val bar: String)\n\nfun &lt;THING&gt; process(thing: THING) {\n    println(thing.x)\n    println(thing.y)\n}\n\nfun main() {\n    val oneThing = OneThing(1, 2, \"hi\")\n    val aSimilarThing = ASimilarThing(3, 4, \"ho\")\n    process(oneThing)\n    process(aSimilarThing)\n}\n</code></pre>\n\n<p>The two classes <code>OneThing</code> and <code>ASimilarThing</code> come from a library, so I can not change them. But semantically they are very similar, and I'd like to avoid implementing my logic two times, so I'd like to have it in a generic <code>process</code> function.</p>\n\n<p><strong>However the above does not compile.</strong> (<a href=\"https://gist.github.com/Dobiasd/4b732b4226b62d4eff9a3ea89b13cba4\" rel=\"nofollow noreferrer\">In C++ it is possible.</a>)</p>\n\n<p>Is there a way to make <code>process</code> work? Ideally I'm looking for something like</p>\n\n<pre><code>fun &lt;THING: [OneThing, ASimilarThing]&gt; process(thing: THING) { ... }\n</code></pre>\n\n<p>But such a syntax does not exist.</p>\n\n<p>Any other ideas? :)</p>\n"}, {"tags": ["performance", "kotlin", "mutablelist"], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 9271818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12e109d836ad6f268ee12f0ba2e4022?s=128&d=identicon&r=PG&f=1", "display_name": "Benoit TH", "link": "https://stackoverflow.com/users/9271818/benoit-th"}, "is_accepted": false, "score": -1, "last_activity_date": 1552404302, "creation_date": 1552404302, "answer_id": 55125127, "question_id": 55124235, "link": "https://stackoverflow.com/questions/55124235/which-is-the-best-way-or-best-performance-to-join-two-mutables-list-in-kotlin/55125127#55125127", "title": "which is the best way or best performance to join two mutables list in kotlin?", "body": "<p>The best option is to create a LinkedList because it's always cheap to add items into it, whereas an ArrayList might sometimes allocate more space if you reach the end of the array. </p>\n\n<p>See this for more info on the topic <a href=\"https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist-in-java\">When to use LinkedList over ArrayList in Java?</a> </p>\n\n<p>If <code>list1</code> isn't a LinkedList already, keeping in mind <code>mutableListOf()</code> returns an ArrayList, then you can create a third list like so:</p>\n\n<pre><code> val newList = LinkedList&lt;Int&gt;()\n    list1.forEach {\n        newList += it\n    }\n\n    list2.forEach {\n        newList += it\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3122, "user_id": 5529263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e629acbc6aea3d6a8980721336438fc4?s=128&d=identicon&r=PG", "display_name": "Boken", "link": "https://stackoverflow.com/users/5529263/boken"}, "is_accepted": false, "score": 0, "last_activity_date": 1552420995, "creation_date": 1552420995, "answer_id": 55129830, "question_id": 55124235, "link": "https://stackoverflow.com/questions/55124235/which-is-the-best-way-or-best-performance-to-join-two-mutables-list-in-kotlin/55129830#55129830", "title": "which is the best way or best performance to join two mutables list in kotlin?", "body": "<p><strong>If <code>list1</code> is mutable and you can modify it:</strong></p>\n\n<pre><code>list1.addAll(list1.size, list2)\n</code></pre>\n\n<p>and in <code>list1</code> you will have <code>list1 + list2</code></p>\n\n<p><strong>If you can not modify you can create <code>ArrayList</code> or <code>LinkedList</code> and add all</strong></p>\n\n<pre><code>val newList = ArrayList&lt;Int&gt;()\n\nnewList.addAll(list1)\nnewList.addAll(list2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1552433506, "last_edit_date": 1552433506, "creation_date": 1552433167, "answer_id": 55132136, "question_id": 55124235, "link": "https://stackoverflow.com/questions/55124235/which-is-the-best-way-or-best-performance-to-join-two-mutables-list-in-kotlin/55132136#55132136", "title": "which is the best way or best performance to join two mutables list in kotlin?", "body": "<p>If the first list is mutable and you want to modify it, just use <code>+=</code> operator:</p>\n\n<pre><code>list1 += list2\n</code></pre>\n\n<p>It delegates to <code>addAll</code> member function, appending all elements of <code>list2</code> to <code>list1</code></p>\n\n<p>If you don't want to mutate the original list, use <code>+</code> operator:</p>\n\n<pre><code>val result = list1 + list2\n</code></pre>\n\n<p>It concatenates two lists into the third new list. Compared to creating an empty ArrayList by hand and calling <code>addAll</code> on it, this operator has an advantage of presizing the resulting ArrayList to an estimated size, so it helps to spare ArrayList's storage array reallocations.</p>\n"}], "owner": {"reputation": 761, "user_id": 3348549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38327be7b020812e6c5c7377128053a1?s=128&d=identicon&r=PG&f=1", "display_name": "dasuma", "link": "https://stackoverflow.com/users/3348549/dasuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1552433506, "creation_date": 1552401766, "last_edit_date": 1552404261, "question_id": 55124235, "link": "https://stackoverflow.com/questions/55124235/which-is-the-best-way-or-best-performance-to-join-two-mutables-list-in-kotlin", "title": "which is the best way or best performance to join two mutables list in kotlin?", "body": "<p>hello I would like to know which is the best performance to join two mutables list</p>\n\n<p><code>if list1.addall (list2)\nwith foreach\nlist1?.let { list1 -&gt; list2?.let(list1::addAll) }</code></p>\n\n<p>or a map or something like that..?</p>\n"}, {"tags": ["android", "kotlin", "bouncycastle", "spongycastle"], "comments": [{"owner": {"reputation": 479, "user_id": 6180827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wwwQa.jpg?s=128&g=1", "display_name": "Khojiakbar", "link": "https://stackoverflow.com/users/6180827/khojiakbar"}, "edited": false, "score": 0, "creation_date": 1552400464, "post_id": 55123228, "comment_id": 96988932, "body": "Did you try using what this thread recommends? <a href=\"https://stackoverflow.com/questions/18244630/elliptic-curve-with-digital-signature-algorithm-ecdsa-implementation-on-bouncy\" title=\"elliptic curve with digital signature algorithm ecdsa implementation on bouncy\">stackoverflow.com/questions/18244630/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 9530677, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DKma0zBS83Y/AAAAAAAAAAI/AAAAAAAAChI/-SDyXf8nGr0/photo.jpg?sz=128", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/9530677/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1552454630, "post_id": 55123856, "comment_id": 97010519, "body": "But as I mentioned earlier, I don&#39;t want to go to the Spongy-castle provider. Is there anyway to get rid of this."}], "tags": [], "owner": {"reputation": 838, "user_id": 8618875, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b22b449bde41ff43cda11ecb7bf737b?s=128&d=identicon&r=PG&f=1", "display_name": "clauub", "link": "https://stackoverflow.com/users/8618875/clauub"}, "is_accepted": false, "score": 1, "last_activity_date": 1552400724, "creation_date": 1552400724, "answer_id": 55123856, "question_id": 55123228, "link": "https://stackoverflow.com/questions/55123228/java-security-nosuchalgorithmexception-no-such-algorithm-ecdsa-for-provider-bc/55123856#55123856", "title": "java.security.NoSuchAlgorithmException: no such algorithm: ECDSA for provider BC", "body": "<p>I found this, read this.</p>\n\n<p>Android support for ECDSA was introduced since version 4.0 using Bouncycastle (v1.46) as the default cryptographic provider. See the blog <a href=\"https://nelenkov.blogspot.com.es/2011/12/using-ecdh-on-android.html?m=1\" rel=\"nofollow noreferrer\">https://nelenkov.blogspot.com.es/2011/12/using-ecdh-on-android.html?m=1</a></p>\n\n<p>But Android included a shortened version of Bouncycastle, and there is no full support for ECDSA. You can see in the link that algorithm KeyPairGenerator/ECDSA is not supported, which is the required one to generate ethereum keys.</p>\n\n<p>You can not include directly the bouncycastle library because there is a conflict with the package name org.bouncycastle. I suggest to include spongycastle in your project, which it is a repackaged version of bouncycastle for Android org.spongycastle.</p>\n\n<p>The package name conflict has been resolved in new android versions, but if your target are old versions then you need to ensure which cryptographic provider is being used.</p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 9530677, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DKma0zBS83Y/AAAAAAAAAAI/AAAAAAAAChI/-SDyXf8nGr0/photo.jpg?sz=128", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/9530677/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1552454747, "post_id": 55123930, "comment_id": 97010547, "body": "Is it possible to manually import the Bouncy-castle library in android Studio, with another name.  By downloading the jar file from official BC website. ??"}, {"owner": {"reputation": 479, "user_id": 6180827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wwwQa.jpg?s=128&g=1", "display_name": "Khojiakbar", "link": "https://stackoverflow.com/users/6180827/khojiakbar"}, "reply_to_user": {"reputation": 101, "user_id": 9530677, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DKma0zBS83Y/AAAAAAAAAAI/AAAAAAAAChI/-SDyXf8nGr0/photo.jpg?sz=128", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/9530677/naveen-kumar"}, "edited": false, "score": 0, "creation_date": 1552481340, "post_id": 55123930, "comment_id": 97024756, "body": "@NaveenKumar Do you support android 3.0 or below? If not then you can import bouncycastle as usual library and use it. Bouncycastle&#39;s package bundled in android was renamed from org.bouncycastle to com.android.org.bouncycastle, so it doesn&#39;t conflict with the newest version of the library."}], "tags": [], "owner": {"reputation": 121, "user_id": 2735518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b92462bc225936f4404f1d0ea95038e?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Altieri", "link": "https://stackoverflow.com/users/2735518/antonio-altieri"}, "is_accepted": false, "score": 0, "last_activity_date": 1552400946, "creation_date": 1552400946, "answer_id": 55123930, "question_id": 55123228, "link": "https://stackoverflow.com/questions/55123228/java-security-nosuchalgorithmexception-no-such-algorithm-ecdsa-for-provider-bc/55123930#55123930", "title": "java.security.NoSuchAlgorithmException: no such algorithm: ECDSA for provider BC", "body": "<p>There is a package name conflict between bouncycastle and spongycastle. </p>\n\n<p>Spongycastle is a recompiled and tested version of BouncyCastle. If you really want to use Bouncycastle, i think that the only solution is to include the entire source code of bouncycastle inside your app, renaming packages names</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 9530677, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DKma0zBS83Y/AAAAAAAAAAI/AAAAAAAAChI/-SDyXf8nGr0/photo.jpg?sz=128", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/9530677/naveen-kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1555500499, "creation_date": 1555500499, "answer_id": 55726527, "question_id": 55123228, "link": "https://stackoverflow.com/questions/55123228/java-security-nosuchalgorithmexception-no-such-algorithm-ecdsa-for-provider-bc/55726527#55726527", "title": "java.security.NoSuchAlgorithmException: no such algorithm: ECDSA for provider BC", "body": "<p>This code works fine for me</p>\n\n<pre><code>public fun generateSECP256K1Keypair():KeyPair{\n  Security.addProvider(org.bouncycastle.jce.provider.BouncyCastleProvider())\n  var keypairGen: KeyPairGenerator = KeyPairGenerator.getInstance(\"EC\",\"BC\")\n  val spec:ECGenParameterSpec = ECGenParameterSpec(\"secp256k1\")\n  keypairGen.initialize(spec, SecureRandom())\n  var keyPair:KeyPair= keypairGen.genKeyPair()\n  return keyPair;\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 9530677, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DKma0zBS83Y/AAAAAAAAAAI/AAAAAAAAChI/-SDyXf8nGr0/photo.jpg?sz=128", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/9530677/naveen-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2405, "favorite_count": 0, "accepted_answer_id": 55726527, "answer_count": 3, "score": 1, "last_activity_date": 1555500499, "creation_date": 1552398958, "last_edit_date": 1552399134, "question_id": 55123228, "link": "https://stackoverflow.com/questions/55123228/java-security-nosuchalgorithmexception-no-such-algorithm-ecdsa-for-provider-bc", "title": "java.security.NoSuchAlgorithmException: no such algorithm: ECDSA for provider BC", "body": "<p>I am trying to generate a secp256k1 keypair with KeyPairGenerator function. My function looks like</p>\n\n<pre><code>public fun generateSECP256K1Keypair():KeyPair{\n  Security.addProvider(org.bouncycastle.jce.provider.BouncyCastleProvider())\n  var keypairGen: KeyPairGenerator = KeyPairGenerator.getInstance(\"ECDSA\",\"BC\")\n  val spec:ECGenParameterSpec = ECGenParameterSpec(\"secp256k1\")\n  keypairGen.initialize(spec, SecureRandom())\n  var keyPair:KeyPair= keypairGen.genKeyPair()\n  return keyPair;\n</code></pre>\n\n<p>}</p>\n\n<p>My gradle file dependencies look like this</p>\n\n<pre><code>dependencies {\nimplementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\nimplementation 'com.android.support.constraint:constraint-layout:1.1.3'\nimplementation 'com.android.support:appcompat-v7:28.0.0'\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'com.android.support.test:runner:1.0.2'\nandroidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\nimplementation 'org.bouncycastle:bcprov-jdk15on:1.61'\n</code></pre>\n\n<p>}</p>\n\n<p>When I try to execute this function, I am getting following error</p>\n\n<pre><code>Process: com.example.myapplication, PID: 6477\njava.lang.RuntimeException: Unable to create service com.example.myapplication.service.Myservice: java.security.NoSuchAlgorithmException: no such algorithm: ECDSA for provider BC\n    at android.app.ActivityThread.handleCreateService(ActivityThread.java:3201)\n    at android.app.ActivityThread.-wrap5(ActivityThread.java)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n</code></pre>\n\n<p>If I use, SpongyCastle instead of BouncyCastle, It working fine. But I don't want to use SpongyCastle provider in my case.  </p>\n"}, {"tags": ["android", "kotlin", "realm"], "comments": [{"owner": {"reputation": 3265, "user_id": 2757664, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/2Lap3.jpg?s=128&g=1", "display_name": "Saeed Entezari", "link": "https://stackoverflow.com/users/2757664/saeed-entezari"}, "edited": false, "score": 0, "creation_date": 1552398926, "post_id": 55123063, "comment_id": 96987813, "body": "Could you paste the whole stacktrace?"}, {"owner": {"reputation": 457, "user_id": 6427258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wZ4IU.jpg?s=128&g=1", "display_name": "tendai", "link": "https://stackoverflow.com/users/6427258/tendai"}, "reply_to_user": {"reputation": 3265, "user_id": 2757664, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/2Lap3.jpg?s=128&g=1", "display_name": "Saeed Entezari", "link": "https://stackoverflow.com/users/2757664/saeed-entezari"}, "edited": false, "score": 0, "creation_date": 1552399631, "post_id": 55123063, "comment_id": 96988332, "body": "I have added the stacktrace"}], "answers": [{"comments": [{"owner": {"reputation": 457, "user_id": 6427258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wZ4IU.jpg?s=128&g=1", "display_name": "tendai", "link": "https://stackoverflow.com/users/6427258/tendai"}, "edited": false, "score": 0, "creation_date": 1552404636, "post_id": 55123506, "comment_id": 96991941, "body": "Please educate me here. So when i use  <code>var userObj = realm.where&lt;Competition&gt;().equalTo(                 &quot;competitionId&quot;, competitionId             ).findFirst().user</code>  Why do i get null, why can&#39;t i access this obj? The above method is a bit confusing"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 457, "user_id": 6427258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wZ4IU.jpg?s=128&g=1", "display_name": "tendai", "link": "https://stackoverflow.com/users/6427258/tendai"}, "edited": false, "score": 0, "creation_date": 1552404755, "post_id": 55123506, "comment_id": 96992022, "body": "It sounds like the competition you retrieved had no user set as its field value."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 457, "user_id": 6427258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wZ4IU.jpg?s=128&g=1", "display_name": "tendai", "link": "https://stackoverflow.com/users/6427258/tendai"}, "edited": false, "score": 0, "creation_date": 1552483108, "post_id": 55123506, "comment_id": 97025940, "body": "Either way, the &quot;above method&quot; is the correct way of doing this."}, {"owner": {"reputation": 457, "user_id": 6427258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wZ4IU.jpg?s=128&g=1", "display_name": "tendai", "link": "https://stackoverflow.com/users/6427258/tendai"}, "edited": false, "score": 1, "creation_date": 1552483412, "post_id": 55123506, "comment_id": 97026156, "body": "Indeed it is. I also went through this article <a href=\"https://proandroiddev.com/realm-backlinks-queries-to-linking-objects-and-changes-in-schema-design-d64de74f1608\" rel=\"nofollow noreferrer\">link</a> which also happens to have been written by you. It explains well, thank you"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 457, "user_id": 6427258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wZ4IU.jpg?s=128&g=1", "display_name": "tendai", "link": "https://stackoverflow.com/users/6427258/tendai"}, "edited": false, "score": 0, "creation_date": 1552483531, "post_id": 55123506, "comment_id": 97026224, "body": "I&#39;m glad you found my article helpful! :D"}], "tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": true, "score": 1, "last_activity_date": 1552400109, "last_edit_date": 1552400109, "creation_date": 1552399788, "answer_id": 55123506, "question_id": 55123063, "link": "https://stackoverflow.com/questions/55123063/query-the-size-of-a-realm-class-sub-object-kotlin/55123506#55123506", "title": "Query the size of a Realm Class Sub object - Kotlin", "body": "<p>I mean, it <em>is</em> fairly trivial, <strong><em>if</em></strong> you use Realm's features to your advantage (3.5.0+, I think).</p>\n\n<pre><code>open class User(): RealmObject() {\n    @PrimaryKey var userId: String? = null\n\n    var name: String? = null\n\n    @LinkingObjects(\"user\")\n    val userOfCompetitions: RealmResults&lt;Competition&gt;? = null\n}\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>val userCount = realm.where&lt;User&gt;()\n                     .equalTo(\"userOfCompetitions.competitionId\", competitionId)\n                     .count()\n</code></pre>\n"}], "owner": {"reputation": 457, "user_id": 6427258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wZ4IU.jpg?s=128&g=1", "display_name": "tendai", "link": "https://stackoverflow.com/users/6427258/tendai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 55123506, "answer_count": 1, "score": 1, "last_activity_date": 1552401277, "creation_date": 1552398510, "last_edit_date": 1552401277, "question_id": 55123063, "link": "https://stackoverflow.com/questions/55123063/query-the-size-of-a-realm-class-sub-object-kotlin", "title": "Query the size of a Realm Class Sub object - Kotlin", "body": "<p>How do i query the size of a realm object that is within another realm object</p>\n\n<p>I have two realm classes <code>Competition</code> &amp; <code>User</code>. <code>User</code> is a realm class also contained in <code>Competition</code>:</p>\n\n<pre><code>open class Competition (@PrimaryKey var competitionId: String?=null,\n                      var user: User? =null): RealmObject()\n\nopen class User(@PrimaryKey var userId: String?=null,\n                      var name: String? =null): RealmObject()\n</code></pre>\n\n<p>At some point, i would like to get the size of User within a specific competitionId in Competition and i'm having a challenge with what i thought would be trivial</p>\n\n<p>Here is what i have tried</p>\n\n<pre><code>var userObj = realm.where&lt;Competition&gt;().equalTo(\n                \"competitionId\", competitionId\n            ).findFirst().user.realm.where&lt;User&gt;().findAll().size\n</code></pre>\n\n<p>This gives me a  </p>\n\n<blockquote>\n  <p>kotlin.KotlinNullPointerException</p>\n</blockquote>\n\n<p>Stacktrace:</p>\n\n<pre><code>2019-03-12 16:03:25.112 22028-22028/co.keepnet.bass W/System.err: kotlin.KotlinNullPointerException\n2019-03-12 16:03:25.113 22028-22028/co.keepnet.bass W/System.err:     at co.keepnet.bass.ui.MainActivity$onClick$1.execute(MainActivity.kt:41)\n2019-03-12 16:03:25.113 22028-22028/co.keepnet.bass W/System.err:     at io.realm.Realm.executeTransaction(Realm.java:1431)\n2019-03-12 16:03:25.113 22028-22028/co.keepnet.bass W/System.err:     at co.keepnet.bass.ui.MainActivity.onClick(MainActivity.kt:37)\n2019-03-12 16:03:25.113 22028-22028/co.keepnet.bass W/System.err:     at co.keepnet.bass.data.adapter.CompetitionsAdapter$onBindViewHolder$1.onClick(CompetitionsAdapter.kt:75)\n2019-03-12 16:03:25.113 22028-22028/co.keepnet.bass W/System.err:     at android.view.View.performClick(View.java:6897)\n2019-03-12 16:03:25.113 22028-22028/co.keepnet.bass W/System.err:     at android.view.View$PerformClick.run(View.java:26101)\n2019-03-12 16:03:25.113 22028-22028/co.keepnet.bass W/System.err:     at android.os.Handler.handleCallback(Handler.java:789)\n2019-03-12 16:03:25.113 22028-22028/co.keepnet.bass W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:98)\n2019-03-12 16:03:25.113 22028-22028/co.keepnet.bass W/System.err:     at android.os.Looper.loop(Looper.java:164)\n2019-03-12 16:03:25.114 22028-22028/co.keepnet.bass W/System.err:     at android.app.ActivityThread.main(ActivityThread.java:6944)\n2019-03-12 16:03:25.114 22028-22028/co.keepnet.bass W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\n2019-03-12 16:03:25.114 22028-22028/co.keepnet.bass W/System.err:     at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:327)\n2019-03-12 16:03:25.114 22028-22028/co.keepnet.bass W/System.err:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1374)\n</code></pre>\n"}, {"tags": ["spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 5816, "user_id": 1976843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86b252b544ecc188ea1f120e9c2c97ee?s=128&d=identicon&r=PG", "display_name": "JEY", "link": "https://stackoverflow.com/users/1976843/jey"}, "edited": false, "score": 2, "creation_date": 1552398637, "post_id": 55122842, "comment_id": 96987640, "body": "well because lateinit will be initialized after object construction (call to init) you can&#39; use it. You should go with class LibProxy(@Value val someProperty: String)"}, {"owner": {"reputation": 2579, "user_id": 3637106, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hYmba.jpg?s=128&g=1", "display_name": "Hampus", "link": "https://stackoverflow.com/users/3637106/hampus"}, "reply_to_user": {"reputation": 5816, "user_id": 1976843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86b252b544ecc188ea1f120e9c2c97ee?s=128&d=identicon&r=PG", "display_name": "JEY", "link": "https://stackoverflow.com/users/1976843/jey"}, "edited": false, "score": 0, "creation_date": 1552401193, "post_id": 55122842, "comment_id": 96989508, "body": "Awesome. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "edited": false, "score": 0, "creation_date": 1552484946, "post_id": 55124019, "comment_id": 97027246, "body": "Just FYI there is no final keyword in Kotlin"}, {"owner": {"reputation": 2579, "user_id": 3637106, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hYmba.jpg?s=128&g=1", "display_name": "Hampus", "link": "https://stackoverflow.com/users/3637106/hampus"}, "reply_to_user": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "edited": false, "score": 1, "creation_date": 1552640302, "post_id": 55124019, "comment_id": 97095553, "body": "@Strelok: Sure there is a final keyword in Kotlin. The above code will not build without it."}], "tags": [], "owner": {"reputation": 2579, "user_id": 3637106, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hYmba.jpg?s=128&g=1", "display_name": "Hampus", "link": "https://stackoverflow.com/users/3637106/hampus"}, "is_accepted": true, "score": 3, "last_activity_date": 1552401181, "creation_date": 1552401181, "answer_id": 55124019, "question_id": 55122842, "link": "https://stackoverflow.com/questions/55122842/using-lateinit-properties-in-constructor-in-kotlin/55124019#55124019", "title": "Using lateinit properties in constructor in kotlin", "body": "<p>As per <a href=\"https://stackoverflow.com/users/1976843/jey\">JEY</a>'s comment. This is how it is supposed to be done:</p>\n\n<pre><code>@Service\nclass LibProxy(@Value(\"\\${lib.someProperty}\") private val someProperty: String) {\n\n    final var lib: Lib\n\n    init {\n        lib = Lib(someProperty)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "is_accepted": false, "score": 1, "last_activity_date": 1552402745, "creation_date": 1552402745, "answer_id": 55124575, "question_id": 55122842, "link": "https://stackoverflow.com/questions/55122842/using-lateinit-properties-in-constructor-in-kotlin/55124575#55124575", "title": "Using lateinit properties in constructor in kotlin", "body": "<p>Two possibilities here:</p>\n\n<p>The easy one is to replace the <code>init</code> block with a <code>@PostConstruct</code> method.\u00a0 Spring will call this once, after the object has been constructed (and hence autowired values are all set).\u00a0 For example:</p>\n\n<pre><code>@PostConstruct\nprivate fun initialise() {\n    lib = Lib(someProperty)\n}\n</code></pre>\n\n<p>The other is to arrange for the autowired property to be passed in a constructor, not set as a property (as per other answers).</p>\n\n<p>One approach that works well, especially if you have several configuration properties, is to have a central class storing them:</p>\n\n<pre><code>@ConfigurationProperties(\"lib\")\nclass ConfigProperties {\n    var someProperty = \"defaultValue\"\n    // \u2026and other properties\u2026\n}\n</code></pre>\n\n<p>This will set <code>someProperty</code> from a \"lib.someProperty\" value in a config file (or left as \"defaultValue\" if not present).</p>\n\n<p>You can then autowire its instance in the constructor, e.g.:</p>\n\n<pre><code>class SomeService @Autowired constructor(\n    private val configProperties: ConfigProperties) {\n\n    init {\n        lib = Lib(configProperties.someProperty)\n    }\n}\n</code></pre>\n\n<p>(Centralising the properties can make it easier to find what properties are available, too.)</p>\n"}], "owner": {"reputation": 2579, "user_id": 3637106, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hYmba.jpg?s=128&g=1", "display_name": "Hampus", "link": "https://stackoverflow.com/users/3637106/hampus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1554, "favorite_count": 1, "accepted_answer_id": 55124019, "answer_count": 2, "score": 3, "last_activity_date": 1552402745, "creation_date": 1552397895, "question_id": 55122842, "link": "https://stackoverflow.com/questions/55122842/using-lateinit-properties-in-constructor-in-kotlin", "title": "Using lateinit properties in constructor in kotlin", "body": "<p>How can I use lateinit properties in my class constructor:</p>\n\n<p>I have a spring component that I use to setup and access a third party library like so:</p>\n\n<pre><code>@Service\nclass LibProxy {\n\n    @Value(\"\\${lib.someProperty}\")\n    private lateinit var someProperty: String\n\n    final var lib: Lib\n\n    init {\n        lib = Lib(someProperty)\n    }\n}\n</code></pre>\n\n<p>This gives a </p>\n\n<pre><code>kotlin.UninitializedPropertyAccessException: lateinit property someProperty has not been initialized\n</code></pre>\n\n<p>How is this supposed to be done?</p>\n\n<p>I would like to avoid constructs like so:</p>\n\n<pre><code>@Service\nclass LibProxy {\n\n    @Value(\"\\${lib.someProperty}\")\n    private lateinit var someProperty: String\n\n    private var lib: Lib? = null\n\n    getLib(): Lib {\n        if (lib == null) {\n            lib = Lib(someProperty)\n        }\n        return lib ?: Lib(someProperty)\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "rx-java2", "retrywhen"], "answers": [{"tags": [], "owner": {"reputation": 657, "user_id": 1671699, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5aeedf23e90b0a73b59214fe32295159?s=128&d=identicon&r=PG", "display_name": "Camino2007", "link": "https://stackoverflow.com/users/1671699/camino2007"}, "is_accepted": true, "score": 2, "last_activity_date": 1552410055, "creation_date": 1552410055, "answer_id": 55126949, "question_id": 55121634, "link": "https://stackoverflow.com/questions/55121634/kotlin-rxjava2-compose-and-retrywhen-after-user-interaction/55126949#55126949", "title": "Kotlin, RxJava2: compose and retryWhen after user interaction", "body": "<p>Strange, as soon you do it the right way, it works. \nI over read somehow that I need in doOnError{...} to manage to show my Snackbar. </p>\n\n<p>Here is my working retry transformer:</p>\n\n<pre><code>private fun &lt;Data&gt; getRetryTransformer(): SingleTransformer&lt;Response&lt;Data&gt;, Response&lt;Data&gt;&gt; {\n    return SingleTransformer { singleResponse -&gt;\n        singleResponse\n                .doOnError {\n                    errorEventSubject.onNext(it)\n                }\n                .retryWhen { errors -&gt;\n                    errors.zipWith(retrySubject.toFlowable(BackpressureStrategy.LATEST),\n                            BiFunction&lt;Throwable, Boolean, Flowable&lt;Throwable&gt;&gt; { throwable: Throwable, isRetryEnabled: Boolean -&gt;\n                                if (isRetryEnabled) {\n                                    Flowable.just(throwable)\n                                } else {\n                                    Flowable.error(throwable)\n                                }\n                            })\n                }\n    }\n}\n</code></pre>\n\n<p>And the chain looks now like this (and I think it's beautiful):</p>\n\n<pre><code>override fun loadMyData(): Observable&lt;Resource&lt;DataResponse&gt;&gt; {\n    return retrofitApi\n            .getMyData()\n            .compose(getRetryTransformer())\n            .toObservable()\n            .compose(getResponseTransformer())\n}\n</code></pre>\n\n<p>What else I needed to propagate the error to my ViewModel is a 2nd PublishSubject:</p>\n\n<pre><code>private val errorEventSubject = PublishSubject.create&lt;Throwable&gt;()\n</code></pre>\n\n<p>And in the ViewModel I observe the changes for it and show the Snackbar. \nThat's it. </p>\n"}], "owner": {"reputation": 657, "user_id": 1671699, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5aeedf23e90b0a73b59214fe32295159?s=128&d=identicon&r=PG", "display_name": "Camino2007", "link": "https://stackoverflow.com/users/1671699/camino2007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "accepted_answer_id": 55126949, "answer_count": 1, "score": 1, "last_activity_date": 1552410055, "creation_date": 1552394122, "question_id": 55121634, "link": "https://stackoverflow.com/questions/55121634/kotlin-rxjava2-compose-and-retrywhen-after-user-interaction", "title": "Kotlin, RxJava2: compose and retryWhen after user interaction", "body": "<p>during the last two days I read a lot about the rxJava retryWhen operator.\n<a href=\"https://stackoverflow.com/questions/39890239/rxjava-retrywhen-operator-is-not-working-as-expected\">Here</a>, <a href=\"https://android.jlelse.eu/rx-grokking-retrywhen-and-repeatwhen-on-android-development-examples-af5c3ed0872b\" rel=\"nofollow noreferrer\">here</a>, <a href=\"https://blog.danlew.net/2016/01/25/rxjavas-repeatwhen-and-retrywhen-explained/\" rel=\"nofollow noreferrer\">here</a> and some more I forgot.</p>\n\n<p>But unfortunately I'm not able to get it work. \nWhat I'm trying to achive is, that I make an API call. If the call returns an error, I'm showing a SnackBar to the user with a reload button. If the user clicks this button, I would like to resubscribe to the chain. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>interface RetrofitApi {\n\n@GET(\"/v1/loadMyData\")\nfun getMyData(): Single&lt;Response&lt;DataResponse&gt;&gt;\n}\n</code></pre>\n\n<p>Where Response is from retrofit2. I need it to wrap the data class to check if response is successful.</p>\n\n<p>The next fun is called in a repository from a ViewModel: </p>\n\n<pre><code>override fun loadMyData(): Observable&lt;Resource&lt;DataResponse&gt;&gt; {\n    return retrofitApi\n            .getMyData()\n            .compose(getRetryTransformer())\n            .toObservable()\n            .compose(getResponseTransformer())\n}\n</code></pre>\n\n<p>Resource is another wrapper for the state of the call (SUCCESS, ERROR, LOADING). </p>\n\n<p>And finally the Transformer:</p>\n\n<pre><code>private fun &lt;Data&gt; getRetryTransformer(): SingleTransformer&lt;Response&lt;Data&gt;, Response&lt;Data&gt;&gt; {\n    return SingleTransformer { singleResponse -&gt;\n        singleResponse\n                .onErrorReturn {\n                    singleResponse.blockingGet()\n                }\n                .retryWhen { errors -&gt;\n                    errors.zipWith(retrySubject.toFlowable(BackpressureStrategy.LATEST),\n                            BiFunction&lt;Throwable, Boolean, Flowable&lt;Throwable&gt;&gt; { throwable: Throwable, isRetryEnabled: Boolean -&gt;\n                                if (isRetryEnabled) {\n                                    Flowable.just(null)\n                                } else {\n                                    Flowable.error(throwable)\n                                }\n                            })\n                }\n    }\n}\n</code></pre>\n\n<p>The retrySubject:</p>\n\n<pre><code>private val retrySubject = PublishSubject.create&lt;Boolean&gt;()\n</code></pre>\n\n<p>And when the user clicks the retry button, I call:</p>\n\n<pre><code>retrySubject.onNext(true)\n</code></pre>\n\n<p>The problem is now, that the error is not returned to the ViewModel and the SnackBar is never shown. I tried onErrorResumeNext() as well with no success. The whole retryWhen/zipWith part seem to work. Because in the repository there some more API calls with no retry behavior (yet) and there the SnackBar is displayed. That means, I do anther call where the SnackBar is shown -> button click and the retry transform works as expected. </p>\n\n<p>If you need some more information please don't hesitate to ask! Any help is appreciated! </p>\n"}, {"tags": ["java", "android", "gradle", "kotlin", "compiler-errors"], "comments": [{"owner": {"reputation": 16790, "user_id": 2936153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIaVu.jpg?s=128&g=1", "display_name": "Rohit5k2", "link": "https://stackoverflow.com/users/2936153/rohit5k2"}, "edited": false, "score": 0, "creation_date": 1552394117, "post_id": 55121567, "comment_id": 96984582, "body": "<a href=\"https://stackoverflow.com/questions/44598848/error-supertypes-of-the-following-classes-cannot-be-resolved-please-make-sure\" title=\"error supertypes of the following classes cannot be resolved please make sure\">stackoverflow.com/questions/44598848/&hellip;</a>"}, {"owner": {"reputation": 16790, "user_id": 2936153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIaVu.jpg?s=128&g=1", "display_name": "Rohit5k2", "link": "https://stackoverflow.com/users/2936153/rohit5k2"}, "edited": false, "score": 0, "creation_date": 1552394132, "post_id": 55121567, "comment_id": 96984592, "body": "<a href=\"https://stackoverflow.com/questions/54778651/supertypes-of-the-following-classes-cannot-be-resolved-please-make-sure-you-hav\" title=\"supertypes of the following classes cannot be resolved please make sure you hav\">stackoverflow.com/questions/54778651/&hellip;</a>"}, {"owner": {"reputation": 99, "user_id": 1041911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS0jr.jpg?s=128&g=1", "display_name": "Pamela Hill", "link": "https://stackoverflow.com/users/1041911/pamela-hill"}, "edited": false, "score": 6, "creation_date": 1552395474, "post_id": 55121567, "comment_id": 96985447, "body": "AndroidStudio is a bit naughty sometimes and doesn&#39;t give the full error. Try copy and pasting what you have into a text editor - it should have the full info there."}, {"owner": {"reputation": 61, "user_id": 9042700, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-u9BPBQfBbA0/AAAAAAAAAAI/AAAAAAAAADg/JrPNPZWAdPQ/photo.jpg?sz=128", "display_name": "Pravinkumar Putta", "link": "https://stackoverflow.com/users/9042700/pravinkumar-putta"}, "edited": false, "score": 0, "creation_date": 1552395570, "post_id": 55121567, "comment_id": 96985517, "body": "Thanks for the solution. 2nd answer solved my problem by upgrading kotlin."}, {"owner": {"reputation": 16790, "user_id": 2936153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIaVu.jpg?s=128&g=1", "display_name": "Rohit5k2", "link": "https://stackoverflow.com/users/2936153/rohit5k2"}, "edited": false, "score": 0, "creation_date": 1552395614, "post_id": 55121567, "comment_id": 96985539, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/54778651/supertypes-of-the-following-classes-cannot-be-resolved-please-make-sure-you-hav\">Supertypes of the following classes cannot be resolved. Please make sure you have the required dependencies in the classpath:</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2366, "user_id": 129486, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/f4LGm.jpg?s=128&g=1", "display_name": "Evelyn", "link": "https://stackoverflow.com/users/129486/evelyn"}, "is_accepted": false, "score": 3, "last_activity_date": 1586455319, "creation_date": 1586455319, "answer_id": 61127375, "question_id": 55121567, "link": "https://stackoverflow.com/questions/55121567/showing-error-supertypes-of-the-following-classes-cannot-be-resolved-without/61127375#61127375", "title": "Showing error &quot;Supertypes of the following classes cannot be resolved.&quot; without any class list", "body": "<p>@Pamela Hill had the right answer, if you hover over the error on the left you'll see that there's more, and you can copy this into a text editor to see it the full output.</p>\n\n<p><a href=\"https://i.stack.imgur.com/MMSH0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MMSH0.png\" alt=\"screenshot\"></a></p>\n"}], "owner": {"reputation": 61, "user_id": 9042700, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-u9BPBQfBbA0/AAAAAAAAAAI/AAAAAAAAADg/JrPNPZWAdPQ/photo.jpg?sz=128", "display_name": "Pravinkumar Putta", "link": "https://stackoverflow.com/users/9042700/pravinkumar-putta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4370, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1586455319, "creation_date": 1552393935, "question_id": 55121567, "link": "https://stackoverflow.com/questions/55121567/showing-error-supertypes-of-the-following-classes-cannot-be-resolved-without", "title": "Showing error &quot;Supertypes of the following classes cannot be resolved.&quot; without any class list", "body": "<p>Error:Supertypes of the following classes cannot be resolved. Please make sure you have the required dependencies in the classpath: </p>\n\n<p><strong>Without any class list it's giving error</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/Iy4f6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Iy4f6.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm developing library. In that I created one class and used it in demo app importing. When I instantiate object of that class then it compiles successfully. But when I try to access getter methods at next line then it gives above error.</p>\n\n<p>I'm not understanding where it's going wrong, because it does not showing any class name or error location.</p>\n\n<p><strong>Can any one help??</strong></p>\n"}, {"tags": ["android", "performance", "kotlin", "insert", "realm"], "comments": [{"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1552396831, "post_id": 55121225, "comment_id": 96986365, "body": "<code>SIGSEGV</code> means memory violation. I guess your code uses too much RAM at some point with the loops. Anything relevant in <code>&#47;data&#47;anr&#47;traces.txt</code>?"}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1552396925, "post_id": 55121225, "comment_id": 96986432, "body": "BTW, you&#39;re doing <code>commitTransaction()</code> outside of your big loop. This means the 10000 transactions all get loaded in memory until flushed. Might be the cause."}, {"owner": {"reputation": 1141, "user_id": 532054, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/798d6370021d2bbeae77a6f895074e03?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/532054/lorenzo"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1552402098, "post_id": 55121225, "comment_id": 96990097, "body": "Thanks for the comments! I&#39;m unsure I&#39;m looking at the correct traces file. I&#39;ve used adb to look for it and the file always ends with &quot;&quot;sdcard&quot; sysTid=1796&quot;. Also, my device file explorer doesn&#39;t contain the &quot;anr&quot; directory."}], "answers": [{"tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": false, "score": 0, "last_activity_date": 1552403145, "creation_date": 1552403145, "answer_id": 55124730, "question_id": 55121225, "link": "https://stackoverflow.com/questions/55121225/crash-when-creating-10000-objects-in-realm-on-android/55124730#55124730", "title": "Crash when creating 10000 objects in Realm on Android", "body": "<p>You're running into an ANR (Application Not Responding) crash due to blocking the main thread. The root cause is this line:</p>\n\n<pre><code>Thread().run() {\n  // do work\n}\n</code></pre>\n\n<p>This does not do what you think it does. This is initializing a <code>Thread</code>, and then executing a block of code with that <code>Thread</code> as the receiver. However, it's not actually starting the <code>Thread</code> -- your code is being executed on the UI thread instead.</p>\n\n<p>Instead, you need to supply a <code>Runnable</code> to your thread and <code>.start</code> it:</p>\n\n<pre><code>Thread {\n  // do your work in here\n}.start() // this kicks off the thread and runs the block above asynchronously.\n</code></pre>\n\n<p>Alternative, just create an executor and submit your work:</p>\n\n<pre><code>Executors.newSingleThreadExecutor().submit { \n  // do your work in here\n}\n</code></pre>\n"}], "owner": {"reputation": 1141, "user_id": 532054, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/798d6370021d2bbeae77a6f895074e03?s=128&d=identicon&r=PG&f=1", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/532054/lorenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552403145, "creation_date": 1552392887, "last_edit_date": 1552396840, "question_id": 55121225, "link": "https://stackoverflow.com/questions/55121225/crash-when-creating-10000-objects-in-realm-on-android", "title": "Crash when creating 10000 objects in Realm on Android", "body": "<p>I'm pretty new to Android and Kotlin.</p>\n\n<p>I have an app that does some calculation. I'm trying to do some performance testing. To do that, I want to create 10000 objects:</p>\n\n<pre><code>    Thread().run() {\n\n        try {\n            val realm = Realm.getDefaultInstance()\n\n            // Test endedSessions\n            val sessions = realm.where&lt;Session&gt;().findAll()\n            if (sessions.size &lt; 10) {\n\n                val numberOfSessions = 10000\n\n                realm.beginTransaction()\n\n                for (index in 0..numberOfSessions) {\n\n                    if (index % 1000 == 999) { // added to test and understand when it's crashing\n                        Timber.d(\"****** committing at ${index} sessions...\")\n                        realm.commitTransaction()\n                        realm.beginTransaction()\n                    }\n\n                    val session = Session.newInstance(realm, false)\n\n                    // Set Data\n                    val calendar = Calendar.getInstance()\n                    calendar.set(\n                        (2017..2018).random(),\n                        (0..11).random(),\n                        (0..28).random(),\n                        (0..23).random(),\n                        (0..59).random()\n                    )\n\n                    val startDate = calendar.time\n                    calendar.add(Calendar.HOUR_OF_DAY, (2..12).random())\n                    calendar.add(Calendar.MINUTE, (0..59).random())\n                    val endDate = calendar.time\n\n                    session.startDate = startDate\n                    session.endDate = endDate\n\n                    session.result?.let { result -&gt;\n                        result.buyin = buyinList.random()\n                        result.netResult = resultsList.random()\n                    }\n\n                }\n\n                realm.commitTransaction()\n\n            }\n\n            realm.close()\n        } catch (e: Exception) {\n            Timber.e(e)\n        }\n\n    }\n</code></pre>\n\n<p>The issue is that after 5000 sessions on the emulator I'm getting the following error:</p>\n\n<blockquote>\n  <p>I/art: Thread[3,tid=26297,WaitingInMainSignalCatcherLoop,Thread*=0x9e560e00,peer=0x12cf79d0,\"Signal Catcher\"]: reacting to signal 3\n  A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x65726e59 in tid 26292 (alytics.android)\n  I/art: Wrote stack traces to '/data/anr/traces.txt'\n  Application terminated.</p>\n</blockquote>\n\n<p>I'm unsure if this is the best practice for inserting a lot of objects into Realm.</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["arrays", "list", "kotlin", "converters"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 2, "creation_date": 1552392641, "post_id": 55121035, "comment_id": 96983762, "body": "Wait, what? Why?"}, {"owner": {"reputation": 101, "user_id": 866904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bd5U9.jpg?s=128&g=1", "display_name": "Markus Heider", "link": "https://stackoverflow.com/users/866904/markus-heider"}, "edited": false, "score": 1, "creation_date": 1552392798, "post_id": 55121035, "comment_id": 96983843, "body": "You only want to return the double Array IF all values are not null and all values are doubles?"}, {"owner": {"reputation": 1, "user_id": 11190847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33cfe7c3e6b2a3ff3db41b0e121874c2?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Sabet", "link": "https://stackoverflow.com/users/11190847/mohamed-sabet"}, "edited": false, "score": 0, "creation_date": 1552393101, "post_id": 55121035, "comment_id": 96984025, "body": "Markus.. Yes, this is exactly what I want to do."}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 1, "last_activity_date": 1552394079, "last_edit_date": 1552394079, "creation_date": 1552393734, "answer_id": 55121486, "question_id": 55121035, "link": "https://stackoverflow.com/questions/55121035/how-to-evaluate-this-kotlin-function-to-convert-arraylist-of-any-to-arraylist-o/55121486#55121486", "title": "How to evaluate this Kotlin function to convert ArrayList of Any? to ArrayList of Double", "body": "<p>I believe that your original use case could be solved in a better way, so maybe you want to share why this function is needed in the first place. Until this happens, you can do something like this:</p>\n\n<pre><code>fun List&lt;Any?&gt;.toDoubles(): List&lt;Double&gt;? =\n    takeIf { isNotEmpty() &amp;&amp; none { e -&gt; e == null || e !is Double } }?.map { it as Double }\n</code></pre>\n\n<p>In action:</p>\n\n<pre><code>val allDouble = listOf&lt;Any&gt;(1.0, 2.0, 3.0)\nval stuff = listOf(\"\", 1, 2.0, 3.0)\nval doublesAndNull = listOf&lt;Any?&gt;(1.0, null, 2.0)\nprintln(allDouble.toDoubles()) //[1.0, 2.0, 3.0]\nprintln(stuff.toDoubles()) //null\nprintln(doublesAndNull.toDoubles()) //null\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11190847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33cfe7c3e6b2a3ff3db41b0e121874c2?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Sabet", "link": "https://stackoverflow.com/users/11190847/mohamed-sabet"}, "edited": false, "score": 0, "creation_date": 1552394660, "post_id": 55121558, "comment_id": 96984928, "body": "I appreciate your intricate answer. I am not an expert programmer. I just program to help myself solve some accounting and business matters I face in daily life. I do not prefer extension functions because they distract me a little bit when calling them. That&#39;s why I uses a traditional fun approach"}], "tags": [], "owner": {"reputation": 101, "user_id": 866904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bd5U9.jpg?s=128&g=1", "display_name": "Markus Heider", "link": "https://stackoverflow.com/users/866904/markus-heider"}, "is_accepted": false, "score": 0, "last_activity_date": 1552393908, "creation_date": 1552393908, "answer_id": 55121558, "question_id": 55121035, "link": "https://stackoverflow.com/questions/55121035/how-to-evaluate-this-kotlin-function-to-convert-arraylist-of-any-to-arraylist-o/55121558#55121558", "title": "How to evaluate this Kotlin function to convert ArrayList of Any? to ArrayList of Double", "body": "<p>Based on your requirements this is a bit more \"idiomatic\" approach:</p>\n\n<pre><code>fun toArrayListDoubleOrNull(input: ArrayList&lt;Any?&gt;): List&lt;Double&gt;? {\n    val result = input\n        .filter { it is Double }\n        .map { it as Double }\n    return if(result.size == input.size) {\n        result\n    } else {\n        null\n    }\n}\n</code></pre>\n\n<p><strong>DISCLAIMER it now returns a List instead of an ArrayList</strong></p>\n\n<p>To test it I wrote following Tests:</p>\n\n<pre><code>class ArrayListToDouble {\n\n    @Test\n    fun `toArrayListDoubleOrNull with null values`() {\n        val input: ArrayList&lt;Any?&gt; = arrayListOf(12.0, 13.0, null)\n        val doubleArrayList = stackoverflow.toArrayListDoubleOrNull(input)\n        assertTrue(doubleArrayList == null)\n    }\n\n    @Test\n    fun `toArrayListDoubleOrNull without null values`() {\n        val input: ArrayList&lt;Any?&gt; = arrayListOf(12.0, 13.0)\n        val output: List&lt;Double&gt; = stackoverflow.toArrayListDoubleOrNull(input)!!\n        assertTrue(output == arrayListOf(12.0, 13.0))\n    }\n\n}\n</code></pre>\n\n<p>A bit more idiomatic would be using an extension function:</p>\n\n<pre><code>fun List&lt;Any?&gt;.toDoubleListOrNull(): List&lt;Double&gt;? {\n    val result = this\n        .filter { it is Double }\n        .map { it as Double }\n    return if(result.size == this.size) {\n        result\n    } else {\n        null\n    }\n}\n</code></pre>\n\n<p>You can call it like this:</p>\n\n<pre><code>val input = arrayListOf(12.0, 15.2)\nval output = input.toDoubleListOrNull()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11190847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33cfe7c3e6b2a3ff3db41b0e121874c2?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Sabet", "link": "https://stackoverflow.com/users/11190847/mohamed-sabet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1557488716, "creation_date": 1552392167, "last_edit_date": 1557488716, "question_id": 55121035, "link": "https://stackoverflow.com/questions/55121035/how-to-evaluate-this-kotlin-function-to-convert-arraylist-of-any-to-arraylist-o", "title": "How to evaluate this Kotlin function to convert ArrayList of Any? to ArrayList of Double", "body": "<p>I made this function to convert an array list of Any? to an array list of Double, or to null. Am I missing any possible thing?</p>\n\n<pre><code>    fun toArrayListDoubleOrNull(arg: ArrayList&lt;Any?&gt;): ArrayList&lt;Double&gt;? {\n        if (arg.isNullOrEmpty() || arg.contains(null)) {\n            return null;\n        }\n        arg.forEach { i: Any? -&gt;\n            if (i.toString().trim().toDoubleOrNull() == null) {\n                return null;\n            }\n        };\n        val ret = ArrayList&lt;Double&gt;();\n        arg.forEach { i: Any? -&gt; ret.add(i.toString().trim().toDouble()); };\n        return ret;\n    }\n</code></pre>\n"}, {"tags": ["android", "listview", "kotlin", "android-arrayadapter", "itemselector"], "answers": [{"tags": [], "owner": {"reputation": 1440, "user_id": 11181035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s01He.jpg?s=128&g=1", "display_name": "Beyazid", "link": "https://stackoverflow.com/users/11181035/beyazid"}, "is_accepted": true, "score": 1, "last_activity_date": 1552418443, "creation_date": 1552418443, "answer_id": 55129217, "question_id": 55120979, "link": "https://stackoverflow.com/questions/55120979/set-default-highlighted-item-in-custom-listview-adapter-kotlin/55129217#55129217", "title": "Set default highlighted item in custom listview adapter (kotlin)", "body": "<p>I created sample RecyclerView adapter. You can use your View instead of TextView and setBackgroundColor() instead of setTextColor(). You should trigger checkedItem(int) method in your fragment then notifyDataSetChanged or notifyItemChanged()</p>\n\n<pre><code>/**\n * Created by beyazid on 11.03.2019.\n*/\npublic class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt; {\n\nprivate Context context;\nprivate LayoutInflater inflater;\nprivate ArrayList&lt;String&gt; list;\nprivate int indexOfHighlightedItem = -1;\n\npublic MyAdapter(Context context, ArrayList&lt;String&gt; list) {\n    inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n    this.context = context;\n    this.list = list;\n}\n\n@Override\npublic MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n    View view = inflater.inflate(R.layout.my_row_for_recycler_view, parent, false);\n    return new MyViewHolder(view);\n}\n\n@Override\npublic void onBindViewHolder(final MyViewHolder holder, final int position) {\n    holder.bindItem(position);\n    holder.tvDummy.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            indexOfHighlightedItem = position;\n            notifyDataSetChanged();\n        }\n    });\n}\n\n@Override\npublic int getItemCount() {\n    return list.size();\n}\n\npublic void checkedItem(int pos){\n    indexOfHighlightedItem = pos;\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 4587953, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a17fd2693752b4b116c1f3972a14bc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Dev Loots", "link": "https://stackoverflow.com/users/4587953/dev-loots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 55129217, "answer_count": 1, "score": 1, "last_activity_date": 1552418443, "creation_date": 1552392007, "last_edit_date": 1552397681, "question_id": 55120979, "link": "https://stackoverflow.com/questions/55120979/set-default-highlighted-item-in-custom-listview-adapter-kotlin", "title": "Set default highlighted item in custom listview adapter (kotlin)", "body": "<p>I would like use setItemChecked to highlight list item by default. checkedItemPosition set the checkedItemPosition but not item list is highlighted.</p>\n\n<p>Here is my array adapter code :</p>\n\n<pre><code>class MyListAdapter(\n    context: Context,\n    private val myItemList: List&lt;Mytem&gt;)\n: ArrayAdapter&lt;Mytem&gt;(context, R.layout.item_simple, myItemList) {\n\noverride fun getView(position: Int, convertView: View?, parent: ViewGroup): View {\n    val inflater = context\n            .getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n\n    val rowView: View?\n\n    if (!myItemList[position].isHeader) {\n        rowView = inflater.inflate(R.layout.item_simple, parent, false)\n        rowView.itemTitle.text = myItemList[position].name\n    } else {\n        rowView = inflater.inflate(R.layout.item_header_group, parent, false)\n        rowView.header.text = myItemList[position].name\n    }\n    return rowView\n}\n\noverride fun isEnabled(position: Int): Boolean {\n    return !myItemList[position].isHeader\n}\n}\n</code></pre>\n\n<p>In fragment I have the following code :</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n    this.viewModel.myListItem.observe(this, Observer&lt;List&lt;MyItem&gt;&gt; { item -&gt;\n        val adapter = MyListAdapter(this.view!!.context, item!!)\n\n        this.view!!.listViewFragment.adapter = adapter\n        this.view!!.listViewFragment.divider = null\n        this.view!!.listViewFragment.isClickable = true\n    })\n}\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n    return inflater.inflate(R.layout.fragment_listview, container, false)\n}\n\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n\n    view.validatePenChoiceButton.setOnClickListener {\n        viewModel.validate(this.view!!.listViewFragment.checkedItemPosition)\n    }\n}\n</code></pre>\n\n<p>The listview cml code :</p>\n\n<pre><code>&lt;ListView\n    android:id=\"@+id/listViewFragment\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"0sp\"\n    android:layout_weight=\"30\"\n    android:choiceMode=\"singleChoice\"\n    android:listSelector=\"@color/item_listSelector_color\"\n    android:textColor=\"@color/white\" /&gt;\n</code></pre>\n\n<p>I have try the following methodes : the checkitem is changed but the listview is not highlighted.</p>\n\n<pre><code>  this.view!!.listViewFragment.setItemChecked(3, true)\n</code></pre>\n\n<p>And I have test this :</p>\n\n<pre><code>  this.view!!.listViewFragment.refreshDrawableState()\n  this.view!!.listViewFragment.invalidateViews()\n</code></pre>\n\n<p>How I can set default highlighted item properly ?</p>\n"}, {"tags": ["android", "android-studio", "intellij-idea", "kotlin", "aar"], "comments": [{"owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "edited": false, "score": 0, "creation_date": 1552391705, "post_id": 55120726, "comment_id": 96983219, "body": "Are you trying to add AAR? If AAR is already added,make sure you have included it in gradle file as module dependency."}, {"owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "reply_to_user": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "edited": false, "score": 0, "creation_date": 1552391817, "post_id": 55120726, "comment_id": 96983285, "body": "I am trying to add a sources.jar containing kotlin source files."}, {"owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "edited": false, "score": 0, "creation_date": 1552392089, "post_id": 55120726, "comment_id": 96983441, "body": "For that you need to configure kotlin with your project first."}, {"owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "reply_to_user": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "edited": false, "score": 0, "creation_date": 1552392610, "post_id": 55120726, "comment_id": 96983747, "body": "It doesn&#39;r work since the project is a pure java project, only the sources of the 3rd party lib are written in kotlin."}, {"owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "edited": false, "score": 0, "creation_date": 1552393803, "post_id": 55120726, "comment_id": 96984400, "body": "Even if your project is a pure java project, if you add a third party library using kotlin you need to have kotlin configured in your project"}], "answers": [{"tags": [], "owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "is_accepted": true, "score": 1, "last_activity_date": 1552393576, "creation_date": 1552393576, "answer_id": 55121435, "question_id": 55120726, "link": "https://stackoverflow.com/questions/55120726/attaching-kotlin-sources-to-aar-doesnt-work-in-android-studio/55121435#55121435", "title": "Attaching Kotlin sources to AAR doesn&#39;t work in Android Studio", "body": "<p>Configure kotlin in your project following these steps:-</p>\n\n<p>in <code>build.gradle</code></p>\n\n<pre><code>apply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nimplementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.3.21'\nimplementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.0.0'\n</code></pre>\n\n<p>also add</p>\n\n<pre><code>classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.21\"\n</code></pre>\n\n<p>Clean and Build your project. It worked for me.</p>\n"}], "owner": {"reputation": 4128, "user_id": 932656, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3bbuc.png?s=128&g=1", "display_name": "Chriss", "link": "https://stackoverflow.com/users/932656/chriss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "accepted_answer_id": 55121435, "answer_count": 1, "score": 2, "last_activity_date": 1552393576, "creation_date": 1552391198, "last_edit_date": 1552393122, "question_id": 55120726, "link": "https://stackoverflow.com/questions/55120726/attaching-kotlin-sources-to-aar-doesnt-work-in-android-studio", "title": "Attaching Kotlin sources to AAR doesn&#39;t work in Android Studio", "body": "<p>I am trying to add Kotlin sources of an AAR in Android Studio 3.3.2. It doesn't work when I select \"Choose Sources...\" and choose the corresponding source.jar. Android Studio only displays \"Attaching...\" but nothing happens, as seen in the screenshot below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aADXi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aADXi.png\" alt=\"enter image description here\"></a></p>\n\n<p>Either there is a Bug in Android Studio since I can see a NoSuchElementException\n in the logs or the source.jar is not as needed. Any hint's to solve the issue are welcome.</p>\n\n<p>Here is the exception:</p>\n\n<pre><code>java.util.NoSuchElementException\n    at java.util.Collections$EmptyIterator.next(Collections.java:4189)\n    at org.jetbrains.plugins.gradle.util.GradleAttachSourcesProvider.getSourceFile(GradleAttachSourcesProvider.java:160)\n    at org.jetbrains.plugins.gradle.util.GradleAttachSourcesProvider.access$100(GradleAttachSourcesProvider.java:59)\n    at org.jetbrains.plugins.gradle.util.GradleAttachSourcesProvider$1$1.onSuccess(GradleAttachSourcesProvider.java:126)\n</code></pre>\n\n<p>NOTE: I opened a ticket for Android-Studio -> <a href=\"https://issuetracker.google.com/issues/128352536\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/128352536</a></p>\n"}, {"tags": ["mongodb", "kotlin", "ktor", "kmongo"], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 5892343, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6aQ8svzD_cE/AAAAAAAAAAI/AAAAAAAABSE/CKNyn7bqKxs/photo.jpg?sz=128", "display_name": "spel", "link": "https://stackoverflow.com/users/5892343/spel"}, "is_accepted": true, "score": 0, "last_activity_date": 1552502634, "creation_date": 1552502634, "answer_id": 55149200, "question_id": 55120675, "link": "https://stackoverflow.com/questions/55120675/problem-with-the-configuration-of-the-ktor-server-for-kmongo-kotlin-server-mo/55149200#55149200", "title": "Problem with the configuration of the Ktor server for Kmongo (Kotlin Server + Mongo)", "body": "<p>Problem solved. I was convinced that the Mongo server started with the Ktor server, actually I had to manually start the Mongo server. Once the Mongo server was started from the terminal, the Ktor server was able to communicate with mongo during browser get or curl requests.</p>\n"}], "owner": {"reputation": 25, "user_id": 5892343, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6aQ8svzD_cE/AAAAAAAAAAI/AAAAAAAABSE/CKNyn7bqKxs/photo.jpg?sz=128", "display_name": "spel", "link": "https://stackoverflow.com/users/5892343/spel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "accepted_answer_id": 55149200, "answer_count": 1, "score": 0, "last_activity_date": 1552502634, "creation_date": 1552391032, "last_edit_date": 1552412063, "question_id": 55120675, "link": "https://stackoverflow.com/questions/55120675/problem-with-the-configuration-of-the-ktor-server-for-kmongo-kotlin-server-mo", "title": "Problem with the configuration of the Ktor server for Kmongo (Kotlin Server + Mongo)", "body": "<p><strong>I'm using Ktor with KMongo</strong>. I have a problem when I start the server in localhost and I make a simple <strong>'get' request</strong>. The references aren't  very clear and complete - <a href=\"https://litote.org/kmongo/\" rel=\"nofollow noreferrer\">https://litote.org/kmongo/</a> - regarding the configuration of the database on the server.\nDoes anyone know how to solve the problem? I think it's a simple configuration problem, but I do not know how to solve it. <strong>I'm not using Spring.</strong></p>\n\n<p>This is the code for the connection to the KmongoDB :</p>\n\n<pre><code>package com.progettoetere.Routes\n\nimport io.ktor.application.\nimport io.ktor.response.respondText\nimport io.ktor.routing.*\nimport kotlinx.coroutines.runBlocking\n\nimport org.litote.kmongo.eq\nimport org.litote.kmongo.reactivestreams.*\nimport org.litote.kmongo.coroutine.*\n\nfun Route.survey(){\n\n    //ramo per i survey\n    route(\"/survey\"){\n\n        //ritorno tutti i questionari\n        get(\"/\"){\n\n\n\n                        val client = KMongo.createClient().coroutine //client whit Kotli coroutines\n                        val database = client.getDatabase(\"test\") //get a test database\n                        val colSurvey = database.getCollection&lt;Survey&gt;() //get the collection of surveys\n\n                        //start coroutine\n                        runBlocking {\n\n                            //get one survey for DEBUG with id == 1023\n                            val dato: Survey? = colSurvey.findOne(Survey::id_survey eq 1023)\n\n                            //check the survey\n                            if (dato != null) {\n                                call.respondText { \"The survey is present\" }\n                            } else {\n                                call.respondText { \"The survey is not present\" }\n                            }\n                        }\n\n}\n</code></pre>\n\n<p>The error occurs when I create the client instance :</p>\n\n<blockquote>\n  <p>val client = KMongo.createClient().coroutine</p>\n</blockquote>\n\n<p>This is the stack error :</p>\n\n<pre><code>2019-03-11 20:58:22.334 [main] INFO  Application - Responding at http://0.0.0.0:8080\n2019-03-11 20:58:27.633 [nettyCallPool-4-1] INFO  org.mongodb.driver.cluster - Cluster created with settings {hosts=[localhost:27017], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='30000 ms', maxWaitQueueSize=500}\n2019-03-11 20:58:27.655 [nettyCallPool-4-1] DEBUG org.mongodb.driver.cluster - Updating cluster description to  {type=UNKNOWN, servers=[{address=localhost:27017, type=UNKNOWN, state=CONNECTING}]\n2019-03-11 20:58:27.666 [cluster-ClusterId{value='5c86bde3cad88d4f128ae82c', description='null'}-localhost:27017] DEBUG org.mongodb.driver.connection - Closing connection connectionId{localValue:1}\n2019-03-11 20:58:27.668 [cluster-ClusterId{value='5c86bde3cad88d4f128ae82c', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server localhost:27017\ncom.mongodb.MongoSocketOpenException: Exception opening socket\n    at com.mongodb.internal.connection.AsynchronousSocketChannelStream$OpenCompletionHandler.failed(AsynchronousSocketChannelStream.java:117)\n    at sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:128)\n    at sun.nio.ch.Invoker$2.run(Invoker.java:218)\n    at sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.net.ConnectException: Connessione rifiutata\n    at sun.nio.ch.UnixAsynchronousSocketChannelImpl.checkConnect(Native Method)\n    at sun.nio.ch.UnixAsynchronousSocketChannelImpl.finishConnect(UnixAsynchronousSocketChannelImpl.java:252)\n    at sun.nio.ch.UnixAsynchronousSocketChannelImpl.finish(UnixAsynchronousSocketChannelImpl.java:198)\n    at sun.nio.ch.UnixAsynchronousSocketChannelImpl.onEvent(UnixAsynchronousSocketChannelImpl.java:213)\n    at sun.nio.ch.EPollPort$EventHandlerTask.run(EPollPort.java:293)\n</code></pre>\n"}, {"tags": ["list", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 418200, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/951508e327a9150b955eaeba0cb27ea0?s=128&d=identicon&r=PG&f=1", "display_name": "ReinForce", "link": "https://stackoverflow.com/users/418200/reinforce"}, "edited": false, "score": 1, "creation_date": 1552389579, "post_id": 55120142, "comment_id": 96981933, "body": "Changing from <code>var localFileDates: MutableList&lt;String&gt;? = null</code> to <code>var localFileDates: MutableList&lt;String&gt;? = mutableListOf()</code> worked perfectly. I doubt I would have figured this out without help."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1552390206, "post_id": 55120142, "comment_id": 96982320, "body": "Java written with Kotlin syntax. This is not how Kotlin is meant to be used :)"}], "tags": [], "owner": {"reputation": 53, "user_id": 11190103, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CwFgS2pRaqA/AAAAAAAAAAI/AAAAAAAAAAc/FUwN_7uPeHk/photo.jpg?sz=128", "display_name": "jDroidCoder Group", "link": "https://stackoverflow.com/users/11190103/jdroidcoder-group"}, "is_accepted": true, "score": 0, "last_activity_date": 1552389216, "creation_date": 1552389216, "answer_id": 55120142, "question_id": 55119721, "link": "https://stackoverflow.com/questions/55119721/how-to-edit-list-elements-in-kotlin-or-add-to-second-list/55120142#55120142", "title": "How to edit list elements in kotlin or add to second list?", "body": "<p>You need init localFileDates variable:<br>\nvar localFileDates = MutableList()</p>\n\n<pre><code>var localFiles: MutableList&lt;String&gt; = File(localPath).list().toMutableList()\n    var localFileDates = MutableList&lt;String&gt;()\n    val iterateLocal = localFileDates?.listIterator()\n    for (item in localFiles) {\n        var date = item.takeLast(10).take(6)\n        if (date.matches(\"[0-9]+\".toRegex()) and (date.length == 6) and (date != null) and (date != \"null\")) {\n            iterateLocal?.add(item.takeLast(10).take(6))\n        }\n    }\n    println(networkFiles) // prints correct outpu\n    println(localFileDates) // prints correct\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1552389616, "creation_date": 1552389616, "answer_id": 55120258, "question_id": 55119721, "link": "https://stackoverflow.com/questions/55119721/how-to-edit-list-elements-in-kotlin-or-add-to-second-list/55120258#55120258", "title": "How to edit list elements in kotlin or add to second list?", "body": "<p>It is better to use <code>map{..}</code> function to create a copy of the list with updated values.</p>\n\n<pre><code>val localFiles = File(localPath).list()?.toMutableList() ?: listOf()\nval localFileDates = localFiles.mapNotNull { item -&gt;\n  val date = item.takeLast(10).take(6)\n  if (date.matches(\"[0-9]{6}\".toRegex()) {\n    date\n  } else {\n    null\n  }\n}\n\nprintln(localFiles)\nprintln(localFileDates)\n</code></pre>\n\n<p>I use the <code>mapNotNull{..}</code> function calls the block for every element of the list and builds the new list only from non-null values.</p>\n\n<p>You do not need <code>var</code> in your code, explicit type names can be omitted too. </p>\n\n<p>The condition can be simplified - no need for the null check, the regular expression filters our the <code>data == \"null\"</code> case, the length check can be included into the regex too. The <code>date</code> variable can be re-used too.</p>\n"}, {"tags": [], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "is_accepted": false, "score": 0, "last_activity_date": 1552389867, "creation_date": 1552389867, "answer_id": 55120329, "question_id": 55119721, "link": "https://stackoverflow.com/questions/55119721/how-to-edit-list-elements-in-kotlin-or-add-to-second-list/55120329#55120329", "title": "How to edit list elements in kotlin or add to second list?", "body": "<p>A more idiomatic (and readable) way:</p>\n\n<pre><code>val localFileDates = File(localPath).list().map { it.takeLast(10).take(6) }.filter {\n    it.matches(\"[0-9]+\".toRegex()) &amp;&amp; (it.length == 6) &amp;&amp; (it != \"null\")\n}\n</code></pre>\n\n<p>Also I suggest you create a named function for <code>takeLast(10).take(6)</code> and the condition to make it clear what is the intent of these lines of code.</p>\n"}], "owner": {"reputation": 101, "user_id": 418200, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/951508e327a9150b955eaeba0cb27ea0?s=128&d=identicon&r=PG&f=1", "display_name": "ReinForce", "link": "https://stackoverflow.com/users/418200/reinforce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 55120142, "answer_count": 3, "score": 0, "last_activity_date": 1552389867, "creation_date": 1552387923, "question_id": 55119721, "link": "https://stackoverflow.com/questions/55119721/how-to-edit-list-elements-in-kotlin-or-add-to-second-list", "title": "How to edit list elements in kotlin or add to second list?", "body": "<p>I tried to edit a list in-place but wasn't able to get it working. Now trying to edit individual elements and add them to a second list. However the second list remains null and does not get updated. Any help would be appreciated.</p>\n\n<pre><code>        var localFiles: MutableList&lt;String&gt; = File(localPath).list().toMutableList()\n        var localFileDates: MutableList&lt;String&gt;? = null\n        val iterateLocal = localFileDates?.listIterator()\n        for (item in localFiles) {\n            var date = item.takeLast(10).take(6)\n            if (date.matches(\"[0-9]+\".toRegex()) and (date.length == 6) and (date != null) and (date != \"null\")) {\n                iterateLocal?.add(item.takeLast(10).take(6))\n            }\n        }\n        println(networkFiles) // prints correct outpu\n        println(localFileDates) // prints null\n</code></pre>\n"}, {"tags": ["android", "kotlin", "direction"], "answers": [{"tags": [], "owner": {"reputation": 2085, "user_id": 7434090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aEvdO.jpg?s=128&g=1", "display_name": "Gavin Wright", "link": "https://stackoverflow.com/users/7434090/gavin-wright"}, "is_accepted": false, "score": 1, "last_activity_date": 1552387035, "creation_date": 1552387035, "answer_id": 55119431, "question_id": 55118857, "link": "https://stackoverflow.com/questions/55118857/is-there-a-way-to-set-the-direction-of-google-maps-according-to-the-acceleromete/55119431#55119431", "title": "Is there a way to set the direction of google maps according to the accelerometer?", "body": "<p>You can just show the user's current location and direction of movement using googleMap.setMyLocationEnabled(true);</p>\n\n<p>But if you want to turn the whole map, you can use <code>updateCameraBearing()</code>:</p>\n\n<p><a href=\"https://stackoverflow.com/a/37486292/7434090\">https://stackoverflow.com/a/37486292/7434090</a></p>\n"}, {"tags": [], "owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "is_accepted": true, "score": 0, "last_activity_date": 1552387771, "last_edit_date": 1552387771, "creation_date": 1552387168, "answer_id": 55119467, "question_id": 55118857, "link": "https://stackoverflow.com/questions/55118857/is-there-a-way-to-set-the-direction-of-google-maps-according-to-the-acceleromete/55119467#55119467", "title": "Is there a way to set the direction of google maps according to the accelerometer?", "body": "<p>I already use this feature with the following Kotlin code :</p>\n\n<pre><code>override fun onMapReady(googleMap: GoogleMap) {\n\n    mMap = googleMap\n    mMap.uiSettings.isCompassEnabled = true\n    mMap.uiSettings.isMapToolbarEnabled = true\n    mMap.uiSettings.isMyLocationButtonEnabled = true\n    try {\n        mMap.isMyLocationEnabled = true\n    }catch (e: SecurityException) {\n    }\n\n}\n</code></pre>\n\n<p>I'll check the bearing stuff, thanks</p>\n\n<p>I will try this when outside :</p>\n\n<p>When getting a new location from a fusedLocationClient :</p>\n\n<pre><code>fusedLocationClient = LocationServices.getFusedLocationProviderClient(this)\n...\nupdateCamera(location.bearing)\n....\nprivate fun updateCamera(bearing : Float) {\n    val oldPos = mMap.getCameraPosition()\n    val pos = CameraPosition.builder(oldPos).bearing(bearing).build()\n    mMap.animateCamera(CameraUpdateFactory.newCameraPosition(pos))\n\n    textViewAdView.text = \"Bearing=$bearing\"\n}\n</code></pre>\n"}], "owner": {"reputation": 469, "user_id": 10922639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HSIfV.jpg?s=128&g=1", "display_name": "KotlinIsland", "link": "https://stackoverflow.com/users/10922639/kotlinisland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 1, "accepted_answer_id": 55119467, "answer_count": 2, "score": 0, "last_activity_date": 1552387771, "creation_date": 1552385314, "last_edit_date": 1552386667, "question_id": 55118857, "link": "https://stackoverflow.com/questions/55118857/is-there-a-way-to-set-the-direction-of-google-maps-according-to-the-acceleromete", "title": "Is there a way to set the direction of google maps according to the accelerometer?", "body": "<p>I would like to know if there is a way of using the accelerometer of an Android device in order to set the direction of the displayed Google Maps ?</p>\n\n<p>Here is how I get a reference to the Accelerometer :</p>\n\n<pre><code>val sensorManager = getSystemService(Context.SENSOR_SERVICE) as SensorManager\nval sensorAccelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER)\nif (sensorAccelerometer != null) sensorManager.registerListener(this, sensorAccelerometer, SensorManager.SENSOR_DELAY_NORMAL)\n\n\noverride fun onSensorChanged(event: SensorEvent?) {\n    if (event?.sensor?.type == Sensor.TYPE_ACCELEROMETER){\n        Log.d(TAG, \"onSensorChanger ACCELEROMETER\")\n        val accelX = event.values[0]\n        val accelY = event.values[1]\n        val accelZ = event.values[2]\n\n        textViewAdView.text = \"aX=${accelX.toString()}\\r\\naY=${accelY.toString()}\\r\\naZ=${accelZ.toString()}\"\n     }\n}\n</code></pre>\n\n<p>Thanks !</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 5, "creation_date": 1552383589, "post_id": 55118210, "comment_id": 96978042, "body": "<code>val listOfBooleans = task()</code>?"}, {"owner": {"reputation": 71380, "user_id": 3558960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a98b52149d419c2aad558befe51c8cc5?s=128&d=identicon&r=PG", "display_name": "Robby Cornelissen", "link": "https://stackoverflow.com/users/3558960/robby-cornelissen"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1552383734, "post_id": 55118210, "comment_id": 96978134, "body": "To be clear: you have two function literals inside a regular function. The regular function can be called as indicated by @JBNizet. AFAIK, you cannot access the function literals from outside the function."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 1, "creation_date": 1552383963, "post_id": 55118210, "comment_id": 96978296, "body": "You cannot access isEven or isOdd outside of task(). It&#39;s called scope."}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1552384039, "post_id": 55118210, "comment_id": 96978352, "body": "If they can&#39;t be accessed outside of task(), what is the point? What&#39;s a practical use case here?"}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 1, "creation_date": 1552384212, "post_id": 55118210, "comment_id": 96978474, "body": "your question boils down to &quot;what is the purpose of scoping&quot;. The particular element it applies to is not really relevant. If you want to access them outside of task() scope, you define them outside of it."}, {"owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 1, "creation_date": 1552384349, "post_id": 55118210, "comment_id": 96978586, "body": "&quot;What&#39;s a practical use case here?&quot; -&gt; It saves you having to write <code>42 % 2 != 0</code>. Instead of that, some people may find <code>42.isOdd()</code> a bit more self-explanatory."}], "answers": [{"tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 3, "last_activity_date": 1552385265, "creation_date": 1552385265, "answer_id": 55118837, "question_id": 55118210, "link": "https://stackoverflow.com/questions/55118210/how-to-use-kotlin-function-literals/55118837#55118837", "title": "How to use kotlin function literals?", "body": "<p>When you define function literals inside a function they are available only in the scope of that function:</p>\n\n<pre><code>fun task(): List&lt;Boolean&gt; {\n    val isEven: Int.() -&gt; Boolean = { this % 2 == 0 } // unavailable outside the `task` function\n    val isOdd: Int.() -&gt; Boolean = { this % 2 != 0 }  // unavailable outside the `task` function\n\n    return listOf(42.isOdd(), 239.isOdd(), 294823098.isEven())\n}\n</code></pre>\n\n<p>If you want to access those function literals outside the function you need to move them outside the <code>task</code> function:</p>\n\n<pre><code>val isEven: Int.() -&gt; Boolean = { this % 2 == 0 }\nval isOdd: Int.() -&gt; Boolean = { this % 2 != 0 }\n\nfun task(): List&lt;Boolean&gt; {\n    return listOf(42.isOdd(), 239.isOdd(), 294823098.isEven())\n}\n\nfun anotherTask(): List&lt;Boolean&gt; {\n    return listOf(2.isOdd(), 23.isOdd(), 2948.isEven())\n}\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<p>Instead of using function literals you can create extension functions:</p>\n\n<pre><code>fun Int.isEven(): Boolean { return this % 2 == 0 }\nfun Int.isOdd(): Boolean { return this % 2 != 0 }\n\nfun task(): List&lt;Boolean&gt; {\n    return listOf(42.isOdd(), 239.isOdd(), 294823098.isEven())\n}\n\nfun anotehrTtask(): List&lt;Boolean&gt; {\n    return listOf(2.isOdd(), 23.isOdd(), 2948.isEven())\n}\n</code></pre>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552385265, "creation_date": 1552383395, "question_id": 55118210, "link": "https://stackoverflow.com/questions/55118210/how-to-use-kotlin-function-literals", "title": "How to use kotlin function literals?", "body": "<p>So I've got a function literal here:</p>\n\n<pre><code>fun task(): List&lt;Boolean&gt; {\n    val isEven: Int.() -&gt; Boolean = { this % 2 == 0 }\n    val isOdd: Int.() -&gt; Boolean = { this % 2 != 0 }\n\n    return listOf(42.isOdd(), 239.isOdd(), 294823098.isEven())\n}\n</code></pre>\n\n<p>and I understand exactly how it's working inside the function - but how is it used outside the function? How is <code>task()</code> called? (practical example preferably)</p>\n"}, {"tags": ["android", "android-activity", "kotlin"], "comments": [{"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 2, "creation_date": 1552382923, "post_id": 55117814, "comment_id": 96977636, "body": "<code>$</code> means inner class.So you can&#39;t directly jump to that class"}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1552384628, "post_id": 55117814, "comment_id": 96978759, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22004989/action-location-source-settings-cannot-be-resolved-or-is-not-a-field\">ACTION_LOCATION_SOURCE_SETTINGS : cannot be resolved or is not a field</a>"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1552390416, "post_id": 55117814, "comment_id": 96982443, "body": "@VivekMishra Why not if you have the parent class instance?"}, {"owner": {"reputation": 84801, "user_id": 769265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37aa203d22f9e9a864b71eb7968d6b09?s=128&d=identicon&r=PG", "display_name": "David Wasser", "link": "https://stackoverflow.com/users/769265/david-wasser"}, "edited": false, "score": 0, "creation_date": 1552403591, "post_id": 55117814, "comment_id": 96991229, "body": "Did you try <code>intent.setClassName(&quot;com.android.settings&quot;,&quot;com.android.sett&zwnj;&#8203;ings.Settings$Locati&zwnj;&#8203;onSettingsActivity&quot;)</code>&zwnj;&#8203;?"}, {"owner": {"reputation": 84801, "user_id": 769265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37aa203d22f9e9a864b71eb7968d6b09?s=128&d=identicon&r=PG", "display_name": "David Wasser", "link": "https://stackoverflow.com/users/769265/david-wasser"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1552403738, "post_id": 55117814, "comment_id": 96991326, "body": "@m0skit0 When launching an <code>Activity</code>, you just provide the package and class name to the Android framework. The framework then needs to instantiate the class. The framework isn&#39;t smart enough to instantiate the outer class and then the inner class, so in this case you don&#39;t have the parent class instance."}, {"owner": {"reputation": 84801, "user_id": 769265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37aa203d22f9e9a864b71eb7968d6b09?s=128&d=identicon&r=PG", "display_name": "David Wasser", "link": "https://stackoverflow.com/users/769265/david-wasser"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 1, "creation_date": 1552403885, "post_id": 55117814, "comment_id": 96991428, "body": "@VivekMishra actually it must be possible to directly jump to that class because the class is an <code>Activity</code> and the Android framework needs to be able to instantiate all <code>Activity</code> instances itself. Even though this is an inner class, because it is an <code>Activity</code> it <b>must b</b> declared <code>static</code>, meaning that it can stand on its own and does not need an instance of the outer class to exist."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1552403969, "post_id": 55117814, "comment_id": 96991478, "body": "@VivekMishra However $ can indicate a static inner class which can be instantiated without the parent class."}, {"owner": {"reputation": 23, "user_id": 7072852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-irGIFzO8GIw/AAAAAAAAAAI/AAAAAAAAABA/QIy1pYJm-h4/photo.jpg?sz=128", "display_name": "Yua", "link": "https://stackoverflow.com/users/7072852/yua"}, "reply_to_user": {"reputation": 84801, "user_id": 769265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37aa203d22f9e9a864b71eb7968d6b09?s=128&d=identicon&r=PG", "display_name": "David Wasser", "link": "https://stackoverflow.com/users/769265/david-wasser"}, "edited": false, "score": 1, "creation_date": 1552440893, "post_id": 55117814, "comment_id": 97007471, "body": "@DavidWasser Thank you ,It worked.                              <code>intent.setClassName(&quot;com.android.settings&quot;, &quot;com.android.settings.Settings\\$LocationSettingsActivity&quot;) </code>"}], "answers": [{"tags": [], "owner": {"reputation": 627, "user_id": 8422138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/637153fad19c67e37fc28c1cb797bc0b?s=128&d=identicon&r=PG", "display_name": "Eddiel Lopez", "link": "https://stackoverflow.com/users/8422138/eddiel-lopez"}, "is_accepted": false, "score": 0, "last_activity_date": 1552418658, "creation_date": 1552418658, "answer_id": 55129268, "question_id": 55117814, "link": "https://stackoverflow.com/questions/55117814/android-how-can-i-jump-to-a-systems-activity-with-a-symbol-in-its-path/55129268#55129268", "title": "Android. How can I jump to a system&#39;s activity with a &#39;$&#39; symbol in its path?", "body": "<p>If you're interested in opening the location settings, you can use <a href=\"https://developer.android.com/reference/android/provider/Settings.html#ACTION_LOCATION_SOURCE_SETTINGS\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/provider/Settings.html#ACTION_LOCATION_SOURCE_SETTINGS</a></p>\n\n<pre><code>Intent intent = new Intent();\nintent.setAction(Settings.ACTION_LOCATION_SOURCE_SETTINGS);\n\nActivityInfo activityInfo = intent.resolveActivityInfo(getPackageManager(), 0);\nif (activityInfo != null) {\n    startActivity(intent);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 84801, "user_id": 769265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37aa203d22f9e9a864b71eb7968d6b09?s=128&d=identicon&r=PG", "display_name": "David Wasser", "link": "https://stackoverflow.com/users/769265/david-wasser"}, "is_accepted": true, "score": 0, "last_activity_date": 1552584841, "creation_date": 1552584841, "answer_id": 55168773, "question_id": 55117814, "link": "https://stackoverflow.com/questions/55117814/android-how-can-i-jump-to-a-systems-activity-with-a-symbol-in-its-path/55168773#55168773", "title": "Android. How can I jump to a system&#39;s activity with a &#39;$&#39; symbol in its path?", "body": "<p>Just set the class name including the \"$\". This indicates the <code>LocationSettingsActivity</code> is an inner class:</p>\n\n<pre><code>intent.setClassName(\"com.android.settings\",\n            \"com.android.settings.Settings$LocationSettingsActivity\");\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7072852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-irGIFzO8GIw/AAAAAAAAAAI/AAAAAAAAABA/QIy1pYJm-h4/photo.jpg?sz=128", "display_name": "Yua", "link": "https://stackoverflow.com/users/7072852/yua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 55168773, "answer_count": 2, "score": 1, "last_activity_date": 1552584841, "creation_date": 1552382195, "last_edit_date": 1552442527, "question_id": 55117814, "link": "https://stackoverflow.com/questions/55117814/android-how-can-i-jump-to-a-systems-activity-with-a-symbol-in-its-path", "title": "Android. How can I jump to a system&#39;s activity with a &#39;$&#39; symbol in its path?", "body": "<p>In my application,I want to jump to the system's location setting page. By running</p>\n\n<pre><code>adb shell dumpsys activity activities | grep \"mFocusedActivity\" \n</code></pre>\n\n<p>I get the activity path:</p>\n\n<pre><code>mFocusedActivity: ActivityRecord{eaaabab u0 com.android.settings/.Settings$LocationSettingsActivity t230}\n</code></pre>\n\n<p>And then I tried to jump to this page with the code.</p>\n\n<pre><code>val intent = Intent()\nintent.action = Intent.ACTION_VIEW\nintent.setClassName(\"com.android.settings\",\"com.android.settings.Settings.LocationSettingsActivity\")\nstartActivity(intent)\n</code></pre>\n\n<p>But the Application throws an <code>ActivityNotFoundException</code>.\n<strong>How can I jump to the activity ?</strong>\nI noticed a special symbol <strong>'$'</strong> in this Activity\uff0cWhat does this <strong>$</strong> symbol mean ?</p>\n\n<h3>Solutions</h3>\n\n<p>As the @DavidWasser answers.</p>\n\n<pre><code>intent.setClassName(\"com.android.settings\", \"com.android.settings.Settings\\$LocationSettingsActivity\")\n</code></pre>\n\n<p>In this way, I succeed to jump to this Activity. Originally this Activity is window mode in the system settings page, now I jump directly to this page is full screen. But its functions are working properly. </p>\n\n<blockquote>\n  <p>In summary, we can jump to an internal class in this way, Thank you to everyone who answered.</p>\n</blockquote>\n"}, {"tags": ["java", "spring", "kotlin"], "comments": [{"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 1, "creation_date": 1552379002, "post_id": 55116804, "comment_id": 96975414, "body": "Can you show the place of the usage of <code>serviceX</code>? You are probably accessing it before it is injected. Thanks"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 1, "creation_date": 1552385566, "post_id": 55116804, "comment_id": 96979343, "body": "Probably because you aren&#39;t using Spring but Jersey to manage your rest endpoint and haven&#39;t properly setup the Jersey/Spring integration."}], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "edited": false, "score": 0, "creation_date": 1552392511, "post_id": 55118906, "comment_id": 96983689, "body": "sorry, cant get it to work, not even with this.. still not initialaized"}, {"owner": {"reputation": 56, "user_id": 9396462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc765db841e8db785c57a5a25ac551ad?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Gourmandin", "link": "https://stackoverflow.com/users/9396462/xavier-gourmandin"}, "reply_to_user": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "edited": false, "score": 0, "creation_date": 1552396344, "post_id": 55118906, "comment_id": 96986012, "body": "Okay, so you&#39;ll need to provide more context. For example, your pom.xml Spring dependencies, and more about this &quot;Just when I try to use them from BaseRest extension&quot;. Also, as @m-deinum mentionned, do you really use Spring to manage your REST enpoint, or something else ? those <code>@PUT and @Path</code> seems suspicious."}], "tags": [], "owner": {"reputation": 56, "user_id": 9396462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc765db841e8db785c57a5a25ac551ad?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Gourmandin", "link": "https://stackoverflow.com/users/9396462/xavier-gourmandin"}, "is_accepted": false, "score": 0, "last_activity_date": 1552426672, "last_edit_date": 1552426672, "creation_date": 1552385445, "answer_id": 55118906, "question_id": 55116804, "link": "https://stackoverflow.com/questions/55116804/kotlin-autowired-in-spring/55118906#55118906", "title": "Kotlin autowired in spring", "body": "<p>Not sure to understand the </p>\n\n<blockquote>\n  <p>Just when I try to use them from BaseRest extension i will get </p>\n</blockquote>\n\n<p>part, but here is the code I came across and it's working fine as expected.</p>\n\n<pre><code>open class BaseRest {\n  @Autowired\n  protected lateinit var serviceX: ServiceX\n\n  fun baseFun() {\n      serviceX.serviceFun(SecurityContextImpl())\n  }\n}\n\n@Component\nopen class SuperRest : BaseRest() {\n\n  fun putTest(\n    securityContext: SecurityContext,\n    @NotNull selected: String\n  ) {\n    baseFun()\n    val user = serviceX.serviceFun(securityContext)\n  }\n}\n</code></pre>\n\n<p>Bonus question : Why do you use <code>@PUT and @Path(\"/test\")</code> annotations and not <code>@PutMapping(\"/test\")</code> ?</p>\n"}], "owner": {"reputation": 985, "user_id": 8905843, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154156758323725/picture?type=large", "display_name": "Clomez", "link": "https://stackoverflow.com/users/8905843/clomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 978, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552426672, "creation_date": 1552378413, "last_edit_date": 1552392482, "question_id": 55116804, "link": "https://stackoverflow.com/questions/55116804/kotlin-autowired-in-spring", "title": "Kotlin autowired in spring", "body": "<p>I'm pretty new to kotlin but done some extensive java before...</p>\n\n<p>I tried to use kotlin and java in the same project but it looked very ugly and I didn't like that my classes were separated into two places. So now my project is 100% kotlin and there are problems...</p>\n\n<p>I keep getting this error message:</p>\n\n<pre><code>lateinit property serviceX has not been initialized\n</code></pre>\n\n<p>I understand it means that service is not initialized yet, but how do i do initialized it then?</p>\n\n<p>with java and spring, I did @Autowired or injected services in the constructor and was done.</p>\n\n<p>what I need is for my REST to be able to use serviceX</p>\n\n<pre><code>@Component\n@Path(\"/super\")\nopen class SuperRest : BaseRest() {\n\n@PUT\n@Path(\"/test\")\nfun putTest(\n        @Context securityContext: SecurityContext,\n        @NotNull selected: String\n) {\n    val user = serviceX(securityContext)\n   }\n\n}\n</code></pre>\n\n<p>and in BaseRest I have tried to autowire serviceX\nfirst, it was:</p>\n\n<pre><code>    @Autowired\n    protected lateinit var serviceX: ServiceX\n</code></pre>\n\n<p>then it was just</p>\n\n<pre><code>    @Autowired\n    lateint var serviceX: ServiceX\n</code></pre>\n\n<p>then I tried other solutions I found in SO</p>\n\n<pre><code>open class BaseRest @Autowired constructor(\n    private val serviceX: ServiceX\n) { ... }\n</code></pre>\n\n<p>Why is this?\nI can still use other @autowired services in my rest just fine.\nJust when I try to use them from BaseRest extension i will get </p>\n\n<pre><code>lateinit property serviceX has not been initialized\n</code></pre>\n\n<p>even without any lateinit property, i still somehow get this error..</p>\n\n<pre><code>private var serviceX: ServiceX = ServiceX()\n</code></pre>\n\n<p>it is still somehow not initialized, please help</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1552379248, "post_id": 55116769, "comment_id": 96975534, "body": "You might wanna check this link : <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/lambdas.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 2968077, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0cd1a17e8376e2d315f07068268fe7e4?s=128&d=identicon&r=PG", "display_name": "Dor Mesica", "link": "https://stackoverflow.com/users/2968077/dor-mesica"}, "edited": false, "score": 0, "creation_date": 1552471262, "post_id": 55117029, "comment_id": 97018431, "body": "I tried to define the extension function in the same file as the class itself and then use it in the activity, but it didn&#39;t work. Only when I defined the extension in the activity did it work. I am working on a library so it is not an option to define the extension with the activity. Have I missed something?"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 497, "user_id": 2968077, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0cd1a17e8376e2d315f07068268fe7e4?s=128&d=identicon&r=PG", "display_name": "Dor Mesica", "link": "https://stackoverflow.com/users/2968077/dor-mesica"}, "edited": false, "score": 0, "creation_date": 1552471700, "post_id": 55117029, "comment_id": 97018698, "body": "it&#39;s important that you don&#39;t define the extension inside a class body but on top-level"}, {"owner": {"reputation": 497, "user_id": 2968077, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0cd1a17e8376e2d315f07068268fe7e4?s=128&d=identicon&r=PG", "display_name": "Dor Mesica", "link": "https://stackoverflow.com/users/2968077/dor-mesica"}, "edited": false, "score": 0, "creation_date": 1552471824, "post_id": 55117029, "comment_id": 97018786, "body": "It&#39;s not in the type body. I defined it right after the class definition. After the last <code>}</code> of the class"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "reply_to_user": {"reputation": 497, "user_id": 2968077, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0cd1a17e8376e2d315f07068268fe7e4?s=128&d=identicon&r=PG", "display_name": "Dor Mesica", "link": "https://stackoverflow.com/users/2968077/dor-mesica"}, "edited": false, "score": 0, "creation_date": 1552471900, "post_id": 55117029, "comment_id": 97018834, "body": "what happens if you import it in your activity? try <code>import packagename.extensionName</code> with your extension named <code>extensionName</code> and defined in package <code>packagename</code>"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 8, "last_activity_date": 1552379397, "creation_date": 1552379397, "answer_id": 55117029, "question_id": 55116769, "link": "https://stackoverflow.com/questions/55116769/interface-as-functions-in-kotlin/55117029#55117029", "title": "Interface as functions in Kotlin", "body": "<p>You can define your interface as suggested and also add an extension that allows the usage of a lambda which is more idimatic for Kotlin code.</p>\n\n<pre><code>class SomeView {\n    fun setListener(l: Listener) {}\n}\n\nfun SomeView.setListener(l: () -&gt; Unit) = setListener(object : Listener {\n    override fun onEvent() = l()\n})\n</code></pre>\n\n<p>In Java, you would still be able to pass the <code>Listener</code> implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 3800, "user_id": 9035237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34bf4b56e66db99e1e713299fa0df413?s=128&d=identicon&r=PG&f=1", "display_name": "Geno Chen", "link": "https://stackoverflow.com/users/9035237/geno-chen"}, "is_accepted": true, "score": 5, "last_activity_date": 1552380763, "last_edit_date": 1552380763, "creation_date": 1552380035, "answer_id": 55117201, "question_id": 55116769, "link": "https://stackoverflow.com/questions/55116769/interface-as-functions-in-kotlin/55117201#55117201", "title": "Interface as functions in Kotlin", "body": "<p>This is called <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"noreferrer\">SAM-conversions</a>,</p>\n\n<blockquote>\n  <p>Just like Java 8, Kotlin supports SAM conversions. This means that Kotlin function literals can be automatically converted into implementations of Java interfaces with a single non-default method, as long as the parameter types of the interface method match the parameter types of the Kotlin function.</p>\n</blockquote>\n\n<p>But</p>\n\n<blockquote>\n  <p>Note that SAM conversions only work for interfaces, not for abstract classes, even if those also have just a single abstract method.<br>\n  Also note that this feature <strong>works only for Java interop</strong>; since Kotlin has proper function types, automatic conversion of functions into implementations of Kotlin interfaces is unnecessary and therefore unsupported.</p>\n</blockquote>\n\n<p>So, you can't write a simple Kotlin code to simulate this call.</p>\n\n<hr>\n\n<p>In <strong>Java</strong>, if you write a </p>\n\n<pre><code>public interface Listener {\n    void onEvent(); // SAM: Single Abstract Method. Only 1 is allowed\n}\n</code></pre>\n\n<p>And you have a</p>\n\n<pre><code>public class SomeView extends FrameLayout {\n    // skip the constructors\n\n    public void setListener(Listener listener) {\n        // do something\n    }\n}\n</code></pre>\n\n<p>Then you can do such a fancy call in Kotlin, thanks to SAM-conversion:</p>\n\n<pre><code>SomeView(this).setListener {} // asking a parameter with type () -&gt; Unit for setListener\n                              // Then parenthesis of function call can be omitted\n// setListener function can also accept a parameter with type Listener\n// by object : Listener {}\n</code></pre>\n\n<p>But if you convert that Java file into Kotlin, the code will report an error, due to the reason mentioned above. You have to implement a <code>SomeView.setListener(() -&gt; Unit)</code> function by yourself, for example</p>\n\n<pre><code>fun SomeView.setListener(l: () -&gt; Unit) {\n    listener = object : Listener{\n        override fun onEvent() {\n            l()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3137, "user_id": 4267015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q8N5O.jpg?s=128&g=1", "display_name": "Naor Tedgi", "link": "https://stackoverflow.com/users/4267015/naor-tedgi"}, "is_accepted": false, "score": 1, "last_activity_date": 1607527836, "last_edit_date": 1607527836, "creation_date": 1597929381, "answer_id": 63505954, "question_id": 55116769, "link": "https://stackoverflow.com/questions/55116769/interface-as-functions-in-kotlin/63505954#63505954", "title": "Interface as functions in Kotlin", "body": "<p>for Kotlin 1.4+. It can use SAM-conversion for Kotlin functions if you mark an interface as a &quot;functional&quot; interface:</p>\n<pre><code>fun interface Listener {\n    fun onEvent()\n}\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 2968077, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0cd1a17e8376e2d315f07068268fe7e4?s=128&d=identicon&r=PG", "display_name": "Dor Mesica", "link": "https://stackoverflow.com/users/2968077/dor-mesica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2747, "favorite_count": 0, "accepted_answer_id": 55117201, "answer_count": 3, "score": 14, "last_activity_date": 1607527836, "creation_date": 1552378234, "question_id": 55116769, "link": "https://stackoverflow.com/questions/55116769/interface-as-functions-in-kotlin", "title": "Interface as functions in Kotlin", "body": "<p>I am working on an android library that contains some views. Naturally these views can emit events. </p>\n\n<p>I have an interface called (just for the purpose of this question) <code>Listener</code>. If I wrote the library in Java things would look like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public interface Listener {\n    void onEvent();\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class SomeView extends FrameLayout {\n    // Some more functions and implementation details\n\n    public void setListener(Listener l) { ... }\n}\n</code></pre>\n\n<p>When using this view in a Kotlin activity I can use the <code>setListener</code> like this:</p>\n\n<pre><code>someViewInstance.setListener {\n    // implementation\n}\n</code></pre>\n\n<p>I want to write my library in Kotlin, but it might be used in Java code as well, so I want to provide and interface for the listener just like a regular view (like above) but have the option for Kotlin code to use the function implementation:</p>\n\n<pre><code>interface Listener {\n    fun onEvent()\n}\n</code></pre>\n\n<p>when I try to use <code>setListener</code> like above in my Kotlin test activity I get a compilation error saying that the function expects type <code>Listener</code> but got <code>() -&gt; Unit</code>.</p>\n\n<p>Is there a way to enable this kind of implementation in Kotlin without having to create a new function for this?</p>\n\n<p>I thought about having just one function that receives <code>() -&gt; Unit</code> but then it look weird in the Java code (<code>Function1</code> etc.).</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "bottomnavigationview"], "comments": [{"owner": {"reputation": 2047, "user_id": 7319704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nO22o.jpg?s=128&g=1", "display_name": "Abhinav Gupta", "link": "https://stackoverflow.com/users/7319704/abhinav-gupta"}, "edited": false, "score": 1, "creation_date": 1552377271, "post_id": 55116520, "comment_id": 96974558, "body": "please mention some code"}, {"owner": {"reputation": 99, "user_id": 9759122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb0ff4a0e741f7d027e3002e753e0d9d?s=128&d=identicon&r=PG&f=1", "display_name": "JerryLi", "link": "https://stackoverflow.com/users/9759122/jerryli"}, "reply_to_user": {"reputation": 2047, "user_id": 7319704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nO22o.jpg?s=128&g=1", "display_name": "Abhinav Gupta", "link": "https://stackoverflow.com/users/7319704/abhinav-gupta"}, "edited": false, "score": 0, "creation_date": 1552378190, "post_id": 55116520, "comment_id": 96974985, "body": "Update my code."}, {"owner": {"reputation": 297, "user_id": 7070243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e18aee86c735a2d1e69828348253e6a?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine El Murr", "link": "https://stackoverflow.com/users/7070243/antoine-el-murr"}, "edited": false, "score": 0, "creation_date": 1552384203, "post_id": 55116520, "comment_id": 96978468, "body": "try putting this code in onStart function not in onCreate and see what happens"}], "owner": {"reputation": 99, "user_id": 9759122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb0ff4a0e741f7d027e3002e753e0d9d?s=128&d=identicon&r=PG&f=1", "display_name": "JerryLi", "link": "https://stackoverflow.com/users/9759122/jerryli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552385008, "creation_date": 1552377216, "last_edit_date": 1552385008, "question_id": 55116520, "link": "https://stackoverflow.com/questions/55116520/bottomnavigationview-not-working-when-turn-off-permission-and-go-back-to-app", "title": "Bottomnavigationview not working when turn off permission and go back to app", "body": "<p>If I go to manually turn off phone permissions that app will be restart. </p>\n\n<p><code>Bottomnavigationview</code> did not respond when the application restart was completed.</p>\n\n<p>Pressing button will not change the <code>Fragment</code>.</p>\n\n<p>But the <code>Fragment</code> at that time were restored.</p>\n\n<pre><code>class MyActivity : AppCompatActivity(), OnMyRedirectRequest {\n\nprivate val uiNavBottom by lazy(LazyThreadSafetyMode.NONE) { findViewById&lt;BottomNavigationView&gt;(R.id.nav_bottom) }\nprivate val eventNavigate = BottomNavigationView.OnNavigationItemSelectedListener { onRedirect(it.itemId) }\nprivate lateinit var vmMyModel: MyViewModel\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    vmMyModel = ViewModelProviders.of(this).get(MyViewModel::class.java)\n    uiNavBottom.setOnNavigationItemSelectedListener(eventNavigate)\n    savedInstanceState ?: onRedirect(R.id.home)\n}\n\noverride fun onRedirect(pageId: Int, options: Bundle?): Boolean {\n    var selectedFragment: Fragment? = null\n    val manager: FragmentManager = supportFragmentManager\n\n    when (pageId) {\n        R.id.home -&gt; {\n            selectedFragment = if (vmMyModel.selectedPage != 0) HomePage.newInstance() else null\n            vmMyModel.selectedPage = 0\n        }\n        R.id.owner -&gt; {\n            selectedFragment = if (vmMyModel.selectedPage != 1) OwnerPage.newInstance() else null\n            vmMyModel.selectedPage = 1\n        }\n        R.id.setting -&gt; {\n            selectedFragment = if (vmMyModel.selectedPage != 1) SettingPage.newInstance() else null\n            vmMyModel.selectedPage = 1\n        }\n        else -&gt; return false\n    }\n    selectedFragment?.let { fragment -&gt;\n        try {\n            manager.beginTransaction()\n                    .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN)\n                    .replace(R.id.fl_page, fragment)\n                    .commitNow()\n        } catch (ex: IllegalStateException) {\n            Log.e(\"ex\", ex.toString())\n        }\n        return true\n    }\n    return false\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 718, "user_id": 9290612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fpYvK.jpg?s=128&g=1", "display_name": "A.R.B.N", "link": "https://stackoverflow.com/users/9290612/a-r-b-n"}, "edited": false, "score": 0, "creation_date": 1580813275, "post_id": 55116421, "comment_id": 106212883, "body": "how should I write it? I get it from web service (it&#39;s a number) and after that, I need to have a percent symbol. it.data?.settlementPercentage.toString() + &quot;%&quot;"}, {"owner": {"reputation": 3122, "user_id": 5529263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e629acbc6aea3d6a8980721336438fc4?s=128&d=identicon&r=PG", "display_name": "Boken", "link": "https://stackoverflow.com/users/5529263/boken"}, "edited": false, "score": 0, "creation_date": 1580901079, "post_id": 55116421, "comment_id": 106248024, "body": "Try use: <code>%%</code>, so in text will be normal <code>%</code> char. E.g. <code>String.format(&quot;%s%%, discount)</code>"}], "tags": [], "owner": {"reputation": 3122, "user_id": 5529263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e629acbc6aea3d6a8980721336438fc4?s=128&d=identicon&r=PG", "display_name": "Boken", "link": "https://stackoverflow.com/users/5529263/boken"}, "is_accepted": false, "score": 12, "last_activity_date": 1552462466, "last_edit_date": 1552462466, "creation_date": 1552376794, "answer_id": 55116421, "question_id": 55115469, "link": "https://stackoverflow.com/questions/55115469/kotlin-android-studio-warning-do-not-concatenate-text-displayed-with-settext-u/55116421#55116421", "title": "Kotlin Android Studio Warning &quot;Do not concatenate text displayed with setText. Use resource string with placeholders.&quot;", "body": "<p>If you have string with some placeholders like:</p>\n\n<pre><code>&lt;string name=\"price_string\"&gt;Your price: %d&lt;/string&gt;\n</code></pre>\n\n<h2>First you have to read this value and next fill it</h2>\n\n<p><strong>JAVA</strong></p>\n\n<pre><code>String text = getString(R.string.price_string, 2.5);\n</code></pre>\n\n<p><strong>KOTLIN</strong></p>\n\n<pre><code>val text = getString(R.string.price_string, 2.5)\n</code></pre>\n\n<p>.</p>\n\n<h2>or in \"longer\" way:</h2>\n\n<p><strong>JAVA</strong>:</p>\n\n<pre><code>// Read text\nString priceString = getString(R.string.price_string);\n\n// Fill it\nString output = String.format(priceString, 2.5);\n</code></pre>\n\n<p><strong>KOTLIN</strong></p>\n\n<pre><code>// Read text\nval priceString = getString(R.string.price_string)\n\n// Fill it\nval output = String.format(priceString, 2.5)\n// or\nval output = priceString.format(2.5)\n</code></pre>\n\n<p>If you have <code>%s</code> you have to fill it with <code>String</code>. Here you have more info: <a href=\"https://developer.android.com/guide/topics/resources/string-resource#formatting-strings\" rel=\"noreferrer\">https://developer.android.com/guide/topics/resources/string-resource#formatting-strings</a></p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 8366902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c086446b67fc28f684f0a555850e79a0?s=128&d=identicon&r=PG&f=1", "display_name": "Xelonovia", "link": "https://stackoverflow.com/users/8366902/xelonovia"}, "edited": false, "score": 0, "creation_date": 1552408791, "post_id": 55116710, "comment_id": 96994763, "body": "resultView.text = getString(R.string.txt_show, result) is not working when I use %1$d. So, I have to change it to %.2f and I don&#39;t need the format function to format to two digits fractional number anymore. Thank you."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1552377974, "creation_date": 1552377974, "answer_id": 55116710, "question_id": 55115469, "link": "https://stackoverflow.com/questions/55115469/kotlin-android-studio-warning-do-not-concatenate-text-displayed-with-settext-u/55116710#55116710", "title": "Kotlin Android Studio Warning &quot;Do not concatenate text displayed with setText. Use resource string with placeholders.&quot;", "body": "<blockquote>\n  <p>first the result is integer which is not what I expected. It should be double.</p>\n</blockquote>\n\n<p>Then why did you call <code>toInt</code>? Just use</p>\n\n<pre><code>resultView.text = getString(R.string.txt_show, result) \n</code></pre>\n\n<p>and <code>%1$.2f</code> (or just <code>%.2f</code>) in the string instead of <code>%1$d</code> to format to two digits fractional number. You can see it's specified the same as in the <code>format</code> function in your code. The documentation for format strings (what all of these <code>%d</code> etc. mean) is at <a href=\"https://developer.android.com/reference/java/util/Formatter.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/java/util/Formatter.html</a>.</p>\n"}], "owner": {"reputation": 95, "user_id": 8366902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c086446b67fc28f684f0a555850e79a0?s=128&d=identicon&r=PG&f=1", "display_name": "Xelonovia", "link": "https://stackoverflow.com/users/8366902/xelonovia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6958, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1594684111, "creation_date": 1552372572, "last_edit_date": 1594684111, "question_id": 55115469, "link": "https://stackoverflow.com/questions/55115469/kotlin-android-studio-warning-do-not-concatenate-text-displayed-with-settext-u", "title": "Kotlin Android Studio Warning &quot;Do not concatenate text displayed with setText. Use resource string with placeholders.&quot;", "body": "<p>I made a simple program to learn about concatenation in android studio with Kotlin. So, I tried to get a string value from resources in strings.xml as shown below and concatenate with a value</p>\n<pre><code>&lt;string name=&quot;txt_show&quot;&gt;Your lucky number is %1$s&lt;/string&gt;\n</code></pre>\n<p>I got warning &quot;Do not concatenate text...&quot; from getString</p>\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    val firstNumber = numEditText.text\n\n    processButton.setOnClickListener {\n        val result = concatText(firstNumber.toString().toDouble())\n        resultView.text = getString(R.string.txt_show, &quot; &quot;) + result.format(2)\n\n    }\n}\n\nprivate fun concatText(myNumber: Double): Double {\n    val luckyNumber = 1.79\n    return luckyNumber * myNumber\n}\nprivate fun Double.format(digits: Int) = java.lang.String.format(&quot;%.${digits}f&quot;, this)} \n</code></pre>\n<p>By replacing <p></p>\n<pre><code>resultView.text = getString(R.string.txt.show, &quot; &quot;) + result.format(2)\n</code></pre>\n<p>with</p>\n<pre><code>val finalResult =  result.toInt()&lt;p&gt;\nresultView.text = getString(R.string.txt_show, finalResult)&lt;p&gt;\n</code></pre>\n<p>And replace <code>%1$s</code> to <code>%1$d</code> in resources of strings.xml<p></p>\n<p>The warning is gone but I got problems, first the result is integer which is not what I expected. It should be double. Second, adding the function format in getString will stop the program with &quot;Unexpected Error...&quot; message on the screen.</p>\n<p>How can I solve this problem?</p>\n"}, {"tags": ["android", "exception", "kotlin", "retrofit", "subscribe"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11189025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157326312086042/picture?type=large", "display_name": "Vin", "link": "https://stackoverflow.com/users/11189025/vin"}, "edited": false, "score": 0, "creation_date": 1552626525, "post_id": 55114895, "comment_id": 97090313, "body": "I tried this, but when i actually try to log in it always go to the error. Doesn&#39;t verify the email. Soon as I remove the throwable component it crashes upon log in attempts. Not sure what is going on. I am able to verify login on the port (3000) with ARC"}], "tags": [], "owner": {"reputation": 917, "user_id": 6393618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1z9m.jpg?s=128&g=1", "display_name": "rya", "link": "https://stackoverflow.com/users/6393618/rya"}, "is_accepted": false, "score": 0, "last_activity_date": 1552369757, "creation_date": 1552369757, "answer_id": 55114895, "question_id": 55114796, "link": "https://stackoverflow.com/questions/55114796/trying-to-work-with-retrofitclient-and-subscribe-having-trouble-with-kotlin/55114895#55114895", "title": "Trying to work with RetrofitClient and subscribe, having trouble with Kotlin", "body": "<p>In Kotlin it would be some something like this: </p>\n\n<pre><code>compositeDisposable.add(iMyService.loginUser(email,password)\n    .subscribeOn(Schedulers.io())\n    .observeOn(AndroidSchedulers.mainThread())\n     .subscribe({ response: String -&gt;\n           Toast.makeText(context, response, Toast.LENGTH_SHORT).show()\n      }, { t: Throwable? -&gt;\n      })\n</code></pre>\n\n<p>you can refer to this link: <a href=\"https://www.raywenderlich.com/384-reactive-programming-with-rxandroid-in-kotlin-an-introduction\" rel=\"nofollow noreferrer\">https://www.raywenderlich.com/384-reactive-programming-with-rxandroid-in-kotlin-an-introduction</a></p>\n"}], "owner": {"reputation": 13, "user_id": 11189025, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157326312086042/picture?type=large", "display_name": "Vin", "link": "https://stackoverflow.com/users/11189025/vin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552389776, "creation_date": 1552369199, "question_id": 55114796, "link": "https://stackoverflow.com/questions/55114796/trying-to-work-with-retrofitclient-and-subscribe-having-trouble-with-kotlin", "title": "Trying to work with RetrofitClient and subscribe, having trouble with Kotlin", "body": "<p>I am trying to set up a user registration and login, and have been following a tutorial on youtube (<a href=\"https://www.youtube.com/watch?v=4Xq2FUJvE-c\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=4Xq2FUJvE-c</a>)</p>\n\n<p>I am also transitioning from java to kotlin while learning android programming vs just desktop, so a lot of new stuff for me. Anyways, code im tring to replicate:</p>\n\n<pre><code>  compositeDisposable.add(iMyService.loginUser(email,password)\n                .subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(new Consumer&lt;String&gt;() {\n                     @Override\n                     public void accept(String response) throws Exception {\n                     Toast.makeText(Mainactivity.this,\"\"+response,\n                           Toast.LENGTH_SHORT).show();\n                     }\n                }));\n</code></pre>\n\n<p>In Kotlin I have:</p>\n\n<pre><code>    compositeDisposable.add(iMyService.loginUser(email,password)\n        .subscribeOn(Schedulers.io())\n        .observeOn(AndroidSchedulers.mainThread())\n        .subscribe(Consumer&lt;String&gt;() {\n\n        }))\n</code></pre>\n\n<p>Not sure how to proceed and fill in the rest. I am not familiar with the subscribe method</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3529, "user_id": 6236752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/773877099379452/picture?type=large", "display_name": "Nouman Ch", "link": "https://stackoverflow.com/users/6236752/nouman-ch"}, "is_accepted": true, "score": 1, "last_activity_date": 1552366144, "creation_date": 1552366144, "answer_id": 55114381, "question_id": 55114268, "link": "https://stackoverflow.com/questions/55114268/expecting-a-class-body-when-trying-to-create-an-instance-of-fotoapparat/55114381#55114381", "title": "Expecting a class body when trying to create an instance of Fotoapparat", "body": "<p>According to the sample code the cameraview is id of xml view: </p>\n\n<pre><code>  &lt;io.fotoapparat.view.CameraView\n        android:id=\"@+id/cameraView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:visibility=\"gone\"\n        tools:layout_editor_absoluteX=\"8dp\"\n        tools:layout_editor_absoluteY=\"8dp\"\n        tools:visibility=\"visible\"&gt;\n</code></pre>\n\n<p>so add above into your xml and remove this below line:</p>\n\n<pre><code>     val cameraView = object : CameraRenderer\n</code></pre>\n\n<p>reference: <a href=\"https://github.com/RedApparat/Fotoapparat/blob/master/sample/src/main/res/layout/activity_main.xml\" rel=\"nofollow noreferrer\">activity_main</a> and here is kotiln code <a href=\"https://github.com/RedApparat/Fotoapparat/blob/72c7c81a420545d0f9645e4b5bba1d69d08a3caf/sample/src/main/java/io/fotoapparat/sample/MainActivity.kt#L45\" rel=\"nofollow noreferrer\">cameraView</a></p>\n"}], "owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 55114381, "answer_count": 1, "score": 0, "last_activity_date": 1552366144, "creation_date": 1552365485, "question_id": 55114268, "link": "https://stackoverflow.com/questions/55114268/expecting-a-class-body-when-trying-to-create-an-instance-of-fotoapparat", "title": "Expecting a class body when trying to create an instance of Fotoapparat", "body": "<p>OK so I'm trying to use the Fotoapparat library <a href=\"https://github.com/RedApparat/Fotoapparat\" rel=\"nofollow noreferrer\">(link)</a> and honestly I'm getting slightly confused but trying to work it out.</p>\n\n<p>This is the basic initialization according to the documentation:</p>\n\n<pre><code>val fotoapparat = Fotoapparat(\n    context = this,\n    view = cameraView\n)\n</code></pre>\n\n<p>Now <code>view</code> is expecting an item of type <code>CameraRenderer</code>.</p>\n\n<p>I think the right approach (not sure though tbh) is as follows:</p>\n\n<pre><code>val cameraView = object : CameraRenderer\n\n    val fotoapparat = Fotoapparat(\n        context = this.context,\n        view = cameraView\n    )\n</code></pre>\n\n<p>but now I have an error on the <code>val fotoapparat</code> variable saying <code>expecting a class body</code></p>\n\n<p>I'm pretty lost and not sure how to start using this library.</p>\n\n<p>*Any recommendations for a different simple and effective camera library with documentations for kotlin are more than welcome.</p>\n"}, {"tags": ["java", "android", "kotlin", "android-multidex"], "comments": [{"owner": {"reputation": 1690, "user_id": 473902, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bf781028e9a8edc6873f6ddd22264509?s=128&d=identicon&r=PG", "display_name": "Ge3ng", "link": "https://stackoverflow.com/users/473902/ge3ng"}, "edited": false, "score": 0, "creation_date": 1552362194, "post_id": 55113781, "comment_id": 96969768, "body": "What is your minSdk?"}, {"owner": {"reputation": 914, "user_id": 4676291, "user_type": "registered", "profile_image": "https://graph.facebook.com/628198087281846/picture?type=large", "display_name": "Aslam Hossin", "link": "https://stackoverflow.com/users/4676291/aslam-hossin"}, "edited": false, "score": 0, "creation_date": 1552362364, "post_id": 55113781, "comment_id": 96969807, "body": "Possibly duplicate question : <a href=\"https://stackoverflow.com/questions/26515378/dexindexoverflowexception-issue-after-updating-to-latest-appcompat-and-support-l\" title=\"dexindexoverflowexception issue after updating to latest appcompat and support l\">stackoverflow.com/questions/26515378/&hellip;</a>"}, {"owner": {"reputation": 6569, "user_id": 2309376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BddLg.png?s=128&g=1", "display_name": "Simply Ged", "link": "https://stackoverflow.com/users/2309376/simply-ged"}, "edited": false, "score": 1, "creation_date": 1552362671, "post_id": 55113781, "comment_id": 96969860, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/26515378/dexindexoverflowexception-issue-after-updating-to-latest-appcompat-and-support-l\">DexIndexOverflowException issue after updating to latest appcompat and support library</a>"}, {"owner": {"reputation": 3, "user_id": 5133748, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-432iqVg5jTs/AAAAAAAAAAI/AAAAAAAAABM/MMRCCeCLJVE/photo.jpg?sz=128", "display_name": "J Tiger", "link": "https://stackoverflow.com/users/5133748/j-tiger"}, "reply_to_user": {"reputation": 1690, "user_id": 473902, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bf781028e9a8edc6873f6ddd22264509?s=128&d=identicon&r=PG", "display_name": "Ge3ng", "link": "https://stackoverflow.com/users/473902/ge3ng"}, "edited": false, "score": 0, "creation_date": 1554084487, "post_id": 55113781, "comment_id": 97609205, "body": "@Ge3ng min sdk is 17 (I do not use 21 Lollipop)"}, {"owner": {"reputation": 3, "user_id": 5133748, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-432iqVg5jTs/AAAAAAAAAAI/AAAAAAAAABM/MMRCCeCLJVE/photo.jpg?sz=128", "display_name": "J Tiger", "link": "https://stackoverflow.com/users/5133748/j-tiger"}, "reply_to_user": {"reputation": 914, "user_id": 4676291, "user_type": "registered", "profile_image": "https://graph.facebook.com/628198087281846/picture?type=large", "display_name": "Aslam Hossin", "link": "https://stackoverflow.com/users/4676291/aslam-hossin"}, "edited": false, "score": 0, "creation_date": 1554084767, "post_id": 55113781, "comment_id": 97609253, "body": "@AslamHossin  I use multidex. and I had changed multidex library version. But did not work."}, {"owner": {"reputation": 3, "user_id": 5133748, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-432iqVg5jTs/AAAAAAAAAAI/AAAAAAAAABM/MMRCCeCLJVE/photo.jpg?sz=128", "display_name": "J Tiger", "link": "https://stackoverflow.com/users/5133748/j-tiger"}, "reply_to_user": {"reputation": 6569, "user_id": 2309376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BddLg.png?s=128&g=1", "display_name": "Simply Ged", "link": "https://stackoverflow.com/users/2309376/simply-ged"}, "edited": false, "score": 0, "creation_date": 1555039441, "post_id": 55113781, "comment_id": 97977686, "body": "@SimplyGed No, It didn&#39;t work for me"}], "owner": {"reputation": 3, "user_id": 5133748, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-432iqVg5jTs/AAAAAAAAAAI/AAAAAAAAABM/MMRCCeCLJVE/photo.jpg?sz=128", "display_name": "J Tiger", "link": "https://stackoverflow.com/users/5133748/j-tiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552362612, "creation_date": 1552361956, "last_edit_date": 1552362612, "question_id": 55113781, "link": "https://stackoverflow.com/questions/55113781/when-convert-java-to-kotlin-com-android-dex-dexindexoverflowexception-method-i", "title": "when convert Java to Kotlin, com.android.dex.DexIndexOverflowException: method ID not in [0, 0xffff]: 65536 in android studio", "body": "<p>After I have converted a <code>Java</code> file to <code>Kotlin</code>, I get the error: </p>\n\n<pre><code>com.android.dex.DexIndexOverflowException: method ID not in [0, 0xffff]: 65536\n</code></pre>\n\n<p>But, It only happens with 'make Project'. If I run 'debug app', It works fine (no problem).</p>\n\n<ul>\n<li>In fact I use:</li>\n</ul>\n\n<p>1) <code>Multidex</code> Setting's for Google Guide</p>\n\n<p>2) I checked it on Android Studio 3.2 and 3.0x </p>\n\n<p>3) If I do not convert <code>Java</code> to <code>Kotlin</code>, It works, no problems.</p>\n"}, {"tags": ["android", "kotlin", "rotation", "android-animation"], "comments": [{"owner": {"reputation": 103, "user_id": 11188481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f56de486ed7f1915f0ae953c5717b7?s=128&d=identicon&r=PG&f=1", "display_name": "faure", "link": "https://stackoverflow.com/users/11188481/faure"}, "edited": false, "score": 0, "creation_date": 1552367088, "post_id": 55113427, "comment_id": 96970876, "body": "@Benoit TH : Thank you so much, i try now to add a variable &quot; angleposition &quot;"}], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 9271818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12e109d836ad6f268ee12f0ba2e4022?s=128&d=identicon&r=PG&f=1", "display_name": "Benoit TH", "link": "https://stackoverflow.com/users/9271818/benoit-th"}, "is_accepted": true, "score": 0, "last_activity_date": 1552360825, "creation_date": 1552360825, "answer_id": 55113629, "question_id": 55113427, "link": "https://stackoverflow.com/questions/55113427/permanent-rotationanimation-with-kotlin/55113629#55113629", "title": "Permanent RotationAnimation with Kotlin", "body": "<p>That's because you're always telling the View to rotate from 0 to 90, not 90 to 180, etc.\nSomething you could do is call animate on the view like so:</p>\n\n<pre><code>         view.animate().apply{\n               rotationBy(90f)\n               duration = 1000L\n               start()\n         }\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 11188481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f56de486ed7f1915f0ae953c5717b7?s=128&d=identicon&r=PG&f=1", "display_name": "faure", "link": "https://stackoverflow.com/users/11188481/faure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 55113629, "answer_count": 1, "score": 0, "last_activity_date": 1552366612, "creation_date": 1552359184, "last_edit_date": 1552366612, "question_id": 55113427, "link": "https://stackoverflow.com/questions/55113427/permanent-rotationanimation-with-kotlin", "title": "Permanent RotationAnimation with Kotlin", "body": "<p>For my application project, I planned a welcome activity that allows the user to choose a group of countries.\nFor that I have two buttons: the first one will allow a CardView containing 4 TextViews to rotate by 90\u00b0 until the TexView of the country group is readable (the other Textviews will be oriented differently).\nThe code below works for a Texview, but my problem is the permanent effect of the rotation.</p>\n\n<p>I added the line: <code>rotateanimation.setFillAfter(true)</code> that works well, but half!</p>\n\n<p>If we launch a new Rotation, the animation starts from the beginning, while my goal is to extend by 90\u00b0 this rotation, to make a complete turn.\nMainactivity:</p>\n\n<pre><code>package training.geography.rotation\n\nimport android.content.Intent\nimport android.os.Bundle\nimport android.view.animation.Animation\nimport android.view.animation.RotateAnimation\nimport android.widget.Button\nimport android.widget.TextView\nimport androidx.appcompat.app.AppCompatActivity\n\nclass MainActivity() : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n\n        super.onCreate(savedInstanceState)\n\n        setContentView(R.layout.activity_main)\n\n        val textView = findViewById&lt;TextView&gt;(R.id.group1)\n\n        val buttonrotate = findViewById&lt;Button&gt;(R.id.rotatebutton)\n\n        val rotateanimation =  RotateAnimation(0f, 90f, Animation.RELATIVE_TO_SELF, .5f, Animation.RELATIVE_TO_SELF, .5f)\n\n        buttonrotate.setOnClickListener {\n\n            rotateanimation.setDuration(1000)\n\n            rotateanimation.setFillAfter(true)\n\n            textView.setAnimation(rotateanimation)\n\n            textView.startAnimation(rotateanimation)\n\n        }\n\n        val buttonchoose= findViewById&lt;Button&gt;(R.id.choosebutton)\n\n        buttonchoose.setOnClickListener {\n\n            val intent = Intent(this, TripleRecyclerView::class.java)\n\n            startActivity(intent)\n\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>activity_main  xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n\n    xmlns:tools=\"http://schemas.android.com/tools\"\n\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n\n    android:layout_width=\"match_parent\"\n\n    android:layout_height=\"match_parent\"  &gt;\n\n&lt;TextView android:id=\"@+id/group1\"\n\n          android:layout_width=\"220dp\"\n\n          android:layout_height=\"220dp\"\n\n          android:text=\"@string/countriesgroup1\"\n\n          app:layout_constraintLeft_toLeftOf=\"parent\"\n\n          app:layout_constraintTop_toTopOf=\"parent\"\n\n          app:layout_constraintStart_toStartOf=\"parent\"\n\n          android:layout_marginLeft=\"8dp\" android:layout_marginStart=\"8dp\"\n\n          app:layout_constraintEnd_toEndOf=\"parent\"\n\n          android:layout_marginEnd=\"8dp\" android:layout_marginRight=\"8dp\"\n\n          android:layout_marginTop=\"128dp\"\n\n          app:layout_constraintHorizontal_bias=\"0.497\"/&gt;\n\n&lt;Button android:id=\"@+id/rotatebutton\"\n\n        android:text=\"Rotate to choose Group of Countries\"\n\n        android:layout_width=\"wrap_content\"\n\n        android:layout_height=\"wrap_content\"\n\n        android:layout_marginTop=\"8dp\"\n\n        app:layout_constraintTop_toBottomOf=\"@+id/group1\"\n\n        android:layout_marginBottom=\"8dp\"\n\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n\n        app:layout_constraintStart_toStartOf=\"parent\"\n\n        android:layout_marginLeft=\"8dp\" android:layout_marginStart=\"8dp\"\n\n        app:layout_constraintEnd_toEndOf=\"parent\"\n\n        android:layout_marginEnd=\"8dp\" android:layout_marginRight=\"8dp\" /&gt;\n\n&lt;Button android:id=\"@+id/choosebutton\"\n\n        android:text=\"Choose Group\"\n\n        android:layout_width=\"wrap_content\"\n\n        android:layout_height=\"wrap_content\"\n\n        android:layout_marginTop=\"8dp\"\n\n        app:layout_constraintTop_toBottomOf=\"@+id/rotatebutton\"\n\n        android:layout_marginBottom=\"8dp\"\n\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n\n        app:layout_constraintEnd_toEndOf=\"parent\"\n\n        android:layout_marginEnd=\"8dp\" android:layout_marginRight=\"8dp\"\n\n        app:layout_constraintStart_toStartOf=\"parent\"\n\n        android:layout_marginLeft=\"8dp\"\n\n        android:layout_marginStart=\"8dp\" /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/TpaiB.jpg\" rel=\"nofollow noreferrer\">Result after rotation 90\u00b0</a></p>\n\n<p>The rotation worked well but how to make it permanent and perform a full rotation in 4 clicks?</p>\n"}, {"tags": ["kotlin", "realm", "nullable", "realm-java"], "answers": [{"comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1552587478, "post_id": 55113136, "comment_id": 97078298, "body": "I believe you can most likely accept your own answer now."}], "tags": [], "owner": {"reputation": 352, "user_id": 1452741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SGY4S.jpg?s=128&g=1", "display_name": "Mitch Ware", "link": "https://stackoverflow.com/users/1452741/mitch-ware"}, "is_accepted": true, "score": 1, "last_activity_date": 1552357035, "creation_date": 1552357035, "answer_id": 55113136, "question_id": 55113111, "link": "https://stackoverflow.com/questions/55113111/realm-how-to-tell-if-a-field-is-nullable-via-dynamicrealm/55113136#55113136", "title": "Realm: How to tell if a field is nullable via DynamicRealm?", "body": "<p>Well I'm an idiot - turns out <code>dynamicRealm.isNullable(fieldName)</code> totally exists :) </p>\n"}], "owner": {"reputation": 352, "user_id": 1452741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SGY4S.jpg?s=128&g=1", "display_name": "Mitch Ware", "link": "https://stackoverflow.com/users/1452741/mitch-ware"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 55113136, "answer_count": 1, "score": 2, "last_activity_date": 1552357035, "creation_date": 1552356849, "question_id": 55113111, "link": "https://stackoverflow.com/questions/55113111/realm-how-to-tell-if-a-field-is-nullable-via-dynamicrealm", "title": "Realm: How to tell if a field is nullable via DynamicRealm?", "body": "<p>Does <code>DynamicRealm</code> offer a way to determine if a field is nullable on a kotlin <code>RealmModel</code> subclass?</p>\n\n<p>For example, given the following realm models:</p>\n\n<pre><code>open class IntObj(\n    var i: Int = 1\n): RealmObject()\n</code></pre>\n\n<pre><code>open class NullIntObj(\n    var i: Int? = null\n): RealmObject()\n</code></pre>\n\n<p>If I fetch a dynamic realm object representation of each type and try to determine the field type of parameter \"i\" via <code>dynamicRealmObj.getFieldType(\"i\")</code>, they both return \"INTEGER\".</p>\n\n<p>Is there a way I can determine the nullability of a field on a dynamic realm object? Do I have to use reflection to try and determine what the underlying Java field is annotated with?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "google-cloud-functions", "stripe-payments"], "comments": [{"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "edited": false, "score": 0, "creation_date": 1552470933, "post_id": 55113025, "comment_id": 97018221, "body": "Could you add to your post the entire Cloud Functions code?"}, {"owner": {"reputation": 650, "user_id": 5076153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ced3aecfb433928ab4ae9a73365be71e?s=128&d=identicon&r=PG&f=1", "display_name": "Barcode", "link": "https://stackoverflow.com/users/5076153/barcode"}, "reply_to_user": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "edited": false, "score": 0, "creation_date": 1552502294, "post_id": 55113025, "comment_id": 97038522, "body": "@RenaudTarnec check my edit"}], "owner": {"reputation": 650, "user_id": 5076153, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ced3aecfb433928ab4ae9a73365be71e?s=128&d=identicon&r=PG&f=1", "display_name": "Barcode", "link": "https://stackoverflow.com/users/5076153/barcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552502275, "creation_date": 1552356282, "last_edit_date": 1552502275, "question_id": 55113025, "link": "https://stackoverflow.com/questions/55113025/firebase-cloud-function-gets-triggered-twice-first-time-error-second-time-o", "title": "Firebase cloud function gets triggered twice. First time &#39;error&#39;, second time &#39;ok&#39;", "body": "<p>Just trying to impletment Stripe Payment into my Android App.</p>\n\n<p>The trouble i have is that my cloud function is triggered twice when i enter a credit card in my app. the first trigger returns an \"error\" status and the second trigger returns an \"ok\" status</p>\n\n<p><a href=\"https://i.stack.imgur.com/9IHbx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9IHbx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the code i use to save the Stripe <code>token</code> to my firebase realtime database:</p>\n\n<pre><code>if (cardToSave != null) {\n    stripe.createToken(\n        cardToSave,\n         object:TokenCallback {\n             override fun onSuccess(token: Token?) {\n                 val currentUser = FirebaseAuth.getInstance().currentUser?.uid\n                 val database = FirebaseDatabase.getInstance()\n                 val pushId = database.getReference(\"stripe_customers/$currentUser/sources/\").push().key\n                 val ref = database.getReference(\"stripe_customers/$currentUser/sources/$pushId/token/\")\n                 //save the token id from the \"token\" object we received from Stripe\n                 ref.setValue(token?.id)\n                     .addOnSuccessListener {\n                         Log.d(TAG, \"Added Stripe Token to database successfully\")\n                     }\n                     .addOnFailureListener {\n                         Log.d(TAG, \"Failed to add Token to database\")\n                     }\n             }\n...\n</code></pre>\n\n<p>Here is the cloud function i copied straight from Stripe's example in their <a href=\"https://github.com/firebase/functions-samples/blob/master/stripe/functions/index.js\" rel=\"nofollow noreferrer\">github repo</a>:</p>\n\n<pre><code>// Add a payment source (card) for a user by writing a stripe payment source token to Realtime database\nexports.addPaymentSource = functions.database\n    .ref('/stripe_customers/{userId}/sources/{pushId}/token').onWrite((change, context) =&gt; {\n      const source = change.after.val();\n      if (source === null){\n        return null;\n      }\n      return admin.database().ref(`/stripe_customers/${context.params.userId}/customer_id`)\n          .once('value').then((snapshot) =&gt; {\n            return snapshot.val();\n          }).then((customer) =&gt; {\n            return stripe.customers.createSource(customer, {source});\n          }).then((response) =&gt; {\n            return change.after.ref.parent.set(response);\n          }, (error) =&gt; {\n            return change.after.ref.parent.child('error').set(userFacingMessage(error));\n          }).then(() =&gt; {\n            return reportError(error, {user: context.params.userId});\n          });\n        });\n</code></pre>\n\n<p>Any help would be appreciated! </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p><strong>index.js</strong></p>\n\n<pre><code>'use strict';\n\nconst functions = require('firebase-functions');\nconst admin = require('firebase-admin');\nadmin.initializeApp();\nconst logging = require('@google-cloud/logging');\n//functions.config() is firebase's environment variables\nconst stripe = require('stripe')(functions.config().stripe.token);\nconst currency = functions.config().stripe.currency || 'USD';\n\n// [START chargecustomer]\n// Charge the Stripe customer whenever an amount is written to the Realtime database\nexports.createStripeCharge = functions.database.ref('/stripe_customers/{userId}/charges/{id}')\n    .onCreate((snap, context) =&gt; {\n      const val = snap.val();\n      // Look up the Stripe customer id written in createStripeCustomer\n      return admin.database().ref(`/stripe_customers/${context.params.userId}/customer_id`)\n          .once('value').then((snapshot) =&gt; {\n            return snapshot.val();\n          }).then((customer) =&gt; {\n            // Create a charge using the pushId as the idempotency key\n            // protecting against double charges\n            const amount = val.amount;\n            const idempotencyKey = context.params.id;\n            const charge = {amount, currency, customer};\n            if (val.source !== null) {\n              charge.source = val.source;\n            }\n            return stripe.charges.create(charge, {idempotency_key: idempotencyKey});\n          }).then((response) =&gt; {\n            // If the result is successful, write it back to the database\n            return snap.ref.set(response);\n          }).catch((error) =&gt; {\n            // We want to capture errors and render them in a user-friendly way, while\n            // still logging an exception with StackDriver\n            return snap.ref.child('error').set(userFacingMessage(error));\n          }).then(() =&gt; {\n            return reportError(error, {user: context.params.userId});\n          });\n        });\n// [END chargecustomer]]\n\n// When a user is created, register them with Stripe\nexports.createStripeCustomer = functions.auth.user().onCreate((user) =&gt; {\n  return stripe.customers.create({\n    email: user.email,\n  }).then((customer) =&gt; {\n    return admin.database().ref(`/stripe_customers/${user.uid}/customer_id`).set(customer.id);\n  });\n});\n\n// Add a payment source (card) for a user by writing a stripe payment source token to Realtime database\nexports.addPaymentSource = functions.database\n    .ref('/stripe_customers/{userId}/sources/{pushId}/token').onWrite((change, context) =&gt; {\n      const source = change.after.val();\n      if (source === null){\n        return null;\n      }\n      return admin.database().ref(`/stripe_customers/${context.params.userId}/customer_id`)\n          .once('value').then((snapshot) =&gt; {\n            return snapshot.val();\n          }).then((customer) =&gt; {\n            return stripe.customers.createSource(customer, {source:source});\n          }).then((response) =&gt; {\n            return change.after.ref.parent.set(response);\n          }, (error) =&gt; {\n            return change.after.ref.parent.child('error').set(userFacingMessage(error));\n          }).then(() =&gt; {\n            return reportError(error, {user: context.params.userId});\n          });\n        });\n\n// When a user deletes their account, clean up after them\nexports.cleanupUser = functions.auth.user().onDelete((user) =&gt; {\n  return admin.database().ref(`/stripe_customers/${user.uid}`).once('value').then(\n      (snapshot) =&gt; {\n        return snapshot.val();\n      }).then((customer) =&gt; {\n        return stripe.customers.del(customer.customer_id);\n      }).then(() =&gt; {\n        return admin.database().ref(`/stripe_customers/${user.uid}`).remove();\n      });\n    });\n\n// To keep on top of errors, we should raise a verbose error report with Stackdriver rather\n// than simply relying on console.error. This will calculate users affected + send you email\n// alerts, if you've opted into receiving them.\n// [START reporterror]\nfunction reportError(err, context = {}) {\n  // This is the name of the StackDriver log stream that will receive the log\n  // entry. This name can be any valid log stream name, but must contain \"err\"\n  // in order for the error to be picked up by StackDriver Error Reporting.\n  const logName = 'errors';\n  const log = logging.log(logName);\n\n  // https://cloud.google.com/logging/docs/api/ref_v2beta1/rest/v2beta1/MonitoredResource\n  const metadata = {\n    resource: {\n      type: 'cloud_function',\n      labels: {function_name: process.env.FUNCTION_NAME},\n    },\n  };\n\n  // https://cloud.google.com/error-reporting/reference/rest/v1beta1/ErrorEvent\n  const errorEvent = {\n    message: err.stack,\n    serviceContext: {\n      service: process.env.FUNCTION_NAME,\n      resourceType: 'cloud_function',\n    },\n    context: context,\n  };\n\n  // Write the error log entry\n  return new Promise((resolve, reject) =&gt; {\n    log.write(log.entry(metadata, errorEvent), (error) =&gt; {\n      if (error) {\n       return reject(error);\n      }\n      return resolve();\n    });\n  });\n}\n// [END reporterror]\n\n// Sanitize the error message for the user\nfunction userFacingMessage(error) {\n  return error.type ? error.message : 'An error occurred, developers have been alerted';\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 970, "user_id": 783238, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/258b3a7ea358be1710a0eae54f471b63?s=128&d=identicon&r=PG", "display_name": "Shermano", "link": "https://stackoverflow.com/users/783238/shermano"}, "edited": false, "score": 0, "creation_date": 1552418939, "post_id": 55113678, "comment_id": 97000217, "body": "Really thank you for your answer, I&#39;ll try it out later"}], "tags": [], "owner": {"reputation": 362, "user_id": 9271818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12e109d836ad6f268ee12f0ba2e4022?s=128&d=identicon&r=PG&f=1", "display_name": "Benoit TH", "link": "https://stackoverflow.com/users/9271818/benoit-th"}, "is_accepted": false, "score": 1, "last_activity_date": 1552361617, "last_edit_date": 1552361617, "creation_date": 1552361199, "answer_id": 55113678, "question_id": 55112801, "link": "https://stackoverflow.com/questions/55112801/can-i-split-mapindexed-work-from-kotlin-collection-in-multiple-threads/55113678#55113678", "title": "Can I split mapIndexed work from kotlin collection in multiple threads?", "body": "<p>The problem with running a <code>map</code> in parallel is that you might lose the order of the list. Here is an example of a <code>forEach</code> loop that'll be executed in parallel</p>\n\n<pre><code>import java.util.*\nimport java.util.concurrent.ExecutorService\nimport java.util.concurrent.Executors\n\n\nprivate fun getExecutor(threads: Int) = Executors.newFixedThreadPool(threads)\nprivate fun ExecutorService.run(runnables: List&lt;() -&gt; Unit&gt;) {\n    val jobs = runnables.map {\n        submit(it)\n    }\n    jobs.forEach {\n        it.get()\n    }\n}\n\nprivate val _executorMap = mutableMapOf&lt;Int, ExecutorService&gt;()\n\nfun &lt;T&gt; Iterable&lt;T&gt;.forEachParallel(threads: Int = Runtime.getRuntime().availableProcessors(), block: (T) -&gt; Unit) {\n\n    val executor = _executorMap.getOrPut(threads) { getExecutor(threads) }\n\n    val list: List&lt;() -&gt; Unit&gt; = (0 until size).map { i -&gt;\n        { block(get(i)) }\n    }\n\n    executor.run(list)\n}\n</code></pre>\n\n<p>Alternatively, you can use RxJava</p>\n\n<pre><code>private val _executorMap = mutableMapOf&lt;Int, Scheduler&gt;()\nprivate fun getScheduler(threads: Int) =\n    _executorMap.getOrPut(threads) { Schedulers.from(Executors.newFixedThreadPool(threads)) }\n\nfun &lt;T&gt; Iterable&lt;T&gt;.forEachParallel(threads: Int = Runtime.getRuntime().availableProcessors(), block: (T) -&gt; Unit) {\n\n    Flowable.fromIterable(this)\n        .parallel(threads)\n        .runOn(getScheduler(threads))\n        .map(block)\n        .sequential()\n        .blockingSubscribe()\n</code></pre>\n\n<p>You can easily modifiy this 2 functions to keep track of the index if you realy need the order. You can use it like so:</p>\n\n<pre><code> bigList.forEachParallel { \n        val result = someComputation(it)\n        newList.add(result)\n    }\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": true, "score": 4, "last_activity_date": 1552376837, "last_edit_date": 1552376837, "creation_date": 1552372896, "answer_id": 55115533, "question_id": 55112801, "link": "https://stackoverflow.com/questions/55112801/can-i-split-mapindexed-work-from-kotlin-collection-in-multiple-threads/55115533#55115533", "title": "Can I split mapIndexed work from kotlin collection in multiple threads?", "body": "<p>You can use a combination of <code>chunked</code> and coroutines:</p>\n\n<ul>\n<li><code>chunked</code> splits a list into parts</li>\n<li><code>async</code> starts a new coroutine</li>\n<li><code>awaitAll</code> waits for the coroutines to finish</li>\n<li><code>flatten</code> combines the chunks of <code>Pairs</code> to one list</li>\n<li><code>toMap</code> converts the list of pairs to a new <code>Map</code></li>\n</ul>\n\n<p>Be aware that <code>runBlocking</code> is only used as an example to create a coroutine scope. </p>\n\n<pre><code>runBlocking(Dispatchers.Default) {\n    val chunkSize = 10000\n    val map = signal.split(\" \").chunked(chunkSize).mapIndexed { chunkIndex, chunk -&gt;\n        async {\n            chunk.mapIndexedNotNull { index, signal -&gt;\n                signal.toFloatOrNull()?.let { floatSignal -&gt;\n                    (chunkIndex * chunkSize + index).toFloat() to floatSignal\n                }\n            }\n        }\n    }.awaitAll().flatten().toMap()\n}\n</code></pre>\n"}], "owner": {"reputation": 970, "user_id": 783238, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/258b3a7ea358be1710a0eae54f471b63?s=128&d=identicon&r=PG", "display_name": "Shermano", "link": "https://stackoverflow.com/users/783238/shermano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 55115533, "answer_count": 2, "score": 1, "last_activity_date": 1552376837, "creation_date": 1552354114, "question_id": 55112801, "link": "https://stackoverflow.com/questions/55112801/can-i-split-mapindexed-work-from-kotlin-collection-in-multiple-threads", "title": "Can I split mapIndexed work from kotlin collection in multiple threads?", "body": "<p>I'm struggling a bit finding a solution for my app problem.<br>\nMy app is generating chart with a million of points, and for this works I'm saving a string with all points separeted by an blank space on the room database.    </p>\n\n<p>That being said, i'm loading this String of points, splitting it nad using mapIndex to put a index on all of them, like this:</p>\n\n<pre><code>val map = mutableMapOf&lt;Float, Float&gt;()\n            signal.split(\" \").mapIndexed { index, signal -&gt;\n                signal.toFloatOrNull()?.let { floatSignal -&gt;\n                    map[index.toFloat()] = floatSignal\n                }\n            }\n</code></pre>\n\n<p>With this code I can show all points on a Chart, but this operation mapIndexed is too slow when handling a million points (more than third seconds)<br>\n    My question is, there is a way split mapIndexed on multi-thread and then join the result? Sorry if it is a bit too hard to understand, i'm not a native speaker</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "edited": false, "score": 0, "creation_date": 1552359130, "post_id": 55112762, "comment_id": 96969141, "body": "Because <code>private var listener: ChapterHrefCallback? = null</code> and <code>setChapterHrefListener</code> does not reference to the listener inside <code>PageFragment</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2246, "user_id": 9038584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/POPil.jpg?s=128&g=1", "display_name": "Tenten Ponce", "link": "https://stackoverflow.com/users/9038584/tenten-ponce"}, "reply_to_user": {"reputation": 125, "user_id": 7398771, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7cf7f27224b298671c132dae3698c8cd?s=128&d=identicon&r=PG", "display_name": "niel", "link": "https://stackoverflow.com/users/7398771/niel"}, "edited": false, "score": 0, "creation_date": 1552368400, "post_id": 55113436, "comment_id": 96971232, "body": "You can mark it as the correct answer so others can make it as a reference also. Thanks!"}], "tags": [], "owner": {"reputation": 2246, "user_id": 9038584, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/POPil.jpg?s=128&g=1", "display_name": "Tenten Ponce", "link": "https://stackoverflow.com/users/9038584/tenten-ponce"}, "is_accepted": true, "score": 1, "last_activity_date": 1552359282, "creation_date": 1552359282, "answer_id": 55113436, "question_id": 55112762, "link": "https://stackoverflow.com/questions/55112762/callback-listener-is-always-null/55113436#55113436", "title": "Callback Listener is always null", "body": "<p>You're using the interface incorrectly, <code>PageFragment</code> doesn't need to implement the <code>ChapterHrefCallback</code>, you just need to call the method in it:</p>\n\n<pre><code>class PageFragment : Fragment() { // notice we remove the ChapterHrefCallback\n   private var listener: ChapterHrefCallback? = null\n\n   fun someFunctionHere() {\n      //codes here...\n      listener.getChapterLink(\"pass the link here\")\n      //codes again here...\n   }\n}\n</code></pre>\n\n<p>Then this will be handled by the <code>ReaderFragment</code>.</p>\n"}], "owner": {"reputation": 125, "user_id": 7398771, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7cf7f27224b298671c132dae3698c8cd?s=128&d=identicon&r=PG", "display_name": "niel", "link": "https://stackoverflow.com/users/7398771/niel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 55113436, "answer_count": 1, "score": 0, "last_activity_date": 1552360140, "creation_date": 1552353744, "question_id": 55112762, "link": "https://stackoverflow.com/questions/55112762/callback-listener-is-always-null", "title": "Callback Listener is always null", "body": "<p>I can't figure it out why listener in class PageFragment > getChapterLink function is always null. I already set the listener in pageFragment. It took me so long debugging this code but I can't fix it anymore. Please help me. Thanks.</p>\n\n<pre><code>class ReaderFragment : Fragment() {\n   private fun setPageRedirection() {\n   val pageFragment = PageFragment()\n   pageFragment.setChapterHrefCallbackListener(object: ChapterHrefCallback {\n        override fun getChapterLink(href: String) {\n           vPagerReaderPage.currentItem = pageAdapter!!.checkSpinePosition(href)\n       }\n   })\n}\n\nclass PageFragment : Fragment(), ChapterHrefCallback {\n   private var listener: ChapterHrefCallback? = null\n      override fun getChapterLink(href: String) {\n          Timber.d(\"HREF -----&gt; $href\")\n          if (listener != null) {\n              listener?.getChapterLink(href)\n              Timber.d(\"HREF -----&gt; \" + listener?.getChapterLink(href))\n   }\n}\n\nfun setChapterHrefListener(listener: ChapterHrefCallback?) {\n   this.listener = listener\n}\n\ninterface ChapterHrefCallback {\n    fun getChapterLink(href: String)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-syncadapter"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 3738208, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001110901553/picture?type=large", "display_name": "user3738208", "link": "https://stackoverflow.com/users/3738208/user3738208"}, "edited": false, "score": 0, "creation_date": 1552583901, "post_id": 55112612, "comment_id": 97076292, "body": "It&#39;s not posible, cause SyncAdapter runs in background, I can&#39;t access to this resource from SyncAdapter"}], "tags": [], "owner": {"reputation": 60, "user_id": 6148516, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EnWAIcMlEJA/AAAAAAAAAAI/AAAAAAAABIs/m80UVzDF_qw/photo.jpg?sz=128", "display_name": "Naufal Prakoso", "link": "https://stackoverflow.com/users/6148516/naufal-prakoso"}, "is_accepted": false, "score": 0, "last_activity_date": 1552352472, "creation_date": 1552352472, "answer_id": 55112612, "question_id": 55111666, "link": "https://stackoverflow.com/questions/55111666/update-recyclerview-ui-after-syncadapter-changes-data-in-kotlin/55112612#55112612", "title": "Update RecyclerView UI after SyncAdapter changes data in Kotlin", "body": "<p>To update your RecyclerView values, you can refresh your adapter with:</p>\n\n<pre><code>adapter.notifyDataSetChanged\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 3738208, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001110901553/picture?type=large", "display_name": "user3738208", "link": "https://stackoverflow.com/users/3738208/user3738208"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552352472, "creation_date": 1552345400, "question_id": 55111666, "link": "https://stackoverflow.com/questions/55111666/update-recyclerview-ui-after-syncadapter-changes-data-in-kotlin", "title": "Update RecyclerView UI after SyncAdapter changes data in Kotlin", "body": "<p>I need to refresh my RecyclerView after the SyncAdapter finish a task, When I click some item from my RecyclerView I send the data to a Webserver, my server returns some data and save it in a local db (Anko db), this works fine, but I need to update the UI items when the data is save in a local DB. \nWhat is the best way to do this?</p>\n\n<p>That's my RecyclerViewAdapter:</p>\n\n<pre><code>class TableRecyclerViewAdapter(private val tableList: List&lt;TablesParser&gt;) : RecyclerView.Adapter&lt;TableHolder&gt;() {\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): TableHolder {\n        val layoutView = LayoutInflater.from(parent.context).inflate(R.layout.table_item, parent, false)\n        return TableHolder(layoutView)\n    }\n\n    override fun onBindViewHolder(holder: TableHolder, position: Int) {\n        if (position &lt; tableList.size) {\n            val table = tableList[position]\n            val node = holder.table\n            val context = node.context\n            holder.guestNumber.text = table.people.toString()\n            holder.tableName.text = table.description\n            if (node is MaterialCardView) {\n                when (table.status) {\n                    \"A\" -&gt; {\n                        holder.descriptionTable.text = \"ABIERTA\"\n                        node.setCardBackgroundColor(ContextCompat.getColor(context!!, R.color.openTable))\n                    }\n                    \"D\" -&gt; {\n                        holder.descriptionTable.text = \"DISPONIBLE\"\n                        node.setCardBackgroundColor(ContextCompat.getColor(context!!, R.color.orangePrimary))\n                    }\n                    \"C\" -&gt; {\n                        holder.descriptionTable.text = \"CERRADA\"\n                        node.setCardBackgroundColor(ContextCompat.getColor(context!!, R.color.closedTable))\n                    }\n                    else -&gt; {\n                        holder.descriptionTable.text = node.context.getString(R.string.error_label)\n                        node.setCardBackgroundColor(ContextCompat.getColor(context!!, R.color.errorTable))\n                    }\n                }\n                node.setOnClickListener {\n                    when (table.status) { //  Verificar los estados de las mesas\n                        \"C\" -&gt; context.toast(\"Mesa cerrada\")\n                        \"D\" -&gt; {\n                            openTable(context, it, table.people,\"\", table)\n                        }\n                        \"A\" -&gt; {\n                            command(context, it, table.people, table.description)\n                        }\n                    }\n                }\n\n            }\n        }\n    }\n\n    override fun getItemCount(): Int = tableList.size\n\n    /**\n     * Open a table to send the updated data to a server\n     */\n    private fun openTable (context:Context, table:View, people: Int, title:String, tableData: TablesParser) {\n        val view = context.layoutInflater.inflate(R.layout.open_table_modal, null, false) // Layout para abrir el modal\n\n        val dialog = AlertDialog.Builder(context, R.style.com_madison_AlertDialog).create()\n        if (title == \"\") {\n            dialog.setTitle(\"Mesa ${tableData.description}\")\n        }\n        dialog.setIcon(R.drawable.ic_guests)\n        dialog.setCancelable(false)\n        val guestTextEditor = view.txtGuestsNumber\n        guestTextEditor.setText(people.toString())\n        guestTextEditor.requestFocus()\n        Keyboard.showKeyBoardInDialog(view)\n        dialog.setButton(AlertDialog.BUTTON_POSITIVE, \"OK\") { _: DialogInterface, _: Int -&gt;\n            // Put the params for send to a server and update the System DB in a Bundle Object\n            val bundle = Bundle()\n            bundle.putInt(\"IDTABLE\", tableData.tableId)\n            if (guestTextEditor.text == null) {\n                bundle.putInt(\"PEOPLE\", tableData.people)\n            } else {\n                bundle.putInt(\"PEOPLE\", guestTextEditor.text.toString().trim().toInt())\n            }\n            bundle.putString(\"TABLE\", tableData.description)\n            val seller = PreferenceManager.getDefaultSharedPreferences(context).getInt(\"idSeller\", 0)\n            // Verify if a idSeller exist in SharedPreference\n            if (seller &gt; 0) { // If seller is set continue to open a table\n                bundle.putInt(\"SELLER\", seller)\n                bundle.putBoolean(ContentResolver.SYNC_EXTRAS_UPLOAD, true)\n                /*\n                * SyncAdapter call \n                * the requestSync function triggers the SyncAdapter class and onPerformSync is the attendant of sync the data\n                */\n                ContentResolver.requestSync(SyncAdapter.getSyncAccounts(view.context), AUTHORITY, bundle)\n            } else {\n                context.toast(\"No se encontr\u00f3 vendedor para la mesa\")\n                dialog.dismiss()\n            }\n        }\n        dialog.setButton(AlertDialog.BUTTON_NEGATIVE, \"Cancelar\") { _: DialogInterface, _: Int -&gt;\n            context.toast(\"CANCEL\")\n            dialog.dismiss()\n        }\n        dialog.setView(view)\n\n        dialog.show()\n    }\n\n\n    private fun command (context:Context, table:View, people: Int, description: String) {\n        context.toast(\"Entro en command\")\n    }\n}\n</code></pre>\n\n<p>This is my SyncAdapter: </p>\n\n<pre><code>class SyncAdapter @JvmOverloads constructor(ctx: Context, autoInitialize: Boolean,\n                                            allowParallelSyncs: Boolean = false,\n                                            val mContentResolver:ContentResolver = ctx.contentResolver) : AbstractThreadedSyncAdapter (ctx, autoInitialize, allowParallelSyncs) {\n    // Var for retrieve the server api data\n    private val serverNegotiation = ServerDataNegotiation()\n\n    override fun onPerformSync(account: Account?, extras: Bundle?, authority: String?, provider: ContentProviderClient?, syncResult: SyncResult?) {\n        Log.e(\"SYNC\", \"ENTRO EN EL PERFORM SYNC\")\n        if (extras != null) {\n            // Sync the local data changes to a Server\n            if (extras.getBoolean(ContentResolver.SYNC_EXTRAS_UPLOAD,true)) {\n                syncResult?.run {\n                    syncLocalDataToServer(context, this, extras)\n                } ?: this.context.longToast(\"No se pudo sincronizar la informaci\u00f3n con el servidor, no se pudo obtener el resultado de la sincronizaci\u00f3n\")\n            } else {\n                // Sync the data locally\n                syncResult?.run {\n                    syncServerDataToLocalDB(context, this)\n                }\n            }\n        }\n    }\n\n    private fun syncLocalDataToServer (ctx:Context, syncResult: SyncResult, extras: Bundle) {\n        serverNegotiation.openTableInServer(extras.getInt(\"IDTABLE\", 0), extras.getInt(\"PEOPLE\", 2), extras.getInt(\"SELLER\", 0), {tableData -&gt;\n            // Update the local AnkoDB\n            DBQueryHelper.getInstance().updateTableInfo(ctx, tableData, extras)\n            syncResult.stats.numUpdates ++\n        }, {error -&gt;\n            ctx.longToast(error)\n        })\n    }\n\n    private fun syncServerDataToLocalDB (ctx:Context, syncResult: SyncResult?) {\n        Log.e(\"SYNC\", \"OBTENIENDO LOS DATOS DEL SERVIDOR PARA ACTUALIZAR LA UI Y LA BASE DE DATOS LOCAL\")\n    }\n\n    companion object {\n        /**fun initSync (ctx:Context, upload: Boolean, args: MutableList&lt;Any&gt;) {\n            Log.e(\"SYNC\", \"ENTRO EN EL iniSync\")\n            val bundle = Bundle()\n            bundle.putInt(\"PEOPLE\", args[0].toString().toInt())\n            bundle.putString(\"TABLE\", args[1].toString())\n\n            if (upload)\n                bundle.putBoolean(ContentResolver.SYNC_EXTRAS_UPLOAD, true)\n            // Call to my SyncAdapter (supposed :( )\n            Log.e(\"SYNC\", \"ENTRO ANTES DEL REQUESTSYNC\")\n            ContentResolver.requestSync(getSyncAccounts(ctx), AUTHORITY, bundle)\n            Log.e(\"SYNC\", \"DESPUES DEL REQUEST SYNC\")\n            // Init the sync service every 4 seconds\n            ContentResolver.addPeriodicSync(getSyncAccounts(ctx), AUTHORITY, Bundle.EMPTY, 4)\n        }**/\n\n        fun getSyncAccounts(ctx: Context): Account? {\n            val accountManager = ctx.getSystemService(Context.ACCOUNT_SERVICE) as AccountManager\n            val newAccount = Account(ACCOUNT, ACCOUNT_TYPE)\n            if (!accountManager.addAccountExplicitly(newAccount, null, null)) {\n                return null\n            }\n            return newAccount\n        }\n    }\n}\n</code></pre>\n\n<p>And this is my function for update the server changes in a local DB, In this function I need to update my UI: </p>\n\n<pre><code>  fun updateTableInfo (context: Context, tableInfo: ResponseOpenTable, extras: Bundle) {\n        context.database.use {\n            update(\"tableplan\", \"sellRelated\" to tableInfo.sell, \"originalSell\" to tableInfo.sell,\n                \"status\" to \"A\", \"people\" to extras.getInt(\"PEOPLE\", 0))\n                .whereArgs(\"idmesa = {tableId}\", \"tableId\" to extras.getInt(\"IDTABLE\", 0)).exec()\n        }\n        val layout = context.layoutInflater.inflate(R.layout.tables_plan_layout, null, false)\n        //*********** THAT'S NOT WORKS\n        layout.recyclerview_tableplan.children.forEach { node -&gt;\n            if (node is MaterialCardView) {\n                node.lblTableDescription.text = \"ABIERTA\"\n                node.setCardBackgroundColor(ContextCompat.getColor(context, R.color.openTable))\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-multiplatform", "kotlin-js-interop", "kotlin-js", "kotlin2js"], "comments": [{"owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "edited": false, "score": 0, "creation_date": 1553628844, "post_id": 55111614, "comment_id": 97453623, "body": "Will this code run on the server side (NodeJS) or on the client side?"}, {"owner": {"reputation": 12042, "user_id": 1447885, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ecbf67a102659b602b939fa0a7b03a11?s=128&d=identicon&r=PG", "display_name": "Diolor", "link": "https://stackoverflow.com/users/1447885/diolor"}, "reply_to_user": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "edited": false, "score": 0, "creation_date": 1553635917, "post_id": 55111614, "comment_id": 97456545, "body": "@AlexanderEgger server side, so the path is (easier) guaranteed"}, {"owner": {"reputation": 1305, "user_id": 9775278, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hUz4-9mLcbk/AAAAAAAAAAI/AAAAAAAAAe0/DtiqUiPv0Ek/photo.jpg?sz=128", "display_name": "andylamax", "link": "https://stackoverflow.com/users/9775278/andylamax"}, "edited": false, "score": 0, "creation_date": 1555854928, "post_id": 55111614, "comment_id": 98237469, "body": "using gradle only wont help, use the kotlin-frontend-plugin as well, locate you file.json in the resources folder and watch the magic happen"}, {"owner": {"reputation": 5291, "user_id": 5279156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vHs51.jpg?s=128&g=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5279156/vlad"}, "edited": false, "score": 0, "creation_date": 1594199316, "post_id": 55111614, "comment_id": 111039836, "body": "you need something like <code>json-loader</code> plugin for webpack to load json with code"}], "answers": [{"comments": [{"owner": {"reputation": 12042, "user_id": 1447885, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ecbf67a102659b602b939fa0a7b03a11?s=128&d=identicon&r=PG", "display_name": "Diolor", "link": "https://stackoverflow.com/users/1447885/diolor"}, "edited": false, "score": 2, "creation_date": 1552346049, "post_id": 55111653, "comment_id": 96966103, "body": "How will solve the issue? I see that either <code>require(&quot;file.json&quot;)</code> or <code>js(&quot;require(&#39;file.json&#39;)&quot;)</code> will generate the same javascript code: <code>require(&#39;file.json&#39;)</code>. The problem still remains that the file.json cannot be found in the path. To be precice with the exception: <code>Error: Cannot find module &#39;file.json&#39;</code>"}, {"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "reply_to_user": {"reputation": 12042, "user_id": 1447885, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ecbf67a102659b602b939fa0a7b03a11?s=128&d=identicon&r=PG", "display_name": "Diolor", "link": "https://stackoverflow.com/users/1447885/diolor"}, "edited": false, "score": 0, "creation_date": 1552346189, "post_id": 55111653, "comment_id": 96966141, "body": "I guess the <code>.&#47;file.json</code> may help then"}], "tags": [], "owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1552425879, "last_edit_date": 1552425879, "creation_date": 1552345312, "answer_id": 55111653, "question_id": 55111614, "link": "https://stackoverflow.com/questions/55111614/load-resource-file-json-in-kotlin-js/55111653#55111653", "title": "Load resource file (json) in kotlin js", "body": "<p>You may just use <code>js(\"require('./file.json')\")</code> if you do not have import for the <code>require</code> function in Kotlin. The result will be <code>dynamic</code>, so you may cast it to <code>Map</code>.</p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.js/js.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.js/js.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 4522, "user_id": 101337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6fc1741623270471a080b705b1fa0?s=128&d=identicon&r=PG", "display_name": "Alexander Egger", "link": "https://stackoverflow.com/users/101337/alexander-egger"}, "is_accepted": false, "score": 2, "last_activity_date": 1553670740, "creation_date": 1553670740, "answer_id": 55371644, "question_id": 55111614, "link": "https://stackoverflow.com/questions/55111614/load-resource-file-json-in-kotlin-js/55371644#55371644", "title": "Load resource file (json) in kotlin js", "body": "<p>Assuming the Kotlin compiler puts the created JS file (say <code>server.js</code>) into the default location at <code>build/classes/kotlin/main</code> and the resource file (<code>file.json</code>) into <code>build/resources/main</code>.</p>\n\n<p>And you are running <code>server.js</code> by executing <code>node build/classes/kotlin/main/server.js</code></p>\n\n<p>According to the NodeJS documentation: </p>\n\n<p><em>Local modules and JSON files can be imported using a relative path (e.g. ./, ./foo, ./bar/baz, ../foo) that will be resolved against the directory named by __dirname (if defined) or the current working directory.</em>\n(<a href=\"https://nodejs.org/api/modules.html#modules_require_id\" rel=\"nofollow noreferrer\">https://nodejs.org/api/modules.html#modules_require_id</a>) </p>\n\n<p>In our case <code>__dirname</code> is <code>build/classes/kotlin/main</code></p>\n\n<p>So the correct require statement is:     </p>\n\n<pre><code>val serviceAccount = js(\"require('../../../resources/main/file.json')\") \n</code></pre>\n\n<p>or if <code>require</code> is defined as a Kotlin function like in the question</p>\n\n<pre><code>val serviceAccount = require(\"../../../resources/main/file.json\") \n</code></pre>\n"}], "owner": {"reputation": 12042, "user_id": 1447885, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ecbf67a102659b602b939fa0a7b03a11?s=128&d=identicon&r=PG", "display_name": "Diolor", "link": "https://stackoverflow.com/users/1447885/diolor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1040, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1553670740, "creation_date": 1552345057, "last_edit_date": 1552346099, "question_id": 55111614, "link": "https://stackoverflow.com/questions/55111614/load-resource-file-json-in-kotlin-js", "title": "Load resource file (json) in kotlin js", "body": "<p>Given this code, where should I place the file.json to be able to be found in the runtime?</p>\n\n<pre><code>// path: src/main/kotlin/Server.kt\nfun main() {\n  val serviceAccount = require(\"file.json\")\n}\n</code></pre>\n\n<p>I tried place it under src/main/resources/ without luck. I also use Gradle to compile kotlin to js with <code>kotlin2js</code> plugin.</p>\n"}, {"tags": ["java", "kotlin", "jackson"], "comments": [{"owner": {"reputation": 554, "user_id": 5156174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7Na5t.jpg?s=128&g=1", "display_name": "Daryl", "link": "https://stackoverflow.com/users/5156174/daryl"}, "reply_to_user": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "edited": false, "score": 1, "creation_date": 1552342630, "post_id": 55111022, "comment_id": 96965169, "body": "this is valid json"}, {"owner": {"reputation": 27978, "user_id": 981744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJi4S.png?s=128&g=1", "display_name": "Erwin Bolwidt", "link": "https://stackoverflow.com/users/981744/erwin-bolwidt"}, "reply_to_user": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "edited": false, "score": 0, "creation_date": 1552351158, "post_id": 55111022, "comment_id": 96967406, "body": "@LppEdd could you elaborate? I don&#39;t see anything invalid about the json on the question."}, {"owner": {"reputation": 16481, "user_id": 1392277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yJUSK.jpg?s=128&g=1", "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd"}, "reply_to_user": {"reputation": 27978, "user_id": 981744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJi4S.png?s=128&g=1", "display_name": "Erwin Bolwidt", "link": "https://stackoverflow.com/users/981744/erwin-bolwidt"}, "edited": false, "score": 0, "creation_date": 1552351272, "post_id": 55111022, "comment_id": 96967439, "body": "@ErwinBolwidt I was referring to the first example. But I was wrong anyway. Don&#39;t mind my comment. I got confused with { and ["}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1552375791, "post_id": 55111022, "comment_id": 96973893, "body": "That&#39;s just what <code>WRAPPER_ARRAY</code> does: &quot;a 2-element JSON array: first element is the serialized type identifier, and second element the serialized POJO as JSON Object&quot;. Try <code>PROPERTY</code> instead (not an answer because I can&#39;t check it at the moment)."}, {"owner": {"reputation": 31251, "user_id": 51591, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/TsvFC.jpg?s=128&g=1", "display_name": "Micha\u0142 Ziober", "link": "https://stackoverflow.com/users/51591/micha%c5%82-ziober"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1552381162, "post_id": 55111022, "comment_id": 96976548, "body": "@AlexeyRomanov, it does not work for <code>PROPERTY</code> as well, probably custom serialiser / deserialiser should be introduced."}], "owner": {"reputation": 554, "user_id": 5156174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7Na5t.jpg?s=128&g=1", "display_name": "Daryl", "link": "https://stackoverflow.com/users/5156174/daryl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552342578, "creation_date": 1552341423, "last_edit_date": 1552342578, "question_id": 55111022, "link": "https://stackoverflow.com/questions/55111022/deserialize-array-based-polymorphic-json-in-jackson", "title": "Deserialize array based polymorphic json in Jackson", "body": "<p>I have a json array that contains child objects:</p>\n\n<pre><code>[\n  [\"t\", 1, 2, 3],\n  [\"o\", \"a\", \"b\"]\n]\n</code></pre>\n\n<p>Where \"t\" and \"o\" are keys, and other elements in array are data values.\nAnd I want to deserialize this array to classes using these models</p>\n\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.WRAPPER_ARRAY)\n@JsonSubTypes(\n    JsonSubTypes.Type(value = T::class, name = \"t\"),\n    JsonSubTypes.Type(value = O::class, name = \"o\")\n)\n@JsonFormat(shape = JsonFormat.Shape.ARRAY)\nsealed class A\n\ndata class T(val x: Int, val y: Int, val z: Int) : A()\ndata class O(val a: String, val b: String) : A()\n</code></pre>\n\n<p>When I do</p>\n\n<pre><code>println(json.writeValueAsString(T(1, 2, 3)))\n</code></pre>\n\n<p>I receive</p>\n\n<pre><code>[ \"t\", [ 1, 2, 3 ] ]\n</code></pre>\n\n<p>How to flatten nested array to outer array ?</p>\n\n<p>Actual: <code>[\"t\", [ 1, 2, 3 ]]</code></p>\n\n<p>Expected: <code>[\"t\", 1, 2, 3]</code></p>\n"}, {"tags": ["android", "kotlin", "koin"], "answers": [{"tags": [], "owner": {"reputation": 354, "user_id": 3053987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0aa9a3612ff115dc28e39f6c6cf14dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Manu", "link": "https://stackoverflow.com/users/3053987/manu"}, "is_accepted": false, "score": 1, "last_activity_date": 1552468043, "creation_date": 1552468043, "answer_id": 55137978, "question_id": 55110214, "link": "https://stackoverflow.com/questions/55110214/kotlin-1-0-2-room-database/55137978#55137978", "title": "Kotlin 1.0.2 Room Database", "body": "<p>I have tried your code in a test project with sample entities and it worked. Since you haven't posted the actual error description, please do/ensure the following steps and try again. </p>\n\n<p>Add the following dependencies to <code>build.gradle</code></p>\n\n<pre><code>implementation \"androidx.room:room-runtime:$room_version\"\nkapt \"androidx.room:room-compiler:$room_version\"\n</code></pre>\n\n<p>If you are using RxJava for room, then add the following line as well</p>\n\n<pre><code>implementation \"androidx.room:room-rxjava2:$room_version\"\n</code></pre>\n\n<p>Apply the <code>kotlin-kapt</code> plugin</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>clean and build. </p>\n\n<p>If you are still experiencing the problem, consider editing the question with logcat stack trace.</p>\n"}, {"tags": [], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "is_accepted": false, "score": 0, "last_activity_date": 1552495665, "creation_date": 1552495665, "answer_id": 55147173, "question_id": 55110214, "link": "https://stackoverflow.com/questions/55110214/kotlin-1-0-2-room-database/55147173#55147173", "title": "Kotlin 1.0.2 Room Database", "body": "<p>Have you declared a definition for a <code>Context</code> object in other modules? Because your database method needs this one and you are calling <code>get()</code> to resolve it. If not, just change </p>\n\n<p><code>single { UserDatabase.getInstance(get()) }</code> </p>\n\n<p>to </p>\n\n<p><code>single { UserDatabase.getInstance(androidContext()) }</code></p>\n"}], "owner": {"reputation": 11, "user_id": 10089926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ec6SI.jpg?s=128&g=1", "display_name": "DenmaSoft Inc", "link": "https://stackoverflow.com/users/10089926/denmasoft-inc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552495665, "creation_date": 1552337438, "last_edit_date": 1552469597, "question_id": 55110214, "link": "https://stackoverflow.com/questions/55110214/kotlin-1-0-2-room-database", "title": "Kotlin 1.0.2 Room Database", "body": "<p>I'm using koin 1.0.2 to manage dependencies injection but it's not working with room database, it's returning can't create definition for single... Here is my code:</p>\n\n<pre><code>@Database(entities = [UserEntity::class], version = 1, exportSchema = false)\nabstract class UserDatabase : RoomDatabase() {\n\n    abstract fun userDao(): UserDao\n\n    companion object {\n\n        private var INSTANCE: UserDatabase? = null\n\n        fun getInstance(context: Context): UserDatabase {\n            if (INSTANCE == null) {\n\n                INSTANCE = Room.databaseBuilder(\n                        context,\n                        UserDatabase::class.java,\n                        \"user_database\")\n                        .allowMainThreadQueries()\n                        .build()\n            }\n\n            return INSTANCE!!\n        }\n    }\n}\n\n\nval DatabaseModule = module {\n\n   single { UserDatabase.getInstance( get())}\n\n}\n\nclass UserApplication : Application() {\n    override fun onCreate() {\n        super.onCreate()\n        startKoin(getModules())\n    }\n    private fun getModules() = listOf(DatabaseModule, RepositoryModule, ViewModule)\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 0, "last_activity_date": 1560539020, "last_edit_date": 1560539020, "creation_date": 1552385480, "answer_id": 55118915, "question_id": 55108287, "link": "https://stackoverflow.com/questions/55108287/why-the-async-naming-convention-for-functions-returning-deferreds/55118915#55118915", "title": "Why the *Async naming convention for functions returning Deferreds?", "body": "<p>To begin with, a function should almost never return a <code>Deferred</code> that comes from an <code>async</code> block. It is up to the caller to wrap some unit of work into an <code>async</code> while doing other work in the foreground, then <code>await</code> on the async result before returning, and wrap all that code in a <code>coroutineScope</code>.</p>\n\n<p>The intended source of <code>Deferred</code> instances is the adaptation layer between Kotlin coroutines and 3rd-party async APIs. For such calls it does make sense to put <code>Async</code> in the name and even some Java APIs follow this convention. For example, you may have a</p>\n\n<pre><code>fun fetchOrder(id: String): Deferred&lt;Order&gt;\n</code></pre>\n\n<p>and use it as </p>\n\n<pre><code>val orderCancelled = fetchOrder(orderId).isCancelled\n</code></pre>\n\n<p>This code is type-safe and type-correct, it doesn't cause any compiler errors. It looks like it's fetching an order from a remote system and then checking the order status (whether it's cancelled), but what it's actually doing is getting a <code>Deferred&lt;Order&gt;</code> and checking whether the <code>Deferred</code> is cancelled. Because your function name is missing <code>Async</code>, this kind of error is hard to spot.</p>\n\n<p>Yes, you can also request the IDE to give you the return type, but it may take a while before you even suspect what's going on.</p>\n"}, {"tags": [], "owner": {"reputation": 618, "user_id": 8837882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d108e1bf20f5fb35a4609e52bd431b4?s=128&d=identicon&r=PG&f=1", "display_name": "dankito", "link": "https://stackoverflow.com/users/8837882/dankito"}, "is_accepted": false, "score": 0, "last_activity_date": 1584278199, "creation_date": 1584278199, "answer_id": 60693309, "question_id": 55108287, "link": "https://stackoverflow.com/questions/55108287/why-the-async-naming-convention-for-functions-returning-deferreds/60693309#60693309", "title": "Why the *Async naming convention for functions returning Deferreds?", "body": "<p>Deferred doesn't return the actual value but is \"a light-weight non-blocking future that represents a promise to provide a result later\".</p>\n\n<p>As you cannot see this from method name, \"we name such functions with the \"...Async\" suffix to highlight the fact that they only start asynchronous computation and one needs to use the resulting deferred value to get the result\".</p>\n\n<p>So the reader of your code can instantly see that your method is not returning the actual value but additionally has to call <code>await()</code> on it.</p>\n\n<p><br></p>\n\n<p>To your second point about the <code>suspend</code> function:</p>\n\n<p>Usually it's other way round, the <code>xyzAsync()</code> function calls the <code>suspend xyz()</code> function.</p>\n\n<p>As functions returning <code>Deferred</code> can be called from anywhere, not only from suspend functions.</p>\n"}], "owner": {"reputation": 5676, "user_id": 5377, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d7cd2f1a2616bb166c30f43866415cdd?s=128&d=identicon&r=PG", "display_name": "aaronstacy", "link": "https://stackoverflow.com/users/5377/aaronstacy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 526, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1584278199, "creation_date": 1552329342, "question_id": 55108287, "link": "https://stackoverflow.com/questions/55108287/why-the-async-naming-convention-for-functions-returning-deferreds", "title": "Why the *Async naming convention for functions returning Deferreds?", "body": "<p>Intellij has an inspection (i.e. lint check) that tells you functions that return <code>Deferred</code> should be named something ending in <code>Async</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/q77q4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/q77q4.png\" alt=\"enter image description here\"></a></p>\n\n<p>Naming conventions like these make sense to me in dynamically typed languages. But Kotlin has such a nice type-checker and ecosystem of tooling, so why rely on the convention?</p>\n\n<p>Especially because Kotlin coroutines bake <a href=\"https://medium.com/@elizarov/structured-concurrency-722d765aa952\" rel=\"noreferrer\">structured concurrency</a> in, the function will probably also take a <code>CoroutineScope</code> parameter, which would serve the same visual cue at the call site:</p>\n\n<pre><code>suspend fun doStuff() = coroutineScope {\n  doStuffAsync(this /* CoroutineScope */).await()\n  //...\n}\n</code></pre>\n\n<p>As a side note, I understand the inspection's message that you'd rarely want a function that returns a <code>Deferred</code> instead of a <code>suspend</code> function. That's not my question. My question assumes that you know what you're doing and you want a <code>Deferred</code>.</p>\n"}]