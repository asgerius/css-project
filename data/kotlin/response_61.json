[{"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 4880252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50a0ed4a78ba20acb9f41170f25a740e?s=128&d=identicon&r=PG&f=1", "display_name": "AA A", "link": "https://stackoverflow.com/users/4880252/aa-a"}, "edited": false, "score": 2, "creation_date": 1457554950, "post_id": 35901491, "comment_id": 59464007, "body": "That&#39;s too bad. Strange that the spread operator exists in such a limited fashion."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5661440"}, "is_accepted": true, "score": 16, "last_activity_date": 1457553709, "creation_date": 1457553709, "answer_id": 35901491, "question_id": 35901164, "link": "https://stackoverflow.com/questions/35901164/is-it-possible-to-use-destructuring-in-function-arguments/35901491#35901491", "title": "Is it possible to use destructuring in function arguments?", "body": "<p>No, this is possible only for arrays and vararg-functions</p>\n\n<pre><code>val foo = arrayOf(1, 2, 3)\nval bar = arrayOf(0, *foo, 4)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": false, "score": 11, "last_activity_date": 1515966925, "last_edit_date": 1515966925, "creation_date": 1457595009, "answer_id": 35910201, "question_id": 35901164, "link": "https://stackoverflow.com/questions/35901164/is-it-possible-to-use-destructuring-in-function-arguments/35910201#35910201", "title": "Is it possible to use destructuring in function arguments?", "body": "<p>Adding to the answer by @Ivan, here are the related issues:</p>\n\n<p>1) spread operator for non-vararg arguments in function calls:</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/KT-6732\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-6732</a></p>\n\n<p>2) destructuring for lambda arguments:</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/KT-5828\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-5828</a></p>\n\n<p>You can vote for them.</p>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>Destructuring for lambda arguments was implemented in Kotlin 1.1.</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 2032768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/528b148b56e3ec27281d6c4ebff8d1ec?s=128&d=identicon&r=PG", "display_name": "nxdrvr", "link": "https://stackoverflow.com/users/2032768/nxdrvr"}, "edited": false, "score": 0, "creation_date": 1538067158, "post_id": 35915651, "comment_id": 92023376, "body": "<code>fun &lt;A, B, R&gt; ((A, B) -&gt; R).spread(p:Pair&lt;A, B&gt;) = invoke(p.first, p.second)</code> to pass function which take single pair arg, but actualy two <code>::myFunc::spread</code>"}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": false, "score": 2, "last_activity_date": 1457610498, "creation_date": 1457610498, "answer_id": 35915651, "question_id": 35901164, "link": "https://stackoverflow.com/questions/35901164/is-it-possible-to-use-destructuring-in-function-arguments/35915651#35915651", "title": "Is it possible to use destructuring in function arguments?", "body": "<p>You could define an extension function to spread the arguments of the <code>Pair</code>. Like this:</p>\n\n<pre><code>fun &lt;A, B, R&gt; Pair&lt;A, B&gt;.spread(f: (A, B) -&gt; R) = f(first, second)\n\nfun add(a: Int, b: Int) = a + b\n\nfun main(args: Array&lt;String&gt;) {\n    println(Pair(1, 2).spread(::add))\n}\n</code></pre>\n\n<p>This prints 3.</p>\n"}], "owner": {"reputation": 328, "user_id": 4880252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50a0ed4a78ba20acb9f41170f25a740e?s=128&d=identicon&r=PG&f=1", "display_name": "AA A", "link": "https://stackoverflow.com/users/4880252/aa-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5596, "favorite_count": 0, "accepted_answer_id": 35901491, "answer_count": 3, "score": 12, "last_activity_date": 1515966925, "creation_date": 1457552623, "question_id": 35901164, "link": "https://stackoverflow.com/questions/35901164/is-it-possible-to-use-destructuring-in-function-arguments", "title": "Is it possible to use destructuring in function arguments?", "body": "<p>Kotlin supports destructuring declarations: </p>\n\n<pre><code>val (a, b) = Pair(1,2)\n</code></pre>\n\n<p>This is similar to Python's iterable unpacking:</p>\n\n<pre><code>a, b = (1, 2)\n</code></pre>\n\n<p>Python also has a splat/spread operator that allows you to perform a similar operation with function arguments:</p>\n\n<pre><code>def f(a, b): pass\npair = (1,2)\nf(*pair)\n</code></pre>\n\n<p>Does kotlin have a similar ability? Obviously, you can unpack the structure manually:</p>\n\n<pre><code>f(pair.component1(), pair.component2())\n</code></pre>\n\n<p>But that's clunky. Is there a way to do that more elegantly? I don't see anything in the <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"noreferrer\">docs on the subject</a>.</p>\n"}, {"tags": ["java", "android", "android-recyclerview", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 4, "last_activity_date": 1457552244, "creation_date": 1457552244, "answer_id": 35901021, "question_id": 35898999, "link": "https://stackoverflow.com/questions/35898999/how-to-extend-from-an-innerclass-in-kotlin/35901021#35901021", "title": "How to extend from an InnerClass in kotlin", "body": "<p>The <code>RecyclerView.ViewHolder</code> <a href=\"http://developer.android.com/reference/android/support/v7/widget/RecyclerView.ViewHolder.html#RecyclerView.ViewHolder(android.view.View)\" rel=\"nofollow\"><code>constructor</code></a> requires an item view passed in:</p>\n\n<pre><code>public RecyclerView.ViewHolder (View itemView)\n</code></pre>\n\n<p>You have to pass a base class constructor parameter from derived class i.e:</p>\n\n<pre><code>class BindingViewHolder&lt;T : ViewDataBinding&gt;(binding:T) \n    : RecyclerView.ViewHolder(binding.root)\n</code></pre>\n"}], "owner": {"reputation": 4324, "user_id": 1259923, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/eSrTO.png?s=128&g=1", "display_name": "Eefret", "link": "https://stackoverflow.com/users/1259923/eefret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 1, "accepted_answer_id": 35901021, "answer_count": 1, "score": 2, "last_activity_date": 1457552244, "creation_date": 1457545996, "last_edit_date": 1457551428, "question_id": 35898999, "link": "https://stackoverflow.com/questions/35898999/how-to-extend-from-an-innerclass-in-kotlin", "title": "How to extend from an InnerClass in kotlin", "body": "<p>Basically what I want is something like this in kotlin:</p>\n\n<pre><code>public class BindingViewHolder&lt;T extends ViewDataBinding&gt; extends RecyclerView.ViewHolder {}\n\n//it should be:\n\npublic class BindingViewHolder&lt;T: ViewDataBinding&gt; :\n       RecyclerView.ViewHolder() {}\n</code></pre>\n\n<p>I'm using extending java classes so I don't know if this is possible, Android Studio tell me that the type is expected but neither writing the type inside &lt;> or inside () it works.</p>\n"}, {"tags": ["android", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 2289, "user_id": 1323374, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YpDz1.jpg?s=128&g=1", "display_name": "Ninja", "link": "https://stackoverflow.com/users/1323374/ninja"}, "edited": false, "score": 0, "creation_date": 1457499904, "post_id": 35883215, "comment_id": 59429128, "body": "the information you give is not enough,please give more about what sucks"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457501398, "post_id": 35883215, "comment_id": 59429727, "body": "can you get a fuller strack trace from gradle?  Use the option <code>-s</code> or <code>-S</code> (full) to see the full trace in case that is important."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457501444, "post_id": 35883215, "comment_id": 59429743, "body": "did you try   <code>preDexLibraries = false</code> in <code>dexOptions</code>?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457501490, "post_id": 35883215, "comment_id": 59429757, "body": "what dependencies are you including from the <code>libs</code> dir?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457501552, "post_id": 35883215, "comment_id": 59429776, "body": "You mention <code>SetStat</code> but nothing in the error message does, did you leave something out of your error messages?  If so, that would be important to add back to the question."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457501673, "post_id": 35883215, "comment_id": 59429817, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/33717886/errorexecution-failed-for-task-apptransformclasseswithdexfordebug\">Error:Execution failed for task &#39;:app:transformClassesWithDexForDebug&#39;</a>"}, {"owner": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1457501919, "post_id": 35883215, "comment_id": 59429907, "body": "call <code>compile &#39;com.android.support:appcompat-v7:23.1.0&#39;</code> Then <code>clean-rebuild</code> your project."}, {"owner": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1457502045, "post_id": 35883215, "comment_id": 59429959, "body": "call <code>compile &#39;org.jetbrains.anko:anko-sdk15:0.8.3&#39;</code> instead of yours <code>sdk23:0.8.+</code>"}, {"owner": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1457502123, "post_id": 35883215, "comment_id": 59429986, "body": "<code>compile &#39;org.jetbrains.anko:anko-sdk15:0.8.3&#39; &#47;&#47; sdk19, sdk21, sdk23 are also available     compile &#39;org.jetbrains.anko:anko-support-v4:0.8.3&#39; &#47;&#47; In case you need support-v4 bindings     compile &#39;org.jetbrains.anko:anko-appcompat-v7:0.8.3&#39; &#47;&#47; For appcompat-v7 bindings</code>"}, {"owner": {"reputation": 21, "user_id": 5551602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WeUPh.png?s=128&g=1", "display_name": "Ilya Khegay", "link": "https://stackoverflow.com/users/5551602/ilya-khegay"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457950992, "post_id": 35883215, "comment_id": 59622548, "body": "@JaysonMinard, tried <code>preDexLibraries = false</code>, didn&#39;t change anything.   <code>libs</code> is empty right now.   <code>SetStat</code> isn&#39;t even used in the code, I just noticed that build finishes only if I comment that class    @IntelliJAmiya, tried these dependencies. Didn&#39;t change anything"}], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1457501638, "post_id": 35883591, "comment_id": 59429800, "body": "Can you clarify this answer, it isn&#39;t clear what you are saying.  &quot;are two time&quot; meaning they are repeated in the list of dependencies?  &quot;perform multiple task&quot; in what, gradle tasks, some other tasks?"}, {"owner": {"reputation": 629, "user_id": 5210197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h89Vk.jpg?s=128&g=1", "display_name": "Nik Patel", "link": "https://stackoverflow.com/users/5210197/nik-patel"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457501802, "post_id": 35883591, "comment_id": 59429872, "body": "yes.. they are repeated..so remove one by one to avoid duplication dependencies"}], "tags": [], "owner": {"reputation": 629, "user_id": 5210197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h89Vk.jpg?s=128&g=1", "display_name": "Nik Patel", "link": "https://stackoverflow.com/users/5210197/nik-patel"}, "is_accepted": false, "score": -1, "last_activity_date": 1457501164, "creation_date": 1457501164, "answer_id": 35883591, "question_id": 35883215, "link": "https://stackoverflow.com/questions/35883215/cant-build-android-app-with-kotlin-with-gradle-comand-java-exe-finished-w/35883591#35883591", "title": "Can&#39;t build Android app (with Kotlin) with Gradle: &quot;comand &#39;java.exe&#39; finished with non-zero exit value 1&quot;", "body": "<ul>\n<li><p>One of your dependencies are two time.i.e. means single dependency can perform multiple task.. </p></li>\n<li><p>you have to check removing one by one dependencies.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5551602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WeUPh.png?s=128&g=1", "display_name": "Ilya Khegay", "link": "https://stackoverflow.com/users/5551602/ilya-khegay"}, "is_accepted": false, "score": 0, "last_activity_date": 1458201886, "creation_date": 1458201886, "answer_id": 36054714, "question_id": 35883215, "link": "https://stackoverflow.com/questions/35883215/cant-build-android-app-with-kotlin-with-gradle-comand-java-exe-finished-w/36054714#36054714", "title": "Can&#39;t build Android app (with Kotlin) with Gradle: &quot;comand &#39;java.exe&#39; finished with non-zero exit value 1&quot;", "body": "<p>Nevermind, it was just a bug of Android Studio 2.0. Downgrade to stable version helped</p>\n"}], "owner": {"reputation": 21, "user_id": 5551602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WeUPh.png?s=128&g=1", "display_name": "Ilya Khegay", "link": "https://stackoverflow.com/users/5551602/ilya-khegay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 950, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1458201886, "creation_date": 1457499435, "last_edit_date": 1457959471, "question_id": 35883215, "link": "https://stackoverflow.com/questions/35883215/cant-build-android-app-with-kotlin-with-gradle-comand-java-exe-finished-w", "title": "Can&#39;t build Android app (with Kotlin) with Gradle: &quot;comand &#39;java.exe&#39; finished with non-zero exit value 1&quot;", "body": "<p>I'm writing Android app using Kotlin and Anko. Everything was alright, until I created a couple of quite complex classes. Now during build Gradle gives me</p>\n\n<blockquote>\n  <p>Dexing C:\\Programming\\AndroidStudioProjects\\ListDungeon\\app\\build\\intermediates\\transforms\\instantRunSlicer\\dev\\debug\\jars\\1\\5\\main_sliceb.jar took 1050<br>\n  :app:transformClassesWithDexForDevDebug FAILED<br>\n  FAILURE: Build failed with an exception.</p>\n  \n  <p>What went wrong:<br>\n  Execution failed for task ':app:transformClassesWithDexForDevDebug'.<br>\n  com.android.build.api.transform.TransformException: java.lang.RuntimeException: com.android.ide.common.process.ProcessException: java.util.concurrent.ExecutionException: com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_31\\bin\\java.exe'' finished with non-zero exit value 1</p>\n</blockquote>\n\n<p>I tried some things i googled on this error  </p>\n\n<ul>\n<li>Clean - Invalidate caches - Rebuild</li>\n<li>multiDexEnabled true</li>\n<li>javaMaxHeapSize \"4g\"</li>\n</ul>\n\n<p>And nothing works</p>\n\n<p>Also I tried to remove that class (but I really need it). Everything compiled but crashed with ClassNotFoundException on launch</p>\n\n<hr>\n\n<p>That class</p>\n\n<pre><code>open class SetStat&lt;T&gt; protected constructor (override val default: Set&lt;T&gt; = setOf&lt;T&gt;()): Stat&lt;Set&lt;T&gt;&gt;(default)\n</code></pre>\n\n<p>even without any content causes build failure during dexing.  </p>\n\n<blockquote>\n  <p>:app:transformClassesWithDexForDevDebug FAILED\n  ...\n  Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_31\\bin\\java.exe'' finished with non-zero exit value 1</p>\n</blockquote>\n\n<p>My build.gradle file:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.2\"\n    defaultConfig {\n        applicationId \"com.gmail.ivkhegay.listdungeon\"\n        minSdkVersion 16\n        targetSdkVersion 23\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n    dexOptions {\n        javaMaxHeapSize \"4g\"\n        incremental true\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_7\n        targetCompatibility JavaVersion.VERSION_1_7\n    }\n    productFlavors {\n        dev {\n            minSdkVersion 23\n        }\n        prod {\n            minSdkVersion 16\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:multidex:1.0.1'\n    compile 'com.android.support:appcompat-v7:23.2.0'\n    compile 'org.jetbrains.kotlin:kotlin-stdlib:1.0.0'\n    compile 'org.jetbrains.anko:anko-sdk23:0.8.+'\n    compile 'org.jetbrains.anko:anko-support-v4:0.8'\n    compile 'org.jetbrains.anko:anko-appcompat-v7:0.8'\n}\n</code></pre>\n\n<hr>\n\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:transformClassesWithDexForDevDebug'.\n&gt; com.android.build.api.transform.TransformException: com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_31\\bin\\java.exe'' finished with non-zero exit value 1\n\n* Try:\nRun with --info or --debug option to get more log output.\n\n* Exception is:\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:transformClassesWithDexForDevDebug'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:69)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:203)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:185)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:66)\n    at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:50)\n    at org.gradle.execution.taskgraph.ParallelTaskPlanExecutor.process(ParallelTaskPlanExecutor.java:47)\n    at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:110)\n    at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\n    at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\n    at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n    at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\n    at org.gradle.initialization.DefaultGradleLauncher$4.run(DefaultGradleLauncher.java:154)\n    at org.gradle.internal.Factories$1.create(Factories.java:22)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:52)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:151)\n    at org.gradle.initialization.DefaultGradleLauncher.access$200(DefaultGradleLauncher.java:32)\n    at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:99)\n    at org.gradle.initialization.DefaultGradleLauncher$1.create(DefaultGradleLauncher.java:93)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:62)\n    at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:93)\n    at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:82)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:94)\n    at org.gradle.tooling.internal.provider.runner.BuildModelActionRunner.run(BuildModelActionRunner.java:46)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.tooling.internal.provider.runner.SubscribableBuildActionRunner.run(SubscribableBuildActionRunner.java:58)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:43)\n    at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:28)\n    at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:78)\n    at org.gradle.launcher.exec.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:48)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:52)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n    at org.gradle.util.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.health.DaemonHealthTracker.execute(DaemonHealthTracker.java:47)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:66)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.health.HintGCAfterBuild.execute(HintGCAfterBuild.java:41)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:246)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)\n    at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)\nCaused by: java.lang.RuntimeException: com.android.build.api.transform.TransformException: com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_31\\bin\\java.exe'' finished with non-zero exit value 1\n    at com.android.builder.profile.Recorder$Block.handleException(Recorder.java:54)\n    at com.android.builder.profile.ThreadRecorder$1.record(ThreadRecorder.java:57)\n    at com.android.builder.profile.ThreadRecorder$1.record(ThreadRecorder.java:47)\n    at com.android.build.gradle.internal.pipeline.TransformTask.transform(TransformTask.java:173)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:75)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.doExecute(AnnotationProcessingTaskFactory.java:244)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:220)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$IncrementalTaskAction.execute(AnnotationProcessingTaskFactory.java:231)\n    at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:209)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)\n    ... 70 more\nCaused by: com.android.build.api.transform.TransformException: com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_31\\bin\\java.exe'' finished with non-zero exit value 1\n    at com.android.build.gradle.internal.transforms.DexTransform.transform(DexTransform.java:422)\n    at com.android.build.gradle.internal.pipeline.TransformTask$3.call(TransformTask.java:178)\n    at com.android.build.gradle.internal.pipeline.TransformTask$3.call(TransformTask.java:174)\n    at com.android.builder.profile.ThreadRecorder$1.record(ThreadRecorder.java:55)\n    ... 79 more\nCaused by: com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_31\\bin\\java.exe'' finished with non-zero exit value 1\n    at com.android.build.gradle.internal.process.GradleProcessResult.assertNormalExitValue(GradleProcessResult.java:43)\n    at com.android.builder.core.AndroidBuilder.runDexer(AndroidBuilder.java:1451)\n    at com.android.builder.core.AndroidBuilder.convertByteCode(AndroidBuilder.java:1389)\n    at com.android.build.gradle.internal.transforms.DexTransform.transform(DexTransform.java:250)\n    ... 82 more\nCaused by: org.gradle.process.internal.ExecException: Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_31\\bin\\java.exe'' finished with non-zero exit value 1\n    at org.gradle.process.internal.DefaultExecHandle$ExecResultImpl.assertNormalExitValue(DefaultExecHandle.java:367)\n    at com.android.build.gradle.internal.process.GradleProcessResult.assertNormalExitValue(GradleProcessResult.java:41)\n    ... 85 more\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1457472525, "post_id": 35878311, "comment_id": 59420071, "body": "You can simply add <code>?: Unit</code> at the end if you want a not null return type."}, {"owner": {"reputation": 564, "user_id": 2135888, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cdb5176bc71d4b5b2a64644ef05cdb25?s=128&d=identicon&r=PG", "display_name": "Lubos Mudrak", "link": "https://stackoverflow.com/users/2135888/lubos-mudrak"}, "edited": false, "score": 0, "creation_date": 1457473167, "post_id": 35878311, "comment_id": 59420384, "body": "<code>fun showProgressView() = ultraRecyclerView?.let { it.showProgressBar() }</code> ?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 564, "user_id": 2135888, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cdb5176bc71d4b5b2a64644ef05cdb25?s=128&d=identicon&r=PG", "display_name": "Lubos Mudrak", "link": "https://stackoverflow.com/users/2135888/lubos-mudrak"}, "edited": false, "score": 0, "creation_date": 1457553843, "post_id": 35878311, "comment_id": 59463395, "body": "@XOOLOOO that still returns <code>Unit?</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3121, "user_id": 3699808, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f0af2052e664e9f832421cb56590b935?s=128&d=identicon&r=PG", "display_name": "mhlz", "link": "https://stackoverflow.com/users/3699808/mhlz"}, "edited": false, "score": 1, "creation_date": 1457505195, "post_id": 35880524, "comment_id": 59431190, "body": "Is there ever a case where the distinction between <code>Unit</code> and <code>Unit?</code> is relevant though? I can&#39;t really think of anything right now, but maybe I&#39;m overlooking something. To me it seems like the compiler should automatically infer the return type as <code>Unit</code>."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 3121, "user_id": 3699808, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f0af2052e664e9f832421cb56590b935?s=128&d=identicon&r=PG", "display_name": "mhlz", "link": "https://stackoverflow.com/users/3699808/mhlz"}, "edited": false, "score": 1, "creation_date": 1457530896, "post_id": 35880524, "comment_id": 59447203, "body": "@mhlz that would be a discussion for somewhere else, <a href=\"https://youtrack.jetbrains.com\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com</a>, slack channel, or discussion forum.  Unit is not so special and the code is ambiguous, so I personally would prefer to report it as an error when used as an expression with <code>Unit?</code> as the result.  But it isn&#39;t that big of a deal to me either way, and is accurate what it is doing."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1457553006, "post_id": 35880524, "comment_id": 59462896, "body": "Does <code>fun showProgressView(): Unit = ultraRecyclerView?.showProgressBar()</code> actually work for anyone? I get &quot;Type mismatch. Required: kotlin.Unit Found: kotlin.Unit?&quot;."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 7, "last_activity_date": 1457554813, "last_edit_date": 1457554813, "creation_date": 1457481994, "answer_id": 35880524, "question_id": 35878311, "link": "https://stackoverflow.com/questions/35878311/how-to-define-a-oneline-function-calling-a-nullable-variable-function/35880524#35880524", "title": "How to define a oneline function calling a nullable variable function", "body": "<p>If you use the short expression form of a function, the inferred result type of the expression determines the function return type.  If that is a platform type from Java, it could be nullable.  If it is a Kotlin type then it will know the correct nullability.  </p>\n\n<p>But since you use the safe operator <code>?.</code> you are saying for sure it could be nullable.  And if the result is <code>null</code> or <code>Unit</code> then that gives the inferred result type of <code>Unit?</code> </p>\n\n<p>Which is odd, but is exactly what you are saying.  Therefore, either use a normal function body with <code>{ .. }</code> or give the function an explicit return type if possible.</p>\n\n<pre><code>fun showProgressView(): Unit { ultraRecyclerView?.showProgressBar() }\n</code></pre>\n\n<p>You can also erase the nullability, by creating an extension function on <code>Unit?</code>:</p>\n\n<pre><code>fun Unit?.void() = Unit\n</code></pre>\n\n<p>And use it whenever you want to fix the return type:</p>\n\n<pre><code>fun showProgressView() = ultraRecyclerView?.showProgressBar().void()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 3, "last_activity_date": 1457553192, "last_edit_date": 1495539916, "creation_date": 1457553192, "answer_id": 35901325, "question_id": 35878311, "link": "https://stackoverflow.com/questions/35878311/how-to-define-a-oneline-function-calling-a-nullable-variable-function/35901325#35901325", "title": "How to define a oneline function calling a nullable variable function", "body": "<p>IntelliJ IDEA / Android Studio do not appear to have a setting to keep the style of a block body function on a single line. Even so, you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run.html\" rel=\"nofollow noreferrer\"><code>run</code></a> to get around this:</p>\n\n<pre><code>fun showProgressView() = run&lt;Unit&gt; { ultraRecyclerView?.showProgressBar() }\n</code></pre>\n\n<p>Normally you do not need to add explicit type arguments to <code>run</code> but in this case providing them gives you the desired method signature (return type of <code>Unit</code> and not <code>Unit?</code>).</p>\n\n<p>Note: This answer is adapted from a <a href=\"https://stackoverflow.com/questions/35602364/why-assignments-are-not-statements#comment58892306_35602364\">comment</a> I gave to <a href=\"https://stackoverflow.com/q/35602364/3255152\">why assignments are not statements</a>.</p>\n"}], "owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2713, "favorite_count": 0, "accepted_answer_id": 35880524, "answer_count": 2, "score": 3, "last_activity_date": 1457554813, "creation_date": 1457472262, "last_edit_date": 1457472960, "question_id": 35878311, "link": "https://stackoverflow.com/questions/35878311/how-to-define-a-oneline-function-calling-a-nullable-variable-function", "title": "How to define a oneline function calling a nullable variable function", "body": "<p>If I have something like:</p>\n\n<p><code>fun showProgressView() = ultraRecyclerView?.showProgressBar()\n</code></p>\n\n<p>it says that it returns <code>Unit?</code> and not <code>Unit</code> (edited)</p>\n\n<p>-----EDIT-----</p>\n\n<p>One way can be\n<code>fun showProgressView() = ultraRecyclerView?.showProgressBar() ?: Unit\n</code>\nbut it looks not right for me.</p>\n\n<p>Another way:\n<code>fun showProgressView() { ultraRecyclerView?.showProgressBar() }\n</code>\nBut I cant find a way for android studio maintain that format.</p>\n"}, {"tags": ["lambda", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1457467828, "post_id": 35875779, "comment_id": 59417487, "body": "you can use <code>run{}</code> here instead of calling <code>invoke()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 29521, "user_id": 1950649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb5YJ.jpg?s=128&g=1", "display_name": "Vladimir Mironov", "link": "https://stackoverflow.com/users/1950649/vladimir-mironov"}, "is_accepted": false, "score": 6, "last_activity_date": 1457464432, "creation_date": 1457464432, "answer_id": 35876029, "question_id": 35875779, "link": "https://stackoverflow.com/questions/35875779/multi-line-complex-property-initializer-without-lambda/35876029#35876029", "title": "Multi-line/complex property initializer without lambda", "body": "<p>There is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\"><code>apply</code></a> extension function which is perfect for such use case. Using this function your code can be rewritten like:</p>\n\n<pre><code>private val properties = Properties().apply {\n  load(Application::class.java.getResourceAsStream(\"application.properties\"))\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 7, "last_activity_date": 1457482634, "creation_date": 1457482634, "answer_id": 35880618, "question_id": 35875779, "link": "https://stackoverflow.com/questions/35875779/multi-line-complex-property-initializer-without-lambda/35880618#35880618", "title": "Multi-line/complex property initializer without lambda", "body": "<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\" rel=\"noreferrer\"><code>apply</code></a> if your instance of the thing you are creating can be allocated at the start and then you want to modify it.  Use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\" rel=\"noreferrer\"><code>let()</code></a> when you have one thing, but want to turn it into another.  You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run.html\" rel=\"noreferrer\"><code>run()</code></a> when you are starting with nothing, and building something to return.</p>\n\n<p>Using <strong>apply</strong>:</p>\n\n<pre><code>private val properties = Properties().apply {\n   load(Application::class.java.getResourceAsStream(\"application.properties\")) \n}\n</code></pre>\n\n<p>or using <strong>let</strong>: (not the best example, but you get the point)</p>\n\n<pre><code>private val properties = Application::class.java.getResourceAsStream(\"application.properties\")\n    .let { stream -&gt; \n              val props = Properties() \n              props.load(stream) \n              props\n         }\n</code></pre>\n\n<p>or using <strong>run</strong>:</p>\n\n<pre><code>private val properties = run {\n    val properties = Properties()\n    val stream = Application::class.java.getResourceAsStream(\"application.properties\")\n    properties.load(stream)\n    properties\n}\n</code></pre>\n\n<p>Some libraries create variations of these and call them things like <a href=\"https://github.com/kohesive/klutter/blob/master/core-jdk6/src/main/kotlin/uy/klutter/core/common/Common.kt#L7\" rel=\"noreferrer\"><code>verifiedBy</code></a> or <a href=\"https://github.com/kohesive/klutter/blob/master/core-jdk6/src/main/kotlin/uy/klutter/core/common/Common.kt#L25\" rel=\"noreferrer\"><code>initializedBy</code></a> that basically do the same thing but make it clear the intent.  Create new functions so your code reads the way you want, but also balance that with trying to use stdlib functions since that is consistent with other Kotlin users.</p>\n"}], "owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1076, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1457482634, "creation_date": 1457463655, "question_id": 35875779, "link": "https://stackoverflow.com/questions/35875779/multi-line-complex-property-initializer-without-lambda", "title": "Multi-line/complex property initializer without lambda", "body": "<p>I want to initialize <code>val</code> property but property initializer is complex (contains several lines of code):</p>\n\n<pre><code>private val properties: Properties = {\n    val properties = Properties()\n    val stream = Application::class.java.getResourceAsStream(\"application.properties\")\n    properties.load(stream)\n    properties\n}.invoke()\n</code></pre>\n\n<p>Is it possible to re-write this property initializer without using lambda?</p>\n"}, {"tags": ["reflection", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457483025, "post_id": 35875478, "comment_id": 59424514, "body": "Do you want the erased type without generic info, or the <code>KClass&lt;T&gt;</code>"}, {"owner": {"reputation": 4582, "user_id": 2092870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0398348b6867339df2e7853109846ab?s=128&d=identicon&r=PG", "display_name": "Kre\u0161imir Nesek", "link": "https://stackoverflow.com/users/2092870/kre%c5%a1imir-nesek"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457523425, "post_id": 35875478, "comment_id": 59441908, "body": "In this particular use case, yes, erased type without generic info, but feel free to comment on generic info as well"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 11, "last_activity_date": 1457534414, "last_edit_date": 1457534414, "creation_date": 1457464036, "answer_id": 35875893, "question_id": 35875478, "link": "https://stackoverflow.com/questions/35875478/how-to-get-a-runtime-class-of-a-variable-in-kotlin/35875893#35875893", "title": "How to get a runtime class of a variable in Kotlin?", "body": "<p>As said in the <a href=\"https://kotlinlang.org/docs/reference/reflection.html#interoperability-with-java-reflection\" rel=\"nofollow\">reference</a>, you can use <code>.javaClass.kotlin</code> to get <code>KClass</code> token of an object. Example:</p>\n\n<pre><code>fun printKClass(x: Any) {\n    val c = x.javaClass.kotlin\n    println(c)\n}\n</code></pre>\n\n<p>For any further manipulations with the <code>KClass</code>, you should also add <a href=\"http://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-reflect\" rel=\"nofollow\"><code>kotlin-reflect</code> library</a> as a dependency, since the reflection functionality has been moved out of <code>kotlin-stdlib</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1858, "user_id": 4690711, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-OyIsivw15Ww/AAAAAAAAAAI/AAAAAAAAAWw/wDgQJ3UYMhw/photo.jpg?sz=128", "display_name": "Dave Ford", "link": "https://stackoverflow.com/users/4690711/dave-ford"}, "is_accepted": false, "score": 1, "last_activity_date": 1497039306, "creation_date": 1497039306, "answer_id": 44466048, "question_id": 35875478, "link": "https://stackoverflow.com/questions/35875478/how-to-get-a-runtime-class-of-a-variable-in-kotlin/44466048#44466048", "title": "How to get a runtime class of a variable in Kotlin?", "body": "<p><code>x::class</code> works fine as long you have kotlin-reflect in your classpath.</p>\n"}], "owner": {"reputation": 4582, "user_id": 2092870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0398348b6867339df2e7853109846ab?s=128&d=identicon&r=PG", "display_name": "Kre\u0161imir Nesek", "link": "https://stackoverflow.com/users/2092870/kre%c5%a1imir-nesek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 0, "accepted_answer_id": 35875893, "answer_count": 2, "score": 4, "last_activity_date": 1497039306, "creation_date": 1457462739, "question_id": 35875478, "link": "https://stackoverflow.com/questions/35875478/how-to-get-a-runtime-class-of-a-variable-in-kotlin", "title": "How to get a runtime class of a variable in Kotlin?", "body": "<p>I want to get a reference to a runtime KClass of a variable. I went through documentation on classes and reflection, but the <a href=\"https://kotlinlang.org/docs/reference/reflection.html\" rel=\"nofollow\">documentation</a> seems to only explain how to get a static reference to KClass (e.g. <code>String::class</code> for <code>String</code>)</p>\n\n<p>I need a runtime KClass of a variable. This doesn't seem to compile:</p>\n\n<pre><code>fun test(x: Any) {\n    val klazz = x::class\n} \n</code></pre>\n\n<p>How does one get the <code>KClass</code> of <code>x</code> in the example above?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 4176, "user_id": 1677033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u8V8L.jpg?s=128&g=1", "display_name": "Meiko Rachimow", "link": "https://stackoverflow.com/users/1677033/meiko-rachimow"}, "edited": false, "score": 0, "creation_date": 1457424439, "post_id": 35861968, "comment_id": 59388251, "body": "duplicate? <a href=\"http://stackoverflow.com/questions/13263948/fast-sqrt-in-java-at-the-expense-of-accuracy\" title=\"fast sqrt in java at the expense of accuracy\">stackoverflow.com/questions/13263948/&hellip;</a>"}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1457449011, "post_id": 35861968, "comment_id": 59405160, "body": "It&#39;s not really a duplicate because in Java you can implicitly cast a Float to a Double but in Kotlin there is no implicit casting so interacting with the Java Math library gets real ugly real quick."}], "answers": [{"comments": [{"owner": {"reputation": 582, "user_id": 3637038, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004129686353/picture?type=large", "display_name": "Richard Tyregrim", "link": "https://stackoverflow.com/users/3637038/richard-tyregrim"}, "edited": false, "score": 0, "creation_date": 1457428107, "post_id": 35862151, "comment_id": 59390419, "body": "However there is not a 1:1 relationship between algorithm complexity and performance. An algo might still be the same O-notation order as another, but be slower in execution. For instance, there is only one operation on each, but op A takes longer than op B in the hardware layer for instance..."}, {"owner": {"reputation": 8039, "user_id": 1333292, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bef01696f6edbf2d953946413f68a6e2?s=128&d=identicon&r=PG", "display_name": "ilomambo", "link": "https://stackoverflow.com/users/1333292/ilomambo"}, "reply_to_user": {"reputation": 582, "user_id": 3637038, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004129686353/picture?type=large", "display_name": "Richard Tyregrim", "link": "https://stackoverflow.com/users/3637038/richard-tyregrim"}, "edited": false, "score": 0, "creation_date": 1457428542, "post_id": 35862151, "comment_id": 59390695, "body": "@RichardEriksson Yes, you are correct. In the real world 3 multiplications take 3 times the time of a single multiplication. But unless you are dealing with a lot of operations, the impact on the perceived time should be unnoticeable."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1457437977, "post_id": 35862151, "comment_id": 59396947, "body": "I believe this is not what was the question about"}], "tags": [], "owner": {"reputation": 8039, "user_id": 1333292, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bef01696f6edbf2d953946413f68a6e2?s=128&d=identicon&r=PG", "display_name": "ilomambo", "link": "https://stackoverflow.com/users/1333292/ilomambo"}, "is_accepted": false, "score": 0, "last_activity_date": 1457424672, "creation_date": 1457424672, "answer_id": 35862151, "question_id": 35861968, "link": "https://stackoverflow.com/questions/35861968/an-alternative-to-math-class-for-floats/35862151#35862151", "title": "An alternative to Math class for Floats", "body": "<p>As I understand performance, it is measured by the complexity of the algorithm.<br>\nAn algorithm over an array of n elements, performing 1 operation on each, it is said to be of O(n) complexity.<br>\nThe same algorithm complexity, performing 3 operations on each element is still O(n)<br>\nA fixed operation, like <code>.toFloat</code> or <code>.toDouble()</code> will not affect performance, since those are of O(1) complexity.</p>\n"}, {"tags": [], "owner": {"reputation": 7850, "user_id": 2960788, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/423618eadcdd4a265e38985a911f5c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/2960788/christopher"}, "is_accepted": false, "score": 1, "last_activity_date": 1457426198, "last_edit_date": 1457426198, "creation_date": 1457425762, "answer_id": 35862436, "question_id": 35861968, "link": "https://stackoverflow.com/questions/35861968/an-alternative-to-math-class-for-floats/35862436#35862436", "title": "An alternative to Math class for Floats", "body": "<p>I think there is no problem using the <code>Math</code> class. In earlier Android versions there was a class android.util.FloatMath which handles float arithmetic, but the common Math class is faster now and the class is deprecated.</p>\n\n<blockquote>\n  <p>Historically these methods were faster than the equivalent double-based Math methods. On versions of Android with a JIT they became slower and have since been re-implemented to wrap calls to Math. Math should be used in preference.\n  All methods were removed from the public API in version 23.</p>\n</blockquote>\n\n<p><a href=\"http://developer.android.com/reference/android/util/FloatMath.html\" rel=\"nofollow\">http://developer.android.com/reference/android/util/FloatMath.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457437894, "post_id": 35863052, "comment_id": 59396887, "body": "The only overhead is due to function calls. Use <code>inline</code> if you need exceptional performance in your hot code"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457438532, "post_id": 35863052, "comment_id": 59397330, "body": "for the measurements you use <code>measureTimeNano</code>"}, {"owner": {"reputation": 85, "user_id": 2285491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e627b6c1333b39ab7cafb210b087d2?s=128&d=identicon&r=PG&f=1", "display_name": "jjvr", "link": "https://stackoverflow.com/users/2285491/jjvr"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457450763, "post_id": 35863052, "comment_id": 59406535, "body": "Adding inline, as recommended, 326 and 319 milisecs respectively."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457466990, "post_id": 35863052, "comment_id": 59416998, "body": "well, that proves me right, doesn&#39;t it? If so, could you please mark my answer as helpful, please?"}], "tags": [], "owner": {"reputation": 85, "user_id": 2285491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e627b6c1333b39ab7cafb210b087d2?s=128&d=identicon&r=PG&f=1", "display_name": "jjvr", "link": "https://stackoverflow.com/users/2285491/jjvr"}, "is_accepted": false, "score": 0, "last_activity_date": 1457427753, "creation_date": 1457427753, "answer_id": 35863052, "question_id": 35861968, "link": "https://stackoverflow.com/questions/35861968/an-alternative-to-math-class-for-floats/35863052#35863052", "title": "An alternative to Math class for Floats", "body": "<p>In fact, trying:</p>\n\n<pre><code>var iniTemp = System.currentTimeMillis()\nfor (i in 1..10000000)\n  sqrt(755.369f)\nd((System.currentTimeMillis() - iniTemp).toString())\n</code></pre>\n\n<p>407 milisecs</p>\n\n<p>and:</p>\n\n<pre><code>var iniTemp = System.currentTimeMillis()\nfor (i in 1..10000000)\n  Math.sqrt(755.369f.toDouble()).toFloat()\nd((System.currentTimeMillis() - iniTemp).toString())\n</code></pre>\n\n<p>317 milisecs</p>\n\n<p>both in an older Nexus 7</p>\n\n<p>Thanks</p>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457483080, "post_id": 35866863, "comment_id": 59424541, "body": "the JVM should notice these if they are a hot code-path and inline them for you, there is no gain from manually inlining them bigger than what hotspot would already decide.  On Android, maybe not.  So inline would help in the Android case, less on the JVM outside of Android case."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457507732, "post_id": 35866863, "comment_id": 59432305, "body": "Agreed. The &quot;hotter&quot; the path, the less the gain"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 2, "last_activity_date": 1457438554, "creation_date": 1457438554, "answer_id": 35866863, "question_id": 35861968, "link": "https://stackoverflow.com/questions/35861968/an-alternative-to-math-class-for-floats/35866863#35866863", "title": "An alternative to Math class for Floats", "body": "<p>There should be NO <em>performance problem</em> in using the wrappers. </p>\n\n<p>The performance may be slightly less due to calling those functions (they are statically dispatched, just like any utility methods).</p>\n\n<p>If you use the wrappers in the <strong>hot</strong> code then you can inline them:</p>\n\n<pre><code>inline fun sqrt(x: Float) = Math.sqrt(x.toDouble()).toFloat()\n</code></pre>\n\n<p>For inlined functions the byte-code is No different to the one Java generates. </p>\n"}], "owner": {"reputation": 85, "user_id": 2285491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e627b6c1333b39ab7cafb210b087d2?s=128&d=identicon&r=PG&f=1", "display_name": "jjvr", "link": "https://stackoverflow.com/users/2285491/jjvr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 35866863, "answer_count": 4, "score": 1, "last_activity_date": 1457438554, "creation_date": 1457424027, "question_id": 35861968, "link": "https://stackoverflow.com/questions/35861968/an-alternative-to-math-class-for-floats", "title": "An alternative to Math class for Floats", "body": "<p>Will generate performance problems using functions of this style?:</p>\n\n<pre><code>*fun sqrt(x: Float) = Math.sqrt(x.toDouble()).toFloat()*\n\n*fun cos(angle: Float) = Math.cos(angle.toDouble()).toFloat()*\n\n*fun sin(angle: Float) = Math.sin(angle.toDouble()).toFloat()*\n</code></pre>\n\n<p>for using it so with Floats:</p>\n\n<pre><code>*sqrt(45.0f)*\n\n*cos(1.58f)*\n\n*sin(0.28f)*\n</code></pre>\n\n<p>instead of the much more verbose:</p>\n\n<pre><code>*Math.sqrt(45.0f.toDouble()).toFloat()*\n\n*Math.cos(1.58f.toDouble()).toFloat()*\n\n*Math.sin(0.28f.toDouble()).toFloat()*\n</code></pre>\n\n<p>Greetings and thanks in advance</p>\n"}, {"tags": ["kotlin", "reflection"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1457381673, "post_id": 35851719, "comment_id": 59371955, "body": "Klutter library also has extensions for these comparisons of <code>Class</code> and <code>KClass</code>, as well as to <code>Type</code> and <code>KType</code> which you might encounter with Kotlin reflection.  <a href=\"https://github.com/kohesive/klutter/blob/master/reflect-core-jdk6/src/main/kotlin/uy/klutter/reflect/Types.kt\" rel=\"nofollow noreferrer\">github.com/kohesive/klutter/blob/master/reflect-core-jdk6/sr&zwnj;&#8203;c/&hellip;</a> and more in <a href=\"https://github.com/kohesive/klutter/blob/master/reflect-full-jdk6/src/main/kotlin/uy/klutter/reflect/full/Types.kt\" rel=\"nofollow noreferrer\">github.com/kohesive/klutter/blob/master/reflect-full-jdk6/sr&zwnj;&#8203;c/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1457420886, "post_id": 35852445, "comment_id": 59386560, "body": "wow, I would expect <code>compareTo</code> operator to be overloaded for that"}, {"owner": {"reputation": 29521, "user_id": 1950649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb5YJ.jpg?s=128&g=1", "display_name": "Vladimir Mironov", "link": "https://stackoverflow.com/users/1950649/vladimir-mironov"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457430185, "post_id": 35852445, "comment_id": 59391844, "body": "@voddan you can not define a <code>compareTo</code> operator for partially ordered sets"}, {"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1457434273, "post_id": 35852445, "comment_id": 59394619, "body": "@VladimirMironov I think @voddan mean something like <a href=\"https://gist.github.com/maxd/8f967002343865dd40a7\" rel=\"nofollow noreferrer\">this</a>. As you can see possible to override <code>compareTo</code> and use <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code> operators for compare classes (for example such syntax using in Ruby). I hope kotlin.reflect will have something like this in the future."}, {"owner": {"reputation": 29521, "user_id": 1950649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb5YJ.jpg?s=128&g=1", "display_name": "Vladimir Mironov", "link": "https://stackoverflow.com/users/1950649/vladimir-mironov"}, "reply_to_user": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 1, "creation_date": 1457436151, "post_id": 35852445, "comment_id": 59395788, "body": "@maxd stdlib will never have such operator because it&#39;s just impossible to properly implement <code>compareTo</code> for <code>KClass</code>. Your implementation violates   <code>compareTo</code> contract, because it should never throw."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 0, "creation_date": 1457437738, "post_id": 35852445, "comment_id": 59396798, "body": "@VladimirMironov this contract to never throw out of <code>compareTo</code> exists in Java, but does not in Kotlin (no checked exceptions as a concept). I think the implementation mentioned by @maxd makes sense and violates nothing since it is invisible from Java"}, {"owner": {"reputation": 1715, "user_id": 910095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e96728ed86fffbb7960da7fe34cd47?s=128&d=identicon&r=PG", "display_name": "Nikola Mihajlovi\u0107", "link": "https://stackoverflow.com/users/910095/nikola-mihajlovi%c4%87"}, "edited": false, "score": 2, "creation_date": 1524528419, "post_id": 35852445, "comment_id": 86999780, "body": "There are extensions: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.full/is-superclass-of.html\" rel=\"nofollow noreferrer\">isSuperclassOf</a> <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.full/is-subclass-of.html\" rel=\"nofollow noreferrer\">isSubclassOf</a>. So there is no need to define your own. Make sure to include <code>kotlin-reflect</code> library though"}], "tags": [], "owner": {"reputation": 29521, "user_id": 1950649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb5YJ.jpg?s=128&g=1", "display_name": "Vladimir Mironov", "link": "https://stackoverflow.com/users/1950649/vladimir-mironov"}, "is_accepted": true, "score": 16, "last_activity_date": 1615305989, "last_edit_date": 1615305989, "creation_date": 1457379445, "answer_id": 35852445, "question_id": 35851719, "link": "https://stackoverflow.com/questions/35851719/how-to-compare-classes-and-interfaces/35852445#35852445", "title": "How to compare classes and interfaces?", "body": "<p>Kotlin reflection doesn't have an API for retrieving information about <code>KClass</code> hierarchy, so the only way to check if one <code>KClass</code> is superclass or subclass of another <code>KClass</code> is to compare corresponding java classes:</p>\n<pre><code>interface IB {}\ninterface IC : IB {}\n\nopen class A {}\nopen class B : A() {}\nopen class C : B(), IC {}\n\nfun main(args: Array&lt;String&gt;) {\n  if (B::class == B::class) { println(&quot;B class is equal to B class&quot;) }\n  if (IB::class == IB::class) { println(&quot;IB interface is equal to IB interface&quot;) }\n\n  if (A::class.java.isAssignableFrom(B::class.java)) { println(&quot;A class is parent of B class&quot;) }\n  if (A::class.java.isAssignableFrom(C::class.java)) { println(&quot;A class is superclass of C class&quot;) }\n\n  if (IC::class.java.isAssignableFrom(C::class.java)) { println(&quot;C class implements IC interface&quot;) }\n  if (IB::class.java.isAssignableFrom(IC::class.java)) { println(&quot;IC interface implements IB interface&quot;) }\n}\n</code></pre>\n<p><strong>UPDATE:</strong>\nYou can also define two extension functions that will make this kind of checks a bit nicer:</p>\n<pre><code>inline fun &lt;reified L : Any, reified R : Any&gt; isSubClassOf(): Boolean {\n  return R::class.java.isAssignableFrom(L::class.java)\n}\n\ninline fun &lt;reified L : Any, reified R : Any&gt; isSuperClassOf(): Boolean {\n  return L::class.java.isAssignableFrom(R::class.java)\n}\n\nfun main(args: Array&lt;String&gt;) {\n  if (isSubClassOf&lt;B, B&gt;()) { println(&quot;B class is equal to B class&quot;) }\n  if (isSubClassOf&lt;IB, IB&gt;()) { println(&quot;IB interface is equal to IB interface&quot;) }\n\n  if (isSuperClassOf&lt;A, B&gt;()) { println(&quot;A class is parent of B class&quot;) }\n  if (isSuperClassOf&lt;A, C&gt;()) { println(&quot;A class is superclass of C class&quot;) }\n\n  if (isSubClassOf&lt;C, IC&gt;()) { println(&quot;C class implements IC interface&quot;) }\n  if (isSubClassOf&lt;IC, IB&gt;()) { println(&quot;IC interface implements IB interface&quot;) }\n}\n</code></pre>\n"}], "owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9071, "favorite_count": 2, "accepted_answer_id": 35852445, "answer_count": 1, "score": 16, "last_activity_date": 1615305989, "creation_date": 1457377038, "last_edit_date": 1615305870, "question_id": 35851719, "link": "https://stackoverflow.com/questions/35851719/how-to-compare-classes-and-interfaces", "title": "How to compare classes and interfaces?", "body": "<p>Can anybody explain me how to compare <code>KClass</code>es and interfaces among themselves? I know how to check if classes or interfaces are equal but I don't understand how to check if A class is a superclass of B class, etc.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>interface IB {}\ninterface IC : IB {}\n\nopen class A {}\nopen class B : A() {}\nopen class C : B(), IC {}\n\nfun main(args: Array&lt;String&gt;) {\n  if (B::class == B::class) { println(&quot;B class is equal to B class&quot;) }\n  if (IB::class == IB::class) { println(&quot;IB interface is equal to IB interface&quot;) }\n    \n  if (A::class ??? B::class) { println(&quot;A class is parent of B class&quot;) }\n  if (A::class ??? C::class) { println(&quot;A class is superclass of C class&quot;) }\n    \n  if (C::class ??? IC) { println(&quot;C class implements IC interface&quot;) }\n  if (IC ??? IB) { println(&quot;IC interface implements IB interface&quot;) }\n}\n</code></pre>\n"}, {"tags": ["android", "rx-java", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 5747, "user_id": 1052504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d24c555de0ab090f0b822155f31affe4?s=128&d=identicon&r=PG", "display_name": "jturolla", "link": "https://stackoverflow.com/users/1052504/jturolla"}, "edited": false, "score": 0, "creation_date": 1478133089, "post_id": 35848383, "comment_id": 68035494, "body": "you should use <code>@Path</code> instead of <code>@Part</code>"}], "answers": [{"tags": [], "owner": {"reputation": 23425, "user_id": 509967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3365b9293640542789b8a3e4a009356d?s=128&d=identicon&r=PG", "display_name": "Bobbake4", "link": "https://stackoverflow.com/users/509967/bobbake4"}, "is_accepted": true, "score": 5, "last_activity_date": 1457367546, "creation_date": 1457367546, "answer_id": 35848715, "question_id": 35848383, "link": "https://stackoverflow.com/questions/35848383/retrofit2-and-kotlin/35848715#35848715", "title": "Retrofit2 and kotlin", "body": "<p>The problem is you're trying to use the <code>@Part</code> annotation where you should be using the <code>@Path</code> annotation, just replace it and you should be all set.</p>\n\n<p><code>@Part</code>, as the error describes, should be used when submitting multipart form data not for modifying the URL.</p>\n"}], "owner": {"reputation": 662, "user_id": 4079501, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100001696623435/picture?type=large", "display_name": "Illya Bublyk", "link": "https://stackoverflow.com/users/4079501/illya-bublyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 946, "favorite_count": 0, "accepted_answer_id": 35848715, "answer_count": 1, "score": 3, "last_activity_date": 1457367546, "creation_date": 1457366604, "question_id": 35848383, "link": "https://stackoverflow.com/questions/35848383/retrofit2-and-kotlin", "title": "Retrofit2 and kotlin", "body": "<p>I'm try to combine Kotlin RxJava and retrofit2.</p>\n\n<pre><code>@GET(\"/xxxxxxxxxxxx/{id}.json\")\nfun getHotel(@Part(\"id\") id : String) : Observable&lt;Response&lt;Hotel&gt;&gt;\n</code></pre>\n\n<p>When I try to call this method (getHotels()):</p>\n\n<pre><code>   var subscription = HotelsFactory.getHotelService((activity.applicationContext as App)\n            .client)\n        .getHotel(arguments.getInt(\"id\").toString())\n        .subscribeOn(Schedulers.computation())\n        .observeOn(AndroidSchedulers.mainThread())\n        .subscribe({response -&gt; showHotels(response)}) \n         {throwable -&gt;       throwable.printStackTrace()}\n    mSubscription.add(subscription)\n</code></pre>\n\n<p>I take this one:</p>\n\n<blockquote>\n  <p>@Part parameters can only be used with multipart encoding.</p>\n</blockquote>\n"}, {"tags": ["jpa", "bean-validation", "kotlin", "spring-data-rest", "data-class"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457369224, "post_id": 35847763, "comment_id": 59364100, "body": "what should be the target of the annotation? Constructor parameter or the field?"}], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 5515924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc361ae7c06d9fa4ebb30cea12f3def?s=128&d=identicon&r=PG", "display_name": "pellenberger", "link": "https://stackoverflow.com/users/5515924/pellenberger"}, "edited": false, "score": 0, "creation_date": 1457511401, "post_id": 35853200, "comment_id": 59434073, "body": "You rock ! Thanks !  It is also possible to use the <code>@get:Size(min=5, max=15)</code> annotation."}, {"owner": {"reputation": 2750, "user_id": 661598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BVAlk.png?s=128&g=1", "display_name": "wst", "link": "https://stackoverflow.com/users/661598/wst"}, "edited": false, "score": 3, "creation_date": 1496211615, "post_id": 35853200, "comment_id": 75561270, "body": "Although it&#39;s correct answer it&#39;s worth to note that you should not use <code>data class</code> for entity anyway. The reason is - it will generate <code>equals</code> and <code>hashCode</code> methods using all properties, including <code>id</code>, which is not desired behavior for JPA entity. See here: <a href=\"https://docs.jboss.org/hibernate/stable/core.old/reference/en/html/persistent-classes-equalshashcode.html\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/stable/core.old/reference/en/html/&hellip;</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 2750, "user_id": 661598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BVAlk.png?s=128&g=1", "display_name": "wst", "link": "https://stackoverflow.com/users/661598/wst"}, "edited": false, "score": 0, "creation_date": 1519057402, "post_id": 35853200, "comment_id": 84744156, "body": "thanks @waste, I made an edit to add the note directly in the answer."}, {"owner": {"reputation": 1069, "user_id": 2172566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f5502f74c9d40b40cc238c9d0ca171?s=128&d=identicon&r=PG", "display_name": "forresthopkinsa", "link": "https://stackoverflow.com/users/2172566/forresthopkinsa"}, "edited": false, "score": 2, "creation_date": 1524683988, "post_id": 35853200, "comment_id": 87075808, "body": "&quot;If there are explicit implementations of equals(), hashCode() or toString() in the data class body or final implementations in a superclass, then these functions are not generated, and the existing implementations are used&quot;   - kotlin docs"}, {"owner": {"reputation": 382, "user_id": 1165236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e823b21c2c71249c8364f533716fed6?s=128&d=identicon&r=PG", "display_name": "Vincent", "link": "https://stackoverflow.com/users/1165236/vincent"}, "edited": false, "score": 1, "creation_date": 1587115927, "post_id": 35853200, "comment_id": 108387084, "body": "Oh god, Thank you soooooo much for this answer.I&#39;ve lost a day about it figuring out why my annotation wasn&#39;t taking into consideration..."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 94, "last_activity_date": 1519057381, "last_edit_date": 1519057381, "creation_date": 1457381924, "answer_id": 35853200, "question_id": 35847763, "link": "https://stackoverflow.com/questions/35847763/kotlin-data-class-bean-validation-jsr-303/35853200#35853200", "title": "kotlin data class + bean validation jsr 303", "body": "<p>You need to use <a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"noreferrer\">Annotation use-site targets</a> since the default for a property declared in the constructor is to target the annotation on the constructor <strong>parameter</strong> instead of the <strong>getter</strong> (which will be seen by JavaBeans compliant hosts) when there are multiple options available.  Also using a <code>data</code> class might be inappropriate here (<em>see note at end</em>).</p>\n\n<pre><code>@Entity data class User(\n    @Id\n    @GeneratedValue(strategy = javax.persistence.GenerationType.AUTO)\n    var id: Long? = null,\n\n    @get:Size(min=5, max=15) // added annotation use-site target here\n    val name: String\n)\n</code></pre>\n\n<p>The <code>property</code> target from the Kotlin docs may look tempting, but it can only be seen from Kotlin and not Java.  Usually <code>get</code> does the trick, and it is not needed on the bean <code>set</code>.</p>\n\n<p>The docs describe the process as:</p>\n\n<blockquote>\n  <p>If you don\u2019t specify a use-site target, the target is chosen according to the @Target annotation of the annotation being used. If there are multiple applicable targets, the first applicable target from the following list is used:</p>\n  \n  <ul>\n  <li>param</li>\n  <li>property</li>\n  <li>field</li>\n  </ul>\n</blockquote>\n\n<p>And the <code>@Size</code> annotation is:</p>\n\n<pre><code>@Target(value={METHOD,FIELD,ANNOTATION_TYPE,CONSTRUCTOR,PARAMETER})\n</code></pre>\n\n<p>Therefore since <code>PARAMETER</code> is a valid target, and multiple targets are available (parameter, field, method [get/set]) it choses <code>PARAMETER</code> which is not what you want.  Therefore for a JavaBean host to see the property it will look for the getter (properties are defined by the getter/setter and not the backing field).  </p>\n\n<p>In one of the <a href=\"http://beanvalidation.org/1.0/spec\" rel=\"noreferrer\">Java samples</a>, it shows:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Book {\n    private String title;\n    private String description;\n\n    // ...\n\n    @NotEmpty(groups={FirstLevelCheck.class, Default.class})\n    @Size(max=30)\n    public String getTitle() {\n        return title;\n    }\n\n    // ...\n}\n</code></pre>\n\n<p>Which matches our usage of having it on the getter.  If it were to be on the field like some of the validation annotations show, see the <code>field</code> use-site target.  Or if the field must also be publicly accessible, see the <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#instance-fields\" rel=\"noreferrer\">@JvmField annotation</a> in Kotlin.</p>\n\n<p><strong><em>NOTE:</em></strong> <em>As mentioned in notes from others, you should likely consider NOT using a <code>data</code> class for entities if they use an auto-generated ID since it will not exist for new objects the same as for retrieved objects; and a <code>data</code> class will generate <code>equals</code> and <code>hashCode</code> to include all fields including the ones it should not.  You can read guidance about this from the <a href=\"https://docs.jboss.org/hibernate/stable/core.old/reference/en/html/persistent-classes-equalshashcode.html\" rel=\"noreferrer\">Hibernate docs</a>.</em></p>\n"}, {"tags": [], "owner": {"reputation": 17453, "user_id": 5279996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf8327567575d69a46bd8afe8db4466e?s=128&d=identicon&r=PG", "display_name": "Braian Coronel", "link": "https://stackoverflow.com/users/5279996/braian-coronel"}, "is_accepted": false, "score": 6, "last_activity_date": 1592149344, "creation_date": 1592149344, "answer_id": 62374746, "question_id": 35847763, "link": "https://stackoverflow.com/questions/35847763/kotlin-data-class-bean-validation-jsr-303/62374746#62374746", "title": "kotlin data class + bean validation jsr 303", "body": "<p><strong>Use the <code>@get</code> or <code>@field</code> targets</strong> for <a href=\"https://hibernate.org/validator\" rel=\"noreferrer\">validation annotations</a>. Annotations with the target <code>@param</code>(first default) and <code>@property</code> are not supported. </p>\n\n<p>e.g:</p>\n\n<p>From <code>@NotEmpty</code> To <code>@field:NotEmpty</code></p>\n\n<pre><code>data class Student(\n    @field:NotEmpty @field:Size(min= 2, message = \"Invalid field\") var name: String? = \"\"\n)\n</code></pre>\n\n<p>GL</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/35853200/5279996\">Jayson Minard</a></li>\n<li><a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"noreferrer\">Annotation use site targets</a></li>\n</ul>\n"}], "owner": {"reputation": 673, "user_id": 5515924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc361ae7c06d9fa4ebb30cea12f3def?s=128&d=identicon&r=PG", "display_name": "pellenberger", "link": "https://stackoverflow.com/users/5515924/pellenberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21257, "favorite_count": 15, "accepted_answer_id": 35853200, "answer_count": 2, "score": 58, "last_activity_date": 1592149344, "creation_date": 1457365053, "last_edit_date": 1464703271, "question_id": 35847763, "link": "https://stackoverflow.com/questions/35847763/kotlin-data-class-bean-validation-jsr-303", "title": "kotlin data class + bean validation jsr 303", "body": "<p>I'm trying to get Kotlin working with jsr 303 validation on a spring-data-rest project. </p>\n\n<p>Given the following data class declarartion : </p>\n\n<pre><code>@Entity data class User(\n    @Id \n    @GeneratedValue(strategy = javax.persistence.GenerationType.AUTO)\n    var id: Long? = null,\n\n    @Size(min=5, max=15)\n    val name: String\n)\n</code></pre>\n\n<p>The @Size annotation has no effect here, making me able to save a user with a name of 1 character.<br>\nIt works well when executing the very same example but in a Java class instead of Kotlin.   </p>\n\n<p>This makes me think of a Kotlin problem. </p>\n\n<p>Thanks in advance for you help ! </p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 7, "last_activity_date": 1457359473, "last_edit_date": 1457359473, "creation_date": 1457355800, "answer_id": 35844500, "question_id": 35843266, "link": "https://stackoverflow.com/questions/35843266/how-to-iterate-over-class-hierarchy/35844500#35844500", "title": "How to iterate over class hierarchy?", "body": "<p>First, specify explicit type for <code>var currentClass</code> to avoid its inference as <code>KClass&lt;C&gt;</code>:</p>\n\n<pre><code>var currentClass: KClass&lt;*&gt; = C::class\n</code></pre>\n\n<p>Then, <code>superclass</code> call will return a type <a href=\"https://kotlinlang.org/docs/reference/generics.html#type-projections\" rel=\"nofollow\">with <code>in</code> projection</a>, and you won't be able to call <code>.kotlin</code> on it. So a cast to <a href=\"https://kotlinlang.org/docs/reference/generics.html#star-projections\" rel=\"nofollow\">star-projected</a> type will also help: </p>\n\n<pre><code>currentClass = (currentClass.java.superclass as Class&lt;*&gt;).kotlin\n</code></pre>\n\n<p>Complete method:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    var currentClass: KClass&lt;*&gt; = C::class\n    while (currentClass != Any::class) {\n        println(currentClass)\n        currentClass = (currentClass.java.superclass as Class&lt;*&gt;).kotlin\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 35844500, "answer_count": 1, "score": 2, "last_activity_date": 1457359473, "creation_date": 1457352203, "question_id": 35843266, "link": "https://stackoverflow.com/questions/35843266/how-to-iterate-over-class-hierarchy", "title": "How to iterate over class hierarchy?", "body": "<p>I want to iterate over class hierarchy and print all super classes:</p>\n\n<pre><code>open class A {}\nopen class B : A() {}\nopen class C : B() {}\n\nfun main(args: Array&lt;String&gt;) {\n    var currentClass = C::class\n    while(currentClass != Any::class) {\n        println(currentClass)\n        currentClass = currentClass.superclass\n    }\n}\n</code></pre>\n\n<p>but Kotlin <code>KClass</code> doesn't have <code>superclass</code> method.</p>\n\n<p>I have tried to use <code>superclass</code> from Java:</p>\n\n<pre><code> currentClass = currentClass.java.superclass.kotlin\n</code></pre>\n\n<p>but it cause compilation error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Error:(9, 52) Type inference failed: 'T' cannot capture 'in ('C'..'C?')'. \nType parameter has an upper bound 'kotlin.Any' that cannot be satisfied \ncapturing 'in' projection\n</code></pre>\n\n<p>So, can anybody explain me how to do it?</p>\n"}, {"tags": ["arrays", "syntax", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1457358107, "post_id": 35841141, "comment_id": 59355849, "body": "I would write &quot;normal&quot; production Kotlin code with <code>data</code> classes and archive the speed and ease of &quot;rapid prototyping&quot;. Not sure about the REPL thing.."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457360541, "post_id": 35841141, "comment_id": 59357513, "body": "What does the &quot;REPL like&quot; environment mean in terms of the question, it isn&#39;t clear how that impacts possible answers."}, {"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 0, "creation_date": 1457379695, "post_id": 35841141, "comment_id": 59370723, "body": "Meant as in a scientific workflow dealing with shorter code snippets, usually but not exclusively done in a REPL. Basically based on a hunch you form a hypothesis and a set of question to test the hypothesis. To try your question you mock-up some trivial test data. You iterate a couple of times over real and test data. The problem is programmatically trivial, instead the domain is a challenge. In the end the hypothesis is usually discarded and you move on. If you strike gold then you build a service using regular software methodologies."}, {"owner": {"reputation": 494, "user_id": 1714538, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/665a3477ebf588e030d6d7f1c9594c55?s=128&d=identicon&r=PG", "display_name": "lorenzo", "link": "https://stackoverflow.com/users/1714538/lorenzo"}, "edited": false, "score": 0, "creation_date": 1525332082, "post_id": 35841141, "comment_id": 87316129, "body": "If I need this often I would use a little language: <code>val path = a(&quot;{1.0, 2.0}, {1.0,3.0}, {3.0,4.0}, {8.0,9.0}&quot;)</code>. I think this is something to fix in the language, not with custom code, I arrived here looking for numpy like syntax..."}], "answers": [{"comments": [{"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 0, "creation_date": 1457350250, "post_id": 35841497, "comment_id": 59350785, "body": "Performance is not a biggie but readability is. A limitation I see with your setup is that it is limited to Pairs."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "reply_to_user": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 1, "creation_date": 1457354672, "post_id": 35841497, "comment_id": 59353492, "body": "I edited my answer and added a builder-style version where you can add double arrays of arbitrary length."}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": false, "score": 10, "last_activity_date": 1457354623, "last_edit_date": 1457354623, "creation_date": 1457346954, "answer_id": 35841497, "question_id": 35841141, "link": "https://stackoverflow.com/questions/35841141/kotlin-and-verbose-array-instantiation/35841497#35841497", "title": "Kotlin and verbose array instantiation", "body": "<p>As far as the stdlib goest, this is as short as it gets. You could however define a helper function yourself:</p>\n\n<pre><code>fun doubles(vararg values: Pair&lt;Double, Double&gt;) = values\n    .map { doubleArrayOf(it.first, it.second) }\n    .toTypedArray()\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val path = doubles(1.0 to 2.0, 1.0 to 3.0, 3.0 to 4.0, 8.0 to 9.0)\n}\n</code></pre>\n\n<p>This is not the most efficient solution because it involves boxing and allocation of one temporary array and list, but if you're only prototyping this should be ok.</p>\n\n<p>EDIT: </p>\n\n<p>I also made a version where you can add arrays of arbitrary length:</p>\n\n<pre><code>inline fun doubles(block: DoubleArrayBuilder.() -&gt; Unit) = DoubleArrayBuilder()\n        .apply(block)\n        .list.toTypedArray()\n\nclass DoubleArrayBuilder {\n    val list = mutableListOf&lt;DoubleArray&gt;()\n\n    fun add(vararg doubles: Double) = list.add(doubles)\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val path = doubles {\n        add(2.0, 3.0, 4.0)\n        add(2.0, 3.0, 4.0)\n        add(2.0, 3.0, 4.0)\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 0, "creation_date": 1457352446, "post_id": 35842446, "comment_id": 59352053, "body": "This is the obvious answer. The use-case is answering queries in a &quot;REPL like&quot; environment on numerical big data i.e. think Matlab or numpy. The current solution I use is to setup generic short-hand functions for array creation such as <code>fun d(vararg v: Double) = doubleArrayOf(*v)</code> and   <code>fun f(vararg v: Float) = floatArrayOf(*v) </code> . Sometime I get a feeling that what Kotlin gives in with one hand i.e. operator overloading and infix it takes aways with the other i.e array declaration. Many thanks for the input!"}, {"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 0, "creation_date": 1457354529, "post_id": 35842446, "comment_id": 59353390, "body": "Clarification to comment above. I&#39;m not really happy with the need of declaring a generic short-hand function for array declaration just to make snippets of code readable. So are there better options or is this the way to go ?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 1, "creation_date": 1457354855, "post_id": 35842446, "comment_id": 59353636, "body": "This is it for arrays.  Kotlin doesn&#39;t want them special cased differently than other collection types.  Arrays actually have a statistically low usage in the JVM world, and a large bit of those are accidental when people should be using normal collections.  So they are placed at the same discovery level and syntax level as collections to even the field."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 0, "creation_date": 1457354915, "post_id": 35842446, "comment_id": 59353679, "body": "You could create operator + for a <code>Pair&lt;Double, Double&gt;</code> and create a <code>pt(): Pair&lt;Double, Double&gt;</code> function for creating it, override the plus operator, and then chain a bunch of adds to make an array.  But it is just a remix of the same."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 5, "last_activity_date": 1457350236, "last_edit_date": 1457350236, "creation_date": 1457349855, "answer_id": 35842446, "question_id": 35841141, "link": "https://stackoverflow.com/questions/35841141/kotlin-and-verbose-array-instantiation/35842446#35842446", "title": "Kotlin and verbose array instantiation", "body": "<p><code>arrayOf</code> and <code>doubleArrayOf</code> and others like them, are just top level functions in stdlib.  To shorten the syntax, you can easily create your own functions with <a href=\"https://kotlinlang.org/docs/reference/functions.html#function-scope\" rel=\"nofollow\">scope</a> at the top level, within a class, or even locally within a function:</p>\n\n<p>By creating:</p>\n\n\n\n<pre><code>fun pathOf(vararg points: DoubleArray): Array&lt;out DoubleArray&gt; = points\nfun pt(x: Double, y: Double) = doubleArrayOf(x,y)\n</code></pre>\n\n<p>This allows:</p>\n\n<pre><code>val path = pathOf(pt(1.0, 2.0), pt(1.0, 2.0), pt(1.0, 3.0), pt(8.0, 9.0))\n</code></pre>\n\n<p>Which now gives the nested arrays meaning for a future reader or the code.  Name the function <code>point</code>, <code>pt</code>, <code>xy</code>, or whatever suits your use case.</p>\n\n<p>This code is only slightly longer than the original, and maybe more readable/meaningful than the Java:</p>\n\n<pre><code>double[][] path = {{1.0, 2.0}, {1.0, 3.0}, {3.0, 4.0}, {8.0, 9.0}}\n</code></pre>\n\n<p>These functions are just as efficient as using <code>arrayOf</code> and <code>doubleArrayOf</code> and if used repeatedly the JVM will eventually <code>inline</code> them, but if you are nervous you can make them <code>inline</code> yourself.</p>\n\n<p><em>Kotlin is intended to be extended</em>, any time you run into an issue like this think about how you can extend an API or change a function to get the readability you desire.</p>\n"}], "owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 35842446, "answer_count": 2, "score": 6, "last_activity_date": 1457422524, "creation_date": 1457346010, "last_edit_date": 1457422524, "question_id": 35841141, "link": "https://stackoverflow.com/questions/35841141/kotlin-and-verbose-array-instantiation", "title": "Kotlin and verbose array instantiation", "body": "<p>Let say that I have path that goes through 4 vertices. When doing rapid prototyping I would define this in java as</p>\n\n<pre><code>double[][] path = {{1.0, 2.0}, {1.0,3.0}, {3.0,4.0}, {8.0,9.0}}\n</code></pre>\n\n<p>Using the arrayOf, and doubleArrayOf function the same code in Kotlin would be</p>\n\n<pre><code>val path = arrayOf(doubleArrayOf(1.0, 2.0), doubleArrayOf(1.0, 2.0), doubleArrayOf(1.0,3.0), doubleArrayOf(8.0,9.0))\n</code></pre>\n\n<p>Which feels a bit verbose. Is there a Kotlin way of solving this ?</p>\n\n<p><em>Edit:</em> The use-case is answering queries in a \"REPL like\" environment on numerical data i.e. think Matlab or SciPy. </p>\n"}, {"tags": ["realm", "kotlin"], "comments": [{"owner": {"reputation": 3477, "user_id": 1396606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8806428fd1451cf727350f163e5c13d7?s=128&d=identicon&r=PG", "display_name": "beeender", "link": "https://stackoverflow.com/users/1396606/beeender"}, "edited": false, "score": 0, "creation_date": 1457319633, "post_id": 35835384, "comment_id": 59337812, "body": "After clone the <code>realm-java</code> project, try run <code>&#47;gradlew installRealmJava</code> in the project root dir first. Then build the example."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457351169, "post_id": 35835384, "comment_id": 59351294, "body": "You do not show your Person class, would be nice to see."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4710222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9a88c295f6f9ca13d8166dbf4471fd7?s=128&d=identicon&r=PG&f=1", "display_name": "vslimit", "link": "https://stackoverflow.com/users/4710222/vslimit"}, "edited": false, "score": 0, "creation_date": 1457421910, "post_id": 35842996, "comment_id": 59387045, "body": "i add <code>classpath &quot;io.realm:realm-gradle-plugin:&lt;version&gt;&quot;</code> and  <code>apply plugin: &#39;realm-android&#39;</code>  but error like <code>Error:Gradle: Execution failed for task &#39;:app:transformClassesWithJarMergingForDebug&#39;. &gt; com.android.build.api.transform.TransformException: java.util.zip.ZipException: duplicate entry: io&#47;realm&#47;annotations&#47;Ignore.class</code>  sometime is Index.class, i found that :[link](<a href=\"https://github.com/realm/realm-java/issues/1545\" rel=\"nofollow noreferrer\">github.com/realm/realm-java/issues/1545</a> ) and <a href=\"https://github.com/realm/realm-java/issues/1807\" rel=\"nofollow noreferrer\">link</a> but canot solve it ,help,thx"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 41, "user_id": 4710222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9a88c295f6f9ca13d8166dbf4471fd7?s=128&d=identicon&r=PG&f=1", "display_name": "vslimit", "link": "https://stackoverflow.com/users/4710222/vslimit"}, "edited": false, "score": 0, "creation_date": 1457435528, "post_id": 35842996, "comment_id": 59395407, "body": "Can you start a new question, and you will need to include your list of dependencies, along with the output of gradle dependencies command because it will show what else is bringing in another copy of Realm library.  It cannot be solved in comments here."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 3, "last_activity_date": 1457351430, "creation_date": 1457351430, "answer_id": 35842996, "question_id": 35835384, "link": "https://stackoverflow.com/questions/35835384/kotlin-realm-demo-canot-be-run/35842996#35842996", "title": "kotlin realm demo canot be run", "body": "<p>With Realm 0.88.0-SNAPSHOT you have to use their Gradle Plugin as well.  If you Google this exception (<code>realm java.lang.ClassCastException ProxyInterface</code>) you will find this <a href=\"https://github.com/realm/realm-java/issues/2353\" rel=\"nofollow\">Github Issue - 2353</a> which says:</p>\n\n<blockquote>\n  <p>We just merged our byte code weaver into master, and it sounds like it isn't being triggered in your case. Note that from 0.88.0-SNAPSHOT you have to use our Gradle plugin: <a href=\"https://realm.io/news/android-installation-change/\" rel=\"nofollow\">https://realm.io/news/android-installation-change/</a></p>\n</blockquote>\n\n<p>Previously you would install Realm like:</p>\n\n<pre><code>repositories {\n    jcenter()\n}\n\ndependencies {\n    compile 'io.realm:realm-android:&lt;version&gt;'\n}\n</code></pre>\n\n<p>Now you must install it to also include the Gradle plugin:</p>\n\n<pre><code>buildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath \"io.realm:realm-gradle-plugin:&lt;version&gt;\"\n    }\n}\n\napply plugin: 'realm-android'\n</code></pre>\n\n<p>So that byte code weaving is turned on.  Without this, you receive an error exactly like your first use case (which was correct code, but for the snapshot release you chose to use, you also needed this extra step of the Gradle plugin).  There are other important notes in the link above, along with the release notes for changes in recent versions of Realm.</p>\n"}], "owner": {"reputation": 41, "user_id": 4710222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9a88c295f6f9ca13d8166dbf4471fd7?s=128&d=identicon&r=PG&f=1", "display_name": "vslimit", "link": "https://stackoverflow.com/users/4710222/vslimit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 35842996, "answer_count": 1, "score": -1, "last_activity_date": 1457351430, "creation_date": 1457318802, "question_id": 35835384, "link": "https://stackoverflow.com/questions/35835384/kotlin-realm-demo-canot-be-run", "title": "kotlin realm demo canot be run", "body": "<p>kotlin version 1.0.0,realm version 0.88.0-SNAPSHOT\nI download realm kotlin demo ,and run\nif code like this:</p>\n\n<pre><code>    var person = Person()\n    person.id = 1\n    person.name = \"Young Person\"\n    person.age = 14\n    realm.beginTransaction()\n    realm.copyToRealm(person)\n    realm.commitTransaction()\n</code></pre>\n\n<p>throw Exception: Caused by: java.lang.ClassCastException: io.realm.examples.kotlin.model.Person cannot be cast to io.realm.PersonRealmProxyInterface</p>\n\n<p>else  I change code like this:</p>\n\n<pre><code>    realm.beginTransaction()\n    // Add a person\n    var person = realm.createObject(Person::class.java)\n    person.id = 1\n    person.name = \"Young Person\"\n    person.age = 14\n    // When the transaction is committed, all changes a synced to disk.\n    realm.commitTransaction()\n</code></pre>\n\n<p>then realm insert a data but person.name ,id,age is empty value or 0;</p>\n\n<p>how to solve it</p>\n"}, {"tags": ["junit4", "kotlin"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1457244805, "post_id": 35820936, "comment_id": 59314553, "body": "what the difference between first two versions?"}, {"owner": {"reputation": 12504, "user_id": 269454, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/2c52d8862ec3b13e1c9cb14d37ca2257?s=128&d=identicon&r=PG", "display_name": "lujop", "link": "https://stackoverflow.com/users/269454/lujop"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1457273731, "post_id": 35820936, "comment_id": 59322354, "body": "One uses @JvmStatic and other JvmField. To my understand as I want to reproduce a static field the first is the one to use, but I tried also with the second."}], "answers": [{"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1457311302, "post_id": 35828195, "comment_id": 59335886, "body": "<code>object companion { ... }</code> is not an object expression but an object declaration as per <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/object-declarations.html</a>."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 30, "last_activity_date": 1457348957, "last_edit_date": 1457348957, "creation_date": 1457275214, "answer_id": 35828195, "question_id": 35820936, "link": "https://stackoverflow.com/questions/35820936/use-classrule-in-kotlin/35828195#35828195", "title": "Use @ClassRule in Kotlin", "body": "<p>You are not using <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\" rel=\"noreferrer\">companion objects</a> correctly.  You are declaring an object (single instance of a class) called <code>companion</code> instead of creating a <code>companion object</code> inside of a class.  And therefore the static fields are not created correctly.</p>\n\n<pre><code>class TestClass {\n    companion object { ... }\n}\n</code></pre>\n\n<p>Is very different than:</p>\n\n<pre><code>class TestClass { \n    object companion { ... } // this is an object declaration, not a companion object\n}\n</code></pre>\n\n<p>Although both are valid code.</p>\n\n<p>Here is a correct working example of using <code>@ClassRule</code>, tested in Kotlin 1.0.0:</p>\n\n<pre><code>class TestWithRule {\n    companion object {\n        @ClassRule @JvmField\n        val resource: ExternalResource = object : ExternalResource() {\n            override fun before() {\n                println(\"ClassRule Before\")\n            }\n\n            override fun after() {\n                println(\"ClassRule After\")\n            }\n        }\n    }\n\n    @Test fun testSomething() {\n        println(\"Testing...\")\n    }\n}\n</code></pre>\n\n<p>This outputs:</p>\n\n<blockquote>\n  <p>ClassRule Before <br/>\n  Testing...<br/>\n  ClassRule After</p>\n</blockquote>\n"}], "owner": {"reputation": 12504, "user_id": 269454, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/2c52d8862ec3b13e1c9cb14d37ca2257?s=128&d=identicon&r=PG", "display_name": "lujop", "link": "https://stackoverflow.com/users/269454/lujop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4865, "favorite_count": 0, "accepted_answer_id": 35828195, "answer_count": 1, "score": 24, "last_activity_date": 1457348957, "creation_date": 1457218510, "question_id": 35820936, "link": "https://stackoverflow.com/questions/35820936/use-classrule-in-kotlin", "title": "Use @ClassRule in Kotlin", "body": "<p>In JUnit you can use @ClassRule to annotate an static field.\nHow can I do this in Kotlin?</p>\n\n<p>I tried:</p>\n\n<pre><code>object companion {\n    @ClassRule @JvmStatic\n    val managedMongoDb = ...    \n}\n\nand \n\nobject companion {\n    @ClassRule @JvmField\n    val managedMongoDb = ...    \n}\n</code></pre>\n\n<p>but none of the last works because rule isn't executed.</p>\n\n<p>I double checked that exactly same rule works fine without static context:</p>\n\n<pre><code>@Rule @JvmField\nval managedMongoDb = ...\n</code></pre>\n"}, {"tags": ["kotlin", "rx-kotlin"], "answers": [{"comments": [{"owner": {"reputation": 12820, "user_id": 1031556, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b46c5b92c22c681b79a1e91825ee757b?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/1031556/stephan"}, "edited": false, "score": 0, "creation_date": 1457219157, "post_id": 35820705, "comment_id": 59309309, "body": "your answer is working, but I wonder why <code>toObservable()</code> is used in the rxkotlin examples though. <a href=\"https://github.com/ReactiveX/RxKotlin/blob/0.x/src/examples/kotlin/rx/lang/kotlin/examples/examples.kt#L45\" rel=\"nofollow noreferrer\">github.com/ReactiveX/RxKotlin/blob/0.x/src/examples/kotlin/r&zwnj;&#8203;x/&hellip;</a>"}, {"owner": {"reputation": 11062, "user_id": 1104902, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2ce37fa708768742edc4ed94b4cb76d?s=128&d=identicon&r=PG", "display_name": "pt2121", "link": "https://stackoverflow.com/users/1104902/pt2121"}, "reply_to_user": {"reputation": 12820, "user_id": 1031556, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b46c5b92c22c681b79a1e91825ee757b?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/1031556/stephan"}, "edited": false, "score": 0, "creation_date": 1457221453, "post_id": 35820705, "comment_id": 59309872, "body": "@EarlOfEgo kinda weird. i guess that just for demonstration. if you check git history, you&#39;ll see how it&#39;s getting there. At a very first commit, it makes more sense: <a href=\"https://github.com/ReactiveX/RxKotlin/commit/d365846fa8502566132fd8d53b7e83aaa5bc452e#diff-3f0526ee70e691c01cb9149a4ccbca03R32\" rel=\"nofollow noreferrer\">github.com/ReactiveX/RxKotlin/commit/&hellip;</a>"}], "tags": [], "owner": {"reputation": 11062, "user_id": 1104902, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e2ce37fa708768742edc4ed94b4cb76d?s=128&d=identicon&r=PG", "display_name": "pt2121", "link": "https://stackoverflow.com/users/1104902/pt2121"}, "is_accepted": true, "score": 9, "last_activity_date": 1457222863, "last_edit_date": 1457222863, "creation_date": 1457216852, "answer_id": 35820705, "question_id": 35818449, "link": "https://stackoverflow.com/questions/35818449/rx-kotlin-subscription-not-working-not-receiving-items/35820705#35820705", "title": "rx kotlin subscription not working, not receiving items", "body": "<p><code>observable</code> is for creating an Observable from scratch but you already have <code>Observable&lt;String&gt;</code> from <code>toObservable()</code> so you don't need it. The code below works for me:</p>\n\n<pre><code>fun getAllFiles(): Observable&lt;String&gt; {\n  val allFiles = File(\"/Users/stephan/Projects/Playground/kotlinfiles/\")\n    .listFiles { file -&gt; !file.isDirectory }\n  return allFiles.toObservable()\n    .map { f -&gt; \"${f.name}\" }\n}\n\nfun test() {\n  getAllFiles()\n    .doOnNext { println(\"File name $it\") }\n    .subscribe(\n        { n -&gt; println(\"File: $n\") },\n        { e -&gt; println(\"Damn: $e\") },\n        { println(\"Completed\") })\n}\n</code></pre>\n\n<p>You can also fix this by changing from:</p>\n\n<pre><code>.subscribe{subscriber}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>.subscribe(subscriber)\n</code></pre>\n\n<p>but this nested Observable version is confusing to me.</p>\n"}], "owner": {"reputation": 12820, "user_id": 1031556, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b46c5b92c22c681b79a1e91825ee757b?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/1031556/stephan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3588, "favorite_count": 1, "accepted_answer_id": 35820705, "answer_count": 1, "score": 4, "last_activity_date": 1457222863, "creation_date": 1457204458, "question_id": 35818449, "link": "https://stackoverflow.com/questions/35818449/rx-kotlin-subscription-not-working-not-receiving-items", "title": "rx kotlin subscription not working, not receiving items", "body": "<p>I created a function which returns an <code>Observable&lt;String&gt;</code> with file names, but I don't get any event in my subscription where I call this method. Also there is no call of onError, or onComplete <br>\nSee my code:</p>\n\n<pre><code>fun getAllFiles(): Observable&lt;String&gt; {\n\n    val allFiles = File(\"/Users/stephan/Projects/Playground/kotlinfiles/\")\n            .listFiles { file -&gt; !file.isDirectory() }\n    return observable { subscriber -&gt;\n        allFiles.toObservable()\n                .map { f -&gt; \"${f.name}\" }\n                .doOnNext { println(\"Found file $it\") }\n                .subscribe { subscriber}\n    }\n}\n\nfun test() {\n    getAllFiles()\n            .doOnNext { println(\"File name$it\") }\n            .subscribe(\n                    {n -&gt; println(\"File: $n\")},\n                    {e -&gt; println(\"Damn: $e\")},\n                    {println(\"Completed\")})\n}\n</code></pre>\n\n<p>Though everything is being called in the <code>getAllFiles()</code> function, so what am I missing?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1775, "user_id": 2688755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001400070053/picture?type=large", "display_name": "Kevin Crain", "link": "https://stackoverflow.com/users/2688755/kevin-crain"}, "edited": false, "score": 0, "creation_date": 1457206127, "post_id": 35818483, "comment_id": 59305076, "body": "Thanks hotkey works like a charm, funny thing is I just learned the fold function throughout today and didn&#39;t realize it could be used in combination with the chaining code"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 10, "last_activity_date": 1457252902, "last_edit_date": 1457252902, "creation_date": 1457204600, "answer_id": 35818483, "question_id": 35817261, "link": "https://stackoverflow.com/questions/35817261/simpler-or-more-functional-way-of-chaining-objects-in-kotlin/35818483#35818483", "title": "Simpler or more functional way of chaining objects in Kotlin", "body": "<p>A functional <a href=\"https://en.wikipedia.org/wiki/Fold_(higher-order_function)\" rel=\"noreferrer\">idiom <strong>fold</strong></a> suits your needs well: it takes an initial item and then iterates over the other items, maintaining an accumulated value, which is updated on each item being processed with the function you provide. </p>\n\n<p>In Kotlin, it is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/fold.html\" rel=\"noreferrer\"><code>fold</code> extension function</a> for <code>Iterable</code>, <code>Sequence</code> or <code>Array</code>.</p>\n\n<p>You can use it in the following way:</p>\n\n<pre><code>fun &lt;T : Chain&lt;T&gt;&gt; buildChain(first: T, vararg members: T): T {\n    members.fold(first as T?) { acc, i -&gt; acc?.let { it + i } }\n    return first\n}\n</code></pre>\n\n<p>Here <code>first as T?</code> cast is needed for the accumulator type to be inferred as nullable <code>T?</code>, because <code>plus</code> in your <code>Chain&lt;T&gt;</code> returns nullable value (by the way, is it necessary?). </p>\n\n<p>You can also use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/fold-right.html\" rel=\"noreferrer\"><code>foldRight</code></a>, which just iterates in the opposite order:</p>\n\n<pre><code>fun &lt;T : Chain&lt;T&gt;&gt; buildChain(first: T, vararg members: T): T? =\n        (listOf(first) + members)\n            .foldRight(null as T?) { i, acc -&gt; acc?.let { i + acc }; i }\n</code></pre>\n\n<p>And there are <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/reduce.html\" rel=\"noreferrer\"><code>reduce</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/reduce-right.html\" rel=\"noreferrer\"><code>reduceRight</code></a> with similar semantics but using the first and the last item respectively for the accumulator's initial value. Here's the example with <code>reduceRight</code>:</p>\n\n<pre><code>fun &lt;T : Chain&lt;T&gt;&gt; buildChain(first: T, vararg members: T): T? =\n        (listOf(first) + members).reduceRight { i, acc -&gt; i.apply { plus(acc) } }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8543627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b64ad6a5d68adec5e62157db786f4bb1?s=128&d=identicon&r=PG&f=1", "display_name": "ixytiris", "link": "https://stackoverflow.com/users/8543627/ixytiris"}, "is_accepted": false, "score": 2, "last_activity_date": 1504190246, "last_edit_date": 1504190246, "creation_date": 1504186925, "answer_id": 45982965, "question_id": 35817261, "link": "https://stackoverflow.com/questions/35817261/simpler-or-more-functional-way-of-chaining-objects-in-kotlin/45982965#45982965", "title": "Simpler or more functional way of chaining objects in Kotlin", "body": "<p>Try <code>apply{}</code>. In the <code>{}</code> block pass your methods separated with ';'</p>\n\n<pre><code>Object().apply{ method1(); signUp(user) }\n</code></pre>\n"}], "owner": {"reputation": 1775, "user_id": 2688755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001400070053/picture?type=large", "display_name": "Kevin Crain", "link": "https://stackoverflow.com/users/2688755/kevin-crain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2689, "favorite_count": 1, "accepted_answer_id": 35818483, "answer_count": 2, "score": 7, "last_activity_date": 1504190246, "creation_date": 1457198507, "question_id": 35817261, "link": "https://stackoverflow.com/questions/35817261/simpler-or-more-functional-way-of-chaining-objects-in-kotlin", "title": "Simpler or more functional way of chaining objects in Kotlin", "body": "<p>I have created a helper method <code>buildChain</code> which essentially creates a \nchain of objects given that they implement the interface <code>IChain&lt;T&gt;</code> \nand set the contracts <code>next</code> member</p>\n\n<p><strong>The Code</strong></p>\n\n<pre><code>interface Chain&lt;T&gt; {\n    var next: T?\n\n    operator fun plus(next: T): T?\n}\n\nfun &lt;T : Chain&lt;T&gt;&gt; buildChain(first: T, vararg members: T): T {\n    var next: T? = null\n    members.forEachIndexed { i, t -&gt;\n        if (i == 0) {\n            next = first + t\n        } else {\n            next = next?.run { this + t }\n        }\n    }\n    return first\n}\n</code></pre>\n\n<p><strong>Implementation example</strong></p>\n\n<pre><code>data class Person(val name: String) : Chain&lt;Person&gt; {\n    override var next: Person? = null\n\n    override fun plus(next: Person): Person? {\n        this.next = next\n        return next\n    }\n}\n\nfun createPersonChain()\n        = buildChain(Person(\"Bob\"), Person(\"Bitzy\"), Person(\"Blitzy\"))\n</code></pre>\n\n<p><strong>Implementaion output example</strong></p>\n\n<pre><code>@JvmStatic fun main(args: Array&lt;String&gt;) {\n    var first = createPersonChain()\n    // first.name = \"Bob\"\n    // first.next.name = \"Bitzy\"\n    // first.next.next.name = \"Blitzy\"\n }\n</code></pre>\n\n<p>Is there a <code>functional</code> or <code>simpler</code> way for acheiving the <code>code</code> above keeping the implementaion usage the same?</p>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 9862, "user_id": 1914223, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1002f24df7b46a8dc40e41ae17ef2358?s=128&d=identicon&r=PG", "display_name": "Ga&#235;tan", "link": "https://stackoverflow.com/users/1914223/ga%c3%abtan"}, "edited": false, "score": 2, "creation_date": 1457204885, "post_id": 35818318, "comment_id": 59304616, "body": "I just tried adding that in my module&#39;s <code>build.gradle</code> (outside the <code>android</code> block), cleaned my project, but the result is the same."}], "tags": [], "owner": {"reputation": 86, "user_id": 1288107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce37cf75fa85b89a33916545978c64de?s=128&d=identicon&r=PG", "display_name": "Shintaro Katafuchi", "link": "https://stackoverflow.com/users/1288107/shintaro-katafuchi"}, "is_accepted": false, "score": 2, "last_activity_date": 1457203789, "creation_date": 1457203789, "answer_id": 35818318, "question_id": 35814837, "link": "https://stackoverflow.com/questions/35814837/android-data-binding-and-kotlin/35818318#35818318", "title": "Android Data Binding and Kotlin", "body": "<p>Have you tried adding following setting in your build.gradle?</p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 4812662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAd33.jpg?s=128&g=1", "display_name": "Artem Ufimtcev", "link": "https://stackoverflow.com/users/4812662/artem-ufimtcev"}, "is_accepted": true, "score": 20, "last_activity_date": 1458807600, "creation_date": 1458807600, "answer_id": 36195779, "question_id": 35814837, "link": "https://stackoverflow.com/questions/35814837/android-data-binding-and-kotlin/36195779#36195779", "title": "Android Data Binding and Kotlin", "body": "<p>Few steps to setup databinding in your Kotlin project.</p>\n\n<ol>\n<li><p>Tell <code>kapt</code> to use databinding compiler in module dependencies:</p>\n\n<pre><code>dependencies {\n  kapt 'com.android.databinding:compiler:2.0.0-beta6'\n}\n</code></pre></li>\n<li><p>As Shintaro Katafuchi mentioned, you should tell <code>kapt</code> to generate stubs.</p>\n\n<pre><code>kapt {\n  generateStubs = true\n}\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1915, "user_id": 2294560, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XBv6m.jpg?s=128&g=1", "display_name": "Imtiyaz Khalani", "link": "https://stackoverflow.com/users/2294560/imtiyaz-khalani"}, "is_accepted": false, "score": 0, "last_activity_date": 1506064041, "creation_date": 1506064041, "answer_id": 46358786, "question_id": 35814837, "link": "https://stackoverflow.com/questions/35814837/android-data-binding-and-kotlin/46358786#46358786", "title": "Android Data Binding and Kotlin", "body": "<p>I have recenly write Blog for Data Binding android with Kotlin <a href=\"https://androidteachers.com/kotlin-for-android/kotlin-data-binding-in-android/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Use Classpath </p>\n\n<pre><code>classpath 'com.android.tools.build:gradle:3.0.0-beta2'\n</code></pre>\n\n<p><strong>Dependency</strong></p>\n\n<pre><code>apply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\napply plugin: 'kotlin-kapt'\n\nandroid {\n    ...\n    dataBinding {\n        enabled = true\n    }\n}\n\ndependencies {\n    ......\n    kapt 'com.android.databinding:compiler:2.3.1'\n}\n</code></pre>\n\n<p>for more detail check out <a href=\"https://androidteachers.com/kotlin-for-android/kotlin-data-binding-in-android/\" rel=\"nofollow noreferrer\">this post</a></p>\n"}], "owner": {"reputation": 9862, "user_id": 1914223, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1002f24df7b46a8dc40e41ae17ef2358?s=128&d=identicon&r=PG", "display_name": "Ga&#235;tan", "link": "https://stackoverflow.com/users/1914223/ga%c3%abtan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4827, "favorite_count": 0, "accepted_answer_id": 36195779, "answer_count": 3, "score": 17, "last_activity_date": 1506064041, "creation_date": 1457185119, "question_id": 35814837, "link": "https://stackoverflow.com/questions/35814837/android-data-binding-and-kotlin", "title": "Android Data Binding and Kotlin", "body": "<p>I am converting my Android application from Java to Kotlin. It is working fine, except when I try to convert a file that is using Android Data Binding Library.\nIn that case, Android Studio complains at compile time about unresolved reference:</p>\n\n<pre><code>Error:(10, 44) Unresolved reference: AdapterHistoriesListBinding\n</code></pre>\n\n<p>Where <code>AdapterHistoriesListBinding</code> is the name of a file that should be generated by the Data Binding Library. It was working correctly in Java, so I guess it is an issue with Kotlin.</p>\n\n<p>I am using Android Studio 2.0.0-beta6, Android Gradle Plugin 2.0.0-beta6 and Kotlin 1.0.\nIs there something to do to make the Data Binding Library work with Kotlin?</p>\n"}, {"tags": ["spring", "kotlin", "spring-hateoas"], "answers": [{"comments": [{"owner": {"reputation": 1069, "user_id": 2795423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb2fb8c56fd07bc66f3f7bb2a0794be7?s=128&d=identicon&r=PG&f=1", "display_name": "thg", "link": "https://stackoverflow.com/users/2795423/thg"}, "edited": false, "score": 1, "creation_date": 1494181716, "post_id": 35828291, "comment_id": 74706919, "body": "Just out of curiositiy: What other frameworks provide similar functionality?"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 1, "last_activity_date": 1457275756, "creation_date": 1457275756, "answer_id": 35828291, "question_id": 35811861, "link": "https://stackoverflow.com/questions/35811861/using-spring-hateoas-controllerlinkbuilder-and-kotlin-throws-illegalargumentexce/35828291#35828291", "title": "Using Spring HATEOAS ControllerLinkBuilder and Kotlin throws IllegalArgumentException", "body": "<blockquote>\n  <p>I'm not keen (and don't want to get in the habit of) making all my classes open</p>\n</blockquote>\n\n<p>You only need to make your controllers open.  And it is a design feature of the framework you are using that subclassing is required.  There is no way to work around the inability to subclass a <code>final</code> class.  The JVM is enforcing the rule.  So you need to make those open.  </p>\n\n<p>There are other frameworks that do not require subclassing to produce similar functionality.</p>\n"}], "owner": {"reputation": 448, "user_id": 1218259, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4e9cc591cf1f05ba1349ef6eaccbbd37?s=128&d=identicon&r=PG", "display_name": "Jumwah", "link": "https://stackoverflow.com/users/1218259/jumwah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1457275756, "creation_date": 1457166281, "question_id": 35811861, "link": "https://stackoverflow.com/questions/35811861/using-spring-hateoas-controllerlinkbuilder-and-kotlin-throws-illegalargumentexce", "title": "Using Spring HATEOAS ControllerLinkBuilder and Kotlin throws IllegalArgumentException", "body": "<p>I'm making a small HATEOAS spring boot app using Kotlin.  I want to use the <code>ControllerLinkBuilder</code> to automatically create my HAL response links from the class that deals with them, like so: </p>\n\n<pre><code>user.add(linkTo(methodOn(UserController::class.java).findByName(userName)).withSelfRel())\n</code></pre>\n\n<p>but this throws:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Cannot subclass final class UserController\n</code></pre>\n\n<p>because all classes in Kotlin are final by default.  I'm not keen (and don't want to get in the habit of) making all my classes <code>open</code> just to get around this limitation.</p>\n\n<p>I also don't really want to manually build up my links as they may change (and the <code>ControllerLinkBuilder</code> is very handy for populating parameters etc.</p>\n\n<p>Currently I'm thinking I'm just going to have to accept that my controller classes have to be open.  Is there another way around this?  </p>\n"}, {"tags": ["kotlin", "kotlin-extension"], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 8, "creation_date": 1457276267, "post_id": 35808195, "comment_id": 59323336, "body": "If you have a case where you do not want to copy the list (which is fine in many cases, CPU cache and smaller lists are fine) then look at Java standard <code>sublist</code> for a variation of the extension <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList(int,%20int)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/&hellip;</a> (as per @hotkey in a comment below)"}], "tags": [], "owner": {"reputation": 29521, "user_id": 1950649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb5YJ.jpg?s=128&g=1", "display_name": "Vladimir Mironov", "link": "https://stackoverflow.com/users/1950649/vladimir-mironov"}, "is_accepted": true, "score": 48, "last_activity_date": 1457136832, "last_edit_date": 1457136832, "creation_date": 1457135648, "answer_id": 35808195, "question_id": 35808022, "link": "https://stackoverflow.com/questions/35808022/kotlin-list-tail-function/35808195#35808195", "title": "Kotlin List tail function", "body": "<p>Kotlin doesn't have a built-in <code>List&lt;T&gt;.tail()</code> function, so implementing your own extension function is the only way. Although your implementation is perfectly fine, it can be simplified a bit:</p>\n\n<pre><code>fun &lt;T&gt; List&lt;T&gt;.tail() = drop(1)\n</code></pre>\n\n<p>Or, instead of extension function, you can define an extension property:</p>\n\n<pre><code>val &lt;T&gt; List&lt;T&gt;.tail: List&lt;T&gt;\n  get() = drop(1)\n\nval &lt;T&gt; List&lt;T&gt;.head: T\n  get() = first()\n</code></pre>\n\n<p>And then use it like:</p>\n\n<pre><code>val list = listOf(\"1\", \"2\", \"3\")\nval head = list.head\nval tail = list.tail\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 2, "creation_date": 1457156938, "post_id": 35810167, "comment_id": 59289955, "body": "Why not just use Java&#39;s <code>sublist</code>? It does exactly the same, it creates a view of the original list. <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList(int,%20int)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/&hellip;</a>"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1457175907, "post_id": 35810167, "comment_id": 59294643, "body": "Isn&#39;t this what Sequences are for?"}, {"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1457352418, "post_id": 35810167, "comment_id": 59352033, "body": "@hotkey I didn&#39;t realize sublists were views. Good to know."}, {"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "edited": false, "score": 0, "creation_date": 1457352537, "post_id": 35810167, "comment_id": 59352123, "body": "@Krill Rakhman Yes, hence the edit note. But just because <code>Sequence</code>s are specifically for lazy operations, it doesn&#39;t mean you can&#39;t be lazy elsewhere."}], "tags": [], "owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "is_accepted": false, "score": 3, "last_activity_date": 1457352763, "last_edit_date": 1457352763, "creation_date": 1457153507, "answer_id": 35810167, "question_id": 35808022, "link": "https://stackoverflow.com/questions/35808022/kotlin-list-tail-function/35810167#35810167", "title": "Kotlin List tail function", "body": "<p>Yours and @Vladimir Mironov 's solutions <em>will</em> work, but they automatically create eager copies of the original list (sans the first element), which can take a very long time for larger lists. I would define it with a wrapper <code>List</code> class that delegates its methods to the wrapped one, ignoring the first element using index adjustments:</p>\n\n<pre><code>private class TailList&lt;T&gt; (private val list: List&lt;T&gt;) : List&lt;T&gt; {\n    override val size: Int\n        get() = list.size -1\n\n    override fun isEmpty(): Boolean = size == 0\n\n    override fun iterator(): Iterator&lt;T&gt; = listIterator()\n    override fun listIterator(): ListIterator&lt;T&gt; = list.listIterator(1)\n    override fun listIterator(index: Int): ListIterator&lt;T&gt; = list.listIterator(index + 1)\n    override fun subList(fromIndex: Int, toIndex: Int): List&lt;T&gt; = list.subList(fromIndex + 1, toIndex + 1)\n    override fun lastIndexOf(element: T): Int = list.lastIndexOf(element) - 1\n    override operator fun get(index: Int): T = list[index + 1]\n\n    // The following member functions require the copy of a new list\n    override fun containsAll(elements: Collection&lt;T&gt;): Boolean = tailList.containsAll(elements)\n    override fun contains(element: T): Boolean = tailList.contains(element)\n    override fun indexOf(element: T): Int = tailList.indexOf(element)\n\n    private val tailList by lazy { ArrayList(this) }  // makes a proper copy the elements this list represents\n}\n</code></pre>\n\n<p>You may notice the functions in the section after the comment still end up making an eager copy. I only did this for simplicity's sake. For memory's sake, I made a <code>lazy</code> <code>tailList</code> property </p>\n\n<p>They could all be implemented by iterating over the collection manually, rather than doing some sort of delegating. If that's what you'd prefer, I'm sure you can figure it out.</p>\n\n<p>With that, the head and tail properties become this:</p>\n\n<pre><code>val &lt;T&gt; List&lt;T&gt;.tail: List&lt;T&gt; \n    get() =\n        if(this.isEmpty())\n            throw IllegalStateException(\"Cannot get the tail of an empty List\")\n        else\n            TailList(this)\n\nval &lt;T&gt; List&lt;T&gt;.head: T\n    get() = this[0]  // or first()\n</code></pre>\n\n<p>If you really need it, I can add an update to make the last three member functions so that they don't make eager copies.</p>\n\n<p>EDIT:\nNote: If you followed the conventions that Kotlin has followed so far, you wouldn't make the <code>List</code>'s tail be lazy, like this, since all of their functions on <code>List</code> make eager copies. Instead, especially if you're using <code>head</code> and <code>tail</code> to recursively iterate over a list, I would see if you could attempt this wrapper idea on <code>Sequence</code> somehow. <code>Sequence</code>'s whole point of existence is for lazy work on collections.</p>\n\n<p>EDIT 2:\nApparently sublist() creates a view, and is therefore already lazy. Essentially, I've just taught you how to create the implementation for sublist, except I narrowed it to only the tail.</p>\n\n<p>So, in that case just use sublist() for your tail function.</p>\n"}, {"comments": [{"owner": {"reputation": 3080, "user_id": 477399, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4759812141203f58c1f064b79735328c?s=128&d=identicon&r=PG", "display_name": "PlexQ", "link": "https://stackoverflow.com/users/477399/plexq"}, "edited": false, "score": 0, "creation_date": 1606414999, "post_id": 55878987, "comment_id": 114963098, "body": "Seems a bit embarrassing that this isn&#39;t a built-in part of the API in Kotlin... hard to take a  functional language seriously without car/cdr head/tail..."}], "tags": [], "owner": {"reputation": 949, "user_id": 951155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46953d14e2bb66efbad8d8e502528bc?s=128&d=identicon&r=PG", "display_name": "incises", "link": "https://stackoverflow.com/users/951155/incises"}, "is_accepted": false, "score": 1, "last_activity_date": 1556356829, "last_edit_date": 1556356829, "creation_date": 1556356452, "answer_id": 55878987, "question_id": 35808022, "link": "https://stackoverflow.com/questions/35808022/kotlin-list-tail-function/55878987#55878987", "title": "Kotlin List tail function", "body": "<p>If working with non mutable lists, it is perfectly safe, and less memory consuming, to use simply :</p>\n\n<pre><code>fun &lt;T&gt; List&lt;T&gt;.tail(): List&lt;T&gt; =\n    if (isEmpty()) throw IllegalArgumentException(\"tail called on empty list\")\n    else subList(1, count())\n</code></pre>\n"}], "owner": {"reputation": 903, "user_id": 4759312, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-a5WVXQSOHCA/AAAAAAAAAAI/AAAAAAAAABM/ZQN9cG0YL1c/photo.jpg?sz=128", "display_name": "Abdelrhman Talat", "link": "https://stackoverflow.com/users/4759312/abdelrhman-talat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7531, "favorite_count": 1, "accepted_answer_id": 35808195, "answer_count": 3, "score": 33, "last_activity_date": 1556356829, "creation_date": 1457134559, "last_edit_date": 1458435078, "question_id": 35808022, "link": "https://stackoverflow.com/questions/35808022/kotlin-list-tail-function", "title": "Kotlin List tail function", "body": "<p>I am trying to find a tail function in <code>List&lt;T&gt;</code> but I couldn't find any. I ended up doing this.</p>\n\n<pre><code>fun &lt;T&gt; List&lt;T&gt;.tail() = this.takeLast(this.size -1)\n</code></pre>\n\n<p>Is there a better way to do this?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 6, "last_activity_date": 1457106604, "creation_date": 1457106604, "answer_id": 35800258, "question_id": 35799902, "link": "https://stackoverflow.com/questions/35799902/how-to-cast-listmyclass-to-listt/35800258#35800258", "title": "How to cast List&lt;&lt;MyClass&gt; to List&lt;T&gt;?", "body": "<p>The compiler cannot figure out the relation between the types <code>List&lt;T&gt;</code> and <code>List&lt;Animal&gt;</code> in your example, so you should make an unchecked cast with the <a href=\"https://kotlinlang.org/docs/reference/typecasts.html#unsafe-cast-operator\" rel=\"noreferrer\"><code>as</code> operator</a>. Also note that you're using the <a href=\"https://kotlinlang.org/docs/reference/typecasts.html#is-and-is-operators\" rel=\"noreferrer\"><code>is</code> operator</a> where you probably meant to use a simple equality check:</p>\n\n<pre><code>val list: List&lt;Animal&gt; = listOf(Animal(1), Animal(2), Animal(7))\n\nval storage = object : Storage {\n    fun &lt;T&gt; fetch(clazz: Class&lt;T&gt;): List&lt;T&gt; {\n        if (clazz == Animal::class.java) {\n            return list as List&lt;T&gt;\n        }\n        throw RuntimeException()\n    }\n}\n</code></pre>\n\n<p>If the unchecked cast warning disturbs you, you can suppress it with the following annotation: <code>@Suppress(\"UNCHECKED_CAST\")</code></p>\n"}], "owner": {"reputation": 2279, "user_id": 1298357, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7f400efe02d25cb9ee37fe9a44d05f0?s=128&d=identicon&r=PG", "display_name": "Alex Klimashevsky", "link": "https://stackoverflow.com/users/1298357/alex-klimashevsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 35800258, "answer_count": 1, "score": 2, "last_activity_date": 1457106604, "creation_date": 1457105653, "question_id": 35799902, "link": "https://stackoverflow.com/questions/35799902/how-to-cast-listmyclass-to-listt", "title": "How to cast List&lt;&lt;MyClass&gt; to List&lt;T&gt;?", "body": "<p>I tried to return a specific list from generic method </p>\n\n<p>code bellow:</p>\n\n<pre><code>val list: List&lt;Animal&gt; = listOf(Animal(1), Animal(2), Animal(7))\n\nval storage = object : Storage  {\n    override fun &lt;T&gt; fetch(clazz: Class&lt;T&gt;): List&lt;T&gt; {\n       if(clazz is Animal::class.java){\n           return list\n       }\n        throw RuntimeException()\n    }\n\n} \n</code></pre>\n\n<p>But I have an exception:</p>\n\n<pre><code>Error:(14, 20) Kotlin: Type mismatch: inferred type is kotlin.collections.List&lt;polar.QueryTest.Animal&gt; but kotlin.collections.List&lt;T&gt; was expected\n</code></pre>\n\n<p>How to return list correctly?</p>\n"}, {"tags": ["android", "annotations", "kotlin"], "comments": [{"owner": {"reputation": 3033, "user_id": 304266, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2Iiva.jpg?s=128&g=1", "display_name": "ubuntudroid", "link": "https://stackoverflow.com/users/304266/ubuntudroid"}, "edited": false, "score": 1, "creation_date": 1457792489, "post_id": 35798993, "comment_id": 59572777, "body": "Thought this could maybe be fixed by <a href=\"https://youtrack.jetbrains.com/issue/KT-8733\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-8733</a>, but unfortunately the fix doesn&#39;t seem to work when generateStubs is enabled."}, {"owner": {"reputation": 3044, "user_id": 926568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mOOGR.png?s=128&g=1", "display_name": "deviant", "link": "https://stackoverflow.com/users/926568/deviant"}, "edited": false, "score": 0, "creation_date": 1480091715, "post_id": 35798993, "comment_id": 68839159, "body": "i have exactly same issue with 1.0.5-2"}, {"owner": {"reputation": 1550, "user_id": 2523007, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aCsFp.jpg?s=128&g=1", "display_name": "vanomart", "link": "https://stackoverflow.com/users/2523007/vanomart"}, "edited": false, "score": 0, "creation_date": 1480287512, "post_id": 35798993, "comment_id": 68887333, "body": "I have a similar problem. If I want to generate the signed apks, I need to compile each buildType/flavor combination twice, which makes automated builds so much more unusable."}, {"owner": {"reputation": 591, "user_id": 1178797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6a5d43dc788519aeede4e31589dda34?s=128&d=identicon&r=PG", "display_name": "AlexeyGorovoy", "link": "https://stackoverflow.com/users/1178797/alexeygorovoy"}, "edited": false, "score": 0, "creation_date": 1487249052, "post_id": 35798993, "comment_id": 71704641, "body": "Have you managed to find the cause of the problem? Experiencing pretty similar issues with my current project :("}, {"owner": {"reputation": 3033, "user_id": 304266, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2Iiva.jpg?s=128&g=1", "display_name": "ubuntudroid", "link": "https://stackoverflow.com/users/304266/ubuntudroid"}, "edited": false, "score": 0, "creation_date": 1487280885, "post_id": 35798993, "comment_id": 71726832, "body": "It seems to have been resolved. After several updates to Kotlin and the Android Studio plugin I just very seldomly have to build twice. I removed the generate stubs thingy though as it seems it isn&#39;t necessary."}], "answers": [{"comments": [{"owner": {"reputation": 3033, "user_id": 304266, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2Iiva.jpg?s=128&g=1", "display_name": "ubuntudroid", "link": "https://stackoverflow.com/users/304266/ubuntudroid"}, "edited": false, "score": 1, "creation_date": 1481385045, "post_id": 41076056, "comment_id": 69360909, "body": "No, we ditched retrolambda when making the move to Kotlin. Thanks anyway! :)"}, {"owner": {"reputation": 378, "user_id": 957370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a43470d28feaa2d4847c8907ab6cf653?s=128&d=identicon&r=PG", "display_name": "Jan Rabe", "link": "https://stackoverflow.com/users/957370/jan-rabe"}, "reply_to_user": {"reputation": 3033, "user_id": 304266, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2Iiva.jpg?s=128&g=1", "display_name": "ubuntudroid", "link": "https://stackoverflow.com/users/304266/ubuntudroid"}, "edited": false, "score": 0, "creation_date": 1481545106, "post_id": 41076056, "comment_id": 69405495, "body": "I&#39;m applying kotlin to older projects which use retrolambda, so it is possible to use both as advertised."}, {"owner": {"reputation": 42404, "user_id": 375394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/683e4fa6e07a857017ab8b0900904ad1?s=128&d=identicon&r=PG", "display_name": "MooGoo", "link": "https://stackoverflow.com/users/375394/moogoo"}, "edited": false, "score": 2, "creation_date": 1485718611, "post_id": 41076056, "comment_id": 71030613, "body": "omg this fixed all the weird issues I was having with Kotlin and Android. Amazing. Thank you."}, {"owner": {"reputation": 3713, "user_id": 3801327, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jBaPg.png?s=128&g=1", "display_name": "Rick Sanchez", "link": "https://stackoverflow.com/users/3801327/rick-sanchez"}, "edited": false, "score": 2, "creation_date": 1499250756, "post_id": 41076056, "comment_id": 76822915, "body": "I just had the exact same issue. I had to build twice for currentchanges to show up. Kind of wierdly, always the changes from the previous compile round showed up.  Do you have a link to the exact issue, I&#39;m curious as to the reason why this happened."}], "tags": [], "owner": {"reputation": 378, "user_id": 957370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a43470d28feaa2d4847c8907ab6cf653?s=128&d=identicon&r=PG", "display_name": "Jan Rabe", "link": "https://stackoverflow.com/users/957370/jan-rabe"}, "is_accepted": false, "score": 8, "last_activity_date": 1481376307, "creation_date": 1481376307, "answer_id": 41076056, "question_id": 35798993, "link": "https://stackoverflow.com/questions/35798993/unresolved-reference-kotlin-needs-2-builds-after-clean-to-pick-up-code-when-usi/41076056#41076056", "title": "Unresolved reference: Kotlin needs 2 builds after clean to pick up code when using kapt", "body": "<p>If you use kotlin and retrolambda this might fix it: </p>\n\n<pre><code>me.tatarka:gradle-retrolambda:3.4.0\n</code></pre>\n\n<p><a href=\"https://gist.github.com/kibotu/fafd3047a46a7e838ab61a02804fb3ff\" rel=\"noreferrer\">github gist</a></p>\n"}], "owner": {"reputation": 3033, "user_id": 304266, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2Iiva.jpg?s=128&g=1", "display_name": "ubuntudroid", "link": "https://stackoverflow.com/users/304266/ubuntudroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1136, "favorite_count": 3, "answer_count": 1, "score": 16, "last_activity_date": 1481376307, "creation_date": 1457103170, "last_edit_date": 1457788090, "question_id": 35798993, "link": "https://stackoverflow.com/questions/35798993/unresolved-reference-kotlin-needs-2-builds-after-clean-to-pick-up-code-when-usi", "title": "Unresolved reference: Kotlin needs 2 builds after clean to pick up code when using kapt", "body": "<p>In our Android app we're using <a href=\"https://github.com/Raizlabs/DBFlow\">DBFlow</a> to access the SQLite database. We're referencing the classes generated by DBFlow via Kotlin. We are already aware of the fact that we have the model classes as well as the database class in Java as code generation <a href=\"https://github.com/Raizlabs/DBFlow/issues/596\">won't work</a> when writing these classes in Kotlin.</p>\n\n<p>However we still have to build the code twice after every project clean. Executing the first build on a device results in <code>ClassNotFoundExceptions</code> for seemingly random Kotlin classes (even if they don't access code generated by DBFlow or any of the model classes defined by us). The same is reported already at compile time when enabling Proguard which of course fails the build. The second build always succeeds.</p>\n\n<p>The funny thing is, that code generation already works at the first run - the classes are there and are also picked up by the IDE. But the compiler somehow can't find them making me think that the code generation happens too late in the build process. On the other hand as explained above there are also classes not found which don't have to do anything with code generation and/or annotation processing.</p>\n\n<p>So is there a better solution to this problem than a second build?</p>\n\n<p>For reference, the relevant parts of our app's <code>build.gradle</code> looks like this - just like the <a href=\"https://github.com/Raizlabs/DBFlow#including-in-your-project\">DBFlow documentation</a> is suggesting:</p>\n\n<pre><code>def dbflow_version = \"3.0.0-beta4\"\n\ndependencies {\n    kapt \"com.github.Raizlabs.DBFlow:dbflow-processor:${dbflow_version}\"\n    compile \"com.github.Raizlabs.DBFlow:dbflow-core:${dbflow_version}\"\n    compile \"com.github.Raizlabs.DBFlow:dbflow:${dbflow_version}\"\n}\n\nkapt {\n   generateStubs = true\n}\n</code></pre>\n\n<p><strong>Edit:</strong> I found that I also have to rebuild twice for every change I make to the code. It compiles correctly in the first build if I didn't clean before, but the changes simply aren't picked up.</p>\n"}, {"tags": ["javadoc", "kotlin", "kdoc", "kotlin-dokka"], "comments": [{"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1457021092, "post_id": 35776564, "comment_id": 59225903, "body": "Does <code>{@inheritDoc}</code> not work? Did you try it?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 1, "creation_date": 1457021390, "post_id": 35776564, "comment_id": 59226147, "body": "@CaseyB, yes, I did, and neither IntelliJ nor dokka understands it, they just show it as text."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 2, "creation_date": 1457021472, "post_id": 35776564, "comment_id": 59226204, "body": "I can&#39;t find anything documenting my finding but from what I can tell Kotlin Doc inherits the documentation when overriding a function if no documentation is specified on the override. Now what I&#39;m wondering is how to &quot;extend&quot;/&quot;include&quot; the base documentation..."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1457023916, "post_id": 35776564, "comment_id": 59228033, "body": "@mfulton26, OK, now I see that dokka inserts the parent&#39;s docs by default. It will be great if you find a way to customize them, but just inheriting them would suffice for me."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1457024649, "post_id": 35776564, "comment_id": 59228609, "body": "@hotkey I did look through <a href=\"https://github.com/Kotlin/dokka\" rel=\"nofollow noreferrer\">github.com/Kotlin/dokka</a> but didn&#39;t find anything useful. You might create a GitHub issue or a Kotlin YouTrack issue to inquire about such."}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 258848, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2Ckug.jpg?s=128&g=1", "display_name": "dimsuz", "link": "https://stackoverflow.com/users/258848/dimsuz"}, "edited": false, "score": 9, "creation_date": 1465079395, "post_id": 35838071, "comment_id": 62753124, "body": "Yet for some reason when I hit <code>Ctrl + Q</code> on an inherited function with no documentation, it doesn&#39;t show any, however the base function does have it specified and when I <code>Ctrl + B</code> to it and hit <code>Ctrl + Q</code> on a base function, documentation is shown. Maybe this is some ide-plugin bug."}, {"owner": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "edited": false, "score": 6, "creation_date": 1487232326, "post_id": 35838071, "comment_id": 71692586, "body": "@yole When I hit the quick documentation shortcut on an overridden method from a java class/interface, I see no documentation while the base class/interface has some documentation. This is really inconvenient. Is there an open issue on that?"}, {"owner": {"reputation": 419, "user_id": 2502247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ce835fa94d41ab0460bdb28f9605b0?s=128&d=identicon&r=PG", "display_name": "MariusVolkhart", "link": "https://stackoverflow.com/users/2502247/mariusvolkhart"}, "reply_to_user": {"reputation": 9051, "user_id": 4433326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-0eT2bjizzRQ/AAAAAAAAAAI/AAAAAAAA6WQ/O6mD60Yyahc/photo.jpg?sz=128", "display_name": "Louis CAD", "link": "https://stackoverflow.com/users/4433326/louis-cad"}, "edited": false, "score": 2, "creation_date": 1592991555, "post_id": 35838071, "comment_id": 110620749, "body": "@LouisCAD It looks like there is. See <a href=\"https://youtrack.jetbrains.com/issue/KT-25035\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-25035</a>"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 29, "last_activity_date": 1457334710, "creation_date": 1457334710, "answer_id": 35838071, "question_id": 35776564, "link": "https://stackoverflow.com/questions/35776564/how-do-i-inherit-kdoc-documentation/35838071#35838071", "title": "How do I inherit KDoc documentation?", "body": "<p>Dokka always copies the documentation from a base member to an inherited one if the inherited member does not have its own documentation. There is no way to combine the base member documentation with additional text provided in the inherited member.</p>\n\n<p>(Dokka doesn't support the <code>@inheritdoc</code> Javadoc tag because this inevitably leads to the proliferation of comments consisting of only <code>/** @inheritdoc */</code> which I find super useless and redundant.)</p>\n"}], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3501, "favorite_count": 1, "accepted_answer_id": 35838071, "answer_count": 1, "score": 21, "last_activity_date": 1515511093, "creation_date": 1457019698, "last_edit_date": 1457044911, "question_id": 35776564, "link": "https://stackoverflow.com/questions/35776564/how-do-i-inherit-kdoc-documentation", "title": "How do I inherit KDoc documentation?", "body": "<p>In Java's Javadoc, there is a way to inherit a method's documentation in a subclass using <a href=\"http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html#@inheritDoc\" rel=\"noreferrer\"><code>{@inheritDoc}</code> tag</a>.</p>\n\n<p>Is there a way to do the same in Kotlin's KDoc?</p>\n\n<p>Basically, what I'd like to do is the following:</p>\n\n<pre><code>abstract class Base {\n    /**\n     * Some KDoc documentation here.\n     */\n    abstract fun foo()\n}\n\nclass Derived: Base() {\n    /**\n     * Here is all the documentation from Base#foo's KDoc inherited.\n     *\n     * And here goes something more in addition.\n     */\n    override fun foo() { /* ... */ }\n}\n</code></pre>\n"}, {"tags": ["android", "maven", "maven-3", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 25134, "user_id": 477476, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Qf4TT.png?s=128&g=1", "display_name": "Cactus", "link": "https://stackoverflow.com/users/477476/cactus"}, "edited": false, "score": 0, "creation_date": 1457016427, "post_id": 35775293, "comment_id": 59221983, "body": "I should also add that what you see is what I got: I&#39;m not using any IDEs. This is my full source tree, and I&#39;m running <code>mvn3 package</code> to generate my APK file."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1457094156, "post_id": 35775293, "comment_id": 59261446, "body": "You probably need to add it to some lifecycle goal, so it knows when to execute.  Given that Android pushes the idea of Gradle, you may be going a bit against the grain here."}], "answers": [{"comments": [{"owner": {"reputation": 2416, "user_id": 168722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2733344efeaed9e345f76193f94e9ca7?s=128&d=identicon&r=PG", "display_name": "xap4o", "link": "https://stackoverflow.com/users/168722/xap4o"}, "edited": false, "score": 0, "creation_date": 1461312540, "post_id": 35822870, "comment_id": 61151698, "body": "I would really like to use Maven for building my kotlin android project."}], "tags": [], "owner": {"reputation": 386, "user_id": 3836081, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000265489427/picture?type=large", "display_name": "Natalia Selezneva", "link": "https://stackoverflow.com/users/3836081/natalia-selezneva"}, "is_accepted": true, "score": 1, "last_activity_date": 1457235903, "creation_date": 1457235903, "answer_id": 35822870, "question_id": 35775293, "link": "https://stackoverflow.com/questions/35775293/using-kotlins-android-resource-extensions-using-maven-only/35822870#35822870", "title": "Using Kotlin&#39;s Android resource extensions using Maven only", "body": "<p>kotlin-android-extensions is now a part of kotlin-gradle plugin. kotlin-maven plugin doesn't support android at all now. There is an <a href=\"https://youtrack.jetbrains.com/issueMobile/KT-4533\" rel=\"nofollow\">issue</a> in your tracker that you can vote for.</p>\n"}], "owner": {"reputation": 25134, "user_id": 477476, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Qf4TT.png?s=128&g=1", "display_name": "Cactus", "link": "https://stackoverflow.com/users/477476/cactus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 35822870, "answer_count": 1, "score": 1, "last_activity_date": 1457235903, "creation_date": 1457016367, "question_id": 35775293, "link": "https://stackoverflow.com/questions/35775293/using-kotlins-android-resource-extensions-using-maven-only", "title": "Using Kotlin&#39;s Android resource extensions using Maven only", "body": "<p>I'd like to use the <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow\">Kotlin Android extensions</a> in my Maven-based project, but despite adding <code>kotlin-android-extensions</code> to my set of Maven plugins, it just doesn't take.</p>\n\n<p>My, I think fairly minimal, setup is the following:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 AndroidManifest.xml\n\u251c\u2500\u2500 pom.xml\n\u251c\u2500\u2500 res\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 layout\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 main_activity.xml\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 activity.kt\n</code></pre>\n\n<h1><code>AndroidManifest.xml</code>:</h1>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n          package=\"com.example.KotlinAndroid\"\n          android:versionCode=\"1\"\n          android:versionName=\"0.1-SNAPSHOT\"&gt;\n  &lt;uses-sdk\n      android:minSdkVersion=\"14\"\n      android:targetSdkVersion=\"19\" /&gt;  \n  &lt;application android:label=\"Hello Kotlin\"&gt;    \n    &lt;activity android:name=\".activity.MainActivity\"&gt;\n      &lt;intent-filter&gt;\n        &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n        &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n      &lt;/intent-filter&gt;\n    &lt;/activity&gt;   \n  &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n\n<h1><code>pom.xml</code>:</h1>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.example.KotlinAndroid&lt;/groupId&gt;\n  &lt;artifactId&gt;hello-kotlin&lt;/artifactId&gt;\n  &lt;packaging&gt;apk&lt;/packaging&gt;\n  &lt;name&gt;hello-kotlin&lt;/name&gt;\n  &lt;version&gt;0.1-SNAPSHOT&lt;/version&gt;\n\n  &lt;dependencies&gt;    \n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.android&lt;/groupId&gt;\n      &lt;artifactId&gt;android&lt;/artifactId&gt;\n      &lt;version&gt;4.1.1.4&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;   \n    &lt;dependency&gt;\n      &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n      &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n      &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;/dependency&gt;    \n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;com.jayway.maven.plugins.android.generation2&lt;/groupId&gt;\n        &lt;artifactId&gt;android-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.2&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;sdk&gt;\n            &lt;platform&gt;19&lt;/platform&gt;\n          &lt;/sdk&gt;\n          &lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;\n        &lt;/configuration&gt;\n        &lt;extensions&gt;true&lt;/extensions&gt;\n      &lt;/plugin&gt;      \n      &lt;plugin&gt;\n        &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;compile&lt;/id&gt;\n            &lt;phase&gt;process-sources&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;         \n          &lt;execution&gt;\n            &lt;id&gt;test-compile&lt;/id&gt;\n            &lt;phase&gt;process-test-sources&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;test-compile&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-android&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-android-extensions&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0&lt;/version&gt;\n      &lt;/plugin&gt;\n      &lt;!-- I needed to add this plugin otherwise my Kotlin source\n           files are not found --&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n        &lt;version&gt;1.10&lt;/version&gt;\n        &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;goals&gt;&lt;goal&gt;add-source&lt;/goal&gt;&lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;sources&gt;\n                &lt;source&gt;src&lt;/source&gt;\n              &lt;/sources&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;      \n    &lt;/plugins&gt;\n  &lt;/build&gt;  \n&lt;/project&gt;\n</code></pre>\n\n<h1><code>res/layout/main_activity.xml</code>:</h1>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;    \n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n  &lt;TextView\n      android:layout_height=\"wrap_content\"\n      android:layout_width=\"match_parent\"\n      android:text=\"Hello World!\"\n      android:id=\"@+id/textView\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<h1><code>src/activity.kt</code>:</h1>\n\n<pre><code>package com.example.KotlinAndroid.activity\n\nimport android.os.Bundle\nimport android.app.Activity\nimport com.example.KotlinAndroid.R\n\nclass MainActivity() : Activity() {\n\n    protected override fun onCreate(savedInstanceState : Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.main_activity)\n    }\n}\n</code></pre>\n\n<p>So this all works until I change <code>activity.kt</code> to import <code>kotlinx.android.synthetic.main.main_activity.*</code> instead of <code>import com.example.KotlinAndroid.R</code>, which then fails with</p>\n\n<blockquote>\n  <ul>\n  <li><p>[ERROR] <code>hello-kotlin/src/activity.kt</code>: (6, 8)\n  Unresolved reference: <code>kotlinx</code></p></li>\n  <li><p>[ERROR] <code>hello-kotlin/src/activity.kt</code>: (12, 24)\n  Unresolved reference: <code>R</code></p></li>\n  </ul>\n</blockquote>\n\n<p>All the solutions to this problem that I've found apply only to Gradle builds, in which case apparently adding the <code>kotlin-android-extensions</code> plugin is enough. However, in my Maven-only build, I already have <code>kotlin-android-extensions</code> in my list of plugins (see the <code>pom.xml</code> file); and yet Kotlin doesn't generate the required <code>kotlinx.*</code> classes.</p>\n"}, {"tags": ["lambda", "functional-programming", "kotlin"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1456979624, "post_id": 35763172, "comment_id": 59199307, "body": "What happens if you print test1 and test2 separately?"}, {"owner": {"reputation": 618, "user_id": 3496176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TrPop.jpg?s=128&g=1", "display_name": "zhumengzhu", "link": "https://stackoverflow.com/users/3496176/zhumengzhu"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1456982266, "post_id": 35763172, "comment_id": 59200140, "body": "@DougStevenson Same result."}, {"owner": {"reputation": 618, "user_id": 3496176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TrPop.jpg?s=128&g=1", "display_name": "zhumengzhu", "link": "https://stackoverflow.com/users/3496176/zhumengzhu"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1456984870, "post_id": 35763172, "comment_id": 59201059, "body": "<a href=\"http://try.kotlinlang.org/#/UserProjects/nei3a1vd39bscpdg48t9oicpbu/3u9nntolr1tdgg9pabf2nlls4d\" rel=\"nofollow noreferrer\">You can try online</a>"}], "answers": [{"comments": [{"owner": {"reputation": 618, "user_id": 3496176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TrPop.jpg?s=128&g=1", "display_name": "zhumengzhu", "link": "https://stackoverflow.com/users/3496176/zhumengzhu"}, "edited": false, "score": 0, "creation_date": 1456986382, "post_id": 35764376, "comment_id": 59201675, "body": "Thanks for your answer. As you said, head should only be called on an instance of HTML. In my first example, it should either be a semantics error which can&#39;t pass compile or just effect nothing which will add a Head into HTML."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 618, "user_id": 3496176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TrPop.jpg?s=128&g=1", "display_name": "zhumengzhu", "link": "https://stackoverflow.com/users/3496176/zhumengzhu"}, "edited": false, "score": 1, "creation_date": 1456987197, "post_id": 35764376, "comment_id": 59202053, "body": "No, the second head still gets created and added to the <code>children</code> list of the outer html. Either, way you end up with the same set of children. The whole thing doesn&#39;t get converted to a string until the very end.  Try walking through in a debugger to see for yourself what happens at runtime."}, {"owner": {"reputation": 618, "user_id": 3496176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TrPop.jpg?s=128&g=1", "display_name": "zhumengzhu", "link": "https://stackoverflow.com/users/3496176/zhumengzhu"}, "edited": false, "score": 0, "creation_date": 1456987766, "post_id": 35764376, "comment_id": 59202304, "body": "I wonder how Kotlin makes the second invocation of <code>head</code> be called on the outer <code>html</code> instance. Does the compiler just try to find a <code>head</code> function in <code>Head</code> and then in <code>HTML</code> and finally transform the invocation of <code>head</code> to <code>this@html.head</code>?"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 618, "user_id": 3496176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TrPop.jpg?s=128&g=1", "display_name": "zhumengzhu", "link": "https://stackoverflow.com/users/3496176/zhumengzhu"}, "edited": false, "score": 0, "creation_date": 1456987896, "post_id": 35764376, "comment_id": 59202367, "body": "Yes, the compiler is smart.  It figures it out a way to make it work. I don&#39;t know for a fact, but it appears that the compiler checks each scope for a receiver that&#39;s able to handle the <code>head</code> method invocation, and picks the first one it finds, starting from the inside."}, {"owner": {"reputation": 618, "user_id": 3496176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TrPop.jpg?s=128&g=1", "display_name": "zhumengzhu", "link": "https://stackoverflow.com/users/3496176/zhumengzhu"}, "edited": false, "score": 0, "creation_date": 1456988377, "post_id": 35764376, "comment_id": 59202627, "body": "Thanks for your patience. I&#39;ll use debugger to help me understand what just happens. It&#39;s just a little more difficult than to debug a program in Java 7."}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 1, "last_activity_date": 1456984973, "creation_date": 1456984973, "answer_id": 35764376, "question_id": 35763172, "link": "https://stackoverflow.com/questions/35763172/how-to-write-correct-html-generator-in-kotlin/35764376#35764376", "title": "How to write correct HTML generator in Kotlin", "body": "<p>If you look carefully at the \"full definition of the com.example.html package\", you'll see that <code>head</code> is a method of <code>HTML</code>.  This means that <code>head</code> can only be called on an instance of <code>HTML</code>.  The way you're expecting it to work, there would have to be a <code>head</code> member of the <code>Head</code> class.</p>\n\n<p>In your first example code, the second invocation of <code>head</code> is actually being called on the outer <code>html</code> instance receiver.  This means you're effective adding the new element it creates to <code>html</code> and <em>not</em> its immediately enclosing <code>head</code>.</p>\n\n<p>To put this another way, your first code example is equivalent to this:</p>\n\n<pre><code>html {\n    head {\n        title { +\"First Title\" }\n        this@html.head {\n            title { +\"Second Title\" }\n        }\n    }\n}\n</code></pre>\n\n<p>Note <code>this@html</code> which is qualifying exactly which outer receiver instance is being used to invoke <code>head</code>. Also note that <code>this@head</code> won't compile because, as I said, the <code>Head</code> class does not have a <code>head</code> method.</p>\n"}], "owner": {"reputation": 618, "user_id": 3496176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TrPop.jpg?s=128&g=1", "display_name": "zhumengzhu", "link": "https://stackoverflow.com/users/3496176/zhumengzhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 35764376, "answer_count": 1, "score": 1, "last_activity_date": 1456984973, "creation_date": 1456979147, "question_id": 35763172, "link": "https://stackoverflow.com/questions/35763172/how-to-write-correct-html-generator-in-kotlin", "title": "How to write correct HTML generator in Kotlin", "body": "<p>I'm learning Kotlin and reading the section <a href=\"https://kotlinlang.org/docs/reference/type-safe-builders.html\" rel=\"nofollow\">Type-Safe Builders</a></p>\n\n<p>I followed it's example and coded some tests and then I found a problem which I couldn't understand.\nThe problem is that it seem that the following code is equivalent:</p>\n\n<ol>\n<li><p>Nested <code>head</code></p>\n\n<pre><code>html {\n    head {\n        title { +\"First Title\" }\n        head {\n            title { +\"Second Title\" }\n        }\n    }\n}\n</code></pre></li>\n<li><p>Two <code>head</code> on the same level</p>\n\n<pre><code>html {\n    head {\n        title { +\"Second Title\" }\n    }\n\n    head {\n        title { +\"First Title\" }\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>These two function call return same result.\n<a href=\"http://i.stack.imgur.com/3dyGE.png\" rel=\"nofollow\">Test result</a></p>\n\n<p><strong>I think the correct result should be \"What You See Is What You Get\".</strong></p>\n"}]