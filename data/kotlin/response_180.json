[{"tags": ["android", "kotlin", "android-recyclerview", "android-viewholder"], "comments": [{"owner": {"reputation": 6823, "user_id": 3114032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252afdaa2333484facbe94dd89519b82?s=128&d=identicon&r=PG&f=1", "display_name": "Mightian", "link": "https://stackoverflow.com/users/3114032/mightian"}, "edited": false, "score": 0, "creation_date": 1529541599, "post_id": 50958588, "comment_id": 88914944, "body": "why are you storing the item to be deleted in stored preference why not delete it from the list, you used to populate the recyclerview?"}, {"owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "reply_to_user": {"reputation": 6823, "user_id": 3114032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252afdaa2333484facbe94dd89519b82?s=128&d=identicon&r=PG&f=1", "display_name": "Mightian", "link": "https://stackoverflow.com/users/3114032/mightian"}, "edited": false, "score": 0, "creation_date": 1529558756, "post_id": 50958588, "comment_id": 88918639, "body": "because I want to show them in archive fragment so that user may restore them if they wish @war_Hero"}, {"owner": {"reputation": 6823, "user_id": 3114032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252afdaa2333484facbe94dd89519b82?s=128&d=identicon&r=PG&f=1", "display_name": "Mightian", "link": "https://stackoverflow.com/users/3114032/mightian"}, "edited": false, "score": 0, "creation_date": 1529558831, "post_id": 50958588, "comment_id": 88918664, "body": "ok, share the code where you actually delete it"}, {"owner": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "edited": false, "score": 0, "creation_date": 1529558836, "post_id": 50958588, "comment_id": 88918667, "body": "In <code>onBindViewHolder</code> you use <code>holder.adapterPosition</code>. is this for reason? though, it should be replaced with <code>position</code> input variable."}, {"owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "reply_to_user": {"reputation": 6823, "user_id": 3114032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252afdaa2333484facbe94dd89519b82?s=128&d=identicon&r=PG&f=1", "display_name": "Mightian", "link": "https://stackoverflow.com/users/3114032/mightian"}, "edited": false, "score": 0, "creation_date": 1529561007, "post_id": 50958588, "comment_id": 88919522, "body": "@war_Hero if you want that code then no problem I will post it but while debugging I seen when I delete the item it returns a list of remaining element properly. Every time I delete one item, one more disappears. when I delete next item I can see all previously deleted items in the list but they are not displayed. So I doubt if there is any problem with that part. Reason for me to hesitate is that it has lots of unnecessary stuff like condition checks. But if you still want it, then I will definitely post that piece of code."}, {"owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "reply_to_user": {"reputation": 6823, "user_id": 3114032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252afdaa2333484facbe94dd89519b82?s=128&d=identicon&r=PG&f=1", "display_name": "Mightian", "link": "https://stackoverflow.com/users/3114032/mightian"}, "edited": false, "score": 0, "creation_date": 1529561239, "post_id": 50958588, "comment_id": 88919626, "body": "@war_Hero please see edits in the main questions. Even after reading it if you still want the code where I am deleting item then I will post it."}, {"owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "reply_to_user": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "edited": false, "score": 0, "creation_date": 1529561484, "post_id": 50958588, "comment_id": 88919733, "body": "@Maxim yep, I previously did use position. But when I was debugging this problem I found some suggestion in some of stack overflow questions and one of them was to use posiition in place of holder.adapterPosition. Anyways I had this issue before changing from position to holder.adapterPosition and now just to verify it I changed holder.adapterPosition to position but results were no different. I made few edits to question to add more information about the issue. Please do check that and If have any suggestion or know the cause of error then please do share in coments ore answers section."}, {"owner": {"reputation": 6823, "user_id": 3114032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252afdaa2333484facbe94dd89519b82?s=128&d=identicon&r=PG&f=1", "display_name": "Mightian", "link": "https://stackoverflow.com/users/3114032/mightian"}, "edited": false, "score": 0, "creation_date": 1529561500, "post_id": 50958588, "comment_id": 88919742, "body": "are you calling notifyDataSetChanged, or some other method to inform the adapter that the data is changed, also are you sorting in a particular way before you populate the adapter,"}, {"owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "reply_to_user": {"reputation": 6823, "user_id": 3114032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252afdaa2333484facbe94dd89519b82?s=128&d=identicon&r=PG&f=1", "display_name": "Mightian", "link": "https://stackoverflow.com/users/3114032/mightian"}, "edited": false, "score": 0, "creation_date": 1529561802, "post_id": 50958588, "comment_id": 88919886, "body": "@war_Hero As you can see in adapter I have <b>refreshDataOnOrientationChange</b> method that was originally designed to deal with issues that arise after a change in orientation. Well, it contains just updating of the list and then as you can see it is calling notifyDataSetChanged. So by calling <b>refreshDataOnOrientationChange</b> I am indirectly calling notifyDataSetChanged. Code for  <b>refreshDataOnOrientationChange</b> is in Adapter part you can see it. It is just calling notifyDataSetChanged."}, {"owner": {"reputation": 226, "user_id": 3079309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XTHYL.jpg?s=128&g=1", "display_name": "happyvirus", "link": "https://stackoverflow.com/users/3079309/happyvirus"}, "edited": false, "score": 0, "creation_date": 1592587458, "post_id": 50958588, "comment_id": 110489084, "body": "@MandarSadye I&#39;m facing the exact same issue right now. This is something to do with the Recyclerview animation. If I set an animator on recyclerview explicitly and try removing a card by swiping it off, it works. Haven&#39;t exactly found a solution, more like a hack. Let me know if something worked for you. In my case, an item below the one that I swipe and delete,disappears."}, {"owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "reply_to_user": {"reputation": 226, "user_id": 3079309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XTHYL.jpg?s=128&g=1", "display_name": "happyvirus", "link": "https://stackoverflow.com/users/3079309/happyvirus"}, "edited": false, "score": 0, "creation_date": 1592987263, "post_id": 50958588, "comment_id": 110618503, "body": "@happyvirus I got the solution but right now I don&#39;t remember exactly how I solved it. Do one thing, delete the last card and let me know the result. I think in my case When I deleted the first card the index changed so when I deleted the second one the card which I swiped went out of the window while the next card got deleted because of change in the index. Let me know if this works."}, {"owner": {"reputation": 226, "user_id": 3079309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XTHYL.jpg?s=128&g=1", "display_name": "happyvirus", "link": "https://stackoverflow.com/users/3079309/happyvirus"}, "edited": false, "score": 0, "creation_date": 1592987965, "post_id": 50958588, "comment_id": 110618881, "body": "@MandarSadye Thanks for your response. Deleting the last item by swiping it off works as expected and doesn&#39;t mess up anything. I found the problem is that somehow when I delete any item that is NOT the last, the item below it sets its visibility to INVISIBLE since I do see it in Layout Inspector and it does take up space, so now there&#39;s always one item that I can&#39;t see, taking up space. I don&#39;t set the animator explicitly anymore, but have something like item.setvisibility(VISIBLE) at the top and it works. I would definitely love to know why it happens though."}, {"owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "reply_to_user": {"reputation": 226, "user_id": 3079309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XTHYL.jpg?s=128&g=1", "display_name": "happyvirus", "link": "https://stackoverflow.com/users/3079309/happyvirus"}, "edited": false, "score": 0, "creation_date": 1592993803, "post_id": 50958588, "comment_id": 110621948, "body": "@happyvirus I don&#39;t have access to the code but in my case when I was swiping a card, I deleted the card at the index. For example, let&#39;s say I have 5 cards, I delete 2nd card so now 3rd card is actually second. when I swiped 3rd card it returned me 3 instead of 2 because that is the index assigned to it when the recycler view was first displayed. So instead of removing 3rd card(currently 2nd), 4th card(currently 3rd) was removed. See if the same thing happens in your code. There is some method to refresh recycler view content, I don&#39;t remember the exact method."}], "owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 298, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529560759, "creation_date": 1529538894, "last_edit_date": 1529560759, "question_id": 50958588, "link": "https://stackoverflow.com/questions/50958588/when-one-card-is-deleted-from-recyclerview-one-more-card-disappears-along-with-i", "title": "when one card is deleted from RecyclerView one more card disappears along with it", "body": "<p>I am having trouble debugging a recycler view issue. Here I am trying to delete an item from recycler view using the following method:</p>\n\n<ol>\n<li>when I click on the card (one that is to be deleted), it will store the title of a card in shared preference. (so that in future when I open the app I will know what cards are not to be displayed)</li>\n<li>Then I am calling a method which checks if the title in shared preference matches the title of the card and make ArrayList consisting of cards which are not present in shared preference.</li>\n<li>Now I am using this ArrayList to fill cards using <strong>notifyDataSetChanged</strong></li>\n</ol>\n\n<p>My code is as Follows.</p>\n\n<p><strong>Adapter</strong>.</p>\n\n<pre><code>class LocalAdapter(var localCardsInfo : ArrayList&lt;LocalModel&gt;?,var fragment: LocalListingFragment) : RecyclerView.Adapter&lt;LocalHolder&gt;() {\n\n    fun refreshDataOnOrientationChange(mLocalCards : ArrayList&lt;LocalModel&gt;?){\n        if (localCardsInfo!!.size&gt;0)\n            localCardsInfo!!.clear()\n        localCardsInfo = mLocalCards\n        notifyDataSetChanged()\n    }\n\n    override fun getItemCount(): Int {\n        return localCardsInfo!!.size\n    }\n\n    override fun onBindViewHolder(holder: LocalHolder, position: Int) {\n        if (localCardsInfo!=null)\n            holder.updateUI(holder.adapterPosition,localCardsInfo!![holder.adapterPosition])\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): LocalHolder {\n        val card_a : View = LayoutInflater.from(parent.context).inflate(R.layout.card_local_a,parent,false)\n        return LocalHolder(card_a,fragment)\n    }\n\n}\n</code></pre>\n\n<p>ViewHolder</p>\n\n<pre><code>class LocalHolder(itemView : View,val fragment: LocalListingFragment) : RecyclerView.ViewHolder(itemView),OpenedLayoutManagerLocal{\n    fun updateUI(position : Int , localModel: LocalModel){\n        moveButton.setOnClickListener({\n            archived()\n        })\n\n    private fun archived(){\n    ALL_STATIC_CONSTANTS_AND_METHODS.addToArchive(fragment.activity!!,model!!.roomName,model!!.deviceName)\n    itemView.archiveLayout.visibility = View.GONE\n    itemView.elevateLayoutLocal.visibility = View.GONE\n\n    fragment.mAdapter!!.refreshDataOnOrientationChange(ArrayList(LocalDataService.ourInstance.getNonArchivedItems(fragment.activity!!)))\n}\n</code></pre>\n\n<p>For example, if I have six item in recycler view and when I delete one I can see 5 items on the list while debugging, even onbind is called 5 times but only 4 items are displayed.\nI tried my best to debug it yet failed to find a solution and I can't think about what to do next. I tried notifyItemRemoved and notifyItemRangeInserted also but still, I am facing the same issue. It would be a great help if someone can suggest a possible cause of such issue.\nThank you.</p>\n\n<p><strong>Edits:</strong>\nI just experimented by adding dummy button in fragment where recycler view is placed. An to my surprise if I delete element here just element at that position gets deleted and there is no case of disappearing items. So it seems like problem happens when I delete an item from view holder. So I guess I got the cause of the error but can't think of a way to implement it because the original button is in the card so I am forced to use delete procedure inside view holder. Please do suggest if you have any suggestions. Code that I added in fragment is as follow:</p>\n\n<pre><code>    v!!.findViewById&lt;Button&gt;(R.id.delete_button).setOnClickListener({\n        try {\n            val model = LocalDataService.ourInstance.getNonArchivedItems(activity!!)[0]\n            ALL_STATIC_CONSTANTS_AND_METHODS.addToArchive(activity!!,model.roomName,model.deviceName)\n            mAdapter!!.refreshDataOnOrientationChange(ArrayList(LocalDataService.ourInstance.getNonArchivedItems(activity!!)))\n        }catch (e : Throwable){}\n    })\n</code></pre>\n\n<p>Here on this new dummy button click, it deletes the first item in the list gets deleted while on clicking the button on RecyclerView card it deletes one item and then one more item gets disappeared.</p>\n"}, {"tags": ["git", "jenkins", "kotlin", "gitlab", "jenkins-pipeline"], "comments": [{"owner": {"reputation": 34292, "user_id": 627727, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1", "display_name": "mkobit", "link": "https://stackoverflow.com/users/627727/mkobit"}, "edited": false, "score": 0, "creation_date": 1529599666, "post_id": 50957407, "comment_id": 88943708, "body": "First, you have spaces between your Gradle properties on the command line - you should remove them - <code>-Prelease.customPassword=&#39;MYPASSWORD&#39;</code>. If you want to use the SSH components to push to Git you may run into something similar to <a href=\"https://stackoverflow.com/questions/47870282/git-inside-docker-inside-jenkins-pipeline-doesnt-work/47871209#47871209\" title=\"git inside docker inside jenkins pipeline doesnt work\">stackoverflow.com/questions/47870282/&hellip;</a>"}], "owner": {"reputation": 21, "user_id": 9948185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a4ee0f30f54c8e9475509b7e2dfff4?s=128&d=identicon&r=PG&f=1", "display_name": "Lumi", "link": "https://stackoverflow.com/users/9948185/lumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1057, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1529530657, "creation_date": 1529530657, "question_id": 50957407, "link": "https://stackoverflow.com/questions/50957407/in-jenkinsfile-gradlew-release-doesnt-execute-because-of-a-gitlab-push-fail", "title": "In Jenkinsfile ./gradlew release doesn&#39;t execute because of a gitlab push fail", "body": "<p>I am working on a java/kotlin project built using Gradle 4.1. I am using I am using GitLab for the source code, Jenkins(a multibranch pipeline project) for CI and Nexus as the repository for releases and snapshots. In addition, I am using the <a href=\"https://github.com/allegro/axion-release-plugin\" rel=\"nofollow noreferrer\">axion-release-plugin</a>. In my project's Jenkinsfile, among other stages, I have a 'release' stage, in which I run the <code>./gradlew release</code> command. Other stages all run perfectly well, except 'release'(see the last stage in the code snippet from my Jenkinsfile provided below). The build fails while executing this command and the error is:</p>\n\n<pre><code>&gt; Task :release FAILED\nTask ':release' is not up-to-date because:\nTask has not declared any outputs despite executing actions.\nCreating tag: version-0.1.10\nPushing all to remote: origin\nException occurred during push: \norg.eclipse.jgit.api.errors.TransportException: \nhttps://GITLAB/MY_REPO.git: not authorized\n:release (Thread[Task worker for ':',5,main]) completed. Took 0.821 \nsecs.\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':release'.\n&gt; org.eclipse.jgit.api.errors.TransportException: \nhttps://GITLAB/MY_REPO.git: not authorized  \n\nnode { \n</code></pre>\n\n<p>I expect this error, since I am trying push without typing the username or password. I have looked at the <a href=\"http://axion-release-plugin.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">documentation page</a> of the <a href=\"https://github.com/allegro/axion-release-plugin\" rel=\"nofollow noreferrer\">axion-release-plugin</a> and there seems to be very little information on how to push to the repo using <strong>http://</strong> link instead of <strong>ssh</strong>. When I follow the instructions from the documentation for authenticating with http, <a href=\"http://axion-release-plugin.readthedocs.io/en/latest/configuration/authorization.html#http-basic-auth-github-tokens\" rel=\"nofollow noreferrer\">http://axion-release-plugin.readthedocs.io/en/latest/configuration/authorization.html#http-basic-auth-github-tokens</a> and change the release stage to </p>\n\n<pre><code> stage('release') {\n\n      sh \"./gradlew release -Prelease.customUsername= 'MYUSERNAME' -Prelease.customPassword= 'MYPASSWORD' -Prelease.disableChecks\"\n}\n</code></pre>\n\n<p>I get the following error: </p>\n\n<pre><code> FAILURE: Build failed with an exception.\n\n * What went wrong:\n Task 'MYUSERNAME' not found in root project 'MYPROJECT'.\n\n * Try:\n Run gradlew tasks to get a list of available tasks. Run with --debug \n option to get more log output. Run with --scan to get full insights.\n\n * Exception is:\n org.gradle.execution.TaskSelectionException: Task 'MYUSERNAME' not found in \n root project 'MYPROJECT'.\n at org.gradle.execution.TaskSelector.getSelection(TaskSelector.java:116)\n</code></pre>\n\n<p>Clearly, adding the password and username directly to the Jenkinsfile is not working, but I don't know where to get them from. \nI am wondering if anyone knows: </p>\n\n<ol>\n<li>Where can I load the username and password from for my GitLab authentication?</li>\n<li>How can I do that inside the <code>./gradlew release</code> command in the release stage? </li>\n</ol>\n\n<p>My Jenkinsfile:</p>\n\n<pre><code>#!/usr/bin/env groovy\nnode {\n\nenv.JAVA_HOME=\"${tool 'jdk_current'}\"\n\nenv.GRADLE_HOME=\"${tool 'gradle_current'}\"\n\nenv.PATH=\"${env.JAVA_HOME}/bin:${env.PATH}\"\n\nstage('checkout') {\n    checkout scm \n}\n\n....\n\nstage('publish') {\n    sh \"./gradlew publish  --no-daemon --stacktrace\"\n}\n\nstage('quality') {\n\n   withSonarQubeEnv('FFAWS') {\n\n    sh \"./gradlew sonarqube --no-daemon \"\n\n    }\n}\nstage('upload') {\n        sh \"./gradlew upload --no-daemon --stacktrace \"\n}\n\nstage('release') {\n\n        sh \"./gradlew release -Prelease.disableChecks -Prelease.pushTagsOnly --no-daemon --stacktrace \"\n}\n</code></pre>\n\n<p>Thank you! And feel free to ask for more information.</p>\n"}, {"tags": ["android", "webview", "kotlin"], "comments": [{"owner": {"reputation": 3342, "user_id": 4380236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QTHoX.jpg?s=128&g=1", "display_name": "urgentx", "link": "https://stackoverflow.com/users/4380236/urgentx"}, "edited": false, "score": 1, "creation_date": 1529531335, "post_id": 50957074, "comment_id": 88912463, "body": "Where are you calling <code>getActivity()</code>, <code>tryArray = new Intent[0];</code>, and what is the error being thrown?"}, {"owner": {"reputation": 1, "user_id": 3380714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae4de38d99f77c51b84acac7febc700?s=128&d=identicon&r=PG&f=1", "display_name": "aztrock", "link": "https://stackoverflow.com/users/3380714/aztrock"}, "reply_to_user": {"reputation": 3342, "user_id": 4380236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QTHoX.jpg?s=128&g=1", "display_name": "urgentx", "link": "https://stackoverflow.com/users/4380236/urgentx"}, "edited": false, "score": 0, "creation_date": 1529679553, "post_id": 50957074, "comment_id": 88976002, "body": "- if (takePictureIntent.resolveActivity(getActivity().getPackageM&zwnj;&#8203;anager()) != null)  <code>None of the following functions can be called with the arguments supplied:  public open fun getActivity(p0: Context!, p1: Int, p2: Intent!, p3: Int): PendingIntent! defined in android.app.PendingIntent public open fun getActivity(p0: Context!, p1: Int, p2: Intent!, p3: Int, p4: Bundle!): PendingIntent! defined in android.app.PendingIntent</code>   - intentArray = arrayOfNulls&lt;Intent&gt;(0)  <code>Type mismatch: inferred type is Array&lt;Intent?&gt; but Array&lt;Intent&gt; was expected </code>"}, {"owner": {"reputation": 3342, "user_id": 4380236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QTHoX.jpg?s=128&g=1", "display_name": "urgentx", "link": "https://stackoverflow.com/users/4380236/urgentx"}, "edited": false, "score": 0, "creation_date": 1529711602, "post_id": 50957074, "comment_id": 88987918, "body": "Try putting <code>!!</code> after your <code>getActivity()</code> so it doesn&#39;t return a nullable and for the second one use <code>arrayOf&lt;Intent&gt;()</code> for the same reason."}, {"owner": {"reputation": 1, "user_id": 3380714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae4de38d99f77c51b84acac7febc700?s=128&d=identicon&r=PG&f=1", "display_name": "aztrock", "link": "https://stackoverflow.com/users/3380714/aztrock"}, "reply_to_user": {"reputation": 3342, "user_id": 4380236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QTHoX.jpg?s=128&g=1", "display_name": "urgentx", "link": "https://stackoverflow.com/users/4380236/urgentx"}, "edited": false, "score": 0, "creation_date": 1529955110, "post_id": 50957074, "comment_id": 89053529, "body": "UPDATE: 1. getActivity().getPackageManager() --&gt; this@MyActivity.getPackageManager() 2. intentArray = new Intent[0]; --&gt; intentArray = arrayOf&lt;Intent&gt;()  Thanks urgentx"}], "owner": {"reputation": 1, "user_id": 3380714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae4de38d99f77c51b84acac7febc700?s=128&d=identicon&r=PG&f=1", "display_name": "aztrock", "link": "https://stackoverflow.com/users/3380714/aztrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 856, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529529062, "creation_date": 1529529062, "question_id": 50957074, "link": "https://stackoverflow.com/questions/50957074/webview-kotlin-upload-file-camera-and-storage", "title": "WebView kotlin upload file camera and storage", "body": "<p>I have a webview that works with uploading files from the SD, but I haven't been able to get the upload to ask me if it's by camera or SD.</p>\n\n<p>Look for examples of java the only simple and functional one but I didn't manage to migrate it to kotlin</p>\n\n<p><a href=\"https://github.com/chiclaim/android-webview-upload-file\" rel=\"nofollow noreferrer\">example webview upload file</a></p>\n\n<pre><code>            //For Android5.0+\n            public boolean onShowFileChooser(\n                    WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback,\n                    FileChooserParams fileChooserParams) {\n                if (mFilePathCallback != null) {\n                    mFilePathCallback.onReceiveValue(null);\n                }\n                mFilePathCallback = filePathCallback;\n\n                Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n                if (takePictureIntent.resolveActivity(getActivity().getPackageManager()) != null) {\n                    // Create the File where the photo should go\n                    File photoFile = null;\n                    try {\n                        photoFile = createImageFile();\n                        takePictureIntent.putExtra(\"PhotoPath\", mCameraPhotoPath);\n                    } catch (IOException ex) {\n                        // Error occurred while creating the File\n                        Log.e(TAG, \"Unable to create Image File\", ex);\n                    }\n\n                    // Continue only if the File was successfully created\n                    if (photoFile != null) {\n                        mCameraPhotoPath = \"file:\" + photoFile.getAbsolutePath();\n                        takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT,\n                                Uri.fromFile(photoFile));\n                    } else {\n                        takePictureIntent = null;\n                    }\n                }\n\n                Intent contentSelectionIntent = new Intent(Intent.ACTION_GET_CONTENT);\n                contentSelectionIntent.addCategory(Intent.CATEGORY_OPENABLE);\n                contentSelectionIntent.setType(\"image/*\");\n\n                Intent[] intentArray;\n                if (takePictureIntent != null) {\n                    intentArray = new Intent[]{takePictureIntent};\n                } else {\n                    intentArray = new Intent[0];\n                }\n\n                Intent chooserIntent = new Intent(Intent.ACTION_CHOOSER);\n                chooserIntent.putExtra(Intent.EXTRA_INTENT, contentSelectionIntent);\n                chooserIntent.putExtra(Intent.EXTRA_TITLE, \"Image Chooser\");\n                chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, intentArray);\n\n                startActivityForResult(chooserIntent, REQUEST_CODE_LOLIPOP);\n\n                return true;\n            }\n});\n</code></pre>\n\n<p>I have an error in getActivity(), tryArray = new Intent[0];, which I can't resolve.</p>\n\n<p>BIG THANKS</p>\n"}, {"tags": ["android-studio", "kotlin", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 4144109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17bf4f0a2b151363e498a5e6a2ad3563?s=128&d=identicon&r=PG&f=1", "display_name": "Jks Liu", "link": "https://stackoverflow.com/users/4144109/jks-liu"}, "edited": false, "score": 1, "creation_date": 1532653392, "post_id": 51002966, "comment_id": 90066320, "body": "I use AS3.2 beta4, kapt dependency is not required explicitly. If anyone have error about `DataBindingComponent&#39;, just delete the kapt dependency line, it works for me."}, {"owner": {"reputation": 3180, "user_id": 923441, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Cwbw0.png?s=128&g=1", "display_name": "A. Steenbergen", "link": "https://stackoverflow.com/users/923441/a-steenbergen"}, "reply_to_user": {"reputation": 125, "user_id": 8492863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c164ce968b0ef26816242635576ef3e?s=128&d=identicon&r=PG&f=1", "display_name": "Lyle", "link": "https://stackoverflow.com/users/8492863/lyle"}, "edited": false, "score": 6, "creation_date": 1547549040, "post_id": 51002966, "comment_id": 95221203, "body": "I have tested it with <code>Android Studio 3.3, Gradle 3.3.0, Databinding v2</code> and I can confirm what @Lyle commented, the <i>only</i> line that needs to be added to avoid the <code>Unresolved reference: BR</code> is <code>apply plugin: &quot;kotlin-kapt&quot;</code>"}], "tags": [], "owner": {"reputation": 2677, "user_id": 3808183, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7a1088f9d9dc671b0e3d4d337a546913?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Guo", "link": "https://stackoverflow.com/users/3808183/jack-guo"}, "is_accepted": true, "score": 19, "last_activity_date": 1529770708, "creation_date": 1529770708, "answer_id": 51002966, "question_id": 50956111, "link": "https://stackoverflow.com/questions/50956111/unresolved-reference-br-android-studio/51002966#51002966", "title": "Unresolved reference: BR (Android Studio)", "body": "<p>After researching quite a bit, turns out there are a couple things to add in order to use data binding library</p>\n\n<h3>project build.gradle</h3>\n\n<pre><code>buildscript {\n    ext {\n        compiler_version = '3.1.3'\n    }\n    dependencies {\n        classpath \"com.android.tools.build:gradle:$compiler_version\"\n    }\n}\n</code></pre>\n\n<h3>app build.gradle</h3>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n\nandroid {\n    dataBinding {\n        enabled = true\n    }\n}\n\ndependencies {\n    kapt \"com.android.databinding:compiler:$compiler_version\"\n}\n\nkapt {\n    generateStubs = true\n}\n</code></pre>\n\n<p>I started to have some warnings after adding the data binding library, like <code>3rd-party Gradle plug-ins may be the cause</code> and <code>Classpath entry points to a non-existent location</code>. But compiles and runs fine</p>\n"}, {"tags": [], "owner": {"reputation": 3180, "user_id": 923441, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Cwbw0.png?s=128&g=1", "display_name": "A. Steenbergen", "link": "https://stackoverflow.com/users/923441/a-steenbergen"}, "is_accepted": false, "score": 51, "last_activity_date": 1547549194, "creation_date": 1547549194, "answer_id": 54197326, "question_id": 50956111, "link": "https://stackoverflow.com/questions/50956111/unresolved-reference-br-android-studio/54197326#54197326", "title": "Unresolved reference: BR (Android Studio)", "body": "<p>For Android Studio 3.3, Gradle 3.3.0 and Databinding v2, the only line that needs to be added to fix this issue is in your (app's or modules) <code>build.gradle</code>:</p>\n\n<pre><code>apply plugin: \"kotlin-kapt\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 1794098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/885d2f508a1f22ec3de6e7f3d1ec81ad?s=128&d=identicon&r=PG", "display_name": "vebbi", "link": "https://stackoverflow.com/users/1794098/vebbi"}, "edited": false, "score": 1, "creation_date": 1588861102, "post_id": 61297568, "comment_id": 109067897, "body": "Thanks. This fixed it for me."}], "tags": [], "owner": {"reputation": 2361, "user_id": 1450409, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0e8a7b3fb93f9ee898d2e7d896571272?s=128&d=identicon&r=PG", "display_name": "nyxee", "link": "https://stackoverflow.com/users/1450409/nyxee"}, "is_accepted": false, "score": 25, "last_activity_date": 1590091661, "last_edit_date": 1590091661, "creation_date": 1587251949, "answer_id": 61297568, "question_id": 50956111, "link": "https://stackoverflow.com/questions/50956111/unresolved-reference-br-android-studio/61297568#61297568", "title": "Unresolved reference: BR (Android Studio)", "body": "<p>Android Studio failed to import my BR class automatically. All solutions provided above failed. I just had to import the class manually, Android studio had created it correctly.</p>\n\n<p>SAMPLE:</p>\n\n<pre><code>package your_packagename\n\nimport your_packagename.BR\nimport ...\n...\n\n</code></pre>\n\n<p>I think this happened due to Copy and Paste. When i typed <code>BR</code> manually, Android Stdio did the Automatic Import. </p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 4908512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079733130688bdd51d9330ebfcc60abe?s=128&d=identicon&r=PG&f=1", "display_name": "VIVEK CHOUDHARY", "link": "https://stackoverflow.com/users/4908512/vivek-choudhary"}, "is_accepted": false, "score": 0, "last_activity_date": 1608275515, "creation_date": 1608275515, "answer_id": 65353025, "question_id": 50956111, "link": "https://stackoverflow.com/questions/50956111/unresolved-reference-br-android-studio/65353025#65353025", "title": "Unresolved reference: BR (Android Studio)", "body": "<p>I manually typed the line &quot;binding.setVariable(BR.item, item)&quot; and it worked for me. Android studio shows the suggestion of importing BR. Choose the one from your project. Also enable databinding = true in gradle.</p>\n"}], "owner": {"reputation": 2677, "user_id": 3808183, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7a1088f9d9dc671b0e3d4d337a546913?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Guo", "link": "https://stackoverflow.com/users/3808183/jack-guo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11955, "favorite_count": 3, "accepted_answer_id": 51002966, "answer_count": 4, "score": 21, "last_activity_date": 1608275515, "creation_date": 1529524562, "last_edit_date": 1529525193, "question_id": 50956111, "link": "https://stackoverflow.com/questions/50956111/unresolved-reference-br-android-studio", "title": "Unresolved reference: BR (Android Studio)", "body": "<p>My top level build.gradle:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.41'\n    ext.lifecycle_version = \"1.1.1\"\n    repositories {\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.1.3'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n</code></pre>\n\n<p>My project level build.gradle:</p>\n\n<pre><code>android {\n    ...\n    dataBinding {\n        enabled = true\n    }\n}\n\ndependencies {\n    ...\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    implementation \"android.arch.lifecycle:extensions:$lifecycle_version\"\n}\n</code></pre>\n\n<p>I also added <code>android.databinding.enableV2=true</code> to gradle.properties per Google documents (<a href=\"https://developer.android.com/topic/libraries/data-binding/start\" rel=\"noreferrer\">https://developer.android.com/topic/libraries/data-binding/start</a>)</p>\n\n<p>When I try to run, it shows <code>Unresolved reference: BR</code> error in my <code>BaseViewHolder</code> class. It seems that <code>BR</code> class has been properly generated  but it also says duplicate class found in the file <code>.../R.java</code> when I mouse over the class name. What have I done wrong?</p>\n\n<pre><code>fun bind(obj: Any) {\n        binding.setVariable(BR.obj, obj)\n        binding.executePendingBindings()\n}\n</code></pre>\n"}, {"tags": ["kotlin", "spring-webflux", "spek"], "answers": [{"tags": [], "owner": {"reputation": 361, "user_id": 2037965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/22828fe036d8af3c9522e42716782e98?s=128&d=identicon&r=PG", "display_name": "lxdr", "link": "https://stackoverflow.com/users/2037965/lxdr"}, "is_accepted": true, "score": 0, "last_activity_date": 1529518741, "creation_date": 1529518741, "answer_id": 50954720, "question_id": 50954719, "link": "https://stackoverflow.com/questions/50954719/unit-testing-webflux-routers-with-spek/50954720#50954720", "title": "Unit testing WebFlux Routers with Spek", "body": "<p>WebFlux defines an excellent <a href=\"https://spring.io/blog/2017/08/01/spring-framework-5-kotlin-apis-the-functional-way#functional-routing-with-the-kotlin-dsl-for-spring-webflux\" rel=\"nofollow noreferrer\">DSL</a> using Kotlin's <a href=\"https://kotlinlang.org/docs/reference/type-safe-builders.html\" rel=\"nofollow noreferrer\">Type-Safe Builders</a> for building routers. While the syntax is very succinct and readable it is not readily apparent how to assert that the router function bean it returns is configured properly as its properties are mostly inaccessible to client code. </p>\n\n<p>Say we have the following router:</p>\n\n<pre><code>@Configuration\nclass PingRouter(private val pingHandler: PingHandler) {\n    @Bean\n    fun pingRoute() = router {\n        accept(MediaType.APPLICATION_JSON).nest {\n            GET(\"/ping\", pingHandler::handlePing)\n        }\n    }\n}\n</code></pre>\n\n<p>We want to assert that when a request comes in that matches the <code>/ping</code> route with an <code>application/json</code> content header the request is passed off to our handler function.</p>\n\n<pre><code>object PingRouterTest: Spek({\n    describe(\"PingRouter\") {\n        lateinit var pingHandler: PingHandler\n        lateinit var pingRouter: PingRouter\n\n        beforeGroup {\n            pingHandler = mock()\n\n            pingRouter = PingRouter(pingHandler)\n        }\n\n        on(\"Ping route\") {\n            /*\n                We need to setup a dummy ServerRequest who's path will match the path of our router,\n                and who's headers will match the headers expected by our router.\n             */\n            val request: ServerRequest = mock()\n            val headers: ServerRequest.Headers = mock()\n\n            When calling request.pathContainer() itReturns PathContainer.parsePath(\"/ping\")\n            When calling request.method() itReturns HttpMethod.GET\n            When calling request.headers() itReturns headers\n            When calling headers.accept() itReturns listOf(MediaType.APPLICATION_JSON)\n\n            /*\n                We call pingRouter.pingRoute() which will return a RouterFunction. We then call route()\n                on the RouterFunction to actually send our dummy request to the router. WebFlux returns\n                a Mono that wraps the reference to our PingHandler class's handler function in a\n                HandlerFunction instance if the request matches our router, if it does not, WebFlux will\n                return an empty Mono. Finally we invoke handle() on the HandlerFunction to actually call\n                our handler function in our PingHandler class.\n             */\n            pingRouter.pingRoute().route(request).subscribe({ it.handle(request) })\n\n            /*\n                If our pingHandler.handlePing() was invoked by the HandlerFunction, we know we properly\n                configured our route for the request.\n             */\n            it(\"Should call the handler with request\") {\n                verify(pingHandler, times(1)).handlePing(request)\n            }\n        }\n    }\n})\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 2037965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/22828fe036d8af3c9522e42716782e98?s=128&d=identicon&r=PG", "display_name": "lxdr", "link": "https://stackoverflow.com/users/2037965/lxdr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 50954720, "answer_count": 1, "score": 0, "last_activity_date": 1529518741, "creation_date": 1529518741, "question_id": 50954719, "link": "https://stackoverflow.com/questions/50954719/unit-testing-webflux-routers-with-spek", "title": "Unit testing WebFlux Routers with Spek", "body": "<p>I have been using Spring's <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html\" rel=\"nofollow noreferrer\">WebFlux</a> framework with Kotlin for about a month now, and have been loving it. As I got ready to make the dive into writing production code with WebFlux and Kotlin I found myself struggling to unit test my routers in a simple, lightweight way. </p>\n\n<p><a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/testing.html\" rel=\"nofollow noreferrer\">Spring Test</a> is an excellent framework, however it is heavier weight than what I was wanting, and I was looking for a test framework that was more expressive than traditional JUnit. Something in the vein of JavaScript's Mocha. Kotlin's <a href=\"https://github.com/spekframework/spek\" rel=\"nofollow noreferrer\">Spek</a> fit the bill perfectly. </p>\n\n<p>What follows below is an example of how I was able to unit test a simple router using Spek.</p>\n"}, {"tags": ["android", "python", "kotlin", "cryptography", "hkdf"], "owner": {"reputation": 1319, "user_id": 5530076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1sBPY.jpg?s=128&g=1", "display_name": "Bram", "link": "https://stackoverflow.com/users/5530076/bram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1529536490, "creation_date": 1529515148, "last_edit_date": 1529536490, "question_id": 50953776, "link": "https://stackoverflow.com/questions/50953776/hkdf-android-implementation", "title": "HKDF Android implementation", "body": "<p>I'm trying to implement key exchange with HKDF for key derivation. I already looked at <a href=\"https://stackoverflow.com/questions/45985661/is-hkdf-implemented-in-java-cryptography-architecture\">Is HKDF implemented in Java Cryptography Architecture?\nAsk Question\n</a>, however, I'm still not getting what I am supposed to get.</p>\n\n<p>In python, I have the following <a href=\"https://cryptography.io/en/latest/hazmat/primitives/asymmetric/ec/\" rel=\"nofollow noreferrer\">(src)</a>:</p>\n\n<pre><code>shared = private_key.exchange(ec.ECDH(), peer_public_key).hex()\nderived = HKDF(algorithm=hashes.SHA256(), length=32, salt=b'', info=b'', backend=default_backend()).derive(shared.encode()).hex()\n</code></pre>\n\n<p>This works for python and iOS (I have it implemented there too). However, Android is giving me trouble at the last steps. Can someone elaborate on HKDF for Android?</p>\n\n<p>EDIT:\nExisting Kotlin code</p>\n\n<pre><code>val keyPairGenerator = KeyPairGenerator.getInstance(\"EC\")\nkeyPairGenerator.initialize(384)\nval keyPair = keyPairGenerator.generateKeyPair()\n\nval peerPublicKey = ... created from external data\n\nval keyAgreement = KeyAgreement.getInstance(\"ECDH\")\nkeyAgreement.init(keyPair.private)\nkeyAgreement.doPhase(peerPublicKey, true)\nval sharedSecretKey = keyAgreement.generateSecret(\"ECDH\")\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["android", "performance", "kotlin"], "comments": [{"owner": {"reputation": 221, "user_id": 2434385, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/325d14083a26b202666f03ad205989f2?s=128&d=identicon&r=PG&f=1", "display_name": "user2434385", "link": "https://stackoverflow.com/users/2434385/user2434385"}, "edited": false, "score": 0, "creation_date": 1529512537, "post_id": 50953122, "comment_id": 88903863, "body": "i said Hi guys, but stack delete it i can see... So hi guys !"}], "owner": {"reputation": 221, "user_id": 2434385, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/325d14083a26b202666f03ad205989f2?s=128&d=identicon&r=PG&f=1", "display_name": "user2434385", "link": "https://stackoverflow.com/users/2434385/user2434385"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1529577606, "creation_date": 1529512477, "last_edit_date": 1529577606, "question_id": 50953122, "link": "https://stackoverflow.com/questions/50953122/switching-activities-freeze-animations", "title": "Switching activities freeze animations", "body": "<p>New to Android &amp; Kotlin i'm trying to perform a simple transition between two activities. </p>\n\n<p>So i have this two activities: SplashActivity &amp; HomeActivity. \nThe first that appears on screen is SplashActivity, i use it to download stuff, and i add some simple animations, just a layout rotating forever. </p>\n\n<p>This is the animation : </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;set xmlns:android=\"http://schemas.android.com/apk/res/android\"\nandroid:shareInterpolator=\"false\"  android:layout_height=\"10dp\" \nandroid:layout_width=\"10dp\"&gt;\n\n&lt;rotate\n    android:duration=\"2500\"\n    android:interpolator=\"@android:anim/linear_interpolator\"\n    android:pivotX=\"50%\"\n    android:pivotY=\"50%\"\n    android:repeatCount=\"infinite\"\n    android:repeatMode=\"restart\"\n    android:toDegrees=\"360\" /&gt;\n&lt;/set&gt;\n</code></pre>\n\n<p>Once everything is ready i simply change the activities like this (in my  SplashActivity) : </p>\n\n<pre><code>startActivity(Intent(applicationContext, HomeActivity::class.java))\nfinish()\n</code></pre>\n\n<p>Problem is that the rotate animation freeze while switching activies, and it looks awful, is there a way for me to perform a transition without the animation to freeze or it is just the way android works ? A simple smooth transition for a smooth developer :) </p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["android", "kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 2679, "user_id": 4465354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peiDQ.png?s=128&g=1", "display_name": "qwwdfsad", "link": "https://stackoverflow.com/users/4465354/qwwdfsad"}, "edited": false, "score": 0, "creation_date": 1529577476, "post_id": 50952098, "comment_id": 88929121, "body": "What is dbCoroutine? appExecutors.dbContext?"}, {"owner": {"reputation": 2655, "user_id": 463888, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3634a4cd67643a2f98b5051e66bf1ef8?s=128&d=identicon&r=PG", "display_name": "atasoyh", "link": "https://stackoverflow.com/users/463888/atasoyh"}, "reply_to_user": {"reputation": 2679, "user_id": 4465354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peiDQ.png?s=128&g=1", "display_name": "qwwdfsad", "link": "https://stackoverflow.com/users/4465354/qwwdfsad"}, "edited": false, "score": 0, "creation_date": 1529584505, "post_id": 50952098, "comment_id": 88933735, "body": "@qwwdfsad They are same thing,  val dbContext: CoroutineContext = newSingleThreadContext(&quot;databaseIO&quot;),"}], "owner": {"reputation": 2655, "user_id": 463888, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3634a4cd67643a2f98b5051e66bf1ef8?s=128&d=identicon&r=PG", "display_name": "atasoyh", "link": "https://stackoverflow.com/users/463888/atasoyh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529509141, "creation_date": 1529509141, "question_id": 50952098, "link": "https://stackoverflow.com/questions/50952098/deadlock-with-runblockingui-kotlin-coroutine", "title": "Deadlock with runBlocking(UI) - (Kotlin, Coroutine)", "body": "<p>I try to manage my threads for IO Processes. One of is for Realm usage.</p>\n\n<p>like\u2026</p>\n\n<pre><code>init {\n        val ai = app.packageManager.getApplicationInfo(packageName, PackageManager.GET_META_DATA)\n        bundle = ai.metaData\n        runBlocking(appExecutors.dbContext) {\n            Realm.init(app)\n        }\n    }\n</code></pre>\n\n<p>It works fine if I set val dbContext as newSingleThreadContext(\u201cdatabaseIO\u201d)\u2026\nBut I develop an android-library, so If there is an implementation of Realm on the app module, I need to set the usage on the same thread. And generally, everyone uses main thread to access to Realm. In that case I tried to set UI but it caused ANR. I can understand why it causes ANR, but I can\u2019t find a proper solution for this scenario.</p>\n\n<p>Note: if I use it with launch\u2026 it works for here. But on my RealmManager class I need to use runBlocking. So there is no way to use only launch\u2026:slight_smile:\nlike\u2026</p>\n\n<pre><code>fun getProfile(id: String): Profile? {\n        try {\n            return runBlocking(dbCoroutine) {\n                val query = realm!!.where(Profile::class.java).equalTo(\"numbers.id\", id)\n                query.findFirst()\n            }\n        } catch (ex: Exception) {\n            logger.e(TAG, ex)\n            return null\n        }\n    } \n</code></pre>\n\n<p>or</p>\n\n<pre><code>internal val allProfiles: List&lt;Profile&gt;\n        get() = runBlocking(dbCoroutine) { realm!!.where(Profile::class.java).findAll() }\n</code></pre>\n\n<p>Is there anything I do wrong way, or any advice for better implementation?</p>\n"}, {"tags": ["java", "mvvm", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9610559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/113bc416a98718b8d1180b004b38f22a?s=128&d=identicon&r=PG&f=1", "display_name": "Notsfsssf", "link": "https://stackoverflow.com/users/9610559/notsfsssf"}, "edited": false, "score": 1, "creation_date": 1529557320, "post_id": 50952139, "comment_id": 88918149, "body": "Thank you\uff0cI just want to know if Google recommends we give up the app.fragment and use v4."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": -1, "last_activity_date": 1529509274, "creation_date": 1529509274, "answer_id": 50952139, "question_id": 50951709, "link": "https://stackoverflow.com/questions/50951709/how-can-i-use-app-fragment-with-livedata-and-viewmodel/50952139#50952139", "title": "How can I use app.fragment with LiveData and ViewModel", "body": "<p>Do not use <code>android.app.Fragment</code>, <a href=\"https://developer.android.com/reference/android/app/Fragment\" rel=\"nofollow noreferrer\">the entire class is now deprecated</a>. The support library version does everything in a much better, safer, more predictable way.</p>\n"}], "owner": {"reputation": 33, "user_id": 9610559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/113bc416a98718b8d1180b004b38f22a?s=128&d=identicon&r=PG&f=1", "display_name": "Notsfsssf", "link": "https://stackoverflow.com/users/9610559/notsfsssf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 50952139, "answer_count": 1, "score": 1, "last_activity_date": 1529522696, "creation_date": 1529507982, "last_edit_date": 1529522696, "question_id": 50951709, "link": "https://stackoverflow.com/questions/50951709/how-can-i-use-app-fragment-with-livedata-and-viewmodel", "title": "How can I use app.fragment with LiveData and ViewModel", "body": "<p>I want to use <code>ViewModelProviders.of</code> (app.fragment) to create a <code>ViewModel</code>, but I find that the function <code>of</code> is only supported in the v4 package. What should I do?</p>\n\n<p><img src=\"https://i.stack.imgur.com/gCkCy.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/IlHHQ.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["java", "android", "android-studio", "asynchronous", "kotlin"], "comments": [{"owner": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "edited": false, "score": 0, "creation_date": 1529508078, "post_id": 50951385, "comment_id": 88901091, "body": "Have you tried <code>CountDownLatch</code> with <code>await</code> and also where are you calling <code>asyncCall</code> function ?"}, {"owner": {"reputation": 133, "user_id": 5176158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edf99eeaa9004cac3c066918e3680fa?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel N.", "link": "https://stackoverflow.com/users/5176158/daniel-n"}, "reply_to_user": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "edited": false, "score": 0, "creation_date": 1529508415, "post_id": 50951385, "comment_id": 88901298, "body": "I haven&#39;t, I didn&#39;t think I needed to as I felt this was fairly simple. And I&#39;m calling it from the on click listeners for two buttons which are in the onCreate() method. I thought this might be the issue but I don&#39;t think I can take said listeners out of onCreate()."}, {"owner": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "edited": false, "score": 0, "creation_date": 1529508859, "post_id": 50951385, "comment_id": 88901609, "body": "Oh I guess the problem is with your <code>toast</code> that needs to be inside the <code>uiThread</code> have you tried debugging it inside the <code>doAsync</code>?"}, {"owner": {"reputation": 133, "user_id": 5176158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edf99eeaa9004cac3c066918e3680fa?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel N.", "link": "https://stackoverflow.com/users/5176158/daniel-n"}, "reply_to_user": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "edited": false, "score": 0, "creation_date": 1529509173, "post_id": 50951385, "comment_id": 88901794, "body": "I added those to debug it so it should work without them, wouldn&#39;t that throw some kind of exception or something? I have tried debugging it, simply skips over the block."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5176158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edf99eeaa9004cac3c066918e3680fa?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel N.", "link": "https://stackoverflow.com/users/5176158/daniel-n"}, "edited": false, "score": 0, "creation_date": 1529514515, "post_id": 50952191, "comment_id": 88904909, "body": "Tried that and it worked, is there a way I can make it so if it throws an error it just breaks out of the doAsync block and displays the error?"}, {"owner": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "reply_to_user": {"reputation": 133, "user_id": 5176158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edf99eeaa9004cac3c066918e3680fa?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel N.", "link": "https://stackoverflow.com/users/5176158/daniel-n"}, "edited": false, "score": 0, "creation_date": 1529569242, "post_id": 50952191, "comment_id": 88923966, "body": "I think you can do <code>return@doAsync</code> to return from the doAsync block on error"}, {"owner": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "reply_to_user": {"reputation": 133, "user_id": 5176158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edf99eeaa9004cac3c066918e3680fa?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel N.", "link": "https://stackoverflow.com/users/5176158/daniel-n"}, "edited": false, "score": 0, "creation_date": 1529569878, "post_id": 50952191, "comment_id": 88924330, "body": "Or you could also <code>throw</code> the exception from inside and put the <code>doAsync</code> block inside a try catch block to catch the exception"}], "tags": [], "owner": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "is_accepted": true, "score": 3, "last_activity_date": 1529509423, "creation_date": 1529509423, "answer_id": 50952191, "question_id": 50951385, "link": "https://stackoverflow.com/questions/50951385/anko-doasync-call-not-executing/50952191#50952191", "title": "Anko doAsync Call Not Executing", "body": "<p>The code is jumping into the <code>catch</code> block because you can't <code>toast</code> on a thread that has not called Looper.prepare(). The solution would be call the <code>toast</code> in the <code>uiThread</code></p>\n\n<pre><code>private fun asyncCall(n : Int) {\n    doAsync {\n        try {\n            uiThread {\n                toast(\"streamJSON call\")\n            }\n\n            // Call API, store Place objects in placesList\n            placesList = streamJSON()\n        } catch (e: java.lang.RuntimeException) {\n            uiThread {\n                toast(\"Invalid Request\")\n            }\n        }\n\n        uiThread {\n            if(n == 1) { // Submit button\n                goToResults()\n            } else if (n == 2) { // Feeling lucky button\n                feelingLuckyAlert()\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 5176158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edf99eeaa9004cac3c066918e3680fa?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel N.", "link": "https://stackoverflow.com/users/5176158/daniel-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1363, "favorite_count": 0, "accepted_answer_id": 50952191, "answer_count": 1, "score": 1, "last_activity_date": 1529509423, "creation_date": 1529507070, "question_id": 50951385, "link": "https://stackoverflow.com/questions/50951385/anko-doasync-call-not-executing", "title": "Anko doAsync Call Not Executing", "body": "<p>I'm creating a project in Android Studio and at am using the Anko library to run an API request on a seperate thread. Said thread is simply making an HTTP GET call and parsing the data while the UI thread passes said data and starts the next activity.</p>\n\n<p>The problem is, my program never seems to enter the doAsync block. I've posted my code below for the function I wrote for the call, it's called on a button click and when said button is clicked nothing happens. It doesn't stall, doesn't crash, nothing. Other parts of the activity will even respond.</p>\n\n<p>Solutions I've tried:</p>\n\n<ul>\n<li>Debugging to step into the block, simply skipped over it</li>\n<li>Removing the try/catch</li>\n<li>Doing the call and parsing on the main thread (throws an exception)</li>\n<li>Putting the call in a separate function as it is now (originally was in the button listener)</li>\n</ul>\n\n<p>I can't find anything really about this online so any help is welcome, thanks in advance.</p>\n\n<p><strong>MainActivity.kt</strong></p>\n\n<pre><code>    private\n    fun asyncCall(n : Int) {\n        doAsync {\n            try {\n                // Call API, store Place objects in placesList\n                toast(\"streamJSON call\")\n                placesList = streamJSON()\n            } catch (e: java.lang.RuntimeException) {\n                // Error parsing JSON\n                toast(\"Invalid Request\")\n            }\n\n            uiThread {\n                if(n == 1) { // Submit button\n                    goToResults()\n                }\n                else if (n == 2) { // Feeling lucky button\n                    feelingLuckyAlert()\n                }\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["ios", "swift", "xcode", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1367, "user_id": 8108280, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155392562094294/picture?type=large", "display_name": "joliejuly", "link": "https://stackoverflow.com/users/8108280/joliejuly"}, "is_accepted": false, "score": 0, "last_activity_date": 1529509482, "creation_date": 1529509482, "answer_id": 50952212, "question_id": 50951154, "link": "https://stackoverflow.com/questions/50951154/swiftkotlin-command-line-not-found-for-converting-swift-to-kotlin/50952212#50952212", "title": "Swiftkotlin command line not found for converting Swift to kotlin", "body": "<p>It looks like you need to install the package into </p>\n\n<pre><code>/usr/local/bin/ \n</code></pre>\n\n<p>folder on your Mac, so the terminal can treat it like other command-line commands like cd, open, etc.</p>\n\n<blockquote>\n  <p>From Xcode, run the desired target and copy the generated executables (you can find it under the Products generated folder) in a directory with executable rights for later use. Typically, you could use:\n  swiftkotlin command line tool: /usr/local/bin/</p>\n</blockquote>\n\n<p>To do so, you can try the following: </p>\n\n<ol>\n<li>in the left pane of Xcode find the last folder called Products, open it. There should be a file with .app extension. </li>\n<li>try to drag the file with .app extension from XCode to your desktop, holding <code>alt</code> key on the keyboard. </li>\n<li>open Finder, click <code>Shift+Cmd+G</code> and paste <code>/usr/local/bin/</code> into the prompt</li>\n<li>drag the file from your desktop to that folder</li>\n<li>restart the Terminal and try to use the command again</li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 7545099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32210a16cea88d4e47da4d22981d52c9?s=128&d=identicon&r=PG&f=1", "display_name": "RohithVikramP", "link": "https://stackoverflow.com/users/7545099/rohithvikramp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529509482, "creation_date": 1529506452, "last_edit_date": 1529507868, "question_id": 50951154, "link": "https://stackoverflow.com/questions/50951154/swiftkotlin-command-line-not-found-for-converting-swift-to-kotlin", "title": "Swiftkotlin command line not found for converting Swift to kotlin", "body": "<p>I am using Swift kotlin for converting swift code to kotlin which is working on Xcode project but when I am trying to execute from mac terminal it shows SwiftKotlin not found .\nGithub link: <a href=\"https://github.com/angelolloqui/SwiftKotlin\" rel=\"nofollow noreferrer\">https://github.com/angelolloqui/SwiftKotlin</a></p>\n\n<pre><code>-bash: swiftkotlin: command not found\nVivek-Mac-mini:~ vivekrawat$ \n</code></pre>\n"}, {"tags": ["kotlin", "delegation"], "answers": [{"comments": [{"owner": {"reputation": 1016, "user_id": 3103862, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/WBUdJ.jpg?s=128&g=1", "display_name": "Chota Bheem", "link": "https://stackoverflow.com/users/3103862/chota-bheem"}, "edited": false, "score": 0, "creation_date": 1529510587, "post_id": 50951293, "comment_id": 88902730, "body": "So does that mean, Delegates are not re-usable for different properties? Actually, I was thinking that we need not create separate field inside Delegate class to set/get the property of the delegated class. What I don&#39;t get is, what implementation should I give to getValue()/setValue() functions for those cases ?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 1016, "user_id": 3103862, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/WBUdJ.jpg?s=128&g=1", "display_name": "Chota Bheem", "link": "https://stackoverflow.com/users/3103862/chota-bheem"}, "edited": false, "score": 1, "creation_date": 1529511170, "post_id": 50951293, "comment_id": 88903043, "body": "Yes, multiple properties are not supposed to be backed by the same delegate instance. How you implement your delegate internally is up to you. It can store values in its own private properties, it can store them on a server somewhere, it can just return constants or random values every time it&#39;s accessed. The language doesn&#39;t prescribe any implementation, it just enables you to read and write values stored in the delegate with a simple syntax as if they were in a regular property."}, {"owner": {"reputation": 1016, "user_id": 3103862, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/WBUdJ.jpg?s=128&g=1", "display_name": "Chota Bheem", "link": "https://stackoverflow.com/users/3103862/chota-bheem"}, "edited": false, "score": 0, "creation_date": 1529512312, "post_id": 50951293, "comment_id": 88903739, "body": "Okay. So in the example I posted if I want &quot;e.p = &quot;NEW&quot; to reflect on println(e.p), I would need to have string field inside PropDelegate and set &amp; get that field. Is that understanding correct?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 1016, "user_id": 3103862, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/WBUdJ.jpg?s=128&g=1", "display_name": "Chota Bheem", "link": "https://stackoverflow.com/users/3103862/chota-bheem"}, "edited": false, "score": 1, "creation_date": 1529512355, "post_id": 50951293, "comment_id": 88903763, "body": "That is correct, and that&#39;s what the implementation in my answer does."}, {"owner": {"reputation": 1016, "user_id": 3103862, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/WBUdJ.jpg?s=128&g=1", "display_name": "Chota Bheem", "link": "https://stackoverflow.com/users/3103862/chota-bheem"}, "edited": false, "score": 0, "creation_date": 1529512404, "post_id": 50951293, "comment_id": 88903789, "body": "Great, got it. Thanks."}, {"owner": {"reputation": 331, "user_id": 5327647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c841eac9e9fe9872e849ec9b170bbfbd?s=128&d=identicon&r=PG&f=1", "display_name": "shusheng007", "link": "https://stackoverflow.com/users/5327647/shusheng007"}, "edited": false, "score": 0, "creation_date": 1602659519, "post_id": 50951293, "comment_id": 113787001, "body": "if that&#39;s case, what is the use of  parameter [thisRef:Any?] and [prop: KProperty] @zsmb13"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 6, "last_activity_date": 1529512334, "last_edit_date": 1529512334, "creation_date": 1529506856, "answer_id": 50951293, "question_id": 50951111, "link": "https://stackoverflow.com/questions/50951111/set-and-get-the-class-fields-using-delegate-in-kotlin/50951293#50951293", "title": "Set and Get the class field(s) using Delegate in Kotlin", "body": "<p>You don't get a backing field for your delegate's value by default, because it might not store an actual value, or it may store many different values. If you want to store a single <code>String</code> here, you can create a property for it in your delegate:</p>\n\n<pre><code>class Delegate {\n    private var myValue: String = \"\"\n\n    operator fun getValue(thisRef: Any?, prop: KProperty&lt;*&gt;): String {\n        return myValue\n    }\n\n    operator fun setValue(thisRef: Any?, prop: KProperty&lt;*&gt;, value: String) {\n        myValue = value\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1016, "user_id": 3103862, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/WBUdJ.jpg?s=128&g=1", "display_name": "Chota Bheem", "link": "https://stackoverflow.com/users/3103862/chota-bheem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 1, "accepted_answer_id": 50951293, "answer_count": 1, "score": 4, "last_activity_date": 1529512334, "creation_date": 1529506310, "question_id": 50951111, "link": "https://stackoverflow.com/questions/50951111/set-and-get-the-class-fields-using-delegate-in-kotlin", "title": "Set and Get the class field(s) using Delegate in Kotlin", "body": "<p>How to use Delegate for class field getters &amp; setters? Trying to set and get fields(may be some more execution while getting &amp; setting)  in Kotlin.</p>\n\n<pre><code>import kotlin.reflect.KProperty\n\nclass Example {\n    var p: String by Delegate()\n\n    override fun toString(): String {\n        return \"toString:\" + p\n    }\n}\n\nclass Delegate() {\n    operator fun getValue(thisRef: Any?, prop: KProperty&lt;*&gt;): String {\n        //Something like this :prop.get(thisRef)\n       return \"value\"\n    }\n\n    operator fun setValue(thisRef: Any?, prop: KProperty&lt;*&gt;, value: String) {\n\n        //something like this : prop.set(thisRef, value)\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val e = Example()\n    println(e.p)//blank output\n    e.p = \"NEW\"\n    println(e.p)//NEW should be the output\n}\n</code></pre>\n\n<p>Tutorial : <a href=\"https://try.kotlinlang.org/#/Examples/Delegated%20properties/Custom%20delegate/Custom%20delegate.kt\" rel=\"nofollow noreferrer\">https://try.kotlinlang.org/#/Examples/Delegated%20properties/Custom%20delegate/Custom%20delegate.kt</a></p>\n"}, {"tags": ["java", "json", "enums", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1715, "user_id": 910095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e96728ed86fffbb7960da7fe34cd47?s=128&d=identicon&r=PG", "display_name": "Nikola Mihajlovi\u0107", "link": "https://stackoverflow.com/users/910095/nikola-mihajlovi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1543271402, "creation_date": 1543271402, "answer_id": 53490093, "question_id": 50950768, "link": "https://stackoverflow.com/questions/50950768/gson-serialize-deserialize-enums-to-ints-with-generalized-code/53490093#53490093", "title": "Gson Serialize &amp; Deserialize Enums to ints with Generalized code", "body": "<p>Here's my solution. I make use of a companion object to build enum lookups. This makes my coded enums slightly more complex to understand, but there's a little less boilerplate when declaring an enum:</p>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>interface CodedEnum {\n    val code: Int\n}\n\n// It has to take class as parameter, since it is not possible to access T.values()\n// This is Java generics limitation: https://stackoverflow.com/questions/2205891/iterate-enum-values-using-java-generics\nopen class CodedEnumLookup&lt;E&gt;(klass: Class&lt;E&gt;) where E: Enum&lt;E&gt;, E: CodedEnum {\n    val lookup = klass.enumConstants.associate { it.code to it }\n\n    init {\n        // Make sure no duplicate codes\n        check(lookup.size == klass.enumConstants.size)\n    }\n\n    fun get(code: Int): E {\n        return lookup[code]!!\n    }\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>enum class Color(override val code: Int): CodedEnum {\n\n    RED(0),\n    GREEN(1),\n    BLUE(2);\n\n    companion object: CodedEnumLookup&lt;Color&gt;(Color::class.java)\n}\n</code></pre>\n\n<p>And in Gson, with a little bit of usage of Kotlin's reflection:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>object CodedEnumSerializer : JsonSerializer&lt;CodedEnum&gt;, JsonDeserializer&lt;CodedEnum&gt; {\n    override fun serialize(src: CodedEnum, typeOfSrc: Type, context: JsonSerializationContext): JsonElement {\n        return JsonPrimitive(src.code)\n    }\n\n    // Not sure about how performant this solution is\n    override fun deserialize(json: JsonElement, typeOfT: Type, context: JsonDeserializationContext): CodedEnum {\n        return ((typeOfT as Class&lt;*&gt;).kotlin.companionObjectInstance as CodedEnumLookup&lt;*&gt;).get(json.asInt) as CodedEnum\n    }\n}\n\nGsonBuilder().registerTypeHierarchyAdapter(CodedEnum::class.java, CodedEnumSerializer)\n</code></pre>\n"}], "owner": {"reputation": 304, "user_id": 1744885, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/12aae4eb7fe2d8018810077ce01eba6c?s=128&d=identicon&r=PG", "display_name": "Oreex0", "link": "https://stackoverflow.com/users/1744885/oreex0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 670, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543271402, "creation_date": 1529505324, "question_id": 50950768, "link": "https://stackoverflow.com/questions/50950768/gson-serialize-deserialize-enums-to-ints-with-generalized-code", "title": "Gson Serialize &amp; Deserialize Enums to ints with Generalized code", "body": "<p>I a working on a custom JsonSerializer &amp; JsonDeserializer\nI want to serialize json (ints) to enums and deserialize enums to ints</p>\n\n<p>I have created an interface for this purpose, where the enums have a function called fromValue which should take the deserialized value and return the enum: </p>\n\n<pre><code>interface EnumSerializationInterface {\n    val value: Int\n    fun fromValue(value: Int): EnumSerializationInterface?\n}\n</code></pre>\n\n<p>example enum: </p>\n\n<pre><code>enum class TestDummyEnumTestEnum(override val value: Int): \nEnumSerializationInterface {\n    ENUM1(1),\n    ENUM2(2);\n\n    override fun fromValue(value: Int): EnumSerializationInterface? {\n        for (enum in TestDummyEnumTestEnum.values()) {\n            if (enum.value == value) {\n                return enum\n            }\n        }\n        return null\n    }\n}\n</code></pre>\n\n<p>My serializer works but i am having trouble deserializing, my serializer &amp; deserializer: </p>\n\n<pre><code>class EnumDeserializer: JsonDeserializer&lt;EnumSerializationInterface&gt; {\n    override fun deserialize(json: JsonElement?, typeOfT: Type?, context: JsonDeserializationContext?): EnumSerializationInterface {\n        val value = json.asInt()\n        return typeOfT.fromValue(value)   \n        /*THIS DOES NOT WORK*/\n    }\n}\n\nclass EnumSerializer: JsonSerializer&lt;EnumSerializationInterface&gt; {\n    override fun serialize(src: EnumSerializationInterface?, typeOfSrc: Type?, context: JsonSerializationContext?): JsonElement {\n        return context!!.serialize(src!!.value)\n    }\n}\n</code></pre>\n\n<p>My issue is that i cannot get the 'fromValue' function from typeOfT. </p>\n\n<p>Does anybody know how to get the actual typeOfT?</p>\n"}, {"tags": ["android", "kotlin", "android-room", "android-workmanager"], "comments": [{"owner": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1529505368, "post_id": 50950597, "comment_id": 88899216, "body": "Have you tried using the latest version of Room and WorkManager? They are currently to 1.1.1 and 1.1.0-alpha3 respectively. (just to be sure it&#39;s not a know bug fixed in the latest version)"}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 0, "creation_date": 1529506556, "post_id": 50950597, "comment_id": 88900052, "body": "Have you tried to do this from empty state? Such exception can be thrown if migration failed."}, {"owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "reply_to_user": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1529586785, "post_id": 50950597, "comment_id": 88935151, "body": "The app started working flawlessly at some point, @MatPag updated both libraries after that either way. Didn&#39;t do anything different, maybe a clean install as iDemigod stated."}, {"owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "reply_to_user": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 0, "creation_date": 1529586863, "post_id": 50950597, "comment_id": 88935212, "body": "@iDemigod starting it from emtpy state seems to fix that, but I&#180;ve fallbackToDestructiveMigration option active and since I don&#39;t have any Migration scheme created it should delete the database and recreate it from zero. Don&#39;t know why at some point it didn&#39;t work."}, {"owner": {"reputation": 2805, "user_id": 7117454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaWD5.png?s=128&g=1", "display_name": "Raymond Arteaga", "link": "https://stackoverflow.com/users/7117454/raymond-arteaga"}, "edited": false, "score": 0, "creation_date": 1554750228, "post_id": 50950597, "comment_id": 97858743, "body": "Why are you using  <code>abstract fun elementDao(): ElementDao</code> as a function instead of  <code>abstract val elementDao: ElementDao</code>?  That looks suspicious to me. Also is a good practice initializing your database in your App class as a lateinit var singleton created on the App&#39;s onCreate() callback."}, {"owner": {"reputation": 169, "user_id": 5424676, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203531352723737/picture?type=large", "display_name": "Omar Beshary", "link": "https://stackoverflow.com/users/5424676/omar-beshary"}, "edited": false, "score": 0, "creation_date": 1587080713, "post_id": 50950597, "comment_id": 108376423, "body": "in <b>runDataDownloadWork()</b> why you are using different instance from <b>WorkManager</b> ?"}, {"owner": {"reputation": 14411, "user_id": 422060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2a06312762581d504ba0a25e5a90def?s=128&d=identicon&r=PG", "display_name": "keyboardsurfer", "link": "https://stackoverflow.com/users/422060/keyboardsurfer"}, "edited": false, "score": 1, "creation_date": 1611673624, "post_id": 50950597, "comment_id": 116523042, "body": "I\u2019m voting to close this question because it&#39;s obsolete and the official answer by the library engineer has been deleted by a moderator."}, {"owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "reply_to_user": {"reputation": 14411, "user_id": 422060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2a06312762581d504ba0a25e5a90def?s=128&d=identicon&r=PG", "display_name": "keyboardsurfer", "link": "https://stackoverflow.com/users/422060/keyboardsurfer"}, "edited": false, "score": 0, "creation_date": 1611758768, "post_id": 50950597, "comment_id": 116554050, "body": "Yes @keyboardsurfer you are right, will delete the question now as is too old, also I think I cannot replicate it again."}], "owner": {"reputation": 6647, "user_id": 709671, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2589f597920174d08abc0cc4ba5f183?s=128&d=identicon&r=PG", "display_name": "axierjhtjz", "link": "https://stackoverflow.com/users/709671/axierjhtjz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2032, "favorite_count": 0, "answer_count": 0, "score": 11, "last_activity_date": 1558885611, "creation_date": 1529504830, "last_edit_date": 1529739611, "question_id": 50950597, "link": "https://stackoverflow.com/questions/50950597/saving-data-to-room-from-androidx-work-worker-fails", "title": "Saving data to Room from androidx.work.Worker fails", "body": "<p>I\u00b4ve tried saving data from a Worker to Room database.</p>\n\n<p><strong>Versions:</strong></p>\n\n<ul>\n<li>Work Runtime Ktx - android.arch.work:work-runtime-ktx:1.0.0-alpha02</li>\n<li>Room - android.arch.persistence.room:runtime:1.1.0 and\nandroid.arch.persistence.room:compiler:1.1.0</li>\n</ul>\n\n<p><strong>MainActivity.kt</strong></p>\n\n<pre><code>private fun runDataDownloadWork() {\n        WorkManager.getInstance()\n                .beginWith(dwElementTypesWork)\n                .then(dwElementsWork)\n                .enqueue()\n        WorkManager.getInstance().getStatusById(dwElementsWork!!.id)\n                .observe(this, Observer { workStatus -&gt;\n                    if (workStatus != null &amp;&amp; workStatus.state.isFinished) {\n                        Log.d(\"WorkManager\", \"dwElementsWork finished\")\n                    }\n                })\n    }\n\n    private fun createWorkRequests() {\n        dwElementsWork = OneTimeWorkRequestBuilder&lt;DWElementsWork&gt;()\n                .addTag(DWElementsWork.TAG)\n                .setConstraints(wifiConstraints)\n                .build()\n        dwElementTypesWork = OneTimeWorkRequestBuilder&lt;DWElementTypesWork&gt;()\n                .addTag(DWElementTypesWork.TAG)\n                .setConstraints(wifiConstraints)\n                .build()\n    }\n</code></pre>\n\n<p><strong>DWElementsWork.kt</strong></p>\n\n<pre><code>class DWElementsWork : Worker() {\n\n    companion object {\n        const val TAG = \"dw_elements_work\"\n    }\n\n    override fun doWork(): WorkerResult {\n\n        val apiService: APIService = ServiceGenerator\n            .createService(applicationContext, MyAPIService::class.java)\n        var elementDao: ElementDao? = AppDatabase \n            .getInstance(context = applicationContext)\n            .elementDao()\n\n        val response = apiService.getElements().execute()\n        if (response.isSuccessful) {\n            val elements = response.body()\n            try {\n                elementDao?.insertElements(elements!!)\n            } catch (e: Exception) {\n                e.printStackTrace()\n            } finally {\n                return WorkerResult.SUCCESS\n            }\n        }\n        Log.e(\"BACKGROUND_WORKER\", response.errorBody()?.string())\n        return WorkerResult.FAILURE\n    }\n}\n</code></pre>\n\n<p><strong>AppDatabase.kt</strong></p>\n\n<pre><code>@Database(entities = [\n    (Element::class)\n], version = 9, exportSchema = false)\nabstract class AppDatabase: RoomDatabase() {\n\n    abstract fun elementDao(): ElementDao\n\n    companion object {\n\n        private var sInstance: AppDatabase? = null\n\n        /**\n         * Gets the singleton instance of AppDatabase.\n         *\n         * @param context The context.\n         * @return The singleton instance of AppDatabase.\n         */\n        @Synchronized\n        fun getInstance(context: Context): AppDatabase {\n            if (sInstance == null) {\n                sInstance = Room\n                        .databaseBuilder(\n                            context.applicationContext,\n                            AppDatabase::class.java,\n                            \"my_database.db\"\n                        )\n                        .fallbackToDestructiveMigration()\n                        .build()\n            }\n            return sInstance!!\n        }\n    }\n}\n</code></pre>\n\n<p>The main problem resides when trying to call <code>elementDao?.insertElements(elements!!)</code> it gives the follwing error:</p>\n\n<p><strong>StackTrace</strong></p>\n\n<pre><code>06-20 15:57:09.660 25193-25226/com.myapp.app E/ROOM: Cannot run invalidation tracker. Is the db closed?\n    java.lang.IllegalStateException: The database '/data/user/0/com.myapp.app/databases/my_database.db' is not open.\n        at android.database.sqlite.SQLiteDatabase.throwIfNotOpenLocked(SQLiteDatabase.java:2287)\n        at android.database.sqlite.SQLiteDatabase.createSession(SQLiteDatabase.java:409)\n        at android.database.sqlite.-$$Lambda$RBWjWVyGrOTsQrLCYzJ_G8Uk25Q.get(Unknown Source:2)\n        at java.lang.ThreadLocal$SuppliedThreadLocal.initialValue(ThreadLocal.java:284)\n        at java.lang.ThreadLocal.setInitialValue(ThreadLocal.java:180)\n        at java.lang.ThreadLocal.get(ThreadLocal.java:170)\n        at android.database.sqlite.SQLiteDatabase.getThreadSession(SQLiteDatabase.java:403)\n        at android.database.sqlite.SQLiteProgram.getSession(SQLiteProgram.java:101)\n        at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:64)\n        at android.arch.persistence.db.framework.FrameworkSQLiteStatement.executeUpdateDelete(FrameworkSQLiteStatement.java:45)\n        at android.arch.persistence.room.InvalidationTracker$1.run(InvalidationTracker.java:321)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\n        at java.lang.Thread.run(Thread.java:764)\n</code></pre>\n\n<p>I\u00b4ve stopped the debugger right before inserting the elements and <code>AppDatabase.getInstance(applicationContext).isOpen</code> returns <strong>false</strong>.</p>\n\n<p>Am I doing something wrong?</p>\n\n<p>Is it possible to save data from Workers to Room?</p>\n\n<p>Maybe <strong>applicationContext</strong> (getApplicationContext()) is not giving the appropriate context and AppDatabase it\u00b4s badly instantiated?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["android", "kotlin", "android-databinding"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 1, "creation_date": 1529504428, "post_id": 50950216, "comment_id": 88898566, "body": "what is the context? why would you want this"}, {"owner": {"reputation": 774, "user_id": 858257, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/f03aa5f9018dfc97f5d54d187a8c4a35?s=128&d=identicon&r=PG", "display_name": "melanke", "link": "https://stackoverflow.com/users/858257/melanke"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1529516504, "post_id": 50950216, "comment_id": 88905978, "body": "Well, I want to have a if that compares a value to a constant, like: <code>android:visibility=&quot;@{delivery.status == Status.Companion.finished ? View.VISIBLE : View.GONE}&quot;</code>  I don&#39;t know, I just made it up, but something like this"}], "answers": [{"comments": [{"owner": {"reputation": 774, "user_id": 858257, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/f03aa5f9018dfc97f5d54d187a8c4a35?s=128&d=identicon&r=PG", "display_name": "melanke", "link": "https://stackoverflow.com/users/858257/melanke"}, "edited": false, "score": 0, "creation_date": 1533127132, "post_id": 51177539, "comment_id": 90231154, "body": "I don&#39;t have an instance :("}], "tags": [], "owner": {"reputation": 2180, "user_id": 3900793, "user_type": "registered", "profile_image": "https://graph.facebook.com/641421048/picture?type=large", "display_name": "dianakarenms", "link": "https://stackoverflow.com/users/3900793/dianakarenms"}, "is_accepted": false, "score": 4, "last_activity_date": 1530720177, "creation_date": 1530720177, "answer_id": 51177539, "question_id": 50950216, "link": "https://stackoverflow.com/questions/50950216/how-to-use-companion-objects-on-xml-layout/51177539#51177539", "title": "How to use companion objects on xml layout?", "body": "<p>In the XML just add <strong>Companion</strong> before the name of the field, for example:</p>\n\n<p><em>In ViewModel</em></p>\n\n<pre><code>package com.example.project\n\nclass MyViewModel {\n    companion object {\n        var leText = \"text\"\n    }\n\n    var leColor = ...\n}\n</code></pre>\n\n<p><em>In XML</em></p>\n\n<pre><code>&lt;data&gt;\n    &lt;import type=\"android.view.View\" /&gt;\n    &lt;variable \n        name=\"context\"\n        type=\"com.example.project.MyViewModel\" /&gt;\n&lt;/data&gt;\n\n&lt;TextView\n    ...\n    android:text=\"@{context.Companion.leText}\"\n    android:color=\"@{context.leColor}\"/&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1397, "user_id": 10199138, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-B3EYIaWV1xY/AAAAAAAAAAI/AAAAAAAABPk/MlOok2YSU5I/photo.jpg?sz=128", "display_name": "MJ Studio", "link": "https://stackoverflow.com/users/10199138/mj-studio"}, "edited": false, "score": 0, "creation_date": 1555479648, "post_id": 54739069, "comment_id": 98120894, "body": "This is only the answer. Thank you."}], "tags": [], "owner": {"reputation": 3302, "user_id": 2481310, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61400c78577f452ef07d92088ffc61c4?s=128&d=identicon&r=PG", "display_name": "sonique", "link": "https://stackoverflow.com/users/2481310/sonique"}, "is_accepted": false, "score": 19, "last_activity_date": 1550462376, "last_edit_date": 1550462376, "creation_date": 1550450553, "answer_id": 54739069, "question_id": 50950216, "link": "https://stackoverflow.com/questions/50950216/how-to-use-companion-objects-on-xml-layout/54739069#54739069", "title": "How to use companion objects on xml layout?", "body": "<p>In order to access <code>Companion</code> object attributes and methods, it is <strong>NOT</strong> required to have an instance of the Parent object. \nCompanion object are already instantiated, therefore you can access the instance directly.</p>\n\n<p>Instead of using <code>&lt;import&gt;</code> (which is the natural translation from Java), we need to use <code>&lt;variable&gt;</code>, because we actually want to use the (already instantiated) Companion object into our XML Layout.</p>\n\n<p>Import your Companion object as follow</p>\n\n<p>Given Kotlin class:</p>\n\n<pre><code>package com.example.project\n\nclass MyViewModel {\n    companion object {\n        // it is only working with val and var\n        // const val wouldn't work\n        val MAX_LENGTH = 10\n    }\n}\n</code></pre>\n\n<p>Layout:\n    \n        </p>\n\n<pre><code>    &lt;data&gt;\n        &lt;!-- Declare your \"variable\" that hold the Companion object itself --&gt;\n        &lt;variable name=\"myViewModelStatic\" type=\"com.example.project.MyViewModel.Companion\" /&gt;\n    &lt;/data&gt;\n\n    &lt;!-- then use the myViewModelStatic to access \"static\" properties of MyViewModel --&gt;\n    &lt;EditText\n    ...\n    android:maxLength=\"@{ myViewModelStatic.MAX_LENGTH }\"\n    /&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>Fragment:</p>\n\n<pre><code>class MyFragment {\n    ...\n    onViewCreated(...) {\n         // now bind the companion object to the variable declared in the XML\n         binding.myViewModelStatic = TransferUseCase.Companion\n    }\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5062, "user_id": 1197251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f988c493109880ba789886bfe5c0514?s=128&d=identicon&r=PG", "display_name": "dominicoder", "link": "https://stackoverflow.com/users/1197251/dominicoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1550466801, "creation_date": 1550466801, "answer_id": 54740819, "question_id": 50950216, "link": "https://stackoverflow.com/questions/50950216/how-to-use-companion-objects-on-xml-layout/54740819#54740819", "title": "How to use companion objects on xml layout?", "body": "<p><strong>TL;DR:</strong></p>\n\n<p>Replace</p>\n\n<pre><code>android:text=\"@{MyClass.Companion.SomeProperty}\"\n</code></pre>\n\n<p>with</p>\n\n<pre><code>android:text=\"@{MyClass.Companion.getSomeProperty()}\"\n</code></pre>\n\n<hr>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Your problem is that you're trying to reference the Kotlin object exactly as it is named but that's not how the Kotlin compiler will generate the property in Java. Instead, it will convert it using the Java convention of being a \"get\" function.</p>\n\n<p>You can find out what this name will look like by decompiling the Kotlin Bytecode.</p>\n\n<ol>\n<li>Open the Kotlin class you want to see the bytecode for.</li>\n<li>Open <code>Tools</code> > <code>Kotlin</code> > <code>Show Kotlin Bytecode</code></li>\n<li>In the side panel that opens up, click the <code>Decompile</code> button in the top-left.</li>\n</ol>\n\n<p>This will show you the Java equalvalent of the Kotlin class, including the full name of the companion property.</p>\n\n<p><strong>Bonus</strong>:</p>\n\n<p>That said, you probably would prefer to reference the field as a property, in which case you can just append the <code>const</code> keyboard to the property declaration.</p>\n\n<pre><code>const val SomeProperty = \"hey\"\n</code></pre>\n\n<p>With that the compiler will generate the field as a <code>public static</code> field, outside of the <code>Companion</code>, and you can update your xml to be simply:</p>\n\n<pre><code>android:text=\"@{MyClass.SomeProperty}\"\n</code></pre>\n\n<p>Which is pretty much how you'd do it in Java.</p>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 310, "user_id": 6575134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d48e01facec5d26a15add471c0a0bba9?s=128&d=identicon&r=PG&f=1", "display_name": "ycesar", "link": "https://stackoverflow.com/users/6575134/ycesar"}, "is_accepted": false, "score": 6, "last_activity_date": 1581606566, "creation_date": 1581606566, "answer_id": 60210901, "question_id": 50950216, "link": "https://stackoverflow.com/questions/50950216/how-to-use-companion-objects-on-xml-layout/60210901#60210901", "title": "How to use companion objects on xml layout?", "body": "<p>You can get rid of <code>Companion</code> keyword if you annotate your method/proprty with <code>@JvmStatic</code></p>\n"}, {"tags": [], "owner": {"reputation": 457, "user_id": 6427258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wZ4IU.jpg?s=128&g=1", "display_name": "tendai", "link": "https://stackoverflow.com/users/6427258/tendai"}, "is_accepted": false, "score": 0, "last_activity_date": 1586536541, "creation_date": 1586536541, "answer_id": 61144617, "question_id": 50950216, "link": "https://stackoverflow.com/questions/50950216/how-to-use-companion-objects-on-xml-layout/61144617#61144617", "title": "How to use companion objects on xml layout?", "body": "<p>To get access to your property, do the following:</p>\n\n<p>Annotate you companion object property with \n<code>@JvmStatic</code>\n:</p>\n\n<pre><code>class MyClass {\n  companion object {\n   @JvmStatic\n    val SomeProperty = \"hey\"\n  }\n}\n</code></pre>\n\n<p>then go ahead and remove 'Companion' from your binding TextView:</p>\n\n<p>Change from </p>\n\n<pre><code> &lt;TextView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:text=\"@{MyClass.Companion.SomeProperty}\"/&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code> &lt;TextView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:text=\"@{MyClass.SomeProperty}\"/&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7503, "user_id": 2339405, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K0wMk.jpg?s=128&g=1", "display_name": "Rainmaker", "link": "https://stackoverflow.com/users/2339405/rainmaker"}, "is_accepted": false, "score": 0, "last_activity_date": 1589388630, "creation_date": 1589388630, "answer_id": 61780327, "question_id": 50950216, "link": "https://stackoverflow.com/questions/50950216/how-to-use-companion-objects-on-xml-layout/61780327#61780327", "title": "How to use companion objects on xml layout?", "body": "<p>I went through all of this answers and I had to come up with my own solution. </p>\n\n<p>Mark the constant with <code>const val</code> modifiers (<strong>const</strong> is the key) and just import the \"parent\" class (MyClass in your case) and <strong>you don't need the word Companion</strong></p>\n\n<pre><code>class MyClass {\n  companion object {\n    const val SomeProperty = \"hey\"\n  }\n}\n</code></pre>\n\n<p>XML\n    </p>\n\n<pre><code>  &lt;data&gt;\n    &lt;import type=\"package.MyClass\"/&gt;\n  &lt;/data&gt;\n\n  &lt;TextView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:text=\"@{MyClass.SomeProperty}\"/&gt;\n\n&lt;/layout&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6210163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/752e8d52e458767eaf5ba414a62297f2?s=128&d=identicon&r=PG&f=1", "display_name": "XuLu", "link": "https://stackoverflow.com/users/6210163/xulu"}, "is_accepted": false, "score": 1, "last_activity_date": 1591342612, "creation_date": 1591342612, "answer_id": 62210347, "question_id": 50950216, "link": "https://stackoverflow.com/questions/50950216/how-to-use-companion-objects-on-xml-layout/62210347#62210347", "title": "How to use companion objects on xml layout?", "body": "<p>There is another way:\nin class</p>\n\n<pre><code>const val SomeProperty = \"hey\"\nclass MyClass {}\n</code></pre>\n\n<p>in XML</p>\n\n<pre><code>  &lt;data&gt;\n    &lt;import type=\"package.MyClassKt\"/&gt;\n  &lt;/data&gt;\n\n  &lt;TextView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:text=\"@{MyClassKt.SomeProperty}\"/&gt;\n</code></pre>\n"}], "owner": {"reputation": 774, "user_id": 858257, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/f03aa5f9018dfc97f5d54d187a8c4a35?s=128&d=identicon&r=PG", "display_name": "melanke", "link": "https://stackoverflow.com/users/858257/melanke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4726, "favorite_count": 0, "answer_count": 7, "score": 19, "last_activity_date": 1591342612, "creation_date": 1529503676, "question_id": 50950216, "link": "https://stackoverflow.com/questions/50950216/how-to-use-companion-objects-on-xml-layout", "title": "How to use companion objects on xml layout?", "body": "<p>I am trying to use a companion object property inside the layout but the compiler doesn't recognise it.</p>\n\n<p><strong>Kotlin Class</strong></p>\n\n<pre><code>class MyClass {\n  companion object {\n    val SomeProperty = \"hey\"\n  }\n}\n</code></pre>\n\n<p><strong>XML Layout</strong></p>\n\n<pre><code>&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n  xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n  xmlns:fancy=\"http://schemas.android.com/tools\"&gt;\n\n  &lt;data&gt;\n    &lt;import type=\"package.MyClass\"/&gt;\n  &lt;/data&gt;\n\n  &lt;TextView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:text=\"@{MyClass.Companion.SomeProperty}\"/&gt;\n\n&lt;/layout&gt;\n</code></pre>\n\n<p>And I got this error:</p>\n\n<pre><code>e: java.lang.IllegalStateException: failed to analyze: android.databinding.tool.util.LoggedErrorException: Found data binding errors.\n****/ data binding error ****msg:Could not find accessor package.MyClass.Companion.SomeProperty file:/path/to/my/layout.xml loc:21:67 - 21:103 ****\\ data binding error ****\n\n    at org.jetbrains.kotlin.analyzer.AnalysisResult.throwIfError(AnalysisResult.kt:57)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:138)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:154)\n    ...\nCaused by: android.databinding.tool.util.LoggedErrorException: Found data binding errors.\n****/ data binding error ****msg:Could not find accessor package.MyClass.Companion.SomeProperty file:/path/to/my/layout.xml loc:21:67 - 21:103 ****\\ data binding error ****\n\n    at android.databinding.tool.processing.Scope.assertNoError(Scope.java:112)\n    at android.databinding.annotationprocessor.ProcessDataBinding.doProcess(ProcessDataBinding.java:101)\n    at android.databinding.annotationprocessor.ProcessDataBinding.process(ProcessDataBinding.java:65)\n    ...\n</code></pre>\n\n<p>I've tried to use <code>companion</code> instead of <code>Companion</code>, but no luck.</p>\n\n<p>Is it possible to use companion objects on xml layout with databinding? How can I proceed? Thanks in advance for any help :)</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 2, "creation_date": 1529504889, "post_id": 50950035, "comment_id": 88898882, "body": "What&#39;s not working? this seems like it should work if your Activity is called <code>LoginActiviy</code> instead of <code>LoginActivity</code>"}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 4, "last_activity_date": 1529504921, "creation_date": 1529504921, "answer_id": 50950625, "question_id": 50950035, "link": "https://stackoverflow.com/questions/50950035/kotlin-inner-class-accessing-outer-class/50950625#50950625", "title": "Kotlin inner class accessing outer class?", "body": "<p>I'm not sure what APIs you're using here, I'm gonna assume that your <code>Consumer</code> is <code>java.util.function.Consumer</code> for the sake of the answer.</p>\n\n<p>You are writing code directly in the body of your <code>object</code>, and not inside a function. The first line of creating the <code>Intent</code> only works because you're declaring a property (and not a local variable!).</p>\n\n<p>What you should do instead is implement the appropriate methods of <code>Consumer</code>, and write the code you want to execute inside there:</p>\n\n<pre><code>loginButton.setOnClickListener {\n    ssoManager.login()\n            .subscribe(\n                    object : Consumer&lt;SSOToken&gt; {\n                        val foo = \"bar\" // this is a property of the object\n\n                        override fun accept(t: SSOToken) {\n                            val intent = Intent(this@LoginActiviy, PasscodeActivity::class.java)\n                            this@LoginActiviy.startActivity(intent)\n                        }\n                    }\n            )\n}\n</code></pre>\n"}], "owner": {"reputation": 69128, "user_id": 242769, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8f1bfe0dcaa3cdc6633e8b80639e541a?s=128&d=identicon&r=PG", "display_name": "aryaxt", "link": "https://stackoverflow.com/users/242769/aryaxt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1416, "favorite_count": 0, "accepted_answer_id": 50950625, "answer_count": 1, "score": 1, "last_activity_date": 1529504921, "creation_date": 1529503115, "question_id": 50950035, "link": "https://stackoverflow.com/questions/50950035/kotlin-inner-class-accessing-outer-class", "title": "Kotlin inner class accessing outer class?", "body": "<p>How do I call a method in outer class from the inner class?\nI can pass it as context, but I can't call methods on it</p>\n\n<pre><code>    loginButton.setOnClickListener {\n        ssoManager.login(emailEditText.text.toString(), passwordEditText.text.toString())\n                .subscribe(object: Consumer&lt;SSOToken&gt; {\n                    val intent = Intent(this@LoginActiviy, PasscodeActivity::class.java)\n                    this@LoginActiviy.startActivity(intent)\n                })\n</code></pre>\n"}, {"tags": ["android", "kotlin", "reactive-programming", "rx-kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9858922, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e5V5RfhMkSY/AAAAAAAAAAI/AAAAAAAAAAA/5cqOHnWbjEo/photo.jpg?sz=128", "display_name": "Sebasti&#225;n Land&#237;nez Garc&#237;a", "link": "https://stackoverflow.com/users/9858922/sebasti%c3%a1n-land%c3%adnez-garc%c3%ada"}, "edited": false, "score": 0, "creation_date": 1529503648, "post_id": 50950063, "comment_id": 88897970, "body": "Hi, @gokhan,  thanks for your answer. This means I would have to subscribe multiple times to the observer?"}, {"owner": {"reputation": 517, "user_id": 2608485, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f04275422ac4d0ab952260cbde3c8167?s=128&d=identicon&r=PG", "display_name": "gokhan", "link": "https://stackoverflow.com/users/2608485/gokhan"}, "reply_to_user": {"reputation": 3, "user_id": 9858922, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e5V5RfhMkSY/AAAAAAAAAAI/AAAAAAAAAAA/5cqOHnWbjEo/photo.jpg?sz=128", "display_name": "Sebasti&#225;n Land&#237;nez Garc&#237;a", "link": "https://stackoverflow.com/users/9858922/sebasti%c3%a1n-land%c3%adnez-garc%c3%ada"}, "edited": false, "score": 0, "creation_date": 1529504062, "post_id": 50950063, "comment_id": 88898277, "body": "@Sebasti&#225;nLand&#237;nezGarc&#237;a Nope I mean wrap callable object with defer operator"}, {"owner": {"reputation": 3, "user_id": 9858922, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e5V5RfhMkSY/AAAAAAAAAAI/AAAAAAAAAAA/5cqOHnWbjEo/photo.jpg?sz=128", "display_name": "Sebasti&#225;n Land&#237;nez Garc&#237;a", "link": "https://stackoverflow.com/users/9858922/sebasti%c3%a1n-land%c3%adnez-garc%c3%ada"}, "edited": false, "score": 0, "creation_date": 1529504880, "post_id": 50950063, "comment_id": 88898877, "body": "I&#39;m quite new to Rx library. Does this mean I should do my listImages function equal to Observable.fromCallable {...}.defer? Or perform some compose operation? Thanks!"}], "tags": [], "owner": {"reputation": 517, "user_id": 2608485, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f04275422ac4d0ab952260cbde3c8167?s=128&d=identicon&r=PG", "display_name": "gokhan", "link": "https://stackoverflow.com/users/2608485/gokhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1529503204, "creation_date": 1529503204, "answer_id": 50950063, "question_id": 50949942, "link": "https://stackoverflow.com/questions/50949942/list-not-emitting-on-remove-item-rxkotlin/50950063#50950063", "title": "List not emitting on remove item (RxKotlin)", "body": "<p>You should use <a href=\"http://reactivex.io/documentation/operators/defer.html\" rel=\"nofollow noreferrer\">defer operator </a> while creating your observable list. It returns refresh list when you subscribed.</p>\n"}], "owner": {"reputation": 3, "user_id": 9858922, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e5V5RfhMkSY/AAAAAAAAAAI/AAAAAAAAAAA/5cqOHnWbjEo/photo.jpg?sz=128", "display_name": "Sebasti&#225;n Land&#237;nez Garc&#237;a", "link": "https://stackoverflow.com/users/9858922/sebasti%c3%a1n-land%c3%adnez-garc%c3%ada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529503204, "creation_date": 1529502829, "question_id": 50949942, "link": "https://stackoverflow.com/questions/50949942/list-not-emitting-on-remove-item-rxkotlin", "title": "List not emitting on remove item (RxKotlin)", "body": "<p>I'm working on an Android App. I have a list of photos loaded in memory. I want to make use of Reactive library, so I declare a memory-base datasource where I save the list:</p>\n\n<pre><code>    @Singleton\n    class MemoryPhotosSource @Inject constructor() {\n         var photos: MutableList&lt;Image&gt; = mutableListOf()\n         ...\n\n         // Here is my function to add items to list.\n         fun addPhoto(image: Image) {\n              photos.add(image)\n         }\n\n         // Here is my function to list the items.\n         fun listPhotos(): List&lt;Image&gt; = photos\n\n         // Here is my function to remove items from list.\n         fun removePhoto(image: Image): Image {\n               photos.remove(image)\n               return image\n         }\n    }\n</code></pre>\n\n<p>Then, I have a ViewModel where I call these methods:</p>\n\n<pre><code>class CreateDocumentFromPhotosViewModel @Inject constructor(): ViewModel() {\n       @Inject\n       lateinit var source: MemoryPhotosSource\n\n       fun listImages(): Observable&lt;List&lt;Image&gt;&gt; = Observable.fromCallable {\n           source.listPhotos()\n       }.applySchedulers()\n\n       fun addImage(image: Image) {\n           source.addPhoto(image)\n       }\n\n       fun removeImage(image: Image): Image {\n           source.removePhoto(image)\n           return image\n       }\n}\n</code></pre>\n\n<p>Finally, I subscribe in my application:</p>\n\n<pre><code>    dis add viewModel.listImages()\n            .subscribe {\n                adapter.data = it\n            }\n\n    dis add onDelete\n            .map { viewModel.removeImage(it) }\n            .map { showSnackbar(parentView, resources.getString(R.string.document_removed), resources.getString(R.string.undo), it)}\n            .map { it.subscribe { viewModel.addImage(it) } }\n            .subscribe()\n</code></pre>\n\n<p>Listing and adding images work nicely. However, when I press the delete button, which publish in the onDelete subject, the snackbar is shown, but no change is performed to the RecyclerView adapter. Debugging, I noticed that the <code>removePhoto</code> function is being called in <code>MemoryPhotosSource</code> class, and the list is being successfuly modified. However, it does not emit the changes, that's why the RecyclerView is not updated. I confirmed this behavior by leaving the application and entering again, which forced the repainting of the Recycler, and then, the removed element didn't show up, as it should be. So, I think the problem is the list doesn't emit the changes when an item is removed. </p>\n\n<p>Does anybody know a way to solve this? Any help would be much appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["java", "apache-spark", "kotlin", "user-defined-functions"], "answers": [{"comments": [{"owner": {"reputation": 491, "user_id": 9316458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HqhZi.png?s=128&g=1", "display_name": "Hexworks", "link": "https://stackoverflow.com/users/9316458/hexworks"}, "edited": false, "score": 0, "creation_date": 1529506239, "post_id": 50950778, "comment_id": 88899809, "body": "I&#39;m not transforming the whole <code>Row</code>. I just transform a value in a column like this: <code>5.0 USD</code> to a struct like this: <code>Price(5.0, &quot;USD&quot;)</code>. Please read my question again: I tried <code>Price</code> with the proper <code>StructType</code> declaration as well. Didn&#39;t work either."}], "tags": [], "owner": {"reputation": 29, "user_id": 9968089, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7483b4fd8f7888a32f88cbafc5101ae7?s=128&d=identicon&r=PG", "display_name": "user9968089", "link": "https://stackoverflow.com/users/9968089/user9968089"}, "is_accepted": false, "score": 2, "last_activity_date": 1529505362, "creation_date": 1529505362, "answer_id": 50950778, "question_id": 50949384, "link": "https://stackoverflow.com/questions/50949384/how-to-create-a-spark-udf-in-java-kotlin-which-returns-a-complex-type/50950778#50950778", "title": "How to create a Spark UDF in Java / Kotlin which returns a complex type?", "body": "<p>It simple. Go to <a href=\"http://spark.apache.org/docs/latest/sql-programming-guide.html#data-types\" rel=\"nofollow noreferrer\">Data Types Reference</a> and find the corresponding type.</p>\n\n<p>In Spark 2.3</p>\n\n<ul>\n<li>If you declare return type as <code>StructType</code> the functions <strong>has to</strong> return <code>org.apache.spark.sql.Row</code>.</li>\n<li>If you return <code>Map&lt;String, String&gt;</code> function return type should be <code>MapType</code> - clearly not what you want.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": false, "score": 9, "last_activity_date": 1529695514, "last_edit_date": 1529695514, "creation_date": 1529606704, "answer_id": 50975592, "question_id": 50949384, "link": "https://stackoverflow.com/questions/50949384/how-to-create-a-spark-udf-in-java-kotlin-which-returns-a-complex-type/50975592#50975592", "title": "How to create a Spark UDF in Java / Kotlin which returns a complex type?", "body": "<p><strong>TL;DR</strong> The function should return an object of class <code>org.apache.spark.sql.Row</code>.</p>\n\n<p>Spark provides two main variants of <code>UDF</code> definitions.</p>\n\n<ol>\n<li><p><code>udf</code> variants using Scala reflection:</p>\n\n<ul>\n<li><code>def udf[RT](f: () \u21d2 RT)(implicit arg0: TypeTag[RT]): UserDefinedFunction</code></li>\n<li><code>def udf[RT, A1](f: (A1) \u21d2 RT)(implicit arg0: TypeTag[RT], arg1: TypeTag[A1]): UserDefinedFunction</code></li>\n<li>...</li>\n<li><code>def udf[RT, A1, A2, ..., A10](f: (A1, A2, ..., A10) \u21d2 RT)(implicit arg0: TypeTag[RT], arg1: TypeTag[A1], arg2: TypeTag[A2], ..., arg10: TypeTag[A10])</code></li>\n</ul>\n\n<p>which define</p>\n\n<blockquote>\n  <p>Scala closure of ... arguments as user-defined function (UDF). The data types are automatically inferred based on the Scala closure's signature. </p>\n</blockquote>\n\n<p>These variants are used without schema with atomics or algebraic data types. For example the function in question would be defined in Scala:</p>\n\n<pre class=\"lang-scala prettyprint-override\"><code>case class Price(value: Double, currency: String) \n\nval df = Seq(\"1 USD\").toDF(\"price\")\n\nval toPrice = udf((s: String) =&gt; scala.util.Try { \n  s split(\" \") match {\n    case Array(price, currency) =&gt; Price(price.toDouble, currency)\n  }\n}.toOption)\n\ndf.select(toPrice($\"price\")).show\n// +----------+\n// |UDF(price)|\n// +----------+\n// |[1.0, USD]|\n// +----------+\n</code></pre>\n\n<p>In this variant return type is automatically encoded.</p>\n\n<p>Due to it's dependence on reflection this variant is intended primarily for Scala users.</p></li>\n<li><p><code>udf</code> variants providing schema definition (one you use here). The return type for this variant, should be the same as for <code>Dataset[Row]</code>:</p>\n\n<ul>\n<li><p>As pointed out in the other answer you can use only the types listed in the <a href=\"http://spark.apache.org/docs/latest/sql-programming-guide.html#data-types\" rel=\"noreferrer\">SQL types mapping table</a> (atomic types either boxed or unboxed, <code>java.sql.Timestamp</code> / <code>java.sql.Date</code>, as well as high level collections).</p></li>\n<li><p>Complex structures (<code>structs</code> / <code>StructTypes</code>) are expressed using <code>org.apache.spark.sql.Row</code>. No mixing with algebraic data types or equivalent is allowed. For example (Scala code) </p>\n\n<pre><code>struct&lt;_1:int,_2:struct&lt;_1:string,_2:struct&lt;_1:double,_2:int&gt;&gt;&gt;\n</code></pre>\n\n<p>should be expressed as</p>\n\n<pre><code>Row(1, Row(\"foo\", Row(-1.0, 42))))\n</code></pre>\n\n<p>not</p>\n\n<p><s></p>\n\n<pre><code>(1, (\"foo\", (-1.0, 42))))\n</code></pre>\n\n<p></s></p>\n\n<p>or any mixed variant, like</p>\n\n<p><s></p>\n\n<pre><code>Row(1, Row(\"foo\", (-1.0, 42))))\n</code></pre>\n\n<p></s></p></li>\n</ul>\n\n<p>This variant is provided primarily to ensure Java interoperability.</p>\n\n<p>In this case (equivalent to the one in question) the definition should be similar to the following one:</p>\n\n<pre class=\"lang-scala prettyprint-override\"><code>import org.apache.spark.sql.types._\nimport org.apache.spark.sql.functions.udf\nimport org.apache.spark.sql.Row\n\n\nval schema = StructType(Seq(\n  StructField(\"value\", DoubleType, false),\n  StructField(\"currency\", StringType, false)\n))\n\nval toPrice = udf((s: String) =&gt; scala.util.Try { \n  s split(\" \") match {\n    case Array(price, currency) =&gt; Row(price.toDouble, currency)\n  }\n}.getOrElse(null), schema)\n\ndf.select(toPrice($\"price\")).show\n// +----------+\n// |UDF(price)|\n// +----------+\n// |[1.0, USD]|\n// |      null|\n// +----------+\n</code></pre>\n\n<p>Excluding all the nuances of exception handling (in general <code>UDFs</code> should contr ol for <code>null</code> input and by convention gracefully handle malformed data) Java equivalent should look more or less like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>UserDefinedFunction price = udf((String s) -&gt; {\n    String[] split = s.split(\" \");\n    return RowFactory.create(Double.parseDouble(split[0]), split[1]);\n}, DataTypes.createStructType(new StructField[]{\n    DataTypes.createStructField(\"value\", DataTypes.DoubleType, true),\n    DataTypes.createStructField(\"currency\", DataTypes.StringType, true)\n}));\n</code></pre></li>\n</ol>\n\n<p><strong>Context</strong>:</p>\n\n<p>To give you some context this distinction is reflected in the other parts of the API as well. For example, you can create <code>DataFrame</code> from a schema and a sequence of <code>Rows</code>:</p>\n\n<pre><code>def createDataFrame(rows: List[Row], schema: StructType): DataFrame \n</code></pre>\n\n<p>or using reflection with a sequence of <code>Products</code></p>\n\n<pre><code>def createDataFrame[A &lt;: Product](data: Seq[A])(implicit arg0: TypeTag[A]): DataFrame \n</code></pre>\n\n<p>but no mixed variants are supported.  </p>\n\n<p>In other words you should provide input that can be encoded using <code>RowEncoder</code>.</p>\n\n<p>Of course you wouldn't normally use <code>udf</code> for the task like this one:</p>\n\n<pre><code>import org.apache.spark.sql.functions._\n\ndf.withColumn(\"price\", struct(\n  split($\"price\", \" \")(0).cast(\"double\").alias(\"price\"),\n  split($\"price\", \" \")(1).alias(\"currency\")\n))\n</code></pre>\n\n<p><strong>Related</strong>:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/36248206\">Creating a SparkSQL UDF in Java outside of SQLContext</a></li>\n</ul>\n"}], "owner": {"reputation": 491, "user_id": 9316458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HqhZi.png?s=128&g=1", "display_name": "Hexworks", "link": "https://stackoverflow.com/users/9316458/hexworks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4345, "favorite_count": 6, "answer_count": 2, "score": 7, "last_activity_date": 1529695514, "creation_date": 1529501186, "last_edit_date": 1529606956, "question_id": 50949384, "link": "https://stackoverflow.com/questions/50949384/how-to-create-a-spark-udf-in-java-kotlin-which-returns-a-complex-type", "title": "How to create a Spark UDF in Java / Kotlin which returns a complex type?", "body": "<p>I'm trying to write an UDF which returns a complex type:</p>\n\n<pre><code>private val toPrice = UDF1&lt;String, Map&lt;String, String&gt;&gt; { s -&gt;\n    val elements = s.split(\" \")\n    mapOf(\"value\" to elements[0], \"currency\" to elements[1])\n}\n\n\nval type = DataTypes.createStructType(listOf(\n        DataTypes.createStructField(\"value\", DataTypes.StringType, false),\n        DataTypes.createStructField(\"currency\", DataTypes.StringType, false)))\ndf.sqlContext().udf().register(\"toPrice\", toPrice, type)\n</code></pre>\n\n<p>but any time I use this:</p>\n\n<pre><code>df = df.withColumn(\"price\", callUDF(\"toPrice\", col(\"price\")))\n</code></pre>\n\n<p>I get a cryptic error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Caused by: org.apache.spark.SparkException: Failed to execute user defined function($anonfun$28: (string) =&gt; struct&lt;value:string,currency:string&gt;)\n    at org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage1.processNext(Unknown Source)\n    at org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\n    at org.apache.spark.sql.execution.WholeStageCodegenExec$$anonfun$10$$anon$1.hasNext(WholeStageCodegenExec.scala:614)\n    at org.apache.spark.sql.execution.SparkPlan$$anonfun$2.apply(SparkPlan.scala:253)\n    at org.apache.spark.sql.execution.SparkPlan$$anonfun$2.apply(SparkPlan.scala:247)\n    at org.apache.spark.rdd.RDD$$anonfun$mapPartitionsInternal$1$$anonfun$apply$25.apply(RDD.scala:830)\n    at org.apache.spark.rdd.RDD$$anonfun$mapPartitionsInternal$1$$anonfun$apply$25.apply(RDD.scala:830)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:38)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:324)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:288)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:38)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:324)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:288)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\n    at org.apache.spark.scheduler.Task.run(Task.scala:109)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:345)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: scala.MatchError: {value=138.0, currency=USD} (of class java.util.LinkedHashMap)\n    at org.apache.spark.sql.catalyst.CatalystTypeConverters$StructConverter.toCatalystImpl(CatalystTypeConverters.scala:236)\n    at org.apache.spark.sql.catalyst.CatalystTypeConverters$StructConverter.toCatalystImpl(CatalystTypeConverters.scala:231)\n    at org.apache.spark.sql.catalyst.CatalystTypeConverters$CatalystTypeConverter.toCatalyst(CatalystTypeConverters.scala:103)\n    at org.apache.spark.sql.catalyst.CatalystTypeConverters$$anonfun$createToCatalystConverter$2.apply(CatalystTypeConverters.scala:379)\n    ... 19 more\n</code></pre>\n\n<p>I tried to use a custom data type:</p>\n\n<pre><code>class Price(val value: Double, val currency: String) : Serializable\n</code></pre>\n\n<p>with an UDF which returns that type:</p>\n\n<pre><code>private val toPrice = UDF1&lt;String, Price&gt; { s -&gt;\n    val elements = s.split(\" \")\n    Price(elements[0].toDouble(), elements[1])\n}\n</code></pre>\n\n<p>but then I get another <code>MatchError</code> which complains for the <code>Price</code> type.</p>\n\n<p><em>How do I properly write an UDF which can return a complex type?</em></p>\n"}, {"tags": ["java", "android", "xml", "android-activity", "kotlin"], "comments": [{"owner": {"reputation": 1199, "user_id": 747283, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b126a9e79e9b8d882dc743435d9fcf3c?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/747283/manish"}, "edited": false, "score": 0, "creation_date": 1529509400, "post_id": 50949383, "comment_id": 88901933, "body": "Hey Manu , Its better for users if you provide a little more info about your code, if possible please post your Splash Screen code."}, {"owner": {"reputation": 286, "user_id": 9687392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/922e626a3dded744b3cd21c60279adcc?s=128&d=identicon&r=PG&f=1", "display_name": "Manu13k", "link": "https://stackoverflow.com/users/9687392/manu13k"}, "reply_to_user": {"reputation": 1199, "user_id": 747283, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b126a9e79e9b8d882dc743435d9fcf3c?s=128&d=identicon&r=PG", "display_name": "Manish", "link": "https://stackoverflow.com/users/747283/manish"}, "edited": false, "score": 0, "creation_date": 1529509987, "post_id": 50949383, "comment_id": 88902317, "body": "@Manish Hello, I did , I can&#39;t post all of my SplashScreen code because it&#39;s almost 200 lines and I don&#39;t think that it&#39;s important in this case to have all , because even if I desactivate this code , my animation still freeze"}], "answers": [{"tags": [], "owner": {"reputation": 200, "user_id": 10202842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b9d358c430a384d2bbd036b168885e?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Haroon", "link": "https://stackoverflow.com/users/10202842/muhammad-haroon"}, "is_accepted": false, "score": 0, "last_activity_date": 1598923547, "last_edit_date": 1598923547, "creation_date": 1551339525, "answer_id": 54920646, "question_id": 50949383, "link": "https://stackoverflow.com/questions/50949383/freezing-animation-when-switching-activities/54920646#54920646", "title": "Freezing animation when switching activities", "body": "<p>Use this for activity animation, it may help you for activity switch animation</p>\n<pre><code>startActivity(Intent(this, MainActivity::class.java))\n overridePendingTransition(R.anim.abc_popup_enter,R.anim.abc_popup_exit)\n</code></pre>\n"}], "owner": {"reputation": 286, "user_id": 9687392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/922e626a3dded744b3cd21c60279adcc?s=128&d=identicon&r=PG&f=1", "display_name": "Manu13k", "link": "https://stackoverflow.com/users/9687392/manu13k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1598923547, "creation_date": 1529501185, "last_edit_date": 1529510839, "question_id": 50949383, "link": "https://stackoverflow.com/questions/50949383/freezing-animation-when-switching-activities", "title": "Freezing animation when switching activities", "body": "<p>Actually I have two Activity , my SplashScreen (loads data from Webservice etc..) and my MainActivity</p>\n\n<p>The problem is here : When my Splashscreen end loading data and start to make transition to go to MainActivity, the snowfall animation litteraly stop in the middle of the screen for 1 - 1.5seconds then make transition to MainActivty ! </p>\n\n<p>The snowfall animation seems to freeze , it happens too with another animation used in my SplashScreen ( element rotation ) </p>\n\n<p>When my Splashscreen ended to loads data , it calls :</p>\n\n<pre><code> startActivity(Intent(applicationContext, MainActivity::class.java))\n finish()\n</code></pre>\n\n<p>And then the transition works , my MainActivity appears </p>\n\n<p>Can you tell me what to do please because it looks very bad.</p>\n\n<p>This freeze appears on a real phone (Nokia 6) and on android studio emulator, and I'm launching it in Debug mode</p>\n\n<p><strong>EDIT : Here is a part of my SplashScreen , nothing special , I'm doing animations then I call goHome() method</strong></p>\n\n<pre><code>class WelcomeScreen : Activity()\n{\noverride fun onCreate(savedInstanceState: Bundle?) {\n\n    //Remove title bar\n    requestWindowFeature(Window.FEATURE_NO_TITLE)\n\n    //Remove notification bar\n    window.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN)\n\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_welcome)\n\n    // Start Background Animation\n   AnimationManager.performRotationAnimation(this, R.id.sun_2)\n\n   goHome()\n}\n\n    fun goHome()\n   {\n      startActivity(Intent(applicationContext, MainActivity::class.java))\n      finish()\n   }\n}\n</code></pre>\n"}, {"tags": ["android", "android-intent", "serialization", "kotlin"], "comments": [{"owner": {"reputation": 1432, "user_id": 8471329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPb9r.jpg?s=128&g=1", "display_name": "maheryhaja", "link": "https://stackoverflow.com/users/8471329/maheryhaja"}, "edited": false, "score": 0, "creation_date": 1529499032, "post_id": 50948324, "comment_id": 88894865, "body": "Interesting question! I know tha serialize a lambda as Serializable &amp; Runnable is possible in Java. I don&#39;t know how it works in Kotlin. But wonder if serialize a lambda expression to pass to an Intent is a good idea? what about using EventBus or Observables?"}, {"owner": {"reputation": 2040, "user_id": 7369357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-zQ5CcLZPgq0/AAAAAAAAAAI/AAAAAAAAAEU/sMkAp5atKws/photo.jpg?sz=128", "display_name": "nicolas asinovich", "link": "https://stackoverflow.com/users/7369357/nicolas-asinovich"}, "reply_to_user": {"reputation": 1432, "user_id": 8471329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gPb9r.jpg?s=128&g=1", "display_name": "maheryhaja", "link": "https://stackoverflow.com/users/8471329/maheryhaja"}, "edited": false, "score": 1, "creation_date": 1529499682, "post_id": 50948324, "comment_id": 88895270, "body": "thanks, but I would like to use native resources)"}], "answers": [{"comments": [{"owner": {"reputation": 2040, "user_id": 7369357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-zQ5CcLZPgq0/AAAAAAAAAAI/AAAAAAAAAEU/sMkAp5atKws/photo.jpg?sz=128", "display_name": "nicolas asinovich", "link": "https://stackoverflow.com/users/7369357/nicolas-asinovich"}, "edited": false, "score": 1, "creation_date": 1529501782, "post_id": 50949077, "comment_id": 88896655, "body": "thanks, but how specifically passing function as parameter use your approach?"}, {"owner": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "reply_to_user": {"reputation": 2040, "user_id": 7369357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-zQ5CcLZPgq0/AAAAAAAAAAI/AAAAAAAAAEU/sMkAp5atKws/photo.jpg?sz=128", "display_name": "nicolas asinovich", "link": "https://stackoverflow.com/users/7369357/nicolas-asinovich"}, "edited": false, "score": 0, "creation_date": 1529503040, "post_id": 50949077, "comment_id": 88897592, "body": "What is the <code>action</code> that you need to perform?"}, {"owner": {"reputation": 2040, "user_id": 7369357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-zQ5CcLZPgq0/AAAAAAAAAAI/AAAAAAAAAEU/sMkAp5atKws/photo.jpg?sz=128", "display_name": "nicolas asinovich", "link": "https://stackoverflow.com/users/7369357/nicolas-asinovich"}, "edited": false, "score": 0, "creation_date": 1529504027, "post_id": 50949077, "comment_id": 88898234, "body": "the action can be any method in my case I have to send different requests when i reconnected"}, {"owner": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "reply_to_user": {"reputation": 2040, "user_id": 7369357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-zQ5CcLZPgq0/AAAAAAAAAAI/AAAAAAAAAEU/sMkAp5atKws/photo.jpg?sz=128", "display_name": "nicolas asinovich", "link": "https://stackoverflow.com/users/7369357/nicolas-asinovich"}, "edited": false, "score": 1, "creation_date": 1529504416, "post_id": 50949077, "comment_id": 88898554, "body": "If  you are not updating any views in <code>ActivityA</code> then you can use a lambda variable <code>var callback : (() -&gt; Unit)? = null</code> or an interface inside the <code>SingletonErrorHandler</code> that is set in <code>onError()</code> of <code>ActivityA</code> and call <code>callback?.invoke()</code> inside <code>doOnError()</code>"}, {"owner": {"reputation": 2040, "user_id": 7369357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-zQ5CcLZPgq0/AAAAAAAAAAI/AAAAAAAAAEU/sMkAp5atKws/photo.jpg?sz=128", "display_name": "nicolas asinovich", "link": "https://stackoverflow.com/users/7369357/nicolas-asinovich"}, "edited": false, "score": 1, "creation_date": 1529506287, "post_id": 50949077, "comment_id": 88899837, "body": "thank you so much! it what I need! it turned out very nicely!))"}, {"owner": {"reputation": 421, "user_id": 2001512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Bvq9.jpg?s=128&g=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/2001512/lucas"}, "edited": false, "score": 0, "creation_date": 1573666890, "post_id": 50949077, "comment_id": 103959317, "body": "Using Sigleton in Android is not advisable because you can loose state, leak memory, etc.  Here you have an article discussing that problem.  <a href=\"https://medium.com/@programmerr47/singletons-in-android-63ddf972a7e7\" rel=\"nofollow noreferrer\">medium.com/@programmerr47/singletons-in-android-63ddf972a7e7</a>"}, {"owner": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "edited": false, "score": 0, "creation_date": 1573692218, "post_id": 50949077, "comment_id": 103968972, "body": "I agree singletons are not always a good solution. This would be best if it can be solved with scoped dependency injection whose references can be cleared once the dependent task completes. This also means that your state mutation has more visibility to the classes using them. Alternatively, you could also use <code>typedMaps</code> and pass serialisable objects <code>not functions</code> because they withhold references and functions themselves are anonymous so their references leak"}], "tags": [], "owner": {"reputation": 252, "user_id": 3086235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fd3b0094431b0528413e056b396228?s=128&d=identicon&r=PG&f=1", "display_name": "HawkPriest", "link": "https://stackoverflow.com/users/3086235/hawkpriest"}, "is_accepted": true, "score": 1, "last_activity_date": 1529500235, "creation_date": 1529500235, "answer_id": 50949077, "question_id": 50948324, "link": "https://stackoverflow.com/questions/50948324/kotlin-passing-function-as-parameter-via-intent/50949077#50949077", "title": "Kotlin - passing function as parameter via Intent", "body": "<p>It is quite strange to package <code>interfaces</code> between activities and it is definitely not advisable. One reason why it is maybe not serializing between <code>Activity A</code> and <code>Activity B</code> is because the object was created in <code>Activity A</code>, it is treated as anonymous class creation and <code>Activity A</code> holds the reference to this object, hence preventing it from being serialised. This is good, because you can create references to objects within the interface callback whose reference in turn would be held by class instantiating it. Therefore, garbage collector won't be able to run collections on these objects and free up the space; causing a massive memory leak. </p>\n\n<p>The alternative approach to your problem could be using clean architectures and a <code>Singleton</code> class pattern that is accessible by both activities and instantiated only once by say <code>Activity A</code>:</p>\n\n<pre><code>class SingletonErrorHandler private constructor(){\n    var isError = false\n\n    fun doOnError() {\n        // do non view related stuff\n        // like a network call or something          \n    }\n\n    companion object {\n        val instance by lazy { SingletonErrorHandler() }\n    }\n}\n</code></pre>\n\n<p>in the activity you can define</p>\n\n<pre><code>class ActivityA : AppCompatActivity() {\n    fun onError() {\n        SingletonErrorHandler.instance.isError = true\n    }\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.a_activity)\n    }\n}\n</code></pre>\n\n<p>in activity B</p>\n\n<pre><code>class ActivityB : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.b_activity)\n\n        val errorHandler = SingletonErrorHandler.instance\n        if(errorHandler.isError)\n             errorHandler.doOnError()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1308, "user_id": 4687402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d49c97e25577cb2b8ccf2a1c7ef94415?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Basmaci", "link": "https://stackoverflow.com/users/4687402/benjamin-basmaci"}, "is_accepted": false, "score": 0, "last_activity_date": 1585744578, "last_edit_date": 1585744578, "creation_date": 1585743946, "answer_id": 60970842, "question_id": 50948324, "link": "https://stackoverflow.com/questions/50948324/kotlin-passing-function-as-parameter-via-intent/60970842#60970842", "title": "Kotlin - passing function as parameter via Intent", "body": "<p>I had the same problem. As mentioned in <a href=\"https://stackoverflow.com/a/50949077/4687402\">HawkPriest's Answer</a>, your object is not serializable, because its an anonymous class. Another way to fix this is to simply implement a non-anonymous class that implements your interface. Here is my code:</p>\n\n<p><strong>Interface</strong></p>\n\n<pre><code>interface MyInterface : Serializable {\n    fun instruction()\n}\n</code></pre>\n\n<p><strong>Class</strong></p>\n\n<pre><code>class MyClass : MyInterface {\n    override fun instruction() {\n        // does something\n    }\n}\n</code></pre>\n\n<p><strong>Calling Activity</strong></p>\n\n<pre><code>val myObject = MyClass()\nval intent = Intent(context, MyActivity::class.java).putExtra(\"Tag\", myObject)\n\ncontext.startActivity(intent)\n</code></pre>\n\n<p><strong>Activity</strong></p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    val myObject = intent.getSerializableExtra(\"Tag\") as MyInterface\n\n    myObject.instruction()\n}\n</code></pre>\n\n<p>Regarding the \"native resources\" as mentioned in your comment, you can make your <code>instruction</code> take parameters or pass them to your <code>MyObject</code>.</p>\n\n<p>P.S. The problems I have with the Singleton solution:</p>\n\n<ol>\n<li>Singleton is not eligable for garbage collection, which means it lives on after its not needed anymore. (not 100% sure about that, but that's what I get from <a href=\"https://stackoverflow.com/a/4127465/4687402\">this answer</a>)</li>\n<li>Using singleton would mean you cant have \"multiple different uses\" for your activity. If an interface is used, it is to be able to use multiple different implementations of that interface. A singleton wouldn't provide that, without using an interface architecture within your singleton, which would then again render it unnecessary, considering my proposed solution.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 565, "user_id": 4148962, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-aUUDlUxNm3w/AAAAAAAAAAI/AAAAAAAAADs/c-F_Jr4eHLg/photo.jpg?sz=128", "display_name": "mahbaleshwar hegde", "link": "https://stackoverflow.com/users/4148962/mahbaleshwar-hegde"}, "is_accepted": false, "score": 0, "last_activity_date": 1592246036, "creation_date": 1592246036, "answer_id": 62394733, "question_id": 50948324, "link": "https://stackoverflow.com/questions/50948324/kotlin-passing-function-as-parameter-via-intent/62394733#62394733", "title": "Kotlin - passing function as parameter via Intent", "body": "<p>You can write factory method to start the activity like android studio generates factory method for fragment creation.</p>\n\n<pre><code>    class RestClientErrorActivity : AppCompatActivity() {\n\n    companion object {\n        private var completion: (() -&gt; Unit)? = null\n        fun start(context: Context, completion: (() -&gt; Unit)?) {\n            RestClientErrorActivity.completion = completion\n            val bundle = Bundle()\n    intent.putExtra(UPDATE_CLIENT_ERROR_BUNDLE, bundle)\n     context.startActivity(intent)\n        }\n    }\n\n    private lateinit var retryButton: Button\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        retryButton = findViewById(R.id.btn_retry)\n    }\n\n    fun onRetryClick(view: View) {\n        finish()\n        completion?.invoke()\n    }\n}\n</code></pre>\n\n<p>Note: completion is not mandatory. so i made that as nullable. if you start activity without using factory method app will not crash.</p>\n"}], "owner": {"reputation": 2040, "user_id": 7369357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-zQ5CcLZPgq0/AAAAAAAAAAI/AAAAAAAAAEU/sMkAp5atKws/photo.jpg?sz=128", "display_name": "nicolas asinovich", "link": "https://stackoverflow.com/users/7369357/nicolas-asinovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3246, "favorite_count": 1, "accepted_answer_id": 50949077, "answer_count": 3, "score": 5, "last_activity_date": 1592246036, "creation_date": 1529497798, "last_edit_date": 1529502016, "question_id": 50948324, "link": "https://stackoverflow.com/questions/50948324/kotlin-passing-function-as-parameter-via-intent", "title": "Kotlin - passing function as parameter via Intent", "body": "<p>I have this function in kotlin extension file to pass method but it doesn't work. Please explain me how it make correctly, I try this:</p>\n\n<pre><code>fun showErrorClientScreen(context: Context, action : () -&gt; Unit) {\n    val intent = Intent(context, RestClientErrorActivity::class.java)\n\n    val bundle = Bundle()\n    bundle.putSerializable(UPDATE_CLIENT_ERROR, ErrorClientListener {  action })\n    intent.putExtra(UPDATE_CLIENT_ERROR_BUNDLE, bundle)\n\n    context.startActivity(intent)\n}\n</code></pre>\n\n<p>use java interface </p>\n\n<pre><code>public interface ErrorClientListener extends Serializable {\n\n    void tryAgainFunction();\n\n}\n</code></pre>\n\n<p>and my activity where i need listen click button and try again send request:</p>\n\n<pre><code>class RestClientErrorActivity: BaseActivity(), View.OnClickListener {\n\n    private lateinit var errorClientListener: ErrorClientListener\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_rest_client_error)\n\n        try {\n            val bundle = intent.getBundleExtra(UPDATE_CLIENT_ERROR_BUNDLE)\n            errorClientListener = bundle?.getSerializable(UPDATE_CLIENT_ERROR) as ErrorClientListener\n        } catch (e: Exception) {\n            e.message\n        }\n    }\n\n    override fun onClick(v: View?) {\n        when (v?.id) {\n            R.id.ib_update -&gt; errorClientListener.tryAgainFunction()\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["java", "gradle", "intellij-idea", "kotlin", "antlr4"], "comments": [{"owner": {"reputation": 3764, "user_id": 1128953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6b9d87c65b2798018d9095c4d92b215?s=128&d=identicon&r=PG", "display_name": "Liping Huang", "link": "https://stackoverflow.com/users/1128953/liping-huang"}, "edited": false, "score": 2, "creation_date": 1529928310, "post_id": 50947569, "comment_id": 89038515, "body": "You configured the folder as the <b>Excluded</b>, how IDEA recognizing/locating all the codes?"}, {"owner": {"reputation": 27797, "user_id": 88111, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6a285784d6695c4d2a503c7003f4af0f?s=128&d=identicon&r=PG", "display_name": "Craig Otis", "link": "https://stackoverflow.com/users/88111/craig-otis"}, "reply_to_user": {"reputation": 3764, "user_id": 1128953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6b9d87c65b2798018d9095c4d92b215?s=128&d=identicon&r=PG", "display_name": "Liping Huang", "link": "https://stackoverflow.com/users/1128953/liping-huang"}, "edited": false, "score": 3, "creation_date": 1529928928, "post_id": 50947569, "comment_id": 89038919, "body": "I didn&#39;t configure it that way - it&#39;s being auto-generated from a <code>build.gradle</code> file"}, {"owner": {"reputation": 3764, "user_id": 1128953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6b9d87c65b2798018d9095c4d92b215?s=128&d=identicon&r=PG", "display_name": "Liping Huang", "link": "https://stackoverflow.com/users/1128953/liping-huang"}, "edited": false, "score": 1, "creation_date": 1529935585, "post_id": 50947569, "comment_id": 89043258, "body": "Maybe you can try to fix that manually to check is this help"}, {"owner": {"reputation": 27797, "user_id": 88111, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6a285784d6695c4d2a503c7003f4af0f?s=128&d=identicon&r=PG", "display_name": "Craig Otis", "link": "https://stackoverflow.com/users/88111/craig-otis"}, "reply_to_user": {"reputation": 1623, "user_id": 6176003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QGwYA.jpg?s=128&g=1", "display_name": "Paraskevas Ntsounos", "link": "https://stackoverflow.com/users/6176003/paraskevas-ntsounos"}, "edited": false, "score": 1, "creation_date": 1530023043, "post_id": 50947569, "comment_id": 89081610, "body": "@ParaskevasNtsounos There is no manifest for this project."}, {"owner": {"reputation": 1623, "user_id": 6176003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QGwYA.jpg?s=128&g=1", "display_name": "Paraskevas Ntsounos", "link": "https://stackoverflow.com/users/6176003/paraskevas-ntsounos"}, "edited": false, "score": 1, "creation_date": 1530105953, "post_id": 50947569, "comment_id": 89117884, "body": "@CraigOtis have you try <a href=\"https://stackoverflow.com/a/44740130/6176003\">stackoverflow.com/a/44740130/6176003</a>"}, {"owner": {"reputation": 3301, "user_id": 2819928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a20a83999465ed80bfed990713079a3?s=128&d=identicon&r=PG", "display_name": "HenriqueMS", "link": "https://stackoverflow.com/users/2819928/henriquems"}, "edited": false, "score": 0, "creation_date": 1530213072, "post_id": 50947569, "comment_id": 89167925, "body": "@CraigOtis have you looked inside the [PROJ_ROOT]/.idea/libraries if you can find the file referencing antlr - SprintParser etc? if it&#39;s there, open it check if you have a valid path in both the &lt;classes&gt; and &lt;sources&gt; tags. Maybe your Android Studio has lost these?"}], "answers": [{"comments": [{"owner": {"reputation": 27797, "user_id": 88111, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6a285784d6695c4d2a503c7003f4af0f?s=128&d=identicon&r=PG", "display_name": "Craig Otis", "link": "https://stackoverflow.com/users/88111/craig-otis"}, "edited": false, "score": 2, "creation_date": 1530018066, "post_id": 51031685, "comment_id": 89078090, "body": "I don&#39;t think the Antlr plugin compiles the sources - it just <i>produces</i> the Java source, which your build tools/environment can then integrate however they choose."}, {"owner": {"reputation": 463, "user_id": 1937593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da698e0f6137f881e120ba96344c72a1?s=128&d=identicon&r=PG", "display_name": "paranoidAndroid", "link": "https://stackoverflow.com/users/1937593/paranoidandroid"}, "reply_to_user": {"reputation": 27797, "user_id": 88111, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6a285784d6695c4d2a503c7003f4af0f?s=128&d=identicon&r=PG", "display_name": "Craig Otis", "link": "https://stackoverflow.com/users/88111/craig-otis"}, "edited": false, "score": 1, "creation_date": 1530018245, "post_id": 51031685, "comment_id": 89078204, "body": "@CraigOtis that&#39;s true, but there might be an ordering issue. ANTLR might be generating the sources, and then the build tries to compile your source before the antlr ones. I worked with ANTLR before (java, not kotlin, but shouldn&#39;t matter) and I faced some similiar issues. Did you try what I suggested? I&#39;m curios to know if it will solve the issue"}], "tags": [], "owner": {"reputation": 463, "user_id": 1937593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da698e0f6137f881e120ba96344c72a1?s=128&d=identicon&r=PG", "display_name": "paranoidAndroid", "link": "https://stackoverflow.com/users/1937593/paranoidandroid"}, "is_accepted": false, "score": 1, "last_activity_date": 1529960672, "last_edit_date": 1529960672, "creation_date": 1529960318, "answer_id": 51031685, "question_id": 50947569, "link": "https://stackoverflow.com/questions/50947569/intellij-idea-gradle-project-not-recognizing-locating-antlr-generated-sources/51031685#51031685", "title": "IntelliJ IDEA Gradle project not recognizing/locating Antlr generated sources", "body": "<p>Shouldn't it locate the <strong>compiled</strong> classes and not the sources? Do you see the antlr generated classes in the target directory?</p>\n\n<p>Try this: first build the project without referencing or using any ANTLR generated classes, and only after the build is successful, then add the code that references them.</p>\n\n<p>(In other words, what I think that happens, is that your ANTLR sources are compiled after the code that references them. They never have a chance to compile because build fails before)</p>\n\n<p>Also if this is really the case, you can solve it also by splitting into two artifacts and make sure the ANTLR one is built before the one with the code that uses it</p>\n"}, {"tags": [], "owner": {"reputation": 1623, "user_id": 6176003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QGwYA.jpg?s=128&g=1", "display_name": "Paraskevas Ntsounos", "link": "https://stackoverflow.com/users/6176003/paraskevas-ntsounos"}, "is_accepted": false, "score": 1, "last_activity_date": 1530218766, "last_edit_date": 1530218766, "creation_date": 1530105146, "answer_id": 51063723, "question_id": 50947569, "link": "https://stackoverflow.com/questions/50947569/intellij-idea-gradle-project-not-recognizing-locating-antlr-generated-sources/51063723#51063723", "title": "IntelliJ IDEA Gradle project not recognizing/locating Antlr generated sources", "body": "<p>Try to add generated sources in idea module like this post from Daniel Dekany <a href=\"https://discuss.gradle.org/t/how-do-i-get-intellij-to-recognize-gradle-generated-sources-dir/16847/5\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>apply plugin: \"idea\"\n...\nsourceSets.main.java.srcDir new File(buildDir, 'generated/javacc')\nidea {\n    module {\n        // Marks the already(!) added srcDir as \"generated\"\n        generatedSourceDirs += file('build/generated/javacc')\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 312, "user_id": 4486788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fWOYS.jpg?s=128&g=1", "display_name": "Max Zavyrylin", "link": "https://stackoverflow.com/users/4486788/max-zavyrylin"}, "is_accepted": false, "score": 1, "last_activity_date": 1530212208, "creation_date": 1530212208, "answer_id": 51089631, "question_id": 50947569, "link": "https://stackoverflow.com/questions/50947569/intellij-idea-gradle-project-not-recognizing-locating-antlr-generated-sources/51089631#51089631", "title": "IntelliJ IDEA Gradle project not recognizing/locating Antlr generated sources", "body": "<p>Try adding this to your <code>build.gradle</code>:</p>\n\n<pre><code>sourceSets {\n  main.java.srcDirs += \"${project.buildDir}/generated-src/antlr/main\"\n}\n\ngenerateGrammarSource {\n  arguments += [\"-visitor\", \"-package\", \"com.craigotis.sprint.core.antlr\"]\n  outputDirectory = file(\"${project.buildDir}/generated-src/antlr/main/com/craigotis/sprint/core/antlr\")\n}\n\ncompileKotlin.dependsOn generateGrammarSource\n</code></pre>\n"}], "owner": {"reputation": 27797, "user_id": 88111, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6a285784d6695c4d2a503c7003f4af0f?s=128&d=identicon&r=PG", "display_name": "Craig Otis", "link": "https://stackoverflow.com/users/88111/craig-otis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2425, "favorite_count": 0, "answer_count": 3, "score": 14, "last_activity_date": 1530218766, "creation_date": 1529495390, "last_edit_date": 1529936872, "question_id": 50947569, "link": "https://stackoverflow.com/questions/50947569/intellij-idea-gradle-project-not-recognizing-locating-antlr-generated-sources", "title": "IntelliJ IDEA Gradle project not recognizing/locating Antlr generated sources", "body": "<p>I'm using Antlr in a simple Kotlin/Gradle project, and while my Gradle build is generating Antlr sources, they are not available for importing into the project.</p>\n\n<p>As you can see (on the left), the classes (Lexer/Parser, etc.) are being generated. I have also configured this <code>generated-src/antlr/main</code> directory as a <strong>Source Root</strong>. Most questions I see list this as a solution, but I've already done it.</p>\n\n<p>The issue persists after multiple rebuilds (both in IDEA and on the CLI), and following all the usual \"Invalidate Cache and Restart\" issues.</p>\n\n<p>Further, the import issue is listed in the Gradle build on the CLI so it doesn't seem isolated to IDEA.</p>\n\n<p>What am I missing here?</p>\n\n<p><a href=\"https://i.stack.imgur.com/FEeH3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FEeH3.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here's the <code>build.gradle</code> file produced by IDEA when I was creating the project initially, and which IDEA is using for project/workspace synchronization.</p>\n\n<pre><code>plugins {\n    id 'org.jetbrains.kotlin.jvm' version '1.2.50'\n}\n\ngroup 'com.craigotis'\nversion '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\napply plugin: 'antlr'\n\ndependencies {\n    antlr \"org.antlr:antlr4:4.5\"\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jdk8\"\n    testCompile group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: '5.2.0'\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 7175, "user_id": 4098311, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5UMNm.png?s=128&g=1", "display_name": "Halayem Anis", "link": "https://stackoverflow.com/users/4098311/halayem-anis"}, "edited": false, "score": 0, "creation_date": 1529490560, "post_id": 50946008, "comment_id": 88889311, "body": "Java or JavaScript ?"}, {"owner": {"reputation": 2572, "user_id": 812919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/izI7J.png?s=128&g=1", "display_name": "daka", "link": "https://stackoverflow.com/users/812919/daka"}, "reply_to_user": {"reputation": 7175, "user_id": 4098311, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5UMNm.png?s=128&g=1", "display_name": "Halayem Anis", "link": "https://stackoverflow.com/users/4098311/halayem-anis"}, "edited": false, "score": 0, "creation_date": 1529490573, "post_id": 50946008, "comment_id": 88889322, "body": "@HalayemAnis Java"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 7175, "user_id": 4098311, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5UMNm.png?s=128&g=1", "display_name": "Halayem Anis", "link": "https://stackoverflow.com/users/4098311/halayem-anis"}, "edited": false, "score": 0, "creation_date": 1529490586, "post_id": 50946008, "comment_id": 88889337, "body": "@HalayemAnis it&#39;s Kotlin. Kotlin is a JVM language, which means it uses Java API&#39;s (the reason it&#39;s tagged Java)"}, {"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 2, "creation_date": 1529490645, "post_id": 50946008, "comment_id": 88889377, "body": "@daka That&#39;s a kotlin <code>String</code>, not a java <code>String</code>. Kotlin has just <code>replace</code>"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1529490705, "post_id": 50946008, "comment_id": 88889414, "body": "The Kotlin <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/replace.html\" rel=\"nofollow noreferrer\"><code>replace</code></a> function can accept a <code>Regex</code> argument. It doesn&#39;t need <code>replaceAll</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4427, "user_id": 2111778, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vP0ug.jpg?s=128&g=1", "display_name": "xjcl", "link": "https://stackoverflow.com/users/2111778/xjcl"}, "edited": false, "score": 0, "creation_date": 1606174239, "post_id": 50946070, "comment_id": 114877461, "body": "What do I do if I replace with <code>$1</code> like here? <a href=\"https://stackoverflow.com/a/40487511/2111778\">stackoverflow.com/a/40487511/2111778</a>"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 48, "last_activity_date": 1529553790, "last_edit_date": 1529553790, "creation_date": 1529490644, "answer_id": 50946070, "question_id": 50946008, "link": "https://stackoverflow.com/questions/50946008/java-string-class-replaceall-method-missing/50946070#50946070", "title": "Java String class replaceAll method missing", "body": "<p>You can do this with just <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/replace.html\" rel=\"noreferrer\"><code>replace</code></a> in Kotlin:</p>\n\n<pre><code>\"foo and foo\".replace(\"foo\", \"bar\") // \"bar and bar\"\n</code></pre>\n\n<p>Note that the call above replaces the literal strings, if you need a <code>Regex</code> as the first parameter you can do either of the following:</p>\n\n<pre><code>\"foo and bar\".replace(\"[abcd]\".toRegex(), \"x\") // \"foo xnx xxr\"\n\"foo and bar\".replace(Regex(\"[abcd]\"), \"x\")    // \"foo xnx xxr\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 954, "user_id": 4964152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ZDxr.png?s=128&g=1", "display_name": "Zinc", "link": "https://stackoverflow.com/users/4964152/zinc"}, "is_accepted": false, "score": 5, "last_activity_date": 1529490691, "creation_date": 1529490691, "answer_id": 50946085, "question_id": 50946008, "link": "https://stackoverflow.com/questions/50946008/java-string-class-replaceall-method-missing/50946085#50946085", "title": "Java String class replaceAll method missing", "body": "<p>Kotlin has replaceAll as replace:</p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/replace.html\" rel=\"noreferrer\">replace in Kotlin</a></p>\n\n<pre><code>actual fun String.replace(\noldChar: Char, \nnewChar: Char, \nignoreCase: Boolean = false\n): String (source)\n</code></pre>\n\n<p>Returns a new string with all occurrences of oldChar replaced with newChar.</p>\n"}, {"tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": false, "score": 16, "last_activity_date": 1529490789, "creation_date": 1529490789, "answer_id": 50946133, "question_id": 50946008, "link": "https://stackoverflow.com/questions/50946008/java-string-class-replaceall-method-missing/50946133#50946133", "title": "Java String class replaceAll method missing", "body": "<p>Kotlin has it's own String class. All the replace methods are just <code>replace</code>. </p>\n\n<p><code>replaceAll</code> in Java uses regex, so I assume your goal is using regex. To do this, just use a regex object when you pass to replace:</p>\n\n<pre><code>sb.toString().replace(\"your regex\".toRegex(), \"replacement\");\n</code></pre>\n\n<p>If you don't have regex (and that's wrong), don't call <code>.toRegex()</code>:</p>\n\n<pre><code>sb.toString().replace(\"replace target\", \"replacement\");\n</code></pre>\n"}], "owner": {"reputation": 2572, "user_id": 812919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/izI7J.png?s=128&g=1", "display_name": "daka", "link": "https://stackoverflow.com/users/812919/daka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16733, "favorite_count": 1, "accepted_answer_id": 50946070, "answer_count": 3, "score": 32, "last_activity_date": 1529553790, "creation_date": 1529490442, "question_id": 50946008, "link": "https://stackoverflow.com/questions/50946008/java-string-class-replaceall-method-missing", "title": "Java String class replaceAll method missing", "body": "<p>I'm having a very weird issue right now, the <code>replaceAll</code> method is missing from the <code>String</code> object.</p>\n\n<p>JDK version: 1.8.0<br>\nAndroid Studio version: 3.1.3<br>\nKotlin version: 1.2</p>\n\n<p><a href=\"https://i.stack.imgur.com/mHDZ0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mHDZ0.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replaceAll-java.lang.String-java.lang.String-\" rel=\"noreferrer\">It hasn't been removed</a>, so whats going on here??</p>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 2662, "user_id": 2707179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUNvp.jpg?s=128&g=1", "display_name": "michalbrz", "link": "https://stackoverflow.com/users/2707179/michalbrz"}, "edited": false, "score": 0, "creation_date": 1529489987, "post_id": 50945658, "comment_id": 88888947, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32352159/retrofit-2-removes-characters-after-hostname-from-base-url\">Retrofit 2 removes characters after hostname from base url</a>"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1529490121, "post_id": 50945658, "comment_id": 88889021, "body": "Not a duplicate of that question - that would be the expected behavior only if the annotation was declared with a leading slash, like <code>@GET(&quot;&#47;post&quot;)</code>. Using <code>@GET(&quot;post&quot;)</code> should keep the entire base url, not just the host. Are you sure that your <code>ALL_POSTS</code> constant doesn&#39;t have a slash in it, @noob-Sci-Bot?"}, {"owner": {"reputation": 211, "user_id": 7942905, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b732710568dcd44ecff443f0883cfb9f?s=128&d=identicon&r=PG&f=1", "display_name": "noob-Sci-Bot", "link": "https://stackoverflow.com/users/7942905/noob-sci-bot"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1529490283, "post_id": 50945658, "comment_id": 88889141, "body": "@zsmb13 Yes, I am absolutely sure."}, {"owner": {"reputation": 5612, "user_id": 808019, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d71c5402e4d270e32f6c63aaf1fc63b?s=128&d=identicon&r=PG", "display_name": "peshkira", "link": "https://stackoverflow.com/users/808019/peshkira"}, "edited": false, "score": 1, "creation_date": 1529494707, "post_id": 50945658, "comment_id": 88891908, "body": "Which version of Retrofit are you using?"}, {"owner": {"reputation": 211, "user_id": 7942905, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b732710568dcd44ecff443f0883cfb9f?s=128&d=identicon&r=PG&f=1", "display_name": "noob-Sci-Bot", "link": "https://stackoverflow.com/users/7942905/noob-sci-bot"}, "edited": false, "score": 0, "creation_date": 1529495033, "post_id": 50945658, "comment_id": 88892096, "body": "<code>com.squareup.retrofit2:retrofit:2.3.0</code>"}], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 7942905, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b732710568dcd44ecff443f0883cfb9f?s=128&d=identicon&r=PG&f=1", "display_name": "noob-Sci-Bot", "link": "https://stackoverflow.com/users/7942905/noob-sci-bot"}, "edited": false, "score": 0, "creation_date": 1529491668, "post_id": 50946311, "comment_id": 88890035, "body": "Thanks, for the reply. That&#39;s the desired response. But for some reason, I am not getting that."}, {"owner": {"reputation": 211, "user_id": 7942905, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b732710568dcd44ecff443f0883cfb9f?s=128&d=identicon&r=PG&f=1", "display_name": "noob-Sci-Bot", "link": "https://stackoverflow.com/users/7942905/noob-sci-bot"}, "edited": false, "score": 0, "creation_date": 1529491754, "post_id": 50946311, "comment_id": 88890097, "body": "I&#39;ve another question. May be a naive one. If the response is not according to the predefined model, How would the error look?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 211, "user_id": 7942905, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b732710568dcd44ecff443f0883cfb9f?s=128&d=identicon&r=PG&f=1", "display_name": "noob-Sci-Bot", "link": "https://stackoverflow.com/users/7942905/noob-sci-bot"}, "edited": false, "score": 1, "creation_date": 1529491816, "post_id": 50946311, "comment_id": 88890136, "body": "You&#39;d be getting an error from inside <code>Gson</code>, something like a <code>com.google.gson.JsonSyntaxException</code>."}, {"owner": {"reputation": 211, "user_id": 7942905, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b732710568dcd44ecff443f0883cfb9f?s=128&d=identicon&r=PG&f=1", "display_name": "noob-Sci-Bot", "link": "https://stackoverflow.com/users/7942905/noob-sci-bot"}, "edited": false, "score": 0, "creation_date": 1529493439, "post_id": 50946311, "comment_id": 88891123, "body": "Thank you. But I don&#39;t understand the problem above, stuck here for almost a week now. Can you please replicate the exact scenario if possible?"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 1, "last_activity_date": 1529491364, "creation_date": 1529491364, "answer_id": 50946311, "question_id": 50945658, "link": "https://stackoverflow.com/questions/50945658/retrofit-url-is-being-changed/50946311#50946311", "title": "Retrofit : Url is being changed", "body": "<p>I can't reproduce this, you should try cleaning / rebuilding your project, the code you've provided here has no errors in it. </p>\n\n<p>This is the code I added to test it:</p>\n\n<pre><code>class AllPostsResponse\nclass FbLoginResponse\n\nfun main(args: Array&lt;String&gt;) {\n    val service = RetrofitClientInstance.getRetrofitInstance()\n                     .create(UserLoginResponseReceiver.GetDataService::class.java)\n    val url = service.getAllPosts().request().url()\n    println(url)\n}\n</code></pre>\n\n<p>The URL returned here is the following, as expected:</p>\n\n<pre><code>http://test.sample.com/req/v1/post\n</code></pre>\n"}], "owner": {"reputation": 211, "user_id": 7942905, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b732710568dcd44ecff443f0883cfb9f?s=128&d=identicon&r=PG&f=1", "display_name": "noob-Sci-Bot", "link": "https://stackoverflow.com/users/7942905/noob-sci-bot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529493655, "creation_date": 1529489426, "last_edit_date": 1529493655, "question_id": 50945658, "link": "https://stackoverflow.com/questions/50945658/retrofit-url-is-being-changed", "title": "Retrofit : Url is being changed", "body": "<p>Currently I am facing some issues with Retrofit. <strong>The URL, I am providing to <code>RetrofitInstance</code> is changing for the second request.</strong> Here are the codes:</p>\n\n<pre><code>object RetrofitClientInstance{\n\n     private var retrofit: Retrofit? = null\n     //private const val BASE_URL = \"http://api.sample.com/req/\";\n     private const val BASE_URL = \"http://test.sample.com/req/\"\n     private const val BASE_URL_VERSION = \"v1/\"\n\n\n     fun getRetrofitInstance() : Retrofit {\n        if (retrofit == null) {\n            retrofit = Retrofit.Builder()\n                    .baseUrl(BASE_URL + BASE_URL_VERSION)\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .build()\n        }\n        return this!!.retrofit!!\n    }\n\n}\n</code></pre>\n\n<p>Here are the <code>interface</code> methods for different API requests:</p>\n\n<pre><code>class UserLoginResponseReceiver{\n\n    interface GetDataService {\n\n        @FormUrlEncoded\n        @POST(UrlEndPoints.USER_LOGIN_BY_FACEBOOK)\n        fun loginUserByFacebook(@Field(\"access_token\") last: String): Call&lt;FbLoginResponse&gt;\n\n        @GET(UrlEndPoints.ALL_POSTS)\n        fun getAllPosts() : Call&lt;AllPostsResponse&gt;\n\n    }\n}\n</code></pre>\n\n<p><strong>UrlEndPoints.kt</strong></p>\n\n<pre><code>object UrlEndPoints {\n\n   const val USER_LOGIN_BY_FACEBOOK = \"user/auth/facebook\"\n   const val ALL_POSTS = \"post\"\n}\n</code></pre>\n\n<p>For the first request (<strong><em>loginUserByFacebook</em></strong>), the URL I am getting by debugging my response is:</p>\n\n<blockquote>\n  <p><a href=\"http://test.sample.com/req/v1/user/auth/facebook\" rel=\"nofollow noreferrer\">http://test.sample.com/req/v1/user/auth/facebook</a></p>\n</blockquote>\n\n<p>Which is fine and working perfectly. But for the second request (<strong><em>getAllPosts()</em></strong>) I am getting the following URL:</p>\n\n<blockquote>\n  <p><a href=\"http://test.sample.com/post\" rel=\"nofollow noreferrer\">http://test.sample.com/post</a></p>\n</blockquote>\n\n<p>The <strong>\"req/v1\"</strong> part is completely cut off! As a result I don't get the desired response. What's the problem here actually? Please help me.</p>\n"}, {"tags": ["function", "kotlin", "overloading", "extension-methods", "operator-keyword"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8939230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fb8bbdd4a3d6df28c49bcfd6674990e?s=128&d=identicon&r=PG&f=1", "display_name": "astronaut4449", "link": "https://stackoverflow.com/users/8939230/astronaut4449"}, "edited": false, "score": 0, "creation_date": 1529493143, "post_id": 50945732, "comment_id": 88890932, "body": "Would it then be of better style, to list all operator overloads outside the class like this:   <code>ShoppingListItem.operator fun times(num: Int) = ShoppingListItem(this.name, this.amount * num)</code>"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 11, "user_id": 8939230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fb8bbdd4a3d6df28c49bcfd6674990e?s=128&d=identicon&r=PG&f=1", "display_name": "astronaut4449", "link": "https://stackoverflow.com/users/8939230/astronaut4449"}, "edited": false, "score": 0, "creation_date": 1529494334, "post_id": 50945732, "comment_id": 88891680, "body": "That part of the code organization is entirely up to you - do whichever one looks better for you."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 1, "last_activity_date": 1529489638, "creation_date": 1529489638, "answer_id": 50945732, "question_id": 50945471, "link": "https://stackoverflow.com/questions/50945471/extension-function-wrapped-inside-class/50945732#50945732", "title": "Extension function wrapped inside class", "body": "<p>You can't place it inside the class - that would make it a <a href=\"https://kotlinlang.org/docs/reference/extensions.html#declaring-extensions-as-members\" rel=\"nofollow noreferrer\">member extension</a> that you can only call inside the class.</p>\n\n<p>The best you can do here is to place the data class and the extensions that belong to it in the same file.</p>\n"}], "owner": {"reputation": 11, "user_id": 8939230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fb8bbdd4a3d6df28c49bcfd6674990e?s=128&d=identicon&r=PG&f=1", "display_name": "astronaut4449", "link": "https://stackoverflow.com/users/8939230/astronaut4449"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529492637, "creation_date": 1529488842, "last_edit_date": 1529492637, "question_id": 50945471, "link": "https://stackoverflow.com/questions/50945471/extension-function-wrapped-inside-class", "title": "Extension function wrapped inside class", "body": "<p>The following example shows a class for a shopping list item, which can be multiplied to change the amount. To be able to multiply it from either side, I need an operator function for the <code>ShoppingListItem</code> class and the <code>Int</code> class.\nI don't like, that the extension function of the class <code>Int</code> is not part of the <code>ShoppingListItem</code> class, because it is logically connected with it. Any ideas how to wrap it inside?</p>\n\n<pre><code>data class ShoppingListItem(val name: String, val amount: Int = 1) {\n    operator fun times(num: Int) = ShoppingListItem(this.name, this.amount * num)\n}\n\noperator fun Int.times(item: ShoppingListItem) = ShoppingListItem(item.name, item.amount * this)\n\n\nfun main(args: Array&lt;String&gt;) {\n    val myItem = ShoppingListItem(\"Apple\")\n    println(myItem)     // ShoppingListItem(name=Apple, amount=1)\n    println(myItem * 2) // ShoppingListItem(name=Apple, amount=2)\n    println(3 * myItem) // ShoppingListItem(name=Apple, amount=3)\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "proguard", "android-proguard"], "comments": [{"owner": {"reputation": 577, "user_id": 6340019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0869bedbc3571d269e43f43bf2915174?s=128&d=identicon&r=PG&f=1", "display_name": "VishnuSP", "link": "https://stackoverflow.com/users/6340019/vishnusp"}, "edited": false, "score": 1, "creation_date": 1529489137, "post_id": 50945328, "comment_id": 88888456, "body": "As the documentation says it won&#39;t be obfuscated. If obfuscated, it can&#39;t be accessed via reflection. The documentation even recommends to use for methods or classes accessed only via relection"}, {"owner": {"reputation": 5088, "user_id": 2077479, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/0Wh1v.png?s=128&g=1", "display_name": "Jongz Puangput", "link": "https://stackoverflow.com/users/2077479/jongz-puangput"}, "reply_to_user": {"reputation": 577, "user_id": 6340019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0869bedbc3571d269e43f43bf2915174?s=128&d=identicon&r=PG&f=1", "display_name": "VishnuSP", "link": "https://stackoverflow.com/users/6340019/vishnusp"}, "edited": false, "score": 0, "creation_date": 1529489424, "post_id": 50945328, "comment_id": 88888639, "body": "yes, make sense thank you."}], "owner": {"reputation": 5088, "user_id": 2077479, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/0Wh1v.png?s=128&g=1", "display_name": "Jongz Puangput", "link": "https://stackoverflow.com/users/2077479/jongz-puangput"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529489149, "creation_date": 1529488457, "last_edit_date": 1529489149, "question_id": 50945328, "link": "https://stackoverflow.com/questions/50945328/keep-method-will-it-be-obfuscated", "title": "@Keep method will it be obfuscated", "body": "<p><strong>@Keep</strong></p>\n\n<p>From the following document, I just wonder even it is not minified. Will a method name be still obfuscated ??</p>\n\n<blockquote>\n  <p>Denotes that the annotated element should not be removed when the code\n  is minified at build time. This is typically used on methods and\n  classes that are accessed only via reflection so a compiler may think\n  that the code is unused.</p>\n</blockquote>\n\n<p><a href=\"https://developer.android.com/reference/android/support/annotation/Keep\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/support/annotation/Keep</a></p>\n\n<p><strong>Example of using keep on unused method (Kotlin)</strong></p>\n\n<pre><code>@Keep\nfun SendToGroup(message: String?) {\n    fireNotification(\n            title = \"Notify All\",\n            message = message ?: \"\")\n}\n\n@Keep\nfun SendToAndroid(message: String?, signalRId: String?) {\n    fireNotification(\n            title = \"Notify Group\",\n            message = message ?: \"\")\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit2", "rx-android", "rx-kotlin"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1529488289, "post_id": 50945144, "comment_id": 88887889, "body": "What does your <code>OPEN_WEATHER_MAP_API_ENDPOINT</code> value look like?"}, {"owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1529488425, "post_id": 50945144, "comment_id": 88887972, "body": "@zsmb13 added my constants class for reference"}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 1, "last_activity_date": 1529488803, "creation_date": 1529488803, "answer_id": 50945458, "question_id": 50945144, "link": "https://stackoverflow.com/questions/50945144/retrofit-dynamic-url-still-appends-to-the-base-url/50945458#50945458", "title": "Retrofit Dynamic URL still appends to the Base URL", "body": "<p>Your issue is that you didn't provide the full URL in the dynamic call, and that's why Retrofit is trying to make the call relative to the base url still. Just add <code>https://</code> to the dynamic URL:</p>\n\n<pre><code>const val OPEN_WEATHER_MAP_API_ENDPOINT = \"https://api.openweathermap.org/data/2.5/weather?q=Catbalogan,PH&amp;units=metric\"\n</code></pre>\n\n<p><a href=\"https://futurestud.io/tutorials/retrofit-2-how-to-use-dynamic-urls-for-requests\" rel=\"nofollow noreferrer\">Here</a> is an article discussing how the dynamic URL is resolved in different scenarios, for further reference.</p>\n"}], "owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 50945458, "answer_count": 1, "score": 0, "last_activity_date": 1529488887, "creation_date": 1529487964, "last_edit_date": 1529488409, "question_id": 50945144, "link": "https://stackoverflow.com/questions/50945144/retrofit-dynamic-url-still-appends-to-the-base-url", "title": "Retrofit Dynamic URL still appends to the Base URL", "body": "<p>Here is my Retrofit Interface and creation code:</p>\n\n<pre><code>interface SSApi {\ncompanion object {\n    private fun create(): SSApi {\n        val httpClient = OkHttpClient().newBuilder()\n        val networkInterceptor = Interceptor { chain -&gt;\n            val request = chain.request()?.newBuilder()?.addHeader(\"api-key\", SSConstants.API_KEY)?.build()\n            chain.proceed(request!!)\n        }\n\n        val loggingInterceptor = HttpLoggingInterceptor()\n        loggingInterceptor.level = HttpLoggingInterceptor.Level.BODY\n\n        httpClient.addNetworkInterceptor(networkInterceptor).addInterceptor(loggingInterceptor)\n\n        val retrofit = Retrofit.Builder()\n                .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n                .addConverterFactory(GsonConverterFactory.create())\n                .baseUrl(SSConstants.BASE_URL)\n                .client(httpClient.build())\n                .build()\n\n        return retrofit.create(SSApi::class.java)\n    }\n\n    val api by lazy {\n        SSApi.create()\n    }\n\n    var disposable: Disposable? = null\n}\n\n@GET\nfun getWeatherInfo(@Url url: String): Observable&lt;OpenWeatherMapInfo&gt;\n}\n</code></pre>\n\n<p>And here is how I use the <code>disposable</code>:</p>\n\n<pre><code>    private fun getWeather() {\n    disposable = api\n            .getWeatherInfo(SSConstants.OPEN_WEATHER_MAP_API_ENDPOINT)\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(\n                    { results -&gt; Log.i(\"Dale\", results.toString())},\n                    { error -&gt; Log.i(\"Dale\", error.message)}\n            )\n    }\n</code></pre>\n\n<p>When I execute the request, I can see that it my <code>OPEN_WEATHER_MAP_API_ENDPOINT</code> still appends to my <code>baseUrl</code>. </p>\n\n<p>Here is my Constants class for reference:</p>\n\n<pre><code>object SSConstants {\nconst val OPEN_WEATHER_MAP_API_ENDPOINT = \"api.openweathermap.org/data/2.5/weather?q=Catbalogan,PH&amp;units=metric\"\nconst val BASE_URL = \"https://api.xxx.xxx/\"\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-lifecycle"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 1, "creation_date": 1529486656, "post_id": 50944307, "comment_id": 88886721, "body": "Did you mean <a href=\"https://developer.android.com/topic/libraries/architecture/lifecycle\" rel=\"nofollow noreferrer\">lifecycle</a> from android arch components?"}, {"owner": {"reputation": 1437, "user_id": 5353755, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a5058688cd795df29df251d1d91b603e?s=128&d=identicon&r=PG&f=1", "display_name": "Near1999", "link": "https://stackoverflow.com/users/5353755/near1999"}, "reply_to_user": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1529488772, "post_id": 50944307, "comment_id": 88888212, "body": "@Pawel, I mean any solution which can solve the problem"}, {"owner": {"reputation": 775, "user_id": 1689926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f03f93cc4dc519b158a7b954d6097d5?s=128&d=identicon&r=PG", "display_name": "Godfather", "link": "https://stackoverflow.com/users/1689926/godfather"}, "edited": false, "score": 0, "creation_date": 1529518434, "post_id": 50944307, "comment_id": 88906871, "body": "Create base activity and do common functionality there (for ex: toast based on lifecycle).now extend that activity in your project ."}], "answers": [{"comments": [{"owner": {"reputation": 1437, "user_id": 5353755, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a5058688cd795df29df251d1d91b603e?s=128&d=identicon&r=PG&f=1", "display_name": "Near1999", "link": "https://stackoverflow.com/users/5353755/near1999"}, "edited": false, "score": 0, "creation_date": 1529571166, "post_id": 50954591, "comment_id": 88925131, "body": "Its not working: <code>error: 1st argument of a callback method must be a LifecycleOwner which represents the source of the event         public static void onLifeResume(LifecycleInterface $this) {</code>"}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "reply_to_user": {"reputation": 1437, "user_id": 5353755, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a5058688cd795df29df251d1d91b603e?s=128&d=identicon&r=PG&f=1", "display_name": "Near1999", "link": "https://stackoverflow.com/users/5353755/near1999"}, "edited": false, "score": 0, "creation_date": 1529572882, "post_id": 50954591, "comment_id": 88926142, "body": "I&#39;ve tested with kotlin v. 1.2.50 and support lib v. 27.1.1 and it works on android P emulator. Are you adding some arguments to the interface methods?"}, {"owner": {"reputation": 1437, "user_id": 5353755, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a5058688cd795df29df251d1d91b603e?s=128&d=identicon&r=PG&f=1", "display_name": "Near1999", "link": "https://stackoverflow.com/users/5353755/near1999"}, "edited": false, "score": 0, "creation_date": 1529580266, "post_id": 50954591, "comment_id": 88930932, "body": "No, Kotlin is adding them automatically if you will look into bytecode"}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "reply_to_user": {"reputation": 1437, "user_id": 5353755, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a5058688cd795df29df251d1d91b603e?s=128&d=identicon&r=PG&f=1", "display_name": "Near1999", "link": "https://stackoverflow.com/users/5353755/near1999"}, "edited": false, "score": 0, "creation_date": 1529583091, "post_id": 50954591, "comment_id": 88932761, "body": "I edited answer to show what happens on my end. Are you sure you&#39;re using latest kotlin version and plugin? Because my bytecode is quite different from what You get."}, {"owner": {"reputation": 1437, "user_id": 5353755, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a5058688cd795df29df251d1d91b603e?s=128&d=identicon&r=PG&f=1", "display_name": "Near1999", "link": "https://stackoverflow.com/users/5353755/near1999"}, "edited": false, "score": 0, "creation_date": 1529583851, "post_id": 50954591, "comment_id": 88933309, "body": "Looks like a crunch"}, {"owner": {"reputation": 554, "user_id": 5003481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUNYl.jpg?s=128&g=1", "display_name": "Felipe Kenji Shiba", "link": "https://stackoverflow.com/users/5003481/felipe-kenji-shiba"}, "edited": false, "score": 0, "creation_date": 1565624599, "post_id": 50954591, "comment_id": 101401980, "body": "<a href=\"https://youtrack.jetbrains.com/issue/KT-20232#comment=27-2484626\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-20232#comment=27-2484626</a> &quot;Android Architecture Components library does not support Kotlin interfaces with implementations. Remove implementations from the annotated interface methods, and the build should succeed&quot;"}, {"owner": {"reputation": 1680, "user_id": 2534007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a14ed0bec126763d9edf28d56bef04?s=128&d=identicon&r=PG&f=1", "display_name": "Mohib Irshad", "link": "https://stackoverflow.com/users/2534007/mohib-irshad"}, "edited": false, "score": 0, "creation_date": 1598033129, "post_id": 50954591, "comment_id": 112336468, "body": "I know its been a few years but if someone is still facing this issue, see my answer."}], "tags": [], "owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "is_accepted": false, "score": 1, "last_activity_date": 1529583001, "last_edit_date": 1529583001, "creation_date": 1529518230, "answer_id": 50954591, "question_id": 50944307, "link": "https://stackoverflow.com/questions/50944307/androidkotlin-lifecycle-events-in-interface/50954591#50954591", "title": "Android&amp;Kotlin lifecycle events in interface", "body": "<p>You can extend <a href=\"https://developer.android.com/reference/android/arch/lifecycle/Lifecycle\" rel=\"nofollow noreferrer\"><code>LifecycleObserver</code></a> interface and use appropriate annotations, for example:</p>\n\n<pre><code>interface LifecycleInterface : LifecycleObserver{\n    @OnLifecycleEvent(Lifecycle.Event.ON_RESUME)\n    fun onLifeResume(){\n        (this as? Context).let{Toast.makeText(it, \"Resumed\", Toast.LENGTH_LONG).show()}\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_PAUSE)\n    fun onLifePause(){\n        (this as? Context).let{Toast.makeText(it, \"Paused\", Toast.LENGTH_LONG).show()}\n    }\n}\n</code></pre>\n\n<p>Then register activity itself (or any custom object for that matter) as listener for lifecycle events:</p>\n\n<pre><code>class MainActivity : AppCompatActivity(), LifecycleInterface {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        lifecycle.addObserver(this) // add this to trigger lifecycle methods from interface\n        setContentView(R.layout.activity_main)\n        // rest of your onCreate...\n    }\n}\n</code></pre>\n\n<p>Edit:\nAfter showing bytecode and decompiling back to java, I end up with those two methods injected into activity:</p>\n\n<pre><code>@OnLifecycleEvent(Event.ON_RESUME)\npublic void onLifeResume() {\n   DefaultImpls.onLifeResume(this);\n}\n\n@OnLifecycleEvent(Event.ON_PAUSE)\npublic void onLifePause() {\n   DefaultImpls.onLifePause(this);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1680, "user_id": 2534007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a14ed0bec126763d9edf28d56bef04?s=128&d=identicon&r=PG&f=1", "display_name": "Mohib Irshad", "link": "https://stackoverflow.com/users/2534007/mohib-irshad"}, "is_accepted": false, "score": 0, "last_activity_date": 1598033056, "creation_date": 1598033056, "answer_id": 63527943, "question_id": 50944307, "link": "https://stackoverflow.com/questions/50944307/androidkotlin-lifecycle-events-in-interface/63527943#63527943", "title": "Android&amp;Kotlin lifecycle events in interface", "body": "<p>For anyone still facing issue due to compiler adding a parameter in default function of the interface, this is how you fix it:</p>\n<p>Instead of using kapt to process the annotations:</p>\n<pre><code>kapt &quot;androidx.lifecycle:lifecycle-compiler:$archLifecycleVersion&quot;\n</code></pre>\n<p>Use annotationProcessor for lifecycler compiler:</p>\n<pre><code>annotationProcessor &quot;androidx.lifecycle:lifecycle-compiler:$archLifecycleVersion&quot;\n</code></pre>\n<p>This works with kotlin code.</p>\n"}], "owner": {"reputation": 1437, "user_id": 5353755, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a5058688cd795df29df251d1d91b603e?s=128&d=identicon&r=PG&f=1", "display_name": "Near1999", "link": "https://stackoverflow.com/users/5353755/near1999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1598033056, "creation_date": 1529485389, "question_id": 50944307, "link": "https://stackoverflow.com/questions/50944307/androidkotlin-lifecycle-events-in-interface", "title": "Android&amp;Kotlin lifecycle events in interface", "body": "<p>Is there any possibility to trigger some default methods in <code>Kotlin</code> interfaces with lifecycle events of, for example, an <code>Activity</code> that implements that interface? </p>\n\n<p>So, I have such interface, that called in <code>Swift</code> - protocol:</p>\n\n<pre><code>interface MyInterface {\n  fun showToast() {\n    this as MyActivity\n    Toast.show(this, \"Welcome\", Toast.LENGTH_SHORT).show()\n  }\n}\n</code></pre>\n\n<p>And <code>Activity</code> class:</p>\n\n<pre><code>class MyActivity : AppCompatActivity(), MyInterface {\n\n  fun onResume() {\n    super.onResume()\n    showToast() //I want this method be called automatically, if possible\n  }\n}\n</code></pre>\n\n<p>As you can see I should call <code>showToast()</code> method directly. But is there any possibility to call it automatically with, for example, <code>LifeCycleObserver</code> events or somehow else?</p>\n"}, {"tags": ["android", "kotlin", "android-room", "android-architecture-components", "android-livedata"], "answers": [{"tags": [], "owner": {"reputation": 20237, "user_id": 4390381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLMC7.jpg?s=128&g=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/4390381/sagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1529484522, "creation_date": 1529484522, "answer_id": 50944014, "question_id": 50943919, "link": "https://stackoverflow.com/questions/50943919/convert-livedata-to-mutablelivedata/50944014#50944014", "title": "Convert LiveData to MutableLiveData", "body": "<p>Since Room doesn't support <code>MutableLiveData</code> and has support for <code>LiveData</code> only, your approach of creating a wrapper is the best approach I can think of. It will be complicated for <code>Google</code> to support <code>MutableLiveData</code>since the <code>setValue</code> and <code>postValue</code> methods are <code>public</code>. Where as for <code>LiveData</code> they are <code>protected</code> which gives more control.</p>\n"}, {"comments": [{"owner": {"reputation": 3027, "user_id": 2145504, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/769e20141cad3cf57b17b0a3b3e89db3?s=128&d=identicon&r=PG", "display_name": "kike", "link": "https://stackoverflow.com/users/2145504/kike"}, "edited": false, "score": 1, "creation_date": 1529491774, "post_id": 50945342, "comment_id": 88890111, "body": "I understand your point. The solution as it is right now doesn&#39;t differ from having a LiveData object and saving in DB. The idea here is to be able to modify independently some attributes in the database."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 3027, "user_id": 2145504, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/769e20141cad3cf57b17b0a3b3e89db3?s=128&d=identicon&r=PG", "display_name": "kike", "link": "https://stackoverflow.com/users/2145504/kike"}, "edited": false, "score": 2, "creation_date": 1529493259, "post_id": 50945342, "comment_id": 88891016, "body": "What happens when you&#39;ve modified the objects independently from the database, and then the object is fetched from network, saved to DB, and now you have a &quot;new state from network&quot; and an object that is locally modified?"}, {"owner": {"reputation": 637, "user_id": 6086511, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hyObPp970Jc/AAAAAAAAAAI/AAAAAAAAAMM/Pg4OoNkHfac/photo.jpg?sz=128", "display_name": "Swagger 68", "link": "https://stackoverflow.com/users/6086511/swagger-68"}, "edited": false, "score": 0, "creation_date": 1540959653, "post_id": 50945342, "comment_id": 93050362, "body": "@EpicPandaForce facing similar problem update to db is not reflected on live data. that is why i am trying to post to mutable live data object"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1540979268, "post_id": 50945342, "comment_id": 93058138, "body": "If you insert into DB through DAO, then if <code>LiveData&lt;List&lt;T&gt;&gt;</code> is exposed from DAO and you observe it, then you <i>will</i> receive the new data."}], "tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": true, "score": 10, "last_activity_date": 1529488486, "creation_date": 1529488486, "answer_id": 50945342, "question_id": 50943919, "link": "https://stackoverflow.com/questions/50943919/convert-livedata-to-mutablelivedata/50945342#50945342", "title": "Convert LiveData to MutableLiveData", "body": "<p>Call me crazy but AFAIK there is zero reason to use a MutableLiveData for the object that you received from the DAO.</p>\n\n<p>The idea is that you can expose an object via <code>LiveData&lt;List&lt;T&gt;&gt;</code> </p>\n\n<pre><code>@Dao\npublic interface ProfileDao {\n    @Query(\"SELECT * FROM PROFILE\")\n    LiveData&lt;List&lt;Profile&gt;&gt; getProfiles();\n}\n</code></pre>\n\n<p>Now you can observe them:</p>\n\n<pre><code>profilesLiveData.observe(this, (profiles) -&gt; {\n    if(profiles == null) return;\n\n    // you now have access to profiles, can even save them to the side and stuff\n    this.profiles = profiles;\n});\n</code></pre>\n\n<p>So if you want to make this live data \"emit a new data and modify it\", then you need to insert the profile into the database. The write will re-evaluate this query and it will be emitted once the new profile value is written to db.</p>\n\n<pre><code>dao.insert(profile); // this will make LiveData emit again\n</code></pre>\n\n<p>So there is no reason to use <code>getValue</code>/<code>setValue</code>, just write to your db.</p>\n"}, {"comments": [{"owner": {"reputation": 838, "user_id": 8040128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSh50.jpg?s=128&g=1", "display_name": "Zakhar Rodionov", "link": "https://stackoverflow.com/users/8040128/zakhar-rodionov"}, "edited": false, "score": 7, "creation_date": 1565467365, "post_id": 55718918, "comment_id": 101366724, "body": "This is the wrong way, no one guarantees that there is data in livedata at the moment."}, {"owner": {"reputation": 3293, "user_id": 5993479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036196443166401/picture?type=large", "display_name": "Nurseyit Tursunkulov", "link": "https://stackoverflow.com/users/5993479/nurseyit-tursunkulov"}, "reply_to_user": {"reputation": 838, "user_id": 8040128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSh50.jpg?s=128&g=1", "display_name": "Zakhar Rodionov", "link": "https://stackoverflow.com/users/8040128/zakhar-rodionov"}, "edited": false, "score": 0, "creation_date": 1612050156, "post_id": 55718918, "comment_id": 116646696, "body": "what if we check for null before?"}], "tags": [], "owner": {"reputation": 3293, "user_id": 5993479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036196443166401/picture?type=large", "display_name": "Nurseyit Tursunkulov", "link": "https://stackoverflow.com/users/5993479/nurseyit-tursunkulov"}, "is_accepted": false, "score": -2, "last_activity_date": 1555469604, "last_edit_date": 1555469604, "creation_date": 1555466957, "answer_id": 55718918, "question_id": 50943919, "link": "https://stackoverflow.com/questions/50943919/convert-livedata-to-mutablelivedata/55718918#55718918", "title": "Convert LiveData to MutableLiveData", "body": "<p>In your repository you can get <code>LiveData</code> and transform it to <code>MutableLivedata</code>:</p>\n\n<pre><code>var data= dao.getAsLiveData()\nreturn MutableLiveData&lt;T&gt;(data.value)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 198, "user_id": 9158846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/248fcd6815f81711a5e7c9cfc2a14251?s=128&d=identicon&r=PG&f=1", "display_name": "Kolaaa", "link": "https://stackoverflow.com/users/9158846/kolaaa"}, "edited": false, "score": 1, "creation_date": 1613239080, "post_id": 57427481, "comment_id": 117016780, "body": "using this technique, any changes to the source product will automatically be triggered in the mediator livedata ? therefore I only need to observe the product or do i need to observe both the product and the mediator live data ?"}], "tags": [], "owner": {"reputation": 838, "user_id": 8040128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hSh50.jpg?s=128&g=1", "display_name": "Zakhar Rodionov", "link": "https://stackoverflow.com/users/8040128/zakhar-rodionov"}, "is_accepted": false, "score": 9, "last_activity_date": 1572254176, "last_edit_date": 1572254176, "creation_date": 1565344032, "answer_id": 57427481, "question_id": 50943919, "link": "https://stackoverflow.com/questions/50943919/convert-livedata-to-mutablelivedata/57427481#57427481", "title": "Convert LiveData to MutableLiveData", "body": "<p>If you really need to, then you can use the mediator trick.</p>\n\n<p><strong>In your ViewModel</strong></p>\n\n<pre><code> val sourceProduct: LiveData&lt;Product&gt;() = repository.productFromDao()\n val product = MutableLiveData&lt;Product&gt;()\n\n val mediator = MediatorLiveData&lt;Unit&gt;()\n\n init {\n      mediator.addSource(sourceProduct, { product.value = it })\n }\n</code></pre>\n\n<p><strong>In fragment/activity</strong></p>\n\n<pre><code>observe(mediator, {})\nobserve(product, { //handle product })\n</code></pre>\n"}], "owner": {"reputation": 3027, "user_id": 2145504, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/769e20141cad3cf57b17b0a3b3e89db3?s=128&d=identicon&r=PG", "display_name": "kike", "link": "https://stackoverflow.com/users/2145504/kike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16517, "favorite_count": 3, "accepted_answer_id": 50945342, "answer_count": 4, "score": 11, "last_activity_date": 1572254176, "creation_date": 1529484178, "last_edit_date": 1529484217, "question_id": 50943919, "link": "https://stackoverflow.com/questions/50943919/convert-livedata-to-mutablelivedata", "title": "Convert LiveData to MutableLiveData", "body": "<p>Apparently, Room is not able to handle MutableLiveData and we have to stick to LiveData as it returns the following error:</p>\n\n<pre><code>error: Not sure how to convert a Cursor to this method's return type\n</code></pre>\n\n<p>I created a \"custom\" MutableLiveData in my DB helper this way:</p>\n\n<pre><code>class ProfileRepository @Inject internal constructor(private val profileDao: ProfileDao): ProfileRepo{\n\n    override fun insertProfile(profile: Profile){\n        profileDao.insertProfile(profile)\n    }\n\n    val mutableLiveData by lazy { MutableProfileLiveData() }\n    override fun loadMutableProfileLiveData(): MutableLiveData&lt;Profile&gt; = mutableLiveData\n\n    inner class MutableProfileLiveData: MutableLiveData&lt;Profile&gt;(){\n\n        override fun postValue(value: Profile?) {\n            value?.let { insertProfile(it) }\n            super.postValue(value)\n        }\n\n        override fun setValue(value: Profile?) {\n            value?.let { insertProfile(it) }\n            super.setValue(value)\n        }\n\n        override fun getValue(): Profile? {\n            return profileDao.loadProfileLiveData().getValue()\n        }\n    }\n}\n</code></pre>\n\n<p>This way, I get the updates from DB and can save the <code>Profile</code> object but I cannot modify attributes.</p>\n\n<p>For example:\n<code>mutableLiveData.value = Profile()</code> would work.\n<code>mutableLiveData.value.userName = \"name\"</code> would call <code>getValue()</code> instead <code>postValue()</code> and wouldn't work.</p>\n\n<p>Did anyone find a solution for this?</p>\n"}, {"tags": ["java", "kotlin", "retrofit2", "okhttp3"], "comments": [{"owner": {"reputation": 2419, "user_id": 5689605, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/dY18P.jpg?s=128&g=1", "display_name": "Debanjan", "link": "https://stackoverflow.com/users/5689605/debanjan"}, "edited": false, "score": 0, "creation_date": 1529518834, "post_id": 50943762, "comment_id": 88907079, "body": "Yes. Possible. Nicer way would include RX, or Executors."}, {"owner": {"reputation": 761, "user_id": 7698200, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-eG_HoXxx_NY/AAAAAAAAAAI/AAAAAAAAAEw/i4wMS57kNo4/photo.jpg?sz=128", "display_name": "Jakegarbo", "link": "https://stackoverflow.com/users/7698200/jakegarbo"}, "reply_to_user": {"reputation": 2419, "user_id": 5689605, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/dY18P.jpg?s=128&g=1", "display_name": "Debanjan", "link": "https://stackoverflow.com/users/5689605/debanjan"}, "edited": false, "score": 0, "creation_date": 1529577221, "post_id": 50943762, "comment_id": 88928986, "body": "Thank for replying can you give me some snippet and where should i put it."}], "owner": {"reputation": 761, "user_id": 7698200, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-eG_HoXxx_NY/AAAAAAAAAAI/AAAAAAAAAEw/i4wMS57kNo4/photo.jpg?sz=128", "display_name": "Jakegarbo", "link": "https://stackoverflow.com/users/7698200/jakegarbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529483653, "creation_date": 1529483653, "question_id": 50943762, "link": "https://stackoverflow.com/questions/50943762/retrofit-multiple-post-request", "title": "Retrofit Multiple POST Request", "body": "<p>I'm new using this library and tried it in some of rest API in our project and its performs great.</p>\n\n<p>Now I'm trying to create a POST request inside a loop base on the ArrayList items , is it possible ? or is there a nicer way doing it ?.</p>\n\n<p>Here are some of my code to help you understand what im a thinking </p>\n\n<p>MContacts.tk</p>\n\n<pre><code>  data class MContacts(val name:Sting,val contact:String,val address:String){ \n    companion object {\n      val name = \"name\"\n      val contact = \"contact\"\n      val address = \"address\"\n    }\n  }\n</code></pre>\n\n<p>ApiUtils</p>\n\n<pre><code>object ApiUtils {\n    val BASE_URL = \"http://api.link.com/\"\n    fun getSOService(): ApiService {\n        return RetrofitClient.getClient(BASE_URL).create(ApiService::class.java)\n    }\n}\n</code></pre>\n\n<p>RetrofitClient</p>\n\n<pre><code>object RetrofitClient {\n\n    private var retrofit: Retrofit? = null\n\n    fun getClient(baseUrl: String): Retrofit {\n        if (retrofit == null) {\n            retrofit = Retrofit.Builder()\n                    .baseUrl(baseUrl)\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .build()\n        }\n        return retrofit!!\n    }\n}\n</code></pre>\n\n<p>ApiService</p>\n\n<pre><code>interface ApiService {\n    @POST(\"api/postcontact\")\n    @FormUrlEncoded\n    fun postContact(\n            @Field(\"name\") name:String,\n            @Field(\"contact\") contact:String\n            @Field(\"address\") address:String\n            )\n            :Call&lt;ContactResponse&gt;\n}\n</code></pre>\n\n<p>Activity</p>\n\n<pre><code>var listContacts : ArrayList&lt;MContacts&gt; = ArrayList()\nvar btnPost:Button? = null\nprivate var mService: ApiService? = null\n\noverride fun onCreate(..){\n\n\n   mService = ApiUtils.getSOService()\n\n   btnPost = find&lt;Button&gt;(R.id.btnPost)\n\n   listContacts.add(MContacts(\"name-abc\",\"98765632\",\"address 1\"))\n   listContacts.add(MContacts(\"name-ab1\",\"9876562\",\"address 2\"))\n   listContacts.add(MContacts(\"name-bs\",\"9876465\",\"address 3\"))\n   listContacts.add(MContacts(\"name-df\",\"98876356\",\"address 4\"))\n   listContacts.add(MContacts(\"name-da\",\"9876533\",\"address 5\"))\n\n\n   btnPost.setOnClickListener{\n      //in here my question begins on how can i post all of the listContacts items\n      // is ok to make just make a loop of post request like this ?\n\n      for(i in 0 until listContacts.size){\n       postnow(\n              listContacts.get(i).name,\n              listContacts.get(i).contact,\n              listContacts.get(i).address )\n      }\n\n   } \n}\n</code></pre>\n\n<p>POST function</p>\n\n<pre><code>fun postnow(name:String,contact:String,address:String){\n\n   mService!!.postContact(  name ,  contact,   address  ).enqueue(object : Callback&lt;LoginResponse&gt; {\n              override fun onResponse(call: Call&lt;LoginResponse&gt;, response: Response&lt;LoginResponse&gt;) {\n\n               if (response.isSuccessful()) { \n\n               } else {\n\n               }\n            }\n\n              override fun onFailure(call: Call&lt;LoginResponse&gt;, t: Throwable) {\n                   Log.d(\"app\", \"error loading from API\")\n                 }\n            })\n}\n</code></pre>\n\n<p>Thanks for your time helping. giving your correction, comment and suggestion </p>\n"}, {"tags": ["android-studio", "intellij-idea", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3629, "user_id": 4386668, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/913cf060881bef437c19b1c8e3be00aa?s=128&d=identicon&r=PG&f=1", "display_name": "Nominalista", "link": "https://stackoverflow.com/users/4386668/nominalista"}, "edited": false, "score": 0, "creation_date": 1529481656, "post_id": 50943017, "comment_id": 88883763, "body": "Actually <code>=</code> stays the same, but expression moves to next line. But of course it&#39;s acceptable. Thank you."}, {"owner": {"reputation": 3629, "user_id": 4386668, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/913cf060881bef437c19b1c8e3be00aa?s=128&d=identicon&r=PG&f=1", "display_name": "Nominalista", "link": "https://stackoverflow.com/users/4386668/nominalista"}, "edited": false, "score": 0, "creation_date": 1529483180, "post_id": 50943017, "comment_id": 88884674, "body": "No, it returns into first line. I&#39;m using Android Studio 3.2 Preview."}], "tags": [], "owner": {"reputation": 3075, "user_id": 199498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/abdea1aff9f4ea1ac48e329a34052fa2?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/199498/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1529481062, "creation_date": 1529481062, "answer_id": 50943017, "question_id": 50942627, "link": "https://stackoverflow.com/questions/50942627/how-to-always-put-long-expression-in-next-line-when-defining-single-expression/50943017#50943017", "title": "How to always put long expression in next line, when defining single-expression function?", "body": "<p>You can set using </p>\n\n<blockquote>\n  <p>Code Style -> Kotlin -> Expression body functions - > wrap if too long\n  or wrap always</p>\n</blockquote>\n\n<p>The only problem is that it will wrap the line but if you format it manually by moving the = to a new line it won't move it back to the function declaration line</p>\n"}], "owner": {"reputation": 3629, "user_id": 4386668, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/913cf060881bef437c19b1c8e3be00aa?s=128&d=identicon&r=PG&f=1", "display_name": "Nominalista", "link": "https://stackoverflow.com/users/4386668/nominalista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 50943017, "answer_count": 1, "score": 1, "last_activity_date": 1529481062, "creation_date": 1529479765, "question_id": 50942627, "link": "https://stackoverflow.com/questions/50942627/how-to-always-put-long-expression-in-next-line-when-defining-single-expression", "title": "How to always put long expression in next line, when defining single-expression function?", "body": "<p>Kotlin allows to define a single-line expression function like this:</p>\n\n<pre><code>fun double(x: Int) = x * 2\n</code></pre>\n\n<p>It's very convenient. Now if we have more complicated expression:</p>\n\n<pre><code>fun someMoreComplicatedMethod(x: Int): Double = (x * 2) / (someMoreComplicatedMethod(x - 1) + 10)\n</code></pre>\n\n<p>As you can see, it's easy to exceed the line width. So we can move expression into next line.</p>\n\n<pre><code>fun someMoreComplicatedMethod(x: Int): Double \n        = (x * 2) / (someMoreComplicatedMethod(x - 1) + 10)\n</code></pre>\n\n<p>Unfortunately, when I format the code with Android Studio the expression returns to its original place. Question is, how to set code style in Android Studio in order to move mentioned expression into next line?</p>\n"}, {"tags": ["kotlin", "lazy-initialization"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 5, "last_activity_date": 1529636807, "last_edit_date": 1529636807, "creation_date": 1529480045, "answer_id": 50942716, "question_id": 50942208, "link": "https://stackoverflow.com/questions/50942208/kotlin-lazy-initialization-in-subclass/50942716#50942716", "title": "Kotlin lazy initialization in subclass", "body": "<p>This is a case of <a href=\"https://stackoverflow.com/a/3404369/4465208\">calling a non-final method in a constructor</a> and thus accessing uninitialized variables.</p>\n\n<p>This line is still evaluated eagerly, at the time when the base class is constructed:</p>\n\n<pre><code>val processFullName: String = \"$moduleName/$packageName.$processName\"\n</code></pre>\n\n<p>To get the values of the two lazy properties, this will make calls to the abstract methods, of which <code>packageName()</code> refers to <code>jmsDirection</code> and <code>cdmCode</code> to return its value - these properties are not initialized yet, because their values are set <em>after</em> the superclass constructor runs. Here's a simplified version of the subclass' constructor, decompiled back to Java:</p>\n\n<pre><code>public WorkerFullNameBuilder(@NotNull JmsDirectionEnumeration jmsDirection, @NotNull TechnicalDomainEnumeration technicalDomain, @NotNull String cdmCode) {\n    super(technicalDomain);\n    this.jmsDirection = jmsDirection;\n    this.cdmCode = cdmCode;\n}\n</code></pre>\n\n<p>As a demonstration, if you don't refer to these, for example, if you return constants in both of the subclass methods, your code will actually run fine:</p>\n\n<pre><code>override fun packageName() = \"foo\"\noverride fun processName() = \"Worker\"\n</code></pre>\n\n<p>However, the solution you need here is most likely to make the <code>processFullName</code> property itself lazy instead of the two values it uses (which you're evaluating at constructor time right now anyway, so you're not making use of them being lazy). This means you don't even need those two as separate properties:</p>\n\n<pre><code>abstract class SubProcessFullNameBuilder(technicalDomain: TechnicalDomainEnumeration) {\n\n    protected val moduleName = \"td.${technicalDomain.value().toLowerCase()}.shared\"\n\n    val processFullName by lazy { \"$moduleName/${packageName()}.${processName()}\" }\n\n    protected abstract fun packageName(): String\n    protected abstract fun processName(): String\n\n}\n</code></pre>\n"}], "owner": {"reputation": 4093, "user_id": 5039579, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh4.googleusercontent.com/-F6fcCsWUR08/AAAAAAAAAAI/AAAAAAAAAMA/NVI0gCvjXIg/photo.jpg?sz=128", "display_name": "Johan Vergeer", "link": "https://stackoverflow.com/users/5039579/johan-vergeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1406, "favorite_count": 0, "accepted_answer_id": 50942716, "answer_count": 1, "score": 3, "last_activity_date": 1529636807, "creation_date": 1529478314, "last_edit_date": 1529478740, "question_id": 50942208, "link": "https://stackoverflow.com/questions/50942208/kotlin-lazy-initialization-in-subclass", "title": "Kotlin lazy initialization in subclass", "body": "<p>I'm trying to build a string with properties that are initialized in a subclass. </p>\n\n<p>I read about lazy initialization but somehow this doesn't work as I expected. </p>\n\n<pre><code>abstract class SubProcessFullNameBuilder(technicalDomain: TechnicalDomainEnumeration) {\n\n    protected val moduleName = \"td.${technicalDomain.value().toLowerCase()}.shared\"\n\n    private val packageName by lazy { packageName() }\n    private val processName by lazy { processName() }\n\n    val processFullName: String = \"$moduleName/$packageName.$processName\"\n\n    protected abstract fun packageName(): String\n    protected abstract fun processName(): String\n}\n\nclass WorkerFullNameBuilder(\n        private val jmsDirection: JmsDirectionEnumeration,\n        technicalDomain: TechnicalDomainEnumeration,\n        private val cdmCode: String) : SubProcessFullNameBuilder(technicalDomain) {\n\n    override fun packageName() = \"$moduleName.workers.${jmsDirection.value().toLowerCase()}.${cdmCode.toLowerCase()}\"\n    override fun processName() = \"Worker\"\n}\n</code></pre>\n\n<p>Since I have overridden the <code>packageName()</code> and <code>processName()</code> properties, I would expect that on calling the <code>packageName</code> property it would use the implementation from the subclass. </p>\n\n<p>But when I call the <code>processFullName</code> property, it throws a <code>java.lang.NullPointerException</code>.</p>\n\n<pre><code>val builder = WorkerFullNameBuilder(JmsDirectionEnumeration.ESB_IN, TechnicalDomainEnumeration.INFOR, \"ccmd\")\nval name = builder.processFullName\n</code></pre>\n\n<p>How can I initialize the packageName and processName properties in a proper way?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "fragment-backstack"], "comments": [{"owner": {"reputation": 1956, "user_id": 3957075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DYuB5.jpg?s=128&g=1", "display_name": "Sarthak Gandhi", "link": "https://stackoverflow.com/users/3957075/sarthak-gandhi"}, "edited": false, "score": 0, "creation_date": 1529480959, "post_id": 50942200, "comment_id": 88883340, "body": "You can add tags to a fragment and in onBackStackChangedListener you can switch the title."}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 2, "last_activity_date": 1529479144, "creation_date": 1529479144, "answer_id": 50942438, "question_id": 50942200, "link": "https://stackoverflow.com/questions/50942200/fragment-backstack-toolbar-title/50942438#50942438", "title": "Fragment Backstack Toolbar title", "body": "<p>You could do this by using an <a href=\"https://developer.android.com/reference/android/support/v4/app/FragmentManager.OnBackStackChangedListener\" rel=\"nofollow noreferrer\"><code>OnBackStackChangedListener</code></a> in your <code>Activity</code>:</p>\n\n<pre><code>supportFragmentManager.addOnBackStackChangedListener {\n    val fragment = supportFragmentManager.findFragmentById(R.id.yourFragmentFrame)\n    if (fragment is BaseFragment) {\n        header.text = fragment.header()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 50942438, "answer_count": 1, "score": 0, "last_activity_date": 1529479144, "creation_date": 1529478284, "question_id": 50942200, "link": "https://stackoverflow.com/questions/50942200/fragment-backstack-toolbar-title", "title": "Fragment Backstack Toolbar title", "body": "<p>Is there an efficient way to automatically set the toolbar's title when adding/replacing fragments as well as popping fragments from the backstack?</p>\n\n<p>I have implemented this abstract method in my <code>BaseFragment</code> class:</p>\n\n<pre><code>abstract fun header() : String\n\noverride fun onResume() {\n    super.onResume()\n    (activity as SSBaseActivity).header.text = header()\n}\n</code></pre>\n\n<p>and I modify the <code>header</code> in each <code>Fragment</code> that inherits from my <code>BaseFragment</code>  class and displays the value in <code>onResume</code> but I noticed that when I press back, the last title set isn't being replaced from the fragment currently in the stack.</p>\n"}, {"tags": ["null", "kotlin", "data-class"], "comments": [{"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1529471256, "post_id": 50939844, "comment_id": 88878905, "body": "You could always have another class <code>Something</code> to hold the <code>Long, Long, Date, Long, String, String</code>, and then store a <code>Something?</code> here."}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 1383163, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6738c1e0537668686c5f17b09b72d400?s=128&d=identicon&r=PG", "display_name": "user1383163", "link": "https://stackoverflow.com/users/1383163/user1383163"}, "edited": false, "score": 0, "creation_date": 1529474662, "post_id": 50940698, "comment_id": 88880178, "body": "may i ask what you mean by explicit constructor, is there an implicit form of the above ?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 537, "user_id": 1383163, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6738c1e0537668686c5f17b09b72d400?s=128&d=identicon&r=PG", "display_name": "user1383163", "link": "https://stackoverflow.com/users/1383163/user1383163"}, "edited": false, "score": 1, "creation_date": 1529476363, "post_id": 50940698, "comment_id": 88880914, "body": "Compare the way <code>Success</code> and <code>Failure</code> have their constructors implemented. One of them has the <code>constructor</code> keyword explicitly written down, while the other omits it. You only need the keyword there if you need to annotate the constructor (for example, for dependency injection)."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 2, "last_activity_date": 1529471856, "creation_date": 1529471856, "answer_id": 50940698, "question_id": 50939844, "link": "https://stackoverflow.com/questions/50939844/is-there-a-better-way-other-than-setting-data-class-constructor-values-to-null-i/50940698#50940698", "title": "Is there a better way other than setting data class constructor values to null if its possible the data cannot be set", "body": "<p>You could consider using a <a href=\"https://kotlinlang.org/docs/reference/sealed-classes.html\" rel=\"nofollow noreferrer\">sealed class</a> for this:</p>\n\n<pre><code>sealed class Result\n\ndata class Success constructor(val statusCode: Int = 200,\n                               val a: Long,\n                               val b: Long,\n                               val c: Date,\n                               val d: Long,\n                               val e: String,\n                               val f: String): Result()\n\ndata class Failure(val statusCode: Int): Result()\n</code></pre>\n\n<p>(I don't know if the explicit constructor for your class was intentional, if there are annotations on it, etc.)</p>\n\n<p>This way if you have a successful call, you'll create a <code>Success</code> instance, and if you have a failed call, you can create a <code>Failure</code> instance which doesn't even contain the properties representing the data received (come to think of it, you could move <code>statusCode</code> to the <code>Result</code> class, that's another choice to make).</p>\n\n<p>Here's how you could then handle these results:</p>\n\n<pre><code>fun processResult(result: Result) {\n    when (result) {\n        is Success -&gt; { /* Use result, which is smart cast to a Success now */ }\n        is Failure -&gt; { /* Use result, which is smart cast to a Failure now */ }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 1383163, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6738c1e0537668686c5f17b09b72d400?s=128&d=identicon&r=PG", "display_name": "user1383163", "link": "https://stackoverflow.com/users/1383163/user1383163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 50940698, "answer_count": 1, "score": 0, "last_activity_date": 1529471856, "creation_date": 1529466009, "question_id": 50939844, "link": "https://stackoverflow.com/questions/50939844/is-there-a-better-way-other-than-setting-data-class-constructor-values-to-null-i", "title": "Is there a better way other than setting data class constructor values to null if its possible the data cannot be set", "body": "<p>I have a situation whereby I am creating a rest client in kotlin as a practical learning exercise and have recently come up against this:</p>\n\n<pre><code>             data class ai constructor(val statusCode: Int,\n                                       val a: Long? = null,\n                                       val b: Long? = null,\n                                       val c: Date? = null,\n                                       val d: Long? = null,\n                                       val e: String? = null,\n                                       val f: String? = null)\n</code></pre>\n\n<p>The issue is this, if I get a 200 returned i will have the data to populate 'a' through 'f' but if instead i get a 401 or pretty much any other status code i will not have the data to populate 'a' through 'f' and therefore i have opted for the above solution where I only force the status code which i will always get back to not be null and then defaulted every other value to null.</p>\n\n<p>I don't want to go down the route of setting defaults to things like \"\" or -1 because then there is always the chance that this data will somehow get through if a user does not check the status code.</p>\n\n<p>Really i want to convey that the information is not present, it seems like this would do that but I wondered if there is a better way.</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "retrofit", "okio"], "comments": [{"owner": {"reputation": 2662, "user_id": 2707179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUNvp.jpg?s=128&g=1", "display_name": "michalbrz", "link": "https://stackoverflow.com/users/2707179/michalbrz"}, "edited": false, "score": 0, "creation_date": 1529486976, "post_id": 50939783, "comment_id": 88886965, "body": "Did you check if inputStream is initialized correctly? Maybe path to file is incorrect?"}, {"owner": {"reputation": 337, "user_id": 5179960, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b2a6f79107c343c309aadcbda9597f56?s=128&d=identicon&r=PG&f=1", "display_name": "oznecro", "link": "https://stackoverflow.com/users/5179960/oznecro"}, "reply_to_user": {"reputation": 2662, "user_id": 2707179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUNvp.jpg?s=128&g=1", "display_name": "michalbrz", "link": "https://stackoverflow.com/users/2707179/michalbrz"}, "edited": false, "score": 0, "creation_date": 1529580111, "post_id": 50939783, "comment_id": 88930834, "body": "@michalbrz YES!! That was it! Thank you so much!"}], "owner": {"reputation": 337, "user_id": 5179960, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b2a6f79107c343c309aadcbda9597f56?s=128&d=identicon&r=PG&f=1", "display_name": "oznecro", "link": "https://stackoverflow.com/users/5179960/oznecro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529465552, "creation_date": 1529465552, "question_id": 50939783, "link": "https://stackoverflow.com/questions/50939783/illegalargumentexception-when-running-retrofit-api-unit-test", "title": "IllegalArgumentException when running retrofit api unit test", "body": "<p>I am getting the below IllegalArgumentException when trying to run my unit test: </p>\n\n<pre><code>java.lang.IllegalArgumentException: in == null\n\nat okio.Okio.source(Okio.java:128)\nat okio.Okio.source(Okio.java:124)\nat com.example.SearchApiTest.enqueueResponse(SearchApiTest.kt:57)\nat com.example.SearchApiTest.enqueueResponse$default(SearchApiTest.kt:54)\nat com.example.SearchApiTest.searchLocations(SearchApiTest.kt:48)\n</code></pre>\n\n<p>The error message seems to be indicating that the error is occurring on the line:</p>\n\n<pre><code>val source = Okio.buffer(Okio.source(inputStream))\n</code></pre>\n\n<p>This is my unit test below:</p>\n\n<pre><code>@RunWith(JUnit4::class)\nclass SearchApiTest {\n    @Rule\n    @JvmField\n    val instantExecutorRule = InstantTaskExecutorRule()\n\n    private lateinit var api: SearchApi\n\n    private lateinit var mockWebServer: MockWebServer\n\n    @Before\n    fun createService() {\n        mockWebServer = MockWebServer()\n        api = Retrofit.Builder()\n                .baseUrl(mockWebServer.url(\"/\"))\n                .addConverterFactory(GsonConverterFactory.create())\n                .addCallAdapterFactory(LiveDataCallAdapterFactory())\n                .build()\n                .create(SearchApi::class.java)\n    }\n\n    @After\n    fun stopService() {\n        mockWebServer.shutdown()\n    }\n\n    @Test\n    fun searchLocations() {\n        enqueueResponse(\"searchLocations.json\")\n        val value = getValue(api.searchLocations(\"usa\"))\n        val locations = (value as ApiSuccessResponse).body\n        assertThat(locations.totalResults, `is`(20))\n    }\n\n    private fun enqueueResponse(fileName: String, headers: Map&lt;String, String&gt; = emptyMap()) {\n        val inputStream = javaClass.classLoader\n                .getResourceAsStream(\"api-response/$fileName\")\n        val source = Okio.buffer(Okio.source(inputStream))\n        val mockResponse = MockResponse()\n        for ((key, value) in headers) {\n            mockResponse.addHeader(key, value)\n        }\n        mockWebServer.enqueue(\n                mockResponse\n                        .setBody(source.readString(Charsets.UTF_8))\n        )\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2248, "user_id": 2874139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdde8dd61165426271077ca6d04d3c00?s=128&d=identicon&r=PG", "display_name": "Mostafa Gazar", "link": "https://stackoverflow.com/users/2874139/mostafa-gazar"}, "is_accepted": true, "score": 2, "last_activity_date": 1529529857, "last_edit_date": 1529529857, "creation_date": 1529461491, "answer_id": 50939320, "question_id": 50939047, "link": "https://stackoverflow.com/questions/50939047/rxkotlin-how-do-you-map-to-void/50939320#50939320", "title": "RXKotlin how do you map to void?", "body": "<p><code>Unit</code> in Kotlin corresponds to <code>void</code> in Java. Like <code>void</code>, <code>Unit</code> is the default return type of any function in Kotlin that does return anything.</p>\n\n<p>Using <a href=\"https://github.com/ReactiveX/RxJava/wiki/What&#39;s-different-in-2.0#completable\" rel=\"nofollow noreferrer\"><code>Completable</code></a>, <a href=\"https://github.com/ReactiveX/RxJava/wiki/What&#39;s-different-in-2.0#single\" rel=\"nofollow noreferrer\"><code>Single</code></a> or <a href=\"https://github.com/ReactiveX/RxJava/wiki/What&#39;s-different-in-2.0#maybe\" rel=\"nofollow noreferrer\"><code>Maybe</code></a> might make more sense though</p>\n"}, {"comments": [{"owner": {"reputation": 7850, "user_id": 2960788, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/423618eadcdd4a265e38985a911f5c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/2960788/christopher"}, "edited": false, "score": 2, "creation_date": 1529487784, "post_id": 50944895, "comment_id": 88887505, "body": "Just an addition: You can use <code>ignoreElements</code> to convert an Observable to a Completable: <a href=\"https://stackoverflow.com/questions/40399397/how-to-convert-rxjava2s-observable-to-completable\" title=\"how to convert rxjava2s observable to completable\">stackoverflow.com/questions/40399397/&hellip;</a>"}, {"owner": {"reputation": 325, "user_id": 452767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7159286f145d9e26689e1d09bd770b62?s=128&d=identicon&r=PG", "display_name": "Sergiy Salyuk", "link": "https://stackoverflow.com/users/452767/sergiy-salyuk"}, "edited": false, "score": 0, "creation_date": 1605257116, "post_id": 50944895, "comment_id": 114600739, "body": "<code>Observable&lt;Void&gt;</code> does return value of unit type (void) via 0...N <code>next</code> events, so it is definitely not equivalent to <code>Completable</code>, which does not produce <code>next</code> events."}], "tags": [], "owner": {"reputation": 2662, "user_id": 2707179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUNvp.jpg?s=128&g=1", "display_name": "michalbrz", "link": "https://stackoverflow.com/users/2707179/michalbrz"}, "is_accepted": false, "score": 3, "last_activity_date": 1529487250, "creation_date": 1529487250, "answer_id": 50944895, "question_id": 50939047, "link": "https://stackoverflow.com/questions/50939047/rxkotlin-how-do-you-map-to-void/50944895#50944895", "title": "RXKotlin how do you map to void?", "body": "<p>Equivalent of <code>Observable&lt;Void&gt;</code> i.e. Observable that doesn't return any value - only completes or ends with exception - is <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Completable.html\" rel=\"nofollow noreferrer\"><code>Completable</code></a>:</p>\n\n<blockquote>\n  <p>Represents a deferred computation without any value but only indication for completion or exception.</p>\n</blockquote>\n"}], "owner": {"reputation": 69128, "user_id": 242769, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8f1bfe0dcaa3cdc6633e8b80639e541a?s=128&d=identicon&r=PG", "display_name": "aryaxt", "link": "https://stackoverflow.com/users/242769/aryaxt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 50939320, "answer_count": 2, "score": 0, "last_activity_date": 1529529857, "creation_date": 1529459006, "last_edit_date": 1529460105, "question_id": 50939047, "link": "https://stackoverflow.com/questions/50939047/rxkotlin-how-do-you-map-to-void", "title": "RXKotlin how do you map to void?", "body": "<p>Sorry nooby kotlin question</p>\n\n<pre><code>func someThingElse(): Observable&lt;String&gt; {\n   return Observable.just(\"aasd\")\n} \n\nfun doSomething(): Observable&lt;Void&gt; {\n    return someThisElse().fetch().map { () } \n}\n</code></pre>\n\n<p>How do i return an observable of void?\nI tried <code>void</code>, <code>Void()</code>, <code>Void</code></p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 548190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95521131343273eab6a7813dee0908b?s=128&d=identicon&r=PG", "display_name": "samuelh", "link": "https://stackoverflow.com/users/548190/samuelh"}, "is_accepted": false, "score": 1, "last_activity_date": 1529453739, "creation_date": 1529453739, "answer_id": 50938526, "question_id": 50938443, "link": "https://stackoverflow.com/questions/50938443/how-do-you-pass-an-anonymous-lambda-as-an-argument-in-kotlin/50938526#50938526", "title": "How do you pass an anonymous lambda as an argument in Kotlin?", "body": "<p>Ooops. that was a typo.  This works</p>\n\n<pre><code>fun fn_x(x: Int, fn: (Int) -&gt; Int ):Int {\n    return fn(x)\n}\n\n@Test\nfun test1()\n{\n    assertEquals(3, fn_x(2, {n -&gt; n+1}))\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 548190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95521131343273eab6a7813dee0908b?s=128&d=identicon&r=PG", "display_name": "samuelh", "link": "https://stackoverflow.com/users/548190/samuelh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529453739, "creation_date": 1529452947, "question_id": 50938443, "link": "https://stackoverflow.com/questions/50938443/how-do-you-pass-an-anonymous-lambda-as-an-argument-in-kotlin", "title": "How do you pass an anonymous lambda as an argument in Kotlin?", "body": "<p>I'm stuck on how to pass an anonymous lambda as an argument as in the example below:</p>\n\n<pre><code>fun fn_x(x: Int, fn: (Int) -&gt; Int ):Int {\n        return fn(x)\n}\n\n@Test\n{\n    assertEquals(3, fn_x(2, ???))\n}\n</code></pre>\n\n<p>In place of \"???\" I tried:</p>\n\n<p><code>n-&gt;n+1</code></p>\n\n<p><code>(n)-&gt;n+1</code></p>\n\n<p><code>{n -&gt; n+1}</code></p>\n"}, {"tags": ["java", "android", "kotlin", "rx-java", "rx-kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2662, "user_id": 2707179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUNvp.jpg?s=128&g=1", "display_name": "michalbrz", "link": "https://stackoverflow.com/users/2707179/michalbrz"}, "is_accepted": false, "score": 0, "last_activity_date": 1529445295, "last_edit_date": 1529445295, "creation_date": 1529444959, "answer_id": 50937392, "question_id": 50937317, "link": "https://stackoverflow.com/questions/50937317/is-there-a-limit-to-the-number-of-observables-in-zip-method/50937392#50937392", "title": "Is There A Limit to The Number of Observables in .zip Method?", "body": "<p>Yes, there are several overloaded methods <code>Observable.zip()</code> and the one with maximum number of <code>ObservableSource</code> argument is 9:</p>\n\n<pre><code>public static &lt;T1, T2, T3, T4, T5, T6, T7, T8, T9, R&gt; Observable&lt;R&gt; zip(\n        ObservableSource&lt;? extends T1&gt; source1, ObservableSource&lt;? extends T2&gt; source2, ObservableSource&lt;? extends T3&gt; source3,\n        ObservableSource&lt;? extends T4&gt; source4, ObservableSource&lt;? extends T5&gt; source5, ObservableSource&lt;? extends T6&gt; source6,\n        ObservableSource&lt;? extends T7&gt; source7, ObservableSource&lt;? extends T8&gt; source8, ObservableSource&lt;? extends T9&gt; source9,\n        Function9&lt;? super T1, ? super T2, ? super T3, ? super T4, ? super T5, ? super T6, ? super T7, ? super T8, ? super T9, ? extends R&gt; zipper) {\n</code></pre>\n\n<p>If you want to have more than 9 sources, take a look at <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#zipArray-io.reactivex.functions.Function-boolean-int-io.reactivex.ObservableSource...-\" rel=\"nofollow noreferrer\"><code>zipArray</code></a> or <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#zipIterable-java.lang.Iterable-io.reactivex.functions.Function-boolean-int-\" rel=\"nofollow noreferrer\"><code>zipIterable</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 3, "last_activity_date": 1529445052, "creation_date": 1529445052, "answer_id": 50937413, "question_id": 50937317, "link": "https://stackoverflow.com/questions/50937317/is-there-a-limit-to-the-number-of-observables-in-zip-method/50937413#50937413", "title": "Is There A Limit to The Number of Observables in .zip Method?", "body": "<p>RxJava only supports up to 9 distinct sources with <code>zip</code>. Beyond that, you have to use the <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#zip-java.lang.Iterable-io.reactivex.functions.Function-\" rel=\"nofollow noreferrer\"><code>zip(Iterable&lt;ObservableSource&gt;, Func&lt;Object[],R&gt;)</code></a> method and cast each element of the <code>Object[]</code> back to its respective type.</p>\n\n<blockquote>\n  <p>Returns an <code>Observable</code> that emits the results of a specified <code>combiner</code> function applied to combinations of items emitted, in sequence, by an <code>Iterable</code> of other <code>ObservableSource</code>s.\n  zip applies this function in strict sequence, so the first item emitted by the new <code>ObservableSource</code> will be the result of the function applied to the first item emitted by each of the source <code>ObservableSource</code>s; the second item emitted by the new <code>ObservableSource</code> will be the result of the function applied to the second item emitted by each of those <code>ObservableSource</code>s; and so forth.</p>\n  \n  <p>The resulting <code>ObservableSource&lt;R&gt;</code> returned from zip will invoke <code>onNext</code> as many times as the number of <code>onNext</code> invocations of the source <code>ObservableSource</code> that emits the fewest items.</p>\n  \n  <p>The operator subscribes to its sources in order they are specified and completes eagerly if one of the sources is shorter than the rest while disposing the other sources. Therefore, it is possible those other sources will never be able to run to completion (and thus not calling <code>doOnComplete()</code>). This can also happen if the sources are exactly the same length; if source A completes and B has been consumed and is about to complete, the operator detects A won't be sending further values and it will dispose B immediately. For example:</p>\n\n<pre><code>zip(Arrays.asList(range(1, 5).doOnComplete(action1), range(6, 5).doOnComplete(action2)), (a) -&gt; a)\n</code></pre>\n  \n  <p><code>action1</code> will be called but <code>action2</code> won't. \n  To work around this termination property, use <code>doOnDispose(Action)</code> as well or use <code>using()</code> to do cleanup in case of completion or a <code>dispose()</code> call.\n  Note on method signature: since Java doesn't allow creating a generic array with new <code>T[]</code>, the implementation of this operator has to create an <code>Object[]</code> instead. Unfortunately, a <code>Function&lt;Integer[], R&gt;</code> passed to the method would trigger a <code>ClassCastException</code>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 444, "user_id": 9630748, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rQE-_jClqIU/AAAAAAAAAAI/AAAAAAAAAAA/tkxIr93dTTs/photo.jpg?sz=128", "display_name": "Arnault Le Pr&#233;vost-Corvellec", "link": "https://stackoverflow.com/users/9630748/arnault-le-pr%c3%a9vost-corvellec"}, "is_accepted": false, "score": 0, "last_activity_date": 1529445230, "creation_date": 1529445230, "answer_id": 50937438, "question_id": 50937317, "link": "https://stackoverflow.com/questions/50937317/is-there-a-limit-to-the-number-of-observables-in-zip-method/50937438#50937438", "title": "Is There A Limit to The Number of Observables in .zip Method?", "body": "<p>According to Oracle Java Doc : <a href=\"http://reactivex.io/RxJava/javadoc/rx/Observable.html#zip(java.lang.Iterable,%20rx.functions.FuncN)\" rel=\"nofollow noreferrer\">http://reactivex.io/RxJava/javadoc/rx/Observable.html#zip(java.lang.Iterable,%20rx.functions.FuncN)</a></p>\n\n<p>these methods exist : </p>\n\n<pre><code>static &lt;R&gt; Observable&lt;R&gt;    zip(java.lang.Iterable&lt;? extends Observable&lt;?&gt;&gt; ws, FuncN&lt;? extends R&gt; zipFunction)\n\nstatic &lt;R&gt; Observable&lt;R&gt;    zip(Observable&lt;?&gt;[] ws, FuncN&lt;? extends R&gt; zipFunction)\n\nstatic &lt;R&gt; Observable&lt;R&gt;    zip(Observable &lt;? extends Observable&lt;?&gt;&gt; ws, FuncN&lt;? extends R&gt; zipFunction)\n\nstatic &lt;T1,T2,R&gt; Observable&lt;R&gt;  zip(Observable&lt;? extends T1&gt; o1, Observable&lt;? extends T2&gt; o2, Func2&lt;? super T1,? super T2,? extends R&gt; zipFunction)\n\nstatic &lt;T1,T2,T3,R&gt;\nObservable&lt;R&gt;   zip(Observable&lt;? extends T1&gt; o1, Observable&lt;? extends T2&gt; o2, Observable&lt;? extends T3&gt; o3, Func3&lt;? super T1,? super T2,? super T3,? extends R&gt; zipFunction)\n\nstatic &lt;T1,T2,T3,T4,R&gt;\nObservable&lt;R&gt;   zip(Observable&lt;? extends T1&gt; o1, Observable&lt;? extends T2&gt; o2, Observable&lt;? extends T3&gt; o3, Observable&lt;? extends T4&gt; o4, Func4&lt;? super T1,? super T2,? super T3,? super T4,? extends R&gt; zipFunction)\n\nstatic &lt;T1,T2,T3,T4,T5,R&gt;\nObservable&lt;R&gt;   zip(Observable&lt;? extends T1&gt; o1, Observable&lt;? extends T2&gt; o2, Observable&lt;? extends T3&gt; o3, Observable&lt;? extends T4&gt; o4, Observable&lt;? extends T5&gt; o5, Func5&lt;? super T1,? super T2,? super T3,? super T4,? super T5,? extends R&gt; zipFunction)\n\n\nstatic &lt;T1,T2,T3,T4,T5,T6,R&gt;\nObservable&lt;R&gt;   zip(Observable&lt;? extends T1&gt; o1, Observable&lt;? extends T2&gt; o2, Observable&lt;? extends T3&gt; o3, Observable&lt;? extends T4&gt; o4, Observable&lt;? extends T5&gt; o5, Observable&lt;? extends T6&gt; o6, Func6&lt;? super T1,? super T2,? super T3,? super T4,? super T5,? super T6,? extends R&gt; zipFunction)\n\nstatic &lt;T1,T2,T3,T4,T5,T6,T7,R&gt;\nObservable&lt;R&gt;   zip(Observable&lt;? extends T1&gt; o1, Observable&lt;? extends T2&gt; o2, Observable&lt;? extends T3&gt; o3, Observable&lt;? extends T4&gt; o4, Observable&lt;? extends T5&gt; o5, Observable&lt;? extends T6&gt; o6, Observable&lt;? extends T7&gt; o7, Func7&lt;? super T1,? super T2,? super T3,? super T4,? super T5,? super T6,? super T7,? extends R&gt; zipFunction)\n\nstatic &lt;T1,T2,T3,T4,T5,T6,T7,T8,R&gt;\nObservable&lt;R&gt;   zip(Observable&lt;? extends T1&gt; o1, Observable&lt;? extends T2&gt; o2, Observable&lt;? extends T3&gt; o3, Observable&lt;? extends T4&gt; o4, Observable&lt;? extends T5&gt; o5, Observable&lt;? extends T6&gt; o6, Observable&lt;? extends T7&gt; o7, Observable&lt;? extends T8&gt; o8, Func8&lt;? super T1,? super T2,? super T3,? super T4,? super T5,? super T6,? super T7,? super T8,? extends R&gt; zipFunction)\n\nstatic &lt;T1,T2,T3,T4,T5,T6,T7,T8,T9,R&gt;\nObservable&lt;R&gt;   zip(Observable&lt;? extends T1&gt; o1, Observable&lt;? extends T2&gt; o2, Observable&lt;? extends T3&gt; o3, Observable&lt;? extends T4&gt; o4, Observable&lt;? extends T5&gt; o5, Observable&lt;? extends T6&gt; o6, Observable&lt;? extends T7&gt; o7, Observable&lt;? extends T8&gt; o8, Observable&lt;? extends T9&gt; o9, Func9&lt;? super T1,? super T2,? super T3,? super T4,? super T5,? super T6,? super T7,? super T8,? super T9,? extends R&gt; zipFunction)\n</code></pre>\n\n<p>So to have more than 9 elements use an array or an iterable it will be simplier</p>\n"}], "owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1166, "favorite_count": 0, "accepted_answer_id": 50937413, "answer_count": 3, "score": 0, "last_activity_date": 1529445295, "creation_date": 1529444458, "last_edit_date": 1529444760, "question_id": 50937317, "link": "https://stackoverflow.com/questions/50937317/is-there-a-limit-to-the-number-of-observables-in-zip-method", "title": "Is There A Limit to The Number of Observables in .zip Method?", "body": "<p>There seems to be a limit to the number of Observables to use as parameters in the zip method for Kotlin. If this is accurate, what is the best alternative?</p>\n\n<p>For instance, when I use 9 parameters it works as expected. When I add a 10th parameter I receive the error <strong>Cannot infer a type for this parameter. Please specify it explicitly</strong></p>\n\n<pre><code>Observable.zip(\n            //TODO: parameterize exchange symbols based on pair\n            methodOne() as Observable&lt;Any&gt;),\n            methodTwo() as Observable&lt;Any&gt;),\n            methodThree() as Observable&lt;Any&gt;),\n            methodFour() as Observable&lt;Any&gt;),\n            methodFive() as Observable&lt;Any&gt;),\n            methodSix() as Observable&lt;Any&gt;),\n            methodSeven() as Observable&lt;Any&gt;),\n            methodEight() as Observable&lt;Any&gt;),\n            methodNine() as Observable&lt;Any&gt;),\n            { oneResult, twoResult, threeResult, fourResult, fiveResult, sixResult, sevenResult, eightResult, nineResult -&gt;\n                    //logic here applying computation to results\n            })\n            .subscribe(\n                    {},\n                    {\n                        println(String.format(\"Error: %s\", it.message))\n                    })\n            .unsubscribe()\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-architecture-components", "android-workmanager"], "comments": [{"owner": {"reputation": 1652, "user_id": 4564450, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/USiV0.jpg?s=128&g=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/4564450/andrey"}, "edited": false, "score": 0, "creation_date": 1567598904, "post_id": 50936694, "comment_id": 102009443, "body": "have you found a solution?"}, {"owner": {"reputation": 111, "user_id": 9964131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba078d6dccf484bd5c0d8fc96f792ce?s=128&d=identicon&r=PG&f=1", "display_name": "Diego SM", "link": "https://stackoverflow.com/users/9964131/diego-sm"}, "reply_to_user": {"reputation": 1652, "user_id": 4564450, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/USiV0.jpg?s=128&g=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/4564450/andrey"}, "edited": false, "score": 0, "creation_date": 1577384409, "post_id": 50936694, "comment_id": 105158334, "body": "No, I left the project i was working. I believe the issue was related to the version of working manager i was using"}], "owner": {"reputation": 111, "user_id": 9964131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba078d6dccf484bd5c0d8fc96f792ce?s=128&d=identicon&r=PG&f=1", "display_name": "Diego SM", "link": "https://stackoverflow.com/users/9964131/diego-sm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 540, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1529454194, "creation_date": 1529441188, "last_edit_date": 1529454194, "question_id": 50936694, "link": "https://stackoverflow.com/questions/50936694/workmanager-beginuniquework-queue-not-getting-called-after-first-work", "title": "WorkManager beginUniqueWork queue not getting called after first work", "body": "<p>I'm using WorkManager 1.0.0-alpha02</p>\n\n<p>I've created my worker class like:</p>\n\n<pre><code>class PrintWorker: Worker(){\n  override fun doWork(): WorkerResult {\n\n    try {\n\n        val label: String = inputData.getString(LABEL_ARG_CONTENIDO, null)\n        val isLastLabel: Boolean = inputData.getBoolean(LABEL_ARG_IS_LAST,false)\n\n        var result = Printer(applicationContext).print(label)\n\n        var outPut: Data = Data.Builder().putString(\"PrinterResponse\",result.printerResponse).putBoolean(LABEL_ARG_IS_LAST,isLastLabel).build()\n        outputData = outPut\n\n\n        return result.workResult\n\n\n    }catch (e: Exception){\n        return WorkerResult.FAILURE\n    }\n\n}\n\n\ncompanion object {\n    const val LABEL_ARG_CONTENIDO = \"Label\"\n    const val LABEL_ARG_IS_LAST = \"Position\"\n}\n\n\n}\n</code></pre>\n\n<p>and then in my viewmodel I've schedulled the work chain like:</p>\n\n<pre><code>var myQueue: WorkContinuation? = null\n\n    for (label in labelEntities){\n\n        val newPrintWork = OneTimeWorkRequest.Builder(PrintWorker::class.java)\n\n        val builder = Data.Builder()\n        var data: Data\n        builder.putString(PrintWorker.LABEL_ARG_CONTENIDO, label.contenido)\n\n        if(myQueue == null){\n            data = builder.build()\n            newPrintWork.setInputData(data)\n            myQueue = WorkManager.getInstance().beginUniqueWork(printWorkId,ExistingWorkPolicy.REPLACE,newPrintWork.build())\n        }\n        else{\n            if(labelEntities.indexOf(label) == labelEntities.size - 1)\n                builder.putBoolean(PrintWorker.LABEL_ARG_IS_LAST, true)\n            data = builder.build()\n            newPrintWork.setInputData(data)\n            myQueue.then(newPrintWork.build())\n        }\n    }\n\n    myQueue?.enqueue()\n</code></pre>\n\n<p>finally in another piece of code I'm observing it with:\n viewmodel.printStatus.observe(this, Observer { works -></p>\n\n<pre><code>        if(works!= null){\n            if(works.filter { it.state == State.FAILED}.isNotEmpty()){\n                MyWorkManager().cancelPrinting()\n                context?.let { showDialog(MyAlertDialogManager(it).noMacAddressErrorDialog()) }\n            }\n\n            if(works.filter { it.state == State.SUCCEEDED  }.size == works.size &amp;&amp;\n                works.isNotEmpty() &amp;&amp;\n                works.filter { it.outputData.getBoolean(LABEL_ARG_IS_LAST,false) }.isNotEmpty()){\n\n                context?.let { showDialog(MyAlertDialogManager(it).confirmPrintedCorrectly(factura,this)) }\n            }\n        }\n    })\n</code></pre>\n\n<p>The first work gets done right after enqueueing and returns Worker.WorkerResult.SUCCESS but the rest of the chain doesnt gets called</p>\n"}, {"tags": ["listview", "kotlin", "height"], "comments": [{"owner": {"reputation": 2389, "user_id": 8195525, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-L_XNZLvRO6o/AAAAAAAAAAI/AAAAAAAABI8/fpBStVFU5WI/photo.jpg?sz=128", "display_name": "Derek", "link": "https://stackoverflow.com/users/8195525/derek"}, "edited": false, "score": 0, "creation_date": 1529442408, "post_id": 50936642, "comment_id": 88872334, "body": "Let me know if my answer is what you were looking for! :)"}, {"owner": {"reputation": 95, "user_id": 9937145, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HKmx5_fKE1Y/AAAAAAAAAAI/AAAAAAAAAAA/kZukbFxZM5Y/photo.jpg?sz=128", "display_name": "Gabo Walker", "link": "https://stackoverflow.com/users/9937145/gabo-walker"}, "reply_to_user": {"reputation": 2389, "user_id": 8195525, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-L_XNZLvRO6o/AAAAAAAAAAI/AAAAAAAABI8/fpBStVFU5WI/photo.jpg?sz=128", "display_name": "Derek", "link": "https://stackoverflow.com/users/8195525/derek"}, "edited": false, "score": 0, "creation_date": 1529444232, "post_id": 50936642, "comment_id": 88872999, "body": "Your answer was exactly what I was looking for!!! tyvm Regards!"}], "answers": [{"tags": [], "owner": {"reputation": 2389, "user_id": 8195525, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-L_XNZLvRO6o/AAAAAAAAAAI/AAAAAAAABI8/fpBStVFU5WI/photo.jpg?sz=128", "display_name": "Derek", "link": "https://stackoverflow.com/users/8195525/derek"}, "is_accepted": true, "score": 0, "last_activity_date": 1529442377, "creation_date": 1529442377, "answer_id": 50936950, "question_id": 50936642, "link": "https://stackoverflow.com/questions/50936642/android-listview-height-to-match-parent-minus-fixed-height/50936950#50936950", "title": "Android ListView height to match_parent minus fixed height", "body": "<p>If you set the weight of the <code>ListView</code> you can achieve the result you want:</p>\n\n<pre><code>&lt;ListView\n    android:id=\"@+id/listdogs\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"0dp\"\n    android:layout_weight=\"1\"\n    android:choiceMode=\"singleChoice\"\n    android:focusable=\"true\"\n    android:focusableInTouchMode=\"true\"\n    android:listSelector=\"@android:color/darker_gray\"\n    android:textSize=\"10dp\"\n    android:visibility=\"visible\"&gt;\n\n\n&lt;/ListView&gt;\n\n&lt;RelativeLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"80dp\"&gt;\n\n    &lt;Button\n        android:id=\"@+id/dogmap\"\n        android:layout_width=\"70dp\"\n        android:layout_height=\"68dp\"\n        android:layout_alignParentStart=\"true\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_marginStart=\"21dp\"\n        android:background=\"@drawable/map\" /&gt;\n\n    &lt;Button\n        android:id=\"@+id/dogphone\"\n        android:layout_width=\"70dp\"\n        android:layout_height=\"68dp\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_centerHorizontal=\"true\"\n        android:background=\"@drawable/phone\" /&gt;\n\n    &lt;Button\n        android:id=\"@+id/dogaweb\"\n        android:layout_width=\"70dp\"\n        android:layout_height=\"68dp\"\n        android:layout_alignParentEnd=\"true\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_marginEnd=\"26dp\"\n        android:background=\"@drawable/website\" /&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>as you can see I added <code>android:layout_weight=\"1\"</code> to the <code>ListView</code> and that will push it till the <code>RelativeLayout</code></p>\n"}, {"tags": [], "owner": {"reputation": 1186, "user_id": 3714376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OkQsb.jpg?s=128&g=1", "display_name": "JTeam", "link": "https://stackoverflow.com/users/3714376/jteam"}, "is_accepted": false, "score": 0, "last_activity_date": 1529443503, "creation_date": 1529443503, "answer_id": 50937165, "question_id": 50936642, "link": "https://stackoverflow.com/questions/50936642/android-listview-height-to-match-parent-minus-fixed-height/50937165#50937165", "title": "Android ListView height to match_parent minus fixed height", "body": "<p>I would suggest always use <strong>ConstraintLayout</strong>, here it is how it will look like in <strong>ConstraintLayout</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout android:id=\"@+id/ListView\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:descendantFocusability=\"beforeDescendants\"\n    android:visibility=\"visible\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n  &lt;ListView\n      android:id=\"@+id/listdogs\"\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"match_parent\"\n      app:layout_constraintBottom_toTopOf=\"bottom_bar\"\n      android:choiceMode=\"singleChoice\"\n      android:focusable=\"true\"\n      android:focusableInTouchMode=\"true\"\n      android:listSelector=\"@android:color/darker_gray\"\n      android:textSize=\"10dp\"\n      android:layout_marginBottom=\"80dp\"\n      android:visibility=\"visible\"&gt;\n\n\n  &lt;/ListView&gt;\n\n  &lt;RelativeLayout\n      android:id=\"@+id/bottom_bar\"\n      app:layout_constraintTop_toBottomOf=\"@+id/listdogs\"\n      android:layout_width=\"match_parent\"\n      android:layout_height=\"80dp\"&gt;\n\n    &lt;Button\n        android:id=\"@+id/dogmap\"\n        android:layout_width=\"70dp\"\n        android:layout_height=\"68dp\"\n        android:layout_alignParentStart=\"true\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_marginStart=\"21dp\"\n        android:background=\"@drawable/map\"\n         /&gt;\n\n    &lt;Button\n        android:id=\"@+id/dogphone\"\n        android:layout_width=\"70dp\"\n        android:layout_height=\"68dp\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_centerHorizontal=\"true\"\n        android:background=\"@drawable/phone\"/&gt;\n\n    &lt;Button\n        android:id=\"@+id/dogaweb\"\n        android:layout_width=\"70dp\"\n        android:layout_height=\"68dp\"\n        android:layout_alignParentEnd=\"true\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_marginEnd=\"26dp\"\n        android:background=\"@drawable/website\"/&gt;\n  &lt;/RelativeLayout&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong><em>Summary of changes:</em></strong></p>\n\n<ol>\n<li>Changed root from relative ConstraintLayout</li>\n<li>added layout_constraintBottom_toTopOf for list view </li>\n<li>added layout_constraintTop_toBottomOf for bottom bar</li>\n</ol>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8959091"}, "is_accepted": false, "score": 0, "last_activity_date": 1529443863, "creation_date": 1529443863, "answer_id": 50937224, "question_id": 50936642, "link": "https://stackoverflow.com/questions/50936642/android-listview-height-to-match-parent-minus-fixed-height/50937224#50937224", "title": "Android ListView height to match_parent minus fixed height", "body": "<p>My choice is a RelativeLayout:</p>\n\n<pre><code>&lt;RelativeLayout\n    android:id=\"@+id/ListView\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:descendantFocusability=\"beforeDescendants\"\n    android:visibility=\"visible\"\n    tools:layout_editor_absoluteY=\"8dp\"&gt;\n\n    &lt;ListView\n        android:layout_alignParentTop=\"true\"\n        android:layout_above=\"@id/rl\"\n        android:id=\"@+id/listdogs\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:choiceMode=\"singleChoice\"\n        android:focusable=\"true\"\n        android:focusableInTouchMode=\"true\"\n        android:listSelector=\"@android:color/darker_gray\"\n        android:textSize=\"10sp\"\n        android:visibility=\"visible\"&gt;\n    &lt;/ListView&gt;\n\n    &lt;RelativeLayout\n        android:id=\"@+id/rl\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"80dp\"\n        android:layout_alignParentBottom=\"true\"&gt;\n\n        &lt;Button\n            android:id=\"@+id/dogmap\"\n            android:layout_width=\"70dp\"\n            android:layout_height=\"68dp\"\n            android:layout_alignParentStart=\"true\"\n            android:layout_alignParentTop=\"true\"\n            android:layout_marginStart=\"21dp\"\n            android:background=\"@drawable/map\" /&gt;\n\n        &lt;Button\n            android:id=\"@+id/dogphone\"\n            android:layout_width=\"70dp\"\n            android:layout_height=\"68dp\"\n            android:layout_alignParentTop=\"true\"\n            android:layout_centerHorizontal=\"true\"\n            android:background=\"@drawable/phone\" /&gt;\n\n        &lt;Button\n            android:id=\"@+id/dogaweb\"\n            android:layout_width=\"70dp\"\n            android:layout_height=\"68dp\"\n            android:layout_alignParentEnd=\"true\"\n            android:layout_alignParentTop=\"true\"\n            android:layout_marginEnd=\"26dp\"\n            android:background=\"@drawable/website\" /&gt;\n    &lt;/RelativeLayout&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 9937145, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HKmx5_fKE1Y/AAAAAAAAAAI/AAAAAAAAAAA/kZukbFxZM5Y/photo.jpg?sz=128", "display_name": "Gabo Walker", "link": "https://stackoverflow.com/users/9937145/gabo-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 50936950, "answer_count": 3, "score": 0, "last_activity_date": 1529443863, "creation_date": 1529440919, "question_id": 50936642, "link": "https://stackoverflow.com/questions/50936642/android-listview-height-to-match-parent-minus-fixed-height", "title": "Android ListView height to match_parent minus fixed height", "body": "<p>I have a LinearLayout that has a listview in it, and at the bottom I have a realativeLayout that has 3 buttons in it.</p>\n\n<pre><code>   &lt;LinearLayout\n    android:id=\"@+id/ListView\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:descendantFocusability=\"beforeDescendants\"\n    android:orientation=\"vertical\"\n    android:visibility=\"visible\"\n    tools:layout_editor_absoluteY=\"8dp\"&gt;\n\n        &lt;ListView\n        android:id=\"@+id/listdogs\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:choiceMode=\"singleChoice\"\n        android:focusable=\"true\"\n        android:focusableInTouchMode=\"true\"\n        android:listSelector=\"@android:color/darker_gray\"\n        android:textSize=\"10dp\"\n        android:layout_marginBottom=\"80dp\"\n        android:visibility=\"visible\"&gt;\n\n\n    &lt;/ListView&gt;\n\n&lt;RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"80dp\"&gt;\n\n        &lt;Button\n            android:id=\"@+id/dogmap\"\n            android:layout_width=\"70dp\"\n            android:layout_height=\"68dp\"\n            android:layout_alignParentStart=\"true\"\n            android:layout_alignParentTop=\"true\"\n            android:layout_marginStart=\"21dp\"\n            android:background=\"@drawable/map\" /&gt;\n\n        &lt;Button\n            android:id=\"@+id/dogphone\"\n            android:layout_width=\"70dp\"\n            android:layout_height=\"68dp\"\n            android:layout_alignParentTop=\"true\"\n            android:layout_centerHorizontal=\"true\"\n            android:background=\"@drawable/phone\" /&gt;\n\n        &lt;Button\n            android:id=\"@+id/dogaweb\"\n            android:layout_width=\"70dp\"\n            android:layout_height=\"68dp\"\n            android:layout_alignParentEnd=\"true\"\n            android:layout_alignParentTop=\"true\"\n            android:layout_marginEnd=\"26dp\"\n            android:background=\"@drawable/website\" /&gt;\n    &lt;/RelativeLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>I want to have the listview set like: android:layout_height=\"match_parent\" but I want it to substract -80dp from that height so it allows my relativeLayout at the bottom to be shown.</p>\n\n<p>I thought that if I added  android:layout_marginBottom=\"80dp\" it would give me the space needed to show my relativeLayout, but it didn\u00b4t happen. It only added a blank space there and move my buttons out of the screen.</p>\n\n<p>thank you in advance 4 your support</p>\n\n<p>Regards</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 13032, "user_id": 4216641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVLIh.jpg?s=128&g=1", "display_name": "Turing85", "link": "https://stackoverflow.com/users/4216641/turing85"}, "edited": false, "score": 0, "creation_date": 1529436039, "post_id": 50935508, "comment_id": 88869647, "body": "Are you asking for an answer in <code>java</code> or <code>kotlin</code>? Or do you not care which one it is?"}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "reply_to_user": {"reputation": 13032, "user_id": 4216641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVLIh.jpg?s=128&g=1", "display_name": "Turing85", "link": "https://stackoverflow.com/users/4216641/turing85"}, "edited": false, "score": 0, "creation_date": 1529436091, "post_id": 50935508, "comment_id": 88869671, "body": "Kotlin would be preferred, but if it&#39;s possible in Java that&#39;s cool too - they are inter-operable."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1529436094, "post_id": 50935508, "comment_id": 88869672, "body": "No, it&#39;s not possible. Suppose you have a variable foo of type SimulationState. How could the compiler let you call your method with 3 arguments when this method doesn&#39;t exist in the interface? If you call foo.integrate(a, b), an argument is missing. If you call foo.integrate(a, b, c), it will tell you that there is no such method in SimulationState."}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1529436174, "post_id": 50935508, "comment_id": 88869707, "body": "The compiler doesn&#39;t call the method. The run time calls the method. I guess I&#39;m asking if it&#39;s possible to make the compiler pattern match implementations against function types (based on the type system somehow)."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1529436217, "post_id": 50935508, "comment_id": 88869727, "body": "How could the compiler let <b>you</b> call your method. A contract defines the contract that all implementations must obey. If you define methods in the class that have the same name but different arguments, you&#39;re not respecting the contract."}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1529436335, "post_id": 50935508, "comment_id": 88869778, "body": "Well here is how I imagined it - the compiler would check if the class in question implements sub types of SimulationState and, if so, would check all call sites for the 3 parameter implementation (ShipState), if 2 params were provided at call site then it would call the parent type (SiimulationState)."}, {"owner": {"reputation": 13032, "user_id": 4216641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVLIh.jpg?s=128&g=1", "display_name": "Turing85", "link": "https://stackoverflow.com/users/4216641/turing85"}, "edited": false, "score": 2, "creation_date": 1529436424, "post_id": 50935508, "comment_id": 88869824, "body": "For this, the compiler would need to know the <b>runtime type</b>. This is w.l.o.g. not possible."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1529436471, "post_id": 50935508, "comment_id": 88869838, "body": "The compiler doesn&#39;t know about the subclass. Your variable is of type SimulationState. And SimulationState only has the method with 2 arguments."}, {"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1529436649, "post_id": 50935508, "comment_id": 88869915, "body": "what is w.l.o.g? And fair, I guess my brain is frazzled."}, {"owner": {"reputation": 13032, "user_id": 4216641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dVLIh.jpg?s=128&g=1", "display_name": "Turing85", "link": "https://stackoverflow.com/users/4216641/turing85"}, "edited": false, "score": 0, "creation_date": 1529437032, "post_id": 50935508, "comment_id": 88870082, "body": "w.l.o.g. = without loss of generality"}], "answers": [{"comments": [{"owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "edited": false, "score": 0, "creation_date": 1529442559, "post_id": 50936492, "comment_id": 88872395, "body": "Good explanation! Now I understand why this is not possible, it is not theoretically impossible, but the explosion of possibly infinite implementation of child types and all their child types means it is technically unfeasible (read basically impossible). I was being a dope... I guess I can overload, but it feels kind of gross to me.. because I will still be force to give an implementation of integrate for the base type SimulationState in any class that implements ShipState even though I&#39;m only interested in ShipStates imp. Should I use composition instead?"}], "tags": [], "owner": {"reputation": 406, "user_id": 1294092, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0754559a57c4b5769c062fc90dd3230d?s=128&d=identicon&r=PG", "display_name": "noktigula", "link": "https://stackoverflow.com/users/1294092/noktigula"}, "is_accepted": true, "score": 2, "last_activity_date": 1529440277, "creation_date": 1529440277, "answer_id": 50936492, "question_id": 50935508, "link": "https://stackoverflow.com/questions/50935508/override-a-function-type-in-sub-type-kotlin-java/50936492#50936492", "title": "Override a function type in sub type Kotlin/Java", "body": "<p>JVM object structure has an inner pointer to a table of methods available. When you call the method of the object, JVM access this table (let's call it vtable) and, if method is found, it executes it. But what to do if method is not found there? Then it tries to find this method in parent class. These accesses may be detected during compilation, which helps to avoid really complex problems with debugging on runtime. </p>\n\n<p>Now, lets imagine that your example is possible. You have a class which implements <code>ShipState</code> and, through it, it also implements <code>SimulationState</code>. You implement your method <code>integrate</code> from interface <code>ShipState</code> (the one with 3 parameters).</p>\n\n<p>But wait, your object is still of type <code>SimulationState</code>, right? Now let's imagine that you want to create a collection of simulations and process them in single way:</p>\n\n<pre><code>val simpleSimulation = SimulationStateImpl() //imaginary implementation of base interface\nval shipSimulation = ShipSimulationImpl() // again imaginary implementation\nval simulations = listOf&lt;SimulationState&gt;(simpleSimulation, shipSimulation)\nsimulations.forEach { it.integrate(totalTime = 100, deltaTime = 50) }\n</code></pre>\n\n<p>What happens next? On first iteration, everything is fine. When you call <code>integrate</code> on <code>simpleSimulation</code> JVM access it's vtable, finds implementation of <code>integrate</code> with two parameters and calls it. Fine.</p>\n\n<p>On second iteration, JVM access vtable of object <code>shipSimulation</code>. It tries to resolve method <code>integrate</code> with two parameters and doesn't find it. Okay, what to do next? There are similar method which has three parameters, should we call it? If yes, which parameter do we need to pass? <code>null</code>? Why? What to do in case if your similar method has 5 parameters more? Compiler and runtime are not able to resolve this issues, that's why it's failing.</p>\n\n<p>In terms of Java/Kotlin OOP, what you want to do is not an <code>override</code>. You just adding new method to a new interface, which, by coincidence, looks pretty similar to the other one. However this coincidence doesn't mean that it's same method.</p>\n\n<p>Please take a look on <a href=\"https://programmingmitra.blogspot.com/2017/05/how-does-jvm-handle-method-overriding-internally.html\" rel=\"nofollow noreferrer\">this wonderful article</a>, which explains topic in low-level details.</p>\n"}, {"tags": [], "owner": {"reputation": 1803, "user_id": 5289288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c64cc31ab2af73da608da7fa7b1e710?s=128&d=identicon&r=PG&f=1", "display_name": "Max Farsikov", "link": "https://stackoverflow.com/users/5289288/max-farsikov"}, "is_accepted": false, "score": 0, "last_activity_date": 1529441700, "creation_date": 1529441700, "answer_id": 50936817, "question_id": 50935508, "link": "https://stackoverflow.com/questions/50935508/override-a-function-type-in-sub-type-kotlin-java/50936817#50936817", "title": "Override a function type in sub type Kotlin/Java", "body": "<p>Probably you need not <code>override</code> but <code>overload</code>.</p>\n\n<p>If yes, just remove keyword <code>override</code> from the derived interface.</p>\n\n<p>If you need <code>override</code> (you are going to use polymorphism) both functions must have the same signature.</p>\n\n<p>It is impossible to override the function:</p>\n\n<pre><code>(Long, Long) -&gt; SimulationState\n</code></pre>\n\n<p>with function:</p>\n\n<pre><code>(Long, Long, Collection) -&gt; Unit\n</code></pre>\n"}], "owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 50936492, "answer_count": 2, "score": 0, "last_activity_date": 1529442885, "creation_date": 1529435834, "last_edit_date": 1529442885, "question_id": 50935508, "link": "https://stackoverflow.com/questions/50935508/override-a-function-type-in-sub-type-kotlin-java", "title": "Override a function type in sub type Kotlin/Java", "body": "<p>I have this interface:</p>\n\n<pre><code>// Interface for any simulation that is integrated against dt\ninterface SimulationState {\n    fun integrate(totalTime: Long, deltaTime: Long) : SimulationState\n    fun interpolate(alpha: Double, previousState: SimulationState) : SimulationState\n    fun preRender() : Collection&lt;Pair&lt;Int, Int&gt;&gt;\n}\n</code></pre>\n\n<p>The implementation is irrelevant to my question in this case. The question is can I override the function types in a sub type. Below is an example, that doesn't compile; hence my reason for asking this question.</p>\n\n<pre><code>interface ShipState : SimulationState {\n    // Still in abstract, just hope I can somehow override the function type...\n    override fun integrate(totalTime: Long, \n                           deltaTime: Long,\n                           asteroidVectors: Collection&lt;Pair&lt;Double, Double&gt;&gt;) : SimulationState\n}\n</code></pre>\n\n<p>Hopefully the admittedly not compiling code above makes clear my intent. Is this possible with Java/Kotlin? If so, how would I go about it?</p>\n"}, {"tags": ["kotlin", "sealed-class"], "comments": [{"owner": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "edited": false, "score": 1, "creation_date": 1529440950, "post_id": 50935149, "comment_id": 88871798, "body": "A point about terminology: you don&#39;t want the compiler to crash! You just want it to emit an error message. The compiler would only crash if it itself had a bug."}, {"owner": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "reply_to_user": {"reputation": 5279, "user_id": 8473028, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kYbHF.jpg?s=128&g=1", "display_name": "DodgyCodeException", "link": "https://stackoverflow.com/users/8473028/dodgycodeexception"}, "edited": false, "score": 0, "creation_date": 1529441013, "post_id": 50935149, "comment_id": 88871828, "body": "@DodgyCodeException Absolutely! ;D thanks for your clarification"}], "answers": [{"comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1529441391, "post_id": 50935203, "comment_id": 88871951, "body": "You lost the return type in the process though (probably a typo)"}, {"owner": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1529441464, "post_id": 50935203, "comment_id": 88871980, "body": "@Zoe Actually I&#39;m returning &quot;void&quot; (Unit)"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1529441527, "post_id": 50935203, "comment_id": 88872013, "body": "You had <code>Any</code> as the return type in the question though, just wanted to make sure it wasn&#39;t a typo :)"}, {"owner": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1529441642, "post_id": 50935203, "comment_id": 88872050, "body": "@Zoe It was just for clarify that, if there is a return type, compiler cmplains. But my &quot;real&quot; code returns Unit. Thanks anyway"}], "tags": [], "owner": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "is_accepted": true, "score": 5, "last_activity_date": 1529434375, "creation_date": 1529434375, "answer_id": 50935203, "question_id": 50935149, "link": "https://stackoverflow.com/questions/50935149/force-compiler-to-emit-an-error-when-not-all-implementations-are-covered-in-whe/50935203#50935203", "title": "Force compiler to emit an error when not all implementations are covered in &quot;when&quot; statement", "body": "<p>Solved. I didn't know you can use <code>return</code> statement even when method returns <code>Unit</code>:</p>\n\n<pre><code>fun handle(cmd: Command) {\n  return when(cmd) {\n    is FirstCommand -&gt; //whatever     \n  }\n}\n</code></pre>\n\n<p>Now, code above does not compile because <code>when</code> needs all the branches. Just what I wanted.</p>\n"}], "owner": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 50935203, "answer_count": 1, "score": 3, "last_activity_date": 1529485320, "creation_date": 1529434162, "last_edit_date": 1529485320, "question_id": 50935149, "link": "https://stackoverflow.com/questions/50935149/force-compiler-to-emit-an-error-when-not-all-implementations-are-covered-in-whe", "title": "Force compiler to emit an error when not all implementations are covered in &quot;when&quot; statement", "body": "<p>Maybe this is an absurd question. I have a method that receives a <code>Command</code> (sealed class) and returns <code>Unit</code> and I want the compiler to crash whether all the <code>when</code> branches have not been implemented:</p>\n\n<pre><code>sealed class Command\nclass FirstCommand : Command()\nclass SecondCommand: Command()\n\nfun handle(cmd: Command) {\n  when(cmd) {\n    is FirstCommand -&gt; //whatever     \n  }\n}\n</code></pre>\n\n<p>The code above is ok, but I would like it not to compile.</p>\n\n<p>When method returns anything different from <code>Unit</code>, it does not compile:</p>\n\n<pre><code>fun handle(cmd: Command) : Any {\n  when(cmd) { //error, when must be exhaustive and requires all branches\n    is FirstCommand -&gt; //whatever     \n  }\n}\n</code></pre>\n\n<p>I want that behavior but returning nothing (<code>Unit</code>). I understand why that happens, but I'm wondering if there is any way I can change my code to achieve what I want. I need cover all the <code>Command</code> implementations without forget anyone that may be added later.</p>\n"}, {"tags": ["android", "kotlin", "android-architecture-components", "android-navigation", "android-jetpack"], "answers": [{"comments": [{"owner": {"reputation": 1183, "user_id": 6521806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10abc63921011dbabcb351ef3dc4814?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelThePotato", "link": "https://stackoverflow.com/users/6521806/michaelthepotato"}, "edited": false, "score": 0, "creation_date": 1529433077, "post_id": 50934789, "comment_id": 88868248, "body": "I see. Thanks for the response! I was hoping for a way that&#39;s integrated into the architecture though. That being said, knowing for sure that for now it can&#39;t be done within the framework is a solid response. saves the hassle of running around."}, {"owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "reply_to_user": {"reputation": 1183, "user_id": 6521806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10abc63921011dbabcb351ef3dc4814?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelThePotato", "link": "https://stackoverflow.com/users/6521806/michaelthepotato"}, "edited": false, "score": 0, "creation_date": 1529535433, "post_id": 50934789, "comment_id": 88913624, "body": "I&#39;m glad I could help you. As you&#39;ve seen the community is already asking for new features and I think it won&#39;t be long before they release new ways of integrating other data types :)"}, {"owner": {"reputation": 1266, "user_id": 6124910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-iHD_ce7khhA/AAAAAAAAAAI/AAAAAAAAAKY/sfa9lEsRxvM/photo.jpg?sz=128", "display_name": "Patrick", "link": "https://stackoverflow.com/users/6124910/patrick"}, "edited": false, "score": 1, "creation_date": 1530098469, "post_id": 50934789, "comment_id": 89112795, "body": "Sorry but &quot;bundleOf&quot; give me: unresolved reference :("}, {"owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "edited": false, "score": 1, "creation_date": 1530098753, "post_id": 50934789, "comment_id": 89112944, "body": "Sorry, that&#39;s an extension function, forgot to mention. You can add this depedence  implementation &#39;androidx.core:core-ktx:1.0.0-alpha1&#39;"}, {"owner": {"reputation": 1266, "user_id": 6124910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-iHD_ce7khhA/AAAAAAAAAAI/AAAAAAAAAKY/sfa9lEsRxvM/photo.jpg?sz=128", "display_name": "Patrick", "link": "https://stackoverflow.com/users/6124910/patrick"}, "edited": false, "score": 0, "creation_date": 1530098983, "post_id": 50934789, "comment_id": 89113083, "body": "Thank you very much Levi!"}], "tags": [], "owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "is_accepted": true, "score": 10, "last_activity_date": 1529432824, "creation_date": 1529432824, "answer_id": 50934789, "question_id": 50934760, "link": "https://stackoverflow.com/questions/50934760/is-it-possible-to-send-arguments-other-than-string-or-integer-in-androids-new-n/50934789#50934789", "title": "Is it possible to send arguments other than string or integer in android&#39;s new navigation component", "body": "<p>At the moment you <strong>can't</strong> use safe args with types apart from <em>integer</em>, <em>string</em>, <em>inferred</em> and <em>reference</em>. An <a href=\"https://issuetracker.google.com/issues/79563966\" rel=\"noreferrer\">issue</a> has been opened asking for other types.</p>\n\n<p>But you pass a <em>bundle</em> programmatically when using the <em>navigate()</em> method to navigate to a destination:</p>\n\n<pre><code>var bundle = bundleOf(\"key\" to amount)\nview.findNavController().navigate(R.id.action_id, bundle)\n</code></pre>\n\n<p>And you can use the usual <code>getArguments</code> to retrieve the data in the destination fragment:</p>\n\n<pre><code>val value = arguments.getString(\"key\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13271, "user_id": 675750, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f2213833e915217fc01fdeb887a7c0b5?s=128&d=identicon&r=PG", "display_name": "copolii", "link": "https://stackoverflow.com/users/675750/copolii"}, "edited": false, "score": 1, "creation_date": 1539901631, "post_id": 51393443, "comment_id": 92680230, "body": "<code>error: Parcelable (&#39;inferred&#39;) doesn&#39;t allow default values other than @null</code>"}], "tags": [], "owner": {"reputation": 2169, "user_id": 507142, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Q06jF.jpg?s=128&g=1", "display_name": "Afzal N", "link": "https://stackoverflow.com/users/507142/afzal-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1531886926, "creation_date": 1531886926, "answer_id": 51393443, "question_id": 50934760, "link": "https://stackoverflow.com/questions/50934760/is-it-possible-to-send-arguments-other-than-string-or-integer-in-androids-new-n/51393443#51393443", "title": "Is it possible to send arguments other than string or integer in android&#39;s new navigation component", "body": "<p>Just set the default value to be 0L instead of 0, and the type to be \"inferred\"</p>\n"}, {"comments": [{"owner": {"reputation": 705, "user_id": 5328951, "user_type": "registered", "profile_image": "https://graph.facebook.com/899571496801046/picture?type=large", "display_name": "Yogesh Nikam Patil", "link": "https://stackoverflow.com/users/5328951/yogesh-nikam-patil"}, "edited": false, "score": 0, "creation_date": 1601838910, "post_id": 53929362, "comment_id": 113523706, "body": "What about Double?"}], "tags": [], "owner": {"reputation": 4670, "user_id": 9643784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/9643784/guillaume"}, "is_accepted": false, "score": 25, "last_activity_date": 1545812528, "creation_date": 1545812528, "answer_id": 53929362, "question_id": 50934760, "link": "https://stackoverflow.com/questions/50934760/is-it-possible-to-send-arguments-other-than-string-or-integer-in-androids-new-n/53929362#53929362", "title": "Is it possible to send arguments other than string or integer in android&#39;s new navigation component", "body": "<p>Since version 1.0.0-alpha08 you can use a lot of different types, i have found a list <a href=\"https://android-review.googlesource.com/c/platform/frameworks/support/+/720246/11/navigation/safe-args-generator/src/main/kotlin/androidx/navigation/safe/args/generator/Types.kt\" rel=\"noreferrer\">here</a></p>\n\n<pre><code>\"integer\" -&gt; IntType\n\"integer[]\" -&gt; IntArrayType\n\"long\" -&gt; LongType\n\"long[]\" -&gt; LongArrayType\n\"float\" -&gt; FloatType\n\"float[]\" -&gt; FloatArrayType\n\"boolean\" -&gt; BoolType\n\"boolean[]\" -&gt; BoolArrayType\n\"reference\" -&gt; ReferenceType\n\"reference[]\" -&gt; ReferenceArrayType\n\"string\" -&gt; StringType\n\"string[]\" -&gt; StringArrayType\nnull -&gt; StringType\n</code></pre>\n\n<p>and for the used in navigation graph (for exemple: list of string)</p>\n\n<pre><code>&lt;argument\n    android:name=\"photo_url\"\n    app:argType=\"string[]\"\n/&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 549, "user_id": 6441976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93c7eed900a6fe66883cb0ec77fd45c?s=128&d=identicon&r=PG&f=1", "display_name": "yonga springfield", "link": "https://stackoverflow.com/users/6441976/yonga-springfield"}, "is_accepted": false, "score": 0, "last_activity_date": 1545897771, "creation_date": 1545897771, "answer_id": 53941677, "question_id": 50934760, "link": "https://stackoverflow.com/questions/50934760/is-it-possible-to-send-arguments-other-than-string-or-integer-in-androids-new-n/53941677#53941677", "title": "Is it possible to send arguments other than string or integer in android&#39;s new navigation component", "body": "<p>This might come in late and resolves the problem in a slightly different manner but I am putting it here because I feel the question demands for a way of sending arguments across during navigation and to a nominal magnitude in a type safe way.</p>\n\n<p>That my friend is one of the problems <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel#java\" rel=\"nofollow noreferrer\">architecture components viewmodel </a>solves in a very efficient manner.As per the <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel#java\" rel=\"nofollow noreferrer\">docs</a>, on the section \"share data between fragments\" we will find the technique used. Essentially, it's all about creating a viewmodel instance that is instead attached to the scope of the enclosing fragment/activity to the two(or more) navigated to fragments. That way, they will survive throughout the entire lifecycle of the navigated to fragments.</p>\n\n<p>Below is a small example that I actually extracted from one of the applications I have in production.</p>\n\n<p><code>-MainActivity\n  |-NavHostFragment\n  | |-FormFragment(Start destination)\n  | |-ResultFragment( navigated to fragment)\n  | |\n</code>\nand a SharedViewModel for the transfer of data amongst destination fragments.</p>\n\n<p>ViewModelCode</p>\n\n<pre><code>public class SharedViewModel extends ViewModel implements ResultFragment.ResultFragmentViewModel, FormFragment.FormFragmentViewModel {\npublic String name;\n\npublic String getName() {\n    return name;\n}\n\npublic void setName(String name) {\n    this.name = name;\n}   }\n</code></pre>\n\n<p>in FormFragment.</p>\n\n<pre><code>    @Override\npublic void onCreate(@Nullable Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    sharedViewModel = ((FormFragmentViewModel) ViewModelProviders.of(this.getActivity()).get(SharedViewModel.class));\n}\n\npublic void onFabPressed( View view) {\n    String text = editText.getText().toString().trim();\n    if(text.matches(\"\")) return ;\n    sharedViewModel.setName(text);\n    Navigation.findNavController(view).navigate(R.id.action_formFragment_to_resultFragment);\n\n}\n\npublic interface FormFragmentViewModel {\n    public void setName(String string);\n}\n</code></pre>\n\n<p>in the ResultFragment,</p>\n\n<pre><code>    @Override\npublic void onCreate(@Nullable Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    sharedViewModel = ((ResultFragmentViewModel) ViewModelProviders.of(this.getActivity()).get(SharedViewModel.class));\n}\n\n@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n                         Bundle savedInstanceState) {\n    // Inflate the layout for this fragment\n    View view = inflater.inflate(R.layout.fragment_result, container, false);\n    FloatingActionButton fab = view.findViewById(R.id.fab);\n    ((TextView) view.findViewById(R.id.textview))\n        .setText(sharedViewModel.getName());\n    fab.setOnClickListener(\n            Navigation.createNavigateOnClickListener(R.id.action_global_formFragment)\n    );\n    return view;\n}\n\n\npublic interface ResultFragmentViewModel {\n    public String getName();\n}\n</code></pre>\n\n<p>In the above pieces of code, the importance should be laid on the scope sent to the ViewModelProviders.of() method of both fragments being the enclosing activity as it's lifecycle outlives that of both fragments( FormFragment, ResultFragment). Saving the data that we wish to send to the destination fragment in the viewmodel before navigating to the destination fragment knowing we will retrieve it from the same instance of the viewmodel once in the destination fragment.\nThe interfaces are used for intellisense with android studio, abstracting away ( from a developer standpoint) unnecessary methods from the viewmodel respective to in which fragment it is being used in. In this setup, even actions can be sent to the destination fragment using something like a <a href=\"https://stackoverflow.com/questions/26853249/correct-way-of-applying-delegation-pattern-in-android\">delegate pattern</a> by setting the object to carryout the action once in the destination fragment in the viewmodel before navigating to the destination fragment and while there, retrieve the object and delegate to it the action to be taken. I will like to add that in this setup, it's close to impossible for one to confuse the <code>String name</code> variable for an int.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1171, "user_id": 6121671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oEYZX.jpg?s=128&g=1", "display_name": "GV_FiQst", "link": "https://stackoverflow.com/users/6121671/gv-fiqst"}, "is_accepted": false, "score": 4, "last_activity_date": 1558533480, "last_edit_date": 1558533480, "creation_date": 1558532679, "answer_id": 56258312, "question_id": 50934760, "link": "https://stackoverflow.com/questions/50934760/is-it-possible-to-send-arguments-other-than-string-or-integer-in-androids-new-n/56258312#56258312", "title": "Is it possible to send arguments other than string or integer in android&#39;s new navigation component", "body": "<p>Use primitive wrappers! What's wrong with it?</p>\n\n<pre><code>&lt;argument\n    android:name=\"discussionId\"\n    app:argType=\"java.lang.Long\" /&gt;\n\n// java.lang.Double, java.lang.Float, etc...\n</code></pre>\n\n<p>Works like a charm with kotlin and even with safe args because all primitive wrappers are implementing <code>Serializable</code></p>\n"}, {"tags": [], "owner": {"reputation": 2593, "user_id": 2427819, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/746fda9758b63e8e0ea5d9590ee7b874?s=128&d=identicon&r=PG", "display_name": "El Jazouli", "link": "https://stackoverflow.com/users/2427819/el-jazouli"}, "is_accepted": false, "score": 0, "last_activity_date": 1614608033, "creation_date": 1614608033, "answer_id": 66423686, "question_id": 50934760, "link": "https://stackoverflow.com/questions/50934760/is-it-possible-to-send-arguments-other-than-string-or-integer-in-androids-new-n/66423686#66423686", "title": "Is it possible to send arguments other than string or integer in android&#39;s new navigation component", "body": "<p><code>app:argType=&quot;kotlin.Double&quot;</code> or any type that can go into a bundle</p>\n"}], "owner": {"reputation": 1183, "user_id": 6521806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10abc63921011dbabcb351ef3dc4814?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelThePotato", "link": "https://stackoverflow.com/users/6521806/michaelthepotato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12162, "favorite_count": 1, "accepted_answer_id": 50934789, "answer_count": 6, "score": 14, "last_activity_date": 1614608033, "creation_date": 1529432649, "last_edit_date": 1552422217, "question_id": 50934760, "link": "https://stackoverflow.com/questions/50934760/is-it-possible-to-send-arguments-other-than-string-or-integer-in-androids-new-n", "title": "Is it possible to send arguments other than string or integer in android&#39;s new navigation component", "body": "<p>The new navigation component is great! however I would like to send \"Long\" variables between my fragments.</p>\n\n<p>writing this in the navigation graph file works:</p>\n\n<pre><code>&lt;argument\n        android:name=\"discussionId\"\n        app:type=\"string\" /&gt;\n</code></pre>\n\n<p>writing this won't compile:</p>\n\n<pre><code>&lt;argument\n        android:name=\"discussionId\"\n        app:type=\"long\" /&gt;\n</code></pre>\n\n<p>Currently, it seems I'm forced to parse them to and from string formats.\nIt works fine, but it seems bizarre to me that I can't use primitive types such as long or byte or short for such a fundamental architecture.\nAm I missing something? Is this kind of feature set to be developed in the future?</p>\n"}, {"tags": ["android", "kotlin", "android-jobscheduler"], "comments": [{"owner": {"reputation": 2662, "user_id": 2707179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUNvp.jpg?s=128&g=1", "display_name": "michalbrz", "link": "https://stackoverflow.com/users/2707179/michalbrz"}, "edited": false, "score": 0, "creation_date": 1529445776, "post_id": 50933831, "comment_id": 88873467, "body": "Do you have <code>RECEIVE_BOOT_COMPLETED</code> permission?"}, {"owner": {"reputation": 320, "user_id": 7880720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVUmt.jpg?s=128&g=1", "display_name": "KJ Newtown", "link": "https://stackoverflow.com/users/7880720/kj-newtown"}, "reply_to_user": {"reputation": 2662, "user_id": 2707179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FUNvp.jpg?s=128&g=1", "display_name": "michalbrz", "link": "https://stackoverflow.com/users/2707179/michalbrz"}, "edited": false, "score": 0, "creation_date": 1529499341, "post_id": 50933831, "comment_id": 88895038, "body": "Yes I do, in the manifest"}], "answers": [{"tags": [], "owner": {"reputation": 320, "user_id": 7880720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVUmt.jpg?s=128&g=1", "display_name": "KJ Newtown", "link": "https://stackoverflow.com/users/7880720/kj-newtown"}, "is_accepted": true, "score": 1, "last_activity_date": 1529681030, "creation_date": 1529681030, "answer_id": 50991147, "question_id": 50933831, "link": "https://stackoverflow.com/questions/50933831/android-jobscheduler-bug-delay-is-increased-after-reboot-param-minimumlatency/50991147#50991147", "title": "Android JobScheduler bug: delay is increased after reboot (param minimumLatency)", "body": "<p>I found the issue and a way to solve it. Maybe this will help someone.\nIt is actually a bug.\nWhen the device boots, in the logs I can see that the device's date is december 31st 2016.\nAnd then, later on when the internet is connected, the system's date is updated to today's date.\nSo I figured my increased delay is the time between today and Dec. 31st 2016!</p>\n\n<p>I think Android is Starting the JobScheduler service before setting up the date and thus setting them thinking it will be in 1 year and a half.\nI guess it depends of the devices. I am on Android TV.</p>\n\n<p>Anyway, this was obviously not directly solvable, so I implemented my own rescheduling in my service and I dont keep the persited parameter.\nAnd doing it this way is actually better for my project and future required customizations.</p>\n"}], "owner": {"reputation": 320, "user_id": 7880720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVUmt.jpg?s=128&g=1", "display_name": "KJ Newtown", "link": "https://stackoverflow.com/users/7880720/kj-newtown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 50991147, "answer_count": 1, "score": 1, "last_activity_date": 1529681050, "creation_date": 1529428947, "last_edit_date": 1529681050, "question_id": 50933831, "link": "https://stackoverflow.com/questions/50933831/android-jobscheduler-bug-delay-is-increased-after-reboot-param-minimumlatency", "title": "Android JobScheduler bug: delay is increased after reboot (param minimumLatency)", "body": "<p>I am working with Android JobScheduler, using a JobInfo.Builder() to launch my Service at a specified time.\nEverything works correctly, even when my device enters in sleepmode. But when I restart the device, all the jobs still exist but their delay has been increased, to an astonishing number.</p>\n\n<p>I am creating jobs with specified delay (param minimumLatency) and using the param setPersisited(true) in order to keep the jobs after reboot.</p>\n\n<p>For example let's say I set minimumLatency to 120_000ms.\nIf I don't reboot my task is correctly executed after the specified delay.\nBut if I reboot before the task, my mimimumLatency is increased to roughly 40 Billion milli</p>\n\n<p>I have also tried to setOverrideDeadline() to various delays, it des not help</p>\n\n<p>This is how I create the Job:</p>\n\n<pre><code>JobInfo.Builder(id, componentName)\n                .setExtras(bundle)\n                .setPersisted(true)\n                .setMinimumLatency(initialDelay)\n                .setRequiredNetworkType(JobInfo.NETWORK_TYPE_ANY)\n                .build()\n                .let {\n                   context.getSystemService(JobScheduler::class.java). schedule(it)\n                    }\n</code></pre>\n\n<p>Please let me know if you have a clue about this issue.</p>\n\n<p>Any help will be appreciated.\nThanks</p>\n"}, {"tags": ["java-8", "kotlin", "supplier"], "answers": [{"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": false, "score": 3, "last_activity_date": 1529443074, "creation_date": 1529443074, "answer_id": 50937077, "question_id": 50933800, "link": "https://stackoverflow.com/questions/50933800/how-pass-suplier-from-kotlin/50937077#50937077", "title": "How pass suplier from kotlin?", "body": "<p>Have you tried </p>\n\n<pre><code>CompletableFuture.supplyAsync(Supplier&lt;TerminateJobResponse&gt; {\n</code></pre>\n\n<p>? </p>\n"}, {"tags": [], "owner": {"reputation": 982, "user_id": 2387391, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69815c1c8262c3986c14cf48f9722df8?s=128&d=identicon&r=PG", "display_name": "Eagle_Eye", "link": "https://stackoverflow.com/users/2387391/eagle-eye"}, "is_accepted": false, "score": 0, "last_activity_date": 1600519604, "creation_date": 1600519604, "answer_id": 63968963, "question_id": 50933800, "link": "https://stackoverflow.com/questions/50933800/how-pass-suplier-from-kotlin/63968963#63968963", "title": "How pass suplier from kotlin?", "body": "<p>Use Function Literals</p>\n<pre><code>CompletableFuture.supplyAsync&lt;Something&gt;({ Runnable { println(&quot;abc&quot;) } }, { Runnable { println(&quot;xyz&quot;) } })\n</code></pre>\n<p>See <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\">SAM Conversions</a></p>\n"}], "owner": {"reputation": 25111, "user_id": 1251549, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/54c04cb22ca948af2708c2fa054fcf58?s=128&d=identicon&r=PG", "display_name": "Cherry", "link": "https://stackoverflow.com/users/1251549/cherry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2469, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1600519604, "creation_date": 1529428861, "question_id": 50933800, "link": "https://stackoverflow.com/questions/50933800/how-pass-suplier-from-kotlin", "title": "How pass suplier from kotlin?", "body": "<p>Look at the code:</p>\n\n<pre><code>CompletableFuture.supplyAsync({\n    awsBatch.terminateJob(\n        TerminateJobRequest.builder().jobId(it).reason(\"terminated\").build())}, executor)\n</code></pre>\n\n<p>Intellij get me:</p>\n\n<pre><code>Type mismatrch:\nRequired: Supplier&lt;TerminateJobResponse&gt;\nFound: () -&gt; TerminateJobResponse\n</code></pre>\n\n<p>While this compile perfect but without executor:</p>\n\n<pre><code>CompletableFuture.supplyAsync {\n    awsBatch.terminateJob(TerminateJobRequest.builder().jobId(it).reason(\"terminated\").build())\n}\n</code></pre>\n\n<p>How to pass Supplier to java 8 API from kotlin?</p>\n\n<p><strong>Offtop (just my mood for today)</strong></p>\n\n<p>They created a nice method <code>CompletableFuture.allOf()</code> with return type <code>void</code>, and created this - pass supplier as <strong>first</strong> argument...\nI love java but all of this makes me berserk sometimes - why just not to look at scala and creates something the same??? Kotlin, scala\nautomatically expose second argument as function like <code>myFunc(\"parameter\"){\"function\"}</code>. So now I have created a code and must \nspend couple hours for compilation some sugar (which should save my time instead)<br>\n:(((</p>\n"}, {"tags": ["android", "merge", "kotlin", "freemarker"], "comments": [{"owner": {"reputation": 287, "user_id": 7545481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef735b6cbca4958b7e6b61f4a978e3a7?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Lvov", "link": "https://stackoverflow.com/users/7545481/dmitry-lvov"}, "edited": false, "score": 0, "creation_date": 1530015541, "post_id": 50933656, "comment_id": 89076435, "body": "Update: It seems like exception come from <a href=\"https://github.com/JetBrains/android/blob/master/android/src/com/android/tools/idea/templates/RecipeMergeUtils.java\" rel=\"nofollow noreferrer\">github.com/JetBrains/android/blob/master/android/src/com/&hellip;</a>"}], "owner": {"reputation": 287, "user_id": 7545481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef735b6cbca4958b7e6b61f4a978e3a7?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Lvov", "link": "https://stackoverflow.com/users/7545481/dmitry-lvov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 3, "answer_count": 0, "score": 11, "last_activity_date": 1544200823, "creation_date": 1529428247, "last_edit_date": 1544200823, "question_id": 50933656, "link": "https://stackoverflow.com/questions/50933656/android-freemarker-class-merging", "title": "Android Freemarker Class merging", "body": "<p>I'm trying to make a template and cannot find a solution for this case:</p>\n\n<p>I have a class - Repository, something like:</p>\n\n<pre><code>interface UserRepository {\n    fun registryUser(user: UserEntity): Observable&lt;UserEntity&gt;\n}\n</code></pre>\n\n<p>With my template I want to add a method to this interface, e.g. updateUser(). It means that I want to achieve: </p>\n\n<pre><code>interface UserRepository {\n    fun registryUser(user: UserEntity): Observable&lt;UserEntity&gt;\n    fun updateUser(user: UserEntity): Observable&lt;UserEntity&gt;\n}\n</code></pre>\n\n<p>In template.xml I've created a new parameter:</p>\n\n<pre><code>&lt;parameter\n    id=\"methodName\"\n    name=\"Method Name\"\n    type=\"string\"\n    constraints=\"nonempty|unique\"\n    default=\"updateUser\"\n    help=\"creates method in Repository\" /&gt;\n</code></pre>\n\n<p>... and this code is for BlankRepository:</p>\n\n<pre><code>    interface UserRepository {\n        fun ${methodName}()\n    }\n</code></pre>\n\n<p><strong>Question:</strong> How can I merge my current UserRepository.kt with the code of template?</p>\n\n<p>Trying to do this in recipe.xml.ftl at this line:</p>\n\n<pre><code>    &lt;merge from=\"root/src/app_package/Repository.kt.ftl\"\n         to=\"app/src/main/java/${slashedPackageName(packageName)}/domain/modules/${moduleName}/${entityName}Repository.kt\" /&gt;\n</code></pre>\n\n<p>but it doesn't work! Stacktrace:</p>\n\n<pre><code>    Only XML or Gradle files can be merged at this point: C:\\Users\\,,\\domain\\modules\\moduleName\\Repository.kt\njava.lang.RuntimeException: Only XML or Gradle files can be merged at this point: C:\\Users\\..\\domain\\modules\\moduleName\\Repository.kt\n    at com.android.tools.idea.templates.recipe.DefaultRecipeExecutor.merge(DefaultRecipeExecutor.java:303)\n    at com.android.tools.idea.templates.recipe.Recipe$MergeInstruction.execute(Recipe.java:215)\n    at com.android.tools.idea.templates.recipe.Recipe.executeInstructions(Recipe.java:120)\n    at com.android.tools.idea.templates.recipe.Recipe.execute(Recipe.java:105)\n</code></pre>\n\n<p>Is there another way?</p>\n"}, {"tags": ["gradle", "kotlin", "build.gradle", "reusability", "code-reuse"], "answers": [{"tags": [], "owner": {"reputation": 2146, "user_id": 247690, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b807da7333cab04365fe6c47fbb6695?s=128&d=identicon&r=PG", "display_name": "Hemeroc", "link": "https://stackoverflow.com/users/247690/hemeroc"}, "is_accepted": true, "score": 2, "last_activity_date": 1529483299, "creation_date": 1529483299, "answer_id": 50943658, "question_id": 50932802, "link": "https://stackoverflow.com/questions/50932802/how-to-define-reusable-blocks-in-gradle-build/50943658#50943658", "title": "How to define reusable blocks in gradle build", "body": "<p>I found a solution for my specific problem (just for the kotlin compile part).\nI would love to have a more general approach. Though this might help others.</p>\n\n<pre><code>tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {\n    kotlinOptions {\n        // ...\n    }\n}\n</code></pre>\n\n<p>From the <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"nofollow noreferrer\">kotlin docs</a>.</p>\n"}], "owner": {"reputation": 2146, "user_id": 247690, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b807da7333cab04365fe6c47fbb6695?s=128&d=identicon&r=PG", "display_name": "Hemeroc", "link": "https://stackoverflow.com/users/247690/hemeroc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 607, "favorite_count": 0, "accepted_answer_id": 50943658, "answer_count": 1, "score": 3, "last_activity_date": 1529584389, "creation_date": 1529424826, "last_edit_date": 1529584389, "question_id": 50932802, "link": "https://stackoverflow.com/questions/50932802/how-to-define-reusable-blocks-in-gradle-build", "title": "How to define reusable blocks in gradle build", "body": "<p>I'm writing a gradle build for a kotlin project where I want to reuse the same <code>kotlinOptions</code> in multiple tasks.</p>\n\n<p>At the moment my build script looks like this, as the <code>kotlinOptions</code> are the same for every task I don't want to write them over and over again.</p>\n\n<pre><code>compileKotlin {\n    kotlinOptions {\n        allWarningsAsErrors = true\n        freeCompilerArgs = [\"-Xjvm-default=enable\", \"-Xjsr305=strict\"]\n        jvmTarget = \"1.8\"\n    }\n}\n\ncompileTestKotlin {\n    kotlinOptions {\n        allWarningsAsErrors = true\n        freeCompilerArgs = [\"-Xjvm-default=enable\", \"-Xjsr305=strict\"]\n        jvmTarget = \"1.8\"\n    }\n}\n\ncompileIntegrationTestKotlin {\n    kotlinOptions {\n        allWarningsAsErrors = true\n        freeCompilerArgs = [\"-Xjvm-default=enable\", \"-Xjsr305=strict\"]\n        jvmTarget = \"1.8\"\n    }\n}\n</code></pre>\n\n<p>Instead I want to define them once and reuse the definition whereever I need it.</p>\n\n<p>I also tried the following (As suggested in <a href=\"https://stackoverflow.com/a/50932953/247690\">Alexs answer</a>)</p>\n\n<pre><code>ext.optionNameHere = {\n    allWarningsAsErrors = true\n    freeCompilerArgs = [\"-Xjvm-default=enable\", \"-Xjsr305=strict\"]\n    jvmTarget = \"1.8\"\n}\ncompileKotlin { kotlinOptions = ext.optionNameHere }\ncompileTestKotlin { kotlinOptions = ext.optionNameHere }\ncompileIntegrationTestKotlin { kotlinOptions = ext.optionNameHere }\n</code></pre>\n\n<p>which leads to following error message:</p>\n\n<p><code>&gt; Cannot get property 'kotlinOptions' on extra properties extension as it does not exist</code></p>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin", "firebase-authentication"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 9548616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Sl5IEOZQkiA/AAAAAAAAAAI/AAAAAAAAABk/EMc3pVY2K1k/photo.jpg?sz=128", "display_name": "Dipesh Sinha", "link": "https://stackoverflow.com/users/9548616/dipesh-sinha"}, "edited": false, "score": 0, "creation_date": 1529506574, "post_id": 50935361, "comment_id": 88900067, "body": "I checked both of these and they are OK. Please tell me the information you require to solve this . Thank you"}, {"owner": {"reputation": 146, "user_id": 6742569, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046258202157949/picture?type=large", "display_name": "giudigior", "link": "https://stackoverflow.com/users/6742569/giudigior"}, "reply_to_user": {"reputation": 83, "user_id": 9548616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Sl5IEOZQkiA/AAAAAAAAAAI/AAAAAAAAABk/EMc3pVY2K1k/photo.jpg?sz=128", "display_name": "Dipesh Sinha", "link": "https://stackoverflow.com/users/9548616/dipesh-sinha"}, "edited": false, "score": 0, "creation_date": 1529507076, "post_id": 50935361, "comment_id": 88900427, "body": "The screenshot of the the Logcat when you run the app and try to SIgn-in (you can filter the Firebase related messages in the Logcat)"}, {"owner": {"reputation": 83, "user_id": 9548616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Sl5IEOZQkiA/AAAAAAAAAAI/AAAAAAAAABk/EMc3pVY2K1k/photo.jpg?sz=128", "display_name": "Dipesh Sinha", "link": "https://stackoverflow.com/users/9548616/dipesh-sinha"}, "edited": false, "score": 0, "creation_date": 1529507447, "post_id": 50935361, "comment_id": 88900685, "body": "I have updated my question . No other changes are happening in logcat whet i try to sign in"}, {"owner": {"reputation": 83, "user_id": 9548616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Sl5IEOZQkiA/AAAAAAAAAAI/AAAAAAAAABk/EMc3pVY2K1k/photo.jpg?sz=128", "display_name": "Dipesh Sinha", "link": "https://stackoverflow.com/users/9548616/dipesh-sinha"}, "edited": false, "score": 0, "creation_date": 1529508636, "post_id": 50935361, "comment_id": 88901454, "body": "Please check the update I have made. Downgrading firebase version did not work :("}], "tags": [], "owner": {"reputation": 146, "user_id": 6742569, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046258202157949/picture?type=large", "display_name": "giudigior", "link": "https://stackoverflow.com/users/6742569/giudigior"}, "is_accepted": false, "score": 0, "last_activity_date": 1529435081, "creation_date": 1529435081, "answer_id": 50935361, "question_id": 50932568, "link": "https://stackoverflow.com/questions/50932568/firebase-not-signing-in-existing-users-in-android-app/50935361#50935361", "title": "Firebase not signing in existing users in android app", "body": "<p>Since you didn't post any useful information to solve this problem (like the exception/s shown in the Logcat), you can start checking this two simple things:  </p>\n\n<ol>\n<li>Authentication -> Sign-In Method -> Email/Password ENABLED</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/HVNow.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HVNow.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"2\">\n<li>Make sure your database rules are set properly\n(<a href=\"https://firebase.google.com/docs/database/security/quickstart\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/database/security/quickstart</a>)</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 9548616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Sl5IEOZQkiA/AAAAAAAAAAI/AAAAAAAAABk/EMc3pVY2K1k/photo.jpg?sz=128", "display_name": "Dipesh Sinha", "link": "https://stackoverflow.com/users/9548616/dipesh-sinha"}, "edited": false, "score": 0, "creation_date": 1529508909, "post_id": 50951674, "comment_id": 88901632, "body": "Making the changes and trying to synch it gives the following error"}], "tags": [], "owner": {"reputation": 146, "user_id": 6742569, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046258202157949/picture?type=large", "display_name": "giudigior", "link": "https://stackoverflow.com/users/6742569/giudigior"}, "is_accepted": false, "score": 0, "last_activity_date": 1529507878, "creation_date": 1529507878, "answer_id": 50951674, "question_id": 50932568, "link": "https://stackoverflow.com/questions/50932568/firebase-not-signing-in-existing-users-in-android-app/50951674#50951674", "title": "Firebase not signing in existing users in android app", "body": "<p>Try Downgrading the Firebase Version:  </p>\n\n<pre><code>implementation 'com.google.firebase:firebase-auth:11.4.2'  \nimplementation 'com.google.firebase:firebase-database:11.4.2'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 9548616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Sl5IEOZQkiA/AAAAAAAAAAI/AAAAAAAAABk/EMc3pVY2K1k/photo.jpg?sz=128", "display_name": "Dipesh Sinha", "link": "https://stackoverflow.com/users/9548616/dipesh-sinha"}, "edited": false, "score": 0, "creation_date": 1529521508, "post_id": 50953280, "comment_id": 88908335, "body": "Tried these and it did not help . Neither did it give any new error or warnings."}], "tags": [], "owner": {"reputation": 146, "user_id": 6742569, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046258202157949/picture?type=large", "display_name": "giudigior", "link": "https://stackoverflow.com/users/6742569/giudigior"}, "is_accepted": false, "score": 0, "last_activity_date": 1529513152, "creation_date": 1529513152, "answer_id": 50953280, "question_id": 50932568, "link": "https://stackoverflow.com/questions/50932568/firebase-not-signing-in-existing-users-in-android-app/50953280#50953280", "title": "Firebase not signing in existing users in android app", "body": "<p>Add in your root-level <code>build.gradle</code> file:</p>\n\n<pre><code>buildscript {  \n         ...\n            dependencies {\n                        classpath 'com.google.gms:google-services:4.0.1' //google-services plugin\n</code></pre>\n\n<p>Then always in the root-level <code>build.gradle</code> file:</p>\n\n<pre><code>allprojects {\n     ...\n        repositories {\n                ...\n                google() //Google's Maven repository\n</code></pre>\n\n<p>At the bottom of your app-leve <code>build.gradle</code> add:</p>\n\n<pre><code>apply plugin: 'com.google.gms.google-services'\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 9548616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Sl5IEOZQkiA/AAAAAAAAAAI/AAAAAAAAABk/EMc3pVY2K1k/photo.jpg?sz=128", "display_name": "Dipesh Sinha", "link": "https://stackoverflow.com/users/9548616/dipesh-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 685, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1552135730, "creation_date": 1529424067, "last_edit_date": 1552135730, "question_id": 50932568, "link": "https://stackoverflow.com/questions/50932568/firebase-not-signing-in-existing-users-in-android-app", "title": "Firebase not signing in existing users in android app", "body": "<p>I am learning kotlin and came across a problem that using firebase, I was not able to sign in with userId that were already registered.\nWhenever I try to sign in using registered email id , this code prints \"trouble signing in\".</p>\n\n<pre><code>        mAuth!!.createUserWithEmailAndPassword(email,pass)\n                .addOnCompleteListener(this){task -&gt;\n                    if(task.isSuccessful){\n                        var currentUser = mAuth!!.currentUser\n                        database.child(\"users\").child(currentUser!!.uid).child(\"email\").setValue(currentUser.email)\n                        val intent = Intent(this,activity_login_2::class.java)\n                        intent.putExtra(\"uid\",currentUser.uid)\n                        this.startActivity(intent)\n                        finish()\n                    }else{\n                        Toast.makeText(this,\"Trouble signing in\",Toast.LENGTH_SHORT).show()\n                    }\n                }\n}\n</code></pre>\n\n<p>update-</p>\n\n<p>This is what warning I get in Logcat whenever i try to login with existing user-></p>\n\n<pre><code>com.example.newu.cht W/BiChannelGoogleApi: [FirebaseAuth: ] getGoogleApiForMethod() returned Gms\n</code></pre>\n\n<p>update-</p>\n\n<p>I tried downgrading firebase version from 11.8.0 to 11.4.2 . But this did not help . It generates following errors:(</p>\n\n<pre><code>Unable to resolve dependency for ':app@debugAndroidTest/compileClasspath': Could\n not resolve com.google.firebase:firebase-core:11.4.2.\nOpen File\nShow Details\n\n\nUnable to resolve dependency for ':app@debugAndroidTest/compileClasspath':     Could\n not resolve com.google.firebase:firebase-auth:11.4.2.\nOpen File\nShow Details\n\n\nUnable to resolve dependency for ':app@debugAndroidTest/compileClasspath':      Could      not resolve com.google.firebase:firebase-storage:11.4.2.\nOpen File\nShow Details\n\n\nUnable to resolve dependency for ':app@debugAndroidTest/compileClasspath':          Could \nnot resolve com.google.firebase:firebase-database:11.4.2.\nOpen File\nShow Details\n</code></pre>\n"}, {"tags": ["java", "android", "android-layout", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "is_accepted": true, "score": 1, "last_activity_date": 1529420267, "creation_date": 1529420267, "answer_id": 50931451, "question_id": 50931332, "link": "https://stackoverflow.com/questions/50931332/method-removealltabs-from-tablayout-not-working/50931451#50931451", "title": "Method removeAllTabs() from TabLayout not working", "body": "<p><code>onDetach</code> is called after the view is already destroyed. Your reference <code>tabLayout</code> will be null here, hence nothing happens. You probably want to remove the tabs in <code>onDestroyView</code> or similar.</p>\n"}], "owner": {"reputation": 2086, "user_id": 6733404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vARvedsWAsM/AAAAAAAAAAI/AAAAAAAAAHc/qeiBs7OBaMY/photo.jpg?sz=128", "display_name": "Abner Esc&#243;cio", "link": "https://stackoverflow.com/users/6733404/abner-esc%c3%b3cio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 50931451, "answer_count": 1, "score": 0, "last_activity_date": 1529420267, "creation_date": 1529419906, "question_id": 50931332, "link": "https://stackoverflow.com/questions/50931332/method-removealltabs-from-tablayout-not-working", "title": "Method removeAllTabs() from TabLayout not working", "body": "<p>I'm facing this issue: everytime my tabs from tabLayout aren't removed</p>\n\n<p>I add tabs inside <code>onCreateView</code> and remove them inside <code>onDetach</code></p>\n\n<p>But when I return to this <code>fragment</code>, my tabs continue on <code>tabLayout</code></p>\n\n<pre><code>class ProductsFragment : Fragment(), TabLayout.OnTabSelectedListener {\n\n    private var tabLayout: TabLayout? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        ...\n        tabLayout = activity!!.findViewById(R.id.tablayout)\n        ...\n    }\n\n    ...\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        //here I'm adding the tabs to tabLayout\n    }\n\n    ...\n\n    override fun onDetach() {\n        super.onDetach()\n        tabLayout?.removeAllTabs()\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1987, "user_id": 1942463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ced12e2371bca0e36ef0bb7cefafd432?s=128&d=identicon&r=PG&f=1", "display_name": "Rajasekaran M", "link": "https://stackoverflow.com/users/1942463/rajasekaran-m"}, "edited": false, "score": 0, "creation_date": 1531136014, "post_id": 50930472, "comment_id": 89467560, "body": "have you fixed this issue?"}, {"owner": {"reputation": 5874, "user_id": 5483091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FjoF7.jpg?s=128&g=1", "display_name": "Alexander Perfilyev", "link": "https://stackoverflow.com/users/5483091/alexander-perfilyev"}, "reply_to_user": {"reputation": 1987, "user_id": 1942463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ced12e2371bca0e36ef0bb7cefafd432?s=128&d=identicon&r=PG&f=1", "display_name": "Rajasekaran M", "link": "https://stackoverflow.com/users/1942463/rajasekaran-m"}, "edited": false, "score": 0, "creation_date": 1531136218, "post_id": 50930472, "comment_id": 89467719, "body": "@RajasekaranM nope, I just replaced method references with lambdas for now"}, {"owner": {"reputation": 1987, "user_id": 1942463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ced12e2371bca0e36ef0bb7cefafd432?s=128&d=identicon&r=PG&f=1", "display_name": "Rajasekaran M", "link": "https://stackoverflow.com/users/1942463/rajasekaran-m"}, "edited": false, "score": 0, "creation_date": 1531136291, "post_id": 50930472, "comment_id": 89467774, "body": "okay did you get the error on specific android version(below android 7)? I&#39;m also getting one error like this but it&#39;s resolved when turn off the instant run."}, {"owner": {"reputation": 5874, "user_id": 5483091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FjoF7.jpg?s=128&g=1", "display_name": "Alexander Perfilyev", "link": "https://stackoverflow.com/users/5483091/alexander-perfilyev"}, "reply_to_user": {"reputation": 1987, "user_id": 1942463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ced12e2371bca0e36ef0bb7cefafd432?s=128&d=identicon&r=PG&f=1", "display_name": "Rajasekaran M", "link": "https://stackoverflow.com/users/1942463/rajasekaran-m"}, "edited": false, "score": 0, "creation_date": 1531136823, "post_id": 50930472, "comment_id": 89468120, "body": "@RajasekaranM I haven&#39;t tried it on anything other than emulator v.26"}, {"owner": {"reputation": 1987, "user_id": 1942463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ced12e2371bca0e36ef0bb7cefafd432?s=128&d=identicon&r=PG&f=1", "display_name": "Rajasekaran M", "link": "https://stackoverflow.com/users/1942463/rajasekaran-m"}, "edited": false, "score": 0, "creation_date": 1531136908, "post_id": 50930472, "comment_id": 89468165, "body": "okay @Alexander thanks"}, {"owner": {"reputation": 2364, "user_id": 383676, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/512533dbca12b5d8f03aade683e2fdd4?s=128&d=identicon&r=PG", "display_name": "fejd", "link": "https://stackoverflow.com/users/383676/fejd"}, "edited": false, "score": 0, "creation_date": 1531166459, "post_id": 50930472, "comment_id": 89485267, "body": "Have you tried with later versions (3.2.0-alpha versions) of the Gradle plugin?"}], "answers": [{"comments": [{"owner": {"reputation": 528, "user_id": 151658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b3981085d9d206cac75dfd3bd6868d?s=128&d=identicon&r=PG", "display_name": "Daniel Rothmaler", "link": "https://stackoverflow.com/users/151658/daniel-rothmaler"}, "reply_to_user": {"reputation": 5874, "user_id": 5483091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FjoF7.jpg?s=128&g=1", "display_name": "Alexander Perfilyev", "link": "https://stackoverflow.com/users/5483091/alexander-perfilyev"}, "edited": false, "score": 0, "creation_date": 1533198922, "post_id": 51265456, "comment_id": 90261618, "body": "Maybe you could try again, now that 1.2.60 has been released... I&#39;m still relativly  sure, that your problem was caused by KT-24825..."}], "tags": [], "owner": {"reputation": 528, "user_id": 151658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0b3981085d9d206cac75dfd3bd6868d?s=128&d=identicon&r=PG", "display_name": "Daniel Rothmaler", "link": "https://stackoverflow.com/users/151658/daniel-rothmaler"}, "is_accepted": true, "score": 1, "last_activity_date": 1531288806, "last_edit_date": 1531288806, "creation_date": 1531226339, "answer_id": 51265456, "question_id": 50930472, "link": "https://stackoverflow.com/questions/50930472/noclassdeffounderror-after-upgrading-kotlin-from-1-2-31-to-1-2-41-1-2-50/51265456#51265456", "title": "NoClassDefFoundError after upgrading Kotlin from 1.2.31 to 1.2.41/1.2.50", "body": "<p>I think this is probably the following Kotlin Bug: <a href=\"https://youtrack.jetbrains.com/issue/KT-24825\" rel=\"nofollow noreferrer\">KT-24825</a></p>\n\n<p>Seems to be fixed in 1.2.60 (build-1.2.60-eap-42).\nMaybe you could <a href=\"https://discuss.kotlinlang.org/t/kotlin-1-2-60-early-access-preview/8282\" rel=\"nofollow noreferrer\">test the EAP</a> (as soon as it is released).\nOtherwise you should report a bug to the <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">Kotlin issue tracker</a>.</p>\n\n<p><strong>Update 2018-07-11</strong><br>\n<a href=\"https://github.com/JetBrains/kotlin/releases/tag/v1.2.60-eap-44\" rel=\"nofollow noreferrer\">Kotlin 1.2.60 RC (build-1.2.60-eap-44)</a> has been released (incl. the fix for <a href=\"https://youtrack.jetbrains.com/issue/KT-24825\" rel=\"nofollow noreferrer\">KT-24825</a>). Could you please check, if it fixes your issue?</p>\n"}], "owner": {"reputation": 5874, "user_id": 5483091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FjoF7.jpg?s=128&g=1", "display_name": "Alexander Perfilyev", "link": "https://stackoverflow.com/users/5483091/alexander-perfilyev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 51265456, "answer_count": 1, "score": 2, "last_activity_date": 1531288806, "creation_date": 1529417208, "last_edit_date": 1530776520, "question_id": 50930472, "link": "https://stackoverflow.com/questions/50930472/noclassdeffounderror-after-upgrading-kotlin-from-1-2-31-to-1-2-41-1-2-50", "title": "NoClassDefFoundError after upgrading Kotlin from 1.2.31 to 1.2.41/1.2.50", "body": "<p>This is the error message:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: Failed resolution of: L**/**/**/**/**/SomeFragment$sam$io_reactivex_functions_Consumer$0;\n</code></pre>\n\n<p>The stack trace points to a function reference in this code snippet</p>\n\n<pre><code>disposables += state.filter { it == IDLE }\n    .subscribe({...}, Timber::e)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "exoplayer"], "answers": [{"tags": [], "owner": {"reputation": 2806, "user_id": 464328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0d3692764da4b32f9160bfbd3e60ac5?s=128&d=identicon&r=PG", "display_name": "Roger Alien", "link": "https://stackoverflow.com/users/464328/roger-alien"}, "is_accepted": false, "score": 0, "last_activity_date": 1534980259, "last_edit_date": 1534980259, "creation_date": 1534977986, "answer_id": 51976168, "question_id": 50929811, "link": "https://stackoverflow.com/questions/50929811/exoplayer-live-seekbar-and-timeshift/51976168#51976168", "title": "Exoplayer live seekbar and timeshift", "body": "<p>Update: seems like there is already existing solutions:</p>\n\n<ol>\n<li><a href=\"https://github.com/google/ExoPlayer/issues/87\" rel=\"nofollow noreferrer\">https://github.com/google/ExoPlayer/issues/87</a></li>\n<li><a href=\"https://github.com/jglanfield/ExoPlayer/tree/jdg-hls-rewind\" rel=\"nofollow noreferrer\">https://github.com/jglanfield/ExoPlayer/tree/jdg-hls-rewind</a></li>\n</ol>\n\n<p>You should take a look at <a href=\"https://google.github.io/ExoPlayer/doc/reference/com/google/android/exoplayer2/Timeline.html\" rel=\"nofollow noreferrer\">TimeLine</a> object and use it depending on you seekbar update logic. </p>\n\n<p>Simple approach would be to store start time on your own in the code and then update it as frequent as you want with increasing playback and buffer.</p>\n\n<p>More helpful answer would be if you would post some code that you already have, so anyone can guide you towards solution that will work for you.</p>\n"}], "owner": {"reputation": 2610, "user_id": 986739, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/gyeDp.jpg?s=128&g=1", "display_name": "sma6871", "link": "https://stackoverflow.com/users/986739/sma6871"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 931, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534980259, "creation_date": 1529415275, "question_id": 50929811, "link": "https://stackoverflow.com/questions/50929811/exoplayer-live-seekbar-and-timeshift", "title": "Exoplayer live seekbar and timeshift", "body": "<p>I use Exoplayer 2.8 to show HLS videos in my app.</p>\n\n<p>For fix time contents seekbar works perfectly, but its useless for live content.</p>\n\n<p>I want to show seekbar for past 12 hours and use it for timeshift, how can I do that?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 489, "user_id": 3284072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzjQU.jpg?s=128&g=1", "display_name": "pop", "link": "https://stackoverflow.com/users/3284072/pop"}, "edited": false, "score": 0, "creation_date": 1529413993, "post_id": 50929270, "comment_id": 88857529, "body": "Create a base activity class (lets call it BaseActivity) which will have the common method and then make Activity1 and Activity2 extend BaseActivity."}, {"owner": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "edited": false, "score": 0, "creation_date": 1529414630, "post_id": 50929270, "comment_id": 88857947, "body": "you can use Kotlin extension functions. i.e. define additional functionality without creating subclasses"}], "answers": [{"tags": [], "owner": {"reputation": 9286, "user_id": 469080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33d6ef3db3ec7b1f7bb10541dca965ef?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Dodd", "link": "https://stackoverflow.com/users/469080/michael-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1529414934, "last_edit_date": 1529414934, "creation_date": 1529414002, "answer_id": 50929418, "question_id": 50929270, "link": "https://stackoverflow.com/questions/50929270/how-to-pass-different-types-of-activities/50929418#50929418", "title": "How to pass different types of activities", "body": "<p>If you're looking for two separate, unrelated classes to have the same method declared, then an <a href=\"https://docs.oracle.com/javase/tutorial/java/concepts/interface.html\" rel=\"nofollow noreferrer\"><code>interface</code></a> is what you're looking for. Take the following example interface:</p>\n\n<pre><code>public interface MyInterface {\n    void method(AppCompatActivity activity);\n}\n</code></pre>\n\n<p>Both of your activities can now <code>implement</code> this interface and pass themselves as a parameter as they both <code>extend AppCompatActivity</code>. As a result they're forced to define this method e.g.</p>\n\n<pre><code>public Activity1 extends AppCompatActivity implements MyInterface {\n\n    @Override\n    public void onResume(Bundle savedInstanceState) {\n         super(savedInstanceState);\n         method(this);\n    }\n\n    @Override\n    public void method(AppCompatActivity activity) {\n         // Definition goes here \n    }\n}\n</code></pre>\n\n<p>Likewise you can then refer to either of your activities from another class as an instance of <code>MyInterface</code>, e.g.</p>\n\n<pre><code>// Not an actual way of declaring an Activity but just for demonstration purposes\nMyInterface activity1 = new Activity1();\nMyInterface activity1 = new Activity2();\n</code></pre>\n\n<p>As both of your classes extend <code>AppCompatActivity</code>, <a href=\"https://stackoverflow.com/a/50929472/469080\">Sagar's answer</a> will also work equally well in this instance. However, this solution will work regardless of inheritance path.</p>\n\n<hr>\n\n<p><strong>EDIT</strong> Apologies, I've only just noticed the [Kotlin] tag, it wasn't immediately clear in the question. The Kotlin equivalent would be:</p>\n\n<pre><code>public Activity1 : AppCompatActivity(), MyInterface {\n    override fun onResume(savedInstanceState: Bundle) {\n         super(savedInstanceState);\n         method(this);\n    }\n\n    override fun method(activity: AppCompatActivity) {\n         // Definition goes here \n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 4258204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-07SR9SdmNNw/AAAAAAAAAAI/AAAAAAAAAJw/PRwKOTHpzK0/photo.jpg?sz=128", "display_name": "Jan Petrskovsk&#253;", "link": "https://stackoverflow.com/users/4258204/jan-petrskovsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1529480360, "post_id": 50929472, "comment_id": 88882985, "body": "I think I did not describe my needs correctly. I will present a little bit my application. Main activity is map (webview). There are functions which calls different APIs using volley library. After getting response I need to show results on map activity. Until now I always passed activity and called activity methods after processing data from API. Is it wrong approach? I still dont know how to do it correct way. in activity methods i change lot of variables, views etc.."}, {"owner": {"reputation": 20237, "user_id": 4390381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLMC7.jpg?s=128&g=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/4390381/sagar"}, "reply_to_user": {"reputation": 69, "user_id": 4258204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-07SR9SdmNNw/AAAAAAAAAAI/AAAAAAAAAJw/PRwKOTHpzK0/photo.jpg?sz=128", "display_name": "Jan Petrskovsk&#253;", "link": "https://stackoverflow.com/users/4258204/jan-petrskovsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1529480956, "post_id": 50929472, "comment_id": 88883339, "body": "@JanPetrskovsk&#253; you can implement a callback interface instead of passing the activity object directly. Once the API call is done, you can simply call the method in the interface to get status of the API call"}, {"owner": {"reputation": 69, "user_id": 4258204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-07SR9SdmNNw/AAAAAAAAAAI/AAAAAAAAAJw/PRwKOTHpzK0/photo.jpg?sz=128", "display_name": "Jan Petrskovsk&#253;", "link": "https://stackoverflow.com/users/4258204/jan-petrskovsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1529481796, "post_id": 50929472, "comment_id": 88883861, "body": "I have callback interface, problem is, that my volley requests are in separate classes."}], "tags": [], "owner": {"reputation": 20237, "user_id": 4390381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLMC7.jpg?s=128&g=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/4390381/sagar"}, "is_accepted": true, "score": 0, "last_activity_date": 1529415761, "last_edit_date": 1529415761, "creation_date": 1529414147, "answer_id": 50929472, "question_id": 50929270, "link": "https://stackoverflow.com/questions/50929270/how-to-pass-different-types-of-activities/50929472#50929472", "title": "How to pass different types of activities", "body": "<p>Its not a great idea to attempt to pass the Activity object reference.</p>\n\n<ul>\n<li>If the method is suppose to be Activity specific then you can simply create a BaseActivity (which extends <code>AppCompatActivity</code>)  and make <code>Activity1</code> &amp; <code>Activity2</code> extend <code>BaseActivity</code></li>\n</ul>\n\n<p><strong>BaseActivity.java</strong> </p>\n\n<pre><code>class BaseActivity : AppCompatActivity() {\n   ...\n   fun commonMethod(){\n       ...\n   }\n}\n</code></pre>\n\n<p><strong>Activity1.java</strong></p>\n\n<pre><code>class Activity1 : BaseActivity() {\n   ...\n   //use commonMethod() where ever needed.\n}\n</code></pre>\n\n<p><strong>Activity2.java</strong></p>\n\n<pre><code>class Activity2 : BaseActivity()  {\n   ...\n   //use commonMethod() where ever needed.\n}\n</code></pre>\n\n<ul>\n<li>If the target method is an utility method then you should create a separate Utility class and make that method as static method. If needed, you can pass <code>Context</code> Obj as method parameter.</li>\n</ul>\n"}], "owner": {"reputation": 69, "user_id": 4258204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-07SR9SdmNNw/AAAAAAAAAAI/AAAAAAAAAJw/PRwKOTHpzK0/photo.jpg?sz=128", "display_name": "Jan Petrskovsk&#253;", "link": "https://stackoverflow.com/users/4258204/jan-petrskovsk%c3%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 50929472, "answer_count": 2, "score": 1, "last_activity_date": 1529416791, "creation_date": 1529413608, "last_edit_date": 1529415682, "question_id": 50929270, "link": "https://stackoverflow.com/questions/50929270/how-to-pass-different-types-of-activities", "title": "How to pass different types of activities", "body": "<p>I have class <code>Activity1</code> extends <code>AppCompatActivity</code> and class <code>Activity2</code> extends <code>AppCompatActivity</code>. I would like to call same method in both activities:</p>\n\n<pre><code>method(Activity1.this)   - parameter (Activity1 activity)\n\nmethod(Activity2.this)   - parameter (Activity2 activity)\n</code></pre>\n\n<p>Of course something like this doesnt work, is it possible to use <code>Bundle</code> or something else? I just want to have general methods where I can pass different <code>activities</code> and later on call their methods.</p>\n"}, {"tags": ["java", "android", "kotlin", "annotations", "dagger"], "answers": [{"comments": [{"owner": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "edited": false, "score": 0, "creation_date": 1538417929, "post_id": 52479051, "comment_id": 92127988, "body": "This is a correct solution for you, because <code>provideInterceptor</code> cannot return <code>null</code>, but <a href=\"https://developer.android.com/reference/android/nfc/NfcAdapter#getDefaultAdapter(android.content.Context)\" rel=\"nofollow noreferrer\"><code>NfcAdapter.getDefaultAdapter(Context)</code> is allowed to return <code>null</code></a>. Therefore, deleting <code>@Nullable</code> is a bad idea."}], "tags": [], "owner": {"reputation": 1727, "user_id": 8383332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2mbW.jpg?s=128&g=1", "display_name": "Soon Santos", "link": "https://stackoverflow.com/users/8383332/soon-santos"}, "is_accepted": false, "score": 1, "last_activity_date": 1537790733, "creation_date": 1537790733, "answer_id": 52479051, "question_id": 50928857, "link": "https://stackoverflow.com/questions/50928857/nfcadapter-is-not-nullable-but-is-being-provided-by-provides-singleton-javax/52479051#52479051", "title": "NfcAdapter is not nullable, but is being provided by @Provides @Singleton @javax.annotation.Nullable android.nfc.NfcAdapter", "body": "<p><strong>Brief Answer</strong></p>\n\n<p>--> Delete <code>@Nullable</code> line</p>\n\n<p>It happens because you put the <code>@Nullable</code> annotation in a method that can not return null.  Android Studio is telling you that <code>NfcAdapter</code> can not be null. Deleting the <code>@Nullable</code> annotation should work.</p>\n\n<p><strong>Deep explanation</strong></p>\n\n<p>In my case, I had this method in my dagger 2 module.</p>\n\n<pre><code>@Provides\n@Singleton\n@Nullable\nAuthenticationInterceptor provideInterceptor(@Nullable String authToken) {\n    if (authToken != null) {\n        return new AuthenticationInterceptor(authToken);\n    } else {\n        return null;\n    }\n}\n</code></pre>\n\n<p>I found out that my class AuthenticationInterceptor which implements Interceptor</p>\n\n<pre><code>public class AuthenticationInterceptor implements Interceptor {\n}\n</code></pre>\n\n<p>couldn't return null (and I was returning null from it in case there was no authToken), then AS gave me the following error.</p>\n\n<pre><code>AuthenticationInterceptor is not nullable, but is being provided by @Provides @Singleton ...\n</code></pre>\n\n<p>Not returning null from my method resolved the issue. (Removing the @Nullable annotation and excluding the return null).</p>\n\n<pre><code>@Provides\n@Singleton\nAuthenticationInterceptor provideInterceptor(@Nullable String authToken) {\n    return new AuthenticationInterceptor(authToken);\n}\n</code></pre>\n\n<p><strong>Conclusion</strong></p>\n\n<p>I did that because I was already handling these nullable things in the activities. In case the user has no authorization token, I didn't even try to make the retrofit call. I just asked him to sign in.</p>\n"}, {"tags": [], "owner": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "is_accepted": false, "score": 4, "last_activity_date": 1556644653, "last_edit_date": 1556644653, "creation_date": 1538422260, "answer_id": 52597682, "question_id": 50928857, "link": "https://stackoverflow.com/questions/50928857/nfcadapter-is-not-nullable-but-is-being-provided-by-provides-singleton-javax/52597682#52597682", "title": "NfcAdapter is not nullable, but is being provided by @Provides @Singleton @javax.annotation.Nullable android.nfc.NfcAdapter", "body": "<p>You'll need to add a <code>@Nullable</code> annotation to the field. Any annotation that has the simple name \"Nullable\" will do, as listed in <a href=\"https://google.github.io/dagger/api/latest/dagger/Provides.html\" rel=\"nofollow noreferrer\">the docs</a> and <a href=\"https://github.com/google/dagger/blob/dagger-2.17/java/dagger/model/DependencyRequest.java#L51-L60\" rel=\"nofollow noreferrer\">the code</a>.</p>\n\n<p>Though you can mark the nullability in Kotlin using <code>?</code>, this does not publish the \"nullable\" information from Kotlin to Java: a Java processor like Dagger cannot read the class file to determine that the field is meant to be nullable. (This is <a href=\"https://stackoverflow.com/q/41097546/1426891\">possible through some Kotlin reflection</a>, but Dagger does not do it as of v2.17.) Though your code is safe, Dagger cannot determine that by reading the bytecode, and it throws an error.</p>\n"}], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1556644653, "creation_date": 1529412475, "last_edit_date": 1529594092, "question_id": 50928857, "link": "https://stackoverflow.com/questions/50928857/nfcadapter-is-not-nullable-but-is-being-provided-by-provides-singleton-javax", "title": "NfcAdapter is not nullable, but is being provided by @Provides @Singleton @javax.annotation.Nullable android.nfc.NfcAdapter", "body": "<p>I have problem with returning nullable NfcAdapter through my Dagger module. Here it is:</p>\n\n<pre><code>  @Provides\n  @Singleton\n  @Nullable\n  public NfcAdapter provideNfcAdapter() {\n    return NfcAdapter.getDefaultAdapter(context);\n  }\n</code></pre>\n\n<p>However the project can't be build and i receive error message:</p>\n\n<blockquote>\n  <p>error: [dagger.android.AndroidInjector.inject(T)] android.nfc.NfcAdapter is not nullable, but is being provided by @Provides @Singleton @javax.annotation.Nullable android.nfc.NfcAdapter</p>\n</blockquote>\n\n<p>How it can be resolved? I have similiar provide method for my BluetoothAdapter and it works as expected.</p>\n\n<p>I try to initialize it as below in my Activity:</p>\n\n<pre><code>var nfcAdapter: NfcAdapter? = null @Inject set\n</code></pre>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 77900, "user_id": 238134, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d80ce5271185447eb06b360959acd71f?s=128&d=identicon&r=PG", "display_name": "deamon", "link": "https://stackoverflow.com/users/238134/deamon"}, "edited": false, "score": 0, "creation_date": 1529413007, "post_id": 50928829, "comment_id": 88856856, "body": "It looks like you have an SSL connection problem. Maybe you need to set a proxy server for Gradle. Just create a file <code>gradle.properties</code> with <code>systemProp.https.proxyHost=yourServer</code> as content."}, {"owner": {"reputation": 379, "user_id": 8243414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e28f648f7bed8f572e4297c474536c?s=128&d=identicon&r=PG&f=1", "display_name": "Iurii  Kvashuk", "link": "https://stackoverflow.com/users/8243414/iurii-kvashuk"}, "reply_to_user": {"reputation": 77900, "user_id": 238134, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d80ce5271185447eb06b360959acd71f?s=128&d=identicon&r=PG", "display_name": "deamon", "link": "https://stackoverflow.com/users/238134/deamon"}, "edited": false, "score": 0, "creation_date": 1529415729, "post_id": 50928829, "comment_id": 88858724, "body": "it looks like that. But I am buiding up maven projects at the same time and it is successful without any proxy-server"}, {"owner": {"reputation": 77900, "user_id": 238134, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d80ce5271185447eb06b360959acd71f?s=128&d=identicon&r=PG", "display_name": "deamon", "link": "https://stackoverflow.com/users/238134/deamon"}, "edited": false, "score": 1, "creation_date": 1529418447, "post_id": 50928829, "comment_id": 88860571, "body": "I&#39;ve just created a sample project with your gradle file and it works fine. So it must have something to do with your environment configuration (network etc.). Tested with Gradle 4.8."}, {"owner": {"reputation": 379, "user_id": 8243414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e28f648f7bed8f572e4297c474536c?s=128&d=identicon&r=PG&f=1", "display_name": "Iurii  Kvashuk", "link": "https://stackoverflow.com/users/8243414/iurii-kvashuk"}, "reply_to_user": {"reputation": 77900, "user_id": 238134, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d80ce5271185447eb06b360959acd71f?s=128&d=identicon&r=PG", "display_name": "deamon", "link": "https://stackoverflow.com/users/238134/deamon"}, "edited": false, "score": 0, "creation_date": 1529418575, "post_id": 50928829, "comment_id": 88860645, "body": "Thank you. I will try to do that."}], "owner": {"reputation": 379, "user_id": 8243414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e28f648f7bed8f572e4297c474536c?s=128&d=identicon&r=PG&f=1", "display_name": "Iurii  Kvashuk", "link": "https://stackoverflow.com/users/8243414/iurii-kvashuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1038, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529413030, "creation_date": 1529412387, "question_id": 50928829, "link": "https://stackoverflow.com/questions/50928829/could-not-configure-gradle-project-kotlin-code", "title": "Could not configure Gradle project (Kotlin code)", "body": "<p>I am a pretty fresh in Gradle. I'm trying to build up a project Kotlin code with Gradle.\nI have spent some time to learn that by following these instructions: <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/using-gradle.html</a></p>\n\n<p>And so far, I have not succeeded in it and got some errors.</p>\n\n<p>My build.gradle is shown below:</p>\n\n<pre><code>group = \"kotlin\"\nversion = \"1.0-SNAPSHOT\"\n\nbuildscript {\n    ext.kotlin_version = '1.2.50'\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\napply plugin: \"kotlin\"\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\n</code></pre>\n\n<p>And I got the following error </p>\n\n<pre><code>org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':classpath'.\n....\nCaused by: org.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve org.jetbrains.kotlin:kotlin-gradle-plugin:1.2.50.\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/YtpXJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YtpXJ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["kotlin", "kotlin-reified-type-parameters"], "answers": [{"comments": [{"owner": {"reputation": 2512, "user_id": 650027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6d1507ab9996c8ba8d73bef048b08f96?s=128&d=identicon&r=PG", "display_name": "jchristof", "link": "https://stackoverflow.com/users/650027/jchristof"}, "edited": false, "score": 0, "creation_date": 1529412931, "post_id": 50928691, "comment_id": 88856791, "body": "Many thanks - I&#39;ll put all of your suggestions into production."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 3, "last_activity_date": 1529413011, "last_edit_date": 1529413011, "creation_date": 1529411952, "answer_id": 50928691, "question_id": 50928378, "link": "https://stackoverflow.com/questions/50928378/general-string-extension-conversion-using-reified-typing/50928691#50928691", "title": "General String extension conversion using reified typing", "body": "<ol>\n<li><p>You can only constrain <code>T</code> if you have a common supertype between the types you want to handle. Of course you can't add supertypes to the built-in <code>Int</code>, <code>Float</code>, etc. classes, but these are all <code>Number</code>s, which you could use:</p>\n\n<pre><code>inline fun &lt;reified T : Number&gt; String.convertTo(): T\n</code></pre>\n\n<p>However, so are <code>Byte</code>, <code>Long</code>, and <code>Short</code>, so you'd still have to handle those... But more importantly, <code>Number</code> is just an abstract class and not a sealed one (you could plausibly implement your own if you needed to), so the <code>when</code> expression has no way of being exhaustive in this case. So you'll just have to keep the <code>else</code> branch, unfortunately.</p></li>\n<li><p>Good news for this part of the question, using just <code>::class</code> and comparing <code>KClass</code> instances should work (I've also removed some braces):</p>\n\n<pre><code>inline fun &lt;reified T : Number&gt; String.convertTo(): T {\n    return when (T::class) {\n        Int::class -&gt; (this.toIntOrNull() ?: 0) as T\n        Float::class -&gt; (this.toFloatOrNull() ?: 0f) as T\n        Double::class -&gt; (this.toDoubleOrNull() ?: 0.0) as T\n        else -&gt; throw IllegalArgumentException(\"Can't convert type $(T::class.simpleName)\")\n    }\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 2512, "user_id": 650027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6d1507ab9996c8ba8d73bef048b08f96?s=128&d=identicon&r=PG", "display_name": "jchristof", "link": "https://stackoverflow.com/users/650027/jchristof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 50928691, "answer_count": 1, "score": 0, "last_activity_date": 1529413011, "creation_date": 1529411039, "question_id": 50928378, "link": "https://stackoverflow.com/questions/50928378/general-string-extension-conversion-using-reified-typing", "title": "General String extension conversion using reified typing", "body": "<p>I started working with the reified keyword when attempting to implement a general String to numeric String extension method. The following compiles and runs, but I'd like to improve it before using it in production code:</p>\n\n<pre><code>inline fun &lt;reified T&gt; String.convertTo():T {\n    return when(T::class.simpleName){\n        Int::class.simpleName-&gt;{(this.toIntOrNull() ?: 0) as T}\n        Float::class.simpleName-&gt;{(this.toFloatOrNull() ?: 0f) as T}\n        Double::class.simpleName-&gt;{(this.toDoubleOrNull() ?: 0.0) as T}\n        else -&gt; throw IllegalArgumentException(\"Can't convert type $(T::class.simpleName)\")\n    }\n}\n</code></pre>\n\n<p>I like the consise caller code for this:</p>\n\n<pre><code>val time:Int by lazy {((evaluateExpression(\"time\").convertTo&lt;Float&gt;().times(1000f))).toInt()}\n</code></pre>\n\n<p>Two things I'd like to do if it's possible in this scenario:</p>\n\n<p>1) I haven't been able to figure the correct syntax to constrain reified T to only the allowed types - I'd like to exhaust the when conditions and remove the else->throw</p>\n\n<p>2) T::class.java doesn't compare correctly to the other types' class type (i.e. Int::class.java) so I've resorted to comparing simpleName strings - what would be better?</p>\n\n<p>Is there a way to restrict the type and a better way to compare class types here?</p>\n"}, {"tags": ["java", "android", "json", "kotlin"], "comments": [{"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1529441475, "post_id": 50928332, "comment_id": 88871986, "body": "&quot;Does not work&quot; means exactly what?"}, {"owner": {"reputation": 1, "user_id": 9941217, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2qbunbkNgFg/AAAAAAAAAAI/AAAAAAAAAPg/qKqWbqLClj0/photo.jpg?sz=128", "display_name": "Taehoon", "link": "https://stackoverflow.com/users/9941217/taehoon"}, "reply_to_user": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1529459856, "post_id": 50928332, "comment_id": 88876447, "body": "It does not seem to be json parsing . Build will be OK, but the app will be terminated."}], "answers": [{"tags": [], "owner": {"reputation": 6622, "user_id": 3176419, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3e847cffa08386a9f91307038942161a?s=128&d=identicon&r=PG", "display_name": "lucumt", "link": "https://stackoverflow.com/users/3176419/lucumt"}, "is_accepted": false, "score": 0, "last_activity_date": 1529411163, "creation_date": 1529411163, "answer_id": 50928422, "question_id": 50928332, "link": "https://stackoverflow.com/questions/50928332/error-json-parsing/50928422#50928422", "title": "Error json parsing", "body": "<p>Since I do not see your error message,but I think you need to change your code when reading data from <code>inputStream</code></p>\n\n<p>Change </p>\n\n<pre><code>while (line != null) {\n  line = bufferedReader.readLine()\n  data += line\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>while ((line = bufferedReader.readLine()) != null) {\n  data += line\n}\n</code></pre>\n\n<p>By doing this,you can avoid null value to your json string</p>\n"}], "owner": {"reputation": 1, "user_id": 9941217, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2qbunbkNgFg/AAAAAAAAAAI/AAAAAAAAAPg/qKqWbqLClj0/photo.jpg?sz=128", "display_name": "Taehoon", "link": "https://stackoverflow.com/users/9941217/taehoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529411163, "creation_date": 1529410922, "question_id": 50928332, "link": "https://stackoverflow.com/questions/50928332/error-json-parsing", "title": "Error json parsing", "body": "<p>Changed Java code to Kotlin code. This is Kotlin and I don't think the json parsing that used to work. It worked in Java. So, what solution could there be?</p>\n\n<pre>\npackage io.github.taehoon02.dimibob\n\n    import android.os.AsyncTask\n    import org.json.JSONException\n    import org.json.JSONObject\n    import java.io.BufferedReader\n    import java.io.IOException\n    import java.io.InputStreamReader\n    import java.net.HttpURLConnection\n    import java.net.MalformedURLException\n    import java.net.URL\n    import java.text.SimpleDateFormat\n    import java.util.*\n\n    class meals : AsyncTask() {\n        var data = \"\"\n        var breakfast = \"\"\n        var lunch = \"\"\n        var dinner = \"\"\n        var snack = \"\"\n\n        override fun doInBackground(vararg params: Void): Void? {\n            try {\n                val today : Calendar = Calendar.getInstance()\n                val format = SimpleDateFormat(\"yyyyMMdd\").format(today.time)\n\n                val url = URL(\"https://api.dimigo.in/dimibobs/\" + format)\n                val httpURLConnection = url.openConnection() as HttpURLConnection\n                val inputStream = httpURLConnection.inputStream\n                val bufferedReader = BufferedReader(InputStreamReader(inputStream))\n                var line: String? = \"\"\n                while (line != null) {\n                    line = bufferedReader.readLine()\n                    data += line\n                }\n\n                val jsonObject = JSONObject(data)\n                breakfast = jsonObject.get(\"breakfast\") as String\n                lunch = jsonObject.get(\"lunch\") as String\n                dinner = jsonObject.get(\"dinner\") as String\n                snack = jsonObject.get(\"snack\") as String\n\n            } catch (e: MalformedURLException) {\n                e.printStackTrace()\n            } catch (e: IOException) {\n                e.printStackTrace()\n            } catch (e: JSONException) {\n                e.printStackTrace()\n            }\n\n            return null\n        }\n\n    }\n</pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 5726, "user_id": 3548046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oyTAQ.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/3548046/umair"}, "edited": false, "score": 0, "creation_date": 1529410717, "post_id": 50928141, "comment_id": 88855317, "body": "can you post your build.gradle file for your module also ?"}], "answers": [{"comments": [{"owner": {"reputation": 11723, "user_id": 3356777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1c7bee1f2c7ba7f81ddb902b83626558?s=128&d=identicon&r=PG&f=1", "display_name": "attdona", "link": "https://stackoverflow.com/users/3356777/attdona"}, "edited": false, "score": 0, "creation_date": 1529412260, "post_id": 50928504, "comment_id": 88856324, "body": "Many Thanks! Just a comment about <code>stdlib-jre7</code>: it was configured automatically by the new project wizard of android studio, not by me ...very strange, perhaps I did something wrong when creating the project."}, {"owner": {"reputation": 5726, "user_id": 3548046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oyTAQ.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/3548046/umair"}, "reply_to_user": {"reputation": 11723, "user_id": 3356777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1c7bee1f2c7ba7f81ddb902b83626558?s=128&d=identicon&r=PG&f=1", "display_name": "attdona", "link": "https://stackoverflow.com/users/3356777/attdona"}, "edited": false, "score": 0, "creation_date": 1529413192, "post_id": 50928504, "comment_id": 88856981, "body": "@attdona no you didn&#39;t do anything wrong. Android studio by default  configures stdlib-jre7 and then gives the warning :P."}], "tags": [], "owner": {"reputation": 5726, "user_id": 3548046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oyTAQ.jpg?s=128&g=1", "display_name": "Umair", "link": "https://stackoverflow.com/users/3548046/umair"}, "is_accepted": true, "score": 1, "last_activity_date": 1538044401, "last_edit_date": 1538044401, "creation_date": 1529411413, "answer_id": 50928504, "question_id": 50928141, "link": "https://stackoverflow.com/questions/50928141/android-studio-3-latest-plugin-version-installed-but-outdated-runtime-warning/50928504#50928504", "title": "Android Studio 3: latest plugin version installed but outdated runtime warning", "body": "<p>It seems like your <code>build.gradle</code> needs changing. Do it like this: </p>\n\n<p>You are using <code>stdlib-jre7</code>this instead of <code>stdlib-jdk7</code> because <code>stdlib-jre7</code> is <strong>deprecated</strong> now, that's why you are getting this warning.</p>\n\n<pre><code>dependencies {\nimplementation fileTree(dir: 'libs', include: ['*.jar'])\nimplementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\nimplementation 'com.prolificinteractive:material-calendarview:1.4.0'\nimplementation 'com.android.support:appcompat-v7:27.0.0'\nimplementation 'com.android.support:multidex:1.0.3'\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'com.android.support.test:runner:1.0.1'\nandroidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'\n\n }\n\nallprojects {\n    repositories {\n        maven { url \"https://jitpack.io\" }\n        mavenCentral()\n        google()\n    }\n</code></pre>\n"}], "owner": {"reputation": 11723, "user_id": 3356777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1c7bee1f2c7ba7f81ddb902b83626558?s=128&d=identicon&r=PG&f=1", "display_name": "attdona", "link": "https://stackoverflow.com/users/3356777/attdona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 50928504, "answer_count": 1, "score": 0, "last_activity_date": 1538044401, "creation_date": 1529410318, "last_edit_date": 1529410990, "question_id": 50928141, "link": "https://stackoverflow.com/questions/50928141/android-studio-3-latest-plugin-version-installed-but-outdated-runtime-warning", "title": "Android Studio 3: latest plugin version installed but outdated runtime warning", "body": "<p>On my Android Studio 3.1.3 a new project with this <code>build.gradle</code>:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.50'\n    repositories {\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.1.3'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n       // NOTE: Do not place your application dependencies here; they belong\n       // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>It gives this warning message:</p>\n\n<pre><code>Outdated Kotlin Runtime\n        Your version of Kotlin runtime in 'Gradle: org.jetbrains.kotlin:kotlin-stdlib:1.2.30@jar' library is 1.2.30-release-78 (1.2.30), while plugin version is 1.2.50-release-Studio3.1-1.\n        Runtime library should be updated to avoid compatibility problems.\n        Update Runtime Ignore\n</code></pre>\n\n<p>What are the steps for upgrading the kotlin runtime library that is outdated?</p>\n\n<p>My <code>app/build.gradle</code>:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"org.pilab.toxx\"\n        minSdkVersion 15\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:28.0.0-alpha3'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.2'\n    implementation 'com.android.support:design:28.0.0-alpha3'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n}\n</code></pre>\n"}, {"tags": ["android", "multithreading", "kotlin", "coroutine", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 4613032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LzN3H.jpg?s=128&g=1", "display_name": "Viking93", "link": "https://stackoverflow.com/users/4613032/viking93"}, "edited": false, "score": 0, "creation_date": 1529407387, "post_id": 50926979, "comment_id": 88853358, "body": "The Question is, Whether I should give control \u2018to execute Non-UI dependent heavy task on any thread to developer\u2019 or I shouldn\u2019t."}, {"owner": {"reputation": 311, "user_id": 2445742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jkdx2.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/2445742/nick"}, "reply_to_user": {"reputation": 239, "user_id": 4613032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LzN3H.jpg?s=128&g=1", "display_name": "Viking93", "link": "https://stackoverflow.com/users/4613032/viking93"}, "edited": false, "score": 1, "creation_date": 1529407697, "post_id": 50926979, "comment_id": 88853533, "body": "@Viking93 depends on what are you trying to do. If you are creating public API of a library it&#39;s better to delegate threading work to developer because you shouldn&#39;t force other developers to use Kotlin, coroutines, etc.  Otherwise, if this code will be used within your team only, my example is what you need because it uses your stack of technologies and helps to avoid possible threading problems (you can specify coroutine context only once)."}], "tags": [], "owner": {"reputation": 311, "user_id": 2445742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jkdx2.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/2445742/nick"}, "is_accepted": false, "score": 1, "last_activity_date": 1529406607, "creation_date": 1529406607, "answer_id": 50926979, "question_id": 50926125, "link": "https://stackoverflow.com/questions/50926125/method-declaration-kotlin-async/50926979#50926979", "title": "Method Declaration kotlin async{}", "body": "<p>Consider to use <code>withContext()</code> instead of <code>async{}.await()</code> in your case.</p>\n\n<p>Regarding your question, IMHO, it's better to use construction like this:</p>\n\n<pre><code>suspend fun methodName(image: Bitmap?): String? = withContext(CommonPool) {\n   // heavy task\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1307, "user_id": 4681367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83a0416184c6ffe72aac807e2feac5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel Briand", "link": "https://stackoverflow.com/users/4681367/lionel-briand"}, "is_accepted": true, "score": 1, "last_activity_date": 1529436662, "last_edit_date": 1529436662, "creation_date": 1529415779, "answer_id": 50929990, "question_id": 50926125, "link": "https://stackoverflow.com/questions/50926125/method-declaration-kotlin-async/50929990#50929990", "title": "Method Declaration kotlin async{}", "body": "<p>I believe the <code>suspend</code> keyword is a strong warning for the user to prevent a particular function to be used in sensitive threads. But it may not be always the case. as said in <a href=\"https://kotlinlang.org/docs/reference/coroutines.html#suspending-functions\" rel=\"nofollow noreferrer\">coroutines documentation</a> :</p>\n\n<blockquote>\n  <p>the library can decide to proceed without suspension, if the result for the call in question is already available </p>\n</blockquote>\n\n<p>If the \"heavy task\" is meant to be straightforward. (example: copying a file) I personally just add suspend to the function without creating a coroutine. The user is in full charge of where this function will be called.</p>\n\n<pre><code>@Throws(IOException::class)\nsuspend fun copy(input: File, output: File) {\n   //copying\n}\n</code></pre>\n\n<p>If the \"heavy task\" is composed of others <code>suspend</code> functions. The warning is generally the <code>couroutineContext</code> in the function parameter. And internally it use functions like <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/with-context.html\" rel=\"nofollow noreferrer\"><code>withContext()</code></a>. </p>\n\n<blockquote>\n  <p><em>withContext</em> : suspends until it completes, and returns the result</p>\n</blockquote>\n\n<pre><code>@Throws(IOException::class)\nsuspend fun copyMultiple(context: CoroutineContext, pairFiles: List&lt;Pair&lt;File, File&gt;&gt;) {\n    pairFiles.forEach { (input, output) -&gt;\n        withContext(context) { \n            copy(input, output)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 239, "user_id": 4613032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LzN3H.jpg?s=128&g=1", "display_name": "Viking93", "link": "https://stackoverflow.com/users/4613032/viking93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 1, "accepted_answer_id": 50929990, "answer_count": 2, "score": 3, "last_activity_date": 1529436662, "creation_date": 1529403970, "last_edit_date": 1529409484, "question_id": 50926125, "link": "https://stackoverflow.com/questions/50926125/method-declaration-kotlin-async", "title": "Method Declaration kotlin async{}", "body": "<p>I was wondering what would be the correct declaration for a long running task.</p>\n\n<pre><code>suspend fun methodName(image: Bitmap?): String? = async {\n   // heavy task\n}.await()\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>fun methodName(image: Bitmap?): String? {\n   //heavyTask\n}\n</code></pre>\n\n<p>And in code use</p>\n\n<pre><code>async{\n   methodName()\n}.await()\n</code></pre>\n\n<p>The First one restricts the heavy operation to be performed on the background thread always. So, it's safe (In a way that it will be run on background thread, so that new Devs will be sure to use it in suspendable construct).</p>\n\n<p>Which is the better approach?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1529404632, "post_id": 50925729, "comment_id": 88851703, "body": "<code>kotlinc</code> already does compile to bytecode, just like <code>javac</code>"}, {"owner": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "reply_to_user": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1529404761, "post_id": 50925729, "comment_id": 88851780, "body": "I&#39;m aware of that"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1529404962, "post_id": 50925729, "comment_id": 88851907, "body": "do you mean mixing Java and Kotlin code in the same file? Unfortunately that&#39;s not possible"}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1529405176, "post_id": 50925729, "comment_id": 88852020, "body": "then I don&#39;t understand what you mean by &quot; replaced with bytecode as it was compiled by javac&quot; - since both bytecodes are basically identical"}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1529405279, "post_id": 50925729, "comment_id": 88852085, "body": "ah, do you mean ignoring all kotlin custom things, like <code>Intrinsics.checkParameterIsNotNull</code>?"}, {"owner": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1529405524, "post_id": 50925729, "comment_id": 88852231, "body": "for instance use Java&#39;s <code>assert</code> statement. but as @user2340612 mentioned, seems it&#39;s impossible"}, {"owner": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "reply_to_user": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1529407543, "post_id": 50925729, "comment_id": 88853444, "body": "@Lovis or just use plain old <code>for(int i = 0; i &lt; size; i++)</code> :)"}], "answers": [{"tags": [], "owner": {"reputation": 13739, "user_id": 38333, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e2ea7c27233a9019a1f91a821726a4d4?s=128&d=identicon&r=PG", "display_name": "cd1", "link": "https://stackoverflow.com/users/38333/cd1"}, "is_accepted": false, "score": 1, "last_activity_date": 1529411173, "creation_date": 1529411173, "answer_id": 50928425, "question_id": 50925729, "link": "https://stackoverflow.com/questions/50925729/is-it-possible-to-inject-pure-java-code-into-kotlin/50928425#50928425", "title": "Is it possible to inject pure Java code into Kotlin?", "body": "<p>No.</p>\n\n<p>A Kotlin file (.kt) can only contain Kotlin code. You can create a Java file (.java) and use it interchangeably with your Kotlin code, though.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1529413453, "creation_date": 1529413453, "answer_id": 50929213, "question_id": 50925729, "link": "https://stackoverflow.com/questions/50925729/is-it-possible-to-inject-pure-java-code-into-kotlin/50929213#50929213", "title": "Is it possible to inject pure Java code into Kotlin?", "body": "<p>In principle you could write a method which takes Java code as a string, wraps it into a class and uses <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/tools/JavaCompiler.html\" rel=\"nofollow noreferrer\"><code>javax.tools.JavaCompiler</code></a> to compile it and use it as e.g.</p>\n\n<pre><code>val x = inlineJava[Int](\"\"\"\nint sum = 0;\nint size = 10;\nfor (int i = 0; i &lt; size; i++) { sum++; }\nreturn sum;\n\"\"\")\n</code></pre>\n\n<p>(actually implementing <code>inlineJava</code> left as an exercise). Though I must admit I can't think of a good reason to.</p>\n"}], "owner": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 50929213, "answer_count": 2, "score": 1, "last_activity_date": 1529413453, "creation_date": 1529402788, "question_id": 50925729, "link": "https://stackoverflow.com/questions/50925729/is-it-possible-to-inject-pure-java-code-into-kotlin", "title": "Is it possible to inject pure Java code into Kotlin?", "body": "<p>Actually I don't need this feature and asking just out of interest.</p>\n\n<p>With <code>C</code> language it's possible to use assembler code within source code.</p>\n\n<p>Is it possible with Kotlin?</p>\n\n<p>For instance, define <code>inline fun</code> with <code>@Java</code> annotation. As the result all invocations of this function will be replaced with bytecode as it was compiled by <code>javac</code>.</p>\n"}, {"tags": ["kotlin"], "owner": {"reputation": 625, "user_id": 4338130, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b6d3e0ab83a934b9a7fa02afe81a5902?s=128&d=identicon&r=PG&f=1", "display_name": "ClassyPimp", "link": "https://stackoverflow.com/users/4338130/classypimp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1529402592, "creation_date": 1529402592, "question_id": 50925662, "link": "https://stackoverflow.com/questions/50925662/kotlin-kapt-generating-code-through-annotation-processors-cannot-find-symbol", "title": "Kotlin kapt: generating code through annotation processors: cannot find symbol (of generated classes) in stubs", "body": "<p>I have a module with annotation processor which generates quite lot of classes I use throughout the project.</p>\n\n<p>I used that module in one of my projects, though it was hell to make it work properly, it works as expected - I run build, it generates classes and everything's fine.</p>\n\n<p>In new project, I use the same module (just copied code), the same config etc. but if I run build, in stubs it replaces all my \"to be generated classes\" references as <code>Class&lt;Any&gt;</code>, and build fails.</p>\n\n<p>Workaround is that I use <code>kaptKotlin</code> task separately:\nit generates code, and than I have to build again (kapt again is run there but no errors thrown) and only than it works.</p>\n\n<p>But even in <code>kaptKotlin</code> task I get lot's of <code>e: cannot find symbol</code> in generated stubs (though code is generated).</p>\n\n<p>I think that while running that tasks those should be ignored or something.</p>\n\n<p>How can I correct that behavior?</p>\n\n<p>Or how can I make it work through single \"build\" task, so kapt would in stubs reference \"to be generated code\" correctly and not replacing with <code>Class&lt;Any&gt;</code>?</p>\n\n<p>P.S. using latest versions of Kotlin. Tried <code>correctErrorTypes = true</code> - no success. </p>\n"}, {"tags": ["kotlin", "corda"], "answers": [{"tags": [], "owner": {"reputation": 321, "user_id": 1660935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e223bc5df2a4f9024a30c557023f134?s=128&d=identicon&r=PG", "display_name": "xenover", "link": "https://stackoverflow.com/users/1660935/xenover"}, "is_accepted": false, "score": 1, "last_activity_date": 1529404493, "creation_date": 1529404493, "answer_id": 50926311, "question_id": 50924908, "link": "https://stackoverflow.com/questions/50924908/when-using-linearstatequerycriteria-how-to-get-the-output-of-the-query-sorted-i/50926311#50926311", "title": "When using LinearStateQueryCriteria, How to get the output of the query sorted in order of modification", "body": "<p>It should be possible by using status = Vault.StateStatus.CONSUMED and then specifying the sorting in queryBy</p>\n\n<pre><code>val queryService = VaultQueryService&lt;YourModelStateClass&gt;\nval criteria = QueryCriteria.LinearStateQueryCriteria(status = Vault.StateStatus.CONSUMED)\nqueryService.queryBy(\n            criteria = criteria,\n            sorting = Sort(\n              setOf(\n                Sort.SortColumn(\n                  SortAttribute.Custom(\n                    YourModelStateSchema::class.java,\n                    YourModelStateSchema::updatedDatetime.name), \n                  Sort.Direction.DESC\n                )\n              )\n            )\n          )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1758, "user_id": 4627552, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/PKXU2.jpg?s=128&g=1", "display_name": "Clyde D&#39;Cruz", "link": "https://stackoverflow.com/users/4627552/clyde-dcruz"}, "edited": false, "score": 0, "creation_date": 1529409720, "post_id": 50926334, "comment_id": 88854726, "body": "This worked for me .. would like to know what&#39;s the difference between RECORDED_TIME and CONSUMED_TIME"}], "tags": [], "owner": {"reputation": 147, "user_id": 6259180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-puLcyzmJW8c/AAAAAAAAAAI/AAAAAAAAESU/yG79BgLyIy8/photo.jpg?sz=128", "display_name": "nitesh solanki", "link": "https://stackoverflow.com/users/6259180/nitesh-solanki"}, "is_accepted": true, "score": 1, "last_activity_date": 1529408994, "last_edit_date": 1529408994, "creation_date": 1529404570, "answer_id": 50926334, "question_id": 50924908, "link": "https://stackoverflow.com/questions/50924908/when-using-linearstatequerycriteria-how-to-get-the-output-of-the-query-sorted-i/50926334#50926334", "title": "When using LinearStateQueryCriteria, How to get the output of the query sorted in order of modification", "body": "<p>You can try specifying the Sorting condition to the vaultQueryBy function like:</p>\n\n<pre><code> val sortAttribute = SortAttribute.Standard(Sort.VaultStateAttribute.RECORDED_TIME)\n    val criteria = QueryCriteria.VaultQueryCriteria(stateRefs = listOf(stateRefs.first(), stateRefs.last()))\n  val results = rpcOps.vaultQueryBy&lt;IOUState&gt;(criteria, sorting = Sort(setOf(Sort.SortColumn(sortAttribute, Sort.Direction.ASC))))\n</code></pre>\n"}], "owner": {"reputation": 1758, "user_id": 4627552, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/PKXU2.jpg?s=128&g=1", "display_name": "Clyde D&#39;Cruz", "link": "https://stackoverflow.com/users/4627552/clyde-dcruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 50926334, "answer_count": 2, "score": 1, "last_activity_date": 1529408994, "creation_date": 1529400395, "question_id": 50924908, "link": "https://stackoverflow.com/questions/50924908/when-using-linearstatequerycriteria-how-to-get-the-output-of-the-query-sorted-i", "title": "When using LinearStateQueryCriteria, How to get the output of the query sorted in order of modification", "body": "<p>When using LinearStateQueryCriteria,</p>\n\n<p>Supposing I have the following states all having the same linearId,</p>\n\n<pre><code>S4 (unconsumed) created at t4 \nS3 (consumed)   created at t3\nS2 (consumed)   created at t2\nS1 (consumed)   created at t1\n</code></pre>\n\n<p>How do I retrieve the latest state that has StateStatus = CONSUMED? Is it possible to sort the result list by some timestamp ?</p>\n"}, {"tags": ["kotlin", "immutability"], "comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 5, "creation_date": 1529400454, "post_id": 50924806, "comment_id": 88848981, "body": "Well immutable means that cannot be modified, which is not the case for your data structure (the <code>EventReceiver</code> object), isn&#39;t it?"}, {"owner": {"reputation": 17436, "user_id": 5241933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9pSx.jpg?s=128&g=1", "display_name": "David Rawson", "link": "https://stackoverflow.com/users/5241933/david-rawson"}, "edited": false, "score": 0, "creation_date": 1529402202, "post_id": 50924806, "comment_id": 88850100, "body": "Related: <a href=\"https://stackoverflow.com/q/6916385\">stackoverflow.com/q/6916385</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 0, "creation_date": 1529408202, "post_id": 50925636, "comment_id": 88853804, "body": "Your right. But the question should target the question, how to handle mutabion of a immutable list from two threads."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 1, "creation_date": 1529425105, "post_id": 50925636, "comment_id": 88864397, "body": "You can&#39;t. Like I said, an immutable list can not be mutated."}], "tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": true, "score": 2, "last_activity_date": 1529402522, "creation_date": 1529402522, "answer_id": 50925636, "question_id": 50924806, "link": "https://stackoverflow.com/questions/50924806/changing-an-immutable-data-structure-from-two-threads/50925636#50925636", "title": "Changing an immutable data structure from two threads", "body": "<p>Immutable data structures can not be mutated - it's in the name. That means there are no methods on it that modify its state. If there are, it's not immutable.\nThus, your <code>EventReceiver</code> is not immutable and you need to design for data races to make it thread safe.</p>\n\n<p>One of the ways to make data structures thread safe is using locks to guard access to the contested properties, such as using <code>synchronized</code> like you're doing here.</p>\n"}], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 50925636, "answer_count": 1, "score": 1, "last_activity_date": 1529403065, "creation_date": 1529400104, "question_id": 50924806, "link": "https://stackoverflow.com/questions/50924806/changing-an-immutable-data-structure-from-two-threads", "title": "Changing an immutable data structure from two threads", "body": "<p>I use immutable data-structures as much as possible, because it's really easy to work with them. The problem though is when two threads modify the data-structure. In that case, the <code>synchronized</code> keyworks helped, but isn't one reason for immutable data-structures, to avoid <code>synchroinzed</code>?</p>\n\n<p>What is the more idemoatic way to modify a immutable list from two threads?</p>\n\n<pre><code>data class MyEvent(val time: Long, val somethingElse: String)\nclass EventReceiver {\n    private var events = listOf&lt;MyEvent&gt;()\n\n    // called several times a second\n    fun addEvent(e: MyEvent) {\n        synchronized(this) {\n            events += e\n        }\n    }\n\n    // internal cron-trigger calls this every 10 seconds\n    fun purge(olderThan: Long) {\n        synchronized(this) {\n            events = events.filter { it.time &lt; olderThan }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 406, "user_id": 1294092, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0754559a57c4b5769c062fc90dd3230d?s=128&d=identicon&r=PG", "display_name": "noktigula", "link": "https://stackoverflow.com/users/1294092/noktigula"}, "is_accepted": true, "score": 4, "last_activity_date": 1529395381, "creation_date": 1529395381, "answer_id": 50923447, "question_id": 50923333, "link": "https://stackoverflow.com/questions/50923333/change-state-of-an-object-in-kotlin-with-immutable-properties/50923447#50923447", "title": "Change state of an object in Kotlin with immutable properties", "body": "<p>Kotlin has a concept of <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">Data classes</a>, which has <code>copy</code> function you need. So if you'll declare your class as:</p>\n\n<pre><code>data class Person(val firstName:String, val lastName:String, val age:Int)\n</code></pre>\n\n<p>You'll be able to use this function. Also it will generate <code>equals()/hashCode/toString()</code> for you.</p>\n"}, {"comments": [{"owner": {"reputation": 4093, "user_id": 5039579, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh4.googleusercontent.com/-F6fcCsWUR08/AAAAAAAAAAI/AAAAAAAAAMA/NVI0gCvjXIg/photo.jpg?sz=128", "display_name": "Johan Vergeer", "link": "https://stackoverflow.com/users/5039579/johan-vergeer"}, "edited": false, "score": 0, "creation_date": 1529399629, "post_id": 50924582, "comment_id": 88848504, "body": "I&#39;m very interested. Thanks for sharing."}], "tags": [], "owner": {"reputation": 17436, "user_id": 5241933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9pSx.jpg?s=128&g=1", "display_name": "David Rawson", "link": "https://stackoverflow.com/users/5241933/david-rawson"}, "is_accepted": false, "score": 3, "last_activity_date": 1529399684, "last_edit_date": 1529399684, "creation_date": 1529399453, "answer_id": 50924582, "question_id": 50923333, "link": "https://stackoverflow.com/questions/50923333/change-state-of-an-object-in-kotlin-with-immutable-properties/50924582#50924582", "title": "Change state of an object in Kotlin with immutable properties", "body": "<p>If you are interested, you can also do this using a <a href=\"https://arrow-kt.io/docs/optics/lens/\" rel=\"nofollow noreferrer\">lens</a>. </p>\n\n<p>It's probably not necessary for an easy case, but when you have very deep objects that need just one property changed, it can be useful:</p>\n\n<pre><code>import arrow.optics.*\n\ndata class Person(val firstName:String, val lastName:String, val age:Int)\n\nval firstNameLens: Lens&lt;Person, String&gt; = Lens(\n    get = { person -&gt; person.firstName },\n    set = { newFirstName-&gt; { person -&gt; person.copy(firstName = newFirstName) } }\n)\n</code></pre>\n\n<p>Then you can do:</p>\n\n<pre><code>val doe = Person(\"John\", \"Doe\", 30)\nfirstNameLens.set(doe, \"Henry\")\n//output: Person(firstName = \"Henry\", lastName = \"Doe\", age = 30)\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>val doe = Person(\"John\", \"Doe\", 30)\nfirstNameLens.get(doe)\n//output: \"John\"\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>val doe = Person(\"John\", \"Doe\", 30)\nfirstNameLens.modify(doe, { it + \"ny\" })\n//output: Person(firstName = \"Johnny\", lastName = \"Doe\", age = 30)\n</code></pre>\n"}], "owner": {"reputation": 4093, "user_id": 5039579, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh4.googleusercontent.com/-F6fcCsWUR08/AAAAAAAAAAI/AAAAAAAAAMA/NVI0gCvjXIg/photo.jpg?sz=128", "display_name": "Johan Vergeer", "link": "https://stackoverflow.com/users/5039579/johan-vergeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 0, "accepted_answer_id": 50923447, "answer_count": 2, "score": 3, "last_activity_date": 1529399684, "creation_date": 1529395023, "question_id": 50923333, "link": "https://stackoverflow.com/questions/50923333/change-state-of-an-object-in-kotlin-with-immutable-properties", "title": "Change state of an object in Kotlin with immutable properties", "body": "<p>In Kotlin we have this notion of immutable properties. </p>\n\n<p>I once heard that in functional programming, state should not be changed. I have been thinking about this in the context of domain models. </p>\n\n<p>Let's say we have a <code>Person</code> class (please don't mind this very silly and unrealistic example). </p>\n\n<pre><code>class Person(val firstName: String, val lastName: String, val age: Int)\n</code></pre>\n\n<p>Everything property is immutable, which is nice. </p>\n\n<p>Now someone comes along and asks to replace the first name. So I create a function that can do this.</p>\n\n<pre><code>fun replaceFirstName(person: Person, newFirstName: String): Person {\n    return Person(newFirstName, person.lastName, person.age)\n}\n</code></pre>\n\n<p>Now this looks really ugly to my eyes. In this case there are only 3 properties, of which one should be replaced. But you can probably imagine what this would look like in larger domain classes. </p>\n\n<p>The easy thing would be to just replace the <code>val</code> with a <code>var</code>, but then the whole intention of immutability is gone. </p>\n\n<p>I'm looking for something like this (it does throw an error since there is no copy function):</p>\n\n<pre><code>fun replaceName(person: Person, newFirstName: String): Person {\n    return person.copy { firstName = newFirstName }\n}\n</code></pre>\n\n<p>Is there a nice and concise way to do this in Kotlin?</p>\n"}, {"tags": ["kotlin", "assertion"], "answers": [{"comments": [{"owner": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "edited": false, "score": 0, "creation_date": 1529397904, "post_id": 50923970, "comment_id": 88847534, "body": "clear. thx. I also found useful <a href=\"https://discuss.kotlinlang.org/t/java-like-assert-statement/2277\" rel=\"nofollow noreferrer\">thread</a> related to this topic"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "reply_to_user": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "edited": false, "score": 0, "creation_date": 1529402098, "post_id": 50923970, "comment_id": 88850027, "body": "@Maxim please, accept the answer if it solves your issue ;)"}, {"owner": {"reputation": 785, "user_id": 5616255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/frl7l.jpg?s=128&g=1", "display_name": "Bojan P.", "link": "https://stackoverflow.com/users/5616255/bojan-p"}, "edited": false, "score": 2, "creation_date": 1561109450, "post_id": 50923970, "comment_id": 99965085, "body": "All of the answers on this topic are uniform in the sentence like &quot;run the JVM with the <code>-ea</code> option&quot;, however I cannot find how to actually do that in Android Studio. Googling &quot;kotlin android studio set jvm option&quot; or similar yields no solution. EDIT: After a while of question rephrasing I found the solution, if anyone will be wondering the same <a href=\"https://stackoverflow.com/questions/18168257/where-to-add-compiler-options-like-ea-in-intellij-idea\">Where to add compiler options like -ea in IntelliJ IDEA?</a>"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 9, "last_activity_date": 1529397285, "creation_date": 1529397285, "answer_id": 50923970, "question_id": 50923307, "link": "https://stackoverflow.com/questions/50923307/how-to-enable-assertions-in-kotlin/50923970#50923970", "title": "How to enable assertions in Kotlin?", "body": "<p>To enable assertions in Kotlin, run the JVM with the <code>-ea</code> option, without any additional specifiers.</p>\n"}, {"tags": [], "owner": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "is_accepted": false, "score": 3, "last_activity_date": 1529410899, "last_edit_date": 1529410899, "creation_date": 1529408937, "answer_id": 50927702, "question_id": 50923307, "link": "https://stackoverflow.com/questions/50923307/how-to-enable-assertions-in-kotlin/50927702#50927702", "title": "How to enable assertions in Kotlin?", "body": "<p>In <code>Kotlin</code>, unlike <code>Java</code>, assertions can be enabled/disabled only on top-level, i.e. by specifying <code>-ea</code> option to JVM.</p>\n\n<p>Behind the scenes, <code>assert()</code> in Kotlin is a function, defined in <code>AssertionsJVM.kt</code> file. <code>ENABLED</code> variable in the <code>_Assertions</code> object is used to determine if assertions are enabled.</p>\n\n<pre><code>@PublishedApi\ninternal object _Assertions {\n    @JvmField @PublishedApi\n    internal val ENABLED: Boolean = javaClass.desiredAssertionStatus()\n}\n</code></pre>\n\n<p>The <code>ENABLED</code> variable is assign to <code>true</code> if assertions enabled for the <code>_Assertions</code> class.</p>\n\n<p>As a consequence, to turn on asserts in Kotlin they have to be enabled in JVM for</p>\n\n<ul>\n<li>all classes <code>-ea</code></li>\n<li>or one particular class <code>-ea:kotlin._Assertions</code></li>\n</ul>\n"}], "owner": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3003, "favorite_count": 0, "accepted_answer_id": 50923970, "answer_count": 2, "score": 7, "last_activity_date": 1529410899, "creation_date": 1529394949, "last_edit_date": 1529397138, "question_id": 50923307, "link": "https://stackoverflow.com/questions/50923307/how-to-enable-assertions-in-kotlin", "title": "How to enable assertions in Kotlin?", "body": "<p>I've created sample class to test assertions in Kotlin</p>\n\n<pre><code>class Assertion {\n    fun sum(a: Int, b: Int): Int {\n        assert(a &gt; 0 &amp;&amp; b &gt; 0)\n        return a + b\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Assertion().sum(-1, 2)\n}\n</code></pre>\n\n<p>and was using the following options but the program doesn't throw assert exception.</p>\n\n<p><code>-ea:AssertionKt</code>, <code>-ea:Assertion</code> and <code>-ea:...</code></p>\n"}, {"tags": ["android", "kotlin", "android-architecture-components", "android-livedata"], "comments": [{"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 6, "creation_date": 1529395110, "post_id": 50923273, "comment_id": 88845902, "body": "replace <code>fun getCurrentName(): LiveData&lt;String&gt;</code> with <code>fun getCurrentName(): MutableLiveData&lt;String&gt;</code>"}, {"owner": {"reputation": 3027, "user_id": 2145504, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/769e20141cad3cf57b17b0a3b3e89db3?s=128&d=identicon&r=PG", "display_name": "kike", "link": "https://stackoverflow.com/users/2145504/kike"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1529399061, "post_id": 50923273, "comment_id": 88848170, "body": "Yes, that was the problem. Would you elaborate it a bit more on an answer so we can keep it for the community?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 2, "creation_date": 1529399497, "post_id": 50923273, "comment_id": 88848431, "body": "see the difference in <code>LiveData#setValue()</code> and <code>MutableLiveData#setValue()</code> methods"}], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 9874386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6add8d98d0c80fc5e75f7a2637646fe?s=128&d=identicon&r=PG&f=1", "display_name": "RPG", "link": "https://stackoverflow.com/users/9874386/rpg"}, "is_accepted": true, "score": 46, "last_activity_date": 1550038833, "last_edit_date": 1550038833, "creation_date": 1534753274, "answer_id": 51926674, "question_id": 50923273, "link": "https://stackoverflow.com/questions/50923273/livedata-cannot-assign-to-value-the-setter-is-protected-protected-and-packa/51926674#51926674", "title": "LiveData. Cannot assign to \u2018value\u2019: the setter is protected/*protected and package*/ for synthetic extension", "body": "<p>As @spkink suggested:</p>\n\n<p>replace </p>\n\n<pre><code>fun getCurrentName(): LiveData&lt;String&gt;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>fun getCurrentName(): MutableLiveData&lt;String&gt;\n</code></pre>\n\n<p>The error is caused because <code>setValue(T value)</code> is <code>protected</code> in LiveData (so you cannot call it) while it is <code>public</code> in <code>MutableLiveData</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11269105, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6xweieK2kF0/AAAAAAAAAAI/AAAAAAAAAYI/V2_Xl74CT1I/photo.jpg?sz=128", "display_name": "alereca", "link": "https://stackoverflow.com/users/11269105/alereca"}, "is_accepted": false, "score": 0, "last_activity_date": 1610425207, "creation_date": 1610425207, "answer_id": 65678000, "question_id": 50923273, "link": "https://stackoverflow.com/questions/50923273/livedata-cannot-assign-to-value-the-setter-is-protected-protected-and-packa/65678000#65678000", "title": "LiveData. Cannot assign to \u2018value\u2019: the setter is protected/*protected and package*/ for synthetic extension", "body": "<pre><code>model.getCurrentName().value = firstName\n</code></pre>\n<p>Please consider that handling the name value update inside the ViewModel might be a clearer solution, since you avoid having mutable public properties. Furthermore, here it could lead to even worse effects because you have two mutable public live data properties. For example:</p>\n<blockquote>\n<p>ViewModel</p>\n</blockquote>\n<pre><code>// keep your MutableLiveData private, so it's easier to find where mutations might happen in your code\n// I changed a little how the variable is declared, as the way below seems to more common nowadays\nprivate var _firstName = MutableLiveData&lt;String&gt;()\n\n// LiveData should remain public, being a read-only interface with other classes like your fragment\nfun getCurrentName(): LiveData&lt;String&gt; {\n    return _firstName\n}\n\n/*\nAn alternative \nval firstName = LiveData&lt;String&gt;\n    get() = _firstName\n*/\n\nfun setFirstName(firstName: String){\n    _firstName.value = firstName\n}\n</code></pre>\n<blockquote>\n<p>Fragment</p>\n</blockquote>\n<pre><code>fun saveProfileData() {\n    val firstName = inputFirstName.text.toString()\n    // the value update will be handled inside the ViewModel, where the private mutable live data property is located\n    model.setFirstName(firstName)\n}\n</code></pre>\n"}], "owner": {"reputation": 3027, "user_id": 2145504, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/769e20141cad3cf57b17b0a3b3e89db3?s=128&d=identicon&r=PG", "display_name": "kike", "link": "https://stackoverflow.com/users/2145504/kike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10618, "favorite_count": 1, "accepted_answer_id": 51926674, "answer_count": 2, "score": 33, "last_activity_date": 1610425207, "creation_date": 1529394854, "last_edit_date": 1529394893, "question_id": 50923273, "link": "https://stackoverflow.com/questions/50923273/livedata-cannot-assign-to-value-the-setter-is-protected-protected-and-packa", "title": "LiveData. Cannot assign to \u2018value\u2019: the setter is protected/*protected and package*/ for synthetic extension", "body": "<p>I'm trying to implement a DB Observer with LiveData as described in the <a href=\"https://developer.android.com/topic/libraries/architecture/livedata\" rel=\"noreferrer\">android documentation</a>. </p>\n\n<p>As long as I'm programming in Kotlin I'm adapting the functions (originally written in Java) to it. </p>\n\n<p>When trying to save the data I find this problem.</p>\n\n<pre><code>Cannot assign to \u2018value\u2019: the setter is protected/*protected and package*/ for synthetic extension in \u2018&lt;library Grade: android.arch.livecycle:livedata-core-1.1.1&gt;\u2019\n</code></pre>\n\n<p>Did anyone have this problem already?</p>\n\n<p>This is my code:</p>\n\n<blockquote>\n  <p>ViewModel:</p>\n</blockquote>\n\n<pre><code>class ProfileViewModel: ViewModel() {\n\n    object FirstName: MutableLiveData&lt;String&gt;()\n\n    fun getCurrentName(): LiveData&lt;String&gt; {\n        return FirstName\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Fragment</p>\n</blockquote>\n\n<pre><code>class ProfileFragment{\n\n    private lateinit var model: ProfileViewModel\n\n    // this is called onViewCreated. inputFirstName is an Edittext.\n    override fun setUp() {\n        model = ViewModelProviders.of(this).get(ProfileViewModel::class.java)\n\n        val nameObserver = Observer&lt;String&gt; { firstName -&gt;\n            inputFirstName.text = SpannableStringBuilder(firstName)\n        }\n\n        model.getCurrentName().observe(this, nameObserver)\n    }\n\n    fun saveProfileData() {\n        val firstName = inputFirstName.text.toString()\n        model.getCurrentName().value = firstName\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "influxdb", "ninjaframework"], "answers": [{"tags": [], "owner": {"reputation": 449, "user_id": 3756347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f81df34976092b908561a7d79bab01c?s=128&d=identicon&r=PG&f=1", "display_name": "Nirmal", "link": "https://stackoverflow.com/users/3756347/nirmal"}, "is_accepted": true, "score": 2, "last_activity_date": 1529572289, "creation_date": 1529572289, "answer_id": 50964716, "question_id": 50922473, "link": "https://stackoverflow.com/questions/50922473/influxdbioexception-java-net-sockettimeoutexception-timeout/50964716#50964716", "title": "InfluxDBIOException: java.net.SocketTimeoutException: timeout", "body": "<p>I changed the default timeout of OKHttpClient and the exceptions were not thrown within the particular duration. Missed it earlier as I had passed a different instance of DB.</p>\n\n<pre><code>val client = OkHttpClient.Builder()\n                .connectTimeout(1, TimeUnit.MINUTES)\n                .readTimeout(1, TimeUnit.MINUTES)\n                .writeTimeout(1, TimeUnit.MINUTES)\n                .retryOnConnectionFailure(true)\nval influxConnection = InfluxDBFactory.connect(\"http://localhost:8086\", client)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314, "user_id": 5699784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9215c716340a2a8e61dca51b34745ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/5699784/kai"}, "is_accepted": false, "score": 1, "last_activity_date": 1548897375, "creation_date": 1548897375, "answer_id": 54452002, "question_id": 50922473, "link": "https://stackoverflow.com/questions/50922473/influxdbioexception-java-net-sockettimeoutexception-timeout/54452002#54452002", "title": "InfluxDBIOException: java.net.SocketTimeoutException: timeout", "body": "<p>I translate @Nirmal 's answer to java</p>\n\n<pre><code>   OkHttpClient.Builder client = new OkHttpClient.Builder()\n            .connectTimeout(1, TimeUnit.MINUTES)\n            .readTimeout(1, TimeUnit.MINUTES)\n            .writeTimeout(1, TimeUnit.MINUTES)\n            .retryOnConnectionFailure(true);\n   InfluxDB influxdb = InfluxDBFactory.connect(influxUrl, client);\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 3756347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f81df34976092b908561a7d79bab01c?s=128&d=identicon&r=PG&f=1", "display_name": "Nirmal", "link": "https://stackoverflow.com/users/3756347/nirmal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2706, "favorite_count": 0, "accepted_answer_id": 50964716, "answer_count": 2, "score": 0, "last_activity_date": 1556527881, "creation_date": 1529392070, "last_edit_date": 1556527881, "question_id": 50922473, "link": "https://stackoverflow.com/questions/50922473/influxdbioexception-java-net-sockettimeoutexception-timeout", "title": "InfluxDBIOException: java.net.SocketTimeoutException: timeout", "body": "<p>I'm using Influx Db java wrapper and adding data in influx db for every 5 seconds with a retention policy of 30 days.</p>\n\n<p>When I'm trying to query the data by sending multiple requests, the timeout exception is seen. \nOnce I clear the db data , the response is received properly.</p>\n\n<pre><code>org.influxdb.InfluxDBIOException: java.net.SocketTimeoutException: timeout\n    at org.influxdb.impl.InfluxDBImpl.execute(InfluxDBImpl.java:587)\n    at org.influxdb.impl.InfluxDBImpl.query(InfluxDBImpl.java:425)\n    **at services.SampleService.getTotalCount(SampleService.kt:45)**\n    at sun.reflect.GeneratedMethodAccessor83.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at ninja.params.ControllerMethodInvoker.invoke(ControllerMethodInvoker.java:76)\n    at ninja.FilterChainEnd.next(FilterChainEnd.java:45)\n    at filters.PermissionFilter.filter(PermissionFilter.kt:30)\n    at ninja.FilterChainImpl.next(FilterChainImpl.java:36)\n    at filters.JwtFilter.filter(JwtFilter.kt:40)\n    at ninja.FilterChainImpl.next(FilterChainImpl.java:36)\n    at filters.CorsFilter.filter(CorsFilter.kt:10)\n    at ninja.FilterChainImpl.next(FilterChainImpl.java:36)\n    at ninja.NinjaDefault.onRouteRequest(NinjaDefault.java:102)\n    at ninja.servlet.NinjaServletDispatcher.service(NinjaServletDispatcher.java:86)\n    at com.google.inject.servlet.ServletDefinition.doServiceImpl(ServletDefinition.java:286)\n    at com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:276)\n    at com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:181)\n    at com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:91)\n    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:85)\n    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:120)\n    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:135)\n    at ninja.servlet.NinjaServletFilter.doFilter(NinjaServletFilter.java:106)\n    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1759)\n    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:582)\n    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)\n    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)\n    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)\n    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)\n    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)\n    at org.eclipse.jetty.server.Server.handle(Server.java:534)\n    at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:320)\n    at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:251)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:283)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:110)\n    at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.executeProduceConsume(ExecuteProduceConsume.java:303)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceConsume(ExecuteProduceConsume.java:148)\n    at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:136)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:671)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:589)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.net.SocketTimeoutException: timeout\n    at okio.Okio$4.newTimeoutException(Okio.java:232)\n    at okio.AsyncTimeout.exit(AsyncTimeout.java:285)\n    at okio.AsyncTimeout$2.read(AsyncTimeout.java:241)\n    at okio.RealBufferedSource.request(RealBufferedSource.java:68)\n    at okio.RealBufferedSource.require(RealBufferedSource.java:61)\n    at okio.RealBufferedSource.readHexadecimalUnsignedLong(RealBufferedSource.java:304)\n    at okhttp3.internal.http.Http1xStream$ChunkedSource.readChunkSize(Http1xStream.java:441)\n    at okhttp3.internal.http.Http1xStream$ChunkedSource.read(Http1xStream.java:422)\n    at okio.RealBufferedSource.read(RealBufferedSource.java:47)\n    at okio.RealBufferedSource.request(RealBufferedSource.java:68)\n    at okio.RealBufferedSource.require(RealBufferedSource.java:61)\n    at okio.GzipSource.consumeHeader(GzipSource.java:114)\n    at okio.GzipSource.read(GzipSource.java:73)\n    at okio.RealBufferedSource.read(RealBufferedSource.java:47)\n    at okio.ForwardingSource.read(ForwardingSource.java:35)\n    at retrofit2.OkHttpCall$ExceptionCatchingRequestBody$1.read(OkHttpCall.java:279)\n    at okio.RealBufferedSource.request(RealBufferedSource.java:68)\n    at okio.RealBufferedSource.rangeEquals(RealBufferedSource.java:418)\n    at okio.RealBufferedSource.rangeEquals(RealBufferedSource.java:402)\n    at retrofit2.converter.moshi.MoshiResponseBodyConverter.convert(MoshiResponseBodyConverter.java:39)\n    at retrofit2.converter.moshi.MoshiResponseBodyConverter.convert(MoshiResponseBodyConverter.java:25)\n    at retrofit2.ServiceMethod.toResponse(ServiceMethod.java:117)\n    at retrofit2.OkHttpCall.parseResponse(OkHttpCall.java:211)\n    at retrofit2.OkHttpCall.execute(OkHttpCall.java:174)\n    at org.influxdb.impl.InfluxDBImpl.execute(InfluxDBImpl.java:579)\n    ... 46 more\nCaused by: java.net.SocketException: Socket closed\n    at java.net.SocketInputStream.read(SocketInputStream.java:204)\n    at java.net.SocketInputStream.read(SocketInputStream.java:141)\n    at okio.Okio$2.read(Okio.java:140)\n    at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)\n</code></pre>\n\n<p>The exception cause points to this line\n<code>val results = influxDB.query(q)</code></p>\n\n<pre><code>val q = Query(\n            \"select sum(firstCount) as totalFirstCount, sum(secondCount) as totalSecondCount\" +\n                \" ,sum(thirdCount) as totalThirdCount, sum(fourthCount) as totalFourthCount \" +\n                \"from counters where time &gt; now() - \"1h\" group by field1 , field2\",\n            \"dbname\")\n</code></pre>\n\n<p>All the field values are of Long Type and have values like 2721976000.</p>\n\n<p>Below is response from explain statement of the above query.</p>\n\n<pre><code>EXPRESSION: sum(firstCount::integer)\nNUMBER OF SHARDS: 123\nNUMBER OF SERIES: 26568\nCACHED VALUES: 105408\nNUMBER OF FILES: 16200\nNUMBER OF BLOCKS: 16200\nSIZE OF BLOCKS: 76693173\n\nEXPRESSION: sum(secondCount::integer)\nNUMBER OF SHARDS: 123\nNUMBER OF SERIES: 26568\nCACHED VALUES: 105408\nNUMBER OF FILES: 16200\nNUMBER OF BLOCKS: 16200\nSIZE OF BLOCKS: 86133364\n\nEXPRESSION: sum(thirdCount::integer)\nNUMBER OF SHARDS: 123\nNUMBER OF SERIES: 26568\nCACHED VALUES: 105408\nNUMBER OF FILES: 16200\nNUMBER OF BLOCKS: 16200\nSIZE OF BLOCKS: 61967770\n\nEXPRESSION: sum(fourthCount::integer)\nNUMBER OF SHARDS: 123\nNUMBER OF SERIES: 26568\nCACHED VALUES: 105408\nNUMBER OF FILES: 16200\nNUMBER OF BLOCKS: 16200\nSIZE OF BLOCKS: 61967754\n</code></pre>\n\n<p>I could not find the solution to solve the exception , in the java console logs the response is received properly. Any pointers whether to look at query optimization or cause of exception would be helpful.</p>\n"}, {"tags": ["android", "lambda", "interface", "kotlin", "anonymous-function"], "answers": [{"tags": [], "owner": {"reputation": 439, "user_id": 6229448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a745b02fefc03fd5917dea58f0b40?s=128&d=identicon&r=PG&f=1", "display_name": "pau1adam", "link": "https://stackoverflow.com/users/6229448/pau1adam"}, "is_accepted": false, "score": 2, "last_activity_date": 1529394636, "creation_date": 1529394636, "answer_id": 50923210, "question_id": 50922387, "link": "https://stackoverflow.com/questions/50922387/lambda-interfaces-in-kotlin/50923210#50923210", "title": "Lambda interfaces in Kotlin", "body": "<p>The feature you are trying to use (single function interface to lambda) only works when the interface was written in Java code.</p>\n\n<p>The reasoning behind this is this:</p>\n\n<blockquote>\n  <p>\"since Kotlin has proper function types, automatic conversion of functions into implementations of Kotlin interfaces is unnecessary and therefore unsupported\"</p>\n</blockquote>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions</a></p>\n"}], "owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "closed_date": 1529394703, "answer_count": 1, "score": 0, "last_activity_date": 1529394636, "creation_date": 1529391676, "last_edit_date": 1529393716, "question_id": 50922387, "link": "https://stackoverflow.com/questions/50922387/lambda-interfaces-in-kotlin", "closed_reason": "Duplicate", "title": "Lambda interfaces in Kotlin", "body": "<p>I have implemented this <code>interface</code> in my <code>Adapter</code> in <code>Kotlin</code>:</p>\n\n<pre><code>interface OnItemClickListener {\n    fun onItemClick(view: View)\n}\n\npublic lateinit var onItemClickListener: OnItemClickListener\n\npublic fun setItemClickListener(itemClickListener: OnItemClickListener) {\n    this.onItemClickListener = itemClickListener\n}\n</code></pre>\n\n<p>I want to use it in my <code>Fragment</code> with <code>Lambda</code> like this: </p>\n\n<pre><code>    adapter.setItemClickListener {\n        // do stuff here\n    }\n</code></pre>\n\n<p>But this error appears:</p>\n\n<blockquote>\n  <p>Error:(54, 39) Type mismatch: inferred type is () -> Unit but SSUpdatesAdapter.OnItemClickListener was expected</p>\n</blockquote>\n\n<p>I know that I can just implement <code>Adapter.AddOnItemTouchListener</code> but I really want to know more about <code>Kotlin</code> and how to use <code>Lambdas</code></p>\n"}, {"tags": ["java", "android", "lambda", "kotlin", "adapter"], "answers": [{"comments": [{"owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "edited": false, "score": 0, "creation_date": 1529389385, "post_id": 50921734, "comment_id": 88842906, "body": "Hi, your code doesn&#39;t seem to compile. Says <code>Type mismatch Required UpdatesAdapter.OnItemClickListener Found: () -&gt; Int)</code>"}, {"owner": {"reputation": 2796, "user_id": 7508302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bHYHM.jpg?s=128&g=1", "display_name": "Cililing", "link": "https://stackoverflow.com/users/7508302/cililing"}, "edited": false, "score": 0, "creation_date": 1529390336, "post_id": 50921734, "comment_id": 88843298, "body": "Does your <code>UpdatesAdapter.OnItemClickListener</code> have only one method?"}, {"owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "reply_to_user": {"reputation": 2796, "user_id": 7508302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bHYHM.jpg?s=128&g=1", "display_name": "Cililing", "link": "https://stackoverflow.com/users/7508302/cililing"}, "edited": false, "score": 0, "creation_date": 1529390690, "post_id": 50921734, "comment_id": 88843470, "body": "@Cililing yes. It is <code>fun onItemClick(view: View)</code>"}], "tags": [], "owner": {"reputation": 16790, "user_id": 2936153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIaVu.jpg?s=128&g=1", "display_name": "Rohit5k2", "link": "https://stackoverflow.com/users/2936153/rohit5k2"}, "is_accepted": false, "score": 1, "last_activity_date": 1529389063, "creation_date": 1529389063, "answer_id": 50921734, "question_id": 50921677, "link": "https://stackoverflow.com/questions/50921677/setting-anonymous-interface-in-kotlin/50921734#50921734", "title": "Setting anonymous interface in Kotlin", "body": "<p>This is how we do it in lambda</p>\n\n<pre><code>adapter.setItemClickListener{ Log.i(\"Adapter\", \"onItemClick event fired on \" + it.id) }\n</code></pre>\n\n<p>Here <code>it</code> is the instance of <code>View</code> which is the parameter of <code>onItemClick</code> method.</p>\n\n<p>More information on <code>it</code> is here <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#it-implicit-name-of-a-single-parameter\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/lambdas.html#it-implicit-name-of-a-single-parameter</a></p>\n\n<p>You can find more information in Kotlin docs here <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expressions-and-anonymous-functions\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/lambdas.html#lambda-expressions-and-anonymous-functions</a></p>\n"}, {"comments": [{"owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "edited": false, "score": 0, "creation_date": 1529390469, "post_id": 50921814, "comment_id": 88843352, "body": "so far this is the only answer that worked for me. But I really want to learn more about lambdas."}], "tags": [], "owner": {"reputation": 2810, "user_id": 2325929, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/f8057b78c5e5665878dd52fc5b1f00e5?s=128&d=identicon&r=PG", "display_name": "theanilpaudel", "link": "https://stackoverflow.com/users/2325929/theanilpaudel"}, "is_accepted": false, "score": 8, "last_activity_date": 1529389408, "creation_date": 1529389408, "answer_id": 50921814, "question_id": 50921677, "link": "https://stackoverflow.com/questions/50921677/setting-anonymous-interface-in-kotlin/50921814#50921814", "title": "Setting anonymous interface in Kotlin", "body": "<p>Without lambda you can do it like this</p>\n\n<pre><code>adapter.setItemClickListener(object :View.OnItemClickListener{\n            override fun onItemClick(p0: View?) {\n\n            }\n        })\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "edited": false, "score": 0, "creation_date": 1529390593, "post_id": 50921836, "comment_id": 88843424, "body": "I have tried the first and second solution but it doesn&#39;t work. It says <code>Required: Adapter. OnItemClickListener Found: () -&gt; Unit</code>"}], "tags": [], "owner": {"reputation": 2796, "user_id": 7508302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bHYHM.jpg?s=128&g=1", "display_name": "Cililing", "link": "https://stackoverflow.com/users/7508302/cililing"}, "is_accepted": false, "score": 2, "last_activity_date": 1529389531, "creation_date": 1529389531, "answer_id": 50921836, "question_id": 50921677, "link": "https://stackoverflow.com/questions/50921677/setting-anonymous-interface-in-kotlin/50921836#50921836", "title": "Setting anonymous interface in Kotlin", "body": "<p>If you want to assign interface with single method, you can just write this:</p>\n\n<pre><code>adapter.setItemClickListener { view -&gt;\n    /* some code here */\n}\n</code></pre>\n\n<p>Or even better:</p>\n\n<pre><code>adapter.setItemClickListener { \n    /* some code here, to use \"view\" use keyword \"it\" */\n}\n</code></pre>\n\n<p>If you want look deeper, let's analize signature of your method:</p>\n\n<pre><code>public fun setItemClickListener(itemClickListener: OnItemClickListener)\n</code></pre>\n\n<p>this is actually equals to</p>\n\n<pre><code>public fun setItemClickListener(singleMethodListener: (View) -&gt; Unit)\n</code></pre>\n\n<p>If your last argument is function, you can just forget about '()', and pass lambda.\nOne more example:</p>\n\n<pre><code>public fun setItemClickListener(parameter: Int, singleMethodListener: (View) -&gt; Unit)\n</code></pre>\n\n<p>to call method above, your code should be:</p>\n\n<pre><code>item.setItemClickListener(0) { /* lambda here */ }\n</code></pre>\n\n<p>The problem is when you have interface with more than one method, because then you cannot pass lambda :(</p>\n\n<p>Example:</p>\n\n<pre><code>interface OnItemClickListener {\n     fun onItemClick(view: View)\n     fun onDoubleItemClick(view: View)\n}\n</code></pre>\n\n<p>Then, you cannot pass sample labda, because you have to define 2 methods. Then, you have to do the same thing like in java, but in other syntax:</p>\n\n<pre><code>adapter.setItemClickListener(object : OnItemClickListener {\n    /* method declarations here, like in java */\n})\n</code></pre>\n\n<p>I hope I have explained base-lambda syntax in Kotlin :D Any question? Ask ;)</p>\n"}, {"comments": [{"owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "edited": false, "score": 0, "creation_date": 1529396284, "post_id": 50923433, "comment_id": 88846537, "body": "This cleared things out for me. Thank you. However, how can I use the <code>OnItemClickListener</code> inline factory method?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "edited": false, "score": 0, "creation_date": 1529396437, "post_id": 50923433, "comment_id": 88846644, "body": "Edited to show use."}, {"owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "edited": false, "score": 0, "creation_date": 1529396549, "post_id": 50923433, "comment_id": 88846706, "body": "sorry, but how do I call the <code>onItemClick</code> inside my adapter&#39;s <code>onBindViewHolder</code> method?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "edited": false, "score": 0, "creation_date": 1529407181, "post_id": 50923433, "comment_id": 88853218, "body": "Do you understand how to access the listener? Then call the method on it as normal."}, {"owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "edited": false, "score": 0, "creation_date": 1529464920, "post_id": 50923433, "comment_id": 88877479, "body": "Sorry, I&#39;m just new to Kotlin. Can you give me a code snipper? @Alexey Romanov"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "edited": false, "score": 0, "creation_date": 1529484517, "post_id": 50923433, "comment_id": 88885382, "body": "<code>adapter.getItemClickListener().onItemClick(someView)</code>"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 6, "last_activity_date": 1529396417, "last_edit_date": 1529396417, "creation_date": 1529395327, "answer_id": 50923433, "question_id": 50921677, "link": "https://stackoverflow.com/questions/50921677/setting-anonymous-interface-in-kotlin/50923433#50923433", "title": "Setting anonymous interface in Kotlin", "body": "<p>The problem is that your interface is defined in Kotlin (since it has <code>fun</code>). <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"noreferrer\">Lambdas can only be used for Java interfaces</a>:</p>\n\n<blockquote>\n  <p>Also note that this feature works only for Java interop; since Kotlin has proper function types, automatic conversion of functions into implementations of Kotlin interfaces is unnecessary and therefore unsupported.</p>\n</blockquote>\n\n<p>So in Kotlin you are supposed to use </p>\n\n<pre><code>public fun setItemClickListener(itemClickListener: (View) -&gt; Unit)\n</code></pre>\n\n<p>instead of defining <code>OnItemClickListener</code>. You could also create a factory method:</p>\n\n<pre><code>// in Adapter's companion object\npublic inline fun OnItemClickListener(body: (View) -&gt; Unit) = object : OnItemClickListener {\n    override fun onItemClick(view: View) { body(view) }\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>adapter.setItemClickListener(Adapter.OnItemClickListener { view -&gt; ... })\n</code></pre>\n"}], "owner": {"reputation": 1428, "user_id": 6243778, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/agD7O.png?s=128&g=1", "display_name": "Dale Julian", "link": "https://stackoverflow.com/users/6243778/dale-julian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6624, "favorite_count": 0, "closed_date": 1529401875, "accepted_answer_id": 50923433, "answer_count": 4, "score": 5, "last_activity_date": 1529396619, "creation_date": 1529388749, "last_edit_date": 1529396619, "question_id": 50921677, "link": "https://stackoverflow.com/questions/50921677/setting-anonymous-interface-in-kotlin", "closed_reason": "Duplicate", "title": "Setting anonymous interface in Kotlin", "body": "<p>I have an interface in my <code>Adapter</code> class:</p>\n\n<pre><code>interface OnItemClickListener {\n    fun onItemClick(view: View)\n}\n</code></pre>\n\n<p>TAKE NOTE that my <code>interface</code> is in Kotlin.</p>\n\n<p>which I want to set via this method:</p>\n\n<pre><code>public fun setItemClickListener(itemClickListener: OnItemClickListener) {\n    this.onItemClickListener = itemClickListener\n}\n</code></pre>\n\n<p>How do I use the <code>setItemClickListener</code> method in my <code>Fragment</code> class like what I used to do in Java? i.e.</p>\n\n<pre><code>adapter.setItemClickListener(new OnItemClickListener() {\n   @Override\n   public void onItemClick(View view) {\n    // do something\n   }\n}\n</code></pre>\n\n<p>I know that I can use an <code>onItemTouchListener</code> but I am still new to Kotlin and I'm trying to learn some techniques like <code>Lambdas</code> and such.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 998, "user_id": 4290242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/txvXv.png?s=128&g=1", "display_name": "FreedomPride", "link": "https://stackoverflow.com/users/4290242/freedompride"}, "edited": false, "score": 0, "creation_date": 1529388091, "post_id": 50921522, "comment_id": 88842379, "body": "Can i work with this? <code>open class MyGcmListenerService : GcmListenerService()    { class extended : PushDataReceiver() {</code>"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 998, "user_id": 4290242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/txvXv.png?s=128&g=1", "display_name": "FreedomPride", "link": "https://stackoverflow.com/users/4290242/freedompride"}, "edited": false, "score": 0, "creation_date": 1529388302, "post_id": 50921522, "comment_id": 88842460, "body": "You can, but nesting classes like that doesn&#39;t provide you much more than just having completely separate classes for the two. Although if what you want is to access parts of the outer class from the nested one, an <a href=\"https://kotlinlang.org/docs/reference/nested-classes.html#inner-classes\" rel=\"nofollow noreferrer\">inner class</a> might be what you&#39;re looking for."}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "edited": false, "score": 0, "creation_date": 1529389415, "post_id": 50921522, "comment_id": 88842920, "body": "<code>class MyGcmListenerService : GcmListenerService(), PushDataReceiver() {}</code> are you sure this can be compiled?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1529390588, "post_id": 50921522, "comment_id": 88843421, "body": "&quot;But again, since you can only have one direct superclass, this won&#39;t work.&quot;"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 1, "last_activity_date": 1529390631, "last_edit_date": 1529390631, "creation_date": 1529388018, "answer_id": 50921522, "question_id": 50921400, "link": "https://stackoverflow.com/questions/50921400/kotlin-extending-to-second-constructor/50921522#50921522", "title": "Kotlin extending to second constructor", "body": "<p>Just like Java, Kotlin doesn't support multiple inheritance. You can only extend a single class at a time - although you can implement multiple interfaces. If you need both a <code>GcmListenerService</code> subclass and a <code>BroadcastReceiver</code>, you'll have to create separate classes for them.</p>\n\n<hr>\n\n<p>To explain the error message you're getting:</p>\n\n<blockquote>\n  <p>Only one class may appear in supertypelist. This type has a constructor, and thus must be initialized here</p>\n</blockquote>\n\n<p>This error is pointing out that when you extend a class (unlike when implementing an interface), you need to call its constructor by adding parentheses (and if it has constructor parameters, pass those within these parentheses), like you did with the other class:</p>\n\n<pre><code>class MyGcmListenerService : GcmListenerService(), PushDataReceiver() {}\n</code></pre>\n\n<p>But again, since you can only have one direct superclass, this won't work.</p>\n"}], "owner": {"reputation": 998, "user_id": 4290242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/txvXv.png?s=128&g=1", "display_name": "FreedomPride", "link": "https://stackoverflow.com/users/4290242/freedompride"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1423, "favorite_count": 0, "accepted_answer_id": 50921522, "answer_count": 1, "score": 1, "last_activity_date": 1529390631, "creation_date": 1529387430, "question_id": 50921400, "link": "https://stackoverflow.com/questions/50921400/kotlin-extending-to-second-constructor", "title": "Kotlin extending to second constructor", "body": "<p>My current class is below :</p>\n\n<pre><code>class MyGcmListenerService : GcmListenerService() {}\n</code></pre>\n\n<p>GCMListenerService is as below </p>\n\n<pre><code>public class GcmListenerService extends zzb {}\n</code></pre>\n\n<p>Now i'm looking to extend to another constructor.\nWhen i try to do this ,</p>\n\n<pre><code>class MyGcmListenerService : GcmListenerService(), PushDataReceiver {}\n</code></pre>\n\n<p>I get error </p>\n\n<blockquote>\n  <p>Only one class may appear in supertypelist. This type has a\n  constructor, and thus must be initialized here</p>\n</blockquote>\n\n<p>The PushDataReceiver is as below</p>\n\n<pre><code>public abstract class PushDataReceiver extends BroadcastReceiver\n</code></pre>\n\n<p>I've been trying to google </p>\n\n<blockquote>\n  <p>Kotlin adding secondary constructor</p>\n</blockquote>\n\n<p>Somehow I'm not able to get any assist for my issue.</p>\n"}, {"tags": ["java", "kotlin", "try-catch"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 2, "creation_date": 1529367931, "post_id": 50918924, "comment_id": 88838042, "body": "In the catch block you could return. Alternatively instead of <code>val cmd...</code> you could use <code>var cmd: CommandLine? = null</code> and check for <code>null</code> before using <code>cmd</code> in the last line."}, {"owner": {"reputation": 4316, "user_id": 1270000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/43931a46da4ec8856dfea56f2b165bf1?s=128&d=identicon&r=PG", "display_name": "sorifiend", "link": "https://stackoverflow.com/users/1270000/sorifiend"}, "edited": false, "score": 1, "creation_date": 1529370013, "post_id": 50918924, "comment_id": 88838445, "body": "Either check for null before using <code>cmd.getOptionValue(&quot;someArg&quot;)</code>, or in the event that the try block fails then make sure you initialize <code>cmd</code> properly inside your catch block. You know this already.....? Otherwise the simple answer is to set a blank string <code>inputArg = &quot;&quot;;</code> if <code>getOptionValue(&quot;someArg&quot;)</code> returns null? But that would mean you would just need to add checks later in your code to account for an empty string."}, {"owner": {"reputation": 5634, "user_id": 2517730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xojng.jpg?s=128&g=1", "display_name": "Yar", "link": "https://stackoverflow.com/users/2517730/yar"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1529370071, "post_id": 50918924, "comment_id": 88838458, "body": "@MichaelButscher Hey Michael thanks! Wanna post that comment as the answer?"}], "answers": [{"comments": [{"owner": {"reputation": 5634, "user_id": 2517730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xojng.jpg?s=128&g=1", "display_name": "Yar", "link": "https://stackoverflow.com/users/2517730/yar"}, "edited": false, "score": 0, "creation_date": 1529390574, "post_id": 50920306, "comment_id": 88843416, "body": "The 2nd approach is very interesting, thank you for the answer. Just a minor problem with that and that&#39;s if you can&#39;t initiate the object in catch block (<code>CommandLine()</code>) then I don&#39;t see any other option than <code>throw ex</code> which is not what I really want."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1529395083, "post_id": 50920306, "comment_id": 88845894, "body": "But what would you expect to happen then?"}, {"owner": {"reputation": 509, "user_id": 2832996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46814cb72562ea0b2e5b9da4cad32ea6?s=128&d=identicon&r=PG", "display_name": "Aro", "link": "https://stackoverflow.com/users/2832996/aro"}, "reply_to_user": {"reputation": 5634, "user_id": 2517730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xojng.jpg?s=128&g=1", "display_name": "Yar", "link": "https://stackoverflow.com/users/2517730/yar"}, "edited": false, "score": 1, "creation_date": 1529417241, "post_id": 50920306, "comment_id": 88859771, "body": "@Yar In that case, you could just return null from the catch block and make <code>cmd</code> nullable."}], "tags": [], "owner": {"reputation": 509, "user_id": 2832996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46814cb72562ea0b2e5b9da4cad32ea6?s=128&d=identicon&r=PG", "display_name": "Aro", "link": "https://stackoverflow.com/users/2832996/aro"}, "is_accepted": true, "score": 5, "last_activity_date": 1529381518, "last_edit_date": 1529381518, "creation_date": 1529379706, "answer_id": 50920306, "question_id": 50918924, "link": "https://stackoverflow.com/questions/50918924/initializing-non-null-type-variable-before-try-catch/50920306#50920306", "title": "Initializing non-null type variable before try/catch", "body": "<p>You have a few options.</p>\n\n<h3>1) You could use var</h3>\n\n<p>The first option is to make <code>cmd</code> a <code>var</code> and assign it a default value or null. Of course, you'll need to check for null after the try-catch if you make <code>cmd</code> nullable. (I recommend some kind of default value, maybe an <code>EmptyCommandLine</code> of some kind).</p>\n\n<h3>2) Better yet, use try-catch as an expression</h3>\n\n<p>The second option is to use the try-catch as an expression like so:</p>\n\n<pre><code>val cmd: CommandLine = try {\n        parser.parse(\"options\", \"args\")\n    } catch (ex: Exception) {\n        // Must:\n        // 1) Throw, or error in some other way so as to return Nothing.\n        // 2) Return a default/failed value for cmd. Maybe something like EmptyCommandLine or FailedCommandLine(ex)\n        // 3) Make cmd nullable and return null.\n\n        CommandLine() // or, error(\"Unable to parse options!\")\n    }\n\n    val inputArg = cmd.getOptionValue(\"someArg\")\n}\n</code></pre>\n"}], "owner": {"reputation": 5634, "user_id": 2517730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xojng.jpg?s=128&g=1", "display_name": "Yar", "link": "https://stackoverflow.com/users/2517730/yar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 50920306, "answer_count": 1, "score": 1, "last_activity_date": 1529381518, "creation_date": 1529366330, "question_id": 50918924, "link": "https://stackoverflow.com/questions/50918924/initializing-non-null-type-variable-before-try-catch", "title": "Initializing non-null type variable before try/catch", "body": "<p>Say I have this block of code:</p>\n\n<pre><code>val cmd: CommandLine\ntry {\n    cmd = parser.parse(options, args)\n} catch (ex: ParseException) {\n    // do stuff\n}\n\n// error: cmd is not initialized\nval inputArg = cmd.getOptionValue(\"someArg\")\n</code></pre>\n\n<p>I get the error because cmd is not initialized which is expected and normally I'd initialize it with a <code>null</code> value in Java but what if the type is <code>non-null</code> and I don't want to move all my logics to <code>try</code> block?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "google-cloud-firestore"], "answers": [{"comments": [{"owner": {"reputation": 1062, "user_id": 9629698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8kTsS.png?s=128&g=1", "display_name": "DAA", "link": "https://stackoverflow.com/users/9629698/daa"}, "edited": false, "score": 0, "creation_date": 1529401957, "post_id": 50918221, "comment_id": 88849926, "body": "I will try it tonight, but I think this may solve my problem. Thank you!"}, {"owner": {"reputation": 1062, "user_id": 9629698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8kTsS.png?s=128&g=1", "display_name": "DAA", "link": "https://stackoverflow.com/users/9629698/daa"}, "edited": false, "score": 0, "creation_date": 1529519719, "post_id": 50918221, "comment_id": 88907510, "body": "I have been able to fix it thanks to better undestanding Firestore behaviour without connection. It worked like a charm!"}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": true, "score": 6, "last_activity_date": 1529360495, "creation_date": 1529360495, "answer_id": 50918221, "question_id": 50917833, "link": "https://stackoverflow.com/questions/50917833/firebase-firestore-how-to-identify-an-offline-read/50918221#50918221", "title": "Firebase Firestore how to identify an offline read", "body": "<p>If you're offline, the client will first try to connect. Once it figures out that it can't connect, it will try to complete the <code>get()</code> based on the data in the local database. That's a valid action on Firestore, so that's why the task is completed successfully.</p>\n\n<p>You can detect if the results came from the local cache vs which came straight from the server, by <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/QuerySnapshot.html#getMetadata()\" rel=\"noreferrer\">checking the metadata</a>: <code>querySnapshot.getMetadata().isFromCache()</code>. From the docs:</p>\n\n<blockquote>\n  <p><code>true</code> if the snapshot was created from cached data rather than guaranteed up-to-date server data. If your listener has opted into metadata updates (via <code>MetadataChanges.INCLUDE</code>) you will receive another snapshot with <code>isFomCache()</code> equal to false once the client has received up-to-date data from the backend.</p>\n</blockquote>\n"}], "owner": {"reputation": 1062, "user_id": 9629698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8kTsS.png?s=128&g=1", "display_name": "DAA", "link": "https://stackoverflow.com/users/9629698/daa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1280, "favorite_count": 0, "accepted_answer_id": 50918221, "answer_count": 1, "score": 3, "last_activity_date": 1562222028, "creation_date": 1529357902, "last_edit_date": 1562222028, "question_id": 50917833, "link": "https://stackoverflow.com/questions/50917833/firebase-firestore-how-to-identify-an-offline-read", "title": "Firebase Firestore how to identify an offline read", "body": "<p>I am using Firebase Firestore and I'm facing a problem with the read operation:\nI use an onCompleteListener, and inside there, I call different callbacks  if the operation was successfull or not.\nThe problem is, if there is a network issue, the onCompleteListener is called, but task.isSuccessfull returns true!! So I get an empty result which I can't distinguish from a REAL empty result. Is there any way to distinguish a network issue from an empty read?</p>\n\n<p>Thank you very much! My function is just below:</p>\n\n<pre><code>dataBase.collection(COLLECTION)\n        .whereEqualTo(FIELD, searched)\n        .get()\n        .addOnCompleteListener { task: Task&lt;QuerySnapshot&gt; -&gt;\n            if (task.isSuccessful) {\n                listenerSuccess(task.result)\n            } else {\n                listenerError()\n            }\n        }\n</code></pre>\n"}, {"tags": ["mongodb", "kotlin"], "comments": [{"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1529405096, "post_id": 50917465, "comment_id": 88851979, "body": "I&#39;m no expert on mongo repos, but my guess is, that the multiple constructors are somehow messing things up. most examples use a simple <code>@Document data class Person(val id: String, val name: String)</code> or similar. Maybe first try that and if that works, then try to incrementally figure out what&#39;s wrong."}, {"owner": {"reputation": 31, "user_id": 8901926, "user_type": "registered", "profile_image": "https://graph.facebook.com/1526713677417972/picture?type=large", "display_name": "Earl Dean", "link": "https://stackoverflow.com/users/8901926/earl-dean"}, "reply_to_user": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1529424080, "post_id": 50917465, "comment_id": 88863844, "body": "thanks for the reply @Lovis!"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8901926, "user_type": "registered", "profile_image": "https://graph.facebook.com/1526713677417972/picture?type=large", "display_name": "Earl Dean", "link": "https://stackoverflow.com/users/8901926/earl-dean"}, "is_accepted": true, "score": 2, "last_activity_date": 1529548153, "last_edit_date": 1529548153, "creation_date": 1529424486, "answer_id": 50932703, "question_id": 50917465, "link": "https://stackoverflow.com/questions/50917465/reactivemongorepository-mongorepository-does-not-return-id-field/50932703#50932703", "title": "ReactiveMongoRepository / MongoRepository does not return _id field", "body": "<p>So I found a way to solve this for my use case.  I was originally assuming the description in the documentation for the save method would apply \n(Saves a given entity. Use the returned instance for further operations as the save operation might have changed the entity instance completely). </p>\n\n<p>My thought Mongo auto inserting the <code>_id</code> value would apply to this description.  </p>\n\n<p>I changed my model to: </p>\n\n<pre><code>@Document(collection = \"sigmfmeta\")\nclass SigMfMetaDocument : BasicBSONObject {\n\n    constructor(map: Map&lt;String, Any&gt;) : super(map) {\n        val id = ObjectId()\n        this.put(\"_id\", id)\n    }\n\n    constructor() : super()\n}\n</code></pre>\n\n<p>This way I have the _id value after saving for some business logic.  Again I defined my Model this way because the metadata file we are accepting needs to allow a client to add any fields they wish to describe a binary file of RF measurement data.</p>\n"}], "owner": {"reputation": 31, "user_id": 8901926, "user_type": "registered", "profile_image": "https://graph.facebook.com/1526713677417972/picture?type=large", "display_name": "Earl Dean", "link": "https://stackoverflow.com/users/8901926/earl-dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 50932703, "answer_count": 1, "score": 1, "last_activity_date": 1530603897, "creation_date": 1529355964, "last_edit_date": 1530603897, "question_id": 50917465, "link": "https://stackoverflow.com/questions/50917465/reactivemongorepository-mongorepository-does-not-return-id-field", "title": "ReactiveMongoRepository / MongoRepository does not return _id field", "body": "<p>I think this issue probably has to do with my Mongo Document Koltin Data class, but for our business case we need to allow the user to add on any JSON fields to describe their RF data set.  </p>\n\n<p>Extending the BasicDBObject was the best way I have found.  </p>\n\n<p>The mono being returned when I save a SigMfMetaDocument does not contain the _id field.</p>\n\n<ol>\n<li><p>I cannot figure out why the save method does not return a Mono wrapping a SigMfDocument with and _id</p></li>\n<li><p>If there is a better way to create a Type for ReactiveMongoRepository that can dynamically accept any fields I am all ears.</p></li>\n</ol>\n\n<p><code>@Document(collection = \"sigmfmeta\")</code></p>\n\n<pre><code>class SigMfMetaDocument : BasicDBObject {\n\n@Id\n@JsonProperty(\"id\")\nval id: String? = UUID.randomUUID().toString()\n\nconstructor(map: Map&lt;String, Any&gt;) : super(map)\n\nconstructor() : super()\n\nconstructor(key: String, value: Object): super()\n}\n</code></pre>\n\n<p><code>@Repository\ninterface SigMfMetaRepository : ReactiveMongoRepository&lt;SigMfMetaDocument, String&gt;</code></p>\n"}, {"tags": ["kotlin", "retrofit2", "moshi"], "answers": [{"comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1529391383, "post_id": 50917262, "comment_id": 88843859, "body": "FYI if you want IntelliJ to delegate the build to gradle, you can check <a href=\"https://www.jetbrains.com/help/idea/gradle.html#delegate_build_gradle\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 267, "user_id": 9388057, "user_type": "registered", "profile_image": "https://graph.facebook.com/1750698268333853/picture?type=large", "display_name": "Nicholas DiPinto", "link": "https://stackoverflow.com/users/9388057/nicholas-dipinto"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1529420864, "post_id": 50917262, "comment_id": 88862107, "body": "Awesome. Thanks for the tip @user2340612. Hopefully, that relieves some headaches later on."}, {"owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 0, "creation_date": 1530091876, "post_id": 50917262, "comment_id": 89108514, "body": "In which directory are the adapters generated?"}, {"owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 7, "creation_date": 1530096180, "post_id": 50917262, "comment_id": 89111344, "body": "Future readers: I have a multi-module project and the kapt dependency was defined in the core module (A). To have the codegen work properly, one needs to define the kapt in the module (B) which has the model classes. Even though module B has a dependency on module A, it didn&#39;t work until I explicitly added the codegen dependency in B."}], "tags": [], "owner": {"reputation": 267, "user_id": 9388057, "user_type": "registered", "profile_image": "https://graph.facebook.com/1750698268333853/picture?type=large", "display_name": "Nicholas DiPinto", "link": "https://stackoverflow.com/users/9388057/nicholas-dipinto"}, "is_accepted": false, "score": 12, "last_activity_date": 1529354958, "creation_date": 1529354958, "answer_id": 50917262, "question_id": 50916988, "link": "https://stackoverflow.com/questions/50916988/moshi-retrofit2-kotlin-class-not-found-exception/50917262#50917262", "title": "Moshi Retrofit2 Kotlin Class Not Found Exception", "body": "<p>So I got things working. All I had to do was rebuild the project by running gradle build in the terminal (I was originally running it in IntelliJ, but that didn't seem to actually run the build). The key issue was since the build wasn't running, the line in my gradle build script that says, </p>\n\n<pre><code>kapt \"com.squareup.moshi:moshi-kotlin-codegen:$moshi_version\"\n</code></pre>\n\n<p>wasn't running. This line basically gives the compiler to understand annotations in the code like @JsonClass. Without this line, the compiler won't understand the annotation. This was the root cause of my issue. I am keeping this post up in case anyone runs into the same issue.</p>\n"}], "owner": {"reputation": 267, "user_id": 9388057, "user_type": "registered", "profile_image": "https://graph.facebook.com/1750698268333853/picture?type=large", "display_name": "Nicholas DiPinto", "link": "https://stackoverflow.com/users/9388057/nicholas-dipinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4208, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1529354958, "creation_date": 1529353545, "question_id": 50916988, "link": "https://stackoverflow.com/questions/50916988/moshi-retrofit2-kotlin-class-not-found-exception", "title": "Moshi Retrofit2 Kotlin Class Not Found Exception", "body": "<p>I'm trying to learn how to implement Retrofit2 and Moshi inside the Kotlin programming language. However, I seem to be having trouble trying to compile my code.</p>\n\n<p>I define the following data classes/models which map to the json response I receive from the api I am hitting:</p>\n\n<pre><code>@JsonClass(generateAdapter = true)\ndata class Catalogs(\n        val languages: List&lt;LanguageCatalog&gt;\n)\n\n@JsonClass(generateAdapter = true)\ndata class LanguageCatalog(\n    val direction: String,\n    val identifier: String,\n    val title: String,\n    val resources: List&lt;ResourceCatalog&gt;\n)\n\n@JsonClass(generateAdapter = true)\ndata class Project(\n        val identifier: String,\n        val sort: Int,\n        val title: String,\n        val versification: String?\n)\n\n@JsonClass(generateAdapter = true)\ndata class ResourceCatalog(\n        val identifier: String,\n        val modified: String,\n        val projects: List&lt;Project&gt;,\n        val title: String,\n        val version: String\n)\n</code></pre>\n\n<p>Then I have an interface which defines the behavior for the API:</p>\n\n<pre><code>interface Door43Service\n{\n    @GET(\"v3/catalog.json\")\n    fun getFormat() : Observable&lt;Catalogs&gt;\n\n    companion object\n    {\n        fun create(): Door43Service\n        {\n            val retrofit = Retrofit.Builder()\n                    .addCallAdapterFactory(\n                            RxJava2CallAdapterFactory.create()\n                    )\n                    .addConverterFactory(\n                            MoshiConverterFactory.create()\n                    )\n                    .baseUrl(\"https://api.door32.org/\")\n                    .build()\n            return retrofit.create(Door43Service::class.java)\n        }\n    }\n}\n</code></pre>\n\n<p>Lastly, I implemented everything inside a main function to get the json data from the api:</p>\n\n<pre><code>val door43Service by lazy {\n    Door43Service.create()\n}\n\nvar disposable: Disposable? = null\n\nfun main(args: Array&lt;String&gt;)\n{\n    door43Service.getFormat()\n           .subscribe(\n                   { result -&gt; println(result.languages)},\n                   { error -&gt; println(error.message)}\n           )\n}\n</code></pre>\n\n<p>The data that gets returned from the api is pretty long, but an example of it can be found at <a href=\"http://api-info.readthedocs.io/en/latest/door43.html\" rel=\"noreferrer\">http://api-info.readthedocs.io/en/latest/door43.html</a></p>\n\n<p>My issue is I am getting the following error in my stack:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalArgumentException: Unable to create converter for class model.Catalogs\n    for method Door43Service.getFormat\n    at retrofit2.ServiceMethod$Builder.methodError(ServiceMethod.java:755)\n    at retrofit2.ServiceMethod$Builder.createResponseConverter(ServiceMethod.java:741)\n    at retrofit2.ServiceMethod$Builder.build(ServiceMethod.java:172)\n    at retrofit2.Retrofit.loadServiceMethod(Retrofit.java:170)\n    at retrofit2.Retrofit$1.invoke(Retrofit.java:147)\n    at com.sun.proxy.$Proxy0.getFormat(Unknown Source)\n    at MainKt.main(main.kt:11)\nCaused by: java.lang.RuntimeException: Failed to find the generated JsonAdapter class for class model.Catalogs\n    at com.squareup.moshi.StandardJsonAdapters.generatedAdapter(StandardJsonAdapters.java:249)\n    at com.squareup.moshi.StandardJsonAdapters$1.create(StandardJsonAdapters.java:62)\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:130)\n    at retrofit2.converter.moshi.MoshiConverterFactory.responseBodyConverter(MoshiConverterFactory.java:91)\n    at retrofit2.Retrofit.nextResponseBodyConverter(Retrofit.java:330)\n    at retrofit2.Retrofit.responseBodyConverter(Retrofit.java:313)\n    at retrofit2.ServiceMethod$Builder.createResponseConverter(ServiceMethod.java:739)\n    ... 5 more\nCaused by: java.lang.ClassNotFoundException: model.CatalogsJsonAdapter\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:348)\n    at com.squareup.moshi.StandardJsonAdapters.generatedAdapter(StandardJsonAdapters.java:236)\n</code></pre>\n\n<p>At first glance, my understanding is that the compiler thinks I haven't defined an adapter for my Catalogs class, but I think that's supposed to be covered using the <code>@JsonClass(generateradapter = true)</code> annotation. Is there anything I'm missing? Why can't my program generate the adapter for my Catalogs class?</p>\n"}, {"tags": ["java", "android", "gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 587, "user_id": 1663453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d82b6fba5bd6673dfe7ed0112aa8ccf?s=128&d=identicon&r=PG", "display_name": "Sierisimo", "link": "https://stackoverflow.com/users/1663453/sierisimo"}, "is_accepted": true, "score": 0, "last_activity_date": 1529359371, "creation_date": 1529359371, "answer_id": 50918060, "question_id": 50916810, "link": "https://stackoverflow.com/questions/50916810/verifier-rejected-class-kotlin/50918060#50918060", "title": "Verifier Rejected Class - Kotlin", "body": "<p>I'm unsure of the usage of your class but I see the error mentions the <code>Double</code> so my recommendation is:</p>\n\n<ul>\n<li>Unless you really need a <code>Array&lt;Double&gt;</code> which is equivalent to: <code>Double[]</code> in java, you can use: <code>DoubleArray</code> which translates to <code>double[]</code> (the primitive usage will let your class to be more easy to parcelize).</li>\n</ul>\n\n<p>Also try to keep your class more simple. Use a <code>data class</code> if this class only purpose is to hold data and if all the data is needed you can remove the word: <code>constructor</code> from the definition. </p>\n"}], "owner": {"reputation": 133, "user_id": 5176158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8edf99eeaa9004cac3c066918e3680fa?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel N.", "link": "https://stackoverflow.com/users/5176158/daniel-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1272, "favorite_count": 0, "accepted_answer_id": 50918060, "answer_count": 1, "score": 2, "last_activity_date": 1529359371, "creation_date": 1529352746, "question_id": 50916810, "link": "https://stackoverflow.com/questions/50916810/verifier-rejected-class-kotlin", "title": "Verifier Rejected Class - Kotlin", "body": "<p>I'm making an application in Android Studio and keep getting a \"java.lang.VerifyError\". It's on a class (class Place) I made that I've declared with @Parcelize to pass an ArrayList containing Place objects. I know it is related to the writeToParel(Parcel, Int) method it's automatically generated but that's about all I can figure out.</p>\n\n<p>I can't figure out why it keeps showing up, I've done the following recommended solutions and nothing helps: The following (solutions suggested on similar SO posts) did not work:</p>\n\n<ul>\n<li>Clean and re-build (even tried cleaning manually)</li>\n<li>Invalidate Caches &amp;\nRestart IDE</li>\n</ul>\n\n<p>I know the automatic \"parcelization\" is an experimental feature so maybe it's just a bug - if so what workarounds can I try?</p>\n\n<p>The error starts when creating an object from the Place class I created. I copied the relevant part of Place.kt, log, and build.gralde below. Thanks in advance</p>\n\n<p><strong>Place.kt</strong></p>\n\n<pre><code>@Parcelize\nclass Place constructor (var name:String, var placeID:String, var \n                     description:String, var photoRef:String,\n                     var price:Int, var rating:Int,\n                     var location:Array&lt;Double&gt;) : Parcelable {\n\nvar googleURL : String\nvar lat : Double\nvar lng : Double\n\n// Initialization instructions\ninit{\n    this.lat = location[0]\n    this.lng = location[1]\n    googleURL = makeGoogleMapsURL()\n}\n...\n</code></pre>\n\n<p><strong>Log</strong></p>\n\n<pre><code>06-18 15:55:19.174 5815-5815/com.example.daniel.digit E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.daniel.digit, PID: 5815\njava.lang.VerifyError: Verifier rejected class com.example.daniel.digit.Place: void com.example.daniel.digit.Place.writeToParcel(android.os.Parcel, int) failed to verify: void com.example.daniel.digit.Place.writeToParcel(android.os.Parcel, int): [0x48] register v3 has type Precise Reference: java.lang.Double but expected Double (Low Half) (declaration of 'com.example.daniel.digit.Place' appears in /data/app/com.example.daniel.digit-5DnxZcCKWzN_9Wj-TMpmIQ==/split_lib_slice_7_apk.apk)\n    at com.example.daniel.digit.MainActivity$onCreate$1.onClick(MainActivity.kt:79)\n    at android.view.View.performClick(View.java:6597)\n    at android.view.View.performClickInternal(View.java:6574)\n    at android.view.View.access$3100(View.java:778)\n    at android.view.View$PerformClick.run(View.java:25883)\n    at android.os.Handler.handleCallback(Handler.java:873)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loop(Looper.java:193)\n    at android.app.ActivityThread.main(ActivityThread.java:6642)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n</code></pre>\n\n<p><strong>Gradle</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\napply plugin: 'org.jetbrains.kotlin.android.extensions'\nandroidExtensions {\n    experimental = true\n}\n\nandroid {\n    compileSdkVersion 27\n    defaultConfig {\n        applicationId \"com.example.daniel.digit\"\n        minSdkVersion 15\n        targetSdkVersion 26\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation 'com.beust:klaxon:3.0.1'\n    implementation \"org.jetbrains.anko:anko:$anko_version\"\n    implementation 'com.android.support:cardview-v7:27.1.1'\n    implementation 'com.google.android.gms:play-services-places:15.0.1'\n    implementation 'com.google.android.gms:play-services-location:15.0.1'\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:27.1.1'\n    implementation 'com.android.support:design:27.1.1'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.2'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n}\n</code></pre>\n"}, {"tags": ["java", "multithreading", "javafx", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 49227, "user_id": 203657, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ayujB.jpg?s=128&g=1", "display_name": "kleopatra", "link": "https://stackoverflow.com/users/203657/kleopatra"}, "edited": false, "score": 0, "creation_date": 1570278986, "post_id": 50935522, "comment_id": 102867469, "body": "hmm .. looks like you are sleeping the fx application thread (that is inside the runlater) - if so, it&#39;s an absolute no-no-never."}], "tags": [], "owner": {"reputation": 1, "user_id": 9943989, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s9hGlEa696U/AAAAAAAAAAI/AAAAAAAAAAA/3epQ_f1WXSE/photo.jpg?sz=128", "display_name": "\u0623\u062d\u0645\u062f \u062d\u0645\u0648\u062f\u0629", "link": "https://stackoverflow.com/users/9943989/%d8%a3%d8%ad%d9%85%d8%af-%d8%ad%d9%85%d9%88%d8%af%d8%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1529435897, "creation_date": 1529435897, "answer_id": 50935522, "question_id": 50916163, "link": "https://stackoverflow.com/questions/50916163/kotlin-javafx-multi-thread/50935522#50935522", "title": "kotlin javafx multi thread", "body": "<p>Thanks Brian Tompsett  and David Conrad.\nI solved my problem by creating another variable  and make infinite loop that check the variable if changed or not , and i can change the this variable from my server.</p>\n\n<p>so my code will be : </p>\n\n<pre><code>fun show() {\n    show = true\n}\n</code></pre>\n\n<p>for show function and the close request listener :</p>\n\n<pre><code>stage.setOnCloseRequest {\n        it.consume()\n        stage.hide()\n        println(\"hide stage\")\n\n        Platform.runLater {\n            while (!show){\n                Thread.sleep(100)\n            }\n            stage.show()\n            println(\"Show stage\")\n            show = false\n        }\n\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9943989, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s9hGlEa696U/AAAAAAAAAAI/AAAAAAAAAAA/3epQ_f1WXSE/photo.jpg?sz=128", "display_name": "\u0623\u062d\u0645\u062f \u062d\u0645\u0648\u062f\u0629", "link": "https://stackoverflow.com/users/9943989/%d8%a3%d8%ad%d9%85%d8%af-%d8%ad%d9%85%d9%88%d8%af%d8%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529435897, "creation_date": 1529349606, "last_edit_date": 1529364089, "question_id": 50916163, "link": "https://stackoverflow.com/questions/50916163/kotlin-javafx-multi-thread", "title": "kotlin javafx multi thread", "body": "<p>I'm working on a Kotlin application with a JavaFx UI. I have hidden the stage and when I want to show it from another thread it doesn't show!</p>\n\n<p>The main function tries to write some data to a socket. If there's any error it will launch the Form.kt application. When the Form starts it will start ShowThread.kt; inside this class I have created a ServerSocket and still running, when I run main again it will connect to the ServerSocket and write some data to the server, and the server will show the Form after reading the data, but it doesn't show!</p>\n\n<p>This is the main.kt:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    try {\n        val socket = Socket(InetAddress.getLocalHost(), 4848)\n        val bos = BufferedOutputStream(socket.getOutputStream())\n        val request = \"OPEN_UI.command\"\n        val buffer = ByteArray(1024)\n        bos.write(request.toByteArray())\n        bos.flush()\n        bos.close()\n        socket.close()\n    }catch (e : ConnectException){\n        thread {\n            Application.launch(Form::class.java)\n        }\n    }\n}\n</code></pre>\n\n<p>This is the Form.kt:</p>\n\n<pre><code>class Form: Application() {\n\n    lateinit var mStage: Stage\n    override fun start(stage: Stage) {\n        this.mStage = stage\n        val loader = FXMLLoader(javaClass.getResource(\"views/main.fxml\"))\n        val scene = Scene(loader.load(),800.0,600.0)\n        stage.scene = scene\n        scene.stylesheets.add(javaClass.getResource(\"style/main.css\").toExternalForm())\n        stage.show()\n        stage.setOnCloseRequest {\n            it.consume()\n            stage.hide()\n        }\n        val service = ShowThread(this)\n        service.start()\n\n    }\n\n\n    fun show(): Unit {\n        Platform.runLater {\n            mStage.show()\n        }\n    }\n }\n</code></pre>\n\n<p>This is the ShowThread.kt:</p>\n\n<pre><code>class ShowThread(val form: Form): Thread() {\n\n    override fun run() {\n        try {\n            val port = 4848\n            val address = InetAddress.getLocalHost()\n            val socket = ServerSocket(port,50, address)\n\n            while (true) {\n                val client = socket.accept()\n                val ibs = BufferedInputStream(client.getInputStream())\n                val buffer = ByteArray(1024)\n                val request = StringBuilder()\n\n                while (ibs.read(buffer) != -1){\n                    request.append(String(buffer))\n                }\n                println(\"Showing Main Form\")\n                form.show()\n\n            }\n        }catch (e : Exception){\n            println(e.message)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["spring", "postgresql", "kotlin", "jooq"], "comments": [{"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1529399734, "post_id": 50915349, "comment_id": 88848570, "body": "What&#39;s not working?"}, {"owner": {"reputation": 153, "user_id": 9855622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6401efeec995250ebe3fef6959b63bd0?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/9855622/greg"}, "reply_to_user": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1529400612, "post_id": 50915349, "comment_id": 88849072, "body": "I have a problem with the sum. Because I choose two intervals but i get four separate result:      &quot;example&quot;: [         {             &quot;sum&quot;: 1,             &quot;interval&quot;: 1528588800         },         {             &quot;sum&quot;: 1,             &quot;interval&quot;: 1528588800         },         {             &quot;sum&quot;: 1,             &quot;interval&quot;: 1528934400         },         {             &quot;sum&quot;: 1,             &quot;interval&quot;: 1528934400         }     ]  I also change count() -&gt; count().<code>as</code>(&quot;sum&quot;),"}, {"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1529402481, "post_id": 50915349, "comment_id": 88850271, "body": "I&#39;m sorry, I don&#39;t understand what you&#39;re trying to do. Can you give some example input and expected output data?"}, {"owner": {"reputation": 153, "user_id": 9855622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6401efeec995250ebe3fef6959b63bd0?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/9855622/greg"}, "reply_to_user": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1529403108, "post_id": 50915349, "comment_id": 88850691, "body": "I would like to achieve the same as in this case:   <a href=\"https://gis.stackexchange.com/questions/57582/group-by-timestamp-interval-10-minutes-postgresql/127874\" title=\"group by timestamp interval 10 minutes postgresql\">gis.stackexchange.com/questions/57582/&hellip;</a> But instead of the ready interval as there (600 seconds) I want to calculate it on the basis of my formula, which I gave at the beginning of post"}, {"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1529411699, "post_id": 50915349, "comment_id": 88855939, "body": "It would really be much easier if you just showed concrete examples directly on your question, rather than making an analogy to some &quot;similar&quot; question"}, {"owner": {"reputation": 153, "user_id": 9855622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6401efeec995250ebe3fef6959b63bd0?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/9855622/greg"}, "reply_to_user": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1529414811, "post_id": 50915349, "comment_id": 88858064, "body": "Ok i prepare an example and edit post"}, {"owner": {"reputation": 153, "user_id": 9855622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6401efeec995250ebe3fef6959b63bd0?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/9855622/greg"}, "reply_to_user": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1529440852, "post_id": 50915349, "comment_id": 88871766, "body": "@LukasEder I hope that everything is clear now"}, {"owner": {"reputation": 153, "user_id": 9855622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6401efeec995250ebe3fef6959b63bd0?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/9855622/greg"}, "reply_to_user": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 0, "creation_date": 1559583215, "post_id": 50915349, "comment_id": 99458643, "body": "Problem was resolved by similar code."}, {"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "edited": false, "score": 1, "creation_date": 1559633575, "post_id": 50915349, "comment_id": 99472132, "body": "Glad to hear that! You can answer your own questions here on Stack Overflow, if you like. I&#39;m sure it might help someone visiting this question in the future."}], "owner": {"reputation": 153, "user_id": 9855622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6401efeec995250ebe3fef6959b63bd0?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/9855622/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1529518298, "creation_date": 1529346044, "last_edit_date": 1529518298, "question_id": 50915349, "link": "https://stackoverflow.com/questions/50915349/groupby-timestamp-interval-in-jooq", "title": "GroupBy timestamp interval in JOOQ", "body": "<p>I want to group timestamps by a period of time. \n<br>\n<br>\n<strong>EDIT PROBLEM - CHANGE CONCEPT</strong></p>\n\n<p>I prepare SQL: </p>\n\n<pre><code>SELECT s.start_interval, s.end_interval, count(a.create_time)\nFROM (\n   SELECT start_interval, start_interval + ((b.close_date - b.open_date) / 5) AS end_interval\n   FROM b_table b\n     JOIN generate_series(b.open_date, b.close_date, (b.close_date - b.open_date) / 5) start_interval ON (1=1)\n   WHERE b.id = 1\n ) AS s\n LEFT JOIN a_table a ON (a.create_time &gt;= s.start_interval and a.create_time &lt; s.end_interval and a.b_table_id = 1)\nGROUP BY s.start_interval, s.end_interval;\n</code></pre>\n\n<p><strong>(magic number 5 means intervals)</strong></p>\n\n<p>Result of my SQL:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wVhWU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wVhWU.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I resolve this problem in JOOQ (for example generateSeries is not supports)? </p>\n"}, {"tags": ["android", "android-layout", "listview", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 9937145, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HKmx5_fKE1Y/AAAAAAAAAAI/AAAAAAAAAAA/kZukbFxZM5Y/photo.jpg?sz=128", "display_name": "Gabo Walker", "link": "https://stackoverflow.com/users/9937145/gabo-walker"}, "edited": false, "score": 0, "creation_date": 1529341863, "post_id": 50914240, "comment_id": 88828900, "body": "thanks for your help, I did what you suggested and it just closes my app. instead of load the list with the proper layout"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 95, "user_id": 9937145, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HKmx5_fKE1Y/AAAAAAAAAAI/AAAAAAAAAAA/kZukbFxZM5Y/photo.jpg?sz=128", "display_name": "Gabo Walker", "link": "https://stackoverflow.com/users/9937145/gabo-walker"}, "edited": false, "score": 0, "creation_date": 1529342162, "post_id": 50914240, "comment_id": 88829043, "body": "Find the stacktrace"}], "tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": true, "score": 0, "last_activity_date": 1529340932, "creation_date": 1529340932, "answer_id": 50914240, "question_id": 50913892, "link": "https://stackoverflow.com/questions/50913892/customize-listview/50914240#50914240", "title": "Customize ListView", "body": "<p><code>android.R.*</code> is the import for the R class in the <code>android</code> package. Replace it with <code>R.layout.listview.xml</code>, or alternatively <code>com.your.package.R.layout.listview.xml</code> depending on your imports. </p>\n"}], "owner": {"reputation": 95, "user_id": 9937145, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HKmx5_fKE1Y/AAAAAAAAAAI/AAAAAAAAAAA/kZukbFxZM5Y/photo.jpg?sz=128", "display_name": "Gabo Walker", "link": "https://stackoverflow.com/users/9937145/gabo-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "accepted_answer_id": 50914240, "answer_count": 1, "score": 0, "last_activity_date": 1529340996, "creation_date": 1529339588, "last_edit_date": 1529340996, "question_id": 50913892, "link": "https://stackoverflow.com/questions/50913892/customize-listview", "title": "Customize ListView", "body": "<p>I'm working on a ListView:</p>\n\n<p>I just want to simple edit some things in the design of my listview, as changing the size of the text, center it, etc.</p>\n\n<p>I have read that since I'm using the \"SIMPLE_LIST_ITEM_1\", I can not edit it like I want to.</p>\n\n<p>I have made a research and found out that I need to create my own layout of the list I want to use. So I did it, and created a layout called listview.xml like this:</p>\n\n<pre><code>&lt;android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=\"367dp\"\n        android:layout_height=\"142dp\"\n        android:layout_marginBottom=\"8dp\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginStart=\"8dp\"\n        android:layout_marginTop=\"8dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.0\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/txtvlist1\"\n            android:layout_width=\"263dp\"\n            android:layout_height=\"108dp\"\n            android:layout_alignParentEnd=\"true\"\n            android:layout_centerVertical=\"true\"\n            android:layout_marginEnd=\"9dp\"\n            android:gravity=\"top|center\" /&gt;\n\n    &lt;/RelativeLayout&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>So once I defined the layout I wanted to use, I tried it by replacing the <code>android.R.layout.simple_list_item_1</code> with <code>android.R.layout.listview</code>, but as I was expecting it didn't work.</p>\n\n<p>I tried to create some other customed listviews I found in tutorials, but when testing the filter, it closes the app.</p>\n\n<p>All that I need is to change the size of the text and to center it.</p>\n\n<p>This is my original code:</p>\n\n<pre><code>val animalsnames = arrayOf(\"cat\",\"dog\", \"mouse\", \"parrot\", \"lion\", \"panda\")\ninternal lateinit var animalsadapter: ArrayAdapter&lt;String&gt;\n\nval list = findViewById(R.id.list1) as ListView\nanimalsadapter = ArrayAdapter(\n    this@MainActivity,\n    android.R.layout.simple_list_item_1,\n    animalsnames)\nlist.adapter = animalsadapter\n</code></pre>\n\n<p>This is the conditional for selected position item:</p>\n\n<pre><code>list.setOnItemClickListener { adapterView, view, i, l -&gt;\n    when (animalsnames.indexOfFirst { it == animalsadapter.getItem(i) }) {\n        0 -&gt; {\n            webView.loadUrl(\"https://cat.com\")\n            telefono.text = \"phonecat\"\n            webView2.loadUrl(\"http://cat2.com\")\n        }\n\n        1 -&gt; {\n            webView.loadUrl(\"http://dog.com\")\n            telefono.text = \"phonedog\"\n            webView2.loadUrl(\"https://dog2.com\")\n        }\n\n        2 -&gt; {\n            webView.loadUrl(\"https://mouse.com\")\n            telefono.text = \"mousephone\"\n            webView2.loadUrl(\"http://mouse2.com\")\n        }\n</code></pre>\n\n<p>This is the edit tect I'm using as filter:</p>\n\n<pre><code>    var et_search = findViewById(R.id.e_buscar) as EditText\n\n    et_search.addTextChangedListener(object : TextWatcher {\n        override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {\n            animalsadapter.filter.filter(s)\n\n        }\n        override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int) {\n\n        }\n\n        override fun afterTextChanged(s: Editable) {\n\n        }\n    })\n</code></pre>\n"}, {"tags": ["java", "android", "multithreading", "bitmap", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 9957704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-euN8nZFnxO0/AAAAAAAAAAI/AAAAAAAADMY/i-qwSIWO7c4/photo.jpg?sz=128", "display_name": "Tamal Das", "link": "https://stackoverflow.com/users/9957704/tamal-das"}, "edited": false, "score": 1, "creation_date": 1529356017, "post_id": 50913863, "comment_id": 88834968, "body": "I had to research a lot about <code>AsyncTask</code> before it got my work done. Thank you for the suggestion :) This method seemed the most elegant to me."}], "tags": [], "owner": {"reputation": 146, "user_id": 7450505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac0676e332a5560416585e41b78cf62c?s=128&d=identicon&r=PG&f=1", "display_name": "Hasdfa", "link": "https://stackoverflow.com/users/7450505/hasdfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1529339470, "creation_date": 1529339470, "answer_id": 50913863, "question_id": 50913625, "link": "https://stackoverflow.com/questions/50913625/how-to-trigger-a-method-invocation-of-an-activity-from-another-activity/50913863#50913863", "title": "How to trigger a method invocation of an activity from another activity?", "body": "<p>AsnycTask?</p>\n\n<pre><code>typealias Callback = () -&gt; Unit\n\nclass BitmapWorker: AsyncTask&lt;Callback, Void, Callback?&gt;\n    override fun doInBackground(vararg params: Callback): Callback? {\n        // work with bitmap\n        return params.firstOrNull()\n    }\n\n    override fun onPostExecute(finishTask: Callback?) {\n        finishTask?.invoke()\n    }\n}\n</code></pre>\n\n<p>Call this like:</p>\n\n<pre><code>BitmapWorker().execute(fun() {\n    println(\"finished\")\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 9957704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-euN8nZFnxO0/AAAAAAAAAAI/AAAAAAAADMY/i-qwSIWO7c4/photo.jpg?sz=128", "display_name": "Tamal Das", "link": "https://stackoverflow.com/users/9957704/tamal-das"}, "edited": false, "score": 0, "creation_date": 1529351983, "post_id": 50914077, "comment_id": 88833313, "body": "Thanks alot :) The BroadcastReceiver method worked for me."}, {"owner": {"reputation": 7, "user_id": 9957704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-euN8nZFnxO0/AAAAAAAAAAI/AAAAAAAADMY/i-qwSIWO7c4/photo.jpg?sz=128", "display_name": "Tamal Das", "link": "https://stackoverflow.com/users/9957704/tamal-das"}, "edited": false, "score": 0, "creation_date": 1529352816, "post_id": 50914077, "comment_id": 88833629, "body": "Sorry. I&#39;ve corrected it. I am new to stackoverflow. I wasn&#39;t sure what that tick icon was for."}], "tags": [], "owner": {"reputation": 20820, "user_id": 3145960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J90ZI.png?s=128&g=1", "display_name": "Reaz Murshed", "link": "https://stackoverflow.com/users/3145960/reaz-murshed"}, "is_accepted": true, "score": 0, "last_activity_date": 1529340283, "creation_date": 1529340283, "answer_id": 50914077, "question_id": 50913625, "link": "https://stackoverflow.com/questions/50913625/how-to-trigger-a-method-invocation-of-an-activity-from-another-activity/50914077#50914077", "title": "How to trigger a method invocation of an activity from another activity?", "body": "<p>There are several ways of doing that. I would like to refer you some. </p>\n\n<ol>\n<li>You might consider using <code>BroadcastReceiver</code> when you are finished processing your image. You need to register the receiver in your activity which contains the <code>ImageView</code> and after processing the image in another activity, send the broadcast with the desired intent that you are listening to receive. Here's a <a href=\"http://www.vogella.com/tutorials/AndroidBroadcastReceiver/article.html\" rel=\"nofollow noreferrer\">sample implementation</a> on how you can implement a <code>BroadcastReceiver</code>. </li>\n<li>Another way of communicating between activities is starting an activity for a result. See <a href=\"https://developer.android.com/training/basics/intents/result\" rel=\"nofollow noreferrer\">developers documentation</a> to see how you can use <code>startActivityForResult</code> and then get the result from the activity which is processing the image and getting the result back to the calling activity which contains the <code>ImageView</code> in your case. </li>\n</ol>\n\n<p>You might pick any of these two which is best suited according to your use-case. Hope that helps.</p>\n"}], "owner": {"reputation": 7, "user_id": 9957704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-euN8nZFnxO0/AAAAAAAAAAI/AAAAAAAADMY/i-qwSIWO7c4/photo.jpg?sz=128", "display_name": "Tamal Das", "link": "https://stackoverflow.com/users/9957704/tamal-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 50914077, "answer_count": 2, "score": 1, "last_activity_date": 1529340366, "creation_date": 1529338513, "last_edit_date": 1529340366, "question_id": 50913625, "link": "https://stackoverflow.com/questions/50913625/how-to-trigger-a-method-invocation-of-an-activity-from-another-activity", "title": "How to trigger a method invocation of an activity from another activity?", "body": "<p>I have a <code>CropViewActivity</code> that crops an image, saves the cropped image to the external storage. The process of decoding the bitmap and saving it to external storage is done in another thread. So the crop activity finishes, while the image processing still goes on in the background. Now I want a way to inform my other <code>Activity</code>, which contains an <code>ImageView</code>. At the end of the image processing in the background, the <code>ImageView</code> should then fetch the saved image from memory and load it. </p>\n\n<p>How to achieve this inter-thread cum inter-activity communication? Please help.. </p>\n"}, {"tags": ["java", "android", "function", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 253893, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1533615849, "post_id": 51718643, "comment_id": 90398379, "body": "Don&#39;t post comments as answers - the restriction is there for a reason."}, {"owner": {"reputation": 29, "user_id": 4917020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15900362579cb23caa465104bddb2f15?s=128&d=identicon&r=PG", "display_name": "rahmatfajar15", "link": "https://stackoverflow.com/users/4917020/rahmatfajar15"}, "reply_to_user": {"reputation": 253893, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1533616718, "post_id": 51718643, "comment_id": 90398611, "body": "@CertainPerformance I&#39;d like to comment on the question, but I didn&#39;t have the reputation. Should I delete this answer then?"}], "tags": [], "owner": {"reputation": 29, "user_id": 4917020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15900362579cb23caa465104bddb2f15?s=128&d=identicon&r=PG", "display_name": "rahmatfajar15", "link": "https://stackoverflow.com/users/4917020/rahmatfajar15"}, "is_accepted": false, "score": -1, "last_activity_date": 1533614502, "creation_date": 1533614502, "answer_id": 51718643, "question_id": 50912521, "link": "https://stackoverflow.com/questions/50912521/how-to-download-pdf-form-a-url-to-internal-storage-and-open-it-android-studio/51718643#51718643", "title": "how to download pdf form a url, to internal storage and open it : Android studio using kotlin", "body": "<p>Note: Maybe I should use comment section for this, but my reputation is still low so...</p>\n\n<p>I try running your code, the only thing missing is on the download function. It should be:</p>\n\n<pre><code> val destinationInExternalPublicDir = request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, nameOfFile)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 6098397, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_BiJJno9DcY/AAAAAAAAAAI/AAAAAAAAACc/RAJGXe32T0w/photo.jpg?sz=128", "display_name": "Rashpal Singh", "link": "https://stackoverflow.com/users/6098397/rashpal-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1533649781, "creation_date": 1533649781, "answer_id": 51728432, "question_id": 50912521, "link": "https://stackoverflow.com/questions/50912521/how-to-download-pdf-form-a-url-to-internal-storage-and-open-it-android-studio/51728432#51728432", "title": "how to download pdf form a url, to internal storage and open it : Android studio using kotlin", "body": "<p>For download you have to use async task.</p>\n\n<p>like in this example I am downloading mutliple file it can be PDF, Image etc</p>\n\n<pre><code>class DownloadFileAsync(paths: Array&lt;String?&gt;, listener: AsyncResponse?, size: Int) : AsyncTask&lt;String, String, Array&lt;String?&gt;&gt;() {\n    private val listener: AsyncResponse? = listener\n    var current = 0\n    var paths: Array&lt;String?&gt;\n    val downPaths = arrayOfNulls&lt;String&gt;(size)\n\n    lateinit var fpath: String\n    var show = false\n\n\n    init {\n        this.paths = paths\n    }\n\n\n    protected override fun onPreExecute() {\n        super.onPreExecute()\n    }\n\n    protected override fun doInBackground(vararg aurl: String): Array&lt;String?&gt; {\n        val rows = aurl.size\n        while (current &lt; rows) {\n            var count: Int\n            try {\n                println(\"Current: \" + current + \"\\t\\tRows: \" + rows)\n                fpath = getFileName(this.paths[current]!!)\n                val url = URL(this.paths[current])\n                val conexion = url.openConnection()\n                conexion.connect()\n                val lenghtOfFile = conexion.getContentLength()\n                val input = BufferedInputStream(url.openStream(), 512)\n                val file = File(Environment.getExternalStorageDirectory().path.plus(File.separator).plus(fpath))\n                downPaths.set(current, file.absolutePath)\n                if (!file.exists()) file.createNewFile()\n                val output = FileOutputStream(file)\n                val data = ByteArray(512)\n                var total: Long = 0\n                while (true) {\n                    count = input.read(data)\n                    if (count == -1) break\n                    total += count\n                    output.write(data, 0, count)\n                }\n\n\n                show = true\n                output.flush()\n                output.close()\n                input.close()\n                current++\n            } catch (e: Exception) {\n                Log.d(\"Exception\", \"\" + e)\n            }\n        } // while end\n        onPostExecute(downPaths)\n        return downPaths\n    }\n\n    override fun onProgressUpdate(progress: Array&lt;String?&gt;) {\n\n    }\n\n    override fun onPostExecute(result: Array&lt;String?&gt;) {\n        listener?.processFinish(result)\n    }\n\n    private fun getFileName(wholePath: String): String {\n        var name: String? = null\n        val start: Int\n        val end: Int\n        start = wholePath.lastIndexOf('/')\n        end = wholePath.length //lastIndexOf('.');\n        name = wholePath.substring((start + 1), end)\n        return name\n    }\n}\n</code></pre>\n\n<p>After that I am geting the call back of file path via interface \n listener?.processFinish(result)</p>\n"}], "owner": {"reputation": 11, "user_id": 9879995, "user_type": "registered", "profile_image": "https://graph.facebook.com/821132214749256/picture?type=large", "display_name": "Rishabh Kumar Bhardwaj", "link": "https://stackoverflow.com/users/9879995/rishabh-kumar-bhardwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2799, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1533649781, "creation_date": 1529334479, "question_id": 50912521, "link": "https://stackoverflow.com/questions/50912521/how-to-download-pdf-form-a-url-to-internal-storage-and-open-it-android-studio", "title": "how to download pdf form a url, to internal storage and open it : Android studio using kotlin", "body": "<pre><code>class Eco9 : AppCompatActivity() {\n\n    lateinit internal var uri: Uri\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_eco9)\n        this.getActionBar();\n        this.supportActionBar!!.title = \"Class 9th Economics\";\n\n        fab.setOnClickListener { view -&gt;\n            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\n                    .setAction(\"Action\", null).show()\n        }\n        supportActionBar?.setDisplayHomeAsUpEnabled(true)\n\n       val openActivityDownload: Button = findViewById(R.id.eco9ch1)\n        openActivityDownload.setOnClickListener {\n            val s = \"https://drive.google.com/file/d/0B71LXrqWr0mFUTk5WnVyVEQ3MFE/export?format=pdf\"\n            val fname = \"123.pdf\"\n            if (FileExists(fname)) { previewpdf(fname) }\n            else { download(s)\n                Toast.makeText(applicationContext, \"File will download\", Toast.LENGTH_LONG).show()\n            }\n        }\n\n    }\n\n    fun FileExists(name: String): Boolean {\n        val file = File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).path + separator + name)\n        return file.exists()\n    }\n\n    private fun download(s: String) {\n        val downloadManager = getSystemService(Context.DOWNLOAD_SERVICE) as DownloadManager\n        val uri = Uri.parse(s)\n        val request = DownloadManager.Request(uri)\n        val nameOfFile = URLUtil.guessFileName(uri.toString(), null, MimeTypeMap.getFileExtensionFromUrl(uri.toString()))\n        val destinationInExternalPublicDir = request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS)\n        request.setAllowedOverMetered(true)\n        request.setAllowedOverRoaming(true)\n        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE)\n        request.allowScanningByMediaScanner()\n        downloadManager.enqueue(request)\n    }\n\n    private fun previewpdf(name: String) {\n       val file = File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).path + separator + name)\n       val path = fromFile(file)\n        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)\n        val intent = Intent(Intent.ACTION_VIEW, path)\n\n        val chooser = Intent.createChooser(intent, \"Open with\")\n        if (intent.resolveActivity(packageManager) != null)\n            startActivity(chooser)\n        else\n            Toast.makeText(applicationContext, \"No suitable application to open file\", Toast.LENGTH_LONG).show()\n    }\n}\n</code></pre>\n\n<p><strong>I want to download a pdf from given url (s),</strong> I am pressing button named \"echo9ch1\",\nand calling function download(s) if file is not present in internal public download folder and otherwise if it is present, it should open pdf, not download it again. Where am i missing ? I can open 123.pdf, which was downloaded earlier. but I deleted my pdf file and <strong>download function is not working now</strong>. Actually a small problem came, as i was playing with code in download function.Help me with <strong>download()</strong> function, and see preview() and fileExists() function also.\nI added permissions in manifest.xml also. And I want to download pdf without wifi also.</p>\n\n<p>Manifest permissions are :</p>\n\n<pre><code> &lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.READ_PHONE_STATE\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" /&gt;\n</code></pre>\n"}, {"tags": ["android", "mvvm", "kotlin", "android-architecture-components", "android-livedata"], "comments": [{"owner": {"reputation": 4862, "user_id": 4232337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nauo6.jpg?s=128&g=1", "display_name": "NSimon", "link": "https://stackoverflow.com/users/4232337/nsimon"}, "edited": false, "score": 1, "creation_date": 1529330523, "post_id": 50910549, "comment_id": 88822438, "body": "You&#39;re probably looking for <a href=\"https://developer.android.com/reference/android/arch/lifecycle/Transformations.html#switchmap\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/arch/lifecycle/&hellip;</a> in your VM."}, {"owner": {"reputation": 3473, "user_id": 2740621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MpxtQ.png?s=128&g=1", "display_name": "AutonomousApps", "link": "https://stackoverflow.com/users/2740621/autonomousapps"}, "edited": false, "score": 0, "creation_date": 1529333692, "post_id": 50910549, "comment_id": 88824486, "body": "Why not create the live data in your repo and simply pass that up the layers to your view?"}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 5198580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNIVK.jpg?s=128&g=1", "display_name": "Rishabh Jain", "link": "https://stackoverflow.com/users/5198580/rishabh-jain"}, "edited": false, "score": 1, "creation_date": 1596204706, "post_id": 50913135, "comment_id": 111745832, "body": "seems a good answer but how would you solve the problem for lateinitialised livedata objects. For eg: once you get the lists, you want to fetch another kind of data. How would you make that possible without a means to observe it in the view?"}], "tags": [], "owner": {"reputation": 4547, "user_id": 1105239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ELeiH.jpg?s=128&g=1", "display_name": "Mathbl", "link": "https://stackoverflow.com/users/1105239/mathbl"}, "is_accepted": true, "score": 6, "last_activity_date": 1529336711, "creation_date": 1529336711, "answer_id": 50913135, "question_id": 50910549, "link": "https://stackoverflow.com/questions/50910549/sharing-same-mutablelivedata-between-repository-and-viewmodel/50913135#50913135", "title": "Sharing same MutableLiveData between Repository and ViewModel", "body": "<p>I think I figured out how to do it, thanks to @NSimon for the cue.</p>\n\n<p>My repository stayed the same, and my ViewModel looks like this:</p>\n\n<pre><code>class MyViewModel : ViewModel() {\n  private val myRepository = MyRepository()\n\n  private val organizationIdLiveData = MutableLiveData&lt;String&gt;()\n  private val lists = Transformations.switchMap(organizationIdLiveData) { organizationId -&gt; myRepository.getLists(organizationId) }\n\n  fun getLists() : LiveData&lt;Resource&lt;MutableList&lt;Something&gt;&gt;&gt; {\n    return lists\n  }\n\n  fun fetchLists(organizationId: String, forceRefresh: Boolean = false) {\n    if (organizationIdLiveData.value == null || forceRefresh) {\n      organizationIdLiveData.value = organizationId\n    }\n  }\n}\n</code></pre>\n\n<p>I observe <code>getLists()</code> in my fragment, and call <code>viewModel.fetchLists(id)</code> when I want the data. Seems legit?</p>\n"}], "owner": {"reputation": 4547, "user_id": 1105239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ELeiH.jpg?s=128&g=1", "display_name": "Mathbl", "link": "https://stackoverflow.com/users/1105239/mathbl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3207, "favorite_count": 3, "accepted_answer_id": 50913135, "answer_count": 1, "score": 5, "last_activity_date": 1529336711, "creation_date": 1529328214, "question_id": 50910549, "link": "https://stackoverflow.com/questions/50910549/sharing-same-mutablelivedata-between-repository-and-viewmodel", "title": "Sharing same MutableLiveData between Repository and ViewModel", "body": "<p>I'm in the process of wrapping my head around Architecture Components / MVVM.</p>\n\n<p>Let's say I have a repository, a ViewModel and a Fragment. I'm using a <code>Resource</code> class as a wrapper to expose network status, like suggested in the <a href=\"https://developer.android.com/jetpack/docs/guide#addendum\" rel=\"noreferrer\">Guide to architecture components</a>.</p>\n\n<p>My repository currently looks something like this (simplified for brevity):</p>\n\n<pre><code>class MyRepository {\n\n  fun getLists(organizationId: String) {\n    var data = MutableLiveData&lt;Resource&lt;List&lt;Something&gt;&gt;&gt;()\n    data.value = Resource.loading()\n\n    ApolloClient().query(query)\n        .enqueue(object : ApolloCall.Callback&lt;Data&gt;() {\n            override fun onResponse(response: Response&lt;Data&gt;) {\n                response.data()?.let {\n                    data.postValue(Resource.success(it))\n                }\n            }\n\n            override fun onFailure(exception: ApolloException) {\n                data.postValue(Resource.exception(exception))\n            }\n        })\n}\n</code></pre>\n\n<p>Then in the ViewModel, I also declare a MutableLiveData:</p>\n\n<pre><code>var myLiveData = MutableLiveData&lt;Resource&lt;List&lt;Something&gt;&gt;&gt;()\n\nfun getLists(organizationId: String, forceRefresh: Boolean = false) {\n   myLiveData = myRepository.getLists(organizationId)\n}\n</code></pre>\n\n<p>Finally, the Fragment:</p>\n\n<pre><code>viewModel.getLists.observe(this, Observer {\n        it?.let {\n            if (it.status.isLoading()) showLoading() else hideLoading()\n\n            if (it.status == Status.SUCCESS) {\n                it.data?.let {\n                    adapter.replaceData(it)\n                    setupViews()\n                }\n            }\n\n            if (it.status == Status.ERROR) {\n                // Show error\n            }\n        }\n    })\n</code></pre>\n\n<p>As you see, there will be an issue with the observer not being triggered, since the LiveData variable will be reset in the process (the Repository creates a new instance).</p>\n\n<p>I'm trying to figure out the best way to make sure that the same LiveData variable is used between the Repository and ViewModel.</p>\n\n<p>I thought about passing the LiveData from the ViewModel to the getLists method, so that the Repository would be using the object from the ViewModel, but even if it works, it seems wrong to do that. </p>\n\n<p>What I mean is something like that:</p>\n\n<p><strong>ViewModel</strong></p>\n\n<pre><code>var myLiveData = MutableLiveData&lt;Resource&lt;List&lt;Something&gt;&gt;&gt;()\n\nfun getLists(organizationId: String, forceRefresh: Boolean = false) {\n   myRepository.getLists(myLiveData, organizationId)\n}\n</code></pre>\n\n<p><strong>Repository</strong></p>\n\n<pre><code>fun getLists(data: MutableLiveData&lt;Resource&lt;List&lt;Something&gt;&gt;&gt;, organizationId: String) {\n    ...\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "bluetooth", "bluetooth-lowenergy"], "comments": [{"owner": {"reputation": 106, "user_id": 3699321, "user_type": "registered", "profile_image": "https://graph.facebook.com/1258492117/picture?type=large", "display_name": "user3699321", "link": "https://stackoverflow.com/users/3699321/user3699321"}, "edited": false, "score": 1, "creation_date": 1529416429, "post_id": 50910302, "comment_id": 88859218, "body": "I found the problem! I didn&#39;t have the    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt; in the manifest  and the accept from the users in the app. requestPermissions(arrayOf(Manifest.permission.ACCESS_COARSE&zwnj;&#8203;_LOCATION), PERMISSION_REQUEST_COARSE_LOCATION)  With this, it works like a charm!"}], "answers": [{"tags": [], "owner": {"reputation": 113731, "user_id": 250260, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mLw78.png?s=128&g=1", "display_name": "Jorgesys", "link": "https://stackoverflow.com/users/250260/jorgesys"}, "is_accepted": true, "score": 6, "last_activity_date": 1564412528, "creation_date": 1564412528, "answer_id": 57256500, "question_id": 50910302, "link": "https://stackoverflow.com/questions/50910302/list-ble-devices-android-kotlin/57256500#57256500", "title": "List BLE devices Android - Kotlin", "body": "<p>You need to declare permission:</p>\n\n<pre><code>uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/&gt;\n</code></pre>\n\n<p>and you for devices with android 6.0 + request manually this permission:</p>\n\n<pre><code>  override fun onStart() {\n        Log.d(\"ScanDeviceActivity\", \"onStart()\")\n        super.onStart()\n        when (PermissionChecker.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION)) {\n            PackageManager.PERMISSION_GRANTED -&gt; bluetoothLeScanner.startScan(bleScanner)\n            else -&gt; requestPermissions(arrayOf(Manifest.permission.ACCESS_COARSE_LOCATION), 1)\n        }\n    }\n\n\n   override fun onRequestPermissionsResult(requestCode: Int, permissions: Array&lt;out String&gt;, grantResults: IntArray) {\n        when (requestCode) {\n            1 -&gt; when (grantResults) {\n                intArrayOf(PackageManager.PERMISSION_GRANTED) -&gt; {\n                    Log.d(\"ScanDevices\", \"onRequestPermissionsResult(PERMISSION_GRANTED)\")\n                    bluetoothLeScanner.startScan(bleScanner)\n                }\n                else -&gt; {\n                    Log.d(\"ScanDevices\", \"onRequestPermissionsResult(not PERMISSION_GRANTED)\")\n                }\n            }\n            else -&gt; super.onRequestPermissionsResult(requestCode, permissions, grantResults)\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 3699321, "user_type": "registered", "profile_image": "https://graph.facebook.com/1258492117/picture?type=large", "display_name": "user3699321", "link": "https://stackoverflow.com/users/3699321/user3699321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4136, "favorite_count": 1, "accepted_answer_id": 57256500, "answer_count": 1, "score": 8, "last_activity_date": 1565014862, "creation_date": 1529327375, "last_edit_date": 1565014862, "question_id": 50910302, "link": "https://stackoverflow.com/questions/50910302/list-ble-devices-android-kotlin", "title": "List BLE devices Android - Kotlin", "body": "<p>I'm trying to list all BLE devices on an Android device, using Kotlin (the Java-version don't work either) but I don't get any devices or any call back at all, except for a \"scan was already started\"\nI have the correct uses-permission in the manifest.</p>\n\n<p>Here is the current minimum of code, I'm trying with.\nBut even the sample code from Google is listing any devices.\nI'm running on a Pixel with Android version 8.1.0.\nI have it working on iOS, with the basic BLE device list (Swift)!</p>\n\n<pre><code> private val bleScanner = object :ScanCallback() {\n    override fun onScanResult(callbackType: Int, result: ScanResult?) {\n        super.onScanResult(callbackType, result)\n        Log.d(\"DeviceListActivity\",\"onScanResult: ${result?.device?.address} - ${result?.device?.name}\")\n    }\n\n    override fun onBatchScanResults(results: MutableList&lt;ScanResult&gt;?) {\n        super.onBatchScanResults(results)\n        Log.d(\"DeviceListActivity\",\"onBatchScanResults:${results.toString()}\")\n    }\n\n    override fun onScanFailed(errorCode: Int) {\n        super.onScanFailed(errorCode)\n        Log.d(\"DeviceListActivity\", \"onScanFailed: $errorCode\")\n    }\n\n}\n\nprivate val bluetoothLeScanner: BluetoothLeScanner\n    get() {\n        val bluetoothManager = applicationContext.getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager\n        val bluetoothAdapter = bluetoothManager.adapter\n        return bluetoothAdapter.bluetoothLeScanner\n    }\n\nclass ListDevicesAdapter(context: Context?, resource: Int) : ArrayAdapter&lt;String&gt;(context, resource)\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    Log.d(\"DeviceListActivity\", \"onCreate()\")\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_device_list)\n\n\n}\n\noverride fun onStart() {\n    Log.d(\"DeviceListActivity\",\"onStart()\")\n    super.onStart()\n\n    bluetoothLeScanner.startScan(bleScanner)\n\n}\n\noverride fun onStop() {\n    bluetoothLeScanner.stopScan(bleScanner)\n    super.onStop()\n}\n</code></pre>\n"}, {"tags": ["exception", "exception-handling", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1529342480, "post_id": 50910241, "comment_id": 88829155, "body": "Minor detail: your version only catches when classes match exactly, but it should cover subclasses as well. The OP has the same problem, of course."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 4, "last_activity_date": 1529327195, "creation_date": 1529327195, "answer_id": 50910241, "question_id": 50909965, "link": "https://stackoverflow.com/questions/50909965/kotlin-catch-extension/50910241#50910241", "title": "Kotlin: catch extension", "body": "<p>Let's look at the types of the two arugments you're trying to pass to your function:</p>\n\n<pre><code>val kclass1: KClass&lt;NotImplementedException&gt; = NotImplementedException::class\nval kclass2: KClass&lt;IndexOutOfBoundsException&gt; = IndexOutOfBoundsException::class\n</code></pre>\n\n<p>While they are both KClass instances, their type parameters are different - <code>NotImplementedException</code> and <code>IndexOutOfBoundsException</code>. This means that no generic <code>T</code> type parameter can be found for the function that would fit both of these types exactly.</p>\n\n<p>Just for demonstration and explanation purposes, you could help type inference by casting both of your types to <code>KClass&lt;Throwable&gt;</code> (or <code>KClass&lt;Exception&gt;</code>, or <code>KClass&lt;RuntimeException</code>, you get the idea) yourself, that way it could figure out the generic type:</p>\n\n<pre><code>{\n    throw IndexOutOfBoundsException()\n}.catch(NotImplementedException::class as KClass&lt;Throwable&gt;, IndexOutOfBoundsException::class as KClass&lt;Throwable&gt;) {\n    println(\"Caught something: $it\")\n}\n</code></pre>\n\n<p>But the real solution is to use the <code>out</code> keyword to specify <a href=\"https://kotlinlang.org/docs/reference/generics.html#use-site-variance-type-projections\" rel=\"nofollow noreferrer\">use-site variance</a> for the type parameter of the <code>KClass</code> instances:</p>\n\n<pre><code>fun &lt;T : Throwable&gt; (() -&gt; Unit).catch(vararg exceptions: KClass&lt;out T&gt;, catchBlock: (Throwable) -&gt; Unit) {\n    try {\n        this()\n    } catch (e: Throwable) {\n        if (e::class in exceptions) catchBlock(e) else throw e\n    }\n}\n</code></pre>\n\n<p>This way the compiler will find a type for <code>T</code> that's both a subtype of <code>Throwable</code> as specified, and is a supertype of all argument's <code>KClass</code> type parameters - this will be <code>RuntimeException</code> in this case, which you can find out by opening intention actions on the <code>catch</code> call (<kbd>Alt + Enter</kbd> on Windows, <kbd>\u2325\u21a9</kbd> on macOS) and choosing <code>Add explicit type arguments</code>. This will produce the following:</p>\n\n<pre><code>{\n    throw IndexOutOfBoundsException()\n}.catch&lt;RuntimeException&gt;(NotImplementedException::class, IndexOutOfBoundsException::class) {\n    println(\"Caught something: $it\")\n}\n</code></pre>\n"}], "owner": {"reputation": 758, "user_id": 5955376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1634355886825243/picture?type=large", "display_name": "nllsdfx", "link": "https://stackoverflow.com/users/5955376/nllsdfx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1458, "favorite_count": 0, "accepted_answer_id": 50910241, "answer_count": 1, "score": 0, "last_activity_date": 1529327195, "creation_date": 1529326264, "question_id": 50909965, "link": "https://stackoverflow.com/questions/50909965/kotlin-catch-extension", "title": "Kotlin: catch extension", "body": "<p>Because Kotlin doesn't support multiple <code>catch</code> like java does, I want to create extension to partially solve the problem.</p>\n\n<pre><code>fun &lt;T: Throwable&gt;  (() -&gt; Unit).catch(vararg exceptions: KClass&lt;T&gt;, catchBlock: (Throwable) -&gt; Unit) {\n    try {\n        this()\n    } catch (e: Throwable) {\n        if (e::class in exceptions) catchBlock(e) else throw e\n    }\n}\n</code></pre>\n\n<p>That can be called like this:</p>\n\n<pre><code>{\n  throw NotImplementedException.exception()\n}.catch(NotImplementedException::class) {\n   //handle it\n}\n</code></pre>\n\n<p>But the problem is that if to pass several arguments with different types it doesn't work (Type inference failed):</p>\n\n<pre><code>{\n   throw IndexOutOfBoundsException()\n}.catch(NotImplementedException::class, IndexOutOfBoundsException::class) {\n\n}\n</code></pre>\n\n<p>So how can I change signature of the extension to catch several exceptions of different types?</p>\n"}, {"tags": ["java", "kotlin", "rx-java", "reactive-programming"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1529325053, "post_id": 50909183, "comment_id": 88819027, "body": "Apply the <code>subscribeOn</code> to the <code>Observable.create</code> directly."}, {"owner": {"reputation": 4041, "user_id": 495800, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d9cb7002c3b604c61f75e5434ae63306?s=128&d=identicon&r=PG", "display_name": "joecks", "link": "https://stackoverflow.com/users/495800/joecks"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1529325535, "post_id": 50909183, "comment_id": 88819333, "body": "Yes this works. But: It would change the API so that I would need to pass the schedular to the withInit call <code>withInit(call : (ObservableEmitter&lt;T&gt;) -&gt; Unit, schedular : Schedular)</code> and by that I can not transparantly use this in a later client code.  So my API would need to change from:  <code>MyApi.doSomething().subscribeOn(io()).observeOn(main())</code>  to  <code>MyApi.doSomething(io()).subscribeOn(io()).observeOn(main())</code>"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1529325821, "post_id": 50909183, "comment_id": 88819541, "body": "You can&#39;t affect the scheduler the <code>create</code> uses from the outside because of <code>andThen</code>, which switches to it on the main thread because of <code>onSuccess</code> running there. You have to inject the scheduler if you want cusomization."}, {"owner": {"reputation": 4041, "user_id": 495800, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d9cb7002c3b604c61f75e5434ae63306?s=128&d=identicon&r=PG", "display_name": "joecks", "link": "https://stackoverflow.com/users/495800/joecks"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1529326251, "post_id": 50909183, "comment_id": 88819801, "body": "@akarnokd yes this is my observation as well. But it is strange, because it means that whoever calls onComplete() will fuck up the thread that I expected the heavy code is running on. This is a pretty unsatisfying implementation from RX perspective."}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1529326632, "post_id": 50909183, "comment_id": 88820036, "body": "Rx is declarative, you have to specify what to do, plus the location of operators do matter. Who else would be using this peculiar initialization scheme?"}], "owner": {"reputation": 4041, "user_id": 495800, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d9cb7002c3b604c61f75e5434ae63306?s=128&d=identicon&r=PG", "display_name": "joecks", "link": "https://stackoverflow.com/users/495800/joecks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1529326189, "creation_date": 1529323564, "last_edit_date": 1529326189, "question_id": 50909183, "link": "https://stackoverflow.com/questions/50909183/subject-onnext-oncomplete-does-not-run-subscribeon-thread", "title": "Subject.onNext/ onComplete does not run subscribeOn thread", "body": "<p>I am stuck with a very annoying issue. I want to create an Observable that emits some values <strong>after</strong> the initialization of some component. The problem is that the other component behaves strange and calls back on the main thread.</p>\n\n<pre><code>strangeComponent.init(Callback)\n</code></pre>\n\n<p>its callback can be an error or success:</p>\n\n<pre><code>interface Callback {\n   fun onError()\n   fun onSuccess()  &lt;-- this is always called on the main thread\n}\n</code></pre>\n\n<p>Now I want to create an Observable that will only run once the init call was done:</p>\n\n<pre><code>val initSubject = CompletableSubject.create()\n\n&lt;T&gt; fun withInit(call : (ObservableEmitter&lt;T&gt;) -&gt; Unit) =\ninitSubject\n  .doOnSubscribe { startInit() }\n  .andThen(Observable.create{ emitter -&gt; \n     call(emitter) \n  })\n\nfun startInit() {\n   if (!initSubject.hasComplete()) {\n     strangeComponent.init(object : Callback {\n        override fun onSuccess() {\n          // will be called from the main thread\n          initSubject.onComplete()\n        }\n\n        ...\n     }\n   }\n}\n</code></pre>\n\n<p>And I use this like: </p>\n\n<pre><code>withInit {\n  //---- heavy code ------\n  it.onNext(\"Hallo\")\n  it.onNext(\"World\")\n  //---------\n}.subscribeOn(Schedulers.computation())\n .observeOn(AndroidSchedulers.mainThread())\n .subscribe {\n   log(\"received $it\")\n } \n</code></pre>\n\n<p>So it turns out that the  <em>heavy code</em> part is always called from the <strong>main</strong>\nthread instead of the <strong>computation</strong> thread. How do I access the given subscribeOn schedular and how do I wrap a callback so that its thread model does not affect the observable chain?</p>\n\n<p>I tried all kind of constructs including <code>serialized</code> and <code>AsyncSubject</code> etc to\nfix this but it is always consistent.</p>\n"}, {"tags": ["java", "ant", "kotlin"], "comments": [{"owner": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "edited": false, "score": 0, "creation_date": 1529407116, "post_id": 50906329, "comment_id": 88853180, "body": "It might help, if you can provide your ant build.xml file (or relevant excerpts) and your project structure."}], "answers": [{"comments": [{"owner": {"reputation": 298, "user_id": 2682712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/dfjkv.png?s=128&g=1", "display_name": "goodbytes", "link": "https://stackoverflow.com/users/2682712/goodbytes"}, "edited": false, "score": 0, "creation_date": 1529388798, "post_id": 50908632, "comment_id": 88842661, "body": "I have done this. Still it the references to my kotlin classes from other java classes are not working. I do not see any error in the IDE. Only during the ant build."}, {"owner": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "reply_to_user": {"reputation": 298, "user_id": 2682712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/dfjkv.png?s=128&g=1", "display_name": "goodbytes", "link": "https://stackoverflow.com/users/2682712/goodbytes"}, "edited": false, "score": 0, "creation_date": 1529395075, "post_id": 50908632, "comment_id": 88845889, "body": "Are you by any chance using the attribute fork=&quot;yes&quot; on the javac task? I found that to be incompatible with kotlin."}], "tags": [], "owner": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "is_accepted": false, "score": 0, "last_activity_date": 1529321821, "creation_date": 1529321821, "answer_id": 50908632, "question_id": 50906329, "link": "https://stackoverflow.com/questions/50906329/configuring-ant-build-file-of-a-java-project-to-support-kotlin-source-classes/50908632#50908632", "title": "Configuring ANT build file of a java project to support kotlin source classes", "body": "<p>If you use the javac task to compile your sources, you have to add <code>&lt;withKotlin /&gt;</code> to that task. You can find that in the <a href=\"https://kotlinlang.org/docs/reference/using-ant.html\" rel=\"nofollow noreferrer\">docs</a>.\nYou will need to add <code>kotlin-ant.jar</code>.</p>\n"}], "owner": {"reputation": 298, "user_id": 2682712, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/dfjkv.png?s=128&g=1", "display_name": "goodbytes", "link": "https://stackoverflow.com/users/2682712/goodbytes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529321821, "creation_date": 1529313958, "question_id": 50906329, "link": "https://stackoverflow.com/questions/50906329/configuring-ant-build-file-of-a-java-project-to-support-kotlin-source-classes", "title": "Configuring ANT build file of a java project to support kotlin source classes", "body": "<p>I am trying to add a kotlin class for an existing java project. I have replaced a java class with kotlin class and it works fine in the Intellij IDEA when I right click and say \"recompile\". But when I run my previously working ANT build task I am getting \"Error: Cannot fine symbol\" in the messages for my new kotlin code. Please point me to the right documentation order to get an idea of what exactly my problem is here.</p>\n"}, {"tags": ["android", "android-layout", "kotlin"], "comments": [{"owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "edited": false, "score": 0, "creation_date": 1529316688, "post_id": 50906106, "comment_id": 88814019, "body": "I don&#39;t see <code>rateNotAllowed()</code> method call. Where should it be called?"}, {"owner": {"reputation": 375, "user_id": 2343977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/212f782b69a38c509dadb0cd55c51ef8?s=128&d=identicon&r=PG", "display_name": "Alessandro Candon", "link": "https://stackoverflow.com/users/2343977/alessandro-candon"}, "reply_to_user": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "edited": false, "score": 0, "creation_date": 1529324236, "post_id": 50906106, "comment_id": 88818573, "body": "It will be called by a async tasck in background.. I&#39;m shure it is called after the form was submitted."}, {"owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "edited": false, "score": 0, "creation_date": 1529335115, "post_id": 50906106, "comment_id": 88825470, "body": "If changing visibility is called in async task, it can throw exception (as any other UI operation). Is there any <code>try-catch</code> in your async task to check it?"}, {"owner": {"reputation": 375, "user_id": 2343977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/212f782b69a38c509dadb0cd55c51ef8?s=128&d=identicon&r=PG", "display_name": "Alessandro Candon", "link": "https://stackoverflow.com/users/2343977/alessandro-candon"}, "reply_to_user": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "edited": false, "score": 0, "creation_date": 1529772097, "post_id": 50906106, "comment_id": 88999886, "body": "Yes there is a try catch, but the async task doesn&#39;t generate errors, only the view is not updated."}], "owner": {"reputation": 375, "user_id": 2343977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/212f782b69a38c509dadb0cd55c51ef8?s=128&d=identicon&r=PG", "display_name": "Alessandro Candon", "link": "https://stackoverflow.com/users/2343977/alessandro-candon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529313229, "creation_date": 1529313229, "question_id": 50906106, "link": "https://stackoverflow.com/questions/50906106/android-linearlayout-gone-dont-update-automatically", "title": "Android LinearLayout Gone don&#39;t update automatically", "body": "<p>I have a form that it could be submitted and send the data to an API, so when I receive the callback of request done I would like to hide the form and show a view of thanks.\nThis is my layout :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:paddingLeft=\"16dp\"\n    android:paddingRight=\"16dp\"\n    android:orientation=\"vertical\"\n    android:animateLayoutChanges=\"true\"&gt;\n\n    &lt;LinearLayout\n        android:id=\"@+id/thank_you_layout_rate\"\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        android:visibility=\"gone\"\n        tools:ignore=\"UseCompoundDrawables\"&gt;\n\n        &lt;ImageView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:layout_marginTop=\"20dp\"\n            android:src=\"@drawable/ic_check_circle_green_800_48dp\" /&gt;\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:layout_marginTop=\"5dp\"\n            android:fontFamily=\"@font/roboto_medium\"\n            android:gravity=\"center\"\n            android:text=\"@string/thank_you_for_rating\"\n            android:textAppearance=\"@android:style/TextAppearance.Material.Large\"\n            android:textColor=\"@color/DarkBlue\"\n            android:textStyle=\"bold\" /&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;LinearLayout\n        android:id=\"@+id/form_rating\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        android:visibility=\"visible\"&gt;\n        &lt;TextView\n            android:id=\"@+id/textView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            android:layout_marginTop=\"5dp\"\n            android:layout_weight=\"0.1\"\n            android:fontFamily=\"@font/roboto_medium\"\n            android:gravity=\"center\"\n            android:text=\"@string/rate_our_app\"\n            android:textAppearance=\"@android:style/TextAppearance.Material.Large\"\n            android:textColor=\"@color/DarkBlue\"\n            android:textStyle=\"bold\" /&gt;\n\n\n        &lt;RatingBar\n            android:id=\"@+id/ratingbar_rate\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center\"\n            android:layout_marginTop=\"5dp\"\n            android:isIndicator=\"false\"\n            android:numStars=\"5\"\n            android:rating=\"4\"\n            android:stepSize=\"1\" /&gt;\n\n        &lt;View\n            android:id=\"@+id/divider\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"1dp\"\n            android:layout_marginTop=\"10dp\"\n            android:background=\"?android:attr/listDivider\" /&gt;\n\n\n        &lt;EditText\n            android:hint=\"@string/rate_our_app\"\n            android:id=\"@+id/comment_rate\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            android:layout_weight=\"0.8\"\n            android:inputType=\"textMultiLine\"\n            android:textAppearance=\"@android:style/TextAppearance.Material.Large\"\n            android:textColor=\"@color/DarkBlue\"\n            /&gt;\n\n        &lt;Button\n            android:id=\"@+id/save_rate\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"0dp\"\n            android:layout_marginEnd=\"30dp\"\n            android:layout_marginStart=\"30dp\"\n            android:layout_marginTop=\"10dp\"\n            android:layout_marginBottom=\"15dp\"\n            android:layout_weight=\"0.1\"\n            android:background=\"@color/DecathlonBlue\"\n            android:fontFamily=\"@font/roboto_medium\"\n            android:gravity=\"center\"\n            android:text=\"@string/save\"\n            android:textAlignment=\"center\"\n            android:textAppearance=\"@android:style/TextAppearance.Material.Large\"\n            android:textColor=\"@color/LightGrey\"\n            android:textAllCaps=\"true\"/&gt;\n    &lt;/LinearLayout&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>and this is my fragment :</p>\n\n<pre><code>class RateFragment : Fragment(), RateFragmentListener {\n\n    private lateinit var mLoginManager: LoginManager\n    private lateinit var loadingDialog: LoadingDialog\n    private lateinit var ratePresenter: RatePresenter\n    private lateinit var mView: View\n\n    private lateinit var rateNotAllowed: LinearLayout\n    private lateinit var formRating: LinearLayout\n\n    companion object {\n        fun newInstance(loginManager: LoginManager): Fragment {\n            val currentFragment = RateFragment()\n            currentFragment.mLoginManager = loginManager\n            return currentFragment\n        }\n    }\n\n\n    override fun onResume() {\n        this.stopLoadingDialog()\n        super.onResume()\n    }\n\n\n    /**\n     *\n     * @param inflater LayoutInflater\n     * @param container ViewGroup?\n     * @param savedInstanceState Bundle?\n     * @return View?\n     */\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n\n        mView = inflater.inflate(R.layout.rate_fragment, container, false)\n\n        val saveButton = mView.findViewById&lt;Button&gt;(R.id.save_rate)\n        val starBar = mView.findViewById&lt;RatingBar&gt;(R.id.ratingbar_rate)\n        val commentRate = mView.findViewById&lt;EditText&gt;(R.id.comment_rate)\n        rateNotAllowed = mView.findViewById(R.id.thank_you_layout_rate)\n        formRating = mView.findViewById(R.id.form_rating)\n\n        loadingDialog = LoadingDialog(context!!)\n\n        startLoadingDialog()\n\n        initPresenter(activity as Activity, this)\n\n        saveButton.setOnClickListener {\n            this.startLoadingDialog()\n            ratePresenter.sendRating(\n                    commentRate.text.toString(),\n                    starBar.rating\n            )\n        }\n\n        return mView\n    }\n\n    /**\n     *\n     * @param activity Activity\n     */\n    private fun initPresenter(\n            activity: Activity,\n            rateFragment: RateFragment\n    ) {\n        ratePresenter = RatePresenter(activity, mLoginManager, rateFragment)\n    }\n\n    /**\n     * Loading dialog, block the UI\n     */\n    override fun stopLoadingDialog() {\n        loadingDialog.dismiss()\n    }\n\n    /**\n     * Loading dialog, block de UI\n     */\n    override fun startLoadingDialog() {\n        loadingDialog.show()\n    }\n\n\n    override fun rateSent() {\n        stopLoadingDialog()\n    }\n\n    override fun rateError() {\n        activity!!.toast(\"error on sending the rating\")\n        stopLoadingDialog()\n    }\n\n    override fun rateNotAllowed() {\n        formRating.visibility = View.GONE\n        rateNotAllowed.visibility = View.VISIBLE\n    }\n}\n</code></pre>\n\n<p>But the update of the view isn't done automatically only if I change the vie and come back to it ( there is an if inside the presenter that check if a note is sent or not ).</p>\n\n<p>Thank you, regards</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1529311326, "post_id": 50905546, "comment_id": 88811010, "body": "Have you tried to create a minimal, complete and verifiable example (<a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>). Those have helped me in the past when debugging such type of problems."}, {"owner": {"reputation": 128827, "user_id": 653856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6qIEl.png?s=128&g=1", "display_name": "Raghunandan", "link": "https://stackoverflow.com/users/653856/raghunandan"}, "edited": false, "score": 0, "creation_date": 1529313425, "post_id": 50905546, "comment_id": 88812174, "body": "try changing the param to <code>data: Intent?</code> instead of <code>data:Intent</code> and do watch <a href=\"https://www.youtube.com/watch?v=Uizh2WlJtnk\" rel=\"nofollow noreferrer\">youtube.com/watch?v=Uizh2WlJtnk</a> at around 25 mins"}], "answers": [{"tags": [], "owner": {"reputation": 439, "user_id": 6229448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a745b02fefc03fd5917dea58f0b40?s=128&d=identicon&r=PG&f=1", "display_name": "pau1adam", "link": "https://stackoverflow.com/users/6229448/pau1adam"}, "is_accepted": false, "score": 0, "last_activity_date": 1529391189, "creation_date": 1529391189, "answer_id": 50922255, "question_id": 50905546, "link": "https://stackoverflow.com/questions/50905546/getting-runtimeexception-for-kotlin-code/50922255#50922255", "title": "Getting RuntimeException for kotlin code", "body": "<p>The problem with your code is that the data parameter is not nullable, but Android calls it with a null value.</p>\n\n<p>If you override the onActivityResult function in Android Studio the function signature you get is actually </p>\n\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?)\n</code></pre>\n\n<p>as opposed to what you have</p>\n\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent)\n</code></pre>\n\n<p>The difference is the ? after the \"data: Intent\"\nAdd the ? and make the appropriate changes to your code (to account for the nullable value) and it should work.</p>\n"}], "owner": {"reputation": 1414, "user_id": 6280156, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w5NgB.jpg?s=128&g=1", "display_name": "Venky", "link": "https://stackoverflow.com/users/6280156/venky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529391189, "creation_date": 1529311094, "last_edit_date": 1529311209, "question_id": 50905546, "link": "https://stackoverflow.com/questions/50905546/getting-runtimeexception-for-kotlin-code", "title": "Getting RuntimeException for kotlin code", "body": "<p>I am using Bluetooth LE for fetching surrounding devices but I am not getting a <strong>list</strong> and also I am getting <strong>Runtime Exception</strong> here is stack-trace </p>\n\n<pre>\n\n06-18 13:59:33.188 10189-10189/com.labs.aress.bleomronkotlin E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.labs.aress.bleomronkotlin, PID: 10189\njava.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=0, data=null} to activity {com.labs.aress.bleomronkotlin/com.labs.aress.bleomronkotlin.MainActivity}: java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter data\n    at android.app.ActivityThread.deliverResults(ActivityThread.java:4094)\n    at android.app.ActivityThread.handleSendResult(ActivityThread.java:4137)\n    at android.app.ActivityThread.-wrap20(ActivityThread.java)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1529)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:154)\n    at android.app.ActivityThread.main(ActivityThread.java:6123)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:757)\n Caused by: java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter data\n    at com.labs.aress.bleomronkotlin.BaseMainActivity.onActivityResult(BaseMainActivity.kt)\n    at android.app.Activity.dispatchActivityResult(Activity.java:6931)\n    at android.app.ActivityThread.deliverResults(ActivityThread.java:4090)\n    at android.app.ActivityThread.handleSendResult(ActivityThread.java:4137)\u00a0\n    at android.app.ActivityThread.-wrap20(ActivityThread.java)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1529)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n    at android.os.Looper.loop(Looper.java:154)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6123)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:757)\u00a0\n</pre>\n\n<p>code is here</p>\n\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent) {\n        AppLog.dMethodIn()\n        super.onActivityResult(requestCode, resultCode, data)\n        if (REQUEST_CODE_SCAN != requestCode) {\n            AppLog.w(\"Unknown request code : $requestCode\")\n            return\n        }\n        if (BleScanActivity.RESPONSE_CODE_CONNECT != resultCode) {\n            return\n        }\n\n        val discoverPeripheral = data.getParcelableExtra&lt;DiscoverPeripheral?&gt;(BleScanActivity.EXTRA_CONNECT_REQUEST_PERIPHERAL)\n        if (null == discoverPeripheral) {\n            AppLog.e(\"null == discoverPeripheral\")\n            return\n        }\n\n        initDeviceInfoView()\n        initConnectionView()\n\n        onConnect(discoverPeripheral)\n    }\n</code></pre>\n\n<p>I dont understand why data is throwing null</p>\n"}, {"tags": ["android", "kotlin", "kotlin-dokka", "kdoc"], "answers": [{"tags": [], "owner": {"reputation": 3454, "user_id": 237740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AS9RY.png?s=128&g=1", "display_name": "Fred Grott", "link": "https://stackoverflow.com/users/237740/fred-grott"}, "is_accepted": false, "score": 0, "last_activity_date": 1538678773, "last_edit_date": 1538678773, "creation_date": 1538507289, "answer_id": 52614884, "question_id": 50905537, "link": "https://stackoverflow.com/questions/50905537/android-dokka-only-generate-docs-for-my-code-and-skip-everything-else/52614884#52614884", "title": "Android Dokka - Only generate docs for my code and skip everything else", "body": "<p>Paragones had the correct answer to a different so issue</p>\n\n<p><a href=\"https://github.com/Kotlin/dokka/issues/258\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/dokka/issues/258</a></p>\n\n<p>namely you need to add this task and modify it to only delete the stuff you want deleted:</p>\n\n<pre><code>task deleteUnusedDokkaAssets(type: Delete) {\n  file(\"$rootDir/docs\").listFiles().each {        \n    if(it.name.contains(\"android.R\")) project.delete it\n    if(it.name.contains(\"android.support\")) project.delete it\n    if(it.name.contains(\"com.google\")) project.delete it  \n    if(it.name.contains(\"com.crashlytics\")) project.delete it\n  }\n}\n</code></pre>\n\n<p>note you will not need the android.R line with the updated version of dokka</p>\n"}], "owner": {"reputation": 4154, "user_id": 2390217, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1c42289dabee917e679767208ae4c534?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza A. Ahmadi", "link": "https://stackoverflow.com/users/2390217/alireza-a-ahmadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 429, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1538678773, "creation_date": 1529311038, "question_id": 50905537, "link": "https://stackoverflow.com/questions/50905537/android-dokka-only-generate-docs-for-my-code-and-skip-everything-else", "title": "Android Dokka - Only generate docs for my code and skip everything else", "body": "<p>I'm using <code>Dokka v0.9.17</code> for Android. When I run <code>./gradlew dokka</code> it generates the docs but it include so many packages that I don't care about like <code>android.support.fragment</code> and packages for all the third party libraries. How can I tell Dokka to only generate doc for my code?\n<p>\nHow can I remove Dagger <code>_Factory</code> files from the doc?\n<p>\nMy configuration is like this</p>\n\n<pre><code>dokka {\n    moduleName = 'app'\n    outputFormat = 'html'\n    outputDirectory = \"$buildDir/javadoc\"\n    includeNonPublic = true\n    skipEmptyPackages = true\n    noStdlibLink = true\n}\n</code></pre>\n"}, {"tags": ["sqlite", "kotlin"], "comments": [{"owner": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "edited": false, "score": 0, "creation_date": 1529310587, "post_id": 50905305, "comment_id": 88810598, "body": "Take a look at <a href=\"https://developer.android.com/topic/libraries/architecture/room\" rel=\"nofollow noreferrer\">Android Room Persistence</a>. It will simplify your life."}, {"owner": {"reputation": 31, "user_id": 6313101, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/479669253af5a0f055a0b4a3551cca65?s=128&d=identicon&r=PG&f=1", "display_name": "SaiPha", "link": "https://stackoverflow.com/users/6313101/saipha"}, "reply_to_user": {"reputation": 1073, "user_id": 9949315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae16b9d75e4766c1b4f451084d4fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/9949315/maxim"}, "edited": false, "score": 0, "creation_date": 1529310907, "post_id": 50905305, "comment_id": 88810758, "body": "@Maxim, Thanks. I will look and learn it."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6313101, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/479669253af5a0f055a0b4a3551cca65?s=128&d=identicon&r=PG&f=1", "display_name": "SaiPha", "link": "https://stackoverflow.com/users/6313101/saipha"}, "is_accepted": false, "score": 0, "last_activity_date": 1529393898, "creation_date": 1529393898, "answer_id": 50923016, "question_id": 50905305, "link": "https://stackoverflow.com/questions/50905305/no-such-as-table-name-kotlin-sqlite/50923016#50923016", "title": "No such as table: Name kotlin SQLite", "body": "<p>I have solved my problem with update a few line of code. I want to share for other people.</p>\n\n<p>If some one want to read exist Database file from Assests folder with Kotlin. Please have look below.</p>\n\n<p>MainActivity.kt</p>\n\n<pre><code>import android.content.Context\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.widget.Button\nimport android.widget.LinearLayout\nimport android.widget.TextView\nimport kotlinx.android.synthetic.main.activity_main.*\nimport kotlinx.android.synthetic.main.row.*\nimport kotlinx.android.synthetic.main.row.view.*\nimport java.util.ArrayList\n\nclass MainActivity : AppCompatActivity() {\n    var lstUsers=ArrayList&lt;Account&gt;()\n    var dbHelper: DBHelper? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        dbHelper = DBHelper(this)\n        dbHelper!!.createDatabase()\n    }\n\n    fun buGetData(v: View){\n        lstUsers = this.dbHelper!!.getAllUsers() as ArrayList&lt;Account&gt;\n        this.container.removeAllViews()\n        //List View\n        for (account in lstUsers) {\n            // val inflater = baseContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n            // val addView = inflater.inflate(R.layout.row, null)\n            var addView = layoutInflater.inflate(R.layout.row,null)\n            addView.txtUser.text = account.userName\n            addView.txtEmail.text = account.email\n            //add View\n            container.addView(addView)\n        }\n    }\n}\n</code></pre>\n\n<p>DBHelper.kt</p>\n\n<pre><code>import android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.os.Build;\nimport android.util.Log;\n\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class DbHelper extends SQLiteOpenHelper {\n\n    private static String DB_PATH= \"\";\n    private static String DB_NAME= \"account.db\";\n    private SQLiteDatabase mDatabase;\n    private final Context mContext;\n\n    public DbHelper(Context context) {\n        super(context, DB_NAME, null, 11);\n        this.mContext = context;\n        if(Build.VERSION.SDK_INT &gt;= 17){\n            this.DB_PATH = context.getApplicationInfo().dataDir+\"/databases/\";\n            Log.e(\"Path:\", DB_PATH);\n        }else {\n            this.DB_PATH = \"/data/data/\"+context.getPackageName()+\"/databases/\";\n            Log.e(\"Path:\", DB_PATH);\n        }\n\n    }\n\n    @Override\n    public synchronized void close() {\n        if(mDatabase != null){\n            mDatabase.close();\n        }\n        super.close();\n    }\n\n    private boolean checkDatabase(){\n        //Todo: Check Database\n        SQLiteDatabase tempDB = null;\n        try {\n            String path = DB_PATH+DB_NAME;\n            tempDB = SQLiteDatabase.openDatabase(path, null, SQLiteDatabase.OPEN_READONLY);\n        }catch (Exception ex){}\n        if(tempDB!=null){\n            tempDB.close();\n        }\n        return tempDB!=null?true:false;\n    }\n\n    public void copyDatabase(){\n        //Todo: Copy Database\n        try {\n            InputStream myInput = mContext.getAssets().open(DB_NAME);\n            String outputFileName = DB_PATH+DB_NAME;\n            OutputStream myOutput = new FileOutputStream(outputFileName);\n\n            byte[] buffer = new byte[1024];\n            int length;\n            while ((length=myInput.read(buffer))&gt;0){\n                myOutput.write(buffer,0,length);\n            }\n            myOutput.flush();\n            myOutput.close();\n            myInput.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void openDatabase(){\n        //Todo: Open Database\n        String path = DB_PATH+DB_NAME;\n        mDatabase = SQLiteDatabase.openDatabase(path,null, SQLiteDatabase.OPEN_READWRITE);\n    }\n\n    public void createDatabase(){\n        //Todo: Create Database\n        boolean isDBExist = checkDatabase();\n        if (isDBExist){\n        }else {\n            this.getReadableDatabase();\n            try {\n                copyDatabase();\n            }catch (Exception e){throw new Error(\"Copy Database Error\");}\n        }\n    }\n\n    public List&lt;Account&gt;getAllUsers(){\n        //Todo: Get All Users\n        List&lt;Account&gt; temp = new ArrayList&lt;Account&gt;();\n        SQLiteDatabase db = this.getWritableDatabase();\n        Cursor c;\n        try {\n            c = db.rawQuery(\"SELECT * FROM Account\", null);\n            if (c==null) return null;\n            c.moveToFirst();\n            do {\n                Account account = new Account(c.getString(c.getColumnIndex(\"name\")),(c.getString(c.getColumnIndex(\"email\"))));\n                temp.add(account);\n            }while (c.moveToNext());\n            c.close();\n        }catch (Exception e){}\n        db.close();\n        return temp;\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n\n    }\n}\n</code></pre>\n\n<p>main_activity.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n\n    &lt;Button\n        android:id=\"@+id/buGetData\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_margin=\"10dp\"\n        android:text=\"Get Data\" /&gt;\n\n    &lt;LinearLayout\n        android:id=\"@+id/container\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_below=\"@+id/buGetData\"\n        android:layout_centerHorizontal=\"true\"\n        android:layout_marginTop=\"-15dp\"\n        android:orientation=\"vertical\"&gt;&lt;/LinearLayout&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>row.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/txtUserName\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"5dp\"\n        android:text=\"TextView\"\n        android:textSize=\"18sp\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/txtEmail\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"5dp\"\n        android:text=\"TextView\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>Please look the screenshot below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/1jujV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1jujV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note: Please replace your Database file from Assets folder and change the name of your database name and table name from DBHelper.kt at createDataBase Function. </p>\n\n<p>I hope, it will be useful for you.</p>\n"}], "owner": {"reputation": 31, "user_id": 6313101, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/479669253af5a0f055a0b4a3551cca65?s=128&d=identicon&r=PG&f=1", "display_name": "SaiPha", "link": "https://stackoverflow.com/users/6313101/saipha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 455, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529393898, "creation_date": 1529310078, "question_id": 50905305, "link": "https://stackoverflow.com/questions/50905305/no-such-as-table-name-kotlin-sqlite", "title": "No such as table: Name kotlin SQLite", "body": "<p>I have got an error about no such talbe: Account while I am calling data from database. </p>\n\n<p>My database name is \"account.db\" and table name is \"Account\". There are two columns, first is \"name\" and second is \"email\".</p>\n\n<p>I am writing in kotlin language. Please look at below for my DBHelper and DBManager.</p>\n\n<pre><code>import android.content.Context\nimport android.database.Cursor\nimport android.database.sqlite.SQLiteDatabase\nimport android.database.sqlite.SQLiteOpenHelper\nimport android.os.Build\nimport android.widget.Toast\nimport java.io.FileOutputStream\nimport java.io.IOException\nimport java.lang.Exception\nimport java.util.ArrayList\n\nclass  DbManager {\n\n    var DB_PATH = \"\"\n    var DB_NAME = \"account.db\"\n    val dbVersion = 1\n    //CREATE TABLE IF NOT EXISTS MyNotes (ID INTEGER PRIMARY KEY,title TEXT, Description TEXT);\"\n//    val sqlCreateTable = \"CREATE TABLE IF NOT EXISTS \" + dbTable + \" (\" + colID + \" INTEGER PRIMARY KEY,\" +\n//            colTitle + \" TEXT, \" + colDes + \" TEXT);\"\n    var sqlDB: SQLiteDatabase? = null\n\n    constructor(context: Context) {\n        var db = DBHelper(context)\n        sqlDB = db.writableDatabase\n    }\n\n    inner class DBHelper(context: Context) : SQLiteOpenHelper(context, DB_NAME, null, dbVersion) {\n        var mDatabase: SQLiteDatabase? = null\n        var mContext: Context? = null\n\n        //Todo: Get All Data users\n        fun getAllUsers(): List&lt;Account&gt;?{\n            val temp = ArrayList&lt;Account&gt;()\n            val db = writableDatabase\n            var c: Cursor?\n\n            try {\n                c = db.rawQuery(\"SELECT * FROM Account \", null)\n                if (c == null) return null\n                c.moveToFirst()\n\n                do {\n                    val account = Account(c.getString(c.getColumnIndex(\"name\")), c.getString(c.getColumnIndex(\"email\")))\n                    temp.add(account)\n                } while (c.moveToNext())\n                c.close()\n            } catch (e: Exception) {\n            }\n\n            db.close()\n            return temp\n        }\n\n        fun createDataBase() {\n            //Todo: Create Database\n            val isDBExist = checkDataBase()\n            if (isDBExist) { } else {\n                this.readableDatabase\n                try {\n                    copyDataBase()\n                    Toast.makeText(this.mContext, \"Copy has been finished.\", Toast.LENGTH_SHORT).show()\n                } catch (ex: Exception) {\n                }\n            }\n        }\n\n        init {\n\n            if (Build.VERSION.SDK_INT &gt; 17) {\n                DB_PATH = context.applicationInfo.dataDir + \"/databases/\"\n            } else {\n                DB_PATH = \"/data/data/\" + context.packageName + \"/databases/\"\n            }\n\n            this.mContext = mContext\n        }\n\n        override fun close() {\n            if (mDatabase != null)\n                mDatabase!!.close()\n            super.close()\n        }\n\n        fun checkDataBase(): Boolean {\n            //Todo: Check Database\n            var tempDB: SQLiteDatabase? = null\n            try {\n                val path = DB_PATH + DB_NAME\n                tempDB = SQLiteDatabase.openDatabase(path, null, SQLiteDatabase.OPEN_READONLY)\n            } catch (ex: Exception) {\n            }\n\n            if (tempDB != null)\n                tempDB.close()\n            return if (tempDB != null) true else false\n        }\n\n        fun copyDataBase() {\n            //Todo:Copy Database\n\n            try {\n                val myInput = mContext!!.assets.open(DB_NAME)\n                val outputFileName = DB_PATH + DB_NAME\n                val myOutput = FileOutputStream(outputFileName)\n\n                val buffer = ByteArray(1024)\n                var length: Int\n                length= myInput.read(buffer)\n                while (length &gt; 0) {\n                    myOutput.write(buffer, 0, length)\n                }\n                myOutput.flush()\n                myOutput.close()\n                myInput.close()\n\n            } catch (e: IOException) {\n                e.printStackTrace()\n            }\n\n        }\n\n        fun openDataBase() {\n            //Todo: Open Database\n            val path = DB_PATH + DB_NAME\n            mDatabase = SQLiteDatabase.openDatabase(path, null, SQLiteDatabase.OPEN_READWRITE)\n        }\n\n        override fun onCreate(db: SQLiteDatabase) {\n            createDataBase()\n        }\n\n        override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {\n            if(oldVersion&gt;=newVersion){\n                copyDataBase()\n            }\n        }\n\n//        companion object {\n//            var DB_PATH = \"\"\n//            var DB_NAME = \"account.db\"\n//        }\n    }\n\n}\n</code></pre>\n\n<p>Here is my MainActivity.kt</p>\n\n<pre><code>import android.content.Context\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.BaseAdapter\nimport android.widget.Button\nimport android.widget.LinearLayout\nimport android.widget.TextView\nimport kotlinx.android.synthetic.main.activity_main.*\nimport kotlinx.android.synthetic.main.row.*\nimport kotlinx.android.synthetic.main.row.view.*\nimport java.util.ArrayList\n\nclass MainActivity : AppCompatActivity() {\n    var lstUsers=ArrayList&lt;Account&gt;()\n     lateinit var dbHelper: DBHelper\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n         dbHelper = DBHelper(applicationContext)\n         dbHelper.createDataBase()\n    }\n\n    fun buGetData(v: View){\n        //Todo: Load Data from db set to listview\n        LoadData()\n    }\n\n\n    fun LoadData(){\n\n        val accout = dbHelper.getAllUsers()\n        //this.listView.removeAllViews()\n        //List View\n        for (list in accout!!) {\n            lstUsers.add(list)\n        }\n\n\n        var myNotesAdapter= MyAdapter(this, lstUsers)\n        listView.adapter=myNotesAdapter\n\n    }\n\n\n    inner class MyAdapter:BaseAdapter {\n\n        var listMyAdapter = ArrayList&lt;Account&gt;()\n        var context:Context?=null\n        constructor(context:Context, listMyAdapter:ArrayList&lt;Account&gt;):super(){\n            this.listMyAdapter=listMyAdapter\n            this.context=context\n        }\n\n        override fun getView(position: Int, convertView: View?, parent: ViewGroup?): View {\n            var myView=layoutInflater.inflate(R.layout.row,null)\n            var myAc=listMyAdapter[position]\n            myView.txtUser.text = myAc.userName\n            myView.txtEmail.text = myAc.email\n\n            return myView\n        }\n\n        override fun getItem(position: Int): Any {\n         return listMyAdapter[position]\n        }\n\n        override fun getItemId(position: Int): Long {\n            return position.toLong()\n        }\n\n        override fun getCount(): Int {\n            return listMyAdapter.size\n        }\n\n    }\n}\n</code></pre>\n\n<p>The error has shown like the picture below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qWI6v.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qWI6v.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Please help me to solve it. Best regards, Sai Tawng Pha</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 184, "user_id": 7449805, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-hvMDvdEbKO0/AAAAAAAAAAI/AAAAAAAAABQ/sp--DYxhwP0/photo.jpg?sz=128", "display_name": "Georgiy Chebotarev", "link": "https://stackoverflow.com/users/7449805/georgiy-chebotarev"}, "edited": false, "score": 0, "creation_date": 1529319773, "post_id": 50905207, "comment_id": 88815791, "body": "can your show code in java?"}, {"owner": {"reputation": 875, "user_id": 4944773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/z8Xf0.jpg?s=128&g=1", "display_name": "Aarth Tandel", "link": "https://stackoverflow.com/users/4944773/aarth-tandel"}, "reply_to_user": {"reputation": 184, "user_id": 7449805, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-hvMDvdEbKO0/AAAAAAAAAAI/AAAAAAAAABQ/sp--DYxhwP0/photo.jpg?sz=128", "display_name": "Georgiy Chebotarev", "link": "https://stackoverflow.com/users/7449805/georgiy-chebotarev"}, "edited": false, "score": 0, "creation_date": 1529323595, "post_id": 50905207, "comment_id": 88818158, "body": "In Java, I made a copy constructor"}], "answers": [{"comments": [{"owner": {"reputation": 875, "user_id": 4944773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/z8Xf0.jpg?s=128&g=1", "display_name": "Aarth Tandel", "link": "https://stackoverflow.com/users/4944773/aarth-tandel"}, "edited": false, "score": 0, "creation_date": 1529323699, "post_id": 50908049, "comment_id": 88818238, "body": "Ohh I see, I thought the same as my value in object C was also changing. Any idea how can I make a deep copy of object in kotlin?"}], "tags": [], "owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "is_accepted": false, "score": 1, "last_activity_date": 1529319891, "creation_date": 1529319891, "answer_id": 50908049, "question_id": 50905207, "link": "https://stackoverflow.com/questions/50905207/clone-a-object-in-kotlin/50908049#50908049", "title": "Clone a object in kotlin", "body": "<p>You never create a copy of a <code>state</code> object. </p>\n\n<p>This call creates another SwitchClone with values identical to <code>copyDevice</code> itself.</p>\n\n<pre><code>val state = copyDevice.copy(state = copyDevice.state)\n</code></pre>\n\n<p><code>copy()</code> only creates a shallow copy, which means all of your objects, in that case <code>c</code>, <code>copyDevice</code> and <code>state</code> point to the same <code>c.state</code>. </p>\n\n<p>You need to explicitly create a deep copy (depending on what properties are mutable) of state object and assign it to <code>copyDevice.state</code> field.</p>\n"}, {"tags": [], "owner": {"reputation": 875, "user_id": 4944773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/z8Xf0.jpg?s=128&g=1", "display_name": "Aarth Tandel", "link": "https://stackoverflow.com/users/4944773/aarth-tandel"}, "is_accepted": true, "score": 0, "last_activity_date": 1532751435, "last_edit_date": 1532751435, "creation_date": 1532678889, "answer_id": 51553567, "question_id": 50905207, "link": "https://stackoverflow.com/questions/50905207/clone-a-object-in-kotlin/51553567#51553567", "title": "Clone a object in kotlin", "body": "<p>The <code>copy()</code> did not solve my purpose. However <code>clone()</code> did. I added the following line in my code and it worked as I desired.</p>\n\n<pre><code>val state = c.states.clone()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9164, "user_id": 6740698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tFFAJ2BB1co/AAAAAAAAAAI/AAAAAAAAMBM/Mp1krWr_OVA/photo.jpg?sz=128", "display_name": "Xenolion", "link": "https://stackoverflow.com/users/6740698/xenolion"}, "is_accepted": false, "score": 0, "last_activity_date": 1594907749, "creation_date": 1594907749, "answer_id": 62936378, "question_id": 50905207, "link": "https://stackoverflow.com/questions/50905207/clone-a-object-in-kotlin/62936378#62936378", "title": "Clone a object in kotlin", "body": "<p>For Kotlin when using the Kotlin Data Class <code>data class</code> you get a function called  <code>copy()</code> for you. But If your Class is not a <code>Data Class</code> and your project has <code>Gson</code> and you want to copy the whole object ( probably edit after getting it ), Then if all those conditions are true then this is a solution. This is also a DeepCopy. ( For a data Class you can use the function <a href=\"https://kotlinlang.org/docs/reference/data-classes.html#copying\" rel=\"nofollow noreferrer\"><code>copy()</code></a>).</p>\n<p>Then if you are using <code>Gson</code> in your project. Add the function <code>copy()</code>:</p>\n<pre><code>class YourClass () {\n\n// Your class other stuffs here\n\n  fun copy(): YourClass { //Get another instance of YourClass with the values like this!\n      val json = Gson().toJson(this)\n      return Gson().fromJson(json, YourClass::class.java)\n  }\n}\n</code></pre>\n<p>If you want to install Gson then get the <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">latest version here</a>.</p>\n"}], "owner": {"reputation": 875, "user_id": 4944773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/z8Xf0.jpg?s=128&g=1", "display_name": "Aarth Tandel", "link": "https://stackoverflow.com/users/4944773/aarth-tandel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3336, "favorite_count": 0, "accepted_answer_id": 51553567, "answer_count": 3, "score": 0, "last_activity_date": 1594907749, "creation_date": 1529309658, "last_edit_date": 1573857351, "question_id": 50905207, "link": "https://stackoverflow.com/questions/50905207/clone-a-object-in-kotlin", "title": "Clone a object in kotlin", "body": "<p>I have migrated my application from Java to Kotlin. In Java, the copying was working just fine. However, when migrated to Kotline it was not working. After that, I came to know about copy method in Kotlin </p>\n\n<p>I have tied <a href=\"https://stackoverflow.com/questions/49053432/how-to-clone-object-in-kotlin\">this</a>, but it seems I am doing something wrong.</p>\n\n<p>Here is my function : </p>\n\n<pre><code>fun updateSwitchState(deviceName: String, switchNumber: Int): AuraSwitch? {\n    val singleDevice = Switch()\n    for (c in FourNodeDevice) {\n        if (deviceName == c.name) {\n            val copyDevice : SwitchClone = SwitchClone(c.state, c.name)\n            val state = copyDevice.copy(state = copyDevice.state)\n            state.updateState(switchNumber)\n            singleDevice.state = state.state\n            return singleDevice\n        }\n    }\n    return null\n}\n</code></pre>\n\n<p>Whenever I change data in object <code>state</code> in updateState Method the value in object <code>c</code> also gets changed. Any help will be useful</p>\n"}, {"tags": ["kotlin", "kotlinx.coroutines", "kotlin-experimental"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1529334915, "post_id": 50905023, "comment_id": 88825339, "body": "Can&#39;t reproduce. Kotlin 1.2.41 (and yes, using Android)"}, {"owner": {"reputation": 2126, "user_id": 2297550, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/20092a7b6e8eebf36a9c28951bd2261f?s=128&d=identicon&r=PG", "display_name": "user2297550", "link": "https://stackoverflow.com/users/2297550/user2297550"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1530438176, "post_id": 50905023, "comment_id": 89229464, "body": "@Zoe it needed a dependency: <a href=\"https://github.com/Kotlin/kotlinx.coroutines#android\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines#android</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2126, "user_id": 2297550, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/20092a7b6e8eebf36a9c28951bd2261f?s=128&d=identicon&r=PG", "display_name": "user2297550", "link": "https://stackoverflow.com/users/2297550/user2297550"}, "edited": false, "score": 0, "creation_date": 1529310065, "post_id": 50905135, "comment_id": 88810331, "body": "NOT deprecated, see the 3rd line of the error in my question; also see the official doc: <a href=\"https://kotlinlang.org/docs/reference/coroutines.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/coroutines.html</a>"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1529333365, "post_id": 50905135, "comment_id": 88824253, "body": "It&#39;s not deprecated. I have no clue where you see that. yes, the async method in Kotlin anko is deprecated, <b>but not the one in Kotlin coroutines</b>"}], "tags": [], "owner": {"reputation": 185, "user_id": 5254885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/661e01bbf0e2e66c0f814a6829aef29e?s=128&d=identicon&r=PG&f=1", "display_name": "Trusted", "link": "https://stackoverflow.com/users/5254885/trusted"}, "is_accepted": false, "score": -3, "last_activity_date": 1529309361, "creation_date": 1529309361, "answer_id": 50905135, "question_id": 50905023, "link": "https://stackoverflow.com/questions/50905023/kotlin-async-doesnt-compile/50905135#50905135", "title": "kotlin async doesn&#39;t compile", "body": "<p>the <code>async{}</code> method is deprecated from <a href=\"https://kotlinlang.org/docs/reference/whatsnew11.html\" rel=\"nofollow noreferrer\">Kotlin 1.1</a> try:</p>\n\n<pre><code>override fun onResume() {\n    super.onResume()\n    doAsync {\n        Log.d(\"foo\", \"async\")\n    }\n}\n</code></pre>\n\n<p>I suggest to you to read this <a href=\"https://stackoverflow.com/a/44354505/5254885\">question</a></p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 2, "last_activity_date": 1529353618, "creation_date": 1529353618, "answer_id": 50916999, "question_id": 50905023, "link": "https://stackoverflow.com/questions/50905023/kotlin-async-doesnt-compile/50916999#50916999", "title": "kotlin async doesn&#39;t compile", "body": "<p>If you compare signatures listed with <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/async.html\" rel=\"nofollow noreferrer\">https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/async.html</a>, it's very different. </p>\n\n<p>It looks like you are using an old version of coroutines library, and in particular one where <code>context</code> has no default value.</p>\n"}, {"tags": [], "owner": {"reputation": 2126, "user_id": 2297550, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/20092a7b6e8eebf36a9c28951bd2261f?s=128&d=identicon&r=PG", "display_name": "user2297550", "link": "https://stackoverflow.com/users/2297550/user2297550"}, "is_accepted": true, "score": 2, "last_activity_date": 1530438256, "creation_date": 1530438256, "answer_id": 51122177, "question_id": 50905023, "link": "https://stackoverflow.com/questions/50905023/kotlin-async-doesnt-compile/51122177#51122177", "title": "kotlin async doesn&#39;t compile", "body": "<p>In order to use coroutines in an android app it is a must to add a dependency to <code>kotlinx-coroutines-android</code> as described <a href=\"https://github.com/Kotlin/kotlinx.coroutines#android\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 6823856, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbd11644f2692b1b68f2f07f5ba03fa6?s=128&d=identicon&r=PG&f=1", "display_name": "Alison Z", "link": "https://stackoverflow.com/users/6823856/alison-z"}, "is_accepted": false, "score": 0, "last_activity_date": 1546041139, "creation_date": 1546041139, "answer_id": 53965522, "question_id": 50905023, "link": "https://stackoverflow.com/questions/50905023/kotlin-async-doesnt-compile/53965522#53965522", "title": "kotlin async doesn&#39;t compile", "body": "<p>Also, <code>async</code> function can only be used inside a coroutine or suspend function. So even if you have the correct dependencies, if you try to use <code>async</code> in onResume(), your code cannot compile.</p>\n"}], "owner": {"reputation": 2126, "user_id": 2297550, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/20092a7b6e8eebf36a9c28951bd2261f?s=128&d=identicon&r=PG", "display_name": "user2297550", "link": "https://stackoverflow.com/users/2297550/user2297550"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3848, "favorite_count": 1, "accepted_answer_id": 51122177, "answer_count": 4, "score": 0, "last_activity_date": 1546041139, "creation_date": 1529308867, "question_id": 50905023, "link": "https://stackoverflow.com/questions/50905023/kotlin-async-doesnt-compile", "title": "kotlin async doesn&#39;t compile", "body": "<p>The following code doesn't compile, although the <a href=\"https://kotlinlang.org/docs/reference/coroutines.html\" rel=\"nofollow noreferrer\">documentation</a> says it should be as simple as this:</p>\n\n<pre><code>override fun onResume() {\n    super.onResume()\n    async {\n        Log.d(\"foo\", \"async\")\n    }\n}\n</code></pre>\n\n<p>The error is:</p>\n\n<pre><code>...kt: (31, 9): None of the following functions can be called with the arguments supplied:\n@Deprecated public fun &lt;T&gt; async(context: CoroutineContext, start: Boolean, block: suspend CoroutineScope.() -&gt; ???): Deferred&lt;???&gt; defined in kotlinx.coroutines.experimental\npublic fun &lt;T&gt; async(context: CoroutineContext, start: CoroutineStart = ..., block: suspend CoroutineScope.() -&gt; ???): Deferred&lt;???&gt; defined in kotlinx.coroutines.experimental\n</code></pre>\n"}, {"tags": ["android", "scroll", "android-recyclerview", "kotlin", "android-edittext"], "comments": [{"owner": {"reputation": 2471, "user_id": 5360809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1618836835044059/picture?type=large", "display_name": "Maksym V.", "link": "https://stackoverflow.com/users/5360809/maksym-v"}, "edited": false, "score": 0, "creation_date": 1529302570, "post_id": 50903561, "comment_id": 88806831, "body": "You will have to determine if it is end of edittexts scroll and do it from code by yourself"}], "owner": {"reputation": 8612, "user_id": 8874958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39990cd5d2bd537729f7b2b7a1a724a7?s=128&d=identicon&r=PG&f=1", "display_name": "Kishan Solanki", "link": "https://stackoverflow.com/users/8874958/kishan-solanki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1529302435, "creation_date": 1529302435, "question_id": 50903561, "link": "https://stackoverflow.com/questions/50903561/edittext-scrolling-issue-inside-recyclerview", "title": "EditText scrolling issue inside RecyclerView", "body": "<p>I have a multiline EditText like this</p>\n\n<pre><code>&lt;android.support.v7.widget.AppCompatEditText\n    android:id=\"@+id/et_msg\"\n    style=\"@style/commonEditStyle\"        \n    android:layout_width=\"match_parent\"\n    android:layout_height=\"100dp\"\n    android:gravity=\"start\"\n    android:imeOptions=\"actionDone\"\n    android:inputType=\"textMultiLine|textCapWords\"\n    android:overScrollMode=\"always\"\n    android:scrollbarStyle=\"insideInset\"\n    android:scrollbars=\"vertical\" /&gt;\n</code></pre>\n\n<p>I am able to scroll this EditText in adapter by TouchEvent like</p>\n\n<pre><code>et_msg.setOnTouchListener { p0, p1-&gt;\n                    p0!!.parent.requestDisallowInterceptTouchEvent(true)\n                    when (p1!!.action and MotionEvent.ACTION_MASK) {\n                        MotionEvent.ACTION_UP -&gt; p0.parent.requestDisallowInterceptTouchEvent(false)\n                    }\n                    false\n                }\n</code></pre>\n\n<p>But it is not scrolling after the end of EditText is reached. How can I scroll recyclerview after editext's scrolling end is reached?</p>\n"}, {"tags": ["gradle", "kotlin", "jacoco", "coveralls", "gradle-kotlin-dsl"], "answers": [{"comments": [{"owner": {"reputation": 394, "user_id": 565715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/zGoCk.jpg?s=128&g=1", "display_name": "nbaztec", "link": "https://stackoverflow.com/users/565715/nbaztec"}, "edited": false, "score": 0, "creation_date": 1597052646, "post_id": 50935737, "comment_id": 111998236, "body": "Was in the same boat running from coverage to coverage yet no luck with Kotlin. Ended up contributing to coveralls with a Kotlin focused plugin:  <a href=\"https://docs.coveralls.io/kotlin\" rel=\"nofollow noreferrer\">docs.coveralls.io/kotlin</a>"}], "tags": [], "owner": {"reputation": 4588, "user_id": 4126843, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4r8yp.png?s=128&g=1", "display_name": "PHPirate", "link": "https://stackoverflow.com/users/4126843/phpirate"}, "is_accepted": false, "score": 4, "last_activity_date": 1597496158, "last_edit_date": 1597496158, "creation_date": 1529436907, "answer_id": 50935737, "question_id": 50903389, "link": "https://stackoverflow.com/questions/50903389/how-to-upload-test-reports-of-kotlin-sources-to-coveralls/50935737#50935737", "title": "How to upload test reports of Kotlin sources to Coveralls?", "body": "<p>[edit August 2020] @nbaztec wrote a plugin to support Kotlin, please see <a href=\"https://stackoverflow.com/a/63337867/4126843\">his answer</a>.</p>\n<hr />\n<p><strong>Old answer:</strong></p>\n<p>Kotlin is not supported by Coveralls, see for example this open isse that was mentioned in the question as well (in the question it was also mentioned that the workaround presented there does not work): <a href=\"https://github.com/kt3k/coveralls-gradle-plugin/issues/77\" rel=\"nofollow noreferrer\">https://github.com/kt3k/coveralls-gradle-plugin/issues/77</a></p>\n<p>Solution: try <a href=\"https://codecov.io/\" rel=\"nofollow noreferrer\">Codecov.io</a> instead.\nInstall it to GitHub using the <a href=\"https://github.com/marketplace/codecov\" rel=\"nofollow noreferrer\">Marketplace</a> and add to your <code>.travis.yml</code></p>\n<pre><code>after_success:\n  - bash &lt;(curl -s https://codecov.io/bash)\n</code></pre>\n<p>Then commit and push, done!</p>\n<p>You can view the result (after the build finished) at <a href=\"https://codecov.io/gh/githubaccountname/reponame\" rel=\"nofollow noreferrer\">https://codecov.io/gh/githubaccountname/reponame</a></p>\n"}, {"comments": [{"owner": {"reputation": 98, "user_id": 1799441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4RZAt.jpg?s=128&g=1", "display_name": "GonzoBongo", "link": "https://stackoverflow.com/users/1799441/gonzobongo"}, "edited": false, "score": 0, "creation_date": 1605094705, "post_id": 63337867, "comment_id": 114545463, "body": "After I tried to use this plugin to submit the unitTest report I generated for my Kotlin project, I experienced some issues. More concretely I didn&#39;t manage to provide a correct path to my Kotlin source code sets on <code>reportSourceSets</code> after trying many different options. And if I leave this field blank i.e. &quot;&quot;, the compiler will complain with a <code>ClassCastException: java.lang.String cannot be cast to java.io.File</code> Do you have an example on how to provide this path correctly @nbaztec ?"}, {"owner": {"reputation": 394, "user_id": 565715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/zGoCk.jpg?s=128&g=1", "display_name": "nbaztec", "link": "https://stackoverflow.com/users/565715/nbaztec"}, "reply_to_user": {"reputation": 98, "user_id": 1799441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4RZAt.jpg?s=128&g=1", "display_name": "GonzoBongo", "link": "https://stackoverflow.com/users/1799441/gonzobongo"}, "edited": false, "score": 0, "creation_date": 1605182720, "post_id": 63337867, "comment_id": 114575717, "body": "it&#39;s supposed to be a <code>Collection&lt;File&gt;</code> so <code>[file(&quot;src&#47;main&#47;java&quot;), ...]</code> / <code>listOf(file(&quot;src&#47;main&#47;kotlin&quot;), ...)</code> should be used  <a href=\"https://github.com/nbaztec/coveralls-jacoco-gradle-plugin#multi-project-support---android\" rel=\"nofollow noreferrer\">docs</a> might help, I&#39;ll perhaps add more examples on option usage"}], "tags": [], "owner": {"reputation": 394, "user_id": 565715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/zGoCk.jpg?s=128&g=1", "display_name": "nbaztec", "link": "https://stackoverflow.com/users/565715/nbaztec"}, "is_accepted": true, "score": 1, "last_activity_date": 1597496401, "last_edit_date": 1597496401, "creation_date": 1597052976, "answer_id": 63337867, "question_id": 50903389, "link": "https://stackoverflow.com/questions/50903389/how-to-upload-test-reports-of-kotlin-sources-to-coveralls/63337867#63337867", "title": "How to upload test reports of Kotlin sources to Coveralls?", "body": "<p>Had a similar experience with a variety of QA products not supporting or only partially supporting Kotlin codebases. Tried submitting support PRs to a couple of  projects to no avail.</p>\n<p>In the end ended up going with Coveralls and contributed a Kotlin focused plugin for the <a href=\"https://docs.coveralls.io/kotlin\" rel=\"nofollow noreferrer\">platform</a></p>\n<p><a href=\"https://github.com/nbaztec/coveralls-jacoco-gradle-plugin\" rel=\"nofollow noreferrer\">https://github.com/nbaztec/coveralls-jacoco-gradle-plugin</a></p>\n<h2>Usage</h2>\n<p>Include the plugin in your <code>build.gradle.kts</code> (similar for <code>build.gradle</code> files):</p>\n<pre><code>plugins {\n    jacoco\n    id(&quot;com.github.nbaztec.coveralls-jacoco&quot;)\n}\n</code></pre>\n<p>Then set the environment variable <code>COVERALLS_REPO_TOKEN</code> to the token from your Coveralls page.</p>\n<p>Now you can use the <code>coverallsJacoco</code> task to publish a coverage report.</p>\n<p>For more information and usage in CI, see\n<a href=\"https://github.com/nbaztec/coveralls-jacoco-gradle-plugin\" rel=\"nofollow noreferrer\">https://github.com/nbaztec/coveralls-jacoco-gradle-plugin</a></p>\n"}], "owner": {"reputation": 4588, "user_id": 4126843, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4r8yp.png?s=128&g=1", "display_name": "PHPirate", "link": "https://stackoverflow.com/users/4126843/phpirate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "accepted_answer_id": 63337867, "answer_count": 2, "score": 7, "last_activity_date": 1597496401, "creation_date": 1529301664, "question_id": 50903389, "link": "https://stackoverflow.com/questions/50903389/how-to-upload-test-reports-of-kotlin-sources-to-coveralls", "title": "How to upload test reports of Kotlin sources to Coveralls?", "body": "<blockquote>\n  <p>I want to upload my Jacoco test report to Coveralls automatically after my Travis build finishes. It works for Java, but how to configure it for Kotlin?</p>\n</blockquote>\n\n<p><strong>Error message</strong> </p>\n\n<p>I can generate a Jacoco test report locally and on Travis, but when Travis tries to submit to coveralls it fails with message</p>\n\n<pre><code>&gt; Task :coveralls\nNo source file found on the project: \"kotlin-template-project\"\nWith coverage file: /home/travis/build/myname/myreponame/build/reports/jacoco/test/jacocoTestReport.xml\n</code></pre>\n\n<p>Google links me to the Gradle plugin <a href=\"https://github.com/kt3k/coveralls-gradle-plugin/blob/master/src/main/groovy/org/kt3k/gradle/plugin/coveralls/CoverallsTask.groovy\" rel=\"noreferrer\">implementation</a> which shows where it throws this message, which tells me (I think) that the Jacoco report file is found but not the source files which coveralls apparently needs.</p>\n\n<p><strong>What I tried</strong></p>\n\n<p>Hence, I tried pointing the coveralls task to my source files, in all of these ways:</p>\n\n<pre><code>coveralls {\n    sourceDirs += allprojects.sourceSets.main.allSource.srcDirs.flatten()\n    sourceDirs += files(sourceSets.main.kotlin.srcDirs).files.absolutePath\n    project.extensions.coveralls.sourceDirs += project.sourceSets.main.kotlin.srcDirs\n    sourceDirs += ['src/main/kotlin']\n    jacocoReportPath = 'build/reports/jacoco/test/jacocoTestReport.xml'\n    sourceDirs += ['src/test/kotlin']\n    sourceDirs += [\"${projectDir}/src/main/kotlin\"]\n}\n</code></pre>\n\n<p>I also tried adding <code>sourceSets project.sourceSets.main</code> to the <code>jacocoTestReport</code> task.</p>\n\n<p><strong>Project setup</strong></p>\n\n<p>My minimal <code>build.gradle</code> file:</p>\n\n<pre><code>plugins {\n\n    id 'org.jetbrains.kotlin.jvm' version '1.2.50'\n    id 'java' // Required by at least JUnit.\n\n    // Test coverage\n    id 'jacoco'\n\n    // Upload jacoco coverage reports to coveralls\n    id 'com.github.kt3k.coveralls'  version '2.8.2'\n}\n\ndependencies {\n    compile 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'\n\n    // JUnit 5\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.2.0'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.2.0'\n    testRuntime 'org.junit.platform:junit-platform-console:1.2.0'\n\n    // Kotlintest\n    testCompile 'io.kotlintest:kotlintest-core:3.1.6'\n    testCompile 'io.kotlintest:kotlintest-assertions:3.1.6'\n    testCompile 'io.kotlintest:kotlintest-runner-junit5:3.1.6'\n\n    // Spek\n    testCompile 'org.jetbrains.spek:spek-api:1.1.5'\n    testRuntime 'org.jetbrains.spek:spek-junit-platform-engine:1.1.5'\n}\n\nrepositories {\n    mavenCentral()\n    mavenLocal()\n    jcenter()\n}\n\ntest {\n    // Enable JUnit 5 (Gradle 4.6+).\n    useJUnitPlatform()\n\n    // Always run tests, even when nothing changed.\n    dependsOn 'cleanTest'\n\n    // Show test results.\n    testLogging {\n        events \"passed\", \"skipped\", \"failed\"\n    }\n}\n\n// Test coverage reporting\njacocoTestReport {\n    // Enable xml for coveralls.\n    reports {\n        html.enabled = true\n        xml.enabled = true\n        xml.setDestination(file(\"${buildDir}/reports/jacoco/test/jacocoTestReport.xml\"))\n    }\n}\n\ncoveralls {\n    sourceDirs += ['src/main/kotlin']\n    jacocoReportPath = 'build/reports/jacoco/test/jacocoTestReport.xml'\n}\n</code></pre>\n\n<p><strong>Related issues</strong></p>\n\n<ul>\n<li>Essentially the same issue is on <a href=\"https://github.com/kt3k/coveralls-gradle-plugin/issues/32\" rel=\"noreferrer\">https://github.com/kt3k/coveralls-gradle-plugin/issues/32</a> but the solution is to set <code>sourceDirs</code> and <code>jacocoReportPath</code> which I already have tried.</li>\n<li>At <a href=\"https://github.com/kt3k/coveralls-gradle-plugin/issues/39\" rel=\"noreferrer\">https://github.com/kt3k/coveralls-gradle-plugin/issues/39</a> and <a href=\"https://github.com/kt3k/coveralls-gradle-plugin/issues/63\" rel=\"noreferrer\">https://github.com/kt3k/coveralls-gradle-plugin/issues/63</a> it is suggested to add <code>sourceDirs += ['src/main/kotlin']</code> which sounds sensible but doesn't help. Same for, from the first link, <code>sourceDirs = files(sourceSets.main.kotlin.srcDirs).files.absolutePath</code>.</li>\n<li>From <a href=\"https://github.com/kt3k/coveralls-gradle-plugin/issues/77\" rel=\"noreferrer\">https://github.com/kt3k/coveralls-gradle-plugin/issues/77</a> the solution is <code>project.extensions.coveralls.sourceDirs += project.sourceSets.main.kotlin.srcDirs</code> which I tried.</li>\n<li><p>The question <a href=\"https://stackoverflow.com/questions/47470492/kotlin-code-coverage-in-ci-pipeline\">Kotlin code coverage in CI pipeline</a> is phrased rather generally, but a comment points to <a href=\"https://discuss.kotlinlang.org/t/gradle-code-coverage-report/390\" rel=\"noreferrer\">discuss.kotlinlang.org</a> where someone shows a way to improve the Jacoco result regarding kotlin, and the answer links to the Jacoco Gradle plugin which I use and works: when I run the <code>jacocoTestReport</code> task a report is generated in <code>build/reports/jacoco/test/</code>, both in xml and html.</p></li>\n<li><p>The question <a href=\"https://stackoverflow.com/questions/48220460/kotlin-test-coverage\">Kotlin Test Coverage</a> is also phrased general and answered with an unnecessarily complex build file from which I learned nothing new.</p></li>\n<li>The question <a href=\"https://stackoverflow.com/questions/48554157/measure-test-coverage-for-kotlin-code\">Measure test coverage for Kotlin code?</a> claims that the Jacoco report does not work, but for me this is not the case as I said.</li>\n<li>There are similar questions for Java, like <a href=\"https://stackoverflow.com/questions/38867350/tool-for-java-code-coverage-on-github\">Tool for java code coverage on GitHub</a> but for me when I use Java it all works fine.</li>\n</ul>\n\n<p>PS Actually I want to use the Gradle Kotlin DSL, but since nobody seems to use it I'm asking this question for Gradle. But in the end I want this question solved for the Kotlin DSL as well.</p>\n"}, {"tags": ["android", "kotlin", "rx-java2", "rx-android", "android-room"], "comments": [{"owner": {"reputation": 7850, "user_id": 2960788, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/423618eadcdd4a265e38985a911f5c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/2960788/christopher"}, "edited": false, "score": 0, "creation_date": 1529300265, "post_id": 50903138, "comment_id": 88806026, "body": "<code>onNext</code> is executed on MainThread due to your <code>observeOn</code> Operation."}, {"owner": {"reputation": 2810, "user_id": 2325929, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/f8057b78c5e5665878dd52fc5b1f00e5?s=128&d=identicon&r=PG", "display_name": "theanilpaudel", "link": "https://stackoverflow.com/users/2325929/theanilpaudel"}, "reply_to_user": {"reputation": 7850, "user_id": 2960788, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/423618eadcdd4a265e38985a911f5c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/2960788/christopher"}, "edited": false, "score": 0, "creation_date": 1529300410, "post_id": 50903138, "comment_id": 88806073, "body": "what other threads we have?"}], "answers": [{"comments": [{"owner": {"reputation": 2810, "user_id": 2325929, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/f8057b78c5e5665878dd52fc5b1f00e5?s=128&d=identicon&r=PG", "display_name": "theanilpaudel", "link": "https://stackoverflow.com/users/2325929/theanilpaudel"}, "edited": false, "score": 0, "creation_date": 1529300968, "post_id": 50903205, "comment_id": 88806252, "body": "I tried this and it isn&#39;t working. Isn&#39;t it the same thing though"}, {"owner": {"reputation": 7850, "user_id": 2960788, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/423618eadcdd4a265e38985a911f5c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/2960788/christopher"}, "reply_to_user": {"reputation": 2810, "user_id": 2325929, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/f8057b78c5e5665878dd52fc5b1f00e5?s=128&d=identicon&r=PG", "display_name": "theanilpaudel", "link": "https://stackoverflow.com/users/2325929/theanilpaudel"}, "edited": false, "score": 0, "creation_date": 1529301529, "post_id": 50903205, "comment_id": 88806450, "body": "No, because the inserts are executed in the Observable not in the Observer. Is not working is no valid error description."}], "tags": [], "owner": {"reputation": 7850, "user_id": 2960788, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/423618eadcdd4a265e38985a911f5c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/2960788/christopher"}, "is_accepted": false, "score": 2, "last_activity_date": 1529300543, "creation_date": 1529300543, "answer_id": 50903205, "question_id": 50903138, "link": "https://stackoverflow.com/questions/50903138/rxjava-not-running-on-background-thread/50903205#50903205", "title": "RxJava not running on Background thread", "body": "<p>Execute your DB operation within the Observable and not in your Observer:</p>\n\n<pre><code>val obs: Observable&lt;MutableLiveData&lt;List&lt;Source&gt;&gt;&gt;? = Observable.fromCallable(object :Callable&lt;MutableLiveData&lt;List&lt;Source&gt;&gt;&gt;{\n        override fun call(): MutableLiveData&lt;List&lt;Source&gt;&gt; {\n             for(source in mutableLiveData!!.value!!.iterator()){\n                  sourceDao.insert(source)\n             }\n            return mutableLiveData\n        })\n        .subscribeOn(Schedulers.io())?.observeOn(AndroidSchedulers.mainThread())?.unsubscribeOn(Schedulers.io())\n            ?.subscribe(object : Observer&lt;MutableLiveData&lt;List&lt;Source&gt;&gt;&gt;{\n                override fun onComplete() {\n\n                }\n\n                override fun onSubscribe(d: Disposable?) {\n\n                }\n\n                override fun onNext(value: MutableLiveData&lt;List&lt;Source&gt;&gt;?) {\n                    // Nothing todo right more\n                }\n\n                override fun onError(e: Throwable?) {\n                    e?.printStackTrace()\n                }\n            })\n    })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "is_accepted": false, "score": 1, "last_activity_date": 1529301261, "creation_date": 1529301261, "answer_id": 50903325, "question_id": 50903138, "link": "https://stackoverflow.com/questions/50903138/rxjava-not-running-on-background-thread/50903325#50903325", "title": "RxJava not running on Background thread", "body": "<p>It makes sense because you have <code>observeOn</code> the main thread and you are doing your work in the observer (<code>observeOn</code> manages the thread of the observer).</p>\n\n<p>To fix this, you can use flatmap on your <code>obs</code> and do the for loop in there. Since flatmap requires you to return an Observable, you can <code>return Observable.just(true)</code> after your for loop.</p>\n"}], "owner": {"reputation": 2810, "user_id": 2325929, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/f8057b78c5e5665878dd52fc5b1f00e5?s=128&d=identicon&r=PG", "display_name": "theanilpaudel", "link": "https://stackoverflow.com/users/2325929/theanilpaudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1163, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1529301261, "creation_date": 1529300036, "question_id": 50903138, "link": "https://stackoverflow.com/questions/50903138/rxjava-not-running-on-background-thread", "title": "RxJava not running on Background thread", "body": "<p>I am trying to save data in Room and it requires some background thread to save data. So I have created an observable like this</p>\n\n<pre><code>val obs: Observable&lt;MutableLiveData&lt;List&lt;Source&gt;&gt;&gt;? = Observable.fromCallable(object :Callable&lt;MutableLiveData&lt;List&lt;Source&gt;&gt;&gt;{\n            override fun call(): MutableLiveData&lt;List&lt;Source&gt;&gt; {\n\n                return mutableLiveData\n            }\n        })\n</code></pre>\n\n<p>Then I am subscribing, observing and unsubscribing it like this </p>\n\n<pre><code>obs?.subscribeOn(Schedulers.io())?.observeOn(AndroidSchedulers.mainThread())?.unsubscribeOn(Schedulers.io())\n                ?.subscribe(object : Observer&lt;MutableLiveData&lt;List&lt;Source&gt;&gt;&gt;{\n                    override fun onComplete() {\n\n                    }\n\n                    override fun onSubscribe(d: Disposable?) {\n\n                    }\n\n                    override fun onNext(value: MutableLiveData&lt;List&lt;Source&gt;&gt;?) {\n                        for(source in value!!.value!!.iterator()){\n                            sourceDao.insert(source)//this is the line number 87, that logcat is pointing\n                        }\n                    }\n\n                    override fun onError(e: Throwable?) {\n                        e?.printStackTrace()\n                    }\n                })\n</code></pre>\n\n<p>I am subscribing it on the Schedulers.io thread then observing it on the AndroidSchedulers.mainThread() but still I am getting not on background thread error. More specifically</p>\n\n<pre><code>    Caused by: java.lang.IllegalStateException: Cannot access database on the main thread since it may potentially lock the UI for a long period of time.\n        at android.arch.persistence.room.RoomDatabase.assertNotMainThread(RoomDatabase.java:204)\n        at android.arch.persistence.room.RoomDatabase.beginTransaction(RoomDatabase.java:251)\n06-18 11:11:08.674 3732-3732/com.theanilpaudel.technewspro W/System.err:     at com.package.myapp.room.SourceDao_Impl.insert(SourceDao_Impl.java:63)\n        at com.package.myapp.main.MainRepository$saveToRoom$1.onNext(MainRepository.kt:87)\n        at com.package.myapp.main.MainRepository$saveToRoom$1.onNext(MainRepository.kt:76)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "togglebutton", "checked"], "answers": [{"tags": [], "owner": {"reputation": 2850, "user_id": 5676318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCZ7Y.png?s=128&g=1", "display_name": "GianhTran", "link": "https://stackoverflow.com/users/5676318/gianhtran"}, "is_accepted": true, "score": 0, "last_activity_date": 1529296445, "creation_date": 1529296445, "answer_id": 50902711, "question_id": 50902178, "link": "https://stackoverflow.com/questions/50902178/try-to-click-a-togglebutton-and-make-the-other-togglebutton-unchecked-android-s/50902711#50902711", "title": "Try to click a togglebutton and make the other togglebutton unchecked. Android Studio-Kotlin", "body": "<p>define OnClick in XML like below</p>\n\n<pre><code>&lt;ToggleButton\n        android:id=\"@+id/beginnerButton\"\n        android:layout_width=\"wrap_content\"\n        android:onClick=\"clickBeginnerButton\"\n        android:layout_height=\"wrap_content\"\n        /&gt;\n\n    &lt;ToggleButton\n        android:id=\"@+id/balleButton\"\n        android:onClick=\"clickBalleButton\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        /&gt;\n</code></pre>\n\n<p>and in kotlin:</p>\n\n<pre><code>  public fun clickBeginnerButton(view: View) {\n    balleButton.isChecked = false\n  }\n\n  public fun clickBalleButton(view: View) {\n    beginnerButton.isChecked = false\n  }\n</code></pre>\n\n<p>Its will working as your expected</p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 61, "user_id": 9135524, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vHiAtuPcLWI/AAAAAAAAAAI/AAAAAAAAABg/JYySZ2CTc_A/photo.jpg?sz=128", "display_name": "Ilker Kaan ADIGUZEL", "link": "https://stackoverflow.com/users/9135524/ilker-kaan-adiguzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 50902711, "answer_count": 1, "score": 0, "last_activity_date": 1529296445, "creation_date": 1529290586, "question_id": 50902178, "link": "https://stackoverflow.com/questions/50902178/try-to-click-a-togglebutton-and-make-the-other-togglebutton-unchecked-android-s", "title": "Try to click a togglebutton and make the other togglebutton unchecked. Android Studio-Kotlin", "body": "<p>So, hello guys,in android-studio, I've got a horizontal-linear-layout and also got two buttons in it side by side which are togglebuttons, lets call them X and Y, what I'm trying to do is, once I click X, X becomes checked then when I try to click Y, Y becomes checked but X becomes unchecked back, so how would I do it? I try to do this but eventually not worked.</p>\n\n<pre><code>    if (beginnerButton.isChecked) {\n        balleButton.isChecked = false\n    }\n    else if (balleButton.isChecked) {\n        beginnerButton. = false\n    }\n</code></pre>\n"}, {"tags": ["kotlin", "ktor"], "comments": [{"owner": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "edited": false, "score": 0, "creation_date": 1529476760, "post_id": 50901472, "comment_id": 88881095, "body": "What do you mean by &quot;taking the hand&quot; ?"}, {"owner": {"reputation": 267, "user_id": 4528920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-d_0CvSPIXGA/AAAAAAAAAAI/AAAAAAAAA7g/fTZByehmxSM/photo.jpg?sz=128", "display_name": "Vlad", "link": "https://stackoverflow.com/users/4528920/vlad"}, "reply_to_user": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "edited": false, "score": 0, "creation_date": 1529503235, "post_id": 50901472, "comment_id": 88897726, "body": "I cannot hit this endpoint &quot;/smoketest&quot;. Im always redirected to the index.html. Thank you for your help!"}, {"owner": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "edited": false, "score": 0, "creation_date": 1529509084, "post_id": 50901472, "comment_id": 88901743, "body": "Can you post the complete routing setup? Also, what version of ktor are you on?"}, {"owner": {"reputation": 267, "user_id": 4528920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-d_0CvSPIXGA/AAAAAAAAAAI/AAAAAAAAA7g/fTZByehmxSM/photo.jpg?sz=128", "display_name": "Vlad", "link": "https://stackoverflow.com/users/4528920/vlad"}, "reply_to_user": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "edited": false, "score": 0, "creation_date": 1529546204, "post_id": 50901472, "comment_id": 88915821, "body": "I&#39;ve put the link at the end of the post. Thank you again for helping"}], "answers": [{"comments": [{"owner": {"reputation": 267, "user_id": 4528920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-d_0CvSPIXGA/AAAAAAAAAAI/AAAAAAAAA7g/fTZByehmxSM/photo.jpg?sz=128", "display_name": "Vlad", "link": "https://stackoverflow.com/users/4528920/vlad"}, "edited": false, "score": 0, "creation_date": 1529592525, "post_id": 50965188, "comment_id": 88939369, "body": "Hey Andreas, Thank a lot for your quick answer. Although the first one didn&#39;t work for me, displaying the index.html with the second one worked (and its a good trick this tail card). Unfortunately, I cannot find anyway to load all the resources I have in this index.html (for instance a js file in static/js folder at the level of index). Do you have a complementary code for this? (you can check my code again to see what I tried)"}, {"owner": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "reply_to_user": {"reputation": 267, "user_id": 4528920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-d_0CvSPIXGA/AAAAAAAAAAI/AAAAAAAAA7g/fTZByehmxSM/photo.jpg?sz=128", "display_name": "Vlad", "link": "https://stackoverflow.com/users/4528920/vlad"}, "edited": false, "score": 0, "creation_date": 1529593496, "post_id": 50965188, "comment_id": 88940073, "body": "I also use this code to serve resources that are required in index.html:   <code>static(&quot;static&quot;) { files(File(&quot;app&#47;static&quot;)) }</code>"}, {"owner": {"reputation": 267, "user_id": 4528920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-d_0CvSPIXGA/AAAAAAAAAAI/AAAAAAAAA7g/fTZByehmxSM/photo.jpg?sz=128", "display_name": "Vlad", "link": "https://stackoverflow.com/users/4528920/vlad"}, "edited": false, "score": 0, "creation_date": 1529870307, "post_id": 50965188, "comment_id": 89019648, "body": "Thank you very much for your help and answer! It works like a charm"}, {"owner": {"reputation": 1010, "user_id": 7370876, "user_type": "registered", "profile_image": "https://graph.facebook.com/1410113292341710/picture?type=large", "display_name": "Dhruvam Sharma", "link": "https://stackoverflow.com/users/7370876/dhruvam-sharma"}, "edited": false, "score": 0, "creation_date": 1576228579, "post_id": 50965188, "comment_id": 104839156, "body": "Works beautifully. The folder structure helped a lot!"}], "tags": [], "owner": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "is_accepted": true, "score": 8, "last_activity_date": 1601210859, "last_edit_date": 1601210859, "creation_date": 1529573603, "answer_id": 50965188, "question_id": 50901472, "link": "https://stackoverflow.com/questions/50901472/ktor-static-content-routing/50965188#50965188", "title": "Ktor - Static content routing", "body": "<p>I tried reproducing it locally and made it work with two different approaches.</p>\n<ol>\n<li>Put one of these in your static block</li>\n</ol>\n<pre class=\"lang-kotlin prettyprint-override\"><code>file(&quot;*&quot;, &quot;index.html&quot;) // single star will only resolve the first part\n\nfile(&quot;{...}&quot;, &quot;index.html&quot;) // tailcard will match anything\n</code></pre>\n<ol start=\"2\">\n<li>Or, put the following get handler as your last route:</li>\n</ol>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val html = File(&quot;index.html&quot;).readText()\nget(&quot;{...}&quot;) {\n     call.respondText(html, ContentType.Text.Html)\n}\n</code></pre>\n<p>The <code>{...}</code> is a tailcard and matches any request that hasn't been matched yet.</p>\n<p>Documentation available here: <a href=\"http://ktor.io/features/routing.html#path\" rel=\"nofollow noreferrer\">http://ktor.io/features/routing.html#path</a></p>\n<p>Edit:\nFor resources I made the following work:</p>\n<pre><code>fun Route.staticContent() {\n    static {\n        resource(&quot;/&quot;, &quot;index.html&quot;)\n        resource(&quot;*&quot;, &quot;index.html&quot;)\n        static(&quot;static&quot;) {\n            resources(&quot;static&quot;)\n        }\n    }\n}\n</code></pre>\n<p>I can't see your static files in the repository, so here is what it looks like in my project:\n<a href=\"https://i.stack.imgur.com/96njR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/96njR.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 267, "user_id": 4528920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-d_0CvSPIXGA/AAAAAAAAAAI/AAAAAAAAA7g/fTZByehmxSM/photo.jpg?sz=128", "display_name": "Vlad", "link": "https://stackoverflow.com/users/4528920/vlad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4855, "favorite_count": 1, "accepted_answer_id": 50965188, "answer_count": 1, "score": 9, "last_activity_date": 1601210859, "creation_date": 1529281785, "last_edit_date": 1529546172, "question_id": 50901472, "link": "https://stackoverflow.com/questions/50901472/ktor-static-content-routing", "title": "Ktor - Static content routing", "body": "<p>I would love to understand better how Ktor is handling the routing for static content. I have the following hierarchy in my static folder (working directory):</p>\n\n<pre><code>- static\n - index.html\n - (some files)\n - static\n  - css (directory)\n  - js (directory)\n  - (some files)\n</code></pre>\n\n<p>I'd like to serve all of them. So I was using directly this code in <code>routing</code>:</p>\n\n<pre><code>static {\n  defaultResource(\"index.html\", \"static\")\n  resources(\"static\")\n}\n</code></pre>\n\n<p>Which works very well, but the issue is that it's taking the hand on all requests including my small <code>get</code>:</p>\n\n<pre><code>get(\"/smoketest\"){\n  call.respondText(\"smoke test!\", ContentType.Text.Plain)\n}\n</code></pre>\n\n<p>What would be the best to handle in general the static content in Ktor?</p>\n\n<p><a href=\"https://github.com/vpasquier/sprint-review/blob/feature-34-reactjs/sprint-review-server/src/main/kotlin/com/sprintreview/Server.kt#L34-L54\" rel=\"noreferrer\">Here is the code</a></p>\n\n<p>Thank you</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 1368, "user_id": 8064335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mOgy4.jpg?s=128&g=1", "display_name": "tompee", "link": "https://stackoverflow.com/users/8064335/tompee"}, "edited": false, "score": 0, "creation_date": 1529298629, "post_id": 50900906, "comment_id": 88805629, "body": "can I see your application module and http module?"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1529310324, "post_id": 50900906, "comment_id": 88810467, "body": "I think I had a very similar use case in the past: <a href=\"https://stackoverflow.com/questions/48078519/dagger-2-component-with-differently-scoped-modules\" title=\"dagger 2 component with differently scoped modules\">stackoverflow.com/questions/48078519/&hellip;</a> EDIT: maybe it was not &quot;very similar&quot;, but still it may help you ;)"}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1529432223, "post_id": 50900906, "comment_id": 88867796, "body": "If you want an answer to <i>What&#39;s the proper solution in this case?</i> you should explain what it is that you&#39;re trying to do and achieve. Add an explanation why you need component dependencies, why subcomponents won&#39;t work, and also include some sample code or description of what the components do. The way I see it you can merge your Activity and Landing component, to make it a subcomponent like most of us do."}], "answers": [{"comments": [{"owner": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "edited": false, "score": 1, "creation_date": 1529517457, "post_id": 50939419, "comment_id": 88906441, "body": "+1, though &quot;plus methods&quot; by that name are more closely associated with Dagger 1, even though that exact syntax works for Dagger 2. Future readers might learn more in the Dagger 2 documentation by searching for &quot;subcomponents&quot;, as in the <a href=\"https://google.github.io/dagger/subcomponents\" rel=\"nofollow noreferrer\">Dagger User&#39;s Guide</a> or on the <a href=\"https://google.github.io/dagger/api/latest/dagger/Component.html#subcomponents\" rel=\"nofollow noreferrer\">Component documentation</a>."}], "tags": [], "owner": {"reputation": 2248, "user_id": 2874139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdde8dd61165426271077ca6d04d3c00?s=128&d=identicon&r=PG", "display_name": "Mostafa Gazar", "link": "https://stackoverflow.com/users/2874139/mostafa-gazar"}, "is_accepted": false, "score": 1, "last_activity_date": 1529465591, "last_edit_date": 1529465591, "creation_date": 1529462297, "answer_id": 50939419, "question_id": 50900906, "link": "https://stackoverflow.com/questions/50900906/dagger-2-and-component-dependency-in-android/50939419#50939419", "title": "Dagger 2 and component dependency in Android", "body": "<p>One common way to address this is to add a <code>plus</code> method to your parent component. So <code>ActivityComponent</code> is technically <code>AppComponent</code> + <code>ActivityComponent</code> and <code>LandingComponent</code> is <code>AppComponent</code> + <code>ActivityComponent</code> + <code>LandingComponent</code>.</p>\n\n<pre><code>@Singleton\n@Component(modules = [\n    HttpModule::class,\n    ApplicationModule::class\n])\ninterface AppComponent {\n    ActivityComponent plus(module: ActivityModule)\n}\n\n@PerActivity\n@Subcomponent(modules = [ActivityModule::class])\ninterface ActivityComponent {\n    LandingComponent plus(module: LandingModule)\n}\n\n@ActivityContext\n@Subcomponent(modules = [LandingModule::class])\ninterface LandingComponent {\n    fun inject(activity: MainActivity)\n}\n</code></pre>\n\n<p>Apply</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n    AppComponent.builder().build().plus(ActivityModule()).plus(LandingModule())\n}\n</code></pre>\n"}], "owner": {"reputation": 69128, "user_id": 242769, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8f1bfe0dcaa3cdc6633e8b80639e541a?s=128&d=identicon&r=PG", "display_name": "aryaxt", "link": "https://stackoverflow.com/users/242769/aryaxt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 525, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529465591, "creation_date": 1529273775, "last_edit_date": 1529276034, "question_id": 50900906, "link": "https://stackoverflow.com/questions/50900906/dagger-2-and-component-dependency-in-android", "title": "Dagger 2 and component dependency in Android", "body": "<p>Activity</p>\n\n<pre><code>@PerActivity\n@Component(modules = [ActivityModule::class])\ninterface ActivityComponent\n</code></pre>\n\n<p>Application</p>\n\n<pre><code>@Singleton\n@Component(modules = [\n    HttpModule::class,\n    ApplicationModule::class\n])\ninterface AppComponent\n</code></pre>\n\n<p>Activity Specific</p>\n\n<pre><code>@Component(\n        modules = [LandingModule::class],\n        dependencies = [AppComponent::class, ActivityComponent::class]\n)\n@ActivityContext\ninterface LandingComponent {\n    fun inject(activity: MainActivity)\n}\n</code></pre>\n\n<p>Apply</p>\n\n<pre><code>   override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        DaggerLandingComponent.builder().build().inject(this)\n   }\n</code></pre>\n\n<p>The error I'm getting is that AppComponent has a singleton scope\n<code>cannot depend on scoped components:</code></p>\n\n<p>What's the proper solution in this case?</p>\n"}, {"tags": ["design-patterns", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3472, "user_id": 4072509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16VK8.jpg?s=128&g=1", "display_name": "apetranzilla", "link": "https://stackoverflow.com/users/4072509/apetranzilla"}, "is_accepted": true, "score": 2, "last_activity_date": 1529291119, "creation_date": 1529291119, "answer_id": 50902229, "question_id": 50900298, "link": "https://stackoverflow.com/questions/50900298/pattern-where-implementations-register-themselves-in-a-object-registry/50902229#50902229", "title": "Pattern where implementations register themselves in a object registry", "body": "<p>Unfortunately, I don't think this is possible without some extra work. The main possibilities I can think of are:</p>\n\n<ol>\n<li><p>Use the standard <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">ServiceLoader</a> provided by the Java standard library. This is the official way to do things, but will require either creating a manifest file listing implementations (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">docs here</a>) or specifying implementations in a Java 9 module-info, which I don't think Kotlin supports. To avoid this, you can use <a href=\"https://github.com/google/auto/tree/master/service\" rel=\"nofollow noreferrer\">Google's auto service</a> and <a href=\"https://kotlinlang.org/docs/reference/kapt.html\" rel=\"nofollow noreferrer\">kapt</a>, allowing you to simply annotate your implementations to have service metadata generated at compile-time.</p></li>\n<li><p>You could manually scan the classpath for all implementations. This has various other downsides: More work to implement, requires assumptions to be made about the classpath, and slower (since you need to find and check every class). There are other questions that cover this method in detail, <a href=\"https://stackoverflow.com/questions/347248/how-can-i-get-a-list-of-all-the-implementations-of-an-interface-programmatically\">such as this one</a>.</p></li>\n<li><p>Write your own Kotlin compiler plugin that generates service metadata, and use in tandem with the first option. This would require the most work to set up, but the least effort to use. Unfortunately, as far as I know there isn't a lot of good information on compiler plugins - your best bet would probably be to examine the source code of an official compiler plugin - like <a href=\"https://github.com/JetBrains/kotlin/tree/master/libraries/tools/kotlin-allopen\" rel=\"nofollow noreferrer\">allopen</a>.</p></li>\n</ol>\n\n<p>Ultimately, I would recommend using ServiceLoader, kapt, and auto service, as described in the first point. It's relatively straightforward to set up - if you're using Gradle, you just need to add the kapt plugin and auto service dependency (Only needed at compile time), and then use the <code>@AutoService</code> annotation on your implementations. It also doesn't have the downsides of the second option.</p>\n"}], "owner": {"reputation": 2310, "user_id": 2356160, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/vbPHS.jpg?s=128&g=1", "display_name": "lathspell", "link": "https://stackoverflow.com/users/2356160/lathspell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 50902229, "answer_count": 1, "score": 2, "last_activity_date": 1610970835, "creation_date": 1529267939, "last_edit_date": 1610970835, "question_id": 50900298, "link": "https://stackoverflow.com/questions/50900298/pattern-where-implementations-register-themselves-in-a-object-registry", "title": "Pattern where implementations register themselves in a object registry", "body": "<p>I have several classes that implement an abstract class &quot;Product&quot;. To follow the Open-Closed-Principle I would like the implementation classes in a way that they  register themselves in a <code>ProductRegistry</code> singleton object. When adding new <code>Product</code> classes, it should be sufficient to write them or put them in the class path without having to touch the <code>ProductRegistry</code> class.</p>\n<p>Below are my first steps but it seems that the objects are lazy-initialized.\nCan I change that? Or should I use a init-block in every subclass? (didn't like that approach as it's easy to forget).</p>\n<pre><code> abstract class Product {\n    val id : Int\n \n    constructor(id : Int) {\n        println(&quot;ctor with id=$id&quot;)\n        this.id = id\n        ProductRegistry.register(this)\n    }\n    abstract fun getColor(): String\n }\n\nobject BrownProduct : Product(2) {\n    override fun getColor() = &quot;brown&quot;\n}\n\nobject ProductRegistry {\n    private val registry = HashSet&lt;Product&gt;()\n\n    fun register(product: Product) {\n        println(&quot;Registering: $product&quot;)\n        registry.add(product)\n    }\n\n    fun fromId(id: Int): Product {\n        return registry.filter { it.id == id }.first()\n    }\n}\n</code></pre>\n<p>Test:</p>\n<pre><code>class TestProdFac {\n    @Test\n    fun test1() {\n        // println(RedProduct) &lt;- if called before, then test works\n        assertEquals(RedProduct::class, ProductRegistry.fromId(1)::class)\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "serialization", "interop"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 7, "creation_date": 1529260492, "post_id": 50897540, "comment_id": 88798627, "body": "<code>java.io.Serializable</code> yes"}], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 25, "last_activity_date": 1529260522, "creation_date": 1529260522, "answer_id": 50899428, "question_id": 50897540, "link": "https://stackoverflow.com/questions/50897540/how-do-i-implement-serializable-in-kotlin-so-it-also-works-in-java/50899428#50899428", "title": "How do I implement Serializable in Kotlin so it also works in Java?", "body": "<blockquote>\n  <p>do I just import java.io.Serializable</p>\n</blockquote>\n\n<p>Yes. Just be aware that Kotlin uses <code>@Transient</code> annotation instead of a keyword.</p>\n\n<p>Of course, Java serialization does have its issues, but there's no difference in that respect between Kotlin and Java, and if you are happy with your current code...</p>\n"}], "owner": {"reputation": 3677, "user_id": 1128668, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/35ca82b58da21315ee1650c8f4158adf?s=128&d=identicon&r=PG", "display_name": "GlenPeterson", "link": "https://stackoverflow.com/users/1128668/glenpeterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21846, "favorite_count": 2, "accepted_answer_id": 50899428, "answer_count": 1, "score": 26, "last_activity_date": 1611221348, "creation_date": 1529245469, "last_edit_date": 1611221348, "question_id": 50897540, "link": "https://stackoverflow.com/questions/50897540/how-do-i-implement-serializable-in-kotlin-so-it-also-works-in-java", "title": "How do I implement Serializable in Kotlin so it also works in Java?", "body": "<p>I have some code that I've been using for years in Java, but need it in Kotlin (its interfaces extend collections interfaces).  Some classes are serializable.  When I try the obvious, I get \"Cannot access 'Serializable': it is internal in kotlin.io\":</p>\n\n<pre><code>class Foo(val someField:Int): Serializable {\n    companion object {\n        private const val serialVersionUID = 20180617104400L\n    }\n}\n</code></pre>\n\n<p>So, do I just import java.io.Serializable, or will that cause other issues?</p>\n"}, {"tags": ["android", "performance", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1708, "user_id": 3491263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bbHeX.png?s=128&g=1", "display_name": "wsgeorge", "link": "https://stackoverflow.com/users/3491263/wsgeorge"}, "reply_to_user": {"reputation": 184, "user_id": 9953038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb4e70357f3f9887688b260a31f85684?s=128&d=identicon&r=PG&f=1", "display_name": "MajdNaji", "link": "https://stackoverflow.com/users/9953038/majdnaji"}, "edited": false, "score": 0, "creation_date": 1542191563, "post_id": 50943415, "comment_id": 93476973, "body": "@MajdNaji check Eduard&#39;s other answer. I think that&#39;s a better solution than downgrading."}, {"owner": {"reputation": 544, "user_id": 4725753, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/3zcbr.jpg?s=128&g=1", "display_name": "Mahdi Javaheri", "link": "https://stackoverflow.com/users/4725753/mahdi-javaheri"}, "edited": false, "score": 0, "creation_date": 1542524068, "post_id": 50943415, "comment_id": 93594221, "body": "Reverting to SDK 27 is not a solution, don&#39;t add broken windows to your house. &quot;Pragmatic programmer&quot;"}], "tags": [], "owner": {"reputation": 908, "user_id": 5710605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f21376de252ed53863e00c29c5196bc1?s=128&d=identicon&r=PG", "display_name": "Eduard Bosch Bertran", "link": "https://stackoverflow.com/users/5710605/eduard-bosch-bertran"}, "is_accepted": true, "score": 14, "last_activity_date": 1542634098, "last_edit_date": 1542634098, "creation_date": 1529482387, "answer_id": 50943415, "question_id": 50897054, "link": "https://stackoverflow.com/questions/50897054/app-crashes-when-running-maps-activity/50943415#50943415", "title": "App crashes when running maps activity", "body": "<p><s>The same problem here when using target SDK 28. Reverting to SDK 27 solved the problem.</s></p>\n\n<hr>\n\n<p>Don't revert your target SDK.</p>\n\n<p>Better use this solution <a href=\"https://stackoverflow.com/a/50944537/5710605\">https://stackoverflow.com/a/50944537/5710605</a></p>\n"}, {"comments": [{"owner": {"reputation": 1708, "user_id": 3491263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bbHeX.png?s=128&g=1", "display_name": "wsgeorge", "link": "https://stackoverflow.com/users/3491263/wsgeorge"}, "edited": false, "score": 0, "creation_date": 1542191503, "post_id": 50944537, "comment_id": 93476934, "body": "Thanks. I prefer this to the accepted answer. I read somewhere else on SO to include <code>&lt;uses-library android:name=&quot;com.google.android.maps&quot; &#47;&gt;</code> instead. It didn&#39;t work in my case, but thoughts on it?"}], "tags": [], "owner": {"reputation": 908, "user_id": 5710605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f21376de252ed53863e00c29c5196bc1?s=128&d=identicon&r=PG", "display_name": "Eduard Bosch Bertran", "link": "https://stackoverflow.com/users/5710605/eduard-bosch-bertran"}, "is_accepted": false, "score": 60, "last_activity_date": 1550053852, "last_edit_date": 1550053852, "creation_date": 1529486077, "answer_id": 50944537, "question_id": 50897054, "link": "https://stackoverflow.com/questions/50897054/app-crashes-when-running-maps-activity/50944537#50944537", "title": "App crashes when running maps activity", "body": "<p>I've found another solution at\n<a href=\"https://stackoverflow.com/questions/50782806/android-google-maps-java-lang-noclassdeffounderror-failed-resolution-of-lorg-a/50794266#50794266\">Android Google maps java.lang.NoClassDefFoundError: Failed resolution of: Lorg/apache/http/ProtocolVersion</a></p>\n\n<p>Just add this in your manifest:</p>\n\n<pre><code>&lt;uses-library android:name=\"org.apache.http.legacy\" android:required=\"false\"/&gt;\n</code></pre>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>Starting from Google Maps SDK version <strong>16.1.0</strong> you can skip adding the solution above as the tag has been added to the AndroidManifest of the maps library.</p>\n\n<p><a href=\"https://developers.google.com/maps/documentation/android-sdk/releases#2019-02-06\" rel=\"noreferrer\">https://developers.google.com/maps/documentation/android-sdk/releases#2019-02-06</a></p>\n\n<blockquote>\n  <p>Added the following declaration to the AndroidManifest.xml to support\n  the Apache HTTP client on Android P and above. After updating to\n  com.google.android.gms:play-services-maps:16.1.0 you can remove this\n  line from your own AndroidManifest.xml. (Issue <a href=\"https://issuetracker.google.com/issues/117591497\" rel=\"noreferrer\">117591497</a>)</p>\n  \n  <p><code>&lt;uses-library android:name=\"org.apache.http.legacy\" android:required=\"false\"/&gt;</code></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 648, "user_id": 11208147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0c2011b63acd6cf67135e55a2d9af47?s=128&d=identicon&r=PG&f=1", "display_name": "badaboomskey", "link": "https://stackoverflow.com/users/11208147/badaboomskey"}, "edited": false, "score": 1, "creation_date": 1575643129, "post_id": 55695509, "comment_id": 104646303, "body": "Why add an answer, that has already been given by Eduard Bosch?"}], "tags": [], "owner": {"reputation": 3795, "user_id": 3818437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cTdzq.jpg?s=128&g=1", "display_name": "mhdjazmati", "link": "https://stackoverflow.com/users/3818437/mhdjazmati"}, "is_accepted": false, "score": 3, "last_activity_date": 1555353968, "creation_date": 1555353968, "answer_id": 55695509, "question_id": 50897054, "link": "https://stackoverflow.com/questions/50897054/app-crashes-when-running-maps-activity/55695509#55695509", "title": "App crashes when running maps activity", "body": "<p>Put this in the Manifest  tag:</p>\n\n<pre><code>&lt;uses-library android:name=\"org.apache.http.legacy\" android:required=\"false\"/&gt;\n</code></pre>\n\n<p>More info: <a href=\"https://issuetracker.google.com/issues/79478779\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/79478779</a></p>\n\n<p>as google documentation said:</p>\n\n<blockquote>\n  <p>If you are using com.google.android.gms:play-services-maps:16.0.0 or\n  below and your app is targeting API level 28 (Android 9.0) or above,\n  you must include the following declaration within the \n  element of AndroidManifest.xml.</p>\n</blockquote>\n"}], "owner": {"reputation": 184, "user_id": 9953038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb4e70357f3f9887688b260a31f85684?s=128&d=identicon&r=PG&f=1", "display_name": "MajdNaji", "link": "https://stackoverflow.com/users/9953038/majdnaji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27090, "favorite_count": 1, "protected_date": 1615671706, "accepted_answer_id": 50943415, "answer_count": 3, "score": 15, "last_activity_date": 1615663594, "creation_date": 1529241559, "last_edit_date": 1529307437, "question_id": 50897054, "link": "https://stackoverflow.com/questions/50897054/app-crashes-when-running-maps-activity", "title": "App crashes when running maps activity", "body": "<p>My projects Map activity is not working<br>\nI just pasted the api key in place <code>google_maps_api.xml</code>\nand clicked run</p>\n\n<p>Logcat:</p>\n\n<blockquote>\n  <p>E/AndroidRuntime: FATAL EXCEPTION: Thread-5\n                    Process: com.example.appmy.lofind, PID: 10901\n                    java.lang.NoClassDefFoundError: Failed resolution of: Lorg/apache/http/ProtocolVersion;\n                        at el.b(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):3)\n                        at ek.a(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):4)\n                        at em.a(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):51)\n                        at com.google.maps.api.android.lib6.drd.ap.a(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):11)\n                        at dw.a(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):16)\n                        at dw.run(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):61)\n                     Caused by: java.lang.ClassNotFoundException: Didn't find class \"org.apache.http.ProtocolVersion\" on path: DexPathList[[zip file \"/system/priv-app/PrebuiltGmsCore/app_chimera/m/MapsDynamite.apk\"],nativeLibraryDirectories=[/data/user_de/0/com.google.android.gms/app_chimera/m/00000006/MapsDynamite.apk!/lib/x86, /system/lib]]\n                        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:126)\n                        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n                        at ad.loadClass(:com.google.android.gms.dynamite_dynamiteloader@12848026@12.8.48 (040700-196123505):25)\n                        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n                        at el.b(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):3)\u00a0\n                        at ek.a(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):4)\u00a0\n                        at em.a(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):51)\u00a0\n                        at com.google.maps.api.android.lib6.drd.ap.a(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):11)\u00a0\n                        at dw.a(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):16)\u00a0\n                        at dw.run(:com.google.android.gms.dynamite_mapsdynamite@12848026@12.8.48 (040700-196123505):61)\u00a0\n  E/SchedPolicy: set_timerslack_ns write failed: Operation not permitted</p>\n</blockquote>\n"}, {"tags": ["android-studio", "kotlin", "decompiler"], "comments": [{"owner": {"reputation": 5301, "user_id": 4797289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52b438826818a6987f6b7239e3fffd1a?s=128&d=identicon&r=PG&f=1", "display_name": "Rasoul Miri", "link": "https://stackoverflow.com/users/4797289/rasoul-miri"}, "edited": false, "score": 1, "creation_date": 1540450411, "post_id": 50895662, "comment_id": 92871928, "body": "check this post <a href=\"https://stackoverflow.com/a/52983100/4797289\">stackoverflow.com/a/52983100/4797289</a>"}], "answers": [{"comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 7, "creation_date": 1537656942, "post_id": 50896373, "comment_id": 91865203, "body": "At least for me, there is no &quot;Decompile&quot; option in that view."}], "tags": [], "owner": {"reputation": 12180, "user_id": 588532, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gqNqv.jpg?s=128&g=1", "display_name": "Uriel Frankel", "link": "https://stackoverflow.com/users/588532/uriel-frankel"}, "is_accepted": false, "score": 7, "last_activity_date": 1529236552, "creation_date": 1529236552, "answer_id": 50896373, "question_id": 50895662, "link": "https://stackoverflow.com/questions/50895662/converting-kotlin-to-java/50896373#50896373", "title": "Converting Kotlin to Java", "body": "<p>Tools >> kotlin >> Show Kotlin bytecode >> Decompile</p>\n"}, {"tags": [], "owner": {"reputation": 15397, "user_id": 3290339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMy5l.jpg?s=128&g=1", "display_name": "Onik", "link": "https://stackoverflow.com/users/3290339/onik"}, "is_accepted": false, "score": 21, "last_activity_date": 1554407308, "last_edit_date": 1554407308, "creation_date": 1537664721, "answer_id": 52462123, "question_id": 50895662, "link": "https://stackoverflow.com/questions/50895662/converting-kotlin-to-java/52462123#52462123", "title": "Converting Kotlin to Java", "body": "<p>Currently <code>Tools &gt;&gt; Kotlin&gt;&gt; Decompile Kotlin to Java</code> is enabled only for compiled <em>Kotlin</em> classes (<code>.class</code>, not <code>.kt</code> extension) located at <code>app/build/tmp/kotlin-classes/</code> <strong>after a successful build</strong>.</p>\n\n<p>A note to the <a href=\"https://stackoverflow.com/users/588532/uriel-frankel\">@Uriel Frankel</a>'s workaround:</p>\n\n<p><em>If <code>Tools &gt;&gt; Kotlin &gt;&gt; Show Kotlin Bytecode &gt;&gt; Decompile button</code> is disabled (or not shown) the <code>Java Bytecode Decompiler</code> plugin should be installed: <code>Preferences &gt;&gt; Plugins &gt;&gt; search for</code>Java Bytecode Decompiler` >> check the plugin &amp; press OK</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 15274, "user_id": 4409113, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0pAon.jpg?s=128&g=1", "display_name": "\u028d\u0473\u0452\u0abd\u0aef\u0e17", "link": "https://stackoverflow.com/users/4409113/%ca%8d%d1%b3%d1%92%e0%aa%bd%e0%ab%af%e0%b8%97"}, "is_accepted": false, "score": 2, "last_activity_date": 1537875091, "last_edit_date": 1537875091, "creation_date": 1537874365, "answer_id": 52496951, "question_id": 50895662, "link": "https://stackoverflow.com/questions/50895662/converting-kotlin-to-java/52496951#52496951", "title": "Converting Kotlin to Java", "body": "<p>Seems like a bug.</p>\n\n<blockquote>\n  <p><code>Tools -&gt; Kotlin -&gt; Decompile Kotlin to Java</code></p>\n</blockquote>\n\n<p>Was actually disabled for me too <strong>even after a successful build</strong> (<em>In my side Android Studio v3.2</em>) so, I went through this:</p>\n\n<p>Click on the Kotlin (<em>Compiled class</em>):</p>\n\n<p>Selected <code>Tools -&gt; Kotlin -&gt; Show Kotlin Bytecode</code></p>\n\n<p>Then kotlin bytecode window appeared:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YUEKV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YUEKV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Made JVM 8 Target as selected and then decompile gave me the java class.</p>\n\n<p><strong>Note</strong> that this happened when <code>Java Bytecode Decompiler</code> plugin was enabled on the Android Studio.</p>\n\n<p><strong>Update</strong>:</p>\n\n<p>This however might have some issues even after converting to java and perhaps, we should wait for the newest releases.</p>\n"}, {"tags": [], "owner": {"reputation": 3820, "user_id": 1725145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/902d344133e1ff7290d8a572ccbecd83?s=128&d=identicon&r=PG", "display_name": "user1725145", "link": "https://stackoverflow.com/users/1725145/user1725145"}, "is_accepted": false, "score": 0, "last_activity_date": 1562676763, "last_edit_date": 1562676763, "creation_date": 1562673051, "answer_id": 56951951, "question_id": 50895662, "link": "https://stackoverflow.com/questions/50895662/converting-kotlin-to-java/56951951#56951951", "title": "Converting Kotlin to Java", "body": "<p>I followed Onik's answer above.</p>\n\n<p>The Java Bytecode Decompiler was automatically bundled.\nI opened the .class file in Android Studio, and selected  <em>Tools >> Kotlin>> Decompile Kotlin to Java.</em></p>\n\n<p>After waiting several minutes, Android Studio told me</p>\n\n<blockquote>\n  <p>The file is too large: 50.78 MB.  Showing a read-only preview of the first 2.56 MB</p>\n</blockquote>\n\n<p>and it opened a file MyKotlinClass.decompiled.java, most of which is unintelligible to me.</p>\n\n<p>MyKotlinClass is approximately <strong>300 lines</strong> long.  At this point, manually re-writing the file as Java code is looking like the better option.</p>\n"}], "owner": {"reputation": 191, "user_id": 9724864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cx4l6PRCXYQ/AAAAAAAAAAI/AAAAAAAAADo/zbF6-CSeqk8/photo.jpg?sz=128", "display_name": "Saiteja Kolan", "link": "https://stackoverflow.com/users/9724864/saiteja-kolan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20754, "favorite_count": 0, "answer_count": 4, "score": 18, "last_activity_date": 1562676763, "creation_date": 1529230377, "last_edit_date": 1554443162, "question_id": 50895662, "link": "https://stackoverflow.com/questions/50895662/converting-kotlin-to-java", "title": "Converting Kotlin to Java", "body": "<p>Can anyone help me about converting <em>Kotlin</em> code in <em>Android Studio</em> to <em>Java</em>?  </p>\n\n<p>I went through the below process:</p>\n\n<p><em>Tools >> Kotlin>> Decompile Kotlin to Java</em></p>\n\n<p>But the \"Kotlin to Java\" option is disabled. What should I do?</p>\n\n<p><a href=\"https://i.stack.imgur.com/A7xxK.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/A7xxK.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2796, "user_id": 7508302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bHYHM.jpg?s=128&g=1", "display_name": "Cililing", "link": "https://stackoverflow.com/users/7508302/cililing"}, "reply_to_user": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "edited": false, "score": 0, "creation_date": 1529321857, "post_id": 50903419, "comment_id": 88817011, "body": "It&#39;s depends what are you going to do, but you have to use proper class. There is a reason why those class are not the same. I&#39;ve found some example here: <a href=\"https://www.hidroh.com/2015/11/30/building-custom-preferences-v7/\" rel=\"nofollow noreferrer\">hidroh.com/2015/11/30/building-custom-preferences-v7</a>"}], "tags": [], "owner": {"reputation": 2796, "user_id": 7508302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bHYHM.jpg?s=128&g=1", "display_name": "Cililing", "link": "https://stackoverflow.com/users/7508302/cililing"}, "is_accepted": true, "score": 2, "last_activity_date": 1539324828, "last_edit_date": 1539324828, "creation_date": 1529301848, "answer_id": 50903419, "question_id": 50894880, "link": "https://stackoverflow.com/questions/50894880/the-dialogpreference-in-android-support-v7-cause-override-nothing-error/50903419#50903419", "title": "The DialogPreference in android.support.v7 cause override nothing error", "body": "<p>See the documentation.</p>\n\n<pre><code>onCreateDialogView() override nothing\nonDialogClosed() override nothing\nshowDialog() override nothing\n</code></pre>\n\n<p>Those method are protected/open in <code>android.preference.DialogPreference</code> (#<a href=\"https://developer.android.com/reference/android/preference/DialogPreference\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/preference/DialogPreference</a>) but there is no methods like those in <code>android.support.v7.preference.DialogPreference</code> (#<a href=\"https://developer.android.com/reference/android/support/v7/preference/DialogPreference\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/support/v7/preference/DialogPreference</a>).</p>\n\n<p>Those classes are not the same, they don't have the same public interface. That's why.</p>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 50903419, "answer_count": 1, "score": 1, "last_activity_date": 1539324828, "creation_date": 1529223405, "question_id": 50894880, "link": "https://stackoverflow.com/questions/50894880/the-dialogpreference-in-android-support-v7-cause-override-nothing-error", "title": "The DialogPreference in android.support.v7 cause override nothing error", "body": "<p>The Code  A works well, but I get error when I replace <code>import android.preference.DialogPreference</code> with <code>import android.support.v7.preference.DialogPreference</code></p>\n\n<p>why?</p>\n\n<p><strong>Error</strong></p>\n\n<pre><code>onCreateDialogView() override nothing\nonDialogClosed() override nothing\nshowDialog() override nothing\n</code></pre>\n\n<p><strong>Code A</strong></p>\n\n<pre><code>import android.preference.DialogPreference\nimport android.app.AlertDialog\nimport android.content.Context\nimport android.os.Bundle\nimport android.util.AttributeSet\nimport android.view.View\nimport info.dodata.mirror.R\nimport android.widget.EditText\nimport org.jetbrains.anko.*\nimport utility.PreferenceTool\n\nclass DialogChangePassword(context: Context, attrs: AttributeSet) : DialogPreference(context, attrs) {\n\n    private lateinit var mView: View\n    private lateinit var mContext: Context\n\n    init {\n        dialogLayoutResource = R.layout.item_custom_password_dialog\n    }\n\n    override fun onCreateDialogView(): View {\n        mView = super.onCreateDialogView()\n        mContext=mView.context\n        return mView\n    }\n\n    override fun onDialogClosed(positiveResult: Boolean) {\n        super.onDialogClosed(positiveResult)\n    }\n\n    override fun showDialog(state: Bundle?) {\n        super.showDialog(state)\n\n        val d = dialog as AlertDialog\n        d.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener {           \n               d.dismiss()           \n        }\n    }\n\n\n}\n</code></pre>\n"}]