[{"tags": ["android", "google-play-services", "android-mapview", "kotlin"], "comments": [{"owner": {"reputation": 1186, "user_id": 3206226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/982f3df69995401d0a7dbbd6b3f31c05?s=128&d=identicon&r=PG&f=1", "display_name": "Murat Mustafin", "link": "https://stackoverflow.com/users/3206226/murat-mustafin"}, "edited": false, "score": 1, "creation_date": 1487221166, "post_id": 42257841, "comment_id": 71687398, "body": "How your <code>lateinit var mapView</code> is initialized?"}, {"owner": {"reputation": 926, "user_id": 3078602, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0307cd8a05dc3f765ca7c40883453cac?s=128&d=identicon&r=PG&f=1", "display_name": "Vladislav", "link": "https://stackoverflow.com/users/3078602/vladislav"}, "reply_to_user": {"reputation": 1186, "user_id": 3206226, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/982f3df69995401d0a7dbbd6b3f31c05?s=128&d=identicon&r=PG&f=1", "display_name": "Murat Mustafin", "link": "https://stackoverflow.com/users/3206226/murat-mustafin"}, "edited": false, "score": 0, "creation_date": 1487224182, "post_id": 42257841, "comment_id": 71688512, "body": "In fragments that extends AbstractMapFragment inside of onCreateView() method I call onCreate() and getMapAsync() on MapView object. Map works, but when onSaveInstanceState() called on MapView object, application crashes."}, {"owner": {"reputation": 558, "user_id": 535120, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/de33d65e51497c1b3ea2cde17b738f50?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/535120/patrick"}, "edited": false, "score": 0, "creation_date": 1498210942, "post_id": 42257841, "comment_id": 76418461, "body": "Have you resolved the issue?"}, {"owner": {"reputation": 926, "user_id": 3078602, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0307cd8a05dc3f765ca7c40883453cac?s=128&d=identicon&r=PG&f=1", "display_name": "Vladislav", "link": "https://stackoverflow.com/users/3078602/vladislav"}, "edited": false, "score": 0, "creation_date": 1498499783, "post_id": 42257841, "comment_id": 76512511, "body": "No, this issue is actual."}, {"owner": {"reputation": 337, "user_id": 5179960, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b2a6f79107c343c309aadcbda9597f56?s=128&d=identicon&r=PG&f=1", "display_name": "oznecro", "link": "https://stackoverflow.com/users/5179960/oznecro"}, "edited": false, "score": 0, "creation_date": 1569891026, "post_id": 42257841, "comment_id": 102734188, "body": "@Vladislav Did find out what was causing this issue? I am currently checking if mapView is initialised <code>if (this::mapView.isInitialized) {</code>"}], "owner": {"reputation": 926, "user_id": 3078602, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0307cd8a05dc3f765ca7c40883453cac?s=128&d=identicon&r=PG&f=1", "display_name": "Vladislav", "link": "https://stackoverflow.com/users/3078602/vladislav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 555, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1487184858, "creation_date": 1487184858, "question_id": 42257841, "link": "https://stackoverflow.com/questions/42257841/mapview-in-lite-mode-crashes-when-onsaveinstancestate-called", "title": "MapView in lite mode crashes when onSaveInstanceState called", "body": "<p>When I use MapView with lite mode, calling onSaveInstanceState() method on MapView object cause application crash.</p>\n\n<p>Here is stacktrace:</p>\n\n<pre><code>java.lang.NullPointerException: Attempt to invoke interface method 'void com.google.maps.api.android.lib6.impl.bq.b(android.os.Bundle)' on a null object reference\n                                                                             at com.google.maps.api.android.lib6.impl.da.b(:com.google.android.gms.DynamiteModulesB:117)\n                                                                             at com.google.android.gms.maps.internal.z.onTransact(:com.google.android.gms.DynamiteModulesB:108)\n                                                                             at android.os.Binder.transact(Binder.java:507)\n                                                                             at com.google.android.gms.maps.internal.IMapViewDelegate$zza$zza.onSaveInstanceState(Unknown Source)\n                                                                             at com.google.android.gms.maps.MapView$zza.onSaveInstanceState(Unknown Source)\n                                                                             at com.google.android.gms.dynamic.zza.onSaveInstanceState(Unknown Source)\n                                                                             at com.google.android.gms.maps.MapView.onSaveInstanceState(Unknown Source)\n                                                                             at ru.mail.sporttogether.fragments.AbstractMapFragment.onSaveInstanceState(AbstractMapFragment.kt:17)\n                                                                             at android.support.v4.app.Fragment.performSaveInstanceState(Fragment.java:2353)\n                                                                             at android.support.v4.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:2599)\n                                                                             at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:2670)\n                                                                             at android.support.v4.app.FragmentController.saveAllState(FragmentController.java:134)\n                                                                             at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:571)\n                                                                             at android.support.v7.app.AppCompatActivity.onSaveInstanceState(AppCompatActivity.java:509)\n                                                                             at ru.mail.sporttogether.mvp.PresenterActivity.onSaveInstanceState(PresenterActivity.kt:91)\n                                                                             at android.app.Activity.performSaveInstanceState(Activity.java:1502)\n                                                                             at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1308)\n                                                                             at android.app.ActivityThread.callCallActivityOnSaveInstanceState(ActivityThread.java:5008)\n                                                                             at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:4286)\n                                                                             at android.app.ActivityThread.handleStopActivity(ActivityThread.java:4345)\n                                                                             at android.app.ActivityThread.-wrap28(ActivityThread.java)\n                                                                             at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1684)\n                                                                             at android.os.Handler.dispatchMessage(Handler.java:102)\n                                                                             at android.os.Looper.loop(Looper.java:154)\n                                                                             at android.app.ActivityThread.main(ActivityThread.java:6688)\n                                                                             at java.lang.reflect.Method.invoke(Native Method)\n                                                                             at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1468)\n                                                                             at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1358)\n</code></pre>\n\n<p>XML</p>\n\n<pre><code>&lt;com.google.android.gms.maps.MapView\n                android:id=\"@+id/map_view\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                android:fitsSystemWindows=\"true\"\n                app:cameraZoom=\"17\"\n                app:layout_collapseMode=\"parallax\"\n                app:liteMode=\"true\" /&gt;\n</code></pre>\n\n<p>And code example</p>\n\n<pre><code>package ru.mail.sporttogether.fragments\n\nimport android.os.Bundle\nimport com.google.android.gms.maps.MapView\nimport ru.mail.sporttogether.mvp.MapPresenter\nimport ru.mail.sporttogether.mvp.PresenterFragment\n\nabstract class AbstractMapFragment&lt;T : MapPresenter&gt; :\n        PresenterFragment&lt;T&gt;() {\n    protected lateinit var mapView: MapView\n\n    override fun onSaveInstanceState(outState: Bundle?) {\n        super.onSaveInstanceState(outState)\n        mapView.onSaveInstanceState(outState)\n    }\n\n    override fun onLowMemory() {\n        super.onLowMemory()\n        mapView.onLowMemory()\n    }\n\n    override fun onStart() {\n        super.onStart()\n        mapView.onStart()\n    }\n\n    override fun onStop() {\n        mapView.onStop()\n        super.onStop()\n    }\n\n    override fun onPause() {\n        mapView.onPause()\n        super.onPause()\n    }\n\n    override fun onResume() {\n        super.onResume()\n        mapView.onResume()\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        mapView.onDestroy()\n    }\n}\n</code></pre>\n\n<p>And in other fragments inside of onCreateView() method I call onCreate() and getMapAsync() on MapView object.\nI have this problem if use MapView in lite mode only.\nIs it internal error of GP services?</p>\n"}, {"tags": ["java", "string", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1487168996, "creation_date": 1487168996, "answer_id": 42252140, "question_id": 42251904, "link": "https://stackoverflow.com/questions/42251904/kotlin-string-variable-in-function-parameter-auto-cast-to-java-lang-string-why/42252140#42252140", "title": "Kotlin String variable in function parameter auto cast to java.lang.String, why?", "body": "<p>You forgot <code>is</code></p>\n\n<p>This works:</p>\n\n<pre><code>fun testString(s: Any)\n{\n    when(s)\n    {\n        is Int -&gt; println(\"Int parameter!\")\n        is String -&gt; println(\"String parameter!\")\n        is Boolean -&gt; println(\"Boolean parameter!\")\n        else -&gt; println(\"Other object!\")\n    }\n}\n</code></pre>\n\n<p>Details: <a href=\"https://kotlinlang.org/docs/reference/typecasts.html\" rel=\"nofollow noreferrer\">Type Checks and Casts</a></p>\n"}, {"tags": [], "owner": {"reputation": 304, "user_id": 1498788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62e0a7d191a03a86e35cbc6cab259cf?s=128&d=identicon&r=PG", "display_name": "creativ", "link": "https://stackoverflow.com/users/1498788/creativ"}, "is_accepted": true, "score": 4, "last_activity_date": 1487169017, "creation_date": 1487169017, "answer_id": 42252146, "question_id": 42251904, "link": "https://stackoverflow.com/questions/42251904/kotlin-string-variable-in-function-parameter-auto-cast-to-java-lang-string-why/42252146#42252146", "title": "Kotlin String variable in function parameter auto cast to java.lang.String, why?", "body": "<p>In the when-statement you will need to check wether the parameter is of type Int/String/Boolean. So the return-value needs to be a boolean.\nThus instead of <code>String</code> you need to use <code>is String</code>:</p>\n\n<pre><code>fun testString(s: Any)\n{\n    when(s)\n    {\n        is Int -&gt; println(\"Int parameter!\")\n        is String -&gt; println(\"String parameter!\")\n        is Boolean -&gt; println(\"boolean thing!\")\n        else -&gt; println(\"Other object!\")\n    }\n}\n</code></pre>\n\n<p>Then it will also work for Boolean.</p>\n"}], "owner": {"reputation": 805, "user_id": 7569316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wPu6p.jpg?s=128&g=1", "display_name": "SpkingR", "link": "https://stackoverflow.com/users/7569316/spkingr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 42252146, "answer_count": 2, "score": 0, "last_activity_date": 1487169017, "creation_date": 1487168396, "question_id": 42251904, "link": "https://stackoverflow.com/questions/42251904/kotlin-string-variable-in-function-parameter-auto-cast-to-java-lang-string-why", "title": "Kotlin String variable in function parameter auto cast to java.lang.String, why?", "body": "<p>I just wrote some code with Kotlin, and got some problems, here is the test code:</p>\n\n<pre><code>fun testString(s: Any)\n{\n    when(s)\n    {\n        Int -&gt; println(\"Int parameter!\")\n        String -&gt; println(\"String parameter!\")\n        //Boolean -&gt; println(\"Not boolean thing!\") //Why Boolean cannot use in when?\n        else -&gt; println(\"Other object!\")\n    }\n}\n\nvar ss = \"This is actual a Kotlin String!\"\nprintln(ss.javaClass.simpleName) //out: String\ntestString(ss)//out: Other object! Why not String???\n</code></pre>\n\n<p>The problem is that, when just print the variable, it shows the expected output: <code>String (Kotlin)</code>, but in the <code>testString</code> function, the output one will be always the <code>java.lang.String</code>, that is why?\nThen another one upsets me is that: Boolean cannot use in <code>when</code>? and why? Thanks in advance!</p>\n"}, {"tags": ["json", "kotlin", "anko"], "answers": [{"comments": [{"owner": {"reputation": 4058, "user_id": 3988291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7nFrq.jpg?s=128&g=1", "display_name": "Geoffrey Marizy", "link": "https://stackoverflow.com/users/3988291/geoffrey-marizy"}, "edited": false, "score": 0, "creation_date": 1487156530, "post_id": 42247218, "comment_id": 71653244, "body": "<code>orderPropertyToTextViewId.forEach { property, textViewId -&gt;  ... }</code> for a more functional (and idiomatic) code than relying to a <code>for</code> loop"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1487155798, "creation_date": 1487155798, "answer_id": 42247218, "question_id": 42244354, "link": "https://stackoverflow.com/questions/42244354/is-there-a-clean-dry-way-to-update-multiple-textviews-from-http-request-json/42247218#42247218", "title": "Is there a clean DRY way to update multiple textViews from HTTP request JSON?", "body": "<p>Since there are only <code>TextView</code>s and you only need to change their text, you can simplify your code in the following way:</p>\n\n<ul>\n<li><p>Add the mapping for the <code>Order</code> properties storing the IDs:</p>\n\n<pre><code>private val orderPropertyToTextViewId = mapOf(\n        Order::customer to R.id.order_detail_customer,\n        Order::address to R.id.order_detail_address,\n        Order::postalCode to R.id.order_detail_postal_code,\n        Order::phone to R.id.order_detail_phone\n)\n</code></pre></li>\n<li><p>Create the views iterating over the map:</p>\n\n<pre><code>verticalLayout {\n    for ((property, textViewId) in orderPropertyToTextViewId) {\n        textView { id = textViewId }\n    }\n}\n</code></pre></li>\n<li><p>Update the text iterating over the map:</p>\n\n<pre><code>for ((property, textViewId) in orderPropertyToTextViewId) {\n    findViewById&lt;TextView&gt;(textViewId).text = property.get(order)\n}\n</code></pre></li>\n</ul>\n\n<p>You can go even further and get rid of the IDs and <code>findViewById&lt;TextView&gt;(...)</code> if you store the <code>TextView</code>s returned by the <code>textView { ... }</code> calls instead of the IDs in the map, but that needs further experimenting.</p>\n"}, {"tags": [], "owner": {"reputation": 4058, "user_id": 3988291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7nFrq.jpg?s=128&g=1", "display_name": "Geoffrey Marizy", "link": "https://stackoverflow.com/users/3988291/geoffrey-marizy"}, "is_accepted": false, "score": 1, "last_activity_date": 1487162474, "creation_date": 1487162474, "answer_id": 42249723, "question_id": 42244354, "link": "https://stackoverflow.com/questions/42244354/is-there-a-clean-dry-way-to-update-multiple-textviews-from-http-request-json/42249723#42249723", "title": "Is there a clean DRY way to update multiple textViews from HTTP request JSON?", "body": "<p>If you don't need to refresh with new data often, you don't need to keep references to <code>TextView</code>. I don't use Anko, but it could look like:</p>\n\n<pre><code>val order: Order = JSON.readValue(json!!)\nverticalLayout {\n    arrayOf(order.customer, order.address, order.postal_code, order.phone)\n            .map {\n                textView {\n                    text = it\n                }\n            }\n}\n</code></pre>\n"}], "owner": {"reputation": 34093, "user_id": 180174, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6193f1c7bb7098184a5096339c455a0d?s=128&d=identicon&r=PG", "display_name": "Kimvais", "link": "https://stackoverflow.com/users/180174/kimvais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 42247218, "answer_count": 2, "score": 1, "last_activity_date": 1487162474, "creation_date": 1487147966, "question_id": 42244354, "link": "https://stackoverflow.com/questions/42244354/is-there-a-clean-dry-way-to-update-multiple-textviews-from-http-request-json", "title": "Is there a clean DRY way to update multiple textViews from HTTP request JSON?", "body": "<p>I have the following Kotlin / Anko / Android activity.</p>\n\n<pre><code>import android.os.Bundle\nimport android.support.v7.app.AppCompatActivity\nimport android.widget.TextView\nimport com.fasterxml.jackson.module.kotlin.readValue\nimport com.github.kittinunf.fuel.Fuel\nimport eu.gwapi.laaketilaus.util.JSON\nimport eu.gwapi.laaketilaus.util.Order\nimport org.jetbrains.anko.find\nimport org.jetbrains.anko.textView\nimport org.jetbrains.anko.toast\nimport org.jetbrains.anko.verticalLayout\n\nclass OrderDetailsActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val order_id: Long = intent.extras.getLong(\"order_id\")\n        verticalLayout {\n            textView {\n                id = R.id.order_detail_customer\n            }\n            textView {\n                id = R.id.order_detail_address\n            }\n            textView {\n                id = R.id.order_detail_postal_code\n            }\n            textView {\n                id = R.id.order_detail_phone\n            }\n        }\n        getOrder(order_id)\n    }\n\n    fun getOrder(order_id: Long) {\n        Fuel.get(\"https://my.api.endpoint/\" + order_id.toString()).responseString { request, response, result -&gt;\n            val (json, err) = result\n            if (err != null) {\n                toast(err.toString())\n            } else {\n                val order: Order = JSON.readValue(json!!)\n                find&lt;TextView&gt;(R.id.order_detail_customer).text = order.customer\n                find&lt;TextView&gt;(R.id.order_detail_address).text = order.address\n                find&lt;TextView&gt;(R.id.order_detail_postal_code).text = order.postal_code\n                find&lt;TextView&gt;(R.id.order_detail_phone).text = order.phone\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>To a die-hard pythonista like me, that seems awfully static and verbose way of doing this.</p>\n\n<p>Is there a better way?</p>\n"}, {"tags": ["java", "android", "view", "kotlin", "layout-inflater"], "comments": [{"owner": {"reputation": 16121, "user_id": 794088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b4b2a8dec652a64ee29a3d946294af?s=128&d=identicon&r=PG", "display_name": "petey", "link": "https://stackoverflow.com/users/794088/petey"}, "edited": false, "score": 0, "creation_date": 1487109115, "post_id": 42235949, "comment_id": 71633232, "body": "can you add the <code>InflatorOnSteriods</code> class code to your question?"}, {"owner": {"reputation": 1706, "user_id": 853948, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V3Tvr.jpg?s=128&g=1", "display_name": "N Jay", "link": "https://stackoverflow.com/users/853948/n-jay"}, "reply_to_user": {"reputation": 16121, "user_id": 794088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b4b2a8dec652a64ee29a3d946294af?s=128&d=identicon&r=PG", "display_name": "petey", "link": "https://stackoverflow.com/users/794088/petey"}, "edited": false, "score": 0, "creation_date": 1487114340, "post_id": 42235949, "comment_id": 71635345, "body": "I added the code @petey although the class now does nothing there ... so i dont think its the problem.. and my question is more of is that even the right approach, cause it might not be."}, {"owner": {"reputation": 16121, "user_id": 794088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b4b2a8dec652a64ee29a3d946294af?s=128&d=identicon&r=PG", "display_name": "petey", "link": "https://stackoverflow.com/users/794088/petey"}, "edited": false, "score": 0, "creation_date": 1487271206, "post_id": 42235949, "comment_id": 71721217, "body": "&quot;So if a TextView has a android:text=&quot;bla&quot; in the XML layout i want to be able to intercept that and maybe add a ** at the end of all texts being set from the xml.&quot; where is this occuring? (Also, its great you are using kotlin)"}, {"owner": {"reputation": 1706, "user_id": 853948, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V3Tvr.jpg?s=128&g=1", "display_name": "N Jay", "link": "https://stackoverflow.com/users/853948/n-jay"}, "reply_to_user": {"reputation": 16121, "user_id": 794088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b4b2a8dec652a64ee29a3d946294af?s=128&d=identicon&r=PG", "display_name": "petey", "link": "https://stackoverflow.com/users/794088/petey"}, "edited": false, "score": 0, "creation_date": 1487285826, "post_id": 42235949, "comment_id": 71729159, "body": "@petey what else would you use ;) lol. What you mean where is this occurring ? My plan is to make sure i have a hook point wer i can intercept every single view that contains text attribute and then manipulate that text. Let me know if i need to clarify this a bit more."}], "answers": [{"tags": [], "owner": {"reputation": 1706, "user_id": 853948, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V3Tvr.jpg?s=128&g=1", "display_name": "N Jay", "link": "https://stackoverflow.com/users/853948/n-jay"}, "is_accepted": true, "score": 1, "last_activity_date": 1487532871, "last_edit_date": 1487532871, "creation_date": 1487296394, "answer_id": 42288027, "question_id": 42235949, "link": "https://stackoverflow.com/questions/42235949/intercept-every-view-element-being-inflated/42288027#42288027", "title": "Intercept every view element being inflated?", "body": "<p>After some time troubleshooting my solution i finally managed to achieve what i wanted with the inflator factory solution.</p>\n\n<p>First i create an abstract activity that has a custom inflator set to it.</p>\n\n<pre><code>abstract class SteroidsActivity : AppCompatActivity() {\n\nvar mInflater: LayoutInflater? = null\nabstract fun getActivityLayout(): Int\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    mInflater = layoutInflater?.cloneInContext(this)\n    LayoutInflaterCompat.setFactory(mInflater, InflaterOnSteroids(this))\n    setContentView(getActivityLayout())\n}\n\noverride fun getLayoutInflater(): LayoutInflater? {\n    return mInflater\n}\n\noverride fun getSystemService(name: String): Any? {\n    if (name == LAYOUT_INFLATER_SERVICE) {\n        if (mInflater == null) {\n            mInflater = super.getSystemService(name) as LayoutInflater\n        }\n        return mInflater\n    }\n    return super.getSystemService(name)\n  }\n}\n</code></pre>\n\n<p>Second thing that you need to do is create your custom inflator factory</p>\n\n<pre><code>class InflaterOnSteroids(appCompatActivity1: AppCompatActivity) : LayoutInflaterFactory {\n\n    override fun onCreateView(parent: View?, name: String, context: Context, attrs: AttributeSet): View? {\n      //Do stuff here and return a view\n        return null\n       }\n }\n</code></pre>\n\n<p>The problem with my code was that it was always crashing with a weird error that i couldn't troubleshoot until i realised that i need to add a <strong>?</strong> after View since i'm using kotlin and parent view can be null :) </p>\n\n<p>Happy programming</p>\n\n<p>Good reference can be found <a href=\"http://blog.bradcampbell.nz/layoutinflater-factories/\" rel=\"nofollow noreferrer\">here</a> </p>\n"}], "owner": {"reputation": 1706, "user_id": 853948, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V3Tvr.jpg?s=128&g=1", "display_name": "N Jay", "link": "https://stackoverflow.com/users/853948/n-jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "accepted_answer_id": 42288027, "answer_count": 1, "score": 4, "last_activity_date": 1487532871, "creation_date": 1487105429, "last_edit_date": 1487186954, "question_id": 42235949, "link": "https://stackoverflow.com/questions/42235949/intercept-every-view-element-being-inflated", "title": "Intercept every view element being inflated?", "body": "<p>I am trying to intercept every view widget that is being inflated in my activity and override the setText functionality of that view if it exists.</p>\n\n<p>So if a TextView has a android:text=\"bla\" in the XML layout i want to be able to intercept that and maybe add a ** at the end of all texts being set from the xml.</p>\n\n<p>One way that seems to be close to what i need is to use a Custom Layout inflator.</p>\n\n<pre><code> LayoutInflaterCompat.setFactory(layoutInflator, InflatorOnSteriods(this))\n</code></pre>\n\n<p>and the in my InflatorOnSteriods to override onCreateView and then intercept all views there.. this approach doesn't seem to work at all. onCreateView is never called.</p>\n\n<p>I tried also to use cloneInContext</p>\n\n<pre><code> LayoutInflaterCompat.setFactory(layoutInflater.cloneInContext(this), InflatorOnSteriods(this))\n</code></pre>\n\n<p>But no luck as well, maybe my approach is totally wrong i am also open to a different way where i can intercept all views being presented and to be specific set a certain attribute on that view. It is really important to make sure that i will be the last one changing that view and make sure the system respects my changes and wont override them later.</p>\n\n<p><strong>Update:</strong></p>\n\n<p><em>Although i don't think its relevant; Code of InflatorOnSteroids.kt</em></p>\n\n<pre><code>class InflatorOnSteriods(val appCompatActivity: AppCompatActivity) : LayoutInflaterFactory {\n\noverride fun onCreateView(parent: View, name: String, context: Context, attrs: AttributeSet): View {\n    var result: View\n\n    if (TextUtils.equals(name, \"DebugDrawerLayout\")) {\n        result = ImageView(context, attrs)\n    }\n    result = appCompatActivity.onCreateView(name, context, attrs)\n    if (result == null) {\n        // Get themed views from app compat\n        result = appCompatActivity.delegate.createView(parent, name, context, attrs)\n    }\n    return result\n}\n}\n</code></pre>\n"}, {"tags": ["arrays", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 1, "creation_date": 1501723820, "post_id": 42234854, "comment_id": 77907585, "body": "When I try this in Kotlin I get a &quot;Type inference failed. The value of the type parameter T should be mentioned in the input Types.&quot;   private var domainsArray = arrayOf(&quot;@ebay.com&quot;, &quot;@google.com&quot;, &quot;@gmail.com&quot;, &quot;@umd.edu&quot;)   var domainFound = Arrays.asList(domainsArray).contains(email)"}, {"owner": {"reputation": 4058, "user_id": 3988291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7nFrq.jpg?s=128&g=1", "display_name": "Geoffrey Marizy", "link": "https://stackoverflow.com/users/3988291/geoffrey-marizy"}, "reply_to_user": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 0, "creation_date": 1501768173, "post_id": 42234854, "comment_id": 77933082, "body": "Just write var domainFound = domainsArray.contains(email) or more idiomatic var domainFound = email in domainsArray"}], "tags": [], "owner": {"reputation": 4058, "user_id": 3988291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7nFrq.jpg?s=128&g=1", "display_name": "Geoffrey Marizy", "link": "https://stackoverflow.com/users/3988291/geoffrey-marizy"}, "is_accepted": true, "score": 97, "last_activity_date": 1528299616, "last_edit_date": 1528299616, "creation_date": 1487101397, "answer_id": 42234854, "question_id": 42234775, "link": "https://stackoverflow.com/questions/42234775/kotlin-idiomatic-way-to-check-array-contains-value/42234854#42234854", "title": "Kotlin - Idiomatic way to check array contains value", "body": "<p>The equivalent you are looking for is the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/contains.html\" rel=\"noreferrer\">contains</a> operator. </p>\n\n<pre><code>array.contains(\"value\") \n</code></pre>\n\n<p>Kotlin offer an alternative <a href=\"https://kotlinlang.org/docs/reference/functions.html#infix-notation\" rel=\"noreferrer\">infix notation</a> for this operator:</p>\n\n<pre><code>\"value\" in array\n</code></pre>\n\n<p>It's the same function called behind the scene, but since <a href=\"https://kotlinlang.org/docs/reference/functions.html#infix-notation\" rel=\"noreferrer\">infix notation</a> isn't found in Java we could say that <code>in</code> is the most idiomatic way.</p>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 502362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NB3FL.png?s=128&g=1", "display_name": "Gerson", "link": "https://stackoverflow.com/users/502362/gerson"}, "is_accepted": false, "score": 25, "last_activity_date": 1487103653, "last_edit_date": 1487103653, "creation_date": 1487102248, "answer_id": 42235084, "question_id": 42234775, "link": "https://stackoverflow.com/questions/42234775/kotlin-idiomatic-way-to-check-array-contains-value/42235084#42235084", "title": "Kotlin - Idiomatic way to check array contains value", "body": "<p>Using <strong>in</strong> operator is an idiomatic way to do that.</p>\n\n<pre><code>val contains = \"a\" in arrayOf(\"a\", \"b\", \"c\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 22, "last_activity_date": 1487102392, "creation_date": 1487102392, "answer_id": 42235127, "question_id": 42234775, "link": "https://stackoverflow.com/questions/42234775/kotlin-idiomatic-way-to-check-array-contains-value/42235127#42235127", "title": "Kotlin - Idiomatic way to check array contains value", "body": "<p>You can use the <a href=\"https://kotlinlang.org/docs/reference/grammar.html#inOperation\"><code>in</code> operator</a> which, in this case, calls <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/contains.html\"><code>contains</code></a>:</p>\n\n<p><code>\"value\" in array</code></p>\n"}, {"tags": [], "owner": {"reputation": 1288, "user_id": 2010056, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000020389705/picture?type=large", "display_name": "Amar Jain", "link": "https://stackoverflow.com/users/2010056/amar-jain"}, "is_accepted": false, "score": 96, "last_activity_date": 1530597007, "creation_date": 1530597007, "answer_id": 51147434, "question_id": 42234775, "link": "https://stackoverflow.com/questions/42234775/kotlin-idiomatic-way-to-check-array-contains-value/51147434#51147434", "title": "Kotlin - Idiomatic way to check array contains value", "body": "<p>You could also check if the array contains an object with some specific field to compare with using <code>any()</code></p>\n\n<pre><code>listOfObjects.any{ object -&gt; object.fieldxyz == value_to_compare_here }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 8867053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc5ea316cc49c640f528417d6025c3e6?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitar", "link": "https://stackoverflow.com/users/8867053/dimitar"}, "is_accepted": false, "score": 21, "last_activity_date": 1566940629, "creation_date": 1566940629, "answer_id": 57682372, "question_id": 42234775, "link": "https://stackoverflow.com/questions/42234775/kotlin-idiomatic-way-to-check-array-contains-value/57682372#57682372", "title": "Kotlin - Idiomatic way to check array contains value", "body": "<p>Here is code where you can find specific field in ArrayList with objects. The answer of Amar Jain helped me:</p>\n\n<pre><code>listOfObjects.any{ it.field == \"value\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1377, "user_id": 4997636, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0e510ee4fd34658df5624e5394b5bd87?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/4997636/jack"}, "is_accepted": false, "score": 6, "last_activity_date": 1574058631, "creation_date": 1574058631, "answer_id": 58909060, "question_id": 42234775, "link": "https://stackoverflow.com/questions/42234775/kotlin-idiomatic-way-to-check-array-contains-value/58909060#58909060", "title": "Kotlin - Idiomatic way to check array contains value", "body": "<p>You can use it..contains(\" \")</p>\n\n<pre><code> data class Animal (val name:String)\n\n\n val animals = listOf(Animal(\"Lion\"), Animal(\"Elephant\"), Animal(\"Tiger\"))\n\n println(animals.filter { it.name.contains(\"n\") }.toString())\n</code></pre>\n\n<p>output will be</p>\n\n<pre><code>[Animal(name=Lion), Animal(name=Elephant)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 7963160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36581aefb22758a3638322e38e60dd2?s=128&d=identicon&r=PG&f=1", "display_name": "L.Petrosyan", "link": "https://stackoverflow.com/users/7963160/l-petrosyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1597086788, "creation_date": 1597086788, "answer_id": 63346598, "question_id": 42234775, "link": "https://stackoverflow.com/questions/42234775/kotlin-idiomatic-way-to-check-array-contains-value/63346598#63346598", "title": "Kotlin - Idiomatic way to check array contains value", "body": "<p>You can use <code>find</code> method, that returns the first element matching the given [predicate], or <code>null</code> if no such element was found.\nTry this code to find <code>value</code> in <code>array</code> of objects</p>\n<pre><code> val findedElement = array?.find {\n            it.id == value.id\n }\n if (findedElement != null) {\n //your code here           \n } \n</code></pre>\n"}], "owner": {"reputation": 5747, "user_id": 1052504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d24c555de0ab090f0b822155f31affe4?s=128&d=identicon&r=PG", "display_name": "jturolla", "link": "https://stackoverflow.com/users/1052504/jturolla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67975, "favorite_count": 6, "accepted_answer_id": 42234854, "answer_count": 7, "score": 79, "last_activity_date": 1597086788, "creation_date": 1487101184, "last_edit_date": 1596280342, "question_id": 42234775, "link": "https://stackoverflow.com/questions/42234775/kotlin-idiomatic-way-to-check-array-contains-value", "title": "Kotlin - Idiomatic way to check array contains value", "body": "<p>What's an idiomatic way to check if an array of strings contains a value in Kotlin? Just like ruby's <code>#include?</code>.</p>\n<p>I though about:</p>\n<pre><code>array.filter { it == &quot;value&quot; }.any()\n</code></pre>\n<p>Is there a better way?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 1666, "user_id": 794779, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6fcb78bccab141509b0d9f74953dd4c9?s=128&d=identicon&r=PG", "display_name": "fred", "link": "https://stackoverflow.com/users/794779/fred"}, "edited": false, "score": 1, "creation_date": 1510547435, "post_id": 42232687, "comment_id": 81465062, "body": "I have no idea why this question was at -1, have an upvote."}, {"owner": {"reputation": 1721, "user_id": 1968829, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/zRT2g.jpg?s=128&g=1", "display_name": "horcle_buzz", "link": "https://stackoverflow.com/users/1968829/horcle-buzz"}, "edited": false, "score": 0, "creation_date": 1523914121, "post_id": 42232687, "comment_id": 86748486, "body": "I agree! I ended up here, because I had a similar issue."}], "answers": [{"comments": [{"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 1, "creation_date": 1487097834, "post_id": 42232882, "comment_id": 71627184, "body": "Thank you.  Part of my problem as well was not using characters.  IE &quot;(&quot; instead of &#39;(&#39; in my VALID delcaration."}, {"owner": {"reputation": 187, "user_id": 7505665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73e1d9b5f71e8025c370118cc475e6a?s=128&d=identicon&r=PG&f=1", "display_name": "ShadeToD", "link": "https://stackoverflow.com/users/7505665/shadetod"}, "edited": false, "score": 0, "creation_date": 1566751994, "post_id": 42232882, "comment_id": 101746636, "body": "Doesnt work when you use &quot; &quot; inside setOf(). Works perfect with &#39; &#39;"}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 7, "last_activity_date": 1487418404, "last_edit_date": 1487418404, "creation_date": 1487094443, "answer_id": 42232882, "question_id": 42232687, "link": "https://stackoverflow.com/questions/42232687/filter-a-substring-in-kotlin/42232882#42232882", "title": "Filter a substring in kotlin", "body": "<pre><code>val VALID = setOf('A', 'B', 'C') // lookup in a set is O(1), whereas it's O(n) in a list. The set must contain Chars, not Strings\nval expression = \"ABCDEFEDCBA\"\nval filtered = expression.filter { VALID.contains(it) }\nprintln(filtered)\n// ABCCBA\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>val VALID = setOf('A', 'B', 'C')\n\nfun filterString(expression: String) = expression.filter { it in VALID }\n\nfun main(args: Array&lt;String&gt;) {\n    val expression = \"ABCDEFEDCBA\"\n    val filtered = filterString(expression)\n    println(filtered)\n    // ABCCBA\n}\n</code></pre>\n"}], "owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5064, "favorite_count": 0, "accepted_answer_id": 42232882, "answer_count": 1, "score": 7, "last_activity_date": 1487418404, "creation_date": 1487093781, "question_id": 42232687, "link": "https://stackoverflow.com/questions/42232687/filter-a-substring-in-kotlin", "title": "Filter a substring in kotlin", "body": "<p>In <code>kotlin</code> I'd like to filter a string and return a substring of only valid characters.  Say we have valid characters,</p>\n\n<pre><code>valid = listOf('A', 'B', 'C')\n</code></pre>\n\n<p>How can I define a <code>fcn</code> in kotlin in the most succinct way to filter a string and only retain valid characters?  For example,</p>\n\n<pre><code>'ABCDEBCA' --&gt; 'ABCBCA'\n'AEDC'     --&gt; 'AC'\n</code></pre>\n\n<p>Having trouble finding a canonical way to do this without resorting to using an array of string.</p>\n\n<pre><code>import kotlin.text.filter\n\nclass Test(){\n    val VALID = listOf(\"A\", \"B\", \"C\")\n\n    fun filterString(expression: String): String{\n         expression.filter(x --&gt; !VALID.contains(x)) #Doesn't work\n    }\n}\n</code></pre>\n\n<p>The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/filter.html\" rel=\"noreferrer\">filter docs</a> doesn't show any examples specifically for spring manipulation.</p>\n"}, {"tags": ["java", "dictionary", "generics", "kotlin"], "comments": [{"owner": {"reputation": 5657, "user_id": 494428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/35606fc194f32270434d8cca29555ed5?s=128&d=identicon&r=PG", "display_name": "hage", "link": "https://stackoverflow.com/users/494428/hage"}, "edited": false, "score": 0, "creation_date": 1487065623, "post_id": 42222573, "comment_id": 71605415, "body": "Why don&#39;t you post the error message? It helps people to see the problem without having to try it out themselves..."}], "answers": [{"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 4, "creation_date": 1487093148, "post_id": 42222740, "comment_id": 71624505, "body": "Beware, that <code>mapOf(*pairs)</code> creates a copy of <code>pairs</code> array before passing it to <code>mapOf</code>. It might be better to use <code>pairs.toMap()</code>"}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 9, "last_activity_date": 1487065689, "creation_date": 1487065689, "answer_id": 42222740, "question_id": 42222573, "link": "https://stackoverflow.com/questions/42222573/varargs-to-map-in-kotlin/42222740#42222740", "title": "varargs to map in Kotlin", "body": "<p><code>mapOf</code> has 3 implementations: taking nothing, taking 1 pair and taking a vararg of pairs.</p>\n\n<p>Since <code>pairs</code> in your code is actually <code>Array&lt;Pair&lt;String, Any&gt;&gt;</code> there is no matching implementation of <code>mapOf</code> to call. This is due to the fact that varargs as java implements them are ambiguous in certain cases so Kotlin requires explicit arguments.</p>\n\n<p>To make it work use the \"spread\" operator to indicate the vararg method should be used. (<a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs</a>)</p>\n\n<p><code>fun params(vararg pairs: Pair&lt;String, Any&gt;) = MapSqlParameterSource(mapOf(*pairs))</code></p>\n"}], "owner": {"reputation": 1938, "user_id": 2572584, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/42567624047b36f1ef0922eea500c8a8?s=128&d=identicon&r=PG", "display_name": "awfun", "link": "https://stackoverflow.com/users/2572584/awfun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2887, "favorite_count": 0, "accepted_answer_id": 42222740, "answer_count": 1, "score": 4, "last_activity_date": 1487065689, "creation_date": 1487065204, "question_id": 42222573, "link": "https://stackoverflow.com/questions/42222573/varargs-to-map-in-kotlin", "title": "varargs to map in Kotlin", "body": "<p>I use NamedParameterJdbcTemplate in my project and pass parameters this way:</p>\n\n<pre><code>MapSqlParameterSource(mapOf(\n    \"userId\" to userId,\n    \"count\" to count\n))\n</code></pre>\n\n<p>I don't want to write the first line all the time and I want to create my own function that will take pairs of string-to-any values:</p>\n\n<pre><code>params(\n    \"userId\" to userId,\n    \"count\" to count\n)\n</code></pre>\n\n<p>But when I try to implement it I have issues with generics (I don't post the error description here):</p>\n\n<pre><code>fun params(vararg pairs: Pair&lt;String, Any&gt;) = MapSqlParameterSource(mapOf(pairs))\n</code></pre>\n\n<p>Could you please advice on the correct implementation?</p>\n"}, {"tags": ["junit", "kotlin"], "comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1487015267, "post_id": 42212077, "comment_id": 71585872, "body": "And hint: no need for a screenshot - you could as well just post the code and the error message as text ... just saying."}, {"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "reply_to_user": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 2, "creation_date": 1496237576, "post_id": 42212077, "comment_id": 75579180, "body": "Thanks, sometimes I think for questions involving an editor, it&#39;s easier to show the editor&#39;s color highlighting and so forth instead of just my code."}], "answers": [{"comments": [{"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1487014881, "post_id": 42212208, "comment_id": 71585667, "body": "Hmm, so JUnit isn&#39;t something that&#39;s kind of &quot;baked in&quot; and visible to any new project?"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "reply_to_user": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1487015282, "post_id": 42212208, "comment_id": 71585884, "body": "@AdamHughes Why should that be?"}, {"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1487015339, "post_id": 42212208, "comment_id": 71585916, "body": "Hmm, well I thought at least <code>kotlin.test</code> import would be standard.  <code>junit</code> I guess it makes sense, but somehow I figured it&#39;d be in the standard library. Guess I&#39;m mistaken though, wouldn&#39;t be the first time."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1487063346, "post_id": 42212208, "comment_id": 71603915, "body": "kotlin-test is a separate artifact as well: <a href=\"https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-test\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-test</a>"}], "tags": [], "owner": {"reputation": 414, "user_id": 4664470, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-BaoYmnGt-54/AAAAAAAAAAI/AAAAAAAAAgk/stbYE2zCrZw/photo.jpg?sz=128", "display_name": "Ricardo Meneghin Filho", "link": "https://stackoverflow.com/users/4664470/ricardo-meneghin-filho"}, "is_accepted": true, "score": 6, "last_activity_date": 1487014811, "last_edit_date": 1495542302, "creation_date": 1487014811, "answer_id": 42212208, "question_id": 42212077, "link": "https://stackoverflow.com/questions/42212077/junit-test-in-kotlin/42212208#42212208", "title": "JUnit test in Kotlin", "body": "<p>JUnit isn't in your project classpath, so IntelliJ can't find it's packages.</p>\n\n<p>Follow the steps outlined in this answer: <a href=\"https://stackoverflow.com/questions/1051640/correct-way-to-add-external-jars-lib-jar-to-an-intellij-idea-project\">Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project</a>, choosing libraries and then junit.</p>\n"}], "owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8295, "favorite_count": 0, "accepted_answer_id": 42212208, "answer_count": 1, "score": 4, "last_activity_date": 1487014811, "creation_date": 1487014339, "question_id": 42212077, "link": "https://stackoverflow.com/questions/42212077/junit-test-in-kotlin", "title": "JUnit test in Kotlin", "body": "<p><strong>Warning: I'm a huge noob to TDD and Kotlin.</strong></p>\n\n<p>I've found good code snippets on the web for writing JUnit tests in Kotlin, but when I copy and paste, IntelliJ does not automagically import <code>kotlin.test.*</code> or <code>org.junit.Test</code>.  Typically in Eclipse, when I copy and paste code snippets like this, the IDE can figure out where these libraries are in my underlying java install.  Figured Kotlin/IntelliJ would be the same.</p>\n\n<p>In the below screenshot, any idea why I cannot import test libraries?  Do they need to be added explicitly to my path?  Do I need to put these under a <code>test</code>, rather than the <code>src</code> folder? </p>\n\n<p>Thanks <a href=\"https://i.stack.imgur.com/K97Cx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K97Cx.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "android-studio", "intellij-idea", "kotlin", "read-eval-print-loop"], "answers": [{"comments": [{"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1487012322, "post_id": 42211436, "comment_id": 71584219, "body": "Have you looked at unmock? What is the reason the same method cannot be used here - there you also need no emulator/device"}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "reply_to_user": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1487012620, "post_id": 42211436, "comment_id": 71584373, "body": "It looks like that plugin uses robolectric&#39;s (<a href=\"http://robolectric.org/\" rel=\"nofollow noreferrer\">robolectric.org</a>) implementation of Android. The reason it is not used is because it is unofficial and the behavior is not guaranteed to match a real android device."}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1487012871, "post_id": 42211436, "comment_id": 71584504, "body": "I do not care for guarantees here - and it works really well in unit-tests - just want the same in REPL"}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 1, "last_activity_date": 1487013557, "last_edit_date": 1487013557, "creation_date": 1487012082, "answer_id": 42211436, "question_id": 42210365, "link": "https://stackoverflow.com/questions/42210365/kotlin-repl-with-android-classes-unstubed/42211436#42211436", "title": "Kotlin REPL with Android Classes unStub!ed", "body": "<p>All android (and java.lang.*) classes are placeholders in an Android project. This is because android does not use standard java class files to store the compiled code and there is no way to directly run this code on a computer.</p>\n\n<p>You simply can't use the REPL with android classes, they will only exist on an actual device or emulator.</p>\n\n<p>If you do not care about correctness, then you can use Robolectric's implementation of Android by adding it as a dependency to the project.\nTo make sure it does not collide with the actual implementation you should probably do this with a separate module dedicated to the REPL.</p>\n\n<p>Robolectic's dependency used by unmock is: <code>org.robolectric:android-all:7.1.0_r7-robolectric-0</code></p>\n"}, {"comments": [{"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1487335568, "post_id": 42298111, "comment_id": 71751167, "body": "Thanks for the info - especially the link to the repl plugin src - just as appendinx - Romain Guy said in chat that layoutlib implementation could be used - not yet sure if I invest the time - <a href=\"https://xkcd.com/1319/\" rel=\"nofollow noreferrer\">xkcd.com/1319</a>"}], "tags": [], "owner": {"reputation": 2597, "user_id": 1306903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fde10bcf0813b2162545477be4e7470b?s=128&d=identicon&r=PG", "display_name": "Takhion", "link": "https://stackoverflow.com/users/1306903/takhion"}, "is_accepted": false, "score": 1, "last_activity_date": 1487334845, "creation_date": 1487334845, "answer_id": 42298111, "question_id": 42210365, "link": "https://stackoverflow.com/questions/42210365/kotlin-repl-with-android-classes-unstubed/42298111#42298111", "title": "Kotlin REPL with Android Classes unStub!ed", "body": "<p>The problem is that the Kotlin REPL in IDEA is provided by the Kotlin IDEA plugin, which has no notion of Android per se, but only looks at what's in the classpath, which in this case is the <code>android.jar</code> containing the stubs that throw the exception you mentioned.</p>\n\n<p>Using unmock or even the integrated Android support for removing exceptions from the stubs in tests (see <a href=\"https://developer.android.com/training/testing/unit-testing/local-unit-tests.html\" rel=\"nofollow noreferrer\">here</a> at the end of \"Mock Android dependencies\") won't work as that only affects your Gradle build.</p>\n\n<p>The only solution I can think of is to either open an issue on the <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">Kotlin tracker</a> or dig through the <a href=\"https://github.com/JetBrains/kotlin/tree/master/idea/idea-repl\" rel=\"nofollow noreferrer\">source code of the REPL function in the Kotlin plugin</a> and send a Pull Request.</p>\n"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1244, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1487334845, "creation_date": 1487008338, "question_id": 42210365, "link": "https://stackoverflow.com/questions/42210365/kotlin-repl-with-android-classes-unstubed", "title": "Kotlin REPL with Android Classes unStub!ed", "body": "<p>I like the Kotlin REPL in Idea / Android-Studio - but as an Android Developer I often run into Stub! problems here. When writing unit-tests I am using <a href=\"https://github.com/bjoernQ/unmock-plugin\" rel=\"nofollow noreferrer\">unmock</a> to work around this problem. Is there a way to use the same method used there for the Kotlin REPL plugin?</p>\n\n<p>[<img src=\"https://i.stack.imgur.com/Gk8Dn.png\" alt=\"image showing the problem[2]\"></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1487003168, "post_id": 42208361, "comment_id": 71578797, "body": "You could always expose factory methods and delegate those as opposed to constructors, allowing you to decide when to actually delegate, or just don&#39;t declare variables for <code>first</code> and <code>last</code> in your second constructor. But if you don&#39;t mind me asking, why must you expose <code>Person(first, last, age)</code> AND <code>Person(full name, age)</code>? What if the client forgets to add a space between first and last when using <code>fullName</code>? You cannot declare a variable before constructor delegation."}, {"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "reply_to_user": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1487003307, "post_id": 42208361, "comment_id": 71578892, "body": "This is just a toy example, I wouldn&#39;t actually build these two constructors.  Are you saying I can&#39;t use a secondary constructor this way? In plain java, I thought you could declare variables in secondary constructors?  So I guess this is just a bad example, and it&#39;s hitting on a use case that good coding would avoid?"}, {"owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1487003835, "post_id": 42208361, "comment_id": 71579253, "body": "Yes, you cannot use secondary constructor this way. <code>this</code> is a delegation, which is why you can&#39;t use it within the braces. You&#39;d have to do something along the lines of <code>constructor(...) : this(fullName.split(&quot; &quot;)[0], fullName.split(&quot; &quot;)[1])</code> which has potential for indexing out of bounds."}, {"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "reply_to_user": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1487003973, "post_id": 42208361, "comment_id": 71579334, "body": "So if I had the use case that I had very complex validation of &quot;fullName&quot;, I&#39;d just have a mess on my hands?"}, {"owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1487004707, "post_id": 42208361, "comment_id": 71579783, "body": "Precisely. Why do you want to expose <code>constructor(fullName)</code> in the first place? The only situation I can think of is reading from IO, but if that&#39;s the case, it&#39;s up to the system that&#39;s parsing IO data to split the first and last name. The name should be split by the time it reaches <code>Person</code>, it sn&#39;t the responsibility of the <code>Person</code> class, and implementing this can actually harm reusability (what if you had 2-word last name? The tuba player John Van Houten would have issues using that constructor, assuming he didn&#39;t want &quot;Van&quot; to be his last name, nor wants to exclude it)"}], "answers": [{"tags": [], "owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "is_accepted": false, "score": 1, "last_activity_date": 1487008575, "last_edit_date": 1592644375, "creation_date": 1487008575, "answer_id": 42210435, "question_id": 42208361, "link": "https://stackoverflow.com/questions/42208361/secondary-construction-syntax-kotlin/42210435#42210435", "title": "Secondary construction syntax kotlin", "body": "<p>Constructor calls via <code>this</code> must be the first call. This is why it's handled as a delegate, rather than a normal method invocation. This means you cannot declare variables before the call is delegated.</p>\n<p>You can solve this by simply inlining whatever values you planned on storing in variables:</p>\n<pre><code>constructor(fullName : String, age : int) : this(fullName.split(&quot; &quot;)[0], fullName.split(&quot; &quot;)[1])\n</code></pre>\n<p>But this can potentially index out of bounds if a last name wasn't specified, or if the client decided to use <code>-</code> or some other character as the delimiter. On top of that, it's an eye sore.</p>\n<h1>Design Analysis</h1>\n<p>The issue with your structure is giving the <code>Person</code> class the responsibility of determining the first and last name. This deteriorates the reusability of that class, as it'll be limited to one form of parsing. This is why the parsing of names should not be carried out by <code>Person</code>.</p>\n<p>Instead, you should expose your primary constructor, then have the client of <code>Person</code> separate the first and last name.</p>\n<h1>Solution Example</h1>\n<p>Imagine we were reading names from a file. Each line in the file consists of a full name.</p>\n<pre><code>nameFile.forEachLine({ personList.add(Person(it)) })\n</code></pre>\n<p>This is the luxury you are attempting to give your clients: allow them to simply input a name, without worrying about parsing it.</p>\n<p>The problem with this is the lack of safety: what if the line only contained a first name? What if the file didn't use whitespace to separate first and last name? You'd be forced to define new <code>Person</code> types just to handle different first/last name combinations.</p>\n<p>Instead, the parsing should occur outside of the class:</p>\n<pre><code>file.forEachLine({\n    val firstName = ...\n    val secondName = ...\n\n    personList.add(Person(firstName, secondName))\n})\n</code></pre>\n<p>Now that the responsibility has been taken out of <code>Person</code>, we can give the responsibility to a new object if we wanted:</p>\n<pre><code>val parser = NameParser(&quot; &quot;) //specify delimiter\nfile.forEachLine({\n    val firstName = parser.extractFirstName(it)\n    val lastName = parser.extractLastName(it)\n\n    personList.add(Person(firsrName, lastName))\n})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1487181013, "post_id": 42242744, "comment_id": 71671009, "body": "Ok, thank you Micahel.  This kind of reminds me of python for some reason.  I remember making constructors that are also called like static methods."}, {"owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1487437970, "post_id": 42242744, "comment_id": 71789621, "body": "Next thing you know, your API is flooded with static factory methods that perform corner case checks. What if you wanted to add a social security number later on, or maybe change how names are parsed? Would be forced to violate some pretty useful principles, such as Open/Close"}, {"owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "reply_to_user": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1487546694, "post_id": 42242744, "comment_id": 71820766, "body": "@VinceEmigh Often the constructor / factory function is <i>exactly</i> the place you want corner case checks, being far better than littering those checks in a dozen places throughout your code. But, as always, it is a matter of balance. I would advocate against blindly creating factory functions for every case - but if it&#39;s a pattern that crops up several times - then a case can certainly be made for it."}, {"owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1487550363, "post_id": 42242744, "comment_id": 71821721, "body": "@MichaelAnderson It wouldn&#39;t be littered around the code, it would be handled by an object responsible for it (in this case, a parser). This factory is embedding parsing rules into the contract of <code>Person</code>, harming it&#39;s reusability. What if they wanted to expose a <code>Person(title, first, last, age)</code>? Now you need a <code>fromFullNameAndAgeAndTitle</code>."}], "tags": [], "owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "is_accepted": true, "score": 2, "last_activity_date": 1487142486, "creation_date": 1487142486, "answer_id": 42242744, "question_id": 42208361, "link": "https://stackoverflow.com/questions/42208361/secondary-construction-syntax-kotlin/42242744#42242744", "title": "Secondary construction syntax kotlin", "body": "<p>The solution I use when I want a secondary constructor that needs to perform some calculations before passing the results to the primary constructor is to a function on the companion object. The code to do this would look like:</p>\n\n<pre><code>class Person(first: String, last: String, age: Int) {  \n\n    companion object {\n        fun fromFullNameAndAge(fullname: String, age: Int) : Person {\n          println(\"In secondary constructor\")\n          var bits = fullname.split()\n          // Additional error checking can (and should) go in here.\n          return Person(bits[0],bits[1],age)\n        }\n    }\n\n    init{\n        println(\"Initializing\")\n    }\n}\n</code></pre>\n\n<p>You can then use it like this</p>\n\n<pre><code>var p = Person.fromFullNameAndAge(\"John Doe\", 27)\n</code></pre>\n\n<p>Which is not as neat as <code>Person(\"John Doe\", 27)</code> but is IMO not too bad.</p>\n"}], "owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 42242744, "answer_count": 2, "score": 8, "last_activity_date": 1487142486, "creation_date": 1487001722, "question_id": 42208361, "link": "https://stackoverflow.com/questions/42208361/secondary-construction-syntax-kotlin", "title": "Secondary construction syntax kotlin", "body": "<p>I have the following kotlin class with a primary constructor,</p>\n\n<pre><code>class Person(first: String, last: String, age: Int){ \n\n    init{\n        println(\"Initializing\")\n    }\n\n}\n</code></pre>\n\n<p>I'd like to add a secondary constructor that parses a fullname into a <code>first</code> and <code>last</code> name and calls the primary constructor.  However, I can't get the syntax right...</p>\n\n<pre><code>class Person(first: String, last: String, age: Int){  \n\n    // Secondary constructor\n    constructor(fullname: String, age: Int):\n        this(\"first\", \"last\", age)\n        {\n            println(\"In secondary constructor\")\n        }\n\n    init{\n        println(\"Initializing\")\n    }\n}\n</code></pre>\n\n<p>This works fine, because I'm not actually parsing <code>fullname</code> in the secondary constructor.  When I go ahead and try to parse fullname,</p>\n\n<pre><code>constructor(fullname: String, age: Int):\nvar first = fullname.split()[0];\n...\n{\n    println(\"In secondary constructor\")\n}\n</code></pre>\n\n<p>I get an unresolved reference: fullname.  It doesn't exist in scope, but if I put it in the braces, then I cannot call the primary constructor via <code>this</code>,</p>\n\n<pre><code>constructor(fullname: String, age: Int):\n{\n    var first = fullname\n    this(first, \"foo\", age)\n    println(\"In secondary constructor\")\n}\n</code></pre>\n\n<p>I get an error involving a missing <code>invoke</code> function.</p>\n\n<p>Can't find a good example of this case on Kotlin docs, sorry.</p>\n"}, {"tags": ["lambda", "parameter-passing", "kotlin", "anonymous-function"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 1, "creation_date": 1486988033, "post_id": 42203671, "comment_id": 71568790, "body": "You arent passing any argument to the function. You are defining a function, and not calling it."}, {"owner": {"reputation": 2164, "user_id": 1957951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A6qAz.png?s=128&g=1", "display_name": "Gergely Lukacsy", "link": "https://stackoverflow.com/users/1957951/gergely-lukacsy"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1486988068, "post_id": 42203671, "comment_id": 71568814, "body": "I know, I denoted it the description."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1486988163, "post_id": 42203671, "comment_id": 71568868, "body": "I&#39;ve read it. What&#39;s the problem then? What is your expected output?"}, {"owner": {"reputation": 2164, "user_id": 1957951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A6qAz.png?s=128&g=1", "display_name": "Gergely Lukacsy", "link": "https://stackoverflow.com/users/1957951/gergely-lukacsy"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1486988387, "post_id": 42203671, "comment_id": 71568985, "body": "I&#39;d like to know how to pass that argument to the lambda... The desired input would be like this would produce <code>println(name.reversed())</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2164, "user_id": 1957951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A6qAz.png?s=128&g=1", "display_name": "Gergely Lukacsy", "link": "https://stackoverflow.com/users/1957951/gergely-lukacsy"}, "edited": false, "score": 2, "creation_date": 1486988859, "post_id": 42203873, "comment_id": 71569286, "body": "Thanks, that was I looking for! &quot;name.reversed()&quot; are you trolling me with this? :)"}, {"owner": {"reputation": 2164, "user_id": 1957951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A6qAz.png?s=128&g=1", "display_name": "Gergely Lukacsy", "link": "https://stackoverflow.com/users/1957951/gergely-lukacsy"}, "edited": false, "score": 0, "creation_date": 1486989435, "post_id": 42203873, "comment_id": 71569675, "body": "I know. My intention with this code was to learn about lambdas, not to reverse strings."}], "tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": true, "score": 5, "last_activity_date": 1486988301, "creation_date": 1486988301, "answer_id": 42203873, "question_id": 42203671, "link": "https://stackoverflow.com/questions/42203671/how-to-pass-arguments-to-anonymous-lambda-function-in-kotlin/42203873#42203873", "title": "How to pass arguments to anonymous lambda function in Kotlin?", "body": "<p>You never call the function with the parameter, it should be</p>\n\n<pre><code>val name = \"Tobias Boon\"\nprintln(\"reverse=\" + fun(name: String) : String {\n   ...\n      return t\n}(name))\n</code></pre>\n\n<p>Btw, your particular example is already implemented in the standard library:</p>\n\n<pre><code>println(name.reversed())\n</code></pre>\n"}], "owner": {"reputation": 2164, "user_id": 1957951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A6qAz.png?s=128&g=1", "display_name": "Gergely Lukacsy", "link": "https://stackoverflow.com/users/1957951/gergely-lukacsy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 42203873, "answer_count": 1, "score": 0, "last_activity_date": 1486988533, "creation_date": 1486987701, "last_edit_date": 1486988533, "question_id": 42203671, "link": "https://stackoverflow.com/questions/42203671/how-to-pass-arguments-to-anonymous-lambda-function-in-kotlin", "title": "How to pass arguments to anonymous lambda function in Kotlin?", "body": "<p>I'd like to write an anonymous lambda function in Kotlin, but it looks like it  doesn't take the argument passed to it. (It is not passed at all, since the IDE hints that \"<em>variable 'name' is never used</em>\".)</p>\n\n<p>Code:</p>\n\n<pre><code>var name = \"Tobias Boon\"\nprintln(\"reverse=\" + fun(name: String): String {\n    var t: String = \"\"\n    for(i in name.indices.last downTo 1) {\n        t += text.subSequence(i - 1, i)\n    }\n    return t\n})\n</code></pre>\n\n<p>Currently prints: <code>reverse=(kotlin.String) -&gt; kotlin.String</code></p>\n"}, {"tags": ["groovy", "kotlin"], "comments": [{"owner": {"reputation": 29543, "user_id": 3181392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIgPs.png?s=128&g=1", "display_name": "cfrick", "link": "https://stackoverflow.com/users/3181392/cfrick"}, "edited": false, "score": 0, "creation_date": 1486979576, "post_id": 42200880, "comment_id": 71563651, "body": "Do you compile the kotlin files before the groovy files?"}, {"owner": {"reputation": 9459, "user_id": 1432980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e646027bcc545177a971230c1e23134a?s=128&d=identicon&r=PG", "display_name": "lapots", "link": "https://stackoverflow.com/users/1432980/lapots"}, "reply_to_user": {"reputation": 29543, "user_id": 3181392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIgPs.png?s=128&g=1", "display_name": "cfrick", "link": "https://stackoverflow.com/users/3181392/cfrick"}, "edited": false, "score": 0, "creation_date": 1486981984, "post_id": 42200880, "comment_id": 71565145, "body": "Hm. I use default order and according to it, it compiles in order <code>compileKotlin</code>, <code>compileJava</code>, <code>compileGroovy</code>."}, {"owner": {"reputation": 29543, "user_id": 3181392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIgPs.png?s=128&g=1", "display_name": "cfrick", "link": "https://stackoverflow.com/users/3181392/cfrick"}, "edited": false, "score": 0, "creation_date": 1486982078, "post_id": 42200880, "comment_id": 71565199, "body": "do you get that error at compile or runtime?"}, {"owner": {"reputation": 9459, "user_id": 1432980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e646027bcc545177a971230c1e23134a?s=128&d=identicon&r=PG", "display_name": "lapots", "link": "https://stackoverflow.com/users/1432980/lapots"}, "reply_to_user": {"reputation": 29543, "user_id": 3181392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIgPs.png?s=128&g=1", "display_name": "cfrick", "link": "https://stackoverflow.com/users/3181392/cfrick"}, "edited": false, "score": 0, "creation_date": 1486982227, "post_id": 42200880, "comment_id": 71565286, "body": "compile-time as I am unable to build the artifact"}, {"owner": {"reputation": 9459, "user_id": 1432980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e646027bcc545177a971230c1e23134a?s=128&d=identicon&r=PG", "display_name": "lapots", "link": "https://stackoverflow.com/users/1432980/lapots"}, "reply_to_user": {"reputation": 29543, "user_id": 3181392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIgPs.png?s=128&g=1", "display_name": "cfrick", "link": "https://stackoverflow.com/users/3181392/cfrick"}, "edited": false, "score": 0, "creation_date": 1486982383, "post_id": 42200880, "comment_id": 71565386, "body": "@cfrick add console output"}], "answers": [{"tags": [], "owner": {"reputation": 422, "user_id": 2780707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QrTbW.jpg?s=128&g=1", "display_name": "Darksnake", "link": "https://stackoverflow.com/users/2780707/darksnake"}, "is_accepted": false, "score": 0, "last_activity_date": 1492934127, "creation_date": 1492934127, "answer_id": 43568703, "question_id": 42200880, "link": "https://stackoverflow.com/questions/42200880/groovy-is-unable-to-resolve-kotlin-classes/43568703#43568703", "title": "groovy is unable to resolve kotlin classes", "body": "<p>I had the same problem. It has something to do with Kotlin companion objects. I moved static functions from companion object to package level and it started to work.</p>\n"}, {"comments": [{"owner": {"reputation": 248, "user_id": 2938293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13d3c56e91fe340bfd1bb5be05affda1?s=128&d=identicon&r=PG", "display_name": "Ryan Hendry", "link": "https://stackoverflow.com/users/2938293/ryan-hendry"}, "edited": false, "score": 0, "creation_date": 1520530172, "post_id": 44521266, "comment_id": 85363512, "body": "You can also duplicate this for test compiling. Just replace compileGroovy with compileTestGroovy and compileKotlin with compileTestKotlin"}, {"owner": {"reputation": 14919, "user_id": 504179, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/807000d922297ee3fa2dac64fc32d3e2?s=128&d=identicon&r=PG", "display_name": "ATom", "link": "https://stackoverflow.com/users/504179/atom"}, "edited": false, "score": 0, "creation_date": 1594330685, "post_id": 44521266, "comment_id": 111097090, "body": "It works but Android Studio still think that Kotlin classes don&#39;t exist inside of Groovy files and mark them red. I make it works at least in IDEA"}], "tags": [], "owner": {"reputation": 351, "user_id": 3009538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95053306bff95976ea3376a6ccf14072?s=128&d=identicon&r=PG&f=1", "display_name": "vuk", "link": "https://stackoverflow.com/users/3009538/vuk"}, "is_accepted": false, "score": 15, "last_activity_date": 1497359521, "last_edit_date": 1497359521, "creation_date": 1497356120, "answer_id": 44521266, "question_id": 42200880, "link": "https://stackoverflow.com/questions/42200880/groovy-is-unable-to-resolve-kotlin-classes/44521266#44521266", "title": "groovy is unable to resolve kotlin classes", "body": "<p>Looks like it is not so simple.</p>\n\n<p>See <a href=\"https://discuss.gradle.org/t/kotlin-groovy-and-java-compilation/14903/2\" rel=\"noreferrer\">https://discuss.gradle.org/t/kotlin-groovy-and-java-compilation/14903/2</a></p>\n\n<p>Using suggestions from there, I added</p>\n\n<pre><code>compileGroovy {\n    dependsOn tasks.getByPath('compileKotlin')\n    classpath += files(compileKotlin.destinationDir)\n}\n</code></pre>\n\n<p>And it worked.</p>\n"}, {"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": false, "score": 1, "last_activity_date": 1579082661, "creation_date": 1579082661, "answer_id": 59749076, "question_id": 42200880, "link": "https://stackoverflow.com/questions/42200880/groovy-is-unable-to-resolve-kotlin-classes/59749076#59749076", "title": "groovy is unable to resolve kotlin classes", "body": "<p><a href=\"https://stackoverflow.com/a/44521266/5427663\">vuk's answer</a> eventually solved the problem for me. </p>\n\n<p>However, it did not work immediately. Some of my Groovy Spock tests depended on a test utility in Kotlin, and I spent a lot of time figuring out what is wrong. It turned out that I did not move my Kotlin file out of the <code>src/test/groovy</code> folder, thus it was not compiled at the right time.</p>\n\n<p><strong>Make sure that every file is in the correct subfolder according to the language.</strong><br>\nFor example:</p>\n\n<pre><code>src\n+---- main\n|   +---- kotlin\n|       +---- ...\n+---- test\n    +---- groovy\n    |   +---- ...\n    +---- kotlin\n        +---- ...\n</code></pre>\n\n<p>For tests, this Gradle code will compile Kotlin before Groovy:</p>\n\n<pre><code>compileTestGroovy {\n    dependsOn tasks.getByPath('compileTestKotlin')\n    classpath += files(compileTestKotlin.destinationDir)\n}\n</code></pre>\n"}], "owner": {"reputation": 9459, "user_id": 1432980, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e646027bcc545177a971230c1e23134a?s=128&d=identicon&r=PG", "display_name": "lapots", "link": "https://stackoverflow.com/users/1432980/lapots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2587, "favorite_count": 2, "answer_count": 3, "score": 9, "last_activity_date": 1579082661, "creation_date": 1486978722, "last_edit_date": 1486982368, "question_id": 42200880, "link": "https://stackoverflow.com/questions/42200880/groovy-is-unable-to-resolve-kotlin-classes", "title": "groovy is unable to resolve kotlin classes", "body": "<p>As I was not able to resolve the issue I have with <code>kotlin</code>, I decided to return to <code>groovy</code> in order to implement the plugin.</p>\n\n<p>However I ran into the issue. I have such project structure.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Xktbu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Xktbu.png\" alt=\"enter image description here\"></a></p>\n\n<p>In order not to rewrite all classes I decided to reuse classes implemented in <code>kotlin</code>.</p>\n\n<p>However my classes <code>FileProcessingCoreGroovy</code> &amp; <code>DownloadCoreGroovy</code> are unable to resolve class <code>ProcessStream</code> and <code>UnpackStream</code>.</p>\n\n<p>I thought they should be able freely use each other but I guess I was wrong. What is the problem? </p>\n\n<p>The classes itself are imported just fine by IDE (not marked in red color and so on)</p>\n\n<p><a href=\"https://i.stack.imgur.com/MSjjZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/MSjjZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>The console output looks like this (I use another class where I import <code>PluginUtils</code> from <code>kotlin</code> classes)</p>\n\n<pre><code>:clean                                                                           \n:compileKotlin (...multiple deprecated messages...)\n:compileJava UP-TO-DATE       \n:compileGroovy                 \nstartup failed:                \nD:\\groovy_apps\\MISC\\gradle-app-environment-plugin\\src\\main\\groovy\\com.lapots.gradle.plugins.appenv\\ApplicationEnvironmentGroovyPlugin.g\nroovy: 4: unable to resolve class com.lapots.gradle.plugins.appenv.core.PluginUtils\n @ line 4, column 1.\n   import com.lapots.gradle.plugins.appenv.core.PluginUtils\n   ^                           \n</code></pre>\n"}, {"tags": ["java", "reflection", "kotlin"], "comments": [{"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1486944863, "post_id": 42194682, "comment_id": 71551688, "body": "That&#39;s a parameter, not a property."}, {"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "reply_to_user": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1486945197, "post_id": 42194682, "comment_id": 71551760, "body": "@VinceEmigh I&#39;m not familiar with Kotlin, but I would suspect the annotation applies to the constructor parameter rather than the implicit property."}, {"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "reply_to_user": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "edited": false, "score": 0, "creation_date": 1486945642, "post_id": 42194682, "comment_id": 71551870, "body": "@VinceEmigh Very well. I shall desist from further flaunting my ignorance."}], "answers": [{"tags": [], "owner": {"reputation": 12952, "user_id": 2398375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1a5530da29f23682b10bb5568076f83d?s=128&d=identicon&r=PG", "display_name": "Dioxin", "link": "https://stackoverflow.com/users/2398375/dioxin"}, "is_accepted": true, "score": 4, "last_activity_date": 1487006606, "last_edit_date": 1487006606, "creation_date": 1486963357, "answer_id": 42197146, "question_id": 42194682, "link": "https://stackoverflow.com/questions/42194682/how-to-get-annotations-of-a-kotlin-property-from-java/42197146#42197146", "title": "How to get annotations of a Kotlin property from Java?", "body": "<p>From the <a href=\"http://kotlinlang.org/docs/reference/annotations.html\" rel=\"nofollow noreferrer\">Kotlin reference</a>:</p>\n\n<blockquote>\n  <p>When you're annotating a property or a primary constructor parameter, there are multiple Java elements which are generated from the corresponding Kotlin element, and therefore multiple possible locations for the annotation in the generated Java bytecode.</p>\n</blockquote>\n\n<p>In this case, you want to annotate the field, so your property declaration should look like:</p>\n\n<pre><code>@field:A\n</code></pre>\n\n<p>Your constructor would look like:</p>\n\n<pre><code>TestClass(@field:A myProperty : String) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": false, "score": 5, "last_activity_date": 1486971371, "creation_date": 1486971371, "answer_id": 42198773, "question_id": 42194682, "link": "https://stackoverflow.com/questions/42194682/how-to-get-annotations-of-a-kotlin-property-from-java/42198773#42198773", "title": "How to get annotations of a Kotlin property from Java?", "body": "<p>As mentioned in another answer, you probably want to annotate the field instead of the property. However, in case you really need to annotate the property, you can find the annotations via Kotlin reflection:</p>\n\n<pre><code>Field field = TestClass.class.getDeclaredField(\"field\");\nKProperty&lt;?&gt; property = ReflectJvmMapping.getKotlinProperty(f);\nSystem.out.println(property.getAnnotations());\n</code></pre>\n"}], "owner": {"reputation": 414, "user_id": 4664470, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-BaoYmnGt-54/AAAAAAAAAAI/AAAAAAAAAgk/stbYE2zCrZw/photo.jpg?sz=128", "display_name": "Ricardo Meneghin Filho", "link": "https://stackoverflow.com/users/4664470/ricardo-meneghin-filho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4044, "favorite_count": 0, "accepted_answer_id": 42197146, "answer_count": 2, "score": 8, "last_activity_date": 1487006606, "creation_date": 1486943581, "last_edit_date": 1487005315, "question_id": 42194682, "link": "https://stackoverflow.com/questions/42194682/how-to-get-annotations-of-a-kotlin-property-from-java", "title": "How to get annotations of a Kotlin property from Java?", "body": "<p>I have a kotlin class whose properties have a Java annotation, but i can't acess these annotations with Java reflection:</p>\n\n<pre><code>class TestClass(@A var myProperty : String)\n</code></pre>\n\n<p>The following test prints null:</p>\n\n<pre><code>public class TestKotlinField {\n\n    @Retention(RetentionPolicy.RUNTIME)\n    public @interface A{}\n\n    @Test\n    public void test() throws NoSuchFieldException {\n        System.out.println(TestClass.class.getDeclaredField(\"myProperty\").getAnnotation(A.class));\n    }\n}\n</code></pre>\n\n<p>How can i get the annotations of a given kotlin property?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1486907151, "post_id": 42187956, "comment_id": 71538530, "body": "How do you know <code>{AppContainer} from &#39;react-hot-loader&#39;;</code> is not a translated into an Activity class? That&#39;s the entry point of the Redux render in index.js, right?"}], "answers": [{"tags": [], "owner": {"reputation": 4058, "user_id": 3988291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7nFrq.jpg?s=128&g=1", "display_name": "Geoffrey Marizy", "link": "https://stackoverflow.com/users/3988291/geoffrey-marizy"}, "is_accepted": false, "score": 2, "last_activity_date": 1486944264, "creation_date": 1486944264, "answer_id": 42194741, "question_id": 42187956, "link": "https://stackoverflow.com/questions/42187956/android-application-without-classes/42194741#42194741", "title": "Android Application without Classes?", "body": "<p>You can't replace Activity class by kotlin object on Android, for the same reason you don't instantiate Activities by calling it's constructor: \nactivities are managed by the platform.</p>\n\n<p>When you ask (via an Intent) the platform for an Activity, the platform will try to instantiate it by calling it's constructor with zero parameter. Which doesn't exist for an object, giving the mentioned error.</p>\n\n<p>That's said, some developer dodge around the frame given by Android, like <a href=\"https://github.com/square/mortar\" rel=\"nofollow noreferrer\">mortar</a>, by having only one activity and using custom logic for navigation between views.</p>\n"}, {"comments": [{"owner": {"reputation": 1330, "user_id": 3853712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3ori.png?s=128&g=1", "display_name": "Jim Andreas", "link": "https://stackoverflow.com/users/3853712/jim-andreas"}, "edited": false, "score": 0, "creation_date": 1491381470, "post_id": 42238079, "comment_id": 73522038, "body": "I am able to launch into MainActivityKotlin.kt if I add the line: <code>apply plugin: &quot;kotlin-android&quot;</code> to the app <code>build.gradle</code> file.   Without this line, I get the same error.   Note that the &quot;configure Kotlin for project&quot; action in Android Studio adds a kotlin project to the top level <code>build.gradle</code> file with the line: <code>apply plugin: &#39;kotlin&#39;</code>.   Kotlin version level as of this writing is 1.1.1."}], "tags": [], "owner": {"reputation": 296, "user_id": 5696504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ad2f781daa01397e2e2d64e39c4d14f?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/5696504/bill"}, "is_accepted": true, "score": 0, "last_activity_date": 1487114647, "creation_date": 1487114647, "answer_id": 42238079, "question_id": 42187956, "link": "https://stackoverflow.com/questions/42187956/android-application-without-classes/42238079#42238079", "title": "Android Application without Classes?", "body": "<p>As Geoffrey said, the Android platform manages your activities, but that also means that the platform is responsible for keeping track of your Activity's instances - which is the purpose of Singleton.</p>\n\n<p>So, while you can't make your Activity an object, you can still make it a Singleton by using the <code>android:launchMode</code> attribute in your <code>AndroidManifest</code>:</p>\n\n<pre><code>    &lt;activity\n        android:name=\".MainActivity\"\n        android:label=\"@string/app_name\"\n        android:launchMode=\"singleInstance\"&gt;\n</code></pre>\n\n<p>For more information on the launchMode attribute (including other possible values), check out the <a href=\"https://developer.android.com/guide/topics/manifest/activity-element.html#lmode\" rel=\"nofollow noreferrer\">Official Documentation</a></p>\n"}], "owner": {"reputation": 93, "user_id": 7544860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21d7fc2b450e82e887abb8d118d07d43?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas W&#252;nsche", "link": "https://stackoverflow.com/users/7544860/niklas-w%c3%bcnsche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 42238079, "answer_count": 2, "score": 0, "last_activity_date": 1487114647, "creation_date": 1486905085, "last_edit_date": 1486905507, "question_id": 42187956, "link": "https://stackoverflow.com/questions/42187956/android-application-without-classes", "title": "Android Application without Classes?", "body": "<p>I have seen a JS talk about Redux recently. The speaker programmed a working application without any classes, just with const variables. He even excluded classes in his lint file (<a href=\"https://github.com/MartinSeeler/redux-presentation/tree/master/demo\" rel=\"nofollow noreferrer\">https://github.com/MartinSeeler/redux-presentation/tree/master/demo</a>).</p>\n\n<p>So I tried to do the same in my Android apps, which are written in Kotlin. Unfortunately, I get the following error when I try to make my MainActivity class an object:</p>\n\n<pre><code>java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{blog.app.niklas.flyingbytes/blog.app.niklas.flyingbytes.MainActivity}: java.lang.IllegalAccessException: void blog.app.niklas.flyingbytes.MainActivity.&lt;init&gt;() is not accessible from java.lang.Class&lt;android.app.Instrumentation&gt;\n    Caused by: java.lang.IllegalAccessException: void blog.app.niklas.flyingbytes.MainActivity.&lt;init&gt;() is not accessible from java.lang.Class&lt;android.app.Instrumentation&gt;\n</code></pre>\n\n<p>Is there a way to work around this? I really like the idea of having as many singleton objects as possible in my app.</p>\n\n<p>Thank you in advance,</p>\n\n<p>Niklas </p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 2, "creation_date": 1486888786, "post_id": 42185182, "comment_id": 71533502, "body": "Is this a use case where a <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#lazy\" rel=\"nofollow noreferrer\">lazy delegate</a> would help?"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 7, "last_activity_date": 1488376521, "last_edit_date": 1488376521, "creation_date": 1486896980, "answer_id": 42186725, "question_id": 42185182, "link": "https://stackoverflow.com/questions/42185182/is-there-a-way-to-write-an-extension-function-that-changes-the-value-of-the-obje/42186725#42186725", "title": "Is there a way to write an extension function that changes the value of the object?", "body": "<p>A solution that would work for properties is to write an extension function for mutable properties and then use it with the property reference. This code work with Kotlin 1.1:</p>\n\n<pre><code>fun KMutableProperty0&lt;Boolean&gt;.checkAndUnset(): Boolean {\n    val result = get()\n    set(false)\n    return result\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>class MyClass {\n    private var firstTime = true\n\n    fun f() {\n        if (this::firstTime.checkAndUnset()) {\n            println(\"First time\")\n        }\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val c = MyClass()\n    c.f() // First time\n    c.f() //\n}\n</code></pre>\n\n<p><sub><a href=\"http://try.kotlinlang.org/#/UserProjects/gm663lrla5med0s08jqpmu8mql/9btmh1dee1me1e3s041to7uem6\" rel=\"nofollow noreferrer\">(check the runnable demo)</a></sub></p>\n\n<p>This, however, will not work for local variables (at least not in Kotlin 1.1).</p>\n\n<hr>\n\n<p>In Kotlin 1.0.x, <a href=\"https://github.com/Kotlin/KEEP/blob/master/proposals/bound-callable-references.md\" rel=\"nofollow noreferrer\">bound callable references</a> are not yet available, and the solution above can be rewritten to this somewhat clumsier code:</p>\n\n<pre><code>fun &lt;T&gt; KMutableProperty1&lt;T, Boolean&gt;.checkAndUnset(receiver: T): Boolean {\n    val result = get(receiver)\n    set(receiver, false)\n    return result\n}\n</code></pre>\n\n<p><sup></sup></p>\n\n<pre><code>MyClass::firstTime.checkAndUnset(this)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "is_accepted": false, "score": 1, "last_activity_date": 1486977571, "last_edit_date": 1486977571, "creation_date": 1486977266, "answer_id": 42200404, "question_id": 42185182, "link": "https://stackoverflow.com/questions/42185182/is-there-a-way-to-write-an-extension-function-that-changes-the-value-of-the-obje/42200404#42200404", "title": "Is there a way to write an extension function that changes the value of the object?", "body": "<p>Just create following property</p>\n\n<pre><code>private var firstTime: Boolean = true\n    get() {\n        return if (field) { //Note: field - is keyword in current context\n            field = false \n            true\n        } else false \n    }\n    set(v) { field = v }\n</code></pre>\n\n<p>And usage as simple as</p>\n\n<pre><code>if (firstTime) {\n    //It's first time\n    //firstTime is false now\n}\n</code></pre>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 1, "accepted_answer_id": 42186725, "answer_count": 2, "score": 6, "last_activity_date": 1488376521, "creation_date": 1486884382, "question_id": 42185182, "link": "https://stackoverflow.com/questions/42185182/is-there-a-way-to-write-an-extension-function-that-changes-the-value-of-the-obje", "title": "Is there a way to write an extension function that changes the value of the object?", "body": "<p>In my case I want to change a primitive - Boolean</p>\n\n<p>I never liked the following type of code:</p>\n\n<pre><code>private var firstTime: Boolean = true\n...\n\n    if (firstTime) {\n        // do something for the first time here\n        firstTime = false\n    }\n</code></pre>\n\n<p>would be nice if I could have an extension function like:</p>\n\n<pre><code>if (firstTime.checkAndUnset()) {\n    // do something for the first time here\n}\n</code></pre>\n\n<p>Is this possible?</p>\n"}, {"tags": ["java", "kotlin", "spark-java"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1486879042, "post_id": 42178367, "comment_id": 71531772, "body": "Unfortunately this question is likely to be closed as &quot;to vague&quot;. What you can do is to extract &quot;those 2 issues previously mentioned&quot; into 2 separate questions about Spark and close this one."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1487682910, "post_id": 42178367, "comment_id": 71886350, "body": "You could create a github issue about separation of middleware. Pretty sure that already exists as a feature on their roadmap, though"}], "answers": [{"tags": [], "owner": {"reputation": 200, "user_id": 5293388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bcba781e097faa7337cc1e621421cdf?s=128&d=identicon&r=PG", "display_name": "Maciej St\u0119pyra", "link": "https://stackoverflow.com/users/5293388/maciej-st%c4%99pyra"}, "is_accepted": false, "score": 0, "last_activity_date": 1487002744, "creation_date": 1487002744, "answer_id": 42208725, "question_id": 42178367, "link": "https://stackoverflow.com/questions/42178367/what-are-some-good-jvm-based-web-server-libraries/42208725#42208725", "title": "What are some good JVM-based web server libraries?", "body": "<p>Try one of these:</p>\n\n<ul>\n<li><a href=\"https://projects.spring.io/spring-boot/\" rel=\"nofollow noreferrer\">https://projects.spring.io/spring-boot/</a> (lots of libs, quiet complicated, but powerful)</li>\n<li><a href=\"http://restx.io/\" rel=\"nofollow noreferrer\">http://restx.io/</a></li>\n<li>Jersey2</li>\n<li>Resteasy</li>\n</ul>\n"}], "owner": {"reputation": 2463, "user_id": 3243124, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e6526d2b3a6432d8d50ecc8ce6e7305f?s=128&d=identicon&r=PG&f=1", "display_name": "AJ_1310", "link": "https://stackoverflow.com/users/3243124/aj-1310"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1487002744, "creation_date": 1486830971, "question_id": 42178367, "link": "https://stackoverflow.com/questions/42178367/what-are-some-good-jvm-based-web-server-libraries", "title": "What are some good JVM-based web server libraries?", "body": "<p>I currently have a Kotlin app that I'd like to expose with a REST API server. I'm finding really hard to decide for a web framework to build around it.</p>\n\n<p>My background is Node.JS with express and I'm trying to find something at least similar to it at the level of middleware and modularity. But since I just started learning Java recently the getting started part is the major entry-barrier.</p>\n\n<p>What striked me as appropriate was Spark but I can't find a way to separate my routes between different files and have local-per-file middleware.</p>\n\n<p>I considered Play but it seemed that it needed a very big level of setup for a new app, even more if it's an existing one.</p>\n\n<p>While my app ain't that big I plan on evolving it so I need something that can scale appropriately. So I'm asking what options do I have? I'm really looking forward on working with Spark if I can tackle those 2 issues previously mentioned, any help about them is appreciated.</p>\n"}, {"tags": ["java", "kotlin", "rx-java2"], "comments": [{"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1486821152, "post_id": 42176634, "comment_id": 71516689, "body": "@akarnokd you are a core contributor to RxJava right?"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 1, "creation_date": 1486821516, "post_id": 42176634, "comment_id": 71516818, "body": "Yes. What do you want to achieve? Push items into a queue and replay it to subscribers or multicast items as they are generated imperatively? If so, please look at the <code>Subject</code> concept of RxJava (also <code>FlowableProcessor</code> in v2)."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1486821856, "post_id": 42176634, "comment_id": 71516940, "body": "I have a long running process which emits events. I gather them in a queue and I expose a method which returns a <code>Flowable</code> which wraps around my queue. The problem is that there might be already elements in the queue when I create the <code>Flowable</code>. I will process the events only once and I know when the flow of events stops so I know when I need to <code>complete</code> the <code>Flowable</code>."}], "answers": [{"comments": [{"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1486822128, "post_id": 42176803, "comment_id": 71517038, "body": "What class did you use for <code>emitter</code>? I will call the <code>onNext</code> and <code>onComplete</code> outside from the <code>Flowable.create</code>&#39;s scope so I need to store a reference to it elsewhere."}, {"owner": {"reputation": 7049, "user_id": 1544715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be85f7bc23d6fa1addc8d35e39870579?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/1544715/magnus"}, "reply_to_user": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1486822737, "post_id": 42176803, "comment_id": 71517225, "body": "With <code>Flowable.create</code> the emiiter is provided by RXJava, so dealing with the scope can be tricky, I have added an example using a publish subject which might be easier for you."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1486823334, "post_id": 42176803, "comment_id": 71517401, "body": "Is there a version which &quot;remembers&quot; the <code>onNext</code> calls if I don&#39;t have a subscriber yet? Currently if I call <code>onNext</code> before I <code>subscribe</code> to the <code>Flowable</code> the values are lost."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1486823408, "post_id": 42176803, "comment_id": 71517432, "body": "Ok I found it it is <code>ReplaySubject</code>. Thanks!"}], "tags": [], "owner": {"reputation": 7049, "user_id": 1544715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be85f7bc23d6fa1addc8d35e39870579?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/1544715/magnus"}, "is_accepted": true, "score": 4, "last_activity_date": 1486822970, "last_edit_date": 1486822970, "creation_date": 1486822014, "answer_id": 42176803, "question_id": 42176634, "link": "https://stackoverflow.com/questions/42176634/how-can-i-explicitly-signal-completion-of-a-flowable-in-rxjava/42176803#42176803", "title": "How can I explicitly signal completion of a Flowable in RxJava?", "body": "<p>Using <code>.fromIterable</code> is the wrong way to create a <code>Flowable</code> for your use case.<br>\nIm not actually clear on what that use case is, but you probably want to use <code>Flowable.create()</code>  or a <code>PublishSubject</code></p>\n\n<pre><code>val flowable = Flowable.create&lt;Int&gt;( {\n    it.onNext(1)\n    it.onNext(2)\n    it.onComplete()\n}, BackpressureStrategy.MISSING)\n\nval publishSubject = PublishSubject.create&lt;Int&gt;()\nval flowableFromSubject = publishSubject.toFlowable(BackpressureStrategy.MISSING)\n//This data will be dropepd unless something is subscribed to the flowable.\npublishSubject.onNext(1)\npublishSubject.onNext(2)\npublishSubject.onComplete()\n</code></pre>\n\n<p>Of course how you deal with back-pressure will depend on the nature of the source of data.</p>\n"}, {"comments": [{"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1486828095, "post_id": 42177085, "comment_id": 71518884, "body": "<code>ReplaySubject</code> was the solution thanks! I ended up not needing the <code>Iterable</code> at all."}], "tags": [], "owner": {"reputation": 4058, "user_id": 3988291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7nFrq.jpg?s=128&g=1", "display_name": "Geoffrey Marizy", "link": "https://stackoverflow.com/users/3988291/geoffrey-marizy"}, "is_accepted": false, "score": 2, "last_activity_date": 1486823735, "creation_date": 1486823735, "answer_id": 42177085, "question_id": 42176634, "link": "https://stackoverflow.com/questions/42176634/how-can-i-explicitly-signal-completion-of-a-flowable-in-rxjava/42177085#42177085", "title": "How can I explicitly signal completion of a Flowable in RxJava?", "body": "<p>Like suggested by akarnokd, <a href=\"https://github.com/ReactiveX/RxJava/blob/2.x/src/main/java/io/reactivex/processors/ReplayProcessor.java\" rel=\"nofollow noreferrer\">ReplayProcessor</a> do exactly what you want. Replace <code>iterable.add(item)</code> with <code>processor.onNext(item)</code>, and call <code>processor.onComplete()</code> when you are done. </p>\n"}], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3115, "favorite_count": 1, "accepted_answer_id": 42176803, "answer_count": 2, "score": 4, "last_activity_date": 1486823735, "creation_date": 1486821047, "last_edit_date": 1486822044, "question_id": 42176634, "link": "https://stackoverflow.com/questions/42176634/how-can-i-explicitly-signal-completion-of-a-flowable-in-rxjava", "title": "How can I explicitly signal completion of a Flowable in RxJava?", "body": "<p>I'm trying to create a <code>Flowable</code> which is wrapping an <code>Iterable</code>. I push elements to my <code>Iterable</code> periodically but it seems that the <strong>completion</strong> event is implicit. I don't know how to signal that processing is complete. For example in my code:</p>\n\n<pre><code>    // note that this code is written in Kotlin\n    val iterable = LinkedBlockingQueue&lt;Int&gt;()\n    iterable.addAll(listOf(1, 2, 3))\n\n    val flowable = Flowable.fromIterable(iterable)\n            .subscribeOn(Schedulers.computation())\n            .observeOn(Schedulers.computation())\n\n    flowable.subscribe(::println, {it.printStackTrace()}, {println(\"completed\")})\n\n    iterable.add(4)\n\n    Thread.sleep(1000)\n\n    iterable.add(5)\n\n    Thread.sleep(1000)\n</code></pre>\n\n<p>This prints:</p>\n\n<blockquote>\n  <p>1\n  2\n  3\n  4\n  completed</p>\n</blockquote>\n\n<p>I checked the source of the <code>Flowable</code> interface but it seems that I can't signal that a <code>Flowable</code> is complete explicitly. How can I do so? In my program I publish events which have some delay between them and I would like to be explicit when to <code>complete</code> the event flow.</p>\n\n<p><strong>Clarification</strong>:\nI have a long running process which emits events. I gather them in a queue and I expose a method which returns a Flowable which wraps around my queue. The problem is that there might be already elements in the queue when I create the Flowable. I will process the events only once and I know when the flow of events stops so I know when I need to complete the Flowable.</p>\n"}, {"tags": ["java", "android", "properties", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 2, "creation_date": 1487019801, "post_id": 42184751, "comment_id": 71588314, "body": "Minor note, but it may be worth mentioning Kotlin convention is to use <code>value</code> and the setter parameter."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 3, "last_activity_date": 1486879861, "creation_date": 1486879861, "answer_id": 42184751, "question_id": 42174242, "link": "https://stackoverflow.com/questions/42174242/non-optional-property-with-custom-setter-kotlin/42184751#42184751", "title": "Non optional property with custom setter Kotlin", "body": "<p>For that logic you only need to use a <strong>backing field</strong>:</p>\n\n<pre><code>class SkiMarker(mapView: MapView, tag:Tag) : Marker(mapView) {\n    var tag: Tag = tag\n        set(newTag){\n            field = newTag  // `field` is a keyword\n        }\n}\n</code></pre>\n\n<p>Note that code like <code>set(newTag) {tag = newTag}</code> is equivalent to <code>setTag(newTag: Tag) { setTag(newTag) }</code> where it is actually calling the setter from within itself in a recursion.</p>\n\n<p>Also, <code>tag</code> is never <code>null</code>, so <code>if(tag != null)</code> is meaningless. </p>\n"}], "owner": {"reputation": 1710, "user_id": 1443182, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/U6MEM.jpg?s=128&g=1", "display_name": "Mark Gilchrist", "link": "https://stackoverflow.com/users/1443182/mark-gilchrist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 42184751, "answer_count": 1, "score": 1, "last_activity_date": 1486879861, "creation_date": 1486804829, "question_id": 42174242, "link": "https://stackoverflow.com/questions/42174242/non-optional-property-with-custom-setter-kotlin", "title": "Non optional property with custom setter Kotlin", "body": "<p>I hope someone can help, I am writing moving from java to Kotlin and I want to have a property that it initialised in the init block, that has a custom setter but is non optional. </p>\n\n<p>Here is my code below, however this has a warning that tag must be initialised</p>\n\n<p>I would like to make it lateInit, but that means it has to be optional (which I don't want)</p>\n\n<pre><code>class SkiMarker(mapView: MapView, tag:Tag) : Marker(mapView){\nvar tag:Tag      &lt;- ERROR here\n    set(tag){\n        this.tag = tag\n        if(tag != null){\n            this.mPosition = GeoPoint(tag.lat,tag.lon)\n        }\n    }\n\n\ninit {\n    this.tag            = tag\n    this.mPosition      = GeoPoint(tag.lat,tag.lon)\n    val window          = MyInfoWindow(mapView,tag)\n    this.infoWindow     = window\n    window.subject.observeOn(AndroidSchedulers.mainThread()).subscribe { it -&gt;\n        setIconForTracking(it)\n    }\n  } \n}\n</code></pre>\n\n<p>Many thanks in advance for any comments</p>\n"}, {"tags": ["java", "json", "jackson", "kotlin"], "comments": [{"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1486764288, "post_id": 42169379, "comment_id": 71503730, "body": "What do you want it to do?"}, {"owner": {"reputation": 750, "user_id": 2990802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd6kI.jpg?s=128&g=1", "display_name": "0wl", "link": "https://stackoverflow.com/users/2990802/0wl"}, "reply_to_user": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1486764410, "post_id": 42169379, "comment_id": 71503775, "body": "@shmosel I want to skip that wrong item"}], "answers": [{"comments": [{"owner": {"reputation": 750, "user_id": 2990802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd6kI.jpg?s=128&g=1", "display_name": "0wl", "link": "https://stackoverflow.com/users/2990802/0wl"}, "edited": false, "score": 0, "creation_date": 1486765297, "post_id": 42169501, "comment_id": 71504079, "body": "I&#39;m sorry, but your decision is too local. I want to get the ability of skipping such elements because the other fields may also be incorrect."}, {"owner": {"reputation": 27721, "user_id": 1120793, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/Mo0at.jpg?s=128&g=1", "display_name": "Darshan Mehta", "link": "https://stackoverflow.com/users/1120793/darshan-mehta"}, "reply_to_user": {"reputation": 750, "user_id": 2990802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd6kI.jpg?s=128&g=1", "display_name": "0wl", "link": "https://stackoverflow.com/users/2990802/0wl"}, "edited": false, "score": 0, "creation_date": 1486765542, "post_id": 42169501, "comment_id": 71504167, "body": "Well, the question nowhere mentioned the <code>skipping</code> part. Anyway, if you just want to skip the element then why don&#39;t you use <code>@JsonIgnore</code>"}, {"owner": {"reputation": 750, "user_id": 2990802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd6kI.jpg?s=128&g=1", "display_name": "0wl", "link": "https://stackoverflow.com/users/2990802/0wl"}, "edited": false, "score": 0, "creation_date": 1486766185, "post_id": 42169501, "comment_id": 71504403, "body": "It doesn&#39;t suit me. I want to ignore the whole element if any of its fields is wrong."}, {"owner": {"reputation": 1920, "user_id": 4261472, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Rhz3p.jpg?s=128&g=1", "display_name": "Sergei Voitovich", "link": "https://stackoverflow.com/users/4261472/sergei-voitovich"}, "reply_to_user": {"reputation": 750, "user_id": 2990802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd6kI.jpg?s=128&g=1", "display_name": "0wl", "link": "https://stackoverflow.com/users/2990802/0wl"}, "edited": false, "score": 0, "creation_date": 1486816054, "post_id": 42169501, "comment_id": 71515110, "body": "@0wl you can simply remove  <code>BadItem</code> from <code>BadList</code> if any field is <code>null</code>"}, {"owner": {"reputation": 750, "user_id": 2990802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd6kI.jpg?s=128&g=1", "display_name": "0wl", "link": "https://stackoverflow.com/users/2990802/0wl"}, "reply_to_user": {"reputation": 1920, "user_id": 4261472, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Rhz3p.jpg?s=128&g=1", "display_name": "Sergei Voitovich", "link": "https://stackoverflow.com/users/4261472/sergei-voitovich"}, "edited": false, "score": 0, "creation_date": 1486838341, "post_id": 42169501, "comment_id": 71522482, "body": "@SergeyVoitovich unfortunately, my problem not about &quot;null&quot;. Please, read my question more attentively."}], "tags": [], "owner": {"reputation": 27721, "user_id": 1120793, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/Mo0at.jpg?s=128&g=1", "display_name": "Darshan Mehta", "link": "https://stackoverflow.com/users/1120793/darshan-mehta"}, "is_accepted": false, "score": 1, "last_activity_date": 1486765885, "last_edit_date": 1486765885, "creation_date": 1486764772, "answer_id": 42169501, "question_id": 42169379, "link": "https://stackoverflow.com/questions/42169379/custom-deserializer-for-any-list-in-jackson/42169501#42169501", "title": "Custom deserializer for any list in Jackson", "body": "<p>You can write a custom <code>deserializer</code> and implement deserialization logic in it, e.g.:</p>\n\n<pre><code>class ItemIdDeserialiser extends JsonDeserializer&lt;Integer&gt; {\n\n    @Override\n    public Integer deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {\n        Object value = p.getCurrentValue();\n        //Check if it's Integer\n        if(value instanceof Integer){\n            return (Integer) value;\n        }\n        return null; //Or return first element if it's a non empty list\n    }\n}\n</code></pre>\n\n<p>Once this is done, you can annotate the field with <code>@JsonDeserialise</code> to instruct jackson to use your class, e.g.:</p>\n\n<pre><code>class Item {\n\n    @JsonDeserialize(using = ItemIdDeserialiser.class)\n    private Integer id;\n}\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>If you just want to ignore the field in serialization/deserialization then you can annotate it with <code>@JsonIgnore</code>, e.g.</p>\n\n<pre><code>class Item {\n\n        @JsonIgnore\n        private Integer id;\n    }\n</code></pre>\n\n<p>Or even better, remove <code>id</code> from pojo and add <code>@JsonIgnoreProperties</code> on the class, e.g.:</p>\n\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\nclass Item {\n\n}\n</code></pre>\n\n<p>It will automatically ignore the properties which are present in <code>json</code> but not found in class.</p>\n"}, {"tags": [], "owner": {"reputation": 10425, "user_id": 1254944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3383e9bf66559af149b4b91e2f8787c?s=128&d=identicon&r=PG", "display_name": "Sven Hasselbach", "link": "https://stackoverflow.com/users/1254944/sven-hasselbach"}, "is_accepted": false, "score": 1, "last_activity_date": 1486982511, "last_edit_date": 1486982511, "creation_date": 1486981216, "answer_id": 42201651, "question_id": 42169379, "link": "https://stackoverflow.com/questions/42169379/custom-deserializer-for-any-list-in-jackson/42201651#42201651", "title": "Custom deserializer for any list in Jackson", "body": "<p>You can use a <em>\"HidableSerializer\"</em> for this and check the data during serialization</p>\n\n<p><strong>1. Create a <em>IHidable</em> interface</strong></p>\n\n<p>The interface has a <em>isHidden</em> method which is called during serialization</p>\n\n<pre><code>package ch.hasselba.jackson.test;\n\npublic interface IHidable {\n    public boolean isHidden();\n}\n</code></pre>\n\n<p><strong>2. Change your <em>BadItem</em> class</strong></p>\n\n<p>Add the interface and change the setter of <em>id</em>. When property <em>id</em> is deserialized, it is tested if it is an Integer. If not, the item is marked as bad.</p>\n\n<pre><code>package ch.hasselba.jackson.test;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n\n@JsonIgnoreProperties( {\"hidden\"} ) \npublic class BadItem implements IHidable{\n    private Integer id;\n    public String name;\n    private boolean isBadItem;\n    public Integer getId(){\n        return id;\n    }\n    public void setId(Object value){\n        if( value instanceof Integer ){\n            this.id = (Integer) value;\n        }else{\n            this.isBadItem = true;\n        }\n    }\n    public boolean isHidden() {\n        return isBadItem;\n    }\n}\n</code></pre>\n\n<p><strong>3. Create a <em>HidableSerializer</em></strong></p>\n\n<pre><code>package ch.hasselba.jackson.test;\n\nimport java.io.IOException;\n\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport com.fasterxml.jackson.databind.ser.std.StdSerializer;\n\n\n@SuppressWarnings(\"serial\")\npublic class HidableSerializer&lt;T&gt; extends StdSerializer&lt;T&gt; {\n\n    private JsonSerializer&lt;T&gt; defaultSerializer;\n\n    protected HidableSerializer(Class&lt;T&gt; t) {\n        super(t);\n    }\n\n    public JsonSerializer&lt;T&gt; getDefaultSerializer() {\n        return defaultSerializer;\n    }\n\n    public void setDefaultSerializer(JsonSerializer&lt;T&gt; defaultSerializer) {\n        this.defaultSerializer = defaultSerializer;\n    }\n\n    @Override\n    public void serialize(T value, JsonGenerator jgen, SerializerProvider provider)\n            throws IOException, JsonProcessingException {\n\n        if( value instanceof IHidable ){\n            IHidable hidableValue = (IHidable) value;\n            if( hidableValue.isHidden() )\n                return;\n        }\n\n        defaultSerializer.serialize(value, jgen, provider);\n    }\n\n}\n</code></pre>\n\n<p><strong>4. Register the <em>HidableSerializer</em> and that's it</strong></p>\n\n<pre><code>package ch.hasselba.jackson.test;\n\nimport com.fasterxml.jackson.annotation.JsonInclude.Include;\nimport com.fasterxml.jackson.databind.BeanDescription;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationConfig;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport com.fasterxml.jackson.databind.ser.BeanSerializerModifier;\n\npublic class Demo {\n\n    @SuppressWarnings(\"serial\")\n    public static void main(String[] args) {\n\n        // register the HidableSerializer\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.setSerializationInclusion(Include.NON_EMPTY);\n        mapper.registerModule(new SimpleModule() {\n            @Override\n            public void setupModule(SetupContext context) {\n                super.setupModule(context);\n                context.addBeanSerializerModifier(new BeanSerializerModifier() {\n                    @Override\n                    public JsonSerializer&lt;?&gt; modifySerializer(\n                      SerializationConfig config, BeanDescription desc, JsonSerializer&lt;?&gt; serializer) {\n                        if (BadItem.class.isAssignableFrom(desc.getBeanClass())) {\n                            HidableSerializer ser = new HidableSerializer(BadItem.class);\n                            ser.setDefaultSerializer(serializer);\n                            return ser;\n                        }\n                        return serializer;\n                    }\n                });\n            }\n        });\n\n        String content = \"{  \\\"items\\\": [    {      \\\"id\\\": 1,      \\\"name\\\": \\\"Item1\\\"    },    {      \\\"id\\\": 2,      \\\"name\\\": \\\"Item2\\\"    },    {      \\\"id\\\":[],      \\\"name\\\": \\\"Item3\\\"    }  ]}\";\n\n        // build the Object\n        BadList test = null;\n        try {\n            test =  mapper.readValue(content, BadList.class);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        // and now convert it back to a String\n        String data = null;\n        try {\n             data = mapper.writeValueAsString(test);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        // print the result\n        System.out.println( data );\n    }\n\n}\n</code></pre>\n\n<p>When changing the id \"[]\" to an Integer value, the Item is displayed, otherwise it is empty.</p>\n\n<p>The result:</p>\n\n<pre><code>{\"items\":[{\"id\":1,\"name\":\"Item1\"},{\"id\":2,\"name\":\"Item2\"}]}\n</code></pre>\n"}], "owner": {"reputation": 750, "user_id": 2990802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yd6kI.jpg?s=128&g=1", "display_name": "0wl", "link": "https://stackoverflow.com/users/2990802/0wl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2884, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1486982511, "creation_date": 1486764061, "last_edit_date": 1486765794, "question_id": 42169379, "link": "https://stackoverflow.com/questions/42169379/custom-deserializer-for-any-list-in-jackson", "title": "Custom deserializer for any list in Jackson", "body": "<p>I have a problem with wrong objects in lists. For instance I've a JSON model:</p>\n\n<pre><code>{\n  \"items\": [\n    {\n      \"id\": 1,\n      \"name\": \"Item1\"\n    },\n    {\n      \"id\": 2,\n      \"name\": \"Item2\"\n    },\n    {\n      \"id\": [],\n      \"name\": \"Item3\"\n    }\n  ]\n}\n</code></pre>\n\n<p>and two POJO</p>\n\n<pre><code>data class BadList(val items: List&lt;BadItem&gt;)\n\ndata class BadItem(val id: Int, val name: String)\n</code></pre>\n\n<p>Of course, when the parser stumbles upon a third element I get the exception</p>\n\n<pre><code>com.fasterxml.jackson.databind.JsonMappingException: Can not deserialize instance of java.lang.Integer out of START_ARRAY token\n at [Source: {\"items\":[{\"id\":1,\"name\":\"Item1\"},{\"id\":2,\"name\":\"Item2\"},{\"id\":[],\"name\":\"Item3\"}]}; line: 1, column: 19] (through reference chain: my.package.BadList[\"items\"]-&gt;java.util.ArrayList[2]-&gt;my.package.BadItem[\"id\"])\n</code></pre>\n\n<p>Who knows how to get around this? I want to skip that wrong item.</p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "edited": false, "score": 0, "creation_date": 1486739567, "post_id": 42162549, "comment_id": 71490304, "body": "Thats more then I expected :D Thank you!"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "reply_to_user": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "edited": false, "score": 0, "creation_date": 1486824784, "post_id": 42162549, "comment_id": 71517861, "body": "You&#39;re welcome :) It probably hasn&#39;t seen wide spread usage yet, so please let me know if you run into any issues."}, {"owner": {"reputation": 4195, "user_id": 214720, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qorBd.jpg?s=128&g=1", "display_name": "woky", "link": "https://stackoverflow.com/users/214720/woky"}, "edited": false, "score": 0, "creation_date": 1513103009, "post_id": 42162549, "comment_id": 82519449, "body": "How do you use it from Java/Sacla?"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1513109307, "post_id": 42162549, "comment_id": 82522758, "body": "TornadoFX is made for use with Kotlin only, although some functions can be called from other JVM languages as well. It&#39;s possible to call these functions, but it would be cumbersome and look weird."}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 2, "last_activity_date": 1486739174, "creation_date": 1486739174, "answer_id": 42162549, "question_id": 42162050, "link": "https://stackoverflow.com/questions/42162050/how-to-fill-available-tableview-width-with-columns/42162549#42162549", "title": "How to fill available tableview width with columns?", "body": "<p>TornadoFX comes with an advanced column resize policy called <code>SmartResize</code>. You assign it to a TableView like this:</p>\n\n<pre><code>columnResizePolicy = SmartResize.POLICY\n</code></pre>\n\n<p>By default it tries to do something useful depending on the data, and it will assign any left over width to the last column.</p>\n\n<p>You can configure resizing options per column by calling the appropriate configurator function. For example, to tell the policy to give remaining width to a given column:</p>\n\n<pre><code>column(\"Name\", Person::nameProperty).remainingWidth()\n</code></pre>\n\n<p>You can configure multiple columns to receive remaning width, so that they will share the remaining width between them.</p>\n\n<p><code>contentWidth()</code> will make sure the column width fits the content, with optional additional padding: <code>contentWidth(padding = 50.0)</code>.</p>\n\n<p>Most resize options also take an optional <code>useAsMin</code> parameter which will enforce the given setting as a minimum width for the column. <code>useAsMax</code> does the same for max width. You will get a fixed size by setting both <code>useAsMin</code> and <code>useAsMax</code> or specifying the <code>fixedWidth(width)</code> option.</p>\n\n<p>You can distribute space using the <code>weigthedWidth(weightNum)</code> function, or even the <code>pctWidth(pctNum)</code> function. All these modes can be combined</p>\n\n<p>Please see the <a href=\"https://edvin.gitbooks.io/tornadofx-guide/content/Appendix%20A%20-%20Supplementary%20Topics.html#a2---tableview-advanced-column-resizing\" rel=\"nofollow noreferrer\">TornadoFX Guide chapter about the resize policy</a> for more information:</p>\n"}], "owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1101, "favorite_count": 0, "accepted_answer_id": 42162549, "answer_count": 1, "score": 0, "last_activity_date": 1486739174, "creation_date": 1486737714, "last_edit_date": 1495542820, "question_id": 42162050, "link": "https://stackoverflow.com/questions/42162050/how-to-fill-available-tableview-width-with-columns", "title": "How to fill available tableview width with columns?", "body": "<p>When tableview is created, the default behaviour of columns is to leave a lot of empty space. Is there a way to automatically fill the space?</p>\n\n<p>One solution is described here:\n<a href=\"https://stackoverflow.com/questions/10152828/javafx-2-automatic-column-width\">JavaFX 2 Automatic Column Width</a>\nbut this seems a little cumbersome. </p>\n"}, {"tags": ["dictionary", "kotlin", "literals"], "answers": [{"comments": [{"owner": {"reputation": 14934, "user_id": 162410, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/97a472a751e503a7f8e5d88ba087a87c?s=128&d=identicon&r=PG", "display_name": "Cedric Beust", "link": "https://stackoverflow.com/users/162410/cedric-beust"}, "edited": false, "score": 0, "creation_date": 1486751547, "post_id": 42161067, "comment_id": 71497531, "body": "You probably mean <code>mutableMapOf()</code>? There&#39;s no <code>hashMap()</code> in the Kotlin runtime"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "reply_to_user": {"reputation": 14934, "user_id": 162410, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/97a472a751e503a7f8e5d88ba087a87c?s=128&d=identicon&r=PG", "display_name": "Cedric Beust", "link": "https://stackoverflow.com/users/162410/cedric-beust"}, "edited": false, "score": 2, "creation_date": 1486840895, "post_id": 42161067, "comment_id": 71523346, "body": "@CedricBeust No, I actually meant <code>hashMap()</code> ( see here: <a href=\"https://blog.jetbrains.com/kotlin/2012/06/kotlin-m2-is-out/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2012/06/kotlin-m2-is-out</a> ) ... but as you can see: that was 2012; and 2017, <code>hashMapOf()</code> is the way to go."}, {"owner": {"reputation": 5565, "user_id": 683321, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3a8934bdaec0f8a7a138faf357339a56?s=128&d=identicon&r=PG", "display_name": "yegle", "link": "https://stackoverflow.com/users/683321/yegle"}, "edited": false, "score": 4, "creation_date": 1516646194, "post_id": 42161067, "comment_id": 83763946, "body": "While this is very close to a map literal but I would still argue it&#39;s not the same: you still need to use function call syntax and cannot have an extra comma after the last element."}, {"owner": {"reputation": 10518, "user_id": 38557, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/76071d244f6cb779def2c3311c02d874?s=128&d=identicon&r=PG", "display_name": "noamtm", "link": "https://stackoverflow.com/users/38557/noamtm"}, "edited": false, "score": 0, "creation_date": 1579719663, "post_id": 42161067, "comment_id": 105864031, "body": "It&#39;s 2020, and I&#39;m very frustrated that Kotlin still doesn&#39;t have map/array literals like in JS and Swift."}], "tags": [], "owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "is_accepted": true, "score": 94, "last_activity_date": 1528714756, "last_edit_date": 1528714756, "creation_date": 1486734824, "answer_id": 42161067, "question_id": 42161036, "link": "https://stackoverflow.com/questions/42161036/does-kotlin-have-a-syntax-for-map-literals/42161067#42161067", "title": "Does Kotlin have a syntax for Map literals?", "body": "<p>You can do:</p>\n\n<pre><code>val map = hashMapOf(\n  \"John\" to \"Doe\",\n  \"Jane\" to \"Smith\"\n)\n</code></pre>\n\n<p>Here, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/to.html\" rel=\"noreferrer\"><code>to</code></a> is an infix function that creates a <code>Pair</code>.</p>\n\n<p>Or, more abstract: use <code>mapOf()</code> like </p>\n\n<pre><code>val map = mapOf(\"a\" to 1, \"b\" to 2, \"c\" to 3)\n</code></pre>\n\n<p>( found on <a href=\"https://kotlinlang.org/docs/reference/idioms.html\" rel=\"noreferrer\">kotlinlang</a> )</p>\n"}, {"comments": [{"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 1, "creation_date": 1598062721, "post_id": 50322520, "comment_id": 112343951, "body": "If you let me know how this answer is not useful, I can write better ones in the future :D"}], "tags": [], "owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "is_accepted": false, "score": 14, "last_activity_date": 1526266138, "creation_date": 1526266138, "answer_id": 50322520, "question_id": 42161036, "link": "https://stackoverflow.com/questions/42161036/does-kotlin-have-a-syntax-for-map-literals/50322520#50322520", "title": "Does Kotlin have a syntax for Map literals?", "body": "<p>There is a proposal to add them to the language: </p>\n\n<p><strong><a href=\"https://github.com/Kotlin/KEEP/pull/112\" rel=\"noreferrer\">Kotlin/KEEP: Collection Literals</a></strong></p>\n\n<p>If this goes through, the syntax might be like:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>val map = [\"a\" : 1, \"b\" : 2, \"c\" : 3]\n</code></pre>\n"}], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16872, "favorite_count": 4, "accepted_answer_id": 42161067, "answer_count": 2, "score": 64, "last_activity_date": 1528714756, "creation_date": 1486734733, "question_id": 42161036, "link": "https://stackoverflow.com/questions/42161036/does-kotlin-have-a-syntax-for-map-literals", "title": "Does Kotlin have a syntax for Map literals?", "body": "<p>In JavaScript: <code>{foo: bar, biz: qux}</code>.</p>\n\n<p>In Ruby: <code>{foo =&gt; bar, biz =&gt; qux}</code>.</p>\n\n<p>In Java:</p>\n\n<pre><code>HashMap&lt;K, V&gt; map = new HashMap&lt;&gt;();\nmap.put(foo, bar);\nmap.put(biz, qux);\n</code></pre>\n\n<p>Surely Kotlin can do better than Java?</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1486740505, "post_id": 42159283, "comment_id": 71490921, "body": "<code>_$_findViewCache</code> fields are automatically generated in <code>Activity</code> and <code>Fragment</code> classes. Do you have <code>_$_findViewCache</code> inside your custom View class?"}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "reply_to_user": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 1, "creation_date": 1486741327, "post_id": 42159283, "comment_id": 71491436, "body": "yes. the code is generated (the map and the cache function are there). But accessing a property via syntehetic is translated into findViewById byte code (i see it through the &#39;Kotlin Bytecode&#39; option)"}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "reply_to_user": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1486742608, "post_id": 42159283, "comment_id": 71492265, "body": "this is kinda critical if its a bug. specially in views that perform animations, in which findViewbyId is called so many times. Let me know if you need any extra info"}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "reply_to_user": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1486759522, "post_id": 42159283, "comment_id": 71501637, "body": "@yanex is this supposed to be the default behavior or am i missing sth?"}, {"owner": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1486767948, "post_id": 42159283, "comment_id": 71505002, "body": "I will investigate this shortly."}, {"owner": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1486768081, "post_id": 42159283, "comment_id": 71505042, "body": "I mean, caching in Views is not supported now, and the <code>findViewById</code> call generation is an intended behavior, but the caching function presence is definitely a bug."}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "reply_to_user": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1486830987, "post_id": 42159283, "comment_id": 71519907, "body": "oh i didnt know. that, every syntetic property on views triggers a call to findViById which isnt optimal on views with animations"}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "reply_to_user": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1486831057, "post_id": 42159283, "comment_id": 71519925, "body": "@yanes another question, iv noticed that every call to a view in activity triggers a getter that has a cast inside it. so everytime we use it, it has that cast. is this supposed to be like this?"}], "answers": [{"tags": [], "owner": {"reputation": 2299, "user_id": 1596308, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JxwHy.png?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/1596308/adam"}, "is_accepted": false, "score": 2, "last_activity_date": 1511513995, "creation_date": 1511513995, "answer_id": 47469646, "question_id": 42159283, "link": "https://stackoverflow.com/questions/42159283/kotlin-synthetic-properties/47469646#47469646", "title": "Kotlin Synthetic properties", "body": "<p><a href=\"https://antonioleiva.com/kotlin-android-extensions/\" rel=\"nofollow noreferrer\">This works now. Blog post on kotlin-android-extensions</a> </p>\n\n<p>The custom class shall have the cache generated and use it:</p>\n\n<pre><code>itemTitle.text = \"Hello World!\"\n</code></pre>\n\n<p>this in a custom view class, becomes:</p>\n\n<pre><code>((TextView)this._$_findCachedViewById(id.itemTitle)).setText((CharSequence)\"Hello World!\");\n</code></pre>\n\n<p>utilizing the cache properly</p>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4248, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1516283404, "creation_date": 1486729268, "last_edit_date": 1516283404, "question_id": 42159283, "link": "https://stackoverflow.com/questions/42159283/kotlin-synthetic-properties", "title": "Kotlin Synthetic properties", "body": "<p>I have noticed that Kotlin synthetic properties don't work on CustomViews. I don't know if it is intended or not. When reading the generated java class, i see the cache is present:</p>\n\n<pre><code>private HashMap _$_findViewCache;\n</code></pre>\n\n<p>but is never used. Instead, any time a view is needed, <code>findViewById</code> is called. Is this the default behavior? Synthetic properties only working on activities and fragments?</p>\n"}, {"tags": ["rx-java", "kotlin", "reactive-programming"], "answers": [{"tags": [], "owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "is_accepted": true, "score": 2, "last_activity_date": 1486726881, "creation_date": 1486726881, "answer_id": 42158537, "question_id": 42158279, "link": "https://stackoverflow.com/questions/42158279/order-of-setting-schedulers-in-rx/42158537#42158537", "title": "Order of setting Schedulers in Rx", "body": "<p>RxJava Schedulers use daemon threads which may stop or not run at all if the \"main\" thread of Java exits. When I run both setups, sometimes the second doesn't print anything either, sometimes it does; it is probabilistic you see something or not. </p>\n\n<p>It really depends on how fast the <code>newThread</code> reacts and executes the code upstream. For the second case, since it has a longer set of subscriptions happening on the main thread, the time the execution returns after the <code>subscribe</code>, the <code>newThread</code> may have enough time to trigger the print.</p>\n\n<p>If you put <code>Thread.sleep(1000)</code> you'll see both print the value.</p>\n"}, {"tags": [], "owner": {"reputation": 2973, "user_id": 3940047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3f80c2a07ef0d18e0edc8fc4a4f59583?s=128&d=identicon&r=PG&f=1", "display_name": "Pavan Kumar", "link": "https://stackoverflow.com/users/3940047/pavan-kumar"}, "is_accepted": false, "score": 2, "last_activity_date": 1486730414, "last_edit_date": 1486730414, "creation_date": 1486726912, "answer_id": 42158545, "question_id": 42158279, "link": "https://stackoverflow.com/questions/42158279/order-of-setting-schedulers-in-rx/42158545#42158545", "title": "Order of setting Schedulers in Rx", "body": "<p>Actually both of them print the result. The only difference is the timing. This is what I believe to be the explanation to the behavior observed - In first case, <code>flatMap</code> is directly subscribed to the result of <code>just</code> on <code>main</code> thread and <code>println</code> on a new thread. Spawning a new thread and <code>println</code> both being intensive operations take time to execute and the <code>main</code> thread exits before that.</p>\n\n<p>In second case, <code>flatMap</code> subscribes to <code>just</code> on a new thread and <code>println</code> subscribes to <code>flatMap</code> on <code>main</code> thread. Thus, <code>main</code> thread is kept more occupied due to dependency post spawning a new thread and we see the result before <code>main</code> exits.</p>\n\n<p>You can attempt to execute the same with the below code in last line to see the difference.</p>\n\n<pre><code>Observable.timer(3, TimeUnit.SECONDS).toBlocking().subscribe();\n</code></pre>\n"}], "owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 42158537, "answer_count": 2, "score": 1, "last_activity_date": 1486730414, "creation_date": 1486726022, "question_id": 42158279, "link": "https://stackoverflow.com/questions/42158279/order-of-setting-schedulers-in-rx", "title": "Order of setting Schedulers in Rx", "body": "<p>I'm really new to Rx, just wondering how does the order of <code>subscribeOn</code> impact <code>Observable</code></p>\n\n<pre><code>//This will not print anything\nObservable.just(\"whatever\")\n        .flatMap { s -&gt; Observable.just(s.length) }\n        .subscribeOn(Schedulers.newThread())\n        .subscribe(::println)\n\n//This prints the length\nObservable.just(\"whatever\")\n        .subscribeOn(Schedulers.newThread())\n        .flatMap { s -&gt; Observable.just(s.length) }\n        .subscribe(::println)\n</code></pre>\n\n<p>What happend under the hood and why?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 9191, "user_id": 2191890, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pA1bu.jpg?s=128&g=1", "display_name": "Roc Boronat", "link": "https://stackoverflow.com/users/2191890/roc-boronat"}, "is_accepted": true, "score": 82, "last_activity_date": 1547286455, "last_edit_date": 1547286455, "creation_date": 1486725275, "answer_id": 42158020, "question_id": 42158019, "link": "https://stackoverflow.com/questions/42158019/extension-with-name-android-does-not-exist-error-when-adding-kotlin-to-andro/42158020#42158020", "title": "&quot;Extension with name &#39;android&#39; does not exist&quot; error when adding Kotlin to Android project", "body": "<p>Android Studio modifies your <code>build.gradle</code> adding <code>apply plugin: 'kotlin-android'</code> above <code>apply plugin: 'com.android.application'</code>. Just move the Kotlin line below the Android one and Gradle will run smoothly. It should look like this example:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 834, "user_id": 3769679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/poBrz.jpg?s=128&g=1", "display_name": "Mani", "link": "https://stackoverflow.com/users/3769679/mani"}, "is_accepted": false, "score": 13, "last_activity_date": 1529862065, "last_edit_date": 1529862065, "creation_date": 1528698440, "answer_id": 50791568, "question_id": 42158019, "link": "https://stackoverflow.com/questions/42158019/extension-with-name-android-does-not-exist-error-when-adding-kotlin-to-andro/50791568#50791568", "title": "&quot;Extension with name &#39;android&#39; does not exist&quot; error when adding Kotlin to Android project", "body": "<p>This is the correct order for above extension issue.\n</p>\n\n<pre><code> apply plugin: 'com.android.application'\n apply plugin: 'kotlin-android'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10692809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_gcXOmH6qjk/AAAAAAAAAAI/AAAAAAAACdI/3HlnewDO7Cc/photo.jpg?sz=128", "display_name": "Mixat Techno", "link": "https://stackoverflow.com/users/10692809/mixat-techno"}, "is_accepted": false, "score": 0, "last_activity_date": 1612931085, "last_edit_date": 1612931085, "creation_date": 1612930501, "answer_id": 66130824, "question_id": 42158019, "link": "https://stackoverflow.com/questions/42158019/extension-with-name-android-does-not-exist-error-when-adding-kotlin-to-andro/66130824#66130824", "title": "&quot;Extension with name &#39;android&#39; does not exist&quot; error when adding Kotlin to Android project", "body": "<p>with new versions use</p>\n<pre><code>plugins {\n  id 'com.android.application'\n  id 'kotlin-android'\n}\n</code></pre>\n"}], "owner": {"reputation": 9191, "user_id": 2191890, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pA1bu.jpg?s=128&g=1", "display_name": "Roc Boronat", "link": "https://stackoverflow.com/users/2191890/roc-boronat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10792, "favorite_count": 4, "accepted_answer_id": 42158020, "answer_count": 3, "score": 33, "last_activity_date": 1612931085, "creation_date": 1486725275, "last_edit_date": 1593761822, "question_id": 42158019, "link": "https://stackoverflow.com/questions/42158019/extension-with-name-android-does-not-exist-error-when-adding-kotlin-to-andro", "title": "&quot;Extension with name &#39;android&#39; does not exist&quot; error when adding Kotlin to Android project", "body": "<p>When I try to add Kotlin to our Android project using <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-android.html\" rel=\"noreferrer\">the official Kotlin tutorial</a>, Gradle fails launching the error <code>Extension with name 'android' does not exist</code>.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 0, "creation_date": 1486715081, "post_id": 42154346, "comment_id": 71474924, "body": "great, I was trying to do that but gave up because I didn&#39;t know the notation (also I was having trouble searching for an <code>!</code> in google :)"}], "tags": [], "owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "is_accepted": true, "score": 3, "last_activity_date": 1486713777, "creation_date": 1486713777, "answer_id": 42154346, "question_id": 42152991, "link": "https://stackoverflow.com/questions/42152991/localdatetime-extension-functions-and-smart-casting/42154346#42154346", "title": "LocalDateTime extension functions and smart casting", "body": "<p>If you take a closer look at the <code>isBefore</code> signature, it expects <code>ChronoLocalDateTime&lt;*&gt;!</code> type. This is kotlin notation for a <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#notation-for-platform-types\" rel=\"nofollow noreferrer\">Platform Type</a>. Exclamation mark means it expects either <code>ChronoLocalDateTime&lt;*&gt;</code> or <code>ChronoLocalDateTime&lt;*&gt;?</code> while your <code>isNotBefore</code> method expects non nullable type.</p>\n\n<p>If you change your extension function to accept nullable it will work the same way.</p>\n\n<pre><code>fun LocalDateTime.isNotBefore(other: ChronoLocalDateTime&lt;*&gt;?) = !isBefore(other)\n</code></pre>\n"}], "owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 42154346, "answer_count": 1, "score": 1, "last_activity_date": 1486713777, "creation_date": 1486708710, "question_id": 42152991, "link": "https://stackoverflow.com/questions/42152991/localdatetime-extension-functions-and-smart-casting", "title": "LocalDateTime extension functions and smart casting", "body": "<p>I tried and failed (or partially succeeded) to implement extension functions for <code>LocalDateTime</code></p>\n\n<p>here is my attempt:</p>\n\n<pre><code>fun LocalDateTime.isNotBefore(other: ChronoLocalDateTime&lt;*&gt;) = !isBefore(other)\n</code></pre>\n\n<p>The problem is that IntelliJ complains that it cannot smartcast my <code>curTime</code>variable (which is a <code>val</code> and <code>LocalDateTime?</code>)</p>\n\n<p><code>isNotBefore(curTime)</code> will have a red squiggly line and complain that it can't smartcast it. So I must use <code>!!</code></p>\n\n<p>don't worry if you can't replicate it, I have a lot of code - these are the important parts.</p>\n\n<p>The difference is that a regular <code>LocalDateTime</code> method like <code>isBefore()</code> does not need the smartcast in this spot.</p>\n\n<p>So this means I didn't implement something correctly in my extension function.</p>\n\n<p>Does anyone know how I can fix the extension function so that I don't need to use <code>!!</code>?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 10, "last_activity_date": 1486666350, "last_edit_date": 1486666350, "creation_date": 1486665717, "answer_id": 42144503, "question_id": 42144136, "link": "https://stackoverflow.com/questions/42144136/kotlin-read-only-property-with-and-without-getter/42144503#42144503", "title": "Kotlin read only property with and without getter", "body": "<p>They are not equivalent. The custom getter is indeed evaluated on each property access, similarly to a normal function, while a <code>val</code> property with no custom accessors is only evaluated once on initialization (and is actually stored in a <code>final</code> field on JVM platform).</p>\n\n<p>Here are at least a few more differences:</p>\n\n<ul>\n<li><p>The control flow analysis and nullability inference takes it into account if a property has a custom getter (or is <code>open</code> and thus might be overridden with a custom getter), because there's no guarantee that the property returns the same value on successive calls:</p>\n\n<pre><code>if (someObject.defaultGetterProperty != null) {\n    someObject.defaultGetterProperty.let { println(it) } // OK\n}\n</code></pre>\n\n<p><sup></sup></p>\n\n<pre><code>if (someObject.propertyWithCustomGetter != null) {\n    someObject.propertyWithCustomGetter { println(it) } // Error: cannot smart-cast\n}\n</code></pre></li>\n<li><p>When a property is <code>private</code>, if it has no custom getter then the getter is not generated at all and the backing field is accessed directly. This, however, is an implementation detail and not something to rely on.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "is_accepted": false, "score": 3, "last_activity_date": 1486726931, "last_edit_date": 1486726931, "creation_date": 1486701705, "answer_id": 42151664, "question_id": 42144136, "link": "https://stackoverflow.com/questions/42144136/kotlin-read-only-property-with-and-without-getter/42151664#42151664", "title": "Kotlin read only property with and without getter", "body": "<p>No. In addition to @hotkey's reasons, here's a simple demonstration using mutable properties showing when they're definitely not equivalent. TLDR: if your property is calculated using a mutable property, always use a custom getter over an initializer.</p>\n\n<pre><code>data class Calculation(val value1: Int, var value2: Int) {\n    val sum: Int = value1 + value2\n    val sumWithGetter: Int\n        get() = value1 + value2\n}\n\nval calculation = Calculation(1, 2)\nprintln(calculation.sumWithGetter) // prints 3\nprintln(calculation.sum)           // prints 3\n\ncalculation.value2 = 0\nprintln(calculation.sumWithGetter) // prints 1 (correct)\nprintln(calculation.sum)           // prints 3!\n</code></pre>\n"}], "owner": {"reputation": 1464, "user_id": 509749, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/d57d8b027fe943f061b6187d870443a7?s=128&d=identicon&r=PG", "display_name": "chrisortman", "link": "https://stackoverflow.com/users/509749/chrisortman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5533, "favorite_count": 1, "accepted_answer_id": 42144503, "answer_count": 2, "score": 13, "last_activity_date": 1486726931, "creation_date": 1486664461, "last_edit_date": 1486665785, "question_id": 42144136, "link": "https://stackoverflow.com/questions/42144136/kotlin-read-only-property-with-and-without-getter", "title": "Kotlin read only property with and without getter", "body": "<p>Are these equivalent?</p>\n\n<ul>\n<li><p><code>val foo = someFooReturningFunction()</code></p></li>\n<li><p><code>val foo get() = someFooReturningFunction()</code></p></li>\n</ul>\n\n<p>The way I understood the documentation they were, but in my own testing they are not. </p>\n\n<p>With the <em>get()</em> <code>someFooReturningFunction()</code> is evaluated each time the property is accessed, without it is only evaluated once. </p>\n"}, {"tags": ["java", "intellij-idea", "netbeans", "kotlin", "ambiguity"], "comments": [{"owner": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "edited": false, "score": 0, "creation_date": 1486653946, "post_id": 42139495, "comment_id": 71447270, "body": "<a href=\"http://stackoverflow.com/questions/564/what-is-the-difference-between-an-int-and-an-integer-in-java-and-c\" title=\"what is the difference between an int and an integer in java and c\">stackoverflow.com/questions/564/&hellip;</a>"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "edited": false, "score": 0, "creation_date": 1486654002, "post_id": 42139495, "comment_id": 71447325, "body": "Uhm, clear, if you want to answer, I&#39;ll accept that"}, {"owner": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "edited": false, "score": 0, "creation_date": 1486654113, "post_id": 42139495, "comment_id": 71447412, "body": "not sure that is enough for an answer, I just thought it would help."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "edited": false, "score": 0, "creation_date": 1486654258, "post_id": 42139495, "comment_id": 71447516, "body": "Well, at begin it seemed to help, but the fact that <code>(Integer, Integer)</code> works makes me confused.. I don&#39;t know how to explain that"}, {"owner": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "edited": false, "score": 0, "creation_date": 1486654436, "post_id": 42139495, "comment_id": 71447645, "body": "The constructor has x: Number etc. Integer inherits from Number, so it gets treated as one  <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/Integer.html</a>"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "edited": false, "score": 0, "creation_date": 1488398730, "post_id": 42139495, "comment_id": 72217742, "body": "@hellyale, btw if you want to answer, I&#39;ll accept that"}], "answers": [{"tags": [], "owner": {"reputation": 1531, "user_id": 4645236, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QVYcq.jpg?s=128&g=1", "display_name": "hellyale", "link": "https://stackoverflow.com/users/4645236/hellyale"}, "is_accepted": true, "score": 1, "last_activity_date": 1488399703, "creation_date": 1488399703, "answer_id": 42541306, "question_id": 42139495, "link": "https://stackoverflow.com/questions/42139495/why-netbeans-complains-about-ambiguity-while-intellij-instead-doesnt/42541306#42541306", "title": "Why Netbeans complains about ambiguity while Intellij instead doesn&#39;t", "body": "<p>At <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html\" rel=\"nofollow noreferrer\">oracles documentation</a> we see that <code>Integer</code> is an object that holds an <code>int</code>.</p>\n\n<p><code>int</code> is a primitive type, whereas <code>Integer</code> is an object. </p>\n\n<p>The constructors you have allow for passing a pair of either type, but when you pass both the constructor does not know what to do. </p>\n\n<p>For more information <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html\" rel=\"nofollow noreferrer\">this question</a> has a good breakdown. </p>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 42541306, "answer_count": 1, "score": 3, "last_activity_date": 1488399703, "creation_date": 1486651057, "last_edit_date": 1486653566, "question_id": 42139495, "link": "https://stackoverflow.com/questions/42139495/why-netbeans-complains-about-ambiguity-while-intellij-instead-doesnt", "title": "Why Netbeans complains about ambiguity while Intellij instead doesn&#39;t", "body": "<p>I have a kotlin math lib with the following <code>Vec2i</code> <a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/vec/_2/Vec2i.kt#L19\" rel=\"nofollow noreferrer\">class and primary constructor</a>:</p>\n\n<pre><code>data class Vec2i(override var x: Int, override var y: Int) : Vec2t&lt;Int&gt;()\n</code></pre>\n\n<p>Then <code>Vec2i</code> has also, among several secondary constructors, one which is supposed to intercept all the other <a href=\"https://github.com/elect86/glm/blob/master/src/main/kotlin/vec/_2/Vec2i.kt#L65\" rel=\"nofollow noreferrer\">number types</a>:</p>\n\n<pre><code>constructor(x: Number, y: Number) : this(x.i, y.i)\n</code></pre>\n\n<p>Everything under Idea compiles and runs. I tested the artifact with a separate java project.</p>\n\n<p>The same artifact doesn't run in a java project if I switch IDE, Netbeans complains about ambiguity between the two.</p>\n\n<p>Why?</p>\n\n<p>Edit: from some further analysis, it turned out Netbeans complains because one of coordinate was <code>int</code>, the other <code>Integer</code>.\nTrying the same on Idea, it says:</p>\n\n<blockquote>\n  <p>cannot resolve constructor</p>\n</blockquote>\n\n<p>So, why calling a costructor with <code>(int, int)</code> or <code>(Integer, Integer)</code> is fine, but <code>(int, Integer)</code> doesn't resolved to the secondary constructor and provoke ambiguity?</p>\n"}, {"tags": ["kotlin", "bitwise-operators"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1486649661, "post_id": 42136112, "comment_id": 71444062, "body": "You mention your actual results (0) but what are you expected results?"}, {"owner": {"reputation": 137, "user_id": 1106003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9f7b4c18b0c8dcba496461e10110995?s=128&d=identicon&r=PG", "display_name": "Andrei Sibircevs", "link": "https://stackoverflow.com/users/1106003/andrei-sibircevs"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1486651309, "post_id": 42136112, "comment_id": 71445263, "body": "I expect that the result will be 0b11111111 or 255."}, {"owner": {"reputation": 137, "user_id": 1106003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9f7b4c18b0c8dcba496461e10110995?s=128&d=identicon&r=PG", "display_name": "Andrei Sibircevs", "link": "https://stackoverflow.com/users/1106003/andrei-sibircevs"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 2, "creation_date": 1486651558, "post_id": 42136112, "comment_id": 71445450, "body": "Oh! I understand. I use wrong operator. The question could be closed."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 1106003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9f7b4c18b0c8dcba496461e10110995?s=128&d=identicon&r=PG", "display_name": "Andrei Sibircevs", "link": "https://stackoverflow.com/users/1106003/andrei-sibircevs"}, "edited": false, "score": 0, "creation_date": 1486649632, "post_id": 42137417, "comment_id": 71444042, "body": "Print is just example. I would like to print Int number. Why {0b00011111 and 0b11100000} always returns 0? 0b00011111  is Int number . 0b11100000 is Int number. And returns Int."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "reply_to_user": {"reputation": 137, "user_id": 1106003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9f7b4c18b0c8dcba496461e10110995?s=128&d=identicon&r=PG", "display_name": "Andrei Sibircevs", "link": "https://stackoverflow.com/users/1106003/andrei-sibircevs"}, "edited": false, "score": 0, "creation_date": 1486655095, "post_id": 42137417, "comment_id": 71448136, "body": "It is always 0, because that is what it is mathematically. What do you mean?"}, {"owner": {"reputation": 907, "user_id": 3074505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/KRt1o.jpg?s=128&g=1", "display_name": "2xsaiko", "link": "https://stackoverflow.com/users/3074505/2xsaiko"}, "edited": false, "score": 0, "creation_date": 1511357216, "post_id": 42137417, "comment_id": 81825982, "body": "A better way (imo) to convert to string would be <code>(0b00011111 and 0x11100000).toString(2)</code>. That way you don&#39;t have to use Java classes"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "reply_to_user": {"reputation": 907, "user_id": 3074505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/KRt1o.jpg?s=128&g=1", "display_name": "2xsaiko", "link": "https://stackoverflow.com/users/3074505/2xsaiko"}, "edited": false, "score": 0, "creation_date": 1511358106, "post_id": 42137417, "comment_id": 81826570, "body": "@therealfarfetchd Oh, nice :) That function was introduced in Kotlin 1.1. This answer was written before that."}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": false, "score": 0, "last_activity_date": 1511358157, "last_edit_date": 1511358157, "creation_date": 1486645159, "answer_id": 42137417, "question_id": 42136112, "link": "https://stackoverflow.com/questions/42136112/bitwise-and-operation-into-the-kotlin/42137417#42137417", "title": "Bitwise &quot;and&quot; operation into the kotlin", "body": "<p>It prints 0 because <code>00011111 and 11100000</code> always returns <code>0</code>. The return type of <code>and</code> is <code>Int</code>, so if you want to print it in base 2 with leading zeroes, you have to format it.</p>\n\n<p>To convert it to a <code>String</code> in base 2, you can call the <code>toString</code> method on <code>Int</code> with a radix parameter:</p>\n\n<pre><code>val numberString = (0b00011111 and 0b11100000).toString(2);\n</code></pre>\n\n<p>This will give you the number in binary format, but without leading zeroes. You need to left-pad with zeroes to get the format you want. I leave that task up to you (hint: <code>padStart</code>) ;)</p>\n"}], "owner": {"reputation": 137, "user_id": 1106003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9f7b4c18b0c8dcba496461e10110995?s=128&d=identicon&r=PG", "display_name": "Andrei Sibircevs", "link": "https://stackoverflow.com/users/1106003/andrei-sibircevs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 804, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511358157, "creation_date": 1486641430, "question_id": 42136112, "link": "https://stackoverflow.com/questions/42136112/bitwise-and-operation-into-the-kotlin", "title": "Bitwise &quot;and&quot; operation into the kotlin", "body": "<p>If negative number is from -31 to -1 then I would like represent it into the format 111XXXXX.\nI try to do it using \"and\" bitwise operator:</p>\n\n<pre><code>println(\"0b00011111 &amp; 0xe0 is ${0b00011111 and 0xe0}\")\nprintln(\"31 &amp; 0xe0 is ${31 and 0xe0}\")\nprintln(\"0b00011111 &amp; 0b11100000 is ${0b00011111 and 0b11100000}\")\n</code></pre>\n\n<p>But the result is always 0. Where did I make the mistake?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 2, "creation_date": 1486634243, "post_id": 42132428, "comment_id": 71433474, "body": "It seems like a bug in Kotlin&#39;s Javascript compiler for version 1.0.6. I tried your example with both version 1.0.6 and the 1.1-beta, and it works with the latter version."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 7345280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3448e6862ee9a4a4dbe71e7771fa2d3d?s=128&d=identicon&r=PG&f=1", "display_name": "user7345280", "link": "https://stackoverflow.com/users/7345280/user7345280"}, "is_accepted": true, "score": 0, "last_activity_date": 1487015295, "creation_date": 1487015295, "answer_id": 42212326, "question_id": 42132428, "link": "https://stackoverflow.com/questions/42132428/configurable-factory-in-kotlin-for-javascript/42212326#42212326", "title": "Configurable factory in Kotlin for JavaScript", "body": "<p>Answering my own question. As @marstran correctly commented, this seems to be a bug in Kolin's Javascript compiler 1.0.6 which seems to be fixed in 1.1-beta. In the meantime, I'm using a workaround similar to the following:</p>\n\n<pre><code>interface I\n\nclass O : I\n\nclass A (val i: I) {\n    constructor(): this(Factory.get().create())\n}\n\ninterface Factory {\n\n    companion object {\n        private var IMPL : Factory? = null\n        fun get(): Factory = IMPL!!\n        fun set(impl: Factory) {\n            IMPL = impl\n        }\n    }\n\n    fun create(): I\n}\n\nclass MyFactory: Factory {\n    override fun create(): I {\n        return O()\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Factory.set(MyFactory())\n    A()\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7345280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3448e6862ee9a4a4dbe71e7771fa2d3d?s=128&d=identicon&r=PG&f=1", "display_name": "user7345280", "link": "https://stackoverflow.com/users/7345280/user7345280"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 42212326, "answer_count": 1, "score": 2, "last_activity_date": 1487015295, "creation_date": 1486631573, "last_edit_date": 1486632190, "question_id": 42132428, "link": "https://stackoverflow.com/questions/42132428/configurable-factory-in-kotlin-for-javascript", "title": "Configurable factory in Kotlin for JavaScript", "body": "<p>I have a Kolin class A whose property is either supplied in a primary constructor, or is created by a factory in the secondary constructor of A.</p>\n\n<pre><code>interface I\n\nclass O : I\n\nclass A (val i: I) {\n    constructor(): this(factory!!.create())\n}\n\ninterface Factory {\n    fun create(): I\n}\n\nclass MyFactory: Factory {\n    override fun create(): I {\n        return O()\n    }\n}\n\nvar factory: Factory? = null\n\nfun main(args: Array&lt;String&gt;) {\n    factory = MyFactory()\n    A()\n}\n</code></pre>\n\n<p>When I compile this code to JavaScript (Kolin Compiler version 1.0.6-release-127) and run it in a browser (Safari 10.0.3), I get the following runtime error:</p>\n\n<pre><code>ReferenceError:Can't find variable: tmp$0\n</code></pre>\n\n<p>The error occurs in the secondary constructor of A. It seems that Kolin has a problem in performing the null check of a parameter in the secondary constructor. The code runs correctly when I change the factory declaration to \"not null\" and remove the factory initialization from the main() method:</p>\n\n<pre><code>val factory: Factory = MyFactory()\n\nfun main(args: Array&lt;String&gt;) {\n    A()\n}\n</code></pre>\n\n<p>But this is not what I want, since I want to be able to configure the factory at application startup time.</p>\n\n<p>Do I miss something, or is this a bug in Kotlin's JavaScript compiler? Does anybody know a workaround for this problem? Is there another or better way to design configurable factories in Kotlin for JavaScript?</p>\n\n<p>Generated JavaScript code:</p>\n\n<pre><code>var KotlinTest = function (Kotlin) {\n  'use strict';\n  var _ = Kotlin.defineRootPackage(function () {\n    this.factory = null;\n  }, /** @lends _ */ {\n    I: Kotlin.createTrait(null),\n    O: Kotlin.createClass(function () {\n      return [_.I];\n    }, function O() {\n    }),\n    A: Kotlin.createClass(null, function A(i) {\n      this.i = i;\n    }),\n    A_init: function ($this) {\n      $this = $this || Object.create(_.A.prototype);\n      _.A.call($this, ((tmp$0 = _.factory) != null ? tmp$0 : Kotlin.throwNPE()).create());\n      return $this;\n    },\n    Factory: Kotlin.createTrait(null),\n    MyFactory: Kotlin.createClass(function () {\n      return [_.Factory];\n    }, function MyFactory() {\n    }, /** @lends _.MyFactory.prototype */ {\n      create: function () {\n        return new _.O();\n      }\n    }),\n    main_kand9s$: function (args) {\n      _.factory = new _.MyFactory();\n      _.A_init();\n    }\n  });\n  Kotlin.defineModule('KotlinTest', _);\n  _.main_kand9s$([]);\n  return _;\n}(kotlin);\n</code></pre>\n"}, {"tags": ["functional-programming", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "edited": false, "score": 1, "creation_date": 1486631863, "post_id": 42132241, "comment_id": 71431787, "body": "Great, thanks! I&#39;m totally agree with you. Actually, I&#39;m not using a List&lt;Any&gt; but I simplified it for the question. + 1 for that point."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "reply_to_user": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "edited": false, "score": 0, "creation_date": 1486632150, "post_id": 42132241, "comment_id": 71431990, "body": "Thanks for the edit Kirill. I started writing the answer thinking it was a Scala question :P"}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": true, "score": 2, "last_activity_date": 1486632113, "last_edit_date": 1486632113, "creation_date": 1486631017, "answer_id": 42132241, "question_id": 42131574, "link": "https://stackoverflow.com/questions/42131574/collecting-items-with-kotlin-streams/42132241#42132241", "title": "Collecting items with Kotlin streams", "body": "<p>First of all, why do you want a <code>List&lt;Any&gt;</code>? You lose all type information by using this data type. You can't do anything with the elements in such a list, without doing some casting (except calling the methods on <code>Any</code>, of course).</p>\n\n<p>If you really want to do it, you can use <code>flatMap</code> like this:</p>\n\n<pre><code>val list = player.bags.flatMap { bag -&gt; listOf(bag) + bag.items }\n</code></pre>\n\n<p>If the order of the list is not important, I would just do this:</p>\n\n<pre><code>val list = player.bags.flatMap { it.items } + player.bags\n</code></pre>\n"}], "owner": {"reputation": 19583, "user_id": 3026283, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/SyT5b.png?s=128&g=1", "display_name": "H&#233;ctor", "link": "https://stackoverflow.com/users/3026283/h%c3%a9ctor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 42132241, "answer_count": 1, "score": 1, "last_activity_date": 1486632113, "creation_date": 1486628982, "last_edit_date": 1486629731, "question_id": 42131574, "link": "https://stackoverflow.com/questions/42131574/collecting-items-with-kotlin-streams", "title": "Collecting items with Kotlin streams", "body": "<p>I have a <code>Player</code> that has <code>Bag</code>s, and each <code>Bag</code> has items (<code>String</code>):</p>\n\n<pre><code>class Player(val bags: List&lt;Bag&gt;)\nclass Bag(val items: List&lt;String&gt;)\n</code></pre>\n\n<p>I want to collect each bag and each item of it in a single list. Using nested for loops, I do it this way:</p>\n\n<pre><code>val player = Player(listOf(Bag(listOf(\"item1.1\", \"item1.2\")), Bag(listOf(\"item2.1\", \"item2.2\"))))\nval list = mutableListOf&lt;Any&gt;()\nfor (bag in player.bags) {\n    list.add(bag)\n    for (item in bag.items) {\n        list.add(item)\n    }\n}\n\n//list contains [Bag@7adf9f5f, item1.1, item1.2, Bag@85ede7b, item2.1, item2.2]\n</code></pre>\n\n<p>How can I achieve the same behaviour using streams? I have tried this, but I just get the items, not the bags:</p>\n\n<pre><code>val list = player.bags.flatMap { bag -&gt; bag.items }\n</code></pre>\n"}]